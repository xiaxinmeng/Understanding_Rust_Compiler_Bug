{"sha": "fbb886eb3867db7f93c0f1a328911d5b308b8680", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmJiODg2ZWIzODY3ZGI3ZjkzYzBmMWEzMjg5MTFkNWIzMDhiODY4MA==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@wolery.cumb.org", "date": "2000-03-01T19:12:18Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-03-01T19:12:18Z"}, "message": "cpphash.c (collect_expansion): Trim trailing white space from macro definitions...\n\n\t* cpphash.c (collect_expansion): Trim trailing white space\n\tfrom macro definitions, but don't go past the last insertion\n\tpoint.\n\t* gcc.dg/cpp-redef.c: New test.\n\nFrom-SVN: r32283", "tree": {"sha": "45dc3801feb7b5799c53891d276d988e0de65f2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45dc3801feb7b5799c53891d276d988e0de65f2d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fbb886eb3867db7f93c0f1a328911d5b308b8680", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbb886eb3867db7f93c0f1a328911d5b308b8680", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fbb886eb3867db7f93c0f1a328911d5b308b8680", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbb886eb3867db7f93c0f1a328911d5b308b8680/comments", "author": null, "committer": null, "parents": [{"sha": "2bfa73e4182ed0a3ed7c7e7c80491d0bc8f511fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bfa73e4182ed0a3ed7c7e7c80491d0bc8f511fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2bfa73e4182ed0a3ed7c7e7c80491d0bc8f511fc"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "29dee244b2f2f4af876f7abdbb6b5402ac06197f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbb886eb3867db7f93c0f1a328911d5b308b8680/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbb886eb3867db7f93c0f1a328911d5b308b8680/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fbb886eb3867db7f93c0f1a328911d5b308b8680", "patch": "@@ -1,3 +1,9 @@\n+2000-03-01  Zack Weinberg  <zack@wolery.cumb.org>\n+\n+\t* cpphash.c (collect_expansion): Trim trailing white space\n+\tfrom macro definitions, but don't go past the last insertion\n+\tpoint.\n+\n Wed Mar  1 12:14:31 MET 2000  Jan Hubicka  <jh@suse.cz>\n \n \t* i386.md (mulqi3): New pattern."}, {"sha": "d44bdcb48c924c4c8a67ca3565963cb927e87b96", "filename": "gcc/cpphash.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbb886eb3867db7f93c0f1a328911d5b308b8680/gcc%2Fcpphash.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbb886eb3867db7f93c0f1a328911d5b308b8680/gcc%2Fcpphash.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpphash.c?ref=fbb886eb3867db7f93c0f1a328911d5b308b8680", "patch": "@@ -487,6 +487,12 @@ collect_expansion (pfile, arglist)\n   else if (last_token == PASTE)\n     cpp_error (pfile, \"`##' at end of macro definition\");\n \n+  /* Trim trailing white space from definition.  */\n+  here = CPP_WRITTEN (pfile);\n+  while (here > last && is_hspace (pfile->token_buffer [here-1]))\n+    here--;\n+  CPP_SET_WRITTEN (pfile, here);\n+  \n   CPP_NUL_TERMINATE (pfile);\n   len = CPP_WRITTEN (pfile) - start + 1;\n   exp = xmalloc (len + 4); /* space for no-concat markers at either end */"}, {"sha": "f51ec94bf1553106721eec71b38ab26e538a81b2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbb886eb3867db7f93c0f1a328911d5b308b8680/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbb886eb3867db7f93c0f1a328911d5b308b8680/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fbb886eb3867db7f93c0f1a328911d5b308b8680", "patch": "@@ -1,3 +1,7 @@\n+2000-03-01  Zack Weinberg  <zack@wolery.cumb.org>\n+\n+\t* gcc.dg/cpp-redef.c: New test.\n+\n 2000-02-29  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* g++.old-deja/g++.pt/unify7.C: New test."}, {"sha": "a5fe2bacc53c5305905423fcddcd82fefa901ff3", "filename": "gcc/testsuite/gcc.dg/cpp-redef.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbb886eb3867db7f93c0f1a328911d5b308b8680/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp-redef.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbb886eb3867db7f93c0f1a328911d5b308b8680/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp-redef.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp-redef.c?ref=fbb886eb3867db7f93c0f1a328911d5b308b8680", "patch": "@@ -0,0 +1,19 @@\n+/* Test for redefining macros with insignificant (i.e. whitespace)\n+   differences.  */\n+\n+/* { dg-do preprocess } */\n+\n+#define foo bar\n+#define /* x */ foo /* x */ bar /* x */\n+\n+#define quux(thud) a one and a thud and a two\n+#define /**/ quux( thud ) /**/ a one and a /**/ thud /**/ and /**/ a two\n+#define quux(thud) a one\tand a thud and a \ttwo /* bah */\n+\n+/* { dg-bogus \"redefined\" \"foo redefined\"\t{ target *-*-* } 7 } */\n+/* { dg-bogus \"redefined\" \"quux redefined\"\t{ target *-*-* } 10 } */\n+/* { dg-bogus \"redefined\" \"quux redefined\"\t{ target *-*-* } 11 } */\n+\n+/* { dg-bogus \"previous def\" \"foo prev def\"\t{ target *-*-* } 6 } */\n+/* { dg-bogus \"previous def\" \"quux prev def\"\t{ target *-*-* } 9 } */\n+/* { dg-bogus \"previous def\" \"quux prev def\"\t{ target *-*-* } 10 } */"}]}