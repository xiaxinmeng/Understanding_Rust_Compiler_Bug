{"sha": "cecd06a9eabc373253e9e268989796eea088ffa2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2VjZDA2YTllYWJjMzczMjUzZTllMjY4OTg5Nzk2ZWVhMDg4ZmZhMg==", "commit": {"author": {"name": "Johannes Pfau", "email": "johannespfau@gmail.com", "date": "2019-04-25T11:22:27Z"}, "committer": {"name": "Johannes Pfau", "email": "jpfau@gcc.gnu.org", "date": "2019-04-25T11:22:27Z"}, "message": "D: Do not add target_libs if phobos is disabled\n\nFrom-SVN: r270571", "tree": {"sha": "c20d14412b85a3a4ea1cf9f8933ab93878119d5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c20d14412b85a3a4ea1cf9f8933ab93878119d5f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cecd06a9eabc373253e9e268989796eea088ffa2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cecd06a9eabc373253e9e268989796eea088ffa2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cecd06a9eabc373253e9e268989796eea088ffa2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cecd06a9eabc373253e9e268989796eea088ffa2/comments", "author": {"login": "jpf91", "id": 583238, "node_id": "MDQ6VXNlcjU4MzIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/583238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jpf91", "html_url": "https://github.com/jpf91", "followers_url": "https://api.github.com/users/jpf91/followers", "following_url": "https://api.github.com/users/jpf91/following{/other_user}", "gists_url": "https://api.github.com/users/jpf91/gists{/gist_id}", "starred_url": "https://api.github.com/users/jpf91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jpf91/subscriptions", "organizations_url": "https://api.github.com/users/jpf91/orgs", "repos_url": "https://api.github.com/users/jpf91/repos", "events_url": "https://api.github.com/users/jpf91/events{/privacy}", "received_events_url": "https://api.github.com/users/jpf91/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a9e6359a90a16479a8558f76e6be2a4835ccd8f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9e6359a90a16479a8558f76e6be2a4835ccd8f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9e6359a90a16479a8558f76e6be2a4835ccd8f6"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "d5b53679c8c354f9761aed3f5d34538d75b642a0", "filename": "gcc/d/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cecd06a9eabc373253e9e268989796eea088ffa2/gcc%2Fd%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cecd06a9eabc373253e9e268989796eea088ffa2/gcc%2Fd%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2FChangeLog?ref=cecd06a9eabc373253e9e268989796eea088ffa2", "patch": "@@ -1,3 +1,7 @@\n+2019-04-25  Johannes Pfau  <johannespfau@gmail.com>\n+\n+\t* config-lang.in: Do not add target_libs if phobos is disabled.\n+\n 2019-04-23  Iain Buclaw  <ibuclaw@gdcproject.org>\n \t    Robin Dapp  <rdapp@linux.ibm.com>\n "}, {"sha": "a3f78c7e6f9b9d87f2b104e202c42c2fff8f9ee4", "filename": "gcc/d/config-lang.in", "status": "modified", "additions": 19, "deletions": 1, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cecd06a9eabc373253e9e268989796eea088ffa2/gcc%2Fd%2Fconfig-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cecd06a9eabc373253e9e268989796eea088ffa2/gcc%2Fd%2Fconfig-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fconfig-lang.in?ref=cecd06a9eabc373253e9e268989796eea088ffa2", "patch": "@@ -25,7 +25,25 @@ language=\"d\"\n \n compilers=\"d21\\$(exeext)\"\n \n-target_libs=\"target-libphobos target-zlib target-libbacktrace\"\n+phobos_target_deps=\"target-zlib target-libbacktrace\"\n+phobos_target_libs=\"target-libphobos $phobos_target_deps\"\n+\n+case \"${noconfigdirs}\" in\n+  # Check if phobos was disabled as unsupported\n+  *target-libphobos*)\n+    disabled_target_libs=\"$disabled_target_libs $phobos_target_deps\"\n+    ;;\n+  *)\n+    # The --disable-<component> handler in configure.ac is called after\n+    # config-lang.in. So when using --disable-libphobos, it has not been\n+    # added to noconfigdirs here yet\n+    if test x${enable_libphobos} != xno; then\n+      target_libs=\"$phobos_target_libs\"\n+    else\n+      disabled_target_libs=\"$disabled_target_libs $phobos_target_libs\"\n+    fi\n+    ;;\n+esac\n \n gtfiles=\"\\$(srcdir)/d/d-tree.h \\$(srcdir)/d/d-builtins.cc \\$(srcdir)/d/d-lang.cc \\$(srcdir)/d/modules.cc \\$(srcdir)/d/typeinfo.cc\"\n "}]}