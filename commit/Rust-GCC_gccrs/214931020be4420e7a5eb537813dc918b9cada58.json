{"sha": "214931020be4420e7a5eb537813dc918b9cada58", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjE0OTMxMDIwYmU0NDIwZTdhNWViNTM3ODEzZGM5MThiOWNhZGE1OA==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2007-02-15T22:15:20Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2007-02-15T22:15:20Z"}, "message": "re PR c++/28943 (Unusable error message when using a conditional-expression with multiple type arguments)\n\n2007-02-15  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n\n\tPR c++/28943\ncp/\n\t* call.c (build_conditional_expr): Improve error message.\ntestsuite/\n\t* g++.dg/warn/pr28943.C: New.\n\nFrom-SVN: r122016", "tree": {"sha": "f7d6b79b1f01e65516552fe5cb37e658943bad5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f7d6b79b1f01e65516552fe5cb37e658943bad5f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/214931020be4420e7a5eb537813dc918b9cada58", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/214931020be4420e7a5eb537813dc918b9cada58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/214931020be4420e7a5eb537813dc918b9cada58", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/214931020be4420e7a5eb537813dc918b9cada58/comments", "author": null, "committer": null, "parents": [{"sha": "f173837aade126f9e3185425ab4c9fca7f7345dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f173837aade126f9e3185425ab4c9fca7f7345dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f173837aade126f9e3185425ab4c9fca7f7345dd"}], "stats": {"total": 37, "additions": 35, "deletions": 2}, "files": [{"sha": "fd068e4155ba20c674b3af14a257d6243102ba2f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/214931020be4420e7a5eb537813dc918b9cada58/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/214931020be4420e7a5eb537813dc918b9cada58/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=214931020be4420e7a5eb537813dc918b9cada58", "patch": "@@ -1,3 +1,8 @@\n+2007-02-15  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR c++/28943\n+\t* call.c (build_conditional_expr): Improve error message.\n+\t\n 2007-02-13  Dirk Mueller  <dmueller@suse.de>\n \n \t* friend.c (do_friend): Annotate warning about friend"}, {"sha": "6690fa2a389a2d1f905bc16a406b38b1267e6a74", "filename": "gcc/cp/call.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/214931020be4420e7a5eb537813dc918b9cada58/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/214931020be4420e7a5eb537813dc918b9cada58/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=214931020be4420e7a5eb537813dc918b9cada58", "patch": "@@ -3281,8 +3281,16 @@ build_conditional_expr (tree arg1, tree arg2, tree arg3)\n \tresult_type = void_type_node;\n       else\n \t{\n-\t  error (\"%qE has type %<void%> and is not a throw-expression\",\n-\t\t    VOID_TYPE_P (arg2_type) ? arg2 : arg3);\n+\t  if (VOID_TYPE_P (arg2_type))\n+            error (\"second operand to the conditional operator \"\n+                   \"is of type %<void%>, \"\n+                   \"but the third operand is neither a throw-expression \"\n+                   \"nor of type %<void%>\");\n+\t  else\n+\t    error (\"third operand to the conditional operator \"\n+                   \"is of type %<void%>, \"\n+\t\t   \"but the second operand is neither a throw-expression \"\n+                   \"nor of type %<void%>\");\n \t  return error_mark_node;\n \t}\n "}, {"sha": "b876518ecee19689efb997bf937cd2fc1fba08ae", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/214931020be4420e7a5eb537813dc918b9cada58/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/214931020be4420e7a5eb537813dc918b9cada58/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=214931020be4420e7a5eb537813dc918b9cada58", "patch": "@@ -1,3 +1,8 @@\n+2007-02-15  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR c++/28943\n+\t* g++.dg/warn/pr28943.C: New.\n+\n 2007-02-15  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \t* gfortran.fortran-torture/execute/math.f90: Fix typo."}, {"sha": "046312c0e4b21c8215b8cc901b54fe1381be4451", "filename": "gcc/testsuite/g++.dg/warn/pr28943.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/214931020be4420e7a5eb537813dc918b9cada58/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr28943.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/214931020be4420e7a5eb537813dc918b9cada58/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr28943.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr28943.C?ref=214931020be4420e7a5eb537813dc918b9cada58", "patch": "@@ -0,0 +1,15 @@\n+// PR c++/28943 void and non-void in conditional expression\n+// { dg-do compile }\n+// { dg-options \"\" }\n+\n+void debug (const char * string)\n+{\n+  return;\n+}\n+\n+int f()\n+{\n+  ( true == false ? 0 : debug (\"Some string\")); // { dg-error \"third operand .* type 'void'.* second operand is neither a throw-expression nor of type 'void'\" }\n+  ( true == false ? debug (\"Some string\") : 0 ); // { dg-error \"second operand .* type 'void'.* third operand is neither a throw-expression nor of type 'void'\" }\n+  return 0;\n+}"}]}