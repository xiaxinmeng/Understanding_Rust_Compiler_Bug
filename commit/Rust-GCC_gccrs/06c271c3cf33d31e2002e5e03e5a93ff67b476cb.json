{"sha": "06c271c3cf33d31e2002e5e03e5a93ff67b476cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDZjMjcxYzNjZjMzZDMxZTIwMDJlNWUwM2U1YTkzZmY2N2I0NzZjYg==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@TechFak.Uni-Bielefeld.DE", "date": "2001-07-18T20:39:52Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2001-07-18T20:39:52Z"}, "message": "natPlainDatagramSocketImpl.cc (mcastGrp): Use new RFC 2533 socket options IPV6_JOIN_GROUP...\n\n\t* java/net/natPlainDatagramSocketImpl.cc (mcastGrp): Use new RFC\n\t2533 socket options IPV6_JOIN_GROUP, IPV6_LEAVE_GROUP, falling\n\tback to old RFC 2133 variants if missing.\n\nFrom-SVN: r44130", "tree": {"sha": "9fb36c4c999c24d7d2265d354cd76a6aaacddc8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9fb36c4c999c24d7d2265d354cd76a6aaacddc8d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/06c271c3cf33d31e2002e5e03e5a93ff67b476cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06c271c3cf33d31e2002e5e03e5a93ff67b476cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06c271c3cf33d31e2002e5e03e5a93ff67b476cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06c271c3cf33d31e2002e5e03e5a93ff67b476cb/comments", "author": null, "committer": null, "parents": [{"sha": "7ba0b0f7c67b4458839cf3d7ef3b6f8cbdee863a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ba0b0f7c67b4458839cf3d7ef3b6f8cbdee863a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ba0b0f7c67b4458839cf3d7ef3b6f8cbdee863a"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "914f698aca08204618278205b7a03888f9f100a6", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06c271c3cf33d31e2002e5e03e5a93ff67b476cb/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06c271c3cf33d31e2002e5e03e5a93ff67b476cb/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=06c271c3cf33d31e2002e5e03e5a93ff67b476cb", "patch": "@@ -1,3 +1,9 @@\n+2001-07-18  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n+\n+\t* java/net/natPlainDatagramSocketImpl.cc (mcastGrp): Use new RFC\n+\t2533 socket options IPV6_JOIN_GROUP, IPV6_LEAVE_GROUP, falling\n+\tback to old RFC 2133 variants if missing.\n+\n 2001-07-18  Tom Tromey  <tromey@redhat.com>\n \n \t* java/io/natFileWin32.cc (_access): Renamed."}, {"sha": "4f6b3194c46354f8115eb23ed2f8f5de040fef99", "filename": "libjava/java/net/natPlainDatagramSocketImpl.cc", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06c271c3cf33d31e2002e5e03e5a93ff67b476cb/libjava%2Fjava%2Fnet%2FnatPlainDatagramSocketImpl.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06c271c3cf33d31e2002e5e03e5a93ff67b476cb/libjava%2Fjava%2Fnet%2FnatPlainDatagramSocketImpl.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FnatPlainDatagramSocketImpl.cc?ref=06c271c3cf33d31e2002e5e03e5a93ff67b476cb", "patch": "@@ -415,7 +415,16 @@ java::net::PlainDatagramSocketImpl::mcastGrp (java::net::InetAddress *inetaddr,\n   else if (len == 16)\n     {\n       level = IPPROTO_IPV6;\n-      opname = join ? IPV6_ADD_MEMBERSHIP : IPV6_DROP_MEMBERSHIP;\n+\n+      /* Prefer new RFC 2553 names.  */\n+#ifndef IPV6_JOIN_GROUP\n+#define IPV6_JOIN_GROUP IPV6_ADD_MEMBERSHIP\n+#endif\n+#ifndef IPV6_LEAVE_GROUP\n+#define IPV6_LEAVE_GROUP IPV6_DROP_MEMBERSHIP\n+#endif\n+\n+      opname = join ? IPV6_JOIN_GROUP : IPV6_LEAVE_GROUP;\n       memcpy (&u.mreq6.ipv6mr_multiaddr, bytes, len);\n       // FIXME:  If a non-default interface is set, use it; see Stevens p. 501.\n       // Maybe not, see note in last paragraph at bottom of Stevens p. 497."}]}