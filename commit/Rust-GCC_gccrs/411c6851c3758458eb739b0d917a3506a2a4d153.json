{"sha": "411c6851c3758458eb739b0d917a3506a2a4d153", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDExYzY4NTFjMzc1ODQ1OGViNzM5YjBkOTE3YTM1MDZhMmE0ZDE1Mw==", "commit": {"author": {"name": "Mumit Khan", "email": "khan@xraylith.wisc.edu", "date": "1999-08-25T04:43:17Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-08-25T04:43:17Z"}, "message": "mkfixinc.sh: Don't fix uwin headers.\n\n        * fixinc/mkfixinc.sh: Don't fix uwin headers.\n        * i386/uwin.h (MD_STARTFILE_PREFIX): Define.\n        (LINK_SPEC): Add -u _main when building executables.\n        (ASM_DECLARE_FUNCTION): Update from Cygwin.\n        (ASM_FILE_END): Use the default for ix86-pe.\n        * i386/xm-uwin.h (HAVE_BCOPY): Undefine.\n\nFrom-SVN: r28836", "tree": {"sha": "d6f14f08c0542c8bf16fe789664bc72db9ffa572", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d6f14f08c0542c8bf16fe789664bc72db9ffa572"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/411c6851c3758458eb739b0d917a3506a2a4d153", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/411c6851c3758458eb739b0d917a3506a2a4d153", "html_url": "https://github.com/Rust-GCC/gccrs/commit/411c6851c3758458eb739b0d917a3506a2a4d153", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/411c6851c3758458eb739b0d917a3506a2a4d153/comments", "author": null, "committer": null, "parents": [{"sha": "cafba4956be9da85d61c193a9e8227156f010565", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cafba4956be9da85d61c193a9e8227156f010565", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cafba4956be9da85d61c193a9e8227156f010565"}], "stats": {"total": 31, "additions": 22, "deletions": 9}, "files": [{"sha": "7e12cc5d6dc55a6eb807cd8591b1db4e7a022c18", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/411c6851c3758458eb739b0d917a3506a2a4d153/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/411c6851c3758458eb739b0d917a3506a2a4d153/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=411c6851c3758458eb739b0d917a3506a2a4d153", "patch": "@@ -1,3 +1,12 @@\n+Tue Aug 24 22:41:06 1999  Mumit Khan  <khan@xraylith.wisc.edu>\n+\n+\t* fixinc/mkfixinc.sh: Don't fix uwin headers.\n+\t* i386/uwin.h (MD_STARTFILE_PREFIX): Define.\n+\t(LINK_SPEC): Add -u _main when building executables.\n+\t(ASM_DECLARE_FUNCTION): Update from Cygwin.\n+\t(ASM_FILE_END): Use the default for ix86-pe.\n+\t* i386/xm-uwin.h (HAVE_BCOPY): Undefine.\n+\n Tue Aug 24 20:49:47 1999  Art Haas  <ahaas@neosoft.com>\n \n \t* final.c (output_addr_const): Handle case where ASM_OPEN_PAREN"}, {"sha": "29a3f982dd4edf6ad20ffe2db47b43aa061efb19", "filename": "gcc/config/i386/uwin.h", "status": "modified", "additions": 8, "deletions": 9, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/411c6851c3758458eb739b0d917a3506a2a4d153/gcc%2Fconfig%2Fi386%2Fuwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/411c6851c3758458eb739b0d917a3506a2a4d153/gcc%2Fconfig%2Fi386%2Fuwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fuwin.h?ref=411c6851c3758458eb739b0d917a3506a2a4d153", "patch": "@@ -29,6 +29,7 @@ Boston, MA 02111-1307, USA. */\n \n #define STANDARD_INCLUDE_COMPONENT \"UWIN\"\n #define SYSTEM_INCLUDE_DIR \"/usr/gnu/include\"\n+#define MD_STARTFILE_PREFIX \"/usr/gnu/lib/\"\n \n #undef CPP_PREDEFINES\n #define CPP_PREDEFINES \"-D__i386__ -D_WIN32 -D__WIN32__ \\\n@@ -62,25 +63,24 @@ Boston, MA 02111-1307, USA. */\n /* Specify a different entry point when linking a DLL */\n #undef LINK_SPEC\n #define LINK_SPEC \\\n-  \"%{mwindows:--subsystem windows} %{mdll:--dll -e _DllMainCRTStartup@12}\"\n+  \"%{mwindows:--subsystem windows} %{mdll:--dll -e _DllMainCRTStartup@12} \\\n+  %{!mdll:-u _main}\"\n \n #undef STARTFILE_SPEC\n #define STARTFILE_SPEC \"%{mdll:dllcrt2%O%s} %{!mdll:crt2%O%s}\"\n \n /* These are PE BFD bug workarounds. Should go away eventually. */\n \n+/* Write the extra assembler code needed to declare a function\n+   properly.  If we are generating SDB debugging information, this\n+   will happen automatically, so we only need to handle other cases.  */\n #undef ASM_DECLARE_FUNCTION_NAME\n #define ASM_DECLARE_FUNCTION_NAME(FILE, NAME, DECL)\t\t\t\\\n   do\t\t\t\t\t\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\t\\\n       if (i386_pe_dllexport_name_p (NAME))\t\t\t\t\\\n-\t{\t\t\t\t\t\t\t\t\\\n-\t  drectve_section ();\t\t\t\t\t\t\\\n-\t  fprintf ((FILE), \"\\t.ascii \\\" -export:%s\\\"\\n\", \t\t\\\n-\t\t   I386_PE_STRIP_ENCODING (NAME));\t\t\t\\\n-\t  function_section (DECL);\t\t\t\t\t\\\n-\t}\t\t\t\t\t\t\t\t\\\n-      /* disable i386_pe_declare_function_type for UWIN */\t\t\\\n+\ti386_pe_record_exported_symbol (NAME);\t\t\t\t\\\n+      /* UWIN binutils bug workaround. */\t\t\t\t\\\n       if (0 && write_symbols != SDB_DEBUG)\t\t\t\t\\\n \ti386_pe_declare_function_type (FILE, NAME, TREE_PUBLIC (DECL));\t\\\n       ASM_OUTPUT_LABEL (FILE, NAME);\t\t\t\t\t\\\n@@ -89,5 +89,4 @@ Boston, MA 02111-1307, USA. */\n \n #undef ASM_OUTPUT_EXTERNAL\n #undef ASM_OUTPUT_EXTERNAL_LIBCALL\n-#undef ASM_FILE_END\n "}, {"sha": "4f0ad4c5a63d41add9f7eac18716d819cac5e0a3", "filename": "gcc/config/i386/xm-uwin.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/411c6851c3758458eb739b0d917a3506a2a4d153/gcc%2Fconfig%2Fi386%2Fxm-uwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/411c6851c3758458eb739b0d917a3506a2a4d153/gcc%2Fconfig%2Fi386%2Fxm-uwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fxm-uwin.h?ref=411c6851c3758458eb739b0d917a3506a2a4d153", "patch": "@@ -37,3 +37,7 @@ Boston, MA 02111-1307, USA. */\n #undef PATH_SEPARATOR\n #define PATH_SEPARATOR ':'\n \n+/* U/WIN 2.0b[3-5] bcopy was implemented using memcpy, which breaks the\n+   C++ front end, so don't use it. */\n+#undef HAVE_BCOPY\n+"}, {"sha": "10bd27fe9a2ab58d34210ccb1965c045fc08131b", "filename": "gcc/fixinc/mkfixinc.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/411c6851c3758458eb739b0d917a3506a2a4d153/gcc%2Ffixinc%2Fmkfixinc.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/411c6851c3758458eb739b0d917a3506a2a4d153/gcc%2Ffixinc%2Fmkfixinc.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Fmkfixinc.sh?ref=411c6851c3758458eb739b0d917a3506a2a4d153", "patch": "@@ -80,6 +80,7 @@ case $machine in\n \ti[34567]86-*-win32 | \\\n \ti[34567]86-*-pe | i[34567]86-*-cygwin* | \\\n \ti[34567]86-*-mingw32* | \\\n+\ti[34567]86-*-uwin* | \\\n \tmips-sgi-irix5cross64 | \\\n \tpowerpc-*-eabiaix* | \\\n \tpowerpc-*-eabisim* | \\"}]}