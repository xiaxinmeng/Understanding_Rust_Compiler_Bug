{"sha": "5a57ced09ea6d8e944c5417258cc80503d8e5aa0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWE1N2NlZDA5ZWE2ZDhlOTQ0YzU0MTcyNThjYzgwNTAzZDhlNWFhMA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-04-02T11:54:18Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-04-02T11:54:18Z"}, "message": "(RETURN_POPS_ARGS, ENCODE_SECTION_INFO): Call chain_member_purpose, not chain_member_value.\n\n(RETURN_POPS_ARGS, ENCODE_SECTION_INFO): Call chain_member_purpose, not\nchain_member_value.\n(ASM_FILE_START, LIB_SPEC): Move to here.\n\nFrom-SVN: r9290", "tree": {"sha": "b63510d77b3bbe86f0ad4ea0d3da8a50a1dda646", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b63510d77b3bbe86f0ad4ea0d3da8a50a1dda646"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5a57ced09ea6d8e944c5417258cc80503d8e5aa0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a57ced09ea6d8e944c5417258cc80503d8e5aa0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a57ced09ea6d8e944c5417258cc80503d8e5aa0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a57ced09ea6d8e944c5417258cc80503d8e5aa0/comments", "author": null, "committer": null, "parents": [{"sha": "293c9fdd723d5264c4f2a16bd2072c4952504a91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/293c9fdd723d5264c4f2a16bd2072c4952504a91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/293c9fdd723d5264c4f2a16bd2072c4952504a91"}], "stats": {"total": 36, "additions": 31, "deletions": 5}, "files": [{"sha": "3b2d8c3c30dcfeaf2c9f05132f4b3c9681063847", "filename": "gcc/config/i386/win-nt.h", "status": "modified", "additions": 31, "deletions": 5, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a57ced09ea6d8e944c5417258cc80503d8e5aa0/gcc%2Fconfig%2Fi386%2Fwin-nt.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a57ced09ea6d8e944c5417258cc80503d8e5aa0/gcc%2Fconfig%2Fi386%2Fwin-nt.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwin-nt.h?ref=5a57ced09ea6d8e944c5417258cc80503d8e5aa0", "patch": "@@ -42,9 +42,9 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA. */\n    : \\\n      ( \\\n       ((FUNDECL && (TREE_CODE_CLASS (TREE_CODE (FUNDECL)) == 'd') ? \\\n-        chain_member_value (get_identifier (\"stdcall\"), \\\n-                            DECL_MACHINE_ATTRIBUTES (FUNDECL) \\\n-                           )                                      : 0 \\\n+        chain_member_purpose (get_identifier (\"stdcall\"), \\\n+                              DECL_MACHINE_ATTRIBUTES (FUNDECL) \\\n+                             )                                    : 0 \\\n        ) \\\n       ) \\\n       && \\\n@@ -154,8 +154,8 @@ do\t\t\t\t\t\t\t\t\t\\\n \t     || ! TREE_PUBLIC (DECL));\t\t\t\t\t\\\n       }\t\t\t\t\t\t\t\t\t\\\n     if (TREE_CODE (DECL) == FUNCTION_DECL) \t\t\t\t\\\n-      if (chain_member_value (get_identifier (\"stdcall\"), \t\t\\\n-                             DECL_MACHINE_ATTRIBUTES (DECL))) \t\t\\\n+      if (chain_member_purpose (get_identifier (\"stdcall\"), \t\t\\\n+                                DECL_MACHINE_ATTRIBUTES (DECL))) \t\\\n         XEXP (DECL_RTL (DECL), 0) = \t\t\t\t\t\\\n           gen_rtx (SYMBOL_REF, Pmode, gen_stdcall_suffix (DECL)); \t\\\n   }\t\t\t\t\t\t\t\t\t\\\n@@ -172,5 +172,31 @@ while (0)\n   && ((get_identifier(\"stdcall\") == name) \\\n    || (get_identifier(\"cdecl\") == name))\n \n+/* The global __fltused is necessary to cause the printf/scanf routines\n+   for outputting/inputting floating point numbers to be loaded.  Since this\n+   is kind of hard to detect, we just do it all the time. */\n+\n+#ifdef ASM_FILE_START\n+#undef ASM_FILE_START\n+#endif\n+#define ASM_FILE_START(FILE) \\\n+  do {\tfprintf (FILE, \"\\t.file\\t\");\t\t\t\t\\\n+\toutput_quoted_string (FILE, dump_base_name);\t\t\\\n+\tfprintf (FILE, \"\\n\");\t\t\t\t\t\\\n+        fprintf (FILE, \".global\\t__fltused\\n\");\t\t\t\\\n+  } while (0)\n+\n+/* if the switch \"-mwindows\" is passed to ld, then specify to the Microsoft\n+   linker the proper switches and libraries to build a graphical program */\n+\n+#undef LIB_SPEC\n+#define LIB_SPEC \"%{mwindows:-subsystem:windows -entry:WinMainCRTStartup \\\n+  USER32.LIB GDI32.LIB COMDLG32.LIB WINSPOOL.LIB} \\\n+ %{!mwindows:-subsystem:console -entry:mainCRTStartup} \\\n+ %{mcrtmt:OLDNAMES.LIB LIBCMT.LIB KERNEL32.LIB ADVAPI32.LIB} \\\n+ %{!mcrtmt:OLDNAMES.LIB LIBC.LIB KERNEL32.LIB ADVAPI32.LIB} \\\n+ %{g:-debugtype:coff -debug:full} \\\n+ %{v}\"\n+\n #include \"winnt/winnt.h\"\n "}]}