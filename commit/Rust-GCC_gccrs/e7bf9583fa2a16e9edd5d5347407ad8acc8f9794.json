{"sha": "e7bf9583fa2a16e9edd5d5347407ad8acc8f9794", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTdiZjk1ODNmYTJhMTZlOWVkZDVkNTM0NzQwN2FkOGFjYzhmOTc5NA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2017-12-04T23:59:11Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2017-12-04T23:59:11Z"}, "message": "re PR target/81616 (Update -mtune=generic for the current Intel and AMD processors)\n\n\tPR target/81616\n\t* athlon.md: Disable for generic.\n\t* haswell.md: Enable for generic.\n\t* i386.c (ix86_sched_init_global): Add core hooks for generic.\n\t* x86-tune-sched.c (ix86_issue_rate): Increase issue rate for generic\n\tto 4.\n\t(ix86_adjust_cost): Move generic to haswell path.\n\nFrom-SVN: r255395", "tree": {"sha": "3fb34511b84fb8948928874cfae6bf4dc10a63b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3fb34511b84fb8948928874cfae6bf4dc10a63b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794/comments", "author": null, "committer": null, "parents": [{"sha": "8cc9a08704ac8ff0701299ba08d23245efe59b57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cc9a08704ac8ff0701299ba08d23245efe59b57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8cc9a08704ac8ff0701299ba08d23245efe59b57"}], "stats": {"total": 372, "additions": 189, "deletions": 183}, "files": [{"sha": "3510252f045acfa41b093bfc31038ebcd401764d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e7bf9583fa2a16e9edd5d5347407ad8acc8f9794", "patch": "@@ -1,3 +1,13 @@\n+2017-12-01  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR target/81616\n+\t* athlon.md: Disable for generic.\n+\t* haswell.md: Enable for generic.\n+\t* i386.c (ix86_sched_init_global): Add core hooks for generic.\n+\t* x86-tune-sched.c (ix86_issue_rate): Increase issue rate for generic\n+\tto 4.\n+\t(ix86_adjust_cost): Move generic to haswell path.\n+\n 2017-12-04  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* config/sparc/sparc.c (sparc_do_work_around_errata): Use mem_ref"}, {"sha": "daabff24367641b8de5c70caadbbec60afa7109d", "filename": "gcc/config/i386/athlon.md", "status": "modified", "additions": 91, "deletions": 96, "changes": 187, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794/gcc%2Fconfig%2Fi386%2Fathlon.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794/gcc%2Fconfig%2Fi386%2Fathlon.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fathlon.md?ref=e7bf9583fa2a16e9edd5d5347407ad8acc8f9794", "patch": "@@ -151,11 +151,11 @@\n \n ;; Jump instructions are executed in the branch unit completely transparent to us\n (define_insn_reservation \"athlon_branch\" 0\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"ibr\"))\n \t\t\t \"athlon-direct,athlon-ieu\")\n (define_insn_reservation \"athlon_call\" 0\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (eq_attr \"type\" \"call,callv\"))\n \t\t\t \"athlon-vector,athlon-ieu\")\n (define_insn_reservation \"athlon_call_amdfam10\" 0\n@@ -166,15 +166,15 @@\n ;; Latency of push operation is 3 cycles, but ESP value is available\n ;; earlier\n (define_insn_reservation \"athlon_push\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"push\"))\n \t\t\t \"athlon-direct,athlon-agu,athlon-store\")\n (define_insn_reservation \"athlon_pop\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (eq_attr \"type\" \"pop\"))\n \t\t\t \"athlon-vector,athlon-load,athlon-ieu\")\n (define_insn_reservation \"athlon_pop_k8\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (eq_attr \"type\" \"pop\"))\n \t\t\t \"athlon-double,(athlon-ieu+athlon-load)\")\n (define_insn_reservation \"athlon_pop_amdfam10\" 3\n@@ -186,13 +186,13 @@\n \t\t\t      (eq_attr \"type\" \"leave\"))\n \t\t\t \"athlon-vector,(athlon-ieu+athlon-load)\")\n (define_insn_reservation \"athlon_leave_k8\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"leave\"))\n \t\t\t \"athlon-double,(athlon-ieu+athlon-load)\")\n \n ;; Lea executes in AGU unit with 2 cycles latency.\n (define_insn_reservation \"athlon_lea\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (eq_attr \"type\" \"lea\"))\n \t\t\t \"athlon-direct,athlon-agu,nothing\")\n ;; Lea executes in AGU unit with 1 cycle latency on AMDFAM10\n@@ -209,13 +209,13 @@\n \t\t\t \"athlon-vector,athlon-ieu0,athlon-mult,nothing,nothing,athlon-ieu0\")\n ;; ??? Widening multiply is vector or double.\n (define_insn_reservation \"athlon_imul_k8_DI\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"imul\")\n \t\t\t\t   (and (eq_attr \"mode\" \"DI\")\n \t\t\t\t\t(eq_attr \"memory\" \"none,unknown\"))))\n \t\t\t \"athlon-direct0,athlon-ieu0,athlon-mult,nothing,athlon-ieu0\")\n (define_insn_reservation \"athlon_imul_k8\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"imul\")\n \t\t\t\t   (eq_attr \"memory\" \"none,unknown\")))\n \t\t\t \"athlon-direct0,athlon-ieu0,athlon-mult,athlon-ieu0\")\n@@ -231,13 +231,13 @@\n \t\t\t\t   (eq_attr \"memory\" \"load,both\")))\n \t\t\t \"athlon-vector,athlon-load,athlon-ieu,athlon-mult,nothing,nothing,athlon-ieu\")\n (define_insn_reservation \"athlon_imul_mem_k8_DI\" 7\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"imul\")\n \t\t\t\t   (and (eq_attr \"mode\" \"DI\")\n \t\t\t\t\t(eq_attr \"memory\" \"load,both\"))))\n \t\t\t \"athlon-vector,athlon-load,athlon-ieu,athlon-mult,nothing,athlon-ieu\")\n (define_insn_reservation \"athlon_imul_mem_k8\" 6\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"imul\")\n \t\t\t\t   (eq_attr \"memory\" \"load,both\")))\n \t\t\t \"athlon-vector,athlon-load,athlon-ieu,athlon-mult,athlon-ieu\")\n@@ -251,26 +251,26 @@\n ;; Using the same heuristics for amdfam10 as K8 with idiv\n \n (define_insn_reservation \"athlon_idiv\" 6\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"idiv\")\n \t\t\t\t   (eq_attr \"memory\" \"none,unknown\")))\n \t\t\t \"athlon-vector,(athlon-ieu0*6+(athlon-fpsched,athlon-fvector))\")\n (define_insn_reservation \"athlon_idiv_mem\" 9\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"idiv\")\n \t\t\t\t   (eq_attr \"memory\" \"load,both\")))\n \t\t\t \"athlon-vector,((athlon-load,athlon-ieu0*6)+(athlon-fpsched,athlon-fvector))\")\n ;; The parallelism of string instructions is not documented.  Model it same way\n ;; as idiv to create smaller automata.  This probably does not matter much.\n ;; Using the same heuristics for amdfam10 as K8 with idiv\n (define_insn_reservation \"athlon_str\" 6\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"str\")\n \t\t\t\t   (eq_attr \"memory\" \"load,both,store\")))\n \t\t\t \"athlon-vector,athlon-load,athlon-ieu0*6\")\n \n (define_insn_reservation \"athlon_idirect\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"athlon_decode\" \"direct\")\n \t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n \t\t\t\t\t(eq_attr \"memory\" \"none,unknown\"))))\n@@ -282,7 +282,7 @@\n \t\t\t\t\t(eq_attr \"memory\" \"none,unknown\"))))\n \t\t\t \"athlon-direct,athlon-ieu\")\n (define_insn_reservation \"athlon_ivector\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"athlon_decode\" \"vector\")\n \t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n \t\t\t\t\t(eq_attr \"memory\" \"none,unknown\"))))\n@@ -295,13 +295,13 @@\n \t\t\t \"athlon-vector,athlon-ieu,athlon-ieu\")\n \n (define_insn_reservation \"athlon_idirect_loadmov\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"imov\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-load\")\n \n (define_insn_reservation \"athlon_idirect_load\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"athlon_decode\" \"direct\")\n \t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n@@ -313,7 +313,7 @@\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-direct,athlon-load,athlon-ieu\")\n (define_insn_reservation \"athlon_ivector_load\" 6\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"athlon_decode\" \"vector\")\n \t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n@@ -326,13 +326,13 @@\n \t\t\t \"athlon-vector,athlon-load,athlon-ieu,athlon-ieu\")\n \n (define_insn_reservation \"athlon_idirect_movstore\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"imov\")\n \t\t\t\t   (eq_attr \"memory\" \"store\")))\n \t\t\t \"athlon-direct,athlon-agu,athlon-store\")\n \n (define_insn_reservation \"athlon_idirect_both\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"athlon_decode\" \"direct\")\n \t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n \t\t\t\t\t(eq_attr \"memory\" \"both\"))))\n@@ -349,7 +349,7 @@\n \t\t\t  athlon-store\")\n \n (define_insn_reservation \"athlon_ivector_both\" 6\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"athlon_decode\" \"vector\")\n \t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n \t\t\t\t\t(eq_attr \"memory\" \"both\"))))\n@@ -368,7 +368,7 @@\n \t\t\t  athlon-store\")\n \n (define_insn_reservation \"athlon_idirect_store\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"athlon_decode\" \"direct\")\n \t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n \t\t\t\t\t(eq_attr \"memory\" \"store\"))))\n@@ -383,7 +383,7 @@\n \t\t\t  athlon-store\")\n \n (define_insn_reservation \"athlon_ivector_store\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"athlon_decode\" \"vector\")\n \t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n \t\t\t\t\t(eq_attr \"memory\" \"store\"))))\n@@ -405,7 +405,7 @@\n \t\t\t\t\t(eq_attr \"mode\" \"XF\"))))\n \t\t\t \"athlon-vector,athlon-fpload2,athlon-fvector*9\")\n (define_insn_reservation \"athlon_fldxf_k8\" 13\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"fmov\")\n \t\t\t\t   (and (eq_attr \"memory\" \"load\")\n \t\t\t\t\t(eq_attr \"mode\" \"XF\"))))\n@@ -417,7 +417,7 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-fany\")\n (define_insn_reservation \"athlon_fld_k8\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"fmov\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fstore\")\n@@ -429,7 +429,7 @@\n \t\t\t\t\t(eq_attr \"mode\" \"XF\"))))\n \t\t\t \"athlon-vector,(athlon-fpsched+athlon-agu),(athlon-store2+(athlon-fvector*7))\")\n (define_insn_reservation \"athlon_fstxf_k8\" 8\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"fmov\")\n \t\t\t\t   (and (eq_attr \"memory\" \"store,both\")\n \t\t\t\t\t(eq_attr \"mode\" \"XF\"))))\n@@ -440,16 +440,16 @@\n \t\t\t\t   (eq_attr \"memory\" \"store,both\")))\n \t\t\t \"athlon-direct,(athlon-fpsched+athlon-agu),(athlon-fstore+athlon-store)\")\n (define_insn_reservation \"athlon_fst_k8\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"fmov\")\n \t\t\t\t   (eq_attr \"memory\" \"store,both\")))\n \t\t\t \"athlon-direct,(athlon-fpsched+athlon-agu),(athlon-fstore+athlon-store)\")\n (define_insn_reservation \"athlon_fist\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"fistp,fisttp\"))\n \t\t\t \"athlon-direct,(athlon-fpsched+athlon-agu),(athlon-fstore+athlon-store)\")\n (define_insn_reservation \"athlon_fmov\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"fmov\"))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-faddmul\")\n (define_insn_reservation \"athlon_fadd_load\" 4\n@@ -458,12 +458,12 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-fadd\")\n (define_insn_reservation \"athlon_fadd_load_k8\" 6\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"fop\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fadd\")\n (define_insn_reservation \"athlon_fadd\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"fop\"))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-fadd\")\n (define_insn_reservation \"athlon_fmul_load\" 4\n@@ -472,16 +472,16 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-fmul\")\n (define_insn_reservation \"athlon_fmul_load_k8\" 6\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"fmul\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fmul\")\n (define_insn_reservation \"athlon_fmul\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"fmul\"))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-fmul\")\n (define_insn_reservation \"athlon_fsgn\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"fsgn\"))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-fmul\")\n (define_insn_reservation \"athlon_fdiv_load\" 24\n@@ -490,7 +490,7 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-fmul\")\n (define_insn_reservation \"athlon_fdiv_load_k8\" 13\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"fdiv\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fmul\")\n@@ -499,16 +499,16 @@\n \t\t\t      (eq_attr \"type\" \"fdiv\"))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-fmul\")\n (define_insn_reservation \"athlon_fdiv_k8\" 11\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"fdiv\"))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-fmul\")\n (define_insn_reservation \"athlon_fpspc_load\" 103\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"fpspc\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-vector,athlon-fpload,athlon-fvector\")\n (define_insn_reservation \"athlon_fpspc\" 100\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"fpspc\"))\n \t\t\t \"athlon-vector,athlon-fpsched,athlon-fvector\")\n (define_insn_reservation \"athlon_fcmov_load\" 7\n@@ -521,12 +521,12 @@\n \t\t\t      (eq_attr \"type\" \"fcmov\"))\n \t\t\t \"athlon-vector,athlon-fpsched,athlon-fvector\")\n (define_insn_reservation \"athlon_fcmov_load_k8\" 17\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"fcmov\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-vector,athlon-fploadk8,athlon-fvector\")\n (define_insn_reservation \"athlon_fcmov_k8\" 15\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"fcmov\"))\n \t\t\t \"athlon-vector,athlon-fpsched,athlon-fvector\")\n ;; fcomi is vector decoded by uses only one pipe.\n@@ -537,13 +537,13 @@\n \t\t\t\t        (eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-vector,athlon-fpload,athlon-fadd\")\n (define_insn_reservation \"athlon_fcomi_load_k8\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"fcmp\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"vector\")\n \t\t\t\t        (eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-vector,athlon-fploadk8,athlon-fadd\")\n (define_insn_reservation \"athlon_fcomi\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (and (eq_attr \"athlon_decode\" \"vector\")\n \t\t\t\t   (eq_attr \"type\" \"fcmp\")))\n \t\t\t \"athlon-vector,athlon-fpsched,athlon-fadd\")\n@@ -553,18 +553,18 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-fadd\")\n (define_insn_reservation \"athlon_fcom_load_k8\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"fcmp\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fadd\")\n (define_insn_reservation \"athlon_fcom\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (eq_attr \"type\" \"fcmp\"))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-fadd\")\n ;; Never seen by the scheduler because we still don't do post reg-stack\n ;; scheduling.\n ;(define_insn_reservation \"athlon_fxch\" 2\n-;\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+;\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n ;\t\t\t      (eq_attr \"type\" \"fxch\"))\n ;\t\t\t \"athlon-direct,athlon-fpsched,athlon-fany\")\n \n@@ -580,13 +580,8 @@\n \t\t\t      (and (eq_attr \"type\" \"ssemov\")\n \t\t\t\t   (match_operand:DF 1 \"memory_operand\")))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fstore\")\n-(define_insn_reservation \"athlon_movsd_load_generic\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"generic\")\n-\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n-\t\t\t\t   (match_operand:DF 1 \"memory_operand\")))\n-\t\t\t \"athlon-double,athlon-fploadk8,(athlon-fstore+athlon-fmul)\")\n (define_insn_reservation \"athlon_movaps_load_k8\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"ssemov\")\n \t\t\t\t   (and (eq_attr \"mode\" \"V4SF,V2DF,TI\")\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n@@ -604,7 +599,7 @@\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-vector,athlon-fpload,(athlon-fany*2)\")\n (define_insn_reservation \"athlon_movss_load_k8\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"ssemov\")\n \t\t\t\t   (and (eq_attr \"mode\" \"SF,DI\")\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n@@ -615,7 +610,7 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-fany\")\n (define_insn_reservation \"athlon_mmxsseld_k8\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"mmxmov,ssemov\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fstore\")\n@@ -637,19 +632,19 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fploadk8, athlon-fany\")\n (define_insn_reservation \"athlon_mmxssest\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"mmxmov,ssemov\")\n \t\t\t\t   (and (eq_attr \"mode\" \"V4SF,V2DF,TI\")\n \t\t\t\t\t(eq_attr \"memory\" \"store,both\"))))\n \t\t\t \"athlon-vector,(athlon-fpsched+athlon-agu),((athlon-fstore+athlon-store2)*2)\")\n (define_insn_reservation \"athlon_mmxssest_k8\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"mmxmov,ssemov\")\n \t\t\t\t   (and (eq_attr \"mode\" \"V4SF,V2DF,TI\")\n \t\t\t\t\t(eq_attr \"memory\" \"store,both\"))))\n \t\t\t \"athlon-double,(athlon-fpsched+athlon-agu),((athlon-fstore+athlon-store2)*2)\")\n (define_insn_reservation \"athlon_mmxssest_short\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"type\" \"mmxmov,ssemov\")\n \t\t\t\t   (eq_attr \"memory\" \"store,both\")))\n \t\t\t \"athlon-direct,(athlon-fpsched+athlon-agu),(athlon-fstore+athlon-store)\")\n@@ -673,7 +668,7 @@\n \t\t\t\t   (eq_attr \"memory\" \"store,both\")))\n \t\t\t \"athlon-direct,(athlon-fpsched+athlon-agu),(athlon-fstore+athlon-store)\")\n (define_insn_reservation \"athlon_movaps_k8\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"ssemov\")\n \t\t\t\t   (eq_attr \"mode\" \"V4SF,V2DF,TI\")))\n \t\t\t \"athlon-double,athlon-fpsched,((athlon-faddmul+athlon-faddmul) | (athlon-faddmul, athlon-faddmul))\")\n@@ -683,25 +678,25 @@\n \t\t\t\t   (eq_attr \"mode\" \"V4SF,V2DF,TI\")))\n \t\t\t \"athlon-vector,athlon-fpsched,(athlon-faddmul+athlon-faddmul)\")\n (define_insn_reservation \"athlon_mmxssemov\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (eq_attr \"type\" \"mmxmov,ssemov\"))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-faddmul\")\n (define_insn_reservation \"athlon_mmxmul_load\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"type\" \"mmxmul\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-fmul\")\n (define_insn_reservation \"athlon_mmxmul\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (eq_attr \"type\" \"mmxmul\"))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-fmul\")\n (define_insn_reservation \"athlon_mmx_load\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"unit\" \"mmx\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-faddmul\")\n (define_insn_reservation \"athlon_mmx\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (eq_attr \"unit\" \"mmx\"))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-faddmul\")\n ;; SSE operations are handled by the i387 unit as well.  The latency\n@@ -713,7 +708,7 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-vector,athlon-fpload2,(athlon-fmul*2)\")\n (define_insn_reservation \"athlon_sselog_load_k8\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"sselog,sselog1,sseshuf,sseshuf1\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-double,athlon-fpload2k8,(athlon-fmul*2)\")\n@@ -727,7 +722,7 @@\n \t\t\t      (eq_attr \"type\" \"sselog,sselog1,sseshuf,sseshuf1\"))\n \t\t\t \"athlon-vector,athlon-fpsched,athlon-fmul*2\")\n (define_insn_reservation \"athlon_sselog_k8\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (eq_attr \"type\" \"sselog,sselog1,sseshuf,sseshuf1\"))\n \t\t\t \"athlon-double,athlon-fpsched,athlon-fmul\")\n (define_insn_reservation \"athlon_sselog_amdfam10\" 2\n@@ -743,13 +738,13 @@\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-fadd\")\n (define_insn_reservation \"athlon_ssecmp_load_k8\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n \t\t\t\t   (and (eq_attr \"mode\" \"SF,DF,DI,TI\")\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fadd\")\n (define_insn_reservation \"athlon_ssecmp\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n \t\t\t\t   (eq_attr \"mode\" \"SF,DF,DI,TI\")))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-fadd\")\n@@ -759,7 +754,7 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-vector,athlon-fpload2,(athlon-fadd*2)\")\n (define_insn_reservation \"athlon_ssecmpvector_load_k8\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-double,athlon-fpload2k8,(athlon-fadd*2)\")\n@@ -773,7 +768,7 @@\n \t\t\t      (eq_attr \"type\" \"ssecmp\"))\n \t\t\t \"athlon-vector,athlon-fpsched,(athlon-fadd*2)\")\n (define_insn_reservation \"athlon_ssecmpvector_k8\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (eq_attr \"type\" \"ssecmp\"))\n \t\t\t \"athlon-double,athlon-fpsched,(athlon-fadd*2)\")\n (define_insn_reservation \"athlon_ssecmpvector_amdfam10\" 2\n@@ -786,7 +781,7 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-vector,athlon-fpload,athlon-fadd\")\n (define_insn_reservation \"athlon_ssecomi_load_k8\" 6\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"ssecomi\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-vector,athlon-fploadk8,athlon-fadd\")\n@@ -796,7 +791,7 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fadd\")\n (define_insn_reservation \"athlon_ssecomi\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (eq_attr \"type\" \"ssecomi\"))\n \t\t\t \"athlon-vector,athlon-fpsched,athlon-fadd\")\n (define_insn_reservation \"athlon_ssecomi_amdfam10\" 3\n@@ -811,13 +806,13 @@\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-fadd\")\n (define_insn_reservation \"athlon_sseadd_load_k8\" 6\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"sseadd,sseadd1\")\n \t\t\t\t   (and (eq_attr \"mode\" \"SF,DF,DI\")\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fadd\")\n (define_insn_reservation \"athlon_sseadd\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"sseadd,sseadd1\")\n \t\t\t\t   (eq_attr \"mode\" \"SF,DF,DI\")))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-fadd\")\n@@ -827,7 +822,7 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-vector,athlon-fpload2,(athlon-fadd*2)\")\n (define_insn_reservation \"athlon_sseaddvector_load_k8\" 7\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"sseadd,sseadd1\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-double,athlon-fpload2k8,(athlon-fadd*2)\")\n@@ -841,7 +836,7 @@\n \t\t\t      (eq_attr \"type\" \"sseadd,sseadd1\"))\n \t\t\t \"athlon-vector,athlon-fpsched,(athlon-fadd*2)\")\n (define_insn_reservation \"athlon_sseaddvector_k8\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (eq_attr \"type\" \"sseadd,sseadd1\"))\n \t\t\t \"athlon-double,athlon-fpsched,(athlon-fadd*2)\")\n (define_insn_reservation \"athlon_sseaddvector_amdfam10\" 4\n@@ -855,7 +850,7 @@\n \n ;; cvtss2sd\n (define_insn_reservation \"athlon_ssecvt_cvtss2sd_load_k8\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"k8,athlon,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,athlon\")\n \t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"direct\")\n \t\t\t\t\t(and (eq_attr \"mode\" \"DF\")\n@@ -869,7 +864,7 @@\n \t\t\t\t\t     (eq_attr \"memory\" \"load\")))))\n \t\t\t \"athlon-double,athlon-fploadk8,(athlon-faddmul+athlon-fstore)\")\n (define_insn_reservation \"athlon_ssecvt_cvtss2sd\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"direct\")\n \t\t\t\t\t(eq_attr \"mode\" \"DF\"))))\n@@ -882,7 +877,7 @@\n \t\t\t \"athlon-vector,athlon-fpsched,athlon-faddmul,(athlon-fstore*2)\")\n ;; cvtps2pd.  Model same way the other double decoded FP conversions.\n (define_insn_reservation \"athlon_ssecvt_cvtps2pd_load_k8\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"k8,athlon,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,athlon\")\n \t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"double\")\n \t\t\t\t\t(and (eq_attr \"mode\" \"V2DF,V4SF,TI\")\n@@ -896,7 +891,7 @@\n \t\t\t\t\t     (eq_attr \"memory\" \"load\")))))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fstore\")\n (define_insn_reservation \"athlon_ssecvt_cvtps2pd_k8\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"k8,athlon,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,athlon\")\n \t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"double\")\n \t\t\t\t\t(eq_attr \"mode\" \"V2DF,V4SF,TI\"))))\n@@ -932,7 +927,7 @@\n \t\t\t\t\t     (eq_attr \"memory\" \"load\")))))\n \t\t\t \"athlon-vector,athlon-fpload,(athlon-fstore*2)\")\n (define_insn_reservation \"athlon_sseicvt_cvtsi2ss_load_k8\" 9\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"sseicvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"double\")\n \t\t\t\t\t(and (eq_attr \"mode\" \"SF,DF\")\n@@ -947,7 +942,7 @@\n \t\t\t \"athlon-double,athlon-fploadk8,(athlon-faddmul+athlon-fstore)\")\n ;; cvtsi2sd reg,reg is double decoded (vector on Athlon)\n (define_insn_reservation \"athlon_sseicvt_cvtsi2sd_k8\" 11\n-\t\t\t (and (eq_attr \"cpu\" \"k8,athlon,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,athlon\")\n \t\t\t      (and (eq_attr \"type\" \"sseicvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"double\")\n \t\t\t\t\t(and (eq_attr \"mode\" \"SF,DF\")\n@@ -962,7 +957,7 @@\n \t\t\t \"athlon-vector,athlon-fploadk8,(athlon-faddmul+athlon-fstore)\")\n ;; cvtsi2ss reg, reg is doublepath\n (define_insn_reservation \"athlon_sseicvt_cvtsi2ss\" 14\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"type\" \"sseicvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"vector\")\n \t\t\t\t\t(and (eq_attr \"mode\" \"SF,DF\")\n@@ -977,7 +972,7 @@\n \t\t\t \"athlon-vector,athlon-fploadk8,(athlon-faddmul+athlon-fstore)\")\n ;; cvtsd2ss mem,reg is doublepath, troughput unknown, latency 9\n (define_insn_reservation \"athlon_ssecvt_cvtsd2ss_load_k8\" 9\n-\t\t\t (and (eq_attr \"cpu\" \"k8,athlon,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,athlon\")\n \t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"double\")\n \t\t\t\t\t(and (eq_attr \"mode\" \"SF\")\n@@ -992,7 +987,7 @@\n \t\t\t \"athlon-double,athlon-fploadk8,(athlon-faddmul+athlon-fstore)\")\n ;; cvtsd2ss reg,reg is vectorpath, troughput unknown, latency 12\n (define_insn_reservation \"athlon_ssecvt_cvtsd2ss\" 12\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"vector\")\n \t\t\t\t\t(and (eq_attr \"mode\" \"SF\")\n@@ -1006,7 +1001,7 @@\n \t\t\t\t\t     (eq_attr \"memory\" \"none\")))))\n \t\t\t \"athlon-vector,athlon-fpsched,athlon-faddmul,(athlon-fstore*2)\")\n (define_insn_reservation \"athlon_ssecvt_cvtpd2ps_load_k8\" 8\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"vector\")\n \t\t\t\t\t(and (eq_attr \"mode\" \"V4SF,V2DF,TI\")\n@@ -1022,7 +1017,7 @@\n ;; cvtpd2ps mem,reg is vectorpath, troughput unknown, latency 10\n ;; ??? Why it is fater than cvtsd2ss?\n (define_insn_reservation \"athlon_ssecvt_cvtpd2ps\" 8\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"vector\")\n \t\t\t\t\t(and (eq_attr \"mode\" \"V4SF,V2DF,TI\")\n@@ -1037,7 +1032,7 @@\n \t\t\t \"athlon-double,athlon-fpsched,(athlon-faddmul+athlon-fstore)\")\n ;; cvtsd2si mem,reg is doublepath, troughput 1, latency 9\n (define_insn_reservation \"athlon_secvt_cvtsX2si_load\" 9\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8\")\n \t\t\t      (and (eq_attr \"type\" \"sseicvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"vector\")\n \t\t\t\t\t(and (eq_attr \"mode\" \"SI,DI\")\n@@ -1059,7 +1054,7 @@\n \t\t\t\t\t     (eq_attr \"memory\" \"none\")))))\n \t\t\t \"athlon-vector,athlon-fpsched,athlon-fvector\")\n (define_insn_reservation \"athlon_ssecvt_cvtsX2si_k8\" 9\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"sseicvt\")\n \t\t\t\t   (and (eq_attr \"athlon_decode\" \"double\")\n \t\t\t\t\t(and (eq_attr \"mode\" \"SI,DI\")\n@@ -1097,13 +1092,13 @@\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-fmul\")\n (define_insn_reservation \"athlon_ssemul_load_k8\" 6\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"ssemul\")\n \t\t\t\t   (and (eq_attr \"mode\" \"SF,DF\")\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fmul\")\n (define_insn_reservation \"athlon_ssemul\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"ssemul\")\n \t\t\t\t   (eq_attr \"mode\" \"SF,DF\")))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-fmul\")\n@@ -1113,7 +1108,7 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-vector,athlon-fpload2,(athlon-fmul*2)\")\n (define_insn_reservation \"athlon_ssemulvector_load_k8\" 7\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"ssemul\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-double,athlon-fpload2k8,(athlon-fmul*2)\")\n@@ -1127,7 +1122,7 @@\n \t\t\t      (eq_attr \"type\" \"ssemul\"))\n \t\t\t \"athlon-vector,athlon-fpsched,(athlon-fmul*2)\")\n (define_insn_reservation \"athlon_ssemulvector_k8\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (eq_attr \"type\" \"ssemul\"))\n \t\t\t \"athlon-double,athlon-fpsched,(athlon-fmul*2)\")\n (define_insn_reservation \"athlon_ssemulvector_amdfam10\" 4\n@@ -1142,13 +1137,13 @@\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-direct,athlon-fpload,athlon-fmul*17\")\n (define_insn_reservation \"athlon_ssediv_load_k8\" 22\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"ssediv\")\n \t\t\t\t   (and (eq_attr \"mode\" \"SF,DF\")\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n \t\t\t \"athlon-direct,athlon-fploadk8,athlon-fmul*17\")\n (define_insn_reservation \"athlon_ssediv\" 20\n-\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,generic,amdfam10\")\n+\t\t\t (and (eq_attr \"cpu\" \"athlon,k8,amdfam10\")\n \t\t\t      (and (eq_attr \"type\" \"ssediv\")\n \t\t\t\t   (eq_attr \"mode\" \"SF,DF\")))\n \t\t\t \"athlon-direct,athlon-fpsched,athlon-fmul*17\")\n@@ -1158,7 +1153,7 @@\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-vector,athlon-fpload2,athlon-fmul*34\")\n (define_insn_reservation \"athlon_ssedivvector_load_k8\" 35\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (and (eq_attr \"type\" \"ssediv\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"athlon-double,athlon-fpload2k8,athlon-fmul*34\")\n@@ -1172,7 +1167,7 @@\n \t\t\t      (eq_attr \"type\" \"ssediv\"))\n \t\t\t \"athlon-vector,athlon-fmul*34\")\n (define_insn_reservation \"athlon_ssedivvector_k8\" 39\n-\t\t\t (and (eq_attr \"cpu\" \"k8,generic\")\n+\t\t\t (and (eq_attr \"cpu\" \"k8\")\n \t\t\t      (eq_attr \"type\" \"ssediv\"))\n \t\t\t \"athlon-double,athlon-fmul*34\")\n (define_insn_reservation \"athlon_ssedivvector_amdfam10\" 20"}, {"sha": "82e110294a6a0b7f7e37e5c85fa1c28df45d97e7", "filename": "gcc/config/i386/haswell.md", "status": "modified", "additions": 85, "deletions": 85, "changes": 170, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794/gcc%2Fconfig%2Fi386%2Fhaswell.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794/gcc%2Fconfig%2Fi386%2Fhaswell.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fhaswell.md?ref=e7bf9583fa2a16e9edd5d5347407ad8acc8f9794", "patch": "@@ -74,117 +74,117 @@\n (define_reservation \"hsw_p01\" \"hsw_p0|hsw_p1\")\n \n (define_insn_reservation \"hsw_complex_insn\" 6\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (eq_attr \"type\" \"other,multi,str\"))\n \t\t\t \"hsw_decoder0\")\n \n (define_insn_reservation \"hsw_call\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (eq_attr \"type\" \"call,callv\"))\n \t\t\t \"hsw_decoder0\")\n \n ;; imov with memory operands does not use the integer units.\n ;; imovx always decodes to one uop, and also doesn't use the integer\n ;; units if it has memory operands.\n (define_insn_reservation \"hsw_imov\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"imov,imovx\")))\n \t\t\t \"hsw_decodern,hsw_p0156\")\n \n (define_insn_reservation \"hsw_imov_load\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"imov,imovx\")))\n \t\t\t \"hsw_decodern,hsw_p23\")\n \n (define_insn_reservation \"hsw_imov_store\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"store\")\n \t\t\t\t   (eq_attr \"type\" \"imov\")))\n \t\t\t \"hsw_decodern,hsw_p4+(hsw_p2|hsw_p3|hsw_p7)\")\n \n (define_insn_reservation \"hsw_icmov\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"icmov\")))\n \t\t\t \"hsw_decodern,hsw_p0156,hsw_p0156\")\n \n (define_insn_reservation \"hsw_icmov_load\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"icmov\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p0156,hsw_p0156\")\n \n (define_insn_reservation \"hsw_push_reg\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"store\")\n \t\t\t\t   (eq_attr \"type\" \"push\")))\n \t\t\t \"hsw_decodern,hsw_p4+hsw_p237\")\n \n (define_insn_reservation \"hsw_push_mem\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"both\")\n \t\t\t\t   (eq_attr \"type\" \"push\")))\n \t\t\t \"hsw_decodern,hsw_p4+hsw_p237,hsw_p237\")\n \n ;; Consider lea latency as having 2 components.\n (define_insn_reservation \"hsw_lea\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"lea\")))\n \t\t\t \"hsw_decodern,hsw_p1|hsw_p5\")\n \n (define_insn_reservation \"hsw_shift_rotate\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"ishift,ishift1,rotate,rotate1\")))\n \t\t\t \"hsw_decodern,hsw_p0|hsw_p6\")\n \n (define_insn_reservation \"hsw_shift_rotate_mem\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"!none\")\n \t\t\t\t   (eq_attr \"type\" \"ishift,ishift1,rotate,rotate1\")))\n \t\t\t \"hsw_decodern,(hsw_p0|hsw_p6)+hsw_p237+hsw_p4\")\n \n (define_insn_reservation \"hsw_branch\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"ibr\")))\n \t\t\t \"hsw_decodern,hsw_p6\")\n \n (define_insn_reservation \"hsw_indirect_branch\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"!none\")\n \t\t\t\t   (eq_attr \"type\" \"ibr\")))\n \t\t\t \"hsw_decoder0,hsw_p23+hsw_p6\")\n \n (define_insn_reservation \"hsw_leave\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (eq_attr \"type\" \"leave\"))\n \t\t\t \"hsw_decoder0,hsw_p23+hsw_p0156,hsw_p0156\")\n \n ;; imul and imulx with two/three operands only execute on port 1.\n (define_insn_reservation \"hsw_imul\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"imul\")))\n \t\t\t \"hsw_decodern,hsw_p1\")\n \n (define_insn_reservation \"hsw_imul_mem\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"!none\")\n \t\t\t\t   (eq_attr \"type\" \"imul\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p1\")\n \n (define_insn_reservation \"hsw_imulx\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"imulx\")))\n \t\t\t \"hsw_decodern,hsw_p0156,hsw_p0156\")\n \n (define_insn_reservation \"hsw_imulx_mem\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"!none\")\n \t\t\t\t   (eq_attr \"type\" \"imulx\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p0156,(hsw_p0|hsw_p6|hsw_p6)\")\n@@ -193,117 +193,117 @@\n ;; div and idiv are very similar, so we model them the same.\n ;; Use the same latency for all QI,HI and SI modes.\n (define_insn_reservation \"hsw_idiv\" 23\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"idiv\")))\n \t\t\t \"hsw_decoder0,(hsw_p0p1p5p6+hsw_idiv)*9\")\n \n (define_insn_reservation \"hsw_idiv_load\" 23\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t\t(eq_attr \"type\" \"idiv\")))\n \t\t\t \"hsw_decoder0,hsw_p23+hsw_p0+hsw_idiv,(hsw_p0p1p5p6+hsw_idiv)*9\")\n \n ;; x87 floating point operations.\n \n (define_insn_reservation \"hsw_fxch\" 0\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (eq_attr \"type\" \"fxch\"))\n \t\t\t \"hsw_decodern\")\n \n (define_insn_reservation \"hsw_fop\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none,unknown\")\n \t\t\t\t   (eq_attr \"type\" \"fop\")))\n \t\t\t \"hsw_decodern,hsw_p1\")\n \n (define_insn_reservation \"hsw_fop_load\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"fop\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p1,hsw_p1\")\n \n (define_insn_reservation \"hsw_fop_store\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"store\")\n \t\t\t\t   (eq_attr \"type\" \"fop\")))\n \t\t\t \"hsw_decodern,hsw_p0,hsw_p0,hsw_p0+hsw_p4+hsw_p3\")\n \n (define_insn_reservation \"hsw_fop_both\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"both\")\n \t\t\t\t   (eq_attr \"type\" \"fop\")))\n \t\t\t \"hsw_decodern,hsw_p2+hsw_p0,hsw_p0+hsw_p4+hsw_p3\")\n \n (define_insn_reservation \"hsw_fsgn\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (eq_attr \"type\" \"fsgn\"))\n \t\t\t \"hsw_decodern,hsw_p0\")\n \n (define_insn_reservation \"hsw_fistp\" 7\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (eq_attr \"type\" \"fistp\"))\n \t\t\t \"hsw_decoder0,hsw_p1+hsw_p4+hsw_p23\")\n \n (define_insn_reservation \"hsw_fcmov\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (eq_attr \"type\" \"fcmov\"))\n \t\t\t \"hsw_decoder0,hsw_p0+hsw_p5,hsw_p0\")\n \n (define_insn_reservation \"hsw_fcmp\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"fcmp\")))\n \t\t\t \"hsw_decodern,hsw_p1\")\n \n (define_insn_reservation \"hsw_fcmp_load\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"fcmp\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p1\")\n \n (define_insn_reservation \"hsw_fmov\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"fmov\")))\n \t\t\t \"hsw_decodern,hsw_p01\")\n \n (define_insn_reservation \"hsw_fmov_load\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (and (eq_attr \"mode\" \"!XF\")\n \t\t\t\t\t(eq_attr \"type\" \"fmov\"))))\n \t\t\t \"hsw_decodern,hsw_p23\")\n \n (define_insn_reservation \"hsw_fmov_XF_load\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (and (eq_attr \"mode\" \"XF\")\n \t\t\t\t\t(eq_attr \"type\" \"fmov\"))))\n \t\t\t \"hsw_decodern,(hsw_p23+hsw_p0)*2\")\n \n (define_insn_reservation \"hsw_fmov_store\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"store\")\n \t\t\t\t   (and (eq_attr \"mode\" \"!XF\")\n \t\t\t\t\t(eq_attr \"type\" \"fmov\"))))\n \t\t\t \"hsw_decodern,hsw_p4p7\")\n \n (define_insn_reservation \"hsw_fmov_XF_store\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"store\")\n \t\t\t\t   (and (eq_attr \"mode\" \"XF\")\n \t\t\t\t\t(eq_attr \"type\" \"fmov\"))))\n \t\t\t \"hsw_decodern,hsw_p4p7,hsw_p4p7\")\n \n (define_insn_reservation \"hsw_fmul\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"fmul\")))\n \t\t\t \"hsw_decodern,hsw_p01\")\n \n (define_insn_reservation \"hsw_fmul_load\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"fmul\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p01\")\n@@ -314,42 +314,42 @@\n ;; that.  Throughput is equal to latency - 1, which we model using the\n ;; hsw_div automaton.\n (define_insn_reservation \"hsw_fdiv_SF\" 18\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (and (eq_attr \"mode\" \"SF\")\n \t\t\t\t\t(eq_attr \"type\" \"fdiv,fpspc\"))))\n \t\t\t \"hsw_decodern,hsw_p0+hsw_fdiv,hsw_fdiv*16\")\n \n (define_insn_reservation \"hsw_fdiv_SF_load\" 19\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (and (eq_attr \"mode\" \"SF\")\n \t\t\t\t\t(eq_attr \"type\" \"fdiv,fpspc\"))))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p0+hsw_fdiv,hsw_fdiv*16\")\n \n (define_insn_reservation \"hsw_fdiv_DF\" 32\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (and (eq_attr \"mode\" \"DF\")\n \t\t\t\t\t(eq_attr \"type\" \"fdiv,fpspc\"))))\n \t\t\t \"hsw_decodern,hsw_p0+hsw_fdiv,hsw_fdiv*30\")\n \n (define_insn_reservation \"hsw_fdiv_DF_load\" 33\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (and (eq_attr \"mode\" \"DF\")\n \t\t\t\t\t(eq_attr \"type\" \"fdiv,fpspc\"))))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p0+hsw_fdiv,hsw_fdiv*30\")\n \n (define_insn_reservation \"hsw_fdiv_XF\" 38\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (and (eq_attr \"mode\" \"XF\")\n \t\t\t\t\t(eq_attr \"type\" \"fdiv,fpspc\"))))\n \t\t\t \"hsw_decodern,hsw_p0+hsw_fdiv,hsw_fdiv*36\")\n \n (define_insn_reservation \"hsw_fdiv_XF_load\" 39\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (and (eq_attr \"mode\" \"XF\")\n \t\t\t\t\t(eq_attr \"type\" \"fdiv,fpspc\"))))\n@@ -358,261 +358,261 @@\n ;; MMX instructions.\n \n (define_insn_reservation \"hsw_mmx_add\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"mmxadd,sseiadd\")))\n \t\t\t \"hsw_decodern,hsw_p1|hsw_p5\")\n \n (define_insn_reservation \"hsw_mmx_add_load\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"mmxadd,sseiadd\")))\n \t\t\t \"hsw_decodern,hsw_p23+(hsw_p1|hsw_p5)\")\n \n (define_insn_reservation \"hsw_mmx_shft\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"mmxshft\")))\n \t\t\t \"hsw_decodern,hsw_p0\")\n \n (define_insn_reservation \"hsw_mmx_shft_load\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"mmxshft\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p0\")\n \n (define_insn_reservation \"hsw_mmx_sse_shft\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (and (eq_attr \"type\" \"sseishft\")\n \t\t\t\t\t(eq_attr \"length_immediate\" \"!0\"))))\n \t\t\t \"hsw_decodern,hsw_p01\")\n \n (define_insn_reservation \"hsw_mmx_sse_shft_load\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (and (eq_attr \"type\" \"sseishft\")\n \t\t\t\t\t(eq_attr \"length_immediate\" \"!0\"))))\n \t\t\t \"hsw_decodern,hsw_p01+hsw_p23\")\n \n (define_insn_reservation \"hsw_mmx_sse_shft1\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (and (eq_attr \"type\" \"sseishft\")\n \t\t\t\t\t(eq_attr \"length_immediate\" \"0\"))))\n \t\t\t \"hsw_decodern,hsw_p01\")\n \n (define_insn_reservation \"hsw_mmx_sse_shft1_load\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (and (eq_attr \"type\" \"sseishft\")\n \t\t\t\t\t(eq_attr \"length_immediate\" \"0\"))))\n \t\t\t \"hsw_decodern,hsw_p01+hsw_p23\")\n \n (define_insn_reservation \"hsw_mmx_mul\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"mmxmul,sseimul\")))\n \t\t\t \"hsw_decodern,hsw_p01\")\n \n (define_insn_reservation \"hsw_mmx_mul_load\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"mmxmul,sseimul\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p01\")\n \n (define_insn_reservation \"hsw_sse_mmxcvt\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"mode\" \"DI\")\n \t\t\t\t   (eq_attr \"type\" \"mmxcvt\")))\n \t\t\t \"hsw_decodern,hsw_p1\")\n \n ;; (define_insn_reservation \"hsw_sse_mmxshft\" 2\n-;;\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+;;\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n ;;\t\t\t      (and (eq_attr \"mode\" \"TI\")\n ;;\t\t\t\t   (eq_attr \"type\" \"mmxshft\")))\n ;;\t\t\t \"hsw_decodern,hsw_p01\")\n \n ;; The sfence instruction.\n (define_insn_reservation \"hsw_sse_sfence\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"unknown\")\n \t\t\t\t   (eq_attr \"type\" \"sse\")))\n \t\t\t \"hsw_decoder0,hsw_p23+hsw_p4\")\n \n (define_insn_reservation \"hsw_sse_SFDF\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"mode\" \"SF,DF\")\n \t\t\t\t   (eq_attr \"type\" \"sse\")))\n \t\t\t \"hsw_decodern,hsw_p01\")\n \n (define_insn_reservation \"hsw_sse_V4SF\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"mode\" \"V4SF\")\n \t\t\t\t   (eq_attr \"type\" \"sse\")))\n \t\t\t \"hsw_decodern,hsw_p01\")\n \n (define_insn_reservation \"hsw_sse_V8SF\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"mode\" \"V8SF,V4DF\")\n \t\t\t\t   (eq_attr \"type\" \"sse\")))\n \t\t\t \"hsw_decodern,hsw_p01\")\n \n (define_insn_reservation \"hsw_sse_addcmp\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"sseadd1,ssecmp,ssecomi\")))\n \t\t\t \"hsw_decodern,hsw_p01\")\n \n (define_insn_reservation \"hsw_sse_addcmp_load\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"sseadd1,ssecmp,ssecomi\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p01\")\n \n (define_insn_reservation \"hsw_sse_logic\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"sselog,sselog1\")))\n \t\t\t \"hsw_decodern,hsw_p015\")\n \n (define_insn_reservation \"hsw_sse_logic_load\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"sselog,sselog1\")))\n \t\t\t \"hsw_decodern,hsw_p015+hsw_p23\")\n \n (define_insn_reservation \"hsw_sse_add\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"sseadd\")))\n \t\t\t\"hsw_decodern,hsw_p1|hsw_p5\")\n \n (define_insn_reservation \"hsw_sse_add_load\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"sseadd\")))\n \t\t\t\"hsw_decodern,(hsw_p1|hsw_p5)+hsw_p23\")\n \n (define_insn_reservation \"hsw_sse_mul\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"ssemul\")))\n \t\t\t\"hsw_decodern,hsw_p0\")\n \n (define_insn_reservation \"hsw_sse_mul_load\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"ssemul\")))\n \t\t\t\"hsw_decodern,hsw_p0+hsw_p23\")\n ;; Use skylake pipeline.\n (define_insn_reservation \"hsw_sse_muladd\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t\t(eq_attr \"type\" \"ssemuladd\")))\n \t\t\t\"hsw_decodern,hsw_p01\")\n \n (define_insn_reservation \"hsw_sse_muladd_load\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t\t(eq_attr \"type\" \"ssemuladd\")))\n \t\t\t\"hsw_decodern,hsw_p01+hsw_p23\")\n \n (define_insn_reservation \"hsw_sse_div_SF\" 18\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (and (eq_attr \"mode\" \"SF,V4SF,V8SF\")\n \t\t\t\t\t(eq_attr \"type\" \"ssediv\"))))\n \t\t\t \"hsw_decodern,hsw_p0,hsw_ssediv*14\")\n \n (define_insn_reservation \"hsw_sse_div_SF_load\" 18\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (and (eq_attr \"mode\" \"SF,V4SF,V8SF\")\n \t\t\t\t\t(eq_attr \"type\" \"ssediv\"))))\n \t\t\t \"hsw_decodern,(hsw_p23+hsw_p0),hsw_ssediv*14\")\n \n (define_insn_reservation \"hsw_sse_div_DF\" 28\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (and (eq_attr \"mode\" \"DF,V2DF,V4DF\")\n \t\t\t\t\t(eq_attr \"type\" \"ssediv\"))))\n \t\t\t \"hsw_decodern,hsw_p0,hsw_ssediv*20\")\n \n (define_insn_reservation \"hsw_sse_div_DF_load\" 28\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (and (eq_attr \"mode\" \"DF,V2DF,V4DF\")\n \t\t\t\t\t(eq_attr \"type\" \"ssediv\"))))\n \t\t\t \"hsw_decodern,(hsw_p23+hsw_p0),hsw_ssediv*20\")\n \n (define_insn_reservation \"hsw_sse_icvt\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"sseicvt\")))\n \t\t\t \"hsw_decodern,hsw_p1\")\n \n (define_insn_reservation \"hsw_sse_icvt_load\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"!none\")\n \t\t\t\t   (eq_attr \"type\" \"sseicvt\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p1\")\n \n \n (define_insn_reservation \"hsw_sse_icvt_SI\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (and (eq_attr \"mode\" \"SI\")\n \t\t\t\t\t(eq_attr \"type\" \"sseicvt\"))))\n \t\t\t \"hsw_decodern,hsw_p1\")\n \n (define_insn_reservation \"hsw_sse_icvt_SI_load\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"!none\")\n \t\t\t\t   (and (eq_attr \"mode\" \"SI\")\n \t\t\t\t\t(eq_attr \"type\" \"sseicvt\"))))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p1\")\n \n (define_insn_reservation \"hsw_sse_mov\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none\")\n \t\t\t\t   (eq_attr \"type\" \"ssemov\")))\n \t\t\t \"hsw_decodern,hsw_p015\")\n \n (define_insn_reservation \"hsw_sse_mov_load\" 2\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"ssemov\")))\n \t\t\t \"hsw_decodern,hsw_p23\")\n \n (define_insn_reservation \"hsw_sse_mov_store\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"store\")\n \t\t\t\t   (eq_attr \"type\" \"ssemov\")))\n \t\t\t \"hsw_decodern,hsw_p4p7\")\n \n (define_insn_reservation \"hsw_insn\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"none,unknown\")\n \t\t\t\t   (eq_attr \"type\" \"alu,alu1,negnot,incdec,icmp,test,setcc,sseishft1,mmx,mmxcmp\")))\n \t\t\t \"hsw_decodern,hsw_p0156\")\n \n (define_insn_reservation \"hsw_insn_load\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"load\")\n \t\t\t\t   (eq_attr \"type\" \"alu,alu1,negnot,incdec,icmp,test,setcc,pop,sseishft1,mmx,mmxcmp\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p0156\")\n \n (define_insn_reservation \"hsw_insn_store\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"store\")\n \t\t\t\t   (eq_attr \"type\" \"alu,alu1,negnot,incdec,icmp,test,setcc,sseishft1,mmx,mmxcmp\")))\n \t\t\t \"hsw_decodern,hsw_p0156+hsw_p4p7\")\n \n ;; read-modify-store instructions produce 4 uops so they have to be\n ;; decoded on hsw_decoder0 as well.\n (define_insn_reservation \"hsw_insn_both\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"haswell\")\n+\t\t\t (and (eq_attr \"cpu\" \"generic,haswell\")\n \t\t\t      (and (eq_attr \"memory\" \"both\")\n \t\t\t\t   (eq_attr \"type\" \"alu,alu1,negnot,incdec,icmp,test,setcc,pop,sseishft1,mmx,mmxcmp\")))\n \t\t\t \"hsw_decodern,hsw_p23+hsw_p0156+hsw_p4p7\")"}, {"sha": "fcf7db115ad3c7bd9a50e76d4e67db21fb70ef76", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=e7bf9583fa2a16e9edd5d5347407ad8acc8f9794", "patch": "@@ -28844,6 +28844,7 @@ ix86_sched_init_global (FILE *, int, int)\n     case PROCESSOR_NEHALEM:\n     case PROCESSOR_SANDYBRIDGE:\n     case PROCESSOR_HASWELL:\n+    case PROCESSOR_GENERIC:\n       /* Do not perform multipass scheduling for pre-reload schedule\n          to save compile time.  */\n       if (reload_completed)"}, {"sha": "5bcaf2c59daa60106a0fcacf7d94fb118fab97cd", "filename": "gcc/config/i386/x86-tune-sched.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794/gcc%2Fconfig%2Fi386%2Fx86-tune-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7bf9583fa2a16e9edd5d5347407ad8acc8f9794/gcc%2Fconfig%2Fi386%2Fx86-tune-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fx86-tune-sched.c?ref=e7bf9583fa2a16e9edd5d5347407ad8acc8f9794", "patch": "@@ -54,7 +54,6 @@ ix86_issue_rate (void)\n     case PROCESSOR_ATHLON:\n     case PROCESSOR_K8:\n     case PROCESSOR_AMDFAM10:\n-    case PROCESSOR_GENERIC:\n     case PROCESSOR_BTVER1:\n       return 3;\n \n@@ -67,6 +66,7 @@ ix86_issue_rate (void)\n     case PROCESSOR_NEHALEM:\n     case PROCESSOR_SANDYBRIDGE:\n     case PROCESSOR_HASWELL:\n+    case PROCESSOR_GENERIC:\n       return 4;\n \n     default:\n@@ -354,7 +354,6 @@ ix86_adjust_cost (rtx_insn *insn, int dep_type, rtx_insn *dep_insn, int cost,\n     case PROCESSOR_BDVER4:\n     case PROCESSOR_BTVER1:\n     case PROCESSOR_BTVER2:\n-    case PROCESSOR_GENERIC:\n       /* Stack engine allows to execute push&pop instructions in parall.  */\n       if ((insn_type == TYPE_PUSH || insn_type == TYPE_POP)\n \t  && (dep_insn_type == TYPE_PUSH || dep_insn_type == TYPE_POP))\n@@ -424,6 +423,7 @@ ix86_adjust_cost (rtx_insn *insn, int dep_type, rtx_insn *dep_insn, int cost,\n     case PROCESSOR_NEHALEM:\n     case PROCESSOR_SANDYBRIDGE:\n     case PROCESSOR_HASWELL:\n+    case PROCESSOR_GENERIC:\n       /* Stack engine allows to execute push&pop instructions in parall.  */\n       if ((insn_type == TYPE_PUSH || insn_type == TYPE_POP)\n \t  && (dep_insn_type == TYPE_PUSH || dep_insn_type == TYPE_POP))"}]}