{"sha": "86b2a5583b9494d2e80803fd6e325e123516d9f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODZiMmE1NTgzYjk0OTRkMmU4MDgwM2ZkNmUzMjVlMTIzNTE2ZDlmMA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-01-24T00:18:36Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-01-24T00:18:36Z"}, "message": "re PR sanitizer/79168 (libtsan fails to link when cross compiling GCC tip for Aarch64 target)\n\n\tPR sanitizer/79168\n\t* merge.sh (change_comment_headers): Don't remove 2nd and 3rd line\n\tif the 3rd line doesn't contain 'The LLVM Compiler Infrastructure'\n\ttext.\n\t* sanitizer_common/sanitizer_linux_mips64.S: Regenerated.\n\t* sanitizer_common/sanitizer_linux_x86_64.S: Likewise.\n\t* tsan/tsan_ppc_regs.h: Likewise.\n\t* tsan/tsan_rtl_aarch64.S: Likewise.\n\t* tsan/tsan_rtl_mips64.S: Likewise.\n\t* tsan/tsan_rtl_ppc64.S: Likewise.\n\nFrom-SVN: r244844", "tree": {"sha": "24f0c6a6a6a9f8245d39b259240c6a3e769a5e56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24f0c6a6a6a9f8245d39b259240c6a3e769a5e56"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/86b2a5583b9494d2e80803fd6e325e123516d9f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86b2a5583b9494d2e80803fd6e325e123516d9f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86b2a5583b9494d2e80803fd6e325e123516d9f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86b2a5583b9494d2e80803fd6e325e123516d9f0/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "158c139f304ee57d47eaf801556c1aa47cbcd94c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/158c139f304ee57d47eaf801556c1aa47cbcd94c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/158c139f304ee57d47eaf801556c1aa47cbcd94c"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "70a66cddf6f92578b3ee87ef8164c825a641f3f7", "filename": "libsanitizer/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2FChangeLog?ref=86b2a5583b9494d2e80803fd6e325e123516d9f0", "patch": "@@ -1,3 +1,16 @@\n+2017-01-24  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR sanitizer/79168\n+\t* merge.sh (change_comment_headers): Don't remove 2nd and 3rd line\n+\tif the 3rd line doesn't contain 'The LLVM Compiler Infrastructure'\n+\ttext.\n+\t* sanitizer_common/sanitizer_linux_mips64.S: Regenerated.\n+\t* sanitizer_common/sanitizer_linux_x86_64.S: Likewise.\n+\t* tsan/tsan_ppc_regs.h: Likewise.\n+\t* tsan/tsan_rtl_aarch64.S: Likewise.\n+\t* tsan/tsan_rtl_mips64.S: Likewise.\n+\t* tsan/tsan_rtl_ppc64.S: Likewise.\n+\n 2017-01-21  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR other/79046"}, {"sha": "2e5ec2527b80cea138af16a331c0c2dd13cf71aa", "filename": "libsanitizer/merge.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Fmerge.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Fmerge.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fmerge.sh?ref=86b2a5583b9494d2e80803fd6e325e123516d9f0", "patch": "@@ -22,6 +22,7 @@ list_files() {\n \n change_comment_headers() {\n   for f in $(list_files $1); do\n+    sed -n 3p $1/$f | grep -q 'The LLVM Compiler Infrastructure' || continue\n     changed=$(awk 'NR != 2 && NR != 3' < $1/$f)\n     echo \"$changed\" > $1/$f\n   done"}, {"sha": "8729642aa654985b50c2fc0a42750247d57c6231", "filename": "libsanitizer/sanitizer_common/sanitizer_linux_mips64.S", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Fsanitizer_common%2Fsanitizer_linux_mips64.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Fsanitizer_common%2Fsanitizer_linux_mips64.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fsanitizer_common%2Fsanitizer_linux_mips64.S?ref=86b2a5583b9494d2e80803fd6e325e123516d9f0", "patch": "@@ -1,4 +1,6 @@\n // This file is dual licensed under the MIT and the University of Illinois Open\n+// Source Licenses. See LICENSE.TXT for details.\n+\n // Avoid being marked as needing an executable stack:\n #if defined(__linux__) && defined(__ELF__)\n .section .note.GNU-stack,\"\",%progbits"}, {"sha": "8ff909542b681cb79bd40d2e3b08c75e8f8e1a2f", "filename": "libsanitizer/sanitizer_common/sanitizer_linux_x86_64.S", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Fsanitizer_common%2Fsanitizer_linux_x86_64.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Fsanitizer_common%2Fsanitizer_linux_x86_64.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fsanitizer_common%2Fsanitizer_linux_x86_64.S?ref=86b2a5583b9494d2e80803fd6e325e123516d9f0", "patch": "@@ -1,4 +1,6 @@\n // This file is dual licensed under the MIT and the University of Illinois Open\n+// Source Licenses. See LICENSE.TXT for details.\n+\n // Avoid being marked as needing an executable stack:\n #if defined(__linux__) && defined(__ELF__)\n .section .note.GNU-stack,\"\",%progbits"}, {"sha": "a0f9a0753a63af9246a46ddc0b9dc9d08602f153", "filename": "libsanitizer/tsan/tsan_interceptors.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Ftsan%2Ftsan_interceptors.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Ftsan%2Ftsan_interceptors.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Ftsan%2Ftsan_interceptors.h?ref=86b2a5583b9494d2e80803fd6e325e123516d9f0", "patch": "@@ -1,4 +1,6 @@\n #ifndef TSAN_INTERCEPTORS_H\n+#define TSAN_INTERCEPTORS_H\n+\n #include \"sanitizer_common/sanitizer_stacktrace.h\"\n #include \"tsan_rtl.h\"\n "}, {"sha": "5b43f3ddada3f81c96f369947a39df015fd45118", "filename": "libsanitizer/tsan/tsan_ppc_regs.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Ftsan%2Ftsan_ppc_regs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Ftsan%2Ftsan_ppc_regs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Ftsan%2Ftsan_ppc_regs.h?ref=86b2a5583b9494d2e80803fd6e325e123516d9f0", "patch": "@@ -1,4 +1,6 @@\n #define r0 0\n+#define r1 1\n+#define r2 2\n #define r3 3\n #define r4 4\n #define r5 5"}, {"sha": "ef06f0444ae4ac2339963a252361d4bf2113330a", "filename": "libsanitizer/tsan/tsan_rtl_aarch64.S", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Ftsan%2Ftsan_rtl_aarch64.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Ftsan%2Ftsan_rtl_aarch64.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Ftsan%2Ftsan_rtl_aarch64.S?ref=86b2a5583b9494d2e80803fd6e325e123516d9f0", "patch": "@@ -1,4 +1,6 @@\n #include \"sanitizer_common/sanitizer_asm.h\"\n+\n+.section .bss\n .type\t__tsan_pointer_chk_guard, %object\n .size\t__tsan_pointer_chk_guard, 8\n __tsan_pointer_chk_guard:"}, {"sha": "d0f7a3f9af9890799d061ffb41176227ebd44c6f", "filename": "libsanitizer/tsan/tsan_rtl_mips64.S", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Ftsan%2Ftsan_rtl_mips64.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Ftsan%2Ftsan_rtl_mips64.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Ftsan%2Ftsan_rtl_mips64.S?ref=86b2a5583b9494d2e80803fd6e325e123516d9f0", "patch": "@@ -1,4 +1,6 @@\n .section .text\n+.set noreorder\n+\n .hidden __tsan_setjmp\n .comm _ZN14__interception11real_setjmpE,8,8\n .globl setjmp"}, {"sha": "8285e21aa1ec7a797dfcf4840ee5a7851106b497", "filename": "libsanitizer/tsan/tsan_rtl_ppc64.S", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Ftsan%2Ftsan_rtl_ppc64.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86b2a5583b9494d2e80803fd6e325e123516d9f0/libsanitizer%2Ftsan%2Ftsan_rtl_ppc64.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Ftsan%2Ftsan_rtl_ppc64.S?ref=86b2a5583b9494d2e80803fd6e325e123516d9f0", "patch": "@@ -1,4 +1,6 @@\n #include \"tsan_ppc_regs.h\"\n+\n+        .section .text\n         .hidden __tsan_setjmp\n         .globl _setjmp\n         .type _setjmp, @function"}]}