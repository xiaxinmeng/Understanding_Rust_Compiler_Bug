{"sha": "078a76c8a059f7a0ff4db84234279e1b0e3ef770", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDc4YTc2YzhhMDU5ZjdhMGZmNGRiODQyMzQyNzllMWIwZTNlZjc3MA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-08-27T03:52:44Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-08-27T03:52:44Z"}, "message": "decl.c (store_parm_decls): Reset immediate_size_expand.\n\n\t* decl.c (store_parm_decls): Reset immediate_size_expand.\n\t(finish_function): Likewise.\n\nFrom-SVN: r28914", "tree": {"sha": "8fc4367a5288669568674822c79d54faf4a1fa28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8fc4367a5288669568674822c79d54faf4a1fa28"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/078a76c8a059f7a0ff4db84234279e1b0e3ef770", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/078a76c8a059f7a0ff4db84234279e1b0e3ef770", "html_url": "https://github.com/Rust-GCC/gccrs/commit/078a76c8a059f7a0ff4db84234279e1b0e3ef770", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/078a76c8a059f7a0ff4db84234279e1b0e3ef770/comments", "author": null, "committer": null, "parents": [{"sha": "b122caababcbf0e800b3e252c5a6440560245b9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b122caababcbf0e800b3e252c5a6440560245b9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b122caababcbf0e800b3e252c5a6440560245b9f"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "0d1bec3a9e3aabcd8048d48d4399947fd5507246", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/078a76c8a059f7a0ff4db84234279e1b0e3ef770/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/078a76c8a059f7a0ff4db84234279e1b0e3ef770/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=078a76c8a059f7a0ff4db84234279e1b0e3ef770", "patch": "@@ -1,6 +1,6 @@\n 1999-08-26  Mark Mitchell  <mark@codesourcery.com>\n \n-\t* tree.c (store_parm_decls): Reset immediate_size_expand.\n+\t* decl.c (store_parm_decls): Reset immediate_size_expand.\n \t(finish_function): Likewise.\n \t\n \t* tree.c (cplus_unsave_expr_now): Don't return a value."}, {"sha": "f25400a4af070258bab40a6c79cc22a373d6ce1a", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/078a76c8a059f7a0ff4db84234279e1b0e3ef770/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/078a76c8a059f7a0ff4db84234279e1b0e3ef770/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=078a76c8a059f7a0ff4db84234279e1b0e3ef770", "patch": "@@ -13232,6 +13232,12 @@ store_parm_decls ()\n \n   /* Initialize RTL machinery.  */\n   init_function_start (fndecl, input_filename, lineno);\n+  /* Even though we're inside a function body, we still don't want to\n+     call expand_expr to calculate the size of a variable-sized array.\n+     We haven't necessarily assigned RTL to all variables yet, so it's\n+     not safe to try to expand expressions involving them.  */\n+  immediate_size_expand = 0;\n+  get_pending_sizes ();\n \n   /* Create a binding level for the parms.  */\n   expand_start_bindings (0);\n@@ -13819,6 +13825,12 @@ finish_function (lineno, flags, nested)\n \t  expand_label (no_return_label);\n \t}\n \n+      /* We hard-wired immediate_size_expand to zero in\n+\t start_function.  Expand_function_end will decrement this\n+\t variable.  So, we set the variable to one here, so that after\n+\t the decrement it will remain zero.  */\n+      immediate_size_expand = 0;\n+\n       /* Generate rtl for function exit.  */\n       expand_function_end (input_filename, lineno, 1);\n     }"}]}