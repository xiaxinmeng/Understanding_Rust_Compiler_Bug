{"sha": "f1d6f494666f6fb9ee061d21a1a190e45c2ea83c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjFkNmY0OTQ2NjZmNmZiOWVlMDYxZDIxYTFhMTkwZTQ1YzJlYTgzYw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2014-09-29T09:06:31Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2014-09-29T09:06:31Z"}, "message": "re PR c++/51385 (Unnecessary instantiation converting to pointer to template class instance)\n\n2014-09-29  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/51385\n\t* g++.dg/template/pr51385.C: New.\n\nFrom-SVN: r215680", "tree": {"sha": "0c3264a2f2196153730aeeb0209da9381eb4d179", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c3264a2f2196153730aeeb0209da9381eb4d179"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f1d6f494666f6fb9ee061d21a1a190e45c2ea83c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1d6f494666f6fb9ee061d21a1a190e45c2ea83c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1d6f494666f6fb9ee061d21a1a190e45c2ea83c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1d6f494666f6fb9ee061d21a1a190e45c2ea83c/comments", "author": null, "committer": null, "parents": [{"sha": "0fe81a0f05867af6818da309fb3b54678ca0e93f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fe81a0f05867af6818da309fb3b54678ca0e93f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0fe81a0f05867af6818da309fb3b54678ca0e93f"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "925adf802056db56b62b364df3bd42e5359d1cb3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1d6f494666f6fb9ee061d21a1a190e45c2ea83c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1d6f494666f6fb9ee061d21a1a190e45c2ea83c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f1d6f494666f6fb9ee061d21a1a190e45c2ea83c", "patch": "@@ -1,3 +1,8 @@\n+2014-09-29  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/51385\n+\t* g++.dg/template/pr51385.C: New.\n+\n 2014-09-28  Robert Suchanek  <robert.suchanek@imgtec.com>\n \n \t* gcc.target/mips/20140928.c: New test."}, {"sha": "e76995467ca68402765853e1b49959c7100c9ce1", "filename": "gcc/testsuite/g++.dg/template/pr51385.C", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1d6f494666f6fb9ee061d21a1a190e45c2ea83c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr51385.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1d6f494666f6fb9ee061d21a1a190e45c2ea83c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr51385.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr51385.C?ref=f1d6f494666f6fb9ee061d21a1a190e45c2ea83c", "patch": "@@ -0,0 +1,24 @@\n+// PR c++/51385\n+\n+template <__SIZE_TYPE__ N> struct NTmpl;\n+template <typename T, typename U, typename V = NTmpl<sizeof(T *)> >\n+struct PtrConvs {\n+   enum { bad = 1 };\n+};\n+\n+template <typename Target, typename Source>\n+struct PtrConvs<Target, Source, NTmpl<sizeof (*(Target **)0 = (Source *)0)> >;\n+\n+template<typename T> struct test { static const bool value = true; };\n+template<> struct test<short> { static const bool value = false; };\n+\n+template <typename T>\n+struct FussyTemplate\n+{\n+  int sa[test<T>::value ? 1 : -1];\n+};\n+\n+struct B { };\n+\n+typedef char chk[1];\n+typedef char chk[PtrConvs<FussyTemplate<short>, B>::bad];"}]}