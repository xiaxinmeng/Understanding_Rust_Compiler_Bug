{"sha": "620437f2d4773ab2b42f4edebbd949577788ca86", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjIwNDM3ZjJkNDc3M2FiMmI0MmY0ZWRlYmJkOTQ5NTc3Nzg4Y2E4Ng==", "commit": {"author": {"name": "Giovanni Funchal", "email": "gafunchal@gmail.com", "date": "2011-01-15T14:41:09Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2011-01-15T14:41:09Z"}, "message": "re PR c++/33558 ('mutable' incorrectly accepted on reference members)\n\n2011-01-15  Giovanni Funchal  <gafunchal@gmail.com>\n\t    Jonathan Wakely  <jwakely.gcc@gmail.com>\n\n\tPR c++/33558\n\t* decl.c (grokdeclarator): Reject mutable reference members.\n\n\nCo-Authored-By: Jonathan Wakely <jwakely.gcc@gmail.com>\n\nFrom-SVN: r168843", "tree": {"sha": "50462912055d7c3cfcbce570d96c9ec73a11b9e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/50462912055d7c3cfcbce570d96c9ec73a11b9e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/620437f2d4773ab2b42f4edebbd949577788ca86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/620437f2d4773ab2b42f4edebbd949577788ca86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/620437f2d4773ab2b42f4edebbd949577788ca86", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/620437f2d4773ab2b42f4edebbd949577788ca86/comments", "author": {"login": "funchal", "id": 216508, "node_id": "MDQ6VXNlcjIxNjUwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/216508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/funchal", "html_url": "https://github.com/funchal", "followers_url": "https://api.github.com/users/funchal/followers", "following_url": "https://api.github.com/users/funchal/following{/other_user}", "gists_url": "https://api.github.com/users/funchal/gists{/gist_id}", "starred_url": "https://api.github.com/users/funchal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/funchal/subscriptions", "organizations_url": "https://api.github.com/users/funchal/orgs", "repos_url": "https://api.github.com/users/funchal/repos", "events_url": "https://api.github.com/users/funchal/events{/privacy}", "received_events_url": "https://api.github.com/users/funchal/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "050d1a59d1568b0dc701a5a48409c847e26d4ee1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/050d1a59d1568b0dc701a5a48409c847e26d4ee1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/050d1a59d1568b0dc701a5a48409c847e26d4ee1"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "e7b45b4830b4fe8a8780b5ac7ef030d339b9375f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/620437f2d4773ab2b42f4edebbd949577788ca86/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/620437f2d4773ab2b42f4edebbd949577788ca86/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=620437f2d4773ab2b42f4edebbd949577788ca86", "patch": "@@ -1,3 +1,9 @@\n+2011-01-15  Giovanni Funchal  <gafunchal@gmail.com>\n+\t    Jonathan Wakely  <jwakely.gcc@gmail.com>\n+\n+\tPR c++/33558\n+\t* decl.c (grokdeclarator): Reject mutable reference members.\n+\n 2011-01-14  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/47289"}, {"sha": "6a13cc474ae2d7010c0ba39eb5d65f3d37a687b0", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/620437f2d4773ab2b42f4edebbd949577788ca86/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/620437f2d4773ab2b42f4edebbd949577788ca86/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=620437f2d4773ab2b42f4edebbd949577788ca86", "patch": "@@ -9214,6 +9214,12 @@ grokdeclarator (const cp_declarator *declarator,\n \t  error (\"const %qs cannot be declared %<mutable%>\", name);\n \t  storage_class = sc_none;\n \t}\n+      else if (TREE_CODE (type) == REFERENCE_TYPE)\n+\t{\n+\t  permerror (input_location, \"reference %qs cannot be declared \"\n+\t             \"%<mutable%>\", name);\n+\t  storage_class = sc_none;\n+\t}\n     }\n \n   /* If this is declaring a typedef name, return a TYPE_DECL.  */"}, {"sha": "b30e532b847ed2487a72e43d93c8c1e94c5191ac", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/620437f2d4773ab2b42f4edebbd949577788ca86/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/620437f2d4773ab2b42f4edebbd949577788ca86/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=620437f2d4773ab2b42f4edebbd949577788ca86", "patch": "@@ -1,3 +1,10 @@\n+2011-01-15  Giovanni Funchal  <gafunchal@gmail.com>\n+\t    Jonathan Wakely  <jwakely.gcc@gmail.com>\n+\n+\tPR c++/33558\n+\t* g++.dg/other/pr33558.C: New.\n+\t* g++.dg/other/pr33558-2.C: New.\n+\n 2011-01-14  Martin Jambor  <mjambor@suse.cz>\n \n \tPR tree-optimization/45934"}, {"sha": "a8df840b7a8a1c90138b819c06c9b64a72bb7aa4", "filename": "gcc/testsuite/g++.dg/other/pr33558-2.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/620437f2d4773ab2b42f4edebbd949577788ca86/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr33558-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/620437f2d4773ab2b42f4edebbd949577788ca86/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr33558-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr33558-2.C?ref=620437f2d4773ab2b42f4edebbd949577788ca86", "patch": "@@ -0,0 +1,6 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fpermissive\" } */\n+\n+class X {\n+  mutable int &q; /* { dg-warning \"cannot be declared 'mutable'\" } */\n+};"}, {"sha": "1a340af59724ccf2413808e4cbc211969dca285b", "filename": "gcc/testsuite/g++.dg/other/pr33558.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/620437f2d4773ab2b42f4edebbd949577788ca86/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr33558.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/620437f2d4773ab2b42f4edebbd949577788ca86/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr33558.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr33558.C?ref=620437f2d4773ab2b42f4edebbd949577788ca86", "patch": "@@ -0,0 +1,5 @@\n+/* { dg-do compile } */\n+\n+class X {\n+  mutable int &q; /* { dg-error \"cannot be declared 'mutable'\" } */\n+};"}]}