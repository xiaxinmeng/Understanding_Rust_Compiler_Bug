{"sha": "694dc0cad2f529e6e75cb4bdf09a64b9cd84de29", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Njk0ZGMwY2FkMmY1MjllNmU3NWNiNGJkZjA5YTY0YjljZDg0ZGUyOQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2011-04-06T06:17:22Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-04-06T06:17:22Z"}, "message": "profile.c (branch_prob): Move declaration of local variable.\n\n\t* profile.c (branch_prob): Move declaration of local variable.  Remove\n\tobsolete ??? comment.  Expand the location explicitly instead of using\n\tthe LOCATION_FILE and LOCATION_LINE macros.\n\nFrom-SVN: r172019", "tree": {"sha": "134d9160405536ff36be7452764169f13a4466e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/134d9160405536ff36be7452764169f13a4466e5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/694dc0cad2f529e6e75cb4bdf09a64b9cd84de29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/694dc0cad2f529e6e75cb4bdf09a64b9cd84de29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/694dc0cad2f529e6e75cb4bdf09a64b9cd84de29", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/694dc0cad2f529e6e75cb4bdf09a64b9cd84de29/comments", "author": null, "committer": null, "parents": [{"sha": "5c8e495222feb72e432b8e701961a6becf5f78b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c8e495222feb72e432b8e701961a6becf5f78b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c8e495222feb72e432b8e701961a6becf5f78b2"}], "stats": {"total": 22, "additions": 12, "deletions": 10}, "files": [{"sha": "b63116b05bf1717c5ec258f54aa3697bb5061180", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/694dc0cad2f529e6e75cb4bdf09a64b9cd84de29/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/694dc0cad2f529e6e75cb4bdf09a64b9cd84de29/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=694dc0cad2f529e6e75cb4bdf09a64b9cd84de29", "patch": "@@ -1,3 +1,9 @@\n+2011-04-06  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* profile.c (branch_prob): Move declaration of local variable.  Remove\n+\tobsolete ??? comment.  Expand the location explicitly instead of using\n+\tthe LOCATION_FILE and LOCATION_LINE macros.\n+\n 2011-04-06  Wei Guozhi  <carrot@google.com>\n \n \tPR target/47855"}, {"sha": "fd377486b856dadfc4def8a8f7699fa9898fc4ee", "filename": "gcc/profile.c", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/694dc0cad2f529e6e75cb4bdf09a64b9cd84de29/gcc%2Fprofile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/694dc0cad2f529e6e75cb4bdf09a64b9cd84de29/gcc%2Fprofile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprofile.c?ref=694dc0cad2f529e6e75cb4bdf09a64b9cd84de29", "patch": "@@ -1123,16 +1123,13 @@ branch_prob (void)\n   /* Line numbers.  */\n   if (coverage_begin_output ())\n     {\n-      gcov_position_t offset;\n-\n       /* Initialize the output.  */\n       output_location (NULL, 0, NULL, NULL);\n \n       FOR_EACH_BB (bb)\n \t{\n \t  gimple_stmt_iterator gsi;\n-\n-\t  offset = 0;\n+\t  gcov_position_t offset = 0;\n \n \t  if (bb == ENTRY_BLOCK_PTR->next_bb)\n \t    {\n@@ -1150,15 +1147,14 @@ branch_prob (void)\n \t\t\t\t &offset, bb);\n \t    }\n \n-\t  /* Notice GOTO expressions we eliminated while constructing the\n-\t     CFG.  */\n+\t  /* Notice GOTO expressions eliminated while constructing the CFG.  */\n \t  if (single_succ_p (bb)\n \t      && single_succ_edge (bb)->goto_locus != UNKNOWN_LOCATION)\n \t    {\n-\t      location_t curr_location = single_succ_edge (bb)->goto_locus;\n-\t      /* ??? The FILE/LINE API is inconsistent for these cases.  */\n-\t      output_location (LOCATION_FILE (curr_location),\n-\t\t\t       LOCATION_LINE (curr_location), &offset, bb);\n+\t      expanded_location curr_location\n+\t\t= expand_location (single_succ_edge (bb)->goto_locus);\n+\t      output_location (curr_location.file, curr_location.line,\n+\t\t\t       &offset, bb);\n \t    }\n \n \t  if (offset)"}]}