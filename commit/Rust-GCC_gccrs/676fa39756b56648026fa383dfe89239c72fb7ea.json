{"sha": "676fa39756b56648026fa383dfe89239c72fb7ea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Njc2ZmEzOTc1NmI1NjY0ODAyNmZhMzgzZGZlODkyMzljNzJmYjdlYQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-07-18T10:59:26Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-07-18T10:59:26Z"}, "message": "[multiple changes]\n\n2014-07-18  Robert Dewar  <dewar@adacore.com>\n\n\t* gnat_rm.texi: Document that Wchar_T_Size and Word_Size are\n\tstatic attributes.\n\n2014-07-18  Arnaud Charlet  <charlet@adacore.com>\n\n\t* a-witeio.adb, initialize.c: Update comments. Minor clean ups.\n\n2014-07-18  Pascal Obry  <obry@adacore.com>\n\n\t* adaint.c: Do not include wchar.h on VxWorks.\n\t* mingw32.h: Remove obsolete definition.\n\nFrom-SVN: r212812", "tree": {"sha": "cc0b54e0ccd02c0c238e0c46ce80772a93d5ebed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc0b54e0ccd02c0c238e0c46ce80772a93d5ebed"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/676fa39756b56648026fa383dfe89239c72fb7ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/676fa39756b56648026fa383dfe89239c72fb7ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/676fa39756b56648026fa383dfe89239c72fb7ea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/676fa39756b56648026fa383dfe89239c72fb7ea/comments", "author": null, "committer": null, "parents": [{"sha": "cd077efd33fc56016b9bea8f30964fb93a40ff3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd077efd33fc56016b9bea8f30964fb93a40ff3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd077efd33fc56016b9bea8f30964fb93a40ff3a"}], "stats": {"total": 38, "additions": 27, "deletions": 11}, "files": [{"sha": "ab3d1d39e5bac9e5d5d3d6f05dd63742f924fa8c", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=676fa39756b56648026fa383dfe89239c72fb7ea", "patch": "@@ -1,3 +1,17 @@\n+2014-07-18  Robert Dewar  <dewar@adacore.com>\n+\n+\t* gnat_rm.texi: Document that Wchar_T_Size and Word_Size are\n+\tstatic attributes.\n+\n+2014-07-18  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* a-witeio.adb, initialize.c: Update comments. Minor clean ups.\n+\n+2014-07-18  Pascal Obry  <obry@adacore.com>\n+\n+\t* adaint.c: Do not include wchar.h on VxWorks.\n+\t* mingw32.h: Remove obsolete definition.\n+\n 2014-07-18  Pascal Obry  <obry@adacore.com>\n \n \t* a-textio.adb, a-witeio.adb, a-ztexio.adb: Use C_Streams Default_Text."}, {"sha": "63249061014b1e731a4c6f166037f7db5a19d593", "filename": "gcc/ada/a-witeio.adb", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2Fa-witeio.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2Fa-witeio.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-witeio.adb?ref=676fa39756b56648026fa383dfe89239c72fb7ea", "patch": "@@ -1227,13 +1227,13 @@ package body Ada.Wide_Text_IO is\n      (File : File_Type;\n       Item : Wide_Character)\n    is\n-      wide_text_translation_required : Boolean;\n-      for wide_text_translation_required'Size use Character'Size;\n-      pragma Import (C, wide_text_translation_required,\n-                       \"__gnat_wide_text_translation_required\");\n+      wide_text_translation_required : Integer;\n+      pragma Import\n+        (C, wide_text_translation_required,\n+         \"__gnat_wide_text_translation_required\");\n       --  Text translation is required on Windows only. This means that the\n       --  console is doing translation and we do not want to do any encoding\n-      --  here. If this boolean is set we just output the character as-is.\n+      --  here. If this variable is not 0 we output the character via fputwc.\n \n       procedure Out_Char (C : Character);\n       --  Procedure to output one character of a wide character sequence\n@@ -1256,7 +1256,7 @@ package body Ada.Wide_Text_IO is\n    begin\n       FIO.Check_Write_Status (AP (File));\n \n-      if wide_text_translation_required\n+      if wide_text_translation_required /= 0\n         or else File.Text_Encoding /= Default_Text\n       then\n          set_mode (fileno (File.Stream), File.Text_Encoding);"}, {"sha": "84c67f58feae70a28be30d26bf1efd596c02cd27", "filename": "gcc/ada/adaint.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2Fadaint.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2Fadaint.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fadaint.c?ref=676fa39756b56648026fa383dfe89239c72fb7ea", "patch": "@@ -229,8 +229,10 @@ extern unsigned int LIB$CALLG_64 (unsigned long long argument_list [],\n \n #else\n #include <utime.h>\n+#if ! defined (__vxworks)\n #include <wchar.h>\n #endif\n+#endif\n \n #if defined (_WIN32)\n #include <process.h>"}, {"sha": "1615b4687a0ed99b9afdc0c85a403d93fb050984", "filename": "gcc/ada/gnat_rm.texi", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2Fgnat_rm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2Fgnat_rm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_rm.texi?ref=676fa39756b56648026fa383dfe89239c72fb7ea", "patch": "@@ -9896,13 +9896,14 @@ but, unlike @code{Size}, may be set for non-first subtypes.\n @code{Standard'Wchar_T_Size} (@code{Standard} is the only permissible\n prefix) provides the size in bits of the C @code{wchar_t} type\n primarily for constructing the definition of this type in\n-package @code{Interfaces.C}.\n+package @code{Interfaces.C}. The result is a static constant.\n \n @node Attribute Word_Size\n @unnumberedsec Attribute Word_Size\n @findex Word_Size\n @code{Standard'Word_Size} (@code{Standard} is the only permissible\n-prefix) provides the value @code{System.Word_Size}.\n+prefix) provides the value @code{System.Word_Size}. The result is\n+a static constant.\n \n @node Standard and Implementation Defined Restrictions\n @chapter Standard and Implementation Defined Restrictions"}, {"sha": "36df501ec85d5678eb1fa798fe1a16ce1e732c18", "filename": "gcc/ada/initialize.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2Finitialize.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2Finitialize.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Finitialize.c?ref=676fa39756b56648026fa383dfe89239c72fb7ea", "patch": "@@ -62,8 +62,8 @@ extern \"C\" {\n /* __gnat_initialize (NT-mingw32 Version) */\n /******************************************/\n \n-char __gnat_wide_text_translation_required = 0;\n-// wide text translation, 0=none, 1=activated\n+int __gnat_wide_text_translation_required = 0;\n+/* wide text translation, 0=none, 1=activated */\n \n #if defined (__MINGW32__)\n #include \"mingw32.h\""}, {"sha": "325c2ae7779b8f2a3ca1d30580d55eb367be8eb3", "filename": "gcc/ada/mingw32.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2Fmingw32.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/676fa39756b56648026fa383dfe89239c72fb7ea/gcc%2Fada%2Fmingw32.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmingw32.h?ref=676fa39756b56648026fa383dfe89239c72fb7ea", "patch": "@@ -63,7 +63,6 @@\n \n extern UINT CurrentCodePage;\n extern UINT CurrentCCSEncoding;\n-extern char __gnat_wide_text_translation_required;\n \n /*  Macros to convert to/from the code page specified in CurrentCodePage.  */\n #define S2WSC(wstr,str,len) \\"}]}