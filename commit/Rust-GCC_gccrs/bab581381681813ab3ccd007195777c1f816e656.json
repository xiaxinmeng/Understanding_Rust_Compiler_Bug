{"sha": "bab581381681813ab3ccd007195777c1f816e656", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmFiNTgxMzgxNjgxODEzYWIzY2NkMDA3MTk1Nzc3YzFmODE2ZTY1Ng==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2020-09-14T18:19:47Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2020-09-15T13:18:04Z"}, "message": "bb-reorder: Fix for ICEs caused by 69ca5f3a9882\n\nAfter the previous patch we are left with an unreachable BB.  This will\nICE if either we have -fschedule-fusion, or we do not have peephole2.\n\n2020-09-15  Segher Boessenkool  <segher@kernel.crashing.org>\n\n\tPR rtl-optimization/96475\n\t* bb-reorder.c (duplicate_computed_gotos): If we did anything, run\n\tcleanup_cfg.", "tree": {"sha": "81a05638cc76bb2b90ca1781584dd1fc9b0ea8a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81a05638cc76bb2b90ca1781584dd1fc9b0ea8a7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bab581381681813ab3ccd007195777c1f816e656", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bab581381681813ab3ccd007195777c1f816e656", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bab581381681813ab3ccd007195777c1f816e656", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bab581381681813ab3ccd007195777c1f816e656/comments", "author": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "committer": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c9de716a59c873859df3b3e1fbb993200fce5a73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9de716a59c873859df3b3e1fbb993200fce5a73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9de716a59c873859df3b3e1fbb993200fce5a73"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "2ad5197a9e719bb4ba7df8e42953c4c93012fc12", "filename": "gcc/bb-reorder.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bab581381681813ab3ccd007195777c1f816e656/gcc%2Fbb-reorder.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bab581381681813ab3ccd007195777c1f816e656/gcc%2Fbb-reorder.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbb-reorder.c?ref=bab581381681813ab3ccd007195777c1f816e656", "patch": "@@ -2760,6 +2760,10 @@ duplicate_computed_gotos (function *fun)\n     if (computed_jump_p (BB_END (bb)) && can_duplicate_block_p (bb))\n       changed |= maybe_duplicate_computed_goto (bb, max_size);\n \n+  /* Some blocks may have become unreachable.  */\n+  if (changed)\n+    cleanup_cfg (0);\n+\n   /* Duplicating blocks will redirect edges and may cause hot blocks\n     previously reached by both hot and cold blocks to become dominated\n     only by cold blocks.  */"}]}