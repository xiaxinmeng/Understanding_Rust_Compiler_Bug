{"sha": "2e7628842865d7de2eeb170af79f0fc38c057d9c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmU3NjI4ODQyODY1ZDdkZTJlZWIxNzBhZjc5ZjBmYzM4YzA1N2Q5Yw==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2008-07-21T17:41:13Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2008-07-21T17:41:13Z"}, "message": "h8300.c (h8300_hard_regno_scratch_ok): New.\n\n* config/h8300/h8300.c (h8300_hard_regno_scratch_ok): New.\n(TARGET_HARD_REGNO_SCRATCH_OK): Define.\n\nFrom-SVN: r138038", "tree": {"sha": "19660cc29a261ba90312a4177c9d8c7c38e37f47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19660cc29a261ba90312a4177c9d8c7c38e37f47"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2e7628842865d7de2eeb170af79f0fc38c057d9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e7628842865d7de2eeb170af79f0fc38c057d9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e7628842865d7de2eeb170af79f0fc38c057d9c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e7628842865d7de2eeb170af79f0fc38c057d9c/comments", "author": null, "committer": null, "parents": [{"sha": "a03f1b22cb818671a82fad00121360eda6ce6e38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a03f1b22cb818671a82fad00121360eda6ce6e38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a03f1b22cb818671a82fad00121360eda6ce6e38"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "951d26375d1a7e4aa30181f5a12839b1ce97aa4d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e7628842865d7de2eeb170af79f0fc38c057d9c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e7628842865d7de2eeb170af79f0fc38c057d9c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2e7628842865d7de2eeb170af79f0fc38c057d9c", "patch": "@@ -1,3 +1,8 @@\n+2008-07-21  DJ Delorie  <dj@redhat.com>\n+\n+\t* config/h8300/h8300.c (h8300_hard_regno_scratch_ok): New.\n+\t(TARGET_HARD_REGNO_SCRATCH_OK): Define.\n+\n 2008-07-21  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n \n \t* config/spu/spu.md (\"div<mode>3\"): Convert into expander, move"}, {"sha": "86790699f137cf8ebab058bef406403b5034bb9a", "filename": "gcc/config/h8300/h8300.c", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e7628842865d7de2eeb170af79f0fc38c057d9c/gcc%2Fconfig%2Fh8300%2Fh8300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e7628842865d7de2eeb170af79f0fc38c057d9c/gcc%2Fconfig%2Fh8300%2Fh8300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.c?ref=2e7628842865d7de2eeb170af79f0fc38c057d9c", "patch": "@@ -111,6 +111,7 @@ static unsigned int  h8300_bitfield_length        (rtx, rtx);\n static unsigned int  h8300_binary_length          (rtx, const h8300_length_table *);\n static bool          h8300_short_move_mem_p       (rtx, enum rtx_code);\n static unsigned int  h8300_move_length            (rtx *, const h8300_length_table *);\n+static bool\t     h8300_hard_regno_scratch_ok  (unsigned int);\n \n /* CPU_TYPE, says what cpu we're compiling for.  */\n int cpu_type;\n@@ -5612,6 +5613,20 @@ h8300_hard_regno_rename_ok (unsigned int old_reg ATTRIBUTE_UNUSED,\n   return 1;\n }\n \n+/* Returns true if register REGNO is safe to be allocated as a scratch\n+   register in the current function.  */\n+\n+static bool\n+h8300_hard_regno_scratch_ok (unsigned int regno)\n+{\n+  if (h8300_current_function_interrupt_function_p ()\n+      && ! WORD_REG_USED (regno))\n+    return false;\n+\n+  return true;\n+}\n+\n+\n /* Return nonzero if X is a legitimate constant.  */\n \n int\n@@ -5745,6 +5760,9 @@ h8300_return_in_memory (const_tree type, const_tree fntype ATTRIBUTE_UNUSED)\n #undef  TARGET_MACHINE_DEPENDENT_REORG\n #define TARGET_MACHINE_DEPENDENT_REORG h8300_reorg\n \n+#undef TARGET_HARD_REGNO_SCRATCH_OK\n+#define TARGET_HARD_REGNO_SCRATCH_OK h8300_hard_regno_scratch_ok\n+\n #undef TARGET_DEFAULT_TARGET_FLAGS\n #define TARGET_DEFAULT_TARGET_FLAGS TARGET_DEFAULT\n "}]}