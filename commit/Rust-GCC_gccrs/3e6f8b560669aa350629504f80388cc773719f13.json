{"sha": "3e6f8b560669aa350629504f80388cc773719f13", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2U2ZjhiNTYwNjY5YWEzNTA2Mjk1MDRmODAzODhjYzc3MzcxOWYxMw==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2010-12-15T05:04:40Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-12-15T05:04:40Z"}, "message": "Fix PR46928: handle \"A[p] == A[p]\" in data dep analysis with p a parameter of the loop.\n\n2010-12-14  Sebastian Pop  <sebastian.pop@amd.com>\n\n\tPR tree-optimization/46928\n\t* tree-data-ref.c (analyze_overlapping_iterations): Handle \"A[p] == A[p]\"\n\tin data dependence analysis with p a parameter of the loop.\n\n\t* gcc.dg/tree-ssa/ldist-17.c: New.\n\nFrom-SVN: r167843", "tree": {"sha": "e1f9a3b7e60d6567d61591500be04952318f5d47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e1f9a3b7e60d6567d61591500be04952318f5d47"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3e6f8b560669aa350629504f80388cc773719f13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e6f8b560669aa350629504f80388cc773719f13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e6f8b560669aa350629504f80388cc773719f13", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e6f8b560669aa350629504f80388cc773719f13/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ab2210870b28990071af15a53ce817a3fc6d5af8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab2210870b28990071af15a53ce817a3fc6d5af8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab2210870b28990071af15a53ce817a3fc6d5af8"}], "stats": {"total": 66, "additions": 64, "deletions": 2}, "files": [{"sha": "66c11c46f31059581db0cbd1af9ea24ca93b7b8e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e6f8b560669aa350629504f80388cc773719f13/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e6f8b560669aa350629504f80388cc773719f13/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3e6f8b560669aa350629504f80388cc773719f13", "patch": "@@ -1,3 +1,9 @@\n+2010-12-14  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\tPR tree-optimization/46928\n+\t* tree-data-ref.c (analyze_overlapping_iterations): Handle \"A[p] == A[p]\"\n+\tin data dependence analysis with p a parameter of the loop.\n+\n 2010-12-14  Sebastian Pop  <sebastian.pop@amd.com>\n \n \tPR tree-optimization/45948"}, {"sha": "fae339b81ede54ccc12ecfc870cd27658d552c55", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e6f8b560669aa350629504f80388cc773719f13/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e6f8b560669aa350629504f80388cc773719f13/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3e6f8b560669aa350629504f80388cc773719f13", "patch": "@@ -1,3 +1,8 @@\n+2010-12-14  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\tPR tree-optimization/46928\n+\t* gcc.dg/tree-ssa/ldist-17.c: New.\n+\n 2010-12-14  Sebastian Pop  <sebastian.pop@amd.com>\n \n \tPR tree-optimization/45948"}, {"sha": "a831d3c1b89710a9c82fff1dbaba43e4dfa33664", "filename": "gcc/testsuite/gcc.dg/tree-ssa/ldist-17.c", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e6f8b560669aa350629504f80388cc773719f13/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fldist-17.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e6f8b560669aa350629504f80388cc773719f13/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fldist-17.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fldist-17.c?ref=3e6f8b560669aa350629504f80388cc773719f13", "patch": "@@ -0,0 +1,50 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -ftree-loop-distribution -fdump-tree-ldist-details\" } */\n+\n+typedef int mad_fixed_t;\n+struct mad_pcm\n+{\n+  unsigned int samplerate;\n+  unsigned short channels;\n+  unsigned short length;\n+  mad_fixed_t samples[2][1152];\n+};\n+struct mad_synth\n+{\n+  mad_fixed_t filter[2][2][2][16][8];\n+  unsigned int phase;\n+  struct mad_pcm pcm;\n+};\n+void mad_synth_mute (struct mad_synth *synth);\n+void\n+mad_synth_mute (struct mad_synth *synth)\n+{\n+  unsigned int ch;\n+  unsigned int s;\n+  unsigned int v;\n+\n+  ch = 0U;\n+  while (ch < 2U)\n+    {\n+      s = 0U;\n+      while (s < 16U)\n+\t{\n+\t  v = 0U;\n+\t  while (v < 8U)\n+\t    {\n+\t      synth->filter[ch][1][1][s][v] = 0;\n+\t      synth->filter[ch][1][0][s][v] = 0;\n+\t      synth->filter[ch][0][1][s][v] = 0;\n+\t      synth->filter[ch][0][0][s][v] = 0;\n+\t      v++;\n+\t    }\n+\t  s++;\n+\t}\n+      ch++;\n+    }\n+  return;\n+}\n+\n+/* { dg-final { scan-tree-dump \"distributed: split to 4\" \"ldist\" } } */\n+/* { dg-final { scan-tree-dump-times \"__builtin_memset\" 8 \"ldist\" } } */\n+/* { dg-final { cleanup-tree-dump \"ldist\" } } */"}, {"sha": "a6d073190009f74d30bc0d7e98e70b2dbc366114", "filename": "gcc/tree-data-ref.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e6f8b560669aa350629504f80388cc773719f13/gcc%2Ftree-data-ref.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e6f8b560669aa350629504f80388cc773719f13/gcc%2Ftree-data-ref.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-data-ref.c?ref=3e6f8b560669aa350629504f80388cc773719f13", "patch": "@@ -2653,7 +2653,8 @@ analyze_overlapping_iterations (tree chrec_a,\n   /* If they are the same chrec, and are affine, they overlap\n      on every iteration.  */\n   else if (eq_evolutions_p (chrec_a, chrec_b)\n-\t   && evolution_function_is_affine_multivariate_p (chrec_a, lnn))\n+\t   && (evolution_function_is_affine_multivariate_p (chrec_a, lnn)\n+\t       || operand_equal_p (chrec_a, chrec_b, 0)))\n     {\n       dependence_stats.num_same_subscript_function++;\n       *overlap_iterations_a = conflict_fn (1, affine_fn_cst (integer_zero_node));\n@@ -2662,7 +2663,7 @@ analyze_overlapping_iterations (tree chrec_a,\n     }\n \n   /* If they aren't the same, and aren't affine, we can't do anything\n-     yet. */\n+     yet.  */\n   else if ((chrec_contains_symbols (chrec_a)\n \t    || chrec_contains_symbols (chrec_b))\n \t   && (!evolution_function_is_affine_multivariate_p (chrec_a, lnn)"}]}