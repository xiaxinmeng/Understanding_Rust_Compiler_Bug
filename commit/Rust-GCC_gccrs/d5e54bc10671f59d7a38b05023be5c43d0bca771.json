{"sha": "d5e54bc10671f59d7a38b05023be5c43d0bca771", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDVlNTRiYzEwNjcxZjU5ZDdhMzhiMDUwMjNiZTVjNDNkMGJjYTc3MQ==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@codesourcery.com", "date": "2009-01-29T18:23:21Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2009-01-29T18:23:21Z"}, "message": "re PR tree-optimization/39007 (-ftree-loop-distribution ICEs)\n\ngcc/\n\tPR tree-optimization/39007\n\t* tree-loop-distribution.c (generate_builtin): Use\n\trecompute_dominator to compute the immediate dominator of the\n\tbasic block just after the loop.\n\ngcc/testsuite/\n\tPR tree-optimization/39007\n\t* gcc.dg/tree-ssa/pr39007.c: New.\n\nFrom-SVN: r143767", "tree": {"sha": "ceff6833d1922d30a87ed2cc8371506158699fac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ceff6833d1922d30a87ed2cc8371506158699fac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d5e54bc10671f59d7a38b05023be5c43d0bca771", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5e54bc10671f59d7a38b05023be5c43d0bca771", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5e54bc10671f59d7a38b05023be5c43d0bca771", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5e54bc10671f59d7a38b05023be5c43d0bca771/comments", "author": null, "committer": null, "parents": [{"sha": "90ef7773275cd355128818a0593d721f2a972cce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90ef7773275cd355128818a0593d721f2a972cce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90ef7773275cd355128818a0593d721f2a972cce"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "1194f97cf0ce0854d640ba744709bcb52da117d8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5e54bc10671f59d7a38b05023be5c43d0bca771/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5e54bc10671f59d7a38b05023be5c43d0bca771/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d5e54bc10671f59d7a38b05023be5c43d0bca771", "patch": "@@ -1,3 +1,10 @@\n+2009-01-29  Kazu Hirata  <kazu@codesourcery.com>\n+\n+\tPR tree-optimization/39007\n+\t* tree-loop-distribution.c (generate_builtin): Use\n+\trecompute_dominator to compute the immediate dominator of the\n+\tbasic block just after the loop.\n+\n 2008-01-29  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n \n \t* config/i386/sol2-10.h [!HAVE_AS_IX86_DIFF_SECT_DELTA]"}, {"sha": "a52ad85a5d84da4d944e9a3cf1242eab842d266a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5e54bc10671f59d7a38b05023be5c43d0bca771/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5e54bc10671f59d7a38b05023be5c43d0bca771/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d5e54bc10671f59d7a38b05023be5c43d0bca771", "patch": "@@ -1,3 +1,8 @@\n+2009-01-29  Kazu Hirata  <kazu@codesourcery.com>\n+\n+\tPR tree-optimization/39007\n+\t* gcc.dg/tree-ssa/pr39007.c: New.\n+\n 2009-01-29  Kenneth Zadeck <zadeck@naturalbridge.com>\n \n \tPR middle-end/35854"}, {"sha": "94b24436d69f71e707e5d0838d923f45d44d7a00", "filename": "gcc/testsuite/gcc.dg/tree-ssa/pr39007.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5e54bc10671f59d7a38b05023be5c43d0bca771/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr39007.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5e54bc10671f59d7a38b05023be5c43d0bca771/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr39007.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr39007.c?ref=d5e54bc10671f59d7a38b05023be5c43d0bca771", "patch": "@@ -0,0 +1,13 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -ftree-loop-distribution\" } */\n+\n+void\n+foo (int *__restrict__ p, int *__restrict__ q, int count)\n+{\n+  int i;\n+  for (i = 0; i < count; i++)\n+    {\n+      *p++ = 0;\n+      *q++ = 0;\n+    }\n+}"}, {"sha": "8eca7c021666bb3e6b70f6636e7a3183e0d3ac63", "filename": "gcc/tree-loop-distribution.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5e54bc10671f59d7a38b05023be5c43d0bca771/gcc%2Ftree-loop-distribution.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5e54bc10671f59d7a38b05023be5c43d0bca771/gcc%2Ftree-loop-distribution.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-loop-distribution.c?ref=d5e54bc10671f59d7a38b05023be5c43d0bca771", "patch": "@@ -439,11 +439,13 @@ generate_builtin (struct loop *loop, bitmap partition, bool copy_p)\n       basic_block dest = single_exit (loop)->dest;\n       prop_phis (dest);\n       make_edge (src, dest, EDGE_FALLTHRU);\n-      set_immediate_dominator (CDI_DOMINATORS, dest, src);\n       cancel_loop_tree (loop);\n \n       for (i = 0; i < nbbs; i++)\n \tdelete_basic_block (bbs[i]);\n+\n+      set_immediate_dominator (CDI_DOMINATORS, dest,\n+\t\t\t       recompute_dominator (CDI_DOMINATORS, dest));\n     }\n \n  end:"}]}