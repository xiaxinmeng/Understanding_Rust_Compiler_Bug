{"sha": "ff1f317b3c1fdcfb061e20f3474f77c183189830", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmYxZjMxN2IzYzFmZGNmYjA2MWUyMGYzNDc0Zjc3YzE4MzE4OTgzMA==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2016-11-09T19:21:11Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2016-11-09T19:21:11Z"}, "message": "re PR target/78262 (wrong code with -fschedule-insns)\n\n\tPR target/78262\n\t* config/i386/i386.md (*<shift_insn><mode>3_doubleword): Mark\n\toperand 0 as earlyclobber.\n\ntestsuite/ChangeLog:\n\n\tPR target/78262\n\t* gcc.target/i386/pr78262.c: New test.\n\nFrom-SVN: r242013", "tree": {"sha": "7e72a8c9904b1f800b2e5e0ba01fbe6f65ff43e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7e72a8c9904b1f800b2e5e0ba01fbe6f65ff43e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff1f317b3c1fdcfb061e20f3474f77c183189830", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff1f317b3c1fdcfb061e20f3474f77c183189830", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff1f317b3c1fdcfb061e20f3474f77c183189830", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff1f317b3c1fdcfb061e20f3474f77c183189830/comments", "author": null, "committer": null, "parents": [{"sha": "302356da473b5032be5f5cacb351982cb7d23ab8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/302356da473b5032be5f5cacb351982cb7d23ab8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/302356da473b5032be5f5cacb351982cb7d23ab8"}], "stats": {"total": 47, "additions": 45, "deletions": 2}, "files": [{"sha": "55c6e6f096efb3e208786d2536c5fd4221d18332", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff1f317b3c1fdcfb061e20f3474f77c183189830/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff1f317b3c1fdcfb061e20f3474f77c183189830/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ff1f317b3c1fdcfb061e20f3474f77c183189830", "patch": "@@ -1,3 +1,9 @@\n+2016-11-09  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/78262\n+\t* config/i386/i386.md (*<shift_insn><mode>3_doubleword): Mark\n+\toperand 0 as earlyclobber.\n+\n 2016-11-09  Martin Liska  <mliska@suse.cz>\n \n \t* fold-const-call.c (fold_const_call): Fix up type of s0 and s1.\n@@ -107,7 +113,7 @@\n \t* sanitizer.def (__asan_version_mismatch_check_v6): Replace with\n \t__asan_version_mismatch_check_v8.\n \n- 2016-11-08  David Edelsohn  <dje.gcc@gmail.com>\n+2016-11-08  David Edelsohn  <dje.gcc@gmail.com>\n \n \t* dwarf2asm.c (USE_LINKONCE_INDIRECT): Test XCOFF_DEBUGGING_INFO\n \tat runtime."}, {"sha": "a5650a1ea14c45d032f6293fb48cee69f88a0fb8", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff1f317b3c1fdcfb061e20f3474f77c183189830/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff1f317b3c1fdcfb061e20f3474f77c183189830/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=ff1f317b3c1fdcfb061e20f3474f77c183189830", "patch": "@@ -10339,7 +10339,7 @@\n   \"operands[2] = gen_lowpart (QImode, operands[2]);\")\n \n (define_insn_and_split \"*<shift_insn><mode>3_doubleword\"\n-  [(set (match_operand:DWI 0 \"register_operand\" \"=r\")\n+  [(set (match_operand:DWI 0 \"register_operand\" \"=&r\")\n \t(any_shiftrt:DWI (match_operand:DWI 1 \"register_operand\" \"0\")\n \t\t\t (match_operand:QI 2 \"nonmemory_operand\" \"<S>c\")))\n    (clobber (reg:CC FLAGS_REG))]"}, {"sha": "bc80499f3d017adb7be43fae75ca73f7c5afb188", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff1f317b3c1fdcfb061e20f3474f77c183189830/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff1f317b3c1fdcfb061e20f3474f77c183189830/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ff1f317b3c1fdcfb061e20f3474f77c183189830", "patch": "@@ -1,3 +1,8 @@\n+2016-11-09  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/78262\n+\t* gcc.target/i386/pr78262.c: New test.\n+\n 2016-11-09  Fritz O. Reese <fritzoreese@gmail.com>\n \n \tPR fortran/78259"}, {"sha": "a0ead417191a270583a795c869713c2d6c8605e4", "filename": "gcc/testsuite/gcc.target/i386/pr78262.c", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff1f317b3c1fdcfb061e20f3474f77c183189830/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr78262.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff1f317b3c1fdcfb061e20f3474f77c183189830/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr78262.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr78262.c?ref=ff1f317b3c1fdcfb061e20f3474f77c183189830", "patch": "@@ -0,0 +1,32 @@\n+/* { dg-do run } */\n+/* { dg-require-effective-target int128 } */\n+/* { dg-options \"-O -fschedule-insns\" } */\n+\n+typedef unsigned char u8;\n+typedef unsigned __int128 u128;\n+\n+static u128 u128_0;\n+static u128 *p128;\n+\n+u128 __attribute__ ((noinline, noclone))\n+foo(u8 u8_0)\n+{\n+  p128 = &u128_0;\n+  u128_0 = u8_0;\n+  u128_0 = u128_0 << 127 | u128_0 >> 1;\n+  u128_0 >>= (u8)u128_0;\n+  return 2 + u128_0;\n+}\n+\n+int\n+main()\n+{\n+  u128 x = foo(5);\n+  if (p128 != &u128_0)\n+    __builtin_abort();\n+  if (u128_0 != ((u128)2 << 124))\n+    __builtin_abort();\n+  if (x != ((u128)2 << 124) + 2)\n+    __builtin_abort();\n+  return 0;\n+}"}]}