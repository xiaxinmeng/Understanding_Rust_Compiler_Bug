{"sha": "ba83886f6e93fe5152c8f5d2df7e8ba845609bfd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmE4Mzg4NmY2ZTkzZmU1MTUyYzhmNWQyZGY3ZThiYTg0NTYwOWJmZA==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-11-15T01:40:04Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-11-15T01:40:04Z"}, "message": "(expand_end_bindings): Use emit_move_insn instead of gen_move_insn in case...\n\n(expand_end_bindings): Use emit_move_insn instead of\ngen_move_insn in case nonlocal_goto_handler_slot is not a valid memref.\n\nFrom-SVN: r6091", "tree": {"sha": "60fc065229575792f87212c8f355097482a48eb2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/60fc065229575792f87212c8f355097482a48eb2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba83886f6e93fe5152c8f5d2df7e8ba845609bfd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba83886f6e93fe5152c8f5d2df7e8ba845609bfd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba83886f6e93fe5152c8f5d2df7e8ba845609bfd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba83886f6e93fe5152c8f5d2df7e8ba845609bfd/comments", "author": null, "committer": null, "parents": [{"sha": "2315a5db3894d58f58e5c8777ea65f1eef854923", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2315a5db3894d58f58e5c8777ea65f1eef854923", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2315a5db3894d58f58e5c8777ea65f1eef854923"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "928e6cbbcb8eea3447e4733f1bf8952dd28426ea", "filename": "gcc/stmt.c", "status": "modified", "additions": 14, "deletions": 7, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba83886f6e93fe5152c8f5d2df7e8ba845609bfd/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba83886f6e93fe5152c8f5d2df7e8ba845609bfd/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=ba83886f6e93fe5152c8f5d2df7e8ba845609bfd", "patch": "@@ -3108,6 +3108,7 @@ expand_end_bindings (vars, mark_ends, dont_jump_in)\n       rtx afterward = gen_label_rtx ();\n       rtx handler_label = gen_label_rtx ();\n       rtx save_receiver = gen_reg_rtx (Pmode);\n+      rtx insns;\n \n       /* Don't let jump_optimize delete the handler.  */\n       LABEL_PRESERVE_P (handler_label) = 1;\n@@ -3117,14 +3118,20 @@ expand_end_bindings (vars, mark_ends, dont_jump_in)\n       if (thisblock->next != 0)\n \t{\n \t  emit_move_insn (nonlocal_goto_handler_slot, save_receiver);\n-\t  emit_insn_before (gen_move_insn (save_receiver,\n-\t\t\t\t\t   nonlocal_goto_handler_slot),\n-\t\t\t    thisblock->data.block.first_insn);\n+\n+\t  start_sequence ();\n+\t  emit_move_insn (save_receiver, nonlocal_goto_handler_slot);\n+\t  insns = get_insns ();\n+\t  end_sequence ();\n+\t  emit_insns_before (insns, thisblock->data.block.first_insn);\n \t}\n-      emit_insn_before (gen_move_insn (nonlocal_goto_handler_slot,\n-\t\t\t\t       gen_rtx (LABEL_REF, Pmode,\n-\t\t\t\t\t\thandler_label)),\n-\t\t\tthisblock->data.block.first_insn);\n+\n+      start_sequence ();\n+      emit_move_insn (nonlocal_goto_handler_slot,\n+\t\t      gen_rtx (LABEL_REF, Pmode, handler_label));\n+      insns = get_insns ();\n+      end_sequence ();\n+      emit_insns_before (insns, thisblock->data.block.first_insn);\n \n       /* Jump around the handler; it runs only when specially invoked.  */\n       emit_jump (afterward);"}]}