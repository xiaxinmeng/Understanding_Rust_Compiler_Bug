{"sha": "9fbd2e55a11d518f049ed3e7b0b9f647383eb020", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWZiZDJlNTVhMTFkNTE4ZjA0OWVkM2U3YjBiOWY2NDczODNlYjAyMA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2018-08-01T19:52:46Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2018-08-01T19:52:46Z"}, "message": "Add -D_GLIBCXX_ASSERTIONS to DEBUG_FLAGS\n\nEnable assertions in the extra debug library built when\n--enable-libstdcxx-debug is used. Replace some Debug Mode assertions\nin src/c++11/futex.cc with __glibcxx_assert, because the library will\nnever be built with Debug Mode.\n\n\t* configure: Regenerate.\n\t* configure.ac: Add -D_GLIBCXX_ASSERTIONS to default DEBUG_FLAGS.\n\t* src/c++11/futex.cc: Use __glibcxx_assert instead of\n\t_GLIBCXX_DEBUG_ASSERT.\n\nFrom-SVN: r263235", "tree": {"sha": "02c34fc0edd2a4239fadb2a51359fd012e2bb882", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/02c34fc0edd2a4239fadb2a51359fd012e2bb882"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9fbd2e55a11d518f049ed3e7b0b9f647383eb020", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fbd2e55a11d518f049ed3e7b0b9f647383eb020", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9fbd2e55a11d518f049ed3e7b0b9f647383eb020", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fbd2e55a11d518f049ed3e7b0b9f647383eb020/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c191b1abe9db08abdf3b2d792980e8eee63735b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c191b1abe9db08abdf3b2d792980e8eee63735b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c191b1abe9db08abdf3b2d792980e8eee63735b5"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "8d7306a9749e043f507dc5fff29254dfcaddd2ab", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fbd2e55a11d518f049ed3e7b0b9f647383eb020/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fbd2e55a11d518f049ed3e7b0b9f647383eb020/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=9fbd2e55a11d518f049ed3e7b0b9f647383eb020", "patch": "@@ -1,3 +1,10 @@\n+2018-08-01  Jonathan Wakely  <jwakely@redhat.com>\n+\n+\t* configure: Regenerate.\n+\t* configure.ac: Add -D_GLIBCXX_ASSERTIONS to default DEBUG_FLAGS.\n+\t* src/c++11/futex.cc: Use __glibcxx_assert instead of\n+\t_GLIBCXX_DEBUG_ASSERT.\n+\n 2018-08-01  Mike Crowe  <mac@mcrowe.com>\n \n \t* include/std/condition_variable (wait_for): Use steady_clock."}, {"sha": "d33081d544ca12d86931a544d0ed048af2177803", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fbd2e55a11d518f049ed3e7b0b9f647383eb020/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fbd2e55a11d518f049ed3e7b0b9f647383eb020/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=9fbd2e55a11d518f049ed3e7b0b9f647383eb020", "patch": "@@ -1571,7 +1571,7 @@ Optional Features:\n   --enable-concept-checks use Boost-derived template checks [default=no]\n   --enable-libstdcxx-debug-flags=FLAGS\n                           pass compiler FLAGS when building debug library\n-                          [default=\"-gdwarf-4 -g3 -O0\"]\n+                          [default=\"-gdwarf-4 -g3 -O0 -D_GLIBCXX_ASSERTIONS\"]\n   --enable-libstdcxx-debug\n                           build extra debug library [default=no]\n   --enable-cxx-flags=FLAGS\n@@ -17932,7 +17932,7 @@ if test \"${enable_libstdcxx_debug_flags+set}\" = set; then :\n       *)          as_fn_error \"--enable-libstdcxx-debug-flags needs compiler flags as arguments\" \"$LINENO\" 5 ;;\n      esac\n else\n-  enable_libstdcxx_debug_flags=\"-gdwarf-4 -g3 -O0\"\n+  enable_libstdcxx_debug_flags=\"-gdwarf-4 -g3 -O0 -D_GLIBCXX_ASSERTIONS\"\n fi\n \n "}, {"sha": "332af3706d3bc9da378251d3bded18556dfa68d0", "filename": "libstdc++-v3/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fbd2e55a11d518f049ed3e7b0b9f647383eb020/libstdc%2B%2B-v3%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fbd2e55a11d518f049ed3e7b0b9f647383eb020/libstdc%2B%2B-v3%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure.ac?ref=9fbd2e55a11d518f049ed3e7b0b9f647383eb020", "patch": "@@ -168,7 +168,7 @@ GLIBCXX_ENABLE_LONG_LONG([yes])\n GLIBCXX_ENABLE_WCHAR_T([yes])\n GLIBCXX_ENABLE_C99([yes])\n GLIBCXX_ENABLE_CONCEPT_CHECKS([no])\n-GLIBCXX_ENABLE_DEBUG_FLAGS([\"-gdwarf-4 -g3 -O0\"])\n+GLIBCXX_ENABLE_DEBUG_FLAGS([\"-gdwarf-4 -g3 -O0 -D_GLIBCXX_ASSERTIONS\"])\n GLIBCXX_ENABLE_DEBUG([no])\n GLIBCXX_ENABLE_PARALLEL([yes])\n GLIBCXX_ENABLE_CXX_FLAGS"}, {"sha": "a5a8ec68c53c19a399a7829c9d1998ac08db79dc", "filename": "libstdc++-v3/src/c++11/futex.cc", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fbd2e55a11d518f049ed3e7b0b9f647383eb020/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B11%2Ffutex.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fbd2e55a11d518f049ed3e7b0b9f647383eb020/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B11%2Ffutex.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B11%2Ffutex.cc?ref=9fbd2e55a11d518f049ed3e7b0b9f647383eb020", "patch": "@@ -53,7 +53,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t// here on errors is abort.\n \tint ret __attribute__((unused));\n \tret = syscall (SYS_futex, __addr, futex_wait_op, __val, nullptr);\n-\t_GLIBCXX_DEBUG_ASSERT(ret == 0 || errno == EINTR || errno == EAGAIN);\n+\t__glibcxx_assert(ret == 0 || errno == EINTR || errno == EAGAIN);\n \treturn true;\n       }\n     else\n@@ -75,8 +75,8 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n \tif (syscall (SYS_futex, __addr, futex_wait_op, __val, &rt) == -1)\n \t  {\n-\t    _GLIBCXX_DEBUG_ASSERT(errno == EINTR || errno == EAGAIN\n-\t\t\t\t  || errno == ETIMEDOUT);\n+\t    __glibcxx_assert(errno == EINTR || errno == EAGAIN\n+\t\t\t     || errno == ETIMEDOUT);\n \t    if (errno == ETIMEDOUT)\n \t      return false;\n \t  }"}]}