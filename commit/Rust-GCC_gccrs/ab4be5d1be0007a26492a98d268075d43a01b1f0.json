{"sha": "ab4be5d1be0007a26492a98d268075d43a01b1f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI0YmU1ZDFiZTAwMDdhMjY0OTJhOThkMjY4MDc1ZDQzYTAxYjFmMA==", "commit": {"author": {"name": "Dominik Vogt", "email": "vogt@linux.vnet.ibm.com", "date": "2017-01-30T09:54:58Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2017-01-30T09:54:58Z"}, "message": "S/390: PR target/79240: Fix assertion in s390_extzv_shift_ok.\n\n2017-01-30  Dominik Vogt  <vogt@linux.vnet.ibm.com>\n\n\tPR target/79240\n\t* config/s390/s390.md (\"*r<noxa>sbg_<mode>_srl_bitmask\")\n\t(\"*r<noxa>sbg_<mode>_sll_bitmask\")\n\t(\"*extzv_<mode>_srl<clobbercc_or_nocc>\")\n\t(\"*extzv_<mode>_sll<clobbercc_or_nocc>\"):\n\tUse contiguous_bitmask_nowrap_operand.\n\n2017-01-30  Dominik Vogt  <vogt@linux.vnet.ibm.com>\n\n\tPR target/79240\n\t* gcc.target/s390/pr79240.c: New test.\n\nFrom-SVN: r245022", "tree": {"sha": "973b26c4fb5459bea5adc825ff0ae128e955e518", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/973b26c4fb5459bea5adc825ff0ae128e955e518"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab4be5d1be0007a26492a98d268075d43a01b1f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab4be5d1be0007a26492a98d268075d43a01b1f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab4be5d1be0007a26492a98d268075d43a01b1f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab4be5d1be0007a26492a98d268075d43a01b1f0/comments", "author": {"login": "vogtd", "id": 9690100, "node_id": "MDQ6VXNlcjk2OTAxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/9690100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vogtd", "html_url": "https://github.com/vogtd", "followers_url": "https://api.github.com/users/vogtd/followers", "following_url": "https://api.github.com/users/vogtd/following{/other_user}", "gists_url": "https://api.github.com/users/vogtd/gists{/gist_id}", "starred_url": "https://api.github.com/users/vogtd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vogtd/subscriptions", "organizations_url": "https://api.github.com/users/vogtd/orgs", "repos_url": "https://api.github.com/users/vogtd/repos", "events_url": "https://api.github.com/users/vogtd/events{/privacy}", "received_events_url": "https://api.github.com/users/vogtd/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6687d58dbc006e5300976b79b753a9525b19dd01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6687d58dbc006e5300976b79b753a9525b19dd01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6687d58dbc006e5300976b79b753a9525b19dd01"}], "stats": {"total": 33, "additions": 29, "deletions": 4}, "files": [{"sha": "30b078582dc1dd9625587f4a14103f2efd82c98c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab4be5d1be0007a26492a98d268075d43a01b1f0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab4be5d1be0007a26492a98d268075d43a01b1f0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ab4be5d1be0007a26492a98d268075d43a01b1f0", "patch": "@@ -1,3 +1,12 @@\n+2017-01-30  Dominik Vogt  <vogt@linux.vnet.ibm.com>\n+\n+\tPR target/79240\n+\t* config/s390/s390.md (\"*r<noxa>sbg_<mode>_srl_bitmask\")\n+\t(\"*r<noxa>sbg_<mode>_sll_bitmask\")\n+\t(\"*extzv_<mode>_srl<clobbercc_or_nocc>\")\n+\t(\"*extzv_<mode>_sll<clobbercc_or_nocc>\"):\n+\tUse contiguous_bitmask_nowrap_operand.\n+\n 2017-01-29  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \tPR target/79268"}, {"sha": "e47c2e90a65692934d90218fd5d8b37195fefd61", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab4be5d1be0007a26492a98d268075d43a01b1f0/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab4be5d1be0007a26492a98d268075d43a01b1f0/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=ab4be5d1be0007a26492a98d268075d43a01b1f0", "patch": "@@ -4127,7 +4127,7 @@\n \t    (lshiftrt:GPR\n               (match_operand:GPR 1 \"nonimmediate_operand\" \"d\")\n               (match_operand:GPR 3 \"nonzero_shift_count_operand\" \"\"))\n-            (match_operand:GPR 2 \"contiguous_bitmask_operand\" \"\"))\n+            (match_operand:GPR 2 \"contiguous_bitmask_nowrap_operand\" \"\"))\n \t  (match_operand:GPR 4 \"nonimmediate_operand\" \"0\")))\n    (clobber (reg:CC CC_REGNUM))]\n   \"TARGET_Z10\n@@ -4143,7 +4143,7 @@\n \t    (ashift:GPR\n               (match_operand:GPR 1 \"nonimmediate_operand\" \"d\")\n               (match_operand:GPR 3 \"nonzero_shift_count_operand\" \"\"))\n-            (match_operand:GPR 2 \"contiguous_bitmask_operand\" \"\"))\n+            (match_operand:GPR 2 \"contiguous_bitmask_nowrap_operand\" \"\"))\n \t  (match_operand:GPR 4 \"nonimmediate_operand\" \"0\")))\n    (clobber (reg:CC CC_REGNUM))]\n   \"TARGET_Z10\n@@ -7191,7 +7191,7 @@\n \t(and:GPR (lshiftrt:GPR\n \t\t   (match_operand:GPR 1 \"register_operand\" \"d\")\n \t\t   (match_operand:GPR 2 \"nonzero_shift_count_operand\" \"\"))\n-\t\t(match_operand:GPR 3 \"contiguous_bitmask_operand\" \"\")))]\n+\t\t(match_operand:GPR 3 \"contiguous_bitmask_nowrap_operand\" \"\")))]\n   \"<z10_or_zEC12_cond>\n    /* Note that even for the SImode pattern, the rotate is always DImode.  */\n    && s390_extzv_shift_ok (<bitsize>, -INTVAL (operands[2]),\n@@ -7205,7 +7205,7 @@\n \t(and:GPR (ashift:GPR\n \t\t  (match_operand:GPR 1 \"register_operand\" \"d\")\n \t\t  (match_operand:GPR 2 \"nonzero_shift_count_operand\" \"\"))\n-\t\t(match_operand:GPR 3 \"contiguous_bitmask_operand\" \"\")))]\n+\t\t(match_operand:GPR 3 \"contiguous_bitmask_nowrap_operand\" \"\")))]\n   \"<z10_or_zEC12_cond>\n    && s390_extzv_shift_ok (<bitsize>, INTVAL (operands[2]),\n \t\t\t   INTVAL (operands[3]))\""}, {"sha": "f93fc0c29f78106ae7db707af43419c64f8e8006", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab4be5d1be0007a26492a98d268075d43a01b1f0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab4be5d1be0007a26492a98d268075d43a01b1f0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ab4be5d1be0007a26492a98d268075d43a01b1f0", "patch": "@@ -1,3 +1,8 @@\n+2017-01-30  Dominik Vogt  <vogt@linux.vnet.ibm.com>\n+\n+\tPR target/79240\n+\t* gcc.target/s390/pr79240.c: New test.\n+\n 2017-01-29  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \tPR target/79268"}, {"sha": "bd8f72f3f800dc304209962ecdd5ecb3790595af", "filename": "gcc/testsuite/gcc.target/s390/pr79240.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab4be5d1be0007a26492a98d268075d43a01b1f0/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fpr79240.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab4be5d1be0007a26492a98d268075d43a01b1f0/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fpr79240.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fpr79240.c?ref=ab4be5d1be0007a26492a98d268075d43a01b1f0", "patch": "@@ -0,0 +1,11 @@\n+/* This testcase checks that s390_extzv_shift_ok does not cause an assertion\n+   failure.  */\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-w -march=z196 -mtune=zEC12 -m64 -mzarch -O2\" } */\n+\n+int\n+foo (int a)\n+{\n+  return sizeof (int) * a + 16 - a * sizeof (int) % 16;\n+}"}]}