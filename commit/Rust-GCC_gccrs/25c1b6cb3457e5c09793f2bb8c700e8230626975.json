{"sha": "25c1b6cb3457e5c09793f2bb8c700e8230626975", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjVjMWI2Y2IzNDU3ZTVjMDk3OTNmMmJiOGM3MDBlODIzMDYyNjk3NQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2018-02-22T09:55:32Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2018-02-22T09:55:32Z"}, "message": "re PR c++/84496 (Internal compiler error with lambda, static and auto since r236615)\n\n\tPR c++/84496\n\t* g++.dg/cpp1y/pr84496.C: New test.\n\nFrom-SVN: r257895", "tree": {"sha": "1f541e924c2b90555dcf2541dfe04dd002a8199f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f541e924c2b90555dcf2541dfe04dd002a8199f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/25c1b6cb3457e5c09793f2bb8c700e8230626975", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25c1b6cb3457e5c09793f2bb8c700e8230626975", "html_url": "https://github.com/Rust-GCC/gccrs/commit/25c1b6cb3457e5c09793f2bb8c700e8230626975", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25c1b6cb3457e5c09793f2bb8c700e8230626975/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3f5fabc0eab4b2145d7f4fd7cf310b9b5bf022ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f5fabc0eab4b2145d7f4fd7cf310b9b5bf022ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f5fabc0eab4b2145d7f4fd7cf310b9b5bf022ed"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "161d52370405a76169e43acd2b321798b4efdc17", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25c1b6cb3457e5c09793f2bb8c700e8230626975/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25c1b6cb3457e5c09793f2bb8c700e8230626975/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=25c1b6cb3457e5c09793f2bb8c700e8230626975", "patch": "@@ -1,5 +1,8 @@\n 2018-02-22  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c++/84496\n+\t* g++.dg/cpp1y/pr84496.C: New test.\n+\n \tPR target/84502\n \t* g++.dg/torture/pr84502.C: New test.\n "}, {"sha": "028d00235cd2ebcbc91632ed9f072b67d9920926", "filename": "gcc/testsuite/g++.dg/cpp1y/pr84496.C", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25c1b6cb3457e5c09793f2bb8c700e8230626975/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr84496.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25c1b6cb3457e5c09793f2bb8c700e8230626975/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr84496.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr84496.C?ref=25c1b6cb3457e5c09793f2bb8c700e8230626975", "patch": "@@ -0,0 +1,44 @@\n+// PR c++/84496\n+// { dg-do compile { target c++14 } }\n+\n+template <typename T, T n> struct C { static constexpr T D = n; };\n+struct E : C<bool, false> {};\n+template <typename> struct F : C<bool, false> {};\n+template <typename T> T foo ();\n+template <typename> struct H { typedef int G; };\n+template <typename> class I;\n+struct L;\n+template <typename, typename> struct J;\n+template <bool, bool, typename...> struct K;\n+struct R {\n+  template <typename M, typename... N>\n+  static J<decltype (foo<M> () (foo<N>...)), L> o;\n+};\n+template <typename P, typename... Q> struct K<false, false, P, Q...> : R {\n+  typedef decltype (o<P, Q...>) G;\n+};\n+template <typename P, typename... Q>\n+struct D : K<E::D, F<typename H<P>::G>::D, P, Q...> {};\n+template <typename P, typename... Q> struct I<P (Q...)> : D<P, Q...> {};\n+template <typename> class function;\n+template <typename S, typename... Q> struct function<S (Q...)> {\n+  template <typename T, typename = typename I<T (Q...)>::G> struct C;\n+  template <typename, typename> using U = int;\n+  template <typename P, typename = U<int, void>, typename = U<C<P>, void>>\n+  function (P);\n+};\n+template <typename S, typename... Q>\n+template <typename P, typename, typename>\n+function<S (Q...)>::function (P)\n+{\n+}\n+void bar (function<void (int)>);\n+\n+void\n+baz ()\n+{\n+  auto a = [] {\n+    static int counter;\n+    bar ([] (auto) { counter++; });\n+  };\n+}"}]}