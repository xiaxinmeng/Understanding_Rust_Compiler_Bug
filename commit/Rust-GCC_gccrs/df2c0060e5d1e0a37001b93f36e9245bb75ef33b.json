{"sha": "df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGYyYzAwNjBlNWQxZTBhMzcwMDFiOTNmMzZlOTI0NWJiNzVlZjMzYg==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2020-06-08T22:34:21Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2020-06-09T00:59:12Z"}, "message": "rs6000/testsuite: Allow xxperm* instead of only vperm*\n\nSome testcases failed (esp. with --with-cpu=power9) after my change to\nprefer xxperm over vperm when all else is equal.  Fix that.  (This also\ntightens the relevant REs somewhat).\n\n2020-06-09  Segher Boessenkool  <segher@kernel.crashing.org>\n\ngcc/testsuite/\n\t* gcc.target/powerpc/fold-vec-perm-char.c: Allow both vperm/vpermr and\n\txxperm/xxpermr.\n\t* gcc.target/powerpc/fold-vec-perm-double.c: Ditto.\n\t* gcc.target/powerpc/fold-vec-perm-float.c: Ditto.\n\t* gcc.target/powerpc/fold-vec-perm-int.c: Ditto.\n\t* gcc.target/powerpc/fold-vec-perm-longlong.c: Ditto.\n\t* gcc.target/powerpc/fold-vec-perm-pixel.c: Ditto.\n\t* gcc.target/powerpc/fold-vec-perm-short.c: Ditto.\n\t* gcc.target/powerpc/lvsl-lvsr.c: Ditto.\n\t* gcc.target/powerpc/vec-mult-char-2.c: Ditto.\n\t* gcc.target/powerpc/vsx-vector-6.p9.c: Also allow xxpermr.", "tree": {"sha": "fac8bc6246fe61eb9297a5946ca792a4820e96d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fac8bc6246fe61eb9297a5946ca792a4820e96d6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/comments", "author": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "committer": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2c455ae06c0b46a6a27be3a6bd869384758e4707", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c455ae06c0b46a6a27be3a6bd869384758e4707", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c455ae06c0b46a6a27be3a6bd869384758e4707"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "56a89f3f79b8535dde3705b384e60be92cb1dfff", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-perm-char.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-char.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-char.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-char.c?ref=df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "patch": "@@ -28,4 +28,4 @@ testuc (vector unsigned char vuc2, vector unsigned char vuc3,\n   return vec_perm (vuc2, vuc3, vuc);\n }\n \n-/* { dg-final { scan-assembler-times \"vperm\" 3 } } */\n+/* { dg-final { scan-assembler-times {\\m(?:v|xx)permr?\\M} 3 } } */"}, {"sha": "c982bc2232f231d6e8561c37df827d6e7a0e09c7", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-perm-double.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-double.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-double.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-double.c?ref=df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "patch": "@@ -14,4 +14,4 @@ testd (vector double vd2, vector double vd3, vector unsigned char vuc)\n   return vec_perm (vd2, vd3, vuc);\n }\n \n-/* { dg-final { scan-assembler-times \"vperm\" 1 } } */\n+/* { dg-final { scan-assembler-times {\\m(?:v|xx)permr?\\M} 1 } } */"}, {"sha": "64b8ac78deaabe3bfc9561fc43dbfb3f8d28ccd4", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-perm-float.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-float.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-float.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-float.c?ref=df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "patch": "@@ -13,4 +13,4 @@ testf (vector float vf2, vector float vf3, vector unsigned char vuc)\n   return vec_perm (vf2, vf3, vuc);\n }\n \n-/* { dg-final { scan-assembler-times \"vperm\" 1 } } */\n+/* { dg-final { scan-assembler-times {\\m(?:v|xx)permr?\\M} 1 } } */"}, {"sha": "a6dd59524cb8b346202de6f865bcc9bdecb18449", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-perm-int.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-int.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-int.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-int.c?ref=df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "patch": "@@ -28,4 +28,4 @@ testui (vector unsigned int vui2, vector unsigned int vui3,\n   return vec_perm (vui2, vui3, vuc);\n }\n \n-/* { dg-final { scan-assembler-times \"vperm\" 3 } } */\n+/* { dg-final { scan-assembler-times {\\m(?:v|xx)permr?\\M} 3 } } */"}, {"sha": "3cc757da5646c141d32e7da40ade75e6d50b3889", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-perm-longlong.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-longlong.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-longlong.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-longlong.c?ref=df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "patch": "@@ -29,4 +29,4 @@ testul (vector unsigned long long vul2, vector unsigned long long vul3,\n   return vec_perm (vul2, vul3, vuc);\n }\n \n-/* { dg-final { scan-assembler-times \"vperm\" 3 } } */\n+/* { dg-final { scan-assembler-times {\\m(?:v|xx)permr?\\M} 3 } } */"}, {"sha": "54fccd26e01eae3a7ead9bbcdc0a96f0938cdcf6", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-perm-pixel.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-pixel.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-pixel.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-pixel.c?ref=df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "patch": "@@ -13,4 +13,4 @@ testpx (vector pixel px2, vector pixel px3, vector unsigned char vuc)\n   return vec_perm (px2, px3, vuc);\n }\n \n-/* { dg-final { scan-assembler-times \"vperm\" 1 } } */\n+/* { dg-final { scan-assembler-times {\\m(?:v|xx)permr?\\M} 1 } } */"}, {"sha": "6a5d1a7df96784e73e8550ead4371bd86ebf4ea5", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-perm-short.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-short.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-short.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-perm-short.c?ref=df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "patch": "@@ -26,4 +26,4 @@ testus (vector unsigned short vus2, vector unsigned short vus3, vector unsigned\n   return vec_perm (vus2, vus3, vuc);\n }\n \n-/* { dg-final { scan-assembler-times \"vperm\" 3 } } */\n+/* { dg-final { scan-assembler-times {\\m(?:v|xx)permr?\\M} 3 } } */"}, {"sha": "93843c09f35a1387010081c62ab9912cbfe8a3d4", "filename": "gcc/testsuite/gcc.target/powerpc/lvsl-lvsr.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Flvsl-lvsr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Flvsl-lvsr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Flvsl-lvsr.c?ref=df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "patch": "@@ -7,7 +7,7 @@\n /* { dg-final { scan-assembler-times \"lvsl\" 2 } } */\n /* { dg-final { scan-assembler-times \"lvsr\" 2 } } */\n /* { dg-final { scan-assembler-times {\\mlxvd2x\\M|\\mlxv\\M} 2 } } */\n-/* { dg-final { scan-assembler-times \"vperm\" 2 } } */\n+/* { dg-final { scan-assembler-times {\\m(?:v|xx)permr?\\M} 2 } } */\n \n \n #include <altivec.h>"}, {"sha": "dcfa270a1ee2e7b7e15eab1444afa62363e3c71c", "filename": "gcc/testsuite/gcc.target/powerpc/vec-mult-char-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvec-mult-char-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvec-mult-char-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvec-mult-char-2.c?ref=df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "patch": "@@ -18,4 +18,4 @@ vector signed char vmulsi(vector signed char v,\n \n /* { dg-final { scan-assembler-times \"vmulesb\" 2 } } */\n /* { dg-final { scan-assembler-times \"vmulosb\" 2 } } */\n-/* { dg-final { scan-assembler-times \"vperm\" 2 } } */\n+/* { dg-final { scan-assembler-times {\\m(?:v|xx)permr?\\M} 2 } } */"}, {"sha": "2d81de1bea03ff4ae674d0d46df2bc7b595ba62e", "filename": "gcc/testsuite/gcc.target/powerpc/vsx-vector-6.p9.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6.p9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2c0060e5d1e0a37001b93f36e9245bb75ef33b/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6.p9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsx-vector-6.p9.c?ref=df2c0060e5d1e0a37001b93f36e9245bb75ef33b", "patch": "@@ -9,7 +9,7 @@\n /* { dg-final { scan-assembler-times {\\mvmaxub\\M} 1 } } */\n /* { dg-final { scan-assembler-times {\\mvmsumshs\\M} 1 } } */\n /* { dg-final { scan-assembler-times {\\mvmsumuhs\\M} 1 } } */\n-/* { dg-final { scan-assembler-times {\\m(?:vpermr?|xxperm)\\M} 1 } } */\n+/* { dg-final { scan-assembler-times {\\m(?:v|xx)permr?\\M} 1 } } */\n /* { dg-final { scan-assembler-times {\\mxvabsdp\\M} 1 } } */\n /* { dg-final { scan-assembler-times {\\mxvadddp\\M} 1 } } */\n /* { dg-final { scan-assembler-times {\\mxvcmpeqdp\\M} 9 } } */"}]}