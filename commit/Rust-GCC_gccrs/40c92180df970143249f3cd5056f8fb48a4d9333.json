{"sha": "40c92180df970143249f3cd5056f8fb48a4d9333", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDBjOTIxODBkZjk3MDE0MzI0OWYzY2Q1MDU2ZjhmYjQ4YTRkOTMzMw==", "commit": {"author": {"name": "Andre Vieira", "email": "andre.simoesdiasvieira@arm.com", "date": "2021-02-08T16:04:18Z"}, "committer": {"name": "Andre Vieira", "email": "andre.simoesdiasvieira@arm.com", "date": "2021-02-08T16:04:18Z"}, "message": "middle-end/98974 - fixup after STMT_VINFO_VEC_STMTS rework\n\nThis fixes up the nvectors parameter passed to vect_get_loop_mask in\nvectorizable_condition after the STMT_VINFO_VEC_STMTS rework.\n\ngcc/ChangeLog:\n2021-02-08  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n\n\tPR middle-end/98974\n\t* tree-vect-stmts.c (vectorizable_condition): Remove shadow vec_num\n\tparameter in vectorizable_condition.\n\ngcc/testsuite/ChangeLog:\n2021-02-08  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n\n\tPR middle-end/98974\n\t* gfortran.dg/pr98974.F90: New test.", "tree": {"sha": "a2f3d7dcd417e97c6324621231f1f2cd2f1a4998", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a2f3d7dcd417e97c6324621231f1f2cd2f1a4998"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/40c92180df970143249f3cd5056f8fb48a4d9333", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40c92180df970143249f3cd5056f8fb48a4d9333", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40c92180df970143249f3cd5056f8fb48a4d9333", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40c92180df970143249f3cd5056f8fb48a4d9333/comments", "author": {"login": "avieira-arm", "id": 68072104, "node_id": "MDQ6VXNlcjY4MDcyMTA0", "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avieira-arm", "html_url": "https://github.com/avieira-arm", "followers_url": "https://api.github.com/users/avieira-arm/followers", "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}", "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions", "organizations_url": "https://api.github.com/users/avieira-arm/orgs", "repos_url": "https://api.github.com/users/avieira-arm/repos", "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/avieira-arm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "avieira-arm", "id": 68072104, "node_id": "MDQ6VXNlcjY4MDcyMTA0", "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avieira-arm", "html_url": "https://github.com/avieira-arm", "followers_url": "https://api.github.com/users/avieira-arm/followers", "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}", "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions", "organizations_url": "https://api.github.com/users/avieira-arm/orgs", "repos_url": "https://api.github.com/users/avieira-arm/repos", "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/avieira-arm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d4536e431316b4568e236afd7a6017e5efd1b0a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4536e431316b4568e236afd7a6017e5efd1b0a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4536e431316b4568e236afd7a6017e5efd1b0a1"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "296adad3cf4afd8ce77dbe9e8481e03e0e2ddabe", "filename": "gcc/testsuite/gfortran.dg/pr98974.F90", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40c92180df970143249f3cd5056f8fb48a4d9333/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr98974.F90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40c92180df970143249f3cd5056f8fb48a4d9333/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr98974.F90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr98974.F90?ref=40c92180df970143249f3cd5056f8fb48a4d9333", "patch": "@@ -0,0 +1,21 @@\n+! PR middle-end/98974\n+! { dg-do compile }\n+! { dg-options \"-Ofast\" }\n+! { dg-additional-options \"-mcpu=neoverse-v1\" { target aarch64*-*-* } }\n+\n+module module_foobar\n+  integer,parameter :: fp_kind = selected_real_kind(15)\n+contains\n+ subroutine foobar( foo, ix ,jx ,kx,iy,ky)\n+   real, dimension( ix, kx, jx )  :: foo\n+   real(fp_kind), dimension( iy, ky, 3 ) :: bar, baz\n+       do k=1,ky\n+          do i=1,iy\n+                if ( baz(i,k,1) > 0. ) then\n+                  bar(i,k,1) = 0\n+                endif\n+                foo(i,nk,j) = baz0 *  bar(i,k,1)\n+          enddo\n+       enddo\n+ end\n+end"}, {"sha": "064e5d138ce9a151287662a0caefd9925b0a2920", "filename": "gcc/tree-vect-stmts.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40c92180df970143249f3cd5056f8fb48a4d9333/gcc%2Ftree-vect-stmts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40c92180df970143249f3cd5056f8fb48a4d9333/gcc%2Ftree-vect-stmts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-stmts.c?ref=40c92180df970143249f3cd5056f8fb48a4d9333", "patch": "@@ -10235,7 +10235,6 @@ vectorizable_condition (vec_info *vinfo,\n \n \t  if (masks)\n \t    {\n-\t      unsigned vec_num = vec_oprnds0.length ();\n \t      tree loop_mask\n \t\t= vect_get_loop_mask (gsi, masks, vec_num * ncopies,\n \t\t\t\t      vectype, i);"}]}