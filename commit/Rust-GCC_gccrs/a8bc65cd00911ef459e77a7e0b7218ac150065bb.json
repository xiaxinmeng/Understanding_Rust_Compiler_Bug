{"sha": "a8bc65cd00911ef459e77a7e0b7218ac150065bb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YThiYzY1Y2QwMDkxMWVmNDU5ZTc3YTdlMGI3MjE4YWMxNTAwNjViYg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-06-21T21:46:03Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-06-21T21:46:03Z"}, "message": "libgo, syscall: fix ptrace implementation on MIPS\n    \n    On MIPS, the correct structure for PtraceRegs is 'struct pt_regs' which\n    is declared in linux/ptrace.h. Previously no PtraceRegs structure was\n    created on MIPS because 'struct user_regs_struct' doesn't exist there.\n    \n    Fallback to using pt_regs when the PtraceRegs structure is generated in\n    mksysinfo.sh, then adjust syscall_linux_mipsx.go to read the program\n    counter from the correct field.\n    \n    In addition, implement PtraceGetRegs and PtraceSetRegs on all 3 ABI\n    variants.\n    \n    syscall_linux_mips64x.go can now be removed since the ptrace code on\n    all 3 ABIs is identical.\n    \n    Reviewed-on: https://go-review.googlesource.com/46150\n\nFrom-SVN: r249473", "tree": {"sha": "c2a5a378324e461624f45283c61d12f031767854", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2a5a378324e461624f45283c61d12f031767854"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a8bc65cd00911ef459e77a7e0b7218ac150065bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8bc65cd00911ef459e77a7e0b7218ac150065bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8bc65cd00911ef459e77a7e0b7218ac150065bb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8bc65cd00911ef459e77a7e0b7218ac150065bb/comments", "author": null, "committer": null, "parents": [{"sha": "8d4b68a7c4091c99c8d591e93efae5748a7ced13", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d4b68a7c4091c99c8d591e93efae5748a7ced13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d4b68a7c4091c99c8d591e93efae5748a7ced13"}], "stats": {"total": 20, "additions": 0, "deletions": 20}, "files": [{"sha": "c1d51b1e26d7744ab42fabf3fdad6184a916e777", "filename": "libgo/go/syscall/syscall_linux_mips64x.go", "status": "removed", "additions": 0, "deletions": 20, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d4b68a7c4091c99c8d591e93efae5748a7ced13/libgo%2Fgo%2Fsyscall%2Fsyscall_linux_mips64x.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d4b68a7c4091c99c8d591e93efae5748a7ced13/libgo%2Fgo%2Fsyscall%2Fsyscall_linux_mips64x.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Fsyscall_linux_mips64x.go?ref=8d4b68a7c4091c99c8d591e93efae5748a7ced13", "patch": "@@ -1,20 +0,0 @@\n-// Copyright 2009 The Go Authors. All rights reserved.\n-// Use of this source code is governed by a BSD-style\n-// license that can be found in the LICENSE file.\n-\n-// +build linux\n-// +build mips64 mips64le\n-\n-package syscall\n-\n-func (r *PtraceRegs) PC() uint64 { return r.Regs[64] }\n-\n-func (r *PtraceRegs) SetPC(pc uint64) { r.Regs[64] = pc }\n-\n-func PtraceGetRegs(pid int, regsout *PtraceRegs) (err error) {\n-\treturn ptrace(PTRACE_GETREGS, pid, 0, uintptr(unsafe.Pointer(regsout)))\n-}\n-\n-func PtraceSetRegs(pid int, regs *PtraceRegs) (err error) {\n-\treturn ptrace(PTRACE_SETREGS, pid, 0, uintptr(unsafe.Pointer(regs)))\n-}"}]}