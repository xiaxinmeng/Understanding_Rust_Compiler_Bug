{"sha": "51948daf1ceb71db9d5682df42c6da079acaf3d7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTE5NDhkYWYxY2ViNzFkYjlkNTY4MmRmNDJjNmRhMDc5YWNhZjNkNw==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2018-12-06T13:46:25Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2018-12-06T13:46:25Z"}, "message": "Drop duplicate half of doubly-applied test.\n\nFrom-SVN: r266854", "tree": {"sha": "5f04b64af9d2f7a87fe2c3018488846ccc46a910", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5f04b64af9d2f7a87fe2c3018488846ccc46a910"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/51948daf1ceb71db9d5682df42c6da079acaf3d7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51948daf1ceb71db9d5682df42c6da079acaf3d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51948daf1ceb71db9d5682df42c6da079acaf3d7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51948daf1ceb71db9d5682df42c6da079acaf3d7/comments", "author": null, "committer": null, "parents": [{"sha": "44d6626ced36c5bec93ae6d72d29373e9f6aa36a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44d6626ced36c5bec93ae6d72d29373e9f6aa36a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44d6626ced36c5bec93ae6d72d29373e9f6aa36a"}], "stats": {"total": 64, "additions": 0, "deletions": 64}, "files": [{"sha": "f66c0ce1e3f19124e38b098a2912133ab6dfa3e8", "filename": "gcc/testsuite/gcc.dg/Wstringop-truncation-5.c", "status": "modified", "additions": 0, "deletions": 64, "changes": 64, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51948daf1ceb71db9d5682df42c6da079acaf3d7/gcc%2Ftestsuite%2Fgcc.dg%2FWstringop-truncation-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51948daf1ceb71db9d5682df42c6da079acaf3d7/gcc%2Ftestsuite%2Fgcc.dg%2FWstringop-truncation-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWstringop-truncation-5.c?ref=51948daf1ceb71db9d5682df42c6da079acaf3d7", "patch": "@@ -62,67 +62,3 @@ void test_compound_literal (struct S *s)\n   strncpy (s->a, (char[]){ STR }, sizeof s->a - 1);\n   s->a [sizeof s->a - 1] = '\\0';\n }\n-/* PR tree-optimization/87028 - false positive -Wstringop-truncation\n-   strncpy with global variable source string\n-   { dg-do compile }\n-   { dg-options \"-O2 -Wstringop-truncation\" } */\n-\n-char *strncpy (char *, const char *, __SIZE_TYPE__);\n-\n-#define STR   \"1234567890\"\n-\n-struct S\n-{\n-  char a[5], b[5];\n-};\n-\n-const char arr[] = STR;\n-const char* const ptr = STR;\n-\n-const char arr2[][10] = { \"123\", STR };\n-\n-void test_literal (struct S *s)\n-{\n-  strncpy (s->a, STR, sizeof s->a - 1);     /* { dg-bogus \"\\\\\\[-Wstringop-truncation]\" } */\n-  s->a[sizeof s->a - 1] = '\\0';\n-}\n-\n-void test_global_arr (struct S *s)\n-{\n-  strncpy (s->a, arr, sizeof s->a - 1);     /* { dg-bogus \"\\\\\\[-Wstringop-truncation]\" } */\n-  s->a [sizeof s->a - 1] = '\\0';\n-}\n-\n-void test_global_arr2 (struct S *s)\n-{\n-  strncpy (s->a, arr2[1], sizeof s->a - 1); /* { dg-bogus \"\\\\\\[-Wstringop-truncation]\" } */\n-  s->a [sizeof s->a - 1] = '\\0';\n-\n-  strncpy (s->b, arr2[0], sizeof s->a - 1);\n-}\n-\n-void test_global_ptr (struct S *s)\n-{\n-  strncpy (s->a, ptr, sizeof s->a - 1);     /* { dg-bogus \"\\\\\\[-Wstringop-truncation]\" } */\n-  s->a [sizeof s->a - 1] = '\\0';\n-}\n-\n-void test_local_arr (struct S *s)\n-{\n-  const char arr[] = STR;\n-  strncpy (s->a, arr, sizeof s->a - 1);\n-  s->a [sizeof s->a - 1] = '\\0';\n-}\n-\n-void test_local_ptr (struct S *s)\n-{\n-  const char* const ptr = STR;\n-  strncpy (s->a, ptr, sizeof s->a - 1);     /* { dg-bogus \"\\\\\\[-Wstringop-truncation]\" } */\n-  s->a [sizeof s->a - 1] = '\\0';\n-}\n-\n-void test_compound_literal (struct S *s)\n-{\n-  strncpy (s->a, (char[]){ STR }, sizeof s->a - 1);\n-  s->a [sizeof s->a - 1] = '\\0';\n-}"}]}