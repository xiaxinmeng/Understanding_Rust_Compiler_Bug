{"sha": "097f3d486a63f934e76229d47857478b40c76748", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDk3ZjNkNDg2YTYzZjkzNGU3NjIyOWQ0Nzg1NzQ3OGI0MGM3Njc0OA==", "commit": {"author": {"name": "James E Wilson", "email": "wilson@specifixinc.com", "date": "2004-09-15T23:26:33Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2004-09-15T23:26:33Z"}, "message": "Fix linux kernel miscompilation.\n\nPR target/17455\n* config/ia64/ia64.c (ia64_function_ok_for_sibcall): Return false\nif current_function_decl is a sibcall.\n\nFrom-SVN: r87574", "tree": {"sha": "df7b4fe58d003da0d2b5471df3c9405350f30d32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/df7b4fe58d003da0d2b5471df3c9405350f30d32"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/097f3d486a63f934e76229d47857478b40c76748", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/097f3d486a63f934e76229d47857478b40c76748", "html_url": "https://github.com/Rust-GCC/gccrs/commit/097f3d486a63f934e76229d47857478b40c76748", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/097f3d486a63f934e76229d47857478b40c76748/comments", "author": null, "committer": null, "parents": [{"sha": "04a751889435ce14f2aca6880add30c2ff3319e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04a751889435ce14f2aca6880add30c2ff3319e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04a751889435ce14f2aca6880add30c2ff3319e3"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "39238769771c6bef5f325ed45301d901390734aa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/097f3d486a63f934e76229d47857478b40c76748/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/097f3d486a63f934e76229d47857478b40c76748/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=097f3d486a63f934e76229d47857478b40c76748", "patch": "@@ -1,3 +1,9 @@\n+2004-09-15  James E Wilson  <wilson@specifixinc.com>\n+\n+\tPR target/17455\n+\t* config/ia64/ia64.c (ia64_function_ok_for_sibcall): Return false\n+\tif current_function_decl is a sibcall.\n+\n 2004-09-15  Mark Mitchell  <mark@codesourcery.com>\n \n \t* varasm.c (default_function_rdodata_section): Make sure to pass"}, {"sha": "871c52de5021b4becd3559318de96f5cb88ec2dc", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/097f3d486a63f934e76229d47857478b40c76748/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/097f3d486a63f934e76229d47857478b40c76748/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=097f3d486a63f934e76229d47857478b40c76748", "patch": "@@ -3367,6 +3367,12 @@ ia64_pass_by_reference (CUMULATIVE_ARGS *cum ATTRIBUTE_UNUSED,\n static bool\n ia64_function_ok_for_sibcall (tree decl, tree exp ATTRIBUTE_UNUSED)\n {\n+  /* We can't perform a sibcall if the current function has the syscall_linkage\n+     attribute.  */\n+  if (lookup_attribute (\"syscall_linkage\",\n+\t\t\tTYPE_ATTRIBUTES (TREE_TYPE (current_function_decl))))\n+    return false;\n+\n   /* We must always return with our current GP.  This means we can\n      only sibcall to functions defined in the current module.  */\n   return decl && (*targetm.binds_local_p) (decl);"}]}