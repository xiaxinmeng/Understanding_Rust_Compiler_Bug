{"sha": "21234eb5e8de8044809c0f2902bdaf217107073f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjEyMzRlYjVlOGRlODA0NDgwOWMwZjI5MDJiZGFmMjE3MTA3MDczZg==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2016-09-04T09:07:52Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2016-09-04T09:07:52Z"}, "message": "Revert \"Replace error_at with assert in build_va_arg\"\n\n2016-09-04  Tom de Vries  <tom@codesourcery.com>\n\n\trevert:\n\t2016-08-29  Tom de Vries  <tom@codesourcery.com>\n\n\t* c-common.c (build_va_arg): Replace first argument type error\n\twith assert.\n\nFrom-SVN: r239975", "tree": {"sha": "77d09f8724bf4c288886104d212a2b0286a1eaa5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/77d09f8724bf4c288886104d212a2b0286a1eaa5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/21234eb5e8de8044809c0f2902bdaf217107073f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21234eb5e8de8044809c0f2902bdaf217107073f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21234eb5e8de8044809c0f2902bdaf217107073f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21234eb5e8de8044809c0f2902bdaf217107073f/comments", "author": null, "committer": null, "parents": [{"sha": "bcfbf31b4014f8533e59018eb3446aeb012e815e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bcfbf31b4014f8533e59018eb3446aeb012e815e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bcfbf31b4014f8533e59018eb3446aeb012e815e"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "7a641403cdadb94e3977bdefc710a1ee5163712a", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21234eb5e8de8044809c0f2902bdaf217107073f/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21234eb5e8de8044809c0f2902bdaf217107073f/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=21234eb5e8de8044809c0f2902bdaf217107073f", "patch": "@@ -1,3 +1,11 @@\n+2016-09-04  Tom de Vries  <tom@codesourcery.com>\n+\n+\trevert:\n+\t2016-08-29  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* c-common.c (build_va_arg): Replace first argument type error\n+\twith assert.\n+\n 2016-09-02  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/65467"}, {"sha": "1a834a3735b445d4a38b0c6d6483b336ee02f920", "filename": "gcc/c-family/c-common.c", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21234eb5e8de8044809c0f2902bdaf217107073f/gcc%2Fc-family%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21234eb5e8de8044809c0f2902bdaf217107073f/gcc%2Fc-family%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-common.c?ref=21234eb5e8de8044809c0f2902bdaf217107073f", "patch": "@@ -5834,7 +5834,12 @@ build_va_arg (location_t loc, tree expr, tree type)\n       /* Verify that &ap is still recognized as having va_list type.  */\n       tree canon_expr_type\n \t= targetm.canonical_va_list_type (TREE_TYPE (expr));\n-      gcc_assert (canon_expr_type != NULL_TREE);\n+      if (canon_expr_type == NULL_TREE)\n+\t{\n+\t  error_at (loc,\n+\t\t    \"first argument to %<va_arg%> not of type %<va_list%>\");\n+\t  return error_mark_node;\n+\t}\n \n       return build_va_arg_1 (loc, type, expr);\n     }\n@@ -5902,7 +5907,12 @@ build_va_arg (location_t loc, tree expr, tree type)\n       /* Verify that &ap is still recognized as having va_list type.  */\n       tree canon_expr_type\n \t= targetm.canonical_va_list_type (TREE_TYPE (expr));\n-      gcc_assert (canon_expr_type != NULL_TREE);\n+      if (canon_expr_type == NULL_TREE)\n+\t{\n+\t  error_at (loc,\n+\t\t    \"first argument to %<va_arg%> not of type %<va_list%>\");\n+\t  return error_mark_node;\n+\t}\n     }\n   else\n     {"}]}