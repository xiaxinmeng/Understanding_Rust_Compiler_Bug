{"sha": "1c01ebf64feab01ac3cee7deb71827d1ff73999e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWMwMWViZjY0ZmVhYjAxYWMzY2VlN2RlYjcxODI3ZDFmZjczOTk5ZQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2015-07-14T15:03:11Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2015-07-14T15:03:11Z"}, "message": "Sync toplevel files binutils-gdb\n\n\tSync with binutils-gdb:\n\t2015-05-01  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR ld/18355\n\t* Makefile.def: Add extra_configure_flags to host zlib.\n\t* configure.ac (extra_host_zlib_configure_flags): New.  Set\n\tto --enable-host-shared When bfd is to be built as shared\n\tlibrary.  AC_SUBST.\n\t* Makefile.in: Regenerated.\n\nFrom-SVN: r225776", "tree": {"sha": "100c6cb06d3290d764dba0671c6975d0f7023d1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/100c6cb06d3290d764dba0671c6975d0f7023d1b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1c01ebf64feab01ac3cee7deb71827d1ff73999e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c01ebf64feab01ac3cee7deb71827d1ff73999e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c01ebf64feab01ac3cee7deb71827d1ff73999e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c01ebf64feab01ac3cee7deb71827d1ff73999e/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96a58590dd57e67e7ef65f1dee8ee9fa2c460457"}], "stats": {"total": 55, "additions": 47, "deletions": 8}, "files": [{"sha": "719fa2d917c7f65eef331342e75c0251e56124cb", "filename": "ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c01ebf64feab01ac3cee7deb71827d1ff73999e/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c01ebf64feab01ac3cee7deb71827d1ff73999e/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=1c01ebf64feab01ac3cee7deb71827d1ff73999e", "patch": "@@ -1,3 +1,15 @@\n+2015-07-14  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tSync with binutils-gdb:\n+\t2015-05-01  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR ld/18355\n+\t* Makefile.def: Add extra_configure_flags to host zlib.\n+\t* configure.ac (extra_host_zlib_configure_flags): New.  Set\n+\tto --enable-host-shared When bfd is to be built as shared\n+\tlibrary.  AC_SUBST.\n+\t* Makefile.in: Regenerated.\n+\n 2015-07-14  Hans-Peter Nilsson  <hp@bitrange.com>\n \n \tSync with src:"}, {"sha": "439418884f462049678e527187c2c14e45b720cc", "filename": "Makefile.def", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c01ebf64feab01ac3cee7deb71827d1ff73999e/Makefile.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c01ebf64feab01ac3cee7deb71827d1ff73999e/Makefile.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.def?ref=1c01ebf64feab01ac3cee7deb71827d1ff73999e", "patch": "@@ -104,7 +104,9 @@ host_modules= { module= readline; };\n host_modules= { module= sid; };\n host_modules= { module= sim; };\n host_modules= { module= texinfo; no_install= true; };\n-host_modules= { module= zlib; no_install=true; no_check=true; bootstrap=true; };\n+host_modules= { module= zlib; no_install=true; no_check=true;\n+\t\tbootstrap=true;\n+\t        extra_configure_flags='@extra_host_zlib_configure_flags@';};\n host_modules= { module= gdb; };\n host_modules= { module= expect; };\n host_modules= { module= guile; };"}, {"sha": "cfc103594658b671185fd2c5f1a7a952374317e8", "filename": "Makefile.in", "status": "modified", "additions": 13, "deletions": 7, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c01ebf64feab01ac3cee7deb71827d1ff73999e/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c01ebf64feab01ac3cee7deb71827d1ff73999e/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=1c01ebf64feab01ac3cee7deb71827d1ff73999e", "patch": "@@ -26722,7 +26722,7 @@ configure-zlib:\n \t  $$s/$$module_srcdir/configure \\\n \t  --srcdir=$${topdir}/$$module_srcdir \\\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n-\t  --target=${target_alias}  \\\n+\t  --target=${target_alias} @extra_host_zlib_configure_flags@ \\\n \t  || exit 1\n @endif zlib\n \n@@ -26757,7 +26757,8 @@ configure-stage1-zlib:\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n \t  --target=${target_alias} \\\n \t   \\\n-\t  $(STAGE1_CONFIGURE_FLAGS)\n+\t  $(STAGE1_CONFIGURE_FLAGS) \\\n+\t  @extra_host_zlib_configure_flags@\n @endif zlib-bootstrap\n \n .PHONY: configure-stage2-zlib maybe-configure-stage2-zlib\n@@ -26790,7 +26791,8 @@ configure-stage2-zlib:\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n-\t  $(STAGE2_CONFIGURE_FLAGS)\n+\t  $(STAGE2_CONFIGURE_FLAGS) \\\n+\t  @extra_host_zlib_configure_flags@\n @endif zlib-bootstrap\n \n .PHONY: configure-stage3-zlib maybe-configure-stage3-zlib\n@@ -26823,7 +26825,8 @@ configure-stage3-zlib:\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n-\t  $(STAGE3_CONFIGURE_FLAGS)\n+\t  $(STAGE3_CONFIGURE_FLAGS) \\\n+\t  @extra_host_zlib_configure_flags@\n @endif zlib-bootstrap\n \n .PHONY: configure-stage4-zlib maybe-configure-stage4-zlib\n@@ -26856,7 +26859,8 @@ configure-stage4-zlib:\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n-\t  $(STAGE4_CONFIGURE_FLAGS)\n+\t  $(STAGE4_CONFIGURE_FLAGS) \\\n+\t  @extra_host_zlib_configure_flags@\n @endif zlib-bootstrap\n \n .PHONY: configure-stageprofile-zlib maybe-configure-stageprofile-zlib\n@@ -26889,7 +26893,8 @@ configure-stageprofile-zlib:\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n-\t  $(STAGEprofile_CONFIGURE_FLAGS)\n+\t  $(STAGEprofile_CONFIGURE_FLAGS) \\\n+\t  @extra_host_zlib_configure_flags@\n @endif zlib-bootstrap\n \n .PHONY: configure-stagefeedback-zlib maybe-configure-stagefeedback-zlib\n@@ -26922,7 +26927,8 @@ configure-stagefeedback-zlib:\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n-\t  $(STAGEfeedback_CONFIGURE_FLAGS)\n+\t  $(STAGEfeedback_CONFIGURE_FLAGS) \\\n+\t  @extra_host_zlib_configure_flags@\n @endif zlib-bootstrap\n \n "}, {"sha": "d7bc62fa9fb8d19d482dd6e6e61292adf3b28050", "filename": "configure", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c01ebf64feab01ac3cee7deb71827d1ff73999e/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c01ebf64feab01ac3cee7deb71827d1ff73999e/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=1c01ebf64feab01ac3cee7deb71827d1ff73999e", "patch": "@@ -643,6 +643,7 @@ CXXFLAGS_FOR_TARGET\n CFLAGS_FOR_TARGET\n DEBUG_PREFIX_CFLAGS_FOR_TARGET\n SYSROOT_CFLAGS_FOR_TARGET\n+extra_host_zlib_configure_flags\n extra_host_libiberty_configure_flags\n stage1_languages\n extra_linker_plugin_flags\n@@ -6574,15 +6575,24 @@ fi\n \n # Sometimes we have special requirements for the host libiberty.\n extra_host_libiberty_configure_flags=\n+extra_host_zlib_configure_flags=\n case \" $configdirs \" in\n   *\" lto-plugin \"* | *\" libcc1 \"*)\n     # When these are to be built as shared libraries, the same applies to\n     # libiberty.\n     extra_host_libiberty_configure_flags=--enable-shared\n     ;;\n+  *\" bfd \"*)\n+    # When bfd is to be built as a shared library, the same applies to\n+    # zlib.\n+    if test \"$enable_shared\" = \"yes\"; then\n+      extra_host_zlib_configure_flags=--enable-host-shared\n+    fi\n+    ;;\n esac\n \n \n+\n # Produce a warning message for the subdirs we can't configure.\n # This isn't especially interesting in the Cygnus tree, but in the individual\n # FSF releases, it's important to let people know when their machine isn't"}, {"sha": "dfc7e75f6d4554cbac83ced4afd4826d6ba4fa7f", "filename": "configure.ac", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c01ebf64feab01ac3cee7deb71827d1ff73999e/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c01ebf64feab01ac3cee7deb71827d1ff73999e/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=1c01ebf64feab01ac3cee7deb71827d1ff73999e", "patch": "@@ -2271,14 +2271,23 @@ fi\n \n # Sometimes we have special requirements for the host libiberty.\n extra_host_libiberty_configure_flags=\n+extra_host_zlib_configure_flags=\n case \" $configdirs \" in\n   *\" lto-plugin \"* | *\" libcc1 \"*)\n     # When these are to be built as shared libraries, the same applies to\n     # libiberty.\n     extra_host_libiberty_configure_flags=--enable-shared\n     ;;\n+  *\" bfd \"*)\n+    # When bfd is to be built as a shared library, the same applies to\n+    # zlib.\n+    if test \"$enable_shared\" = \"yes\"; then\n+      extra_host_zlib_configure_flags=--enable-host-shared\n+    fi\n+    ;;\n esac\n AC_SUBST(extra_host_libiberty_configure_flags)\n+AC_SUBST(extra_host_zlib_configure_flags)\n \n # Produce a warning message for the subdirs we can't configure.\n # This isn't especially interesting in the Cygnus tree, but in the individual"}]}