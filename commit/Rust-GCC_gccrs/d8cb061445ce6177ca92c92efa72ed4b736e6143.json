{"sha": "d8cb061445ce6177ca92c92efa72ed4b736e6143", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDhjYjA2MTQ0NWNlNjE3N2NhOTJjOTJlZmE3MmVkNGI3MzZlNjE0Mw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-10-13T23:43:56Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-10-13T23:43:56Z"}, "message": "re PR debug/15860 (No DW_AT_location debug info is emitted for formal arguments to a function that uses \"register\" qualifiers)\n\n        PR debug/15860\n        * dwarf2out.c (rtl_for_decl_location): Apply big-endian correction\n        for DECL_INCOMING_RTL.\n\nFrom-SVN: r89012", "tree": {"sha": "6eb864280d18e81e41ea44c20c6751fdf9ea6978", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6eb864280d18e81e41ea44c20c6751fdf9ea6978"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8cb061445ce6177ca92c92efa72ed4b736e6143", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8cb061445ce6177ca92c92efa72ed4b736e6143", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8cb061445ce6177ca92c92efa72ed4b736e6143", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8cb061445ce6177ca92c92efa72ed4b736e6143/comments", "author": null, "committer": null, "parents": [{"sha": "bf6ac87cc8d6a0c39c88dc78b2263317a6284c00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf6ac87cc8d6a0c39c88dc78b2263317a6284c00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf6ac87cc8d6a0c39c88dc78b2263317a6284c00"}], "stats": {"total": 35, "additions": 27, "deletions": 8}, "files": [{"sha": "cea88e1f31fe5ca4d098bc6096c996d3408ccf4e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8cb061445ce6177ca92c92efa72ed4b736e6143/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8cb061445ce6177ca92c92efa72ed4b736e6143/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d8cb061445ce6177ca92c92efa72ed4b736e6143", "patch": "@@ -1,3 +1,9 @@\n+2004-10-13  Richard Henderson  <rth@redhat.com>\n+\n+\tPR debug/15860\n+\t* dwarf2out.c (rtl_for_decl_location): Apply big-endian correction\n+\tfor DECL_INCOMING_RTL.\n+\n 2004-10-14  Hans-Peter Nilsson  <hp@axis.com>\n \n \tPR target/17984"}, {"sha": "75e328d91d301ce430400e2d1fc175dc68263b14", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 21, "deletions": 8, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8cb061445ce6177ca92c92efa72ed4b736e6143/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8cb061445ce6177ca92c92efa72ed4b736e6143/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=d8cb061445ce6177ca92c92efa72ed4b736e6143", "patch": "@@ -9790,19 +9790,32 @@ rtl_for_decl_location (tree decl)\n     {\n       if (rtl == NULL_RTX || is_pseudo_reg (rtl))\n \t{\n-\t  tree declared_type = type_main_variant (TREE_TYPE (decl));\n-\t  tree passed_type = type_main_variant (DECL_ARG_TYPE (decl));\n+\t  tree declared_type = TREE_TYPE (decl);\n+\t  tree passed_type = DECL_ARG_TYPE (decl);\n+\t  enum machine_mode dmode = TYPE_MODE (declared_type);\n+\t  enum machine_mode pmode = TYPE_MODE (passed_type);\n \n \t  /* This decl represents a formal parameter which was optimized out.\n \t     Note that DECL_INCOMING_RTL may be NULL in here, but we handle\n \t     all cases where (rtl == NULL_RTX) just below.  */\n-\t  if (declared_type == passed_type)\n-\t    rtl = DECL_INCOMING_RTL (decl);\n-\t  else if (! BYTES_BIG_ENDIAN\n-\t\t   && TREE_CODE (declared_type) == INTEGER_TYPE\n-\t\t   && (GET_MODE_SIZE (TYPE_MODE (declared_type))\n-\t\t       <= GET_MODE_SIZE (TYPE_MODE (passed_type))))\n+\t  if (dmode == pmode)\n \t    rtl = DECL_INCOMING_RTL (decl);\n+\t  else if (SCALAR_INT_MODE_P (dmode)\n+\t\t   && GET_MODE_SIZE (dmode) <= GET_MODE_SIZE (pmode))\n+\t    {\n+\t      rtx inc = DECL_INCOMING_RTL (decl);\n+\t      if (REG_P (inc))\n+\t\trtl = inc;\n+\t      else if (MEM_P (inc))\n+\t\t{\n+\t\t  if (BYTES_BIG_ENDIAN)\n+\t\t    rtl = adjust_address_nv (inc, dmode,\n+\t\t\t\t\t     GET_MODE_SIZE (pmode)\n+\t\t\t\t\t     - GET_MODE_SIZE (dmode));\n+\t\t  else\n+\t\t    rtl = inc;\n+\t\t}\n+\t    }\n \t}\n \n       /* If the parm was passed in registers, but lives on the stack, then"}]}