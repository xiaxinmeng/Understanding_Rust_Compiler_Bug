{"sha": "dc0c6451cd5551fe2f1cac817acf62e71ab73423", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGMwYzY0NTFjZDU1NTFmZTJmMWNhYzgxN2FjZjYyZTcxYWI3MzQyMw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2009-08-19T15:27:48Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-08-19T15:27:48Z"}, "message": "method.c (use_thunk): Call free_after_compilation after assemble_end_function.\n\n\t* method.c (use_thunk): Call free_after_compilation after\n\tassemble_end_function.\n\n\t* config/rs6000/rs6000.c (rs6000_output_mi_thunk): Don't call\n\tfree_after_compilation.\n\t* config/score/score7.c (score7_output_mi_thunk): Likewise.\n\t* config/score/score3.c (score3_output_mi_thunk): Likewise.\n\t* config/ia64/ia64.c (ia64_output_mi_thunk): Likewise.\n\t* config/mips/mips.c (mips_output_mi_thunk): Likewise.\n\t* config/sh/sh.c (sh_output_mi_thunk): Likewise.\n\t* config/m68k/m68k.c (m68k_output_mi_thunk): Likewise.\n\t* config/sparc/sparc.c (sparc_output_mi_thunk): Likewise.\n\nFrom-SVN: r150938", "tree": {"sha": "ab9cb60c984e206b00c2a68af48c934ec209f92f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab9cb60c984e206b00c2a68af48c934ec209f92f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dc0c6451cd5551fe2f1cac817acf62e71ab73423", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc0c6451cd5551fe2f1cac817acf62e71ab73423", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc0c6451cd5551fe2f1cac817acf62e71ab73423", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc0c6451cd5551fe2f1cac817acf62e71ab73423/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9302a061421dfbd63626da0559bc65a3c2f87ce4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9302a061421dfbd63626da0559bc65a3c2f87ce4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9302a061421dfbd63626da0559bc65a3c2f87ce4"}], "stats": {"total": 26, "additions": 18, "deletions": 8}, "files": [{"sha": "4397d759b8588f46452ed9317561633626c8008d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dc0c6451cd5551fe2f1cac817acf62e71ab73423", "patch": "@@ -1,3 +1,15 @@\n+2009-08-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* config/rs6000/rs6000.c (rs6000_output_mi_thunk): Don't call\n+\tfree_after_compilation.\n+\t* config/score/score7.c (score7_output_mi_thunk): Likewise.\n+\t* config/score/score3.c (score3_output_mi_thunk): Likewise.\n+\t* config/ia64/ia64.c (ia64_output_mi_thunk): Likewise.\n+\t* config/mips/mips.c (mips_output_mi_thunk): Likewise.\n+\t* config/sh/sh.c (sh_output_mi_thunk): Likewise.\n+\t* config/m68k/m68k.c (m68k_output_mi_thunk): Likewise.\n+\t* config/sparc/sparc.c (sparc_output_mi_thunk): Likewise.\n+\n 2009-08-19  Ian Lance Taylor  <iant@google.com>\n \n \t* doc/md.texi (Insn Canonicalizations): Correct canonicalization"}, {"sha": "dfc702954d79d63a084eaa7cadcbb40a02fa619c", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=dc0c6451cd5551fe2f1cac817acf62e71ab73423", "patch": "@@ -10288,7 +10288,6 @@ ia64_output_mi_thunk (FILE *file, tree thunk ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n-  free_after_compilation (cfun);\n \n   reload_completed = 0;\n   epilogue_completed = 0;"}, {"sha": "1027d1c724c01d865bbdfb042d71a6d08b477b31", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=dc0c6451cd5551fe2f1cac817acf62e71ab73423", "patch": "@@ -5026,7 +5026,6 @@ m68k_output_mi_thunk (FILE *file, tree thunk ATTRIBUTE_UNUSED,\n   /* Restore the original PIC register.  */\n   if (flag_pic)\n     SET_REGNO (pic_offset_table_rtx, PIC_REG);\n-  free_after_compilation (cfun);\n }\n \n /* Worker function for TARGET_STRUCT_VALUE_RTX.  */"}, {"sha": "04a1f0ed8cd09e00ba9558adfb37b6959810612e", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=dc0c6451cd5551fe2f1cac817acf62e71ab73423", "patch": "@@ -13942,7 +13942,6 @@ mips_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n-  free_after_compilation (cfun);\n \n   /* Clean up the vars set above.  Note that final_end_function resets\n      the global pointer for us.  */"}, {"sha": "e6481fbe33cd3e75daa0ce99f9da7a97c3929ead", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=dc0c6451cd5551fe2f1cac817acf62e71ab73423", "patch": "@@ -20117,7 +20117,6 @@ rs6000_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n-  free_after_compilation (cfun);\n \n   reload_completed = 0;\n   epilogue_completed = 0;"}, {"sha": "d27d1f9f7641a85ed8b9dc5e1fcbf9b6c33fae1e", "filename": "gcc/config/score/score3.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fscore%2Fscore3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fscore%2Fscore3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fscore%2Fscore3.c?ref=dc0c6451cd5551fe2f1cac817acf62e71ab73423", "patch": "@@ -380,7 +380,6 @@ score3_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n-  free_after_compilation (cfun);\n \n   /* Clean up the vars set above.  Note that final_end_function resets\n      the global pointer for us.  */"}, {"sha": "4ba3dce43a1370f93c1ad76c1516338525d08054", "filename": "gcc/config/score/score7.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fscore%2Fscore7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fscore%2Fscore7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fscore%2Fscore7.c?ref=dc0c6451cd5551fe2f1cac817acf62e71ab73423", "patch": "@@ -379,7 +379,6 @@ score7_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n-  free_after_compilation (cfun);\n \n   /* Clean up the vars set above.  Note that final_end_function resets\n      the global pointer for us.  */"}, {"sha": "71933d64913c7665b143d86399b7458e10a9c51e", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=dc0c6451cd5551fe2f1cac817acf62e71ab73423", "patch": "@@ -11282,7 +11282,6 @@ sh_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   final_start_function (insns, file, 1);\n   final (insns, file, 1);\n   final_end_function ();\n-  free_after_compilation (cfun);\n \n   reload_completed = 0;\n   epilogue_completed = 0;"}, {"sha": "a0adfd02168e6f02b3bccfc9322446325aeed25a", "filename": "gcc/config/sparc/sparc.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fsparc%2Fsparc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fconfig%2Fsparc%2Fsparc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.c?ref=dc0c6451cd5551fe2f1cac817acf62e71ab73423", "patch": "@@ -8942,7 +8942,6 @@ sparc_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n-  free_after_compilation (cfun);\n \n   reload_completed = 0;\n   epilogue_completed = 0;"}, {"sha": "630814a3c222d7cad1b329332ed96b01e4e14a30", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=dc0c6451cd5551fe2f1cac817acf62e71ab73423", "patch": "@@ -1,3 +1,8 @@\n+2009-08-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* method.c (use_thunk): Call free_after_compilation after\n+\tassemble_end_function.\n+\n 2009-08-17  Richard Guenther  <rguenther@suse.de>\n \n \t* decl.c (build_ptrmemfunc_type): Keep variant chain intact."}, {"sha": "6950c2d8d5746b302eebf28e28a6e0fb8f0af095", "filename": "gcc/cp/method.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fcp%2Fmethod.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc0c6451cd5551fe2f1cac817acf62e71ab73423/gcc%2Fcp%2Fmethod.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmethod.c?ref=dc0c6451cd5551fe2f1cac817acf62e71ab73423", "patch": "@@ -450,6 +450,7 @@ use_thunk (tree thunk_fndecl, bool emit_p)\n \n       assemble_end_function (thunk_fndecl, fnname);\n       init_insn_lengths ();\n+      free_after_compilation (cfun);\n       current_function_decl = 0;\n       set_cfun (NULL);\n       TREE_ASM_WRITTEN (thunk_fndecl) = 1;"}]}