{"sha": "5ddec02e71243ad4f96d11c58a280b42e7bc8b2e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWRkZWMwMmU3MTI0M2FkNGY5NmQxMWM1OGEyODBiNDJlN2JjOGIyZQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2002-03-11T10:12:03Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2002-03-11T10:12:03Z"}, "message": "re PR rtl-optimization/5844 (Bad code generated for -O2 -mcpu=i586)\n\n\tPR optimization/5844\n\t* gcc.dg/20020310-1.c: New test.\n\nFrom-SVN: r50566", "tree": {"sha": "3fadc6048890035b93cccf8a4ca247110f1f2e3f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3fadc6048890035b93cccf8a4ca247110f1f2e3f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ddec02e71243ad4f96d11c58a280b42e7bc8b2e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ddec02e71243ad4f96d11c58a280b42e7bc8b2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ddec02e71243ad4f96d11c58a280b42e7bc8b2e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ddec02e71243ad4f96d11c58a280b42e7bc8b2e/comments", "author": null, "committer": null, "parents": [{"sha": "eb58b2086c89d50923bb5f921edaff964a6d0037", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb58b2086c89d50923bb5f921edaff964a6d0037", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb58b2086c89d50923bb5f921edaff964a6d0037"}], "stats": {"total": 60, "additions": 60, "deletions": 0}, "files": [{"sha": "6f6d9f2e89f4d6f10b5bbe6f9ca0c242d95a3a23", "filename": "gcc/ChangeLog", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ddec02e71243ad4f96d11c58a280b42e7bc8b2e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ddec02e71243ad4f96d11c58a280b42e7bc8b2e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5ddec02e71243ad4f96d11c58a280b42e7bc8b2e", "patch": "@@ -283,6 +283,7 @@ Thu Mar  7 16:33:54 CET 2002  Jan Hubicka  <jh@suse.cz>\n \n 2002-03-06  Richard Henderson  <rth@redhat.com>\n \n+\tPR optimization/5844\n \t* genemit.c (gen_exp): New argument used.  Invoke copy_rtx\n \tif used indicates we've already emitted one copy of an operand.\n \t(gen_insn, gen_expand, output_add_clobbers): Supply a null used."}, {"sha": "2b5418814468c0e6150a2355a543303160dc8d87", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ddec02e71243ad4f96d11c58a280b42e7bc8b2e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ddec02e71243ad4f96d11c58a280b42e7bc8b2e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5ddec02e71243ad4f96d11c58a280b42e7bc8b2e", "patch": "@@ -1,3 +1,8 @@\n+2002-03-11  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR optimization/5844\n+\t* gcc.dg/20020310-1.c: New test.\n+\n 2002-03-09  Michael Meissner  <meissner@redhat.com>\n \n \t* gcc.c-torture/execute/memcpy-2.c: New test."}, {"sha": "ec722ecc4aa5de03ffb76b7be74b20e4f4d20848", "filename": "gcc/testsuite/gcc.dg/20020310-1.c", "status": "added", "additions": 54, "deletions": 0, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ddec02e71243ad4f96d11c58a280b42e7bc8b2e/gcc%2Ftestsuite%2Fgcc.dg%2F20020310-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ddec02e71243ad4f96d11c58a280b42e7bc8b2e/gcc%2Ftestsuite%2Fgcc.dg%2F20020310-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20020310-1.c?ref=5ddec02e71243ad4f96d11c58a280b42e7bc8b2e", "patch": "@@ -0,0 +1,54 @@\n+/* PR optimization/5844\n+   This testcase was miscompiled because of an rtx sharing bug.  */\n+/* { dg-do run } */\n+/* { dg-options \"-O2\" } */\n+/* { dg-options \"-O2 -mcpu=i586\" { target i?86-*-* } } */\n+\n+struct A\n+{\n+  struct A *a;\n+  int b;\n+};\n+\n+struct B\n+{\n+  struct A *c;\n+  unsigned int d;\n+};\n+\n+struct A p = { &p, -1 };\n+struct B q = { &p, 0 };\n+\n+extern void abort (void);\n+extern void exit (int);\n+\n+struct B *\n+foo (void)\n+{\n+  return &q;\n+}\n+\n+void\n+bar (void)\n+{\n+  struct B *e = foo ();\n+  struct A *f = e->c;\n+  int g = f->b;\n+\n+  if (++g == 0)\n+    {\n+      e->d++;\n+      e->c = f->a;\n+    }\n+\n+  f->b = g;\n+}\n+\n+int\n+main ()\n+{\n+  bar ();\n+  if (p.b != 0 || q.d != 1 || q.c != &p)\n+    abort ();\n+  exit (0);\n+}"}]}