{"sha": "9bf54c938ab8ab79a92a5f354686e103d66f1a1a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWJmNTRjOTM4YWI4YWI3OWE5MmE1ZjM1NDY4NmUxMDNkNjZmMWExYQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-03-05T20:49:21Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-03-05T20:49:21Z"}, "message": "sysinfo: add Flags to Statfs_t if not already there\n    \n    If there is no f_flags field in statfs_t then rename one of the\n    f_spare fields, as happened in Linux kernel version 2.6.36.  This\n    fixes the build on CentOS 5.11.  The CentOS kernel will hopefully not\n    fill in the f_spare field, so the resulting flags will be zero.\n    \n    Reviewed-on: https://go-review.googlesource.com/c/gofrontend/+/165417\n\nFrom-SVN: r269401", "tree": {"sha": "2b08ccbd0c0053a1d141eb2a6fbaabff0883ad84", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2b08ccbd0c0053a1d141eb2a6fbaabff0883ad84"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9bf54c938ab8ab79a92a5f354686e103d66f1a1a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bf54c938ab8ab79a92a5f354686e103d66f1a1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9bf54c938ab8ab79a92a5f354686e103d66f1a1a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bf54c938ab8ab79a92a5f354686e103d66f1a1a/comments", "author": null, "committer": null, "parents": [{"sha": "77fa4c4275502fb4a030db1799d82704395a03ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77fa4c4275502fb4a030db1799d82704395a03ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77fa4c4275502fb4a030db1799d82704395a03ab"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "b80033039df30be110ec4ba0365e98fb98331746", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bf54c938ab8ab79a92a5f354686e103d66f1a1a/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bf54c938ab8ab79a92a5f354686e103d66f1a1a/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=9bf54c938ab8ab79a92a5f354686e103d66f1a1a", "patch": "@@ -1,4 +1,4 @@\n-689d5bda159300dc12f559de2d47b8c1c762fcb9\n+3ae3024cae07fe7e85968ad2583add350616b296\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "e0ae30f6ba2deac3a5dbd985d6034b270664bb04", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bf54c938ab8ab79a92a5f354686e103d66f1a1a/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bf54c938ab8ab79a92a5f354686e103d66f1a1a/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=9bf54c938ab8ab79a92a5f354686e103d66f1a1a", "patch": "@@ -1113,7 +1113,11 @@ grep '^const _FALLOC_' gen-sysinfo.go |\n \n # The statfs struct.\n # Prefer largefile variant if available.\n+# CentOS 5 does not have f_flags, so pull from f_spare.\n statfs=`grep '^type _statfs64 ' gen-sysinfo.go || true`\n+if ! echo \"$statfs\" | grep f_flags; then\n+  statfs=`echo \"$statfs\" | sed -e 's/f_spare \\[4+1\\]\\([^ ;]*\\)/f_flags \\1; f_spare [3+1]\\1/'`\n+fi\n if test \"$statfs\" != \"\"; then\n   grep '^type _statfs64 ' gen-sysinfo.go\n else"}]}