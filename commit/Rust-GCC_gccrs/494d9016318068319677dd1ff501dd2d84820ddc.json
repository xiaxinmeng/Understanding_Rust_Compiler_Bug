{"sha": "494d9016318068319677dd1ff501dd2d84820ddc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDk0ZDkwMTYzMTgwNjgzMTk2NzdkZDFmZjUwMWRkMmQ4NDgyMGRkYw==", "commit": {"author": {"name": "Andrew Pinski", "email": "apinski@apple.com", "date": "2004-07-12T22:28:54Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2004-07-12T22:28:54Z"}, "message": "re PR c++/16475 (FAIL: g++.dg/rtti/tinfo1.C scan-assembler _ZTIP9CTemplateIhE:)\n\n2004-07-12  Andrew Pinski  <apinski@apple.com>\n\n        PR c++/16475\n        Revert:\n        2004-07-07  H.J. Lu  <hongjiu.lu@intel.com>\n                PR c++/16276\n                * rtti.c (emit_tinfo_decl): Turn off DECL_ONE_ONLY if typeinfo\n                is not public.\n\nFrom-SVN: r84583", "tree": {"sha": "b0e279598e0af1aed14127b9560b06bc26650247", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b0e279598e0af1aed14127b9560b06bc26650247"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/494d9016318068319677dd1ff501dd2d84820ddc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/494d9016318068319677dd1ff501dd2d84820ddc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/494d9016318068319677dd1ff501dd2d84820ddc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/494d9016318068319677dd1ff501dd2d84820ddc/comments", "author": null, "committer": null, "parents": [{"sha": "52b754e8fcc6a7391f5202ff37f5dfa412057d77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52b754e8fcc6a7391f5202ff37f5dfa412057d77", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52b754e8fcc6a7391f5202ff37f5dfa412057d77"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "e5de5a7bf58351364cb5666641261735102fc084", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/494d9016318068319677dd1ff501dd2d84820ddc/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/494d9016318068319677dd1ff501dd2d84820ddc/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=494d9016318068319677dd1ff501dd2d84820ddc", "patch": "@@ -1,3 +1,12 @@\n+2004-07-12  Andrew Pinski  <apinski@apple.com>\n+\n+\tPR c++/16475\n+\tRevert:\n+\t2004-07-07  H.J. Lu  <hongjiu.lu@intel.com>\n+\t\tPR c++/16276\n+\t\t* rtti.c (emit_tinfo_decl): Turn off DECL_ONE_ONLY if typeinfo\n+\t\tis not public.\n+\n 2004-07-12  Eric Christopher  <echristo@redhat.com>\n \n \t* parser.c (cp_parser_class_head): Remove unused variable."}, {"sha": "794c38ba168df2b7111b960f8b09decc2e65b960", "filename": "gcc/cp/rtti.c", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/494d9016318068319677dd1ff501dd2d84820ddc/gcc%2Fcp%2Frtti.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/494d9016318068319677dd1ff501dd2d84820ddc/gcc%2Fcp%2Frtti.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Frtti.c?ref=494d9016318068319677dd1ff501dd2d84820ddc", "patch": "@@ -1460,11 +1460,7 @@ emit_tinfo_decl (tree decl)\n   DECL_EXTERNAL (decl) = 0;\n   TREE_PUBLIC (decl) = !non_public;\n   if (non_public)\n-    {\n-      DECL_COMDAT (decl) = 0;\n-      if (SUPPORTS_ONE_ONLY)\n-\tDECL_ONE_ONLY (decl) = 0;\n-    }\n+    DECL_COMDAT (decl) = 0;\n \n   DECL_INITIAL (decl) = var_init;\n   mark_used (decl);"}]}