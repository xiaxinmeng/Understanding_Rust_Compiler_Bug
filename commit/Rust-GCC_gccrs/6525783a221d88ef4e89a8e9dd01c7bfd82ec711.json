{"sha": "6525783a221d88ef4e89a8e9dd01c7bfd82ec711", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjUyNTc4M2EyMjFkODhlZjRlODlhOGU5ZGQwMWM3YmZkODJlYzcxMQ==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2014-04-08T17:23:26Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2014-04-08T17:23:26Z"}, "message": "re PR sanitizer/60745 (Many ICEs running libstdc++ testsuite with ubsan, maybe due to PCH)\n\n\tPR sanitizer/60745\n\t* c-ubsan.c: Include asan.h.\n\t(ubsan_instrument_return): Call initialize_sanitizer_builtins.\n\nFrom-SVN: r209222", "tree": {"sha": "f72b1bf22ec131aeaa36f1a0cf036521e9c3e8ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f72b1bf22ec131aeaa36f1a0cf036521e9c3e8ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6525783a221d88ef4e89a8e9dd01c7bfd82ec711", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6525783a221d88ef4e89a8e9dd01c7bfd82ec711", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6525783a221d88ef4e89a8e9dd01c7bfd82ec711", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6525783a221d88ef4e89a8e9dd01c7bfd82ec711/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e2e6026693a6c0481ea9ee2d7b2fd34430c7d436", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2e6026693a6c0481ea9ee2d7b2fd34430c7d436", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2e6026693a6c0481ea9ee2d7b2fd34430c7d436"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "152c3b7def33c690d388deaa18644f1c9f56d8e0", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6525783a221d88ef4e89a8e9dd01c7bfd82ec711/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6525783a221d88ef4e89a8e9dd01c7bfd82ec711/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=6525783a221d88ef4e89a8e9dd01c7bfd82ec711", "patch": "@@ -1,3 +1,9 @@\n+2014-04-08  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR sanitizer/60745\n+\t* c-ubsan.c: Include asan.h.\n+\t(ubsan_instrument_return): Call initialize_sanitizer_builtins.\n+\n 2014-04-03  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* c.opt (Wnon-virtual-dtor): Auto set when Weffc++."}, {"sha": "e89ebc1873befae7a71af8a01b0f0f72ddb935d0", "filename": "gcc/c-family/c-ubsan.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6525783a221d88ef4e89a8e9dd01c7bfd82ec711/gcc%2Fc-family%2Fc-ubsan.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6525783a221d88ef4e89a8e9dd01c7bfd82ec711/gcc%2Fc-family%2Fc-ubsan.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ubsan.c?ref=6525783a221d88ef4e89a8e9dd01c7bfd82ec711", "patch": "@@ -29,6 +29,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"ubsan.h\"\n #include \"c-family/c-common.h\"\n #include \"c-family/c-ubsan.h\"\n+#include \"asan.h\"\n \n /* Instrument division by zero and INT_MIN / -1.  If not instrumenting,\n    return NULL_TREE.  */\n@@ -185,6 +186,10 @@ ubsan_instrument_vla (location_t loc, tree size)\n tree\n ubsan_instrument_return (location_t loc)\n {\n+  /* It is possible that PCH zapped table with definitions of sanitizer\n+     builtins.  Reinitialize them if needed.  */\n+  initialize_sanitizer_builtins ();\n+\n   tree data = ubsan_create_data (\"__ubsan_missing_return_data\", &loc,\n \t\t\t\t NULL, NULL_TREE);\n   tree t = builtin_decl_explicit (BUILT_IN_UBSAN_HANDLE_MISSING_RETURN);"}]}