{"sha": "a9608b5743857c8e672f5e6437c25cf41a63c0cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTk2MDhiNTc0Mzg1N2M4ZTY3MmY1ZTY0MzdjMjVjZjQxYTYzYzBjYg==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-06-15T20:02:58Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-06-15T20:02:58Z"}, "message": "re PR fortran/36515 (Integer read from stdin yields a value overflow for a valid integer.)\n\n2008-06-15  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/36515\n\t* libgfortran.h (compile_options_t): Add int range_check to structure.\n\t* runtime/compile_options.c (set_options): Add range_check option.\n\t(init_compile_options): Likewise.\n\t*io/read.c (read_decimal): Change overflow checks to include\n\trange_check.\n\nFrom-SVN: r136822", "tree": {"sha": "7dab0a0f3b00357fe532baef7d039ca7f882b94c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7dab0a0f3b00357fe532baef7d039ca7f882b94c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9608b5743857c8e672f5e6437c25cf41a63c0cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9608b5743857c8e672f5e6437c25cf41a63c0cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9608b5743857c8e672f5e6437c25cf41a63c0cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9608b5743857c8e672f5e6437c25cf41a63c0cb/comments", "author": null, "committer": null, "parents": [{"sha": "a60658ba410d209fa8d1943af3f12129d4ca4f08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a60658ba410d209fa8d1943af3f12129d4ca4f08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a60658ba410d209fa8d1943af3f12129d4ca4f08"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "f5b6a2731c0f4ffe9d3d0e3661ac67694f062453", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9608b5743857c8e672f5e6437c25cf41a63c0cb/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9608b5743857c8e672f5e6437c25cf41a63c0cb/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=a9608b5743857c8e672f5e6437c25cf41a63c0cb", "patch": "@@ -1,3 +1,12 @@\n+2008-06-14  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/36515\n+\t* libgfortran.h (compile_options_t): Add int range_check to structure.\n+\t* runtime/compile_options.c (set_options): Add range_check option.\n+\t(init_compile_options): Likewise.\n+\t*io/read.c (read_decimal): Change overflow checks to include\n+\trange_check.\n+\t\n 2008-06-13  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR fortran/36538"}, {"sha": "cb88933bf97b98a6386f39774bc0f803bff373dc", "filename": "libgfortran/io/read.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9608b5743857c8e672f5e6437c25cf41a63c0cb/libgfortran%2Fio%2Fread.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9608b5743857c8e672f5e6437c25cf41a63c0cb/libgfortran%2Fio%2Fread.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Fread.c?ref=a9608b5743857c8e672f5e6437c25cf41a63c0cb", "patch": "@@ -428,13 +428,13 @@ read_decimal (st_parameter_dt *dtp, const fnode *f, char *dest, int length)\n       if (c < '0' || c > '9')\n \tgoto bad;\n \n-      if (value > maxv_10)\n+      if (value > maxv_10 && compile_options.range_check == 1)\n \tgoto overflow;\n \n       c -= '0';\n       value = 10 * value;\n \n-      if (value > maxv - c)\n+      if (value > maxv - c && compile_options.range_check == 1)\n \tgoto overflow;\n       value += c;\n     }"}, {"sha": "10439bd3e5a4098be38ec9569ce4cbca1b4c7855", "filename": "libgfortran/libgfortran.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9608b5743857c8e672f5e6437c25cf41a63c0cb/libgfortran%2Flibgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9608b5743857c8e672f5e6437c25cf41a63c0cb/libgfortran%2Flibgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Flibgfortran.h?ref=a9608b5743857c8e672f5e6437c25cf41a63c0cb", "patch": "@@ -477,6 +477,7 @@ typedef struct\n   size_t record_marker;\n   int max_subrecord_length;\n   int bounds_check;\n+  int range_check;\n }\n compile_options_t;\n "}, {"sha": "c62fe1c326af258e1223f0ad5a2481c0f467406d", "filename": "libgfortran/runtime/compile_options.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9608b5743857c8e672f5e6437c25cf41a63c0cb/libgfortran%2Fruntime%2Fcompile_options.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9608b5743857c8e672f5e6437c25cf41a63c0cb/libgfortran%2Fruntime%2Fcompile_options.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fruntime%2Fcompile_options.c?ref=a9608b5743857c8e672f5e6437c25cf41a63c0cb", "patch": "@@ -105,6 +105,8 @@ set_options (int num, int options[])\n     compile_options.sign_zero = options[5];\n   if (num >= 7)\n     compile_options.bounds_check = options[6];\n+  if (num >= 8)\n+    compile_options.range_check = options[7];\n \n   /* If backtrace is required, we set signal handlers on most common\n      signals.  */\n@@ -146,6 +148,7 @@ init_compile_options (void)\n   compile_options.dump_core = 0;\n   compile_options.backtrace = 0;\n   compile_options.sign_zero = 1;\n+  compile_options.range_check = 1;\n }\n \n /* Function called by the front-end to tell us the"}]}