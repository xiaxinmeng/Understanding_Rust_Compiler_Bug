{"sha": "b7076960b306190210070be081ea318d7eb17d21", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjcwNzY5NjBiMzA2MTkwMjEwMDcwYmUwODFlYTMxOGQ3ZWIxN2QyMQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2001-07-19T07:22:40Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2001-07-19T07:22:40Z"}, "message": "* class.c (finish_struct_anon): Forbid nested classes.\n\nFrom-SVN: r44148", "tree": {"sha": "7ce475105e33da5098966b546460735c76d8d9f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7ce475105e33da5098966b546460735c76d8d9f7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7076960b306190210070be081ea318d7eb17d21", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7076960b306190210070be081ea318d7eb17d21", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7076960b306190210070be081ea318d7eb17d21", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7076960b306190210070be081ea318d7eb17d21/comments", "author": null, "committer": null, "parents": [{"sha": "69e6b1d4b21986afb0c4051b7b2dca3ba6bc59cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69e6b1d4b21986afb0c4051b7b2dca3ba6bc59cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69e6b1d4b21986afb0c4051b7b2dca3ba6bc59cb"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "fb7d6c1ec769b17a245b0ad8e62ef38d01ce7476", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7076960b306190210070be081ea318d7eb17d21/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7076960b306190210070be081ea318d7eb17d21/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b7076960b306190210070be081ea318d7eb17d21", "patch": "@@ -1,3 +1,7 @@\n+2001-07-19  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* class.c (finish_struct_anon): Forbid nested classes.\n+\n 2001-07-19  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* decl2.c: Don't include dwarfout.h and dwarf2out.h."}, {"sha": "087b7c807ef0fab8c71bd7a435a59989fa73f473", "filename": "gcc/cp/class.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7076960b306190210070be081ea318d7eb17d21/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7076960b306190210070be081ea318d7eb17d21/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=b7076960b306190210070be081ea318d7eb17d21", "patch": "@@ -3132,7 +3132,14 @@ finish_struct_anon (t)\n \t  tree elt = TYPE_FIELDS (TREE_TYPE (field));\n \t  for (; elt; elt = TREE_CHAIN (elt))\n \t    {\n-\t      if (DECL_ARTIFICIAL (elt))\n+\t      /* We're generally only interested in entities the user\n+\t\t declared, but we also find nested classes by noticing\n+\t\t the TYPE_DECL that we create implicitly.  You're\n+\t\t allowed to put one anonymous union inside another,\n+\t\t though, so we explicitly tolerate that.  */\n+\t      if (DECL_ARTIFICIAL (elt) \n+\t\t  && (!DECL_IMPLICIT_TYPEDEF_P (elt)\n+\t\t      || ANON_AGGR_TYPE_P (TREE_TYPE (elt))))\n \t\tcontinue;\n \n \t      if (DECL_NAME (elt) == constructor_name (t))"}, {"sha": "96353fcc97b1600817aedf599ce564aa495ec616", "filename": "gcc/testsuite/g++.old-deja/g++.jason/anon3.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7076960b306190210070be081ea318d7eb17d21/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.jason%2Fanon3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7076960b306190210070be081ea318d7eb17d21/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.jason%2Fanon3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.jason%2Fanon3.C?ref=b7076960b306190210070be081ea318d7eb17d21", "patch": "@@ -8,7 +8,7 @@ public:\n private:\n   union {\n     float vf;\n-    struct ff {\n+    struct ff { // ERROR - nested class in anonymous union\n       void *ptr;\n       char *name;\n       int sz;"}]}