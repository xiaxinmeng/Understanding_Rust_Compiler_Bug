{"sha": "507ed659e0110e3cba9aa8bba875768833d7b7ea", "node_id": "C_kwDOANBUbNoAKDUwN2VkNjU5ZTAxMTBlM2NiYTlhYThiYmE4NzU3Njg4MzNkN2I3ZWE", "commit": {"author": {"name": "Justin Squirek", "email": "squirek@adacore.com", "date": "2022-04-21T20:35:20Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-05-30T08:29:03Z"}, "message": "[Ada] Incorrect unreferenced warnings on null subprograms and formals with aspects\n\nThis patch corrects an error in the compiler whereby spurious\nunreferenced warnings are generated on formal parameters of null generic\nsubprograms.\n\nThese changes also fix the parsing of aspects on formal parameters such\nthat the aspects now get properly set for all formal parameters in a\nparameter list.\n\ngcc/ada/\n\n\t* par-ch6.adb (P_Formal_Part): Set Aspect_Specifications on all\n\tformals instead of just the last in a formal id list.\n\t* sem_ch6.adb (Analyze_Null_Procedure): Mark expanded null\n\tgeneric procedures as trivial in order to avoid spurious\n\tunreferenced warnings.", "tree": {"sha": "4ab2e274030d5ee0811b2115dd4d503d70aceb58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4ab2e274030d5ee0811b2115dd4d503d70aceb58"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/507ed659e0110e3cba9aa8bba875768833d7b7ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/507ed659e0110e3cba9aa8bba875768833d7b7ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/507ed659e0110e3cba9aa8bba875768833d7b7ea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/507ed659e0110e3cba9aa8bba875768833d7b7ea/comments", "author": {"login": "AdaDoom3", "id": 3445599, "node_id": "MDQ6VXNlcjM0NDU1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/3445599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdaDoom3", "html_url": "https://github.com/AdaDoom3", "followers_url": "https://api.github.com/users/AdaDoom3/followers", "following_url": "https://api.github.com/users/AdaDoom3/following{/other_user}", "gists_url": "https://api.github.com/users/AdaDoom3/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdaDoom3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdaDoom3/subscriptions", "organizations_url": "https://api.github.com/users/AdaDoom3/orgs", "repos_url": "https://api.github.com/users/AdaDoom3/repos", "events_url": "https://api.github.com/users/AdaDoom3/events{/privacy}", "received_events_url": "https://api.github.com/users/AdaDoom3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f55e8fd165c1ed1e1c12def08ddb5f4fc55dafbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f55e8fd165c1ed1e1c12def08ddb5f4fc55dafbb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f55e8fd165c1ed1e1c12def08ddb5f4fc55dafbb"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "95fa9374c9d83c4e986a7bf042eda63ff54e7bc2", "filename": "gcc/ada/par-ch6.adb", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/507ed659e0110e3cba9aa8bba875768833d7b7ea/gcc%2Fada%2Fpar-ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/507ed659e0110e3cba9aa8bba875768833d7b7ea/gcc%2Fada%2Fpar-ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch6.adb?ref=507ed659e0110e3cba9aa8bba875768833d7b7ea", "patch": "@@ -1656,6 +1656,28 @@ package body Ch6 is\n \n             P_Aspect_Specifications (Specification_Node, False);\n \n+            --  Set the aspect specifications for previous Ids\n+\n+            if Has_Aspects (Specification_Node)\n+              and then Prev_Ids (Specification_Node)\n+            then\n+               --  Loop through each previous id\n+\n+               declare\n+                  Prev_Id : Node_Id := Prev (Specification_Node);\n+               begin\n+                  loop\n+                     Set_Aspect_Specifications\n+                       (Prev_Id, Aspect_Specifications (Specification_Node));\n+\n+                     --  Exit when we reach the first parameter in the list\n+\n+                     exit when not Prev_Ids (Prev_Id);\n+                     Prev_Id := Prev (Prev_Id);\n+                  end loop;\n+               end;\n+            end if;\n+\n             if Token = Tok_Right_Paren then\n                Scan;  -- past right paren\n                exit Specification_Loop;"}, {"sha": "8ca29746e43cd7c89d48787305553936cba86c99", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/507ed659e0110e3cba9aa8bba875768833d7b7ea/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/507ed659e0110e3cba9aa8bba875768833d7b7ea/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=507ed659e0110e3cba9aa8bba875768833d7b7ea", "patch": "@@ -2063,6 +2063,11 @@ package body Sem_Ch6 is\n          Analyze_Generic_Subprogram_Body (Null_Body, Prev);\n          Is_Completion := True;\n \n+         --  Mark the newly generated subprogram body as trivial\n+\n+         Set_Is_Trivial_Subprogram\n+           (Defining_Unit_Name (Specification (Null_Body)));\n+\n          goto Leave;\n \n       else"}]}