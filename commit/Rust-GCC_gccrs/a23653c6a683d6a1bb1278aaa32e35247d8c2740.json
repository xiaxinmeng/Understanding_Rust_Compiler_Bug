{"sha": "a23653c6a683d6a1bb1278aaa32e35247d8c2740", "node_id": "C_kwDOANBUbNoAKGEyMzY1M2M2YTY4M2Q2YTFiYjEyNzhhYWEzMmUzNTI0N2Q4YzI3NDA", "commit": {"author": {"name": "H.J. Lu", "email": "hjl.tools@gmail.com", "date": "2021-09-10T13:13:59Z"}, "committer": {"name": "H.J. Lu", "email": "hjl.tools@gmail.com", "date": "2021-10-08T13:17:01Z"}, "message": "libsanitizer: Add AM_CCASFLAGS to Makefile.am\n\ncommit 9069eb28d45baaa8baf5e3790b03b0e2cc5b49b3\nAuthor: Igor Tsimbalist <igor.v.tsimbalist@intel.com>\nDate:   Fri Nov 17 22:34:50 2017 +0100\n\n    Enable building libsanitizer with Intel CET\n\n    libsanitizer/\n            * acinclude.m4: Add enable.m4 and cet.m4.\n            * Makefile.in: Regenerate.\n            * asan/Makefile.am: Update AM_CXXFLAGS.\n            * asan/Makefile.in: Regenerate.\n            * configure: Likewise.\n            * configure.ac: Set CET_FLAGS. Update EXTRA_CFLAGS,\n            EXTRA_CXXFLAGS, EXTRA_ASFLAGS.\n            * interception/Makefile.am: Update AM_CXXFLAGS.\n            * interception/Makefile.in: Regenerate.\n            * libbacktrace/Makefile.am: Update AM_CFLAGS, AM_CXXFLAGS.\n            * libbacktrace/Makefile.in: Regenerate.\n            * lsan/Makefile.am: Update AM_CXXFLAGS.\n            * lsan/Makefile.in: Regenerate.\n            * sanitizer_common/Makefile.am: Update AM_CXXFLAGS,\n            AM_CCASFLAGS.\n            * sanitizer_common/sanitizer_linux_x86_64.S: Include cet.h.\n            Add _CET_ENDBR macro.\n            * sanitizer_common/Makefile.in: Regenerate.\n            * tsan/Makefile.am: Update AM_CXXFLAGS.\n            * tsan/Makefile.in: Regenerate.\n            * tsan/tsan_rtl_amd64.S Include cet.h. Add _CET_ENDBR macro.\n            * ubsan/Makefile.am: Update AM_CXXFLAGS.\n            * ubsan/Makefile.in: Regenerate.\n\nfailed to add EXTRA_ASFLAGS to AM_CCASFLAGS in all Makefile.am.  As\nthe result, CET aren't enabled in all assembly codes.\n\nAdd AM_CCASFLAGS to Makefile.am to compile assembly codes with $CET_FLAGS.\n\n\tPR sanitizer/102632\n\t* asan/Makefile.am (AM_CCASFLAGS): New.  Set to $(EXTRA_ASFLAGS).\n\t* hwasan/Makefile.am (AM_CCASFLAGS): Likewise.\n\t* interception/Makefile.am (AM_CCASFLAGS): Likewise.\n\t* lsan/Makefile.am (AM_CCASFLAGS): Likewise.\n\t* tsan/Makefile.am (AM_CCASFLAGS): Likewise.\n\t* ubsan/Makefile.am (AM_CCASFLAGS): Likewise.\n\t* asan/Makefile.in: Regenerate.\n\t* hwasan/Makefile.in: Likewise.\n\t* interception/Makefile.in: Likewise.\n\t* lsan/Makefile.in: Likewise.\n\t* tsan/Makefile.in: Likewise.\n\t* ubsan/Makefile.in: Likewise.", "tree": {"sha": "96520ae41aa5e7e36122d13c0f8b4669bd0f47d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/96520ae41aa5e7e36122d13c0f8b4669bd0f47d2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a23653c6a683d6a1bb1278aaa32e35247d8c2740", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a23653c6a683d6a1bb1278aaa32e35247d8c2740", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a23653c6a683d6a1bb1278aaa32e35247d8c2740", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a23653c6a683d6a1bb1278aaa32e35247d8c2740/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0ee3dc6052361290c92bba492cc0a9e556b31055", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ee3dc6052361290c92bba492cc0a9e556b31055", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ee3dc6052361290c92bba492cc0a9e556b31055"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "4f802f723d603a82eab54ceb15cd64539afdbbab", "filename": "libsanitizer/asan/Makefile.am", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fasan%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fasan%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fasan%2FMakefile.am?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -11,6 +11,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic -Wno-long\n AM_CXXFLAGS += $(LIBSTDCXX_RAW_CXX_CXXFLAGS)\n AM_CXXFLAGS += -std=gnu++14\n AM_CXXFLAGS += $(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I $(top_srcdir) -I $(top_srcdir)/config\n \n toolexeclib_LTLIBRARIES = libasan.la"}, {"sha": "528ab61312c37044e13f12658b91ac799430ca4e", "filename": "libsanitizer/asan/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fasan%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fasan%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fasan%2FMakefile.in?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -421,6 +421,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic \\\n \t-fomit-frame-pointer -funwind-tables -fvisibility=hidden \\\n \t-Wno-variadic-macros -fno-ipa-icf \\\n \t$(LIBSTDCXX_RAW_CXX_CXXFLAGS) -std=gnu++14 $(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I $(top_srcdir) -I $(top_srcdir)/config\n toolexeclib_LTLIBRARIES = libasan.la\n nodist_toolexeclib_HEADERS = libasan_preinit.o"}, {"sha": "e12c0a0ce71cae6256780c9298dc1a2dcd402b2a", "filename": "libsanitizer/hwasan/Makefile.am", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fhwasan%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fhwasan%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fhwasan%2FMakefile.am?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -8,6 +8,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic -Wno-long\n AM_CXXFLAGS += $(LIBSTDCXX_RAW_CXX_CXXFLAGS)\n AM_CXXFLAGS += -std=gnu++14\n AM_CXXFLAGS += $(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I $(top_srcdir) -I $(top_srcdir)/config\n \n toolexeclib_LTLIBRARIES = libhwasan.la"}, {"sha": "1729349e682d11c4bec2de90db8ffc204570a0b6", "filename": "libsanitizer/hwasan/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fhwasan%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fhwasan%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fhwasan%2FMakefile.in?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -409,6 +409,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic \\\n \t-funwind-tables -fvisibility=hidden -Wno-variadic-macros \\\n \t-fno-ipa-icf $(LIBSTDCXX_RAW_CXX_CXXFLAGS) -std=gnu++14 \\\n \t$(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I $(top_srcdir) -I $(top_srcdir)/config\n toolexeclib_LTLIBRARIES = libhwasan.la\n hwasan_files = \\"}, {"sha": "f7013b4ea94e53483f628781578f50b9e1cc12e2", "filename": "libsanitizer/interception/Makefile.am", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Finterception%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Finterception%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Finterception%2FMakefile.am?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -8,6 +8,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic -Wno-long\n AM_CXXFLAGS += $(LIBSTDCXX_RAW_CXX_CXXFLAGS)\n AM_CXXFLAGS += -std=gnu++14\n AM_CXXFLAGS += $(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I m4\n \n noinst_LTLIBRARIES = libinterception.la"}, {"sha": "326ee9a1818acef511a2719f68b4a2921e531ce1", "filename": "libsanitizer/interception/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Finterception%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Finterception%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Finterception%2FMakefile.in?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -339,6 +339,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic \\\n \t-fomit-frame-pointer -funwind-tables -fvisibility=hidden \\\n \t-Wno-variadic-macros $(LIBSTDCXX_RAW_CXX_CXXFLAGS) \\\n \t-std=gnu++14 $(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I m4\n noinst_LTLIBRARIES = libinterception.la\n interception_files = \\"}, {"sha": "6ff28ff5eea1c0bf601aa8a628e0a454cf3fdee9", "filename": "libsanitizer/lsan/Makefile.am", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Flsan%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Flsan%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Flsan%2FMakefile.am?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -8,6 +8,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic -Wno-long\n AM_CXXFLAGS += $(LIBSTDCXX_RAW_CXX_CXXFLAGS)\n AM_CXXFLAGS += -std=gnu++14\n AM_CXXFLAGS += $(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I m4\n \n noinst_LTLIBRARIES = libsanitizer_lsan.la"}, {"sha": "0ee0be6526ed72e1d80f21facbcd653eb5170564", "filename": "libsanitizer/lsan/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Flsan%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Flsan%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Flsan%2FMakefile.in?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -384,6 +384,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic \\\n \t-fomit-frame-pointer -funwind-tables -fvisibility=hidden \\\n \t-Wno-variadic-macros $(LIBSTDCXX_RAW_CXX_CXXFLAGS) \\\n \t-std=gnu++14 $(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I m4\n noinst_LTLIBRARIES = libsanitizer_lsan.la\n @LSAN_SUPPORTED_TRUE@toolexeclib_LTLIBRARIES = liblsan.la"}, {"sha": "de47797a6c47575505a32b7668b30c30eff7992f", "filename": "libsanitizer/tsan/Makefile.am", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Ftsan%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Ftsan%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Ftsan%2FMakefile.am?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -8,6 +8,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic -Wno-long\n AM_CXXFLAGS += $(LIBSTDCXX_RAW_CXX_CXXFLAGS)\n AM_CXXFLAGS += -std=gnu++14\n AM_CXXFLAGS += $(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I m4\n \n toolexeclib_LTLIBRARIES = libtsan.la"}, {"sha": "fa4a47764b9c160aa1fcbe8eac67dd30e652da5b", "filename": "libsanitizer/tsan/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Ftsan%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Ftsan%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Ftsan%2FMakefile.in?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -413,6 +413,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic \\\n \t-fomit-frame-pointer -funwind-tables -fvisibility=hidden \\\n \t-Wno-variadic-macros $(LIBSTDCXX_RAW_CXX_CXXFLAGS) \\\n \t-std=gnu++14 $(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I m4\n toolexeclib_LTLIBRARIES = libtsan.la\n nodist_toolexeclib_HEADERS = libtsan_preinit.o"}, {"sha": "d480f26adc0216f9cbcf43fca8f0c1f33a1c974c", "filename": "libsanitizer/ubsan/Makefile.am", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fubsan%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fubsan%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fubsan%2FMakefile.am?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -8,6 +8,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic -Wno-long\n AM_CXXFLAGS += $(LIBSTDCXX_RAW_CXX_CXXFLAGS)\n AM_CXXFLAGS += -std=gnu++14\n AM_CXXFLAGS += $(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I m4\n \n toolexeclib_LTLIBRARIES = libubsan.la"}, {"sha": "4f4e4e579a2b491ed740a121a25592480d2c9aed", "filename": "libsanitizer/ubsan/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fubsan%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23653c6a683d6a1bb1278aaa32e35247d8c2740/libsanitizer%2Fubsan%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fubsan%2FMakefile.in?ref=a23653c6a683d6a1bb1278aaa32e35247d8c2740", "patch": "@@ -378,6 +378,7 @@ AM_CXXFLAGS = -Wall -W -Wno-unused-parameter -Wwrite-strings -pedantic \\\n \t-fomit-frame-pointer -funwind-tables -fvisibility=hidden \\\n \t-Wno-variadic-macros $(LIBSTDCXX_RAW_CXX_CXXFLAGS) \\\n \t-std=gnu++14 $(EXTRA_CXXFLAGS)\n+AM_CCASFLAGS = $(EXTRA_ASFLAGS)\n ACLOCAL_AMFLAGS = -I m4\n toolexeclib_LTLIBRARIES = libubsan.la\n ubsan_plugin_files = \\"}]}