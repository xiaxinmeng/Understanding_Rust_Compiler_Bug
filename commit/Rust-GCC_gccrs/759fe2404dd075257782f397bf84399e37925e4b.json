{"sha": "759fe2404dd075257782f397bf84399e37925e4b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU5ZmUyNDA0ZGQwNzUyNTc3ODJmMzk3YmY4NDM5OWUzNzkyNWU0Yg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2010-11-13T01:21:12Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-11-13T01:21:12Z"}, "message": "re PR other/46332 (__cxa_demangle yields excess parentheses for function types)\n\nlibiberty/:\n\tPR other/46332\n\t* cp-demangle.c (d_print_function_type): Don't print parentheses\n\tif there are no modifiers to print.\n\t* testsuite/demangle-expected: Tweak one test case, add another.\nlibstdc++/:\n\t* testsuite/abi/demangle/abi_examples/14.cc (main): Change\n\texpected demangling.\n\nFrom-SVN: r166695", "tree": {"sha": "950bf5257c49674807126f428527ee5d594c2dba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/950bf5257c49674807126f428527ee5d594c2dba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/759fe2404dd075257782f397bf84399e37925e4b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/759fe2404dd075257782f397bf84399e37925e4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/759fe2404dd075257782f397bf84399e37925e4b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/759fe2404dd075257782f397bf84399e37925e4b/comments", "author": null, "committer": null, "parents": [{"sha": "3c87e428b0a0a16d8dded98e3689da882c53be35", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c87e428b0a0a16d8dded98e3689da882c53be35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c87e428b0a0a16d8dded98e3689da882c53be35"}], "stats": {"total": 30, "additions": 21, "deletions": 9}, "files": [{"sha": "8cd4a2856847e81fd968eb71cf74f091f108a921", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/759fe2404dd075257782f397bf84399e37925e4b/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/759fe2404dd075257782f397bf84399e37925e4b/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=759fe2404dd075257782f397bf84399e37925e4b", "patch": "@@ -1,3 +1,10 @@\n+2010-11-12  Ian Lance Taylor  <iant@google.com>\n+\n+\tPR other/46332\n+\t* cp-demangle.c (d_print_function_type): Don't print parentheses\n+\tif there are no modifiers to print.\n+\t* testsuite/demangle-expected: Tweak one test case, add another.\n+\n 2010-11-04  Richard Henderson  <rth@redhat.com>\n \n \t* configure.ac (AC_CHECK_HEADERS): Add process.h."}, {"sha": "8b0b825099e20f2e155c907e6519293eb3db0d21", "filename": "libiberty/cp-demangle.c", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/759fe2404dd075257782f397bf84399e37925e4b/libiberty%2Fcp-demangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/759fe2404dd075257782f397bf84399e37925e4b/libiberty%2Fcp-demangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fcp-demangle.c?ref=759fe2404dd075257782f397bf84399e37925e4b", "patch": "@@ -4546,20 +4546,17 @@ d_print_function_type (struct d_print_info *dpi,\n                        struct d_print_mod *mods)\n {\n   int need_paren;\n-  int saw_mod;\n   int need_space;\n   struct d_print_mod *p;\n   struct d_print_mod *hold_modifiers;\n \n   need_paren = 0;\n-  saw_mod = 0;\n   need_space = 0;\n   for (p = mods; p != NULL; p = p->next)\n     {\n       if (p->printed)\n \tbreak;\n \n-      saw_mod = 1;\n       switch (p->mod->type)\n \t{\n \tcase DEMANGLE_COMPONENT_POINTER:\n@@ -4588,9 +4585,6 @@ d_print_function_type (struct d_print_info *dpi,\n \tbreak;\n     }\n \n-  if (d_left (dc) != NULL && ! saw_mod)\n-    need_paren = 1;\n-\n   if (need_paren)\n     {\n       if (! need_space)"}, {"sha": "5b154455a01397ee0d9a5b8050582714db721221", "filename": "libiberty/testsuite/demangle-expected", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/759fe2404dd075257782f397bf84399e37925e4b/libiberty%2Ftestsuite%2Fdemangle-expected", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/759fe2404dd075257782f397bf84399e37925e4b/libiberty%2Ftestsuite%2Fdemangle-expected", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Ftestsuite%2Fdemangle-expected?ref=759fe2404dd075257782f397bf84399e37925e4b", "patch": "@@ -3325,8 +3325,13 @@ first<Duo>\n #\n --format=gnu-v3 --no-params\n _Z3fooIiFvdEiEvv\n-void foo<int, void ()(double), int>()\n-foo<int, void ()(double), int>\n+void foo<int, void (double), int>()\n+foo<int, void (double), int>\n+#\n+--format=gnu-v3 --no-params\n+_Z1fIFvvEEvv\n+void f<void ()>()\n+f<void ()>\n #\n --format=gnu-v3 --no-params\n _ZN1N1fE"}, {"sha": "f5a97b3be7e5fb43fdf75dd7b5a72dee53d2c301", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/759fe2404dd075257782f397bf84399e37925e4b/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/759fe2404dd075257782f397bf84399e37925e4b/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=759fe2404dd075257782f397bf84399e37925e4b", "patch": "@@ -1,3 +1,9 @@\n+2010-11-12  Ian Lance Taylor  <iant@google.com>\n+\n+\tPR other/46332\n+\t* testsuite/abi/demangle/abi_examples/14.cc (main): Change\n+\texpected demangling.\n+\n 2010-11-11  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* include/bits/move.h (forward): Implement N3143, resolving US 90."}, {"sha": "98b99878683a6bb76839adb7eb297ff050b9afff", "filename": "libstdc++-v3/testsuite/abi/demangle/abi_examples/14.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/759fe2404dd075257782f397bf84399e37925e4b/libstdc%2B%2B-v3%2Ftestsuite%2Fabi%2Fdemangle%2Fabi_examples%2F14.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/759fe2404dd075257782f397bf84399e37925e4b/libstdc%2B%2B-v3%2Ftestsuite%2Fabi%2Fdemangle%2Fabi_examples%2F14.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fabi%2Fdemangle%2Fabi_examples%2F14.cc?ref=759fe2404dd075257782f397bf84399e37925e4b", "patch": "@@ -33,7 +33,7 @@ int main()\n     template void foo<int, fun, int>();\n   */\n   //demangle(\"_Z3fooIiPFidEiEvv\", \"void foo<int, int (*)(double), int>(void)\");\n-  verify_demangle(\"_Z3fooIiFvdEiEvv\", \"void foo<int, void ()(double), int>()\");\n+  verify_demangle(\"_Z3fooIiFvdEiEvv\", \"void foo<int, void (double), int>()\");\n \n   return 0;\n }"}]}