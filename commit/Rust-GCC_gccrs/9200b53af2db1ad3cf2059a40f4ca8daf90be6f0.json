{"sha": "9200b53af2db1ad3cf2059a40f4ca8daf90be6f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTIwMGI1M2FmMmRiMWFkM2NmMjA1OWE0MGY0Y2E4ZGFmOTBiZTZmMA==", "commit": {"author": {"name": "Julian Brown", "email": "julian@codesourcery.com", "date": "2019-11-20T17:58:30Z"}, "committer": {"name": "Julian Brown", "email": "jules@gcc.gnu.org", "date": "2019-11-20T17:58:30Z"}, "message": "AMD GCN symbol output with null cfun\n\n\tgcc/\n\t* config/gcn/gcn.c (gcn_asm_output_symbol_ref): Handle null cfun.\n\nReviewed-by: Andrew Stubbs <ams@codesourcery.com>\n\nFrom-SVN: r278518", "tree": {"sha": "a3e2ae99cdddcd85fec13d53f68705cc38ad2de1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3e2ae99cdddcd85fec13d53f68705cc38ad2de1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9200b53af2db1ad3cf2059a40f4ca8daf90be6f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9200b53af2db1ad3cf2059a40f4ca8daf90be6f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9200b53af2db1ad3cf2059a40f4ca8daf90be6f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9200b53af2db1ad3cf2059a40f4ca8daf90be6f0/comments", "author": {"login": "jtb20", "id": 6094880, "node_id": "MDQ6VXNlcjYwOTQ4ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/6094880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtb20", "html_url": "https://github.com/jtb20", "followers_url": "https://api.github.com/users/jtb20/followers", "following_url": "https://api.github.com/users/jtb20/following{/other_user}", "gists_url": "https://api.github.com/users/jtb20/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtb20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtb20/subscriptions", "organizations_url": "https://api.github.com/users/jtb20/orgs", "repos_url": "https://api.github.com/users/jtb20/repos", "events_url": "https://api.github.com/users/jtb20/events{/privacy}", "received_events_url": "https://api.github.com/users/jtb20/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d88b27daa164c87af447cc2243bf18d9a3543ff3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d88b27daa164c87af447cc2243bf18d9a3543ff3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d88b27daa164c87af447cc2243bf18d9a3543ff3"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "1d9001510ce90476f3c7667ba1f11ba2fabdfbbe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9200b53af2db1ad3cf2059a40f4ca8daf90be6f0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9200b53af2db1ad3cf2059a40f4ca8daf90be6f0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9200b53af2db1ad3cf2059a40f4ca8daf90be6f0", "patch": "@@ -1,3 +1,7 @@\n+2019-11-20  Julian Brown  <julian@codesourcery.com>\n+\n+\t* config/gcn/gcn.c (gcn_asm_output_symbol_ref): Handle null cfun.\n+\n 2019-11-20  Jan Hubicka  <jh@suse.cz>\n \n \t* ipa-fnsummary.c (ipa_fn_summary::account_size_time): Add CALL"}, {"sha": "26c1067e52ab78dd7b128f008b716af75be75df2", "filename": "gcc/config/gcn/gcn.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9200b53af2db1ad3cf2059a40f4ca8daf90be6f0/gcc%2Fconfig%2Fgcn%2Fgcn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9200b53af2db1ad3cf2059a40f4ca8daf90be6f0/gcc%2Fconfig%2Fgcn%2Fgcn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fgcn%2Fgcn.c?ref=9200b53af2db1ad3cf2059a40f4ca8daf90be6f0", "patch": "@@ -5215,7 +5215,8 @@ void\n gcn_asm_output_symbol_ref (FILE *file, rtx x)\n {\n   tree decl;\n-  if ((decl = SYMBOL_REF_DECL (x)) != 0\n+  if (cfun\n+      && (decl = SYMBOL_REF_DECL (x)) != 0\n       && TREE_CODE (decl) == VAR_DECL\n       && AS_LDS_P (TYPE_ADDR_SPACE (TREE_TYPE (decl))))\n     {\n@@ -5230,7 +5231,8 @@ gcn_asm_output_symbol_ref (FILE *file, rtx x)\n     {\n       assemble_name (file, XSTR (x, 0));\n       /* FIXME: See above -- this condition is unreachable.  */\n-      if ((decl = SYMBOL_REF_DECL (x)) != 0\n+      if (cfun\n+\t  && (decl = SYMBOL_REF_DECL (x)) != 0\n \t  && TREE_CODE (decl) == VAR_DECL\n \t  && AS_LDS_P (TYPE_ADDR_SPACE (TREE_TYPE (decl))))\n \tfputs (\"@abs32\", file);"}]}