{"sha": "85be8c2de8b3e36434fe0504beb95502350180ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODViZThjMmRlOGIzZTM2NDM0ZmUwNTA0YmViOTU1MDIzNTAxODBjZQ==", "commit": {"author": {"name": "Andris Pavenis", "email": "pavenis@lanet.lv", "date": "2002-05-13T20:28:28Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2002-05-13T20:28:28Z"}, "message": "cppfiles.c (open_file): Change mode (DJGPP only) of redirected input to O_BINARY.\n\n\t* cppfiles.c (open_file): Change mode (DJGPP only) of redirected\n\tinput to O_BINARY.\n\nFrom-SVN: r53431", "tree": {"sha": "19addda9e4e7b9df7d6c2cb32a1fad30fd5e0918", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19addda9e4e7b9df7d6c2cb32a1fad30fd5e0918"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/85be8c2de8b3e36434fe0504beb95502350180ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85be8c2de8b3e36434fe0504beb95502350180ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85be8c2de8b3e36434fe0504beb95502350180ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85be8c2de8b3e36434fe0504beb95502350180ce/comments", "author": null, "committer": null, "parents": [{"sha": "859f7aaf4122e4a2560153d0458371e556da2dc7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/859f7aaf4122e4a2560153d0458371e556da2dc7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/859f7aaf4122e4a2560153d0458371e556da2dc7"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "17494dcf9b37392fbce00c5dbca70d225a94f8c4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85be8c2de8b3e36434fe0504beb95502350180ce/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85be8c2de8b3e36434fe0504beb95502350180ce/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=85be8c2de8b3e36434fe0504beb95502350180ce", "patch": "@@ -1,3 +1,8 @@\n+2002-05-13  Andris Pavenis  <pavenis@lanet.lv>\n+\n+\t* cppfiles.c (open_file): Change mode (DJGPP only) of redirected\n+\tinput to O_BINARY.\n+\n 2002-05-13  Jeffrey A Law  (law@redhat.com)\n \n \t* i386.c (ia32_multipass_dfa_lookahead): Prototype."}, {"sha": "49c740dea4a2350f3cc9d554b4f0c6b64d7b268d", "filename": "gcc/cppfiles.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85be8c2de8b3e36434fe0504beb95502350180ce/gcc%2Fcppfiles.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85be8c2de8b3e36434fe0504beb95502350180ce/gcc%2Fcppfiles.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppfiles.c?ref=85be8c2de8b3e36434fe0504beb95502350180ce", "patch": "@@ -270,7 +270,15 @@ open_file (pfile, filename)\n      Special case: the empty string is translated to stdin.  */\n \n   if (filename[0] == '\\0')\n-    file->fd = 0;\n+    {\n+      file->fd = 0;\n+#ifdef __DJGPP__\n+      /* For DJGPP redirected input is opened in text mode. Change it\n+         to binary mode.  */\n+      if (! isatty (file->fd))\n+        setmode (file->fd, O_BINARY);\n+#endif\n+    }\n   else\n     file->fd = open (file->name, O_RDONLY | O_NOCTTY | O_BINARY, 0666);\n "}]}