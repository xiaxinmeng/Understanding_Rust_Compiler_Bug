{"sha": "17a7afe04b966028996bcb5a9d1bce29c2093b95", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTdhN2FmZTA0Yjk2NjAyODk5NmJjYjVhOWQxYmNlMjljMjA5M2I5NQ==", "commit": {"author": {"name": "Jason Thorpe", "email": "thorpej@wasabisystems.com", "date": "2002-10-29T01:10:52Z"}, "committer": {"name": "Jason Thorpe", "email": "thorpej@gcc.gnu.org", "date": "2002-10-29T01:10:52Z"}, "message": "pthread5.cc: Include <unistd.h> if _GLIBCPP_HAVE_UNISTD_H is defined.\n\n* testsuite/thread/pthread5.cc: Include <unistd.h>\nif _GLIBCPP_HAVE_UNISTD_H is defined.\n(main): Only use pthread_attr_setscope if\n_POSIX_THREAD_PRIORITY_SCHEDULING is defined.\n\nFrom-SVN: r58608", "tree": {"sha": "5d947d7f6decd27e46f109202a683b65335022f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5d947d7f6decd27e46f109202a683b65335022f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/17a7afe04b966028996bcb5a9d1bce29c2093b95", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17a7afe04b966028996bcb5a9d1bce29c2093b95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17a7afe04b966028996bcb5a9d1bce29c2093b95", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17a7afe04b966028996bcb5a9d1bce29c2093b95/comments", "author": null, "committer": null, "parents": [{"sha": "761642ea46a9a232176be518d2b0fcdd3312487a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/761642ea46a9a232176be518d2b0fcdd3312487a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/761642ea46a9a232176be518d2b0fcdd3312487a"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "55b79be1a9aa4ee46d123dbef0460f3ee2f681ef", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17a7afe04b966028996bcb5a9d1bce29c2093b95/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17a7afe04b966028996bcb5a9d1bce29c2093b95/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=17a7afe04b966028996bcb5a9d1bce29c2093b95", "patch": "@@ -1,3 +1,10 @@\n+2002-10-28  Jason Thorpe  <thorpej@wasabisystems.com>\n+\n+\t* testsuite/thread/pthread5.cc: Include <unistd.h>\n+\tif _GLIBCPP_HAVE_UNISTD_H is defined.\n+\t(main): Only use pthread_attr_setscope if\n+\t_POSIX_THREAD_PRIORITY_SCHEDULING is defined.\n+\n 2002-10-28  Jason Thorpe  <thorpej@wasabisystems.com>\n \n \t* testsuite/thread/pthread1.cc: Enable on *-*-netbsd*."}, {"sha": "a3987c8876e30d31beac772bcdaeff45008f64b6", "filename": "libstdc++-v3/testsuite/thread/pthread5.cc", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17a7afe04b966028996bcb5a9d1bce29c2093b95/libstdc%2B%2B-v3%2Ftestsuite%2Fthread%2Fpthread5.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17a7afe04b966028996bcb5a9d1bce29c2093b95/libstdc%2B%2B-v3%2Ftestsuite%2Fthread%2Fpthread5.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fthread%2Fpthread5.cc?ref=17a7afe04b966028996bcb5a9d1bce29c2093b95", "patch": "@@ -32,6 +32,10 @@\n // configured for the port, then it is picked up free from STL headers.\n \n #if __GTHREADS\n+#ifdef _GLIBCPP_HAVE_UNISTD_H\n+#include <unistd.h>\t// To test for _POSIX_THREAD_PRIORITY_SCHEDULING\n+#endif\n+\n using namespace std;\n \n #define NTHREADS 8\n@@ -97,7 +101,9 @@ main (int argc, char *argv[])\n \n   pthread_attr_t tattr;\n   int ret = pthread_attr_init (&tattr);\n+#ifdef _POSIX_THREAD_PRIORITY_SCHEDULING\n   ret = pthread_attr_setscope(&tattr, PTHREAD_SCOPE_SYSTEM);\n+#endif\n \n   for (worker = 0; worker < NTHREADS; worker++)\n     {"}]}