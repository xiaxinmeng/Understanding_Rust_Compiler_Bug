{"sha": "50134189a434e638861f8bf27d5caab9622811c8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTAxMzQxODlhNDM0ZTYzODg2MWY4YmYyN2Q1Y2FhYjk2MjI4MTFjOA==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2020-11-19T08:23:46Z"}, "committer": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2020-11-19T08:25:04Z"}, "message": "i386: Disable *<absneg:code><mode>2_i387_1 for TARGET_SSE_MATH modes\n\nThis pattern interferes with *<absneg:code><mode>2_1 when TARGET_SSE_MATH\nmodes are active. Combine pass is able to remove (use) RTXes and transforms\n*<absneg:code><mode>2_1 to *<absneg:code><mode>2_i387_1 where SSE\nalternatives are not available.\n\n2020-11-19  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n\ngcc/\n\t* config/i386/i386.md (*<absneg:code><mode>2_i387_1):\n\tDisable for TARGET_SSE_MATH modes.\n\ngcc/testsuite/\n\t* gcc.target/i386/pr97887.c: New test.", "tree": {"sha": "2c5f1d2c50f589e90ab450535e3c9e0b034f34e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2c5f1d2c50f589e90ab450535e3c9e0b034f34e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50134189a434e638861f8bf27d5caab9622811c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50134189a434e638861f8bf27d5caab9622811c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50134189a434e638861f8bf27d5caab9622811c8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50134189a434e638861f8bf27d5caab9622811c8/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "700337494e1b0d5ff608e1a3c77852381e264653", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/700337494e1b0d5ff608e1a3c77852381e264653", "html_url": "https://github.com/Rust-GCC/gccrs/commit/700337494e1b0d5ff608e1a3c77852381e264653"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "299350147729fb9beaf6aa72a8b16b5153bc3efd", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50134189a434e638861f8bf27d5caab9622811c8/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50134189a434e638861f8bf27d5caab9622811c8/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=50134189a434e638861f8bf27d5caab9622811c8", "patch": "@@ -10258,7 +10258,7 @@\n \t(absneg:X87MODEF\n \t  (match_operand:X87MODEF 1 \"register_operand\" \"0,0\")))\n    (clobber (reg:CC FLAGS_REG))]\n-  \"TARGET_80387\"\n+  \"TARGET_80387 && !(SSE_FLOAT_MODE_P (<MODE>mode) && TARGET_SSE_MATH)\"\n   \"#\")\n \n (define_split"}, {"sha": "b457f054bed01ad3aea52aa3c547d16cd127063a", "filename": "gcc/testsuite/gcc.target/i386/pr97887.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50134189a434e638861f8bf27d5caab9622811c8/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr97887.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50134189a434e638861f8bf27d5caab9622811c8/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr97887.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr97887.c?ref=50134189a434e638861f8bf27d5caab9622811c8", "patch": "@@ -0,0 +1,15 @@\n+/* PR target/97887 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -msse2 -mfpmath=sse\" } */\n+\n+float f (float a)\n+{\n+  return -a / a;\n+}\n+\n+double d (double a)\n+{\n+  return -a / a;\n+}\n+\n+/* { dg-final { scan-assembler-not \"fchs\" } } */"}]}