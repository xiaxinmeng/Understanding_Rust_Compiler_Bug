{"sha": "a24243a0e5e09bd562eeb362c1c89ee497ea67e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTI0MjQzYTBlNWUwOWJkNTYyZWViMzYyYzFjODllZTQ5N2VhNjdlNw==", "commit": {"author": {"name": "Andreas Krebbel", "email": "Andreas.Krebbel@de.ibm.com", "date": "2013-04-15T13:09:50Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2013-04-15T13:09:50Z"}, "message": "emit-rtl.c (reset_all_used_flags): New function.\n\n2013-04-15  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\t* emit-rtl.c (reset_all_used_flags): New function.\n\t(verify_rtl_sharing): Call reset_all_used_flags before and after\n\tperforming the checks.\n\nFrom-SVN: r197971", "tree": {"sha": "94663caf9a5a76bdc704a4e05844aa334b6bcd90", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/94663caf9a5a76bdc704a4e05844aa334b6bcd90"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a24243a0e5e09bd562eeb362c1c89ee497ea67e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a24243a0e5e09bd562eeb362c1c89ee497ea67e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a24243a0e5e09bd562eeb362c1c89ee497ea67e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a24243a0e5e09bd562eeb362c1c89ee497ea67e7/comments", "author": null, "committer": null, "parents": [{"sha": "3c63e93e6d785c29cc80d1a3037865f678fd9c23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c63e93e6d785c29cc80d1a3037865f678fd9c23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c63e93e6d785c29cc80d1a3037865f678fd9c23"}], "stats": {"total": 30, "additions": 24, "deletions": 6}, "files": [{"sha": "fd1731e7e8d202e3444d6ef74211d2ba0c5e2620", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a24243a0e5e09bd562eeb362c1c89ee497ea67e7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a24243a0e5e09bd562eeb362c1c89ee497ea67e7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a24243a0e5e09bd562eeb362c1c89ee497ea67e7", "patch": "@@ -1,3 +1,9 @@\n+2013-04-15  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\t* emit-rtl.c (reset_all_used_flags): New function.\n+\t(verify_rtl_sharing): Call reset_all_used_flags before and after\n+\tperforming the checks.\n+\n 2013-04-15  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/arm/arm.c (const_ok_for_dimode_op): Handle AND case."}, {"sha": "5a24a7913c45c7c4cdfaf66a782020b04f27b7ab", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 18, "deletions": 6, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a24243a0e5e09bd562eeb362c1c89ee497ea67e7/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a24243a0e5e09bd562eeb362c1c89ee497ea67e7/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=a24243a0e5e09bd562eeb362c1c89ee497ea67e7", "patch": "@@ -2596,16 +2596,13 @@ verify_rtx_sharing (rtx orig, rtx insn)\n   return;\n }\n \n-/* Go through all the RTL insn bodies and check that there is no unexpected\n-   sharing in between the subexpressions.  */\n+/* Go through all the RTL insn bodies and clear all the USED bits.  */\n \n-DEBUG_FUNCTION void\n-verify_rtl_sharing (void)\n+static void\n+reset_all_used_flags (void)\n {\n   rtx p;\n \n-  timevar_push (TV_VERIFY_RTL_SHARING);\n-\n   for (p = get_insns (); p; p = NEXT_INSN (p))\n     if (INSN_P (p))\n       {\n@@ -2629,6 +2626,19 @@ verify_rtl_sharing (void)\n \t      }\n \t  }\n       }\n+}\n+\n+/* Go through all the RTL insn bodies and check that there is no unexpected\n+   sharing in between the subexpressions.  */\n+\n+DEBUG_FUNCTION void\n+verify_rtl_sharing (void)\n+{\n+  rtx p;\n+\n+  timevar_push (TV_VERIFY_RTL_SHARING);\n+\n+  reset_all_used_flags ();\n \n   for (p = get_insns (); p; p = NEXT_INSN (p))\n     if (INSN_P (p))\n@@ -2639,6 +2649,8 @@ verify_rtl_sharing (void)\n \t  verify_rtx_sharing (CALL_INSN_FUNCTION_USAGE (p), p);\n       }\n \n+  reset_all_used_flags ();\n+\n   timevar_pop (TV_VERIFY_RTL_SHARING);\n }\n "}]}