{"sha": "849421a3e44820ac554b6b1b625709fc0239f357", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODQ5NDIxYTNlNDQ4MjBhYzU1NGI2YjFiNjI1NzA5ZmMwMjM5ZjM1Nw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-01-24T21:36:09Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-01-24T21:36:09Z"}, "message": "re PR c/38957 (return of local variable pointer)\n\n\tPR c/38957\n\t* c-typeck.c (c_finish_return): Handle POINTER_PLUS_EXPR the same way\n\tas PLUS_EXPR.\n\n\t* gcc.dg/pr38957.c: New test.\n\nFrom-SVN: r143654", "tree": {"sha": "8aa0cd10ba1655e3f28c1d19cd88b6abf511e564", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8aa0cd10ba1655e3f28c1d19cd88b6abf511e564"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/849421a3e44820ac554b6b1b625709fc0239f357", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/849421a3e44820ac554b6b1b625709fc0239f357", "html_url": "https://github.com/Rust-GCC/gccrs/commit/849421a3e44820ac554b6b1b625709fc0239f357", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/849421a3e44820ac554b6b1b625709fc0239f357/comments", "author": null, "committer": null, "parents": [{"sha": "82f7042142a89ec50f2b3a608a675defb9ac4675", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82f7042142a89ec50f2b3a608a675defb9ac4675", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82f7042142a89ec50f2b3a608a675defb9ac4675"}], "stats": {"total": 35, "additions": 32, "deletions": 3}, "files": [{"sha": "ecf9e4670418cff1bd69b136dccc0dff9203e65d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/849421a3e44820ac554b6b1b625709fc0239f357/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/849421a3e44820ac554b6b1b625709fc0239f357/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=849421a3e44820ac554b6b1b625709fc0239f357", "patch": "@@ -1,3 +1,9 @@\n+2009-01-24  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/38957\n+\t* c-typeck.c (c_finish_return): Handle POINTER_PLUS_EXPR the same way\n+\tas PLUS_EXPR.\n+\n 2009-01-24  Julian Brown  <julian@codesourcery.com>\n \n \t* config/arm/t-linux-eabi (LIB2FUNCS_STATIC_EXTRA): Add"}, {"sha": "4b9b2b30d00c88396a359173c63e9d035cea0616", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/849421a3e44820ac554b6b1b625709fc0239f357/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/849421a3e44820ac554b6b1b625709fc0239f357/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=849421a3e44820ac554b6b1b625709fc0239f357", "patch": "@@ -7226,8 +7226,10 @@ c_finish_return (tree retval)\n \t{\n \t  switch (TREE_CODE (inner))\n \t    {\n-\t    CASE_CONVERT:   case NON_LVALUE_EXPR:\n+\t    CASE_CONVERT:\n+\t    case NON_LVALUE_EXPR:\n \t    case PLUS_EXPR:\n+\t    case POINTER_PLUS_EXPR:\n \t      inner = TREE_OPERAND (inner, 0);\n \t      continue;\n "}, {"sha": "5425b0250da703076b7b8e86b3769af13d70dc39", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/849421a3e44820ac554b6b1b625709fc0239f357/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/849421a3e44820ac554b6b1b625709fc0239f357/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=849421a3e44820ac554b6b1b625709fc0239f357", "patch": "@@ -1,8 +1,13 @@\n-2009-01-24 David Billinghurst (billingd@gcc.gnu.org)\n+2009-01-24  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/38957\n+\t* gcc.dg/pr38957.c: New test.\n+\n+2009-01-24  David Billinghurst  <billingd@gcc.gnu.org>\n \n \tPR fortran/38955\n \t* gfortran.dg/array_constructor_24.f: Allow tolerance when\n-\tcomparing floats\n+\tcomparing floats.\n \n 2009-01-24  Sebastian Pop  <sebastian.pop@amd.com>\n "}, {"sha": "f94cd7627b4a6540531171f9afb2daa1c3a9b46c", "filename": "gcc/testsuite/gcc.dg/pr38957.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/849421a3e44820ac554b6b1b625709fc0239f357/gcc%2Ftestsuite%2Fgcc.dg%2Fpr38957.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/849421a3e44820ac554b6b1b625709fc0239f357/gcc%2Ftestsuite%2Fgcc.dg%2Fpr38957.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr38957.c?ref=849421a3e44820ac554b6b1b625709fc0239f357", "patch": "@@ -0,0 +1,16 @@\n+/* PR c/38957 */\n+/* { dg-do compile } */\n+\n+char *\n+foo (void)\n+{\n+  char a[2];\n+  return a+1;\t/* { dg-warning \"returns address of local variable\" } */\n+}\n+\n+char *\n+bar (void)\n+{\n+  char a[2];\n+  return a;\t/* { dg-warning \"returns address of local variable\" } */\n+}"}]}