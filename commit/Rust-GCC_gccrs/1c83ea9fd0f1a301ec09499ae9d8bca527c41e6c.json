{"sha": "1c83ea9fd0f1a301ec09499ae9d8bca527c41e6c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWM4M2VhOWZkMGYxYTMwMWVjMDk0OTlhZTlkOGJjYTUyN2M0MWU2Yw==", "commit": {"author": {"name": "Glen Nakamura", "email": "glen@imodulo.com", "date": "2002-11-21T21:42:40Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2002-11-21T21:42:40Z"}, "message": "re PR c++/8342 (g++.jason/pmf7.C fails on i586-pc-linux-gnu)\n\n\tPR c++/8342\n\t* typeck.c (get_member_function_from_ptrfunc): Make sure that a\n\tSAVE_EXPR for instance_ptr doesn't get evaluated first inside one\n\tof the branches of a COND_EXPR.\n\nFrom-SVN: r59360", "tree": {"sha": "0e4821b66a41d5a3caf80bb79e99dcdf59d4d8b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0e4821b66a41d5a3caf80bb79e99dcdf59d4d8b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1c83ea9fd0f1a301ec09499ae9d8bca527c41e6c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c83ea9fd0f1a301ec09499ae9d8bca527c41e6c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c83ea9fd0f1a301ec09499ae9d8bca527c41e6c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c83ea9fd0f1a301ec09499ae9d8bca527c41e6c/comments", "author": null, "committer": null, "parents": [{"sha": "ff3afb56237e605084287f26b435bd5cc846c7e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff3afb56237e605084287f26b435bd5cc846c7e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff3afb56237e605084287f26b435bd5cc846c7e0"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "ca4839cb84ac46c465babb0b9249c5f5d0737a6d", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c83ea9fd0f1a301ec09499ae9d8bca527c41e6c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c83ea9fd0f1a301ec09499ae9d8bca527c41e6c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1c83ea9fd0f1a301ec09499ae9d8bca527c41e6c", "patch": "@@ -1,3 +1,10 @@\n+2002-11-21  Glen Nakamura  <glen@imodulo.com>\n+\n+\tPR c++/8342\n+\t* typeck.c (get_member_function_from_ptrfunc): Make sure that a\n+\tSAVE_EXPR for instance_ptr doesn't get evaluated first inside one\n+\tof the branches of a COND_EXPR.\n+\n 2002-11-19  Mark Mitchell  <mark@codesourcery.com>\n \n \t* pt.c (for_each_template_parm): Free allocated memory."}, {"sha": "c0e3fa6647261d7682bb20d5aaaefe01bef3cf65", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c83ea9fd0f1a301ec09499ae9d8bca527c41e6c/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c83ea9fd0f1a301ec09499ae9d8bca527c41e6c/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=1c83ea9fd0f1a301ec09499ae9d8bca527c41e6c", "patch": "@@ -2541,6 +2541,7 @@ get_member_function_from_ptrfunc (instance_ptrptr, function)\n       tree fntype = TYPE_PTRMEMFUNC_FN_TYPE (TREE_TYPE (function));\n \n       tree instance_ptr = *instance_ptrptr;\n+      tree instance_save_expr = 0;\n       if (instance_ptr == error_mark_node)\n \t{\n \t  if (TREE_CODE (function) == PTRMEM_CST)\n@@ -2560,7 +2561,7 @@ get_member_function_from_ptrfunc (instance_ptrptr, function)\n \t}\n \n       if (TREE_SIDE_EFFECTS (instance_ptr))\n-\tinstance_ptr = save_expr (instance_ptr);\n+\tinstance_ptr = instance_save_expr = save_expr (instance_ptr);\n \n       if (TREE_SIDE_EFFECTS (function))\n \tfunction = save_expr (function);\n@@ -2621,9 +2622,9 @@ get_member_function_from_ptrfunc (instance_ptrptr, function)\n       \n       /* Make sure this doesn't get evaluated first inside one of the\n \t branches of the COND_EXPR.  */\n-      if (TREE_CODE (instance_ptr) == SAVE_EXPR)\n+      if (instance_save_expr)\n \te1 = build (COMPOUND_EXPR, TREE_TYPE (e1),\n-\t\t    instance_ptr, e1);\n+\t\t    instance_save_expr, e1);\n \n       function = e1;\n     }"}]}