{"sha": "8c1aaf261ba3d7306ae295fe06d5b25470e89f2e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGMxYWFmMjYxYmEzZDczMDZhZTI5NWZlMDZkNWIyNTQ3MGU4OWYyZQ==", "commit": {"author": {"name": "J\"orn Rennecke", "email": "joern.rennecke@st.com", "date": "2006-03-10T16:07:29Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2006-03-10T16:07:29Z"}, "message": "config.gcc (sh*-superh-elf, [...]): Use newlib.h when building with libgloss.\n\n\t* config.gcc (sh*-superh-elf, sh*elf (newlib)): Use newlib.h\n\twhen building with libgloss.\n\t(sh*elf): Implement --without-fp option.\n\t(sh64-superh-linux*): Don't multilib.\n\nFrom-SVN: r111933", "tree": {"sha": "da1af479bab73b775b87e67236bf605bafd47ccc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da1af479bab73b775b87e67236bf605bafd47ccc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c1aaf261ba3d7306ae295fe06d5b25470e89f2e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c1aaf261ba3d7306ae295fe06d5b25470e89f2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c1aaf261ba3d7306ae295fe06d5b25470e89f2e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c1aaf261ba3d7306ae295fe06d5b25470e89f2e/comments", "author": null, "committer": null, "parents": [{"sha": "9a7ab578fb581fd0885c7841706876315b1bbc4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a7ab578fb581fd0885c7841706876315b1bbc4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a7ab578fb581fd0885c7841706876315b1bbc4b"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "d1f4a0ce6f145077a9e84c6d4f225337c8eca846", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c1aaf261ba3d7306ae295fe06d5b25470e89f2e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c1aaf261ba3d7306ae295fe06d5b25470e89f2e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8c1aaf261ba3d7306ae295fe06d5b25470e89f2e", "patch": "@@ -1,3 +1,10 @@\n+2006-03-10  J\"orn Rennecke <joern.rennecke@st.com>\n+\n+\t* config.gcc (sh*-superh-elf, sh*elf (newlib)): Use newlib.h\n+\twhen building with libgloss.\n+\t(sh*elf): Implement --without-fp option.\n+\t(sh64-superh-linux*): Don't multilib. \n+\n 2006-03-10  J\"orn Rennecke <joern.rennecke@st.com>\n \n \t* struct-equiv.c (rtx_equiv_p): Fix POST_MODIFY case."}, {"sha": "2255830ab4d5876cba5faca341133108e0e8155f", "filename": "gcc/config.gcc", "status": "modified", "additions": 28, "deletions": 1, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c1aaf261ba3d7306ae295fe06d5b25470e89f2e/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c1aaf261ba3d7306ae295fe06d5b25470e89f2e/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=8c1aaf261ba3d7306ae295fe06d5b25470e89f2e", "patch": "@@ -1940,7 +1940,16 @@ sh-*-symbianelf* | sh[12346l]*-*-symbianelf* | \\\n \tsh*-*-kaos*)\ttm_file=\"${tm_file} sh/embed-elf.h kaos.h sh/kaos-sh.h\"\n \t\t\t;;\n \tsh*-*-netbsd*)\ttm_file=\"${tm_file} netbsd.h netbsd-elf.h sh/netbsd-elf.h\" ;;\n-\t*)\t\ttm_file=\"${tm_file} sh/embed-elf.h\" ;;\n+\tsh*-superh-elf)\tif test x$with_libgloss != xno; then\n+\t\t\t\twith_libgloss=yes\n+\t\t\t\ttm_file=\"${tm_file} sh/newlib.h\"\n+\t\t\tfi\n+\t\t\ttm_file=\"${tm_file} sh/embed-elf.h\" ;;\n+\t*)\t\tif test x$with_newlib = xyes \\\n+\t\t\t   && test x$with_libgloss = xyes; then\n+\t\t\t\ttm_file=\"${tm_file} sh/newlib.h\"\n+\t\t\tfi\n+\t\t\ttm_file=\"${tm_file} sh/embed-elf.h\" ;;\n \tesac\n \tcase ${target} in\n \tsh5*-*-netbsd*)\n@@ -1994,6 +2003,20 @@ sh-*-symbianelf* | sh[12346l]*-*-symbianelf* | \\\n \tsh2*)\t\t\tsh_cpu_target=sh2 ;;\n \t*)\t\t\tsh_cpu_target=sh1 ;;\n \tesac\n+\t# did the user say --without-fp ?\n+\tif test x$with_fp = xno; then\n+\t\tcase ${sh_cpu_target} in\n+\t\tsh5-*media)\tsh_cpu_target=${sh_cpu_target}-nofpu ;;\n+\t\tsh4al | sh1)\t;;\n+\t\tsh4a* )\t\tsh_cpu_target=sh4a-nofpu ;;\n+\t\tsh4*)\t\tsh_cpu_target=sh4-nofpu ;;\n+\t\tsh3*)\t\tsh_cpu_target=sh3 ;;\n+\t\tsh2a*)\t\tsh_cpu_target=sh2a-nofpu ;;\n+\t\tsh2*)\t\tsh_cpu_target=sh2 ;;\n+\t\t*)\techo --without-fp not available for $target: ignored\n+\t\tesac\n+\t\ttm_defines=\"$tm_defines STRICT_NOFPU=1\"\n+\tfi\n \tsh_cpu_default=\"`echo $with_cpu|sed s/^m/sh/|tr A-Z_ a-z-`\"\n \tcase $sh_cpu_default in\n \tsh5-64media-nofpu | sh5-64media | \\\n@@ -2008,13 +2031,17 @@ sh-*-symbianelf* | sh[12346l]*-*-symbianelf* | \\\n \tsh_multilibs=${with_multilib_list}\n \tif test x${sh_multilibs} = x ; then\n \t\tcase ${target} in\n+\t\tsh64-superh-linux* | \\\n \t\tsh[1234]*)\tsh_multilibs=${sh_cpu_target} ;;\n \t\tsh64* | sh5*)\tsh_multilibs=m5-32media,m5-32media-nofpu,m5-compact,m5-compact-nofpu,m5-64media,m5-64media-nofpu ;;\n \t\tsh-superh-*)\tsh_multilibs=m4,m4-single,m4-single-only,m4-nofpu ;;\n \t\tsh*-*-linux*)\tsh_multilibs=m1,m3e,m4 ;;\n \t\tsh*-*-netbsd*)\tsh_multilibs=m3,m3e,m4 ;;\n \t\t*) sh_multilibs=m1,m2,m2e,m4,m4-single,m4-single-only,m2a,m2a-single ;;\n \t\tesac\n+\t\tif test x$with_fp = xno; then\n+\t\t\tsh_multilibs=\"`echo $sh_multilibs|sed -e s/m4/sh4-nofpu/ -e s/,m4-[^,]*//g -e s/,m[23]e// -e s/m2a,m2a-single/m2a-nofpu/ -e s/m5-..m....,//g`\"\n+\t\tfi\n \tfi\n \ttarget_cpu_default=SELECT_`echo ${sh_cpu_default}|tr a-z- A-Z_`\n \ttm_defines=${tm_defines}' SH_MULTILIB_CPU_DEFAULT=\\\"'`echo $sh_cpu_default|sed s/sh/m/`'\\\"'"}]}