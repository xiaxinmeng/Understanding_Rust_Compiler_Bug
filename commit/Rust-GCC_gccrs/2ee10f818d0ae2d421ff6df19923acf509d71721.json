{"sha": "2ee10f818d0ae2d421ff6df19923acf509d71721", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmVlMTBmODE4ZDBhZTJkNDIxZmY2ZGYxOTkyM2FjZjUwOWQ3MTcyMQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2015-09-10T07:32:13Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2015-09-10T07:32:13Z"}, "message": "re PR middle-end/67517 (ICE in gimplify_scan_omp_clauses)\n\n\tPR middle-end/67517\n\t* gimplify.c (gimplify_scan_omp_clauses): Instead of\n\tasserting that decl is not specified in octx->variables,\n\tbreak out of the loop if it is.\n\n\t* c-c++-common/gomp/pr67517.c: New test.\n\nFrom-SVN: r227608", "tree": {"sha": "f887371c4dd5c08474c7e1690e8bbafffbc6e299", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f887371c4dd5c08474c7e1690e8bbafffbc6e299"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2ee10f818d0ae2d421ff6df19923acf509d71721", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ee10f818d0ae2d421ff6df19923acf509d71721", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ee10f818d0ae2d421ff6df19923acf509d71721", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ee10f818d0ae2d421ff6df19923acf509d71721/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "499c20bbe466b6c71bda3b2e3eee044e9364911c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/499c20bbe466b6c71bda3b2e3eee044e9364911c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/499c20bbe466b6c71bda3b2e3eee044e9364911c"}], "stats": {"total": 30, "additions": 27, "deletions": 3}, "files": [{"sha": "89ec6f399fb5c69eb844239524c2acb1763196ca", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ee10f818d0ae2d421ff6df19923acf509d71721/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ee10f818d0ae2d421ff6df19923acf509d71721/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2ee10f818d0ae2d421ff6df19923acf509d71721", "patch": "@@ -1,5 +1,10 @@\n 2015-09-10  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/67517\n+\t* gimplify.c (gimplify_scan_omp_clauses): Instead of\n+\tasserting that decl is not specified in octx->variables,\n+\tbreak out of the loop if it is.\n+\n \tPR c++/67514\n \t* gimplify.c (gimplify_omp_for): For loop SIMD construct, if\n \titerator is not explicitly determined, but is defined inside"}, {"sha": "2a7da25a9060cc7d0b8590c71076602186bcc249", "filename": "gcc/gimplify.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ee10f818d0ae2d421ff6df19923acf509d71721/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ee10f818d0ae2d421ff6df19923acf509d71721/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=2ee10f818d0ae2d421ff6df19923acf509d71721", "patch": "@@ -6214,9 +6214,12 @@ gimplify_scan_omp_clauses (tree *list_p, gimple_seq *pre_p,\n \t\t    }\n \t\t  else\n \t\t    break;\n-\t\t  gcc_checking_assert (splay_tree_lookup (octx->variables,\n-\t\t\t\t\t\t\t  (splay_tree_key)\n-\t\t\t\t\t\t\t  decl) == NULL);\n+\t\t  if (splay_tree_lookup (octx->variables,\n+\t\t\t\t\t (splay_tree_key) decl) != NULL)\n+\t\t    {\n+\t\t      octx = NULL;\n+\t\t      break;\n+\t\t    }\n \t\t  flags = GOVD_SEEN;\n \t\t  if (!OMP_CLAUSE_LINEAR_NO_COPYIN (c))\n \t\t    flags |= GOVD_FIRSTPRIVATE;"}, {"sha": "7f00368b2e5c594875466381514b173589a8b995", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ee10f818d0ae2d421ff6df19923acf509d71721/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ee10f818d0ae2d421ff6df19923acf509d71721/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2ee10f818d0ae2d421ff6df19923acf509d71721", "patch": "@@ -1,5 +1,8 @@\n 2015-09-10  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/67517\n+\t* c-c++-common/gomp/pr67517.c: New test.\n+\n \tPR c++/67514\n \t* g++.dg/gomp/pr67514.C: New test.\n "}, {"sha": "3055ffb34eb2d708c5cdbcc10def0cdb076b6266", "filename": "gcc/testsuite/c-c++-common/gomp/pr67517.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ee10f818d0ae2d421ff6df19923acf509d71721/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fgomp%2Fpr67517.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ee10f818d0ae2d421ff6df19923acf509d71721/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fgomp%2Fpr67517.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fgomp%2Fpr67517.c?ref=2ee10f818d0ae2d421ff6df19923acf509d71721", "patch": "@@ -0,0 +1,13 @@\n+/* PR middle-end/67517 */\n+/* { dg-do compile } */\n+/* { dg-options \"-fopenmp\" } */\n+\n+int\n+foo (int x, int y, int z)\n+{\n+  int i;\n+  #pragma omp parallel for simd linear (y : x & 15) linear (x : 16) linear (z : x & 15)\n+  for (i = 0; i < 256; ++i)\n+    x += 16, y += x & 15, z += x & 15;\n+  return x + y + z;\n+}"}]}