{"sha": "fe56b8a294ede183f42a9716f547db9e5ba0e085", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmU1NmI4YTI5NGVkZTE4M2Y0MmE5NzE2ZjU0N2RiOWU1YmEwZTA4NQ==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2018-09-10T14:49:18Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2018-09-10T14:49:18Z"}, "message": "class.c (build_vtbl_ref): Remove.\n\n\t* class.c (build_vtbl_ref): Remove.\n\t(build_vtbl_ref_1): Rename to build_vtbl_ref.\n\t(build_vfn_ref): Call build_vtbl_ref instead of build_vtbl_ref_1.\n\nFrom-SVN: r264193", "tree": {"sha": "97aba224ca1ac10344375fd76b1d91b18cc84ec5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97aba224ca1ac10344375fd76b1d91b18cc84ec5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe56b8a294ede183f42a9716f547db9e5ba0e085", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe56b8a294ede183f42a9716f547db9e5ba0e085", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe56b8a294ede183f42a9716f547db9e5ba0e085", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe56b8a294ede183f42a9716f547db9e5ba0e085/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0fa6c49be6d60a34125f38e0d08fc0fe7d3d2174", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fa6c49be6d60a34125f38e0d08fc0fe7d3d2174", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0fa6c49be6d60a34125f38e0d08fc0fe7d3d2174"}], "stats": {"total": 22, "additions": 9, "deletions": 13}, "files": [{"sha": "db5c4d33a25109a11e431e17d22e280d045e68a1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe56b8a294ede183f42a9716f547db9e5ba0e085/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe56b8a294ede183f42a9716f547db9e5ba0e085/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=fe56b8a294ede183f42a9716f547db9e5ba0e085", "patch": "@@ -1,3 +1,9 @@\n+2018-09-10  Marek Polacek  <polacek@redhat.com>\n+\n+\t* class.c (build_vtbl_ref): Remove.\n+\t(build_vtbl_ref_1): Rename to build_vtbl_ref.\n+\t(build_vfn_ref): Call build_vtbl_ref instead of build_vtbl_ref_1.\n+\n 2018-09-08  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/87150 - wrong ctor with maybe-rvalue semantics."}, {"sha": "e950a7423f7377c74e408dc43baa489b8fd94746", "filename": "gcc/cp/class.c", "status": "modified", "additions": 3, "deletions": 13, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe56b8a294ede183f42a9716f547db9e5ba0e085/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe56b8a294ede183f42a9716f547db9e5ba0e085/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=fe56b8a294ede183f42a9716f547db9e5ba0e085", "patch": "@@ -133,7 +133,6 @@ static void maybe_warn_about_overly_private_class (tree);\n static void add_implicitly_declared_members (tree, tree*, int, int);\n static tree fixed_type_or_null (tree, int *, int *);\n static tree build_simple_base_path (tree expr, tree binfo);\n-static tree build_vtbl_ref_1 (tree, tree);\n static void build_vtbl_initializer (tree, tree, tree, tree, int *,\n \t\t\t\t    vec<constructor_elt, va_gc> **);\n static bool check_bitfield_decl (tree);\n@@ -699,8 +698,8 @@ build_vfield_ref (tree datum, tree type)\n    cases for INSTANCE which we take care of here, mainly to avoid\n    creating extra tree nodes when we don't have to.  */\n \n-static tree\n-build_vtbl_ref_1 (tree instance, tree idx)\n+tree\n+build_vtbl_ref (tree instance, tree idx)\n {\n   tree aref;\n   tree vtbl = NULL_TREE;\n@@ -730,14 +729,6 @@ build_vtbl_ref_1 (tree instance, tree idx)\n   return aref;\n }\n \n-tree\n-build_vtbl_ref (tree instance, tree idx)\n-{\n-  tree aref = build_vtbl_ref_1 (instance, idx);\n-\n-  return aref;\n-}\n-\n /* Given a stable object pointer INSTANCE_PTR, return an expression which\n    yields a function pointer corresponding to vtable element INDEX.  */\n \n@@ -746,8 +737,7 @@ build_vfn_ref (tree instance_ptr, tree idx)\n {\n   tree aref;\n \n-  aref = build_vtbl_ref_1 (cp_build_fold_indirect_ref (instance_ptr),\n-                           idx);\n+  aref = build_vtbl_ref (cp_build_fold_indirect_ref (instance_ptr), idx);\n \n   /* When using function descriptors, the address of the\n      vtable entry is treated as a function pointer.  */"}]}