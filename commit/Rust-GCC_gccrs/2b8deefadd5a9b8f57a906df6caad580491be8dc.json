{"sha": "2b8deefadd5a9b8f57a906df6caad580491be8dc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmI4ZGVlZmFkZDVhOWI4ZjU3YTkwNmRmNmNhYWQ1ODA0OTFiZThkYw==", "commit": {"author": {"name": "Kim Ho", "email": "kho@redhat.com", "date": "2004-01-16T20:05:41Z"}, "committer": {"name": "Kim Ho", "email": "kho@gcc.gnu.org", "date": "2004-01-16T20:05:41Z"}, "message": "GtkComponentPeer.java (GtkComponentPeer): If it is a FileDialog and has dimensions of 0 by 0...\n\n2004-01-16  Kim Ho  <kho@redhat.com>\n\n        * gnu/java/awt/peer/gtk/GtkComponentPeer.java (GtkComponentPeer): If\n        it is a FileDialog and has dimensions of 0 by 0, then the initial\n        size is set to size request plus insets.\n        * gnu/java/awt/peer/gtk/GtkFileDialogPeer.java\n        (gtkWidgetGetDimensions): Override method.\n        * jni/gtk-peer/gnu_java_awt_peer_gtk_GtkWindowPeer.c\n        (gtkWidgetGetDimensions): Override method. Returns size request plus\n        insets.\n\nFrom-SVN: r75993", "tree": {"sha": "247b098b477f0be49b1034cad3e31432bd5540f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/247b098b477f0be49b1034cad3e31432bd5540f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b8deefadd5a9b8f57a906df6caad580491be8dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b8deefadd5a9b8f57a906df6caad580491be8dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b8deefadd5a9b8f57a906df6caad580491be8dc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b8deefadd5a9b8f57a906df6caad580491be8dc/comments", "author": {"login": "biscuitsandscones", "id": 133805869, "node_id": "U_kgDOB_m3LQ", "avatar_url": "https://avatars.githubusercontent.com/u/133805869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/biscuitsandscones", "html_url": "https://github.com/biscuitsandscones", "followers_url": "https://api.github.com/users/biscuitsandscones/followers", "following_url": "https://api.github.com/users/biscuitsandscones/following{/other_user}", "gists_url": "https://api.github.com/users/biscuitsandscones/gists{/gist_id}", "starred_url": "https://api.github.com/users/biscuitsandscones/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/biscuitsandscones/subscriptions", "organizations_url": "https://api.github.com/users/biscuitsandscones/orgs", "repos_url": "https://api.github.com/users/biscuitsandscones/repos", "events_url": "https://api.github.com/users/biscuitsandscones/events{/privacy}", "received_events_url": "https://api.github.com/users/biscuitsandscones/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "79a76d653a725b128f216aaf5972c02609d58b95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79a76d653a725b128f216aaf5972c02609d58b95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79a76d653a725b128f216aaf5972c02609d58b95"}], "stats": {"total": 55, "additions": 52, "deletions": 3}, "files": [{"sha": "959afc3f068a04cedf8c9cc1ba12639ef5673a7b", "filename": "libjava/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b8deefadd5a9b8f57a906df6caad580491be8dc/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b8deefadd5a9b8f57a906df6caad580491be8dc/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=2b8deefadd5a9b8f57a906df6caad580491be8dc", "patch": "@@ -1,3 +1,14 @@\n+2004-01-16  Kim Ho  <kho@redhat.com>\n+ \n+        * gnu/java/awt/peer/gtk/GtkComponentPeer.java (GtkComponentPeer): If\n+        it is a FileDialog and has dimensions of 0 by 0, then the initial\n+        size is set to size request plus insets.\n+        * gnu/java/awt/peer/gtk/GtkFileDialogPeer.java\n+        (gtkWidgetGetDimensions): Override method.\n+        * jni/gtk-peer/gnu_java_awt_peer_gtk_GtkWindowPeer.c\n+        (gtkWidgetGetDimensions): Override method. Returns size request plus\n+        insets.\n+\n 2004-01-16  Andrew Haley  <aph@redhat.com>\n \n \t* sysdep/x86-64/locks.h: Don't use in/out memory constraints."}, {"sha": "ee067cedd51030263246c7379fc1b17771e23c8c", "filename": "libjava/gnu/java/awt/peer/gtk/GtkComponentPeer.java", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b8deefadd5a9b8f57a906df6caad580491be8dc/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkComponentPeer.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b8deefadd5a9b8f57a906df6caad580491be8dc/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkComponentPeer.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkComponentPeer.java?ref=2b8deefadd5a9b8f57a906df6caad580491be8dc", "patch": "@@ -1,5 +1,5 @@\n /* GtkComponentPeer.java -- Implements ComponentPeer with GTK\n-   Copyright (C) 1998, 1999, 2002 Free Software Foundation, Inc.\n+   Copyright (C) 1998, 1999, 2002, 2004 Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -124,6 +124,16 @@ protected GtkComponentPeer (Component awtComponent)\n \tsetFont(awtComponent.getFont());\n \n       setCursor (awtComponent.getCursor ());\n+      if (this instanceof GtkFileDialogPeer && awtComponent.getHeight() == 0\n+          && awtComponent.getWidth() == 0)\n+      {\n+        int[] dims = new int[2];\n+        gtkWidgetGetDimensions(dims);\n+        ((GtkFileDialogPeer) this).setBoundsCallback((Window)awtComponent, \n+                                                     awtComponent.getX(), \n+                                                     awtComponent.getY(),\n+                                                     dims[0], dims[1]);\n+      }      \n       Rectangle bounds = awtComponent.getBounds ();\n       setBounds (bounds.x, bounds.y, bounds.width, bounds.height);\n "}, {"sha": "95f0dde50b7b99c1bab00fca9e2cfb0a262d569e", "filename": "libjava/gnu/java/awt/peer/gtk/GtkFileDialogPeer.java", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b8deefadd5a9b8f57a906df6caad580491be8dc/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkFileDialogPeer.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b8deefadd5a9b8f57a906df6caad580491be8dc/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkFileDialogPeer.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkFileDialogPeer.java?ref=2b8deefadd5a9b8f57a906df6caad580491be8dc", "patch": "@@ -1,5 +1,5 @@\n /* GtkFileDialogPeer.java -- Implements FileDialogPeer with GTK\n-   Copyright (C) 1998, 1999, 2002 Free Software Foundation, Inc.\n+   Copyright (C) 1998, 1999, 2002, 2004 Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -63,6 +63,7 @@ public GtkFileDialogPeer (FileDialog fd)\n   native void connectJObject ();\n   native void connectSignals ();\n   native void nativeSetFile (String file);\n+  native void gtkWidgetGetDimensions (int[] dims);\n \n   public void setFile (String fileName)\n   {"}, {"sha": "8c6fc1fbd0ce6ba7d38e2b319e9bfeaa966d6be6", "filename": "libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkWindowPeer.c", "status": "modified", "additions": 28, "deletions": 1, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b8deefadd5a9b8f57a906df6caad580491be8dc/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkWindowPeer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b8deefadd5a9b8f57a906df6caad580491be8dc/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkWindowPeer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkWindowPeer.c?ref=2b8deefadd5a9b8f57a906df6caad580491be8dc", "patch": "@@ -1,5 +1,5 @@\n /* gtkwindowpeer.c -- Native implementation of GtkWindowPeer\n-   Copyright (C) 1998, 1999, 2002 Free Software Foundation, Inc.\n+   Copyright (C) 1998, 1999, 2002, 2004 Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -400,6 +400,33 @@ Java_gnu_java_awt_peer_gtk_GtkFramePeer_getMenuBarHeight\n   return height;\n }\n \n+JNIEXPORT void JNICALL\n+Java_gnu_java_awt_peer_gtk_GtkFileDialogPeer_gtkWidgetGetDimensions\n+  (JNIEnv *env, jobject obj, jintArray jdims)\n+{\n+  void *ptr;\n+  jint *dims;\n+  int top, left, bottom, right;\n+  GtkRequisition req;\n+  \n+  ptr = NSA_GET_PTR (env, obj);\n+  dims = (*env)->GetIntArrayElements (env, jdims, 0);\n+  dims[0] = dims[1] = 0;\n+  \n+  gdk_threads_enter ();\n+  \n+  gtk_widget_size_request (GTK_WIDGET (ptr), &req);\n+  \n+  window_get_frame_extents (GTK_WIDGET (ptr), &top, &left, &bottom, &right);\n+\n+  dims[0] = req.width + left + right;\n+  dims[1] = req.height + top + bottom;\n+  \n+  gdk_threads_leave ();\n+    \n+  (*env)->ReleaseIntArrayElements (env, jdims, dims, 0);\n+} \n+\n static void\n window_get_frame_extents (GtkWidget *window,\n                           int *top, int *left, int *bottom, int *right)"}]}