{"sha": "dcedcddb5aabef25f66c651a2c35b9974ceff3cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGNlZGNkZGI1YWFiZWYyNWY2NmM2NTFhMmMzNWI5OTc0Y2VmZjNjYg==", "commit": {"author": {"name": "Nathan Froyd", "email": "froydnj@codesourcery.com", "date": "2010-10-30T14:35:35Z"}, "committer": {"name": "Nathan Froyd", "email": "froydnj@gcc.gnu.org", "date": "2010-10-30T14:35:35Z"}, "message": "class.c (layout_vtable_decl): Call build_array_of_n_type.\n\n\t* class.c (layout_vtable_decl): Call build_array_of_n_type.\n\t(build_vtt, build_ctor_vtabl_group): Likewise.\n\nFrom-SVN: r166090", "tree": {"sha": "0d93f77d68846f1354690a06fc36a22e15bf0bbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0d93f77d68846f1354690a06fc36a22e15bf0bbb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dcedcddb5aabef25f66c651a2c35b9974ceff3cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcedcddb5aabef25f66c651a2c35b9974ceff3cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcedcddb5aabef25f66c651a2c35b9974ceff3cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcedcddb5aabef25f66c651a2c35b9974ceff3cb/comments", "author": null, "committer": null, "parents": [{"sha": "2b603773b47c8ace0651184e754c421021e2728d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b603773b47c8ace0651184e754c421021e2728d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b603773b47c8ace0651184e754c421021e2728d"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "8df704f2bd33b7e5ac164ecfe4140d19e4245a5e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcedcddb5aabef25f66c651a2c35b9974ceff3cb/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcedcddb5aabef25f66c651a2c35b9974ceff3cb/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=dcedcddb5aabef25f66c651a2c35b9974ceff3cb", "patch": "@@ -1,3 +1,8 @@\n+2010-10-30  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\t* class.c (layout_vtable_decl): Call build_array_of_n_type.\n+\t(build_vtt, build_ctor_vtabl_group): Likewise.\n+\n 2010-10-30  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \tImplemented Objective-C 2.0 @property, @synthesize and @dynamic.\n@@ -8,7 +13,7 @@\n \tobjc_maybe_build_component_ref instead of objc_build_setter_call.\n \t(cp_build_modify_expr): Call objc_maybe_build_modify_expr instead\n \tof objc_build_getter_call.\n-\t\n+\n 2010-10-27  Jason Merrill  <jason@redhat.com>\n \n \t* cp-tree.h (cp_trait_kind): Add CPTK_IS_LITERAL_TYPE."}, {"sha": "50afc48cfd4df392de9bd187cfd0cc8646b92365", "filename": "gcc/cp/class.c", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcedcddb5aabef25f66c651a2c35b9974ceff3cb/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcedcddb5aabef25f66c651a2c35b9974ceff3cb/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=dcedcddb5aabef25f66c651a2c35b9974ceff3cb", "patch": "@@ -1858,8 +1858,7 @@ layout_vtable_decl (tree binfo, int n)\n   tree atype;\n   tree vtable;\n \n-  atype = build_cplus_array_type (vtable_entry_type,\n-\t\t\t\t  build_index_type (size_int (n - 1)));\n+  atype = build_array_of_n_type (vtable_entry_type, n);\n   layout_type (atype);\n \n   /* We may have to grow the vtable.  */\n@@ -7295,8 +7294,8 @@ build_vtt (tree t)\n     return;\n \n   /* Figure out the type of the VTT.  */\n-  type = build_index_type (size_int (VEC_length (constructor_elt, inits) - 1));\n-  type = build_cplus_array_type (const_ptr_type_node, type);\n+  type = build_array_of_n_type (const_ptr_type_node,\n+\t\t\t\tVEC_length (constructor_elt, inits));\n \n   /* Now, build the VTT object itself.  */\n   vtt = build_vtable (t, mangle_vtt_for_type (t), type);\n@@ -7551,8 +7550,8 @@ build_ctor_vtbl_group (tree binfo, tree t)\n     }\n \n   /* Figure out the type of the construction vtable.  */\n-  type = build_index_type (size_int (VEC_length (constructor_elt, v) - 1));\n-  type = build_cplus_array_type (vtable_entry_type, type);\n+  type = build_array_of_n_type (vtable_entry_type,\n+\t\t\t\tVEC_length (constructor_elt, v));\n   layout_type (type);\n   TREE_TYPE (vtbl) = type;\n   DECL_SIZE (vtbl) = DECL_SIZE_UNIT (vtbl) = NULL_TREE;"}]}