{"sha": "716aaa593ae2583e36d545fef90c939630152d67", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE2YWFhNTkzYWUyNTgzZTM2ZDU0NWZlZjkwYzkzOTYzMDE1MmQ2Nw==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-03-28T22:16:29Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-03-28T22:16:29Z"}, "message": "re PR fortran/35699 (run-time abort writing zero sized section to direct access file)\n\n2008-03-28  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/35699\n\t* gfortran.dg/direct_io_10.f: New test.\n\nFrom-SVN: r133700", "tree": {"sha": "75c43d12c78df182ddafa8924b7fb1bebed6391a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/75c43d12c78df182ddafa8924b7fb1bebed6391a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/716aaa593ae2583e36d545fef90c939630152d67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/716aaa593ae2583e36d545fef90c939630152d67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/716aaa593ae2583e36d545fef90c939630152d67", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/716aaa593ae2583e36d545fef90c939630152d67/comments", "author": null, "committer": null, "parents": [{"sha": "fc8bc1753dbf100f1de181992d80f559061711d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc8bc1753dbf100f1de181992d80f559061711d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc8bc1753dbf100f1de181992d80f559061711d6"}], "stats": {"total": 51, "additions": 51, "deletions": 0}, "files": [{"sha": "a42d59f228ed0a01848a94a107a1e46cde124e9b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/716aaa593ae2583e36d545fef90c939630152d67/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/716aaa593ae2583e36d545fef90c939630152d67/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=716aaa593ae2583e36d545fef90c939630152d67", "patch": "@@ -1,3 +1,8 @@\n+2008-03-28  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/35699\n+\t* gfortran.dg/direct_io_10.f: New test.\n+\n 2008-03-28  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* gcc.target/i386/vectorize6.c: New test."}, {"sha": "c470272086df6f0667a6154aa703c21d414db44a", "filename": "gcc/testsuite/gfortran.dg/direct_io_10.f", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/716aaa593ae2583e36d545fef90c939630152d67/gcc%2Ftestsuite%2Fgfortran.dg%2Fdirect_io_10.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/716aaa593ae2583e36d545fef90c939630152d67/gcc%2Ftestsuite%2Fgfortran.dg%2Fdirect_io_10.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdirect_io_10.f?ref=716aaa593ae2583e36d545fef90c939630152d67", "patch": "@@ -0,0 +1,46 @@\n+! { dg-do run }\n+! pr35699 run-time abort writing zero sized section to direct access file\n+      program directio\n+      call       qi0010 (  10,   1,   2,   3,   4,  9,   2)\n+      end\n+\n+      subroutine qi0010 (nf10, nf1, nf2, nf3, nf4,nf9, np2)\n+      character(10) bda(nf10)\n+      character(10) bda1(nf10), bval\n+\n+      integer  j_len\n+      bda1(1) = 'x'\n+      do i = 2,10\n+        bda1(i) = 'x'//bda1(i-1)\n+      enddo\n+      bda = 'unread'\n+\n+      inquire(iolength = j_len) bda1(nf1:nf10:nf2), bda1(nf4:nf3),\n+     $                               bda1(nf2:nf10:nf2)\n+\n+      open (unit=48,\n+     $      access='direct',\n+     $      status='scratch',\n+     $      recl = j_len,\n+     $      iostat = istat,\n+     $      form='unformatted',\n+     $      action='readwrite')\n+\n+      write (48,iostat = istat, rec = 3) bda1(nf1:nf10:nf2),\n+     $                    bda1(nf4:nf3), bda1(nf2:nf10:nf2)\n+      if ( istat .ne. 0) then\n+        call abort\n+      endif\n+      istat = -314\n+\n+      read (48,iostat = istat, rec = np2+1) bda(nf1:nf9:nf2),\n+     $                       bda(nf4:nf3), bda(nf2:nf10:nf2)\n+      if ( istat .ne. 0) then\n+        call abort\n+      endif\n+\n+      do j1 = 1,10\n+        bval = bda1(j1)\n+        if (bda(j1) .ne. bval) call abort\n+      enddo\n+      end subroutine"}]}