{"sha": "81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODEzOTJhZTdiYWYzZTZkOGE1ZDk5MTBmMGQ0ZjZiNTcxYTUyYWZlMw==", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2020-11-25T11:34:45Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-12-17T10:49:23Z"}, "message": "[Ada] Consistent wording for missing -gnat2020 switch\n\ngcc/ada/\n\n\t* par-ch3.adb (P_Identifier_Declarations): Reuse\n\tError_Msg_Ada_2020_Feature for object renaming without subtype.\n\t* par-ch4.adb (P_Primary): Likewise for target name.\n\t(P_Iterated_Component_Association): Likewise for iterated\n\tcomponent.\n\t(P_Declare_Expression): Likewise for declare expression.\n\t* par-ch6.adb (P_Formal_Part): Likewise for aspect on formal\n\tparameter.\n\t* sem_aggr.adb (Resolve_Delta_Aggregate): Ditto.\n\t* sem_ch8.adb (Analyze_Object_Renaming): Reuse\n\tError_Msg_Ada_2020_Feature.\n\t* sem_ch13.adb (Validate_Aspect_Aggregate): Reuse\n\tError_Msg_Ada_2020_Feature; use lower case for \"aspect\" and\n\tdon't use underscore for \"Ada_2020\"; don't give up on analysis\n\tin Ada 2012 mode.\n\t(Validate_Aspect_Stable_Properties): Reuse\n\tError_Msg_Ada_2020_Feature; use lower case for \"aspect\"; minor\n\tstyle fixes.", "tree": {"sha": "5f90e9794277f018ce335dda9c96ed0f532bee14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5f90e9794277f018ce335dda9c96ed0f532bee14"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "84be0369c8d3a6c94f46906d901d2c5426fb9174", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84be0369c8d3a6c94f46906d901d2c5426fb9174", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84be0369c8d3a6c94f46906d901d2c5426fb9174"}], "stats": {"total": 53, "additions": 18, "deletions": 35}, "files": [{"sha": "78a3ebd2e6543b9a86d8c10c2671b9f2efc5287c", "filename": "gcc/ada/par-ch3.adb", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fpar-ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fpar-ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch3.adb?ref=81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3", "patch": "@@ -1486,11 +1486,8 @@ package body Ch3 is\n       --  access_definition\n \n       elsif Token = Tok_Renames then\n-         if Ada_Version < Ada_2020 then\n-            Error_Msg_SC\n-              (\"object renaming without subtype is an Ada 202x feature\");\n-            Error_Msg_SC (\"\\compile with -gnat2020\");\n-         end if;\n+         Error_Msg_Ada_2020_Feature\n+           (\"object renaming without subtype\", Token_Ptr);\n \n          Scan; -- past renames\n "}, {"sha": "340668ea121f48f48d686ee368600cc8e520402b", "filename": "gcc/ada/par-ch4.adb", "status": "modified", "additions": 3, "deletions": 11, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fpar-ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fpar-ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch4.adb?ref=81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3", "patch": "@@ -2928,10 +2928,7 @@ package body Ch4 is\n                Scan; -- past minus\n \n             when Tok_At_Sign =>  --  AI12-0125 : target_name\n-               if Ada_Version < Ada_2020 then\n-                  Error_Msg_SC (\"target name is an Ada 202x feature\");\n-                  Error_Msg_SC (\"\\compile with -gnat2020\");\n-               end if;\n+               Error_Msg_Ada_2020_Feature (\"target name\", Token_Ptr);\n \n                Node1 := P_Name;\n                return Node1;\n@@ -3507,10 +3504,7 @@ package body Ch4 is\n          Set_Expression (Assoc_Node, P_Expression);\n       end if;\n \n-      if Ada_Version < Ada_2020 then\n-         Error_Msg_SC (\"iterated component is an Ada 202x feature\");\n-         Error_Msg_SC (\"\\compile with -gnat2020\");\n-      end if;\n+      Error_Msg_Ada_2020_Feature (\"iterated component\", Token_Ptr);\n \n       return Assoc_Node;\n    end P_Iterated_Component_Association;\n@@ -3695,9 +3689,7 @@ package body Ch4 is\n             Result : constant Node_Id :=\n               Make_Expression_With_Actions (Loc, Actions, Expression);\n          begin\n-            if Ada_Version < Ada_2020 then\n-               Error_Msg (\"declare_expression is an Ada 2020 feature\", Loc);\n-            end if;\n+            Error_Msg_Ada_2020_Feature (\"declare expression\", Loc);\n \n             return Result;\n          end;"}, {"sha": "145fbc41b3e7315cc8cbdfb17fc8a446b8c923fc", "filename": "gcc/ada/par-ch6.adb", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fpar-ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fpar-ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch6.adb?ref=81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3", "patch": "@@ -1620,9 +1620,8 @@ package body Ch6 is\n          --  the time being.\n \n          elsif Token = Tok_With then\n-            if Ada_Version < Ada_2020 then\n-               Error_Msg_SP (\"aspect on formal parameter requires -gnat2020\");\n-            end if;\n+            Error_Msg_Ada_2020_Feature\n+              (\"aspect on formal parameter\", Token_Ptr);\n \n             P_Aspect_Specifications (Specification_Node, False);\n "}, {"sha": "b94f369f36e3b6cbdb1a8d045e5676e180ea7262", "filename": "gcc/ada/sem_aggr.adb", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fsem_aggr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fsem_aggr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_aggr.adb?ref=81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3", "patch": "@@ -3035,10 +3035,7 @@ package body Sem_Aggr is\n       Base : constant Node_Id := Expression (N);\n \n    begin\n-      if Ada_Version < Ada_2020 then\n-         Error_Msg_N (\"delta_aggregate is an Ada 202x feature\", N);\n-         Error_Msg_N (\"\\compile with -gnat2020\", N);\n-      end if;\n+      Error_Msg_Ada_2020_Feature (\"delta aggregate\", Sloc (N));\n \n       if not Is_Composite_Type (Typ) then\n          Error_Msg_N (\"not a composite type\", N);"}, {"sha": "938e1d2911a37c1919ddfd5fc97824c426c22661", "filename": "gcc/ada/sem_ch13.adb", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fsem_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fsem_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch13.adb?ref=81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3", "patch": "@@ -15166,14 +15166,13 @@ package body Sem_Ch13 is\n       Assign_Indexed_Subp : Node_Id := Empty;\n \n    begin\n-      if Ada_Version < Ada_2020 then\n-         Error_Msg_N (\"Aspect Aggregate is an Ada_2020 feature\", N);\n+      Error_Msg_Ada_2020_Feature (\"aspect Aggregate\", Sloc (N));\n \n-      elsif Nkind (N) /= N_Aggregate\n+      if Nkind (N) /= N_Aggregate\n         or else Present (Expressions (N))\n         or else No (Component_Associations (N))\n       then\n-         Error_Msg_N (\"Aspect Aggregate requires an aggregate \"\n+         Error_Msg_N (\"aspect Aggregate requires an aggregate \"\n                         & \"with component associations\", N);\n          return;\n       end if;\n@@ -15251,7 +15250,8 @@ package body Sem_Ch13 is\n \n          PF_Name : Node_Id := PF_Arg;\n \n-         --  Start of processing for Check_Property_Function_Arg\n+      --  Start of processing for Check_Property_Function_Arg\n+\n       begin\n          if Nkind (PF_Arg) = N_Op_Not then\n             PF_Name := Right_Opnd (PF_Arg);\n@@ -15282,10 +15282,10 @@ package body Sem_Ch13 is\n          end if;\n       end Check_Property_Function_Arg;\n \n+   --  Start of processing for Validate_Aspect_Stable_Properties\n+\n    begin\n-      if Ada_Version < Ada_2020 then\n-         Error_Msg_N (\"Aspect Stable_Properties is an Ada_2020 feature\", N);\n-      end if;\n+      Error_Msg_Ada_2020_Feature (\"aspect Stable_Properties\", Sloc (N));\n \n       if (not Is_Aspect_Of_Type) and then (not Is_Subprogram (E)) then\n          Error_Msg_N (\"Stable_Properties aspect can only be specified for \""}, {"sha": "4689ae4ba18411038ffe1419605cf8d35770eb13", "filename": "gcc/ada/sem_ch8.adb", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fsem_ch8.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3/gcc%2Fada%2Fsem_ch8.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch8.adb?ref=81392ae7baf3e6d8a5d9910f0d4f6b571a52afe3", "patch": "@@ -1482,10 +1482,8 @@ package body Sem_Ch8 is\n       --  AI12-0383: Names that denote values can be renamed.\n       --  Ignore (accept) N_Raise_xxx_Error nodes in this context.\n \n-      elsif Ada_Version < Ada_2020\n-        and then No_Raise_xxx_Error (Nam) = OK\n-      then\n-         Error_Msg_N (\"value in renaming requires -gnat2020\", Nam);\n+      elsif No_Raise_xxx_Error (Nam) = OK then\n+         Error_Msg_Ada_2020_Feature (\"value in renaming\", Sloc (Nam));\n       end if;\n \n       Set_Etype (Id, T2);"}]}