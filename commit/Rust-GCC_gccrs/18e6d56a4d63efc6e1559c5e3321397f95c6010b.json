{"sha": "18e6d56a4d63efc6e1559c5e3321397f95c6010b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MThlNmQ1NmE0ZDYzZWZjNmUxNTU5YzVlMzMyMTM5N2Y5NWM2MDEwYg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2009-04-24T08:37:17Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-04-24T08:37:17Z"}, "message": "fe.h (Set_Identifier_Casing): Add const to second parameter.\n\n\t* fe.h (Set_Identifier_Casing): Add const to second parameter.\n\t* gcc-interface/misc.c (internal_error_function): Make copy of retur\n\tfrom pp_formatted_text before assigning BUFFER to it.\n\t(gnat_init): Likewise for main_input_filename and gnat_argv.\n\t(gnat_printable_name): Remove cast from call to Set_Identifier_Casing.\n\nCo-Authored-By: Thomas Quinot <quinot@adacore.com>\n\nFrom-SVN: r146678", "tree": {"sha": "9aee0b5cf2a461e613bcfc8aeaa5cc642299f4b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9aee0b5cf2a461e613bcfc8aeaa5cc642299f4b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/18e6d56a4d63efc6e1559c5e3321397f95c6010b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18e6d56a4d63efc6e1559c5e3321397f95c6010b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18e6d56a4d63efc6e1559c5e3321397f95c6010b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18e6d56a4d63efc6e1559c5e3321397f95c6010b/comments", "author": null, "committer": null, "parents": [{"sha": "87526ff17cbea5303516e983886f6cea2d851176", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87526ff17cbea5303516e983886f6cea2d851176", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87526ff17cbea5303516e983886f6cea2d851176"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "295cab604f3b89dded7d06d5a9e84dfa767ac2ec", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18e6d56a4d63efc6e1559c5e3321397f95c6010b/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18e6d56a4d63efc6e1559c5e3321397f95c6010b/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=18e6d56a4d63efc6e1559c5e3321397f95c6010b", "patch": "@@ -1,3 +1,12 @@\n+2009-04-24  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+            Thomas Quinot  <quinot@adacore.com>\n+\n+\t* fe.h (Set_Identifier_Casing): Add const to second parameter.\n+\t* gcc-interface/misc.c (internal_error_function): Make copy of retur\n+\tfrom pp_formatted_text before assigning BUFFER to it.\n+\t(gnat_init): Likewise for main_input_filename and gnat_argv.\n+\t(gnat_printable_name): Remove cast from call to Set_Identifier_Casing.\n+\n 2009-04-24  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* ttypes.ads (Target_Double_Float_Alignment): New variable."}, {"sha": "bd55cbe1f2bb34a06007dcbdbd1cfa9df0b0afa8", "filename": "gcc/ada/fe.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18e6d56a4d63efc6e1559c5e3321397f95c6010b/gcc%2Fada%2Ffe.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18e6d56a4d63efc6e1559c5e3321397f95c6010b/gcc%2Fada%2Ffe.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffe.h?ref=18e6d56a4d63efc6e1559c5e3321397f95c6010b", "patch": "@@ -84,7 +84,7 @@ extern Node_Id Get_Attribute_Definition_Clause (Entity_Id, char);\n \n extern void Error_Msg_N\t          (Fat_Pointer, Node_Id);\n extern void Error_Msg_NE          (Fat_Pointer, Node_Id, Entity_Id);\n-extern void Set_Identifier_Casing (Char *, Char *);\n+extern void Set_Identifier_Casing (Char *, const Char *);\n \n /* err_vars: */\n "}, {"sha": "9d652492ec1249a01aa4c7cb9fe5c00067ac9358", "filename": "gcc/ada/gcc-interface/misc.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18e6d56a4d63efc6e1559c5e3321397f95c6010b/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18e6d56a4d63efc6e1559c5e3321397f95c6010b/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fmisc.c?ref=18e6d56a4d63efc6e1559c5e3321397f95c6010b", "patch": "@@ -355,7 +355,7 @@ internal_error_function (const char *msgid, va_list *ap)\n   pp_format_verbatim (global_dc->printer, &tinfo);\n \n   /* Extract a (writable) pointer to the formatted text.  */\n-  buffer = (char*) pp_formatted_text (global_dc->printer);\n+  buffer = xstrdup (pp_formatted_text (global_dc->printer));\n \n   /* Go up to the first newline.  */\n   for (p = buffer; *p; p++)\n@@ -394,9 +394,12 @@ gnat_init (void)\n   gnat_init_decl_processing ();\n \n   /* Add the input filename as the last argument.  */\n-  gnat_argv[gnat_argc] = (char *) main_input_filename;\n-  gnat_argc++;\n-  gnat_argv[gnat_argc] = 0;\n+  if (main_input_filename)\n+    {\n+      gnat_argv[gnat_argc] = xstrdup (main_input_filename);\n+      gnat_argc++;\n+      gnat_argv[gnat_argc] = NULL;\n+    }\n \n   global_dc->internal_error = &internal_error_function;\n \n@@ -547,7 +550,7 @@ gnat_printable_name (tree decl, int verbosity)\n \n   if (verbosity == 2 && !DECL_IS_BUILTIN (decl))\n     {\n-      Set_Identifier_Casing (ada_name, (char *) DECL_SOURCE_FILE (decl));\n+      Set_Identifier_Casing (ada_name, DECL_SOURCE_FILE (decl));\n       return ggc_strdup (Name_Buffer);\n     }\n "}]}