{"sha": "94dc53320e6c22ef0d3f8d8db83c2492de001f5b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTRkYzUzMzIwZTZjMjJlZjBkM2Y4ZDhkYjgzYzI0OTJkZTAwMWY1Yg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2013-04-29T07:55:09Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2013-04-29T07:55:09Z"}, "message": "re PR tree-optimization/57083 (Wrong constant folding)\n\n\tPR tree-optimization/57083\n\t* tree-vrp.c (extract_range_from_binary_expr_1): For LSHIFT_EXPR with\n\tnon-singleton shift count range, zero extend low_bound for uns case.\n\n\t* gcc.dg/torture/pr57083.c: New test.\n\nFrom-SVN: r198388", "tree": {"sha": "6cf1064a1d9c33e18ac75ab7b877083fc02d1b1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6cf1064a1d9c33e18ac75ab7b877083fc02d1b1c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/94dc53320e6c22ef0d3f8d8db83c2492de001f5b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94dc53320e6c22ef0d3f8d8db83c2492de001f5b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94dc53320e6c22ef0d3f8d8db83c2492de001f5b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94dc53320e6c22ef0d3f8d8db83c2492de001f5b/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "baee1763e2c82dab41d55da559292030974b41c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/baee1763e2c82dab41d55da559292030974b41c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/baee1763e2c82dab41d55da559292030974b41c6"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "262dbdf72d7c809095f6398c4abd4582b43ab1fb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94dc53320e6c22ef0d3f8d8db83c2492de001f5b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94dc53320e6c22ef0d3f8d8db83c2492de001f5b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=94dc53320e6c22ef0d3f8d8db83c2492de001f5b", "patch": "@@ -1,5 +1,9 @@\n 2013-04-29  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/57083\n+\t* tree-vrp.c (extract_range_from_binary_expr_1): For LSHIFT_EXPR with\n+\tnon-singleton shift count range, zero extend low_bound for uns case.\n+\n \t* config/i386/predicates.md (general_vector_operand): New predicate.\n \t* config/i386/i386.c (const_vector_equal_evenodd_p): New function.\n \t(ix86_expand_mul_widen_evenodd): Force op1 resp. op2 into register"}, {"sha": "ddb11ec13303e5cf78fee0eb258809653d1dab98", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94dc53320e6c22ef0d3f8d8db83c2492de001f5b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94dc53320e6c22ef0d3f8d8db83c2492de001f5b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=94dc53320e6c22ef0d3f8d8db83c2492de001f5b", "patch": "@@ -1,3 +1,8 @@\n+2013-04-29  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/57083\n+\t* gcc.dg/torture/pr57083.c: New test.\n+\n 2013-04-28  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/56450"}, {"sha": "070a53d2165211b0269dc5ba55adbb8276dede4a", "filename": "gcc/testsuite/gcc.dg/torture/pr57083.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94dc53320e6c22ef0d3f8d8db83c2492de001f5b/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr57083.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94dc53320e6c22ef0d3f8d8db83c2492de001f5b/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr57083.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr57083.c?ref=94dc53320e6c22ef0d3f8d8db83c2492de001f5b", "patch": "@@ -0,0 +1,15 @@\n+/* PR tree-optimization/57083 */\n+/* { dg-do run { target int32plus } } */\n+\n+extern void abort (void);\n+short x = 1;\n+int y = 0;\n+\n+int\n+main ()\n+{\n+  unsigned t = (0x7fff8001U - x) << (y == 0);\n+  if (t != 0xffff0000U)\n+    abort ();\n+  return 0;\n+}"}, {"sha": "a7409075046e3ce2ea6e12b569773fc3ebb836f8", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94dc53320e6c22ef0d3f8d8db83c2492de001f5b/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94dc53320e6c22ef0d3f8d8db83c2492de001f5b/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=94dc53320e6c22ef0d3f8d8db83c2492de001f5b", "patch": "@@ -2837,7 +2837,7 @@ extract_range_from_binary_expr_1 (value_range_t *vr,\n \n \t      if (uns)\n \t\t{\n-\t\t  low_bound = bound;\n+\t\t  low_bound = bound.zext (prec);\n \t\t  high_bound = complement.zext (prec);\n \t\t  if (tree_to_double_int (vr0.max).ult (low_bound))\n \t\t    {"}]}