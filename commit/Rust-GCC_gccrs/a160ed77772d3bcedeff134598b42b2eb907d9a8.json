{"sha": "a160ed77772d3bcedeff134598b42b2eb907d9a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTE2MGVkNzc3NzJkM2JjZWRlZmYxMzQ1OThiNDJiMmViOTA3ZDlhOA==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2017-07-16T09:55:18Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2017-07-16T09:55:18Z"}, "message": "parser.c (cp_parser_cast_expression): Use %q#T instead of %qT in old-style cast diagnostic.\n\n        * parser.c (cp_parser_cast_expression): Use %q#T instead of %qT\n        in old-style cast diagnostic.\n        * typeck.c (maybe_warn_about_useless_cast): Use %q#T instead of %qT\n        in useless cast diagnostic.\n        * error.c (type_to_string): Remove enum special handling.\n\n        * g++.dg/cpp1z/direct-enum-init1.C: Revert special enum handling.\n        * g++.dg/warn/pr12242.C: Likewise.\n\nFrom-SVN: r250231", "tree": {"sha": "159d88610ddef9e31163ba8fe967c7d29dc84847", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/159d88610ddef9e31163ba8fe967c7d29dc84847"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a160ed77772d3bcedeff134598b42b2eb907d9a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a160ed77772d3bcedeff134598b42b2eb907d9a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a160ed77772d3bcedeff134598b42b2eb907d9a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a160ed77772d3bcedeff134598b42b2eb907d9a8/comments", "author": null, "committer": null, "parents": [{"sha": "76d61a43a5d2571b81dfca0eaf644e299088bf30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76d61a43a5d2571b81dfca0eaf644e299088bf30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76d61a43a5d2571b81dfca0eaf644e299088bf30"}], "stats": {"total": 256, "additions": 126, "deletions": 130}, "files": [{"sha": "2497c7f6d237dfd4c96776a40eb93e1bc202d20d", "filename": "gcc/cp/error.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a160ed77772d3bcedeff134598b42b2eb907d9a8/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a160ed77772d3bcedeff134598b42b2eb907d9a8/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=a160ed77772d3bcedeff134598b42b2eb907d9a8", "patch": "@@ -3172,10 +3172,6 @@ type_to_string (tree typ, int verbose)\n       if (len == aka_len && memcmp (p, p+aka_start, len) == 0)\n \tp[len] = '\\0';\n     }\n-\n-  if (typ && TYPE_P (typ) && TREE_CODE (typ) == ENUMERAL_TYPE)\n-    pp_string (cxx_pp, M_(\" {enum}\"));\n-\n   return pp_ggc_formatted_text (cxx_pp);\n }\n "}, {"sha": "d767797550a6c859259aadf6699506e7c82c6895", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a160ed77772d3bcedeff134598b42b2eb907d9a8/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a160ed77772d3bcedeff134598b42b2eb907d9a8/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=a160ed77772d3bcedeff134598b42b2eb907d9a8", "patch": "@@ -8890,7 +8890,7 @@ cp_parser_cast_expression (cp_parser *parser, bool address_p, bool cast_p,\n \t\t  maybe_add_cast_fixit (&rich_loc, open_paren_loc, close_paren_loc,\n \t\t\t\t\texpr, type);\n \t\t  warning_at_rich_loc (&rich_loc, OPT_Wold_style_cast,\n-\t\t\t\t       \"use of old-style cast to %qT\", type);\n+\t\t\t\t       \"use of old-style cast to %q#T\", type);\n \t\t}\n \n \t      /* Only type conversions to integral or enumeration types"}, {"sha": "316d57fb38c4d6df7be9cc805506e163d82b3010", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a160ed77772d3bcedeff134598b42b2eb907d9a8/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a160ed77772d3bcedeff134598b42b2eb907d9a8/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=a160ed77772d3bcedeff134598b42b2eb907d9a8", "patch": "@@ -6681,7 +6681,7 @@ maybe_warn_about_useless_cast (tree type, tree expr, tsubst_flags_t complain)\n \t       ? xvalue_p (expr) : lvalue_p (expr))\n \t   && same_type_p (TREE_TYPE (expr), TREE_TYPE (type)))\n \t  || same_type_p (TREE_TYPE (expr), type))\n-\twarning (OPT_Wuseless_cast, \"useless cast to type %qT\", type);\n+\twarning (OPT_Wuseless_cast, \"useless cast to type %q#T\", type);\n     }\n }\n "}, {"sha": "b473ed553c94fd02be027c25983ff4e84fa3b845", "filename": "gcc/testsuite/g++.dg/cpp1z/direct-enum-init1.C", "status": "modified", "additions": 117, "deletions": 117, "changes": 234, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a160ed77772d3bcedeff134598b42b2eb907d9a8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fdirect-enum-init1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a160ed77772d3bcedeff134598b42b2eb907d9a8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fdirect-enum-init1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fdirect-enum-init1.C?ref=a160ed77772d3bcedeff134598b42b2eb907d9a8", "patch": "@@ -17,121 +17,121 @@ void bar (E);\n void\n foo ()\n {\n-  A a1 { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A {enum}'\" }\n-  B b1 { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } }\n+  A a1 { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A'\" }\n+  B b1 { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } }\n   C c1 { s };\n-  D d1 { D(t) };\t// { dg-error \"invalid cast from type 'T' to type 'D {enum}'\" }\n-  D d2 { t };\t\t// { dg-error \"cannot convert 'T' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-\t\t\t// { dg-error \"invalid cast from type 'T' to type 'D {enum}'\" \"\" { target c++1z } .-1 }\n-  D d3 { 9 };\t\t// { dg-error \"cannot convert 'int' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-  D d4 { l };\t\t// { dg-error \"cannot convert 'long int' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n+  D d1 { D(t) };\t// { dg-error \"invalid cast from type 'T' to type 'D'\" }\n+  D d2 { t };\t\t// { dg-error \"cannot convert 'T' to 'D' in initialization\" \"\" { target c++14_down } }\n+\t\t\t// { dg-error \"invalid cast from type 'T' to type 'D'\" \"\" { target c++1z } .-1 }\n+  D d3 { 9 };\t\t// { dg-error \"cannot convert 'int' to 'D' in initialization\" \"\" { target c++14_down } }\n+  D d4 { l };\t\t// { dg-error \"cannot convert 'long int' to 'D' in initialization\" \"\" { target c++14_down } }\n   D d5 { D(l) };\n-  D d6 { G };\t\t// { dg-error \"cannot convert 'A {enum}' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-  E e1 { 5 };\t\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  E e2 { -1 };\t\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  D d6 { G };\t\t// { dg-error \"cannot convert 'A' to 'D' in initialization\" \"\" { target c++14_down } }\n+  E e1 { 5 };\t\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n+  E e2 { -1 };\t\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '-1' from 'int' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  E e3 { 5.0 };\t\t// { dg-error \"cannot convert 'double' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  E e3 { 5.0 };\t\t// { dg-error \"cannot convert 'double' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.0e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  E e4 { 5.2 };\t\t// { dg-error \"cannot convert 'double' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  E e4 { 5.2 };\t\t// { dg-error \"cannot convert 'double' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.\\[0-9]*e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  B b2 = { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" }\n-  C c2 = { C { 8 } };\t// { dg-error \"cannot convert 'int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n+  B b2 = { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" }\n+  C c2 = { C { 8 } };\t// { dg-error \"cannot convert 'int' to 'C' in initialization\" \"\" { target c++14_down } }\n \n-  D *d7 = new D { 9 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-  E *e5 = new E { -4 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  D *d7 = new D { 9 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D' in initialization\" \"\" { target c++14_down } }\n+  E *e5 = new E { -4 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '-4' from 'int' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  bar ({ 10 });\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' for argument\" }\n-  bar (E { 9 });\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  V v1 = { { 11 } };\t// { dg-error \"braces around scalar initializer for type 'E {enum}'\" }\n-  V v2 = { E { 12 } };\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  V v3 = { E { 5.0 } };\t// { dg-error \"cannot convert 'double' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  bar ({ 10 });\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' for argument\" }\n+  bar (E { 9 });\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n+  V v1 = { { 11 } };\t// { dg-error \"braces around scalar initializer for type 'E'\" }\n+  V v2 = { E { 12 } };\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n+  V v3 = { E { 5.0 } };\t// { dg-error \"cannot convert 'double' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.0e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  V v4 = { 13 };\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" }\n-  if (B b3 { 5 })\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } }\n+  V v4 = { 13 };\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" }\n+  if (B b3 { 5 })\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } }\n     ;\n-  if (B b4 { 4.0 })\t// { dg-error \"cannot convert 'double' to 'B {enum}' in initialization\" \"\" { target c++14_down } }\n+  if (B b4 { 4.0 })\t// { dg-error \"cannot convert 'double' to 'B' in initialization\" \"\" { target c++14_down } }\n     ;\t\t\t// { dg-error \"narrowing conversion of '4.0e.0' from 'double' to 'short int' inside\" \"\" { target c++1z } .-1 }\n-  C c3 { 8L };\t\t// { dg-error \"cannot convert 'long int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n-  B b4 {short (c + 5)};\t// { dg-error \"invalid conversion from 'short int' to 'B {enum}'\" \"\" { target c++14_down } }\n-  B b5 {c + 5};\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } }\n+  C c3 { 8L };\t\t// { dg-error \"cannot convert 'long int' to 'C' in initialization\" \"\" { target c++14_down } }\n+  B b4 {short (c + 5)};\t// { dg-error \"invalid conversion from 'short int' to 'B'\" \"\" { target c++14_down } }\n+  B b5 {c + 5};\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of \\[^\\n\\r]* from 'int' to 'short int' inside\" \"\" { target c++1z } .-1 }\n-  C c4 { ll };\t\t// { dg-error \"cannot convert 'long long int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n+  C c4 { ll };\t\t// { dg-error \"cannot convert 'long long int' to 'C' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of 'll' from 'long long int' to 'int' inside\" \"\" { target c++1z } .-1 }\n-  C c5 {short (c + 5)};\t// { dg-error \"cannot convert 'short int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n-  C c6 {c + 5};\t\t// { dg-error \"cannot convert 'int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n+  C c5 {short (c + 5)};\t// { dg-error \"cannot convert 'short int' to 'C' in initialization\" \"\" { target c++14_down } }\n+  C c6 {c + 5};\t\t// { dg-error \"cannot convert 'int' to 'C' in initialization\" \"\" { target c++14_down } }\n }\n \n struct U\n {\n-  U () : e { 5 } {}\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  U (int) : e { 5.0 } {}// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  U () : e { 5 } {}\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' in initialization\" \"\" { target c++14_down } }\n+  U (int) : e { 5.0 } {}// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.0e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n   U (float) : e({ 6 }) {}// { dg-error \"list-initializer for non-class type must not be parenthesized\" }\n-\t\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' in initialization\" \"\" { target *-*-* } .-1 }\n+\t\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' in initialization\" \"\" { target *-*-* } .-1 }\n   E e;\n };\n \n struct W\n {\n-  A a { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A {enum}'\" }\n-  B b { 6 };\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } }\n-  C c { 3.0f };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n+  A a { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A'\" }\n+  B b { 6 };\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } }\n+  C c { 3.0f };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'C' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '3.0e.0f' from 'float' to 'int' inside\" \"\" { target c++1z } .-1 }\n-  D d = { 7 };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D {enum}' in initialization\" }\n+  D d = { 7 };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D' in initialization\" }\n };\n \n template <int N>\n void\n foo2 ()\n {\n-  A a1 { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A {enum}'\" }\n-  B b1 { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } }\n+  A a1 { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A'\" }\n+  B b1 { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } }\n   C c1 { s };\n-  D d1 { D(t) };\t// { dg-error \"invalid cast from type 'T' to type 'D {enum}'\" }\n-  D d2 { t };\t\t// { dg-error \"cannot convert 'T' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-\t\t\t// { dg-error \"invalid cast from type 'T' to type 'D {enum}'\" \"\" { target c++1z } .-1 }\n-  D d3 { 9 };\t\t// { dg-error \"cannot convert 'int' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-  D d4 { l };\t\t// { dg-error \"cannot convert 'long int' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n+  D d1 { D(t) };\t// { dg-error \"invalid cast from type 'T' to type 'D'\" }\n+  D d2 { t };\t\t// { dg-error \"cannot convert 'T' to 'D' in initialization\" \"\" { target c++14_down } }\n+\t\t\t// { dg-error \"invalid cast from type 'T' to type 'D'\" \"\" { target c++1z } .-1 }\n+  D d3 { 9 };\t\t// { dg-error \"cannot convert 'int' to 'D' in initialization\" \"\" { target c++14_down } }\n+  D d4 { l };\t\t// { dg-error \"cannot convert 'long int' to 'D' in initialization\" \"\" { target c++14_down } }\n   D d5 { D(l) };\n-  D d6 { G };\t\t// { dg-error \"cannot convert 'A {enum}' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-  E e1 { 5 };\t\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  E e2 { -1 };\t\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  D d6 { G };\t\t// { dg-error \"cannot convert 'A' to 'D' in initialization\" \"\" { target c++14_down } }\n+  E e1 { 5 };\t\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n+  E e2 { -1 };\t\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '-1' from 'int' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  E e3 { 5.0 };\t\t// { dg-error \"cannot convert 'double' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  E e3 { 5.0 };\t\t// { dg-error \"cannot convert 'double' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.0e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  E e4 { 5.2 };\t\t// { dg-error \"cannot convert 'double' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  E e4 { 5.2 };\t\t// { dg-error \"cannot convert 'double' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.\\[0-9]*e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  B b2 = { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" }\n-  C c2 = { C { 8 } };\t// { dg-error \"cannot convert 'int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n-  D *d7 = new D { 9 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-  E *e5 = new E { -4 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  B b2 = { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" }\n+  C c2 = { C { 8 } };\t// { dg-error \"cannot convert 'int' to 'C' in initialization\" \"\" { target c++14_down } }\n+  D *d7 = new D { 9 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D' in initialization\" \"\" { target c++14_down } }\n+  E *e5 = new E { -4 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '-4' from 'int' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  bar ({ 10 });\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' for argument\" }\n-  bar (E { 9 });\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  V v1 = { { 11 } };\t// { dg-error \"braces around scalar initializer for type 'E {enum}'\" }\n-  V v2 = { E { 12 } };\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  V v3 = { E { 5.0 } };\t// { dg-error \"cannot convert 'double' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  bar ({ 10 });\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' for argument\" }\n+  bar (E { 9 });\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n+  V v1 = { { 11 } };\t// { dg-error \"braces around scalar initializer for type 'E'\" }\n+  V v2 = { E { 12 } };\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n+  V v3 = { E { 5.0 } };\t// { dg-error \"cannot convert 'double' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.0e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  V v4 = { 13 };\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" }\n-  if (B b3 { 5 })\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } }\n+  V v4 = { 13 };\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" }\n+  if (B b3 { 5 })\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } }\n     ;\n-  if (B b4 { 4.0 })\t// { dg-error \"cannot convert 'double' to 'B {enum}' in initialization\" \"\" { target c++14_down } }\n+  if (B b4 { 4.0 })\t// { dg-error \"cannot convert 'double' to 'B' in initialization\" \"\" { target c++14_down } }\n     ;\t\t\t// { dg-error \"narrowing conversion of '4.0e.0' from 'double' to 'short int' inside\" \"\" { target c++1z } .-1 }\n-  C c3 { 8L };\t\t// { dg-error \"cannot convert 'long int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n-  B b4 {short (c + 5)};\t// { dg-error \"invalid conversion from 'short int' to 'B {enum}'\" \"\" { target c++14_down } }\n-  B b5 {c + 5};\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } }\n+  C c3 { 8L };\t\t// { dg-error \"cannot convert 'long int' to 'C' in initialization\" \"\" { target c++14_down } }\n+  B b4 {short (c + 5)};\t// { dg-error \"invalid conversion from 'short int' to 'B'\" \"\" { target c++14_down } }\n+  B b5 {c + 5};\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of \\[^\\n\\r]* from 'int' to 'short int' inside\" \"\" { target c++1z } .-1 }\n-  C c4 { ll };\t\t// { dg-error \"cannot convert 'long long int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n+  C c4 { ll };\t\t// { dg-error \"cannot convert 'long long int' to 'C' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of 'll' from 'long long int' to 'int' inside\" \"\" { target c++1z } .-1 }\n-  C c5 {short (c + 5)};\t// { dg-error \"cannot convert 'short int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n-  C c6 {c + 5};\t\t// { dg-error \"cannot convert 'int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n+  C c5 {short (c + 5)};\t// { dg-error \"cannot convert 'short int' to 'C' in initialization\" \"\" { target c++14_down } }\n+  C c6 {c + 5};\t\t// { dg-error \"cannot convert 'int' to 'C' in initialization\" \"\" { target c++14_down } }\n }\n \n template <int N>\n struct U2\n {\n-  U2 () : e { 5 } {}\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  U2 (int) : e { 5.0 } {}// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  U2 () : e { 5 } {}\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' in initialization\" \"\" { target c++14_down } }\n+  U2 (int) : e { 5.0 } {}// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.0e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n   U2 (float) : e({ 6 }) {}\n   E e;\n@@ -140,66 +140,66 @@ struct U2\n template <int N>\n struct W2\n {\n-  A a { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A {enum}'\" \"\" { target *-*-* } .-2 }\n-  B b { 6 };\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } .-3 }\n-  C c { 3.0f };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'C {enum}' in initialization\" \"\" { target c++14_down } .-4 }\n+  A a { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A'\" \"\" { target *-*-* } .-2 }\n+  B b { 6 };\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } .-3 }\n+  C c { 3.0f };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'C' in initialization\" \"\" { target c++14_down } .-4 }\n \t\t\t// { dg-error \"narrowing conversion of '3.0e.0f' from 'float' to 'int' inside\" \"\" { target c++1z } .-5 }\n-  D d = { 7 };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D {enum}' in initialization\" \"\" { target *-*-* } .-6 }\n+  D d = { 7 };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D' in initialization\" \"\" { target *-*-* } .-6 }\n };\n \n template <typename H, typename I, typename J, typename K, typename L, typename M>\n void\n foo3 ()\n {\n   void bar3 (L);\n-  H a1 { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A {enum}'\" }\n-  I b1 { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } }\n+  H a1 { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A'\" }\n+  I b1 { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } }\n   J c1 { s };\n-  K d1 { K(t) };\t// { dg-error \"invalid cast from type 'T' to type 'D {enum}'\" }\n-  K d2 { t };\t\t// { dg-error \"cannot convert 'T' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-\t\t\t// { dg-error \"invalid cast from type 'T' to type 'D {enum}'\" \"\" { target c++1z } .-1 }\n-  K d3 { 9 };\t\t// { dg-error \"cannot convert 'int' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-  K d4 { l };\t\t// { dg-error \"cannot convert 'long int' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n+  K d1 { K(t) };\t// { dg-error \"invalid cast from type 'T' to type 'D'\" }\n+  K d2 { t };\t\t// { dg-error \"cannot convert 'T' to 'D' in initialization\" \"\" { target c++14_down } }\n+\t\t\t// { dg-error \"invalid cast from type 'T' to type 'D'\" \"\" { target c++1z } .-1 }\n+  K d3 { 9 };\t\t// { dg-error \"cannot convert 'int' to 'D' in initialization\" \"\" { target c++14_down } }\n+  K d4 { l };\t\t// { dg-error \"cannot convert 'long int' to 'D' in initialization\" \"\" { target c++14_down } }\n   K d5 { K(l) };\n-  K d6 { G };\t\t// { dg-error \"cannot convert 'A {enum}' to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-  L e1 { 5 };\t\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  L e2 { -1 };\t\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  K d6 { G };\t\t// { dg-error \"cannot convert 'A' to 'D' in initialization\" \"\" { target c++14_down } }\n+  L e1 { 5 };\t\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n+  L e2 { -1 };\t\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '-1' from 'int' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  L e3 { 5.0 };\t\t// { dg-error \"cannot convert 'double' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  L e3 { 5.0 };\t\t// { dg-error \"cannot convert 'double' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.0e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  L e4 { 5.2 };\t\t// { dg-error \"cannot convert 'double' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  L e4 { 5.2 };\t\t// { dg-error \"cannot convert 'double' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.\\[0-9]*e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  I b2 = { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" }\n-  J c2 = { J { 8 } };\t// { dg-error \"cannot convert 'int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n-  K *d7 = new K { 9 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D {enum}' in initialization\" \"\" { target c++14_down } }\n-  L *e5 = new L { -4 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  I b2 = { 7 };\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" }\n+  J c2 = { J { 8 } };\t// { dg-error \"cannot convert 'int' to 'C' in initialization\" \"\" { target c++14_down } }\n+  K *d7 = new K { 9 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D' in initialization\" \"\" { target c++14_down } }\n+  L *e5 = new L { -4 };\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '-4' from 'int' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  bar3 ({ 10 });\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' for argument\" }\n-  bar3 (E { 9 });\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  M v1 = { { 11 } };\t// { dg-error \"braces around scalar initializer for type 'E {enum}'\" }\n-  M v2 = { L { 12 } };\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  M v3 = { L { 5.0 } };\t// { dg-error \"cannot convert 'double' to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  bar3 ({ 10 });\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' for argument\" }\n+  bar3 (E { 9 });\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n+  M v1 = { { 11 } };\t// { dg-error \"braces around scalar initializer for type 'E'\" }\n+  M v2 = { L { 12 } };\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" \"\" { target c++14_down } }\n+  M v3 = { L { 5.0 } };\t// { dg-error \"cannot convert 'double' to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.0e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n-  M v4 = { 13 };\t// { dg-error \"cannot convert 'int' to 'E {enum}' in initialization\" }\n-  if (I b3 { 5 })\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } }\n+  M v4 = { 13 };\t// { dg-error \"cannot convert 'int' to 'E' in initialization\" }\n+  if (I b3 { 5 })\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } }\n     ;\n-  if (I b4 { 4.0 })\t// { dg-error \"cannot convert 'double' to 'B {enum}' in initialization\" \"\" { target c++14_down } }\n+  if (I b4 { 4.0 })\t// { dg-error \"cannot convert 'double' to 'B' in initialization\" \"\" { target c++14_down } }\n     ;\t\t\t// { dg-error \"narrowing conversion of '4.0e.0' from 'double' to 'short int' inside\" \"\" { target c++1z } .-1 }\n-  J c3 { 8L };\t\t// { dg-error \"cannot convert 'long int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n-  I b4 {short (c + 5)};\t// { dg-error \"invalid conversion from 'short int' to 'B {enum}'\" \"\" { target c++14_down } }\n-  I b5 {c + 5};\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } }\n+  J c3 { 8L };\t\t// { dg-error \"cannot convert 'long int' to 'C' in initialization\" \"\" { target c++14_down } }\n+  I b4 {short (c + 5)};\t// { dg-error \"invalid conversion from 'short int' to 'B'\" \"\" { target c++14_down } }\n+  I b5 {c + 5};\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of \\[^\\n\\r]* from 'int' to 'short int' inside\" \"\" { target c++1z } .-1 }\n-  J c4 { ll };\t\t// { dg-error \"cannot convert 'long long int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n+  J c4 { ll };\t\t// { dg-error \"cannot convert 'long long int' to 'C' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of 'll' from 'long long int' to 'int' inside\" \"\" { target c++1z } .-1 }\n-  J c5 {short (c + 5)};\t// { dg-error \"cannot convert 'short int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n-  J c6 {c + 5};\t\t// { dg-error \"cannot convert 'int' to 'C {enum}' in initialization\" \"\" { target c++14_down } }\n+  J c5 {short (c + 5)};\t// { dg-error \"cannot convert 'short int' to 'C' in initialization\" \"\" { target c++14_down } }\n+  J c6 {c + 5};\t\t// { dg-error \"cannot convert 'int' to 'C' in initialization\" \"\" { target c++14_down } }\n }\n \n template <typename L>\n struct U3\n {\n-  U3 () : e { 5 } {}\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n-  U3 (int) : e { 5.0 } {}// { dg-error \"cannot convert \\[^\\n\\r]* to 'E {enum}' in initialization\" \"\" { target c++14_down } }\n+  U3 () : e { 5 } {}\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' in initialization\" \"\" { target c++14_down } }\n+  U3 (int) : e { 5.0 } {}// { dg-error \"cannot convert \\[^\\n\\r]* to 'E' in initialization\" \"\" { target c++14_down } }\n \t\t\t// { dg-error \"narrowing conversion of '5.0e.0' from 'double' to 'unsigned char' inside\" \"\" { target c++1z } .-1 }\n   U3 (float) : e({ 6 }) {}\n   L e;\n@@ -208,11 +208,11 @@ struct U3\n template <typename H, typename I, typename J, typename K>\n struct W3\n {\n-  H a { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A {enum}'\" \"\" { target *-*-* } .-2 }\n-  I b { 6 };\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } .-3 }\n-  J c { 3.0f };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'C {enum}' in initialization\" \"\" { target c++14_down } .-4 }\n+  H a { 5 };\t\t// { dg-error \"invalid conversion from 'int' to 'A'\" \"\" { target *-*-* } .-2 }\n+  I b { 6 };\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } .-3 }\n+  J c { 3.0f };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'C' in initialization\" \"\" { target c++14_down } .-4 }\n \t\t\t// { dg-error \"narrowing conversion of '3.0e.0f' from 'float' to 'int' inside\" \"\" { target c++1z } .-5 }\n-  K d = { 7 };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D {enum}' in initialization\" \"\" { target *-*-* } .-6 }\n+  K d = { 7 };\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D' in initialization\" \"\" { target *-*-* } .-6 }\n };\n \n void\n@@ -221,17 +221,17 @@ test ()\n   foo2<0> ();\n   U2<0> u20;\n   U2<1> u21 (5);\n-  W2<0> w2;\t\t// { dg-error \"invalid conversion from 'int' to 'A {enum}'\" }\n-\t\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } .-1 }\n-\t\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'C {enum}' in initialization\" \"\" { target c++14_down } .-2 }\n+  W2<0> w2;\t\t// { dg-error \"invalid conversion from 'int' to 'A'\" }\n+\t\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } .-1 }\n+\t\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'C' in initialization\" \"\" { target c++14_down } .-2 }\n \t\t\t// { dg-error \"narrowing conversion of '3.0e.0f' from 'float' to 'int' inside\" \"\" { target c++1z } .-3 }\n-\t\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D {enum}' in initialization\" \"\" { target *-*-* } .-4 }\n+\t\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D' in initialization\" \"\" { target *-*-* } .-4 }\n   foo3<A, B, C, D, E, V> ();\n   U3<E> u30;\n   U3<E> u31 (5);\n-  W3<A, B, C, D> w3;\t// { dg-error \"invalid conversion from 'int' to 'A {enum}'\" }\n-\t\t\t// { dg-error \"invalid conversion from 'int' to 'B {enum}'\" \"\" { target c++14_down } .-1 }\n-\t\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'C {enum}' in initialization\" \"\" { target c++14_down } .-2 }\n+  W3<A, B, C, D> w3;\t// { dg-error \"invalid conversion from 'int' to 'A'\" }\n+\t\t\t// { dg-error \"invalid conversion from 'int' to 'B'\" \"\" { target c++14_down } .-1 }\n+\t\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'C' in initialization\" \"\" { target c++14_down } .-2 }\n \t\t\t// { dg-error \"narrowing conversion of '3.0e.0f' from 'float' to 'int' inside\" \"\" { target c++1z } .-3 }\n-\t\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D {enum}' in initialization\" \"\" { target *-*-* } .-4 }\n+\t\t\t// { dg-error \"cannot convert \\[^\\n\\r]* to 'D' in initialization\" \"\" { target *-*-* } .-4 }\n }"}, {"sha": "f95bf8b92d90b9f6cfd2eeb1bdb469e46403dc30", "filename": "gcc/testsuite/g++.dg/warn/pr12242.C", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a160ed77772d3bcedeff134598b42b2eb907d9a8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr12242.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a160ed77772d3bcedeff134598b42b2eb907d9a8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr12242.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr12242.C?ref=a160ed77772d3bcedeff134598b42b2eb907d9a8", "patch": "@@ -10,14 +10,14 @@ void example ()\n   X x;\n   Y y;\n   \n-  x = 10;  // { dg-warning \"invalid conversion from .int. to .X {enum}.\" \"invalid\" }\n+  x = 10;  // { dg-warning \"invalid conversion from .int. to .X.\" \"invalid\" }\n            // { dg-warning \"unspecified\" \"unspecified\" { target *-*-* } .-1 }\n-  x = 1;   // { dg-warning \"invalid conversion from .int. to .X {enum}.\" }\n-  x = C;   // { dg-error \"cannot convert .Y {enum}. to .X {enum}. in assignment\" }  \n-  x = D;   // { dg-error \"cannot convert .Y {enum}. to .X {enum}. in assignment\" }  \n-  y = A;   // { dg-error \"cannot convert .X {enum}. to .Y {enum}. in assignment\" }  \n-  x = y;   // { dg-error \"cannot convert .Y {enum}. to .X {enum}. in assignment\" }  \n-  x = i;   // { dg-warning \"invalid conversion from .int. to .X {enum}.\"  }\n+  x = 1;   // { dg-warning \"invalid conversion from .int. to .X.\" }\n+  x = C;   // { dg-error \"cannot convert .Y. to .X. in assignment\" }  \n+  x = D;   // { dg-error \"cannot convert .Y. to .X. in assignment\" }  \n+  y = A;   // { dg-error \"cannot convert .X. to .Y. in assignment\" }  \n+  x = y;   // { dg-error \"cannot convert .Y. to .X. in assignment\" }  \n+  x = i;   // { dg-warning \"invalid conversion from .int. to .X.\"  }\n }\n \n void foo () "}]}