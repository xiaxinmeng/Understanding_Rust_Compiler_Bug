{"sha": "45a454883eef8acbdad75c0f376aaf22ec7416ff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDVhNDU0ODgzZWVmOGFjYmRhZDc1YzBmMzc2YWFmMjJlYzc0MTZmZg==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds_cb1@t-online.de", "date": "2019-11-27T13:07:44Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2019-11-27T13:07:44Z"}, "message": "m68k.c (m68k_output_compare_fp): Restore differences between Coldfire and regular m68k.\n\n\t* config/m68k/m68k.c (m68k_output_compare_fp): Restore differences\n\tbetween Coldfire and regular m68k.\n\t* config/m68k/m68k.md (cmp1_cf_constraints): Disallow constants.\n\nFrom-SVN: r278767", "tree": {"sha": "e610654a4b299c4860a0036993618cc6d4007c4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e610654a4b299c4860a0036993618cc6d4007c4c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/45a454883eef8acbdad75c0f376aaf22ec7416ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45a454883eef8acbdad75c0f376aaf22ec7416ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45a454883eef8acbdad75c0f376aaf22ec7416ff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45a454883eef8acbdad75c0f376aaf22ec7416ff/comments", "author": {"login": "bernds", "id": 92527, "node_id": "MDQ6VXNlcjkyNTI3", "avatar_url": "https://avatars.githubusercontent.com/u/92527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bernds", "html_url": "https://github.com/bernds", "followers_url": "https://api.github.com/users/bernds/followers", "following_url": "https://api.github.com/users/bernds/following{/other_user}", "gists_url": "https://api.github.com/users/bernds/gists{/gist_id}", "starred_url": "https://api.github.com/users/bernds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bernds/subscriptions", "organizations_url": "https://api.github.com/users/bernds/orgs", "repos_url": "https://api.github.com/users/bernds/repos", "events_url": "https://api.github.com/users/bernds/events{/privacy}", "received_events_url": "https://api.github.com/users/bernds/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "477daf831aea18923733772d686eb1ed448d96e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/477daf831aea18923733772d686eb1ed448d96e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/477daf831aea18923733772d686eb1ed448d96e7"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "9899c377305a3742031308fb9fe1e994d5a461d0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45a454883eef8acbdad75c0f376aaf22ec7416ff/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45a454883eef8acbdad75c0f376aaf22ec7416ff/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=45a454883eef8acbdad75c0f376aaf22ec7416ff", "patch": "@@ -1,3 +1,9 @@\n+2019-11-27  Bernd Schmidt  <bernds_cb1@t-online.de>\n+\n+\t* config/m68k/m68k.c (m68k_output_compare_fp): Restore differences\n+\tbetween Coldfire and regular m68k.\n+\t* config/m68k/m68k.md (cmp1_cf_constraints): Disallow constants.\n+\n 2019-11-27  Richard Biener  <rguenther@suse.de>\n \n \t* target.def (TARGET_VECTORIZE_BUILTIN_CONVERSION): Remove."}, {"sha": "4b30c401e80a3bb66f8a53fbc5fd9a0d34e132e8", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45a454883eef8acbdad75c0f376aaf22ec7416ff/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45a454883eef8acbdad75c0f376aaf22ec7416ff/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=45a454883eef8acbdad75c0f376aaf22ec7416ff", "patch": "@@ -4501,7 +4501,12 @@ m68k_output_compare_fp (rtx op0, rtx op1, rtx_code code)\n   if (op1 == CONST0_RTX (GET_MODE (op0)))\n     {\n       if (FP_REG_P (op0))\n-\toutput_asm_insn (\"ftst%.x %0\", ops);\n+\t{\n+\t  if (TARGET_COLDFIRE_FPU)\n+\t    output_asm_insn (\"ftst%.d %0\", ops);\n+\t  else\n+\t    output_asm_insn (\"ftst%.x %0\", ops);\n+\t}\n       else\n \toutput_asm_insn ((\"ftst%.\" + prec + \" %0\").c_str (), ops);\n       return code;\n@@ -4510,7 +4515,10 @@ m68k_output_compare_fp (rtx op0, rtx op1, rtx_code code)\n   switch (which_alternative)\n     {\n     case 0:\n-      output_asm_insn (\"fcmp%.x %1,%0\", ops);\n+      if (TARGET_COLDFIRE_FPU)\n+\toutput_asm_insn (\"fcmp%.d %1,%0\", ops);\n+      else\n+\toutput_asm_insn (\"fcmp%.x %1,%0\", ops);\n       break;\n     case 1:\n       output_asm_insn ((\"fcmp%.\" + prec + \" %f1,%0\").c_str (), ops);"}, {"sha": "454f822e39259f4c9be987933a1eead1046800a8", "filename": "gcc/config/m68k/m68k.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45a454883eef8acbdad75c0f376aaf22ec7416ff/gcc%2Fconfig%2Fm68k%2Fm68k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45a454883eef8acbdad75c0f376aaf22ec7416ff/gcc%2Fconfig%2Fm68k%2Fm68k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.md?ref=45a454883eef8acbdad75c0f376aaf22ec7416ff", "patch": "@@ -496,7 +496,7 @@\n ;; needs to be reloaded.\n \n (define_mode_attr scc0_cf_constraints [(QI \"=d\") (HI \"=d\") (SI \"=d,d,d\")])\n-(define_mode_attr cmp1_cf_constraints [(QI \"dm\") (HI \"dm\") (SI \"mrKs,r,rm\")])\n+(define_mode_attr cmp1_cf_constraints [(QI \"dm\") (HI \"dm\") (SI \"mr,r,rm\")])\n (define_mode_attr cmp2_cf_constraints [(QI \"C0\") (HI \"C0\") (SI \"r,mrKs,C0\")])\n (define_mode_attr cmp2_cf_predicate [(QI \"const0_operand\") (HI \"const0_operand\") (SI \"general_operand\")])\n "}]}