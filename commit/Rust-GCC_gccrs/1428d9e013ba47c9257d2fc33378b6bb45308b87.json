{"sha": "1428d9e013ba47c9257d2fc33378b6bb45308b87", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQyOGQ5ZTAxM2JhNDdjOTI1N2QyZmMzMzM3OGI2YmI0NTMwOGI4Nw==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2016-05-28T16:20:06Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2016-05-28T16:20:06Z"}, "message": "profile.c (compute_branch_probabilities): Do not report hitrates here.\n\n\n\t* profile.c (compute_branch_probabilities): Do not report hitrates\n\there.\n\t(branch_prob): Report hitrates here.\n\t* predict.c (gimple_predict_edge): Do not assert profile status;\n\tfix formatting issues.\n\nFrom-SVN: r236849", "tree": {"sha": "3904a58f4874d2c80bb097f84fc3add4d47eb015", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3904a58f4874d2c80bb097f84fc3add4d47eb015"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1428d9e013ba47c9257d2fc33378b6bb45308b87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1428d9e013ba47c9257d2fc33378b6bb45308b87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1428d9e013ba47c9257d2fc33378b6bb45308b87", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1428d9e013ba47c9257d2fc33378b6bb45308b87/comments", "author": null, "committer": null, "parents": [{"sha": "5aabc487d3bd2d6c973c0b18edba58267b623c3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5aabc487d3bd2d6c973c0b18edba58267b623c3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5aabc487d3bd2d6c973c0b18edba58267b623c3d"}], "stats": {"total": 20, "additions": 14, "deletions": 6}, "files": [{"sha": "385674508dff07f60ebcdae6ed9a22b3cd39c586", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1428d9e013ba47c9257d2fc33378b6bb45308b87/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1428d9e013ba47c9257d2fc33378b6bb45308b87/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1428d9e013ba47c9257d2fc33378b6bb45308b87", "patch": "@@ -1,3 +1,11 @@\n+2016-05-27  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* profile.c (compute_branch_probabilities): Do not report hitrates\n+\there.\n+\t(branch_prob): Report hitrates here.\n+\t* predict.c (gimple_predict_edge): Do not assert profile status;\n+\tfix formatting issues.\n+\n 2016-05-27  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* predict.c (edge_predicted_by_p): New function."}, {"sha": "3743b0107a603656cd425af0a4f6ef3dbc77b198", "filename": "gcc/predict.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1428d9e013ba47c9257d2fc33378b6bb45308b87/gcc%2Fpredict.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1428d9e013ba47c9257d2fc33378b6bb45308b87/gcc%2Fpredict.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpredict.c?ref=1428d9e013ba47c9257d2fc33378b6bb45308b87", "patch": "@@ -593,10 +593,10 @@ rtl_predict_edge (edge e, enum br_predictor predictor, int probability)\n void\n gimple_predict_edge (edge e, enum br_predictor predictor, int probability)\n {\n-  gcc_assert (profile_status_for_fn (cfun) != PROFILE_GUESSED);\n-  if ((e->src != ENTRY_BLOCK_PTR_FOR_FN (cfun) && EDGE_COUNT (e->src->succs) >\n-       1)\n-      && flag_guess_branch_prob && optimize)\n+  if (e->src != ENTRY_BLOCK_PTR_FOR_FN (cfun)\n+      && EDGE_COUNT (e->src->succs) > 1\n+      && flag_guess_branch_prob\n+      && optimize)\n     {\n       struct edge_prediction *i = XNEW (struct edge_prediction);\n       edge_prediction *&preds = bb_predictions->get_or_insert (e->src);"}, {"sha": "007379baa13ce046a6e2e42d060ff5e06c198f40", "filename": "gcc/profile.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1428d9e013ba47c9257d2fc33378b6bb45308b87/gcc%2Fprofile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1428d9e013ba47c9257d2fc33378b6bb45308b87/gcc%2Fprofile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprofile.c?ref=1428d9e013ba47c9257d2fc33378b6bb45308b87", "patch": "@@ -845,8 +845,6 @@ compute_branch_probabilities (unsigned cfg_checksum, unsigned lineno_checksum)\n       fputc ('\\n', dump_file);\n       fputc ('\\n', dump_file);\n     }\n-  if (dump_file && (dump_flags & TDF_DETAILS))\n-    report_predictor_hitrates ();\n \n   free_aux_for_blocks ();\n }\n@@ -1331,6 +1329,8 @@ branch_prob (void)\n   values.release ();\n   free_edge_list (el);\n   coverage_end_function (lineno_checksum, cfg_checksum);\n+  if (dump_file && (dump_flags & TDF_DETAILS))\n+    report_predictor_hitrates ();\n }\n \f\n /* Union find algorithm implementation for the basic blocks using"}]}