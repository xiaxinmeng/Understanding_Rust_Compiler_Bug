{"sha": "64a438d6c48d51bcec23857fa65a0d4adc0cf44a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjRhNDM4ZDZjNDhkNTFiY2VjMjM4NTdmYTY1YTBkNGFkYzBjZjQ0YQ==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1998-01-30T08:08:31Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-01-30T08:08:31Z"}, "message": "configure.in: Check for declaration of abort.\n\n        * configure.in: Check for declaration of abort.\n\t* acconfig.h: Corresponding changes.\n        * toplev.c: Use NEED_DECLARATION_ABORT to determine if abort should\n        be declared.\n\nFrom-SVN: r17556", "tree": {"sha": "498aefa7f0cda7c48f4d15716616ac18014c9e6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/498aefa7f0cda7c48f4d15716616ac18014c9e6b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/64a438d6c48d51bcec23857fa65a0d4adc0cf44a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64a438d6c48d51bcec23857fa65a0d4adc0cf44a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64a438d6c48d51bcec23857fa65a0d4adc0cf44a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/comments", "author": null, "committer": null, "parents": [{"sha": "c5afbb49078b47f3efdeb5382c2e849abb527c94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5afbb49078b47f3efdeb5382c2e849abb527c94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5afbb49078b47f3efdeb5382c2e849abb527c94"}], "stats": {"total": 80, "additions": 74, "deletions": 6}, "files": [{"sha": "7a0d8b390acf7d6213ae3bed48f90ae5c3b98aba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=64a438d6c48d51bcec23857fa65a0d4adc0cf44a", "patch": "@@ -1,3 +1,9 @@\n+Fri Jan 30 09:08:16 1998  Jeffrey A Law  (law@cygnus.com)\n+\n+\t* configure.in: Check for declaration of abort.\n+\t* toplev.c: Use NEED_DECLARATION_ABORT to determine if abort should\n+\tbe declared.\n+\n Thu Jan 29 20:26:12 1998  Jeffrey A Law  (law@cygnus.com)\n \n \t* genattrtab.c (optimize): Define in case PRESERVE_DEATH_INFO_REGNO_P"}, {"sha": "b1640d854734ff7bdcb1494465a9b2bec3716d8e", "filename": "gcc/acconfig.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2Facconfig.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2Facconfig.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Facconfig.h?ref=64a438d6c48d51bcec23857fa65a0d4adc0cf44a", "patch": "@@ -30,4 +30,7 @@\n \n /* Whether sbrk must be declared even if <unistd.h> is included.  */\n #undef NEED_DECLARATION_SBRK\n+\n+/* Whether abort must be declared even if <stdlib.h> is included.  */\n+#undef NEED_DECLARATION_ABORT\n @TOP@"}, {"sha": "739c5be9b56176c457b9c9311791b6ab43c1b13b", "filename": "gcc/config.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=64a438d6c48d51bcec23857fa65a0d4adc0cf44a", "patch": "@@ -32,6 +32,9 @@\n /* Whether sbrk must be declared even if <unistd.h> is included.  */\n #undef NEED_DECLARATION_SBRK\n \n+/* Whether abort must be declared even if <stdlib.h> is included.  */\n+#undef NEED_DECLARATION_ABORT\n+\n /* Define if you have the ANSI C header files.  */\n #undef STDC_HEADERS\n "}, {"sha": "f5c166b4f10cb94af9a5191eb42959acd7998c97", "filename": "gcc/configure", "status": "modified", "additions": 57, "deletions": 3, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=64a438d6c48d51bcec23857fa65a0d4adc0cf44a", "patch": "@@ -3228,14 +3228,68 @@ EOF\n \n fi\n \n+echo $ac_n \"checking whether abort must be declared\"\"... $ac_c\" 1>&6\n+echo \"configure:3233: checking whether abort must be declared\" >&5\n+if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_abort'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 3238 \"configure\"\n+#include \"confdefs.h\"\n+\n+#include <stdio.h>\n+#ifdef HAVE_STRING_H\n+#include <string.h>\n+#else\n+#ifdef HAVE_STRINGS_H\n+#include <strings.h>\n+#endif\n+#endif\n+#ifdef HAVE_STDLIB_H\n+#include <stdlib.h>\n+#endif\n+#ifdef HAVE_UNISTD_H\n+#include <unistd.h>\n+#endif\n+#ifndef HAVE_RINDEX\n+#define rindex strrchr\n+#endif\n+#ifndef HAVE_INDEX\n+#define index strchr\n+#endif\n+int main() {\n+char *(*pfn) = (char *(*)) abort\n+; return 0; }\n+EOF\n+if { (eval echo configure:3265: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  gcc_cv_decl_needed_abort=no\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  gcc_cv_decl_needed_abort=yes\n+fi\n+rm -f conftest*\n+fi\n+\n+echo \"$ac_t\"\"$gcc_cv_decl_needed_abort\" 1>&6\n+if test $gcc_cv_decl_needed_abort = yes; then\n+  gcc_tr_decl=NEED_DECLARATION_`echo abort | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n+  cat >> confdefs.h <<EOF\n+#define $gcc_tr_decl 1\n+EOF\n+\n+fi\n+\n \n echo $ac_n \"checking for sys_siglist declaration in signal.h or unistd.h\"\"... $ac_c\" 1>&6\n-echo \"configure:3234: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n+echo \"configure:3288: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_decl_sys_siglist'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3239 \"configure\"\n+#line 3293 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <signal.h>\n@@ -3247,7 +3301,7 @@ int main() {\n char *msg = *(sys_siglist + 1);\n ; return 0; }\n EOF\n-if { (eval echo configure:3251: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3305: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_decl_sys_siglist=yes\n else"}, {"sha": "e7314cdad15aa638e70a49a3ffa7955df524e4b7", "filename": "gcc/configure.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=64a438d6c48d51bcec23857fa65a0d4adc0cf44a", "patch": "@@ -203,6 +203,7 @@ GCC_NEED_DECLARATION(rindex)\n GCC_NEED_DECLARATION(getenv)\n GCC_NEED_DECLARATION(atol)\n GCC_NEED_DECLARATION(sbrk)\n+GCC_NEED_DECLARATION(abort)\n \n AC_DECL_SYS_SIGLIST\n "}, {"sha": "5ed2edda59088661efce0da13507833103b5fe63", "filename": "gcc/toplev.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64a438d6c48d51bcec23857fa65a0d4adc0cf44a/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=64a438d6c48d51bcec23857fa65a0d4adc0cf44a", "patch": "@@ -192,9 +192,6 @@ void pedwarn_with_file_and_line PVPROTO((char *file, int line, char *s, ...));\n void sorry PVPROTO((char *s, ...));\n void really_sorry PVPROTO((char *s, ...));\n void fancy_abort ();\n-#ifndef abort\n-void abort ();\n-#endif\n void set_target_switch ();\n static char *decl_name ();\n \n@@ -204,6 +201,10 @@ void print_switch_values ();\n /* Length of line when printing switch values.  */\n #define MAX_LINE 75\n \n+#ifdef NEED_DECLARATION_ABORT\n+void abort ();\n+#endif\n+\n #ifdef NEED_DECLARATION_SBRK\n extern char *sbrk ();\n #endif"}]}