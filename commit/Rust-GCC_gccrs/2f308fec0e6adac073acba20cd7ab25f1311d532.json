{"sha": "2f308fec0e6adac073acba20cd7ab25f1311d532", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmYzMDhmZWMwZTZhZGFjMDczYWNiYTIwY2Q3YWIyNWYxMzExZDUzMg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1997-10-07T16:53:16Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1997-10-07T16:53:16Z"}, "message": "haifa-sched.c (print_block_visualization): Call fprintf directly, don't sprintf through an alloca'ed buffer.\n\n        * haifa-sched.c (print_block_visualization): Call fprintf directly,\n        don't sprintf through an alloca'ed buffer.\n\nFrom-SVN: r15859", "tree": {"sha": "34c660ea7f80f1d290e2769541ee6755017ad05b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/34c660ea7f80f1d290e2769541ee6755017ad05b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2f308fec0e6adac073acba20cd7ab25f1311d532", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f308fec0e6adac073acba20cd7ab25f1311d532", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f308fec0e6adac073acba20cd7ab25f1311d532", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f308fec0e6adac073acba20cd7ab25f1311d532/comments", "author": null, "committer": null, "parents": [{"sha": "43984e29698927b45fc1bafd4bc716d010f890a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43984e29698927b45fc1bafd4bc716d010f890a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/43984e29698927b45fc1bafd4bc716d010f890a2"}], "stats": {"total": 28, "additions": 15, "deletions": 13}, "files": [{"sha": "d6f258bdc0787462041d390c31624a4cf2e83ae6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f308fec0e6adac073acba20cd7ab25f1311d532/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f308fec0e6adac073acba20cd7ab25f1311d532/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2f308fec0e6adac073acba20cd7ab25f1311d532", "patch": "@@ -1,3 +1,8 @@\n+Tue Oct  7 10:55:34 1997  Richard Henderson  <rth@cygnus.com>\n+\n+\t* haifa-sched.c (print_block_visualization): Call fprintf directly,\n+\tdon't sprintf through an alloca'ed buffer.\n+\n Tue Oct  7 10:52:29 1997  Thomas Koenig (ig25@rz.uni-karlsruhe.de)\n \n \t* reload.c (decompose): Always initialize val.base."}, {"sha": "59a1190ccb044b2e418c36e387b359a64d2d42eb", "filename": "gcc/haifa-sched.c", "status": "modified", "additions": 10, "deletions": 13, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f308fec0e6adac073acba20cd7ab25f1311d532/gcc%2Fhaifa-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f308fec0e6adac073acba20cd7ab25f1311d532/gcc%2Fhaifa-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhaifa-sched.c?ref=2f308fec0e6adac073acba20cd7ab25f1311d532", "patch": "@@ -6329,27 +6329,24 @@ print_block_visualization (b, s)\n      char *s;\n {\n   int unit, i;\n-  char *names;\t\t\t/* names of units */\n-  char *delim;\t\t\t/* separation line */\n \n   /* print header */\n   fprintf (dump, \"\\n;;   ==================== scheduling visualization for block %d %s \\n\", b, s);\n \n   /* Print names of units */\n-  names = (char *) alloca (256);\n-  delim = (char *) alloca (256);\n-  sprintf (names, \";;   %-8s\", \"clock\");\n-  sprintf (delim, \";;   %-8s\", \"=====\");\n+  fprintf (dump, \";;   %-8s\", \"clock\");\n   for (unit = 0; unit < FUNCTION_UNITS_SIZE; unit++)\n     if (function_units[unit].bitmask & target_units)\n       for (i = 0; i < function_units[unit].multiplicity; i++)\n-\t{\n-\t  sprintf (names + strlen (names), \"  %-33s\", function_units[unit].name);\n-\t  sprintf (delim + strlen (delim), \"  %-33s\", \"==============================\");\n-\t}\n-  sprintf (names + strlen (names), \"  %-8s\", \"no-unit\");\n-  sprintf (delim + strlen (delim), \"  %-8s\", \"=======\");\n-  fprintf (dump, \"\\n%s\\n%s\\n\", names, delim);\n+\tfprintf (dump, \"  %-33s\", function_units[unit].name);\n+  fprintf (dump, \"  %-8s\\n\", \"no-unit\");\n+\n+  fprintf (dump, \";;   %-8s\", \"=====\");\n+  for (unit = 0; unit < FUNCTION_UNITS_SIZE; unit++)\n+    if (function_units[unit].bitmask & target_units)\n+      for (i = 0; i < function_units[unit].multiplicity; i++)\n+\tfprintf (dump, \"  %-33s\", \"==============================\");\n+  fprintf (dump, \"  %-8s\\n\", \"=======\");\n \n   /* Print insns in each cycle */\n   fprintf (dump, \"%s\\n\", visual_tbl);"}]}