{"sha": "db3ef87b8a1858f77998a9e8a5275cc5755350d7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGIzZWY4N2I4YTE4NThmNzc5OThhOWU4YTUyNzVjYzU3NTUzNTBkNw==", "commit": {"author": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@users.sourceforge.net", "date": "2001-07-26T12:48:01Z"}, "committer": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@gcc.gnu.org", "date": "2001-07-26T12:48:01Z"}, "message": "pt.c (tsubst_template_parms): Call maybe_fold_nontype_arg and tsubst_expr for default template arguments.\n\n2001-07-22  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n\n\t* pt.c (tsubst_template_parms): Call maybe_fold_nontype_arg and\n\ttsubst_expr for default template arguments.\n\n2001-07-22  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n\n\t* g++.old-deja/g++.pt/defarg14.C: New test.\n\nFrom-SVN: r44396", "tree": {"sha": "0f0dee1191602d0d5c890d49e73f62752caff763", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f0dee1191602d0d5c890d49e73f62752caff763"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db3ef87b8a1858f77998a9e8a5275cc5755350d7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db3ef87b8a1858f77998a9e8a5275cc5755350d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db3ef87b8a1858f77998a9e8a5275cc5755350d7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db3ef87b8a1858f77998a9e8a5275cc5755350d7/comments", "author": null, "committer": null, "parents": [{"sha": "fa397ddafb335eb0a67b08e014605bf5f9ab7cc5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa397ddafb335eb0a67b08e014605bf5f9ab7cc5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa397ddafb335eb0a67b08e014605bf5f9ab7cc5"}], "stats": {"total": 32, "additions": 30, "deletions": 2}, "files": [{"sha": "756924940da850cb76da3fed4c2877386abf5fd3", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db3ef87b8a1858f77998a9e8a5275cc5755350d7/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db3ef87b8a1858f77998a9e8a5275cc5755350d7/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=db3ef87b8a1858f77998a9e8a5275cc5755350d7", "patch": "@@ -1,3 +1,8 @@\n+2001-07-26  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\t* pt.c (tsubst_template_parms): Call maybe_fold_nontype_arg and\n+\ttsubst_expr for default template arguments.\n+\n 2001-07-26  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* spew.c (yylex): Only copy the token's lineno, if it is"}, {"sha": "1f40089a4b59a3a7fabeed2e83bc8b93c5098919", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db3ef87b8a1858f77998a9e8a5275cc5755350d7/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db3ef87b8a1858f77998a9e8a5275cc5755350d7/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=db3ef87b8a1858f77998a9e8a5275cc5755350d7", "patch": "@@ -5377,8 +5377,9 @@ tsubst_template_parms (parms, args, complain)\n \t    TREE_VALUE (TREE_VEC_ELT (TREE_VALUE (parms), i));\n \t  \n \t  TREE_VEC_ELT (new_vec, i)\n-\t    = build_tree_list (tsubst (default_value, args, complain,\n-\t\t\t\t       NULL_TREE), \n+\t    = build_tree_list (maybe_fold_nontype_arg (\n+\t\t\t\t  tsubst_expr (default_value, args, complain,\n+\t\t\t\t\t       NULL_TREE)), \n \t\t\t       tsubst (parm_decl, args, complain,\n \t\t\t\t       NULL_TREE));\n \t}"}, {"sha": "5b9ab08a692eca3052c4bb4e794fd983dfe11d64", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db3ef87b8a1858f77998a9e8a5275cc5755350d7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db3ef87b8a1858f77998a9e8a5275cc5755350d7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=db3ef87b8a1858f77998a9e8a5275cc5755350d7", "patch": "@@ -1,3 +1,7 @@\n+2001-07-26  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\t* g++.old-deja/g++.pt/defarg14.C: New test.\n+\n 2001-07-26  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* g++.old-deja/g++.other/lineno5.C: New test."}, {"sha": "7ae4941791332cae70eddc7cce740840551b5fae", "filename": "gcc/testsuite/g++.old-deja/g++.pt/defarg14.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db3ef87b8a1858f77998a9e8a5275cc5755350d7/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fdefarg14.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db3ef87b8a1858f77998a9e8a5275cc5755350d7/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fdefarg14.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fdefarg14.C?ref=db3ef87b8a1858f77998a9e8a5275cc5755350d7", "patch": "@@ -0,0 +1,18 @@\n+// Build don't link:\n+\n+// Origin: Larry Evans <jcampbell3@prodigy.net>\n+\n+// Bug: enum in default template arguments are not properly handled.\n+\n+enum Enum0 { E0, E1, E2 };\n+enum Enum1 { E3=E2+1, E4=E3+1 };\n+\n+template <Enum0 Out_FARG0> class OutTmpl\n+{\n+  public:\n+    template <Enum0 In_FARG0, Enum1 In_FARG1=E4> class InTmpl\n+    {\n+    };\n+};\n+\n+OutTmpl<E1> m;"}]}