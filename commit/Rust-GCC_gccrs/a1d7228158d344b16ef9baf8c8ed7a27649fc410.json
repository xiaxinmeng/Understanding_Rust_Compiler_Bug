{"sha": "a1d7228158d344b16ef9baf8c8ed7a27649fc410", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTFkNzIyODE1OGQzNDRiMTZlZjliYWY4YzhlZDdhMjc2NDlmYzQxMA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2011-09-26T08:37:32Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-09-26T08:37:32Z"}, "message": "sem_ch6.adb (Set_Formal_Mode): Set Can_Never_Be_Null on an IN or IN OUT formal parameter which is of an...\n\n\t* sem_ch6.adb (Set_Formal_Mode): Set Can_Never_Be_Null on an IN or IN\n\tOUT formal parameter which is of an null-exclusion access subtype.\n\nCo-Authored-By: Robert Dewar <dewar@adacore.com>\n\nFrom-SVN: r179183", "tree": {"sha": "1d6e7e65f276bcee9b39e805d783db259b4fedbd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1d6e7e65f276bcee9b39e805d783db259b4fedbd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a1d7228158d344b16ef9baf8c8ed7a27649fc410", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1d7228158d344b16ef9baf8c8ed7a27649fc410", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1d7228158d344b16ef9baf8c8ed7a27649fc410", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1d7228158d344b16ef9baf8c8ed7a27649fc410/comments", "author": null, "committer": null, "parents": [{"sha": "a1c7d7973c44afbee5e1251b200cc6e7a27409b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1c7d7973c44afbee5e1251b200cc6e7a27409b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1c7d7973c44afbee5e1251b200cc6e7a27409b1"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "b747f8ab2df5f239a5db79ab64ebb6e35154ae39", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1d7228158d344b16ef9baf8c8ed7a27649fc410/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1d7228158d344b16ef9baf8c8ed7a27649fc410/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=a1d7228158d344b16ef9baf8c8ed7a27649fc410", "patch": "@@ -1,3 +1,9 @@\n+2011-09-26  Eric Botcazou  <ebotcazou@adacore.com>\n+\t    Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_ch6.adb (Set_Formal_Mode): Set Can_Never_Be_Null on an IN or IN\n+\tOUT formal parameter which is of an null-exclusion access subtype.\n+\n 2011-09-26  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/ada-tree.h (DECL_CAN_NEVER_BE_NULL_P): New macro."}, {"sha": "a9a45bc6445fe76b44be7e713acc7c578726bb98", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1d7228158d344b16ef9baf8c8ed7a27649fc410/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1d7228158d344b16ef9baf8c8ed7a27649fc410/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=a1d7228158d344b16ef9baf8c8ed7a27649fc410", "patch": "@@ -10267,6 +10267,16 @@ package body Sem_Ch6 is\n         and then Can_Never_Be_Null (Etype (Formal_Id))\n       then\n          Set_Is_Known_Non_Null (Formal_Id);\n+\n+         --  We can also set Can_Never_Be_Null (thus preventing some junk\n+         --  access checks) for the case of an IN parameter, which cannot\n+         --  be changed, or for an IN OUT parameter, which can be changed but\n+         --  not to a null value. But for an OUT parameter, the initial value\n+         --  passed in can be null, so we can't set this flag in that case.\n+\n+         if Ekind (Formal_Id) /= E_Out_Parameter then\n+            Set_Can_Never_Be_Null (Formal_Id);\n+         end if;\n       end if;\n \n       Set_Mechanism (Formal_Id, Default_Mechanism);"}]}