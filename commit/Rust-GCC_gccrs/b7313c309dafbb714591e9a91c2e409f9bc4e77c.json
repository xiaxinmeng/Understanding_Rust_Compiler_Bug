{"sha": "b7313c309dafbb714591e9a91c2e409f9bc4e77c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjczMTNjMzA5ZGFmYmI3MTQ1OTFlOWE5MWMyZTQwOWY5YmM0ZTc3Yw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2012-03-05T18:37:19Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2012-03-05T18:37:19Z"}, "message": "re PR target/52481 (m68k-*: internal compiler error: in extract_insn, at recog.c:2123)\n\nPR target/52481\n\t* config/m68k/sync.md (atomic_test_and_set): Use expand_simple_unop\n\tinstead of calling negqi2 directly.\n\nFrom-SVN: r184948", "tree": {"sha": "afdb118541a92c170df4f7a0558627858e5258f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/afdb118541a92c170df4f7a0558627858e5258f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7313c309dafbb714591e9a91c2e409f9bc4e77c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7313c309dafbb714591e9a91c2e409f9bc4e77c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7313c309dafbb714591e9a91c2e409f9bc4e77c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7313c309dafbb714591e9a91c2e409f9bc4e77c/comments", "author": null, "committer": null, "parents": [{"sha": "ab6497549a266eb0a7cf74f4579e939b6a1e16b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab6497549a266eb0a7cf74f4579e939b6a1e16b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab6497549a266eb0a7cf74f4579e939b6a1e16b7"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "911737a00f2c377e9a026c75c52c43258daa2de9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7313c309dafbb714591e9a91c2e409f9bc4e77c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7313c309dafbb714591e9a91c2e409f9bc4e77c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b7313c309dafbb714591e9a91c2e409f9bc4e77c", "patch": "@@ -1,3 +1,9 @@\n+2012-03-05  Richard Henderson  <rth@redhat.com>\n+\n+\tPR target/52481\n+\t* config/m68k/sync.md (atomic_test_and_set): Use expand_simple_unop\n+\tinstead of calling negqi2 directly.\n+\n 2012-03-05  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \t* config/sh/sh.h (TARGET_ATOMIC_TEST_AND_SET_TRUEVAL): New hook."}, {"sha": "6c840f51b60e478bf297f4565920efc54d5c3d72", "filename": "gcc/config/m68k/sync.md", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7313c309dafbb714591e9a91c2e409f9bc4e77c/gcc%2Fconfig%2Fm68k%2Fsync.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7313c309dafbb714591e9a91c2e409f9bc4e77c/gcc%2Fconfig%2Fm68k%2Fsync.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fsync.md?ref=b7313c309dafbb714591e9a91c2e409f9bc4e77c", "patch": "@@ -62,8 +62,11 @@\n    (match_operand:SI 2 \"const_int_operand\" \"\")]\t\t;; model\n   \"\"\n {\n-  emit_insn (gen_atomic_test_and_set_1 (operands[0], operands[1]));\n-  emit_insn (gen_negqi2 (operands[0], operands[0]));\n+  rtx t = gen_reg_rtx (QImode);\n+  emit_insn (gen_atomic_test_and_set_1 (t, operands[1]));\n+  t = expand_simple_unop (QImode, NEG, t, operands[0], 0);\n+  if (t != operands[0])\n+    emit_move_insn (operands[0], t);\n   DONE;\n })\n "}]}