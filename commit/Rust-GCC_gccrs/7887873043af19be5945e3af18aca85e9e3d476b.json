{"sha": "7887873043af19be5945e3af18aca85e9e3d476b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzg4Nzg3MzA0M2FmMTliZTU5NDVlM2FmMThhY2E4NWU5ZTNkNDc2Yg==", "commit": {"author": {"name": "Torbjorn Granlund", "email": "tege@gnu.org", "date": "1993-03-10T16:56:43Z"}, "committer": {"name": "Torbjorn Granlund", "email": "tege@gnu.org", "date": "1993-03-10T16:56:43Z"}, "message": "(conditional move): Use %B for output when appropriate.\n\n(conditional move with second operand == 0): New pattern.\n\nFrom-SVN: r3692", "tree": {"sha": "03f73c86af6c083843ede7d55377e7c6826ffca2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03f73c86af6c083843ede7d55377e7c6826ffca2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7887873043af19be5945e3af18aca85e9e3d476b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7887873043af19be5945e3af18aca85e9e3d476b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7887873043af19be5945e3af18aca85e9e3d476b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7887873043af19be5945e3af18aca85e9e3d476b/comments", "author": null, "committer": null, "parents": [{"sha": "7bbc6432548b174e720601a42775d7f248e3c9e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bbc6432548b174e720601a42775d7f248e3c9e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7bbc6432548b174e720601a42775d7f248e3c9e2"}], "stats": {"total": 46, "additions": 35, "deletions": 11}, "files": [{"sha": "1b5982081b737c5f65eb2eec9d489b51f8210db1", "filename": "gcc/config/pa/pa.md", "status": "modified", "additions": 35, "deletions": 11, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7887873043af19be5945e3af18aca85e9e3d476b/gcc%2Fconfig%2Fpa%2Fpa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7887873043af19be5945e3af18aca85e9e3d476b/gcc%2Fconfig%2Fpa%2Fpa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.md?ref=7887873043af19be5945e3af18aca85e9e3d476b", "patch": "@@ -490,24 +490,48 @@\n   [(set_attr \"type\" \"binary,binary\")\n    (set_attr \"length\" \"2,3\")])\n \n-;;; Experimental conditional move\n+;;; Experimental conditional move patterns\n \n-(define_insn \"cmov\"\n-  [(set (match_operand:SI 0 \"register_operand\" \"=r,r,r,r\")\n+; We need the first constraint alternative in order to avoid\n+; earlyclobbers on all other alternatives.\n+(define_insn \"\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=r,r,r,r,r\")\n+\t(if_then_else:SI\n+\t (match_operator 5 \"comparison_operator\"\n+\t    [(match_operand:SI 3 \"register_operand\" \"r,r,r,r,r\")\n+\t     (match_operand:SI 4 \"arith11_operand\" \"rI,rI,rI,rI,rI\")])\n+\t (match_operand:SI 1 \"reg_or_cint_move_operand\" \"0,r,J,N,K\")\n+\t (const_int 0)))]\n+  \"\"\n+  \"@\n+   com%I4clr,%S5 %4,%3,0\\;ldi 0,%0\n+   com%I4clr,%B5 %4,%3,%0\\;copy %1,%0\n+   com%I4clr,%B5 %4,%3,%0\\;ldi %1,%0\n+   com%I4clr,%B5 %4,%3,%0\\;ldil L'%1,%0\n+   com%I4clr,%B5 %4,%3,%0\\;zdepi %Z1,%0\"\n+  [(set_attr \"type\" \"multi,multi,multi,multi,multi\")\n+   (set_attr \"length\" \"2,2,2,2,2\")])\n+\n+(define_insn \"\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=r,r,r,r,r,r,r,r\")\n \t(if_then_else:SI\n \t (match_operator 5 \"comparison_operator\"\n-\t\t\t [(match_operand:SI 3 \"register_operand\" \"r,r,r,r\")\n-\t\t\t  (match_operand:SI 4 \"arith5_operand\" \"rL,rL,rL,rL\")])\n-\t (match_operand:SI 1 \"arith11_operand\" \"0,0,r,I\")\n-\t (match_operand:SI 2 \"arith11_operand\" \"r,I,0,0\")))]\n+\t    [(match_operand:SI 3 \"register_operand\" \"r,r,r,r,r,r,r,r\")\n+\t     (match_operand:SI 4 \"arith11_operand\" \"rI,rI,rI,rI,rI,rI,rI,rI\")])\n+\t (match_operand:SI 1 \"reg_or_cint_move_operand\" \"0,0,0,0,r,J,N,K\")\n+\t (match_operand:SI 2 \"reg_or_cint_move_operand\" \"r,J,N,K,0,0,0,0\")))]\n   \"\"\n   \"@\n    com%I4clr,%S5 %4,%3,0\\;copy %2,%0\n    com%I4clr,%S5 %4,%3,0\\;ldi %2,%0\n-   com%I4clr,%S5 %4,%3,0\\;copy %1,%0\n-   com%I4clr,%S5 %4,%3,0\\;ldi %1,%0\"\n-  [(set_attr \"type\" \"multi,multi,multi,multi\")\n-   (set_attr \"length\" \"2,2,2,2\")])\n+   com%I4clr,%S5 %4,%3,0\\;ldil L'%2,%0\n+   com%I4clr,%S5 %4,%3,0\\;zdepi %Z2,%0\n+   com%I4clr,%B5 %4,%3,0\\;copy %1,%0\n+   com%I4clr,%B5 %4,%3,0\\;ldi %1,%0\n+   com%I4clr,%B5 %4,%3,0\\;ldil L'%1,%0\n+   com%I4clr,%B5 %4,%3,0\\;zdepi %Z1,%0\"\n+  [(set_attr \"type\" \"multi,multi,multi,multi,multi,multi,multi,multi\")\n+   (set_attr \"length\" \"2,2,2,2,2,2,2,2\")])\n \n ;; Conditional Branches\n "}]}