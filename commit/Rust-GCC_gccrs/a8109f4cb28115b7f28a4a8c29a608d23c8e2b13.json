{"sha": "a8109f4cb28115b7f28a4a8c29a608d23c8e2b13", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTgxMDlmNGNiMjgxMTViN2YyOGE0YThjMjlhNjA4ZDIzYzhlMmIxMw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2015-08-12T22:38:04Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2015-08-12T22:38:04Z"}, "message": "re PR c++/53330 (new() operator can return NULL on a zero-length allocation)\n\n2015-08-12  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/53330\n\t* g++.dg/init/new42.C: New.\n\nFrom-SVN: r226840", "tree": {"sha": "2b1eb8b2462d81cdf8b9b8cdbda204da7eb78690", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2b1eb8b2462d81cdf8b9b8cdbda204da7eb78690"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a8109f4cb28115b7f28a4a8c29a608d23c8e2b13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8109f4cb28115b7f28a4a8c29a608d23c8e2b13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8109f4cb28115b7f28a4a8c29a608d23c8e2b13", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8109f4cb28115b7f28a4a8c29a608d23c8e2b13/comments", "author": null, "committer": null, "parents": [{"sha": "683be46fa65feb540990b6cfea729f4234d71298", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/683be46fa65feb540990b6cfea729f4234d71298", "html_url": "https://github.com/Rust-GCC/gccrs/commit/683be46fa65feb540990b6cfea729f4234d71298"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "1b49702fd74d7b7cf1617d8a3ad93ff02dc5fde1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8109f4cb28115b7f28a4a8c29a608d23c8e2b13/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8109f4cb28115b7f28a4a8c29a608d23c8e2b13/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a8109f4cb28115b7f28a4a8c29a608d23c8e2b13", "patch": "@@ -1,3 +1,8 @@\n+2015-08-12  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/53330\n+\t* g++.dg/init/new42.C: New.\n+\n 2015-08-12  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR target/67071"}, {"sha": "12a714a4bef671f80c23da241d9e37e9e1d4bac4", "filename": "gcc/testsuite/g++.dg/init/new42.C", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8109f4cb28115b7f28a4a8c29a608d23c8e2b13/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fnew42.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8109f4cb28115b7f28a4a8c29a608d23c8e2b13/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fnew42.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fnew42.C?ref=a8109f4cb28115b7f28a4a8c29a608d23c8e2b13", "patch": "@@ -0,0 +1,42 @@\n+// PR c++/53330\n+// { dg-do run }\n+\n+extern \"C\" void abort ();\n+\n+struct constr_empty\n+{\n+    constr_empty() {};\n+};\n+\n+struct noconstr_empty\n+{\n+};\n+\n+struct constr_nonempty\n+{\n+    constr_nonempty() {};\n+    int dummy;\n+};\n+\n+struct noconstr_nonempty\n+{\n+    int dummy;\n+};\n+\n+int main()\n+{\n+    volatile constr_empty      *ce = new constr_empty[0];\n+    volatile noconstr_empty    *ne = new noconstr_empty[0];\n+    volatile constr_nonempty   *cn = new constr_nonempty[0];\n+    volatile noconstr_nonempty *nn = new noconstr_nonempty[0];\n+    volatile int               *ii = new int[0];\n+\n+    delete [] ce;\n+    delete [] ne;\n+    delete [] cn;\n+    delete [] nn;\n+    delete [] ii;\n+\n+    if (!(ce && ne && cn && nn && ii))\n+      abort ();\n+}"}]}