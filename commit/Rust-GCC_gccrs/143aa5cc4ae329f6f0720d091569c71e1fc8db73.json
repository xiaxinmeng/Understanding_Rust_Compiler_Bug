{"sha": "143aa5cc4ae329f6f0720d091569c71e1fc8db73", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQzYWE1Y2M0YWUzMjlmNmYwNzIwZDA5MTU2OWM3MWUxZmM4ZGI3Mw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2018-01-10T16:37:22Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2018-01-10T16:37:22Z"}, "message": "re PR c++/81055 (ICE with invalid initializer for array new)\n\n/cp\n2018-01-10  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/81055\n\t* init.c (build_vec_init): Avoid building an INIT_EXPR with\n\terror_mark_node as second argument.\n\n/testsuite\n2018-01-10  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/81055\n\t* g++.dg/cpp0x/new2.C: New.\n\nFrom-SVN: r256438", "tree": {"sha": "7260717859d12b7d4482f13fbc5a0913db71b05c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7260717859d12b7d4482f13fbc5a0913db71b05c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/143aa5cc4ae329f6f0720d091569c71e1fc8db73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/143aa5cc4ae329f6f0720d091569c71e1fc8db73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/143aa5cc4ae329f6f0720d091569c71e1fc8db73", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/143aa5cc4ae329f6f0720d091569c71e1fc8db73/comments", "author": null, "committer": null, "parents": [{"sha": "389578d7a660986712eefc1785c9278d3457cd7a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/389578d7a660986712eefc1785c9278d3457cd7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/389578d7a660986712eefc1785c9278d3457cd7a"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "9b6f46265866bbb1e7cf6a8e9a88bab46d2748fa", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/143aa5cc4ae329f6f0720d091569c71e1fc8db73/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/143aa5cc4ae329f6f0720d091569c71e1fc8db73/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=143aa5cc4ae329f6f0720d091569c71e1fc8db73", "patch": "@@ -1,3 +1,9 @@\n+2018-01-10  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/81055\n+\t* init.c (build_vec_init): Avoid building an INIT_EXPR with\n+\terror_mark_node as second argument.\n+\n 2018-01-09  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/83734"}, {"sha": "1be7c67d867d7224173d6dc026b62bc471aa4848", "filename": "gcc/cp/init.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/143aa5cc4ae329f6f0720d091569c71e1fc8db73/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/143aa5cc4ae329f6f0720d091569c71e1fc8db73/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=143aa5cc4ae329f6f0720d091569c71e1fc8db73", "patch": "@@ -4399,7 +4399,9 @@ build_vec_init (tree base, tree maxindex, tree init,\n \t      if (TREE_CODE (init) == TREE_LIST)\n \t\tinit = build_x_compound_expr_from_list (init, ELK_INIT,\n \t\t\t\t\t\t\tcomplain);\n-\t      elt_init = build2 (INIT_EXPR, type, to, init);\n+\t      elt_init = (init == error_mark_node\n+\t\t\t  ? error_mark_node\n+\t\t\t  : build2 (INIT_EXPR, type, to, init));\n \t    }\n \t}\n "}, {"sha": "dca24d8f28b1a314b4b5d673fd73db4650599d1a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/143aa5cc4ae329f6f0720d091569c71e1fc8db73/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/143aa5cc4ae329f6f0720d091569c71e1fc8db73/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=143aa5cc4ae329f6f0720d091569c71e1fc8db73", "patch": "@@ -1,3 +1,8 @@\n+2018-01-10  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/81055\n+\t* g++.dg/cpp0x/new2.C: New.\n+\n 2018-01-10  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/83735"}, {"sha": "f0bbc8092cd26ce04cdea285a2b641b18d7c5f54", "filename": "gcc/testsuite/g++.dg/cpp0x/new2.C", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/143aa5cc4ae329f6f0720d091569c71e1fc8db73/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fnew2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/143aa5cc4ae329f6f0720d091569c71e1fc8db73/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fnew2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fnew2.C?ref=143aa5cc4ae329f6f0720d091569c71e1fc8db73", "patch": "@@ -0,0 +1,4 @@\n+// PR c++/81055\n+// { dg-do compile { target c++11 } }\n+\n+int** p = new int*[1]{q};  // { dg-error \"not declared\" }"}]}