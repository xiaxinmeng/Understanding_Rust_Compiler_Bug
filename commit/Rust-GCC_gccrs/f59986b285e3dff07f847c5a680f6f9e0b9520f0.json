{"sha": "f59986b285e3dff07f847c5a680f6f9e0b9520f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjU5OTg2YjI4NWUzZGZmMDdmODQ3YzVhNjgwZjZmOWUwYjk1MjBmMA==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2018-01-23T19:13:10Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2018-01-23T19:13:10Z"}, "message": "re PR fortran/83866 (ICE in gfc_release_symbol, at fortran/symbol.c:3087)\n\n2018-23-01  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/83866\n\t* decl.c (gfc_match_derived_decl): If eos not matched, recover\n\tand emit error about garbage after declaration.\n\n2018-23-01  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/83866\n\t* gfortran.dg/pdt_29.f03 : New test.\n\nFrom-SVN: r256995", "tree": {"sha": "20a49d1f50c5cd576ab30406aba52441d1cd1e32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/20a49d1f50c5cd576ab30406aba52441d1cd1e32"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f59986b285e3dff07f847c5a680f6f9e0b9520f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f59986b285e3dff07f847c5a680f6f9e0b9520f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f59986b285e3dff07f847c5a680f6f9e0b9520f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f59986b285e3dff07f847c5a680f6f9e0b9520f0/comments", "author": null, "committer": null, "parents": [{"sha": "84ee745e333717fb3b64f66310499993c5ee1835", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84ee745e333717fb3b64f66310499993c5ee1835", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84ee745e333717fb3b64f66310499993c5ee1835"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "c477e96d5bd5f867d90b4dd776618ca371b12a50", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f59986b285e3dff07f847c5a680f6f9e0b9520f0/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f59986b285e3dff07f847c5a680f6f9e0b9520f0/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=f59986b285e3dff07f847c5a680f6f9e0b9520f0", "patch": "@@ -1,3 +1,9 @@\n+2018-23-01  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/83866\n+\t* decl.c (gfc_match_derived_decl): If eos not matched, recover\n+\tand emit error about garbage after declaration.\n+\n 2018-23-01  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/83898"}, {"sha": "7922eefbd631f30f6912e7676f017842fd13d46a", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f59986b285e3dff07f847c5a680f6f9e0b9520f0/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f59986b285e3dff07f847c5a680f6f9e0b9520f0/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=f59986b285e3dff07f847c5a680f6f9e0b9520f0", "patch": "@@ -9857,7 +9857,10 @@ gfc_match_derived_decl (void)\n \tgfc_error_recovery ();\n       m = gfc_match_eos ();\n       if (m != MATCH_YES)\n-\treturn m;\n+\t{\n+\t  gfc_error_recovery ();\n+\t  gfc_error_now (\"Garbage after PARAMETERIZED TYPE declaration at %C\");\n+\t}\n       sym->attr.pdt_template = 1;\n     }\n "}, {"sha": "c52b2d96d4f545e31cd84413b56e2a3359c2725a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f59986b285e3dff07f847c5a680f6f9e0b9520f0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f59986b285e3dff07f847c5a680f6f9e0b9520f0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f59986b285e3dff07f847c5a680f6f9e0b9520f0", "patch": "@@ -1,3 +1,8 @@\n+2018-23-01  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/83866\n+\t* gfortran.dg/pdt_29.f03 : New test.\n+\n 2018-23-01  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/83898"}, {"sha": "596cc1c48f1c97fc1aea9058277fedf0fd382500", "filename": "gcc/testsuite/gfortran.dg/pdt_29.f03", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f59986b285e3dff07f847c5a680f6f9e0b9520f0/gcc%2Ftestsuite%2Fgfortran.dg%2Fpdt_29.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f59986b285e3dff07f847c5a680f6f9e0b9520f0/gcc%2Ftestsuite%2Fgfortran.dg%2Fpdt_29.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpdt_29.f03?ref=f59986b285e3dff07f847c5a680f6f9e0b9520f0", "patch": "@@ -0,0 +1,15 @@\n+! { dg-do compile }\n+!\n+! Test the fix for PR83866.f90\n+!\n+! Contributed by G Steinmetz  <gscfq@t-online.de>\n+!\n+program p\n+  type private\n+  end type\n+   type t\n+      class(t), pointer :: a\n+   end type\n+   type extends(t) :: t2 ! { dg-error \"Garbage after | does not have a component\" }\n+   end type\n+end"}]}