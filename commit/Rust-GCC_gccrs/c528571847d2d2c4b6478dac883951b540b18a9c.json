{"sha": "c528571847d2d2c4b6478dac883951b540b18a9c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzUyODU3MTg0N2QyZDJjNGI2NDc4ZGFjODgzOTUxYjU0MGIxOGE5Yw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2008-06-08T21:25:49Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-06-08T21:25:49Z"}, "message": "re PR c++/35242 (ICE with invalid specialization of variadic template)\n\n/cp\n2008-06-08  Paolo Carlini  <paolo.carlini@oracle.com>\n\n        PR c++/35242\n        * pt.c (maybe_process_partial_specialization): Check the tree\n\treturned by push_template_decl for error_mark_node.\n\t* parser.c (cp_parser_class_head): Likewise, check the tree\n\treturned by the latter. \n\n/testsuite\n2008-06-08  Paolo Carlini  <paolo.carlini@oracle.com>\n\n        PR c++/35242\n        * g++.dg/cpp0x/vt-35242.C: New.\n\nFrom-SVN: r136569", "tree": {"sha": "07d8336646903840ad629669ae3cfcc1cae53c3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/07d8336646903840ad629669ae3cfcc1cae53c3a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c528571847d2d2c4b6478dac883951b540b18a9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c528571847d2d2c4b6478dac883951b540b18a9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c528571847d2d2c4b6478dac883951b540b18a9c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c528571847d2d2c4b6478dac883951b540b18a9c/comments", "author": null, "committer": null, "parents": [{"sha": "c427220a8caf5221617d92fd9e70a92d1f8ffe55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c427220a8caf5221617d92fd9e70a92d1f8ffe55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c427220a8caf5221617d92fd9e70a92d1f8ffe55"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "74ae4ae4d98d9a82891a243d3403361104d1f272", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c528571847d2d2c4b6478dac883951b540b18a9c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c528571847d2d2c4b6478dac883951b540b18a9c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c528571847d2d2c4b6478dac883951b540b18a9c", "patch": "@@ -1,3 +1,11 @@\n+2008-06-08  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+        PR c++/35242\n+        * pt.c (maybe_process_partial_specialization): Check the tree\n+\treturned by push_template_decl for error_mark_node.\n+\t* parser.c (cp_parser_class_head): Likewise, check the tree\n+\treturned by the latter. \n+\n 2008-06-07  Paolo Carlini  <paolo.carlini@oracle.com>\n \n         PR c++/35327"}, {"sha": "12d1a2d8ad98f81208828df74e58d4387ced34e1", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c528571847d2d2c4b6478dac883951b540b18a9c/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c528571847d2d2c4b6478dac883951b540b18a9c/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=c528571847d2d2c4b6478dac883951b540b18a9c", "patch": "@@ -14832,7 +14832,13 @@ cp_parser_class_head (cp_parser* parser,\n \t    }\n \t}\n \n-      maybe_process_partial_specialization (TREE_TYPE (type));\n+      if (maybe_process_partial_specialization (TREE_TYPE (type))\n+\t  == error_mark_node)\n+\t{\n+\t  type = NULL_TREE;\n+\t  goto done;\n+\t}\n+\n       class_type = current_class_type;\n       /* Enter the scope indicated by the nested-name-specifier.  */\n       pushed_scope = push_scope (nested_name_specifier);"}, {"sha": "eb4a7b7ed34bd69fcafe5f94e180d1b9c026d3c9", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c528571847d2d2c4b6478dac883951b540b18a9c/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c528571847d2d2c4b6478dac883951b540b18a9c/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=c528571847d2d2c4b6478dac883951b540b18a9c", "patch": "@@ -772,7 +772,11 @@ maybe_process_partial_specialization (tree type)\n \t  check_specialization_namespace (CLASSTYPE_TI_TEMPLATE (type));\n \t  SET_CLASSTYPE_TEMPLATE_SPECIALIZATION (type);\n \t  if (processing_template_decl)\n-\t    push_template_decl (TYPE_MAIN_DECL (type));\n+\t    {\n+\t      if (push_template_decl (TYPE_MAIN_DECL (type))\n+\t\t  == error_mark_node)\n+\t\treturn error_mark_node;\n+\t    }\n \t}\n       else if (CLASSTYPE_TEMPLATE_INSTANTIATION (type))\n \terror (\"specialization of %qT after instantiation\", type);"}, {"sha": "ee3af09b7142c5a3fde2b6c2655211fe4c6fe362", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c528571847d2d2c4b6478dac883951b540b18a9c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c528571847d2d2c4b6478dac883951b540b18a9c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c528571847d2d2c4b6478dac883951b540b18a9c", "patch": "@@ -1,3 +1,8 @@\n+2008-06-08  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+        PR c++/35242\n+        * g++.dg/cpp0x/vt-35242.C: New.\n+\n 2008-06-08  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/36459"}, {"sha": "9cc859b875e4314481d95cd2ec5832087a8d475a", "filename": "gcc/testsuite/g++.dg/cpp0x/vt-35242.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c528571847d2d2c4b6478dac883951b540b18a9c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvt-35242.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c528571847d2d2c4b6478dac883951b540b18a9c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvt-35242.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvt-35242.C?ref=c528571847d2d2c4b6478dac883951b540b18a9c", "patch": "@@ -0,0 +1,7 @@\n+// { dg-options \"-std=c++0x\" }\n+struct A\n+{\n+  template<typename... T> struct B;\n+};\n+\n+template<typename... T> struct A::B<T*> {}; // { dg-error \"parameter packs|T\" }"}]}