{"sha": "16bae307a6e7d48d6787c671c3a269a71f08b899", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTZiYWUzMDdhNmU3ZDQ4ZDY3ODdjNjcxYzNhMjY5YTcxZjA4Yjg5OQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-07-20T02:42:59Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-07-20T02:42:59Z"}, "message": "(assign_parms): Use const0_rtx as DECL_RTL and as\nDECL_INCOMING_RTL if tmode of parm is void.\n\nFrom-SVN: r1635", "tree": {"sha": "1b4fe803104cea2e9fa6a084029306e6980e908a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b4fe803104cea2e9fa6a084029306e6980e908a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/16bae307a6e7d48d6787c671c3a269a71f08b899", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16bae307a6e7d48d6787c671c3a269a71f08b899", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16bae307a6e7d48d6787c671c3a269a71f08b899", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16bae307a6e7d48d6787c671c3a269a71f08b899/comments", "author": null, "committer": null, "parents": [{"sha": "7e53036d32da0c9669e2465aefa842bf772bc477", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e53036d32da0c9669e2465aefa842bf772bc477", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e53036d32da0c9669e2465aefa842bf772bc477"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "4fa8ed019a0d9d749de93d1b1ccc8bad4dd4b7a7", "filename": "gcc/function.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16bae307a6e7d48d6787c671c3a269a71f08b899/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16bae307a6e7d48d6787c671c3a269a71f08b899/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=16bae307a6e7d48d6787c671c3a269a71f08b899", "patch": "@@ -2556,6 +2556,14 @@ assign_parms (fndecl, second_time)\n       passed_mode = TYPE_MODE (passed_type);\n       nominal_mode = TYPE_MODE (TREE_TYPE (parm));\n \n+      /* If the parm's mode is VOID, its value doesn't matter,\n+\t and avoid the usual things like emit_move_insn that could crash.  */\n+      if (nominal_mode == VOIDmode)\n+\t{\n+\t  DECL_INCOMING_RTL (parm) = DECL_RTL (parm) = const0_rtx;\n+\t  continue;\n+\t}\n+\n #ifdef FUNCTION_ARG_PASS_BY_REFERENCE\n       /* See if this arg was passed by invisible reference.  */\n       if (FUNCTION_ARG_PASS_BY_REFERENCE (args_so_far, passed_mode,\n@@ -2860,7 +2868,7 @@ assign_parms (fndecl, second_time)\n \n \t  /* If we were passed a pointer but the actual value\n \t     can safely live in a register, put it in one.  */\n-\t  if (passed_pointer && nominal_mode != BLKmode\n+\t  if (passed_pointer && TYPE_MODE (TREE_TYPE (parm)) != BLKmode\n \t      && ! ((obey_regdecls && ! DECL_REGISTER (parm)\n \t\t     && ! DECL_INLINE (fndecl))\n \t\t    /* layout_decl may set this.  */"}]}