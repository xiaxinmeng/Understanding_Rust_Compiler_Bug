{"sha": "5706a5db88a0eeaf82071debe1364f4533896a65", "node_id": "C_kwDOANBUbNoAKDU3MDZhNWRiODhhMGVlYWY4MjA3MWRlYmUxMzY0ZjQ1MzM4OTZhNjU", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-03-03T22:28:48Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-03-03T22:28:48Z"}, "message": "libstdc++: Use non-debug vector in constexpr test [PR104748]\n\nThe std::__debug::vector isn't usable in constant expressions, so this\ntest fails in debug mode. Until the debug vector is fixed we can just\nmake the test use the non-debug one.\n\nlibstdc++-v3/ChangeLog:\n\n\tPR libstdc++/104748\n\t* testsuite/std/ranges/adaptors/all.cc: Use non-debug vector for\n\tconstexpr test.", "tree": {"sha": "672cbf958b9a0b77482846b5e817a706e2d1043c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/672cbf958b9a0b77482846b5e817a706e2d1043c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5706a5db88a0eeaf82071debe1364f4533896a65", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5706a5db88a0eeaf82071debe1364f4533896a65", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5706a5db88a0eeaf82071debe1364f4533896a65", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5706a5db88a0eeaf82071debe1364f4533896a65/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "64cdf49962996747b4c5687a705551d5fc61fac8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64cdf49962996747b4c5687a705551d5fc61fac8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64cdf49962996747b4c5687a705551d5fc61fac8"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "a4924b9909fe09e676ced9e25e1b4a28692c0a1a", "filename": "libstdc++-v3/testsuite/std/ranges/adaptors/all.cc", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5706a5db88a0eeaf82071debe1364f4533896a65/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fadaptors%2Fall.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5706a5db88a0eeaf82071debe1364f4533896a65/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fadaptors%2Fall.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fadaptors%2Fall.cc?ref=5706a5db88a0eeaf82071debe1364f4533896a65", "patch": "@@ -164,20 +164,26 @@ test07()\n constexpr bool\n test08()\n {\n+#ifdef _GLIBCXX_DEBUG\n+  using std::_GLIBCXX_STD_C::vector;\n+#else\n+  using std::vector;\n+#endif\n+\n   // Verify P2415R2 \"What is a view?\" changes.\n   // In particular, rvalue non-view non-borrowed ranges are now viewable.\n-  static_assert(ranges::viewable_range<std::vector<int>&&>);\n-  static_assert(!ranges::viewable_range<const std::vector<int>&&>);\n+  static_assert(ranges::viewable_range<vector<int>&&>);\n+  static_assert(!ranges::viewable_range<const vector<int>&&>);\n \n   static_assert(ranges::viewable_range<std::initializer_list<int>&>);\n   static_assert(ranges::viewable_range<const std::initializer_list<int>&>);\n   static_assert(!ranges::viewable_range<std::initializer_list<int>&&>);\n   static_assert(!ranges::viewable_range<const std::initializer_list<int>&&>);\n \n-  using type = views::all_t<std::vector<int>&&>;\n-  using type = ranges::owning_view<std::vector<int>>;\n+  using type = views::all_t<vector<int>&&>;\n+  using type = ranges::owning_view<vector<int>>;\n \n-  std::same_as<type> auto v = std::vector<int>{{1,2,3}} | views::all;\n+  std::same_as<type> auto v = vector<int>{{1,2,3}} | views::all;\n \n   VERIFY( ranges::equal(v, (int[]){1,2,3}) );\n   VERIFY( ranges::size(v) == 3 );"}]}