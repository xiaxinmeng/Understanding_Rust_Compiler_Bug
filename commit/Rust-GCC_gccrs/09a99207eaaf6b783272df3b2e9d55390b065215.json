{"sha": "09a99207eaaf6b783272df3b2e9d55390b065215", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDlhOTkyMDdlYWFmNmI3ODMyNzJkZjNiMmU5ZDU1MzkwYjA2NTIxNQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-07T21:58:26Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-07T21:58:26Z"}, "message": "(<sys/signal.h>):  Fix types of SIG_DFL, SIG_ERR, SIG_IGN, and SIG_HOLD.\n\n(<sys/stat.h>): Turn definitions of stat, lstat, fstat, and mknod\ninto ANSI syntax and add __ to variables used.\n\nFrom-SVN: r2362", "tree": {"sha": "6eb0df7d787254b56a378d72801ec35986fe0286", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6eb0df7d787254b56a378d72801ec35986fe0286"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/09a99207eaaf6b783272df3b2e9d55390b065215", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09a99207eaaf6b783272df3b2e9d55390b065215", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09a99207eaaf6b783272df3b2e9d55390b065215", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09a99207eaaf6b783272df3b2e9d55390b065215/comments", "author": null, "committer": null, "parents": [{"sha": "2a819d04bc6207026a183b7fda2e7652325ee402", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a819d04bc6207026a183b7fda2e7652325ee402", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a819d04bc6207026a183b7fda2e7652325ee402"}], "stats": {"total": 60, "additions": 60, "deletions": 0}, "files": [{"sha": "cf04a2c4761974d28363e6f4738c58283d29ba55", "filename": "gcc/fixinc.svr4", "status": "modified", "additions": 60, "deletions": 0, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09a99207eaaf6b783272df3b2e9d55390b065215/gcc%2Ffixinc.svr4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09a99207eaaf6b783272df3b2e9d55390b065215/gcc%2Ffixinc.svr4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc.svr4?ref=09a99207eaaf6b783272df3b2e9d55390b065215", "patch": "@@ -501,6 +501,7 @@ EOF\n fi\n \n # Add a #define of _SIGACTION_ into <sys/signal.h>.\n+# Also fix types of SIG_DFL, SIG_ERR, SIG_IGN, and SIG_HOLD.\n \n file=sys/signal.h\n base=`basename $file`\n@@ -522,6 +523,7 @@ if [ \\! -z \"$file_to_fix\" ]; then\n #define _SIGACTION_\n struct  sigaction  {\n .\n+  1,\\$s/(void *(\\*)())/(void (*)(int))/\n   wq\n EOF\n   if cmp $file_to_fix /tmp/$base >/dev/null 2>&1; then \\\n@@ -860,6 +862,64 @@ if [ \\! -z \"$file_to_fix\" ]; then\n   fi\n fi\n \n+# Convert functions to prototype form, and fix arg names in <sys/stat.h>.\n+\n+file=sys/stat.h\n+base=`basename $file`\n+if [ -r ${LIB}/$file ]; then\n+  file_to_fix=${LIB}/$file\n+else\n+  if [ -r ${INPUT}/$file ]; then\n+    file_to_fix=${INPUT}/$file\n+  else\n+    file_to_fix=\"\"\n+  fi\n+fi\n+if [ \\! -z \"$file_to_fix\" ]; then\n+  echo Checking $file_to_fix\n+  cp $file_to_fix /tmp/$base\n+  chmod +w /tmp/$base\n+  ex /tmp/$base <<EOF\n+/^stat(path, buf)/j\n+j\n+-\n+/^stat(path, buf)/c\n+stat (const char *path, struct stat *buf)\n+.\n+/^lstat(path, buf)/j\n+j\n+-\n+/^lstat(path, buf)/c\n+lstat (const char *path, struct stat *buf)\n+.\n+/^fstat(fd, buf)/j\n+j\n+-\n+/^fstat(fd, buf)/c\n+fstat (int fd, struct stat *buf)\n+.\n+/^mknod(path, mode, dev)/j\n+j\n+j\n+-\n+/^mknod(path, mode, dev)/c\n+mknod (const char *path, mode_t mode, dev_t dev)\n+.\n+1,\\$s/path/__path/g\n+1,\\$s/buf/__buf/g\n+1,\\$s/fd/__fd/g\n+1,\\$s/ret\\\\([^u]\\\\)/__ret\\1/g\n+1,\\$s/\\\\([^_]\\\\)mode\\\\([^_]\\\\)/\\\\1__mode\\\\2/g\n+1,\\$s/\\\\([^_r]\\\\)dev\\\\([^_]\\\\)/\\\\1__dev\\\\2/g\n+wq\n+EOF\n+    echo Fixed $file_to_fix\n+    rm -f ${LIB}/$file\n+    cp /tmp/$base ${LIB}/$file\n+    rm -f /tmp/$base\n+  fi\n+fi\n+\n # Sony NEWSOS 5.0 does not support the complete ANSI C standard.\n \n if [ -x /bin/sony ]; then"}]}