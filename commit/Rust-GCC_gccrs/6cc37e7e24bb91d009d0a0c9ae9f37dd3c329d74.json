{"sha": "6cc37e7e24bb91d009d0a0c9ae9f37dd3c329d74", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmNjMzdlN2UyNGJiOTFkMDA5ZDBhMGM5YWU5ZjM3ZGQzYzMyOWQ3NA==", "commit": {"author": {"name": "Danny Smith", "email": "dannysmith@users.sourceforge.net", "date": "2005-01-31T05:49:07Z"}, "committer": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2005-01-31T05:49:07Z"}, "message": "re PR target/19704 (ICE for tail call of regparm 3 and dllimport)\n\n\tPR target/19704\n\t* config/i386/i386.c (ix86_function_ok_for_sibcall):  Also check\n\tthat dllimport'd functions do not use all call-clobbered registers\n\tto pass parameters.\n\nFrom-SVN: r94467", "tree": {"sha": "d9cbcffdee35ec5e86d7d6b8c881da4d84f948f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d9cbcffdee35ec5e86d7d6b8c881da4d84f948f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6cc37e7e24bb91d009d0a0c9ae9f37dd3c329d74", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cc37e7e24bb91d009d0a0c9ae9f37dd3c329d74", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cc37e7e24bb91d009d0a0c9ae9f37dd3c329d74", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cc37e7e24bb91d009d0a0c9ae9f37dd3c329d74/comments", "author": null, "committer": null, "parents": [{"sha": "e3016344b3c8ca1ede6b31a8b9949998e5274cf7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3016344b3c8ca1ede6b31a8b9949998e5274cf7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3016344b3c8ca1ede6b31a8b9949998e5274cf7"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "e66f1f8a768d6a80c4c28166794825ae721f9697", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cc37e7e24bb91d009d0a0c9ae9f37dd3c329d74/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cc37e7e24bb91d009d0a0c9ae9f37dd3c329d74/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6cc37e7e24bb91d009d0a0c9ae9f37dd3c329d74", "patch": "@@ -1,3 +1,10 @@\n+2005-01-31  Danny Smith  <dannysmith@users.sourceforge.net>\n+\n+\tPR target/19704\n+\t* config/i386/i386.c (ix86_function_ok_for_sibcall):  Also check\n+\tthat dllimport'd functions do not use all call-clobbered registers\n+\tto pass parameters.\n+\n 2005-01-30  Richard Henderson  <rth@redhat.com>\n \n \tPR 19696"}, {"sha": "f72bd3d67885f2df1e03205f424bb63b16217d5f", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cc37e7e24bb91d009d0a0c9ae9f37dd3c329d74/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cc37e7e24bb91d009d0a0c9ae9f37dd3c329d74/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=6cc37e7e24bb91d009d0a0c9ae9f37dd3c329d74", "patch": "@@ -1678,6 +1678,13 @@ ix86_function_ok_for_sibcall (tree decl, tree exp)\n \t}\n     }\n \n+#if TARGET_DLLIMPORT_DECL_ATTRIBUTES\n+  /* Dllimport'd functions are also called indirectly.  */\n+  if (decl && lookup_attribute (\"dllimport\", DECL_ATTRIBUTES (decl))\n+      && ix86_function_regparm (TREE_TYPE (decl), NULL) >= 3)\n+    return false;\n+#endif\n+\n   /* Otherwise okay.  That also includes certain types of indirect calls.  */\n   return true;\n }"}]}