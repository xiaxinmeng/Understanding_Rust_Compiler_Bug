{"sha": "b125ad45dab0e830d5e1a6aacfddc29fd17e37dc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjEyNWFkNDVkYWIwZTgzMGQ1ZTFhNmFhY2ZkZGMyOWZkMTdlMzdkYw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2011-06-10T00:31:19Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2011-06-10T00:31:19Z"}, "message": "cgraphunit.c (cgraph_reset_node): Do not set redefined_extern_inline; do not recompute reachable flag.\n\n\n\t* cgraphunit.c (cgraph_reset_node): Do not set redefined_extern_inline;\n\tdo not recompute reachable flag.\n\t(cgraph_finalize_function, cgraph_analyze_functions): Set\n\tredefined_extern_inline here.\n\nFrom-SVN: r174877", "tree": {"sha": "76467d044aa99677800c5aeb965fa174159b9549", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76467d044aa99677800c5aeb965fa174159b9549"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b125ad45dab0e830d5e1a6aacfddc29fd17e37dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b125ad45dab0e830d5e1a6aacfddc29fd17e37dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b125ad45dab0e830d5e1a6aacfddc29fd17e37dc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b125ad45dab0e830d5e1a6aacfddc29fd17e37dc/comments", "author": null, "committer": null, "parents": [{"sha": "5d4c7c5f6b19469c5e67127b34cefdb106aef9e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d4c7c5f6b19469c5e67127b34cefdb106aef9e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d4c7c5f6b19469c5e67127b34cefdb106aef9e2"}], "stats": {"total": 28, "additions": 12, "deletions": 16}, "files": [{"sha": "d0429e150918d5785a0c152463bca7388b399b5c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b125ad45dab0e830d5e1a6aacfddc29fd17e37dc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b125ad45dab0e830d5e1a6aacfddc29fd17e37dc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b125ad45dab0e830d5e1a6aacfddc29fd17e37dc", "patch": "@@ -1,3 +1,10 @@\n+2011-06-09  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cgraphunit.c (cgraph_reset_node): Do not set redefined_extern_inline;\n+\tdo not recompute reachable flag.\n+\t(cgraph_finalize_function, cgraph_analyze_functions): Set\n+\tredefined_extern_inline here.\n+\n 2011-06-09  Jan Hubicka  <jh@suse.cz>\n \n \t* cgraph.h (cgraph_only_called_directly_or_aliased_p): Rename from ..."}, {"sha": "1e3aa0ddf19f1b3f58509200ac59066ff0c4588a", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 5, "deletions": 16, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b125ad45dab0e830d5e1a6aacfddc29fd17e37dc/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b125ad45dab0e830d5e1a6aacfddc29fd17e37dc/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=b125ad45dab0e830d5e1a6aacfddc29fd17e37dc", "patch": "@@ -306,24 +306,9 @@ cgraph_reset_node (struct cgraph_node *node)\n   memset (&node->global, 0, sizeof (node->global));\n   memset (&node->rtl, 0, sizeof (node->rtl));\n   node->analyzed = false;\n-  node->local.redefined_extern_inline = true;\n   node->local.finalized = false;\n \n   cgraph_node_remove_callees (node);\n-\n-  /* We may need to re-queue the node for assembling in case\n-     we already proceeded it and ignored as not needed or got\n-     a re-declaration in IMA mode.  */\n-  if (node->reachable)\n-    {\n-      struct cgraph_node *n;\n-\n-      for (n = cgraph_nodes_queue; n; n = n->next_needed)\n-\tif (n == node)\n-\t  break;\n-      if (!n)\n-\tnode->reachable = 0;\n-    }\n }\n \n static void\n@@ -351,7 +336,10 @@ cgraph_finalize_function (tree decl, bool nested)\n   struct cgraph_node *node = cgraph_get_create_node (decl);\n \n   if (node->local.finalized)\n-    cgraph_reset_node (node);\n+    {\n+      cgraph_reset_node (node);\n+      node->local.redefined_extern_inline = true;\n+    }\n \n   notice_global_symbol (decl);\n   node->local.finalized = true;\n@@ -994,6 +982,7 @@ cgraph_analyze_functions (void)\n \t  && !node->thunk.thunk_p)\n \t{\n \t  cgraph_reset_node (node);\n+          node->local.redefined_extern_inline = true;\n \t  continue;\n \t}\n "}]}