{"sha": "8ad150f6cc733273ae838ebd77a1b9d6ed2985d1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGFkMTUwZjZjYzczMzI3M2FlODM4ZWJkNzdhMWI5ZDZlZDI5ODVkMQ==", "commit": {"author": {"name": "Tristan Gingold", "email": "gingold@adacore.com", "date": "2011-03-28T09:49:10Z"}, "committer": {"name": "Tristan Gingold", "email": "gingold@gcc.gnu.org", "date": "2011-03-28T09:49:10Z"}, "message": "re PR ada/44431 ([boot with C++] Conflicting exit declaration in ada/b_gnatb.c)\n\n2011-03-28  Tristan Gingold  <gingold@adacore.com>\n\n\tPR ada/44431\n\t* gcc-interface/Make-lang.in (ada/b_gnat1.adb):  Replaces\n\tada/b_gnat1.c. Use ada output of gnatbind.\n\t(ada/b_gnatb.adb): Ditto.\n\t(ada/b_gnat1.o, ada/b_gnatb.o): New rules.\n\t(ada.mostlyclean, ada.stage1)\n\t(ada.stage2, ada.stage3, ada.stage4, ada.stageprofile)\n\t(ada.stagefeedback): Adjust.\n\n\t* gcc-interface/Makefile.in (b_gnatl.adb): Replaces b_gnatl.c\n\tUse ada output of gnatbind.\n\t(b_gnatm.adb): Ditto.\n\t(b_gnatl.o, b_gnatm.o): New rules.\n\nFrom-SVN: r171593", "tree": {"sha": "9ac8e7b9f15258f19b569a824d94ac3fd352c9b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9ac8e7b9f15258f19b569a824d94ac3fd352c9b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8ad150f6cc733273ae838ebd77a1b9d6ed2985d1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ad150f6cc733273ae838ebd77a1b9d6ed2985d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ad150f6cc733273ae838ebd77a1b9d6ed2985d1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ad150f6cc733273ae838ebd77a1b9d6ed2985d1/comments", "author": {"login": "gingold-adacore", "id": 16334725, "node_id": "MDQ6VXNlcjE2MzM0NzI1", "avatar_url": "https://avatars.githubusercontent.com/u/16334725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gingold-adacore", "html_url": "https://github.com/gingold-adacore", "followers_url": "https://api.github.com/users/gingold-adacore/followers", "following_url": "https://api.github.com/users/gingold-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/gingold-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/gingold-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gingold-adacore/subscriptions", "organizations_url": "https://api.github.com/users/gingold-adacore/orgs", "repos_url": "https://api.github.com/users/gingold-adacore/repos", "events_url": "https://api.github.com/users/gingold-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/gingold-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1b29f05e56e3b6711352d5cfd8b30785beb3b663", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b29f05e56e3b6711352d5cfd8b30785beb3b663", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b29f05e56e3b6711352d5cfd8b30785beb3b663"}], "stats": {"total": 77, "additions": 54, "deletions": 23}, "files": [{"sha": "90633da2b9dadfd9796d3e07714ecb3e411129e5", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ad150f6cc733273ae838ebd77a1b9d6ed2985d1/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ad150f6cc733273ae838ebd77a1b9d6ed2985d1/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=8ad150f6cc733273ae838ebd77a1b9d6ed2985d1", "patch": "@@ -1,3 +1,19 @@\n+2011-03-28  Tristan Gingold  <gingold@adacore.com>\n+\n+\tPR ada/44431\n+\t* gcc-interface/Make-lang.in (ada/b_gnat1.adb):  Replaces\n+\tada/b_gnat1.c. Use ada output of gnatbind.\n+\t(ada/b_gnatb.adb): Ditto.\n+\t(ada/b_gnat1.o, ada/b_gnatb.o): New rules.\n+\t(ada.mostlyclean, ada.stage1)\n+\t(ada.stage2, ada.stage3, ada.stage4, ada.stageprofile)\n+\t(ada.stagefeedback): Adjust.\n+\n+\t* gcc-interface/Makefile.in (b_gnatl.adb): Replaces b_gnatl.c\n+\tUse ada output of gnatbind.\n+\t(b_gnatm.adb): Ditto.\n+\t(b_gnatl.o, b_gnatm.o): New rules.\n+\n 2011-03-26  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/decl.c (gnat_to_gnu_entity) <object>: Create TYPE_DECL"}, {"sha": "2c5fdf414667b49684bd143eea0d64647b88eb58", "filename": "gcc/ada/gcc-interface/Make-lang.in", "status": "modified", "additions": 26, "deletions": 17, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ad150f6cc733273ae838ebd77a1b9d6ed2985d1/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ad150f6cc733273ae838ebd77a1b9d6ed2985d1/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMake-lang.in?ref=8ad150f6cc733273ae838ebd77a1b9d6ed2985d1", "patch": "@@ -938,7 +938,7 @@ ada.uninstall:\n # We just have to delete files specific to us.\n \n ada.mostlyclean:\n-\t-$(RM) ada/*$(objext) ada/*.ali ada/b_*.c\n+\t-$(RM) ada/*$(objext) ada/*.ali ada/b_gnat*.ads ada/b_gnat*.adb\n \t-$(RM) ada/*$(coverageexts)\n \t-$(RM) ada/sdefault.adb ada/stamp-sdefault ada/stamp-snames\n \t-$(RMDIR) ada/tools\n@@ -974,22 +974,22 @@ ada.maintainer-clean:\n # The main makefile has already created stage?/ada\n \n ada.stage1: stage1-start\n-\t-$(MV) ada/*$(objext) ada/*.ali ada/b_*.c stage1/ada\n+\t-$(MV) ada/*$(objext) ada/*.ali ada/b_gnat*.ad* stage1/ada\n \t-$(MV) ada/stamp-* stage1/ada\n ada.stage2: stage2-start\n-\t-$(MV) ada/*$(objext) ada/*.ali ada/b_*.c stage2/ada\n+\t-$(MV) ada/*$(objext) ada/*.ali ada/b_gnat*.ad* stage2/ada\n \t-$(MV) ada/stamp-* stage2/ada\n ada.stage3: stage3-start\n-\t-$(MV) ada/*$(objext) ada/*.ali ada/b_*.c stage3/ada\n+\t-$(MV) ada/*$(objext) ada/*.ali ada/b_gnat*.ad* stage3/ada\n \t-$(MV) ada/stamp-* stage3/ada\n ada.stage4: stage4-start\n-\t-$(MV) ada/*$(objext) ada/*.ali ada/b_*.c stage4/ada\n+\t-$(MV) ada/*$(objext) ada/*.ali ada/b_gnat*.ad* stage4/ada\n \t-$(MV) ada/stamp-* stage4/ada\n ada.stageprofile: stageprofile-start\n-\t-$(MV) ada/*$(objext) ada/*.ali ada/b_*.c stageprofile/ada\n+\t-$(MV) ada/*$(objext) ada/*.ali ada/b_gnat*.ad* stageprofile/ada\n \t-$(MV) ada/stamp-* stageprofile/ada\n ada.stagefeedback: stagefeedback-start\n-\t-$(MV) ada/*$(objext) ada/*.ali ada/b_*.c stagefeedback/ada\n+\t-$(MV) ada/*$(objext) ada/*.ali ada/b_gnat*.ad* stagefeedback/ada\n \t-$(MV) ada/stamp-* stagefeedback/ada\n \n lang_checks += check-gnat\n@@ -1086,19 +1086,28 @@ gnatstage2: force\n \n # Note that dependencies on obstack.h are not written\n # because that file is not part of GCC.\n-# Dependencies on gvarargs.h are not written\n-# because all that file does, when not compiling with GCC,\n-# is include the system varargs.h.\n \n # Ada language specific files.\n \n-ada/b_gnat1.c : $(GNAT1_ADA_OBJS)\n-\t$(GNATBIND) -C $(ADA_INCLUDES) -o ada/b_gnat1.c -n ada/gnat1drv.ali\n-ada/b_gnat1.o : ada/b_gnat1.c\n-\n-ada/b_gnatb.c : $(GNATBIND_OBJS) ada/gnatbind.o ada/interfac.o\n-\t$(GNATBIND) -C $(ADA_INCLUDES) -o ada/b_gnatb.c ada/gnatbind.ali\n-ada/b_gnatb.o : ada/b_gnatb.c\n+ada/b_gnat1.adb : $(GNAT1_ADA_OBJS)\n+        # Old gnatbind do not allow a path for -o.\n+\t$(GNATBIND) $(ADA_INCLUDES) -o b_gnat1.adb -n ada/gnat1drv.ali\n+\t$(MV) b_gnat1.adb b_gnat1.ads ada/\n+\n+ada/b_gnat1.o : ada/b_gnat1.adb\n+        # Do not use ADAFLAGS to get rid of -gnatg which generates a lot\n+        # of style messages.\n+\t$(CC) -c $(CFLAGS) $(ADA_CFLAGS) -gnatp -gnatws $(ADA_INCLUDES) \\\n+\t    $< $(OUTPUT_OPTION)\n+\n+ada/b_gnatb.adb : $(GNATBIND_OBJS) ada/gnatbind.o ada/interfac.o\n+        # Old gnatbind do not allow a path for -o.\n+\t$(GNATBIND) $(ADA_INCLUDES) -o b_gnatb.adb ada/gnatbind.ali\n+\t$(MV) b_gnatb.adb b_gnatb.ads ada/\n+\n+ada/b_gnatb.o : ada/b_gnatb.adb\n+\t$(CC) -c $(CFLAGS) $(ADA_CFLAGS) -gnatp -gnatws $(ADA_INCLUDES) \\\n+\t    $< $(OUTPUT_OPTION)\n \n include $(srcdir)/ada/Make-generated.in\n "}, {"sha": "71c00e2a813c693acb030aaa7caeb0b43e6a0844", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ad150f6cc733273ae838ebd77a1b9d6ed2985d1/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ad150f6cc733273ae838ebd77a1b9d6ed2985d1/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=8ad150f6cc733273ae838ebd77a1b9d6ed2985d1", "patch": "@@ -2687,13 +2687,19 @@ gnat-cross: force\n # because all that file does, when not compiling with GCC,\n # is include the system varargs.h.\n \n-b_gnatl.c : $(GNATLINK_OBJS)\n-\t$(GNATBIND) -C $(ADA_INCLUDES) -o b_gnatl.c gnatlink.ali\n-b_gnatl.o : b_gnatl.c\n+b_gnatl.adb : $(GNATLINK_OBJS)\n+\t$(GNATBIND) $(ADA_INCLUDES) -o b_gnatl.adb gnatlink.ali\n \n-b_gnatm.c : $(GNATMAKE_OBJS)\n-\t$(GNATBIND) -C $(ADA_INCLUDES) -o b_gnatm.c gnatmake.ali\n-b_gnatm.o : b_gnatm.c\n+b_gnatl.o : b_gnatl.adb\n+\t$(CC) -c $(ALL_ADAFLAGS) $(ADA_INCLUDES) -gnatws -gnatyN \\\n+\t    $< $(OUTPUT_OPTION)\n+\n+b_gnatm.adb : $(GNATMAKE_OBJS)\n+\t$(GNATBIND) $(ADA_INCLUDES) -o b_gnatm.adb gnatmake.ali\n+\n+b_gnatm.o : b_gnatm.adb\n+\t$(CC) -c $(ALL_ADAFLAGS) $(ADA_INCLUDES) -gnatws -gnatyN \\\n+\t    $< $(OUTPUT_OPTION)\n \n ADA_INCLUDE_DIR = $(libsubdir)/adainclude\n ADA_RTL_OBJ_DIR = $(libsubdir)/adalib"}]}