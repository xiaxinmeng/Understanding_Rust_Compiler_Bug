{"sha": "1919a4e7e0433898e98d790d19547c808a01c329", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTkxOWE0ZTdlMDQzMzg5OGU5OGQ3OTBkMTk1NDdjODA4YTAxYzMyOQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-01-28T00:46:23Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-01-28T00:46:23Z"}, "message": "verify.cc (class _Jv_BytecodeVerifier): Removed `FIXME' comment and to-do list.\n\n\t* verify.cc (class _Jv_BytecodeVerifier): Removed `FIXME' comment\n\tand to-do list.\n\t(state::merge): Use current class' class loader.\n\t(state::print): Print subroutine.\n\t(state::merge): Don't look at subroutine of unmerged `ret'.\n\nFrom-SVN: r49274", "tree": {"sha": "4cb93d76f4552c57f5b04dfeef22b9a5aaaefe02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4cb93d76f4552c57f5b04dfeef22b9a5aaaefe02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1919a4e7e0433898e98d790d19547c808a01c329", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1919a4e7e0433898e98d790d19547c808a01c329", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1919a4e7e0433898e98d790d19547c808a01c329", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1919a4e7e0433898e98d790d19547c808a01c329/comments", "author": null, "committer": null, "parents": [{"sha": "73068e369ffca55c491c6c519e7824eeb5011489", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73068e369ffca55c491c6c519e7824eeb5011489", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73068e369ffca55c491c6c519e7824eeb5011489"}], "stats": {"total": 35, "additions": 22, "deletions": 13}, "files": [{"sha": "4d49c9c6fd36202e3946c5722adb7a7a0e1e3470", "filename": "libjava/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1919a4e7e0433898e98d790d19547c808a01c329/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1919a4e7e0433898e98d790d19547c808a01c329/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=1919a4e7e0433898e98d790d19547c808a01c329", "patch": "@@ -1,3 +1,11 @@\n+2002-01-27  Tom Tromey  <tromey@redhat.com>\n+\n+\t* verify.cc (class _Jv_BytecodeVerifier): Removed `FIXME' comment\n+\tand to-do list.\n+\t(state::merge): Use current class' class loader.\n+\t(state::print): Print subroutine.\n+\t(state::merge): Don't look at subroutine of unmerged `ret'.\n+\n 2002-01-26 Andreas Tobler <a.tobler@schweiz.ch>\n \n \t* nogc.cc: Remove warnings."}, {"sha": "f45a276ef23dd63c6b25d9724b24da948ef6f1ad", "filename": "libjava/verify.cc", "status": "modified", "additions": 14, "deletions": 13, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1919a4e7e0433898e98d790d19547c808a01c329/libjava%2Fverify.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1919a4e7e0433898e98d790d19547c808a01c329/libjava%2Fverify.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fverify.cc?ref=1919a4e7e0433898e98d790d19547c808a01c329", "patch": "@@ -31,13 +31,6 @@ details.  */\n #include <stdio.h>\n #endif /* VERIFY_DEBUG */\n \n-// TO DO\n-// * read more about when classes must be loaded\n-// * class loader madness\n-// * Lots and lots of debugging and testing\n-// * type representation is still ugly.  look for the big switches\n-// * at least one GC problem :-(\n-\n \n static void debug_print (const char *fmt, ...)\n   __attribute__ ((format (printf, 1, 2)));\n@@ -608,7 +601,8 @@ class _Jv_BytecodeVerifier\n     }\n \n     // Merge OLD_TYPE into this.  On error throw exception.\n-    bool merge (type& old_type, bool local_semantics, _Jv_BytecodeVerifier *verifier)\n+    bool merge (type& old_type, bool local_semantics,\n+\t\t_Jv_BytecodeVerifier *verifier)\n     {\n       bool changed = false;\n       bool refo = old_type.isreference ();\n@@ -671,8 +665,9 @@ class _Jv_BytecodeVerifier\n \t\t    {\n \t\t      while (arraycount > 0)\n \t\t\t{\n-\t\t\t  // FIXME: Class loader.\n-\t\t\t  k = _Jv_GetArrayClass (k, NULL);\n+\t\t\t  java::lang::ClassLoader *loader\n+\t\t\t    = verifier->current_class->getClassLoader();\n+\t\t\t  k = _Jv_GetArrayClass (k, loader);\n \t\t\t  --arraycount;\n \t\t\t}\n \t\t      data.klass = k;\n@@ -903,7 +898,10 @@ class _Jv_BytecodeVerifier\n \t  subroutine = state_old->subroutine;\n \t  changed = true;\n \t}\n-      else\n+      // If we're handling the result of an unmerged `ret', then we\n+      // can't trust that it has the correct PC setting.  So in this\n+      // case we ignore what might otherwise look like a merge error.\n+      else if (! state_old->is_unmerged_ret_state (max_locals))\n \tverifier->verify_fail (\"subroutines merged\");\n \n       // Merge stacks.\n@@ -1013,7 +1011,11 @@ class _Jv_BytecodeVerifier\n       debug_print (\"    [local] \");\n       for (i = 0; i < max_locals; ++i)\n \tlocals[i].print ();\n-      debug_print (\"   | %p\\n\", this);\n+      if (subroutine == 0)\n+\tdebug_print (\"   | None\");\n+      else\n+\tdebug_print (\"   | %4d\", subroutine);\n+      debug_print (\" | %p\\n\", this);\n     }\n #else\n     inline void print (const char *, int, int, int) const\n@@ -2335,7 +2337,6 @@ class _Jv_BytecodeVerifier\n \t    break;\n \t  case op_dup2_x2:\n \t    {\n-\t      // FIXME\n \t      type t1 = pop_raw ();\n \t      if (t1.iswide ())\n \t\t{"}]}