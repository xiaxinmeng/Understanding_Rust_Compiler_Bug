{"sha": "80eb9ddd1c93949c2c97ee334534d80f844f5477", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODBlYjlkZGQxYzkzOTQ5YzJjOTdlZTMzNDUzNGQ4MGY4NDRmNTQ3Nw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2006-06-16T23:12:08Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2006-06-16T23:12:08Z"}, "message": "re PR c++/27979 (conversion check confused by enum bitfields)\n\n\tPR c++/27979\n\t* call.c (standard_conversion): Strip cv-qualifiers from bitfield\n\ttypes.\n\tPR c++/27979\n\t* g++.dg/expr/bitfield2.C: New test.\n\nFrom-SVN: r114733", "tree": {"sha": "0b14ef2cedb7b4e4c1452420175da078ed96bb77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b14ef2cedb7b4e4c1452420175da078ed96bb77"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/80eb9ddd1c93949c2c97ee334534d80f844f5477", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80eb9ddd1c93949c2c97ee334534d80f844f5477", "html_url": "https://github.com/Rust-GCC/gccrs/commit/80eb9ddd1c93949c2c97ee334534d80f844f5477", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80eb9ddd1c93949c2c97ee334534d80f844f5477/comments", "author": null, "committer": null, "parents": [{"sha": "43765c8a70c0e27f277b4f1fa1adde59ff9c0f7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43765c8a70c0e27f277b4f1fa1adde59ff9c0f7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/43765c8a70c0e27f277b4f1fa1adde59ff9c0f7d"}], "stats": {"total": 20, "additions": 18, "deletions": 2}, "files": [{"sha": "35001a03a4794f13073d8e6896c8faca8d53eab9", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80eb9ddd1c93949c2c97ee334534d80f844f5477/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80eb9ddd1c93949c2c97ee334534d80f844f5477/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=80eb9ddd1c93949c2c97ee334534d80f844f5477", "patch": "@@ -1,5 +1,9 @@\n 2006-06-16  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/27979\n+\t* call.c (standard_conversion): Strip cv-qualifiers from bitfield\n+\ttypes.\n+\n \tPR c++/27884\n \t* decl.c (have_extern_spec): Remove.\n \t(start_decl): Do not check have_extern_spec."}, {"sha": "970fce7ad220bd8798f6424c194a93df5f7241e8", "filename": "gcc/cp/call.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80eb9ddd1c93949c2c97ee334534d80f844f5477/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80eb9ddd1c93949c2c97ee334534d80f844f5477/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=80eb9ddd1c93949c2c97ee334534d80f844f5477", "patch": "@@ -632,7 +632,7 @@ standard_conversion (tree to, tree from, tree expr, bool c_cast_p,\n \t  tree bitfield_type;\n \t  bitfield_type = is_bitfield_expr_with_lowered_type (expr);\n \t  if (bitfield_type)\n-\t    from = bitfield_type;\n+\t    from = strip_top_quals (bitfield_type);\n \t}\n       conv = build_conv (ck_rvalue, from, conv);\n     }"}, {"sha": "b4cc183d964782ad0f7ca824e1a42219409c3c7b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80eb9ddd1c93949c2c97ee334534d80f844f5477/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80eb9ddd1c93949c2c97ee334534d80f844f5477/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=80eb9ddd1c93949c2c97ee334534d80f844f5477", "patch": "@@ -1,7 +1,10 @@\n 2006-06-16  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/27979\n+\t* g++.dg/expr/bitfield2.C: New test. \n+\n \tPR c++/27884\n-\t* g++.dg/parse/linkage2.C: New test\n+\t* g++.dg/parse/linkage2.C: New test.\n \n 2006-06-16  Richard Guenther  <rguenther@suse.de>\n "}, {"sha": "6599315304fcd86b23d4c48b76baedb474f54937", "filename": "gcc/testsuite/g++.dg/expr/bitfield2.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80eb9ddd1c93949c2c97ee334534d80f844f5477/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fbitfield2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80eb9ddd1c93949c2c97ee334534d80f844f5477/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fbitfield2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fbitfield2.C?ref=80eb9ddd1c93949c2c97ee334534d80f844f5477", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/27979\n+\n+class Ast\n+{\n+  enum AstKind { };\n+  const AstKind kind : 8;\n+  void foo(AstKind k) { }\n+  void bar(void) { foo(kind); }\n+};"}]}