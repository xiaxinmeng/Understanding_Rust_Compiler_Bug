{"sha": "80aa8340eb9eefbbf55ba9150abec353500573d5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODBhYTgzNDBlYjllZWZiYmY1NWJhOTE1MGFiZWMzNTM1MDA1NzNkNQ==", "commit": {"author": {"name": "Ziemowit Laski", "email": "zlaski@apple.com", "date": "2004-09-10T20:47:34Z"}, "committer": {"name": "Ziemowit Laski", "email": "zlaski@gcc.gnu.org", "date": "2004-09-10T20:47:34Z"}, "message": "decl.c (objc_get_current_scope, [...]): New functions, to be called from ObjC++.\n\n[gcc/cp/ChangeLog]\n2004-09-10  Ziemowit Laski  <zlaski@apple.com>\n\n        * decl.c (objc_get_current_scope, objc_mark_locals_volatile):\n        New functions, to be called from ObjC++.\n\nFrom-SVN: r87321", "tree": {"sha": "1064b1a45e8322e7e3ae36a5af70009c4b2cd540", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1064b1a45e8322e7e3ae36a5af70009c4b2cd540"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/80aa8340eb9eefbbf55ba9150abec353500573d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80aa8340eb9eefbbf55ba9150abec353500573d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/80aa8340eb9eefbbf55ba9150abec353500573d5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80aa8340eb9eefbbf55ba9150abec353500573d5/comments", "author": null, "committer": null, "parents": [{"sha": "375d2edc9f376bd6bb0e102075744664edb0c6c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/375d2edc9f376bd6bb0e102075744664edb0c6c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/375d2edc9f376bd6bb0e102075744664edb0c6c3"}], "stats": {"total": 37, "additions": 37, "deletions": 0}, "files": [{"sha": "2de9a9f450f051919af4b726d445ec887104bb95", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80aa8340eb9eefbbf55ba9150abec353500573d5/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80aa8340eb9eefbbf55ba9150abec353500573d5/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=80aa8340eb9eefbbf55ba9150abec353500573d5", "patch": "@@ -1,3 +1,8 @@\n+2004-09-10  Ziemowit Laski  <zlaski@apple.com>\n+\n+\t* decl.c (objc_get_current_scope, objc_mark_locals_volatile):\n+\tNew functions, to be called from ObjC++.\n+\n 2004-09-10  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* class.c, cp-tree.h, decl.c, decl2.c, mangle.c,"}, {"sha": "f2d8fc2f564ce81a9b47cc8d55131c8ef2cba04c", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80aa8340eb9eefbbf55ba9150abec353500573d5/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80aa8340eb9eefbbf55ba9150abec353500573d5/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=80aa8340eb9eefbbf55ba9150abec353500573d5", "patch": "@@ -403,6 +403,38 @@ pop_labels (tree block)\n   named_labels = NULL;\n }\n \n+/* The following two routines are used to interface to Objective-C++.\n+   The binding level is purposely treated as an opaque type.  */\n+\n+void *\n+objc_get_current_scope (void)\n+{\n+  return current_binding_level;\n+}\n+\n+/* The following routine is used by the NeXT-style SJLJ exceptions;\n+   variables get marked 'volatile' so as to not be clobbered by\n+   _setjmp()/_longjmp() calls.  */\n+\n+void\n+objc_mark_locals_volatile (void *enclosing_blk)\n+{\n+  struct cp_binding_level *scope;\n+\n+  for (scope = current_binding_level;\n+       scope && scope != enclosing_blk && scope->kind == sk_block;\n+       scope = scope->level_chain)\n+    {\n+      tree decl;\n+\n+      for (decl = scope->names; decl; decl = TREE_CHAIN (decl))\n+        {\n+          DECL_REGISTER (decl) = 0;\n+          TREE_THIS_VOLATILE (decl) = 1;\n+        }\n+    }\n+}\n+\n /* Exit a binding level.\n    Pop the level off, and restore the state of the identifier-decl mappings\n    that were in effect when this level was entered."}]}