{"sha": "114e816e3f80ea999d329d0a187ef1e53348645b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTE0ZTgxNmUzZjgwZWE5OTlkMzI5ZDBhMTg3ZWYxZTUzMzQ4NjQ1Yg==", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2016-06-02T08:54:15Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2016-06-02T08:54:15Z"}, "message": "Fix fallout from: [ARM] PR target/70830: Avoid POP-{reglist}^ when returning from interrupt handlers\n\n\tPR target/70830\n\t* config/arm/arm.c (arm_output_multireg_pop): Guard \"pop\" on update.\n\nFrom-SVN: r237027", "tree": {"sha": "667840947661a7838da0b05f265a8533938499ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/667840947661a7838da0b05f265a8533938499ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/114e816e3f80ea999d329d0a187ef1e53348645b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/114e816e3f80ea999d329d0a187ef1e53348645b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/114e816e3f80ea999d329d0a187ef1e53348645b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/114e816e3f80ea999d329d0a187ef1e53348645b/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "521466e5cc8aa2b45f41c2aa71915eab1290c617", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/521466e5cc8aa2b45f41c2aa71915eab1290c617", "html_url": "https://github.com/Rust-GCC/gccrs/commit/521466e5cc8aa2b45f41c2aa71915eab1290c617"}], "stats": {"total": 11, "additions": 7, "deletions": 4}, "files": [{"sha": "23171c578d18db2150fbe42a5fbe3cd179b9790e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/114e816e3f80ea999d329d0a187ef1e53348645b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/114e816e3f80ea999d329d0a187ef1e53348645b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=114e816e3f80ea999d329d0a187ef1e53348645b", "patch": "@@ -1,3 +1,8 @@\n+2016-06-02  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+\tPR target/70830\n+\t* config/arm/arm.c (arm_output_multireg_pop): Guard \"pop\" on update.\n+\n 2016-06-02  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* config/rs6000/dfp.md (trunctddd2): Correct the \"length\" attribute."}, {"sha": "47d2447ed34c4a1be46dff489ef8b4d0c30d4cde", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/114e816e3f80ea999d329d0a187ef1e53348645b/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/114e816e3f80ea999d329d0a187ef1e53348645b/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=114e816e3f80ea999d329d0a187ef1e53348645b", "patch": "@@ -17781,10 +17781,8 @@ arm_output_multireg_pop (rtx *operands, bool return_pc, rtx cond, bool reverse,\n \n   conditional = reverse ? \"%?%D0\" : \"%?%d0\";\n   /* Can't use POP if returning from an interrupt.  */\n-  if ((regno_base == SP_REGNUM) && !(interrupt_p && return_pc))\n-    {\n-      sprintf (pattern, \"pop%s\\t{\", conditional);\n-    }\n+  if ((regno_base == SP_REGNUM) && update && !(interrupt_p && return_pc))\n+    sprintf (pattern, \"pop%s\\t{\", conditional);\n   else\n     {\n       /* Output ldmfd when the base register is SP, otherwise output ldmia."}]}