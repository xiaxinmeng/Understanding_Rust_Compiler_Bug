{"sha": "fda2d61208385823f6b75f637eed60a9e77256c1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmRhMmQ2MTIwODM4NTgyM2Y2Yjc1ZjYzN2VlZDYwYTllNzcyNTZjMQ==", "commit": {"author": {"name": "David Edelsohn", "email": "dje.gcc@gmail.com", "date": "2016-11-07T20:33:30Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2016-11-07T20:33:30Z"}, "message": "scanasm.exp (hidden-scan-for): Add XCOFF support.\n\n        * lib/scanasm.exp (hidden-scan-for): Add XCOFF support.\n\n        * gfortran.dg/implicit_class_1.f90: Skip on AIX.\n        * gcc.dg/visibility-14.c: XFAIL AIX.\n        * gcc.dg/visibility-15.c: XFAIL AIX.\n        * gcc.dg/visibility-16.c: XFAIL AIX.\n        * gcc.dg/visibility-17.c: XFAIL AIX.\n        * gcc.dg/visibility-18.c: XFAIL AIX.\n        * gcc.dg/visibility-19.c: XFAIL AIX.\n        * g++.dg/ext/visibility/anon1.C: XFAIL AIX.\n        * g++.dg/ext/visibility/anon2.C: XFAIL AIX.\n        * g++.dg/ext/visibility/pragma-override1.C: XFAIL AIX.\n        * g++.dg/ext/visibility/pragma-override2.C: XFAIL AIX.\n\nFrom-SVN: r241934", "tree": {"sha": "3064552523cc1d37db02f43aca9c22b1349e18ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3064552523cc1d37db02f43aca9c22b1349e18ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fda2d61208385823f6b75f637eed60a9e77256c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fda2d61208385823f6b75f637eed60a9e77256c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fda2d61208385823f6b75f637eed60a9e77256c1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fda2d61208385823f6b75f637eed60a9e77256c1/comments", "author": {"login": "edelsohn", "id": 667700, "node_id": "MDQ6VXNlcjY2NzcwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/667700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edelsohn", "html_url": "https://github.com/edelsohn", "followers_url": "https://api.github.com/users/edelsohn/followers", "following_url": "https://api.github.com/users/edelsohn/following{/other_user}", "gists_url": "https://api.github.com/users/edelsohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/edelsohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edelsohn/subscriptions", "organizations_url": "https://api.github.com/users/edelsohn/orgs", "repos_url": "https://api.github.com/users/edelsohn/repos", "events_url": "https://api.github.com/users/edelsohn/events{/privacy}", "received_events_url": "https://api.github.com/users/edelsohn/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "621d0992d15c01914f5fadfe7f952a8eccb76396", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/621d0992d15c01914f5fadfe7f952a8eccb76396", "html_url": "https://github.com/Rust-GCC/gccrs/commit/621d0992d15c01914f5fadfe7f952a8eccb76396"}], "stats": {"total": 38, "additions": 28, "deletions": 10}, "files": [{"sha": "5dc544e16feeb9e6b1957c52c6eccf66d598809e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -1,3 +1,19 @@\n+2016-11-07  David Edelsohn  <dje.gcc@gmail.com>\n+\n+\t* lib/scanasm.exp (hidden-scan-for): Add XCOFF support.\n+\n+\t* gfortran.dg/implicit_class_1.f90: Skip on AIX.\n+\t* gcc.dg/visibility-14.c: XFAIL AIX.\n+\t* gcc.dg/visibility-15.c: XFAIL AIX.\n+\t* gcc.dg/visibility-16.c: XFAIL AIX.\n+\t* gcc.dg/visibility-17.c: XFAIL AIX.\n+\t* gcc.dg/visibility-18.c: XFAIL AIX.\n+\t* gcc.dg/visibility-19.c: XFAIL AIX.\n+\t* g++.dg/ext/visibility/anon1.C: XFAIL AIX.\n+\t* g++.dg/ext/visibility/anon2.C: XFAIL AIX.\n+\t* g++.dg/ext/visibility/pragma-override1.C: XFAIL AIX.\n+\t* g++.dg/ext/visibility/pragma-override2.C: XFAIL AIX.\n+\n 2016-11-07  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/78227"}, {"sha": "0135f931a6f75e3571448e7d311abdef025305f0", "filename": "gcc/testsuite/g++.dg/ext/visibility/anon1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fanon1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fanon1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fanon1.C?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -2,7 +2,7 @@\n // Test for anonymous namespace internal linkage\n \n // { dg-do compile }\n-// { dg-final { scan-assembler-not \"globl.*_ZN.*1fEv\" } }\n+// { dg-final { scan-assembler-not \"globl.*_ZN.*1fEv\" { xfail *-*-aix* } } }\n // { dg-require-visibility \"\" }\n \n namespace"}, {"sha": "dcf0e64fa23c649ae5e4a16624b9711d47871410", "filename": "gcc/testsuite/g++.dg/ext/visibility/anon2.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fanon2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fanon2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fanon2.C?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -1,7 +1,7 @@\n // Test for propagation of anonymous namespace internal linkage\n \n // { dg-do compile }\n-// { dg-final { scan-assembler-not \"globl.*_Z1fv\" } }\n+// { dg-final { scan-assembler-not \"globl.*_Z1fv\" { xfail *-*-aix* } } }\n // { dg-require-visibility \"\" }\n \n namespace"}, {"sha": "b6bc0c5466a543174e05aeae9f86f2a2cd1ebff3", "filename": "gcc/testsuite/g++.dg/ext/visibility/pragma-override1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fpragma-override1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fpragma-override1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fpragma-override1.C?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -1,7 +1,7 @@\n /* Test that #pragma GCC visibility does not override class member specific settings. */\n /* { dg-do compile } */\n /* { dg-require-visibility \"internal\" } */\n-/* { dg-final { scan-assembler \"\\\\.internal.*Foo.methodEv\" { target { ! { *-*-solaris2* *-*-darwin* } } } } } */\n+/* { dg-final { scan-assembler \"\\\\.internal.*Foo.methodEv\" { target { ! { *-*-solaris2* *-*-darwin* *-*-aix* } } } } } */\n /* { dg-final { scan-assembler \"\\\\.(internal|hidden).*Foo.methodEv\" { target *-*-solaris2* } } } */\n \n #pragma GCC visibility push(hidden)"}, {"sha": "8499ceff60a6ff0bff486eb9434a91ea3675fb43", "filename": "gcc/testsuite/g++.dg/ext/visibility/pragma-override2.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fpragma-override2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fpragma-override2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fpragma-override2.C?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -1,7 +1,7 @@\n /* Test that #pragma GCC visibility does not override class member specific settings. */\n /* { dg-do compile } */\n /* { dg-require-visibility \"internal\" } */\n-/* { dg-final { scan-assembler \"\\\\.internal.*Foo.methodEv\" { target { ! { *-*-solaris2* *-*-darwin* } } } } } */\n+/* { dg-final { scan-assembler \"\\\\.internal.*Foo.methodEv\" { target { ! { *-*-solaris2* *-*-darwin* *-*-aix* } } } } } */\n /* { dg-final { scan-assembler \"\\\\.(internal|hidden).*Foo.methodEv\" { target *-*-solaris2* } } } */\n \n #pragma GCC visibility push(hidden)"}, {"sha": "e1d85f0ed25c9aaef108879864e732fb212bdea0", "filename": "gcc/testsuite/gcc.dg/visibility-14.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-14.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-14.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-14.c?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -2,7 +2,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"\" { *-*-darwin* } { \"*\" } { \"\" } } */\n /* { dg-require-visibility \"\" } */\n-/* { dg-final { scan-hidden \"foo\" } } */\n+/* { dg-final { scan-hidden \"foo\" { xfail *-*-aix* } } } */\n \n extern void foo(void) __attribute__ ((visibility (\"hidden\")));\n int f () {"}, {"sha": "4e69fa1db4cbdce85d4e2d3e74c1d69e33620fd9", "filename": "gcc/testsuite/gcc.dg/visibility-15.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-15.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-15.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-15.c?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -2,7 +2,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"\" { *-*-darwin* } { \"*\" } { \"\" } } */\n /* { dg-require-visibility \"\" } */\n-/* { dg-final { scan-hidden \"foo\" } } */\n+/* { dg-final { scan-hidden \"foo\" { xfail *-*-aix* } } } */\n \n extern void foo(void) __attribute__ ((visibility (\"hidden\")));\n typedef void (*foo_t)(void);"}, {"sha": "dcd5448d182ddb40760f8edd3e141b67669a4c1d", "filename": "gcc/testsuite/gcc.dg/visibility-16.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-16.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-16.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-16.c?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -2,7 +2,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"\" { *-*-darwin* } { \"*\" } { \"\" } } */\n /* { dg-require-visibility \"\" } */\n-/* { dg-final { scan-hidden \"foo\" } } */\n+/* { dg-final { scan-hidden \"foo\" { xfail *-*-aix* } } } */\n \n extern int foo __attribute__ ((visibility (\"hidden\")));\n int f () {"}, {"sha": "dc90d35839f564ec6d601317780148f6e39ba735", "filename": "gcc/testsuite/gcc.dg/visibility-17.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-17.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-17.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-17.c?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -2,7 +2,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"\" { *-*-darwin* } { \"*\" } { \"\" } } */\n /* { dg-require-visibility \"\" } */\n-/* { dg-final { scan-hidden \"foo\" } } */\n+/* { dg-final { scan-hidden \"foo\" { xfail *-*-aix* } } } */\n \n extern int foo __attribute__ ((visibility (\"hidden\")));\n int *f () {"}, {"sha": "653e3b1971f4d267efaa6a8892f7d90857e31dbf", "filename": "gcc/testsuite/gcc.dg/visibility-18.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-18.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-18.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-18.c?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -2,7 +2,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"\" { *-*-darwin* } { \"*\" } { \"\" } } */\n /* { dg-require-visibility \"\" } */\n-/* { dg-final { scan-hidden \"foo\" } } */\n+/* { dg-final { scan-hidden \"foo\" { xfail *-*-aix* } } } */\n \n extern int foo __attribute__ ((visibility (\"hidden\")));\n int *test = &foo;"}, {"sha": "2b0b9beb401a74b3c7b0c2ba2ea88120337bbec5", "filename": "gcc/testsuite/gcc.dg/visibility-19.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-19.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-19.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvisibility-19.c?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -2,7 +2,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"\" { *-*-darwin* } { \"*\" } { \"\" } } */\n /* { dg-require-visibility \"\" } */\n-/* { dg-final { scan-hidden \"foo\" } } */\n+/* { dg-final { scan-hidden \"foo\" { xfail *-*-aix* } } } */\n \n extern void foo(void) __attribute__ ((visibility (\"hidden\")));\n typedef void (*foo_t)(void);"}, {"sha": "380942cfdba559aa94c23ebcddd76196d657f288", "filename": "gcc/testsuite/gfortran.dg/implicit_class_1.f90", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_class_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_class_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_class_1.f90?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -1,4 +1,5 @@\n ! { dg-do run }\n+! { dg-skip-if \"\" { powerpc-ibm-aix* } { \"*\" } { \"\" } }\n !\n ! PR 56500: [OOP] \"IMPLICIT CLASS(...)\" wrongly rejected\n !"}, {"sha": "707f63bea24eaa1663e78ff99e85b1d215b56223", "filename": "gcc/testsuite/lib/scanasm.exp", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Flib%2Fscanasm.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fda2d61208385823f6b75f637eed60a9e77256c1/gcc%2Ftestsuite%2Flib%2Fscanasm.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fscanasm.exp?ref=fda2d61208385823f6b75f637eed60a9e77256c1", "patch": "@@ -103,6 +103,7 @@ proc hidden-scan-for { symbol } {\n     set objformat [gcc_target_object_format]\n \n     switch $objformat {\n+        coff     { return \"$symbol\\[,\\d\\]*hidden\" }\n         elf      { return \"hidden\\[ \\t_\\]*$symbol\" }\n         mach-o   { return \"private_extern\\[ \\t_\\]*_?$symbol\" }\n         default  { return \"\" }"}]}