{"sha": "a171ac0380a22f992d9c57a4189ddfc834d0e022", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTE3MWFjMDM4MGEyMmY5OTJkOWM1N2E0MTg5ZGRmYzgzNGQwZTAyMg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-08-09T17:15:02Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-08-09T17:15:02Z"}, "message": "compiler: handle >32bit exponent in Ldexp\n    \n    Libgo's implementation of math.Ldexp declared the libc \"ldexp\" as\n    taking an 'int' exponent argument, which is not quite right for 64-bit\n    platforms (exp arg is always int32); this could yield incorrect\n    results for exponent values outside the range of Minint32/Maxint32.\n    Fix by upating the type for the libc version of ldexp, and adding\n    guards to screen for out-of-range exponents.\n    \n    Fixes #21323.\n    \n    Reviewed-on: https://go-review.googlesource.com/54250\n\nFrom-SVN: r250992", "tree": {"sha": "154cca144f12a16ddd90a6311693784825b3485a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/154cca144f12a16ddd90a6311693784825b3485a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a171ac0380a22f992d9c57a4189ddfc834d0e022", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a171ac0380a22f992d9c57a4189ddfc834d0e022", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a171ac0380a22f992d9c57a4189ddfc834d0e022", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a171ac0380a22f992d9c57a4189ddfc834d0e022/comments", "author": null, "committer": null, "parents": [{"sha": "0ca970cd53e8fb86462ae36fab068f3a8073bc86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ca970cd53e8fb86462ae36fab068f3a8073bc86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ca970cd53e8fb86462ae36fab068f3a8073bc86"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "4fe569ccd73ab2e3795554807c8b17da7ccafba3", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a171ac0380a22f992d9c57a4189ddfc834d0e022/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a171ac0380a22f992d9c57a4189ddfc834d0e022/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=a171ac0380a22f992d9c57a4189ddfc834d0e022", "patch": "@@ -1,4 +1,4 @@\n-db685a1a9aa8b3b916dd6d1284895e01d73158e1\n+5fd112e5c2968e94761c41519c451d789e23a92b\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "e91a090c986733a5d8860ed61d3baf97a8ad7828", "filename": "libgo/go/math/ldexp.go", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a171ac0380a22f992d9c57a4189ddfc834d0e022/libgo%2Fgo%2Fmath%2Fldexp.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a171ac0380a22f992d9c57a4189ddfc834d0e022/libgo%2Fgo%2Fmath%2Fldexp.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fmath%2Fldexp.go?ref=a171ac0380a22f992d9c57a4189ddfc834d0e022", "patch": "@@ -13,10 +13,15 @@ package math\n //\tLdexp(NaN, exp) = NaN\n \n //extern ldexp\n-func libc_ldexp(float64, int) float64\n+func libc_ldexp(float64, int32) float64\n \n func Ldexp(frac float64, exp int) float64 {\n-\tr := libc_ldexp(frac, exp)\n+\tif exp > MaxInt32 {\n+\t\texp = MaxInt32\n+\t} else if exp < MinInt32 {\n+\t\texp = MinInt32\n+\t}\n+\tr := libc_ldexp(frac, int32(exp))\n \treturn r\n }\n "}]}