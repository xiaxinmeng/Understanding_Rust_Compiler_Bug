{"sha": "7e5a0317adbf1c9bc2ee5f6446bd161854c03373", "node_id": "C_kwDOANBUbNoAKDdlNWEwMzE3YWRiZjFjOWJjMmVlNWY2NDQ2YmQxNjE4NTRjMDMzNzM", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2022-06-23T11:09:51Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-07-12T12:24:14Z"}, "message": "[Ada] Fix confusing error expression on an unknown restriction\n\nWhen pragma Restriction is used with an unknown restriction identifier,\nit is better to not process the restriction expression, as it will\nlikely produce confusing error message.\n\nIn particular, an odd message appeared when there was a typo in the\nrestriction identifier whose expression requires special processing\n(e.g.  No_Dependence_On instead of No_Dependence).\n\ngcc/ada/\n\n\t* sem_prag.adb (Process_Restrictions_Or_Restriction_Warnings):\n\tDo not process expression of unknown restrictions.", "tree": {"sha": "404cb9145da0dcfdb13527642d4705480cb8c53d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/404cb9145da0dcfdb13527642d4705480cb8c53d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e5a0317adbf1c9bc2ee5f6446bd161854c03373", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e5a0317adbf1c9bc2ee5f6446bd161854c03373", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e5a0317adbf1c9bc2ee5f6446bd161854c03373", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e5a0317adbf1c9bc2ee5f6446bd161854c03373/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a7a02f4355bb81f7cb253fc900ad57c9503f5c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a7a02f4355bb81f7cb253fc900ad57c9503f5c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a7a02f4355bb81f7cb253fc900ad57c9503f5c7"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "35910400cf9afeaacafee30e85ed40e9c4680b7d", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e5a0317adbf1c9bc2ee5f6446bd161854c03373/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e5a0317adbf1c9bc2ee5f6446bd161854c03373/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=7e5a0317adbf1c9bc2ee5f6446bd161854c03373", "patch": "@@ -10792,13 +10792,15 @@ package body Sem_Prag is\n \n             else\n                R_Id := Get_Restriction_Id (Process_Restriction_Synonyms (Arg));\n-               Analyze_And_Resolve (Expr, Any_Integer);\n \n                if R_Id not in All_Parameter_Restrictions then\n                   Error_Pragma_Arg\n                     (\"invalid restriction parameter identifier\", Arg);\n+               end if;\n+\n+               Analyze_And_Resolve (Expr, Any_Integer);\n \n-               elsif not Is_OK_Static_Expression (Expr) then\n+               if not Is_OK_Static_Expression (Expr) then\n                   Flag_Non_Static_Expr\n                     (\"value must be static expression!\", Expr);\n                   raise Pragma_Exit;"}]}