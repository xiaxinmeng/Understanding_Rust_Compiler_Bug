{"sha": "93bfc8c003e7367f0f873b566833a12c092b2755", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTNiZmM4YzAwM2U3MzY3ZjBmODczYjU2NjgzM2ExMmMwOTJiMjc1NQ==", "commit": {"author": {"name": "Gary Dismukes", "email": "dismukes@adacore.com", "date": "2019-08-13T08:07:51Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-08-13T08:07:51Z"}, "message": "[Ada] Do full name qualification of local exception names for LLVM\n\nExceptions declared within subprograms are associated with objects\nallocated statically (at the global level), and it's helpful for the\nLLVM compiler (and likely others, such as CCG) if the exception name is\nfully qualified, to avoid link name clashes (gcc-based GNAT has always\n\"uniquified\" these names). GNAT was using the simple name for local\nexceptions (as for other local objects), but it now uses fully qualified\nnames for all exceptions.\n\nWhen compiled with the command:\n\ngcc -c -gnatG local_exception.adb | grep \"local_exception__local_exc\"\n\nthe following output is generated for the test further below:\n\n   local_exception__local_exc : static exception := (\n        local_exception__local_exc'unrestricted_access));\n\nprocedure Local_Exception is\n\n  Local_Exc : exception;\n\nbegin\n   null;\nend Local_Exception;\n\n2019-08-13  Gary Dismukes  <dismukes@adacore.com>\n\ngcc/ada/\n\n\t* exp_dbug.adb (Fully_Qualify_Name): Add full name qualification\n\tfor the E_Exception case.\n\nFrom-SVN: r274349", "tree": {"sha": "230d6b94363947497aebb04b7ccf3f8f52ae1652", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/230d6b94363947497aebb04b7ccf3f8f52ae1652"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/93bfc8c003e7367f0f873b566833a12c092b2755", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93bfc8c003e7367f0f873b566833a12c092b2755", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93bfc8c003e7367f0f873b566833a12c092b2755", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93bfc8c003e7367f0f873b566833a12c092b2755/comments", "author": {"login": "dismukes", "id": 50880541, "node_id": "MDQ6VXNlcjUwODgwNTQx", "avatar_url": "https://avatars.githubusercontent.com/u/50880541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dismukes", "html_url": "https://github.com/dismukes", "followers_url": "https://api.github.com/users/dismukes/followers", "following_url": "https://api.github.com/users/dismukes/following{/other_user}", "gists_url": "https://api.github.com/users/dismukes/gists{/gist_id}", "starred_url": "https://api.github.com/users/dismukes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dismukes/subscriptions", "organizations_url": "https://api.github.com/users/dismukes/orgs", "repos_url": "https://api.github.com/users/dismukes/repos", "events_url": "https://api.github.com/users/dismukes/events{/privacy}", "received_events_url": "https://api.github.com/users/dismukes/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4167b0752365c69e5895b5c8097e7dba34f735f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4167b0752365c69e5895b5c8097e7dba34f735f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4167b0752365c69e5895b5c8097e7dba34f735f5"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "d9b757252574d23dd68aef61dfa2f55075bcfa42", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93bfc8c003e7367f0f873b566833a12c092b2755/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93bfc8c003e7367f0f873b566833a12c092b2755/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=93bfc8c003e7367f0f873b566833a12c092b2755", "patch": "@@ -1,3 +1,8 @@\n+2019-08-13  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* exp_dbug.adb (Fully_Qualify_Name): Add full name qualification\n+\tfor the E_Exception case.\n+\n 2019-08-13  Gary Dismukes  <dismukes@adacore.com>\n \n \t* exp_aggr.adb (Aggr_Size_OK): Compute the aggregate size using"}, {"sha": "3dbe9ad71519ec662b71a94808c63fd77dc02878", "filename": "gcc/ada/exp_dbug.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93bfc8c003e7367f0f873b566833a12c092b2755/gcc%2Fada%2Fexp_dbug.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93bfc8c003e7367f0f873b566833a12c092b2755/gcc%2Fada%2Fexp_dbug.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_dbug.adb?ref=93bfc8c003e7367f0f873b566833a12c092b2755", "patch": "@@ -1539,6 +1539,7 @@ package body Exp_Dbug is\n       elsif Is_Subprogram (Ent)\n         or else Ekind (Ent) = E_Subprogram_Body\n         or else Is_Type (Ent)\n+        or else Ekind (Ent) = E_Exception\n       then\n          Fully_Qualify_Name (Ent);\n          Name_Len := Full_Qualify_Len;"}]}