{"sha": "4c77d7f403bb9f6ce2a55dc40e1bf87720f6e3eb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGM3N2Q3ZjQwM2JiOWY2Y2UyYTU1ZGM0MGUxYmY4NzcyMGY2ZTNlYg==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2009-01-04T17:51:05Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2009-01-04T17:51:05Z"}, "message": "struct-ret-3.c: Include unistd.h.\n\n\t* gcc.dg/struct-ret-3.c: Include unistd.h.\n\t(main): Exit early if system memory page size is\n\tlarger than 4096 bytes.\n\nFrom-SVN: r143056", "tree": {"sha": "01d3b8da516b028a7d9a846954e671bcf811056e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/01d3b8da516b028a7d9a846954e671bcf811056e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c77d7f403bb9f6ce2a55dc40e1bf87720f6e3eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c77d7f403bb9f6ce2a55dc40e1bf87720f6e3eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c77d7f403bb9f6ce2a55dc40e1bf87720f6e3eb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c77d7f403bb9f6ce2a55dc40e1bf87720f6e3eb/comments", "author": null, "committer": null, "parents": [{"sha": "dcc31d1148330b87e41773bf5d28cfccacd10ec5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcc31d1148330b87e41773bf5d28cfccacd10ec5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcc31d1148330b87e41773bf5d28cfccacd10ec5"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "a38b9d165a2129f7c31f534c61419f9824826bb8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c77d7f403bb9f6ce2a55dc40e1bf87720f6e3eb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c77d7f403bb9f6ce2a55dc40e1bf87720f6e3eb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4c77d7f403bb9f6ce2a55dc40e1bf87720f6e3eb", "patch": "@@ -1,3 +1,9 @@\n+2009-01-04  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* gcc.dg/struct-ret-3.c: Include unistd.h.\n+\t(main): Exit early if system memory page size is\n+\tlarger than 4096 bytes.\n+\n 2009-01-04  Daniel Franke  <franke.daniel@gmail.com>\n \n \tPR fortran/38718\n@@ -75,7 +81,7 @@\n \t* gcc.c-torture/compile/pr38564.c: New testcase.\n \n 2008-12-29  Dorit Nuzman  <dorit@il.ibm.com>\n-            Ira Rosen  <irar@il.ibm.com>\n+\t    Ira Rosen  <irar@il.ibm.com>\n \n \tPR tree-optimization/38529\n \t* gcc.dg/vect/pr38529.c: New test."}, {"sha": "c384d49c590bf5e9fe74ce38756716ef93d946bb", "filename": "gcc/testsuite/gcc.dg/struct-ret-3.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c77d7f403bb9f6ce2a55dc40e1bf87720f6e3eb/gcc%2Ftestsuite%2Fgcc.dg%2Fstruct-ret-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c77d7f403bb9f6ce2a55dc40e1bf87720f6e3eb/gcc%2Ftestsuite%2Fgcc.dg%2Fstruct-ret-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fstruct-ret-3.c?ref=4c77d7f403bb9f6ce2a55dc40e1bf87720f6e3eb", "patch": "@@ -7,6 +7,7 @@\n #include <string.h>\n #include <stdio.h>\n #include <errno.h>\n+#include <unistd.h>\n \n unsigned long ossAlignX(unsigned long i, unsigned long X)\n {\n@@ -69,6 +70,11 @@ int main(void)\n \n    char buf[sizeof(struct stuff)+4096];\n    struct stuff *u = (struct stuff *)ossAlignX((unsigned long)&buf[0], 4096);\n+\n+   /* This test assumes system memory page size of 4096 bytes or less.  */\n+   if (sysconf(_SC_PAGESIZE) > 4096)\n+     return 0;\n+\n    memset(u, 1, sizeof(struct stuff));\n    u->c1[0] = '\\xAA';\n    u->c2[0] = '\\xBB';"}]}