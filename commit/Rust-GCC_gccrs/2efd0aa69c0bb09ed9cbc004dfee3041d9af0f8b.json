{"sha": "2efd0aa69c0bb09ed9cbc004dfee3041d9af0f8b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmVmZDBhYTY5YzBiYjA5ZWQ5Y2JjMDA0ZGZlZTMwNDFkOWFmMGY4Yg==", "commit": {"author": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2011-03-18T12:19:50Z"}, "committer": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2011-03-18T12:19:50Z"}, "message": "sh.c (sh_delegitimize_address): Handle UNSPEC_SYMOFF and UNSPEC_PCREL_SYMOFF.\n\n\t* config/sh/sh.c (sh_delegitimize_address): Handle UNSPEC_SYMOFF\n\tand UNSPEC_PCREL_SYMOFF.\n\nFrom-SVN: r171134", "tree": {"sha": "723c29c9fa27aecc9325c6f3d209666ed53ead50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/723c29c9fa27aecc9325c6f3d209666ed53ead50"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2efd0aa69c0bb09ed9cbc004dfee3041d9af0f8b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2efd0aa69c0bb09ed9cbc004dfee3041d9af0f8b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2efd0aa69c0bb09ed9cbc004dfee3041d9af0f8b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2efd0aa69c0bb09ed9cbc004dfee3041d9af0f8b/comments", "author": null, "committer": null, "parents": [{"sha": "294eab8c10d448016ed91b705f28b0ec2bcac607", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/294eab8c10d448016ed91b705f28b0ec2bcac607", "html_url": "https://github.com/Rust-GCC/gccrs/commit/294eab8c10d448016ed91b705f28b0ec2bcac607"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "8c4233df2b55098809bf04ddaec34e34bd8bcdc7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2efd0aa69c0bb09ed9cbc004dfee3041d9af0f8b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2efd0aa69c0bb09ed9cbc004dfee3041d9af0f8b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2efd0aa69c0bb09ed9cbc004dfee3041d9af0f8b", "patch": "@@ -1,3 +1,8 @@\n+2011-03-18  Kaz Kojima  <kkojima@gcc.gnu.org>\n+\n+\t* config/sh/sh.c (sh_delegitimize_address): Handle UNSPEC_SYMOFF\n+\tand UNSPEC_PCREL_SYMOFF.\n+\n 2011-03-18  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n \n \t* config/s390/s390.md: Use define_c_enum for the unspec constant"}, {"sha": "18bd9642f7bd467cd342d289c36f57fd93372532", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2efd0aa69c0bb09ed9cbc004dfee3041d9af0f8b/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2efd0aa69c0bb09ed9cbc004dfee3041d9af0f8b/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=2efd0aa69c0bb09ed9cbc004dfee3041d9af0f8b", "patch": "@@ -1,6 +1,6 @@\n /* Output routines for GCC for Renesas / SuperH SH.\n    Copyright (C) 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,\n-   2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n+   2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011\n    Free Software Foundation, Inc.\n    Contributed by Steve Chamberlain (sac@cygnus.com).\n    Improved by Jim Wilson (wilson@cygnus.com).\n@@ -10019,8 +10019,20 @@ sh_delegitimize_address (rtx orig_x)\n       if (GET_CODE (y) == UNSPEC)\n \t{\n \t  if (XINT (y, 1) == UNSPEC_GOT\n-\t      || XINT (y, 1) == UNSPEC_GOTOFF)\n+\t      || XINT (y, 1) == UNSPEC_GOTOFF\n+\t      || XINT (y, 1) == UNSPEC_SYMOFF)\n \t    return XVECEXP (y, 0, 0);\n+\t  else if (XINT (y, 1) == UNSPEC_PCREL_SYMOFF)\n+\t    {\n+\t      if (GET_CODE (XVECEXP (y, 0, 0)) == CONST)\n+\t\t{\n+\t\t  rtx symplt = XEXP (XVECEXP (y, 0, 0), 0);\n+\n+\t\t  if (GET_CODE (symplt) == UNSPEC\n+\t\t      && XINT (symplt, 1) == UNSPEC_PLT)\n+\t\t    return XVECEXP (symplt, 0, 0);\n+\t\t}\n+\t    }\n \t  else if (TARGET_SHMEDIA\n \t\t   && (XINT (y, 1) == UNSPEC_EXTRACT_S16\n \t\t       || XINT (y, 1) == UNSPEC_EXTRACT_U16))"}]}