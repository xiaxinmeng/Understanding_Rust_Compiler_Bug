{"sha": "dedbabed297d6c854db74162cd43f996a9739aa6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGVkYmFiZWQyOTdkNmM4NTRkYjc0MTYyY2Q0M2Y5OTZhOTczOWFhNg==", "commit": {"author": {"name": "Andrew Pinski", "email": "apinski@apple.com", "date": "2004-02-27T22:33:02Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2004-02-27T22:33:02Z"}, "message": "c-typeck.c (tagged_types_tu_compatible_p): Speedup common case of the type values being in the same order.\n\n\t* c-typeck.c (tagged_types_tu_compatible_p) <ENUMERAL_TYPE>:\n\tSpeedup common case of the type values being in the same order.\n\nFrom-SVN: r78585", "tree": {"sha": "0e41eda9e1a986139de052fae0ed8a25bc010fd3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0e41eda9e1a986139de052fae0ed8a25bc010fd3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dedbabed297d6c854db74162cd43f996a9739aa6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dedbabed297d6c854db74162cd43f996a9739aa6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dedbabed297d6c854db74162cd43f996a9739aa6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dedbabed297d6c854db74162cd43f996a9739aa6/comments", "author": null, "committer": null, "parents": [{"sha": "58adf39ce4ff3aa30ce18ea241e7d677d7bf47ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58adf39ce4ff3aa30ce18ea241e7d677d7bf47ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58adf39ce4ff3aa30ce18ea241e7d677d7bf47ac"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "e6a72d0a12170501ff19d789a00e6c7dcb9fc677", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dedbabed297d6c854db74162cd43f996a9739aa6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dedbabed297d6c854db74162cd43f996a9739aa6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dedbabed297d6c854db74162cd43f996a9739aa6", "patch": "@@ -1,3 +1,8 @@\n+2004-02-27  Andrew Pinski  <apinski@apple.com>\n+\n+\t* c-typeck.c (tagged_types_tu_compatible_p) <ENUMERAL_TYPE>:\n+\tSpeedup common case of the type values being in the same order.\n+\n 2004-02-27  Steve Ellcey  <sje@cup.hp.com>\n \n \t* config/ia64/ia64.h (no-inline-float-divide): New option."}, {"sha": "e44453af83295334275318d1fef215a5ac1f9bcf", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dedbabed297d6c854db74162cd43f996a9739aa6/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dedbabed297d6c854db74162cd43f996a9739aa6/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=dedbabed297d6c854db74162cd43f996a9739aa6", "patch": "@@ -701,6 +701,27 @@ tagged_types_tu_compatible_p (tree t1, tree t2, int flags)\n     {\n     case ENUMERAL_TYPE:\n       {\n+      \n+        /* Speed up the case where the type values are in the same order. */\n+        tree tv1 = TYPE_VALUES (t1);\n+        tree tv2 = TYPE_VALUES (t2);\n+        \n+        if (tv1 == tv2)\n+          return 1;\n+        \n+        for (;tv1 && tv2; tv1 = TREE_CHAIN (tv2), tv2 = TREE_CHAIN (tv2))\n+          {\n+            if (TREE_PURPOSE (tv1) != TREE_PURPOSE (tv1))\n+              break;\n+            if (simple_cst_equal (TREE_VALUE (tv1), TREE_VALUE (tv2)) != 1)\n+              return 0;\n+          }\n+        \n+        if (tv1 == NULL_TREE && tv2 == NULL_TREE)\n+          return 1;\n+        if (tv1 == NULL_TREE || tv2 == NULL_TREE)\n+          return 0;\n+        \n \tif (list_length (TYPE_VALUES (t1)) != list_length (TYPE_VALUES (t2)))\n \t  return 0;\n \t"}]}