{"sha": "7f18f91710ecaf3f6f90989716f07f5a247d0764", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2YxOGY5MTcxMGVjYWYzZjZmOTA5ODk3MTZmMDdmNWEyNDdkMDc2NA==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2006-02-17T00:18:03Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2006-02-17T00:18:03Z"}, "message": "stor-layout.c (set_sizetype): Set TYPE_MAX_VALUE properly for sizetype when sizetype is unsigned.\n\n        * stor-layout.c (set_sizetype): Set TYPE_MAX_VALUE properly\n        for sizetype when sizetype is unsigned.\n\nFrom-SVN: r111170", "tree": {"sha": "e862177b74293f68fdf42829df228e471d62e970", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e862177b74293f68fdf42829df228e471d62e970"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f18f91710ecaf3f6f90989716f07f5a247d0764", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f18f91710ecaf3f6f90989716f07f5a247d0764", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f18f91710ecaf3f6f90989716f07f5a247d0764", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f18f91710ecaf3f6f90989716f07f5a247d0764/comments", "author": null, "committer": null, "parents": [{"sha": "b18b991a8cfa668851ba490065a095d3d8669667", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b18b991a8cfa668851ba490065a095d3d8669667", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b18b991a8cfa668851ba490065a095d3d8669667"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "57696b6aa26a91b48e2ff55ba4eaedd306aca4a9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f18f91710ecaf3f6f90989716f07f5a247d0764/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f18f91710ecaf3f6f90989716f07f5a247d0764/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7f18f91710ecaf3f6f90989716f07f5a247d0764", "patch": "@@ -1,3 +1,8 @@\n+2006-02-16  Jeff Law  <law@redhat.com>\n+\n+\t* stor-layout.c (set_sizetype): Set TYPE_MAX_VALUE properly\n+\tfor sizetype when sizetype is unsigned.\n+\n 2006-02-16  Denis Nagorny <denis_nagorny@linux.intel.com>\n \n \tPR rtl-optimization/25603"}, {"sha": "caf176f49c59a3a542c5a3b59a6cb7f59d26d4f9", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f18f91710ecaf3f6f90989716f07f5a247d0764/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f18f91710ecaf3f6f90989716f07f5a247d0764/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=7f18f91710ecaf3f6f90989716f07f5a247d0764", "patch": "@@ -2018,6 +2018,25 @@ set_sizetype (tree type)\n       ssizetype = sizetype;\n       sbitsizetype = bitsizetype;\n     }\n+\n+  /* If SIZETYPE is unsigned, we need to fix TYPE_MAX_VALUE so that\n+     it is sign extended in a way consistent with force_fit_type.  */\n+  if (TYPE_UNSIGNED (type))\n+    {\n+      tree orig_max, new_max;\n+\n+      orig_max = TYPE_MAX_VALUE (sizetype);\n+\n+      /* Build a new node with the same values, but a different type.  */\n+      new_max = build_int_cst_wide (sizetype,\n+\t\t\t\t    TREE_INT_CST_LOW (orig_max),\n+\t\t\t\t    TREE_INT_CST_HIGH (orig_max));\n+\n+      /* Now sign extend it using force_fit_type to ensure\n+\t consistency.  */\n+      new_max = force_fit_type (new_max, 0, 0, 0);\n+      TYPE_MAX_VALUE (sizetype) = new_max;\n+    }\n }\n \f\n /* TYPE is an integral type, i.e., an INTEGRAL_TYPE, ENUMERAL_TYPE"}]}