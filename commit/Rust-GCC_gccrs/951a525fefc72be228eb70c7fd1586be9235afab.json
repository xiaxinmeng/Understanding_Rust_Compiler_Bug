{"sha": "951a525fefc72be228eb70c7fd1586be9235afab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTUxYTUyNWZlZmM3MmJlMjI4ZWI3MGM3ZmQxNTg2YmU5MjM1YWZhYg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-11-06T18:00:18Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-11-06T18:00:18Z"}, "message": "Makefile.in (dbxout.o): Depend on ggc.h.\n\n\t* Makefile.in (dbxout.o): Depend on ggc.h.\n\t(dwarf2out.o): Likewise.\n\t(xcoffout.o): Likewise.\n\t* dbxout.c: Include ggc.h.\n\t(dbxout_init): Register lastfile as a root.\n\t* dwarf2out.c: Include ggc.h.\n\t(dwarf2out_line): Register lastfile as a root.\n\t* xcoffout.c: Include ggc.h.\n\t(xcoffout_source_line): Register xcoff_lastfile as a root.\n\nFrom-SVN: r30433", "tree": {"sha": "c0d4b74c0177a02d70e723b24982d68c7838cffb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c0d4b74c0177a02d70e723b24982d68c7838cffb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/951a525fefc72be228eb70c7fd1586be9235afab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/951a525fefc72be228eb70c7fd1586be9235afab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/951a525fefc72be228eb70c7fd1586be9235afab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/951a525fefc72be228eb70c7fd1586be9235afab/comments", "author": null, "committer": null, "parents": [{"sha": "e06981b09a2f0607cb85f692cb8b9fd89a72de32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e06981b09a2f0607cb85f692cb8b9fd89a72de32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e06981b09a2f0607cb85f692cb8b9fd89a72de32"}], "stats": {"total": 30, "additions": 27, "deletions": 3}, "files": [{"sha": "ecca2e557754f2887212c21372179c446b1a5fb2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/951a525fefc72be228eb70c7fd1586be9235afab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/951a525fefc72be228eb70c7fd1586be9235afab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=951a525fefc72be228eb70c7fd1586be9235afab", "patch": "@@ -1,3 +1,15 @@\n+Sat Nov  6 09:57:59 1999  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* Makefile.in (dbxout.o): Depend on ggc.h.\n+\t(dwarf2out.o): Likewise.\n+\t(xcoffout.o): Likewise.\n+\t* dbxout.c: Include ggc.h.\n+\t(dbxout_init): Register lastfile as a root.\n+\t* dwarf2out.c: Include ggc.h.\n+\t(dwarf2out_line): Register lastfile as a root.\n+\t* xcoffout.c: Include ggc.h.\n+\t(xcoffout_source_line): Register xcoff_lastfile as a root.\n+\n Sat Nov  6 09:52:09 1999  Richard Henderson  <rth@cygnus.com>\n \n \t* i386.md (movdf_1, movxf_1): Earlyclobber general regs destination."}, {"sha": "e0f5db974c0f58368ba640100afd0193b91f5152", "filename": "gcc/Makefile.in", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/951a525fefc72be228eb70c7fd1586be9235afab/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/951a525fefc72be228eb70c7fd1586be9235afab/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=951a525fefc72be228eb70c7fd1586be9235afab", "patch": "@@ -1506,7 +1506,7 @@ optabs.o : optabs.c $(CONFIG_H) system.h $(RTL_H) $(TREE_H) flags.h  \\\n    toplev.h ggc.h\n dbxout.o : dbxout.c $(CONFIG_H) system.h $(TREE_H) $(RTL_H) flags.h $(REGS_H) \\\n    insn-config.h reload.h gstab.h xcoffout.h defaults.h output.h dbxout.h \\\n-   toplev.h\n+   toplev.h gcc.h\n sdbout.o : sdbout.c $(CONFIG_H) system.h $(TREE_H) $(RTL_H) flags.h except.h \\\n    function.h $(EXPR_H) output.h hard-reg-set.h $(REGS_H) defaults.h real.h \\\n    insn-config.h $(srcdir)/../include/obstack.h xcoffout.h c-pragma.h \\\n@@ -1515,9 +1515,10 @@ dwarfout.o : dwarfout.c $(CONFIG_H) system.h $(TREE_H) $(RTL_H) dwarf.h \\\n    flags.h insn-config.h reload.h output.h defaults.h toplev.h dwarfout.h\n dwarf2out.o : dwarf2out.c $(CONFIG_H) system.h $(TREE_H) $(RTL_H) dwarf2.h \\\n    flags.h insn-config.h reload.h output.h defaults.h \\\n-   hard-reg-set.h $(REGS_H) $(EXPR_H) toplev.h dwarf2out.h dyn-string.h\n+   hard-reg-set.h $(REGS_H) $(EXPR_H) toplev.h dwarf2out.h dyn-string.h \\\n+   ggc.h\n xcoffout.o : xcoffout.c $(CONFIG_H) system.h $(TREE_H) $(RTL_H) xcoffout.h \\\n-   flags.h toplev.h output.h dbxout.h\n+   flags.h toplev.h output.h dbxout.h ggc.h\n emit-rtl.o : emit-rtl.c $(CONFIG_H) system.h $(RTL_H) $(TREE_H) flags.h \\\n    function.h $(REGS_H) insn-config.h $(RECOG_H) real.h ggc.h \\\n    $(EXPR_H) $(srcdir)/../include/obstack.h hard-reg-set.h bitmap.h toplev.h"}, {"sha": "70051944ca31b97203e7f926891689d29b14f8ae", "filename": "gcc/dbxout.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/951a525fefc72be228eb70c7fd1586be9235afab/gcc%2Fdbxout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/951a525fefc72be228eb70c7fd1586be9235afab/gcc%2Fdbxout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdbxout.c?ref=951a525fefc72be228eb70c7fd1586be9235afab", "patch": "@@ -81,6 +81,7 @@ Boston, MA 02111-1307, USA.  */\n #include \"dbxout.h\"\n #include \"toplev.h\"\n #include \"tm_p.h\"\n+#include \"ggc.h\"\n \n #ifdef XCOFF_DEBUGGING_INFO\n #include \"xcoffout.h\"\n@@ -463,6 +464,8 @@ dbxout_init (asm_file, input_file_name, syms)\n      and output them all, except for those already output.  */\n \n   dbxout_typedefs (syms);\n+\n+  ggc_add_string_root ((char **) &lastfile, 1);\n }\n \n /* Output any typedef names for types described by TYPE_DECLs in SYMS,"}, {"sha": "232ec81fca8aea49a743aeba79201250b5bef24f", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/951a525fefc72be228eb70c7fd1586be9235afab/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/951a525fefc72be228eb70c7fd1586be9235afab/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=951a525fefc72be228eb70c7fd1586be9235afab", "patch": "@@ -44,6 +44,7 @@ Boston, MA 02111-1307, USA.  */\n #include \"dwarf2out.h\"\n #include \"toplev.h\"\n #include \"dyn-string.h\"\n+#include \"ggc.h\"\n \n /* We cannot use <assert.h> in GCC source, since that would include\n    GCC's assert.h, which may not be compatible with the host compiler.  */\n@@ -9698,6 +9699,9 @@ dwarf2out_line (filename, line)\n \t  /* Emit the .file and .loc directives understood by GNU as.  */\n \t  if (lastfile == 0 || strcmp (filename, lastfile))\n \t    {\n+\t      if (lastfile == 0)\n+\t\tggc_add_string_root ((char **) &lastfile, 1);\n+\n \t      fprintf (asm_out_file, \"\\t.file 0 \\\"%s\\\"\\n\", filename);\n \t      lastfile = filename;\n \t    }"}, {"sha": "ae531504f10e1c500035c6a356972c51e315683b", "filename": "gcc/xcoffout.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/951a525fefc72be228eb70c7fd1586be9235afab/gcc%2Fxcoffout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/951a525fefc72be228eb70c7fd1586be9235afab/gcc%2Fxcoffout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fxcoffout.c?ref=951a525fefc72be228eb70c7fd1586be9235afab", "patch": "@@ -31,6 +31,7 @@ Boston, MA 02111-1307, USA.  */\n #include \"flags.h\"\n #include \"toplev.h\"\n #include \"output.h\"\n+#include \"ggc.h\"\n \n #ifdef XCOFF_DEBUGGING_INFO\n \n@@ -350,6 +351,9 @@ xcoffout_source_file (file, filename, inline_p)\n \t  fprintf (file, \"\\n\");\n \t  xcoff_current_include_file = filename;\n \t}\n+      \n+      if (!xcoff_lastfile)\n+\tggc_add_root (&xcoff_lastfile, 1);\n \n       xcoff_lastfile = filename;\n     }"}]}