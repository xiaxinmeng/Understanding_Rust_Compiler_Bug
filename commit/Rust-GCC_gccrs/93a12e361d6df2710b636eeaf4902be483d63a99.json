{"sha": "93a12e361d6df2710b636eeaf4902be483d63a99", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTNhMTJlMzYxZDZkZjI3MTBiNjM2ZWVhZjQ5MDJiZTQ4M2Q2M2E5OQ==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2007-03-03T10:43:25Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2007-03-03T10:43:25Z"}, "message": "re PR fortran/30882 ([4.1 and 4.2 only] size with initialization expression value for dim= is rejected)\n\n2007-03-03  Paul Thomas  <pault@gcc.gnu.org>\n\n        PR fortran/30882\n\t* check.c (dim_rank_check): The shape of subsections of\n\tassumed-size arrays is known.\n\n2007-03-03  Paul Thomas  <pault@gcc.gnu.org>\n\n        PR fortran/30882\n\t* gfortran.dg/size_dim.f90: New test.\n\n--         Diese und die folgenden Zeilen werden ignoriert --\n\nM    gcc/testsuite/ChangeLog\nA    gcc/testsuite/gfortran.dg/size_dim.f90\nM    gcc/fortran/ChangeLog\nM    gcc/fortran/check.c\n\nCo-Authored-By: Tobias Burnus <burnus@net-b.de>\n\nFrom-SVN: r122503", "tree": {"sha": "c886adab40108136bc79257f3b231c3f844638cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c886adab40108136bc79257f3b231c3f844638cd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/93a12e361d6df2710b636eeaf4902be483d63a99", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93a12e361d6df2710b636eeaf4902be483d63a99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93a12e361d6df2710b636eeaf4902be483d63a99", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93a12e361d6df2710b636eeaf4902be483d63a99/comments", "author": null, "committer": null, "parents": [{"sha": "39b8cd70c25945a655f8262761036c215a60fd9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39b8cd70c25945a655f8262761036c215a60fd9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39b8cd70c25945a655f8262761036c215a60fd9c"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "58b96b6b75b2ac73b8104b6af676e80ba448d381", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93a12e361d6df2710b636eeaf4902be483d63a99/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93a12e361d6df2710b636eeaf4902be483d63a99/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=93a12e361d6df2710b636eeaf4902be483d63a99", "patch": "@@ -1,3 +1,9 @@\n+2007-03-03  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/30882\n+\t* check.c (dim_rank_check): The shape of subsections of\n+\tassumed-size arrays is known.\n+\n 2007-03-02  Paul Thomas  <pault@gcc.gnu.org>\n \t    Tobias Burnus  <burnus@net-b.de>\n "}, {"sha": "27becfcb805ecdb58b188b4d27c1c598adce72db", "filename": "gcc/fortran/check.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93a12e361d6df2710b636eeaf4902be483d63a99/gcc%2Ffortran%2Fcheck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93a12e361d6df2710b636eeaf4902be483d63a99/gcc%2Ffortran%2Fcheck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fcheck.c?ref=93a12e361d6df2710b636eeaf4902be483d63a99", "patch": "@@ -337,7 +337,10 @@ dim_rank_check (gfc_expr *dim, gfc_expr *array, int allow_assumed)\n \n   ar = gfc_find_array_ref (array);\n   rank = array->rank;\n-  if (ar->as->type == AS_ASSUMED_SIZE && !allow_assumed)\n+  if (ar->as->type == AS_ASSUMED_SIZE\n+      && !allow_assumed\n+      && ar->type != AR_ELEMENT\n+      && ar->type != AR_SECTION)\n     rank--;\n \n   if (mpz_cmp_ui (dim->value.integer, 1) < 0"}, {"sha": "e2d41a9b134420136ed236095715a21f713c70b0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93a12e361d6df2710b636eeaf4902be483d63a99/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93a12e361d6df2710b636eeaf4902be483d63a99/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=93a12e361d6df2710b636eeaf4902be483d63a99", "patch": "@@ -1,3 +1,9 @@\n+2007-03-03  Paul Thomas  <pault@gcc.gnu.org>\n+\t    Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/30882\n+\t* gfortran.dg/size_dim.f90: New test.\n+\n 2007-03-02  Paul Thomas  <pault@gcc.gnu.org>\n \t    Tobias Burnus  <burnus@net-b.de>\n "}, {"sha": "248a0c33dda0a58c61f612f40efb4e31f419e2d5", "filename": "gcc/testsuite/gfortran.dg/size_dim.f90", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93a12e361d6df2710b636eeaf4902be483d63a99/gcc%2Ftestsuite%2Fgfortran.dg%2Fsize_dim.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93a12e361d6df2710b636eeaf4902be483d63a99/gcc%2Ftestsuite%2Fgfortran.dg%2Fsize_dim.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fsize_dim.f90?ref=93a12e361d6df2710b636eeaf4902be483d63a99", "patch": "@@ -0,0 +1,15 @@\n+! { dg-do \"run\" }\n+! Check size with initialization expression value for dim=\n+! PR fortran/30882\n+!\n+! Contributed by Joost VandeVondele <jv244@cam.ac.uk>\n+!\n+program main\n+  integer :: a(10)\n+  call S1(a)\n+contains\n+  subroutine S1(a)\n+    integer :: a(*)\n+    if(size(a(1:10),1) /= 10) call abort()\n+  end subroutine S1\n+end program main"}]}