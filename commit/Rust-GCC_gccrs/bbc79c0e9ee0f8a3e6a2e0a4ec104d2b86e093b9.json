{"sha": "bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmJjNzljMGU5ZWUwZjhhM2U2YTJlMGE0ZWMxMDRkMmI4NmUwOTNiOQ==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2016-08-04T13:35:10Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2016-08-04T13:35:10Z"}, "message": "C++ OpenACC routine directive testing: templated, and \"auto\", trailing return type syntax\n\n\tlibgomp/\n\t* testsuite/libgomp.oacc-c++/routine-1-auto.C: New file.\n\t* testsuite/libgomp.oacc-c++/routine-1-template-auto.C: Likewise.\n\t* testsuite/libgomp.oacc-c++/routine-1-template-trailing-return-type.C:\n\tLikewise.\n\t* testsuite/libgomp.oacc-c++/routine-1-template.C: Likewise.\n\t* testsuite/libgomp.oacc-c++/routine-1-trailing-return-type.C:\n\tLikewise.\n\t* testsuite/libgomp.oacc-c-c++-common/routine-1.c: Adjust.\n\nFrom-SVN: r239126", "tree": {"sha": "5ae825923aba6b78ae3122230826bfa9e15fd4fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ae825923aba6b78ae3122230826bfa9e15fd4fd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9ef64248fe2c609a7018dcd9ce436467991bd483", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ef64248fe2c609a7018dcd9ce436467991bd483", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ef64248fe2c609a7018dcd9ce436467991bd483"}], "stats": {"total": 63, "additions": 61, "deletions": 2}, "files": [{"sha": "70e765ef33a756cf471666d205b2223c9c85984c", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9", "patch": "@@ -1,5 +1,14 @@\n 2016-08-04  Thomas Schwinge  <thomas@codesourcery.com>\n \n+\t* testsuite/libgomp.oacc-c++/routine-1-auto.C: New file.\n+\t* testsuite/libgomp.oacc-c++/routine-1-template-auto.C: Likewise.\n+\t* testsuite/libgomp.oacc-c++/routine-1-template-trailing-return-type.C:\n+\tLikewise.\n+\t* testsuite/libgomp.oacc-c++/routine-1-template.C: Likewise.\n+\t* testsuite/libgomp.oacc-c++/routine-1-trailing-return-type.C:\n+\tLikewise.\n+\t* testsuite/libgomp.oacc-c-c++-common/routine-1.c: Adjust.\n+\n \t* testsuite/libgomp.oacc-c-c++-common/crash-1.c: Make it a \"link\"\n \ttest, and don't hardcode -O0.\n "}, {"sha": "f4b54e55fa7a28c77a59dd0214092706b7311d62", "filename": "libgomp/testsuite/libgomp.oacc-c++/routine-1-auto.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-auto.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-auto.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-auto.C?ref=bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9", "patch": "@@ -0,0 +1,9 @@\n+// Routine with \"auto\" return type.\n+\n+// { dg-additional-options \"-fno-exceptions\" }\n+\n+#define TEMPLATE\n+#define TYPE int\n+#define RETURN_1 auto\n+#define RETURN_2\n+#include \"../libgomp.oacc-c-c++-common/routine-1.c\""}, {"sha": "444f1f32a765f873d823dd57a6d53b407a9e9e4f", "filename": "libgomp/testsuite/libgomp.oacc-c++/routine-1-template-auto.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-template-auto.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-template-auto.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-template-auto.C?ref=bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9", "patch": "@@ -0,0 +1,8 @@\n+// Templated routine with \"auto\" return type.\n+\n+// { dg-additional-options \"-fno-exceptions\" }\n+\n+#define TEMPLATE template<typename TYPE>\n+#define RETURN_1 auto\n+#define RETURN_2\n+#include \"../libgomp.oacc-c-c++-common/routine-1.c\""}, {"sha": "bfe2787d9311bcddce20ee73a718ccfdd6d4a400", "filename": "libgomp/testsuite/libgomp.oacc-c++/routine-1-template-trailing-return-type.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-template-trailing-return-type.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-template-trailing-return-type.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-template-trailing-return-type.C?ref=bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9", "patch": "@@ -0,0 +1,8 @@\n+// Templated routine using trailing return type syntax.\n+\n+// { dg-additional-options \"-fno-exceptions\" }\n+\n+#define TEMPLATE template<typename TYPE>\n+#define RETURN_1 auto\n+#define RETURN_2 -> TYPE\n+#include \"../libgomp.oacc-c-c++-common/routine-1.c\""}, {"sha": "a7e0323d44f202a29d72386729b0367c498cbad6", "filename": "libgomp/testsuite/libgomp.oacc-c++/routine-1-template.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-template.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-template.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-template.C?ref=bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9", "patch": "@@ -0,0 +1,8 @@\n+// Templated routine.\n+\n+// { dg-additional-options \"-fno-exceptions\" }\n+\n+#define TEMPLATE template<typename TYPE>\n+#define RETURN_1 TYPE\n+#define RETURN_2\n+#include \"../libgomp.oacc-c-c++-common/routine-1.c\""}, {"sha": "3074ba47c2afe4e329a252a4f3edbb95691ec9bc", "filename": "libgomp/testsuite/libgomp.oacc-c++/routine-1-trailing-return-type.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-trailing-return-type.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-trailing-return-type.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-c%2B%2B%2Froutine-1-trailing-return-type.C?ref=bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9", "patch": "@@ -0,0 +1,9 @@\n+// Routine using trailing return type syntax.\n+\n+// { dg-additional-options \"-fno-exceptions\" }\n+\n+#define TEMPLATE\n+#define TYPE int\n+#define RETURN_1 auto\n+#define RETURN_2 -> TYPE\n+#include \"../libgomp.oacc-c-c++-common/routine-1.c\""}, {"sha": "2a36b3b1fac6b1b7661b33d7dafeceb11902534e", "filename": "libgomp/testsuite/libgomp.oacc-c-c++-common/routine-1.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Froutine-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Froutine-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Froutine-1.c?ref=bbc79c0e9ee0f8a3e6a2e0a4ec104d2b86e093b9", "patch": "@@ -1,10 +1,18 @@\n // { dg-additional-options \"-fno-exceptions\" }\n \n-#include <stdio.h>\n+// Defaults, if not \"#include\"d from ../libgomp.oacc-c++/routine-1-*.C.\n+#ifndef TEMPLATE\n+# define TEMPLATE\n+# define TYPE int\n+# define RETURN_1 TYPE\n+# define RETURN_2 \n+#endif\n+\n #include <stdlib.h>\n \n #pragma acc routine\n-int fact(int n)\n+TEMPLATE\n+RETURN_1 fact(TYPE n) RETURN_2\n {\n   if (n == 0 || n == 1)\n     return 1;"}]}