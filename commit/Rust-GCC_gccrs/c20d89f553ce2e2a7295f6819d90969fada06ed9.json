{"sha": "c20d89f553ce2e2a7295f6819d90969fada06ed9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzIwZDg5ZjU1M2NlMmUyYTcyOTVmNjgxOWQ5MDk2OWZhZGEwNmVkOQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@TechFak.Uni-Bielefeld.DE", "date": "2001-09-28T19:42:12Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2001-09-28T19:42:12Z"}, "message": "libstdc++-v3-dg.exp (libstdc++-v3-init): Use correct multilib builddir.\n\n\t* testsuite/lib/libstdc++-v3-dg.exp (libstdc++-v3-init): Use\n\tcorrect multilib builddir.\n\tProperly locate libgcc_s.\n\nFrom-SVN: r45864", "tree": {"sha": "d718f82ccada1441bb9b91b548e8a0236145c809", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d718f82ccada1441bb9b91b548e8a0236145c809"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c20d89f553ce2e2a7295f6819d90969fada06ed9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c20d89f553ce2e2a7295f6819d90969fada06ed9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c20d89f553ce2e2a7295f6819d90969fada06ed9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c20d89f553ce2e2a7295f6819d90969fada06ed9/comments", "author": null, "committer": null, "parents": [{"sha": "47f339cf8d8fa88fb209221fd010b2db24470df2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47f339cf8d8fa88fb209221fd010b2db24470df2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47f339cf8d8fa88fb209221fd010b2db24470df2"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "7ca2aa0001c5d0b4feed7cac520a73dedaf5fb1d", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c20d89f553ce2e2a7295f6819d90969fada06ed9/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c20d89f553ce2e2a7295f6819d90969fada06ed9/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c20d89f553ce2e2a7295f6819d90969fada06ed9", "patch": "@@ -1,3 +1,9 @@\n+2001-09-28  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n+\n+\t* testsuite/lib/libstdc++-v3-dg.exp (libstdc++-v3-init): Use\n+\tcorrect multilib builddir.\n+\tProperly locate libgcc_s.\n+\n 2001-09-27  Phil Edwards  <pme@gcc.gnu.org>\n \n \t* include/std/*:  Add Doxygen hooks."}, {"sha": "6c0cb4abe1461c0c96b18b94d61e10310f9a3293", "filename": "libstdc++-v3/testsuite/lib/libstdc++-v3-dg.exp", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c20d89f553ce2e2a7295f6819d90969fada06ed9/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B-v3-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c20d89f553ce2e2a7295f6819d90969fada06ed9/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B-v3-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B-v3-dg.exp?ref=c20d89f553ce2e2a7295f6819d90969fada06ed9", "patch": "@@ -44,10 +44,11 @@ proc libstdc++-v3-init { args } {\n     global objdir\n     global gluefile wrap_flags\n     global ld_library_path\n+    global tool_root_dir\n \n-    set blddir   [lookfor_file $outdir libstdc++-v3]\n+    set blddir [lookfor_file [get_multilibs] libstdc++-v3]\n \n-   # By default, we assume we want to run program images.\n+    # By default, we assume we want to run program images.\n     global dg-do-what-default\n     set dg-do-what-default run\n \n@@ -56,9 +57,15 @@ proc libstdc++-v3-init { args } {\n     libstdc++-v3-copy-files [glob -nocomplain \"$srcdir/*/*.txt\"] $outdir\n \n     # set LD_LIBRARY_PATH so that libgcc_s, libstdc++ binaries can be found.\n-    set gccpath [get_multilibs]\n+    # locate libgcc.a so we don't need to account for different values of\n+    # SHLIB_EXT on different platforms\n+    set gccdir [lookfor_file $tool_root_dir gcc/libgcc.a]\n+    if {$gccdir != \"\"} {\n+\tset gccdir [file dirname $gccdir]\n+    }\n+\n     set ld_library_path \".\"\n-    append ld_library_path \":${gccpath}../gcc\"\n+    append ld_library_path \":${gccdir}\"\n     append ld_library_path \":${blddir}/src/.libs\"\n \n     # Do a bunch of handstands and backflips for cross compiling and"}]}