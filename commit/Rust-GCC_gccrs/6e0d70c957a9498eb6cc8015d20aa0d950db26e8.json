{"sha": "6e0d70c957a9498eb6cc8015d20aa0d950db26e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmUwZDcwYzk1N2E5NDk4ZWI2Y2M4MDE1ZDIwYWEwZDk1MGRiMjZlOA==", "commit": {"author": {"name": "Andreas Krebbel", "email": "Andreas.Krebbel@de.ibm.com", "date": "2011-10-07T06:51:26Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2011-10-07T06:51:26Z"}, "message": "s390.md (DWH, dwh): New mode macros.\n\n2011-10-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\t* config/s390/s390.md (DWH, dwh): New mode macros.\n\t(\"umulsidi3\"): Extend to support \"umulditi3\" as well.\n\nFrom-SVN: r179647", "tree": {"sha": "925e915dfb7b961fa4d26999f63b9fcdc03f7189", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/925e915dfb7b961fa4d26999f63b9fcdc03f7189"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e0d70c957a9498eb6cc8015d20aa0d950db26e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e0d70c957a9498eb6cc8015d20aa0d950db26e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e0d70c957a9498eb6cc8015d20aa0d950db26e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e0d70c957a9498eb6cc8015d20aa0d950db26e8/comments", "author": null, "committer": null, "parents": [{"sha": "10c1a3e722533d837ace718ccef0fd74fae1233f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10c1a3e722533d837ace718ccef0fd74fae1233f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10c1a3e722533d837ace718ccef0fd74fae1233f"}], "stats": {"total": 32, "additions": 21, "deletions": 11}, "files": [{"sha": "474b1c8aa677620c0c839e06a4cf15be6660d958", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e0d70c957a9498eb6cc8015d20aa0d950db26e8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e0d70c957a9498eb6cc8015d20aa0d950db26e8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6e0d70c957a9498eb6cc8015d20aa0d950db26e8", "patch": "@@ -1,3 +1,8 @@\n+2011-10-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\t* config/s390/s390.md (DWH, dwh): New mode macros.\n+\t(\"umulsidi3\"): Extend to support \"umulditi3\" as well.\n+\n 2011-10-07  Uros Bizjak  <ubizjak@gmail.com>\n \t    H.J. Lu  <hongjiu.lu@intel.com>\n "}, {"sha": "4c9a40f6e8e4c5768b6739b4018b138cdd07b8ac", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 16, "deletions": 11, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e0d70c957a9498eb6cc8015d20aa0d950db26e8/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e0d70c957a9498eb6cc8015d20aa0d950db26e8/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=6e0d70c957a9498eb6cc8015d20aa0d950db26e8", "patch": "@@ -367,6 +367,10 @@\n (define_mode_iterator DW [(TI \"TARGET_ZARCH\") (DI \"!TARGET_ZARCH\")])\n (define_mode_iterator W  [(DI \"TARGET_ZARCH\") (SI \"!TARGET_ZARCH\")])\n \n+;; Used by the umul pattern to express modes having half the size.\n+(define_mode_attr DWH [(TI \"DI\") (DI \"SI\")])\n+(define_mode_attr dwh [(TI \"di\") (DI \"si\")])\n+\n ;; This mode iterator allows the QI and HI patterns to be defined from\n ;; the same template.\n (define_mode_iterator HQI [HI QI])\n@@ -5456,21 +5460,22 @@\n    (set_attr \"cpu_facility\" \"*,*,z10\")])\n \n ;\n-; umulsidi3 instruction pattern(s).\n+; umul instruction pattern(s).\n ;\n \n-(define_insn \"umulsidi3\"\n-  [(set (match_operand:DI 0 \"register_operand\" \"=d,d\")\n-        (mult:DI (zero_extend:DI\n-\t           (match_operand:SI 1 \"register_operand\" \"%0,0\"))\n-                 (zero_extend:DI\n-\t           (match_operand:SI 2 \"nonimmediate_operand\" \"d,RT\"))))]\n-  \"!TARGET_ZARCH && TARGET_CPU_ZARCH\"\n+; mlr, ml, mlgr, mlg\n+(define_insn \"umul<dwh><mode>3\"\n+  [(set (match_operand:DW 0 \"register_operand\"                   \"=d, d\")\n+        (mult:DW (zero_extend:DW\n+\t           (match_operand:<DWH> 1 \"register_operand\"     \"%0, 0\"))\n+                 (zero_extend:DW\n+\t           (match_operand:<DWH> 2 \"nonimmediate_operand\" \" d,RT\"))))]\n+  \"TARGET_CPU_ZARCH\"\n   \"@\n-   mlr\\t%0,%2\n-   ml\\t%0,%2\"\n+   ml<tg>r\\t%0,%2\n+   ml<tg>\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RRE,RXY\")\n-   (set_attr \"type\"     \"imulsi\")])\n+   (set_attr \"type\"     \"imul<dwh>\")])\n \n ;\n ; mul(tf|df|sf|td|dd)3 instruction pattern(s)."}]}