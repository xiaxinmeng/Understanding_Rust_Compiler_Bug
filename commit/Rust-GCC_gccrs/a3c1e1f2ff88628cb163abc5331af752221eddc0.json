{"sha": "a3c1e1f2ff88628cb163abc5331af752221eddc0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNjMWUxZjJmZjg4NjI4Y2IxNjNhYmM1MzMxYWY3NTIyMjFlZGRjMA==", "commit": {"author": {"name": "Dragan Mladjenovic", "email": "dragan.mladjenovic@rt-rk.com", "date": "2020-01-23T15:38:14Z"}, "committer": {"name": "Dragan Mladjenovic", "email": "dragan.mladjenovic@rt-rk.com", "date": "2020-01-23T16:00:02Z"}, "message": "Emit .note.GNU-stack for soft-float linux targets.\n\ngcc/ChangeLog:\n\n2020-01-23  Dragan Mladjenovic  <dmladjenovic@wavecomp.com>\n\n\t* config/mips/linux.h (NEED_INDICATE_EXEC_STACK): Define to\n\tTARGET_SOFT_FLOAT.\n\t* config/mips/mips.c (TARGET_ASM_FILE_END): Define to ...\n\t(mips_asm_file_end): New function. Delegate to\n\tfile_end_indicate_exec_stack if NEED_INDICATE_EXEC_STACK is true.\n\t* config/mips/mips.h (NEED_INDICATE_EXEC_STACK): Define to 0.\n\nlibgcc/ChangeLog:\n\n2020-01-23  Dragan Mladjenovic  <dmladjenovic@wavecomp.com>\n\n\t* config/mips/gnustack.h: New file.\n\t* config/mips/crti.S: Include gnustack.h.\n\t* config/mips/crtn.S: Likewise.\n\t* config/mips/mips16.S: Likewise.\n\t* config/mips/vr4120-div.S: Likewise.", "tree": {"sha": "4f2525598a928a04ba1c2a6ff88898961ebec2a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4f2525598a928a04ba1c2a6ff88898961ebec2a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3c1e1f2ff88628cb163abc5331af752221eddc0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3c1e1f2ff88628cb163abc5331af752221eddc0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3c1e1f2ff88628cb163abc5331af752221eddc0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3c1e1f2ff88628cb163abc5331af752221eddc0/comments", "author": null, "committer": null, "parents": [{"sha": "c124b345e460780e3c3d4a6e58d0e6e03da982a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c124b345e460780e3c3d4a6e58d0e6e03da982a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c124b345e460780e3c3d4a6e58d0e6e03da982a1"}], "stats": {"total": 53, "additions": 53, "deletions": 0}, "files": [{"sha": "b8b9b550febb198deb6b3340ada90e663b56969f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3c1e1f2ff88628cb163abc5331af752221eddc0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3c1e1f2ff88628cb163abc5331af752221eddc0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a3c1e1f2ff88628cb163abc5331af752221eddc0", "patch": "@@ -1,3 +1,12 @@\n+2020-01-23  Dragan Mladjenovic  <dmladjenovic@wavecomp.com>\n+\n+\t* config/mips/linux.h (NEED_INDICATE_EXEC_STACK): Define to\n+\tTARGET_SOFT_FLOAT.\n+\t* config/mips/mips.c (TARGET_ASM_FILE_END): Define to ...\n+\t(mips_asm_file_end): New function. Delegate to\n+\tfile_end_indicate_exec_stack if NEED_INDICATE_EXEC_STACK is true.\n+\t* config/mips/mips.h (NEED_INDICATE_EXEC_STACK): Define to 0.\n+\n 2020-01-23  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/93376"}, {"sha": "183b62f5041a8b56e6d28f203812d31b595e40d4", "filename": "gcc/config/mips/linux.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3c1e1f2ff88628cb163abc5331af752221eddc0/gcc%2Fconfig%2Fmips%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3c1e1f2ff88628cb163abc5331af752221eddc0/gcc%2Fconfig%2Fmips%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Flinux.h?ref=a3c1e1f2ff88628cb163abc5331af752221eddc0", "patch": "@@ -50,3 +50,7 @@ along with GCC; see the file COPYING3.  If not see\n #define GNU_USER_DYNAMIC_LINKERN32 \\\n   CHOOSE_DYNAMIC_LINKER (GLIBC_DYNAMIC_LINKERN32, UCLIBC_DYNAMIC_LINKERN32, \\\n                          BIONIC_DYNAMIC_LINKERN32, MUSL_DYNAMIC_LINKERN32)\n+\n+#undef NEED_INDICATE_EXEC_STACK\n+\n+#define NEED_INDICATE_EXEC_STACK TARGET_SOFT_FLOAT"}, {"sha": "dae189ed20d6095202ced508898479dc995c3e8e", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3c1e1f2ff88628cb163abc5331af752221eddc0/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3c1e1f2ff88628cb163abc5331af752221eddc0/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=a3c1e1f2ff88628cb163abc5331af752221eddc0", "patch": "@@ -22550,6 +22550,13 @@ mips_starting_frame_offset (void)\n     return 0;\n   return crtl->outgoing_args_size + MIPS_GP_SAVE_AREA_SIZE;\n }\n+\n+static void\n+mips_asm_file_end (void)\n+{\n+  if (NEED_INDICATE_EXEC_STACK)\n+    file_end_indicate_exec_stack ();\n+}\n \f\n /* Initialize the GCC target structure.  */\n #undef TARGET_ASM_ALIGNED_HI_OP\n@@ -22857,6 +22864,10 @@ mips_starting_frame_offset (void)\n #undef TARGET_STARTING_FRAME_OFFSET\n #define TARGET_STARTING_FRAME_OFFSET mips_starting_frame_offset\n \n+#undef TARGET_ASM_FILE_END\n+#define TARGET_ASM_FILE_END mips_asm_file_end\n+\n+\n struct gcc_target targetm = TARGET_INITIALIZER;\n \f\n #include \"gt-mips.h\""}, {"sha": "3ce0c19a29a0139f7e491cafd2976a2a42e33a83", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3c1e1f2ff88628cb163abc5331af752221eddc0/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3c1e1f2ff88628cb163abc5331af752221eddc0/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=a3c1e1f2ff88628cb163abc5331af752221eddc0", "patch": "@@ -3438,3 +3438,5 @@ struct GTY(())  machine_function {\n   (TARGET_LOAD_STORE_PAIRS \\\n    && (TUNE_P5600 || TUNE_I6400 || TUNE_P6600) \\\n    && !TARGET_MICROMIPS && !TARGET_FIX_24K)\n+\n+#define NEED_INDICATE_EXEC_STACK 0"}, {"sha": "eddcd9f42174bf98e4f198db37f6fe5c03ac645f", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=a3c1e1f2ff88628cb163abc5331af752221eddc0", "patch": "@@ -1,3 +1,11 @@\n+2020-01-23  Dragan Mladjenovic  <dmladjenovic@wavecomp.com>\n+\n+\t* config/mips/gnustack.h: New file.\n+\t* config/mips/crti.S: Include gnustack.h.\n+\t* config/mips/crtn.S: Likewise.\n+\t* config/mips/mips16.S: Likewise.\n+\t* config/mips/vr4120-div.S: Likewise.\n+\n 2020-01-23  Martin Liska  <mliska@suse.cz>\n \n \t* libgcov-driver.c (prune_topn_counter): Remove"}, {"sha": "6705642166c0531680ffce765b99501a1cd0be9f", "filename": "libgcc/config/mips/crti.S", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2Fconfig%2Fmips%2Fcrti.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2Fconfig%2Fmips%2Fcrti.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmips%2Fcrti.S?ref=a3c1e1f2ff88628cb163abc5331af752221eddc0", "patch": "@@ -21,6 +21,9 @@ a copy of the GCC Runtime Library Exception along with this program;\n see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n <http://www.gnu.org/licenses/>.  */\n \n+/* An executable stack is *not* required for these functions.  */\n+#include \"gnustack.h\"\n+\n /* 4 slots for argument spill area.  1 for cpreturn, 1 for stack.\n    Return spill offset of 40 and 20.  Aligned to 16 bytes for n32.  */\n "}, {"sha": "ceede64273f934649c3c3d6a0024a28714d93a5b", "filename": "libgcc/config/mips/crtn.S", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2Fconfig%2Fmips%2Fcrtn.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2Fconfig%2Fmips%2Fcrtn.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmips%2Fcrtn.S?ref=a3c1e1f2ff88628cb163abc5331af752221eddc0", "patch": "@@ -21,6 +21,9 @@ a copy of the GCC Runtime Library Exception along with this program;\n see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n <http://www.gnu.org/licenses/>.  */\n \n+/* An executable stack is *not* required for these functions.  */\n+#include \"gnustack.h\"\n+\n /* 4 slots for argument spill area.  1 for cpreturn, 1 for stack.\n    Return spill offset of 40 and 20.  Aligned to 16 bytes for n32.  */\n "}, {"sha": "c7e9fe77cf2daecc6a6721d07079beb9f92b18a6", "filename": "libgcc/config/mips/gnustack.h", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2Fconfig%2Fmips%2Fgnustack.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2Fconfig%2Fmips%2Fgnustack.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmips%2Fgnustack.h?ref=a3c1e1f2ff88628cb163abc5331af752221eddc0", "patch": "@@ -0,0 +1,7 @@\n+#include \"config.h\"\n+#if defined(__ELF__) && defined(__linux__)\n+#if defined (__mips_soft_float)\n+\t.section .note.GNU-stack,\"\",%progbits\n+\t.previous\n+#endif\n+#endif"}, {"sha": "5c3678b620f15d2e747e6a0f92b961e6b7decf00", "filename": "libgcc/config/mips/mips16.S", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2Fconfig%2Fmips%2Fmips16.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2Fconfig%2Fmips%2Fmips16.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmips%2Fmips16.S?ref=a3c1e1f2ff88628cb163abc5331af752221eddc0", "patch": "@@ -21,6 +21,9 @@ a copy of the GCC Runtime Library Exception along with this program;\n see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n <http://www.gnu.org/licenses/>.  */\n \n+/* An executable stack is *not* required for these functions.  */\n+#include \"gnustack.h\"\n+\n #include \"auto-host.h\"\n \n #if defined(__mips_micromips) || defined(__mips_soft_float) \\"}, {"sha": "2999c772616730cf90af174b43edba0784f6f969", "filename": "libgcc/config/mips/vr4120-div.S", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2Fconfig%2Fmips%2Fvr4120-div.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3c1e1f2ff88628cb163abc5331af752221eddc0/libgcc%2Fconfig%2Fmips%2Fvr4120-div.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmips%2Fvr4120-div.S?ref=a3c1e1f2ff88628cb163abc5331af752221eddc0", "patch": "@@ -22,6 +22,9 @@ a copy of the GCC Runtime Library Exception along with this program;\n see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n <http://www.gnu.org/licenses/>.  */\n \n+/* An executable stack is *not* required for these functions.  */\n+#include \"gnustack.h\"\n+\n /* This file contains functions which implement divsi3 and modsi3 for\n    -mfix-vr4120.  div and ddiv do not give the correct result when one\n    of the operands is negative.  */"}]}