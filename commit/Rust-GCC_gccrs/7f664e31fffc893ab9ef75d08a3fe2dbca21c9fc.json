{"sha": "7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Y2NjRlMzFmZmZjODkzYWI5ZWY3NWQwOGEzZmUyZGJjYTIxYzlmYw==", "commit": {"author": {"name": "Kirill Yukhin", "email": "kirill.yukhin@intel.com", "date": "2015-04-09T21:37:28Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2015-04-09T21:37:28Z"}, "message": "re PR target/65671 (Assembly failure (invalid register operand) with -O3 -mavx512vl)\n\n\n\tPR target/65671\ngcc/\n\t* config/i386/sse.md: Generate vextract32x4 if AVX-512DQ\n\tis disabled.\n\ngcc/testsuite/\n\t* gcc.target/i386/pr65671.c: New.\n\nFrom-SVN: r221963", "tree": {"sha": "648330173e6cae8bdec8010c6d1e42c4eb394d3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/648330173e6cae8bdec8010c6d1e42c4eb394d3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc/comments", "author": null, "committer": null, "parents": [{"sha": "febf07f50e449c11c5e809b097dfefe38eb9a639", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/febf07f50e449c11c5e809b097dfefe38eb9a639", "html_url": "https://github.com/Rust-GCC/gccrs/commit/febf07f50e449c11c5e809b097dfefe38eb9a639"}], "stats": {"total": 37, "additions": 34, "deletions": 3}, "files": [{"sha": "43a341e4e8bec94181471cba156b459b7f4b1017", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc", "patch": "@@ -1,3 +1,9 @@\n+2015-04-09  Kirill Yukhin  <kirill.yukhin@intel.com>\n+\n+\tPR target/65671\n+\t* config/i386/sse.md: Generate vextract32x4 if AVX-512DQ\n+\tis disabled.\n+\n 2015-04-09  Gerald Pfeifer  <gerald@pfeifer.com>\n \n \t* doc/contrib.texi (Contributors): Add John Marino."}, {"sha": "6d3b54a28cf521e7d8e6a3d82e68c2c10a4a0c93", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc", "patch": "@@ -7015,10 +7015,15 @@\n \t(vec_select:<ssehalfvecmode>\n \t  (match_operand:VI8F_256 1 \"register_operand\" \"v,v\")\n \t  (parallel [(const_int 2) (const_int 3)])))]\n-  \"TARGET_AVX\"\n+  \"TARGET_AVX && <mask_avx512vl_condition> && <mask_avx512dq_condition>\"\n {\n-  if (TARGET_AVX512DQ && TARGET_AVX512VL)\n-    return \"vextract<shuffletype>64x2\\t{$0x1, %1, %0<mask_operand2>|%0<mask_operand2>, %1, 0x1}\";\n+  if (TARGET_AVX512VL)\n+  {\n+    if (TARGET_AVX512DQ)\n+      return \"vextract<shuffletype>64x2\\t{$0x1, %1, %0<mask_operand2>|%0<mask_operand2>, %1, 0x1}\";\n+    else\n+      return \"vextract<shuffletype>32x4\\t{$0x1, %1, %0|%0, %1, 0x1}\";\n+  }\n   else\n     return \"vextract<i128>\\t{$0x1, %1, %0|%0, %1, 0x1}\";\n }"}, {"sha": "71305368f8538d66f6453ccdf735bd6ca9d1904a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc", "patch": "@@ -1,3 +1,8 @@\n+2015-04-09  Kirill Yukhin  <kirill.yukhin@intel.com>\n+\n+\tPR target/65671\n+\t* gcc.target/i386/pr65671.c: New.\n+\n 2015-04-09  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/65709"}, {"sha": "8e5d00d22c0e4475283ab61c532c2844644e1e4c", "filename": "gcc/testsuite/gcc.target/i386/pr65671.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr65671.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr65671.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr65671.c?ref=7f664e31fffc893ab9ef75d08a3fe2dbca21c9fc", "patch": "@@ -0,0 +1,15 @@\n+/* PR target/65671 */\n+/* { dg-do assemble } */\n+/* { dg-require-effective-target lp64 } */\n+/* { dg-options \"-O2 -mavx512vl -ffixed-ymm16\" } */\n+\n+#include <x86intrin.h>\n+\n+register __m256d a asm (\"ymm16\");\n+__m128d b;\n+\n+void\n+foo ()\n+{\n+  b = _mm256_extractf128_pd (a, 1);\n+}"}]}