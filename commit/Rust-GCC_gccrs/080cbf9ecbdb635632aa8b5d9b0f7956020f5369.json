{"sha": "080cbf9ecbdb635632aa8b5d9b0f7956020f5369", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDgwY2JmOWVjYmRiNjM1NjMyYWE4YjVkOWIwZjc5NTYwMjBmNTM2OQ==", "commit": {"author": {"name": "Vladimir Makarov", "email": "vmakarov@redhat.com", "date": "2013-09-18T18:24:49Z"}, "committer": {"name": "Vladimir Makarov", "email": "vmakarov@gcc.gnu.org", "date": "2013-09-18T18:24:49Z"}, "message": "re PR rtl-optimization/58438 (ICE: in check_rtl, at lra.c:2036)\n\n2013-09-18  Vladimir Makarov  <vmakarov@redhat.com>\n\n\tPR rtl-optimization/58438\n\t* lra.c (lra): Clear lra_optional_reload_pseudos in upper loop.\n\t* lra-constraints.c (undo_optional_reloads): Keep optional reloads\n\tfrom previous subpasses.\n\n2013-09-18  Vladimir Makarov  <vmakarov@redhat.com>\n\n\tPR rtl-optimization/58438\n\t* g++.dg/pr58438.C: New test.\n\nFrom-SVN: r202714", "tree": {"sha": "b95d2a3ceefd3cc45589134af186eae34f30dcc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b95d2a3ceefd3cc45589134af186eae34f30dcc0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/080cbf9ecbdb635632aa8b5d9b0f7956020f5369", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/080cbf9ecbdb635632aa8b5d9b0f7956020f5369", "html_url": "https://github.com/Rust-GCC/gccrs/commit/080cbf9ecbdb635632aa8b5d9b0f7956020f5369", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/080cbf9ecbdb635632aa8b5d9b0f7956020f5369/comments", "author": {"login": "vnmakarov", "id": 9855671, "node_id": "MDQ6VXNlcjk4NTU2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9855671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnmakarov", "html_url": "https://github.com/vnmakarov", "followers_url": "https://api.github.com/users/vnmakarov/followers", "following_url": "https://api.github.com/users/vnmakarov/following{/other_user}", "gists_url": "https://api.github.com/users/vnmakarov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnmakarov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnmakarov/subscriptions", "organizations_url": "https://api.github.com/users/vnmakarov/orgs", "repos_url": "https://api.github.com/users/vnmakarov/repos", "events_url": "https://api.github.com/users/vnmakarov/events{/privacy}", "received_events_url": "https://api.github.com/users/vnmakarov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "83ba23b7aa47ed35554dd5654f0e372d824f81e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83ba23b7aa47ed35554dd5654f0e372d824f81e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83ba23b7aa47ed35554dd5654f0e372d824f81e3"}], "stats": {"total": 26, "additions": 21, "deletions": 5}, "files": [{"sha": "d222ee09d2b3138bdcb45c69d4ad9f4dea4b9240", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/080cbf9ecbdb635632aa8b5d9b0f7956020f5369/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/080cbf9ecbdb635632aa8b5d9b0f7956020f5369/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=080cbf9ecbdb635632aa8b5d9b0f7956020f5369", "patch": "@@ -1,3 +1,10 @@\n+2013-09-18  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\tPR rtl-optimization/58438\n+\t* lra.c (lra): Clear lra_optional_reload_pseudos in upper loop.\n+\t* lra-constraints.c (undo_optional_reloads): Keep optional reloads\n+\tfrom previous subpasses.\n+\n 2013-09-18  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* arm.c (arm_get_frame_offsets): Validate architecture supports"}, {"sha": "e87ba91f3c705a543d40a10d7c10d2163b3712bf", "filename": "gcc/lra-constraints.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/080cbf9ecbdb635632aa8b5d9b0f7956020f5369/gcc%2Flra-constraints.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/080cbf9ecbdb635632aa8b5d9b0f7956020f5369/gcc%2Flra-constraints.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flra-constraints.c?ref=080cbf9ecbdb635632aa8b5d9b0f7956020f5369", "patch": "@@ -5456,10 +5456,12 @@ undo_optional_reloads (void)\n   EXECUTE_IF_SET_IN_BITMAP (&lra_optional_reload_pseudos, 0, regno, bi)\n     {\n       keep_p = false;\n-      if (reg_renumber[lra_reg_info[regno].restore_regno] >= 0)\n-\t/* If the original pseudo changed its allocation, just\n-\t   removing the optional pseudo is dangerous as the original\n-\t   pseudo will have longer live range.  */\n+      /* Keep optional reloads from previous subpasses.  */\n+      if (lra_reg_info[regno].restore_regno < 0\n+\t  /* If the original pseudo changed its allocation, just\n+\t     removing the optional pseudo is dangerous as the original\n+\t     pseudo will have longer live range.  */\n+\t  || reg_renumber[lra_reg_info[regno].restore_regno] >= 0)\n \tkeep_p = true;\n       else if (reg_renumber[regno] >= 0)\n \tEXECUTE_IF_SET_IN_BITMAP (&lra_reg_info[regno].insn_bitmap, 0, uid, bi2)"}, {"sha": "f5aab1739272ba72922dbf7a35ecbfc50c2c4c0c", "filename": "gcc/lra.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/080cbf9ecbdb635632aa8b5d9b0f7956020f5369/gcc%2Flra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/080cbf9ecbdb635632aa8b5d9b0f7956020f5369/gcc%2Flra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flra.c?ref=080cbf9ecbdb635632aa8b5d9b0f7956020f5369", "patch": "@@ -2315,7 +2315,6 @@ lra (FILE *f)\n     {\n       for (;;)\n \t{\n-\t  bitmap_clear (&lra_optional_reload_pseudos);\n \t  /* We should try to assign hard registers to scratches even\n \t     if there were no RTL transformations in\n \t     lra_constraints.  */\n@@ -2367,6 +2366,9 @@ lra (FILE *f)\n \t\tlra_clear_live_ranges ();\n \t    }\n \t}\n+      /* Don't clear optional reloads bitmap until all constraints are\n+\t satisfied as we need to differ them from regular reloads.  */\n+      bitmap_clear (&lra_optional_reload_pseudos);\n       bitmap_clear (&lra_subreg_reload_pseudos);\n       bitmap_clear (&lra_inheritance_pseudos);\n       bitmap_clear (&lra_split_regs);"}, {"sha": "4ed1d8b943b86bd611e4a257857cf336a6bac1ed", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/080cbf9ecbdb635632aa8b5d9b0f7956020f5369/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/080cbf9ecbdb635632aa8b5d9b0f7956020f5369/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=080cbf9ecbdb635632aa8b5d9b0f7956020f5369", "patch": "@@ -1,3 +1,8 @@\n+2013-09-18  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\tPR rtl-optimization/58438\n+\t* g++.dg/pr58438.C: New test.\n+\n 2013-09-18  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/43366"}]}