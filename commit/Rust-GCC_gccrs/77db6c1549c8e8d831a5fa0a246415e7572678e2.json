{"sha": "77db6c1549c8e8d831a5fa0a246415e7572678e2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdkYjZjMTU0OWM4ZThkODMxYTVmYTBhMjQ2NDE1ZTc1NzI2NzhlMg==", "commit": {"author": {"name": "Alexander Ivchenko", "email": "alexander.ivchenko@intel.com", "date": "2017-06-08T16:05:59Z"}, "committer": {"name": "Alexander Ivchenko", "email": "aivchenk@gcc.gnu.org", "date": "2017-06-08T16:05:59Z"}, "message": "re PR middle-end/79988 ([CHKP] ICE in tree check: accessed operand 5 of call_expr with 4 operands in ix86_expand_builtin, at config/i386/i386.c:36851)\n\n\n2017-06-08  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n\n       PR middle-end/79988\n       * tree-chkp.c (chkp_gimple_call_builtin_p): Remove\n       gimple_call_builtin_p call.\n\n017-06-08  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n\n        PR middle-end/79988\n        * gcc.target/i386/mpx/pr79988.c: New test.\n\nFrom-SVN: r249023", "tree": {"sha": "08fd7d41f9cc1d6a46debb03179e9ff2180346cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08fd7d41f9cc1d6a46debb03179e9ff2180346cb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77db6c1549c8e8d831a5fa0a246415e7572678e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77db6c1549c8e8d831a5fa0a246415e7572678e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77db6c1549c8e8d831a5fa0a246415e7572678e2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77db6c1549c8e8d831a5fa0a246415e7572678e2/comments", "author": null, "committer": null, "parents": [{"sha": "e6026dc04cb8dd7f5f68d6ac586665cc0643d5c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6026dc04cb8dd7f5f68d6ac586665cc0643d5c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e6026dc04cb8dd7f5f68d6ac586665cc0643d5c0"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "5b8d35ece2bc0c157c44f9ccf88b866b90c2d32c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77db6c1549c8e8d831a5fa0a246415e7572678e2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77db6c1549c8e8d831a5fa0a246415e7572678e2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=77db6c1549c8e8d831a5fa0a246415e7572678e2", "patch": "@@ -1,3 +1,9 @@\n+2017-06-08  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n+\n+\tPR middle-end/79988\n+\t* tree-chkp.c (chkp_gimple_call_builtin_p): Remove\n+\tgimple_call_builtin_p call.\n+\n 2017-06-08  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* system.h (fancy_abort): Annotate by ATTRIBUTE_COLD."}, {"sha": "0cefe33825cef0c7794957bc5eadfea9ac3c3733", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77db6c1549c8e8d831a5fa0a246415e7572678e2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77db6c1549c8e8d831a5fa0a246415e7572678e2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=77db6c1549c8e8d831a5fa0a246415e7572678e2", "patch": "@@ -1,3 +1,8 @@\n+2017-06-08  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n+\n+\tPR middle-end/79988\n+\t* gcc.target/i386/mpx/pr79988.c: New test.\n+\n 2017-06-08  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n \n \t* gcc.target/i386/mpx/hard-reg-2-lbv.c: New test."}, {"sha": "a6e43eba562e334728c8cc1ce56acdafd261a82e", "filename": "gcc/testsuite/gcc.target/i386/mpx/pr79988.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77db6c1549c8e8d831a5fa0a246415e7572678e2/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fpr79988.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77db6c1549c8e8d831a5fa0a246415e7572678e2/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fpr79988.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fpr79988.c?ref=77db6c1549c8e8d831a5fa0a246415e7572678e2", "patch": "@@ -0,0 +1,6 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fcheck-pointer-bounds -mmpx\" } */\n+\n+void foo(unsigned char * __seg_gs *pointer_gs) {\n+        pointer_gs[5] = 0;\n+}"}, {"sha": "3464343682d24d7e60ced75f6e3c42117d5ed89b", "filename": "gcc/tree-chkp.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77db6c1549c8e8d831a5fa0a246415e7572678e2/gcc%2Ftree-chkp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77db6c1549c8e8d831a5fa0a246415e7572678e2/gcc%2Ftree-chkp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-chkp.c?ref=77db6c1549c8e8d831a5fa0a246415e7572678e2", "patch": "@@ -435,7 +435,11 @@ chkp_gimple_call_builtin_p (gimple *call,\n \t\t\t    enum built_in_function code)\n {\n   tree fndecl;\n-  if (gimple_call_builtin_p (call, BUILT_IN_MD)\n+  /* We are skipping the check for address-spaces, that's\n+     why we don't use gimple_call_builtin_p directly here.  */\n+  if (is_gimple_call (call)\n+      && (fndecl = gimple_call_fndecl (call)) != NULL\n+      && DECL_BUILT_IN_CLASS (fndecl) == BUILT_IN_MD\n       && (fndecl = targetm.builtin_chkp_function (code))\n       && (DECL_FUNCTION_CODE (gimple_call_fndecl (call))\n \t  == DECL_FUNCTION_CODE (fndecl)))"}]}