{"sha": "a4c37c1616cacf3e879e53eaefb675746173ebd7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTRjMzdjMTYxNmNhY2YzZTg3OWU1M2VhZWZiNjc1NzQ2MTczZWJkNw==", "commit": {"author": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2010-10-07T14:40:33Z"}, "committer": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2010-10-07T14:40:33Z"}, "message": "foreach-1.m: Adjust for -fnext-runtime compatibility.\n\n\ngcc/testsuite:\n\n\t* objc.dg/foreach-1.m: Adjust for -fnext-runtime compatibility.\n\t* objc.dg/foreach-2.m: Likewise.\n\t* objc.dg/foreach-3.m: Likewise.\n\t* objc.dg/foreach-4.m: Likewise.\n\t* objc.dg/foreach-5.m: Likewise.\n\t* objc.dg/foreach-6.m: Likewise.\n\t* objc.dg/foreach-7.m: Likewise.\n\t* objc.dg/objc-foreach-4.m: Likewise.\n\t* objc.dg/objc-foreach-5.m: Likewise.\n\nFrom-SVN: r165117", "tree": {"sha": "34eda11c2b3050aa649894cefbe3a4c208425759", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/34eda11c2b3050aa649894cefbe3a4c208425759"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a4c37c1616cacf3e879e53eaefb675746173ebd7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4c37c1616cacf3e879e53eaefb675746173ebd7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4c37c1616cacf3e879e53eaefb675746173ebd7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4c37c1616cacf3e879e53eaefb675746173ebd7/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bb67d9c7cef80c80e817cafdd9ee2001cb29c9f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb67d9c7cef80c80e817cafdd9ee2001cb29c9f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb67d9c7cef80c80e817cafdd9ee2001cb29c9f7"}], "stats": {"total": 102, "additions": 64, "deletions": 38}, "files": [{"sha": "2f1f7616b1a31ff6101f6439b6d30ff577bda3e4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a4c37c1616cacf3e879e53eaefb675746173ebd7", "patch": "@@ -1,8 +1,20 @@\n+2010-10-07  Iain Sandoe  <iains@gcc.gnu.org>\n+\n+\t* objc.dg/foreach-1.m: Adjust for -fnext-runtime compatibility.\n+\t* objc.dg/foreach-2.m: Likewise.\n+\t* objc.dg/foreach-3.m: Likewise.\n+\t* objc.dg/foreach-4.m: Likewise.\n+\t* objc.dg/foreach-5.m: Likewise.\n+\t* objc.dg/foreach-6.m: Likewise.\n+\t* objc.dg/foreach-7.m: Likewise.\n+\t* objc.dg/objc-foreach-4.m: Likewise.\n+\t* objc.dg/objc-foreach-5.m: Likewise.\n+\n 2010-10-07  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/45869\n \t* gcc.dg/torture/pr45869.c: New testcase.\n-\n+\t\n 2010-10-07  Iain Sandoe  <iains@gcc.gnu.org>\n \n \t* objc.dg/set-not-used-1.m: New"}, {"sha": "dd1d8cf985d9f201209cc341caf82c77072fc556", "filename": "gcc/testsuite/objc.dg/foreach-1.m", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-1.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-1.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-1.m?ref=a4c37c1616cacf3e879e53eaefb675746173ebd7", "patch": "@@ -1,12 +1,12 @@\n /* Test basic Objective-C foreach syntax.  This tests iterations that\n    do nothing.\n */\n-/* FIXME: Run this test with the NeXT runtime as well.  */\n-/* { dg-skip-if \"\" { *-*-* } { \"-fnext-runtime\" } { \"\" } } */\n /* { dg-do run } */\n+/* { dg-xfail-run-if \"Needs OBJC2 ABI\" { *-*-darwin* && { lp64 && { ! objc2 } } } { \"-fnext-runtime\" } { \"\" } } */\n+/* { dg-additional-sources \"../objc-obj-c++-shared/Object1.m\" } */\n+\n+#import \"../objc-obj-c++-shared/Object1.h\"\n \n-#include <objc/objc.h>\n-#include <objc/Object.h>\n extern void abort (void);\n /*\n struct __objcFastEnumerationState"}, {"sha": "1e9c515f600595748264a046fb8865c929e87fa7", "filename": "gcc/testsuite/objc.dg/foreach-2.m", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-2.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-2.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-2.m?ref=a4c37c1616cacf3e879e53eaefb675746173ebd7", "patch": "@@ -1,15 +1,19 @@\n /* Test basic Objective-C foreach syntax.  This tests iterations, with\n    the basic syntax 'for (object in array) statements'\n */\n-/* FIXME: Run this test with the NeXT runtime as well.  */\n-/* { dg-skip-if \"\" { *-*-* } { \"-fnext-runtime\" } { \"\" } } */\n /* { dg-do run } */\n+/* { dg-xfail-run-if \"Needs OBJC2 ABI\" { *-*-darwin* && { lp64 && { ! objc2 } } } { \"-fnext-runtime\" } { \"\" } } */\n+/* { dg-additional-sources \"../objc-obj-c++-shared/Object1.m\" } */\n \n-#include <objc/objc.h>\n-#include <objc/Object.h>\n+#import \"../objc-obj-c++-shared/Object1.h\"\n+#import \"../objc-obj-c++-shared/next-mapping.h\"\n+#ifndef __NEXT_RUNTIME__\n #include <objc/NXConstStr.h>\n+#endif\n+\n+extern int printf (const char *, ...);\n #include <stdlib.h>\n-extern void abort (void);\n+\n /*\n struct __objcFastEnumerationState\n {"}, {"sha": "da23f83799b7ba8f589677ec3d866c24c0ceab9d", "filename": "gcc/testsuite/objc.dg/foreach-3.m", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-3.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-3.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-3.m?ref=a4c37c1616cacf3e879e53eaefb675746173ebd7", "patch": "@@ -1,18 +1,21 @@\n /* Test basic Objective-C foreach syntax.  This tests the mutation.\n */\n-/* FIXME: Run this test with the NeXT runtime as well.  */\n-/* { dg-skip-if \"\" { *-*-* } { \"-fnext-runtime\" } { \"\" } } */\n+/* { dg-do compile } */\n+\n /* FIXME: This test should be run, and it succeeds if the program\n    aborts at the right time (when the mutation happens).  It currently\n    works, but how do we tell the testsuite to test for it ?\n */\n-/* { dg-do compile } */\n \n-#include <objc/objc.h>\n-#include <objc/Object.h>\n+#import \"../objc-obj-c++-shared/Object1.h\"\n+#import \"../objc-obj-c++-shared/next-mapping.h\"\n+#ifndef __NEXT_RUNTIME__\n #include <objc/NXConstStr.h>\n+#endif\n+\n+extern int printf (const char *, ...);\n #include <stdlib.h>\n-extern void abort (void);\n+\n /*\n struct __objcFastEnumerationState\n {"}, {"sha": "b6cfe2c0c659342e98becf5c21a407c3ba595c9e", "filename": "gcc/testsuite/objc.dg/foreach-4.m", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-4.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-4.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-4.m?ref=a4c37c1616cacf3e879e53eaefb675746173ebd7", "patch": "@@ -1,15 +1,19 @@\n /* Test basic Objective-C foreach syntax.  This tests iterations, with\n    the declaration syntax 'for (id object in array) statements'\n */\n-/* FIXME: Run this test with the NeXT runtime as well.  */\n-/* { dg-skip-if \"\" { *-*-* } { \"-fnext-runtime\" } { \"\" } } */\n /* { dg-do run } */\n+/* { dg-xfail-run-if \"Needs OBJC2 ABI\" { *-*-darwin* && { lp64 && { ! objc2 } } } { \"-fnext-runtime\" } { \"\" } } */\n+/* { dg-additional-sources \"../objc-obj-c++-shared/Object1.m\" } */\n \n-#include <objc/objc.h>\n-#include <objc/Object.h>\n+#import \"../objc-obj-c++-shared/Object1.h\"\n+#import \"../objc-obj-c++-shared/next-mapping.h\"\n+#ifndef __NEXT_RUNTIME__\n #include <objc/NXConstStr.h>\n+#endif\n+\n+extern int printf (const char *, ...);\n #include <stdlib.h>\n-extern void abort (void);\n+\n /*\n struct __objcFastEnumerationState\n {"}, {"sha": "f6d34f41399a868a7ad187079872343945125d1c", "filename": "gcc/testsuite/objc.dg/foreach-5.m", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-5.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-5.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-5.m?ref=a4c37c1616cacf3e879e53eaefb675746173ebd7", "patch": "@@ -1,15 +1,18 @@\n /* Test basic Objective-C foreach syntax.  This tests that if you\n    define your own NSFastEnumeration struct, the compiler picks it up.\n */\n-/* FIXME: Run this test with the NeXT runtime as well.  */\n-/* { dg-skip-if \"\" { *-*-* } { \"-fnext-runtime\" } { \"\" } } */\n /* { dg-do run } */\n+/* { dg-xfail-run-if \"Needs OBJC2 ABI\" { *-*-darwin* && { lp64 && { ! objc2 } } } { \"-fnext-runtime\" } { \"\" } } */\n+/* { dg-additional-sources \"../objc-obj-c++-shared/Object1.m\" } */\n \n-#include <objc/objc.h>\n-#include <objc/Object.h>\n+#import \"../objc-obj-c++-shared/Object1.h\"\n+#import \"../objc-obj-c++-shared/next-mapping.h\"\n+#ifndef __NEXT_RUNTIME__\n #include <objc/NXConstStr.h>\n+#endif\n+\n+extern int printf (const char *, ...);\n #include <stdlib.h>\n-extern void abort (void);\n \n typedef struct\n {"}, {"sha": "d368390cbcabfe8cff25091bc1d37e4402cb86d6", "filename": "gcc/testsuite/objc.dg/foreach-6.m", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-6.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-6.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-6.m?ref=a4c37c1616cacf3e879e53eaefb675746173ebd7", "patch": "@@ -1,11 +1,9 @@\n /* Test basic Objective-C foreach syntax.  This tests warnings and errors.  */\n-/* FIXME: Run this test with the NeXT runtime as well.  */\n-/* { dg-skip-if \"\" { *-*-* } { \"-fnext-runtime\" } { \"\" } } */\n /* { dg-do compile } */\n \n-#include <objc/objc.h>\n-#include <objc/Object.h>\n-extern void abort (void);\n+#import \"../objc-obj-c++-shared/Object1.h\"\n+#import \"../objc-obj-c++-shared/next-mapping.h\"\n+\n /*\n struct __objcFastEnumerationState\n {"}, {"sha": "5da940f620ee7ef84aef16ca47880f526d5a0143", "filename": "gcc/testsuite/objc.dg/foreach-7.m", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-7.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-7.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fforeach-7.m?ref=a4c37c1616cacf3e879e53eaefb675746173ebd7", "patch": "@@ -1,11 +1,9 @@\n /* Test basic Objective-C foreach syntax.  This tests warnings and errors.  */\n-/* FIXME: Run this test with the NeXT runtime as well.  */\n-/* { dg-skip-if \"\" { *-*-* } { \"-fnext-runtime\" } { \"\" } } */\n /* { dg-do compile } */\n \n-#include <objc/objc.h>\n-#include <objc/Object.h>\n-extern void abort (void);\n+#import \"../objc-obj-c++-shared/Object1.h\"\n+#import \"../objc-obj-c++-shared/next-mapping.h\"\n+\n /*\n struct __objcFastEnumerationState\n {"}, {"sha": "1a6c101f069ec3841bb7a02bb922ca912da18823", "filename": "gcc/testsuite/objc.dg/objc-foreach-4.m", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fobjc-foreach-4.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fobjc-foreach-4.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fobjc-foreach-4.m?ref=a4c37c1616cacf3e879e53eaefb675746173ebd7", "patch": "@@ -1,7 +1,9 @@\n /* Test for valid objc objects used in a for-each statement. */\n /* FIXME: Run this test with the GNU runtime as well.  */\n-/* { dg-skip-if \"\" { *-*-* } { \"-fgnu-runtime\" } { \"\" } } */\n /* { dg-do compile { target *-*-darwin* } } */\n+/* { dg-skip-if \"\" { *-*-* } { \"-fgnu-runtime\" } { \"\" } } */\n+\n+#include <objc/objc-api.h>\n #include <Foundation/Foundation.h>\n \n // gcc -o foo foo.m -framework Foundation"}, {"sha": "26c2dfce8e7965b4556b9871e36bdd62dddbd556", "filename": "gcc/testsuite/objc.dg/objc-foreach-5.m", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fobjc-foreach-5.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4c37c1616cacf3e879e53eaefb675746173ebd7/gcc%2Ftestsuite%2Fobjc.dg%2Fobjc-foreach-5.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fobjc-foreach-5.m?ref=a4c37c1616cacf3e879e53eaefb675746173ebd7", "patch": "@@ -1,6 +1,8 @@\n /* FIXME: Run this test with the GNU runtime as well.  */\n-/* { dg-skip-if \"\" { *-*-* } { \"-fgnu-runtime\" } { \"\" } } */\n /* { dg-do compile { target *-*-darwin* } } */\n+/* { dg-skip-if \"\" { *-*-* } { \"-fgnu-runtime\" } { \"\" } } */\n+\n+#include <objc/objc-api.h>\n #import <Foundation/Foundation.h>\n \n NSArray * createTestVictim(unsigned capacity) {"}]}