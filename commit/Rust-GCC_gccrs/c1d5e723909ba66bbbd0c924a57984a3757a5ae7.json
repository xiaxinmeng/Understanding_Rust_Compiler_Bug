{"sha": "c1d5e723909ba66bbbd0c924a57984a3757a5ae7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzFkNWU3MjM5MDliYTY2YmJiZDBjOTI0YTU3OTg0YTM3NTdhNWFlNw==", "commit": {"author": {"name": "Andreas Schwab", "email": "schwab@linux-m68k.org", "date": "2012-01-23T20:00:44Z"}, "committer": {"name": "Andreas Schwab", "email": "schwab@gcc.gnu.org", "date": "2012-01-23T20:00:44Z"}, "message": "sysv.S (ffi_call_SYSV): Properly test for plain mc68000.\n\n* src/m68k/sysv.S (ffi_call_SYSV): Properly test for plain\nmc68000.  Test for __HAVE_68881__ in addition to __MC68881__.\n\nFrom-SVN: r183451", "tree": {"sha": "c60afb07c78af98674c9cc35603b723a1b223aac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c60afb07c78af98674c9cc35603b723a1b223aac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c1d5e723909ba66bbbd0c924a57984a3757a5ae7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1d5e723909ba66bbbd0c924a57984a3757a5ae7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1d5e723909ba66bbbd0c924a57984a3757a5ae7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1d5e723909ba66bbbd0c924a57984a3757a5ae7/comments", "author": {"login": "andreas-schwab", "id": 2175493, "node_id": "MDQ6VXNlcjIxNzU0OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2175493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreas-schwab", "html_url": "https://github.com/andreas-schwab", "followers_url": "https://api.github.com/users/andreas-schwab/followers", "following_url": "https://api.github.com/users/andreas-schwab/following{/other_user}", "gists_url": "https://api.github.com/users/andreas-schwab/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreas-schwab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreas-schwab/subscriptions", "organizations_url": "https://api.github.com/users/andreas-schwab/orgs", "repos_url": "https://api.github.com/users/andreas-schwab/repos", "events_url": "https://api.github.com/users/andreas-schwab/events{/privacy}", "received_events_url": "https://api.github.com/users/andreas-schwab/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "986ce92f7dcac606cfcca7dd6df046d517ced9ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/986ce92f7dcac606cfcca7dd6df046d517ced9ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/986ce92f7dcac606cfcca7dd6df046d517ced9ba"}], "stats": {"total": 21, "additions": 13, "deletions": 8}, "files": [{"sha": "867b571b9d71444de2742d7538f9c11862333fc7", "filename": "libffi/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1d5e723909ba66bbbd0c924a57984a3757a5ae7/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1d5e723909ba66bbbd0c924a57984a3757a5ae7/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=c1d5e723909ba66bbbd0c924a57984a3757a5ae7", "patch": "@@ -1,3 +1,8 @@\n+2012-01-23  Andreas Schwab  <schwab@linux-m68k.org>\n+\n+\t* src/m68k/sysv.S (ffi_call_SYSV): Properly test for plain\n+\tmc68000.  Test for __HAVE_68881__ in addition to __MC68881__.\n+\n 2012-01-19  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/48496"}, {"sha": "dfdd8644384387a8914a784fd33ce168ac8b618e", "filename": "libffi/src/m68k/sysv.S", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1d5e723909ba66bbbd0c924a57984a3757a5ae7/libffi%2Fsrc%2Fm68k%2Fsysv.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1d5e723909ba66bbbd0c924a57984a3757a5ae7/libffi%2Fsrc%2Fm68k%2Fsysv.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fsrc%2Fm68k%2Fsysv.S?ref=c1d5e723909ba66bbbd0c924a57984a3757a5ae7", "patch": "@@ -1,6 +1,6 @@\n /* -----------------------------------------------------------------------\n \t\n-   sysv.S - Copyright (c) 1998 Andreas Schwab\n+   sysv.S - Copyright (c) 1998, 2012 Andreas Schwab\n \t    Copyright (c) 2008 Red Hat, Inc. \n    \n    m68k Foreign Function Interface \n@@ -87,7 +87,7 @@ ffi_call_SYSV:\n \n \t| If the return value pointer is NULL, assume no return value.\n \t| NOTE: On the mc68000, tst on an address register is not supported.\n-#if defined(__mc68000__) && !defined(__mcoldfire__)\n+#if !defined(__mc68020__) && !defined(__mc68030__) && !defined(__mc68040__) && !defined(__mc68060__) && !defined(__mcoldfire__)\n \tcmp.w\t#0, %a1\n #else\n \ttst.l\t%a1\n@@ -109,7 +109,7 @@ retlongint:\n retfloat:\n \tbtst\t#2,%d2\n \tjbeq\tretdouble\n-#if defined(__MC68881__)\n+#if defined(__MC68881__) || defined(__HAVE_68881__)\n \tfmove.s\t%fp0,(%a1)\n #else\n \tmove.l\t%d0,(%a1)\n@@ -119,7 +119,7 @@ retfloat:\n retdouble:\n \tbtst\t#3,%d2\n \tjbeq\tretlongdouble\n-#if defined(__MC68881__)\n+#if defined(__MC68881__) || defined(__HAVE_68881__)\n \tfmove.d\t%fp0,(%a1)\n #else\n \tmove.l\t%d0,(%a1)+\n@@ -130,7 +130,7 @@ retdouble:\n retlongdouble:\n \tbtst\t#4,%d2\n \tjbeq\tretpointer\n-#if defined(__MC68881__)\n+#if defined(__MC68881__) || defined(__HAVE_68881__)\n \tfmove.x\t%fp0,(%a1)\n #else\n \tmove.l\t%d0,(%a1)+\n@@ -199,7 +199,7 @@ ffi_closure_SYSV:\n \tmove.l\t(%a0),%d1\n \tjra\t.Lcls_epilogue\n .Lcls_ret_float:\n-#if defined(__MC68881__)\n+#if defined(__MC68881__) || defined(__HAVE_68881__)\n \tfmove.s\t(%a0),%fp0\n #else\n \tmove.l\t(%a0),%d0\n@@ -209,15 +209,15 @@ ffi_closure_SYSV:\n \tlsr.l\t#2,%d0\n \tjne\t1f\n \tjcs\t.Lcls_ret_ldouble\n-#if defined(__MC68881__)\n+#if defined(__MC68881__) || defined(__HAVE_68881__)\n \tfmove.d\t(%a0),%fp0\n #else\n \tmove.l\t(%a0)+,%d0\n \tmove.l\t(%a0),%d1\n #endif\n \tjra\t.Lcls_epilogue\n .Lcls_ret_ldouble:\n-#if defined(__MC68881__)\n+#if defined(__MC68881__) || defined(__HAVE_68881__)\n \tfmove.x\t(%a0),%fp0\n #else\n \tmove.l\t(%a0)+,%d0"}]}