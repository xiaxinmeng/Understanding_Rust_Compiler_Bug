{"sha": "403bc026aca65b22159955dd4df81eb9b2b407f4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDAzYmMwMjZhY2E2NWIyMjE1OTk1NWRkNGRmODFlYjliMmI0MDdmNA==", "commit": {"author": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2017-11-16T12:53:46Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2017-11-16T12:53:46Z"}, "message": "[multiple changes]\n\n2017-11-16  Sylvain Dailler  <dailler@adacore.com>\n\n\t* sem_util.adb (Get_Enum_Lit_From_Pos): Add a condition for Pos\n\tlower than 0.\n\n2017-11-16  Bob Duff  <duff@adacore.com>\n\n\t* sem_ch13.adb (Check_Expr_Constants): Avoid error message in case of\n\tSystem'To_Address.\n\nFrom-SVN: r254818", "tree": {"sha": "b5ccb349700ab5ea7b86455fb4cc5c9e15564ff6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5ccb349700ab5ea7b86455fb4cc5c9e15564ff6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/403bc026aca65b22159955dd4df81eb9b2b407f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/403bc026aca65b22159955dd4df81eb9b2b407f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/403bc026aca65b22159955dd4df81eb9b2b407f4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/403bc026aca65b22159955dd4df81eb9b2b407f4/comments", "author": null, "committer": null, "parents": [{"sha": "c757ad4cf61f982a05cb5f424308ec199aa2923d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c757ad4cf61f982a05cb5f424308ec199aa2923d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c757ad4cf61f982a05cb5f424308ec199aa2923d"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "1f3cf290cd5d562ce8a6ed902af8033ee95f4336", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/403bc026aca65b22159955dd4df81eb9b2b407f4/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/403bc026aca65b22159955dd4df81eb9b2b407f4/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=403bc026aca65b22159955dd4df81eb9b2b407f4", "patch": "@@ -1,3 +1,13 @@\n+2017-11-16  Sylvain Dailler  <dailler@adacore.com>\n+\n+\t* sem_util.adb (Get_Enum_Lit_From_Pos): Add a condition for Pos\n+\tlower than 0.\n+\n+2017-11-16  Bob Duff  <duff@adacore.com>\n+\n+\t* sem_ch13.adb (Check_Expr_Constants): Avoid error message in case of\n+\tSystem'To_Address.\n+\n 2017-11-16  Yannick Moy  <moy@adacore.com>\n \n \t* sem_elab.adb (Include): Fix mode of parameter Curr to out."}, {"sha": "b501e14f31ed682dac5322dd8af0e8d3f983b33a", "filename": "gcc/ada/sem_ch13.adb", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/403bc026aca65b22159955dd4df81eb9b2b407f4/gcc%2Fada%2Fsem_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/403bc026aca65b22159955dd4df81eb9b2b407f4/gcc%2Fada%2Fsem_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch13.adb?ref=403bc026aca65b22159955dd4df81eb9b2b407f4", "patch": "@@ -9783,6 +9783,15 @@ package body Sem_Ch13 is\n                then\n                   Check_At_Constant_Address (Prefix (Nod));\n \n+               --  Normally, System'To_Address will have been transformed into\n+               --  an Unchecked_Conversion, but in -gnatc mode, it will not,\n+               --  and we don't want to give an error, because the whole point\n+               --  of 'To_Address is that it is static.\n+\n+               elsif Attribute_Name (Nod) = Name_To_Address then\n+                  pragma Assert (Operating_Mode = Check_Semantics);\n+                  null;\n+\n                else\n                   Check_Expr_Constants (Prefix (Nod));\n                   Check_List_Constants (Expressions (Nod));"}, {"sha": "576a759618033af62033b3f3e779ef584d2d239b", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/403bc026aca65b22159955dd4df81eb9b2b407f4/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/403bc026aca65b22159955dd4df81eb9b2b407f4/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=403bc026aca65b22159955dd4df81eb9b2b407f4", "patch": "@@ -9085,6 +9085,12 @@ package body Sem_Util is\n          end if;\n \n          Lit := First_Literal (Btyp);\n+\n+         --  Position in the enumeration type starts at 0.\n+         if UI_To_Int (Pos) < 0 then\n+            raise Constraint_Error;\n+         end if;\n+\n          for J in 1 .. UI_To_Int (Pos) loop\n             Next_Literal (Lit);\n "}]}