{"sha": "7e4b97c736910473fba8511a0b306a4bfa64501b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2U0Yjk3YzczNjkxMDQ3M2ZiYTg1MTFhMGIzMDZhNGJmYTY0NTAxYg==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2007-12-13T20:31:45Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2007-12-13T20:31:45Z"}, "message": "[multiple changes]\n\n2007-12-13  Anton Korobeynikov  <asl@math.spbu.ru>\n\n        * trans-decl.c (gfc_build_builtin_function_decls): Correct decl\n        construction for select_string() and internal_unpack()\n\n2007-12-13  Duncan Sands  <baldrick@free.fr>\n            Anton Korobeynikov  <asl@math.spbu.ru>\n\n        * trans-expr.c (gfc_conv_structure): Make sure record\n        * constructors\n        for static variables are marked constant.\n\nFrom-SVN: r130914", "tree": {"sha": "7490068c518c7a37a24975f274d5f47a48c77b61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7490068c518c7a37a24975f274d5f47a48c77b61"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e4b97c736910473fba8511a0b306a4bfa64501b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e4b97c736910473fba8511a0b306a4bfa64501b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e4b97c736910473fba8511a0b306a4bfa64501b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e4b97c736910473fba8511a0b306a4bfa64501b/comments", "author": null, "committer": null, "parents": [{"sha": "108bc19009355ab635eb01262cb9e66a8f3e29c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/108bc19009355ab635eb01262cb9e66a8f3e29c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/108bc19009355ab635eb01262cb9e66a8f3e29c4"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "e0cdc78d570410537d22433a0eb4372227dbf73f", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e4b97c736910473fba8511a0b306a4bfa64501b/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e4b97c736910473fba8511a0b306a4bfa64501b/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=7e4b97c736910473fba8511a0b306a4bfa64501b", "patch": "@@ -1,3 +1,14 @@\n+2007-12-13  Anton Korobeynikov  <asl@math.spbu.ru>\n+\n+\t* trans-decl.c (gfc_build_builtin_function_decls): Correct decl\n+\tconstruction for select_string() and internal_unpack()\n+\n+2007-12-13  Duncan Sands  <baldrick@free.fr>\n+\t    Anton Korobeynikov  <asl@math.spbu.ru>\n+\n+\t* trans-expr.c (gfc_conv_structure): Make sure record constructors\n+\tfor static variables are marked constant.\n+\n 2007-12-12  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/34254"}, {"sha": "876219fed660858eea93b7631e39adadd9680241", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e4b97c736910473fba8511a0b306a4bfa64501b/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e4b97c736910473fba8511a0b306a4bfa64501b/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=7e4b97c736910473fba8511a0b306a4bfa64501b", "patch": "@@ -2325,7 +2325,9 @@ gfc_build_builtin_function_decls (void)\n \n   gfor_fndecl_select_string =\n     gfc_build_library_function_decl (get_identifier (PREFIX(\"select_string\")),\n-                                     integer_type_node, 0);\n+\t\t\t\t     integer_type_node, 4, pvoid_type_node,\n+\t\t\t\t     integer_type_node, pchar_type_node,\n+\t\t\t\t     integer_type_node);\n \n   gfor_fndecl_runtime_error =\n     gfc_build_library_function_decl (get_identifier (PREFIX(\"runtime_error\")),\n@@ -2379,7 +2381,7 @@ gfc_build_builtin_function_decls (void)\n \n   gfor_fndecl_in_unpack = gfc_build_library_function_decl (\n         get_identifier (PREFIX(\"internal_unpack\")),\n-        pvoid_type_node, 1, pvoid_type_node);\n+        void_type_node, 2, pvoid_type_node, pvoid_type_node);\n \n   gfor_fndecl_associated =\n     gfc_build_library_function_decl ("}, {"sha": "91c77007b35132253a14eb7a563d720ede4be297", "filename": "gcc/fortran/trans-expr.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e4b97c736910473fba8511a0b306a4bfa64501b/gcc%2Ffortran%2Ftrans-expr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e4b97c736910473fba8511a0b306a4bfa64501b/gcc%2Ffortran%2Ftrans-expr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-expr.c?ref=7e4b97c736910473fba8511a0b306a4bfa64501b", "patch": "@@ -3285,6 +3285,11 @@ gfc_conv_structure (gfc_se * se, gfc_expr * expr, int init)\n       CONSTRUCTOR_APPEND_ELT (v, cm->backend_decl, val);\n     }\n   se->expr = build_constructor (type, v);\n+  if (init) \n+    {\n+      TREE_CONSTANT(se->expr) = 1;\n+      TREE_INVARIANT(se->expr) = 1;\n+    }\n }\n \n "}]}