{"sha": "09ebcffa1928d6373895c99e3c534f74f3cd126e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDllYmNmZmExOTI4ZDYzNzM4OTVjOTllM2M1MzRmNzRmM2NkMTI2ZQ==", "commit": {"author": {"name": "Giovanni Bajo", "email": "giovannibajo@gcc.gnu.org", "date": "2004-10-07T08:36:28Z"}, "committer": {"name": "Giovanni Bajo", "email": "giovannibajo@gcc.gnu.org", "date": "2004-10-07T08:36:28Z"}, "message": "re PR c++/17115 (-Winline does not respect __attribute__((__noinline__)))\n\n\tPR c++/17115\n\t* tree-inline.c (expand_call_inline): Do not warn for functions\n\tmarked with attribute noinline.\n\n\tPR c++/17115\n\t* g++.dg/warn/Winline-4.C: New test.\n\nFrom-SVN: r88678", "tree": {"sha": "db6e52deb02c1ade7f1b93d2927831bdd5399fba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db6e52deb02c1ade7f1b93d2927831bdd5399fba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/09ebcffa1928d6373895c99e3c534f74f3cd126e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09ebcffa1928d6373895c99e3c534f74f3cd126e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09ebcffa1928d6373895c99e3c534f74f3cd126e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09ebcffa1928d6373895c99e3c534f74f3cd126e/comments", "author": {"login": "rasky", "id": 1014109, "node_id": "MDQ6VXNlcjEwMTQxMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1014109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rasky", "html_url": "https://github.com/rasky", "followers_url": "https://api.github.com/users/rasky/followers", "following_url": "https://api.github.com/users/rasky/following{/other_user}", "gists_url": "https://api.github.com/users/rasky/gists{/gist_id}", "starred_url": "https://api.github.com/users/rasky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rasky/subscriptions", "organizations_url": "https://api.github.com/users/rasky/orgs", "repos_url": "https://api.github.com/users/rasky/repos", "events_url": "https://api.github.com/users/rasky/events{/privacy}", "received_events_url": "https://api.github.com/users/rasky/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rasky", "id": 1014109, "node_id": "MDQ6VXNlcjEwMTQxMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1014109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rasky", "html_url": "https://github.com/rasky", "followers_url": "https://api.github.com/users/rasky/followers", "following_url": "https://api.github.com/users/rasky/following{/other_user}", "gists_url": "https://api.github.com/users/rasky/gists{/gist_id}", "starred_url": "https://api.github.com/users/rasky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rasky/subscriptions", "organizations_url": "https://api.github.com/users/rasky/orgs", "repos_url": "https://api.github.com/users/rasky/repos", "events_url": "https://api.github.com/users/rasky/events{/privacy}", "received_events_url": "https://api.github.com/users/rasky/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "22d66adf5d3947f66386084992dc76ccb4b391d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22d66adf5d3947f66386084992dc76ccb4b391d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22d66adf5d3947f66386084992dc76ccb4b391d6"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "7ac6b4ae58c0cf1144306b8f8520a6c84f0e1772", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09ebcffa1928d6373895c99e3c534f74f3cd126e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09ebcffa1928d6373895c99e3c534f74f3cd126e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=09ebcffa1928d6373895c99e3c534f74f3cd126e", "patch": "@@ -1,3 +1,9 @@\n+2004-10-07  Giovanni Bajo  <giovannibajo@gcc.gnu.org>\n+\n+\tPR c++/17115\n+\t* tree-inline.c (expand_call_inline): Do not warn for functions\n+\tmarked with attribute noinline.\n+\n 2004-10-07  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \tPR target/17862"}, {"sha": "1087adb9f4d43138f5a8edd1c227486460ccb44d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09ebcffa1928d6373895c99e3c534f74f3cd126e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09ebcffa1928d6373895c99e3c534f74f3cd126e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=09ebcffa1928d6373895c99e3c534f74f3cd126e", "patch": "@@ -1,3 +1,8 @@\n+2004-10-07  Giovanni Bajo  <giovannibajo@gcc.gnu.org>\n+\n+\tPR c++/17115\n+\t* g++.dg/warn/Winline-4.C: New test.\n+\n 2004-10-07  Christian Ehrhardt  <ehrhardt@mathematik.uni-ulm.de>\n \n \t* gcc.c-torture/compile/20041007-1.c: New test."}, {"sha": "188ab5aa896136a29749148ecc330cce7cfd8ce7", "filename": "gcc/testsuite/g++.dg/warn/Winline-4.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09ebcffa1928d6373895c99e3c534f74f3cd126e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWinline-4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09ebcffa1928d6373895c99e3c534f74f3cd126e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWinline-4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWinline-4.C?ref=09ebcffa1928d6373895c99e3c534f74f3cd126e", "patch": "@@ -0,0 +1,17 @@\n+// { dg-do compile }\n+// { dg-options \"-O2 -Winline\" }\n+// Origin: <markus at oberhumer dot com>\n+// PR 17115: We should not emit -Winline warning for functions marked with\n+//  noinline\n+\n+struct Foo {\n+  __attribute__((noinline)) int a(int r) { return r & 1; }\n+  virtual __attribute__((noinline)) int b(int r) { return r & 1; }\n+  static  __attribute__((noinline)) int c(int r) { return r & 1; }\n+};\n+\n+int bar(int r) {\n+  Foo f;\n+  int k = 1; k &= f.a(r); k &= f.b(r); k &= f.a(r);\n+  return k;\n+}"}, {"sha": "0583eb429423e0d856bc406eb9b3b125e9442a44", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09ebcffa1928d6373895c99e3c534f74f3cd126e/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09ebcffa1928d6373895c99e3c534f74f3cd126e/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=09ebcffa1928d6373895c99e3c534f74f3cd126e", "patch": "@@ -1475,7 +1475,8 @@ expand_call_inline (tree *tp, int *walk_subtrees, void *data)\n \t}\n       else if (warn_inline && DECL_DECLARED_INLINE_P (fn)\n \t       && !DECL_IN_SYSTEM_HEADER (fn)\n-\t       && strlen (reason))\n+\t       && strlen (reason)\n+\t       && !lookup_attribute (\"noinline\", DECL_ATTRIBUTES (fn)))\n \t{\n \t  warning (\"%Jinlining failed in call to '%F': %s\", fn, fn, reason);\n \t  warning (\"called from here\");"}]}