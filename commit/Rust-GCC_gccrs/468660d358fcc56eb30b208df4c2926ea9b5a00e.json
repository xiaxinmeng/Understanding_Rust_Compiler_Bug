{"sha": "468660d358fcc56eb30b208df4c2926ea9b5a00e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDY4NjYwZDM1OGZjYzU2ZWIzMGIyMDhkZjRjMjkyNmVhOWI1YTAwZQ==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-07-16T11:43:47Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-07-16T11:43:47Z"}, "message": "emit-rtl.c (emit_label_before): Do not allow the same label to be emitted twice.\n\n\t* emit-rtl.c (emit_label_before): Do not allow the same label\n\tto be emitted twice.\n\t(emit_label_after): Likewise.\n\t(emit_label): Likewise.\n\nFrom-SVN: r189521", "tree": {"sha": "46e8f77aa8739208fc71d9457ab924e9c121f911", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/46e8f77aa8739208fc71d9457ab924e9c121f911"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/468660d358fcc56eb30b208df4c2926ea9b5a00e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/468660d358fcc56eb30b208df4c2926ea9b5a00e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/468660d358fcc56eb30b208df4c2926ea9b5a00e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/468660d358fcc56eb30b208df4c2926ea9b5a00e/comments", "author": null, "committer": null, "parents": [{"sha": "89ca6d794e9bb950640839d1235fc881495e8df8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89ca6d794e9bb950640839d1235fc881495e8df8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89ca6d794e9bb950640839d1235fc881495e8df8"}], "stats": {"total": 39, "additions": 14, "deletions": 25}, "files": [{"sha": "985bbdc5b9ace17d7af35846576941745a2b2da5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/468660d358fcc56eb30b208df4c2926ea9b5a00e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/468660d358fcc56eb30b208df4c2926ea9b5a00e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=468660d358fcc56eb30b208df4c2926ea9b5a00e", "patch": "@@ -1,5 +1,10 @@\n 2012-07-16  Steven Bosscher  <steven@gcc.gnu.org>\n \n+\t* emit-rtl.c (emit_label_before): Do not allow the same label\n+        to be emitted twice.\n+\t(emit_label_after): Likewise.\n+\t(emit_label): Likewise.\n+\n \t* flags.h (TYPE_OVERFLOW_WRAPS, TYPE_OVERFLOW_UNDEFINED,\n \tTYPE_OVERFLOW_TRAPS, POINTER_TYPE_OVERFLOW_UNDEFINED): Move to tree.h.\n \t* tree.h (TYPE_OVERFLOW_WRAPS, TYPE_OVERFLOW_UNDEFINED,"}, {"sha": "3431e98385b33cecb9d0b29e1764835f500f69e5", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 9, "deletions": 25, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/468660d358fcc56eb30b208df4c2926ea9b5a00e/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/468660d358fcc56eb30b208df4c2926ea9b5a00e/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=468660d358fcc56eb30b208df4c2926ea9b5a00e", "patch": "@@ -4220,14 +4220,9 @@ emit_barrier_before (rtx before)\n rtx\n emit_label_before (rtx label, rtx before)\n {\n-  /* This can be called twice for the same label as a result of the\n-     confusion that follows a syntax error!  So make it harmless.  */\n-  if (INSN_UID (label) == 0)\n-    {\n-      INSN_UID (label) = cur_insn_uid++;\n-      add_insn_before (label, before, NULL);\n-    }\n-\n+  gcc_checking_assert (INSN_UID (label) == 0);\n+  INSN_UID (label) = cur_insn_uid++;\n+  add_insn_before (label, before, NULL);\n   return label;\n }\n \n@@ -4386,15 +4381,9 @@ emit_barrier_after (rtx after)\n rtx\n emit_label_after (rtx label, rtx after)\n {\n-  /* This can be called twice for the same label\n-     as a result of the confusion that follows a syntax error!\n-     So make it harmless.  */\n-  if (INSN_UID (label) == 0)\n-    {\n-      INSN_UID (label) = cur_insn_uid++;\n-      add_insn_after (label, after, NULL);\n-    }\n-\n+  gcc_checking_assert (INSN_UID (label) == 0);\n+  INSN_UID (label) = cur_insn_uid++;\n+  add_insn_after (label, after, NULL);\n   return label;\n }\n \n@@ -4810,14 +4799,9 @@ emit_call_insn (rtx x)\n rtx\n emit_label (rtx label)\n {\n-  /* This can be called twice for the same label\n-     as a result of the confusion that follows a syntax error!\n-     So make it harmless.  */\n-  if (INSN_UID (label) == 0)\n-    {\n-      INSN_UID (label) = cur_insn_uid++;\n-      add_insn (label);\n-    }\n+  gcc_checking_assert (INSN_UID (label) == 0);\n+  INSN_UID (label) = cur_insn_uid++;\n+  add_insn (label);\n   return label;\n }\n "}]}