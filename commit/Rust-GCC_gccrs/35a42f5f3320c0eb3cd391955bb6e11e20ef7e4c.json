{"sha": "35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzVhNDJmNWYzMzIwYzBlYjNjZDM5MTk1NWJiNmUxMWUyMGVmN2U0Yw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1998-01-02T22:50:23Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-01-02T22:50:23Z"}, "message": "crtstuff.c (__frame_dummy): New function for irix6.\n\n        * crtstuff.c (__frame_dummy): New function for irix6.\n        (__do_global_ctors): Call __frame_dummy for irix6.\n        * iris6.h (LINK_SPEC): Hide __frame_dummy too.\n\nCo-Authored-By: Jeffrey A Law <law@cygnus.com>\n\nFrom-SVN: r17281", "tree": {"sha": "c8fcdad3d35757efe740dbeac92c62d651f26871", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c8fcdad3d35757efe740dbeac92c62d651f26871"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c/comments", "author": null, "committer": null, "parents": [{"sha": "4aa0a3f4e8beb5f6336ef784676b450078bd31f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4aa0a3f4e8beb5f6336ef784676b450078bd31f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4aa0a3f4e8beb5f6336ef784676b450078bd31f7"}], "stats": {"total": 29, "additions": 23, "deletions": 6}, "files": [{"sha": "9c3be2f88cceb8b75589155714faf1c65ad19766", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c", "patch": "@@ -1,3 +1,10 @@\n+Fri Jan  2 23:40:09 1998  Jim Wilson  (wilson@cygnus.com)\n+                          Jeffrey A Law  (law@cygnus.com)\n+\n+        * crtstuff.c (__frame_dummy): New function for irix6.\n+        (__do_global_ctors): Call __frame_dummy for irix6.\n+\t* iris6.h (LINK_SPEC): Hide __frame_dummy too.\n+\n Fri Jan  2 04:57:57 1998  Weiwen Liu  <liu@hepmail.physics.yale.edu>\n \n \t* alpha.c (vms_valid_decl_attribute_p): Move within #if OPEN_VMS."}, {"sha": "0d88750f7b891b2545e7e7d261af629163c7b611", "filename": "gcc/config/mips/iris6.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c/gcc%2Fconfig%2Fmips%2Firis6.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c/gcc%2Fconfig%2Fmips%2Firis6.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Firis6.h?ref=35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c", "patch": "@@ -1,5 +1,5 @@\n /* Definitions of target machine for GNU compiler.  Iris version 6.\n-   Copyright (C) 1994, 1995, 1996, 1997 Free Software Foundation, Inc.\n+   Copyright (C) 1994, 1995, 1996, 1997, 1998 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -541,5 +541,5 @@ do {\t\t\t\t\t\t\t\t\t \\\n %{!static: \\\n   %{!shared: %{!non_shared: %{!call_shared: -call_shared -no_unresolved}}}} \\\n %{rpath} -init __do_global_ctors -fini __do_global_dtors \\\n-%{shared:-hidden_symbol __do_global_ctors,__do_global_dtors,__EH_FRAME_BEGIN__} \\\n+%{shared:-hidden_symbol __do_global_ctors,__do_global_dtors,__EH_FRAME_BEGIN__,__frame_dummy} \\\n -_SYSTYPE_SVR4 %{mabi=32: -32}%{mabi=n32: -n32}%{mabi=64: -64} %{!mabi*: -n32}\""}, {"sha": "d296ea9084b320e188eb13fe3095d48b58533d74", "filename": "gcc/crtstuff.c", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c/gcc%2Fcrtstuff.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c/gcc%2Fcrtstuff.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcrtstuff.c?ref=35a42f5f3320c0eb3cd391955bb6e11e20ef7e4c", "patch": "@@ -1,6 +1,6 @@\n /* Specialized bits of code needed to support construction and\n    destruction of file-scope objects in C++ code.\n-   Copyright (C) 1991, 1994, 1995, 1996, 1997 Free Software Foundation, Inc.\n+   Copyright (C) 1991, 94-97, 1998 Free Software Foundation, Inc.\n    Contributed by Ron Guilmette (rfg@monkeys.com).\n \n This file is part of GNU CC.\n@@ -257,6 +257,18 @@ __do_global_dtors ()\n   __deregister_frame_info (__EH_FRAME_BEGIN__);\n #endif\n }\n+\n+#ifdef EH_FRAME_SECTION_ASM_OP\n+/* Define a function here to call __register_frame.  crtend.o is linked in\n+   after libgcc.a, and hence can't call libgcc.a functions directly.  That\n+   can lead to unresolved function references.  */\n+void\n+__frame_dummy ()\n+{\n+  static struct object object;\n+  __register_frame_info (__EH_FRAME_BEGIN__, &object);\n+}\n+#endif\n #endif\n \n #endif /* defined(INIT_SECTION_ASM_OP) */\n@@ -387,15 +399,13 @@ __do_global_ctors_aux ()\t/* prologue goes in .text section */\n /* This case is used by the Irix 6 port, which supports named sections but\n    not an SVR4-style .init section.  __do_global_ctors can be non-static\n    in this case because we protect it with -hidden_symbol.  */\n-extern char __EH_FRAME_BEGIN__[];\n static func_ptr __CTOR_END__[];\n void\n __do_global_ctors ()\n {\n   func_ptr *p;\n #ifdef EH_FRAME_SECTION_ASM_OP\n-  static struct object object;\n-  __register_frame_info (__EH_FRAME_BEGIN__, &object);\n+  __frame_dummy ();\n #endif\n   for (p = __CTOR_END__ - 1; *p != (func_ptr) -1; p--)\n     (*p) ();"}]}