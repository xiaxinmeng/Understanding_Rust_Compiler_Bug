{"sha": "47220f037b15e41c272d9ddf92443ddb84c94d41", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDcyMjBmMDM3YjE1ZTQxYzI3MmQ5ZGRmOTI0NDNkZGI4NGM5NGQ0MQ==", "commit": {"author": {"name": "Seongbae Park", "email": "seongbae.park@gmail.com", "date": "2007-07-05T23:44:44Z"}, "committer": {"name": "Seongbae Park", "email": "spark@gcc.gnu.org", "date": "2007-07-05T23:44:44Z"}, "message": "re PR rtl-optimization/32475 (function with asm() does not setup stack frame)\n\n2007-07-05  Seongbae Park  <seongbae.park@gmail.com>\n\n\tPR rtl-optimization/32475\n\t* df-scan.c (df_def_record_1): Add a use of the stack pointer\n\tfor every definition of the stack pointer.\n\nFrom-SVN: r126391", "tree": {"sha": "28228c38feeee42fd8a1f3ffb190fb8e777dcee4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/28228c38feeee42fd8a1f3ffb190fb8e777dcee4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/47220f037b15e41c272d9ddf92443ddb84c94d41", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47220f037b15e41c272d9ddf92443ddb84c94d41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47220f037b15e41c272d9ddf92443ddb84c94d41", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47220f037b15e41c272d9ddf92443ddb84c94d41/comments", "author": null, "committer": null, "parents": [{"sha": "8e39e9afe08cb675620db0024d5eae9dc9aba777", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e39e9afe08cb675620db0024d5eae9dc9aba777", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e39e9afe08cb675620db0024d5eae9dc9aba777"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "b6107178089bae65a26baecb7f74d6347fb9eaea", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47220f037b15e41c272d9ddf92443ddb84c94d41/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47220f037b15e41c272d9ddf92443ddb84c94d41/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=47220f037b15e41c272d9ddf92443ddb84c94d41", "patch": "@@ -1,3 +1,9 @@\n+2007-07-05  Seongbae Park  <seongbae.park@gmail.com>\n+\n+\tPR rtl-optimization/32475\n+\t* df-scan.c (df_def_record_1): Add a use of the stack pointer\n+\tfor every definition of the stack pointer.\n+\n 2007-07-05  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* arm.c (vfp3_const_double_index): Copy signed results of"}, {"sha": "4a8a1be00b15a3e93992e8108e4e99c6fa2e3793", "filename": "gcc/df-scan.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47220f037b15e41c272d9ddf92443ddb84c94d41/gcc%2Fdf-scan.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47220f037b15e41c272d9ddf92443ddb84c94d41/gcc%2Fdf-scan.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdf-scan.c?ref=47220f037b15e41c272d9ddf92443ddb84c94d41", "patch": "@@ -2763,6 +2763,12 @@ df_def_record_1 (struct df_collection_rec *collection_rec,\n       || (GET_CODE (dst) == SUBREG && REG_P (SUBREG_REG (dst))))\n     df_ref_record (collection_rec, \n                    dst, loc, bb, insn, DF_REF_REG_DEF, flags);\n+\n+  /* We want to keep sp alive everywhere - by making all\n+     writes to sp also use of sp. */\n+  if (REG_P (dst) && REGNO (dst) == STACK_POINTER_REGNUM)\n+    df_ref_record (collection_rec,\n+               dst, NULL, bb, insn, DF_REF_REG_USE, flags);\n }\n \n "}]}