{"sha": "eb058b7de655251d88eee5ecce38de008e6eb90d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWIwNThiN2RlNjU1MjUxZDg4ZWVlNWVjY2UzOGRlMDA4ZTZlYjkwZA==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2015-05-16T16:49:13Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gcc.gnu.org", "date": "2015-05-16T16:49:13Z"}, "message": "d-demangle.c (dlang_parse_string): Represent embedded whitespace or non-printable characters as hex or escape...\n\nlibiberty/ChangeLog:\n\n2015-05-16  Iain Buclaw  <ibuclaw@gdcproject.org>\n\n\t* d-demangle.c (dlang_parse_string): Represent embedded whitespace or\n\tnon-printable characters as hex or escape sequences.\n\t* testsuite/d-demangle-expected: Add test for templates with tabs and\n\tnewlines embedded into the signature.\n\nFrom-SVN: r223240", "tree": {"sha": "2aadcfa7449377fd2e912afa75bda2f3226800cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2aadcfa7449377fd2e912afa75bda2f3226800cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eb058b7de655251d88eee5ecce38de008e6eb90d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb058b7de655251d88eee5ecce38de008e6eb90d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb058b7de655251d88eee5ecce38de008e6eb90d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb058b7de655251d88eee5ecce38de008e6eb90d/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "886faf50c7a91d8425314332974b3535c111faa0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/886faf50c7a91d8425314332974b3535c111faa0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/886faf50c7a91d8425314332974b3535c111faa0"}], "stats": {"total": 46, "additions": 44, "deletions": 2}, "files": [{"sha": "3d86a0edd3a9dcc94ec1ebd9e7d0126c9a34bb6c", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb058b7de655251d88eee5ecce38de008e6eb90d/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb058b7de655251d88eee5ecce38de008e6eb90d/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=eb058b7de655251d88eee5ecce38de008e6eb90d", "patch": "@@ -1,3 +1,10 @@\n+2015-05-16  Iain Buclaw  <ibuclaw@gdcproject.org>\n+\n+\t* d-demangle.c (dlang_parse_string): Represent embedded whitespace or\n+\tnon-printable characters as hex or escape sequences.\n+\t* testsuite/d-demangle-expected: Add test for templates with tabs and\n+\tnewlines embedded into the signature.\n+\n 2015-05-08  Joel Brobecker  <brobecker@adacore.com>\n \n \t* mkstemps.c: #include <time.h> if HAVE_TIME_H is defined"}, {"sha": "10585214a9f69694defa16aa624857cf831e6b31", "filename": "libiberty/d-demangle.c", "status": "modified", "additions": 33, "deletions": 2, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb058b7de655251d88eee5ecce38de008e6eb90d/libiberty%2Fd-demangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb058b7de655251d88eee5ecce38de008e6eb90d/libiberty%2Fd-demangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fd-demangle.c?ref=eb058b7de655251d88eee5ecce38de008e6eb90d", "patch": "@@ -1,5 +1,5 @@\n /* Demangler for the D programming language\n-   Copyright 2014 Free Software Foundation, Inc.\n+   Copyright 2014, 2015 Free Software Foundation, Inc.\n    Written by Iain Buclaw (ibuclaw@gdcproject.org)\n \n This file is part of the libiberty library.\n@@ -931,7 +931,38 @@ dlang_parse_string (string *decl, const char *mangled)\n \t  char a = ascii2hex (mangled[0]);\n \t  char b = ascii2hex (mangled[1]);\n \t  char val = (a << 4) | b;\n-\t  string_appendn (decl, &val, 1);\n+\n+\t  /* Sanitize white and non-printable characters.  */\n+\t  switch (val)\n+\t    {\n+\t    case ' ':\n+\t      string_append (decl, \" \");\n+\t      break;\n+\t    case '\\t':\n+\t      string_append (decl, \"\\\\t\");\n+\t      break;\n+\t    case '\\n':\n+\t      string_append (decl, \"\\\\n\");\n+\t      break;\n+\t    case '\\r':\n+\t      string_append (decl, \"\\\\r\");\n+\t      break;\n+\t    case '\\f':\n+\t      string_append (decl, \"\\\\f\");\n+\t      break;\n+\t    case '\\v':\n+\t      string_append (decl, \"\\\\v\");\n+\t      break;\n+\n+\t    default:\n+\t      if (ISPRINT (val))\n+\t\tstring_appendn (decl, &val, 1);\n+\t      else\n+\t\t{\n+\t\t  string_append (decl, \"\\\\x\");\n+\t\t  string_appendn (decl, mangled, 2);\n+\t\t}\n+\t    }\n \t}\n       else\n \treturn NULL;"}, {"sha": "b023f6d5d79ddd252bb56d15d94de9de3fafefea", "filename": "libiberty/testsuite/d-demangle-expected", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb058b7de655251d88eee5ecce38de008e6eb90d/libiberty%2Ftestsuite%2Fd-demangle-expected", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb058b7de655251d88eee5ecce38de008e6eb90d/libiberty%2Ftestsuite%2Fd-demangle-expected", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Ftestsuite%2Fd-demangle-expected?ref=eb058b7de655251d88eee5ecce38de008e6eb90d", "patch": "@@ -934,3 +934,7 @@ serenity.persister.Sqlite.SqlitePersister!(serenity.persister.Sqlite.__unittest6\n --format=dlang\n _D4test4mainFZv5localMFZi\n test.main().local()\n+#\n+--format=dlang\n+_D3std6socket12InternetHost221__T13getHostNoSyncVAyaa96_0a09202020206175746f2078203d2068746f6e6c28706172616d293b0a09202020206175746f206865203d20676574686f73746279616464722826782c20342c206361737428696e74294164647265737346616d696c792e494e4554293b0a09TkZ13getHostNoSyncMFkZb\n+std.socket.InternetHost.getHostNoSync!(\"\\n\\t    auto x = htonl(param);\\n\\t    auto he = gethostbyaddr(&x, 4, cast(int)AddressFamily.INET);\\n\\t\", uint).getHostNoSync(uint)"}]}