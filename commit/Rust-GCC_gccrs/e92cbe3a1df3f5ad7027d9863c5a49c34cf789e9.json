{"sha": "e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTkyY2JlM2ExZGYzZjVhZDcwMjdkOTg2M2M1YTQ5YzM0Y2Y3ODllOQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2008-08-19T11:44:42Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-08-19T11:44:42Z"}, "message": "re PR debug/37156 (Hang with -g -O2 (or higher)  (discovered with malloc.c in sqlite3))\n\n\tPR debug/37156\n\t* pretty-print.c (pp_base_format): Deal with recursive BLOCK trees.\n\t* tree.c (block_nonartificial_location): Likewise.\n\n\t* error.c (cp_print_error_function): Deal with recursive BLOCK trees.\n\n\t* gcc.dg/pr37156.c: New test.\n\nFrom-SVN: r139230", "tree": {"sha": "23cc5f3b6e29a6efeeed823d7dcca1ea37695e1d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/23cc5f3b6e29a6efeeed823d7dcca1ea37695e1d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "53f3815cc08c390d2aee47a252203d416304298c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53f3815cc08c390d2aee47a252203d416304298c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53f3815cc08c390d2aee47a252203d416304298c"}], "stats": {"total": 49, "additions": 46, "deletions": 3}, "files": [{"sha": "a170704b41e454149466979034261dd64f251df2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9", "patch": "@@ -1,3 +1,9 @@\n+2008-08-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/37156\n+\t* pretty-print.c (pp_base_format): Deal with recursive BLOCK trees.\n+\t* tree.c (block_nonartificial_location): Likewise.\n+\n 2008-08-19  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/35972"}, {"sha": "4ffb96e85de43d22f631c818db9b768b7387340a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9", "patch": "@@ -1,3 +1,8 @@\n+2008-08-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/37156\n+\t* error.c (cp_print_error_function): Deal with recursive BLOCK trees.\n+\n 2008-08-18  Tomas Bily  <tbily@suse.cz>\n \n \t* tree.c (cp_tree_equal): Use CONVERT_EXPR_CODE_P."}, {"sha": "177d082f98aef240347e7c3cd3512188f42f23a4", "filename": "gcc/cp/error.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9", "patch": "@@ -2388,7 +2388,9 @@ cp_print_error_function (diagnostic_context *context,\n \t  if (abstract_origin)\n \t    {\n \t      ao = BLOCK_ABSTRACT_ORIGIN (abstract_origin);\n-\t      while (TREE_CODE (ao) == BLOCK && BLOCK_ABSTRACT_ORIGIN (ao))\n+\t      while (TREE_CODE (ao) == BLOCK\n+\t\t     && BLOCK_ABSTRACT_ORIGIN (ao)\n+\t\t     && BLOCK_ABSTRACT_ORIGIN (ao) != ao)\n \t\tao = BLOCK_ABSTRACT_ORIGIN (ao);\n \t      gcc_assert (TREE_CODE (ao) == FUNCTION_DECL);\n \t      fndecl = ao;"}, {"sha": "fdac10e9d44f85e2eed29cdcb2325d83904b16c9", "filename": "gcc/pretty-print.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Fpretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Fpretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpretty-print.c?ref=e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9", "patch": "@@ -501,7 +501,9 @@ pp_base_format (pretty_printer *pp, text_info *text)\n \t      {\n \t\ttree ao = BLOCK_ABSTRACT_ORIGIN (block);\n \n-\t\twhile (TREE_CODE (ao) == BLOCK && BLOCK_ABSTRACT_ORIGIN (ao))\n+\t\twhile (TREE_CODE (ao) == BLOCK\n+\t\t       && BLOCK_ABSTRACT_ORIGIN (ao)\n+\t\t       && BLOCK_ABSTRACT_ORIGIN (ao) != ao)\n \t\t  ao = BLOCK_ABSTRACT_ORIGIN (ao);\n \n \t\tif (TREE_CODE (ao) == FUNCTION_DECL)"}, {"sha": "7499840aa3d809a09232e48bcbd6ea7a0e71fe65", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9", "patch": "@@ -1,3 +1,8 @@\n+2008-08-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/37156\n+\t* gcc.dg/pr37156.c: New test.\n+\n 2008-08-19  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/35972"}, {"sha": "e86f5950f734e644e36560da33a6adcfe0ec32dd", "filename": "gcc/testsuite/gcc.dg/pr37156.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Ftestsuite%2Fgcc.dg%2Fpr37156.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Ftestsuite%2Fgcc.dg%2Fpr37156.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr37156.c?ref=e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9", "patch": "@@ -0,0 +1,21 @@\n+/* PR debug/37156 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -g\" } */\n+\n+__attribute__ ((warning (\"is experimental\"))) int bar (int, int *, int *, int);\n+\n+long long foo (void)\n+{\n+  int n, m;\n+  long long r;\n+  bar (0, &n, &m, 0);\t/* { dg-warning \"is experimental\" } */\n+  r = (long long) n;\n+  return r;\n+}\n+\n+void\n+baz (int n)\n+{\n+  int o;\n+  o = foo () - n;\n+}"}, {"sha": "95d4d5ea61e01d41a4d14cc6aba329bceaa24a1b", "filename": "gcc/tree.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=e92cbe3a1df3f5ad7027d9863c5a49c34cf789e9", "patch": "@@ -8819,7 +8819,9 @@ block_nonartificial_location (tree block)\n     {\n       tree ao = BLOCK_ABSTRACT_ORIGIN (block);\n \n-      while (TREE_CODE (ao) == BLOCK && BLOCK_ABSTRACT_ORIGIN (ao))\n+      while (TREE_CODE (ao) == BLOCK\n+\t     && BLOCK_ABSTRACT_ORIGIN (ao)\n+\t     && BLOCK_ABSTRACT_ORIGIN (ao) != ao)\n \tao = BLOCK_ABSTRACT_ORIGIN (ao);\n \n       if (TREE_CODE (ao) == FUNCTION_DECL)"}]}