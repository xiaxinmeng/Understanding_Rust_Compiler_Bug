{"sha": "7193e639277dc5eaf892bfa397a9608a2d24ed5e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE5M2U2MzkyNzdkYzVlYWY4OTJiZmEzOTdhOTYwOGEyZDI0ZWQ1ZQ==", "commit": {"author": {"name": "Laurent GUERBY", "email": "laurent@guerby.net", "date": "2008-09-21T11:45:23Z"}, "committer": {"name": "Laurent Guerby", "email": "guerby@gcc.gnu.org", "date": "2008-09-21T11:45:23Z"}, "message": "re PR ada/5911 (Support for multilib in Ada)\n\n2008-09-21  Laurent Guerby  <laurent@guerby.net>\n\n        PR ada/5911\n\t* gcc-interface/Makefile.in: Add multilib handling for x86_64\n\tand sparc.\n\t* system-linux-sparcv9.ads: New file.\n\t\n2008-09-21  Laurent Guerby  <laurent@guerby.net>\n            Paolo Bonzini  <bonzini@gnu.org>\n\t\n\tPR ada/5911\n\t* Makefile.in (all, install, mostlyclean, clean, distclean): Add\n\tmultilib handling.\n\t* configure.ac: Add multilib handling.\n\t* configure: Regenerate.\n\n\nCo-Authored-By: Paolo Bonzini <bonzini@gnu.org>\n\nFrom-SVN: r140525", "tree": {"sha": "6f1af2bb95b0dba92fa9fef1cff2bfb7e4406de2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6f1af2bb95b0dba92fa9fef1cff2bfb7e4406de2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7193e639277dc5eaf892bfa397a9608a2d24ed5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7193e639277dc5eaf892bfa397a9608a2d24ed5e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7193e639277dc5eaf892bfa397a9608a2d24ed5e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7193e639277dc5eaf892bfa397a9608a2d24ed5e/comments", "author": {"login": "guerby", "id": 6659329, "node_id": "MDQ6VXNlcjY2NTkzMjk=", "avatar_url": "https://avatars.githubusercontent.com/u/6659329?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guerby", "html_url": "https://github.com/guerby", "followers_url": "https://api.github.com/users/guerby/followers", "following_url": "https://api.github.com/users/guerby/following{/other_user}", "gists_url": "https://api.github.com/users/guerby/gists{/gist_id}", "starred_url": "https://api.github.com/users/guerby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guerby/subscriptions", "organizations_url": "https://api.github.com/users/guerby/orgs", "repos_url": "https://api.github.com/users/guerby/repos", "events_url": "https://api.github.com/users/guerby/events{/privacy}", "received_events_url": "https://api.github.com/users/guerby/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "aa4652fac00c70ea32498ba2d1fb939e9fc0e274", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa4652fac00c70ea32498ba2d1fb939e9fc0e274", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa4652fac00c70ea32498ba2d1fb939e9fc0e274"}], "stats": {"total": 1277, "additions": 1175, "deletions": 102}, "files": [{"sha": "fe89a54c22f5d2cff49a950058a03132f9c62708", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7193e639277dc5eaf892bfa397a9608a2d24ed5e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7193e639277dc5eaf892bfa397a9608a2d24ed5e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=7193e639277dc5eaf892bfa397a9608a2d24ed5e", "patch": "@@ -1,3 +1,10 @@\n+2008-09-21  Laurent Guerby  <laurent@guerby.net>\n+\n+        PR ada/5911\n+\t* gcc-interface/Makefile.in: Add multilib handling for x86_64\n+\tand sparc.\n+\t* system-linux-sparcv9.ads: New file.\n+\t\n 2008-09-20  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* exp_dbug.ads: Document new convention for the XVZ variable."}, {"sha": "59803ca1ed24f9b1f1f6b1538a0f92901b793991", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 34, "deletions": 1, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7193e639277dc5eaf892bfa397a9608a2d24ed5e/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7193e639277dc5eaf892bfa397a9608a2d24ed5e/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=7193e639277dc5eaf892bfa397a9608a2d24ed5e", "patch": "@@ -316,6 +316,18 @@ else\n   osys:=$(word 3,$(targ))\n endif\n \n+# Make arch match the current multilib so that the RTS selection code\n+# picks up the right files. For a given target this must be coherent\n+# with MULTILIB_DIRNAMES defined in gcc/config/target/t-*.\n+\n+ifeq ($(strip $(filter-out %x86_64, $(arch))),)\n+  ifeq ($(strip $(MULTISUBDIR)),/32)\n+    arch:=i686\n+  endif\n+endif\n+\n+# ???: handle more multilib targets\n+\n # LIBGNAT_TARGET_PAIRS is a list of pairs of filenames.\n # The members of each pair must be separated by a '<' and no whitespace.\n # Each pair must be separated by some amount of whitespace from the following\n@@ -1467,7 +1479,7 @@ ifeq ($(strip $(filter-out powerpc% linux%,$(arch) $(osys))),)\n endif\n \n ifeq ($(strip $(filter-out sparc% linux%,$(arch) $(osys))),)\n-  LIBGNAT_TARGET_PAIRS = \\\n+  LIBGNAT_TARGET_PAIRS_32 = \\\n   a-intnam.ads<a-intnam-linux.ads \\\n   s-inmaop.adb<s-inmaop-posix.adb \\\n   s-intman.adb<s-intman-posix.adb \\\n@@ -1482,6 +1494,27 @@ ifeq ($(strip $(filter-out sparc% linux%,$(arch) $(osys))),)\n   s-tpopsp.adb<s-tpopsp-posix-foreign.adb \\\n   system.ads<system-linux-sparc.ads\n \n+  LIBGNAT_TARGET_PAIRS_64 = \\\n+  a-intnam.ads<a-intnam-linux.ads \\\n+  s-inmaop.adb<s-inmaop-posix.adb \\\n+  s-intman.adb<s-intman-posix.adb \\\n+  s-linux.ads<s-linux.ads \\\n+  s-osinte.adb<s-osinte-posix.adb \\\n+  s-osinte.ads<s-osinte-linux.ads \\\n+  s-osprim.adb<s-osprim-posix.adb \\\n+  s-taprop.adb<s-taprop-linux.adb \\\n+  s-tasinf.ads<s-tasinf-linux.ads \\\n+  s-tasinf.adb<s-tasinf-linux.adb \\\n+  s-taspri.ads<s-taspri-posix-noaltstack.ads \\\n+  s-tpopsp.adb<s-tpopsp-posix-foreign.adb \\\n+  system.ads<system-linux-sparcv9.ads\n+\n+  ifeq ($(strip $(MULTISUBDIR)),/64)\n+    LIBGNAT_TARGET_PAIRS = $(LIBGNAT_TARGET_PAIRS_64)\n+  else\n+    LIBGNAT_TARGET_PAIRS = $(LIBGNAT_TARGET_PAIRS_32)\n+  endif\n+\n   TOOLS_TARGET_PAIRS =  \\\n     mlib-tgt-specific.adb<mlib-tgt-specific-linux.adb \\\n     indepsw.adb<indepsw-gnu.adb"}, {"sha": "55766736d33c12a7b0cd2f09a9f9895c35e44add", "filename": "libada/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7193e639277dc5eaf892bfa397a9608a2d24ed5e/libada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7193e639277dc5eaf892bfa397a9608a2d24ed5e/libada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FChangeLog?ref=7193e639277dc5eaf892bfa397a9608a2d24ed5e", "patch": "@@ -1,3 +1,12 @@\n+2008-09-21  Laurent Guerby  <laurent@guerby.net>\n+            Paolo Bonzini  <bonzini@gnu.org>\n+\t\n+\tPR ada/5911\n+\t* Makefile.in (all, install, mostlyclean, clean, distclean): Add\n+\tmultilib handling.\n+\t* configure.ac: Add multilib handling.\n+\t* configure: Regenerate.\n+\n 2008-08-29  Laurent Guerby  <laurent@guerby.net>\n \t\n \t* Makefile.in (FLAGS_TO_PASS): renamed to LIBADA_FLAGS_TO_PASS to"}, {"sha": "2c56868860901b9c5042e57088a8c2d59bf288b8", "filename": "libada/Makefile.in", "status": "modified", "additions": 21, "deletions": 5, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7193e639277dc5eaf892bfa397a9608a2d24ed5e/libada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7193e639277dc5eaf892bfa397a9608a2d24ed5e/libada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FMakefile.in?ref=7193e639277dc5eaf892bfa397a9608a2d24ed5e", "patch": "@@ -17,6 +17,17 @@\n \n # Default target; must be first.\n all: gnatlib\n+\t$(MULTIDO) $(AM_MAKEFLAGS) DO=all multi-do # $(MAKE)\n+\n+.PHONY: all install\n+\n+## Multilib support variables.\n+MULTISRCTOP =\n+MULTIBUILDTOP =\n+MULTIDIRS =\n+MULTISUBDIR =\n+MULTIDO = true\n+MULTICLEAN = true\n \n # Standard autoconf-set variables.\n SHELL = @SHELL@\n@@ -48,12 +59,12 @@ GNATLIBCFLAGS= -g -O2\n \n # Get target-specific overrides for TARGET_LIBGCC2_CFLAGS.\n host_subdir = @host_subdir@\n-GCC_DIR=../../$(host_subdir)/gcc\n+GCC_DIR=$(MULTIBUILDTOP)../../$(host_subdir)/gcc\n include $(GCC_DIR)/libgcc.mvars\n \n target_noncanonical:=@target_noncanonical@\n version := $(shell cat $(srcdir)/../gcc/BASE-VER)\n-libsubdir := $(libdir)/gcc/$(target_noncanonical)/$(version)\n+libsubdir := $(libdir)/gcc/$(target_noncanonical)/$(version)$(MULTISUBDIR)\n \n # exeext should not be used because it's the *host* exeext.  We're building\n # a *target* library, aren't we?!?  Likewise for CC.  Still, provide bogus\n@@ -64,11 +75,12 @@ LIBADA_FLAGS_TO_PASS = \\\n         \"LDFLAGS=$(LDFLAGS)\" \\\n         \"LN_S=$(LN_S)\" \\\n         \"SHELL=$(SHELL)\" \\\n-        \"GNATLIBFLAGS=$(GNATLIBFLAGS)\" \\\n-        \"GNATLIBCFLAGS=$(GNATLIBCFLAGS)\" \\\n+        \"GNATLIBFLAGS=$(GNATLIBFLAGS) $(MULTIFLAGS)\" \\\n+        \"GNATLIBCFLAGS=$(GNATLIBCFLAGS) $(MULTIFLAGS)\" \\\n         \"TARGET_LIBGCC2_CFLAGS=$(TARGET_LIBGCC2_CFLAGS)\" \\\n         \"THREAD_KIND=$(THREAD_KIND)\" \\\n         \"TRACE=$(TRACE)\" \\\n+        \"MULTISUBDIR=$(MULTISUBDIR)\" \\\n         \"libsubdir=$(libsubdir)\" \\\n         \"objext=$(objext)\" \\\n         \"prefix=$(prefix)\" \\\n@@ -119,7 +131,8 @@ html:\n TAGS:\n \n # Installation rules.\n-install:\n+install: install-gnatlib\n+\t$(MULTIDO) $(AM_MAKEFLAGS) DO=install multi-do # $(MAKE)\n \n install-info:\n \n@@ -129,10 +142,13 @@ install-html:\n \n # Cleaning rules.\n mostlyclean:\n+\t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=mostlyclean multi-clean # $(MAKE)\n \n clean:\n+\t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=clean multi-clean # $(MAKE)\n \n distclean:\n+\t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=distclean multi-clean # $(MAKE)\n \t$(RM) Makefile config.status config.log\n \n maintainer-clean:"}, {"sha": "56a4b48113648b96256a1f1aca5d5abc00b2cb93", "filename": "libada/configure", "status": "modified", "additions": 1056, "deletions": 96, "changes": 1152, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7193e639277dc5eaf892bfa397a9608a2d24ed5e/libada%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7193e639277dc5eaf892bfa397a9608a2d24ed5e/libada%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2Fconfigure?ref=7193e639277dc5eaf892bfa397a9608a2d24ed5e", "patch": "@@ -272,7 +272,7 @@ PACKAGE_STRING=\n PACKAGE_BUGREPORT=\n \n ac_unique_file=\"Makefile.in\"\n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical build_libsubdir build_subdir host_subdir target_subdir MAINT enable_shared LN_S default_gnatlib_target CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT warn_cflags LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical build_libsubdir build_subdir host_subdir target_subdir MAINT multi_basedir toolexecdir toolexeclibdir CC ac_ct_CC EXEEXT OBJEXT CFLAGS enable_shared LN_S default_gnatlib_target LDFLAGS CPPFLAGS warn_cflags LIBOBJS LTLIBOBJS'\n ac_subst_files=''\n ac_pwd=`pwd`\n \n@@ -808,6 +808,7 @@ Optional Features:\n   --enable-maintainer-mode\n                           enable make rules and dependencies not useful (and\n                           sometimes confusing) to the casual installer\n+  --enable-multilib       build many library versions (default)\n   --disable-shared        don't provide a shared libgnat\n \n Optional Packages:\n@@ -1456,51 +1457,78 @@ else\n   MAINT='#'\n fi;\n \n-# Check whether --enable-shared or --disable-shared was given.\n-if test \"${enable_shared+set}\" = set; then\n-  enableval=\"$enable_shared\"\n \n-case $enable_shared in\n-  yes | no) ;;\n-  *)\n-    enable_shared=no\n-    IFS=\"${IFS=         }\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:,\"\n-    for pkg in $enableval; do\n-      case $pkg in\n-        ada | libada)\n-          enable_shared=yes ;;\n-      esac\n-    done\n-    IFS=\"$ac_save_ifs\"\n-    ;;\n-esac\n+target_alias=${target_alias-$host_alias}\n \n+# Default to --enable-multilib\n+# Check whether --enable-multilib or --disable-multilib was given.\n+if test \"${enable_multilib+set}\" = set; then\n+  enableval=\"$enable_multilib\"\n+  case \"$enableval\" in\n+  yes) multilib=yes ;;\n+  no)  multilib=no ;;\n+  *)   { { echo \"$as_me:$LINENO: error: bad value $enableval for multilib option\" >&5\n+echo \"$as_me: error: bad value $enableval for multilib option\" >&2;}\n+   { (exit 1); exit 1; }; } ;;\n+ esac\n else\n-  enable_shared=yes\n+  multilib=yes\n fi;\n \n+# We may get other options which we leave undocumented:\n+# --with-target-subdir, --with-multisrctop, --with-multisubdir\n+# See config-ml.in if you want the gory details.\n \n-# Need to pass this down for now :-P\n-echo \"$as_me:$LINENO: checking whether ln -s works\" >&5\n-echo $ECHO_N \"checking whether ln -s works... $ECHO_C\" >&6\n-LN_S=$as_ln_s\n-if test \"$LN_S\" = \"ln -s\"; then\n-  echo \"$as_me:$LINENO: result: yes\" >&5\n-echo \"${ECHO_T}yes\" >&6\n+if test \"$srcdir\" = \".\"; then\n+  if test \"$with_target_subdir\" != \".\"; then\n+    multi_basedir=\"$srcdir/$with_multisrctop../..\"\n+  else\n+    multi_basedir=\"$srcdir/$with_multisrctop..\"\n+  fi\n else\n-  echo \"$as_me:$LINENO: result: no, using $LN_S\" >&5\n-echo \"${ECHO_T}no, using $LN_S\" >&6\n+  multi_basedir=\"$srcdir/..\"\n fi\n \n \n-# Determine what to build for 'gnatlib'\n-if test $build = $target \\\n-   && test ${enable_shared} = yes ; then\n-  # Note that build=target is almost certainly the wrong test; FIXME\n-  default_gnatlib_target=\"gnatlib-shared\"\n-else\n-  default_gnatlib_target=\"gnatlib-plain\"\n-fi\n+          ac_config_commands=\"$ac_config_commands default-1\"\n+\n+# Calculate toolexeclibdir\n+# Also toolexecdir, though it's only used in toolexeclibdir\n+case ${enable_version_specific_runtime_libs} in\n+  yes)\n+    # Need the gcc compiler version to know where to install libraries\n+    # and header files if --enable-version-specific-runtime-libs option\n+    # is selected.\n+    toolexecdir='$(libdir)/gcc/$(target_alias)'\n+    toolexeclibdir='$(toolexecdir)/$(gcc_version)$(MULTISUBDIR)'\n+    ;;\n+  no)\n+    if test -n \"$with_cross_host\" &&\n+       test x\"$with_cross_host\" != x\"no\"; then\n+      # Install a library built with a cross compiler in tooldir, not libdir.\n+      toolexecdir='$(exec_prefix)/$(target_alias)'\n+      toolexeclibdir='$(toolexecdir)/lib'\n+    else\n+      toolexecdir='$(libdir)/gcc-lib/$(target_alias)'\n+      toolexeclibdir='$(libdir)'\n+    fi\n+    multi_os_directory=`$CC -print-multi-os-directory`\n+    case $multi_os_directory in\n+      .) ;; # Avoid trailing /.\n+      *) toolexeclibdir=$toolexeclibdir/$multi_os_directory ;;\n+    esac\n+    ;;\n+esac\n+\n+\n+#TODO: toolexeclibdir is currently disregarded\n+\n+# Check the compiler.\n+# The same as in boehm-gc and libstdc++. Have to borrow it from there.\n+# We must force CC to /not/ be precious variables; otherwise\n+# the wrong, non-multilib-adjusted value will be used in multilibs.\n+# As a side effect, we have to subst CFLAGS ourselves.\n+\n \n \n ac_ext=c\n@@ -1981,74 +2009,856 @@ for ac_file in conftest.exe conftest conftest.*; do\n   esac\n done\n else\n-  { { echo \"$as_me:$LINENO: error: in \\`$ac_pwd':\" >&5\n-echo \"$as_me: error: in \\`$ac_pwd':\" >&2;}\n-{ { echo \"$as_me:$LINENO: error: cannot compute suffix of executables: cannot compile and link\n-See \\`config.log' for more details.\" >&5\n-echo \"$as_me: error: cannot compute suffix of executables: cannot compile and link\n-See \\`config.log' for more details.\" >&2;}\n-   { (exit 1); exit 1; }; }; }\n+  { { echo \"$as_me:$LINENO: error: in \\`$ac_pwd':\" >&5\n+echo \"$as_me: error: in \\`$ac_pwd':\" >&2;}\n+{ { echo \"$as_me:$LINENO: error: cannot compute suffix of executables: cannot compile and link\n+See \\`config.log' for more details.\" >&5\n+echo \"$as_me: error: cannot compute suffix of executables: cannot compile and link\n+See \\`config.log' for more details.\" >&2;}\n+   { (exit 1); exit 1; }; }; }\n+fi\n+\n+rm -f conftest$ac_cv_exeext\n+echo \"$as_me:$LINENO: result: $ac_cv_exeext\" >&5\n+echo \"${ECHO_T}$ac_cv_exeext\" >&6\n+\n+rm -f conftest.$ac_ext\n+EXEEXT=$ac_cv_exeext\n+ac_exeext=$EXEEXT\n+echo \"$as_me:$LINENO: checking for suffix of object files\" >&5\n+echo $ECHO_N \"checking for suffix of object files... $ECHO_C\" >&6\n+if test \"${ac_cv_objext+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.o conftest.obj\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; then\n+  for ac_file in `(ls conftest.o conftest.obj; ls conftest.*) 2>/dev/null`; do\n+  case $ac_file in\n+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg ) ;;\n+    *) ac_cv_objext=`expr \"$ac_file\" : '.*\\.\\(.*\\)'`\n+       break;;\n+  esac\n+done\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+{ { echo \"$as_me:$LINENO: error: in \\`$ac_pwd':\" >&5\n+echo \"$as_me: error: in \\`$ac_pwd':\" >&2;}\n+{ { echo \"$as_me:$LINENO: error: cannot compute suffix of object files: cannot compile\n+See \\`config.log' for more details.\" >&5\n+echo \"$as_me: error: cannot compute suffix of object files: cannot compile\n+See \\`config.log' for more details.\" >&2;}\n+   { (exit 1); exit 1; }; }; }\n+fi\n+\n+rm -f conftest.$ac_cv_objext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_objext\" >&5\n+echo \"${ECHO_T}$ac_cv_objext\" >&6\n+OBJEXT=$ac_cv_objext\n+ac_objext=$OBJEXT\n+echo \"$as_me:$LINENO: checking whether we are using the GNU C compiler\" >&5\n+echo $ECHO_N \"checking whether we are using the GNU C compiler... $ECHO_C\" >&6\n+if test \"${ac_cv_c_compiler_gnu+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+int\n+main ()\n+{\n+#ifndef __GNUC__\n+       choke me\n+#endif\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_compiler_gnu=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_compiler_gnu=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+ac_cv_c_compiler_gnu=$ac_compiler_gnu\n+\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_c_compiler_gnu\" >&5\n+echo \"${ECHO_T}$ac_cv_c_compiler_gnu\" >&6\n+GCC=`test $ac_compiler_gnu = yes && echo yes`\n+ac_test_CFLAGS=${CFLAGS+set}\n+ac_save_CFLAGS=$CFLAGS\n+CFLAGS=\"-g\"\n+echo \"$as_me:$LINENO: checking whether $CC accepts -g\" >&5\n+echo $ECHO_N \"checking whether $CC accepts -g... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_cc_g+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_cv_prog_cc_g=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_cv_prog_cc_g=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_g\" >&5\n+echo \"${ECHO_T}$ac_cv_prog_cc_g\" >&6\n+if test \"$ac_test_CFLAGS\" = set; then\n+  CFLAGS=$ac_save_CFLAGS\n+elif test $ac_cv_prog_cc_g = yes; then\n+  if test \"$GCC\" = yes; then\n+    CFLAGS=\"-g -O2\"\n+  else\n+    CFLAGS=\"-g\"\n+  fi\n+else\n+  if test \"$GCC\" = yes; then\n+    CFLAGS=\"-O2\"\n+  else\n+    CFLAGS=\n+  fi\n+fi\n+echo \"$as_me:$LINENO: checking for $CC option to accept ANSI C\" >&5\n+echo $ECHO_N \"checking for $CC option to accept ANSI C... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_cc_stdc+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  ac_cv_prog_cc_stdc=no\n+ac_save_CC=$CC\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <stdarg.h>\n+#include <stdio.h>\n+#include <sys/types.h>\n+#include <sys/stat.h>\n+/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */\n+struct buf { int x; };\n+FILE * (*rcsopen) (struct buf *, struct stat *, int);\n+static char *e (p, i)\n+     char **p;\n+     int i;\n+{\n+  return p[i];\n+}\n+static char *f (char * (*g) (char **, int), char **p, ...)\n+{\n+  char *s;\n+  va_list v;\n+  va_start (v,p);\n+  s = g (p, va_arg (v,int));\n+  va_end (v);\n+  return s;\n+}\n+\n+/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has\n+   function prototypes and stuff, but not '\\xHH' hex character constants.\n+   These don't provoke an error unfortunately, instead are silently treated\n+   as 'x'.  The following induces an error, until -std1 is added to get\n+   proper ANSI mode.  Curiously '\\x00'!='x' always comes out true, for an\n+   array size at least.  It's necessary to write '\\x00'==0 to get something\n+   that's true only with -std1.  */\n+int osf4_cc_array ['\\x00' == 0 ? 1 : -1];\n+\n+int test (int i, double x);\n+struct s1 {int (*f) (int a);};\n+struct s2 {int (*f) (double a);};\n+int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);\n+int argc;\n+char **argv;\n+int\n+main ()\n+{\n+return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+# Don't try gcc -ansi; that turns off useful extensions and\n+# breaks some systems' header files.\n+# AIX\t\t\t-qlanglvl=ansi\n+# Ultrix and OSF/1\t-std1\n+# HP-UX 10.20 and later\t-Ae\n+# HP-UX older versions\t-Aa -D_HPUX_SOURCE\n+# SVR4\t\t\t-Xc -D__EXTENSIONS__\n+for ac_arg in \"\" -qlanglvl=ansi -std1 -Ae \"-Aa -D_HPUX_SOURCE\" \"-Xc -D__EXTENSIONS__\"\n+do\n+  CC=\"$ac_save_CC $ac_arg\"\n+  rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_cv_prog_cc_stdc=$ac_arg\n+break\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+fi\n+rm -f conftest.err conftest.$ac_objext\n+done\n+rm -f conftest.$ac_ext conftest.$ac_objext\n+CC=$ac_save_CC\n+\n+fi\n+\n+case \"x$ac_cv_prog_cc_stdc\" in\n+  x|xno)\n+    echo \"$as_me:$LINENO: result: none needed\" >&5\n+echo \"${ECHO_T}none needed\" >&6 ;;\n+  *)\n+    echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_stdc\" >&5\n+echo \"${ECHO_T}$ac_cv_prog_cc_stdc\" >&6\n+    CC=\"$CC $ac_cv_prog_cc_stdc\" ;;\n+esac\n+\n+# Some people use a C++ compiler to compile C.  Since we use `exit',\n+# in C++ we need to declare it.  In case someone uses the same compiler\n+# for both compiling C and C++ we need to have the C++ compiler decide\n+# the declaration of exit, since it's the most demanding environment.\n+cat >conftest.$ac_ext <<_ACEOF\n+#ifndef __cplusplus\n+  choke me\n+#endif\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  for ac_declaration in \\\n+   '' \\\n+   'extern \"C\" void std::exit (int) throw (); using std::exit;' \\\n+   'extern \"C\" void std::exit (int); using std::exit;' \\\n+   'extern \"C\" void exit (int) throw ();' \\\n+   'extern \"C\" void exit (int);' \\\n+   'void exit (int);'\n+do\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+$ac_declaration\n+#include <stdlib.h>\n+int\n+main ()\n+{\n+exit (42);\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  :\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+continue\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+$ac_declaration\n+int\n+main ()\n+{\n+exit (42);\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  break\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+done\n+rm -f conftest*\n+if test -n \"$ac_declaration\"; then\n+  echo '#ifdef __cplusplus' >>confdefs.h\n+  echo $ac_declaration      >>confdefs.h\n+  echo '#endif'             >>confdefs.h\n+fi\n+\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n+\n+\n+\n+\n+# Check whether --enable-shared or --disable-shared was given.\n+if test \"${enable_shared+set}\" = set; then\n+  enableval=\"$enable_shared\"\n+\n+case $enable_shared in\n+  yes | no) ;;\n+  *)\n+    enable_shared=no\n+    IFS=\"${IFS=         }\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:,\"\n+    for pkg in $enableval; do\n+      case $pkg in\n+        ada | libada)\n+          enable_shared=yes ;;\n+      esac\n+    done\n+    IFS=\"$ac_save_ifs\"\n+    ;;\n+esac\n+\n+else\n+  enable_shared=yes\n+fi;\n+\n+\n+# Need to pass this down for now :-P\n+echo \"$as_me:$LINENO: checking whether ln -s works\" >&5\n+echo $ECHO_N \"checking whether ln -s works... $ECHO_C\" >&6\n+LN_S=$as_ln_s\n+if test \"$LN_S\" = \"ln -s\"; then\n+  echo \"$as_me:$LINENO: result: yes\" >&5\n+echo \"${ECHO_T}yes\" >&6\n+else\n+  echo \"$as_me:$LINENO: result: no, using $LN_S\" >&5\n+echo \"${ECHO_T}no, using $LN_S\" >&6\n+fi\n+\n+\n+# Determine what to build for 'gnatlib'\n+if test $build = $target \\\n+   && test ${enable_shared} = yes ; then\n+  # Note that build=target is almost certainly the wrong test; FIXME\n+  default_gnatlib_target=\"gnatlib-shared\"\n+else\n+  default_gnatlib_target=\"gnatlib-plain\"\n+fi\n+\n+\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+if test -n \"$ac_tool_prefix\"; then\n+  # Extract the first word of \"${ac_tool_prefix}gcc\", so it can be a program name with args.\n+set dummy ${ac_tool_prefix}gcc; ac_word=$2\n+echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n+echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_CC+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if test -n \"$CC\"; then\n+  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+  for ac_exec_ext in '' $ac_executable_extensions; do\n+  if $as_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_CC=\"${ac_tool_prefix}gcc\"\n+    echo \"$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+done\n+\n+fi\n+fi\n+CC=$ac_cv_prog_CC\n+if test -n \"$CC\"; then\n+  echo \"$as_me:$LINENO: result: $CC\" >&5\n+echo \"${ECHO_T}$CC\" >&6\n+else\n+  echo \"$as_me:$LINENO: result: no\" >&5\n+echo \"${ECHO_T}no\" >&6\n+fi\n+\n+fi\n+if test -z \"$ac_cv_prog_CC\"; then\n+  ac_ct_CC=$CC\n+  # Extract the first word of \"gcc\", so it can be a program name with args.\n+set dummy gcc; ac_word=$2\n+echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n+echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_ac_ct_CC+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if test -n \"$ac_ct_CC\"; then\n+  ac_cv_prog_ac_ct_CC=\"$ac_ct_CC\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+  for ac_exec_ext in '' $ac_executable_extensions; do\n+  if $as_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_ac_ct_CC=\"gcc\"\n+    echo \"$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+done\n+\n+fi\n+fi\n+ac_ct_CC=$ac_cv_prog_ac_ct_CC\n+if test -n \"$ac_ct_CC\"; then\n+  echo \"$as_me:$LINENO: result: $ac_ct_CC\" >&5\n+echo \"${ECHO_T}$ac_ct_CC\" >&6\n+else\n+  echo \"$as_me:$LINENO: result: no\" >&5\n+echo \"${ECHO_T}no\" >&6\n+fi\n+\n+  CC=$ac_ct_CC\n+else\n+  CC=\"$ac_cv_prog_CC\"\n+fi\n+\n+if test -z \"$CC\"; then\n+  if test -n \"$ac_tool_prefix\"; then\n+  # Extract the first word of \"${ac_tool_prefix}cc\", so it can be a program name with args.\n+set dummy ${ac_tool_prefix}cc; ac_word=$2\n+echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n+echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_CC+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if test -n \"$CC\"; then\n+  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+  for ac_exec_ext in '' $ac_executable_extensions; do\n+  if $as_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_CC=\"${ac_tool_prefix}cc\"\n+    echo \"$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+done\n+\n+fi\n+fi\n+CC=$ac_cv_prog_CC\n+if test -n \"$CC\"; then\n+  echo \"$as_me:$LINENO: result: $CC\" >&5\n+echo \"${ECHO_T}$CC\" >&6\n+else\n+  echo \"$as_me:$LINENO: result: no\" >&5\n+echo \"${ECHO_T}no\" >&6\n+fi\n+\n+fi\n+if test -z \"$ac_cv_prog_CC\"; then\n+  ac_ct_CC=$CC\n+  # Extract the first word of \"cc\", so it can be a program name with args.\n+set dummy cc; ac_word=$2\n+echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n+echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_ac_ct_CC+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if test -n \"$ac_ct_CC\"; then\n+  ac_cv_prog_ac_ct_CC=\"$ac_ct_CC\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+  for ac_exec_ext in '' $ac_executable_extensions; do\n+  if $as_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_ac_ct_CC=\"cc\"\n+    echo \"$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+done\n+\n+fi\n+fi\n+ac_ct_CC=$ac_cv_prog_ac_ct_CC\n+if test -n \"$ac_ct_CC\"; then\n+  echo \"$as_me:$LINENO: result: $ac_ct_CC\" >&5\n+echo \"${ECHO_T}$ac_ct_CC\" >&6\n+else\n+  echo \"$as_me:$LINENO: result: no\" >&5\n+echo \"${ECHO_T}no\" >&6\n+fi\n+\n+  CC=$ac_ct_CC\n+else\n+  CC=\"$ac_cv_prog_CC\"\n+fi\n+\n+fi\n+if test -z \"$CC\"; then\n+  # Extract the first word of \"cc\", so it can be a program name with args.\n+set dummy cc; ac_word=$2\n+echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n+echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_CC+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if test -n \"$CC\"; then\n+  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n+else\n+  ac_prog_rejected=no\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+  for ac_exec_ext in '' $ac_executable_extensions; do\n+  if $as_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    if test \"$as_dir/$ac_word$ac_exec_ext\" = \"/usr/ucb/cc\"; then\n+       ac_prog_rejected=yes\n+       continue\n+     fi\n+    ac_cv_prog_CC=\"cc\"\n+    echo \"$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+done\n+\n+if test $ac_prog_rejected = yes; then\n+  # We found a bogon in the path, so make sure we never use it.\n+  set dummy $ac_cv_prog_CC\n+  shift\n+  if test $# != 0; then\n+    # We chose a different compiler from the bogus one.\n+    # However, it has the same basename, so the bogon will be chosen\n+    # first if we set CC to just the basename; use the full file name.\n+    shift\n+    ac_cv_prog_CC=\"$as_dir/$ac_word${1+' '}$@\"\n+  fi\n+fi\n+fi\n+fi\n+CC=$ac_cv_prog_CC\n+if test -n \"$CC\"; then\n+  echo \"$as_me:$LINENO: result: $CC\" >&5\n+echo \"${ECHO_T}$CC\" >&6\n+else\n+  echo \"$as_me:$LINENO: result: no\" >&5\n+echo \"${ECHO_T}no\" >&6\n+fi\n+\n+fi\n+if test -z \"$CC\"; then\n+  if test -n \"$ac_tool_prefix\"; then\n+  for ac_prog in cl\n+  do\n+    # Extract the first word of \"$ac_tool_prefix$ac_prog\", so it can be a program name with args.\n+set dummy $ac_tool_prefix$ac_prog; ac_word=$2\n+echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n+echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_CC+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if test -n \"$CC\"; then\n+  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+  for ac_exec_ext in '' $ac_executable_extensions; do\n+  if $as_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_CC=\"$ac_tool_prefix$ac_prog\"\n+    echo \"$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+done\n+\n+fi\n+fi\n+CC=$ac_cv_prog_CC\n+if test -n \"$CC\"; then\n+  echo \"$as_me:$LINENO: result: $CC\" >&5\n+echo \"${ECHO_T}$CC\" >&6\n+else\n+  echo \"$as_me:$LINENO: result: no\" >&5\n+echo \"${ECHO_T}no\" >&6\n fi\n \n-rm -f conftest$ac_cv_exeext\n-echo \"$as_me:$LINENO: result: $ac_cv_exeext\" >&5\n-echo \"${ECHO_T}$ac_cv_exeext\" >&6\n-\n-rm -f conftest.$ac_ext\n-EXEEXT=$ac_cv_exeext\n-ac_exeext=$EXEEXT\n-echo \"$as_me:$LINENO: checking for suffix of object files\" >&5\n-echo $ECHO_N \"checking for suffix of object files... $ECHO_C\" >&6\n-if test \"${ac_cv_objext+set}\" = set; then\n+    test -n \"$CC\" && break\n+  done\n+fi\n+if test -z \"$CC\"; then\n+  ac_ct_CC=$CC\n+  for ac_prog in cl\n+do\n+  # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n+echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n+echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_ac_ct_CC+set}\" = set; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n+  if test -n \"$ac_ct_CC\"; then\n+  ac_cv_prog_ac_ct_CC=\"$ac_ct_CC\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+  for ac_exec_ext in '' $ac_executable_extensions; do\n+  if $as_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_ac_ct_CC=\"$ac_prog\"\n+    echo \"$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+done\n \n-int\n-main ()\n-{\n+fi\n+fi\n+ac_ct_CC=$ac_cv_prog_ac_ct_CC\n+if test -n \"$ac_ct_CC\"; then\n+  echo \"$as_me:$LINENO: result: $ac_ct_CC\" >&5\n+echo \"${ECHO_T}$ac_ct_CC\" >&6\n+else\n+  echo \"$as_me:$LINENO: result: no\" >&5\n+echo \"${ECHO_T}no\" >&6\n+fi\n \n-  ;\n-  return 0;\n-}\n-_ACEOF\n-rm -f conftest.o conftest.obj\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; then\n-  for ac_file in `(ls conftest.o conftest.obj; ls conftest.*) 2>/dev/null`; do\n-  case $ac_file in\n-    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg ) ;;\n-    *) ac_cv_objext=`expr \"$ac_file\" : '.*\\.\\(.*\\)'`\n-       break;;\n-  esac\n+  test -n \"$ac_ct_CC\" && break\n done\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n \n-{ { echo \"$as_me:$LINENO: error: in \\`$ac_pwd':\" >&5\n+  CC=$ac_ct_CC\n+fi\n+\n+fi\n+\n+\n+test -z \"$CC\" && { { echo \"$as_me:$LINENO: error: in \\`$ac_pwd':\" >&5\n echo \"$as_me: error: in \\`$ac_pwd':\" >&2;}\n-{ { echo \"$as_me:$LINENO: error: cannot compute suffix of object files: cannot compile\n+{ { echo \"$as_me:$LINENO: error: no acceptable C compiler found in \\$PATH\n See \\`config.log' for more details.\" >&5\n-echo \"$as_me: error: cannot compute suffix of object files: cannot compile\n+echo \"$as_me: error: no acceptable C compiler found in \\$PATH\n See \\`config.log' for more details.\" >&2;}\n    { (exit 1); exit 1; }; }; }\n-fi\n \n-rm -f conftest.$ac_cv_objext conftest.$ac_ext\n-fi\n-echo \"$as_me:$LINENO: result: $ac_cv_objext\" >&5\n-echo \"${ECHO_T}$ac_cv_objext\" >&6\n-OBJEXT=$ac_cv_objext\n-ac_objext=$OBJEXT\n+# Provide some information about the compiler.\n+echo \"$as_me:$LINENO:\" \\\n+     \"checking for C compiler version\" >&5\n+ac_compiler=`set X $ac_compile; echo $2`\n+{ (eval echo \"$as_me:$LINENO: \\\"$ac_compiler --version </dev/null >&5\\\"\") >&5\n+  (eval $ac_compiler --version </dev/null >&5) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }\n+{ (eval echo \"$as_me:$LINENO: \\\"$ac_compiler -v </dev/null >&5\\\"\") >&5\n+  (eval $ac_compiler -v </dev/null >&5) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }\n+{ (eval echo \"$as_me:$LINENO: \\\"$ac_compiler -V </dev/null >&5\\\"\") >&5\n+  (eval $ac_compiler -V </dev/null >&5) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }\n+\n echo \"$as_me:$LINENO: checking whether we are using the GNU C compiler\" >&5\n echo $ECHO_N \"checking whether we are using the GNU C compiler... $ECHO_C\" >&6\n if test \"${ac_cv_c_compiler_gnu+set}\" = set; then\n@@ -2896,6 +3706,9 @@ Usage: $0 [OPTIONS] [FILE]...\n Configuration files:\n $config_files\n \n+Configuration commands:\n+$config_commands\n+\n Report bugs to <bug-autoconf@gnu.org>.\"\n _ACEOF\n \n@@ -2994,7 +3807,24 @@ fi\n \n _ACEOF\n \n+cat >>$CONFIG_STATUS <<_ACEOF\n+#\n+# INIT-COMMANDS section.\n+#\n+\n \n+srcdir=\"$srcdir\"\n+host=\"$host\"\n+target=\"$target\"\n+with_multisubdir=\"$with_multisubdir\"\n+with_multisrctop=\"$with_multisrctop\"\n+with_target_subdir=\"$with_target_subdir\"\n+ac_configure_args=\"${multilib_arg} ${ac_configure_args}\"\n+multi_basedir=\"$multi_basedir\"\n+CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}\n+CC=\"$CC\"\n+\n+_ACEOF\n \n \n \n@@ -3004,6 +3834,7 @@ do\n   case \"$ac_config_target\" in\n   # Handling of arguments.\n   \"Makefile\" ) CONFIG_FILES=\"$CONFIG_FILES Makefile\" ;;\n+  \"default-1\" ) CONFIG_COMMANDS=\"$CONFIG_COMMANDS default-1\" ;;\n   *) { { echo \"$as_me:$LINENO: error: invalid argument: $ac_config_target\" >&5\n echo \"$as_me: error: invalid argument: $ac_config_target\" >&2;}\n    { (exit 1); exit 1; }; };;\n@@ -3016,6 +3847,7 @@ done\n # bizarre bug on SunOS 4.1.3.\n if $ac_need_defaults; then\n   test \"${CONFIG_FILES+set}\" = set || CONFIG_FILES=$config_files\n+  test \"${CONFIG_COMMANDS+set}\" = set || CONFIG_COMMANDS=$config_commands\n fi\n \n # Have a temporary directory for convenience.  Make it in the build tree\n@@ -3105,16 +3937,19 @@ s,@build_subdir@,$build_subdir,;t t\n s,@host_subdir@,$host_subdir,;t t\n s,@target_subdir@,$target_subdir,;t t\n s,@MAINT@,$MAINT,;t t\n+s,@multi_basedir@,$multi_basedir,;t t\n+s,@toolexecdir@,$toolexecdir,;t t\n+s,@toolexeclibdir@,$toolexeclibdir,;t t\n+s,@CC@,$CC,;t t\n+s,@ac_ct_CC@,$ac_ct_CC,;t t\n+s,@EXEEXT@,$EXEEXT,;t t\n+s,@OBJEXT@,$OBJEXT,;t t\n+s,@CFLAGS@,$CFLAGS,;t t\n s,@enable_shared@,$enable_shared,;t t\n s,@LN_S@,$LN_S,;t t\n s,@default_gnatlib_target@,$default_gnatlib_target,;t t\n-s,@CC@,$CC,;t t\n-s,@CFLAGS@,$CFLAGS,;t t\n s,@LDFLAGS@,$LDFLAGS,;t t\n s,@CPPFLAGS@,$CPPFLAGS,;t t\n-s,@ac_ct_CC@,$ac_ct_CC,;t t\n-s,@EXEEXT@,$EXEEXT,;t t\n-s,@OBJEXT@,$OBJEXT,;t t\n s,@warn_cflags@,$warn_cflags,;t t\n s,@LIBOBJS@,$LIBOBJS,;t t\n s,@LTLIBOBJS@,$LTLIBOBJS,;t t\n@@ -3351,6 +4186,131 @@ s,@abs_top_builddir@,$ac_abs_top_builddir,;t t\n \n done\n _ACEOF\n+cat >>$CONFIG_STATUS <<\\_ACEOF\n+\n+#\n+# CONFIG_COMMANDS section.\n+#\n+for ac_file in : $CONFIG_COMMANDS; do test \"x$ac_file\" = x: && continue\n+  ac_dest=`echo \"$ac_file\" | sed 's,:.*,,'`\n+  ac_source=`echo \"$ac_file\" | sed 's,[^:]*:,,'`\n+  ac_dir=`(dirname \"$ac_dest\") 2>/dev/null ||\n+$as_expr X\"$ac_dest\" : 'X\\(.*[^/]\\)//*[^/][^/]*/*$' \\| \\\n+\t X\"$ac_dest\" : 'X\\(//\\)[^/]' \\| \\\n+\t X\"$ac_dest\" : 'X\\(//\\)$' \\| \\\n+\t X\"$ac_dest\" : 'X\\(/\\)' \\| \\\n+\t .     : '\\(.\\)' 2>/dev/null ||\n+echo X\"$ac_dest\" |\n+    sed '/^X\\(.*[^/]\\)\\/\\/*[^/][^/]*\\/*$/{ s//\\1/; q; }\n+  \t  /^X\\(\\/\\/\\)[^/].*/{ s//\\1/; q; }\n+  \t  /^X\\(\\/\\/\\)$/{ s//\\1/; q; }\n+  \t  /^X\\(\\/\\).*/{ s//\\1/; q; }\n+  \t  s/.*/./; q'`\n+  { if $as_mkdir_p; then\n+    mkdir -p \"$ac_dir\"\n+  else\n+    as_dir=\"$ac_dir\"\n+    as_dirs=\n+    while test ! -d \"$as_dir\"; do\n+      as_dirs=\"$as_dir $as_dirs\"\n+      as_dir=`(dirname \"$as_dir\") 2>/dev/null ||\n+$as_expr X\"$as_dir\" : 'X\\(.*[^/]\\)//*[^/][^/]*/*$' \\| \\\n+\t X\"$as_dir\" : 'X\\(//\\)[^/]' \\| \\\n+\t X\"$as_dir\" : 'X\\(//\\)$' \\| \\\n+\t X\"$as_dir\" : 'X\\(/\\)' \\| \\\n+\t .     : '\\(.\\)' 2>/dev/null ||\n+echo X\"$as_dir\" |\n+    sed '/^X\\(.*[^/]\\)\\/\\/*[^/][^/]*\\/*$/{ s//\\1/; q; }\n+  \t  /^X\\(\\/\\/\\)[^/].*/{ s//\\1/; q; }\n+  \t  /^X\\(\\/\\/\\)$/{ s//\\1/; q; }\n+  \t  /^X\\(\\/\\).*/{ s//\\1/; q; }\n+  \t  s/.*/./; q'`\n+    done\n+    test ! -n \"$as_dirs\" || mkdir $as_dirs\n+  fi || { { echo \"$as_me:$LINENO: error: cannot create directory \\\"$ac_dir\\\"\" >&5\n+echo \"$as_me: error: cannot create directory \\\"$ac_dir\\\"\" >&2;}\n+   { (exit 1); exit 1; }; }; }\n+\n+  ac_builddir=.\n+\n+if test \"$ac_dir\" != .; then\n+  ac_dir_suffix=/`echo \"$ac_dir\" | sed 's,^\\.[\\\\/],,'`\n+  # A \"../\" for each directory in $ac_dir_suffix.\n+  ac_top_builddir=`echo \"$ac_dir_suffix\" | sed 's,/[^\\\\/]*,../,g'`\n+else\n+  ac_dir_suffix= ac_top_builddir=\n+fi\n+\n+case $srcdir in\n+  .)  # No --srcdir option.  We are building in place.\n+    ac_srcdir=.\n+    if test -z \"$ac_top_builddir\"; then\n+       ac_top_srcdir=.\n+    else\n+       ac_top_srcdir=`echo $ac_top_builddir | sed 's,/$,,'`\n+    fi ;;\n+  [\\\\/]* | ?:[\\\\/]* )  # Absolute path.\n+    ac_srcdir=$srcdir$ac_dir_suffix;\n+    ac_top_srcdir=$srcdir ;;\n+  *) # Relative path.\n+    ac_srcdir=$ac_top_builddir$srcdir$ac_dir_suffix\n+    ac_top_srcdir=$ac_top_builddir$srcdir ;;\n+esac\n+\n+# Do not use `cd foo && pwd` to compute absolute paths, because\n+# the directories may not exist.\n+case `pwd` in\n+.) ac_abs_builddir=\"$ac_dir\";;\n+*)\n+  case \"$ac_dir\" in\n+  .) ac_abs_builddir=`pwd`;;\n+  [\\\\/]* | ?:[\\\\/]* ) ac_abs_builddir=\"$ac_dir\";;\n+  *) ac_abs_builddir=`pwd`/\"$ac_dir\";;\n+  esac;;\n+esac\n+case $ac_abs_builddir in\n+.) ac_abs_top_builddir=${ac_top_builddir}.;;\n+*)\n+  case ${ac_top_builddir}. in\n+  .) ac_abs_top_builddir=$ac_abs_builddir;;\n+  [\\\\/]* | ?:[\\\\/]* ) ac_abs_top_builddir=${ac_top_builddir}.;;\n+  *) ac_abs_top_builddir=$ac_abs_builddir/${ac_top_builddir}.;;\n+  esac;;\n+esac\n+case $ac_abs_builddir in\n+.) ac_abs_srcdir=$ac_srcdir;;\n+*)\n+  case $ac_srcdir in\n+  .) ac_abs_srcdir=$ac_abs_builddir;;\n+  [\\\\/]* | ?:[\\\\/]* ) ac_abs_srcdir=$ac_srcdir;;\n+  *) ac_abs_srcdir=$ac_abs_builddir/$ac_srcdir;;\n+  esac;;\n+esac\n+case $ac_abs_builddir in\n+.) ac_abs_top_srcdir=$ac_top_srcdir;;\n+*)\n+  case $ac_top_srcdir in\n+  .) ac_abs_top_srcdir=$ac_abs_builddir;;\n+  [\\\\/]* | ?:[\\\\/]* ) ac_abs_top_srcdir=$ac_top_srcdir;;\n+  *) ac_abs_top_srcdir=$ac_abs_builddir/$ac_top_srcdir;;\n+  esac;;\n+esac\n+\n+\n+  { echo \"$as_me:$LINENO: executing $ac_dest commands\" >&5\n+echo \"$as_me: executing $ac_dest commands\" >&6;}\n+  case $ac_dest in\n+    default-1 )\n+# Only add multilib support code if we just rebuilt the top-level\n+# Makefile.\n+case \" $CONFIG_FILES \" in\n+ *\" Makefile \"*)\n+   ac_file=Makefile . ${multi_basedir}/config-ml.in\n+   ;;\n+esac ;;\n+  esac\n+done\n+_ACEOF\n \n cat >>$CONFIG_STATUS <<\\_ACEOF\n "}, {"sha": "c456e17d00a2a6de685bbb51be57988ac8d5c9d6", "filename": "libada/configure.ac", "status": "modified", "additions": 48, "deletions": 0, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7193e639277dc5eaf892bfa397a9608a2d24ed5e/libada%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7193e639277dc5eaf892bfa397a9608a2d24ed5e/libada%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2Fconfigure.ac?ref=7193e639277dc5eaf892bfa397a9608a2d24ed5e", "patch": "@@ -49,6 +49,54 @@ AC_ARG_ENABLE([maintainer-mode],\n   [MAINT='#'])\n AC_SUBST([MAINT])dnl\n \n+AC_CANONICAL_SYSTEM\n+target_alias=${target_alias-$host_alias}\n+\n+AM_ENABLE_MULTILIB(, ..)\n+# Calculate toolexeclibdir\n+# Also toolexecdir, though it's only used in toolexeclibdir\n+case ${enable_version_specific_runtime_libs} in\n+  yes)\n+    # Need the gcc compiler version to know where to install libraries\n+    # and header files if --enable-version-specific-runtime-libs option\n+    # is selected.\n+    toolexecdir='$(libdir)/gcc/$(target_alias)'\n+    toolexeclibdir='$(toolexecdir)/$(gcc_version)$(MULTISUBDIR)'\n+    ;;\n+  no)\n+    if test -n \"$with_cross_host\" &&\n+       test x\"$with_cross_host\" != x\"no\"; then\n+      # Install a library built with a cross compiler in tooldir, not libdir.\n+      toolexecdir='$(exec_prefix)/$(target_alias)'\n+      toolexeclibdir='$(toolexecdir)/lib'\n+    else\n+      toolexecdir='$(libdir)/gcc-lib/$(target_alias)'\n+      toolexeclibdir='$(libdir)'\n+    fi\n+    multi_os_directory=`$CC -print-multi-os-directory`\n+    case $multi_os_directory in\n+      .) ;; # Avoid trailing /.\n+      *) toolexeclibdir=$toolexeclibdir/$multi_os_directory ;;\n+    esac\n+    ;;\n+esac\n+AC_SUBST(toolexecdir)\n+AC_SUBST(toolexeclibdir)\n+#TODO: toolexeclibdir is currently disregarded\n+\n+# Check the compiler.\n+# The same as in boehm-gc and libstdc++. Have to borrow it from there.\n+# We must force CC to /not/ be precious variables; otherwise\n+# the wrong, non-multilib-adjusted value will be used in multilibs.\n+# As a side effect, we have to subst CFLAGS ourselves.\n+\n+m4_rename([_AC_ARG_VAR_PRECIOUS],[real_PRECIOUS])\n+m4_define([_AC_ARG_VAR_PRECIOUS],[])\n+AC_PROG_CC\n+m4_rename([real_PRECIOUS],[_AC_ARG_VAR_PRECIOUS])\n+\n+AC_SUBST(CFLAGS)\n+\n AC_ARG_ENABLE([shared],\n [AC_HELP_STRING([--disable-shared],\n                 [don't provide a shared libgnat])],"}]}