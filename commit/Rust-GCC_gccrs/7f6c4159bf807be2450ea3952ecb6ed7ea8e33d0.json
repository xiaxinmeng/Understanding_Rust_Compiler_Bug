{"sha": "7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Y2YzQxNTliZjgwN2JlMjQ1MGVhMzk1MmVjYjZlZDdlYThlMzNkMA==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2014-06-19T07:16:34Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2014-06-19T07:16:34Z"}, "message": "trans-intrinsic.c (conv_co_minmaxsum): Fix argument passing.\n\ngcc/fortran/\n2014-06-19  Tobias Burnus  <burnus@net-b.de>\n\n        * trans-intrinsic.c (conv_co_minmaxsum): Fix argument\n        passing.\n\ngcc/testsuite/\n2014-06-19  Tobias Burnus  <burnus@net-b.de>\n\n        * gfortran.dg/coarray/collectives_2.f90: Extend\n        and make valid.\n\nlibgfortran/\n2014-06-19  Tobias Burnus  <burnus@net-b.de>\n\n        * caf/single.c (_gfortran_caf_co_sum, _gfortran_caf_co_max,\n        _gfortran_caf_co_min): Fix stat setting.\n\nFrom-SVN: r211816", "tree": {"sha": "d7a03ca2513c1c3ab47867b5d0d5cf274a580a17", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d7a03ca2513c1c3ab47867b5d0d5cf274a580a17"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/comments", "author": null, "committer": null, "parents": [{"sha": "29d0a43c96c6c9671c0fe8a05b8cfb2791d5d5cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29d0a43c96c6c9671c0fe8a05b8cfb2791d5d5cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/29d0a43c96c6c9671c0fe8a05b8cfb2791d5d5cd"}], "stats": {"total": 62, "additions": 46, "deletions": 16}, "files": [{"sha": "903e9ab250588cad8a8a6c20889a32da65db9290", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0", "patch": "@@ -1,3 +1,8 @@\n+2014-06-19  Tobias Burnus  <burnus@net-b.de>\n+\n+\t* trans-intrinsic.c (conv_co_minmaxsum): Fix argument\n+\tpassing.\n+\n 2014-06-18  Tobias Burnus  <burnus@net-b.de>\n \n \t* gfortran.texi (OpenMP): Update refs to OpenMP 4.0."}, {"sha": "548fd9fbc769fdd341350f0b4211b96264279d5e", "filename": "gcc/fortran/trans-intrinsic.c", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/gcc%2Ffortran%2Ftrans-intrinsic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/gcc%2Ffortran%2Ftrans-intrinsic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-intrinsic.c?ref=7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0", "patch": "@@ -8300,13 +8300,11 @@ conv_co_minmaxsum (gfc_code *code)\n     gcc_unreachable ();\n \n   if (code->resolved_isym->id == GFC_ISYM_CO_SUM)\n-    fndecl = build_call_expr_loc (input_location, fndecl, 6, array,\n-\t\t\t\t  null_pointer_node, image_index, stat, errmsg,\n-\t\t\t\t  errmsg_len);\n+    fndecl = build_call_expr_loc (input_location, fndecl, 5, array,\n+\t\t\t\t  image_index, stat, errmsg, errmsg_len);\n   else\n-    fndecl = build_call_expr_loc (input_location, fndecl, 7, array,\n-\t\t\t\t  null_pointer_node, image_index, stat, errmsg,\n-\t\t\t\t  strlen, errmsg_len);\n+    fndecl = build_call_expr_loc (input_location, fndecl, 6, array, image_index,\n+\t\t\t\t  stat, errmsg, strlen, errmsg_len);\n   gfc_add_expr_to_block (&block, fndecl);\n   gfc_add_block_to_block (&block, &post_block);\n "}, {"sha": "2d045216615be6d44c1d0bdc7734f57752ac1d2b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0", "patch": "@@ -1,9 +1,14 @@\n+2014-06-19  Tobias Burnus  <burnus@net-b.de>\n+\n+\t* gfortran.dg/coarray/collectives_2.f90: Extend\n+\tand make valid.\n+\n 2014-06-18  Tom de Vries  <tom@codesourcery.com>\n \n \t* gcc.target/aarch64/fuse-caller-save.c: New test.\n \n 2014-06-18  Radovan Obradovic  <robradovic@mips.com>\n-            Tom de Vries  <tom@codesourcery.com>\n+\t    Tom de Vries  <tom@codesourcery.com>\n \n \t* gcc.target/arm/fuse-caller-save.c: New test.\n "}, {"sha": "3ff9383b8eb82891d9c1e91ed1c50493a58c3f49", "filename": "gcc/testsuite/gfortran.dg/coarray/collectives_2.f90", "status": "modified", "additions": 23, "deletions": 6, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Fcollectives_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Fcollectives_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Fcollectives_2.f90?ref=7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0", "patch": "@@ -7,7 +7,7 @@ program test\n   intrinsic co_max\n   intrinsic co_min\n   intrinsic co_sum\n-  integer :: val(3)\n+  integer :: val(3), tmp_val(3)\n   integer :: vec(3)\n   vec = [2,3,1]\n   if (this_image() == 1) then\n@@ -21,13 +21,24 @@ program test\n   else\n     val(3) = 101\n   endif\n+  tmp_val = val\n   call test_min\n+  val = tmp_val\n   call test_max\n+  val = tmp_val\n   call test_sum\n contains\n   subroutine test_max\n-    call co_max (val(vec))\n-    !write(*,*) \"Maximal value\", val\n+    integer :: tmp\n+    call co_max (val(::2))\n+    if (num_images() > 1) then\n+      if (any (val /= [42, this_image(), 101])) call abort()\n+    else\n+      if (any (val /= [42, this_image(), -55])) call abort()\n+    endif\n+\n+    val = tmp_val\n+    call co_max (val(:))\n     if (num_images() > 1) then\n       if (any (val /= [42, num_images(), 101])) call abort()\n     else\n@@ -40,20 +51,26 @@ subroutine test_min\n     if (this_image() == num_images()) then\n       !write(*,*) \"Minimal value\", val\n       if (num_images() > 1) then\n-        if (any (val /= [-99, num_images(), -55])) call abort()\n+        if (any (val /= [-99, 1, -55])) call abort()\n       else\n-        if (any (val /= [42, num_images(), -55])) call abort()\n+        if (any (val /= [42, 1, -55])) call abort()\n       endif\n+    else\n+      if (any (val /= tmp_val)) call abort()\n     endif\n   end subroutine test_min\n \n   subroutine test_sum\n     integer :: n\n-    call co_sum (val, result_image=1)\n+    n = 88\n+    call co_sum (val, result_image=1, stat=n)\n+    if (n /= 0) call abort()\n     if (this_image() == 1) then\n       n = num_images()\n       !write(*,*) \"The sum is \", val\n       if (any (val /= [42 + (n-1)*(-99), (n**2 + n)/2, -55+(n-1)*101])) call abort()\n+    else\n+      if (any (val /= tmp_val)) call abort()\n     end if\n   end subroutine test_sum\n end program test"}, {"sha": "ec8928df04e9965d51be664fc601646b56c07fba", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0", "patch": "@@ -1,3 +1,8 @@\n+2014-06-19  Tobias Burnus  <burnus@net-b.de>\n+\n+\t* caf/single.c (_gfortran_caf_co_sum, _gfortran_caf_co_max,\n+\t_gfortran_caf_co_min): Fix stat setting.\n+\n 2014-06-17  Tobias Burnus  <burnus@net-b.de>\n \n \t* caf/libcaf.h (gfc_descriptor_t): New typedef."}, {"sha": "abb0a1fb9a28b00f3a75ae055917be2ab0505375", "filename": "libgfortran/caf/single.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/libgfortran%2Fcaf%2Fsingle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0/libgfortran%2Fcaf%2Fsingle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fcaf%2Fsingle.c?ref=7f6c4159bf807be2450ea3952ecb6ed7ea8e33d0", "patch": "@@ -211,7 +211,7 @@ _gfortran_caf_co_sum (gfc_descriptor_t *a __attribute__ ((unused)),\n \t\t      int errmsg_len __attribute__ ((unused)))\n {\n   if (stat)\n-    stat = 0;\n+    *stat = 0;\n }\n \n void\n@@ -222,7 +222,7 @@ _gfortran_caf_co_min (gfc_descriptor_t *a __attribute__ ((unused)),\n \t\t      int errmsg_len __attribute__ ((unused)))\n {\n   if (stat)\n-    stat = 0;\n+    *stat = 0;\n }\n \n void\n@@ -233,7 +233,7 @@ _gfortran_caf_co_max (gfc_descriptor_t *a __attribute__ ((unused)),\n \t\t      int errmsg_len __attribute__ ((unused)))\n {\n   if (stat)\n-    stat = 0;\n+    *stat = 0;\n }\n \n void"}]}