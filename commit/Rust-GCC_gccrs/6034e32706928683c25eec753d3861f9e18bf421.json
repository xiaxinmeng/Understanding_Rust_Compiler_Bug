{"sha": "6034e32706928683c25eec753d3861f9e18bf421", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjAzNGUzMjcwNjkyODY4M2MyNWVlYzc1M2QzODYxZjllMThiZjQyMQ==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "1997-01-10T19:09:45Z"}, "committer": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "1997-01-10T19:09:45Z"}, "message": "-mthreads and -mpe support\n\nFrom-SVN: r13483", "tree": {"sha": "005405a72970245fd750542d0198d14a3ae85321", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/005405a72970245fd750542d0198d14a3ae85321"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6034e32706928683c25eec753d3861f9e18bf421", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6034e32706928683c25eec753d3861f9e18bf421", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6034e32706928683c25eec753d3861f9e18bf421", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6034e32706928683c25eec753d3861f9e18bf421/comments", "author": null, "committer": null, "parents": [{"sha": "26d1d6ad197c40e593f4b61c099436385428557d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26d1d6ad197c40e593f4b61c099436385428557d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26d1d6ad197c40e593f4b61c099436385428557d"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "820cc4061ba2bf067987d7d056036672930fd340", "filename": "gcc/config/rs6000/aix41.h", "status": "modified", "additions": 23, "deletions": 2, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6034e32706928683c25eec753d3861f9e18bf421/gcc%2Fconfig%2Frs6000%2Faix41.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6034e32706928683c25eec753d3861f9e18bf421/gcc%2Fconfig%2Frs6000%2Faix41.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faix41.h?ref=6034e32706928683c25eec753d3861f9e18bf421", "patch": "@@ -27,7 +27,9 @@ Boston, MA 02111-1307, USA.  */\n #undef  SUBTARGET_SWITCHES\n #define SUBTARGET_SWITCHES\t\t\\\n   {\"xl-call\", \t\tMASK_XL_CALL},\t\\\n-  {\"no-xl-call\",\t- MASK_XL_CALL},\n+  {\"no-xl-call\",\t- MASK_XL_CALL}, \\\n+  {\"threads\",\t\t0},\t\t\\\n+  {\"pe\",\t\t0},\n \n #include \"rs6000/rs6000.h\"\n \n@@ -39,7 +41,10 @@ Boston, MA 02111-1307, USA.  */\n -Asystem(unix) -Asystem(aix)\"\n \n #undef CPP_SPEC\n-#define CPP_SPEC \"%{posix: -D_POSIX_SOURCE} %(cpp_cpu)\"\n+#define CPP_SPEC \"%{posix: -D_POSIX_SOURCE}\\\n+   %{mpe: -I/usr/lpp/ppe.poe/include}\\\n+   %{mthreads: -D_THREAD_SAFE}\\\n+   %(cpp_cpu)\"\n \n #undef\tCPP_DEFAULT_SPEC\n #define CPP_DEFAULT_SPEC \"-D_ARCH_COM\"\n@@ -83,8 +88,24 @@ Boston, MA 02111-1307, USA.  */\n     }\t\t\t\t\t\t\\\n }\n \n+#undef LIB_SPEC\n+#define LIB_SPEC \"%{pg:-L/lib/profiled -L/usr/lib/profiled}\\\n+   %{p:-L/lib/profiled -L/usr/lib/profiled} %{!shared:%{g*:-lg}}\\\n+   %{mpe:-L/usr/lpp/ppe.poe/lib -lmpi -lvtd}\\\n+   %{mthreads: -L/usr/lib/threads -lpthreads -lc_r /usr/lib/libc.a}\\\n+   %{!mthreads: -lc}\"\n+\n #undef LINK_SPEC\n #define LINK_SPEC \"-bpT:0x10000000 -bpD:0x20000000 %{!r:-btextro} -bnodelcsect\\\n    %{static:-bnso %(link_syscalls) } %{!shared: %{g*: %(link_libg) }}\\\n    %{shared:-bM:SRE %{!e:-bnoentry}}\"\n \n+#undef STARTFILE_SPEC\n+#define STARTFILE_SPEC \"%{!shared:\\\n+   %{mpe:%{pg:/usr/lpp/ppe.poe/lib/gcrt0.o}\\\n+         %{!pg:%{p:/usr/lpp/ppe.poe/lib/mcrt0.o}\\\n+               %{!p:/usr/lpp/ppe.poe/lib/crt0.o}}}\\\n+   %{!mpe:\\\n+     %{mthreads:%{pg:gcrt0_r%O%s}%{!pg:%{p:mcrt0_r%O%s}%{!p:crt0_r%O%s}}}\\\n+     %{!mthreads:%{pg:gcrt0%O%s}%{!pg:%{p:mcrt0%O%s}%{!p:crt0%O%s}}}}}\"\n+"}]}