{"sha": "53a3f614250f4e7b440e9932aa92fd03410de10f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTNhM2Y2MTQyNTBmNGU3YjQ0MGU5OTMyYWE5MmZkMDM0MTBkZTEwZg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2019-04-09T19:29:17Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2019-04-09T19:29:17Z"}, "message": "c-ada-spec.c (print_destructor): Deal with deleting destructors.\n\n\t* c-ada-spec.c (print_destructor): Deal with deleting destructors.\n\t(dump_ada_declaration) <FUNCTION_DECL>: Likewise.\n\nFrom-SVN: r270239", "tree": {"sha": "744a6d75e35840626f92ce302cf455ef36f1121f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/744a6d75e35840626f92ce302cf455ef36f1121f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/53a3f614250f4e7b440e9932aa92fd03410de10f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53a3f614250f4e7b440e9932aa92fd03410de10f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53a3f614250f4e7b440e9932aa92fd03410de10f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53a3f614250f4e7b440e9932aa92fd03410de10f/comments", "author": null, "committer": null, "parents": [{"sha": "9d89b73c06c84ef461da270830f18a7703503e09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d89b73c06c84ef461da270830f18a7703503e09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d89b73c06c84ef461da270830f18a7703503e09"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "2d118f2f73b89bc973f8ddfa496672ba86949e4f", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53a3f614250f4e7b440e9932aa92fd03410de10f/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53a3f614250f4e7b440e9932aa92fd03410de10f/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=53a3f614250f4e7b440e9932aa92fd03410de10f", "patch": "@@ -1,3 +1,8 @@\n+2019-04-09  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* c-ada-spec.c (print_destructor): Deal with deleting destructors.\n+\t(dump_ada_declaration) <FUNCTION_DECL>: Likewise.\n+\n 2019-04-07  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* c-ada-spec.c (is_float128): New predicate extracted from..."}, {"sha": "c85e6060d3e73c6b9982e72766c291bc2570bb8f", "filename": "gcc/c-family/c-ada-spec.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53a3f614250f4e7b440e9932aa92fd03410de10f/gcc%2Fc-family%2Fc-ada-spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53a3f614250f4e7b440e9932aa92fd03410de10f/gcc%2Fc-family%2Fc-ada-spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ada-spec.c?ref=53a3f614250f4e7b440e9932aa92fd03410de10f", "patch": "@@ -2676,6 +2676,8 @@ print_destructor (pretty_printer *buffer, tree t, tree type)\n   tree decl_name = DECL_NAME (TYPE_NAME (type));\n \n   pp_string (buffer, \"Delete_\");\n+  if (strncmp (IDENTIFIER_POINTER (DECL_NAME (t)), \"__dt_del\", 8) == 0)\n+    pp_string (buffer, \"And_Free_\");\n   pp_ada_tree_identifier (buffer, decl_name, t, false);\n }\n \n@@ -2946,9 +2948,10 @@ dump_ada_declaration (pretty_printer *buffer, tree t, tree type, int spc)\n \t  if (DECL_ARTIFICIAL (t))\n \t    return 0;\n \n-\t  /* Only consider constructors/destructors for complete objects.  */\n+\t  /* Only consider complete constructors and deleting destructors.  */\n \t  if (strncmp (IDENTIFIER_POINTER (decl_name), \"__ct_comp\", 9) != 0\n-\t      && strncmp (IDENTIFIER_POINTER (decl_name), \"__dt_comp\", 9) != 0)\n+\t      && strncmp (IDENTIFIER_POINTER (decl_name), \"__dt_comp\", 9) != 0\n+\t      && strncmp (IDENTIFIER_POINTER (decl_name), \"__dt_del\", 8) != 0)\n \t    return 0;\n \t}\n "}]}