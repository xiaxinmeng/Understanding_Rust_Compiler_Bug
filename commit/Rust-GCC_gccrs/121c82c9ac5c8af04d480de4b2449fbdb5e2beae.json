{"sha": "121c82c9ac5c8af04d480de4b2449fbdb5e2beae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTIxYzgyYzlhYzVjOGFmMDRkNDgwZGU0YjI0NDlmYmRiNWUyYmVhZQ==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-11-04T00:00:23Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-11-04T00:00:23Z"}, "message": "trans-array.h (gfc_free_ss, [...]): New prototypes.\n\n\t* trans-array.h (gfc_free_ss, gfc_set_delta): New prototypes.\n\t* trans-array.c (gfc_free_ss): Remove forward declaration.\n\tMake non-static.\n\t(set_delta, gfc_set_delta): Remove forward declaration.\n\tMake non-static and rename the former to the later. Update uses.\n\nFrom-SVN: r180905", "tree": {"sha": "9c555e59113feaf25333c0c251aad66d51eef9eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9c555e59113feaf25333c0c251aad66d51eef9eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/121c82c9ac5c8af04d480de4b2449fbdb5e2beae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/121c82c9ac5c8af04d480de4b2449fbdb5e2beae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/121c82c9ac5c8af04d480de4b2449fbdb5e2beae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/121c82c9ac5c8af04d480de4b2449fbdb5e2beae/comments", "author": null, "committer": null, "parents": [{"sha": "9645e798ba137f3edab0c560f679a433b2a460b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9645e798ba137f3edab0c560f679a433b2a460b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9645e798ba137f3edab0c560f679a433b2a460b6"}], "stats": {"total": 33, "additions": 19, "deletions": 14}, "files": [{"sha": "9a8fee0504b80aaffb630f950f445a83be0bed9f", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/121c82c9ac5c8af04d480de4b2449fbdb5e2beae/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/121c82c9ac5c8af04d480de4b2449fbdb5e2beae/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=121c82c9ac5c8af04d480de4b2449fbdb5e2beae", "patch": "@@ -1,3 +1,11 @@\n+2011-11-04  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\t* trans-array.h (gfc_free_ss, gfc_set_delta): New prototypes.\n+\t* trans-array.c (gfc_free_ss): Remove forward declaration.\n+\tMake non-static.\n+\t(set_delta, gfc_set_delta): Remove forward declaration.\n+\tMake non-static and rename the former to the later. Update uses.\n+\n 2011-11-03  Mikael Morin  <mikael@gcc.gnu.org>\n \n \t* trans.h (gfc_inline_intrinsic_function_p): Move prototype..."}, {"sha": "acd9aec18fefc6631ad443c5dff2d3014a9d6565", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 7, "deletions": 14, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/121c82c9ac5c8af04d480de4b2449fbdb5e2beae/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/121c82c9ac5c8af04d480de4b2449fbdb5e2beae/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=121c82c9ac5c8af04d480de4b2449fbdb5e2beae", "patch": "@@ -466,8 +466,6 @@ gfc_mark_ss_chain_used (gfc_ss * ss, unsigned flags)\n     ss->info->useflags = flags;\n }\n \n-static void gfc_free_ss (gfc_ss *);\n-\n \n /* Free a gfc_ss chain.  */\n \n@@ -500,7 +498,7 @@ free_ss_info (gfc_ss_info *ss_info)\n \n /* Free a SS.  */\n \n-static void\n+void\n gfc_free_ss (gfc_ss * ss)\n {\n   gfc_ss_info *ss_info;\n@@ -1027,7 +1025,7 @@ gfc_trans_create_temp_array (stmtblock_t * pre, stmtblock_t * post, gfc_ss * ss,\n \n \t  /* We have just changed the loop bounds, we must clear the\n \t     corresponding specloop, so that delta calculation is not skipped\n-\t     later in set_delta.  */\n+\t     later in gfc_set_delta.  */\n \t  loop->specloop[n] = NULL;\n \n \t  /* We are constructing the temporary's descriptor based on the loop\n@@ -4372,9 +4370,6 @@ set_loop_bounds (gfc_loopinfo *loop)\n }\n \n \n-static void set_delta (gfc_loopinfo *loop);\n-\n-\n /* Initialize the scalarization loop.  Creates the loop variables.  Determines\n    the range of the loop variables.  Creates a temporary if required.\n    Also generates code for scalar expressions which have been\n@@ -4422,19 +4417,17 @@ gfc_conv_loop_setup (gfc_loopinfo * loop, locus * where)\n \n   /* For array parameters we don't have loop variables, so don't calculate the\n      translations.  */\n-  if (loop->array_parameter)\n-    return;\n-\n-  set_delta (loop);\n+  if (!loop->array_parameter)\n+    gfc_set_delta (loop);\n }\n \n \n /* Calculates how to transform from loop variables to array indices for each\n    array: once loop bounds are chosen, sets the difference (DELTA field) between\n    loop bounds and array reference bounds, for each array info.  */\n \n-static void\n-set_delta (gfc_loopinfo *loop)\n+void\n+gfc_set_delta (gfc_loopinfo *loop)\n {\n   gfc_ss *ss, **loopspec;\n   gfc_array_info *info;\n@@ -4482,7 +4475,7 @@ set_delta (gfc_loopinfo *loop)\n     }\n \n   for (loop = loop->nested; loop; loop = loop->next)\n-    set_delta (loop);\n+    gfc_set_delta (loop);\n }\n \n "}, {"sha": "bd593bdb487286026063446ab28db58b3033787b", "filename": "gcc/fortran/trans-array.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/121c82c9ac5c8af04d480de4b2449fbdb5e2beae/gcc%2Ffortran%2Ftrans-array.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/121c82c9ac5c8af04d480de4b2449fbdb5e2beae/gcc%2Ffortran%2Ftrans-array.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.h?ref=121c82c9ac5c8af04d480de4b2449fbdb5e2beae", "patch": "@@ -88,6 +88,8 @@ void gfc_add_ss_to_loop (gfc_loopinfo *, gfc_ss *);\n void gfc_mark_ss_chain_used (gfc_ss *, unsigned);\n /* Free a gfc_ss chain.  */\n void gfc_free_ss_chain (gfc_ss *);\n+/* Free a single gfc_ss element.  */\n+void gfc_free_ss (gfc_ss *);\n /* Allocate a new array type ss.  */\n gfc_ss *gfc_get_array_ss (gfc_ss *, gfc_expr *, int, gfc_ss_type);\n /* Allocate a new temporary type ss.  */\n@@ -111,6 +113,8 @@ void gfc_trans_scalarizing_loops (gfc_loopinfo *, stmtblock_t *);\n void gfc_trans_scalarized_loop_boundary (gfc_loopinfo *, stmtblock_t *);\n /* Initialize the scalarization loop parameters.  */\n void gfc_conv_loop_setup (gfc_loopinfo *, locus *);\n+/* Set each array's delta.  */\n+void gfc_set_delta (gfc_loopinfo *);\n /* Resolve array assignment dependencies.  */\n void gfc_conv_resolve_dependencies (gfc_loopinfo *, gfc_ss *, gfc_ss *);\n /* Build a null array descriptor constructor.  */"}]}