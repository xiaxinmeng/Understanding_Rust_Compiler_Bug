{"sha": "fd452cefa9e28453d3ca5a7efa05facdda32e58f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQ0NTJjZWZhOWUyODQ1M2QzY2E1YTdlZmEwNWZhY2RkYTMyZTU4Zg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2007-09-09T03:28:08Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2007-09-09T03:28:08Z"}, "message": "re PR c++/33342 (ICE in dependent_type_p, at cp/pt.c:15081)\n\n        PR c++/33342\n        * pt.c (most_specialized_class): Set processing_template_decl\n        while tsubsting partial spec args.\n\nFrom-SVN: r128285", "tree": {"sha": "7175c4ca1b56d9f34545d71673753565b6fbb687", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7175c4ca1b56d9f34545d71673753565b6fbb687"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd452cefa9e28453d3ca5a7efa05facdda32e58f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd452cefa9e28453d3ca5a7efa05facdda32e58f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd452cefa9e28453d3ca5a7efa05facdda32e58f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd452cefa9e28453d3ca5a7efa05facdda32e58f/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ba4807a0d37c0fae2caa5c18839a97e5004b2ffe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba4807a0d37c0fae2caa5c18839a97e5004b2ffe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba4807a0d37c0fae2caa5c18839a97e5004b2ffe"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "ad342b6e78527ca7cbc196c37ecd5458dd89aa67", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd452cefa9e28453d3ca5a7efa05facdda32e58f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd452cefa9e28453d3ca5a7efa05facdda32e58f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=fd452cefa9e28453d3ca5a7efa05facdda32e58f", "patch": "@@ -1,3 +1,9 @@\n+2007-09-08  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/33342\n+\t* pt.c (most_specialized_class): Set processing_template_decl\n+\twhile tsubsting partial spec args.\n+\n 2007-09-06  Jason Merrill  <jason@redhat.com>\n \n \t* decl2.c (get_guard): Copy visibility from the guarded variable."}, {"sha": "e26958cb7b8d71d9c460ebd52b3594efe13400a3", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd452cefa9e28453d3ca5a7efa05facdda32e58f/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd452cefa9e28453d3ca5a7efa05facdda32e58f/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=fd452cefa9e28453d3ca5a7efa05facdda32e58f", "patch": "@@ -13646,6 +13646,8 @@ most_specialized_class (tree type, tree tmpl)\n \t{\n \t  int i;\n \n+\t  ++processing_template_decl;\n+\n \t  /* Discard the outer levels of args, and then substitute in the\n \t     template args from the enclosing class.  */\n \t  partial_spec_args = INNERMOST_TEMPLATE_ARGS (partial_spec_args);\n@@ -13661,6 +13663,8 @@ most_specialized_class (tree type, tree tmpl)\n \t  for (i = TREE_VEC_LENGTH (parms) - 1; i >= 0; --i)\n \t    TREE_VEC_ELT (parms, i) =\n \t      tsubst (TREE_VEC_ELT (parms, i), outer_args, tf_none, NULL_TREE);\n+\n+\t  --processing_template_decl;\n \t}\n       spec_args = get_class_bindings (parms,\n \t\t\t\t      partial_spec_args,"}]}