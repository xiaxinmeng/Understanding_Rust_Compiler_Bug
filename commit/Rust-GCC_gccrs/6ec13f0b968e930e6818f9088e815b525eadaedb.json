{"sha": "6ec13f0b968e930e6818f9088e815b525eadaedb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmVjMTNmMGI5NjhlOTMwZTY4MThmOTA4OGU4MTViNTI1ZWFkYWVkYg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2006-05-05T15:05:20Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2006-05-05T15:05:20Z"}, "message": "re PR libgcj/27294 (gij throws NullPointerException, when the interpreter is not enabled)\n\n\tPR libgcj/27294:\n\t* java/lang/natVMClassLoader.cc (defineClass): Throw\n\tVirtualMachineError if no interpreter configured.\n\nFrom-SVN: r113554", "tree": {"sha": "7224d376e0ab8c0a6d24d040d25e96f8dc5d254c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7224d376e0ab8c0a6d24d040d25e96f8dc5d254c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ec13f0b968e930e6818f9088e815b525eadaedb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ec13f0b968e930e6818f9088e815b525eadaedb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ec13f0b968e930e6818f9088e815b525eadaedb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ec13f0b968e930e6818f9088e815b525eadaedb/comments", "author": null, "committer": null, "parents": [{"sha": "c6ea4dd7ae25671c084ba0cd7c75be07d643b113", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6ea4dd7ae25671c084ba0cd7c75be07d643b113", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6ea4dd7ae25671c084ba0cd7c75be07d643b113"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "d0992f6c6826c75dafce53e20913091e4c9ea253", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ec13f0b968e930e6818f9088e815b525eadaedb/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ec13f0b968e930e6818f9088e815b525eadaedb/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=6ec13f0b968e930e6818f9088e815b525eadaedb", "patch": "@@ -1,3 +1,9 @@\n+2006-05-05  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR libgcj/27294:\n+\t* java/lang/natVMClassLoader.cc (defineClass): Throw\n+\tVirtualMachineError if no interpreter configured.\n+\n 2006-05-03  Andrew Haley  <aph@redhat.com>\n \n \tPR libgcj/27352"}, {"sha": "95c1f15934c16790a07257b7e9f13583562f4dd4", "filename": "libjava/java/lang/natVMClassLoader.cc", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ec13f0b968e930e6818f9088e815b525eadaedb/libjava%2Fjava%2Flang%2FnatVMClassLoader.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ec13f0b968e930e6818f9088e815b525eadaedb/libjava%2Fjava%2Flang%2FnatVMClassLoader.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatVMClassLoader.cc?ref=6ec13f0b968e930e6818f9088e815b525eadaedb", "patch": "@@ -1,6 +1,6 @@\n // natVMClassLoader.cc - VMClassLoader native methods\n \n-/* Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005  Free Software Foundation\n+/* Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006  Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -34,6 +34,7 @@ details.  */\n #include <java/lang/StringBuffer.h>\n #include <java/lang/Runtime.h>\n #include <java/util/HashSet.h>\n+#include <java/lang/VirtualMachineError.h>\n \n java::lang::Class *\n java::lang::VMClassLoader::defineClass (java::lang::ClassLoader *loader,\n@@ -94,6 +95,20 @@ java::lang::VMClassLoader::defineClass (java::lang::ClassLoader *loader,\n     }\n #endif // INTERPRETER\n \n+  if (! klass)\n+    {\n+      StringBuffer *sb = new StringBuffer();\n+      if (name)\n+\t{\n+\t  sb->append(JvNewStringLatin1(\"found class file for class \"));\n+\t  sb->append(name);\n+\t}\n+      else\n+\tsb->append(JvNewStringLatin1(\"found unnamed class file\"));\n+      sb->append(JvNewStringLatin1(\", but no interpreter configured in this libgcj\"));\n+      throw new VirtualMachineError(sb->toString());\n+    }\n+\n   return klass;\n }\n "}]}