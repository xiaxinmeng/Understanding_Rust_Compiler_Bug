{"sha": "824a2b3d8cb18e80ed11231ed57b4bf67134fcd0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODI0YTJiM2Q4Y2IxOGU4MGVkMTEyMzFlZDU3YjRiZjY3MTM0ZmNkMA==", "commit": {"author": {"name": "Olivier Hainque", "email": "hainque@adacore.com", "date": "2017-11-22T17:30:07Z"}, "committer": {"name": "Olivier Hainque", "email": "hainque@gcc.gnu.org", "date": "2017-11-22T17:30:07Z"}, "message": "vxworks.c (vxworks_override_options): Pick default dwarf version from macro value, VXWORKS_DWARF_VERSION_DEFAULT.\n\n2017-11-22  Olivier Hainque  <hainque@adacore.com>\n\n       * config/vxworks.c (vxworks_override_options): Pick default\n\tdwarf version from macro value, VXWORKS_DWARF_VERSION_DEFAULT.\n       * config/vxworks.h: Define VXWORKS_DWARF_VERSION_DEFAULT and\n       DWARF_GNAT_ENCODINGS_DEFAULT.\n       * config/vxworksae.h: Likewise.\n\nFrom-SVN: r255069", "tree": {"sha": "3b1188e58bf092fb933a2c014ca452c4215af9e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b1188e58bf092fb933a2c014ca452c4215af9e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0/comments", "author": {"login": "hainque", "id": 18735142, "node_id": "MDQ6VXNlcjE4NzM1MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/18735142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hainque", "html_url": "https://github.com/hainque", "followers_url": "https://api.github.com/users/hainque/followers", "following_url": "https://api.github.com/users/hainque/following{/other_user}", "gists_url": "https://api.github.com/users/hainque/gists{/gist_id}", "starred_url": "https://api.github.com/users/hainque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hainque/subscriptions", "organizations_url": "https://api.github.com/users/hainque/orgs", "repos_url": "https://api.github.com/users/hainque/repos", "events_url": "https://api.github.com/users/hainque/events{/privacy}", "received_events_url": "https://api.github.com/users/hainque/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e54675bbabc2ed8100b7055008818b391cbbabbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e54675bbabc2ed8100b7055008818b391cbbabbb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e54675bbabc2ed8100b7055008818b391cbbabbb"}], "stats": {"total": 35, "additions": 32, "deletions": 3}, "files": [{"sha": "74acbccc58a0c8ca07bf3dad99584a5baafeb85f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=824a2b3d8cb18e80ed11231ed57b4bf67134fcd0", "patch": "@@ -1,3 +1,11 @@\n+2017-11-22  Olivier Hainque  <hainque@adacore.com>\n+\n+       * config/vxworks.c (vxworks_override_options): Pick default\n+\tdwarf version from macro value, VXWORKS_DWARF_VERSION_DEFAULT.\n+       * config/vxworks.h: Define VXWORKS_DWARF_VERSION_DEFAULT and\n+       DWARF_GNAT_ENCODINGS_DEFAULT.\n+       * config/vxworksae.h: Likewise.\n+\n 2017-11-22  Marc Glisse  <marc.glisse@inria.fr>\n \n \tPR tree-optimization/83104"}, {"sha": "1d903689de12428b2b9d798520c948f49639e293", "filename": "gcc/config/vxworks.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0/gcc%2Fconfig%2Fvxworks.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0/gcc%2Fconfig%2Fvxworks.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvxworks.c?ref=824a2b3d8cb18e80ed11231ed57b4bf67134fcd0", "patch": "@@ -150,11 +150,13 @@ vxworks_override_options (void)\n   if (flag_pic && !TARGET_VXWORKS_RTP)\n     error (\"PIC is only supported for RTPs\");\n \n-  /* Default to strict dwarf-2 to prevent potential difficulties observed with\n-     non-gdb debuggers on extensions > 2.  */\n+  /* VxWorks comes with non-gdb debuggers which only support strict\n+     dwarf up to certain version.  Default dwarf control to friendly\n+     values for these.  */\n+\n   if (!global_options_set.x_dwarf_strict)\n     dwarf_strict = 1;\n \n   if (!global_options_set.x_dwarf_version)\n-    dwarf_version = 2;\n+    dwarf_version = VXWORKS_DWARF_VERSION_DEFAULT;\n }"}, {"sha": "29a6cb01e183aff75efe9a81ddb66b0758fc4baf", "filename": "gcc/config/vxworks.h", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0/gcc%2Fconfig%2Fvxworks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0/gcc%2Fconfig%2Fvxworks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvxworks.h?ref=824a2b3d8cb18e80ed11231ed57b4bf67134fcd0", "patch": "@@ -202,3 +202,13 @@ extern void vxworks_asm_out_destructor (rtx symbol, int priority);\n \n /* The diab linker does not handle .gnu_attribute sections.  */\n #undef HAVE_AS_GNU_ATTRIBUTE\n+\n+/* Default dwarf control values, for non-gdb debuggers that come with\n+   VxWorks.  */\n+\n+#undef VXWORKS_DWARF_VERSION_DEFAULT\n+#define VXWORKS_DWARF_VERSION_DEFAULT (TARGET_VXWORKS7 ? 4 : 2)\n+\n+#undef DWARF_GNAT_ENCODINGS_DEFAULT\n+#define DWARF_GNAT_ENCODINGS_DEFAULT \\\n+  (TARGET_VXWORKS7 ? DWARF_GNAT_ENCODINGS_MINIMAL : DWARF_GNAT_ENCODINGS_ALL)"}, {"sha": "8caa7ddaf96a2ad4c96ce3767a19e482637c8330", "filename": "gcc/config/vxworksae.h", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0/gcc%2Fconfig%2Fvxworksae.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/824a2b3d8cb18e80ed11231ed57b4bf67134fcd0/gcc%2Fconfig%2Fvxworksae.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvxworksae.h?ref=824a2b3d8cb18e80ed11231ed57b4bf67134fcd0", "patch": "@@ -75,3 +75,12 @@ along with GCC; see the file COPYING3.  If not see\n #undef VXWORKS_OVERRIDE_OPTIONS\n #define VXWORKS_OVERRIDE_OPTIONS vxworks_override_options ()\n extern void vxworks_override_options (void);\n+\n+/* Default dwarf control values, for non-gdb debuggers that come with\n+   VxWorks.  */\n+\n+#undef VXWORKS_DWARF_VERSION_DEFAULT\n+#define VXWORKS_DWARF_VERSION_DEFAULT 2\n+\n+#undef DWARF_GNAT_ENCODINGS_DEFAULT\n+#define DWARF_GNAT_ENCODINGS_DEFAULT DWARF_GNAT_ENCODINGS_ALL"}]}