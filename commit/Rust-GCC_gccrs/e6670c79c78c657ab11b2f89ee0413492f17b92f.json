{"sha": "e6670c79c78c657ab11b2f89ee0413492f17b92f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTY2NzBjNzljNzhjNjU3YWIxMWIyZjg5ZWUwNDEzNDkyZjE3YjkyZg==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2003-04-11T02:57:44Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2003-04-11T02:57:44Z"}, "message": "basic_file_stdio.cc (__basic_file<char>::close): Don't flush stream twice.\n\n\t* basic_file_stdio.cc (__basic_file<char>::close): Don't flush stream\n\ttwice.  Always set _M_cfile to 0 when stream was open.\n\nFrom-SVN: r65458", "tree": {"sha": "c825d1bcab4804c66b3be739616e9496ba63630e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c825d1bcab4804c66b3be739616e9496ba63630e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e6670c79c78c657ab11b2f89ee0413492f17b92f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6670c79c78c657ab11b2f89ee0413492f17b92f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e6670c79c78c657ab11b2f89ee0413492f17b92f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6670c79c78c657ab11b2f89ee0413492f17b92f/comments", "author": null, "committer": null, "parents": [{"sha": "6d9c4c8386f1d11605d1c383f68d118be6aeea18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d9c4c8386f1d11605d1c383f68d118be6aeea18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d9c4c8386f1d11605d1c383f68d118be6aeea18"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "11b2af8872fad3444011707afc21bd0baeee9992", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6670c79c78c657ab11b2f89ee0413492f17b92f/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6670c79c78c657ab11b2f89ee0413492f17b92f/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=e6670c79c78c657ab11b2f89ee0413492f17b92f", "patch": "@@ -1,3 +1,8 @@\n+2003-04-10  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\t* basic_file_stdio.cc (__basic_file<char>::close): Don't flush stream\n+\ttwice.  Always set _M_cfile to 0 when stream was open.\n+\n 2003-04-09  Benjamin Kosnik  <bkoz@redhat.com>\n \n \tReshuffle 27_io testsuite.  * testsuite/27_io/filebuf.cc,"}, {"sha": "7f9c18bf05af60c67d4c794c426b38e4b8ced885", "filename": "libstdc++-v3/config/io/basic_file_stdio.cc", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6670c79c78c657ab11b2f89ee0413492f17b92f/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6670c79c78c657ab11b2f89ee0413492f17b92f/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.cc?ref=e6670c79c78c657ab11b2f89ee0413492f17b92f", "patch": "@@ -195,12 +195,12 @@ namespace std\n     __basic_file* __retval = static_cast<__basic_file*>(NULL);\n     if (this->is_open())\n       {\n-\tfflush(_M_cfile);\n-\tif ((_M_cfile_created && fclose(_M_cfile) == 0) || !_M_cfile_created)\n-\t  {\n-\t    _M_cfile = 0;\n-\t    __retval = this;\n-\t  }\n+\tif (_M_cfile_created)\n+\t  fclose(_M_cfile);\n+\telse\n+\t  fflush(_M_cfile);\n+\t_M_cfile = 0;\n+\t__retval = this;\n       }\n     return __retval;\n   }"}]}