{"sha": "4bb07c5d3708bbab76c88458eb885a66c7ecf265", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGJiMDdjNWQzNzA4YmJhYjc2Yzg4NDU4ZWI4ODVhNjZjN2VjZjI2NQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-02-09T11:09:25Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-02-09T11:09:25Z"}, "message": "re PR middle-end/38981 (internal compiler error)\n\n\tPR middle-end/38981\n\t* tree-ssa-coalesce.c (add_coalesce): Cap the costs of coalesce pairs\n\tat MUST_COALESCE_COST-1 instead of MUST_COALESCE_COST.\n\nFrom-SVN: r144032", "tree": {"sha": "a5a4fa014573b90d9d7e979aabb0ae0586189fe4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5a4fa014573b90d9d7e979aabb0ae0586189fe4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4bb07c5d3708bbab76c88458eb885a66c7ecf265", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bb07c5d3708bbab76c88458eb885a66c7ecf265", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4bb07c5d3708bbab76c88458eb885a66c7ecf265", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bb07c5d3708bbab76c88458eb885a66c7ecf265/comments", "author": null, "committer": null, "parents": [{"sha": "f060a26123884c98f69ced61aea93dea895ea9eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f060a26123884c98f69ced61aea93dea895ea9eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f060a26123884c98f69ced61aea93dea895ea9eb"}], "stats": {"total": 84, "additions": 77, "deletions": 7}, "files": [{"sha": "b1e2ae8b8754cefdb23229e0533fa2d6d8a65b34", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bb07c5d3708bbab76c88458eb885a66c7ecf265/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bb07c5d3708bbab76c88458eb885a66c7ecf265/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4bb07c5d3708bbab76c88458eb885a66c7ecf265", "patch": "@@ -1,3 +1,9 @@\n+2009-02-09  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR middle-end/38981\n+\t* tree-ssa-coalesce.c (add_coalesce): Cap the costs of coalesce pairs\n+\tat MUST_COALESCE_COST-1 instead of MUST_COALESCE_COST.\n+\n 2009-02-09  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/35202"}, {"sha": "cd90ac8d78afb58d3d6a3f9f1527216233c5ec87", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bb07c5d3708bbab76c88458eb885a66c7ecf265/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bb07c5d3708bbab76c88458eb885a66c7ecf265/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4bb07c5d3708bbab76c88458eb885a66c7ecf265", "patch": "@@ -1,3 +1,7 @@\n+2009-02-09  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc.c-torture/compile/20090209-1.c: New test.\n+\n 2009-02-06  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/35147"}, {"sha": "781a5e8fd0da237e152711683266afafa5267c8c", "filename": "gcc/testsuite/gcc.c-torture/compile/20090209-1.c", "status": "added", "additions": 61, "deletions": 0, "changes": 61, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bb07c5d3708bbab76c88458eb885a66c7ecf265/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20090209-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bb07c5d3708bbab76c88458eb885a66c7ecf265/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20090209-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20090209-1.c?ref=4bb07c5d3708bbab76c88458eb885a66c7ecf265", "patch": "@@ -0,0 +1,61 @@\n+/* PR middle-end/38981 */\n+/* Reporter: Kamaraju Kusumanchi <kamaraju@gmail.com> */\n+\n+struct d_info\n+{\n+  int **subs;\n+};\n+\n+static int *\n+d_substitution (struct d_info *di, int prefix)\n+{\n+  char c;\n+\n+\tc='_';\n+\n+  if (c == '_')\n+    {\n+      unsigned int id;\n+\n+      if (c != '_')\n+\t{\n+\t  do\n+\t    {\n+\t      unsigned int new_id;\n+\n+\t      if (new_id < id)\n+\t\treturn 0;\n+\t      id = new_id;\n+\t    }\n+\t  while (c != '_');\n+\t}\n+\n+\n+\n+      return di->subs[id];\n+    }\n+  else\n+    {\n+      int verbose;\n+      int code;\n+      int simple_len;\n+\n+\tcode=0;\n+\tsimple_len=0;\n+\tverbose=0;\n+      if (! code && prefix)\n+\t{\n+\t  char peek;\n+\t\tpeek='A';\n+\n+\t  if (peek == 'C' || peek == 'D')\n+\t    verbose = 1;\n+\t}\n+\n+\t      if (verbose)\n+\t\t{\n+\t\t  code = simple_len;\n+\t\t}\n+\n+    }\n+}"}, {"sha": "8ac74f0c2906faa5ef8f9bc8b6b05333203f0ffb", "filename": "gcc/tree-ssa-coalesce.c", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bb07c5d3708bbab76c88458eb885a66c7ecf265/gcc%2Ftree-ssa-coalesce.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bb07c5d3708bbab76c88458eb885a66c7ecf265/gcc%2Ftree-ssa-coalesce.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-coalesce.c?ref=4bb07c5d3708bbab76c88458eb885a66c7ecf265", "patch": "@@ -284,8 +284,7 @@ add_cost_one_coalesce (coalesce_list_p cl, int p1, int p2)\n /* Add a coalesce between P1 and P2 in list CL with a cost of VALUE.  */\n \n static inline void \n-add_coalesce (coalesce_list_p cl, int p1, int p2,\n-\t      int value)\n+add_coalesce (coalesce_list_p cl, int p1, int p2, int value)\n {\n   coalesce_pair_p node;\n \n@@ -295,13 +294,13 @@ add_coalesce (coalesce_list_p cl, int p1, int p2,\n \n   node = find_coalesce_pair (cl, p1, p2, true);\n \n-  /* Once the value is MUST_COALESCE_COST, leave it that way.  */\n-  if (node->cost != MUST_COALESCE_COST)\n+  /* Once the value is at least MUST_COALESCE_COST - 1, leave it that way.  */\n+  if (node->cost < MUST_COALESCE_COST - 1)\n     {\n-      if (value == MUST_COALESCE_COST)\n-\tnode->cost = value;\n-      else\n+      if (value < MUST_COALESCE_COST - 1)\n \tnode->cost += value;\n+      else\n+\tnode->cost = value;\n     }\n }\n "}]}