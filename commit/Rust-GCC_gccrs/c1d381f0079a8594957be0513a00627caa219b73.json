{"sha": "c1d381f0079a8594957be0513a00627caa219b73", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzFkMzgxZjAwNzlhODU5NDk1N2JlMDUxM2EwMDYyN2NhYTIxOWI3Mw==", "commit": {"author": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2021-05-10T12:36:52Z"}, "committer": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2021-05-10T12:37:15Z"}, "message": "contrib/gcc-changelog: Detect if same file appears twice\n\ncontrib/ChangeLog:\n\n\t* gcc-changelog/git_commit.py (Error.__repr__): Add space after the colon.\n\t(GitCommit.check_mentioned_files): Check whether the same file has been\n\tspecified multiple times.\n\t* gcc-changelog/test_email.py (TestGccChangelog.test_multi_same_file): New.\n\t* gcc-changelog/test_patches.txt (0001-OpenMP-Fix-SIMT): New test.", "tree": {"sha": "b46b54cd3601b1d819d0b3e9af200dcae79bf87c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b46b54cd3601b1d819d0b3e9af200dcae79bf87c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c1d381f0079a8594957be0513a00627caa219b73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1d381f0079a8594957be0513a00627caa219b73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1d381f0079a8594957be0513a00627caa219b73", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1d381f0079a8594957be0513a00627caa219b73/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f94ed3b4c308c9da7baf59ecbc0f953e994f9c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f94ed3b4c308c9da7baf59ecbc0f953e994f9c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f94ed3b4c308c9da7baf59ecbc0f953e994f9c4"}], "stats": {"total": 42, "additions": 40, "deletions": 2}, "files": [{"sha": "d9332cb0c388a94fe0a1a3dc1c8f11267b74d10d", "filename": "contrib/gcc-changelog/git_commit.py", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1d381f0079a8594957be0513a00627caa219b73/contrib%2Fgcc-changelog%2Fgit_commit.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1d381f0079a8594957be0513a00627caa219b73/contrib%2Fgcc-changelog%2Fgit_commit.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fgcc-changelog%2Fgit_commit.py?ref=c1d381f0079a8594957be0513a00627caa219b73", "patch": "@@ -200,7 +200,7 @@ def __init__(self, message, line=None):\n     def __repr__(self):\n         s = self.message\n         if self.line:\n-            s += ':\"%s\"' % self.line\n+            s += ': \"%s\"' % self.line\n         return s\n \n \n@@ -629,7 +629,12 @@ def check_mentioned_files(self):\n             assert not entry.folder.endswith('/')\n             for file in entry.files:\n                 if not self.is_changelog_filename(file):\n-                    mentioned_files.add(os.path.join(entry.folder, file))\n+                    item = os.path.join(entry.folder, file)\n+                    if item in mentioned_files:\n+                        msg = 'same file specified multiple times'\n+                        self.errors.append(Error(msg, file))\n+                    else:\n+                        mentioned_files.add(item)\n             for pattern in entry.file_patterns:\n                 mentioned_patterns.append(os.path.join(entry.folder, pattern))\n "}, {"sha": "d66bf5be4ebadbcf7b5f0fc29d61fa21b10ddc0c", "filename": "contrib/gcc-changelog/test_email.py", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1d381f0079a8594957be0513a00627caa219b73/contrib%2Fgcc-changelog%2Ftest_email.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1d381f0079a8594957be0513a00627caa219b73/contrib%2Fgcc-changelog%2Ftest_email.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fgcc-changelog%2Ftest_email.py?ref=c1d381f0079a8594957be0513a00627caa219b73", "patch": "@@ -424,3 +424,7 @@ def test_changelog_removal(self):\n     def test_long_filenames(self):\n         email = self.from_patch_glob('0001-long-filenames')\n         assert not email.errors\n+\n+    def test_multi_same_file(self):\n+        email = self.from_patch_glob('0001-OpenMP-Fix-SIMT')\n+        assert email.errors[0].message == 'same file specified multiple times'"}, {"sha": "7e4a4b01081af35410678688d1e72667cdcff510", "filename": "contrib/gcc-changelog/test_patches.txt", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1d381f0079a8594957be0513a00627caa219b73/contrib%2Fgcc-changelog%2Ftest_patches.txt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1d381f0079a8594957be0513a00627caa219b73/contrib%2Fgcc-changelog%2Ftest_patches.txt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fgcc-changelog%2Ftest_patches.txt?ref=c1d381f0079a8594957be0513a00627caa219b73", "patch": "@@ -3546,3 +3546,32 @@ index 5ad82db1def..53b15f32516 100644\n @@ -1 +1,2 @@\n  \n +\n+\n+=== 0001-OpenMP-Fix-SIMT ===\n+From 33b647956caa977d1ae489f9baed9cef70b4f382 Mon Sep 17 00:00:00 2001\n+From: Tobias Burnus <tobias@codesourcery.com>\n+Date: Fri, 7 May 2021 12:11:51 +0200\n+Subject: [PATCH] OpenMP: Fix SIMT for complex/float reduction with && and ||\n+\n+libgomp/ChangeLog:\n+\n+\t* testsuite/libgomp.c-c++-common/reduction-5.c: New test, testing\n+\tcomplex/floating-point || + && reduction with 'omp target'.\n+\t* testsuite/libgomp.c-c++-common/reduction-5.c: Likewise.\n+---\n+diff --git a/libgomp/testsuite/libgomp.c-c++-common/reduction-5.c b/libgomp/testsuite/libgomp.c-c++-common/reduction-5.c\n+new file mode 100644\n+index 00000000000..21540512e23\n+--- /dev/null\n++++ b/libgomp/testsuite/libgomp.c-c++-common/reduction-5.c\n+@@ -0,0 +1,1 @@\n++\n+diff --git a/libgomp/testsuite/libgomp.c-c++-common/reduction-6.c b/libgomp/testsuite/libgomp.c-c++-common/reduction-6.c\n+new file mode 100644\n+index 00000000000..21540512e23\n+--- /dev/null\n++++ b/libgomp/testsuite/libgomp.c-c++-common/reduction-6.c\n+@@ -0,0 +1,1 @@\n++\n+-- \n+2.25.1"}]}