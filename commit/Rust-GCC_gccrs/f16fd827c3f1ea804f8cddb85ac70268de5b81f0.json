{"sha": "f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjE2ZmQ4MjdjM2YxZWE4MDRmOGNkZGI4NWFjNzAyNjhkZTViODFmMA==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2009-09-17T23:54:25Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2009-09-17T23:54:25Z"}, "message": "libstdc++.exp (check_v3_target_binary_io): New.\n\n\t* testsuite/lib/libstdc++.exp (check_v3_target_binary_io): New.\n\t* testsuite/lib/dg-options.exp (dg-require-binary-io): New.\n\t* testsuite/27_io/basic_filebuf/seekoff/char/1-io.cc,\n\ttestsuite/27_io/basic_filebuf/seekoff/char/2-io.cc,\n\ttestsuite/27_io/basic_filebuf/sgetn/char/1-in.cc,\n\ttestsuite/27_io/basic_filebuf/sgetn/char/1-io.cc,\n\ttestsuite/27_io/basic_filebuf/sgetn/char/2-in.cc,\n\ttestsuite/27_io/basic_filebuf/sgetn/char/2-io.cc,\n\ttestsuite/27_io/basic_filebuf/underflow/wchar_t/11603.cc,\n\ttestsuite/27_io/basic_istream/readsome/char/6746-2.cc,\n\ttestsuite/27_io/basic_istream/readsome/wchar_t/6746-2.cc,\n\ttestsuite/27_io/objects/char/10.cc: Use dg-require-binary-io.\n\nFrom-SVN: r151825", "tree": {"sha": "134d52932e3ceae441b480e9374a62bcc61cc9c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/134d52932e3ceae441b480e9374a62bcc61cc9c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e10822c2dcdd739febee75d530cac3b3ff0d29c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e10822c2dcdd739febee75d530cac3b3ff0d29c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e10822c2dcdd739febee75d530cac3b3ff0d29c3"}], "stats": {"total": 94, "additions": 94, "deletions": 0}, "files": [{"sha": "32a48157936cff29f5e359bb3a390a950b2ae314", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -1,3 +1,18 @@\n+2009-09-17  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* testsuite/lib/libstdc++.exp (check_v3_target_binary_io): New.\n+\t* testsuite/lib/dg-options.exp (dg-require-binary-io): New.\n+\t* testsuite/27_io/basic_filebuf/seekoff/char/1-io.cc,\n+\ttestsuite/27_io/basic_filebuf/seekoff/char/2-io.cc,\n+\ttestsuite/27_io/basic_filebuf/sgetn/char/1-in.cc,\n+\ttestsuite/27_io/basic_filebuf/sgetn/char/1-io.cc,\n+\ttestsuite/27_io/basic_filebuf/sgetn/char/2-in.cc,\n+\ttestsuite/27_io/basic_filebuf/sgetn/char/2-io.cc,\n+\ttestsuite/27_io/basic_filebuf/underflow/wchar_t/11603.cc,\n+\ttestsuite/27_io/basic_istream/readsome/char/6746-2.cc,\n+\ttestsuite/27_io/basic_istream/readsome/wchar_t/6746-2.cc,\n+\ttestsuite/27_io/objects/char/10.cc: Use dg-require-binary-io.\n+\n 2009-09-17  Joseph Myers  <joseph@codesourcery.com>\n \n \t* include/ext/vstring.h (to_wstring(long long),"}, {"sha": "bb1751505566d3b4720970b04bcc9e1a24048372", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/seekoff/char/1-io.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fseekoff%2Fchar%2F1-io.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fseekoff%2Fchar%2F1-io.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fseekoff%2Fchar%2F1-io.cc?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -20,6 +20,7 @@\n // 27.8.1.4 Overridden virtual functions\n \n // { dg-require-fileio \"\" }\n+// { dg-require-binary-io \"\" }\n \n #include <fstream>\n #include <testsuite_hooks.h>"}, {"sha": "67a376e67c4c843dfa483ac40ddc2d014f5a8d57", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/seekoff/char/2-io.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fseekoff%2Fchar%2F2-io.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fseekoff%2Fchar%2F2-io.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fseekoff%2Fchar%2F2-io.cc?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -20,6 +20,7 @@\n // 27.8.1.4 Overridden virtual functions\n \n // { dg-require-fileio \"\" }\n+// { dg-require-binary-io \"\" }\n \n #include <fstream>\n #include <testsuite_hooks.h>"}, {"sha": "47c0597cbc40eef92de7ce4ea2788ba2daaff2e2", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/sgetn/char/1-in.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-in.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-in.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-in.cc?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -24,6 +24,7 @@\n // 27.8.1.4 Overridden virtual functions\n \n // { dg-require-fileio \"\" }\n+// { dg-require-binary-io \"\" }\n \n #include <fstream>\n #include <testsuite_hooks.h>"}, {"sha": "ffcdc2c145300cd280e3ac4f6367b8a78eace2e0", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/sgetn/char/1-io.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-io.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-io.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-io.cc?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -24,6 +24,7 @@\n // 27.8.1.4 Overridden virtual functions\n \n // { dg-require-fileio \"\" }\n+// { dg-require-binary-io \"\" }\n \n #include <fstream>\n #include <testsuite_hooks.h>"}, {"sha": "dda7c67e3bf670a863148558e67fd8be12ac86cb", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/sgetn/char/2-in.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F2-in.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F2-in.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F2-in.cc?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -24,6 +24,7 @@\n // 27.8.1.4 Overridden virtual functions\n \n // { dg-require-fileio \"\" }\n+// { dg-require-binary-io \"\" }\n \n #include <fstream>\n #include <testsuite_hooks.h>"}, {"sha": "d401f8732d5382cbf423d423651c3d14dc6191dc", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/sgetn/char/2-io.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F2-io.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F2-io.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F2-io.cc?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -24,6 +24,7 @@\n // 27.8.1.4 Overridden virtual functions\n \n // { dg-require-fileio \"\" }\n+// { dg-require-binary-io \"\" }\n \n #include <fstream>\n #include <testsuite_hooks.h>"}, {"sha": "116c404a5820cc61e6c75745202dd840bd2bda02", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/underflow/wchar_t/11603.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Funderflow%2Fwchar_t%2F11603.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Funderflow%2Fwchar_t%2F11603.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Funderflow%2Fwchar_t%2F11603.cc?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -17,6 +17,8 @@\n \n // 27.8.1.4 Overridden virtual functions\n \n+// { dg-require-binary-io \"\" }\n+\n #include <fstream>\n #include <locale>\n #include <testsuite_hooks.h>"}, {"sha": "ed74751dce54608de4a97230bdb6bb1a582b3f44", "filename": "libstdc++-v3/testsuite/27_io/basic_istream/readsome/char/6746-2.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_istream%2Freadsome%2Fchar%2F6746-2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_istream%2Freadsome%2Fchar%2F6746-2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_istream%2Freadsome%2Fchar%2F6746-2.cc?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -26,6 +26,7 @@\n // @diff@ %-*.tst %-*.txt\n \n // { dg-require-fileio \"\" }\n+// { dg-require-binary-io \"\" }\n \n #include <istream>\n #include <fstream>"}, {"sha": "c7703132245ffaa131eaf98e1ad94fca54b3d675", "filename": "libstdc++-v3/testsuite/27_io/basic_istream/readsome/wchar_t/6746-2.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_istream%2Freadsome%2Fwchar_t%2F6746-2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_istream%2Freadsome%2Fwchar_t%2F6746-2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_istream%2Freadsome%2Fwchar_t%2F6746-2.cc?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -19,6 +19,8 @@\n // causes \"in_avail\" to return an incorrect value.\n // { dg-do run { xfail arm*-*-elf arm*-*-eabi } }\n \n+// { dg-require-binary-io \"\" }\n+\n // 27.6.1.3 unformatted input functions\n // @require@ %-*.tst %-*.txt\n // @diff@ %-*.tst %-*.txt"}, {"sha": "a744e787ac6d930ab242a6200edb603aa1c9b29a", "filename": "libstdc++-v3/testsuite/27_io/objects/char/10.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F10.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F10.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F10.cc?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -18,6 +18,7 @@\n // <http://www.gnu.org/licenses/>.\n  \n // { dg-require-fileio \"\" }\n+// { dg-require-binary-io \"\" }\n \n #include <iostream>\n #include <cstdio>"}, {"sha": "1d9af09a3a60e805a267f1160389607a7e594279", "filename": "libstdc++-v3/testsuite/lib/dg-options.exp", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Fdg-options.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Fdg-options.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Fdg-options.exp?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -151,3 +151,12 @@ proc dg-require-swprintf { args } {\n     }\n     return\n }\n+\n+proc dg-require-binary-io { args } {\n+    if { ![ check_v3_target_binary_io ] } {\n+        upvar dg-do-what dg-do-what\n+        set dg-do-what [list [lindex ${dg-do-what} 0] \"N\" \"P\"]\n+        return\n+    }\n+    return\n+}"}, {"sha": "05a9b5db860e1cc37cc8bbe1efa951299f86e822", "filename": "libstdc++-v3/testsuite/lib/libstdc++.exp", "status": "modified", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16fd827c3f1ea804f8cddb85ac70268de5b81f0/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp?ref=f16fd827c3f1ea804f8cddb85ac70268de5b81f0", "patch": "@@ -1441,3 +1441,61 @@ proc check_v3_target_swprintf { } {\n     verbose \"check_v3_target_swprintf: $et_swprintf\" 2\n     return $et_swprintf\n }\n+\n+proc check_v3_target_binary_io { } {\n+    global cxxflags\n+    global DEFAULT_CXXFLAGS\n+    global et_binary_io\n+\n+    global tool\n+\n+    if { ![info exists et_binary_io_target_name] } {\n+        set et_binary_io_target_name \"\"\n+    }\n+\n+    # If the target has changed since we set the cached value, clear it.\n+    set current_target [current_target_name]\n+    if { $current_target != $et_binary_io_target_name } {\n+        verbose \"check_v3_target_binary_io: `$et_binary_io_target_name'\" 2\n+        set et_binary_io_target_name $current_target\n+        if [info exists et_binary_io] {\n+            verbose \"check_v3_target_binary_io: removing cached result\" 2\n+            unset et_binary_io\n+        }\n+    }\n+\n+    if [info exists et_binary_io] {\n+        verbose \"check_v3_target_binary_io: using cached result\" 2\n+    } else {\n+        set et_binary_io 0\n+\t\n+\t# Set up and compile a C++0x test program that depends\n+        # on text and binary I/O being the same.\n+        set src binary_io[pid].cc\n+        set exe binary_io[pid].exe\n+\n+        set f [open $src \"w\"]\n+        puts $f \"#include <bits/c++config.h>\"\n+        puts $f \"int main()\"\n+        puts $f \"#if !defined(_GLIBCXX_HAVE_DOS_BASED_FILESYSTEM)\"\n+        puts $f \"{ return 0; }\"\n+        puts $f \"#endif\"\n+        close $f\n+\n+        set cxxflags_saved $cxxflags\n+        set cxxflags \"$cxxflags $DEFAULT_CXXFLAGS -Werror\"\n+\n+        set lines [v3_target_compile $src $exe executable \"\"]\n+        set cxxflags $cxxflags_saved\n+        file delete $src\n+\n+        if [string match \"\" $lines] {\n+            # No error message, compilation succeeded.\n+            set et_binary_io 1\n+        } else {\n+            verbose \"check_v3_target_binary_io: compilation failed\" 2\n+        }\n+    }\n+    verbose \"check_v3_target_binary_io: $et_binary_io\" 2\n+    return $et_binary_io\n+}"}]}