{"sha": "f9a21e134266e384f0bb40378621b64994b27daa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjlhMjFlMTM0MjY2ZTM4NGYwYmI0MDM3ODYyMWI2NDk5NGIyN2RhYQ==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2012-05-18T10:19:22Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2012-05-18T10:19:22Z"}, "message": "tree-flow.h (mark_symbols_for_renaming): Remove.\n\n2012-05-18  Richard Guenther  <rguenther@suse.de>\n\n\t* tree-flow.h (mark_symbols_for_renaming): Remove.\n\t* tree-dfa.c (mark_symbols_for_renaming): Likewise.\n\t* tree-inline.c (copy_edges_for_bb): Do not mark symbols for\n\trenaming.\n\t(copy_debug_stmt): Likewise.\n\t(expand_call_inline): Likewise.\n\t(declare_return_variable): Mark the return variable for renaming\n\tif necessary.\n\nFrom-SVN: r187650", "tree": {"sha": "ebb7c822a0d81dbb1f9bbea1a4a7f8724e1cab42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ebb7c822a0d81dbb1f9bbea1a4a7f8724e1cab42"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f9a21e134266e384f0bb40378621b64994b27daa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9a21e134266e384f0bb40378621b64994b27daa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9a21e134266e384f0bb40378621b64994b27daa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9a21e134266e384f0bb40378621b64994b27daa/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "99aea9436dc454f679fb8766539c90ea4558454a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99aea9436dc454f679fb8766539c90ea4558454a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99aea9436dc454f679fb8766539c90ea4558454a"}], "stats": {"total": 44, "additions": 17, "deletions": 27}, "files": [{"sha": "3caf3661a6b48a66af9210b7863c8be69a6ba7d6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f9a21e134266e384f0bb40378621b64994b27daa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f9a21e134266e384f0bb40378621b64994b27daa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f9a21e134266e384f0bb40378621b64994b27daa", "patch": "@@ -1,3 +1,14 @@\n+2012-05-18  Richard Guenther  <rguenther@suse.de>\n+\n+\t* tree-flow.h (mark_symbols_for_renaming): Remove.\n+\t* tree-dfa.c (mark_symbols_for_renaming): Likewise.\n+\t* tree-inline.c (copy_edges_for_bb): Do not mark symbols for\n+\trenaming.\n+\t(copy_debug_stmt): Likewise.\n+\t(expand_call_inline): Likewise.\n+\t(declare_return_variable): Mark the return variable for renaming\n+\tif necessary.\n+\n 2012-05-18  Andrew Stubbs  <ams@codesourcery.com>\n \n \t* config/arm/arm-protos.h (arm_emit_coreregs_64bit_shift): New"}, {"sha": "007b8192c66843dc79f6ac0a542f0960689f9aa1", "filename": "gcc/tree-dfa.c", "status": "modified", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f9a21e134266e384f0bb40378621b64994b27daa/gcc%2Ftree-dfa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f9a21e134266e384f0bb40378621b64994b27daa/gcc%2Ftree-dfa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-dfa.c?ref=f9a21e134266e384f0bb40378621b64994b27daa", "patch": "@@ -624,23 +624,6 @@ remove_referenced_var (tree var)\n }\n \n \n-/* Mark all the naked symbols in STMT for SSA renaming.  */\n-\n-void\n-mark_symbols_for_renaming (gimple stmt)\n-{\n-  tree op;\n-  ssa_op_iter iter;\n-\n-  update_stmt (stmt);\n-\n-  /* Mark all the operands for renaming.  */\n-  FOR_EACH_SSA_TREE_OPERAND (op, stmt, iter, SSA_OP_ALL_OPERANDS)\n-    if (DECL_P (op))\n-      mark_sym_for_renaming (op);\n-}\n-\n-\n /* If EXP is a handled component reference for a structure, return the\n    base variable.  The access range is delimited by bit positions *POFFSET and\n    *POFFSET + *PMAX_SIZE.  The access size is *PSIZE bits.  If either"}, {"sha": "faa06ae130dbff85ccf0ec15a20724c6dc8f1cb0", "filename": "gcc/tree-flow.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f9a21e134266e384f0bb40378621b64994b27daa/gcc%2Ftree-flow.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f9a21e134266e384f0bb40378621b64994b27daa/gcc%2Ftree-flow.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-flow.h?ref=f9a21e134266e384f0bb40378621b64994b27daa", "patch": "@@ -493,7 +493,6 @@ extern void dump_variable (FILE *, tree);\n extern void debug_variable (tree);\n extern bool add_referenced_var (tree);\n extern void remove_referenced_var (tree);\n-extern void mark_symbols_for_renaming (gimple);\n extern tree make_rename_temp (tree, const char *);\n extern void set_default_def (tree, tree);\n extern tree gimple_default_def (struct function *, tree);"}, {"sha": "060b6e5442feef3965af158684e2f73c61ee0204", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f9a21e134266e384f0bb40378621b64994b27daa/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f9a21e134266e384f0bb40378621b64994b27daa/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=f9a21e134266e384f0bb40378621b64994b27daa", "patch": "@@ -1921,11 +1921,7 @@ copy_edges_for_bb (basic_block bb, gcov_type count_scale, basic_block ret_bb)\n \n       copy_stmt = gsi_stmt (si);\n       if (!is_gimple_debug (copy_stmt))\n-\t{\n-\t  update_stmt (copy_stmt);\n-\t  if (gimple_in_ssa_p (cfun))\n-\t    mark_symbols_for_renaming (copy_stmt);\n-\t}\n+\tupdate_stmt (copy_stmt);\n \n       /* Do this before the possible split_block.  */\n       gsi_next (&si);\n@@ -2397,8 +2393,6 @@ copy_debug_stmt (gimple stmt, copy_body_data *id)\n   processing_debug_stmt = 0;\n \n   update_stmt (stmt);\n-  if (gimple_in_ssa_p (cfun))\n-    mark_symbols_for_renaming (stmt);\n }\n \n /* Process deferred debug stmts.  In order to give values better odds\n@@ -2961,6 +2955,11 @@ declare_return_variable (copy_body_data *id, tree return_slot, tree modify_dest,\n       TREE_ADDRESSABLE (var) = 1;\n       var = build_fold_addr_expr (var);\n     }\n+  else if (gimple_in_ssa_p (cfun)\n+\t   && is_gimple_reg (var))\n+    /* ???  Re-org id->retval and its special handling so that we can\n+       record an SSA name directly and not need to invoke the SSA renamer.  */\n+    mark_sym_for_renaming (var);\n \n  done:\n   /* Register the VAR_DECL as the equivalent for the RESULT_DECL; that\n@@ -4032,8 +4031,6 @@ expand_call_inline (basic_block bb, gimple stmt, copy_body_data *id)\n       gimple old_stmt = stmt;\n       stmt = gimple_build_assign (gimple_call_lhs (stmt), use_retvar);\n       gsi_replace (&stmt_gsi, stmt, false);\n-      if (gimple_in_ssa_p (cfun))\n-\tmark_symbols_for_renaming (stmt);\n       maybe_clean_or_replace_eh_stmt (old_stmt, stmt);\n     }\n   else"}]}