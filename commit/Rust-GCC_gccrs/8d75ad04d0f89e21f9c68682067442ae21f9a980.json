{"sha": "8d75ad04d0f89e21f9c68682067442ae21f9a980", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQ3NWFkMDRkMGY4OWUyMWY5YzY4NjgyMDY3NDQyYWUyMWY5YTk4MA==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2001-05-22T11:57:21Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2001-05-22T11:57:21Z"}, "message": "cppfiles.c (remove_component_p): Don't assume lstat/stat will keep errno unchanged on success.\n\n* cppfiles.c (remove_component_p): Don't assume lstat/stat will\nkeep errno unchanged on success.\n\nFrom-SVN: r42445", "tree": {"sha": "50f7a8ee2baf653766e6fa57d4be346da0b8a196", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/50f7a8ee2baf653766e6fa57d4be346da0b8a196"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d75ad04d0f89e21f9c68682067442ae21f9a980", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d75ad04d0f89e21f9c68682067442ae21f9a980", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d75ad04d0f89e21f9c68682067442ae21f9a980", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d75ad04d0f89e21f9c68682067442ae21f9a980/comments", "author": null, "committer": null, "parents": [{"sha": "75f153f3d418e66aaccf5f75800afcfcf39b7b4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75f153f3d418e66aaccf5f75800afcfcf39b7b4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75f153f3d418e66aaccf5f75800afcfcf39b7b4f"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "9d7135052065148a359ac2be990aae66d4864e7a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d75ad04d0f89e21f9c68682067442ae21f9a980/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d75ad04d0f89e21f9c68682067442ae21f9a980/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8d75ad04d0f89e21f9c68682067442ae21f9a980", "patch": "@@ -1,3 +1,8 @@\n+2001-05-22  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* cppfiles.c (remove_component_p): Don't assume lstat/stat will\n+\tkeep errno unchanged on success.\n+\n 2001-05-22  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* c-lex.c (lex_number): If pedantic and not C99, pedwarn exactly"}, {"sha": "137882b340c231159a673df5144fbc796069dc97", "filename": "gcc/cppfiles.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d75ad04d0f89e21f9c68682067442ae21f9a980/gcc%2Fcppfiles.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d75ad04d0f89e21f9c68682067442ae21f9a980/gcc%2Fcppfiles.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppfiles.c?ref=8d75ad04d0f89e21f9c68682067442ae21f9a980", "patch": "@@ -1027,6 +1027,12 @@ remove_component_p (path)\n   result = stat (path, &s);\n #endif\n \n+  /* There's no guarantee that errno will be unchanged, even on\n+     success.  Cygwin's lstat(), for example, will often set errno to\n+     ENOSYS.  In case of success, reset errno to zero.  */\n+  if (result == 0)\n+    errno = 0;\n+\n   return result == 0 && S_ISDIR (s.st_mode);\n }\n "}]}