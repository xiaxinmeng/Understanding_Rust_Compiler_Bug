{"sha": "b91b562cf2764dc10ba00a9473287728a59c4443", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjkxYjU2MmNmMjc2NGRjMTBiYTAwYTk0NzMyODc3MjhhNTljNDQ0Mw==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2015-03-02T20:10:56Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2015-03-02T20:10:56Z"}, "message": "re PR ipa/64988 (ICE: verify_cgraph_node failed: Alias and target's comdat groups differs with -fdeclone-ctor-dtor)\n\n\n\tPR ipa/64988\n\t* ipa-inline-transform.c (clone_inlined_nodes): Do not dissolve\n\tcomdat groups.\n\t* g++.dg/torture/pr64988.C: New testcase.\n\nFrom-SVN: r221123", "tree": {"sha": "d4aa397f0c4a41f1add6cdeb49b9ef6ff2df9801", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d4aa397f0c4a41f1add6cdeb49b9ef6ff2df9801"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b91b562cf2764dc10ba00a9473287728a59c4443", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b91b562cf2764dc10ba00a9473287728a59c4443", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b91b562cf2764dc10ba00a9473287728a59c4443", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b91b562cf2764dc10ba00a9473287728a59c4443/comments", "author": null, "committer": null, "parents": [{"sha": "bc81b5ce9b1b1433c29390c1179b14a0048fd615", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc81b5ce9b1b1433c29390c1179b14a0048fd615", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc81b5ce9b1b1433c29390c1179b14a0048fd615"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "f84b46281da02eebcfbc07a1e221053fac972e19", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b91b562cf2764dc10ba00a9473287728a59c4443/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b91b562cf2764dc10ba00a9473287728a59c4443/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b91b562cf2764dc10ba00a9473287728a59c4443", "patch": "@@ -1,3 +1,9 @@\n+2015-03-02  Jan Hubicka   <hubicka@ucw.cz>\n+\n+\tPR ipa/64988\n+\t* ipa-inline-transform.c (clone_inlined_nodes): Do not dissolve\n+\tcomdat groups.\n+\n 2015-03-02  Jan Hubicka  <hubicka@ucw.cz>\n \t    Aldy Hernandez  <aldyh@redhat.com>\n "}, {"sha": "38a98dbe43cbb5d081ef20deab7ba902e9f34de3", "filename": "gcc/ipa-inline-transform.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b91b562cf2764dc10ba00a9473287728a59c4443/gcc%2Fipa-inline-transform.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b91b562cf2764dc10ba00a9473287728a59c4443/gcc%2Fipa-inline-transform.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline-transform.c?ref=b91b562cf2764dc10ba00a9473287728a59c4443", "patch": "@@ -213,7 +213,7 @@ clone_inlined_nodes (struct cgraph_edge *e, bool duplicate,\n \t     For now we keep the ohter functions in the group in program until\n \t     cgraph_remove_unreachable_functions gets rid of them.  */\n \t  gcc_assert (!e->callee->global.inlined_to);\n-\t  e->callee->dissolve_same_comdat_group_list ();\n+\t  e->callee->remove_from_same_comdat_group ();\n \t  if (e->callee->definition\n \t      && inline_account_function_p (e->callee))\n \t    {\n@@ -243,7 +243,7 @@ clone_inlined_nodes (struct cgraph_edge *e, bool duplicate,\n \t}\n     }\n   else\n-    e->callee->dissolve_same_comdat_group_list ();\n+    e->callee->remove_from_same_comdat_group ();\n \n   e->callee->global.inlined_to = inlining_into;\n "}, {"sha": "135f73498b4f17443ee39247c9e22a77c6db7f94", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b91b562cf2764dc10ba00a9473287728a59c4443/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b91b562cf2764dc10ba00a9473287728a59c4443/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b91b562cf2764dc10ba00a9473287728a59c4443", "patch": "@@ -1,3 +1,8 @@\n+2015-03-02  Jan Hubicka   <hubicka@ucw.cz>\n+\n+\tPR ipa/64988\n+\t* g++.dg/torture/pr64988.C: New testcase.\n+\n 2015-03-02  Tobias Burnus  <burnus@net-b.de>\n \n \t* gfortran.dg/coarray_atomic_6.f90: New."}, {"sha": "b9cf0e004f5ae11bc9eeb62999ec9741362ab425", "filename": "gcc/testsuite/g++.dg/torture/pr64988.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b91b562cf2764dc10ba00a9473287728a59c4443/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr64988.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b91b562cf2764dc10ba00a9473287728a59c4443/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr64988.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr64988.C?ref=b91b562cf2764dc10ba00a9473287728a59c4443", "patch": "@@ -0,0 +1,12 @@\n+// { dg-do compile }\n+// { dg-options \"-O -fdeclone-ctor-dtor\" }\n+struct A {\n+  virtual ~ A ();\n+};\n+\n+struct B : virtual A {};\n+struct C : virtual A {};\n+\n+struct D : B, C {};\n+\n+D d;"}]}