{"sha": "248c8aeebc49aae3fd96bd587367d12e7c8b3c3a", "node_id": "C_kwDOANBUbNoAKDI0OGM4YWVlYmM0OWFhZTNmZDk2YmQ1ODczNjdkMTJlN2M4YjNjM2E", "commit": {"author": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2022-09-27T14:20:28Z"}, "committer": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2022-10-10T13:22:26Z"}, "message": "Don't ICE running selftests if errors were raised [PR99723]\n\nHi all\n\nthis is to address PR 99723.\n\nIn the PR GCC crashes as the initialization of common trees is not\nperformed as no compilation is happening, this is because we raise an\nerror earlier while processing the arch flags.\n\nThis patch changes the code to execute selftests only if no errors\nwhere raised before.\n\nBootstrapped on aarch64, okay for trunk?\n\nBest Regards\n\n  Andrea\n\n2022-09-27  Andrea Corallo  <andrea.corallo@arm.com>\n\n\tPR other/99723\n\t* toplev.cc (toplev::main): Don't run self tests in case of\n\tprevious error.", "tree": {"sha": "6bbbede33dbae45a3bef2af20bca4cd317457a78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6bbbede33dbae45a3bef2af20bca4cd317457a78"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/248c8aeebc49aae3fd96bd587367d12e7c8b3c3a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/248c8aeebc49aae3fd96bd587367d12e7c8b3c3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/248c8aeebc49aae3fd96bd587367d12e7c8b3c3a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/248c8aeebc49aae3fd96bd587367d12e7c8b3c3a/comments", "author": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d0bbecb1c418b680505faa998fe420f0fd4bbfc1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0bbecb1c418b680505faa998fe420f0fd4bbfc1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0bbecb1c418b680505faa998fe420f0fd4bbfc1"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "b53a78bbaf171612893d0f6ab5db095dc1ada028", "filename": "gcc/toplev.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/248c8aeebc49aae3fd96bd587367d12e7c8b3c3a/gcc%2Ftoplev.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/248c8aeebc49aae3fd96bd587367d12e7c8b3c3a/gcc%2Ftoplev.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.cc?ref=248c8aeebc49aae3fd96bd587367d12e7c8b3c3a", "patch": "@@ -2276,7 +2276,7 @@ toplev::main (int argc, char **argv)\n \tstart_timevars ();\n       do_compile (no_backend);\n \n-      if (flag_self_test)\n+      if (flag_self_test && !seen_error ())\n \t{\n \t  if (no_backend)\n \t    error_at (UNKNOWN_LOCATION, \"self-tests incompatible with %<-E%>\");"}]}