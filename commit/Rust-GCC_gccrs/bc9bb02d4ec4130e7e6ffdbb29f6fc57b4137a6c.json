{"sha": "bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmM5YmIwMmQ0ZWM0MTMwZTdlNmZmZGJiMjlmNmZjNTdiNDEzN2E2Yw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-03-26T07:43:45Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-03-26T07:43:45Z"}, "message": "[multiple changes]\n\n2008-03-26  Tristan Gingold  <gingold@adacore.com>\n\n\t* init.c: Do not adjust pc for HPARITH on alpha/vms.\n\n2008-03-26  Robert Dewar  <dewar@adacore.com>\n\n\t* lib-xref.adb: (OK_To_Set_Reference): New function\n\t(Generate_Reference): Don't set referenced from occurrence in Warnings,\n\tUnmodified, or Unreferenced pragma\n\n2008-03-26  Robert Dewar  <dewar@adacore.com>\n\n\t* alloc.ads: Add entries for Warnings_Off_Pragmas table\n\n2008-03-26  GNAT Script  <nobody@adacore.com>\n\n\t* Make-lang.in: Makefile automatically updated\n\nFrom-SVN: r133586", "tree": {"sha": "3fdeee005736db3b337ad6cec2d088303c8bb89a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3fdeee005736db3b337ad6cec2d088303c8bb89a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c/comments", "author": null, "committer": null, "parents": [{"sha": "f53f9dd7812d03d2301d3b3ff6d81bcbed9455d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f53f9dd7812d03d2301d3b3ff6d81bcbed9455d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f53f9dd7812d03d2301d3b3ff6d81bcbed9455d3"}], "stats": {"total": 133, "additions": 90, "deletions": 43}, "files": [{"sha": "83ad1aa2b8f35c694da0cb13db2d8607a64d5917", "filename": "gcc/ada/Make-lang.in", "status": "modified", "additions": 39, "deletions": 39, "changes": 78, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c/gcc%2Fada%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c/gcc%2Fada%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FMake-lang.in?ref=bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c", "patch": "@@ -1968,22 +1968,22 @@ ada/exp_disp.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/nlists.adb ada/nmake.ads ada/nmake.adb ada/opt.ads ada/output.ads \\\n    ada/restrict.ads ada/restrict.adb ada/rident.ads ada/rtsfind.ads \\\n    ada/scans.ads ada/scn.ads ada/scng.ads ada/scng.adb ada/sem.ads \\\n-   ada/sem_attr.ads ada/sem_ch6.ads ada/sem_ch8.ads ada/sem_disp.ads \\\n-   ada/sem_eval.ads ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads \\\n-   ada/sem_util.adb ada/sinfo.ads ada/sinfo.adb ada/sinput.ads \\\n-   ada/snames.ads ada/stand.ads ada/stringt.ads ada/stringt.adb \\\n-   ada/style.ads ada/styleg.ads ada/styleg.adb ada/styleg-c.ads \\\n-   ada/stylesw.ads ada/system.ads ada/s-carun8.ads ada/s-crc32.ads \\\n-   ada/s-exctab.ads ada/s-htable.ads ada/s-imenne.ads ada/s-memory.ads \\\n-   ada/s-os_lib.ads ada/s-parame.ads ada/s-rident.ads ada/s-secsta.ads \\\n-   ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads ada/s-stoele.ads \\\n-   ada/s-stoele.adb ada/s-strops.ads ada/s-sopco3.ads ada/s-sopco4.ads \\\n-   ada/s-sopco5.ads ada/s-string.ads ada/s-traent.ads ada/s-unstyp.ads \\\n-   ada/s-utf_32.ads ada/s-wchcon.ads ada/table.ads ada/table.adb \\\n-   ada/targparm.ads ada/tbuild.ads ada/tbuild.adb ada/tree_io.ads \\\n-   ada/ttypes.ads ada/types.ads ada/types.adb ada/uintp.ads ada/uintp.adb \\\n-   ada/uname.ads ada/unchconv.ads ada/unchdeal.ads ada/urealp.ads \\\n-   ada/validsw.ads ada/widechar.ads \n+   ada/sem_attr.ads ada/sem_ch6.ads ada/sem_ch7.ads ada/sem_ch8.ads \\\n+   ada/sem_disp.ads ada/sem_eval.ads ada/sem_res.ads ada/sem_type.ads \\\n+   ada/sem_util.ads ada/sem_util.adb ada/sinfo.ads ada/sinfo.adb \\\n+   ada/sinput.ads ada/snames.ads ada/stand.ads ada/stringt.ads \\\n+   ada/stringt.adb ada/style.ads ada/styleg.ads ada/styleg.adb \\\n+   ada/styleg-c.ads ada/stylesw.ads ada/system.ads ada/s-carun8.ads \\\n+   ada/s-crc32.ads ada/s-exctab.ads ada/s-htable.ads ada/s-imenne.ads \\\n+   ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads ada/s-rident.ads \\\n+   ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads \\\n+   ada/s-stoele.ads ada/s-stoele.adb ada/s-strops.ads ada/s-sopco3.ads \\\n+   ada/s-sopco4.ads ada/s-sopco5.ads ada/s-string.ads ada/s-traent.ads \\\n+   ada/s-unstyp.ads ada/s-utf_32.ads ada/s-wchcon.ads ada/table.ads \\\n+   ada/table.adb ada/targparm.ads ada/tbuild.ads ada/tbuild.adb \\\n+   ada/tree_io.ads ada/ttypes.ads ada/types.ads ada/types.adb \\\n+   ada/uintp.ads ada/uintp.adb ada/uname.ads ada/unchconv.ads \\\n+   ada/unchdeal.ads ada/urealp.ads ada/validsw.ads ada/widechar.ads \n \n ada/exp_dist.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/a-uncdea.ads ada/alloc.ads ada/atree.ads ada/atree.adb \\\n@@ -3266,14 +3266,14 @@ ada/sem_ch13.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/erroutc.ads ada/exp_dist.ads ada/exp_tss.ads ada/exp_util.ads \\\n    ada/fname.ads ada/fname-uf.ads ada/get_targ.ads ada/gnat.ads \\\n    ada/g-hesorg.ads ada/g-hesorg.adb ada/g-htable.ads ada/hostparm.ads \\\n-   ada/lib.ads ada/lib.adb ada/lib-list.adb ada/lib-load.ads \\\n-   ada/lib-sort.adb ada/lib-xref.ads ada/namet.ads ada/nlists.ads \\\n-   ada/nlists.adb ada/nmake.ads ada/nmake.adb ada/opt.ads ada/output.ads \\\n-   ada/restrict.ads ada/rident.ads ada/rtsfind.ads ada/rtsfind.adb \\\n-   ada/sem.ads ada/sem_ch13.ads ada/sem_ch13.adb ada/sem_ch7.ads \\\n-   ada/sem_ch8.ads ada/sem_dist.ads ada/sem_eval.ads ada/sem_res.ads \\\n-   ada/sem_type.ads ada/sem_util.ads ada/sem_warn.ads ada/sinfo.ads \\\n-   ada/sinfo.adb ada/sinput.ads ada/snames.ads ada/stand.ads \\\n+   ada/layout.ads ada/lib.ads ada/lib.adb ada/lib-list.adb \\\n+   ada/lib-load.ads ada/lib-sort.adb ada/lib-xref.ads ada/namet.ads \\\n+   ada/nlists.ads ada/nlists.adb ada/nmake.ads ada/nmake.adb ada/opt.ads \\\n+   ada/output.ads ada/restrict.ads ada/rident.ads ada/rtsfind.ads \\\n+   ada/rtsfind.adb ada/sem.ads ada/sem_ch13.ads ada/sem_ch13.adb \\\n+   ada/sem_ch7.ads ada/sem_ch8.ads ada/sem_dist.ads ada/sem_eval.ads \\\n+   ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads ada/sem_warn.ads \\\n+   ada/sinfo.ads ada/sinfo.adb ada/sinput.ads ada/snames.ads ada/stand.ads \\\n    ada/stringt.ads ada/system.ads ada/s-exctab.ads ada/s-htable.ads \\\n    ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads \\\n    ada/s-rident.ads ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads \\\n@@ -3547,21 +3547,21 @@ ada/sem_disp.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/nmake.adb ada/opt.ads ada/output.ads ada/restrict.ads \\\n    ada/restrict.adb ada/rident.ads ada/rtsfind.ads ada/scans.ads \\\n    ada/scn.ads ada/scng.ads ada/scng.adb ada/sem.ads ada/sem_attr.ads \\\n-   ada/sem_ch6.ads ada/sem_ch8.ads ada/sem_disp.ads ada/sem_disp.adb \\\n-   ada/sem_eval.ads ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads \\\n-   ada/sem_util.adb ada/sinfo.ads ada/sinfo.adb ada/sinput.ads \\\n-   ada/snames.ads ada/stand.ads ada/stringt.ads ada/style.ads \\\n-   ada/styleg.ads ada/styleg.adb ada/styleg-c.ads ada/stylesw.ads \\\n-   ada/system.ads ada/s-crc32.ads ada/s-exctab.ads ada/s-htable.ads \\\n-   ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads \\\n-   ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads \\\n-   ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb ada/s-strops.ads \\\n-   ada/s-sopco3.ads ada/s-sopco4.ads ada/s-sopco5.ads ada/s-string.ads \\\n-   ada/s-traent.ads ada/s-unstyp.ads ada/s-utf_32.ads ada/s-wchcon.ads \\\n-   ada/table.ads ada/table.adb ada/targparm.ads ada/tbuild.ads \\\n-   ada/tree_io.ads ada/ttypes.ads ada/types.ads ada/uintp.ads \\\n-   ada/uintp.adb ada/uname.ads ada/unchconv.ads ada/unchdeal.ads \\\n-   ada/urealp.ads ada/validsw.ads ada/widechar.ads \n+   ada/sem_ch6.ads ada/sem_ch7.ads ada/sem_ch8.ads ada/sem_disp.ads \\\n+   ada/sem_disp.adb ada/sem_eval.ads ada/sem_res.ads ada/sem_type.ads \\\n+   ada/sem_util.ads ada/sem_util.adb ada/sinfo.ads ada/sinfo.adb \\\n+   ada/sinput.ads ada/snames.ads ada/stand.ads ada/stringt.ads \\\n+   ada/style.ads ada/styleg.ads ada/styleg.adb ada/styleg-c.ads \\\n+   ada/stylesw.ads ada/system.ads ada/s-crc32.ads ada/s-exctab.ads \\\n+   ada/s-htable.ads ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads \\\n+   ada/s-parame.ads ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads \\\n+   ada/s-stache.ads ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb \\\n+   ada/s-strops.ads ada/s-sopco3.ads ada/s-sopco4.ads ada/s-sopco5.ads \\\n+   ada/s-string.ads ada/s-traent.ads ada/s-unstyp.ads ada/s-utf_32.ads \\\n+   ada/s-wchcon.ads ada/table.ads ada/table.adb ada/targparm.ads \\\n+   ada/tbuild.ads ada/tree_io.ads ada/ttypes.ads ada/types.ads \\\n+   ada/uintp.ads ada/uintp.adb ada/uname.ads ada/unchconv.ads \\\n+   ada/unchdeal.ads ada/urealp.ads ada/validsw.ads ada/widechar.ads \n \n ada/sem_dist.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/a-uncdea.ads ada/alloc.ads ada/atree.ads ada/atree.adb \\"}, {"sha": "3707ecf55437a5ab1ff3de08870b3b83dc0218e0", "filename": "gcc/ada/alloc.ads", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c/gcc%2Fada%2Falloc.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c/gcc%2Fada%2Falloc.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Falloc.ads?ref=bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -141,6 +141,9 @@ package Alloc is\n    Unreferenced_Entities_Initial    : constant := 1_000;   -- Sem_Warn\n    Unreferenced_Entities_Increment  : constant := 100;\n \n+   Warnings_Off_Pragmas_Initial     : constant := 500;     -- Sem_Warn\n+   Warnings_Off_Pragmas_Increment   : constant := 100;\n+\n    With_List_Initial                : constant := 10;      -- Features\n    With_List_Increment              : constant := 300;\n "}, {"sha": "81956c05b7bce92a9da71d4e8e56f00090bd7365", "filename": "gcc/ada/init.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c/gcc%2Fada%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c/gcc%2Fada%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Finit.c?ref=bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c", "patch": "@@ -1395,7 +1395,11 @@ __gnat_handle_vms_condition (int *sigargs, void *mechargs)\n #else\n \texception = &constraint_error;\n \tmsg = \"arithmetic error\";\n+#ifndef __alpha__\n+\t/* No need to adjust pc on alpha: the pc is already on the instruction\n+\t   after the trapping one.  */\n \t__gnat_adjust_context_for_raise (0, (void *)mechargs);\n+#endif\n #endif\n \tbreak;\n "}, {"sha": "08254f3c91023884f978728d3a5da34f8e1ded41", "filename": "gcc/ada/lib-xref.adb", "status": "modified", "additions": 43, "deletions": 3, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c/gcc%2Fada%2Flib-xref.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c/gcc%2Fada%2Flib-xref.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-xref.adb?ref=bc9bb02d4ec4130e7e6ffdbb29f6fc57b4137a6c", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1998-2007, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1998-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -235,6 +235,11 @@ package body Lib.Xref is\n       --\n       --   Out param   Same as above cases, but OUT parameter\n \n+      function OK_To_Set_Referenced return Boolean;\n+      --  Returns True if the Referenced flag can be set. There are a few\n+      --  exceptions where we do not want to set this flag, see body for\n+      --  details of these exceptional cases.\n+\n       ---------------\n       -- Is_On_LHS --\n       ---------------\n@@ -310,6 +315,41 @@ package body Lib.Xref is\n          return Name (Parent (N)) = N;\n       end Is_On_LHS;\n \n+      ---------------------------\n+      -- OK_To_Set_Referenced --\n+      ---------------------------\n+\n+      function OK_To_Set_Referenced return Boolean is\n+         P : Node_Id;\n+\n+      begin\n+         --  A reference from a pragma Unreferenced or pragma Unmodified or\n+         --  pragma Warnings does not cause the Referenced flag to be set.\n+         --  This avoids silly warnings about things being referenced and\n+         --  not assigned when the only reference is from the pragma.\n+\n+         if Nkind (N) = N_Identifier then\n+            P := Parent (N);\n+\n+            if Nkind (P) = N_Pragma_Argument_Association then\n+               P := Parent (P);\n+\n+               if Nkind (P) = N_Pragma then\n+                  if Pragma_Name (P) = Name_Warnings\n+                       or else\n+                     Pragma_Name (P) = Name_Unmodified\n+                       or else\n+                     Pragma_Name (P) = Name_Unreferenced\n+                  then\n+                     return False;\n+                  end if;\n+               end if;\n+            end if;\n+         end if;\n+\n+         return True;\n+      end OK_To_Set_Referenced;\n+\n    --  Start of processing for Generate_Reference\n \n    begin\n@@ -527,9 +567,9 @@ package body Lib.Xref is\n                   Set_Referenced_As_LHS (E, False);\n                end if;\n \n-               --  Any other occurrence counts as referencing the entity\n+            --  Any other occurrence counts as referencing the entity\n \n-            else\n+            elsif OK_To_Set_Referenced then\n                Set_Referenced (E);\n \n                --  If variable, this is an OK reference after an assignment"}]}