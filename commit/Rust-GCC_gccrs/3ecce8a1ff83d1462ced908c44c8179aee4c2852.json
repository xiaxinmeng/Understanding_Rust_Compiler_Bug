{"sha": "3ecce8a1ff83d1462ced908c44c8179aee4c2852", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2VjY2U4YTFmZjgzZDE0NjJjZWQ5MDhjNDRjODE3OWFlZTRjMjg1Mg==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2012-12-13T11:13:13Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2012-12-13T11:13:13Z"}, "message": "re PR lto/55660 (ICE instead of some warning during lto build with supplied different options (-funsigned-char vs none))\n\n2012-12-13  Richard Biener  <rguenther@suse.de>\n\n\tPR lto/55660\n\t* tree-streamer.c (record_common_node): Check that we are not\n\trecursively pre-loading nodes we want to skip.  Handle\n\tchar_type_node appearing as part of va_list_type_node.\n\n\t* gcc.dg/lto/pr55660_0.c: New testcase.\n\t* gcc.dg/lto/pr55660_1.c: Likewise.\n\nFrom-SVN: r194473", "tree": {"sha": "1a13d418fc3a703db9fbeb1004c23cdd2df5d5c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1a13d418fc3a703db9fbeb1004c23cdd2df5d5c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3ecce8a1ff83d1462ced908c44c8179aee4c2852", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ecce8a1ff83d1462ced908c44c8179aee4c2852", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ecce8a1ff83d1462ced908c44c8179aee4c2852", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ecce8a1ff83d1462ced908c44c8179aee4c2852/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "af50fec7f5470d177cbfa6158208097d178e099e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af50fec7f5470d177cbfa6158208097d178e099e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af50fec7f5470d177cbfa6158208097d178e099e"}], "stats": {"total": 49, "additions": 49, "deletions": 0}, "files": [{"sha": "3643df597929a5babe197ab2d534488ab22d9753", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ecce8a1ff83d1462ced908c44c8179aee4c2852/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ecce8a1ff83d1462ced908c44c8179aee4c2852/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3ecce8a1ff83d1462ced908c44c8179aee4c2852", "patch": "@@ -1,3 +1,10 @@\n+2012-12-13  Richard Biener  <rguenther@suse.de>\n+\n+\tPR lto/55660\n+\t* tree-streamer.c (record_common_node): Check that we are not\n+\trecursively pre-loading nodes we want to skip.  Handle\n+\tchar_type_node appearing as part of va_list_type_node.\n+\n 2012-12-13  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR gcov-profile/55650"}, {"sha": "a03406af0ad7502973d9f09c784f16f6c1a8590b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ecce8a1ff83d1462ced908c44c8179aee4c2852/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ecce8a1ff83d1462ced908c44c8179aee4c2852/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3ecce8a1ff83d1462ced908c44c8179aee4c2852", "patch": "@@ -1,3 +1,9 @@\n+2012-12-13  Richard Biener  <rguenther@suse.de>\n+\n+\tPR lto/55660\n+\t* gcc.dg/lto/pr55660_0.c: New testcase.\n+\t* gcc.dg/lto/pr55660_1.c: Likewise.\n+\n 2012-12-13  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR gcov-profile/55650"}, {"sha": "7e7bb2ffff8c53c8bd174c79cfc8723d8ffc397d", "filename": "gcc/testsuite/gcc.dg/lto/pr55660_0.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ecce8a1ff83d1462ced908c44c8179aee4c2852/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr55660_0.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ecce8a1ff83d1462ced908c44c8179aee4c2852/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr55660_0.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr55660_0.c?ref=3ecce8a1ff83d1462ced908c44c8179aee4c2852", "patch": "@@ -0,0 +1,11 @@\n+/* { dg-lto-do run } */\n+/* { dg-extra-ld-options { -funsigned-char } } */\n+\n+char n[3] = {'a','b','c'};\n+int foo(char *x)\n+{\n+  if (*x == 'b')\n+    return (int)*x;\n+  *x = 'y';\n+  return 0;\n+}"}, {"sha": "a8c368bb925f3179f7ac173449b396a14a31dbe8", "filename": "gcc/testsuite/gcc.dg/lto/pr55660_1.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ecce8a1ff83d1462ced908c44c8179aee4c2852/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr55660_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ecce8a1ff83d1462ced908c44c8179aee4c2852/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr55660_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr55660_1.c?ref=3ecce8a1ff83d1462ced908c44c8179aee4c2852", "patch": "@@ -0,0 +1,15 @@\n+extern int foo (char*);\n+extern void abort (void);\n+\n+extern char n[3];\n+\n+int main ()\n+{\n+  int i, m = 0;\n+  for (i = 0; i < 3; i++)\n+    m += foo(&n[i]);\n+\n+  if (m != 'b')\n+    abort ();\n+  return 0;\n+}"}, {"sha": "259e36b7619274906c617affe8570d69928ce9e4", "filename": "gcc/tree-streamer.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ecce8a1ff83d1462ced908c44c8179aee4c2852/gcc%2Ftree-streamer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ecce8a1ff83d1462ced908c44c8179aee4c2852/gcc%2Ftree-streamer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-streamer.c?ref=3ecce8a1ff83d1462ced908c44c8179aee4c2852", "patch": "@@ -237,6 +237,16 @@ streamer_tree_cache_lookup (struct streamer_tree_cache_d *cache, tree t,\n static void\n record_common_node (struct streamer_tree_cache_d *cache, tree node)\n {\n+  /* If we recursively end up at nodes we do not want to preload simply don't.\n+     ???  We'd want to verify that this doesn't happen, or alternatively\n+     do not recurse at all.  */\n+  if (node == char_type_node)\n+    return;\n+\n+  gcc_checking_assert (node != boolean_type_node\n+\t\t       && node != boolean_true_node\n+\t\t       && node != boolean_false_node);\n+\n   /* We have to make sure to fill exactly the same number of\n      elements for all frontends.  That can include NULL trees.\n      As our hash table can't deal with zero entries we'll simply stream"}]}