{"sha": "6cc430c19a9c94835d31f171065f32f5b1863183", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmNjNDMwYzE5YTljOTQ4MzVkMzFmMTcxMDY1ZjMyZjViMTg2MzE4Mw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-10-01T09:39:28Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-10-01T09:39:28Z"}, "message": "c-ada-spec.c (get_underlying_decl): Get to the main type variant.\n\n\t* c-ada-spec.c (get_underlying_decl): Get to the main type variant.\n\t(dump_ada_node): Add const keyword.\n\nFrom-SVN: r264738", "tree": {"sha": "fc1e0dbddc786697cedbe4808602a6f79b19738e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc1e0dbddc786697cedbe4808602a6f79b19738e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6cc430c19a9c94835d31f171065f32f5b1863183", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cc430c19a9c94835d31f171065f32f5b1863183", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cc430c19a9c94835d31f171065f32f5b1863183", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cc430c19a9c94835d31f171065f32f5b1863183/comments", "author": null, "committer": null, "parents": [{"sha": "e04108c7274d5066fcc791ec254f843a3ff694aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e04108c7274d5066fcc791ec254f843a3ff694aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e04108c7274d5066fcc791ec254f843a3ff694aa"}], "stats": {"total": 24, "additions": 17, "deletions": 7}, "files": [{"sha": "015ca8a2fb99636bca9542a497503f7d4dc6a15c", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cc430c19a9c94835d31f171065f32f5b1863183/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cc430c19a9c94835d31f171065f32f5b1863183/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=6cc430c19a9c94835d31f171065f32f5b1863183", "patch": "@@ -1,3 +1,8 @@\n+2018-10-01  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* c-ada-spec.c (get_underlying_decl): Get to the main type variant.\n+\t(dump_ada_node): Add const keyword.\n+\n 2018-09-25  Martin Liska  <mliska@suse.cz>\n \n \t* c-common.c (c_common_truthvalue_conversion):"}, {"sha": "2e1b91e30c33b104dc8d800e574b255afe1bfbef", "filename": "gcc/c-family/c-ada-spec.c", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cc430c19a9c94835d31f171065f32f5b1863183/gcc%2Fc-family%2Fc-ada-spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cc430c19a9c94835d31f171065f32f5b1863183/gcc%2Fc-family%2Fc-ada-spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ada-spec.c?ref=6cc430c19a9c94835d31f171065f32f5b1863183", "patch": "@@ -1020,13 +1020,18 @@ get_underlying_decl (tree type)\n   if (DECL_P (type))\n     return type;\n \n-  /* type is a typedef.  */\n-  if (TYPE_P (type) && TYPE_NAME (type) && DECL_P (TYPE_NAME (type)))\n-    return TYPE_NAME (type);\n+  if (TYPE_P (type))\n+    {\n+      type = TYPE_MAIN_VARIANT (type);\n+\n+      /* type is a typedef.  */\n+      if (TYPE_NAME (type) && DECL_P (TYPE_NAME (type)))\n+\treturn TYPE_NAME (type);\n \n-  /* TYPE_STUB_DECL has been set for type.  */\n-  if (TYPE_P (type) && TYPE_STUB_DECL (type))\n-    return TYPE_STUB_DECL (type);\n+      /* TYPE_STUB_DECL has been set for type.  */\n+      if (TYPE_STUB_DECL (type))\n+\treturn TYPE_STUB_DECL (type);\n+    }\n \n   return NULL_TREE;\n }\n@@ -2143,8 +2148,8 @@ dump_ada_node (pretty_printer *buffer, tree node, tree type, int spc,\n \t}\n       else\n \t{\n+\t  const unsigned int quals = TYPE_QUALS (TREE_TYPE (node));\n \t  bool is_access = false;\n-\t  unsigned int quals = TYPE_QUALS (TREE_TYPE (node));\n \n \t  if (VOID_TYPE_P (TREE_TYPE (node)))\n \t    {"}]}