{"sha": "d54a528ae41f74bd3d8686742ae4feed435576d7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDU0YTUyOGFlNDFmNzRiZDNkODY4Njc0MmFlNGZlZWQ0MzU1NzZkNw==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@purist.soma.redhat.com", "date": "2000-06-12T23:56:56Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2000-06-12T23:56:56Z"}, "message": "mkcheck.in: Clean up confusion regarding NAME, PRE_NAME.\n\n\n2000-06-12  Benjamin Kosnik  <bkoz@purist.soma.redhat.com>\n\n\t* mkcheck.in: Clean up confusion regarding NAME, PRE_NAME.\n\nFrom-SVN: r34510", "tree": {"sha": "0090bc5f57a6ac95e8aa86e89c3e831c2f77ee78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0090bc5f57a6ac95e8aa86e89c3e831c2f77ee78"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d54a528ae41f74bd3d8686742ae4feed435576d7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d54a528ae41f74bd3d8686742ae4feed435576d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d54a528ae41f74bd3d8686742ae4feed435576d7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d54a528ae41f74bd3d8686742ae4feed435576d7/comments", "author": null, "committer": null, "parents": [{"sha": "431f67e296b52f569c70e45cff71905257254589", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/431f67e296b52f569c70e45cff71905257254589", "html_url": "https://github.com/Rust-GCC/gccrs/commit/431f67e296b52f569c70e45cff71905257254589"}], "stats": {"total": 27, "additions": 16, "deletions": 11}, "files": [{"sha": "988901e95643aa9eb067bb9f4fbfac53c1776f27", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54a528ae41f74bd3d8686742ae4feed435576d7/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54a528ae41f74bd3d8686742ae4feed435576d7/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=d54a528ae41f74bd3d8686742ae4feed435576d7", "patch": "@@ -1,3 +1,7 @@\n+2000-06-12  Benjamin Kosnik  <bkoz@purist.soma.redhat.com>\n+\n+\t* mkcheck.in: Clean up confusion regarding NAME, PRE_NAME.\n+\n 2000-06-08  Branko Cibej  <branko.cibej@hermes.si>\n \n \t* acinclude.m4 (GLIBCPP_CHECK_BUILTIN_MATH_SUPPORT):  Check for"}, {"sha": "a597e2b8a18b5af282f7ee09b237618903f5c9a8", "filename": "libstdc++-v3/mkcheck.in", "status": "modified", "additions": 12, "deletions": 11, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54a528ae41f74bd3d8686742ae4feed435576d7/libstdc%2B%2B-v3%2Fmkcheck.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54a528ae41f74bd3d8686742ae4feed435576d7/libstdc%2B%2B-v3%2Fmkcheck.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fmkcheck.in?ref=d54a528ae41f74bd3d8686742ae4feed435576d7", "patch": "@@ -165,10 +165,13 @@ test_file()\n {\n     # NB: S_FLAG has to be last argument because it may be null, and\n     # error checking hasn't been invented yet.\n-    FILENAME=$1\n+    NAME=$1\n     EXENAME=$2\n     S_FLAG=$3\n \n+    SRC_NAME=\"$SRC_DIR/testsuite/$1\"\n+    TEST_NAME=\"$TEST_DIR/`basename $NAME`\"\n+\n     # This would be deliciously easy if GNU date's %s were always around.\n     # There are three ways to do this:  1) use the builtin 'time' like we\n     # do later; then getting compiler errors into LOG_FILE is a nightmare.\n@@ -178,7 +181,7 @@ test_file()\n     # time_t's (no more overhead than grabbing two date(1)'s).\n     COMP_TIME_START=$($TEST_DIR/printnow)\n     $CXX $CXX_FLAG $S_FLAG $INC_PATH -L$LIB_PATH -Wl,--rpath -Wl,$LIB_PATH \\\n-         $FILENAME -o $EXENAME 2>> $LOG_FILE\n+         $SRC_NAME -o $EXENAME 2>> $LOG_FILE\n     COMP_TIME_END=$($TEST_DIR/printnow)\n \n     if [ $COMP_TIME_START -lt $COMP_TIME_END ]; then\n@@ -250,7 +253,7 @@ test_file()\n \t    # ls on MATCH, a pattern description generated with sed.\n \n \t    # this is the name of the resulting diff file, if any\n-\t    DIFF_FILE=\"`echo $PRE_NAME | sed 's/cc$/diff/'`\"\n+\t    DIFF_FILE=\"`echo $TEST_NAME | sed 's/cc$/diff/'`\"\n \t    # construct wildcard names,ie for $NAME=filebuf.cc, makes\n \t    # \"filebuf*.tst\"\n \t    DATA_FILES=\"`echo $NAME | sed 's/\\.cc/\\*\\.tst/g'`\"\n@@ -280,15 +283,14 @@ test_file()\n \t\t    RESULT=\"+\"\n \t\tfi\n \t    fi\n-\trm \"$EXENAME\"\n \t# sometimes you want to save all failing exe files for review:\n-\t#if [ \"$RESULT\" = \"+\" ]; then\n-\t#    rm \"$EXENAME\"\n-\t#fi\n+\tif [ \"$RESULT\" = \"+\" ]; then\n+\t    rm \"$EXENAME\"\n+\tfi\n     else\n         # the file did not compile. Write out compilation info to the log file.\n  echo \"$CXX $CXX_FLAG $S_FLAG $INC_PATH -L$LIB_PATH -Wl,--rpath -Wl,$LIB_PATH \\\n-         $FILENAME -o $EXENAME\" 2>> $LOG_FILE\n+         $SRC_NAME -o $EXENAME\" 2>> $LOG_FILE\n \n \tRESULT=\"-\"\n \tTEXT=\"0\"\n@@ -317,10 +319,9 @@ do\n     PRE_NAME=\"$TEST_DIR/`basename $NAME`\"\n     ST_NAME=\"`echo $PRE_NAME | sed 's/cc$/st-exe/'`\"\n     SH_NAME=\"`echo $PRE_NAME | sed 's/cc$/sh-exe/'`\"\n-    CNAME=\"$SRC_DIR/testsuite/$NAME\"\n \n-    test_file $CNAME $ST_NAME $ST_FLAG \n-    test_file $CNAME $SH_NAME $SH_FLAG \n+    test_file $NAME $ST_NAME $ST_FLAG \n+    test_file $NAME $SH_NAME $SH_FLAG \n     echo \"$NAME\" | awk '{printf(\"%s\\n\", $1)}'\n \n     echo \"\" >> $RESULTS_FILE"}]}