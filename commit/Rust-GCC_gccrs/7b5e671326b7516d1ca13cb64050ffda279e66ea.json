{"sha": "7b5e671326b7516d1ca13cb64050ffda279e66ea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2I1ZTY3MTMyNmI3NTE2ZDFjYTEzY2I2NDA1MGZmZGEyNzllNjZlYQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-03-09T06:31:37Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-03-09T06:31:37Z"}, "message": "re PR go/48019 (Need to handle EINTR in libgo testsuite)\n\n\tPR go/48019\nIgnore EINTR in runtime_lock_full.\n\nFrom-SVN: r170810", "tree": {"sha": "e817c9c77a0af5e57dc8040886b551c24e0e1365", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e817c9c77a0af5e57dc8040886b551c24e0e1365"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7b5e671326b7516d1ca13cb64050ffda279e66ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b5e671326b7516d1ca13cb64050ffda279e66ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7b5e671326b7516d1ca13cb64050ffda279e66ea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b5e671326b7516d1ca13cb64050ffda279e66ea/comments", "author": null, "committer": null, "parents": [{"sha": "8897c836a89381c814407e5d2cc70b813ce70f09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8897c836a89381c814407e5d2cc70b813ce70f09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8897c836a89381c814407e5d2cc70b813ce70f09"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "bac3f7dfdc1bbe0d8d3e30ddf414a73a1dbd2236", "filename": "libgo/runtime/thread.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b5e671326b7516d1ca13cb64050ffda279e66ea/libgo%2Fruntime%2Fthread.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b5e671326b7516d1ca13cb64050ffda279e66ea/libgo%2Fruntime%2Fthread.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fthread.c?ref=7b5e671326b7516d1ca13cb64050ffda279e66ea", "patch": "@@ -2,6 +2,7 @@\n // Use of this source code is governed by a BSD-style\n // license that can be found in the LICENSE file.\n \n+#include <errno.h>\n #include \"runtime.h\"\n #include \"go-assert.h\"\n \n@@ -32,8 +33,12 @@ static void runtime_lock_full(Lock *l) __attribute__ ((noinline));\n static void\n runtime_lock_full(Lock *l)\n {\n-\tif(sem_wait(&l->sem) != 0)\n-\t\truntime_throw(\"sem_wait failed\");\n+\tfor(;;){\n+\t\tif(sem_wait(&l->sem) == 0)\n+\t\t\treturn;\n+\t\tif(errno != EINTR)\n+\t\t\truntime_throw(\"sem_wait failed\");\n+\t}\n }\n \n void"}]}