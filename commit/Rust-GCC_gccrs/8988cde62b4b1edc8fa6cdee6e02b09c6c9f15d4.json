{"sha": "8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODk4OGNkZTYyYjRiMWVkYzhmYTZjZGVlNmUwMmIwOWM2YzlmMTVkNA==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2013-01-03T16:14:54Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2013-01-03T16:14:54Z"}, "message": "re PR fortran/55855 ([OOP] incorrect warning with procedure pointer component on pointer-valued base object)\n\n2013-01-03  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/55855\n\t* expr.c (gfc_check_assign): Use 'gfc_expr_attr' to evaluate attributes\n\tof rvalue. Correct hyphenation in error message.\n\n2013-01-03  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/55855\n\t* gfortran.dg/assignment_1.f90: Modified.\n\t* gfortran.dg/assignment_4.f90: New.\n\nFrom-SVN: r194857", "tree": {"sha": "afefe9f86acc329127bc795a8d892848d8f080d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/afefe9f86acc329127bc795a8d892848d8f080d6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "59fd17e3a69e7b826e4926e44476e7ba08962aa9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59fd17e3a69e7b826e4926e44476e7ba08962aa9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59fd17e3a69e7b826e4926e44476e7ba08962aa9"}], "stats": {"total": 35, "additions": 31, "deletions": 4}, "files": [{"sha": "2b050b12d7f8691f0d8a70a645c4eed90a48cc67", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4", "patch": "@@ -1,3 +1,9 @@\n+2013-01-03  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/55855\n+\t* expr.c (gfc_check_assign): Use 'gfc_expr_attr' to evaluate attributes\n+\tof rvalue. Correct hyphenation in error message.\n+\n 2013-01-03  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gfortranspec.c (lang_specific_driver): Update copyright notice"}, {"sha": "261078460d255ceefaad5c3db908f784f4ede17b", "filename": "gcc/fortran/expr.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4/gcc%2Ffortran%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4/gcc%2Ffortran%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.c?ref=8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4", "patch": "@@ -3151,9 +3151,8 @@ gfc_check_assign (gfc_expr *lvalue, gfc_expr *rvalue, int conform)\n \n   /* This is possibly a typo: x = f() instead of x => f().  */\n   if (gfc_option.warn_surprising\n-      && rvalue->expr_type == EXPR_FUNCTION\n-      && rvalue->symtree->n.sym->attr.pointer)\n-    gfc_warning (\"POINTER valued function appears on right-hand side of \"\n+      && rvalue->expr_type == EXPR_FUNCTION && gfc_expr_attr (rvalue).pointer)\n+    gfc_warning (\"POINTER-valued function appears on right-hand side of \"\n \t\t \"assignment at %L\", &rvalue->where);\n \n   /* Check size of array assignments.  */"}, {"sha": "234eeaceedd404fb3da4c1620f831b47c7fc4969", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4", "patch": "@@ -1,3 +1,9 @@\n+2013-01-03  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/55855\n+\t* gfortran.dg/assignment_1.f90: Modified.\n+\t* gfortran.dg/assignment_4.f90: New.\n+\n 2013-01-03  David Edelsohn  <dje.gcc@gmail.com>\n \n \t* gcc.dg/torture/tls/tls-reload-1.c: Add tls options."}, {"sha": "4322e5934c019e7a43aaa0389f3a0d302a03aff6", "filename": "gcc/testsuite/gfortran.dg/assignment_1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4/gcc%2Ftestsuite%2Fgfortran.dg%2Fassignment_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4/gcc%2Ftestsuite%2Fgfortran.dg%2Fassignment_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassignment_1.f90?ref=8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4", "patch": "@@ -12,7 +12,7 @@\n t = 1\n p => s\n ! We didn't dereference the pointer in the following line.\n-p = f() ! { dg-warning \"POINTER valued function\" \"\" }\n+p = f() ! { dg-warning \"POINTER-valued function\" \"\" }\n p = p+1\n if (p.ne.2) call abort()\n if (p.ne.s) call abort()"}, {"sha": "77181a2054ef962419d188081ef4a7eb860fe236", "filename": "gcc/testsuite/gfortran.dg/assignment_4.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4/gcc%2Ftestsuite%2Fgfortran.dg%2Fassignment_4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4/gcc%2Ftestsuite%2Fgfortran.dg%2Fassignment_4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassignment_4.f90?ref=8988cde62b4b1edc8fa6cdee6e02b09c6c9f15d4", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do compile }\n+! { dg-options \"-Wall\" }\n+!\n+! PR 55855: [OOP] incorrect warning with procedure pointer component on pointer-valued base object\n+!\n+! Contributed by Andrew Benson <abensonca@gmail.com>\n+\n+  implicit none\n+  type :: event\n+    procedure(logical), pointer, nopass :: task\n+  end type event\n+  logical :: r\n+  type(event), pointer :: myEvent\n+  allocate(myEvent)\n+  r=myEvent%task()\n+end "}]}