{"sha": "76ab4084d033053f430c7429c2f2f3d2a76bc6b3", "node_id": "C_kwDOANBUbNoAKDc2YWI0MDg0ZDAzMzA1M2Y0MzBjNzQyOWMyZjJmM2QyYTc2YmM2YjM", "commit": {"author": {"name": "Jonathan Yong", "email": "10walls@gmail.com", "date": "2023-01-28T16:49:27Z"}, "committer": {"name": "Jonathan Yong", "email": "10walls@gmail.com", "date": "2023-02-11T08:27:27Z"}, "message": "gcc/testsuite: fix excess warnings for mingw-w64\n\ngcc/testsuite/ChangeLog:\n\n\t* c-c++-common/Wsizeof-array-div1.c: fix excess warnings.\n\t* gcc.dg/Warray-bounds-52.c: ditto\n\t* gcc.dg/Wstringop-overflow-62.c: ditto\n\t* gcc.dg/attr-vector_size.c: ditto\n\t* gcc.dg/overflow-warn-9.c: ditto\n\nSigned-off-by: Jonathan Yong <10walls@gmail.com>", "tree": {"sha": "b2b087d25846f347eb6f6ca7aac275fbfb80d0ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b2b087d25846f347eb6f6ca7aac275fbfb80d0ca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76ab4084d033053f430c7429c2f2f3d2a76bc6b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76ab4084d033053f430c7429c2f2f3d2a76bc6b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76ab4084d033053f430c7429c2f2f3d2a76bc6b3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76ab4084d033053f430c7429c2f2f3d2a76bc6b3/comments", "author": {"login": "jon-y", "id": 4688224, "node_id": "MDQ6VXNlcjQ2ODgyMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4688224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-y", "html_url": "https://github.com/jon-y", "followers_url": "https://api.github.com/users/jon-y/followers", "following_url": "https://api.github.com/users/jon-y/following{/other_user}", "gists_url": "https://api.github.com/users/jon-y/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-y/subscriptions", "organizations_url": "https://api.github.com/users/jon-y/orgs", "repos_url": "https://api.github.com/users/jon-y/repos", "events_url": "https://api.github.com/users/jon-y/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-y/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jon-y", "id": 4688224, "node_id": "MDQ6VXNlcjQ2ODgyMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4688224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-y", "html_url": "https://github.com/jon-y", "followers_url": "https://api.github.com/users/jon-y/followers", "following_url": "https://api.github.com/users/jon-y/following{/other_user}", "gists_url": "https://api.github.com/users/jon-y/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-y/subscriptions", "organizations_url": "https://api.github.com/users/jon-y/orgs", "repos_url": "https://api.github.com/users/jon-y/repos", "events_url": "https://api.github.com/users/jon-y/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-y/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d651736e10c91cd51f7f63eeecace66920dcaeeb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d651736e10c91cd51f7f63eeecace66920dcaeeb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d651736e10c91cd51f7f63eeecace66920dcaeeb"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "068ce0145ca6541edadfabe329b3b7144ed3affe", "filename": "gcc/testsuite/c-c++-common/Wsizeof-array-div1.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76ab4084d033053f430c7429c2f2f3d2a76bc6b3/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWsizeof-array-div1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76ab4084d033053f430c7429c2f2f3d2a76bc6b3/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWsizeof-array-div1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWsizeof-array-div1.c?ref=76ab4084d033053f430c7429c2f2f3d2a76bc6b3", "patch": "@@ -13,12 +13,12 @@ fn (int ap[])\n   int r = 0;\n \n   r += sizeof (arr) / sizeof (*arr);\n-  r += sizeof (arr) / sizeof (p); /* { dg-warning \"expression does not compute\" \"\" { target { lp64 } } } */\n-  r += sizeof (arr) / sizeof p; /* { dg-warning \"expression does not compute\" \"\" { target { lp64 } } } */\n+  r += sizeof (arr) / sizeof (p); /* { dg-warning \"expression does not compute\" \"\" { target { ! ilp32 } } } */\n+  r += sizeof (arr) / sizeof p; /* { dg-warning \"expression does not compute\" \"\" { target { ! ilp32 } } } */\n   r += sizeof (arr) / (sizeof p);\n   r += sizeof (arr) / (sizeof (p));\n   r += sizeof (arr2) / sizeof p;\n-  r += sizeof (arr2) / sizeof (int); /* { dg-warning \"expression does not compute\" \"\" { target { lp64 } } } */\n+  r += sizeof (arr2) / sizeof (int); /* { dg-warning \"expression does not compute\" \"\" { target { ! ilp32 } } } */\n   r += sizeof (arr2) / sizeof (int *);\n   r += sizeof (arr2) / sizeof (short *);\n   r += sizeof (arr) / sizeof (int);"}, {"sha": "69dc15ace2dab1204e2d543eadcfc7a8b77f8b5a", "filename": "gcc/testsuite/gcc.dg/Warray-bounds-52.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76ab4084d033053f430c7429c2f2f3d2a76bc6b3/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-52.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76ab4084d033053f430c7429c2f2f3d2a76bc6b3/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-52.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-52.c?ref=76ab4084d033053f430c7429c2f2f3d2a76bc6b3", "patch": "@@ -60,7 +60,7 @@ void ptr_idx_cst (void)\n   T ( 0, (int[]){ 1 });\n   T (+1, (int[]){ 1 });         // { dg-warning \"array subscript 1 is outside array bounds of 'int\\\\\\[1]'\" }\n   T (INT_MIN, (int[]){ 1 });    // { dg-warning \"array subscript -\\[0-9\\]+ is outside array bounds of 'int\\\\\\[1]'\" \"lp64\" { xfail ilp32 } }\n-  T (INT_MAX, (int[]){ 1 });    // { dg-warning \"array subscript \\[0-9\\]+ is outside array bounds of 'int\\\\\\[1]'\" \"lp64\" { target lp64 } }\n+  T (INT_MAX, (int[]){ 1 });    // { dg-warning \"array subscript \\[0-9\\]+ is outside array bounds of 'int\\\\\\[1]'\" \"not-ilp32\" { target { ! ilp32 } } }\n                                 // { dg-warning \"array subscript -1 is outside array bounds of 'int\\\\\\[1]'\" \"ilp32\" { target ilp32 } .-1 }\n   T (SIZE_MAX, (int[]){ 1 });   // { dg-warning \"array subscript -?\\[0-9\\]+ is outside array bounds of 'int\\\\\\[1]'\" }\n }"}, {"sha": "d589f077887e150f944ccbc04863f3c77a57db0a", "filename": "gcc/testsuite/gcc.dg/Wstringop-overflow-62.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76ab4084d033053f430c7429c2f2f3d2a76bc6b3/gcc%2Ftestsuite%2Fgcc.dg%2FWstringop-overflow-62.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76ab4084d033053f430c7429c2f2f3d2a76bc6b3/gcc%2Ftestsuite%2Fgcc.dg%2FWstringop-overflow-62.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWstringop-overflow-62.c?ref=76ab4084d033053f430c7429c2f2f3d2a76bc6b3", "patch": "@@ -41,7 +41,7 @@ void test_min (void)\n     memset (q, 0, DIFF_MAX - 2);\n     memset (q, 0, DIFF_MAX);\n     // { dg-warning \"writing 2147483647 bytes into a region of size 2147483646\" \"ilp32\" { target ilp32 } .-1 }\n-    // { dg-warning \"writing 9223372036854775807 bytes into a region of size 9223372036854775806\" \"lp64\" { target lp64 } .-2 }\n+    // { dg-warning \"writing 9223372036854775807 bytes into a region of size 9223372036854775806\" \"not-ilp32\" { target { ! ilp32 } } .-2 }\n   }\n \n   {"}, {"sha": "9177e25250a27871dccb20a09a64250a7b9b395f", "filename": "gcc/testsuite/gcc.dg/attr-vector_size.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76ab4084d033053f430c7429c2f2f3d2a76bc6b3/gcc%2Ftestsuite%2Fgcc.dg%2Fattr-vector_size.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76ab4084d033053f430c7429c2f2f3d2a76bc6b3/gcc%2Ftestsuite%2Fgcc.dg%2Fattr-vector_size.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fattr-vector_size.c?ref=76ab4084d033053f430c7429c2f2f3d2a76bc6b3", "patch": "@@ -22,7 +22,7 @@ DEFVEC (extern, 30);\n \n #if __SIZEOF_SIZE_T__ > 4\n \n-VEC (POW2 (63)) char v63;     /* { dg-error  \"'vector_size' attribute argument value '9223372036854775808' exceeds 9223372036854775807\" \"LP64\" { target lp64 } } */\n+VEC (POW2 (63)) char v63;     /* { dg-error  \"'vector_size' attribute argument value '9223372036854775808' exceeds 9223372036854775807\" \"not-ILP32\" { target { ! ilp32 } } } */\n \n #else\n \n@@ -41,7 +41,7 @@ void test_local_scope (void)\n \n #if __SIZEOF_SIZE_T__ > 4\n \n-  VEC (POW2 (63)) char v63;   /* { dg-error  \"'vector_size' attribute argument value '9223372036854775808' exceeds 9223372036854775807\" \"LP64\" { target lp64 } } */\n+  VEC (POW2 (63)) char v63;   /* { dg-error  \"'vector_size' attribute argument value '9223372036854775808' exceeds 9223372036854775807\" \"not-ILP32\" { target { ! ilp32 } } } */\n \n #else\n "}, {"sha": "57c0f17bc91d779d61dfa2f622b2ba33894737f6", "filename": "gcc/testsuite/gcc.dg/overflow-warn-9.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76ab4084d033053f430c7429c2f2f3d2a76bc6b3/gcc%2Ftestsuite%2Fgcc.dg%2Foverflow-warn-9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76ab4084d033053f430c7429c2f2f3d2a76bc6b3/gcc%2Ftestsuite%2Fgcc.dg%2Foverflow-warn-9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Foverflow-warn-9.c?ref=76ab4084d033053f430c7429c2f2f3d2a76bc6b3", "patch": "@@ -59,7 +59,7 @@ const struct Types t1 = {\n   .ui = UINT_MAX + 1L,      /* { dg-warning \"signed conversion from .long int. to .unsigned int. changes value from .4294967296. to .0.\" \"lp64\" { target lp64 } } */\n   .ui = UINT_MAX + 1LU,     /* { dg-warning \"conversion from .long unsigned int. to .unsigned int. changes value from .4294967296. to .0.\" \"lp64\" { target lp64 } } */\n \n-  .sl = LONG_MAX + 1LU,     /* { dg-warning \"signed conversion from .long unsigned int. to .long int. changes value from .9223372036854775808. to .-9223372036854775808.\" \"lp64\" { target lp64 } } */\n+  .sl = LONG_MAX + 1LU,     /* { dg-warning \"signed conversion from .long unsigned int. to .long int. changes value from .9223372036854775808. to .-9223372036854775808.\" \"not-ilp32\" { target { ! ilp32 } } } */\n   /* { dg-warning \"signed conversion from .long unsigned int. to .long int. changes value from .2147483648. to .-2147483648.\" \"ilp32\" { target ilp32 } .-1 } */\n   .ul = ULONG_MAX + 1LU     /* there should be some warning here */\n };"}]}