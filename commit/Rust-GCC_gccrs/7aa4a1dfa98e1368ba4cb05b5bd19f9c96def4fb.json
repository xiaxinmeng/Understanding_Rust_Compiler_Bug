{"sha": "7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2FhNGExZGZhOThlMTM2OGJhNGNiMDViNWJkMTlmOWM5NmRlZjRmYg==", "commit": {"author": {"name": "Douglas Gregor", "email": "doug.gregor@gmail.com", "date": "2008-09-05T17:04:12Z"}, "committer": {"name": "Doug Gregor", "email": "dgregor@gcc.gnu.org", "date": "2008-09-05T17:04:12Z"}, "message": "re PR c++/37342 (same canonical type node for different types void (Asm::*)(std::ostream&) and void (Asm::* const)(std::ostream&))\n\n2008-09-05  Douglas Gregor  <doug.gregor@gmail.com>\n\n       PR c++/37342\n       * tree.c (cp_build_qualified_type_real): Deal with sharing of\n       TYPE_LANG_SPECIFIC in the canonical types of pointer-to-method\n       types.\n\t\n2008-09-05  Douglas Gregor  <doug.gregor@gmail.com>\n\n       PR c++/37342\n       * g++.dg/other/canon-37342.C: New.\n\nFrom-SVN: r140037", "tree": {"sha": "0d3758b38d9d3094da6d985f0291afcca7771e37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0d3758b38d9d3094da6d985f0291afcca7771e37"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb/comments", "author": {"login": "DougGregor", "id": 989428, "node_id": "MDQ6VXNlcjk4OTQyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/989428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DougGregor", "html_url": "https://github.com/DougGregor", "followers_url": "https://api.github.com/users/DougGregor/followers", "following_url": "https://api.github.com/users/DougGregor/following{/other_user}", "gists_url": "https://api.github.com/users/DougGregor/gists{/gist_id}", "starred_url": "https://api.github.com/users/DougGregor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DougGregor/subscriptions", "organizations_url": "https://api.github.com/users/DougGregor/orgs", "repos_url": "https://api.github.com/users/DougGregor/repos", "events_url": "https://api.github.com/users/DougGregor/events{/privacy}", "received_events_url": "https://api.github.com/users/DougGregor/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "37fbe8a344b5ab7e3e77499176d0581e4187929c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37fbe8a344b5ab7e3e77499176d0581e4187929c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37fbe8a344b5ab7e3e77499176d0581e4187929c"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "cb5c31402e8ffd67120efd12d086240752501962", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb", "patch": "@@ -1,3 +1,10 @@\n+2008-09-05  Douglas Gregor  <doug.gregor@gmail.com>\n+\n+       PR c++/37342\n+       * tree.c (cp_build_qualified_type_real): Deal with sharing of\n+       TYPE_LANG_SPECIFIC in the canonical types of pointer-to-method\n+       types.\n+\t\n 2008-09-04  Ian Lance Taylor  <iant@google.com>\n \n \t* parser.c (check_no_duplicate_clause): Change code parameter to"}, {"sha": "912676393d0d43abc382745c863b114e24a6a52e", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb", "patch": "@@ -877,6 +877,17 @@ cp_build_qualified_type_real (tree type,\n       && TYPE_LANG_SPECIFIC (result) == TYPE_LANG_SPECIFIC (type))\n     TYPE_LANG_SPECIFIC (result) = NULL;\n \n+  /* We may also have ended up building a new copy of the canonical\n+     type of a pointer-to-method type, which could have the same\n+     sharing problem described above.  */\n+  if (TYPE_CANONICAL (result) != TYPE_CANONICAL (type)\n+      && TREE_CODE (type) == POINTER_TYPE\n+      && TREE_CODE (TREE_TYPE (type)) == METHOD_TYPE\n+      && (TYPE_LANG_SPECIFIC (TYPE_CANONICAL (result)) \n+          == TYPE_LANG_SPECIFIC (TYPE_CANONICAL (type))))\n+    TYPE_LANG_SPECIFIC (TYPE_CANONICAL (result)) = NULL;\n+      \n+\n   return result;\n }\n "}, {"sha": "eb9da58da5642e0a9dbc35399cc0164a2e4f1514", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb", "patch": "@@ -1,3 +1,8 @@\n+2008-09-05  Douglas Gregor  <doug.gregor@gmail.com>\n+\n+       PR c++/37342\n+       * g++.dg/other/canon-37342.C: New.\n+\t\n 2008-09-05  Joseph Myers  <joseph@codesourcery.com>\n \n \t* gcc.c-torture/compile/20080903-1.c: New test."}, {"sha": "dd96e40ebd2f3432a457df78d073072f01387422", "filename": "gcc/testsuite/g++.dg/other/canon-37342.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fcanon-37342.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fcanon-37342.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fcanon-37342.C?ref=7aa4a1dfa98e1368ba4cb05b5bd19f9c96def4fb", "patch": "@@ -0,0 +1,8 @@\n+class Asm;\n+template<typename _CharT> class basic_ostream;\n+typedef basic_ostream<char> ostream;\n+class Options {\n+    typedef void (Asm::* emitfunc_t) (ostream &);\n+    emitfunc_t getemit () const { return emitfunc; }\n+    emitfunc_t emitfunc;\n+};"}]}