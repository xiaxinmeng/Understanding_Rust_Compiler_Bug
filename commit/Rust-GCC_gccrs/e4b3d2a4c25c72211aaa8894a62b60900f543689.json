{"sha": "e4b3d2a4c25c72211aaa8894a62b60900f543689", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTRiM2QyYTRjMjVjNzIyMTFhYWE4ODk0YTYyYjYwOTAwZjU0MzY4OQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2020-10-29T11:21:41Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2020-10-29T12:09:49Z"}, "message": "Consistently pass the vector type for scalar SLP cost compute\n\nThis avoids randomly (based on whether the stmt is\nSLP_TREE_REPRESENTATIVE and not a pattern stmt) passing a vector\ntype or NULL to the add_stmt_cost hook for scalar code cost\ncompute.  For example the x86 backend uses only the vector type to\ndecide on the scalar computation mode which makes costing off.\n\nSo the following explicitely passes the vector type and uses\nSLP_TREE_VECTYPE for this purpose.\n\n2020-10-29  Richard Biener  <rguenther@suse.de>\n\n\t* tree-vect-slp.c (vect_bb_slp_scalar_cost): Pass\n\tSLP_TREE_VECTYPE to record_stmt_cost.", "tree": {"sha": "927da55d15f9c346457ea259ef7152cf0e861302", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/927da55d15f9c346457ea259ef7152cf0e861302"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e4b3d2a4c25c72211aaa8894a62b60900f543689", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4b3d2a4c25c72211aaa8894a62b60900f543689", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4b3d2a4c25c72211aaa8894a62b60900f543689", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4b3d2a4c25c72211aaa8894a62b60900f543689/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eb6b71b83c9f099808bc50c6a467a0caf4002e50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb6b71b83c9f099808bc50c6a467a0caf4002e50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb6b71b83c9f099808bc50c6a467a0caf4002e50"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "7a08908cde87db88f35e5d0f08063e0971e2c2a7", "filename": "gcc/tree-vect-slp.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4b3d2a4c25c72211aaa8894a62b60900f543689/gcc%2Ftree-vect-slp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4b3d2a4c25c72211aaa8894a62b60900f543689/gcc%2Ftree-vect-slp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-slp.c?ref=e4b3d2a4c25c72211aaa8894a62b60900f543689", "patch": "@@ -3937,7 +3937,8 @@ vect_bb_slp_scalar_cost (vec_info *vinfo,\n \tcontinue;\n       else\n \tkind = scalar_stmt;\n-      record_stmt_cost (cost_vec, 1, kind, orig_stmt_info, 0, vect_body);\n+      record_stmt_cost (cost_vec, 1, kind, orig_stmt_info,\n+\t\t\tSLP_TREE_VECTYPE (node), 0, vect_body);\n     }\n \n   auto_vec<bool, 20> subtree_life;"}]}