{"sha": "ef795fc25033c60df465b8100644ddde84181cc6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWY3OTVmYzI1MDMzYzYwZGY0NjViODEwMDY0NGRkZGU4NDE4MWNjNg==", "commit": {"author": {"name": "Anatoly Sokolov", "email": "aesok@post.ru", "date": "2011-02-24T20:52:49Z"}, "committer": {"name": "Anatoly Sokolov", "email": "aesok@gcc.gnu.org", "date": "2011-02-24T20:52:49Z"}, "message": "stormy16.h (PREFERRED_RELOAD_CLASS, [...]): Remove.\n\n\t* config/stormy16/stormy16.h (PREFERRED_RELOAD_CLASS,\n\tPREFERRED_OUTPUT_RELOAD_CLASS): Remove.\n\t* config/stormy16/stormy16-protos.h\n\t(xstormy16_preferred_reload_class): Remove.\n\t* config/stormy16/stormy16.c (xstormy16_preferred_reload_class): Make\n\tstatic. Change 'rclass' argument and return type to reg_class_t.\n\t(TARGET_PREFERRED_RELOAD_CLASS,\n\tTARGET_PREFERRED_OUTPUT_RELOAD_CLASS): Define.\n\nFrom-SVN: r170477", "tree": {"sha": "c5f5271f9f58b5f14df7d3db79000c7204c1ebd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c5f5271f9f58b5f14df7d3db79000c7204c1ebd0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef795fc25033c60df465b8100644ddde84181cc6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef795fc25033c60df465b8100644ddde84181cc6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef795fc25033c60df465b8100644ddde84181cc6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef795fc25033c60df465b8100644ddde84181cc6/comments", "author": null, "committer": null, "parents": [{"sha": "ae01ced508fd6d5e9d624a6e225bef0741ebb736", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae01ced508fd6d5e9d624a6e225bef0741ebb736", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae01ced508fd6d5e9d624a6e225bef0741ebb736"}], "stats": {"total": 30, "additions": 21, "deletions": 9}, "files": [{"sha": "000c08f4d75ef98d0ba15f11d23997193774309b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef795fc25033c60df465b8100644ddde84181cc6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef795fc25033c60df465b8100644ddde84181cc6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ef795fc25033c60df465b8100644ddde84181cc6", "patch": "@@ -1,3 +1,14 @@\n+2011-02-24  Anatoly Sokolov  <aesok@post.ru>\n+\n+\t* config/stormy16/stormy16.h (PREFERRED_RELOAD_CLASS,\n+\tPREFERRED_OUTPUT_RELOAD_CLASS): Remove.\n+\t* config/stormy16/stormy16-protos.h\n+\t(xstormy16_preferred_reload_class): Remove.\n+\t* config/stormy16/stormy16.c (xstormy16_preferred_reload_class): Make\n+\tstatic. Change 'rclass' argument and return type to reg_class_t.\n+\t(TARGET_PREFERRED_RELOAD_CLASS,\n+\tTARGET_PREFERRED_OUTPUT_RELOAD_CLASS): Define.\n+\n 2011-02-24  Richard Guenther  <rguenther@suse.de>\n \n \t* lto-streamer-in.c (input_bb): Do not find referenced vars"}, {"sha": "e9842ea09ca1f01bde2c7b37b50a41b1c395a3bb", "filename": "gcc/config/stormy16/stormy16-protos.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef795fc25033c60df465b8100644ddde84181cc6/gcc%2Fconfig%2Fstormy16%2Fstormy16-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef795fc25033c60df465b8100644ddde84181cc6/gcc%2Fconfig%2Fstormy16%2Fstormy16-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-protos.h?ref=ef795fc25033c60df465b8100644ddde84181cc6", "patch": "@@ -61,7 +61,6 @@ extern int  short_memory_operand (rtx, enum machine_mode);\n extern int  nonimmediate_nonstack_operand (rtx, enum machine_mode);\n extern enum reg_class xstormy16_secondary_reload_class \n  (enum reg_class, enum machine_mode, rtx);\n-extern enum reg_class xstormy16_preferred_reload_class (rtx, enum reg_class);\n extern void xstormy16_split_move (enum machine_mode, rtx, rtx);\n extern void xstormy16_expand_move (enum machine_mode, rtx, rtx);\n extern void xstormy16_expand_arith (enum machine_mode, enum rtx_code, "}, {"sha": "03253ddc22ea5059e3a6c3ac5ecd70ab1be3d77c", "filename": "gcc/config/stormy16/stormy16.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef795fc25033c60df465b8100644ddde84181cc6/gcc%2Fconfig%2Fstormy16%2Fstormy16.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef795fc25033c60df465b8100644ddde84181cc6/gcc%2Fconfig%2Fstormy16%2Fstormy16.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16.c?ref=ef795fc25033c60df465b8100644ddde84181cc6", "patch": "@@ -469,8 +469,11 @@ xstormy16_secondary_reload_class (enum reg_class rclass,\n   return NO_REGS;\n }\n \n-enum reg_class\n-xstormy16_preferred_reload_class (rtx x, enum reg_class rclass)\n+/* Worker function for TARGET_PREFERRED_RELOAD_CLASS\n+   and TARGET_PREFERRED_OUTPUT_RELOAD_CLASS.  */\n+\n+static reg_class_t\n+xstormy16_preferred_reload_class (rtx x, reg_class_t rclass)\n {\n   if (rclass == GENERAL_REGS && MEM_P (x))\n     return EIGHT_REGS;\n@@ -2604,6 +2607,11 @@ static const struct default_options xstorym16_option_optimization_table[] =\n #undef  TARGET_MACHINE_DEPENDENT_REORG\n #define TARGET_MACHINE_DEPENDENT_REORG xstormy16_reorg\n \n+#undef  TARGET_PREFERRED_RELOAD_CLASS\n+#define TARGET_PREFERRED_RELOAD_CLASS xstormy16_preferred_reload_class\n+#undef  TARGET_PREFERRED_OUTPUT_RELOAD_CLASS\n+#define TARGET_PREFERRED_OUTPUT_RELOAD_CLASS xstormy16_preferred_reload_class\n+\n #undef TARGET_LEGITIMATE_ADDRESS_P\n #define TARGET_LEGITIMATE_ADDRESS_P\txstormy16_legitimate_address_p\n #undef TARGET_MODE_DEPENDENT_ADDRESS_P"}, {"sha": "7b8f50767bba83d132ee584f44249d7e87cbd01f", "filename": "gcc/config/stormy16/stormy16.h", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef795fc25033c60df465b8100644ddde84181cc6/gcc%2Fconfig%2Fstormy16%2Fstormy16.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef795fc25033c60df465b8100644ddde84181cc6/gcc%2Fconfig%2Fstormy16%2Fstormy16.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16.h?ref=ef795fc25033c60df465b8100644ddde84181cc6", "patch": "@@ -229,12 +229,6 @@ enum reg_class\n \n #define REGNO_OK_FOR_INDEX_P(NUM) REGNO_OK_FOR_BASE_P (NUM)\n \n-#define PREFERRED_RELOAD_CLASS(X, CLASS) \\\n-  xstormy16_preferred_reload_class (X, CLASS)\n-\n-#define PREFERRED_OUTPUT_RELOAD_CLASS(X, CLASS) \\\n-  xstormy16_preferred_reload_class (X, CLASS)\n-\n /* This chip has the interesting property that only the first eight\n    registers can be moved to/from memory.  */\n #define SECONDARY_RELOAD_CLASS(CLASS, MODE, X)\t\t\t\\"}]}