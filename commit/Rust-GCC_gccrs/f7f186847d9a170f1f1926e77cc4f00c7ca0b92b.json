{"sha": "f7f186847d9a170f1f1926e77cc4f00c7ca0b92b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjdmMTg2ODQ3ZDlhMTcwZjFmMTkyNmU3N2NjNGYwMGM3Y2EwYjkyYg==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2015-09-03T11:00:46Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2015-09-03T11:00:46Z"}, "message": "Add param parloops-chunk-size\n\n2015-09-03  Tom de Vries  <tom@codesourcery.com>\n\n\t* doc/invoke.texi (parloops-chunk-size): Add item.\n\t* params.def (PARAM_PARLOOPS_CHUNK_SIZE): Add DEFPARAM.\n\t* tree-parloops.c: Include params.h.\n\t(create_parallel_loop): Set chunk-size of schedule of omp-for loop, if\n\tparam parloops-chunk-size is used.\n\nFrom-SVN: r227434", "tree": {"sha": "483c896cc6a21e4a2df91c56176b36022aafd87a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/483c896cc6a21e4a2df91c56176b36022aafd87a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b/comments", "author": null, "committer": null, "parents": [{"sha": "2699123aabf1969ec4318550d5c7623a2783c5f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2699123aabf1969ec4318550d5c7623a2783c5f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2699123aabf1969ec4318550d5c7623a2783c5f5"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "1d0f7a3fa6a35ec484d94fad3e04f5691e116463", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f7f186847d9a170f1f1926e77cc4f00c7ca0b92b", "patch": "@@ -1,3 +1,11 @@\n+2015-09-03  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* doc/invoke.texi (parloops-chunk-size): Add item.\n+\t* params.def (PARAM_PARLOOPS_CHUNK_SIZE): Add DEFPARAM.\n+\t* tree-parloops.c: Include params.h.\n+\t(create_parallel_loop): Set chunk-size of schedule of omp-for loop, if\n+\tparam parloops-chunk-size is used.\n+\n 2015-09-03  Naveen H.S  <Naveen.Hurugalawadi@caviumnetworks.com>\n \n \tPR middle-end/67351"}, {"sha": "d7dc64e46da26428cda055406c501a22177cf6a0", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=f7f186847d9a170f1f1926e77cc4f00c7ca0b92b", "patch": "@@ -11001,6 +11001,10 @@ path.  The default is 10.\n Maximum number of new jump thread paths to create for a finite state\n automaton.  The default is 50.\n \n+@item parloops-chunk-size\n+Chunk size of omp schedule for loops parallelized by parloops.  The default\n+is 0.\n+\n @end table\n @end table\n "}, {"sha": "11238cbbe7818a8165235af4a931f9c3a190cc4b", "filename": "gcc/params.def", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b/gcc%2Fparams.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b/gcc%2Fparams.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fparams.def?ref=f7f186847d9a170f1f1926e77cc4f00c7ca0b92b", "patch": "@@ -1135,6 +1135,11 @@ DEFPARAM (PARAM_MAX_FSM_THREAD_PATHS,\n \t  \"max-fsm-thread-paths\",\n \t  \"Maximum number of new jump thread paths to create for a finite state automaton\",\n \t  50, 1, 999999)\n+\n+DEFPARAM (PARAM_PARLOOPS_CHUNK_SIZE,\n+\t  \"parloops-chunk-size\",\n+\t  \"Chunk size of omp schedule for loops parallelized by parloops\",\n+\t  0, 0, 0)\n /*\n \n Local variables:"}, {"sha": "c164121fdb4dd74280da0a28b465bdbad7a62982", "filename": "gcc/tree-parloops.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b/gcc%2Ftree-parloops.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7f186847d9a170f1f1926e77cc4f00c7ca0b92b/gcc%2Ftree-parloops.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-parloops.c?ref=f7f186847d9a170f1f1926e77cc4f00c7ca0b92b", "patch": "@@ -57,6 +57,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"tree-nested.h\"\n #include \"cgraph.h\"\n #include \"tree-ssa.h\"\n+#include \"params.h\"\n \n /* This pass tries to distribute iterations of loops into several threads.\n    The implementation is straightforward -- for each loop we test whether its\n@@ -2092,6 +2093,10 @@ create_parallel_loop (struct loop *loop, tree loop_fn, tree data,\n   type = TREE_TYPE (cvar);\n   t = build_omp_clause (loc, OMP_CLAUSE_SCHEDULE);\n   OMP_CLAUSE_SCHEDULE_KIND (t) = OMP_CLAUSE_SCHEDULE_STATIC;\n+  int chunk_size = PARAM_VALUE (PARAM_PARLOOPS_CHUNK_SIZE);\n+  if (chunk_size != 0)\n+    OMP_CLAUSE_SCHEDULE_CHUNK_EXPR (t)\n+      = build_int_cst (integer_type_node, chunk_size);\n \n   for_stmt = gimple_build_omp_for (NULL, GF_OMP_FOR_KIND_FOR, t, 1, NULL);\n   gimple_set_location (for_stmt, loc);"}]}