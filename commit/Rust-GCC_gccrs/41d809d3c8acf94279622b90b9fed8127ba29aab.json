{"sha": "41d809d3c8acf94279622b90b9fed8127ba29aab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDFkODA5ZDNjOGFjZjk0Mjc5NjIyYjkwYjlmZWQ4MTI3YmEyOWFhYg==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2016-02-02T12:48:04Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2016-02-02T12:48:04Z"}, "message": "libgomp: Don't configure for offloading target if we don't build the corresponding plugin\n\n\tlibgomp/\n\t* plugin/configfrag.ac: Don't configure for offloading target if\n\twe don't build the corresponding plugin.\n\t* configure: Regenerate.\n\nFrom-SVN: r233070", "tree": {"sha": "991f8fcd67013e9a867c5f75f72f86e0c90f8247", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/991f8fcd67013e9a867c5f75f72f86e0c90f8247"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/41d809d3c8acf94279622b90b9fed8127ba29aab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41d809d3c8acf94279622b90b9fed8127ba29aab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41d809d3c8acf94279622b90b9fed8127ba29aab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41d809d3c8acf94279622b90b9fed8127ba29aab/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9dc03c974ffc1fa29217cf0fb83b4d662a6e7a93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dc03c974ffc1fa29217cf0fb83b4d662a6e7a93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9dc03c974ffc1fa29217cf0fb83b4d662a6e7a93"}], "stats": {"total": 20, "additions": 18, "deletions": 2}, "files": [{"sha": "610074c3153ce0912692ff81f9df0acf1d4e3c3f", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41d809d3c8acf94279622b90b9fed8127ba29aab/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41d809d3c8acf94279622b90b9fed8127ba29aab/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=41d809d3c8acf94279622b90b9fed8127ba29aab", "patch": "@@ -1,3 +1,9 @@\n+2016-02-02  Thomas Schwinge  <thomas@codesourcery.com>\n+\n+\t* plugin/configfrag.ac: Don't configure for offloading target if\n+\twe don't build the corresponding plugin.\n+\t* configure: Regenerate.\n+\n 2016-02-01  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* testsuite/libgomp.oacc-c-c++-common/loop-dim-default.c: New."}, {"sha": "d34a350e048583ef0dca8e01a4681a7c6e9d54fb", "filename": "libgomp/configure", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41d809d3c8acf94279622b90b9fed8127ba29aab/libgomp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41d809d3c8acf94279622b90b9fed8127ba29aab/libgomp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure?ref=41d809d3c8acf94279622b90b9fed8127ba29aab", "patch": "@@ -15323,6 +15323,7 @@ if test x\"$enable_offload_targets\" != x; then\n   for tgt in `echo $enable_offload_targets | sed -e 's#,# #g'`; do\n     tgt_dir=`echo $tgt | grep '=' | sed 's/.*=//'`\n     tgt=`echo $tgt | sed 's/=.*//'`\n+    tgt_name=\n     case $tgt in\n       *-intelmic-* | *-intelmicemul-*)\n \ttgt_name=intelmic\n@@ -15424,7 +15425,11 @@ rm -f core conftest.err conftest.$ac_objext \\\n \tas_fn_error \"unknown offload target specified\" \"$LINENO\" 5\n \t;;\n     esac\n-    if test x\"$offload_targets\" = x; then\n+    if test x\"$tgt_name\" = x; then\n+      # Don't configure libgomp for this offloading target if we don't build\n+      # the corresponding plugin.\n+      continue\n+    elif test x\"$offload_targets\" = x; then\n       offload_targets=$tgt_name\n     else\n       offload_targets=$offload_targets,$tgt_name"}, {"sha": "01815d41c8b17881f7e63628fc488c9504596a01", "filename": "libgomp/plugin/configfrag.ac", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41d809d3c8acf94279622b90b9fed8127ba29aab/libgomp%2Fplugin%2Fconfigfrag.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41d809d3c8acf94279622b90b9fed8127ba29aab/libgomp%2Fplugin%2Fconfigfrag.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fplugin%2Fconfigfrag.ac?ref=41d809d3c8acf94279622b90b9fed8127ba29aab", "patch": "@@ -146,6 +146,7 @@ if test x\"$enable_offload_targets\" != x; then\n   for tgt in `echo $enable_offload_targets | sed -e 's#,# #g'`; do\n     tgt_dir=`echo $tgt | grep '=' | sed 's/.*=//'`\n     tgt=`echo $tgt | sed 's/=.*//'`\n+    tgt_name=\n     case $tgt in\n       *-intelmic-* | *-intelmicemul-*)\n \ttgt_name=intelmic\n@@ -225,7 +226,11 @@ if test x\"$enable_offload_targets\" != x; then\n \tAC_MSG_ERROR([unknown offload target specified])\n \t;;\n     esac\n-    if test x\"$offload_targets\" = x; then\n+    if test x\"$tgt_name\" = x; then\n+      # Don't configure libgomp for this offloading target if we don't build\n+      # the corresponding plugin.\n+      continue\n+    elif test x\"$offload_targets\" = x; then\n       offload_targets=$tgt_name\n     else\n       offload_targets=$offload_targets,$tgt_name"}]}