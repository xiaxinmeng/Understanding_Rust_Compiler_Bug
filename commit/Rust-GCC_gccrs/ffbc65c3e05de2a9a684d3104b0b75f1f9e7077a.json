{"sha": "ffbc65c3e05de2a9a684d3104b0b75f1f9e7077a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmZiYzY1YzNlMDVkZTJhOWE2ODRkMzEwNGIwYjc1ZjFmOWU3MDc3YQ==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2003-06-07T06:11:18Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2003-06-07T06:11:18Z"}, "message": "* config/rs6000/linux64.h (CRT_CALL_STATIC_FUNCTION): Define.\n\nFrom-SVN: r67578", "tree": {"sha": "82cae213b18016f5c76456297556a1e4415f077f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82cae213b18016f5c76456297556a1e4415f077f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ffbc65c3e05de2a9a684d3104b0b75f1f9e7077a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffbc65c3e05de2a9a684d3104b0b75f1f9e7077a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ffbc65c3e05de2a9a684d3104b0b75f1f9e7077a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffbc65c3e05de2a9a684d3104b0b75f1f9e7077a/comments", "author": null, "committer": null, "parents": [{"sha": "8a5db2b4c44e89eef899f0fceffa00452c17ffd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a5db2b4c44e89eef899f0fceffa00452c17ffd0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a5db2b4c44e89eef899f0fceffa00452c17ffd0"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "1d9032516a04b303cfd4b9bbb148f5e3e64af12a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffbc65c3e05de2a9a684d3104b0b75f1f9e7077a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffbc65c3e05de2a9a684d3104b0b75f1f9e7077a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ffbc65c3e05de2a9a684d3104b0b75f1f9e7077a", "patch": "@@ -1,3 +1,7 @@\n+2003-06-07  Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* config/rs6000/linux64.h (CRT_CALL_STATIC_FUNCTION): Define.\n+\n 2003-06-06  James E Wilson  <wilson@tuliptree.org>\n \n \tPR inline-asm/10890"}, {"sha": "8d136fb4bfd0f6e8bf2362d044d8915afca138a8", "filename": "gcc/config/rs6000/linux64.h", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffbc65c3e05de2a9a684d3104b0b75f1f9e7077a/gcc%2Fconfig%2Frs6000%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffbc65c3e05de2a9a684d3104b0b75f1f9e7077a/gcc%2Fconfig%2Frs6000%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux64.h?ref=ffbc65c3e05de2a9a684d3104b0b75f1f9e7077a", "patch": "@@ -363,6 +363,18 @@\n #undef  RS6000_MCOUNT\n #define RS6000_MCOUNT \"_mcount\"\n \n+#ifdef __powerpc64__\n+/* _init and _fini functions are built from bits spread across many\n+   object files, each potentially with a different TOC pointer.  For\n+   that reason, place a nop after the call so that the linker can\n+   restore the TOC pointer if a TOC adjusting call stub is needed.  */\n+#define CRT_CALL_STATIC_FUNCTION(SECTION_OP, FUNC)\t\\\n+  asm (SECTION_OP \"\\n\"\t\t\t\t\t\\\n+\"\tbl .\" #FUNC \"\\n\"\t\t\t\t\\\n+\"\tnop\\n\"\t\t\t\t\t\t\\\n+\"\t.previous\");\n+#endif\n+\n /* FP save and restore routines.  */\n #undef  SAVE_FP_PREFIX\n #define SAVE_FP_PREFIX (TARGET_64BIT ? \"._savef\" : \"_savefpr_\")"}]}