{"sha": "9ef3dbcdae545afddada54c57ed3027388fe4b0f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWVmM2RiY2RhZTU0NWFmZGRhZGE1NGM1N2VkMzAyNzM4OGZlNGIwZg==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2009-10-12T11:57:30Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2009-10-12T11:57:30Z"}, "message": "Candidate fix for PR c++/41570\n\ngcc/ChangeLog:\n\tPR c++/41570\n\t* gcc/dwarf2out.c (template_parameter_pack_die,\n\tgen_formal_parameter_pack_die): Use add_name_and_src_coords_attributes.\n\ngcc/testsuite/ChangeLog:\n\tPR c++/41570\n\t* gcc/testsuite/g++.dg/debug/dwarf2/template-params-7.C: New test.\n\nFrom-SVN: r152663", "tree": {"sha": "b9fbb9ba470339aeed1c98c0c0bb1b1e16f76e9e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9fbb9ba470339aeed1c98c0c0bb1b1e16f76e9e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ef3dbcdae545afddada54c57ed3027388fe4b0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ef3dbcdae545afddada54c57ed3027388fe4b0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ef3dbcdae545afddada54c57ed3027388fe4b0f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ef3dbcdae545afddada54c57ed3027388fe4b0f/comments", "author": null, "committer": null, "parents": [{"sha": "3a56edc75e31a14a438fffd81e8776ef2024e362", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a56edc75e31a14a438fffd81e8776ef2024e362", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a56edc75e31a14a438fffd81e8776ef2024e362"}], "stats": {"total": 43, "additions": 35, "deletions": 8}, "files": [{"sha": "73103c0f89856309d5adea2c22411c5921c5b1a4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ef3dbcdae545afddada54c57ed3027388fe4b0f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ef3dbcdae545afddada54c57ed3027388fe4b0f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9ef3dbcdae545afddada54c57ed3027388fe4b0f", "patch": "@@ -1,3 +1,9 @@\n+2009-10-12  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/41570\n+\t* gcc/dwarf2out.c (template_parameter_pack_die,\n+\tgen_formal_parameter_pack_die): Use add_name_and_src_coords_attributes.\n+\n 2009-10-12  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR debug/41616"}, {"sha": "a8d0048e17f9d4a3fadfa377e1bc66b121c7ae00", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ef3dbcdae545afddada54c57ed3027388fe4b0f/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ef3dbcdae545afddada54c57ed3027388fe4b0f/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=9ef3dbcdae545afddada54c57ed3027388fe4b0f", "patch": "@@ -12353,13 +12353,10 @@ template_parameter_pack_die (tree parm_pack,\n   dw_die_ref die;\n   int j;\n \n-  gcc_assert (parent_die\n-\t      && parm_pack\n-\t      && DECL_NAME (parm_pack));\n+  gcc_assert (parent_die && parm_pack);\n \n   die = new_die (DW_TAG_GNU_template_parameter_pack, parent_die, parm_pack);\n-  add_AT_string (die, DW_AT_name, IDENTIFIER_POINTER (DECL_NAME (parm_pack)));\n-\n+  add_name_and_src_coords_attributes (die, parm_pack);\n   for (j = 0; j < TREE_VEC_LENGTH (parm_pack_args); j++)\n     generic_parameter_die (parm_pack,\n \t\t\t   TREE_VEC_ELT (parm_pack_args, j),\n@@ -17207,12 +17204,10 @@ gen_formal_parameter_pack_die  (tree parm_pack,\n \n   gcc_assert (parm_pack\n \t      && lang_hooks.function_parameter_pack_p (parm_pack)\n-\t      && DECL_NAME (parm_pack)\n \t      && subr_die);\n \n   parm_pack_die = new_die (DW_TAG_GNU_formal_parameter_pack, subr_die, parm_pack);\n-  add_AT_string (parm_pack_die, DW_AT_name,\n-\t\t IDENTIFIER_POINTER (DECL_NAME (parm_pack)));\n+  add_src_coords_attributes (parm_pack_die, parm_pack);\n \n   for (arg = pack_arg; arg; arg = TREE_CHAIN (arg))\n     {"}, {"sha": "36d90f3c9004d13892f04be033bdf455ca50495a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ef3dbcdae545afddada54c57ed3027388fe4b0f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ef3dbcdae545afddada54c57ed3027388fe4b0f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9ef3dbcdae545afddada54c57ed3027388fe4b0f", "patch": "@@ -1,3 +1,8 @@\n+2009-10-12  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/41570\n+\t* gcc/testsuite/g++.dg/debug/dwarf2/template-params-7.C: New test.\n+\n 2009-10-12  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR debug/41616"}, {"sha": "d021d96f54f701d3009c5194b113ef9e01eab222", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/template-params-7.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ef3dbcdae545afddada54c57ed3027388fe4b0f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-params-7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ef3dbcdae545afddada54c57ed3027388fe4b0f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-params-7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-params-7.C?ref=9ef3dbcdae545afddada54c57ed3027388fe4b0f", "patch": "@@ -0,0 +1,21 @@\n+// Contributed by Dodji Seketeli <dodji@redhat.com>\n+// Origin PR debug/30161\n+// { dg-options \"-std=c++0x -g -dA -fno-merge-debug-strings\" }\n+\n+// The type M<> should have one DW_TAG_GNU_template_parameter_pack DIE,\n+// with no DW_AT_name attribute. We don't test the fact that it has no\n+// DW_AT_name though.\n+// { dg-final { scan-assembler-times \"DIE \\\\(0x.*?\\\\) DW_TAG_GNU_template_parameter_pack\" 1 } }\n+\n+\n+template <typename...>\n+struct M\n+{\n+};\n+\n+struct R :\n+    M<>\n+{\n+};\n+\n+R r;"}]}