{"sha": "671e554d87635473d6bc7afd72c9108d49fed404", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjcxZTU1NGQ4NzYzNTQ3M2Q2YmM3YWZkNzJjOTEwOGQ0OWZlZDQwNA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-11-15T13:12:36Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-11-15T13:12:36Z"}, "message": "asan.c (report_error_func): Set DECL_IGNORED_P, don't touch DECL_ASSEMBLER_NAME.\n\n\t* asan.c (report_error_func): Set DECL_IGNORED_P, don't touch\n\tDECL_ASSEMBLER_NAME.\n\t(asan_init_func): Likewise.\n\t(asan_finish_file): Use void * instead of __asan_global * as\n\ttype of __asan_{,un}register_globals.  Set DECL_IGNORED_P on\n\tthe decls.\n\nFrom-SVN: r193532", "tree": {"sha": "189cadabd870c389164b97f6b6f4bda080479655", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/189cadabd870c389164b97f6b6f4bda080479655"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/671e554d87635473d6bc7afd72c9108d49fed404", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/671e554d87635473d6bc7afd72c9108d49fed404", "html_url": "https://github.com/Rust-GCC/gccrs/commit/671e554d87635473d6bc7afd72c9108d49fed404", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/671e554d87635473d6bc7afd72c9108d49fed404/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8b7ec4233d44691e89d0b624ceb54b7707987537", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b7ec4233d44691e89d0b624ceb54b7707987537", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b7ec4233d44691e89d0b624ceb54b7707987537"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "01bf6d3d7b65699255983b3ca6fd04e2d9f44014", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/671e554d87635473d6bc7afd72c9108d49fed404/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/671e554d87635473d6bc7afd72c9108d49fed404/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=671e554d87635473d6bc7afd72c9108d49fed404", "patch": "@@ -1,3 +1,12 @@\n+2012-11-15  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* asan.c (report_error_func): Set DECL_IGNORED_P, don't touch\n+\tDECL_ASSEMBLER_NAME.\n+\t(asan_init_func): Likewise.\n+\t(asan_finish_file): Use void * instead of __asan_global * as\n+\ttype of __asan_{,un}register_globals.  Set DECL_IGNORED_P on\n+\tthe decls.\n+\n 2012-11-15  Matthias Klose  <doko@ubuntu.com>\n \n \t* Makefile.in (if_multiarch): Don't use a GNU make 3.81 feature."}, {"sha": "03519d11369c461df628a4e64ede2fea04dcb1a3", "filename": "gcc/asan.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/671e554d87635473d6bc7afd72c9108d49fed404/gcc%2Fasan.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/671e554d87635473d6bc7afd72c9108d49fed404/gcc%2Fasan.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fasan.c?ref=671e554d87635473d6bc7afd72c9108d49fed404", "patch": "@@ -494,10 +494,10 @@ report_error_func (bool is_store, int size_in_bytes)\n   fn_type = build_function_type_list (void_type_node, ptr_type_node, NULL_TREE);\n   def = build_fn_decl (name, fn_type);\n   TREE_NOTHROW (def) = 1;\n+  DECL_IGNORED_P (def) = 1;\n   TREE_THIS_VOLATILE (def) = 1;  /* Attribute noreturn. Surprise!  */\n   DECL_ATTRIBUTES (def) = tree_cons (get_identifier (\"leaf\"),\n \t\t\t\t     NULL, DECL_ATTRIBUTES (def));\n-  DECL_ASSEMBLER_NAME (def);\n   return def;\n }\n \n@@ -512,7 +512,7 @@ asan_init_func (void)\n   fn_type = build_function_type_list (void_type_node, NULL_TREE);\n   def = build_fn_decl (\"__asan_init\", fn_type);\n   TREE_NOTHROW (def) = 1;\n-  DECL_ASSEMBLER_NAME (def);\n+  DECL_IGNORED_P (def) = 1;\n   return def;\n }\n \n@@ -1536,18 +1536,19 @@ asan_finish_file (void)\n       DECL_INITIAL (var) = ctor;\n       varpool_assemble_decl (varpool_node_for_decl (var));\n \n-      type = build_function_type_list (void_type_node,\n-\t\t\t\t       build_pointer_type (TREE_TYPE (type)),\n+      type = build_function_type_list (void_type_node, ptr_type_node,\n \t\t\t\t       uptr, NULL_TREE);\n       decl = build_fn_decl (\"__asan_register_globals\", type);\n       TREE_NOTHROW (decl) = 1;\n+      DECL_IGNORED_P (decl) = 1;\n       append_to_statement_list (build_call_expr (decl, 2,\n \t\t\t\t\t\t build_fold_addr_expr (var),\n \t\t\t\t\t\t build_int_cst (uptr, gcount)),\n \t\t\t\t&asan_ctor_statements);\n \n       decl = build_fn_decl (\"__asan_unregister_globals\", type);\n       TREE_NOTHROW (decl) = 1;\n+      DECL_IGNORED_P (decl) = 1;\n       append_to_statement_list (build_call_expr (decl, 2,\n \t\t\t\t\t\t build_fold_addr_expr (var),\n \t\t\t\t\t\t build_int_cst (uptr, gcount)),"}]}