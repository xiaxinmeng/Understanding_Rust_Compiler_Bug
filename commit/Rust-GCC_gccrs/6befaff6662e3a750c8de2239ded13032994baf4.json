{"sha": "6befaff6662e3a750c8de2239ded13032994baf4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmJlZmFmZjY2NjJlM2E3NTBjOGRlMjIzOWRlZDEzMDMyOTk0YmFmNA==", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2016-05-19T21:59:45Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@gcc.gnu.org", "date": "2016-05-19T21:59:45Z"}, "message": "cygming.h (DWARF2_UNWIND_INFO): Allow --disable-sjlj-exceptions for TARGET_BI_ARCH to select DWARF-2 EH for...\n\n2016-05-19  Sandra Loosemore  <sandra@codesourcery.com>\n\n\tgcc/\n\t* config/i386/cygming.h (DWARF2_UNWIND_INFO): Allow \n\t--disable-sjlj-exceptions for TARGET_BI_ARCH to select DWARF-2 EH\n\tfor 32-bit mode and SEH for 64-bit.\n\t* config/i386/mingw32.h (SHARED_LIBGCC_UNDEFS_SPEC): Handle\n\tTARGET_64BIT_DEFAULT.\n\n\tlibgcc/\n\t* config.host [x86_64-*-cygwin*]: Handle tmake_eh_file for mixed \n\tdw2/seh configuration.\n\t[x86_64-*-mingw*]: Likewise.\n\nFrom-SVN: r236490", "tree": {"sha": "db220666626dc71c951ce3d429fa850cbb5e2931", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db220666626dc71c951ce3d429fa850cbb5e2931"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6befaff6662e3a750c8de2239ded13032994baf4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6befaff6662e3a750c8de2239ded13032994baf4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6befaff6662e3a750c8de2239ded13032994baf4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6befaff6662e3a750c8de2239ded13032994baf4/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8a40fef3106214c7755971f3e27c715b3968ddf4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a40fef3106214c7755971f3e27c715b3968ddf4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a40fef3106214c7755971f3e27c715b3968ddf4"}], "stats": {"total": 38, "additions": 29, "deletions": 9}, "files": [{"sha": "c5e637bdaeab087fee7198c1fbb586716204b7ce", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6befaff6662e3a750c8de2239ded13032994baf4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6befaff6662e3a750c8de2239ded13032994baf4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6befaff6662e3a750c8de2239ded13032994baf4", "patch": "@@ -1,3 +1,11 @@\n+2016-05-19  Sandra Loosemore  <sandra@codesourcery.com>\n+\n+\t* config/i386/cygming.h (DWARF2_UNWIND_INFO): Allow \n+\t--disable-sjlj-exceptions for TARGET_BI_ARCH to select DWARF-2 EH\n+\tfor 32-bit mode and SEH for 64-bit.\n+\t* config/i386/mingw32.h (SHARED_LIBGCC_UNDEFS_SPEC): Handle\n+\tTARGET_64BIT_DEFAULT.\n+\n 2016-05-16  Ryan Burn  <contact@rnburn.com>\n \n \t* Makefile.in (GTFILES): Add cilk.h and cilk-common.c."}, {"sha": "d6c2254b8000329793d135260a735a36d0513087", "filename": "gcc/config/i386/cygming.h", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6befaff6662e3a750c8de2239ded13032994baf4/gcc%2Fconfig%2Fi386%2Fcygming.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6befaff6662e3a750c8de2239ded13032994baf4/gcc%2Fconfig%2Fi386%2Fcygming.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fcygming.h?ref=6befaff6662e3a750c8de2239ded13032994baf4", "patch": "@@ -339,16 +339,13 @@ do {\t\t\t\t\t\t\\\n #define ASM_COMMENT_START \" #\"\n \n #ifndef DWARF2_UNWIND_INFO\n-/* If configured with --disable-sjlj-exceptions, use DWARF2, else\n-   default to SJLJ.  */\n+/* If configured with --disable-sjlj-exceptions, use DWARF2 for 32-bit\n+   mode else default to SJLJ.  64-bit code uses SEH unless you request\n+   SJLJ.  */\n #if  (defined (CONFIG_SJLJ_EXCEPTIONS) && !CONFIG_SJLJ_EXCEPTIONS)\n /* The logic of this #if must be kept synchronised with the logic\n-   for selecting the tmake_eh_file fragment in config.gcc.  */\n+   for selecting the tmake_eh_file fragment in libgcc/config.host.  */\n #define DWARF2_UNWIND_INFO 1\n-/* If multilib is selected break build as sjlj is required.  */\n-#if defined (TARGET_BI_ARCH)\n-#error For 64-bit windows and 32-bit based multilib version of gcc just SJLJ exceptions are supported.\n-#endif\n #else\n #define DWARF2_UNWIND_INFO 0\n #endif"}, {"sha": "0407efe7df3ab2ad208d1a08a4833614fd0773f5", "filename": "gcc/config/i386/mingw32.h", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6befaff6662e3a750c8de2239ded13032994baf4/gcc%2Fconfig%2Fi386%2Fmingw32.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6befaff6662e3a750c8de2239ded13032994baf4/gcc%2Fconfig%2Fi386%2Fmingw32.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fmingw32.h?ref=6befaff6662e3a750c8de2239ded13032994baf4", "patch": "@@ -100,10 +100,12 @@ along with GCC; see the file COPYING3.  If not see\n #if DWARF2_UNWIND_INFO\n /* DW2-unwind is just available for 32-bit mode.  */\n #if TARGET_64BIT_DEFAULT\n-#error DW2 unwind is not available for 64-bit.\n-#endif\n+#define SHARED_LIBGCC_UNDEFS_SPEC \\\n+  \"%{m32: %{shared-libgcc: -u ___register_frame_info -u ___deregister_frame_info}}\"\n+#else\n #define SHARED_LIBGCC_UNDEFS_SPEC \\\n  \"%{shared-libgcc: -u ___register_frame_info -u ___deregister_frame_info}\"\n+#endif\n #else\n #define SHARED_LIBGCC_UNDEFS_SPEC \"\"\n #endif"}, {"sha": "6b20f9bd2f9c78e347422dfd10f1d4a6d4e9358d", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6befaff6662e3a750c8de2239ded13032994baf4/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6befaff6662e3a750c8de2239ded13032994baf4/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=6befaff6662e3a750c8de2239ded13032994baf4", "patch": "@@ -1,3 +1,9 @@\n+2016-05-19  Sandra Loosemore  <sandra@codesourcery.com>\n+\n+\t* config.host [x86_64-*-cygwin*]: Handle tmake_eh_file for mixed \n+\tdw2/seh configuration.\n+\t[x86_64-*-mingw*]: Likewise.\n+\n 2016-05-10  Joel Sherrill <joel@rtems.org>\n \n \tPR libgcc/70720"}, {"sha": "7899216af6c40b3ab11f0a37119da15d7752ef8a", "filename": "libgcc/config.host", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6befaff6662e3a750c8de2239ded13032994baf4/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6befaff6662e3a750c8de2239ded13032994baf4/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=6befaff6662e3a750c8de2239ded13032994baf4", "patch": "@@ -678,6 +678,9 @@ x86_64-*-cygwin*)\n \t# This has to match the logic for DWARF2_UNWIND_INFO in gcc/config/i386/cygming.h\n \tif test x$ac_cv_sjlj_exceptions = xyes; then\n \t\ttmake_eh_file=\"i386/t-sjlj-eh\"\n+\telif test \"${host_address}\" = 32; then\n+\t        # biarch -m32 with --disable-sjlj-exceptions\n+\t     \ttmake_eh_file=\"i386/t-dw2-eh\"\n \telse\n \t\ttmake_eh_file=\"i386/t-seh-eh\"\n \tfi\n@@ -730,6 +733,10 @@ x86_64-*-mingw*)\n \t# This has to match the logic for DWARF2_UNWIND_INFO in gcc/config/i386/cygming.h\n \tif test x$ac_cv_sjlj_exceptions = xyes; then\n \t\ttmake_eh_file=\"i386/t-sjlj-eh\"\n+\telif test \"${host_address}\" = 32; then\n+\t        # biarch -m32 with --disable-sjlj-exceptions\n+\t     \ttmake_eh_file=\"i386/t-dw2-eh\"\n+\t\tmd_unwind_header=i386/w32-unwind.h\n \telse\n \t\ttmake_eh_file=\"i386/t-seh-eh\"\n \tfi"}]}