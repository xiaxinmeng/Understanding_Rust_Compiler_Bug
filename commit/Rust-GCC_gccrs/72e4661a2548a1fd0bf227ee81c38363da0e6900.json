{"sha": "72e4661a2548a1fd0bf227ee81c38363da0e6900", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzJlNDY2MWEyNTQ4YTFmZDBiZjIyN2VlODFjMzgzNjNkYTBlNjkwMA==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2005-03-21T11:49:32Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2005-03-21T11:49:32Z"}, "message": "re PR c++/20461 (ICE at  \"class 'C' does not have any field named 'f'\" error)\n\n2005-03-21  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/20461\n\tPR c++/20536\n\t* init.c (emit_mem_initializers): Don't crash on undefined\n\ttypes.\n\n2005-03-21  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/20147\n\t* semantics.c (finish_stmt_expr_expr): Return immediately\n\tif error_operand_p (expr).\n\nFrom-SVN: r96784", "tree": {"sha": "9590cde2e6abd351ecf4b43025f91a15d086cdea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9590cde2e6abd351ecf4b43025f91a15d086cdea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72e4661a2548a1fd0bf227ee81c38363da0e6900", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72e4661a2548a1fd0bf227ee81c38363da0e6900", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72e4661a2548a1fd0bf227ee81c38363da0e6900", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72e4661a2548a1fd0bf227ee81c38363da0e6900/comments", "author": null, "committer": null, "parents": [{"sha": "a16095f6eb4e9f097e828317c9869a67828ec93f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a16095f6eb4e9f097e828317c9869a67828ec93f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a16095f6eb4e9f097e828317c9869a67828ec93f"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "1f79100a21d9adc218c961e97df4b30261239d9c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72e4661a2548a1fd0bf227ee81c38363da0e6900/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72e4661a2548a1fd0bf227ee81c38363da0e6900/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=72e4661a2548a1fd0bf227ee81c38363da0e6900", "patch": "@@ -1,3 +1,16 @@\n+2005-03-21  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/20461\n+\tPR c++/20536\n+\t* init.c (emit_mem_initializers): Don't crash on undefined\n+\ttypes.\n+\n+2005-03-21  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/20147\n+\t* semantics.c (finish_stmt_expr_expr): Return immediately\n+\tif error_operand_p (expr).\n+\n 2005-03-21  Joseph S. Myers  <joseph@codesourcery.com>\n \n \t* cp-tree.h (lvalue_or_else, lvalue_p): New."}, {"sha": "ddf39bfd69006edd4cb6caf770a2ccf3edca94b1", "filename": "gcc/cp/init.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72e4661a2548a1fd0bf227ee81c38363da0e6900/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72e4661a2548a1fd0bf227ee81c38363da0e6900/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=72e4661a2548a1fd0bf227ee81c38363da0e6900", "patch": "@@ -655,6 +655,11 @@ sort_mem_initializers (tree t, tree mem_inits)\n void\n emit_mem_initializers (tree mem_inits)\n {\n+  /* We will already have issued an error message about the fact that\n+     the type is incomplete.  */\n+  if (!COMPLETE_TYPE_P (current_class_type))\n+    return;\n+  \n   /* Sort the mem-initializers into the order in which the\n      initializations should be performed.  */\n   mem_inits = sort_mem_initializers (current_class_type, mem_inits);"}, {"sha": "f0dc8c2f7d616e721945af3bfdb9da5cea0ed017", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72e4661a2548a1fd0bf227ee81c38363da0e6900/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72e4661a2548a1fd0bf227ee81c38363da0e6900/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=72e4661a2548a1fd0bf227ee81c38363da0e6900", "patch": "@@ -1523,6 +1523,9 @@ finish_stmt_expr_expr (tree expr, tree stmt_expr)\n {\n   tree result = NULL_TREE;\n \n+  if (error_operand_p (expr))\n+    return error_mark_node;\n+  \n   if (expr)\n     {\n       if (!processing_template_decl && !VOID_TYPE_P (TREE_TYPE (expr)))"}]}