{"sha": "ba8d277ab0053f5ccae84081343f791c15a36452", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmE4ZDI3N2FiMDA1M2Y1Y2NhZTg0MDgxMzQzZjc5MWMxNWEzNjQ1Mg==", "commit": {"author": {"name": "Paul Koning", "email": "ni1d@arrl.net", "date": "2018-07-14T19:15:47Z"}, "committer": {"name": "Paul Koning", "email": "pkoning@gcc.gnu.org", "date": "2018-07-14T19:15:47Z"}, "message": "* config/pdp11/pdp11.c (pdp11_rtx_costs): Bugfixes.\n\nFrom-SVN: r262659", "tree": {"sha": "5b87dcd11cc3958f0159796a6b6559ce00654f86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5b87dcd11cc3958f0159796a6b6559ce00654f86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba8d277ab0053f5ccae84081343f791c15a36452", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba8d277ab0053f5ccae84081343f791c15a36452", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba8d277ab0053f5ccae84081343f791c15a36452", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba8d277ab0053f5ccae84081343f791c15a36452/comments", "author": null, "committer": null, "parents": [{"sha": "025acb59146aa0f25a9ff4d86dd53e2421ed0a09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/025acb59146aa0f25a9ff4d86dd53e2421ed0a09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/025acb59146aa0f25a9ff4d86dd53e2421ed0a09"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "776a3c4434dabffae4210a5f282077dc4bf0633c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba8d277ab0053f5ccae84081343f791c15a36452/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba8d277ab0053f5ccae84081343f791c15a36452/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ba8d277ab0053f5ccae84081343f791c15a36452", "patch": "@@ -1,3 +1,7 @@\n+2018-07-14  Paul Koning  <ni1d@arrl.net>\n+\n+\t* config/pdp11/pdp11.c (pdp11_rtx_costs): Bugfixes.\n+\n 2018-07-13  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* lto-streamer-out.c (copy_function_or_variable): Dump info about"}, {"sha": "1bcdaed79dc9b8a89bae75e8ce9c3bc1fdd89e81", "filename": "gcc/config/pdp11/pdp11.c", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba8d277ab0053f5ccae84081343f791c15a36452/gcc%2Fconfig%2Fpdp11%2Fpdp11.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba8d277ab0053f5ccae84081343f791c15a36452/gcc%2Fconfig%2Fpdp11%2Fpdp11.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpdp11%2Fpdp11.c?ref=ba8d277ab0053f5ccae84081343f791c15a36452", "patch": "@@ -1014,6 +1014,7 @@ pdp11_rtx_costs (rtx x, machine_mode mode, int outer_code,\n   const int code = GET_CODE (x);\n   const int asize = (mode == QImode) ? 2 : GET_MODE_SIZE (mode);\n   rtx src, dest;\n+  const char *fmt;\n   \n   switch (code)\n     {\n@@ -1035,12 +1036,29 @@ pdp11_rtx_costs (rtx x, machine_mode mode, int outer_code,\n       *total = pdp11_addr_cost (x, mode, ADDR_SPACE_GENERIC, speed);\n       return true;\n     }\n+  if (GET_RTX_LENGTH (code) == 0)\n+    {\n+      if (speed)\n+\t*total = 0;\n+      else\n+\t*total = 2;\n+      return true;\n+    }\n \n   /* Pick up source and dest.  We don't necessarily use the standard\n      recursion in rtx_costs to figure the cost, because that would\n      count the destination operand twice for three-operand insns.\n      Also, this way we can catch special cases like move of zero, or\n      add one.  */\n+  fmt = GET_RTX_FORMAT (code);\n+  if (fmt[0] != 'e' || (GET_RTX_LENGTH (code) > 1 && fmt[1] != 'e'))\n+    {\n+      if (speed)\n+\t*total = 0;\n+      else\n+\t*total = 2;\n+      return true;\n+    }\n   if (GET_RTX_LENGTH (code) > 1)\n     src = XEXP (x, 1);\n   dest = XEXP (x, 0);"}]}