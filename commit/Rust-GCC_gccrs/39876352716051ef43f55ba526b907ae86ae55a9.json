{"sha": "39876352716051ef43f55ba526b907ae86ae55a9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzk4NzYzNTI3MTYwNTFlZjQzZjU1YmE1MjZiOTA3YWU4NmFlNTVhOQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-02-29T23:10:43Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-02-29T23:10:43Z"}, "message": "re PR debug/12103 (-g only crash (segfault) with a forward declared class used as a template parameter)\n\n\tPR debug/12103\n\t* class.c (update_vtable_entry_for_fn): Do not go through\n\tcovariance machinery if the type returned by an overrider is the\n\tsame as the original.\n\n\tPR debug/12103\n\t* g++.dg/debug/crash1.C: New test.\n\nFrom-SVN: r78680", "tree": {"sha": "5930b373d34c33710c6c6db49746e7cac225ad01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5930b373d34c33710c6c6db49746e7cac225ad01"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/39876352716051ef43f55ba526b907ae86ae55a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39876352716051ef43f55ba526b907ae86ae55a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39876352716051ef43f55ba526b907ae86ae55a9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39876352716051ef43f55ba526b907ae86ae55a9/comments", "author": null, "committer": null, "parents": [{"sha": "8bb915b65498bcfd9769ba28438140e4006b9d3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bb915b65498bcfd9769ba28438140e4006b9d3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bb915b65498bcfd9769ba28438140e4006b9d3e"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "979f578c0918c200985abdd04b551ecd58254257", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39876352716051ef43f55ba526b907ae86ae55a9/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39876352716051ef43f55ba526b907ae86ae55a9/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=39876352716051ef43f55ba526b907ae86ae55a9", "patch": "@@ -1,3 +1,10 @@\n+2004-02-29  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR debug/12103\n+\t* class.c (update_vtable_entry_for_fn): Do not go through\n+\tcovariance machinery if the type returned by an overrider is the\n+\tsame as the original.\n+\n 2004-02-29  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* call.c: Fix a comment typo."}, {"sha": "3a34ce45668d57231cc550113521da4cd9c46226", "filename": "gcc/cp/class.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39876352716051ef43f55ba526b907ae86ae55a9/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39876352716051ef43f55ba526b907ae86ae55a9/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=39876352716051ef43f55ba526b907ae86ae55a9", "patch": "@@ -2090,7 +2090,8 @@ update_vtable_entry_for_fn (tree t, tree binfo, tree fn, tree* virtuals,\n \t  TREE_VALUE (purpose_member\n \t\t      (BINFO_TYPE (virtual_offset),\n \t\t       CLASSTYPE_VBASECLASSES (TREE_TYPE (over_return))));\n-      else\n+      else if (!same_type_p (TREE_TYPE (over_return),\n+\t\t\t     TREE_TYPE (base_return)))\n \t{\n \t  /* There was no existing virtual thunk (which takes\n \t     precedence).  */"}, {"sha": "b5aa29d32f2cd5098c5d86b60631152850623ec1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39876352716051ef43f55ba526b907ae86ae55a9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39876352716051ef43f55ba526b907ae86ae55a9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=39876352716051ef43f55ba526b907ae86ae55a9", "patch": "@@ -1,3 +1,8 @@\n+2004-02-29  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR debug/12103\n+\t* g++.dg/debug/crash1.C: New test.\n+\n 2004-02-29  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* gcc.dg/sibcall-3.c (recurser_void1): Make it an extern"}, {"sha": "4fba256b7cce9678e288d206f5987a84ceef3b1e", "filename": "gcc/testsuite/g++.dg/debug/crash1.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39876352716051ef43f55ba526b907ae86ae55a9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fcrash1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39876352716051ef43f55ba526b907ae86ae55a9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fcrash1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fcrash1.C?ref=39876352716051ef43f55ba526b907ae86ae55a9", "patch": "@@ -0,0 +1,17 @@\n+template <typename T>\n+class foo\n+{\n+  T t;\n+};\n+\n+class bar;\n+typedef foo<bar> foobar;\n+\n+class obj\n+{\n+  virtual foobar* yeah() = 0;\n+};\n+\n+class bar : virtual public obj\n+{\n+};"}]}