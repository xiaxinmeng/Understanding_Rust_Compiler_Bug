{"sha": "28d6470f55e9975b037aa698407939635e28e4c6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjhkNjQ3MGY1NWU5OTc1YjAzN2FhNjk4NDA3OTM5NjM1ZTI4ZTRjNg==", "commit": {"author": {"name": "Javier Miranda", "email": "miranda@gnat.com", "date": "2004-10-04T15:01:03Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-10-04T15:01:03Z"}, "message": "sem_ch4.adb (Try_Object_Operation): Reformat the code to expand in-line the code corresponding to subprogram...\n\n2004-10-04  Javier Miranda  <miranda@gnat.com>\n\n\t* sem_ch4.adb (Try_Object_Operation): Reformat the code to expand\n\tin-line the code corresponding to subprogram Analyze_Actuals. In\n\taddition, analyze the actuals only in case of subprogram call.\n\nFrom-SVN: r88506", "tree": {"sha": "6722ac6069cb369357c9c483ae95acc3b4e8244f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6722ac6069cb369357c9c483ae95acc3b4e8244f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28d6470f55e9975b037aa698407939635e28e4c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28d6470f55e9975b037aa698407939635e28e4c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28d6470f55e9975b037aa698407939635e28e4c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28d6470f55e9975b037aa698407939635e28e4c6/comments", "author": null, "committer": null, "parents": [{"sha": "06237875d46c4e937110bac2c58a540915a12f2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06237875d46c4e937110bac2c58a540915a12f2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06237875d46c4e937110bac2c58a540915a12f2c"}], "stats": {"total": 61, "additions": 25, "deletions": 36}, "files": [{"sha": "85551cbde9142e7278c658428b7081c9e916ca4f", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28d6470f55e9975b037aa698407939635e28e4c6/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28d6470f55e9975b037aa698407939635e28e4c6/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=28d6470f55e9975b037aa698407939635e28e4c6", "patch": "@@ -1,3 +1,9 @@\n+2004-10-04  Javier Miranda  <miranda@gnat.com>\n+\n+\t* sem_ch4.adb (Try_Object_Operation): Reformat the code to expand\n+\tin-line the code corresponding to subprogram Analyze_Actuals. In\n+\taddition, analyze the actuals only in case of subprogram call.\n+\n 2004-10-04  Ed Falis  <falis@gnat.com>\n \n \t* s-vxwork-x86.ads: (FP_CONTEXT): Defined to be correct size"}, {"sha": "a63d78e04e8cd5b081bce96e6b35f3f310b65cbe", "filename": "gcc/ada/sem_ch4.adb", "status": "modified", "additions": 19, "deletions": 36, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28d6470f55e9975b037aa698407939635e28e4c6/gcc%2Fada%2Fsem_ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28d6470f55e9975b037aa698407939635e28e4c6/gcc%2Fada%2Fsem_ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch4.adb?ref=28d6470f55e9975b037aa698407939635e28e4c6", "patch": "@@ -4637,19 +4637,19 @@ package body Sem_Ch4 is\n    --------------------------\n \n    function Try_Object_Operation (N : Node_Id) return Boolean is\n-      Loc      : constant Source_Ptr := Sloc (N);\n-      Obj      : constant Node_Id := Prefix (N);\n-      Obj_Type : Entity_Id := Etype (Obj);\n-      Subprog  : constant Node_Id := Selector_Name (N);\n-\n+      K               : constant Node_Kind  := Nkind (Parent (N));\n+      Loc             : constant Source_Ptr := Sloc (N);\n+      Is_Subprg_Call  : constant Boolean    := K = N_Procedure_Call_Statement\n+                                                or else K = N_Function_Call;\n+      Obj             : constant Node_Id    := Prefix (N);\n+      Subprog         : constant Node_Id    := Selector_Name (N);\n+\n+      Actual          : Node_Id;\n       Call_Node       : Node_Id;\n       Call_Node_Case  : Node_Id := Empty;\n       First_Actual    : Node_Id;\n       Node_To_Replace : Node_Id;\n-\n-      procedure Analyze_Actuals;\n-      --  If the parent of N is a subprogram call, then analyze the actual\n-      --  parameters of the parent of N.\n+      Obj_Type        : Entity_Id := Etype (Obj);\n \n       procedure Complete_Object_Operation\n         (Call_Node       : Node_Id;\n@@ -4681,32 +4681,6 @@ package body Sem_Ch4 is\n       --  Traverse the list of primitive subprograms looking for a subprogram\n       --  than matches Subprog.\n \n-      ---------------------\n-      -- Analyze_Actuals --\n-      ---------------------\n-\n-      procedure Analyze_Actuals is\n-         Actual : Node_Id;\n-\n-      begin\n-         if (Nkind (Parent (N)) = N_Procedure_Call_Statement\n-               or else\n-             Nkind (Parent (N)) = N_Function_Call)\n-\n-            --  Avoid recursive calls\n-\n-           and then N /= First (Parameter_Associations (Parent (N)))\n-         then\n-            Actual := First (Parameter_Associations (Parent (N)));\n-            while Present (Actual) loop\n-               Analyze (Actual);\n-               Check_Parameterless_Call (Actual);\n-               Next (Actual);\n-\n-            end loop;\n-         end if;\n-      end Analyze_Actuals;\n-\n       -------------------------------\n       -- Complete_Object_Operation --\n       -------------------------------\n@@ -4993,7 +4967,16 @@ package body Sem_Ch4 is\n          Obj_Type := Etype (Class_Wide_Type (Obj_Type));\n       end if;\n \n-      Analyze_Actuals;\n+      --  Analyze the actuals in case of subprogram call\n+\n+      if Is_Subprg_Call and then N = Name (Parent (N)) then\n+         Actual := First (Parameter_Associations (Parent (N)));\n+         while Present (Actual) loop\n+            Analyze (Actual);\n+            Check_Parameterless_Call (Actual);\n+            Next (Actual);\n+         end loop;\n+      end if;\n \n       --  If the object is of an Access type, explicit dereference is\n       --  required."}]}