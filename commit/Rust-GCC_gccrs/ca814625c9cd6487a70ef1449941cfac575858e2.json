{"sha": "ca814625c9cd6487a70ef1449941cfac575858e2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2E4MTQ2MjVjOWNkNjQ4N2E3MGVmMTQ0OTk0MWNmYWM1NzU4NThlMg==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2011-12-15T12:43:48Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-12-15T12:43:48Z"}, "message": "re PR debug/51564 (ICE in force_type_die, at dwarf2out.c:19288)\n\n2011-12-15  Richard Guenther  <rguenther@suse.de>\n\n\tPR lto/51564\n\t* tree.h (REGISTER_DEFS_IN_THIS_STMT, NECESSARY,\n\tSTMT_IN_SSA_EDGE_WORKLIST): Remove no longer existing flag\n\tuses documentation.\n\t(TREE_ASM_WRITTEN): Update documentation to mention its use\n\ton TYPE_DECLs from debug info generation.\n\t* tree-streamer-out.c (pack_ts_base_value_fields): Stream\n\tTREE_ASM_WRITTEN as always zero for TYPE_DECLs, similar to\n\tall other types.\n\n\t* g++.dg/lto/pr51564-1_0.C: New testcase.\n\nFrom-SVN: r182367", "tree": {"sha": "249267a930e988bb311aef32907111b08680325b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/249267a930e988bb311aef32907111b08680325b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca814625c9cd6487a70ef1449941cfac575858e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca814625c9cd6487a70ef1449941cfac575858e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca814625c9cd6487a70ef1449941cfac575858e2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca814625c9cd6487a70ef1449941cfac575858e2/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ba986b7d2b9953fcdd47fc2b81ecbd992e04c519", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba986b7d2b9953fcdd47fc2b81ecbd992e04c519", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba986b7d2b9953fcdd47fc2b81ecbd992e04c519"}], "stats": {"total": 45, "additions": 32, "deletions": 13}, "files": [{"sha": "cdfac22d83ffe4b7f69a6bc85b0fe34f0842bb93", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca814625c9cd6487a70ef1449941cfac575858e2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca814625c9cd6487a70ef1449941cfac575858e2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ca814625c9cd6487a70ef1449941cfac575858e2", "patch": "@@ -1,3 +1,15 @@\n+2011-12-15  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR lto/51564\n+\t* tree.h (REGISTER_DEFS_IN_THIS_STMT, NECESSARY,\n+\tSTMT_IN_SSA_EDGE_WORKLIST): Remove no longer existing flag\n+\tuses documentation.\n+\t(TREE_ASM_WRITTEN): Update documentation to mention its use\n+\ton TYPE_DECLs from debug info generation.\n+\t* tree-streamer-out.c (pack_ts_base_value_fields): Stream\n+\tTREE_ASM_WRITTEN as always zero for TYPE_DECLs, similar to\n+\tall other types.\n+\n 2011-12-15  Georg-Johann Lay  <avr@gjlay.de>\n \n \tPR target/51050"}, {"sha": "212e455c6e662174c248c323c81e9a9071226c3a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca814625c9cd6487a70ef1449941cfac575858e2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca814625c9cd6487a70ef1449941cfac575858e2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ca814625c9cd6487a70ef1449941cfac575858e2", "patch": "@@ -1,3 +1,8 @@\n+2011-12-15  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR lto/51564\n+\t* g++.dg/lto/pr51564-1_0.C: New testcase.\n+\n 2011-12-15  Jonathan Wakely  <jwakely.gcc@gmail.com>\n \n \tPR libstdc++/51365"}, {"sha": "5765cb196b8c922f48fb1b8f80799fa9da335925", "filename": "gcc/testsuite/g++.dg/lto/pr51564-1_0.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca814625c9cd6487a70ef1449941cfac575858e2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr51564-1_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca814625c9cd6487a70ef1449941cfac575858e2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr51564-1_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr51564-1_0.C?ref=ca814625c9cd6487a70ef1449941cfac575858e2", "patch": "@@ -0,0 +1,10 @@\n+// { dg-lto-do link }\n+// { dg-lto-options { { -flto -g } } }\n+\n+typedef int T;\n+void foo(void) {}\n+int main()\n+{\n+  foo();\n+  using ::T;\n+}"}, {"sha": "897c2115807d3ce9062f12b371e7ad9f7b0a1abf", "filename": "gcc/tree-streamer-out.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca814625c9cd6487a70ef1449941cfac575858e2/gcc%2Ftree-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca814625c9cd6487a70ef1449941cfac575858e2/gcc%2Ftree-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-streamer-out.c?ref=ca814625c9cd6487a70ef1449941cfac575858e2", "patch": "@@ -88,7 +88,8 @@ pack_ts_base_value_fields (struct bitpack_d *bp, tree expr)\n   else\n     bp_pack_value (bp, 0, 1);\n   /* We write debug info two times, do not confuse the second one.  */\n-  bp_pack_value (bp, TYPE_P (expr) ? 0 : TREE_ASM_WRITTEN (expr), 1);\n+  bp_pack_value (bp, ((TYPE_P (expr) || TREE_CODE (expr) == TYPE_DECL)\n+\t\t      ? 0 : TREE_ASM_WRITTEN (expr)), 1);\n   if (TYPE_P (expr))\n     bp_pack_value (bp, TYPE_ARTIFICIAL (expr), 1);\n   else"}, {"sha": "2da054844c20e2125c6084c7b602a9fc4a902d66", "filename": "gcc/tree.h", "status": "modified", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca814625c9cd6487a70ef1449941cfac575858e2/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca814625c9cd6487a70ef1449941cfac575858e2/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=ca814625c9cd6487a70ef1449941cfac575858e2", "patch": "@@ -644,19 +644,13 @@ struct GTY(()) tree_common {\n        DECL_UNSIGNED in\n            all decls\n \n-       REGISTER_DEFS_IN_THIS_STMT in\n-           all expressions (tree-into-ssa.c)\n-\n    asm_written_flag:\n \n        TREE_ASM_WRITTEN in\n-           VAR_DECL, FUNCTION_DECL\n+           VAR_DECL, FUNCTION_DECL, TYPE_DECL\n            RECORD_TYPE, UNION_TYPE, QUAL_UNION_TYPE\n            BLOCK, SSA_NAME, STRING_CST\n \n-       NECESSARY in\n-           all expressions (tree-ssa-dce.c, tree-ssa-pre.c)\n-\n    used_flag:\n \n        TREE_USED in\n@@ -685,9 +679,6 @@ struct GTY(()) tree_common {\n        IDENTIFIER_TRANSPARENT_ALIAS in\n            IDENTIFIER_NODE\n \n-       STMT_IN_SSA_EDGE_WORKLIST in\n-           all expressions (tree-ssa-propagate.c)\n-\n    visited:\n \n        TREE_VISITED in\n@@ -1369,8 +1360,8 @@ extern void omp_clause_range_check_failed (const_tree, const char *, int,\n    Nonzero in a FUNCTION_DECL means that the function has been compiled.\n    This is interesting in an inline function, since it might not need\n    to be compiled separately.\n-   Nonzero in a RECORD_TYPE, UNION_TYPE, QUAL_UNION_TYPE or ENUMERAL_TYPE\n-   if the debugging info for the type has been written.\n+   Nonzero in a RECORD_TYPE, UNION_TYPE, QUAL_UNION_TYPE, ENUMERAL_TYPE\n+   or TYPE_DECL if the debugging info for the type has been written.\n    In a BLOCK node, nonzero if reorder_blocks has already seen this block.\n    In an SSA_NAME node, nonzero if the SSA_NAME occurs in an abnormal\n    PHI node.  */"}]}