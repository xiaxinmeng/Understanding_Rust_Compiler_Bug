{"sha": "a38f74e823ec0e805c1a99f25198b33e76b97717", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTM4Zjc0ZTgyM2VjMGU4MDVjMWE5OWYyNTE5OGIzM2U3NmI5NzcxNw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-04-23T00:41:03Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-04-23T00:41:03Z"}, "message": "cmd/go: bring in final version of gccgo pkg-config support\n    \n    This updates gccgo to the final version of https://golang.org/cl/18790,\n    by Michael Hudson-Doyle.\n    \n    Update golang/go#11739.\n    \n    Reviewed-on: https://go-review.googlesource.com/22400\n\nFrom-SVN: r235380", "tree": {"sha": "9b4b729a487dd97f86d07f6cf705b202eb5d07a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b4b729a487dd97f86d07f6cf705b202eb5d07a5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a38f74e823ec0e805c1a99f25198b33e76b97717", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a38f74e823ec0e805c1a99f25198b33e76b97717", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a38f74e823ec0e805c1a99f25198b33e76b97717", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a38f74e823ec0e805c1a99f25198b33e76b97717/comments", "author": null, "committer": null, "parents": [{"sha": "cd32366081ec90f860942988a991d0a7131c1ed2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd32366081ec90f860942988a991d0a7131c1ed2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd32366081ec90f860942988a991d0a7131c1ed2"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "5c8cd7d6f18d670c4f83c424192a489c636a89c2", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a38f74e823ec0e805c1a99f25198b33e76b97717/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a38f74e823ec0e805c1a99f25198b33e76b97717/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=a38f74e823ec0e805c1a99f25198b33e76b97717", "patch": "@@ -1,4 +1,4 @@\n-ff29ea8e4e69eb94958aef4388da09a61b2b52b6\n+97b358f525584e45fa2e3d83fc7d3a091900927a\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "d7a4a43093d226c3cd5b0fc065ff2524573c6153", "filename": "libgo/go/cmd/go/build.go", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a38f74e823ec0e805c1a99f25198b33e76b97717/libgo%2Fgo%2Fcmd%2Fgo%2Fbuild.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a38f74e823ec0e805c1a99f25198b33e76b97717/libgo%2Fgo%2Fcmd%2Fgo%2Fbuild.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fcmd%2Fgo%2Fbuild.go?ref=a38f74e823ec0e805c1a99f25198b33e76b97717", "patch": "@@ -2647,9 +2647,18 @@ func (tools gccgoToolchain) ld(b *builder, root *action, out string, allactions\n \t\tif err != nil {\n \t\t\treturn err\n \t\t}\n+\t\tconst ldflagsPrefix = \"_CGO_LDFLAGS=\"\n \t\tfor _, line := range strings.Split(string(flags), \"\\n\") {\n-\t\t\tif strings.HasPrefix(line, \"_CGO_LDFLAGS=\") {\n-\t\t\t\tcgoldflags = append(cgoldflags, strings.Fields(line[13:])...)\n+\t\t\tif strings.HasPrefix(line, ldflagsPrefix) {\n+\t\t\t\tnewFlags := strings.Fields(line[len(ldflagsPrefix):])\n+\t\t\t\tfor _, flag := range newFlags {\n+\t\t\t\t\t// Every _cgo_flags file has -g and -O2 in _CGO_LDFLAGS\n+\t\t\t\t\t// but they don't mean anything to the linker so filter\n+\t\t\t\t\t// them out.\n+\t\t\t\t\tif flag != \"-g\" && !strings.HasPrefix(flag, \"-O\") {\n+\t\t\t\t\t\tcgoldflags = append(cgoldflags, flag)\n+\t\t\t\t\t}\n+\t\t\t\t}\n \t\t\t}\n \t\t}\n \t\treturn nil"}]}