{"sha": "f10a4de1a566db1d66c8a2d61d1ab43003232d22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjEwYTRkZTFhNTY2ZGIxZDY2YzhhMmQ2MWQxYWI0MzAwMzIzMmQyMg==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gnu.org", "date": "1999-03-05T00:19:16Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-03-05T00:19:16Z"}, "message": "linuxlibc1.mt (MT_CFLAGS): Add -D_G_STDIO_USES_LIBIO -D_G_HAVE_WEAK_SYMBOL.\n\n\t* config/linuxlibc1.mt (MT_CFLAGS): Add -D_G_STDIO_USES_LIBIO\n\t-D_G_HAVE_WEAK_SYMBOL.\n\t* genops.c: Add the proper weak alias if _G_STDIO_USES_LIBIO\n\tand _G_HAVE_WEAK_SYMBOL are defined.\n\t* iofclose.c: Likewise.\n\t* iofeof.c: Likewise.\n\t* ioferror.c: Likewise.\n\t* iogetc.c: Likewise.\n\t* ioputc.c: Likewise.\n\t* iovsprintf.c: Likewise.\n\t* iovsscanf.c: Likewise.\n\nFrom-SVN: r25590", "tree": {"sha": "5af9d9b143a1a23c3ff2ca3fb814d0d0e413e05a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5af9d9b143a1a23c3ff2ca3fb814d0d0e413e05a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f10a4de1a566db1d66c8a2d61d1ab43003232d22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f10a4de1a566db1d66c8a2d61d1ab43003232d22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f10a4de1a566db1d66c8a2d61d1ab43003232d22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f10a4de1a566db1d66c8a2d61d1ab43003232d22/comments", "author": null, "committer": null, "parents": [{"sha": "6f58f819703fa5d97547cb7d8f079975afb02b03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f58f819703fa5d97547cb7d8f079975afb02b03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f58f819703fa5d97547cb7d8f079975afb02b03"}], "stats": {"total": 49, "additions": 36, "deletions": 13}, "files": [{"sha": "db76f16398797796ab68004b6627e5a725830ffe", "filename": "libio/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2FChangeLog?ref=f10a4de1a566db1d66c8a2d61d1ab43003232d22", "patch": "@@ -1,3 +1,18 @@\n+Fri Mar  5 01:15:15 1999  H.J. Lu  (hjl@gnu.org)\n+\n+        * config/linuxlibc1.mt (MT_CFLAGS): Add -D_G_STDIO_USES_LIBIO\n+        -D_G_HAVE_WEAK_SYMBOL.\n+\n+        * genops.c: Add the proper weak alias if _G_STDIO_USES_LIBIO\n+        and _G_HAVE_WEAK_SYMBOL are defined.\n+        * iofclose.c: Likewise.\n+        * iofeof.c: Likewise.\n+        * ioferror.c: Likewise.\n+        * iogetc.c: Likewise.\n+        * ioputc.c: Likewise.\n+        * iovsprintf.c: Likewise.\n+        * iovsscanf.c: Likewise.\n+\n Wed Feb 10 09:25:48 1999  Mumit Khan  <khan@xraylith.wisc.edu>\n \n \t* gen-params (VTABLE_LABEL_PREFIX): Handle windows32. "}, {"sha": "742cbf18534290b751b57b37fc70d249fd220841", "filename": "libio/config/linuxlibc1.mt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fconfig%2Flinuxlibc1.mt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fconfig%2Flinuxlibc1.mt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fconfig%2Flinuxlibc1.mt?ref=f10a4de1a566db1d66c8a2d61d1ab43003232d22", "patch": "@@ -23,4 +23,4 @@ USER_INCLUDES=PlotFile.h SFile.h builtinbuf.h editbuf.h fstream.h \\\n \tstreambuf.h strfile.h strstream.h libio.h\n \n # A bad kludge\n-MT_CFLAGS=-D_G_HAVE_MMAP\n+MT_CFLAGS=-D_G_HAVE_MMAP -D_G_STDIO_USES_LIBIO -D_G_HAVE_WEAK_SYMBOL"}, {"sha": "b899e150afabf483e32ebd24b8dc4d033e62fcde", "filename": "libio/genops.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fgenops.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fgenops.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fgenops.c?ref=f10a4de1a566db1d66c8a2d61d1ab43003232d22", "patch": "@@ -937,6 +937,8 @@ __io_defs io_defs__;\n \n #ifdef weak_alias\n weak_alias (_IO_cleanup, _cleanup)\n+#elif defined(_G_STDIO_USES_LIBIO) && defined(_G_HAVE_WEAK_SYMBOL)\n+void _cleanup () __attribute__ ((weak, alias (\"_IO_cleanup\")));\n #endif\n \n #ifdef text_set_element"}, {"sha": "7db336c5d539a8ca071401b1502051af827bdfb2", "filename": "libio/iofclose.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fiofclose.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fiofclose.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fiofclose.c?ref=f10a4de1a566db1d66c8a2d61d1ab43003232d22", "patch": "@@ -55,8 +55,6 @@ _IO_fclose (fp)\n \n #ifdef weak_alias\n weak_alias (_IO_fclose, fclose)\n-#else\n-#ifdef __linux__\n-#pragma weak fclose = _IO_fclose\n-#endif\n+#elif defined(_G_STDIO_USES_LIBIO) && defined(_G_HAVE_WEAK_SYMBOL)\n+int fclose (_IO_FILE *) __attribute__ ((weak, alias(\"_IO_fclose\")));\n #endif"}, {"sha": "7bf8cba285be5a8d6979eacbcd02feafe966d18a", "filename": "libio/iofeof.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fiofeof.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fiofeof.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fiofeof.c?ref=f10a4de1a566db1d66c8a2d61d1ab43003232d22", "patch": "@@ -40,4 +40,6 @@ _IO_feof (fp)\n \n #ifdef weak_alias\n weak_alias (_IO_feof, feof)\n+#elif defined(_G_STDIO_USES_LIBIO) && defined(_G_HAVE_WEAK_SYMBOL)\n+int feof (_IO_FILE *) __attribute__ ((weak, alias(\"_IO_feof\")));\n #endif"}, {"sha": "3019e796a1f6a31ba1d7f188bde4c1de29a2f70c", "filename": "libio/ioferror.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fioferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fioferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fioferror.c?ref=f10a4de1a566db1d66c8a2d61d1ab43003232d22", "patch": "@@ -40,4 +40,6 @@ _IO_ferror (fp)\n \n #ifdef weak_alias\n weak_alias (_IO_ferror, ferror)\n+#elif defined(_G_STDIO_USES_LIBIO) && defined(_G_HAVE_WEAK_SYMBOL)\n+int ferror (_IO_FILE *) __attribute__ ((weak, alias(\"_IO_ferror\")));\n #endif"}, {"sha": "6a11e47334dc5ad5612e209c2f001b5a92c54ad6", "filename": "libio/iogetc.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fiogetc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fiogetc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fiogetc.c?ref=f10a4de1a566db1d66c8a2d61d1ab43003232d22", "patch": "@@ -45,4 +45,6 @@ _IO_getc (fp)\n \n #ifdef weak_alias\n weak_alias (_IO_getc, getc)\n+#elif defined(_G_STDIO_USES_LIBIO) && defined(_G_HAVE_WEAK_SYMBOL)\n+int getc (_IO_FILE *) __attribute__ ((weak, alias(\"_IO_getc\")));\n #endif"}, {"sha": "38a3ec9a00b77554443473592c3d0009108a38a2", "filename": "libio/ioputc.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fioputc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fioputc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fioputc.c?ref=f10a4de1a566db1d66c8a2d61d1ab43003232d22", "patch": "@@ -39,4 +39,6 @@ _IO_putc (c, fp)\n \n #ifdef weak_alias\n weak_alias (_IO_putc, putc)\n+#elif defined(_G_STDIO_USES_LIBIO) && defined(_G_HAVE_WEAK_SYMBOL)\n+int putc (int, _IO_FILE *) __attribute__ ((weak, alias(\"_IO_putc\")));\n #endif"}, {"sha": "617a5888405dce55a0a883ec29642793c8292d89", "filename": "libio/iovsprintf.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fiovsprintf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fiovsprintf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fiovsprintf.c?ref=f10a4de1a566db1d66c8a2d61d1ab43003232d22", "patch": "@@ -54,8 +54,7 @@ _IO_vsprintf (string, format, args)\n \n #ifdef weak_alias\n weak_alias (_IO_vsprintf, vsprintf)\n-#else\n-#ifdef __linux__\n-#pragma weak vsprintf = _IO_vsprintf\n-#endif\n+#elif defined(_G_STDIO_USES_LIBIO) && defined(_G_HAVE_WEAK_SYMBOL)\n+int vsprintf (char *, const char *, _IO_va_list)\n+\t      __attribute__ ((weak, alias(\"_IO_vsprintf\")));\n #endif"}, {"sha": "6bdc3ccf01828503d8c48c3cf207e28003883d16", "filename": "libio/iovsscanf.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fiovsscanf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f10a4de1a566db1d66c8a2d61d1ab43003232d22/libio%2Fiovsscanf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libio%2Fiovsscanf.c?ref=f10a4de1a566db1d66c8a2d61d1ab43003232d22", "patch": "@@ -51,8 +51,9 @@ _IO_vsscanf (string, format, args)\n #ifdef weak_alias\n weak_alias (_IO_vsscanf, __vsscanf)\n weak_alias (_IO_vsscanf, vsscanf)\n-#else\n-#ifdef __linux__\n-#pragma weak vsscanf = _IO_vsscanf\n-#endif\n+#elif defined(_G_STDIO_USES_LIBIO) && defined(_G_HAVE_WEAK_SYMBOL)\n+int __vsscanf (const char *, const char *, _IO_va_list)\n+\t    __attribute__ ((weak, alias(\"_IO_vsscanf\")));\n+int vsscanf (const char *, const char *, _IO_va_list)\n+\t    __attribute__ ((weak, alias(\"_IO_vsscanf\")));\n #endif"}]}