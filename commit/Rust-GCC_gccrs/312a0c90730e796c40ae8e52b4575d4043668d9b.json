{"sha": "312a0c90730e796c40ae8e52b4575d4043668d9b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzEyYTBjOTA3MzBlNzk2YzQwYWU4ZTUyYjQ1NzVkNDA0MzY2OGQ5Yg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@markmitchell.com", "date": "1998-05-26T07:02:37Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-05-26T07:02:37Z"}, "message": "decl.c (pushtag): Avoid crashing on erroneous input.\n\n1998-05-25  Mark Mitchell  <mark@markmitchell.com>\n\t* decl.c (pushtag): Avoid crashing on erroneous input.\n\nFrom-SVN: r20056", "tree": {"sha": "0af7ace6b5a2d16031018e312c7cf73fdcf21174", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0af7ace6b5a2d16031018e312c7cf73fdcf21174"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/312a0c90730e796c40ae8e52b4575d4043668d9b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/312a0c90730e796c40ae8e52b4575d4043668d9b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/312a0c90730e796c40ae8e52b4575d4043668d9b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/312a0c90730e796c40ae8e52b4575d4043668d9b/comments", "author": null, "committer": null, "parents": [{"sha": "954b0af841e6d7cee4754d4d8a93878ffa38edee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/954b0af841e6d7cee4754d4d8a93878ffa38edee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/954b0af841e6d7cee4754d4d8a93878ffa38edee"}], "stats": {"total": 37, "additions": 27, "deletions": 10}, "files": [{"sha": "c04f9c89c1b6ff5db49fafe94ffb16821adb1ff2", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/312a0c90730e796c40ae8e52b4575d4043668d9b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/312a0c90730e796c40ae8e52b4575d4043668d9b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=312a0c90730e796c40ae8e52b4575d4043668d9b", "patch": "@@ -1,3 +1,7 @@\n+1998-05-26  Mark Mitchell  <mark@markmitchell.com>\n+\n+\t* decl.c (pushtag): Avoid crashing on erroneous input.\n+\n 1998-05-25  Martin v. L\ufffdwis  <loewis@informatik.hu-berlin.de>\n \n \t* decl.c (push_namespace): Only produce one unique name for"}, {"sha": "804e2251b8dbdec3a83289822b91071e5054c1da", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 13, "deletions": 10, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/312a0c90730e796c40ae8e52b4575d4043668d9b/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/312a0c90730e796c40ae8e52b4575d4043668d9b/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=312a0c90730e796c40ae8e52b4575d4043668d9b", "patch": "@@ -2236,7 +2236,16 @@ pushtag (name, type, globalize)\n \t  TYPE_NAME (type) = d;\n \t  DECL_CONTEXT (d) = context;\n \n-\t  if (IS_AGGR_TYPE (type)\n+\t  if (processing_template_parmlist)\n+\t    /* You can't declare a new template type in a template\n+\t       parameter list.  But, you can declare a non-template\n+\t       type:\n+\n+\t         template <class A*> struct S;\n+\n+\t       is a forward-declaration of `A'.  */\n+\t    ;\n+\t  else if (IS_AGGR_TYPE (type)\n \t      && (/* If !GLOBALIZE then we are looking at a\n \t\t     definition.  It may not be a primary template.\n \t\t     (For example, in:\n@@ -2255,15 +2264,9 @@ pushtag (name, type, globalize)\n \t\t         friend class S2; \n \t\t       };\n \n-\t\t     declares S2 to be at global scope.  We must be\n-\t\t     careful, however, of the following case:\n-\n-\t\t       template <class A*> struct S;\n-\n-\t\t     which declares a non-template class `A'.  */\n-\t\t  || (!processing_template_parmlist\n-\t\t      && (processing_template_decl > \n-\t\t\t  template_class_depth (current_class_type)))))\n+\t\t     declares S2 to be at global scope.  */\n+\t\t  || (processing_template_decl > \n+\t\t      template_class_depth (current_class_type))))\n \t    {\n \t      d = push_template_decl_real (d, globalize);\n \t      /* If the current binding level is the binding level for"}, {"sha": "9ee7b2c665ded7163e5116f320497fd03becc5e3", "filename": "gcc/testsuite/g++.old-deja/g++.pt/crash7.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/312a0c90730e796c40ae8e52b4575d4043668d9b/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/312a0c90730e796c40ae8e52b4575d4043668d9b/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash7.C?ref=312a0c90730e796c40ae8e52b4575d4043668d9b", "patch": "@@ -0,0 +1,10 @@\n+// Build don't link:\n+\n+class foo \n+{\n+};\n+\n+template <class T : public foo> // ERROR - base clause\n+struct bar\n+{\n+};"}]}