{"sha": "75540fea2d9274160057355dcaca3c70428f22d1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU1NDBmZWEyZDkyNzQxNjAwNTczNTVkY2FjYTNjNzA0MjhmMjJkMQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-12-22T19:21:01Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-12-22T19:21:01Z"}, "message": "(find_splittable_givs): For rewritting illegal init\ninsn, use force_operand instead of emit_iv_add_mult.\n\nFrom-SVN: r6267", "tree": {"sha": "7d35a9f5e09f7a3bbbcf695a91dc1889295e5571", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7d35a9f5e09f7a3bbbcf695a91dc1889295e5571"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75540fea2d9274160057355dcaca3c70428f22d1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75540fea2d9274160057355dcaca3c70428f22d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75540fea2d9274160057355dcaca3c70428f22d1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75540fea2d9274160057355dcaca3c70428f22d1/comments", "author": null, "committer": null, "parents": [{"sha": "1810c3fa48bfd1071b9a53d6eab3969f45b77c8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1810c3fa48bfd1071b9a53d6eab3969f45b77c8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1810c3fa48bfd1071b9a53d6eab3969f45b77c8f"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "eac1e955aa17f021fd272b688a5be50a8307f5c0", "filename": "gcc/unroll.c", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75540fea2d9274160057355dcaca3c70428f22d1/gcc%2Funroll.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75540fea2d9274160057355dcaca3c70428f22d1/gcc%2Funroll.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funroll.c?ref=75540fea2d9274160057355dcaca3c70428f22d1", "patch": "@@ -2669,9 +2669,22 @@ find_splittable_givs (bl, unroll_type, loop_start, loop_end, increment,\n \t\t\t\t    loop_start);\n \t\t  if (recog_memoized (PREV_INSN (loop_start)) < 0)\n \t\t    {\n+\t\t      rtx sequence, ret;\n+\n+\t\t      /* We can't use bl->initial_value to compute the initial\n+\t\t\t value, because the loop may have been preconditioned.\n+\t\t\t We must calculate it from NEW_REG.  Try using\n+\t\t\t force_operand instead of emit_iv_add_mult.  */\n \t\t      delete_insn (PREV_INSN (loop_start));\n-\t\t      emit_iv_add_mult (bl->initial_value, v->mult_val,\n-\t\t\t\t\tv->add_val, tem, loop_start);\n+\n+\t\t      start_sequence ();\n+\t\t      ret = force_operand (v->new_reg, tem);\n+\t\t      if (ret != tem)\n+\t\t\temit_move_insn (tem, ret);\n+\t\t      sequence = gen_sequence ();\n+\t\t      end_sequence ();\n+\t\t      emit_insn_before (sequence, loop_start);\n+\n \t\t      if (loop_dump_stream)\n \t\t\tfprintf (loop_dump_stream,\n \t\t\t\t \"Illegal init insn, rewritten.\\n\");"}]}