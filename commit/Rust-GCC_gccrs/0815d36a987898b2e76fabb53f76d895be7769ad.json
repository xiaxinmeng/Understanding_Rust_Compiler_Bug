{"sha": "0815d36a987898b2e76fabb53f76d895be7769ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDgxNWQzNmE5ODc4OThiMmU3NmZhYmI1M2Y3NmQ4OTViZTc3NjlhZA==", "commit": {"author": {"name": "Gary Dismukes", "email": "dismukes@gnat.com", "date": "2001-12-05T02:00:43Z"}, "committer": {"name": "Geert Bosch", "email": "bosch@gcc.gnu.org", "date": "2001-12-05T02:00:43Z"}, "message": "* layout.adb:\n\n\t(Get_Max_Size): Fix \"start of processing\" comment to say Get_Max_Size.\n\t(Discrimify): Go back to setting the Etypes of the selected component\n\tbecause the Vname component does not exist at this point and will\n\tfail name resolution. Also set Analyzed.\n\tRemove with and use of Sem_Res.\n\nFrom-SVN: r47648", "tree": {"sha": "6aa894fba53b92b9e38282a7dd6c7f0563a74e08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6aa894fba53b92b9e38282a7dd6c7f0563a74e08"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0815d36a987898b2e76fabb53f76d895be7769ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0815d36a987898b2e76fabb53f76d895be7769ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0815d36a987898b2e76fabb53f76d895be7769ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0815d36a987898b2e76fabb53f76d895be7769ad/comments", "author": null, "committer": null, "parents": [{"sha": "edc0f304c72f55b1087bd15ae221273fc524a328", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edc0f304c72f55b1087bd15ae221273fc524a328", "html_url": "https://github.com/Rust-GCC/gccrs/commit/edc0f304c72f55b1087bd15ae221273fc524a328"}], "stats": {"total": 21, "additions": 18, "deletions": 3}, "files": [{"sha": "ec3174429ef3d795c2ac7a78b0e4ace877482bd1", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0815d36a987898b2e76fabb53f76d895be7769ad/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0815d36a987898b2e76fabb53f76d895be7769ad/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=0815d36a987898b2e76fabb53f76d895be7769ad", "patch": "@@ -1,3 +1,12 @@\n+2001-12-04  Gary Dismukes <dismukes@gnat.com>\n+\t\n+\t* layout.adb:\n+\t(Get_Max_Size): Fix \"start of processing\" comment to say Get_Max_Size.\n+\t(Discrimify): Go back to setting the Etypes of the selected component\n+\tbecause the Vname component does not exist at this point and will \n+\tfail name resolution. Also set Analyzed.\n+\tRemove with and use of Sem_Res.\n+\n 2001-12-04  Arnaud Charlet <charlet@gnat.com>\n \n \t* Makefile.in: (HIE_SOURCES): add s-fat*."}, {"sha": "b3c5401e0bc993a94f965d64b21c78410eb56863", "filename": "gcc/ada/layout.adb", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0815d36a987898b2e76fabb53f76d895be7769ad/gcc%2Fada%2Flayout.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0815d36a987898b2e76fabb53f76d895be7769ad/gcc%2Fada%2Flayout.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flayout.adb?ref=0815d36a987898b2e76fabb53f76d895be7769ad", "patch": "@@ -39,7 +39,7 @@ with Repinfo;  use Repinfo;\n with Sem;      use Sem;\n with Sem_Ch13; use Sem_Ch13;\n with Sem_Eval; use Sem_Eval;\n-with Sem_Res;  use Sem_Res;\n+--  with Sem_Res;  use Sem_Res;\n with Sem_Util; use Sem_Util;\n with Sinfo;    use Sinfo;\n with Snames;   use Snames;\n@@ -638,7 +638,7 @@ package body Layout is\n          end if;\n       end Min_Discrim;\n \n-   --  Start of processing for Layout_Array_Type\n+   --  Start of processing for Get_Max_Size\n \n    begin\n       pragma Assert (Size_Depends_On_Discriminant (E));\n@@ -903,7 +903,13 @@ package body Layout is\n                 Prefix        => Make_Identifier (Loc, Chars => Vname),\n                 Selector_Name => New_Occurrence_Of (Entity (N), Loc));\n \n-            Analyze_And_Resolve (N, Typ);\n+            --  Set the Etype attributes of the selected name and its prefix.\n+            --  Analyze_And_Resolve can't be called here because the Vname\n+            --  entity denoted by the prefix will not yet exist (it's created\n+            --  by SO_Ref_From_Expr, called at the end of Layout_Array_Type).\n+\n+            Set_Etype (Prefix (N), Vtyp);\n+            Set_Etype (N, Typ);\n          end if;\n       end Discrimify;\n "}]}