{"sha": "d960ab7b8daceba84413b25d91c2410eec1bbde2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDk2MGFiN2I4ZGFjZWJhODQ0MTNiMjVkOTFjMjQxMGVlYzFiYmRlMg==", "commit": {"author": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2018-02-16T13:52:49Z"}, "committer": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2018-02-16T13:52:49Z"}, "message": "re PR target/83831 ([RX] Unused bclr,bnot,bset insns)\n\ngcc/\n\tPR target/83831\n\t* config/rx/rx.c (rx_fuse_in_memory_bitop): Convert shift operand\n\tto QImode.\n\ngcc/testsuite/\n\tPR target/83831\n\t* gcc.target/rx/pr83831.c (test_3, test_6): Adjust test cases.\n\nFrom-SVN: r257735", "tree": {"sha": "bdc2d0fef3edb983caddaf0691a6a2360da3cb80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bdc2d0fef3edb983caddaf0691a6a2360da3cb80"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d960ab7b8daceba84413b25d91c2410eec1bbde2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d960ab7b8daceba84413b25d91c2410eec1bbde2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d960ab7b8daceba84413b25d91c2410eec1bbde2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d960ab7b8daceba84413b25d91c2410eec1bbde2/comments", "author": null, "committer": null, "parents": [{"sha": "be77ba2a461eefdf4a2676b19025f36ec092c598", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be77ba2a461eefdf4a2676b19025f36ec092c598", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be77ba2a461eefdf4a2676b19025f36ec092c598"}], "stats": {"total": 27, "additions": 20, "deletions": 7}, "files": [{"sha": "a5d5fdefe8a7fbb26cbe18c49e3e8818175c25e8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d960ab7b8daceba84413b25d91c2410eec1bbde2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d960ab7b8daceba84413b25d91c2410eec1bbde2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d960ab7b8daceba84413b25d91c2410eec1bbde2", "patch": "@@ -1,3 +1,9 @@\n+2018-02-16  Oleg Endo  <olegendo@gcc.gnu.org>\n+\n+\tPR target/83831\n+\t* config/rx/rx.c (rx_fuse_in_memory_bitop): Convert shift operand\n+\tto QImode.\n+\n 2018-02-16  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/84037"}, {"sha": "de7af86f9b0b09e9f3f1777ca1bb3197067a0734", "filename": "gcc/config/rx/rx.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d960ab7b8daceba84413b25d91c2410eec1bbde2/gcc%2Fconfig%2Frx%2Frx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d960ab7b8daceba84413b25d91c2410eec1bbde2/gcc%2Fconfig%2Frx%2Frx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frx%2Frx.c?ref=d960ab7b8daceba84413b25d91c2410eec1bbde2", "patch": "@@ -3515,7 +3515,7 @@ rx_fuse_in_memory_bitop (rtx* operands, rtx_insn* curr_insn,\n     if (volatile_insn_p (PATTERN (i)) || CALL_P (i))\n       return false;\n \n-  emit_insn (gen_insn (mem, operands[1]));\n+  emit_insn (gen_insn (mem, gen_lowpart (QImode, operands[1])));\n   set_insn_deleted (op2_def.insn);\n   set_insn_deleted (op0_use);\n   return true;"}, {"sha": "7cd64bb15ffcae584cc040906a672e4d64a4c604", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d960ab7b8daceba84413b25d91c2410eec1bbde2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d960ab7b8daceba84413b25d91c2410eec1bbde2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d960ab7b8daceba84413b25d91c2410eec1bbde2", "patch": "@@ -1,3 +1,8 @@\n+2018-02-14  Oleg Endo  <olegendo@gcc.gnu.org>\n+\n+\tPR target/83831\n+\t* gcc.target/rx/pr83831.c (test_3, test_6): Adjust test cases.\n+\n 2018-02-16  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/84417"}, {"sha": "27d4a89cff4d238705df43698e085daf1df9fd83", "filename": "gcc/testsuite/gcc.target/rx/pr83831.c", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d960ab7b8daceba84413b25d91c2410eec1bbde2/gcc%2Ftestsuite%2Fgcc.target%2Frx%2Fpr83831.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d960ab7b8daceba84413b25d91c2410eec1bbde2/gcc%2Ftestsuite%2Fgcc.target%2Frx%2Fpr83831.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Frx%2Fpr83831.c?ref=d960ab7b8daceba84413b25d91c2410eec1bbde2", "patch": "@@ -1,8 +1,8 @@\n /* { dg-do compile }  */\n /* { dg-options \"-O1\" }  */\n /* { dg-final { scan-assembler-times \"bclr\" 6 } }  */\n-/* { dg-final { scan-assembler-times \"bset\" 6 } }  */\n-/* { dg-final { scan-assembler-times \"bnot\" 6 } }  */\n+/* { dg-final { scan-assembler-times \"bset\" 7 } }  */\n+/* { dg-final { scan-assembler-times \"bnot\" 7 } }  */\n \n void\n test_0 (char* x, unsigned int y)\n@@ -29,13 +29,14 @@ test_2 (unsigned int x)\n }\n \n void\n-test_3 (char* x, unsigned int y)\n+test_3 (char* x, unsigned int y, unsigned int z)\n {\n-  /* Expect 4x bset here.  */\n+  /* Expect 5x bset here.  */\n   x[0] |= 0x10;\n   x[1] = y | (1 << 1);\n   x[2] |= 0x10;\n   x[65000] |= 0x10;\n+  x[5] |= 1 << z;\n }\n \n unsigned int\n@@ -53,13 +54,14 @@ test_5 (unsigned int x)\n }\n \n void\n-test_6 (char* x, unsigned int y)\n+test_6 (char* x, unsigned int y, unsigned int z)\n {\n-  /* Expect 4x bnot here.  */\n+  /* Expect 5x bnot here.  */\n   x[0] ^= 0x10;\n   x[1] = y ^ (1 << 1);\n   x[2] ^= 0x10;\n   x[65000] ^= 0x10;\n+  x[5] ^= 1 << z;\n }\n \n unsigned int"}]}