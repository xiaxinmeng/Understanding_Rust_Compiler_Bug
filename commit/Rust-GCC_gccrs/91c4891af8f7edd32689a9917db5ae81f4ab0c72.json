{"sha": "91c4891af8f7edd32689a9917db5ae81f4ab0c72", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTFjNDg5MWFmOGY3ZWRkMzI2ODlhOTkxN2RiNWFlODFmNGFiMGM3Mg==", "commit": {"author": {"name": "Mark Eggleston", "email": "mark.eggleston@codethink.com", "date": "2019-10-30T08:37:29Z"}, "committer": {"name": "Mark Eggleston", "email": "markeggleston@gcc.gnu.org", "date": "2019-10-30T08:37:29Z"}, "message": "Suppress warning with -Wno-overwrite-recursive.\n\nThe use of -fno-automatic with -frecursive results in a warning implying\nthat recursion will not work. If all relevant local variable have the\nautomatic attribute explicitly declared recursion does work and the warning\nis redundant.\n\nFrom-SVN: r277602", "tree": {"sha": "65d34a3a9baa938337730e952c40e39c5b0b704c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/65d34a3a9baa938337730e952c40e39c5b0b704c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/91c4891af8f7edd32689a9917db5ae81f4ab0c72", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91c4891af8f7edd32689a9917db5ae81f4ab0c72", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91c4891af8f7edd32689a9917db5ae81f4ab0c72", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91c4891af8f7edd32689a9917db5ae81f4ab0c72/comments", "author": {"login": "markeggleston", "id": 42180582, "node_id": "MDQ6VXNlcjQyMTgwNTgy", "avatar_url": "https://avatars.githubusercontent.com/u/42180582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markeggleston", "html_url": "https://github.com/markeggleston", "followers_url": "https://api.github.com/users/markeggleston/followers", "following_url": "https://api.github.com/users/markeggleston/following{/other_user}", "gists_url": "https://api.github.com/users/markeggleston/gists{/gist_id}", "starred_url": "https://api.github.com/users/markeggleston/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markeggleston/subscriptions", "organizations_url": "https://api.github.com/users/markeggleston/orgs", "repos_url": "https://api.github.com/users/markeggleston/repos", "events_url": "https://api.github.com/users/markeggleston/events{/privacy}", "received_events_url": "https://api.github.com/users/markeggleston/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "87f94429feeb72587549fdafd3106f1d799607ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87f94429feeb72587549fdafd3106f1d799607ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87f94429feeb72587549fdafd3106f1d799607ff"}], "stats": {"total": 61, "additions": 55, "deletions": 6}, "files": [{"sha": "0e8de4b2576eab47d7485fffd98bdf9c83bd074e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=91c4891af8f7edd32689a9917db5ae81f4ab0c72", "patch": "@@ -1,3 +1,11 @@\n+2019-10-30  Mark Eggleston  <mark.eggleston@codethink.com>\n+\n+\t* invoke.texi: Add -Wno-overwrite-recursive to list of options. Add\n+\tdescription of -Wno-overwrite-recursive. Fix typo in description\n+\tof -Winteger-division.\n+\t* lang.opt: Add option -Woverwrite-recursive initialised as on.\n+\t* option.c (gfc_post_options): Output warning only if it is enabled.\n+\n 2019-10-28  Tobias Burnus  <tobias@codesourcery.com>\n \n \tPR fortran/91863"}, {"sha": "1d5cec123026c53d1a2653d1e75e7546b55bcdd0", "filename": "gcc/fortran/invoke.texi", "status": "modified", "additions": 15, "deletions": 5, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ffortran%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ffortran%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finvoke.texi?ref=91c4891af8f7edd32689a9917db5ae81f4ab0c72", "patch": "@@ -149,10 +149,11 @@ and warnings}.\n -Wc-binding-type -Wcharacter-truncation -Wconversion @gol\n -Wdo-subscript -Wfunction-elimination -Wimplicit-interface @gol\n -Wimplicit-procedure -Wintrinsic-shadow -Wuse-without-only @gol\n--Wintrinsics-std -Wline-truncation -Wno-align-commons -Wno-tabs @gol\n--Wreal-q-constant -Wsurprising -Wunderflow -Wunused-parameter @gol\n--Wrealloc-lhs -Wrealloc-lhs-all -Wfrontend-loop-interchange @gol\n--Wtarget-lifetime -fmax-errors=@var{n} -fsyntax-only -pedantic @gol\n+-Wintrinsics-std -Wline-truncation -Wno-align-commons @gol\n+-Wno-overwrite-recursive -Wno-tabs -Wreal-q-constant -Wsurprising @gol\n+-Wunderflow -Wunused-parameter -Wrealloc-lhs -Wrealloc-lhs-all @gol\n+-Wfrontend-loop-interchange -Wtarget-lifetime -fmax-errors=@var{n} @gol\n+-fsyntax-only -pedantic @gol\n -pedantic-errors @gol\n }\n \n@@ -989,7 +990,7 @@ nor has been declared as @code{EXTERNAL}.\n @opindex @code{Winteger-division}\n @cindex warnings, integer division\n @cindex warnings, division of integers\n-Warn if a constant integer division truncates it result.\n+Warn if a constant integer division truncates its result.\n As an example, 3/5 evaluates to 0.\n \n @item -Wintrinsics-std\n@@ -1002,6 +1003,15 @@ it as @code{EXTERNAL} procedure because of this.  @option{-fall-intrinsics} can\n be used to never trigger this behavior and always link to the intrinsic\n regardless of the selected standard.\n \n+@item -Wno-overwrite-recursive\n+@opindex @code{Woverwrite-recursive}\n+@cindex  warnings, overwrite recursive\n+Do not warn when @option{-fno-automatic} is used with @option{-frecursive}. Recursion\n+will be broken if the relevant local variables do not have the attribute\n+@code{AUTOMATIC} explicitly declared. This option can be used to suppress the warning\n+when it is known that recursion is not broken. Useful for build environments that use\n+@option{-Werror}.\n+\n @item -Wreal-q-constant\n @opindex @code{Wreal-q-constant}\n @cindex warnings, @code{q} exponent-letter"}, {"sha": "35b1206a2c23f00504163ed077768d2c3221a8bc", "filename": "gcc/fortran/lang.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ffortran%2Flang.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ffortran%2Flang.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Flang.opt?ref=91c4891af8f7edd32689a9917db5ae81f4ab0c72", "patch": "@@ -289,6 +289,10 @@ Wopenmp-simd\n Fortran\n ; Documented in C\n \n+Woverwrite-recursive\n+Fortran Warning Var(warn_overwrite_recursive) Init(1)\n+Warn that -fno-automatic may break recursion.\n+\n Wpedantic\n Fortran\n ; Documented in common.opt"}, {"sha": "c875ec1b55f632f0d2cb76e4c0c5b0b860b53567", "filename": "gcc/fortran/options.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ffortran%2Foptions.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ffortran%2Foptions.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Foptions.c?ref=91c4891af8f7edd32689a9917db5ae81f4ab0c72", "patch": "@@ -409,7 +409,8 @@ gfc_post_options (const char **pfilename)\n     gfc_warning_now (0, \"Flag %<-fno-automatic%> overwrites %<-fmax-stack-var-size=%d%>\",\n \t\t     flag_max_stack_var_size);\n   else if (!flag_automatic && flag_recursive)\n-    gfc_warning_now (0, \"Flag %<-fno-automatic%> overwrites %<-frecursive%>\");\n+    gfc_warning_now (OPT_Woverwrite_recursive, \"Flag %<-fno-automatic%> \"\n+\t\t     \"overwrites %<-frecursive%>\");\n   else if (!flag_automatic && flag_openmp)\n     gfc_warning_now (0, \"Flag %<-fno-automatic%> overwrites %<-frecursive%> implied by \"\n \t\t     \"%<-fopenmp%>\");"}, {"sha": "519952fef24ed3d39f425ba2e2d8965045da30ea", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=91c4891af8f7edd32689a9917db5ae81f4ab0c72", "patch": "@@ -1,3 +1,8 @@\n+2019-10-30  Mark Eggleston <mark.eggleston@codethink.com>\n+\n+\t* gfortran.dg/no_overwrite_recursive_1.f90: New test.\n+\t* gfortran.dg/no_overwrite_recursive_2.f90: New test.\n+\n 2019-10-29  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* g++.dg/other/ptrmem8.C: Test locations too."}, {"sha": "f12c4b8a4c7b97abf6bd4e06091bc117bf8847ef", "filename": "gcc/testsuite/gfortran.dg/no_overwrite_recursive_1.f90", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ftestsuite%2Fgfortran.dg%2Fno_overwrite_recursive_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ftestsuite%2Fgfortran.dg%2Fno_overwrite_recursive_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fno_overwrite_recursive_1.f90?ref=91c4891af8f7edd32689a9917db5ae81f4ab0c72", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+! { dg-options \"-fno-automatic -frecursive\" }\n+!\n+! Test case contributed by Mark Eggleston  <mark.eggleston@codethink.com>\n+!\n+\n+program test\n+  ! do nothing\n+end program\n+\n+! { dg-warning \"Flag '-fno-automatic' overwrites '-frecursive'\" \"warning\" { target *-*-* } 0 } "}, {"sha": "0944537548170ae15095792378042922b748ebfa", "filename": "gcc/testsuite/gfortran.dg/no_overwrite_recursive_2.f90", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ftestsuite%2Fgfortran.dg%2Fno_overwrite_recursive_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91c4891af8f7edd32689a9917db5ae81f4ab0c72/gcc%2Ftestsuite%2Fgfortran.dg%2Fno_overwrite_recursive_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fno_overwrite_recursive_2.f90?ref=91c4891af8f7edd32689a9917db5ae81f4ab0c72", "patch": "@@ -0,0 +1,10 @@\n+! { dg-do compile }\n+! { dg-options \"-fno-automatic -frecursive -Wno-overwrite-recursive\" }\n+!\n+! Test case contributed by Mark Eggleston  <mark.eggleston@codethink.com>\n+!\n+\n+program test\n+  ! do nothing\n+end program\n+"}]}