{"sha": "90d326bda21dc222166c937bb01c68945ef10382", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTBkMzI2YmRhMjFkYzIyMjE2NmM5MzdiYjAxYzY4OTQ1ZWYxMDM4Mg==", "commit": {"author": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1994-10-19T22:09:20Z"}, "committer": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1994-10-19T22:09:20Z"}, "message": "(scan_prog_file): Call COLLECT_QUALIFY_MATCH to do target-specific checking of the suitability of a match.\n\n(scan_prog_file): Call COLLECT_QUALIFY_MATCH to do\n        target-specific checking of the suitability of a match.\n        (main): Check REAL_*_FILE_NAME first.\n\nFrom-SVN: r8317", "tree": {"sha": "58a2e98edd571b4b29a738a5536c4883b60e7117", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58a2e98edd571b4b29a738a5536c4883b60e7117"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/90d326bda21dc222166c937bb01c68945ef10382", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90d326bda21dc222166c937bb01c68945ef10382", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90d326bda21dc222166c937bb01c68945ef10382", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90d326bda21dc222166c937bb01c68945ef10382/comments", "author": null, "committer": null, "parents": [{"sha": "f311b280766d9f2ea37f00f4318a62482512691a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f311b280766d9f2ea37f00f4318a62482512691a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f311b280766d9f2ea37f00f4318a62482512691a"}], "stats": {"total": 37, "additions": 17, "deletions": 20}, "files": [{"sha": "e0a2d7ebf22254aeb6a8d59a57406bb64021a89e", "filename": "gcc/collect2.c", "status": "modified", "additions": 17, "deletions": 20, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90d326bda21dc222166c937bb01c68945ef10382/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90d326bda21dc222166c937bb01c68945ef10382/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=90d326bda21dc222166c937bb01c68945ef10382", "patch": "@@ -958,6 +958,11 @@ main (argc, argv)\n \n   /* Try to discover a valid linker/nm/strip to use.  */\n \n+  /* Maybe we know the right file to use (if not cross).  */\n+#ifdef REAL_LD_FILE_NAME\n+  ld_file_name = find_a_file (&path, REAL_LD_FILE_NAME);\n+  if (ld_file_name == 0)\n+#endif\n #if 0\n   /* Search the (target-specific) compiler dirs for `gld'.  */\n   ld_file_name = find_a_file (&cpath, gld_suffix);\n@@ -973,11 +978,6 @@ main (argc, argv)\n     ld_file_name = find_a_file (&cpath, real_ld_suffix);\n   if (ld_file_name == 0)\n     ld_file_name = find_a_file (&path, full_real_ld_suffix);\n-  /* Maybe we know the right file to use (if not cross).  */\n-#ifdef REAL_LD_FILE_NAME\n-  if (ld_file_name == 0)\n-    ld_file_name = find_a_file (&path, REAL_LD_FILE_NAME);\n-#endif\n   /* Search the compiler directories for `ld'.  We have protection against\n      recursive calls in find_a_file.  */\n   if (ld_file_name == 0)\n@@ -999,27 +999,27 @@ main (argc, argv)\n       fatal (\"cannot find `ld'\");\n     }\n \n+#ifdef REAL_NM_FILE_NAME\n+  nm_file_name = find_a_file (&path, REAL_NM_FILE_NAME);\n+  if (nm_file_name == 0)\n+#endif\n   nm_file_name = find_a_file (&cpath, gnm_suffix);\n   if (nm_file_name == 0)\n     nm_file_name = find_a_file (&path, full_gnm_suffix);\n   if (nm_file_name == 0)\n     nm_file_name = find_a_file (&cpath, nm_suffix);\n-#ifdef REAL_NM_FILE_NAME\n-  if (nm_file_name == 0)\n-    nm_file_name = find_a_file (&path, REAL_NM_FILE_NAME);\n-#endif\n   if (nm_file_name == 0)\n     nm_file_name = find_a_file (&path, full_nm_suffix);\n \n+#ifdef REAL_STRIP_FILE_NAME\n+  strip_file_name = find_a_file (&path, REAL_STRIP_FILE_NAME);\n+  if (strip_file_name == 0)\n+#endif\n   strip_file_name = find_a_file (&cpath, gstrip_suffix);\n   if (strip_file_name == 0)\n     strip_file_name = find_a_file (&path, full_gstrip_suffix);\n   if (strip_file_name == 0)\n     strip_file_name = find_a_file (&cpath, strip_suffix);\n-#ifdef REAL_STRIP_FILE_NAME\n-  if (strip_file_name == 0)\n-    strip_file_name = find_a_file (&path, REAL_STRIP_FILE_NAME);\n-#endif\n   if (strip_file_name == 0)\n     strip_file_name = find_a_file (&path, full_strip_suffix);\n \n@@ -1076,13 +1076,6 @@ main (argc, argv)\n \n       if (arg[0] == '-')\n \t{\n-#ifdef COLLECT_SUPPRESS_OPTIONS\n-\t  if (index (COLLECT_SUPPRESS_OPTIONS, arg[1]))\n-\t    {\n-\t      ld1--;\n-\t      continue;\n-\t    }\n-#endif\n \t  switch (arg[1])\n \t    {\n \t    case 'd':\n@@ -1575,6 +1568,10 @@ scan_prog_file (prog_name, which_pass)\n \t   end++)\n \tcontinue;\n \n+#ifdef COLLECT_QUALIFY_MATCH\n+      COLLECT_QUALIFY_MATCH;\n+#endif\n+\n       *end = '\\0';\n       switch (is_ctor_dtor (name))\n \t{"}]}