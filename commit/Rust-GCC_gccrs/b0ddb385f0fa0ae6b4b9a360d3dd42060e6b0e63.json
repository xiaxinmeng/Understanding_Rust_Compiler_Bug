{"sha": "b0ddb385f0fa0ae6b4b9a360d3dd42060e6b0e63", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjBkZGIzODVmMGZhMGFlNmI0YjlhMzYwZDNkZDQyMDYwZTZiMGU2Mw==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2015-02-18T17:24:20Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2015-02-18T17:24:20Z"}, "message": "Return false for common symbols in sdata_symbolic_operand\n\nAlthough common symbols are defined in executables, they aren't in small\ndata section.  But a definition in small data section overrides a common\nsymbol, which still binds lcoally, and turns a reference to common symbol\nto reference to small data section.  Even if ia64_in_small_data_p returns\ntrue on common symbols, sdata_symbolic_operand must return false on common\nsymbols.  Common symbols are assumed to be placed in small data section,\nbut are accessed as if they are in normal data section so that they won't\ncause any relocation overflow.\n\n\tPR target/65064\n\t* config/ia64/predicates.md (sdata_symbolic_operand): Return false\n\tfor common symbols.\n\nFrom-SVN: r220792", "tree": {"sha": "e2d1353fd39cf4d43ed385621fd795bfd95a3d15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e2d1353fd39cf4d43ed385621fd795bfd95a3d15"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b0ddb385f0fa0ae6b4b9a360d3dd42060e6b0e63", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0ddb385f0fa0ae6b4b9a360d3dd42060e6b0e63", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0ddb385f0fa0ae6b4b9a360d3dd42060e6b0e63", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0ddb385f0fa0ae6b4b9a360d3dd42060e6b0e63/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2d64d38c98955b4a1e68a1c0c8af28e40407ec69", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d64d38c98955b4a1e68a1c0c8af28e40407ec69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d64d38c98955b4a1e68a1c0c8af28e40407ec69"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "35bcf40f566c02f7f2748001b19d8cb00be0f578", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0ddb385f0fa0ae6b4b9a360d3dd42060e6b0e63/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0ddb385f0fa0ae6b4b9a360d3dd42060e6b0e63/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b0ddb385f0fa0ae6b4b9a360d3dd42060e6b0e63", "patch": "@@ -1,3 +1,9 @@\n+2015-02-18  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/65064\n+\t* config/ia64/predicates.md (sdata_symbolic_operand): Return false\n+\tfor common symbols.\n+\n 2015-02-18  Jakub Jelinek  <jakub@redhat.com>\n \n \t* config/i386/t-intelmic (mkoffload.o): Remove dependency on"}, {"sha": "2aa7a780e02734ebced0d5a1b15b63002b96d1e0", "filename": "gcc/config/ia64/predicates.md", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0ddb385f0fa0ae6b4b9a360d3dd42060e6b0e63/gcc%2Fconfig%2Fia64%2Fpredicates.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0ddb385f0fa0ae6b4b9a360d3dd42060e6b0e63/gcc%2Fconfig%2Fia64%2Fpredicates.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fpredicates.md?ref=b0ddb385f0fa0ae6b4b9a360d3dd42060e6b0e63", "patch": "@@ -69,7 +69,12 @@\n \t     of constants here.  */\n \t  t = SYMBOL_REF_DECL (op);\n \t  if (DECL_P (t))\n-\t    t = DECL_SIZE_UNIT (t);\n+\t    {\n+\t      /* Common symbol isn't placed in small data section.  */\n+\t      if (DECL_COMMON (t))\n+\t\treturn false;\n+\t      t = DECL_SIZE_UNIT (t);\n+\t    }\n \t  else\n \t    t = TYPE_SIZE_UNIT (TREE_TYPE (t));\n \t  if (t && tree_fits_shwi_p (t))"}]}