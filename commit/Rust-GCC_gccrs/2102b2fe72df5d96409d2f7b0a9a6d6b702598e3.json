{"sha": "2102b2fe72df5d96409d2f7b0a9a6d6b702598e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjEwMmIyZmU3MmRmNWQ5NjQwOWQyZjdiMGE5YTZkNmI3MDI1OThlMw==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2004-11-25T01:41:20Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2004-11-25T01:41:20Z"}, "message": "configure.ac: Tweak test for HAVE_DECL_LDGETNAME to avoid a system header conflict on AIX 5.2.\n\n\n\t* configure.ac: Tweak test for HAVE_DECL_LDGETNAME to avoid a\n\tsystem header conflict on AIX 5.2.\n\t* configure: Regenerate.\n\nFrom-SVN: r91266", "tree": {"sha": "4519bae1413cb73435638cd79cae7b6576032213", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4519bae1413cb73435638cd79cae7b6576032213"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2102b2fe72df5d96409d2f7b0a9a6d6b702598e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2102b2fe72df5d96409d2f7b0a9a6d6b702598e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2102b2fe72df5d96409d2f7b0a9a6d6b702598e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2102b2fe72df5d96409d2f7b0a9a6d6b702598e3/comments", "author": null, "committer": null, "parents": [{"sha": "a26e9a2687a922bc0eaee597fbed34d34733b228", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a26e9a2687a922bc0eaee597fbed34d34733b228", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a26e9a2687a922bc0eaee597fbed34d34733b228"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "5f5865c22dc719effb525cea75b708ec085e006f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2102b2fe72df5d96409d2f7b0a9a6d6b702598e3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2102b2fe72df5d96409d2f7b0a9a6d6b702598e3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2102b2fe72df5d96409d2f7b0a9a6d6b702598e3", "patch": "@@ -1,3 +1,9 @@\n+2004-11-24  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* configure.ac: Tweak test for HAVE_DECL_LDGETNAME to avoid a\n+\tsystem header conflict on AIX 5.2.\n+\t* configure: Regenerate.\n+\n 2004-11-24  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* tree-outof-ssa.c (coalesce_abnormal_edges): Use e->dest_idx"}, {"sha": "48ec4dd1e80a82ddaecc53cfe4cd1d3e44732a51", "filename": "gcc/configure", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2102b2fe72df5d96409d2f7b0a9a6d6b702598e3/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2102b2fe72df5d96409d2f7b0a9a6d6b702598e3/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=2102b2fe72df5d96409d2f7b0a9a6d6b702598e3", "patch": "@@ -11355,6 +11355,10 @@ _ACEOF\n fi\n rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n \n+# On AIX 5.2, <ldfcn.h> conflicts with <fcntl.h>, as both define incompatible\n+# FREAD and FWRITE macros.  Fortunately, for GCC's single usage of ldgetname\n+# in collect2.c, <fcntl.h> isn't visible, but the configure test below needs\n+# to undef these macros to get the correct value for HAVE_DECL_LDGETNAME.\n \n for ac_func in ldgetname\n do\n@@ -11376,6 +11380,8 @@ cat >>conftest.$ac_ext <<_ACEOF\n #include \"ansidecl.h\"\n #include \"system.h\"\n #ifdef HAVE_LDFCN_H\n+#undef FREAD\n+#undef FWRITE\n #include <ldfcn.h>\n #endif\n "}, {"sha": "c7e49c0fc45fd23e66cf28773abff71fda1428e9", "filename": "gcc/configure.ac", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2102b2fe72df5d96409d2f7b0a9a6d6b702598e3/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2102b2fe72df5d96409d2f7b0a9a6d6b702598e3/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=2102b2fe72df5d96409d2f7b0a9a6d6b702598e3", "patch": "@@ -1053,10 +1053,16 @@ AC_TRY_COMPILE([\n ],[rlim_t l = 0;],,[AC_DEFINE([rlim_t],[long],\n [Define to \\`long' if <sys/resource.h> doesn't define.])])\n \n+# On AIX 5.2, <ldfcn.h> conflicts with <fcntl.h>, as both define incompatible\n+# FREAD and FWRITE macros.  Fortunately, for GCC's single usage of ldgetname\n+# in collect2.c, <fcntl.h> isn't visible, but the configure test below needs\n+# to undef these macros to get the correct value for HAVE_DECL_LDGETNAME.\n gcc_AC_CHECK_DECLS(ldgetname, , ,[\n #include \"ansidecl.h\"\n #include \"system.h\"\n #ifdef HAVE_LDFCN_H\n+#undef FREAD\n+#undef FWRITE\n #include <ldfcn.h>\n #endif\n ])"}]}