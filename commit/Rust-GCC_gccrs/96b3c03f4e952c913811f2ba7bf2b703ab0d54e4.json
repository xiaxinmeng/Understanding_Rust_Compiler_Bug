{"sha": "96b3c03f4e952c913811f2ba7bf2b703ab0d54e4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTZiM2MwM2Y0ZTk1MmM5MTM4MTFmMmJhN2JmMmI3MDNhYjBkNTRlNA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2014-08-05T13:05:06Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2014-08-05T13:05:06Z"}, "message": "re PR rtl-optimization/61672 (Less redundant instructions deleted by pre_delete after r208113.)\n\n2014-08-05  Richard Biener  <rguenther@suse.de>\n\n\tPR rtl-optimization/61672\n\t* emit-rtl.h (mem_attrs_eq_p): Declare.\n\t* emit-rtl.c (mem_attrs_eq_p): Export.  Handle NULL mem-attrs.\n\t* cse.c (exp_equiv_p): Use mem_attrs_eq_p.\n\t* cfgcleanup.c (merge_memattrs): Likewise.\n\tInclude emit-rtl.h.\n\nFrom-SVN: r213638", "tree": {"sha": "6dfae1a4a0cc077331f6a132085edd0b377def68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6dfae1a4a0cc077331f6a132085edd0b377def68"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b8a5fbd280e516d914b41b80132210c6549814cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8a5fbd280e516d914b41b80132210c6549814cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8a5fbd280e516d914b41b80132210c6549814cd"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "f199fed57aa6704f82286944b1f5aaf2d7a1d24f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=96b3c03f4e952c913811f2ba7bf2b703ab0d54e4", "patch": "@@ -1,3 +1,12 @@\n+2014-08-05  Richard Biener  <rguenther@suse.de>\n+\n+\tPR rtl-optimization/61672\n+\t* emit-rtl.h (mem_attrs_eq_p): Declare.\n+\t* emit-rtl.c (mem_attrs_eq_p): Export.  Handle NULL mem-attrs.\n+\t* cse.c (exp_equiv_p): Use mem_attrs_eq_p.\n+\t* cfgcleanup.c (merge_memattrs): Likewise.\n+\tInclude emit-rtl.h.\n+\n 2014-08-05  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/aarch64/arm_neon.h (vqdmlals_lane_s32): Use scalar types"}, {"sha": "0fbfd551502b8ff22ea7a45feef64f5e178955ea", "filename": "gcc/cfgcleanup.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4/gcc%2Fcfgcleanup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4/gcc%2Fcfgcleanup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgcleanup.c?ref=96b3c03f4e952c913811f2ba7bf2b703ab0d54e4", "patch": "@@ -53,6 +53,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"df.h\"\n #include \"dce.h\"\n #include \"dbgcnt.h\"\n+#include \"emit-rtl.h\"\n \n #define FORWARDER_BLOCK_P(BB) ((BB)->flags & BB_FORWARDER_BLOCK)\n \n@@ -883,7 +884,7 @@ merge_memattrs (rtx x, rtx y)\n   if (GET_MODE (x) != GET_MODE (y))\n     return;\n \n-  if (code == MEM && MEM_ATTRS (x) != MEM_ATTRS (y))\n+  if (code == MEM && !mem_attrs_eq_p (MEM_ATTRS (x), MEM_ATTRS (y)))\n     {\n       if (! MEM_ATTRS (x))\n \tMEM_ATTRS (y) = 0;"}, {"sha": "16d2fc1c753745bd58cd73ea827cb33c1c8d96d4", "filename": "gcc/cse.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4/gcc%2Fcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4/gcc%2Fcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcse.c?ref=96b3c03f4e952c913811f2ba7bf2b703ab0d54e4", "patch": "@@ -2685,7 +2685,7 @@ exp_equiv_p (const_rtx x, const_rtx y, int validate, bool for_gcse)\n \t     But because really all MEM attributes should be the same for\n \t     equivalent MEMs, we just use the invariant that MEMs that have\n \t     the same attributes share the same mem_attrs data structure.  */\n-\t  if (MEM_ATTRS (x) != MEM_ATTRS (y))\n+\t  if (!mem_attrs_eq_p (MEM_ATTRS (x), MEM_ATTRS (y)))\n \t    return 0;\n \n \t  /* If we are handling exceptions, we cannot consider two expressions"}, {"sha": "94f327534919daa2d260345604517a524da92814", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=96b3c03f4e952c913811f2ba7bf2b703ab0d54e4", "patch": "@@ -290,9 +290,13 @@ const_fixed_htab_eq (const void *x, const void *y)\n \n /* Return true if the given memory attributes are equal.  */\n \n-static bool\n+bool\n mem_attrs_eq_p (const struct mem_attrs *p, const struct mem_attrs *q)\n {\n+  if (p == q)\n+    return true;\n+  if (!p || !q)\n+    return false;\n   return (p->alias == q->alias\n \t  && p->offset_known_p == q->offset_known_p\n \t  && (!p->offset_known_p || p->offset == q->offset)"}, {"sha": "8439750416b7b41702c7d45c5898b776755dcb4c", "filename": "gcc/emit-rtl.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4/gcc%2Femit-rtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96b3c03f4e952c913811f2ba7bf2b703ab0d54e4/gcc%2Femit-rtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.h?ref=96b3c03f4e952c913811f2ba7bf2b703ab0d54e4", "patch": "@@ -20,6 +20,9 @@ along with GCC; see the file COPYING3.  If not see\n #ifndef GCC_EMIT_RTL_H\n #define GCC_EMIT_RTL_H\n \n+/* Return whether two MEM_ATTRs are equal.  */\n+bool mem_attrs_eq_p (const struct mem_attrs *, const struct mem_attrs *);\n+\n /* Set the alias set of MEM to SET.  */\n extern void set_mem_alias_set (rtx, alias_set_type);\n "}]}