{"sha": "1713a69f0a1af440caa41ab9e60490ecd7247922", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTcxM2E2OWYwYTFhZjQ0MGNhYTQxYWI5ZTYwNDkwZWNkNzI0NzkyMg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@libertysurf.fr", "date": "2003-12-20T07:40:24Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2003-12-20T07:40:24Z"}, "message": "re PR other/7956 (unreadable error on -m64 with --disable-multilib)\n\n\tPR other/7956\n\t* genmultilib: New variable disable_multilib.  Set it to 'yes'\n\tif enable_multilib was set to 'no'.  Emit DISABLE_MULTILIB\n\tif disable_multilib was set to 'yes'.\n\t* gcc.c: Include multilib.h before tm.h.\n\t* config/sparc/sol2-bi.h (LINK_ARCH_SPEC): Emit an error\n\tmessage for multiarch options if DISABLE_MULTILIB is set.\n\t* config/sparc/sol2-gld-bi.h (LINK_ARCH_SPEC): Likewise.\n\nFrom-SVN: r74875", "tree": {"sha": "98af3c4457424fafdb93e9226d24dc790395de64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/98af3c4457424fafdb93e9226d24dc790395de64"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1713a69f0a1af440caa41ab9e60490ecd7247922", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1713a69f0a1af440caa41ab9e60490ecd7247922", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1713a69f0a1af440caa41ab9e60490ecd7247922", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1713a69f0a1af440caa41ab9e60490ecd7247922/comments", "author": {"login": "ebotcazou", "id": 48091907, "node_id": "MDQ6VXNlcjQ4MDkxOTA3", "avatar_url": "https://avatars.githubusercontent.com/u/48091907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebotcazou", "html_url": "https://github.com/ebotcazou", "followers_url": "https://api.github.com/users/ebotcazou/followers", "following_url": "https://api.github.com/users/ebotcazou/following{/other_user}", "gists_url": "https://api.github.com/users/ebotcazou/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebotcazou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebotcazou/subscriptions", "organizations_url": "https://api.github.com/users/ebotcazou/orgs", "repos_url": "https://api.github.com/users/ebotcazou/repos", "events_url": "https://api.github.com/users/ebotcazou/events{/privacy}", "received_events_url": "https://api.github.com/users/ebotcazou/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c96f4f736a59db9dc34b776392576d4832914689", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c96f4f736a59db9dc34b776392576d4832914689", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c96f4f736a59db9dc34b776392576d4832914689"}], "stats": {"total": 52, "additions": 51, "deletions": 1}, "files": [{"sha": "c7f9559625ea5b3876b7b48b3c48b7ca052ab54f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1713a69f0a1af440caa41ab9e60490ecd7247922/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1713a69f0a1af440caa41ab9e60490ecd7247922/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1713a69f0a1af440caa41ab9e60490ecd7247922", "patch": "@@ -1,3 +1,14 @@\n+2003-12-20  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\tPR other/7956\n+\t* genmultilib: New variable disable_multilib.  Set it to 'yes'\n+\tif enable_multilib was set to 'no'.  Emit DISABLE_MULTILIB\n+\tif disable_multilib was set to 'yes'.\n+\t* gcc.c: Include multilib.h before tm.h.\n+\t* config/sparc/sol2-bi.h (LINK_ARCH_SPEC): Emit an error\n+\tmessage for multiarch options if DISABLE_MULTILIB is set.\n+\t* config/sparc/sol2-gld-bi.h (LINK_ARCH_SPEC): Likewise.\n+\n 2003-12-20  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \tPR c/12085"}, {"sha": "0a763748d854981b0f01378507f1a620dd901bcc", "filename": "gcc/config/sparc/sol2-bi.h", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1713a69f0a1af440caa41ab9e60490ecd7247922/gcc%2Fconfig%2Fsparc%2Fsol2-bi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1713a69f0a1af440caa41ab9e60490ecd7247922/gcc%2Fconfig%2Fsparc%2Fsol2-bi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsol2-bi.h?ref=1713a69f0a1af440caa41ab9e60490ecd7247922", "patch": "@@ -149,11 +149,27 @@\n #define LINK_ARCH64_SPEC LINK_ARCH64_SPEC_BASE\n \n #undef LINK_ARCH_SPEC\n+#if DISABLE_MULTILIB\n+#if DEFAULT_ARCH32_P\n #define LINK_ARCH_SPEC \"\\\n %{m32:%(link_arch32)} \\\n+%{m64:%edoes not support multilib} \\\n+%{!m32:%{!m64:%(link_arch_default)}} \\\n+\"\n+#else\n+#define LINK_ARCH_SPEC \"\\\n+%{m32:%edoes not support multilib} \\\n %{m64:%(link_arch64)} \\\n %{!m32:%{!m64:%(link_arch_default)}} \\\n \"\n+#endif\n+#else\n+#define LINK_ARCH_SPEC \"\\\n+%{m32:%(link_arch32)} \\\n+%{m64:%(link_arch64)} \\\n+%{!m32:%{!m64:%(link_arch_default)}} \\\n+\"\n+#endif\n \n #define LINK_ARCH_DEFAULT_SPEC \\\n (DEFAULT_ARCH32_P ? LINK_ARCH32_SPEC : LINK_ARCH64_SPEC)"}, {"sha": "aa9a40bdfcb7ed5dfff0c8ffe383f55d9124fd3c", "filename": "gcc/config/sparc/sol2-gld-bi.h", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1713a69f0a1af440caa41ab9e60490ecd7247922/gcc%2Fconfig%2Fsparc%2Fsol2-gld-bi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1713a69f0a1af440caa41ab9e60490ecd7247922/gcc%2Fconfig%2Fsparc%2Fsol2-gld-bi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsol2-gld-bi.h?ref=1713a69f0a1af440caa41ab9e60490ecd7247922", "patch": "@@ -10,9 +10,25 @@\n   LINK_ARCH64_SPEC_BASE \"%{!static: -rpath-link %R/usr/lib/sparcv9}\"\n \n #undef LINK_ARCH_SPEC\n+#if DISABLE_MULTILIB\n+#if DEFAULT_ARCH32_P\n+#define LINK_ARCH_SPEC \"\\\n+%{m32:-m elf32_sparc %(link_arch32)} \\\n+%{m64:%edoes not support multilib} \\\n+%{!m32:%{!m64:%(link_arch_default)}} \\\n+\"\n+#else\n+#define LINK_ARCH_SPEC \"\\\n+%{m32:%edoes not support multilib} \\\n+%{m64:-m elf64_sparc %(link_arch64)} \\\n+%{!m32:%{!m64:%(link_arch_default)}} \\\n+\"\n+#endif\n+#else\n #define LINK_ARCH_SPEC \"\\\n %{m32:-m elf32_sparc %(link_arch32)} \\\n %{m64:-m elf64_sparc %(link_arch64)} \\\n %{!m32:%{!m64:%(link_arch_default)}} \\\n \"\n+#endif\n "}, {"sha": "321ffa396f84f745843eafd61083657222a9e4f9", "filename": "gcc/gcc.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1713a69f0a1af440caa41ab9e60490ecd7247922/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1713a69f0a1af440caa41ab9e60490ecd7247922/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=1713a69f0a1af440caa41ab9e60490ecd7247922", "patch": "@@ -73,6 +73,7 @@ compilation is specified by a string called a \"spec\".  */\n #include \"config.h\"\n #include \"system.h\"\n #include \"coretypes.h\"\n+#include \"multilib.h\" /* before tm.h */\n #include \"tm.h\"\n #include <signal.h>\n #if ! defined( SIGCHLD ) && defined( SIGCLD )\n@@ -791,7 +792,6 @@ static const char *multilib_select;\n static const char *multilib_matches;\n static const char *multilib_defaults;\n static const char *multilib_exclusions;\n-#include \"multilib.h\"\n \n /* Check whether a particular argument is a default argument.  */\n "}, {"sha": "3cac4e9ad7a2b4938cecce58dc67a8cf5b2725c0", "filename": "gcc/genmultilib", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1713a69f0a1af440caa41ab9e60490ecd7247922/gcc%2Fgenmultilib", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1713a69f0a1af440caa41ab9e60490ecd7247922/gcc%2Fgenmultilib", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgenmultilib?ref=1713a69f0a1af440caa41ab9e60490ecd7247922", "patch": "@@ -323,6 +323,7 @@ for combo in ${combinations}; do\n     osdirout=`echo ${osdirout} | sed -e 's|^/||' -e 's|/$||g'`\n     if [ \"x${enable_multilib}\" != xyes ]; then\n       dirout=\".:${osdirout}\"\n+      disable_multilib=yes\n     else\n       case \"${osdirout}\" in\n         !*)\n@@ -403,6 +404,12 @@ moptions=`echo ${options} | sed -e 's,[ \t][ \t]*, ,g'`\n echo \"\"\n echo \"static const char *multilib_options = \\\"${moptions}\\\";\"\n \n+# Finally output the disable flag if specified\n+if [ \"x${disable_multilib}\" = xyes ]; then\n+  echo \"\"\n+  echo \"#define DISABLE_MULTILIB  1\"\n+fi\n+\n cd ..\n rm -r tmpmultilib.$$\n "}]}