{"sha": "05d8200d79f284ba5cf5e552183fae438e4f3bf7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDVkODIwMGQ3OWYyODRiYTVjZjVlNTUyMTgzZmFlNDM4ZTRmM2JmNw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2006-02-04T23:34:06Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2006-02-04T23:34:06Z"}, "message": "re PR java/25676 (Use of MIN_EXPR/MAX_EXPR is wrong for java)\n\ngcc/java\n\tPR java/25676:\n\t* builtins.c (max_builtin): Skip floating point 'max'.\n\t(min_builtin): Skip floating point 'min'.\n\t(check_for_builtin): Never return NULL_TREE.\nlibjava\n\tPR java/25676:\n\t* testsuite/libjava.lang/pr25676.out: New file.\n\t* testsuite/libjava.lang/pr25676.java: New file.\n\nFrom-SVN: r110599", "tree": {"sha": "729c397263390e58a1e0056350bf2b1959af7c43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/729c397263390e58a1e0056350bf2b1959af7c43"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/05d8200d79f284ba5cf5e552183fae438e4f3bf7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05d8200d79f284ba5cf5e552183fae438e4f3bf7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/05d8200d79f284ba5cf5e552183fae438e4f3bf7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05d8200d79f284ba5cf5e552183fae438e4f3bf7/comments", "author": null, "committer": null, "parents": [{"sha": "fb579387f96f84e0d1e3a9bc5baded6d549824b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb579387f96f84e0d1e3a9bc5baded6d549824b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb579387f96f84e0d1e3a9bc5baded6d549824b8"}], "stats": {"total": 45, "additions": 41, "deletions": 4}, "files": [{"sha": "5d2515ace3f1f101c2a5267263405ac8a8230497", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05d8200d79f284ba5cf5e552183fae438e4f3bf7/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05d8200d79f284ba5cf5e552183fae438e4f3bf7/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=05d8200d79f284ba5cf5e552183fae438e4f3bf7", "patch": "@@ -1,3 +1,10 @@\n+2006-02-04  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR java/25676:\n+\t* builtins.c (max_builtin): Skip floating point 'max'.\n+\t(min_builtin): Skip floating point 'min'.\n+\t(check_for_builtin): Never return NULL_TREE.\n+\n 2006-02-04  Tom Tromey  <tromey@redhat.com>\n \n \tPR java/26097:"}, {"sha": "5082cd02afc82949230d3b0cce8b1b14cab8c2ea", "filename": "gcc/java/builtins.c", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05d8200d79f284ba5cf5e552183fae438e4f3bf7/gcc%2Fjava%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05d8200d79f284ba5cf5e552183fae438e4f3bf7/gcc%2Fjava%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fbuiltins.c?ref=05d8200d79f284ba5cf5e552183fae438e4f3bf7", "patch": "@@ -1,5 +1,5 @@\n /* Built-in and inline functions for gcj\n-   Copyright (C) 2001, 2003, 2004, 2005\n+   Copyright (C) 2001, 2003, 2004, 2005, 2006\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -94,6 +94,9 @@ static GTY(()) struct builtin_record java_builtins[] =\n static tree\n max_builtin (tree method_return_type, tree method_arguments)\n {\n+  /* MAX_EXPR does not handle -0.0 in the Java style.  */\n+  if (TREE_CODE (method_return_type) == REAL_TYPE)\n+    return NULL_TREE;\n   return fold_build2 (MAX_EXPR, method_return_type,\n \t\t      TREE_VALUE (method_arguments),\n \t\t      TREE_VALUE (TREE_CHAIN (method_arguments)));\n@@ -102,6 +105,9 @@ max_builtin (tree method_return_type, tree method_arguments)\n static tree\n min_builtin (tree method_return_type, tree method_arguments)\n {\n+  /* MIN_EXPR does not handle -0.0 in the Java style.  */\n+  if (TREE_CODE (method_return_type) == REAL_TYPE)\n+    return NULL_TREE;\n   return fold_build2 (MIN_EXPR, method_return_type,\n \t\t      TREE_VALUE (method_arguments),\n \t\t      TREE_VALUE (TREE_CHAIN (method_arguments)));\n@@ -265,11 +271,15 @@ check_for_builtin (tree method, tree call)\n \t      tree fn;\n \n \t      if (java_builtins[i].creator != NULL)\n-\t\treturn (*java_builtins[i].creator) (method_return_type,\n-\t\t\t\t\t\t    method_arguments);\n+\t\t{\n+\t\t  tree result\n+\t\t    = (*java_builtins[i].creator) (method_return_type,\n+\t\t\t\t\t\t   method_arguments);\n+\t\t  return result == NULL_TREE ? call : result;\n+\t\t}\n \t      fn = built_in_decls[java_builtins[i].builtin_code];\n \t      if (fn == NULL_TREE)\n-\t\treturn NULL_TREE;\n+\t\treturn call;\n \t      return java_build_function_call_expr (fn, method_arguments);\n \t    }\n \t}"}, {"sha": "970d975a1e87acf5eea3946ebdd101ca332b9b0d", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05d8200d79f284ba5cf5e552183fae438e4f3bf7/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05d8200d79f284ba5cf5e552183fae438e4f3bf7/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=05d8200d79f284ba5cf5e552183fae438e4f3bf7", "patch": "@@ -1,3 +1,9 @@\n+2006-02-04  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR java/25676:\n+\t* testsuite/libjava.lang/pr25676.out: New file.\n+\t* testsuite/libjava.lang/pr25676.java: New file.\n+\n 2006-02-03  Thomas Fitzsimmons  <fitzsim@redhat.com>\n \n \t* Makefile.am (src.zip): Update src.zip file search to look in"}, {"sha": "e79a2c23d918e0d8ef7b258fe3d374977bc92b3c", "filename": "libjava/testsuite/libjava.lang/pr25676.java", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05d8200d79f284ba5cf5e552183fae438e4f3bf7/libjava%2Ftestsuite%2Flibjava.lang%2Fpr25676.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05d8200d79f284ba5cf5e552183fae438e4f3bf7/libjava%2Ftestsuite%2Flibjava.lang%2Fpr25676.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.lang%2Fpr25676.java?ref=05d8200d79f284ba5cf5e552183fae438e4f3bf7", "patch": "@@ -0,0 +1,12 @@\n+public class pr25676\n+{\n+  public static double g(double a, double b)\n+  {\n+    return Math.min(a, b);\n+  }\n+  public static void main(String a[])\n+  {\n+    System.out.println (g(0.0, -0.0));\n+    System.out.println (g(-0.0, 0.0));\n+  }\n+}"}, {"sha": "e6ffe0d430bc4cba64935cbf9a998ed5b3ba67dc", "filename": "libjava/testsuite/libjava.lang/pr25676.out", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05d8200d79f284ba5cf5e552183fae438e4f3bf7/libjava%2Ftestsuite%2Flibjava.lang%2Fpr25676.out", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05d8200d79f284ba5cf5e552183fae438e4f3bf7/libjava%2Ftestsuite%2Flibjava.lang%2Fpr25676.out", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.lang%2Fpr25676.out?ref=05d8200d79f284ba5cf5e552183fae438e4f3bf7", "patch": "@@ -0,0 +1,2 @@\n+-0.0\n+-0.0"}]}