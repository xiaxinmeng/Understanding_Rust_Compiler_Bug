{"sha": "ad172f720de079e6169897e5edada8d887560a33", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWQxNzJmNzIwZGUwNzllNjE2OTg5N2U1ZWRhZGE4ZDg4NzU2MGEzMw==", "commit": {"author": {"name": "Andrew Stubbs", "email": "ams@codesourcery.com", "date": "2018-09-11T10:26:57Z"}, "committer": {"name": "Andrew Stubbs", "email": "ams@gcc.gnu.org", "date": "2018-09-11T10:26:57Z"}, "message": "Add sorry_at diagnostic function.\n\nThe plain \"sorry\" diagnostic only gives the \"current\" location, which is\ntypically the last line of the function or translation unit by time we get to\nthe back end.\n\nGCN uses \"sorry\" to report unsupported language features, such as static\nconstructors, so it's useful to have a \"sorry_at\" variant.\n\nThis patch implements \"sorry_at\" according to the pattern of the other \"at\"\nvariants.\n\n2018-09-11  Andrew Stubbs  <ams@codesourcery.com>\n\n\tgcc/\n\t* diagnostic-core.h (sorry_at): New prototype.\n\t* diagnostic.c (sorry_at): New function.\n\nFrom-SVN: r264204", "tree": {"sha": "d3177108bda8a7903b833775c9aafbfc6cadb6b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d3177108bda8a7903b833775c9aafbfc6cadb6b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad172f720de079e6169897e5edada8d887560a33", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad172f720de079e6169897e5edada8d887560a33", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad172f720de079e6169897e5edada8d887560a33", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad172f720de079e6169897e5edada8d887560a33/comments", "author": {"login": "ams-cs", "id": 2235130, "node_id": "MDQ6VXNlcjIyMzUxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2235130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ams-cs", "html_url": "https://github.com/ams-cs", "followers_url": "https://api.github.com/users/ams-cs/followers", "following_url": "https://api.github.com/users/ams-cs/following{/other_user}", "gists_url": "https://api.github.com/users/ams-cs/gists{/gist_id}", "starred_url": "https://api.github.com/users/ams-cs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ams-cs/subscriptions", "organizations_url": "https://api.github.com/users/ams-cs/orgs", "repos_url": "https://api.github.com/users/ams-cs/repos", "events_url": "https://api.github.com/users/ams-cs/events{/privacy}", "received_events_url": "https://api.github.com/users/ams-cs/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "075cdac363c06c1524732855eee852965737c5ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/075cdac363c06c1524732855eee852965737c5ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/075cdac363c06c1524732855eee852965737c5ec"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "fbe708b45957f5f155fc56366476ec125e48c73c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad172f720de079e6169897e5edada8d887560a33/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad172f720de079e6169897e5edada8d887560a33/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ad172f720de079e6169897e5edada8d887560a33", "patch": "@@ -1,3 +1,8 @@\n+2018-09-11  Andrew Stubbs  <ams@codesourcery.com>\n+\n+\t* diagnostic-core.h (sorry_at): New prototype.\n+\t* diagnostic.c (sorry_at): New function.\n+\n 2018-09-11  Aldy Hernandez  <aldyh@redhat.com>\n \n \t* tree-vrp (extract_range_from_binary_expr_1): Treat all divisions"}, {"sha": "80ff39541e6d581bd66c3dc47c178d339def7b6b", "filename": "gcc/diagnostic-core.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad172f720de079e6169897e5edada8d887560a33/gcc%2Fdiagnostic-core.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad172f720de079e6169897e5edada8d887560a33/gcc%2Fdiagnostic-core.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdiagnostic-core.h?ref=ad172f720de079e6169897e5edada8d887560a33", "patch": "@@ -96,6 +96,7 @@ extern bool permerror (location_t, const char *, ...) ATTRIBUTE_GCC_DIAG(2,3);\n extern bool permerror (rich_location *, const char *,\n \t\t\t\t   ...) ATTRIBUTE_GCC_DIAG(2,3);\n extern void sorry (const char *, ...) ATTRIBUTE_GCC_DIAG(1,2);\n+extern void sorry_at (location_t, const char *, ...) ATTRIBUTE_GCC_DIAG(2,3);\n extern void inform (location_t, const char *, ...) ATTRIBUTE_GCC_DIAG(2,3);\n extern void inform (rich_location *, const char *, ...) ATTRIBUTE_GCC_DIAG(2,3);\n extern void inform_n (location_t, unsigned HOST_WIDE_INT, const char *,"}, {"sha": "8575065069b5aa05285b6070c9e8328cdc211154", "filename": "gcc/diagnostic.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad172f720de079e6169897e5edada8d887560a33/gcc%2Fdiagnostic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad172f720de079e6169897e5edada8d887560a33/gcc%2Fdiagnostic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdiagnostic.c?ref=ad172f720de079e6169897e5edada8d887560a33", "patch": "@@ -1443,6 +1443,18 @@ sorry (const char *gmsgid, ...)\n   va_end (ap);\n }\n \n+/* Same as above, but use location LOC instead of input_location.  */\n+void\n+sorry_at (location_t loc, const char *gmsgid, ...)\n+{\n+  auto_diagnostic_group d;\n+  va_list ap;\n+  va_start (ap, gmsgid);\n+  rich_location richloc (line_table, loc);\n+  diagnostic_impl (&richloc, -1, gmsgid, &ap, DK_SORRY);\n+  va_end (ap);\n+}\n+\n /* Return true if an error or a \"sorry\" has been seen.  Various\n    processing is disabled after errors.  */\n bool"}]}