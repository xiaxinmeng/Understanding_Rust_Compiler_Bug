{"sha": "d28cfc4ae6c8651b1631c8c00f016d8258de7458", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDI4Y2ZjNGFlNmM4NjUxYjE2MzFjOGMwMGYwMTZkODI1OGRlNzQ1OA==", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2012-08-06T21:28:34Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@gcc.gnu.org", "date": "2012-08-06T21:28:34Z"}, "message": "24k.md (r24k_unknown_store): Delete special handling for cprestore.\n\n2012-08-06  Sandra Loosemore  <sandra@codesourcery.com>\n\t    Maxim Kuvyrkov  <maxim@codesourcery.com>\n\t    Julian Brown  <julian@codesourcery.com>\n\n\tgcc/\n\t* config/mips/24k.md (r24k_unknown_store): Delete special handling\n\tfor cprestore.\n\t(r24k_int_load, r24k_int_arith, r24k_int_mul3, r24k_int_mfhilo)\n\t(r24k_int_cop, r24k_int_multi)\n\t(r24kf2_1_fcvt_f2i, r24kf2_1_fxfer)\n\t(r24kf1_1_fcvt_f2i, r24kf1_1_fxfer): Use mips_store_data_bypass_p\n\tinstead of store_data_bypass_p.\n\t* config/mips/74k.md (r74k_int_store): Delete special handling for\n\tcprestore.\n\t(r74k_int_load, r74k_int_logical, r74k_int_arith, r74k_int_cmove):\n\tUse mips_store_data_bypass_p instead of store_data_bypass_p.\n\nCo-Authored-By: Julian Brown <julian@codesourcery.com>\nCo-Authored-By: Maxim Kuvyrkov <maxim@codesourcery.com>\n\nFrom-SVN: r190189", "tree": {"sha": "6969d0e209fded256605c8bb492c67096e6f2f6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6969d0e209fded256605c8bb492c67096e6f2f6a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d28cfc4ae6c8651b1631c8c00f016d8258de7458", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d28cfc4ae6c8651b1631c8c00f016d8258de7458", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d28cfc4ae6c8651b1631c8c00f016d8258de7458", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d28cfc4ae6c8651b1631c8c00f016d8258de7458/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "edc802c796309ed06d4818ad8a7c8b851a52b9ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edc802c796309ed06d4818ad8a7c8b851a52b9ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/edc802c796309ed06d4818ad8a7c8b851a52b9ea"}], "stats": {"total": 66, "additions": 38, "deletions": 28}, "files": [{"sha": "1aa0e5e01d65b8f55b921bf9885f6bb3ca1392cf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d28cfc4ae6c8651b1631c8c00f016d8258de7458/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d28cfc4ae6c8651b1631c8c00f016d8258de7458/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d28cfc4ae6c8651b1631c8c00f016d8258de7458", "patch": "@@ -1,3 +1,19 @@\n+2012-08-06  Sandra Loosemore  <sandra@codesourcery.com>\n+\t    Maxim Kuvyrkov  <maxim@codesourcery.com>\n+\t    Julian Brown  <julian@codesourcery.com>\n+\n+\t* config/mips/24k.md (r24k_unknown_store): Delete special handling\n+\tfor cprestore.\n+\t(r24k_int_load, r24k_int_arith, r24k_int_mul3, r24k_int_mfhilo)\n+\t(r24k_int_cop, r24k_int_multi)\n+\t(r24kf2_1_fcvt_f2i, r24kf2_1_fxfer)\n+\t(r24kf1_1_fcvt_f2i, r24kf1_1_fxfer): Use mips_store_data_bypass_p\n+\tinstead of store_data_bypass_p.\n+\t* config/mips/74k.md (r74k_int_store): Delete special handling for\n+\tcprestore.\n+\t(r74k_int_load, r74k_int_logical, r74k_int_arith, r74k_int_cmove):\n+\tUse mips_store_data_bypass_p instead of store_data_bypass_p.\n+\n 2012-08-06  Marc Glisse  <marc.glisse@inria.fr>\n \n \tPR tree-optimization/51938"}, {"sha": "72ae6835e665a4c652022b00cd9fbfc1bf81e0b3", "filename": "gcc/config/mips/24k.md", "status": "modified", "additions": 15, "deletions": 22, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d28cfc4ae6c8651b1631c8c00f016d8258de7458/gcc%2Fconfig%2Fmips%2F24k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d28cfc4ae6c8651b1631c8c00f016d8258de7458/gcc%2Fconfig%2Fmips%2F24k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2F24k.md?ref=d28cfc4ae6c8651b1631c8c00f016d8258de7458", "patch": "@@ -122,18 +122,7 @@\n ;; 6. Store\n (define_insn_reservation \"r24k_int_store\" 1\n   (and (eq_attr \"cpu\" \"24kc,24kf2_1,24kf1_1\")\n-       (and (eq_attr \"type\" \"store\")\n-\t    (eq_attr \"mode\" \"!unknown\")))\n-  \"r24k_iss+r24k_ixu_arith\")\n-\n-;; 6.1 Special case - matches the cprestore pattern which don't set the mode\n-;;     attrib. This avoids being set as r24k_int_store and have it checked\n-;;     against store_data_bypass_p, which would then fail because cprestore\n-;;     does not have a normal SET pattern.\n-(define_insn_reservation \"r24k_unknown_store\" 1\n-  (and (eq_attr \"cpu\" \"24kc,24kf2_1,24kf1_1\")\n-       (and (eq_attr \"type\" \"store\")\n-\t    (eq_attr \"mode\" \"unknown\")))\n+       (eq_attr \"type\" \"store\"))\n   \"r24k_iss+r24k_ixu_arith\")\n \n \n@@ -169,22 +158,22 @@\n ;; load->store base: 3 cycles\n ;; load->prefetch:   3 cycles\n (define_bypass 3 \"r24k_int_load\" \"r24k_int_load\")\n-(define_bypass 3 \"r24k_int_load\" \"r24k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 3 \"r24k_int_load\" \"r24k_int_store\" \"!mips_store_data_bypass_p\")\n (define_bypass 3 \"r24k_int_load\" \"r24k_int_prefetch\")\n \n ;; arith->next use :  1 cycles (Default)\n ;; arith->load base:  2 cycles\n ;; arith->store base: 2 cycles\n ;; arith->prefetch:   2 cycles\n (define_bypass 2 \"r24k_int_arith\" \"r24k_int_load\")\n-(define_bypass 2 \"r24k_int_arith\" \"r24k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 2 \"r24k_int_arith\" \"r24k_int_store\" \"!mips_store_data_bypass_p\")\n (define_bypass 2 \"r24k_int_arith\" \"r24k_int_prefetch\")\n \n ;; mul3->next use : 5 cycles (default)\n ;; mul3->l/s base : 6 cycles\n ;; mul3->prefetch : 6 cycles\n (define_bypass 6 \"r24k_int_mul3\" \"r24k_int_load\")\n-(define_bypass 6 \"r24k_int_mul3\" \"r24k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 6 \"r24k_int_mul3\" \"r24k_int_store\" \"!mips_store_data_bypass_p\")\n (define_bypass 6 \"r24k_int_mul3\" \"r24k_int_prefetch\")\n \n ;; mul3->madd/msub : 1 cycle\n@@ -195,20 +184,22 @@\n ;; mfhilo->prefetch  : 6 cycles\n ;; mthilo->madd/msub : 2 cycle (only for mthi/lo not mfhi/lo)\n (define_bypass 6 \"r24k_int_mfhilo\" \"r24k_int_load\")\n-(define_bypass 6 \"r24k_int_mfhilo\" \"r24k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 6 \"r24k_int_mfhilo\" \"r24k_int_store\"\n+  \"!mips_store_data_bypass_p\")\n (define_bypass 6 \"r24k_int_mfhilo\" \"r24k_int_prefetch\")\n (define_bypass 2 \"r24k_int_mthilo\" \"r24k_int_madd\")\n \n ;; cop->next use : 3 cycles (Default)\n ;; cop->l/s base : 4 cycles\n ;; (define_bypass 4 \"r24k_int_cop\" \"r24k_int_load\")\n-;; (define_bypass 4 \"r24k_int_cop\" \"r24k_int_store\" \"!store_data_bypass_p\")\n+;; (define_bypass 4 \"r24k_int_cop\" \"r24k_int_store\"\n+;;   \"!mips_store_data_bypass_p\")\n \n ;; multi->next use : 1 cycles (Default)\n ;; multi->l/s base : 2 cycles\n ;; multi->prefetch : 2 cycles\n (define_bypass 2 \"r24k_int_multi\" \"r24k_int_load\")\n-(define_bypass 2 \"r24k_int_multi\" \"r24k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 2 \"r24k_int_multi\" \"r24k_int_store\" \"!mips_store_data_bypass_p\")\n (define_bypass 2 \"r24k_int_multi\" \"r24k_int_prefetch\")\n \n \n@@ -330,13 +321,14 @@\n ;; r24kf2_1_fcvt_f2i->l/s base : 11 cycles\n ;; r24kf2_1_fcvt_f2i->prefetch : 11 cycles\n (define_bypass 11 \"r24kf2_1_fcvt_f2i\" \"r24k_int_load\")\n-(define_bypass 11 \"r24kf2_1_fcvt_f2i\" \"r24k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 11 \"r24kf2_1_fcvt_f2i\" \"r24k_int_store\"\n+  \"!mips_store_data_bypass_p\")\n (define_bypass 11 \"r24kf2_1_fcvt_f2i\" \"r24k_int_prefetch\")\n \n ;; r24kf2_1_fxfer->l/s base : 5 cycles\n ;; r24kf2_1_fxfer->prefetch : 5 cycles\n (define_bypass 5 \"r24kf2_1_fxfer\" \"r24k_int_load\")\n-(define_bypass 5 \"r24kf2_1_fxfer\" \"r24k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 5 \"r24kf2_1_fxfer\" \"r24k_int_store\" \"!mips_store_data_bypass_p\")\n (define_bypass 5 \"r24kf2_1_fxfer\" \"r24k_int_prefetch\")\n \n ;; --------------------------------------------------------------\n@@ -446,12 +438,13 @@\n ;; r24kf1_1_fcvt_f2i->l/s base : 6 cycles\n ;; r24kf1_1_fcvt_f2i->prefetch : 6 cycles\n (define_bypass 6 \"r24kf1_1_fcvt_f2i\" \"r24k_int_load\")\n-(define_bypass 6 \"r24kf1_1_fcvt_f2i\" \"r24k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 6 \"r24kf1_1_fcvt_f2i\" \"r24k_int_store\"\n+  \"!mips_store_data_bypass_p\")\n (define_bypass 6 \"r24kf1_1_fcvt_f2i\" \"r24k_int_prefetch\")\n \n ;; r24kf1_1_fxfer->l/s base : 3 cycles\n ;; r24kf1_1_fxfer->prefetch : 3 cycles\n (define_bypass 3 \"r24kf1_1_fxfer\" \"r24k_int_load\")\n-(define_bypass 3 \"r24kf1_1_fxfer\" \"r24k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 3 \"r24kf1_1_fxfer\" \"r24k_int_store\" \"!mips_store_data_bypass_p\")\n (define_bypass 3 \"r24kf1_1_fxfer\" \"r24k_int_prefetch\")\n "}, {"sha": "4a9cb65ae007e5d7109ed9d18907acb1ab04c392", "filename": "gcc/config/mips/74k.md", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d28cfc4ae6c8651b1631c8c00f016d8258de7458/gcc%2Fconfig%2Fmips%2F74k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d28cfc4ae6c8651b1631c8c00f016d8258de7458/gcc%2Fconfig%2Fmips%2F74k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2F74k.md?ref=d28cfc4ae6c8651b1631c8c00f016d8258de7458", "patch": "@@ -118,8 +118,7 @@\n ;; stores\n (define_insn_reservation \"r74k_int_store\" 1\n   (and (eq_attr \"cpu\" \"74kc,74kf2_1,74kf1_1,74kf3_2\")\n-       (and (eq_attr \"type\" \"store\")\n-            (eq_attr \"mode\" \"!unknown\")))\n+       (eq_attr \"type\" \"store\"))\n   \"r74k_agen\")\n \n \n@@ -145,25 +144,27 @@\n ;; load->load base:  4 cycles\n ;; load->store base: 4 cycles\n (define_bypass 4 \"r74k_int_load\" \"r74k_int_load\")\n-(define_bypass 4 \"r74k_int_load\" \"r74k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 4 \"r74k_int_load\" \"r74k_int_store\" \"!mips_store_data_bypass_p\")\n \n ;; logical/move/slt/signext->next use :  1 cycles (Default)\n ;; logical/move/slt/signext->load base:  2 cycles\n ;; logical/move/slt/signext->store base: 2 cycles\n (define_bypass 2 \"r74k_int_logical\" \"r74k_int_load\")\n-(define_bypass 2 \"r74k_int_logical\" \"r74k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 2 \"r74k_int_logical\" \"r74k_int_store\"\n+  \"!mips_store_data_bypass_p\")\n \n ;; arith->next use :  2 cycles (Default)\n ;; arith->load base:  3 cycles\n ;; arith->store base: 3 cycles\n (define_bypass 3 \"r74k_int_arith\" \"r74k_int_load\")\n-(define_bypass 3 \"r74k_int_arith\" \"r74k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 3 \"r74k_int_arith\" \"r74k_int_store\" \"!mips_store_data_bypass_p\")\n \n ;; cmove->next use :  4 cycles (Default)\n ;; cmove->load base:  5 cycles\n ;; cmove->store base: 5 cycles\n (define_bypass 5 \"r74k_int_cmove\"  \"r74k_int_load\")\n-(define_bypass 5 \"r74k_int_cmove\"  \"r74k_int_store\" \"!store_data_bypass_p\")\n+(define_bypass 5 \"r74k_int_cmove\"  \"r74k_int_store\"\n+  \"!mips_store_data_bypass_p\")\n \n ;; mult/madd/msub->int_mfhilo  : 4 cycles (default)\n ;; mult->madd/msub             : 1 cycles"}]}