{"sha": "7a88cc8467b948a302c9faedded8f39d7bd6380a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2E4OGNjODQ2N2I5NDhhMzAyYzlmYWVkZGVkOGYzOWQ3YmQ2MzgwYQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2016-05-31T07:07:26Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2016-05-31T07:07:26Z"}, "message": "Handle 3-arg phi in copy_bb_and_scalar_dependences\n\n2016-05-31  Tom de Vries  <tom@codesourcery.com>\n\n\tPR tree-optimization/69068\n\t* graphite-isl-ast-to-gimple.c (copy_bb_and_scalar_dependences): Handle\n\tphis with more than two args.\n\n\t* gcc.dg/graphite/pr69068.c: New test.\n\nFrom-SVN: r236907", "tree": {"sha": "7b064ac365f64d9672165779dc542ff469acbc07", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7b064ac365f64d9672165779dc542ff469acbc07"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7a88cc8467b948a302c9faedded8f39d7bd6380a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a88cc8467b948a302c9faedded8f39d7bd6380a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a88cc8467b948a302c9faedded8f39d7bd6380a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a88cc8467b948a302c9faedded8f39d7bd6380a/comments", "author": null, "committer": null, "parents": [{"sha": "cc10916fe1aba825a70b32e525c126e8f7dd9a8a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc10916fe1aba825a70b32e525c126e8f7dd9a8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc10916fe1aba825a70b32e525c126e8f7dd9a8a"}], "stats": {"total": 36, "additions": 30, "deletions": 6}, "files": [{"sha": "88fa0e569b14f0c27618a5b1f2bf120c0afa711c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a88cc8467b948a302c9faedded8f39d7bd6380a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a88cc8467b948a302c9faedded8f39d7bd6380a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7a88cc8467b948a302c9faedded8f39d7bd6380a", "patch": "@@ -1,3 +1,9 @@\n+2016-05-31  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR tree-optimization/69068\n+\t* graphite-isl-ast-to-gimple.c (copy_bb_and_scalar_dependences): Handle\n+\tphis with more than two args.\n+\n 2016-05-30  Andreas Tobler  <andreast@gcc.gnu.org>\n \n \t* config.gcc: Move hard float support for arm*hf*-*-freebsd* into"}, {"sha": "fb9c8468ebc06f0e7719d88d691fe6ec0d1d47be", "filename": "gcc/graphite-isl-ast-to-gimple.c", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a88cc8467b948a302c9faedded8f39d7bd6380a/gcc%2Fgraphite-isl-ast-to-gimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a88cc8467b948a302c9faedded8f39d7bd6380a/gcc%2Fgraphite-isl-ast-to-gimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-isl-ast-to-gimple.c?ref=7a88cc8467b948a302c9faedded8f39d7bd6380a", "patch": "@@ -1075,9 +1075,7 @@ bb_contains_loop_close_phi_nodes (basic_block bb)\n static bool\n bb_contains_loop_phi_nodes (basic_block bb)\n {\n-  gcc_assert (EDGE_COUNT (bb->preds) <= 2);\n-\n-  if (bb->preds->length () == 1)\n+  if (EDGE_COUNT (bb->preds) != 2)\n     return false;\n \n   unsigned depth = loop_depth (bb->loop_father);\n@@ -2480,13 +2478,14 @@ copy_cond_phi_nodes (basic_block bb, basic_block new_bb, vec<tree> iv_map)\n \n   gcc_assert (!bb_contains_loop_close_phi_nodes (bb));\n \n+  /* TODO: Handle cond phi nodes with more than 2 predecessors.  */\n+  if (EDGE_COUNT (bb->preds) != 2)\n+    return false;\n+\n   if (dump_file)\n     fprintf (dump_file, \"[codegen] copying cond phi nodes in bb_%d.\\n\",\n \t     new_bb->index);\n \n-  /* Cond phi nodes should have exactly two arguments.  */\n-  gcc_assert (2 == EDGE_COUNT (bb->preds));\n-\n   for (gphi_iterator psi = gsi_start_phis (bb); !gsi_end_p (psi);\n        gsi_next (&psi))\n     {"}, {"sha": "0ae4c9bff9e8fda6c1f9a8bcf3001a1a843fcfc5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a88cc8467b948a302c9faedded8f39d7bd6380a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a88cc8467b948a302c9faedded8f39d7bd6380a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7a88cc8467b948a302c9faedded8f39d7bd6380a", "patch": "@@ -1,3 +1,8 @@\n+2016-05-31  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR tree-optimization/69068\n+\t* gcc.dg/graphite/pr69068.c: New test.\n+\n 2016-05-27  Martin Sebor  <msebor@redhat.com>\n \n \tPR c++/71306"}, {"sha": "0abea060025c7efbd65b586dafdab01811af022f", "filename": "gcc/testsuite/gcc.dg/graphite/pr69068.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a88cc8467b948a302c9faedded8f39d7bd6380a/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr69068.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a88cc8467b948a302c9faedded8f39d7bd6380a/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr69068.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr69068.c?ref=7a88cc8467b948a302c9faedded8f39d7bd6380a", "patch": "@@ -0,0 +1,14 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O1 -fgraphite-identity\" } */\n+\n+int qo;\n+int zh[2];\n+\n+void\n+td (void)\n+{\n+  int ly, en;\n+  for (ly = 0; ly < 2; ++ly)\n+    for (en = 0; en < 2; ++en)\n+      zh[en] = ((qo == 0) || (((qo * 2) != 0))) ? 1 : -1;\n+}"}]}