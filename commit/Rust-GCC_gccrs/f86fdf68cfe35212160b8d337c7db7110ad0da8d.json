{"sha": "f86fdf68cfe35212160b8d337c7db7110ad0da8d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjg2ZmRmNjhjZmUzNTIxMjE2MGI4ZDMzN2M3ZGI3MTEwYWQwZGE4ZA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2001-03-02T11:32:45Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2001-03-02T11:32:45Z"}, "message": "call.c (joust): cp_pedwarn when using gnu extension concerning worst conversion sequences.\n\ncp:\n\t* call.c (joust): cp_pedwarn when using gnu extension concerning\n\tworst conversion sequences.\ntestsuite:\n\t* g++.old-deja/g++.ext/overload1.C: New test.\n\nFrom-SVN: r40182", "tree": {"sha": "076e53a672290384755954f3a9c2aa2931ac5068", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/076e53a672290384755954f3a9c2aa2931ac5068"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f86fdf68cfe35212160b8d337c7db7110ad0da8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f86fdf68cfe35212160b8d337c7db7110ad0da8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f86fdf68cfe35212160b8d337c7db7110ad0da8d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f86fdf68cfe35212160b8d337c7db7110ad0da8d/comments", "author": null, "committer": null, "parents": [{"sha": "68af29ce9d38679a82821886eb776aa5b423e117", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68af29ce9d38679a82821886eb776aa5b423e117", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68af29ce9d38679a82821886eb776aa5b423e117"}], "stats": {"total": 47, "additions": 44, "deletions": 3}, "files": [{"sha": "78899b633a249997a2ae41a8e947738a8a6122db", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f86fdf68cfe35212160b8d337c7db7110ad0da8d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f86fdf68cfe35212160b8d337c7db7110ad0da8d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f86fdf68cfe35212160b8d337c7db7110ad0da8d", "patch": "@@ -1,3 +1,8 @@\n+2001-03-02  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* call.c (joust): cp_pedwarn when using gnu extension concerning\n+\tworst conversion sequences.\n+\n 2001-03-01  Zack Weinberg  <zackw@stanford.edu>\n \n \t* decl.c: Replace all uses of 'boolean' with 'bool'."}, {"sha": "69c58db2d43e7787c526543a2bd520403c94d355", "filename": "gcc/cp/call.c", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f86fdf68cfe35212160b8d337c7db7110ad0da8d/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f86fdf68cfe35212160b8d337c7db7110ad0da8d/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=f86fdf68cfe35212160b8d337c7db7110ad0da8d", "patch": "@@ -5312,6 +5312,7 @@ joust (cand1, cand2, warn)\n   if (!pedantic)\n     {\n       int rank1 = IDENTITY_RANK, rank2 = IDENTITY_RANK;\n+      struct z_candidate *w, *l;\n \n       for (i = 0; i < len; ++i)\n \t{\n@@ -5320,11 +5321,22 @@ joust (cand1, cand2, warn)\n \t  if (ICS_RANK (TREE_VEC_ELT (cand2->convs, i+off2)) > rank2)\n \t    rank2 = ICS_RANK (TREE_VEC_ELT (cand2->convs, i+off2));\n \t}\n-\n       if (rank1 < rank2)\n-\treturn 1;\n+\twinner = 1, w = cand1, l = cand2;\n       if (rank1 > rank2)\n-\treturn -1;\n+\twinner = -1, w = cand2, l = cand1;\n+      if (winner)\n+        {\n+\t  if (warn)\n+\t    {\n+\t      cp_pedwarn (\"choosing `%D' over `%D'\", w->fn, l->fn);\n+\t      cp_pedwarn (\n+\"  because worst conversion for the former is better than worst conversion for the latter\");\n+\t    }\n+\t  else\n+\t    add_warning (w, l);\n+          return winner;\n+        }\n     }\n \n   my_friendly_assert (!winner, 20010121);"}, {"sha": "6c43b68b00ef6acf34eb7bfda95f4008c83f5711", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f86fdf68cfe35212160b8d337c7db7110ad0da8d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f86fdf68cfe35212160b8d337c7db7110ad0da8d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f86fdf68cfe35212160b8d337c7db7110ad0da8d", "patch": "@@ -1,3 +1,7 @@\n+2001-03-02  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* g++.old-deja/g++.ext/overload1.C: New test.\n+\n 2001-03-01  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* g++.old-deja/g++.pt/using1.C: New test."}, {"sha": "d99e04fecb897940f06feddda0844a633c6b123b", "filename": "gcc/testsuite/g++.old-deja/g++.ext/overload1.C", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f86fdf68cfe35212160b8d337c7db7110ad0da8d/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ext%2Foverload1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f86fdf68cfe35212160b8d337c7db7110ad0da8d/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ext%2Foverload1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ext%2Foverload1.C?ref=f86fdf68cfe35212160b8d337c7db7110ad0da8d", "patch": "@@ -0,0 +1,20 @@\n+// Build don't link:\n+// Special g++ Options: -fpermissive\n+\n+// Copyright (C) 2000 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 28 Feb 2001 <nathan@codesourcery.com>\n+\n+// Make sure we warn about our overload extension about picking the\n+// one with the least worse conversion\n+\n+struct X\n+{\n+  X (int);\n+};\n+void Foo (int, float, bool);\n+void Foo (float, int, X);\n+\n+void Baz ()\n+{\n+  Foo (1, 1, 0);    // WARNING - least worse\n+}"}]}