{"sha": "159e4616780d936a0642c057de51acd27a89a45d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTU5ZTQ2MTY3ODBkOTM2YTA2NDJjMDU3ZGU1MWFjZDI3YTg5YTQ1ZA==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2010-08-11T20:22:57Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-08-11T20:22:57Z"}, "message": "Fix invariant phi node removal.\n\n2010-05-07  Sebastian Pop  <sebastian.pop@amd.com>\n\n\t* graphite-sese-to-poly.c (loop_entry_phi_arg): Renamed\n\tphi_arg_in_outermost_loop.\n\t(remove_simple_copy_phi): Call phi_arg_in_outermost_loop.\n\t(remove_invariant_phi): Same.\n\nFrom-SVN: r163105", "tree": {"sha": "85efd903b5c90efa28dff92f565f61514718d114", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/85efd903b5c90efa28dff92f565f61514718d114"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/159e4616780d936a0642c057de51acd27a89a45d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/159e4616780d936a0642c057de51acd27a89a45d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/159e4616780d936a0642c057de51acd27a89a45d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/159e4616780d936a0642c057de51acd27a89a45d/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6cbd8875831925383fd1909c9b97867a7d5a538d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cbd8875831925383fd1909c9b97867a7d5a538d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cbd8875831925383fd1909c9b97867a7d5a538d"}], "stats": {"total": 34, "additions": 25, "deletions": 9}, "files": [{"sha": "1338413ebe835d52a58e5770de3433c86cafa36a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/159e4616780d936a0642c057de51acd27a89a45d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/159e4616780d936a0642c057de51acd27a89a45d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=159e4616780d936a0642c057de51acd27a89a45d", "patch": "@@ -1,3 +1,10 @@\n+2010-08-02  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* graphite-sese-to-poly.c (loop_entry_phi_arg): Renamed\n+\tphi_arg_in_outermost_loop.\n+\t(remove_simple_copy_phi): Call phi_arg_in_outermost_loop.\n+\t(remove_invariant_phi): Same.\n+\n 2010-08-11  Anatoly Sokolov  <aesok@post.ru>\n \n \t* target.def (output_addr_const_extra): New hook."}, {"sha": "00849f24ee6f6710acd05a87aaa86054b81e42e4", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/159e4616780d936a0642c057de51acd27a89a45d/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/159e4616780d936a0642c057de51acd27a89a45d/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=159e4616780d936a0642c057de51acd27a89a45d", "patch": "@@ -1,3 +1,10 @@\n+2010-05-07  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* graphite-sese-to-poly.c (loop_entry_phi_arg): Renamed\n+\tphi_arg_in_outermost_loop.\n+\t(remove_simple_copy_phi): Call phi_arg_in_outermost_loop.\n+\t(remove_invariant_phi): Same.\n+\n 2010-04-12  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n \n \t* graphite-blocking.c"}, {"sha": "68cb2a405e7212ea088ff67819867f8f05104a6b", "filename": "gcc/graphite-sese-to-poly.c", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/159e4616780d936a0642c057de51acd27a89a45d/gcc%2Fgraphite-sese-to-poly.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/159e4616780d936a0642c057de51acd27a89a45d/gcc%2Fgraphite-sese-to-poly.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-sese-to-poly.c?ref=159e4616780d936a0642c057de51acd27a89a45d", "patch": "@@ -73,21 +73,23 @@ var_used_in_not_loop_header_phi_node (tree var)\n   return result;\n }\n \n-/* Returns the index of the phi argument corresponding to the initial\n-   value in the loop.  */\n+/* Returns the index of the PHI argument defined in the outermost\n+   loop.  */\n \n static size_t\n-loop_entry_phi_arg (gimple phi)\n+phi_arg_in_outermost_loop (gimple phi)\n {\n   loop_p loop = gimple_bb (phi)->loop_father;\n-  size_t i;\n+  size_t i, res = 0;\n \n   for (i = 0; i < gimple_phi_num_args (phi); i++)\n     if (!flow_bb_inside_loop_p (loop, gimple_phi_arg_edge (phi, i)->src))\n-      return i;\n+      {\n+\tloop = gimple_phi_arg_edge (phi, i)->src->loop_father;\n+\tres = i;\n+      }\n \n-  gcc_unreachable ();\n-  return 0;\n+  return res;\n }\n \n /* Removes a simple copy phi node \"RES = phi (INIT, RES)\" at position\n@@ -98,7 +100,7 @@ remove_simple_copy_phi (gimple_stmt_iterator *psi)\n {\n   gimple phi = gsi_stmt (*psi);\n   tree res = gimple_phi_result (phi);\n-  size_t entry = loop_entry_phi_arg (phi);\n+  size_t entry = phi_arg_in_outermost_loop (phi);\n   tree init = gimple_phi_arg_def (phi, entry);\n   gimple stmt = gimple_build_assign (res, init);\n   edge e = gimple_phi_arg_edge (phi, entry);\n@@ -118,7 +120,7 @@ remove_invariant_phi (sese region, gimple_stmt_iterator *psi)\n   loop_p loop = loop_containing_stmt (phi);\n   tree res = gimple_phi_result (phi);\n   tree scev = scalar_evolution_in_region (region, loop, res);\n-  size_t entry = loop_entry_phi_arg (phi);\n+  size_t entry = phi_arg_in_outermost_loop (phi);\n   edge e = gimple_phi_arg_edge (phi, entry);\n   tree var;\n   gimple stmt;"}]}