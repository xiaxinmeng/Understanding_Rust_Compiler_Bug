{"sha": "23972128c83e62011b583f06b32c8501c096b7d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjM5NzIxMjhjODNlNjIwMTFiNTgzZjA2YjMyYzg1MDFjMDk2YjdkOA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-05-10T14:10:45Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-05-10T14:54:43Z"}, "message": "libstdc++: Adjust expected errors in tests when compiled as C++20\n\nlibstdc++-v3/ChangeLog:\n\n\t* testsuite/20_util/scoped_allocator/69293_neg.cc: Add dg-error\n\tfor additional errors in C++20.\n\t* testsuite/20_util/specialized_algorithms/memory_management_tools/destroy_neg.cc:\n\tLikewise.\n\t* testsuite/20_util/uses_allocator/69293_neg.cc: Likewise.\n\t* testsuite/27_io/filesystem/path/io/dr2989.cc: Likewise.", "tree": {"sha": "44073e76ce36d4d8c5d85272c65f3d4729ec2b43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/44073e76ce36d4d8c5d85272c65f3d4729ec2b43"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/23972128c83e62011b583f06b32c8501c096b7d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23972128c83e62011b583f06b32c8501c096b7d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23972128c83e62011b583f06b32c8501c096b7d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23972128c83e62011b583f06b32c8501c096b7d8/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "695776733785973e809c89a739f3fa8d4c9b9d4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/695776733785973e809c89a739f3fa8d4c9b9d4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/695776733785973e809c89a739f3fa8d4c9b9d4e"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "fd37374447f9176cfe2c02be5e6b657e0a5bde3b", "filename": "libstdc++-v3/testsuite/20_util/scoped_allocator/69293_neg.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23972128c83e62011b583f06b32c8501c096b7d8/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fscoped_allocator%2F69293_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23972128c83e62011b583f06b32c8501c096b7d8/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fscoped_allocator%2F69293_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fscoped_allocator%2F69293_neg.cc?ref=23972128c83e62011b583f06b32c8501c096b7d8", "patch": "@@ -47,6 +47,7 @@ test01()\n   auto p = sa.allocate(1);\n   sa.construct(p);  // this is required to be ill-formed\n   // { dg-error \"failed: .* uses_allocator is true\" \"\" { target *-*-* } 0 }\n+  // { dg-error \"too many initializers for 'X'\" \"\" { target c++2a } 0 }\n }\n \n // Needed because of PR c++/92193"}, {"sha": "626f2e1c6ee1a8fcb498c77d6f59e5f2e422d33f", "filename": "libstdc++-v3/testsuite/20_util/specialized_algorithms/memory_management_tools/destroy_neg.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23972128c83e62011b583f06b32c8501c096b7d8/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fspecialized_algorithms%2Fmemory_management_tools%2Fdestroy_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23972128c83e62011b583f06b32c8501c096b7d8/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fspecialized_algorithms%2Fmemory_management_tools%2Fdestroy_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fspecialized_algorithms%2Fmemory_management_tools%2Fdestroy_neg.cc?ref=23972128c83e62011b583f06b32c8501c096b7d8", "patch": "@@ -48,3 +48,5 @@ test02()\n }\n \n // { dg-error \"value type is destructible\" \"\" { target *-*-* } 0 }\n+// { dg-error \"use of deleted function\" \"\" { target c++20 } 0 }\n+// { dg-error \"is private within this context\" \"\" { target c++20 } 0 }"}, {"sha": "2c5a62190e88d7b1588066889c136b583deae2a8", "filename": "libstdc++-v3/testsuite/20_util/uses_allocator/69293_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23972128c83e62011b583f06b32c8501c096b7d8/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fuses_allocator%2F69293_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23972128c83e62011b583f06b32c8501c096b7d8/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fuses_allocator%2F69293_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fuses_allocator%2F69293_neg.cc?ref=23972128c83e62011b583f06b32c8501c096b7d8", "patch": "@@ -45,5 +45,5 @@ test01()\n   alloc_type a;\n   std::tuple<X> t(std::allocator_arg, a); // this is required to be ill-formed\n   // { dg-error \"failed: .* uses_allocator is true\" \"\" { target *-*-* } 0 }\n-  // { dg-error \"no matching function for call\" \"\" { target c++2a } 0 }\n+  // { dg-error \"too many initializers for 'X'\" \"\" { target c++2a } 0 }\n }"}, {"sha": "e858e3508bda1c41a094177cd7aefbd9127791ae", "filename": "libstdc++-v3/testsuite/27_io/filesystem/path/io/dr2989.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23972128c83e62011b583f06b32c8501c096b7d8/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Ffilesystem%2Fpath%2Fio%2Fdr2989.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23972128c83e62011b583f06b32c8501c096b7d8/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Ffilesystem%2Fpath%2Fio%2Fdr2989.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Ffilesystem%2Fpath%2Fio%2Fdr2989.cc?ref=23972128c83e62011b583f06b32c8501c096b7d8", "patch": "@@ -33,3 +33,4 @@ void foo(std::iostream& s) {\n   s >> p; // { dg-error \"no match\" }\n }\n // { dg-prune-output \"no type .*enable_if\" }\n+// { dg-prune-output \"template constraint failure\" }"}]}