{"sha": "2abefe3d992a31a4f060f25857b067b397b7bac9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmFiZWZlM2Q5OTJhMzFhNGYwNjBmMjU4NTdiMDY3YjM5N2I3YmFjOQ==", "commit": {"author": {"name": "Paolo Bonzini", "email": "bonzini@gnu.org", "date": "2005-12-05T15:00:27Z"}, "committer": {"name": "Paolo Bonzini", "email": "bonzini@gcc.gnu.org", "date": "2005-12-05T15:00:27Z"}, "message": "configure.in (CONFIGURED_BISON, [...]): Remove \"CONFIGURED_\" from the AC_CHECK_PROGS invocation.\n\ntoplevel:\n2005-12-05  Paolo Bonzini  <bonzini@gnu.org>\n\n\t* configure.in (CONFIGURED_BISON, CONFIGURED_YACC, CONFIGURED_M4,\n\tCONFIGURED_FLEX, CONFIGURED_LEX, CONFIGURED_MAKEINFO): Remove\n\t\"CONFIGURED_\" from the AC_CHECK_PROGS invocation.  Move below.\n\tFind in-tree tools if available.\n\t(EXPECT, RUNTEST, LIPO, STRIP): Find them and substitute them.\n\t(CONFIGURED_*_FOR_TARGET): Don't set nor substitute.\n\t(*_FOR_TARGET): Set them with GCC_TARGET_TOOL.\n\t(COMPILER_*_FOR_TARGET): New.\n\t* Makefile.tpl (HOST_EXPORTS): Add *_FOR_TARGET symbols that gcc needs.\n\t(BASE_TARGET_EXPORTS): Use COMPILER_*_FOR_TARGET symbols.\n\t(CONFIGURED_*, USUAL_*): Remove.\n\t(BISON, YACC, FLEX, LEX, M4, MAKEINFO, EXPECT, RUNTEST, LIPO,\n\tSTRIP): Use autoconf substitutions.\n\t(COMPILER_AS_FOR_TARGET, COMPILER_LD_FOR_TARGET,\n\tCOMPILER_NM_FOR_TARGET): New.\n\t(EXTRA_HOST_FLAGS): Pass LIPO and STRIP.\n\n\t(all): Make all-host and all-target in parallel.\n\t(do-[+make_target+], do-check, install, [+compare-target+]): Ensure\n\tthat $$r and $$s are set before invoking a recursive make.\n\t(stage[+id+]-bubble): Likewise, and invoke the comparison at the end.\n\t([+bootstrap-target+]): Inline most of the `all' target.\n\nconfig:\n2005-12-05  Paolo Bonzini  <bonzini@gnu.org>\n\n        * acx.m4 (GCC_TARGET_TOOL): New.\n\nFrom-SVN: r108059", "tree": {"sha": "05cc5ce809715a6dd302c3a48e97b1407f60db9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/05cc5ce809715a6dd302c3a48e97b1407f60db9d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2abefe3d992a31a4f060f25857b067b397b7bac9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2abefe3d992a31a4f060f25857b067b397b7bac9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2abefe3d992a31a4f060f25857b067b397b7bac9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2abefe3d992a31a4f060f25857b067b397b7bac9/comments", "author": {"login": "bonzini", "id": 42082, "node_id": "MDQ6VXNlcjQyMDgy", "avatar_url": "https://avatars.githubusercontent.com/u/42082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bonzini", "html_url": "https://github.com/bonzini", "followers_url": "https://api.github.com/users/bonzini/followers", "following_url": "https://api.github.com/users/bonzini/following{/other_user}", "gists_url": "https://api.github.com/users/bonzini/gists{/gist_id}", "starred_url": "https://api.github.com/users/bonzini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bonzini/subscriptions", "organizations_url": "https://api.github.com/users/bonzini/orgs", "repos_url": "https://api.github.com/users/bonzini/repos", "events_url": "https://api.github.com/users/bonzini/events{/privacy}", "received_events_url": "https://api.github.com/users/bonzini/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "40077270f8138fe8a3c032cd0d5146089b858306", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40077270f8138fe8a3c032cd0d5146089b858306", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40077270f8138fe8a3c032cd0d5146089b858306"}], "stats": {"total": 2396, "additions": 1324, "deletions": 1072}, "files": [{"sha": "6dcc41c61108017cd443ff1c8cfca1076aa44c40", "filename": "ChangeLog", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abefe3d992a31a4f060f25857b067b397b7bac9/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abefe3d992a31a4f060f25857b067b397b7bac9/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=2abefe3d992a31a4f060f25857b067b397b7bac9", "patch": "@@ -1,3 +1,28 @@\n+2005-12-05  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\t* configure.in (CONFIGURED_BISON, CONFIGURED_YACC, CONFIGURED_M4,\n+\tCONFIGURED_FLEX, CONFIGURED_LEX, CONFIGURED_MAKEINFO): Remove\n+\t\"CONFIGURED_\" from the AC_CHECK_PROGS invocation.  Move below.\n+\tFind in-tree tools if available.\n+\t(EXPECT, RUNTEST, LIPO, STRIP): Find them and substitute them.\n+\t(CONFIGURED_*_FOR_TARGET): Don't set nor substitute.\n+\t(*_FOR_TARGET): Set them with GCC_TARGET_TOOL.\n+\t(COMPILER_*_FOR_TARGET): New.\n+\t* Makefile.tpl (HOST_EXPORTS): Add *_FOR_TARGET symbols that gcc needs.\n+\t(BASE_TARGET_EXPORTS): Use COMPILER_*_FOR_TARGET symbols.\n+\t(CONFIGURED_*, USUAL_*): Remove.\n+\t(BISON, YACC, FLEX, LEX, M4, MAKEINFO, EXPECT, RUNTEST, LIPO,\n+\tSTRIP): Use autoconf substitutions.\n+\t(COMPILER_AS_FOR_TARGET, COMPILER_LD_FOR_TARGET,\n+\tCOMPILER_NM_FOR_TARGET): New.\n+\t(EXTRA_HOST_FLAGS): Pass LIPO and STRIP.\n+\n+\t(all): Make all-host and all-target in parallel.\n+\t(do-[+make_target+], do-check, install, [+compare-target+]): Ensure\n+\tthat $$r and $$s are set before invoking a recursive make.\n+\t(stage[+id+]-bubble): Likewise, and invoke the comparison at the end.\n+\t([+bootstrap-target+]): Inline most of the `all' target.\n+\n 2005-11-29  Ben Elliston  <bje@au.ibm.com>\n \n \t* Makefile.tpl (clean-target-libgcc): Invoke clean-target-libgcc"}, {"sha": "5bedd9e98cb49733a515522a87f0a7f349547088", "filename": "Makefile.in", "status": "modified", "additions": 109, "deletions": 324, "changes": 433, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abefe3d992a31a4f060f25857b067b397b7bac9/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abefe3d992a31a4f060f25857b067b397b7bac9/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=2abefe3d992a31a4f060f25857b067b397b7bac9", "patch": "@@ -133,7 +133,8 @@ HOST_CONFIGARGS = @host_configargs@\n # with srcdir=..\n HOST_SUBDIR = @host_subdir@\n # This is the list of variables to export in the environment when\n-# configuring subdirectories for the host system.\n+# configuring subdirectories for the host system.  We need to pass\n+# some to the GCC configure because of its hybrid host/target nature.\n HOST_EXPORTS = \\\n \t$(BASE_EXPORTS) \\\n \tCC=\"$(CC)\"; export CC; \\\n@@ -152,6 +153,13 @@ HOST_EXPORTS = \\\n \tWINDRES=\"$(WINDRES)\"; export WINDRES; \\\n \tOBJCOPY=\"$(OBJCOPY)\"; export OBJCOPY; \\\n \tOBJDUMP=\"$(OBJDUMP)\"; export OBJDUMP; \\\n+\tAR_FOR_TARGET=\"$(AR_FOR_TARGET)\"; export AR_FOR_TARGET; \\\n+\tAS_FOR_TARGET=\"$(AS_FOR_TARGET)\"; export AS_FOR_TARGET; \\\n+\tGCC_FOR_TARGET=\"$(GCC_FOR_TARGET)\"; export GCC_FOR_TARGET; \\\n+\tLD_FOR_TARGET=\"$(LD_FOR_TARGET)\"; export LD_FOR_TARGET; \\\n+\tNM_FOR_TARGET=\"$(NM_FOR_TARGET)\"; export NM_FOR_TARGET; \\\n+\tOBJDUMP_FOR_TARGET=\"$(OBJDUMP_FOR_TARGET)\"; export OBJDUMP_FOR_TARGET; \\\n+\tRANLIB_FOR_TARGET=\"$(RANLIB_FOR_TARGET)\"; export RANLIB_FOR_TARGET; \\\n \tTOPLEVEL_CONFIGURE_ARGUMENTS=\"$(TOPLEVEL_CONFIGURE_ARGUMENTS)\"; export TOPLEVEL_CONFIGURE_ARGUMENTS; \\\n \tGMPLIBS=\"$(HOST_GMPLIBS)\"; export GMPLIBS; \\\n \tGMPINC=\"$(HOST_GMPINC)\"; export GMPINC; \\\n@@ -183,7 +191,7 @@ TARGET_CONFIGARGS = @target_configargs@ --with-target-subdir=\"$(TARGET_SUBDIR)\"\n BASE_TARGET_EXPORTS = \\\n \t$(BASE_EXPORTS) \\\n \tAR=\"$(AR_FOR_TARGET)\"; export AR; \\\n-\tAS=\"$(AS_FOR_TARGET)\"; export AS; \\\n+\tAS=\"$(COMPILER_AS_FOR_TARGET)\"; export AS; \\\n \tCC=\"$(CC_FOR_TARGET)\"; export CC; \\\n \tCFLAGS=\"$(CFLAGS_FOR_TARGET)\"; export CFLAGS; \\\n \tCONFIG_SHELL=\"$(SHELL)\"; export CONFIG_SHELL; \\\n@@ -192,10 +200,10 @@ BASE_TARGET_EXPORTS = \\\n \tGCJ=\"$(GCJ_FOR_TARGET)\"; export GCJ; \\\n \tGFORTRAN=\"$(GFORTRAN_FOR_TARGET)\"; export GFORTRAN; \\\n \tDLLTOOL=\"$(DLLTOOL_FOR_TARGET)\"; export DLLTOOL; \\\n-\tLD=\"$(LD_FOR_TARGET)\"; export LD; \\\n+\tLD=\"$(COMPILER_LD_FOR_TARGET)\"; export LD; \\\n \tLDFLAGS=\"$(LDFLAGS_FOR_TARGET)\"; export LDFLAGS; \\\n \tLIPO=\"$(LIPO_FOR_TARGET)\"; export LIPO; \\\n-\tNM=\"$(NM_FOR_TARGET)\"; export NM; \\\n+\tNM=\"$(COMPILER_NM_FOR_TARGET)\"; export NM; \\\n \tOBJDUMP=\"$(OBJDUMP_FOR_TARGET)\"; export OBJDUMP; \\\n \tRANLIB=\"$(RANLIB_FOR_TARGET)\"; export RANLIB; \\\n \tSTRIP=\"$(STRIP_FOR_TARGET)\"; export STRIP; \\\n@@ -245,91 +253,43 @@ BUILD_PREFIX_1 = @BUILD_PREFIX_1@\n # here so that they can be overridden by Makefile fragments.\n BOOT_CFLAGS= -g -O2\n \n-CONFIGURED_BISON = @CONFIGURED_BISON@\n-BISON = `if [ -f $$r/$(BUILD_SUBDIR)/bison/tests/bison ] ; then \\\n-\t    echo $$r/$(BUILD_SUBDIR)/bison/tests/bison ; \\\n-\t else \\\n-\t    echo ${CONFIGURED_BISON} ; \\\n-\t fi`\n-\n-CONFIGURED_YACC = @CONFIGURED_YACC@\n-YACC = `if [ -f $$r/$(BUILD_SUBDIR)/bison/tests/bison ] ; then \\\n-\t    echo $$r/$(BUILD_SUBDIR)/bison/tests/bison -y ; \\\n-\telif [ -f $$r/$(BUILD_SUBDIR)/byacc/byacc ] ; then \\\n-\t    echo $$r/$(BUILD_SUBDIR)/byacc/byacc ; \\\n-\telse \\\n-\t    echo ${CONFIGURED_YACC} ; \\\n-\tfi`\n-\n-CONFIGURED_FLEX = @CONFIGURED_FLEX@\n-FLEX = `if [ -f $$r/$(BUILD_SUBDIR)/flex/flex ] ; \\\n-\tthen echo $$r/$(BUILD_SUBDIR)/flex/flex ; \\\n-\telse echo ${CONFIGURED_FLEX} ; fi`\n-\n-CONFIGURED_LEX = @CONFIGURED_LEX@\n-LEX = `if [ -f $$r/$(BUILD_SUBDIR)/flex/flex ] ; \\\n-\tthen echo $$r/$(BUILD_SUBDIR)/flex/flex ; \\\n-\telse echo ${CONFIGURED_LEX} ; fi`\n-\n-CONFIGURED_M4 = @CONFIGURED_M4@\n-M4 = `if [ -f $$r/$(BUILD_SUBDIR)/m4/m4 ] ; \\\n-\tthen echo $$r/$(BUILD_SUBDIR)/m4/m4 ; \\\n-\telse echo ${CONFIGURED_M4} ; fi`\n-\n-# For an installed makeinfo, we require it to be from texinfo 4.2 or\n-# higher, else we use the \"missing\" dummy.  We also pass the subdirectory\n-# makeinfo even if only the Makefile is there, because Texinfo builds its\n-# manual when made, and it requires its own version.\n-CONFIGURED_MAKEINFO = @CONFIGURED_MAKEINFO@\n-MAKEINFO = `if [ -f $$r/$(BUILD_SUBDIR)/texinfo/makeinfo/Makefile ] ; \\\n-\tthen echo $$r/$(BUILD_SUBDIR)/texinfo/makeinfo/makeinfo ; \\\n-\telse if (${CONFIGURED_MAKEINFO} --version \\\n-\t  | egrep 'texinfo[^0-9]*([1-3][0-9]|4\\.[2-9]|[5-9])') >/dev/null 2>&1; \\\n-        then echo ${CONFIGURED_MAKEINFO}; else echo $$s/missing makeinfo; fi; fi`\n+BISON = @BISON@\n+YACC = @YACC@\n+FLEX = @FLEX@\n+LEX = @LEX@\n+M4 = @M4@\n+MAKEINFO = @MAKEINFO@\n+EXPECT = @EXPECT@\n+RUNTEST = @RUNTEST@\n \n # This just becomes part of the MAKEINFO definition passed down to\n # sub-makes.  It lets flags be given on the command line while still\n # using the makeinfo from the object tree.\n # (Default to avoid splitting info files by setting the threshold high.)\n MAKEINFOFLAGS = --split-size=5000000\n \n-# FIXME: expect may become a build tool?\n-EXPECT = `if [ -f $$r/$(HOST_SUBDIR)/expect/expect ] ; \\\n-\tthen echo $$r/$(HOST_SUBDIR)/expect/expect ; \\\n-\telse echo expect ; fi`\n-\n-RUNTEST = `if [ -f $$s/dejagnu/runtest ] ; \\\n-\tthen echo $$s/dejagnu/runtest ; \\\n-\telse echo runtest ; fi`\n-\n # ---------------------------------------------\n # Programs producing files for the HOST machine\n # ---------------------------------------------\n \n AS = @AS@\n-\n AR = @AR@\n AR_FLAGS = rc\n-\n CC = @CC@\n-CFLAGS = @CFLAGS@\n-LIBCFLAGS = $(CFLAGS)\n-\n CXX = @CXX@\n-CXXFLAGS = @CXXFLAGS@\n-LIBCXXFLAGS = $(CXXFLAGS) -fno-implicit-templates\n-\n DLLTOOL = @DLLTOOL@\n-\n-NM = @NM@\n-\n LD = @LD@\n-LDFLAGS = \n-\n+LIPO = @LIPO@\n+NM = @NM@\n RANLIB = @RANLIB@\n-\n+STRIP = @STRIP@\n WINDRES = @WINDRES@\n \n+CFLAGS = @CFLAGS@\n+LDFLAGS = \n+LIBCFLAGS = $(CFLAGS)\n+CXXFLAGS = @CXXFLAGS@\n+LIBCXXFLAGS = $(CXXFLAGS) -fno-implicit-templates\n PICFLAG = \n \n # -----------------------------------------------\n@@ -339,242 +299,42 @@ PICFLAG =\n FLAGS_FOR_TARGET = @FLAGS_FOR_TARGET@\n \n AR_FOR_TARGET=@AR_FOR_TARGET@\n-CONFIGURED_AR_FOR_TARGET=@CONFIGURED_AR_FOR_TARGET@\n-USUAL_AR_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/ar ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/ar ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(AR); \\\n-    else \\\n-      echo $(CONFIGURED_AR_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n AS_FOR_TARGET=@AS_FOR_TARGET@\n-CONFIGURED_AS_FOR_TARGET=@CONFIGURED_AS_FOR_TARGET@\n-USUAL_AS_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gas/as-new ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/gas/as-new ; \\\n-  elif [ -f $$r/$(HOST_SUBDIR)/gcc/as ]; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/as ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(AS); \\\n-    else \\\n-      echo $(CONFIGURED_AS_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n CC_FOR_TARGET=$(STAGE_CC_WRAPPER) @CC_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n-CONFIGURED_CC_FOR_TARGET=@CONFIGURED_CC_FOR_TARGET@\n-USUAL_CC_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gcc/xgcc ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/xgcc -B$$r/$(HOST_SUBDIR)/gcc/ ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(CC); \\\n-    else \\\n-      echo $(CONFIGURED_CC_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n-# During gcc bootstrap, if we use some random cc for stage1 then\n-# CFLAGS will be just -g.  We want to ensure that TARGET libraries\n-# (which we know are built with gcc) are built with optimizations so\n-# prepend -O2 when setting CFLAGS_FOR_TARGET.\n-CFLAGS_FOR_TARGET = -O2 $(CFLAGS) $(SYSROOT_CFLAGS_FOR_TARGET)\n-SYSROOT_CFLAGS_FOR_TARGET = @SYSROOT_CFLAGS_FOR_TARGET@\n \n # If GCC_FOR_TARGET is not overriden on the command line, then this\n # variable is passed down to the gcc Makefile, where it is used to\n # build libgcc2.a.  We define it here so that it can itself be\n # overridden on the command line.\n-GCC_FOR_TARGET=@GCC_FOR_TARGET@\n-CONFIGURED_GCC_FOR_TARGET=@CONFIGURED_GCC_FOR_TARGET@\n-USUAL_GCC_FOR_TARGET = $(STAGE_CC_WRAPPER) \\\n-  $$r/$(HOST_SUBDIR)/gcc/xgcc -B$$r/$(HOST_SUBDIR)/gcc/ $(FLAGS_FOR_TARGET)\n-LIBCFLAGS_FOR_TARGET = $(CFLAGS_FOR_TARGET)\n-\n+GCC_FOR_TARGET=$(STAGE_CC_WRAPPER) @GCC_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n CXX_FOR_TARGET=$(STAGE_CC_WRAPPER) @CXX_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n-CONFIGURED_CXX_FOR_TARGET=@CONFIGURED_CXX_FOR_TARGET@\n-USUAL_CXX_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gcc/g++ ] ; then \\\n-    (echo $$r/$(HOST_SUBDIR)/gcc/g++ -B$$r/$(HOST_SUBDIR)/gcc -nostdinc++; \\\n-    test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags --build-includes; \\\n-    echo -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs) | tr '\\015\\012' '  '; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(CXX); \\\n-    else \\\n-      echo $(CONFIGURED_CXX_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n RAW_CXX_FOR_TARGET=$(STAGE_CC_WRAPPER) @RAW_CXX_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n-USUAL_RAW_CXX_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gcc/xgcc ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/xgcc -shared-libgcc -B$$r/$(HOST_SUBDIR)/gcc -nostdinc++ -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(CXX); \\\n-    else \\\n-      echo $(CONFIGURED_CXX_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n-CXXFLAGS_FOR_TARGET = $(CXXFLAGS) $(SYSROOT_CFLAGS_FOR_TARGET)\n-LIBCXXFLAGS_FOR_TARGET = $(CXXFLAGS_FOR_TARGET) -fno-implicit-templates\n-\n GCJ_FOR_TARGET=$(STAGE_CC_WRAPPER) @GCJ_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n-CONFIGURED_GCJ_FOR_TARGET=@CONFIGURED_GCJ_FOR_TARGET@\n-USUAL_GCJ_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gcc/gcj ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/gcj -B$$r/$(HOST_SUBDIR)/gcc ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(GCJ); \\\n-    else \\\n-      echo $(CONFIGURED_GCJ_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n GFORTRAN_FOR_TARGET=$(STAGE_CC_WRAPPER) @GFORTRAN_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n-CONFIGURED_GFORTRAN_FOR_TARGET=@CONFIGURED_GFORTRAN_FOR_TARGET@\n-USUAL_GFORTRAN_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gcc/gfortran ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/gfortran -B$$r/$(HOST_SUBDIR)/gcc ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(GFORTRAN); \\\n-    else \\\n-      echo $(CONFIGURED_GFORTRAN_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n-\n DLLTOOL_FOR_TARGET=@DLLTOOL_FOR_TARGET@\n-CONFIGURED_DLLTOOL_FOR_TARGET=@CONFIGURED_DLLTOOL_FOR_TARGET@\n-USUAL_DLLTOOL_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/dlltool ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/dlltool ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(DLLTOOL); \\\n-    else \\\n-      echo $(CONFIGURED_DLLTOOL_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n LD_FOR_TARGET=@LD_FOR_TARGET@\n-CONFIGURED_LD_FOR_TARGET=@CONFIGURED_LD_FOR_TARGET@\n-USUAL_LD_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/ld/ld-new ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/ld/ld-new ; \\\n-  elif [ -f $$r/$(HOST_SUBDIR)/gcc/collect-ld ]; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/collect-ld ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(LD); \\\n-    else \\\n-      echo $(CONFIGURED_LD_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n-LDFLAGS_FOR_TARGET = \n \n LIPO_FOR_TARGET=@LIPO_FOR_TARGET@\n-CONFIGURED_LIPO_FOR_TARGET=@CONFIGURED_LIPO_FOR_TARGET@\n-USUAL_LIPO_FOR_TARGET = ` \\\n-  if [ '$(host)' = '$(target)' ] ; then \\\n-    if [ x'$(LIPO)' != x ]; then \\\n-       echo $(LIPO); \\\n-    else \\\n-       echo lipo; \\\n-    fi; \\\n-  else \\\n-    echo $(CONFIGURED_LIPO_FOR_TARGET) ; \\\n-  fi`\n-\n NM_FOR_TARGET=@NM_FOR_TARGET@\n-CONFIGURED_NM_FOR_TARGET=@CONFIGURED_NM_FOR_TARGET@\n-USUAL_NM_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/nm-new ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/nm-new ; \\\n-  elif [ -f $$r/$(HOST_SUBDIR)/gcc/nm ]; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/nm ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(NM); \\\n-    else \\\n-      echo $(CONFIGURED_NM_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n OBJDUMP_FOR_TARGET=@OBJDUMP_FOR_TARGET@\n-CONFIGURED_OBJDUMP_FOR_TARGET=@CONFIGURED_OBJDUMP_FOR_TARGET@\n-USUAL_OBJDUMP_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/objdump ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/objdump ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      if [ x'$(OBJDUMP)' != x ]; then \\\n-         echo $(OBJDUMP); \\\n-      else \\\n-         echo objdump; \\\n-      fi; \\\n-    else \\\n-      echo $(CONFIGURED_OBJDUMP_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n RANLIB_FOR_TARGET=@RANLIB_FOR_TARGET@\n-CONFIGURED_RANLIB_FOR_TARGET=@CONFIGURED_RANLIB_FOR_TARGET@\n-USUAL_RANLIB_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/ranlib ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/ranlib ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      if [ x'$(RANLIB)' != x ]; then \\\n-         echo $(RANLIB); \\\n-      else \\\n-         echo ranlib; \\\n-      fi; \\\n-    else \\\n-      echo $(CONFIGURED_RANLIB_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n STRIP_FOR_TARGET=@STRIP_FOR_TARGET@\n-CONFIGURED_STRIP_FOR_TARGET=@CONFIGURED_STRIP_FOR_TARGET@\n-USUAL_STRIP_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/strip ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/strip ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      if [ x'$(STRIP)' != x ]; then \\\n-         echo $(STRIP); \\\n-      else \\\n-         echo strip; \\\n-      fi; \\\n-    else \\\n-      echo $(CONFIGURED_STRIP_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n WINDRES_FOR_TARGET=@WINDRES_FOR_TARGET@\n-CONFIGURED_WINDRES_FOR_TARGET=@CONFIGURED_WINDRES_FOR_TARGET@\n-USUAL_WINDRES_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/windres ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/windres ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(WINDRES); \\\n-    else \\\n-      echo $(CONFIGURED_WINDRES_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n \n+COMPILER_AS_FOR_TARGET=@COMPILER_AS_FOR_TARGET@\n+COMPILER_LD_FOR_TARGET=@COMPILER_LD_FOR_TARGET@\n+COMPILER_NM_FOR_TARGET=@COMPILER_NM_FOR_TARGET@\n+\n+# During gcc bootstrap, if we use some random cc for stage1 then\n+# CFLAGS will be just -g.  We want to ensure that TARGET libraries\n+# (which we know are built with gcc) are built with optimizations so\n+# prepend -O2 when setting CFLAGS_FOR_TARGET.\n+CFLAGS_FOR_TARGET = -O2 $(CFLAGS) $(SYSROOT_CFLAGS_FOR_TARGET)\n+SYSROOT_CFLAGS_FOR_TARGET = @SYSROOT_CFLAGS_FOR_TARGET@\n+CXXFLAGS_FOR_TARGET = $(CXXFLAGS) $(SYSROOT_CFLAGS_FOR_TARGET)\n+LIBCFLAGS_FOR_TARGET = $(CFLAGS_FOR_TARGET)\n+LIBCXXFLAGS_FOR_TARGET = $(CXXFLAGS_FOR_TARGET) -fno-implicit-templates\n+LDFLAGS_FOR_TARGET = \n PICFLAG_FOR_TARGET = \n \n # ------------------------------------\n@@ -712,8 +472,10 @@ EXTRA_HOST_FLAGS = \\\n \t'CXX=$(CXX)' \\\n \t'DLLTOOL=$(DLLTOOL)' \\\n \t'LD=$(LD)' \\\n+\t'LIPO=$(LIPO)' \\\n \t'NM=$(NM)' \\\n \t'RANLIB=$(RANLIB)' \\\n+\t'STRIP=$(STRIP)' \\\n \t'WINDRES=$(WINDRES)'\n \n FLAGS_TO_PASS = $(BASE_FLAGS_TO_PASS) $(EXTRA_HOST_FLAGS)\n@@ -735,17 +497,17 @@ X11_FLAGS_TO_PASS = \\\n # are set in BASE_FLAGS_TO_PASS, and the sub-make will expand them.\n EXTRA_TARGET_FLAGS = \\\n \t'AR=$$(AR_FOR_TARGET)' \\\n-\t'AS=$$(AS_FOR_TARGET)' \\\n+\t'AS=$$(COMPILER_AS_FOR_TARGET)' \\\n \t'CC=$$(CC_FOR_TARGET)' \\\n \t'CFLAGS=$$(CFLAGS_FOR_TARGET)' \\\n \t'CXX=$$(CXX_FOR_TARGET)' \\\n \t'CXXFLAGS=$$(CXXFLAGS_FOR_TARGET)' \\\n \t'DLLTOOL=$$(DLLTOOL_FOR_TARGET)' \\\n-\t'LD=$$(LD_FOR_TARGET)' \\\n+\t'LD=$$(COMPILER_LD_FOR_TARGET)' \\\n \t'LDFLAGS=$$(LDFLAGS_FOR_TARGET)' \\\n \t'LIBCFLAGS=$$(LIBCFLAGS_FOR_TARGET)' \\\n \t'LIBCXXFLAGS=$$(LIBCXXFLAGS_FOR_TARGET)' \\\n-\t'NM=$$(NM_FOR_TARGET)' \\\n+\t'NM=$$(COMPILER_NM_FOR_TARGET)' \\\n \t'OBJDUMP=$$(OBJDUMP_FOR_TARGET)' \\\n \t'RANLIB=$$(RANLIB_FOR_TARGET)' \\\n \t'WINDRES=$$(WINDRES_FOR_TARGET)'\n@@ -870,28 +632,19 @@ configure-target:  \\\n .PHONY: all\n all:\n @if gcc-bootstrap\n+\t[ -f stage_final ] || echo stage3 > stage_final\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\tif [ ! -f stage_last ]; then \\\n-\t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) bootstrap; \\\n-\tfi\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) `cat stage_final`-bubble; \\\n @endif gcc-bootstrap\n \t@$(unstage)\n-@if gcc-no-bootstrap\n-\t@r=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all-prebootstrap\n-@endif gcc-no-bootstrap\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \tif [ -f stage_last ]; then \\\n-\t  $(MAKE) $(TARGET_FLAGS_TO_PASS) all-host; \\\n+\t  $(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target; \\\n \telse \\\n-\t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) all-host; \\\n+\t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) all-host all-target; \\\n \tfi\n-\t@r=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all-target\n \t@$(stage)\n \n .PHONY: all-build\n@@ -35790,7 +35543,7 @@ stage = :\n \n @if gcc-bootstrap\n unstage = [ -f stage_current ] || $(MAKE) `cat stage_last`-start\n-stage = $(MAKE) `cat stage_current`-end\n+stage = [ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n @endif gcc-bootstrap\n \n .PHONY: unstage stage\n@@ -35845,7 +35598,7 @@ POSTSTAGE1_FLAGS_TO_PASS = \\\n .PHONY: stage1-start stage1-end\n \n stage1-start::\n-\t@[ -f stage_current ] && $(MAKE) `cat stage_current`-end || : ; \\\n+\t@$(stage); \\\n \techo stage1 > stage_current ; \\\n \techo stage1 > stage_last; \\\n \t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR) $(TARGET_SUBDIR)\n@@ -35991,7 +35744,7 @@ do-clean: clean-stage1\n \n .PHONY: distclean-stage1\n distclean-stage1::\n-\t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n+\t@$(stage)\n \trm -rf stage1-* \n \n \n@@ -36001,7 +35754,7 @@ distclean-stage1::\n .PHONY: stage2-start stage2-end\n \n stage2-start::\n-\t@[ -f stage_current ] && $(MAKE) `cat stage_current`-end || : ; \\\n+\t@$(stage); \\\n \techo stage2 > stage_current ; \\\n \techo stage2 > stage_last; \\\n \t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR) $(TARGET_SUBDIR)\n@@ -36187,15 +35940,23 @@ do-clean: clean-stage2\n \n \n .PHONY: bootstrap2\n-bootstrap2: stage2-bubble\n-\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all\n+bootstrap2:\n+\techo stage2 > stage_final\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) stage2-bubble\n+\t@$(unstage)\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n+\t@$(stage)\n \n \n # Rules to wipe a stage and all the following ones, also used for cleanstrap\n distclean-stage1:: distclean-stage2 \n .PHONY: distclean-stage2\n distclean-stage2::\n-\t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n+\t@$(stage)\n \trm -rf stage2-* \n \n \n@@ -36205,7 +35966,7 @@ distclean-stage2::\n .PHONY: stage3-start stage3-end\n \n stage3-start::\n-\t@[ -f stage_current ] && $(MAKE) `cat stage_current`-end || : ; \\\n+\t@$(stage); \\\n \techo stage3 > stage_current ; \\\n \techo stage3 > stage_last; \\\n \t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR) $(TARGET_SUBDIR)\n@@ -36381,6 +36142,7 @@ stage3-bubble:: stage2-bubble\n \t  $(MAKE) stage3-start; \\\n \t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) all-stage3; \\\n \tfi\n+\t$(MAKE) compare\n \n .PHONY: all-stage3 clean-stage3\n do-clean: clean-stage3\n@@ -36396,7 +36158,7 @@ compare:\n \t  echo Cannot compare object files as stage 2 was deleted. ; \\\n \t  exit 0 ; \\\n \tfi; \\\n-\t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || : ; \\\n+\t$(stage); \\\n \trm -f .bad_compare ; \\\n \tcd stage3-gcc; \\\n \tfiles=`find . -name \"*$(objext)\" -print` ; \\\n@@ -36426,16 +36188,23 @@ compare:\n \n \n .PHONY: bootstrap\n-bootstrap: stage3-bubble\n-\t$(MAKE) compare\n-\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all\n+bootstrap:\n+\techo stage3 > stage_final\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) stage3-bubble\n+\t@$(unstage)\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n+\t@$(stage)\n \n \n # Rules to wipe a stage and all the following ones, also used for cleanstrap\n distclean-stage2:: distclean-stage3 \n .PHONY: distclean-stage3\n distclean-stage3::\n-\t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n+\t@$(stage)\n \trm -rf stage3-* compare \n \n \n@@ -36448,7 +36217,7 @@ cleanstrap: distclean bootstrap\n .PHONY: stage4-start stage4-end\n \n stage4-start::\n-\t@[ -f stage_current ] && $(MAKE) `cat stage_current`-end || : ; \\\n+\t@$(stage); \\\n \techo stage4 > stage_current ; \\\n \techo stage4 > stage_last; \\\n \t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR) $(TARGET_SUBDIR)\n@@ -36624,6 +36393,7 @@ stage4-bubble:: stage3-bubble\n \t  $(MAKE) stage4-start; \\\n \t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) all-stage4; \\\n \tfi\n+\t$(MAKE) compare3\n \n .PHONY: all-stage4 clean-stage4\n do-clean: clean-stage4\n@@ -36639,7 +36409,7 @@ compare3:\n \t  echo Cannot compare object files as stage 3 was deleted. ; \\\n \t  exit 0 ; \\\n \tfi; \\\n-\t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || : ; \\\n+\t$(stage); \\\n \trm -f .bad_compare ; \\\n \tcd stage4-gcc; \\\n \tfiles=`find . -name \"*$(objext)\" -print` ; \\\n@@ -36669,16 +36439,23 @@ compare3:\n \n \n .PHONY: bootstrap4\n-bootstrap4: stage4-bubble\n-\t$(MAKE) compare3\n-\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all\n+bootstrap4:\n+\techo stage4 > stage_final\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) stage4-bubble\n+\t@$(unstage)\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n+\t@$(stage)\n \n \n # Rules to wipe a stage and all the following ones, also used for cleanstrap\n distclean-stage3:: distclean-stage4 \n .PHONY: distclean-stage4\n distclean-stage4::\n-\t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n+\t@$(stage)\n \trm -rf stage4-* compare3 \n \n \n@@ -36688,7 +36465,7 @@ distclean-stage4::\n .PHONY: stageprofile-start stageprofile-end\n \n stageprofile-start::\n-\t@[ -f stage_current ] && $(MAKE) `cat stage_current`-end || : ; \\\n+\t@$(stage); \\\n \techo stageprofile > stage_current ; \\\n \techo stageprofile > stage_last; \\\n \t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR) $(TARGET_SUBDIR)\n@@ -36878,7 +36655,7 @@ do-clean: clean-stageprofile\n distclean-stage1:: distclean-stageprofile \n .PHONY: distclean-stageprofile\n distclean-stageprofile::\n-\t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n+\t@$(stage)\n \trm -rf stageprofile-* \n \n \n@@ -36888,7 +36665,7 @@ distclean-stageprofile::\n .PHONY: stagefeedback-start stagefeedback-end\n \n stagefeedback-start::\n-\t@[ -f stage_current ] && $(MAKE) `cat stage_current`-end || : ; \\\n+\t@$(stage); \\\n \techo stagefeedback > stage_current ; \\\n \techo stagefeedback > stage_last; \\\n \t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR) $(TARGET_SUBDIR)\n@@ -37074,15 +36851,23 @@ do-clean: clean-stagefeedback\n \n \n .PHONY: profiledbootstrap\n-profiledbootstrap: stagefeedback-bubble\n-\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all\n+profiledbootstrap:\n+\techo stagefeedback > stage_final\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) stagefeedback-bubble\n+\t@$(unstage)\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n+\t@$(stage)\n \n \n # Rules to wipe a stage and all the following ones, also used for cleanstrap\n distclean-stageprofile:: distclean-stagefeedback \n .PHONY: distclean-stagefeedback\n distclean-stagefeedback::\n-\t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n+\t@$(stage)\n \trm -rf stagefeedback-* \n \n "}, {"sha": "b85f919872eec52a12afef35636c17622ab7f3d2", "filename": "Makefile.tpl", "status": "modified", "additions": 68, "deletions": 307, "changes": 375, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abefe3d992a31a4f060f25857b067b397b7bac9/Makefile.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abefe3d992a31a4f060f25857b067b397b7bac9/Makefile.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.tpl?ref=2abefe3d992a31a4f060f25857b067b397b7bac9", "patch": "@@ -136,7 +136,8 @@ HOST_CONFIGARGS = @host_configargs@\n # with srcdir=..\n HOST_SUBDIR = @host_subdir@\n # This is the list of variables to export in the environment when\n-# configuring subdirectories for the host system.\n+# configuring subdirectories for the host system.  We need to pass\n+# some to the GCC configure because of its hybrid host/target nature.\n HOST_EXPORTS = \\\n \t$(BASE_EXPORTS) \\\n \tCC=\"$(CC)\"; export CC; \\\n@@ -155,6 +156,13 @@ HOST_EXPORTS = \\\n \tWINDRES=\"$(WINDRES)\"; export WINDRES; \\\n \tOBJCOPY=\"$(OBJCOPY)\"; export OBJCOPY; \\\n \tOBJDUMP=\"$(OBJDUMP)\"; export OBJDUMP; \\\n+\tAR_FOR_TARGET=\"$(AR_FOR_TARGET)\"; export AR_FOR_TARGET; \\\n+\tAS_FOR_TARGET=\"$(AS_FOR_TARGET)\"; export AS_FOR_TARGET; \\\n+\tGCC_FOR_TARGET=\"$(GCC_FOR_TARGET)\"; export GCC_FOR_TARGET; \\\n+\tLD_FOR_TARGET=\"$(LD_FOR_TARGET)\"; export LD_FOR_TARGET; \\\n+\tNM_FOR_TARGET=\"$(NM_FOR_TARGET)\"; export NM_FOR_TARGET; \\\n+\tOBJDUMP_FOR_TARGET=\"$(OBJDUMP_FOR_TARGET)\"; export OBJDUMP_FOR_TARGET; \\\n+\tRANLIB_FOR_TARGET=\"$(RANLIB_FOR_TARGET)\"; export RANLIB_FOR_TARGET; \\\n \tTOPLEVEL_CONFIGURE_ARGUMENTS=\"$(TOPLEVEL_CONFIGURE_ARGUMENTS)\"; export TOPLEVEL_CONFIGURE_ARGUMENTS; \\\n \tGMPLIBS=\"$(HOST_GMPLIBS)\"; export GMPLIBS; \\\n \tGMPINC=\"$(HOST_GMPINC)\"; export GMPINC; \\\n@@ -186,7 +194,7 @@ TARGET_CONFIGARGS = @target_configargs@ --with-target-subdir=\"$(TARGET_SUBDIR)\"\n BASE_TARGET_EXPORTS = \\\n \t$(BASE_EXPORTS) \\\n \tAR=\"$(AR_FOR_TARGET)\"; export AR; \\\n-\tAS=\"$(AS_FOR_TARGET)\"; export AS; \\\n+\tAS=\"$(COMPILER_AS_FOR_TARGET)\"; export AS; \\\n \tCC=\"$(CC_FOR_TARGET)\"; export CC; \\\n \tCFLAGS=\"$(CFLAGS_FOR_TARGET)\"; export CFLAGS; \\\n \tCONFIG_SHELL=\"$(SHELL)\"; export CONFIG_SHELL; \\\n@@ -195,10 +203,10 @@ BASE_TARGET_EXPORTS = \\\n \tGCJ=\"$(GCJ_FOR_TARGET)\"; export GCJ; \\\n \tGFORTRAN=\"$(GFORTRAN_FOR_TARGET)\"; export GFORTRAN; \\\n \tDLLTOOL=\"$(DLLTOOL_FOR_TARGET)\"; export DLLTOOL; \\\n-\tLD=\"$(LD_FOR_TARGET)\"; export LD; \\\n+\tLD=\"$(COMPILER_LD_FOR_TARGET)\"; export LD; \\\n \tLDFLAGS=\"$(LDFLAGS_FOR_TARGET)\"; export LDFLAGS; \\\n \tLIPO=\"$(LIPO_FOR_TARGET)\"; export LIPO; \\\n-\tNM=\"$(NM_FOR_TARGET)\"; export NM; \\\n+\tNM=\"$(COMPILER_NM_FOR_TARGET)\"; export NM; \\\n \tOBJDUMP=\"$(OBJDUMP_FOR_TARGET)\"; export OBJDUMP; \\\n \tRANLIB=\"$(RANLIB_FOR_TARGET)\"; export RANLIB; \\\n \tSTRIP=\"$(STRIP_FOR_TARGET)\"; export STRIP; \\\n@@ -248,91 +256,43 @@ BUILD_PREFIX_1 = @BUILD_PREFIX_1@\n # here so that they can be overridden by Makefile fragments.\n BOOT_CFLAGS= -g -O2\n \n-CONFIGURED_BISON = @CONFIGURED_BISON@\n-BISON = `if [ -f $$r/$(BUILD_SUBDIR)/bison/tests/bison ] ; then \\\n-\t    echo $$r/$(BUILD_SUBDIR)/bison/tests/bison ; \\\n-\t else \\\n-\t    echo ${CONFIGURED_BISON} ; \\\n-\t fi`\n-\n-CONFIGURED_YACC = @CONFIGURED_YACC@\n-YACC = `if [ -f $$r/$(BUILD_SUBDIR)/bison/tests/bison ] ; then \\\n-\t    echo $$r/$(BUILD_SUBDIR)/bison/tests/bison -y ; \\\n-\telif [ -f $$r/$(BUILD_SUBDIR)/byacc/byacc ] ; then \\\n-\t    echo $$r/$(BUILD_SUBDIR)/byacc/byacc ; \\\n-\telse \\\n-\t    echo ${CONFIGURED_YACC} ; \\\n-\tfi`\n-\n-CONFIGURED_FLEX = @CONFIGURED_FLEX@\n-FLEX = `if [ -f $$r/$(BUILD_SUBDIR)/flex/flex ] ; \\\n-\tthen echo $$r/$(BUILD_SUBDIR)/flex/flex ; \\\n-\telse echo ${CONFIGURED_FLEX} ; fi`\n-\n-CONFIGURED_LEX = @CONFIGURED_LEX@\n-LEX = `if [ -f $$r/$(BUILD_SUBDIR)/flex/flex ] ; \\\n-\tthen echo $$r/$(BUILD_SUBDIR)/flex/flex ; \\\n-\telse echo ${CONFIGURED_LEX} ; fi`\n-\n-CONFIGURED_M4 = @CONFIGURED_M4@\n-M4 = `if [ -f $$r/$(BUILD_SUBDIR)/m4/m4 ] ; \\\n-\tthen echo $$r/$(BUILD_SUBDIR)/m4/m4 ; \\\n-\telse echo ${CONFIGURED_M4} ; fi`\n-\n-# For an installed makeinfo, we require it to be from texinfo 4.2 or\n-# higher, else we use the \"missing\" dummy.  We also pass the subdirectory\n-# makeinfo even if only the Makefile is there, because Texinfo builds its\n-# manual when made, and it requires its own version.\n-CONFIGURED_MAKEINFO = @CONFIGURED_MAKEINFO@\n-MAKEINFO = `if [ -f $$r/$(BUILD_SUBDIR)/texinfo/makeinfo/Makefile ] ; \\\n-\tthen echo $$r/$(BUILD_SUBDIR)/texinfo/makeinfo/makeinfo ; \\\n-\telse if (${CONFIGURED_MAKEINFO} --version \\\n-\t  | egrep 'texinfo[^0-9]*([1-3][0-9]|4\\.[2-9]|[5-9])') >/dev/null 2>&1; \\\n-        then echo ${CONFIGURED_MAKEINFO}; else echo $$s/missing makeinfo; fi; fi`\n+BISON = @BISON@\n+YACC = @YACC@\n+FLEX = @FLEX@\n+LEX = @LEX@\n+M4 = @M4@\n+MAKEINFO = @MAKEINFO@\n+EXPECT = @EXPECT@\n+RUNTEST = @RUNTEST@\n \n # This just becomes part of the MAKEINFO definition passed down to\n # sub-makes.  It lets flags be given on the command line while still\n # using the makeinfo from the object tree.\n # (Default to avoid splitting info files by setting the threshold high.)\n MAKEINFOFLAGS = --split-size=5000000\n \n-# FIXME: expect may become a build tool?\n-EXPECT = `if [ -f $$r/$(HOST_SUBDIR)/expect/expect ] ; \\\n-\tthen echo $$r/$(HOST_SUBDIR)/expect/expect ; \\\n-\telse echo expect ; fi`\n-\n-RUNTEST = `if [ -f $$s/dejagnu/runtest ] ; \\\n-\tthen echo $$s/dejagnu/runtest ; \\\n-\telse echo runtest ; fi`\n-\n # ---------------------------------------------\n # Programs producing files for the HOST machine\n # ---------------------------------------------\n \n AS = @AS@\n-\n AR = @AR@\n AR_FLAGS = rc\n-\n CC = @CC@\n-CFLAGS = @CFLAGS@\n-LIBCFLAGS = $(CFLAGS)\n-\n CXX = @CXX@\n-CXXFLAGS = @CXXFLAGS@\n-LIBCXXFLAGS = $(CXXFLAGS) -fno-implicit-templates\n-\n DLLTOOL = @DLLTOOL@\n-\n-NM = @NM@\n-\n LD = @LD@\n-LDFLAGS = \n-\n+LIPO = @LIPO@\n+NM = @NM@\n RANLIB = @RANLIB@\n-\n+STRIP = @STRIP@\n WINDRES = @WINDRES@\n \n+CFLAGS = @CFLAGS@\n+LDFLAGS = \n+LIBCFLAGS = $(CFLAGS)\n+CXXFLAGS = @CXXFLAGS@\n+LIBCXXFLAGS = $(CXXFLAGS) -fno-implicit-templates\n PICFLAG = \n \n # -----------------------------------------------\n@@ -342,242 +302,42 @@ PICFLAG =\n FLAGS_FOR_TARGET = @FLAGS_FOR_TARGET@\n \n AR_FOR_TARGET=@AR_FOR_TARGET@\n-CONFIGURED_AR_FOR_TARGET=@CONFIGURED_AR_FOR_TARGET@\n-USUAL_AR_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/ar ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/ar ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(AR); \\\n-    else \\\n-      echo $(CONFIGURED_AR_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n AS_FOR_TARGET=@AS_FOR_TARGET@\n-CONFIGURED_AS_FOR_TARGET=@CONFIGURED_AS_FOR_TARGET@\n-USUAL_AS_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gas/as-new ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/gas/as-new ; \\\n-  elif [ -f $$r/$(HOST_SUBDIR)/gcc/as ]; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/as ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(AS); \\\n-    else \\\n-      echo $(CONFIGURED_AS_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n CC_FOR_TARGET=$(STAGE_CC_WRAPPER) @CC_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n-CONFIGURED_CC_FOR_TARGET=@CONFIGURED_CC_FOR_TARGET@\n-USUAL_CC_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gcc/xgcc ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/xgcc -B$$r/$(HOST_SUBDIR)/gcc/ ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(CC); \\\n-    else \\\n-      echo $(CONFIGURED_CC_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n-# During gcc bootstrap, if we use some random cc for stage1 then\n-# CFLAGS will be just -g.  We want to ensure that TARGET libraries\n-# (which we know are built with gcc) are built with optimizations so\n-# prepend -O2 when setting CFLAGS_FOR_TARGET.\n-CFLAGS_FOR_TARGET = -O2 $(CFLAGS) $(SYSROOT_CFLAGS_FOR_TARGET)\n-SYSROOT_CFLAGS_FOR_TARGET = @SYSROOT_CFLAGS_FOR_TARGET@\n \n # If GCC_FOR_TARGET is not overriden on the command line, then this\n # variable is passed down to the gcc Makefile, where it is used to\n # build libgcc2.a.  We define it here so that it can itself be\n # overridden on the command line.\n-GCC_FOR_TARGET=@GCC_FOR_TARGET@\n-CONFIGURED_GCC_FOR_TARGET=@CONFIGURED_GCC_FOR_TARGET@\n-USUAL_GCC_FOR_TARGET = $(STAGE_CC_WRAPPER) \\\n-  $$r/$(HOST_SUBDIR)/gcc/xgcc -B$$r/$(HOST_SUBDIR)/gcc/ $(FLAGS_FOR_TARGET)\n-LIBCFLAGS_FOR_TARGET = $(CFLAGS_FOR_TARGET)\n-\n+GCC_FOR_TARGET=$(STAGE_CC_WRAPPER) @GCC_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n CXX_FOR_TARGET=$(STAGE_CC_WRAPPER) @CXX_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n-CONFIGURED_CXX_FOR_TARGET=@CONFIGURED_CXX_FOR_TARGET@\n-USUAL_CXX_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gcc/g++ ] ; then \\\n-    (echo $$r/$(HOST_SUBDIR)/gcc/g++ -B$$r/$(HOST_SUBDIR)/gcc -nostdinc++; \\\n-    test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags --build-includes; \\\n-    echo -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs) | tr '\\015\\012' '  '; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(CXX); \\\n-    else \\\n-      echo $(CONFIGURED_CXX_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n RAW_CXX_FOR_TARGET=$(STAGE_CC_WRAPPER) @RAW_CXX_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n-USUAL_RAW_CXX_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gcc/xgcc ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/xgcc -shared-libgcc -B$$r/$(HOST_SUBDIR)/gcc -nostdinc++ -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(CXX); \\\n-    else \\\n-      echo $(CONFIGURED_CXX_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n-CXXFLAGS_FOR_TARGET = $(CXXFLAGS) $(SYSROOT_CFLAGS_FOR_TARGET)\n-LIBCXXFLAGS_FOR_TARGET = $(CXXFLAGS_FOR_TARGET) -fno-implicit-templates\n-\n GCJ_FOR_TARGET=$(STAGE_CC_WRAPPER) @GCJ_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n-CONFIGURED_GCJ_FOR_TARGET=@CONFIGURED_GCJ_FOR_TARGET@\n-USUAL_GCJ_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gcc/gcj ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/gcj -B$$r/$(HOST_SUBDIR)/gcc ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(GCJ); \\\n-    else \\\n-      echo $(CONFIGURED_GCJ_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n GFORTRAN_FOR_TARGET=$(STAGE_CC_WRAPPER) @GFORTRAN_FOR_TARGET@ $(FLAGS_FOR_TARGET)\n-CONFIGURED_GFORTRAN_FOR_TARGET=@CONFIGURED_GFORTRAN_FOR_TARGET@\n-USUAL_GFORTRAN_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/gcc/gfortran ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/gfortran -B$$r/$(HOST_SUBDIR)/gcc ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(GFORTRAN); \\\n-    else \\\n-      echo $(CONFIGURED_GFORTRAN_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n-\n DLLTOOL_FOR_TARGET=@DLLTOOL_FOR_TARGET@\n-CONFIGURED_DLLTOOL_FOR_TARGET=@CONFIGURED_DLLTOOL_FOR_TARGET@\n-USUAL_DLLTOOL_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/dlltool ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/dlltool ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(DLLTOOL); \\\n-    else \\\n-      echo $(CONFIGURED_DLLTOOL_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n LD_FOR_TARGET=@LD_FOR_TARGET@\n-CONFIGURED_LD_FOR_TARGET=@CONFIGURED_LD_FOR_TARGET@\n-USUAL_LD_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/ld/ld-new ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/ld/ld-new ; \\\n-  elif [ -f $$r/$(HOST_SUBDIR)/gcc/collect-ld ]; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/collect-ld ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(LD); \\\n-    else \\\n-      echo $(CONFIGURED_LD_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n-LDFLAGS_FOR_TARGET = \n \n LIPO_FOR_TARGET=@LIPO_FOR_TARGET@\n-CONFIGURED_LIPO_FOR_TARGET=@CONFIGURED_LIPO_FOR_TARGET@\n-USUAL_LIPO_FOR_TARGET = ` \\\n-  if [ '$(host)' = '$(target)' ] ; then \\\n-    if [ x'$(LIPO)' != x ]; then \\\n-       echo $(LIPO); \\\n-    else \\\n-       echo lipo; \\\n-    fi; \\\n-  else \\\n-    echo $(CONFIGURED_LIPO_FOR_TARGET) ; \\\n-  fi`\n-\n NM_FOR_TARGET=@NM_FOR_TARGET@\n-CONFIGURED_NM_FOR_TARGET=@CONFIGURED_NM_FOR_TARGET@\n-USUAL_NM_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/nm-new ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/nm-new ; \\\n-  elif [ -f $$r/$(HOST_SUBDIR)/gcc/nm ]; then \\\n-    echo $$r/$(HOST_SUBDIR)/gcc/nm ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(NM); \\\n-    else \\\n-      echo $(CONFIGURED_NM_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n OBJDUMP_FOR_TARGET=@OBJDUMP_FOR_TARGET@\n-CONFIGURED_OBJDUMP_FOR_TARGET=@CONFIGURED_OBJDUMP_FOR_TARGET@\n-USUAL_OBJDUMP_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/objdump ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/objdump ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      if [ x'$(OBJDUMP)' != x ]; then \\\n-         echo $(OBJDUMP); \\\n-      else \\\n-         echo objdump; \\\n-      fi; \\\n-    else \\\n-      echo $(CONFIGURED_OBJDUMP_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n RANLIB_FOR_TARGET=@RANLIB_FOR_TARGET@\n-CONFIGURED_RANLIB_FOR_TARGET=@CONFIGURED_RANLIB_FOR_TARGET@\n-USUAL_RANLIB_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/ranlib ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/ranlib ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      if [ x'$(RANLIB)' != x ]; then \\\n-         echo $(RANLIB); \\\n-      else \\\n-         echo ranlib; \\\n-      fi; \\\n-    else \\\n-      echo $(CONFIGURED_RANLIB_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n STRIP_FOR_TARGET=@STRIP_FOR_TARGET@\n-CONFIGURED_STRIP_FOR_TARGET=@CONFIGURED_STRIP_FOR_TARGET@\n-USUAL_STRIP_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/strip ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/strip ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      if [ x'$(STRIP)' != x ]; then \\\n-         echo $(STRIP); \\\n-      else \\\n-         echo strip; \\\n-      fi; \\\n-    else \\\n-      echo $(CONFIGURED_STRIP_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n-\n WINDRES_FOR_TARGET=@WINDRES_FOR_TARGET@\n-CONFIGURED_WINDRES_FOR_TARGET=@CONFIGURED_WINDRES_FOR_TARGET@\n-USUAL_WINDRES_FOR_TARGET = ` \\\n-  if [ -f $$r/$(HOST_SUBDIR)/binutils/windres ] ; then \\\n-    echo $$r/$(HOST_SUBDIR)/binutils/windres ; \\\n-  else \\\n-    if [ '$(host)' = '$(target)' ] ; then \\\n-      echo $(WINDRES); \\\n-    else \\\n-      echo $(CONFIGURED_WINDRES_FOR_TARGET) ; \\\n-    fi; \\\n-  fi`\n \n+COMPILER_AS_FOR_TARGET=@COMPILER_AS_FOR_TARGET@\n+COMPILER_LD_FOR_TARGET=@COMPILER_LD_FOR_TARGET@\n+COMPILER_NM_FOR_TARGET=@COMPILER_NM_FOR_TARGET@\n+\n+# During gcc bootstrap, if we use some random cc for stage1 then\n+# CFLAGS will be just -g.  We want to ensure that TARGET libraries\n+# (which we know are built with gcc) are built with optimizations so\n+# prepend -O2 when setting CFLAGS_FOR_TARGET.\n+CFLAGS_FOR_TARGET = -O2 $(CFLAGS) $(SYSROOT_CFLAGS_FOR_TARGET)\n+SYSROOT_CFLAGS_FOR_TARGET = @SYSROOT_CFLAGS_FOR_TARGET@\n+CXXFLAGS_FOR_TARGET = $(CXXFLAGS) $(SYSROOT_CFLAGS_FOR_TARGET)\n+LIBCFLAGS_FOR_TARGET = $(CFLAGS_FOR_TARGET)\n+LIBCXXFLAGS_FOR_TARGET = $(CXXFLAGS_FOR_TARGET) -fno-implicit-templates\n+LDFLAGS_FOR_TARGET = \n PICFLAG_FOR_TARGET = \n \n # ------------------------------------\n@@ -644,8 +404,10 @@ EXTRA_HOST_FLAGS = \\\n \t'CXX=$(CXX)' \\\n \t'DLLTOOL=$(DLLTOOL)' \\\n \t'LD=$(LD)' \\\n+\t'LIPO=$(LIPO)' \\\n \t'NM=$(NM)' \\\n \t'RANLIB=$(RANLIB)' \\\n+\t'STRIP=$(STRIP)' \\\n \t'WINDRES=$(WINDRES)'\n \n FLAGS_TO_PASS = $(BASE_FLAGS_TO_PASS) $(EXTRA_HOST_FLAGS)\n@@ -667,17 +429,17 @@ X11_FLAGS_TO_PASS = \\\n # are set in BASE_FLAGS_TO_PASS, and the sub-make will expand them.\n EXTRA_TARGET_FLAGS = \\\n \t'AR=$$(AR_FOR_TARGET)' \\\n-\t'AS=$$(AS_FOR_TARGET)' \\\n+\t'AS=$$(COMPILER_AS_FOR_TARGET)' \\\n \t'CC=$$(CC_FOR_TARGET)' \\\n \t'CFLAGS=$$(CFLAGS_FOR_TARGET)' \\\n \t'CXX=$$(CXX_FOR_TARGET)' \\\n \t'CXXFLAGS=$$(CXXFLAGS_FOR_TARGET)' \\\n \t'DLLTOOL=$$(DLLTOOL_FOR_TARGET)' \\\n-\t'LD=$$(LD_FOR_TARGET)' \\\n+\t'LD=$$(COMPILER_LD_FOR_TARGET)' \\\n \t'LDFLAGS=$$(LDFLAGS_FOR_TARGET)' \\\n \t'LIBCFLAGS=$$(LIBCFLAGS_FOR_TARGET)' \\\n \t'LIBCXXFLAGS=$$(LIBCXXFLAGS_FOR_TARGET)' \\\n-\t'NM=$$(NM_FOR_TARGET)' \\\n+\t'NM=$$(COMPILER_NM_FOR_TARGET)' \\\n \t'OBJDUMP=$$(OBJDUMP_FOR_TARGET)' \\\n \t'RANLIB=$$(RANLIB_FOR_TARGET)' \\\n \t'WINDRES=$$(WINDRES_FOR_TARGET)'\n@@ -721,28 +483,19 @@ configure-target: [+\n .PHONY: all\n all:\n @if gcc-bootstrap\n+\t[ -f stage_final ] || echo stage3 > stage_final\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\tif [ ! -f stage_last ]; then \\\n-\t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) bootstrap; \\\n-\tfi\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) `cat stage_final`-bubble; \\\n @endif gcc-bootstrap\n \t@$(unstage)\n-@if gcc-no-bootstrap\n-\t@r=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all-prebootstrap\n-@endif gcc-no-bootstrap\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \tif [ -f stage_last ]; then \\\n-\t  $(MAKE) $(TARGET_FLAGS_TO_PASS) all-host; \\\n+\t  $(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target; \\\n \telse \\\n-\t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) all-host; \\\n+\t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) all-host all-target; \\\n \tfi\n-\t@r=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all-target\n \t@$(stage)\n \n .PHONY: all-build\n@@ -1436,7 +1189,7 @@ stage = :\n \n @if gcc-bootstrap\n unstage = [ -f stage_current ] || $(MAKE) `cat stage_last`-start\n-stage = $(MAKE) `cat stage_current`-end\n+stage = [ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n @endif gcc-bootstrap\n \n .PHONY: unstage stage\n@@ -1491,7 +1244,7 @@ POSTSTAGE1_FLAGS_TO_PASS = \\\n .PHONY: stage[+id+]-start stage[+id+]-end\n \n stage[+id+]-start::\n-\t@[ -f stage_current ] && $(MAKE) `cat stage_current`-end || : ; \\\n+\t@$(stage); \\\n \techo stage[+id+] > stage_current ; \\\n \techo stage[+id+] > stage_last; \\\n \t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR) $(TARGET_SUBDIR)[+\n@@ -1544,7 +1297,8 @@ stage[+id+]-bubble:: [+ IF prev +]stage[+prev+]-bubble[+ ENDIF +][+IF lean +]\n \telse \\\n \t  $(MAKE) stage[+id+]-start; \\\n \t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) all-stage[+id+]; \\\n-\tfi\n+\tfi[+ IF compare-target +]\n+\t$(MAKE) [+compare-target+][+ ENDIF compare-target +]\n \n .PHONY: all-stage[+id+] clean-stage[+id+]\n do-clean: clean-stage[+id+]\n@@ -1560,7 +1314,7 @@ do-clean: clean-stage[+id+]\n \t  echo Cannot compare object files as stage [+prev+] was deleted. ; \\\n \t  exit 0 ; \\\n \tfi; \\\n-\t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || : ; \\\n+\t$(stage); \\\n \trm -f .bad_compare ; \\\n \tcd stage[+id+]-gcc; \\\n \tfiles=`find . -name \"*$(objext)\" -print` ; \\\n@@ -1590,16 +1344,23 @@ do-clean: clean-stage[+id+]\n \n [+ IF bootstrap-target +]\n .PHONY: [+bootstrap-target+]\n-[+bootstrap-target+]: stage[+id+]-bubble\n-\t[+ IF compare-target +]$(MAKE) [+compare-target+]\n-\t[+ ENDIF compare-target +]$(MAKE) $(RECURSE_FLAGS_TO_PASS) all\n+[+bootstrap-target+]:\n+\techo stage[+id+] > stage_final\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) stage[+id+]-bubble\n+\t@$(unstage)\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n+\t@$(stage)\n [+ ENDIF bootstrap-target +]\n \n # Rules to wipe a stage and all the following ones, also used for cleanstrap\n [+ IF prev +]distclean-stage[+prev+]:: distclean-stage[+id+] [+ ENDIF prev +]\n .PHONY: distclean-stage[+id+]\n distclean-stage[+id+]::\n-\t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n+\t@$(stage)\n \trm -rf stage[+id+]-* [+\n \t  IF compare-target +][+compare-target+] [+ ENDIF compare-target +]\n "}, {"sha": "af6d9ac258d8b10fb6c7daaa20d639f84aebf677", "filename": "config/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abefe3d992a31a4f060f25857b067b397b7bac9/config%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abefe3d992a31a4f060f25857b067b397b7bac9/config%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2FChangeLog?ref=2abefe3d992a31a4f060f25857b067b397b7bac9", "patch": "@@ -1,11 +1,15 @@\n+2005-12-05  Paolo Bonzini  <bonzini@gnu.org>\n+\n+        * acx.m4 (GCC_TARGET_TOOL): New.\n+\n 2005-09-23  Tom Tromey  <tromey@redhat.com>\n \n \t* enable.m4: New file.\n \t* tls.m4: New file.\n \n 2005-08-12  Paolo Bonzini  <bonzini@gnu.org>\n \n-\t* config/acx.m4 (NCN_CHECK_TARGET_TOOL, NCN_STRICT_CHECK_TOOL,\n+\t* acx.m4 (NCN_CHECK_TARGET_TOOL, NCN_STRICT_CHECK_TOOL,\n \tNCN_STRICT_CHECK_TARGET_TOOL): Remove.\n \t(NCN_STRICT_CHECK_TOOLS, NCN_STRICT_CHECK_TARGET_TOOLS): New,\n \tbased on the deleted macros."}, {"sha": "c71f39b44b84a25499e4fc72a6d3a9e6d0b7d4cf", "filename": "config/acx.m4", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abefe3d992a31a4f060f25857b067b397b7bac9/config%2Facx.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abefe3d992a31a4f060f25857b067b397b7bac9/config%2Facx.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Facx.m4?ref=2abefe3d992a31a4f060f25857b067b397b7bac9", "patch": "@@ -296,3 +296,34 @@ fi\n AC_SUBST(LN)dnl\n ])\n \n+dnl GCC_TARGET_TOOL(PROGRAM, TARGET-VAR, HOST-VAR, IN-TREE-TOOL, LANGUAGE)\n+AC_DEFUN([GCC_TARGET_TOOL],\n+[AC_MSG_CHECKING(where to find the target $1)\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  AC_MSG_RESULT(pre-installed)\n+else\n+  ifelse([$4],,,\n+  [ok=yes\n+  case \" ${configdirs} \" in\n+    *\" patsubst([$4], [/.*], []) \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  ifelse([$5],,, \n+  [case ,${enable_languages}, in\n+    *,$5,*) ;;\n+    *) ok=no ;;\n+  esac])\n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    $2='$$r/$(HOST_SUBDIR)/$4'\n+    AC_MSG_RESULT(just compiled)\n+  el])if test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    $2='$($3)'\n+    AC_MSG_RESULT(host tool)\n+  else\n+    # We need a cross tool\n+    AC_MSG_RESULT(pre-installed)\n+  fi\n+fi])"}, {"sha": "fea7e98e00bd01989014874fd0afb0a308f05688", "filename": "configure", "status": "modified", "additions": 973, "deletions": 351, "changes": 1324, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abefe3d992a31a4f060f25857b067b397b7bac9/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abefe3d992a31a4f060f25857b067b397b7bac9/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=2abefe3d992a31a4f060f25857b067b397b7bac9", "patch": "@@ -2816,221 +2816,6 @@ esac\n tooldir='${exec_prefix}'/${target_alias}\n build_tooldir=${tooldir}\n \n-# Generate default definitions for YACC, M4, LEX and other programs that run\n-# on the build machine.  These are used if the Makefile can't locate these\n-# programs in objdir.\n-MISSING=`cd $ac_aux_dir && ${PWDCMD-pwd}`/missing\n-for ac_prog in bison\n-do\n-# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n-set dummy $ac_prog; ac_word=$2\n-echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2829: checking for $ac_word\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_BISON'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test -n \"$CONFIGURED_BISON\"; then\n-  ac_cv_prog_CONFIGURED_BISON=\"$CONFIGURED_BISON\" # Let the user override the test.\n-else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n-  ac_dummy=\"$PATH\"\n-  for ac_dir in $ac_dummy; do\n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/$ac_word; then\n-      ac_cv_prog_CONFIGURED_BISON=\"$ac_prog\"\n-      break\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-fi\n-fi\n-CONFIGURED_BISON=\"$ac_cv_prog_CONFIGURED_BISON\"\n-if test -n \"$CONFIGURED_BISON\"; then\n-  echo \"$ac_t\"\"$CONFIGURED_BISON\" 1>&6\n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-\n-test -n \"$CONFIGURED_BISON\" && break\n-done\n-test -n \"$CONFIGURED_BISON\" || CONFIGURED_BISON=\"$MISSING bison\"\n-\n-for ac_prog in 'bison -y' byacc yacc\n-do\n-# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n-set dummy $ac_prog; ac_word=$2\n-echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2864: checking for $ac_word\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_YACC'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test -n \"$CONFIGURED_YACC\"; then\n-  ac_cv_prog_CONFIGURED_YACC=\"$CONFIGURED_YACC\" # Let the user override the test.\n-else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n-  ac_dummy=\"$PATH\"\n-  for ac_dir in $ac_dummy; do\n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/$ac_word; then\n-      ac_cv_prog_CONFIGURED_YACC=\"$ac_prog\"\n-      break\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-fi\n-fi\n-CONFIGURED_YACC=\"$ac_cv_prog_CONFIGURED_YACC\"\n-if test -n \"$CONFIGURED_YACC\"; then\n-  echo \"$ac_t\"\"$CONFIGURED_YACC\" 1>&6\n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-\n-test -n \"$CONFIGURED_YACC\" && break\n-done\n-test -n \"$CONFIGURED_YACC\" || CONFIGURED_YACC=\"$MISSING bison -y\"\n-\n-for ac_prog in gm4 gnum4 m4\n-do\n-# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n-set dummy $ac_prog; ac_word=$2\n-echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2899: checking for $ac_word\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_M4'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test -n \"$CONFIGURED_M4\"; then\n-  ac_cv_prog_CONFIGURED_M4=\"$CONFIGURED_M4\" # Let the user override the test.\n-else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n-  ac_dummy=\"$PATH\"\n-  for ac_dir in $ac_dummy; do\n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/$ac_word; then\n-      ac_cv_prog_CONFIGURED_M4=\"$ac_prog\"\n-      break\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-fi\n-fi\n-CONFIGURED_M4=\"$ac_cv_prog_CONFIGURED_M4\"\n-if test -n \"$CONFIGURED_M4\"; then\n-  echo \"$ac_t\"\"$CONFIGURED_M4\" 1>&6\n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-\n-test -n \"$CONFIGURED_M4\" && break\n-done\n-test -n \"$CONFIGURED_M4\" || CONFIGURED_M4=\"$MISSING m4\"\n-\n-for ac_prog in flex\n-do\n-# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n-set dummy $ac_prog; ac_word=$2\n-echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2934: checking for $ac_word\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_FLEX'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test -n \"$CONFIGURED_FLEX\"; then\n-  ac_cv_prog_CONFIGURED_FLEX=\"$CONFIGURED_FLEX\" # Let the user override the test.\n-else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n-  ac_dummy=\"$PATH\"\n-  for ac_dir in $ac_dummy; do\n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/$ac_word; then\n-      ac_cv_prog_CONFIGURED_FLEX=\"$ac_prog\"\n-      break\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-fi\n-fi\n-CONFIGURED_FLEX=\"$ac_cv_prog_CONFIGURED_FLEX\"\n-if test -n \"$CONFIGURED_FLEX\"; then\n-  echo \"$ac_t\"\"$CONFIGURED_FLEX\" 1>&6\n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-\n-test -n \"$CONFIGURED_FLEX\" && break\n-done\n-test -n \"$CONFIGURED_FLEX\" || CONFIGURED_FLEX=\"$MISSING flex\"\n-\n-for ac_prog in flex lex\n-do\n-# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n-set dummy $ac_prog; ac_word=$2\n-echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2969: checking for $ac_word\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_LEX'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test -n \"$CONFIGURED_LEX\"; then\n-  ac_cv_prog_CONFIGURED_LEX=\"$CONFIGURED_LEX\" # Let the user override the test.\n-else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n-  ac_dummy=\"$PATH\"\n-  for ac_dir in $ac_dummy; do\n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/$ac_word; then\n-      ac_cv_prog_CONFIGURED_LEX=\"$ac_prog\"\n-      break\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-fi\n-fi\n-CONFIGURED_LEX=\"$ac_cv_prog_CONFIGURED_LEX\"\n-if test -n \"$CONFIGURED_LEX\"; then\n-  echo \"$ac_t\"\"$CONFIGURED_LEX\" 1>&6\n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-\n-test -n \"$CONFIGURED_LEX\" && break\n-done\n-test -n \"$CONFIGURED_LEX\" || CONFIGURED_LEX=\"$MISSING flex\"\n-\n-for ac_prog in makeinfo\n-do\n-# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n-set dummy $ac_prog; ac_word=$2\n-echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3004: checking for $ac_word\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_MAKEINFO'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test -n \"$CONFIGURED_MAKEINFO\"; then\n-  ac_cv_prog_CONFIGURED_MAKEINFO=\"$CONFIGURED_MAKEINFO\" # Let the user override the test.\n-else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n-  ac_dummy=\"$PATH\"\n-  for ac_dir in $ac_dummy; do\n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/$ac_word; then\n-      ac_cv_prog_CONFIGURED_MAKEINFO=\"$ac_prog\"\n-      break\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-fi\n-fi\n-CONFIGURED_MAKEINFO=\"$ac_cv_prog_CONFIGURED_MAKEINFO\"\n-if test -n \"$CONFIGURED_MAKEINFO\"; then\n-  echo \"$ac_t\"\"$CONFIGURED_MAKEINFO\" 1>&6\n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-\n-test -n \"$CONFIGURED_MAKEINFO\" && break\n-done\n-test -n \"$CONFIGURED_MAKEINFO\" || CONFIGURED_MAKEINFO=\"$MISSING makeinfo\"\n-\n-\n # Create a .gdbinit file which runs the one in srcdir\n # and tells GDB to look there for source files.\n \n@@ -3502,16 +3287,354 @@ done\n \n \n \n-# Host module lists & subconfigure args.\n+# Host module lists & subconfigure args.\n+\n+\n+\n+# Target module lists & subconfigure args.\n+\n+\n+\n+# Build tools.\n+\n+\n+\n+# Generate default definitions for YACC, M4, LEX and other programs that run\n+# on the build machine.  These are used if the Makefile can't locate these\n+# programs in objdir.\n+MISSING=`cd $ac_aux_dir && ${PWDCMD-pwd}`/missing\n+\n+for ac_prog in 'bison -y' byacc yacc\n+do\n+# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:3313: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_YACC'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$YACC\"; then\n+  ac_cv_prog_YACC=\"$YACC\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_YACC=\"$ac_prog\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+YACC=\"$ac_cv_prog_YACC\"\n+if test -n \"$YACC\"; then\n+  echo \"$ac_t\"\"$YACC\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+test -n \"$YACC\" && break\n+done\n+test -n \"$YACC\" || YACC=\"$MISSING bison -y\"\n+\n+case \" $build_configdirs \" in\n+  *\" bison \"*) YACC='$$r/$(BUILD_SUBDIR)/bison/tests/bison -y' ;;\n+  *\" byacc \"*) YACC='$$r/$(BUILD_SUBDIR)/byacc/byacc' ;;\n+esac\n+\n+for ac_prog in bison\n+do\n+# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:3353: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_BISON'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$BISON\"; then\n+  ac_cv_prog_BISON=\"$BISON\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_BISON=\"$ac_prog\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+BISON=\"$ac_cv_prog_BISON\"\n+if test -n \"$BISON\"; then\n+  echo \"$ac_t\"\"$BISON\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+test -n \"$BISON\" && break\n+done\n+test -n \"$BISON\" || BISON=\"$MISSING bison\"\n+\n+case \" $build_configdirs \" in\n+  *\" bison \"*) BISON='$$r/$(BUILD_SUBDIR)/bison/tests/bison' ;;\n+esac\n+\n+for ac_prog in gm4 gnum4 m4\n+do\n+# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:3392: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_M4'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$M4\"; then\n+  ac_cv_prog_M4=\"$M4\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_M4=\"$ac_prog\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+M4=\"$ac_cv_prog_M4\"\n+if test -n \"$M4\"; then\n+  echo \"$ac_t\"\"$M4\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+test -n \"$M4\" && break\n+done\n+test -n \"$M4\" || M4=\"$MISSING m4\"\n+\n+case \" $build_configdirs \" in\n+  *\" m4 \"*) M4='$$r/$(BUILD_SUBDIR)/m4/m4' ;;\n+esac\n+\n+for ac_prog in flex lex\n+do\n+# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:3431: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_LEX'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$LEX\"; then\n+  ac_cv_prog_LEX=\"$LEX\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_LEX=\"$ac_prog\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+LEX=\"$ac_cv_prog_LEX\"\n+if test -n \"$LEX\"; then\n+  echo \"$ac_t\"\"$LEX\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+test -n \"$LEX\" && break\n+done\n+test -n \"$LEX\" || LEX=\"$MISSING flex\"\n+\n+case \" $build_configdirs \" in\n+  *\" flex \"*) LEX='$$r/$(BUILD_SUBDIR)/flex/flex' ;;\n+  *\" lex \"*) LEX='$$r/$(BUILD_SUBDIR)/lex/lex' ;;\n+esac\n+\n+for ac_prog in flex\n+do\n+# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:3471: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_FLEX'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$FLEX\"; then\n+  ac_cv_prog_FLEX=\"$FLEX\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_FLEX=\"$ac_prog\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+FLEX=\"$ac_cv_prog_FLEX\"\n+if test -n \"$FLEX\"; then\n+  echo \"$ac_t\"\"$FLEX\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+test -n \"$FLEX\" && break\n+done\n+test -n \"$FLEX\" || FLEX=\"$MISSING flex\"\n+\n+case \" $build_configdirs \" in\n+  *\" flex \"*) FLEX='$$r/$(BUILD_SUBDIR)/flex/flex' ;;\n+esac\n+\n+for ac_prog in makeinfo\n+do\n+# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:3510: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_MAKEINFO'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$MAKEINFO\"; then\n+  ac_cv_prog_MAKEINFO=\"$MAKEINFO\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_MAKEINFO=\"$ac_prog\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+MAKEINFO=\"$ac_cv_prog_MAKEINFO\"\n+if test -n \"$MAKEINFO\"; then\n+  echo \"$ac_t\"\"$MAKEINFO\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+test -n \"$MAKEINFO\" && break\n+done\n+test -n \"$MAKEINFO\" || MAKEINFO=\"$MISSING makeinfo\"\n+\n+case \" $build_configdirs \" in\n+  *\" texinfo \"*) MAKEINFO='$$r/$(BUILD_SUBDIR)/texinfo/makeinfo/makeinfo' ;;\n+  *)\n+\n+    # For an installed makeinfo, we require it to be from texinfo 4.2 or\n+    # higher, else we use the \"missing\" dummy.\n+    if ${MAKEINFO} --version \\\n+       | egrep 'texinfo[^0-9]*([1-3][0-9]|4\\.[2-9]|[5-9])' >/dev/null 2>&1; then\n+      :\n+    else\n+      MAKEINFO=\"$MISSING makeinfo\"\n+    fi\n+    ;;\n+\n+esac\n \n+# FIXME: expect and dejagnu may become build tools?\n \n+for ac_prog in expect\n+do\n+# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:3563: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_EXPECT'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$EXPECT\"; then\n+  ac_cv_prog_EXPECT=\"$EXPECT\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_EXPECT=\"$ac_prog\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+EXPECT=\"$ac_cv_prog_EXPECT\"\n+if test -n \"$EXPECT\"; then\n+  echo \"$ac_t\"\"$EXPECT\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n \n-# Target module lists & subconfigure args.\n+test -n \"$EXPECT\" && break\n+done\n+test -n \"$EXPECT\" || EXPECT=\"expect\"\n \n+case \" $configdirs \" in\n+  *\" expect \"*)\n+    test $host = $build && EXPECT='$$r/$(HOST_SUBDIR)/expect/expect'\n+    ;;\n+esac\n \n+for ac_prog in runtest\n+do\n+# Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:3604: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_RUNTEST'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$RUNTEST\"; then\n+  ac_cv_prog_RUNTEST=\"$RUNTEST\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_RUNTEST=\"$ac_prog\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+RUNTEST=\"$ac_cv_prog_RUNTEST\"\n+if test -n \"$RUNTEST\"; then\n+  echo \"$ac_t\"\"$RUNTEST\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n \n-# Build tools.\n+test -n \"$RUNTEST\" && break\n+done\n+test -n \"$RUNTEST\" || RUNTEST=\"runtest\"\n \n+case \" $configdirs \" in\n+  *\" dejagnu \"*)\n+    test $host = $build && RUNTEST='$$r/$(HOST_SUBDIR)/dejagnu/runtest'\n+    ;;\n+esac\n \n \n # Host tools.\n@@ -3525,7 +3648,7 @@ test -n \"$target_alias\" && ncn_target_tool_prefix=$target_alias-\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3529: checking for $ac_word\" >&5\n+echo \"configure:3652: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3556,7 +3679,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3560: checking for $ac_word\" >&5\n+echo \"configure:3683: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3600,7 +3723,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3604: checking for $ac_word\" >&5\n+echo \"configure:3727: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3631,7 +3754,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3635: checking for $ac_word\" >&5\n+echo \"configure:3758: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3675,7 +3798,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3679: checking for $ac_word\" >&5\n+echo \"configure:3802: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3706,7 +3829,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3710: checking for $ac_word\" >&5\n+echo \"configure:3833: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3750,7 +3873,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3754: checking for $ac_word\" >&5\n+echo \"configure:3877: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3781,7 +3904,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3785: checking for $ac_word\" >&5\n+echo \"configure:3908: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3820,12 +3943,87 @@ if test -z \"$ac_cv_prog_LD\" ; then\n   fi\n fi\n \n+ for ncn_progname in lipo; do\n+  if test -n \"$ncn_tool_prefix\"; then\n+    # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n+set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:3952: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_LIPO'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$LIPO\"; then\n+  ac_cv_prog_LIPO=\"$LIPO\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_LIPO=\"${ncn_tool_prefix}${ncn_progname}\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+LIPO=\"$ac_cv_prog_LIPO\"\n+if test -n \"$LIPO\"; then\n+  echo \"$ac_t\"\"$LIPO\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+  fi\n+  if test -z \"$ac_cv_prog_LIPO\" && test $build = $host ; then\n+    # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n+set dummy ${ncn_progname}; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:3983: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_LIPO'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$LIPO\"; then\n+  ac_cv_prog_LIPO=\"$LIPO\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_LIPO=\"${ncn_progname}\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+LIPO=\"$ac_cv_prog_LIPO\"\n+if test -n \"$LIPO\"; then\n+  echo \"$ac_t\"\"$LIPO\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+ \n+  fi\n+  test -n \"$ac_cv_prog_LIPO\" && break\n+done\n+\n+if test -z \"$ac_cv_prog_LIPO\" ; then\n+  set dummy lipo\n+  if test $build = $host ; then\n+    LIPO=\"$2\"\n+  else\n+    LIPO=\"${ncn_tool_prefix}$2\"\n+  fi\n+fi\n+\n  for ncn_progname in nm; do\n   if test -n \"$ncn_tool_prefix\"; then\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3829: checking for $ac_word\" >&5\n+echo \"configure:4027: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3856,7 +4054,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3860: checking for $ac_word\" >&5\n+echo \"configure:4058: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3900,7 +4098,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3904: checking for $ac_word\" >&5\n+echo \"configure:4102: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3931,7 +4129,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3935: checking for $ac_word\" >&5\n+echo \"configure:4133: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3965,12 +4163,82 @@ if test -z \"$ac_cv_prog_RANLIB\" ; then\n   RANLIB=\":\"\n fi\n \n+ for ncn_progname in strip; do\n+  if test -n \"$ncn_tool_prefix\"; then\n+    # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n+set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:4172: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_STRIP'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$STRIP\"; then\n+  ac_cv_prog_STRIP=\"$STRIP\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_STRIP=\"${ncn_tool_prefix}${ncn_progname}\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+STRIP=\"$ac_cv_prog_STRIP\"\n+if test -n \"$STRIP\"; then\n+  echo \"$ac_t\"\"$STRIP\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+  fi\n+  if test -z \"$ac_cv_prog_STRIP\" && test $build = $host ; then\n+    # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n+set dummy ${ncn_progname}; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:4203: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_STRIP'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$STRIP\"; then\n+  ac_cv_prog_STRIP=\"$STRIP\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  ac_dummy=\"$PATH\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_STRIP=\"${ncn_progname}\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+STRIP=\"$ac_cv_prog_STRIP\"\n+if test -n \"$STRIP\"; then\n+  echo \"$ac_t\"\"$STRIP\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+ \n+  fi\n+  test -n \"$ac_cv_prog_STRIP\" && break\n+done\n+\n+if test -z \"$ac_cv_prog_STRIP\" ; then\n+  STRIP=\":\"\n+fi\n+\n  for ncn_progname in windres; do\n   if test -n \"$ncn_tool_prefix\"; then\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3974: checking for $ac_word\" >&5\n+echo \"configure:4242: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4001,7 +4269,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4005: checking for $ac_word\" >&5\n+echo \"configure:4273: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4045,7 +4313,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4049: checking for $ac_word\" >&5\n+echo \"configure:4317: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4076,7 +4344,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4080: checking for $ac_word\" >&5\n+echo \"configure:4348: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4120,7 +4388,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4124: checking for $ac_word\" >&5\n+echo \"configure:4392: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4151,7 +4419,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4155: checking for $ac_word\" >&5\n+echo \"configure:4423: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4196,14 +4464,13 @@ fi\n \n \n \n-# Target tools.  Do the tests using the names they may have passed in\n-# the environment, then move it to CONFIGURED_*_FOR_TARGET.\n+# Target tools.\n  for ncn_progname in ar; do\n   if test -n \"$ncn_target_tool_prefix\"; then\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4207: checking for $ac_word\" >&5\n+echo \"configure:4474: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4234,7 +4501,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4238: checking for $ac_word\" >&5\n+echo \"configure:4505: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4278,7 +4545,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4282: checking for $ac_word\" >&5\n+echo \"configure:4549: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4309,7 +4576,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4313: checking for $ac_word\" >&5\n+echo \"configure:4580: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4353,7 +4620,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4357: checking for $ac_word\" >&5\n+echo \"configure:4624: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4384,7 +4651,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4388: checking for $ac_word\" >&5\n+echo \"configure:4655: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4428,7 +4695,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4432: checking for $ac_word\" >&5\n+echo \"configure:4699: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CXX_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4459,7 +4726,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4463: checking for $ac_word\" >&5\n+echo \"configure:4730: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CXX_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4503,7 +4770,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4507: checking for $ac_word\" >&5\n+echo \"configure:4774: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4534,7 +4801,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4538: checking for $ac_word\" >&5\n+echo \"configure:4805: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4578,7 +4845,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4582: checking for $ac_word\" >&5\n+echo \"configure:4849: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCC_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4609,7 +4876,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4613: checking for $ac_word\" >&5\n+echo \"configure:4880: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCC_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4648,7 +4915,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4652: checking for $ac_word\" >&5\n+echo \"configure:4919: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCJ_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4679,7 +4946,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4683: checking for $ac_word\" >&5\n+echo \"configure:4950: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCJ_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4723,7 +4990,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4727: checking for $ac_word\" >&5\n+echo \"configure:4994: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GFORTRAN_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4754,7 +5021,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4758: checking for $ac_word\" >&5\n+echo \"configure:5025: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GFORTRAN_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4798,7 +5065,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4802: checking for $ac_word\" >&5\n+echo \"configure:5069: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4829,7 +5096,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4833: checking for $ac_word\" >&5\n+echo \"configure:5100: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4873,7 +5140,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4877: checking for $ac_word\" >&5\n+echo \"configure:5144: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LIPO_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4904,7 +5171,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4908: checking for $ac_word\" >&5\n+echo \"configure:5175: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LIPO_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4948,7 +5215,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4952: checking for $ac_word\" >&5\n+echo \"configure:5219: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4979,7 +5246,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4983: checking for $ac_word\" >&5\n+echo \"configure:5250: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5023,7 +5290,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5027: checking for $ac_word\" >&5\n+echo \"configure:5294: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5054,7 +5321,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5058: checking for $ac_word\" >&5\n+echo \"configure:5325: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5098,7 +5365,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5102: checking for $ac_word\" >&5\n+echo \"configure:5369: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5129,7 +5396,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5133: checking for $ac_word\" >&5\n+echo \"configure:5400: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5168,7 +5435,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5172: checking for $ac_word\" >&5\n+echo \"configure:5439: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_STRIP_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5199,7 +5466,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5203: checking for $ac_word\" >&5\n+echo \"configure:5470: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_STRIP_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5243,7 +5510,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5247: checking for $ac_word\" >&5\n+echo \"configure:5514: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5274,7 +5541,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5278: checking for $ac_word\" >&5\n+echo \"configure:5545: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5314,77 +5581,440 @@ if test -z \"$ac_cv_prog_WINDRES_FOR_TARGET\" ; then\n fi\n \n \n-CONFIGURED_AR_FOR_TARGET=\"$AR_FOR_TARGET\"\n-CONFIGURED_AS_FOR_TARGET=\"$AS_FOR_TARGET\"\n-CONFIGURED_CC_FOR_TARGET=\"$CC_FOR_TARGET\"\n-CONFIGURED_CXX_FOR_TARGET=\"$CXX_FOR_TARGET\"\n-CONFIGURED_DLLTOOL_FOR_TARGET=\"$DLLTOOL_FOR_TARGET\"\n-CONFIGURED_GCC_FOR_TARGET=\"$GCC_FOR_TARGET\"\n-CONFIGURED_GCJ_FOR_TARGET=\"$GCJ_FOR_TARGET\"\n-CONFIGURED_GFORTRAN_FOR_TARGET=\"$GFORTRAN_FOR_TARGET\"\n-CONFIGURED_LD_FOR_TARGET=\"$LD_FOR_TARGET\"\n-CONFIGURED_LIPO_FOR_TARGET=\"$LIPO_FOR_TARGET\"\n-CONFIGURED_NM_FOR_TARGET=\"$NM_FOR_TARGET\"\n-CONFIGURED_OBJDUMP_FOR_TARGET=\"$OBJDUMP_FOR_TARGET\"\n-CONFIGURED_RANLIB_FOR_TARGET=\"$RANLIB_FOR_TARGET\"\n-CONFIGURED_STRIP_FOR_TARGET=\"$STRIP_FOR_TARGET\"\n-CONFIGURED_WINDRES_FOR_TARGET=\"$WINDRES_FOR_TARGET\"\n-\n-\n-\n-# Fix up target tools.\n-if test \"x${build}\" = \"x${host}\" ; then\n-  # In this case, the newly built tools can and should be used,\n-  # so we override the results of the autoconf tests.\n-  # This should really only happen when the tools are actually being built,\n-  # but that's a further refinement.  The new build scheme, where\n-  # tools are built into a structure paralleling where they're installed,\n-  # should also eliminate all of this cleanly.\n-  AR_FOR_TARGET=\"\\$(USUAL_AR_FOR_TARGET)\"\n-  AS_FOR_TARGET=\"\\$(USUAL_AS_FOR_TARGET)\"\n-  CC_FOR_TARGET=\"\\$(USUAL_CC_FOR_TARGET)\"\n-  CXX_FOR_TARGET=\"\\$(USUAL_CXX_FOR_TARGET)\"\n-  RAW_CXX_FOR_TARGET=\"\\$(USUAL_RAW_CXX_FOR_TARGET)\"\n-  DLLTOOL_FOR_TARGET=\"\\$(USUAL_DLLTOOL_FOR_TARGET)\"\n-  GCC_FOR_TARGET=\"\\$(USUAL_GCC_FOR_TARGET)\"\n-  GCJ_FOR_TARGET=\"\\$(USUAL_GCJ_FOR_TARGET)\"\n-  GFORTRAN_FOR_TARGET=\"\\$(USUAL_GFORTRAN_FOR_TARGET)\"\n-  LD_FOR_TARGET=\"\\$(USUAL_LD_FOR_TARGET)\"\n-  LIPO_FOR_TARGET=\"\\$(USUAL_LIPO_FOR_TARGET)\"\n-  NM_FOR_TARGET=\"\\$(USUAL_NM_FOR_TARGET)\"\n-  OBJDUMP_FOR_TARGET=\"\\$(USUAL_OBJDUMP_FOR_TARGET)\"\n-  RANLIB_FOR_TARGET=\"\\$(USUAL_RANLIB_FOR_TARGET)\"\n-  STRIP_FOR_TARGET=\"\\$(USUAL_STRIP_FOR_TARGET)\"\n-  WINDRES_FOR_TARGET=\"\\$(USUAL_WINDRES_FOR_TARGET)\"\n-else\n-  # Just use the ones we found.\n-  AR_FOR_TARGET=\"\\$(CONFIGURED_AR_FOR_TARGET)\"\n-  AS_FOR_TARGET=\"\\$(CONFIGURED_AS_FOR_TARGET)\"\n-  CC_FOR_TARGET=\"\\$(CONFIGURED_CC_FOR_TARGET)\"\n-  CXX_FOR_TARGET=\"\\$(CONFIGURED_CXX_FOR_TARGET)\"\n-  RAW_CXX_FOR_TARGET=\"\\$(CONFIGURED_CXX_FOR_TARGET)\"\n-  DLLTOOL_FOR_TARGET=\"\\$(CONFIGURED_DLLTOOL_FOR_TARGET)\"\n-  GCC_FOR_TARGET=\"\\$(CONFIGURED_GCC_FOR_TARGET)\"\n-  GCJ_FOR_TARGET=\"\\$(CONFIGURED_GCJ_FOR_TARGET)\"\n-  GFORTRAN_FOR_TARGET=\"\\$(CONFIGURED_GFORTRAN_FOR_TARGET)\"\n-  LD_FOR_TARGET=\"\\$(CONFIGURED_LD_FOR_TARGET)\"\n-  LIPO_FOR_TARGET=\"\\$(CONFIGURED_LIPO_FOR_TARGET)\"\n-  NM_FOR_TARGET=\"\\$(CONFIGURED_NM_FOR_TARGET)\"\n-  OBJDUMP_FOR_TARGET=\"\\$(CONFIGURED_OBJDUMP_FOR_TARGET)\"\n-  RANLIB_FOR_TARGET=\"\\$(CONFIGURED_RANLIB_FOR_TARGET)\"\n-  STRIP_FOR_TARGET=\"\\$(CONFIGURED_STRIP_FOR_TARGET)\"\n-  WINDRES_FOR_TARGET=\"\\$(CONFIGURED_WINDRES_FOR_TARGET)\"  \n+RAW_CXX_FOR_TARGET=\"$CXX_FOR_TARGET\"\n+\n+echo $ac_n \"checking where to find the target ar\"\"... $ac_c\" 1>&6\n+echo \"configure:5588: checking where to find the target ar\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" binutils \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  \n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    AR_FOR_TARGET='$$r/$(HOST_SUBDIR)/binutils/ar'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    AR_FOR_TARGET='$(AR)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target as\"\"... $ac_c\" 1>&6\n+echo \"configure:5613: checking where to find the target as\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" gas \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  \n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    AS_FOR_TARGET='$$r/$(HOST_SUBDIR)/gas/as-new'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    AS_FOR_TARGET='$(AS)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target cc\"\"... $ac_c\" 1>&6\n+echo \"configure:5638: checking where to find the target cc\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" gcc \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  \n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    CC_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/xgcc -B$$r/$(HOST_SUBDIR)/gcc/'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    CC_FOR_TARGET='$(CC)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target c++\"\"... $ac_c\" 1>&6\n+echo \"configure:5663: checking where to find the target c++\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" gcc \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  case ,${enable_languages}, in\n+    *,c++,*) ;;\n+    *) ok=no ;;\n+  esac\n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    CXX_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/g++ -B$$r/$(HOST_SUBDIR)/gcc/ -nostdinc++ `test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags --build-includes` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    CXX_FOR_TARGET='$(CXX)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target c++ for libstdc++\"\"... $ac_c\" 1>&6\n+echo \"configure:5691: checking where to find the target c++ for libstdc++\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" gcc \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  case ,${enable_languages}, in\n+    *,c++,*) ;;\n+    *) ok=no ;;\n+  esac\n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    RAW_CXX_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/xgcc -shared-libgcc -B$$r/$(HOST_SUBDIR)/gcc -nostdinc++ -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    RAW_CXX_FOR_TARGET='$(CXX)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target dlltool\"\"... $ac_c\" 1>&6\n+echo \"configure:5719: checking where to find the target dlltool\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" binutils \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  \n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    DLLTOOL_FOR_TARGET='$$r/$(HOST_SUBDIR)/binutils/dlltool'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    DLLTOOL_FOR_TARGET='$(DLLTOOL)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target gcc\"\"... $ac_c\" 1>&6\n+echo \"configure:5744: checking where to find the target gcc\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" gcc \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  \n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    GCC_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/xgcc -B$$r/$(HOST_SUBDIR)/gcc/'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    GCC_FOR_TARGET='$()'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target gcj\"\"... $ac_c\" 1>&6\n+echo \"configure:5769: checking where to find the target gcj\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" gcc \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  case ,${enable_languages}, in\n+    *,java,*) ;;\n+    *) ok=no ;;\n+  esac\n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    GCJ_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/gcj -B$$r/$(HOST_SUBDIR)/gcc/'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    GCJ_FOR_TARGET='$(GCJ)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target gfortran\"\"... $ac_c\" 1>&6\n+echo \"configure:5797: checking where to find the target gfortran\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" gcc \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  case ,${enable_languages}, in\n+    *,fortran,*) ;;\n+    *) ok=no ;;\n+  esac\n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    GFORTRAN_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/gfortran -B$$r/$(HOST_SUBDIR)/gcc/'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    GFORTRAN_FOR_TARGET='$(GFORTRAN)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target ld\"\"... $ac_c\" 1>&6\n+echo \"configure:5825: checking where to find the target ld\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" ld \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  \n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    LD_FOR_TARGET='$$r/$(HOST_SUBDIR)/ld/ld-new'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    LD_FOR_TARGET='$(LD)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target lipo\"\"... $ac_c\" 1>&6\n+echo \"configure:5850: checking where to find the target lipo\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  if test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    LIPO_FOR_TARGET='$(LIPO)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target nm\"\"... $ac_c\" 1>&6\n+echo \"configure:5865: checking where to find the target nm\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" binutils \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  \n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    NM_FOR_TARGET='$$r/$(HOST_SUBDIR)/binutils/nm-new'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    NM_FOR_TARGET='$(NM)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target objdump\"\"... $ac_c\" 1>&6\n+echo \"configure:5890: checking where to find the target objdump\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" binutils \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  \n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    OBJDUMP_FOR_TARGET='$$r/$(HOST_SUBDIR)/binutils/objdump'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    OBJDUMP_FOR_TARGET='$(OBJDUMP)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target ranlib\"\"... $ac_c\" 1>&6\n+echo \"configure:5915: checking where to find the target ranlib\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" binutils \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  \n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    RANLIB_FOR_TARGET='$$r/$(HOST_SUBDIR)/binutils/ranlib'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    RANLIB_FOR_TARGET='$(RANLIB)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target strip\"\"... $ac_c\" 1>&6\n+echo \"configure:5940: checking where to find the target strip\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" binutils \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  \n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    STRIP_FOR_TARGET='$$r/$(HOST_SUBDIR)/binutils/strip'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    STRIP_FOR_TARGET='$(STRIP)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n+fi\n+echo $ac_n \"checking where to find the target windres\"\"... $ac_c\" 1>&6\n+echo \"configure:5965: checking where to find the target windres\" >&5\n+if test \"x${build}\" != \"x${host}\" ; then\n+  # Canadian cross, just use what we found\n+  echo \"$ac_t\"\"pre-installed\" 1>&6\n+else\n+  ok=yes\n+  case \" ${configdirs} \" in\n+    *\" binutils \"*) ;;\n+    *) ok=no ;;\n+  esac\n+  \n+  if test $ok = yes; then\n+    # An in-tree tool is available and we can use it\n+    WINDRES_FOR_TARGET='$$r/$(HOST_SUBDIR)/binutils/windres'\n+    echo \"$ac_t\"\"just compiled\" 1>&6\n+  elif test \"x$target\" = \"x$host\"; then\n+    # We can use an host tool\n+    WINDRES_FOR_TARGET='$(WINDRES)'\n+    echo \"$ac_t\"\"host tool\" 1>&6\n+  else\n+    # We need a cross tool\n+    echo \"$ac_t\"\"pre-installed\" 1>&6\n+  fi\n fi\n \n \n \n+\n # Certain tools may need extra flags.\n AR_FOR_TARGET=${AR_FOR_TARGET}${extra_arflags_for_target}\n RANLIB_FOR_TARGET=${RANLIB_FOR_TARGET}${extra_ranlibflags_for_target}\n NM_FOR_TARGET=${NM_FOR_TARGET}${extra_nmflags_for_target}\n \n+# When building target libraries, except in a Canadian cross, we use\n+# the same toolchain as the compiler we just built.\n+COMPILER_AS_FOR_TARGET='$(AS_FOR_TARGET)'\n+COMPILER_LD_FOR_TARGET='$(LD_FOR_TARGET)'\n+COMPILER_NM_FOR_TARGET='$(NM_FOR_TARGET)'\n+if test $host = $build; then\n+  case \" $configdirs \" in\n+    *\" gcc \"*)\n+      COMPILER_AS_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/as'\n+      COMPILER_LD_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/collect-ld'\n+      COMPILER_NM_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/nm'${extra_nmflags_for_target}\n+      ;;\n+  esac\n+fi\n+\n+\n+\n+\n+\n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:5388: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:6018: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -5431,7 +6061,7 @@ esac\n # gcc for stageN-gcc and stagePREV-gcc for stage(N-1).  In case this is not\n # possible, however, we can resort to mv.\n echo $ac_n \"checking if symbolic links between directories work\"\"... $ac_c\" 1>&6\n-echo \"configure:5435: checking if symbolic links between directories work\" >&5\n+echo \"configure:6065: checking if symbolic links between directories work\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_ln_s_dir'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5655,12 +6285,6 @@ s%@gmplibs@%$gmplibs%g\n s%@gmpinc@%$gmpinc%g\n s%@stage1_languages@%$stage1_languages%g\n s%@SYSROOT_CFLAGS_FOR_TARGET@%$SYSROOT_CFLAGS_FOR_TARGET%g\n-s%@CONFIGURED_BISON@%$CONFIGURED_BISON%g\n-s%@CONFIGURED_YACC@%$CONFIGURED_YACC%g\n-s%@CONFIGURED_M4@%$CONFIGURED_M4%g\n-s%@CONFIGURED_FLEX@%$CONFIGURED_FLEX%g\n-s%@CONFIGURED_LEX@%$CONFIGURED_LEX%g\n-s%@CONFIGURED_MAKEINFO@%$CONFIGURED_MAKEINFO%g\n s%@bootstrap_lean@%$bootstrap_lean%g\n /@serialization_dependencies@/r $serialization_dependencies\n s%@serialization_dependencies@%%g\n@@ -5688,12 +6312,22 @@ s%@target_configargs@%$target_configargs%g\n s%@target_configdirs@%$target_configdirs%g\n s%@CC_FOR_BUILD@%$CC_FOR_BUILD%g\n s%@config_shell@%$config_shell%g\n+s%@YACC@%$YACC%g\n+s%@BISON@%$BISON%g\n+s%@M4@%$M4%g\n+s%@LEX@%$LEX%g\n+s%@FLEX@%$FLEX%g\n+s%@MAKEINFO@%$MAKEINFO%g\n+s%@EXPECT@%$EXPECT%g\n+s%@RUNTEST@%$RUNTEST%g\n s%@AR@%$AR%g\n s%@AS@%$AS%g\n s%@DLLTOOL@%$DLLTOOL%g\n s%@LD@%$LD%g\n+s%@LIPO@%$LIPO%g\n s%@NM@%$NM%g\n s%@RANLIB@%$RANLIB%g\n+s%@STRIP@%$STRIP%g\n s%@WINDRES@%$WINDRES%g\n s%@OBJCOPY@%$OBJCOPY%g\n s%@OBJDUMP@%$OBJDUMP%g\n@@ -5714,23 +6348,11 @@ s%@OBJDUMP_FOR_TARGET@%$OBJDUMP_FOR_TARGET%g\n s%@RANLIB_FOR_TARGET@%$RANLIB_FOR_TARGET%g\n s%@STRIP_FOR_TARGET@%$STRIP_FOR_TARGET%g\n s%@WINDRES_FOR_TARGET@%$WINDRES_FOR_TARGET%g\n-s%@CONFIGURED_AR_FOR_TARGET@%$CONFIGURED_AR_FOR_TARGET%g\n-s%@CONFIGURED_AS_FOR_TARGET@%$CONFIGURED_AS_FOR_TARGET%g\n-s%@CONFIGURED_CC_FOR_TARGET@%$CONFIGURED_CC_FOR_TARGET%g\n-s%@CONFIGURED_CXX_FOR_TARGET@%$CONFIGURED_CXX_FOR_TARGET%g\n-s%@CONFIGURED_DLLTOOL_FOR_TARGET@%$CONFIGURED_DLLTOOL_FOR_TARGET%g\n-s%@CONFIGURED_GCC_FOR_TARGET@%$CONFIGURED_GCC_FOR_TARGET%g\n-s%@CONFIGURED_GCJ_FOR_TARGET@%$CONFIGURED_GCJ_FOR_TARGET%g\n-s%@CONFIGURED_GFORTRAN_FOR_TARGET@%$CONFIGURED_GFORTRAN_FOR_TARGET%g\n-s%@CONFIGURED_LD_FOR_TARGET@%$CONFIGURED_LD_FOR_TARGET%g\n-s%@CONFIGURED_LIPO_FOR_TARGET@%$CONFIGURED_LIPO_FOR_TARGET%g\n-s%@CONFIGURED_NM_FOR_TARGET@%$CONFIGURED_NM_FOR_TARGET%g\n-s%@CONFIGURED_OBJDUMP_FOR_TARGET@%$CONFIGURED_OBJDUMP_FOR_TARGET%g\n-s%@CONFIGURED_RANLIB_FOR_TARGET@%$CONFIGURED_RANLIB_FOR_TARGET%g\n-s%@CONFIGURED_STRIP_FOR_TARGET@%$CONFIGURED_STRIP_FOR_TARGET%g\n-s%@CONFIGURED_WINDRES_FOR_TARGET@%$CONFIGURED_WINDRES_FOR_TARGET%g\n s%@FLAGS_FOR_TARGET@%$FLAGS_FOR_TARGET%g\n s%@RAW_CXX_FOR_TARGET@%$RAW_CXX_FOR_TARGET%g\n+s%@COMPILER_AS_FOR_TARGET@%$COMPILER_AS_FOR_TARGET%g\n+s%@COMPILER_LD_FOR_TARGET@%$COMPILER_LD_FOR_TARGET%g\n+s%@COMPILER_NM_FOR_TARGET@%$COMPILER_NM_FOR_TARGET%g\n s%@MAINTAINER_MODE_TRUE@%$MAINTAINER_MODE_TRUE%g\n s%@MAINTAINER_MODE_FALSE@%$MAINTAINER_MODE_FALSE%g\n s%@MAINT@%$MAINT%g"}, {"sha": "d3a7067855adcd5660a9a4564d5454a0d9c6010e", "filename": "configure.in", "status": "modified", "additions": 113, "deletions": 89, "changes": 202, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abefe3d992a31a4f060f25857b067b397b7bac9/configure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abefe3d992a31a4f060f25857b067b397b7bac9/configure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.in?ref=2abefe3d992a31a4f060f25857b067b397b7bac9", "patch": "@@ -1611,17 +1611,6 @@ esac\n tooldir='${exec_prefix}'/${target_alias}\n build_tooldir=${tooldir}\n \n-# Generate default definitions for YACC, M4, LEX and other programs that run\n-# on the build machine.  These are used if the Makefile can't locate these\n-# programs in objdir.\n-MISSING=`cd $ac_aux_dir && ${PWDCMD-pwd}`/missing\n-AC_CHECK_PROGS([CONFIGURED_BISON], [bison], [$MISSING bison])\n-AC_CHECK_PROGS([CONFIGURED_YACC], ['bison -y' byacc yacc], [$MISSING bison -y])\n-AC_CHECK_PROGS([CONFIGURED_M4], [gm4 gnum4 m4], [$MISSING m4])\n-AC_CHECK_PROGS([CONFIGURED_FLEX], [flex], [$MISSING flex])\n-AC_CHECK_PROGS([CONFIGURED_LEX], [flex lex], [$MISSING flex])\n-AC_CHECK_PROGS([CONFIGURED_MAKEINFO], makeinfo, [$MISSING makeinfo])\n-\n # Create a .gdbinit file which runs the one in srcdir\n # and tells GDB to look there for source files.\n \n@@ -2099,13 +2088,81 @@ AC_SUBST(target_configdirs)\n AC_SUBST(CC_FOR_BUILD)\n AC_SUBST(config_shell)\n \n+# Generate default definitions for YACC, M4, LEX and other programs that run\n+# on the build machine.  These are used if the Makefile can't locate these\n+# programs in objdir.\n+MISSING=`cd $ac_aux_dir && ${PWDCMD-pwd}`/missing\n+\n+AC_CHECK_PROGS([YACC], ['bison -y' byacc yacc], [$MISSING bison -y])\n+case \" $build_configdirs \" in\n+  *\" bison \"*) YACC='$$r/$(BUILD_SUBDIR)/bison/tests/bison -y' ;;\n+  *\" byacc \"*) YACC='$$r/$(BUILD_SUBDIR)/byacc/byacc' ;;\n+esac\n+\n+AC_CHECK_PROGS([BISON], [bison], [$MISSING bison])\n+case \" $build_configdirs \" in\n+  *\" bison \"*) BISON='$$r/$(BUILD_SUBDIR)/bison/tests/bison' ;;\n+esac\n+\n+AC_CHECK_PROGS([M4], [gm4 gnum4 m4], [$MISSING m4])\n+case \" $build_configdirs \" in\n+  *\" m4 \"*) M4='$$r/$(BUILD_SUBDIR)/m4/m4' ;;\n+esac\n+\n+AC_CHECK_PROGS([LEX], [flex lex], [$MISSING flex])\n+case \" $build_configdirs \" in\n+  *\" flex \"*) LEX='$$r/$(BUILD_SUBDIR)/flex/flex' ;;\n+  *\" lex \"*) LEX='$$r/$(BUILD_SUBDIR)/lex/lex' ;;\n+esac\n+\n+AC_CHECK_PROGS([FLEX], [flex], [$MISSING flex])\n+case \" $build_configdirs \" in\n+  *\" flex \"*) FLEX='$$r/$(BUILD_SUBDIR)/flex/flex' ;;\n+esac\n+\n+AC_CHECK_PROGS([MAKEINFO], makeinfo, [$MISSING makeinfo])\n+case \" $build_configdirs \" in\n+  *\" texinfo \"*) MAKEINFO='$$r/$(BUILD_SUBDIR)/texinfo/makeinfo/makeinfo' ;;\n+  *)\n+changequote(,)\n+    # For an installed makeinfo, we require it to be from texinfo 4.2 or\n+    # higher, else we use the \"missing\" dummy.\n+    if ${MAKEINFO} --version \\\n+       | egrep 'texinfo[^0-9]*([1-3][0-9]|4\\.[2-9]|[5-9])' >/dev/null 2>&1; then\n+      :\n+    else\n+      MAKEINFO=\"$MISSING makeinfo\"\n+    fi\n+    ;;\n+changequote([,])\n+esac\n+\n+# FIXME: expect and dejagnu may become build tools?\n+\n+AC_CHECK_PROGS(EXPECT, expect, expect)\n+case \" $configdirs \" in\n+  *\" expect \"*)\n+    test $host = $build && EXPECT='$$r/$(HOST_SUBDIR)/expect/expect'\n+    ;;\n+esac\n+\n+AC_CHECK_PROGS(RUNTEST, runtest, runtest)\n+case \" $configdirs \" in\n+  *\" dejagnu \"*)\n+    test $host = $build && RUNTEST='$$r/$(HOST_SUBDIR)/dejagnu/runtest'\n+    ;;\n+esac\n+\n+\n # Host tools.\n NCN_STRICT_CHECK_TOOLS(AR, ar)\n NCN_STRICT_CHECK_TOOLS(AS, as)\n NCN_STRICT_CHECK_TOOLS(DLLTOOL, dlltool)\n NCN_STRICT_CHECK_TOOLS(LD, ld)\n+NCN_STRICT_CHECK_TOOLS(LIPO, lipo)\n NCN_STRICT_CHECK_TOOLS(NM, nm)\n NCN_STRICT_CHECK_TOOLS(RANLIB, ranlib, :)\n+NCN_STRICT_CHECK_TOOLS(STRIP, strip, :)\n NCN_STRICT_CHECK_TOOLS(WINDRES, windres)\n NCN_STRICT_CHECK_TOOLS(OBJCOPY, objcopy)\n NCN_STRICT_CHECK_TOOLS(OBJDUMP, objdump)\n@@ -2115,8 +2172,7 @@ AC_SUBST(CFLAGS)\n AC_SUBST(CFLAGS_FOR_BUILD)\n AC_SUBST(CXXFLAGS)\n \n-# Target tools.  Do the tests using the names they may have passed in\n-# the environment, then move it to CONFIGURED_*_FOR_TARGET.\n+# Target tools.\n NCN_STRICT_CHECK_TARGET_TOOLS(AR_FOR_TARGET, ar)\n NCN_STRICT_CHECK_TARGET_TOOLS(AS_FOR_TARGET, as)\n NCN_STRICT_CHECK_TARGET_TOOLS(CC_FOR_TARGET, cc gcc)\n@@ -2133,90 +2189,58 @@ NCN_STRICT_CHECK_TARGET_TOOLS(RANLIB_FOR_TARGET, ranlib, :)\n NCN_STRICT_CHECK_TARGET_TOOLS(STRIP_FOR_TARGET, strip)\n NCN_STRICT_CHECK_TARGET_TOOLS(WINDRES_FOR_TARGET, windres)\n \n-CONFIGURED_AR_FOR_TARGET=\"$AR_FOR_TARGET\"\n-CONFIGURED_AS_FOR_TARGET=\"$AS_FOR_TARGET\"\n-CONFIGURED_CC_FOR_TARGET=\"$CC_FOR_TARGET\"\n-CONFIGURED_CXX_FOR_TARGET=\"$CXX_FOR_TARGET\"\n-CONFIGURED_DLLTOOL_FOR_TARGET=\"$DLLTOOL_FOR_TARGET\"\n-CONFIGURED_GCC_FOR_TARGET=\"$GCC_FOR_TARGET\"\n-CONFIGURED_GCJ_FOR_TARGET=\"$GCJ_FOR_TARGET\"\n-CONFIGURED_GFORTRAN_FOR_TARGET=\"$GFORTRAN_FOR_TARGET\"\n-CONFIGURED_LD_FOR_TARGET=\"$LD_FOR_TARGET\"\n-CONFIGURED_LIPO_FOR_TARGET=\"$LIPO_FOR_TARGET\"\n-CONFIGURED_NM_FOR_TARGET=\"$NM_FOR_TARGET\"\n-CONFIGURED_OBJDUMP_FOR_TARGET=\"$OBJDUMP_FOR_TARGET\"\n-CONFIGURED_RANLIB_FOR_TARGET=\"$RANLIB_FOR_TARGET\"\n-CONFIGURED_STRIP_FOR_TARGET=\"$STRIP_FOR_TARGET\"\n-CONFIGURED_WINDRES_FOR_TARGET=\"$WINDRES_FOR_TARGET\"\n-\n-AC_SUBST(CONFIGURED_AR_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_AS_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_CC_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_CXX_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_DLLTOOL_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_GCC_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_GCJ_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_GFORTRAN_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_LD_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_LIPO_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_NM_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_OBJDUMP_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_RANLIB_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_STRIP_FOR_TARGET)dnl\n-AC_SUBST(CONFIGURED_WINDRES_FOR_TARGET)dnl\n-AC_SUBST(FLAGS_FOR_TARGET)\n-\n-# Fix up target tools.\n-if test \"x${build}\" = \"x${host}\" ; then\n-  # In this case, the newly built tools can and should be used,\n-  # so we override the results of the autoconf tests.\n-  # This should really only happen when the tools are actually being built,\n-  # but that's a further refinement.  The new build scheme, where\n-  # tools are built into a structure paralleling where they're installed,\n-  # should also eliminate all of this cleanly.\n-  AR_FOR_TARGET=\"\\$(USUAL_AR_FOR_TARGET)\"\n-  AS_FOR_TARGET=\"\\$(USUAL_AS_FOR_TARGET)\"\n-  CC_FOR_TARGET=\"\\$(USUAL_CC_FOR_TARGET)\"\n-  CXX_FOR_TARGET=\"\\$(USUAL_CXX_FOR_TARGET)\"\n-  RAW_CXX_FOR_TARGET=\"\\$(USUAL_RAW_CXX_FOR_TARGET)\"\n-  DLLTOOL_FOR_TARGET=\"\\$(USUAL_DLLTOOL_FOR_TARGET)\"\n-  GCC_FOR_TARGET=\"\\$(USUAL_GCC_FOR_TARGET)\"\n-  GCJ_FOR_TARGET=\"\\$(USUAL_GCJ_FOR_TARGET)\"\n-  GFORTRAN_FOR_TARGET=\"\\$(USUAL_GFORTRAN_FOR_TARGET)\"\n-  LD_FOR_TARGET=\"\\$(USUAL_LD_FOR_TARGET)\"\n-  LIPO_FOR_TARGET=\"\\$(USUAL_LIPO_FOR_TARGET)\"\n-  NM_FOR_TARGET=\"\\$(USUAL_NM_FOR_TARGET)\"\n-  OBJDUMP_FOR_TARGET=\"\\$(USUAL_OBJDUMP_FOR_TARGET)\"\n-  RANLIB_FOR_TARGET=\"\\$(USUAL_RANLIB_FOR_TARGET)\"\n-  STRIP_FOR_TARGET=\"\\$(USUAL_STRIP_FOR_TARGET)\"\n-  WINDRES_FOR_TARGET=\"\\$(USUAL_WINDRES_FOR_TARGET)\"\n-else\n-  # Just use the ones we found.\n-  AR_FOR_TARGET=\"\\$(CONFIGURED_AR_FOR_TARGET)\"\n-  AS_FOR_TARGET=\"\\$(CONFIGURED_AS_FOR_TARGET)\"\n-  CC_FOR_TARGET=\"\\$(CONFIGURED_CC_FOR_TARGET)\"\n-  CXX_FOR_TARGET=\"\\$(CONFIGURED_CXX_FOR_TARGET)\"\n-  RAW_CXX_FOR_TARGET=\"\\$(CONFIGURED_CXX_FOR_TARGET)\"\n-  DLLTOOL_FOR_TARGET=\"\\$(CONFIGURED_DLLTOOL_FOR_TARGET)\"\n-  GCC_FOR_TARGET=\"\\$(CONFIGURED_GCC_FOR_TARGET)\"\n-  GCJ_FOR_TARGET=\"\\$(CONFIGURED_GCJ_FOR_TARGET)\"\n-  GFORTRAN_FOR_TARGET=\"\\$(CONFIGURED_GFORTRAN_FOR_TARGET)\"\n-  LD_FOR_TARGET=\"\\$(CONFIGURED_LD_FOR_TARGET)\"\n-  LIPO_FOR_TARGET=\"\\$(CONFIGURED_LIPO_FOR_TARGET)\"\n-  NM_FOR_TARGET=\"\\$(CONFIGURED_NM_FOR_TARGET)\"\n-  OBJDUMP_FOR_TARGET=\"\\$(CONFIGURED_OBJDUMP_FOR_TARGET)\"\n-  RANLIB_FOR_TARGET=\"\\$(CONFIGURED_RANLIB_FOR_TARGET)\"\n-  STRIP_FOR_TARGET=\"\\$(CONFIGURED_STRIP_FOR_TARGET)\"\n-  WINDRES_FOR_TARGET=\"\\$(CONFIGURED_WINDRES_FOR_TARGET)\"  \n-fi\n+RAW_CXX_FOR_TARGET=\"$CXX_FOR_TARGET\"\n+\n+GCC_TARGET_TOOL(ar, AR_FOR_TARGET, AR, [binutils/ar])\n+GCC_TARGET_TOOL(as, AS_FOR_TARGET, AS, [gas/as-new])\n+GCC_TARGET_TOOL(cc, CC_FOR_TARGET, CC, [gcc/xgcc -B$$r/$(HOST_SUBDIR)/gcc/])\n+GCC_TARGET_TOOL(c++, CXX_FOR_TARGET, CXX,\n+\t\t[gcc/g++ -B$$r/$(HOST_SUBDIR)/gcc/ -nostdinc++ `test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags --build-includes` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs],\n+\t\tc++)\n+GCC_TARGET_TOOL(c++ for libstdc++, RAW_CXX_FOR_TARGET, CXX,\n+\t\t[gcc/xgcc -shared-libgcc -B$$r/$(HOST_SUBDIR)/gcc -nostdinc++ -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs],\n+\t\tc++)\n+GCC_TARGET_TOOL(dlltool, DLLTOOL_FOR_TARGET, DLLTOOL, [binutils/dlltool])\n+GCC_TARGET_TOOL(gcc, GCC_FOR_TARGET, , [gcc/xgcc -B$$r/$(HOST_SUBDIR)/gcc/])\n+GCC_TARGET_TOOL(gcj, GCJ_FOR_TARGET, GCJ,\n+\t\t[gcc/gcj -B$$r/$(HOST_SUBDIR)/gcc/], java)\n+GCC_TARGET_TOOL(gfortran, GFORTRAN_FOR_TARGET, GFORTRAN,\n+\t\t[gcc/gfortran -B$$r/$(HOST_SUBDIR)/gcc/], fortran)\n+GCC_TARGET_TOOL(ld, LD_FOR_TARGET, LD, [ld/ld-new])\n+GCC_TARGET_TOOL(lipo, LIPO_FOR_TARGET, LIPO)\n+GCC_TARGET_TOOL(nm, NM_FOR_TARGET, NM, [binutils/nm-new])\n+GCC_TARGET_TOOL(objdump, OBJDUMP_FOR_TARGET, OBJDUMP, [binutils/objdump])\n+GCC_TARGET_TOOL(ranlib, RANLIB_FOR_TARGET, RANLIB, [binutils/ranlib])\n+GCC_TARGET_TOOL(strip, STRIP_FOR_TARGET, STRIP, [binutils/strip])\n+GCC_TARGET_TOOL(windres, WINDRES_FOR_TARGET, WINDRES, [binutils/windres])\n \n+AC_SUBST(FLAGS_FOR_TARGET)\n AC_SUBST(RAW_CXX_FOR_TARGET)\n \n # Certain tools may need extra flags.\n AR_FOR_TARGET=${AR_FOR_TARGET}${extra_arflags_for_target}\n RANLIB_FOR_TARGET=${RANLIB_FOR_TARGET}${extra_ranlibflags_for_target}\n NM_FOR_TARGET=${NM_FOR_TARGET}${extra_nmflags_for_target}\n \n+# When building target libraries, except in a Canadian cross, we use\n+# the same toolchain as the compiler we just built.\n+COMPILER_AS_FOR_TARGET='$(AS_FOR_TARGET)'\n+COMPILER_LD_FOR_TARGET='$(LD_FOR_TARGET)'\n+COMPILER_NM_FOR_TARGET='$(NM_FOR_TARGET)'\n+if test $host = $build; then\n+  case \" $configdirs \" in\n+    *\" gcc \"*)\n+      COMPILER_AS_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/as'\n+      COMPILER_LD_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/collect-ld'\n+      COMPILER_NM_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/nm'${extra_nmflags_for_target}\n+      ;;\n+  esac\n+fi\n+\n+AC_SUBST(COMPILER_AS_FOR_TARGET)\n+AC_SUBST(COMPILER_LD_FOR_TARGET)\n+AC_SUBST(COMPILER_NM_FOR_TARGET)\n+\n AC_MSG_CHECKING([whether to enable maintainer-specific portions of Makefiles])\n AC_ARG_ENABLE(maintainer-mode,\n [  --enable-maintainer-mode enable make rules and dependencies not useful"}]}