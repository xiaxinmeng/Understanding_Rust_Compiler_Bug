{"sha": "b80cb6e29cb176bffc39f3c218a0b4a13e2ff969", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjgwY2I2ZTI5Y2IxNzZiZmZjMzlmM2MyMThhMGI0YTEzZTJmZjk2OQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2002-06-13T16:20:02Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2002-06-13T16:20:02Z"}, "message": "* reload.c (find_valid_class):  Fix thinko in my previous patch.\n\nFrom-SVN: r54589", "tree": {"sha": "6b1e90f202d3221847ccb2583da856156ff7d7db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6b1e90f202d3221847ccb2583da856156ff7d7db"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b80cb6e29cb176bffc39f3c218a0b4a13e2ff969", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b80cb6e29cb176bffc39f3c218a0b4a13e2ff969", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b80cb6e29cb176bffc39f3c218a0b4a13e2ff969", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b80cb6e29cb176bffc39f3c218a0b4a13e2ff969/comments", "author": null, "committer": null, "parents": [{"sha": "6cde4876448a38c9f47f6a92a72efab9848d7482", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cde4876448a38c9f47f6a92a72efab9848d7482", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cde4876448a38c9f47f6a92a72efab9848d7482"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "8262378b3af5281e42d5c7b5b609438034ae79aa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b80cb6e29cb176bffc39f3c218a0b4a13e2ff969/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b80cb6e29cb176bffc39f3c218a0b4a13e2ff969/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b80cb6e29cb176bffc39f3c218a0b4a13e2ff969", "patch": "@@ -1,3 +1,7 @@\n+Thu Jun 13 18:18:17 CEST 2002  Jan Hubicka   <jh@suse.cz>\n+\n+\t* reload.c (find_valid_class):  Fix thinko in my previous patch.\n+\n 2002-06-13  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \t* config/s390/s390.h (TARGET_CPU_CPP_BUILTINS): New macro."}, {"sha": "6a18245f941e54e559afdbda442cbb6adc8e28c9", "filename": "gcc/reload.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b80cb6e29cb176bffc39f3c218a0b4a13e2ff969/gcc%2Freload.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b80cb6e29cb176bffc39f3c218a0b4a13e2ff969/gcc%2Freload.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload.c?ref=b80cb6e29cb176bffc39f3c218a0b4a13e2ff969", "patch": "@@ -677,6 +677,7 @@ find_valid_class (m1, n, dest_regno)\n   enum reg_class best_class = NO_REGS;\n   enum reg_class dest_class = REGNO_REG_CLASS (dest_regno);\n   unsigned int best_size = 0;\n+  int cost;\n \n   for (class = 1; class < N_REG_CLASSES; class++)\n     {\n@@ -687,9 +688,13 @@ find_valid_class (m1, n, dest_regno)\n \t    && ! HARD_REGNO_MODE_OK (regno + n, m1))\n \t  bad = 1;\n \n-      if (! bad && reg_class_size[class] > best_size\n-\t  && (best_cost < 0\n-\t      || best_cost >= REGISTER_MOVE_COST (m1, class, dest_class)))\n+      if (bad)\n+\tcontinue;\n+      cost = REGISTER_MOVE_COST (m1, class, dest_class);\n+\n+      if ((reg_class_size[class] > best_size\n+\t   && (best_cost < 0 || best_cost >= cost))\n+\t  || best_cost > cost)\n \t{\n \t  best_class = class;\n \t  best_size = reg_class_size[class];"}]}