{"sha": "1f8f3e6e07accbcb641a73bc7545677d172503bd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWY4ZjNlNmUwN2FjY2JjYjY0MWE3M2JjNzU0NTY3N2QxNzI1MDNiZA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-10-20T10:56:25Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-10-20T10:56:25Z"}, "message": "[multiple changes]\n\n2015-10-20  Bob Duff  <duff@adacore.com>\n\n\t* a-cbdlli.ads, a-cbhase.ads, a-cbmutr.ads, a-cborse.ads,\n\t* a-cdlili.ads, a-cidlli.ads, a-cihase.ads, a-cimutr.ads,\n\t* a-ciorse.ads, a-cobove.ads, a-cohase.ads, a-coinve.ads,\n\t* a-comutr.ads, a-convec.ads, a-coorse.ads: Use non-private with clause.\n\n2015-10-20  Hristian Kirtchev  <kirtchev@adacore.com>\n\n\t* exp_util.adb (Requires_Cleanup_Actions): A loop parameter does not\n\trequire finalization actions.\n\n2015-10-20  Ed Schonberg  <schonberg@adacore.com>\n\n\t* par-ch3.adb (P_Declarative_Items): In case of misplaced\n\taspect specifications, ensure that flag Done is properly set to\n\tcontinue parse.\n\n2015-10-20  Hristian Kirtchev  <kirtchev@adacore.com>\n\n\t* rtsfind.ads Remove the entries for Ada.Synchronous_Task_Control\n\tand Suspension_Object from tables RE_Id, RE_Unit_Table and RTU_Id.\n\t* sem_util.adb (Is_Descendant_Of_Suspension_Object): Update\n\tthe comment on usage. Use routine Is_Suspension_Object to detect\n\twhether a type matches Suspension_Object.\n\t(Is_Suspension_Object): New routine.\n\t* snames.ads-tmpl: Add predefined names for Suspension_Object\n\tand Synchronous_Task_Control.\n\nFrom-SVN: r229049", "tree": {"sha": "1c998d2030bd6a4e6faa76da7bfca7c3943386ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c998d2030bd6a4e6faa76da7bfca7c3943386ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f8f3e6e07accbcb641a73bc7545677d172503bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f8f3e6e07accbcb641a73bc7545677d172503bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f8f3e6e07accbcb641a73bc7545677d172503bd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f8f3e6e07accbcb641a73bc7545677d172503bd/comments", "author": null, "committer": null, "parents": [{"sha": "cbc61965f524912017883739bf1fe2e6f30439c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbc61965f524912017883739bf1fe2e6f30439c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbc61965f524912017883739bf1fe2e6f30439c5"}], "stats": {"total": 129, "additions": 92, "deletions": 37}, "files": [{"sha": "63ad65539b6d8f4e43625b57bbe4b2e0726d8643", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -1,3 +1,32 @@\n+2015-10-20  Bob Duff  <duff@adacore.com>\n+\n+\t* a-cbdlli.ads, a-cbhase.ads, a-cbmutr.ads, a-cborse.ads,\n+\t* a-cdlili.ads, a-cidlli.ads, a-cihase.ads, a-cimutr.ads,\n+\t* a-ciorse.ads, a-cobove.ads, a-cohase.ads, a-coinve.ads,\n+\t* a-comutr.ads, a-convec.ads, a-coorse.ads: Use non-private with clause.\n+\n+2015-10-20  Hristian Kirtchev  <kirtchev@adacore.com>\n+\n+\t* exp_util.adb (Requires_Cleanup_Actions): A loop parameter does not\n+\trequire finalization actions.\n+\n+2015-10-20  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* par-ch3.adb (P_Declarative_Items): In case of misplaced\n+\taspect specifications, ensure that flag Done is properly set to\n+\tcontinue parse.\n+\n+2015-10-20  Hristian Kirtchev  <kirtchev@adacore.com>\n+\n+\t* rtsfind.ads Remove the entries for Ada.Synchronous_Task_Control\n+\tand Suspension_Object from tables RE_Id, RE_Unit_Table and RTU_Id.\n+\t* sem_util.adb (Is_Descendant_Of_Suspension_Object): Update\n+\tthe comment on usage. Use routine Is_Suspension_Object to detect\n+\twhether a type matches Suspension_Object.\n+\t(Is_Suspension_Object): New routine.\n+\t* snames.ads-tmpl: Add predefined names for Suspension_Object\n+\tand Synchronous_Task_Control.\n+\n 2015-10-20  Ed Schonberg  <schonberg@adacore.com>\n \n \t* sem_smem.adb (Check_Shared_Var): Clean up code that handles"}, {"sha": "f09c3ed0dd80d68cd404888dd33f821de75d931d", "filename": "gcc/ada/a-cbdlli.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cbdlli.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cbdlli.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-cbdlli.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Streams;\n private with Ada.Finalization;\n "}, {"sha": "87e35cab3f3faf66f943b0dd3cee2072bc306bf6", "filename": "gcc/ada/a-cbhase.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cbhase.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cbhase.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-cbhase.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -34,7 +34,7 @@\n with Ada.Iterator_Interfaces;\n \n private with Ada.Containers.Hash_Tables;\n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Streams;\n private with Ada.Finalization; use Ada.Finalization;\n "}, {"sha": "fd8c20662a0b69b3b4fc7ec85b3ee3997c3365e5", "filename": "gcc/ada/a-cbmutr.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cbmutr.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cbmutr.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-cbmutr.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Streams;\n \n generic"}, {"sha": "7d76f7844d82ca0d96f13038b0887e70e58ee21f", "filename": "gcc/ada/a-cborse.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cborse.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cborse.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-cborse.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Containers.Red_Black_Trees;\n private with Ada.Streams;\n private with Ada.Finalization;"}, {"sha": "abc6de7734ec550ed6ea3d25e03b6f852fe3a590", "filename": "gcc/ada/a-cdlili.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cdlili.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cdlili.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-cdlili.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Finalization;\n private with Ada.Streams;\n "}, {"sha": "5b181105f495138825cd406955580ab34a9912d4", "filename": "gcc/ada/a-cidlli.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cidlli.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cidlli.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-cidlli.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Finalization;\n private with Ada.Streams;\n "}, {"sha": "d908d7fd72c2754effe9692de2582b24f1569817", "filename": "gcc/ada/a-cihase.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cihase.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cihase.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-cihase.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -34,7 +34,7 @@\n with Ada.Iterator_Interfaces;\n \n private with Ada.Containers.Hash_Tables;\n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Streams;\n private with Ada.Finalization;\n "}, {"sha": "ad7e34c0e02107617cd1a09cb88c5577a1d93598", "filename": "gcc/ada/a-cimutr.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cimutr.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cimutr.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-cimutr.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Finalization;\n private with Ada.Streams;\n "}, {"sha": "15589b86827a9aa06679088da33eeb3eca5db509", "filename": "gcc/ada/a-ciorse.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-ciorse.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-ciorse.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-ciorse.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Containers.Red_Black_Trees;\n private with Ada.Finalization;\n private with Ada.Streams;"}, {"sha": "869f2bbb646711bcfbe7b8cc16711d4d9517fd15", "filename": "gcc/ada/a-cobove.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cobove.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cobove.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-cobove.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Streams;\n private with Ada.Finalization;\n "}, {"sha": "97cd5f123237578e9b09aabc4d98aaec7ca8e004", "filename": "gcc/ada/a-cohase.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cohase.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-cohase.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-cohase.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -34,7 +34,7 @@\n with Ada.Iterator_Interfaces;\n \n private with Ada.Containers.Hash_Tables;\n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Finalization;\n private with Ada.Streams;\n "}, {"sha": "1a0ce992764a2c9d7ed55bfdefa80fc506e20cb3", "filename": "gcc/ada/a-coinve.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-coinve.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-coinve.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-coinve.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Finalization;\n private with Ada.Streams;\n "}, {"sha": "25fadf1f3a76f654d4e77614a7d9017fee68dc05", "filename": "gcc/ada/a-comutr.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-comutr.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-comutr.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-comutr.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Finalization;\n private with Ada.Streams;\n "}, {"sha": "413403d72cd32ca546f02b46fd2fa45e5a254854", "filename": "gcc/ada/a-convec.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-convec.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-convec.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-convec.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Finalization;\n private with Ada.Streams;\n "}, {"sha": "d127a52b283ea57dd0d1ef0fe14aa3ab5ecd4d0f", "filename": "gcc/ada/a-coorse.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-coorse.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fa-coorse.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-coorse.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -33,7 +33,7 @@\n \n with Ada.Iterator_Interfaces;\n \n-private with Ada.Containers.Helpers;\n+with Ada.Containers.Helpers;\n private with Ada.Containers.Red_Black_Trees;\n private with Ada.Finalization;\n private with Ada.Streams;"}, {"sha": "fa8d17f4f0df97091d11de7ec37389540698e7e3", "filename": "gcc/ada/exp_util.adb", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fexp_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fexp_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_util.adb?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -8022,6 +8022,16 @@ package body Exp_Util is\n             elsif Is_Ignored_Ghost_Entity (Obj_Id) then\n                null;\n \n+            --  The expansion of iterator loops generates an object declaration\n+            --  where the Ekind is explicitly set to loop parameter. This is to\n+            --  ensure that the loop parameter behaves as a constant from user\n+            --  code point of view. Such object are never controlled and do not\n+            --  require cleanup actions. An iterator loop over a container of\n+            --  controlled objects does not produce such object declarations.\n+\n+            elsif Ekind (Obj_Id) = E_Loop_Parameter then\n+               return False;\n+\n             --  The object is of the form:\n             --    Obj : Typ [:= Expr];\n             --"}, {"sha": "86b2a6d295ca38bfba52ec2091d4cc03f2ad60f5", "filename": "gcc/ada/par-ch3.adb", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fpar-ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fpar-ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch3.adb?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -4425,6 +4425,12 @@ package body Ch3 is\n \n                else\n                   Error_Msg_SC (\"aspect specifications not allowed here\");\n+\n+                  --  Assume that this is a misplaced aspect specification\n+                  --  within a declarative list. After discarding the\n+                  --  misplaced aspects we can continue the scan.\n+\n+                  Done := False;\n                end if;\n \n                declare"}, {"sha": "d320639f65570e21f13c1a099fbb3d8caaed6ae3", "filename": "gcc/ada/rtsfind.ads", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Frtsfind.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Frtsfind.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Frtsfind.ads?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -131,7 +131,6 @@ package Rtsfind is\n       Ada_Real_Time,\n       Ada_Streams,\n       Ada_Strings,\n-      Ada_Synchronous_Task_Control,\n       Ada_Tags,\n       Ada_Task_Identification,\n       Ada_Task_Termination,\n@@ -607,8 +606,6 @@ package Rtsfind is\n \n      RE_Unbounded_String,                -- Ada.Strings.Unbounded\n \n-     RE_Suspension_Object,               -- Ada.Synchronous_Task_Control\n-\n      RE_Access_Level,                    -- Ada.Tags\n      RE_Alignment,                       -- Ada.Tags\n      RE_Address_Array,                   -- Ada.Tags\n@@ -1840,8 +1837,6 @@ package Rtsfind is\n \n      RE_Unbounded_String                 => Ada_Strings_Unbounded,\n \n-     RE_Suspension_Object                => Ada_Synchronous_Task_Control,\n-\n      RE_Access_Level                     => Ada_Tags,\n      RE_Alignment                        => Ada_Tags,\n      RE_Address_Array                    => Ada_Tags,"}, {"sha": "6875f3aeb964e740084d0158d19357359ae21af3", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 30, "deletions": 17, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -11397,9 +11397,7 @@ package body Sem_Util is\n       function Is_Descendant_Of_Suspension_Object\n         (Typ : Entity_Id) return Boolean;\n       --  Determine whether type Typ is a descendant of type Suspension_Object\n-      --  defined in Ada.Synchronous_Task_Control. This routine is similar to\n-      --  Sem_Util.Is_Descendent_Of, however this version does not load unit\n-      --  Ada.Synchronous_Task_Control.\n+      --  defined in Ada.Synchronous_Task_Control.\n \n       ----------------------------------------\n       -- Is_Descendant_Of_Suspension_Object --\n@@ -11408,24 +11406,39 @@ package body Sem_Util is\n       function Is_Descendant_Of_Suspension_Object\n         (Typ : Entity_Id) return Boolean\n       is\n-         Cur_Typ : Entity_Id;\n-         Par_Typ : Entity_Id;\n+         function Is_Suspension_Object (Id : Entity_Id) return Boolean;\n+         --  Determine whether arbitrary entity Id denotes Suspension_Object\n+         --  defined in Ada.Synchronous_Task_Control.\n \n-      begin\n-         --  Do not attempt to load Ada.Synchronous_Task_Control in No_Run_Time\n-         --  mode. The unit contains tagged types and those are not allowed in\n-         --  this mode.\n+         --------------------------\n+         -- Is_Suspension_Object --\n+         --------------------------\n \n-         if No_Run_Time_Mode then\n-            return False;\n+         function Is_Suspension_Object (Id : Entity_Id) return Boolean is\n+         begin\n+            --  This approach does an exact name match rather than to rely on\n+            --  RTSfind. Routine Is_Effectively_Volatile is used by clients of\n+            --  the front end at point where all auxiliary tables are locked\n+            --  and any modifications to them are treated as violations. Do not\n+            --  tamper with the tables, instead examine the Chars fields of all\n+            --  the scopes of Id.\n \n-         --  Unit Ada.Synchronous_Task_Control is not available, the type\n-         --  cannot possibly be a descendant of Suspension_Object.\n+            return\n+              Chars (Id) = Name_Suspension_Object\n+                and then Present (Scope (Id))\n+                and then Chars (Scope (Id)) = Name_Synchronous_Task_Control\n+                and then Present (Scope (Scope (Id)))\n+                and then Chars (Scope (Scope (Id))) = Name_Ada;\n+         end Is_Suspension_Object;\n \n-         elsif not RTE_Available (RE_Suspension_Object) then\n-            return False;\n-         end if;\n+         --  Local variables\n \n+         Cur_Typ : Entity_Id;\n+         Par_Typ : Entity_Id;\n+\n+      --  Start of processing for Is_Descendant_Of_Suspension_Object\n+\n+      begin\n          --  Climb the type derivation chain checking each parent type against\n          --  Suspension_Object.\n \n@@ -11435,7 +11448,7 @@ package body Sem_Util is\n \n             --  The current type is a match\n \n-            if Is_RTE (Cur_Typ, RE_Suspension_Object) then\n+            if Is_Suspension_Object (Cur_Typ) then\n                return True;\n \n             --  Stop the traversal once the root of the derivation chain has"}, {"sha": "7f252875cefad6b33f91ff2eca5d07f28bc388b7", "filename": "gcc/ada/snames.ads-tmpl", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fsnames.ads-tmpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f8f3e6e07accbcb641a73bc7545677d172503bd/gcc%2Fada%2Fsnames.ads-tmpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.ads-tmpl?ref=1f8f3e6e07accbcb641a73bc7545677d172503bd", "patch": "@@ -1398,6 +1398,8 @@ package Snames is\n    --  Other miscellaneous names used in front end\n \n    Name_Unaligned_Valid                  : constant Name_Id := N + $;\n+   Name_Suspension_Object                : constant Name_Id := N + $;\n+   Name_Synchronous_Task_Control         : constant Name_Id := N + $;\n \n    --  Names used to implement iterators over predefined containers\n "}]}