{"sha": "1922295935280633da068157c633c3e4cf0cb209", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTkyMjI5NTkzNTI4MDYzM2RhMDY4MTU3YzYzM2MzZTRjZjBjYjIwOQ==", "commit": {"author": {"name": "Dave Korn", "email": "dave.korn.cygwin@gmail.com", "date": "2010-03-23T05:05:35Z"}, "committer": {"name": "Dave Korn", "email": "davek@gcc.gnu.org", "date": "2010-03-23T05:05:35Z"}, "message": "re PR libobjc/30445 (Fix for FIXME in gcc-4_2-branch/libobjc/Makefile.in)\n\n\tPR libobjc/30445\n\t* configure.ac (extra_ldflags_libobjc): Define appropriately for\n\tCygwin and MinGW hosts.\n\t* Makefile.am (libobjc_s.a): Remove dead pre-libtool target.\n\t(libobjc.dll): Likewise.\n\t* configure: Regenerate.\n\nFrom-SVN: r157662", "tree": {"sha": "001ab977795e25f5b8478f231054b6d12b5f139a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/001ab977795e25f5b8478f231054b6d12b5f139a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1922295935280633da068157c633c3e4cf0cb209", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1922295935280633da068157c633c3e4cf0cb209", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1922295935280633da068157c633c3e4cf0cb209", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1922295935280633da068157c633c3e4cf0cb209/comments", "author": {"login": "davek-cygwin", "id": 530057, "node_id": "MDQ6VXNlcjUzMDA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/530057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davek-cygwin", "html_url": "https://github.com/davek-cygwin", "followers_url": "https://api.github.com/users/davek-cygwin/followers", "following_url": "https://api.github.com/users/davek-cygwin/following{/other_user}", "gists_url": "https://api.github.com/users/davek-cygwin/gists{/gist_id}", "starred_url": "https://api.github.com/users/davek-cygwin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davek-cygwin/subscriptions", "organizations_url": "https://api.github.com/users/davek-cygwin/orgs", "repos_url": "https://api.github.com/users/davek-cygwin/repos", "events_url": "https://api.github.com/users/davek-cygwin/events{/privacy}", "received_events_url": "https://api.github.com/users/davek-cygwin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d79238bcd68bdd31b9ce890840b79760e8a4eac5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d79238bcd68bdd31b9ce890840b79760e8a4eac5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d79238bcd68bdd31b9ce890840b79760e8a4eac5"}], "stats": {"total": 52, "additions": 20, "deletions": 32}, "files": [{"sha": "a6a491ac1708acabcda36f8f1e4e53501d8b681f", "filename": "libobjc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1922295935280633da068157c633c3e4cf0cb209/libobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1922295935280633da068157c633c3e4cf0cb209/libobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FChangeLog?ref=1922295935280633da068157c633c3e4cf0cb209", "patch": "@@ -1,3 +1,12 @@\n+2010-03-23  Dave Korn  <dave.korn.cygwin@gmail.com>\n+\n+\tPR libobjc/30445\n+\t* configure.ac (extra_ldflags_libobjc): Define appropriately for\n+\tCygwin and MinGW hosts.\n+\t* Makefile.am (libobjc_s.a): Remove dead pre-libtool target.\n+\t(libobjc.dll): Likewise.\n+\t* configure: Regenerate.\n+\n 2009-12-05  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n \t* configure: Regenerate."}, {"sha": "71faf8ac43da725eb925f00b2098b89bc3b2dd2e", "filename": "libobjc/Makefile.in", "status": "modified", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1922295935280633da068157c633c3e4cf0cb209/libobjc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1922295935280633da068157c633c3e4cf0cb209/libobjc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FMakefile.in?ref=1922295935280633da068157c633c3e4cf0cb209", "patch": "@@ -291,35 +291,6 @@ libobjc_gc$(libsuffix).la: $(OBJS_GC)\n \t\t-version-info $(LIBOBJC_GC_VERSION) $(extra_ldflags_libobjc) \\\n \t\t$(LTLDFLAGS)\n \n-#\n-# FIXME -- The following part does not fit in the libtool context. \n-# Libtool is supposed to [going to] be able to create a win 32 DLL \n-# without extra code but since I don't have a win machine to test \n-# if it already works, I leave the old code here.\n-#\n-libobjc_s.a: libobjc.la\n-\tmv libobjc.a libobjc_s.a\n-\n-# Create a relocatable DLL\n-libobjc.dll: libobjc_s.a libobjc_entry.o\n-\t$(CC) -mdll -Wl,--base-file -Wl,libobjc.base \\\n-\t\t-o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32\n-\t$(DLLTOOL) --dllname libobjc.dll --def $(srcdir)/libobjc.def \\\n-\t\t--base-file libobjc.base --output-exp libobjc.exp\n-\t$(GCC_FOR_TARGET) -mdll -Wl,--base-file libobjc.base libobjc.exp \\\n-\t\t-o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32\n-\t$(DLLTOOL) --dllname libobjc.dll --def $(srcdir)/libobjc.def \\\n-\t\t--base-file libobjc.base --output-exp libobjc.exp\n-\t$(GCC_FOR_TARGET) libobjc.exp -mdll \\\n-\t\t-o libobjc.dll libobjc_s.a libobjc_entry.o -lkernel32\n-\t$(DLLTOOL) --dllname libobjc.dll --def $(srcdir)/libobjc.def \\\n-\t\t--output-lib libobjc.a\n-#\n-#\n-#\n-#\n-#\n-\n info:\n dvi:\n pdf:"}, {"sha": "1dfcb31bd218d42c754f0a06b0451d4c9abc568d", "filename": "libobjc/configure", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1922295935280633da068157c633c3e4cf0cb209/libobjc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1922295935280633da068157c633c3e4cf0cb209/libobjc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fconfigure?ref=1922295935280633da068157c633c3e4cf0cb209", "patch": "@@ -3321,6 +3321,10 @@ case \"${host}\" in\n     # Darwin needs -single_module when linking libobjc\n     extra_ldflags_libobjc=-Wl,-single_module\n     ;;\n+  *-cygwin*|*-mingw*)\n+    # Tell libtool to build DLLs on Windows\n+    extra_ldflags_libobjc='-no-undefined -bindir $(bindir)'\n+    ;;\n esac\n \n \n@@ -10562,7 +10566,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10565 \"configure\"\n+#line 10569 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -10668,7 +10672,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10671 \"configure\"\n+#line 10675 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11242,7 +11246,7 @@ if test \"${enable_sjlj_exceptions+set}\" = set; then :\n   enableval=$enable_sjlj_exceptions; :\n else\n   cat > conftest.$ac_ext << EOF\n-#line 11245 \"configure\"\n+#line 11249 \"configure\"\n @interface Frob\n @end\n @implementation Frob"}, {"sha": "8820edc7e64a7c810a944e20ea4ee2c8938dfa5e", "filename": "libobjc/configure.ac", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1922295935280633da068157c633c3e4cf0cb209/libobjc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1922295935280633da068157c633c3e4cf0cb209/libobjc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fconfigure.ac?ref=1922295935280633da068157c633c3e4cf0cb209", "patch": "@@ -161,6 +161,10 @@ case \"${host}\" in\n     # Darwin needs -single_module when linking libobjc\n     extra_ldflags_libobjc=-Wl,-single_module\n     ;;\n+  *-cygwin*|*-mingw*)\n+    # Tell libtool to build DLLs on Windows\n+    extra_ldflags_libobjc='-no-undefined -bindir $(bindir)'\n+    ;;\n esac\n AC_SUBST(extra_ldflags_libobjc)\n "}]}