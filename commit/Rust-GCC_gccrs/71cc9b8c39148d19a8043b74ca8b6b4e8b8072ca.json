{"sha": "71cc9b8c39148d19a8043b74ca8b6b4e8b8072ca", "node_id": "C_kwDOANBUbNoAKDcxY2M5YjhjMzkxNDhkMTlhODA0M2I3NGNhOGI2YjRlOGI4MDcyY2E", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@adacore.com", "date": "2021-12-15T05:22:34Z"}, "committer": {"name": "Alexandre Oliva", "email": "oliva@gnu.org", "date": "2021-12-15T05:22:34Z"}, "message": "[PR100518] store by mult pieces: keep addr in Pmode\n\nThe conversion of a MEM address to ptr_mode in\ntry_store_by_multiple_pieces was misguided: copy_addr_to_reg expects\nPmode for addresses.\n\n\nfor  gcc/ChangeLog\n\n\tPR target/100518\n\t* builtins.c (try_store_by_multiple_pieces): Drop address\n\tconversion to ptr_mode.\n\nfor  gcc/testsuite/ChangeLog\n\n\tPR target/100518\n\t* gcc.target/aarch64/pr100518.c: New.", "tree": {"sha": "eae49da0f9010557e0fb24287d96ac2441c4df29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eae49da0f9010557e0fb24287d96ac2441c4df29"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/71cc9b8c39148d19a8043b74ca8b6b4e8b8072ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71cc9b8c39148d19a8043b74ca8b6b4e8b8072ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71cc9b8c39148d19a8043b74ca8b6b4e8b8072ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71cc9b8c39148d19a8043b74ca8b6b4e8b8072ca/comments", "author": null, "committer": null, "parents": [{"sha": "c95a9f1ee7ebd461cbced455271a993bae3a42b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c95a9f1ee7ebd461cbced455271a993bae3a42b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c95a9f1ee7ebd461cbced455271a993bae3a42b6"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "cd8947b4de286c89d773bdc8f5419af3c270f076", "filename": "gcc/builtins.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71cc9b8c39148d19a8043b74ca8b6b4e8b8072ca/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71cc9b8c39148d19a8043b74ca8b6b4e8b8072ca/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=71cc9b8c39148d19a8043b74ca8b6b4e8b8072ca", "patch": "@@ -4003,7 +4003,7 @@ try_store_by_multiple_pieces (rtx to, rtx len, unsigned int ctz_len,\n       constfundata = &valc;\n     }\n \n-  rtx ptr = copy_addr_to_reg (convert_to_mode (ptr_mode, XEXP (to, 0), 0));\n+  rtx ptr = copy_addr_to_reg (XEXP (to, 0));\n   rtx rem = copy_to_mode_reg (ptr_mode, convert_to_mode (ptr_mode, len, 0));\n   to = replace_equiv_address (to, ptr);\n   set_mem_align (to, align);"}, {"sha": "5ca599f5d2e0e1603456b2eaf2e98866871faad1", "filename": "gcc/testsuite/gcc.target/aarch64/pr100518.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71cc9b8c39148d19a8043b74ca8b6b4e8b8072ca/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fpr100518.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71cc9b8c39148d19a8043b74ca8b6b4e8b8072ca/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fpr100518.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fpr100518.c?ref=71cc9b8c39148d19a8043b74ca8b6b4e8b8072ca", "patch": "@@ -0,0 +1,9 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mabi=ilp32 -mstrict-align -O2\" } */\n+\n+int unsigned_range_min, unsigned_range_max, a11___trans_tmp_1;\n+\n+void a11() {\n+  a11___trans_tmp_1 = unsigned_range_max < unsigned_range_min;\n+  __builtin_memset((char *)1, 0, a11___trans_tmp_1);\n+}"}]}