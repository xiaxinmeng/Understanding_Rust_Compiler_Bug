{"sha": "6d47b1e3e982e90a53c20a3f6a7a7ed3cd78132d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmQ0N2IxZTNlOTgyZTkwYTUzYzIwYTNmNmE3YTdlZDNjZDc4MTMyZA==", "commit": {"author": {"name": "Pascal Obry", "email": "obry@adacore.com", "date": "2009-04-29T09:55:37Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-29T09:55:37Z"}, "message": "initialize.c: Do not expand quoted arguments.\n\n2009-04-29  Pascal Obry  <obry@adacore.com>\n\n\t* initialize.c: Do not expand quoted arguments.\n\nFrom-SVN: r146941", "tree": {"sha": "6c1519cd4279f52654641be70274f383faa16745", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c1519cd4279f52654641be70274f383faa16745"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6d47b1e3e982e90a53c20a3f6a7a7ed3cd78132d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d47b1e3e982e90a53c20a3f6a7a7ed3cd78132d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d47b1e3e982e90a53c20a3f6a7a7ed3cd78132d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d47b1e3e982e90a53c20a3f6a7a7ed3cd78132d/comments", "author": {"login": "TurboGit", "id": 467069, "node_id": "MDQ6VXNlcjQ2NzA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/467069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TurboGit", "html_url": "https://github.com/TurboGit", "followers_url": "https://api.github.com/users/TurboGit/followers", "following_url": "https://api.github.com/users/TurboGit/following{/other_user}", "gists_url": "https://api.github.com/users/TurboGit/gists{/gist_id}", "starred_url": "https://api.github.com/users/TurboGit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TurboGit/subscriptions", "organizations_url": "https://api.github.com/users/TurboGit/orgs", "repos_url": "https://api.github.com/users/TurboGit/repos", "events_url": "https://api.github.com/users/TurboGit/events{/privacy}", "received_events_url": "https://api.github.com/users/TurboGit/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d45871da6e9ec5907510d65834ab69e781b3afa5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d45871da6e9ec5907510d65834ab69e781b3afa5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d45871da6e9ec5907510d65834ab69e781b3afa5"}], "stats": {"total": 29, "additions": 24, "deletions": 5}, "files": [{"sha": "fd56ece2503a6e375bffbef87025878f60aeaded", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d47b1e3e982e90a53c20a3f6a7a7ed3cd78132d/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d47b1e3e982e90a53c20a3f6a7a7ed3cd78132d/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=6d47b1e3e982e90a53c20a3f6a7a7ed3cd78132d", "patch": "@@ -1,3 +1,7 @@\n+2009-04-29  Pascal Obry  <obry@adacore.com>\n+\n+\t* initialize.c: Do not expand quoted arguments.\n+\n 2009-04-29  Emmanuel Briot  <briot@adacore.com>\n \n \t* prj-ext.adb, prj.adb, prj.ads: Fix memory leaks."}, {"sha": "705cbf20e3cc09b5492e46957021bea4f053ff20", "filename": "gcc/ada/initialize.c", "status": "modified", "additions": 20, "deletions": 5, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d47b1e3e982e90a53c20a3f6a7a7ed3cd78132d/gcc%2Fada%2Finitialize.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d47b1e3e982e90a53c20a3f6a7a7ed3cd78132d/gcc%2Fada%2Finitialize.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Finitialize.c?ref=6d47b1e3e982e90a53c20a3f6a7a7ed3cd78132d", "patch": "@@ -130,6 +130,7 @@ __gnat_initialize (void *eh ATTRIBUTE_UNUSED)\n      int last;\n      int argc_expanded = 0;\n      TCHAR result [MAX_PATH];\n+     int quoted;\n \n      wargv = CommandLineToArgvW (GetCommandLineW(), &wargc);\n \n@@ -146,9 +147,12 @@ __gnat_initialize (void *eh ATTRIBUTE_UNUSED)\n \n \t for (k=1; k<wargc; k++)\n \t   {\n-\t     /* Check for wildcard expansion. */\n-\t     if (_tcsstr (wargv[k], _T(\"?\")) != 0 ||\n-\t\t _tcsstr (wargv[k], _T(\"*\")) != 0)\n+\t     quoted = (wargv[k][0] == _T('\\''));\n+\n+\t     /* Check for wildcard expansion if the argument is not quoted. */\n+\t     if (!quoted\n+\t\t && (_tcsstr (wargv[k], _T(\"?\")) != 0 ||\n+\t\t     _tcsstr (wargv[k], _T(\"*\")) != 0))\n \t       {\n \t\t /* Wilcards are present, append all corresponding matches. */\n \t\t WIN32_FIND_DATA FileData;\n@@ -173,8 +177,19 @@ __gnat_initialize (void *eh ATTRIBUTE_UNUSED)\n \t       }\n \t     else\n \t       {\n-\t\t /*  No wildcard. Store parameter as-is. */\n-\t\t append_arg (&argc_expanded, wargv[k], &gnat_argv, &last);\n+\t\t /*  No wildcard. Store parameter as-is. Remove quote if\n+\t\t     needed. */\n+\t\t if (quoted)\n+\t\t   {\n+\t\t     int len = _tcslen (wargv[k]);\n+\n+\t\t     /* Remove ending quote */\n+\t\t     wargv[k][len-1] = _T('\\0');\n+\t\t     append_arg\n+\t\t       (&argc_expanded, &wargv[k][1], &gnat_argv, &last);\n+\t\t   }\n+\t\t else\n+\t\t   append_arg (&argc_expanded, wargv[k], &gnat_argv, &last);\n \t       }\n \t   }\n "}]}