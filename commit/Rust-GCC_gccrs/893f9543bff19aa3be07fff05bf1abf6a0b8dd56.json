{"sha": "893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODkzZjk1NDNiZmYxOWFhM2JlMDdmZmYwNWJmMWFiZjZhMGI4ZGQ1Ng==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2020-10-11T20:20:43Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2020-10-12T10:14:47Z"}, "message": "d: Merge upstream dmd 70aabfb51\n\nFixes a symbol resolver bug where a private alias becomes public if used\nbefore its declaration.\n\nReviewed-on: https://github.com/dlang/dmd/pull/11831\n\ngcc/d/ChangeLog:\n\n\t* dmd/MERGE: Merge upstream dmd 70aabfb51", "tree": {"sha": "a135603beb9eeb81b83fc89da164a22bdf0ba2aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a135603beb9eeb81b83fc89da164a22bdf0ba2aa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "19f6b41a3a12c67ccbc51c5b729954c4ccaf1176", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19f6b41a3a12c67ccbc51c5b729954c4ccaf1176"}], "stats": {"total": 50, "additions": 49, "deletions": 1}, "files": [{"sha": "5f6193f76b7a2dee74a2d5cb8c7d733b4fb1a788", "filename": "gcc/d/dmd/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Fd%2Fdmd%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Fd%2Fdmd%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fdmd%2FMERGE?ref=893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "patch": "@@ -1,4 +1,4 @@\n-3a979052509fff8170ba80e48817377a60e78eb3\n+70aabfb511d55f2bfbdccbac7868519d9d4b63da\n \n The first line of this file holds the git revision number of the last\n merge done from the dlang/dmd repository."}, {"sha": "f490cc5a4135c6f5dd43473227888aa01a8d4ff2", "filename": "gcc/d/dmd/declaration.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Fd%2Fdmd%2Fdeclaration.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Fd%2Fdmd%2Fdeclaration.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fdmd%2Fdeclaration.c?ref=893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "patch": "@@ -340,6 +340,13 @@ void AliasDeclaration::semantic(Scope *sc)\n void AliasDeclaration::aliasSemantic(Scope *sc)\n {\n     //printf(\"AliasDeclaration::semantic() %s\\n\", toChars());\n+\n+    // as AliasDeclaration::semantic, in case we're called first.\n+    // see https://issues.dlang.org/show_bug.cgi?id=21001\n+    storage_class |= sc->stc & STCdeprecated;\n+    protection = sc->protection;\n+    userAttribDecl = sc->userAttribDecl;\n+\n     // TypeTraits needs to know if it's located in an AliasDeclaration\n     sc->flags |= SCOPEalias;\n "}, {"sha": "0faeb4038ef8673164586a7581e3627fc04fae86", "filename": "gcc/testsuite/gdc.test/fail_compilation/fail21001.d", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Ffail21001.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Ffail21001.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Ffail21001.d?ref=893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "patch": "@@ -0,0 +1,12 @@\n+/*\n+TEST_OUTPUT:\n+---\n+fail_compilation/fail21001.d(12): Error: undefined identifier `Alias`\n+---\n+*/\n+\n+module fail21001;\n+\n+import imports.fail21001b;\n+\n+void main() { Alias var; }"}, {"sha": "69c1c20a3560d77028ef85fed81a2561883d574c", "filename": "gcc/testsuite/gdc.test/fail_compilation/imports/fail21001b.d", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Ffail21001b.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Ffail21001b.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Ffail21001b.d?ref=893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "patch": "@@ -0,0 +1,5 @@\n+module imports.fail21001b;\n+\n+private struct S { Alias member; }\n+\n+private alias Alias = int;"}, {"sha": "d9298bf972d202efc2583b90aab1bcc89e4f9a46", "filename": "gcc/testsuite/gdc.test/fail_compilation/imports/issue21295ast_node.d", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295ast_node.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295ast_node.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295ast_node.d?ref=893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "patch": "@@ -0,0 +1,5 @@\n+module imports.issue21295ast_node;\n+import imports.issue21295visitor : Visitor;\n+class ASTNode {\n+    void accept(Visitor);\n+}"}, {"sha": "5eccf6ac028c9444c21f88af7c3b72424b3dace9", "filename": "gcc/testsuite/gdc.test/fail_compilation/imports/issue21295astcodegen.d", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295astcodegen.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295astcodegen.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295astcodegen.d?ref=893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "patch": "@@ -0,0 +1,4 @@\n+module imports.issue21295astcodegen;\n+struct ASTCodegen {\n+    import imports.issue21295dtemplate;\n+}"}, {"sha": "8864f9ea27e2bcb3c4853745eac23ae50d60509b", "filename": "gcc/testsuite/gdc.test/fail_compilation/imports/issue21295dtemplate.d", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295dtemplate.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295dtemplate.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295dtemplate.d?ref=893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "patch": "@@ -0,0 +1,3 @@\n+module imports.issue21295dtemplate;\n+import imports.issue21295ast_node;\n+class TemplateParameter : ASTNode { }"}, {"sha": "3665a7fe8c243670c1cab40ec216e68d931d282e", "filename": "gcc/testsuite/gdc.test/fail_compilation/imports/issue21295visitor.d", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295visitor.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295visitor.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fimports%2Fissue21295visitor.d?ref=893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "patch": "@@ -0,0 +1,3 @@\n+module imports.issue21295visitor;\n+import imports.issue21295astcodegen;\n+class Visitor { }"}, {"sha": "9916e9ba2a7d74a86658bb29c06aa4f6b26d07bc", "filename": "gcc/testsuite/gdc.test/fail_compilation/issue21295.d", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fissue21295.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/893f9543bff19aa3be07fff05bf1abf6a0b8dd56/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fissue21295.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Ffail_compilation%2Fissue21295.d?ref=893f9543bff19aa3be07fff05bf1abf6a0b8dd56", "patch": "@@ -0,0 +1,9 @@\n+/*\n+REQUIRED_ARGS: -de\n+TEST_OUTPUT:\n+---\n+fail_compilation/issue21295.d(9): Deprecation: imports.issue21295ast_node.Visitor is not visible from module issue21295\n+---\n+*/\n+import imports.issue21295ast_node;\n+Visitor should_fail;"}]}