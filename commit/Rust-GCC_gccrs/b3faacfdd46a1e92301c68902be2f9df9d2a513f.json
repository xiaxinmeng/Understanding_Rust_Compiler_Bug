{"sha": "b3faacfdd46a1e92301c68902be2f9df9d2a513f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNmYWFjZmRkNDZhMWU5MjMwMWM2ODkwMmJlMmY5ZGY5ZDJhNTEzZg==", "commit": {"author": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@users.sourceforge.net", "date": "2001-11-18T06:31:20Z"}, "committer": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@gcc.gnu.org", "date": "2001-11-18T06:31:20Z"}, "message": "decl.c (create_array_type_for_decl): Check if NAME is NULL_TREE when displaying error message about missing array bounds.\n\n\t* decl.c (create_array_type_for_decl): Check if NAME is NULL_TREE\n\twhen displaying error message about missing array bounds.\n\nFrom-SVN: r47136", "tree": {"sha": "7f89f1d2e0b01d341b6845bd9af7fbc4a2e5623f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f89f1d2e0b01d341b6845bd9af7fbc4a2e5623f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3faacfdd46a1e92301c68902be2f9df9d2a513f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3faacfdd46a1e92301c68902be2f9df9d2a513f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3faacfdd46a1e92301c68902be2f9df9d2a513f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3faacfdd46a1e92301c68902be2f9df9d2a513f/comments", "author": null, "committer": null, "parents": [{"sha": "873ff98777cfd6685aae1aac33d2bc4d52bcd781", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/873ff98777cfd6685aae1aac33d2bc4d52bcd781", "html_url": "https://github.com/Rust-GCC/gccrs/commit/873ff98777cfd6685aae1aac33d2bc4d52bcd781"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "a388f5115a02848eb8854a22d376438f6a4af2f1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3faacfdd46a1e92301c68902be2f9df9d2a513f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3faacfdd46a1e92301c68902be2f9df9d2a513f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b3faacfdd46a1e92301c68902be2f9df9d2a513f", "patch": "@@ -1,3 +1,8 @@\n+2001-11-17  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\t* decl.c (create_array_type_for_decl): Check if NAME is NULL_TREE\n+\twhen displaying error message about missing array bounds.\n+\n 2001-11-17  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n \n \t* mangle.c (write_expression): Handle CAST_EXPR, STATIC_CAST_EXPR,"}, {"sha": "f7448f5f10891c0018c998c688974f328026afa5", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3faacfdd46a1e92301c68902be2f9df9d2a513f/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3faacfdd46a1e92301c68902be2f9df9d2a513f/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=b3faacfdd46a1e92301c68902be2f9df9d2a513f", "patch": "@@ -9476,8 +9476,11 @@ create_array_type_for_decl (name, type, size)\n      can be omitted only for the first member of the sequence.  */\n   if (TREE_CODE (type) == ARRAY_TYPE && !TYPE_DOMAIN (type))\n     {\n-      cp_error (\"declaration of `%D' as multidimensional array must have bounds for all dimensions except the first\",\n-\t\tname);\n+      if (name)\n+\tcp_error (\"declaration of `%D' as multidimensional array must have bounds for all dimensions except the first\",\n+\t\t  name);\n+      else\n+\tcp_error (\"multidimensional array must have bounds for all dimensions except the first\");\n \n       return error_mark_node;\n     }"}, {"sha": "aff960e5742a6c1776620e475d458b924abe1cb3", "filename": "gcc/testsuite/g++.dg/other/array1.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3faacfdd46a1e92301c68902be2f9df9d2a513f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Farray1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3faacfdd46a1e92301c68902be2f9df9d2a513f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Farray1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Farray1.C?ref=b3faacfdd46a1e92301c68902be2f9df9d2a513f", "patch": "@@ -0,0 +1,10 @@\n+// Test typeid of multidimensional array with no bounds.\n+// { dg-do compile }\n+\n+#include <typeinfo>\n+\n+int main()\n+{\n+\tconst char *s = typeid(double[][]).name(); // { dg-error \"bounds|confused\" }\n+\treturn 0;\n+}"}]}