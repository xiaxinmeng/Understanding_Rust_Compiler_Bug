{"sha": "327b20f5ab2b008af5dec106844b5fde87aeabf6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzI3YjIwZjVhYjJiMDA4YWY1ZGVjMTA2ODQ0YjVmZGU4N2FlYWJmNg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2014-10-10T08:27:52Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2014-10-10T08:27:52Z"}, "message": "* lra-assigns.c (assign_by_spills): Fix thinko in previous change.\n\nFrom-SVN: r216060", "tree": {"sha": "9f9e2a5257213ba3b2b930076c8b84a59b4f9f3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f9e2a5257213ba3b2b930076c8b84a59b4f9f3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/327b20f5ab2b008af5dec106844b5fde87aeabf6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/327b20f5ab2b008af5dec106844b5fde87aeabf6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/327b20f5ab2b008af5dec106844b5fde87aeabf6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/327b20f5ab2b008af5dec106844b5fde87aeabf6/comments", "author": null, "committer": null, "parents": [{"sha": "bdf13188c06c3109d64368a865954816fafae567", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdf13188c06c3109d64368a865954816fafae567", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bdf13188c06c3109d64368a865954816fafae567"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "6df2d6359228c41c018eaf0d1950eb9b3dd39fb9", "filename": "gcc/lra-assigns.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/327b20f5ab2b008af5dec106844b5fde87aeabf6/gcc%2Flra-assigns.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/327b20f5ab2b008af5dec106844b5fde87aeabf6/gcc%2Flra-assigns.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flra-assigns.c?ref=327b20f5ab2b008af5dec106844b5fde87aeabf6", "patch": "@@ -1289,6 +1289,7 @@ assign_by_spills (void)\n \t  /* We did not assign hard regs to reload pseudos after two iterations.\n \t     Either it's an asm and something is wrong with the constraints, or\n \t     we have run out of spill registers; error out in either case.  */\n+\t  bool asm_p = false;\n \t  bitmap_head failed_reload_insns;\n \n \t  bitmap_initialize (&failed_reload_insns, &reg_obstack);\n@@ -1309,6 +1310,7 @@ assign_by_spills (void)\n \t      insn = lra_insn_recog_data[u]->insn;\n \t      if (asm_noperands (PATTERN (insn)) >= 0)\n \t\t{\n+\t\t  asm_p = true;\n \t\t  error_for_asm (insn,\n \t\t\t\t \"%<asm%> operand has impossible constraints\");\n \t\t  /* Avoid further trouble with this insn.\n@@ -1329,7 +1331,7 @@ assign_by_spills (void)\n \t\t      lra_set_insn_deleted (insn);\n \t\t    }\n \t\t}\n-\t      else\n+\t      else if (!asm_p)\n \t\t{\n \t\t  error (\"unable to find a register to spill\");\n \t\t  fatal_insn (\"this is the insn:\", insn);"}]}