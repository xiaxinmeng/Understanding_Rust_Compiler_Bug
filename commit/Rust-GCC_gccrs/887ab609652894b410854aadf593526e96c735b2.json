{"sha": "887ab609652894b410854aadf593526e96c735b2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODg3YWI2MDk2NTI4OTRiNDEwODU0YWFkZjU5MzUyNmU5NmM3MzViMg==", "commit": {"author": {"name": "Naveen H.S", "email": "Naveen.Hurugalawadi@caviumnetworks.com", "date": "2015-07-24T04:47:48Z"}, "committer": {"name": "Naveen H.S", "email": "naveenh@gcc.gnu.org", "date": "2015-07-24T04:47:48Z"}, "message": "re PR middle-end/25529 ((unsigned * 2)/2 is not changed into unsigned &0x7FFFFFFF)\n\nPR middle-end/25529\n2015-07-24  Naveen H.S  <Naveen.Hurugalawadi@caviumnetworks.com>\n\ngcc/testsuite/ChangeLog:\n\t* gcc.dg/pr25529.c: New test.\n\ngcc/ChangeLog:\n\t* match.pd (trunc_div (mult @0 integer_pow2p@1) @1) : New simplifier.\n\nFrom-SVN: r226136", "tree": {"sha": "a5cac4f24596afe32c7645d5f8e071b7176ef2f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5cac4f24596afe32c7645d5f8e071b7176ef2f6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/887ab609652894b410854aadf593526e96c735b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/887ab609652894b410854aadf593526e96c735b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/887ab609652894b410854aadf593526e96c735b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/887ab609652894b410854aadf593526e96c735b2/comments", "author": null, "committer": null, "parents": [{"sha": "390875e69414e413076e9dad99dfab945f986eab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/390875e69414e413076e9dad99dfab945f986eab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/390875e69414e413076e9dad99dfab945f986eab"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "aca1f829b76e88bc32b9bc050c748dbf60378cfe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/887ab609652894b410854aadf593526e96c735b2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/887ab609652894b410854aadf593526e96c735b2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=887ab609652894b410854aadf593526e96c735b2", "patch": "@@ -1,3 +1,8 @@\n+2015-07-24  Naveen H.S  <Naveen.Hurugalawadi@caviumnetworks.com>\n+\n+         PR middle-end/25529\n+         * match.pd (trunc_div (mult @0 integer_pow2p@1) @1) : New simplifier.\n+\n 2015-07-23  Kugan Vivekanandarajah  <kuganv@linaro.org>\n \n \t* config/arm/arm.c (arm_emit_movpair): Add REG_EQUAL notes to"}, {"sha": "cc3089753aa2b860d3fce5204a0a694edc2b0c67", "filename": "gcc/match.pd", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/887ab609652894b410854aadf593526e96c735b2/gcc%2Fmatch.pd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/887ab609652894b410854aadf593526e96c735b2/gcc%2Fmatch.pd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmatch.pd?ref=887ab609652894b410854aadf593526e96c735b2", "patch": "@@ -29,7 +29,8 @@ along with GCC; see the file COPYING3.  If not see\n    integer_each_onep integer_truep\n    real_zerop real_onep real_minus_onep\n    CONSTANT_CLASS_P\n-   tree_expr_nonnegative_p)\n+   tree_expr_nonnegative_p\n+   integer_pow2p)\n \n /* Operator lists.  */\n (define_operator_list tcc_comparison\n@@ -280,6 +281,14 @@ along with GCC; see the file COPYING3.  If not see\n \t&& integer_pow2p (@2) && tree_int_cst_sgn (@2) > 0)\n    (bit_and @0 (convert (minus @1 { build_int_cst (TREE_TYPE (@1), 1); }))))))\n \n+/* Simplify (unsigned t * 2)/2 -> unsigned t & 0x7FFFFFFF.  */\n+(simplify\n+ (trunc_div (mult @0 integer_pow2p@1) @1)\n+ (if (TYPE_UNSIGNED (TREE_TYPE (@0)))\n+  (bit_and @0 { wide_int_to_tree\n+\t\t(type, wi::mask (TYPE_PRECISION (type) - wi::exact_log2 (@1),\n+\t\t\t\t false, TYPE_PRECISION (type))); })))\n+\n /* X % Y is smaller than Y.  */\n (for cmp (lt ge)\n  (simplify"}, {"sha": "9adf8768165a7c695a14216f5a1ed5a03063776b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/887ab609652894b410854aadf593526e96c735b2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/887ab609652894b410854aadf593526e96c735b2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=887ab609652894b410854aadf593526e96c735b2", "patch": "@@ -1,3 +1,8 @@\n+2015-07-24  Naveen H.S  <Naveen.Hurugalawadi@caviumnetworks.com>\n+\n+\tPR middle-end/25529\n+\t* gcc.dg/pr25529.c: New test.\n+\n 2015-07-23  Kugan Vivekanandarajah  <kuganv@linaro.org>\n \n \t* gcc.target/arm/reg_equal_test.c: New test."}, {"sha": "336d93b0d6a2fb7b56bd67f4f15c543180a41cb4", "filename": "gcc/testsuite/gcc.dg/pr25529.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/887ab609652894b410854aadf593526e96c735b2/gcc%2Ftestsuite%2Fgcc.dg%2Fpr25529.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/887ab609652894b410854aadf593526e96c735b2/gcc%2Ftestsuite%2Fgcc.dg%2Fpr25529.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr25529.c?ref=887ab609652894b410854aadf593526e96c735b2", "patch": "@@ -0,0 +1,11 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fdump-tree-optimized\" } */\n+/* { dg-require-effective-target int32 } */\n+\n+int\n+f (unsigned t)\n+{\n+  return (t * 2) / 2;\n+}\n+\n+/* { dg-final { scan-tree-dump \"\\& 2147483647\" \"optimized\" } } */"}]}