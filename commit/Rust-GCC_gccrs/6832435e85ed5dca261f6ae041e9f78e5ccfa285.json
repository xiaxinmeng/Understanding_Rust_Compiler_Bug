{"sha": "6832435e85ed5dca261f6ae041e9f78e5ccfa285", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjgzMjQzNWU4NWVkNWRjYTI2MWY2YWUwNDFlOWY3OGU1Y2NmYTI4NQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2010-10-12T08:54:10Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2010-10-12T08:54:10Z"}, "message": "gcc_update: Run $GCC_HG pull and update separately.\n\n\t* gcc_update: Run $GCC_HG pull and update separately.\n\tCheck parents for SVN revision.\n\nFrom-SVN: r165352", "tree": {"sha": "ac60d879344f26d76e57b5ccfdd040082ab13549", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ac60d879344f26d76e57b5ccfdd040082ab13549"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6832435e85ed5dca261f6ae041e9f78e5ccfa285", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6832435e85ed5dca261f6ae041e9f78e5ccfa285", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6832435e85ed5dca261f6ae041e9f78e5ccfa285", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6832435e85ed5dca261f6ae041e9f78e5ccfa285/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d95828db91607d1060c4301ab5631cb5a75cc787", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d95828db91607d1060c4301ab5631cb5a75cc787", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d95828db91607d1060c4301ab5631cb5a75cc787"}], "stats": {"total": 26, "additions": 21, "deletions": 5}, "files": [{"sha": "c2c371cce9fe6e92a5fae560273819f7179404d5", "filename": "contrib/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6832435e85ed5dca261f6ae041e9f78e5ccfa285/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6832435e85ed5dca261f6ae041e9f78e5ccfa285/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=6832435e85ed5dca261f6ae041e9f78e5ccfa285", "patch": "@@ -1,3 +1,8 @@\n+2010-10-12  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* gcc_update: Run $GCC_HG pull and update separately.\n+\tCheck parents for SVN revision.\n+\n 2010-10-11  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n \t* test_recheck: New script."}, {"sha": "b989ffdc574b71890552927a5c475ec9597d42b2", "filename": "contrib/gcc_update", "status": "modified", "additions": 16, "deletions": 5, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6832435e85ed5dca261f6ae041e9f78e5ccfa285/contrib%2Fgcc_update", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6832435e85ed5dca261f6ae041e9f78e5ccfa285/contrib%2Fgcc_update", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fgcc_update?ref=6832435e85ed5dca261f6ae041e9f78e5ccfa285", "patch": "@@ -311,17 +311,28 @@ case $vcs_type in\n \t# Update tree, but make sure to only pull the default branch.\n \t# Otherwise all branches in the upstream repo are added, even if\n \t# only a single one has been cloned.\n-\t$GCC_HG pull -u ${silent+-q} -r`$GCC_HG branch` ${1+\"$@\"}\n+\t$GCC_HG pull ${silent+-q} -r`$GCC_HG branch` ${1+\"$@\"}\n \tif [ $? -ne 0 ]; then\n             (touch_files_reexec)\n             echo \"hg pull of full tree failed.\" >&2\n             exit 1\n \tfi\n \n-\t# Extract SVN revision corresponding to tip, as stored by hg convert.\n-\t# Before hg 1.4.3, there's no template keyword corresponding to the\n-\t# extra: tag, so need to use hg log --debug to extract the info.\n-\trevision=`$GCC_HG log --debug -l1 | \\\n+\t# Update tree.  Needs to be done separately from pull so\n+\t# gcc_update -rREV works.\n+\t$GCC_HG update ${silent+-q} ${1+\"$@\"}\n+\tif [ $? -ne 0 ]; then\n+            (touch_files_reexec)\n+            echo \"hg update of full tree failed.\" >&2\n+            exit 1\n+\tfi\n+\n+\t# Extract SVN revision corresponding to parents, as stored by\n+\t# hg convert.  Before hg 1.4.3, there's no template keyword\n+\t# corresponding to the extra: tag, so need to use hg log --debug\n+\t# to extract the info.\n+\tparents=`$GCC_HG parents --template '{rev}'`\n+\trevision=`$GCC_HG log --debug -r$parents | \\\n \t    sed -ne \"/^extra:.*convert_revision=svn:/ {\n \t        s%^.*@%%\n \t\tp"}]}