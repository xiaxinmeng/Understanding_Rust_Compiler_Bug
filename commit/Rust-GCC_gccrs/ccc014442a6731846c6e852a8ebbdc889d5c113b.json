{"sha": "ccc014442a6731846c6e852a8ebbdc889d5c113b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NjMDE0NDQyYTY3MzE4NDZjNmU4NTJhOGViYmRjODg5ZDVjMTEzYg==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2003-08-20T04:04:47Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2003-08-20T04:04:47Z"}, "message": "cpppch.c (cpp_valid_state): Re-add warning about PCH not used because some macro is defined.\n\n2003-08-19  Geoffrey Keating  <geoffk@apple.com>\n\n\t* cpppch.c (cpp_valid_state): Re-add warning about PCH not used\n\tbecause some macro is defined.\n\nIndex: testsuite/ChangeLog\n2003-08-19  Geoffrey Keating  <geoffk@apple.com>\n\n\t* gcc.dg/pch/warn-1.c: New.\n\t* gcc.dg/pch/warn-1.hs: New.\n\n\t* lib/dg-pch.exp (dg-pch): Use 'return' not 'continue' to skip\n\tnot-tested file.\n\nFrom-SVN: r70592", "tree": {"sha": "425049d868b986693043ccff94f8c96bf12c8778", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/425049d868b986693043ccff94f8c96bf12c8778"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ccc014442a6731846c6e852a8ebbdc889d5c113b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccc014442a6731846c6e852a8ebbdc889d5c113b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ccc014442a6731846c6e852a8ebbdc889d5c113b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccc014442a6731846c6e852a8ebbdc889d5c113b/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a6f3e2539ea54d97d7459af06de55b6e467a9e2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6f3e2539ea54d97d7459af06de55b6e467a9e2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6f3e2539ea54d97d7459af06de55b6e467a9e2c"}], "stats": {"total": 36, "additions": 34, "deletions": 2}, "files": [{"sha": "ee82ca1e5e5ec58eef88f4fef2ea3d6f4e11a8f3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ccc014442a6731846c6e852a8ebbdc889d5c113b", "patch": "@@ -1,5 +1,8 @@\n 2003-08-19  Geoffrey Keating  <geoffk@apple.com>\n \n+\t* cpppch.c (cpp_valid_state): Re-add warning about PCH not used\n+\tbecause some macro is defined.\n+\n \t* config/darwin.h (LINK_COMMAND_SPEC): Add -arch and -arch_only\n \toptions.\n \t* config/i386/darwin.h (ASM_SPEC): New."}, {"sha": "e1dc1d710ec35464b0a6615c151dedaa0a4c04aa", "filename": "gcc/cpppch.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2Fcpppch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2Fcpppch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpppch.c?ref=ccc014442a6731846c6e852a8ebbdc889d5c113b", "patch": "@@ -509,7 +509,13 @@ cpp_valid_state (cpp_reader *r, const char *name, int fd)\n       else if (cmp > 0)\n  \t++i;\n       else\n-\tgoto fail;\n+\t{\n+\t  if (CPP_OPTION (r, warn_invalid_pch))\n+\t    cpp_error (r, DL_WARNING_SYSHDR, \n+\t\t       \"%s: not used because `%s' is defined\",\n+\t\t       name, first);\n+\t  goto fail;\n+\t}\n     }\n    \n   free(nl.defs);"}, {"sha": "5554668228b7654be897e0f87a7826eb54f28d87", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ccc014442a6731846c6e852a8ebbdc889d5c113b", "patch": "@@ -1,3 +1,11 @@\n+2003-08-19  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* gcc.dg/pch/warn-1.c: New.\n+\t* gcc.dg/pch/warn-1.hs: New.\n+\n+\t* lib/dg-pch.exp (dg-pch): Use 'return' not 'continue' to skip\n+\tnot-tested file.\n+\n 2003-08-19  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \t* gcc.dg/uninit-E.c: Add forgotten dg-warning marker."}, {"sha": "779577dd8aec18223c7d129f4cb394bb3cfe69f4", "filename": "gcc/testsuite/gcc.dg/pch/warn-1.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fwarn-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fwarn-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fwarn-1.c?ref=ccc014442a6731846c6e852a8ebbdc889d5c113b", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-options \"-I. -Winvalid-pch\" } */\n+\n+#define DEFINED_VALUE 3\n+\n+#include \"warn-1.h\"/* { dg-error \"not used because `DEFINED_VALUE' is defined|No such file\" } */\n+\n+int main(void) \n+{\n+  return DEFINED_VALUE;\n+}"}, {"sha": "460963f56c1bb8bdd1f50e094ae59ab9aa016446", "filename": "gcc/testsuite/gcc.dg/pch/warn-1.hs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fwarn-1.hs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fwarn-1.hs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpch%2Fwarn-1.hs?ref=ccc014442a6731846c6e852a8ebbdc889d5c113b", "patch": "@@ -0,0 +1,5 @@\n+enum {\n+  DEFINED_VALUE\n+};\n+\n+"}, {"sha": "5ab34ec7bef7c9a788f53c4e629053be58ead63d", "filename": "gcc/testsuite/lib/dg-pch.exp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2Ftestsuite%2Flib%2Fdg-pch.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccc014442a6731846c6e852a8ebbdc889d5c113b/gcc%2Ftestsuite%2Flib%2Fdg-pch.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fdg-pch.exp?ref=ccc014442a6731846c6e852a8ebbdc889d5c113b", "patch": "@@ -21,7 +21,7 @@ proc dg-pch { subdir test options suffix } {\n \n     # If we're only testing specific files and this isn't one of them, skip it.\n     if ![runtest_file_p $runtests $test] {\n-\tcontinue\n+\treturn\n     }\n     set nshort \"$subdir/[file tail $test]\"\n     set bname \"[file rootname [file tail $nshort]]\""}]}