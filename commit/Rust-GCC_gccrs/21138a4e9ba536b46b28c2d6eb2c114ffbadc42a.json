{"sha": "21138a4e9ba536b46b28c2d6eb2c114ffbadc42a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjExMzhhNGU5YmE1MzZiNDZiMjhjMmQ2ZWIyYzExNGZmYmFkYzQyYQ==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2020-09-11T11:58:59Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2020-09-17T09:36:42Z"}, "message": "fixincludes/fixfixes.c: Fix 'set but not used' warning.\n\npz_tmp_base and pz_tmp_dot are always set, but used only when\n_PC_NAME_MAX is defined.\n\nThis patch moves their declaration and definition undef #ifdef\n_PC_NAME_MAX to avoid this warning.\n\n2020-09-11  Torbj\u00f6rn SVENSSON  <torbjorn.svensson@st.com>\n\t    Christophe Lyon  <christophe.lyon@linaro.org>\n\n\tfixincludes/\n\t* fixfixes.c (pz_tmp_base, pz_tmp_dot): Define only with\n\t_PC_NAME_MAX.", "tree": {"sha": "d43ff925c1fc742e455d00245b85f094b25c9588", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d43ff925c1fc742e455d00245b85f094b25c9588"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/21138a4e9ba536b46b28c2d6eb2c114ffbadc42a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21138a4e9ba536b46b28c2d6eb2c114ffbadc42a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21138a4e9ba536b46b28c2d6eb2c114ffbadc42a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21138a4e9ba536b46b28c2d6eb2c114ffbadc42a/comments", "author": null, "committer": null, "parents": [{"sha": "6ee9c216532c49e162c80fbbdc011afb184e8973", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ee9c216532c49e162c80fbbdc011afb184e8973", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ee9c216532c49e162c80fbbdc011afb184e8973"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "5b23a8b640ddd071be26f45961b7114f8a6074c0", "filename": "fixincludes/fixfixes.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21138a4e9ba536b46b28c2d6eb2c114ffbadc42a/fixincludes%2Ffixfixes.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21138a4e9ba536b46b28c2d6eb2c114ffbadc42a/fixincludes%2Ffixfixes.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ffixfixes.c?ref=21138a4e9ba536b46b28c2d6eb2c114ffbadc42a", "patch": "@@ -738,8 +738,10 @@ main( int argc, char** argv )\n {\n   tFixDesc* pFix;\n   char* pz_tmptmp;\n+#ifdef _PC_NAME_MAX\n   char* pz_tmp_base;\n   char* pz_tmp_dot;\n+#endif\n \n   if (argc != 5)\n     {\n@@ -772,12 +774,12 @@ main( int argc, char** argv )\n   pz_tmptmp = XNEWVEC (char, strlen (argv[4]) + 5);\n   strcpy( pz_tmptmp, argv[4] );\n \n+#ifdef _PC_NAME_MAX\n   /* Don't lose because \"12345678\" and \"12345678X\" map to the same\n      file under DOS restricted 8+3 file namespace.  Note that DOS\n      doesn't allow more than one dot in the trunk of a file name.  */\n   pz_tmp_base = basename( pz_tmptmp );\n   pz_tmp_dot = strchr( pz_tmp_base, '.' );\n-#ifdef _PC_NAME_MAX\n   if (pathconf( pz_tmptmp, _PC_NAME_MAX ) <= 12\t/* is this DOS or Windows9X? */\n       && pz_tmp_dot != (char*)NULL)\n     strcpy (pz_tmp_dot+1, \"X\"); /* nuke the original extension */"}]}