{"sha": "babbe1eb8c8f138055a2629eb6c2df5d5b77fbd2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmFiYmUxZWI4YzhmMTM4MDU1YTI2MjllYjZjMmRmNWQ1Yjc3ZmJkMg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-06-17T20:26:23Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-06-17T20:26:23Z"}, "message": "Changes for non gas gcc.\n\n(ASM_FILE_START_1): Always output .noopt because /bin/as is buggy.\nAdded #undef to {INIT,FINI,CTORS,DTORS}_SECTION_ASM_OP, ... when\nnot using GAS.\n(CONST_SECTION_FUNCTION): Override svr3 default.\n(EXTRA_SECTION_FUNCTIONS): Override svr3 default.\n(OBJECT_FORMAT_COFF): Added define for collect2.\n(MY_ISCOFF): For collect2 to handle aix and svr3 object file.\n\nFrom-SVN: r4687", "tree": {"sha": "c274ab4c8808782c004f934fc16be0504999af64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c274ab4c8808782c004f934fc16be0504999af64"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/babbe1eb8c8f138055a2629eb6c2df5d5b77fbd2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/babbe1eb8c8f138055a2629eb6c2df5d5b77fbd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/babbe1eb8c8f138055a2629eb6c2df5d5b77fbd2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/babbe1eb8c8f138055a2629eb6c2df5d5b77fbd2/comments", "author": null, "committer": null, "parents": [{"sha": "5f6be9da2e8dbabf13acc031d0180d1ba12694ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f6be9da2e8dbabf13acc031d0180d1ba12694ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f6be9da2e8dbabf13acc031d0180d1ba12694ff"}], "stats": {"total": 48, "additions": 46, "deletions": 2}, "files": [{"sha": "6eecde84d848905c4ceb9f251b1ea39b3f9ce703", "filename": "gcc/config/i386/aix386ng.h", "status": "modified", "additions": 46, "deletions": 2, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/babbe1eb8c8f138055a2629eb6c2df5d5b77fbd2/gcc%2Fconfig%2Fi386%2Faix386ng.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/babbe1eb8c8f138055a2629eb6c2df5d5b77fbd2/gcc%2Fconfig%2Fi386%2Faix386ng.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Faix386ng.h?ref=babbe1eb8c8f138055a2629eb6c2df5d5b77fbd2", "patch": "@@ -71,12 +71,12 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n #define PCC_BITFIELD_TYPE_MATTERS 1\n \n-#if 0\n+#ifndef USE_GAS\n /* Don't write a `.optim' pseudo; this assembler\n    is said to have a bug when .optim is used.  */\n \n #undef ASM_FILE_START_1\n-#define ASM_FILE_START_1(FILE) fprintf (FILE, \"\\t.noopt\\n\");\n+#define ASM_FILE_START_1(FILE) fprintf (FILE, \"\\t.noopt\\n\")\n #endif\n \f\n /* Output assembler code to FILE to increment profiler label # LABELNO\n@@ -94,3 +94,47 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n   (bss_section (),\t\t\t\t\t\\\n    ASM_OUTPUT_LABEL ((FILE), (NAME)),\t\t\t\\\n    fprintf ((FILE), \"\\t.set .,.+%u\\n\", (ROUNDED)))\n+\n+\n+/* Undef all the .init and .fini section stuff if we are not using gas and\n+ * gnu ld so that we can use collect because the standard /bin/as and /bin/ld\n+ * cannot handle those.\n+ */\n+#ifndef USE_GAS\n+# undef INIT_SECTION_ASM_OP\n+# undef FINI_SECTION_ASM_OP\n+# undef CTORS_SECTION_ASM_OP\n+# undef DTORS_SECTION_ASM_OP\n+# undef ASM_OUTPUT_CONSTRUCTOR\n+# undef ASM_OUTPUT_DESTRUCTOR\n+# undef DO_GLOBAL_CTORS_BODY\n+\n+# undef CTOR_LIST_BEGIN\n+# define CTOR_LIST_BEGIN\n+# undef CTOR_LIST_END\n+# define CTOR_LIST_END\n+# undef DTOR_LIST_BEGIN\n+# define DTOR_LIST_BEGIN\n+# undef DTOR_LIST_END\n+# define DTOR_LIST_END\n+\n+# undef CONST_SECTION_FUNCTION\n+# define CONST_SECTION_FUNCTION\t\t\t\t\t\t\\\n+void\t\t\t\t\t\t\t\t\t\\\n+const_section ()\t\t\t\t\t\t\t\\\n+{\t\t\t\t\t\t\t\t\t\\\n+  extern void text_section();\t\t\t\t\t\t\\\n+  text_section();\t\t\t\t\t\t\t\\\n+}\n+\n+# undef EXTRA_SECTION_FUNCTIONS\n+# define EXTRA_SECTION_FUNCTIONS\t\t\t\t\\\n+  CONST_SECTION_FUNCTION\t\t\t\t\t\\\n+  BSS_SECTION_FUNCTION\n+\n+/* for collect2 */\n+# define OBJECT_FORMAT_COFF\n+# define MY_ISCOFF(magic) \\\n+  ((magic) == I386MAGIC || (magic) == I386SVMAGIC)\n+\n+#endif /* !USE_GAS */"}]}