{"sha": "bce15ee8460192caf7702fa46758156b95b8cfa6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmNlMTVlZTg0NjAxOTJjYWY3NzAyZmE0Njc1ODE1NmI5NWI4Y2ZhNg==", "commit": {"author": {"name": "Ralf Corsepius", "email": "ralf.corsepius@rtems.org", "date": "2011-11-05T06:09:09Z"}, "committer": {"name": "Ralf Corsepius", "email": "corsepiu@gcc.gnu.org", "date": "2011-11-05T06:09:09Z"}, "message": "t-rtems: Add -mcpu=8540/-mfloat-gprs=double multilib.\n\n2011-11-05  Ralf Cors\u00e9pius  <ralf.corsepius@rtems.org>\n\n\t* config/rs6000/t-rtems: Add -mcpu=8540/-mfloat-gprs=double multilib.\n\tRemove -mcpu=601 multilib.\n\tRemove -Dmpc8260 multilib.\n\t* config/rs6000/rtems.h: Allow --float-gprs=... to override grps\n\ton E500 targets.\n\nFrom-SVN: r181005", "tree": {"sha": "d738a046e57b43f9d7d59f9dee39d882fd2eca80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d738a046e57b43f9d7d59f9dee39d882fd2eca80"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bce15ee8460192caf7702fa46758156b95b8cfa6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bce15ee8460192caf7702fa46758156b95b8cfa6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bce15ee8460192caf7702fa46758156b95b8cfa6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bce15ee8460192caf7702fa46758156b95b8cfa6/comments", "author": null, "committer": null, "parents": [{"sha": "d618bb2c8648303ada2841e9bdf48122c863223f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d618bb2c8648303ada2841e9bdf48122c863223f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d618bb2c8648303ada2841e9bdf48122c863223f"}], "stats": {"total": 61, "additions": 43, "deletions": 18}, "files": [{"sha": "918e7557c2a1b40bbc56d49daf56f9f8cebc5b5e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bce15ee8460192caf7702fa46758156b95b8cfa6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bce15ee8460192caf7702fa46758156b95b8cfa6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bce15ee8460192caf7702fa46758156b95b8cfa6", "patch": "@@ -1,3 +1,11 @@\n+2011-11-05  Ralf Cors\u00e9pius  <ralf.corsepius@rtems.org>\n+\n+\t* config/rs6000/t-rtems: Add -mcpu=8540/-mfloat-gprs=double multilib.\n+\tRemove -mcpu=601 multilib.\n+\tRemove -Dmpc8260 multilib.\n+\t* config/rs6000/rtems.h: Allow --float-gprs=... to override grps\n+\ton E500 targets.\t\n+\n 2011-11-05  Quentin Neill  <quentin.neill@amd.com>\n \n \tPiledriver f16cintrin.h fix."}, {"sha": "1125e83f0d83ad635c7ae4043f6cd7dec34b0d5b", "filename": "gcc/config/rs6000/rtems.h", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bce15ee8460192caf7702fa46758156b95b8cfa6/gcc%2Fconfig%2Frs6000%2Frtems.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bce15ee8460192caf7702fa46758156b95b8cfa6/gcc%2Fconfig%2Frs6000%2Frtems.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frtems.h?ref=bce15ee8460192caf7702fa46758156b95b8cfa6", "patch": "@@ -49,8 +49,19 @@\n %{mcpu=604:  %{!Dppc*: %{!Dmpc*: -Dmpc604}  } } \\\n %{mcpu=750:  %{!Dppc*: %{!Dmpc*: -Dmpc750}  } } \\\n %{mcpu=821:  %{!Dppc*: %{!Dmpc*: -Dmpc821}  } } \\\n-%{mcpu=860:  %{!Dppc*: %{!Dmpc*: -Dmpc860}  } }\" \n+%{mcpu=860:  %{!Dppc*: %{!Dmpc*: -Dmpc860}  } } \\\n+%{mcpu=8540: %{!Dppc*: %{!Dmpc*: -Dppc8540}  } }\" \n \n #undef  SUBSUBTARGET_EXTRA_SPECS\n #define SUBSUBTARGET_EXTRA_SPECS \\\n   { \"cpp_os_rtems\",\t\tCPP_OS_RTEMS_SPEC }\n+\n+#undef SUBSUBTARGET_OVERRIDE_OPTIONS\n+#define SUBSUBTARGET_OVERRIDE_OPTIONS\t\t\t\t\t\\\n+  do {\t\t\t\t\t\t\t\t\t\\\n+    if (TARGET_E500)\t\t\t\t\t\t\t\\\n+      {\t\t\t\t\t\t\t\t\t\\\n+        if (TARGET_HARD_FLOAT && !rs6000_explicit_options.float_gprs)\t\\\n+          rs6000_float_gprs = 1; \t\t\t\t\t\\\n+      }\t\t\t\t\t\t\t\t\t\\\n+  } while(0)"}, {"sha": "74465b74adb2112549d9961bc0b26af1207fb227", "filename": "gcc/config/rs6000/t-rtems", "status": "modified", "additions": 23, "deletions": 17, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bce15ee8460192caf7702fa46758156b95b8cfa6/gcc%2Fconfig%2Frs6000%2Ft-rtems", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bce15ee8460192caf7702fa46758156b95b8cfa6/gcc%2Fconfig%2Frs6000%2Ft-rtems", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ft-rtems?ref=bce15ee8460192caf7702fa46758156b95b8cfa6", "patch": "@@ -19,14 +19,12 @@\n # <http://www.gnu.org/licenses/>.\n \n MULTILIB_OPTIONS\t= \\\n-mcpu=403/mcpu=505/mcpu=601/mcpu=603e/mcpu=604/mcpu=860/mcpu=7400 \\\n-Dmpc8260 \\\n-msoft-float\n+mcpu=403/mcpu=505/mcpu=603e/mcpu=604/mcpu=860/mcpu=7400/mcpu=8540 \\\n+msoft-float/mfloat-gprs=double\n \n MULTILIB_DIRNAMES\t= \\\n-m403 m505 m601 m603e m604 m860 m7400 \\\n-mpc8260 \\\n-nof\n+m403 m505 m603e m604 m860 m7400 m8540 \\\n+nof gprsdouble\n \n # MULTILIB_MATCHES\t= ${MULTILIB_MATCHES_FLOAT}\n MULTILIB_MATCHES\t=\n@@ -47,6 +45,13 @@ MULTILIB_MATCHES\t+= mcpu?7400=mcpu?7450\n # Map 750 to .\n MULTILIB_MATCHES\t+= mcpu?750=\n \n+# Map 8548 to 8540\n+MULTILIB_MATCHES\t+= mcpu?8540=mcpu?8548\n+\n+# Map -mcpu=8540 -mfloat-gprs=single to -mcpu=8540\n+# (mfloat-gprs=single is implicit default)\n+MULTILIB_MATCHES\t+= mcpu?8540=mcpu?8540/mfloat-gprs?single\n+\n # Soft-float only, default implies msoft-float\n # NOTE: Must match with MULTILIB_MATCHES_FLOAT and MULTILIB_MATCHES\n MULTILIB_SOFTFLOAT_ONLY = \\\n@@ -62,21 +67,22 @@ MULTILIB_SOFTFLOAT_ONLY = \\\n MULTILIB_HARDFLOAT_ONLY = \\\n *mcpu=505/*msoft-float*\n \n+# Targets which do not support gprs\n+MULTILIB_NOGPRS = \\\n+mfloat-gprs=* \\\n+*mcpu=403/*mfloat-gprs=* \\\n+*mcpu=505/*mfloat-gprs=* \\\n+*mcpu=603e/*mfloat-gprs=* \\\n+*mcpu=604/*mfloat-gprs=* \\\n+*mcpu=860/*mfloat-gprs=* \\\n+*mcpu=7400/*mfloat-gprs=*\n+\n MULTILIB_EXCEPTIONS =\n \n # Disallow -Dppc and -Dmpc without other options\n MULTILIB_EXCEPTIONS \t+= Dppc* Dmpc*\n \n MULTILIB_EXCEPTIONS\t+= \\\n ${MULTILIB_SOFTFLOAT_ONLY} \\\n-${MULTILIB_HARDFLOAT_ONLY}\n-\n-# Special rules\n-# Take out all variants we don't want\n-MULTILIB_EXCEPTIONS += *mcpu=403/Dmpc*\n-MULTILIB_EXCEPTIONS += *mcpu=505/Dmpc*\n-MULTILIB_EXCEPTIONS += *mcpu=601/Dmpc*\n-MULTILIB_EXCEPTIONS += *mcpu=604/Dmpc*\n-MULTILIB_EXCEPTIONS += *mcpu=750/Dmpc*\n-MULTILIB_EXCEPTIONS += *mcpu=860/Dmpc*\n-MULTILIB_EXCEPTIONS += *mcpu=7400/Dmpc*\n+${MULTILIB_HARDFLOAT_ONLY} \\\n+${MULTILIB_NOGPRS}"}]}