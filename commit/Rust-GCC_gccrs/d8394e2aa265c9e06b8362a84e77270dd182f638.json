{"sha": "d8394e2aa265c9e06b8362a84e77270dd182f638", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDgzOTRlMmFhMjY1YzllMDZiODM2MmE4NGU3NzI3MGRkMTgyZjYzOA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@adacore.com", "date": "2020-06-23T14:39:12Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-10-15T09:39:14Z"}, "message": "[Ada] Spurious visibility on private with package\n\ngcc/ada/\n\n\t* sem_ch10.adb (Install_With_Clause): Fix implementation of Ada\n\t2005 AI-262 by taking into account generic packages.  Minor\n\treformatting.\n\t* libgnat/a-cbhase.ads, libgnat/a-cbhase.adb: Remove use clause\n\ton runtime unit spec.", "tree": {"sha": "b83866f97861b5cc2229e85e50e09622939f1339", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b83866f97861b5cc2229e85e50e09622939f1339"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8394e2aa265c9e06b8362a84e77270dd182f638", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8394e2aa265c9e06b8362a84e77270dd182f638", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8394e2aa265c9e06b8362a84e77270dd182f638", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8394e2aa265c9e06b8362a84e77270dd182f638/comments", "author": {"login": "ArnaudCharlet", "id": 30291825, "node_id": "MDQ6VXNlcjMwMjkxODI1", "avatar_url": "https://avatars.githubusercontent.com/u/30291825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArnaudCharlet", "html_url": "https://github.com/ArnaudCharlet", "followers_url": "https://api.github.com/users/ArnaudCharlet/followers", "following_url": "https://api.github.com/users/ArnaudCharlet/following{/other_user}", "gists_url": "https://api.github.com/users/ArnaudCharlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArnaudCharlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArnaudCharlet/subscriptions", "organizations_url": "https://api.github.com/users/ArnaudCharlet/orgs", "repos_url": "https://api.github.com/users/ArnaudCharlet/repos", "events_url": "https://api.github.com/users/ArnaudCharlet/events{/privacy}", "received_events_url": "https://api.github.com/users/ArnaudCharlet/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7e3f6147a7492b774194669f3f68b979fd847811", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e3f6147a7492b774194669f3f68b979fd847811", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e3f6147a7492b774194669f3f68b979fd847811"}], "stats": {"total": 19, "additions": 11, "deletions": 8}, "files": [{"sha": "09505535e5eeee784689e155b4a523f28581ff52", "filename": "gcc/ada/libgnat/a-cbhase.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8394e2aa265c9e06b8362a84e77270dd182f638/gcc%2Fada%2Flibgnat%2Fa-cbhase.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8394e2aa265c9e06b8362a84e77270dd182f638/gcc%2Fada%2Flibgnat%2Fa-cbhase.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fa-cbhase.adb?ref=d8394e2aa265c9e06b8362a84e77270dd182f638", "patch": "@@ -42,6 +42,7 @@ with System; use type System.Address;\n package body Ada.Containers.Bounded_Hashed_Sets with\n   SPARK_Mode => Off\n is\n+   use Ada.Finalization;\n \n    pragma Warnings (Off, \"variable \"\"Busy*\"\" is not referenced\");\n    pragma Warnings (Off, \"variable \"\"Lock*\"\" is not referenced\");"}, {"sha": "2d8a7ee56f68e1eee2068d9d4cf8f2c9466cff79", "filename": "gcc/ada/libgnat/a-cbhase.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8394e2aa265c9e06b8362a84e77270dd182f638/gcc%2Fada%2Flibgnat%2Fa-cbhase.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8394e2aa265c9e06b8362a84e77270dd182f638/gcc%2Fada%2Flibgnat%2Fa-cbhase.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fa-cbhase.ads?ref=d8394e2aa265c9e06b8362a84e77270dd182f638", "patch": "@@ -36,7 +36,7 @@ with Ada.Iterator_Interfaces;\n private with Ada.Containers.Hash_Tables;\n with Ada.Containers.Helpers;\n private with Ada.Streams;\n-private with Ada.Finalization; use Ada.Finalization;\n+private with Ada.Finalization;\n \n generic\n    type Element_Type is private;\n@@ -592,7 +592,7 @@ private\n \n    No_Element : constant Cursor := (Container => null, Node => 0);\n \n-   type Iterator is new Limited_Controlled and\n+   type Iterator is new Ada.Finalization.Limited_Controlled and\n      Set_Iterator_Interfaces.Forward_Iterator with\n    record\n       Container : Set_Access;"}, {"sha": "9749fd4b6f71b11d6a173290eec39eabe45b0cdb", "filename": "gcc/ada/sem_ch10.adb", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8394e2aa265c9e06b8362a84e77270dd182f638/gcc%2Fada%2Fsem_ch10.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8394e2aa265c9e06b8362a84e77270dd182f638/gcc%2Fada%2Fsem_ch10.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch10.adb?ref=d8394e2aa265c9e06b8362a84e77270dd182f638", "patch": "@@ -5303,8 +5303,9 @@ package body Sem_Ch10 is\n       --  analyzing the private part of the package).\n \n       if Private_Present (With_Clause)\n-        and then Nkind (Unit (Parent (With_Clause))) = N_Package_Declaration\n-        and then not (Private_With_OK)\n+        and then Nkind (Unit (Parent (With_Clause)))\n+                   in N_Package_Declaration | N_Generic_Package_Declaration\n+        and then not Private_With_OK\n       then\n          return;\n       end if;\n@@ -5371,7 +5372,7 @@ package body Sem_Ch10 is\n             Set_Is_Visible_Lib_Unit (Uname);\n \n             --  If the unit is a wrapper package for a compilation unit that is\n-            --  a subprogrm instance, indicate that the instance itself is a\n+            --  a subprogram instance, indicate that the instance itself is a\n             --  visible unit. This is necessary if the instance is inlined.\n \n             if Is_Wrapper_Package (Uname) then\n@@ -6464,7 +6465,7 @@ package body Sem_Ch10 is\n             null;\n \n          elsif Nkind (Item) = N_With_Clause\n-            and then Context_Installed (Item)\n+           and then Context_Installed (Item)\n          then\n             --  Remove items from one with'ed unit\n \n@@ -6818,12 +6819,12 @@ package body Sem_Ch10 is\n       -- In_Regular_With_Clause --\n       ----------------------------\n \n-      function In_Regular_With_Clause (E : Entity_Id) return Boolean\n-      is\n+      function In_Regular_With_Clause (E : Entity_Id) return Boolean is\n          Item : Node_Id;\n \n       begin\n          Item := First (Context_Items (Comp_Unit));\n+\n          while Present (Item) loop\n             if Nkind (Item) = N_With_Clause\n \n@@ -6836,6 +6837,7 @@ package body Sem_Ch10 is\n             then\n                return True;\n             end if;\n+\n             Next (Item);\n          end loop;\n "}]}