{"sha": "1069f584a7256529d7f5637939118994effd865a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTA2OWY1ODRhNzI1NjUyOWQ3ZjU2Mzc5MzkxMTg5OTRlZmZkODY1YQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2010-03-01T12:25:34Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2010-03-01T12:25:34Z"}, "message": "re PR fortran/42900 (gfortran.dg/stat_[12].f90 may fail on NFS filesystems)\n\n\tPR fortran/42900\n\t* gfortran.dg/stat_1.f90: Accept 'testfile' gid == parent dir gid.\n\tExplain this.\n\t* gfortran.dg/stat_2.f90: Likewise.\n\nFrom-SVN: r157135", "tree": {"sha": "5ffe7c3cd480fb2665ff821f869281c68d03de1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ffe7c3cd480fb2665ff821f869281c68d03de1a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1069f584a7256529d7f5637939118994effd865a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1069f584a7256529d7f5637939118994effd865a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1069f584a7256529d7f5637939118994effd865a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1069f584a7256529d7f5637939118994effd865a/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "894e2652e19f83190daab172efb846d568fb5e11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/894e2652e19f83190daab172efb846d568fb5e11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/894e2652e19f83190daab172efb846d568fb5e11"}], "stats": {"total": 27, "additions": 21, "deletions": 6}, "files": [{"sha": "ab52ef591720010d0337a412f12b4d379b77a4d6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1069f584a7256529d7f5637939118994effd865a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1069f584a7256529d7f5637939118994effd865a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1069f584a7256529d7f5637939118994effd865a", "patch": "@@ -1,3 +1,10 @@\n+2010-03-01  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR fortran/42900\n+\t* gfortran.dg/stat_1.f90: Accept 'testfile' gid == parent dir gid.\n+\tExplain this.\n+\t* gfortran.dg/stat_2.f90: Likewise.\n+\n 2010-03-01  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/43199"}, {"sha": "95ad66a391c1d728a9349ea5cd76e14e44cf128f", "filename": "gcc/testsuite/gfortran.dg/stat_1.f90", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1069f584a7256529d7f5637939118994effd865a/gcc%2Ftestsuite%2Fgfortran.dg%2Fstat_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1069f584a7256529d7f5637939118994effd865a/gcc%2Ftestsuite%2Fgfortran.dg%2Fstat_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fstat_1.f90?ref=1069f584a7256529d7f5637939118994effd865a", "patch": "@@ -2,7 +2,7 @@\n ! { dg-skip-if \"\" { *-*-mingw* spu-*-* } { \"*\" } { \"\" } }\n ! { dg-options \"-std=gnu\" }\n   character(len=*), parameter :: f = \"testfile\"\n-  integer :: s1(13), r1, s2(13), r2, s3(13), r3\n+  integer :: s1(13), r1, s2(13), r2, s3(13), r3, d(13), rd\n   \n   open (10,file=f)\n   write (10,\"(A)\") \"foo\"\n@@ -12,11 +12,15 @@\n   call lstat (f, s1, r1)\n   call stat (f, s2, r2)\n   call fstat (10, s3, r3)\n+  call stat (\".\", d, rd)\n \n-  if (r1 /= 0 .or. r2 /= 0 .or. r3 /= 0) call abort\n+  if (r1 /= 0 .or. r2 /= 0 .or. r3 /= 0 .or. rd /= 0) call abort\n   if (any (s1 /= s2) .or. any (s1 /= s3)) call abort\n   if (s1(5) /= getuid()) call abort\n-  if (s1(6) /= getgid() .and. getgid() /= 0) call abort\n+! If the test is run in a directory with the sgid bit set or on a filesystem\n+! mounted with the grpid option, new files are created with the directory's\n+! gid instead of the user's primary gid, so allow for that.\n+  if (s1(6) /= getgid() .and. s1(6) /= d(6) .and. getgid() /= 0) call abort\n   if (s1(8) < 3 .or. s1(8) > 5) call abort\n \n   close (10,status=\"delete\")"}, {"sha": "a530ec3477c1626969bba668d345f35a0787fdf9", "filename": "gcc/testsuite/gfortran.dg/stat_2.f90", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1069f584a7256529d7f5637939118994effd865a/gcc%2Ftestsuite%2Fgfortran.dg%2Fstat_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1069f584a7256529d7f5637939118994effd865a/gcc%2Ftestsuite%2Fgfortran.dg%2Fstat_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fstat_2.f90?ref=1069f584a7256529d7f5637939118994effd865a", "patch": "@@ -2,7 +2,7 @@\n ! { dg-skip-if \"\" { *-*-mingw* spu-*-* } { \"*\" } { \"\" } }\n ! { dg-options \"-std=gnu\" }\n   character(len=*), parameter :: f = \"testfile\"\n-  integer :: s1(13), r1, s2(13), r2, s3(13), r3\n+  integer :: s1(13), r1, s2(13), r2, s3(13), r3, d(13), rd\n   \n   open (10,file=f)\n   write (10,\"(A)\") \"foo\"\n@@ -12,11 +12,15 @@\n   r1 = lstat (f, s1)\n   r2 = stat (f, s2)\n   r3 = fstat (10, s3)\n+  rd = stat (\".\", d)\n \n-  if (r1 /= 0 .or. r2 /= 0 .or. r3 /= 0) call abort\n+  if (r1 /= 0 .or. r2 /= 0 .or. r3 /= 0 .or. rd /= 0) call abort\n   if (any (s1 /= s2) .or. any (s1 /= s3)) call abort\n   if (s1(5) /= getuid()) call abort\n-  if (s1(6) /= getgid() .and. getgid() /= 0) call abort\n+! If the test is run in a directory with the sgid bit set or on a filesystem\n+! mounted with the grpid option, new files are created with the directory's\n+! gid instead of the user's primary gid, so allow for that.\n+  if (s1(6) /= getgid() .and. s1(6) /= d(6) .and. getgid() /= 0) call abort\n   if (s1(8) < 3 .or. s1(8) > 5) call abort\n \n   close (10,status=\"delete\")"}]}