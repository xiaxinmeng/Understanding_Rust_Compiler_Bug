{"sha": "95b42490a89f98ef0b41b9445f71fcefab4ed4a7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTViNDI0OTBhODlmOThlZjBiNDFiOTQ0NWY3MWZjZWZhYjRlZDRhNw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@adacore.com", "date": "2008-05-20T14:02:20Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-05-20T14:02:20Z"}, "message": "gen_disp.ad[sb]: New test.\n\n\t* gnat.dg/gen_disp.ad[sb]: New test.\n\t* gnat.dg/specs/empty_variants.ads: Adjust.\n\nFrom-SVN: r135658", "tree": {"sha": "89e45557edf2247407f550816ae331823e51a52b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/89e45557edf2247407f550816ae331823e51a52b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/95b42490a89f98ef0b41b9445f71fcefab4ed4a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95b42490a89f98ef0b41b9445f71fcefab4ed4a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95b42490a89f98ef0b41b9445f71fcefab4ed4a7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95b42490a89f98ef0b41b9445f71fcefab4ed4a7/comments", "author": {"login": "ArnaudCharlet", "id": 30291825, "node_id": "MDQ6VXNlcjMwMjkxODI1", "avatar_url": "https://avatars.githubusercontent.com/u/30291825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArnaudCharlet", "html_url": "https://github.com/ArnaudCharlet", "followers_url": "https://api.github.com/users/ArnaudCharlet/followers", "following_url": "https://api.github.com/users/ArnaudCharlet/following{/other_user}", "gists_url": "https://api.github.com/users/ArnaudCharlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArnaudCharlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArnaudCharlet/subscriptions", "organizations_url": "https://api.github.com/users/ArnaudCharlet/orgs", "repos_url": "https://api.github.com/users/ArnaudCharlet/repos", "events_url": "https://api.github.com/users/ArnaudCharlet/events{/privacy}", "received_events_url": "https://api.github.com/users/ArnaudCharlet/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9c63c208a58ded5253130c67f776d548eca2ea3f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c63c208a58ded5253130c67f776d548eca2ea3f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c63c208a58ded5253130c67f776d548eca2ea3f"}], "stats": {"total": 89, "additions": 89, "deletions": 0}, "files": [{"sha": "d26eee12f4531821fa6d7e36f2da5d2edf4dadb5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95b42490a89f98ef0b41b9445f71fcefab4ed4a7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95b42490a89f98ef0b41b9445f71fcefab4ed4a7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=95b42490a89f98ef0b41b9445f71fcefab4ed4a7", "patch": "@@ -3,7 +3,9 @@\n \t* gnat.dg/testint.adb: New test.\n \t* gnat.dg/modular1.adb: New test.\n \t* gnat.dg/test_iface_aggr.adb: New test.\n+\t* gnat.dg/gen_disp.ad[sb]: New test.\n \t* gnat.dg/specs/tag2.ads: Adjust.\n+\t* gnat.dg/specs/empty_variants.ads: Adjust.\n \n 2008-05-20  Richard Guenther  <rguenther@suse.de>\n "}, {"sha": "736b9cdc00f4b321daeb9b9fa2623ade0e77265d", "filename": "gcc/testsuite/gnat.dg/gen_disp.adb", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95b42490a89f98ef0b41b9445f71fcefab4ed4a7/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_disp.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95b42490a89f98ef0b41b9445f71fcefab4ed4a7/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_disp.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_disp.adb?ref=95b42490a89f98ef0b41b9445f71fcefab4ed4a7", "patch": "@@ -0,0 +1,45 @@\n+--  { dg-do compile }\n+with Ada.Containers.Ordered_Maps;\n+with Ada.Tags.Generic_Dispatching_Constructor;\n+package body gen_disp is\n+   \n+   use type Ada.Tags.Tag;\n+   \n+   function \"<\" (L, R : in Ada.Tags.Tag) return Boolean is\n+   begin\n+      return Ada.Tags.External_Tag (L) < Ada.Tags.External_Tag (R);\n+   end \"<\";\n+   \n+   package Char_To_Tag_Map is new Ada.Containers.Ordered_Maps (\n+      Key_Type => Character,\n+      Element_Type => Ada.Tags.Tag,\n+      \"<\" => \"<\",\n+      \"=\" => Ada.Tags. \"=\");\n+      \n+   package Tag_To_Char_Map is new Ada.Containers.Ordered_Maps (\n+      Key_Type => Ada.Tags.Tag,\n+      Element_Type => Character,\n+      \"<\" => \"<\",\n+      \"=\" => \"=\");\n+      \n+   use type Char_To_Tag_Map.Cursor;\n+   use type Tag_To_Char_Map.Cursor;\n+   \n+   Char_To_Tag : Char_To_Tag_Map.Map;\n+   Tag_To_Char : Tag_To_Char_Map.Map;\n+   \n+   function Get_Object is new\n+     Ada.Tags.Generic_Dispatching_Constructor\n+        (Root_Type, Ada.Streams.Root_Stream_Type'Class, Root_Type'Input);\n+        \n+   function Root_Type_Class_Input\n+     (S    : not null access Ada.Streams.Root_Stream_Type'Class)\n+      return Root_Type'Class \n+   is \n+      External_Tag : constant Character := Character'Input (S);\n+      C : constant Char_To_Tag_Map.Cursor := Char_To_Tag.Find (External_Tag);\n+   begin\n+\n+      return Get_Object (Char_To_Tag_Map.Element (C), S);\n+   end Root_Type_Class_Input;\n+end gen_disp;"}, {"sha": "722c0c1b1a1d144181adb437d9296a016d64a686", "filename": "gcc/testsuite/gnat.dg/gen_disp.ads", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95b42490a89f98ef0b41b9445f71fcefab4ed4a7/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_disp.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95b42490a89f98ef0b41b9445f71fcefab4ed4a7/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_disp.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_disp.ads?ref=95b42490a89f98ef0b41b9445f71fcefab4ed4a7", "patch": "@@ -0,0 +1,10 @@\n+with Ada.Streams, Ada.Tags;\n+package gen_disp is\n+   type Root_Type is tagged null record;\n+   \n+   function Root_Type_Class_Input\n+     (S    : not null access Ada.Streams.Root_Stream_Type'Class)\n+      return Root_Type'Class;\n+      \n+   for Root_Type'Class'Input use Root_Type_Class_Input;\n+end gen_disp;"}, {"sha": "079b64ac812203f9b8012790ce0bdb625fe22b1f", "filename": "gcc/testsuite/gnat.dg/specs/empty_variants.ads", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95b42490a89f98ef0b41b9445f71fcefab4ed4a7/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fempty_variants.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95b42490a89f98ef0b41b9445f71fcefab4ed4a7/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fempty_variants.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fempty_variants.ads?ref=95b42490a89f98ef0b41b9445f71fcefab4ed4a7", "patch": "@@ -0,0 +1,32 @@\n+--  { dg-do compile }\n+--  { dg-options \"-gnatdF\" }\n+\n+package Empty_Variants is\n+   \n+   type Rec (D : Integer := 1) is record\n+      case D is\n+         when 1 =>\n+            I : Integer;\n+         when 2 .. 5 =>\n+            J : Integer;\n+            K : Integer;\n+         when 6 =>\n+            null;\n+         when 7 .. 8 =>\n+            null;\n+         when others =>\n+            L : Integer;\n+            M : Integer;\n+            N : Integer;\n+      end case;\n+   end record;\n+   \n+   R : Rec;\n+   \n+   I : Integer := R.I;\n+   J : Integer := R.J;\n+   K : Integer := R.K;\n+   L : Integer := R.L;\n+   M : Integer := R.L;\n+\n+end Empty_Variants;"}]}