{"sha": "f369bbb185bcebe0986efcdde852d126a3e6f9bc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjM2OWJiYjE4NWJjZWJlMDk4NmVmY2RkZTg1MmQxMjZhM2U2ZjliYw==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2008-09-15T22:59:55Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2008-09-15T22:59:55Z"}, "message": "rs6000.md (floatsidf2): Rewrite PowerPC64 case to use gen_floatdidf2 directly.\n\n2008-09-15  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        * config/rs6000/rs6000.md (floatsidf2): Rewrite PowerPC64 case to \n        use gen_floatdidf2 directly.\n        (floatunssidf2): Likewise.\n        (floatsidf_ppc64_mfpgpr): Remove.\n        (floatsidf_ppc64): Remove.\n        (floatunssidf_ppc64): Remove.\n\nFrom-SVN: r140381", "tree": {"sha": "1bc396f3056c7b108dfea7073b8d5312820d5f8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1bc396f3056c7b108dfea7073b8d5312820d5f8f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f369bbb185bcebe0986efcdde852d126a3e6f9bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f369bbb185bcebe0986efcdde852d126a3e6f9bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f369bbb185bcebe0986efcdde852d126a3e6f9bc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f369bbb185bcebe0986efcdde852d126a3e6f9bc/comments", "author": null, "committer": null, "parents": [{"sha": "402b8cf659febc5377dc1680d35a60060ed72799", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/402b8cf659febc5377dc1680d35a60060ed72799", "html_url": "https://github.com/Rust-GCC/gccrs/commit/402b8cf659febc5377dc1680d35a60060ed72799"}], "stats": {"total": 69, "additions": 13, "deletions": 56}, "files": [{"sha": "4deb997cc15ed446e63f20b9c199d541c4103264", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f369bbb185bcebe0986efcdde852d126a3e6f9bc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f369bbb185bcebe0986efcdde852d126a3e6f9bc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f369bbb185bcebe0986efcdde852d126a3e6f9bc", "patch": "@@ -1,3 +1,12 @@\n+2008-09-15  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\t* config/rs6000/rs6000.md (floatsidf2): Rewrite PowerPC64 case to\n+\tuse gen_floatdidf2 directly.\n+\t(floatunssidf2): Likewise.\n+\t(floatsidf_ppc64_mfpgpr): Remove.\n+\t(floatsidf_ppc64): Remove.\n+\t(floatunssidf_ppc64): Remove.\n+\n 2008-09-15  Jakub Jelinek  <jakub@redhat.com>\n \n \t* ira-color.c (finish_cost_update): Free update_cost_queue_elems"}, {"sha": "d35e9d4eac205f74b646afe1dca8b3b05586c03f", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 4, "deletions": 56, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f369bbb185bcebe0986efcdde852d126a3e6f9bc/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f369bbb185bcebe0986efcdde852d126a3e6f9bc/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=f369bbb185bcebe0986efcdde852d126a3e6f9bc", "patch": "@@ -5828,18 +5828,10 @@\n       emit_insn (gen_spe_floatsidf2 (operands[0], operands[1]));\n       DONE;\n     }\n-  if (TARGET_POWERPC64 && TARGET_MFPGPR && TARGET_HARD_FLOAT && TARGET_FPRS)\n-    {\n-      rtx t1 = gen_reg_rtx (DImode);\n-      emit_insn (gen_floatsidf_ppc64_mfpgpr (operands[0], operands[1], t1));\n-      DONE;\n-    }\n   if (TARGET_POWERPC64)\n     {\n-      rtx mem = assign_stack_temp (DImode, GET_MODE_SIZE (DImode), 0);\n-      rtx t1 = gen_reg_rtx (DImode);\n-      rtx t2 = gen_reg_rtx (DImode);\n-      emit_insn (gen_floatsidf_ppc64 (operands[0], operands[1], mem, t1, t2));\n+      rtx x = convert_to_mode (DImode, operands[1], 0);\n+      emit_insn (gen_floatdidf2 (operands[0], x));\n       DONE;\n     }\n \n@@ -5907,11 +5899,8 @@\n     }\n   if (TARGET_POWERPC64)\n     {\n-      rtx mem = assign_stack_temp (DImode, GET_MODE_SIZE (DImode), 0);\n-      rtx t1 = gen_reg_rtx (DImode);\n-      rtx t2 = gen_reg_rtx (DImode);\n-      emit_insn (gen_floatunssidf_ppc64 (operands[0], operands[1], mem,\n-\t\t\t\t\t t1, t2));\n+      rtx x = convert_to_mode (DImode, operands[1], 1);\n+      emit_insn (gen_floatdidf2 (operands[0], x));\n       DONE;\n     }\n \n@@ -6132,47 +6121,6 @@\n   \"fcfid %0,%1\"\n   [(set_attr \"type\" \"fp\")])\n \n-(define_insn_and_split \"floatsidf_ppc64_mfpgpr\"\n-  [(set (match_operand:DF 0 \"gpc_reg_operand\" \"=f\")\n-\t(float:DF (match_operand:SI 1 \"gpc_reg_operand\" \"r\")))\n-   (clobber (match_operand:DI 2 \"gpc_reg_operand\" \"=r\"))]\n-  \"TARGET_POWERPC64 && TARGET_MFPGPR && TARGET_HARD_FLOAT && TARGET_FPRS\"\n-  \"#\"\n-  \"&& 1\"\n-  [(set (match_dup 2) (sign_extend:DI (match_dup 1)))\n-   (set (match_dup 0) (float:DF (match_dup 2)))]\n-  \"\")\n-\n-(define_insn_and_split \"floatsidf_ppc64\"\n-  [(set (match_operand:DF 0 \"gpc_reg_operand\" \"=f\")\n-\t(float:DF (match_operand:SI 1 \"gpc_reg_operand\" \"r\")))\n-   (clobber (match_operand:DI 2 \"offsettable_mem_operand\" \"=o\"))\n-   (clobber (match_operand:DI 3 \"gpc_reg_operand\" \"=r\"))\n-   (clobber (match_operand:DI 4 \"gpc_reg_operand\" \"=f\"))]\n-  \"TARGET_POWERPC64 && !TARGET_MFPGPR && TARGET_HARD_FLOAT && TARGET_FPRS\"\n-  \"#\"\n-  \"&& 1\"\n-  [(set (match_dup 3) (sign_extend:DI (match_dup 1)))\n-   (set (match_dup 2) (match_dup 3))\n-   (set (match_dup 4) (match_dup 2))\n-   (set (match_dup 0) (float:DF (match_dup 4)))]\n-  \"\")\n-\n-(define_insn_and_split \"floatunssidf_ppc64\"\n-  [(set (match_operand:DF 0 \"gpc_reg_operand\" \"=f\")\n-\t(unsigned_float:DF (match_operand:SI 1 \"gpc_reg_operand\" \"r\")))\n-   (clobber (match_operand:DI 2 \"offsettable_mem_operand\" \"=o\"))\n-   (clobber (match_operand:DI 3 \"gpc_reg_operand\" \"=r\"))\n-   (clobber (match_operand:DI 4 \"gpc_reg_operand\" \"=f\"))]\n-  \"TARGET_POWERPC64 && TARGET_HARD_FLOAT && TARGET_FPRS\"\n-  \"#\"\n-  \"&& 1\"\n-  [(set (match_dup 3) (zero_extend:DI (match_dup 1)))\n-   (set (match_dup 2) (match_dup 3))\n-   (set (match_dup 4) (match_dup 2))\n-   (set (match_dup 0) (float:DF (match_dup 4)))]\n-  \"\")\n-\n (define_insn \"fix_truncdfdi2\"\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=!f#r\")\n \t(fix:DI (match_operand:DF 1 \"gpc_reg_operand\" \"f\")))]"}]}