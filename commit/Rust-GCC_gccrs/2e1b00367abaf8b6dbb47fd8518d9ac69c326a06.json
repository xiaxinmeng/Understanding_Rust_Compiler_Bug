{"sha": "2e1b00367abaf8b6dbb47fd8518d9ac69c326a06", "node_id": "C_kwDOANBUbNoAKDJlMWIwMDM2N2FiYWY4YjZkYmI0N2ZkODUxOGQ5YWM2OWMzMjZhMDY", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-03-02T09:48:14Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-03-02T09:48:14Z"}, "message": "cfgrtl: Fix up -g vs. -g0 code generation -flto differences in fixup_reorder_chain [PR104589]\n\nThis is similar to PR104237 and similarly to that, no testcase included\nfor the testsuite, as we don't have a framework to compile/link with\n-g -flto and -g0 -flto and compare -fdump-final-insns= results from\nthe lto1 compilations.\n\nWith -flto, whether two location_t compare equal or not and just\nexpress the same location is a lottery.\n\n2022-03-02  Jakub Jelinek  <jakub@redhat.com>\n\n\tPR rtl-optimization/104589\n\t* cfgrtl.cc (fixup_reorder_chain): Use loc_equal instead of direct\n\tINSN_LOCATION comparison with goto_locus.", "tree": {"sha": "ebbba072772960a48ee77f8bc86921887f2c11f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ebbba072772960a48ee77f8bc86921887f2c11f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2e1b00367abaf8b6dbb47fd8518d9ac69c326a06", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e1b00367abaf8b6dbb47fd8518d9ac69c326a06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e1b00367abaf8b6dbb47fd8518d9ac69c326a06", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e1b00367abaf8b6dbb47fd8518d9ac69c326a06/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5f2e72db8c03c960d8330305c1e92986373198ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f2e72db8c03c960d8330305c1e92986373198ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f2e72db8c03c960d8330305c1e92986373198ca"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "74ea14efc61539495449c1ddb499d804ca8cb763", "filename": "gcc/cfgrtl.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e1b00367abaf8b6dbb47fd8518d9ac69c326a06/gcc%2Fcfgrtl.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e1b00367abaf8b6dbb47fd8518d9ac69c326a06/gcc%2Fcfgrtl.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.cc?ref=2e1b00367abaf8b6dbb47fd8518d9ac69c326a06", "patch": "@@ -4090,7 +4090,7 @@ fixup_reorder_chain (void)\n \t\t     && (!NONDEBUG_INSN_P (insn) || !INSN_HAS_LOCATION (insn)))\n \t\tinsn = PREV_INSN (insn);\n \t      if (insn != end\n-\t\t  && INSN_LOCATION (insn) == e->goto_locus)\n+\t\t  && loc_equal (INSN_LOCATION (insn), e->goto_locus))\n \t\tcontinue;\n \t      if (simplejump_p (BB_END (e->src))\n \t\t  && !INSN_HAS_LOCATION (BB_END (e->src)))\n@@ -4112,7 +4112,7 @@ fixup_reorder_chain (void)\n \t\t  while (insn != end && !NONDEBUG_INSN_P (insn))\n \t\t    insn = NEXT_INSN (insn);\n \t\t  if (insn != end && INSN_HAS_LOCATION (insn)\n-\t\t      && INSN_LOCATION (insn) == e->goto_locus)\n+\t\t      && loc_equal (INSN_LOCATION (insn), e->goto_locus))\n \t\t    continue;\n \t\t}\n \t      nb = split_edge (e);"}]}