{"sha": "bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmY5OGQzYjZjMDQ1M2M3MWYwNjU5ODQ4ZTc2NzNlYmMyY2MzZWUwYw==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-10-16T22:21:59Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-10-16T22:21:59Z"}, "message": "re PR c++/31446 (ICE with invalid template parameter)\n\n/cp\n2007-10-16  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/31446\n\t* pt.c (current_template_args): Do not change TREE_LIST elements\n\twith a TREE_VALUE of error_mark_node.\n\n/testsuite\n2007-10-16  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/31446\n\t* g++.dg/template/void11.C: New.\n\t* g++.dg/template/void2.C: Adjust error markers.\n\t* g++.dg/template/void10.C: Likewise.\n\t* g++.dg/template/crash55.C: Likewise.\n\nFrom-SVN: r129391", "tree": {"sha": "97b55cff8bc838f31c3e48ad95b51197be294f48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97b55cff8bc838f31c3e48ad95b51197be294f48"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/comments", "author": null, "committer": null, "parents": [{"sha": "7aa1cb97ebbf4335d60c04543b7de6e935c22148", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7aa1cb97ebbf4335d60c04543b7de6e935c22148", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7aa1cb97ebbf4335d60c04543b7de6e935c22148"}], "stats": {"total": 36, "additions": 31, "deletions": 5}, "files": [{"sha": "5fd1c1b5e760d9f40def16070129d9d75846c887", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c", "patch": "@@ -1,3 +1,9 @@\n+2007-10-16  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/31446\n+\t* pt.c (current_template_args): Do not change TREE_LIST elements\n+\twith a TREE_VALUE of error_mark_node.\n+\n 2007-10-16  Mark Mitchell  <mark@codesourcery.com>\n \n \t* typeck.c (cp_apply_type_quals_to_decl): Expand documentation."}, {"sha": "773c1041762e15b594706ba2abb69434c6e0d303", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c", "patch": "@@ -3136,8 +3136,8 @@ current_template_args (void)\n                           TREE_TYPE (t) = type;\n                         }\n                     }\n+\t\t  TREE_VEC_ELT (a, i) = t;\n                 }\n-\t      TREE_VEC_ELT (a, i) = t;\n \t    }\n \t}\n "}, {"sha": "34f8c0826c4fd5545a6d61349baba5930fb6f479", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c", "patch": "@@ -1,3 +1,11 @@\n+2007-10-16  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/31446\n+\t* g++.dg/template/void11.C: New.\n+\t* g++.dg/template/void2.C: Adjust error markers.\n+\t* g++.dg/template/void10.C: Likewise.\n+\t* g++.dg/template/crash55.C: Likewise.\n+\n 2007-10-16  Mark Mitchell  <mark@codesourcery.com>\n \n \t* g++.dg/opt/const5.C: New test."}, {"sha": "7cf9f1eae80871f94e99e0d2ee6389d5ad0f9d61", "filename": "gcc/testsuite/g++.dg/template/crash55.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash55.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash55.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash55.C?ref=bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c", "patch": "@@ -1,6 +1,6 @@\n //PR c++/27668\n \n template<typename class T, T = T()> // { dg-error \"nested-name-specifier|two or more|valid type\" }\n-struct A {};                        // { dg-error \"definition|template\" }\n+struct A {};\n \n template<int> void foo(A<int>);     // { dg-error \"mismatch|constant|template argument\" }"}, {"sha": "4904a281a400bb22ad198f0cbdddaead97f1addf", "filename": "gcc/testsuite/g++.dg/template/void10.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvoid10.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvoid10.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvoid10.C?ref=bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c", "patch": "@@ -7,4 +7,4 @@ template<void> struct A                 // { dg-error \"not a valid type\" }\n \n template<typename> struct B {};\n \n-B<int> b;                              // { dg-error \"template argument|invalid type\" }\n+B<int> b;"}, {"sha": "1aad7a157da46910aaa6ad5112d4503834ad1ce9", "filename": "gcc/testsuite/g++.dg/template/void11.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvoid11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvoid11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvoid11.C?ref=bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c", "patch": "@@ -0,0 +1,12 @@\n+// PR c++/31446\n+\n+template<void> struct A // { dg-error \"valid type\" }\n+\n+{\n+  template<int> friend void foo();\n+};\n+\n+void bar()\n+{\n+  foo<0>(); // { dg-error \"not declared|primary-expression\" }\n+}"}, {"sha": "eceb36219aa9ae57551288a2bf3adabca4be8b51", "filename": "gcc/testsuite/g++.dg/template/void2.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvoid2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvoid2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvoid2.C?ref=bf98d3b6c0453c71f0659848e7673ebc2cc3ee0c", "patch": "@@ -3,7 +3,7 @@\n \n template<int> struct A\n {\n-  template<void> friend class X;  // { dg-error \"void\" }\n+  template<void> friend class X;  // { dg-error \"void|valid type\" }\n };\n \n-A<0> a; \n+A<0> a;"}]}