{"sha": "83079d893cac8e85e0d9a5f7531cccae64f7665f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODMwNzlkODkzY2FjOGU4NWUwZDlhNWY3NTMxY2NjYWU2NGY3NjY1Zg==", "commit": {"author": {"name": "Daniel Jacobowitz", "email": "drow@mvista.com", "date": "2003-06-04T17:44:03Z"}, "committer": {"name": "Daniel Jacobowitz", "email": "drow@gcc.gnu.org", "date": "2003-06-04T17:44:03Z"}, "message": "* config.gcc: Only process --with-cpu logic in the third pass.\n\nFrom-SVN: r67456", "tree": {"sha": "cccdf7e11d254f078c0a15f7ef7afee1cba11bc9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cccdf7e11d254f078c0a15f7ef7afee1cba11bc9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/83079d893cac8e85e0d9a5f7531cccae64f7665f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83079d893cac8e85e0d9a5f7531cccae64f7665f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83079d893cac8e85e0d9a5f7531cccae64f7665f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83079d893cac8e85e0d9a5f7531cccae64f7665f/comments", "author": null, "committer": null, "parents": [{"sha": "73f09c9913d43bf0cabf06840d446493dd4a5e24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73f09c9913d43bf0cabf06840d446493dd4a5e24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73f09c9913d43bf0cabf06840d446493dd4a5e24"}], "stats": {"total": 619, "additions": 313, "deletions": 306}, "files": [{"sha": "bbd1cff91a851afe00a1e2e0129f19a4ff79b2b6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83079d893cac8e85e0d9a5f7531cccae64f7665f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83079d893cac8e85e0d9a5f7531cccae64f7665f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=83079d893cac8e85e0d9a5f7531cccae64f7665f", "patch": "@@ -1,3 +1,7 @@\n+2003-06-04  Daniel Jacobowitz  <drow@mvista.com>\n+\n+\t* config.gcc: Only process --with-cpu logic in the third pass.\n+\n 2003-06-04  Daniel Jacobowitz  <drow@mvista.com>\n \n \t* config.gcc: Reorganize --with-cpu section.  Remove an"}, {"sha": "3e6c1eccf27bc6a5a9dd346c4e16042e587ee853", "filename": "gcc/config.gcc", "status": "modified", "additions": 309, "deletions": 306, "changes": 615, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83079d893cac8e85e0d9a5f7531cccae64f7665f/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83079d893cac8e85e0d9a5f7531cccae64f7665f/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=83079d893cac8e85e0d9a5f7531cccae64f7665f", "patch": "@@ -2130,372 +2130,375 @@ case $machine in\n esac\n \n # Support for --with-cpu and related options (and a few unrelated options,\n-# too).\n+# too).  Only do this if $machine is the target, or we'll try to validate\n+# the CPU argument against the wrong machine type.\n \n-case \"x$with_cpu\" in\n-xyes | xno)\n-\techo \"--with-cpu must be passed a value\" 1>&2\n-\texit 1\n-\t;;\n-esac\n-\n-# If there is no $with_cpu option, try to infer one from ${machine}.\n-# This block sets nothing except for with_cpu.\n-if test x$with_cpu = x\n+if test \"x$pass2done\" = xyes\n then\n-\tcase $machine in\n-\tep9312-*-*)\n-\t\t# A Cirrus ARM variant.\n-\t\twith_cpu=\"ep9312\"\n-\t\t;;\n-\ti486-*-*)\n-\t\twith_cpu=i486\n+\tcase \"x$with_cpu\" in\n+\txyes | xno)\n+\t\techo \"--with-cpu must be passed a value\" 1>&2\n+\t\texit 1\n \t\t;;\n-\ti586-*-*)\n-\t\tcase $target_alias in\n-\t\tk6_2-*)\n-\t\t\twith_cpu=k6-2\n-\t\t\t;;\n-\t\tk6_3-*)\n-\t\t\twith_cpu=k6-3\n+\tesac\n+\n+\t# If there is no $with_cpu option, try to infer one from ${machine}.\n+\t# This block sets nothing except for with_cpu.\n+\tif test x$with_cpu = x\n+\tthen\n+\t\tcase $machine in\n+\t\tep9312-*-*)\n+\t\t\t# A Cirrus ARM variant.\n+\t\t\twith_cpu=\"ep9312\"\n \t\t\t;;\n-\t\tk6-*)\n-\t\t\twith_cpu=k6\n+\t\ti486-*-*)\n+\t\t\twith_cpu=i486\n \t\t\t;;\n-\t\tpentium_mmx-*|winchip_c6-*|winchip2-*|c3-*)\n-\t\t\twith_cpu=pentium-mmx\n+\t\ti586-*-*)\n+\t\t\tcase $target_alias in\n+\t\t\tk6_2-*)\n+\t\t\t\twith_cpu=k6-2\n+\t\t\t\t;;\n+\t\t\tk6_3-*)\n+\t\t\t\twith_cpu=k6-3\n+\t\t\t\t;;\n+\t\t\tk6-*)\n+\t\t\t\twith_cpu=k6\n+\t\t\t\t;;\n+\t\t\tpentium_mmx-*|winchip_c6-*|winchip2-*|c3-*)\n+\t\t\t\twith_cpu=pentium-mmx\n+\t\t\t\t;;\n+\t\t\t*)\n+\t\t\t\twith_cpu=pentium\n+\t\t\t\t;;\n+\t\t\tesac\n \t\t\t;;\n-\t\t*)\n-\t\t\twith_cpu=pentium\n+\t\ti686-*-* | i786-*-*)\n+\t\t\tcase $target_alias in\n+\t\t\tk8-*)\n+\t\t\t\twith_cpu=k8\n+\t\t\t\t;;\n+\t\t\tathlon_xp-*|athlon_mp-*|athlon_4-*)\n+\t\t\t\twith_cpu=athlon-4\n+\t\t\t\t;;\n+\t\t\tathlon_tbird-*|athlon-*)\n+\t\t\t\twith_cpu=athlon\n+\t\t\t\t;;\n+\t\t\tpentium2-*)\n+\t\t\t\twith_cpu=pentium2\n+\t\t\t\t;;\n+\t\t\tpentium3-*)\n+\t\t\t\twith_cpu=pentium3\n+\t\t\t\t;;\n+\t\t\tpentium4-*)\n+\t\t\t\twith_cpu=pentium4\n+\t\t\t\t;;\n+\t\t\t*)\n+\t\t\t\twith_cpu=pentiumpro\n+\t\t\t\t;;\n+\t\t\tesac\n \t\t\t;;\n-\t\tesac\n-\t\t;;\n-\ti686-*-* | i786-*-*)\n-\t\tcase $target_alias in\n-\t\tk8-*)\n+\t\tx86_64-*-*)\n \t\t\twith_cpu=k8\n \t\t\t;;\n-\t\tathlon_xp-*|athlon_mp-*|athlon_4-*)\n-\t\t\twith_cpu=athlon-4\n-\t\t\t;;\n-\t\tathlon_tbird-*|athlon-*)\n-\t\t\twith_cpu=athlon\n+\t\talpha*-*-*)\n+\t\t\tcase $machine in\n+\t\t\talphaev6[78]*)\n+\t\t\t\twith_cpu=ev67\n+\t\t\t\t;;\n+\t\t\talphaev6*)\n+\t\t\t\twith_cpu=ev6\n+\t\t\t\t;;\n+\t\t\talphapca56*)\n+\t\t\t\twith_cpu=pca56\n+\t\t\t\t;;\n+\t\t\talphaev56*)\n+\t\t\t\twith_cpu=ev56\n+\t\t\t\t;;\n+\t\t\talphaev5*)\n+\t\t\t\twith_cpu=ev5\n+\t\t\t\t;;\n+\t\t\tesac\n \t\t\t;;\n-\t\tpentium2-*)\n-\t\t\twith_cpu=pentium2\n+\t\tsparc*-*-*)\n+\t\t\twith_cpu=\"`echo $machine | sed 's/-.*$//'`\"\n \t\t\t;;\n-\t\tpentium3-*)\n-\t\t\twith_cpu=pentium3\n+\t\tesac\n+\tfi\n+\n+\t# Similarly for --with-schedule.\n+\tif test x$with_schedule = x; then\n+\t\tcase $machine in\n+\t\thppa1* | parisc1*)\n+\t\t\t# Override default PA8000 scheduling model.\n+\t\t\twith_schedule=7100LC\n \t\t\t;;\n-\t\tpentium4-*)\n-\t\t\twith_cpu=pentium4\n+\t\tesac\n+\tfi\n+\n+\t# Optionally, validate the argument to --with-cpu.\n+\t# This block sets nothing.\n+\tcase $machine in\n+\talpha*-*-*)\n+\t\tcase \"x$with_cpu\" in\n+\t\tx \\\n+\t\t| xev5 | xev56 | xpca56 | xev6 | xev67)\n+\t\t\t# OK\n \t\t\t;;\n \t\t*)\n-\t\t\twith_cpu=pentiumpro\n+\t\t\techo \"Unknown CPU used in --with-cpu=$with_cpu\" 1>&2\n+\t\t\texit 1\n \t\t\t;;\n \t\tesac\n \t\t;;\n-\tx86_64-*-*)\n-\t\twith_cpu=k8\n-\t\t;;\n-\talpha*-*-*)\n-\t\tcase $machine in\n-\t\talphaev6[78]*)\n-\t\t\twith_cpu=ev67\n-\t\t\t;;\n-\t\talphaev6*)\n-\t\t\twith_cpu=ev6\n-\t\t\t;;\n-\t\talphapca56*)\n-\t\t\twith_cpu=pca56\n-\t\t\t;;\n-\t\talphaev56*)\n-\t\t\twith_cpu=ev56\n+\n+\tarm*-*-*)\n+\t\tcase \"x$with_cpu\" in\n+\t\tx \\\n+\t\t| xarm[236789] | xarm250 | xarm[67][01]0 \\\n+\t\t| xarm7m | xarm7dm | xarm7dmi | xarm[79]tdmi \\\n+\t\t| xarm7100 | xarm7500 | xarm7500fe | xarm810 \\\n+\t\t| xxscale \\\n+\t\t| xep9312 \\\n+\t\t| xstrongarm | xstrongarm110 | xstrongarm1100)\n+\t\t\t# OK\n \t\t\t;;\n-\t\talphaev5*)\n-\t\t\twith_cpu=ev5\n+\t\t*)\n+\t\t\techo \"Unknown cpu used in --with-cpu=$with_cpu\" 1>&2\n+\t\t\texit 1\n \t\t\t;;\n \t\tesac\n \t\t;;\n-\tsparc*-*-*)\n-\t\twith_cpu=\"`echo $machine | sed 's/-.*$//'`\"\n-\t\t;;\n-\tesac\n-fi\n \n-# Similarly for --with-schedule.\n-if test x$with_schedule = x; then\n-\tcase $machine in\n-\thppa1* | parisc1*)\n-\t\t# Override default PA8000 scheduling model.\n-\t\twith_schedule=7100LC\n+\thppa*-*-* | parisc*-*-*)\n+\t\tcase \"x$with_schedule\" in\n+\t\tx | x700 | x7100 | x7100LC | x7200 | x7300 | x8000)\n+\t\t\t# OK\n+\t\t\t;;\n+\t\t*)\n+\t\t\techo \"Unknown processor used in --with-schedule=$with_schedule.\" 1>&2\n+\t\t\texit 1\n+\t\t\t;;\n+\t\tesac\n \t\t;;\n-\tesac\n-fi\n \n-# Optionally, validate the argument to --with-cpu.\n-# This block sets nothing.\n-case $machine in\n-alpha*-*-*)\n-\tcase \"x$with_cpu\" in\n-\tx \\\n-\t| xev5 | xev56 | xpca56 | xev6 | xev67)\n-\t\t# OK\n-\t\t;;\n-\t*)\n-\t\techo \"Unknown CPU used in --with-cpu=$with_cpu\" 1>&2\n-\t\texit 1\n+\ti[34567]86-*-* | x86_64-*-*)\n+\t\tcase x$with_cpu in\n+\t\tx \\\n+\t\t| xi486 \\\n+\t\t| xi586 | xk6 | xk6-2 | xk6-3 | xpentium-mmx | xpentium \\\n+\t\t| xpentiumpro | xpentium2 | xpentium3 | xpentium4 \\\n+\t\t| xathlon | xathlon-4 | xk8)\n+\t\t\t# OK\n+\t\t\t;;\n+\t\t*)\n+\t\t\techo \"Unknown CPU given in --with-cpu=$with_cpu.\" 1>&2\n+\t\t\texit 1\n+\t\t\t;;\n+\t\tesac\n \t\t;;\n-\tesac\n-\t;;\n \n-arm*-*-*)\n-\tcase \"x$with_cpu\" in\n-\tx \\\n-\t| xarm[236789] | xarm250 | xarm[67][01]0 \\\n-\t| xarm7m | xarm7dm | xarm7dmi | xarm[79]tdmi \\\n-\t| xarm7100 | xarm7500 | xarm7500fe | xarm810 \\\n-\t| xxscale \\\n-\t| xep9312 \\\n-\t| xstrongarm | xstrongarm110 | xstrongarm1100)\n-\t\t# OK\n-\t\t;;\n-\t*)\n-\t\techo \"Unknown cpu used in --with-cpu=$with_cpu\" 1>&2\n-\t\texit 1\n+\tpowerpc*-*-* | rs6000-*-*)\n+\t\tcase \"x$with_cpu\" in\n+\t\tx \\\n+\t\t| xdefault32 | xdefault64 \\\n+\t\t| xcommon \\\n+\t\t| xpower | xpower2 | xpower3 | xpower4 \\\n+\t\t| xpowerpc | xpowerpc64 \\\n+\t\t| xrios | xrios1 | xrios2 | xrsc | xrsc1 | xrs64a \\\n+\t\t| x401 | x403 | x405 | x405fp | x440 | x440fp | x505 \\\n+\t\t| x601 | x602 | x603 | x603e | xec603e | x604 \\\n+\t\t| x604e | x620 | x630 | x740 | x750 | x7400 | x7450 \\\n+\t\t| x8540 | x801 | x821 | x823 | x860)\n+\t\t\t# OK\n+\t\t\t;;\n+\t\t*)\n+\t\t\techo \"Unknown cpu used in --with-cpu=$with_cpu.\" 1>&2\n+\t\t\texit 1\n+\t\t\t;;\n+\t\tesac\n \t\t;;\n-\tesac\n-\t;;\n \n-hppa*-*-* | parisc*-*-*)\n-\tcase \"x$with_schedule\" in\n-\tx | x700 | x7100 | x7100LC | x7200 | x7300 | x8000)\n-\t\t# OK\n-\t\t;;\n-\t*)\n-\t\techo \"Unknown processor used in --with-schedule=$with_schedule.\" 1>&2\n-\t\texit 1\n-\t\t;;\n-\tesac\n-\t;;\n+\tsparc*-*-*)\n+\t\tcase x$with_cpu in\n+\t\tx)\n+\t\t\techo \"Should never happen - no default CPU for sparc target.\"\n+\t\t\texit 1\n+\t\t\t;;\n \n-i[34567]86-*-* | x86_64-*-*)\n-\tcase x$with_cpu in\n-\tx \\\n-\t| xi486 \\\n-\t| xi586 | xk6 | xk6-2 | xk6-3 | xpentium-mmx | xpentium \\\n-\t| xpentiumpro | xpentium2 | xpentium3 | xpentium4 \\\n-\t| xathlon | xathlon-4 | xk8)\n-\t\t# OK\n-\t\t;;\n-\t*)\n-\t\techo \"Unknown CPU given in --with-cpu=$with_cpu.\" 1>&2\n-\t\texit 1\n+\t\txsparc | xsparc86x | xsparcv9 | xsparc64 \\\n+\t\t| xsupersparc | xhypersparc | xultrasparc | xv7 | xv8 | xv9)\n+\t\t\t# OK\n+\t\t\t;;\n+\t\t*)\n+\t\t\techo \"Unknown cpu used in --with-$which=$val\" 1>&2\n+\t\t\texit 1\n+\t\t\t;;\n+\t\tesac\n \t\t;;\n-\tesac\n-\t;;\n \n-powerpc*-*-* | rs6000-*-*)\n-\tcase \"x$with_cpu\" in\n-\tx \\\n-\t| xdefault32 | xdefault64 \\\n-\t| xcommon \\\n-\t| xpower | xpower2 | xpower3 | xpower4 \\\n-\t| xpowerpc | xpowerpc64 \\\n-\t| xrios | xrios1 | xrios2 | xrsc | xrsc1 | xrs64a \\\n-\t| x401 | x403 | x405 | x405fp | x440 | x440fp | x505 \\\n-\t| x601 | x602 | x603 | x603e | xec603e | x604 \\\n-\t| x604e | x620 | x630 | x740 | x750 | x7400 | x7450 \\\n-\t| x8540 | x801 | x821 | x823 | x860)\n-\t\t# OK\n-\t\t;;\n-\t*)\n-\t\techo \"Unknown cpu used in --with-cpu=$with_cpu.\" 1>&2\n-\t\texit 1\n+\tv850*-*-*)\n+\t\tcase \"x$with_cpu\" in\n+\t\tx | xv850e)\n+\t\t\t# OK\n+\t\t\t;;\n+\t\t*)\n+\t\t\techo \"Unknown cpu used in --with-cpu=$with_cpu\" 1>&2\n+\t\t\texit 1\n+\t\t\t;;\n+\t\tesac\n \t\t;;\n \tesac\n-\t;;\n-\n-sparc*-*-*)\n-\tcase x$with_cpu in\n-\tx)\n-\t\techo \"Should never happen - no default CPU for sparc target.\"\n-\t\texit 1\n-\t\t;;\n \n-\txsparc | xsparc86x | xsparcv9 | xsparc64 \\\n-\t| xsupersparc | xhypersparc | xultrasparc | xv7 | xv8 | xv9)\n-\t\t# OK\n-\t\t;;\n-\t*)\n-\t\techo \"Unknown cpu used in --with-$which=$val\" 1>&2\n-\t\texit 1\n-\t\t;;\n-\tesac\n-\t;;\n+\t# Now, for targets which support this, convert --with-cpu to\n+\t# a setting of target_cpu_default2.  This block also sets assorted\n+\t# other configuration variables.\n+\ttarget_cpu_default2=\n+\tcase $machine in\n+\talpha*-*-*)\n+\t\tcase $with_cpu in\n+\t\t\tev67)\n+\t\t\t\ttarget_cpu_default2=\"MASK_CPU_EV6|MASK_BWX|MASK_MAX|MASK_FIX|MASK_CIX\"\n+\t\t\t\t;;\n+\t\t\tev6)\n+\t\t\t\ttarget_cpu_default2=\"MASK_CPU_EV6|MASK_BWX|MASK_MAX|MASK_FIX\"\n+\t\t\t\t;;\n+\t\t\tpca56)\n+\t\t\t\ttarget_cpu_default2=\"MASK_CPU_EV5|MASK_BWX|MASK_MAX\"\n+\t\t\t\t;;\n+\t\t\tev56)\n+\t\t\t\ttarget_cpu_default2=\"MASK_CPU_EV5|MASK_BWX\"\n+\t\t\t\t;;\n+\t\t\tev5)\n+\t\t\t\ttarget_cpu_default2=\"MASK_CPU_EV5\"\n+\t\t\t\t;;\n+\t\tesac\n \n-v850*-*-*)\n-\tcase \"x$with_cpu\" in\n-\tx | xv850e)\n-\t\t# OK\n-\t\t;;\n-\t*)\n-\t\techo \"Unknown cpu used in --with-cpu=$with_cpu\" 1>&2\n-\t\texit 1\n+\t\tif test x$gas = xyes\n+\t\tthen\n+\t\t\tif test \"$target_cpu_default2\" = \"\"\n+\t\t\tthen\n+\t\t\t\ttarget_cpu_default2=\"MASK_GAS\"\n+\t\t\telse\n+\t\t\t\ttarget_cpu_default2=\"${target_cpu_default2}|MASK_GAS\"\n+\t\t\tfi\n+\t\tfi\n \t\t;;\n-\tesac\n-\t;;\n-esac\n \n-# Now, for targets which support this, convert --with-cpu to\n-# a setting of target_cpu_default2.  This block also sets assorted\n-# other configuration variables.\n-\n-target_cpu_default2=\n-case $machine in\n-alpha*-*-*)\n-\tcase $with_cpu in\n-\t\tev67)\n-\t\t\ttarget_cpu_default2=\"MASK_CPU_EV6|MASK_BWX|MASK_MAX|MASK_FIX|MASK_CIX\"\n+\tarm*-*-*)\n+\t\tcase \"x$with_cpu\" in\n+\t\tx)\n+\t\t\t# The most generic\n+\t\t\ttarget_cpu_default2=\"TARGET_CPU_generic\"\n \t\t\t;;\n-\t\tev6)\n-\t\t\ttarget_cpu_default2=\"MASK_CPU_EV6|MASK_BWX|MASK_MAX|MASK_FIX\"\n-\t\t\t;;\n-\t\tpca56)\n-\t\t\ttarget_cpu_default2=\"MASK_CPU_EV5|MASK_BWX|MASK_MAX\"\n-\t\t\t;;\n-\t\tev56)\n-\t\t\ttarget_cpu_default2=\"MASK_CPU_EV5|MASK_BWX\"\n-\t\t\t;;\n-\t\tev5)\n-\t\t\ttarget_cpu_default2=\"MASK_CPU_EV5\"\n+\n+\t\t*)\n+\t\t\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n \t\t\t;;\n-\tesac\n+\t\tesac\n+\t\t;;\n \n-\tif test x$gas = xyes\n-\tthen\n-\t\tif test \"$target_cpu_default2\" = \"\"\n+\thppa*-*-* | parisc*-*-*)\n+\t\tif test x$gas = xyes\n \t\tthen\n-\t\t\ttarget_cpu_default2=\"MASK_GAS\"\n-\t\telse\n-\t\t\ttarget_cpu_default2=\"${target_cpu_default2}|MASK_GAS\"\n+\t\t\ttarget_cpu_default2=\"MASK_GAS|MASK_JUMP_IN_DELAY\"\n+\t\tfi\n+\t\tif test \"x$with_schedule\" != x\n+\t\tthen\n+\t\t\ttm_defines=\"TARGET_SCHED_DEFAULT=\\\\\\\"$with_schedule\\\\\\\"\"\n+\t\t\t;;\n \t\tfi\n-\tfi\n-\t;;\n-\n-arm*-*-*)\n-\tcase \"x$with_cpu\" in\n-\tx)\n-\t\t# The most generic\n-\t\ttarget_cpu_default2=\"TARGET_CPU_generic\"\n-\t\t;;\n-\n-\t*)\n-\t\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n-\t\t;;\n-\tesac\n-\t;;\n-\n-hppa*-*-* | parisc*-*-*)\n-\tif test x$gas = xyes\n-\tthen\n-\t\ttarget_cpu_default2=\"MASK_GAS|MASK_JUMP_IN_DELAY\"\n-\tfi\n-\tif test \"x$with_schedule\" != x\n-\tthen\n-\t\ttm_defines=\"TARGET_SCHED_DEFAULT=\\\\\\\"$with_schedule\\\\\\\"\"\n \t\t;;\n-\tfi\n-\t;;\n \n-i[34567]86-*-* | x86_64-*-*)\n-\tcase x$with_cpu in\n-\txathlon-4)\n-\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_athlon_sse\n-\t\t;;\n-\t*)\n-\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_\"`echo $with_cpu | sed s/-/_/`\"\n+\ti[34567]86-*-* | x86_64-*-*)\n+\t\tcase x$with_cpu in\n+\t\txathlon-4)\n+\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_athlon_sse\n+\t\t\t;;\n+\t\t*)\n+\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_\"`echo $with_cpu | sed s/-/_/`\"\n+\t\t\t;;\n+\t\tesac\n \t\t;;\n-\tesac\n-\t;;\n \n-mips*-*-*)\n-\tcase $machine in\n-\tmips*-*-ecoff* | mips*-*-elf*)\n-\t\tif test x$gas = xyes\n-\t\tthen\n-\t\t\tif test x$gnu_ld = xyes\n+\tmips*-*-*)\n+\t\tcase $machine in\n+\t\tmips*-*-ecoff* | mips*-*-elf*)\n+\t\t\tif test x$gas = xyes\n+\t\t\tthen\n+\t\t\t\tif test x$gnu_ld = xyes\n+\t\t\t\tthen\n+\t\t\t\t\ttarget_cpu_default2=\"MASK_GAS|MASK_SPLIT_ADDR\"\n+\t\t\t\telse\n+\t\t\t\t\ttarget_cpu_default2=\"MASK_GAS\"\n+\t\t\t\tfi\n+\t\t\tfi\n+\t\t\t;;\n+\t\tmips*-*-*)\n+\t\t\tif test x$gas = xyes\n \t\t\tthen\n-\t\t\t\ttarget_cpu_default2=\"MASK_GAS|MASK_SPLIT_ADDR\"\n-\t\t\telse\n \t\t\t\ttarget_cpu_default2=\"MASK_GAS\"\n \t\t\tfi\n+\t\t\t;;\n+\t\tesac\n+\t\tcase $machine in\n+\t\t\tmips*el-*-*)\n+\t\t\t\ttm_defines=\"TARGET_ENDIAN_DEFAULT=0 $tm_defines\"\n+\t\t\t\t;;\n+\t\tesac\n+\t\tcase $tm_file in\n+\t\t\t*mips/elf.h* | *mips/elf64.h*)\n+\t\t\t\ttm_defines=\"OBJECT_FORMAT_ELF $tm_defines\"\n+\t\t\t\t;;\n+\t\tesac\n+\t\tif test \"x$enable_gofast\" = xyes\n+\t\tthen\n+\t\t\ttm_defines=\"INIT_SUBTARGET_OPTABS=INIT_GOFAST_OPTABS $tm_defines\"\n+\t\t\ttm_file=\"gofast.h $tm_file\"\n+\t\t\ttmake_file=\"mips/t-gofast $tmake_file\"\n+\t\telse\n+\t\t\ttmake_file=\"mips/t-mips $tmake_file\"\n \t\tfi\n \t\t;;\n-\tmips*-*-*)\n-\t\tif test x$gas = xyes\n+\n+\tpowerpc*-*-* | rs6000-*-*)\n+\t        if test x$enable_altivec = xyes\n+\t        then\n+\t                tm_file=\"$tm_file rs6000/altivec-defs.h\"\n+\t        fi\n+\t\tif test \"x$with_cpu\" != x\n \t\tthen\n-\t\t\ttarget_cpu_default2=\"MASK_GAS\"\n+\t\t\ttarget_cpu_default2=\"\\\\\\\"$with_cpu\\\\\\\"\"\n \t\tfi\n+\t\tout_file=rs6000/rs6000.c\n+\t\tc_target_objs=\"${c_target_objs} rs6000-c.o\"\n+\t\tcxx_target_objs=\"${cxx_target_objs} rs6000-c.o\"\n+\t\ttmake_file=\"rs6000/t-rs6000 ${tmake_file}\"\n \t\t;;\n-\tesac\n-\tcase $machine in\n-\t\tmips*el-*-*)\n-\t\t\ttm_defines=\"TARGET_ENDIAN_DEFAULT=0 $tm_defines\"\n-\t\t\t;;\n-\tesac\n-\tcase $tm_file in\n-\t\t*mips/elf.h* | *mips/elf64.h*)\n-\t\t\ttm_defines=\"OBJECT_FORMAT_ELF $tm_defines\"\n-\t\t\t;;\n-\tesac\n-\tif test \"x$enable_gofast\" = xyes\n-\tthen\n-\t\ttm_defines=\"INIT_SUBTARGET_OPTABS=INIT_GOFAST_OPTABS $tm_defines\"\n-\t\ttm_file=\"gofast.h $tm_file\"\n-\t\ttmake_file=\"mips/t-gofast $tmake_file\"\n-\telse\n-\t\ttmake_file=\"mips/t-mips $tmake_file\"\n-\tfi\n-\t;;\n-\n-powerpc*-*-* | rs6000-*-*)\n-        if test x$enable_altivec = xyes\n-        then\n-                tm_file=\"$tm_file rs6000/altivec-defs.h\"\n-        fi\n-\tif test \"x$with_cpu\" != x\n-\tthen\n-\t\ttarget_cpu_default2=\"\\\\\\\"$with_cpu\\\\\\\"\"\n-\tfi\n-\tout_file=rs6000/rs6000.c\n-\tc_target_objs=\"${c_target_objs} rs6000-c.o\"\n-\tcxx_target_objs=\"${cxx_target_objs} rs6000-c.o\"\n-\ttmake_file=\"rs6000/t-rs6000 ${tmake_file}\"\n-\t;;\n \n-sparc*-*-*)\n-\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n-\t;;\n-\n-v850*-*-*)\n-\tcase \"x$with_cpu\" in\n-\tx)\n-\t\t;;\n-\txv850e)\n+\tsparc*-*-*)\n \t\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n \t\t;;\n+\n+\tv850*-*-*)\n+\t\tcase \"x$with_cpu\" in\n+\t\tx)\n+\t\t\t;;\n+\t\txv850e)\n+\t\t\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n+\t\t\t;;\n+\t\tesac\n+\t\t;;\n \tesac\n-\t;;\n-esac\n \n-if test \"$target_cpu_default2\" != \"\"\n-then\n-\tif test \"$target_cpu_default\" != \"\"\n+\tif test \"$target_cpu_default2\" != \"\"\n \tthen\n-\t\ttarget_cpu_default=\"(${target_cpu_default}|${target_cpu_default2})\"\n-\telse\n-\t\ttarget_cpu_default=$target_cpu_default2\n+\t\tif test \"$target_cpu_default\" != \"\"\n+\t\tthen\n+\t\t\ttarget_cpu_default=\"(${target_cpu_default}|${target_cpu_default2})\"\n+\t\telse\n+\t\t\ttarget_cpu_default=$target_cpu_default2\n+\t\tfi\n \tfi\n fi\n "}]}