{"sha": "b25c5d6133d356a34aee72a24fd4cdec5637cc17", "node_id": "C_kwDOANBUbNoAKGIyNWM1ZDYxMzNkMzU2YTM0YWVlNzJhMjRmZDRjZGVjNTYzN2NjMTc", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2022-08-22T16:43:30Z"}, "committer": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2022-08-23T13:09:46Z"}, "message": "testsuite: Add test for r11-4123\n\nr11-4123 came without a test but I happened upon a nice test case that\ngot fixed by that revision.  So I think it'd be good to add it.  The\nICE was:\n\nphi-1.C: In constructor 'ElementManager::ElementManager()':\nphi-1.C:28:1: error: missing definition\n   28 | ElementManager::ElementManager() : array_(makeArray()) {}\n      | ^~~~~~~~~~~~~~\nfor SSA_NAME: _12 in statement:\n_10 = PHI <_12(3), _11(5)>\nPHI argument\n_12\nfor PHI node\n_10 = PHI <_12(3), _11(5)>\nduring GIMPLE pass: fixup_cfg\nphi-1.C:28:1: internal compiler error: verify_ssa failed\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/torture/phi-1.C: New test.", "tree": {"sha": "b3f27e1c22689142e7a22320bda0905d391e8a6f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b3f27e1c22689142e7a22320bda0905d391e8a6f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b25c5d6133d356a34aee72a24fd4cdec5637cc17", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b25c5d6133d356a34aee72a24fd4cdec5637cc17", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b25c5d6133d356a34aee72a24fd4cdec5637cc17", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b25c5d6133d356a34aee72a24fd4cdec5637cc17/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fcd9671e73c877d0bd8a2c0a16cf7cf2ce93fe60", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcd9671e73c877d0bd8a2c0a16cf7cf2ce93fe60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fcd9671e73c877d0bd8a2c0a16cf7cf2ce93fe60"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "69fb3d7ba385709236304456a96c6146302c76cb", "filename": "gcc/testsuite/g++.dg/torture/phi-1.C", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b25c5d6133d356a34aee72a24fd4cdec5637cc17/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fphi-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b25c5d6133d356a34aee72a24fd4cdec5637cc17/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fphi-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fphi-1.C?ref=b25c5d6133d356a34aee72a24fd4cdec5637cc17", "patch": "@@ -0,0 +1,28 @@\n+// { dg-do compile { target c++11 } }\n+// { dg-options \"--param early-inlining-insns=14\" }\n+\n+struct Element;\n+template <int _Nm> struct __array_traits { typedef Element _Type[_Nm]; };\n+template <int _Nm> struct array {\n+  typename __array_traits<_Nm>::_Type _M_elems;\n+};\n+bool logLevel();\n+struct LogCapture {\n+  void stream();\n+};\n+struct Element {\n+  Element();\n+  long data_;\n+};\n+using ElementArray = array<6>;\n+struct ElementManager {\n+  ElementManager();\n+  ElementArray array_;\n+};\n+static ElementArray makeArray() {\n+  if (logLevel())\n+    LogCapture().stream();\n+  ElementArray foo;\n+  return foo;\n+}\n+ElementManager::ElementManager() : array_(makeArray()) {}"}]}