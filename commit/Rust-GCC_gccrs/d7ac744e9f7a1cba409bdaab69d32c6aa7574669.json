{"sha": "d7ac744e9f7a1cba409bdaab69d32c6aa7574669", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDdhYzc0NGU5ZjdhMWNiYTQwOWJkYWFiNjlkMzJjNmFhNzU3NDY2OQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2002-03-05T21:12:17Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2002-03-05T21:12:17Z"}, "message": "acinclude.m4 (GLIBCPP_ENABLE_SYMVERS): Check for version script globbing in ld.\n\n\t* acinclude.m4 (GLIBCPP_ENABLE_SYMVERS): Check for version\n\tscript globbing in ld.\n\t* aclocal.m4: Rebuilt.\n\t* configure: Rebuilt.\n\nFrom-SVN: r50330", "tree": {"sha": "1e2bb88b12e9b6a1db32435f10fce98209652c68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e2bb88b12e9b6a1db32435f10fce98209652c68"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d7ac744e9f7a1cba409bdaab69d32c6aa7574669", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7ac744e9f7a1cba409bdaab69d32c6aa7574669", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7ac744e9f7a1cba409bdaab69d32c6aa7574669", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7ac744e9f7a1cba409bdaab69d32c6aa7574669/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e8b3c8acf3afe1c97b6c51dfe469d7f434b48df4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8b3c8acf3afe1c97b6c51dfe469d7f434b48df4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8b3c8acf3afe1c97b6c51dfe469d7f434b48df4"}], "stats": {"total": 85, "additions": 79, "deletions": 6}, "files": [{"sha": "5b871f65a55fe1db702ce01e07940e7466d31ba3", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7ac744e9f7a1cba409bdaab69d32c6aa7574669/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7ac744e9f7a1cba409bdaab69d32c6aa7574669/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=d7ac744e9f7a1cba409bdaab69d32c6aa7574669", "patch": "@@ -1,3 +1,10 @@\n+2002-03-05  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* acinclude.m4 (GLIBCPP_ENABLE_SYMVERS): Check for version\n+\tscript globbing in ld.\n+\t* aclocal.m4: Rebuilt.\n+\t* configure: Rebuilt.\n+\n 2002-03-05  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* docs/html/17_intro/RELEASE-NOTES: Update."}, {"sha": "c78001148d1e37d11f409bd7f90d410ed7808211", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 19, "deletions": 2, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7ac744e9f7a1cba409bdaab69d32c6aa7574669/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7ac744e9f7a1cba409bdaab69d32c6aa7574669/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=d7ac744e9f7a1cba409bdaab69d32c6aa7574669", "patch": "@@ -2082,10 +2082,27 @@ glibcpp_min_gnu_ld_version=21200\n # above.  \n if test $enable_symvers = yes ; then\n   if test $with_gnu_ld = yes &&\n-    test $glibcpp_gnu_ld_version -ge $glibcpp_min_gnu_ld_version &&\n     test $glibcpp_shared_libgcc = yes ;\n   then\n-    enable_symvers=gnu\n+    if test $glibcpp_gnu_ld_version -ge $glibcpp_min_gnu_ld_version ; then\n+        enable_symvers=gnu\n+    else\n+      ac_test_CFLAGS=\"${CFLAGS+set}\"\n+      ac_save_CFLAGS=\"$CFLAGS\"\n+      CFLAGS='-shared -Wl,--version-script,conftest.map'\n+      enable_symvers=no\n+      changequote(,)\n+      echo 'FOO { global: f[a-z]o; local: *; };' > conftest.map\n+      changequote([,])\n+      AC_TRY_LINK([int foo;],, enable_symvers=gnu)\n+      if test \"$ac_test_CFLAGS\" = set; then\n+\tCFLAGS=\"$ac_save_CFLAGS\"\n+      else\n+\t# this is the suspicious part\n+\tCFLAGS=''\n+      fi\n+      rm -f conftest.map\n+    fi\n   else\n     # just fail for now\n     enable_symvers=no"}, {"sha": "bd5689e8037c9f72a59a89147f087a893379c104", "filename": "libstdc++-v3/aclocal.m4", "status": "modified", "additions": 19, "deletions": 2, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7ac744e9f7a1cba409bdaab69d32c6aa7574669/libstdc%2B%2B-v3%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7ac744e9f7a1cba409bdaab69d32c6aa7574669/libstdc%2B%2B-v3%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Faclocal.m4?ref=d7ac744e9f7a1cba409bdaab69d32c6aa7574669", "patch": "@@ -2094,10 +2094,27 @@ glibcpp_min_gnu_ld_version=21200\n # above.  \n if test $enable_symvers = yes ; then\n   if test $with_gnu_ld = yes &&\n-    test $glibcpp_gnu_ld_version -ge $glibcpp_min_gnu_ld_version &&\n     test $glibcpp_shared_libgcc = yes ;\n   then\n-    enable_symvers=gnu\n+    if test $glibcpp_gnu_ld_version -ge $glibcpp_min_gnu_ld_version ; then\n+        enable_symvers=gnu\n+    else\n+      ac_test_CFLAGS=\"${CFLAGS+set}\"\n+      ac_save_CFLAGS=\"$CFLAGS\"\n+      CFLAGS='-shared -Wl,--version-script,conftest.map'\n+      enable_symvers=no\n+      changequote(,)\n+      echo 'FOO { global: f[a-z]o; local: *; };' > conftest.map\n+      changequote([,])\n+      AC_TRY_LINK([int foo;],, enable_symvers=gnu)\n+      if test \"$ac_test_CFLAGS\" = set; then\n+\tCFLAGS=\"$ac_save_CFLAGS\"\n+      else\n+\t# this is the suspicious part\n+\tCFLAGS=''\n+      fi\n+      rm -f conftest.map\n+    fi\n   else\n     # just fail for now\n     enable_symvers=no"}, {"sha": "10b7d224b20fc808cc3c899cc7ade9bd05ddf915", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 34, "deletions": 2, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7ac744e9f7a1cba409bdaab69d32c6aa7574669/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7ac744e9f7a1cba409bdaab69d32c6aa7574669/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=d7ac744e9f7a1cba409bdaab69d32c6aa7574669", "patch": "@@ -19349,10 +19349,42 @@ glibcpp_min_gnu_ld_version=21200\n # above.  \n if test $enable_symvers = yes ; then\n   if test $with_gnu_ld = yes &&\n-    test $glibcpp_gnu_ld_version -ge $glibcpp_min_gnu_ld_version &&\n     test $glibcpp_shared_libgcc = yes ;\n   then\n-    enable_symvers=gnu\n+    if test $glibcpp_gnu_ld_version -ge $glibcpp_min_gnu_ld_version ; then\n+        enable_symvers=gnu\n+    else\n+      ac_test_CFLAGS=\"${CFLAGS+set}\"\n+      ac_save_CFLAGS=\"$CFLAGS\"\n+      CFLAGS='-shared -Wl,--version-script,conftest.map'\n+      enable_symvers=no\n+      \n+      echo 'FOO { global: f[a-z]o; local: *; };' > conftest.map\n+      \n+      cat > conftest.$ac_ext <<EOF\n+#line 19344 \"configure\"\n+#include \"confdefs.h\"\n+int foo;\n+int main() {\n+\n+; return 0; }\n+EOF\n+if { (eval echo configure:19351: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  enable_symvers=gnu\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+fi\n+rm -f conftest*\n+      if test \"$ac_test_CFLAGS\" = set; then\n+\tCFLAGS=\"$ac_save_CFLAGS\"\n+      else\n+\t# this is the suspicious part\n+\tCFLAGS=''\n+      fi\n+      rm -f conftest.map\n+    fi\n   else\n     # just fail for now\n     enable_symvers=no"}]}