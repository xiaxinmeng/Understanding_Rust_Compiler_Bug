{"sha": "f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjFhM2YxOTdlMWYxOWMwYjQzOWQ4NGQyZTNjZTExYWIyMWM1MDdhMA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2001-02-16T01:24:14Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2001-02-16T01:24:14Z"}, "message": "* typeck2.c (build_m_component_ref): Robustify.\n\nFrom-SVN: r39731", "tree": {"sha": "50359c225572ab1cbda6230552673833ccda35b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/50359c225572ab1cbda6230552673833ccda35b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0/comments", "author": null, "committer": null, "parents": [{"sha": "e2c094827c86cb0cbf71ba3b16b09541e61502c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2c094827c86cb0cbf71ba3b16b09541e61502c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2c094827c86cb0cbf71ba3b16b09541e61502c2"}], "stats": {"total": 25, "additions": 15, "deletions": 10}, "files": [{"sha": "a65b21edc23656c015eee013789e4b138fda2b5c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0", "patch": "@@ -1,3 +1,7 @@\n+2001-02-15  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* typeck2.c (build_m_component_ref): Robustify.\n+\n 2001-02-15  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* friend.c (do_friend): Don't take the nested [template] class"}, {"sha": "3c26b1b8ddad7eddf4288bb65b37777ad0b172cc", "filename": "gcc/cp/typeck2.c", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0/gcc%2Fcp%2Ftypeck2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0/gcc%2Fcp%2Ftypeck2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck2.c?ref=f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0", "patch": "@@ -1093,25 +1093,26 @@ build_m_component_ref (datum, component)\n     return build_min_nt (DOTSTAR_EXPR, datum, component);\n \n   datum = decay_conversion (datum);\n+\n+  if (datum == error_mark_node || component == error_mark_node)\n+    return error_mark_node;\n+\n   objtype = TYPE_MAIN_VARIANT (TREE_TYPE (datum));  \n \n   if (TYPE_PTRMEMFUNC_P (TREE_TYPE (component)))\n     {\n       type = TREE_TYPE (TYPE_PTRMEMFUNC_FN_TYPE (TREE_TYPE (component)));\n       field_type = type;\n     }\n-  else\n+  else if (TYPE_PTRMEM_P (TREE_TYPE (component)))\n     {\n       type = TREE_TYPE (TREE_TYPE (component));\n       field_type = TREE_TYPE (type);\n     }\n-\n-  if (datum == error_mark_node || component == error_mark_node)\n-    return error_mark_node;\n-\n-  if (TREE_CODE (type) != OFFSET_TYPE && TREE_CODE (type) != METHOD_TYPE)\n+  else\n     {\n-      cp_error (\"`%E' cannot be used as a member pointer, since it is of type `%T'\", component, type);\n+      cp_error (\"`%E' cannot be used as a member pointer, since it is of type `%T'\", \n+\t\tcomponent, TREE_TYPE (component));\n       return error_mark_node;\n     }\n "}, {"sha": "7e9ab4e701c72d7ab24526623782b76833853ca5", "filename": "gcc/testsuite/g++.old-deja/g++.other/ptrmem6.C", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fptrmem6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fptrmem6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fptrmem6.C?ref=f1a3f197e1f19c0b439d84d2e3ce11ab21c507a0", "patch": "@@ -1,7 +1,7 @@\n // Build don't link:\n-// crash test - XFAIL *-*-*\n+// crash test\n \n-// Copyright (c) 2000 Free Software Foundation.\n+// Copyright (c) 2000, 2001 Free Software Foundation.\n // Distilled from a bug report by Eric Ford <eford@princeton.edu>\n \n extern double *y;\n@@ -12,5 +12,5 @@ void SetInitCond(void)\n {\n   int i;\n   for(i = 2; i < nPoints; ++i)\n-    y[i] = y[nPoints] .* (x[i]-x[1]) / (x[nPoints]-x[1]);  // ERROR\n+    y[i] = y[nPoints] .* (x[i]-x[1]) / (x[nPoints]-x[1]);  // ERROR - .*\n }"}]}