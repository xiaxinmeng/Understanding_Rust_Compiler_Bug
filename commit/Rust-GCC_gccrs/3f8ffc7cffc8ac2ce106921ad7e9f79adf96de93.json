{"sha": "3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2Y4ZmZjN2NmZmM4YWMyY2UxMDY5MjFhZDdlOWY3OWFkZjk2ZGU5Mw==", "commit": {"author": {"name": "Robert Spier", "email": "rspier@pobox.com", "date": "2002-05-08T21:21:19Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2002-05-08T21:21:19Z"}, "message": "re PR preprocessor/6521 (-MG creates dependency with wrong path)\n\n\tPR preprocessor/6521\n\t* cppfiles.c (handle_missing_header): Don't do anything\n\tdifferent for <> includes.\ndoc:\n\t* cppopts.texi: Update documentation for -MG.\n\nCo-Authored-By: Neil Booth <neil@daikokuya.demon.co.uk>\n\nFrom-SVN: r53304", "tree": {"sha": "fa302bee2149e8e46598f7b0c14b6969a2a3415d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fa302bee2149e8e46598f7b0c14b6969a2a3415d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93/comments", "author": {"login": "rspier", "id": 43223, "node_id": "MDQ6VXNlcjQzMjIz", "avatar_url": "https://avatars.githubusercontent.com/u/43223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rspier", "html_url": "https://github.com/rspier", "followers_url": "https://api.github.com/users/rspier/followers", "following_url": "https://api.github.com/users/rspier/following{/other_user}", "gists_url": "https://api.github.com/users/rspier/gists{/gist_id}", "starred_url": "https://api.github.com/users/rspier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rspier/subscriptions", "organizations_url": "https://api.github.com/users/rspier/orgs", "repos_url": "https://api.github.com/users/rspier/repos", "events_url": "https://api.github.com/users/rspier/events{/privacy}", "received_events_url": "https://api.github.com/users/rspier/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b9e2d17b40af155da708201a231836c1930fe152", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9e2d17b40af155da708201a231836c1930fe152", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9e2d17b40af155da708201a231836c1930fe152"}], "stats": {"total": 45, "additions": 17, "deletions": 28}, "files": [{"sha": "7b47c8c2639f7d25507d5163a852f413c61d6b2a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93", "patch": "@@ -1,3 +1,12 @@\n+2002-05-08  Robert Spier <rspier@pobox.com>\n+\t    Neil Booth  <neil@daikokuya.demon.co.uk>\n+\n+\tPR preprocessor/6521\n+\t* cppfiles.c (handle_missing_header): Don't do anything\n+\tdifferent for <> includes.\n+doc:\n+\t* cppopts.texi: Update documentation for -MG.\n+\n 2002-05-08  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* cpplex.c (cpp_interpret_charconst): Truncate as well as"}, {"sha": "70ac9782f4de287834ae1f5255abc236c0d977d1", "filename": "gcc/cppfiles.c", "status": "modified", "additions": 1, "deletions": 24, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93/gcc%2Fcppfiles.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93/gcc%2Fcppfiles.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppfiles.c?ref=3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93", "patch": "@@ -658,30 +658,7 @@ handle_missing_header (pfile, fname, angle_brackets)\n   int print_dep = CPP_PRINT_DEPS(pfile) > (angle_brackets || pfile->map->sysp);\n \n   if (CPP_OPTION (pfile, print_deps_missing_files) && print_dep)\n-    {\n-      if (!angle_brackets || IS_ABSOLUTE_PATHNAME (fname))\n-\tdeps_add_dep (pfile->deps, fname);\n-      else\n-\t{\n-\t  /* If requested as a system header, assume it belongs in\n-\t     the first system header directory.  */\n-\t  struct search_path *ptr = CPP_OPTION (pfile, bracket_include);\n-\t  char *p;\n-\t  int len = 0, fname_len = strlen (fname);\n-\n-\t  if (ptr)\n-\t    len = ptr->len;\n-\n-\t  p = (char *) alloca (len + fname_len + 2);\n-\t  if (len)\n-\t    {\n-\t      memcpy (p, ptr->name, len);\n-\t      p[len++] = '/';\n-\t    }\n-\t  memcpy (p + len, fname, fname_len + 1);\n-\t  deps_add_dep (pfile->deps, p);\n-\t}\n-    }\n+    deps_add_dep (pfile->deps, fname);\n   /* If -M was specified, then don't count this as an error, because\n      we can still produce correct output.  Otherwise, we can't produce\n      correct output, because there may be dependencies we need inside"}, {"sha": "7a2ce50cc3fceaa42e059faaca049fd690aed34b", "filename": "gcc/doc/cppopts.texi", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93/gcc%2Fdoc%2Fcppopts.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93/gcc%2Fdoc%2Fcppopts.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fcppopts.texi?ref=3f8ffc7cffc8ac2ce106921ad7e9f79adf96de93", "patch": "@@ -204,10 +204,13 @@ When used with the driver options @option{-MD} or @option{-MMD},\n \n @item -MG\n @opindex MG\n-When used with @option{-M} or @option{-MM}, @option{-MG} says to treat missing\n-header files as generated files and assume they live in the same\n-directory as the source file.  It suppresses preprocessed output, as a\n-missing header file is ordinarily an error.\n+In conjunction with an option such as @option{-M} requesting\n+dependency generation, @option{-MG} assumes missing header files are\n+generated files and adds them to the dependency list without raising\n+an error.  The dependency filename is taken directly from the\n+@code{#include} directive without prepending any path.  @option{-MG}\n+also suppresses preprocessed output, as a missing header file renders\n+this useless.\n \n This feature is used in automatic updating of makefiles.\n "}]}