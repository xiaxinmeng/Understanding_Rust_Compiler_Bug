{"sha": "fba1216545a21ac5226d88e3ab1878acf08f9bce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmJhMTIxNjU0NWEyMWFjNTIyNmQ4OGUzYWIxODc4YWNmMDhmOWJjZQ==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.com", "date": "2016-12-12T13:29:48Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2016-12-12T13:29:48Z"}, "message": "re PR rtl-optimization/78669 (ICE: in combine_and_move_insns, at ira.c:3665 with -Os -fno-tree-ter -mavx512bw)\n\n\n\tPR rtl-optimization/78669\n\t* ira.c (combine_and_move_insns): When deleting an insn, clear the\n\treplace flag for all used regs in that insn.\n\n\tPR rtl-optimization/78669\n\t* gcc.target/i386/pr78669.c: New test.\n\nFrom-SVN: r243551", "tree": {"sha": "d78d0be3a9925582b39c44ab96e4f4556b85aae5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d78d0be3a9925582b39c44ab96e4f4556b85aae5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fba1216545a21ac5226d88e3ab1878acf08f9bce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fba1216545a21ac5226d88e3ab1878acf08f9bce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fba1216545a21ac5226d88e3ab1878acf08f9bce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fba1216545a21ac5226d88e3ab1878acf08f9bce/comments", "author": null, "committer": null, "parents": [{"sha": "8152d6eff66fc2884df825b250ed9e97275b3c94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8152d6eff66fc2884df825b250ed9e97275b3c94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8152d6eff66fc2884df825b250ed9e97275b3c94"}], "stats": {"total": 46, "additions": 46, "deletions": 0}, "files": [{"sha": "1dc690f42cb12a36cacdc86091a28a5fb73d1bbe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fba1216545a21ac5226d88e3ab1878acf08f9bce/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fba1216545a21ac5226d88e3ab1878acf08f9bce/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fba1216545a21ac5226d88e3ab1878acf08f9bce", "patch": "@@ -1,3 +1,9 @@\n+2016-12-12  Bernd Schmidt  <bschmidt@redhat.com>\n+\n+\tPR rtl-optimization/78669\n+\t* ira.c (combine_and_move_insns): When deleting an insn, clear the\n+\treplace flag for all used regs in that insn.\n+\n 2016-12-12  Thomas Preud'homme  <thomas.preudhomme@arm.com>\n \n \t* config/arm/arm-opts.h: Move struct arm_arch_core_flag and"}, {"sha": "5823d5c7ddadcff59b33096ad59faf561a8217fe", "filename": "gcc/ira.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fba1216545a21ac5226d88e3ab1878acf08f9bce/gcc%2Fira.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fba1216545a21ac5226d88e3ab1878acf08f9bce/gcc%2Fira.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira.c?ref=fba1216545a21ac5226d88e3ab1878acf08f9bce", "patch": "@@ -3714,6 +3714,14 @@ combine_and_move_insns (void)\n \t  remove_death (regno, use_insn);\n \t  SET_REG_N_REFS (regno, 0);\n \t  REG_FREQ (regno) = 0;\n+\t  df_ref use;\n+\t  FOR_EACH_INSN_USE (use, def_insn)\n+\t    {\n+\t      unsigned int use_regno = DF_REF_REGNO (use);\n+\t      if (!HARD_REGISTER_NUM_P (use_regno))\n+\t\treg_equiv[use_regno].replace = 0;\n+\t    }\n+\n \t  delete_insn (def_insn);\n \n \t  reg_equiv[regno].init_insns = NULL;"}, {"sha": "66407ff05d98da17a770f3a2fa181778278c22ac", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fba1216545a21ac5226d88e3ab1878acf08f9bce/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fba1216545a21ac5226d88e3ab1878acf08f9bce/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fba1216545a21ac5226d88e3ab1878acf08f9bce", "patch": "@@ -1,3 +1,8 @@\n+2016-12-12  Bernd Schmidt  <bschmidt@redhat.com>\n+\n+\tPR rtl-optimization/78669\n+\t* gcc.target/i386/pr78669.c: New test.\n+\n 2016-12-12  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* g++.dg/debug/dwarf2/typedef1.C: Adjust pattern for last change."}, {"sha": "14f0f06eb6339a559fee7e664d8b91257b676ca5", "filename": "gcc/testsuite/gcc.target/i386/pr78669.c", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fba1216545a21ac5226d88e3ab1878acf08f9bce/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr78669.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fba1216545a21ac5226d88e3ab1878acf08f9bce/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr78669.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr78669.c?ref=fba1216545a21ac5226d88e3ab1878acf08f9bce", "patch": "@@ -0,0 +1,27 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target int128 } */\n+/* { dg-options \"-Os -fno-tree-ter -mavx512bw \" } */\n+typedef __int128 u128;\n+typedef __int128 v64u128 __attribute__((vector_size(64)));\n+\n+v64u128 v64u128_g;\n+\n+static inline v64u128\n+baz(v64u128 v64u128_0, v64u128 v64u128_3)\n+{\n+  v64u128_0 |= (v64u128){} == v64u128_0;\n+  v64u128_3 = (v64u128){} >= v64u128_3;\n+  return v64u128_0 + v64u128_3;\n+}\n+\n+static void __attribute__((noinline, noclone))\n+bar(u128 u128_0, v64u128 v64u128_3)\n+{\n+  v64u128_g = baz((v64u128){(u128)1 << 64, u128_0}, v64u128_3);\n+}\n+\n+void\n+foo(v64u128 v64u128_3)\n+{\n+  bar(3, v64u128_3);\n+}"}]}