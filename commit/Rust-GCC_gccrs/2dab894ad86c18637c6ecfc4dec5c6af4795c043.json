{"sha": "2dab894ad86c18637c6ecfc4dec5c6af4795c043", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmRhYjg5NGFkODZjMTg2MzdjNmVjZmM0ZGVjNWM2YWY0Nzk1YzA0Mw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-04-14T12:20:54Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-04-14T12:20:54Z"}, "message": "(combine_instructions): In initial scan of insns, handle a REG_INC note's affect on sign bit copies and nonzero bits.\n\n(combine_instructions): In initial scan of insns, handle a REG_INC\nnote's affect on sign bit copies and nonzero bits.\n(set_nonzero_bits_and_sign_copies): Treat a zero SET arg as a CLOBBER.\n\nFrom-SVN: r11762", "tree": {"sha": "e13ceabc61eaf04aa9cf730705af0a39da3cc09c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e13ceabc61eaf04aa9cf730705af0a39da3cc09c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2dab894ad86c18637c6ecfc4dec5c6af4795c043", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dab894ad86c18637c6ecfc4dec5c6af4795c043", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2dab894ad86c18637c6ecfc4dec5c6af4795c043", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dab894ad86c18637c6ecfc4dec5c6af4795c043/comments", "author": null, "committer": null, "parents": [{"sha": "f061780b0325bf1cfd5210438f3d7bfac08829ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f061780b0325bf1cfd5210438f3d7bfac08829ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f061780b0325bf1cfd5210438f3d7bfac08829ac"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "9efa2ab3d9121c4c363db477f22863a184814af7", "filename": "gcc/combine.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2dab894ad86c18637c6ecfc4dec5c6af4795c043/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2dab894ad86c18637c6ecfc4dec5c6af4795c043/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=2dab894ad86c18637c6ecfc4dec5c6af4795c043", "patch": "@@ -536,6 +536,12 @@ combine_instructions (f, nregs)\n \t{\n \t  note_stores (PATTERN (insn), set_nonzero_bits_and_sign_copies);\n \t  record_dead_and_set_regs (insn);\n+\n+#ifdef AUTO_INC_DEC\n+\t  for (links = REG_NOTES (insn); links; links = XEXP (links, 1))\n+\t    if (REG_NOTE_KIND (links) == REG_INC)\n+\t      set_nonzero_bits_and_sign_copies (XEXP (links, 0), NULL_RTX);\n+#endif\n \t}\n \n       if (GET_CODE (insn) == CODE_LABEL)\n@@ -728,7 +734,7 @@ set_nonzero_bits_and_sign_copies (x, set)\n \t    & ((REGSET_ELT_TYPE) 1 << (REGNO (x) % REGSET_ELT_BITS)))\n       && GET_MODE_BITSIZE (GET_MODE (x)) <= HOST_BITS_PER_WIDE_INT)\n     {\n-      if (GET_CODE (set) == CLOBBER)\n+      if (set == 0 || GET_CODE (set) == CLOBBER)\n \t{\n \t  reg_nonzero_bits[REGNO (x)] = GET_MODE_MASK (GET_MODE (x));\n \t  reg_sign_bit_copies[REGNO (x)] = 0;"}]}