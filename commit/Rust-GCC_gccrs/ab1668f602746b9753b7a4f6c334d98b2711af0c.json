{"sha": "ab1668f602746b9753b7a4f6c334d98b2711af0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWIxNjY4ZjYwMjc0NmI5NzUzYjdhNGY2YzMzNGQ5OGIyNzExYWYwYw==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2014-02-18T22:09:39Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2014-02-18T22:09:39Z"}, "message": "re PR fortran/49397 ([F03] ICE with proc pointer assignment)\n\n2014-02-18  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/49397\n        * expr.c (gfc_check_pointer_assign): Add check for\n        F2008Cor2, C729.\n        * trans-decl.c (gfc_get_symbol_decl): Correctly generate\n        * external\n        decl in a corner case.\n\n2014-02-18  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/49397\n        * gfortran.dg/proc_ptr_45.f90: New.\n        * gfortran.dg/proc_ptr_46.f90: New.\n\nFrom-SVN: r207854", "tree": {"sha": "acc9dd8a0b0f0ec03ea9b2c53b8b46e36c53652d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/acc9dd8a0b0f0ec03ea9b2c53b8b46e36c53652d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab1668f602746b9753b7a4f6c334d98b2711af0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab1668f602746b9753b7a4f6c334d98b2711af0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab1668f602746b9753b7a4f6c334d98b2711af0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab1668f602746b9753b7a4f6c334d98b2711af0c/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "70aacc9798fda3e38b42e04a57385f129c718837", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70aacc9798fda3e38b42e04a57385f129c718837", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70aacc9798fda3e38b42e04a57385f129c718837"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "c1bca007a8d8c53dea8a10bc238fd312162df61e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab1668f602746b9753b7a4f6c334d98b2711af0c/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab1668f602746b9753b7a4f6c334d98b2711af0c/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ab1668f602746b9753b7a4f6c334d98b2711af0c", "patch": "@@ -1,3 +1,11 @@\n+2014-02-18  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/49397\n+\t* expr.c (gfc_check_pointer_assign): Add check for\n+\tF2008Cor2, C729.\n+\t* trans-decl.c (gfc_get_symbol_decl): Correctly generate external\n+\tdecl in a corner case.\n+\n 2014-02-18  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/60231"}, {"sha": "fe6eab559576edf1c61dd19b3adb5743c77d3552", "filename": "gcc/fortran/expr.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab1668f602746b9753b7a4f6c334d98b2711af0c/gcc%2Ffortran%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab1668f602746b9753b7a4f6c334d98b2711af0c/gcc%2Ffortran%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.c?ref=ab1668f602746b9753b7a4f6c334d98b2711af0c", "patch": "@@ -3581,6 +3581,16 @@ gfc_check_pointer_assign (gfc_expr *lvalue, gfc_expr *rvalue)\n \t  return false;\n \t}\n \n+      /* Check F2008Cor2, C729.  */\n+      if (!s2->attr.intrinsic && s2->attr.if_source == IFSRC_UNKNOWN\n+\t  && !s2->attr.external && !s2->attr.subroutine && !s2->attr.function)\n+\t{\n+\t  gfc_error (\"Procedure pointer target '%s' at %L must be either an \"\n+\t\t     \"intrinsic, host or use associated, referenced or have \"\n+\t\t     \"the EXTERNAL attribute\", s2->name, &rvalue->where);\n+\t  return false;\n+\t}\n+\n       return true;\n     }\n "}, {"sha": "cf7b661d8e97898df9615ffea911810e73d23e44", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab1668f602746b9753b7a4f6c334d98b2711af0c/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab1668f602746b9753b7a4f6c334d98b2711af0c/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=ab1668f602746b9753b7a4f6c334d98b2711af0c", "patch": "@@ -1362,9 +1362,10 @@ gfc_get_symbol_decl (gfc_symbol * sym)\n \n   if (sym->attr.flavor == FL_PROCEDURE)\n     {\n-      /* Catch function declarations. Only used for actual parameters,\n+      /* Catch functions. Only used for actual parameters,\n \t procedure pointers and procptr initialization targets.  */\n-      if (sym->attr.external || sym->attr.use_assoc || sym->attr.intrinsic)\n+      if (sym->attr.use_assoc || sym->attr.intrinsic\n+\t  || sym->attr.if_source != IFSRC_DECL)\n \t{\n \t  decl = gfc_get_extern_function_decl (sym);\n \t  gfc_set_decl_location (decl, &sym->declared_at);"}, {"sha": "780614cc79b8d45a2d480c87971f021f24b53942", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab1668f602746b9753b7a4f6c334d98b2711af0c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab1668f602746b9753b7a4f6c334d98b2711af0c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ab1668f602746b9753b7a4f6c334d98b2711af0c", "patch": "@@ -1,3 +1,9 @@\n+2014-02-18  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/49397\n+\t* gfortran.dg/proc_ptr_45.f90: New.\n+\t* gfortran.dg/proc_ptr_46.f90: New.\n+\n 2014-02-18  Adam Butcher  <adam@jessamine.co.uk>\n \n \tPR c++/60190"}]}