{"sha": "f9af39d0c72be25ea8f42623120bfcd7b784a70e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjlhZjM5ZDBjNzJiZTI1ZWE4ZjQyNjIzMTIwYmZjZDdiNzg0YTcwZQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2003-11-13T14:05:55Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "2003-11-13T14:05:55Z"}, "message": "combine.c (distribute_notes): When re-distributing the notes from an insn we are about to delete...\n\n* combine.c (distribute_notes): When re-distributing the notes from\nan insn we are about to delete, ensure we can't end up with a cyclic\nlist of notes.\n\nFrom-SVN: r73547", "tree": {"sha": "f526b7583f5b27a5447dde025ecd1db4ce03f82a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f526b7583f5b27a5447dde025ecd1db4ce03f82a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f9af39d0c72be25ea8f42623120bfcd7b784a70e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9af39d0c72be25ea8f42623120bfcd7b784a70e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9af39d0c72be25ea8f42623120bfcd7b784a70e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9af39d0c72be25ea8f42623120bfcd7b784a70e/comments", "author": null, "committer": null, "parents": [{"sha": "650dc9b332b0515695e8849de45ac276b9efd925", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/650dc9b332b0515695e8849de45ac276b9efd925", "html_url": "https://github.com/Rust-GCC/gccrs/commit/650dc9b332b0515695e8849de45ac276b9efd925"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "019985241dfc9f4511cca71679af1cc059752ec5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f9af39d0c72be25ea8f42623120bfcd7b784a70e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f9af39d0c72be25ea8f42623120bfcd7b784a70e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f9af39d0c72be25ea8f42623120bfcd7b784a70e", "patch": "@@ -1,3 +1,9 @@\n+2003-11-13  Richard Earnshaw  <rearnsha@arm.com>\n+\n+\t* combine.c (distribute_notes): When re-distributing the notes from\n+\tan insn we are about to delete, ensure we can't end up with a cyclic\n+\tlist of notes.\n+\n 2003-11-13  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \tPR optimization/12926"}, {"sha": "0fbaeba9e72350586a55a8872a28bf3205f89675", "filename": "gcc/combine.c", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f9af39d0c72be25ea8f42623120bfcd7b784a70e/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f9af39d0c72be25ea8f42623120bfcd7b784a70e/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=f9af39d0c72be25ea8f42623120bfcd7b784a70e", "patch": "@@ -12702,11 +12702,12 @@ distribute_notes (rtx notes, rtx from_insn, rtx i3, rtx i2)\n \t\t\t     This might delete other dead insns recursively.\n \t\t\t     First set the pattern to something that won't use\n \t\t\t     any register.  */\n+\t\t\t  rtx old_notes = REG_NOTES (tem);\n \n \t\t\t  PATTERN (tem) = pc_rtx;\n+\t\t\t  REG_NOTES (tem) = NULL;\n \n-\t\t\t  distribute_notes (REG_NOTES (tem), tem, tem,\n-\t\t\t\t\t    NULL_RTX);\n+\t\t\t  distribute_notes (old_notes, tem, tem, NULL_RTX);\n \t\t\t  distribute_links (LOG_LINKS (tem));\n \n \t\t\t  PUT_CODE (tem, NOTE);\n@@ -12718,10 +12719,11 @@ distribute_notes (rtx notes, rtx from_insn, rtx i3, rtx i2)\n \t\t\t  if (cc0_setter)\n \t\t\t    {\n \t\t\t      PATTERN (cc0_setter) = pc_rtx;\n+\t\t\t      old_notes = REG_NOTES (cc0_setter);\n+\t\t\t      REG_NOTES (cc0_setter) = NULL;\n \n-\t\t\t      distribute_notes (REG_NOTES (cc0_setter),\n-\t\t\t\t\t\tcc0_setter, cc0_setter,\n-\t\t\t\t\t\tNULL_RTX);\n+\t\t\t      distribute_notes (old_notes, cc0_setter,\n+\t\t\t\t\t\tcc0_setter, NULL_RTX);\n \t\t\t      distribute_links (LOG_LINKS (cc0_setter));\n \n \t\t\t      PUT_CODE (cc0_setter, NOTE);"}]}