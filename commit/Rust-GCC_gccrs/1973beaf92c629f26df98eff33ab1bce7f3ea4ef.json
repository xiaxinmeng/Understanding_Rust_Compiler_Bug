{"sha": "1973beaf92c629f26df98eff33ab1bce7f3ea4ef", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTk3M2JlYWY5MmM2MjlmMjZkZjk4ZWZmMzNhYjFiY2U3ZjNlYTRlZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-03-15T23:24:15Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-03-15T23:24:15Z"}, "message": "testsuite: Fix up target selector syntax errors in modules/builtin-3*.C [PR99601]\n\nWithout this patch I'm seeing:\nERROR: tcl error sourcing /home/jakub/src/gcc/gcc/testsuite/g++.dg/modules/modules.exp.\nERROR: unmatched open brace in list\n    while executing\n\"foreach op $tmp {\n        switch [lindex $op 0] {\n            \"dg-options\" {\n                set std_prefix \"-std=gnu++\"\n                if { [string match \"*-std=*\" [lindex $op 2]] } {\n                    ...\"\n    (procedure \"module-init\" line 7)\n    invoked from within\n\"module-init $src\"\n    invoked from within\n\"if [runtest_file_p $runtests $src] {\n        set tests [lsort [find [file dirname $src]  [regsub {_a.[CHX]$} [file tail $src] {_[a-z].[CHX]}]]]\n\n        set std_lis...\"\n    (\"foreach\" body line 3)\n    invoked from within\n\"foreach src [lsort [find $srcdir/$subdir {*_a.[CHX}]] {\n    # use the FOO_a.C name as the parallelization key\n    if [runtest_file_p $runtests $src] {...\"\n    (file \"/home/jakub/src/gcc/gcc/testsuite/g++.dg/modules/modules.exp\" line 304)\n    invoked from within\n\"source /home/jakub/src/gcc/gcc/testsuite/g++.dg/modules/modules.exp\"\n    (\"uplevel\" body line 1)\n    invoked from within\n\"uplevel #0 source /home/jakub/src/gcc/gcc/testsuite/g++.dg/modules/modules.exp\"\n    invoked from within\n\"catch \"uplevel #0 source $test_file_name\"\"\n\n2021-03-16  Jakub Jelinek  <jakub@redhat.com>\n\n\tPR c++/99601\n\t* g++.dg/modules/builtin-3_a.C: Fix target selector syntax errors.\n\t* g++.dg/modules/builtin-3_b.C: Likewise.", "tree": {"sha": "f2242cdb4dfbc05685b92cc45c47209a75307394", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f2242cdb4dfbc05685b92cc45c47209a75307394"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1973beaf92c629f26df98eff33ab1bce7f3ea4ef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1973beaf92c629f26df98eff33ab1bce7f3ea4ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1973beaf92c629f26df98eff33ab1bce7f3ea4ef", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1973beaf92c629f26df98eff33ab1bce7f3ea4ef/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a5bcac339c5b166bc1a51c38226a8dc5e6484ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a5bcac339c5b166bc1a51c38226a8dc5e6484ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a5bcac339c5b166bc1a51c38226a8dc5e6484ca"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "fb7da6175c0c05807bd6e01bf99ea01d30452601", "filename": "gcc/testsuite/g++.dg/modules/builtin-3_a.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1973beaf92c629f26df98eff33ab1bce7f3ea4ef/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_a.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1973beaf92c629f26df98eff33ab1bce7f3ea4ef/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_a.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_a.C?ref=1973beaf92c629f26df98eff33ab1bce7f3ea4ef", "patch": "@@ -30,8 +30,8 @@ export inline int count (int a, ...)\n // The implementation details of va_list's are target-specific.\n // Usually one of two patterns though\n // { dg-final { scan-lang-dump-not { Cluster members:\\n  \\[0\\]=decl declaration '::__builtin_va_list'\\n  \\[1\\]=binding '::__builtin_va_list'\\n} module { target i?86-*-linux* x86_64-*-linux* } } }\n-// { dg-final { scan-lang-dump {Wrote GMF:-[0-9]* type_decl:'::__builtin_va_list'@builtins} module { { target x86_64-*-linux* i>86-*-linux* } && lp64 } }\n-// { dg-final { scan-lang-dump {Writing:-[0-9]*'s named merge key \\(decl\\) type_decl:'::__builtin_va_list'} module { target { x86_64-*-linux* i?86-*-linux* } && lp64 } } }\n+// { dg-final { scan-lang-dump {Wrote GMF:-[0-9]* type_decl:'::__builtin_va_list'@builtins} module { target { { x86_64-*-linux* i?86-*-linux* } && lp64 } } } }\n+// { dg-final { scan-lang-dump {Writing:-[0-9]*'s named merge key \\(decl\\) type_decl:'::__builtin_va_list'} module { target { { x86_64-*-linux* i?86-*-linux* } && lp64 } } } }\n \n // { dg-final { scan-lang-dump {Writing:-1's named merge key \\(decl\\) type_decl:'::__gnuc_va_list'} module { target i?86-*-linux* *-*-darwin* } } }\n // { dg-final { scan-lang-dump {Wrote GMF:-3 type_decl:'::__gnuc_va_list'@builtins} module { target i?86-*-linux* *-*-darwin* } } }"}, {"sha": "e0e630656d396d196344e93403a0f0203a315682", "filename": "gcc/testsuite/g++.dg/modules/builtin-3_b.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1973beaf92c629f26df98eff33ab1bce7f3ea4ef/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_b.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1973beaf92c629f26df98eff33ab1bce7f3ea4ef/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_b.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_b.C?ref=1973beaf92c629f26df98eff33ab1bce7f3ea4ef", "patch": "@@ -8,6 +8,6 @@ int main ()\n }\n \n // { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(matched\\) function_decl:'::__builtin_strlen'} module } }\n-// { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(matched\\) type_decl:'::__builtin_va_list'} module { target { { x86_64-*-linux* i?86-*-linux* } && lp64 } } }\n+// { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(matched\\) type_decl:'::__builtin_va_list'} module { target { { x86_64-*-linux* i?86-*-linux* } && lp64 } } } }\n // { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(new\\) type_decl:'::va_list'} module } }\n // { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(new\\) type_decl:'::__gnuc_va_list'} module } }"}]}