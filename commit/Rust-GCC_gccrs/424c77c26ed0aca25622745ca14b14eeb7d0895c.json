{"sha": "424c77c26ed0aca25622745ca14b14eeb7d0895c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDI0Yzc3YzI2ZWQwYWNhMjU2MjI3NDVjYTE0YjE0ZWViN2QwODk1Yw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-12-09T19:35:18Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-12-09T19:35:18Z"}, "message": "re PR target/72742 (ICE in extract_insn, at recog.c:2309 (error: unrecognizable insn) w/ -Os -mlra)\n\n\tPR target/72742\n\t* config/rs6000/rs6000.md (*and<mode>3_imm_mask_dot,\n\t*and<mode>3_imm_mask_dot2): Add rs6000_is_valid_and_mask to insn\n\tcondition.\n\n\t* gcc.c-torture/compile/pr72742.c: New test.\n\nFrom-SVN: r243500", "tree": {"sha": "3122adc716bcf35b6905fff72e68949231255209", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3122adc716bcf35b6905fff72e68949231255209"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/424c77c26ed0aca25622745ca14b14eeb7d0895c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/424c77c26ed0aca25622745ca14b14eeb7d0895c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/424c77c26ed0aca25622745ca14b14eeb7d0895c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/424c77c26ed0aca25622745ca14b14eeb7d0895c/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bb0f9c0249ee6a1b53e6ae8bdd9d3543991c7291", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb0f9c0249ee6a1b53e6ae8bdd9d3543991c7291", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb0f9c0249ee6a1b53e6ae8bdd9d3543991c7291"}], "stats": {"total": 97, "additions": 95, "deletions": 2}, "files": [{"sha": "b36a14c4b6e6bfbe17a29c763dbb280570ad9ad1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/424c77c26ed0aca25622745ca14b14eeb7d0895c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/424c77c26ed0aca25622745ca14b14eeb7d0895c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=424c77c26ed0aca25622745ca14b14eeb7d0895c", "patch": "@@ -1,3 +1,10 @@\n+2016-12-09  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/72742\n+\t* config/rs6000/rs6000.md (*and<mode>3_imm_mask_dot,\n+\t*and<mode>3_imm_mask_dot2): Add rs6000_is_valid_and_mask to insn\n+\tcondition.\n+\n 2016-12-09  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \tPR target/78683"}, {"sha": "e4660023cde0ebb392b83f2cabd28d41c4e75a15", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/424c77c26ed0aca25622745ca14b14eeb7d0895c/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/424c77c26ed0aca25622745ca14b14eeb7d0895c/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=424c77c26ed0aca25622745ca14b14eeb7d0895c", "patch": "@@ -3256,7 +3256,8 @@\n \t\t    (const_int 0)))\n    (clobber (match_scratch:GPR 0 \"=r,r\"))]\n   \"(<MODE>mode == Pmode || UINTVAL (operands[2]) <= 0x7fffffff)\n-   && rs6000_gen_cell_microcode\"\n+   && rs6000_gen_cell_microcode\n+   && rs6000_is_valid_and_mask (operands[2], <MODE>mode)\"\n   \"@\n    andi%e2. %0,%1,%u2\n    #\"\n@@ -3281,7 +3282,8 @@\n \t(and:GPR (match_dup 1)\n \t\t (match_dup 2)))]\n   \"(<MODE>mode == Pmode || UINTVAL (operands[2]) <= 0x7fffffff)\n-   && rs6000_gen_cell_microcode\"\n+   && rs6000_gen_cell_microcode\n+   && rs6000_is_valid_and_mask (operands[2], <MODE>mode)\"\n   \"@\n    andi%e2. %0,%1,%u2\n    #\""}, {"sha": "ac7abfd357b665244718a150cd6d7b4b09e53072", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/424c77c26ed0aca25622745ca14b14eeb7d0895c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/424c77c26ed0aca25622745ca14b14eeb7d0895c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=424c77c26ed0aca25622745ca14b14eeb7d0895c", "patch": "@@ -1,3 +1,8 @@\n+2016-12-09  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/72742\n+\t* gcc.c-torture/compile/pr72742.c: New test.\n+\n 2016-12-09  Martin Sebor  <msebor@redhat.com>\n \n \ton arm-unknown-linux-gnueabi (and likely other ILP32) targets."}, {"sha": "eedcd66b23281b7ecc03ea8c436201dadf803612", "filename": "gcc/testsuite/gcc.c-torture/compile/pr72742.c", "status": "added", "additions": 79, "deletions": 0, "changes": 79, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/424c77c26ed0aca25622745ca14b14eeb7d0895c/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr72742.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/424c77c26ed0aca25622745ca14b14eeb7d0895c/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr72742.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr72742.c?ref=424c77c26ed0aca25622745ca14b14eeb7d0895c", "patch": "@@ -0,0 +1,79 @@\n+/* PR target/72742 */\n+\n+int a, b;\n+unsigned short int c;\n+\n+void\n+foo (int x, unsigned short int *y)\n+{\n+  int fx;\n+ lab:\n+    {\n+      unsigned short int va;\n+      if (x != 0)\n+\t{\n+\t  c %= a < 0;\n+\t  while (c < 17)\n+\t    ++c;\n+\t  b &= fx;\n+\t  if ((a & (b != 0 ? *y : 0)) != 0)\n+\t    {\n+\t      va /= 3;\n+\t      a += (va != 0) ? (va = a) : 0;\n+\t    }\n+\t  a = va && a;\n+\t  goto lab;\n+\t  y = &va;\n+\t}\n+    }\n+}\n+\n+void\n+bar (int x, unsigned short int *y)\n+{\n+  int fx;\n+ lab:\n+    {\n+      unsigned short int va;\n+      if (x != 0)\n+\t{\n+\t  c %= a < 0;\n+\t  while (c < 17)\n+\t    ++c;\n+\t  b &= fx;\n+\t  if ((a & (b != 0 ? *y : 24)) != 0)\n+\t    {\n+\t      va /= 3;\n+\t      a += (va != 0) ? (va = a) : 0;\n+\t    }\n+\t  a = va && a;\n+\t  goto lab;\n+\t  y = &va;\n+\t}\n+    }\n+}\n+\n+void\n+baz (int x, unsigned short int *y)\n+{\n+  int fx;\n+ lab:\n+    {\n+      unsigned short int va;\n+      if (x != 0)\n+\t{\n+\t  c %= a < 0;\n+\t  while (c < 17)\n+\t    ++c;\n+\t  b &= fx;\n+\t  if ((a & (b != 0 ? *y : 25)) != 0)\n+\t    {\n+\t      va /= 3;\n+\t      a += (va != 0) ? (va = a) : 0;\n+\t    }\n+\t  a = va && a;\n+\t  goto lab;\n+\t  y = &va;\n+\t}\n+    }\n+}"}]}