{"sha": "61fb1f74fe6402b72c227181833337acc131f205", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjFmYjFmNzRmZTY0MDJiNzJjMjI3MTgxODMzMzM3YWNjMTMxZjIwNQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2015-11-12T07:31:47Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2015-11-12T07:31:47Z"}, "message": "gen-pass-instances.awk: Make print command clearer in handle_line\n\n2015-11-12  Tom de Vries  <tom@codesourcery.com>\n\n\t* gen-pass-instances.awk (handle_line): Print parentheses and pass_name\n\texplicitly.\n\nFrom-SVN: r230213", "tree": {"sha": "b477e8f7604b4abe2ada41fe4a9f6af9f5e801fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b477e8f7604b4abe2ada41fe4a9f6af9f5e801fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/61fb1f74fe6402b72c227181833337acc131f205", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61fb1f74fe6402b72c227181833337acc131f205", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61fb1f74fe6402b72c227181833337acc131f205", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61fb1f74fe6402b72c227181833337acc131f205/comments", "author": null, "committer": null, "parents": [{"sha": "504943f42f62f346f09a85e1f8cfaaf1eb734df9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/504943f42f62f346f09a85e1f8cfaaf1eb734df9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/504943f42f62f346f09a85e1f8cfaaf1eb734df9"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "9ab4c6ac458f7de18b4e65bb6d1de1b8d1b1d52f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61fb1f74fe6402b72c227181833337acc131f205/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61fb1f74fe6402b72c227181833337acc131f205/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=61fb1f74fe6402b72c227181833337acc131f205", "patch": "@@ -1,3 +1,8 @@\n+2015-11-12  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* gen-pass-instances.awk (handle_line): Print parentheses and pass_name\n+\texplicitly.\n+\n 2015-11-12  Tom de Vries  <tom@codesourcery.com>\n \n \t* gen-pass-instances.awk (handle_line): Add pass_num, prefix and postfix"}, {"sha": "b10c26a65c43772e4c1f6fdad442cec0321e5f2c", "filename": "gcc/gen-pass-instances.awk", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61fb1f74fe6402b72c227181833337acc131f205/gcc%2Fgen-pass-instances.awk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61fb1f74fe6402b72c227181833337acc131f205/gcc%2Fgen-pass-instances.awk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgen-pass-instances.awk?ref=61fb1f74fe6402b72c227181833337acc131f205", "patch": "@@ -54,18 +54,21 @@ function handle_line()\n \tlen_of_call = RLENGTH;\n \n \tlen_of_start = length(\"NEXT_PASS (\");\n+\tlen_of_open = length(\"(\");\n \tlen_of_close = length(\")\");\n \n \t# Find pass_name argument\n \tlen_of_pass_name = len_of_call - (len_of_start + len_of_close);\n \tpass_starts_at = where + len_of_start;\n \tpass_name = substr(line, pass_starts_at, len_of_pass_name);\n \n-\t# Find prefix (until and including pass_name)\n-\tprefix = substr(line, 1, pass_starts_at + len_of_pass_name - 1)\n+\t# Find call expression prefix (until and including called function)\n+\tprefix_len = pass_starts_at - 1 - len_of_open;\n+\tprefix = substr(line, 1, prefix_len);\n \n-\t# Find postfix (after pass_name)\n-\tpostfix = substr(line, pass_starts_at + len_of_pass_name)\n+\t# Find call expression postfix\n+\tpostfix_starts_at = pass_starts_at + len_of_pass_name + len_of_close;\n+\tpostfix = substr(line, postfix_starts_at);\n \n \t# Set pass_counts\n \tif (pass_name in pass_counts)\n@@ -76,7 +79,7 @@ function handle_line()\n \tpass_num = pass_counts[pass_name];\n \n \t# Print call expression with extra pass_num argument\n-\tprintf \"%s, %s%s\\n\", prefix, pass_num, postfix;\n+\tprintf \"%s(%s, %s)%s\\n\", prefix, pass_name, pass_num, postfix;\n }\n \n { handle_line() }"}]}