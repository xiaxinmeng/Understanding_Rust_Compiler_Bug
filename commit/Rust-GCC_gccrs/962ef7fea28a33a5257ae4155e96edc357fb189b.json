{"sha": "962ef7fea28a33a5257ae4155e96edc357fb189b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTYyZWY3ZmVhMjhhMzNhNTI1N2FlNDE1NWU5NmVkYzM1N2ZiMTg5Yg==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@kss-loka.si", "date": "2006-10-21T19:27:02Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2006-10-21T19:27:02Z"}, "message": "re PR rtl-optimization/19398 (secondary reloads don't consider \"m\" alternatives)\n\n        PR target/19398\n        * config/i386/i386.md (fix_trunc?f?i_sse): Add peephole2\n        patterns to use memory input operand in x87->mem->XMM\n        reload sequences.  Skip transformation for TARGET_K8.\n\nFrom-SVN: r117935", "tree": {"sha": "79e5ae1aa05bb1a968f851fbdeb6a3799ed0e071", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/79e5ae1aa05bb1a968f851fbdeb6a3799ed0e071"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/962ef7fea28a33a5257ae4155e96edc357fb189b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/962ef7fea28a33a5257ae4155e96edc357fb189b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/962ef7fea28a33a5257ae4155e96edc357fb189b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/962ef7fea28a33a5257ae4155e96edc357fb189b/comments", "author": null, "committer": null, "parents": [{"sha": "509a77dc9c03756c172ebc00937e984d7a2d08c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/509a77dc9c03756c172ebc00937e984d7a2d08c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/509a77dc9c03756c172ebc00937e984d7a2d08c4"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "8d33188ed5cf9b4b449630ea20416614147b3877", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/962ef7fea28a33a5257ae4155e96edc357fb189b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/962ef7fea28a33a5257ae4155e96edc357fb189b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=962ef7fea28a33a5257ae4155e96edc357fb189b", "patch": "@@ -1,3 +1,10 @@\n+2006-10-21  Uros Bizjak  <uros@kss-loka.si>\n+\n+\tPR target/19398\n+\t* config/i386/i386.md (fix_trunc?f?i_sse): Add peephole2\n+\tpatterns to use memory input operand in x87->mem->XMM\n+\treload sequences.  Skip transformation for TARGET_K8.\n+\n 2006-10-21  Uros Bizjak  <uros@kss-loka.si>\n \n \t* config/i386/i386.md (extendsfdf2, extendsfxf2, extenddfxf2): Do not"}, {"sha": "997f051414932075c258a843d3ae45656f080594", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/962ef7fea28a33a5257ae4155e96edc357fb189b/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/962ef7fea28a33a5257ae4155e96edc357fb189b/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=962ef7fea28a33a5257ae4155e96edc357fb189b", "patch": "@@ -4159,6 +4159,27 @@\n    (set_attr \"mode\" \"DF\")\n    (set_attr \"athlon_decode\" \"double,vector\")])\n \n+;; Shorten x87->SSE reload sequences of fix_trunc?f?i_sse patterns.\n+(define_peephole2\n+  [(set (match_operand:DF 0 \"register_operand\" \"\")\n+\t(match_operand:DF 1 \"memory_operand\" \"\"))\n+   (set (match_operand:SSEMODEI24 2 \"register_operand\" \"\")\n+\t(fix:SSEMODEI24 (match_dup 0)))]\n+  \"!TARGET_K8\n+   && peep2_reg_dead_p (2, operands[0])\"\n+  [(set (match_dup 2) (fix:SSEMODEI24 (match_dup 1)))]\n+  \"\")\n+\n+(define_peephole2\n+  [(set (match_operand:SF 0 \"register_operand\" \"\")\n+\t(match_operand:SF 1 \"memory_operand\" \"\"))\n+   (set (match_operand:SSEMODEI24 2 \"register_operand\" \"\")\n+\t(fix:SSEMODEI24 (match_dup 0)))]\n+  \"!TARGET_K8\n+   && peep2_reg_dead_p (2, operands[0])\"\n+  [(set (match_dup 2) (fix:SSEMODEI24 (match_dup 1)))]\n+  \"\")\n+\n ;; Avoid vector decoded forms of the instruction.\n (define_peephole2\n   [(match_scratch:DF 2 \"Y\")"}]}