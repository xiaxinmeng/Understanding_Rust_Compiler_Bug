{"sha": "76d0be83b2b60ed61c4c85e6579b2427e223a6af", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzZkMGJlODNiMmI2MGVkNjFjNGM4NWU2NTc5YjI0MjdlMjIzYTZhZg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2010-11-04T17:02:25Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2010-11-04T17:02:25Z"}, "message": "re PR libstdc++/46303 ('mutex' is not a member of 'std' failures in 30_threads/call_once/constexpr.cc, 30_threads/mutex/cons/constexpr.cc,  30_threads/once_flag/cons/constexpr.cc)\n\n2010-11-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR libstdc++/46303\n\t* testsuite/30_threads/call_once/constexpr.cc: Add missing dg-require\n\tdirectives.\n\t* testsuite/30_threads/mutex/cons/constexpr.cc: Likewise.\n\t* testsuite/30_threads/once_flag/cons/constexpr.cc: Likewise.\n\n2010-11-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* include/std/ratio (ratio_add, ratio_subtract, ratio_multiply,\n\tratio_divide): Declare the data members constexpr.\n\t* testsuite/20_util/ratio/requirements/constexpr_data.cc: Extend.\n\nFrom-SVN: r166319", "tree": {"sha": "515e5b111dc110843d4ae59d42bfc766d20c2889", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/515e5b111dc110843d4ae59d42bfc766d20c2889"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76d0be83b2b60ed61c4c85e6579b2427e223a6af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76d0be83b2b60ed61c4c85e6579b2427e223a6af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76d0be83b2b60ed61c4c85e6579b2427e223a6af", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76d0be83b2b60ed61c4c85e6579b2427e223a6af/comments", "author": null, "committer": null, "parents": [{"sha": "822a55a08e313229c340f6bf4b76c5f32b270d8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/822a55a08e313229c340f6bf4b76c5f32b270d8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/822a55a08e313229c340f6bf4b76c5f32b270d8e"}], "stats": {"total": 60, "additions": 43, "deletions": 17}, "files": [{"sha": "8ea46f0847d2e4a2fada6b0108d1806d99cf4577", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=76d0be83b2b60ed61c4c85e6579b2427e223a6af", "patch": "@@ -1,3 +1,17 @@\n+2010-11-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR libstdc++/46303\n+\t* testsuite/30_threads/call_once/constexpr.cc: Add missing dg-require\n+\tdirectives.\n+\t* testsuite/30_threads/mutex/cons/constexpr.cc: Likewise.\n+\t* testsuite/30_threads/once_flag/cons/constexpr.cc: Likewise.\n+\n+2010-11-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* include/std/ratio (ratio_add, ratio_subtract, ratio_multiply,\n+\tratio_divide): Declare the data members constexpr.\n+\t* testsuite/20_util/ratio/requirements/constexpr_data.cc: Extend.\n+\n 2010-11-03  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* include/std/tuple (tuple): Make default constructors constexpr."}, {"sha": "80c5d15e789ae4d7aed46966f033af3e2dbb89a6", "filename": "libstdc++-v3/include/std/ratio", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fratio", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fratio", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fratio?ref=76d0be83b2b60ed61c4c85e6579b2427e223a6af", "patch": "@@ -185,15 +185,15 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n           __safe_multiply<_R2::num, (_R1::den / __gcd)>::value>::value,\n         __safe_multiply<_R1::den, (_R2::den / __gcd)>::value> type;\n \n-      static const intmax_t num = type::num;\n-      static const intmax_t den = type::den;\n+      static constexpr intmax_t num = type::num;\n+      static constexpr intmax_t den = type::den;\n     };\n \n   template<typename _R1, typename _R2>\n-    const intmax_t ratio_add<_R1, _R2>::num;\n+    constexpr intmax_t ratio_add<_R1, _R2>::num;\n \n   template<typename _R1, typename _R2>\n-    const intmax_t ratio_add<_R1, _R2>::den;\n+    constexpr intmax_t ratio_add<_R1, _R2>::den;\n \n   /// ratio_subtract\n   template<typename _R1, typename _R2>\n@@ -203,15 +203,15 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n         _R1,\n         ratio<-_R2::num, _R2::den>>::type type;\n \n-      static const intmax_t num = type::num;\n-      static const intmax_t den = type::den;\n+      static constexpr intmax_t num = type::num;\n+      static constexpr intmax_t den = type::den;\n     };\n \n   template<typename _R1, typename _R2>\n-    const intmax_t ratio_subtract<_R1, _R2>::num;\n+    constexpr intmax_t ratio_subtract<_R1, _R2>::num;\n \n   template<typename _R1, typename _R2>\n-    const intmax_t ratio_subtract<_R1, _R2>::den;\n+    constexpr intmax_t ratio_subtract<_R1, _R2>::den;\n \n   /// ratio_multiply\n   template<typename _R1, typename _R2>\n@@ -230,15 +230,15 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n         __safe_multiply<(_R1::den / __gcd2),\n                         (_R2::den / __gcd1)>::value> type;\n \n-      static const intmax_t num = type::num;\n-      static const intmax_t den = type::den;\n+      static constexpr intmax_t num = type::num;\n+      static constexpr intmax_t den = type::den;\n     };\n \n   template<typename _R1, typename _R2>\n-    const intmax_t ratio_multiply<_R1, _R2>::num;\n+    constexpr intmax_t ratio_multiply<_R1, _R2>::num;\n \n   template<typename _R1, typename _R2>\n-    const intmax_t ratio_multiply<_R1, _R2>::den;\n+    constexpr intmax_t ratio_multiply<_R1, _R2>::den;\n \n   /// ratio_divide\n   template<typename _R1, typename _R2>\n@@ -250,15 +250,15 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n         _R1,\n         ratio<_R2::den, _R2::num>>::type type;\n \n-      static const intmax_t num = type::num;\n-      static const intmax_t den = type::den;\n+      static constexpr intmax_t num = type::num;\n+      static constexpr intmax_t den = type::den;\n     };\n \n   template<typename _R1, typename _R2>\n-    const intmax_t ratio_divide<_R1, _R2>::num;\n+    constexpr intmax_t ratio_divide<_R1, _R2>::num;\n \n   template<typename _R1, typename _R2>\n-    const intmax_t ratio_divide<_R1, _R2>::den;\n+    constexpr intmax_t ratio_divide<_R1, _R2>::den;\n \n   /// ratio_equal\n   template<typename _R1, typename _R2>"}, {"sha": "d3a1543deca296ede3386cfac31cce277ede4694", "filename": "libstdc++-v3/testsuite/20_util/ratio/requirements/constexpr_data.cc", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fratio%2Frequirements%2Fconstexpr_data.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fratio%2Frequirements%2Fconstexpr_data.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fratio%2Frequirements%2Fconstexpr_data.cc?ref=76d0be83b2b60ed61c4c85e6579b2427e223a6af", "patch": "@@ -49,6 +49,12 @@ namespace __gnu_test\n int main()\n {\n   __gnu_test::constexpr_member_data test;\n-  test.operator()<std::ratio<600, 900>>();\n+  typedef std::ratio<600, 900> R1;\n+  typedef std::ratio<700, 200> R2;\n+  test.operator()<R1>();\n+  test.operator()<std::ratio_add<R1, R2>>();\n+  test.operator()<std::ratio_subtract<R1, R2>>();\n+  test.operator()<std::ratio_multiply<R1, R2>>();\n+  test.operator()<std::ratio_divide<R1, R2>>();\n   return 0;\n }"}, {"sha": "56efa06146b0f0e281d82572327289140bc49ede", "filename": "libstdc++-v3/testsuite/30_threads/call_once/constexpr.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fcall_once%2Fconstexpr.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fcall_once%2Fconstexpr.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fcall_once%2Fconstexpr.cc?ref=76d0be83b2b60ed61c4c85e6579b2427e223a6af", "patch": "@@ -1,5 +1,7 @@\n // { dg-do compile }\n // { dg-options \"-std=gnu++0x\" }\n+// { dg-require-cstdint \"\" }\n+// { dg-require-gthreads \"\" }\n \n // Copyright (C) 2010 Free Software Foundation, Inc.\n //"}, {"sha": "56efa06146b0f0e281d82572327289140bc49ede", "filename": "libstdc++-v3/testsuite/30_threads/mutex/cons/constexpr.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fmutex%2Fcons%2Fconstexpr.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fmutex%2Fcons%2Fconstexpr.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fmutex%2Fcons%2Fconstexpr.cc?ref=76d0be83b2b60ed61c4c85e6579b2427e223a6af", "patch": "@@ -1,5 +1,7 @@\n // { dg-do compile }\n // { dg-options \"-std=gnu++0x\" }\n+// { dg-require-cstdint \"\" }\n+// { dg-require-gthreads \"\" }\n \n // Copyright (C) 2010 Free Software Foundation, Inc.\n //"}, {"sha": "4f238de9b3caa9652009edf19db1ee06295da6ad", "filename": "libstdc++-v3/testsuite/30_threads/once_flag/cons/constexpr.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fonce_flag%2Fcons%2Fconstexpr.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d0be83b2b60ed61c4c85e6579b2427e223a6af/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fonce_flag%2Fcons%2Fconstexpr.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fonce_flag%2Fcons%2Fconstexpr.cc?ref=76d0be83b2b60ed61c4c85e6579b2427e223a6af", "patch": "@@ -1,5 +1,7 @@\n // { dg-do compile }\n // { dg-options \"-std=gnu++0x\" }\n+// { dg-require-cstdint \"\" }\n+// { dg-require-gthreads \"\" }\n \n // Copyright (C) 2010 Free Software Foundation, Inc.\n //"}]}