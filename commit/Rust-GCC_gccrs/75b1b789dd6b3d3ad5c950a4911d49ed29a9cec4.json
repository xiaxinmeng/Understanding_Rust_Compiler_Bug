{"sha": "75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzViMWI3ODlkZDZiM2QzYWQ1Yzk1MGE0OTExZDQ5ZWQyOWE5Y2VjNA==", "commit": {"author": {"name": "Mike Stump", "email": "mrs@apple.com", "date": "2007-02-03T04:52:51Z"}, "committer": {"name": "Mike Stump", "email": "mrs@gcc.gnu.org", "date": "2007-02-03T04:52:51Z"}, "message": "darwin9.h (DARWIN_LINKER_GENERATES_ISLANDS): Add.\n\n\t* config/darwin9.h (DARWIN_LINKER_GENERATES_ISLANDS): Add.\n\t* config/rs6000/rs6000.c (DARWIN_GENERATE_ISLANDS): Add.\n\t(output_call): Use DARWIN_GENERATE_ISLANDS to decide when to\n\tgenerate a branch island.\nRadar 4967371\n\nFrom-SVN: r121534", "tree": {"sha": "54c17e9fc5a50d361ede340d400a56a854c64726", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/54c17e9fc5a50d361ede340d400a56a854c64726"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4/comments", "author": null, "committer": null, "parents": [{"sha": "da1f39e475bf2433e2ce1277c1015ad4ab3291e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da1f39e475bf2433e2ce1277c1015ad4ab3291e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da1f39e475bf2433e2ce1277c1015ad4ab3291e3"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "9ef2c72d73c4660ba68867f3d5b8e1736d199eab", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4", "patch": "@@ -1,3 +1,10 @@\n+2007-02-02  Mike Stump  <mrs@apple.com>\n+\n+\t* config/darwin9.h (DARWIN_LINKER_GENERATES_ISLANDS): Add.\n+\t* config/rs6000/rs6000.c (DARWIN_GENERATE_ISLANDS): Add.\n+\t(output_call): Use DARWIN_GENERATE_ISLANDS to decide when to\n+\tgenerate a branch island.\n+\n 2007-02-02  Bob Wilson  <bob.wilson@acm.org>\n \n \t* config/xtensa/xtensa.c (smalloffset_mem_p): Use BASE_REG_P."}, {"sha": "7431cfb1ed76faf89d6c78dc5707d6cc50e31075", "filename": "gcc/config/darwin9.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4/gcc%2Fconfig%2Fdarwin9.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4/gcc%2Fconfig%2Fdarwin9.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin9.h?ref=75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4", "patch": "@@ -17,3 +17,6 @@\n %{!fdump=*:%{!fsyntax-only:%{!c:%{!M:%{!MM:%{!E:%{!S:\\\n     %{.c|.cc|.C|.cpp|.c++|.CPP|.m|.mm: \\\n     %{g*:%{!gstabs*:%{!g0: dsymutil %{o*:%*}%{!o:a.out}}}}}}}}}}}}\"\n+\n+/* The linker can generate branch islands.  */\n+#define DARWIN_LINKER_GENERATES_ISLANDS 1"}, {"sha": "18c00e0fafaa80f86c1bf43c13d38b798641eb1b", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=75b1b789dd6b3d3ad5c950a4911d49ed29a9cec4", "patch": "@@ -797,7 +797,6 @@ static int rs6000_arg_partial_bytes (CUMULATIVE_ARGS *, enum machine_mode,\n static const char *invalid_arg_for_unprototyped_fn (tree, tree, tree);\n #if TARGET_MACHO\n static void macho_branch_islands (void);\n-static void add_compiler_branch_island (tree, tree, int);\n static int no_previous_def (tree function_name);\n static tree get_prev_label (tree function_name);\n static void rs6000_darwin_file_start (void);\n@@ -19076,6 +19075,14 @@ get_prev_label (tree function_name)\n   return 0;\n }\n \n+#ifndef DARWIN_LINKER_GENERATES_ISLANDS\n+#define DARWIN_LINKER_GENERATES_ISLANDS 0\n+#endif\n+\n+/* KEXTs still need branch islands.  */\n+#define DARWIN_GENERATE_ISLANDS (!DARWIN_LINKER_GENERATES_ISLANDS \\\n+\t\t\t\t || flag_mkernel || flag_apple_kext)\n+\n /* INSN is either a function call or a millicode call.  It may have an\n    unconditional jump in its delay slot.\n \n@@ -19086,7 +19093,8 @@ output_call (rtx insn, rtx *operands, int dest_operand_number,\n \t     int cookie_operand_number)\n {\n   static char buf[256];\n-  if (GET_CODE (operands[dest_operand_number]) == SYMBOL_REF\n+  if (DARWIN_GENERATE_ISLANDS\n+      && GET_CODE (operands[dest_operand_number]) == SYMBOL_REF\n       && (INTVAL (operands[cookie_operand_number]) & CALL_LONG))\n     {\n       tree labelname;"}]}