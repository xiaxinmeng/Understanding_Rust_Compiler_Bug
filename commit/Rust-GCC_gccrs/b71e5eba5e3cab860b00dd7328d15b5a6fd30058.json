{"sha": "b71e5eba5e3cab860b00dd7328d15b5a6fd30058", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjcxZTVlYmE1ZTNjYWI4NjBiMDBkZDczMjhkMTViNWE2ZmQzMDA1OA==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2010-11-05T18:33:19Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2010-11-05T18:33:19Z"}, "message": "config.gcc: Support --with-fpmath=avx for x86.\n\n\t* config.gcc: Support --with-fpmath=avx for x86.\n\t* config/i386/avxmath.h: New.\n\t* doc/install.texi (--with-fpmath=): Document --with-fpmath=avx.\n\nFrom-SVN: r166369", "tree": {"sha": "068a1655bce12e002026f402e04d62358b25dd08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/068a1655bce12e002026f402e04d62358b25dd08"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b71e5eba5e3cab860b00dd7328d15b5a6fd30058", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b71e5eba5e3cab860b00dd7328d15b5a6fd30058", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b71e5eba5e3cab860b00dd7328d15b5a6fd30058", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b71e5eba5e3cab860b00dd7328d15b5a6fd30058/comments", "author": null, "committer": null, "parents": [{"sha": "611c64f0699940b9604b4ea719daadbdae79654c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/611c64f0699940b9604b4ea719daadbdae79654c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/611c64f0699940b9604b4ea719daadbdae79654c"}], "stats": {"total": 97, "additions": 65, "deletions": 32}, "files": [{"sha": "1dc12a18ba4aae6bd9fe0e129e85c9cd1ef82313", "filename": "gcc/ChangeLog", "status": "modified", "additions": 17, "deletions": 17, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b71e5eba5e3cab860b00dd7328d15b5a6fd30058/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b71e5eba5e3cab860b00dd7328d15b5a6fd30058/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b71e5eba5e3cab860b00dd7328d15b5a6fd30058", "patch": "@@ -1,7 +1,12 @@\n+2010-11-05  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* config.gcc: Support --with-fpmath=avx for x86.\n+\t* config/i386/avxmath.h: New.\n+\t* doc/install.texi (--with-fpmath=): Document --with-fpmath=avx.\n+\n 2010-11-05  Ian Lance Taylor  <iant@google.com>\n \n-\t* tree.h (struct tree_type): Don't use descbits in GTY\n-\tannotation.\n+\t* tree.h (struct tree_type): Don't use descbits in GTY annotation.\n \t* gengtype.c (walk_type): Don't recognize descbits option.\n \n 2010-11-05  Joseph Myers  <joseph@codesourcery.com>\n@@ -15,8 +20,7 @@\n \t* opts-common.c: Update comment on tm.h include.\n \t(decode_cmdline_option): Handle options with multiple arguments.\n \tDon't check WORD_SWITCH_TAKES_ARG for unknown options.\n-\t* opts.h (CL_SEPARATE_NARGS_SHIFT, CL_SEPARATE_NARGS_MASK):\n-\tDefine.\n+\t* opts.h (CL_SEPARATE_NARGS_SHIFT, CL_SEPARATE_NARGS_MASK): Define.\n \t(CL_PARAMS, CL_WARNING, CL_OPTIMIZATION, CL_DRIVER, CL_TARGET,\n \tCL_COMMON): Update values.\n \t* system.h (WORD_SWITCH_TAKES_ARG): Poison.\n@@ -79,8 +83,8 @@\n 2010-11-04  Paul Koning  <ni1d@arrl.net>\n \n \t* doc/md.texi (Machine Constraints): Correct formatting in PDP-11\n-\tconstraints. \n-\t\n+\tconstraints.\n+\n 2010-11-04  Chao-ying Fu  <fu@mips.com>\n \n \t* configure.ac: Test assembler support for DSP Rev1 mult.\n@@ -104,8 +108,7 @@\n \tUse (!TARGET_FIX_R4000 || ISA_HAS_DSP), instead of\n \t(!TARGET_FIX_R4000 && !ISA_HAS_DSPR2).\n \tEmit the accumulator destination when ISA_HAS_DSP_MULT.\n-\t(<u>msubsidi4): Add comments.\n-\tTest ISA_HAS_DSP.\n+\t(<u>msubsidi4): Add comments.  Test ISA_HAS_DSP.\n \tEmit the accumulator destination when ISA_HAS_DSP_MULT.\n \t(<u>maddsidi4): Likewise.\n \t* doc/extend.texi (MIPS DSP Built-in Functions): Move madd, maddu,\n@@ -114,7 +117,7 @@\n 2010-11-04  Paul Koning  <ni1d@arrl.net>\n \n \t* doc/md.texi (Machine Constraints): Add PDP-11 constraints.\n-\t\n+\n 2010-11-04  Paul Koning  <ni1d@arrl.net>\n \n \t* doc/invoke.texi (PDP-11 Options): Delete -msplit, -mno-split.\n@@ -249,7 +252,7 @@\n \tMINUS_EXPR only if the first operand is reduction operand.\n \n 2010-11-04  Richard Guenther  <rguenther@suse.de>\n-\tRichard Henderson  <rth@redhat.com>\n+\t    Richard Henderson  <rth@redhat.com>\n \n \t* tree.def (FMA_EXPR): New tree code.\n \t* expr.c (expand_expr_real_2): Add FMA_EXPR expansion code.\n@@ -285,7 +288,7 @@\n \toperations.\n \n 2010-11-04  Artjoms Sinkarovs <artyom.shinakroff@gmail.com>\n-\tRichard Guenther  <rguenther@suse.de>\n+\t    Richard Guenther  <rguenther@suse.de>\n \n \t* passes.c (init_optimization_passes): Move veclower after SSA.\n \t* tree-vect-generic.c (uniform_vector_p): New function.\n@@ -306,8 +309,7 @@\n \n 2010-11-03  Kaz Kojima  <kkojima@gcc.gnu.org>\n \n-\t* config.gcc (sh64*) <tm_file>: Add newlib-stdint.h for\n-\tnewlib targets.\n+\t* config.gcc (sh64*) <tm_file>: Add newlib-stdint.h for newlib targets.\n \n 2010-11-03  Kaz Kojima  <kkojima@gcc.gnu.org>\n \n@@ -516,8 +518,7 @@\n \n 2010-11-02  H.J. Lu  <hongjiu.lu@intel.com>\n \n-\t* config/i386/i386-protos.h (ix86_split_call_pop_vzeroupper):\n-\tRemoved.\n+\t* config/i386/i386-protos.h (ix86_split_call_pop_vzeroupper): Removed.\n \t* config/i386/i386.c (ix86_split_call_pop_vzeroupper): Likewise.\n \n \t* config/i386/i386.md (*call_pop_0_vzeroupper): Use parallel\n@@ -531,8 +532,7 @@\n \n 2010-11-02  H.J. Lu  <hongjiu.lu@intel.com>\n \n-\t* config/i386/i386.md (*sibcall_1_rex64_vzeroupper): Fix a\n-\ttypo.\n+\t* config/i386/i386.md (*sibcall_1_rex64_vzeroupper): Fix a typo.\n \n 2010-11-02  Eric Botcazou  <ebotcazou@adacore.com>\n "}, {"sha": "95ca6505ba3a116aa8565263f1fceec36e446a09", "filename": "gcc/config.gcc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b71e5eba5e3cab860b00dd7328d15b5a6fd30058/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b71e5eba5e3cab860b00dd7328d15b5a6fd30058/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=b71e5eba5e3cab860b00dd7328d15b5a6fd30058", "patch": "@@ -2994,6 +2994,9 @@ if test x$with_fpmath != x; then\n   case ${target} in\n     i[34567]86-*-* | x86_64-*-*)\n       case ${with_fpmath} in\n+      avx)\n+\ttm_file=\"${tm_file} i386/avxmath.h\"\n+\t;;\n       sse)\n \ttm_file=\"${tm_file} i386/ssemath.h\"\n \t;;"}, {"sha": "997842b1085ee22cb8bb88b41eb46529dc9ea2bc", "filename": "gcc/config/i386/avxmath.h", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b71e5eba5e3cab860b00dd7328d15b5a6fd30058/gcc%2Fconfig%2Fi386%2Favxmath.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b71e5eba5e3cab860b00dd7328d15b5a6fd30058/gcc%2Fconfig%2Fi386%2Favxmath.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Favxmath.h?ref=b71e5eba5e3cab860b00dd7328d15b5a6fd30058", "patch": "@@ -0,0 +1,29 @@\n+/* Copyright (C) 2010\n+   Free Software Foundation, Inc.\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 3, or (at your option)\n+any later version.\n+\n+GCC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GCC; see the file COPYING3.  If not see\n+<http://www.gnu.org/licenses/>.  */\n+\n+#undef TARGET_FPMATH_DEFAULT\n+#define TARGET_FPMATH_DEFAULT FPMATH_SSE\n+\n+#undef TARGET_SUBTARGET_ISA_DEFAULT\n+#define TARGET_SUBTARGET_ISA_DEFAULT\t\t\t\t\t\\\n+  (OPTION_MASK_ISA_MMX | OPTION_MASK_ISA_SSE | OPTION_MASK_ISA_SSE2\t\\\n+   | OPTION_MASK_ISA_SSE3 | OPTION_MASK_ISA_SSSE3\t\t\t\\\n+   | OPTION_MASK_ISA_SSE4_1 | OPTION_MASK_ISA_SSE4_2\t\t\t\\\n+   | OPTION_MASK_ISA_AVX)\n+"}, {"sha": "1c9d4630513c2b3c40a074532cfdb8019daa7b86", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b71e5eba5e3cab860b00dd7328d15b5a6fd30058/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b71e5eba5e3cab860b00dd7328d15b5a6fd30058/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=b71e5eba5e3cab860b00dd7328d15b5a6fd30058", "patch": "@@ -1166,10 +1166,11 @@ of the arguments depend on the target.\n Specify if the compiler should default to @option{-marm} or @option{-mthumb}.\n This option is only supported on ARM targets.\n \n-@item --with-fpmath=sse\n-Specify if the compiler should default to @option{-msse2} and\n-@option{-mfpmath=sse}.  This option is only supported on i386 and\n-x86-64 targets.\n+@item --with-fpmath=@var{isa}\n+This options sets @option{-mfpmath=sse} by default and specifies the default\n+ISA for floating-point arithmetics.  You can select either @samp{sse} which\n+enables @option{-msse2} or @samp{avx} which enables @option{-mavx} by default.\n+This option is only supported on i386 and x86-64 targets.\n \n @item --with-divide=@var{type}\n Specify how the compiler should generate code for checking for"}, {"sha": "4c6ac67e5c2ec6e1449d170257238e2f88e2aacb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b71e5eba5e3cab860b00dd7328d15b5a6fd30058/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b71e5eba5e3cab860b00dd7328d15b5a6fd30058/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b71e5eba5e3cab860b00dd7328d15b5a6fd30058", "patch": "@@ -20,7 +20,7 @@\n 2010-11-05  Iain Sandoe  <iains@gcc.gnu.org>\n \n \t* objc.dg/torture/forward-1.m: Restore for m32 NeXT.\n-\t* objc.dg/demangle-1.m: Remove NeXT ifdef around +initialize \n+\t* objc.dg/demangle-1.m: Remove NeXT ifdef around +initialize\n \tdeclaration and implementation.\n \t* objc.dg/property/dotsyntax-3.m: XFAIL NeXT m64 run.\n \t* obj-c++.dg/property/at-property-13.mm: Likewise.\n@@ -59,7 +59,7 @@\n \n 2010-11-04  Bud Davis\t<jimmied@smu.edu>\n \n-\t* gfortran.dg/intrinsic_numeric_arg.f: Add test to check \n+\t* gfortran.dg/intrinsic_numeric_arg.f: Add test to check\n \terror message.\n \n 2010-11-04  Chao-ying Fu  <fu@mips.com>\n@@ -74,12 +74,12 @@\n \t* objc.dg/property/dotsyntax-3.m: New.\n \t* objc.dg/property/dotsyntax-4.m: New.\n \t* obj-c++.dg/property/dotsyntax-3.mm: New.\n-\t* obj-c++.dg/property/dotsyntax-4.mm: New.\t\n+\t* obj-c++.dg/property/dotsyntax-4.mm: New.\n \n \t* objc.dg/fobjc-std-1.m: Added test for warnings when the\n \tObjective-C 2.0 dot-syntax is used with class names.\n \t* obj-c++.dg/fobjc-std-1.mm: Same change.\n-\t\n+\n 2010-11-04  Pat Haugen  <pthaugen@us.ibm.com>\n \n \t* gcc.target/powerpc/loop_align.c: New.\n@@ -100,7 +100,7 @@\n \n \t* objc.dg/property/property-2.m: Deleted.\n \t* objc.dg/property/property-3.m: Deleted.\n-\t\n+\n 2010-11-04  Iain Sandoe  <iains@gcc.gnu.org>\n \n \t* objc-obj-c++-shared/next-mapping.h: Ensure a GNU-compatible nil is\n@@ -122,14 +122,14 @@\n \t* objc.dg/property/fsf-property-method-access.m: Likewise.\n \t* objc.dg/torture/strings/const-cfstring-1.m: Cater for bogus Darwin10\n \tlinker warning.\n-\t* objc.dg/encode-7-next.m: Use next-mapping.h, ignore deprecation \n+\t* objc.dg/encode-7-next.m: Use next-mapping.h, ignore deprecation\n \twarnings.\n-\t* objc.dg/encode-7-next-64bit.m: Use next-mapping.h, ignore \n+\t* objc.dg/encode-7-next-64bit.m: Use next-mapping.h, ignore\n \tdeprecation warnings.  Use Object1 implementation.\n \t* objc.dg/demangle-1.m: Provide +initialize.  XFAIL m64 NeXT run.\n \t* objc/execute/forward-1.m: Remove.\n \t* objc/execute/forward-1.x: Remove.\n-\t\n+\n 2010-11-04  Jason Merrill  <jason@redhat.com>\n \n \t* g++.dg/cpp0x/constexpr-access.C: New.\n@@ -183,12 +183,12 @@\n \t* gcc.dg/lto/pr28706_1.c: ... split.\n \n 2010-11-04  Richard Guenther  <rguenther@suse.de>\n-\tRichard Henderson  <rth@redhat.com>\n+\t    Richard Henderson  <rth@redhat.com>\n \n \t* gcc.target/i386/fma4-vector-2.c: New testcase.\n \n 2010-11-04  Artjoms Sinkarovs <artyom.shinakroff@gmail.com>\n-\tRichard Guenther  <rguenther@suse.de>\n+\t    Richard Guenther  <rguenther@suse.de>\n \n \t* gcc.dg/vec-scal-opt.c: New testcase.\n \t* gcc.dg/vec-scal-opt1.c: New testcase.\n@@ -1111,7 +1111,7 @@\n \t* gfortran.dg/proc_ptr_comp_25.f90: New.\n \n 2010-10-21  Richard Guenther  <rguenther@suse.de>\n-\tMichael Matz  <matz@suse.de>\n+\t    Michael Matz  <matz@suse.de>\n \n \tPR tree-optimization/45764\n \t* gcc.dg/torture/pr45764.c: New testcase."}]}