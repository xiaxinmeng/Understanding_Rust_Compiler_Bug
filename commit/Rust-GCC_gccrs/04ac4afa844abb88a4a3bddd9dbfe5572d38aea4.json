{"sha": "04ac4afa844abb88a4a3bddd9dbfe5572d38aea4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDRhYzRhZmE4NDRhYmI4OGE0YTNiZGRkOWRiZmU1NTcyZDM4YWVhNA==", "commit": {"author": {"name": "Bin Cheng", "email": "bin.cheng@arm.com", "date": "2016-07-20T08:31:35Z"}, "committer": {"name": "Bin Cheng", "email": "amker@gcc.gnu.org", "date": "2016-07-20T08:31:35Z"}, "message": "re PR tree-optimization/71503 (gcc ICE at -O3 on valid code on x86_64-linux-gnu in \"gen_phi_arg_condition\")\n\n\tPR tree-optimization/71503\n\tPR tree-optimization/71683\n\t* tree-if-conv.c (gen_phi_arg_condition): Record true predicate\n\tand break.\n\n\tgcc/testsuite\n\tPR tree-optimization/71503\n\tPR tree-optimization/71683\n\t* gcc.dg/tree-ssa/ifc-pr71503.c: New test.\n\t* gcc.dg/tree-ssa/ifc-pr71683.c: New test.\n\nFrom-SVN: r238512", "tree": {"sha": "b72f80f3e28f1539a209eb9e94c9ae7de19f7c60", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b72f80f3e28f1539a209eb9e94c9ae7de19f7c60"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4/comments", "author": null, "committer": null, "parents": [{"sha": "21f8810377c9b62127df989e0d06b72eb0ae42d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21f8810377c9b62127df989e0d06b72eb0ae42d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21f8810377c9b62127df989e0d06b72eb0ae42d8"}], "stats": {"total": 62, "additions": 61, "deletions": 1}, "files": [{"sha": "0b2eac8bccf14a12e9bfea75b5429769127d0d5c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=04ac4afa844abb88a4a3bddd9dbfe5572d38aea4", "patch": "@@ -1,3 +1,10 @@\n+2016-07-20  Bin Cheng  <bin.cheng@arm.com>\n+\n+\tPR tree-optimization/71503\n+\tPR tree-optimization/71683\n+\t* tree-if-conv.c (gen_phi_arg_condition): Record true predicate\n+\tand break.\n+\n 2016-07-20  Martin Liska  <mliska@suse.cz>\n \n \t* doc/invoke.texi (-fipa-ra): Document when the option is"}, {"sha": "e631db950576b6da41618dd978a8d5ec40f143ed", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=04ac4afa844abb88a4a3bddd9dbfe5572d38aea4", "patch": "@@ -1,3 +1,10 @@\n+2016-07-20  Bin Cheng  <bin.cheng@arm.com>\n+\n+\tPR tree-optimization/71503\n+\tPR tree-optimization/71683\n+\t* gcc.dg/tree-ssa/ifc-pr71503.c: New test.\n+\t* gcc.dg/tree-ssa/ifc-pr71683.c: New test.\n+\n 2016-07-20  Martin Liska  <mliska@suse.cz>\n \n \t* gcc.dg/plugin/plugin.exp: Remove sreal test."}, {"sha": "5a90abfd10ed7b282195a65aff01796f368dfa8b", "filename": "gcc/testsuite/gcc.dg/tree-ssa/ifc-pr71503.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fifc-pr71503.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fifc-pr71503.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fifc-pr71503.c?ref=04ac4afa844abb88a4a3bddd9dbfe5572d38aea4", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-Ofast\" { target *-*-* } } */\n+\n+int a, b;\n+unsigned long d;\n+void fn1() {\n+  unsigned long *h = &d;\n+line1 : {\n+  int i = 4;\n+  for (; b; i++) {\n+    d = ((d + 6 ?: *h) ? a : 7) && (i &= 0 >= b);\n+    b += a;\n+  }\n+}\n+  h = 0;\n+  for (; *h;)\n+    goto line1;\n+}"}, {"sha": "851be37e48c361dd5cde9aa055f6ad434bb1ec8c", "filename": "gcc/testsuite/gcc.dg/tree-ssa/ifc-pr71683.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fifc-pr71683.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fifc-pr71683.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fifc-pr71683.c?ref=04ac4afa844abb88a4a3bddd9dbfe5572d38aea4", "patch": "@@ -0,0 +1,25 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-Ofast\" { target *-*-* } } */\n+\n+short unsigned int ve;\n+\n+void\n+u1 (void)\n+{\n+  int oq = 0;\n+\n+  while (ve != 0)\n+    {\n+      int j4, w7 = oq;\n+\n+      oq = 0 / oq;\n+      ve %= oq;\n+      j4 = ve ^ 1;\n+      ve ^= oq;\n+      if (j4 != 0 ? j4 : ve)\n+        oq = ve;\n+      else\n+        if (w7 != 0)\n+          oq = ve;\n+    }\n+}"}, {"sha": "4253d194ed40552016fa9c976719e166bbdd6148", "filename": "gcc/tree-if-conv.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4/gcc%2Ftree-if-conv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04ac4afa844abb88a4a3bddd9dbfe5572d38aea4/gcc%2Ftree-if-conv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-if-conv.c?ref=04ac4afa844abb88a4a3bddd9dbfe5572d38aea4", "patch": "@@ -1687,7 +1687,10 @@ gen_phi_arg_condition (gphi *phi, vec<int> *occur,\n       e = gimple_phi_arg_edge (phi, (*occur)[i]);\n       c = bb_predicate (e->src);\n       if (is_true_predicate (c))\n-\tcontinue;\n+\t{\n+\t  cond = c;\n+\t  break;\n+\t}\n       c = force_gimple_operand_gsi_1 (gsi, unshare_expr (c),\n \t\t\t\t      is_gimple_condexpr, NULL_TREE,\n \t\t\t\t      true, GSI_SAME_STMT);"}]}