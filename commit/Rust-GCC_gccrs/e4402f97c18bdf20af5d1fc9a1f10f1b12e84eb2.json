{"sha": "e4402f97c18bdf20af5d1fc9a1f10f1b12e84eb2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTQ0MDJmOTdjMThiZGYyMGFmNWQxZmM5YTFmMTBmMWIxMmU4NGViMg==", "commit": {"author": {"name": "Mark Wielaard", "email": "mark@klomp.org", "date": "2003-02-14T20:36:00Z"}, "committer": {"name": "Mark Wielaard", "email": "mark@gcc.gnu.org", "date": "2003-02-14T20:36:00Z"}, "message": "mauve.exp (mauve_compute_uses): Add inner class object files by changing all occurances of $ to ^.\n\n       * libjava.mauve/mauve.exp (mauve_compute_uses): Add inner class\n       object files by changing all occurances of $ to ^.\n       (test_mauve): Replace ^ with $ for class file names and quote\n       them with \"'\"s.\n\nFrom-SVN: r62914", "tree": {"sha": "30ed327232e00bdbb8006bc656df767ad67a6342", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/30ed327232e00bdbb8006bc656df767ad67a6342"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e4402f97c18bdf20af5d1fc9a1f10f1b12e84eb2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4402f97c18bdf20af5d1fc9a1f10f1b12e84eb2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4402f97c18bdf20af5d1fc9a1f10f1b12e84eb2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4402f97c18bdf20af5d1fc9a1f10f1b12e84eb2/comments", "author": null, "committer": null, "parents": [{"sha": "70f91f5046b88ad34a882cf8cf2eb28779643b75", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70f91f5046b88ad34a882cf8cf2eb28779643b75", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70f91f5046b88ad34a882cf8cf2eb28779643b75"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "47b08a428312a49d9be7c11986e3e6300705efc2", "filename": "libjava/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4402f97c18bdf20af5d1fc9a1f10f1b12e84eb2/libjava%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4402f97c18bdf20af5d1fc9a1f10f1b12e84eb2/libjava%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FChangeLog?ref=e4402f97c18bdf20af5d1fc9a1f10f1b12e84eb2", "patch": "@@ -1,3 +1,10 @@\n+2003-02-14  Mark Wielaard  <mark@klomp.org>\n+\n+\t* libjava.mauve/mauve.exp (mauve_compute_uses): Add inner class\n+\tobject files by changing all occurances of $ to ^.\n+\t(test_mauve): Replace ^ with $ for class file names and quote\n+\tthem with \"'\"s.\n+\n 2003-02-13  Tom Tromey  <tromey@redhat.com>\n \n \t* libjava.mauve/xfails: Added entries for an unimplemented Class"}, {"sha": "5eefd5d3e4ea410c05c69b0306d2dfe6b7f56490", "filename": "libjava/testsuite/libjava.mauve/mauve.exp", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4402f97c18bdf20af5d1fc9a1f10f1b12e84eb2/libjava%2Ftestsuite%2Flibjava.mauve%2Fmauve.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4402f97c18bdf20af5d1fc9a1f10f1b12e84eb2/libjava%2Ftestsuite%2Flibjava.mauve%2Fmauve.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.mauve%2Fmauve.exp?ref=e4402f97c18bdf20af5d1fc9a1f10f1b12e84eb2", "patch": "@@ -46,6 +46,12 @@ proc mauve_compute_uses {aName} {\n     foreach file $ufiles {\n       set file [file rootname $file].o\n       lappend uses($item) $file\n+      # Now add all inner classes\n+      foreach inner [glob -nocomplain [file rootname $file]$*.class] {\n+\t# Prevent excessive escaping by replacing $ with a ^ in the .o name\n+\tset inner [string map {$ ^} [file rootname $inner]].o\n+\tlappend uses($item) $inner\n+      }\n     }\n   }\n \n@@ -179,9 +185,10 @@ proc test_mauve {} {\n     foreach obj $uses($file) {\n       if {! [file exists $obj]} then {\n \tverbose \"compiling $obj for test of $class\"\n-\tset srcfile [file rootname $obj].class\n+\t# The .class file does contain a $, but we can quote it between \"'\"s.\n+\tset srcfile [string map {^ $} [file rootname $obj]].class\n \tset x [libjava_prune_warnings \\\n-\t\t [target_compile [pwd]/$srcfile $obj object $compile_args]]\n+\t\t [libjava_tcompile '[pwd]/$srcfile' $obj object $compile_args]]\n \tif {$x != \"\"} then {\n \t  fail \"Compile $obj for $class\"\n \t  set ok 0\n@@ -196,7 +203,7 @@ proc test_mauve {} {\n     }\n \n     set x [libjava_prune_warnings \\\n-\t     [target_compile [concat $uses($file) $objlist] \\\n+\t     [libjava_tcompile [concat $uses($file) $objlist] \\\n \t\t$Executable executable $link_args]]\n     if {$x != \"\"} then {\n       set proc_ok 0"}]}