{"sha": "8659e538c5782559a73228b9c04e1d44a0f21d6f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODY1OWU1MzhjNTc4MjU1OWE3MzIyOGI5YzA0ZTFkNDRhMGYyMWQ2Zg==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2006-06-02T17:39:28Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2006-06-02T17:39:28Z"}, "message": "init5.C: XFAIL if cxa-atexit is false.\n\n\t* g++.old-deja/g++.other/init5.C: XFAIL if cxa-atexit is false.\n\t* g++.old-deja/g++.other/init19.C: Ditto.\n\t* g++.old-deja/g++.other/init18.C: Ditto, plus change _Exit to _exit\n\tand add other platforms as expected failures.\n\nFrom-SVN: r114327", "tree": {"sha": "433802bb6dfcc146e74731ac8dc597b4bf86acfd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/433802bb6dfcc146e74731ac8dc597b4bf86acfd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8659e538c5782559a73228b9c04e1d44a0f21d6f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8659e538c5782559a73228b9c04e1d44a0f21d6f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8659e538c5782559a73228b9c04e1d44a0f21d6f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8659e538c5782559a73228b9c04e1d44a0f21d6f/comments", "author": null, "committer": null, "parents": [{"sha": "239559e797304a6b682ee1cd183ed81170e38356", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/239559e797304a6b682ee1cd183ed81170e38356", "html_url": "https://github.com/Rust-GCC/gccrs/commit/239559e797304a6b682ee1cd183ed81170e38356"}], "stats": {"total": 23, "additions": 19, "deletions": 4}, "files": [{"sha": "b6f36173028b8213cb0a14e14a38d9d8f791be43", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8659e538c5782559a73228b9c04e1d44a0f21d6f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8659e538c5782559a73228b9c04e1d44a0f21d6f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8659e538c5782559a73228b9c04e1d44a0f21d6f", "patch": "@@ -1,3 +1,10 @@\n+2006-06-02  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* g++.old-deja/g++.other/init5.C: XFAIL if cxa-atexit is false.\n+\t* g++.old-deja/g++.other/init19.C: Ditto.\n+\t* g++.old-deja/g++.other/init18.C: Ditto, plus change _Exit to _exit\n+\tand add other platforms as expected failures.\n+\n 2006-06-01  Steve Ellcey  <sje@cup.hp.com>\n \t\n \t* lib/target-supports.exp (is-effective-target): Add cxa_atexit."}, {"sha": "7a91a12d7df43e874d5748b7387b02d3b27746b0", "filename": "gcc/testsuite/g++.old-deja/g++.other/init18.C", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8659e538c5782559a73228b9c04e1d44a0f21d6f/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Finit18.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8659e538c5782559a73228b9c04e1d44a0f21d6f/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Finit18.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Finit18.C?ref=8659e538c5782559a73228b9c04e1d44a0f21d6f", "patch": "@@ -1,14 +1,22 @@\n-// { dg-do run }\n+// Some targets (e.g. those with \"set_board_info needs_status_wrapper 1\"\n+// in their dejagnu baseboard description) require that the status is\n+// final when exit is entered (or main returns), and not \"overruled\" by a\n+// destructor calling _exit.  It's not really worth it to handle that.\n+//\n+// Any platform that doesn't have proper __cxa_atexit support will also fail.\n+//\n+// { dg-do run { xfail { { mmix-knuth-mmixware xtensa-*-elf* arm*-*-elf arm*-*-eabi m68k-*-elf } || { ! cxa_atexit } } } }\n \n #include <stdlib.h>\n+extern \"C\" void _exit (int);\n \n static int cnt = 0;\n \n class Foo2\n {\n \tpublic:\n \t\tFoo2() {};\n-\t\t~Foo2() { if (++cnt == 2) _Exit (0); };\n+\t\t~Foo2() { if (++cnt == 2) _exit (0); };\n };\n \n static Foo2& GetFoo2()"}, {"sha": "6d9c8290ed376f9bc634a091a5bf212eb808a4bf", "filename": "gcc/testsuite/g++.old-deja/g++.other/init19.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8659e538c5782559a73228b9c04e1d44a0f21d6f/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Finit19.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8659e538c5782559a73228b9c04e1d44a0f21d6f/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Finit19.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Finit19.C?ref=8659e538c5782559a73228b9c04e1d44a0f21d6f", "patch": "@@ -1,4 +1,4 @@\n-// { dg-do run }\n+// { dg-do run { xfail { ! cxa_atexit } } }\n #include <stdlib.h>\n \n #define assert(x) do { if (! (x)) abort(); } while (0)"}, {"sha": "7bb263a93c0388aaf9e44ab1ec10707c6979f648", "filename": "gcc/testsuite/g++.old-deja/g++.other/init5.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8659e538c5782559a73228b9c04e1d44a0f21d6f/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Finit5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8659e538c5782559a73228b9c04e1d44a0f21d6f/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Finit5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Finit5.C?ref=8659e538c5782559a73228b9c04e1d44a0f21d6f", "patch": "@@ -1,4 +1,4 @@\n-// { dg-do run }\n+// { dg-do run { xfail { ! cxa_atexit } } }\n // Objects must be destructed in decreasing cnt order\n // Original test attributed to James Kanze <jkanze@otelo.ibmmail.com>\n "}]}