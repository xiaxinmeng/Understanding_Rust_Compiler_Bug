{"sha": "a8cdbec0288f39c2f71d69187b67243b4220fdd9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YThjZGJlYzAyODhmMzljMmY3MWQ2OTE4N2I2NzI0M2I0MjIwZmRkOQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2005-05-11T19:02:35Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2005-05-11T19:02:35Z"}, "message": "* config/mips/sr71k.md, config/mips/7000.md: Reformat.\n\nFrom-SVN: r99591", "tree": {"sha": "429b9d52e333ad7835e7ed67cd7ce57b90d54e92", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/429b9d52e333ad7835e7ed67cd7ce57b90d54e92"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a8cdbec0288f39c2f71d69187b67243b4220fdd9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8cdbec0288f39c2f71d69187b67243b4220fdd9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8cdbec0288f39c2f71d69187b67243b4220fdd9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8cdbec0288f39c2f71d69187b67243b4220fdd9/comments", "author": null, "committer": null, "parents": [{"sha": "f8535b4dcb7aa881dda1ba0d360a1eb95b464702", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8535b4dcb7aa881dda1ba0d360a1eb95b464702", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8535b4dcb7aa881dda1ba0d360a1eb95b464702"}], "stats": {"total": 540, "additions": 261, "deletions": 279}, "files": [{"sha": "d5278cef3e422e966f5b6fee0e0ea2f6dd8a1535", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8cdbec0288f39c2f71d69187b67243b4220fdd9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8cdbec0288f39c2f71d69187b67243b4220fdd9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a8cdbec0288f39c2f71d69187b67243b4220fdd9", "patch": "@@ -1,3 +1,7 @@\n+2005-05-11  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config/mips/sr71k.md, config/mips/7000.md: Reformat.\n+\n 2005-05-11  Kazu Hirata  <kazu@cs.umass.edu>\n \n \tPR tree-optimizer/18472"}, {"sha": "a520e0810869259b05a1c499c2c0d1997e7ba86f", "filename": "gcc/config/mips/7000.md", "status": "modified", "additions": 106, "deletions": 98, "changes": 204, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8cdbec0288f39c2f71d69187b67243b4220fdd9/gcc%2Fconfig%2Fmips%2F7000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8cdbec0288f39c2f71d69187b67243b4220fdd9/gcc%2Fconfig%2Fmips%2F7000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2F7000.md?ref=a8cdbec0288f39c2f71d69187b67243b4220fdd9", "patch": "@@ -42,23 +42,23 @@\n (define_cpu_unit \"ixum_addsub_agen\" \"rm7000_other\")\n \n ;; Integer execution unit (F-Pipe).\n-(define_cpu_unit \"ixuf_addsub\"\t\"rm7000_other\")\n-(define_cpu_unit \"ixuf_branch\"\t\"rm7000_other\")\n-(define_cpu_unit \"ixuf_mpydiv\"\t\"rm7000_other\")\n+(define_cpu_unit \"ixuf_addsub\" \"rm7000_other\")\n+(define_cpu_unit \"ixuf_branch\" \"rm7000_other\")\n+(define_cpu_unit \"ixuf_mpydiv\" \"rm7000_other\")\n (define_cpu_unit \"ixuf_mpydiv_iter\" \"rm7000_idiv\")\n ;; Floating-point unit (F-Pipe).\n-(define_cpu_unit \"fxuf_add\"\t\"rm7000_other\")\n-(define_cpu_unit \"fxuf_mpy\"\t\"rm7000_other\")\n+(define_cpu_unit \"fxuf_add\" \"rm7000_other\")\n+(define_cpu_unit \"fxuf_mpy\" \"rm7000_other\")\n (define_cpu_unit \"fxuf_mpy_iter\" \"rm7000_fdiv\")\n (define_cpu_unit \"fxuf_divsqrt\" \"rm7000_other\")\n (define_cpu_unit \"fxuf_divsqrt_iter\" \"rm7000_fdiv\")\n \n (exclusion_set \"ixuf_addsub\"\n \t       \"ixuf_branch,ixuf_mpydiv,fxuf_add,fxuf_mpy,fxuf_divsqrt\")\n-(exclusion_set \"ixuf_branch\"\t\"ixuf_mpydiv,fxuf_add,fxuf_mpy,fxuf_divsqrt\")\n-(exclusion_set \"ixuf_mpydiv\"\t\"fxuf_add,fxuf_mpy,fxuf_divsqrt\")\n-(exclusion_set \"fxuf_add\"\t\"fxuf_mpy,fxuf_divsqrt\")\n-(exclusion_set \"fxuf_mpy\"\t\"fxuf_divsqrt\")\n+(exclusion_set \"ixuf_branch\" \"ixuf_mpydiv,fxuf_add,fxuf_mpy,fxuf_divsqrt\")\n+(exclusion_set \"ixuf_mpydiv\" \"fxuf_add,fxuf_mpy,fxuf_divsqrt\")\n+(exclusion_set \"fxuf_add\" \"fxuf_mpy,fxuf_divsqrt\")\n+(exclusion_set \"fxuf_mpy\" \"fxuf_divsqrt\")\n \n ;; After branch any insn cannot be issued.\n (absence_set \"rm7_iss0,rm7_iss1\" \"ixuf_branch\")\n@@ -67,14 +67,14 @@\n ;; Define reservations for unit name mnemonics or combinations.\n ;;\n \n-(define_reservation \"rm7_iss\"\t\t\"rm7_iss0|rm7_iss1\")\n+(define_reservation \"rm7_iss\" \"rm7_iss0|rm7_iss1\")\n (define_reservation \"rm7_single_dispatch\" \"rm7_iss0+rm7_iss1\")\n \n (define_reservation \"rm7_iaddsub\" \"rm7_iss+(ixum_addsub_agen|ixuf_addsub)\")\n-(define_reservation \"rm7_imem\"\t\t\"rm7_iss+ixum_addsub_agen\")\n-(define_reservation \"rm7_impydiv\"\t\"rm7_iss+ixuf_mpydiv\")\n-(define_reservation \"rm7_impydiv_iter\"\t\"ixuf_mpydiv_iter\")\n-(define_reservation \"rm7_branch\"\t\"rm7_iss+ixuf_branch\")\n+(define_reservation \"rm7_imem\" \"rm7_iss+ixum_addsub_agen\")\n+(define_reservation \"rm7_impydiv\" \"rm7_iss+ixuf_mpydiv\")\n+(define_reservation \"rm7_impydiv_iter\" \"ixuf_mpydiv_iter\")\n+(define_reservation \"rm7_branch\" \"rm7_iss+ixuf_branch\")\n \n (define_reservation \"rm7_fpadd\"\t\"rm7_iss+fxuf_add\")\n (define_reservation \"rm7_fpmpy\"\t\"rm7_iss+fxuf_mpy\")\n@@ -87,123 +87,131 @@\n ;;\n \n (define_insn_reservation \"rm7_int_other\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (eq_attr \"type\" \"arith,shift,slt,clz,const,condmove,nop,trap\"))\n-\t\t\t \"rm7_iaddsub\")\n-\n-(define_insn_reservation \"rm7_ld\" 2 (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t\t         (eq_attr \"type\" \"load,fpload,fpidxload\"))\n-\t\t\t \"rm7_imem\")\n-\n-(define_insn_reservation \"rm7_st\" 1 (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t\t         (eq_attr \"type\" \"store,fpstore,fpidxstore\"))\n-\t\t\t \"rm7_imem\")\n-\n-(define_insn_reservation \"rm7_idiv_si\" 36 (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t\t\t   (and (eq_attr \"type\" \"idiv\")\n-\t\t\t\t\t\t(eq_attr \"mode\" \"SI\")))\n-\t\t\t \"rm7_impydiv+(rm7_impydiv_iter*36)\")\n-\n-(define_insn_reservation \"rm7_idiv_di\" 68 (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t\t\t   (and (eq_attr \"type\" \"idiv\")\n-\t\t\t\t\t\t(eq_attr \"mode\" \"DI\")))\n-\t\t\t \"rm7_impydiv+(rm7_impydiv_iter*68)\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (eq_attr \"type\" \"arith,shift,slt,clz,const,condmove,nop,trap\"))\n+  \"rm7_iaddsub\")\n+\n+(define_insn_reservation \"rm7_ld\" 2\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (eq_attr \"type\" \"load,fpload,fpidxload\"))\n+  \"rm7_imem\")\n+\n+(define_insn_reservation \"rm7_st\" 1\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (eq_attr \"type\" \"store,fpstore,fpidxstore\"))\n+  \"rm7_imem\")\n+\n+(define_insn_reservation \"rm7_idiv_si\" 36\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (and (eq_attr \"type\" \"idiv\")\n+\t    (eq_attr \"mode\" \"SI\")))\n+  \"rm7_impydiv+(rm7_impydiv_iter*36)\")\n+\n+(define_insn_reservation \"rm7_idiv_di\" 68\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (and (eq_attr \"type\" \"idiv\")\n+\t    (eq_attr \"mode\" \"DI\")))\n+  \"rm7_impydiv+(rm7_impydiv_iter*68)\")\n \n (define_insn_reservation \"rm7_impy_si_mult\" 5\n-\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t      (and (eq_attr \"type\" \"imul,imul3,imadd\")\n-\t\t\t   (and (eq_attr \"mode\" \"SI\")\n-\t\t\t\t(match_operand 0 \"hilo_operand\"))))\n-\t\t\t \"rm7_impydiv+(rm7_impydiv_iter*3)\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (and (eq_attr \"type\" \"imul,imul3,imadd\")\n+\t    (and (eq_attr \"mode\" \"SI\")\n+\t\t (match_operand 0 \"hilo_operand\"))))\n+  \"rm7_impydiv+(rm7_impydiv_iter*3)\")\n \n ;; There are an additional 2 stall cycles.\n (define_insn_reservation \"rm7_impy_si_mul\" 2\n-\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t      (and (eq_attr \"type\" \"imul,imul3,imadd\")\n-\t\t\t   (and (eq_attr \"mode\" \"SI\")\n-\t\t\t\t(not (match_operand 0 \"hilo_operand\")))))\n-\t\t\t \"rm7_impydiv\")\n-\n-(define_insn_reservation \"rm7_impy_di\" 9 (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t\t\t  (and (eq_attr \"type\" \"imul,imul3\")\n-\t\t\t\t\t       (eq_attr \"mode\" \"DI\")))\n-\t\t\t \"rm7_impydiv+(rm7_impydiv_iter*8)\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (and (eq_attr \"type\" \"imul,imul3,imadd\")\n+\t    (and (eq_attr \"mode\" \"SI\")\n+\t\t (not (match_operand 0 \"hilo_operand\")))))\n+  \"rm7_impydiv\")\n+\n+(define_insn_reservation \"rm7_impy_di\" 9\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (and (eq_attr \"type\" \"imul,imul3\")\n+\t    (eq_attr \"mode\" \"DI\")))\n+  \"rm7_impydiv+(rm7_impydiv_iter*8)\")\n \n ;; Move to/from HI/LO.\n (define_insn_reservation \"rm7_mthilo\" 3\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (eq_attr \"type\" \"mthilo\"))\n-\t\t\t \"rm7_impydiv\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (eq_attr \"type\" \"mthilo\"))\n+  \"rm7_impydiv\")\n \n (define_insn_reservation \"rm7_mfhilo\" 1\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (eq_attr \"type\" \"mfhilo\"))\n-\t\t\t \"rm7_impydiv\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (eq_attr \"type\" \"mfhilo\"))\n+  \"rm7_impydiv\")\n \n ;; Move to/from fp coprocessor.\n-(define_insn_reservation \"rm7_ixfer\" 2 (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t\t\t(eq_attr \"type\" \"xfer\"))\n-\t\t\t \"rm7_iaddsub\")\n+(define_insn_reservation \"rm7_ixfer\" 2\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (eq_attr \"type\" \"xfer\"))\n+  \"rm7_iaddsub\")\n \n-(define_insn_reservation \"rm7_ibr\" 3 (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t\t      (eq_attr \"type\" \"branch,jump,call\"))\n-\t\t\t \"rm7_branch\")\n+(define_insn_reservation \"rm7_ibr\" 3\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (eq_attr \"type\" \"branch,jump,call\"))\n+  \"rm7_branch\")\n \n ;;\n ;; Describe instruction reservations for the floating-point operations.\n ;;\n (define_insn_reservation \"rm7_fp_quick\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (eq_attr \"type\" \"fneg,fcmp,fabs,fmove\"))\n-\t\t\t \"rm7_fpadd\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (eq_attr \"type\" \"fneg,fcmp,fabs,fmove\"))\n+  \"rm7_fpadd\")\n \n (define_insn_reservation \"rm7_fp_other\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (eq_attr \"type\" \"fadd\"))\n-\t\t\t \"rm7_fpadd\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (eq_attr \"type\" \"fadd\"))\n+  \"rm7_fpadd\")\n \n (define_insn_reservation \"rm7_fp_cvt\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (eq_attr \"type\" \"fcvt\"))\n-\t\t\t \"rm7_fpadd\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (eq_attr \"type\" \"fcvt\"))\n+  \"rm7_fpadd\")\n \n (define_insn_reservation \"rm7_fp_divsqrt_df\" 36\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (and (eq_attr \"type\" \"fdiv,frdiv,fsqrt\")\n-\t\t\t\t   (eq_attr \"mode\" \"DF\")))\n-\t\t\t \"rm7_fpdivsqr+(rm7_fpdivsqr_iter*36)\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (and (eq_attr \"type\" \"fdiv,frdiv,fsqrt\")\n+\t    (eq_attr \"mode\" \"DF\")))\n+  \"rm7_fpdivsqr+(rm7_fpdivsqr_iter*36)\")\n \n (define_insn_reservation \"rm7_fp_divsqrt_sf\" 21\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (and (eq_attr \"type\" \"fdiv,frdiv,fsqrt\")\n-\t\t\t\t   (eq_attr \"mode\" \"SF\")))\n-\t\t\t \"rm7_fpdivsqr+(rm7_fpdivsqr_iter*21)\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (and (eq_attr \"type\" \"fdiv,frdiv,fsqrt\")\n+\t    (eq_attr \"mode\" \"SF\")))\n+  \"rm7_fpdivsqr+(rm7_fpdivsqr_iter*21)\")\n \n (define_insn_reservation \"rm7_fp_rsqrt_df\" 68\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (and (eq_attr \"type\" \"frsqrt\")\n-\t\t\t\t   (eq_attr \"mode\" \"DF\")))\n-\t\t\t \"rm7_fpdivsqr+(rm7_fpdivsqr_iter*68)\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (and (eq_attr \"type\" \"frsqrt\")\n+\t    (eq_attr \"mode\" \"DF\")))\n+  \"rm7_fpdivsqr+(rm7_fpdivsqr_iter*68)\")\n \n (define_insn_reservation \"rm7_fp_rsqrt_sf\" 38\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (and (eq_attr \"type\" \"frsqrt\")\n-\t\t\t\t   (eq_attr \"mode\" \"SF\")))\n-\t\t\t \"rm7_fpdivsqr+(rm7_fpdivsqr_iter*38)\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (and (eq_attr \"type\" \"frsqrt\")\n+\t    (eq_attr \"mode\" \"SF\")))\n+  \"rm7_fpdivsqr+(rm7_fpdivsqr_iter*38)\")\n \n (define_insn_reservation \"rm7_fp_mpy_sf\" 4\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (and (eq_attr \"type\" \"fmul,fmadd\")\n-\t\t\t\t   (eq_attr \"mode\" \"SF\")))\n-\t\t\t \"rm7_fpmpy+rm7_fpmpy_iter\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (and (eq_attr \"type\" \"fmul,fmadd\")\n+\t    (eq_attr \"mode\" \"SF\")))\n+  \"rm7_fpmpy+rm7_fpmpy_iter\")\n \n (define_insn_reservation \"rm7_fp_mpy_df\" 5\n-\t\t\t (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t      (and (eq_attr \"type\" \"fmul,fmadd\")\n-\t\t\t\t   (eq_attr \"mode\" \"DF\")))\n-\t\t\t \"rm7_fpmpy+(rm7_fpmpy_iter*2)\")\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (and (eq_attr \"type\" \"fmul,fmadd\")\n+\t    (eq_attr \"mode\" \"DF\")))\n+  \"rm7_fpmpy+(rm7_fpmpy_iter*2)\")\n \n ;; Force single-dispatch for unknown or multi.\n-(define_insn_reservation \"rm7_unknown\" 1 (and (eq_attr \"cpu\" \"r7000\")\n-\t\t\t\t\t  (eq_attr \"type\" \"unknown,multi\"))\n-\t\t\t \"rm7_single_dispatch\")\n+(define_insn_reservation \"rm7_unknown\" 1\n+  (and (eq_attr \"cpu\" \"r7000\")\n+       (eq_attr \"type\" \"unknown,multi\"))\n+  \"rm7_single_dispatch\")"}, {"sha": "268bc4854f06305f79118b2f2b2bd3e1561dafde", "filename": "gcc/config/mips/sr71k.md", "status": "modified", "additions": 151, "deletions": 181, "changes": 332, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8cdbec0288f39c2f71d69187b67243b4220fdd9/gcc%2Fconfig%2Fmips%2Fsr71k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8cdbec0288f39c2f71d69187b67243b4220fdd9/gcc%2Fconfig%2Fmips%2Fsr71k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fsr71k.md?ref=a8cdbec0288f39c2f71d69187b67243b4220fdd9", "patch": "@@ -124,228 +124,198 @@\n ;;\n \n \n-(define_insn_reservation \"ir_sr70_unknown\"\n-                               1\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"unknown\"))\n-                         \"serial_dispatch\")\n+(define_insn_reservation \"ir_sr70_unknown\" 1\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"unknown\"))\n+  \"serial_dispatch\")\n \n \n ;; Assume prediction fails.\n-(define_insn_reservation \"ir_sr70_branch\"\n-                               6\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"branch,jump,call\"))\n-                         \"ri_branch\")\n+(define_insn_reservation \"ir_sr70_branch\" 6\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"branch,jump,call\"))\n+  \"ri_branch\")\n \n-(define_insn_reservation \"ir_sr70_load\"\n-                               2\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"load\"))\n-                         \"ri_mem\")\n+(define_insn_reservation \"ir_sr70_load\" 2\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"load\"))\n+  \"ri_mem\")\n \n-(define_insn_reservation \"ir_sr70_store\"\n-                               1\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"store\"))\n-                         \"ri_mem\")\n+(define_insn_reservation \"ir_sr70_store\" 1\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"store\"))\n+  \"ri_mem\")\n \n \n ;;\n ;; float loads/stores flow through both cpu and cp1...\n ;;\n-(define_insn_reservation \"ir_sr70_fload\"\n-                               9\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"fpload,fpidxload\"))\n-                         \"(cpu_iss+cp1_iss),(ri_mem+rf_ldmem)\")\n+(define_insn_reservation \"ir_sr70_fload\" 9\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"fpload,fpidxload\"))\n+  \"(cpu_iss+cp1_iss),(ri_mem+rf_ldmem)\")\n \n-(define_insn_reservation \"ir_sr70_fstore\"\n-                               1\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"fpstore,fpidxstore\"))\n-                         \"(cpu_iss+cp1_iss),(fpu_mov+ri_mem)\")\n+(define_insn_reservation \"ir_sr70_fstore\" 1\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"fpstore,fpidxstore\"))\n+  \"(cpu_iss+cp1_iss),(fpu_mov+ri_mem)\")\n \n \n ;; This reservation is for conditional move based on integer\n ;; or floating point CC.\n-(define_insn_reservation \"ir_sr70_condmove\"\n-                               4\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"condmove\"))\n-                         \"ri_insns\")\n+(define_insn_reservation \"ir_sr70_condmove\" 4\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"condmove\"))\n+  \"ri_insns\")\n \n ;; Try to discriminate move-from-cp1 versus move-to-cp1 as latencies\n ;; are different. Like float load/store, these insns use multiple\n ;; resources simultaneously\n-(define_insn_reservation \"ir_sr70_xfer_from\"\n-                               6\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"xfer\")\n-                                    (eq_attr \"mode\" \"!SF,DF,FPSW\")))\n-                         \"(cpu_iss+cp1_iss),(fpu_mov+ri_mem)\")\n-\n-(define_insn_reservation \"ir_sr70_xfer_to\"\n-                               9\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"xfer\")\n-                                    (eq_attr \"mode\" \"SF,DF\")))\n-                         \"(cpu_iss+cp1_iss),(ri_mem+rf_ldmem)\")\n-\n-(define_insn_reservation \"ir_sr70_hilo\"\n-                               1\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"mthilo,mfhilo\"))\n-                         \"ri_insns\")\n-\n-(define_insn_reservation \"ir_sr70_arith\"\n-                               1\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"arith,shift,slt,clz,const,trap\"))\n-                         \"ri_insns\")\n+(define_insn_reservation \"ir_sr70_xfer_from\" 6\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"xfer\")\n+\t    (eq_attr \"mode\" \"!SF,DF,FPSW\")))\n+  \"(cpu_iss+cp1_iss),(fpu_mov+ri_mem)\")\n+\n+(define_insn_reservation \"ir_sr70_xfer_to\" 9\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"xfer\")\n+\t    (eq_attr \"mode\" \"SF,DF\")))\n+  \"(cpu_iss+cp1_iss),(ri_mem+rf_ldmem)\")\n+\n+(define_insn_reservation \"ir_sr70_hilo\" 1\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"mthilo,mfhilo\"))\n+  \"ri_insns\")\n+\n+(define_insn_reservation \"ir_sr70_arith\" 1\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"arith,shift,slt,clz,const,trap\"))\n+  \"ri_insns\")\n \n ;; emulate repeat (dispatch stall) by spending extra cycle(s) in\n ;; in iter unit\n-(define_insn_reservation \"ir_sr70_imul_si\"\n-                                 4\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"imul,imul3,imadd\")\n-                                    (eq_attr \"mode\" \"SI\")))\n-                         \"ri_alux,ipu_alux,ipu_macc_iter\")\n-\n-(define_insn_reservation \"ir_sr70_imul_di\"\n-                                 6\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"imul,imul3,imadd\")\n-                                    (eq_attr \"mode\" \"DI\")))\n-                         \"ri_alux,ipu_alux,(ipu_macc_iter*3)\")\n+(define_insn_reservation \"ir_sr70_imul_si\" 4\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"imul,imul3,imadd\")\n+\t    (eq_attr \"mode\" \"SI\")))\n+  \"ri_alux,ipu_alux,ipu_macc_iter\")\n+\n+(define_insn_reservation \"ir_sr70_imul_di\" 6\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"imul,imul3,imadd\")\n+\t    (eq_attr \"mode\" \"DI\")))\n+  \"ri_alux,ipu_alux,(ipu_macc_iter*3)\")\n \n ;; Divide algorithm is early out with best latency of 7 pcycles.\n ;; Use worst case for scheduling purposes.\n-(define_insn_reservation \"ir_sr70_idiv_si\"\n-                                 41\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"idiv\")\n-                                    (eq_attr \"mode\" \"SI\")))\n-                         \"ri_alux,ipu_alux,(ipu_macc_iter*38)\")\n-\n-(define_insn_reservation \"ir_sr70_idiv_di\"\n-                                 73\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"idiv\")\n-                                    (eq_attr \"mode\" \"DI\")))\n-                         \"ri_alux,ipu_alux,(ipu_macc_iter*70)\")\n+(define_insn_reservation \"ir_sr70_idiv_si\" 41\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"idiv\")\n+\t    (eq_attr \"mode\" \"SI\")))\n+  \"ri_alux,ipu_alux,(ipu_macc_iter*38)\")\n+\n+(define_insn_reservation \"ir_sr70_idiv_di\" 73\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"idiv\")\n+\t    (eq_attr \"mode\" \"DI\")))\n+  \"ri_alux,ipu_alux,(ipu_macc_iter*70)\")\n \n ;; extra reservations of fpu_fpu are for repeat latency\n-(define_insn_reservation \"ir_sr70_fadd_sf\"\n-                               8\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"fadd\")\n-                                    (eq_attr \"mode\" \"SF\")))\n-                         \"rf_insn,fpu_fpu\")\n-\n-(define_insn_reservation \"ir_sr70_fadd_df\"\n-                               10\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"fadd\")\n-                                    (eq_attr \"mode\" \"DF\")))\n-                         \"rf_insn,fpu_fpu\")\n+(define_insn_reservation \"ir_sr70_fadd_sf\" 8\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"fadd\")\n+\t    (eq_attr \"mode\" \"SF\")))\n+  \"rf_insn,fpu_fpu\")\n+\n+(define_insn_reservation \"ir_sr70_fadd_df\" 10\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"fadd\")\n+\t    (eq_attr \"mode\" \"DF\")))\n+  \"rf_insn,fpu_fpu\")\n \n ;; Latencies for MADD,MSUB, NMADD, NMSUB assume the Multiply is fused\n ;; with the sub or add.\n-(define_insn_reservation \"ir_sr70_fmul_sf\"\n-                               8\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"fmul,fmadd\")\n-                                    (eq_attr \"mode\" \"SF\")))\n-                         \"rf_insn,fpu_fpu\")\n+(define_insn_reservation \"ir_sr70_fmul_sf\" 8\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"fmul,fmadd\")\n+\t    (eq_attr \"mode\" \"SF\")))\n+  \"rf_insn,fpu_fpu\")\n \n ;; tie up the fpu unit to emulate the balance for the \"repeat\n ;; rate\" of 8 (2 are spent in the iss unit)\n-(define_insn_reservation \"ir_sr70_fmul_df\"\n-                               16\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"fmul,fmadd\")\n-                                    (eq_attr \"mode\" \"DF\")))\n-                         \"rf_insn,fpu_fpu*6\")\n+(define_insn_reservation \"ir_sr70_fmul_df\" 16\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"fmul,fmadd\")\n+\t    (eq_attr \"mode\" \"DF\")))\n+  \"rf_insn,fpu_fpu*6\")\n \n \n ;; RECIP insn uses same type attr as div, and for SR3, has same\n ;; timings for double. However, single RECIP has a latency of\n ;; 28 -- only way to fix this is to introduce new insn attrs.\n ;; cycles spent in iter unit are designed to satisfy balance\n ;; of \"repeat\" latency after insn uses up rf_multi1 reservation\n-(define_insn_reservation \"ir_sr70_fdiv_sf\"\n-                                60\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"fdiv,frdiv\")\n-                                    (eq_attr \"mode\" \"SF\")))\n-                         \"rf_multi1+(fpu_iter*51)\")\n-\n-(define_insn_reservation \"ir_sr70_fdiv_df\"\n-                                120\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"fdiv,frdiv\")\n-                                    (eq_attr \"mode\" \"DF\")))\n-                         \"rf_multi1+(fpu_iter*109)\")\n-\n-(define_insn_reservation \"ir_sr70_fabs\"\n-                               4\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"fabs,fneg,fmove\"))\n-                         \"rf_insn,fpu_fpu\")\n-\n-(define_insn_reservation \"ir_sr70_fcmp\"\n-                               10\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"fcmp\"))\n-                         \"rf_insn,fpu_fpu\")\n+(define_insn_reservation \"ir_sr70_fdiv_sf\" 60\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"fdiv,frdiv\")\n+\t    (eq_attr \"mode\" \"SF\")))\n+  \"rf_multi1+(fpu_iter*51)\")\n+\n+(define_insn_reservation \"ir_sr70_fdiv_df\" 120\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"fdiv,frdiv\")\n+\t    (eq_attr \"mode\" \"DF\")))\n+  \"rf_multi1+(fpu_iter*109)\")\n+\n+(define_insn_reservation \"ir_sr70_fabs\" 4\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"fabs,fneg,fmove\"))\n+  \"rf_insn,fpu_fpu\")\n+\n+(define_insn_reservation \"ir_sr70_fcmp\" 10\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"fcmp\"))\n+  \"rf_insn,fpu_fpu\")\n \n ;; \"fcvt\" type attribute covers a number of diff insns, most have the same\n ;; latency descriptions, a few vary. We use the\n ;; most common timing (which is also worst case).\n-(define_insn_reservation \"ir_sr70_fcvt\"\n-                               12\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"fcvt\"))\n-                         \"rf_insn,fpu_fpu*4\")\n-\n-(define_insn_reservation \"ir_sr70_fsqrt_sf\"\n-                                62\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"fsqrt\")\n-                                    (eq_attr \"mode\" \"SF\")))\n-                         \"rf_multi1+(fpu_iter*53)\")\n-\n-(define_insn_reservation \"ir_sr70_fsqrt_df\"\n-                                122\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"fsqrt\")\n-                                    (eq_attr \"mode\" \"DF\")))\n-                         \"rf_multi1+(fpu_iter*111)\")\n-\n-(define_insn_reservation \"ir_sr70_frsqrt_sf\"\n-                                48\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"frsqrt\")\n-                                    (eq_attr \"mode\" \"SF\")))\n-                         \"rf_multi1+(fpu_iter*39)\")\n-\n-(define_insn_reservation \"ir_sr70_frsqrt_df\"\n-                                240\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (and (eq_attr \"type\" \"frsqrt\")\n-                                    (eq_attr \"mode\" \"DF\")))\n-                         \"rf_multi1+(fpu_iter*229)\")\n-\n-(define_insn_reservation \"ir_sr70_multi\"\n-                               1\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"multi\"))\n-                         \"serial_dispatch\")\n-\n-(define_insn_reservation \"ir_sr70_nop\"\n-                               1\n-                          (and (eq_attr \"cpu\" \"sr71000\")\n-                               (eq_attr \"type\" \"nop\"))\n-                         \"ri_insns\")\n+(define_insn_reservation \"ir_sr70_fcvt\" 12\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"fcvt\"))\n+  \"rf_insn,fpu_fpu*4\")\n+\n+(define_insn_reservation \"ir_sr70_fsqrt_sf\" 62\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"fsqrt\")\n+\t    (eq_attr \"mode\" \"SF\")))\n+  \"rf_multi1+(fpu_iter*53)\")\n+\n+(define_insn_reservation \"ir_sr70_fsqrt_df\" 122\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"fsqrt\")\n+\t    (eq_attr \"mode\" \"DF\")))\n+  \"rf_multi1+(fpu_iter*111)\")\n+\n+(define_insn_reservation \"ir_sr70_frsqrt_sf\" 48\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"frsqrt\")\n+\t    (eq_attr \"mode\" \"SF\")))\n+  \"rf_multi1+(fpu_iter*39)\")\n+\n+(define_insn_reservation \"ir_sr70_frsqrt_df\" 240\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (and (eq_attr \"type\" \"frsqrt\")\n+\t    (eq_attr \"mode\" \"DF\")))\n+  \"rf_multi1+(fpu_iter*229)\")\n+\n+(define_insn_reservation \"ir_sr70_multi\" 1\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"multi\"))\n+  \"serial_dispatch\")\n+\n+(define_insn_reservation \"ir_sr70_nop\" 1\n+  (and (eq_attr \"cpu\" \"sr71000\")\n+       (eq_attr \"type\" \"nop\"))\n+  \"ri_insns\")"}]}