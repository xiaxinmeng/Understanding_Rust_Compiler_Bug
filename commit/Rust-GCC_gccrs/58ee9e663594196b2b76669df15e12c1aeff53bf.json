{"sha": "58ee9e663594196b2b76669df15e12c1aeff53bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NThlZTllNjYzNTk0MTk2YjJiNzY2NjlkZjE1ZTEyYzFhZWZmNTNiZg==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2014-05-23T16:37:55Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@gcc.gnu.org", "date": "2014-05-23T16:37:55Z"}, "message": "rs6000: Make all insert instructions one type\n\nThis uses the attribute \"size\" to specify the differences:\n\n\tinsert_word  -> insert size=32\n\tinsert_dword -> insert size=64\n\nIt could use \"dot\" as well, but the current code doesn't handle that.\n\nFrom-SVN: r210868", "tree": {"sha": "f5e75f50a33e2db5eb3f1b319542db1798169f4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f5e75f50a33e2db5eb3f1b319542db1798169f4b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/58ee9e663594196b2b76669df15e12c1aeff53bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58ee9e663594196b2b76669df15e12c1aeff53bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58ee9e663594196b2b76669df15e12c1aeff53bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58ee9e663594196b2b76669df15e12c1aeff53bf/comments", "author": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e0528ed9e55edf892d0593696e28f483f409fe9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0528ed9e55edf892d0593696e28f483f409fe9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0528ed9e55edf892d0593696e28f483f409fe9f"}], "stats": {"total": 140, "additions": 93, "deletions": 47}, "files": [{"sha": "b0a478a27b38f0974950aa8d1ef3b41d76884256", "filename": "gcc/ChangeLog", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -1,3 +1,39 @@\n+2014-05-23  Segher Boessenkool  <segher@kernel.crashing.org>\n+\n+\t* config/rs6000/rs6000.md (type): Delete \"insert_word\",\n+\t\"insert_dword\".  Add \"insert\".\n+\t(size): Update comment.\n+\t* config/rs6000/rs6000.c (rs6000_adjust_cost, is_cracked_insn,\n+\tinsn_must_be_first_in_group): Adjust.\n+\t(insvsi_internal, *insvsi_internal1, *insvsi_internal2,\n+\t*insvsi_internal3, *insvsi_internal4, *insvsi_internal5,\n+\t*insvsi_internal6, insvdi_internal): Adjust.\n+\n+\t* config/rs6000/40x.md (ppc403-integer): Adjust.\n+\t* config/rs6000/440.md (ppc440-integer): Adjust.\n+\t* config/rs6000/476.md (ppc476-simple-integer): Adjust.\n+\t* config/rs6000/601.md (ppc601-integer): Adjust.\n+\t* config/rs6000/603.md (ppc603-integer): Adjust.\n+\t* config/rs6000/6xx.md (ppc604-integer): Adjust.\n+\t* config/rs6000/7450.md (ppc7450-integer): Adjust.\n+\t* config/rs6000/7xx.md (ppc750-integer): Adjust.\n+\t* config/rs6000/8540.md (ppc8540_su): Adjust.\n+\t* config/rs6000/cell.md (cell-integer, cell-insert): Adjust.\n+\t* config/rs6000/e300c2c3.md (ppce300c3_iu): Adjust.\n+\t* config/rs6000/e500mc.md (e500mc_su): Adjust.\n+\t* config/rs6000/e500mc64.md (e500mc64_su): Adjust.\n+\t* config/rs6000/e5500.md (e5500_sfx): Adjust.\n+\t* config/rs6000/e6500.md (e6500_sfx): Adjust.\n+\t* config/rs6000/mpc.md (mpccore-integer): Adjust.\n+\t* config/rs6000/power4.md (power4-integer, power4-insert): Adjust.\n+\t* config/rs6000/power5.md (power5-integer, power5-insert): Adjust.\n+\t* config/rs6000/power6.md (power6-insert, power6-insert-dword):\n+\tAdjust.\n+\t* config/rs6000/power7.md (power7-integer): Adjust.\n+\t* config/rs6000/power8.md (power8-1cyc): Adjust.\n+\t* config/rs6000/rs64.md (rs64a-integer): Adjust.\n+\t* config/rs6000/titan.md (titan_fxu_shift_and_rotate): Adjust.\n+\n 2014-05-23  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* config/rs6000/rs6000.md (type): Add \"mul\".  Delete \"imul\","}, {"sha": "02971cbeef47cc6ee417bd55c218b64ba567cb96", "filename": "gcc/config/rs6000/40x.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F40x.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F40x.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F40x.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -36,7 +36,7 @@\n   \"iu_40x\")\n \n (define_insn_reservation \"ppc403-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,trap,\\\n+  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n                         var_shift_rotate,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppc403,ppc405\"))\n   \"iu_40x\")"}, {"sha": "292177d5e14e006a225eb4e33722e84b43ae183d", "filename": "gcc/config/rs6000/440.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F440.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F440.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F440.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -53,7 +53,7 @@\n   \"ppc440_issue,ppc440_l_pipe\")\n \n (define_insn_reservation \"ppc440-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,\\\n+  (and (eq_attr \"type\" \"integer,insert,shift,\\\n                         trap,var_shift_rotate,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppc440\"))\n   \"ppc440_issue,ppc440_i_pipe|ppc440_j_pipe\")"}, {"sha": "403752a9d620089e056bd2e2dff679c2b5e281f5", "filename": "gcc/config/rs6000/476.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F476.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F476.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F476.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -63,7 +63,7 @@\n    ppc476_lj_pipe\")\n \n (define_insn_reservation \"ppc476-simple-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,var_shift_rotate,exts,shift\")\n+  (and (eq_attr \"type\" \"integer,insert,var_shift_rotate,exts,shift\")\n        (eq_attr \"cpu\" \"ppc476\"))\n   \"ppc476_issue,\\\n    ppc476_i_pipe|ppc476_lj_pipe\")"}, {"sha": "d0afcf710ac98ce92d23c697685cc37b1352724f", "filename": "gcc/config/rs6000/601.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F601.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F601.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F601.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -45,7 +45,7 @@\n   \"iu_ppc601+fpu_ppc601\")\n \n (define_insn_reservation \"ppc601-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,\\\n+  (and (eq_attr \"type\" \"integer,insert,shift,\\\n                         trap,var_shift_rotate,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppc601\"))\n   \"iu_ppc601\")"}, {"sha": "e6cc444362bdc3517f59acc9eb5f939e5e6c5e96", "filename": "gcc/config/rs6000/603.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F603.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F603.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F603.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -58,7 +58,7 @@\n   \"lsu_603\")\n \n (define_insn_reservation \"ppc603-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,trap,\\\n+  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n                         var_shift_rotate,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppc603\"))\n   \"iu_603\")"}, {"sha": "3a3271e6eff5176558763e81feeea5a48234316e", "filename": "gcc/config/rs6000/6xx.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F6xx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F6xx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F6xx.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -73,7 +73,7 @@\n   \"lsu_6xx\")\n   \n (define_insn_reservation \"ppc604-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,trap,\\\n+  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n                         var_shift_rotate,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppc604,ppc604e,ppc620,ppc630\"))\n   \"iu1_6xx|iu2_6xx\")"}, {"sha": "a6a4a1b1b49afad539603283254344d65da4173b", "filename": "gcc/config/rs6000/7450.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F7450.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F7450.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F7450.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -73,7 +73,7 @@\n   \"ppc7450_du,lsu_7450\")\n \n (define_insn_reservation \"ppc7450-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,\\\n+  (and (eq_attr \"type\" \"integer,insert,shift,\\\n                         trap,var_shift_rotate,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppc7450\"))\n   \"ppc7450_du,iu1_7450|iu2_7450|iu3_7450\")"}, {"sha": "332a663f36056d01d8ed8197a2e2f4a93896ba49", "filename": "gcc/config/rs6000/7xx.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F7xx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F7xx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F7xx.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -61,7 +61,7 @@\n   \"ppc750_du,lsu_7xx\")\n \n (define_insn_reservation \"ppc750-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,\\\n+  (and (eq_attr \"type\" \"integer,insert,shift,\\\n                         trap,var_shift_rotate,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppc750,ppc7400\"))\n   \"ppc750_du,iu1_7xx|iu2_7xx\")"}, {"sha": "53545eeb71c70941ddca6791d5b7a3ba10c50b91", "filename": "gcc/config/rs6000/8540.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F8540.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2F8540.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F8540.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -84,7 +84,7 @@\n \n ;; Simple SU insns\n (define_insn_reservation \"ppc8540_su\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,cmp,compare,\\\n+  (and (eq_attr \"type\" \"integer,insert,cmp,compare,\\\n                         delayed_compare,var_delayed_compare,fast_compare,\\\n                         shift,trap,var_shift_rotate,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppc8540,ppc8548\"))"}, {"sha": "3a2668f211ec08f25d70840f3412d85a5d068746", "filename": "gcc/config/rs6000/cell.md", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fcell.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fcell.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fcell.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -166,8 +166,10 @@\n \n ;; Integer latency is 2 cycles\n (define_insn_reservation \"cell-integer\" 2\n-  (and (eq_attr \"type\" \"integer,insert_dword,shift,trap,\\\n-\t\t\tvar_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,shift,trap,\\\n+\t\t\t     var_shift_rotate,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"insert\")\n+\t\t (eq_attr \"size\" \"64\")))\n        (eq_attr \"cpu\" \"cell\"))\n   \"slot01,fxu_cell\")\n \n@@ -185,7 +187,8 @@\n \n ;; rlwimi, alter cr0  \n (define_insn_reservation \"cell-insert\" 2\n-  (and (eq_attr \"type\" \"insert_word\")\n+  (and (eq_attr \"type\" \"insert\")\n+       (eq_attr \"size\" \"32\")\n        (eq_attr \"cpu\" \"cell\"))\n  \"slot01,fxu_cell\")\n "}, {"sha": "e9c8f18a0c7b7890ac4fd2abdbd74f0e04ce4fa0", "filename": "gcc/config/rs6000/e300c2c3.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -90,7 +90,7 @@\n \n ;; Other one cycle IU insns\n (define_insn_reservation \"ppce300c3_iu\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,isel\")\n+  (and (eq_attr \"type\" \"integer,insert,isel\")\n        (ior (eq_attr \"cpu\" \"ppce300c2\") (eq_attr \"cpu\" \"ppce300c3\")))\n   \"ppce300c3_decode,ppce300c3_issue+ppce300c3_iu_stage0+ppce300c3_retire\")\n "}, {"sha": "426903de79208cbd0a5f10b0745114d324192949", "filename": "gcc/config/rs6000/e500mc.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fe500mc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fe500mc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe500mc.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -70,7 +70,7 @@\n \n ;; Simple SU insns.\n (define_insn_reservation \"e500mc_su\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,cmp,compare,\\\n+  (and (eq_attr \"type\" \"integer,insert,cmp,compare,\\\n                         delayed_compare,var_delayed_compare,fast_compare,\\\n                         shift,trap,var_shift_rotate,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppce500mc\"))"}, {"sha": "584aef3ea5627c78c03ae90c3dba9a2848e59922", "filename": "gcc/config/rs6000/e500mc64.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fe500mc64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fe500mc64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe500mc64.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -69,7 +69,7 @@\n \n ;; Simple SU insns.\n (define_insn_reservation \"e500mc64_su\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,delayed_compare,\\\n+  (and (eq_attr \"type\" \"integer,insert,delayed_compare,\\\n \tshift,cntlz,exts\")\n        (eq_attr \"cpu\" \"ppce500mc64\"))\n   \"e500mc64_decode,e500mc64_issue+e500mc64_su_stage0+e500mc64_retire\")"}, {"sha": "fd79ca558514cef5133c664bfc5b7a759dbca147", "filename": "gcc/config/rs6000/e5500.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fe5500.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fe5500.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe5500.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -56,7 +56,7 @@\n \n ;; SFX.\n (define_insn_reservation \"e5500_sfx\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,delayed_compare,\\\n+  (and (eq_attr \"type\" \"integer,insert,delayed_compare,\\\n \tshift,cntlz,exts\")\n        (eq_attr \"cpu\" \"ppce5500\"))\n   \"e5500_decode,e5500_sfx\")"}, {"sha": "b84f7038b18d5bc351f4e8015a12872c6ce13fd1", "filename": "gcc/config/rs6000/e6500.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fe6500.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fe6500.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe6500.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -59,7 +59,7 @@\n \n ;; SFX.\n (define_insn_reservation \"e6500_sfx\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,delayed_compare,\\\n+  (and (eq_attr \"type\" \"integer,insert,delayed_compare,\\\n \tshift,cntlz,exts\")\n        (eq_attr \"cpu\" \"ppce6500\"))\n   \"e6500_decode,e6500_sfx\")"}, {"sha": "c4dff563bec94cfec10e367810ac996ea8db5003", "filename": "gcc/config/rs6000/mpc.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fmpc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fmpc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fmpc.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -41,7 +41,7 @@\n   \"lsu_mpc\")\n \n (define_insn_reservation \"mpccore-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,trap,\\\n+  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n                         var_shift_rotate,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"mpccore\"))\n   \"iu_mpc\")"}, {"sha": "f905a0d0db482b86bb136c1e61c24099da45136d", "filename": "gcc/config/rs6000/power4.md", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fpower4.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fpower4.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower4.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -210,8 +210,10 @@\n \n ; Integer latency is 2 cycles\n (define_insn_reservation \"power4-integer\" 2\n-  (and (eq_attr \"type\" \"integer,insert_dword,shift,trap,\\\n-                        var_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,shift,trap,\\\n+\t\t\t     var_shift_rotate,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"insert\")\n+\t\t (eq_attr \"size\" \"64\")))\n        (eq_attr \"cpu\" \"power4\"))\n   \"iq_power4\")\n \n@@ -238,7 +240,8 @@\n     |(iu1_power4,nothing,iu1_power4,nothing,iu2_power4))\")\n \n (define_insn_reservation \"power4-insert\" 4\n-  (and (eq_attr \"type\" \"insert_word\")\n+  (and (eq_attr \"type\" \"insert\")\n+       (eq_attr \"size\" \"32\")\n        (eq_attr \"cpu\" \"power4\"))\n   \"(du1_power4+du2_power4|du2_power4+du3_power4|du3_power4+du4_power4),\\\n    ((iu1_power4,nothing,iu2_power4)\\"}, {"sha": "407ec71159b403e3f178f0ce40900a3e6fe045d3", "filename": "gcc/config/rs6000/power5.md", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fpower5.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fpower5.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower5.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -166,8 +166,10 @@\n \n ; Integer latency is 2 cycles\n (define_insn_reservation \"power5-integer\" 2\n-  (and (eq_attr \"type\" \"integer,insert_dword,shift,trap,\\\n-                        var_shift_rotate,cntlz,exts,isel,popcnt\")\n+  (and (ior (eq_attr \"type\" \"integer,shift,trap,\\\n+\t\t\t    var_shift_rotate,cntlz,exts,isel,popcnt\")\n+\t    (and (eq_attr \"type\" \"insert\")\n+\t\t (eq_attr \"size\" \"64\")))\n        (eq_attr \"cpu\" \"power5\"))\n   \"iq_power5\")\n \n@@ -194,7 +196,8 @@\n     |(iu1_power5,nothing,iu2_power5,nothing,iu2_power5))\")\n \n (define_insn_reservation \"power5-insert\" 4\n-  (and (eq_attr \"type\" \"insert_word\")\n+  (and (eq_attr \"type\" \"insert\")\n+       (eq_attr \"size\" \"32\")\n        (eq_attr \"cpu\" \"power5\"))\n   \"du1_power5+du2_power5,iu1_power5,nothing,iu2_power5\")\n "}, {"sha": "3a77fc52c970d0ddbac78de633c8ad34a0b0df58", "filename": "gcc/config/rs6000/power6.md", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fpower6.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fpower6.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower6.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -247,12 +247,14 @@\n   \"FXU_power6\")\n \n (define_insn_reservation \"power6-insert\" 1\n-  (and (eq_attr \"type\" \"insert_word\")\n+  (and (eq_attr \"type\" \"insert\")\n+       (eq_attr \"size\" \"32\")\n        (eq_attr \"cpu\" \"power6\"))\n   \"FX2_power6\")\n \n (define_insn_reservation \"power6-insert-dword\" 1\n-  (and (eq_attr \"type\" \"insert_dword\")\n+  (and (eq_attr \"type\" \"insert\")\n+       (eq_attr \"size\" \"64\")\n        (eq_attr \"cpu\" \"power6\"))\n   \"FX2_power6\")\n "}, {"sha": "d6ddc2434c6cf5aef2f4f9ae54945096f9f10b36", "filename": "gcc/config/rs6000/power7.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fpower7.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fpower7.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower7.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -174,7 +174,7 @@\n \n ; FX Unit\n (define_insn_reservation \"power7-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,trap,\\\n+  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n                         var_shift_rotate,exts,isel,popcnt\")\n        (eq_attr \"cpu\" \"power7\"))\n   \"DU_power7,FXU_power7\")"}, {"sha": "f7bd9f86087751a42b9afd6a677d5bbc9d76837f", "filename": "gcc/config/rs6000/power8.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fpower8.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Fpower8.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower8.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -168,7 +168,7 @@\n \n ; FX Unit\n (define_insn_reservation \"power8-1cyc\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,trap,\\\n+  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n                         var_shift_rotate,exts,isel\")\n        (eq_attr \"cpu\" \"power8\"))\n   \"DU_any_power8,FXU_power8\")"}, {"sha": "c8aba1fbcf3cac2945290f6690796230d18b14c6", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -26240,8 +26240,7 @@ rs6000_adjust_cost (rtx insn, rtx link, rtx dep_insn, int cost)\n                   case TYPE_FAST_COMPARE:\n                   case TYPE_EXTS:\n                   case TYPE_SHIFT:\n-                  case TYPE_INSERT_WORD:\n-                  case TYPE_INSERT_DWORD:\n+                  case TYPE_INSERT:\n                     {\n                       if (! store_data_bypass_p (dep_insn, insn))\n                         return 3;\n@@ -26311,8 +26310,7 @@ rs6000_adjust_cost (rtx insn, rtx link, rtx dep_insn, int cost)\n                   case TYPE_FAST_COMPARE:\n                   case TYPE_EXTS:\n                   case TYPE_SHIFT:\n-                  case TYPE_INSERT_WORD:\n-                  case TYPE_INSERT_DWORD:\n+                  case TYPE_INSERT:\n                     {\n                       if (set_to_load_agen (dep_insn, insn))\n                         return 3;\n@@ -26495,7 +26493,8 @@ is_cracked_insn (rtx insn)\n \t  || (type == TYPE_MUL\n \t      && get_attr_dot (insn) == DOT_YES)\n \t  || type == TYPE_IDIV || type == TYPE_LDIV\n-\t  || type == TYPE_INSERT_WORD)\n+\t  || (type == TYPE_INSERT\n+\t      && get_attr_size (insn) == SIZE_32))\n \treturn true;\n     }\n \n@@ -27320,15 +27319,14 @@ insn_must_be_first_in_group (rtx insn)\n \n       switch (type)\n         {\n-        case TYPE_INSERT_DWORD:\n         case TYPE_EXTS:\n         case TYPE_CNTLZ:\n         case TYPE_SHIFT:\n         case TYPE_VAR_SHIFT_ROTATE:\n         case TYPE_TRAP:\n         case TYPE_MUL:\n         case TYPE_IDIV:\n-        case TYPE_INSERT_WORD:\n+        case TYPE_INSERT:\n         case TYPE_DELAYED_COMPARE:\n         case TYPE_FPCOMPARE:\n         case TYPE_MFCR:"}, {"sha": "0150e435a377702c3e1ad28a5aed0506f039d908", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 11, "deletions": 10, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -159,7 +159,7 @@\n ;; computations.\n (define_attr \"type\"\n   \"integer,two,three,\n-   shift,var_shift_rotate,insert_word,insert_dword,\n+   shift,var_shift_rotate,insert,\n    mul,halfmul,idiv,ldiv,\n    exts,cntlz,popcnt,isel,\n    load,store,fpload,fpstore,vecload,vecstore,\n@@ -175,7 +175,7 @@\n   (const_string \"integer\"))\n \n ;; What data size does this instruction work on?\n-;; This is used for mul.\n+;; This is used for insert, mul.\n (define_attr \"size\" \"8,16,32,64\" (const_string \"32\"))\n \n ;; Is this instruction record form (\"dot\", signed compare to 0, writing CR0)?\n@@ -3417,7 +3417,7 @@\n   operands[1] = GEN_INT (start + size - 1);\n   return \\\"rlwimi %0,%3,%h4,%h2,%h1\\\";\n }\"\n-  [(set_attr \"type\" \"insert_word\")])\n+  [(set_attr \"type\" \"insert\")])\n \n (define_insn \"*insvsi_internal1\"\n   [(set (zero_extract:SI (match_operand:SI 0 \"gpc_reg_operand\" \"+r\")\n@@ -3436,7 +3436,7 @@\n   operands[1] = GEN_INT (start + size - 1);\n   return \\\"rlwimi %0,%3,%h4,%h2,%h1\\\";\n }\"\n-  [(set_attr \"type\" \"insert_word\")])\n+  [(set_attr \"type\" \"insert\")])\n \n (define_insn \"*insvsi_internal2\"\n   [(set (zero_extract:SI (match_operand:SI 0 \"gpc_reg_operand\" \"+r\")\n@@ -3455,7 +3455,7 @@\n   operands[1] = GEN_INT (start + size - 1);\n   return \\\"rlwimi %0,%3,%h4,%h2,%h1\\\";\n }\"\n-  [(set_attr \"type\" \"insert_word\")])\n+  [(set_attr \"type\" \"insert\")])\n \n (define_insn \"*insvsi_internal3\"\n   [(set (zero_extract:SI (match_operand:SI 0 \"gpc_reg_operand\" \"+r\")\n@@ -3474,7 +3474,7 @@\n   operands[1] = GEN_INT (start + size - 1);\n   return \\\"rlwimi %0,%3,%h4,%h2,%h1\\\";\n }\"\n-  [(set_attr \"type\" \"insert_word\")])\n+  [(set_attr \"type\" \"insert\")])\n \n (define_insn \"*insvsi_internal4\"\n   [(set (zero_extract:SI (match_operand:SI 0 \"gpc_reg_operand\" \"+r\")\n@@ -3496,7 +3496,7 @@\n   operands[1] = GEN_INT (insert_start + insert_size - 1);\n   return \\\"rlwimi %0,%3,%h5,%h2,%h1\\\";\n }\"\n-  [(set_attr \"type\" \"insert_word\")])\n+  [(set_attr \"type\" \"insert\")])\n \n ;; combine patterns for rlwimi\n (define_insn \"*insvsi_internal5\"\n@@ -3516,7 +3516,7 @@\n  operands[1] = GEN_INT(me);\n  return \\\"rlwimi %0,%3,%h4,%h2,%h1\\\";\n }\"\n-  [(set_attr \"type\" \"insert_word\")])\n+  [(set_attr \"type\" \"insert\")])\n \n (define_insn \"*insvsi_internal6\"\n   [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n@@ -3535,7 +3535,7 @@\n  operands[1] = GEN_INT(me);\n  return \\\"rlwimi %0,%3,%h4,%h2,%h1\\\";\n }\"\n-  [(set_attr \"type\" \"insert_word\")])\n+  [(set_attr \"type\" \"insert\")])\n \n (define_insn \"insvdi_internal\"\n   [(set (zero_extract:DI (match_operand:DI 0 \"gpc_reg_operand\" \"+r\")\n@@ -3551,7 +3551,8 @@\n   operands[1] = GEN_INT (64 - start - size);\n   return \\\"rldimi %0,%3,%H1,%H2\\\";\n }\"\n-  [(set_attr \"type\" \"insert_dword\")])\n+  [(set_attr \"type\" \"insert\")\n+   (set_attr \"size\" \"64\")])\n \n (define_insn \"*insvdi_internal2\"\n   [(set (zero_extract:DI (match_operand:DI 0 \"gpc_reg_operand\" \"+r\")"}, {"sha": "aaddb5979d6fd5099d3aa1e128188056675cdb6b", "filename": "gcc/config/rs6000/rs64.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Frs64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Frs64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs64.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -46,7 +46,7 @@\n   \"lsu_rs64\")\n \n (define_insn_reservation \"rs64a-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert_word,insert_dword,shift,trap,\\\n+  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n                         var_shift_rotate,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"rs64a\"))\n   \"iu_rs64\")"}, {"sha": "6c7516d3bb251dafeabc9088961be0864ac868ed", "filename": "gcc/config/rs6000/titan.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Ftitan.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58ee9e663594196b2b76669df15e12c1aeff53bf/gcc%2Fconfig%2Frs6000%2Ftitan.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ftitan.md?ref=58ee9e663594196b2b76669df15e12c1aeff53bf", "patch": "@@ -51,7 +51,7 @@\n (define_bypass 2 \"titan_mulhw\" \"titan_mulhw\")\n \n (define_insn_reservation \"titan_fxu_shift_and_rotate\" 2\n-  (and (eq_attr \"type\" \"insert_word,shift,var_shift_rotate,cntlz\")\n+  (and (eq_attr \"type\" \"insert,shift,var_shift_rotate,cntlz\")\n        (eq_attr \"cpu\" \"titan\"))\n   \"titan_issue,titan_fxu_sh,nothing*2,titan_fxu_wb\")\n "}]}