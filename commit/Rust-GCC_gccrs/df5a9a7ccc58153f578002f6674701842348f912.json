{"sha": "df5a9a7ccc58153f578002f6674701842348f912", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGY1YTlhN2NjYzU4MTUzZjU3ODAwMmY2Njc0NzAxODQyMzQ4ZjkxMg==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "2012-01-10T01:01:01Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "2012-01-10T01:01:01Z"}, "message": "Fix bugs in -mvsx-scalar-memory and -mvsx-scalar-double\n\nFrom-SVN: r183048", "tree": {"sha": "602a6bec28f21da0e67a456354cc1102e1fe7ba8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/602a6bec28f21da0e67a456354cc1102e1fe7ba8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df5a9a7ccc58153f578002f6674701842348f912", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df5a9a7ccc58153f578002f6674701842348f912", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df5a9a7ccc58153f578002f6674701842348f912", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df5a9a7ccc58153f578002f6674701842348f912/comments", "author": null, "committer": null, "parents": [{"sha": "a5c1636f5f6a6593c47266fb3de3158c7e465624", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5c1636f5f6a6593c47266fb3de3158c7e465624", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5c1636f5f6a6593c47266fb3de3158c7e465624"}], "stats": {"total": 30, "additions": 25, "deletions": 5}, "files": [{"sha": "c24ea000c1f6b2ff93a20b59825bce75c273bbe5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df5a9a7ccc58153f578002f6674701842348f912/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df5a9a7ccc58153f578002f6674701842348f912/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=df5a9a7ccc58153f578002f6674701842348f912", "patch": "@@ -1,3 +1,12 @@\n+\n+\t* config/rs6000/rs6000.c (rs6000_init_hard_regno_mode_ok): Add DF\n+\treload patterns if -mvsx-scalar-memory.\n+\n+\t* config/rs6000/vsx.md (vsx_xscvspdp): Allow xscvspdp to be\n+\tgenerated, even -mno-vsx-scalar-double was used.\n+\t(vsx_xscvdpsp_scalar): Likewise.\n+\t(vsx_xscvspdp_scalar2): Likewise.\n+\n 2012-01-09  Tom de Vries  <tom@codesourcery.com>\n \t    Andrew Pinski  <apinski@cavium.com>\n "}, {"sha": "5329153342893c3bc71cb45d56d9d40700726f5f", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df5a9a7ccc58153f578002f6674701842348f912/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df5a9a7ccc58153f578002f6674701842348f912/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=df5a9a7ccc58153f578002f6674701842348f912", "patch": "@@ -1,6 +1,7 @@\n /* Subroutines used for code generation on IBM RS/6000.\n    Copyright (C) 1991, 1993, 1994, 1995, 1996, 1997, 1998, 1999,\n-   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011\n+   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011,\n+   2012\n    Free Software Foundation, Inc.\n    Contributed by Richard Kenner (kenner@vlsi1.ultra.nyu.edu)\n \n@@ -2332,6 +2333,11 @@ rs6000_init_hard_regno_mode_ok (bool global_init_p)\n \t  rs6000_vector_reload[V4SFmode][1]  = CODE_FOR_reload_v4sf_di_load;\n \t  rs6000_vector_reload[V2DFmode][0]  = CODE_FOR_reload_v2df_di_store;\n \t  rs6000_vector_reload[V2DFmode][1]  = CODE_FOR_reload_v2df_di_load;\n+\t  if (TARGET_VSX && TARGET_VSX_SCALAR_MEMORY)\n+\t    {\n+\t      rs6000_vector_reload[DFmode][0]  = CODE_FOR_reload_df_di_store;\n+\t      rs6000_vector_reload[DFmode][1]  = CODE_FOR_reload_df_di_load;\n+\t    }\n \t}\n       else\n \t{\n@@ -2347,6 +2353,11 @@ rs6000_init_hard_regno_mode_ok (bool global_init_p)\n \t  rs6000_vector_reload[V4SFmode][1]  = CODE_FOR_reload_v4sf_si_load;\n \t  rs6000_vector_reload[V2DFmode][0]  = CODE_FOR_reload_v2df_si_store;\n \t  rs6000_vector_reload[V2DFmode][1]  = CODE_FOR_reload_v2df_si_load;\n+\t  if (TARGET_VSX && TARGET_VSX_SCALAR_MEMORY)\n+\t    {\n+\t      rs6000_vector_reload[DFmode][0]  = CODE_FOR_reload_df_si_store;\n+\t      rs6000_vector_reload[DFmode][1]  = CODE_FOR_reload_df_si_load;\n+\t    }\n \t}\n     }\n "}, {"sha": "c23a835367f3fbd6315357150ff27bf19a11c5c5", "filename": "gcc/config/rs6000/vsx.md", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df5a9a7ccc58153f578002f6674701842348f912/gcc%2Fconfig%2Frs6000%2Fvsx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df5a9a7ccc58153f578002f6674701842348f912/gcc%2Fconfig%2Frs6000%2Fvsx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fvsx.md?ref=df5a9a7ccc58153f578002f6674701842348f912", "patch": "@@ -1,5 +1,5 @@\n ;; VSX patterns.\n-;; Copyright (C) 2009, 2010, 2011\n+;; Copyright (C) 2009, 2010, 2011, 2012\n ;; Free Software Foundation, Inc.\n ;; Contributed by Michael Meissner <meissner@linux.vnet.ibm.com>\n \n@@ -919,7 +919,7 @@\n   [(set (match_operand:DF 0 \"vsx_register_operand\" \"=ws,?wa\")\n \t(unspec:DF [(match_operand:V4SF 1 \"vsx_register_operand\" \"wa,wa\")]\n \t\t   UNSPEC_VSX_CVSPDP))]\n-  \"VECTOR_UNIT_VSX_P (DFmode)\"\n+  \"VECTOR_UNIT_VSX_P (V4SFmode)\"\n   \"xscvspdp %x0,%x1\"\n   [(set_attr \"type\" \"fp\")])\n \n@@ -929,7 +929,7 @@\n   [(set (match_operand:V4SF 0 \"vsx_register_operand\" \"=wa\")\n \t(unspec:V4SF [(match_operand:SF 1 \"vsx_register_operand\" \"f\")]\n \t\t     UNSPEC_VSX_CVSPDP))]\n-  \"VECTOR_UNIT_VSX_P (DFmode)\"\n+  \"VECTOR_UNIT_VSX_P (V4SFmode)\"\n   \"xscvdpsp %x0,%x1\"\n   [(set_attr \"type\" \"fp\")])\n \n@@ -938,7 +938,7 @@\n   [(set (match_operand:SF 0 \"vsx_register_operand\" \"=f\")\n \t(unspec:SF [(match_operand:V4SF 1 \"vsx_register_operand\" \"wa\")]\n \t\t   UNSPEC_VSX_CVSPDP))]\n-  \"VECTOR_UNIT_VSX_P (DFmode)\"\n+  \"VECTOR_UNIT_VSX_P (V4SFmode)\"\n   \"xscvspdp %x0,%x1\"\n   [(set_attr \"type\" \"fp\")])\n "}]}