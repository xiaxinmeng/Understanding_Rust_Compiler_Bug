{"sha": "570621d5ba905e7ed5248c62317437ac7a3f2206", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTcwNjIxZDViYTkwNWU3ZWQ1MjQ4YzYyMzE3NDM3YWM3YTNmMjIwNg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1999-07-09T19:12:30Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1999-07-09T19:12:30Z"}, "message": "Fix -g -O3 -funroll-all-loops irix6 bootstrap failure reported by Kaveh Ghazi.\n\n\t* unroll.c (unroll_loops): Don't delete named CODE_LABELs.\n\nFrom-SVN: r28048", "tree": {"sha": "7d01a74ffac5e34fc5f2ce22bb3c32e2dcf79980", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7d01a74ffac5e34fc5f2ce22bb3c32e2dcf79980"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/570621d5ba905e7ed5248c62317437ac7a3f2206", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/570621d5ba905e7ed5248c62317437ac7a3f2206", "html_url": "https://github.com/Rust-GCC/gccrs/commit/570621d5ba905e7ed5248c62317437ac7a3f2206", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/570621d5ba905e7ed5248c62317437ac7a3f2206/comments", "author": null, "committer": null, "parents": [{"sha": "c3c7ea1f569fe100675cd5ce0eca1d5f2f8f6c34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3c7ea1f569fe100675cd5ce0eca1d5f2f8f6c34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3c7ea1f569fe100675cd5ce0eca1d5f2f8f6c34"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "d2b35831e2771eed7fdd6bebe99758e7d024492b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/570621d5ba905e7ed5248c62317437ac7a3f2206/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/570621d5ba905e7ed5248c62317437ac7a3f2206/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=570621d5ba905e7ed5248c62317437ac7a3f2206", "patch": "@@ -1,3 +1,7 @@\n+Fri Jul  9 19:08:55 1999  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* unroll.c (unroll_loops): Don't delete named CODE_LABELs.\n+\n Fri Jul  9 18:54:18 1999  Felix Lee  <flee@cygnus.com>\n \n \t* config/i960/i960.c (ret_label): Change asm label from \"LR:\" to"}, {"sha": "d6dbcf0fbc1d151382bbb30773d1bb03d661cec8", "filename": "gcc/unroll.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/570621d5ba905e7ed5248c62317437ac7a3f2206/gcc%2Funroll.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/570621d5ba905e7ed5248c62317437ac7a3f2206/gcc%2Funroll.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funroll.c?ref=570621d5ba905e7ed5248c62317437ac7a3f2206", "patch": "@@ -1262,11 +1262,16 @@ unroll_loop (loop_end, insn_count, loop_start, end_insert_before,\n   insn = NEXT_INSN (copy_start);\n   while (insn != safety_label)\n     {\n-      /* ??? We can't delete a NOTE_INSN_DELETED_LABEL unless we fix the\n-\t DECL_RTL field of the associated LABEL_DECL to point to (one of)\n-\t the new copies of the label.  Otherwise, we hit an abort in\n-\t dwarfout.c/dwarf2out.c.  */\n+      /* ??? Don't delete named code labels.  They will be deleted when the\n+\t jump that references them is deleted.  Otherwise, we end up deleting\n+\t them twice, which causes them to completely disappear instead of turn\n+\t into NOTE_INSN_DELETED_LABEL notes.  This in turn causes aborts in\n+\t dwarfout.c/dwarf2out.c.  We could perhaps fix the dwarf*out.c files\n+\t to handle deleted labels instead.  Or perhaps fix DECL_RTL of the\n+\t associated LABEL_DECL to point to one of the new label instances.  */\n+      /* ??? Likewise, we can't delete a NOTE_INSN_DELETED_LABEL note.  */\n       if (insn != start_label\n+\t  && ! (GET_CODE (insn) == CODE_LABEL && LABEL_NAME (insn))\n \t  && ! (GET_CODE (insn) == NOTE\n \t\t&& NOTE_LINE_NUMBER (insn) == NOTE_INSN_DELETED_LABEL))\n \tinsn = delete_insn (insn);"}]}