{"sha": "06bca6950b154d7c85762acf1593d6792f8a2617", "node_id": "C_kwDOANBUbNoAKDA2YmNhNjk1MGIxNTRkN2M4NTc2MmFjZjE1OTNkNjc5MmY4YTI2MTc", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@arm.com", "date": "2022-08-17T08:06:24Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@arm.com", "date": "2022-08-17T11:49:12Z"}, "message": "arm: Define with_float to hard when target name ends with hf\n\nOn arm, the --with-float= configure option is used to define include\nfiles search path (among other things).  However, when targeting\narm-linux-gnueabihf, one would expect to automatically default to the\nhard-float ABI, but this is not the case. As a consequence, GCC\nbootstrap fails on an arm-linux-gnueabihf target if --with-float=hard\nis not used.\n\nThis patch checks if the target name ends with 'hf' and defines\nwith_float to hard if not already defined.  This is achieved in\ngcc/config.gcc, just before selecting the default CPU depending on the\n$with_float value.\n\n2022-08-17  Christophe Lyon  <christophe.lyon@arm.com>\n\n\tgcc/\n\t* config.gcc (arm): Define with_float to hard if target name ends\n\twith 'hf'.", "tree": {"sha": "34c612834227c393de3ca3800b157b41fe9adb6f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/34c612834227c393de3ca3800b157b41fe9adb6f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/06bca6950b154d7c85762acf1593d6792f8a2617", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06bca6950b154d7c85762acf1593d6792f8a2617", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06bca6950b154d7c85762acf1593d6792f8a2617", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06bca6950b154d7c85762acf1593d6792f8a2617/comments", "author": null, "committer": null, "parents": [{"sha": "bac07a1da24fbc40720bd4080caaea6fa7769672", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bac07a1da24fbc40720bd4080caaea6fa7769672", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bac07a1da24fbc40720bd4080caaea6fa7769672"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "02f58970db0f0bb0182d54055c28898cfd4fd118", "filename": "gcc/config.gcc", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06bca6950b154d7c85762acf1593d6792f8a2617/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06bca6950b154d7c85762acf1593d6792f8a2617/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=06bca6950b154d7c85762acf1593d6792f8a2617", "patch": "@@ -1314,6 +1314,13 @@ arm*-*-linux-* | arm*-*-uclinuxfdpiceabi)\n \t    tm_file=\"$tm_file arm/uclinuxfdpiceabi.h\"\n \t    ;;\n \tesac\n+\t# Define with_float to \"hard\" if not already defined and\n+\t# target name ends with \"hf\"\n+\tcase $target:$with_float in\n+\tarm*-*-*hf:)\n+\t    with_float=hard\n+\t    ;;\n+\tesac\n \t# Generation of floating-point instructions requires at least ARMv5te.\n \tif [ \"$with_float\" = \"hard\" -o \"$with_float\" = \"softfp\" ] ; then\n \t    target_cpu_cname=\"arm10e\""}]}