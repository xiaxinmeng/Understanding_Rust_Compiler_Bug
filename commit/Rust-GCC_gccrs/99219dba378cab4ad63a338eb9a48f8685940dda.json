{"sha": "99219dba378cab4ad63a338eb9a48f8685940dda", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTkyMTlkYmEzNzhjYWI0YWQ2M2EzMzhlYjlhNDhmODY4NTk0MGRkYQ==", "commit": {"author": {"name": "Andrey Belevantsev", "email": "abel@ispras.ru", "date": "2018-04-23T15:19:06Z"}, "committer": {"name": "Andrey Belevantsev", "email": "abel@gcc.gnu.org", "date": "2018-04-23T15:19:06Z"}, "message": "re PR rtl-optimization/85423 (ICE in code_motion_process_successors, at sel-sched.c:6403)\n\n        PR rtl-optimization/85423\n\n        * sel-sched-ir.c (has_dependence_note_mem_dep): Only discard\n        dependencies to debug insns when the previous insn is non-debug.\n\n        * gcc.dg/pr85423.c: New test.\n\nFrom-SVN: r259563", "tree": {"sha": "035b6d33491758fed68fc5f9b173f71a5a905eb4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/035b6d33491758fed68fc5f9b173f71a5a905eb4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/99219dba378cab4ad63a338eb9a48f8685940dda", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99219dba378cab4ad63a338eb9a48f8685940dda", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99219dba378cab4ad63a338eb9a48f8685940dda", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99219dba378cab4ad63a338eb9a48f8685940dda/comments", "author": {"login": "abonzo", "id": 20396542, "node_id": "MDQ6VXNlcjIwMzk2NTQy", "avatar_url": "https://avatars.githubusercontent.com/u/20396542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abonzo", "html_url": "https://github.com/abonzo", "followers_url": "https://api.github.com/users/abonzo/followers", "following_url": "https://api.github.com/users/abonzo/following{/other_user}", "gists_url": "https://api.github.com/users/abonzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/abonzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abonzo/subscriptions", "organizations_url": "https://api.github.com/users/abonzo/orgs", "repos_url": "https://api.github.com/users/abonzo/repos", "events_url": "https://api.github.com/users/abonzo/events{/privacy}", "received_events_url": "https://api.github.com/users/abonzo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0ef9f21d3c4de3a6af258338523d35ea6c4d492f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ef9f21d3c4de3a6af258338523d35ea6c4d492f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ef9f21d3c4de3a6af258338523d35ea6c4d492f"}], "stats": {"total": 41, "additions": 40, "deletions": 1}, "files": [{"sha": "135ac8809338cee4d056e24576f2bcb630508019", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99219dba378cab4ad63a338eb9a48f8685940dda/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99219dba378cab4ad63a338eb9a48f8685940dda/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=99219dba378cab4ad63a338eb9a48f8685940dda", "patch": "@@ -1,3 +1,10 @@\n+2018-04-23  Andrey Belevantsev  <abel@ispras.ru>\n+\n+        PR rtl-optimization/85423\n+\n+        * sel-sched-ir.c (has_dependence_note_mem_dep): Only discard\n+        dependencies to debug insns when the previous insn is non-debug.\n+\n 2018-04-23  Claudiu Zissulescu  <claziss@synopsys.com>\n \n \t* config/arc/arc.md (\"vunspec\"): Delete it, unify all the unspec"}, {"sha": "85ff5bd3eb46bee6037767d33f17071a6bba7537", "filename": "gcc/sel-sched-ir.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99219dba378cab4ad63a338eb9a48f8685940dda/gcc%2Fsel-sched-ir.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99219dba378cab4ad63a338eb9a48f8685940dda/gcc%2Fsel-sched-ir.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsel-sched-ir.c?ref=99219dba378cab4ad63a338eb9a48f8685940dda", "patch": "@@ -3308,7 +3308,7 @@ has_dependence_note_dep (insn_t pro, ds_t ds ATTRIBUTE_UNUSED)\n      that a bookkeeping copy should be movable as the original insn.\n      Detect that here and allow that movement if we allowed it before\n      in the first place.  */\n-  if (DEBUG_INSN_P (real_con)\n+  if (DEBUG_INSN_P (real_con) && !DEBUG_INSN_P (real_pro)\n       && INSN_UID (NEXT_INSN (pro)) == INSN_UID (real_con))\n     return;\n "}, {"sha": "0b34bec128fb72d31736d7a963997586de49498e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99219dba378cab4ad63a338eb9a48f8685940dda/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99219dba378cab4ad63a338eb9a48f8685940dda/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=99219dba378cab4ad63a338eb9a48f8685940dda", "patch": "@@ -1,3 +1,8 @@\n+2018-04-23  Andrey Belevantsev  <abel@ispras.ru>\n+\n+        PR rtl-optimization/85423\n+        * gcc.dg/pr85423.c: New test.\n+\n 2018-04-20  Martin Sebor  <msebor@redhat.com>\n \n \tPR c/85365"}, {"sha": "2650d86f3567e18e9969e97012257e571990bea4", "filename": "gcc/testsuite/gcc.dg/pr85423.c", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99219dba378cab4ad63a338eb9a48f8685940dda/gcc%2Ftestsuite%2Fgcc.dg%2Fpr85423.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99219dba378cab4ad63a338eb9a48f8685940dda/gcc%2Ftestsuite%2Fgcc.dg%2Fpr85423.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr85423.c?ref=99219dba378cab4ad63a338eb9a48f8685940dda", "patch": "@@ -0,0 +1,27 @@\n+/* { dg-do compile { target powerpc*-*-* ia64-*-* i?86-*-* x86_64-*-* } } */\n+/* { dg-options \"-O2 -fselective-scheduling2 -fvar-tracking-assignments -fno-guess-branch-probability -fno-peephole2 -fno-ssa-phiopt -fno-tree-pre --param max-jump-thread-duplication-stmts=8 -w\" } */\n+/* { dg-additional-options \"-march=nano\" { target i?86-*-* x86_64-*-* } } */\n+\n+int vn, xm;\n+\n+void\n+i1 (int);\n+\n+void\n+mb (int *ap, int ev)\n+{\n+  while (vn < 1)\n+    {\n+      i1 (vn);\n+\n+      ev += *ap && ++vn;\n+\n+      while (xm < 1)\n+        ++xm;\n+\n+      if (*ap == 0)\n+        *ap = ev;\n+\n+      ++vn;\n+    }\n+}"}]}