{"sha": "8d49831d20cea5e4114d5a692e427a875284ad10", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQ0OTgzMWQyMGNlYTVlNDExNGQ1YTY5MmU0MjdhODc1Mjg0YWQxMA==", "commit": {"author": {"name": "Bob Wilson", "email": "bob.wilson@acm.org", "date": "2003-03-12T20:50:24Z"}, "committer": {"name": "Bob Wilson", "email": "bwilson@gcc.gnu.org", "date": "2003-03-12T20:50:24Z"}, "message": "xtensa.md (adddi3): Don't clobber source operand used to detect carry.\n\n        * config/xtensa/xtensa.md (adddi3): Don't clobber source operand used\n        to detect carry.\n        (subdi3): Reorder emitted instructions.\n\nFrom-SVN: r64262", "tree": {"sha": "7aa024199dec5f1f2391621ce8de572b8a58fb03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7aa024199dec5f1f2391621ce8de572b8a58fb03"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d49831d20cea5e4114d5a692e427a875284ad10", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d49831d20cea5e4114d5a692e427a875284ad10", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d49831d20cea5e4114d5a692e427a875284ad10", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d49831d20cea5e4114d5a692e427a875284ad10/comments", "author": null, "committer": null, "parents": [{"sha": "bfa2615fe1a58d3efc0e3866d88fa0dfe0b94f04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfa2615fe1a58d3efc0e3866d88fa0dfe0b94f04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfa2615fe1a58d3efc0e3866d88fa0dfe0b94f04"}], "stats": {"total": 23, "additions": 21, "deletions": 2}, "files": [{"sha": "9a3a8e6dbfcc090c197dc4c7febd2799b3444dab", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49831d20cea5e4114d5a692e427a875284ad10/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49831d20cea5e4114d5a692e427a875284ad10/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8d49831d20cea5e4114d5a692e427a875284ad10", "patch": "@@ -1,3 +1,9 @@\n+2003-03-12  Bob Wilson  <bob.wilson@acm.org>\n+\n+        * config/xtensa/xtensa.md (adddi3): Don't clobber source operand used\n+\tto detect carry.\n+        (subdi3): Reorder emitted instructions.\n+\n 2003-03-12  Andreas Jaeger  <aj@suse.de>\n \n \t* config/i386/netbsd64.h (TARGET_OS_CPP_BUILTINS): Remove call to"}, {"sha": "cc722b932a9286ee81d8a985821ffd09befa85ac", "filename": "gcc/config/xtensa/xtensa.md", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d49831d20cea5e4114d5a692e427a875284ad10/gcc%2Fconfig%2Fxtensa%2Fxtensa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d49831d20cea5e4114d5a692e427a875284ad10/gcc%2Fconfig%2Fxtensa%2Fxtensa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.md?ref=8d49831d20cea5e4114d5a692e427a875284ad10", "patch": "@@ -97,6 +97,7 @@\n   \"\"\n   \"\n {\n+  rtx srclo;\n   rtx dstlo = gen_lowpart (SImode, operands[0]);\n   rtx src1lo = gen_lowpart (SImode, operands[1]);\n   rtx src2lo = gen_lowpart (SImode, operands[2]);\n@@ -105,9 +106,21 @@\n   rtx src1hi = gen_highpart (SImode, operands[1]);\n   rtx src2hi = gen_highpart (SImode, operands[2]);\n \n+  /* Either source can be used for overflow checking, as long as it's\n+     not clobbered by the first addition.  */\n+  if (!rtx_equal_p (dstlo, src1lo))\n+    srclo = src1lo;\n+  else if (!rtx_equal_p (dstlo, src2lo))\n+    srclo = src2lo;\n+  else\n+    {\n+      srclo = gen_reg_rtx (SImode);\n+      emit_move_insn (srclo, src1lo);\n+    }\n+\n   emit_insn (gen_addsi3 (dstlo, src1lo, src2lo));\n   emit_insn (gen_addsi3 (dsthi, src1hi, src2hi));\n-  emit_insn (gen_adddi_carry (dsthi, dstlo, src2lo));\n+  emit_insn (gen_adddi_carry (dsthi, dstlo, srclo));\n   DONE;\n }\")\n \n@@ -209,9 +222,9 @@\n   rtx src1hi = gen_highpart (SImode, operands[1]);\n   rtx src2hi = gen_highpart (SImode, operands[2]);\n \n-  emit_insn (gen_subsi3 (dstlo, src1lo, src2lo));\n   emit_insn (gen_subsi3 (dsthi, src1hi, src2hi));\n   emit_insn (gen_subdi_carry (dsthi, src1lo, src2lo));\n+  emit_insn (gen_subsi3 (dstlo, src1lo, src2lo));\n   DONE;\n }\")\n "}]}