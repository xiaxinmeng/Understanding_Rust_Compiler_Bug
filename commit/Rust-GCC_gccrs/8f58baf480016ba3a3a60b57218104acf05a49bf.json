{"sha": "8f58baf480016ba3a3a60b57218104acf05a49bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGY1OGJhZjQ4MDAxNmJhM2EzYTYwYjU3MjE4MTA0YWNmMDVhNDliZg==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@albatross.co.nz", "date": "2001-04-02T05:23:10Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2001-04-02T05:23:10Z"}, "message": "natSystem.cc (init_properties): Revert yesterday's changes to \"file.separator\"...\n\n\t* java/lang/natSystem.cc (init_properties): Revert yesterday's changes\n\tto \"file.separator\", \"path.separator\", and \"java.io.tmpdir\" property\n\tinitialization.\n\t* java/io/File.java: Likewise.\n\t* java/io/natFile.cc (init_native): Likewise.\n\t* java/io/natFileWin32.cc (init_native): Likewise.\n\nFrom-SVN: r40994", "tree": {"sha": "d42597c75d702a648db5a0edd2bb5836d74ce443", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d42597c75d702a648db5a0edd2bb5836d74ce443"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8f58baf480016ba3a3a60b57218104acf05a49bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f58baf480016ba3a3a60b57218104acf05a49bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f58baf480016ba3a3a60b57218104acf05a49bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f58baf480016ba3a3a60b57218104acf05a49bf/comments", "author": null, "committer": null, "parents": [{"sha": "a3406c06c269f8960be29474b19bb1bcb2ac6775", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3406c06c269f8960be29474b19bb1bcb2ac6775", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3406c06c269f8960be29474b19bb1bcb2ac6775"}], "stats": {"total": 60, "additions": 26, "deletions": 34}, "files": [{"sha": "55618ff51bead1cb04df1de537bc559d513d63c9", "filename": "libjava/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f58baf480016ba3a3a60b57218104acf05a49bf/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f58baf480016ba3a3a60b57218104acf05a49bf/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=8f58baf480016ba3a3a60b57218104acf05a49bf", "patch": "@@ -1,3 +1,12 @@\n+2001-04-02  Bryce McKinlay  <bryce@albatross.co.nz>\n+\n+\t* java/lang/natSystem.cc (init_properties): Revert yesterday's changes\n+\tto \"file.separator\", \"path.separator\", and \"java.io.tmpdir\" property\n+\tinitialization.\n+\t* java/io/File.java: Likewise.\n+\t* java/io/natFile.cc (init_native): Likewise.\n+\t* java/io/natFileWin32.cc (init_native): Likewise.\n+\n 2001-04-01  Per Bothner  <per@bothner.com>\n \n \t* java/lang/natString.cc (intern):  If string's data does not point to"}, {"sha": "71da25565554034aa5cf22c70db48116bb5ed51d", "filename": "libjava/java/io/File.java", "status": "modified", "additions": 8, "deletions": 15, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f58baf480016ba3a3a60b57218104acf05a49bf/libjava%2Fjava%2Fio%2FFile.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f58baf480016ba3a3a60b57218104acf05a49bf/libjava%2Fjava%2Fio%2FFile.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FFile.java?ref=8f58baf480016ba3a3a60b57218104acf05a49bf", "patch": "@@ -195,11 +195,6 @@ private final native Object[] performList (FilenameFilter filter,\n \t\t\t\t\t     FileFilter fileFilter,\n \t\t\t\t\t     Class result_type);\n \n-  // Arguments for the performList function. Specifies whether we want\n-  // File objects or path strings in the returned object array.\n-  private final static int OBJECTS = 0;\n-  private final static int STRINGS = 1;\n-\n   public String[] list (FilenameFilter filter)\n   {\n     checkRead();\n@@ -435,25 +430,23 @@ public boolean setLastModified(long time)\n     return performSetLastModified(time);\n   }\n \n-  public static final String separator = null;\n-  public static final String pathSeparator = null;\n-  static final String tmpdir = null;\n+  public static final String pathSeparator\n+    = System.getProperty(\"path.separator\");\n+  public static final char pathSeparatorChar = pathSeparator.charAt(0);\n+  public static final String separator = System.getProperty(\"file.separator\");\n+  public static final char separatorChar = separator.charAt(0);\n+\n+  static final String tmpdir = System.getProperty(\"java.io.tmpdir\");\n   static int maxPathLen;\n   static boolean caseSensitive;\n   \n-  public static final char separatorChar;\n-  public static final char pathSeparatorChar;\n-  \n   static\n   {\n     init_native();\n-    pathSeparatorChar = pathSeparator.charAt(0);\n-    separatorChar = separator.charAt(0);\n   }\n   \n   // Native function called at class initialization. This should should\n-  // set the separator, pathSeparator, tmpdir, maxPathLen, and caseSensitive\n-  // variables.\n+  // set the maxPathLen and caseSensitive variables.\n   private static native void init_native();\n \n   // The path."}, {"sha": "89cdec6ebeb48d22dc5218b8564c3aba6830da24", "filename": "libjava/java/io/natFile.cc", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f58baf480016ba3a3a60b57218104acf05a49bf/libjava%2Fjava%2Fio%2FnatFile.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f58baf480016ba3a3a60b57218104acf05a49bf/libjava%2Fjava%2Fio%2FnatFile.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFile.cc?ref=8f58baf480016ba3a3a60b57218104acf05a49bf", "patch": "@@ -338,13 +338,6 @@ java::io::File::performDelete (void)\n void\n java::io::File::init_native ()\n {\n-  separator = JvNewStringLatin1 (\"/\");\n-  pathSeparator = JvNewStringLatin1 (\":\");\n-  \n-  char *tmp = ::getenv(\"TMPDIR\");\n-  if (! tmp)\n-    tmp = \"/tmp\";\n-  tmpdir = JvNewStringLatin1 (tmp);\n   maxPathLen = MAXPATHLEN;\n   caseSensitive = true;\n }"}, {"sha": "eb1dc191ca8693e51ec1b70d78b000190d927639", "filename": "libjava/java/io/natFileWin32.cc", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f58baf480016ba3a3a60b57218104acf05a49bf/libjava%2Fjava%2Fio%2FnatFileWin32.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f58baf480016ba3a3a60b57218104acf05a49bf/libjava%2Fjava%2Fio%2FnatFileWin32.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFileWin32.cc?ref=8f58baf480016ba3a3a60b57218104acf05a49bf", "patch": "@@ -248,9 +248,6 @@ java::io::File::performDelete ()\n void\n java::io::File::init_native ()\n {\n-  separator = JvNewStringLatin1 (\"\\\\\");\n-  pathSeparator = JvNewStringLatin1 (\";\");\n-  tmpdir = JvNewStringLatin1 (\"C:\\\\temp\"); // FIXME?\n   maxPathLen = MAX_PATH;\n   caseSensitive = false;\n }"}, {"sha": "abf62caae8a2770561d976e71018abfb7b871fb3", "filename": "libjava/java/lang/natSystem.cc", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f58baf480016ba3a3a60b57218104acf05a49bf/libjava%2Fjava%2Flang%2FnatSystem.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f58baf480016ba3a3a60b57218104acf05a49bf/libjava%2Fjava%2Flang%2FnatSystem.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatSystem.cc?ref=8f58baf480016ba3a3a60b57218104acf05a49bf", "patch": "@@ -55,7 +55,6 @@ details.  */\n #include <java/lang/StringBuffer.h>\n #include <java/util/Properties.h>\n #include <java/util/TimeZone.h>\n-#include <java/io/File.h>\n #include <java/io/PrintStream.h>\n #include <java/io/InputStream.h>\n \n@@ -324,19 +323,20 @@ java::lang::System::init_properties (void)\n   \n   SET (\"file.encoding\", default_file_encoding);\n \n-  JvInitClass (&java::io::File::class$);  \n-  newprops->put (JvNewStringLatin1 (\"file.separator\"), \n-\t\t java::io::File::separator);\n-  newprops->put (JvNewStringLatin1 (\"path.separator\"),\n-\t\t java::io::File::pathSeparator);\n-  newprops->put (JvNewStringLatin1 (\"java.io.tmpdir\"), \n-\t\t java::io::File::tmpdir);\n-\n #ifdef WIN32\n+  SET (\"file.separator\", \"\\\\\");\n+  SET (\"path.separator\", \";\");\n   SET (\"line.separator\", \"\\r\\n\");\n+  SET (\"java.io.tmpdir\", \"C:\\\\temp\");\n #else\n   // Unix.\n+  SET (\"file.separator\", \"/\");\n+  SET (\"path.separator\", \":\");\n   SET (\"line.separator\", \"\\n\");\n+  char *tmpdir = ::getenv(\"TMPDIR\");\n+  if (! tmpdir)\n+    tmpdir = \"/tmp\";\n+  SET (\"java.io.tmpdir\", tmpdir);\n #endif\n \n #ifdef HAVE_UNAME"}]}