{"sha": "52889bc8181bed43cc0dff3e285f57cff9b9d2ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTI4ODliYzgxODFiZWQ0M2NjMGRmZjNlMjg1ZjU3Y2ZmOWI5ZDJhYg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@markmitchell.com", "date": "1998-07-16T11:46:44Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-07-16T11:46:44Z"}, "message": "semantics.c (finish_object_call_expr): Move test for the function called being a TYPE_DECL to ...\n\n1998-07-16  Mark Mitchell  <mark@markmitchell.com>\n\t* semantics.c (finish_object_call_expr): Move test for the\n\tfunction called being a TYPE_DECL to ...\n\t* call.c (build_new_method_call): Here.\n\nFrom-SVN: r21213", "tree": {"sha": "a6e848c78d9073f720fbddc475ad6ab9b8ba81be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a6e848c78d9073f720fbddc475ad6ab9b8ba81be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/52889bc8181bed43cc0dff3e285f57cff9b9d2ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52889bc8181bed43cc0dff3e285f57cff9b9d2ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52889bc8181bed43cc0dff3e285f57cff9b9d2ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52889bc8181bed43cc0dff3e285f57cff9b9d2ab/comments", "author": null, "committer": null, "parents": [{"sha": "439041b9178b4e49c55eecc0a79d332b18a91e3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/439041b9178b4e49c55eecc0a79d332b18a91e3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/439041b9178b4e49c55eecc0a79d332b18a91e3d"}], "stats": {"total": 45, "additions": 39, "deletions": 6}, "files": [{"sha": "08b57eb98fbb96453ee1c2318b0ed1ec26880f05", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52889bc8181bed43cc0dff3e285f57cff9b9d2ab/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52889bc8181bed43cc0dff3e285f57cff9b9d2ab/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=52889bc8181bed43cc0dff3e285f57cff9b9d2ab", "patch": "@@ -1,3 +1,9 @@\n+1998-07-16  Mark Mitchell  <mark@markmitchell.com>\n+\n+\t* semantics.c (finish_object_call_expr): Move test for the\n+\tfunction called being a TYPE_DECL to ...\n+\t* call.c (build_new_method_call): Here.\n+\n 1998-07-15  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* decl2.c (arg_assoc_class): Also look at template arguments, if any."}, {"sha": "7a8719153cb547806830129b0aa78f29ecb2e776", "filename": "gcc/cp/call.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52889bc8181bed43cc0dff3e285f57cff9b9d2ab/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52889bc8181bed43cc0dff3e285f57cff9b9d2ab/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=52889bc8181bed43cc0dff3e285f57cff9b9d2ab", "patch": "@@ -3552,6 +3552,12 @@ build_new_method_call (instance, name, args, basetype_path, flags)\n       template_only = 1;\n     }\n \n+  if (TREE_CODE (name) == TYPE_DECL)\n+    {\n+      cp_error (\"calling type `%T' like a method\", name);\n+      return error_mark_node;\n+    }\n+    \n   /* If there is an extra argument for controlling virtual bases,\n      remove it for error reporting.  */\n   if (flags & LOOKUP_HAS_IN_CHARGE)"}, {"sha": "cae0b6734661ac9c0625de88f40a089a7d92934d", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52889bc8181bed43cc0dff3e285f57cff9b9d2ab/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52889bc8181bed43cc0dff3e285f57cff9b9d2ab/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=52889bc8181bed43cc0dff3e285f57cff9b9d2ab", "patch": "@@ -922,12 +922,6 @@ finish_object_call_expr (fn, object, args)\n   tree real_fn = build_component_ref (object, fn, NULL_TREE, 1);\n   return finish_call_expr (real_fn, args);\n #else\n-  if (TREE_CODE (fn) == TYPE_DECL)\n-    {\n-      cp_error (\"calling type `%T' like a method\", fn);\n-      return error_mark_node;\n-    }\n-\n   return build_method_call (object, fn, args, NULL_TREE, LOOKUP_NORMAL);\n #endif\n }"}, {"sha": "257d5473295fbd6883c9f7550c6ebdcc3ecdf10a", "filename": "gcc/testsuite/g++.old-deja/g++.pt/call1.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52889bc8181bed43cc0dff3e285f57cff9b9d2ab/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcall1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52889bc8181bed43cc0dff3e285f57cff9b9d2ab/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcall1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcall1.C?ref=52889bc8181bed43cc0dff3e285f57cff9b9d2ab", "patch": "@@ -0,0 +1,13 @@\n+// Build don't link:\n+\n+struct IsCompressed { };\n+struct Field {\n+  bool IsCompressed() const { return true; }\n+};\n+\n+template<class C>\n+inline bool\n+for_each(const Field& p, IsCompressed, C)\n+{\n+  return p.IsCompressed();\n+}"}, {"sha": "51b246948ed14763bc7c54892971b979c49500d6", "filename": "gcc/testsuite/g++.old-deja/g++.pt/call2.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52889bc8181bed43cc0dff3e285f57cff9b9d2ab/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcall2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52889bc8181bed43cc0dff3e285f57cff9b9d2ab/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcall2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcall2.C?ref=52889bc8181bed43cc0dff3e285f57cff9b9d2ab", "patch": "@@ -0,0 +1,14 @@\n+// Build don't link:\n+\n+struct IsCompressed { };\n+struct Field {\n+};\n+\n+template<class C>\n+inline bool\n+for_each(const Field& p, IsCompressed, C)\n+{\n+  return p.IsCompressed(); // ERROR - calling type like a method\n+}\n+\n+template bool for_each<int>(const Field& p, IsCompressed, int); // ERROR - instantiated from here"}]}