{"sha": "143b6bc3190ea8dfb60bdc611c207d0e15be1cdb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQzYjZiYzMxOTBlYThkZmI2MGJkYzYxMWMyMDdkMGUxNWJlMWNkYg==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2004-12-13T19:44:03Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2004-12-13T19:44:03Z"}, "message": "xcoffout.c (xcoffout_declare_function): Always strip storage class encoding.\n\n        * xcoffout.c (xcoffout_declare_function): Always strip storage\n        class encoding.\n\nFrom-SVN: r92101", "tree": {"sha": "c47272d6b31ce804b8376821ad0f84e9fe0e513b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c47272d6b31ce804b8376821ad0f84e9fe0e513b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/143b6bc3190ea8dfb60bdc611c207d0e15be1cdb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/143b6bc3190ea8dfb60bdc611c207d0e15be1cdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/143b6bc3190ea8dfb60bdc611c207d0e15be1cdb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/143b6bc3190ea8dfb60bdc611c207d0e15be1cdb/comments", "author": null, "committer": null, "parents": [{"sha": "9940eedb50c92541a324c2af07f4bf8f9fd6f312", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9940eedb50c92541a324c2af07f4bf8f9fd6f312", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9940eedb50c92541a324c2af07f4bf8f9fd6f312"}], "stats": {"total": 27, "additions": 14, "deletions": 13}, "files": [{"sha": "96a1648fb078e452fad892a812501a362b7c334c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/143b6bc3190ea8dfb60bdc611c207d0e15be1cdb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/143b6bc3190ea8dfb60bdc611c207d0e15be1cdb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=143b6bc3190ea8dfb60bdc611c207d0e15be1cdb", "patch": "@@ -1,3 +1,8 @@\n+2004-12-13  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* xcoffout.c (xcoffout_declare_function): Always strip storage\n+\tclass encoding.\n+\n 2004-12-13  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \tPR target/18964"}, {"sha": "a2d8a33ba5f09992bf22d024721f67f628e3e1ed", "filename": "gcc/xcoffout.c", "status": "modified", "additions": 9, "deletions": 13, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/143b6bc3190ea8dfb60bdc611c207d0e15be1cdb/gcc%2Fxcoffout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/143b6bc3190ea8dfb60bdc611c207d0e15be1cdb/gcc%2Fxcoffout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fxcoffout.c?ref=143b6bc3190ea8dfb60bdc611c207d0e15be1cdb", "patch": "@@ -405,22 +405,18 @@ xcoffout_end_block (unsigned int line, unsigned int n)\n void\n xcoffout_declare_function (FILE *file, tree decl, const char *name)\n {\n-  int i;\n+  size_t len;\n \n   if (*name == '*')\n     name++;\n-  else\n-    for (i = 0; name[i]; ++i)\n-      {\n-\tif (name[i] == '[')\n-\t  {\n-\t    char *n = alloca (i + 1);\n-\t    strncpy (n, name, i);\n-\t    n[i] = '\\0';\n-\t    name = n;\n-\t    break;\n-\t  }\n-      }\n+  len = strlen (name);\n+  if (name[len - 1] == ']')\n+    {\n+      char *n = alloca (len - 3);\n+      strncpy (n, name, len - 4);\n+      n[len - 4] = '\\0';\n+      name = n;\n+    }\n \n   /* Any pending .bi or .ei must occur before the .function pseudo op.\n      Otherwise debuggers will think that the function is in the previous"}]}