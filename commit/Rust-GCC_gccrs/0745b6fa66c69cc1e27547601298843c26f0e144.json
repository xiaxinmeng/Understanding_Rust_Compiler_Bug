{"sha": "0745b6fa66c69cc1e27547601298843c26f0e144", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDc0NWI2ZmE2NmM2OWNjMWUyNzU0NzYwMTI5ODg0M2MyNmYwZTE0NA==", "commit": {"author": {"name": "David Edelsohn", "email": "dje.gcc@gmail.com", "date": "2021-04-22T21:41:10Z"}, "committer": {"name": "David Edelsohn", "email": "dje.gcc@gmail.com", "date": "2021-04-22T23:43:55Z"}, "message": "aix: Remove AIX 6.1 support.\n\nAIX 6.1 is past end of life and extended support.  This patch removes\nthe configuration option and references to AIX 6.1.\n\ncontrib/ChangeLog:\n\n\t* config-list.mk: Remove rs6000-ibm-aix6.1.\n\tRename rs6000-ibm-aix7.1 to powerpc-ibm-aix7.1.\n\tAdd powerpc-ibm-aix7.2.\n\ngcc/ChangeLog:\n\n\t* config.gcc (powerpc-ibm-aix6.*): Remove.\n\t* config/rs6000/aix61.h: Delete.", "tree": {"sha": "10c19d275ed89732c6c70ccab8106ba7f2038490", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/10c19d275ed89732c6c70ccab8106ba7f2038490"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0745b6fa66c69cc1e27547601298843c26f0e144", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0745b6fa66c69cc1e27547601298843c26f0e144", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0745b6fa66c69cc1e27547601298843c26f0e144", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0745b6fa66c69cc1e27547601298843c26f0e144/comments", "author": {"login": "edelsohn", "id": 667700, "node_id": "MDQ6VXNlcjY2NzcwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/667700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edelsohn", "html_url": "https://github.com/edelsohn", "followers_url": "https://api.github.com/users/edelsohn/followers", "following_url": "https://api.github.com/users/edelsohn/following{/other_user}", "gists_url": "https://api.github.com/users/edelsohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/edelsohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edelsohn/subscriptions", "organizations_url": "https://api.github.com/users/edelsohn/orgs", "repos_url": "https://api.github.com/users/edelsohn/repos", "events_url": "https://api.github.com/users/edelsohn/events{/privacy}", "received_events_url": "https://api.github.com/users/edelsohn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "edelsohn", "id": 667700, "node_id": "MDQ6VXNlcjY2NzcwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/667700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edelsohn", "html_url": "https://github.com/edelsohn", "followers_url": "https://api.github.com/users/edelsohn/followers", "following_url": "https://api.github.com/users/edelsohn/following{/other_user}", "gists_url": "https://api.github.com/users/edelsohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/edelsohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edelsohn/subscriptions", "organizations_url": "https://api.github.com/users/edelsohn/orgs", "repos_url": "https://api.github.com/users/edelsohn/repos", "events_url": "https://api.github.com/users/edelsohn/events{/privacy}", "received_events_url": "https://api.github.com/users/edelsohn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b5f79f4d3808294192ec7438718aa54cf8982128", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5f79f4d3808294192ec7438718aa54cf8982128", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5f79f4d3808294192ec7438718aa54cf8982128"}], "stats": {"total": 225, "additions": 1, "deletions": 224}, "files": [{"sha": "b9e9dd0b34b04494933e4790e81587931d4089e2", "filename": "contrib/config-list.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0745b6fa66c69cc1e27547601298843c26f0e144/contrib%2Fconfig-list.mk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0745b6fa66c69cc1e27547601298843c26f0e144/contrib%2Fconfig-list.mk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fconfig-list.mk?ref=0745b6fa66c69cc1e27547601298843c26f0e144", "patch": "@@ -84,7 +84,7 @@ LIST = aarch64-elf aarch64-linux-gnu aarch64-rtems \\\n   powerpcle-eabisim powerpcle-eabi \\\n   pru-elf \\\n   riscv32-unknown-linux-gnu riscv64-unknown-linux-gnu \\\n-  rs6000-ibm-aix6.1 rs6000-ibm-aix7.1 \\\n+  powerpc-ibm-aix7.1 powerpc-ibm-aix7.2 \\\n   rl78-elf rx-elf s390-linux-gnu s390x-linux-gnu s390x-ibm-tpf sh-elf \\\n   shle-linux sh-netbsdelf sh-superh-elf \\\n   sh-rtems sh-wrs-vxworks sparc-elf \\"}, {"sha": "e49e40fbfa1bf96cbb8ab20abc3de54b8c50c994", "filename": "gcc/config.gcc", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0745b6fa66c69cc1e27547601298843c26f0e144/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0745b6fa66c69cc1e27547601298843c26f0e144/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=0745b6fa66c69cc1e27547601298843c26f0e144", "patch": "@@ -3122,15 +3122,6 @@ pru*-*-*)\n \textra_objs=\"pru-pragma.o pru-passes.o\"\n \tuse_gcc_stdint=wrap\n \t;;\n-rs6000-ibm-aix6.* | powerpc-ibm-aix6.*)\n-\ttm_file=\"${tm_file} rs6000/aix.h rs6000/aix61.h rs6000/xcoff.h rs6000/aix-stdint.h\"\n-\ttmake_file=\"rs6000/t-aix52 t-slibgcc\"\n-\textra_options=\"${extra_options} rs6000/aix64.opt\"\n-\tuse_collect2=yes\n-\tthread_file='aix'\n-\tuse_gcc_stdint=wrap\n-\tdefault_use_cxa_atexit=yes\n-\t;;\n rs6000-ibm-aix7.1.* | powerpc-ibm-aix7.1.*)\n \ttmake_file=\"rs6000/t-aix52 t-slibgcc\"\n \tif test x$cpu_is_64bit = xyes; then"}, {"sha": "78c179b024c590ef9ef7142935d52d35fd17aea0", "filename": "gcc/config/rs6000/aix61.h", "status": "removed", "additions": 0, "deletions": 214, "changes": 214, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5f79f4d3808294192ec7438718aa54cf8982128/gcc%2Fconfig%2Frs6000%2Faix61.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5f79f4d3808294192ec7438718aa54cf8982128/gcc%2Fconfig%2Frs6000%2Faix61.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faix61.h?ref=b5f79f4d3808294192ec7438718aa54cf8982128", "patch": "@@ -1,214 +0,0 @@\n-/* Definitions of target machine for GNU compiler,\n-   for IBM RS/6000 POWER running AIX V6.1.\n-   Copyright (C) 2002-2021 Free Software Foundation, Inc.\n-   Contributed by David Edelsohn (edelsohn@gnu.org).\n-\n-   This file is part of GCC.\n-\n-   GCC is free software; you can redistribute it and/or modify it\n-   under the terms of the GNU General Public License as published\n-   by the Free Software Foundation; either version 3, or (at your\n-   option) any later version.\n-\n-   GCC is distributed in the hope that it will be useful, but WITHOUT\n-   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n-   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n-   License for more details.\n-\n-   You should have received a copy of the GNU General Public License\n-   along with GCC; see the file COPYING3.  If not see\n-   <http://www.gnu.org/licenses/>.  */\n-\n-/* The macro SUBTARGET_OVERRIDE_OPTIONS is provided for subtargets, to\n-   get control in TARGET_OPTION_OVERRIDE.  */\n-\n-#define SUBTARGET_OVERRIDE_OPTIONS\t\t\t\t\t\\\n-do {\t\t\t\t\t\t\t\t\t\\\n-  if (TARGET_64BIT && ! TARGET_POWERPC64)\t\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      rs6000_isa_flags |= OPTION_MASK_POWERPC64;\t\t\t\\\n-      warning (0, \"%<-maix64%> requires PowerPC64 architecture remain enabled\"); \\\n-    }\t\t\t\t\t\t\t\t\t\\\n-  if (TARGET_SOFT_FLOAT && TARGET_LONG_DOUBLE_128)\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      rs6000_long_double_type_size = 64;\t\t\t\t\\\n-      if (global_options_set.x_rs6000_long_double_type_size)\t\t\\\n-\twarning (0, \"soft-float and long-double-128 are incompatible\");\t\\\n-    }\t\t\t\t\t\t\t\t\t\\\n-  if (TARGET_POWERPC64 && ! TARGET_64BIT)\t\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      error (\"%<-maix64%> required: 64-bit computation with 32-bit addressing not yet supported\"); \\\n-    }\t\t\t\t\t\t\t\t\t\\\n-  if ((rs6000_isa_flags_explicit\t\t\t\t\t\\\n-       & OPTION_MASK_MINIMAL_TOC) != 0)\t\t\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      if (global_options_set.x_rs6000_current_cmodel\t\t\t\\\n-\t  && rs6000_current_cmodel != CMODEL_SMALL)\t\t\t\\\n-\terror (\"%<-mcmodel%> incompatible with other toc options\"); \t\\\n-      SET_CMODEL (CMODEL_SMALL);\t\t\t\t\t\\\n-    }\t\t\t\t\t\t\t\t\t\\\n-  if (rs6000_current_cmodel != CMODEL_SMALL)\t\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      TARGET_NO_FP_IN_TOC = 1;\t\t\t\t\t\t\\\n-      TARGET_NO_SUM_IN_TOC = 1;\t\t\t\t\t\t\\\n-    }\t\t\t\t\t\t\t\t\t\\\n-  if (rs6000_current_cmodel == CMODEL_MEDIUM)\t\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      rs6000_current_cmodel = CMODEL_LARGE;\t\t\t\t\\\n-    }\t\t\t\t\t\t\t\t\t\\\n-} while (0)\n-\n-#undef ASM_SPEC\n-#define ASM_SPEC \"-u %{maix64:-a64 %{!mcpu*:-mppc64}} %(asm_cpu)\"\n-\n-/* Common ASM definitions used by ASM_SPEC amongst the various targets for\n-   handling -mcpu=xxx switches.  There is a parallel list in driver-rs6000.c to\n-   provide the default assembler options if the user uses -mcpu=native, so if\n-   you make changes here, make them there also.  */\n-#undef ASM_CPU_SPEC\n-#define ASM_CPU_SPEC \\\n-\"%{!mcpu*: %{!maix64: \\\n-  %{mpowerpc64: -mppc64} \\\n-  %{maltivec: -m970} \\\n-  %{!maltivec: %{!mpowerpc64: %(asm_default)}}}} \\\n-%{mcpu=native: %(asm_cpu_native)} \\\n-%{mcpu=power3: -m620} \\\n-%{mcpu=power4: -mpwr4} \\\n-%{mcpu=power5: -mpwr5} \\\n-%{mcpu=power5+: -mpwr5x} \\\n-%{mcpu=power6: -mpwr6} \\\n-%{mcpu=power6x: -mpwr6} \\\n-%{mcpu=power7: -mpwr7} \\\n-%{mcpu=power8: -mpwr8} \\\n-%{mcpu=power9: -mpwr9} \\\n-%{mcpu=powerpc: -mppc} \\\n-%{mcpu=rs64a: -mppc} \\\n-%{mcpu=603: -m603} \\\n-%{mcpu=603e: -m603} \\\n-%{mcpu=604: -m604} \\\n-%{mcpu=604e: -m604} \\\n-%{mcpu=620: -m620} \\\n-%{mcpu=630: -m620} \\\n-%{mcpu=970: -m970} \\\n-%{mcpu=G5: -m970} \\\n-%{mvsx: %{!mcpu*: -mpwr6}} \\\n--many\"\n-\n-#undef\tASM_DEFAULT_SPEC\n-#define ASM_DEFAULT_SPEC \"-mpwr4\"\n-\n-#undef TARGET_OS_CPP_BUILTINS\n-#define TARGET_OS_CPP_BUILTINS()     \\\n-  do                                 \\\n-    {                                \\\n-      builtin_define (\"_AIX43\");     \\\n-      builtin_define (\"_AIX51\");     \\\n-      builtin_define (\"_AIX52\");     \\\n-      builtin_define (\"_AIX53\");     \\\n-      builtin_define (\"_AIX61\");     \\\n-      TARGET_OS_AIX_CPP_BUILTINS (); \\\n-    }                                \\\n-  while (0)\n-\n-#undef CPP_SPEC\n-#define CPP_SPEC \"%{posix: -D_POSIX_SOURCE}\t\\\n-  %{ansi: -D_ANSI_C_SOURCE}\t\t\t\\\n-  %{maix64: -D__64BIT__}\t\t\t\\\n-  %{mpe: -I%R/usr/lpp/ppe.poe/include}\t\t\\\n-  %{pthread: -D_THREAD_SAFE}\"\n-\n-/* The GNU C++ standard library requires that these macros be \n-   defined.  Synchronize with libstdc++ os_defines.h.  */\n-#undef CPLUSPLUS_CPP_SPEC                       \n-#define CPLUSPLUS_CPP_SPEC\t\t\t\\\n-  \"-D_ALL_SOURCE -D__COMPATMATH__\t\t\\\n-   %{maix64: -D__64BIT__}\t\t\t\\\n-   %{mpe: -I%R/usr/lpp/ppe.poe/include}\t\t\\\n-   %{pthread: -D_THREAD_SAFE}\"\n-\n-#undef  TARGET_DEFAULT\n-#define TARGET_DEFAULT (MASK_PPC_GPOPT | MASK_PPC_GFXOPT | MASK_MFCRF)\n-\n-#undef  PROCESSOR_DEFAULT\n-#define PROCESSOR_DEFAULT PROCESSOR_POWER7\n-#undef  PROCESSOR_DEFAULT64\n-#define PROCESSOR_DEFAULT64 PROCESSOR_POWER7\n-\n-/* AIX 6.1 kernel and assembler have necessary support for Altivec and VSX.  */\n-#undef OS_MISSING_ALTIVEC\n-\n-/* Define this macro as a C expression for the initializer of an\n-   array of string to tell the driver program which options are\n-   defaults for this target and thus do not need to be handled\n-   specially when using `MULTILIB_OPTIONS'.\n-\n-   Do not define this macro if `MULTILIB_OPTIONS' is not defined in\n-   the target makefile fragment or if none of the options listed in\n-   `MULTILIB_OPTIONS' are set by default.  *Note Target Fragment::.  */\n-\n-#undef\tMULTILIB_DEFAULTS\n-\n-#undef LIB_SPEC\n-#define LIB_SPEC \"%{pg:-L%R/lib/profiled -L%R/usr/lib/profiled}\\\n-   %{p:-L%R/lib/profiled -L%R/usr/lib/profiled}\\\n-   %{!maix64:%{!shared:%{g*:-lg}}}\\\n-   %{fprofile-arcs|fprofile-generate*|coverage:-lpthreads}\\\n-   %{mpe:-L%R/usr/lpp/ppe.poe/lib -lmpi -lvtd}\\\n-   %{mlong-double-128:-lc128}\\\n-   %{pthread:-lpthreads} -lc\"\n-\n-#undef LINK_SPEC\n-#define LINK_SPEC \"-bpT:0x10000000 -bpD:0x20000000 %{!r:-btextro}\\\n-   %{static:-bnso %(link_syscalls) } %{shared:-bM:SRE %{!e:-bnoentry}}\\\n-   %{!maix64:%{!shared:%{g*: %(link_libg) }}} %{maix64:-b64}\\\n-   %{mpe:-binitfini:poe_remote_main}\"\n-\n-#undef STARTFILE_SPEC\n-#define STARTFILE_SPEC \"%{!shared:\\\n-   %{maix64:%{pg:gcrt0_64%O%s}%{!pg:%{p:mcrt0_64%O%s}%{!p:crt0_64%O%s}}}\\\n-   %{!maix64:\\\n-     %{pthread:%{pg:gcrt0_r%O%s}%{!pg:%{p:mcrt0_r%O%s}%{!p:crt0_r%O%s}}}\\\n-     %{!pthread:%{pg:gcrt0%O%s}%{!pg:%{p:mcrt0%O%s}%{!p:crt0%O%s}}}}}\\\n-   %{shared:crtcxa_s%O%s;:crtcxa%O%s} crtdbase%O%s\"\n-\n-/* AIX V5 typedefs ptrdiff_t as \"long\" while earlier releases used \"int\".  */\n-\n-#undef PTRDIFF_TYPE\n-#define PTRDIFF_TYPE \"long int\"\n-\n-/* Type used for wchar_t, as a string used in a declaration.  */\n-#undef  WCHAR_TYPE\n-#define WCHAR_TYPE (!TARGET_64BIT ? \"short unsigned int\" : \"unsigned int\")\n-\n-/* Width of wchar_t in bits.  */\n-#undef  WCHAR_TYPE_SIZE\n-#define WCHAR_TYPE_SIZE (!TARGET_64BIT ? 16 : 32)\n-\n-/* AIX 4.2 and above provides initialization and finalization function\n-   support from linker command line.  */\n-#undef HAS_INIT_SECTION\n-#define HAS_INIT_SECTION\n-\n-#undef LD_INIT_SWITCH\n-#define LD_INIT_SWITCH \"-binitfini\"\n-\n-#ifndef _AIX52\n-extern long long int    atoll(const char *);  \n-#endif\n-\n-/* This target uses the aix64.opt file.  */\n-#define TARGET_USES_AIX64_OPT 1\n-\n-/* Large TOC Support */\n-#ifdef HAVE_LD_LARGE_TOC\n-#undef TARGET_CMODEL\n-#define TARGET_CMODEL rs6000_current_cmodel\n-#define SET_CMODEL(opt) rs6000_current_cmodel = opt\n-#else\n-#define SET_CMODEL(opt) do {} while (0)\n-#endif\n-\n-/* This target defines SUPPORTS_WEAK and TARGET_ASM_NAMED_SECTION,\n-   but does not have crtbegin/end.  */\n-\n-#define TARGET_AIX_VERSION 61"}]}