{"sha": "bf6103db43946957540b9153e988589ebdb23f63", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmY2MTAzZGI0Mzk0Njk1NzU0MGI5MTUzZTk4ODU4OWViZGIyM2Y2Mw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1996-09-30T21:19:24Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1996-09-30T21:19:24Z"}, "message": "Redefine exception in math.h for C++\n\nFrom-SVN: r12882", "tree": {"sha": "aefc1f4019d4417f2516adc29440d4212d43f1d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aefc1f4019d4417f2516adc29440d4212d43f1d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf6103db43946957540b9153e988589ebdb23f63", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf6103db43946957540b9153e988589ebdb23f63", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf6103db43946957540b9153e988589ebdb23f63", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf6103db43946957540b9153e988589ebdb23f63/comments", "author": null, "committer": null, "parents": [{"sha": "ded732a0b7c7f4a84bd9e1500346ba9b5c705a79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ded732a0b7c7f4a84bd9e1500346ba9b5c705a79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ded732a0b7c7f4a84bd9e1500346ba9b5c705a79"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "0a9c6f95ffaf557816cbfb43684f38e5f3e02b24", "filename": "gcc/fixinc.svr4", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf6103db43946957540b9153e988589ebdb23f63/gcc%2Ffixinc.svr4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf6103db43946957540b9153e988589ebdb23f63/gcc%2Ffixinc.svr4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc.svr4?ref=bf6103db43946957540b9153e988589ebdb23f63", "patch": "@@ -1476,6 +1476,42 @@ for file in math.h floatingpoint.h; do\n   fi\n done\n \n+# The Solaris math.h defines struct exception, which conflicts with\n+# the class exception defined in the C++ file std/stdexcept.h.  We\n+# redefine it to __math_exception.  This is not a great fix, but I\n+# haven't been able to think of anything better.\n+file=math.h\n+base=`basename $file`\n+if [ -r ${LIB}/$file ]; then\n+  file_to_fix=${LIB}/$file\n+else\n+  if [ -r ${INPUT}/$file ]; then\n+    file_to_fix=${INPUT}/$file\n+  else\n+    file_to_fix=\"\"\n+  fi\n+fi\n+if [ \\! -z \"$file_to_fix\" ]; then\n+  echo Checking $file_to_fix\n+  sed -e '/struct exception/i\\\n+#ifdef __cplusplus\\\n+#define exception __math_exception\\\n+#endif'\\\n+      -e '/struct exception/a\\\n+#ifdef __cplusplus\\\n+#undef exception\\\n+#endif' $file_to_fix > /tmp/$base\n+  if cmp $file_to_fix /tmp/$base >/dev/null 2>&1; then \\\n+    true\n+  else\n+    echo Fixed $file_to_fix\n+    rm -f ${LIB}/$file\n+    cp /tmp/$base ${LIB}/$file\n+    chmod a+r ${LIB}/$file\n+  fi\n+  rm -f /tmp/$base\n+fi\n+\n echo 'Removing unneeded directories:'\n cd $LIB\n files=`find . -type d -print | sort -r`"}]}