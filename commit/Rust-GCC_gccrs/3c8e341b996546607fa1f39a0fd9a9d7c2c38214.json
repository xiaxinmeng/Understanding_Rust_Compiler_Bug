{"sha": "3c8e341b996546607fa1f39a0fd9a9d7c2c38214", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2M4ZTM0MWI5OTY1NDY2MDdmYTFmMzlhMGZkOWE5ZDdjMmMzODIxNA==", "commit": {"author": {"name": "Prathamesh Kulkarni", "email": "prathamesh.kulkarni@linaro.org", "date": "2019-10-15T07:19:41Z"}, "committer": {"name": "Prathamesh Kulkarni", "email": "prathamesh3492@gcc.gnu.org", "date": "2019-10-15T07:19:41Z"}, "message": "re PR tree-optimization/92085 (ICE: tree check: expected class 'type', have 'exceptional' (error_mark) in useless_type_conversion_p, at gimple-expr.c:86)\n\n2019-10-15  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n\n\tPR tree-optimization/92085\n\t* tree-if-conv.c (ifcvt_local_dce): Call gsi_next in else clause,\n\tinstead of calling it unconditionally after\n\tdelete_dead_or_redundant_assignment and fix indentation.\n\ntestsuite/\n\t* gcc.dg/tree-ssa/pr92085-1.c: New test.\n\t* gcc.dg/tree-ssa/pr92085-2.c: Likewise.\n\nFrom-SVN: r276984", "tree": {"sha": "6003d1912201949e1194f1a78591b9b8ce639548", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6003d1912201949e1194f1a78591b9b8ce639548"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3c8e341b996546607fa1f39a0fd9a9d7c2c38214", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c8e341b996546607fa1f39a0fd9a9d7c2c38214", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c8e341b996546607fa1f39a0fd9a9d7c2c38214", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c8e341b996546607fa1f39a0fd9a9d7c2c38214/comments", "author": null, "committer": null, "parents": [{"sha": "51992f15a7d9adce1016f8c31d37409e50d5797f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51992f15a7d9adce1016f8c31d37409e50d5797f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51992f15a7d9adce1016f8c31d37409e50d5797f"}], "stats": {"total": 71, "additions": 67, "deletions": 4}, "files": [{"sha": "91809ca9c071f6867cb8beb4fcc9020c8d50e628", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c8e341b996546607fa1f39a0fd9a9d7c2c38214/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c8e341b996546607fa1f39a0fd9a9d7c2c38214/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3c8e341b996546607fa1f39a0fd9a9d7c2c38214", "patch": "@@ -1,3 +1,10 @@\n+2019-10-15  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\tPR tree-optimization/92085\n+\t* tree-if-conv.c (ifcvt_local_dce): Call gsi_next in else clause,\n+\tinstead of calling it unconditionally after\n+\tdelete_dead_or_redundant_assignment and fix indentation.\n+\n 2019-10-15  Kugan Vivekanandarajah  <kugan.vivekanandarajah@linaro.org>\n \n \t* config/arm/vfp.md (fma<SDF:mode>4): Enable DF only when"}, {"sha": "ae169070ed52202204c65ee738fd033375f88eba", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c8e341b996546607fa1f39a0fd9a9d7c2c38214/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c8e341b996546607fa1f39a0fd9a9d7c2c38214/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3c8e341b996546607fa1f39a0fd9a9d7c2c38214", "patch": "@@ -1,3 +1,9 @@\n+2019-10-15  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\tPR tree-optimization/92085\n+\t* gcc.dg/tree-ssa/pr92085-1.c: New test.\n+\t* gcc.dg/tree-ssa/pr92085-2.c: Likewise.\n+\n 2019-10-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/89943"}, {"sha": "c18f820a09ea892ac33630b9ba0e2b08bff81f6b", "filename": "gcc/testsuite/gcc.dg/tree-ssa/pr92085-1.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c8e341b996546607fa1f39a0fd9a9d7c2c38214/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr92085-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c8e341b996546607fa1f39a0fd9a9d7c2c38214/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr92085-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr92085-1.c?ref=3c8e341b996546607fa1f39a0fd9a9d7c2c38214", "patch": "@@ -0,0 +1,20 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O1 -fexceptions -fnon-call-exceptions -ftree-loop-vectorize -fno-tree-sink --param dse-max-alias-queries-per-store=2 -w\" } */\n+\n+void\n+di (int y9, int qw)\n+{\n+  if ((int) &y9 != 0)\n+    {\n+      int py;\n+      int **fq = &py;\n+\n+      while (qw < 1)\n+        {\n+          if ((0 < (**fq ? **fq : (**fq = 1))) / (**fq = y9))\n+            ;\n+\n+          ++qw;\n+        }\n+    }\n+}"}, {"sha": "f62585c2f0fe5d82f9f81ec5e6b2954b1bb0f503", "filename": "gcc/testsuite/gcc.dg/tree-ssa/pr92085-2.c", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c8e341b996546607fa1f39a0fd9a9d7c2c38214/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr92085-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c8e341b996546607fa1f39a0fd9a9d7c2c38214/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr92085-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr92085-2.c?ref=3c8e341b996546607fa1f39a0fd9a9d7c2c38214", "patch": "@@ -0,0 +1,29 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O1 -ftree-loop-vectorize -fno-tree-dce -fno-tree-sink -w\" } */\n+\n+int a8;\n+\n+void\n+c1 (int oz, int dk, int ub)\n+{\n+  int *hd = 0;\n+  long int *th = &dk;\n+\n+  while (ub < 1)\n+    {\n+      oz || dk;\n+      ++ub;\n+    }\n+\n+  while (oz < 2)\n+    {\n+      long int *lq = &oz;\n+\n+      (*hd < (*lq = *th)) < oz;\n+\n+      if (oz == 0)\n+        *th = a8 = oz;\n+\n+      *lq = 0;\n+    }\n+}"}, {"sha": "3c296ec300265b102d18fba23a293056828f3e75", "filename": "gcc/tree-if-conv.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c8e341b996546607fa1f39a0fd9a9d7c2c38214/gcc%2Ftree-if-conv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c8e341b996546607fa1f39a0fd9a9d7c2c38214/gcc%2Ftree-if-conv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-if-conv.c?ref=3c8e341b996546607fa1f39a0fd9a9d7c2c38214", "patch": "@@ -2973,10 +2973,11 @@ ifcvt_local_dce (class loop *loop)\n \t  ao_ref write;\n \t  ao_ref_init (&write, lhs);\n \n-          if (dse_classify_store (&write, stmt, false, NULL, NULL, latch_vdef)\n-              == DSE_STORE_DEAD)\n-            delete_dead_or_redundant_assignment (&gsi, \"dead\");\n-\t  gsi_next (&gsi);\n+\t  if (dse_classify_store (&write, stmt, false, NULL, NULL, latch_vdef)\n+\t      == DSE_STORE_DEAD)\n+\t    delete_dead_or_redundant_assignment (&gsi, \"dead\");\n+\t  else\n+\t    gsi_next (&gsi);\n \t  continue;\n \t}\n "}]}