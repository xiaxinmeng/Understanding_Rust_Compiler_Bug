{"sha": "494c950b2f873c82695aab855a90f1a6cd97e3df", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDk0Yzk1MGIyZjg3M2M4MjY5NWFhYjg1NWE5MGYxYTZjZDk3ZTNkZg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2002-01-14T19:29:08Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2002-01-14T19:29:08Z"}, "message": "unroll.c (final_reg_note_copy): Properly handle REG_LABEL\n\n\t* unroll.c (final_reg_note_copy): Properly handle\n\tREG_LABEL\n\t(unroll_loops): Fix LOOP_CONDITION heuristics.\n\nFrom-SVN: r48839", "tree": {"sha": "a15b5f7f5f29ff6093b4d07a5c0a9d389d110e3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a15b5f7f5f29ff6093b4d07a5c0a9d389d110e3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/494c950b2f873c82695aab855a90f1a6cd97e3df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/494c950b2f873c82695aab855a90f1a6cd97e3df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/494c950b2f873c82695aab855a90f1a6cd97e3df", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/494c950b2f873c82695aab855a90f1a6cd97e3df/comments", "author": null, "committer": null, "parents": [{"sha": "69a0611ffc6a9c8c8e9acdcb6ba364e24d97fb01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69a0611ffc6a9c8c8e9acdcb6ba364e24d97fb01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69a0611ffc6a9c8c8e9acdcb6ba364e24d97fb01"}], "stats": {"total": 21, "additions": 11, "deletions": 10}, "files": [{"sha": "46495eb2d7cfcf78c32e3d20834e837b4e521160", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/494c950b2f873c82695aab855a90f1a6cd97e3df/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/494c950b2f873c82695aab855a90f1a6cd97e3df/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=494c950b2f873c82695aab855a90f1a6cd97e3df", "patch": "@@ -1,3 +1,9 @@\n+Mon Jan 14 20:23:34 CET 2002  Jan Hubicka  <jh@suse.cz>\n+\n+\t* unroll.c (final_reg_note_copy): Properly handle\n+\tREG_LABEL\n+\t(unroll_loops): Fix LOOP_CONDITION heuristics.\n+\n 2002-01-14  Geoffrey Keating  <geoffk@redhat.com>\n \n \t* doc/invoke.texi (Xstormy16 Options): Add xstormy16 option."}, {"sha": "a47fdbe89589253bc88683af9d58a47baa6fb0e3", "filename": "gcc/unroll.c", "status": "modified", "additions": 5, "deletions": 10, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/494c950b2f873c82695aab855a90f1a6cd97e3df/gcc%2Funroll.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/494c950b2f873c82695aab855a90f1a6cd97e3df/gcc%2Funroll.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funroll.c?ref=494c950b2f873c82695aab855a90f1a6cd97e3df", "patch": "@@ -987,7 +987,7 @@ unroll_loop (loop, insn_count, strength_reduce_p)\n \t\t\t\t       less_p ? GE : LE, NULL_RTX,\n \t\t\t\t       mode, unsigned_p, labels[1]);\n \t      predict_insn_def (get_last_insn (), PRED_LOOP_CONDITION,\n-\t\t\t\tNOT_TAKEN);\n+\t\t\t\tTAKEN);\n \t      JUMP_LABEL (get_last_insn ()) = labels[1];\n \t      LABEL_NUSES (labels[1])++;\n \t    }\n@@ -1741,16 +1741,11 @@ final_reg_note_copy (notesp, map)\n \t    {\n \t      rtx insn = map->insn_map[INSN_UID (XEXP (note, 0))];\n \n-\t      /* If we failed to remap the note, something is awry.\n-\t\t Allow REG_LABEL as it may reference label outside\n-\t\t the unrolled loop.  */\n+\t      /* If we failed to remap the note, something is awry.  */\n \t      if (!insn)\n-\t\t{\n-\t\t  if (REG_NOTE_KIND (note) != REG_LABEL)\n-\t\t    abort ();\n-\t\t}\n-\t      else\n-\t        XEXP (note, 0) = insn;\n+\t\tabort ();\n+\n+\t      XEXP (note, 0) = insn;\n \t    }\n \t}\n "}]}