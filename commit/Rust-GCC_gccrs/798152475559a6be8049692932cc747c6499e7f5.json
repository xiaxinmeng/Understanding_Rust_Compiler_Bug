{"sha": "798152475559a6be8049692932cc747c6499e7f5", "node_id": "C_kwDOANBUbNoAKDc5ODE1MjQ3NTU1OWE2YmU4MDQ5NjkyOTMyY2M3NDdjNjQ5OWU3ZjU", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2022-05-10T12:43:56Z"}, "committer": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2022-05-10T12:48:11Z"}, "message": "Fix up 'libgomp.fortran/use_device_addr-5.f90' multi-device testing\n\nFix-up for recent commit r13-116-g3f8c389fe90bf565a6221a46bb7fb745dd4c1510\n\"OpenMP: Fix use_device_{addr,ptr} with in-data-sharing arg\", where we\ncurrently get:\n\n    libgomp: use_device_ptr pointer wasn't mapped\n    FAIL: libgomp.fortran/use_device_addr-5.f90   -O  execution test\n\n\tlibgomp/\n\t* testsuite/libgomp.fortran/use_device_addr-5.f90: Fix up\n\tmulti-device testing.", "tree": {"sha": "0f7edc68869d8a541080fd068a9d3e12ebf887b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f7edc68869d8a541080fd068a9d3e12ebf887b3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/798152475559a6be8049692932cc747c6499e7f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/798152475559a6be8049692932cc747c6499e7f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/798152475559a6be8049692932cc747c6499e7f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/798152475559a6be8049692932cc747c6499e7f5/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d1e8f221e3fc8d3153b662c2f912bf1a26d645ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1e8f221e3fc8d3153b662c2f912bf1a26d645ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1e8f221e3fc8d3153b662c2f912bf1a26d645ff"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "3124d60fe9beb6fa961acaaf8536d216c4454d36", "filename": "libgomp/testsuite/libgomp.fortran/use_device_addr-5.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/798152475559a6be8049692932cc747c6499e7f5/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fuse_device_addr-5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/798152475559a6be8049692932cc747c6499e7f5/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fuse_device_addr-5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fuse_device_addr-5.f90?ref=798152475559a6be8049692932cc747c6499e7f5", "patch": "@@ -8,7 +8,7 @@ program main\n   aaa(:,:,:) = reshape ([(i, i = 1, size(aaa))], shape(aaa))\n \n   do i = 0, omp_get_num_devices()\n-    !$omp target data map(to: aaa)\n+    !$omp target data map(to: aaa) device(i)\n       call test_addr (aaa, i)\n       call test_ptr (aaa, i)\n     !$omp end target data"}]}