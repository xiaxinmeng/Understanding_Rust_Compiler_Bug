{"sha": "d11e5e83f674a04884c93baa7e4f31cb9d070cba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDExZTVlODNmNjc0YTA0ODg0YzkzYmFhN2U0ZjMxY2I5ZDA3MGNiYQ==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@cygnus.com", "date": "1999-06-30T01:48:58Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "1999-06-30T01:48:58Z"}, "message": "Test DLL attribute support.\n\nFrom-SVN: r27843", "tree": {"sha": "c3da39afeac40912cb398d235426faf5c2c75a30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3da39afeac40912cb398d235426faf5c2c75a30"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d11e5e83f674a04884c93baa7e4f31cb9d070cba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d11e5e83f674a04884c93baa7e4f31cb9d070cba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d11e5e83f674a04884c93baa7e4f31cb9d070cba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d11e5e83f674a04884c93baa7e4f31cb9d070cba/comments", "author": null, "committer": null, "parents": [{"sha": "58e1e5ad9afab4d5e7868da0a67c507a5f51020c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58e1e5ad9afab4d5e7868da0a67c507a5f51020c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58e1e5ad9afab4d5e7868da0a67c507a5f51020c"}], "stats": {"total": 48, "additions": 48, "deletions": 0}, "files": [{"sha": "71e83c6e78d8349dc3c13e173a14bb431f08ca7e", "filename": "gcc/testsuite/gcc.c-torture/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d11e5e83f674a04884c93baa7e4f31cb9d070cba/gcc%2Ftestsuite%2Fgcc.c-torture%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d11e5e83f674a04884c93baa7e4f31cb9d070cba/gcc%2Ftestsuite%2Fgcc.c-torture%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2FChangeLog?ref=d11e5e83f674a04884c93baa7e4f31cb9d070cba", "patch": "@@ -1,3 +1,10 @@\n+1999-06-23  Nick Clifton  <nickc@cygnus.com>\n+\n+\t* compile/dll.c: New test case.  Check that dll attributes\n+\tcompile.\n+\t* compile/dll.x: Only support the dll.c test on\tports that\n+\tuse the COFF/PE file format.\n+\n 1999-05-25  Nick Clifton  <nickc@cygnus.com>\n \n \t* execute/bf-sign-2.c: Explicitly declare signed bitfields as"}, {"sha": "bf0d1544ad051a3a6777122138b82dc30689f58b", "filename": "gcc/testsuite/gcc.c-torture/compile/dll.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d11e5e83f674a04884c93baa7e4f31cb9d070cba/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fdll.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d11e5e83f674a04884c93baa7e4f31cb9d070cba/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fdll.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fdll.c?ref=d11e5e83f674a04884c93baa7e4f31cb9d070cba", "patch": "@@ -0,0 +1,21 @@\n+__declspec (dllimport) int foo;\n+extern int (* import) (void) __attribute__((dllimport));\n+int func2 (void) __attribute__((dllexport));\n+\n+__declspec(dllexport) int \n+func1 (int a)\n+{\n+  return a + foo;\n+}\n+\n+static int\n+internal (void)\n+{\n+  return 77;\n+}\n+\n+int\n+func2 (void)\n+{\n+  return import ();\n+}"}, {"sha": "63a1e180e2c3d4fff9402da92d318cbbbd02152f", "filename": "gcc/testsuite/gcc.c-torture/compile/dll.x", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d11e5e83f674a04884c93baa7e4f31cb9d070cba/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fdll.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d11e5e83f674a04884c93baa7e4f31cb9d070cba/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fdll.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fdll.x?ref=d11e5e83f674a04884c93baa7e4f31cb9d070cba", "patch": "@@ -0,0 +1,20 @@\n+# This test examines the attribute support for DLLs.\n+# Only COFF/PE formats support DLLs, (plus, as a special case\n+# the mcore-elf toolchain), so the code here tries to determine\n+# the file format and decide whether the test should be marked\n+# as unsupported.\n+\n+set torture_eval_before_compile {\n+\n+    if ![istarget \"mcore-*-elf\"] {\n+       \n+        set objformat [gcc_target_object_format]\n+    \n+        if { $objformat != \"pe\" } {\n+            unsupported \"dll.c\"\n+            return 1\n+        }\n+    }\n+}\n+\n+return 0"}]}