{"sha": "ba96438334721b0d48bf9a1413a6c0963ddbd30f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmE5NjQzODMzNDcyMWIwZDQ4YmY5YTE0MTNhNmMwOTYzZGRiZDMwZg==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@redhat.com", "date": "2009-11-27T18:56:10Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2009-11-27T18:56:10Z"}, "message": "stormy16-lib2.c: Arrange for separate compilation of each function.\n\n        * config/stormy16/stormy16-lib2.c: Arrange for separate\n        compilation of each function.\n        (__ffshi2): New function.\n        (__stormy16_count_leading_zeros): New function.\n        * config/stormy16/t-stormy16 (LIB2FUNCS_EXTRA): Use stub files to\n        compile each function into its own object file.\n        (stormy16-lib2-ashlsi3.c): New stub file.\n        (stormy16-lib2-ashrsi3.c): New stub file.\n        (stormy16-lib2-clzhi2.c): New stub file.\n        (stormy16-lib2-count-leading-zeros.c): New stub file.\n        (stormy16-lib2-ctzhi2.c): New stub file.\n        (stormy16-lib2-divsi3.c): New stub file.\n        (stormy16-lib2-ffshi2.c): New stub file.\n        (stormy16-lib2-lshrsi3.c): New stub file.\n        (stormy16-lib2-modsi3.c): New stub file.\n        (stormy16-lib2-parityhi2.c): New stub file.\n        (stormy16-lib2-popcounthi2.c): New stub file.\n        (stormy16-lib2-udivmodsi4.c): New stub file.\n        (stormy16-lib2-udivsi3.c): New stub file.\n        (stormy16-lib2-umodsi3.c): New stub file.\n        * longlong.h (count_leading_zeros): Define macro for stormy16\n        target.\n        (COUNT_LEADING_ZEROS_0): Likewise.\n\nFrom-SVN: r154713", "tree": {"sha": "c9d56ccf47b4f1ac9b76b795492e4508065b5dae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c9d56ccf47b4f1ac9b76b795492e4508065b5dae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba96438334721b0d48bf9a1413a6c0963ddbd30f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba96438334721b0d48bf9a1413a6c0963ddbd30f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba96438334721b0d48bf9a1413a6c0963ddbd30f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba96438334721b0d48bf9a1413a6c0963ddbd30f/comments", "author": {"login": "nickclifton", "id": 31441682, "node_id": "MDQ6VXNlcjMxNDQxNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickclifton", "html_url": "https://github.com/nickclifton", "followers_url": "https://api.github.com/users/nickclifton/followers", "following_url": "https://api.github.com/users/nickclifton/following{/other_user}", "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions", "organizations_url": "https://api.github.com/users/nickclifton/orgs", "repos_url": "https://api.github.com/users/nickclifton/repos", "events_url": "https://api.github.com/users/nickclifton/events{/privacy}", "received_events_url": "https://api.github.com/users/nickclifton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c7f06e130978925eec2f188d7d2f3ec9b378e8ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7f06e130978925eec2f188d7d2f3ec9b378e8ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7f06e130978925eec2f188d7d2f3ec9b378e8ac"}], "stats": {"total": 178, "additions": 163, "deletions": 15}, "files": [{"sha": "ac3240c6639534bb944cf7aabc5f8c8b3510290d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -1,3 +1,29 @@\n+2009-11-27  Nick Clifton  <nickc@redhat.com>\n+\n+\t* longlong.h (count_leading_zeros): Define macro for stormy16\n+\ttarget.\n+\t(COUNT_LEADING_ZEROS_0): Likewise.\t\n+\t* config/stormy16/stormy16-lib2.c: Arrange for separate\n+\tcompilation of each function.\n+\t(__ffshi2): New function.\n+\t(__stormy16_count_leading_zeros): New function.\n+\t* config/stormy16/t-stormy16 (LIB2FUNCS_EXTRA): Use stub files to\n+\tcompile each function into its own object file.\n+\t(stormy16-lib2-ashlsi3.c): New stub file.\n+\t(stormy16-lib2-ashrsi3.c): New stub file.\n+\t(stormy16-lib2-clzhi2.c): New stub file.\n+\t(stormy16-lib2-count-leading-zeros.c): New stub file.\n+\t(stormy16-lib2-ctzhi2.c): New stub file.\n+\t(stormy16-lib2-divsi3.c): New stub file.\n+\t(stormy16-lib2-ffshi2.c): New stub file.\n+\t(stormy16-lib2-lshrsi3.c): New stub file.\n+\t(stormy16-lib2-modsi3.c): New stub file.\n+\t(stormy16-lib2-parityhi2.c): New stub file.\n+\t(stormy16-lib2-popcounthi2.c): New stub file.\n+\t(stormy16-lib2-udivmodsi4.c): New stub file.\n+\t(stormy16-lib2-udivsi3.c): New stub file.\n+\t(stormy16-lib2-umodsi3.c): New stub file.\n+\n 2009-11-27  Richard Henderson  <rth@redhat.com>\n \n \t* config/i386/sse.md (vec_interleave_highv16qi,"}, {"sha": "d6cabc6691c59ca15c91a4add9e33d2954366eef", "filename": "gcc/config/stormy16/stormy16-lib2-ashlsi3.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ashlsi3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ashlsi3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ashlsi3.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_ASHLSI3\n+#include \"stormy16-lib2.c\""}, {"sha": "151e3d01cabfaad07010a39a136172619c6fe92a", "filename": "gcc/config/stormy16/stormy16-lib2-ashrsi3.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ashrsi3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ashrsi3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ashrsi3.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_ASHRSI3\n+#include \"stormy16-lib2.c\""}, {"sha": "066fdf131128c6e885e3e5586262776c068fa7aa", "filename": "gcc/config/stormy16/stormy16-lib2-clzhi2.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-clzhi2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-clzhi2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-clzhi2.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_CLZHI2\n+#include \"stormy16-lib2.c\""}, {"sha": "1b98d30c18bfd204986d1ec68771dac0855c41b6", "filename": "gcc/config/stormy16/stormy16-lib2-count-leading-zeros.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-count-leading-zeros.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-count-leading-zeros.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-count-leading-zeros.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_COUNT_LEADING_ZEROS\n+#include \"stormy16-lib2.c\""}, {"sha": "c1497db952f5a0e269104df205d42c477372ca64", "filename": "gcc/config/stormy16/stormy16-lib2-ctzhi2.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ctzhi2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ctzhi2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ctzhi2.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_CTZHI2\n+#include \"stormy16-lib2.c\""}, {"sha": "33c370d1c1fb41219cb854ee00ca2b23ff23f85e", "filename": "gcc/config/stormy16/stormy16-lib2-divsi3.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-divsi3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-divsi3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-divsi3.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_DIVSI3\n+#include \"stormy16-lib2.c\""}, {"sha": "4b629ddece802fb544888e758aacc405d58e2c3a", "filename": "gcc/config/stormy16/stormy16-lib2-ffshi2.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ffshi2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ffshi2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-ffshi2.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_FFSHI2\n+#include \"stormy16-lib2.c\""}, {"sha": "cd769ee664755411d4c91d9eca2b8a576a004fb4", "filename": "gcc/config/stormy16/stormy16-lib2-lshrsi3.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-lshrsi3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-lshrsi3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-lshrsi3.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_LSHRSI3\n+#include \"stormy16-lib2.c\""}, {"sha": "587d0070d23fd38393faf20ec28daf6f05f10e96", "filename": "gcc/config/stormy16/stormy16-lib2-modsi3.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-modsi3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-modsi3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-modsi3.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_MODSI3\n+#include \"stormy16-lib2.c\""}, {"sha": "1d128171a8bbc959774fe67523dce995bf1992de", "filename": "gcc/config/stormy16/stormy16-lib2-parityhi2.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-parityhi2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-parityhi2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-parityhi2.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_PARITYHI2\n+#include \"stormy16-lib2.c\""}, {"sha": "f07d66873e6c16c5731eaefd170ccd8bf4a23b79", "filename": "gcc/config/stormy16/stormy16-lib2-popcounthi2.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-popcounthi2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-popcounthi2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-popcounthi2.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_POPCOUNTHI2\n+#include \"stormy16-lib2.c\""}, {"sha": "d555e64c6d8903c32a90292da5635ba253a7fda1", "filename": "gcc/config/stormy16/stormy16-lib2-udivmodsi4.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-udivmodsi4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-udivmodsi4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-udivmodsi4.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_UDIVMODSI4\n+#include \"stormy16-lib2.c\""}, {"sha": "fdcd64a0ae07c6b4e55a7bd7cbda5e95f92a0609", "filename": "gcc/config/stormy16/stormy16-lib2-udivsi3.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-udivsi3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-udivsi3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-udivsi3.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_UDIVSI3\n+#include \"stormy16-lib2.c\""}, {"sha": "87921f2a196484e2dceeecd9063136e92e4cc51c", "filename": "gcc/config/stormy16/stormy16-lib2-umodsi3.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-umodsi3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-umodsi3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-umodsi3.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -0,0 +1,2 @@\n+#define XSTORMY16_UMODSI3\n+#include \"stormy16-lib2.c\""}, {"sha": "91c3c3dd2ca372b95c80ad877e4e7e548897cd05", "filename": "gcc/config/stormy16/stormy16-lib2.c", "status": "modified", "additions": 72, "deletions": 14, "changes": 86, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2.c?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -75,7 +75,7 @@ extern int __clzhi2 (UHWtype);\n extern int __ctzhi2 (UHWtype);\n \n \n-\n+#ifdef XSTORMY16_UDIVMODSI4\n USItype\n udivmodsi4 (USItype num, USItype den, word_type modwanted)\n {\n@@ -102,7 +102,9 @@ udivmodsi4 (USItype num, USItype den, word_type modwanted)\n     return num;\n   return res;\n }\n+#endif\n \n+#ifdef XSTORMY16_DIVSI3\n SItype\n __divsi3 (SItype a, SItype b)\n {\n@@ -128,7 +130,9 @@ __divsi3 (SItype a, SItype b)\n \n   return res;\n }\n+#endif\n \n+#ifdef XSTORMY16_MODSI3\n SItype\n __modsi3 (SItype a, SItype b)\n {\n@@ -151,19 +155,25 @@ __modsi3 (SItype a, SItype b)\n \n   return res;\n }\n+#endif\n \n+#ifdef XSTORMY16_UDIVSI3\n SItype\n __udivsi3 (SItype a, SItype b)\n {\n   return udivmodsi4 (a, b, 0);\n }\n+#endif\n \n+#ifdef XSTORMY16_UMODSI3\n SItype\n __umodsi3 (SItype a, SItype b)\n {\n   return udivmodsi4 (a, b, 1);\n }\n+#endif\n \n+#ifdef XSTORMY16_ASHLSI3\n SItype\n __ashlsi3 (SItype a, SItype b)\n {\n@@ -177,7 +187,9 @@ __ashlsi3 (SItype a, SItype b)\n     a <<= 1;\n   return a;\n }\n+#endif\n \n+#ifdef XSTORMY16_ASHRSI3\n SItype\n __ashrsi3 (SItype a, SItype b)\n {\n@@ -191,7 +203,9 @@ __ashrsi3 (SItype a, SItype b)\n     a >>= 1;\n   return a;\n }\n+#endif\n \n+#ifdef XSTORMY16_LSHRSI3\n USItype\n __lshrsi3 (USItype a, USItype b)\n {\n@@ -205,9 +219,11 @@ __lshrsi3 (USItype a, USItype b)\n     a >>= 1;\n   return a;\n }\n+#endif\n \n+#ifdef XSTORMY16_POPCOUNTHI2\n /* Returns the number of set bits in X.\n-   FIXME:  The return type really should be unsigned,\n+   FIXME:  The return type really should be \"unsigned int\"\n    but this is not how the builtin is prototyped.  */\n int\n __popcounthi2 (UHWtype x)\n@@ -219,9 +235,11 @@ __popcounthi2 (UHWtype x)\n \n   return ret;\n }\n+#endif\n \n+#ifdef XSTORMY16_PARITYHI2\n /* Returns the number of set bits in X, modulo 2.\n-   FIXME:  The return type really should be unsigned,\n+   FIXME:  The return type really should be \"unsigned int\"\n    but this is not how the builtin is prototyped.  */\n \n int\n@@ -232,32 +250,72 @@ __parityhi2 (UHWtype x)\n   x &= 0xf;\n   return (0x6996 >> x) & 1;\n }\n+#endif\n \n+#ifdef XSTORMY16_CLZHI2\n /* Returns the number of leading zero bits in X.\n-   FIXME:  The return type really should be unsigned,\n+   FIXME:  The return type really should be \"unsigned int\"\n    but this is not how the builtin is prototyped.  */\n \n int\n __clzhi2 (UHWtype x)\n {\n-  if (x > 0xff)\n-    return 8 - __clz_tab[x >> 8];\n-  return 16 - __clz_tab[x];\n+  return __stormy16_count_leading_zeros (x);\n }\n+#endif\n \n+#ifdef XSTORMY16_CTZHI2\n /* Returns the number of trailing zero bits in X.\n-   FIXME:  The return type really should be unsigned,\n-   but this is not how the builtin is prototyped.  */\n+   FIXME:  The return type really should be \"signed int\" since\n+   ctz(0) returns -1, but this is not how the builtin is prototyped.  */\n \n int\n __ctzhi2 (UHWtype x)\n {\n   /* This is cunning.  It converts X into a number with only the one bit\n-     set, the bit was the least significant bit in X.  From this we can\n-     use the __clz_tab[] array to compute the number of trailing bits.  */\n+     set, the bit that was the least significant bit in X.  From this we\n+     can use the count_leading_zeros to compute the number of trailing\n+     bits.  */\n   x &= - x;\n \n-  if (x > 0xff)\n-    return __clz_tab[x >> 8] + 7;\n-  return __clz_tab[x] - 1;\n+  return 15 - __stormy16_count_leading_zeros (x);\n+}\n+#endif\n+\n+#ifdef XSTORMY16_FFSHI2\n+/* Returns one plus the index of the least significant 1-bit of X,\n+   or if X is zero, returns zero.  FIXME:  The return type really\n+   should be \"unsigned int\" but this is not how the builtin is\n+   prototyped.  */\n+\n+int\n+__ffshi2 (UHWtype u)\n+{\n+  UHWtype count;\n+\n+  if (u == 0)\n+    return 0;\n+\n+  return 16 - __stormy16_count_leading_zeros (u & - u);\n+}\n+#endif\n+\n+#ifdef XSTORMY16_COUNT_LEADING_ZEROS\n+#undef unsigned\n+/* Count the number of zero-bits from the most significant bit to the\n+   first nonzero bit in VALUE.  Returns 16 for VALUE == 0.  Implemented\n+   as a simple for loop in order to save space by removing the need for\n+   the __clz_tab array.  */\n+\n+unsigned int\n+__stormy16_count_leading_zeros (unsigned int value)\n+{\n+  unsigned int i;\n+  unsigned int c;\n+\n+  for (c = 0, i = 1 << 15; i; i >>= 1, c++)\n+    if (i & value)\n+      break;\n+  return c;\n }\n+#endif /* XSTORMY16_COUNT_LEADING_ZEROS */"}, {"sha": "b103f88a1dfff2eea0dc1a42056b96864013f3a3", "filename": "gcc/config/stormy16/t-stormy16", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Ft-stormy16", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Fconfig%2Fstormy16%2Ft-stormy16", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Ft-stormy16?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -21,7 +21,21 @@\n # SImode routines\n \n LIB2FUNCS_EXTRA = \\\n-\t$(srcdir)/config/stormy16/stormy16-lib2.c\n+\t$(srcdir)/config/stormy16/stormy16-lib2-udivmodsi4.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-divsi3.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-modsi3.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-udivsi3.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-umodsi3.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-ashlsi3.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-ashrsi3.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-lshrsi3.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-popcounthi2.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-parityhi2.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-clzhi2.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-ctzhi2.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-ffshi2.c \\\n+\t$(srcdir)/config/stormy16/stormy16-lib2-count-leading-zeros.c\n+\n \n # floating point emulation libraries\n "}, {"sha": "e1f8b3598817bf18e39fdd1a35e51c8b18c4bbc2", "filename": "gcc/longlong.h", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Flonglong.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba96438334721b0d48bf9a1413a6c0963ddbd30f/gcc%2Flonglong.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flonglong.h?ref=ba96438334721b0d48bf9a1413a6c0963ddbd30f", "patch": "@@ -1324,6 +1324,28 @@ UDItype __umulsidi3 (USItype, USItype);\n #define count_trailing_zeros(COUNT, X)\t((COUNT) = __builtin_ctz (X))\n #endif /* __xtensa__ */\n \n+#if defined xstormy16\n+extern UHItype __stormy16_count_leading_zeros (UHItype);\n+#define count_leading_zeros(count, x)\t\t\t\t\t\\\n+  do\t\t\t\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      UHItype size;\t\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+      /* We assume that W_TYPE_SIZE is a multiple of 16...  */\t\t\\\n+      for ((count) = 0, size = W_TYPE_SIZE; size; size -= 16)\t\t\\\n+\t{\t\t\t\t\t\t\t\t\\\n+\t  UHItype c;\t\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+\t  c = __stormy16_count_leading_zeros ((x) >> (size - 16));\t\\\n+\t  (count) += c;\t\t\t\t\t\t\t\\\n+\t  if (c != 16)\t\t\t\t\t\t\t\\\n+\t    break;\t\t\t\t\t\t\t\\\n+\t}\t\t\t\t\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+  while (0)\n+#define COUNT_LEADING_ZEROS_0 W_TYPE_SIZE\n+#endif\n+\n #if defined (__z8000__) && W_TYPE_SIZE == 16\n #define add_ssaaaa(sh, sl, ah, al, bh, bl) \\\n   __asm__ (\"add\t%H1,%H5\\n\\tadc\t%H0,%H3\"\t\t\t\t\\"}]}