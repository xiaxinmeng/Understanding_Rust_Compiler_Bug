{"sha": "29192f7b77e67ae3bee0138bd0f7262e899226ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjkxOTJmN2I3N2U2N2FlM2JlZTAxMzhiZDBmNzI2MmU4OTkyMjZhYg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@adacore.com", "date": "2018-05-25T09:04:32Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-05-25T09:04:32Z"}, "message": "[Ada] Strip too long expressions in debug routines\n\n2018-05-25  Arnaud Charlet  <charlet@adacore.com>\n\ngcc/ada/\n\n\t* pprint.adb (Expression_Name): Strip too long expressions to avoid\n\tcarrying very large strings.\n\nFrom-SVN: r260732", "tree": {"sha": "865b7cf2db529619345f4bddd61657241d68286a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/865b7cf2db529619345f4bddd61657241d68286a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/29192f7b77e67ae3bee0138bd0f7262e899226ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29192f7b77e67ae3bee0138bd0f7262e899226ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/29192f7b77e67ae3bee0138bd0f7262e899226ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29192f7b77e67ae3bee0138bd0f7262e899226ab/comments", "author": {"login": "ArnaudCharlet", "id": 30291825, "node_id": "MDQ6VXNlcjMwMjkxODI1", "avatar_url": "https://avatars.githubusercontent.com/u/30291825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArnaudCharlet", "html_url": "https://github.com/ArnaudCharlet", "followers_url": "https://api.github.com/users/ArnaudCharlet/followers", "following_url": "https://api.github.com/users/ArnaudCharlet/following{/other_user}", "gists_url": "https://api.github.com/users/ArnaudCharlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArnaudCharlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArnaudCharlet/subscriptions", "organizations_url": "https://api.github.com/users/ArnaudCharlet/orgs", "repos_url": "https://api.github.com/users/ArnaudCharlet/repos", "events_url": "https://api.github.com/users/ArnaudCharlet/events{/privacy}", "received_events_url": "https://api.github.com/users/ArnaudCharlet/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "733a4a3dbc7873df5749f70a1563ea816efe7146", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/733a4a3dbc7873df5749f70a1563ea816efe7146", "html_url": "https://github.com/Rust-GCC/gccrs/commit/733a4a3dbc7873df5749f70a1563ea816efe7146"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "256ecb83c6deb9e39437713e38f5e7d6ebd1505e", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29192f7b77e67ae3bee0138bd0f7262e899226ab/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29192f7b77e67ae3bee0138bd0f7262e899226ab/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=29192f7b77e67ae3bee0138bd0f7262e899226ab", "patch": "@@ -1,3 +1,8 @@\n+2018-05-25  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* pprint.adb (Expression_Name): Strip too long expressions to avoid\n+\tcarrying very large strings.\n+\n 2018-05-25  Patrick Bernardi  <bernardi@adacore.com>\n \n \t* switch-b.adb (Scan_Binder_Switches): binder switch -Q accepts Natural"}, {"sha": "230a3d37c40378dc2bc63909ff00b09f68c2dd68", "filename": "gcc/ada/pprint.adb", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29192f7b77e67ae3bee0138bd0f7262e899226ab/gcc%2Fada%2Fpprint.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29192f7b77e67ae3bee0138bd0f7262e899226ab/gcc%2Fada%2Fpprint.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpprint.adb?ref=29192f7b77e67ae3bee0138bd0f7262e899226ab", "patch": "@@ -883,6 +883,7 @@ package body Pprint is\n          end if;\n \n          declare\n+            Threshold        : constant := 256;\n             Buffer           : String (1 .. Natural (End_Sloc - Scn));\n             Index            : Natural := 0;\n             Skipping_Comment : Boolean := False;\n@@ -935,6 +936,12 @@ package body Pprint is\n                         end if;\n                   end case;\n \n+                  --  Give up on too long strings\n+\n+                  if Index >= Threshold then\n+                     return Buffer (1 .. Index) & \"...\";\n+                  end if;\n+\n                   Scn := Scn + 1;\n                end loop;\n             end if;"}]}