{"sha": "68723fae698fb8b031395612a75b0bcb905d240b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Njg3MjNmYWU2OThmYjhiMDMxMzk1NjEyYTc1YjBiY2I5MDVkMjQwYg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2000-02-25T01:07:31Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-02-25T01:07:31Z"}, "message": "input.h (push_srcloc): New function.\n\n\t* input.h (push_srcloc): New function.\n\t(pop_srcloc): Likewise.\n\t* toplev.c (push_srcloc): Define it.\n\t(pop_srcloc): Likewise.\n\nFrom-SVN: r32141", "tree": {"sha": "feff035e6fde071949c06603b5d1b5ab82c766cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/feff035e6fde071949c06603b5d1b5ab82c766cd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/68723fae698fb8b031395612a75b0bcb905d240b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68723fae698fb8b031395612a75b0bcb905d240b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68723fae698fb8b031395612a75b0bcb905d240b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68723fae698fb8b031395612a75b0bcb905d240b/comments", "author": null, "committer": null, "parents": [{"sha": "c8082519f279ac59aca7b534b1ac4c8430a35e87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8082519f279ac59aca7b534b1ac4c8430a35e87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8082519f279ac59aca7b534b1ac4c8430a35e87"}], "stats": {"total": 63, "additions": 58, "deletions": 5}, "files": [{"sha": "92aea2909df30e35da272ddbd56fac8a4e0151b7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68723fae698fb8b031395612a75b0bcb905d240b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68723fae698fb8b031395612a75b0bcb905d240b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=68723fae698fb8b031395612a75b0bcb905d240b", "patch": "@@ -1,3 +1,10 @@\n+2000-02-24  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* input.h (push_srcloc): New function.\n+\t(pop_srcloc): Likewise.\n+\t* toplev.c (push_srcloc): Define it.\n+\t(pop_srcloc): Likewise.\n+\n 2000-02-24  Richard Henderson  <rth@cygnus.com>\n \n \t* flow.c (life_analysis): When collecting reg info, clear"}, {"sha": "3aee605f9b936d35dc793da54a2074bf819c796a", "filename": "gcc/input.h", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68723fae698fb8b031395612a75b0bcb905d240b/gcc%2Finput.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68723fae698fb8b031395612a75b0bcb905d240b/gcc%2Finput.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Finput.h?ref=68723fae698fb8b031395612a75b0bcb905d240b", "patch": "@@ -1,6 +1,6 @@\n /* Declarations for variables relating to reading the source file.\n    Used by parsers, lexical analyzers, and error message routines.\n-   Copyright (C) 1993, 1997, 1998 Free Software Foundation, Inc.\n+   Copyright (C) 1993, 1997, 1998, 2000 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -45,3 +45,6 @@ extern struct file_stack *input_file_stack;\n \n /* Incremented on each change to input_file_stack.  */\n extern int input_file_stack_tick;\n+\n+extern void push_srcloc PARAMS ((char *name, int line));\n+extern void pop_srcloc PARAMS ((void));"}, {"sha": "ada79f9ed1372e14e2c84efcd46d60cfba560a75", "filename": "gcc/toplev.c", "status": "modified", "additions": 47, "deletions": 4, "changes": 51, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68723fae698fb8b031395612a75b0bcb905d240b/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68723fae698fb8b031395612a75b0bcb905d240b/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=68723fae698fb8b031395612a75b0bcb905d240b", "patch": "@@ -1996,6 +1996,52 @@ check_global_declarations (vec, len)\n     }\n }\n \n+/* Save the current INPUT_FILENAME and LINENO on the top entry in the\n+   INPUT_FILE_STACK.  Push a new entry for FILE and LINE, and set the\n+   INPUT_FILENAME and LINENO accordingly.  */\n+\n+void\n+push_srcloc (file, line)\n+     char *file;\n+     int line;\n+{\n+  struct file_stack *fs;\n+\n+  if (input_file_stack)\n+    {\n+      input_file_stack->name = input_filename;\n+      input_file_stack->line = lineno;\n+    }\n+\n+  fs = (struct file_stack *) xmalloc (sizeof (struct file_stack));\n+  fs->name = input_filename = file;\n+  fs->line = lineno = line;\n+  fs->indent_level = 0;\n+  fs->next = input_file_stack;\n+  input_file_stack = fs;\n+  input_file_stack_tick++;\n+}\n+\n+/* Pop the top entry off the stack of presently open source files.\n+   Restore the INPUT_FILENAME and LINENO from the new topmost entry on\n+   the stack.  */\n+\n+void\n+pop_srcloc ()\n+{\n+  struct file_stack *fs;\n+  \n+  fs = input_file_stack;\n+  input_file_stack = fs->next;\n+  free (fs);\n+  input_file_stack_tick++;\n+  /* The initial souce file is never popped.  */\n+  if (!input_file_stack)\n+    abort ();\n+  input_filename = input_file_stack->name;\n+  lineno = input_file_stack->line;\n+}\n+\n /* Compile an entire file of output from cpp, named NAME.\n    Write a file of assembly output and various debugging dumps.  */\n \n@@ -2257,10 +2303,7 @@ compile_file (name)\n   input_filename = name;\n \n   /* Put an entry on the input file stack for the main input file.  */\n-  input_file_stack\n-    = (struct file_stack *) xmalloc (sizeof (struct file_stack));\n-  input_file_stack->next = 0;\n-  input_file_stack->name = input_filename;\n+  push_srcloc (input_filename, 0);\n \n   /* Perform language-specific initialization.\n      This may set main_input_filename.  */"}]}