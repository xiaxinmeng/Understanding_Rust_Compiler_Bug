{"sha": "651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjUxODIyYWVjN2NhYTBlZDFhYThjYjNkZmIwN2EzODBiNDU5NWIwOA==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2018-05-22T13:23:46Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-05-22T13:23:46Z"}, "message": "[Ada] Spurious visibility error in a nested instance with formal package\n\nThis patch fixes a spurious visibility error with a nested instance of a\ngeneric unit with a formal package, when the actual for it is a formal\npackage PA of an enclosing generic, and there are subsequent uses of the\nformals of PA in that generic unit.\n\n2018-05-22  Ed Schonberg  <schonberg@adacore.com>\n\ngcc/ada/\n\n\t* einfo.ads, einfo.adb: New attribute Hidden_In_Formal_Instance,\n\tdefined on packages that are actuals for formal packages, in order to\n\tset/reset the visibility of the formals of a formal package with given\n\tactuals, when there are subsequent uses of those formals in the\n\tenclosing generic, as required by RN 12.7 (10).\n\t* atree.ads, atree.adb: Add operations for Elist30.\n\t* atree.h: Add Elist30.\n\t* sem_ch12.adb (Analyze_Formal_Package_Instantiation): Collect formals\n\tthat are not defaulted and are thus not visible within the current\n\tinstance.\n\t(Check_Formal_Packages): Reset visibility of formals of a formal\n\tpackage that are not defaulted, on exit from current instance.\n\ngcc/testsuite/\n\n\t* gnat.dg/gen_formal_pkg.adb, gnat.dg/gen_formal_pkg_a.ads,\n\tgnat.dg/gen_formal_pkg_b.ads, gnat.dg/gen_formal_pkg_w.ads: New\n\ttestcase.\n\nFrom-SVN: r260520", "tree": {"sha": "e6e5513bfff1627d63e13e3e49a4929762591082", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e6e5513bfff1627d63e13e3e49a4929762591082"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "41ff70d9a5c91c3540d3fdb08ddc58d1e1d00eab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41ff70d9a5c91c3540d3fdb08ddc58d1e1d00eab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41ff70d9a5c91c3540d3fdb08ddc58d1e1d00eab"}], "stats": {"total": 145, "additions": 136, "deletions": 9}, "files": [{"sha": "37615e9fd069773e012892275765cf766ee77089", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -1,3 +1,18 @@\n+2018-05-22  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* einfo.ads, einfo.adb: New attribute Hidden_In_Formal_Instance,\n+\tdefined on packages that are actuals for formal packages, in order to\n+\tset/reset the visibility of the formals of a formal package with given\n+\tactuals, when there are subsequent uses of those formals in the\n+\tenclosing generic, as required by RN 12.7 (10).\n+\t* atree.ads, atree.adb: Add operations for Elist30.\n+\t* atree.h: Add Elist30.\n+\t* sem_ch12.adb (Analyze_Formal_Package_Instantiation): Collect formals\n+\tthat are not defaulted and are thus not visible within the current\n+\tinstance.\n+\t(Check_Formal_Packages): Reset visibility of formals of a formal\n+\tpackage that are not defaulted, on exit from current instance.\n+\n 2018-05-22  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* sem_prag.adb (Analyze_Input_Output): Emit an error when a non-null,"}, {"sha": "958cd5102a91680126f718e5fc5feb5e76b15ee9", "filename": "gcc/ada/atree.adb", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Fatree.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Fatree.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fatree.adb?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -3408,6 +3408,17 @@ package body Atree is\n          end if;\n       end Elist29;\n \n+      function Elist30 (N : Node_Id) return Elist_Id is\n+         pragma Assert (Nkind (N) in N_Entity);\n+         Value : constant Union_Id := Nodes.Table (N + 5).Field6;\n+      begin\n+         if Value = 0 then\n+            return No_Elist;\n+         else\n+            return Elist_Id (Value);\n+         end if;\n+      end Elist30;\n+\n       function Elist36 (N : Node_Id) return Elist_Id is\n          pragma Assert (Nkind (N) in N_Entity);\n          Value : constant Union_Id := Nodes.Table (N + 6).Field6;\n@@ -6318,6 +6329,13 @@ package body Atree is\n          Nodes.Table (N + 4).Field11 := Union_Id (Val);\n       end Set_Elist29;\n \n+      procedure Set_Elist30 (N : Node_Id; Val : Elist_Id) is\n+      begin\n+         pragma Assert (not Locked);\n+         pragma Assert (Nkind (N) in N_Entity);\n+         Nodes.Table (N + 5).Field6 := Union_Id (Val);\n+      end Set_Elist30;\n+\n       procedure Set_Elist36 (N : Node_Id; Val : Elist_Id) is\n       begin\n          pragma Assert (not Locked);"}, {"sha": "24d491852ef02ab06e6060e60ee0bb857b3416a4", "filename": "gcc/ada/atree.ads", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Fatree.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Fatree.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fatree.ads?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -1523,6 +1523,9 @@ package Atree is\n       function Elist29 (N : Node_Id) return Elist_Id;\n       pragma Inline (Elist29);\n \n+      function Elist30 (N : Node_Id) return Elist_Id;\n+      pragma Inline (Elist30);\n+\n       function Elist36 (N : Node_Id) return Elist_Id;\n       pragma Inline (Elist36);\n \n@@ -2889,6 +2892,9 @@ package Atree is\n       procedure Set_Elist29 (N : Node_Id; Val : Elist_Id);\n       pragma Inline (Set_Elist29);\n \n+      procedure Set_Elist30 (N : Node_Id; Val : Elist_Id);\n+      pragma Inline (Set_Elist30);\n+\n       procedure Set_Elist36 (N : Node_Id; Val : Elist_Id);\n       pragma Inline (Set_Elist36);\n "}, {"sha": "338affe4eb6da95a68e36e18b00b7baea80fde4f", "filename": "gcc/ada/atree.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Fatree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Fatree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fatree.h?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -530,6 +530,7 @@ extern Node_Id Current_Error_Node;\n #define Elist25(N)    Field25 (N)\n #define Elist26(N)    Field26 (N)\n #define Elist29(N)    Field29 (N)\n+#define Elist30(N)    Field30 (N)\n #define Elist36(N)    Field36 (N)\n \n #define Name1(N)      Field1  (N)"}, {"sha": "a28cb4e2f73f31d81eb34614100506b2cc2602b5", "filename": "gcc/ada/einfo.adb", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Feinfo.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Feinfo.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.adb?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -255,6 +255,7 @@ package body Einfo is\n    --    Corresponding_Equality          Node30\n    --    Last_Aggregate_Assignment       Node30\n    --    Static_Initialization           Node30\n+   --    Hidden_In_Formal_Instance       Elist30\n \n    --    Derived_Type_Link               Node31\n    --    Thunk_Entity                    Node31\n@@ -1989,6 +1990,12 @@ package body Einfo is\n       return Node8 (Id);\n    end Hiding_Loop_Variable;\n \n+   function Hidden_In_Formal_Instance (Id : E) return L is\n+   begin\n+      pragma Assert (Ekind (Id) = E_Package);\n+      return Elist30 (Id);\n+   end Hidden_In_Formal_Instance;\n+\n    function Homonym (Id : E) return E is\n    begin\n       return Node4 (Id);\n@@ -5167,6 +5174,12 @@ package body Einfo is\n       Set_Node8 (Id, V);\n    end Set_Hiding_Loop_Variable;\n \n+   procedure Set_Hidden_In_Formal_Instance (Id : E; V : L) is\n+   begin\n+      pragma Assert (Ekind (Id) = E_Package);\n+      Set_Elist30 (Id, V);\n+   end Set_Hidden_In_Formal_Instance;\n+\n    procedure Set_Homonym (Id : E; V : E) is\n    begin\n       pragma Assert (Id /= V);"}, {"sha": "76da3b9da6c60c7df248887789d37a426f2ba536", "filename": "gcc/ada/einfo.ads", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Feinfo.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Feinfo.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.ads?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -2172,6 +2172,14 @@ package Einfo is\n --       warning messages if the hidden variable turns out to be unused\n --       or is referenced without being set.\n \n+--    Hidden_In_Formal_Instance (Elist30)\n+--       Defined on actuals for formal packages. Entities on the list are\n+--       formals that are hidden outside of the formal package when this\n+--       package is not declared with a box, or the formal itself is not\n+--       defaulted (see RM 12.7 (10)). Their visibility is restored on exit\n+--       from the current generic, because the actual for the formal package\n+--       may be used subsequently in the current unit.\n+\n --    Homonym (Node4)\n --       Defined in all entities. Link for list of entities that have the\n --       same source name and that are declared in the same or enclosing\n@@ -7210,6 +7218,7 @@ package Einfo is\n    function Has_Volatile_Components             (Id : E) return B;\n    function Has_Xref_Entry                      (Id : E) return B;\n    function Hiding_Loop_Variable                (Id : E) return E;\n+   function Hidden_In_Formal_Instance           (Id : E) return L;\n    function Homonym                             (Id : E) return E;\n    function Ignore_SPARK_Mode_Pragmas           (Id : E) return B;\n    function Import_Pragma                       (Id : E) return E;\n@@ -7904,6 +7913,7 @@ package Einfo is\n    procedure Set_Has_Volatile_Components         (Id : E; V : B := True);\n    procedure Set_Has_Xref_Entry                  (Id : E; V : B := True);\n    procedure Set_Hiding_Loop_Variable            (Id : E; V : E);\n+   procedure Set_Hidden_In_Formal_Instance       (Id : E; V : L);\n    procedure Set_Homonym                         (Id : E; V : E);\n    procedure Set_Ignore_SPARK_Mode_Pragmas       (Id : E; V : B := True);\n    procedure Set_Import_Pragma                   (Id : E; V : E);\n@@ -8717,6 +8727,7 @@ package Einfo is\n    pragma Inline (Has_Volatile_Components);\n    pragma Inline (Has_Xref_Entry);\n    pragma Inline (Hiding_Loop_Variable);\n+   pragma Inline (Hidden_In_Formal_Instance);\n    pragma Inline (Homonym);\n    pragma Inline (Ignore_SPARK_Mode_Pragmas);\n    pragma Inline (Import_Pragma);\n@@ -9247,6 +9258,7 @@ package Einfo is\n    pragma Inline (Set_Has_Volatile_Components);\n    pragma Inline (Set_Has_Xref_Entry);\n    pragma Inline (Set_Hiding_Loop_Variable);\n+   pragma Inline (Set_Hidden_In_Formal_Instance);\n    pragma Inline (Set_Homonym);\n    pragma Inline (Set_Ignore_SPARK_Mode_Pragmas);\n    pragma Inline (Set_Import_Pragma);"}, {"sha": "d8721a548ee4eb4d1679514fc9bd7489f4590980", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 33, "deletions": 9, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -500,7 +500,10 @@ package body Sem_Ch12 is\n    --  check on Ada version and the presence of an access definition in N.\n \n    procedure Check_Formal_Packages (P_Id : Entity_Id);\n-   --  Apply the following to all formal packages in generic associations\n+   --  Apply the following to all formal packages in generic associations.\n+   --  Restore the visibility of the formals of the instance that are not\n+   --  defaulted (see RM 12.7 (10)). Remove the anonymous package declaration\n+   --  created for formal instances that are not defaulted.\n \n    procedure Check_Formal_Package_Instance\n      (Formal_Pack : Entity_Id;\n@@ -6561,7 +6564,6 @@ package body Sem_Ch12 is\n       E           : Entity_Id;\n       Formal_P    : Entity_Id;\n       Formal_Decl : Node_Id;\n-\n    begin\n       --  Iterate through the declarations in the instance, looking for package\n       --  renaming declarations that denote instances of formal packages. Stop\n@@ -6611,6 +6613,21 @@ package body Sem_Ch12 is\n                      Check_Formal_Package_Instance (Formal_P, E);\n                   end if;\n \n+                  --  Restore the visibility of formals of the formal instance\n+                  --  that are not defaulted, and are hidden within the current\n+                  --  generic. These formals may be visible within an enclosing\n+                  --  generic.\n+\n+                  declare\n+                     Elmt : Elmt_Id;\n+                  begin\n+                     Elmt := First_Elmt (Hidden_In_Formal_Instance (Formal_P));\n+                     while Present (Elmt) loop\n+                        Set_Is_Hidden (Node (Elmt), False);\n+                        Next_Elmt (Elmt);\n+                     end loop;\n+                  end;\n+\n                   --  After checking, remove the internal validating package.\n                   --  It is only needed for semantic checks, and as it may\n                   --  contain generic formal declarations it should not reach\n@@ -9953,13 +9970,14 @@ package body Sem_Ch12 is\n       Actual          : Node_Id;\n       Analyzed_Formal : Node_Id) return List_Id\n    is\n-      Loc         : constant Source_Ptr := Sloc (Actual);\n-      Actual_Pack : Entity_Id;\n-      Formal_Pack : Entity_Id;\n-      Gen_Parent  : Entity_Id;\n-      Decls       : List_Id;\n-      Nod         : Node_Id;\n-      Parent_Spec : Node_Id;\n+      Loc            : constant Source_Ptr := Sloc (Actual);\n+      Hidden_Formals : constant Elist_Id   := New_Elmt_List;\n+      Actual_Pack    : Entity_Id;\n+      Formal_Pack    : Entity_Id;\n+      Gen_Parent     : Entity_Id;\n+      Decls          : List_Id;\n+      Nod            : Node_Id;\n+      Parent_Spec    : Node_Id;\n \n       procedure Find_Matching_Actual\n        (F    : Node_Id;\n@@ -10351,6 +10369,10 @@ package body Sem_Ch12 is\n                         end if;\n \n                      else\n+                        if not Is_Hidden (Actual_Ent) then\n+                           Append_Elmt (Actual_Ent, Hidden_Formals);\n+                        end if;\n+\n                         Set_Is_Hidden (Actual_Ent);\n                         Set_Is_Potentially_Use_Visible (Actual_Ent, False);\n                      end if;\n@@ -10409,6 +10431,8 @@ package body Sem_Ch12 is\n \n             begin\n                Set_Is_Internal (I_Pack);\n+               Set_Ekind (I_Pack, E_Package);\n+               Set_Hidden_In_Formal_Instance (I_Pack, Hidden_Formals);\n \n                Append_To (Decls,\n                  Make_Package_Instantiation (Sloc (Actual),"}, {"sha": "a0a57222bc6b2c78f44a100435aea736940a7a1a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -1,3 +1,9 @@\n+2018-05-22  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* gnat.dg/gen_formal_pkg.adb, gnat.dg/gen_formal_pkg_a.ads,\n+\tgnat.dg/gen_formal_pkg_b.ads, gnat.dg/gen_formal_pkg_w.ads: New\n+\ttestcase.\n+\n 2018-05-22  Ed Schonberg  <schonberg@adacore.com>\n \n \t* gnat.dg/fixedpnt3.adb: New testcase."}, {"sha": "b317e2b1c1e54191898211b71edaf6cb05e04d8e", "filename": "gcc/testsuite/gnat.dg/gen_formal_pkg.adb", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg.adb?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -0,0 +1,10 @@\n+--  { dg-do compile }\n+\n+with Gen_Formal_Pkg_A, Gen_Formal_Pkg_B, Gen_Formal_Pkg_W;\n+\n+procedure Gen_Formal_Pkg is\n+  package AI is new Gen_Formal_Pkg_A (Long_Float);\n+  package WI is new Gen_Formal_Pkg_W (AI);\n+begin\n+   null;\n+end;"}, {"sha": "074129fec86be66de2b23fe4dd89c3bf3552d2f5", "filename": "gcc/testsuite/gnat.dg/gen_formal_pkg_a.ads", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg_a.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg_a.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg_a.ads?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -0,0 +1,3 @@\n+generic\n+   type T1 is private;\n+package Gen_Formal_Pkg_A is end;"}, {"sha": "60f7f946fb6460a9dd4062fa74df8986529ec4d3", "filename": "gcc/testsuite/gnat.dg/gen_formal_pkg_b.ads", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg_b.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg_b.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg_b.ads?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -0,0 +1,6 @@\n+with Gen_Formal_Pkg_A;\n+\n+generic\n+   type T1 is private;\n+   with package Ai is new Gen_Formal_Pkg_A (T1);\n+package Gen_Formal_Pkg_B is end;"}, {"sha": "d3100b74df73d361232082823ff61025c7ed3062", "filename": "gcc/testsuite/gnat.dg/gen_formal_pkg_w.ads", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg_w.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/651822aec7caa0ed1aa8cb3dfb07a380b4595b08/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg_w.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fgen_formal_pkg_w.ads?ref=651822aec7caa0ed1aa8cb3dfb07a380b4595b08", "patch": "@@ -0,0 +1,13 @@\n+with Gen_Formal_Pkg_A, Gen_Formal_Pkg_B;\n+\n+generic\n+   with package Ai is new Gen_Formal_Pkg_A (<>);\n+package Gen_Formal_Pkg_W is\n+\n+   procedure P1 (T : Ai.T1) is null;\n+\n+   package Bi is new Gen_Formal_Pkg_B (Ai.T1, Ai);\n+\n+   procedure P2 (T : Ai.T1) is null;\n+\n+end Gen_Formal_Pkg_W;"}]}