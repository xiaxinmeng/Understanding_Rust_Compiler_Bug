{"sha": "dcaac07dbf07815294d7f8b1568ef9e157b57dae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGNhYWMwN2RiZjA3ODE1Mjk0ZDdmOGIxNTY4ZWY5ZTE1N2I1N2RhZQ==", "commit": {"author": {"name": "Revital Eres", "email": "revital.eres@linaro.org", "date": "2011-07-31T10:37:35Z"}, "committer": {"name": "Revital Eres", "email": "revitale@gcc.gnu.org", "date": "2011-07-31T10:37:35Z"}, "message": "Move the creation of anti-dep edge\n\nFrom-SVN: r176972", "tree": {"sha": "a85f97f3444494e2d405423a55348c5201edae89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a85f97f3444494e2d405423a55348c5201edae89"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dcaac07dbf07815294d7f8b1568ef9e157b57dae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcaac07dbf07815294d7f8b1568ef9e157b57dae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcaac07dbf07815294d7f8b1568ef9e157b57dae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcaac07dbf07815294d7f8b1568ef9e157b57dae/comments", "author": null, "committer": null, "parents": [{"sha": "0291fa2509cbd6816d720aebfacdebffe1c9dcad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0291fa2509cbd6816d720aebfacdebffe1c9dcad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0291fa2509cbd6816d720aebfacdebffe1c9dcad"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "c10b1e0ade9dcdc7c9f82191cc182d6a2fa1ea5d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcaac07dbf07815294d7f8b1568ef9e157b57dae/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcaac07dbf07815294d7f8b1568ef9e157b57dae/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dcaac07dbf07815294d7f8b1568ef9e157b57dae", "patch": "@@ -1,3 +1,10 @@\n+2011-07-31  Revital Eres  <revital.eres@linaro.org>\n+\n+\t* ddg.c (create_ddg_dep_from_intra_loop_link): Remove the creation\n+\tof anti-dep edge from a branch.\n+\t(add_cross_iteration_register_deps): Create anti-dep edge from\n+\ta branch.\n+\n 2011-07-31  Revital Eres  <revital.eres@linaro.org>\n \n \t* modulo-sched.c: Change comment."}, {"sha": "856fa4e6800f2a17c52ecf03ca58ca28d9af0931", "filename": "gcc/ddg.c", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcaac07dbf07815294d7f8b1568ef9e157b57dae/gcc%2Fddg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcaac07dbf07815294d7f8b1568ef9e157b57dae/gcc%2Fddg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fddg.c?ref=dcaac07dbf07815294d7f8b1568ef9e157b57dae", "patch": "@@ -197,11 +197,6 @@ create_ddg_dep_from_intra_loop_link (ddg_ptr g, ddg_node_ptr src_node,\n         }\n     }\n \n-  /* If a true dep edge enters the branch create an anti edge in the\n-     opposite direction to prevent the creation of reg-moves.  */\n-  if ((DEP_TYPE (link) == REG_DEP_TRUE) && JUMP_P (dest_node->insn))\n-    create_ddg_dep_no_link (g, dest_node, src_node, ANTI_DEP, REG_DEP, 1);\n-\n    latency = dep_cost (link);\n    e = create_ddg_edge (src_node, dest_node, t, dt, latency, distance);\n    add_edge_to_ddg (g, e);\n@@ -306,8 +301,11 @@ add_cross_iteration_register_deps (ddg_ptr g, df_ref last_def)\n \n \t  gcc_assert (first_def_node);\n \n+         /* Always create the edge if the use node is a branch in\n+            order to prevent the creation of reg-moves.  */\n           if (DF_REF_ID (last_def) != DF_REF_ID (first_def)\n-              || !flag_modulo_sched_allow_regmoves)\n+              || !flag_modulo_sched_allow_regmoves\n+\t      || JUMP_P (use_node->insn))\n             create_ddg_dep_no_link (g, use_node, first_def_node, ANTI_DEP,\n                                     REG_DEP, 1);\n "}]}