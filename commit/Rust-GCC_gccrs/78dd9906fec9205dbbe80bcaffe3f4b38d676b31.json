{"sha": "78dd9906fec9205dbbe80bcaffe3f4b38d676b31", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzhkZDk5MDZmZWM5MjA1ZGJiZTgwYmNhZmZlM2Y0YjM4ZDY3NmIzMQ==", "commit": {"author": {"name": "J\"orn Rennecke", "email": "amylaar@cygnus.co.uk", "date": "1999-03-08T10:51:28Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "1999-03-08T10:51:28Z"}, "message": "* regmove.c (copy_src_to_dest): New argument max_old_uid.\n\nFrom-SVN: r25639", "tree": {"sha": "b88647af1d7a35c7e56012f0a2d320fcbf5285fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b88647af1d7a35c7e56012f0a2d320fcbf5285fb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/78dd9906fec9205dbbe80bcaffe3f4b38d676b31", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78dd9906fec9205dbbe80bcaffe3f4b38d676b31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78dd9906fec9205dbbe80bcaffe3f4b38d676b31", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78dd9906fec9205dbbe80bcaffe3f4b38d676b31/comments", "author": null, "committer": null, "parents": [{"sha": "3c869bc5eb08df083269b64ccf54163e263d765a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c869bc5eb08df083269b64ccf54163e263d765a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c869bc5eb08df083269b64ccf54163e263d765a"}], "stats": {"total": 23, "additions": 16, "deletions": 7}, "files": [{"sha": "c68252e7544b85d75165e4e923c692110275d542", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78dd9906fec9205dbbe80bcaffe3f4b38d676b31/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78dd9906fec9205dbbe80bcaffe3f4b38d676b31/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=78dd9906fec9205dbbe80bcaffe3f4b38d676b31", "patch": "@@ -1,3 +1,7 @@\n+Mon Mar  8 18:47:11 1999  J\"orn Rennecke <amylaar@cygnus.co.uk>\n+\n+\t* regmove.c (copy_src_to_dest): New argument max_old_uid.\n+\n Mon Mar  8 08:23:00 1999  Bruce Korb <korb@datadesign.com>\n \t* ChangeLog: merged entries from fixincl-branch\n "}, {"sha": "658f9d402394c80bc4c12e0d98981c5e141aa914", "filename": "gcc/regmove.c", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78dd9906fec9205dbbe80bcaffe3f4b38d676b31/gcc%2Fregmove.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78dd9906fec9205dbbe80bcaffe3f4b38d676b31/gcc%2Fregmove.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregmove.c?ref=78dd9906fec9205dbbe80bcaffe3f4b38d676b31", "patch": "@@ -43,7 +43,7 @@ static int optimize_reg_copy_1\tPROTO((rtx, rtx, rtx));\n static void optimize_reg_copy_2\tPROTO((rtx, rtx, rtx));\n static void optimize_reg_copy_3\tPROTO((rtx, rtx, rtx));\n static rtx gen_add3_insn\tPROTO((rtx, rtx, rtx));\n-static void copy_src_to_dest\tPROTO((rtx, rtx, rtx, int));\n+static void copy_src_to_dest\tPROTO((rtx, rtx, rtx, int, int));\n static int *regmove_bb_head;\n \n struct match {\n@@ -744,11 +744,12 @@ optimize_reg_copy_3 (insn, dest, src)\n    instead moving the value to dest directly before the operation.  */\n \n static void\n-copy_src_to_dest (insn, src, dest, loop_depth)\n+copy_src_to_dest (insn, src, dest, loop_depth, old_max_uid)\n      rtx insn;\n      rtx src;\n      rtx dest;\n      int loop_depth;\n+     int old_max_uid;\n {\n   rtx seq;\n   rtx link;\n@@ -820,11 +821,14 @@ copy_src_to_dest (insn, src, dest, loop_depth)\n       /* Is the insn the head of a basic block?  If so extend it */\n       insn_uid = INSN_UID (insn);\n       move_uid = INSN_UID (move_insn);\n-      bb = regmove_bb_head[insn_uid];\n-      if (bb >= 0)\n+      if (insn_uid < old_max_uid)\n \t{\n-\t  BLOCK_HEAD (bb) = move_insn;\n-\t  regmove_bb_head[insn_uid] = -1;\n+\t  bb = regmove_bb_head[insn_uid];\n+\t  if (bb >= 0)\n+\t    {\n+\t      BLOCK_HEAD (bb) = move_insn;\n+\t      regmove_bb_head[insn_uid] = -1;\n+\t    }\n \t}\n \n       /* Update the various register tables.  */\n@@ -1534,7 +1538,8 @@ regmove_optimize (f, nregs, regmove_dump_file)\n \t  /* If we weren't able to replace any of the alternatives, try an\n \t     alternative appoach of copying the source to the destination.  */\n \t  if (!success && copy_src != NULL_RTX)\n-\t    copy_src_to_dest (insn, copy_src, copy_dst, loop_depth);\n+\t    copy_src_to_dest (insn, copy_src, copy_dst, loop_depth,\n+\t\t\t      old_max_uid);\n \n \t}\n     }"}]}