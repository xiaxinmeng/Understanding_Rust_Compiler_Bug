{"sha": "eb62be4408c6151c076aad495fba7abef9c37c03", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWI2MmJlNDQwOGM2MTUxYzA3NmFhZDQ5NWZiYTdhYmVmOWMzN2MwMw==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2007-02-15T00:58:01Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2007-02-15T00:58:01Z"}, "message": "primary.c (match_logical_constant): Return MATCH_ERROR on invalid kind.\n\n2007-02-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n       * primary.c (match_logical_constant): Return MATCH_ERROR on invalid kind.\n       * gfortran.dg/logical_2.f90: New test.\n\nFrom-SVN: r121974", "tree": {"sha": "6f6184f5747f7073375f5728b544f6abb2e44ac1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6f6184f5747f7073375f5728b544f6abb2e44ac1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eb62be4408c6151c076aad495fba7abef9c37c03", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb62be4408c6151c076aad495fba7abef9c37c03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb62be4408c6151c076aad495fba7abef9c37c03", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb62be4408c6151c076aad495fba7abef9c37c03/comments", "author": null, "committer": null, "parents": [{"sha": "d693dd2638f2bb69e4663a5f7cb656e88948d3eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d693dd2638f2bb69e4663a5f7cb656e88948d3eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d693dd2638f2bb69e4663a5f7cb656e88948d3eb"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "974ee46d9fe1e44d9cb5e0620bdee1efcc2aafb9", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb62be4408c6151c076aad495fba7abef9c37c03/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb62be4408c6151c076aad495fba7abef9c37c03/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=eb62be4408c6151c076aad495fba7abef9c37c03", "patch": "@@ -1,3 +1,9 @@\n+2007-02-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/30799\n+\t* primary.c (match_logical_constant): Return MATCH_ERROR on invalid\n+\tkind.\n+\n 2007-02-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \t* misc.c (gfc_typename): Fix potential buffer overflow."}, {"sha": "4649b4ca02b0640d7074e79b2f0d8f5e337d1e69", "filename": "gcc/fortran/primary.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb62be4408c6151c076aad495fba7abef9c37c03/gcc%2Ffortran%2Fprimary.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb62be4408c6151c076aad495fba7abef9c37c03/gcc%2Ffortran%2Fprimary.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fprimary.c?ref=eb62be4408c6151c076aad495fba7abef9c37c03", "patch": "@@ -1025,7 +1025,10 @@ match_logical_constant (gfc_expr **result)\n     kind = gfc_default_logical_kind;\n \n   if (gfc_validate_kind (BT_LOGICAL, kind, true) < 0)\n-    gfc_error (\"Bad kind for logical constant at %C\");\n+    {\n+      gfc_error (\"Bad kind for logical constant at %C\");\n+      return MATCH_ERROR;\n+    }\n \n   e = gfc_get_expr ();\n "}, {"sha": "b82bea0a0bff1469c3f75855ee892d5522547ce8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb62be4408c6151c076aad495fba7abef9c37c03/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb62be4408c6151c076aad495fba7abef9c37c03/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=eb62be4408c6151c076aad495fba7abef9c37c03", "patch": "@@ -1,3 +1,8 @@\n+2007-02-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/30799\n+\t* gfortran.dg/logical_2.f90: New test.\n+\n 2007-02-14  Joseph Myers  <joseph@codesourcery.com>\n \n \t* gcc.dg/torture/complex-alias-1.c: New test."}, {"sha": "1a28fefd50cdeac5f4312fac1dd6c5656e52c552", "filename": "gcc/testsuite/gfortran.dg/logical_2.f90", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb62be4408c6151c076aad495fba7abef9c37c03/gcc%2Ftestsuite%2Fgfortran.dg%2Flogical_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb62be4408c6151c076aad495fba7abef9c37c03/gcc%2Ftestsuite%2Fgfortran.dg%2Flogical_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Flogical_2.f90?ref=eb62be4408c6151c076aad495fba7abef9c37c03", "patch": "@@ -0,0 +1,26 @@\n+! { dg-do compile }\n+! PR fortran/30799\n+! Inconsistent handling of bad (invalid) LOGICAL kinds\n+! Reporter: Harald Anlauf <anlauf@gmx.de>\n+! Testcase altered by Steven G. Kargl\n+program gfcbug57\n+  implicit none\n+  !\n+  ! These are logical kinds known by gfortran and many other compilers:\n+  !\n+  print *, kind (.true._1) ! This prints \"1\"\n+  print *, kind (.true._2) ! This prints \"2\"\n+  print *, kind (.true._4) ! This prints \"4\"\n+  print *, kind (.true._8) ! This prints \"8\"\n+  !\n+  ! These are very strange (read: bad (invalid?)) logical kinds,\n+  ! handled inconsistently by gfortran (there's no logical(kind=0) etc.)\n+  !\n+  print *, kind (.true._0)   ! { dg-error \"kind for logical constant\" }\n+  print *, kind (.true._3)   ! { dg-error \"kind for logical constant\" }\n+  print *, kind (.true._123) ! { dg-error \"kind for logical constant\" }\n+  !\n+  ! Here gfortran bails out with a runtime error:\n+  !\n+  print *, .true._3   ! { dg-error \"kind for logical constant\" }\n+end program gfcbug57"}]}