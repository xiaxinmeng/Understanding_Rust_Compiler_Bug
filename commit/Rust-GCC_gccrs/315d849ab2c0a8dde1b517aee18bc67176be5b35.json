{"sha": "315d849ab2c0a8dde1b517aee18bc67176be5b35", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzE1ZDg0OWFiMmMwYThkZGUxYjUxN2FlZTE4YmM2NzE3NmJlNWIzNQ==", "commit": {"author": {"name": "Mostafa Hagog", "email": "mustafa@il.ibm.com", "date": "2003-12-28T16:53:27Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2003-12-28T16:53:27Z"}, "message": "sbitmap.c (sbitmap_union_of_diff_cg, [...]): Accumulate \"changed\" properly.\n\n2003-12-28  Mostafa Hagog  <mustafa@il.ibm.com>\n\n\t* sbitmap.c (sbitmap_union_of_diff_cg, sbitmap_a_and_b_cg,\n\tsbitmap_a_xor_b_cg): Accumulate \"changed\" properly.\n\t(sbitmap_not): Zero all bits past n_bit.\n\nFrom-SVN: r75182", "tree": {"sha": "e6a5748acc32c525d3030085f49922c8596edf81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e6a5748acc32c525d3030085f49922c8596edf81"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/315d849ab2c0a8dde1b517aee18bc67176be5b35", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/315d849ab2c0a8dde1b517aee18bc67176be5b35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/315d849ab2c0a8dde1b517aee18bc67176be5b35", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/315d849ab2c0a8dde1b517aee18bc67176be5b35/comments", "author": null, "committer": null, "parents": [{"sha": "b8da67fa2f2d13121e6ea7500b6dd413efd99921", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8da67fa2f2d13121e6ea7500b6dd413efd99921", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8da67fa2f2d13121e6ea7500b6dd413efd99921"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "70b2443afb087d107bc8ee3c5ebb27151f414fb1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/315d849ab2c0a8dde1b517aee18bc67176be5b35/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/315d849ab2c0a8dde1b517aee18bc67176be5b35/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=315d849ab2c0a8dde1b517aee18bc67176be5b35", "patch": "@@ -1,3 +1,9 @@\n+2003-12-28  Mostafa Hagog  <mustafa@il.ibm.com>\n+\n+\t* sbitmap.c (sbitmap_union_of_diff_cg, sbitmap_a_and_b_cg,\n+\tsbitmap_a_xor_b_cg): Accumulate \"changed\" properly.\n+\t(sbitmap_not): Zero all bits past n_bit.\n+\n 2003-12-27  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n \n \tPR opt/13159"}, {"sha": "1d27a871097b1a6de05d8eefac914c0efce005ed", "filename": "gcc/sbitmap.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/315d849ab2c0a8dde1b517aee18bc67176be5b35/gcc%2Fsbitmap.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/315d849ab2c0a8dde1b517aee18bc67176be5b35/gcc%2Fsbitmap.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsbitmap.c?ref=315d849ab2c0a8dde1b517aee18bc67176be5b35", "patch": "@@ -250,9 +250,16 @@ sbitmap_not (sbitmap dst, sbitmap src)\n   unsigned int i, n = dst->size;\n   sbitmap_ptr dstp = dst->elms;\n   sbitmap_ptr srcp = src->elms;\n+  unsigned int last_bit;\n \n   for (i = 0; i < n; i++)\n     *dstp++ = ~*srcp++;\n+\n+  /* Zero all bits past n_bits, by ANDing dst with sbitmap_ones.  */\n+  last_bit = src->n_bits % SBITMAP_ELT_BITS;\n+  if (last_bit)\n+    dst->elms[n-1] = dst->elms[n-1]\n+      & ((SBITMAP_ELT_TYPE)-1 >> (SBITMAP_ELT_BITS - last_bit));\n }\n \n /* Set the bits in DST to be the difference between the bits\n@@ -298,7 +305,7 @@ sbitmap_a_and_b_cg (sbitmap dst, sbitmap a, sbitmap b)\n   for (i = 0; i < n; i++)\n     {\n       SBITMAP_ELT_TYPE tmp = *ap++ & *bp++;\n-      changed = *dstp ^ tmp;\n+      changed |= *dstp ^ tmp;\n       *dstp++ = tmp;\n     }\n \n@@ -332,7 +339,7 @@ sbitmap_a_xor_b_cg (sbitmap dst, sbitmap a, sbitmap b)\n   for (i = 0; i < n; i++)\n     {\n       SBITMAP_ELT_TYPE tmp = *ap++ ^ *bp++;\n-      changed = *dstp ^ tmp;\n+      changed |= *dstp ^ tmp;\n       *dstp++ = tmp;\n     }\n \n@@ -366,7 +373,7 @@ sbitmap_a_or_b_cg (sbitmap dst, sbitmap a, sbitmap b)\n   for (i = 0; i < n; i++)\n     {\n       SBITMAP_ELT_TYPE tmp = *ap++ | *bp++;\n-      changed = *dstp ^ tmp;\n+      changed |= *dstp ^ tmp;\n       *dstp++ = tmp;\n     }\n "}]}