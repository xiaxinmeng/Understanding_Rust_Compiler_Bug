{"sha": "159f01f8a9bcc92e142ab70ad0df57f371db1096", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTU5ZjAxZjhhOWJjYzkyZTE0MmFiNzBhZDBkZjU3ZjM3MWRiMTA5Ng==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2017-02-08T09:47:09Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2017-02-08T09:47:09Z"}, "message": "[PR 79375] Avoid passing NULL by reference\n\n2017-02-08  Martin Jambor  <mjambor@suse.cz>\n\n\tPR ipa/79375\n\t* ipa-prop.c (ipa_alloc_node_params): Make static, return bool\n\twhether allocation happened.\n\t(ipa_initialize_node_params): Do not call ipa_alloc_node_params if\n\tnothing was allocated.\n\nFrom-SVN: r245275", "tree": {"sha": "24264722d83b83fd458ec440fd846ad648c70a87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24264722d83b83fd458ec440fd846ad648c70a87"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/159f01f8a9bcc92e142ab70ad0df57f371db1096", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/159f01f8a9bcc92e142ab70ad0df57f371db1096", "html_url": "https://github.com/Rust-GCC/gccrs/commit/159f01f8a9bcc92e142ab70ad0df57f371db1096", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/159f01f8a9bcc92e142ab70ad0df57f371db1096/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "50c1f4a5e1d41701ee9fcf251c3ce9ad37a51329", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50c1f4a5e1d41701ee9fcf251c3ce9ad37a51329", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50c1f4a5e1d41701ee9fcf251c3ce9ad37a51329"}], "stats": {"total": 29, "additions": 20, "deletions": 9}, "files": [{"sha": "eea8bc77b23ea7e97bd6cbd6a5bb8a3e7cda2047", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/159f01f8a9bcc92e142ab70ad0df57f371db1096/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/159f01f8a9bcc92e142ab70ad0df57f371db1096/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=159f01f8a9bcc92e142ab70ad0df57f371db1096", "patch": "@@ -1,3 +1,11 @@\n+2017-02-08  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR ipa/79375\n+\t* ipa-prop.c (ipa_alloc_node_params): Make static, return bool\n+\twhether allocation happened.\n+\t(ipa_initialize_node_params): Do not call ipa_alloc_node_params if\n+\tnothing was allocated.\n+\n 2017-02-08  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/79408"}, {"sha": "e4e44ce20c693990da5393bc6538facdc9aa102e", "filename": "gcc/ipa-prop.c", "status": "modified", "additions": 12, "deletions": 9, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/159f01f8a9bcc92e142ab70ad0df57f371db1096/gcc%2Fipa-prop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/159f01f8a9bcc92e142ab70ad0df57f371db1096/gcc%2Fipa-prop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-prop.c?ref=159f01f8a9bcc92e142ab70ad0df57f371db1096", "patch": "@@ -176,16 +176,21 @@ ipa_dump_param (FILE *file, struct ipa_node_params *info, int i)\n     }\n }\n \n-/* Initialize the ipa_node_params structure associated with NODE \n-   to hold PARAM_COUNT parameters.  */\n+/* If necessary, allocate vector of parameter descriptors in info of NODE.\n+   Return true if they were allocated, false if not.  */\n \n-void\n+static bool\n ipa_alloc_node_params (struct cgraph_node *node, int param_count)\n {\n   struct ipa_node_params *info = IPA_NODE_REF (node);\n \n   if (!info->descriptors && param_count)\n-    vec_safe_grow_cleared (info->descriptors, param_count);\n+    {\n+      vec_safe_grow_cleared (info->descriptors, param_count);\n+      return true;\n+    }\n+  else\n+    return false;\n }\n \n /* Initialize the ipa_node_params structure associated with NODE by counting\n@@ -197,11 +202,9 @@ ipa_initialize_node_params (struct cgraph_node *node)\n {\n   struct ipa_node_params *info = IPA_NODE_REF (node);\n \n-  if (!info->descriptors)\n-    {\n-      ipa_alloc_node_params (node, count_formal_params (node->decl));\n-      ipa_populate_param_decls (node, *info->descriptors);\n-    }\n+  if (!info->descriptors\n+      && ipa_alloc_node_params (node, count_formal_params (node->decl)))\n+    ipa_populate_param_decls (node, *info->descriptors);\n }\n \n /* Print the jump functions associated with call graph edge CS to file F.  */"}]}