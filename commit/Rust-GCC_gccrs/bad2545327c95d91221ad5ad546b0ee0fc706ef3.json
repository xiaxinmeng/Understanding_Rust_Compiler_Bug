{"sha": "bad2545327c95d91221ad5ad546b0ee0fc706ef3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmFkMjU0NTMyN2M5NWQ5MTIyMWFkNWFkNTQ2YjBlZTBmYzcwNmVmMw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-11-11T19:57:23Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-11-11T19:57:23Z"}, "message": "re PR tree-optimization/51091 (FAIL: gcc.dg/tree-ssa/stdarg-2.c scan-tree-dump stdarg)\n\n\tPR tree-optimization/51091\n\t* tree-stdarg.c (execute_optimize_stdarg): Ignore TREE_CLOBBER_P\n\trhs also in the va_list_simple_ptr case.\n\nFrom-SVN: r181299", "tree": {"sha": "91a92cdc2750682c8d6499479f8bc9594df60236", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/91a92cdc2750682c8d6499479f8bc9594df60236"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bad2545327c95d91221ad5ad546b0ee0fc706ef3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bad2545327c95d91221ad5ad546b0ee0fc706ef3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bad2545327c95d91221ad5ad546b0ee0fc706ef3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bad2545327c95d91221ad5ad546b0ee0fc706ef3/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "dd34c087ffe7a798835fb95c7eb3dd68afd08f08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd34c087ffe7a798835fb95c7eb3dd68afd08f08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd34c087ffe7a798835fb95c7eb3dd68afd08f08"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "40c57d161cb5eea4fce5fdb272cb956c06f1fd2c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bad2545327c95d91221ad5ad546b0ee0fc706ef3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bad2545327c95d91221ad5ad546b0ee0fc706ef3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bad2545327c95d91221ad5ad546b0ee0fc706ef3", "patch": "@@ -1,5 +1,9 @@\n 2011-11-11  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/51091\n+\t* tree-stdarg.c (execute_optimize_stdarg): Ignore TREE_CLOBBER_P\n+\trhs also in the va_list_simple_ptr case.\n+\n \tPR tree-optimization/51058\n \t* tree-vect-slp.c (vect_remove_slp_scalar_calls): New function.\n \t(vect_schedule_slp): Call it."}, {"sha": "9b7a126b1ef4bc8e2b2319d1b98d4777eb571f87", "filename": "gcc/tree-stdarg.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bad2545327c95d91221ad5ad546b0ee0fc706ef3/gcc%2Ftree-stdarg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bad2545327c95d91221ad5ad546b0ee0fc706ef3/gcc%2Ftree-stdarg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-stdarg.c?ref=bad2545327c95d91221ad5ad546b0ee0fc706ef3", "patch": "@@ -1,5 +1,5 @@\n /* Pass computing data for optimizing stdarg functions.\n-   Copyright (C) 2004, 2005, 2007, 2008, 2009, 2010\n+   Copyright (C) 2004, 2005, 2007, 2008, 2009, 2010, 2011\n    Free Software Foundation, Inc.\n    Contributed by Jakub Jelinek <jakub@redhat.com>\n \n@@ -847,8 +847,12 @@ execute_optimize_stdarg (void)\n \t\t  if (get_gimple_rhs_class (gimple_assign_rhs_code (stmt))\n \t\t      == GIMPLE_SINGLE_RHS)\n \t\t    {\n+\t\t      /* Check for ap ={v} {}.  */\n+\t\t      if (TREE_CLOBBER_P (rhs))\n+\t\t\tcontinue;\n+\n \t\t      /* Check for tem = ap.  */\n-\t\t      if (va_list_ptr_read (&si, rhs, lhs))\n+\t\t      else if (va_list_ptr_read (&si, rhs, lhs))\n \t\t\tcontinue;\n \n \t\t      /* Check for the last insn in:\n@@ -875,6 +879,7 @@ execute_optimize_stdarg (void)\n \t\t      /* Check for ap ={v} {}.  */\n \t\t      if (TREE_CLOBBER_P (rhs))\n \t\t\tcontinue;\n+\n \t\t      /* Check for ap[0].field = temp.  */\n \t\t      else if (va_list_counter_struct_op (&si, lhs, rhs, true))\n \t\t\tcontinue;"}]}