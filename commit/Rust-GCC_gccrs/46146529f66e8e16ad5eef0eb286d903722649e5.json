{"sha": "46146529f66e8e16ad5eef0eb286d903722649e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDYxNDY1MjlmNjZlOGUxNmFkNWVlZjBlYjI4NmQ5MDM3MjI2NDllNQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "2000-09-08T01:35:53Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2000-09-08T01:35:53Z"}, "message": "Fix ia64-linux compiler abort on perl.\n\n\t* reload.c (push_reload): Use CLASS_CANNOT_CHANGE_MODE_P in addition\n\tto CLASS_CANNOT_CHANGE_MODE.\n\t* config/ia64/ia64.h (CLASS_CANNOT_CHANGE_MODE_P): True only if the\n\tmode classes are different.\n\nFrom-SVN: r36256", "tree": {"sha": "1249b18fdb950c858b6285494d6803b5dbb322ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1249b18fdb950c858b6285494d6803b5dbb322ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46146529f66e8e16ad5eef0eb286d903722649e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46146529f66e8e16ad5eef0eb286d903722649e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46146529f66e8e16ad5eef0eb286d903722649e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46146529f66e8e16ad5eef0eb286d903722649e5/comments", "author": null, "committer": null, "parents": [{"sha": "f1158db34242a2bfcce395ebbe4f6ab7a1eaa759", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1158db34242a2bfcce395ebbe4f6ab7a1eaa759", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1158db34242a2bfcce395ebbe4f6ab7a1eaa759"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "6965aea5adefd825f4e999a4844e3a4dbb1935ee", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46146529f66e8e16ad5eef0eb286d903722649e5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46146529f66e8e16ad5eef0eb286d903722649e5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=46146529f66e8e16ad5eef0eb286d903722649e5", "patch": "@@ -1,3 +1,10 @@\n+2000-09-07  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* reload.c (push_reload): Use CLASS_CANNOT_CHANGE_MODE_P in addition\n+\tto CLASS_CANNOT_CHANGE_MODE.\n+\t* config/ia64/ia64.h (CLASS_CANNOT_CHANGE_MODE_P): True only if the\n+\tmode classes are different.\n+\n 2000-09-07  Zack Weinberg  <zack@wolery.cumb.org>\n \n \t* cpplib.h (struct cpp_options): Add user_label_prefix member,"}, {"sha": "86463b4e02964bd715fe1fc7fc89eba50fc67317", "filename": "gcc/config/ia64/ia64.h", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46146529f66e8e16ad5eef0eb286d903722649e5/gcc%2Fconfig%2Fia64%2Fia64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46146529f66e8e16ad5eef0eb286d903722649e5/gcc%2Fconfig%2Fia64%2Fia64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.h?ref=46146529f66e8e16ad5eef0eb286d903722649e5", "patch": "@@ -1055,9 +1055,12 @@ enum reg_class\n \n #define CLASS_CANNOT_CHANGE_MODE        FR_REGS\n \n-/* Defines illegal mode changes for CLASS_CANNOT_CHANGE_MODE.  */\n+/* Defines illegal mode changes for CLASS_CANNOT_CHANGE_MODE.\n+   In FP regs, we can't change FP values to integer values and vice\n+   versa, but we can change e.g. DImode to SImode.  */\n \n-#define CLASS_CANNOT_CHANGE_MODE_P(FROM,TO) 1\n+#define CLASS_CANNOT_CHANGE_MODE_P(FROM,TO) \\\n+  (GET_MODE_CLASS (FROM) != GET_MODE_CLASS (TO))\n \n /* A C expression that defines the machine-dependent operand constraint\n    letters (`I', `J', `K', .. 'P') that specify particular ranges of"}, {"sha": "d8abd39bef88d3c383f658a873a60f76a1674e23", "filename": "gcc/reload.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46146529f66e8e16ad5eef0eb286d903722649e5/gcc%2Freload.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46146529f66e8e16ad5eef0eb286d903722649e5/gcc%2Freload.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload.c?ref=46146529f66e8e16ad5eef0eb286d903722649e5", "patch": "@@ -946,7 +946,8 @@ push_reload (in, out, inloc, outloc, class,\n   if (in != 0 && GET_CODE (in) == SUBREG\n       && (SUBREG_WORD (in) == 0 || strict_low)\n #ifdef CLASS_CANNOT_CHANGE_MODE\n-      && class != CLASS_CANNOT_CHANGE_MODE\n+      && (class != CLASS_CANNOT_CHANGE_MODE\n+\t  || ! CLASS_CANNOT_CHANGE_MODE_P (GET_MODE (SUBREG_REG (in)), inmode))\n #endif\n       && (CONSTANT_P (SUBREG_REG (in))\n \t  || GET_CODE (SUBREG_REG (in)) == PLUS\n@@ -1051,7 +1052,9 @@ push_reload (in, out, inloc, outloc, class,\n   if (out != 0 && GET_CODE (out) == SUBREG\n       && (SUBREG_WORD (out) == 0 || strict_low)\n #ifdef CLASS_CANNOT_CHANGE_MODE\n-      && class != CLASS_CANNOT_CHANGE_MODE\n+      && (class != CLASS_CANNOT_CHANGE_MODE\n+\t  || ! CLASS_CANNOT_CHANGE_MODE_P (GET_MODE (SUBREG_REG (out)),\n+\t\t\t\t\t   outmode))\n #endif\n       && (CONSTANT_P (SUBREG_REG (out))\n \t  || strict_low"}]}