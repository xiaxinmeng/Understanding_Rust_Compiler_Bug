{"sha": "d475215a7b316fdc0744be752754b590bac22959", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQ3NTIxNWE3YjMxNmZkYzA3NDRiZTc1Mjc1NGI1OTBiYWMyMjk1OQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2001-06-28T19:42:24Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2001-06-28T19:42:24Z"}, "message": "re PR java/3441 (fastjar zlib)\n\n\t* configure: Rebuilt.\n\t* configure.in: Accept --with-system-zlib.  Fixes PR java/3441.\n\nFrom-SVN: r43644", "tree": {"sha": "7c7c4db4da3af707f852f061b6e998712a9ed601", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7c7c4db4da3af707f852f061b6e998712a9ed601"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d475215a7b316fdc0744be752754b590bac22959", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d475215a7b316fdc0744be752754b590bac22959", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d475215a7b316fdc0744be752754b590bac22959", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d475215a7b316fdc0744be752754b590bac22959/comments", "author": null, "committer": null, "parents": [{"sha": "fa2eec9a67a5134065176babcaddf3867fe47920", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa2eec9a67a5134065176babcaddf3867fe47920", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa2eec9a67a5134065176babcaddf3867fe47920"}], "stats": {"total": 254, "additions": 168, "deletions": 86}, "files": [{"sha": "8702928d59091c77f427053ea479313f73d5b7bb", "filename": "fastjar/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d475215a7b316fdc0744be752754b590bac22959/fastjar%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d475215a7b316fdc0744be752754b590bac22959/fastjar%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FChangeLog?ref=d475215a7b316fdc0744be752754b590bac22959", "patch": "@@ -1,3 +1,8 @@\n+2001-06-28  Tom Tromey  <tromey@redhat.com>\n+\n+\t* configure: Rebuilt.\n+\t* configure.in: Accept --with-system-zlib.  Fixes PR java/3441.\n+\n 2001-05-15  Per Bothner  <per@bothner.com>\n \n         * Makefile.am (bin_PROGRAMS):  Renamed from \"fastjar\" to \"jar\"."}, {"sha": "29e06447542d0ae15c6023ab1d4088f79b0492c5", "filename": "fastjar/configure", "status": "modified", "additions": 144, "deletions": 82, "changes": 226, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d475215a7b316fdc0744be752754b590bac22959/fastjar%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d475215a7b316fdc0744be752754b590bac22959/fastjar%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fconfigure?ref=d475215a7b316fdc0744be752754b590bac22959", "patch": "@@ -11,6 +11,8 @@\n ac_help=\n ac_default_prefix=/usr/local\n # Any additions from configure.in:\n+ac_help=\"$ac_help\n+  --with-system-zlib      use installed libz\"\n \n # Initialize some variables set by options.\n # The variables have the same names as the options, with\n@@ -563,7 +565,7 @@ ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:567: checking for a BSD compatible install\" >&5\n+echo \"configure:569: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -616,7 +618,7 @@ test -z \"$INSTALL_SCRIPT\" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'\n test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n echo $ac_n \"checking whether build environment is sane\"\"... $ac_c\" 1>&6\n-echo \"configure:620: checking whether build environment is sane\" >&5\n+echo \"configure:622: checking whether build environment is sane\" >&5\n # Just in case\n sleep 1\n echo timestamp > conftestfile\n@@ -673,7 +675,7 @@ test \"$program_suffix\" != NONE &&\n test \"$program_transform_name\" = \"\" && program_transform_name=\"s,x,x,\"\n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:677: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:679: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -719,7 +721,7 @@ EOF\n \n missing_dir=`cd $ac_aux_dir && pwd`\n echo $ac_n \"checking for working aclocal\"\"... $ac_c\" 1>&6\n-echo \"configure:723: checking for working aclocal\" >&5\n+echo \"configure:725: checking for working aclocal\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -732,7 +734,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoconf\"\"... $ac_c\" 1>&6\n-echo \"configure:736: checking for working autoconf\" >&5\n+echo \"configure:738: checking for working autoconf\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -745,7 +747,7 @@ else\n fi\n \n echo $ac_n \"checking for working automake\"\"... $ac_c\" 1>&6\n-echo \"configure:749: checking for working automake\" >&5\n+echo \"configure:751: checking for working automake\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -758,7 +760,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoheader\"\"... $ac_c\" 1>&6\n-echo \"configure:762: checking for working autoheader\" >&5\n+echo \"configure:764: checking for working autoheader\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -771,7 +773,7 @@ else\n fi\n \n echo $ac_n \"checking for working makeinfo\"\"... $ac_c\" 1>&6\n-echo \"configure:775: checking for working makeinfo\" >&5\n+echo \"configure:777: checking for working makeinfo\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -791,7 +793,7 @@ fi\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:795: checking for $ac_word\" >&5\n+echo \"configure:797: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -821,7 +823,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:825: checking for $ac_word\" >&5\n+echo \"configure:827: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -872,7 +874,7 @@ fi\n       # Extract the first word of \"cl\", so it can be a program name with args.\n set dummy cl; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:876: checking for $ac_word\" >&5\n+echo \"configure:878: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -904,7 +906,7 @@ fi\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:908: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:910: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -915,12 +917,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 919 \"configure\"\n+#line 921 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:924: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:926: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -946,12 +948,12 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:950: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:952: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:955: checking whether we are using GNU C\" >&5\n+echo \"configure:957: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -960,7 +962,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:964: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:966: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -979,7 +981,7 @@ ac_test_CFLAGS=\"${CFLAGS+set}\"\n ac_save_CFLAGS=\"$CFLAGS\"\n CFLAGS=\n echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:983: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:985: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1022,7 +1024,7 @@ fi\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:1026: checking for a BSD compatible install\" >&5\n+echo \"configure:1028: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1077,7 +1079,7 @@ test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n # Extract the first word of \"rm\", so it can be a program name with args.\n set dummy rm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1081: checking for $ac_word\" >&5\n+echo \"configure:1083: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_RM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1113,7 +1115,7 @@ fi\n # Extract the first word of \"cp\", so it can be a program name with args.\n set dummy cp; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1117: checking for $ac_word\" >&5\n+echo \"configure:1119: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_CP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1149,7 +1151,7 @@ fi\n # Extract the first word of \"strip\", so it can be a program name with args.\n set dummy strip; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1153: checking for $ac_word\" >&5\n+echo \"configure:1155: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_STRIP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1185,7 +1187,7 @@ fi\n # Extract the first word of \"chmod\", so it can be a program name with args.\n set dummy chmod; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1189: checking for $ac_word\" >&5\n+echo \"configure:1191: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_CHMOD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1229,20 +1231,20 @@ for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr that defines DIR\"\"... $ac_c\" 1>&6\n-echo \"configure:1233: checking for $ac_hdr that defines DIR\" >&5\n+echo \"configure:1235: checking for $ac_hdr that defines DIR\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1238 \"configure\"\n+#line 1240 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <$ac_hdr>\n int main() {\n DIR *dirp = 0;\n ; return 0; }\n EOF\n-if { (eval echo configure:1246: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1248: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"ac_cv_header_dirent_$ac_safe=yes\"\n else\n@@ -1267,15 +1269,15 @@ done\n # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.\n if test $ac_header_dirent = dirent.h; then\n echo $ac_n \"checking for opendir in -ldir\"\"... $ac_c\" 1>&6\n-echo \"configure:1271: checking for opendir in -ldir\" >&5\n+echo \"configure:1273: checking for opendir in -ldir\" >&5\n ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldir  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1279 \"configure\"\n+#line 1281 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -1286,7 +1288,7 @@ int main() {\n opendir()\n ; return 0; }\n EOF\n-if { (eval echo configure:1290: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1292: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -1308,15 +1310,15 @@ fi\n \n else\n echo $ac_n \"checking for opendir in -lx\"\"... $ac_c\" 1>&6\n-echo \"configure:1312: checking for opendir in -lx\" >&5\n+echo \"configure:1314: checking for opendir in -lx\" >&5\n ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lx  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1320 \"configure\"\n+#line 1322 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -1327,7 +1329,7 @@ int main() {\n opendir()\n ; return 0; }\n EOF\n-if { (eval echo configure:1331: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1333: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -1350,7 +1352,7 @@ fi\n fi\n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:1354: checking how to run the C preprocessor\" >&5\n+echo \"configure:1356: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -1365,13 +1367,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 1369 \"configure\"\n+#line 1371 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1375: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1377: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1382,13 +1384,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1386 \"configure\"\n+#line 1388 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1392: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1394: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1399,13 +1401,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1403 \"configure\"\n+#line 1405 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1409: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1411: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1430,20 +1432,20 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:1434: checking for ANSI C header files\" >&5\n+echo \"configure:1436: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1439 \"configure\"\n+#line 1441 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1447: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1449: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1460,7 +1462,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1464 \"configure\"\n+#line 1466 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -1478,7 +1480,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1482 \"configure\"\n+#line 1484 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -1499,7 +1501,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1503 \"configure\"\n+#line 1505 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -1510,7 +1512,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:1514: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1516: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -1534,20 +1536,20 @@ EOF\n fi\n \n echo $ac_n \"checking whether struct tm is in sys/time.h or time.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1538: checking whether struct tm is in sys/time.h or time.h\" >&5\n+echo \"configure:1540: checking whether struct tm is in sys/time.h or time.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_struct_tm'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1543 \"configure\"\n+#line 1545 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <time.h>\n int main() {\n struct tm *tp; tp->tm_sec;\n ; return 0; }\n EOF\n-if { (eval echo configure:1551: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1553: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_struct_tm=time.h\n else\n@@ -1571,17 +1573,17 @@ for ac_hdr in fcntl.h unistd.h sys/param.h getopt.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:1575: checking for $ac_hdr\" >&5\n+echo \"configure:1577: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1580 \"configure\"\n+#line 1582 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1585: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1587: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1609,12 +1611,12 @@ done\n \n \n echo $ac_n \"checking for off_t\"\"... $ac_c\" 1>&6\n-echo \"configure:1613: checking for off_t\" >&5\n+echo \"configure:1615: checking for off_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_off_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1618 \"configure\"\n+#line 1620 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -1642,20 +1644,20 @@ EOF\n fi\n \n echo $ac_n \"checking whether struct tm is in sys/time.h or time.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1646: checking whether struct tm is in sys/time.h or time.h\" >&5\n+echo \"configure:1648: checking whether struct tm is in sys/time.h or time.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_struct_tm'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1651 \"configure\"\n+#line 1653 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <time.h>\n int main() {\n struct tm *tp; tp->tm_sec;\n ; return 0; }\n EOF\n-if { (eval echo configure:1659: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1661: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_struct_tm=time.h\n else\n@@ -1677,15 +1679,15 @@ fi\n \n \n echo $ac_n \"checking size of char\"\"... $ac_c\" 1>&6\n-echo \"configure:1681: checking size of char\" >&5\n+echo \"configure:1683: checking size of char\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_char'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n     { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1689 \"configure\"\n+#line 1691 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n main()\n@@ -1696,7 +1698,7 @@ main()\n   exit(0);\n }\n EOF\n-if { (eval echo configure:1700: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1702: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_sizeof_char=`cat conftestval`\n else\n@@ -1716,15 +1718,15 @@ EOF\n \n \n echo $ac_n \"checking size of short\"\"... $ac_c\" 1>&6\n-echo \"configure:1720: checking size of short\" >&5\n+echo \"configure:1722: checking size of short\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_short'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n     { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1728 \"configure\"\n+#line 1730 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n main()\n@@ -1735,7 +1737,7 @@ main()\n   exit(0);\n }\n EOF\n-if { (eval echo configure:1739: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1741: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_sizeof_short=`cat conftestval`\n else\n@@ -1755,15 +1757,15 @@ EOF\n \n \n echo $ac_n \"checking size of int\"\"... $ac_c\" 1>&6\n-echo \"configure:1759: checking size of int\" >&5\n+echo \"configure:1761: checking size of int\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_int'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n     { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1767 \"configure\"\n+#line 1769 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n main()\n@@ -1774,7 +1776,7 @@ main()\n   exit(0);\n }\n EOF\n-if { (eval echo configure:1778: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1780: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_sizeof_int=`cat conftestval`\n else\n@@ -1794,15 +1796,15 @@ EOF\n \n \n echo $ac_n \"checking size of long\"\"... $ac_c\" 1>&6\n-echo \"configure:1798: checking size of long\" >&5\n+echo \"configure:1800: checking size of long\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_long'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n     { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1806 \"configure\"\n+#line 1808 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n main()\n@@ -1813,7 +1815,7 @@ main()\n   exit(0);\n }\n EOF\n-if { (eval echo configure:1817: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1819: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_sizeof_long=`cat conftestval`\n else\n@@ -1833,15 +1835,15 @@ EOF\n \n \n echo $ac_n \"checking size of long long\"\"... $ac_c\" 1>&6\n-echo \"configure:1837: checking size of long long\" >&5\n+echo \"configure:1839: checking size of long long\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n     { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1845 \"configure\"\n+#line 1847 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n main()\n@@ -1852,7 +1854,7 @@ main()\n   exit(0);\n }\n EOF\n-if { (eval echo configure:1856: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1858: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_sizeof_long_long=`cat conftestval`\n else\n@@ -1873,14 +1875,14 @@ EOF\n \n \n echo $ac_n \"checking whether byte ordering is bigendian\"\"... $ac_c\" 1>&6\n-echo \"configure:1877: checking whether byte ordering is bigendian\" >&5\n+echo \"configure:1879: checking whether byte ordering is bigendian\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_bigendian'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_cv_c_bigendian=unknown\n # See if sys/param.h defines the BYTE_ORDER macro.\n cat > conftest.$ac_ext <<EOF\n-#line 1884 \"configure\"\n+#line 1886 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/param.h>\n@@ -1891,11 +1893,11 @@ int main() {\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:1895: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1897: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   # It does; now see whether it defined to BIG_ENDIAN or not.\n cat > conftest.$ac_ext <<EOF\n-#line 1899 \"configure\"\n+#line 1901 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/param.h>\n@@ -1906,7 +1908,7 @@ int main() {\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:1910: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1912: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_c_bigendian=yes\n else\n@@ -1926,7 +1928,7 @@ if test \"$cross_compiling\" = yes; then\n     { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1930 \"configure\"\n+#line 1932 \"configure\"\n #include \"confdefs.h\"\n main () {\n   /* Are we little or big endian?  From Harbison&Steele.  */\n@@ -1939,7 +1941,7 @@ main () {\n   exit (u.c[sizeof (long) - 1] == 1);\n }\n EOF\n-if { (eval echo configure:1943: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1945: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_bigendian=no\n else\n@@ -1963,9 +1965,69 @@ EOF\n fi\n \n \n-ZDEPS='$(top_builddir)/../zlib/libz.a'\n-ZLIBS=\"$ZDEPS -L\\$(here)/../zlib/$libsubdir\"\n-ZINCS='-I$(top_srcdir)/../zlib'\n+# Check whether --with-system-zlib or --without-system-zlib was given.\n+if test \"${with_system_zlib+set}\" = set; then\n+  withval=\"$with_system_zlib\"\n+  :\n+fi\n+\n+\n+ZLIBS=\n+ZDEPS=\n+ZINCS=\n+use_zlib=maybe\n+if test \"$with_system_zlib\" = yes; then\n+   echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n+echo \"configure:1982: checking for deflate in -lz\" >&5\n+ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n+if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  ac_save_LIBS=\"$LIBS\"\n+LIBS=\"-lz  $LIBS\"\n+cat > conftest.$ac_ext <<EOF\n+#line 1990 \"configure\"\n+#include \"confdefs.h\"\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+/* We use char because int might match the return type of a gcc2\n+    builtin and then its argument prototype would still apply.  */\n+char deflate();\n+\n+int main() {\n+deflate()\n+; return 0; }\n+EOF\n+if { (eval echo configure:2001: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=yes\"\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=no\"\n+fi\n+rm -f conftest*\n+LIBS=\"$ac_save_LIBS\"\n+\n+fi\n+if eval \"test \\\"`echo '$ac_cv_lib_'$ac_lib_var`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+  ZLIBS=-lz\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+use_zlib=no\n+fi\n+\n+else\n+   use_zlib=no\n+fi\n+\n+if test \"$use_zlib\" = no; then\n+   # Brain dead way to find tree's zlib.\n+   ZDEPS='$(top_builddir)/../zlib/libz.a'\n+   ZLIBS=\"$ZDEPS -L\\$(here)/../zlib/$libsubdir\"\n+   ZINCS='-I$(top_srcdir)/../zlib'\n+fi\n \n \n "}, {"sha": "c240be82cb94ff75149cf44ca28f55f88156ade3", "filename": "fastjar/configure.in", "status": "modified", "additions": 19, "deletions": 4, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d475215a7b316fdc0744be752754b590bac22959/fastjar%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d475215a7b316fdc0744be752754b590bac22959/fastjar%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fconfigure.in?ref=d475215a7b316fdc0744be752754b590bac22959", "patch": "@@ -37,10 +37,25 @@ AC_CHECK_SIZEOF(long long)\n dnl Check byte order\n AC_C_BIGENDIAN\n \n-dnl Brain dead check for tree's zlib\n-ZDEPS='$(top_builddir)/../zlib/libz.a'\n-ZLIBS=\"$ZDEPS -L\\$(here)/../zlib/$libsubdir\"\n-ZINCS='-I$(top_srcdir)/../zlib'\n+AC_ARG_WITH(system-zlib,\n+[  --with-system-zlib      use installed libz])\n+\n+ZLIBS=\n+ZDEPS=\n+ZINCS=\n+use_zlib=maybe\n+if test \"$with_system_zlib\" = yes; then\n+   AC_CHECK_LIB(z, deflate, ZLIBS=-lz, use_zlib=no)\n+else\n+   use_zlib=no\n+fi\n+\n+if test \"$use_zlib\" = no; then\n+   # Brain dead way to find tree's zlib.\n+   ZDEPS='$(top_builddir)/../zlib/libz.a'\n+   ZLIBS=\"$ZDEPS -L\\$(here)/../zlib/$libsubdir\"\n+   ZINCS='-I$(top_srcdir)/../zlib'\n+fi\n AC_SUBST(ZLIBS)\n AC_SUBST(ZDEPS)\n AC_SUBST(ZINCS)"}]}