{"sha": "08e10724741986bf04c717ca29a302f2e108f3ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDhlMTA3MjQ3NDE5ODZiZjA0YzcxN2NhMjlhMzAyZjJlMTA4ZjNhZA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-11-27T23:46:38Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-11-27T23:46:38Z"}, "message": "compiler: tweaks for importing inline function bodies\n    \n    Track whether we've seen an error when importing a function; we will\n    use error tracking to avoid knock-on errors.\n    \n    Stop importing identifiers at a ')'.\n    \n    Provide a way to adjust the indentation level while importing.\n    \n    Reviewed-on: https://go-review.googlesource.com/c/150072\n\nFrom-SVN: r266536", "tree": {"sha": "0a26b4e1afe7680dfa115adbb2dc8bc14ba364ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0a26b4e1afe7680dfa115adbb2dc8bc14ba364ef"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08e10724741986bf04c717ca29a302f2e108f3ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08e10724741986bf04c717ca29a302f2e108f3ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08e10724741986bf04c717ca29a302f2e108f3ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08e10724741986bf04c717ca29a302f2e108f3ad/comments", "author": null, "committer": null, "parents": [{"sha": "c718ff4183656cfd36b63ac7afbdf2a7fd78eec6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c718ff4183656cfd36b63ac7afbdf2a7fd78eec6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c718ff4183656cfd36b63ac7afbdf2a7fd78eec6"}], "stats": {"total": 28, "additions": 24, "deletions": 4}, "files": [{"sha": "8e220f50bf6e4744ea271588b5bfa383f178d66a", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08e10724741986bf04c717ca29a302f2e108f3ad/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08e10724741986bf04c717ca29a302f2e108f3ad/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=08e10724741986bf04c717ca29a302f2e108f3ad", "patch": "@@ -1,4 +1,4 @@\n-267d91b41571329e71a88f56df46444b305482da\n+b013405f2c66596c47cb9be493c798db1087c0f0\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "d783043ec04514e244a34537f2e2a23861129a97", "filename": "gcc/go/gofrontend/import.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08e10724741986bf04c717ca29a302f2e108f3ad/gcc%2Fgo%2Fgofrontend%2Fimport.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08e10724741986bf04c717ca29a302f2e108f3ad/gcc%2Fgo%2Fgofrontend%2Fimport.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fimport.cc?ref=08e10724741986bf04c717ca29a302f2e108f3ad", "patch": "@@ -1225,7 +1225,7 @@ Import::read_identifier()\n   while (true)\n     {\n       c = stream->peek_char();\n-      if (c == -1 || c == ' ' || c == '\\n' || c == ';')\n+      if (c == -1 || c == ' ' || c == '\\n' || c == ';' || c == ')')\n \tbreak;\n       ret += c;\n       stream->advance(1);\n@@ -1450,7 +1450,7 @@ Import_function_body::read_identifier()\n   for (size_t i = start; i < this->body_.length(); i++)\n     {\n       int c = static_cast<unsigned char>(this->body_[i]);\n-      if (c == ' ' || c == '\\n' || c == ';')\n+      if (c == ' ' || c == '\\n' || c == ';' || c == ')')\n \t{\n \t  this->off_ = i;\n \t  return this->body_.substr(start, i - start);"}, {"sha": "c46a37e0ce96278136a38231fe79f22718200041", "filename": "gcc/go/gofrontend/import.h", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08e10724741986bf04c717ca29a302f2e108f3ad/gcc%2Fgo%2Fgofrontend%2Fimport.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08e10724741986bf04c717ca29a302f2e108f3ad/gcc%2Fgo%2Fgofrontend%2Fimport.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fimport.h?ref=08e10724741986bf04c717ca29a302f2e108f3ad", "patch": "@@ -554,7 +554,7 @@ class Import_function_body : public Import_expression\n \t\t       const std::string& body, size_t off, Block* block,\n \t\t       int indent)\n     : gogo_(gogo), imp_(imp), named_object_(named_object), body_(body),\n-      off_(off), block_(block), indent_(indent)\n+      off_(off), block_(block), indent_(indent), saw_error_(false)\n   { }\n \n   // The IR.\n@@ -597,6 +597,16 @@ class Import_function_body : public Import_expression\n   indent() const\n   { return this->indent_; }\n \n+  // Increment the indentation level.\n+  void\n+  increment_indent()\n+  { ++this->indent_; }\n+\n+  // Decrement the indentation level.\n+  void\n+  decrement_indent()\n+  { --this->indent_; }\n+\n   // The name of the function we are parsing.\n   const std::string&\n   name() const;\n@@ -652,6 +662,16 @@ class Import_function_body : public Import_expression\n   ifb()\n   { return this; }\n \n+  // Return whether we have seen an error.\n+  bool\n+  saw_error() const\n+  { return this->saw_error_; }\n+\n+  // Record that we have seen an error.\n+  void\n+  set_saw_error()\n+  { this->saw_error_ = true; }\n+\n  private:\n   // The IR.\n   Gogo* gogo_;"}]}