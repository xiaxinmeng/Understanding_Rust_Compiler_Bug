{"sha": "5bfaaedad796941281dc9e736c7f638c3f9f5690", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWJmYWFlZGFkNzk2OTQxMjgxZGM5ZTczNmM3ZjYzOGMzZjlmNTY5MA==", "commit": {"author": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1996-03-13T05:47:30Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1996-03-13T05:47:30Z"}, "message": "dbxout.c (dbxout_type): Better \"variant\" handling to ignore const/volatile but not typedef names.\n\n* dbxout.c (dbxout_type):  Better \"variant\" handling to ignore\nconst/volatile but not typedef names.  Improves Feb 12 change.\n\nFrom-SVN: r11523", "tree": {"sha": "5a0b9f708289b40bd8c97bced4be5f1c4efbf7d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a0b9f708289b40bd8c97bced4be5f1c4efbf7d7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5bfaaedad796941281dc9e736c7f638c3f9f5690", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bfaaedad796941281dc9e736c7f638c3f9f5690", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bfaaedad796941281dc9e736c7f638c3f9f5690", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bfaaedad796941281dc9e736c7f638c3f9f5690/comments", "author": null, "committer": null, "parents": [{"sha": "d3debd4b78725b7a602150092fdc5ef5895edd9a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3debd4b78725b7a602150092fdc5ef5895edd9a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3debd4b78725b7a602150092fdc5ef5895edd9a"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "39c61ea0c4c3292b4e691961f1d27961c0e78200", "filename": "gcc/dbxout.c", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bfaaedad796941281dc9e736c7f638c3f9f5690/gcc%2Fdbxout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bfaaedad796941281dc9e736c7f638c3f9f5690/gcc%2Fdbxout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdbxout.c?ref=5bfaaedad796941281dc9e736c7f638c3f9f5690", "patch": "@@ -1057,10 +1057,20 @@ dbxout_type (type, full, show_arg_types)\n      by assuming `int'.  */\n   if (type == error_mark_node)\n     type = integer_type_node;\n-  else if (!(TYPE_NAME (type) && TREE_CODE (TYPE_NAME (type)) == TYPE_DECL\n-\t     && DECL_ORIGINAL_TYPE (TYPE_NAME (type))))\n+  else\n     {\n-      type = TYPE_MAIN_VARIANT (type);\n+      /* Try to find the \"main variant\" with the same name but not const\n+\t or volatile.  (Since stabs does not distinguish const and volatile,\n+\t there is no need to make them separate types.  But types with\n+\t different names are usefully distinguished.) */\n+\t \n+      for (tem = TYPE_MAIN_VARIANT (type); tem; tem = TYPE_NEXT_VARIANT (tem))\n+\tif (!TYPE_READONLY (tem) && !TYPE_VOLATILE (tem)\n+\t    && TYPE_NAME (tem) == TYPE_NAME (type))\n+\t  {\n+\t    type = tem;\n+\t    break;\n+\t  }\n       if (TYPE_NAME (type)\n \t  && TREE_CODE (TYPE_NAME (type)) == TYPE_DECL\n \t  && TYPE_DECL_SUPPRESS_DEBUG (TYPE_NAME (type)))"}]}