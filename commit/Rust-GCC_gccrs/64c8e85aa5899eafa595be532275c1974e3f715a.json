{"sha": "64c8e85aa5899eafa595be532275c1974e3f715a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjRjOGU4NWFhNTg5OWVhZmE1OTViZTUzMjI3NWMxOTc0ZTNmNzE1YQ==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel@linux.ibm.com", "date": "2019-02-05T17:14:11Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2019-02-05T17:14:11Z"}, "message": "S/390: Remove load and test fp splitter\n\ngcc/ChangeLog:\n\n2019-02-05  Andreas Krebbel  <krebbel@linux.ibm.com>\n\n\tPR target/88856\n\t* config/s390/s390.md: Remove load and test FP splitter.\n\nFrom-SVN: r268550", "tree": {"sha": "41eaaff352e8216e53826ddae73c288477d817d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/41eaaff352e8216e53826ddae73c288477d817d5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/64c8e85aa5899eafa595be532275c1974e3f715a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64c8e85aa5899eafa595be532275c1974e3f715a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64c8e85aa5899eafa595be532275c1974e3f715a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64c8e85aa5899eafa595be532275c1974e3f715a/comments", "author": {"login": "Andreas-Krebbel", "id": 38103320, "node_id": "MDQ6VXNlcjM4MTAzMzIw", "avatar_url": "https://avatars.githubusercontent.com/u/38103320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Andreas-Krebbel", "html_url": "https://github.com/Andreas-Krebbel", "followers_url": "https://api.github.com/users/Andreas-Krebbel/followers", "following_url": "https://api.github.com/users/Andreas-Krebbel/following{/other_user}", "gists_url": "https://api.github.com/users/Andreas-Krebbel/gists{/gist_id}", "starred_url": "https://api.github.com/users/Andreas-Krebbel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Andreas-Krebbel/subscriptions", "organizations_url": "https://api.github.com/users/Andreas-Krebbel/orgs", "repos_url": "https://api.github.com/users/Andreas-Krebbel/repos", "events_url": "https://api.github.com/users/Andreas-Krebbel/events{/privacy}", "received_events_url": "https://api.github.com/users/Andreas-Krebbel/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "faaeebd64671ebe0aabf203527bb7bf57476f4f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/faaeebd64671ebe0aabf203527bb7bf57476f4f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/faaeebd64671ebe0aabf203527bb7bf57476f4f3"}], "stats": {"total": 26, "additions": 8, "deletions": 18}, "files": [{"sha": "137066a52f6bd1054785585cd145176f86301f7f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64c8e85aa5899eafa595be532275c1974e3f715a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64c8e85aa5899eafa595be532275c1974e3f715a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=64c8e85aa5899eafa595be532275c1974e3f715a", "patch": "@@ -1,3 +1,8 @@\n+2019-02-05  Andreas Krebbel  <krebbel@linux.ibm.com>\n+\n+\tPR target/88856\n+\t* config/s390/s390.md: Remove load and test FP splitter.\n+\n 2019-02-05  Aaron Sawdey  <acsawdey@linux.ibm.com>\n \n \tPR target/89112"}, {"sha": "903367201f445aa39fc04c2345a33e00190410ee", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 3, "deletions": 18, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64c8e85aa5899eafa595be532275c1974e3f715a/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64c8e85aa5899eafa595be532275c1974e3f715a/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=64c8e85aa5899eafa595be532275c1974e3f715a", "patch": "@@ -1357,10 +1357,11 @@\n ; (TF|DF|SF|TD|DD|SD) instructions\n \n \n-; load and test instructions turn SNaN into QNaN what is not\n+; FIXME: load and test instructions turn SNaN into QNaN what is not\n ; acceptable if the target will be used afterwards.  On the other hand\n ; they are quite convenient for implementing comparisons with 0.0. So\n-; try to enable them via splitter if the value isn't needed anymore.\n+; try to enable them via splitter/peephole if the value isn't needed anymore.\n+; See testcases: load-and-test-fp-1.c and load-and-test-fp-2.c\n \n ; ltxbr, ltdbr, ltebr, ltxtr, ltdtr\n (define_insn \"*cmp<mode>_ccs_0\"\n@@ -1373,22 +1374,6 @@\n    [(set_attr \"op_type\" \"RRE\")\n     (set_attr \"type\"  \"fsimp<mode>\")])\n \n-(define_split\n-  [(set (match_operand 0 \"cc_reg_operand\")\n-\t(compare (match_operand:FP 1 \"register_operand\")\n-\t\t (match_operand:FP 2 \"const0_operand\")))]\n-  \"TARGET_HARD_FLOAT && REG_P (operands[1]) && dead_or_set_p (insn, operands[1])\"\n-  [(parallel\n-    [(set (match_dup 0) (match_dup 3))\n-     (clobber (match_dup 1))])]\n- {\n-   /* s390_match_ccmode requires the compare to have the same CC mode\n-      as the CC destination register.  */\n-   operands[3] = gen_rtx_COMPARE (GET_MODE (operands[0]),\n-\t\t\t\t  operands[1], operands[2]);\n- })\n-\n-\n ; VX: TFmode in FPR pairs: use cxbr instead of wfcxb\n ; cxtr, cdtr, cxbr, cdbr, cebr, cdb, ceb, wfcsb, wfcdb\n (define_insn \"*cmp<mode>_ccs\""}]}