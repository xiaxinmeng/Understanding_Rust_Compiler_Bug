{"sha": "01496707301d09bfb32d03e7cbabef0d7ee032d7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDE0OTY3MDczMDFkMDliZmIzMmQwM2U3Y2JhYmVmMGQ3ZWUwMzJkNw==", "commit": {"author": {"name": "Alexander Monakov", "email": "amonakov@ispras.ru", "date": "2018-04-12T15:40:44Z"}, "committer": {"name": "Alexander Monakov", "email": "amonakov@gcc.gnu.org", "date": "2018-04-12T15:40:44Z"}, "message": "sel-sched: move cleanup_cfg before calculate_dominance_info (PR 85354)\n\n\tPR rtl-optimization/85354\n\t* sel-sched-ir.c (sel_init_pipelining): Move cfg_cleanup call...\n\t* sel-sched.c (sel_global_init): ... here.\n\nFrom-SVN: r259348", "tree": {"sha": "ee77419c27cac68192e811e730bb2a113f8e4350", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ee77419c27cac68192e811e730bb2a113f8e4350"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/01496707301d09bfb32d03e7cbabef0d7ee032d7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01496707301d09bfb32d03e7cbabef0d7ee032d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01496707301d09bfb32d03e7cbabef0d7ee032d7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01496707301d09bfb32d03e7cbabef0d7ee032d7/comments", "author": {"login": "amonakov", "id": 1997391, "node_id": "MDQ6VXNlcjE5OTczOTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1997391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amonakov", "html_url": "https://github.com/amonakov", "followers_url": "https://api.github.com/users/amonakov/followers", "following_url": "https://api.github.com/users/amonakov/following{/other_user}", "gists_url": "https://api.github.com/users/amonakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/amonakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amonakov/subscriptions", "organizations_url": "https://api.github.com/users/amonakov/orgs", "repos_url": "https://api.github.com/users/amonakov/repos", "events_url": "https://api.github.com/users/amonakov/events{/privacy}", "received_events_url": "https://api.github.com/users/amonakov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "dc0e0c6b2e70e9d2b3bbf02664b3f5a670c5c2be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc0e0c6b2e70e9d2b3bbf02664b3f5a670c5c2be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc0e0c6b2e70e9d2b3bbf02664b3f5a670c5c2be"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "0839ab2922685d6888cd48248701bb823de4d3f8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01496707301d09bfb32d03e7cbabef0d7ee032d7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01496707301d09bfb32d03e7cbabef0d7ee032d7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=01496707301d09bfb32d03e7cbabef0d7ee032d7", "patch": "@@ -1,3 +1,9 @@\n+2018-04-12  Alexander Monakov  <amonakov@ispras.ru>\n+\n+\tPR rtl-optimization/85354\n+\t* sel-sched-ir.c (sel_init_pipelining): Move cfg_cleanup call...\n+\t* sel-sched.c (sel_global_init): ... here.\n+\n 2018-04-12  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR target/85238"}, {"sha": "ee970522890423a7a1bb81a4a03553d9f007252e", "filename": "gcc/sel-sched-ir.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01496707301d09bfb32d03e7cbabef0d7ee032d7/gcc%2Fsel-sched-ir.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01496707301d09bfb32d03e7cbabef0d7ee032d7/gcc%2Fsel-sched-ir.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsel-sched-ir.c?ref=01496707301d09bfb32d03e7cbabef0d7ee032d7", "patch": "@@ -30,7 +30,6 @@ along with GCC; see the file COPYING3.  If not see\n #include \"cfgrtl.h\"\n #include \"cfganal.h\"\n #include \"cfgbuild.h\"\n-#include \"cfgcleanup.h\"\n #include \"insn-config.h\"\n #include \"insn-attr.h\"\n #include \"recog.h\"\n@@ -6122,9 +6121,6 @@ make_regions_from_loop_nest (struct loop *loop)\n void\n sel_init_pipelining (void)\n {\n-  /* Remove empty blocks: their presence can break assumptions elsewhere,\n-     e.g. the logic to invoke update_liveness_on_insn in sel_region_init.  */\n-  cleanup_cfg (0);\n   /* Collect loop information to be used in outer loops pipelining.  */\n   loop_optimizer_init (LOOPS_HAVE_PREHEADERS\n                        | LOOPS_HAVE_FALLTHRU_PREHEADERS"}, {"sha": "59762964c6e6355d13075e2366bc62e135a33de0", "filename": "gcc/sel-sched.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01496707301d09bfb32d03e7cbabef0d7ee032d7/gcc%2Fsel-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01496707301d09bfb32d03e7cbabef0d7ee032d7/gcc%2Fsel-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsel-sched.c?ref=01496707301d09bfb32d03e7cbabef0d7ee032d7", "patch": "@@ -28,6 +28,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"tm_p.h\"\n #include \"regs.h\"\n #include \"cfgbuild.h\"\n+#include \"cfgcleanup.h\"\n #include \"insn-config.h\"\n #include \"insn-attr.h\"\n #include \"params.h\"\n@@ -7661,6 +7662,10 @@ sel_sched_region (int rgn)\n static void\n sel_global_init (void)\n {\n+  /* Remove empty blocks: their presence can break assumptions elsewhere,\n+     e.g. the logic to invoke update_liveness_on_insn in sel_region_init.  */\n+  cleanup_cfg (0);\n+\n   calculate_dominance_info (CDI_DOMINATORS);\n   alloc_sched_pools ();\n "}]}