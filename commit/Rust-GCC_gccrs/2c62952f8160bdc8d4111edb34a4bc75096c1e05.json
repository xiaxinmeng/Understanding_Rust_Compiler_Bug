{"sha": "2c62952f8160bdc8d4111edb34a4bc75096c1e05", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM2Mjk1MmY4MTYwYmRjOGQ0MTExZWRiMzRhNGJjNzUwOTZjMWUwNQ==", "commit": {"author": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2020-09-17T16:17:52Z"}, "committer": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2020-09-21T12:09:17Z"}, "message": "aarch64: Do not alter value on a force_reg returned rtx expanding __jcvt\n\n2020-09-17  Andrea Corallo  <andrea.corallo@arm.com>\n\n\t* config/aarch64/aarch64-builtins.c\n\t(aarch64_general_expand_builtin): Use expand machinery not to\n\talter the value of an rtx returned by force_reg.", "tree": {"sha": "5963266b8e34003d7ae23bbb2ccc2a0818686c85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5963266b8e34003d7ae23bbb2ccc2a0818686c85"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c62952f8160bdc8d4111edb34a4bc75096c1e05", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c62952f8160bdc8d4111edb34a4bc75096c1e05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c62952f8160bdc8d4111edb34a4bc75096c1e05", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c62952f8160bdc8d4111edb34a4bc75096c1e05/comments", "author": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0df746afc50a47d1eb53a401e017c4373cf05641", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0df746afc50a47d1eb53a401e017c4373cf05641", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0df746afc50a47d1eb53a401e017c4373cf05641"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "1cfb5c07d705057fe54739430abb2bba1307eadc", "filename": "gcc/config/aarch64/aarch64-builtins.c", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c62952f8160bdc8d4111edb34a4bc75096c1e05/gcc%2Fconfig%2Faarch64%2Faarch64-builtins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c62952f8160bdc8d4111edb34a4bc75096c1e05/gcc%2Fconfig%2Faarch64%2Faarch64-builtins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-builtins.c?ref=2c62952f8160bdc8d4111edb34a4bc75096c1e05", "patch": "@@ -2140,14 +2140,14 @@ aarch64_general_expand_builtin (unsigned int fcode, tree exp, rtx target,\n       return target;\n \n     case AARCH64_JSCVT:\n-      arg0 = CALL_EXPR_ARG (exp, 0);\n-      op0 = force_reg (DFmode, expand_normal (arg0));\n-      if (!target)\n-\ttarget = gen_reg_rtx (SImode);\n-      else\n-\ttarget = force_reg (SImode, target);\n-      emit_insn (GEN_FCN (CODE_FOR_aarch64_fjcvtzs) (target, op0));\n-      return target;\n+      {\n+\texpand_operand ops[2];\n+\tcreate_output_operand (&ops[0], target, SImode);\n+\top0 = expand_normal (CALL_EXPR_ARG (exp, 0));\n+\tcreate_input_operand (&ops[1], op0, DFmode);\n+\texpand_insn (CODE_FOR_aarch64_fjcvtzs, 2, ops);\n+\treturn ops[0].value;\n+      }\n \n     case AARCH64_SIMD_BUILTIN_FCMLA_LANEQ0_V2SF:\n     case AARCH64_SIMD_BUILTIN_FCMLA_LANEQ90_V2SF:"}]}