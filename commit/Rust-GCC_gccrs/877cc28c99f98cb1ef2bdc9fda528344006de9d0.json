{"sha": "877cc28c99f98cb1ef2bdc9fda528344006de9d0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODc3Y2MyOGM5OWY5OGNiMWVmMmJkYzlmZGE1MjgzNDQwMDZkZTlkMA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2007-01-24T14:13:28Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2007-01-24T14:13:28Z"}, "message": "re PR testsuite/30181 (FAIL: gcc.dg/builtins-57.c scan-tree-dump trunc)\n\n2007-01-24  Richard Guenther  <rguenther@suse.de>\n\n        PR testsuite/30181\n\t* gcc.dg/builtins-57.c: Change to a link-time testcase\n        to support non-C99 targets.\n\nFrom-SVN: r121115", "tree": {"sha": "d74175b61f1f24370f73c4e592be00e56e380347", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d74175b61f1f24370f73c4e592be00e56e380347"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/877cc28c99f98cb1ef2bdc9fda528344006de9d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/877cc28c99f98cb1ef2bdc9fda528344006de9d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/877cc28c99f98cb1ef2bdc9fda528344006de9d0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/877cc28c99f98cb1ef2bdc9fda528344006de9d0/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9d972b2dd319f761fe3beb4cdbcde0e1412da49e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d972b2dd319f761fe3beb4cdbcde0e1412da49e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d972b2dd319f761fe3beb4cdbcde0e1412da49e"}], "stats": {"total": 35, "additions": 25, "deletions": 10}, "files": [{"sha": "899705c0cb9e13a0c0ea857dda177081f76f937a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/877cc28c99f98cb1ef2bdc9fda528344006de9d0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/877cc28c99f98cb1ef2bdc9fda528344006de9d0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=877cc28c99f98cb1ef2bdc9fda528344006de9d0", "patch": "@@ -1,3 +1,9 @@\n+2007-01-24  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR testsuite/30181\n+\t* gcc.dg/builtins-57.c: Change to a link-time testcase\n+\tto support non-C99 targets.\n+\n 2007-01-24  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc.dg/tree-ssa/pr23382.c: Avoid DCE from eliminating dead variable."}, {"sha": "361826cb00a5b82853659f190bf3624b01e322e6", "filename": "gcc/testsuite/gcc.dg/builtins-57.c", "status": "modified", "additions": 19, "deletions": 10, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/877cc28c99f98cb1ef2bdc9fda528344006de9d0/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-57.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/877cc28c99f98cb1ef2bdc9fda528344006de9d0/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-57.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-57.c?ref=877cc28c99f98cb1ef2bdc9fda528344006de9d0", "patch": "@@ -1,16 +1,25 @@\n-/* { dg-do compile } */\n-/* { dg-options \"-fdump-tree-gimple\" } */\n+/* { dg-do link } */\n+/* { dg-options \"-std=c99 -ffinite-math-only\" } */\n \n-double foo (double x)\n+#include \"builtins-config.h\"\n+\n+extern void link_error (void);\n+\n+extern double floor (double);\n+extern double trunc (double);\n+extern double fabs (double);\n+\n+void test (double x)\n {\n-  return __builtin_floor (__builtin_fabs (x));\n+#ifdef HAVE_C99_RUNTIME\n+  if (floor (fabs (x)) != trunc (fabs (x)))\n+    link_error ();\n+#endif\n+  if (__builtin_lfloor (fabs (x)) != (long)fabs (x))\n+    link_error ();\n }\n \n-long bar (double x)\n+int main (void)\n {\n-  return __builtin_lfloor (__builtin_fabs (x));\n+  return 0;\n }\n-\n-/* { dg-final { scan-tree-dump-not \"lfloor\" \"gimple\" } } */\n-/* { dg-final { scan-tree-dump \"trunc\" \"gimple\" } } */\n-/* { dg-final { cleanup-tree-dump \"gimple\" } } */"}]}