{"sha": "bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmQzZmJjNmI3MmNmYzUxYWE3NzExZmE4NzMwZjQxZmExMzJlZjQ5ZA==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2003-04-16T22:42:07Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2003-04-16T22:42:07Z"}, "message": "configure.in (funcs, [...]): Add snprintf and vsnprintf.\n\n\t* configure.in (funcs, AC_CHECK_FUNCS): Add snprintf and\n\tvsnprintf.\n\t* snprintf.c, vsnprintf.c: New files.\n\t* Makefile.in (CFILES): Add snprintf.c and vsnprintf.c.\n\t(CONFIGURED_OFILES): Add snprintf.o and vsnprintf.o.\n\tRegenerate dependencies.\n\n\t* functions.texi, configure, config.in: Regenerated.\n\nFrom-SVN: r65704", "tree": {"sha": "a91d9da975d02c016d6460be9efcd61e15f9b104", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a91d9da975d02c016d6460be9efcd61e15f9b104"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/comments", "author": null, "committer": null, "parents": [{"sha": "a9ecacf6c44316e20d54c36f84ae80dedfff09e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9ecacf6c44316e20d54c36f84ae80dedfff09e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9ecacf6c44316e20d54c36f84ae80dedfff09e6"}], "stats": {"total": 435, "additions": 349, "deletions": 86}, "files": [{"sha": "027fe91c0f1d25d88b76451b85e4ba8875695104", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "patch": "@@ -1,3 +1,14 @@\n+2003-04-16  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* configure.in (funcs, AC_CHECK_FUNCS): Add snprintf and\n+\tvsnprintf.\n+\t* snprintf.c, vsnprintf.c: New files.\n+\t* Makefile.in (CFILES): Add snprintf.c and vsnprintf.c.\n+\t(CONFIGURED_OFILES): Add snprintf.o and vsnprintf.o.\n+\tRegenerate dependencies.\n+\n+\t* functions.texi, configure, config.in: Regenerated.\n+\n 2003-04-15  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* mempcpy.c, stpcpy.c, stpncpy.c: New files."}, {"sha": "d73ab2fef77515148c172d09ab3676bd0933dedb", "filename": "libiberty/Makefile.in", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FMakefile.in?ref=bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "patch": "@@ -147,12 +147,12 @@ CFILES = alloca.c argv.c asprintf.c atexit.c\t\t\t\t\\\n \t pex-unix.c pex-win32.c\t\t\t\t\t\t\\\n          physmem.c putenv.c\t\t\t\t\t\t\\\n \trandom.c regex.c rename.c rindex.c\t\t\t\t\\\n-\tsafe-ctype.c setenv.c sigsetmask.c sort.c spaces.c\t\t\\\n+\tsafe-ctype.c setenv.c sigsetmask.c snprintf.c sort.c spaces.c\t\\\n \t splay-tree.c stpcpy.c stpncpy.c strcasecmp.c strchr.c strdup.c\t\\\n \t strerror.c strncasecmp.c strncmp.c strrchr.c strsignal.c\t\\\n \t strstr.c strtod.c strtol.c strtoul.c\t\t\t\t\\\n \tternary.c tmpnam.c\t\t\t\t\t\t\\\n-\tvasprintf.c vfork.c vfprintf.c vprintf.c vsprintf.c\t\t\\\n+\tvasprintf.c vfork.c vfprintf.c vprintf.c vsnprintf.c vsprintf.c\t\\\n \twaitpid.c\t\t\t\t\t\t\t\\\n \txatexit.c xexit.c xmalloc.c xmemdup.c xstrdup.c xstrerror.c\n \n@@ -191,11 +191,11 @@ CONFIGURED_OFILES = asprintf.o atexit.o\t\t\t\t\t\\\n \t pex-unix.o pex-win32.o\t\t\t\t\t\t\\\n \t putenv.o\t\t\t\t\t\t\t\\\n \trandom.o rename.o rindex.o\t\t\t\t\t\\\n-\tsetenv.o sigsetmask.o stpcpy.o stpncpy.o strcasecmp.o strchr.o\t\\\n-\t strdup.o strncasecmp.o strncmp.o strrchr.o strstr.o strtod.o\t\\\n-\t strtol.o strtoul.o\t\t\t\t\t\t\\\n+\tsetenv.o sigsetmask.o snprintf.o stpcpy.o stpncpy.o strcasecmp.o \\\n+\t strchr.o strdup.o strncasecmp.o strncmp.o strrchr.o strstr.o\t\\\n+\t strtod.o strtol.o strtoul.o\t\t\t\t\t\\\n \ttmpnam.o\t\t\t\t\t\t\t\\\n-\tvasprintf.o vfork.o vfprintf.o vprintf.o vsprintf.o\t\t\\\n+\tvasprintf.o vfork.o vfprintf.o vprintf.o vsnprintf.o vsprintf.o\t\\\n \twaitpid.o\n \n # These files are installed if the library has been configured to do so.\n@@ -486,6 +486,7 @@ rename.o: config.h $(INCDIR)/ansidecl.h\n safe-ctype.o: $(INCDIR)/ansidecl.h $(INCDIR)/safe-ctype.h\n setenv.o: config.h $(INCDIR)/ansidecl.h\n sigsetmask.o: $(INCDIR)/ansidecl.h\n+snprintf.o: $(INCDIR)/ansidecl.h\n sort.o: config.h $(INCDIR)/ansidecl.h $(INCDIR)/libiberty.h \\\n \t$(INCDIR)/sort.h\n spaces.o: $(INCDIR)/ansidecl.h $(INCDIR)/libiberty.h\n@@ -510,6 +511,7 @@ vasprintf.o: config.h $(INCDIR)/ansidecl.h $(INCDIR)/libiberty.h\n vfork.o: $(INCDIR)/ansidecl.h\n vfprintf.o: $(INCDIR)/ansidecl.h\n vprintf.o: $(INCDIR)/ansidecl.h\n+vsnprintf.o: config.h $(INCDIR)/ansidecl.h $(INCDIR)/libiberty.h\n vsprintf.o: $(INCDIR)/ansidecl.h\n waitpid.o: config.h\n xatexit.o: $(INCDIR)/ansidecl.h $(INCDIR)/libiberty.h"}, {"sha": "1cc6d6132e514f0755d7b38d55444c9fd13e6dc2", "filename": "libiberty/config.in", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfig.in?ref=bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "patch": "@@ -150,6 +150,9 @@\n /* Define if you have the sigsetmask function.  */\n #undef HAVE_SIGSETMASK\n \n+/* Define if you have the snprintf function.  */\n+#undef HAVE_SNPRINTF\n+\n /* Define if you have the stpcpy function.  */\n #undef HAVE_STPCPY\n \n@@ -216,6 +219,9 @@\n /* Define if you have the vprintf function.  */\n #undef HAVE_VPRINTF\n \n+/* Define if you have the vsnprintf function.  */\n+#undef HAVE_VSNPRINTF\n+\n /* Define if you have the vsprintf function.  */\n #undef HAVE_VSPRINTF\n "}, {"sha": "f1ba0c85832ec405df280999081f3c8dc5d03361", "filename": "libiberty/configure", "status": "modified", "additions": 81, "deletions": 79, "changes": 160, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure?ref=bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "patch": "@@ -1716,6 +1716,7 @@ funcs=\"$funcs random\"\n funcs=\"$funcs rename\"\n funcs=\"$funcs rindex\"\n funcs=\"$funcs setenv\"\n+funcs=\"$funcs snprintf\"\n funcs=\"$funcs sigsetmask\"\n funcs=\"$funcs stpcpy\"\n funcs=\"$funcs stpncpy\"\n@@ -1732,6 +1733,7 @@ funcs=\"$funcs tmpnam\"\n funcs=\"$funcs vasprintf\"\n funcs=\"$funcs vfprintf\"\n funcs=\"$funcs vprintf\"\n+funcs=\"$funcs vsnprintf\"\n funcs=\"$funcs vsprintf\"\n funcs=\"$funcs waitpid\"\n \n@@ -1749,12 +1751,12 @@ if test \"x\" = \"y\"; then\n   for ac_func in asprintf atexit basename bcmp bcopy bsearch bzero calloc clock\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1753: checking for $ac_func\" >&5\n+echo \"configure:1755: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1758 \"configure\"\n+#line 1760 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1777,7 +1779,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1781: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1783: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1804,12 +1806,12 @@ done\n   for ac_func in getcwd getpagesize index insque mkstemps memchr memcmp memcpy\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1808: checking for $ac_func\" >&5\n+echo \"configure:1810: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1813 \"configure\"\n+#line 1815 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1832,7 +1834,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1836: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1838: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1859,12 +1861,12 @@ done\n   for ac_func in memmove mempcpy memset putenv random rename rindex sigsetmask\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1863: checking for $ac_func\" >&5\n+echo \"configure:1865: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1868 \"configure\"\n+#line 1870 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1887,7 +1889,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1891: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1893: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1914,12 +1916,12 @@ done\n   for ac_func in strcasecmp setenv stpcpy stpncpy strchr strdup strncasecmp strrchr strstr\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1918: checking for $ac_func\" >&5\n+echo \"configure:1920: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1923 \"configure\"\n+#line 1925 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1942,7 +1944,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1946: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1948: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1969,12 +1971,12 @@ done\n   for ac_func in strtod strtol strtoul tmpnam vasprintf vfprintf vprintf\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1973: checking for $ac_func\" >&5\n+echo \"configure:1975: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1978 \"configure\"\n+#line 1980 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1997,7 +1999,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2001: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2003: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2024,12 +2026,12 @@ done\n   for ac_func in vsprintf waitpid getrusage on_exit psignal strerror strsignal\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2028: checking for $ac_func\" >&5\n+echo \"configure:2030: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2033 \"configure\"\n+#line 2035 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2052,7 +2054,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2056: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2058: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2076,15 +2078,15 @@ else\n fi\n done\n \n-  for ac_func in sysconf times sbrk gettimeofday ffs\n+  for ac_func in sysconf times sbrk gettimeofday ffs snprintf vsnprintf\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2083: checking for $ac_func\" >&5\n+echo \"configure:2085: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2088 \"configure\"\n+#line 2090 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2107,7 +2109,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2111: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2113: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2134,12 +2136,12 @@ done\n   for ac_func in pstat_getstatic pstat_getdynamic sysmp getsysinfo table sysctl\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2138: checking for $ac_func\" >&5\n+echo \"configure:2140: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2143 \"configure\"\n+#line 2145 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2162,7 +2164,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2166: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2168: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2189,12 +2191,12 @@ done\n   for ac_func in realpath canonicalize_file_name\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2193: checking for $ac_func\" >&5\n+echo \"configure:2195: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2198 \"configure\"\n+#line 2200 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2217,7 +2219,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2221: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2223: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2451,7 +2453,7 @@ if test -z \"${setobjs}\"; then\n   # We haven't set the list of objects yet.  Use the standard autoconf\n   # tests.  This will only work if the compiler works.\n   echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:2455: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:2457: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -2462,12 +2464,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 2466 \"configure\"\n+#line 2468 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:2471: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2473: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -2493,19 +2495,19 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:2497: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:2499: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n   for ac_func in $funcs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2504: checking for $ac_func\" >&5\n+echo \"configure:2506: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2509 \"configure\"\n+#line 2511 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2528,7 +2530,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2532: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2534: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2555,12 +2557,12 @@ done\n \n \n   echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:2559: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:2561: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2564 \"configure\"\n+#line 2566 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -2585,12 +2587,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n   for ac_func in _getb67 GETB67 getb67; do\n     echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2589: checking for $ac_func\" >&5\n+echo \"configure:2591: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2594 \"configure\"\n+#line 2596 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2613,7 +2615,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2617: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2619: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2639,15 +2641,15 @@ fi\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:2643: checking stack direction for C alloca\" >&5\n+echo \"configure:2645: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2651 \"configure\"\n+#line 2653 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -2666,7 +2668,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:2670: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2672: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -2688,17 +2690,17 @@ EOF\n \n   ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2692: checking for vfork.h\" >&5\n+echo \"configure:2694: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2697 \"configure\"\n+#line 2699 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2702: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2704: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2723,18 +2725,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2727: checking for working vfork\" >&5\n+echo \"configure:2729: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2733: checking for vfork\" >&5\n+echo \"configure:2735: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2738 \"configure\"\n+#line 2740 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -2757,7 +2759,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2761: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2763: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -2779,7 +2781,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2783 \"configure\"\n+#line 2785 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -2874,7 +2876,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:2878: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2880: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -2906,12 +2908,12 @@ fi\n     for ac_func in _doprnt\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2910: checking for $ac_func\" >&5\n+echo \"configure:2912: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2915 \"configure\"\n+#line 2917 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2934,7 +2936,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2938: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2940: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2964,12 +2966,12 @@ done\n     for ac_func in _doprnt\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2968: checking for $ac_func\" >&5\n+echo \"configure:2970: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2973 \"configure\"\n+#line 2975 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2992,7 +2994,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2996: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2998: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3020,19 +3022,19 @@ done\n \n   for v in $vars; do\n     echo $ac_n \"checking for $v\"\"... $ac_c\" 1>&6\n-echo \"configure:3024: checking for $v\" >&5\n+echo \"configure:3026: checking for $v\" >&5\n     if eval \"test \\\"`echo '$''{'libiberty_cv_var_$v'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3029 \"configure\"\n+#line 3031 \"configure\"\n #include \"confdefs.h\"\n int *p;\n int main() {\n extern int $v []; p = $v;\n ; return 0; }\n EOF\n-if { (eval echo configure:3036: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3038: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"libiberty_cv_var_$v=yes\"\n else\n@@ -3058,12 +3060,12 @@ EOF\n   for ac_func in $checkfuncs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3062: checking for $ac_func\" >&5\n+echo \"configure:3064: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3067 \"configure\"\n+#line 3069 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3086,7 +3088,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3090: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3092: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3111,12 +3113,12 @@ fi\n done\n \n   echo $ac_n \"checking whether canonicalize_file_name must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:3115: checking whether canonicalize_file_name must be declared\" >&5\n+echo \"configure:3117: checking whether canonicalize_file_name must be declared\" >&5\n if eval \"test \\\"`echo '$''{'libiberty_cv_decl_needed_canonicalize_file_name'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3120 \"configure\"\n+#line 3122 \"configure\"\n #include \"confdefs.h\"\n \n #include \"confdefs.h\"\n@@ -3138,7 +3140,7 @@ int main() {\n char *(*pfn) = (char *(*)) canonicalize_file_name\n ; return 0; }\n EOF\n-if { (eval echo configure:3142: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3144: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libiberty_cv_decl_needed_canonicalize_file_name=no\n else\n@@ -3174,17 +3176,17 @@ for ac_hdr in unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:3178: checking for $ac_hdr\" >&5\n+echo \"configure:3180: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3183 \"configure\"\n+#line 3185 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:3188: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:3190: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -3213,12 +3215,12 @@ done\n for ac_func in getpagesize\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3217: checking for $ac_func\" >&5\n+echo \"configure:3219: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3222 \"configure\"\n+#line 3224 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3241,7 +3243,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3245: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3247: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3266,15 +3268,15 @@ fi\n done\n \n echo $ac_n \"checking for working mmap\"\"... $ac_c\" 1>&6\n-echo \"configure:3270: checking for working mmap\" >&5\n+echo \"configure:3272: checking for working mmap\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_mmap_fixed_mapped=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3278 \"configure\"\n+#line 3280 \"configure\"\n #include \"confdefs.h\"\n \n /* Thanks to Mike Haertel and Jim Avera for this test.\n@@ -3414,7 +3416,7 @@ main()\n }\n \n EOF\n-if { (eval echo configure:3418: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3420: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_mmap_fixed_mapped=yes\n else\n@@ -3438,15 +3440,15 @@ fi\n \n \n echo $ac_n \"checking for working strncmp\"\"... $ac_c\" 1>&6\n-echo \"configure:3442: checking for working strncmp\" >&5\n+echo \"configure:3444: checking for working strncmp\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_strncmp_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_strncmp_works=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3450 \"configure\"\n+#line 3452 \"configure\"\n #include \"confdefs.h\"\n \n /* Test by Jim Wilson and Kaveh Ghazi.\n@@ -3510,7 +3512,7 @@ main ()\n }\n \n EOF\n-if { (eval echo configure:3514: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3516: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_strncmp_works=yes\n else"}, {"sha": "e142cf501c8a68f72a945a41718a5357b93f9f58", "filename": "libiberty/configure.in", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure.in?ref=bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "patch": "@@ -185,6 +185,7 @@ funcs=\"$funcs random\"\n funcs=\"$funcs rename\"\n funcs=\"$funcs rindex\"\n funcs=\"$funcs setenv\"\n+funcs=\"$funcs snprintf\"\n funcs=\"$funcs sigsetmask\"\n funcs=\"$funcs stpcpy\"\n funcs=\"$funcs stpncpy\"\n@@ -201,6 +202,7 @@ funcs=\"$funcs tmpnam\"\n funcs=\"$funcs vasprintf\"\n funcs=\"$funcs vfprintf\"\n funcs=\"$funcs vprintf\"\n+funcs=\"$funcs vsnprintf\"\n funcs=\"$funcs vsprintf\"\n funcs=\"$funcs waitpid\"\n \n@@ -221,7 +223,7 @@ if test \"x\" = \"y\"; then\n   AC_CHECK_FUNCS(strcasecmp setenv stpcpy stpncpy strchr strdup strncasecmp strrchr strstr)\n   AC_CHECK_FUNCS(strtod strtol strtoul tmpnam vasprintf vfprintf vprintf)\n   AC_CHECK_FUNCS(vsprintf waitpid getrusage on_exit psignal strerror strsignal)\n-  AC_CHECK_FUNCS(sysconf times sbrk gettimeofday ffs)\n+  AC_CHECK_FUNCS(sysconf times sbrk gettimeofday ffs snprintf vsnprintf)\n   AC_CHECK_FUNCS(pstat_getstatic pstat_getdynamic sysmp getsysinfo table sysctl)\n   AC_CHECK_FUNCS(realpath canonicalize_file_name)\n   AC_DEFINE(HAVE_SYS_ERRLIST, 1, [Define if you have the sys_errlist variable.])"}, {"sha": "4261d8646761901badbbfb05048607b969f6b0e1", "filename": "libiberty/functions.texi", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Ffunctions.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Ffunctions.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Ffunctions.texi?ref=bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "patch": "@@ -673,6 +673,19 @@ be the value @code{1}).\n \n @end deftypefn\n \n+@c snprintf.c:28\n+@deftypefn Supplemental int snprintf (char *@var{buf}, size_t @var{n}, const char *@var{format}, ...)\n+\n+This function is similar to sprintf, but it will print at most @var{n}\n+characters.  On error the return value is -1, otherwise it returns the\n+number of characters that would have been printed had @var{n} been\n+sufficiently large, regardless of the actual value of @var{n}.  Note\n+some pre-C99 system libraries do not implement this correctly so users\n+cannot generally rely on the return value if the system version of\n+this function is used.\n+\n+@end deftypefn\n+\n @c spaces.c:22\n @deftypefn Extension char* spaces (int @var{count})\n \n@@ -929,6 +942,19 @@ nonstandard but common function @code{_doprnt}.\n \n @end deftypefn\n \n+@c vsnprintf.c:28\n+@deftypefn Supplemental int vsnprintf (char *@var{buf}, size_t @var{n}, const char *@var{format}, va_list @var{ap})\n+\n+This function is similar to vsprintf, but it will print at most\n+@var{n} characters.  On error the return value is -1, otherwise it\n+returns the number of characters that would have been printed had\n+@var{n} been sufficiently large, regardless of the actual value of\n+@var{n}.  Note some pre-C99 system libraries do not implement this\n+correctly so users cannot generally rely on the return value if the\n+system version of this function is used.\n+\n+@end deftypefn\n+\n @c waitpid.c:3\n @deftypefn Supplemental int waitpid (int @var{pid}, int *@var{status}, int)\n "}, {"sha": "89164695b5002be7c9bfbb8456553ec57fef3ac5", "filename": "libiberty/snprintf.c", "status": "added", "additions": 65, "deletions": 0, "changes": 65, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Fsnprintf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Fsnprintf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fsnprintf.c?ref=bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "patch": "@@ -0,0 +1,65 @@\n+/* Implement the snprintf function.\n+   Copyright (C) 2003 Free Software Foundation, Inc.\n+   Written by Kaveh R. Ghazi <ghazi@caip.rutgers.edu>.\n+\n+This file is part of the libiberty library.  This library is free\n+software; you can redistribute it and/or modify it under the\n+terms of the GNU General Public License as published by the\n+Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+This library is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GNU CC; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.\n+\n+As a special exception, if you link this library with files\n+compiled with a GNU compiler to produce an executable, this does not cause\n+the resulting executable to be covered by the GNU General Public License.\n+This exception does not however invalidate any other reasons why\n+the executable file might be covered by the GNU General Public License. */\n+\n+/*\n+\n+@deftypefn Supplemental int snprintf (char *@var{buf}, size_t @var{n}, const char *@var{format}, ...)\n+\n+This function is similar to sprintf, but it will print at most @var{n}\n+characters.  On error the return value is -1, otherwise it returns the\n+number of characters that would have been printed had @var{n} been\n+sufficiently large, regardless of the actual value of @var{n}.  Note\n+some pre-C99 system libraries do not implement this correctly so users\n+cannot generally rely on the return value if the system version of\n+this function is used.\n+\n+@end deftypefn\n+\n+*/\n+\n+#include \"ansidecl.h\"\n+\n+#ifdef ANSI_PROTOTYPES\n+#include <stdarg.h>\n+#include <stddef.h>\n+#else\n+#include <varargs.h>\n+#define size_t unsigned long\n+#endif\n+\n+int vsnprintf PARAMS ((char *, size_t, const char *, va_list));\n+\n+int\n+snprintf VPARAMS ((char *s, size_t n, const char *format, ...))\n+{\n+  int result;\n+  VA_OPEN (ap, format);\n+  VA_FIXEDARG (ap, char *, s);\n+  VA_FIXEDARG (ap, size_t, n);\n+  VA_FIXEDARG (ap, const char *, format);\n+  result = vsnprintf (s, n, format, ap);\n+  VA_CLOSE (ap);\n+  return result;\n+}"}, {"sha": "9328e430097ac75da5f7ec9e23c7dd957197e8e3", "filename": "libiberty/vsnprintf.c", "status": "added", "additions": 149, "deletions": 0, "changes": 149, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Fvsnprintf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d/libiberty%2Fvsnprintf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fvsnprintf.c?ref=bd3fbc6b72cfc51aa7711fa8730f41fa132ef49d", "patch": "@@ -0,0 +1,149 @@\n+/* Implement the vsnprintf function.\n+   Copyright (C) 2003 Free Software Foundation, Inc.\n+   Written by Kaveh R. Ghazi <ghazi@caip.rutgers.edu>.\n+\n+This file is part of the libiberty library.  This library is free\n+software; you can redistribute it and/or modify it under the\n+terms of the GNU General Public License as published by the\n+Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+This library is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GNU CC; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.\n+\n+As a special exception, if you link this library with files\n+compiled with a GNU compiler to produce an executable, this does not cause\n+the resulting executable to be covered by the GNU General Public License.\n+This exception does not however invalidate any other reasons why\n+the executable file might be covered by the GNU General Public License. */\n+\n+/*\n+\n+@deftypefn Supplemental int vsnprintf (char *@var{buf}, size_t @var{n}, const char *@var{format}, va_list @var{ap})\n+\n+This function is similar to vsprintf, but it will print at most\n+@var{n} characters.  On error the return value is -1, otherwise it\n+returns the number of characters that would have been printed had\n+@var{n} been sufficiently large, regardless of the actual value of\n+@var{n}.  Note some pre-C99 system libraries do not implement this\n+correctly so users cannot generally rely on the return value if the\n+system version of this function is used.\n+\n+@end deftypefn\n+\n+*/\n+\n+#include \"config.h\"\n+#include \"ansidecl.h\"\n+\n+#ifdef ANSI_PROTOTYPES\n+#include <stdarg.h>\n+#else\n+#include <varargs.h>\n+#endif\n+#ifdef HAVE_STRING_H\n+#include <string.h>\n+#endif\n+#ifdef HAVE_STDLIB_H\n+#include <stdlib.h>\n+#endif\n+\n+#include \"libiberty.h\"\n+\n+/* This implementation relies on a working vasprintf.  */\n+int\n+vsnprintf (s, n, format, ap)\n+     char * s;\n+     size_t n;\n+     const char *format;\n+     va_list ap;\n+{\n+  char *buf = 0;\n+  int result = vasprintf (&buf, format, ap);\n+\n+  if (!buf)\n+    return -1;\n+  if (result < 0)\n+    {\n+      free (buf);\n+      return -1;\n+    }\n+\n+  result = strlen (buf);\n+  if (n > 0)\n+    {\n+      strncpy (s, buf, n);\n+      if (n - 1 < (size_t) result)\n+\ts[n - 1] = 0;\n+    }\n+  free (buf);\n+  return result;\n+}\n+\n+#ifdef TEST\n+/* Set the buffer to a known state.  */\n+#define CLEAR(BUF) do { memset ((BUF), 'X', sizeof (BUF)); (BUF)[14] = '\\0'; } while (0)\n+/* For assertions.  */\n+#define VERIFY(P) do { if (!(P)) abort(); } while (0)\n+\n+static int ATTRIBUTE_PRINTF_3\n+checkit VPARAMS ((char *s, size_t n, const char *format, ...))\n+{\n+  int result;\n+  VA_OPEN (ap, format);\n+  VA_FIXEDARG (ap, char *, s);\n+  VA_FIXEDARG (ap, size_t, n);\n+  VA_FIXEDARG (ap, const char *, format);\n+  result = vsnprintf (s, n, format, ap);\n+  VA_CLOSE (ap);\n+  return result;\n+}\n+\n+extern int main PARAMS ((void));\n+int\n+main ()\n+{\n+  char buf[128];\n+  int status;\n+  \n+  CLEAR (buf);\n+  status = checkit (buf, 10, \"%s:%d\", \"foobar\", 9);\n+  VERIFY (status==8 && strcmp (buf, \"foobar:9\") == 0);\n+\n+  CLEAR (buf);\n+  status = checkit (buf, 9, \"%s:%d\", \"foobar\", 9);\n+  VERIFY (status==8 && strcmp (buf, \"foobar:9\") == 0);\n+\n+  CLEAR (buf);\n+  status = checkit (buf, 8, \"%s:%d\", \"foobar\", 9);\n+  VERIFY (status==8 && strcmp (buf, \"foobar:\") == 0);\n+\n+  CLEAR (buf);\n+  status = checkit (buf, 7, \"%s:%d\", \"foobar\", 9);\n+  VERIFY (status==8 && strcmp (buf, \"foobar\") == 0);\n+\n+  CLEAR (buf);\n+  status = checkit (buf, 6, \"%s:%d\", \"foobar\", 9);\n+  VERIFY (status==8 && strcmp (buf, \"fooba\") == 0);\n+\n+  CLEAR (buf);\n+  status = checkit (buf, 2, \"%s:%d\", \"foobar\", 9);\n+  VERIFY (status==8 && strcmp (buf, \"f\") == 0);\n+\n+  CLEAR (buf);\n+  status = checkit (buf, 1, \"%s:%d\", \"foobar\", 9);\n+  VERIFY (status==8 && strcmp (buf, \"\") == 0);\n+\n+  CLEAR (buf);\n+  status = checkit (buf, 0, \"%s:%d\", \"foobar\", 9);\n+  VERIFY (status==8 && strcmp (buf, \"XXXXXXXXXXXXXX\") == 0);\n+\n+  return 0;\n+}\n+#endif /* TEST */"}]}