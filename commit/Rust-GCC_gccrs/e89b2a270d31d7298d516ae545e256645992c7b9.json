{"sha": "e89b2a270d31d7298d516ae545e256645992c7b9", "node_id": "C_kwDOANBUbNoAKGU4OWIyYTI3MGQzMWQ3Mjk4ZDUxNmFlNTQ1ZTI1NjY0NTk5MmM3Yjk", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-01-18T12:31:56Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-01-18T14:43:04Z"}, "message": "ipa/103989 - tame IPA optimizations at -Og\n\nWith -Og we are not prepared to do cleanup after IPA optimizations\nand dead code exposed by those confuses late diagnostic passes.\nThis is a first patch removing unwanted IPA optimizations, namely\nboth late modref and pure-const analysis.\n\n2022-01-18  Richard Biener  <rguenther@suse.de>\n\n\tPR ipa/103989\n\t* passes.def (pass_all_optimizations_g): Remove pass_modref\n\tand pass_local_pure_const.", "tree": {"sha": "52263b0204531b2d254bc7905f7b15d1156fb60a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52263b0204531b2d254bc7905f7b15d1156fb60a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e89b2a270d31d7298d516ae545e256645992c7b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e89b2a270d31d7298d516ae545e256645992c7b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e89b2a270d31d7298d516ae545e256645992c7b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e89b2a270d31d7298d516ae545e256645992c7b9/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7402e40a2e2f5eac4489d28ac696e15c88c07f51", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7402e40a2e2f5eac4489d28ac696e15c88c07f51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7402e40a2e2f5eac4489d28ac696e15c88c07f51"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "3e75de46c237ddd342eed09172147a9aaa8b60b4", "filename": "gcc/passes.def", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e89b2a270d31d7298d516ae545e256645992c7b9/gcc%2Fpasses.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e89b2a270d31d7298d516ae545e256645992c7b9/gcc%2Fpasses.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.def?ref=e89b2a270d31d7298d516ae545e256645992c7b9", "patch": "@@ -372,6 +372,9 @@ along with GCC; see the file COPYING3.  If not see\n   POP_INSERT_PASSES ()\n   NEXT_PASS (pass_all_optimizations_g);\n   PUSH_INSERT_PASSES_WITHIN (pass_all_optimizations_g)\n+      /* The idea is that with -Og we do not perform any IPA optimization\n+\t so post-IPA work should be restricted to semantically required\n+\t passes and all optimization work is done early.  */\n       NEXT_PASS (pass_remove_cgraph_callee_edges);\n       NEXT_PASS (pass_strip_predict_hints, false /* early_p */);\n       /* Lower remaining pieces of GIMPLE.  */\n@@ -399,8 +402,6 @@ along with GCC; see the file COPYING3.  If not see\n          number of false positives from it.  */\n       NEXT_PASS (pass_split_crit_edges);\n       NEXT_PASS (pass_late_warn_uninitialized);\n-      NEXT_PASS (pass_local_pure_const);\n-      NEXT_PASS (pass_modref);\n       /* uncprop replaces constants by SSA names.  This makes analysis harder\n \t and thus it should be run last.  */\n       NEXT_PASS (pass_uncprop);"}]}