{"sha": "b3c54c8f55b487e77f1e2c881f30781cc784b1d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNjNTRjOGY1NWI0ODdlNzdmMWUyYzg4MWYzMDc4MWNjNzg0YjFkOA==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2009-06-26T06:06:04Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2009-06-26T06:06:04Z"}, "message": "re PR middle-end/40525 (if conversion (in dead_or_predicable) fails for targets with limited conditional execution support)\n\n\tPR middle-end/40525\n\t* ifcvt.c (dead_or_predicable): If predicating MERGE_BB fails,\n\ttry the non-cond_exec path also.\n\nFrom-SVN: r148961", "tree": {"sha": "158847ecfbaeb40d35db538def492421cf2c123d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/158847ecfbaeb40d35db538def492421cf2c123d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3c54c8f55b487e77f1e2c881f30781cc784b1d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3c54c8f55b487e77f1e2c881f30781cc784b1d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3c54c8f55b487e77f1e2c881f30781cc784b1d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3c54c8f55b487e77f1e2c881f30781cc784b1d8/comments", "author": null, "committer": null, "parents": [{"sha": "f5e6686534eab43fb0b9e6807b9489958a12c74e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5e6686534eab43fb0b9e6807b9489958a12c74e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5e6686534eab43fb0b9e6807b9489958a12c74e"}], "stats": {"total": 25, "additions": 19, "deletions": 6}, "files": [{"sha": "c914f349d7a3f65f295e929714797f1cbd599301", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3c54c8f55b487e77f1e2c881f30781cc784b1d8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3c54c8f55b487e77f1e2c881f30781cc784b1d8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b3c54c8f55b487e77f1e2c881f30781cc784b1d8", "patch": "@@ -1,3 +1,9 @@\n+2009-06-26  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\tPR middle-end/40525\n+\t* ifcvt.c (dead_or_predicable): If predicating MERGE_BB fails,\n+\ttry the non-cond_exec path also.\n+\n 2009-06-25  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \tPR target/40468"}, {"sha": "c47dfab7a70f9e4c2797d2719ea5f22b9e3bfa17", "filename": "gcc/ifcvt.c", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3c54c8f55b487e77f1e2c881f30781cc784b1d8/gcc%2Fifcvt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3c54c8f55b487e77f1e2c881f30781cc784b1d8/gcc%2Fifcvt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fifcvt.c?ref=b3c54c8f55b487e77f1e2c881f30781cc784b1d8", "patch": "@@ -3780,6 +3780,8 @@ dead_or_predicable (basic_block test_bb, basic_block merge_bb,\n \t\t    basic_block other_bb, basic_block new_dest, int reversep)\n {\n   rtx head, end, jump, earliest = NULL_RTX, old_dest, new_label = NULL_RTX;\n+  /* Number of pending changes.  */\n+  int n_validated_changes = 0;\n \n   jump = BB_END (test_bb);\n \n@@ -3848,14 +3850,17 @@ dead_or_predicable (basic_block test_bb, basic_block merge_bb,\n \t    prob_val = GEN_INT (REG_BR_PROB_BASE - INTVAL (prob_val));\n \t}\n \n-      if (! cond_exec_process_insns ((ce_if_block_t *)0, head, end, cond,\n-\t\t\t\t     prob_val, 0))\n-\tgoto cancel;\n+      if (cond_exec_process_insns (NULL, head, end, cond, prob_val, 0)\n+\t  && verify_changes (0))\n+\tn_validated_changes = num_validated_changes ();\n+      else\n+\tcancel_changes (0);\n \n       earliest = jump;\n     }\n-  else\n #endif\n+  /* Try the NCE path if the CE path did not result in any changes.  */\n+  if (n_validated_changes == 0)\n     {\n       /* In the non-conditional execution case, we have to verify that there\n \t are no trapping operations, no calls, no references to memory, and\n@@ -3995,8 +4000,10 @@ dead_or_predicable (basic_block test_bb, basic_block merge_bb,\n \tgoto cancel;\n     }\n \n-  if (! apply_change_group ())\n-    return FALSE;\n+  if (verify_changes (n_validated_changes))\n+    confirm_change_group ();\n+  else\n+    goto cancel;\n \n   if (other_bb != new_dest)\n     {"}]}