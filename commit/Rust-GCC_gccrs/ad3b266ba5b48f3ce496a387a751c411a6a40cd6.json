{"sha": "ad3b266ba5b48f3ce496a387a751c411a6a40cd6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWQzYjI2NmJhNWI0OGYzY2U0OTZhMzg3YTc1MWM0MTFhNmE0MGNkNg==", "commit": {"author": {"name": "Vladimir Makarov", "email": "vmakarov@redhat.com", "date": "2011-03-30T02:11:04Z"}, "committer": {"name": "Vladimir Makarov", "email": "vmakarov@gcc.gnu.org", "date": "2011-03-30T02:11:04Z"}, "message": "re PR target/48336 (Error in generation of ARM ldrd instruction)\n\n2011-03-29  Vladimir Makarov  <vmakarov@redhat.com>\n\n\tPR target/48336\n\tPR middle-end/48342\n\tPR rtl-optimization/48345\n\t* ira-color.c (setup_conflict_profitable_regs): Exclude prohibited\n\thard regs for given mode from profitable regs when doing secondary\n\tallocation.\n\nFrom-SVN: r171713", "tree": {"sha": "bce022616c312b2302fa7c0e66973a463fc6923b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bce022616c312b2302fa7c0e66973a463fc6923b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad3b266ba5b48f3ce496a387a751c411a6a40cd6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad3b266ba5b48f3ce496a387a751c411a6a40cd6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad3b266ba5b48f3ce496a387a751c411a6a40cd6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad3b266ba5b48f3ce496a387a751c411a6a40cd6/comments", "author": {"login": "vnmakarov", "id": 9855671, "node_id": "MDQ6VXNlcjk4NTU2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9855671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnmakarov", "html_url": "https://github.com/vnmakarov", "followers_url": "https://api.github.com/users/vnmakarov/followers", "following_url": "https://api.github.com/users/vnmakarov/following{/other_user}", "gists_url": "https://api.github.com/users/vnmakarov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnmakarov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnmakarov/subscriptions", "organizations_url": "https://api.github.com/users/vnmakarov/orgs", "repos_url": "https://api.github.com/users/vnmakarov/repos", "events_url": "https://api.github.com/users/vnmakarov/events{/privacy}", "received_events_url": "https://api.github.com/users/vnmakarov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "99ac3cea6ea8d66936122185c34121c21e3a78b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99ac3cea6ea8d66936122185c34121c21e3a78b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99ac3cea6ea8d66936122185c34121c21e3a78b7"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "689f2916faab00682570dc392c3591b0cca19973", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad3b266ba5b48f3ce496a387a751c411a6a40cd6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad3b266ba5b48f3ce496a387a751c411a6a40cd6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ad3b266ba5b48f3ce496a387a751c411a6a40cd6", "patch": "@@ -1,3 +1,12 @@\n+2011-03-29  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\tPR target/48336\n+\tPR middle-end/48342\n+\tPR rtl-optimization/48345\n+\t* ira-color.c (setup_conflict_profitable_regs): Exclude prohibited\n+\thard regs for given mode from profitable regs when doing secondary\n+\tallocation.\n+\n 2011-03-29  Jeff Law  <law@redhat.com>\n \n \tPR bootstrap/48327"}, {"sha": "c29367010ff5a3cea2e6d11b97c2040734e29e9d", "filename": "gcc/ira-color.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad3b266ba5b48f3ce496a387a751c411a6a40cd6/gcc%2Fira-color.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad3b266ba5b48f3ce496a387a751c411a6a40cd6/gcc%2Fira-color.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira-color.c?ref=ad3b266ba5b48f3ce496a387a751c411a6a40cd6", "patch": "@@ -1447,7 +1447,9 @@ update_conflict_hard_regno_costs (int *costs, enum reg_class aclass,\n }\n \n /* Set up conflicting and profitable regs (through CONFLICT_REGS and\n-   PROFITABLE_REGS) for each object of allocno A.  */\n+   PROFITABLE_REGS) for each object of allocno A.  Remember that the\n+   profitable regs exclude hard regs which can not hold value of mode\n+   of allocno A.  */\n static inline void\n setup_conflict_profitable_regs (ira_allocno_t a, bool retry_p,\n \t\t\t\tHARD_REG_SET *conflict_regs,\n@@ -1463,8 +1465,13 @@ setup_conflict_profitable_regs (ira_allocno_t a, bool retry_p,\n       COPY_HARD_REG_SET (conflict_regs[i],\n \t\t\t OBJECT_TOTAL_CONFLICT_HARD_REGS (obj));\n       if (retry_p)\n-\tCOPY_HARD_REG_SET (profitable_regs[i],\n-\t\t\t   reg_class_contents[ALLOCNO_CLASS (a)]);\n+\t{\n+\t  COPY_HARD_REG_SET (profitable_regs[i],\n+\t\t\t     reg_class_contents[ALLOCNO_CLASS (a)]);\n+\t  AND_COMPL_HARD_REG_SET (profitable_regs[i],\n+\t\t\t\t  ira_prohibited_class_mode_regs\n+\t\t\t\t  [ALLOCNO_CLASS (a)][ALLOCNO_MODE (a)]);\n+\t}\n       else\n \tCOPY_HARD_REG_SET (profitable_regs[i],\n \t\t\t   OBJECT_COLOR_DATA (obj)->profitable_hard_regs);"}]}