{"sha": "9f5e2e11084caae56b3b00feffd6a462b385afeb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWY1ZTJlMTEwODRjYWFlNTZiM2IwMGZlZmZkNmE0NjJiMzg1YWZlYg==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2003-09-26T13:28:45Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2003-09-26T13:28:45Z"}, "message": "expmed.c (store_bit_field): Don't search for an integer mode unless we need the result.\n\n\t* expmed.c (store_bit_field): Don't search for an integer mode\n\tunless we need the result.\n\nFrom-SVN: r71819", "tree": {"sha": "d45d8ab5a2f696eaff872f20f152484b4d878038", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d45d8ab5a2f696eaff872f20f152484b4d878038"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9f5e2e11084caae56b3b00feffd6a462b385afeb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f5e2e11084caae56b3b00feffd6a462b385afeb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f5e2e11084caae56b3b00feffd6a462b385afeb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f5e2e11084caae56b3b00feffd6a462b385afeb/comments", "author": null, "committer": null, "parents": [{"sha": "5581fc9110377e8a08394f985a17c3e0cb31227a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5581fc9110377e8a08394f985a17c3e0cb31227a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5581fc9110377e8a08394f985a17c3e0cb31227a"}], "stats": {"total": 14, "additions": 9, "deletions": 5}, "files": [{"sha": "5929dca61b9f65fadee9b9cb4fcd717b404ec7c3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f5e2e11084caae56b3b00feffd6a462b385afeb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f5e2e11084caae56b3b00feffd6a462b385afeb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9f5e2e11084caae56b3b00feffd6a462b385afeb", "patch": "@@ -1,3 +1,8 @@\n+2003-09-26  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* expmed.c (store_bit_field): Don't search for an integer mode\n+\tunless we need the result.\n+\n 2003-09-26  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* expr.c (emit_move_insn_1): If there is no move pattern for the"}, {"sha": "d93be934be3baf3cdfdc80187c86fca315e7ec25", "filename": "gcc/expmed.c", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f5e2e11084caae56b3b00feffd6a462b385afeb/gcc%2Fexpmed.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f5e2e11084caae56b3b00feffd6a462b385afeb/gcc%2Fexpmed.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpmed.c?ref=9f5e2e11084caae56b3b00feffd6a462b385afeb", "patch": "@@ -461,7 +461,9 @@ store_bit_field (rtx str_rtx, unsigned HOST_WIDE_INT bitsize,\n \t VOIDmode, because that is what store_field uses to indicate that this\n \t is a bit field, but passing VOIDmode to operand_subword_force will\n \t result in an abort.  */\n-      fieldmode = smallest_mode_for_size (nwords * BITS_PER_WORD, MODE_INT);\n+      fieldmode = GET_MODE (value);\n+      if (fieldmode == VOIDmode)\n+\tfieldmode = smallest_mode_for_size (nwords * BITS_PER_WORD, MODE_INT);\n \n       for (i = 0; i < nwords; i++)\n \t{\n@@ -477,10 +479,7 @@ store_bit_field (rtx str_rtx, unsigned HOST_WIDE_INT bitsize,\n \t  store_bit_field (op0, MIN (BITS_PER_WORD,\n \t\t\t\t     bitsize - i * BITS_PER_WORD),\n \t\t\t   bitnum + bit_offset, word_mode,\n-\t\t\t   operand_subword_force (value, wordnum,\n-\t\t\t\t\t\t  (GET_MODE (value) == VOIDmode\n-\t\t\t\t\t\t   ? fieldmode\n-\t\t\t\t\t\t   : GET_MODE (value))),\n+\t\t\t   operand_subword_force (value, wordnum, fieldmode),\n \t\t\t   total_size);\n \t}\n       return value;"}]}