{"sha": "eb3119f90fb7a12cd7fe7ad83e3622a064d28ace", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWIzMTE5ZjkwZmI3YTEyY2Q3ZmU3YWQ4M2UzNjIyYTA2NGQyOGFjZQ==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2012-12-25T22:11:16Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2012-12-25T22:11:16Z"}, "message": "PR fortran/55539 Fix regression in -fno-sign-zero.\n\nlibgfortran ChangeLog:\n\n2012-12-26  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\tPR fortran/55539\n\t* io/write_float.def (output_float): Take into account decimal dot.\n\ntestsuite ChangeLog:\n\n2012-12-26  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\tPR fortran/55539\n\t* gfortran.dg/nosigned_zero_3.f90: New testcase.\n\nFrom-SVN: r194717", "tree": {"sha": "d25ef69d03aac5fc041242a79c04c1cde4b3a5d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d25ef69d03aac5fc041242a79c04c1cde4b3a5d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace/comments", "author": null, "committer": null, "parents": [{"sha": "e255044e71508a6cd8023614b0ccd178803e9619", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e255044e71508a6cd8023614b0ccd178803e9619", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e255044e71508a6cd8023614b0ccd178803e9619"}], "stats": {"total": 35, "additions": 32, "deletions": 3}, "files": [{"sha": "59f344106c1146a72d9f506d4d8a918041ba3fe3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=eb3119f90fb7a12cd7fe7ad83e3622a064d28ace", "patch": "@@ -1,3 +1,8 @@\n+2012-12-26  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR fortran/55539\n+\t* gfortran.dg/nosigned_zero_3.f90: New testcase.\n+\n 2012-12-23  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/54884"}, {"sha": "3f0f7101f26b862a72c90078491a359330c59f60", "filename": "gcc/testsuite/gfortran.dg/nosigned_zero_3.f90", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace/gcc%2Ftestsuite%2Fgfortran.dg%2Fnosigned_zero_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace/gcc%2Ftestsuite%2Fgfortran.dg%2Fnosigned_zero_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fnosigned_zero_3.f90?ref=eb3119f90fb7a12cd7fe7ad83e3622a064d28ace", "patch": "@@ -0,0 +1,15 @@\n+! { dg-do run }\n+! { dg-options \"-fno-sign-zero\" }\n+!\n+! PR fortran/55539\n+!\n+program nosigned_zero_3\n+  implicit none\n+  character(len=20) :: s\n+  real(4) :: x = -1.2e-3\n+  real(8) :: y = -1.2e-3\n+  write(s,'(7f10.3)') x\n+  if (trim(adjustl(s)) /= \"-0.001\") call abort\n+  write(s, '(7f10.3)') y\n+  if (trim(adjustl(s)) /= \"-0.001\") call abort\n+end program nosigned_zero_3"}, {"sha": "debd88c8f4f66f4515e77c52f3ebcb7257e21a1e", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=eb3119f90fb7a12cd7fe7ad83e3622a064d28ace", "patch": "@@ -1,3 +1,9 @@\n+2012-12-26  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR fortran/55539\n+\t* io/write_float.def (output_float): Take into account decimal\n+\tdot.\n+\n 2012-12-21  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR libfortran/30162"}, {"sha": "1e30dde29ce21fab614250361bf9953e843f3f61", "filename": "libgfortran/io/write_float.def", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace/libgfortran%2Fio%2Fwrite_float.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb3119f90fb7a12cd7fe7ad83e3622a064d28ace/libgfortran%2Fio%2Fwrite_float.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Fwrite_float.def?ref=eb3119f90fb7a12cd7fe7ad83e3622a064d28ace", "patch": "@@ -483,16 +483,19 @@ output_float (st_parameter_dt *dtp, const fnode *f, char *buffer, size_t size,\n   /* Scan the digits string and count the number of zeros.  If we make it\n      all the way through the loop, we know the value is zero after the\n      rounding completed above.  */\n-  for (i = 0; i < ndigits; i++)\n+  int hasdot = 0;\n+  for (i = 0; i < ndigits + hasdot; i++)\n     {\n-      if (digits[i] != '0' && digits[i] != '.')\n+      if (digits[i] == '.')\n+\thasdot = 1;\n+      else if (digits[i] != '0')\n \tbreak;\n     }\n \n   /* To format properly, we need to know if the rounded result is zero and if\n      so, we set the zero_flag which may have been already set for\n      actual zero.  */\n-  if (i == ndigits)\n+  if (i == ndigits + hasdot)\n     {\n       zero_flag = true;\n       /* The output is zero, so set the sign according to the sign bit unless"}]}