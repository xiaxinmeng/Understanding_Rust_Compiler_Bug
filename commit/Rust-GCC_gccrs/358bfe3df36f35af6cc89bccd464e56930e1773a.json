{"sha": "358bfe3df36f35af6cc89bccd464e56930e1773a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzU4YmZlM2RmMzZmMzVhZjZjYzg5YmNjZDQ2NGU1NjkzMGUxNzczYQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2003-08-12T17:59:17Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2003-08-12T17:59:17Z"}, "message": "mauve.exp (test_mauve_sim): Don't find DejaGNUTestHarness in gnu/testlet.\n\n\t* libjava.mauve/mauve.exp (test_mauve_sim): Don't find\n\tDejaGNUTestHarness in gnu/testlet.\n\t(test_mauve): Use correct object extension.\n\nFrom-SVN: r70381", "tree": {"sha": "028f1b738e22fd75c58ec15d0fbb5bcc46764876", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/028f1b738e22fd75c58ec15d0fbb5bcc46764876"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/358bfe3df36f35af6cc89bccd464e56930e1773a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/358bfe3df36f35af6cc89bccd464e56930e1773a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/358bfe3df36f35af6cc89bccd464e56930e1773a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/358bfe3df36f35af6cc89bccd464e56930e1773a/comments", "author": null, "committer": null, "parents": [{"sha": "a98c7b2c667163dc077ddc3e8206d3a730d77212", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a98c7b2c667163dc077ddc3e8206d3a730d77212", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a98c7b2c667163dc077ddc3e8206d3a730d77212"}], "stats": {"total": 25, "additions": 19, "deletions": 6}, "files": [{"sha": "c19cfb0e7899fdf3bf7e361ed02ebcd4fff72373", "filename": "libjava/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/358bfe3df36f35af6cc89bccd464e56930e1773a/libjava%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/358bfe3df36f35af6cc89bccd464e56930e1773a/libjava%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FChangeLog?ref=358bfe3df36f35af6cc89bccd464e56930e1773a", "patch": "@@ -1,3 +1,9 @@\n+2003-08-12  Tom Tromey  <tromey@redhat.com>\n+\n+\t* libjava.mauve/mauve.exp (test_mauve_sim): Don't find\n+\tDejaGNUTestHarness in gnu/testlet.\n+\t(test_mauve): Use correct object extension.\n+\n 2003-08-12  Tom Tromey  <tromey@redhat.com>\n \n \t* lib/libjava.exp (libjava_find_lib): Search for .so file first."}, {"sha": "03bbed9fd9facc238604dd2b25c8437d19bda471", "filename": "libjava/testsuite/libjava.mauve/mauve.exp", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/358bfe3df36f35af6cc89bccd464e56930e1773a/libjava%2Ftestsuite%2Flibjava.mauve%2Fmauve.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/358bfe3df36f35af6cc89bccd464e56930e1773a/libjava%2Ftestsuite%2Flibjava.mauve%2Fmauve.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.mauve%2Fmauve.exp?ref=358bfe3df36f35af6cc89bccd464e56930e1773a", "patch": "@@ -167,11 +167,17 @@ proc test_mauve {} {\n   set link_args [concat [libjava_arguments link] \\\n \t\t   [list \"additional_flags=--main=DejaGNUTestHarness\"]]\n \n+  if {[string match \"*libtool*\" $compile_args]} {\n+    set objext lo\n+  } else {\n+    set objext o\n+  }\n+\n   set ok 1\n   set objlist {}\n   foreach base [mauve_find_harness_files] {\n     set file $base.class\n-    set obj $base.o\n+    set obj $base.$objext\n     set x [libjava_prune_warnings \\\n \t     [target_compile [pwd]/$file $obj object $compile_args]]\n     if {$x != \"\"} then {\n@@ -194,7 +200,10 @@ proc test_mauve {} {\n     regsub -all -- / $class . class\n \n     set ok 1\n+    set this_olist {}\n     foreach obj $uses($file) {\n+      set obj [file rootname $obj].$objext\n+      lappend this_olist $obj\n       if {! [file exists $obj]} then {\n \tverbose \"compiling $obj for test of $class\"\n \t# The .class file does contain a $, but we can quote it between \"'\"s.\n@@ -216,7 +225,7 @@ proc test_mauve {} {\n     }\n \n     set x [libjava_prune_warnings \\\n-\t     [libjava_tcompile [concat $uses($file) $objlist] \\\n+\t     [libjava_tcompile [concat $this_olist $objlist] \\\n \t\t$Executable executable $link_args]]\n     if {$x != \"\"} then {\n       set proc_ok 0\n@@ -325,8 +334,6 @@ proc test_mauve_sim {} {\n     return 0\n   }\n \n-  lappend objlist gnu/testlet/DejaGNUTestHarness.o\n-\n   set proc_ok 1\n   set Executable DejaGNUTestHarness\n   foreach file $choices {\n@@ -377,8 +384,8 @@ proc test_mauve_sim {} {\n     }\n \n     set x [libjava_prune_warnings \\\n-\t     [target_compile gnu/testlet/DejaGNUTestHarness.class \\\n-\t\tgnu/testlet/DejaGNUTestHarness.o object $compile_args]]\n+\t     [target_compile DejaGNUTestHarness.class \\\n+\t\tDejaGNUTestHarness.o object $compile_args]]\n     if {$x != \"\"} then {\n \tfail \"Compile DejaGNUTestHarness.java\"\n         set proc_ok 0"}]}