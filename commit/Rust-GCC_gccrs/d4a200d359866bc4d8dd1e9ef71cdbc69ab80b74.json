{"sha": "d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDRhMjAwZDM1OTg2NmJjNGQ4ZGQxZTllZjcxY2RiYzY5YWI4MGI3NA==", "commit": {"author": {"name": "Simon Martin", "email": "simartin@users.sourceforge.net", "date": "2006-09-07T17:25:05Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2006-09-07T17:25:05Z"}, "message": "re PR c++/28284 (ICE with invalid static const variable)\n\n        PR c++/28284\n        * pt.c (fold_non_dependent_expr): Make sure expr is not dereferenced if it\n        is NULL.\n\nFrom-SVN: r116755", "tree": {"sha": "87b014cd8199a8e8bee4d8182624d173d1d5cee4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/87b014cd8199a8e8bee4d8182624d173d1d5cee4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74/comments", "author": {"login": "simartin", "id": 935202, "node_id": "MDQ6VXNlcjkzNTIwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/935202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simartin", "html_url": "https://github.com/simartin", "followers_url": "https://api.github.com/users/simartin/followers", "following_url": "https://api.github.com/users/simartin/following{/other_user}", "gists_url": "https://api.github.com/users/simartin/gists{/gist_id}", "starred_url": "https://api.github.com/users/simartin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simartin/subscriptions", "organizations_url": "https://api.github.com/users/simartin/orgs", "repos_url": "https://api.github.com/users/simartin/repos", "events_url": "https://api.github.com/users/simartin/events{/privacy}", "received_events_url": "https://api.github.com/users/simartin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c387622634ae79b13f82c71add4d15e8489c93ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c387622634ae79b13f82c71add4d15e8489c93ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c387622634ae79b13f82c71add4d15e8489c93ca"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "6d590239f4eae33b5228fcbab51207631f5543bf", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74", "patch": "@@ -1,3 +1,9 @@\n+2006-09-07  Simon Martin  <simartin@users.sourceforge.net>\n+\n+\tPR c++/28284\n+\t* pt.c (fold_non_dependent_expr): Make sure expr is not dereferenced if it\n+\tis NULL.\n+\n 2006-09-06  Zak Kipling  <zak@transversal.com>\n \n         PR c++/26195"}, {"sha": "aea943ed0c18f4b7643581f0702b81951d9beb6c", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74", "patch": "@@ -3410,6 +3410,9 @@ redeclare_class_template (tree type, tree parms)\n tree\n fold_non_dependent_expr (tree expr)\n {\n+  if (expr == NULL_TREE)\n+    return NULL_TREE;\n+\n   /* If we're in a template, but EXPR isn't value dependent, simplify\n      it.  We're supposed to treat:\n "}, {"sha": "7ef9aa12b2b33d4efb64909468bd29c1017e239b", "filename": "gcc/testsuite/g++.dg/template/pr28284.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr28284.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr28284.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr28284.C?ref=d4a200d359866bc4d8dd1e9ef71cdbc69ab80b74", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+\n+template<int> struct A\n+{\n+  static const int i=x; /* { dg-error \"was not declared in this scope\" } */\n+  static const int j, k;\n+};\n+\n+template<int N> const int A<N>::j = i;\n+template<int N> const int A<N>::k = j;\n+\n+A<0> a;"}]}