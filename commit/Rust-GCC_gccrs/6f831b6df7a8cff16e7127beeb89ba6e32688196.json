{"sha": "6f831b6df7a8cff16e7127beeb89ba6e32688196", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmY4MzFiNmRmN2E4Y2ZmMTZlNzEyN2JlZWI4OWJhNmUzMjY4ODE5Ng==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2013-11-27T15:55:18Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-11-27T15:55:18Z"}, "message": "re PR c++/58647 (ICE with function pointer)\n\n/cp\n2013-11-27  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58647\n\t* semantics.c (cxx_eval_constant_expression, [COMPONENT_REF]):\n\tHandle function COMPONENT_REFs.\n\n/testsuite\n2013-11-27  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58647\n\t* g++.dg/parse/crash66.C: New.\n\nFrom-SVN: r205449", "tree": {"sha": "1494b1e6efd3f7322415da0ae3316d1356daab59", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1494b1e6efd3f7322415da0ae3316d1356daab59"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f831b6df7a8cff16e7127beeb89ba6e32688196", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f831b6df7a8cff16e7127beeb89ba6e32688196", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f831b6df7a8cff16e7127beeb89ba6e32688196", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f831b6df7a8cff16e7127beeb89ba6e32688196/comments", "author": null, "committer": null, "parents": [{"sha": "2e25208425c34892071ee65a99e80bb56fb19b20", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e25208425c34892071ee65a99e80bb56fb19b20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e25208425c34892071ee65a99e80bb56fb19b20"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "cbae6c43978fc606240046bbe36252f3318b18f2", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f831b6df7a8cff16e7127beeb89ba6e32688196/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f831b6df7a8cff16e7127beeb89ba6e32688196/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6f831b6df7a8cff16e7127beeb89ba6e32688196", "patch": "@@ -1,3 +1,9 @@\n+2013-11-27  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58647\n+\t* semantics.c (cxx_eval_constant_expression, [COMPONENT_REF]):\n+\tHandle function COMPONENT_REFs.\n+\n 2013-11-27  Aldy Hernandez  <aldyh@redhat.com>\n \t    Jakub Jelinek  <jakub@redhat.com>\n "}, {"sha": "bc10f1de39bb01a2c3a975f764627ac28adf93e4", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f831b6df7a8cff16e7127beeb89ba6e32688196/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f831b6df7a8cff16e7127beeb89ba6e32688196/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=6f831b6df7a8cff16e7127beeb89ba6e32688196", "patch": "@@ -9603,6 +9603,16 @@ cxx_eval_constant_expression (const constexpr_call *call, tree t,\n       break;\n \n     case COMPONENT_REF:\n+      if (is_overloaded_fn (t))\n+\t{\n+\t  /* We can only get here in checking mode via \n+\t     build_non_dependent_expr,  because any expression that\n+\t     calls or takes the address of the function will have\n+\t     pulled a FUNCTION_DECL out of the COMPONENT_REF.  */\n+\t  gcc_checking_assert (allow_non_constant);\n+\t  *non_constant_p = true;\n+\t  return t;\n+\t}\n       r = cxx_eval_component_reference (call, t, allow_non_constant, addr,\n \t\t\t\t\tnon_constant_p, overflow_p);\n       break;"}, {"sha": "cc389d4dc392b3a380295613b81b074eac1cbe30", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f831b6df7a8cff16e7127beeb89ba6e32688196/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f831b6df7a8cff16e7127beeb89ba6e32688196/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6f831b6df7a8cff16e7127beeb89ba6e32688196", "patch": "@@ -1,3 +1,8 @@\n+2013-11-27  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58647\n+\t* g++.dg/parse/crash66.C: New.\n+\n 2013-11-27  Kenneth Zadeck  <zadeck@naturalbridge.com>\n \n \t* gcc.dg/c90-const-expr-8.c: Look for overflow on INT_MIN % -1."}, {"sha": "ceedd2be243a0defb90cf42ed95d444eacaf2e07", "filename": "gcc/testsuite/g++.dg/parse/crash66.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f831b6df7a8cff16e7127beeb89ba6e32688196/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash66.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f831b6df7a8cff16e7127beeb89ba6e32688196/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash66.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash66.C?ref=6f831b6df7a8cff16e7127beeb89ba6e32688196", "patch": "@@ -0,0 +1,11 @@\n+// PR c++/58647\n+\n+struct A\n+{\n+  static void foo();\n+};\n+\n+template<typename> void bar()\n+{\n+  A().foo;\n+}"}]}