{"sha": "33f77355884225dd3e259b2610f555355482e295", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzNmNzczNTU4ODQyMjVkZDNlMjU5YjI2MTBmNTU1MzU1NDgyZTI5NQ==", "commit": {"author": {"name": "Denis Chertykov", "email": "denisc@overta.ru", "date": "2000-11-24T20:02:40Z"}, "committer": {"name": "Denis Chertykov", "email": "denisc@gcc.gnu.org", "date": "2000-11-24T20:02:40Z"}, "message": "avr.c (out_tsthi,out_tstsi): Test simplification bug fixed.\n\n\t* config/avr/avr.c (out_tsthi,out_tstsi): Test simplification bug\n\tfixed.\n\t(machine_dependent_reorg): Wrong optimization based on\n\tNOTICE_UPDATE_CC removed.\n\nFrom-SVN: r37715", "tree": {"sha": "5c3d79ea74733a374e668a341abde37da6454e5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c3d79ea74733a374e668a341abde37da6454e5c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33f77355884225dd3e259b2610f555355482e295", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33f77355884225dd3e259b2610f555355482e295", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33f77355884225dd3e259b2610f555355482e295", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33f77355884225dd3e259b2610f555355482e295/comments", "author": null, "committer": null, "parents": [{"sha": "692dc9c6351e59286337a6b0db77ecba58ff5268", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/692dc9c6351e59286337a6b0db77ecba58ff5268", "html_url": "https://github.com/Rust-GCC/gccrs/commit/692dc9c6351e59286337a6b0db77ecba58ff5268"}], "stats": {"total": 36, "additions": 18, "deletions": 18}, "files": [{"sha": "e23a6aae5197dcd59d1eab5f809f3598b0a1d305", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33f77355884225dd3e259b2610f555355482e295/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33f77355884225dd3e259b2610f555355482e295/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=33f77355884225dd3e259b2610f555355482e295", "patch": "@@ -1,3 +1,10 @@\n+Fri Nov 24 22:37:41 2000  Denis Chertykov  <denisc@overta.ru>\n+\n+\t* config/avr/avr.c (out_tsthi,out_tstsi): Test simplification bug\n+\tfixed.\n+\t(machine_dependent_reorg): Wrong optimization based on\n+\tNOTICE_UPDATE_CC removed. \n+\n Fri Nov 24 19:48:09 2000  J\"orn Rennecke <amylaar@redhat.com>\n \n \t* jump.c (delete_computation): Re-instate deletion of feeding insn."}, {"sha": "b696e55f96d680c54601238e5ff90d333259868c", "filename": "gcc/config/avr/avr.c", "status": "modified", "additions": 11, "deletions": 18, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33f77355884225dd3e259b2610f555355482e295/gcc%2Fconfig%2Favr%2Favr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33f77355884225dd3e259b2610f555355482e295/gcc%2Fconfig%2Favr%2Favr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.c?ref=33f77355884225dd3e259b2610f555355482e295", "patch": "@@ -2650,7 +2650,7 @@ out_tsthi (insn, l)\n      rtx insn;\n      int *l;\n {\n-  if (!compare_eq_p (insn))\n+  if (!compare_eq_p (insn) && !compare_diff_p (insn))\n     {\n       if (l) *l = 1;\n       return AS1 (tst,%B0);\n@@ -2679,7 +2679,7 @@ out_tstsi (insn, l)\n      rtx insn;\n      int *l;\n {\n-  if (!compare_eq_p (insn))\n+  if (!compare_eq_p (insn) && !compare_diff_p(insn))\n     {\n       if (l) *l = 1;\n       return AS1 (tst,%D0);\n@@ -4932,20 +4932,17 @@ machine_dependent_reorg (first_insn)\n      rtx first_insn;\n {\n   rtx insn, pattern;\n-  CC_STATUS_INIT;\n   \n   for (insn = first_insn; insn; insn = NEXT_INSN (insn))\n     {\n-      if (! (insn == 0 || GET_CODE (insn) == INSN\n-\t     || GET_CODE (insn) == CALL_INSN || GET_CODE (insn) == JUMP_INSN)\n+      if (! (GET_CODE (insn) == INSN\n+\t     || GET_CODE (insn) == CALL_INSN\n+\t     || GET_CODE (insn) == JUMP_INSN)\n \t  || !single_set (insn))\n \tcontinue;\n \n       pattern = PATTERN (insn);\n \n-      cc_prev_status = cc_status;\n-      NOTICE_UPDATE_CC (pattern, insn);\n-      \n       if (GET_CODE (pattern) == PARALLEL)\n \tpattern = XVECEXP (pattern, 0, 0);\n       if (GET_CODE (pattern) == SET\n@@ -4997,16 +4994,12 @@ machine_dependent_reorg (first_insn)\n \t      rtx src = SET_SRC (pat);\n \t      rtx t = XEXP (src,0);\n \n-\t      if (!(cc_prev_status.value1 != 0 && cc_status.value1 != 0\n-\t\t     && rtx_equal_p (cc_status.value1, cc_prev_status.value1)))\n-\t\t  {\n-\t\t    PUT_CODE (t, swap_condition (GET_CODE (t)));\n-\t\t    SET_SRC (pattern) = gen_rtx (NEG,\n-\t\t\t\t\t\t GET_MODE (SET_SRC (pattern)),\n-\t\t\t\t\t\t SET_SRC (pattern));\n-\t\t    INSN_CODE (next) = -1;\n-\t\t    INSN_CODE (insn) = -1;\n-\t\t  }\n+\t      PUT_CODE (t, swap_condition (GET_CODE (t)));\n+\t      SET_SRC (pattern) = gen_rtx (NEG,\n+\t\t\t\t\t   GET_MODE (SET_SRC (pattern)),\n+\t\t\t\t\t   SET_SRC (pattern));\n+\t      INSN_CODE (next) = -1;\n+\t      INSN_CODE (insn) = -1;\n \t    }\n \t}\n     }"}]}