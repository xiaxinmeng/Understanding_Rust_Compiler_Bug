{"sha": "5c12e9fbefcf47363492098361c74d7fabdf9e3a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWMxMmU5ZmJlZmNmNDczNjM0OTIwOTgzNjFjNzRkN2ZhYmRmOWUzYQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-10-27T11:15:27Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-10-27T11:15:27Z"}, "message": "[multiple changes]\n\n2015-10-27  Pascal Obry  <obry@adacore.com>\n\n\t* a-dirval-mingw.adb: Remove some characters from Invalid_Character set.\n\n2015-10-27  Ed Schonberg  <schonberg@adacore.com>\n\n\t* exp_ch6.adb (Rewrite_Function_Call_For_C): Use a named\n\tassociaion for the added actual in the call because previous\n\tactuals may also have been given by explicit associations.\n\t* lib-xref.adb: Minor style fixes.\n\nFrom-SVN: r229416", "tree": {"sha": "1c17f0bb0f75174d860c6386af938e093c41f5db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c17f0bb0f75174d860c6386af938e093c41f5db"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5c12e9fbefcf47363492098361c74d7fabdf9e3a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c12e9fbefcf47363492098361c74d7fabdf9e3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c12e9fbefcf47363492098361c74d7fabdf9e3a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c12e9fbefcf47363492098361c74d7fabdf9e3a/comments", "author": null, "committer": null, "parents": [{"sha": "b3010f3667e577297811fe4b106c0f32c93af7db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3010f3667e577297811fe4b106c0f32c93af7db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3010f3667e577297811fe4b106c0f32c93af7db"}], "stats": {"total": 58, "additions": 45, "deletions": 13}, "files": [{"sha": "da584a54bdb5e6101af04d1f3fe20a9539bd9470", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c12e9fbefcf47363492098361c74d7fabdf9e3a/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c12e9fbefcf47363492098361c74d7fabdf9e3a/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=5c12e9fbefcf47363492098361c74d7fabdf9e3a", "patch": "@@ -1,3 +1,14 @@\n+2015-10-27  Pascal Obry  <obry@adacore.com>\n+\n+\t* a-dirval-mingw.adb: Remove some characters from Invalid_Character set.\n+\n+2015-10-27  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* exp_ch6.adb (Rewrite_Function_Call_For_C): Use a named\n+\tassociaion for the added actual in the call because previous\n+\tactuals may also have been given by explicit associations.\n+\t* lib-xref.adb: Minor style fixes.\n+\n 2015-10-27  Arnaud Charlet  <charlet@adacore.com>\n \n \t* gnat1drv.adb: Remove hard coded restrictions."}, {"sha": "de3b566274edc39861e6694ca807e0067fa45a88", "filename": "gcc/ada/a-dirval-mingw.adb", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c12e9fbefcf47363492098361c74d7fabdf9e3a/gcc%2Fada%2Fa-dirval-mingw.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c12e9fbefcf47363492098361c74d7fabdf9e3a/gcc%2Fada%2Fa-dirval-mingw.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-dirval-mingw.adb?ref=5c12e9fbefcf47363492098361c74d7fabdf9e3a", "patch": "@@ -40,8 +40,11 @@ package body Ada.Directories.Validity is\n      (NUL .. US | '\\'       => True,\n       '/' | ':' | '*' | '?' => True,\n       '\"' | '<' | '>' | '|' => True,\n-      DEL .. NBSP           => True,\n+      DEL                   => True,\n       others                => False);\n+   --  Note that a valid file-name or path-name is implementation defined.\n+   --  To support UTF-8 file and directory names, we do not want to be too\n+   --  restrictive here.\n \n    ---------------------------------\n    -- Is_Path_Name_Case_Sensitive --"}, {"sha": "dc03396ee42f46f1eed9831b82a959dd4f7d7ca3", "filename": "gcc/ada/exp_ch6.adb", "status": "modified", "additions": 26, "deletions": 8, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c12e9fbefcf47363492098361c74d7fabdf9e3a/gcc%2Fada%2Fexp_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c12e9fbefcf47363492098361c74d7fabdf9e3a/gcc%2Fada%2Fexp_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch6.adb?ref=5c12e9fbefcf47363492098361c74d7fabdf9e3a", "patch": "@@ -8329,14 +8329,25 @@ package body Exp_Ch6 is\n    ---------------------------------\n \n    procedure Rewrite_Function_Call_For_C (N : Node_Id) is\n-      Func_Id   : constant Entity_Id  := Entity (Name (N));\n-      Func_Decl : constant Node_Id    := Unit_Declaration_Node (Func_Id);\n-      Par       : constant Node_Id    := Parent (N);\n-      Loc       : constant Source_Ptr := Sloc (Par);\n-      Proc_Id   : constant Entity_Id  := Defining_Entity (Next (Func_Decl));\n-      Actuals   : List_Id;\n+      Func_Id     : constant Entity_Id  := Entity (Name (N));\n+      Func_Decl   : constant Node_Id    := Unit_Declaration_Node (Func_Id);\n+      Par         : constant Node_Id    := Parent (N);\n+      Loc         : constant Source_Ptr := Sloc (Par);\n+      Proc_Id     : constant Entity_Id  := Defining_Entity (Next (Func_Decl));\n+      Actuals     : List_Id;\n+      Last_Formal : Entity_Id;\n \n    begin\n+      --  The actuals may be given by named associations, so the added\n+      --  actual that is the target of the return value of the call must\n+      --  be a named association as well, so we retrieve the name of the\n+      --  generated out_formal.\n+\n+      Last_Formal := First_Formal (Proc_Id);\n+      while Present (Next_Formal (Last_Formal)) loop\n+         Last_Formal := Next_Formal (Last_Formal);\n+      end loop;\n+\n       Actuals := Parameter_Associations (N);\n \n       --  The original function may lack parameters\n@@ -8353,7 +8364,10 @@ package body Exp_Ch6 is\n       --    Proc_Call (..., LHS);\n \n       if Nkind (Par) = N_Assignment_Statement then\n-         Append_To (Actuals, (Name (Par)));\n+         Append_To (Actuals,\n+           Make_Parameter_Association (Loc,\n+              Selector_Name => Make_Identifier (Loc, Chars (Last_Formal)),\n+               Explicit_Actual_Parameter => Name (Par)));\n          Rewrite (Par,\n            Make_Procedure_Call_Statement (Loc,\n              Name                   => New_Occurrence_Of (Proc_Id, Loc),\n@@ -8388,7 +8402,11 @@ package body Exp_Ch6 is\n             --  Generate:\n             --    Proc_Call (..., Temp);\n \n-            Append_To (Actuals, New_Occurrence_Of (Temp_Id, Loc));\n+            Append_To (Actuals,\n+              Make_Parameter_Association (Loc,\n+                 Selector_Name => Make_Identifier (Loc, Chars (Last_Formal)),\n+               Explicit_Actual_Parameter =>\n+                 New_Occurrence_Of (Temp_Id, Loc)));\n             Call :=\n               Make_Procedure_Call_Statement (Loc,\n                 Name                   => New_Occurrence_Of (Proc_Id, Loc),"}, {"sha": "f84a211b65ea3437ae2fdfbf2269bd0170bfb255", "filename": "gcc/ada/lib-xref.adb", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c12e9fbefcf47363492098361c74d7fabdf9e3a/gcc%2Fada%2Flib-xref.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c12e9fbefcf47363492098361c74d7fabdf9e3a/gcc%2Fada%2Flib-xref.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-xref.adb?ref=5c12e9fbefcf47363492098361c74d7fabdf9e3a", "patch": "@@ -66,7 +66,7 @@ package body Lib.Xref is\n \n       Loc : Source_Ptr;\n       --  Location of reference (Original_Location (Sloc field of N parameter\n-      --  to Generate_Reference). Set to No_Location for the case of a\n+      --  to Generate_Reference)). Set to No_Location for the case of a\n       --  defining occurrence.\n \n       Typ : Character;\n@@ -622,7 +622,7 @@ package body Lib.Xref is\n \n       --  Do not generate references if we are within a postcondition sub-\n       --  program, because the reference does not comes from source, and the\n-      --  pre-analysis of the aspect has already created an entry for the ali\n+      --  pre-analysis of the aspect has already created an entry for the ALI\n       --  file at the proper source location.\n \n       if Chars (Current_Scope) = Name_uPostconditions then\n@@ -1073,7 +1073,7 @@ package body Lib.Xref is\n             end if;\n \n             Add_Entry\n-              ((Ent      => Ent,\n+              ((Ent       => Ent,\n                 Loc       => Ref,\n                 Typ       => Actual_Typ,\n                 Eun       => Get_Code_Unit (Def),\n@@ -1120,7 +1120,7 @@ package body Lib.Xref is\n               and then In_Extended_Main_Source_Unit (N)\n             then\n                --  Handle case in which the full-view and partial-view of the\n-               --  first private entity are swapped\n+               --  first private entity are swapped.\n \n                declare\n                   First_Private : Entity_Id := First_Private_Entity (E);"}]}