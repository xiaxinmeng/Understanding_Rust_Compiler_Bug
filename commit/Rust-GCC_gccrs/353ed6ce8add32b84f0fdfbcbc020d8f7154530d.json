{"sha": "353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "node_id": "C_kwDOANBUbNoAKDM1M2VkNmNlOGFkZDMyYjg0ZjBmZGZiY2JjMDIwZDhmNzE1NDUzMGQ", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2022-10-27T10:49:47Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-10-27T10:49:47Z"}, "message": "Merge #1616 #1617\n\n1616: Apply 1559 master (remove system includes) r=CohenArthur a=CohenArthur\n\nFixes #1571 \n\n1617: Apply #1605 on master (fix lang spec) r=CohenArthur a=CohenArthur\n\nCo-authored-by: ibuclaw <ibuclaw@gdcproject.org>\r\n\r\nLet's still do this while we haven't resolved #1540 :)\r\n\r\nCloses #1609 \n\nCo-authored-by: Arthur Cohen <arthur.cohen@embecosm.com>", "tree": {"sha": "cfa2ca34a5f2ca62977bd8a2daed6b2989a0471f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cfa2ca34a5f2ca62977bd8a2daed6b2989a0471f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjWmJLCRBK7hj4Ov3rIwAAZyIIAKRihMY6NCzn1VZsXoQ0prwx\n+A2KT9wIJIkdBHBexEm+8ISjpcr9T9xLwyYW5DF3ftZNuaLUN0B/Kvf8d4GWYwgv\nbn2iOct+y5FlAM9IHTjwRzXPZ6sCU/VtKnXI7063A2c4bhk2O7CAv9QF2UBCUj+I\nuVVSlnuwu6UJADdsJ9qh82g7aIy0EIL01WS/TpvRryUDWV99E74FUcSSCfLqQbeb\n+cfQ0EIw8YjgWYFRAqq9bhTOrclK13ghNYBP+JZuQ0DWd00MNd0Ll8Ha3ibPZgSp\nSaMP3l3ZVVcfpuHshp+m4XMzPOCJHEJYAMVMGa0mNKfmQl1LQ5K6hw85Ocn4z7k=\n=sO4F\n-----END PGP SIGNATURE-----\n", "payload": "tree cfa2ca34a5f2ca62977bd8a2daed6b2989a0471f\nparent 4dbff3d0550fed53de385ff5a52859178f8940cc\nparent 259c384a97f7735da899b54c686585a60c41bed1\nparent 3f3b4a45eb90b5afdfd9d067fd9ea7969b5a69d6\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1666867787 +0000\ncommitter GitHub <noreply@github.com> 1666867787 +0000\n\nMerge #1616 #1617\n\n1616: Apply 1559 master (remove system includes) r=CohenArthur a=CohenArthur\n\nFixes #1571 \n\n1617: Apply #1605 on master (fix lang spec) r=CohenArthur a=CohenArthur\n\nCo-authored-by: ibuclaw <ibuclaw@gdcproject.org>\r\n\r\nLet's still do this while we haven't resolved #1540 :)\r\n\r\nCloses #1609 \n\nCo-authored-by: Arthur Cohen <arthur.cohen@embecosm.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4dbff3d0550fed53de385ff5a52859178f8940cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4dbff3d0550fed53de385ff5a52859178f8940cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4dbff3d0550fed53de385ff5a52859178f8940cc"}, {"sha": "259c384a97f7735da899b54c686585a60c41bed1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/259c384a97f7735da899b54c686585a60c41bed1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/259c384a97f7735da899b54c686585a60c41bed1"}, {"sha": "3f3b4a45eb90b5afdfd9d067fd9ea7969b5a69d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f3b4a45eb90b5afdfd9d067fd9ea7969b5a69d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f3b4a45eb90b5afdfd9d067fd9ea7969b5a69d6"}], "stats": {"total": 43, "additions": 14, "deletions": 29}, "files": [{"sha": "8f10396fe3b7c530b32e56df1ddb95b12e865e2b", "filename": "gcc/rust/Make-lang.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2FMake-lang.in?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -269,7 +269,7 @@ rust.uninstall:\n # Enable selftests for the rust frontend\n selftest-rust: s-selftest-rust\n \n-RUST_SELFTEST_FLAGS = -xrs $(SELFTEST_FLAGS)\n+RUST_SELFTEST_FLAGS = -xrust $(SELFTEST_FLAGS)\n RUST_SELFTEST_DEPS = rust1$(exeext) $(SELFTEST_DEPS)\n \n # Run the rust selftests"}, {"sha": "1e8a93d462fde0246a83dd055eb142e4d208d8aa", "filename": "gcc/rust/ast/rust-ast-full-test.cc", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Fast%2Frust-ast-full-test.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Fast%2Frust-ast-full-test.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fast%2Frust-ast-full-test.cc?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -17,11 +17,7 @@ You should have received a copy of the GNU General Public License\n along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n-// FIXME: This does not work on Windows\n-#include <string>\n-#include <unistd.h>\n-#include <memory>\n-\n+#include \"rust-system.h\"\n #include \"rust-ast-full.h\"\n #include \"rust-diagnostics.h\"\n #include \"rust-ast-visitor.h\""}, {"sha": "fe95ce133125797cce19a2fcfb8482afc03e32bb", "filename": "gcc/rust/ast/rust-macro.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Fast%2Frust-macro.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Fast%2Frust-macro.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fast%2Frust-macro.h?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -19,10 +19,10 @@\n #ifndef RUST_AST_MACRO_H\n #define RUST_AST_MACRO_H\n \n+#include \"rust-system.h\"\n #include \"rust-ast.h\"\n #include \"rust-ast-fragment.h\"\n #include \"rust-location.h\"\n-#include <string>\n \n namespace Rust {\n namespace AST {"}, {"sha": "eed28b1eb06ec202aacabe6a45bffb45bfab6431", "filename": "gcc/rust/lang-specs.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Flang-specs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Flang-specs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Flang-specs.h?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -20,7 +20,7 @@\n /* This is the contribution to the `default_compilers' array in gcc.cc\n    for the Rust language.  */\n \n-{\".rs\", \"@rs\", 0, 1, 0},\n-  {\"@rs\",\n+{\".rs\", \"@rust\", 0, 1, 0},\n+  {\"@rust\",\n    \"rust1 %i %(cc1_options) %{I*} %{L*} %D %{!fsyntax-only:%(invoke_as)}\", 0, 1,\n    0},"}, {"sha": "1a9f0ca7a2112f6847e07b6577396ed9a020d51a", "filename": "gcc/rust/lex/rust-codepoint.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Flex%2Frust-codepoint.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Flex%2Frust-codepoint.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Flex%2Frust-codepoint.h?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -19,7 +19,7 @@\n #ifndef RUST_CODEPOINT_H\n #define RUST_CODEPOINT_H\n \n-#include <string>\n+#include \"rust-system.h\"\n \n namespace Rust {\n struct Codepoint"}, {"sha": "82949f5fe5f69f1b032d125782b97706f2654c1d", "filename": "gcc/rust/lex/rust-lex.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Flex%2Frust-lex.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Flex%2Frust-lex.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Flex%2Frust-lex.cc?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -16,10 +16,9 @@\n // along with GCC; see the file COPYING3.  If not see\n // <http://www.gnu.org/licenses/>.\n \n+#include \"rust-system.h\"\n #include \"rust-lex.h\"\n-\n-#include \"rust-system.h\"      // for rust_assert and rust_unreachable\n-#include \"rust-diagnostics.h\" // for rust_error_at\n+#include \"rust-diagnostics.h\"\n #include \"rust-linemap.h\"\n #include \"rust-session-manager.h\"\n #include \"safe-ctype.h\""}, {"sha": "6aef8cc1c678325393388a886c5f2a9eee508d33", "filename": "gcc/rust/lex/rust-token.cc", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Flex%2Frust-token.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Flex%2Frust-token.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Flex%2Frust-token.cc?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -17,8 +17,7 @@\n // <http://www.gnu.org/licenses/>.\n \n #include \"rust-token.h\"\n-\n-#include \"rust-diagnostics.h\" // for error_at\n+#include \"rust-diagnostics.h\"\n \n namespace Rust {\n // Hackily defined way to get token description for enum value using x-macros"}, {"sha": "8f5be33a804b753b074dd25361cba78f6c5c702e", "filename": "gcc/rust/lex/rust-token.h", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Flex%2Frust-token.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Flex%2Frust-token.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Flex%2Frust-token.h?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -19,15 +19,10 @@\n #ifndef RUST_TOKEN_H\n #define RUST_TOKEN_H\n \n+#include \"rust-system.h\"\n #include \"rust-linemap.h\"\n #include \"rust-codepoint.h\"\n \n-// order: config, system, coretypes, input\n-#include \"config.h\"\n-#include \"system.h\"\n-#include \"coretypes.h\"\n-#include \"input.h\"\n-\n namespace Rust {\n // \"Primitive core types\" in Rust - the different int and float types, as well\n // as some others"}, {"sha": "0d64016f86dca820ed3145cf35a8637b0a2a8446", "filename": "gcc/rust/parse/rust-cfg-parser.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Fparse%2Frust-cfg-parser.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Fparse%2Frust-cfg-parser.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fparse%2Frust-cfg-parser.h?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -17,9 +17,7 @@ along with GCC; see the file COPYING3.  If not see\n #ifndef RUST_CFG_PARSER_H\n #define RUST_CFG_PARSER_H\n \n-#include \"config.h\"\n #include \"rust-system.h\"\n-#include \"coretypes.h\"\n \n namespace Rust {\n /**"}, {"sha": "e1c0a924c6ac940f8c4eadd659a4b06f1e8a234a", "filename": "gcc/rust/rust-object-export.cc", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Frust-object-export.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Frust-object-export.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Frust-object-export.cc?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -17,8 +17,7 @@\n    along with GCC; see the file COPYING3.  If not see\n    <http://www.gnu.org/licenses/>.  */\n \n-#include \"config.h\"\n-#include \"system.h\"\n+#include \"rust-system.h\"\n #include \"coretypes.h\"\n #include \"target.h\"\n #include \"tree.h\""}, {"sha": "64ed042324cc3aef623ccb509a6c421e5e8145db", "filename": "gcc/rust/util/rust-attributes.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Futil%2Frust-attributes.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Futil%2Frust-attributes.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Futil%2Frust-attributes.cc?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -16,11 +16,11 @@\n // along with GCC; see the file COPYING3.  If not see\n // <http://www.gnu.org/licenses/>.\n \n+#include \"rust-system.h\"\n #include \"rust-attributes.h\"\n #include \"rust-ast.h\"\n #include \"rust-ast-full.h\"\n #include \"rust-diagnostics.h\"\n-#include \"safe-ctype.h\"\n \n namespace Rust {\n namespace Analysis {"}, {"sha": "0d190fe8c434c288632b2011a157536efee13de6", "filename": "gcc/rust/util/rust-make-unique.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Futil%2Frust-make-unique.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Futil%2Frust-make-unique.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Futil%2Frust-make-unique.h?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -19,7 +19,7 @@\n #ifndef RUST_MAKE_UNIQUE_H\n #define RUST_MAKE_UNIQUE_H\n \n-#include <memory>\n+#include \"rust-system.h\"\n \n namespace Rust {\n "}, {"sha": "43fa175fa402eaf5d2a9a116f01628ca272324ce", "filename": "gcc/rust/util/rust-optional-test.cc", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Futil%2Frust-optional-test.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353ed6ce8add32b84f0fdfbcbc020d8f7154530d/gcc%2Frust%2Futil%2Frust-optional-test.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Futil%2Frust-optional-test.cc?ref=353ed6ce8add32b84f0fdfbcbc020d8f7154530d", "patch": "@@ -16,9 +16,8 @@\n // along with GCC; see the file COPYING3.  If not see\n // <http://www.gnu.org/licenses/>.\n \n+#include \"rust-system.h\"\n #include \"rust-optional.h\"\n-\n-#include \"config.h\"\n #include \"selftest.h\"\n \n #if CHECKING_P"}]}