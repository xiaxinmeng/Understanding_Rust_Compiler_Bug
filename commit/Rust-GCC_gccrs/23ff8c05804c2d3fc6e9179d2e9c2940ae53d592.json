{"sha": "23ff8c05804c2d3fc6e9179d2e9c2940ae53d592", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjNmZjhjMDU4MDRjMmQzZmM2ZTkxNzlkMmU5YzI5NDBhZTUzZDU5Mg==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2019-11-16T09:51:09Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2019-11-16T09:51:09Z"}, "message": "Fix nonspec_time when there is no cached value.\n\n\t* ipa-inline.h (do_estimate_edge_time): Add nonspec_time\n\tparameter.\n\t(estimate_edge_time): Use it.\n\t* ipa-inline-analysis.c (do_estimate_edge_time): Add\n\tret_nonspec_time parameter.\n\nFrom-SVN: r278333", "tree": {"sha": "eb076794121af38d2f19d07062e9a403f264d6e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb076794121af38d2f19d07062e9a403f264d6e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/23ff8c05804c2d3fc6e9179d2e9c2940ae53d592", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23ff8c05804c2d3fc6e9179d2e9c2940ae53d592", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23ff8c05804c2d3fc6e9179d2e9c2940ae53d592", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23ff8c05804c2d3fc6e9179d2e9c2940ae53d592/comments", "author": null, "committer": null, "parents": [{"sha": "6d1402f0edf15480a1eb37141bc165cab5bca508", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d1402f0edf15480a1eb37141bc165cab5bca508", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d1402f0edf15480a1eb37141bc165cab5bca508"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "db51b839b54c18c917d5c404825023186593aa3d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23ff8c05804c2d3fc6e9179d2e9c2940ae53d592/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23ff8c05804c2d3fc6e9179d2e9c2940ae53d592/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=23ff8c05804c2d3fc6e9179d2e9c2940ae53d592", "patch": "@@ -1,3 +1,11 @@\n+2019-11-15  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* ipa-inline.h (do_estimate_edge_time): Add nonspec_time\n+\tparameter.\n+\t(estimate_edge_time): Use it.\n+\t* ipa-inline-analysis.c (do_estimate_edge_time): Add\n+\tret_nonspec_time parameter.\n+\n 2019-11-15  Szabolcs Nagy  <szabolcs.nagy@arm.com>\n \n \t* config/m68k/linux.h (MUSL_DYNAMIC_LINKER): Define."}, {"sha": "d550d30dc20d82831a1b8a32e59bb5051b213003", "filename": "gcc/ipa-inline-analysis.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23ff8c05804c2d3fc6e9179d2e9c2940ae53d592/gcc%2Fipa-inline-analysis.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23ff8c05804c2d3fc6e9179d2e9c2940ae53d592/gcc%2Fipa-inline-analysis.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline-analysis.c?ref=23ff8c05804c2d3fc6e9179d2e9c2940ae53d592", "patch": "@@ -179,7 +179,7 @@ simple_edge_hints (struct cgraph_edge *edge)\n    size, since we always need both metrics eventually.  */\n \n sreal\n-do_estimate_edge_time (struct cgraph_edge *edge)\n+do_estimate_edge_time (struct cgraph_edge *edge, sreal *ret_nonspec_time)\n {\n   sreal time, nonspec_time;\n   int size;\n@@ -275,6 +275,8 @@ do_estimate_edge_time (struct cgraph_edge *edge)\n       hints |= simple_edge_hints (edge);\n       entry->hints = hints + 1;\n     }\n+  if (ret_nonspec_time)\n+    *ret_nonspec_time = nonspec_time;\n   return time;\n }\n "}, {"sha": "626f264d5d0892976b6f611cfafaab813235e8f0", "filename": "gcc/ipa-inline.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23ff8c05804c2d3fc6e9179d2e9c2940ae53d592/gcc%2Fipa-inline.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23ff8c05804c2d3fc6e9179d2e9c2940ae53d592/gcc%2Fipa-inline.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline.h?ref=23ff8c05804c2d3fc6e9179d2e9c2940ae53d592", "patch": "@@ -46,7 +46,7 @@ int estimate_size_after_inlining (struct cgraph_node *, struct cgraph_edge *);\n int estimate_growth (struct cgraph_node *);\n bool growth_positive_p (struct cgraph_node *, struct cgraph_edge *, int);\n int do_estimate_edge_size (struct cgraph_edge *edge);\n-sreal do_estimate_edge_time (struct cgraph_edge *edge);\n+sreal do_estimate_edge_time (struct cgraph_edge *edge, sreal *nonspec_time = NULL);\n ipa_hints do_estimate_edge_hints (struct cgraph_edge *edge);\n void reset_node_cache (struct cgraph_node *node);\n void initialize_growth_caches ();\n@@ -99,7 +99,7 @@ estimate_edge_time (struct cgraph_edge *edge, sreal *nonspec_time = NULL)\n   if (edge_growth_cache == NULL\n       || (entry = edge_growth_cache->get (edge)) == NULL\n       || entry->time == 0)\n-    return do_estimate_edge_time (edge);\n+    return do_estimate_edge_time (edge, nonspec_time);\n   if (nonspec_time)\n     *nonspec_time = edge_growth_cache->get (edge)->nonspec_time;\n   return entry->time;"}]}