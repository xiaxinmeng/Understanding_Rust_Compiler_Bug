{"sha": "cffd0d74725f04fa7c74a3a3576c5c9b745b1a82", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2ZmZDBkNzQ3MjVmMDRmYTdjNzRhM2EzNTc2YzVjOWI3NDViMWE4Mg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-03-21T07:55:29Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-03-21T07:55:29Z"}, "message": "entered into RCS\n\nFrom-SVN: r543", "tree": {"sha": "85a724c6e4ae288cd14a3c0ff012063cc4154efd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/85a724c6e4ae288cd14a3c0ff012063cc4154efd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cffd0d74725f04fa7c74a3a3576c5c9b745b1a82", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cffd0d74725f04fa7c74a3a3576c5c9b745b1a82", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cffd0d74725f04fa7c74a3a3576c5c9b745b1a82", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cffd0d74725f04fa7c74a3a3576c5c9b745b1a82/comments", "author": null, "committer": null, "parents": [{"sha": "3f5cfed673179e84a8e88d454d099773489a0c7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f5cfed673179e84a8e88d454d099773489a0c7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f5cfed673179e84a8e88d454d099773489a0c7b"}], "stats": {"total": 57, "additions": 29, "deletions": 28}, "files": [{"sha": "9fcef3d27cfc5b4e817385376fd5b7097c52c4b2", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 29, "deletions": 28, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cffd0d74725f04fa7c74a3a3576c5c9b745b1a82/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cffd0d74725f04fa7c74a3a3576c5c9b745b1a82/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=cffd0d74725f04fa7c74a3a3576c5c9b745b1a82", "patch": "@@ -112,10 +112,10 @@ output_function_prologue (stream, size)\n       else\n \t{\n #ifdef MOTOROLA\n-\t  asm_fprintf (stream, \"\\tlink.w %s,%I0\\n\\tadd.l %0I%d,%Rsp\\n\",\n+\t  asm_fprintf (stream, \"\\tlink.w %s,%0I0\\n\\tadd.l %0I%d,%Rsp\\n\",\n \t\t       reg_names[FRAME_POINTER_REGNUM], -fsize);\n #else\n-\t  asm_fprintf (stream, \"\\tlink %s,%I0\\n\\taddl %0I%d,%Rsp\\n\",\n+\t  asm_fprintf (stream, \"\\tlink %s,%0I0\\n\\taddl %0I%d,%Rsp\\n\",\n \t\t       reg_names[FRAME_POINTER_REGNUM], -fsize);\n #endif\n \t}\n@@ -159,9 +159,9 @@ output_function_prologue (stream, size)\n   if ((mask & 0xff) != 0)\n     {\n #ifdef MOTOROLA\n-      asm_fprintf (stream, \"\\tfmovm %I0x%x,-(%Rsp)\\n\", mask & 0xff);\n+      asm_fprintf (stream, \"\\tfmovm %0I0x%x,-(%Rsp)\\n\", mask & 0xff);\n #else\n-      asm_fprintf (stream, \"\\tfmovem %I0x%x,%Rsp@-\\n\", mask & 0xff);\n+      asm_fprintf (stream, \"\\tfmovem %0I0x%x,%Rsp@-\\n\", mask & 0xff);\n #endif\n     }\n   mask = 0;\n@@ -199,21 +199,21 @@ output_function_prologue (stream, size)\n   else if (mask)\n     {\n #ifdef MOTOROLA\n-      asm_fprintf (stream, \"\\tmovm.l %I0x%x,-(%Rsp)\\n\", mask);\n+      asm_fprintf (stream, \"\\tmovm.l %0I0x%x,-(%Rsp)\\n\", mask);\n #else\n-      asm_fprintf (stream, \"\\tmoveml %I0x%x,%Rsp@-\\n\", mask);\n+      asm_fprintf (stream, \"\\tmoveml %0I0x%x,%Rsp@-\\n\", mask);\n #endif\n     }\n   if (flag_pic && current_function_uses_pic_offset_table)\n     {\n #ifdef MOTOROLA\n-      asm_fprintf (stream, \"\\t%Omove.l %I__GLOBAL_OFFSET_TABLE_, %s\\n\",\n+      asm_fprintf (stream, \"\\t%Omove.l %0I__GLOBAL_OFFSET_TABLE_, %s\\n\",\n \t\t   reg_names[PIC_OFFSET_TABLE_REGNUM]);\n       asm_fprintf (stream, \"\\tlea.l (%Rpc,%s.l),%s\\n\",\n \t\t   reg_names[PIC_OFFSET_TABLE_REGNUM],\n \t\t   reg_names[PIC_OFFSET_TABLE_REGNUM]);\n #else\n-      asm_fprintf (stream, \"\\tmovel %I__GLOBAL_OFFSET_TABLE_, %s\\n\",\n+      asm_fprintf (stream, \"\\tmovel %0I__GLOBAL_OFFSET_TABLE_, %s\\n\",\n \t\t   reg_names[PIC_OFFSET_TABLE_REGNUM]);\n       asm_fprintf (stream, \"\\tlea %Rpc@(0,%s:l),%s\\n\",\n \t\t   reg_names[PIC_OFFSET_TABLE_REGNUM],\n@@ -268,7 +268,12 @@ output_function_epilogue (stream, size)\n   if (GET_CODE (insn) == NOTE)\n     insn = prev_nonnote_insn (insn);\n   if (insn && GET_CODE (insn) == BARRIER)\n-    return;\n+    {\n+      /* Output just a no-op so that debuggers don't get confused\n+\t about which function the pc is in at this address.  */\n+      asm_fprintf (stream, \"\\tnop\\n\");\n+      return;\n+    }\n \n #ifdef FUNCTION_EXTRA_EPILOGUE\n   FUNCTION_EXTRA_EPILOGUE (stream, size);\n@@ -366,33 +371,33 @@ output_function_epilogue (stream, size)\n       if (big)\n \t{\n #ifdef MOTOROLA\n-\t  asm_fprintf (stream, \"\\tmovm.l -%d(%s,%Ra0.l),%I0x%x\\n\",\n+\t  asm_fprintf (stream, \"\\tmovm.l -%d(%s,%Ra0.l),%0I0x%x\\n\",\n \t\t       offset + fsize,\n \t\t       reg_names[FRAME_POINTER_REGNUM],\n \t\t       mask);\n #else\n-\t  asm_fprintf (stream, \"\\tmoveml %s@(-%d,%Ra0:l),%I0x%x\\n\",\n+\t  asm_fprintf (stream, \"\\tmoveml %s@(-%d,%Ra0:l),%0I0x%x\\n\",\n \t\t       reg_names[FRAME_POINTER_REGNUM],\n \t\t       offset + fsize, mask);\n #endif\n \t}\n       else if (! frame_pointer_needed)\n \t{\n #ifdef MOTOROLA\n-\t  asm_fprintf (stream, \"\\tmovm.l (%Rsp)+,%I0x%x\\n\", mask);\n+\t  asm_fprintf (stream, \"\\tmovm.l (%Rsp)+,%0I0x%x\\n\", mask);\n #else\n-\t  asm_fprintf (stream, \"\\tmoveml %Rsp@+,%I0x%x\\n\", mask);\n+\t  asm_fprintf (stream, \"\\tmoveml %Rsp@+,%0I0x%x\\n\", mask);\n #endif\n \t}\n       else\n \t{\n #ifdef MOTOROLA\n-\t  asm_fprintf (stream, \"\\tmovm.l -%d(%s),%I0x%x\\n\",\n+\t  asm_fprintf (stream, \"\\tmovm.l -%d(%s),%0I0x%x\\n\",\n \t\t       offset + fsize,\n \t\t       reg_names[FRAME_POINTER_REGNUM],\n \t\t       mask);\n #else\n-\t  asm_fprintf (stream, \"\\tmoveml %s@(-%d),%I0x%x\\n\",\n+\t  asm_fprintf (stream, \"\\tmoveml %s@(-%d),%0I0x%x\\n\",\n \t\t       reg_names[FRAME_POINTER_REGNUM],\n \t\t       offset + fsize, mask);\n #endif\n@@ -403,33 +408,33 @@ output_function_epilogue (stream, size)\n       if (big)\n \t{\n #ifdef MOTOROLA\n-\t  asm_fprintf (stream, \"\\tfmovm -%d(%s,%Ra0.l),%I0x%x\\n\",\n+\t  asm_fprintf (stream, \"\\tfmovm -%d(%s,%Ra0.l),%0I0x%x\\n\",\n \t\t       foffset + fsize,\n \t\t       reg_names[FRAME_POINTER_REGNUM],\n \t\t       fmask);\n #else\n-\t  asm_fprintf (stream, \"\\tfmovem %s@(-%d,%Ra0:l),%I0x%x\\n\",\n+\t  asm_fprintf (stream, \"\\tfmovem %s@(-%d,%Ra0:l),%0I0x%x\\n\",\n \t\t       reg_names[FRAME_POINTER_REGNUM],\n \t\t       foffset + fsize, fmask);\n #endif\n \t}\n       else if (! frame_pointer_needed)\n \t{\n #ifdef MOTOROLA\n-\t  asm_fprintf (stream, \"\\tfmovm (%Rsp)+,%I0x%x\\n\", fmask);\n+\t  asm_fprintf (stream, \"\\tfmovm (%Rsp)+,%0I0x%x\\n\", fmask);\n #else\n-\t  asm_fprintf (stream, \"\\tfmovem %Rsp@+,%I0x%x\\n\", fmask);\n+\t  asm_fprintf (stream, \"\\tfmovem %Rsp@+,%0I0x%x\\n\", fmask);\n #endif\n \t}\n       else\n \t{\n #ifdef MOTOROLA\n-\t  asm_fprintf (stream, \"\\tfmovm -%d(%s),%I0x%x\\n\",\n+\t  asm_fprintf (stream, \"\\tfmovm -%d(%s),%0I0x%x\\n\",\n \t\t       foffset + fsize,\n \t\t       reg_names[FRAME_POINTER_REGNUM],\n \t\t       fmask);\n #else\n-\t  asm_fprintf (stream, \"\\tfmovem %s@(-%d),%I0x%x\\n\",\n+\t  asm_fprintf (stream, \"\\tfmovem %s@(-%d),%0I0x%x\\n\",\n \t\t       reg_names[FRAME_POINTER_REGNUM],\n \t\t       foffset + fsize, fmask);\n #endif\n@@ -1525,7 +1530,7 @@ print_operand (file, op, letter)\n     }\n   else if (letter == '#')\n     {\n-      asm_fprintf (file, \"%I\");\n+      asm_fprintf (file, \"%0I\");\n     }\n   else if (letter == '-')\n     {\n@@ -1553,11 +1558,7 @@ print_operand (file, op, letter)\n     }\n   else if (letter == '!')\n     {\n-#ifdef MOTOROLA\n-      asm_fprintf (file, \"(%Rcc)\");\n-#else\n-      asm_fprintf (file, \"%Rcc\");\n-#endif\n+      asm_fprintf (file, \"%Rfpcr\");\n     }\n   else if (letter == '$')\n     {\n@@ -1623,7 +1624,7 @@ print_operand (file, op, letter)\n     }\n   else\n     {\n-      asm_fprintf (file, \"%I\"); output_addr_const (file, op);\n+      asm_fprintf (file, \"%0I\"); output_addr_const (file, op);\n     }\n }\n "}]}