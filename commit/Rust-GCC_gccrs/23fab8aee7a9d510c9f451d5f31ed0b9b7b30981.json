{"sha": "23fab8aee7a9d510c9f451d5f31ed0b9b7b30981", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjNmYWI4YWVlN2E5ZDUxMGM5ZjQ1MWQ1ZjMxZWQwYjliN2IzMDk4MQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2016-01-10T09:12:03Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2016-01-10T09:12:03Z"}, "message": "Only allow single exit phi for reduction in try_create_reduction_list\n\n2016-01-10  Tom de Vries  <tom@codesourcery.com>\n\n\tPR tree-optimization/69039\n\t* tree-parloops.c (try_create_reduction_list): Only allow single exit\n\tphi for reduction.\n\n\t* gcc.dg/autopar/pr69039.c: New test.\n\nFrom-SVN: r232196", "tree": {"sha": "29b0150b3f71ebf26700dd5944e72b121d533cb0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/29b0150b3f71ebf26700dd5944e72b121d533cb0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981/comments", "author": null, "committer": null, "parents": [{"sha": "34b85c643726db162b0abcf1b7403cd1a0c4553d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34b85c643726db162b0abcf1b7403cd1a0c4553d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34b85c643726db162b0abcf1b7403cd1a0c4553d"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "21b47fea57924dc7ece6a3be398327a70c3bb01d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=23fab8aee7a9d510c9f451d5f31ed0b9b7b30981", "patch": "@@ -1,3 +1,9 @@\n+2016-01-10  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR tree-optimization/69039\n+\t* tree-parloops.c (try_create_reduction_list): Only allow single exit\n+\tphi for reduction.\n+\n 2016-01-09  John David Anglin  <danglin@gcc.gnu.org>\n \n \tPR middle-end/68743"}, {"sha": "198f26c3cab4c389c8c579a0aee250fc9caf3d58", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=23fab8aee7a9d510c9f451d5f31ed0b9b7b30981", "patch": "@@ -1,3 +1,8 @@\n+2016-01-10  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR tree-optimization/69039\n+\t* gcc.dg/autopar/pr69039.c: New test.\n+\n 2016-01-09  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/69113"}, {"sha": "556f70004e8cd78d884ba85b0af27ae38f998bec", "filename": "gcc/testsuite/gcc.dg/autopar/pr69039.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr69039.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr69039.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr69039.c?ref=23fab8aee7a9d510c9f451d5f31ed0b9b7b30981", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -ftree-parallelize-loops=2\" } */\n+\n+unsigned int b;\n+\n+unsigned int\n+fn1 (unsigned int d)\n+{\n+  int i;\n+\n+  for (i = 0; i < 1000; i++)\n+    b |= d;\n+\n+  return b;\n+}"}, {"sha": "394aba8d121f68b6afdd79bb1ba85bb412e01db9", "filename": "gcc/tree-parloops.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981/gcc%2Ftree-parloops.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23fab8aee7a9d510c9f451d5f31ed0b9b7b30981/gcc%2Ftree-parloops.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-parloops.c?ref=23fab8aee7a9d510c9f451d5f31ed0b9b7b30981", "patch": "@@ -2595,6 +2595,14 @@ try_create_reduction_list (loop_p loop,\n \t\t\t \"  FAILED: it is not a part of reduction.\\n\");\n \t      return false;\n \t    }\n+\t  if (red->keep_res != NULL)\n+\t    {\n+\t      if (dump_file && (dump_flags & TDF_DETAILS))\n+\t\tfprintf (dump_file,\n+\t\t\t \"  FAILED: reduction has multiple exit phis.\\n\");\n+\t      return false;\n+\t    }\n+\t  red->keep_res = phi;\n \t  if (dump_file && (dump_flags & TDF_DETAILS))\n \t    {\n \t      fprintf (dump_file, \"reduction phi is  \");"}]}