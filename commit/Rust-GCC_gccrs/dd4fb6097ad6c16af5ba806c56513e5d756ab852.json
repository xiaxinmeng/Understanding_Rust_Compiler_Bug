{"sha": "dd4fb6097ad6c16af5ba806c56513e5d756ab852", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ0ZmI2MDk3YWQ2YzE2YWY1YmE4MDZjNTY1MTNlNWQ3NTZhYjg1Mg==", "commit": {"author": {"name": "Trevor Saunders", "email": "tbsaunde+gcc@tbsaunde.org", "date": "2015-11-15T00:18:01Z"}, "committer": {"name": "Trevor Saunders", "email": "tbsaunde@gcc.gnu.org", "date": "2015-11-15T00:18:01Z"}, "message": "always define EH_RETURN_HANDLER_RTX\n\ngcc/ChangeLog:\n\n2015-11-14  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n\n\t* defaults.h (EH_RETURN_HANDLER_RTX): New default definition.\n\t* df-scan.c (df_get_exit_block_use_set): Adjust.\n\t* except.c (expand_eh_return): Likewise.\n\nFrom-SVN: r230392", "tree": {"sha": "188a369c272c1a7ac81ed20762dcfe4179b01bc7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/188a369c272c1a7ac81ed20762dcfe4179b01bc7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd4fb6097ad6c16af5ba806c56513e5d756ab852", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd4fb6097ad6c16af5ba806c56513e5d756ab852", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd4fb6097ad6c16af5ba806c56513e5d756ab852", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd4fb6097ad6c16af5ba806c56513e5d756ab852/comments", "author": null, "committer": null, "parents": [{"sha": "ab7b56730bc193083d0a778b79ca5be0390e17d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab7b56730bc193083d0a778b79ca5be0390e17d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab7b56730bc193083d0a778b79ca5be0390e17d5"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "5b3bf501ad0229a0df3e2d87a575af75da9dd3ee", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd4fb6097ad6c16af5ba806c56513e5d756ab852/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd4fb6097ad6c16af5ba806c56513e5d756ab852/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dd4fb6097ad6c16af5ba806c56513e5d756ab852", "patch": "@@ -1,3 +1,9 @@\n+2015-11-14  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n+\n+\t* defaults.h (EH_RETURN_HANDLER_RTX): New default definition.\n+\t* df-scan.c (df_get_exit_block_use_set): Adjust.\n+\t* except.c (expand_eh_return): Likewise.\n+\n 2015-11-14  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n \n \t* config/i386/i386.h (TARGET_PECOFF): Remove define."}, {"sha": "0f1c713c889d87d87896a62fd55c6c15b02b0aaa", "filename": "gcc/defaults.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd4fb6097ad6c16af5ba806c56513e5d756ab852/gcc%2Fdefaults.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd4fb6097ad6c16af5ba806c56513e5d756ab852/gcc%2Fdefaults.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdefaults.h?ref=dd4fb6097ad6c16af5ba806c56513e5d756ab852", "patch": "@@ -1305,6 +1305,10 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #define TARGET_PECOFF 0\n #endif\n \n+#ifndef EH_RETURN_HANDLER_RTX\n+#define EH_RETURN_HANDLER_RTX NULL\n+#endif\n+\n #ifdef GCC_INSN_FLAGS_H\n /* Dependent default target macro definitions\n "}, {"sha": "a7359259d33e648bf60b983bcf2d674052f850c4", "filename": "gcc/df-scan.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd4fb6097ad6c16af5ba806c56513e5d756ab852/gcc%2Fdf-scan.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd4fb6097ad6c16af5ba806c56513e5d756ab852/gcc%2Fdf-scan.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdf-scan.c?ref=dd4fb6097ad6c16af5ba806c56513e5d756ab852", "patch": "@@ -3714,15 +3714,13 @@ df_get_exit_block_use_set (bitmap exit_block_uses)\n     }\n #endif\n \n-#ifdef EH_RETURN_HANDLER_RTX\n   if ((!targetm.have_epilogue () || ! epilogue_completed)\n       && crtl->calls_eh_return)\n     {\n       rtx tmp = EH_RETURN_HANDLER_RTX;\n       if (tmp && REG_P (tmp))\n \tdf_mark_reg (tmp, exit_block_uses);\n     }\n-#endif\n \n   /* Mark function return value.  */\n   diddle_return_value (df_mark_reg, (void*) exit_block_uses);"}, {"sha": "1a41a34cd0409f8b024af817aa414c829f9e59a7", "filename": "gcc/except.c", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd4fb6097ad6c16af5ba806c56513e5d756ab852/gcc%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd4fb6097ad6c16af5ba806c56513e5d756ab852/gcc%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexcept.c?ref=dd4fb6097ad6c16af5ba806c56513e5d756ab852", "patch": "@@ -2255,11 +2255,10 @@ expand_eh_return (void)\n     emit_insn (targetm.gen_eh_return (crtl->eh.ehr_handler));\n   else\n     {\n-#ifdef EH_RETURN_HANDLER_RTX\n-      emit_move_insn (EH_RETURN_HANDLER_RTX, crtl->eh.ehr_handler);\n-#else\n-      error (\"__builtin_eh_return not supported on this target\");\n-#endif\n+      if (rtx handler = EH_RETURN_HANDLER_RTX)\n+\temit_move_insn (handler, crtl->eh.ehr_handler);\n+      else\n+\terror (\"__builtin_eh_return not supported on this target\");\n     }\n \n   emit_label (around_label);"}]}