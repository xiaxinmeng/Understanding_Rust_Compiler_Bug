{"sha": "771ce78ea0c1c51c2fe1579dea950d40a1b8028d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzcxY2U3OGVhMGMxYzUxYzJmZTE1NzlkZWE5NTBkNDBhMWI4MDI4ZA==", "commit": {"author": {"name": "Simon Baldwin", "email": "simonb@google.com", "date": "2008-08-04T15:09:56Z"}, "committer": {"name": "Simon Baldwin", "email": "simonb@gcc.gnu.org", "date": "2008-08-04T15:09:56Z"}, "message": "re PR c++/36999 (Erroneous \"declaration 'class ...' does not declare anything\" warnings possible)\n\n        PR c++/36999\n        * parser.c (cp_parser_elaborated_type_specifier): Warn only when\n        the declaration's id is followed by a semicolon.\n\n\t* g++.dg/warn/pr36999.C: New.\n\nFrom-SVN: r138633", "tree": {"sha": "8cb01afe7fc8381db4660b4397422f3d4d566d0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8cb01afe7fc8381db4660b4397422f3d4d566d0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/771ce78ea0c1c51c2fe1579dea950d40a1b8028d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/771ce78ea0c1c51c2fe1579dea950d40a1b8028d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/771ce78ea0c1c51c2fe1579dea950d40a1b8028d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/771ce78ea0c1c51c2fe1579dea950d40a1b8028d/comments", "author": null, "committer": null, "parents": [{"sha": "6fc3c2b2c42c5d5a177867aa5390f054d7d8a8a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fc3c2b2c42c5d5a177867aa5390f054d7d8a8a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fc3c2b2c42c5d5a177867aa5390f054d7d8a8a8"}], "stats": {"total": 53, "additions": 52, "deletions": 1}, "files": [{"sha": "c40b9894e4351b4734c8ee8664081ca0bd3e3cc6", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/771ce78ea0c1c51c2fe1579dea950d40a1b8028d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/771ce78ea0c1c51c2fe1579dea950d40a1b8028d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=771ce78ea0c1c51c2fe1579dea950d40a1b8028d", "patch": "@@ -1,3 +1,9 @@\n+2008-08-04  Simon Baldwin  <simonb@google.com>\n+\n+\tPR c++/36999\n+\t* parser.c (cp_parser_elaborated_type_specifier): Warn only when\n+\tthe declaration's id is followed by a semicolon.\n+\n 2008-07-31  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/36405"}, {"sha": "76adb633ed7639cb6bc63e704644bd1be3f99b4e", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/771ce78ea0c1c51c2fe1579dea950d40a1b8028d/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/771ce78ea0c1c51c2fe1579dea950d40a1b8028d/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=771ce78ea0c1c51c2fe1579dea950d40a1b8028d", "patch": "@@ -11516,7 +11516,7 @@ cp_parser_elaborated_type_specifier (cp_parser* parser,\n              caught elsewhere in parsing.  Those that are pointless arrive\n              here.  */\n \n-          if (cp_parser_declares_only_class_p (parser)\n+          if (cp_lexer_next_token_is (parser->lexer, CPP_SEMICOLON)\n               && !is_friend && !processing_explicit_instantiation)\n             warning (0, \"declaration %qD does not declare anything\", decl);\n "}, {"sha": "2803cfedfed2adc1bdbd829f33838cb411423ea3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/771ce78ea0c1c51c2fe1579dea950d40a1b8028d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/771ce78ea0c1c51c2fe1579dea950d40a1b8028d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=771ce78ea0c1c51c2fe1579dea950d40a1b8028d", "patch": "@@ -1,3 +1,8 @@\n+2008-08-04  Simon Baldwin  <simonb@google.com>\n+\n+\tPR c++/36999\n+\t* g++.dg/warn/pr36999.C: New.\n+\n 2008-08-04  Arnaud Charlet  <charlet@adacore.com>\n \n \t* gnat.dg/bip_aggregate_bug.adb: New test."}, {"sha": "ce2286efcf4fd721f2d7c30f729d4379dc432a00", "filename": "gcc/testsuite/g++.dg/warn/pr36999.C", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/771ce78ea0c1c51c2fe1579dea950d40a1b8028d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr36999.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/771ce78ea0c1c51c2fe1579dea950d40a1b8028d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr36999.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr36999.C?ref=771ce78ea0c1c51c2fe1579dea950d40a1b8028d", "patch": "@@ -0,0 +1,40 @@\n+/* PR36999: Erroneous \"does not declare anything\" warnings.  */\n+/* { dg-do compile } */\n+\n+class C1 {\n+ public: class C2 { };\n+};\n+\n+void cf1 (class C1::C2, void*);  // { dg-bogus \"does not declare anything\" }\n+void cf2 (void*, class C1::C2);\n+void cf3 (C1::C2, void*);\n+\n+namespace N {\n+\n+enum E1 { foo }; \n+enum E2 { bar }; \n+\n+template <class X>\n+class TC1 { };\n+\n+template <class T, class U>\n+class TC2 : public TC1<T> { };\n+\n+}\n+\n+void\n+tcf1 (N::TC2<enum N::E1, void*> *arg1,  // { dg-bogus \"does not declare anything\" }\n+      N::TC2<void*, enum N::E1> *arg2,\n+      N::TC2<N::E1, void*> *arg3)\n+{\n+}\n+\n+void *\n+tcf2 (void *x)\n+{\n+  return (void *)\n+    (N::TC2<enum N::E1, void*> *)  // { dg-bogus \"does not declare anything\" }\n+    (N::TC2<void*, enum N::E1> *)\n+    (N::TC2<N::E1, void*> *)\n+    x;\n+}"}]}