{"sha": "a614d82edd24333543e450463072746459f53c3b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTYxNGQ4MmVkZDI0MzMzNTQzZTQ1MDQ2MzA3Mjc0NjQ1OWY1M2MzYg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-03-28T08:08:43Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-03-28T08:08:43Z"}, "message": "regmove.c (perhaps_ends_bb_p): Use can_throw_internal to reduce false positives.\n\n        * regmove.c (perhaps_ends_bb_p): Use can_throw_internal to\n        reduce false positives.\n        (regmove_optimize): Disable if flag_non_call_exceptions.\n\nFrom-SVN: r40917", "tree": {"sha": "f003f4f70a51a8c124a91b45763a9bc062930200", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f003f4f70a51a8c124a91b45763a9bc062930200"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a614d82edd24333543e450463072746459f53c3b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a614d82edd24333543e450463072746459f53c3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a614d82edd24333543e450463072746459f53c3b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a614d82edd24333543e450463072746459f53c3b/comments", "author": null, "committer": null, "parents": [{"sha": "7cc8342c7785ce983d7fc742aaeab84e16d485c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cc8342c7785ce983d7fc742aaeab84e16d485c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cc8342c7785ce983d7fc742aaeab84e16d485c8"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "8994dd2a9cc84f1bad7c827896ae045533a11d83", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a614d82edd24333543e450463072746459f53c3b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a614d82edd24333543e450463072746459f53c3b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a614d82edd24333543e450463072746459f53c3b", "patch": "@@ -1,5 +1,9 @@\n 2001-03-27  Richard Henderson  <rth@redhat.com>\n \n+\t* regmove.c (perhaps_ends_bb_p): Use can_throw_internal to\n+\treduce false positives.\n+\t(regmove_optimize): Disable if flag_non_call_exceptions.\n+\n \t* stmt.c (expand_return): Remove always true predicate.\n \t(expand_decl_cleanup_no_eh): Remove dead code.\n "}, {"sha": "26c4546fce364e8abe6b3993b789a514945a73cb", "filename": "gcc/regmove.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a614d82edd24333543e450463072746459f53c3b/gcc%2Fregmove.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a614d82edd24333543e450463072746459f53c3b/gcc%2Fregmove.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregmove.c?ref=a614d82edd24333543e450463072746459f53c3b", "patch": "@@ -395,11 +395,11 @@ static int perhaps_ends_bb_p (insn)\n       /* A CALL_INSN might be the last insn of a basic block, if it is inside\n \t an EH region or if there are nonlocal gotos.  Note that this test is\n \t very conservative.  */\n-      return flag_exceptions || nonlocal_goto_handler_labels;\n-\n+      if (nonlocal_goto_handler_labels)\n+\treturn 1;\n+      /* FALLTHRU */\n     default:\n-      /* All others never end a basic block.  */\n-      return 0;\n+      return can_throw_internal (insn);\n     }\n }\n \f\n@@ -1062,6 +1062,11 @@ regmove_optimize (f, nregs, regmove_dump_file)\n   int i;\n   rtx copy_src, copy_dst;\n \n+  /* ??? Hack.  Regmove doesn't examine the CFG, and gets mightily\n+     confused by non-call exceptions ending blocks.  */\n+  if (flag_non_call_exceptions)\n+    return;\n+\n   /* Find out where a potential flags register is live, and so that we\n      can supress some optimizations in those zones.  */\n   mark_flags_life_zones (discover_flags_reg ());"}]}