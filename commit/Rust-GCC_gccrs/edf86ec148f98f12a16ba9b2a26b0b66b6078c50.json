{"sha": "edf86ec148f98f12a16ba9b2a26b0b66b6078c50", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWRmODZlYzE0OGY5OGYxMmExNmJhOWIyYTI2YjBiNjZiNjA3OGM1MA==", "commit": {"author": {"name": "Daniel Franke", "email": "franke.daniel@gmail.com", "date": "2010-05-11T16:45:17Z"}, "committer": {"name": "Daniel Franke", "email": "dfranke@gcc.gnu.org", "date": "2010-05-11T16:45:17Z"}, "message": "re PR fortran/43711 (Unformitive error message for two NOWAIT in OpenMP directive)\n\ngcc/fortran/:\n2010-05-11  Daniel Franke  <franke.daniel@gmail.com>\n\n        PR fortran/43711\n        * openmp.c (gfc_match_omp_taskwait): Report unexpected characters\n        after OMP statement.\n        (gfc_match_omp_critical): Likewise.\n        (gfc_match_omp_flush): Likewise.\n        (gfc_match_omp_workshare): Likewise.\n        (gfc_match_omp_master): Likewise.\n        (gfc_match_omp_ordered): Likewise.\n        (gfc_match_omp_atomic): Likewise.\n        (gfc_match_omp_barrier): Likewise.\n        (gfc_match_omp_end_nowait): Likewise.\n\ngcc/testsuite/:\n2010-05-11  Daniel Franke  <franke.daniel@gmail.com>\n\n        PR fortran/43711\n        * gfortran.dg/gomp/pr43711.f90: New.\n\nFrom-SVN: r159282", "tree": {"sha": "caa98341a7ac946d0a1f75f347b133b66bb75fee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/caa98341a7ac946d0a1f75f347b133b66bb75fee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/edf86ec148f98f12a16ba9b2a26b0b66b6078c50", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edf86ec148f98f12a16ba9b2a26b0b66b6078c50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/edf86ec148f98f12a16ba9b2a26b0b66b6078c50", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edf86ec148f98f12a16ba9b2a26b0b66b6078c50/comments", "author": {"login": "dfranke76", "id": 15729164, "node_id": "MDQ6VXNlcjE1NzI5MTY0", "avatar_url": "https://avatars.githubusercontent.com/u/15729164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dfranke76", "html_url": "https://github.com/dfranke76", "followers_url": "https://api.github.com/users/dfranke76/followers", "following_url": "https://api.github.com/users/dfranke76/following{/other_user}", "gists_url": "https://api.github.com/users/dfranke76/gists{/gist_id}", "starred_url": "https://api.github.com/users/dfranke76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dfranke76/subscriptions", "organizations_url": "https://api.github.com/users/dfranke76/orgs", "repos_url": "https://api.github.com/users/dfranke76/repos", "events_url": "https://api.github.com/users/dfranke76/events{/privacy}", "received_events_url": "https://api.github.com/users/dfranke76/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0a0b07b72e62a415e78f396e7e487e0c30e95976", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a0b07b72e62a415e78f396e7e487e0c30e95976", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0a0b07b72e62a415e78f396e7e487e0c30e95976"}], "stats": {"total": 78, "additions": 70, "deletions": 8}, "files": [{"sha": "86a9574931850ef7bcb0eb45c5de2f7c31467e9c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/edf86ec148f98f12a16ba9b2a26b0b66b6078c50/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/edf86ec148f98f12a16ba9b2a26b0b66b6078c50/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=edf86ec148f98f12a16ba9b2a26b0b66b6078c50", "patch": "@@ -1,3 +1,17 @@\n+2010-05-11  Daniel Franke  <franke.daniel@gmail.com>\n+\n+        PR fortran/43711\n+        * openmp.c (gfc_match_omp_taskwait): Report unexpected characters\n+        after OMP statement.\n+        (gfc_match_omp_critical): Likewise.\n+        (gfc_match_omp_flush): Likewise.\n+        (gfc_match_omp_workshare): Likewise.\n+        (gfc_match_omp_master): Likewise.\n+        (gfc_match_omp_ordered): Likewise.\n+        (gfc_match_omp_atomic): Likewise.\n+        (gfc_match_omp_barrier): Likewise.\n+        (gfc_match_omp_end_nowait): Likewise.\n+\n 2010-05-11  Daniel Franke  <franke.daniel@gmail.com>\n \n \tPR fortran/31820"}, {"sha": "bbf7e5a245dcb4c7457311feb74e440671d1c94f", "filename": "gcc/fortran/openmp.c", "status": "modified", "additions": 33, "deletions": 8, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/edf86ec148f98f12a16ba9b2a26b0b66b6078c50/gcc%2Ffortran%2Fopenmp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/edf86ec148f98f12a16ba9b2a26b0b66b6078c50/gcc%2Ffortran%2Fopenmp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fopenmp.c?ref=edf86ec148f98f12a16ba9b2a26b0b66b6078c50", "patch": "@@ -467,7 +467,10 @@ match\n gfc_match_omp_taskwait (void)\n {\n   if (gfc_match_omp_eos () != MATCH_YES)\n-    return MATCH_ERROR;\n+    {\n+      gfc_error (\"Unexpected junk after TASKWAIT clause at %C\");\n+      return MATCH_ERROR;\n+    }\n   new_st.op = EXEC_OMP_TASKWAIT;\n   new_st.ext.omp_clauses = NULL;\n   return MATCH_YES;\n@@ -482,7 +485,10 @@ gfc_match_omp_critical (void)\n   if (gfc_match (\" ( %n )\", n) != MATCH_YES)\n     n[0] = '\\0';\n   if (gfc_match_omp_eos () != MATCH_YES)\n-    return MATCH_ERROR;\n+    {\n+      gfc_error (\"Unexpected junk after $OMP CRITICAL statement at %C\");\n+      return MATCH_ERROR;\n+    }\n   new_st.op = EXEC_OMP_CRITICAL;\n   new_st.ext.omp_name = n[0] ? xstrdup (n) : NULL;\n   return MATCH_YES;\n@@ -508,6 +514,7 @@ gfc_match_omp_flush (void)\n   gfc_match_omp_variable_list (\" (\", &list, true);\n   if (gfc_match_omp_eos () != MATCH_YES)\n     {\n+      gfc_error (\"Unexpected junk after $OMP FLUSH statement at %C\");\n       gfc_free_namelist (list);\n       return MATCH_ERROR;\n     }\n@@ -654,7 +661,10 @@ match\n gfc_match_omp_workshare (void)\n {\n   if (gfc_match_omp_eos () != MATCH_YES)\n-    return MATCH_ERROR;\n+    {\n+      gfc_error (\"Unexpected junk after $OMP WORKSHARE statement at %C\");\n+      return MATCH_ERROR;\n+    }\n   new_st.op = EXEC_OMP_WORKSHARE;\n   new_st.ext.omp_clauses = gfc_get_omp_clauses ();\n   return MATCH_YES;\n@@ -665,7 +675,10 @@ match\n gfc_match_omp_master (void)\n {\n   if (gfc_match_omp_eos () != MATCH_YES)\n-    return MATCH_ERROR;\n+    {\n+      gfc_error (\"Unexpected junk after $OMP MASTER statement at %C\");\n+      return MATCH_ERROR;\n+    }\n   new_st.op = EXEC_OMP_MASTER;\n   new_st.ext.omp_clauses = NULL;\n   return MATCH_YES;\n@@ -676,7 +689,10 @@ match\n gfc_match_omp_ordered (void)\n {\n   if (gfc_match_omp_eos () != MATCH_YES)\n-    return MATCH_ERROR;\n+    {\n+      gfc_error (\"Unexpected junk after $OMP ORDERED statement at %C\");\n+      return MATCH_ERROR;\n+    }\n   new_st.op = EXEC_OMP_ORDERED;\n   new_st.ext.omp_clauses = NULL;\n   return MATCH_YES;\n@@ -687,7 +703,10 @@ match\n gfc_match_omp_atomic (void)\n {\n   if (gfc_match_omp_eos () != MATCH_YES)\n-    return MATCH_ERROR;\n+    {\n+      gfc_error (\"Unexpected junk after $OMP ATOMIC statement at %C\");\n+      return MATCH_ERROR;\n+    }\n   new_st.op = EXEC_OMP_ATOMIC;\n   new_st.ext.omp_clauses = NULL;\n   return MATCH_YES;\n@@ -698,7 +717,10 @@ match\n gfc_match_omp_barrier (void)\n {\n   if (gfc_match_omp_eos () != MATCH_YES)\n-    return MATCH_ERROR;\n+    {\n+      gfc_error (\"Unexpected junk after $OMP BARRIER statement at %C\");\n+      return MATCH_ERROR;\n+    }\n   new_st.op = EXEC_OMP_BARRIER;\n   new_st.ext.omp_clauses = NULL;\n   return MATCH_YES;\n@@ -712,7 +734,10 @@ gfc_match_omp_end_nowait (void)\n   if (gfc_match (\"% nowait\") == MATCH_YES)\n     nowait = true;\n   if (gfc_match_omp_eos () != MATCH_YES)\n-    return MATCH_ERROR;\n+    {\n+      gfc_error (\"Unexpected junk after NOWAIT clause at %C\");\n+      return MATCH_ERROR;\n+    }\n   new_st.op = EXEC_OMP_END_NOWAIT;\n   new_st.ext.omp_bool = nowait;\n   return MATCH_YES;"}, {"sha": "f42ccba69e3ab78c61b6b4a016fdb4e7e53a22f3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/edf86ec148f98f12a16ba9b2a26b0b66b6078c50/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/edf86ec148f98f12a16ba9b2a26b0b66b6078c50/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=edf86ec148f98f12a16ba9b2a26b0b66b6078c50", "patch": "@@ -1,3 +1,8 @@\n+2010-05-11  Daniel Franke  <franke.daniel@gmail.com>\n+\n+        PR fortran/43711\n+        * gfortran.dg/gomp/pr43711.f90: New.\n+\n 2010-05-11  Daniel Franke  <franke.daniel@gmail.com>\n \n \tPR fortran/31820"}, {"sha": "9d7806c3ef7ada5faee07b701fd161c70d8b7399", "filename": "gcc/testsuite/gfortran.dg/gomp/pr43711.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/edf86ec148f98f12a16ba9b2a26b0b66b6078c50/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr43711.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/edf86ec148f98f12a16ba9b2a26b0b66b6078c50/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr43711.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr43711.f90?ref=edf86ec148f98f12a16ba9b2a26b0b66b6078c50", "patch": "@@ -0,0 +1,18 @@\n+! { dg-do \"compile\" }\n+! { dg-options \"-fopenmp\" }\n+!\n+! PR fortran/43711 uninformative error message for two 'nowait' in omp statement\n+! Contributed by Bill Long <longb AT cray DOT com>\n+\n+program NF03_2_5_2_1a\n+   !$omp parallel\n+      !$omp sections\n+      !$omp section\n+         print *, 'FAIL'\n+      !$omp section\n+         print *, 'FAIL'\n+      !$omp end sections nowait nowait     ! { dg-error \"Unexpected junk\" }\n+   !$omp end parallel\n+end program NF03_2_5_2_1a\n+\n+! { dg-excess-errors \"Unexpected\" }\n\\ No newline at end of file"}]}