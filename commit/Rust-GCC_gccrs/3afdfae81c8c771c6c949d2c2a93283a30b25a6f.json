{"sha": "3afdfae81c8c771c6c949d2c2a93283a30b25a6f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2FmZGZhZTgxYzhjNzcxYzZjOTQ5ZDJjMmE5MzI4M2EzMGIyNWE2Zg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2001-12-11T03:29:12Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2001-12-11T03:29:12Z"}, "message": "* check-init.c (check_init) [SWITCH_EXPR]: Use SWITCH_HAS_DEFAULT.\n\nFrom-SVN: r47860", "tree": {"sha": "2a3012e2aeef75fd78877402835149722fd38a67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a3012e2aeef75fd78877402835149722fd38a67"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3afdfae81c8c771c6c949d2c2a93283a30b25a6f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3afdfae81c8c771c6c949d2c2a93283a30b25a6f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3afdfae81c8c771c6c949d2c2a93283a30b25a6f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3afdfae81c8c771c6c949d2c2a93283a30b25a6f/comments", "author": null, "committer": null, "parents": [{"sha": "d7a5e25326eed7235ba55b55c3a7ff5050f8ed7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7a5e25326eed7235ba55b55c3a7ff5050f8ed7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7a5e25326eed7235ba55b55c3a7ff5050f8ed7f"}], "stats": {"total": 20, "additions": 7, "deletions": 13}, "files": [{"sha": "1f75d201bb3bcca8be77261b1d8f304b93f609e8", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3afdfae81c8c771c6c949d2c2a93283a30b25a6f/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3afdfae81c8c771c6c949d2c2a93283a30b25a6f/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=3afdfae81c8c771c6c949d2c2a93283a30b25a6f", "patch": "@@ -1,3 +1,7 @@\n+2001-12-10  Tom Tromey  <tromey@redhat.com>\n+\n+\t* check-init.c (check_init) [SWITCH_EXPR]: Use SWITCH_HAS_DEFAULT.\n+\n Mon Dec 10 06:09:57 2001  Douglas B. Rupp  <rupp@gnat.com>\n \n \t* Make-lang.in (jvspec.o): Add $(OUTPUT_OPTION)."}, {"sha": "2a4e3c377ac9889929b041f8340bc72cfa4bcfa8", "filename": "gcc/java/check-init.c", "status": "modified", "additions": 3, "deletions": 13, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3afdfae81c8c771c6c949d2c2a93283a30b25a6f/gcc%2Fjava%2Fcheck-init.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3afdfae81c8c771c6c949d2c2a93283a30b25a6f/gcc%2Fjava%2Fcheck-init.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fcheck-init.c?ref=3afdfae81c8c771c6c949d2c2a93283a30b25a6f", "patch": "@@ -429,9 +429,6 @@ struct alternatives\n \n struct alternatives * alternatives = NULL;\n \n-/* True if we've seen a DEFAULT_EXPR for the current SWITCH_EXPR. */\n-static int current_switch_has_default;\n-\n /* Begin handling a control flow branch.\n    BEFORE is the state of [un]assigned variables on entry.\n    CURRENT is a struct alt to manage the branch alternatives. */\n@@ -689,29 +686,22 @@ check_init (exp, before)\n     case SWITCH_EXPR:\n       {\n \tstruct alternatives alt;\n-\tint saved_current_switch_has_default = current_switch_has_default;\n \tword buf[2];\n-\tcurrent_switch_has_default = 0;\n \tcheck_init (TREE_OPERAND (exp, 0), before);\n \tBEGIN_ALTERNATIVES (before, alt);\n \talt.saved = ALLOC_BUFFER(buf, num_current_words);\n \tCOPY (alt.saved, before);\n \talt.block = exp;\n \tcheck_init (TREE_OPERAND (exp, 1), before);\n \tdone_alternative (before, &alt);\n-\tif (! current_switch_has_default)\n-\t  {\n-\t    done_alternative (alt.saved, &alt);\n-\t  }\n+\tif (! SWITCH_HAS_DEFAULT (exp))\n+\t  done_alternative (alt.saved, &alt);\n \tFREE_BUFFER(alt.saved, buf);\n \tEND_ALTERNATIVES (before, alt);\n-\tcurrent_switch_has_default = saved_current_switch_has_default;\n \treturn;\n       }\n-    case DEFAULT_EXPR:\n-      current_switch_has_default = 1;\n-      /* .. then fall through ... */\n     case CASE_EXPR:\n+    case DEFAULT_EXPR:\n       {\n \tint i;\n \tstruct alternatives *alt = alternatives;"}]}