{"sha": "00d7c8ff16e6838273cea808ffbe22e98104f9d5", "node_id": "C_kwDOANBUbNoAKDAwZDdjOGZmMTZlNjgzODI3M2NlYTgwOGZmYmUyMmU5ODEwNGY5ZDU", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2022-11-03T14:22:47Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2022-11-03T14:22:47Z"}, "message": "Add gcc/make-unique.h\n\nThis patch adds gcc/make-unique.h, containing a minimal C++11\nimplementation of make_unique (std::make_unique is C++14).\n\ngcc/ChangeLog:\n\t* make-unique.h: New file.\n\nSigned-off-by: David Malcolm <dmalcolm@redhat.com>", "tree": {"sha": "942c34232246136a6d31c2db2d921c9906f9879f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/942c34232246136a6d31c2db2d921c9906f9879f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/00d7c8ff16e6838273cea808ffbe22e98104f9d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00d7c8ff16e6838273cea808ffbe22e98104f9d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00d7c8ff16e6838273cea808ffbe22e98104f9d5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00d7c8ff16e6838273cea808ffbe22e98104f9d5/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5acc10a9ea66411e1712fabc94f9f29892b0d607", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5acc10a9ea66411e1712fabc94f9f29892b0d607", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5acc10a9ea66411e1712fabc94f9f29892b0d607"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "c9a7d6ef6cecfe42d488420fa666aa3b630fb8fe", "filename": "gcc/make-unique.h", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00d7c8ff16e6838273cea808ffbe22e98104f9d5/gcc%2Fmake-unique.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00d7c8ff16e6838273cea808ffbe22e98104f9d5/gcc%2Fmake-unique.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmake-unique.h?ref=00d7c8ff16e6838273cea808ffbe22e98104f9d5", "patch": "@@ -0,0 +1,44 @@\n+/* Minimal implementation of make_unique for C++11 compatibility.\n+   Copyright (C) 2022 Free Software Foundation, Inc.\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify it under\n+the terms of the GNU General Public License as published by the Free\n+Software Foundation; either version 3, or (at your option) any later\n+version.\n+\n+GCC is distributed in the hope that it will be useful, but WITHOUT ANY\n+WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GCC; see the file COPYING3.  If not see\n+<http://www.gnu.org/licenses/>.  */\n+\n+#ifndef GCC_MAKE_UNIQUE\n+#define GCC_MAKE_UNIQUE\n+\n+/* This header uses std::unique_ptr, but <memory> can't be directly\n+   included due to issues with macros.  Hence <memory> must be included\n+   from system.h by defining INCLUDE_MEMORY in any source file using\n+   make-unique.h.  */\n+\n+#ifndef INCLUDE_MEMORY\n+# error \"You must define INCLUDE_MEMORY before including system.h to use make-unique.h\"\n+#endif\n+\n+#include <type_traits>\n+\n+/* Minimal implementation of make_unique for C++11 compatibility\n+   (std::make_unique is C++14).  */\n+\n+template<typename T, typename... Args>\n+inline typename std::enable_if<!std::is_array<T>::value, std::unique_ptr<T>>::type\n+make_unique(Args&&... args)\n+{\n+  return std::unique_ptr<T> (new T (std::forward<Args> (args)...));\n+}\n+\n+#endif /* ! GCC_MAKE_UNIQUE */"}]}