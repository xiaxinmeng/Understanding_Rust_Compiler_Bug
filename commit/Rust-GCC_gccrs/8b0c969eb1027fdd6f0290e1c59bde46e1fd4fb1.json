{"sha": "8b0c969eb1027fdd6f0290e1c59bde46e1fd4fb1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGIwYzk2OWViMTAyN2ZkZDZmMDI5MGUxYzU5YmRlNDZlMWZkNGZiMQ==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1997-06-27T23:55:57Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1997-06-27T23:55:57Z"}, "message": "Rewrite.\n\nFrom-SVN: r14360", "tree": {"sha": "6ef867c6d594ffb33d449a69168161fd7a772d5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6ef867c6d594ffb33d449a69168161fd7a772d5b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b0c969eb1027fdd6f0290e1c59bde46e1fd4fb1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b0c969eb1027fdd6f0290e1c59bde46e1fd4fb1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b0c969eb1027fdd6f0290e1c59bde46e1fd4fb1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b0c969eb1027fdd6f0290e1c59bde46e1fd4fb1/comments", "author": null, "committer": null, "parents": [{"sha": "0bb8b20bbbd2fdefa46b264d18d0265042a7c818", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bb8b20bbbd2fdefa46b264d18d0265042a7c818", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0bb8b20bbbd2fdefa46b264d18d0265042a7c818"}], "stats": {"total": 61, "additions": 17, "deletions": 44}, "files": [{"sha": "7eb2f40c93024f19d4818f25b0c2040068051581", "filename": "gcc/configure.frag", "status": "modified", "additions": 17, "deletions": 44, "changes": 61, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b0c969eb1027fdd6f0290e1c59bde46e1fd4fb1/gcc%2Fconfigure.frag", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b0c969eb1027fdd6f0290e1c59bde46e1fd4fb1/gcc%2Fconfigure.frag", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.frag?ref=8b0c969eb1027fdd6f0290e1c59bde46e1fd4fb1", "patch": "@@ -21,56 +21,29 @@\n #Boston, MA 02111-1307, USA.\n \n # First parameter is the source directory, second is list of subdirectories\n+\n savesrcdir=$1\n savesubdirs=$2\n+\n+# First ensure the language build subdirectories exist.\n+\n for subdir in . $savesubdirs\n do\n-\toldsrcdir=$savesrcdir\n+\tif [ $subdir != . ]\n+\tthen\n+\t\ttest -d $subdir || mkdir $subdir\n+\tfi\n+done\n \n-\trm -f Make-lang\n-\ttouch Make-lang\n+# Now copy each language's Make-lang.in file to Make-lang.\n \n-\t# Re-adjust the path\n-\tcase $oldsrcdir in\n-\t/*)\n-\t\tcase $subdir in\n-\t\t.)\n-\t\t\tsrcdir=$oldsrcdir\n-\t\t\t;;\n-\t\t*)\n-\t\t\tsrcdir=$oldsrcdir/$subdir\n-\t\t\t;;\n-\t\tesac\n-\t\t;;\n-\t*)\n-\t\tcase $subdir in\n-\t\t.)\n-\t\t\t;;\n-\t\t*)\n-\t\t\toldsrcdir=../${oldsrcdir}\n-\t\t\tsrcdir=$oldsrcdir/$subdir\n-\t\t\t;;\n-\t\tesac\n-\t\t;;\n-\tesac\n-\tmainsrcdir=$oldsrcdir\n-\tSTARTDIR=`pwd`\n-\ttest -d $subdir || mkdir $subdir\n-\tcd $subdir\n+rm -f Make-lang\n+touch Make-lang\n \n-\t# If this is the top level Makefile, add the language fragments.\n-\tif [ $subdir = . ]\n+for subdir in . $savesubdirs\n+do\n+\tif [ $subdir != . ]\n \tthen\n-\t\tfor s in .. $savesubdirs\n-\t\tdo\n-\t\t\tif [ $s != \"..\" ]\n-\t\t\tthen\n-\t\t\t\tcat ${mainsrcdir}/$s/Make-lang.in >> Make-lang\n-\t\t\tfi\n-\t\tdone\n+\t\tcat $savesrcdir/$subdir/Make-lang.in >> Make-lang\n \tfi\n-\n-\tcd $STARTDIR\n-done   # end of current-dir SUBDIRS loop\n-\n-srcdir=$savesrcdir\n+done"}]}