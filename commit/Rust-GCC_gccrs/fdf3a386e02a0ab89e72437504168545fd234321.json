{"sha": "fdf3a386e02a0ab89e72437504168545fd234321", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmRmM2EzODZlMDJhMGFiODllNzI0Mzc1MDQxNjg1NDVmZDIzNDMyMQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2016-06-09T11:39:08Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2016-06-09T11:39:08Z"}, "message": "Add new analyze_brprob_spec.py script\n\n\t* analyze_brprob_spec.py: New file.\n\nFrom-SVN: r237257", "tree": {"sha": "d05363003c3241ddf1a33647fc898d5daf0c3b28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d05363003c3241ddf1a33647fc898d5daf0c3b28"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fdf3a386e02a0ab89e72437504168545fd234321", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdf3a386e02a0ab89e72437504168545fd234321", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fdf3a386e02a0ab89e72437504168545fd234321", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdf3a386e02a0ab89e72437504168545fd234321/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0d73e4800df6451f57e67f87c6d602c47e2a0f50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d73e4800df6451f57e67f87c6d602c47e2a0f50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d73e4800df6451f57e67f87c6d602c47e2a0f50"}], "stats": {"total": 62, "additions": 62, "deletions": 0}, "files": [{"sha": "71835a080b9bf44530a7acf6026b1f46de14e421", "filename": "contrib/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdf3a386e02a0ab89e72437504168545fd234321/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdf3a386e02a0ab89e72437504168545fd234321/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=fdf3a386e02a0ab89e72437504168545fd234321", "patch": "@@ -1,3 +1,7 @@\n+2016-06-09  Martin Liska  <mliska@suse.cz>\n+\n+\t* analyze_brprob_spec.py: New file.\n+\n 2016-06-09  Martin Liska  <mliska@suse.cz>\n \n \t* analyze_brprob.py: Add new argument --sorting."}, {"sha": "a28eaac39d514e1b6884cdf9571277bfdad8e20f", "filename": "contrib/analyze_brprob_spec.py", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdf3a386e02a0ab89e72437504168545fd234321/contrib%2Fanalyze_brprob_spec.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdf3a386e02a0ab89e72437504168545fd234321/contrib%2Fanalyze_brprob_spec.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fanalyze_brprob_spec.py?ref=fdf3a386e02a0ab89e72437504168545fd234321", "patch": "@@ -0,0 +1,58 @@\n+#!/usr/bin/env python3\n+\n+# This file is part of GCC.\n+#\n+# GCC is free software; you can redistribute it and/or modify it under\n+# the terms of the GNU General Public License as published by the Free\n+# Software Foundation; either version 3, or (at your option) any later\n+# version.\n+#\n+# GCC is distributed in the hope that it will be useful, but WITHOUT ANY\n+# WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+# for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.  */\n+\n+import sys\n+import os\n+import subprocess\n+import tempfile\n+import argparse\n+\n+script_location = os.path.realpath(__file__)\n+\n+parser = argparse.ArgumentParser()\n+parser.add_argument('location', metavar = 'dump_file', help = 'Location with SPEC benchmarks')\n+parser.add_argument('-s', '--sorting', dest = 'sorting', choices = ['branches', 'hitrate', 'coverage'], default = 'branches')\n+\n+args = parser.parse_args()\n+\n+benchmarks = os.listdir(args.location)\n+\n+for b in sorted(benchmarks):\n+    dumps = []\n+    for root, dirs, files in os.walk(os.path.join(args.location, b)):\n+        for x in files:\n+            if x.endswith('.profile'):\n+                dumps.append(os.path.join(root, x))\n+\n+    if len(dumps) == 0:\n+        continue\n+\n+    temp = tempfile.NamedTemporaryFile(delete = False)\n+    for d in dumps:\n+        temp.write(open(d, 'rb').read())\n+\n+    temp.close()\n+\n+    print()\n+    print(b)\n+    sys.stdout.flush()\n+    p = [os.path.join(os.path.dirname(script_location), 'analyze_brprob.py'), temp.name, '--sorting', args.sorting]\n+    p = subprocess.check_call(p)\n+    sys.stdout.flush()\n+\n+    os.remove(temp.name)"}]}