{"sha": "8d2220b23410121e311d87f8eee0b453f70c56e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQyMjIwYjIzNDEwMTIxZTMxMWQ4N2Y4ZWVlMGI0NTNmNzBjNTZlNQ==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2010-02-07T19:49:06Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-02-07T19:49:06Z"}, "message": "Fix PR42988: handle unknown_dependence.\n\n2010-02-07  Sebastian Pop  <sebastian.pop@amd.com>\n\n\tPR middle-end/42988\n\t* graphite-dependences.c (dependence_polyhedron): Set PDDR_KIND\n\tto unknown_dependence.\n\t(graphite_legal_transform_dr): Handle the unknown_dependence.\n\t(graphite_carried_dependence_level_k): Same.\n\n\t* testsuite/libgomp.graphite/force-parallel-5.c: Un-XFAILed.\n\t* testsuite/libgomp.graphite/pr41118.c: Renamed from pr4118.\n\nFrom-SVN: r156582", "tree": {"sha": "ec6a88273f1d129e7ba908783a4e5ad0d9624922", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ec6a88273f1d129e7ba908783a4e5ad0d9624922"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d2220b23410121e311d87f8eee0b453f70c56e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d2220b23410121e311d87f8eee0b453f70c56e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d2220b23410121e311d87f8eee0b453f70c56e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d2220b23410121e311d87f8eee0b453f70c56e5/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45489e99d6a8497ec6fabf386a1c1c06226082ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45489e99d6a8497ec6fabf386a1c1c06226082ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45489e99d6a8497ec6fabf386a1c1c06226082ce"}], "stats": {"total": 38, "additions": 36, "deletions": 2}, "files": [{"sha": "f0b08515a85a3b9493b514f00af4b8c3fa5e8d24", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d2220b23410121e311d87f8eee0b453f70c56e5/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d2220b23410121e311d87f8eee0b453f70c56e5/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=8d2220b23410121e311d87f8eee0b453f70c56e5", "patch": "@@ -1,3 +1,11 @@\n+2010-02-07  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\tPR middle-end/42988\n+\t* graphite-dependences.c (dependence_polyhedron): Set PDDR_KIND\n+\tto unknown_dependence.\n+\t(graphite_legal_transform_dr): Handle the unknown_dependence.\n+\t(graphite_carried_dependence_level_k): Same.\n+\n 2010-02-07  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* ChangeLog.graphite: Remove testsuite/ or gcc/testsuite/."}, {"sha": "bd83e15ca6246927931c246ac55d2eaeefbfaa5b", "filename": "gcc/graphite-dependences.c", "status": "modified", "additions": 22, "deletions": 1, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d2220b23410121e311d87f8eee0b453f70c56e5/gcc%2Fgraphite-dependences.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d2220b23410121e311d87f8eee0b453f70c56e5/gcc%2Fgraphite-dependences.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-dependences.c?ref=8d2220b23410121e311d87f8eee0b453f70c56e5", "patch": "@@ -603,6 +603,11 @@ dependence_polyhedron (poly_dr_p pdr1, poly_dr_p pdr2,\n \n   res = new_poly_ddr (pdr1, pdr2, ddp, original_scattering_p);\n \n+  if (!(pdr_read_p (pdr1) && pdr_read_p (pdr2))\n+      && PDR_BASE_OBJECT_SET (pdr1) != PDR_BASE_OBJECT_SET (pdr2)\n+      && poly_drs_may_alias_p (pdr1, pdr2))\n+    PDDR_KIND (res) = unknown_dependence;\n+\n   if (original_scattering_p)\n     *x = res;\n \n@@ -669,14 +674,24 @@ graphite_legal_transform_dr (poly_dr_p pdr1, poly_dr_p pdr2)\n      i.e. the transform should reverse no dependences, and so PT, the\n      reversed transformed PDDR, should have no constraint from PO.  */\n   opddr = dependence_polyhedron (pdr1, pdr2, 1, true);\n-  tpddr = dependence_polyhedron (pdr1, pdr2, -1, false);\n+\n+  if (PDDR_KIND (opddr) == unknown_dependence)\n+    return false;\n \n     /* There are no dependences between PDR1 and PDR2 in the original\n        version of the program, or after the transform, so the\n        transform is legal.  */\n   if (pddr_is_empty (opddr))\n     return true;\n \n+  tpddr = dependence_polyhedron (pdr1, pdr2, -1, false);\n+\n+  if (PDDR_KIND (tpddr) == unknown_dependence)\n+    {\n+      free_poly_ddr (tpddr);\n+      return false;\n+    }\n+\n   if (pddr_is_empty (tpddr))\n     {\n       free_poly_ddr (tpddr);\n@@ -792,6 +807,12 @@ graphite_carried_dependence_level_k (poly_dr_p pdr1, poly_dr_p pdr2,\n   bool empty_p;\n   poly_ddr_p pddr = dependence_polyhedron (pdr1, pdr2, 1, false);\n \n+  if (PDDR_KIND (pddr) == unknown_dependence)\n+    {\n+      free_poly_ddr (pddr);\n+      return true;\n+    }\n+\n   if (pddr_is_empty (pddr))\n     {\n       free_poly_ddr (pddr);"}, {"sha": "ee2cddb70135a74952597810fada231d15123936", "filename": "libgomp/ChangeLog.graphite", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d2220b23410121e311d87f8eee0b453f70c56e5/libgomp%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d2220b23410121e311d87f8eee0b453f70c56e5/libgomp%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog.graphite?ref=8d2220b23410121e311d87f8eee0b453f70c56e5", "patch": "@@ -1,3 +1,8 @@\n+2010-02-07  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* testsuite/libgomp.graphite/force-parallel-5.c: Un-XFAILed.\n+\t* testsuite/libgomp.graphite/pr41118.c: Renamed from pr4118.\n+\n 2009-10-09  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* testsuite/libgomp.graphite/graphite.exp (PARALLEL_CFLAGS): Add"}, {"sha": "b72b0215f3f8a52e8f7d50fbfcc03b26e20dc1ef", "filename": "libgomp/testsuite/libgomp.graphite/force-parallel-5.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d2220b23410121e311d87f8eee0b453f70c56e5/libgomp%2Ftestsuite%2Flibgomp.graphite%2Fforce-parallel-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d2220b23410121e311d87f8eee0b453f70c56e5/libgomp%2Ftestsuite%2Flibgomp.graphite%2Fforce-parallel-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.graphite%2Fforce-parallel-5.c?ref=8d2220b23410121e311d87f8eee0b453f70c56e5", "patch": "@@ -34,6 +34,6 @@ int main(void)\n /* { dg-final { scan-tree-dump-times \"2 loops carried no dependency\" 1 \"graphite\" } } */\n /* { dg-final { cleanup-tree-dump \"graphite\" } } */\n /* { dg-final { scan-tree-dump-times \"loopfn.0\" 5 \"optimized\" } } */\n-/* { dg-final { scan-tree-dump-times \"loopfn.1\" 5 \"optimized\" { xfail *-*-* } } } */\n+/* { dg-final { scan-tree-dump-times \"loopfn.1\" 5 \"optimized\" } } */\n /* { dg-final { cleanup-tree-dump \"parloops\" } } */\n /* { dg-final { cleanup-tree-dump \"optimized\" } } */"}, {"sha": "18e95ed8b5be945f0b5dec49acd83f63b4349978", "filename": "libgomp/testsuite/libgomp.graphite/pr41118.c", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d2220b23410121e311d87f8eee0b453f70c56e5/libgomp%2Ftestsuite%2Flibgomp.graphite%2Fpr41118.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d2220b23410121e311d87f8eee0b453f70c56e5/libgomp%2Ftestsuite%2Flibgomp.graphite%2Fpr41118.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.graphite%2Fpr41118.c?ref=8d2220b23410121e311d87f8eee0b453f70c56e5", "previous_filename": "libgomp/testsuite/libgomp.graphite/pr4118.c"}]}