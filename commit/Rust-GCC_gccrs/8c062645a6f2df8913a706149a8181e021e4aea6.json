{"sha": "8c062645a6f2df8913a706149a8181e021e4aea6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGMwNjI2NDVhNmYyZGY4OTEzYTcwNjE0OWE4MTgxZTAyMWU0YWVhNg==", "commit": {"author": {"name": "J\"orn Rennecke", "email": "amylaar@redhat.com", "date": "2001-08-30T17:51:04Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2001-08-30T17:51:04Z"}, "message": "t-h8300 (LIB1ASMFUNCS): Add _fixunssfdi and _fixunssfsi_asm.\n\n\t* t-h8300 (LIB1ASMFUNCS): Add _fixunssfdi and _fixunssfsi_asm.\n\t(LIB2FUNCS_EXTRA): Define.\n\tconfig/h8300/lib1funcs.asm: New part: L_fixunssfsi_asm .\n\tconfig/h8300/fixunssfsi.c: New file.\n\nFrom-SVN: r45291", "tree": {"sha": "d42525b4c97c904c63f282aa023ffaceaa699bb3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d42525b4c97c904c63f282aa023ffaceaa699bb3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c062645a6f2df8913a706149a8181e021e4aea6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c062645a6f2df8913a706149a8181e021e4aea6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c062645a6f2df8913a706149a8181e021e4aea6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c062645a6f2df8913a706149a8181e021e4aea6/comments", "author": null, "committer": null, "parents": [{"sha": "6f41623f030d340b9f852937e9b445feec5d40e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f41623f030d340b9f852937e9b445feec5d40e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f41623f030d340b9f852937e9b445feec5d40e6"}], "stats": {"total": 85, "additions": 84, "deletions": 1}, "files": [{"sha": "a725b4f9023da7312695c98372f6afe888354fa3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c062645a6f2df8913a706149a8181e021e4aea6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c062645a6f2df8913a706149a8181e021e4aea6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8c062645a6f2df8913a706149a8181e021e4aea6", "patch": "@@ -1,3 +1,10 @@\n+Thu Aug 30 18:50:37 2001  J\"orn Rennecke <amylaar@redhat.com>\n+\n+\t* t-h8300 (LIB1ASMFUNCS): Add _fixunssfdi and _fixunssfsi_asm.\n+\t(LIB2FUNCS_EXTRA): Define.\n+\tconfig/h8300/lib1funcs.asm: New part: L_fixunssfsi_asm .\n+\tconfig/h8300/fixunssfsi.c: New file.\n+\n 2001-08-30  Kazu Hirata  <kazu@hxi.com>\n \n \t* config/h8300/h8300.md (zero_extendqihi2): Changes to"}, {"sha": "ed37803ed912123ce1b8c200fb7cafcb279a9da2", "filename": "gcc/config/h8300/fixunssfsi.c", "status": "added", "additions": 43, "deletions": 0, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c062645a6f2df8913a706149a8181e021e4aea6/gcc%2Fconfig%2Fh8300%2Ffixunssfsi.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c062645a6f2df8913a706149a8181e021e4aea6/gcc%2Fconfig%2Fh8300%2Ffixunssfsi.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Ffixunssfsi.c?ref=8c062645a6f2df8913a706149a8181e021e4aea6", "patch": "@@ -0,0 +1,43 @@\n+/* More subroutines needed by GCC output code on some machines.  */\n+/* Compile this one with gcc.  */\n+/* Copyright (C) 1989, 1992, 2001  Free Software Foundation, Inc.\n+\n+This file is part of GNU CC.\n+\n+GNU CC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+In addition to the permissions in the GNU General Public License, the\n+Free Software Foundation gives you unlimited permission to link the\n+compiled version of this file into combinations with other programs,\n+and to distribute those combinations without any restriction coming\n+from the use of this file.  (The General Public License restrictions\n+do apply in other respects; for example, they cover modification of\n+the file, and distribution when not linked into a combine\n+executable.)\n+\n+GNU CC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GNU CC; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330,\n+Boston, MA 02111-1307, USA.  */\n+\n+/* The libgcc2.c implementation gets confused by our type setup and creates\n+   a directly recursive call, so we do our own implementation.  For the h8300,\n+   that's in lib1funcs.asm, for h8300h / h8s, it's here.  */\n+\n+#ifndef __H8300__\n+long\n+__fixunssfsi (float a)\n+{\n+  if (a >= (float) 32768L)\n+    return (long) (a -32768L) +32768L;\n+  return (long) a;\n+}\n+#endif"}, {"sha": "da69acd435b6b31d3e011f9f9993ce4438b9ec8d", "filename": "gcc/config/h8300/lib1funcs.asm", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c062645a6f2df8913a706149a8181e021e4aea6/gcc%2Fconfig%2Fh8300%2Flib1funcs.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c062645a6f2df8913a706149a8181e021e4aea6/gcc%2Fconfig%2Fh8300%2Flib1funcs.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Flib1funcs.asm?ref=8c062645a6f2df8913a706149a8181e021e4aea6", "patch": "@@ -764,3 +764,31 @@ _done:\n \n #endif\n #endif /* L_mulsi3 */\n+#ifdef L_fixunssfsi_asm\n+/* For the h8300 we use asm to save some bytes, to\n+   allow more programs to fit into the tiny address\n+   space.  For h8300h / h8s, the C version is good enough.  */\n+#ifdef __H8300__\n+/* We still treat NANs different than libgcc2.c, but then, the\n+   behaviour is undefined anyways.  */\n+\t.global\t___fixunssfsi\n+___fixunssfsi:\n+\tcmp.b #0x47,r0h\n+\tbge Large_num\n+\tjmp     @___fixsfsi\n+Large_num:\n+\tbhi L_huge_num\n+\txor.b #0x80,A0L\n+\tbmi L_shift8\n+L_huge_num:\n+\tmov.w #65535,A0\n+\tmov.w A0,A1\n+\trts\n+L_shift8:\n+\tmov.b A0L,A0H\n+\tmov.b A1H,A0L\n+\tmov.b A1L,A1H\n+\tmov.b #0,A1L\n+\trts\n+#endif\n+#endif /* L_fixunssfsi_asm */"}, {"sha": "de59acb6367d8445b582f2ab055cdee5953a7455", "filename": "gcc/config/h8300/t-h8300", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c062645a6f2df8913a706149a8181e021e4aea6/gcc%2Fconfig%2Fh8300%2Ft-h8300", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c062645a6f2df8913a706149a8181e021e4aea6/gcc%2Fconfig%2Fh8300%2Ft-h8300", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Ft-h8300?ref=8c062645a6f2df8913a706149a8181e021e4aea6", "patch": "@@ -1,6 +1,11 @@\n+# The three first floating point functions listed in LIB1ASMFUNCS (_fixsfdi,\n+# _floatdisf, and _fixunssfdi) are used to disable the inclusion of those\n+# from libgcc2.c.  They do not actually exist in lib1funcs.asm.\n LIB1ASMSRC = h8300/lib1funcs.asm\n LIB1ASMFUNCS = _cmpsi2 _ucmpsi2 _divhi3 _divsi3 _mulhi3 _mulsi3 \\\n-  _floatdisf _fixsfdi\n+  _floatdisf _fixsfdi _fixunssfdi _fixunssfsi_asm\n+\n+LIB2FUNCS_EXTRA = $(srcdir)/config/h8300/fixunssfsi.c\n \n # We do not have DF or DI types, so fake out the libgcc2 compilation.\n TARGET_LIBGCC2_CFLAGS = -DDF=SF -DDI=SI"}]}