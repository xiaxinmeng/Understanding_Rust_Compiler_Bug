{"sha": "544f477536010f055c26bc959b18fccf67902750", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ0ZjQ3NzUzNjAxMGYwNTVjMjZiYzk1OWIxOGZjY2Y2NzkwMjc1MA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-12-23T12:50:00Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-12-23T12:50:00Z"}, "message": "c++tools:  Fix PIE  [PR 98324]\n\nThis adds --enable-default-pie support to c++tools, so that the sample\nserver is build -fPIE if requested.\n\n\tPR bootstrap/98324\n\tc++tools/\n\t* Makefile.in: Add FLAGPIE.\n\t* configure.ac: Add --enable-default-pie support.\n\t* configure: Rebuilt.", "tree": {"sha": "3fd179013a8e62c479043edb1252d04787b2bd3f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3fd179013a8e62c479043edb1252d04787b2bd3f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/544f477536010f055c26bc959b18fccf67902750", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/544f477536010f055c26bc959b18fccf67902750", "html_url": "https://github.com/Rust-GCC/gccrs/commit/544f477536010f055c26bc959b18fccf67902750", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/544f477536010f055c26bc959b18fccf67902750/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "077fefbfaec6838568a15e74e9e2adecce693aef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/077fefbfaec6838568a15e74e9e2adecce693aef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/077fefbfaec6838568a15e74e9e2adecce693aef"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "590a856af908c083828fff9a1a8f5a351f1020b3", "filename": "c++tools/Makefile.in", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544f477536010f055c26bc959b18fccf67902750/c%2B%2Btools%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544f477536010f055c26bc959b18fccf67902750/c%2B%2Btools%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/c%2B%2Btools%2FMakefile.in?ref=544f477536010f055c26bc959b18fccf67902750", "patch": "@@ -28,7 +28,9 @@ AUTOCONF := @AUTOCONF@\n AUTOHEADER := @AUTOHEADER@\n CXX := @CXX@\n CXXFLAGS := @CXXFLAGS@\n-CXXOPTS := $(CXXFLAGS) -fno-exceptions -fno-rtti\n+PIEFLAG := @PIEFLAG@\n+CXXOPTS := $(CXXFLAGS) $(PIEFLAG) -fno-exceptions -fno-rtti\n+LDFLAGS := @LDFLAGS@\n exeext := @EXEEXT@\n LIBIBERTY := ../libiberty/libiberty.a\n VERSION.O := ../gcc/version.o\n@@ -88,7 +90,7 @@ MAPPER.O := server.o resolver.o\n CODYLIB = ../libcody/libcody.a\n CXXINC += -I$(srcdir)/../libcody -I$(srcdir)/../include -I$(srcdir)/../gcc -I.\n g++-mapper-server$(exeext): $(MAPPER.O) $(CODYLIB)\n-\t+$(CXX) $(LDFLAGS) -o $@ $^ $(VERSION.O) $(LIBIBERTY)\n+\t+$(CXX) $(LDFLAGS) $(PIEFLAG) -o $@ $^ $(VERSION.O) $(LIBIBERTY)\n \n # copy to gcc dir so tests there can run\n all::../gcc/g++-mapper-server$(exeext)"}, {"sha": "89441f50d1db19d1861c29ddca5b282e36594a30", "filename": "c++tools/configure", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544f477536010f055c26bc959b18fccf67902750/c%2B%2Btools%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544f477536010f055c26bc959b18fccf67902750/c%2B%2Btools%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/c%2B%2Btools%2Fconfigure?ref=544f477536010f055c26bc959b18fccf67902750", "patch": "@@ -629,6 +629,7 @@ CPP\n ac_ct_CC\n CFLAGS\n CC\n+PIEFLAG\n MAINTAINER\n CXX_AUX_TOOLS\n AUTOHEADER\n@@ -699,6 +700,7 @@ ac_user_opts='\n enable_option_checking\n enable_c___tools\n enable_maintainer_mode\n+enable_default_pie\n with_gcc_major_version_only\n '\n       ac_precious_vars='build_alias\n@@ -1329,6 +1331,7 @@ Optional Features:\n   --enable-maintainer-mode\n                           enable maintainer mode. Add rules to rebuild\n                           configurey bits\n+  --enable-default-pie    enable Position Independent Executable as default\n \n Optional Packages:\n   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]\n@@ -2939,6 +2942,16 @@ $as_echo \"$maintainer_mode\" >&6; }\n test \"$maintainer_mode\" = yes && MAINTAINER=yes\n \n \n+# Check whether --enable-default-pie was given.\n+# Check whether --enable-default-pie was given.\n+if test \"${enable_default_pie+set}\" = set; then :\n+  enableval=$enable_default_pie; PIEFLAG=-fPIE\n+else\n+  PIEFLAG=\n+fi\n+\n+\n+\n # Check if O_CLOEXEC is defined by fcntl\n ac_ext=c\n ac_cpp='$CPP $CPPFLAGS'"}, {"sha": "1100dc24cd135dfd07d4d40bf645be41ce247919", "filename": "c++tools/configure.ac", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544f477536010f055c26bc959b18fccf67902750/c%2B%2Btools%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544f477536010f055c26bc959b18fccf67902750/c%2B%2Btools%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/c%2B%2Btools%2Fconfigure.ac?ref=544f477536010f055c26bc959b18fccf67902750", "patch": "@@ -66,6 +66,13 @@ AC_MSG_RESULT([$maintainer_mode])\n test \"$maintainer_mode\" = yes && MAINTAINER=yes\n AC_SUBST(MAINTAINER)\n \n+# Check whether --enable-default-pie was given.\n+AC_ARG_ENABLE(default-pie,\n+[AS_HELP_STRING([--enable-default-pie],\n+\t\t  [enable Position Independent Executable as default])],\n+[PIEFLAG=-fPIE], [PIEFLAG=])\n+AC_SUBST([PIEFLAG])\n+\n # Check if O_CLOEXEC is defined by fcntl\n AC_CACHE_CHECK(for O_CLOEXEC, ac_cv_o_cloexec, [\n AC_COMPILE_IFELSE([AC_LANG_PROGRAM([["}]}