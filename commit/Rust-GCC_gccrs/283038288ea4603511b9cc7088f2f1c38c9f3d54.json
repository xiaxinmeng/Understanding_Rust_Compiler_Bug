{"sha": "283038288ea4603511b9cc7088f2f1c38c9f3d54", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjgzMDM4Mjg4ZWE0NjAzNTExYjljYzcwODhmMmYxYzM4YzlmM2Q1NA==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-11-28T22:28:13Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-11-28T22:28:13Z"}, "message": "re PR preprocessor/17610 (Empty #include statement halts gcc)\n\n(libcpp)\n\tPR preprocessor/17610\n\t* directives.c (do_include_common): Error out if an empty filename\n\tis given for #include (or #include_next or #import).\n\n(gcc)\n\tPR preprocessor/17610\n\t* testsuite/gcc.dg/cpp/empty-include.c: New testcase.\n\nFrom-SVN: r91428", "tree": {"sha": "3a3b8763ec8b9788a57d6ba82b14ac6cdaf9d403", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3a3b8763ec8b9788a57d6ba82b14ac6cdaf9d403"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/283038288ea4603511b9cc7088f2f1c38c9f3d54", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/283038288ea4603511b9cc7088f2f1c38c9f3d54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/283038288ea4603511b9cc7088f2f1c38c9f3d54", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/283038288ea4603511b9cc7088f2f1c38c9f3d54/comments", "author": null, "committer": null, "parents": [{"sha": "b20e82291eef31ef415bb218c172519d59da16ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b20e82291eef31ef415bb218c172519d59da16ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b20e82291eef31ef415bb218c172519d59da16ac"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "4a87144706cc87d0bde0917dc8bda421c100f992", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283038288ea4603511b9cc7088f2f1c38c9f3d54/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283038288ea4603511b9cc7088f2f1c38c9f3d54/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=283038288ea4603511b9cc7088f2f1c38c9f3d54", "patch": "@@ -1,3 +1,8 @@\n+2004-11-28  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\tPR preprocessor/17610\n+\t* testsuite/gcc.dg/cpp/empty-include.c: New testcase.\n+\n 2004-11-28  Jeff Law  <law@redhat.com>\n \n \t* tree-ssa-alias.c (count_calls_and_maybe_create_global_var): New."}, {"sha": "6b5a47cbba7ae9c979d2389efc8e03a3f38180c5", "filename": "gcc/testsuite/gcc.dg/cpp/empty-include.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283038288ea4603511b9cc7088f2f1c38c9f3d54/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fempty-include.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283038288ea4603511b9cc7088f2f1c38c9f3d54/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fempty-include.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fempty-include.c?ref=283038288ea4603511b9cc7088f2f1c38c9f3d54", "patch": "@@ -0,0 +1,13 @@\n+/* \n+ * Copyright 2004 Free Software Foundation, Inc.\n+ * Contributed and written by Nathanael Nerode.\n+ *\n+ * GCC 3.4 would attempt to open stdin as the included file\n+ * (PR 17610), causing a sort of hang.\n+ * \n+ * We should get an error.\n+ */\n+\n+/* {dg-do preprocess} */\n+#include \"\" /* { dg-error \"empty\" \"error on empty filename in include\" } */\n+int x; /* Otherwise we have an empty file and get more errors. */"}, {"sha": "3b01f82668f08e130133254e44d1c3861143f0cb", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283038288ea4603511b9cc7088f2f1c38c9f3d54/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283038288ea4603511b9cc7088f2f1c38c9f3d54/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=283038288ea4603511b9cc7088f2f1c38c9f3d54", "patch": "@@ -1,3 +1,9 @@\n+2004-11-28  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\tPR preprocessor/17610 \n+\t* directives.c (do_include_common): Error out if an empty filename\n+\tis given for #include (or #include_next or #import).\n+\n 2004-11-27  Roger Sayle  <roger@eyesopen.com>\n \t    Zack Weinberg  <zack@codesourcery.com>\n "}, {"sha": "fe1867d569ad1050a099dc229af2ff64baadb210", "filename": "libcpp/directives.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283038288ea4603511b9cc7088f2f1c38c9f3d54/libcpp%2Fdirectives.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283038288ea4603511b9cc7088f2f1c38c9f3d54/libcpp%2Fdirectives.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fdirectives.c?ref=283038288ea4603511b9cc7088f2f1c38c9f3d54", "patch": "@@ -668,6 +668,14 @@ do_include_common (cpp_reader *pfile, enum include_type type)\n   if (!fname)\n     return;\n \n+  if (!*fname)\n+  {\n+    cpp_error (pfile, CPP_DL_ERROR, \"empty filename in #%s\",\n+               pfile->directive->name);\n+    free ((void *) fname);\n+    return;\n+  }\n+\n   /* Prevent #include recursion.  */\n   if (pfile->line_table->depth >= CPP_STACK_MAX)\n     cpp_error (pfile, CPP_DL_ERROR, \"#include nested too deeply\");"}]}