{"sha": "7cf78561f6e669e4d482ad078e9258c6f5ce1aee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2NmNzg1NjFmNmU2NjllNGQ0ODJhZDA3OGU5MjU4YzZmNWNlMWFlZQ==", "commit": {"author": {"name": "Alexander Ivchenko", "email": "alexander.ivchenko@intel.com", "date": "2013-12-27T14:33:51Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2013-12-27T14:33:51Z"}, "message": "sse.md (avx512f_fmadd_<mode>_maskz): Extend to support EVEX's RC.\n\n        * config/i386/sse.md (avx512f_fmadd_<mode>_maskz): Extend to support\n        EVEX's RC.\n        (avx512f_fmaddsub_<mode>_maskz): Ditto.\n        * config/i386/subst.md (round_expand_name): New.\n        (round_expand_nimm_predicate): Ditto.\n        (round_expand_operand): Ditto.\n        (round_expand): Ditto.\n\n\nCo-Authored-By: Andrey Turetskiy <andrey.turetskiy@intel.com>\nCo-Authored-By: Anna Tikhonova <anna.tikhonova@intel.com>\nCo-Authored-By: Ilya Tocar <ilya.tocar@intel.com>\nCo-Authored-By: Ilya Verbin <ilya.verbin@intel.com>\nCo-Authored-By: Kirill Yukhin <kirill.yukhin@intel.com>\nCo-Authored-By: Maxim Kuznetsov <maxim.kuznetsov@intel.com>\nCo-Authored-By: Michael Zolotukhin <michael.v.zolotukhin@intel.com>\nCo-Authored-By: Sergey Lega <sergey.s.lega@intel.com>\n\nFrom-SVN: r206222", "tree": {"sha": "ea13f00dab17266b7faa298613d28762b7ec7468", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ea13f00dab17266b7faa298613d28762b7ec7468"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7cf78561f6e669e4d482ad078e9258c6f5ce1aee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cf78561f6e669e4d482ad078e9258c6f5ce1aee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cf78561f6e669e4d482ad078e9258c6f5ce1aee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cf78561f6e669e4d482ad078e9258c6f5ce1aee/comments", "author": null, "committer": null, "parents": [{"sha": "8a6ef76052f2d275e86bec08c16db3cfea263f5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a6ef76052f2d275e86bec08c16db3cfea263f5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a6ef76052f2d275e86bec08c16db3cfea263f5c"}], "stats": {"total": 60, "additions": 48, "deletions": 12}, "files": [{"sha": "9cd2138be532ab7433c35fb11664d6d9fa38e110", "filename": "gcc/ChangeLog", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cf78561f6e669e4d482ad078e9258c6f5ce1aee/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cf78561f6e669e4d482ad078e9258c6f5ce1aee/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7cf78561f6e669e4d482ad078e9258c6f5ce1aee", "patch": "@@ -1,3 +1,21 @@\n+2013-12-27  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n+\t    Maxim Kuznetsov  <maxim.kuznetsov@intel.com>\n+\t    Sergey Lega  <sergey.s.lega@intel.com>\n+\t    Anna Tikhonova  <anna.tikhonova@intel.com>\n+\t    Ilya Tocar  <ilya.tocar@intel.com>\n+\t    Andrey Turetskiy  <andrey.turetskiy@intel.com>\n+\t    Ilya Verbin  <ilya.verbin@intel.com>\n+\t    Kirill Yukhin  <kirill.yukhin@intel.com>\n+\t    Michael Zolotukhin  <michael.v.zolotukhin@intel.com>\n+\n+\t* config/i386/sse.md (avx512f_fmadd_<mode>_maskz): Extend to support\n+\tEVEX's RC.\n+\t(avx512f_fmaddsub_<mode>_maskz): Ditto.\n+\t* config/i386/subst.md (round_expand_name): New.\n+\t(round_expand_nimm_predicate): Ditto.\n+\t(round_expand_operand): Ditto.\n+\t(round_expand): Ditto.\n+\n 2013-12-27  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n \t    Maxim Kuznetsov  <maxim.kuznetsov@intel.com>\n \t    Sergey Lega  <sergey.s.lega@intel.com>"}, {"sha": "4e4d5c7ead8af1ba497c5ac07ee21118f630f1e1", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cf78561f6e669e4d482ad078e9258c6f5ce1aee/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cf78561f6e669e4d482ad078e9258c6f5ce1aee/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=7cf78561f6e669e4d482ad078e9258c6f5ce1aee", "patch": "@@ -2741,17 +2741,17 @@\n \t  (match_operand:FMAMODE 3 \"nonimmediate_operand\")))]\n   \"\")\n \n-(define_expand \"avx512f_fmadd_<mode>_maskz\"\n+(define_expand \"avx512f_fmadd_<mode>_maskz<round_expand_name>\"\n   [(match_operand:VF_512 0 \"register_operand\")\n-   (match_operand:VF_512 1 \"nonimmediate_operand\")\n-   (match_operand:VF_512 2 \"nonimmediate_operand\")\n-   (match_operand:VF_512 3 \"nonimmediate_operand\")\n+   (match_operand:VF_512 1 \"<round_expand_nimm_predicate>\")\n+   (match_operand:VF_512 2 \"<round_expand_nimm_predicate>\")\n+   (match_operand:VF_512 3 \"<round_expand_nimm_predicate>\")\n    (match_operand:<avx512fmaskmode> 4 \"register_operand\")]\n   \"TARGET_AVX512F\"\n {\n-  emit_insn (gen_fma_fmadd_<mode>_maskz_1 (\n+  emit_insn (gen_fma_fmadd_<mode>_maskz_1<round_expand_name> (\n     operands[0], operands[1], operands[2], operands[3],\n-    CONST0_RTX (<MODE>mode), operands[4]));\n+    CONST0_RTX (<MODE>mode), operands[4]<round_expand_operand>));\n   DONE;\n })\n \n@@ -2983,17 +2983,17 @@\n \t  UNSPEC_FMADDSUB))]\n   \"TARGET_FMA || TARGET_FMA4 || TARGET_AVX512F\")\n \n-(define_expand \"avx512f_fmaddsub_<mode>_maskz\"\n+(define_expand \"avx512f_fmaddsub_<mode>_maskz<round_expand_name>\"\n   [(match_operand:VF_512 0 \"register_operand\")\n-   (match_operand:VF_512 1 \"nonimmediate_operand\")\n-   (match_operand:VF_512 2 \"nonimmediate_operand\")\n-   (match_operand:VF_512 3 \"nonimmediate_operand\")\n+   (match_operand:VF_512 1 \"<round_expand_nimm_predicate>\")\n+   (match_operand:VF_512 2 \"<round_expand_nimm_predicate>\")\n+   (match_operand:VF_512 3 \"<round_expand_nimm_predicate>\")\n    (match_operand:<avx512fmaskmode> 4 \"register_operand\")]\n   \"TARGET_AVX512F\"\n {\n-  emit_insn (gen_fma_fmaddsub_<mode>_maskz_1 (\n+  emit_insn (gen_fma_fmaddsub_<mode>_maskz_1<round_expand_name> (\n     operands[0], operands[1], operands[2], operands[3],\n-    CONST0_RTX (<MODE>mode), operands[4]));\n+    CONST0_RTX (<MODE>mode), operands[4]<round_expand_operand>));\n   DONE;\n })\n "}, {"sha": "595dfb9e5f40e4832efb033f1a723e4036ecada0", "filename": "gcc/config/i386/subst.md", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cf78561f6e669e4d482ad078e9258c6f5ce1aee/gcc%2Fconfig%2Fi386%2Fsubst.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cf78561f6e669e4d482ad078e9258c6f5ce1aee/gcc%2Fconfig%2Fi386%2Fsubst.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsubst.md?ref=7cf78561f6e669e4d482ad078e9258c6f5ce1aee", "patch": "@@ -160,3 +160,21 @@\n      (set (match_dup 0)\n           (match_dup 1))\n      (unspec [(match_operand:SI 2 \"const_4_to_5_operand\")] UNSPEC_EMBEDDED_ROUNDING)])])\n+\n+(define_subst_attr \"round_expand_name\" \"round_expand\" \"\" \"_round\")\n+(define_subst_attr \"round_expand_nimm_predicate\" \"round_expand\" \"nonimmediate_operand\" \"register_operand\")\n+(define_subst_attr \"round_expand_operand\" \"round_expand\" \"\" \", operands[5]\")\n+\n+(define_subst \"round_expand\"\n+ [(match_operand:SUBST_V 0)\n+  (match_operand:SUBST_V 1)\n+  (match_operand:SUBST_V 2)\n+  (match_operand:SUBST_V 3)\n+  (match_operand:SUBST_S 4)]\n+  \"TARGET_AVX512F\"\n+  [(match_dup 0)\n+   (match_dup 1)\n+   (match_dup 2)\n+   (match_dup 3)\n+   (match_dup 4)\n+   (unspec [(match_operand:SI 5 \"const_0_to_4_operand\")] UNSPEC_EMBEDDED_ROUNDING)])"}]}