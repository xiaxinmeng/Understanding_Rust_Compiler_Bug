{"sha": "1429da42b8a74f6116e4768c6763b13bd7993f20", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQyOWRhNDJiOGE3NGY2MTE2ZTQ3NjhjNjc2M2IxM2JkNzk5M2YyMA==", "commit": {"author": {"name": "Peter Bergner", "email": "bergner@vnet.ibm.com", "date": "2018-03-28T20:09:02Z"}, "committer": {"name": "Peter Bergner", "email": "bergner@gcc.gnu.org", "date": "2018-03-28T20:09:02Z"}, "message": "re PR target/84912 (__builtin_divde* produce Internal Compiler Error when compiled -m32)\n\ngcc/\n\tPR target/84912\n\t* config/rs6000/rs6000-builtin.def (DIVWEO): Delete macro expansion.\n\t(DIVWEUO): Likewise.\n\t(DIVDEO): Likewise.\n\t(DIVDEUO): Likewise.\n\t* config/rs6000/rs6000.c (builtin_function_type): Remove support for\n\tDIVWEUO and DIVDEUO.\n\t* config/rs6000/rs6000.md (UNSPEC_DIVEO, UNSPEC_DIVEUO): Delete unspecs.\n\t(UNSPEC_DIV_EXTEND): Remove deleted unspecs.\n\t(div_extend): Likewise.\n\t* doc/extend.texi (__builtin_divweo): Remove documention for deleted\n\tbuiltin function.\n\t(__builtin_divweuo): Likewise.\n\t(__builtin_divdeo): Likewise.\n\t(__builtin_divdeuo): Likewise.\n\ngcc/testsuite/\n\tPR target/84912\n\t* gcc.target/powerpc/extend-divide-1.c (div_weo): Remove test for\n\tdeleted builtin function.\n\t(div_weuo): Likewise.\n\t* gcc.target/powerpc/extend-divide-2.c (div_deo): Likewise.\n\t(div_deuo): Likewise.\n\nFrom-SVN: r258933", "tree": {"sha": "55277077482689ac5456f2e3169e8e7ea998d9bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/55277077482689ac5456f2e3169e8e7ea998d9bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1429da42b8a74f6116e4768c6763b13bd7993f20", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1429da42b8a74f6116e4768c6763b13bd7993f20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1429da42b8a74f6116e4768c6763b13bd7993f20", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1429da42b8a74f6116e4768c6763b13bd7993f20/comments", "author": {"login": "peter-bergner", "id": 17504345, "node_id": "MDQ6VXNlcjE3NTA0MzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/17504345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peter-bergner", "html_url": "https://github.com/peter-bergner", "followers_url": "https://api.github.com/users/peter-bergner/followers", "following_url": "https://api.github.com/users/peter-bergner/following{/other_user}", "gists_url": "https://api.github.com/users/peter-bergner/gists{/gist_id}", "starred_url": "https://api.github.com/users/peter-bergner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peter-bergner/subscriptions", "organizations_url": "https://api.github.com/users/peter-bergner/orgs", "repos_url": "https://api.github.com/users/peter-bergner/repos", "events_url": "https://api.github.com/users/peter-bergner/events{/privacy}", "received_events_url": "https://api.github.com/users/peter-bergner/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "427d369ce186fbe89562fc16a9d2cdaec37c99c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/427d369ce186fbe89562fc16a9d2cdaec37c99c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/427d369ce186fbe89562fc16a9d2cdaec37c99c0"}], "stats": {"total": 80, "additions": 31, "deletions": 49}, "files": [{"sha": "d92fcf74990094495a8505ca5b9af68bfd07dfe1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1429da42b8a74f6116e4768c6763b13bd7993f20", "patch": "@@ -1,3 +1,21 @@\n+2018-03-28  Peter Bergner  <bergner@vnet.ibm.com>\n+\n+\tPR target/84912\n+\t* config/rs6000/rs6000-builtin.def (DIVWEO): Delete macro expansion.\n+\t(DIVWEUO): Likewise.\n+\t(DIVDEO): Likewise.\n+\t(DIVDEUO): Likewise.\n+\t* config/rs6000/rs6000.c (builtin_function_type): Remove support for\n+\tDIVWEUO and DIVDEUO.\n+\t* config/rs6000/rs6000.md (UNSPEC_DIVEO, UNSPEC_DIVEUO): Delete unspecs.\n+\t(UNSPEC_DIV_EXTEND): Remove deleted unspecs.\n+\t(div_extend): Likewise.\n+\t* doc/extend.texi (__builtin_divweo): Remove documention for deleted\n+\tbuiltin function.\n+\t(__builtin_divweuo): Likewise.\n+\t(__builtin_divdeo): Likewise.\n+\t(__builtin_divdeuo): Likewise.\n+\n 2018-03-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/85095"}, {"sha": "6bf972adfc1d11f2c733f73b5183abe3a0876992", "filename": "gcc/config/rs6000/rs6000-builtin.def", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Fconfig%2Frs6000%2Frs6000-builtin.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Fconfig%2Frs6000%2Frs6000-builtin.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-builtin.def?ref=1429da42b8a74f6116e4768c6763b13bd7993f20", "patch": "@@ -2310,13 +2310,9 @@ BU_P9V_OVERLOAD_1 (VCTZLSBB,\t\"vctzlsbb\")\n \f\n /* 2 argument extended divide functions added in ISA 2.06.  */\n BU_P7_MISC_2 (DIVWE,\t\t\"divwe\",\tCONST,\tdive_si)\n-BU_P7_MISC_2 (DIVWEO,\t\t\"divweo\",\tCONST,\tdiveo_si)\n BU_P7_MISC_2 (DIVWEU,\t\t\"divweu\",\tCONST,\tdiveu_si)\n-BU_P7_MISC_2 (DIVWEUO,\t\t\"divweuo\",\tCONST,\tdiveuo_si)\n BU_P7_MISC_2 (DIVDE,\t\t\"divde\",\tCONST,\tdive_di)\n-BU_P7_MISC_2 (DIVDEO,\t\t\"divdeo\",\tCONST,\tdiveo_di)\n BU_P7_MISC_2 (DIVDEU,\t\t\"divdeu\",\tCONST,\tdiveu_di)\n-BU_P7_MISC_2 (DIVDEUO,\t\t\"divdeuo\",\tCONST,\tdiveuo_di)\n \n /* 1 argument DFP (decimal floating point) functions added in ISA 2.05.  */\n BU_DFP_MISC_1 (DXEX,\t\t\"dxex\",\t\tCONST,\tdfp_dxex_dd)"}, {"sha": "cecf7e31fbd31b9e5d14ae3c62b04b1681ff9f65", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=1429da42b8a74f6116e4768c6763b13bd7993f20", "patch": "@@ -18053,9 +18053,7 @@ builtin_function_type (machine_mode mode_ret, machine_mode mode_arg0,\n     case CRYPTO_BUILTIN_VPMSUM:\n     case MISC_BUILTIN_ADDG6S:\n     case MISC_BUILTIN_DIVWEU:\n-    case MISC_BUILTIN_DIVWEUO:\n     case MISC_BUILTIN_DIVDEU:\n-    case MISC_BUILTIN_DIVDEUO:\n     case VSX_BUILTIN_UDIV_V2DI:\n     case ALTIVEC_BUILTIN_VMAXUB:\n     case ALTIVEC_BUILTIN_VMINUB:"}, {"sha": "faae3578ca613e92a3540fe4637eadfcdc710cee", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=1429da42b8a74f6116e4768c6763b13bd7993f20", "patch": "@@ -130,9 +130,7 @@\n    UNSPEC_CDTBCD\n    UNSPEC_CBCDTD\n    UNSPEC_DIVE\n-   UNSPEC_DIVEO\n    UNSPEC_DIVEU\n-   UNSPEC_DIVEUO\n    UNSPEC_UNPACK_128BIT\n    UNSPEC_PACK_128BIT\n    UNSPEC_LSQ\n@@ -13863,14 +13861,10 @@\n    (set_attr \"length\" \"4\")])\n \n (define_int_iterator UNSPEC_DIV_EXTEND [UNSPEC_DIVE\n-\t\t\t\t\tUNSPEC_DIVEO\n-\t\t\t\t\tUNSPEC_DIVEU\n-\t\t\t\t\tUNSPEC_DIVEUO])\n+\t\t\t\t\tUNSPEC_DIVEU])\n \n (define_int_attr div_extend [(UNSPEC_DIVE\t\"e\")\n-\t\t\t     (UNSPEC_DIVEO\t\"eo\")\n-\t\t\t     (UNSPEC_DIVEU\t\"eu\")\n-\t\t\t     (UNSPEC_DIVEUO\t\"euo\")])\n+\t\t\t     (UNSPEC_DIVEU\t\"eu\")])\n \n (define_insn \"div<div_extend>_<mode>\"\n   [(set (match_operand:GPR 0 \"register_operand\" \"=r\")"}, {"sha": "cb0d9c0fed73ff1afb71f9728bc6d8bab366a61b", "filename": "gcc/doc/extend.texi", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Fdoc%2Fextend.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Fdoc%2Fextend.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fextend.texi?ref=1429da42b8a74f6116e4768c6763b13bd7993f20", "patch": "@@ -15820,22 +15820,17 @@ or @option{-mpopcntd}):\n @smallexample\n long __builtin_bpermd (long, long);\n int __builtin_divwe (int, int);\n-int __builtin_divweo (int, int);\n unsigned int __builtin_divweu (unsigned int, unsigned int);\n-unsigned int __builtin_divweuo (unsigned int, unsigned int);\n long __builtin_divde (long, long);\n-long __builtin_divdeo (long, long);\n unsigned long __builtin_divdeu (unsigned long, unsigned long);\n-unsigned long __builtin_divdeuo (unsigned long, unsigned long);\n unsigned int cdtbcd (unsigned int);\n unsigned int cbcdtd (unsigned int);\n unsigned int addg6s (unsigned int, unsigned int);\n void __builtin_rs6000_speculation_barrier (void);\n @end smallexample\n \n-The @code{__builtin_divde}, @code{__builtin_divdeo},\n-@code{__builtin_divdeu}, @code{__builtin_divdeou} functions require a\n-64-bit environment support ISA 2.06 or later.\n+The @code{__builtin_divde} and @code{__builtin_divdeu} functions\n+require a 64-bit environment supporting ISA 2.06 or later.\n \n The following built-in functions are available for the PowerPC family\n of processors, starting with ISA 3.0 or later (@option{-mcpu=power9}):"}, {"sha": "bb665fcfdf9792a88414f0b64c641d828b28b484", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1429da42b8a74f6116e4768c6763b13bd7993f20", "patch": "@@ -1,3 +1,12 @@\n+2018-03-28  Peter Bergner  <bergner@vnet.ibm.com>\n+\n+\tPR target/84912\n+\t* gcc.target/powerpc/extend-divide-1.c (div_weo): Remove test for\n+\tdeleted builtin function.\n+\t(div_weuo): Likewise.\n+\t* gcc.target/powerpc/extend-divide-2.c (div_deo): Likewise.\n+\t(div_deuo): Likewise.\n+\n 2018-03-28  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/85028"}, {"sha": "572f6abaacf1cd785cca53a5828187ac70839ecd", "filename": "gcc/testsuite/gcc.target/powerpc/extend-divide-1.c", "status": "modified", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fextend-divide-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fextend-divide-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fextend-divide-1.c?ref=1429da42b8a74f6116e4768c6763b13bd7993f20", "patch": "@@ -5,9 +5,7 @@\n /* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power7\" } } */\n /* { dg-options \"-mcpu=power7 -O2\" } */\n /* { dg-final { scan-assembler-times \"divwe \"   1 } } */\n-/* { dg-final { scan-assembler-times \"divweo \"  1 } } */\n /* { dg-final { scan-assembler-times \"divweu \"  1 } } */\n-/* { dg-final { scan-assembler-times \"divweuo \" 1 } } */\n /* { dg-final { scan-assembler-not    \"bl __builtin\" } } */\n \n int\n@@ -16,20 +14,8 @@ div_we (int a, int b)\n   return __builtin_divwe (a, b);\n }\n \n-int\n-div_weo (int a, int b)\n-{\n-  return __builtin_divweo (a, b);\n-}\n-\n unsigned int\n div_weu (unsigned int a, unsigned int b)\n {\n   return __builtin_divweu (a, b);\n }\n-\n-unsigned int\n-div_weuo (unsigned int a, unsigned int b)\n-{\n-  return __builtin_divweuo (a, b);\n-}"}, {"sha": "0b5a9ae379b8ef3a6b37334fb3429ff7d4422351", "filename": "gcc/testsuite/gcc.target/powerpc/extend-divide-2.c", "status": "modified", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fextend-divide-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1429da42b8a74f6116e4768c6763b13bd7993f20/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fextend-divide-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fextend-divide-2.c?ref=1429da42b8a74f6116e4768c6763b13bd7993f20", "patch": "@@ -5,9 +5,7 @@\n /* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power7\" } } */\n /* { dg-options \"-mcpu=power7 -O2\" } */\n /* { dg-final { scan-assembler-times \"divde \"   1 } } */\n-/* { dg-final { scan-assembler-times \"divdeo \"  1 } } */\n /* { dg-final { scan-assembler-times \"divdeu \"  1 } } */\n-/* { dg-final { scan-assembler-times \"divdeuo \" 1 } } */\n /* { dg-final { scan-assembler-not    \"bl __builtin\" } } */\n \n long\n@@ -16,20 +14,8 @@ div_de (long a, long b)\n   return __builtin_divde (a, b);\n }\n \n-long\n-div_deo (long a, long b)\n-{\n-  return __builtin_divdeo (a, b);\n-}\n-\n unsigned long\n div_deu (unsigned long a, unsigned long b)\n {\n   return __builtin_divdeu (a, b);\n }\n-\n-unsigned long\n-div_deuo (unsigned long a, unsigned long b)\n-{\n-  return __builtin_divdeuo (a, b);\n-}"}]}