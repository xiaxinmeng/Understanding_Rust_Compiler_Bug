{"sha": "62b0355332d6a102667074df1abf5e1a015809c6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjJiMDM1NTMzMmQ2YTEwMjY2NzA3NGRmMWFiZjVlMWEwMTU4MDljNg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2014-02-12T08:49:55Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2014-02-12T08:49:55Z"}, "message": "re PR rtl-optimization/60116 (wrong code at -Os on x86_64-linux-gnu in 32-bit mode)\n\n\tPR rtl-optimization/60116\n\t* combine.c (try_combine): Also remove dangling REG_DEAD notes on the\n\tother_insn once the combination has been validated.\n\nFrom-SVN: r207713", "tree": {"sha": "978e4087ca2bdbd4afd96388ab25a7caa8853cda", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/978e4087ca2bdbd4afd96388ab25a7caa8853cda"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62b0355332d6a102667074df1abf5e1a015809c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62b0355332d6a102667074df1abf5e1a015809c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62b0355332d6a102667074df1abf5e1a015809c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62b0355332d6a102667074df1abf5e1a015809c6/comments", "author": null, "committer": null, "parents": [{"sha": "6cfbc02310939961fdb3ca8db7d3fc0db42162d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cfbc02310939961fdb3ca8db7d3fc0db42162d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cfbc02310939961fdb3ca8db7d3fc0db42162d8"}], "stats": {"total": 56, "additions": 52, "deletions": 4}, "files": [{"sha": "a92902bcb11293f121f27ea8c285ccc13cf8b947", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62b0355332d6a102667074df1abf5e1a015809c6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62b0355332d6a102667074df1abf5e1a015809c6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=62b0355332d6a102667074df1abf5e1a015809c6", "patch": "@@ -1,3 +1,9 @@\n+2014-02-12  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR rtl-optimization/60116\n+\t* combine.c (try_combine): Also remove dangling REG_DEAD notes on the\n+\tother_insn once the combination has been validated.\n+\n 2014-02-11  Jan Hubicka  <hubicka@ucw.cz>\n \n \tPR lto/59468"}, {"sha": "f6e1dbc4686729217a1293812dad6b81a152c4ca", "filename": "gcc/combine.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62b0355332d6a102667074df1abf5e1a015809c6/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62b0355332d6a102667074df1abf5e1a015809c6/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=62b0355332d6a102667074df1abf5e1a015809c6", "patch": "@@ -3894,14 +3894,15 @@ try_combine (rtx i3, rtx i2, rtx i1, rtx i0, int *new_direct_jump_p,\n \n       PATTERN (undobuf.other_insn) = other_pat;\n \n-      /* If any of the notes in OTHER_INSN were REG_UNUSED, ensure that they\n-\t are still valid.  Then add any non-duplicate notes added by\n-\t recog_for_combine.  */\n+      /* If any of the notes in OTHER_INSN were REG_DEAD or REG_UNUSED,\n+\t ensure that they are still valid.  Then add any non-duplicate\n+\t notes added by recog_for_combine.  */\n       for (note = REG_NOTES (undobuf.other_insn); note; note = next)\n \t{\n \t  next = XEXP (note, 1);\n \n-\t  if (REG_NOTE_KIND (note) == REG_UNUSED\n+\t  if ((REG_NOTE_KIND (note) == REG_DEAD\n+\t       || REG_NOTE_KIND (note) == REG_UNUSED)\n \t      && ! reg_set_p (XEXP (note, 0), PATTERN (undobuf.other_insn)))\n \t    remove_note (undobuf.other_insn, note);\n \t}"}, {"sha": "5555d3edb7b56c96dd976149a85ef373e91c0591", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62b0355332d6a102667074df1abf5e1a015809c6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62b0355332d6a102667074df1abf5e1a015809c6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=62b0355332d6a102667074df1abf5e1a015809c6", "patch": "@@ -1,3 +1,7 @@\n+2014-02-12  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc.c-torture/execute/20140212-1.c: New test.\n+\n 2014-02-12  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/60047"}, {"sha": "8f1f84f3e3cf3bfec041ddaebd5ab4b0c4b5787c", "filename": "gcc/testsuite/gcc.c-torture/execute/20140212-1.c", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62b0355332d6a102667074df1abf5e1a015809c6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20140212-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62b0355332d6a102667074df1abf5e1a015809c6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20140212-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20140212-1.c?ref=62b0355332d6a102667074df1abf5e1a015809c6", "patch": "@@ -0,0 +1,37 @@\n+/* PR rtl-optimization/60116 */\n+/* Reported by Zhendong Su <su@cs.ucdavis.edu> */\n+\n+extern void abort (void);\n+\n+int a, b, c, d = 1, e, f = 1, h, i, k;\n+char g, j;\n+\n+void\n+fn1 (void)\n+{\n+  int l;\n+  e = 0;\n+  c = 0;\n+  for (;;)\n+    {\n+      k = a && b;\n+      j = k * 54;\n+      g = j * 147;\n+      l = ~g + (long long) e && 1;\n+      if (d)\n+\tc = l;\n+      else\n+\th = i = l * 9UL;\n+      if (f)\n+\treturn;\n+    }\n+}\n+\n+int\n+main (void)\n+{\n+  fn1 ();\n+  if (c != 1)\n+    abort ();\n+  return 0;\n+}"}]}