{"sha": "8b2205027de65d0d8c2fe0ef9c4238bf7e769eb8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGIyMjA1MDI3ZGU2NWQwZDhjMmZlMGVmOWM0MjM4YmY3ZTc2OWViOA==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2009-11-18T12:19:04Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2009-11-18T12:19:04Z"}, "message": "passes.c (ipa_write_summaries): Call renumber_gimple_stmt_uids on all nodes we write summaries for.\n\n2009-11-18  Martin Jambor  <mjambor@suse.cz>\n\n\t* passes.c (ipa_write_summaries): Call renumber_gimple_stmt_uids\n\ton all nodes we write summaries for.\n\nFrom-SVN: r154290", "tree": {"sha": "19563ecb01db287412f3fae886d2b7acdfdec5b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19563ecb01db287412f3fae886d2b7acdfdec5b3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b2205027de65d0d8c2fe0ef9c4238bf7e769eb8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b2205027de65d0d8c2fe0ef9c4238bf7e769eb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b2205027de65d0d8c2fe0ef9c4238bf7e769eb8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b2205027de65d0d8c2fe0ef9c4238bf7e769eb8/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "848f237b0d51efe763c65723b05cd437cc7af632", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/848f237b0d51efe763c65723b05cd437cc7af632", "html_url": "https://github.com/Rust-GCC/gccrs/commit/848f237b0d51efe763c65723b05cd437cc7af632"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "a28276c278c083ca877e28729a7e0ed98b4a1f72", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b2205027de65d0d8c2fe0ef9c4238bf7e769eb8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b2205027de65d0d8c2fe0ef9c4238bf7e769eb8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8b2205027de65d0d8c2fe0ef9c4238bf7e769eb8", "patch": "@@ -1,3 +1,8 @@\n+2009-11-18  Martin Jambor  <mjambor@suse.cz>\n+\n+\t* passes.c (ipa_write_summaries): Call renumber_gimple_stmt_uids\n+\ton all nodes we write summaries for.\n+\n 2009-11-18  Shujing Zhao  <pearly.zhao@oracle.com>\n \t\n \tPR middle-end/22201"}, {"sha": "0c39a7a22bb450900bae5129384ad9aec00e0c94", "filename": "gcc/passes.c", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b2205027de65d0d8c2fe0ef9c4238bf7e769eb8/gcc%2Fpasses.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b2205027de65d0d8c2fe0ef9c4238bf7e769eb8/gcc%2Fpasses.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.c?ref=8b2205027de65d0d8c2fe0ef9c4238bf7e769eb8", "patch": "@@ -1660,7 +1660,23 @@ ipa_write_summaries (void)\n   gcc_assert (order_pos == cgraph_n_nodes);\n \n   for (i = order_pos - 1; i >= 0; i--)\n-    cgraph_node_set_add (set, order[i]);\n+    {\n+      struct cgraph_node *node = order[i];\n+\n+      if (node->analyzed)\n+\t{\n+\t  /* When streaming out references to statements as part of some IPA\n+\t     pass summary, the statements need to have uids assigned and the\n+\t     following does that for all the IPA passes here. Naturally, this\n+\t     ordering then matches the one IPA-passes get in their stmt_fixup\n+\t     hooks.  */\n+\n+\t  push_cfun (DECL_STRUCT_FUNCTION (node->decl));\n+\t  renumber_gimple_stmt_uids ();\n+\t  pop_cfun ();\n+\t}\n+      cgraph_node_set_add (set, node);\n+    }\n \n   ipa_write_summaries_1 (set);\n   lto_delete_extern_inline_states ();"}]}