{"sha": "982edf3a271c8da05a4fff68f727ffa3c4ce5462", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTgyZWRmM2EyNzFjOGRhMDVhNGZmZjY4ZjcyN2ZmYTNjNGNlNTQ2Mg==", "commit": {"author": {"name": "Nicolas Roche", "email": "roche@adacore.com", "date": "2012-01-30T12:19:17Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-01-30T12:19:17Z"}, "message": "Make-lang.in: Update dependencies.\n\n2012-01-30  Nicolas Roche  <roche@adacore.com>\n\n\t* gcc-interface/Make-lang.in: Update dependencies.\n\t* gcc-interface/Makefile.in: Use system-vxworks-system-ppc-mils.ads\n\twhen needed.\n\tRemove Linker_Options -crtbe when building sjlj run-time.\n\nFrom-SVN: r183715", "tree": {"sha": "210f427afc10b6fae5e4e671b2dc786b7ecbc2ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/210f427afc10b6fae5e4e671b2dc786b7ecbc2ed"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/982edf3a271c8da05a4fff68f727ffa3c4ce5462", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/982edf3a271c8da05a4fff68f727ffa3c4ce5462", "html_url": "https://github.com/Rust-GCC/gccrs/commit/982edf3a271c8da05a4fff68f727ffa3c4ce5462", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/982edf3a271c8da05a4fff68f727ffa3c4ce5462/comments", "author": {"login": "Nikokrock", "id": 7796165, "node_id": "MDQ6VXNlcjc3OTYxNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/7796165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nikokrock", "html_url": "https://github.com/Nikokrock", "followers_url": "https://api.github.com/users/Nikokrock/followers", "following_url": "https://api.github.com/users/Nikokrock/following{/other_user}", "gists_url": "https://api.github.com/users/Nikokrock/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nikokrock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nikokrock/subscriptions", "organizations_url": "https://api.github.com/users/Nikokrock/orgs", "repos_url": "https://api.github.com/users/Nikokrock/repos", "events_url": "https://api.github.com/users/Nikokrock/events{/privacy}", "received_events_url": "https://api.github.com/users/Nikokrock/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b727a82b8cd5ef7b0852360f67d122e6cc5da9a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b727a82b8cd5ef7b0852360f67d122e6cc5da9a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b727a82b8cd5ef7b0852360f67d122e6cc5da9a4"}], "stats": {"total": 40, "additions": 27, "deletions": 13}, "files": [{"sha": "8c90a03a15c25a90aa12de362b096641f93ba9ae", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/982edf3a271c8da05a4fff68f727ffa3c4ce5462/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/982edf3a271c8da05a4fff68f727ffa3c4ce5462/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=982edf3a271c8da05a4fff68f727ffa3c4ce5462", "patch": "@@ -1,3 +1,10 @@\n+2012-01-30  Nicolas Roche  <roche@adacore.com>\n+\n+\t* gcc-interface/Make-lang.in: Update dependencies.\n+\t* gcc-interface/Makefile.in: Use system-vxworks-system-ppc-mils.ads\n+\twhen needed.\n+\tRemove Linker_Options -crtbe when building sjlj run-time.\n+\n 2012-01-30  Robert Dewar  <dewar@adacore.com>\n \n \t* sem.adb (Analyze): Call Analyze_Mod for N_Op_Mod mode."}, {"sha": "8a6d1908e027d237844bfec04f9ae7c857084cae", "filename": "gcc/ada/gcc-interface/Make-lang.in", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/982edf3a271c8da05a4fff68f727ffa3c4ce5462/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/982edf3a271c8da05a4fff68f727ffa3c4ce5462/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMake-lang.in?ref=982edf3a271c8da05a4fff68f727ffa3c4ce5462", "patch": "@@ -3863,17 +3863,17 @@ ada/sem_cat.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/sem_ch11.ads ada/sem_ch12.ads ada/sem_ch13.ads ada/sem_ch2.ads \\\n    ada/sem_ch3.ads ada/sem_ch4.ads ada/sem_ch5.ads ada/sem_ch6.ads \\\n    ada/sem_ch7.ads ada/sem_ch8.ads ada/sem_ch9.ads ada/sem_disp.ads \\\n-   ada/sem_eval.ads ada/sem_prag.ads ada/sem_res.ads ada/sem_type.ads \\\n-   ada/sem_util.ads ada/sem_util.adb ada/sinfo.ads ada/sinfo.adb \\\n-   ada/sinput.ads ada/snames.ads ada/stand.ads ada/stringt.ads \\\n-   ada/style.ads ada/styleg.ads ada/styleg.adb ada/stylesw.ads \\\n-   ada/system.ads ada/s-exctab.ads ada/s-htable.ads ada/s-imenne.ads \\\n-   ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads ada/s-rident.ads \\\n-   ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads \\\n-   ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads ada/s-traent.ads \\\n-   ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads ada/table.adb \\\n-   ada/targparm.ads ada/tbuild.ads ada/tree_io.ads ada/ttypes.ads \\\n-   ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n+   ada/sem_dist.ads ada/sem_eval.ads ada/sem_prag.ads ada/sem_res.ads \\\n+   ada/sem_type.ads ada/sem_util.ads ada/sem_util.adb ada/sinfo.ads \\\n+   ada/sinfo.adb ada/sinput.ads ada/snames.ads ada/stand.ads \\\n+   ada/stringt.ads ada/style.ads ada/styleg.ads ada/styleg.adb \\\n+   ada/stylesw.ads ada/system.ads ada/s-exctab.ads ada/s-htable.ads \\\n+   ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads \\\n+   ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads \\\n+   ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads \\\n+   ada/s-traent.ads ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads \\\n+   ada/table.adb ada/targparm.ads ada/tbuild.ads ada/tree_io.ads \\\n+   ada/ttypes.ads ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n    ada/unchconv.ads ada/unchdeal.ads ada/urealp.ads ada/widechar.ads \n \n ada/sem_ch10.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\"}, {"sha": "98b4c1eb08b5fb0cca66661e58b77d375797ffaa", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/982edf3a271c8da05a4fff68f727ffa3c4ce5462/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/982edf3a271c8da05a4fff68f727ffa3c4ce5462/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=982edf3a271c8da05a4fff68f727ffa3c4ce5462", "patch": "@@ -674,7 +674,7 @@ ifeq ($(strip $(filter-out e500% powerpc% wrs vxworksmils,$(targ))),)\n   s-thread.adb<s-thread-ae653.adb \\\n   s-tpopsp.adb<s-tpopsp-vxworks.adb \\\n   s-vxwork.ads<s-vxwork-ppc.ads \\\n-  system.ads<system-vxworks-ppc.ads \\\n+  system.ads<system-vxworks-ppc-mils.ads \\\n   $(ATOMICS_TARGET_PAIRS) \\\n   $(ATOMICS_BUILTINS_TARGET_PAIRS) \\\n   $(DUMMY_SOCKETS_TARGET_PAIRS)\n@@ -2765,11 +2765,18 @@ gnatlib-shared:\n \t     PICFLAG_FOR_TARGET=\"$(PICFLAG_FOR_TARGET)\" \\\n              $(GNATLIB_SHARED)\n \n+# When building a SJLJ runtime for VxWorks, in addition to forcing\n+# ZCX_By_default to True, we need to ensure that -crtbe linker options\n+# is not passed. Otherwise we will end with weak symbols on \n+# __register_frame_info and __deregister_frame_info. The VxWorks 5.x\n+# will issue an error on weak symbols.\n gnatlib-sjlj:\n \t$(MAKE) $(FLAGS_TO_PASS) EH_MECHANISM=\"\" \\\n \tTHREAD_KIND=\"$(THREAD_KIND)\" ../stamp-gnatlib1-$(RTSDIR)\n \tsed -e 's/ZCX_By_Default.*/ZCX_By_Default            : constant Boolean := False;/' $(RTSDIR)/system.ads > $(RTSDIR)/s.ads\n-\t$(MV) $(RTSDIR)/s.ads $(RTSDIR)/system.ads\n+\tcat $(RTSDIR)/s.ads | grep -v \"Linker_Options.*-crtbe\" > $(RTSDIR)/s2.ads\n+\t$(RM) $(RTSDIR)/s.ads\n+\t$(MV) $(RTSDIR)/s2.ads $(RTSDIR)/system.ads\n \t$(MAKE) $(FLAGS_TO_PASS) \\\n \t     EH_MECHANISM=\"\" \\\n \t     GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\"}]}