{"sha": "0761b46075f1c53a0fc01292b1956dd95137e18e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDc2MWI0NjA3NWYxYzUzYTBmYzAxMjkyYjE5NTZkZDk1MTM3ZTE4ZQ==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@redhat.com", "date": "2009-11-30T10:10:52Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2009-11-30T10:10:52Z"}, "message": "stormy16-lib2-count-leading-zeros.c: Delete.\n\n        * config/stormy16/stormy16-lib2-count-leading-zeros.c: Delete.\n        * config/stormy16/t-stormy16 (LIB2FUNCS_EXTRA): Remove\n        stormy16-lib2-count-leading-zeros.c.\n        * config/stormy16/stormy16-lib2.c (__clzhi2): Move code from\n        __stormy16_count_leading_zeros() into this function.\n        (__ctzhi2): Use __builtin_clz.\n        (__ffshi2): Likewise.\n\nFrom-SVN: r154770", "tree": {"sha": "116be8b118c4bade74b64257dfadd6ff6c8802fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/116be8b118c4bade74b64257dfadd6ff6c8802fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0761b46075f1c53a0fc01292b1956dd95137e18e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0761b46075f1c53a0fc01292b1956dd95137e18e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0761b46075f1c53a0fc01292b1956dd95137e18e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0761b46075f1c53a0fc01292b1956dd95137e18e/comments", "author": {"login": "nickclifton", "id": 31441682, "node_id": "MDQ6VXNlcjMxNDQxNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickclifton", "html_url": "https://github.com/nickclifton", "followers_url": "https://api.github.com/users/nickclifton/followers", "following_url": "https://api.github.com/users/nickclifton/following{/other_user}", "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions", "organizations_url": "https://api.github.com/users/nickclifton/orgs", "repos_url": "https://api.github.com/users/nickclifton/repos", "events_url": "https://api.github.com/users/nickclifton/events{/privacy}", "received_events_url": "https://api.github.com/users/nickclifton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1dfddbb4d341548f0b196873f0d2b9c9b058b8a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dfddbb4d341548f0b196873f0d2b9c9b058b8a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1dfddbb4d341548f0b196873f0d2b9c9b058b8a4"}], "stats": {"total": 66, "additions": 30, "deletions": 36}, "files": [{"sha": "2db2fdcf0d87907734105694c987b4ddf155e27a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0761b46075f1c53a0fc01292b1956dd95137e18e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0761b46075f1c53a0fc01292b1956dd95137e18e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0761b46075f1c53a0fc01292b1956dd95137e18e", "patch": "@@ -1,3 +1,13 @@\n+2009-11-30  Nick Clifton  <nickc@redhat.com>\n+\n+\t* config/stormy16/stormy16-lib2-count-leading-zeros.c: Delete.\n+\t* config/stormy16/t-stormy16 (LIB2FUNCS_EXTRA): Remove\n+\tstormy16-lib2-count-leading-zeros.c.\n+\t* config/stormy16/stormy16-lib2.c (__clzhi2): Move code from\n+\t__stormy16_count_leading_zeros() into this function.\n+\t(__ctzhi2): Use __builtin_clz.\n+\t(__ffshi2): Likewise.\n+\n 2009-11-30  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* config/sparc/sparc.c (DF_MODES): Simplify."}, {"sha": "1b98d30c18bfd204986d1ec68771dac0855c41b6", "filename": "gcc/config/stormy16/stormy16-lib2-count-leading-zeros.c", "status": "removed", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1dfddbb4d341548f0b196873f0d2b9c9b058b8a4/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-count-leading-zeros.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1dfddbb4d341548f0b196873f0d2b9c9b058b8a4/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-count-leading-zeros.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2-count-leading-zeros.c?ref=1dfddbb4d341548f0b196873f0d2b9c9b058b8a4", "patch": "@@ -1,2 +0,0 @@\n-#define XSTORMY16_COUNT_LEADING_ZEROS\n-#include \"stormy16-lib2.c\""}, {"sha": "0c99cdd3e9044b1a1db57a8c0092b41fced595c4", "filename": "gcc/config/stormy16/stormy16-lib2.c", "status": "modified", "additions": 17, "deletions": 27, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0761b46075f1c53a0fc01292b1956dd95137e18e/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0761b46075f1c53a0fc01292b1956dd95137e18e/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16-lib2.c?ref=0761b46075f1c53a0fc01292b1956dd95137e18e", "patch": "@@ -253,14 +253,24 @@ __parityhi2 (UHWtype x)\n #endif\n \n #ifdef XSTORMY16_CLZHI2\n-/* Returns the number of leading zero bits in X.\n-   FIXME:  The return type really should be \"unsigned int\"\n-   but this is not how the builtin is prototyped.  */\n-\n+/* Returns the number of zero-bits from the most significant bit to the\n+   first nonzero bit in X.  Returns 16 for X == 0.  Implemented as a\n+   simple for loop in order to save space by removing the need for\n+   the __clz_tab array.\n+   FIXME:  The return type really should be \"unsigned int\" but this is\n+   not how the builtin is prototyped.  */\n+#undef unsigned\n int\n __clzhi2 (UHWtype x)\n {\n-  return __stormy16_count_leading_zeros (x);\n+  unsigned int i;\n+  unsigned int c;\n+  unsigned int value = x;\n+\n+  for (c = 0, i = 1 << 15; i; i >>= 1, c++)\n+    if (i & value)\n+      break;\n+  return c;\n }\n #endif\n \n@@ -278,7 +288,7 @@ __ctzhi2 (UHWtype x)\n      bits.  */\n   x &= - x;\n \n-  return 15 - __stormy16_count_leading_zeros (x);\n+  return 15 - __builtin_clz (x);\n }\n #endif\n \n@@ -296,26 +306,6 @@ __ffshi2 (UHWtype u)\n   if (u == 0)\n     return 0;\n \n-  return 16 - __stormy16_count_leading_zeros (u & - u);\n+  return 16 - __builtin_clz (u & - u);\n }\n #endif\n-\n-#ifdef XSTORMY16_COUNT_LEADING_ZEROS\n-#undef unsigned\n-/* Count the number of zero-bits from the most significant bit to the\n-   first nonzero bit in VALUE.  Returns 16 for VALUE == 0.  Implemented\n-   as a simple for loop in order to save space by removing the need for\n-   the __clz_tab array.  */\n-\n-unsigned int\n-__stormy16_count_leading_zeros (unsigned int value)\n-{\n-  unsigned int i;\n-  unsigned int c;\n-\n-  for (c = 0, i = 1 << 15; i; i >>= 1, c++)\n-    if (i & value)\n-      break;\n-  return c;\n-}\n-#endif /* XSTORMY16_COUNT_LEADING_ZEROS */"}, {"sha": "8959e64ab5e4a5c2bbaa84d42aebd0ca6ac7350d", "filename": "gcc/config/stormy16/t-stormy16", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0761b46075f1c53a0fc01292b1956dd95137e18e/gcc%2Fconfig%2Fstormy16%2Ft-stormy16", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0761b46075f1c53a0fc01292b1956dd95137e18e/gcc%2Fconfig%2Fstormy16%2Ft-stormy16", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Ft-stormy16?ref=0761b46075f1c53a0fc01292b1956dd95137e18e", "patch": "@@ -18,8 +18,7 @@\n # along with GCC; see the file COPYING3.  If not see\n # <http://www.gnu.org/licenses/>.\n \n-# SImode routines\n-\n+# SImode arithmetic and logical routines, HImode bit counting routines.\n LIB2FUNCS_EXTRA = \\\n \t$(srcdir)/config/stormy16/stormy16-lib2-udivmodsi4.c \\\n \t$(srcdir)/config/stormy16/stormy16-lib2-divsi3.c \\\n@@ -33,12 +32,9 @@ LIB2FUNCS_EXTRA = \\\n \t$(srcdir)/config/stormy16/stormy16-lib2-parityhi2.c \\\n \t$(srcdir)/config/stormy16/stormy16-lib2-clzhi2.c \\\n \t$(srcdir)/config/stormy16/stormy16-lib2-ctzhi2.c \\\n-\t$(srcdir)/config/stormy16/stormy16-lib2-ffshi2.c \\\n-\t$(srcdir)/config/stormy16/stormy16-lib2-count-leading-zeros.c\n-\n-\n-# floating point emulation libraries\n+\t$(srcdir)/config/stormy16/stormy16-lib2-ffshi2.c\n \n+# Floating point emulation libraries.\n FPBIT = fp-bit.c\n DPBIT = dp-bit.c\n "}]}