{"sha": "c68360000ce964b0de6e333817c8b74a12deda3e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzY4MzYwMDAwY2U5NjRiMGRlNmUzMzM4MTdjOGI3NGExMmRlZGEzZQ==", "commit": {"author": {"name": "Max Filippov", "email": "jcmvbkbc@gmail.com", "date": "2015-01-05T22:22:36Z"}, "committer": {"name": "Max Filippov", "email": "jcmvbkbc@gcc.gnu.org", "date": "2015-01-05T22:22:36Z"}, "message": "Fix loop optimization when ZOL is not available in xtensa configuration\n\nCurrently building gcc for xtensa configuration with XCHAL_HAVE_LOOPS\nset to 0 fails with the following error:\n\n  xtensa.c:3952: undefined reference to `reorg_loops(bool, hw_doloop_hooks*)'\n\nOnly compile target-specific zero-overhead loop optimization code when\nTARGET_LOOPS allows it.\n\n2014-12-30  Max Filippov  <jcmvbkbc@gmail.com>\n\n\t* config/xtensa/xtensa.c (hwloop_optimize, hwloop_fail,\n\thwloop_pattern_reg, xtensa_doloop_hooks, xtensa_reorg_loops):\n\tput under #if TARGET_LOOPS guard.\n\nFrom-SVN: r219206", "tree": {"sha": "f827ae6336f5fcc1be38eced868099ac103b7e4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f827ae6336f5fcc1be38eced868099ac103b7e4c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c68360000ce964b0de6e333817c8b74a12deda3e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c68360000ce964b0de6e333817c8b74a12deda3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c68360000ce964b0de6e333817c8b74a12deda3e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c68360000ce964b0de6e333817c8b74a12deda3e/comments", "author": {"login": "jcmvbkbc", "id": 166731, "node_id": "MDQ6VXNlcjE2NjczMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/166731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcmvbkbc", "html_url": "https://github.com/jcmvbkbc", "followers_url": "https://api.github.com/users/jcmvbkbc/followers", "following_url": "https://api.github.com/users/jcmvbkbc/following{/other_user}", "gists_url": "https://api.github.com/users/jcmvbkbc/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcmvbkbc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcmvbkbc/subscriptions", "organizations_url": "https://api.github.com/users/jcmvbkbc/orgs", "repos_url": "https://api.github.com/users/jcmvbkbc/repos", "events_url": "https://api.github.com/users/jcmvbkbc/events{/privacy}", "received_events_url": "https://api.github.com/users/jcmvbkbc/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "389d63bb1ec188038162e599ca21cd5d72af219b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/389d63bb1ec188038162e599ca21cd5d72af219b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/389d63bb1ec188038162e599ca21cd5d72af219b"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "2e4582f9cb5d505315d62a116ff9ee604a2d69cd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c68360000ce964b0de6e333817c8b74a12deda3e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c68360000ce964b0de6e333817c8b74a12deda3e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c68360000ce964b0de6e333817c8b74a12deda3e", "patch": "@@ -1,3 +1,9 @@\n+2014-12-30  Max Filippov  <jcmvbkbc@gmail.com>\n+\n+\t* config/xtensa/xtensa.c (hwloop_optimize, hwloop_fail,\n+\thwloop_pattern_reg, xtensa_doloop_hooks, xtensa_reorg_loops):\n+\tput under #if TARGET_LOOPS guard.\n+\n 2015-01-05  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.c (output_387_binary_op): Use std::swap."}, {"sha": "0e6d286fc5d05c72b28c77db371852a4730f4dac", "filename": "gcc/config/xtensa/xtensa.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c68360000ce964b0de6e333817c8b74a12deda3e/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c68360000ce964b0de6e333817c8b74a12deda3e/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.c?ref=c68360000ce964b0de6e333817c8b74a12deda3e", "patch": "@@ -3766,6 +3766,8 @@ xtensa_invalid_within_doloop (const rtx_insn *insn)\n \n /* Optimize LOOP.  */\n \n+#if TARGET_LOOPS\n+\n static bool\n hwloop_optimize (hwloop_info loop)\n {\n@@ -3951,6 +3953,12 @@ xtensa_reorg_loops (void)\n {\n   reorg_loops (false, &xtensa_doloop_hooks);\n }\n+#else\n+static inline void\n+xtensa_reorg_loops (void)\n+{\n+}\n+#endif\n \n /* Implement the TARGET_MACHINE_DEPENDENT_REORG pass.  */\n "}]}