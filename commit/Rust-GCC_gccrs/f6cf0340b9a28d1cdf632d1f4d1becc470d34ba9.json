{"sha": "f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjZjZjAzNDBiOWEyOGQxY2RmNjMyZDFmNGQxYmVjYzQ3MGQzNGJhOQ==", "commit": {"author": {"name": "Asher Langton", "email": "langton2@llnl.gov", "date": "2006-06-08T21:00:26Z"}, "committer": {"name": "Asher Langton", "email": "langton@gcc.gnu.org", "date": "2006-06-08T21:00:26Z"}, "message": "re PR fortran/27786 ([4.1 only] Bad interaction between Cray pointer, assumed-size array and bounds checking)\n\n\t* cray_pointers_2.f90: Add -fbounds-check compile flag.\n\n\tPR fortran/27786\n\t* trans-array.c (gfc_conv_array_ref): Eliminate bounds checking\n\tfor assumed-size Cray pointees.\n\nFrom-SVN: r114495", "tree": {"sha": "fa0fe8318a70d74bfac6ce741d7f90f04bc1c401", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fa0fe8318a70d74bfac6ce741d7f90f04bc1c401"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9/comments", "author": null, "committer": null, "parents": [{"sha": "118ed72a74d69564dae5b8113379910357c916e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/118ed72a74d69564dae5b8113379910357c916e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/118ed72a74d69564dae5b8113379910357c916e8"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "e2a4aafa2434e3310ec0ceaa781da3de9bedb01d", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9", "patch": "@@ -1,3 +1,9 @@\n+2006-06-08  Asher Langton  <langton2@llnl.gov>\n+\t\n+\tPR fortran/27786\n+\t* trans-array.c (gfc_conv_array_ref): Eliminate bounds checking\n+\tfor assumed-size Cray pointees.\n+\n 2006-06-08  Steven G. Kargl  <kargls@comcat.net>\n \n \t* intrinsic.c (add_subroutine):  Make make_noreturn() conditional on"}, {"sha": "e3719a889fa516a9ecadbe84a231b9c5412e4bf8", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9", "patch": "@@ -1964,7 +1964,8 @@ gfc_conv_array_ref (gfc_se * se, gfc_array_ref * ar, gfc_symbol * sym,\n       gfc_add_block_to_block (&se->pre, &indexse.pre);\n \n       if (flag_bounds_check &&\n-\t  (ar->as->type != AS_ASSUMED_SIZE  || n < ar->dimen - 1))\n+\t  ((ar->as->type != AS_ASSUMED_SIZE && !ar->as->cp_was_assumed)\n+\t   || n < ar->dimen - 1))\n \t{\n \t  /* Check array bounds.  */\n \t  tree cond;"}, {"sha": "a5455d99d9a3f04512a4363f0333bc97452071cf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9", "patch": "@@ -1,3 +1,8 @@\n+2006-06-08  Asher Langton  <langton2@llnl.gov>\n+\t\n+\tPR fortran/27786\n+\t* cray_pointers_2.f90: Add -fbounds-check compile flag.\n+\t\n 2006-06-08  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \tPR target/27421"}, {"sha": "42cdf9b0b486b3a6e30fac08a72e4cdc069ba641", "filename": "gcc/testsuite/gfortran.dg/cray_pointers_2.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9/gcc%2Ftestsuite%2Fgfortran.dg%2Fcray_pointers_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9/gcc%2Ftestsuite%2Fgfortran.dg%2Fcray_pointers_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcray_pointers_2.f90?ref=f6cf0340b9a28d1cdf632d1f4d1becc470d34ba9", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do run }\n-! { dg-options \"-fcray-pointer\" }\n+! { dg-options \"-fcray-pointer -fbounds-check\" }\n ! Series of routines for testing a Cray pointer implementation\n program craytest\n   common /errors/errors(400)"}]}