{"sha": "31f1fa4e4083948c0a2953c28fca15f4f165b03e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzFmMWZhNGU0MDgzOTQ4YzBhMjk1M2MyOGZjYTE1ZjRmMTY1YjAzZQ==", "commit": {"author": {"name": "Dimitar Dimitrov", "email": "dimitar@dinux.eu", "date": "2019-06-12T19:36:34Z"}, "committer": {"name": "Dimitar Dimitrov", "email": "dimitar@gcc.gnu.org", "date": "2019-06-12T19:36:34Z"}, "message": "testsuite: Add check for overflowed IMEM region to testsuite\n\ngcc/testsuite/ChangeLog:\n\n2019-06-12  Dimitar Dimitrov  <dimitar@dinux.eu>\n\n\t* lib/gcc-dg.exp: Bail on region overflow for tiny targets.\n\t* lib/target-utils.exp: Ditto.\n\t* lib/target-supports.exp: Declare PRU target as tiny.\n\nFrom-SVN: r272206", "tree": {"sha": "18551930f7f27d8f32ed8413a4a7180d57f97c43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/18551930f7f27d8f32ed8413a4a7180d57f97c43"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/31f1fa4e4083948c0a2953c28fca15f4f165b03e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31f1fa4e4083948c0a2953c28fca15f4f165b03e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31f1fa4e4083948c0a2953c28fca15f4f165b03e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31f1fa4e4083948c0a2953c28fca15f4f165b03e/comments", "author": null, "committer": null, "parents": [{"sha": "506bd02c5a2aff1bf4679532062f1a07579a581c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/506bd02c5a2aff1bf4679532062f1a07579a581c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/506bd02c5a2aff1bf4679532062f1a07579a581c"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "10e6551f74ccb5fd87d28f7ff017ccdf79a1e1ee", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31f1fa4e4083948c0a2953c28fca15f4f165b03e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31f1fa4e4083948c0a2953c28fca15f4f165b03e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=31f1fa4e4083948c0a2953c28fca15f4f165b03e", "patch": "@@ -1,3 +1,9 @@\n+2019-06-12  Dimitar Dimitrov  <dimitar@dinux.eu>\n+\n+\t* lib/gcc-dg.exp: Bail on region overflow for tiny targets.\n+\t* lib/target-utils.exp: Ditto.\n+\t* lib/target-supports.exp: Declare PRU target as tiny.\n+\n 2019-06-12  Dimitar Dimitrov  <dimitar@dinux.eu>\n \n \t* gcc.target/pru/abi-arg-struct.c: New test."}, {"sha": "2b3290619dcdb2996b5c2cd28eaa3a03415ae1f5", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31f1fa4e4083948c0a2953c28fca15f4f165b03e/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31f1fa4e4083948c0a2953c28fca15f4f165b03e/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=31f1fa4e4083948c0a2953c28fca15f4f165b03e", "patch": "@@ -8765,6 +8765,11 @@ proc check_effective_target_tiny {} {\n \t    && [check_effective_target_avr_tiny] } {\n \t   return 1\n       }\n+      # PRU Program Counter is 16-bits, and trampolines are not supported.\n+      # Hence directly declare as a tiny target.\n+      if [istarget pru-*-*] {\n+\t   return 1\n+      }\n       return 0\n     }]\n }"}, {"sha": "23137d4702cceffdabdfad8b499a266b56248956", "filename": "gcc/testsuite/lib/target-utils.exp", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31f1fa4e4083948c0a2953c28fca15f4f165b03e/gcc%2Ftestsuite%2Flib%2Ftarget-utils.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31f1fa4e4083948c0a2953c28fca15f4f165b03e/gcc%2Ftestsuite%2Flib%2Ftarget-utils.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-utils.exp?ref=31f1fa4e4083948c0a2953c28fca15f4f165b03e", "patch": "@@ -35,6 +35,10 @@ proc ${tool}_check_unsupported_p { output } {\n           && [check_effective_target_tiny] } {\n         return \"memory full\"\n      }\n+    if { [regexp \"(^|\\n)\\[^\\n\\]*: region \\[^\\n\\]* overflowed\" $output]\n+          && [check_effective_target_tiny] } {\n+\treturn \"memory full\"\n+    }\n \n     if { [istarget spu-*-*] && \\\n \t     [string match \"*exceeds local store*\" $output] } {"}]}