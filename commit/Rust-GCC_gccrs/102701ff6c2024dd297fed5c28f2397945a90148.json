{"sha": "102701ff6c2024dd297fed5c28f2397945a90148", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTAyNzAxZmY2YzIwMjRkZDI5N2ZlZDVjMjhmMjM5Nzk0NWE5MDE0OA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-05-20T01:01:22Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-05-20T01:01:22Z"}, "message": "(output_move_qimode): Add coldfire support.\n\nFrom-SVN: r14105", "tree": {"sha": "716091da984140c2afc189732566ccc33690ebeb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/716091da984140c2afc189732566ccc33690ebeb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/102701ff6c2024dd297fed5c28f2397945a90148", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/102701ff6c2024dd297fed5c28f2397945a90148", "html_url": "https://github.com/Rust-GCC/gccrs/commit/102701ff6c2024dd297fed5c28f2397945a90148", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/102701ff6c2024dd297fed5c28f2397945a90148/comments", "author": null, "committer": null, "parents": [{"sha": "6d808a73ece60a40ca45a2ba22dc5ce7b85623ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d808a73ece60a40ca45a2ba22dc5ce7b85623ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d808a73ece60a40ca45a2ba22dc5ce7b85623ec"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "37298e500e6d80851e51e7ba2146f0f60f3981b1", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/102701ff6c2024dd297fed5c28f2397945a90148/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/102701ff6c2024dd297fed5c28f2397945a90148/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=102701ff6c2024dd297fed5c28f2397945a90148", "patch": "@@ -1497,10 +1497,13 @@ output_move_qimode (operands)\n \n   /* This is probably useless, since it loses for pushing a struct\n      of several bytes a byte at a time.\t */\n+  /* 68k family always modifies the stack pointer by at least 2, even for\n+     byte pushes.  The 5200 (coldfire) does not do this.  */\n   if (GET_CODE (operands[0]) == MEM\n       && GET_CODE (XEXP (operands[0], 0)) == PRE_DEC\n       && XEXP (XEXP (operands[0], 0), 0) == stack_pointer_rtx\n-      && ! ADDRESS_REG_P (operands[1]))\n+      && ! ADDRESS_REG_P (operands[1])\n+      && ! TARGET_5200)\n     {\n       xoperands[1] = operands[1];\n       xoperands[2]\n@@ -1551,7 +1554,10 @@ output_move_qimode (operands)\n     }\n   if (GET_CODE (operands[1]) != CONST_INT && CONSTANT_P (operands[1]))\n     return \"move%.l %1,%0\";\n-  if (ADDRESS_REG_P (operands[0]) || ADDRESS_REG_P (operands[1]))\n+  /* 68k family doesn't support byte moves to from address registers.  The\n+     5200 (coldfire) does not have this restriction.  */\n+  if ((ADDRESS_REG_P (operands[0]) || ADDRESS_REG_P (operands[1]))\n+      && ! TARGET_5200)\n     return \"move%.w %1,%0\";\n   return \"move%.b %1,%0\";\n }"}]}