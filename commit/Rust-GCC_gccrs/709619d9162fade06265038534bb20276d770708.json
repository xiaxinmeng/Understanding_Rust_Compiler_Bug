{"sha": "709619d9162fade06265038534bb20276d770708", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzA5NjE5ZDkxNjJmYWRlMDYyNjUwMzg1MzRiYjIwMjc2ZDc3MDcwOA==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2002-01-24T01:32:12Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@gcc.gnu.org", "date": "2002-01-24T01:32:12Z"}, "message": "c-parse.in (parmlist_or_identifiers): Add maybe_attribute.\n\n2002-01-16  Aldy Hernandez  <aldyh@redhat.com>\n\n        * c-parse.in (parmlist_or_identifiers): Add maybe_attribute.\n        (parmlist_or_identifiers_1): Verify that only a parmlist follows\n        an attribute.\n\n        * gcc.dg/20020115-1.c: New.\n\nFrom-SVN: r49161", "tree": {"sha": "620c5fbe63c388e10a6c46213da70ace21421ee0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/620c5fbe63c388e10a6c46213da70ace21421ee0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/709619d9162fade06265038534bb20276d770708", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/709619d9162fade06265038534bb20276d770708", "html_url": "https://github.com/Rust-GCC/gccrs/commit/709619d9162fade06265038534bb20276d770708", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/709619d9162fade06265038534bb20276d770708/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "acae253ec1d44a69a7bbf8bb594842f56bdcc8be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acae253ec1d44a69a7bbf8bb594842f56bdcc8be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acae253ec1d44a69a7bbf8bb594842f56bdcc8be"}], "stats": {"total": 38, "additions": 36, "deletions": 2}, "files": [{"sha": "b0aeeae6160e22b0b7e57d28bfeb18d4e1b85192", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709619d9162fade06265038534bb20276d770708/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709619d9162fade06265038534bb20276d770708/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=709619d9162fade06265038534bb20276d770708", "patch": "@@ -1,3 +1,9 @@\n+2002-01-23  Aldy Hernandez  <aldyh@redhat.com>\n+\n+        * c-parse.in (parmlist_or_identifiers): Add maybe_attribute.\n+        (parmlist_or_identifiers_1): Verify that only a parmlist follows\n+        an attribute.\n+\n 2002-01-23  Richard Henderson  <rth@redhat.com>\n \n \t* expr.c (move_by_pieces_1): Extend size before negation."}, {"sha": "524d407e801b94b3125f632e8ac7348e20b3a0d2", "filename": "gcc/c-parse.in", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709619d9162fade06265038534bb20276d770708/gcc%2Fc-parse.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709619d9162fade06265038534bb20276d770708/gcc%2Fc-parse.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parse.in?ref=709619d9162fade06265038534bb20276d770708", "patch": "@@ -2605,11 +2605,12 @@ setspecs_fp:\n    where either a parmlist or an identifier list is ok.\n    Its value is a list of ..._TYPE nodes or a list of identifiers.  */\n parmlist_or_identifiers:\n+\t  maybe_attribute\n \t\t{ pushlevel (0);\n \t\t  clear_parm_order ();\n \t\t  declare_parm_level (1); }\n \t  parmlist_or_identifiers_1\n-\t\t{ $$ = $2;\n+\t\t{ $$ = $3;\n \t\t  parmlist_tags_warning ();\n \t\t  poplevel (0, 0, 0); }\n \t;\n@@ -2621,7 +2622,15 @@ parmlist_or_identifiers_1:\n \t\t  for (t = $1; t; t = TREE_CHAIN (t))\n \t\t    if (TREE_VALUE (t) == NULL_TREE)\n \t\t      error (\"`...' in old-style identifier list\");\n-\t\t  $$ = tree_cons (NULL_TREE, NULL_TREE, $1); }\n+\t\t  $$ = tree_cons (NULL_TREE, NULL_TREE, $1);\n+\n+\t\t  /* Make sure we have a parmlist after attributes.  */\n+\t\t  if ($<ttype>-1 != 0\n+\t\t      && (TREE_CODE ($$) != TREE_LIST\n+\t\t\t  || TREE_PURPOSE ($$) == 0\n+\t\t\t  || TREE_CODE (TREE_PURPOSE ($$)) != PARM_DECL))\n+\t\t    YYERROR1;\n+\t\t}\n \t;\n \n /* A nonempty list of identifiers.  */"}, {"sha": "dafeb903c679d012af1aee3fd20d5e4176f58433", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709619d9162fade06265038534bb20276d770708/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709619d9162fade06265038534bb20276d770708/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=709619d9162fade06265038534bb20276d770708", "patch": "@@ -1,3 +1,7 @@\n+2002-01-23  Aldy Hernandez  <aldyh@redhat.com>\n+\n+        * gcc.dg/20020115-1.c: New.\n+\n 2002-01-23  Bob Wilson  <bob.wilson@acm.org>\n \n \t* gcc.c-torture/compile/20001226-1.x: xfail for Xtensa."}, {"sha": "9d4ea5491f5c3d118d68015c59383dea7babf35c", "filename": "gcc/testsuite/gcc.dg/20020115-1.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709619d9162fade06265038534bb20276d770708/gcc%2Ftestsuite%2Fgcc.dg%2F20020115-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709619d9162fade06265038534bb20276d770708/gcc%2Ftestsuite%2Fgcc.dg%2F20020115-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20020115-1.c?ref=709619d9162fade06265038534bb20276d770708", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile } */\n+\n+/* Test attributes in function arguments.  */\n+/* Origin: Aldy Hernandez <aldyh@redhat.com>.  */\n+\n+#define blah __attribute__((__mode__(QI)))\n+\n+extern void bar(int *);\n+\n+void foo (blah int abc)\n+{\n+\n+\tint b[sizeof(abc) == 1 ? 1 : -1];\n+\tbar (b);\n+}"}]}