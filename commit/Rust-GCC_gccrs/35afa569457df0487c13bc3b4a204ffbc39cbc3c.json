{"sha": "35afa569457df0487c13bc3b4a204ffbc39cbc3c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzVhZmE1Njk0NTdkZjA0ODdjMTNiYzNiNGEyMDRmZmJjMzljYmMzYw==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2004-02-20T14:28:13Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-02-20T14:28:13Z"}, "message": "revert: opts.c (decode_options): Don't use DEFAULT_SHORT_ENUMS.\n\n\tRevert:\n\t2004-02-19  Kazu Hirata  <kazu@cs.umass.edu>\n\t* opts.c (decode_options): Don't use DEFAULT_SHORT_ENUMS.\n\t* system.h (DEFAULT_SHORT_ENUMS): Poison.\n\t* config/cris/cris.h: Remove a comment about\n\tDEFAULT_SHORT_ENUMS.\n\t* config/ip2k/ip2k.h: Likewise.\n\t* doc/tm.texi (DEFAULT_SHORT_ENUMS): Remove.\n\nFrom-SVN: r78168", "tree": {"sha": "012b91656bab137d3a81907c99ac97627aa04a7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/012b91656bab137d3a81907c99ac97627aa04a7f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/35afa569457df0487c13bc3b4a204ffbc39cbc3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35afa569457df0487c13bc3b4a204ffbc39cbc3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35afa569457df0487c13bc3b4a204ffbc39cbc3c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35afa569457df0487c13bc3b4a204ffbc39cbc3c/comments", "author": null, "committer": null, "parents": [{"sha": "c1c3bb0cbdb39c94cb40c5e853381ef741d2ecff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1c3bb0cbdb39c94cb40c5e853381ef741d2ecff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1c3bb0cbdb39c94cb40c5e853381ef741d2ecff"}], "stats": {"total": 35, "additions": 33, "deletions": 2}, "files": [{"sha": "5114bfd8b6ff5f441ec1160338a1cc7391400a3d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=35afa569457df0487c13bc3b4a204ffbc39cbc3c", "patch": "@@ -1,3 +1,14 @@\n+2004-02-20  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\tRevert:\n+\t2004-02-19  Kazu Hirata  <kazu@cs.umass.edu>\n+\t* opts.c (decode_options): Don't use DEFAULT_SHORT_ENUMS.\n+\t* system.h (DEFAULT_SHORT_ENUMS): Poison.\n+\t* config/cris/cris.h: Remove a comment about\n+\tDEFAULT_SHORT_ENUMS.\n+\t* config/ip2k/ip2k.h: Likewise.\n+\t* doc/tm.texi (DEFAULT_SHORT_ENUMS): Remove.\n+\n 2004-02-20  Mohan Embar  <gnustuff@thisiscool.com>\n \t    Tom Tromey  <tromey@redhat.com>\n "}, {"sha": "5110f9adbfb92484e923f0a43c5988160da6912d", "filename": "gcc/config/cris/cris.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2Fconfig%2Fcris%2Fcris.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2Fconfig%2Fcris%2Fcris.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fcris%2Fcris.h?ref=35afa569457df0487c13bc3b4a204ffbc39cbc3c", "patch": "@@ -567,6 +567,8 @@ extern int target_flags;\n /* For compatibility and historical reasons, a char should be signed.  */\n #define DEFAULT_SIGNED_CHAR 1\n \n+/* No DEFAULT_SHORT_ENUMS, please.  */\n+\n /* Note that WCHAR_TYPE_SIZE is used in cexp.y,\n    where TARGET_SHORT is not available.  */\n #undef WCHAR_TYPE"}, {"sha": "6457e8bb3eff5965702fdf1353b1179ce5c4cbde", "filename": "gcc/config/ip2k/ip2k.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2Fconfig%2Fip2k%2Fip2k.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2Fconfig%2Fip2k%2Fip2k.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fip2k%2Fip2k.h?ref=35afa569457df0487c13bc3b4a204ffbc39cbc3c", "patch": "@@ -108,6 +108,12 @@ extern int target_flags;\n \n #define DEFAULT_SIGNED_CHAR 1\n \n+/* #define DEFAULT_SHORT_ENUMS\t1\n+   This was the default for the IP2k but gcc has a bug (as of 17th May\n+   2001) in the way that library calls to the memory checker functions\n+   are issues that screws things up if an enum is not equivalent to\n+   an int.  */\n+\n #define SIZE_TYPE \"unsigned int\"\n \n #define PTRDIFF_TYPE \"int\""}, {"sha": "395eec808933dbaa1a5cc31402f5b610a40c00e8", "filename": "gcc/doc/tm.texi", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2Fdoc%2Ftm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2Fdoc%2Ftm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Ftm.texi?ref=35afa569457df0487c13bc3b4a204ffbc39cbc3c", "patch": "@@ -1605,6 +1605,15 @@ always override this default with the options @option{-fsigned-char}\n and @option{-funsigned-char}.\n @end defmac\n \n+@defmac DEFAULT_SHORT_ENUMS\n+A C expression to determine whether to give an @code{enum} type\n+only as many bytes as it takes to represent the range of possible values\n+of that type.  A nonzero value means to do that; a zero value means all\n+@code{enum} types should be allocated like @code{int}.\n+\n+If you don't define the macro, the default is 0.\n+@end defmac\n+\n @defmac SIZE_TYPE\n A C expression for a string describing the name of the data type to use\n for size values.  The typedef name @code{size_t} is defined using the"}, {"sha": "45acba3c4f765aae6a22c75ca0614ef67f3a5b5a", "filename": "gcc/opts.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2Fopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2Fopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts.c?ref=35afa569457df0487c13bc3b4a204ffbc39cbc3c", "patch": "@@ -594,6 +594,10 @@ decode_options (unsigned int argc, const char **argv)\n \n   /* Initialize whether `char' is signed.  */\n   flag_signed_char = DEFAULT_SIGNED_CHAR;\n+#ifdef DEFAULT_SHORT_ENUMS\n+  /* Initialize how much space enums occupy, by default.  */\n+  flag_short_enums = DEFAULT_SHORT_ENUMS;\n+#endif\n \n   /* Initialize target_flags before OPTIMIZATION_OPTIONS so the latter can\n      modify it.  */"}, {"sha": "31a1b92357f4ce343038ca2ed7159720b3413740", "filename": "gcc/system.h", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35afa569457df0487c13bc3b4a204ffbc39cbc3c/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=35afa569457df0487c13bc3b4a204ffbc39cbc3c", "patch": "@@ -636,8 +636,7 @@ typedef char _Bool;\n \tPROMOTED_MODE EXPAND_BUILTIN_VA_END\t\t\t\t   \\\n \tLINKER_DOES_NOT_WORK_WITH_DWARF2 FUNCTION_ARG_KEEP_AS_REFERENCE\t   \\\n \tGIV_SORT_CRITERION MAX_LONG_TYPE_SIZE MAX_LONG_DOUBLE_TYPE_SIZE\t   \\\n-\tMAX_WCHAR_TYPE_SIZE GCOV_TYPE_SIZE SHARED_SECTION_ASM_OP\t   \\\n-\tDEFAULT_SHORT_ENUMS\n+\tMAX_WCHAR_TYPE_SIZE GCOV_TYPE_SIZE SHARED_SECTION_ASM_OP\n \n /* Hooks that are no longer used.  */\n  #pragma GCC poison LANG_HOOKS_FUNCTION_MARK LANG_HOOKS_FUNCTION_FREE\t\\"}]}