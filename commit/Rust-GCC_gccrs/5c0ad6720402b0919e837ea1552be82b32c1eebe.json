{"sha": "5c0ad6720402b0919e837ea1552be82b32c1eebe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWMwYWQ2NzIwNDAyYjA5MTllODM3ZWExNTUyYmU4MmIzMmMxZWViZQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1997-12-15T07:24:29Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-12-15T07:24:29Z"}, "message": "cvt.c (cp_convert_to_pointer): Fix base conversion of pm's.\n\n\t* cvt.c (cp_convert_to_pointer): Fix base conversion of pm's.\n\n\t* pt.c (type_unification_real): Change __null to type void* with\n\ta warning.\n\nFrom-SVN: r17098", "tree": {"sha": "03592c4cfb777f6578fc5f57fc525f2370c5e85c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03592c4cfb777f6578fc5f57fc525f2370c5e85c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5c0ad6720402b0919e837ea1552be82b32c1eebe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c0ad6720402b0919e837ea1552be82b32c1eebe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c0ad6720402b0919e837ea1552be82b32c1eebe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c0ad6720402b0919e837ea1552be82b32c1eebe/comments", "author": null, "committer": null, "parents": [{"sha": "6d8ccdbbb20cdff710cd6977165bde1d763f6a40", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d8ccdbbb20cdff710cd6977165bde1d763f6a40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d8ccdbbb20cdff710cd6977165bde1d763f6a40"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "0a628dacddaf9830368b8415453d2343303a5db5", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c0ad6720402b0919e837ea1552be82b32c1eebe/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c0ad6720402b0919e837ea1552be82b32c1eebe/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5c0ad6720402b0919e837ea1552be82b32c1eebe", "patch": "@@ -1,3 +1,10 @@\n+Sun Dec 14 22:34:20 1997  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* cvt.c (cp_convert_to_pointer): Fix base conversion of pm's.\n+\n+\t* pt.c (type_unification_real): Change __null to type void* with \n+\ta warning.\n+\n Sun Dec 14 20:38:35 1997  Mark Mitchell  <mmitchell@usa.net>\n \n \t* call.c (implicit_conversion): Don't call"}, {"sha": "fdfdb7f27906b0048cfdb07e2a604b53a06f5e0b", "filename": "gcc/cp/cvt.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c0ad6720402b0919e837ea1552be82b32c1eebe/gcc%2Fcp%2Fcvt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c0ad6720402b0919e837ea1552be82b32c1eebe/gcc%2Fcp%2Fcvt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcvt.c?ref=5c0ad6720402b0919e837ea1552be82b32c1eebe", "patch": "@@ -258,11 +258,19 @@ cp_convert_to_pointer (type, expr)\n \t{\n \t  tree b1 = TYPE_OFFSET_BASETYPE (TREE_TYPE (type));\n \t  tree b2 = TYPE_OFFSET_BASETYPE (TREE_TYPE (intype));\n-\t  tree binfo = get_binfo (b1, b2, 1);\n+\t  tree binfo = get_binfo (b2, b1, 1);\n+\t  enum tree_code code = PLUS_EXPR;\n+\n \t  if (binfo == NULL_TREE)\n-\t    binfo = get_binfo (b2, b1, 1);\n+\t    {\n+\t      binfo = get_binfo (b1, b2, 1);\n+\t      code = MINUS_EXPR;\n+\t    }\n+\n \t  if (binfo == error_mark_node)\n \t    return error_mark_node;\n+\t  if (binfo && ! TREE_VIA_VIRTUAL (binfo))\n+\t    expr = size_binop (code, expr, BINFO_OFFSET (binfo));\n \t}\n \n       if (TREE_CODE (TREE_TYPE (intype)) == METHOD_TYPE"}, {"sha": "8dff4c1a01bf3c8cb0701c6a2974f3b822058fe6", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c0ad6720402b0919e837ea1552be82b32c1eebe/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c0ad6720402b0919e837ea1552be82b32c1eebe/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=5c0ad6720402b0919e837ea1552be82b32c1eebe", "patch": "@@ -3722,6 +3722,12 @@ type_unification_real (tparms, targs, parms, args, nsubsts, subr,\n \t  arg = TREE_TYPE (arg);\n \t}\n #endif\n+      if (! flag_ansi && arg == TREE_TYPE (null_node))\n+\t{\n+\t  warning (\"using type void* for NULL\");\n+\t  arg = ptr_type_node;\n+\t}\n+\n       if (! subr && TREE_CODE (arg) == REFERENCE_TYPE)\n \targ = TREE_TYPE (arg);\n "}]}