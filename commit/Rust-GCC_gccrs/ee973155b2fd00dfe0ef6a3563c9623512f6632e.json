{"sha": "ee973155b2fd00dfe0ef6a3563c9623512f6632e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWU5NzMxNTViMmZkMDBkZmUwZWY2YTM1NjNjOTYyMzUxMmY2NjMyZQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-03-09T02:10:22Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-03-09T02:10:22Z"}, "message": "re PR go/89447 (libgo largefile support is incomplete and inconsistent)\n\n\tPR go/89447\n    syscall, internal/syscall: adjust use of largefile functions\n    \n    Consistently call __go_openat for openat.  Use fstatat64, creat64,\n    sendfile64, and getdents64 where needed.\n    \n    Based on patch by Rainer Orth.\n    \n    Fixes https://gcc.gnu.org/PR89447\n    \n    Reviewed-on: https://go-review.googlesource.com/c/gofrontend/+/166420\n\nFrom-SVN: r269521", "tree": {"sha": "b6c85d9bbcbcafc6c5236cc9b99d04b65f281cdf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b6c85d9bbcbcafc6c5236cc9b99d04b65f281cdf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee973155b2fd00dfe0ef6a3563c9623512f6632e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee973155b2fd00dfe0ef6a3563c9623512f6632e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee973155b2fd00dfe0ef6a3563c9623512f6632e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee973155b2fd00dfe0ef6a3563c9623512f6632e/comments", "author": null, "committer": null, "parents": [{"sha": "9c0aa28c4818ab2477910dacdfdceb3cb33c8629", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c0aa28c4818ab2477910dacdfdceb3cb33c8629", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c0aa28c4818ab2477910dacdfdceb3cb33c8629"}], "stats": {"total": 86, "additions": 76, "deletions": 10}, "files": [{"sha": "3c0ee14c64d2c077bc17efdc56e87950be35e7a4", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -1,4 +1,4 @@\n-959260238817af3205fb9907dd92319291e6a893\n+3106ec19626d75d8275be16c86421132548fa13e\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "a602d3ac5bf78efec20bd53faafc857f7b426956", "filename": "libgo/go/internal/syscall/unix/at.go", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fat.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fat.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fat.go?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -13,12 +13,9 @@ import (\n //extern unlinkat\n func unlinkat(int32, *byte, int32) int32\n \n-//extern openat\n+//extern __go_openat\n func openat(int32, *byte, int32, syscall.Mode_t) int32\n \n-//extern fstatat\n-func fstatat(int32, *byte, *syscall.Stat_t, int32) int32\n-\n func Unlinkat(dirfd int, path string, flags int) error {\n \tvar p *byte\n \tp, err := syscall.BytePtrFromString(path)"}, {"sha": "5318d234ae39033b7bdf0eb80b3e85423423ed6e", "filename": "libgo/go/internal/syscall/unix/at_largefile.go", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fat_largefile.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fat_largefile.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fat_largefile.go?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -0,0 +1,14 @@\n+// Copyright 2019 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+// +build aix hurd linux solaris,386 solaris,sparc\n+\n+package unix\n+\n+import (\n+\t\"syscall\"\n+)\n+\n+//extern fstatat64\n+func fstatat(int32, *byte, *syscall.Stat_t, int32) int32"}, {"sha": "004c801a8ab7d0e1589f4674474e549e3a62d7f5", "filename": "libgo/go/internal/syscall/unix/at_regfile.go", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fat_regfile.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fat_regfile.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fat_regfile.go?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -0,0 +1,18 @@\n+// Copyright 2019 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+// +build !aix\n+// +build !hurd\n+// +build !linux\n+// +build !solaris !386\n+// +build !solaris !sparc\n+\n+package unix\n+\n+import (\n+\t\"syscall\"\n+)\n+\n+//extern fstatat\n+func fstatat(int32, *byte, *syscall.Stat_t, int32) int32"}, {"sha": "93f5710ba03d614c2ddd5b4bf4392d8de293707d", "filename": "libgo/go/syscall/libcall_bsd.go", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_bsd.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_bsd.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_bsd.go?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -13,8 +13,6 @@ import (\n \t\"unsafe\"\n )\n \n-//sys\tsendfile(outfd int, infd int, offset *Offset_t, count int) (written int, err error)\n-//sendfile(outfd _C_int, infd _C_int, offset *Offset_t, count Size_t) Ssize_t\n func Sendfile(outfd int, infd int, offset *int64, count int) (written int, err error) {\n \tif race.Enabled {\n \t\trace.ReleaseMerge(unsafe.Pointer(&ioSync))"}, {"sha": "c6a336cf78259c17c5baefe1e6098a9e12a67613", "filename": "libgo/go/syscall/libcall_bsd_largefile.go", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_bsd_largefile.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_bsd_largefile.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_bsd_largefile.go?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -0,0 +1,10 @@\n+// Copyright 2019 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+// +build solaris,386 solaris,sparc\n+\n+package syscall\n+\n+//sys\tsendfile(outfd int, infd int, offset *Offset_t, count int) (written int, err error)\n+//sendfile64(outfd _C_int, infd _C_int, offset *Offset_t, count Size_t) Ssize_t"}, {"sha": "388c8a7d782cedecba2957869910291363bfe9f6", "filename": "libgo/go/syscall/libcall_bsd_regfile.go", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_bsd_regfile.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_bsd_regfile.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_bsd_regfile.go?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -0,0 +1,10 @@\n+// Copyright 2019 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+// +build darwin dragonfly freebsd netbsd openbsd solaris,amd64 solaris,sparc64\n+\n+package syscall\n+\n+//sys\tsendfile(outfd int, infd int, offset *Offset_t, count int) (written int, err error)\n+//sendfile(outfd _C_int, infd _C_int, offset *Offset_t, count Size_t) Ssize_t"}, {"sha": "31d6bf19f7d777b6a8af22d5f9568c18ad13b774", "filename": "libgo/go/syscall/libcall_posix.go", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_posix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_posix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_posix.go?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -184,9 +184,6 @@ func FDZero(set *FdSet) {\n //sys\tClose(fd int) (err error)\n //close(fd _C_int) _C_int\n \n-//sys\tCreat(path string, mode uint32) (fd int, err error)\n-//creat(path *byte, mode Mode_t) _C_int\n-\n //sysnb\tDup(oldfd int) (fd int, err error)\n //dup(oldfd _C_int) _C_int\n "}, {"sha": "bf0f9fe50b6188cdf06235fc561f3dca8eb784ca", "filename": "libgo/go/syscall/libcall_posix_largefile.go", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_posix_largefile.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_posix_largefile.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_posix_largefile.go?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -8,6 +8,9 @@\n \n package syscall\n \n+//sys\tCreat(path string, mode uint32) (fd int, err error)\n+//creat64(path *byte, mode Mode_t) _C_int\n+\n //sys\tFstat(fd int, stat *Stat_t) (err error)\n //fstat64(fd _C_int, stat *Stat_t) _C_int\n "}, {"sha": "8ff721341ba5a5cabdff8a8395ce50f2d9ce66de", "filename": "libgo/go/syscall/libcall_posix_regfile.go", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_posix_regfile.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_posix_regfile.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_posix_regfile.go?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -13,6 +13,9 @@\n \n package syscall\n \n+//sys\tCreat(path string, mode uint32) (fd int, err error)\n+//creat(path *byte, mode Mode_t) _C_int\n+\n //sys\tFstat(fd int, stat *Stat_t) (err error)\n //fstat(fd _C_int, stat *Stat_t) _C_int\n "}, {"sha": "757b2293ce57e12e1d32c3a1f5f642eca43f5072", "filename": "libgo/go/syscall/libcall_solaris_largefile.go", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_solaris_largefile.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_solaris_largefile.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_solaris_largefile.go?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -0,0 +1,14 @@\n+// Copyright 2019 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+// +build solaris,386 solaris,sparc\n+\n+package syscall\n+\n+//sys Getdents(fd int, buf []byte) (n int, err error)\n+//getdents64(fd _C_int, buf *byte, nbyte Size_t) _C_int\n+\n+func ReadDirent(fd int, buf []byte) (n int, err error) {\n+\treturn Getdents(fd, buf)\n+}"}, {"sha": "fa5dd8c65a8e53b48f6e3f0ad788bcbfa5874cb0", "filename": "libgo/go/syscall/libcall_solaris_regfile.go", "status": "renamed", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_solaris_regfile.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee973155b2fd00dfe0ef6a3563c9623512f6632e/libgo%2Fgo%2Fsyscall%2Flibcall_solaris_regfile.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_solaris_regfile.go?ref=ee973155b2fd00dfe0ef6a3563c9623512f6632e", "patch": "@@ -2,6 +2,8 @@\n // Use of this source code is governed by a BSD-style\n // license that can be found in the LICENSE file.\n \n+// +build solaris,amd64 solaris,sparc64\n+\n package syscall\n \n //sys Getdents(fd int, buf []byte) (n int, err error)", "previous_filename": "libgo/go/syscall/libcall_solaris.go"}]}