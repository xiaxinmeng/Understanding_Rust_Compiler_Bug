{"sha": "58338bacdd63bfa128d5884e7ceeb47a4431d1ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTgzMzhiYWNkZDYzYmZhMTI4ZDU4ODRlN2NlZWI0N2E0NDMxZDFhZA==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2016-08-22T18:23:43Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2016-08-22T18:23:43Z"}, "message": "re PR fortran/60774 (f951: internal compiler error: Segmentation fault: 11)\n\n2016-08-22  Steven G. Kargl  <kargl@gcc.gnu.org>\n\t    Bud Davis  <jmdavis@link.com>\n\n\tPR fortran/60774\n\t* parse.c (next_free,next_fixed): Issue error for statement label\n\twithout a statement.\n\n2016-08-22  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/60774\n\t* gfortran.dg/empty_label.f: Adjust test for new error message.\n\t* gfortran.dg/empty_label.f90: Ditto.\n\t* gfortran.dg/empty_label_typedecl.f90: Ditto.\n\t* gfortran.dg/label_3.f90: Deleted (redundant with empty_label.f90).\n\t* gfortran.dg/warnings_are_errors_1.f90: Remove invalid statement label.\n\nCo-Authored-By: Bud Davis <jmdavis@link.com>\n\nFrom-SVN: r239668", "tree": {"sha": "44b65a190f59341048102a9f33002562c72f04b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/44b65a190f59341048102a9f33002562c72f04b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/58338bacdd63bfa128d5884e7ceeb47a4431d1ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58338bacdd63bfa128d5884e7ceeb47a4431d1ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58338bacdd63bfa128d5884e7ceeb47a4431d1ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/comments", "author": null, "committer": null, "parents": [{"sha": "30364ce673723a466def350c7378ddd3cc0c6c87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30364ce673723a466def350c7378ddd3cc0c6c87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30364ce673723a466def350c7378ddd3cc0c6c87"}], "stats": {"total": 52, "additions": 23, "deletions": 29}, "files": [{"sha": "3000e919f6b3d52cc5050a17b596902bc9f6140c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=58338bacdd63bfa128d5884e7ceeb47a4431d1ad", "patch": "@@ -1,3 +1,10 @@\n+2016-08-22  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\t    Bud Davis  <jmdavis@link.com>\n+\n+\tPR fortran/60774\n+\t* parse.c (next_free,next_fixed): Issue error for statement label\n+\twithout a statement.\n+\n 2016-08-22  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/61318"}, {"sha": "deba4311f2aec55b7e57ab7221ad79c028ea36c6", "filename": "gcc/fortran/parse.c", "status": "modified", "additions": 3, "deletions": 9, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ffortran%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ffortran%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fparse.c?ref=58338bacdd63bfa128d5884e7ceeb47a4431d1ad", "patch": "@@ -1071,13 +1071,8 @@ next_free (void)\n \t    }\n \n \t  if (gfc_match_eos () == MATCH_YES)\n-\t    {\n-\t      gfc_warning_now (0, \"Ignoring statement label in empty statement \"\n-\t\t\t       \"at %L\", &label_locus);\n-\t      gfc_free_st_label (gfc_statement_label);\n-\t      gfc_statement_label = NULL;\n-\t      return ST_NONE;\n-\t    }\n+\t    gfc_error_now (\"Statement label without statement at %L\",\n+\t\t\t   &label_locus);\n \t}\n     }\n   else if (c == '!')\n@@ -1333,8 +1328,7 @@ next_fixed (void)\n \n blank_line:\n   if (digit_flag)\n-    gfc_warning_now (0, \"Ignoring statement label in empty statement at %L\",\n-\t\t     &label_locus);\n+    gfc_error_now (\"Statement label without statement at %L\", &label_locus);\n \n   gfc_current_locus.lb->truncated = 0;\n   gfc_advance_line ();"}, {"sha": "013cee3798ab2d705e21a1840c2ba8afd66ea9d0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=58338bacdd63bfa128d5884e7ceeb47a4431d1ad", "patch": "@@ -1,3 +1,12 @@\n+2016-08-22  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/60774\n+\t* gfortran.dg/empty_label.f: Adjust test for new error message.\n+\t* gfortran.dg/empty_label.f90: Ditto.\n+\t* gfortran.dg/empty_label_typedecl.f90: Ditto.\n+\t* gfortran.dg/label_3.f90: Deleted (redundant with empty_label.f90).\n+\t* gfortran.dg/warnings_are_errors_1.f90: Remove invalid statement label.\n+\n 2016-08-22  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/61318"}, {"sha": "e66cb877d2ef9266423ce691076ec8d1fe1d12a6", "filename": "gcc/testsuite/gfortran.dg/empty_label.f", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_label.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_label.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_label.f?ref=58338bacdd63bfa128d5884e7ceeb47a4431d1ad", "patch": "@@ -1,7 +1,4 @@\n C { dg-do compile }\n-C { dg-options \"-Werror -fmax-errors=1\" }\n-100   ! { dg-error \"empty statement\" }\n+100   ! { dg-error \"Statement label without statement\" }\n       end\n-subroutine foo ! Not checked ...\n-end function ! ... but an error\n-C { dg-excess-errors \"warnings being treated as errors\" }\n+"}, {"sha": "eb7bc512953a658334dc613fc145f5406a8593c6", "filename": "gcc/testsuite/gfortran.dg/empty_label.f90", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_label.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_label.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_label.f90?ref=58338bacdd63bfa128d5884e7ceeb47a4431d1ad", "patch": "@@ -1,7 +1,3 @@\n ! { dg-do compile }\n-! { dg-options \"-Werror -fmax-errors=1\" }\n-100   ! { dg-error \"empty statement\" }\n+100   ! { dg-error \"Statement label without statement\" }\n end\n-subroutine foo ! Not checked ...\n-end function ! ... but an error\n-! { dg-excess-errors \"warnings being treated as errors\" }"}, {"sha": "d4e7f4781ae546c863206af3b2b7dca5f16fb562", "filename": "gcc/testsuite/gfortran.dg/empty_label_typedecl.f90", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_label_typedecl.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_label_typedecl.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_label_typedecl.f90?ref=58338bacdd63bfa128d5884e7ceeb47a4431d1ad", "patch": "@@ -1,8 +1,6 @@\n ! { dg-do compile }\n-! { dg-options \"-Werror\" }\n subroutine s\n   type t\n-  1 ! { dg-error \"empty statement\" }\n+  1 ! { dg-error \"Statement label without statement\" }\n   end type\n end subroutine\n-! { dg-excess-errors \"warnings being treated as errors\" }"}, {"sha": "5cebe935b227c43ac4610658dd1b2c2af8bb1a9b", "filename": "gcc/testsuite/gfortran.dg/label_3.f90", "status": "removed", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30364ce673723a466def350c7378ddd3cc0c6c87/gcc%2Ftestsuite%2Fgfortran.dg%2Flabel_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30364ce673723a466def350c7378ddd3cc0c6c87/gcc%2Ftestsuite%2Fgfortran.dg%2Flabel_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Flabel_3.f90?ref=30364ce673723a466def350c7378ddd3cc0c6c87", "patch": "@@ -1,5 +0,0 @@\n-! { dg-do compile }\n-! PR fortran/25756.\n-! This used to ICE due to the space after the label.\n-1 ! { dg-warning \"Ignoring statement label in empty statement\" }\n-end"}, {"sha": "150f2346a4faf72347d76b1ce7b9b1717da556ce", "filename": "gcc/testsuite/gfortran.dg/warnings_are_errors_1.f90", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarnings_are_errors_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58338bacdd63bfa128d5884e7ceeb47a4431d1ad/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarnings_are_errors_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarnings_are_errors_1.f90?ref=58338bacdd63bfa128d5884e7ceeb47a4431d1ad", "patch": "@@ -20,8 +20,6 @@ end function char_\n 1234  complex :: cplx ! { dg-error \"defined but cannot be used\" }\n       cplx = 20.\n \n-! gfc_warning_now:\n- 1 ! { dg-error \"Ignoring statement label in empty statement\" }\n        end\n ! { dg-final { output-exists-not } }\n ! { dg-excess-errors \"warnings being treated as errors\" }"}]}