{"sha": "9bd196f0e35062d309320673f46722e47744b610", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWJkMTk2ZjBlMzUwNjJkMzA5MzIwNjczZjQ2NzIyZTQ3NzQ0YjYxMA==", "commit": {"author": {"name": "Zuxy Meng", "email": "zuxy.meng@gmail.com", "date": "2007-05-29T08:09:16Z"}, "committer": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2007-05-29T08:09:16Z"}, "message": "re PR target/29498 (FTZ/DAZ for SSE should be ported to mingw32)\n\nlibgcc \n\tPR target/29498\n\t* config.host (i[34567]86-*-cygwin* | i[34567]86-*-mingw*) Add\n\tcrtfastmath.o to extra_parts.  Add i386/t-crtfm to tmake_file.\n\t* config/i386/t-crtfm: Compile crtfastmath.o with\n\t-minline-all-stringops.\n\ngcc\n\n\tPR target/29498\n\t* config/i386/t-crtfm: Compile crtfastmath.o with\n\t-minline-all-stringops.\n\t* config/i386/cygwin.h (ENDFILE_SPECS): Add crtfastmath.o.\n\t* config/i386/mingw32.h (ENDFILE_SPECS): Add crtfastmath.o.\n\n\nCo-Authored-By: Danny Smith <dannysmith@users.sourceforge.net>\n\nFrom-SVN: r125160", "tree": {"sha": "eb1b337b2a1e171bc6470b4cff4f15e867fe4ea7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb1b337b2a1e171bc6470b4cff4f15e867fe4ea7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9bd196f0e35062d309320673f46722e47744b610", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bd196f0e35062d309320673f46722e47744b610", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9bd196f0e35062d309320673f46722e47744b610", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bd196f0e35062d309320673f46722e47744b610/comments", "author": {"login": "zuxy", "id": 3745922, "node_id": "MDQ6VXNlcjM3NDU5MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3745922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zuxy", "html_url": "https://github.com/zuxy", "followers_url": "https://api.github.com/users/zuxy/followers", "following_url": "https://api.github.com/users/zuxy/following{/other_user}", "gists_url": "https://api.github.com/users/zuxy/gists{/gist_id}", "starred_url": "https://api.github.com/users/zuxy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zuxy/subscriptions", "organizations_url": "https://api.github.com/users/zuxy/orgs", "repos_url": "https://api.github.com/users/zuxy/repos", "events_url": "https://api.github.com/users/zuxy/events{/privacy}", "received_events_url": "https://api.github.com/users/zuxy/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3e90ac4e45e9533d84d9835a7e440321d305d442", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e90ac4e45e9533d84d9835a7e440321d305d442", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e90ac4e45e9533d84d9835a7e440321d305d442"}], "stats": {"total": 39, "additions": 36, "deletions": 3}, "files": [{"sha": "dfcd3890b82a8eff8ab21b10efb43686991a9670", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bd196f0e35062d309320673f46722e47744b610/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bd196f0e35062d309320673f46722e47744b610/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9bd196f0e35062d309320673f46722e47744b610", "patch": "@@ -1,3 +1,12 @@\n+2007-05-29  Zuxy Meng  <zuxy.meng@gmail.com>\n+            Danny Smith  <dannysmith@users.sourceforge.net>\n+\n+\tPR target/29498\n+\t* config/i386/t-crtfm: Compile crtfastmath.o with\n+\t-minline-all-stringops.\n+\t* config/i386/cygwin.h (ENDFILE_SPECS): Add crtfastmath.o.\n+\t* config/i386/mingw32.h (ENDFILE_SPECS): Add crtfastmath.o.\n+\n 2007-05-28  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \t* doc/md.texi: Document constraints on HP PA-RISC."}, {"sha": "22e0af2db996961d37e67e5babaddca72c632ceb", "filename": "gcc/config/i386/cygwin.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bd196f0e35062d309320673f46722e47744b610/gcc%2Fconfig%2Fi386%2Fcygwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bd196f0e35062d309320673f46722e47744b610/gcc%2Fconfig%2Fi386%2Fcygwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fcygwin.h?ref=9bd196f0e35062d309320673f46722e47744b610", "patch": "@@ -40,6 +40,10 @@ Boston, MA 02110-1301, USA.  */\n   %{pg:gcrt0%O%s}}}\\\n \"\n \n+#undef ENDFILE_SPEC\n+#define ENDFILE_SPEC \\\n+  \"%{ffast-math|funsafe-math-optimizations:crtfastmath.o%s}\"\n+\n /* Normally, -lgcc is not needed since everything in it is in the DLL, but we\n    want to allow things to be added to it when installing new versions of\n    GCC without making a new CYGWIN.DLL, so we leave it.  Profiling is handled"}, {"sha": "1145b13b3cb6e284959852989815e1992b96f8ec", "filename": "gcc/config/i386/mingw32.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bd196f0e35062d309320673f46722e47744b610/gcc%2Fconfig%2Fi386%2Fmingw32.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bd196f0e35062d309320673f46722e47744b610/gcc%2Fconfig%2Fi386%2Fmingw32.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fmingw32.h?ref=9bd196f0e35062d309320673f46722e47744b610", "patch": "@@ -86,6 +86,10 @@ Boston, MA 02110-1301, USA.  */\n #define STARTFILE_SPEC \"%{shared|mdll:dllcrt2%O%s} \\\n   %{!shared:%{!mdll:crt2%O%s}} %{pg:gcrt2%O%s}\"\n \n+#undef ENDFILE_SPEC\n+#define ENDFILE_SPEC \\\n+  \"%{ffast-math|funsafe-math-optimizations:crtfastmath.o%s}\"\n+\n /* Override startfile prefix defaults.  */\n #ifndef STANDARD_STARTFILE_PREFIX_1\n #if TARGET_64BIT_DEFAULT"}, {"sha": "fdcdd2f48ba9535b6708000c637dae57ca7ef502", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bd196f0e35062d309320673f46722e47744b610/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bd196f0e35062d309320673f46722e47744b610/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=9bd196f0e35062d309320673f46722e47744b610", "patch": "@@ -1,3 +1,12 @@\n+2007-05-29  Zuxy Meng  <zuxy.meng@gmail.com>\n+            Danny Smith  <dannysmith@users.sourceforge.net>\n+\n+\tPR target/29498\n+\t* config.host (i[34567]86-*-cygwin* | i[34567]86-*-mingw*) Add\n+\tcrtfastmath.o to extra_parts.  Add i386/t-crtfm to tmake_file.\n+\t* config/i386/t-crtfm: Compile crtfastmath.o with\n+\t-minline-all-stringops.\n+\n 2007-05-10  Richard Sandiford  <richard@codesourcery.com>\n \n \t* config.host (sparc-wrs-vxworks): New target."}, {"sha": "3e0cb47903ce8893d39fed59968fe8cf5d443eac", "filename": "libgcc/config.host", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bd196f0e35062d309320673f46722e47744b610/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bd196f0e35062d309320673f46722e47744b610/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=9bd196f0e35062d309320673f46722e47744b610", "patch": "@@ -367,9 +367,13 @@ i[34567]86-*-sysv4*)\t\t# Intel 80386's running system V.4\n \t;;\n i[4567]86-wrs-vxworks|i[4567]86-wrs-vxworksae)\n \t;;\n-i[34567]86-*-pe | i[34567]86-*-cygwin*)\n+i[34567]86-*-pe)\n \t;;\n-i[34567]86-*-mingw32* | x86_64-*-mingw*)\n+i[34567]86-*-cygwin* | i[34567]86-*-mingw*)\n+\textra_parts=\"crtfastmath.o\"\n+\ttmake_file=\"i386/t-crtfm\"\n+\t;;\n+x86_64-*-mingw*)\n \t;;\n i[34567]86-*-uwin*)\n \t;;"}, {"sha": "6e89296b2b3f9b330b3df11e89c7427c4b1cc500", "filename": "libgcc/config/i386/t-crtfm", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bd196f0e35062d309320673f46722e47744b610/libgcc%2Fconfig%2Fi386%2Ft-crtfm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bd196f0e35062d309320673f46722e47744b610/libgcc%2Fconfig%2Fi386%2Ft-crtfm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fi386%2Ft-crtfm?ref=9bd196f0e35062d309320673f46722e47744b610", "patch": "@@ -1,2 +1,5 @@\n+# This is an endfile, Use -minline-all-stringops to ensure\n+# that __builtin_memset doesn't refer to the lib function memset().\n crtfastmath.o: $(gcc_srcdir)/config/i386/crtfastmath.c\n-\t$(gcc_compile) -msse -c $(gcc_srcdir)/config/i386/crtfastmath.c\n+\t$(gcc_compile) -msse -minline-all-stringops -c \\\n+\t$(gcc_srcdir)/config/i386/crtfastmath.c"}]}