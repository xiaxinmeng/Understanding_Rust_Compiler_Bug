{"sha": "a7210984e121fb0f1c8fdb65235bb729dccd2d61", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTcyMTA5ODRlMTIxZmIwZjFjOGZkYjY1MjM1YmI3MjlkY2NkMmQ2MQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2000-10-10T11:01:30Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2000-10-10T11:01:30Z"}, "message": "configure.in (zlib_basedir): Cope with empty with_target_subdir\n\n* configure.in (zlib_basedir): Cope with empty with_target_subdir\n* configure: Rebuilt.\n\nFrom-SVN: r36823", "tree": {"sha": "c686d0686467586608a5279004f74d027231d8b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c686d0686467586608a5279004f74d027231d8b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a7210984e121fb0f1c8fdb65235bb729dccd2d61", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7210984e121fb0f1c8fdb65235bb729dccd2d61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7210984e121fb0f1c8fdb65235bb729dccd2d61", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7210984e121fb0f1c8fdb65235bb729dccd2d61/comments", "author": null, "committer": null, "parents": [{"sha": "86267898abeca01962d82d96ed7874e48688a863", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86267898abeca01962d82d96ed7874e48688a863", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86267898abeca01962d82d96ed7874e48688a863"}], "stats": {"total": 128, "additions": 65, "deletions": 63}, "files": [{"sha": "9d37bbce7bac0ceee7fb42e5435cfa7f9dbee546", "filename": "zlib/configure", "status": "modified", "additions": 63, "deletions": 62, "changes": 125, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7210984e121fb0f1c8fdb65235bb729dccd2d61/zlib%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7210984e121fb0f1c8fdb65235bb729dccd2d61/zlib%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2Fconfigure?ref=a7210984e121fb0f1c8fdb65235bb729dccd2d61", "patch": "@@ -955,7 +955,8 @@ else\n fi\n \n \n-if test \"${srcdir}\" = \".\"; then\n+if test \"x${with_target_subdir}\" != x && \\\n+   test \"${srcdir}\" = \".\"; then\n   if test \"${with_target_subdir}\" != \".\"; then\n     zlib_basedir=\"${srcdir}/${with_multisrctop}../\"\n   else\n@@ -977,7 +978,7 @@ fi\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:981: checking for $ac_word\" >&5\n+echo \"configure:982: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1007,7 +1008,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1011: checking for $ac_word\" >&5\n+echo \"configure:1012: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1056,7 +1057,7 @@ fi\n fi\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:1060: checking whether we are using GNU C\" >&5\n+echo \"configure:1061: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1065,7 +1066,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1069: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1070: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1080,7 +1081,7 @@ if test $ac_cv_prog_gcc = yes; then\n   ac_save_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\n   echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1084: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:1085: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1116,12 +1117,12 @@ fi\n # the result.\n if false; then\n   echo $ac_n \"checking for Cygwin environment\"\"... $ac_c\" 1>&6\n-echo \"configure:1120: checking for Cygwin environment\" >&5\n+echo \"configure:1121: checking for Cygwin environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_cygwin'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1125 \"configure\"\n+#line 1126 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n@@ -1132,7 +1133,7 @@ int main() {\n return __CYGWIN__;\n ; return 0; }\n EOF\n-if { (eval echo configure:1136: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1137: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_cygwin=yes\n else\n@@ -1149,19 +1150,19 @@ echo \"$ac_t\"\"$ac_cv_cygwin\" 1>&6\n CYGWIN=\n test \"$ac_cv_cygwin\" = yes && CYGWIN=yes\n echo $ac_n \"checking for mingw32 environment\"\"... $ac_c\" 1>&6\n-echo \"configure:1153: checking for mingw32 environment\" >&5\n+echo \"configure:1154: checking for mingw32 environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_mingw32'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1158 \"configure\"\n+#line 1159 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n return __MINGW32__;\n ; return 0; }\n EOF\n-if { (eval echo configure:1165: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1166: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_mingw32=yes\n else\n@@ -1180,7 +1181,7 @@ test \"$ac_cv_mingw32\" = yes && MINGW32=yes\n \n \n echo $ac_n \"checking for executable suffix\"\"... $ac_c\" 1>&6\n-echo \"configure:1184: checking for executable suffix\" >&5\n+echo \"configure:1185: checking for executable suffix\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_exeext'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1190,7 +1191,7 @@ else\n   rm -f conftest*\n   echo 'int main () { return 0; }' > conftest.$ac_ext\n   ac_cv_exeext=\n-  if { (eval echo configure:1194: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n+  if { (eval echo configure:1195: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n     for file in conftest.*; do\n       case $file in\n       *.c | *.o | *.obj) ;;\n@@ -1283,7 +1284,7 @@ fi\n # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1287: checking for $ac_word\" >&5\n+echo \"configure:1288: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1322,7 +1323,7 @@ ac_prog=ld\n if test \"$ac_cv_prog_gcc\" = yes; then\n   # Check if gcc -print-prog-name=ld gives a path.\n   echo $ac_n \"checking for ld used by GCC\"\"... $ac_c\" 1>&6\n-echo \"configure:1326: checking for ld used by GCC\" >&5\n+echo \"configure:1327: checking for ld used by GCC\" >&5\n   ac_prog=`($CC -print-prog-name=ld) 2>&5`\n   case \"$ac_prog\" in\n     # Accept absolute paths.\n@@ -1346,10 +1347,10 @@ echo \"configure:1326: checking for ld used by GCC\" >&5\n   esac\n elif test \"$with_gnu_ld\" = yes; then\n   echo $ac_n \"checking for GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1350: checking for GNU ld\" >&5\n+echo \"configure:1351: checking for GNU ld\" >&5\n else\n   echo $ac_n \"checking for non-GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1353: checking for non-GNU ld\" >&5\n+echo \"configure:1354: checking for non-GNU ld\" >&5\n fi\n if eval \"test \\\"`echo '$''{'ac_cv_path_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1385,7 +1386,7 @@ fi\n test -z \"$LD\" && { echo \"configure: error: no acceptable ld found in \\$PATH\" 1>&2; exit 1; }\n \n echo $ac_n \"checking if the linker ($LD) is GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1389: checking if the linker ($LD) is GNU ld\" >&5\n+echo \"configure:1390: checking if the linker ($LD) is GNU ld\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gnu_ld'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1401,7 +1402,7 @@ echo \"$ac_t\"\"$ac_cv_prog_gnu_ld\" 1>&6\n \n \n echo $ac_n \"checking for BSD-compatible nm\"\"... $ac_c\" 1>&6\n-echo \"configure:1405: checking for BSD-compatible nm\" >&5\n+echo \"configure:1406: checking for BSD-compatible nm\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1439,7 +1440,7 @@ echo \"$ac_t\"\"$NM\" 1>&6\n \n # Check for command to grab the raw symbol name followed by C symbol from nm.\n echo $ac_n \"checking command to parse $NM output\"\"... $ac_c\" 1>&6\n-echo \"configure:1443: checking command to parse $NM output\" >&5\n+echo \"configure:1444: checking command to parse $NM output\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sys_global_symbol_pipe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1502,11 +1503,11 @@ void nm_test_func(){}\n int main(){nm_test_var='a';nm_test_func;return 0;}\n EOF\n \n-  if { (eval echo configure:1506: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  if { (eval echo configure:1507: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n     # Now try to grab the symbols.\n     ac_nlist=conftest.nm\n   \n-    if { (eval echo configure:1510: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n+    if { (eval echo configure:1511: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n \n       # Try sorting and uniquifying the output.\n       if sort \"$ac_nlist\" | uniq > \"$ac_nlist\"T; then\n@@ -1558,7 +1559,7 @@ EOF\n \t  ac_save_CFLAGS=\"$CFLAGS\"\n \t  LIBS=\"conftestm.$ac_objext\"\n \t  CFLAGS=\"$CFLAGS$no_builtin_flag\"\n-\t  if { (eval echo configure:1562: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+\t  if { (eval echo configure:1563: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n \t    ac_pipe_works=yes\n \t  else\n \t    echo \"configure: failed program was:\" >&5\n@@ -1604,7 +1605,7 @@ fi\n echo \"$ac_t\"\"$ac_result\" 1>&6\n \n echo $ac_n \"checking for _ prefix in compiled symbols\"\"... $ac_c\" 1>&6\n-echo \"configure:1608: checking for _ prefix in compiled symbols\" >&5\n+echo \"configure:1609: checking for _ prefix in compiled symbols\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sys_symbol_underscore'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1613,10 +1614,10 @@ cat > conftest.$ac_ext <<EOF\n void nm_test_func(){}\n int main(){nm_test_func;return 0;}\n EOF\n-if { (eval echo configure:1617: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1618: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   # Now try to grab the symbols.\n   ac_nlist=conftest.nm\n-  if { (eval echo configure:1620: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n+  if { (eval echo configure:1621: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n     # See whether the symbols have a leading underscore.\n     if egrep '^. _nm_test_func' \"$ac_nlist\" >/dev/null; then\n       ac_cv_sys_symbol_underscore=yes\n@@ -1642,7 +1643,7 @@ echo \"$ac_t\"\"$ac_cv_sys_symbol_underscore\" 1>&6\n USE_SYMBOL_UNDERSCORE=${ac_cv_sys_symbol_underscore=no}\n \n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:1646: checking whether ln -s works\" >&5\n+echo \"configure:1647: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1684,8 +1685,8 @@ test \"$ac_cv_prog_gnu_ld\" = yes && libtool_flags=\"$libtool_flags --with-gnu-ld\"\n case \"$host\" in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 1688 \"configure\"' > conftest.$ac_ext\n-  if { (eval echo configure:1689: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  echo '#line 1689 \"configure\"' > conftest.$ac_ext\n+  if { (eval echo configure:1690: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n     case \"`/usr/bin/file conftest.o`\" in\n     *32-bit*)\n       LD=\"${LD-ld} -32\"\n@@ -1706,19 +1707,19 @@ case \"$host\" in\n   SAVE_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\"$CFLAGS -belf\"\n   echo $ac_n \"checking whether the C compiler needs -belf\"\"... $ac_c\" 1>&6\n-echo \"configure:1710: checking whether the C compiler needs -belf\" >&5\n+echo \"configure:1711: checking whether the C compiler needs -belf\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1715 \"configure\"\n+#line 1716 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1722: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1723: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   lt_cv_cc_needs_belf=yes\n else\n@@ -1741,7 +1742,7 @@ echo \"$ac_t\"\"$lt_cv_cc_needs_belf\" 1>&6\n   # Extract the first word of \"${ac_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1745: checking for $ac_word\" >&5\n+echo \"configure:1746: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1773,7 +1774,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1777: checking for $ac_word\" >&5\n+echo \"configure:1778: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1808,7 +1809,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1812: checking for $ac_word\" >&5\n+echo \"configure:1813: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1840,7 +1841,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1844: checking for $ac_word\" >&5\n+echo \"configure:1845: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1999,7 +2000,7 @@ EOF\n    target_all=libzgcj.la\n else\n    echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:2003: checking how to run the C preprocessor\" >&5\n+echo \"configure:2004: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -2014,13 +2015,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 2018 \"configure\"\n+#line 2019 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2024: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2025: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2031,13 +2032,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2035 \"configure\"\n+#line 2036 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2041: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2042: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2048,13 +2049,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2052 \"configure\"\n+#line 2053 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2058: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2059: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2082,17 +2083,17 @@ for ac_hdr in unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:2086: checking for $ac_hdr\" >&5\n+echo \"configure:2087: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2091 \"configure\"\n+#line 2092 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2096: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2097: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2121,12 +2122,12 @@ done\n for ac_func in getpagesize\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2125: checking for $ac_func\" >&5\n+echo \"configure:2126: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2130 \"configure\"\n+#line 2131 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2149,7 +2150,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2153: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2154: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2174,15 +2175,15 @@ fi\n done\n \n echo $ac_n \"checking for working mmap\"\"... $ac_c\" 1>&6\n-echo \"configure:2178: checking for working mmap\" >&5\n+echo \"configure:2179: checking for working mmap\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_mmap_fixed_mapped=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2186 \"configure\"\n+#line 2187 \"configure\"\n #include \"confdefs.h\"\n \n /* Thanks to Mike Haertel and Jim Avera for this test.\n@@ -2322,7 +2323,7 @@ main()\n }\n \n EOF\n-if { (eval echo configure:2326: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2327: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_mmap_fixed_mapped=yes\n else\n@@ -2347,12 +2348,12 @@ fi\n    for ac_func in memcpy strerror\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2351: checking for $ac_func\" >&5\n+echo \"configure:2352: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2356 \"configure\"\n+#line 2357 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2375,7 +2376,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2379: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2380: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2402,15 +2403,15 @@ done\n \n    if test \"$with_system_zlib\" = yes; then\n       echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n-echo \"configure:2406: checking for deflate in -lz\" >&5\n+echo \"configure:2407: checking for deflate in -lz\" >&5\n ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lz  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 2414 \"configure\"\n+#line 2415 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -2421,7 +2422,7 @@ int main() {\n deflate()\n ; return 0; }\n EOF\n-if { (eval echo configure:2425: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2426: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -2453,17 +2454,17 @@ for ac_hdr in unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:2457: checking for $ac_hdr\" >&5\n+echo \"configure:2458: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2462 \"configure\"\n+#line 2463 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2467: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2468: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*"}, {"sha": "7428241afd1c42b196a4a5dbaed507d08db5cb4d", "filename": "zlib/configure.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7210984e121fb0f1c8fdb65235bb729dccd2d61/zlib%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7210984e121fb0f1c8fdb65235bb729dccd2d61/zlib%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2Fconfigure.in?ref=a7210984e121fb0f1c8fdb65235bb729dccd2d61", "patch": "@@ -27,7 +27,8 @@ AC_ARG_ENABLE(multilib,\n dnl We may get other options which we dont document:\n dnl --with-target-subdir, --with-multisrctop, --with-multisubdir\n \n-if test \"[$]{srcdir}\" = \".\"; then\n+if test \"x[$]{with_target_subdir}\" != x && \\\n+   test \"[$]{srcdir}\" = \".\"; then\n   if test \"[$]{with_target_subdir}\" != \".\"; then\n     zlib_basedir=\"[$]{srcdir}/[$]{with_multisrctop}../\"\n   else"}]}