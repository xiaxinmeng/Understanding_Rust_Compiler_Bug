{"sha": "a5c4f5562a086b256f031f0a995d2700762e465f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVjNGY1NTYyYTA4NmIyNTZmMDMxZjBhOTk1ZDI3MDA3NjJlNDY1Zg==", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@adacore.com", "date": "2021-02-11T05:08:06Z"}, "committer": {"name": "Alexandre Oliva", "email": "oliva@gnu.org", "date": "2021-02-11T05:08:06Z"}, "message": "use -mfpu=auto for arm/simd/vmmla_1.c\n\nOn some of our arm targets, we get various -mfpu flags implicitly or\nexplicitly passed to the compiler during test runs.  The target\noptions pushed in arm_neon.h that affect vmmlaq_s32 set isa_bit_neon,\nbut the caller doesn't have that bit set, so arm_can_inline_p rejects\nthe attempt to inline it, and the test fails.\n\nAn explicit -mfpu=neon would address the compile problem, but cause\nthe assembler to reject the generated code.\n\nSo this patch adds -mfpu=auto to the test, overriding any implicit\nflags with the fpu implied by the arch.\n\n\nfor  gcc/testsuite/ChangeLog\n\n\t* gcc.target/arm/simd/vmmla_1.c: Pass -mfpu=auto.", "tree": {"sha": "b29e82d1857655cacbc133bc0e40d6116a5b76e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b29e82d1857655cacbc133bc0e40d6116a5b76e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5c4f5562a086b256f031f0a995d2700762e465f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5c4f5562a086b256f031f0a995d2700762e465f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5c4f5562a086b256f031f0a995d2700762e465f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5c4f5562a086b256f031f0a995d2700762e465f/comments", "author": null, "committer": null, "parents": [{"sha": "19c023241020e3b6f5c38f47447bc0fcbe9fef5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19c023241020e3b6f5c38f47447bc0fcbe9fef5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19c023241020e3b6f5c38f47447bc0fcbe9fef5f"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "d33ebf361d4369f33487ce2c0d8cd95de0995fa0", "filename": "gcc/testsuite/gcc.target/arm/simd/vmmla_1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c4f5562a086b256f031f0a995d2700762e465f/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fvmmla_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c4f5562a086b256f031f0a995d2700762e465f/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fvmmla_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fvmmla_1.c?ref=a5c4f5562a086b256f031f0a995d2700762e465f", "patch": "@@ -1,6 +1,6 @@\n /* { dg-do assemble } */\n /* { dg-require-effective-target arm_v8_2a_i8mm_ok } */\n-/* { dg-options \"-save-temps -O2 -march=armv8.2-a+i8mm -mfloat-abi=hard\" } */\n+/* { dg-options \"-save-temps -O2 -march=armv8.2-a+i8mm -mfpu=auto -mfloat-abi=hard\" } */\n \n #include \"arm_neon.h\"\n "}]}