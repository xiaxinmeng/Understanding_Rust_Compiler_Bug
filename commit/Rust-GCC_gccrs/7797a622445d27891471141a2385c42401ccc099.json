{"sha": "7797a622445d27891471141a2385c42401ccc099", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzc5N2E2MjI0NDVkMjc4OTE0NzExNDFhMjM4NWM0MjQwMWNjYzA5OQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2019-05-30T07:09:41Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2019-05-30T07:09:41Z"}, "message": "decl.c (grokdeclarator): Use declarator->id_loc in five error_at calls.\n\n/cp\n2019-05-31  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* decl.c (grokdeclarator): Use declarator->id_loc in five\n\terror_at calls.\n\n/testsuite\n2019-05-31  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* g++.dg/cpp0x/alias-decl-18.C: Test location too.\n\t* g++.dg/cpp0x/udlit-nofunc-neg.C: Likewise.\n\t* g++.dg/parse/crash59.C: Likewise.\n\t* g++.dg/parse/error38.C: Likewise.\n\t* g++.dg/parse/error39.C: Likewise.\n\t* g++.dg/template/crash31.C: Likewise.\n\t* g++.dg/template/operator8.C: Likewise.\n\t* g++.dg/template/operator9.C: Likewise.\n\nFrom-SVN: r271762", "tree": {"sha": "719e3f817587bfecaa3939cba3596b221bd49d6e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/719e3f817587bfecaa3939cba3596b221bd49d6e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7797a622445d27891471141a2385c42401ccc099", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7797a622445d27891471141a2385c42401ccc099", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7797a622445d27891471141a2385c42401ccc099", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7797a622445d27891471141a2385c42401ccc099/comments", "author": null, "committer": null, "parents": [{"sha": "979ca9cc9e674d046d377fc1584ce279582af491", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/979ca9cc9e674d046d377fc1584ce279582af491", "html_url": "https://github.com/Rust-GCC/gccrs/commit/979ca9cc9e674d046d377fc1584ce279582af491"}], "stats": {"total": 56, "additions": 41, "deletions": 15}, "files": [{"sha": "018139b4b4ab2f44cb3c2deefddc7b58cc1eb6bc", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7797a622445d27891471141a2385c42401ccc099/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7797a622445d27891471141a2385c42401ccc099/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=7797a622445d27891471141a2385c42401ccc099", "patch": "@@ -1,3 +1,8 @@\n+2019-05-31  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* decl.c (grokdeclarator): Use declarator->id_loc in five\n+\terror_at calls.\n+\n 2019-05-29  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/90598"}, {"sha": "bdf397e5ecb23a4db4bc85e0876892f6327de11c", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7797a622445d27891471141a2385c42401ccc099/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7797a622445d27891471141a2385c42401ccc099/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=7797a622445d27891471141a2385c42401ccc099", "patch": "@@ -10609,15 +10609,17 @@ grokdeclarator (const cp_declarator *declarator,\n      D1 ( parameter-declaration-clause) ...  */\n   if (funcdef_flag && innermost_code != cdk_function)\n     {\n-      error (\"function definition does not declare parameters\");\n+      error_at (declarator->id_loc,\n+\t\t\"function definition does not declare parameters\");\n       return error_mark_node;\n     }\n \n   if (flags == TYPENAME_FLAG\n       && innermost_code != cdk_function\n       && ! (ctype && !declspecs->any_specifiers_p))\n     {\n-      error (\"declaration of %qD as non-function\", dname);\n+      error_at (declarator->id_loc,\n+\t\t\"declaration of %qD as non-function\", dname);\n       return error_mark_node;\n     }\n \n@@ -10626,20 +10628,23 @@ grokdeclarator (const cp_declarator *declarator,\n       if (UDLIT_OPER_P (dname)\n \t  && innermost_code != cdk_function)\n \t{\n-\t  error (\"declaration of %qD as non-function\", dname);\n+\t  error_at (declarator->id_loc,\n+\t\t    \"declaration of %qD as non-function\", dname);\n \t  return error_mark_node;\n \t}\n \n       if (IDENTIFIER_ANY_OP_P (dname))\n \t{\n \t  if (typedef_p)\n \t    {\n-\t      error (\"declaration of %qD as %<typedef%>\", dname);\n+\t      error_at (declarator->id_loc,\n+\t\t\t\"declaration of %qD as %<typedef%>\", dname);\n \t      return error_mark_node;\n \t    }\n \t  else if (decl_context == PARM || decl_context == CATCHPARM)\n \t    {\n-\t      error (\"declaration of %qD as parameter\", dname);\n+\t      error_at (declarator->id_loc,\n+\t\t\t\"declaration of %qD as parameter\", dname);\n \t      return error_mark_node;\n \t    }\n \t}"}, {"sha": "f25e181bfbf978db0500882a5a5133ed2a9759e8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7797a622445d27891471141a2385c42401ccc099", "patch": "@@ -1,3 +1,14 @@\n+2019-05-31  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* g++.dg/cpp0x/alias-decl-18.C: Test location too.\n+\t* g++.dg/cpp0x/udlit-nofunc-neg.C: Likewise.\n+\t* g++.dg/parse/crash59.C: Likewise.\n+\t* g++.dg/parse/error38.C: Likewise.\n+\t* g++.dg/parse/error39.C: Likewise.\n+\t* g++.dg/template/crash31.C: Likewise.\n+\t* g++.dg/template/operator8.C: Likewise.\n+\t* g++.dg/template/operator9.C: Likewise.\n+\n 2019-05-29  Bill Schmidt  <wschmidt@linux.ibm.com>\n \n \t* gcc.target/powerpc/notoc-direct-1.c: New."}, {"sha": "1e165d88d8d9ecd29e9d787a2ead3614523a7885", "filename": "gcc/testsuite/g++.dg/cpp0x/alias-decl-18.C", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falias-decl-18.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falias-decl-18.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falias-decl-18.C?ref=7797a622445d27891471141a2385c42401ccc099", "patch": "@@ -5,5 +5,6 @@ template<typename Z> using ::T = void(int n); // { dg-error \"\" }\n template<typename Z> using operator int = void(int n); // { dg-error \"\" }\n template<typename Z> using typename U = void; // { dg-error \"\" }\n template<typename Z> using typename ::V = void(int n); // { dg-error \"\" }\n-template<typename Z> using typename ::operator bool = void(int n); // { dg-error \"\" }\n+template<typename Z> using typename ::operator bool = void(int n); // { dg-error \"39:declaration\" }\n+// { dg-error \"expected\" \"\" { target *-*-* } .-1 }\n using foo __attribute__((aligned(4)) = int; // { dg-error \"\" }"}, {"sha": "861a77ce7bf5ead68692880d01cf4f1167cbba85", "filename": "gcc/testsuite/g++.dg/cpp0x/udlit-nofunc-neg.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-nofunc-neg.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-nofunc-neg.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-nofunc-neg.C?ref=7797a622445d27891471141a2385c42401ccc099", "patch": "@@ -3,7 +3,7 @@\n // Test user-defined literals.\n // Test error on non-function declaration.\n \n-double operator\"\" _baddecl; // { dg-error \"as non-function\" }\n+double operator\"\" _baddecl; // { dg-error \"8:declaration of .operator\\\"\\\"_baddecl. as non-function\" }\n \n template<char...>\n-  int operator\"\" _badtmpldecl; // { dg-error \"as non-function\" }\n+  int operator\"\" _badtmpldecl; // { dg-error \"7:declaration of .operator\\\"\\\"_badtmpldecl. as non-function\" }"}, {"sha": "7e90dde6c8aed3434c4d5e5624a0cdceaa580d62", "filename": "gcc/testsuite/g++.dg/parse/crash59.C", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash59.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash59.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash59.C?ref=7797a622445d27891471141a2385c42401ccc099", "patch": "@@ -1,3 +1,4 @@\n // PR c++/53003\n \n-struct A{ void a{} return b  // { dg-error \"function definition|expected\" }\n+struct A{ void a{} return b  // { dg-error \"16:function definition\" }\n+// { dg-error \"expected\" \"\" { target *-*-* } .-1 }"}, {"sha": "2c64ed43b43f456adec290631799460fe6ef4a97", "filename": "gcc/testsuite/g++.dg/parse/error38.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror38.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror38.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror38.C?ref=7797a622445d27891471141a2385c42401ccc099", "patch": "@@ -1,3 +1,3 @@\n // PR c++/29003\n \n-typedef int operator !(); // { dg-error \"declaration\" }\n+typedef int operator !(); // { dg-error \"13:declaration\" }"}, {"sha": "8710e19f87c89c2449f29bed4e21426191892031", "filename": "gcc/testsuite/g++.dg/parse/error39.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror39.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror39.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ferror39.C?ref=7797a622445d27891471141a2385c42401ccc099", "patch": "@@ -1,14 +1,14 @@\n // PR c++/41769\n \n-void f(void operator+()); // { dg-error \"declaration\" }\n+void f(void operator+()); // { dg-error \"13:declaration\" }\n \n void g()\n {\n   try\n     {\n \n     }\n-  catch(void operator+()) // { dg-error \"declaration\" }\n+  catch(void operator+()) // { dg-error \"14:declaration\" }\n     {\n     }\n }"}, {"sha": "c8732c81f66ae33d4f0f441a0b525e8e1192d815", "filename": "gcc/testsuite/g++.dg/template/crash31.C", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash31.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash31.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash31.C?ref=7797a622445d27891471141a2385c42401ccc099", "patch": "@@ -1,3 +1,4 @@\n // PR c++/19063\n \n-template<operator< struct A {}; // { dg-error \"\" }\n+template<operator< struct A {}; // { dg-error \"10:declaration\" }\n+// { dg-error \"expected|extra\" \"\" { target *-*-* } .-1 }"}, {"sha": "adadc588579d60ab293a8566fcd687e7fe6dfb7d", "filename": "gcc/testsuite/g++.dg/template/operator8.C", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foperator8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foperator8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foperator8.C?ref=7797a622445d27891471141a2385c42401ccc099", "patch": "@@ -2,5 +2,6 @@\n \n struct A\n {\n-    template<operator+> void foo() {}   // { dg-error \"identifier|parameter|template arguments\" }\n+    template<operator+> void foo() {}   // { dg-error \"14:declaration\" }\n+  // { dg-error \"expected|template\" \"\" { target *-*-* } .-1 }\n };"}, {"sha": "c1303efa4cf86fb0856275eba8bc38cedfbbe192", "filename": "gcc/testsuite/g++.dg/template/operator9.C", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foperator9.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7797a622445d27891471141a2385c42401ccc099/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foperator9.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foperator9.C?ref=7797a622445d27891471141a2385c42401ccc099", "patch": "@@ -1,6 +1,7 @@\n //PR c++/27670\n \n-template<operator+> void foo(); // { dg-error \"before|parameter|template\" }\n+template<operator+> void foo(); // { dg-error \"10:declaration\" }\n+// { dg-error \"expected|template\" \"\" { target *-*-* } .-1 }\n \n void bar()\n {"}]}