{"sha": "93a4f5e06e517bee72728144cc132b5ac08bf582", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTNhNGY1ZTA2ZTUxN2JlZTcyNzI4MTQ0Y2MxMzJiNWFjMDhiZjU4Mg==", "commit": {"author": {"name": "Janis Johnson", "email": "janis187@us.ibm.com", "date": "2008-09-05T17:13:52Z"}, "committer": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2008-09-05T17:13:52Z"}, "message": "re PR target/37283 (Cannot build crtbegin.o for ARM)\n\n\tPR target/37283\n\t* opts.c (decode_options): Handle more relationships among\n\tunit-at-a-time, toplevel-reorder, and section-anchors.\n\nCo-Authored-By: Samuel Tardieu <sam@rfc1149.net>\n\nFrom-SVN: r140040", "tree": {"sha": "2f14761ac8f7045e029191d17abb04401fb2d3ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f14761ac8f7045e029191d17abb04401fb2d3ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/93a4f5e06e517bee72728144cc132b5ac08bf582", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93a4f5e06e517bee72728144cc132b5ac08bf582", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93a4f5e06e517bee72728144cc132b5ac08bf582", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93a4f5e06e517bee72728144cc132b5ac08bf582/comments", "author": null, "committer": null, "parents": [{"sha": "57f59a4580be170866f930fc30de7037cdb46cc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57f59a4580be170866f930fc30de7037cdb46cc0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57f59a4580be170866f930fc30de7037cdb46cc0"}], "stats": {"total": 37, "additions": 29, "deletions": 8}, "files": [{"sha": "053b508e2ea009cfd8fe06c4bdada11e6c5fb2ec", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93a4f5e06e517bee72728144cc132b5ac08bf582/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93a4f5e06e517bee72728144cc132b5ac08bf582/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=93a4f5e06e517bee72728144cc132b5ac08bf582", "patch": "@@ -1,3 +1,10 @@\n+2008-09-05  Janis Johnson  <janis187@us.ibm.com>\n+\t    Samuel Tardieu  <sam@rfc1149.net>\n+\n+\tPR target/37283\n+\t* opts.c (decode_options): Handle more relationships among\n+\tunit-at-a-time, toplevel-reorder, and section-anchors.\n+\n 2008-09-05  David Daney  <ddaney@avtrex.com>\n \n \t* doc/install.texi (--enable-reduced-reflection): Document new option."}, {"sha": "080f8afbb1892f891e90dad205f950bf2aac99aa", "filename": "gcc/opts.c", "status": "modified", "additions": 22, "deletions": 8, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93a4f5e06e517bee72728144cc132b5ac08bf582/gcc%2Fopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93a4f5e06e517bee72728144cc132b5ac08bf582/gcc%2Fopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts.c?ref=93a4f5e06e517bee72728144cc132b5ac08bf582", "patch": "@@ -1008,21 +1008,35 @@ decode_options (unsigned int argc, const char **argv)\n \n   handle_options (argc, argv, lang_mask);\n \n-  /* -fno-unit-at-a-time and -fno-toplevel-reorder handling.  */\n+  /* Handle related options for unit-at-a-time, toplevel-reorder, and\n+     section-anchors.  */\n   if (!flag_unit_at_a_time)\n     {\n+      if (flag_section_anchors == 1)\n+\terror (\"Section anchors must be disabled when unit-at-a-time \"\n+\t       \"is disabled.\");\n       flag_section_anchors = 0;\n+      if (flag_toplevel_reorder == 1)\n+\terror (\"Toplevel reorder must be disabled when unit-at-a-time \"\n+\t       \"is disabled.\");\n       flag_toplevel_reorder = 0;\n     }\n-  else if (!optimize && flag_toplevel_reorder == 2)\n-    /* We disable toplevel reordering at -O0 to disable transformations that\n-       might be surprising to end users and to get -fno-toplevel-reorder\n-       tested, but we keep section anchors.  */\n-    flag_toplevel_reorder = 0;\n-  else if (!flag_toplevel_reorder)\n+  if (!optimize)\n+    {\n+      /* Unless the user has asked for section anchors, we disable toplevel\n+\t reordering at -O0 to disable transformations that might be surprising\n+\t to end users and to get -fno-toplevel-reorder tested.  */\n+      if (flag_toplevel_reorder == 2 && flag_section_anchors != 1)\n+\t{\n+\t  flag_toplevel_reorder = 0;\n+\t  flag_section_anchors = 0;\n+\t}\n+    }\n+  if (!flag_toplevel_reorder)\n     {\n       if (flag_section_anchors == 1)\n-        error (\"section anchors must be disabled when toplevel reorder is disabled\");\n+\terror (\"section anchors must be disabled when toplevel reorder\"\n+\t       \" is disabled\");\n       flag_section_anchors = 0;\n     }\n "}]}