{"sha": "8857ae1c20b1a7efa789d7f95674043b3e49ac51", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODg1N2FlMWMyMGIxYTdlZmE3ODlkN2Y5NTY3NDA0M2IzZTQ5YWM1MQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2007-03-16T05:08:25Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2007-03-16T05:08:25Z"}, "message": "re PR debug/29906 (-g option creates internal compiler error)\n\ngcc/ChangeLog:\nPR debug/29906\n* dwarf2out.c (force_type_die): Adjust comment.\n(dwarf2out_imported_module_or_decl): Handle base AT_import types.\ngcc/testsuite/ChangeLog:\nPR debug/29906\n* g++.dg/debug/pr29906.C: New\n\nFrom-SVN: r122976", "tree": {"sha": "c07f79b5f6b1696929bc0a960575e32ab6389bd7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c07f79b5f6b1696929bc0a960575e32ab6389bd7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8857ae1c20b1a7efa789d7f95674043b3e49ac51", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8857ae1c20b1a7efa789d7f95674043b3e49ac51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8857ae1c20b1a7efa789d7f95674043b3e49ac51", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8857ae1c20b1a7efa789d7f95674043b3e49ac51/comments", "author": null, "committer": null, "parents": [{"sha": "94fe33db53d3073d4bd3e4ee8d49b57db6a3d7ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94fe33db53d3073d4bd3e4ee8d49b57db6a3d7ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94fe33db53d3073d4bd3e4ee8d49b57db6a3d7ad"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "c1aa2e0943e7b8a270328cb79d7e7713a7608616", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857ae1c20b1a7efa789d7f95674043b3e49ac51/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857ae1c20b1a7efa789d7f95674043b3e49ac51/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8857ae1c20b1a7efa789d7f95674043b3e49ac51", "patch": "@@ -1,3 +1,9 @@\n+2007-03-16  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR debug/29906\n+\t* dwarf2out.c (force_type_die): Adjust comment.\n+\t(dwarf2out_imported_module_or_decl): Handle base AT_import types.\n+\n 2007-03-15  DJ Delorie  <dj@redhat.com>\n \n \t* config/frv/predicates.md (minmax_operator): Don't check operands"}, {"sha": "fa00452e594efe0ad09bb6fded911bf8ce423082", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857ae1c20b1a7efa789d7f95674043b3e49ac51/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857ae1c20b1a7efa789d7f95674043b3e49ac51/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=8857ae1c20b1a7efa789d7f95674043b3e49ac51", "patch": "@@ -13160,7 +13160,8 @@ force_decl_die (tree decl)\n   return decl_die;\n }\n \n-/* Returns the DIE for TYPE.  A DIE is always returned.  */\n+/* Returns the DIE for TYPE, that must not be a base type.  A DIE is\n+   always returned.  */\n \n static dw_die_ref\n force_type_die (tree type)\n@@ -13488,7 +13489,12 @@ dwarf2out_imported_module_or_decl (tree decl, tree context)\n \n   /* For TYPE_DECL or CONST_DECL, lookup TREE_TYPE.  */\n   if (TREE_CODE (decl) == TYPE_DECL || TREE_CODE (decl) == CONST_DECL)\n-    at_import_die = force_type_die (TREE_TYPE (decl));\n+    {\n+      if (is_base_type (TREE_TYPE (decl)))\n+\tat_import_die = base_type_die (TREE_TYPE (decl));\n+      else\n+\tat_import_die = force_type_die (TREE_TYPE (decl));\n+    }\n   else\n     {\n       at_import_die = lookup_decl_die (decl);"}, {"sha": "395028ac3e88c66b1c4db1266b02178729c9f3b9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857ae1c20b1a7efa789d7f95674043b3e49ac51/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857ae1c20b1a7efa789d7f95674043b3e49ac51/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8857ae1c20b1a7efa789d7f95674043b3e49ac51", "patch": "@@ -1,3 +1,8 @@\n+2007-03-16  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR debug/29906\n+\t* g++.dg/debug/pr29906.C: New\n+\n 2007-03-15  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR libgfortran/31099"}, {"sha": "08bbe879bed55ea0fb944400d8ce43be99c56ee1", "filename": "gcc/testsuite/g++.dg/debug/pr29906.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857ae1c20b1a7efa789d7f95674043b3e49ac51/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fpr29906.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857ae1c20b1a7efa789d7f95674043b3e49ac51/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fpr29906.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fpr29906.C?ref=8857ae1c20b1a7efa789d7f95674043b3e49ac51", "patch": "@@ -0,0 +1,10 @@\n+// { dg-do compile }\n+// { dg-options \"-g -fno-emit-class-debug-always\" }\n+\n+struct A{\n+  typedef int T;\n+  virtual ~A();\n+};\n+struct B:public A{\n+  using A::T;\n+};"}]}