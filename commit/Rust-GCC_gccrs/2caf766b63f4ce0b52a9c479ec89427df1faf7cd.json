{"sha": "2caf766b63f4ce0b52a9c479ec89427df1faf7cd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmNhZjc2NmI2M2Y0Y2UwYjUyYTljNDc5ZWM4OTQyN2RmMWZhZjdjZA==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2007-06-26T00:19:44Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2007-06-26T00:19:44Z"}, "message": "re PR tree-optimization/32421 (-ftree-vectorize -msse2 ICEs in build2_stat when vectorizing POINTER_PLUS_EXPR)\n\n2007-06-25  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR tree-opt/32421\n        * tree-vect-transform.c (vectorizable_operation): Convert\n        POINTER_PLUS_EXPR over to PLUS_EXPR.\n\n\n2007-06-25  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR tree-opt/32421\n        * gcc.dg/vect/pr32421.c: New test.\n\nFrom-SVN: r126012", "tree": {"sha": "c135ea5e05f2bb5a18ae2bac92536924cd1f5c1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c135ea5e05f2bb5a18ae2bac92536924cd1f5c1c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2caf766b63f4ce0b52a9c479ec89427df1faf7cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2caf766b63f4ce0b52a9c479ec89427df1faf7cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2caf766b63f4ce0b52a9c479ec89427df1faf7cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2caf766b63f4ce0b52a9c479ec89427df1faf7cd/comments", "author": null, "committer": null, "parents": [{"sha": "20ec6b51501a3f0771e88ab2932e4287e3f5b6e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20ec6b51501a3f0771e88ab2932e4287e3f5b6e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/20ec6b51501a3f0771e88ab2932e4287e3f5b6e8"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "dcaa66b01e8fd7b5e5d21c0711239d53b335a3d3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2caf766b63f4ce0b52a9c479ec89427df1faf7cd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2caf766b63f4ce0b52a9c479ec89427df1faf7cd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2caf766b63f4ce0b52a9c479ec89427df1faf7cd", "patch": "@@ -1,3 +1,9 @@\n+2007-06-25  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR tree-opt/32421\n+\t* tree-vect-transform.c (vectorizable_operation): Convert\n+\tPOINTER_PLUS_EXPR over to PLUS_EXPR.\n+\n 2007-06-25  Chao-ying Fu  <fu@mips.com>\n \n \t* doc/rtl.texi (Machine Modes): Document QQ, HQ, SQ, DQ, TQ,"}, {"sha": "8cd252119100ebab11ac89d78687cc3d0526941e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2caf766b63f4ce0b52a9c479ec89427df1faf7cd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2caf766b63f4ce0b52a9c479ec89427df1faf7cd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2caf766b63f4ce0b52a9c479ec89427df1faf7cd", "patch": "@@ -1,3 +1,8 @@\n+2007-06-25  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR tree-opt/32421\n+\t* gcc.dg/vect/pr32421.c: New test.\n+\n 2006-06-26  Simon Martin  <simartin@users.sourceforge.net>\n \n \tPR c++/32111"}, {"sha": "68d51bd74aa9605319be3018a0f4f47290ed5beb", "filename": "gcc/testsuite/gcc.dg/vect/pr32421.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2caf766b63f4ce0b52a9c479ec89427df1faf7cd/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr32421.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2caf766b63f4ce0b52a9c479ec89427df1faf7cd/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr32421.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr32421.c?ref=2caf766b63f4ce0b52a9c479ec89427df1faf7cd", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+\n+\n+int f(int **__restrict a, int ** __restrict b)\n+{\n+  int i;\n+  for(i= 0;i<32;i++)\n+    a[i] = b[i] + 1;\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */\n+"}, {"sha": "66228f006f1c546a44566abb84040572161e187d", "filename": "gcc/tree-vect-transform.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2caf766b63f4ce0b52a9c479ec89427df1faf7cd/gcc%2Ftree-vect-transform.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2caf766b63f4ce0b52a9c479ec89427df1faf7cd/gcc%2Ftree-vect-transform.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-transform.c?ref=2caf766b63f4ce0b52a9c479ec89427df1faf7cd", "patch": "@@ -2968,6 +2968,12 @@ vectorizable_operation (tree stmt, block_stmt_iterator *bsi, tree *vec_stmt)\n \n   operation = GIMPLE_STMT_OPERAND (stmt, 1);\n   code = TREE_CODE (operation);\n+\n+  /* For pointer addition, we should use the normal plus for\n+     the vector addition.  */\n+  if (code == POINTER_PLUS_EXPR)\n+    code = PLUS_EXPR;\n+\n   optab = optab_for_tree_code (code, vectype);\n \n   /* Support only unary or binary operations.  */"}]}