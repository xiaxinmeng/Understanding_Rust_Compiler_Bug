{"sha": "07d1940e1c7592fc5e3315493b2f8db9a591cfb8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDdkMTk0MGUxYzc1OTJmYzVlMzMxNTQ5M2IyZjhkYjlhNTkxY2ZiOA==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2003-06-27T17:33:51Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2003-06-27T17:33:51Z"}, "message": "configure.in: Clean up config-lang.in handling.\n\n\t* configure.in: Clean up config-lang.in handling.  Delete\n\tuseless assignment to \"subdirs\".\n\t* configure: Regenerate.\n\nFrom-SVN: r68588", "tree": {"sha": "ba85d370e640ae826d2ff0d64809c5e502cf23b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba85d370e640ae826d2ff0d64809c5e502cf23b1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/07d1940e1c7592fc5e3315493b2f8db9a591cfb8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07d1940e1c7592fc5e3315493b2f8db9a591cfb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07d1940e1c7592fc5e3315493b2f8db9a591cfb8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07d1940e1c7592fc5e3315493b2f8db9a591cfb8/comments", "author": null, "committer": null, "parents": [{"sha": "3006aa689d554fe346cf500faf4944075c0d057e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3006aa689d554fe346cf500faf4944075c0d057e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3006aa689d554fe346cf500faf4944075c0d057e"}], "stats": {"total": 210, "additions": 117, "deletions": 93}, "files": [{"sha": "a00b87b0fbaa31a799036d648b4606c487e71ae3", "filename": "ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07d1940e1c7592fc5e3315493b2f8db9a591cfb8/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07d1940e1c7592fc5e3315493b2f8db9a591cfb8/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=07d1940e1c7592fc5e3315493b2f8db9a591cfb8", "patch": "@@ -1,3 +1,9 @@\n+2003-06-27  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\t* configure.in: Clean up config-lang.in handling.  Delete\n+\tuseless assignment to \"subdirs\".\n+\t* configure: Regenerate.\n+\n 2003-06-26  Nathanael Nerode  <neroden@gcc.gnu.org>\n \n \t* configure.in: Rename 'target_libs' to 'target_libraries'."}, {"sha": "7f4c2f1f022267cf1bacc0cf9a9b91715d6e4d69", "filename": "configure", "status": "modified", "additions": 72, "deletions": 63, "changes": 135, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07d1940e1c7592fc5e3315493b2f8db9a591cfb8/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07d1940e1c7592fc5e3315493b2f8db9a591cfb8/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=07d1940e1c7592fc5e3315493b2f8db9a591cfb8", "patch": "@@ -1441,60 +1441,69 @@ enable_languages=`echo \"${enable_languages}\" | sed -e 's/[ \t,][ \t,]*/,/g' -e 's/\n # First scan to see if an enabled language requires some other language.\n # We assume that a given config-lang.in will list all the language\n # front ends it requires, even if some are required indirectly.\n-for lang in ${srcdir}/gcc/*/config-lang.in ..\n-do\n-  case $lang in\n+for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do\n+  case ${lang_frag} in\n     ..) ;;\n     # The odd quoting in the next line works around\n     # an apparent bug in bash 1.12 on linux.\n     ${srcdir}/gcc/[*]/config-lang.in) ;;\n     *)\n-      lang_alias=`sed -n -e 's,^language=['\"'\"'\"'\"]\\(.*\\)[\"'\"'\"'\"'].*$,\\1,p' -e 's,^language=\\([^ \t]*\\).*$,\\1,p' $lang`\n-      this_lang_requires=`sed -n -e 's,^lang_requires=['\"'\"'\"'\"]\\(.*\\)[\"'\"'\"'\"'].*$,\\1,p' -e 's,^lang_requires=\\([^ \t]*\\).*$,\\1,p' $lang`\n-      for other in $this_lang_requires\n-      do\n+      # From the config-lang.in, get $language, $lang_requires\n+      language=\n+      lang_requires=\n+      . ${lang_frag}\n+      for other in ${lang_requires} ; do\n         case ,${enable_languages}, in\n \t  *,$other,*) ;;\n \t  *,all,*) ;;\n-\t  *,$lang_alias,*)\n-\t    echo \" \\`$other' language required by \\`$lang_alias'; enabling\" 1>&2\n-\t    enable_languages=\"$enable_languages,$other\"\n+\t  *,$language,*)\n+\t    echo \" \\`$other' language required by \\`$language'; enabling\" 1>&2\n+\t    enable_languages=\"${enable_languages},${other}\"\n \t    ;;\n \tesac\n       done\n       ;;\n   esac\n done\n \n-subdirs=\n-for lang in ${srcdir}/gcc/*/config-lang.in ..\n-do\n-  case $lang in\n+for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do\n+  case ${lang_frag} in\n     ..) ;;\n     # The odd quoting in the next line works around\n     # an apparent bug in bash 1.12 on linux.\n     ${srcdir}/gcc/[*]/config-lang.in) ;;\n     *)\n-      lang_alias=`sed -n -e 's,^language=['\"'\"'\"'\"]\\(.*\\)[\"'\"'\"'\"'].*$,\\1,p' -e 's,^language=\\([^ \t]*\\).*$,\\1,p' $lang`\n-      this_lang_libs=`sed -n -e 's,^target_libs=['\"'\"'\"'\"]\\(.*\\)[\"'\"'\"'\"'].*$,\\1,p' -e 's,^target_libs=\\([^ \t]*\\).*$,\\1,p' $lang`\n-      this_lang_dirs=`sed -n -e 's,^lang_dirs=['\"'\"'\"'\"]\\(.*\\)[\"'\"'\"'\"'].*$,\\1,p' -e 's,^lang_dirs=\\([^ \t]*\\).*$,\\1,p' $lang`\n-      build_by_default=`sed -n -e 's,^build_by_default=['\"'\"'\"'\"]\\(.*\\)[\"'\"'\"'\"'].*$,\\1,p' -e 's,^build_by_default=\\([^ \t]*\\).*$,\\1,p' $lang`\n-      if test \"x$lang_alias\" = x\n-         then\n-        echo \"$lang doesn't set \\$language.\" 1>&2\n+      # From the config-lang.in, get $language, $target_libs, \n+      # $lang_dirs, and $build_by_default\n+      language=\n+      target_libs=\n+      lang_dirs=\n+      build_by_default=\n+      . ${lang_frag}\n+      if test \"x$language\" = x ; then\n+        echo \"${lang_frag} doesn't set \\$language.\" 1>&2\n         exit 1\n       fi\n-      case ${build_by_default},${enable_languages}, in\n-        *,$lang_alias,*) add_this_lang=yes ;;\n-        no,*) add_this_lang=no ;;\n-        *,all,*) add_this_lang=yes ;;\n+      case ,${enable_languages}, in\n+        *,${language},*)\n+          # Language was explicitly selected; include it.\n+          add_this_lang=yes\n+          ;;\n+        *,all,*)\n+          # 'all' was selected; include 'default' languages.\n+          case ${build_by_default} in\n+            no) add_this_lang=no ;;\n+            *) add_this_lang=yes ;;\n+          esac \n+          ;;\n         *) add_this_lang=no ;;\n       esac\n-      if test x\"${add_this_lang}\" = xyes; then\n-        :\n-      else\n-        eval noconfigdirs='\"$noconfigdirs \"'\\\"$this_lang_libs $this_lang_dirs\\\"\n-      fi\n+      case ${add_this_lang} in\n+        no)\n+          # Remove language-dependent dirs.\n+          eval noconfigdirs='\"$noconfigdirs \"'\\\"$target_libs $lang_dirs\\\"\n+          ;;\n+      esac\n       ;;\n   esac\n done\n@@ -2699,7 +2708,7 @@ test -n \"$target_alias\" && ncn_target_tool_prefix=$target_alias-\n   # Extract the first word of \"${ncn_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2703: checking for $ac_word\" >&5\n+echo \"configure:2712: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2732,7 +2741,7 @@ if test -z \"$ac_cv_prog_AR\" ; then\n     # Extract the first word of \"ar\", so it can be a program name with args.\n set dummy ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2736: checking for $ac_word\" >&5\n+echo \"configure:2745: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2771,7 +2780,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2775: checking for $ac_word\" >&5\n+echo \"configure:2784: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2804,7 +2813,7 @@ if test -z \"$ac_cv_prog_AS\" ; then\n     # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2808: checking for $ac_word\" >&5\n+echo \"configure:2817: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2843,7 +2852,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2847: checking for $ac_word\" >&5\n+echo \"configure:2856: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2876,7 +2885,7 @@ if test -z \"$ac_cv_prog_DLLTOOL\" ; then\n     # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2880: checking for $ac_word\" >&5\n+echo \"configure:2889: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2915,7 +2924,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}ld\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2919: checking for $ac_word\" >&5\n+echo \"configure:2928: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2948,7 +2957,7 @@ if test -z \"$ac_cv_prog_LD\" ; then\n     # Extract the first word of \"ld\", so it can be a program name with args.\n set dummy ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2952: checking for $ac_word\" >&5\n+echo \"configure:2961: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2987,7 +2996,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}nm\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2991: checking for $ac_word\" >&5\n+echo \"configure:3000: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3020,7 +3029,7 @@ if test -z \"$ac_cv_prog_NM\" ; then\n     # Extract the first word of \"nm\", so it can be a program name with args.\n set dummy nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3024: checking for $ac_word\" >&5\n+echo \"configure:3033: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3059,7 +3068,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3063: checking for $ac_word\" >&5\n+echo \"configure:3072: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3092,7 +3101,7 @@ if test -z \"$ac_cv_prog_RANLIB\" ; then\n     # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3096: checking for $ac_word\" >&5\n+echo \"configure:3105: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3131,7 +3140,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}windres\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3135: checking for $ac_word\" >&5\n+echo \"configure:3144: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3164,7 +3173,7 @@ if test -z \"$ac_cv_prog_WINDRES\" ; then\n     # Extract the first word of \"windres\", so it can be a program name with args.\n set dummy windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3168: checking for $ac_word\" >&5\n+echo \"configure:3177: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3203,7 +3212,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}objcopy\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}objcopy; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3207: checking for $ac_word\" >&5\n+echo \"configure:3216: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3236,7 +3245,7 @@ if test -z \"$ac_cv_prog_OBJCOPY\" ; then\n     # Extract the first word of \"objcopy\", so it can be a program name with args.\n set dummy objcopy; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3240: checking for $ac_word\" >&5\n+echo \"configure:3249: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3275,7 +3284,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}objdump\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}objdump; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3279: checking for $ac_word\" >&5\n+echo \"configure:3288: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3308,7 +3317,7 @@ if test -z \"$ac_cv_prog_OBJDUMP\" ; then\n     # Extract the first word of \"objdump\", so it can be a program name with args.\n set dummy objdump; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3312: checking for $ac_word\" >&5\n+echo \"configure:3321: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3356,7 +3365,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3360: checking for $ac_word\" >&5\n+echo \"configure:3369: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3389,7 +3398,7 @@ if test -z \"$ac_cv_prog_AR_FOR_TARGET\" ; then\n     # Extract the first word of \"ar\", so it can be a program name with args.\n set dummy ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3393: checking for $ac_word\" >&5\n+echo \"configure:3402: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3428,7 +3437,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3432: checking for $ac_word\" >&5\n+echo \"configure:3441: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3461,7 +3470,7 @@ if test -z \"$ac_cv_prog_AS_FOR_TARGET\" ; then\n     # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3465: checking for $ac_word\" >&5\n+echo \"configure:3474: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3500,7 +3509,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3504: checking for $ac_word\" >&5\n+echo \"configure:3513: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3533,7 +3542,7 @@ if test -z \"$ac_cv_prog_DLLTOOL_FOR_TARGET\" ; then\n     # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3537: checking for $ac_word\" >&5\n+echo \"configure:3546: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3572,7 +3581,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ld\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3576: checking for $ac_word\" >&5\n+echo \"configure:3585: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3605,7 +3614,7 @@ if test -z \"$ac_cv_prog_LD_FOR_TARGET\" ; then\n     # Extract the first word of \"ld\", so it can be a program name with args.\n set dummy ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3609: checking for $ac_word\" >&5\n+echo \"configure:3618: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3644,7 +3653,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}nm\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3648: checking for $ac_word\" >&5\n+echo \"configure:3657: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3677,7 +3686,7 @@ if test -z \"$ac_cv_prog_NM_FOR_TARGET\" ; then\n     # Extract the first word of \"nm\", so it can be a program name with args.\n set dummy nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3681: checking for $ac_word\" >&5\n+echo \"configure:3690: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3716,7 +3725,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3720: checking for $ac_word\" >&5\n+echo \"configure:3729: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3749,7 +3758,7 @@ if test -z \"$ac_cv_prog_RANLIB_FOR_TARGET\" ; then\n     # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3753: checking for $ac_word\" >&5\n+echo \"configure:3762: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3788,7 +3797,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}windres\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3792: checking for $ac_word\" >&5\n+echo \"configure:3801: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3821,7 +3830,7 @@ if test -z \"$ac_cv_prog_WINDRES_FOR_TARGET\" ; then\n     # Extract the first word of \"windres\", so it can be a program name with args.\n set dummy windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3825: checking for $ac_word\" >&5\n+echo \"configure:3834: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3888,7 +3897,7 @@ RANLIB_FOR_TARGET=${RANLIB_FOR_TARGET}${extra_ranlibflags_for_target}\n NM_FOR_TARGET=${NM_FOR_TARGET}${extra_nmflags_for_target}\n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:3892: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:3901: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\""}, {"sha": "1ace2dca0566f3a800cefeae294461912f74309e", "filename": "configure.in", "status": "modified", "additions": 39, "deletions": 30, "changes": 69, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07d1940e1c7592fc5e3315493b2f8db9a591cfb8/configure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07d1940e1c7592fc5e3315493b2f8db9a591cfb8/configure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.in?ref=07d1940e1c7592fc5e3315493b2f8db9a591cfb8", "patch": "@@ -755,60 +755,69 @@ enable_languages=`echo \"${enable_languages}\" | sed -e 's/[[ \t,]][[ \t,]]*/,/g' -e\n # First scan to see if an enabled language requires some other language.\n # We assume that a given config-lang.in will list all the language\n # front ends it requires, even if some are required indirectly.\n-for lang in ${srcdir}/gcc/*/config-lang.in ..\n-do\n-  case $lang in\n+for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do\n+  case ${lang_frag} in\n     ..) ;;\n     # The odd quoting in the next line works around\n     # an apparent bug in bash 1.12 on linux.\n     ${srcdir}/gcc/[[*]]/config-lang.in) ;;\n     *)\n-      lang_alias=`sed -n -e 's,^language=[['\"'\"'\"'\"]]\\(.*\\)[[\"'\"'\"'\"']].*$,\\1,p' -e 's,^language=\\([[^ \t]]*\\).*$,\\1,p' $lang`\n-      this_lang_requires=`sed -n -e 's,^lang_requires=[['\"'\"'\"'\"]]\\(.*\\)[[\"'\"'\"'\"']].*$,\\1,p' -e 's,^lang_requires=\\([[^ \t]]*\\).*$,\\1,p' $lang`\n-      for other in $this_lang_requires\n-      do\n+      # From the config-lang.in, get $language, $lang_requires\n+      language=\n+      lang_requires=\n+      . ${lang_frag}\n+      for other in ${lang_requires} ; do\n         case ,${enable_languages}, in\n \t  *,$other,*) ;;\n \t  *,all,*) ;;\n-\t  *,$lang_alias,*)\n-\t    echo \" \\`$other' language required by \\`$lang_alias'; enabling\" 1>&2\n-\t    enable_languages=\"$enable_languages,$other\"\n+\t  *,$language,*)\n+\t    echo \" \\`$other' language required by \\`$language'; enabling\" 1>&2\n+\t    enable_languages=\"${enable_languages},${other}\"\n \t    ;;\n \tesac\n       done\n       ;;\n   esac\n done\n \n-subdirs=\n-for lang in ${srcdir}/gcc/*/config-lang.in ..\n-do\n-  case $lang in\n+for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do\n+  case ${lang_frag} in\n     ..) ;;\n     # The odd quoting in the next line works around\n     # an apparent bug in bash 1.12 on linux.\n     ${srcdir}/gcc/[[*]]/config-lang.in) ;;\n     *)\n-      lang_alias=`sed -n -e 's,^language=[['\"'\"'\"'\"]]\\(.*\\)[[\"'\"'\"'\"']].*$,\\1,p' -e 's,^language=\\([[^ \t]]*\\).*$,\\1,p' $lang`\n-      this_lang_libs=`sed -n -e 's,^target_libs=[['\"'\"'\"'\"]]\\(.*\\)[[\"'\"'\"'\"']].*$,\\1,p' -e 's,^target_libs=\\([[^ \t]]*\\).*$,\\1,p' $lang`\n-      this_lang_dirs=`sed -n -e 's,^lang_dirs=[['\"'\"'\"'\"]]\\(.*\\)[[\"'\"'\"'\"']].*$,\\1,p' -e 's,^lang_dirs=\\([[^ \t]]*\\).*$,\\1,p' $lang`\n-      build_by_default=`sed -n -e 's,^build_by_default=[['\"'\"'\"'\"]]\\(.*\\)[[\"'\"'\"'\"']].*$,\\1,p' -e 's,^build_by_default=\\([[^ \t]]*\\).*$,\\1,p' $lang`\n-      if test \"x$lang_alias\" = x\n-         then\n-        echo \"$lang doesn't set \\$language.\" 1>&2\n+      # From the config-lang.in, get $language, $target_libs, \n+      # $lang_dirs, and $build_by_default\n+      language=\n+      target_libs=\n+      lang_dirs=\n+      build_by_default=\n+      . ${lang_frag}\n+      if test \"x$language\" = x ; then\n+        echo \"${lang_frag} doesn't set \\$language.\" 1>&2\n         exit 1\n       fi\n-      case ${build_by_default},${enable_languages}, in\n-        *,$lang_alias,*) add_this_lang=yes ;;\n-        no,*) add_this_lang=no ;;\n-        *,all,*) add_this_lang=yes ;;\n+      case ,${enable_languages}, in\n+        *,${language},*)\n+          # Language was explicitly selected; include it.\n+          add_this_lang=yes\n+          ;;\n+        *,all,*)\n+          # 'all' was selected; include 'default' languages.\n+          case ${build_by_default} in\n+            no) add_this_lang=no ;;\n+            *) add_this_lang=yes ;;\n+          esac \n+          ;;\n         *) add_this_lang=no ;;\n       esac\n-      if test x\"${add_this_lang}\" = xyes; then\n-        :\n-      else\n-        eval noconfigdirs='\"$noconfigdirs \"'\\\"$this_lang_libs $this_lang_dirs\\\"\n-      fi\n+      case ${add_this_lang} in\n+        no)\n+          # Remove language-dependent dirs.\n+          eval noconfigdirs='\"$noconfigdirs \"'\\\"$target_libs $lang_dirs\\\"\n+          ;;\n+      esac\n       ;;\n   esac\n done"}]}