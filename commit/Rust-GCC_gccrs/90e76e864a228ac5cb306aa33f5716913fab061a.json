{"sha": "90e76e864a228ac5cb306aa33f5716913fab061a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTBlNzZlODY0YTIyOGFjNWNiMzA2YWEzM2Y1NzE2OTEzZmFiMDYxYQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-11-11T22:20:56Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-11-11T22:20:56Z"}, "message": "dostime.c (dos2unixtime): Mask for seconds is 0x1f.\n\n\t* dostime.c (dos2unixtime): Mask for seconds is 0x1f.  Correctly\n\tcompute month.\n\t(unix2dostime): Handle years before 1980.  Correctly compute month\n\tand day of month.\n\nFrom-SVN: r59027", "tree": {"sha": "7ede7b92af25472f234c9fbc72532e09c8aadda5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7ede7b92af25472f234c9fbc72532e09c8aadda5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/90e76e864a228ac5cb306aa33f5716913fab061a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90e76e864a228ac5cb306aa33f5716913fab061a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90e76e864a228ac5cb306aa33f5716913fab061a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90e76e864a228ac5cb306aa33f5716913fab061a/comments", "author": null, "committer": null, "parents": [{"sha": "303b90b00106ed64c731827336490830ebf6ca4a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/303b90b00106ed64c731827336490830ebf6ca4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/303b90b00106ed64c731827336490830ebf6ca4a"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "5adc87d3db639cd8c504db5aeafd10dcea192e00", "filename": "fastjar/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90e76e864a228ac5cb306aa33f5716913fab061a/fastjar%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90e76e864a228ac5cb306aa33f5716913fab061a/fastjar%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FChangeLog?ref=90e76e864a228ac5cb306aa33f5716913fab061a", "patch": "@@ -1,3 +1,10 @@\n+2002-11-11  Tom Tromey  <tromey@redhat.com>\n+\n+\t* dostime.c (dos2unixtime): Mask for seconds is 0x1f.  Correctly\n+\tcompute month.\n+\t(unix2dostime): Handle years before 1980.  Correctly compute month\n+\tand day of month.\n+\n 2002-11-10  Jakub Jelinek  <jakub@redhat.com>\n \n \t* jartool.c (add_to_jar): Only compare file to jarfile if jarfile is"}, {"sha": "5117a82014ecc48747521789846481283e8e674e", "filename": "fastjar/dostime.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90e76e864a228ac5cb306aa33f5716913fab061a/fastjar%2Fdostime.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90e76e864a228ac5cb306aa33f5716913fab061a/fastjar%2Fdostime.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fdostime.c?ref=90e76e864a228ac5cb306aa33f5716913fab061a", "patch": "@@ -49,11 +49,11 @@ dos2unixtime (unsigned long dostime)\n   ltime = *localtime (&now);\n \n   ltime.tm_year = (dostime >> 25) + 80;\n-  ltime.tm_mon = 1 + ((dostime >> 21) & 0x0f);\n+  ltime.tm_mon = ((dostime >> 21) & 0x0f) - 1;\n   ltime.tm_mday = (dostime >> 16) & 0x1f;\n   ltime.tm_hour = (dostime >> 11) & 0x0f;\n   ltime.tm_min = (dostime >> 5) & 0x3f;\n-  ltime.tm_sec = (dostime & 0x0f) << 1;\n+  ltime.tm_sec = (dostime & 0x1f) << 1;\n \n   ltime.tm_wday = -1;\n   ltime.tm_yday = -1;\n@@ -66,10 +66,13 @@ unsigned long\n unix2dostime (time_t *time)\n {\n   struct tm *ltime = localtime (time);\n+  int year = ltime->tm_year - 80;\n+  if (year < 0)\n+    year = 0;\n \n-  return ((ltime->tm_year - 80) << 25\n-\t  | ltime->tm_mon << 21\n-\t  | (ltime->tm_mday - 1) << 16\n+  return (year << 25\n+\t  | (ltime->tm_mon + 1) << 21\n+\t  | ltime->tm_mday << 16\n \t  | ltime->tm_hour << 11\n \t  | ltime->tm_min << 5\n \t  | ltime->tm_sec >> 1);"}]}