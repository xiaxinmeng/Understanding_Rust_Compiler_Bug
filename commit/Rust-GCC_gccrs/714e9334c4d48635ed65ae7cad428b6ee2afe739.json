{"sha": "714e9334c4d48635ed65ae7cad428b6ee2afe739", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE0ZTkzMzRjNGQ0ODYzNWVkNjVhZTdjYWQ0MjhiNmVlMmFmZTczOQ==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2002-09-12T23:27:30Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2002-09-12T23:27:30Z"}, "message": "Makefile.am (LIBTOOL): Use --tag CC always for this directory.\n\n\n2002-09-12  Benjamin Kosnik  <bkoz@redhat.com>\n\n\t* libmath/Makefile.am (LIBTOOL): Use --tag CC always for this\n\tdirectory.\n\t* libmath/Makefile.in: Regenerate.\n\t* src/Makefile.am: Tweak comment.\n\t* src/Makefile.in: Regenerate.\n\n\t* config/locale/gnu/c_locale.h: Remove warnings.\n\tInject __uselocale into __gnu_cxx.\n\t* config/locale/generic/c_locale.h: Match.\n\nFrom-SVN: r57082", "tree": {"sha": "c7a7732451ea9c685b439359138659e24578bf6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c7a7732451ea9c685b439359138659e24578bf6b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/714e9334c4d48635ed65ae7cad428b6ee2afe739", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/714e9334c4d48635ed65ae7cad428b6ee2afe739", "html_url": "https://github.com/Rust-GCC/gccrs/commit/714e9334c4d48635ed65ae7cad428b6ee2afe739", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/714e9334c4d48635ed65ae7cad428b6ee2afe739/comments", "author": null, "committer": null, "parents": [{"sha": "d48fd218f93dfc00e80a07913f26ad26f8fc819b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d48fd218f93dfc00e80a07913f26ad26f8fc819b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d48fd218f93dfc00e80a07913f26ad26f8fc819b"}], "stats": {"total": 53, "additions": 36, "deletions": 17}, "files": [{"sha": "cd6f8db4dc75b79b4ec0090d697ae14749ff4c3c", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=714e9334c4d48635ed65ae7cad428b6ee2afe739", "patch": "@@ -1,3 +1,15 @@\n+2002-09-12  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\t* libmath/Makefile.am (LIBTOOL): Use --tag CC always for this\n+\tdirectory.\n+\t* libmath/Makefile.in: Regenerate.\n+\t* src/Makefile.am: Tweak comment.\n+\t* src/Makefile.in: Regenerate.\n+\t\n+\t* config/locale/gnu/c_locale.h: Remove warnings.\n+\tInject __uselocale into __gnu_cxx.\n+\t* config/locale/generic/c_locale.h: Match.\n+\t\n 2002-09-11  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* include/bits/locale_facets.tcc (__convert_from_v): Remove."}, {"sha": "bfd9bf0a0bf193d9f7e92e0945b98870e8116639", "filename": "libstdc++-v3/config/locale/generic/c_locale.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgeneric%2Fc_locale.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgeneric%2Fc_locale.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgeneric%2Fc_locale.h?ref=714e9334c4d48635ed65ae7cad428b6ee2afe739", "patch": "@@ -44,12 +44,13 @@ namespace std\n     __convert_from_v(char* __out, const int __size, const char* __fmt,\n \t\t     _Tv __v, const __c_locale&, int __prec = -1)\n     {\n-      int __ret;\n       char* __old = setlocale(LC_ALL, NULL);\n       char* __sav = static_cast<char*>(malloc(strlen(__old) + 1));\n       if (__sav)\n         strcpy(__sav, __old);\n       setlocale(LC_ALL, \"C\");\n+\n+      int __ret;\n #ifdef _GLIBCPP_USE_C99\n       if (__prec >= 0)\n         __ret = snprintf(__out, __size, __fmt, __prec, __v);"}, {"sha": "aabbe6af42564a7a9f069695fa383cdd75f9dba1", "filename": "libstdc++-v3/config/locale/gnu/c_locale.h", "status": "modified", "additions": 13, "deletions": 4, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgnu%2Fc_locale.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgnu%2Fc_locale.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgnu%2Fc_locale.h?ref=714e9334c4d48635ed65ae7cad428b6ee2afe739", "patch": "@@ -40,26 +40,35 @@\n \n #define _GLIBCPP_C_LOCALE_GNU 1\n \n+#if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2)\n+namespace __gnu_cxx\n+{\n+  extern \"C\" __typeof(uselocale) __uselocale;\n+}\n+#endif\n+\n namespace std\n {\n   typedef __locale_t\t\t__c_locale;\n \n   template<typename _Tv>\n     int\n     __convert_from_v(char* __out, const int __size, const char* __fmt,\n+#if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2)\n \t\t     _Tv __v, const __c_locale& __cloc, int __prec = -1)\n     {\n-      int __ret;\n-#if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2)\n-      __c_locale __old = __uselocale(__cloc);\n+      __c_locale __old = __gnu_cxx::__uselocale(__cloc);\n #else\n+\t\t     _Tv __v, const __c_locale&, int __prec = -1)\n+    {\n       char* __old = setlocale(LC_ALL, NULL);\n       char* __sav = static_cast<char*>(malloc(strlen(__old) + 1));\n       if (__sav)\n         strcpy(__sav, __old);\n       setlocale(LC_ALL, \"C\");\n #endif\n \n+      int __ret;\n #ifdef _GLIBCPP_USE_C99\n       if (__prec >= 0)\n         __ret = snprintf(__out, __size, __fmt, __prec, __v);\n@@ -73,7 +82,7 @@ namespace std\n #endif\n \n #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2)\n-      __uselocale(__old);\n+      __gnu_cxx::__uselocale(__old);\n #else\n       setlocale(LC_ALL, __sav);\n       free(__sav);"}, {"sha": "30d3dce0d16f2bcf57fbe249d6c765e95deb4bbd", "filename": "libstdc++-v3/libmath/Makefile.am", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Flibmath%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Flibmath%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibmath%2FMakefile.am?ref=714e9334c4d48635ed65ae7cad428b6ee2afe739", "patch": "@@ -34,12 +34,11 @@ libmath_la_DEPENDENCIES = $(libmath_la_LIBADD)\n \n libmath_la_SOURCES = stubs.c\n \n-LINK = \\\n-\t$(LIBTOOL) --tag CC --mode=link \"$(CCLD)\" \\\n-\t$(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@\n-\n # Use common includes from acinclude.m4/GLIBCPP_EXPORT_INCLUDES\n TOPLEVEL_INCLUDES = @TOPLEVEL_INCLUDES@\n \n INCLUDES = \\\n \t$(TOPLEVEL_INCLUDES) \n+\n+# Only compiling \"C\" sources in this directory.\n+LIBTOOL = @LIBTOOL@ --tag CC"}, {"sha": "7640e684662d6281ab70aad41fb7e83228cd317a", "filename": "libstdc++-v3/libmath/Makefile.in", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Flibmath%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Flibmath%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibmath%2FMakefile.in?ref=714e9334c4d48635ed65ae7cad428b6ee2afe739", "patch": "@@ -92,7 +92,6 @@ LIBMATHOBJS = @LIBMATHOBJS@\n LIBMATH_INCLUDES = @LIBMATH_INCLUDES@\n LIBSUPCXX_INCLUDES = @LIBSUPCXX_INCLUDES@\n LIBSUPCXX_PICFLAGS = @LIBSUPCXX_PICFLAGS@\n-LIBTOOL = @LIBTOOL@\n LIBUNWIND_FLAG = @LIBUNWIND_FLAG@\n LN_S = @LN_S@\n MAINT = @MAINT@\n@@ -144,17 +143,15 @@ libmath_la_DEPENDENCIES = $(libmath_la_LIBADD)\n \n libmath_la_SOURCES = stubs.c\n \n-LINK = \\\n-\t$(LIBTOOL) --tag CC --mode=link \"$(CCLD)\" \\\n-\t$(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@\n-\n-\n # Use common includes from acinclude.m4/GLIBCPP_EXPORT_INCLUDES\n TOPLEVEL_INCLUDES = @TOPLEVEL_INCLUDES@\n \n INCLUDES = \\\n \t$(TOPLEVEL_INCLUDES) \n \n+\n+# Only compiling \"C\" sources in this directory.\n+LIBTOOL = @LIBTOOL@ --tag CC\n CONFIG_HEADER = ../config.h\n CONFIG_CLEAN_FILES = \n LTLIBRARIES =  $(noinst_LTLIBRARIES)\n@@ -170,6 +167,7 @@ CFLAGS = @CFLAGS@\n COMPILE = $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)\n LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)\n CCLD = $(CC)\n+LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@\n DIST_COMMON =  Makefile.am Makefile.in\n \n "}, {"sha": "4592168f48d6a0c27ca339218d28a8a8260120e5", "filename": "libstdc++-v3/src/Makefile.am", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am?ref=714e9334c4d48635ed65ae7cad428b6ee2afe739", "patch": "@@ -27,7 +27,7 @@ MAINT_CHARSET = latin1\n \n mkinstalldirs = $(SHELL) $(toplevel_srcdir)/mkinstalldirs\n \n-# Cross compiler and multilib support.\n+# Cross compiler support.\n CXX = @glibcpp_CXX@\n toolexecdir = @glibcpp_toolexecdir@\n toolexeclibdir = @glibcpp_toolexeclibdir@"}, {"sha": "0e55017baf0aaf71c542efa882e538f1f333f006", "filename": "libstdc++-v3/src/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/714e9334c4d48635ed65ae7cad428b6ee2afe739/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in?ref=714e9334c4d48635ed65ae7cad428b6ee2afe739", "patch": "@@ -130,7 +130,7 @@ MAINT_CHARSET = latin1\n \n mkinstalldirs = $(SHELL) $(toplevel_srcdir)/mkinstalldirs\n \n-# Cross compiler and multilib support.\n+# Cross compiler support.\n CXX = @glibcpp_CXX@\n toolexecdir = @glibcpp_toolexecdir@\n toolexeclibdir = @glibcpp_toolexeclibdir@"}]}