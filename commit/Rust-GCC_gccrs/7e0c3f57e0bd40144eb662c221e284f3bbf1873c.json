{"sha": "7e0c3f57e0bd40144eb662c221e284f3bbf1873c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2UwYzNmNTdlMGJkNDAxNDRlYjY2MmMyMjFlMjg0ZjNiYmYxODczYw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2007-02-06T17:19:27Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2007-02-06T17:19:27Z"}, "message": "lower-subreg.c (simple_move_operand): Reject CONST.\n\n\t* lower-subreg.c (simple_move_operand): Reject CONST.\n\t(resolve_clobber): Call validate_change rather than directly\n\tassigning to XEXP (pat, 0).\n\nFrom-SVN: r121652", "tree": {"sha": "af2f107c3cde5cde08c5f71678902ed11cb3a012", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/af2f107c3cde5cde08c5f71678902ed11cb3a012"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e0c3f57e0bd40144eb662c221e284f3bbf1873c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e0c3f57e0bd40144eb662c221e284f3bbf1873c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e0c3f57e0bd40144eb662c221e284f3bbf1873c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e0c3f57e0bd40144eb662c221e284f3bbf1873c/comments", "author": null, "committer": null, "parents": [{"sha": "44fb8659c3c8e9309dff1b58a651ab47be827871", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44fb8659c3c8e9309dff1b58a651ab47be827871", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44fb8659c3c8e9309dff1b58a651ab47be827871"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "52a15923fedc840532916ab40e5bed2580ec716e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e0c3f57e0bd40144eb662c221e284f3bbf1873c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e0c3f57e0bd40144eb662c221e284f3bbf1873c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7e0c3f57e0bd40144eb662c221e284f3bbf1873c", "patch": "@@ -1,3 +1,9 @@\n+2007-02-06  Ian Lance Taylor  <iant@google.com>\n+\n+\t* lower-subreg.c (simple_move_operand): Reject CONST.\n+\t(resolve_clobber): Call validate_change rather than directly\n+\tassigning to XEXP (pat, 0).\n+\n 2006-02-06  Paolo Bonzini  <bonzini@gnu.org>\n \n \t* Makefile.in (tree-ssa-loop-ivopts.o): Add pointer-set.h dependency."}, {"sha": "8d04390da93637c4ee850f84ec8d412104d1b0a2", "filename": "gcc/lower-subreg.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e0c3f57e0bd40144eb662c221e284f3bbf1873c/gcc%2Flower-subreg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e0c3f57e0bd40144eb662c221e284f3bbf1873c/gcc%2Flower-subreg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flower-subreg.c?ref=7e0c3f57e0bd40144eb662c221e284f3bbf1873c", "patch": "@@ -80,7 +80,8 @@ simple_move_operand (rtx x)\n \n   if (GET_CODE (x) == LABEL_REF\n       || GET_CODE (x) == SYMBOL_REF\n-      || GET_CODE (x) == HIGH)\n+      || GET_CODE (x) == HIGH\n+      || GET_CODE (x) == CONST)\n     return false;\n \n   if (MEM_P (x)\n@@ -832,6 +833,7 @@ resolve_clobber (rtx pat, rtx insn)\n   rtx reg;\n   enum machine_mode orig_mode;\n   unsigned int words, i;\n+  int ret;\n \n   reg = XEXP (pat, 0);\n   if (!resolve_reg_p (reg) && !resolve_subreg_p (reg))\n@@ -841,7 +843,12 @@ resolve_clobber (rtx pat, rtx insn)\n   words = GET_MODE_SIZE (orig_mode);\n   words = (words + UNITS_PER_WORD - 1) / UNITS_PER_WORD;\n \n-  XEXP (pat, 0) = simplify_gen_subreg_concatn (word_mode, reg, orig_mode, 0);\n+  ret = validate_change (NULL_RTX, &XEXP (pat, 0),\n+\t\t\t simplify_gen_subreg_concatn (word_mode, reg,\n+\t\t\t\t\t\t      orig_mode, 0),\n+\t\t\t 0);\n+  gcc_assert (ret != 0);\n+\n   for (i = words - 1; i > 0; --i)\n     {\n       rtx x;"}]}