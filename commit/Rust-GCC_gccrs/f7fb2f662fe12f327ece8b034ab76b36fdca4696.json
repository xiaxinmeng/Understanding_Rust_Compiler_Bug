{"sha": "f7fb2f662fe12f327ece8b034ab76b36fdca4696", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjdmYjJmNjYyZmUxMmYzMjdlY2U4YjAzNGFiNzZiMzZmZGNhNDY5Ng==", "commit": {"author": {"name": "Julian Brown", "email": "julian@codesourcery.com", "date": "2021-02-09T20:00:14Z"}, "committer": {"name": "Julian Brown", "email": "julian@codesourcery.com", "date": "2021-02-10T03:16:28Z"}, "message": "openacc: Add XFAILs [PR98979]\n\nThis patch adds some XFAILs for PR98979 until the patch to fix them has\nbeen approved. See:\n\n  https://gcc.gnu.org/pipermail/gcc-patches/2021-February/564711.html\n\ngcc/testsuite/\n\tPR fortran/98979\n\t* gfortran.dg/goacc/array-with-dt-2.f90: Add expected errors.\n\t* gfortran.dg/goacc/derived-chartypes-1.f90: Skip ICEing test.\n\t* gfortran.dg/goacc/derived-chartypes-2.f90: Likewise.\n\nlibgomp/\n\tPR fortran/98979\n\t* testsuite/libgomp.oacc-fortran/array-stride-dt-1.f90: Add expected\n\terrors.", "tree": {"sha": "d8e4dc3de583af8ccaba0431d265ccebf60cd74d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d8e4dc3de583af8ccaba0431d265ccebf60cd74d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f7fb2f662fe12f327ece8b034ab76b36fdca4696", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7fb2f662fe12f327ece8b034ab76b36fdca4696", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7fb2f662fe12f327ece8b034ab76b36fdca4696", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7fb2f662fe12f327ece8b034ab76b36fdca4696/comments", "author": {"login": "jtb20", "id": 6094880, "node_id": "MDQ6VXNlcjYwOTQ4ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/6094880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtb20", "html_url": "https://github.com/jtb20", "followers_url": "https://api.github.com/users/jtb20/followers", "following_url": "https://api.github.com/users/jtb20/following{/other_user}", "gists_url": "https://api.github.com/users/jtb20/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtb20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtb20/subscriptions", "organizations_url": "https://api.github.com/users/jtb20/orgs", "repos_url": "https://api.github.com/users/jtb20/repos", "events_url": "https://api.github.com/users/jtb20/events{/privacy}", "received_events_url": "https://api.github.com/users/jtb20/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jtb20", "id": 6094880, "node_id": "MDQ6VXNlcjYwOTQ4ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/6094880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtb20", "html_url": "https://github.com/jtb20", "followers_url": "https://api.github.com/users/jtb20/followers", "following_url": "https://api.github.com/users/jtb20/following{/other_user}", "gists_url": "https://api.github.com/users/jtb20/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtb20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtb20/subscriptions", "organizations_url": "https://api.github.com/users/jtb20/orgs", "repos_url": "https://api.github.com/users/jtb20/repos", "events_url": "https://api.github.com/users/jtb20/events{/privacy}", "received_events_url": "https://api.github.com/users/jtb20/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b0fb2720d88d680af18981a2097397196b505a1f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0fb2720d88d680af18981a2097397196b505a1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0fb2720d88d680af18981a2097397196b505a1f"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "e4a6f319772cb2c95ccf58fc740cded56a197666", "filename": "gcc/testsuite/gfortran.dg/goacc/array-with-dt-2.f90", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7fb2f662fe12f327ece8b034ab76b36fdca4696/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Farray-with-dt-2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7fb2f662fe12f327ece8b034ab76b36fdca4696/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Farray-with-dt-2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Farray-with-dt-2.f90?ref=f7fb2f662fe12f327ece8b034ab76b36fdca4696", "patch": "@@ -4,7 +4,8 @@\n \n type(t), allocatable :: b(:)\n \n-!$acc update host(b(::2))\n-!$acc update host(b(1)%A(::3,::4))\n+! TODO: Remove expected errors when this is supported.\n+!$acc update host(b(::2))  ! { dg-error \"Stride should not be specified for array section in MAP clause\" }\n+!$acc update host(b(1)%A(::3,::4))  ! { dg-error \"Stride should not be specified for array section in MAP clause\" }\n end\n "}, {"sha": "f7aafbfc036fa9373fd07ab509869297d297cdf3", "filename": "gcc/testsuite/gfortran.dg/goacc/derived-chartypes-1.f90", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7fb2f662fe12f327ece8b034ab76b36fdca4696/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fderived-chartypes-1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7fb2f662fe12f327ece8b034ab76b36fdca4696/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fderived-chartypes-1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fderived-chartypes-1.f90?ref=f7fb2f662fe12f327ece8b034ab76b36fdca4696", "patch": "@@ -1,3 +1,6 @@\n+! This currently ICEs. Avoid that.\n+! { dg-skip-if \"PR98979\" { *-*-* } }\n+\n type :: type1\n   character(len=35) :: a\n end type type1"}, {"sha": "e22fc679df2b3cced026f2b6b838af48c3eca816", "filename": "gcc/testsuite/gfortran.dg/goacc/derived-chartypes-2.f90", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7fb2f662fe12f327ece8b034ab76b36fdca4696/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fderived-chartypes-2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7fb2f662fe12f327ece8b034ab76b36fdca4696/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fderived-chartypes-2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Fderived-chartypes-2.f90?ref=f7fb2f662fe12f327ece8b034ab76b36fdca4696", "patch": "@@ -1,3 +1,6 @@\n+! This currently ICEs. Avoid that.\n+! { dg-skip-if \"PR98979\" { *-*-* } }\n+\n type :: type1\n   character(len=35,kind=4) :: a\n end type type1"}, {"sha": "61250708197db291a635543acd88e1b03435535d", "filename": "libgomp/testsuite/libgomp.oacc-fortran/array-stride-dt-1.f90", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7fb2f662fe12f327ece8b034ab76b36fdca4696/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Farray-stride-dt-1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7fb2f662fe12f327ece8b034ab76b36fdca4696/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Farray-stride-dt-1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-fortran%2Farray-stride-dt-1.f90?ref=f7fb2f662fe12f327ece8b034ab76b36fdca4696", "patch": "@@ -24,8 +24,9 @@\n \n b(1)%A(:,:) = 5\n \n-!$acc update device(b(::2))\n-!$acc update device(b(1)%A(::3,::4))\n+! TODO: Remove expected errors once this is supported.\n+!$acc update device(b(::2))  ! { dg-error \"Stride should not be specified for array section in MAP clause\" }\n+!$acc update device(b(1)%A(::3,::4))  ! { dg-error \"Stride should not be specified for array section in MAP clause\" }\n \n do i=1,20\n   !$acc exit data copyout(b(i)%A)"}]}