{"sha": "ab56390384cd5168b548ff07e6f0c9c4d41420fb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI1NjM5MDM4NGNkNTE2OGI1NDhmZjA3ZTZmMGM5YzRkNDE0MjBmYg==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2020-06-04T15:26:36Z"}, "committer": {"name": "Alex Coplan", "email": "alex.coplan@arm.com", "date": "2020-06-04T15:33:36Z"}, "message": "aarch64: PR target/95526: Fix gimplification of varargs\n\nThis patch fixes a latent bug exposed by\neb72dc663e9070b281be83a80f6f838a3a878822 in the aarch64 backend that was\ncausing wrong codegen and several testsuite failures. See the discussion\non the bug for details.\n\nBootstrapped and regtested on aarch64-linux-gnu. Cleaned up several\nfailing tests and no new fails introduced.\n\n2020-06-04  Richard Biener  <rguenther@suse.de>\n\ngcc/:\n\n\t* config/aarch64/aarch64.c (aarch64_gimplify_va_arg_expr):\n\tEnsure that tmp_ha is marked TREE_ADDRESSABLE.", "tree": {"sha": "3762fc509d08eb15184841a8ddd6d315bf7c73a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3762fc509d08eb15184841a8ddd6d315bf7c73a8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab56390384cd5168b548ff07e6f0c9c4d41420fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab56390384cd5168b548ff07e6f0c9c4d41420fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab56390384cd5168b548ff07e6f0c9c4d41420fb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab56390384cd5168b548ff07e6f0c9c4d41420fb/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "acoplan-arm", "id": 86676934, "node_id": "MDQ6VXNlcjg2Njc2OTM0", "avatar_url": "https://avatars.githubusercontent.com/u/86676934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acoplan-arm", "html_url": "https://github.com/acoplan-arm", "followers_url": "https://api.github.com/users/acoplan-arm/followers", "following_url": "https://api.github.com/users/acoplan-arm/following{/other_user}", "gists_url": "https://api.github.com/users/acoplan-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/acoplan-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acoplan-arm/subscriptions", "organizations_url": "https://api.github.com/users/acoplan-arm/orgs", "repos_url": "https://api.github.com/users/acoplan-arm/repos", "events_url": "https://api.github.com/users/acoplan-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/acoplan-arm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1980ffec48c6fa41396bea66366f2e591798e1e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1980ffec48c6fa41396bea66366f2e591798e1e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1980ffec48c6fa41396bea66366f2e591798e1e1"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "97da60762390db81df9cffaf316b909cd1609130", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab56390384cd5168b548ff07e6f0c9c4d41420fb/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab56390384cd5168b548ff07e6f0c9c4d41420fb/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=ab56390384cd5168b548ff07e6f0c9c4d41420fb", "patch": "@@ -16370,6 +16370,7 @@ aarch64_gimplify_va_arg_expr (tree valist, tree type, gimple_seq *pre_p,\n \t}\n \n       /* *(field_ptr_t)&ha = *((field_ptr_t)vr_saved_area  */\n+      TREE_ADDRESSABLE (tmp_ha) = 1;\n       tmp_ha = build1 (ADDR_EXPR, field_ptr_t, tmp_ha);\n       addr = t;\n       t = fold_convert (field_ptr_t, addr);"}]}