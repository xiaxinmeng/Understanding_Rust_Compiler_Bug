{"sha": "5abb45f22e162d6cc77d4cbefdbde01e36517555", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWFiYjQ1ZjIyZTE2MmQ2Y2M3N2Q0Y2JlZmRiZGUwMWUzNjUxNzU1NQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-02-02T23:37:23Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-02-02T23:37:23Z"}, "message": "(build_conditional_expr): Always convert and check\nboth result operands even if condition is constant.\n\nFrom-SVN: r3415", "tree": {"sha": "77532617067fc09306cfccca45dcdbc832082639", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/77532617067fc09306cfccca45dcdbc832082639"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5abb45f22e162d6cc77d4cbefdbde01e36517555", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5abb45f22e162d6cc77d4cbefdbde01e36517555", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5abb45f22e162d6cc77d4cbefdbde01e36517555", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5abb45f22e162d6cc77d4cbefdbde01e36517555/comments", "author": null, "committer": null, "parents": [{"sha": "e681c5a107b0106588049dfcad01511038a2c98f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e681c5a107b0106588049dfcad01511038a2c98f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e681c5a107b0106588049dfcad01511038a2c98f"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "3cb6959e8764641c5e7897cf58679bb7afea7af3", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abb45f22e162d6cc77d4cbefdbde01e36517555/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abb45f22e162d6cc77d4cbefdbde01e36517555/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=5abb45f22e162d6cc77d4cbefdbde01e36517555", "patch": "@@ -3584,9 +3584,6 @@ build_conditional_expr (ifexp, op1, op2)\n     = build_type_variant (result_type,\n \t\t\t  TREE_READONLY (op1) || TREE_READONLY (op2),\n \t\t\t  TREE_THIS_VOLATILE (op1) || TREE_THIS_VOLATILE (op2));\n-    \n-  if (TREE_CODE (ifexp) == INTEGER_CST)\n-    return convert_and_check (result_type, integer_zerop (ifexp) ? op2 : op1);\n \n   if (result_type != TREE_TYPE (op1))\n     op1 = convert_and_check (result_type, op1);\n@@ -3629,6 +3626,9 @@ build_conditional_expr (ifexp, op1, op2)\n \t}\n     }\n #endif /* 0 */\n+    \n+  if (TREE_CODE (ifexp) == INTEGER_CST)\n+    return integer_zerop (ifexp) ? op2 : op1;\n \n   return fold (build (COND_EXPR, result_type, ifexp, op1, op2));\n }"}]}