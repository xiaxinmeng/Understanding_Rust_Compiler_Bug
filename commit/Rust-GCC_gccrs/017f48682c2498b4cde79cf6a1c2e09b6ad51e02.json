{"sha": "017f48682c2498b4cde79cf6a1c2e09b6ad51e02", "node_id": "C_kwDOANBUbNoAKDAxN2Y0ODY4MmMyNDk4YjRjZGU3OWNmNmExYzJlMDliNmFkNTFlMDI", "commit": {"author": {"name": "Yannick Moy", "email": "moy@adacore.com", "date": "2022-05-16T07:58:18Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-06-02T09:06:42Z"}, "message": "[Ada] Fix spurious errors on ghost code in generics\n\nAfter the recent fix for detecting illegal use of ghost entities in\ncode, spurious errors could be raised on generic code with ghost, due to\nwrong setting of the ghost flags on copied entities from the generic to\nthe instantiation.\n\ngcc/ada/\n\n\t* atree.adb (New_Copy): Reset flags related to ghost entities\n\tbefore marking the new node.", "tree": {"sha": "874fb70a66dab0ac3beb4f86647ab39857d985f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/874fb70a66dab0ac3beb4f86647ab39857d985f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/017f48682c2498b4cde79cf6a1c2e09b6ad51e02", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/017f48682c2498b4cde79cf6a1c2e09b6ad51e02", "html_url": "https://github.com/Rust-GCC/gccrs/commit/017f48682c2498b4cde79cf6a1c2e09b6ad51e02", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/017f48682c2498b4cde79cf6a1c2e09b6ad51e02/comments", "author": {"login": "yannickmoy", "id": 859440, "node_id": "MDQ6VXNlcjg1OTQ0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannickmoy", "html_url": "https://github.com/yannickmoy", "followers_url": "https://api.github.com/users/yannickmoy/followers", "following_url": "https://api.github.com/users/yannickmoy/following{/other_user}", "gists_url": "https://api.github.com/users/yannickmoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannickmoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannickmoy/subscriptions", "organizations_url": "https://api.github.com/users/yannickmoy/orgs", "repos_url": "https://api.github.com/users/yannickmoy/repos", "events_url": "https://api.github.com/users/yannickmoy/events{/privacy}", "received_events_url": "https://api.github.com/users/yannickmoy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a9f5f2cd642689ae58f27aa23dff5c8d7c7bb016", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9f5f2cd642689ae58f27aa23dff5c8d7c7bb016", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9f5f2cd642689ae58f27aa23dff5c8d7c7bb016"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "2d7962c96b1175097d329e794f60cc1eb33f5049", "filename": "gcc/ada/atree.adb", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/017f48682c2498b4cde79cf6a1c2e09b6ad51e02/gcc%2Fada%2Fatree.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/017f48682c2498b4cde79cf6a1c2e09b6ad51e02/gcc%2Fada%2Fatree.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fatree.adb?ref=017f48682c2498b4cde79cf6a1c2e09b6ad51e02", "patch": "@@ -1775,6 +1775,11 @@ package body Atree is\n \n          --  Mark the copy as Ghost depending on the current Ghost region\n \n+         if Nkind (New_Id) in N_Entity then\n+            Set_Is_Checked_Ghost_Entity (New_Id, False);\n+            Set_Is_Ignored_Ghost_Entity (New_Id, False);\n+         end if;\n+\n          Mark_New_Ghost_Node (New_Id);\n \n          New_Node_Debugging_Output (New_Id);"}]}