{"sha": "a4233c29b7c5ce3fb024ac7f075c4c04c8e10ae5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTQyMzNjMjliN2M1Y2UzZmIwMjRhYzdmMDc1YzRjMDRjOGUxMGFlNQ==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@redhat.com", "date": "2005-06-07T21:01:14Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2005-06-07T21:01:14Z"}, "message": "tree-ssa-threadupdate.c (struct thread_stats_d): Declare.\n\n\n\t* tree-ssa-threadupdate.c (struct thread_stats_d): Declare.\n\t(thread_stats): New local variable.\n\t(redirect_edges): Increment count of threaded edges.\n\t(thread_through_all_blocks): Initialize thread_stats.\n\tDisplay number of threaded jumps if TDF_STATS is enabled.\n\nFrom-SVN: r100722", "tree": {"sha": "a680f15c8edec49520cd7eba4ad8cd9baca9f330", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a680f15c8edec49520cd7eba4ad8cd9baca9f330"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a4233c29b7c5ce3fb024ac7f075c4c04c8e10ae5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4233c29b7c5ce3fb024ac7f075c4c04c8e10ae5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4233c29b7c5ce3fb024ac7f075c4c04c8e10ae5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4233c29b7c5ce3fb024ac7f075c4c04c8e10ae5/comments", "author": null, "committer": null, "parents": [{"sha": "ae740ccecdd59110782f3c0623486df14a57d7b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae740ccecdd59110782f3c0623486df14a57d7b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae740ccecdd59110782f3c0623486df14a57d7b7"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "74416efb538e9bcec414032ad042a51319e24b2d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4233c29b7c5ce3fb024ac7f075c4c04c8e10ae5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4233c29b7c5ce3fb024ac7f075c4c04c8e10ae5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a4233c29b7c5ce3fb024ac7f075c4c04c8e10ae5", "patch": "@@ -1,3 +1,11 @@\n+2005-06-07  Diego Novillo  <dnovillo@redhat.com>\n+\n+\t* tree-ssa-threadupdate.c (struct thread_stats_d): Declare.\n+\t(thread_stats): New local variable.\n+\t(redirect_edges): Increment count of threaded edges.\n+\t(thread_through_all_blocks): Initialize thread_stats.\n+\tDisplay number of threaded jumps if TDF_STATS is enabled.\n+\n 2005-06-07  Kazu Hirata  <kazu@codesourcery.com>\n \n \t* sbitmap.h (sbitmap_iter_init): Consistently treat bit_num as"}, {"sha": "ea4413710a1eebe58186abb389f854786c7cf928", "filename": "gcc/tree-ssa-threadupdate.c", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4233c29b7c5ce3fb024ac7f075c4c04c8e10ae5/gcc%2Ftree-ssa-threadupdate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4233c29b7c5ce3fb024ac7f075c4c04c8e10ae5/gcc%2Ftree-ssa-threadupdate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-threadupdate.c?ref=a4233c29b7c5ce3fb024ac7f075c4c04c8e10ae5", "patch": "@@ -147,6 +147,16 @@ struct local_info\n   bool jumps_threaded;\n };\n \n+/* Jump threading statistics.  */\n+\n+struct thread_stats_d\n+{\n+  unsigned long num_threaded_edges;\n+};\n+\n+struct thread_stats_d thread_stats;\n+\n+\n /* Remove the last statement in block BB if it is a control statement\n    Also remove all outgoing edges except the edge which reaches DEST_BB.\n    If DEST_BB is NULL, then remove all outgoing edges.  */\n@@ -589,6 +599,8 @@ redirect_edges (void **slot, void *data)\n          to clear it will cause all kinds of unpleasant problems later.  */\n       e->aux = NULL;\n \n+      thread_stats.num_threaded_edges++;\n+\n       if (rd->dup_block)\n \t{\n \t  edge e2;\n@@ -811,6 +823,7 @@ thread_through_all_blocks (bitmap threaded_blocks)\n   bitmap_iterator bi;\n \n   rediscover_loops_after_threading = false;\n+  memset (&thread_stats, 0, sizeof (thread_stats));\n \n   EXECUTE_IF_SET_IN_BITMAP (threaded_blocks, 0, i, bi)\n     {\n@@ -820,5 +833,9 @@ thread_through_all_blocks (bitmap threaded_blocks)\n \tretval |= thread_block (bb);\n     }\n \n+  if (dump_file && (dump_flags & TDF_STATS))\n+    fprintf (dump_file, \"\\nJumps threaded: %lu\\n\",\n+\t     thread_stats.num_threaded_edges);\n+\n   return retval;\n }"}]}