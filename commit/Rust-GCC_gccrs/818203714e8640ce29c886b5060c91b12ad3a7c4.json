{"sha": "818203714e8640ce29c886b5060c91b12ad3a7c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODE4MjAzNzE0ZTg2NDBjZTI5Yzg4NmI1MDYwYzkxYjEyYWQzYTdjNA==", "commit": {"author": {"name": "Jeff Law", "email": "jlaw@localhost.localdomain", "date": "2021-07-20T18:49:54Z"}, "committer": {"name": "Jeff Law", "email": "jlaw@localhost.localdomain", "date": "2021-07-20T18:54:15Z"}, "message": "Attach MEM_EXPR information when flushing BLKmode args to the stack - V2\n\ngcc/\n\t* function.c (assign_parm_setup_block): Use adjust_address instead\n\tof change_address to preserve MEM_EXPR and friends.", "tree": {"sha": "bf81c792f451ff976e0b753e7c7bf568b48b85c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bf81c792f451ff976e0b753e7c7bf568b48b85c2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/818203714e8640ce29c886b5060c91b12ad3a7c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/818203714e8640ce29c886b5060c91b12ad3a7c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/818203714e8640ce29c886b5060c91b12ad3a7c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/818203714e8640ce29c886b5060c91b12ad3a7c4/comments", "author": null, "committer": null, "parents": [{"sha": "00dcc88a0ed7bd148ea86d900b6c93574a2e1f26", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00dcc88a0ed7bd148ea86d900b6c93574a2e1f26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00dcc88a0ed7bd148ea86d900b6c93574a2e1f26"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "af3d57b32a36785bd679ef6e35e57040c5f847ee", "filename": "gcc/function.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/818203714e8640ce29c886b5060c91b12ad3a7c4/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/818203714e8640ce29c886b5060c91b12ad3a7c4/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=818203714e8640ce29c886b5060c91b12ad3a7c4", "patch": "@@ -3036,7 +3036,15 @@ assign_parm_setup_block (struct assign_parm_data_all *all,\n \t\t  reg = gen_rtx_REG (word_mode, REGNO (entry_parm));\n \t\t  reg = convert_to_mode (mode, copy_to_reg (reg), 1);\n \t\t}\n-\t      emit_move_insn (change_address (mem, mode, 0), reg);\n+\n+\t      /* We use adjust_address to get a new MEM with the mode\n+\t\t changed.  adjust_address is better than change_address\n+\t\t for this purpose because adjust_address does not lose\n+\t\t the MEM_EXPR associated with the MEM.\n+\n+\t\t If the MEM_EXPR is lost, then optimizations like DSE\n+\t\t assume the MEM escapes and thus is not subject to DSE.  */\n+\t      emit_move_insn (adjust_address (mem, mode, 0), reg);\n \t    }\n \n #ifdef BLOCK_REG_PADDING"}]}