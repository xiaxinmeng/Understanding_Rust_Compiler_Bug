{"sha": "631693d58d5f3f5c3474487b28a47b21acdcef1c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjMxNjkzZDU4ZDVmM2Y1YzM0NzQ0ODdiMjhhNDdiMjFhY2RjZWYxYw==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@unitus.it", "date": "2003-03-30T08:32:11Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2003-03-30T08:32:11Z"}, "message": "fstream.tcc (basic_filebuf::showmanyc, [...]): Fix test for synced buffer.\n\n2003-03-30  Paolo Carlini  <pcarlini@unitus.it>\n\n\t* include/bits/fstream.tcc (basic_filebuf::showmanyc,\n\t_M_convert_to_external, _M_really_overflow, seekoff): Fix\n\ttest for synced buffer.\n\t* include/std/std_fstream.h (sync): Likewise.\n\t* src/fstream.cc (basic_filebuf<char>::_M_underflow_common,\n\tbasic_filebuf<wchar_t>::_M_underflow_common): Likewise.\n\nFrom-SVN: r65038", "tree": {"sha": "68f39505a43244c32ff7f4ebbb69701627a6e7d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68f39505a43244c32ff7f4ebbb69701627a6e7d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/631693d58d5f3f5c3474487b28a47b21acdcef1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/631693d58d5f3f5c3474487b28a47b21acdcef1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/631693d58d5f3f5c3474487b28a47b21acdcef1c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/631693d58d5f3f5c3474487b28a47b21acdcef1c/comments", "author": null, "committer": null, "parents": [{"sha": "7270451f1955f9b853ec4f57649a315e8a96c516", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7270451f1955f9b853ec4f57649a315e8a96c516", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7270451f1955f9b853ec4f57649a315e8a96c516"}], "stats": {"total": 23, "additions": 16, "deletions": 7}, "files": [{"sha": "09ef061d96ff04d3698eb1e6c2ae9ced53584cbb", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/631693d58d5f3f5c3474487b28a47b21acdcef1c/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/631693d58d5f3f5c3474487b28a47b21acdcef1c/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=631693d58d5f3f5c3474487b28a47b21acdcef1c", "patch": "@@ -1,3 +1,12 @@\n+2003-03-30  Paolo Carlini  <pcarlini@unitus.it>\n+\n+\t* include/bits/fstream.tcc (basic_filebuf::showmanyc,\n+\t_M_convert_to_external, _M_really_overflow, seekoff): Fix\n+\ttest for synced buffer.\n+\t* include/std/std_fstream.h (sync): Likewise.\n+\t* src/fstream.cc (basic_filebuf<char>::_M_underflow_common,\n+\tbasic_filebuf<wchar_t>::_M_underflow_common): Likewise.\n+\n 2003-03-28  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* include/std/std_sstream.h (basic_istringstream): Adjust"}, {"sha": "f1b65a1a5580f6f4f089f9dec1f0a899377deeae", "filename": "libstdc++-v3/include/bits/fstream.tcc", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/631693d58d5f3f5c3474487b28a47b21acdcef1c/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffstream.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/631693d58d5f3f5c3474487b28a47b21acdcef1c/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffstream.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffstream.tcc?ref=631693d58d5f3f5c3474487b28a47b21acdcef1c", "patch": "@@ -160,7 +160,7 @@ namespace std\n       const locale __loc = this->getloc();\n       const __codecvt_type& __cvt = use_facet<__codecvt_type>(__loc);\n       // Sync with stdio.\n-      bool __sync = this->_M_buf_size == 1;\n+      bool __sync = this->_M_buf_size <= 1;\n \n       if (__testin && this->is_open())\n \t{\n@@ -285,7 +285,7 @@ namespace std\n       const locale __loc = this->getloc();\n       const __codecvt_type& __cvt = use_facet<__codecvt_type>(__loc);\n       // Sync with stdio.\n-      bool __sync = this->_M_buf_size == 1;\n+      bool __sync = this->_M_buf_size <= 1;\n \n       if (__cvt.always_noconv() && __ilen)\n \t{\n@@ -358,7 +358,7 @@ namespace std\n       bool __testput = this->_M_out_cur && this->_M_out_beg < this->_M_out_lim;\n       bool __testunbuffered = _M_file.is_open() && !this->_M_buf_size_opt;\n       // Sync with stdio.\n-      bool __sync = this->_M_buf_size == 1;\n+      bool __sync = this->_M_buf_size <= 1;\n \n       if (__testput || __testunbuffered)\n \t{\n@@ -448,7 +448,7 @@ namespace std\n       bool __testin = (ios_base::in & this->_M_mode & __mode) != 0;\n       bool __testout = (ios_base::out & this->_M_mode & __mode) != 0;\n       // Sync with stdio.\n-      bool __sync = this->_M_buf_size == 1;\n+      bool __sync = this->_M_buf_size <= 1;\n       \n       // Should probably do has_facet checks here.\n       int __width = use_facet<__codecvt_type>(this->_M_buf_locale).encoding();"}, {"sha": "ecbaba4c510a340c6c8452023aff2626f1c5b5ae", "filename": "libstdc++-v3/include/std/std_fstream.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/631693d58d5f3f5c3474487b28a47b21acdcef1c/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_fstream.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/631693d58d5f3f5c3474487b28a47b21acdcef1c/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_fstream.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstd_fstream.h?ref=631693d58d5f3f5c3474487b28a47b21acdcef1c", "patch": "@@ -315,7 +315,7 @@ namespace std\n \tbool __testput = this->_M_out_cur\n \t  && this->_M_out_beg < this->_M_out_lim;\n \t// Sync with stdio.\n-\tbool __sync = this->_M_buf_size == 1;\n+\tbool __sync = this->_M_buf_size <= 1;\n \n \t// Make sure that the internal buffer resyncs its idea of\n \t// the file position with the external file."}, {"sha": "0f9b2abd2c450665b0eb2b641d4a1efcfda4c2ba", "filename": "libstdc++-v3/src/fstream.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/631693d58d5f3f5c3474487b28a47b21acdcef1c/libstdc%2B%2B-v3%2Fsrc%2Ffstream.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/631693d58d5f3f5c3474487b28a47b21acdcef1c/libstdc%2B%2B-v3%2Fsrc%2Ffstream.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Ffstream.cc?ref=631693d58d5f3f5c3474487b28a47b21acdcef1c", "patch": "@@ -44,7 +44,7 @@ namespace std\n       bool __testin = _M_mode & ios_base::in;\n       bool __testout = _M_mode & ios_base::out;\n       // Sync with stdio.\n-      bool __sync = _M_buf_size == 1;\n+      bool __sync = _M_buf_size <= 1;\n \n       if (__testin)\n \t{\n@@ -126,7 +126,7 @@ namespace std\n       bool __testin = _M_mode & ios_base::in;\n       bool __testout = _M_mode & ios_base::out;\n       // Sync with stdio.\n-      bool __sync = _M_buf_size == 1;\n+      bool __sync = _M_buf_size <= 1;\n \n       if (__testin)\n \t{"}]}