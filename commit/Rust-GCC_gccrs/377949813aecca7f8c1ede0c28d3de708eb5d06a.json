{"sha": "377949813aecca7f8c1ede0c28d3de708eb5d06a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzc3OTQ5ODEzYWVjY2E3ZjhjMWVkZTBjMjhkM2RlNzA4ZWI1ZDA2YQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-04-06T18:41:25Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-04-06T18:41:25Z"}, "message": "re PR target/43667 (ICE with __builtin_ia32_vpermil2p* and -mavx)\n\n\tPR target/43667\n\t* config/i386/i386.c (bdesc_multi_arg): Use OPTION_MASK_ISA_XOP\n\tinstead of OPTION_MASK_ISA_AVX for __builtin_ia32_vpermil2p*.\n\t(ix86_expand_args_builtin): Use V*_FTYPE_* enum codes instead of\n\tMULTI_* defines for 4 argument vpermil2p* builtins.\n\nFrom-SVN: r158015", "tree": {"sha": "7bf6f9312b695e257dd88124b1fe89ab1cd5ecb1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7bf6f9312b695e257dd88124b1fe89ab1cd5ecb1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/377949813aecca7f8c1ede0c28d3de708eb5d06a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/377949813aecca7f8c1ede0c28d3de708eb5d06a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/377949813aecca7f8c1ede0c28d3de708eb5d06a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/377949813aecca7f8c1ede0c28d3de708eb5d06a/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "178f9aa17efb04fe73f447763c9cab64166b1041", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/178f9aa17efb04fe73f447763c9cab64166b1041", "html_url": "https://github.com/Rust-GCC/gccrs/commit/178f9aa17efb04fe73f447763c9cab64166b1041"}], "stats": {"total": 25, "additions": 16, "deletions": 9}, "files": [{"sha": "0d1fc700df54eeb4b3f97caa9825ad9c00fbd2c1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/377949813aecca7f8c1ede0c28d3de708eb5d06a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/377949813aecca7f8c1ede0c28d3de708eb5d06a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=377949813aecca7f8c1ede0c28d3de708eb5d06a", "patch": "@@ -1,3 +1,11 @@\n+2010-04-06  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/43667\n+\t* config/i386/i386.c (bdesc_multi_arg): Use OPTION_MASK_ISA_XOP\n+\tinstead of OPTION_MASK_ISA_AVX for __builtin_ia32_vpermil2p*.\n+\t(ix86_expand_args_builtin): Use V*_FTYPE_* enum codes instead of\n+\tMULTI_* defines for 4 argument vpermil2p* builtins.\n+\n 2010-04-06  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386-protos.h (x86_maybe_negate_const_int): Declare.\n@@ -13,7 +21,6 @@\n \t* config/i386/sync.md (sync_add<mode>): Use\n \tx86_maybe_negate_const_int to output insn mnemonic.\n \n-\n 2010-04-06  Jan Hubicka  <jh@suse.cz>\n \n \tPR tree-optimization/42906"}, {"sha": "c945a540c6bdbe70bdee2a0d49adbb624001fda8", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/377949813aecca7f8c1ede0c28d3de708eb5d06a/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/377949813aecca7f8c1ede0c28d3de708eb5d06a/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=377949813aecca7f8c1ede0c28d3de708eb5d06a", "patch": "@@ -22472,10 +22472,10 @@ static const struct builtin_description bdesc_multi_arg[] =\n   { OPTION_MASK_ISA_XOP, CODE_FOR_xop_pcom_tfv4si3,      \"__builtin_ia32_vpcomtrueud\", IX86_BUILTIN_VPCOMTRUEUD, (enum rtx_code) PCOM_TRUE,    (int)MULTI_ARG_2_SI_TF },\n   { OPTION_MASK_ISA_XOP, CODE_FOR_xop_pcom_tfv2di3,      \"__builtin_ia32_vpcomtrueuq\", IX86_BUILTIN_VPCOMTRUEUQ, (enum rtx_code) PCOM_TRUE,    (int)MULTI_ARG_2_DI_TF },\n \n-  { OPTION_MASK_ISA_AVX, CODE_FOR_xop_vpermil2v2df3,     \"__builtin_ia32_vpermil2pd\",  IX86_BUILTIN_VPERMIL2PD, UNKNOWN, (int)MULTI_ARG_4_DF2_DI_I },\n-  { OPTION_MASK_ISA_AVX, CODE_FOR_xop_vpermil2v4sf3,     \"__builtin_ia32_vpermil2ps\",  IX86_BUILTIN_VPERMIL2PS, UNKNOWN, (int)MULTI_ARG_4_SF2_SI_I },\n-  { OPTION_MASK_ISA_AVX, CODE_FOR_xop_vpermil2v4df3,     \"__builtin_ia32_vpermil2pd256\", IX86_BUILTIN_VPERMIL2PD256, UNKNOWN, (int)MULTI_ARG_4_DF2_DI_I1 },\n-  { OPTION_MASK_ISA_AVX, CODE_FOR_xop_vpermil2v8sf3,     \"__builtin_ia32_vpermil2ps256\", IX86_BUILTIN_VPERMIL2PS256, UNKNOWN, (int)MULTI_ARG_4_SF2_SI_I1 },\n+  { OPTION_MASK_ISA_XOP, CODE_FOR_xop_vpermil2v2df3,     \"__builtin_ia32_vpermil2pd\",  IX86_BUILTIN_VPERMIL2PD, UNKNOWN, (int)MULTI_ARG_4_DF2_DI_I },\n+  { OPTION_MASK_ISA_XOP, CODE_FOR_xop_vpermil2v4sf3,     \"__builtin_ia32_vpermil2ps\",  IX86_BUILTIN_VPERMIL2PS, UNKNOWN, (int)MULTI_ARG_4_SF2_SI_I },\n+  { OPTION_MASK_ISA_XOP, CODE_FOR_xop_vpermil2v4df3,     \"__builtin_ia32_vpermil2pd256\", IX86_BUILTIN_VPERMIL2PD256, UNKNOWN, (int)MULTI_ARG_4_DF2_DI_I1 },\n+  { OPTION_MASK_ISA_XOP, CODE_FOR_xop_vpermil2v8sf3,     \"__builtin_ia32_vpermil2ps256\", IX86_BUILTIN_VPERMIL2PS256, UNKNOWN, (int)MULTI_ARG_4_SF2_SI_I1 },\n \n };\n \n@@ -23630,10 +23630,10 @@ ix86_expand_args_builtin (const struct builtin_description *d,\n       nargs = 3;\n       nargs_constant = 2;\n       break;\n-    case MULTI_ARG_4_DF2_DI_I:\n-    case MULTI_ARG_4_DF2_DI_I1:\n-    case MULTI_ARG_4_SF2_SI_I:\n-    case MULTI_ARG_4_SF2_SI_I1:\n+    case V2DF_FTYPE_V2DF_V2DF_V2DI_INT:\n+    case V4DF_FTYPE_V4DF_V4DF_V4DI_INT:\n+    case V4SF_FTYPE_V4SF_V4SF_V4SI_INT:\n+    case V8SF_FTYPE_V8SF_V8SF_V8SI_INT:\n       nargs = 4;\n       nargs_constant = 1;\n       break;"}]}