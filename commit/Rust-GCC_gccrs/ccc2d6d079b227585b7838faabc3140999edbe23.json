{"sha": "ccc2d6d079b227585b7838faabc3140999edbe23", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NjMmQ2ZDA3OWIyMjc1ODViNzgzOGZhYWJjMzE0MDk5OWVkYmUyMw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-08-19T13:44:57Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-08-19T13:44:57Z"}, "message": "* rtlanal.c (for_each_rtx): Check in the change mentioned below.\n\nFrom-SVN: r21855", "tree": {"sha": "7f59b6d84f1d4f8ab42963a249037d60bfa1e70a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f59b6d84f1d4f8ab42963a249037d60bfa1e70a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ccc2d6d079b227585b7838faabc3140999edbe23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccc2d6d079b227585b7838faabc3140999edbe23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ccc2d6d079b227585b7838faabc3140999edbe23", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccc2d6d079b227585b7838faabc3140999edbe23/comments", "author": null, "committer": null, "parents": [{"sha": "85cdcd2d6a1b650071ed6e39b48ed9aa54daa187", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85cdcd2d6a1b650071ed6e39b48ed9aa54daa187", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85cdcd2d6a1b650071ed6e39b48ed9aa54daa187"}], "stats": {"total": 73, "additions": 73, "deletions": 0}, "files": [{"sha": "fb4176264b35eab76c08008dbdb4289ade92d7f6", "filename": "gcc/rtlanal.c", "status": "modified", "additions": 73, "deletions": 0, "changes": 73, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccc2d6d079b227585b7838faabc3140999edbe23/gcc%2Frtlanal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccc2d6d079b227585b7838faabc3140999edbe23/gcc%2Frtlanal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtlanal.c?ref=ccc2d6d079b227585b7838faabc3140999edbe23", "patch": "@@ -2015,3 +2015,76 @@ computed_jump_p (insn)\n     }\n   return 0;\n }\n+\n+/* Traverse X via depth-first search, calling F for each\n+   sub-expression (including X itself).  F is also passed the DATA.\n+   If F returns -1, do not traverse sub-expressions, but continue\n+   traversing the rest of the tree.  If F ever returns any other\n+   non-zero value, stop the traversal, and return the value returned\n+   by F.  Otherwise, return 0.  This function does not traverse inside\n+   tree structure that contains RTX_EXPRs, or into sub-expressions\n+   whose format code is `0' since it is not known whether or not those\n+   codes are actually RTL.\n+\n+   This routine is very general, and could (should?) be used to\n+   implement many of the other routines in this file.  */\n+\n+int for_each_rtx (x, f, data)\n+     rtx* x;\n+     rtx_function f;\n+     void* data;\n+{\n+  int result;\n+  int length;\n+  char* format;\n+  int i;\n+\n+  /* Call F on X.  */\n+  result = (*f)(x, data);\n+  if (result == -1)\n+    /* Do not traverse sub-expressions.  */\n+    return 0;\n+  else if (result != 0)\n+    /* Stop the traversal.  */\n+    return result;\n+\n+  if (*x == NULL_RTX)\n+    /* There are no sub-expressions.  */\n+    return 0;\n+\n+  length = GET_RTX_LENGTH (GET_CODE (*x));\n+  format = GET_RTX_FORMAT (GET_CODE (*x));\n+\n+  for (i = 0; i < length; ++i) \n+    {\n+      switch (format[i]) \n+\t{\n+\tcase 'e':\n+\t  result = for_each_rtx (&XEXP (*x, i), f, data);\n+\t  if (result != 0)\n+\t    return result;\n+\t  break;\n+\n+\tcase 'V':\n+\tcase 'E':\n+\t  if (XVEC (*x, i) != 0) \n+\t    {\n+\t      int j;\n+\t      for (j = 0; j < XVECLEN (*x, i); ++j)\n+\t\t{\n+\t\t  result = for_each_rtx (&XVECEXP (*x, i, j), f, data);\n+\t\t  if (result != 0)\n+\t\t    return result;\n+\t\t}\n+\t    }\n+\t  break; \n+\n+\tdefault:\n+\t  /* Nothing to do.  */\n+\t  break;\n+\t}\n+\n+    }\n+\n+  return 0;\n+}"}]}