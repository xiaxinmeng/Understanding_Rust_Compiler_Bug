{"sha": "deb6c11a73e8d651d367950b5ea35ee5f60c3a85", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGViNmMxMWE3M2U4ZDY1MWQzNjc5NTBiNWVhMzVlZTVmNjBjM2E4NQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2013-09-17T07:47:49Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2013-09-17T07:47:49Z"}, "message": "re PR tree-optimization/58432 (ICE: in insert_value_copy_on_edge, at tree-outof-ssa.c:233)\n\n2013-09-17  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/58432\n\t* tree-loop-distribution.c (tree_loop_distribution): Also\n\tscan PHIs for outside loop uses and seed a partition from them.\n\n\t* gcc.dg/pr58432.c: New testcase.\n\nFrom-SVN: r202644", "tree": {"sha": "5503f1fa8c1ef7d6aec0b94ebada2f7c4bcb7308", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5503f1fa8c1ef7d6aec0b94ebada2f7c4bcb7308"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/deb6c11a73e8d651d367950b5ea35ee5f60c3a85", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/deb6c11a73e8d651d367950b5ea35ee5f60c3a85", "html_url": "https://github.com/Rust-GCC/gccrs/commit/deb6c11a73e8d651d367950b5ea35ee5f60c3a85", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/deb6c11a73e8d651d367950b5ea35ee5f60c3a85/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c068654bb158dbe4c7d43a2841789b6b0c543a27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c068654bb158dbe4c7d43a2841789b6b0c543a27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c068654bb158dbe4c7d43a2841789b6b0c543a27"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "6c75db04de1e7382bddd98ee80d4789207418d5b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/deb6c11a73e8d651d367950b5ea35ee5f60c3a85/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/deb6c11a73e8d651d367950b5ea35ee5f60c3a85/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=deb6c11a73e8d651d367950b5ea35ee5f60c3a85", "patch": "@@ -1,3 +1,9 @@\n+2013-09-17  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/58432\n+\t* tree-loop-distribution.c (tree_loop_distribution): Also\n+\tscan PHIs for outside loop uses and seed a partition from them.\n+\n 2013-09-17  Bin Cheng  <bin.cheng@arm.com>\n \n \t* gimple-ssa-strength-reduction.c (backtrace_base_for_ref): New."}, {"sha": "050e2206caa4078a89eaf7d7b530cce492f0c785", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/deb6c11a73e8d651d367950b5ea35ee5f60c3a85/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/deb6c11a73e8d651d367950b5ea35ee5f60c3a85/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=deb6c11a73e8d651d367950b5ea35ee5f60c3a85", "patch": "@@ -1,3 +1,8 @@\n+2013-09-17  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/58432\n+\t* gcc.dg/pr58432.c: New testcase.\n+\n 2013-09-17  Bin Cheng  <bin.cheng@arm.com>\n \n \t* gcc.dg/tree-ssa/slsr-39.c: New test."}, {"sha": "22a720f142fa32d8bb053ff7f3fc54523e5c8f31", "filename": "gcc/testsuite/gcc.dg/pr58432.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/deb6c11a73e8d651d367950b5ea35ee5f60c3a85/gcc%2Ftestsuite%2Fgcc.dg%2Fpr58432.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/deb6c11a73e8d651d367950b5ea35ee5f60c3a85/gcc%2Ftestsuite%2Fgcc.dg%2Fpr58432.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr58432.c?ref=deb6c11a73e8d651d367950b5ea35ee5f60c3a85", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+/* { dg-require-profiling \"-fprofile-generate\" } */\n+/* { dg-options \"-O3 -fprofile-generate\" } */\n+\n+struct {\n+    int prefix;\n+    int dir_idx;\n+} *a;\n+int b;\n+void fn1() {\n+    int *c, *d;\n+    for (; b; b++)\n+      if (d[b]) {\n+\t  c[b] = d[b];\n+\t  a[0].dir_idx = 0;\n+      }\n+}"}, {"sha": "7482d8c68bc48973f06882d237b84a93e73b9e4c", "filename": "gcc/tree-loop-distribution.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/deb6c11a73e8d651d367950b5ea35ee5f60c3a85/gcc%2Ftree-loop-distribution.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/deb6c11a73e8d651d367950b5ea35ee5f60c3a85/gcc%2Ftree-loop-distribution.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-loop-distribution.c?ref=deb6c11a73e8d651d367950b5ea35ee5f60c3a85", "patch": "@@ -1676,6 +1676,17 @@ tree_loop_distribution (void)\n       for (i = 0; i < loop->num_nodes; ++i)\n \t{\n \t  gimple_stmt_iterator gsi;\n+\t  for (gsi = gsi_start_phis (bbs[i]); !gsi_end_p (gsi); gsi_next (&gsi))\n+\t    {\n+\t      gimple phi = gsi_stmt (gsi);\n+\t      if (virtual_operand_p (gimple_phi_result (phi)))\n+\t\tcontinue;\n+\t      /* Distribute stmts which have defs that are used outside of\n+\t         the loop.  */\n+\t      if (!stmt_has_scalar_dependences_outside_loop (loop, phi))\n+\t\tcontinue;\n+\t      work_list.safe_push (phi);\n+\t    }\n \t  for (gsi = gsi_start_bb (bbs[i]); !gsi_end_p (gsi); gsi_next (&gsi))\n \t    {\n \t      gimple stmt = gsi_stmt (gsi);"}]}