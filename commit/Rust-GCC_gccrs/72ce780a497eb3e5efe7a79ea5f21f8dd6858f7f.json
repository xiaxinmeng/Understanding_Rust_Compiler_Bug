{"sha": "72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f", "node_id": "C_kwDOANBUbNoAKDcyY2U3ODBhNDk3ZWIzZTVlZmU3YTc5ZWE1ZjIxZjhkZDY4NThmN2Y", "commit": {"author": {"name": "Tejas Joshi", "email": "TejasSanjay.Joshi@amd.com", "date": "2022-11-08T18:40:59Z"}, "committer": {"name": "Venkataramanan Kumar", "email": "Venkataramanan.Kumar@amd.com", "date": "2023-01-05T05:47:47Z"}, "message": "Add AMD znver4 instruction reservations\n\nThis adds znver4 automata units and reservations separately from other\nznver automata, avoiding the insn-automata.cc size blow-up.\n\ngcc/ChangeLog:\n\n\t* common/config/i386/i386-common.cc (processor_alias_table):\n\tUse CPU_ZNVER4 for znver4.\n\t* config/i386/i386.md: Add znver4.md.\n\t* config/i386/znver4.md: New.", "tree": {"sha": "84fd565ffc3110785c9789b339c034ebf1f1c035", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/84fd565ffc3110785c9789b339c034ebf1f1c035"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f/comments", "author": {"login": "tejas-amd", "id": 133217167, "node_id": "U_kgDOB_C7jw", "avatar_url": "https://avatars.githubusercontent.com/u/133217167?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tejas-amd", "html_url": "https://github.com/tejas-amd", "followers_url": "https://api.github.com/users/tejas-amd/followers", "following_url": "https://api.github.com/users/tejas-amd/following{/other_user}", "gists_url": "https://api.github.com/users/tejas-amd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tejas-amd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tejas-amd/subscriptions", "organizations_url": "https://api.github.com/users/tejas-amd/orgs", "repos_url": "https://api.github.com/users/tejas-amd/repos", "events_url": "https://api.github.com/users/tejas-amd/events{/privacy}", "received_events_url": "https://api.github.com/users/tejas-amd/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "56be1970765b6302de19977790a537d6feaaa34b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56be1970765b6302de19977790a537d6feaaa34b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/56be1970765b6302de19977790a537d6feaaa34b"}], "stats": {"total": 1071, "additions": 1070, "deletions": 1}, "files": [{"sha": "34737b3661ac047a24d69d963fe29ce2159f8bab", "filename": "gcc/common/config/i386/i386-common.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f/gcc%2Fcommon%2Fconfig%2Fi386%2Fi386-common.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f/gcc%2Fcommon%2Fconfig%2Fi386%2Fi386-common.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon%2Fconfig%2Fi386%2Fi386-common.cc?ref=72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f", "patch": "@@ -2217,7 +2217,7 @@ const pta processor_alias_table[] =\n   {\"znver3\", PROCESSOR_ZNVER3, CPU_ZNVER3,\n     PTA_ZNVER3,\n     M_CPU_SUBTYPE (AMDFAM19H_ZNVER3), P_PROC_AVX2},\n-  {\"znver4\", PROCESSOR_ZNVER4, CPU_ZNVER3,\n+  {\"znver4\", PROCESSOR_ZNVER4, CPU_ZNVER4,\n     PTA_ZNVER4,\n     M_CPU_SUBTYPE (AMDFAM19H_ZNVER4), P_PROC_AVX512F},\n   {\"btver1\", PROCESSOR_BTVER1, CPU_GENERIC,"}, {"sha": "76f55eca4cba155764de064f6ee02b0f4203777d", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f", "patch": "@@ -1323,6 +1323,7 @@\n (include \"bdver3.md\")\n (include \"btver2.md\")\n (include \"znver.md\")\n+(include \"znver4.md\")\n (include \"geode.md\")\n (include \"atom.md\")\n (include \"slm.md\")"}, {"sha": "d0b239822a88d2f7e6c610279479ba87b594ae39", "filename": "gcc/config/i386/znver4.md", "status": "added", "additions": 1068, "deletions": 0, "changes": 1068, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f/gcc%2Fconfig%2Fi386%2Fznver4.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f/gcc%2Fconfig%2Fi386%2Fznver4.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fznver4.md?ref=72ce780a497eb3e5efe7a79ea5f21f8dd6858f7f", "patch": "@@ -0,0 +1,1068 @@\n+;; Copyright (C) 2012-2022 Free Software Foundation, Inc.\n+;;\n+;; This file is part of GCC.\n+;;\n+;; GCC is free software; you can redistribute it and/or modify\n+;; it under the terms of the GNU General Public License as published by\n+;; the Free Software Foundation; either version 3, or (at your option)\n+;; any later version.\n+;;\n+;; GCC is distributed in the hope that it will be useful,\n+;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n+;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+;; GNU General Public License for more details.\n+;;\n+;; You should have received a copy of the GNU General Public License\n+;; along with GCC; see the file COPYING3.  If not see\n+;; <http://www.gnu.org/licenses/>.\n+;;\n+\n+\n+(define_attr \"znver4_decode\" \"direct,vector,double\"\n+  (const_string \"direct\"))\n+\n+;; AMD znver4 Scheduling\n+;; Modeling automatons for zen decoders, integer execution pipes,\n+;; AGU pipes, branch, floating point execution and fp store units.\n+(define_automaton \"znver4, znver4_ieu, znver4_idiv, znver4_fdiv, znver4_agu, znver4_fpu, znver4_fp_store\")\n+\n+;; Decoders unit has 4 decoders and all of them can decode fast path\n+;; and vector type instructions.\n+(define_cpu_unit \"znver4-decode0\" \"znver4\")\n+(define_cpu_unit \"znver4-decode1\" \"znver4\")\n+(define_cpu_unit \"znver4-decode2\" \"znver4\")\n+(define_cpu_unit \"znver4-decode3\" \"znver4\")\n+\n+;; Currently blocking all decoders for vector path instructions as\n+;; they are dispatched separetely as microcode sequence.\n+(define_reservation \"znver4-vector\" \"znver4-decode0+znver4-decode1+znver4-decode2+znver4-decode3\")\n+\n+;; Direct instructions can be issued to any of the four decoders.\n+(define_reservation \"znver4-direct\" \"znver4-decode0|znver4-decode1|znver4-decode2|znver4-decode3\")\n+\n+;; Fix me: Need to revisit this later to simulate fast path double behavior.\n+(define_reservation \"znver4-double\" \"znver4-direct\")\n+\n+\n+;; Integer unit 4 ALU pipes.\n+(define_cpu_unit \"znver4-ieu0\" \"znver4_ieu\")\n+(define_cpu_unit \"znver4-ieu1\" \"znver4_ieu\")\n+(define_cpu_unit \"znver4-ieu2\" \"znver4_ieu\")\n+(define_cpu_unit \"znver4-ieu3\" \"znver4_ieu\")\n+;; Znver4 has an additional branch unit.\n+(define_cpu_unit \"znver4-bru0\" \"znver4_ieu\")\n+(define_reservation \"znver4-ieu\" \"znver4-ieu0|znver4-ieu1|znver4-ieu2|znver4-ieu3\")\n+\n+;; 3 AGU pipes in znver4\n+(define_cpu_unit \"znver4-agu0\" \"znver4_agu\")\n+(define_cpu_unit \"znver4-agu1\" \"znver4_agu\")\n+(define_cpu_unit \"znver4-agu2\" \"znver4_agu\")\n+(define_reservation \"znver4-agu-reserve\" \"znver4-agu0|znver4-agu1|znver4-agu2\")\n+\n+;; Load is 4 cycles. We do not model reservation of load unit.\n+(define_reservation \"znver4-load\" \"znver4-agu-reserve\")\n+(define_reservation \"znver4-store\" \"znver4-agu-reserve\")\n+\n+;; vectorpath (microcoded) instructions are single issue instructions.\n+;; So, they occupy all the integer units.\n+(define_reservation \"znver4-ivector\" \"znver4-ieu0+znver4-ieu1\n+\t\t\t\t      +znver4-ieu2+znver4-ieu3+znver4-bru0\n+\t\t\t\t      +znver4-agu0+znver4-agu1+znver4-agu2\")\n+\n+;; Floating point unit 4 FP pipes.\n+(define_cpu_unit \"znver4-fpu0\" \"znver4_fpu\")\n+(define_cpu_unit \"znver4-fpu1\" \"znver4_fpu\")\n+(define_cpu_unit \"znver4-fpu2\" \"znver4_fpu\")\n+(define_cpu_unit \"znver4-fpu3\" \"znver4_fpu\")\n+\n+(define_reservation \"znver4-fpu\" \"znver4-fpu0|znver4-fpu1|znver4-fpu2|znver4-fpu3\")\n+\n+(define_reservation \"znver4-fvector\" \"znver4-fpu0+znver4-fpu1\n+\t\t\t\t      +znver4-fpu2+znver4-fpu3\n+\t\t\t\t      +znver4-agu0+znver4-agu1+znver4-agu2\")\n+\n+;; DIV units\n+(define_cpu_unit \"znver4-idiv\" \"znver4_idiv\")\n+(define_cpu_unit \"znver4-fdiv\" \"znver4_fdiv\")\n+\n+;; Separate fp store and fp-to-int store. Although there are 2 store pipes, the\n+;; throughput is limited to only one per cycle.\n+(define_cpu_unit \"znver4-fp-store\" \"znver4_fp_store\")\n+\n+\n+;; Integer Instructions\n+;; Move instructions\n+;; XCHG\n+(define_insn_reservation \"znver4_imov_double\" 1\n+\t\t\t(and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t\t (and (eq_attr \"znver1_decode\" \"double\")\n+\t\t\t\t  (and (eq_attr \"type\" \"imov\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-double,znver4-ieu\")\n+\n+(define_insn_reservation \"znver4_imov_double_load\" 5\n+\t\t\t(and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t\t (and (eq_attr \"znver1_decode\" \"double\")\n+\t\t\t\t  (and (eq_attr \"type\" \"imov\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-double,znver4-load,znver4-ieu\")\n+\n+;; imov, imovx\n+(define_insn_reservation \"znver4_imov\" 1\n+            (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t\t (and (eq_attr \"type\" \"imov,imovx\")\n+\t\t\t\t  (eq_attr \"memory\" \"none\")))\n+             \"znver4-direct,znver4-ieu\")\n+\n+(define_insn_reservation \"znver4_imov_load\" 5\n+\t\t\t(and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t\t (and (eq_attr \"type\" \"imov,imovx\")\n+\t\t\t\t  (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-ieu\")\n+\n+;; Push Instruction\n+(define_insn_reservation \"znver4_push\" 1\n+\t\t\t(and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t     (and (eq_attr \"type\" \"push\")\n+\t\t\t\t  (eq_attr \"memory\" \"store\")))\n+\t\t\t \"znver4-direct,znver4-store\")\n+\n+(define_insn_reservation \"znver4_push_mem\" 5\n+\t\t\t(and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t\t (and (eq_attr \"type\" \"push\")\n+\t\t\t\t  (eq_attr \"memory\" \"both\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-store\")\n+\n+;; Pop instruction\n+(define_insn_reservation \"znver4_pop\" 4\n+\t\t\t(and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t     (and (eq_attr \"type\" \"pop\")\n+\t\t\t\t  (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-direct,znver4-load\")\n+\n+(define_insn_reservation \"znver4_pop_mem\" 5\n+            (and (eq_attr \"cpu\" \"znver4\")\n+                 (and (eq_attr \"type\" \"pop\")\n+                  (eq_attr \"memory\" \"both\")))\n+             \"znver4-direct,znver4-load,znver4-store\")\n+\n+;; Integer Instructions or General instructions\n+;; Multiplications\n+(define_insn_reservation \"znver4_imul\" 3\n+\t\t\t(and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t     (and (eq_attr \"type\" \"imul\")\n+\t\t\t\t  (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-direct,znver4-ieu1\")\n+\n+(define_insn_reservation \"znver4_imul_load\" 7\n+\t\t\t(and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t     (and (eq_attr \"type\" \"imul\")\n+\t\t\t\t  (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-ieu1\")\n+\n+;; Divisions\n+(define_insn_reservation \"znver4_idiv_DI\" 18\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"idiv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"DI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-double,znver4-idiv*10\")\n+\n+(define_insn_reservation \"znver4_idiv_SI\" 12\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"idiv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-double,znver4-idiv*6\")\n+\n+(define_insn_reservation \"znver4_idiv_HI\" 10\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"idiv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"HI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-double,znver4-idiv*4\")\n+\n+(define_insn_reservation \"znver4_idiv_QI\" 9\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"idiv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"QI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-double,znver4-idiv*4\")\n+\n+(define_insn_reservation \"znver4_idiv_DI_load\" 22\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"idiv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"DI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-double,znver4-load,znver4-idiv*10\")\n+\n+(define_insn_reservation \"znver4_idiv_SI_load\" 16\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"idiv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-double,znver4-load,znver4-idiv*6\")\n+\n+(define_insn_reservation \"znver4_idiv_HI_load\" 14\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"idiv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"HI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-double,znver4-load,znver4-idiv*4\")\n+\n+(define_insn_reservation \"znver4_idiv_QI_load\" 13\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"idiv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"QI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-double,znver4-load,znver4-idiv*4\")\n+\n+;; INTEGER/GENERAL Instructions\n+(define_insn_reservation \"znver4_insn\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"alu,alu1,negnot,rotate1,ishift1,test,incdec,icmp\")\n+\t\t\t\t   (eq_attr \"memory\" \"none,unknown\")))\n+\t\t\t \"znver4-direct,znver4-ieu\")\n+\n+(define_insn_reservation \"znver4_insn_load\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"alu,alu1,negnot,rotate1,ishift1,test,incdec,icmp\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-ieu\")\n+\n+(define_insn_reservation \"znver4_insn2\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"icmov,setcc\")\n+\t\t\t\t   (eq_attr \"memory\" \"none,unknown\")))\n+\t\t\t \"znver4-direct,znver4-ieu0|znver4-ieu3\")\n+\n+(define_insn_reservation \"znver4_insn2_load\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"icmov,setcc\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-ieu0|znver4-ieu3\")\n+\n+(define_insn_reservation \"znver4_rotate\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"rotate\")\n+\t\t\t\t   (eq_attr \"memory\" \"none,unknown\")))\n+\t\t\t \"znver4-direct,znver4-ieu1|znver4-ieu2\")\n+\n+(define_insn_reservation \"znver4_rotate_load\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"rotate\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-ieu1|znver4-ieu2\")\n+\n+(define_insn_reservation \"znver4_insn_store\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"alu,alu1,negnot,rotate1,ishift1,test,incdec,icmp\")\n+\t\t\t\t   (eq_attr \"memory\" \"store\")))\n+\t\t\t \"znver4-direct,znver4-ieu,znver4-store\")\n+\n+(define_insn_reservation \"znver4_insn2_store\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"icmov,setcc\")\n+\t\t\t\t   (eq_attr \"memory\" \"store\")))\n+\t\t\t \"znver4-direct,znver4-ieu0|znver4-ieu3,znver4-store\")\n+\n+(define_insn_reservation \"znver4_rotate_store\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"rotate\")\n+\t\t\t\t   (eq_attr \"memory\" \"store\")))\n+\t\t\t \"znver4-direct,znver4-ieu1|znver4-ieu2,znver4-store\")\n+\n+;; alu1 instructions\n+(define_insn_reservation \"znver4_alu1_vector\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"znver1_decode\" \"vector\")\n+\t\t\t\t   (and (eq_attr \"type\" \"alu1\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none,unknown\"))))\n+\t\t\t \"znver4-vector,znver4-ivector*3\")\n+\n+(define_insn_reservation \"znver4_alu1_vector_load\" 7\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"znver1_decode\" \"vector\")\n+\t\t\t\t   (and (eq_attr \"type\" \"alu1\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-vector,znver4-load,znver4-ivector*3\")\n+\n+;; Call Instruction\n+(define_insn_reservation \"znver4_call\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (eq_attr \"type\" \"call,callv\"))\n+\t\t\t \"znver4-double,znver4-ieu0|znver4-bru0,znver4-store\")\n+\n+;; Branches\n+(define_insn_reservation \"znver4_branch\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ibr\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\")))\n+\t\t\t  \"znver4-direct,znver4-ieu0|znver4-bru0\")\n+\n+(define_insn_reservation \"znver4_branch_load\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ibr\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\")))\n+\t\t\t  \"znver4-direct,znver4-load,znver4-ieu0|znver4-bru0\")\n+\n+(define_insn_reservation \"znver4_branch_vector\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ibr\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none,unknown\")))\n+\t\t\t  \"znver4-vector,znver4-ivector*2\")\n+\n+(define_insn_reservation \"znver4_branch_vector_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ibr\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\")))\n+\t\t\t  \"znver4-vector,znver4-load,znver4-ivector*2\")\n+\n+;; LEA instruction with simple addressing\n+(define_insn_reservation \"znver4_lea\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (eq_attr \"type\" \"lea\"))\n+\t\t\t \"znver4-direct,znver4-ieu\")\n+\n+;; Leave\n+(define_insn_reservation \"znver4_leave\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (eq_attr \"type\" \"leave\"))\n+\t\t\t \"znver4-double,znver4-ieu,znver4-store\")\n+\n+;; STR and ISHIFT are microcoded.\n+(define_insn_reservation \"znver4_str\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"str\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-vector,znver4-ivector*3\")\n+\n+(define_insn_reservation \"znver4_str_load\" 7\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"str\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-vector,znver4-load,znver4-ivector*3\")\n+\n+(define_insn_reservation \"znver4_ishift\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ishift\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-vector,znver4-ivector*2\")\n+\n+(define_insn_reservation \"znver4_ishift_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ishift\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-vector,znver4-load,znver4-ivector*2\")\n+\n+;; Other vector type\n+(define_insn_reservation \"znver4_ieu_vector\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"other,multi\")\n+\t\t\t\t   (eq_attr \"memory\" \"none,unknown\")))\n+\t\t\t \"znver4-vector,znver4-ivector*5\")\n+\n+(define_insn_reservation \"znver4_ieu_vector_load\" 9\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"other,multi\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-vector,znver4-load,znver4-ivector*5\")\n+\n+;; Floating Point\n+;; FP movs\n+(define_insn_reservation \"znver4_fp_cmov\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (eq_attr \"type\" \"fcmov\"))\n+\t\t\t \"znver4-vector,znver4-fvector*3\")\n+\n+(define_insn_reservation \"znver4_fp_mov_direct\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (eq_attr \"type\" \"fmov\"))\n+\t\t\t \"znver4-direct,znver4-fpu0|znver4-fpu1\")\n+\n+;;FLD\n+(define_insn_reservation \"znver4_fp_mov_direct_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"znver1_decode\" \"direct\")\n+\t\t\t\t   (and (eq_attr \"type\" \"fmov\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0|znver4-fpu1\")\n+\n+;;FST\n+(define_insn_reservation \"znver4_fp_mov_direct_store\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"znver1_decode\" \"direct\")\n+\t\t\t\t   (and (eq_attr \"type\" \"fmov\")\n+\t\t\t\t\t(eq_attr \"memory\" \"store\"))))\n+\t\t\t \"znver4-direct,znver4-fpu0|znver4-fpu1,znver4-fp-store\")\n+\n+;;FILD\n+(define_insn_reservation \"znver4_fp_mov_double_load\" 13\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"znver1_decode\" \"double\")\n+\t\t\t\t   (and (eq_attr \"type\" \"fmov\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu1\")\n+\n+;;FIST\n+(define_insn_reservation \"znver4_fp_mov_double_store\" 7\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"znver1_decode\" \"double\")\n+\t\t\t\t   (and (eq_attr \"type\" \"fmov\")\n+\t\t\t\t\t(eq_attr \"memory\" \"store\"))))\n+\t\t\t \"znver4-double,znver4-fpu1,znver4-fp-store\")\n+\n+;; FSQRT\n+(define_insn_reservation \"znver4_fsqrt\" 22\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"fpspc\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"XF\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fdiv*10\")\n+\n+;; FPSPC instructions\n+(define_insn_reservation \"znver4_fp_spc\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"fpspc\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-vector,znver4-fvector*6\")\n+\n+(define_insn_reservation \"znver4_fp_insn_vector\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"znver1_decode\" \"vector\")\n+\t\t\t\t   (eq_attr \"type\" \"mmxcvt,sselog1,ssemov\")))\n+\t\t\t \"znver4-vector,znver4-fvector*6\")\n+\n+;; FADD, FSUB, FMUL\n+(define_insn_reservation \"znver4_fp_op_mul\" 7\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"fop,fmul\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-direct,znver4-fpu0\")\n+\n+(define_insn_reservation \"znver4_fp_op_mul_load\" 12\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"fop,fmul\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0\")\n+\n+;; FDIV\n+(define_insn_reservation \"znver4_fp_div\" 15\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"fdiv\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-direct,znver4-fdiv*6\")\n+\n+(define_insn_reservation \"znver4_fp_div_load\" 20\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"fdiv\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fdiv*6\")\n+\n+(define_insn_reservation \"znver4_fp_idiv_load\" 24\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"fdiv\")\n+\t\t\t\t   (and (eq_attr \"fp_int_src\" \"true\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-double,znver4-load,znver4-fdiv*6\")\n+\n+;; FABS, FCHS\n+(define_insn_reservation \"znver4_fp_fsgn\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (eq_attr \"type\" \"fsgn\"))\n+\t\t\t \"znver4-direct,znver4-fpu0|znver4-fpu1\")\n+\n+;; FCMP\n+(define_insn_reservation \"znver4_fp_fcmp\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"fcmp\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-direct,znver4-fpu1\")\n+\n+(define_insn_reservation \"znver4_fp_fcmp_double\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"fcmp\")\n+\t\t\t\t   (and (eq_attr \"znver1_decode\" \"double\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-double,znver4-fpu1,znver4-fpu2\")\n+\n+;; MMX, SSE, SSEn.n instructions\n+(define_insn_reservation \"znver4_fp_mmx\t\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (eq_attr \"type\" \"mmx\"))\n+\t\t\t \"znver4-direct,znver4-fpu1|znver4-fpu2\")\n+\n+(define_insn_reservation \"znver4_mmx_add_cmp\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"mmxadd,mmxcmp\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-direct,znver4-fpu\")\n+\n+(define_insn_reservation \"znver4_mmx_add_cmp_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"mmxadd,mmxcmp\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu\")\n+\n+(define_insn_reservation \"znver4_mmx_insn\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"mmxcvt,sseshuf,sseshuf1,mmxshft\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-direct,znver4-fpu1|znver4-fpu2\")\n+\n+(define_insn_reservation \"znver4_mmx_insn_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"mmxcvt,sseshuf,sseshuf1,mmxshft\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu1|znver4-fpu2\")\n+\n+(define_insn_reservation \"znver4_mmx_mov\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"mmxmov\")\n+\t\t\t\t   (eq_attr \"memory\" \"store\")))\n+\t\t\t \"znver4-direct,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_mmx_mov_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"mmxmov\")\n+\t\t\t\t   (eq_attr \"memory\" \"both\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_mmx_mul\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"mmxmul\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t  \"znver4-direct,znver4-fpu0|znver4-fpu3\")\n+\n+(define_insn_reservation \"znver4_mmx_mul_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"mmxmul\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t  \"znver4-direct,znver4-load,znver4-fpu0|znver4-fpu3\")\n+\n+;; AVX instructions\n+(define_insn_reservation \"znver4_sse_log\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sselog\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4SF,V8SF,V2DF,V4DF,QI,HI,SI,DI,TI,OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu\")\n+\n+(define_insn_reservation \"znver4_sse_log_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sselog\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4SF,V8SF,V2DF,V4DF,QI,HI,SI,DI,TI,OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu\")\n+\n+(define_insn_reservation \"znver4_sse_log1\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sselog1\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4SF,V8SF,V2DF,V4DF,QI,HI,SI,DI,TI,OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"store\"))))\n+\t\t\t \"znver4-direct,znver4-fpu1|znver4-fpu2,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_log1_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sselog1\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4SF,V8SF,V2DF,V4DF,QI,HI,SI,DI,TI,OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"both\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu1|znver4-fpu2,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_comi\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecomi\")\n+\t\t\t\t   (eq_attr \"memory\" \"store\")))\n+\t\t\t \"znver4-double,znver4-fpu2|znver4-fpu3,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_comi_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecomi\")\n+\t\t\t\t   (eq_attr \"memory\" \"both\")))\n+\t\t\t \"znver4-double,znver4-load,znver4-fpu2|znver4-fpu3,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_test\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"prefix_extra\" \"1\")\n+\t\t\t\t   (and (eq_attr \"type\" \"ssecomi\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu1|znver4-fpu2\")\n+\n+(define_insn_reservation \"znver4_sse_test_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"prefix_extra\" \"1\")\n+\t\t\t\t   (and (eq_attr \"type\" \"ssecomi\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu1|znver4-fpu2\")\n+\n+(define_insn_reservation \"znver4_sse_imul\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseimul\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"QI,HI,SI,DI,TI,OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu0|znver4-fpu3\")\n+\n+(define_insn_reservation \"znver4_sse_imul_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseimul\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"QI,HI,SI,DI,TI,OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0|znver4-fpu1\")\n+\n+(define_insn_reservation \"znver4_sse_mov\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"QI,HI,SI,DI,TI,OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu1|znver4-fpu2\")\n+\n+(define_insn_reservation \"znver4_sse_mov_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"QI,HI,SI,DI,TI,OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu1|znver4-fpu2\")\n+\n+(define_insn_reservation \"znver4_sse_mov_store\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"QI,HI,SI,DI,TI,OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"store\"))))\n+\t\t\t \"znver4-direct,znver4-fpu1|znver4-fpu2,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_mov_fp\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF,V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu\")\n+\n+(define_insn_reservation \"znver4_sse_mov_fp_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF,V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu\")\n+\n+(define_insn_reservation \"znver4_sse_mov_fp_store\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF,V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"store\"))))\n+\t\t\t \"znver4-direct,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_add\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseadd\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu2|znver4-fpu3\")\n+\n+(define_insn_reservation \"znver4_sse_add_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseadd\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu2|znver4-fpu3\")\n+\n+(define_insn_reservation \"znver4_sse_add1\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseadd1\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-vector,znver4-fvector*2\")\n+\n+(define_insn_reservation \"znver4_sse_add1_load\" 9\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseadd1\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-vector,znver4-load,znver4-fvector*2\")\n+\n+(define_insn_reservation \"znver4_sse_iadd\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseiadd\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"QI,HI,SI,DI,TI,OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu\")\n+\n+(define_insn_reservation \"znver4_sse_iadd_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseiadd\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"QI,HI,SI,DI,TI,OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu\")\n+\n+(define_insn_reservation \"znver4_sse_mul\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemul\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu0|znver4-fpu1\")\n+\n+(define_insn_reservation \"znver4_sse_mul_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemul\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0|znver4-fpu1\")\n+\n+(define_insn_reservation \"znver4_sse_div_pd\" 13\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4DF,V2DF,V1DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fdiv*5\")\n+\n+(define_insn_reservation \"znver4_sse_div_ps\" 10\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4SF,V2SF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fdiv*3\")\n+\n+(define_insn_reservation \"znver4_sse_div_pd_load\" 18\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4DF,V2DF,V1DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fdiv*5\")\n+\n+(define_insn_reservation \"znver4_sse_div_ps_load\" 15\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4SF,V2SF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fdiv*3\")\n+\n+(define_insn_reservation \"znver4_sse_cmp_avx\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n+\t\t\t\t   (and (eq_attr \"prefix\" \"vex\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu0|znver4-fpu1\")\n+\n+(define_insn_reservation \"znver4_sse_cmp_avx_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n+\t\t\t\t   (and (eq_attr \"prefix\" \"vex\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0|znver4-fpu1\")\n+\n+(define_insn_reservation \"znver4_sse_comi_avx\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecomi\")\n+\t\t\t\t   (eq_attr \"memory\" \"store\")))\n+\t\t\t \"znver4-direct,znver4-fpu2+znver4-fpu3,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_comi_avx_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecomi\")\n+\t\t\t\t   (eq_attr \"memory\" \"both\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu2+znver4-fpu3,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_cvt\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu2|znver4-fpu3\")\n+\n+(define_insn_reservation \"znver4_sse_cvt_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu2|znver4-fpu3\")\n+\n+(define_insn_reservation \"znver4_sse_icvt\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu2|znver4-fpu3\")\n+\n+(define_insn_reservation \"znver4_sse_icvt_store\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SI\")\n+\t\t\t\t    (eq_attr \"memory\" \"store\"))))\n+\t\t\t \"znver4-double,znver4-fpu2|znver4-fpu3,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_shuf\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseshuf\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu1|znver4-fpu2\")\n+\n+(define_insn_reservation \"znver4_sse_shuf_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseshuf\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu\")\n+\n+(define_insn_reservation \"znver4_sse_ishuf\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseshuf\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu1|znver4-fpu2\")\n+\n+(define_insn_reservation \"znver4_sse_ishuf_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseshuf\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"OI\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu1|znver4-fpu2\")\n+\n+;; AVX512 instructions\n+(define_insn_reservation \"znver4_sse_log_evex\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sselog\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF,XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu0*2|znver4-fpu1*2|znver4-fpu2*2|znver4-fpu3*2\")\n+\n+(define_insn_reservation \"znver4_sse_log_evex_load\" 7\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sselog\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF,XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0*2|znver4-fpu1*2|znver4-fpu2*2|znver4-fpu3*2\")\n+\n+(define_insn_reservation \"znver4_sse_log1_evex\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sselog1\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF,XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu1*2|znver4-fpu2*2,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_log1_evex_load\" 7\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sselog1\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF,XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu1*2|znver4-fpu2*2,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_mul_evex\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemul\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+(define_insn_reservation \"znver4_sse_mul_evex_load\" 9\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemul\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+(define_insn_reservation \"znver4_sse_imul_evex\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseimul\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu0*2|znver4-fpu3*2\")\n+\n+(define_insn_reservation \"znver4_sse_imul_evex_load\" 9\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseimul\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+(define_insn_reservation \"znver4_sse_mov_evex\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu1*2|znver4-fpu2*2\")\n+\n+(define_insn_reservation \"znver4_sse_mov_evex_load\" 10\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu1*2|znver4-fpu2*2\")\n+\n+(define_insn_reservation \"znver4_sse_mov_evex_store\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"store\"))))\n+\t\t\t \"znver4-direct,znver4-fpu1*2|znver4-fpu2*2,znver4-fp-store\")\n+\n+(define_insn_reservation \"znver4_sse_add_evex\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseadd\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu2*2|znver4-fpu3*2\")\n+\n+(define_insn_reservation \"znver4_sse_add_evex_load\" 9\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseadd\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu2*2|znver4-fpu3*2\")\n+\n+(define_insn_reservation \"znver4_sse_iadd_evex\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseiadd\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu0*2|znver4-fpu1*2|znver4-fpu2*2|znver4-fpu3*2\")\n+\n+(define_insn_reservation \"znver4_sse_iadd_evex_load\" 7\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseiadd\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0*2|znver4-fpu1*2|znver4-fpu2*2|znver4-fpu3*2\")\n+\n+(define_insn_reservation \"znver4_sse_div_pd_evex\" 13\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fdiv*9\")\n+\n+(define_insn_reservation \"znver4_sse_div_ps_evex\" 10\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fdiv*6\")\n+\n+(define_insn_reservation \"znver4_sse_div_pd_evex_load\" 19\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fdiv*9\")\n+\n+(define_insn_reservation \"znver4_sse_div_ps_evex_load\" 16\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fdiv*6\")\n+\n+(define_insn_reservation \"znver4_sse_cmp_avx128\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (and (eq_attr \"prefix\" \"evex\")\n+\t\t\t\t\t (eq_attr \"memory\" \"none\")))))\n+\t\t\t \"znver4-direct,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+(define_insn_reservation \"znver4_sse_cmp_avx128_load\" 9\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4SF,V2DF,V2SF,V1DF,SF\")\n+\t\t\t\t    (and (eq_attr \"prefix\" \"evex\")\n+\t\t\t\t\t (eq_attr \"memory\" \"load\")))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+(define_insn_reservation \"znver4_sse_cmp_avx256\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF\")\n+\t\t\t\t    (and (eq_attr \"prefix\" \"evex\")\n+\t\t\t\t\t (eq_attr \"memory\" \"none\")))))\n+\t\t\t \"znver4-direct,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+(define_insn_reservation \"znver4_sse_cmp_avx256_load\" 10\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF\")\n+\t\t\t\t    (and (eq_attr \"prefix\" \"evex\")\n+\t\t\t\t\t (eq_attr \"memory\" \"load\")))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+(define_insn_reservation \"znver4_sse_cmp_avx512\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF\")\n+\t\t\t\t    (and (eq_attr \"prefix\" \"evex\")\n+\t\t\t\t\t (eq_attr \"memory\" \"none\")))))\n+\t\t\t \"znver4-direct,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+(define_insn_reservation \"znver4_sse_cmp_avx512_load\" 11\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF\")\n+\t\t\t\t    (and (eq_attr \"prefix\" \"evex\")\n+\t\t\t\t\t (eq_attr \"memory\" \"load\")))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+(define_insn_reservation \"znver4_sse_cvt_evex\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu1*2|znver4-fpu2*2,znver4-fpu2*2|znver4-fpu3*2\")\n+\n+(define_insn_reservation \"znver4_sse_cvt_evex_load\" 12\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu1*2|znver4-fpu2*2,znver4-fpu2*2|znver4-fpu3*2\")\n+\n+(define_insn_reservation \"znver4_sse_shuf_evex\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseshuf\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu0*2|znver4-fpu1*2|znver4-fpu2*2|znver4-fpu3*2\")\n+\n+(define_insn_reservation \"znver4_sse_shuf_evex_load\" 7\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseshuf\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V16SF,V8DF\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0*2|znver4-fpu1*2|znver4-fpu2*2|znver4-fpu3*2\")\n+\n+(define_insn_reservation \"znver4_sse_ishuf_evex\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseshuf\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"znver4-direct,znver4-fpu1*2|znver4-fpu2*2\")\n+\n+(define_insn_reservation \"znver4_sse_ishuf_evex_load\" 10\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseshuf\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"XI\")\n+\t\t\t\t    (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu1*2|znver4-fpu2*2\")\n+\n+(define_insn_reservation \"znver4_sse_muladd\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemuladd\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-direct,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+(define_insn_reservation \"znver4_sse_muladd_load\" 10\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"sseshuf\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver4-direct,znver4-load,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+;; AVX512 mask instructions\n+\n+(define_insn_reservation \"znver4_sse_mskmov\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"mskmov\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-direct,znver4-fpu0*2|znver4-fpu1*2\")\n+\n+(define_insn_reservation \"znver4_sse_msklog\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver4\")\n+\t\t\t      (and (eq_attr \"type\" \"msklog\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"znver4-direct,znver4-fpu2*2|znver4-fpu3*2\")"}]}