{"sha": "16fe6e8c9787a3be47bee3dbf094d22a5691c190", "node_id": "C_kwDOANBUbNoAKDE2ZmU2ZThjOTc4N2EzYmU0N2JlZTNkYmYwOTRkMjJhNTY5MWMxOTA", "commit": {"author": {"name": "Cui,Lili", "email": "lili.cui@intel.com", "date": "2022-03-17T06:34:49Z"}, "committer": {"name": "liuhongt", "email": "hongtao.liu@intel.com", "date": "2022-03-18T08:24:41Z"}, "message": "x86: Correct march=sapphirerapids to base on icelake server\n\nmarch=sapphirerapids should be based on icelake server not cooperlake.\n\ngcc/ChangeLog:\n\n\tPR target/104963\n\t* config/i386/i386.h (PTA_SAPPHIRERAPIDS): change it to base on ICX.\n\t* doc/invoke.texi: Update documents for Intel sapphirerapids.\n\ngcc/testsuite/ChangeLog:\n\n\tPR target/104963\n\t* gcc.target/i386/pr104963.c: New test case.", "tree": {"sha": "669738e0b2d8203ea3d26916380229ca8fb96641", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/669738e0b2d8203ea3d26916380229ca8fb96641"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/16fe6e8c9787a3be47bee3dbf094d22a5691c190", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16fe6e8c9787a3be47bee3dbf094d22a5691c190", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16fe6e8c9787a3be47bee3dbf094d22a5691c190", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16fe6e8c9787a3be47bee3dbf094d22a5691c190/comments", "author": {"login": "cuilili8868", "id": 54013017, "node_id": "MDQ6VXNlcjU0MDEzMDE3", "avatar_url": "https://avatars.githubusercontent.com/u/54013017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuilili8868", "html_url": "https://github.com/cuilili8868", "followers_url": "https://api.github.com/users/cuilili8868/followers", "following_url": "https://api.github.com/users/cuilili8868/following{/other_user}", "gists_url": "https://api.github.com/users/cuilili8868/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuilili8868/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuilili8868/subscriptions", "organizations_url": "https://api.github.com/users/cuilili8868/orgs", "repos_url": "https://api.github.com/users/cuilili8868/repos", "events_url": "https://api.github.com/users/cuilili8868/events{/privacy}", "received_events_url": "https://api.github.com/users/cuilili8868/received_events", "type": "User", "site_admin": false}, "committer": {"login": "algebra84", "id": 22926165, "node_id": "MDQ6VXNlcjIyOTI2MTY1", "avatar_url": "https://avatars.githubusercontent.com/u/22926165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algebra84", "html_url": "https://github.com/algebra84", "followers_url": "https://api.github.com/users/algebra84/followers", "following_url": "https://api.github.com/users/algebra84/following{/other_user}", "gists_url": "https://api.github.com/users/algebra84/gists{/gist_id}", "starred_url": "https://api.github.com/users/algebra84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algebra84/subscriptions", "organizations_url": "https://api.github.com/users/algebra84/orgs", "repos_url": "https://api.github.com/users/algebra84/repos", "events_url": "https://api.github.com/users/algebra84/events{/privacy}", "received_events_url": "https://api.github.com/users/algebra84/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e9ea30165b7c8086e83aaaed6b035518e7ae9285", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9ea30165b7c8086e83aaaed6b035518e7ae9285", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9ea30165b7c8086e83aaaed6b035518e7ae9285"}], "stats": {"total": 28, "additions": 21, "deletions": 7}, "files": [{"sha": "b92955177fe9458a9ebc847935fe8b2653828469", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16fe6e8c9787a3be47bee3dbf094d22a5691c190/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16fe6e8c9787a3be47bee3dbf094d22a5691c190/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=16fe6e8c9787a3be47bee3dbf094d22a5691c190", "patch": "@@ -2323,10 +2323,11 @@ constexpr wide_int_bitmask PTA_ICELAKE_SERVER = PTA_ICELAKE_CLIENT\n   | PTA_PCONFIG | PTA_WBNOINVD | PTA_CLWB;\n constexpr wide_int_bitmask PTA_TIGERLAKE = PTA_ICELAKE_CLIENT | PTA_MOVDIRI\n   | PTA_MOVDIR64B | PTA_CLWB | PTA_AVX512VP2INTERSECT | PTA_KL | PTA_WIDEKL;\n-constexpr wide_int_bitmask PTA_SAPPHIRERAPIDS = PTA_COOPERLAKE | PTA_MOVDIRI\n+constexpr wide_int_bitmask PTA_SAPPHIRERAPIDS = PTA_ICELAKE_SERVER | PTA_MOVDIRI\n   | PTA_MOVDIR64B | PTA_AVX512VP2INTERSECT | PTA_ENQCMD | PTA_CLDEMOTE\n   | PTA_PTWRITE | PTA_WAITPKG | PTA_SERIALIZE | PTA_TSXLDTRK | PTA_AMX_TILE\n-  | PTA_AMX_INT8 | PTA_AMX_BF16 | PTA_UINTR | PTA_AVXVNNI | PTA_AVX512FP16;\n+  | PTA_AMX_INT8 | PTA_AMX_BF16 | PTA_UINTR | PTA_AVXVNNI | PTA_AVX512FP16\n+  | PTA_AVX512BF16;\n constexpr wide_int_bitmask PTA_KNL = PTA_BROADWELL | PTA_AVX512PF\n   | PTA_AVX512ER | PTA_AVX512F | PTA_AVX512CD | PTA_PREFETCHWT1;\n constexpr wide_int_bitmask PTA_BONNELL = PTA_CORE2 | PTA_MOVBE;"}, {"sha": "e3f2e82cde5765d4bc17a3b8f5697df9fc6fce28", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16fe6e8c9787a3be47bee3dbf094d22a5691c190/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16fe6e8c9787a3be47bee3dbf094d22a5691c190/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=16fe6e8c9787a3be47bee3dbf094d22a5691c190", "patch": "@@ -31288,11 +31288,12 @@ AVX512VP2INTERSECT and KEYLOCKER instruction set support.\n Intel sapphirerapids CPU with 64-bit extensions, MOVBE, MMX, SSE, SSE2, SSE3,\n SSSE3, SSE4.1, SSE4.2, POPCNT, CX16, SAHF, FXSR, AVX, XSAVE, PCLMUL, FSGSBASE,\n RDRND, F16C, AVX2, BMI, BMI2, LZCNT, FMA, MOVBE, HLE, RDSEED, ADCX, PREFETCHW,\n-AES, CLFLUSHOPT, XSAVEC, XSAVES, SGX, AVX512F, CLWB, AVX512VL, AVX512BW,\n-AVX512DQ, AVX512CD, AVX512VNNI, AVX512BF16 MOVDIRI, MOVDIR64B,\n-AVX512VP2INTERSECT, ENQCMD, CLDEMOTE, PTWRITE, WAITPKG, SERIALIZE, TSXLDTRK,\n-UINTR, AMX-BF16, AMX-TILE, AMX-INT8, AVX-VNNI and AVX512FP16 instruction set\n-support.\n+AES, CLFLUSHOPT, XSAVEC, XSAVES, SGX, AVX512F, AVX512VL, AVX512BW, AVX512DQ,\n+AVX512CD, PKU, AVX512VBMI, AVX512IFMA, SHA, AVX512VNNI, GFNI, VAES, AVX512VBMI2\n+VPCLMULQDQ, AVX512BITALG, RDPID, AVX512VPOPCNTDQ, PCONFIG, WBNOINVD, CLWB,\n+MOVDIRI, MOVDIR64B, AVX512VP2INTERSECT, ENQCMD, CLDEMOTE, PTWRITE, WAITPKG,\n+SERIALIZE, TSXLDTRK, UINTR, AMX-BF16, AMX-TILE, AMX-INT8, AVX-VNNI, AVX512FP16\n+and AVX512BF16 instruction set support.\n \n @item alderlake\n Intel Alderlake CPU with 64-bit extensions, MOVBE, MMX, SSE, SSE2, SSE3, SSSE3,"}, {"sha": "19000671ebf965c67c8c7dd76e4cad0ce7fd2e4c", "filename": "gcc/testsuite/gcc.target/i386/pr104963.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16fe6e8c9787a3be47bee3dbf094d22a5691c190/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr104963.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16fe6e8c9787a3be47bee3dbf094d22a5691c190/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr104963.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr104963.c?ref=16fe6e8c9787a3be47bee3dbf094d22a5691c190", "patch": "@@ -0,0 +1,12 @@\n+/* PR target/104963 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=sapphirerapids\" } */\n+\n+#include<immintrin.h>\n+\n+__m512i\n+foo (__m512i a, __m512i b)\n+{\n+    return _mm512_permutexvar_epi8(a, b);\n+}\n+"}]}