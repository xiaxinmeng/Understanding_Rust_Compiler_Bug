{"sha": "d5ae21aace3605eacb04951287177aa13bc12daf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDVhZTIxYWFjZTM2MDVlYWNiMDQ5NTEyODcxNzdhYTEzYmMxMmRhZg==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2001-03-12T04:30:56Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@gcc.gnu.org", "date": "2001-03-12T04:30:56Z"}, "message": "Call reload_cse_simplify_set before reload_cse_noop_set_p\n\nFrom-SVN: r40394", "tree": {"sha": "d3451d0ffd262621bd6accbec6a6cec51b2c50d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d3451d0ffd262621bd6accbec6a6cec51b2c50d5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d5ae21aace3605eacb04951287177aa13bc12daf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5ae21aace3605eacb04951287177aa13bc12daf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5ae21aace3605eacb04951287177aa13bc12daf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5ae21aace3605eacb04951287177aa13bc12daf/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "190c4cb48154ed57952a0ad043d39ee868cc3769", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/190c4cb48154ed57952a0ad043d39ee868cc3769", "html_url": "https://github.com/Rust-GCC/gccrs/commit/190c4cb48154ed57952a0ad043d39ee868cc3769"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "7b1751dc89265b6f10e9c35c26dae090edce02d3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5ae21aace3605eacb04951287177aa13bc12daf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5ae21aace3605eacb04951287177aa13bc12daf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d5ae21aace3605eacb04951287177aa13bc12daf", "patch": "@@ -1,3 +1,8 @@\n+2001-03-12  Aldy Hernandez  <aldyh@redhat.com>\n+\n+        * reload1.c (reload_cse_simplify): Call reload_cse_simplify_set\n+        before reload_cse_noop_set_p.\n+\n 2001-03-11  Zack Weinberg  <zackw@stanford.edu>\n \n \t* config.gcc: Where xm-host.h used to include another"}, {"sha": "2f64c2d7d4a044c70c897e826af071e09ec93e8f", "filename": "gcc/reload1.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5ae21aace3605eacb04951287177aa13bc12daf/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5ae21aace3605eacb04951287177aa13bc12daf/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=d5ae21aace3605eacb04951287177aa13bc12daf", "patch": "@@ -8041,7 +8041,15 @@ reload_cse_simplify (insn)\n   if (GET_CODE (body) == SET)\n     {\n       int count = 0;\n-      if (reload_cse_noop_set_p (body))\n+\n+      /* Simplify even if we may think it is a no-op.\n+         We may think a memory load of a value smaller than WORD_SIZE\n+         is redundant because we haven't taken into account possible\n+         implicit extension.  reload_cse_simplify_set() will bring\n+         this out, so it's safer to simplify before we delete.  */\n+      count += reload_cse_simplify_set (body, insn);\n+\n+      if (!count && reload_cse_noop_set_p (body))\n \t{\n \t  rtx value = SET_DEST (body);\n \t  if (! REG_FUNCTION_VALUE_P (SET_DEST (body)))\n@@ -8050,9 +8058,6 @@ reload_cse_simplify (insn)\n \t  return;\n \t}\n \n-      /* It's not a no-op, but we can try to simplify it.  */\n-      count += reload_cse_simplify_set (body, insn);\n-\n       if (count > 0)\n \tapply_change_group ();\n       else"}]}