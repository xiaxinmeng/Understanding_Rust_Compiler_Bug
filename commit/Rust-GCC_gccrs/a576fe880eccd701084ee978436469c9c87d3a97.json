{"sha": "a576fe880eccd701084ee978436469c9c87d3a97", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTU3NmZlODgwZWNjZDcwMTA4NGVlOTc4NDM2NDY5YzljODdkM2E5Nw==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-05-17T09:01:27Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-05-17T09:01:27Z"}, "message": "locale_facets.tcc (__pad<>::_S_pad): Minor tweaks, avoid unnecessary casts, do widenings just in time.\n\n2007-05-17  Paolo Carlini  <pcarlini@suse.de>\n\n\t* include/bits/locale_facets.tcc (__pad<>::_S_pad): Minor tweaks, avoid\n\tunnecessary casts, do widenings just in time.\n\nFrom-SVN: r124790", "tree": {"sha": "e207d48aa2f0439e788f766040a0e6e428513d9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e207d48aa2f0439e788f766040a0e6e428513d9d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a576fe880eccd701084ee978436469c9c87d3a97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a576fe880eccd701084ee978436469c9c87d3a97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a576fe880eccd701084ee978436469c9c87d3a97", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a576fe880eccd701084ee978436469c9c87d3a97/comments", "author": null, "committer": null, "parents": [{"sha": "1941551ace983154b5ded7ef85b01d7c2562fe4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1941551ace983154b5ded7ef85b01d7c2562fe4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1941551ace983154b5ded7ef85b01d7c2562fe4f"}], "stats": {"total": 34, "additions": 18, "deletions": 16}, "files": [{"sha": "27189d6bc1f69b96fa2a4a192201ecd3c3315008", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a576fe880eccd701084ee978436469c9c87d3a97/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a576fe880eccd701084ee978436469c9c87d3a97/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=a576fe880eccd701084ee978436469c9c87d3a97", "patch": "@@ -1,3 +1,8 @@\n+2007-05-17  Paolo Carlini  <pcarlini@suse.de>\n+\n+\t* include/bits/locale_facets.tcc (__pad<>::_S_pad): Minor tweaks, avoid\n+\tunnecessary casts, do widenings just in time.\n+\n 2007-05-16  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* acinclude.m4 (GLIBCXX_CHECK_COMPILER_FEATURES): Add a function"}, {"sha": "1b714adf8fe9cf8d0267ddc0d92b92f906ae0a42", "filename": "libstdc++-v3/include/bits/locale_facets.tcc", "status": "modified", "additions": 13, "deletions": 16, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a576fe880eccd701084ee978436469c9c87d3a97/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a576fe880eccd701084ee978436469c9c87d3a97/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc?ref=a576fe880eccd701084ee978436469c9c87d3a97", "patch": "@@ -1200,7 +1200,7 @@ _GLIBCXX_END_LDBL_NAMESPACE\n       // Padding last.\n       if (__adjust == ios_base::left)\n \t{\n-\t  _Traits::copy(__news, const_cast<_CharT*>(__olds), __oldlen);\n+\t  _Traits::copy(__news, __olds, __oldlen);\n \t  _Traits::assign(__news + __oldlen, __plen, __fill);\n \t  return;\n \t}\n@@ -1214,30 +1214,27 @@ _GLIBCXX_END_LDBL_NAMESPACE\n           const locale& __loc = __io._M_getloc();\n \t  const ctype<_CharT>& __ctype = use_facet<ctype<_CharT> >(__loc);\n \n-\t  const bool __testsign = (__ctype.widen('-') == __olds[0]\n-\t\t\t\t   || __ctype.widen('+') == __olds[0]);\n-\t  const bool __testhex = (__ctype.widen('0') == __olds[0]\n-\t\t\t\t  && __oldlen > 1\n-\t\t\t\t  && (__ctype.widen('x') == __olds[1]\n-\t\t\t\t      || __ctype.widen('X') == __olds[1]));\n-\t  if (__testhex)\n+\t  if (__ctype.widen('-') == __olds[0]\n+\t      || __ctype.widen('+') == __olds[0])\n \t    {\n \t      __news[0] = __olds[0];\n-\t      __news[1] = __olds[1];\n-\t      __mod = 2;\n-\t      __news += 2;\n+\t      __mod = 1;\n+\t      ++__news;\n \t    }\n-\t  else if (__testsign)\n+\t  else if (__ctype.widen('0') == __olds[0]\n+\t\t   && __oldlen > 1\n+\t\t   && (__ctype.widen('x') == __olds[1]\n+\t\t       || __ctype.widen('X') == __olds[1]))\n \t    {\n \t      __news[0] = __olds[0];\n-\t      __mod = 1;\n-\t      ++__news;\n+\t      __news[1] = __olds[1];\n+\t      __mod = 2;\n+\t      __news += 2;\n \t    }\n \t  // else Padding first.\n \t}\n       _Traits::assign(__news, __plen, __fill);\n-      _Traits::copy(__news + __plen, const_cast<_CharT*>(__olds + __mod),\n-\t\t    __oldlen - __mod);\n+      _Traits::copy(__news + __plen, __olds + __mod, __oldlen - __mod);\n     }\n \n   bool"}]}