{"sha": "74e56995145901773528b4cfdec971e8967d21c0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzRlNTY5OTUxNDU5MDE3NzM1MjhiNGNmZGVjOTcxZTg5NjdkMjFjMA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2017-06-19T14:19:35Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2017-06-19T14:19:35Z"}, "message": "pt.c (coerce_template_parms): Fix indentation.\n\n\t* pt.c (coerce_template_parms): Fix indentation.\n\t(tsubst_decl): Remove repeated SET_DECL_RTL.  Move VAR_P handling\n\tin to single block.\n\nFrom-SVN: r249370", "tree": {"sha": "e5020bddbe12f4d506d2ebb8b2fbb1ace0e0630b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5020bddbe12f4d506d2ebb8b2fbb1ace0e0630b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/74e56995145901773528b4cfdec971e8967d21c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74e56995145901773528b4cfdec971e8967d21c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74e56995145901773528b4cfdec971e8967d21c0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74e56995145901773528b4cfdec971e8967d21c0/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c14c0b1568f84e974152d2e2c1bc3da384a16f2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c14c0b1568f84e974152d2e2c1bc3da384a16f2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c14c0b1568f84e974152d2e2c1bc3da384a16f2d"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "5b90bbff94bcb306de1f946dd10b76da7453bce5", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74e56995145901773528b4cfdec971e8967d21c0/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74e56995145901773528b4cfdec971e8967d21c0/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=74e56995145901773528b4cfdec971e8967d21c0", "patch": "@@ -1,5 +1,9 @@\n 2017-06-19  Nathan Sidwell  <nathan@acm.org>\n \n+\t* pt.c (coerce_template_parms): Fix indentation.\n+\t(tsubst_decl): Remove repeated SET_DECL_RTL.  Move VAR_P handling\n+\tin to single block.\n+\n \tPR c++/81119\n \t* name-lookup.c (update_binding): Only warn about constructors\n \thidden by functions."}, {"sha": "e5238ad2fa5ced2d88b69077e6b7616431e04966", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74e56995145901773528b4cfdec971e8967d21c0/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74e56995145901773528b4cfdec971e8967d21c0/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=74e56995145901773528b4cfdec971e8967d21c0", "patch": "@@ -8101,10 +8101,10 @@ coerce_template_parms (tree parms,\n       parm = TREE_VEC_ELT (parms, parm_idx);\n  \n       if (parm == error_mark_node)\n-      {\n-        TREE_VEC_ELT (new_inner_args, arg_idx) = error_mark_node;\n-        continue;\n-      }\n+\t{\n+\t  TREE_VEC_ELT (new_inner_args, arg_idx) = error_mark_node;\n+\t  continue;\n+\t}\n \n       /* Calculate the next argument.  */\n       if (arg_idx < nargs)\n@@ -12947,13 +12947,11 @@ tsubst_decl (tree t, tree args, tsubst_flags_t complain)\n \t/* The initializer must not be expanded until it is required;\n \t   see [temp.inst].  */\n \tDECL_INITIAL (r) = NULL_TREE;\n-\tif (VAR_P (r))\n-\t  SET_DECL_MODE (r, VOIDmode);\n-\tif (CODE_CONTAINS_STRUCT (TREE_CODE (t), TS_DECL_WRTL))\n-\t  SET_DECL_RTL (r, NULL);\n \tDECL_SIZE (r) = DECL_SIZE_UNIT (r) = 0;\n \tif (VAR_P (r))\n \t  {\n+\t    SET_DECL_MODE (r, VOIDmode);\n+\n \t    /* Possibly limit visibility based on template args.  */\n \t    DECL_VISIBILITY (r) = VISIBILITY_DEFAULT;\n \t    if (DECL_VISIBILITY_SPECIFIED (t))"}]}