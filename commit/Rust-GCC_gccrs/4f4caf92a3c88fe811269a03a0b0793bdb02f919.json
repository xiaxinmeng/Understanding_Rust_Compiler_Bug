{"sha": "4f4caf92a3c88fe811269a03a0b0793bdb02f919", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGY0Y2FmOTJhM2M4OGZlODExMjY5YTAzYTBiMDc5M2JkYjAyZjkxOQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2000-07-28T18:04:21Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2000-07-28T18:04:21Z"}, "message": "libtool.m4, [...]: New files from the libtool CVS tree multi-language branch.\n\n\n2000-07-28  Alexandre Oliva  <aoliva@redhat.com>\n\n        * libtool.m4, ltcf-c.sh, ltcf-cxx.sh, ltcf-gcj.sh: New files from\n\tthe libtool CVS tree multi-language branch.\n\t* ltconfig, ltmain.sh: Updated.\n\nFrom-SVN: r35323", "tree": {"sha": "d1486ccf879b4d455d28c5c0dc344e540276ebe7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d1486ccf879b4d455d28c5c0dc344e540276ebe7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4f4caf92a3c88fe811269a03a0b0793bdb02f919", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f4caf92a3c88fe811269a03a0b0793bdb02f919", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f4caf92a3c88fe811269a03a0b0793bdb02f919", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f4caf92a3c88fe811269a03a0b0793bdb02f919/comments", "author": null, "committer": null, "parents": [{"sha": "3df6463367fd8817abe3accfa5d5ae44e1feda62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3df6463367fd8817abe3accfa5d5ae44e1feda62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3df6463367fd8817abe3accfa5d5ae44e1feda62"}], "stats": {"total": 7932, "additions": 5711, "deletions": 2221}, "files": [{"sha": "51d23215939d48333a09426930197dec706ec833", "filename": "ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=4f4caf92a3c88fe811269a03a0b0793bdb02f919", "patch": "@@ -1,3 +1,9 @@\n+2000-07-28  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* libtool.m4, ltcf-c.sh, ltcf-cxx.sh, ltcf-gcj.sh: New files from\n+\tthe libtool CVS tree multi-language branch.\n+\t* ltconfig, ltmain.sh: Updated.\n+\t\n 2000-07-27  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* Makefile.in (clean-target-libgcc): Remove gcc/libgcc."}, {"sha": "05c56ccbaf6fab89eeebda0743fb5a472fae3c75", "filename": "libtool.m4", "status": "added", "additions": 824, "deletions": 0, "changes": 824, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f4caf92a3c88fe811269a03a0b0793bdb02f919/libtool.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f4caf92a3c88fe811269a03a0b0793bdb02f919/libtool.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libtool.m4?ref=4f4caf92a3c88fe811269a03a0b0793bdb02f919", "patch": "@@ -0,0 +1,824 @@\n+## libtool.m4 - Configure libtool for the host system. -*-Shell-script-*-\n+## Copyright (C) 1996-1999,2000 Free Software Foundation, Inc.\n+## Originally by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996\n+##\n+## This program is free software; you can redistribute it and/or modify\n+## it under the terms of the GNU General Public License as published by\n+## the Free Software Foundation; either version 2 of the License, or\n+## (at your option) any later version.\n+##\n+## This program is distributed in the hope that it will be useful, but\n+## WITHOUT ANY WARRANTY; without even the implied warranty of\n+## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+## General Public License for more details.\n+##\n+## You should have received a copy of the GNU General Public License\n+## along with this program; if not, write to the Free Software\n+## Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.\n+##\n+## As a special exception to the GNU General Public License, if you\n+## distribute this file as part of a program that contains a\n+## configuration script generated by Autoconf, you may include it under\n+## the same distribution terms that you use for the rest of that program.\n+\n+# serial 45 AC_PROG_LIBTOOL\n+AC_DEFUN(AC_PROG_LIBTOOL,[AC_REQUIRE([_AC_PROG_LIBTOOL])\n+dnl If AC_PROG_CXX has already been expanded, run AC_LIBTOOL_CXX\n+dnl immediately, otherwise, hook it in at the end of AC_PROG_CXX.\n+  AC_PROVIDE_IFELSE([AC_PROG_CXX],\n+    [AC_LIBTOOL_CXX],\n+    [define([AC_PROG_CXX], defn([AC_PROG_CXX])[AC_LIBTOOL_CXX\n+])])\n+\n+dnl Quote A][M_PROG_GCJ so that aclocal doesn't bring it in needlessly.\n+dnl If either AC_PROG_GCJ or A][M_PROG_GCJ have already been expanded, run\n+dnl AC_LIBTOOL_GCJ immediately, otherwise, hook it in at the end of both.\n+  AC_PROVIDE_IFELSE([AC_PROG_GCJ],\n+    [AC_LIBTOOL_GCJ],\n+    [AC_PROVIDE_IFELSE([A][M_PROG_GCJ],\n+        [AC_LIBTOOL_GCJ],\n+\t[ifdef([AC_PROG_GCJ],\n+\t       [define([AC_PROG_GCJ], defn([AC_PROG_GCJ])[AC_LIBTOOL_GCJ\n+])])\n+\t ifdef([A][M_PROG_GCJ],\n+\t       [define([A][M_PROG_GCJ], defn([A][M_PROG_GCJ])[AC_LIBTOOL_GCJ\n+])])])])])\n+\n+AC_DEFUN(_AC_PROG_LIBTOOL,\n+[AC_REQUIRE([AC_LIBTOOL_SETUP])dnl\n+AC_BEFORE([$0],[AC_LIBTOOL_CXX])dnl\n+AC_BEFORE([$0],[AC_LIBTOOL_GCJ])dnl\n+\n+# Save cache, so that ltconfig can load it\n+AC_CACHE_SAVE\n+\n+# Actually configure libtool.  ac_aux_dir is where install-sh is found.\n+AR=\"$AR\" LTCC=\"$CC\" CC=\"$CC\" CFLAGS=\"$CFLAGS\" CPPFLAGS=\"$CPPFLAGS\" \\\n+MAGIC=\"$MAGIC\" LD=\"$LD\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n+LN_S=\"$LN_S\" NM=\"$NM\" RANLIB=\"$RANLIB\" STRIP=\"$STRIP\" \\\n+AS=\"$AS\" DLLTOOL=\"$DLLTOOL\" OBJDUMP=\"$OBJDUMP\" \\\n+objext=\"$OBJEXT\" exeext=\"$EXEEXT\" reload_flag=\"$reload_flag\" \\\n+deplibs_check_method=\"$deplibs_check_method\" file_magic_cmd=\"$file_magic_cmd\" \\\n+${CONFIG_SHELL-/bin/sh} $ac_aux_dir/ltconfig --no-reexec \\\n+$libtool_flags --no-verify --build=\"$build\" $ac_aux_dir/ltmain.sh $host \\\n+|| AC_MSG_ERROR([libtool configure failed])\n+\n+# Reload cache, that may have been modified by ltconfig\n+AC_CACHE_LOAD\n+\n+# This can be used to rebuild libtool when needed\n+LIBTOOL_DEPS=\"$ac_aux_dir/ltconfig $ac_aux_dir/ltmain.sh $ac_aux_dir/ltcf-c.sh\"\n+\n+# Always use our own libtool.\n+LIBTOOL='$(SHELL) $(top_builddir)/libtool'\n+AC_SUBST(LIBTOOL)dnl\n+\n+# Redirect the config.log output again, so that the ltconfig log is not\n+# clobbered by the next message.\n+exec 5>>./config.log\n+])\n+\n+AC_DEFUN(AC_LIBTOOL_SETUP,\n+[AC_PREREQ(2.13)dnl\n+AC_REQUIRE([AC_ENABLE_SHARED])dnl\n+AC_REQUIRE([AC_ENABLE_STATIC])dnl\n+AC_REQUIRE([AC_ENABLE_FAST_INSTALL])dnl\n+AC_REQUIRE([AC_CANONICAL_HOST])dnl\n+AC_REQUIRE([AC_CANONICAL_BUILD])dnl\n+AC_REQUIRE([AC_PROG_CC])dnl\n+AC_REQUIRE([AC_PROG_LD])dnl\n+AC_REQUIRE([AC_PROG_LD_RELOAD_FLAG])dnl\n+AC_REQUIRE([AC_PROG_NM])dnl\n+AC_REQUIRE([AC_PROG_LN_S])dnl\n+AC_REQUIRE([AC_DEPLIBS_CHECK_METHOD])dnl\n+# Autoconf 2.13's AC_OBJEXT and AC_EXEEXT macros only works for C compilers!\n+AC_REQUIRE([AC_OBJEXT])dnl\n+AC_REQUIRE([AC_EXEEXT])dnl\n+dnl\n+\n+# Only perform the check for file, if the check method requires it\n+case \"$deplibs_check_method\" in\n+file_magic*)\n+  if test \"$file_magic_cmd\" = '${MAGIC}'; then\n+    AC_PATH_MAGIC\n+  fi\n+  ;;\n+esac\n+\n+AC_CHECK_TOOL(RANLIB, ranlib, :)\n+AC_CHECK_TOOL(STRIP, strip, :)\n+\n+# Check for any special flags to pass to ltconfig.\n+libtool_flags=\"--cache-file=$cache_file\"\n+test \"$enable_shared\" = no && libtool_flags=\"$libtool_flags --disable-shared\"\n+test \"$enable_static\" = no && libtool_flags=\"$libtool_flags --disable-static\"\n+test \"$enable_fast_install\" = no && libtool_flags=\"$libtool_flags --disable-fast-install\"\n+test \"$ac_cv_prog_gcc\" = yes && libtool_flags=\"$libtool_flags --with-gcc\"\n+test \"$ac_cv_prog_gnu_ld\" = yes && libtool_flags=\"$libtool_flags --with-gnu-ld\"\n+ifdef([AC_PROVIDE_AC_LIBTOOL_DLOPEN],\n+[libtool_flags=\"$libtool_flags --enable-dlopen\"])\n+ifdef([AC_PROVIDE_AC_LIBTOOL_WIN32_DLL],\n+[libtool_flags=\"$libtool_flags --enable-win32-dll\"])\n+AC_ARG_ENABLE(libtool-lock,\n+  [  --disable-libtool-lock  avoid locking (might break parallel builds)])\n+test \"x$enable_libtool_lock\" = xno && libtool_flags=\"$libtool_flags --disable-lock\"\n+test x\"$silent\" = xyes && libtool_flags=\"$libtool_flags --silent\"\n+\n+AC_ARG_WITH(pic,\n+  [  --with-pic              try to use only PIC/non-PIC objects [default=use both]],\n+     pic_mode=\"$withval\", pic_mode=default)\n+test x\"$pic_mode\" = xyes && libtool_flags=\"$libtool_flags --prefer-pic\"\n+test x\"$pic_mode\" = xno && libtool_flags=\"$libtool_flags --prefer-non-pic\"\n+\n+# Some flags need to be propagated to the compiler or linker for good\n+# libtool support.\n+case \"$host\" in\n+*-*-irix6*)\n+  # Find out which ABI we are using.\n+  echo '[#]line __oline__ \"configure\"' > conftest.$ac_ext\n+  if AC_TRY_EVAL(ac_compile); then\n+    case \"`/usr/bin/file conftest.o`\" in\n+    *32-bit*)\n+      LD=\"${LD-ld} -32\"\n+      ;;\n+    *N32*)\n+      LD=\"${LD-ld} -n32\"\n+      ;;\n+    *64-bit*)\n+      LD=\"${LD-ld} -64\"\n+      ;;\n+    esac\n+  fi\n+  rm -rf conftest*\n+  ;;\n+\n+*-*-sco3.2v5*)\n+  # On SCO OpenServer 5, we need -belf to get full-featured binaries.\n+  SAVE_CFLAGS=\"$CFLAGS\"\n+  CFLAGS=\"$CFLAGS -belf\"\n+  AC_CACHE_CHECK([whether the C compiler needs -belf], lt_cv_cc_needs_belf,\n+    [AC_LANG_SAVE\n+     AC_LANG_C\n+     AC_TRY_LINK([],[],[lt_cv_cc_needs_belf=yes],[lt_cv_cc_needs_belf=no])\n+     AC_LANG_RESTORE])\n+  if test x\"$lt_cv_cc_needs_belf\" != x\"yes\"; then\n+    # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf\n+    CFLAGS=\"$SAVE_CFLAGS\"\n+  fi\n+  ;;\n+\n+ifdef([AC_PROVIDE_AC_LIBTOOL_WIN32_DLL],\n+[*-*-cygwin* | *-*-mingw*)\n+  AC_CHECK_TOOL(DLLTOOL, dlltool, false)\n+  AC_CHECK_TOOL(AS, as, false)\n+  AC_CHECK_TOOL(OBJDUMP, objdump, false)\n+\n+  # recent cygwin and mingw systems supply a stub DllMain which the user\n+  # can override, but on older systems we have to supply one\n+  AC_CACHE_CHECK([if libtool should supply DllMain function], lt_cv_need_dllmain,\n+    [AC_TRY_LINK([],\n+      [extern int __attribute__((__stdcall__)) DllMain(void*, int, void*);\n+      DllMain (0, 0, 0);],\n+      [lt_cv_need_dllmain=no],[lt_cv_need_dllmain=yes])])\n+\n+  case \"$host/$CC\" in\n+  *-*-cygwin*/gcc*-mno-cygwin*|*-*-mingw*)\n+    # old mingw systems require \"-dll\" to link a DLL, while more recent ones\n+    # require \"-mdll\"\n+    SAVE_CFLAGS=\"$CFLAGS\"\n+    CFLAGS=\"$CFLAGS -mdll\"\n+    AC_CACHE_CHECK([how to link DLLs], lt_cv_cc_dll_switch,\n+      [AC_TRY_LINK([], [], [lt_cv_cc_dll_switch=-mdll],[lt_cv_cc_dll_switch=-dll])])\n+    CFLAGS=\"$SAVE_CFLAGS\" ;;\n+  *-*-cygwin*)\n+    # cygwin systems need to pass --dll to the linker, and not link\n+    # crt.o which will require a WinMain@16 definition.\n+    lt_cv_cc_dll_switch=\"-Wl,--dll -nostartfiles\" ;;\n+  esac\n+  ;;\n+  ])\n+esac\n+])\n+\n+# AC_LIBTOOL_DLOPEN - enable checks for dlopen support\n+AC_DEFUN(AC_LIBTOOL_DLOPEN, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])])\n+\n+# AC_LIBTOOL_WIN32_DLL - declare package support for building win32 dll's\n+AC_DEFUN(AC_LIBTOOL_WIN32_DLL, [AC_BEFORE([$0], [AC_LIBTOOL_SETUP])])\n+\n+# AC_ENABLE_SHARED - implement the --enable-shared flag\n+# Usage: AC_ENABLE_SHARED[(DEFAULT)]\n+#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n+#   `yes'.\n+AC_DEFUN(AC_ENABLE_SHARED, [dnl\n+define([AC_ENABLE_SHARED_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_ARG_ENABLE(shared,\n+changequote(<<, >>)dnl\n+<<  --enable-shared[=PKGS]  build shared libraries [default=>>AC_ENABLE_SHARED_DEFAULT],\n+changequote([, ])dnl\n+[p=${PACKAGE-default}\n+case \"$enableval\" in\n+yes) enable_shared=yes ;;\n+no) enable_shared=no ;;\n+*)\n+  enable_shared=no\n+  # Look at the argument we got.  We use all the common list separators.\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:,\"\n+  for pkg in $enableval; do\n+    if test \"X$pkg\" = \"X$p\"; then\n+      enable_shared=yes\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  ;;\n+esac],\n+enable_shared=AC_ENABLE_SHARED_DEFAULT)dnl\n+])\n+\n+# AC_DISABLE_SHARED - set the default shared flag to --disable-shared\n+AC_DEFUN(AC_DISABLE_SHARED, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_SHARED(no)])\n+\n+# AC_ENABLE_STATIC - implement the --enable-static flag\n+# Usage: AC_ENABLE_STATIC[(DEFAULT)]\n+#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n+#   `yes'.\n+AC_DEFUN(AC_ENABLE_STATIC, [dnl\n+define([AC_ENABLE_STATIC_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_ARG_ENABLE(static,\n+changequote(<<, >>)dnl\n+<<  --enable-static[=PKGS]  build static libraries [default=>>AC_ENABLE_STATIC_DEFAULT],\n+changequote([, ])dnl\n+[p=${PACKAGE-default}\n+case \"$enableval\" in\n+yes) enable_static=yes ;;\n+no) enable_static=no ;;\n+*)\n+  enable_static=no\n+  # Look at the argument we got.  We use all the common list separators.\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:,\"\n+  for pkg in $enableval; do\n+    if test \"X$pkg\" = \"X$p\"; then\n+      enable_static=yes\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  ;;\n+esac],\n+enable_static=AC_ENABLE_STATIC_DEFAULT)dnl\n+])\n+\n+# AC_DISABLE_STATIC - set the default static flag to --disable-static\n+AC_DEFUN(AC_DISABLE_STATIC, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_STATIC(no)])\n+\n+\n+# AC_ENABLE_FAST_INSTALL - implement the --enable-fast-install flag\n+# Usage: AC_ENABLE_FAST_INSTALL[(DEFAULT)]\n+#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n+#   `yes'.\n+AC_DEFUN(AC_ENABLE_FAST_INSTALL, [dnl\n+define([AC_ENABLE_FAST_INSTALL_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_ARG_ENABLE(fast-install,\n+changequote(<<, >>)dnl\n+<<  --enable-fast-install[=PKGS]  optimize for fast installation [default=>>AC_ENABLE_FAST_INSTALL_DEFAULT],\n+changequote([, ])dnl\n+[p=${PACKAGE-default}\n+case \"$enableval\" in\n+yes) enable_fast_install=yes ;;\n+no) enable_fast_install=no ;;\n+*)\n+  enable_fast_install=no\n+  # Look at the argument we got.  We use all the common list separators.\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:,\"\n+  for pkg in $enableval; do\n+    if test \"X$pkg\" = \"X$p\"; then\n+      enable_fast_install=yes\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  ;;\n+esac],\n+enable_fast_install=AC_ENABLE_FAST_INSTALL_DEFAULT)dnl\n+])\n+\n+# AC_DISABLE_FAST_INSTALL - set the default to --disable-fast-install\n+AC_DEFUN(AC_DISABLE_FAST_INSTALL, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_FAST_INSTALL(no)])\n+\n+# AC_LIBTOOL_PICMODE - implement the --with-pic flag\n+# Usage: AC_LIBTOOL_PICMODE[(MODE)]\n+#   Where MODE is either `yes' or `no'.  If omitted, it defaults to\n+#   `both'.\n+AC_DEFUN(AC_LIBTOOL_PICMODE, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+pic_mode=ifelse($#,1,$1,default)])\n+\n+\n+# AC_PATH_TOOL_PREFIX - find a file program which can recognise shared library\n+AC_DEFUN(AC_PATH_TOOL_PREFIX,\n+[AC_MSG_CHECKING([for $1])\n+AC_CACHE_VAL(lt_cv_path_MAGIC,\n+[case \"$MAGIC\" in\n+  /*)\n+  lt_cv_path_MAGIC=\"$MAGIC\" # Let the user override the test with a path.\n+  ;;\n+  ?:/*)\n+  ac_cv_path_MAGIC=\"$MAGIC\" # Let the user override the test with a dos path.\n+  ;;\n+  *)\n+  ac_save_MAGIC=\"$MAGIC\"\n+  IFS=\"${IFS=   }\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+dnl $ac_dummy forces splitting on constant user-supplied paths.\n+dnl POSIX.2 word splitting is done only on the output of word expansions,\n+dnl not every word.  This closes a longstanding sh security hole.\n+  ac_dummy=\"ifelse([$2], , $PATH, [$2])\"\n+  for ac_dir in $ac_dummy; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$1; then\n+      lt_cv_path_MAGIC=\"$ac_dir/$1\"\n+      if test -n \"$file_magic_test_file\"; then\n+\tcase \"$deplibs_check_method\" in\n+\t\"file_magic \"*)\n+\t  file_magic_regex=\"`expr \\\"$deplibs_check_method\\\" : \\\"file_magic \\(.*\\)\\\"`\"\n+\t  MAGIC=\"$lt_cv_path_MAGIC\"\n+\t  if eval $file_magic_cmd \\$file_magic_test_file 2> /dev/null |\n+\t    egrep \"$file_magic_regex\" > /dev/null; then\n+\t    :\n+\t  else\n+\t    cat <<EOF 1>&2\n+\n+*** Warning: the command libtool uses to detect shared libraries,\n+*** $file_magic_cmd, produces output that libtool cannot recognize.\n+*** The result is that libtool may fail to recognize shared libraries\n+*** as such.  This will affect the creation of libtool libraries that\n+*** depend on shared libraries, but programs linked with such libtool\n+*** libraries will work regardless of this problem.  Nevertheless, you\n+*** may want to report the problem to your system manager and/or to\n+*** bug-libtool@gnu.org\n+\n+EOF\n+\t  fi ;;\n+\tesac\n+      fi\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  MAGIC=\"$ac_save_MAGIC\"\n+  ;;\n+esac])\n+MAGIC=\"$lt_cv_path_MAGIC\"\n+if test -n \"$MAGIC\"; then\n+  AC_MSG_RESULT($MAGIC)\n+else\n+  AC_MSG_RESULT(no)\n+fi\n+])\n+\n+\n+# AC_PATH_MAGIC - find a file program which can recognise a shared library\n+AC_DEFUN(AC_PATH_MAGIC,\n+[AC_REQUIRE([AC_CHECK_TOOL_PREFIX])dnl\n+AC_PATH_TOOL_PREFIX(${ac_tool_prefix}file, /usr/bin:$PATH)\n+if test -z \"$lt_cv_path_MAGIC\"; then\n+  if test -n \"$ac_tool_prefix\"; then\n+    AC_PATH_TOOL_PREFIX(file, /usr/bin:$PATH)\n+  else\n+    MAGIC=:\n+  fi\n+fi\n+])\n+\n+\n+# AC_PROG_LD - find the path to the GNU or non-GNU linker\n+AC_DEFUN(AC_PROG_LD,\n+[AC_ARG_WITH(gnu-ld,\n+[  --with-gnu-ld           assume the C compiler uses GNU ld [default=no]],\n+test \"$withval\" = no || with_gnu_ld=yes, with_gnu_ld=no)\n+AC_REQUIRE([AC_PROG_CC])dnl\n+AC_REQUIRE([AC_CANONICAL_HOST])dnl\n+AC_REQUIRE([AC_CANONICAL_BUILD])dnl\n+ac_prog=ld\n+if test \"$ac_cv_prog_gcc\" = yes; then\n+  # Check if gcc -print-prog-name=ld gives a path.\n+  AC_MSG_CHECKING([for ld used by GCC])\n+  case $host in\n+  *-*-mingw*)\n+    # gcc leaves a trailing carriage return which upsets mingw\n+    ac_prog=`($CC -print-prog-name=ld) 2>&5 | tr -d '\\015'` ;;\n+  *)\n+    ac_prog=`($CC -print-prog-name=ld) 2>&5` ;;\n+  esac\n+  case \"$ac_prog\" in\n+    # Accept absolute paths.\n+changequote(,)dnl\n+    [\\\\/]* | [A-Za-z]:[\\\\/]*)\n+      re_direlt='/[^/][^/]*/\\.\\./'\n+changequote([,])dnl\n+      # Canonicalize the path of ld\n+      ac_prog=`echo $ac_prog| sed 's%\\\\\\\\%/%g'`\n+      while echo $ac_prog | grep \"$re_direlt\" > /dev/null 2>&1; do\n+\tac_prog=`echo $ac_prog| sed \"s%$re_direlt%/%\"`\n+      done\n+      test -z \"$LD\" && LD=\"$ac_prog\"\n+      ;;\n+  \"\")\n+    # If it fails, then pretend we aren't using GCC.\n+    ac_prog=ld\n+    ;;\n+  *)\n+    # If it is relative, then search for the first ld in PATH.\n+    with_gnu_ld=unknown\n+    ;;\n+  esac\n+elif test \"$with_gnu_ld\" = yes; then\n+  AC_MSG_CHECKING([for GNU ld])\n+else\n+  AC_MSG_CHECKING([for non-GNU ld])\n+fi\n+AC_CACHE_VAL(ac_cv_path_LD,\n+[if test -z \"$LD\"; then\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n+  for ac_dir in $PATH; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f \"$ac_dir/$ac_prog\" || test -f \"$ac_dir/$ac_prog$ac_exeext\"; then\n+      ac_cv_path_LD=\"$ac_dir/$ac_prog\"\n+      # Check to see if the program is GNU ld.  I'd rather use --version,\n+      # but apparently some GNU ld's only accept -v.\n+      # Break only if it was the GNU/non-GNU ld that we prefer.\n+      if \"$ac_cv_path_LD\" -v 2>&1 < /dev/null | egrep '(GNU|with BFD)' > /dev/null; then\n+\ttest \"$with_gnu_ld\" != no && break\n+      else\n+\ttest \"$with_gnu_ld\" != yes && break\n+      fi\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+else\n+  ac_cv_path_LD=\"$LD\" # Let the user override the test with a path.\n+fi])\n+LD=\"$ac_cv_path_LD\"\n+if test -n \"$LD\"; then\n+  AC_MSG_RESULT($LD)\n+else\n+  AC_MSG_RESULT(no)\n+fi\n+test -z \"$LD\" && AC_MSG_ERROR([no acceptable ld found in \\$PATH])\n+AC_PROG_LD_GNU\n+])\n+\n+AC_DEFUN(AC_PROG_LD_GNU,\n+[AC_CACHE_CHECK([if the linker ($LD) is GNU ld], ac_cv_prog_gnu_ld,\n+[# I'd rather use --version here, but apparently some GNU ld's only accept -v.\n+if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then\n+  ac_cv_prog_gnu_ld=yes\n+else\n+  ac_cv_prog_gnu_ld=no\n+fi])\n+with_gnu_ld=$ac_cv_prog_gnu_ld\n+])\n+\n+# AC_PROG_LD_RELOAD_FLAG - find reload flag for linker\n+#   -- PORTME Some linkers may need a different reload flag.\n+AC_DEFUN(AC_PROG_LD_RELOAD_FLAG,\n+[AC_CACHE_CHECK([for $LD option to reload object files], lt_cv_ld_reload_flag,\n+[lt_cv_ld_reload_flag='-r'])\n+reload_flag=$lt_cv_ld_reload_flag\n+test -n \"$reload_flag\" && reload_flag=\" $reload_flag\"\n+])\n+\n+# AC_DEPLIBS_CHECK_METHOD - how to check for library dependencies\n+#  -- PORTME fill in with the dynamic library characteristics\n+AC_DEFUN(AC_DEPLIBS_CHECK_METHOD,\n+[AC_CACHE_CHECK([how to recognise dependant libraries],\n+lt_cv_deplibs_check_method,\n+[lt_cv_file_magic_cmd='${MAGIC}'\n+lt_cv_file_magic_test_file=\n+lt_cv_deplibs_check_method='unknown'\n+# Need to set the preceding variable on all platforms that support\n+# interlibrary dependencies.\n+# 'none' -- dependencies not supported.\n+# `unknown' -- same as none, but documents that we really don't know.\n+# 'pass_all' -- all dependencies passed with no checks.\n+# 'test_compile' -- check by making test program.\n+# 'file_magic [regex]' -- check by looking for files in library path\n+# which responds to the $file_magic_cmd with a given egrep regex.\n+# If you have `file' or equivalent on your system and you're not sure\n+# whether `pass_all' will *always* work, you probably want this one.\n+\n+case \"$host_os\" in\n+aix4*)\n+  lt_cv_deplibs_check_method=pass_all\n+  ;;\n+\n+beos*)\n+  lt_cv_deplibs_check_method=pass_all\n+  ;;\n+\n+bsdi4*)\n+  changequote(,)dnl\n+  lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (shared object|dynamic lib)'\n+  changequote([, ])dnl\n+  lt_cv_file_magic_cmd='/usr/bin/file -L'\n+  lt_cv_file_magic_test_file=/shlib/libc.so\n+  ;;\n+\n+cygwin* | mingw*)\n+  lt_cv_deplibs_check_method='file_magic file format pei*-i386(.*architecture: i386)?'\n+  lt_cv_file_magic_cmd='${OBJDUMP} -f'\n+  ;;\n+\n+freebsd* )\n+  if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then\n+    case \"$host_cpu\" in\n+    i*86 )\n+      changequote(,)dnl\n+      lt_cv_deplibs_check_method=='file_magic OpenBSD/i[3-9]86 demand paged shared library'\n+      changequote([, ])dnl\n+      lt_cv_file_magic_cmd=/usr/bin/file\n+      lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`\n+      ;;\n+    esac\n+  else\n+    lt_cv_deplibs_check_method=pass_all\n+  fi\n+  ;;\n+\n+gnu*)\n+  lt_cv_deplibs_check_method=pass_all\n+  ;;\n+\n+hpux10.20*)\n+  # TODO:  Does this work for hpux-11 too?\n+  lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|PA-RISC[0-9].[0-9]) shared library'\n+  lt_cv_file_magic_cmd=/usr/bin/file\n+  lt_cv_file_magic_test_file=/usr/lib/libc.sl\n+  ;;\n+\n+irix5* | irix6*)\n+  case \"$host_os\" in\n+  irix5*)\n+    # this will be overridden with pass_all, but let us keep it just in case\n+    lt_cv_deplibs_check_method=\"file_magic ELF 32-bit MSB dynamic lib MIPS - version 1\"\n+    ;;\n+  *)\n+    case \"$LD\" in\n+    *-32|*\"-32 \") libmagic=32-bit;;\n+    *-n32|*\"-n32 \") libmagic=N32;;\n+    *-64|*\"-64 \") libmagic=64-bit;;\n+    *) libmagic=never-match;;\n+    esac\n+    # this will be overridden with pass_all, but let us keep it just in case\n+    changequote(,)dnl\n+    lt_cv_deplibs_check_method=\"file_magic ELF ${libmagic} MSB mips-[1234] dynamic lib MIPS - version 1\"\n+    changequote([, ])dnl\n+    ;;\n+  esac\n+  lt_cv_file_magic_test_file=`echo /lib${libsuff}/libc.so*`\n+  lt_cv_deplibs_check_method=pass_all\n+  ;;\n+\n+# This must be Linux ELF.\n+linux-gnu*)\n+  case \"$host_cpu\" in\n+  alpha* | i*86 | powerpc* | sparc* | ia64* )\n+    lt_cv_deplibs_check_method=pass_all ;;\n+  *)\n+    # glibc up to 2.1.1 does not perform some relocations on ARM\n+    changequote(,)dnl\n+    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB (shared object|dynamic lib )' ;;\n+    changequote([, ])dnl\n+  esac\n+  lt_cv_file_magic_test_file=`echo /lib/libc.so* /lib/libc-*.so`\n+  ;;\n+\n+netbsd*)\n+  if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then :\n+  else\n+    changequote(,)dnl\n+    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB shared object'\n+    changequote([, ])dnl\n+    lt_cv_file_magic_cmd='/usr/bin/file -L'\n+    lt_cv_file_magic_test_file=`echo /usr/lib/libc.so*`\n+  fi\n+  ;;\n+\n+osf3* | osf4* | osf5*)\n+  # this will be overridden with pass_all, but let us keep it just in case\n+  lt_cv_deplibs_check_method='file_magic COFF format alpha shared library'\n+  lt_cv_file_magic_test_file=/shlib/libc.so\n+  lt_cv_deplibs_check_method=pass_all\n+  ;;\n+\n+sco3.2v5*)\n+  lt_cv_deplibs_check_method=pass_all\n+  ;;\n+\n+solaris*)\n+  lt_cv_deplibs_check_method=pass_all\n+  lt_cv_file_magic_test_file=/lib/libc.so\n+  ;;\n+\n+sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)\n+  case \"$host_vendor\" in\n+  ncr)\n+    lt_cv_deplibs_check_method=pass_all\n+    ;;\n+  motorola)\n+    changequote(,)dnl\n+    lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (shared object|dynamic lib) M[0-9][0-9]* Version [0-9]'\n+    changequote([, ])dnl\n+    lt_cv_file_magic_test_file=`echo /usr/lib/libc.so*`\n+    ;;\n+  esac\n+  ;;\n+esac\n+])\n+file_magic_cmd=$lt_cv_file_magic_cmd\n+deplibs_check_method=$lt_cv_deplibs_check_method\n+])\n+\n+\n+# AC_PROG_NM - find the path to a BSD-compatible name lister\n+AC_DEFUN(AC_PROG_NM,\n+[AC_MSG_CHECKING([for BSD-compatible nm])\n+AC_CACHE_VAL(ac_cv_path_NM,\n+[if test -n \"$NM\"; then\n+  # Let the user override the test.\n+  ac_cv_path_NM=\"$NM\"\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n+  for ac_dir in $PATH /usr/ccs/bin /usr/ucb /bin; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    tmp_nm=$ac_dir/${ac_tool_prefix}nm\n+    if test -f $tmp_nm || test -f $tmp_nm$ac_exeext ; then\n+      # Check to see if the nm accepts a BSD-compat flag.\n+      # Adding the `sed 1q' prevents false positives on HP-UX, which says:\n+      #   nm: unknown option \"B\" ignored\n+      if ($tmp_nm -B /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then\n+\tac_cv_path_NM=\"$tmp_nm -B\"\n+\tbreak\n+      elif ($tmp_nm -p /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then\n+\tac_cv_path_NM=\"$tmp_nm -p\"\n+\tbreak\n+      else\n+\tac_cv_path_NM=${ac_cv_path_NM=\"$tmp_nm\"} # keep the first match, but\n+\tcontinue # so that we can try to find one that supports BSD flags\n+      fi\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  test -z \"$ac_cv_path_NM\" && ac_cv_path_NM=nm\n+fi])\n+NM=\"$ac_cv_path_NM\"\n+AC_MSG_RESULT([$NM])\n+])\n+\n+# AC_CHECK_LIBM - check for math library\n+AC_DEFUN(AC_CHECK_LIBM,\n+[AC_REQUIRE([AC_CANONICAL_HOST])dnl\n+LIBM=\n+case \"$host\" in\n+*-*-beos* | *-*-cygwin*)\n+  # These system don't have libm\n+  ;;\n+*-ncr-sysv4.3*)\n+  AC_CHECK_LIB(mw, _mwvalidcheckl, LIBM=\"-lmw\")\n+  AC_CHECK_LIB(m, main, LIBM=\"$LIBM -lm\")\n+  ;;\n+*)\n+  AC_CHECK_LIB(m, main, LIBM=\"-lm\")\n+  ;;\n+esac\n+])\n+\n+# AC_LIBLTDL_CONVENIENCE[(dir)] - sets LIBLTDL to the link flags for\n+# the libltdl convenience library and INCLTDL to the include flags for\n+# the libltdl header and adds --enable-ltdl-convenience to the\n+# configure arguments.  Note that LIBLTDL and INCLTDL are not\n+# AC_SUBSTed, nor is AC_CONFIG_SUBDIRS called.  If DIR is not\n+# provided, it is assumed to be `libltdl'.  LIBLTDL will be prefixed\n+# with '${top_builddir}/' and INCLTDL will be prefixed with\n+# '${top_srcdir}/' (note the single quotes!).  If your package is not\n+# flat and you're not using automake, define top_builddir and\n+# top_srcdir appropriately in the Makefiles.\n+AC_DEFUN(AC_LIBLTDL_CONVENIENCE, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+  case \"$enable_ltdl_convenience\" in\n+  no) AC_MSG_ERROR([this package needs a convenience libltdl]) ;;\n+  \"\") enable_ltdl_convenience=yes\n+      ac_configure_args=\"$ac_configure_args --enable-ltdl-convenience\" ;;\n+  esac\n+  LIBLTDL='${top_builddir}/'ifelse($#,1,[$1],['libltdl'])/libltdlc.la\n+  INCLTDL='-I${top_srcdir}/'ifelse($#,1,[$1],['libltdl'])\n+])\n+\n+# AC_LIBLTDL_INSTALLABLE[(dir)] - sets LIBLTDL to the link flags for\n+# the libltdl installable library and INCLTDL to the include flags for\n+# the libltdl header and adds --enable-ltdl-install to the configure\n+# arguments.  Note that LIBLTDL and INCLTDL are not AC_SUBSTed, nor is\n+# AC_CONFIG_SUBDIRS called.  If DIR is not provided and an installed\n+# libltdl is not found, it is assumed to be `libltdl'.  LIBLTDL will\n+# be prefixed with '${top_builddir}/' and INCLTDL will be prefixed\n+# with '${top_srcdir}/' (note the single quotes!).  If your package is\n+# not flat and you're not using automake, define top_builddir and\n+# top_srcdir appropriately in the Makefiles.\n+# In the future, this macro may have to be called after AC_PROG_LIBTOOL.\n+AC_DEFUN(AC_LIBLTDL_INSTALLABLE, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+  AC_CHECK_LIB(ltdl, main,\n+  [test x\"$enable_ltdl_install\" != xyes && enable_ltdl_install=no],\n+  [if test x\"$enable_ltdl_install\" = xno; then\n+     AC_MSG_WARN([libltdl not installed, but installation disabled])\n+   else\n+     enable_ltdl_install=yes\n+   fi\n+  ])\n+  if test x\"$enable_ltdl_install\" = x\"yes\"; then\n+    ac_configure_args=\"$ac_configure_args --enable-ltdl-install\"\n+    LIBLTDL='${top_builddir}/'ifelse($#,1,[$1],['libltdl'])/libltdl.la\n+    INCLTDL='-I${top_srcdir}/'ifelse($#,1,[$1],['libltdl'])\n+  else\n+    ac_configure_args=\"$ac_configure_args --enable-ltdl-install=no\"\n+    LIBLTDL=\"-lltdl\"\n+    INCLTDL=\n+  fi\n+])\n+\n+# If this macro is not defined by Autoconf, define it here.\n+ifdef([AC_PROVIDE_IFELSE],\n+      [],\n+      [define([AC_PROVIDE_IFELSE],\n+              [ifdef([AC_PROVIDE_$1],\n+                     [$2], [$3])])])\n+\n+# AC_LIBTOOL_CXX - enable support for C++ libraries\n+AC_DEFUN(AC_LIBTOOL_CXX,[AC_REQUIRE([_AC_LIBTOOL_CXX])])\n+AC_DEFUN(_AC_LIBTOOL_CXX,\n+[AC_REQUIRE([AC_PROG_LIBTOOL])\n+AC_REQUIRE([AC_PROG_CXX])\n+AC_REQUIRE([AC_PROG_CXXCPP])\n+LIBTOOL_DEPS=$LIBTOOL_DEPS\" $ac_aux_dir/ltcf-cxx.sh\"\n+lt_save_CC=\"$CC\"\n+lt_save_CFLAGS=\"$CFLAGS\"\n+dnl Make sure LTCC is set to the C compiler, i.e. set LTCC before CC\n+dnl is set to the C++ compiler.\n+AR=\"$AR\" LTCC=\"$CC\" CC=\"$CXX\" CXX=\"$CXX\" CFLAGS=\"$CXXFLAGS\" CPPFLAGS=\"$CPPFLAGS\" \\\n+MAGIC=\"$MAGIC\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n+LN_S=\"$LN_S\" NM=\"$NM\" RANLIB=\"$RANLIB\" STRIP=\"$STRIP\" \\\n+AS=\"$AS\" DLLTOOL=\"$DLLTOOL\" OBJDUMP=\"$OBJDUMP\" \\\n+objext=\"$OBJEXT\" exeext=\"$EXEEXT\" reload_flag=\"$reload_flag\" \\\n+deplibs_check_method=\"$deplibs_check_method\" \\\n+file_magic_cmd=\"$file_magic_cmd\" \\\n+${CONFIG_SHELL-/bin/sh} $ac_aux_dir/ltconfig -o libtool $libtool_flags \\\n+--build=\"$build\" --add-tag=CXX $ac_aux_dir/ltcf-cxx.sh $host \\\n+|| AC_MSG_ERROR([libtool tag configuration failed])\n+CC=\"$lt_save_CC\"\n+CFLAGS=\"$lt_save_CFLAGS\"\n+\n+# Redirect the config.log output again, so that the ltconfig log is not\n+# clobbered by the next message.\n+exec 5>>./config.log\n+])\n+\n+# AC_LIBTOOL_GCJ - enable support for GCJ libraries\n+AC_DEFUN(AC_LIBTOOL_GCJ,[AC_REQUIRE([_AC_LIBTOOL_GCJ])])\n+AC_DEFUN(_AC_LIBTOOL_GCJ,\n+[AC_REQUIRE([AC_PROG_LIBTOOL])\n+AC_PROVIDE_IFELSE([AC_PROG_GCJ],[],\n+  [AC_PROVIDE_IFELSE([A][M_PROG_GCJ],[],\n+    [ifdef([AC_PROG_GCJ],[AC_REQUIRE([AC_PROG_GCJ])],\n+       [ifdef([A][M_PROG_GCJ],[AC_REQUIRE([A][M_PROG_GCJ])],\n+         [AC_REQUIRE([A][C_PROG_GCJ_OR_A][M_PROG_GCJ])])])])])\n+LIBTOOL_DEPS=$LIBTOOL_DEPS\" $ac_aux_dir/ltcf-gcj.sh\"\n+lt_save_CC=\"$CC\"\n+lt_save_CFLAGS=\"$CFLAGS\"\n+dnl Make sure LTCC is set to the C compiler, i.e. set LTCC before CC\n+dnl is set to the C++ compiler.\n+AR=\"$AR\" LTCC=\"$CC\" CC=\"$GCJ\" CFLAGS=\"$GCJFLAGS\" CPPFLAGS=\"\" \\\n+MAGIC=\"$MAGIC\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n+LN_S=\"$LN_S\" NM=\"$NM\" RANLIB=\"$RANLIB\" STRIP=\"$STRIP\" \\\n+AS=\"$AS\" DLLTOOL=\"$DLLTOOL\" OBJDUMP=\"$OBJDUMP\" \\\n+objext=\"$OBJEXT\" exeext=\"$EXEEXT\" reload_flag=\"$reload_flag\" \\\n+deplibs_check_method=\"$deplibs_check_method\" \\\n+file_magic_cmd=\"$file_magic_cmd\" \\\n+${CONFIG_SHELL-/bin/sh} $ac_aux_dir/ltconfig -o libtool $libtool_flags \\\n+--build=\"$build\" --add-tag=GCJ $ac_aux_dir/ltcf-gcj.sh $host \\\n+|| AC_MSG_ERROR([libtool tag configuration failed])\n+CC=\"$lt_save_CC\"\n+CFLAGS=\"$lt_save_CFLAGS\"\n+\n+# Redirect the config.log output again, so that the ltconfig log is not\n+# clobbered by the next message.\n+exec 5>>./config.log\n+])\n+\n+dnl old names\n+AC_DEFUN(AM_PROG_LIBTOOL, [indir([AC_PROG_LIBTOOL])])dnl\n+AC_DEFUN(AM_ENABLE_SHARED, [indir([AC_ENABLE_SHARED], $@)])dnl\n+AC_DEFUN(AM_ENABLE_STATIC, [indir([AC_ENABLE_STATIC], $@)])dnl\n+AC_DEFUN(AM_DISABLE_SHARED, [indir([AC_DISABLE_SHARED], $@)])dnl\n+AC_DEFUN(AM_DISABLE_STATIC, [indir([AC_DISABLE_STATIC], $@)])dnl\n+AC_DEFUN(AM_PROG_LD, [indir([AC_PROG_LD])])dnl\n+AC_DEFUN(AM_PROG_NM, [indir([AC_PROG_NM])])dnl\n+\n+dnl This is just to silence aclocal about the macro not being used\n+ifelse([AC_DISABLE_FAST_INSTALL])dnl"}, {"sha": "ba1f70e84bb8bc357876b25eed6776611405ed51", "filename": "ltcf-c.sh", "status": "added", "additions": 688, "deletions": 0, "changes": 688, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ltcf-c.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ltcf-c.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ltcf-c.sh?ref=4f4caf92a3c88fe811269a03a0b0793bdb02f919", "patch": "@@ -0,0 +1,688 @@\n+#### This script is meant to be sourced by ltconfig.\n+\n+# $Id: ltcf-c.sh,v 1.1.2.9 2000/07/24 05:28:14 oliva Exp $\n+\n+# ltcf-c.sh - Create a C compiler specific configuration\n+#\n+# Copyright (C) 1996-2000 Free Software Foundation, Inc.\n+# Originally by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996\n+#\n+# This file is free software; you can redistribute it and/or modify it\n+# under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful, but\n+# WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+# General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.\n+#\n+# As a special exception to the GNU General Public License, if you\n+# distribute this file as part of a program that contains a\n+# configuration script generated by Autoconf, you may include it under\n+# the same distribution terms that you use for the rest of that program.\n+\n+\n+# Source file extension for C test sources.\n+ac_ext=c\n+\n+# Object file extension for compiled C test sources.\n+objext=o\n+\n+# Code to be used in simple compile tests\n+lt_simple_compile_test_code=\"int some_variable = 0;\"\n+\n+# Code to be used in simple link tests\n+lt_simple_link_test_code='main(){return(0);}'\n+\n+## Linker Characteristics\n+case \"$host_os\" in\n+cygwin* | mingw*)\n+  # FIXME: the MSVC++ port hasn't been tested in a loooong time\n+  # When not using gcc, we currently assume that we are using\n+  # Microsoft Visual C++.\n+  if test \"$with_gcc\" != yes; then\n+    with_gnu_ld=no\n+  fi\n+  ;;\n+\n+esac\n+\n+ld_shlibs=yes\n+if test \"$with_gnu_ld\" = yes; then\n+  # If archive_cmds runs LD, not CC, wlarc should be empty\n+  wlarc='${wl}'\n+\n+  # See if GNU ld supports shared libraries.\n+  case \"$host_os\" in\n+  aix3* | aix4*)\n+    # On AIX, the GNU linker is very broken\n+    ld_shlibs=no\n+    cat <<EOF 1>&2\n+\n+*** Warning: the GNU linker, at least up to release 2.9.1, is reported\n+*** to be unable to reliably create shared libraries on AIX.\n+*** Therefore, libtool is disabling shared libraries support.  If you\n+*** really care for shared libraries, you may want to modify your PATH\n+*** so that a non-GNU linker is found, and then restart.\n+\n+EOF\n+    ;;\n+\n+  amigaos*)\n+    archive_cmds='$rm $output_objdir/a2ixlibrary.data~$echo \"#define NAME $libname\" > $output_objdir/a2ixlibrary.data~$echo \"#define LIBRARY_ID 1\" >> $output_objdir/a2ixlibrary.data~$echo \"#define VERSION $major\" >> $output_objdir/a2ixlibrary.data~$echo \"#define REVISION $revision\" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_minus_L=yes\n+\n+    # Samuel A. Falvo II <kc5tja@dolphin.openprojects.net> reports\n+    # that the semantics of dynamic libraries on AmigaOS, at least up\n+    # to version 4, is to share data among multiple programs linked\n+    # with the same dynamic library.  Since this doesn't match the\n+    # behavior of shared libraries on other platforms, we can use\n+    # them.\n+    ld_shlibs=no\n+    ;;\n+\n+  beos*)\n+    if $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then\n+      allow_undefined_flag=unsupported\n+      # Joseph Beckenbach <jrb3@best.com> says some releases of gcc\n+      # support --undefined.  This deserves some investigation.  FIXME\n+      archive_cmds='$CC -nostart $libobjs $deplibs $linker_flags ${wl}-soname $wl$soname -o $lib'\n+    else\n+      ld_shlibs=no\n+    fi\n+    ;;\n+\n+  cygwin* | mingw*)\n+    # hardcode_libdir_flag_spec is actually meaningless, as there is\n+    # no search path for DLLs.\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    allow_undefined_flag=unsupported\n+    always_export_symbols=yes\n+\n+    extract_expsyms_cmds='test -f $output_objdir/impgen.c || \\\n+      sed -e \"/^# \\/\\* impgen\\.c starts here \\*\\//,/^# \\/\\* impgen.c ends here \\*\\// { s/^# //; p; }\" -e d < $0 > $output_objdir/impgen.c~\n+      test -f $output_objdir/impgen.exe || (cd $output_objdir && \\\n+      if test \"x$HOST_CC\" != \"x\" ; then $HOST_CC -o impgen impgen.c ; \\\n+      else $CC -o impgen impgen.c ; fi)~\n+      $output_objdir/impgen $dir/$soname > $output_objdir/$soname-def'\n+\n+    old_archive_from_expsyms_cmds='$DLLTOOL --as=$AS --dllname $soname --def $output_objdir/$soname-def --output-lib $output_objdir/$newlib'\n+\n+    # cygwin and mingw dlls have different entry points and sets of symbols\n+    # to exclude.\n+    # FIXME: what about values for MSVC?\n+    dll_entry=__cygwin_dll_entry@12\n+    dll_exclude_symbols=DllMain@12,_cygwin_dll_entry@12,_cygwin_noncygwin_dll_entry@12~\n+    case \"$host_os\" in\n+    mingw*)\n+      # mingw values\n+      dll_entry=_DllMainCRTStartup@12\n+      dll_exclude_symbols=DllMain@12,DllMainCRTStartup@12,DllEntryPoint@12~\n+      ;;\n+    esac\n+\n+    # mingw and cygwin differ, and it's simplest to just exclude the union\n+    # of the two symbol sets.\n+    dll_exclude_symbols=DllMain@12,_cygwin_dll_entry@12,_cygwin_noncygwin_dll_entry@12,DllMainCRTStartup@12,DllEntryPoint@12\n+\n+    # recent cygwin and mingw systems supply a stub DllMain which the user\n+    # can override, but on older systems we have to supply one (in ltdll.c)\n+    if test \"x$lt_cv_need_dllmain\" = \"xyes\"; then\n+      ltdll_obj='$output_objdir/$soname-ltdll.'\"$objext \"\n+      ltdll_cmds='test -f $output_objdir/$soname-ltdll.c || sed -e \"/^# \\/\\* ltdll\\.c starts here \\*\\//,/^# \\/\\* ltdll.c ends here \\*\\// { s/^# //; p; }\" -e d < $0 > $output_objdir/$soname-ltdll.c~\n+\ttest -f $output_objdir/$soname-ltdll.$objext || (cd $output_objdir && $CC -c $soname-ltdll.c)~'\n+    else\n+      ltdll_obj=\n+      ltdll_cmds=\n+    fi\n+\n+    # Extract the symbol export list from an `--export-all' def file,\n+    # then regenerate the def file from the symbol export list, so that\n+    # the compiled dll only exports the symbol export list.\n+    # Be careful not to strip the DATA tag left be newer dlltools.\n+    export_symbols_cmds=\"$ltdll_cmds\"'\n+      $DLLTOOL --export-all --exclude-symbols '$dll_exclude_symbols' --output-def $output_objdir/$soname-def '$ltdll_obj'$libobjs $convenience~\n+      sed -e \"1,/EXPORTS/d\" -e \"s/ @ [0-9]*//\" -e \"s/ *;.*$//\" < $output_objdir/$soname-def > $export_symbols'\n+\n+    # If DATA tags from a recent dlltool are present, honour them!\n+    archive_expsym_cmds='echo EXPORTS > $output_objdir/$soname-def~\n+      _lt_hint=1;\n+      cat $export_symbols | while read symbol; do\n+\tset dummy \\$symbol;\n+\tcase \\$# in\n+\t  2) echo \"\t\\$2 @ \\$_lt_hint ; \" >> $output_objdir/$soname-def;;\n+\t  *) echo \"     \\$2 @ \\$_lt_hint \\$3 ; \" >> $output_objdir/$soname-def;;\n+\tesac;\n+\t_lt_hint=`expr 1 + \\$_lt_hint`;\n+      done~\n+      '\"$ltdll_cmds\"'\n+      $CC -Wl,--base-file,$output_objdir/$soname-base '$lt_cv_cc_dll_switch' -Wl,-e,'$dll_entry' -o $lib '$ltdll_obj'$libobjs $deplibs $compiler_flags~\n+      $DLLTOOL --as=$AS --dllname $soname --exclude-symbols '$dll_exclude_symbols' --def $output_objdir/$soname-def --base-file $output_objdir/$soname-base --output-exp $output_objdir/$soname-exp~\n+      $CC -Wl,--base-file,$output_objdir/$soname-base $output_objdir/$soname-exp '$lt_cv_cc_dll_switch' -Wl,-e,'$dll_entry' -o $lib '$ltdll_obj'$libobjs $deplibs $compiler_flags~\n+      $DLLTOOL --as=$AS --dllname $soname --exclude-symbols '$dll_exclude_symbols' --def $output_objdir/$soname-def --base-file $output_objdir/$soname-base --output-exp $output_objdir/$soname-exp~\n+      $CC $output_objdir/$soname-exp '$lt_cv_cc_dll_switch' -Wl,-e,'$dll_entry' -o $lib '$ltdll_obj'$libobjs $deplibs $compiler_flags'\n+    ;;\n+\n+  netbsd*)\n+    if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then\n+      archive_cmds='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'\n+      wlarc=\n+    else\n+      archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'\n+      archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'\n+    fi\n+    ;;\n+\n+  solaris* | sysv5*)\n+    if $LD -v 2>&1 | egrep 'BFD 2\\.8' > /dev/null; then\n+      ld_shlibs=no\n+      cat <<EOF 1>&2\n+\n+*** Warning: The releases 2.8.* of the GNU linker cannot reliably\n+*** create shared libraries on Solaris systems.  Therefore, libtool\n+*** is disabling shared libraries support.  We urge you to upgrade GNU\n+*** binutils to release 2.9.1 or newer.  Another option is to modify\n+*** your PATH or compiler configuration so that the native linker is\n+*** used, and then restart.\n+\n+EOF\n+    elif $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then\n+      archive_cmds='$CC -shared $libobjs $deplibs $linker_flags ${wl}-soname $wl$soname -o $lib'\n+      archive_expsym_cmds='$CC -shared $libobjs $deplibs $linker_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'\n+    else\n+      ld_shlibs=no\n+    fi\n+    ;;\n+\n+  sunos4*)\n+    archive_cmds='$LD -assert pure-text -Bshareable -o $lib $libobjs $deplibs $linker_flags'\n+    wlarc=\n+    hardcode_direct=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  *)\n+    if $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then\n+      archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'\n+      archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'\n+    else\n+      ld_shlibs=no\n+    fi\n+    ;;\n+  esac\n+\n+  if test \"$ld_shlibs\" = yes; then\n+    runpath_var=LD_RUN_PATH\n+    hardcode_libdir_flag_spec=\"$wlarc\"'--rpath '\"$wlarc\"'$libdir'\n+    export_dynamic_flag_spec=\"$wlarc\"'--export-dynamic'\n+    case $host_os in\n+    cygwin* | mingw*)\n+      # dlltool doesn't understand --whole-archive et. al.\n+      whole_archive_flag_spec=\n+      ;;\n+    *)\n+      # ancient GNU ld didn't support --whole-archive et. al.\n+      if $LD --help 2>&1 | egrep 'no-whole-archive' > /dev/null; then\n+\twhole_archive_flag_spec=\"$wlarc\"'--whole-archive$convenience '\"$wlarc\"'--no-whole-archive'\n+      else\n+\twhole_archive_flag_spec=\n+      fi\n+      ;;\n+    esac\n+  fi\n+else\n+  # PORTME fill in a description of your system's linker (not GNU ld)\n+  case \"$host_os\" in\n+  aix3*)\n+    allow_undefined_flag=unsupported\n+    always_export_symbols=yes\n+    archive_expsym_cmds='$LD -o $output_objdir/$soname $libobjs $deplibs $linker_flags -bE:$export_symbols -T512 -H512 -bM:SRE~$AR $AR_FLAGS $lib $output_objdir/$soname'\n+    # Note: this linker hardcodes the directories in LIBPATH if there\n+    # are no directories specified by -L.\n+    hardcode_minus_L=yes\n+    if test \"$with_gcc\" = yes && test -z \"$link_static_flag\"; then\n+      # Neither direct hardcoding nor static linking is supported with a\n+      # broken collect2.\n+      hardcode_direct=unsupported\n+    fi\n+    ;;\n+\n+  aix4*)\n+    hardcode_libdir_flag_spec='${wl}-b ${wl}nolibpath ${wl}-b ${wl}libpath:$libdir:/usr/lib:/lib'\n+    hardcode_libdir_separator=':'\n+    if test \"$with_gcc\" = yes; then\n+      collect2name=`${CC} -print-prog-name=collect2`\n+      if test -f \"$collect2name\" && \\\n+\t strings \"$collect2name\" | grep resolve_lib_name >/dev/null\n+      then\n+\t# We have reworked collect2\n+\thardcode_direct=yes\n+      else\n+\t# We have old collect2\n+\thardcode_direct=unsupported\n+\t# It fails to find uninstalled libraries when the uninstalled\n+\t# path is not listed in the libpath.  Setting hardcode_minus_L\n+\t# to unsupported forces relinking\n+\thardcode_minus_L=yes\n+\thardcode_libdir_flag_spec='-L$libdir'\n+\thardcode_libdir_separator=\n+      fi\n+      shared_flag='-shared'\n+    else\n+      shared_flag='${wl}-bM:SRE'\n+      hardcode_direct=yes\n+    fi\n+    allow_undefined_flag=' ${wl}-berok'\n+    archive_cmds=\"\\$CC $shared_flag\"' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}-bexpall ${wl}-bnoentry${allow_undefined_flag}'\n+    archive_expsym_cmds=\"\\$CC $shared_flag\"' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}-bE:$export_symbols ${wl}-bnoentry${allow_undefined_flag}'\n+    case \"$host_os\" in aix4.[01]|aix4.[01].*)\n+      # According to Greg Wooledge, -bexpall is only supported from AIX 4.2 on\n+      always_export_symbols=yes ;;\n+    esac\n+   ;;\n+\n+  amigaos*)\n+    archive_cmds='$rm $output_objdir/a2ixlibrary.data~$echo \"#define NAME $libname\" > $output_objdir/a2ixlibrary.data~$echo \"#define LIBRARY_ID 1\" >> $output_objdir/a2ixlibrary.data~$echo \"#define VERSION $major\" >> $output_objdir/a2ixlibrary.data~$echo \"#define REVISION $revision\" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_minus_L=yes\n+    # see comment about different semantics on the GNU ld section\n+    ld_shlibs=no\n+    ;;\n+\n+  cygwin* | mingw*)\n+    # When not using gcc, we currently assume that we are using\n+    # Microsoft Visual C++.\n+    # hardcode_libdir_flag_spec is actually meaningless, as there is\n+    # no search path for DLLs.\n+    hardcode_libdir_flag_spec=' '\n+    allow_undefined_flag=unsupported\n+    # Tell ltmain to make .lib files, not .a files.\n+    libext=lib\n+    # FIXME: Setting linknames here is a bad hack.\n+    archive_cmds='$CC -o $lib $libobjs $compiler_flags `echo \"$deplibs\" | sed -e '\\''s/ -lc$//'\\''` -link -dll~linknames='\n+    # The linker will automatically build a .lib file if we build a DLL.\n+    old_archive_from_new_cmds='true'\n+    # FIXME: Should let the user specify the lib program.\n+    old_archive_cmds='lib /OUT:$oldlib$oldobjs$old_deplibs'\n+    fix_srcfile_path='`cygpath -w $srcfile`'\n+    ;;\n+\n+  freebsd1*)\n+    ld_shlibs=no\n+    ;;\n+\n+  # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor\n+  # support.  Future versions do this automatically, but an explicit c++rt0.o\n+  # does not break anything, and helps significantly (at the cost of a little\n+  # extra space).\n+  freebsd2.2*)\n+    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags /usr/lib/c++rt0.o'\n+    hardcode_libdir_flag_spec='-R$libdir'\n+    hardcode_direct=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  # Unfortunately, older versions of FreeBSD 2 do not have this feature.\n+  freebsd2*)\n+    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_direct=yes\n+    hardcode_minus_L=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  # FreeBSD 3 and greater uses gcc -shared to do shared libraries.\n+  freebsd*)\n+    archive_cmds='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'\n+    hardcode_libdir_flag_spec='-R$libdir'\n+    hardcode_direct=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  hpux9* | hpux10* | hpux11*)\n+    case \"$host_os\" in\n+    hpux9*) archive_cmds='$rm $output_objdir/$soname~$LD -b +b $install_libdir -o $output_objdir/$soname $libobjs $deplibs $linker_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib' ;;\n+    *) archive_cmds='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags' ;;\n+    esac\n+    hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'\n+    hardcode_libdir_separator=:\n+    hardcode_direct=yes\n+    hardcode_minus_L=yes # Not in the search PATH, but as the default\n+\t\t\t # location of the library.\n+    export_dynamic_flag_spec='${wl}-E'\n+    ;;\n+\n+  irix5* | irix6*)\n+    if test \"$with_gcc\" = yes; then\n+      archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n \"$verstring\" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'\n+    else\n+      archive_cmds='$LD -shared $libobjs $deplibs $linker_flags -soname $soname `test -n \"$verstring\" && echo -set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'\n+    fi\n+    hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+    hardcode_libdir_separator=:\n+    link_all_deplibs=yes\n+    ;;\n+\n+  netbsd*)\n+    if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then\n+      archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out\n+    else\n+      archive_cmds='$LD -shared -o $lib $libobjs $deplibs $linker_flags'      # ELF\n+    fi\n+    hardcode_libdir_flag_spec='${wl}-R$libdir'\n+    hardcode_direct=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  openbsd*)\n+    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_libdir_flag_spec='-R$libdir'\n+    hardcode_direct=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  os2*)\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_minus_L=yes\n+    allow_undefined_flag=unsupported\n+    archive_cmds='$echo \"LIBRARY $libname INITINSTANCE\" > $output_objdir/$libname.def~$echo \"DESCRIPTION \\\"$libname\\\"\" >> $output_objdir/$libname.def~$echo DATA >> $output_objdir/$libname.def~$echo \" SINGLE NONSHARED\" >> $output_objdir/$libname.def~$echo EXPORTS >> $output_objdir/$libname.def~emxexp $libobjs >> $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $compiler_flags $output_objdir/$libname.def'\n+    old_archive_from_new_cmds='emximp -o $output_objdir/$libname.a $output_objdir/$libname.def'\n+    ;;\n+\n+  osf3*)\n+    if test \"$with_gcc\" = yes; then\n+      allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\\*'\n+      archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n \"$verstring\" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'\n+    else\n+      allow_undefined_flag=' -expect_unresolved \\*'\n+      archive_cmds='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -soname $soname `test -n \"$verstring\" && echo -set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'\n+    fi\n+    hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+    hardcode_libdir_separator=:\n+    ;;\n+\n+  osf4* | osf5*)\t# as osf3* with the addition of -msym flag\n+    if test \"$with_gcc\" = yes; then\n+      allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\\*'\n+      archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n \"$verstring\" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'\n+    else\n+      allow_undefined_flag=' -expect_unresolved \\*'\n+      archive_cmds='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -msym -soname $soname `test -n \"$verstring\" && echo -set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'\n+    fi\n+    hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+    hardcode_libdir_separator=:\n+    ;;\n+\n+  sco3.2v5*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_shlibpath_var=no\n+    runpath_var=LD_RUN_PATH\n+    hardcode_runpath_var=yes\n+    ;;\n+\n+  solaris*)\n+    no_undefined_flag=' -z text'\n+    # $CC -shared without GNU ld will not create a library from C++\n+    # object files and a static libstdc++, better avoid it by now\n+    archive_cmds='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    archive_expsym_cmds='$echo \"{ global:\" > $lib.exp~cat $export_symbols | sed -e \"s/\\(.*\\)/\\1;/\" >> $lib.exp~$echo \"local: *; };\" >> $lib.exp~\n+\t\t$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'\n+    hardcode_libdir_flag_spec='-R$libdir'\n+    hardcode_shlibpath_var=no\n+    case \"$host_os\" in\n+    solaris2.[0-5] | solaris2.[0-5].*) ;;\n+    *) # Supported since Solaris 2.6 (maybe 2.5.1?)\n+      whole_archive_flag_spec='-z allextract$convenience -z defaultextract' ;;\n+    esac\n+    link_all_deplibs=yes\n+    ;;\n+\n+  sunos4*)\n+    archive_cmds='$LD -assert pure-text -Bstatic -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_direct=yes\n+    hardcode_minus_L=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  sysv4)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    runpath_var='LD_RUN_PATH'\n+    hardcode_shlibpath_var=no\n+    hardcode_direct=no #Motorola manual says yes, but my tests say they lie\n+    ;;\n+\n+  sysv4.3*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_shlibpath_var=no\n+    export_dynamic_flag_spec='-Bexport'\n+    ;;\n+\n+  sysv5*)\n+    no_undefined_flag=' -z text'\n+    # $CC -shared without GNU ld will not create a library from C++\n+    # object files and a static libstdc++, better avoid it by now\n+    archive_cmds='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    archive_expsym_cmds='$echo \"{ global:\" > $lib.exp~cat $export_symbols | sed -e \"s/\\(.*\\)/\\1;/\" >> $lib.exp~$echo \"local: *; };\" >> $lib.exp~\n+\t\t$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'\n+    hardcode_libdir_flag_spec=\n+    hardcode_shlibpath_var=no\n+    runpath_var='LD_RUN_PATH'\n+    ;;\n+\n+  uts4*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  dgux*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  sysv4*MP*)\n+    if test -d /usr/nec; then\n+      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+      hardcode_shlibpath_var=no\n+      runpath_var=LD_RUN_PATH\n+      hardcode_runpath_var=yes\n+      ld_shlibs=yes\n+    fi\n+    ;;\n+\n+  sysv4.2uw2*)\n+    archive_cmds='$LD -G -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_direct=yes\n+    hardcode_minus_L=no\n+    hardcode_shlibpath_var=no\n+    hardcode_runpath_var=yes\n+    runpath_var=LD_RUN_PATH\n+    ;;\n+\n+  unixware7*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    runpath_var='LD_RUN_PATH'\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  *)\n+    ld_shlibs=no\n+    ;;\n+  esac\n+fi\n+\n+## Compiler Characteristics: PIC flags, static flags, etc\n+if test \"X${ac_cv_prog_cc_pic+set}\" = Xset; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  ac_cv_prog_cc_pic=\n+  ac_cv_prog_cc_shlib=\n+  ac_cv_prog_cc_wl=\n+  ac_cv_prog_cc_static=\n+  ac_cv_prog_cc_no_builtin=\n+  ac_cv_prog_cc_can_build_shared=$can_build_shared\n+\n+  if test \"$with_gcc\" = yes; then\n+    ac_cv_prog_cc_wl='-Wl,'\n+    ac_cv_prog_cc_static='-static'\n+\n+    case \"$host_os\" in\n+    beos* | irix5* | irix6* | osf3* | osf4* | osf5*)\n+      # PIC is the default for these OSes.\n+      ;;\n+    aix*)\n+      # Below there is a dirty hack to force normal static linking with -ldl\n+      # The problem is because libdl dynamically linked with both libc and\n+      # libC (AIX C++ library), which obviously doesn't included in libraries\n+      # list by gcc. This cause undefined symbols with -static flags.\n+      # This hack allows C programs to be linked with \"-static -ldl\", but\n+      # we not sure about C++ programs.\n+      ac_cv_prog_cc_static=\"$ac_cv_prog_cc_static ${ac_cv_prog_cc_wl}-lC\"\n+      ;;\n+    cygwin* | mingw* | os2*)\n+      # This hack is so that the source file can tell whether it is being\n+      # built for inclusion in a dll (and should export symbols for example).\n+      ac_cv_prog_cc_pic='-DDLL_EXPORT'\n+      ;;\n+    amigaos*)\n+      # FIXME: we need at least 68020 code to build shared libraries, but\n+      # adding the `-m68020' flag to GCC prevents building anything better,\n+      # like `-m68040'.\n+      ac_cv_prog_cc_pic='-m68020 -resident32 -malways-restore-a4'\n+      ;;\n+    sysv4*MP*)\n+      if test -d /usr/nec; then\n+\t ac_cv_prog_cc_pic=-Kconform_pic\n+      fi\n+      ;;\n+    *)\n+      ac_cv_prog_cc_pic='-fPIC'\n+      ;;\n+    esac\n+  else\n+    # PORTME Check for PIC flags for the system compiler.\n+    case \"$host_os\" in\n+    aix3* | aix4*)\n+     # All AIX code is PIC.\n+      ac_cv_prog_cc_static='-bnso -bI:/lib/syscalls.exp'\n+      ;;\n+\n+    hpux9* | hpux10* | hpux11*)\n+      # Is there a better ac_cv_prog_cc_static that works with the bundled CC?\n+      ac_cv_prog_cc_wl='-Wl,'\n+      ac_cv_prog_cc_static=\"${ac_cv_prog_cc_wl}-a ${ac_cv_prog_cc_wl}archive\"\n+      ac_cv_prog_cc_pic='+Z'\n+      ;;\n+\n+    irix5* | irix6*)\n+      ac_cv_prog_cc_wl='-Wl,'\n+      ac_cv_prog_cc_static='-non_shared'\n+      # PIC (with -KPIC) is the default.\n+      ;;\n+\n+    cygwin* | mingw* | os2*)\n+      # This hack is so that the source file can tell whether it is being\n+      # built for inclusion in a dll (and should export symbols for example).\n+      ac_cv_prog_cc_pic='-DDLL_EXPORT'\n+      ;;\n+\n+    osf3* | osf4* | osf5*)\n+      # All OSF/1 code is PIC.\n+      ac_cv_prog_cc_wl='-Wl,'\n+      ac_cv_prog_cc_static='-non_shared'\n+      ;;\n+\n+    sco3.2v5*)\n+      ac_cv_prog_cc_pic='-Kpic'\n+      ac_cv_prog_cc_static='-dn'\n+      ac_cv_prog_cc_shlib='-belf'\n+      ;;\n+\n+    solaris*)\n+      ac_cv_prog_cc_pic='-KPIC'\n+      ac_cv_prog_cc_static='-Bstatic'\n+      ac_cv_prog_cc_wl='-Wl,'\n+      ;;\n+\n+    sunos4*)\n+      ac_cv_prog_cc_pic='-PIC'\n+      ac_cv_prog_cc_static='-Bstatic'\n+      ac_cv_prog_cc_wl='-Qoption ld '\n+      ;;\n+\n+    sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)\n+      ac_cv_prog_cc_pic='-KPIC'\n+      ac_cv_prog_cc_static='-Bstatic'\n+      ac_cv_prog_cc_wl='-Wl,'\n+      ;;\n+\n+    uts4*)\n+      ac_cv_prog_cc_pic='-pic'\n+      ac_cv_prog_cc_static='-Bstatic'\n+      ;;\n+\n+    sysv4*MP*)\n+      if test -d /usr/nec ;then\n+\tac_cv_prog_cc_pic='-Kconform_pic'\n+\tac_cv_prog_cc_static='-Bstatic'\n+      fi\n+      ;;\n+\n+    *)\n+      ac_cv_prog_cc_can_build_shared=no\n+      ;;\n+    esac\n+  fi\n+  ac_cv_prog_cc_pic=\"$ac_cv_prog_cc_pic -DPIC\"\n+fi\n+\n+need_lc=yes\n+if test \"$enable_shared\" = yes && test \"$with_gcc\" = yes; then\n+  case \"$archive_cmds\" in\n+  *'~'*)\n+    # FIXME: we may have to deal with multi-command sequences.\n+    ;;\n+  '$CC '*)\n+    # Test whether the compiler implicitly links with -lc since on some\n+    # systems, -lgcc has to come before -lc. If gcc already passes -lc\n+    # to ld, don't add -lc before -lgcc.\n+    echo $ac_n \"checking whether -lc is implicitly linked in... $ac_c\" 1>&6\n+    if eval \"test \\\"`echo '$''{'ac_cv_archive_cmds_needs_lc'+set}'`\\\" = set\"; then\n+      echo $ac_n \"(cached) $ac_c\" 1>&6\n+      need_lc=$ac_cv_archive_cmds_needs_lc\n+    else\n+      $rm conftest*\n+      echo \"static int dummy;\" > conftest.$ac_ext\n+      if { (eval echo $progname:@LINENO@: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>conftest.err; }; then\n+\t# Append any warnings to the config.log.\n+\tcat conftest.err 1>&5\n+\tsoname=conftest\n+\tlib=conftest\n+\tlibobjs=conftest.o\n+\tdeplibs=\n+\tcompiler_flags=-v\n+\tlinker_flags=-v\n+\tverstring=\n+\toutput_objdir=.\n+\tlibname=conftest\n+\tallow_undefined_flag=\n+\tif { (eval echo $progname:@LINENO@: \\\"$archive_cmds\\\") 1>&5; (eval $archive_cmds) 2>&1 | grep \" -lc \" 1>&5 ; }; then\n+\t  need_lc=no\n+\tfi\n+      else\n+\tcat conftest.err 1>&5\n+      fi\n+    fi\n+    $rm conftest*\n+    echo \"$ac_t$need_lc\" 1>&6\n+    ;;\n+  esac\n+fi\n+ac_cv_archive_cmds_needs_lc=$need_lc"}, {"sha": "cfbe5caaa241596fe0df2c786767ba607b66a729", "filename": "ltcf-cxx.sh", "status": "added", "additions": 920, "deletions": 0, "changes": 920, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ltcf-cxx.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ltcf-cxx.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ltcf-cxx.sh?ref=4f4caf92a3c88fe811269a03a0b0793bdb02f919", "patch": "@@ -0,0 +1,920 @@\n+#### This script is meant to be sourced by ltconfig.\n+\n+# $Id: ltcf-cxx.sh,v 1.1.2.18 2000/07/24 06:10:27 oliva Exp $\n+\n+# ltcf-cxx.sh - Create a C++ compiler specific configuration\n+#\n+# Copyright (C) 1996-1999,2000 Free Software Foundation, Inc.\n+# Originally by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996\n+#\n+# Original C++ support by:\n+#    Alexandre Oliva <oliva@lsd.ic.unicamp.br>\n+#    Ossama Othman <ossama@debian.org>\n+#    Thomas Thanner <tanner@gmx.de>\n+#\n+# This file is free software; you can redistribute it and/or modify it\n+# under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful, but\n+# WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+# General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.\n+#\n+# As a special exception to the GNU General Public License, if you\n+# distribute this file as part of a program that contains a\n+# configuration script generated by Autoconf, you may include it under\n+# the same distribution terms that you use for the rest of that program.\n+\n+\n+# Source file extension for C++ test sources.\n+ac_ext=cc\n+\n+# Object file extension for compiled C++ test sources.\n+objext=o\n+\n+# Code to be used in simple compile tests\n+lt_simple_compile_test_code=\"int some_variable = 0;\"\n+\n+# Code to be used in simple link tests\n+lt_simple_link_test_code='int main(int, char *[]) { return (0); }'\n+\n+# C++ compiler\n+CXX=${CXX-c++}\n+\n+# ltmain only uses $CC for tagged configurations so make sure $CC is set.\n+CC=${CC-\"$CXX\"}\n+CFLAGS=${CFLAGS-\"$CXXFLAGS\"}\n+\n+# Allow CC to be a program name with arguments.\n+set dummy $CC\n+compiler=$2\n+cc_basename=`$echo X\"$compiler\" | $Xsed -e 's%^.*/%%'`\n+\n+# Check if we are using GNU gcc  (taken/adapted from configure script)\n+# We need to check here since \"--with-gcc\" is set at configure time,\n+# not ltconfig time!\n+cat > conftest.$ac_ext <<EOF\n+#ifdef __GNUC__\n+  yes;\n+#endif\n+EOF\n+if { ac_try='${CC-c++} -E conftest.$ac_ext'; { (eval echo \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+  with_gcc=yes\n+\n+  # Set up default GNU C++ configuration\n+\n+  # Check if GNU C++ uses GNU ld as the underlying linker, since the\n+  # archiving commands below assume that GNU ld is being used.\n+  if eval \"`$CC -print-prog-name=ld` --version 2>&1\" | \\\n+      egrep 'GNU ld' > /dev/null; then\n+    with_gnu_ld=yes\n+\n+    archive_cmds='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname -o $lib'\n+    archive_expsym_cmds='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'\n+\n+    hardcode_libdir_flag_spec='${wl}--rpath ${wl}$libdir'\n+    export_dynamic_flag_spec='${wl}--export-dynamic'\n+\n+    # If archive_cmds runs LD, not CC, wlarc should be empty\n+    # XXX I think wlarc can be eliminated in ltcf-cxx, but I need to\n+    #     investigate it a little bit more. (MM)\n+    wlarc='${wl}'\n+\n+    # ancient GNU ld didn't support --whole-archive et. al.\n+    if eval \"`$CC -print-prog-name=ld` --help 2>&1\" | \\\n+        egrep 'no-whole-archive' > /dev/null; then\n+      whole_archive_flag_spec=\"$wlarc\"'--whole-archive$convenience '\"$wlarc\"'--no-whole-archive'\n+    else\n+      whole_archive_flag_spec=\n+    fi\n+  else\n+    with_gnu_ld=no\n+    wlarc=\n+\n+    # A generic and very simple default shared library creation\n+    # command for GNU C++ for the case where it uses the native\n+    # linker, instead of GNU ld.  If possible, this setting should\n+    # overridden to take advantage of the native linker features on\n+    # the platform it is being used on.\n+    archive_cmds='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $lib'\n+  fi\n+\n+  # Commands to make compiler produce verbose output that lists\n+  # what \"hidden\" libraries, object files and flags are used when\n+  # linking a shared library.\n+  output_verbose_link_cmds='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | egrep \"\\-L\"'\n+\n+else\n+  with_gcc=no\n+  with_gnu_ld=no\n+  wlarc=\n+fi\n+\n+# In general, the C++ compiler should always link C++ objects.\n+case $target in\n+*aix3* | *aix4*)\n+  # AIX just has to be different, doesn't it? :-\\\n+  LD=makeC++SharedLib_r\n+  LDFLAGS=\"$LDFLAGS -p 0\"\n+  ;;\n+*)\n+  LD=\"$CC\"\n+  LDFLAGS=\"$LDFLAGS\"\n+  ;;\n+esac\n+\n+\n+# PORTME: fill in a description of your system's C++ link characteristics\n+case \"$host_os\" in\n+  aix3*)\n+    # FIXME: insert proper C++ library support\n+    ld_shlibs=no\n+    ;;\n+  aix4*)\n+    # FIXME: insert proper C++ library support\n+    ld_shlibs=no\n+    ;;\n+  chorus*)\n+    case \"$cc_basename\" in\n+      *)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+    esac \n+    ;;\n+  dgux*)\n+    case \"$cc_basename\" in\n+      ec++)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+      ghcx)\n+        # Green Hills C++ Compiler\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+      *)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+    esac\n+    ;;\n+  freebsd*)\n+    # FreeBSD uses GNU C++ and GNU ld\n+    # FIXME: insert proper C++ library support\n+    ld_shlibs=no\n+    ;;\n+  hpux*)\n+    case \"$cc_basename\" in\n+      CC)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+      aCC)\n+\tcase \"$host_os\" in\n+\thpux9*) archive_cmds='$rm $output_objdir/$soname~$CC -b ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $predep_objects $libobjs $deplibs $postdep_objects $linker_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib' ;;\n+\t*) archive_cmds='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $linker_flags' ;;\n+\tesac\n+\thardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'\n+\thardcode_libdir_separator=:\n+\thardcode_direct=yes\n+\thardcode_minus_L=yes # Not in the search PATH, but as the default\n+\t\t\t     # location of the library.\n+\texport_dynamic_flag_spec='${wl}-E'\n+\n+        # Commands to make compiler produce verbose output that lists\n+        # what \"hidden\" libraries, object files and flags are used when\n+        # linking a shared library.\n+        #\n+        # There doesn't appear to be a way to prevent this compiler from\n+        # explicitly linking system object files so we need to strip them\n+        # from the output so that they don't get included in the library\n+        # dependencies.\n+        output_verbose_link_cmds='templist=`($CC -b $CFLAGS -v conftest.$objext 2>&1) | egrep \"\\-L\"`; list=\"\"; for z in $templist; do case $z in conftest.$objext) list=\"$list $z\";; *.$objext);; *) list=\"$list $z\";;esac; done; echo $list'\n+        ;;\n+      *)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+    esac\n+    ;;\n+  irix5* | irix6*)\n+    case \"$cc_basename\" in\n+      CC)\n+        # SGI C++\n+        archive_cmds='$CC -shared -all -multigot $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -soname $soname `test -n \"$verstring\" && echo -set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'\n+        ;;\n+      *)\n+        if test \"$with_gcc\" = yes; then\n+          if test \"$with_gnu_ld\" = no; then\n+            archive_cmds='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $linker_flags ${wl}-soname ${wl}$soname `test -n \"$verstring\" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'\n+          else\n+            archive_cmds='$LD -shared $predep_objects $libobjs $deplibs $postdep_objects $linker_flags -soname $soname `test -n \"$verstring\" && echo -set_version $verstring` -o $lib'\n+          fi\n+        fi\n+        hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+        hardcode_libdir_separator=:\n+        link_all_deplibs=yes\n+        ;;\n+    esac\n+    ;;\n+  linux*)\n+    case \"$cc_basename\" in\n+      KCC)\n+        # Kuck and Associates, Inc. (KAI) C++ Compiler\n+\n+        # KCC will only create a shared library if the output file\n+        # ends with \".so\" (or \".sl\" for HP-UX), so rename the library\n+        # to its proper name (with version) after linking.\n+        archive_cmds='templib=`echo $lib | sed -e \"s/\\.so\\..*/\\.so/\"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $linker_flags --soname $soname -o \\$templib; mv \\$templib $lib'\n+        archive_expsym_cmds='templib=`echo $lib | sed -e \"s/\\.so\\..*/\\.so/\"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $linker_flags --soname $soname -o \\$templib ${wl}-retain-symbols-file,$export_symbols; mv \\$templib $lib'\n+\n+        # Commands to make compiler produce verbose output that lists\n+        # what \"hidden\" libraries, object files and flags are used when\n+        # linking a shared library.\n+        #\n+        # There doesn't appear to be a way to prevent this compiler from\n+        # explicitly linking system object files so we need to strip them\n+        # from the output so that they don't get included in the library\n+        # dependencies.\n+        output_verbose_link_cmds='templist=`$CC $CFLAGS -v conftest.$objext -o libconftest.so 2>&1 | egrep \"ld\"`; rm -f libconftest.so; list=\"\"; for z in $templist; do case $z in conftest.$objext) list=\"$list $z\";; *.$objext);; *) list=\"$list $z\";;esac; done; echo $list'\n+\n+        hardcode_libdir_flag_spec='${wl}--rpath,$libdir'\n+        export_dynamic_flag_spec='${wl}--export-dynamic'\n+\n+\t# Archives containing C++ object files must be created using\n+\t# \"CC -Bstatic\", where \"CC\" is the KAI C++ compiler.\n+        old_archive_cmds='$CC -Bstatic -o $oldlib $oldobjs'\n+        ;;\n+      cxx)\n+        # Compaq C++\n+        archive_cmds='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $linker_flags ${wl}-soname $wl$soname -o $lib'\n+        archive_expsym_cmds='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $linker_flags ${wl}-soname $wl$soname  -o $lib ${wl}-retain-symbols-file $wl$export_symbols'\n+\n+        runpath_var=LD_RUN_PATH\n+        hardcode_libdir_flag_spec='-rpath $libdir'\n+        hardcode_libdir_separator=:\n+\n+        # Commands to make compiler produce verbose output that lists\n+        # what \"hidden\" libraries, object files and flags are used when\n+        # linking a shared library.\n+        #\n+        # There doesn't appear to be a way to prevent this compiler from\n+        # explicitly linking system object files so we need to strip them\n+        # from the output so that they don't get included in the library\n+        # dependencies.\n+        output_verbose_link_cmds='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep \"ld\"`; templist=`echo $templist | sed \"s/\\(^.*ld.*\\)\\( .*ld .*$\\)/\\1/\"`; list=\"\"; for z in $templist; do case $z in conftest.$objext) list=\"$list $z\";; *.$objext);; *) list=\"$list $z\";;esac; done; echo $list'\n+        ;;\n+    esac\n+    ;;\n+  lynxos*)\n+    # FIXME: insert proper C++ library support\n+    ld_shlibs=no\n+    ;;\n+  m88k*)\n+    # FIXME: insert proper C++ library support\n+    ld_shlibs=no\n+    ;;\n+  mvs*)\n+    case \"$cc_basename\" in\n+      cxx)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+      *)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+    esac   \n+    ;;\n+  netbsd*)\n+    # FIXME: insert proper C++ library support\n+    ld_shlibs=no\n+    ;;\n+  osf3*)\n+    if test \"$with_gcc\" = yes && test \"$with_gnu_ld\" = no; then\n+      allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\\*'\n+      archive_cmds='$CC -shared -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-soname ${wl}$soname `test -n \"$verstring\" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'\n+\n+      hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+      hardcode_libdir_separator=:\n+\n+      # Commands to make compiler produce verbose output that lists\n+      # what \"hidden\" libraries, object files and flags are used when\n+      # linking a shared library.\n+      output_verbose_link_cmds='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | egrep \"\\-L\"'\n+    fi\n+\n+    case \"$cc_basename\" in\n+      KCC)\n+        # Kuck and Associates, Inc. (KAI) C++ Compiler\n+\n+        # KCC will only create a shared library if the output file\n+        # ends with \".so\" (or \".sl\" for HP-UX), so rename the library\n+        # to its proper name (with version) after linking.\n+        archive_cmds='templib=`echo $lib | sed -e \"s/\\.so\\..*/\\.so/\"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $linker_flags --soname $soname -o \\$templib; mv \\$templib $lib'\n+\n+        hardcode_libdir_flag_spec='${wl}-rpath,$libdir'\n+        hardcode_libdir_separator=:\n+\n+\t# Archives containing C++ object files must be created using\n+\t# \"CC -Bstatic\", where \"CC\" is the KAI C++ compiler.\n+        old_archive_cmds='$CC -Bstatic -o $oldlib $oldobjs'\n+\n+        ;;\n+      RCC)\n+        # Rational C++ 2.4.1\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+      cxx)\n+        allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\\*'\n+        archive_cmds='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $linker_flags ${wl}-soname $soname `test -n \"$verstring\" && echo ${wl}-set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'\n+\n+        hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+        hardcode_libdir_separator=:\n+\n+        # Commands to make compiler produce verbose output that lists\n+        # what \"hidden\" libraries, object files and flags are used when\n+        # linking a shared library.\n+        #\n+        # There doesn't appear to be a way to prevent this compiler from\n+        # explicitly linking system object files so we need to strip them\n+        # from the output so that they don't get included in the library\n+        # dependencies.\n+        output_verbose_link_cmds='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep \"ld\" | grep -v \"ld:\"`; templist=`echo $templist | sed \"s/\\(^.*ld.*\\)\\( .*ld.*$\\)/\\1/\"`; list=\"\"; for z in $templist; do case $z in conftest.$objext) list=\"$list $z\";; *.$objext);; *) list=\"$list $z\";;esac; done; echo $list'\n+        ;;\n+      *)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+    esac\n+    ;;\n+  osf4* | osf5*)\n+    if test \"$with_gcc\" = yes && test \"$with_gnu_ld\" = no; then\n+      allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\\*'\n+      archive_cmds='$CC -shared -nostdlib ${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n \"$verstring\" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'\n+\n+      hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+      hardcode_libdir_separator=:\n+\n+      # Commands to make compiler produce verbose output that lists\n+      # what \"hidden\" libraries, object files and flags are used when\n+      # linking a shared library.\n+      output_verbose_link_cmds='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | egrep \"\\-L\"'\n+    fi\n+\n+    case \"$cc_basename\" in\n+      KCC)\n+        # Kuck and Associates, Inc. (KAI) C++ Compiler\n+\n+        # KCC will only create a shared library if the output file\n+        # ends with \".so\" (or \".sl\" for HP-UX), so rename the library\n+        # to its proper name (with version) after linking.\n+        archive_cmds='templib=`echo $lib | sed -e \"s/\\.so\\..*/\\.so/\"`; $CC $predep_objects $libobjs $deplibs $postdep_objects $linker_flags --soname $soname -o \\$templib; mv \\$templib $lib'\n+\n+        hardcode_libdir_flag_spec='${wl}-rpath,$libdir'\n+        hardcode_libdir_separator=:\n+\n+\t# Archives containing C++ object files must be created using\n+\t# the KAI C++ compiler.\n+        old_archive_cmds='$CC -o $oldlib $oldobjs'\n+        ;;\n+      RCC)\n+        # Rational C++ 2.4.1\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+      cxx)\n+        allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\\*'\n+        archive_cmds='$CC -shared${allow_undefined_flag} $predep_objects $libobjs $deplibs $postdep_objects $linker_flags ${wl}-msym ${wl}-soname $soname `test -n \"$verstring\" && echo ${wl}-set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'\n+        \n+        hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+        hardcode_libdir_separator=:\n+\n+        # Commands to make compiler produce verbose output that lists\n+        # what \"hidden\" libraries, object files and flags are used when\n+        # linking a shared library.\n+        #\n+        # There doesn't appear to be a way to prevent this compiler from\n+        # explicitly linking system object files so we need to strip them\n+        # from the output so that they don't get included in the library\n+        # dependencies.\n+        output_verbose_link_cmds='templist=`$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep \"ld\" | grep -v \"ld:\"`; templist=`echo $templist | sed \"s/\\(^.*ld.*\\)\\( .*ld.*$\\)/\\1/\"`; list=\"\"; for z in $templist; do case $z in conftest.$objext) list=\"$list $z\";; *.$objext);; *) list=\"$list $z\";;esac; done; echo $list'\n+        ;;\n+      *)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+    esac\n+    ;;\n+  psos*)\n+    # FIXME: insert proper C++ library support\n+    ld_shlibs=no\n+    ;;\n+  sco*)\n+    case \"$cc_basename\" in\n+      CC)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+      *)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+    esac\n+    ;;\n+  sunos4*)\n+    case \"$cc_basename\" in\n+      CC)\n+        # Sun C++ 4.x\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+      lcc)\n+        # Lucid\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+      *)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+    esac\n+    ;;\n+  solaris*)\n+    case \"$cc_basename\" in\n+      CC)\n+\t# Sun C++ 4.2, 5.x and Centerline C++\n+        no_undefined_flag=' -ztext'\n+        archive_cmds='$CC -G${allow_undefined_flag} -nolib -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $linker_flags'\n+        archive_expsym_cmds='$echo \"{ global:\" > $lib.exp~cat $export_symbols | sed -e \"s/\\(.*\\)/\\1;/\" >> $lib.exp~$echo \"local: *; };\" >> $lib.exp~\n+        $CC -G${allow_undefined_flag} -nolib ${wl}-M ${wl}$lib.exp -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $linker_flags~$rm $lib.exp'\n+\n+        hardcode_libdir_flag_spec='-R$libdir'\n+        hardcode_shlibpath_var=no\n+        case \"$host_os\" in\n+          solaris2.[0-5] | solaris2.[0-5].*) ;;\n+          *)\n+            # The C++ compiler is used as linker so we must use $wl\n+            # flag to pass the commands to the underlying system\n+            # linker.\n+            # Supported since Solaris 2.6 (maybe 2.5.1?)\n+            whole_archive_flag_spec='${wl}-z ${wl}allextract$convenience ${wl}-z ${wl}defaultextract'\n+            ;;\n+        esac\n+        link_all_deplibs=yes\n+\n+        # Commands to make compiler produce verbose output that lists\n+        # what \"hidden\" libraries, object files and flags are used when\n+        # linking a shared library.\n+        #\n+        # There doesn't appear to be a way to prevent this compiler from\n+        # explicitly linking system object files so we need to strip them\n+        # from the output so that they don't get included in the library\n+        # dependencies.\n+        output_verbose_link_cmds='templist=`$CC -G $CFLAGS -v conftest.$objext 2>&1 | egrep \"\\-R|\\-L\"`; list=\"\"; for z in $templist; do case $z in conftest.$objext) list=\"$list $z\";; *.$objext);; *) list=\"$list $z\";;esac; done; echo $list'\n+\n+\t# Archives containing C++ object files must be created using\n+\t# \"CC -xar\", where \"CC\" is the Sun C++ compiler.  This is\n+        # necessary to make sure instantiated templates are included\n+        # in the archive.\n+        old_archive_cmds='$CC -xar -o $oldlib $oldobjs'\n+        ;;\n+      gcx)\n+        # Green Hills C++ Compiler\n+        archive_cmds='$CC -shared $predep_objects $libobjs $deplibs $postdep_objects $linker_flags ${wl}-h $wl$soname -o $lib'\n+\n+        # The C++ compiler must be used to create the archive.\n+        old_archive_cmds='$CC $LDFLAGS -archive -o $oldlib $oldobjs'\n+        ;;\n+      *)\n+        # GNU C++ compiler with Solaris linker\n+        if test \"$with_gcc\" = yes && test \"$with_gnu_ld\" = no; then\n+          if $CC --version | egrep -v '^2\\.7' > /dev/null; then\n+            archive_cmds='$LD -shared -nostdlib $LDFLAGS $predep_objects $libobjs $deplibs $postdep_objects $linker_flags ${wl}-h $wl$soname -o $lib'\n+            archive_expsym_cmds='$echo \"{ global:\" > $lib.exp~cat $export_symbols | sed -e \"s/\\(.*\\)/\\1;/\" >> $lib.exp~$echo \"local: *; };\" >> $lib.exp~\n+\t\t$LD -shared -nostdlib ${wl}-M $wl$lib.exp -o $lib $predep_objects $libobjs $deplibs $postdep_objects $linker_flags~$rm $lib.exp'\n+\n+            # Commands to make compiler produce verbose output that lists\n+            # what \"hidden\" libraries, object files and flags are used when\n+            # linking a shared library.\n+            output_verbose_link_cmds=\"$CC -shared $CFLAGS -v conftest.$objext 2>&1 | egrep \\\"\\-L\\\"\"\n+          else\n+            # g++ 2.7 appears to require `-G' NOT `-shared' on this\n+            # platform.\n+            archive_cmds='$LD -G -nostdlib $LDFLAGS $predep_objects $libobjs $deplibs $postdep_objects $linker_flags ${wl}-h $wl$soname -o $lib'\n+            archive_expsym_cmds='$echo \"{ global:\" > $lib.exp~cat $export_symbols | sed -e \"s/\\(.*\\)/\\1;/\" >> $lib.exp~$echo \"local: *; };\" >> $lib.exp~\n+\t\t$LD -G -nostdlib ${wl}-M $wl$lib.exp -o $lib $predep_objects $libobjs $deplibs $postdep_objects $linker_flags~$rm $lib.exp'\n+\n+            # Commands to make compiler produce verbose output that lists\n+            # what \"hidden\" libraries, object files and flags are used when\n+            # linking a shared library.\n+            output_verbose_link_cmds=\"$CC -G $CFLAGS -v conftest.$objext 2>&1 | egrep \\\"\\-L\\\"\"\n+          fi\n+\n+          hardcode_libdir_flag_spec='${wl}-R $wl$libdir'\n+        fi\n+        ;;\n+    esac   \n+    ;;\n+  tandem*)\n+    case \"$cc_basename\" in\n+      NCC)\n+        # NonStop-UX NCC 3.20\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+      *)\n+        # FIXME: insert proper C++ library support\n+        ld_shlibs=no\n+        ;;\n+    esac   \n+    ;;\n+  unixware*)\n+    # FIXME: insert proper C++ library support\n+    ld_shlibs=no\n+    ;;\n+  vxworks*)\n+    # FIXME: insert proper C++ library support\n+    ld_shlibs=no\n+    ;;\n+  *)\n+    # FIXME: insert proper C++ library support\n+    ld_shlibs=no\n+    ;;\n+esac\n+\n+\n+## Compiler Characteristics: PIC flags, static flags, etc\n+\n+# We don't use cached values here since only the C compiler\n+# characteristics should be cached.\n+ac_cv_prog_cc_pic=\n+ac_cv_prog_cc_shlib=\n+ac_cv_prog_cc_wl=\n+ac_cv_prog_cc_static=\n+ac_cv_prog_cc_no_builtin=\n+ac_cv_prog_cc_can_build_shared=$can_build_shared\n+\n+# It is not enough to reset these cached values, they must be unset.\n+unset ac_cv_prog_cc_pic_works\n+unset ac_cv_prog_cc_static_works\n+\n+if test \"$with_gcc\" = yes; then\n+  ac_cv_prog_cc_wl='-Wl,'\n+  ac_cv_prog_cc_static='-static'\n+\n+  case \"$host_os\" in\n+  beos* | irix5* | irix6* | osf3* | osf4* | osf5*)\n+    # PIC is the default for these OSes.\n+    ;;\n+  aix*)\n+    # Below there is a dirty hack to force normal static linking with -ldl\n+    # The problem is because libdl dynamically linked with both libc and\n+    # libC (AIX C++ library), which obviously doesn't included in libraries\n+    # list by gcc. This cause undefined symbols with -static flags.\n+    # This hack allows C programs to be linked with \"-static -ldl\", but\n+    # we not sure about C++ programs.\n+    ac_cv_prog_cc_static=\"$ac_cv_prog_cc_static ${ac_cv_prog_cc_wl}-lC\"\n+    ;;\n+  cygwin* | mingw* | os2*)\n+    # This hack is so that the source file can tell whether it is being\n+    # built for inclusion in a dll (and should export symbols for example).\n+    ac_cv_prog_cc_pic='-DDLL_EXPORT'\n+    ;;\n+  amigaos*)\n+    # FIXME: we need at least 68020 code to build shared libraries, but\n+    # adding the `-m68020' flag to GCC prevents building anything better,\n+    # like `-m68040'.\n+    ac_cv_prog_cc_pic='-m68020 -resident32 -malways-restore-a4'\n+    ;;\n+  sysv4*MP*)\n+    if test -d /usr/nec; then\n+      ac_cv_prog_cc_pic=-Kconform_pic\n+    fi\n+    ;;\n+  *)\n+    ac_cv_prog_cc_pic='-fPIC'\n+    ;;\n+  esac\n+else\n+  case \"$host_os\" in\n+    aix4*)\n+      # All AIX code is PIC.\n+      ;;\n+    chorus*)\n+      case \"$cc_basename\" in\n+      cxch68)\n+        # Green Hills C++ Compiler\n+        # ac_cv_prog_cc_static=\"--no_auto_instantiation -u __main -u __premain -u _abort -r $COOL_DIR/lib/libOrb.a $MVME_DIR/lib/CC/libC.a $MVME_DIR/lib/classix/libcx.s.a\"\n+        ;;\n+      esac \n+      ;;\n+    dgux*)\n+      case \"$cc_basename\" in\n+        ec++)\n+          ac_cv_prog_cc_pic='-KPIC'\n+          ;;\n+        ghcx)\n+          # Green Hills C++ Compiler\n+          ac_cv_prog_cc_pic='-pic'\n+          ;;\n+        *)\n+          ;;\n+      esac\n+      ;;\n+    freebsd*)\n+      # FreeBSD uses GNU C++\n+      ;;\n+    hpux9* | hpux10* | hpux11*)\n+      case \"$cc_basename\" in\n+        CC)\n+          ac_cv_prog_cc_wl='-Wl,'\n+          ac_cv_prog_cc_static=\"${ac_cv_prog_cc_wl}-a ${ac_cv_prog_cc_wl}archive\"\n+          ac_cv_prog_cc_pic='+Z'\n+          ;;\n+        aCC)\n+          ac_cv_prog_cc_wl='-Wl,'\n+          ac_cv_prog_cc_static=\"${ac_cv_prog_cc_wl}-a ${ac_cv_prog_cc_wl}archive\"\n+          ac_cv_prog_cc_pic='+Z'\n+          ;;\n+        *)\n+          ;;\n+      esac\n+      ;;\n+    irix5* | irix6*)\n+      case \"$cc_basename\" in\n+        CC)\n+          ac_cv_prog_cc_wl='-Wl,'\n+          ac_cv_prog_cc_static='-non_shared'\n+          ac_cv_prog_cc_pic='-KPIC'\n+          ;;\n+        *)\n+          ;;\n+      esac\n+      ;;\n+    linux*)\n+      case \"$cc_basename\" in\n+        KCC)\n+          # KAI C++ Compiler\n+          ac_cv_prog_cc_wl='--backend -Wl,'\n+          ac_cv_prog_cc_pic='-fPIC'\n+          ;;\n+        cxx)\n+          # Compaq C++\n+          # Make sure the PIC flag is empty.  It appears that all Alpha\n+          # Linux and Compaq Tru64 Unix objects are PIC.\n+          ac_cv_prog_cc_pic=\n+          ac_cv_prog_cc_static='-non_shared'\n+          ;;\n+        *)\n+          ;;\n+      esac\n+      ;;\n+    lynxos*)\n+      ;;\n+    m88k*)\n+      ;;\n+    mvs*)\n+      case \"$cc_basename\" in\n+        cxx)\n+          ac_cv_prog_cc_pic='-W c,exportall'\n+          ;;\n+        *)\n+          ;;\n+      esac   \n+      ;;\n+    netbsd*)\n+      ;;\n+    osf3* | osf4* | osf5*)\n+      case \"$cc_basename\" in\n+        KCC)\n+          ac_cv_prog_cc_wl='--backend -Wl,'\n+          ;;\n+        RCC)\n+          # Rational C++ 2.4.1\n+          ac_cv_prog_cc_pic='-pic'\n+          ;;\n+        cxx)\n+          # Digital/Compaq C++\n+          ac_cv_prog_cc_wl='-Wl,'\n+          # Make sure the PIC flag is empty.  It appears that all Alpha\n+          # Linux and Compaq Tru64 Unix objects are PIC.\n+          ac_cv_prog_cc_pic=\n+          ac_cv_prog_cc_static='-non_shared'\n+          ;;\n+        *)\n+          ;;\n+      esac\n+      ;;\n+    psos*)\n+      ;;\n+    sco*)\n+      case \"$cc_basename\" in\n+        CC)\n+          ac_cv_prog_cc_pic='-fPIC'\n+          ;;\n+        *)\n+          ;;\n+      esac\n+      ;;\n+    solaris*)\n+      case \"$cc_basename\" in\n+        CC)\n+          # Sun C++ 4.2, 5.x and Centerline C++\n+          ac_cv_prog_cc_pic='-KPIC'\n+          ac_cv_prog_cc_static='-Bstatic'\n+          ac_cv_prog_cc_wl='-Qoption ld '\n+          ;;\n+        gcx)\n+          # Green Hills C++ Compiler\n+          ac_cv_prog_cc_pic='-PIC'\n+          ;;\n+        *)\n+          ;;\n+      esac   \n+      ;;\n+    sunos4*)\n+      case \"$cc_basename\" in\n+        CC)\n+          # Sun C++ 4.x\n+          ac_cv_prog_cc_pic='-pic'\n+          ac_cv_prog_cc_static='-Bstatic'\n+          ;;\n+        lcc)\n+          # Lucid\n+          ac_cv_prog_cc_pic='-pic'\n+          ;;\n+        *)\n+          ;;\n+      esac\n+      ;;\n+    tandem*)\n+      case \"$cc_basename\" in\n+        NCC)\n+          # NonStop-UX NCC 3.20\n+          ac_cv_prog_cc_pic='-KPIC'\n+          ;;\n+        *)\n+          ;;\n+      esac   \n+      ;;\n+    unixware*)\n+      ;;\n+    vxworks*)\n+      ;;\n+    *)\n+      ac_cv_prog_cc_can_build_shared=no\n+      ;;\n+  esac\n+fi\n+ac_cv_prog_cc_pic=\"$ac_cv_prog_cc_pic -DPIC\"\n+\n+\n+# Figure out \"hidden\" C++ library dependencies from verbose\n+# compiler output whening linking a shared library.\n+cat > conftest.$ac_ext <<EOF\n+class Foo\n+{\n+public:\n+  Foo (void) { a = 0; }\n+private:\n+  int a;\n+};\n+EOF\n+\n+\n+if eval $ac_compile 2>&5; then\n+  # Parse the compiler output and extract the necessary\n+  # objects, libraries and library flags.\n+\n+  # Sentinel used to keep track of whether or not we are before\n+  # the conftest object file.\n+  pre_test_object_deps_done=no\n+\n+  for p in `eval $output_verbose_link_cmds`; do\n+\n+    case $p in\n+\n+    -L* | -R* | -l*)\n+       # Some compilers place space between \"-{L,R}\" and the path.\n+       # Remove the space.\n+       if test $p = \"-L\" \\\n+          || test $p = \"-R\"; then\n+         prev=$p\n+         continue\n+       else\n+         prev=\n+       fi\n+\n+       if test \"$pre_test_object_deps_done\" = no; then\n+         case $p in\n+\t -L* | -R*)\n+\t   # Internal compiler library paths should come after those\n+\t   # provided the user.  The postdeps already come after the\n+\t   # user supplied libs so there is no need to process them.\n+           if test -z \"$compiler_lib_search_path\"; then\n+             compiler_lib_search_path=\"${prev}${p}\"\n+           else\n+             compiler_lib_search_path=\"${compiler_lib_search_path} ${prev}${p}\"\n+           fi\n+           ;;\n+         # The \"-l\" case would never come before the object being\n+         # linked, so don't bother handling this case.\n+         esac\n+       else\n+         if test -z \"$postdeps\"; then\n+           postdeps=\"${prev}${p}\"\n+         else\n+           postdeps=\"${postdeps} ${prev}${p}\"\n+         fi\n+       fi\n+       ;;\n+\n+    *.$objext)\n+       # This assumes that the test object file only shows up\n+       # once in the compiler output.\n+       if test \"$p\" = \"conftest.$objext\"; then\n+         pre_test_object_deps_done=yes\n+         continue\n+       fi\n+\n+       if test \"$pre_test_object_deps_done\" = no; then\n+         if test -z \"$predep_objects\"; then\n+           predep_objects=\"$p\"\n+         else\n+           predep_objects=\"$predep_objects $p\"\n+         fi\n+       else\n+         if test -z \"$postdep_objects\"; then\n+           postdep_objects=\"$p\"\n+         else\n+           postdep_objects=\"$postdep_objects $p\"\n+         fi\n+       fi\n+       ;;\n+\n+    *) ;; # Ignore the rest.\n+\n+    esac\n+  done\n+\n+  # Clean up.\n+  rm -f a.out\n+else\n+  echo \"ltcf-cxx.sh: error: problem compiling test program\"\n+fi\n+\n+$rm -f confest.$objext\n+\n+need_lc=yes\n+if test \"$enable_shared\" = yes && test \"$with_gcc\" = yes; then\n+  case \"$archive_cmds\" in\n+  *'~'*)\n+    # FIXME: we may have to deal with multi-command sequences.\n+    ;;\n+  '$CC '*)\n+    # Test whether the compiler implicitly links with -lc since on some\n+    # systems, -lgcc has to come before -lc. If gcc already passes -lc\n+    # to ld, don't add -lc before -lgcc.\n+    echo $ac_n \"checking whether -lc is implicitly linked in... $ac_c\" 1>&6\n+    if eval \"test \\\"`echo '$''{'ac_cv_cxx_archive_cmds_needs_lc'+set}'`\\\" = set\"; then\n+      echo $ac_n \"(cached) $ac_c\" 1>&6\n+      need_lc=$ac_cv_cxx_archive_cmds_needs_lc\n+    else\n+      $rm conftest*\n+      echo \"static int dummy;\" > conftest.$ac_ext\n+      if { (eval echo $progname:@LINENO@: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>conftest.err; }; then\n+\t# Append any warnings to the config.log.\n+\tcat conftest.err 1>&5\n+\n+\tsoname=conftest\n+\tlib=conftest\n+\tlibobjs=conftest.o\n+\tdeplibs=\n+\tcompiler_flags=-v\n+\tlinker_flags=-v\n+\tverstring=\n+\toutput_objdir=.\n+\tlibname=conftest\n+\tallow_undefined_flag=\n+\tif { (eval echo $progname:@LINENO@: \\\"$archive_cmds\\\") 1>&5; (eval $archive_cmds) 2>&1 | grep \" -lc \" 1>&5 ; }; then\n+\t  need_lc=no\n+\tfi\n+      else\n+\tcat conftest.err 1>&5\n+      fi\n+    fi\n+    $rm conftest*\n+    echo \"$ac_t$need_lc\" 1>&6\n+    ;;\n+  esac\n+fi\n+ac_cv_cxx_archive_cmds_needs_lc=$need_lc"}, {"sha": "12e9171b78bbeb7fe39fd4a33d188c883797a280", "filename": "ltcf-gcj.sh", "status": "added", "additions": 573, "deletions": 0, "changes": 573, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ltcf-gcj.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ltcf-gcj.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ltcf-gcj.sh?ref=4f4caf92a3c88fe811269a03a0b0793bdb02f919", "patch": "@@ -0,0 +1,573 @@\n+#### This script is meant to be sourced by ltconfig.\n+\n+# $Id: ltcf-gcj.sh,v 1.1.2.5 2000/07/20 02:29:15 oliva Exp $\n+\n+# ltcf-gcj.sh - Create a GCJ compiler specific configuration\n+#\n+# Copyright (C) 1996-1999,2000 Free Software Foundation, Inc.\n+# Originally by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996\n+#\n+# Original GCJ support by:\n+#    Alexandre Oliva <oliva@lsd.ic.unicamp.br>\n+#\n+# This file is free software; you can redistribute it and/or modify it\n+# under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful, but\n+# WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+# General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.\n+#\n+# As a special exception to the GNU General Public License, if you\n+# distribute this file as part of a program that contains a\n+# configuration script generated by Autoconf, you may include it under\n+# the same distribution terms that you use for the rest of that program.\n+\n+\n+# Source file extension for Java test sources.\n+ac_ext=java\n+\n+# Object file extension for compiled Java test sources.\n+objext=o\n+\n+# Code to be used in simple compile tests\n+lt_simple_compile_test_code=\"class foo {}\"\n+\n+# Code to be used in simple link tests\n+lt_simple_link_test_code='public class conftest { public static void main(String[] argv) {} (0); }'\n+\n+## Linker Characteristics\n+case \"$host_os\" in\n+cygwin* | mingw*)\n+  # FIXME: the MSVC++ port hasn't been tested in a loooong time\n+  # When not using gcc, we currently assume that we are using\n+  # Microsoft Visual C++.\n+  if test \"$with_gcc\" != yes; then\n+    with_gnu_ld=no\n+  fi\n+  ;;\n+\n+esac\n+\n+ld_shlibs=yes\n+if test \"$with_gnu_ld\" = yes; then\n+  # If archive_cmds runs LD, not CC, wlarc should be empty\n+  wlarc='${wl}'\n+\n+  # See if GNU ld supports shared libraries.\n+  case \"$host_os\" in\n+  aix3* | aix4*)\n+    # On AIX, the GNU linker is very broken\n+    ld_shlibs=no\n+    cat <<EOF 1>&2\n+\n+*** Warning: the GNU linker, at least up to release 2.9.1, is reported\n+*** to be unable to reliably create shared libraries on AIX.\n+*** Therefore, libtool is disabling shared libraries support.  If you\n+*** really care for shared libraries, you may want to modify your PATH\n+*** so that a non-GNU linker is found, and then restart.\n+\n+EOF\n+    ;;\n+\n+  amigaos*)\n+    archive_cmds='$rm $output_objdir/a2ixlibrary.data~$echo \"#define NAME $libname\" > $output_objdir/a2ixlibrary.data~$echo \"#define LIBRARY_ID 1\" >> $output_objdir/a2ixlibrary.data~$echo \"#define VERSION $major\" >> $output_objdir/a2ixlibrary.data~$echo \"#define REVISION $revision\" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_minus_L=yes\n+\n+    # Samuel A. Falvo II <kc5tja@dolphin.openprojects.net> reports\n+    # that the semantics of dynamic libraries on AmigaOS, at least up\n+    # to version 4, is to share data among multiple programs linked\n+    # with the same dynamic library.  Since this doesn't match the\n+    # behavior of shared libraries on other platforms, we can use\n+    # them.\n+    ld_shlibs=no\n+    ;;\n+\n+  beos*)\n+    if $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then\n+      allow_undefined_flag=unsupported\n+      # Joseph Beckenbach <jrb3@best.com> says some releases of gcc\n+      # support --undefined.  This deserves some investigation.  FIXME\n+      archive_cmds='$CC -nostart $libobjs $deplibs $linker_flags ${wl}-soname $wl$soname -o $lib'\n+    else\n+      ld_shlibs=no\n+    fi\n+    ;;\n+\n+  cygwin* | mingw*)\n+    # hardcode_libdir_flag_spec is actually meaningless, as there is\n+    # no search path for DLLs.\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    allow_undefined_flag=unsupported\n+    always_export_symbols=yes\n+\n+    extract_expsyms_cmds='test -f $output_objdir/impgen.c || \\\n+      sed -e \"/^# \\/\\* impgen\\.c starts here \\*\\//,/^# \\/\\* impgen.c ends here \\*\\// { s/^# //; p; }\" -e d < $0 > $output_objdir/impgen.c~\n+      test -f $output_objdir/impgen.exe || (cd $output_objdir && \\\n+      if test \"x$HOST_CC\" != \"x\" ; then $HOST_CC -o impgen impgen.c ; \\\n+      else $CC -o impgen impgen.c ; fi)~\n+      $output_objdir/impgen $dir/$soname > $output_objdir/$soname-def'\n+\n+    old_archive_from_expsyms_cmds='$DLLTOOL --as=$AS --dllname $soname --def $output_objdir/$soname-def --output-lib $output_objdir/$newlib'\n+\n+    # cygwin and mingw dlls have different entry points and sets of symbols\n+    # to exclude.\n+    # FIXME: what about values for MSVC?\n+    dll_entry=__cygwin_dll_entry@12\n+    dll_exclude_symbols=DllMain@12,_cygwin_dll_entry@12,_cygwin_noncygwin_dll_entry@12~\n+    case \"$host_os\" in\n+    mingw*)\n+      # mingw values\n+      dll_entry=_DllMainCRTStartup@12\n+      dll_exclude_symbols=DllMain@12,DllMainCRTStartup@12,DllEntryPoint@12~\n+      ;;\n+    esac\n+\n+    # mingw and cygwin differ, and it's simplest to just exclude the union\n+    # of the two symbol sets.\n+    dll_exclude_symbols=DllMain@12,_cygwin_dll_entry@12,_cygwin_noncygwin_dll_entry@12,DllMainCRTStartup@12,DllEntryPoint@12\n+\n+    # recent cygwin and mingw systems supply a stub DllMain which the user\n+    # can override, but on older systems we have to supply one (in ltdll.c)\n+    if test \"x$lt_cv_need_dllmain\" = \"xyes\"; then\n+      ltdll_obj='$output_objdir/$soname-ltdll.'\"$objext \"\n+      ltdll_cmds='test -f $output_objdir/$soname-ltdll.c || sed -e \"/^# \\/\\* ltdll\\.c starts here \\*\\//,/^# \\/\\* ltdll.c ends here \\*\\// { s/^# //; p; }\" -e d < $0 > $output_objdir/$soname-ltdll.c~\n+\ttest -f $output_objdir/$soname-ltdll.$objext || (cd $output_objdir && $CC -c $soname-ltdll.c)~'\n+    else\n+      ltdll_obj=\n+      ltdll_cmds=\n+    fi\n+\n+    # Extract the symbol export list from an `--export-all' def file,\n+    # then regenerate the def file from the symbol export list, so that\n+    # the compiled dll only exports the symbol export list.\n+    # Be careful not to strip the DATA tag left be newer dlltools.\n+    export_symbols_cmds=\"$ltdll_cmds\"'\n+      $DLLTOOL --export-all --exclude-symbols '$dll_exclude_symbols' --output-def $output_objdir/$soname-def '$ltdll_obj'$libobjs $convenience~\n+      sed -e \"1,/EXPORTS/d\" -e \"s/ @ [0-9]*//\" -e \"s/ *;.*$//\" < $output_objdir/$soname-def > $export_symbols'\n+\n+    # If DATA tags from a recent dlltool are present, honour them!\n+    archive_expsym_cmds='echo EXPORTS > $output_objdir/$soname-def~\n+      _lt_hint=1;\n+      cat $export_symbols | while read symbol; do\n+\tset dummy \\$symbol;\n+\tcase \\$# in\n+\t  2) echo \"\t\\$2 @ \\$_lt_hint ; \" >> $output_objdir/$soname-def;;\n+\t  *) echo \"     \\$2 @ \\$_lt_hint \\$3 ; \" >> $output_objdir/$soname-def;;\n+\tesac;\n+\t_lt_hint=`expr 1 + \\$_lt_hint`;\n+      done~\n+      '\"$ltdll_cmds\"'\n+      $CC -Wl,--base-file,$output_objdir/$soname-base '$lt_cv_gcj_dll_switch' -Wl,-e,'$dll_entry' -o $lib '$ltdll_obj'$libobjs $deplibs $compiler_flags~\n+      $DLLTOOL --as=$AS --dllname $soname --exclude-symbols '$dll_exclude_symbols' --def $output_objdir/$soname-def --base-file $output_objdir/$soname-base --output-exp $output_objdir/$soname-exp~\n+      $CC -Wl,--base-file,$output_objdir/$soname-base $output_objdir/$soname-exp '$lt_cv_gcj_dll_switch' -Wl,-e,'$dll_entry' -o $lib '$ltdll_obj'$libobjs $deplibs $compiler_flags~\n+      $DLLTOOL --as=$AS --dllname $soname --exclude-symbols '$dll_exclude_symbols' --def $output_objdir/$soname-def --base-file $output_objdir/$soname-base --output-exp $output_objdir/$soname-exp~\n+      $CC $output_objdir/$soname-exp '$lt_cv_gcj_dll_switch' -Wl,-e,'$dll_entry' -o $lib '$ltdll_obj'$libobjs $deplibs $compiler_flags'\n+    ;;\n+\n+  netbsd*)\n+    if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then\n+      archive_cmds='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'\n+      wlarc=\n+    else\n+      archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'\n+      archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'\n+    fi\n+    ;;\n+\n+  solaris* | sysv5*)\n+    if $LD -v 2>&1 | egrep 'BFD 2\\.8' > /dev/null; then\n+      ld_shlibs=no\n+      cat <<EOF 1>&2\n+\n+*** Warning: The releases 2.8.* of the GNU linker cannot reliably\n+*** create shared libraries on Solaris systems.  Therefore, libtool\n+*** is disabling shared libraries support.  We urge you to upgrade GNU\n+*** binutils to release 2.9.1 or newer.  Another option is to modify\n+*** your PATH or compiler configuration so that the native linker is\n+*** used, and then restart.\n+\n+EOF\n+    elif $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then\n+      archive_cmds='$CC -shared $libobjs $deplibs $linker_flags ${wl}-soname $wl$soname -o $lib'\n+      archive_expsym_cmds='$CC -shared $libobjs $deplibs $linker_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'\n+    else\n+      ld_shlibs=no\n+    fi\n+    ;;\n+\n+  sunos4*)\n+    archive_cmds='$LD -assert pure-text -Bshareable -o $lib $libobjs $deplibs $linker_flags'\n+    wlarc=\n+    hardcode_direct=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  *)\n+    if $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then\n+      archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'\n+      archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'\n+    else\n+      ld_shlibs=no\n+    fi\n+    ;;\n+  esac\n+\n+  if test \"$ld_shlibs\" = yes; then\n+    runpath_var=LD_RUN_PATH\n+    hardcode_libdir_flag_spec=\"$wlarc\"'--rpath '\"$wlarc\"'$libdir'\n+    export_dynamic_flag_spec=\"$wlarc\"'--export-dynamic'\n+    case $host_os in\n+    cygwin* | mingw*)\n+      # dlltool doesn't understand --whole-archive et. al.\n+      whole_archive_flag_spec=\n+      ;;\n+    *)\n+      # ancient GNU ld didn't support --whole-archive et. al.\n+      if $LD --help 2>&1 | egrep 'no-whole-archive' > /dev/null; then\n+\twhole_archive_flag_spec=\"$wlarc\"'--whole-archive$convenience '\"$wlarc\"'--no-whole-archive'\n+      else\n+\twhole_archive_flag_spec=\n+      fi\n+      ;;\n+    esac\n+  fi\n+else\n+  # PORTME fill in a description of your system's linker (not GNU ld)\n+  case \"$host_os\" in\n+  aix3*)\n+    allow_undefined_flag=unsupported\n+    always_export_symbols=yes\n+    archive_expsym_cmds='$LD -o $output_objdir/$soname $libobjs $deplibs $linker_flags -bE:$export_symbols -T512 -H512 -bM:SRE~$AR $AR_FLAGS $lib $output_objdir/$soname'\n+    # Note: this linker hardcodes the directories in LIBPATH if there\n+    # are no directories specified by -L.\n+    hardcode_minus_L=yes\n+    if test \"$with_gcc\" = yes && test -z \"$link_static_flag\"; then\n+      # Neither direct hardcoding nor static linking is supported with a\n+      # broken collect2.\n+      hardcode_direct=unsupported\n+    fi\n+    ;;\n+\n+  aix4*)\n+    hardcode_libdir_flag_spec='${wl}-b ${wl}nolibpath ${wl}-b ${wl}libpath:$libdir:/usr/lib:/lib'\n+    hardcode_libdir_separator=':'\n+    if test \"$with_gcc\" = yes; then\n+      collect2name=`${CC} -print-prog-name=collect2`\n+      if test -f \"$collect2name\" && \\\n+\t strings \"$collect2name\" | grep resolve_lib_name >/dev/null\n+      then\n+\t# We have reworked collect2\n+\thardcode_direct=yes\n+      else\n+\t# We have old collect2\n+\thardcode_direct=unsupported\n+\t# It fails to find uninstalled libraries when the uninstalled\n+\t# path is not listed in the libpath.  Setting hardcode_minus_L\n+\t# to unsupported forces relinking\n+\thardcode_minus_L=yes\n+\thardcode_libdir_flag_spec='-L$libdir'\n+\thardcode_libdir_separator=\n+      fi\n+      shared_flag='-shared'\n+    else\n+      shared_flag='${wl}-bM:SRE'\n+      hardcode_direct=yes\n+    fi\n+    allow_undefined_flag=' ${wl}-berok'\n+    archive_cmds=\"\\$CC $shared_flag\"' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}-bexpall ${wl}-bnoentry${allow_undefined_flag}'\n+    archive_expsym_cmds=\"\\$CC $shared_flag\"' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}-bE:$export_symbols ${wl}-bnoentry${allow_undefined_flag}'\n+    case \"$host_os\" in aix4.[01]|aix4.[01].*)\n+      # According to Greg Wooledge, -bexpall is only supported from AIX 4.2 on\n+      always_export_symbols=yes ;;\n+    esac\n+   ;;\n+\n+  amigaos*)\n+    archive_cmds='$rm $output_objdir/a2ixlibrary.data~$echo \"#define NAME $libname\" > $output_objdir/a2ixlibrary.data~$echo \"#define LIBRARY_ID 1\" >> $output_objdir/a2ixlibrary.data~$echo \"#define VERSION $major\" >> $output_objdir/a2ixlibrary.data~$echo \"#define REVISION $revision\" >> $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir && a2ixlibrary -32)'\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_minus_L=yes\n+    # see comment about different semantics on the GNU ld section\n+    ld_shlibs=no\n+    ;;\n+\n+  cygwin* | mingw*)\n+    # When not using gcc, we currently assume that we are using\n+    # Microsoft Visual C++.\n+    # hardcode_libdir_flag_spec is actually meaningless, as there is\n+    # no search path for DLLs.\n+    hardcode_libdir_flag_spec=' '\n+    allow_undefined_flag=unsupported\n+    # Tell ltmain to make .lib files, not .a files.\n+    libext=lib\n+    # FIXME: Setting linknames here is a bad hack.\n+    archive_cmds='$CC -o $lib $libobjs $compiler_flags `echo \"$deplibs\" | sed -e '\\''s/ -lc$//'\\''` -link -dll~linknames='\n+    # The linker will automatically build a .lib file if we build a DLL.\n+    old_archive_from_new_cmds='true'\n+    # FIXME: Should let the user specify the lib program.\n+    old_archive_cmds='lib /OUT:$oldlib$oldobjs$old_deplibs'\n+    fix_srcfile_path='`cygpath -w $srcfile`'\n+    ;;\n+\n+  freebsd1*)\n+    ld_shlibs=no\n+    ;;\n+\n+  # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor\n+  # support.  Future versions do this automatically, but an explicit c++rt0.o\n+  # does not break anything, and helps significantly (at the cost of a little\n+  # extra space).\n+  freebsd2.2*)\n+    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags /usr/lib/c++rt0.o'\n+    hardcode_libdir_flag_spec='-R$libdir'\n+    hardcode_direct=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  # Unfortunately, older versions of FreeBSD 2 do not have this feature.\n+  freebsd2*)\n+    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_direct=yes\n+    hardcode_minus_L=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  # FreeBSD 3 and greater uses gcc -shared to do shared libraries.\n+  freebsd*)\n+    archive_cmds='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'\n+    hardcode_libdir_flag_spec='-R$libdir'\n+    hardcode_direct=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  hpux9* | hpux10* | hpux11*)\n+    case \"$host_os\" in\n+    hpux9*) archive_cmds='$rm $output_objdir/$soname~$LD -b +b $install_libdir -o $output_objdir/$soname $libobjs $deplibs $linker_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib' ;;\n+    *) archive_cmds='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags' ;;\n+    esac\n+    hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'\n+    hardcode_libdir_separator=:\n+    hardcode_direct=yes\n+    hardcode_minus_L=yes # Not in the search PATH, but as the default\n+\t\t\t # location of the library.\n+    export_dynamic_flag_spec='${wl}-E'\n+    ;;\n+\n+  irix5* | irix6*)\n+    if test \"$with_gcc\" = yes; then\n+      archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n \"$verstring\" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'\n+    else\n+      archive_cmds='$LD -shared $libobjs $deplibs $linker_flags -soname $soname `test -n \"$verstring\" && echo -set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'\n+    fi\n+    hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+    hardcode_libdir_separator=:\n+    link_all_deplibs=yes\n+    ;;\n+\n+  netbsd*)\n+    if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then\n+      archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out\n+    else\n+      archive_cmds='$LD -shared -o $lib $libobjs $deplibs $linker_flags'      # ELF\n+    fi\n+    hardcode_libdir_flag_spec='${wl}-R$libdir'\n+    hardcode_direct=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  openbsd*)\n+    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_libdir_flag_spec='-R$libdir'\n+    hardcode_direct=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  os2*)\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_minus_L=yes\n+    allow_undefined_flag=unsupported\n+    archive_cmds='$echo \"LIBRARY $libname INITINSTANCE\" > $output_objdir/$libname.def~$echo \"DESCRIPTION \\\"$libname\\\"\" >> $output_objdir/$libname.def~$echo DATA >> $output_objdir/$libname.def~$echo \" SINGLE NONSHARED\" >> $output_objdir/$libname.def~$echo EXPORTS >> $output_objdir/$libname.def~emxexp $libobjs >> $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $compiler_flags $output_objdir/$libname.def'\n+    old_archive_from_new_cmds='emximp -o $output_objdir/$libname.a $output_objdir/$libname.def'\n+    ;;\n+\n+  osf3*)\n+    if test \"$with_gcc\" = yes; then\n+      allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\\*'\n+      archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n \"$verstring\" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'\n+    else\n+      allow_undefined_flag=' -expect_unresolved \\*'\n+      archive_cmds='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -soname $soname `test -n \"$verstring\" && echo -set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'\n+    fi\n+    hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+    hardcode_libdir_separator=:\n+    ;;\n+\n+  osf4* | osf5*)\t# as osf3* with the addition of -msym flag\n+    if test \"$with_gcc\" = yes; then\n+      allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\\*'\n+      archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $compiler_flags ${wl}-msym ${wl}-soname ${wl}$soname `test -n \"$verstring\" && echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'\n+    else\n+      allow_undefined_flag=' -expect_unresolved \\*'\n+      archive_cmds='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -msym -soname $soname `test -n \"$verstring\" && echo -set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'\n+    fi\n+    hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+    hardcode_libdir_separator=:\n+    ;;\n+\n+  sco3.2v5*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_shlibpath_var=no\n+    runpath_var=LD_RUN_PATH\n+    hardcode_runpath_var=yes\n+    ;;\n+\n+  solaris*)\n+    no_undefined_flag=' -z text'\n+    # $CC -shared without GNU ld will not create a library from C++\n+    # object files and a static libstdc++, better avoid it by now\n+    archive_cmds='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    archive_expsym_cmds='$echo \"{ global:\" > $lib.exp~cat $export_symbols | sed -e \"s/\\(.*\\)/\\1;/\" >> $lib.exp~$echo \"local: *; };\" >> $lib.exp~\n+\t\t$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'\n+    hardcode_libdir_flag_spec='-R$libdir'\n+    hardcode_shlibpath_var=no\n+    case \"$host_os\" in\n+    solaris2.[0-5] | solaris2.[0-5].*) ;;\n+    *) # Supported since Solaris 2.6 (maybe 2.5.1?)\n+      whole_archive_flag_spec='-z allextract$convenience -z defaultextract' ;;\n+    esac\n+    link_all_deplibs=yes\n+    ;;\n+\n+  sunos4*)\n+    archive_cmds='$LD -assert pure-text -Bstatic -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_direct=yes\n+    hardcode_minus_L=yes\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  sysv4)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    runpath_var='LD_RUN_PATH'\n+    hardcode_shlibpath_var=no\n+    hardcode_direct=no #Motorola manual says yes, but my tests say they lie\n+    ;;\n+\n+  sysv4.3*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_shlibpath_var=no\n+    export_dynamic_flag_spec='-Bexport'\n+    ;;\n+\n+  sysv5*)\n+    no_undefined_flag=' -z text'\n+    # $CC -shared without GNU ld will not create a library from C++\n+    # object files and a static libstdc++, better avoid it by now\n+    archive_cmds='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    archive_expsym_cmds='$echo \"{ global:\" > $lib.exp~cat $export_symbols | sed -e \"s/\\(.*\\)/\\1;/\" >> $lib.exp~$echo \"local: *; };\" >> $lib.exp~\n+\t\t$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'\n+    hardcode_libdir_flag_spec=\n+    hardcode_shlibpath_var=no\n+    runpath_var='LD_RUN_PATH'\n+    ;;\n+\n+  uts4*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  dgux*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  sysv4*MP*)\n+    if test -d /usr/nec; then\n+      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+      hardcode_shlibpath_var=no\n+      runpath_var=LD_RUN_PATH\n+      hardcode_runpath_var=yes\n+      ld_shlibs=yes\n+    fi\n+    ;;\n+\n+  sysv4.2uw2*)\n+    archive_cmds='$LD -G -o $lib $libobjs $deplibs $linker_flags'\n+    hardcode_direct=yes\n+    hardcode_minus_L=no\n+    hardcode_shlibpath_var=no\n+    hardcode_runpath_var=yes\n+    runpath_var=LD_RUN_PATH\n+    ;;\n+\n+  unixware7*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'\n+    runpath_var='LD_RUN_PATH'\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  *)\n+    ld_shlibs=no\n+    ;;\n+  esac\n+fi\n+\n+## Compiler Characteristics: PIC flags, static flags, etc\n+\n+# We don't use cached values here since only the C compiler\n+# characteristics should be cached.\n+  ac_cv_prog_cc_pic=\n+  ac_cv_prog_cc_shlib=\n+  ac_cv_prog_cc_wl=\n+  ac_cv_prog_cc_static=\n+  ac_cv_prog_cc_no_builtin=\n+  ac_cv_prog_cc_can_build_shared=$can_build_shared\n+\n+    ac_cv_prog_cc_wl='-Wl,'\n+    ac_cv_prog_cc_static='-static'\n+\n+    case \"$host_os\" in\n+    beos* | irix5* | irix6* | osf3* | osf4* | osf5*)\n+      # PIC is the default for these OSes.\n+      ;;\n+    aix*)\n+      # Below there is a dirty hack to force normal static linking with -ldl\n+      # The problem is because libdl dynamically linked with both libc and\n+      # libC (AIX C++ library), which obviously doesn't included in libraries\n+      # list by gcc. This cause undefined symbols with -static flags.\n+      # This hack allows C programs to be linked with \"-static -ldl\", but\n+      # we not sure about C++ programs.\n+      ac_cv_prog_cc_static=\"$ac_cv_prog_cc_static ${ac_cv_prog_cc_wl}-lC\"\n+      ;;\n+    cygwin* | mingw* | os2*)\n+      # This hack is so that the source file can tell whether it is being\n+      # built for inclusion in a dll (and should export symbols for example).\n+      ac_cv_prog_cc_pic='-DDLL_EXPORT'\n+      ;;\n+    amigaos*)\n+      # FIXME: we need at least 68020 code to build shared libraries, but\n+      # adding the `-m68020' flag to GCC prevents building anything better,\n+      # like `-m68040'.\n+      ac_cv_prog_cc_pic='-m68020 -resident32 -malways-restore-a4'\n+      ;;\n+    sysv4*MP*)\n+      if test -d /usr/nec; then\n+\t ac_cv_prog_cc_pic=-Kconform_pic\n+      fi\n+      ;;\n+    *)\n+      ac_cv_prog_cc_pic='-fPIC'\n+      ;;\n+    esac\n+\n+# GCJ did not exist at the time GCC didn't implicitly link libc in.\n+need_lc=no"}, {"sha": "da18cc917c72fa97d47a37a063bc183bccf48c04", "filename": "ltconfig", "status": "modified", "additions": 899, "deletions": 1379, "changes": 2278, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ltconfig", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ltconfig", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ltconfig?ref=4f4caf92a3c88fe811269a03a0b0793bdb02f919"}, {"sha": "81108af1cb0eb3da1596c790d2657fe59e1697df", "filename": "ltmain.sh", "status": "modified", "additions": 1801, "deletions": 842, "changes": 2643, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ltmain.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f4caf92a3c88fe811269a03a0b0793bdb02f919/ltmain.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ltmain.sh?ref=4f4caf92a3c88fe811269a03a0b0793bdb02f919"}]}