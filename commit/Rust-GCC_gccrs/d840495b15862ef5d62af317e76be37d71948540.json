{"sha": "d840495b15862ef5d62af317e76be37d71948540", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDg0MDQ5NWIxNTg2MmVmNWQ2MmFmMzE3ZTc2YmUzN2Q3MTk0ODU0MA==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "rakdver@atrey.karlin.mff.cuni.cz", "date": "2004-09-14T07:49:04Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2004-09-14T07:49:04Z"}, "message": "tree-cfg.c (thread_jumps): Update dominators correctly in case destination of threaded edge dominates its...\n\n\t* tree-cfg.c (thread_jumps): Update dominators correctly in\n\tcase destination of threaded edge dominates its source.\n\nFrom-SVN: r87486", "tree": {"sha": "a20a3b9b479fd8cd277dcc9ae9b4528ef2716a74", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a20a3b9b479fd8cd277dcc9ae9b4528ef2716a74"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d840495b15862ef5d62af317e76be37d71948540", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d840495b15862ef5d62af317e76be37d71948540", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d840495b15862ef5d62af317e76be37d71948540", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d840495b15862ef5d62af317e76be37d71948540/comments", "author": null, "committer": null, "parents": [{"sha": "c94583fe5577f83df48b156f86d9d36dcb218dbe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c94583fe5577f83df48b156f86d9d36dcb218dbe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c94583fe5577f83df48b156f86d9d36dcb218dbe"}], "stats": {"total": 57, "additions": 54, "deletions": 3}, "files": [{"sha": "b666c83777dcbae22b28b07bdca081cecee2e104", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d840495b15862ef5d62af317e76be37d71948540/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d840495b15862ef5d62af317e76be37d71948540/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d840495b15862ef5d62af317e76be37d71948540", "patch": "@@ -1,3 +1,8 @@\n+2004-09-14  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n+\n+\t* tree-cfg.c (thread_jumps): Update dominators correctly in\n+\tcase destination of threaded edge dominates its source.\n+\n 2004-09-14  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n \n \t* unroll.c: Removed."}, {"sha": "02953de7b63dd4b4937cd5fa77ae3db9248551b7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d840495b15862ef5d62af317e76be37d71948540/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d840495b15862ef5d62af317e76be37d71948540/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d840495b15862ef5d62af317e76be37d71948540", "patch": "@@ -1,3 +1,7 @@\n+2004-09-14  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n+\n+\t* gcc.c-torture/compile/20040914-1.c: New test.\n+\n 2004-09-13  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/16162"}, {"sha": "824664c889b27b78ec3ac30a33e574250b80559f", "filename": "gcc/testsuite/gcc.c-torture/compile/20040914-1.c", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d840495b15862ef5d62af317e76be37d71948540/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040914-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d840495b15862ef5d62af317e76be37d71948540/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040914-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040914-1.c?ref=d840495b15862ef5d62af317e76be37d71948540", "patch": "@@ -0,0 +1,39 @@\n+extern int clobber_k (int *); \n+extern int barrier (void); \n+int t, u; \n+\n+int\n+process_second_stream(void) \n+{ \n+  int k; \n+  int i = 0, j = 0, result; \n+ \n+  clobber_k (&k); \n+ \n+  while(t)\n+    ;\n+ \n+  while(!j) \n+    {\n+      while(!j) \n+\t{ \n+\t  barrier (); \n+\t  if (t == 0) \n+\t    break; \n+\t  else if(t == 1) \n+\t    t = 2; \n+\t  else \n+\t    {\n+\t      if(t < 0) \n+\t\tj=1; \n+\t      if(u < 0) \n+\t\tk = i++; \n+\t    }\n+\t} \n+ \n+      if(!j && u) \n+\tj=1; \n+    } \n+ \n+  return 0; \n+} "}, {"sha": "6f21467ca10f37c640fe2a51aabea9693d01ca4c", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d840495b15862ef5d62af317e76be37d71948540/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d840495b15862ef5d62af317e76be37d71948540/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=d840495b15862ef5d62af317e76be37d71948540", "patch": "@@ -3970,17 +3970,20 @@ thread_jumps (void)\n \t\tset_immediate_dominator (CDI_DOMINATORS, old_dest, bb);\n \n \t      /* Now proceed like if we forwarded just over one edge at a time.\n-\t\t Algorithm for forwarding over edge A --> B then is\n+\t\t Algorithm for forwarding edge S --> A over edge A --> B then\n+\t\t is\n \n-\t\t if (idom (B) == A)\n+\t\t if (idom (B) == A\n+\t\t     && !dominated_by (S, B))\n \t\t   idom (B) = idom (A);\n \t\t recount_idom (A);  */\n \n \t      for (; old_dest != dest; old_dest = tmp)\n \t\t{\n \t\t  tmp = old_dest->succ->dest;\n \n-\t\t  if (get_immediate_dominator (CDI_DOMINATORS, tmp) == old_dest)\n+\t\t  if (get_immediate_dominator (CDI_DOMINATORS, tmp) == old_dest\n+\t\t      && !dominated_by_p (CDI_DOMINATORS, bb, tmp))\n \t\t    {\n \t\t      dom = get_immediate_dominator (CDI_DOMINATORS, old_dest);\n   \t\t      set_immediate_dominator (CDI_DOMINATORS, tmp, dom);"}]}