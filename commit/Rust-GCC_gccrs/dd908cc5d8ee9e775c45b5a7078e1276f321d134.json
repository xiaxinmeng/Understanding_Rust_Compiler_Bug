{"sha": "dd908cc5d8ee9e775c45b5a7078e1276f321d134", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ5MDhjYzVkOGVlOWU3NzVjNDViNWE3MDc4ZTEyNzZmMzIxZDEzNA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2013-12-26T16:10:55Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2013-12-26T16:10:55Z"}, "message": "Don't check/change generic/i686 tuning\n\ngcc/\n\n\tPR target/59588\n\t* config/i386/i386.c (ix86_option_override_internal): Don't\n\tcheck generic tuning.  Don't change i686 tuning.\n\ngcc/testsuite/\n\n\tPR target/59588\n\t* gcc.target/i386/pr59588-1.c: New file.\n\t* gcc.target/i386/pr59588-2.c: Likewise.\n\nFrom-SVN: r206213", "tree": {"sha": "5e04ea8d3cc906ed0fbca194c85c51b9f43c8ef5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5e04ea8d3cc906ed0fbca194c85c51b9f43c8ef5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd908cc5d8ee9e775c45b5a7078e1276f321d134", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd908cc5d8ee9e775c45b5a7078e1276f321d134", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd908cc5d8ee9e775c45b5a7078e1276f321d134", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd908cc5d8ee9e775c45b5a7078e1276f321d134/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "806ac507476f414a3accae49e8ced8789a2190a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/806ac507476f414a3accae49e8ced8789a2190a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/806ac507476f414a3accae49e8ced8789a2190a3"}], "stats": {"total": 46, "additions": 30, "deletions": 16}, "files": [{"sha": "d8c272afb26584c0bfe9ef6ad0ba80230437dcae", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd908cc5d8ee9e775c45b5a7078e1276f321d134/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd908cc5d8ee9e775c45b5a7078e1276f321d134/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dd908cc5d8ee9e775c45b5a7078e1276f321d134", "patch": "@@ -1,3 +1,9 @@\n+2013-12-26   H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/59588\n+\t* config/i386/i386.c (ix86_option_override_internal): Don't\n+\tcheck generic tuning.  Don't change i686 tuning.\n+\n 2013-12-26   H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/59601"}, {"sha": "0cf0a9da0a2fb124579022e6c0b947795776125c", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 4, "deletions": 16, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd908cc5d8ee9e775c45b5a7078e1276f321d134/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd908cc5d8ee9e775c45b5a7078e1276f321d134/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=dd908cc5d8ee9e775c45b5a7078e1276f321d134", "patch": "@@ -3283,23 +3283,13 @@ ix86_option_override_internal (bool main_args_p,\n   /* Need to check -mtune=generic first.  */\n   if (opts->x_ix86_tune_string)\n     {\n-      if (!strcmp (opts->x_ix86_tune_string, \"generic\")\n-\t  || !strcmp (opts->x_ix86_tune_string, \"i686\")\n-\t  /* As special support for cross compilers we read -mtune=native\n+      /* As special support for cross compilers we read -mtune=native\n \t     as -mtune=generic.  With native compilers we won't see the\n \t     -mtune=native, as it was changed by the driver.  */\n-\t  || !strcmp (opts->x_ix86_tune_string, \"native\"))\n+      if (!strcmp (opts->x_ix86_tune_string, \"native\"))\n \t{\n \t  opts->x_ix86_tune_string = \"generic\";\n \t}\n-      /* If this call is for setting the option attribute, allow the\n-\t generic that was previously set.  */\n-      else if (!main_args_p\n-\t       && !strcmp (opts->x_ix86_tune_string, \"generic\"))\n-\t;\n-      else if (!strncmp (opts->x_ix86_tune_string, \"generic\", 7))\n-        error (\"bad value (%s) for %stune=%s %s\",\n-\t       opts->x_ix86_tune_string, prefix, suffix, sw);\n       else if (!strcmp (opts->x_ix86_tune_string, \"x86-64\"))\n         warning (OPT_Wdeprecated, \"%stune=x86-64%s is deprecated; use \"\n                  \"%stune=k8%s or %stune=generic%s instead as appropriate\",\n@@ -3318,9 +3308,7 @@ ix86_option_override_internal (bool main_args_p,\n \n       /* opts->x_ix86_tune_string is set to opts->x_ix86_arch_string\n \t or defaulted.  We need to use a sensible tune option.  */\n-      if (!strcmp (opts->x_ix86_tune_string, \"generic\")\n-\t  || !strcmp (opts->x_ix86_tune_string, \"x86-64\")\n-\t  || !strcmp (opts->x_ix86_tune_string, \"i686\"))\n+      if (!strcmp (opts->x_ix86_tune_string, \"x86-64\"))\n \t{\n \t  opts->x_ix86_tune_string = \"generic\";\n \t}\n@@ -3600,7 +3588,7 @@ ix86_option_override_internal (bool main_args_p,\n   else if (!strcmp (opts->x_ix86_arch_string, \"intel\"))\n     error (\"intel CPU can be used only for %stune=%s %s\",\n \t   prefix, suffix, sw);\n-  else if (!strncmp (opts->x_ix86_arch_string, \"generic\", 7) || i == pta_size)\n+  else if (i == pta_size)\n     error (\"bad value (%s) for %sarch=%s %s\",\n \t   opts->x_ix86_arch_string, prefix, suffix, sw);\n "}, {"sha": "c64a5522c7ca02c274272f8715c30bd087a846ee", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd908cc5d8ee9e775c45b5a7078e1276f321d134/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd908cc5d8ee9e775c45b5a7078e1276f321d134/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dd908cc5d8ee9e775c45b5a7078e1276f321d134", "patch": "@@ -1,3 +1,9 @@\n+2013-12-26   H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/59588\n+\t* gcc.target/i386/pr59588-1.c: New file.\n+\t* gcc.target/i386/pr59588-2.c: Likewise.\n+\n 2013-12-26   Uros Bizjak  <ubizjak@gmail.com>\n \t     H.J. Lu  <hongjiu.lu@intel.com>\n "}, {"sha": "6f5fb7238cada1967a0a0713c3e14dafdf56933a", "filename": "gcc/testsuite/gcc.target/i386/pr59588-1.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd908cc5d8ee9e775c45b5a7078e1276f321d134/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr59588-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd908cc5d8ee9e775c45b5a7078e1276f321d134/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr59588-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr59588-1.c?ref=dd908cc5d8ee9e775c45b5a7078e1276f321d134", "patch": "@@ -0,0 +1,7 @@\n+/* { dg-do preprocess } */\n+/* { dg-require-effective-target ia32 } */\n+/* { dg-options \"-march=i686\" } */\n+\n+#ifndef __tune_i686__\n+#error \"__tune_i686__ should be defined for this test\"\n+#endif"}, {"sha": "7c427e3e1cb14da64f2af22420dbcf7360ebaf1f", "filename": "gcc/testsuite/gcc.target/i386/pr59588-2.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd908cc5d8ee9e775c45b5a7078e1276f321d134/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr59588-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd908cc5d8ee9e775c45b5a7078e1276f321d134/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr59588-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr59588-2.c?ref=dd908cc5d8ee9e775c45b5a7078e1276f321d134", "patch": "@@ -0,0 +1,7 @@\n+/* { dg-do preprocess } */\n+/* { dg-require-effective-target ia32 } */\n+/* { dg-options \"-mtune=i686\" } */\n+\n+#ifndef __tune_i686__\n+#error \"__tune_i686__ should be defined for this test\"\n+#endif"}]}