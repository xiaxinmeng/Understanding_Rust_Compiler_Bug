{"sha": "db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGI3ZDdkYzE3MzBkNDdmNTgxMzk0MGQ5N2NhNjBjZDZmZmE0ZTJlYg==", "commit": {"author": {"name": "Daniel Franke", "email": "franke.daniel@gmail.com", "date": "2010-05-07T15:36:45Z"}, "committer": {"name": "Daniel Franke", "email": "dfranke@gcc.gnu.org", "date": "2010-05-07T15:36:45Z"}, "message": "re PR fortran/40728 (Bogus error \"Error: Can't convert UNKNOWN to REAL(8) at (1)\")\n\ngcc/fortran/:\n2010-05-07  Daniel Franke  <franke.daniel@gmail.com>\n\n\tPR fortran/40728\n\t* intrinc.c (gfc_is_intrinsic): Do not prematurely mark symbol\n        as external\n\n\ngcc/testsuite/:\n2010-05-07  Daniel Franke  <franke.daniel@gmail.com>\n\n        PR fortran/40728\n        * gfortran.dg/coarray_1.f90: Fixed error message.\n        * gfortran.dg/selected_char_kind_3.f90: Fixed error message.\n        * gfortran.dg/intrinsic_std_1.f90: Fixed bogus message.\n        * gfortran.dg/intrinsic_std_5.f90: New.\n\nFrom-SVN: r159155", "tree": {"sha": "2c105858d2fbab3d0a32475b4724e1ab345ebbf8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2c105858d2fbab3d0a32475b4724e1ab345ebbf8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/comments", "author": {"login": "dfranke76", "id": 15729164, "node_id": "MDQ6VXNlcjE1NzI5MTY0", "avatar_url": "https://avatars.githubusercontent.com/u/15729164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dfranke76", "html_url": "https://github.com/dfranke76", "followers_url": "https://api.github.com/users/dfranke76/followers", "following_url": "https://api.github.com/users/dfranke76/following{/other_user}", "gists_url": "https://api.github.com/users/dfranke76/gists{/gist_id}", "starred_url": "https://api.github.com/users/dfranke76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dfranke76/subscriptions", "organizations_url": "https://api.github.com/users/dfranke76/orgs", "repos_url": "https://api.github.com/users/dfranke76/repos", "events_url": "https://api.github.com/users/dfranke76/events{/privacy}", "received_events_url": "https://api.github.com/users/dfranke76/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2cd5965fa3cd3586a642e75c76a256f36f8a99d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2cd5965fa3cd3586a642e75c76a256f36f8a99d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2cd5965fa3cd3586a642e75c76a256f36f8a99d0"}], "stats": {"total": 64, "additions": 50, "deletions": 14}, "files": [{"sha": "97e002a1a1981159c1e9d77d255ac8df4c500f7a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb", "patch": "@@ -1,3 +1,9 @@\n+2010-05-07  Daniel Franke  <franke.daniel@gmail.com>\n+\n+\tPR fortran/40728\n+\t* intrinc.c (gfc_is_intrinsic): Do not prematurely mark symbol\n+        as external\n+\n 2010-05-07  Jason Merrill  <jason@redhat.com>\n \n \t* trans-expr.c (gfc_conv_procedure_call): Rename nullptr to null_ptr\n@@ -17,6 +23,7 @@\n \n 2010-05-05  Daniel Franke  <franke.daniel@gmail.com>\n \n+\tPR fortran/32331\n \t* resolve.c (traverse_data_list): Rephrase error message for\n \tnon-constant bounds in data-implied-do.\n "}, {"sha": "e8041eb9b9a14415247c3ae9726a3a1b99053133", "filename": "gcc/fortran/intrinsic.c", "status": "modified", "additions": 8, "deletions": 11, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ffortran%2Fintrinsic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ffortran%2Fintrinsic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fintrinsic.c?ref=db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb", "patch": "@@ -956,17 +956,14 @@ gfc_is_intrinsic (gfc_symbol* sym, int subroutine_flag, locus loc)\n   /* See if this intrinsic is allowed in the current standard.  */\n   if (gfc_check_intrinsic_standard (isym, &symstd, false, loc) == FAILURE)\n     {\n-      if (sym->attr.proc == PROC_UNKNOWN)\n-\t{\n-\t  if (gfc_option.warn_intrinsics_std)\n-\t    gfc_warning_now (\"The intrinsic '%s' at %L is not included in the\"\n-\t\t\t     \" selected standard but %s and '%s' will be\"\n-\t\t\t     \" treated as if declared EXTERNAL.  Use an\"\n-\t\t\t     \" appropriate -std=* option or define\"\n-\t\t\t     \" -fall-intrinsics to allow this intrinsic.\",\n-\t\t\t     sym->name, &loc, symstd, sym->name);\n-\t  gfc_add_external (&sym->attr, &loc);\n-\t}\n+      if (sym->attr.proc == PROC_UNKNOWN\n+\t  && gfc_option.warn_intrinsics_std)\n+\tgfc_warning_now (\"The intrinsic '%s' at %L is not included in the\"\n+\t\t\t \" selected standard but %s and '%s' will be\"\n+\t\t\t \" treated as if declared EXTERNAL.  Use an\"\n+\t\t\t \" appropriate -std=* option or define\"\n+\t\t\t \" -fall-intrinsics to allow this intrinsic.\",\n+\t\t\t sym->name, &loc, symstd, sym->name);\n \n       return false;\n     }"}, {"sha": "297ae761ddd9d558ab01ad25a45ab0b0cec75eb8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb", "patch": "@@ -1,3 +1,11 @@\n+2010-05-07  Daniel Franke  <franke.daniel@gmail.com>\n+\n+        PR fortran/40728\n+        * gfortran.dg/coarray_1.f90: Fixed error message.\n+        * gfortran.dg/selected_char_kind_3.f90: Fixed error message.\n+        * gfortran.dg/intrinsic_std_1.f90: Fixed bogus message.\n+        * gfortran.dg/intrinsic_std_5.f90: New.\n+\n 2010-05-07  Jason Merrill  <jason@redhat.com>\n \n \t* g++.dg/cpp0x/nullptr20.C: Use sprintf."}, {"sha": "7fd4c84240f2cc2e6ee0f9e0cb7c890b61a22fed", "filename": "gcc/testsuite/gfortran.dg/coarray_1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_1.f90?ref=db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb", "patch": "@@ -13,6 +13,6 @@\n sync images(*)  ! { dg-error \"Fortran 2008:\" }\n \n ! num_images is implicitly defined:\n-n = num_images()  ! { dg-error \"convert UNKNOWN to INTEGER\" }\n+n = num_images()  ! { dg-error \"has no IMPLICIT type\" }\n error stop 'stop'  ! { dg-error \"Fortran 2008:\" }\n end"}, {"sha": "290b54c2cb449f6131c085f19dfce6b344081ea5", "filename": "gcc/testsuite/gfortran.dg/intrinsic_std_1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ftestsuite%2Fgfortran.dg%2Fintrinsic_std_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ftestsuite%2Fgfortran.dg%2Fintrinsic_std_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fintrinsic_std_1.f90?ref=db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb", "patch": "@@ -20,7 +20,7 @@ SUBROUTINE no_implicit\n   ! ASINH is an intrinsic of F2008\n   ! The warning should be issued in the declaration above where it is declared\n   ! EXTERNAL.\n-  WRITE (*,*) ASINH (1.) ! { dg-bogus \"Fortran 2008\" }\n+  WRITE (*,*) ASINH (1.) ! { dg-warning \"Fortran 2008\" }\n END SUBROUTINE no_implicit\n \n SUBROUTINE implicit_type"}, {"sha": "f5c0f2d9d55645f4a1f1ce8f17961576d702734c", "filename": "gcc/testsuite/gfortran.dg/intrinsic_std_5.f03", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ftestsuite%2Fgfortran.dg%2Fintrinsic_std_5.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ftestsuite%2Fgfortran.dg%2Fintrinsic_std_5.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fintrinsic_std_5.f03?ref=db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb", "patch": "@@ -0,0 +1,24 @@\n+! { dg-do compile }\n+! { dg-options \"-std=f2003\" }\n+!\n+! PR fortran/40728\n+!\n+\n+! bogus error\n+SUBROUTINE s1\n+  IMPLICIT NONE\n+  real(4), volatile :: r4\n+\n+  r4 = 0.0_4\n+  r4 = asinh(r4)         ! { dg-error \"has no IMPLICIT type\" }\n+END SUBROUTINE\n+\n+\n+\n+! ICE on invalid (ATANH is defined by F2008 only)\n+SUBROUTINE s2\n+  IMPLICIT NONE\n+  real :: r\n+  r = 0.4\n+  print *, atanh(r)      ! { dg-error \"has no IMPLICIT type\" }\n+END SUBROUTINE"}, {"sha": "fad5e46c287b7dcfb9a886e87d1c503614cf6ccc", "filename": "gcc/testsuite/gfortran.dg/selected_char_kind_3.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ftestsuite%2Fgfortran.dg%2Fselected_char_kind_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb/gcc%2Ftestsuite%2Fgfortran.dg%2Fselected_char_kind_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fselected_char_kind_3.f90?ref=db7d7dc1730d47f5813940d97ca60cd6ffa4e2eb", "patch": "@@ -4,7 +4,7 @@\n ! Check that SELECTED_CHAR_KIND is rejected with -std=f95\n !\n   implicit none\n-  character(kind=selected_char_kind(\"ascii\")) :: s ! { dg-error \"must be an intrinsic function\" }\n+  character(kind=selected_char_kind(\"ascii\")) :: s ! { dg-error \"has no IMPLICIT type\" }\n   s = \"\" ! { dg-error \"has no IMPLICIT type\" }\n   print *, s\n end"}]}