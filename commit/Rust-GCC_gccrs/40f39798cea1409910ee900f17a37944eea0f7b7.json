{"sha": "40f39798cea1409910ee900f17a37944eea0f7b7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDBmMzk3OThjZWExNDA5OTEwZWU5MDBmMTdhMzc5NDRlZWEwZjdiNw==", "commit": {"author": {"name": "Zuxy Meng", "email": "zuxy.meng@gmail.com", "date": "2008-04-14T23:47:39Z"}, "committer": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2008-04-14T23:47:39Z"}, "message": "re PR target/35661 (__attribute__((cold)) generates wrong code)\n\n2008-04-16  Zuxy Meng  <zuxy.meng@gmail.com>\n\n\tPR target/35661\n\t* config/i386/winnt.c (i386_pe_section_type_flags): Mark\n\t\".text.unlikely\" section as executable.\n\nFrom-SVN: r134296", "tree": {"sha": "c03939e161466008cf104067ba245f0ec53745ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c03939e161466008cf104067ba245f0ec53745ca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/40f39798cea1409910ee900f17a37944eea0f7b7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40f39798cea1409910ee900f17a37944eea0f7b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40f39798cea1409910ee900f17a37944eea0f7b7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40f39798cea1409910ee900f17a37944eea0f7b7/comments", "author": {"login": "zuxy", "id": 3745922, "node_id": "MDQ6VXNlcjM3NDU5MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3745922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zuxy", "html_url": "https://github.com/zuxy", "followers_url": "https://api.github.com/users/zuxy/followers", "following_url": "https://api.github.com/users/zuxy/following{/other_user}", "gists_url": "https://api.github.com/users/zuxy/gists{/gist_id}", "starred_url": "https://api.github.com/users/zuxy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zuxy/subscriptions", "organizations_url": "https://api.github.com/users/zuxy/orgs", "repos_url": "https://api.github.com/users/zuxy/repos", "events_url": "https://api.github.com/users/zuxy/events{/privacy}", "received_events_url": "https://api.github.com/users/zuxy/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "07acc7b3e198ab2b21bbe47f3d16e2820e4990cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "0109eadc12564c54d2cd81e68a01c5c1de78859a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40f39798cea1409910ee900f17a37944eea0f7b7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40f39798cea1409910ee900f17a37944eea0f7b7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=40f39798cea1409910ee900f17a37944eea0f7b7", "patch": "@@ -1,3 +1,9 @@\n+2008-04-16  Zuxy Meng  <zuxy.meng@gmail.com>\n+\n+\tPR target/35661\n+\t* config/i386/winnt.c (i386_pe_section_type_flags): Mark\n+\t\".text.unlikely\" section as executable.\n+\n 2008-04-14  James E. Wilson  <wilson@tuliptree.org>\n \n \t* config/ia64/ia64.c (rtx_needs_barrier): Handle"}, {"sha": "35d7f9f9eaceb1136f492f670c942d9860fafded", "filename": "gcc/config/i386/winnt.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40f39798cea1409910ee900f17a37944eea0f7b7/gcc%2Fconfig%2Fi386%2Fwinnt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40f39798cea1409910ee900f17a37944eea0f7b7/gcc%2Fconfig%2Fi386%2Fwinnt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwinnt.c?ref=40f39798cea1409910ee900f17a37944eea0f7b7", "patch": "@@ -420,6 +420,15 @@ i386_pe_section_type_flags (tree decl, const char *name, int reloc)\n     flags = SECTION_CODE;\n   else if (decl && decl_readonly_section (decl, reloc))\n     flags = 0;\n+  else if (current_function_decl\n+\t   && cfun\n+\t   && crtl->subsections.unlikely_text_section_name\n+\t   && strcmp (name, crtl->subsections.unlikely_text_section_name) == 0)\n+    flags = SECTION_CODE;\n+  else if (!decl\n+\t   && (!current_function_decl || !cfun)\n+\t   && strcmp (name, UNLIKELY_EXECUTED_TEXT_SECTION_NAME) == 0)\n+    flags = SECTION_CODE;\n   else\n     {\n       flags = SECTION_WRITE;"}]}