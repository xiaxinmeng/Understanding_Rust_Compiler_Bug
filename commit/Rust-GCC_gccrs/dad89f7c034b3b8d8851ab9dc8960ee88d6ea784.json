{"sha": "dad89f7c034b3b8d8851ab9dc8960ee88d6ea784", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGFkODlmN2MwMzRiM2I4ZDg4NTFhYjlkYzg5NjBlZTg4ZDZlYTc4NA==", "commit": {"author": {"name": "Terry Guo", "email": "terry.guo@arm.com", "date": "2013-04-19T06:38:32Z"}, "committer": {"name": "Xuepeng Guo", "email": "xguo@gcc.gnu.org", "date": "2013-04-19T06:38:32Z"}, "message": "cortex-m4-fpu.md (cortex_m4_v): Delete cpu unit.\n\n\t* config/arm/cortex-m4-fpu.md (cortex_m4_v): Delete cpu unit.\n\tReplace with ...\n\t(cortex_m4_v_a,  cortex_m4_v_b): ... new cpu units.\n\t(cortex_m4_v, cortex_m4_exa_va, cortex_m4_exb_vb): New reservations.\n\t(cortex_m4_fmacs): Use new reservations.\n\t(cortex_m4_f_load, cortex_m4_f_store): Likewise.\n\nFrom-SVN: r198084", "tree": {"sha": "a1c45d14311abfd9c7aae4ca59f3726ee37676cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a1c45d14311abfd9c7aae4ca59f3726ee37676cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dad89f7c034b3b8d8851ab9dc8960ee88d6ea784", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dad89f7c034b3b8d8851ab9dc8960ee88d6ea784", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dad89f7c034b3b8d8851ab9dc8960ee88d6ea784", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dad89f7c034b3b8d8851ab9dc8960ee88d6ea784/comments", "author": null, "committer": null, "parents": [{"sha": "f1e6512ce3f7fbc4cc8721cbe521ed03905fe67e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1e6512ce3f7fbc4cc8721cbe521ed03905fe67e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1e6512ce3f7fbc4cc8721cbe521ed03905fe67e"}], "stats": {"total": 27, "additions": 21, "deletions": 6}, "files": [{"sha": "77b8e2b9bb3040d825c7fd8acf18e5d6fcb1f821", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dad89f7c034b3b8d8851ab9dc8960ee88d6ea784/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dad89f7c034b3b8d8851ab9dc8960ee88d6ea784/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dad89f7c034b3b8d8851ab9dc8960ee88d6ea784", "patch": "@@ -1,3 +1,12 @@\n+2013-04-19  Terry Guo  <terry.guo@arm.com>\n+\n+\t* config/arm/cortex-m4-fpu.md (cortex_m4_v): Delete cpu unit.\n+\tReplace with ...\n+\t(cortex_m4_v_a,  cortex_m4_v_b): ... new cpu units.\n+\t(cortex_m4_v, cortex_m4_exa_va, cortex_m4_exb_vb): New reservations.\n+\t(cortex_m4_fmacs): Use new reservations.\n+\t(cortex_m4_f_load, cortex_m4_f_store): Likewise.\n+\n 2013-04-18  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR rtl-optimization/56999"}, {"sha": "4ce3f10f0debac5d9888e56d757986f60d947a73", "filename": "gcc/config/arm/cortex-m4-fpu.md", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dad89f7c034b3b8d8851ab9dc8960ee88d6ea784/gcc%2Fconfig%2Farm%2Fcortex-m4-fpu.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dad89f7c034b3b8d8851ab9dc8960ee88d6ea784/gcc%2Fconfig%2Farm%2Fcortex-m4-fpu.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fcortex-m4-fpu.md?ref=dad89f7c034b3b8d8851ab9dc8960ee88d6ea784", "patch": "@@ -18,10 +18,14 @@\n ;; along with GCC; see the file COPYING3.  If not see\n ;; <http://www.gnu.org/licenses/>.\n \n-;; Use an artifial unit to model FPU.\n-(define_cpu_unit \"cortex_m4_v\" \"cortex_m4\")\n+;; Use two artificial units to model FPU.\n+(define_cpu_unit \"cortex_m4_v_a\" \"cortex_m4\")\n+(define_cpu_unit \"cortex_m4_v_b\" \"cortex_m4\")\n \n+(define_reservation \"cortex_m4_v\" \"cortex_m4_v_a+cortex_m4_v_b\")\n (define_reservation \"cortex_m4_ex_v\" \"cortex_m4_ex+cortex_m4_v\")\n+(define_reservation \"cortex_m4_exa_va\" \"cortex_m4_a+cortex_m4_v_a\")\n+(define_reservation \"cortex_m4_exb_vb\" \"cortex_m4_b+cortex_m4_v_b\")\n \n ;; Integer instructions following VDIV or VSQRT complete out-of-order.\n (define_insn_reservation \"cortex_m4_fdivs\" 15\n@@ -44,10 +48,12 @@\n        (eq_attr \"type\" \"fmuls\"))\n   \"cortex_m4_ex_v\")\n \n+;; Integer instructions following multiply-accumulate instructions\n+;; complete out-of-order.\n (define_insn_reservation \"cortex_m4_fmacs\" 4\n   (and (eq_attr \"tune\" \"cortexm4\")\n        (eq_attr \"type\" \"fmacs,ffmas\"))\n-  \"cortex_m4_ex_v*3\")\n+  \"cortex_m4_ex_v,cortex_m4_v*2\")\n \n (define_insn_reservation \"cortex_m4_ffariths\" 1\n   (and (eq_attr \"tune\" \"cortexm4\")\n@@ -77,12 +83,12 @@\n (define_insn_reservation \"cortex_m4_f_load\" 2\n   (and (eq_attr \"tune\" \"cortexm4\")\n        (eq_attr \"type\" \"f_loads\"))\n-  \"cortex_m4_ex_v*2\")\n+  \"cortex_m4_exa_va,cortex_m4_exb_vb\")\n \n-(define_insn_reservation \"cortex_m4_f_store\" 2\n+(define_insn_reservation \"cortex_m4_f_store\" 1\n   (and (eq_attr \"tune\" \"cortexm4\")\n        (eq_attr \"type\" \"f_stores\"))\n-  \"cortex_m4_ex_v*2\")\n+  \"cortex_m4_exa_va\")\n \n (define_insn_reservation \"cortex_m4_f_loadd\" 3\n   (and (eq_attr \"tune\" \"cortexm4\")"}]}