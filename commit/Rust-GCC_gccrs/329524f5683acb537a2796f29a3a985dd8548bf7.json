{"sha": "329524f5683acb537a2796f29a3a985dd8548bf7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzI5NTI0ZjU2ODNhY2I1MzdhMjc5NmYyOWEzYTk4NWRkODU0OGJmNw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2015-08-18T14:38:51Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2015-08-18T14:38:51Z"}, "message": "re PR c++/67160 (static_assert feature test macro)\n\nc-family/\n2015-08-18  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/67160\n\t* c-cppbuiltin.c (c_cpp_builtins): Fix __cpp_static_assert value\n\tin c++1z mode.\n\ntestsuite/\n2015-08-18  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/67160\n\t* g++.dg/cpp1z/feat-cxx1z.C: New.\n\nFrom-SVN: r226972", "tree": {"sha": "90e6b9dd5e6bcbeae6d2e922632eb8e97aae42e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/90e6b9dd5e6bcbeae6d2e922632eb8e97aae42e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/329524f5683acb537a2796f29a3a985dd8548bf7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/329524f5683acb537a2796f29a3a985dd8548bf7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/329524f5683acb537a2796f29a3a985dd8548bf7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/329524f5683acb537a2796f29a3a985dd8548bf7/comments", "author": null, "committer": null, "parents": [{"sha": "41dd7cf7479cd0051e4a7baa7e680d7bb02af331", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41dd7cf7479cd0051e4a7baa7e680d7bb02af331", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41dd7cf7479cd0051e4a7baa7e680d7bb02af331"}], "stats": {"total": 31, "additions": 28, "deletions": 3}, "files": [{"sha": "6200d1bc0260c83a79a44edf31fbb38def6578bb", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/329524f5683acb537a2796f29a3a985dd8548bf7/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/329524f5683acb537a2796f29a3a985dd8548bf7/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=329524f5683acb537a2796f29a3a985dd8548bf7", "patch": "@@ -1,3 +1,9 @@\n+2015-08-18  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/67160\n+\t* c-cppbuiltin.c (c_cpp_builtins): Fix __cpp_static_assert value\n+\tin c++1z mode.\n+\n 2015-08-17  Marek Polacek  <polacek@redhat.com>\n \n \t* c-pretty-print.c (pp_c_cv_qualifiers): Remove code dealing"}, {"sha": "0e45a576e9b180c4ab474f94bc8166a9f0880ea7", "filename": "gcc/c-family/c-cppbuiltin.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/329524f5683acb537a2796f29a3a985dd8548bf7/gcc%2Fc-family%2Fc-cppbuiltin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/329524f5683acb537a2796f29a3a985dd8548bf7/gcc%2Fc-family%2Fc-cppbuiltin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-cppbuiltin.c?ref=329524f5683acb537a2796f29a3a985dd8548bf7", "patch": "@@ -832,7 +832,7 @@ c_cpp_builtins (cpp_reader *pfile)\n \n       if (cxx_dialect >= cxx11)\n \t{\n-\t  /* Set feature test macros for C++11  */\n+\t  /* Set feature test macros for C++11.  */\n \t  cpp_define (pfile, \"__cpp_unicode_characters=200704\");\n \t  cpp_define (pfile, \"__cpp_raw_strings=200710\");\n \t  cpp_define (pfile, \"__cpp_unicode_literals=200710\");\n@@ -841,7 +841,8 @@ c_cpp_builtins (cpp_reader *pfile)\n \t  if (cxx_dialect == cxx11)\n \t    cpp_define (pfile, \"__cpp_constexpr=200704\");\n \t  cpp_define (pfile, \"__cpp_range_based_for=200907\");\n-\t  cpp_define (pfile, \"__cpp_static_assert=200410\");\n+\t  if (cxx_dialect <= cxx14)\n+\t    cpp_define (pfile, \"__cpp_static_assert=200410\");\n \t  cpp_define (pfile, \"__cpp_decltype=200707\");\n \t  cpp_define (pfile, \"__cpp_attributes=200809\");\n \t  cpp_define (pfile, \"__cpp_rvalue_reference=200610\");\n@@ -855,7 +856,7 @@ c_cpp_builtins (cpp_reader *pfile)\n \t}\n       if (cxx_dialect > cxx11)\n \t{\n-\t  /* Set feature test macros for C++14  */\n+\t  /* Set feature test macros for C++14.  */\n \t  cpp_define (pfile, \"__cpp_return_type_deduction=201304\");\n \t  cpp_define (pfile, \"__cpp_init_captures=201304\");\n \t  cpp_define (pfile, \"__cpp_generic_lambdas=201304\");\n@@ -865,6 +866,11 @@ c_cpp_builtins (cpp_reader *pfile)\n \t  cpp_define (pfile, \"__cpp_variable_templates=201304\");\n \t  cpp_define (pfile, \"__cpp_digit_separators=201309\");\n \t}\n+      if (cxx_dialect > cxx14)\n+\t{\n+\t  /* Set feature test macros for C++1z.  */\n+\t  cpp_define (pfile, \"__cpp_static_assert=201411\");\n+\t}\n       if (flag_concepts)\n \t/* Use a value smaller than the 201507 specified in\n \t   the TS, since we don't yet support extended auto.  */"}, {"sha": "ede4dc492a6cbbaffa37d8ac704d1c5dab41417f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/329524f5683acb537a2796f29a3a985dd8548bf7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/329524f5683acb537a2796f29a3a985dd8548bf7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=329524f5683acb537a2796f29a3a985dd8548bf7", "patch": "@@ -1,3 +1,8 @@\n+2015-08-18  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/67160\n+\t* g++.dg/cpp1z/feat-cxx1z.C: New.\n+\n 2015-08-18  Marek Polacek  <polacek@redhat.com>\n \n \tPR middle-end/67222"}, {"sha": "b3e742c5f09c5f581cab7866050cf8128eed672e", "filename": "gcc/testsuite/g++.dg/cpp1z/feat-cxx1z.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/329524f5683acb537a2796f29a3a985dd8548bf7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Ffeat-cxx1z.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/329524f5683acb537a2796f29a3a985dd8548bf7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Ffeat-cxx1z.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Ffeat-cxx1z.C?ref=329524f5683acb537a2796f29a3a985dd8548bf7", "patch": "@@ -0,0 +1,8 @@\n+// { dg-do compile }\n+// { dg-options \"-std=c++1z\" }\n+\n+#ifndef __cpp_static_assert\n+#  error \"__cpp_static_assert\"\n+#elif __cpp_static_assert != 201411\n+#  error \"__cpp_static_assert != 201411\"\n+#endif"}]}