{"sha": "ac3b070a2f7c806f1fdd99c409af0e687949ad27", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWMzYjA3MGEyZjdjODA2ZjFmZGQ5OWM0MDlhZjBlNjg3OTQ5YWQyNw==", "commit": {"author": {"name": "Andreas Simbuerger", "email": "simbuerg@fim.uni-passau.de", "date": "2010-08-11T20:30:26Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-08-11T20:30:26Z"}, "message": "Make CLooG options compatible to newer CLooG releases and pass options to build_cloog_prog (CLOOG_ORG).\n\n2010-07-27  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n\n\t* graphite-clast-to-gimple.c (set_cloog_options): Make CLooG options\n\tcompatible to newer CLooG releases (CLOOG_ORG).\n\t(build_cloog_prog): Pass CloogOptions to more functions (CLOOG_ORG).\n\t(scop_to_clast): Pass CloogOptions to build_cloog_prog (CLOOG_ORG).\n\t* graphite-cloog-compat.h: Add compatibility macros for CLooG Legacy.\n\t(build_cloog_prog) : New.\n\t(cloog_program_extract_scalars): New.\n\t(cloog_program_scatter): New.\n\nFrom-SVN: r163162", "tree": {"sha": "0ddec1bbf4f5d279106ff4ee7cf82bf50c7289f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ddec1bbf4f5d279106ff4ee7cf82bf50c7289f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac3b070a2f7c806f1fdd99c409af0e687949ad27", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac3b070a2f7c806f1fdd99c409af0e687949ad27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac3b070a2f7c806f1fdd99c409af0e687949ad27", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac3b070a2f7c806f1fdd99c409af0e687949ad27/comments", "author": {"login": "simbuerg", "id": 598281, "node_id": "MDQ6VXNlcjU5ODI4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/598281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simbuerg", "html_url": "https://github.com/simbuerg", "followers_url": "https://api.github.com/users/simbuerg/followers", "following_url": "https://api.github.com/users/simbuerg/following{/other_user}", "gists_url": "https://api.github.com/users/simbuerg/gists{/gist_id}", "starred_url": "https://api.github.com/users/simbuerg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simbuerg/subscriptions", "organizations_url": "https://api.github.com/users/simbuerg/orgs", "repos_url": "https://api.github.com/users/simbuerg/repos", "events_url": "https://api.github.com/users/simbuerg/events{/privacy}", "received_events_url": "https://api.github.com/users/simbuerg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2bbb190a9863f217a34ff4eff607f324da2f394d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bbb190a9863f217a34ff4eff607f324da2f394d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2bbb190a9863f217a34ff4eff607f324da2f394d"}], "stats": {"total": 47, "additions": 43, "deletions": 4}, "files": [{"sha": "23c82406614e360213a4aff9986a9f046154aac7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac3b070a2f7c806f1fdd99c409af0e687949ad27/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac3b070a2f7c806f1fdd99c409af0e687949ad27/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ac3b070a2f7c806f1fdd99c409af0e687949ad27", "patch": "@@ -1,3 +1,14 @@\n+2010-08-02  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n+\n+\t* graphite-clast-to-gimple.c (set_cloog_options): Make CLooG options\n+\tcompatible to newer CLooG releases (CLOOG_ORG).\n+\t(build_cloog_prog): Pass CloogOptions to more functions (CLOOG_ORG).\n+\t(scop_to_clast): Pass CloogOptions to build_cloog_prog (CLOOG_ORG).\n+\t* graphite-cloog-compat.h: Add compatibility macros for CLooG Legacy.\n+\t(build_cloog_prog) : New.\n+\t(cloog_program_extract_scalars): New.\n+\t(cloog_program_scatter): New.\n+\n 2010-08-02  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n \n \t* graphite-clast-to-gimple.c: Include graphite-cloog-compat.h"}, {"sha": "6361c49413b4e8120f83fc11c7063cc29e06e2c8", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac3b070a2f7c806f1fdd99c409af0e687949ad27/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac3b070a2f7c806f1fdd99c409af0e687949ad27/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=ac3b070a2f7c806f1fdd99c409af0e687949ad27", "patch": "@@ -1,3 +1,14 @@\n+2010-07-27  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n+\n+\t* graphite-clast-to-gimple.c (set_cloog_options): Make CLooG options\n+\tcompatible to newer CLooG releases (CLOOG_ORG).\n+\t(build_cloog_prog): Pass CloogOptions to more functions (CLOOG_ORG).\n+\t(scop_to_clast): Pass CloogOptions to build_cloog_prog (CLOOG_ORG).\n+\t* graphite-cloog-compat.h: Add compatibility macros for CLooG Legacy.\n+\t(build_cloog_prog) : New.\n+\t(cloog_program_extract_scalars): New.\n+\t(cloog_program_scatter): New.\n+\n 2010-07-27  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n \n \t* graphite-clast-to-gimple.c: Include graphite-cloog-compat.h"}, {"sha": "a611ca782e5b106670e26f144be199773892ec75", "filename": "gcc/graphite-clast-to-gimple.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac3b070a2f7c806f1fdd99c409af0e687949ad27/gcc%2Fgraphite-clast-to-gimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac3b070a2f7c806f1fdd99c409af0e687949ad27/gcc%2Fgraphite-clast-to-gimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-clast-to-gimple.c?ref=ac3b070a2f7c806f1fdd99c409af0e687949ad27", "patch": "@@ -1198,7 +1198,7 @@ initialize_cloog_names (scop_p scop, CloogProgram *prog)\n /* Build cloog program for SCoP.  */\n \n static void\n-build_cloog_prog (scop_p scop, CloogProgram *prog)\n+build_cloog_prog (scop_p scop, CloogProgram *prog, CloogOptions *options)\n {\n   int i;\n   int max_nb_loops = scop_max_loop_depth (scop);\n@@ -1277,10 +1277,10 @@ build_cloog_prog (scop_p scop, CloogProgram *prog)\n   cloog_program_set_scaldims (prog, scaldims);\n \n   /* Extract scalar dimensions to simplify the code generation problem.  */\n-  cloog_program_extract_scalars (prog, scattering);\n+  cloog_program_extract_scalars (prog, scattering, options);\n \n   /* Apply scattering.  */\n-  cloog_program_scatter (prog, scattering);\n+  cloog_program_scatter (prog, scattering, options);\n   free_scattering (scattering);\n \n   /* Iterators corresponding to scalar dimensions have to be extracted.  */\n@@ -1321,9 +1321,14 @@ set_cloog_options (void)\n      GLooG.  */\n   options->esp = 1;\n \n+#ifdef CLOOG_ORG\n+  /* Silence CLooG to avoid failing tests due to debug output to stderr.  */\n+  options->quiet = 1;\n+#else\n   /* Enable C pretty-printing mode: normalizes the substitution\n      equations for statements.  */\n   options->cpp = 1;\n+#endif\n \n   /* Allow cloog to build strides with a stride width different to one.\n      This example has stride = 4:\n@@ -1378,7 +1383,7 @@ scop_to_clast (scop_p scop)\n \n   /* Connect new cloog prog generation to graphite.  */\n   pc.prog = cloog_program_malloc ();\n-  build_cloog_prog (scop, pc.prog);\n+  build_cloog_prog (scop, pc.prog, options);\n   pc.prog = cloog_program_generate (pc.prog, options);\n   pc.stmt = cloog_clast_create (pc.prog, options);\n "}, {"sha": "6608318367676c157cc52b243ec5ad2b5752559f", "filename": "gcc/graphite-cloog-compat.h", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac3b070a2f7c806f1fdd99c409af0e687949ad27/gcc%2Fgraphite-cloog-compat.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac3b070a2f7c806f1fdd99c409af0e687949ad27/gcc%2Fgraphite-cloog-compat.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-cloog-compat.h?ref=ac3b070a2f7c806f1fdd99c409af0e687949ad27", "patch": "@@ -22,6 +22,18 @@ along with GCC; see the file COPYING3.  If not see\n #ifndef GRAPHITE_CLOOG_COMPAT_H\n #define GRAPHITE_CLOOG_COMPAT_H\n \n+/* Restore compatibility to CLooG Legacy.  */\n+#ifndef CLOOG_ORG\n+\n+/* CloogOptions compatibility.  */\n+#define build_cloog_prog(SCOP, PROG, OPT) build_cloog_prog (SCOP, PROG)\n+#define cloog_program_extract_scalars(PROG, SCATT, OPT)\\\n+  cloog_program_extract_scalars (PROG, SCATT)\n+#define cloog_program_scatter(PROG, SCATT, OPT)\\\n+  cloog_program_scatter (PROG, SCATT)\n+\n+#endif\n+\n /* Adapt CLooG accessors from CLooG legacy to\n    newer CLooG versions.  */\n "}]}