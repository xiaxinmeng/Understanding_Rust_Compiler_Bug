{"sha": "db38a029ee96491c4a4e42f3acdd02a541994ec1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGIzOGEwMjllZTk2NDkxYzRhNGU0MmYzYWNkZDAyYTU0MTk5NGVjMQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2019-12-19T00:10:47Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2019-12-19T00:10:47Z"}, "message": "PR c++/91165 follow-on tweak\n\nI talked in the PR about possibly stripping the location from the args in\nthe hash table, since if we use the cache the locations would be wrong, but\ndidn't actually do anything about that.  Then I noticed that there's already\nunshare_expr_without_location...\n\n\t* constexpr.c (cxx_eval_call_expression): Use\n\tunshare_expr_without_location.\n\nFrom-SVN: r279557", "tree": {"sha": "bac90309f5013cccbf87e44d1567a363b39ed690", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bac90309f5013cccbf87e44d1567a363b39ed690"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db38a029ee96491c4a4e42f3acdd02a541994ec1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db38a029ee96491c4a4e42f3acdd02a541994ec1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db38a029ee96491c4a4e42f3acdd02a541994ec1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db38a029ee96491c4a4e42f3acdd02a541994ec1/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6d4a35ca57b1af5a7a97faedb8a17c0a00890ce4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d4a35ca57b1af5a7a97faedb8a17c0a00890ce4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d4a35ca57b1af5a7a97faedb8a17c0a00890ce4"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "19e1b881e2d15c4190d74f99b070e86a9793c0d0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db38a029ee96491c4a4e42f3acdd02a541994ec1/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db38a029ee96491c4a4e42f3acdd02a541994ec1/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=db38a029ee96491c4a4e42f3acdd02a541994ec1", "patch": "@@ -1,3 +1,9 @@\n+2019-12-18  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/91165 follow-on tweak\n+\t* constexpr.c (cxx_eval_call_expression): Use\n+\tunshare_expr_without_location.\n+\n 2019-12-19  Julian Brown  <julian@codesourcery.com>\n \t    Maciej W. Rozycki  <macro@codesourcery.com>\n \t    Tobias Burnus  <tobias@codesourcery.com>"}, {"sha": "b95da0f83427ca837948075645d84792c7ec1c01", "filename": "gcc/cp/constexpr.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db38a029ee96491c4a4e42f3acdd02a541994ec1/gcc%2Fcp%2Fconstexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db38a029ee96491c4a4e42f3acdd02a541994ec1/gcc%2Fcp%2Fconstexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fconstexpr.c?ref=db38a029ee96491c4a4e42f3acdd02a541994ec1", "patch": "@@ -2079,7 +2079,7 @@ cxx_eval_call_expression (const constexpr_ctx *ctx, tree t,\n \t\t  /* Unshare args going into the hash table to separate them\n \t\t     from the caller's context, for better GC and to avoid\n \t\t     problems with verify_gimple.  */\n-\t\t  arg = unshare_expr (arg);\n+\t\t  arg = unshare_expr_without_location (arg);\n \t\t  TREE_VEC_ELT (bound, i) = arg;\n \t\t}\n \t      /* Don't share a CONSTRUCTOR that might be changed.  This is not"}]}