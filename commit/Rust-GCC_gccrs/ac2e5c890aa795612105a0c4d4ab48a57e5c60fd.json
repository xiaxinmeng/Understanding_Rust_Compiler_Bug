{"sha": "ac2e5c890aa795612105a0c4d4ab48a57e5c60fd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWMyZTVjODkwYWE3OTU2MTIxMDVhMGM0ZDRhYjQ4YTU3ZTVjNjBmZA==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2009-12-22T08:23:08Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2009-12-22T08:23:08Z"}, "message": "re PR libstdc++/42456 (Revision 155377 failed some C++ atomic tests)\n\n2009-12-21  Benjamin Kosnik  <bkoz@redhat.com>\n\n\tPR libstdc++/42456\n\t* src/atomic.cc: Move _GLIBCXX_ASM_SYMVER define within guard.\n\t* config/abi/pre/gnu.ver: Add non-volatile exports.\n\nFrom-SVN: r155393", "tree": {"sha": "7119ede6221db6193bea2b4b190f55f725e8e9e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7119ede6221db6193bea2b4b190f55f725e8e9e7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac2e5c890aa795612105a0c4d4ab48a57e5c60fd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac2e5c890aa795612105a0c4d4ab48a57e5c60fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac2e5c890aa795612105a0c4d4ab48a57e5c60fd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac2e5c890aa795612105a0c4d4ab48a57e5c60fd/comments", "author": null, "committer": null, "parents": [{"sha": "2471c0b93d489007962ec0a18d34323e6dfa3450", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2471c0b93d489007962ec0a18d34323e6dfa3450", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2471c0b93d489007962ec0a18d34323e6dfa3450"}], "stats": {"total": 26, "additions": 19, "deletions": 7}, "files": [{"sha": "fca9703309bf9ec0a2e345bbb72a63f34ee7d075", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac2e5c890aa795612105a0c4d4ab48a57e5c60fd/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac2e5c890aa795612105a0c4d4ab48a57e5c60fd/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=ac2e5c890aa795612105a0c4d4ab48a57e5c60fd", "patch": "@@ -1,3 +1,9 @@\n+2009-12-21  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\tPR libstdc++/42456\n+\t* src/atomic.cc: Move _GLIBCXX_ASM_SYMVER define within guard.\n+\t* config/abi/pre/gnu.ver: Add non-volatile exports.\n+\n 2009-12-21  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* scripts/run_doxygen: Update nested namespace exceptions."}, {"sha": "2d4b0c3c363161163292fd4c60758995e595796d", "filename": "libstdc++-v3/config/abi/pre/gnu.ver", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac2e5c890aa795612105a0c4d4ab48a57e5c60fd/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac2e5c890aa795612105a0c4d4ab48a57e5c60fd/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver?ref=ac2e5c890aa795612105a0c4d4ab48a57e5c60fd", "patch": "@@ -1050,6 +1050,10 @@ GLIBCXX_3.4.13 {\n \n GLIBCXX_3.4.14 {\n \n+    # atomic\n+    _ZNSt9__atomic011atomic_flag12test_and_setESt12memory_order;\n+    _ZNSt9__atomic011atomic_flag5clearESt12memory_order;\n+\n     # future\n     _ZSt15future_category;\n     _ZNSt12future_errorD*;"}, {"sha": "7ec08c5d7c0ca80f1e3fbe7bf78aa8dbe8aed62f", "filename": "libstdc++-v3/src/atomic.cc", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac2e5c890aa795612105a0c4d4ab48a57e5c60fd/libstdc%2B%2B-v3%2Fsrc%2Fatomic.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac2e5c890aa795612105a0c4d4ab48a57e5c60fd/libstdc%2B%2B-v3%2Fsrc%2Fatomic.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fatomic.cc?ref=ac2e5c890aa795612105a0c4d4ab48a57e5c60fd", "patch": "@@ -78,30 +78,30 @@ namespace std\n   {\n     bool\n     atomic_flag_test_and_set_explicit(__atomic_flag_base* __a,\n-\t\t\t\t      memory_order __m) throw ()\n+\t\t\t\t      memory_order __m) throw()\n     {\n       atomic_flag* d = static_cast<volatile atomic_flag*>(__a);\n       return d->test_and_set(__m);\n     }\n \n     void\n-    atomic_flag_clear_explicit(__atomic_flag_base* __a,\n-\t\t\t       memory_order __m) throw ()\n+    atomic_flag_clear_explicit(__atomic_flag_base* __a, \n+\t\t\t       memory_order __m) throw()\n     {\n       atomic_flag* d = static_cast<volatile atomic_flag*>(__a);\n       return d->clear(__m);\n     }\n \n     void\n     __atomic_flag_wait_explicit(__atomic_flag_base* __a,\n-\t\t\t\tmemory_order __x) throw ()\n+\t\t\t\tmemory_order __x) throw()\n     {\n       while (atomic_flag_test_and_set_explicit(__a, __x))\n \t{ };\n     }\n \n     __atomic_flag_base*\n-    __atomic_flag_for_address(const void* __z) throw ()\n+    __atomic_flag_for_address(const void* __z) throw()\n     {\n       uintptr_t __u = reinterpret_cast<uintptr_t>(__z);\n       __u += (__u >> 2) + (__u << 4);\n@@ -126,12 +126,14 @@ namespace std\n // In the future, GLIBCXX_ABI > 6 should remove all uses of\n // _GLIBCXX_*_SYMVER macros in this file.\n \n+#if defined(_GLIBCXX_SYMVER_GNU) && defined(PIC) \\\n+    && defined(_GLIBCXX_HAVE_AS_SYMVER_DIRECTIVE)\n+\n #define _GLIBCXX_ASM_SYMVER(cur, old, version) \\\n    asm (\".symver \" #cur \",\" #old \"@@\" #version);\n \n-#if defined(_GLIBCXX_SYMVER_GNU) && defined(PIC) \\\n-    && defined(_GLIBCXX_HAVE_AS_SYMVER_DIRECTIVE)\n _GLIBCXX_ASM_SYMVER(_ZNSt9__atomic011atomic_flag5clearESt12memory_order, _ZNVSt9__atomic011atomic_flag5clearESt12memory_order, GLIBCXX_3.4.11)\n \n _GLIBCXX_ASM_SYMVER(_ZNSt9__atomic011atomic_flag12test_and_setESt12memory_order, _ZNVSt9__atomic011atomic_flag12test_and_setESt12memory_order, GLIBCXX_3.4.11)\n+\n #endif"}]}