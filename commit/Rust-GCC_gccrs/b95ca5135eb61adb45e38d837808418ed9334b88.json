{"sha": "b95ca5135eb61adb45e38d837808418ed9334b88", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjk1Y2E1MTM1ZWI2MWFkYjQ1ZTM4ZDgzNzgwODQxOGVkOTMzNGI4OA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2010-10-04T16:18:03Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2010-10-04T16:18:03Z"}, "message": "tree.c (decl_storage_duration): New.\n\n\t* tree.c (decl_storage_duration): New.\n\t* cp-tree.h: Declare it.\n\t(duration_kind): Return values.\n\nFrom-SVN: r164944", "tree": {"sha": "6429f24e6b3354b7521366525354ec246d6aef34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6429f24e6b3354b7521366525354ec246d6aef34"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b95ca5135eb61adb45e38d837808418ed9334b88", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b95ca5135eb61adb45e38d837808418ed9334b88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b95ca5135eb61adb45e38d837808418ed9334b88", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b95ca5135eb61adb45e38d837808418ed9334b88/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "828fde809c0a0c1e64a411f3db10c02d775a9f3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/828fde809c0a0c1e64a411f3db10c02d775a9f3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/828fde809c0a0c1e64a411f3db10c02d775a9f3d"}], "stats": {"total": 33, "additions": 33, "deletions": 0}, "files": [{"sha": "5ca247b329026fee17bf70ddf0468302189a5b47", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b95ca5135eb61adb45e38d837808418ed9334b88/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b95ca5135eb61adb45e38d837808418ed9334b88/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b95ca5135eb61adb45e38d837808418ed9334b88", "patch": "@@ -1,3 +1,9 @@\n+2010-10-04  Jason Merrill  <jason@redhat.com>\n+\n+\t* tree.c (decl_storage_duration): New.\n+\t* cp-tree.h: Declare it.\n+\t(duration_kind): Return values.\n+\n 2010-10-03  Jason Merrill  <jason@redhat.com>\n \n \t* typeck.c (require_complete_type_sfinae): Add complain parm to..."}, {"sha": "fa625701f0e17b775e00ac64c68909d7361a9367", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b95ca5135eb61adb45e38d837808418ed9334b88/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b95ca5135eb61adb45e38d837808418ed9334b88/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=b95ca5135eb61adb45e38d837808418ed9334b88", "patch": "@@ -3934,6 +3934,13 @@ typedef enum linkage_kind {\n   lk_external\t\t\t/* External linkage.  */\n } linkage_kind;\n \n+typedef enum duration_kind {\n+  dk_static,\n+  dk_thread,\n+  dk_auto,\n+  dk_dynamic\n+} duration_kind;\n+\n /* Bitmask flags to control type substitution.  */\n enum tsubst_flags {\n   tf_none = 0,\t\t\t /* nothing special */\n@@ -5402,6 +5409,7 @@ extern int count_trees\t\t\t\t(tree);\n extern int char_type_p\t\t\t\t(tree);\n extern void verify_stmt_tree\t\t\t(tree);\n extern linkage_kind decl_linkage\t\t(tree);\n+extern duration_kind decl_storage_duration\t(tree);\n extern tree cp_walk_subtrees (tree*, int*, walk_tree_fn,\n \t\t\t      void*, struct pointer_set_t*);\n #define cp_walk_tree(a,b,c,d) \\"}, {"sha": "174500ef66f3b74672eee4a454276c56c23ce5b5", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b95ca5135eb61adb45e38d837808418ed9334b88/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b95ca5135eb61adb45e38d837808418ed9334b88/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=b95ca5135eb61adb45e38d837808418ed9334b88", "patch": "@@ -2985,6 +2985,25 @@ decl_linkage (tree decl)\n   /* Everything else has internal linkage.  */\n   return lk_internal;\n }\n+\n+/* Returns the storage duration of the object or reference associated with\n+   the indicated DECL, which should be a VAR_DECL or PARM_DECL.  */\n+\n+duration_kind\n+decl_storage_duration (tree decl)\n+{\n+  if (TREE_CODE (decl) == PARM_DECL)\n+    return dk_auto;\n+  if (TREE_CODE (decl) == FUNCTION_DECL)\n+    return dk_static;\n+  gcc_assert (TREE_CODE (decl) == VAR_DECL);\n+  if (!TREE_STATIC (decl)\n+      && !DECL_EXTERNAL (decl))\n+    return dk_auto;\n+  if (DECL_THREAD_LOCAL_P (decl))\n+    return dk_thread;\n+  return dk_static;\n+}\n \f\n /* EXP is an expression that we want to pre-evaluate.  Returns (in\n    *INITP) an expression that will perform the pre-evaluation.  The"}]}