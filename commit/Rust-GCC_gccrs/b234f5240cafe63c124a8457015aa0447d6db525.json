{"sha": "b234f5240cafe63c124a8457015aa0447d6db525", "node_id": "C_kwDOANBUbNoAKGIyMzRmNTI0MGNhZmU2M2MxMjRhODQ1NzAxNWFhMDQ0N2Q2ZGI1MjU", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-07-28T13:08:23Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-07-29T06:29:25Z"}, "message": "Avoid vect_get_vector_types_for_stmt\n\nThis replaces vect_get_vector_types_for_stmt with get_vectype_for_scalar_type\nin vect_recog_bool_pattern.\n\n\t* tree-vect-patterns.cc (vect_recog_bool_pattern): Use\n\tget_vectype_for_scalar_type instead of\n\tvect_get_vector_types_for_stmt.", "tree": {"sha": "ee14a92ddf819565d120e44540f592c49d7f28a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ee14a92ddf819565d120e44540f592c49d7f28a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b234f5240cafe63c124a8457015aa0447d6db525", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b234f5240cafe63c124a8457015aa0447d6db525", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b234f5240cafe63c124a8457015aa0447d6db525", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b234f5240cafe63c124a8457015aa0447d6db525/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "af086d19112bfd011fafaee41b0da292b2176def", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af086d19112bfd011fafaee41b0da292b2176def", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af086d19112bfd011fafaee41b0da292b2176def"}], "stats": {"total": 6, "additions": 2, "deletions": 4}, "files": [{"sha": "09574bb1a2696b3438a4ce9f09f74b42e784aca0", "filename": "gcc/tree-vect-patterns.cc", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b234f5240cafe63c124a8457015aa0447d6db525/gcc%2Ftree-vect-patterns.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b234f5240cafe63c124a8457015aa0447d6db525/gcc%2Ftree-vect-patterns.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-patterns.cc?ref=b234f5240cafe63c124a8457015aa0447d6db525", "patch": "@@ -4509,10 +4509,8 @@ vect_recog_bool_pattern (vec_info *vinfo,\n \t   && STMT_VINFO_DATA_REF (stmt_vinfo))\n     {\n       stmt_vec_info pattern_stmt_info;\n-      tree nunits_vectype;\n-      if (!vect_get_vector_types_for_stmt (vinfo, stmt_vinfo, &vectype,\n-\t\t\t\t\t   &nunits_vectype)\n-\t  || !VECTOR_MODE_P (TYPE_MODE (vectype)))\n+      vectype = get_vectype_for_scalar_type (vinfo, TREE_TYPE (lhs));\n+      if (!vectype || !VECTOR_MODE_P (TYPE_MODE (vectype)))\n \treturn NULL;\n \n       if (check_bool_pattern (var, vinfo, bool_stmts))"}]}