{"sha": "cf53ae10de65651aa85551ac1a254492ee5cdd1b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Y1M2FlMTBkZTY1NjUxYWE4NTU1MWFjMWEyNTQ0OTJlZTVjZGQxYg==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2003-01-09T20:44:53Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2003-01-09T20:44:53Z"}, "message": "configure.in: Remove Makefile in build...\n\n* configure.in: Remove Makefile in build, host and target modules\nunless configure was run with --no-recursion.\n* configure: Rebuilt.\n\nFrom-SVN: r61126", "tree": {"sha": "182722e053a6b556c8e2a5bab1432c07d4f4f66b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/182722e053a6b556c8e2a5bab1432c07d4f4f66b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cf53ae10de65651aa85551ac1a254492ee5cdd1b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf53ae10de65651aa85551ac1a254492ee5cdd1b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf53ae10de65651aa85551ac1a254492ee5cdd1b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf53ae10de65651aa85551ac1a254492ee5cdd1b/comments", "author": null, "committer": null, "parents": [{"sha": "3a6e2189f3a8ed0129e270efdace94637b1fa2d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a6e2189f3a8ed0129e270efdace94637b1fa2d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a6e2189f3a8ed0129e270efdace94637b1fa2d4"}], "stats": {"total": 187, "additions": 113, "deletions": 74}, "files": [{"sha": "970fd5a91edefd8d97b5a6ae4be2158e86711d7d", "filename": "ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf53ae10de65651aa85551ac1a254492ee5cdd1b/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf53ae10de65651aa85551ac1a254492ee5cdd1b/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=cf53ae10de65651aa85551ac1a254492ee5cdd1b", "patch": "@@ -1,3 +1,9 @@\n+2003-01-09  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* configure.in: Remove Makefile in build, host and target modules\n+\tunless configure was run with --no-recursion.\n+\t* configure: Rebuilt.\n+\n 2003-01-09  Christian Cornelssen  <ccorn@cs.tu-berlin.de>\n \n \t* Makefile.tpl (BASE_FLAGS_TO_PASS): Also pass DESTDIR."}, {"sha": "f85cbce2fc5f51ee6552a91ee5b6c20b8b919f19", "filename": "configure", "status": "modified", "additions": 83, "deletions": 57, "changes": 140, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf53ae10de65651aa85551ac1a254492ee5cdd1b/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf53ae10de65651aa85551ac1a254492ee5cdd1b/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=cf53ae10de65651aa85551ac1a254492ee5cdd1b", "patch": "@@ -1525,20 +1525,6 @@ if test -n \"${target_configdirs}\" ; then\n   fi\n fi\n \n-# Deconfigure all subdirectories, in case we are changing the\n-# configuration from one where a subdirectory is supported to one where it\n-# is not.\n-if test -z \"${norecursion}\" && test -n \"${configdirs}\" ; then\n-  for i in `echo ${configdirs} | sed -e s/target-//g` ; do\n-    rm -f $i/Makefile\n-  done\n-fi\n-if test -z \"${norecursion}\" && test -n \"${target_configdirs}\" ; then\n-  for i in `echo ${target_configdirs} | sed -e s/target-//g` ; do\n-    rm -f ${target_subdir}/$i/Makefile\n-  done\n-fi\n-\n # Quietly strip out all directories which aren't configurable in this tree.\n # This relies on all configurable subdirectories being autoconfiscated, which\n # is now the case.\n@@ -2325,13 +2311,24 @@ target_configdirs=`echo \"${target_configdirs}\" | sed -e 's/target-//g'`\n # This is the final value for target_configdirs.  configdirs already\n # has its final value.  It's time to create some lists of valid targets.\n \n+# While at that, we remove Makefiles if we were started for recursive\n+# configuration, such that the top-level Makefile reconfigures them,\n+# like we used to do when configure itself was recursive.\n+\n all_build_modules=\n configure_build_modules=\n # Only make build modules if build != host.\n # This should be done more generally, but at the moment it doesn't matter.\n if test ${host_alias} != ${build_alias} ; then\n-  all_build_modules=all-build-libiberty\n-  configure_build_modules=configure-build-libiberty\n+  for module in libiberty ; do\n+    all_build_modules=all-build-${module}\n+    configure_build_modules=configure-build-${module}\n+    if test -z \"${no_recursion}\" \\\n+       && test -f ${build_subdir}/${module}/Makefile; then\n+      echo 1>&2 \"*** removing ${build_subdir}/${module}/Makefile to force reconfigure\"\n+      rm -f ${build_subdir}/${module}/Makefile\n+    fi\n+  done\n fi\n \n all_host_modules=\n@@ -2343,6 +2340,11 @@ for module in ${configdirs} ; do\n   check_host_modules=\"${check_host_modules} check-${module}\"\n   install_host_modules=\"${install_host_modules} install-${module}\"\n   configure_host_modules=\"${configure_host_modules} configure-${module}\"\n+  if test -z \"${no_recursion}\" \\\n+     && test -f ${module}/Makefile; then\n+    echo 1>&2 \"*** removing ${module}/Makefile to force reconfigure\"\n+    rm -f ${module}/Makefile\n+  fi\n done\n install_host_modules_nogcc=`echo \"${install_host_modules}\" | sed -e 's/install-gcc//g'`\n \n@@ -2355,6 +2357,11 @@ for module in ${target_configdirs} ; do\n   check_target_modules=\"${check_target_modules} check-target-${module}\"\n   install_target_modules=\"${install_target_modules} install-target-${module}\"\n   configure_target_modules=\"${configure_target_modules} configure-target-${module}\"\n+  if test -z \"${no_recursion}\" \\\n+     && test -f ${target_subdir}/${module}/Makefile; then\n+    echo 1>&2 \"*** removing ${target_subdir}/${module}/Makefile to force reconfigure\"\n+    rm -f ${target_subdir}/${module}/Makefile\n+  fi\n done\n \n # Determine whether gdb needs tk/tcl or not.\n@@ -2726,7 +2733,7 @@ test -n \"$target_alias\" && ncn_target_tool_prefix=$target_alias-\n   # Extract the first word of \"${ncn_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2730: checking for $ac_word\" >&5\n+echo \"configure:2737: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2759,7 +2766,7 @@ if test -z \"$ac_cv_prog_AR\" ; then\n     # Extract the first word of \"ar\", so it can be a program name with args.\n set dummy ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2763: checking for $ac_word\" >&5\n+echo \"configure:2770: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2798,7 +2805,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2802: checking for $ac_word\" >&5\n+echo \"configure:2809: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2831,7 +2838,7 @@ if test -z \"$ac_cv_prog_AS\" ; then\n     # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2835: checking for $ac_word\" >&5\n+echo \"configure:2842: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2870,7 +2877,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2874: checking for $ac_word\" >&5\n+echo \"configure:2881: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2903,7 +2910,7 @@ if test -z \"$ac_cv_prog_DLLTOOL\" ; then\n     # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2907: checking for $ac_word\" >&5\n+echo \"configure:2914: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2942,7 +2949,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}ld\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2946: checking for $ac_word\" >&5\n+echo \"configure:2953: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2975,7 +2982,7 @@ if test -z \"$ac_cv_prog_LD\" ; then\n     # Extract the first word of \"ld\", so it can be a program name with args.\n set dummy ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2979: checking for $ac_word\" >&5\n+echo \"configure:2986: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3014,7 +3021,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}nm\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3018: checking for $ac_word\" >&5\n+echo \"configure:3025: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3047,7 +3054,7 @@ if test -z \"$ac_cv_prog_NM\" ; then\n     # Extract the first word of \"nm\", so it can be a program name with args.\n set dummy nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3051: checking for $ac_word\" >&5\n+echo \"configure:3058: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3086,7 +3093,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3090: checking for $ac_word\" >&5\n+echo \"configure:3097: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3119,7 +3126,7 @@ if test -z \"$ac_cv_prog_RANLIB\" ; then\n     # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3123: checking for $ac_word\" >&5\n+echo \"configure:3130: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3158,7 +3165,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}windres\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3162: checking for $ac_word\" >&5\n+echo \"configure:3169: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3191,7 +3198,7 @@ if test -z \"$ac_cv_prog_WINDRES\" ; then\n     # Extract the first word of \"windres\", so it can be a program name with args.\n set dummy windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3195: checking for $ac_word\" >&5\n+echo \"configure:3202: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3230,7 +3237,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}objcopy\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}objcopy; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3234: checking for $ac_word\" >&5\n+echo \"configure:3241: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3263,7 +3270,7 @@ if test -z \"$ac_cv_prog_OBJCOPY\" ; then\n     # Extract the first word of \"objcopy\", so it can be a program name with args.\n set dummy objcopy; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3267: checking for $ac_word\" >&5\n+echo \"configure:3274: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3302,7 +3309,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}objdump\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}objdump; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3306: checking for $ac_word\" >&5\n+echo \"configure:3313: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3335,7 +3342,7 @@ if test -z \"$ac_cv_prog_OBJDUMP\" ; then\n     # Extract the first word of \"objdump\", so it can be a program name with args.\n set dummy objdump; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3339: checking for $ac_word\" >&5\n+echo \"configure:3346: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3383,7 +3390,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3387: checking for $ac_word\" >&5\n+echo \"configure:3394: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3416,7 +3423,7 @@ if test -z \"$ac_cv_prog_AR_FOR_TARGET\" ; then\n     # Extract the first word of \"ar\", so it can be a program name with args.\n set dummy ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3420: checking for $ac_word\" >&5\n+echo \"configure:3427: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3455,7 +3462,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3459: checking for $ac_word\" >&5\n+echo \"configure:3466: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3488,7 +3495,7 @@ if test -z \"$ac_cv_prog_AS_FOR_TARGET\" ; then\n     # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3492: checking for $ac_word\" >&5\n+echo \"configure:3499: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3527,7 +3534,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3531: checking for $ac_word\" >&5\n+echo \"configure:3538: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3560,7 +3567,7 @@ if test -z \"$ac_cv_prog_DLLTOOL_FOR_TARGET\" ; then\n     # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3564: checking for $ac_word\" >&5\n+echo \"configure:3571: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3599,7 +3606,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ld\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3603: checking for $ac_word\" >&5\n+echo \"configure:3610: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3632,7 +3639,7 @@ if test -z \"$ac_cv_prog_LD_FOR_TARGET\" ; then\n     # Extract the first word of \"ld\", so it can be a program name with args.\n set dummy ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3636: checking for $ac_word\" >&5\n+echo \"configure:3643: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3671,7 +3678,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}nm\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3675: checking for $ac_word\" >&5\n+echo \"configure:3682: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3704,7 +3711,7 @@ if test -z \"$ac_cv_prog_NM_FOR_TARGET\" ; then\n     # Extract the first word of \"nm\", so it can be a program name with args.\n set dummy nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3708: checking for $ac_word\" >&5\n+echo \"configure:3715: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3743,7 +3750,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3747: checking for $ac_word\" >&5\n+echo \"configure:3754: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3776,7 +3783,7 @@ if test -z \"$ac_cv_prog_RANLIB_FOR_TARGET\" ; then\n     # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3780: checking for $ac_word\" >&5\n+echo \"configure:3787: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3815,7 +3822,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}windres\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3819: checking for $ac_word\" >&5\n+echo \"configure:3826: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3848,7 +3855,7 @@ if test -z \"$ac_cv_prog_WINDRES_FOR_TARGET\" ; then\n     # Extract the first word of \"windres\", so it can be a program name with args.\n set dummy windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3852: checking for $ac_word\" >&5\n+echo \"configure:3859: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3980,15 +3987,34 @@ trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15\n # Transform confdefs.h into DEFS.\n # Protect against shell expansion while executing Makefile rules.\n # Protect against Makefile macro expansion.\n-cat > conftest.defs <<\\EOF\n-s%#define \\([A-Za-z_][A-Za-z0-9_]*\\) *\\(.*\\)%-D\\1=\\2%g\n-s%[ \t`~#$^&*(){}\\\\|;'\"<>?]%\\\\&%g\n-s%\\[%\\\\&%g\n-s%\\]%\\\\&%g\n-s%\\$%$$%g\n-EOF\n-DEFS=`sed -f conftest.defs confdefs.h | tr '\\012' ' '`\n-rm -f conftest.defs\n+#\n+# If the first sed substitution is executed (which looks for macros that\n+# take arguments), then we branch to the quote section.  Otherwise,\n+# look for a macro that doesn't take arguments.\n+cat >confdef2opt.sed <<\\_ACEOF\n+t clear\n+: clear\n+s,^[ \t]*#[ \t]*define[ \t][ \t]*\\([^ \t(][^ \t(]*([^)]*)\\)[ \t]*\\(.*\\),-D\\1=\\2,g\n+t quote\n+s,^[ \t]*#[ \t]*define[ \t][ \t]*\\([^ \t][^ \t]*\\)[ \t]*\\(.*\\),-D\\1=\\2,g\n+t quote\n+d\n+: quote\n+s,[ \t`~#$^&*(){}\\\\|;'\"<>?],\\\\&,g\n+s,\\[,\\\\&,g\n+s,\\],\\\\&,g\n+s,\\$,$$,g\n+p\n+_ACEOF\n+# We use echo to avoid assuming a particular line-breaking character.\n+# The extra dot is to prevent the shell from consuming trailing\n+# line-breaks from the sub-command output.  A line-break within\n+# single-quotes doesn't work because, if this script is created in a\n+# platform that uses two characters for line-breaks (e.g., DOS), tr\n+# would break.\n+ac_LF_and_DOT=`echo; echo .`\n+DEFS=`sed -n -f confdef2opt.sed confdefs.h | tr \"$ac_LF_and_DOT\" ' .'`\n+rm -f confdef2opt.sed\n \n \n # Without the \"./\", some shells look in PATH for config.status."}, {"sha": "88150ed66020462c93b8d9bc9cacf7572611db5b", "filename": "configure.in", "status": "modified", "additions": 24, "deletions": 17, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf53ae10de65651aa85551ac1a254492ee5cdd1b/configure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf53ae10de65651aa85551ac1a254492ee5cdd1b/configure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.in?ref=cf53ae10de65651aa85551ac1a254492ee5cdd1b", "patch": "@@ -1,5 +1,5 @@\n #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-#   1999, 2000, 2001, 2002 Free Software Foundation, Inc.\n+#   1999, 2000, 2001, 2002, 2003 Free Software Foundation, Inc.\n #\n # This file is free software; you can redistribute it and/or modify it\n # under the terms of the GNU General Public License as published by\n@@ -868,20 +868,6 @@ if test -n \"${target_configdirs}\" ; then\n   fi\n fi\n \n-# Deconfigure all subdirectories, in case we are changing the\n-# configuration from one where a subdirectory is supported to one where it\n-# is not.\n-if test -z \"${norecursion}\" && test -n \"${configdirs}\" ; then\n-  for i in `echo ${configdirs} | sed -e s/target-//g` ; do\n-    rm -f $i/Makefile\n-  done\n-fi\n-if test -z \"${norecursion}\" && test -n \"${target_configdirs}\" ; then\n-  for i in `echo ${target_configdirs} | sed -e s/target-//g` ; do\n-    rm -f ${target_subdir}/$i/Makefile\n-  done\n-fi\n-\n # Quietly strip out all directories which aren't configurable in this tree.\n # This relies on all configurable subdirectories being autoconfiscated, which\n # is now the case.\n@@ -1668,13 +1654,24 @@ target_configdirs=`echo \"${target_configdirs}\" | sed -e 's/target-//g'`\n # This is the final value for target_configdirs.  configdirs already\n # has its final value.  It's time to create some lists of valid targets.\n \n+# While at that, we remove Makefiles if we were started for recursive\n+# configuration, such that the top-level Makefile reconfigures them,\n+# like we used to do when configure itself was recursive.\n+\n all_build_modules=\n configure_build_modules=\n # Only make build modules if build != host.\n # This should be done more generally, but at the moment it doesn't matter.\n if test ${host_alias} != ${build_alias} ; then\n-  all_build_modules=all-build-libiberty\n-  configure_build_modules=configure-build-libiberty\n+  for module in libiberty ; do\n+    all_build_modules=all-build-${module}\n+    configure_build_modules=configure-build-${module}\n+    if test -z \"${no_recursion}\" \\\n+       && test -f ${build_subdir}/${module}/Makefile; then\n+      echo 1>&2 \"*** removing ${build_subdir}/${module}/Makefile to force reconfigure\"\n+      rm -f ${build_subdir}/${module}/Makefile\n+    fi\n+  done\n fi\n \n all_host_modules=\n@@ -1686,6 +1683,11 @@ for module in ${configdirs} ; do\n   check_host_modules=\"${check_host_modules} check-${module}\"\n   install_host_modules=\"${install_host_modules} install-${module}\"\n   configure_host_modules=\"${configure_host_modules} configure-${module}\"\n+  if test -z \"${no_recursion}\" \\\n+     && test -f ${module}/Makefile; then\n+    echo 1>&2 \"*** removing ${module}/Makefile to force reconfigure\"\n+    rm -f ${module}/Makefile\n+  fi\n done\n install_host_modules_nogcc=`echo \"${install_host_modules}\" | sed -e 's/install-gcc//g'`\n \n@@ -1698,6 +1700,11 @@ for module in ${target_configdirs} ; do\n   check_target_modules=\"${check_target_modules} check-target-${module}\"\n   install_target_modules=\"${install_target_modules} install-target-${module}\"\n   configure_target_modules=\"${configure_target_modules} configure-target-${module}\"\n+  if test -z \"${no_recursion}\" \\\n+     && test -f ${target_subdir}/${module}/Makefile; then\n+    echo 1>&2 \"*** removing ${target_subdir}/${module}/Makefile to force reconfigure\"\n+    rm -f ${target_subdir}/${module}/Makefile\n+  fi\n done\n \n # Determine whether gdb needs tk/tcl or not."}]}