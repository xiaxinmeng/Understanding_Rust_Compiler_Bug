{"sha": "dd5ecf415546bfcd359c5f6dc7500fe7cc319593", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ1ZWNmNDE1NTQ2YmZjZDM1OWM1ZjZkYzc1MDBmZTdjYzMxOTU5Mw==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-12-04T19:30:33Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-12-04T19:30:33Z"}, "message": "[multiple changes]\n\n2006-12-04  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/29821\n\t* resolve.c (resolve_operator): Only return result of\n\tgfc_simplify_expr if expression is constant.\n\n\n2006-12-04  Paul  Thomas <pault@gcc.gnu.org>\n\n\tPR fortran/29821\n\t* gfortran.dg/parameter_array_section_1.f90: New test.\n\nFrom-SVN: r119504", "tree": {"sha": "a5de30dba6b48e31f649f381012a7df875e6dab3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5de30dba6b48e31f649f381012a7df875e6dab3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd5ecf415546bfcd359c5f6dc7500fe7cc319593", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd5ecf415546bfcd359c5f6dc7500fe7cc319593", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd5ecf415546bfcd359c5f6dc7500fe7cc319593", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd5ecf415546bfcd359c5f6dc7500fe7cc319593/comments", "author": null, "committer": null, "parents": [{"sha": "c58936b6b75bfea1b486a7040081e423e58a56de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c58936b6b75bfea1b486a7040081e423e58a56de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c58936b6b75bfea1b486a7040081e423e58a56de"}], "stats": {"total": 44, "additions": 43, "deletions": 1}, "files": [{"sha": "2ce1ec667f66a1cd8cebc32ab05c991a6eb1d952", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd5ecf415546bfcd359c5f6dc7500fe7cc319593/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd5ecf415546bfcd359c5f6dc7500fe7cc319593/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=dd5ecf415546bfcd359c5f6dc7500fe7cc319593", "patch": "@@ -1,3 +1,9 @@\n+2006-12-04  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/29821\n+\t* resolve.c (resolve_operator): Only return result of\n+\tgfc_simplify_expr if expression is constant.\n+\n 2006-12-04  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/29916"}, {"sha": "e31ecbd5909e8f6cb3c2f88037f188bc9fb703d4", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd5ecf415546bfcd359c5f6dc7500fe7cc319593/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd5ecf415546bfcd359c5f6dc7500fe7cc319593/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=dd5ecf415546bfcd359c5f6dc7500fe7cc319593", "patch": "@@ -2191,7 +2191,14 @@ resolve_operator (gfc_expr * e)\n \n   /* Attempt to simplify the expression.  */\n   if (t == SUCCESS)\n-    t = gfc_simplify_expr (e, 0);\n+    {\n+      t = gfc_simplify_expr (e, 0);\n+      /* Some calls do not succeed in simplification and return FAILURE\n+\t even though there is no error; eg. variable references to\n+\t PARAMETER arrays.  */\n+      if (!gfc_is_constant_expr (e))\n+\tt = SUCCESS;\n+    }\n   return t;\n \n bad_op:"}, {"sha": "a0c4f78d2277e086275d5a1e8b976647403ae64c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd5ecf415546bfcd359c5f6dc7500fe7cc319593/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd5ecf415546bfcd359c5f6dc7500fe7cc319593/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dd5ecf415546bfcd359c5f6dc7500fe7cc319593", "patch": "@@ -1,3 +1,8 @@\n+2006-12-04  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/29821\n+\t* gfortran.dg/parameter_array_section_1.f90: New test.\n+\n 2006-12-04  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/29733"}, {"sha": "6c6959332625648f1aa3d5156ab12e7cc4c2e075", "filename": "gcc/testsuite/gfortran.dg/parameter_array_section_1.f90", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd5ecf415546bfcd359c5f6dc7500fe7cc319593/gcc%2Ftestsuite%2Fgfortran.dg%2Fparameter_array_section_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd5ecf415546bfcd359c5f6dc7500fe7cc319593/gcc%2Ftestsuite%2Fgfortran.dg%2Fparameter_array_section_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fparameter_array_section_1.f90?ref=dd5ecf415546bfcd359c5f6dc7500fe7cc319593", "patch": "@@ -0,0 +1,24 @@\n+! { dg-do compile }\n+! Tests the fix for PR29821, which was due to failure to simplify the\n+! array section, since the section is not constant, provoking failure\n+! to resolve the argument of SUM and therefore to resolve SUM itself.\n+!\n+! Contributed by Harald Anlauf  <anlauf@gmx.de>\n+!\n+module gfcbug45\n+  implicit none\n+contains\n+  subroutine foo \n+    real, external :: mysum\n+    integer :: i\n+    real    :: a\n+    real, parameter :: eps(2) = (/ 1, 99 /)\n+    i = 1\n+    a = sum (eps(i:i+1) * eps)\n+    print *, a\n+  end subroutine foo\n+end module gfcbug45\n+  use gfcbug45\n+  call foo\n+end\n+! { dg-final { cleanup-modules \"gfcbug45\" } }"}]}