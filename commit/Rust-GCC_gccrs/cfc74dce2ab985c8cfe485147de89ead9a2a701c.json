{"sha": "cfc74dce2ab985c8cfe485147de89ead9a2a701c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2ZjNzRkY2UyYWI5ODVjOGNmZTQ4NTE0N2RlODllYWQ5YTJhNzAxYw==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.ch", "date": "2004-06-18T20:56:56Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2004-06-18T20:56:56Z"}, "message": "jni.exp (gcj_jni_test_one): Add lgcc_s for darwin.\n\n2004-06-18  Andreas Tobler  <a.tobler@schweiz.ch>\n\n\t* testsuite/libjava.jni/jni.exp (gcj_jni_test_one): Add lgcc_s for\n\tdarwin.\n\nFrom-SVN: r83360", "tree": {"sha": "b83d02a101454f1db432cf904029d298818c5427", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b83d02a101454f1db432cf904029d298818c5427"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cfc74dce2ab985c8cfe485147de89ead9a2a701c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cfc74dce2ab985c8cfe485147de89ead9a2a701c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cfc74dce2ab985c8cfe485147de89ead9a2a701c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cfc74dce2ab985c8cfe485147de89ead9a2a701c/comments", "author": null, "committer": null, "parents": [{"sha": "3b1cce6ac1ed8fe740b0b1730bb6bbb63304f1e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b1cce6ac1ed8fe740b0b1730bb6bbb63304f1e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b1cce6ac1ed8fe740b0b1730bb6bbb63304f1e3"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "b77c9a90a98b7b29aee10d9c401c809c6c3e6218", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cfc74dce2ab985c8cfe485147de89ead9a2a701c/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cfc74dce2ab985c8cfe485147de89ead9a2a701c/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=cfc74dce2ab985c8cfe485147de89ead9a2a701c", "patch": "@@ -1,3 +1,8 @@\n+2004-06-18  Andreas Tobler  <a.tobler@schweiz.ch>\n+\n+\t* testsuite/libjava.jni/jni.exp (gcj_jni_test_one): Add lgcc_s for\n+\tdarwin.\n+\n 2004-06-18  Ranjit Mathew  <rmathew@hotmail.com>\n \n \t* prims.cc (_Jv_CreateJavaVM): Install SEGV and FPE handlers,"}, {"sha": "838b83324de706512b17f35f318d23ee64aa3106", "filename": "libjava/testsuite/libjava.jni/jni.exp", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cfc74dce2ab985c8cfe485147de89ead9a2a701c/libjava%2Ftestsuite%2Flibjava.jni%2Fjni.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cfc74dce2ab985c8cfe485147de89ead9a2a701c/libjava%2Ftestsuite%2Flibjava.jni%2Fjni.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.jni%2Fjni.exp?ref=cfc74dce2ab985c8cfe485147de89ead9a2a701c", "patch": "@@ -11,7 +11,7 @@ proc gcj_jni_compile_c_to_so {file {options {}}} {\n   set options \"\"\n \n # apple uses a different extension for shared/dynamic libraries\n-# so we check against powerpc-apple-darwin and set them to \n+# so we check against powerpc-apple-darwin and set them to\n # dylib, else we assume it's .so\n \n   if { [ regexp {powerpc-apple-darwin} $host_triplet] } {\n@@ -131,7 +131,15 @@ proc gcj_jni_test_one {file} {\n       lappend cxxflaglist \"-L$cxxldlibflags\"\n     }\n \n-    lappend cxxflaglist \"-lstdc++\"\n+    # Darwin does not yet have a libgcc_s.dylib library.\n+    # So we add it here. If the libgcc_s is installed, the libstdc++\n+    # would pick it up.\n+    if { [ regexp {powerpc-apple-darwin} $host_triplet] } {\n+\tlappend cxxflaglist \"-lgcc_s -lstdc++\"\n+    } else {\n+\tlappend cxxflaglist \"-lstdc++\"\n+    }\n+  \n     set cxxflags [join $cxxflaglist]\n   }\n "}]}