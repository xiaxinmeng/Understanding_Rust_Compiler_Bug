{"sha": "a330ff7f5c68964b62c691649560ae2f19430a8f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTMzMGZmN2Y1YzY4OTY0YjYyYzY5MTY0OTU2MGFlMmYxOTQzMGE4Zg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2013-10-08T21:54:06Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-10-08T21:54:06Z"}, "message": "re PR c++/58665 (ICE with using incomplete struct)\n\n/cp\n2013-10-08  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58665\n\tRevert:\n\t2013-10-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58448\n\t* pt.c (tsubst): Use error_operand_p on parameter t.\n\n/testsuite\n2013-10-08  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58665\n\tRevert:\n\t2013-10-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58448\n\t* g++.dg/template/crash117.C: New.\n\nFrom-SVN: r203288", "tree": {"sha": "bed1ab9d3bf48a15d4f78b87db22c3a814b3bd12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bed1ab9d3bf48a15d4f78b87db22c3a814b3bd12"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a330ff7f5c68964b62c691649560ae2f19430a8f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a330ff7f5c68964b62c691649560ae2f19430a8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a330ff7f5c68964b62c691649560ae2f19430a8f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a330ff7f5c68964b62c691649560ae2f19430a8f/comments", "author": null, "committer": null, "parents": [{"sha": "9ae63018d77dd725aa8c4a7c87a053cde30059a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ae63018d77dd725aa8c4a7c87a053cde30059a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ae63018d77dd725aa8c4a7c87a053cde30059a4"}], "stats": {"total": 29, "additions": 19, "deletions": 10}, "files": [{"sha": "3e68712c2a4a651714e5eec3b5adf558ff33eb63", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a330ff7f5c68964b62c691649560ae2f19430a8f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a330ff7f5c68964b62c691649560ae2f19430a8f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a330ff7f5c68964b62c691649560ae2f19430a8f", "patch": "@@ -1,3 +1,12 @@\n+2013-10-08  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58665\n+\tRevert:\n+\t2013-10-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58448\n+\t* pt.c (tsubst): Use error_operand_p on parameter t.\n+\n 2013-10-06  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/58126"}, {"sha": "a35000728aa24c775763746c1f9cac043236c3e2", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a330ff7f5c68964b62c691649560ae2f19430a8f/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a330ff7f5c68964b62c691649560ae2f19430a8f/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=a330ff7f5c68964b62c691649560ae2f19430a8f", "patch": "@@ -11272,7 +11272,7 @@ tsubst (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n   enum tree_code code;\n   tree type, r = NULL_TREE;\n \n-  if (t == NULL_TREE\n+  if (t == NULL_TREE || t == error_mark_node\n       || t == integer_type_node\n       || t == void_type_node\n       || t == char_type_node\n@@ -11281,9 +11281,6 @@ tsubst (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n       || TREE_CODE (t) == TRANSLATION_UNIT_DECL)\n     return t;\n \n-  if (error_operand_p (t))\n-    return error_mark_node;\n-\n   if (DECL_P (t))\n     return tsubst_decl (t, args, complain);\n "}, {"sha": "a45b913080a1e53b413e6d061779af5658d9e3b9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a330ff7f5c68964b62c691649560ae2f19430a8f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a330ff7f5c68964b62c691649560ae2f19430a8f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a330ff7f5c68964b62c691649560ae2f19430a8f", "patch": "@@ -1,3 +1,12 @@\n+2013-10-08  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58665\n+\tRevert:\n+\t2013-10-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58448\n+\t* g++.dg/template/crash117.C: New.\n+\n 2013-10-08  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n \n \t* gcc.target/s390/htm-nofloat-2.c: Add -mzarch to asm options."}, {"sha": "813140edc6ffc24bd5de857c0b90dbeb83f98499", "filename": "gcc/testsuite/g++.dg/template/crash117.C", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ae63018d77dd725aa8c4a7c87a053cde30059a4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash117.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ae63018d77dd725aa8c4a7c87a053cde30059a4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash117.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash117.C?ref=9ae63018d77dd725aa8c4a7c87a053cde30059a4", "patch": "@@ -1,6 +0,0 @@\n-// PR c++/58448\n-\n-class SmallVector; struct Types4;\n-template <typename, typename, typename, typename> struct Types {\n-  typedef Types4<>::Constructable // { dg-error \"template|typedef|expected\" }\n-} Types<SmallVector, SmallVector, SmallVector, SmallVector>:: > // { dg-error \"expected\" }"}]}