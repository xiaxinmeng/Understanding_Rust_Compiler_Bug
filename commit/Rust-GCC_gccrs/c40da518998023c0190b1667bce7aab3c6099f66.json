{"sha": "c40da518998023c0190b1667bce7aab3c6099f66", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQwZGE1MTg5OTgwMjNjMDE5MGIxNjY3YmNlN2FhYjNjNjA5OWY2Ng==", "commit": {"author": {"name": "Devang Patel", "email": "dpatel@apple.com", "date": "2002-07-02T23:06:04Z"}, "committer": {"name": "Devang Patel", "email": "dpatel@gcc.gnu.org", "date": "2002-07-02T23:06:04Z"}, "message": "objc-act.c (adjust_type_for_id_default): Do not allow an object as parameter.\n\n\n      * objc/objc-act.c (adjust_type_for_id_default): Do not allow an\n        object as parameter. Prevent something like 'NSObject' to be\n        used as the type for a method argument.\n\n      testsuite:\n      * objc.dg/param-1.m: New test.\n\nFrom-SVN: r55197", "tree": {"sha": "406a58c721188fa853910f08a5a933fc5259625b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/406a58c721188fa853910f08a5a933fc5259625b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c40da518998023c0190b1667bce7aab3c6099f66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c40da518998023c0190b1667bce7aab3c6099f66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c40da518998023c0190b1667bce7aab3c6099f66", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c40da518998023c0190b1667bce7aab3c6099f66/comments", "author": null, "committer": null, "parents": [{"sha": "0879540b3daea61f92dfc224046f36fbe837785c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0879540b3daea61f92dfc224046f36fbe837785c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0879540b3daea61f92dfc224046f36fbe837785c"}], "stats": {"total": 33, "additions": 33, "deletions": 0}, "files": [{"sha": "ef5cd4bbde8daa5aa4c0dd2b22dacd7da43cf7ee", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c40da518998023c0190b1667bce7aab3c6099f66/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c40da518998023c0190b1667bce7aab3c6099f66/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c40da518998023c0190b1667bce7aab3c6099f66", "patch": "@@ -1,3 +1,9 @@\n+\n+2002-07-02 Devang Patel <dpatel@apple.com\n+\t* objc/objc-act.c (adjust_type_for_id_default): Do not allow an\n+\t  object as parameter. Prevent something like 'NSObject' to be\n+\t  used as the type for a method argument.\n+\n 2002-07-03  Neil Booth  <neil@daikokuya.co.uk>\n \n \t* cpptrad.c: Update comment."}, {"sha": "e8f97ac4bcbe419a0f18d3d9c72efef1642ee35a", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c40da518998023c0190b1667bce7aab3c6099f66/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c40da518998023c0190b1667bce7aab3c6099f66/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=c40da518998023c0190b1667bce7aab3c6099f66", "patch": "@@ -4465,6 +4465,10 @@ adjust_type_for_id_default (type)\n        chain;\n        chain = TREE_CHAIN (chain))\n     {\n+      if (TREE_CODE (TREE_VALUE (chain)) == RECORD_TYPE\n+          && !(TREE_VALUE (type) \n+               && TREE_CODE (TREE_VALUE (type)) == INDIRECT_REF))\n+        error (\"can not use an object as parameter to a method\\n\");\n       if (!is_objc_type_qualifier (TREE_VALUE (chain)))\n \treturn type;\n     }"}, {"sha": "16cc4791d8784dabf4a4e8d93e3371c956c25143", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c40da518998023c0190b1667bce7aab3c6099f66/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c40da518998023c0190b1667bce7aab3c6099f66/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c40da518998023c0190b1667bce7aab3c6099f66", "patch": "@@ -1,3 +1,6 @@\n+2002-07-02 Devang Patel <dpatel@apple.com>\n+\t* objc.dg/param-1.m: New test.\n+\n 2002-07-03  Neil Booth  <neil@daikokuya.co.uk>\n \n \t* gcc.dg/cpp/trad/directive.c: Add test."}, {"sha": "e796a3b510772277cdd80b8d36a8169e76d1c643", "filename": "gcc/testsuite/objc.dg/param-1.m", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c40da518998023c0190b1667bce7aab3c6099f66/gcc%2Ftestsuite%2Fobjc.dg%2Fparam-1.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c40da518998023c0190b1667bce7aab3c6099f66/gcc%2Ftestsuite%2Fobjc.dg%2Fparam-1.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fparam-1.m?ref=c40da518998023c0190b1667bce7aab3c6099f66", "patch": "@@ -0,0 +1,20 @@\n+/* Test if compiler detects object as an parameter to a method\n+   or not. It is not valid.  */\n+/* { dg-do compile } */\n+\n+@interface foo\n+@end\n+\n+@implementation foo\n+@end\n+\n+@interface bar\n+-(void) my_method:(foo) my_param; /* { dg-error \"can not use an object as parameter to a method\" } */\n+@end\n+\n+@implementation bar\n+-(void) my_method:(foo) my_param /* { dg-error \"can not use an object as parameter to a method\" } */\n+{\n+}\n+@end\n+"}]}