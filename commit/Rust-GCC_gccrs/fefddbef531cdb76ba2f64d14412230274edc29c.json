{"sha": "fefddbef531cdb76ba2f64d14412230274edc29c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmVmZGRiZWY1MzFjZGI3NmJhMmY2NGQxNDQxMjIzMDI3NGVkYzI5Yw==", "commit": {"author": {"name": "Maxim Ostapenko", "email": "m.ostapenko@samsung.com", "date": "2016-04-21T12:19:54Z"}, "committer": {"name": "Maxim Ostapenko", "email": "chefmax@gcc.gnu.org", "date": "2016-04-21T12:19:54Z"}, "message": "Cherry-pick r266868 from upstream.\n\n\tPR sanitizer/70624                                                                                                             \n\t* asan/asan_mac.cc: Cherry pick upstream r266868.\n\nFrom-SVN: r235338", "tree": {"sha": "86e2a618afcde29289c3bef8c0129d1db3a35681", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/86e2a618afcde29289c3bef8c0129d1db3a35681"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fefddbef531cdb76ba2f64d14412230274edc29c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fefddbef531cdb76ba2f64d14412230274edc29c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fefddbef531cdb76ba2f64d14412230274edc29c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fefddbef531cdb76ba2f64d14412230274edc29c/comments", "author": null, "committer": null, "parents": [{"sha": "aef4aab0ccd07040e6471dfce538e2e8338a9ff8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aef4aab0ccd07040e6471dfce538e2e8338a9ff8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aef4aab0ccd07040e6471dfce538e2e8338a9ff8"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "1268507b92bd55ebf518743e23fc1f1c94db8711", "filename": "libsanitizer/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fefddbef531cdb76ba2f64d14412230274edc29c/libsanitizer%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fefddbef531cdb76ba2f64d14412230274edc29c/libsanitizer%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2FChangeLog?ref=fefddbef531cdb76ba2f64d14412230274edc29c", "patch": "@@ -1,3 +1,8 @@\n+2016-04-21  Maxim Ostapenko  <m.ostapenko@samsung.com>\n+\n+\tPR sanitizer/70624\n+\t* asan/asan_mac.cc: Cherry pick upstream r266868.\n+\n 2016-01-19  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR sanitizer/68824"}, {"sha": "ab3c6560825bd6ffa89d9f8fae9e16699f999b83", "filename": "libsanitizer/asan/asan_mac.cc", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fefddbef531cdb76ba2f64d14412230274edc29c/libsanitizer%2Fasan%2Fasan_mac.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fefddbef531cdb76ba2f64d14412230274edc29c/libsanitizer%2Fasan%2Fasan_mac.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fasan%2Fasan_mac.cc?ref=fefddbef531cdb76ba2f64d14412230274edc29c", "patch": "@@ -97,10 +97,14 @@ void DisableReexec() {\n   reexec_disabled = true;\n }\n \n-extern \"C\" double dyldVersionNumber;\n+extern \"C\" SANITIZER_WEAK_ATTRIBUTE double dyldVersionNumber;\n static const double kMinDyldVersionWithAutoInterposition = 360.0;\n \n bool DyldNeedsEnvVariable() {\n+  // Although sanitizer support was added to LLVM on OS X 10.7+, GCC users\n+  // still may want use them on older systems. On older Darwin platforms, dyld\n+  // doesn't export dyldVersionNumber symbol and we simply return true.\n+  if (!&dyldVersionNumber) return true;\n   // If running on OS X 10.11+ or iOS 9.0+, dyld will interpose even if\n   // DYLD_INSERT_LIBRARIES is not set. However, checking OS version via\n   // GetMacosVersion() doesn't work for the simulator. Let's instead check"}]}