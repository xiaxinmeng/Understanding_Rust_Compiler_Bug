{"sha": "ed8395a03db5445a6763771dca20cc6836f3ee5f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQ4Mzk1YTAzZGI1NDQ1YTY3NjM3NzFkY2EyMGNjNjgzNmYzZWU1Zg==", "commit": {"author": {"name": "Josef Zlomek", "email": "zlomekj@suse.cz", "date": "2003-08-05T04:22:05Z"}, "committer": {"name": "Josef Zlomek", "email": "zlomek@gcc.gnu.org", "date": "2003-08-05T04:22:05Z"}, "message": "* gcse.c (try_replace_reg): Fix updating of note.\n\nFrom-SVN: r70168", "tree": {"sha": "66f1f29f90809d3c972660038dc06da6496d2113", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/66f1f29f90809d3c972660038dc06da6496d2113"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed8395a03db5445a6763771dca20cc6836f3ee5f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed8395a03db5445a6763771dca20cc6836f3ee5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed8395a03db5445a6763771dca20cc6836f3ee5f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed8395a03db5445a6763771dca20cc6836f3ee5f/comments", "author": null, "committer": null, "parents": [{"sha": "ff66d28f7cf77786daf86a541aa0cfa28a150167", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff66d28f7cf77786daf86a541aa0cfa28a150167", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff66d28f7cf77786daf86a541aa0cfa28a150167"}], "stats": {"total": 14, "additions": 9, "deletions": 5}, "files": [{"sha": "8a2653cf736a3f8db6dbe1101e0c8dddd65866e9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed8395a03db5445a6763771dca20cc6836f3ee5f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed8395a03db5445a6763771dca20cc6836f3ee5f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ed8395a03db5445a6763771dca20cc6836f3ee5f", "patch": "@@ -1,3 +1,7 @@\n+2003-08-05  Josef Zlomek  <zlomekj@suse.cz>\n+\n+\t* gcse.c (try_replace_reg): Fix updating of note.\n+\n 2003-08-04  Roger Sayle  <roger@eyesopen.com>\n \n \tPR middle-end/11771"}, {"sha": "06f7fd9efa0e5c55f4e47217b0ce681e84aefad4", "filename": "gcc/gcse.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed8395a03db5445a6763771dca20cc6836f3ee5f/gcc%2Fgcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed8395a03db5445a6763771dca20cc6836f3ee5f/gcc%2Fgcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcse.c?ref=ed8395a03db5445a6763771dca20cc6836f3ee5f", "patch": "@@ -3849,6 +3849,11 @@ try_replace_reg (rtx from, rtx to, rtx insn)\n \tvalidate_change (insn, &SET_SRC (set), src, 0);\n     }\n \n+  /* If there is already a NOTE, update the expression in it with our\n+     replacement.  */\n+  if (note != 0)\n+    XEXP (note, 0) = simplify_replace_rtx (XEXP (note, 0), from, to);\n+\n   if (!success && set && reg_mentioned_p (from, SET_SRC (set)))\n     {\n       /* If above failed and this is a single set, try to simplify the source of\n@@ -3869,11 +3874,6 @@ try_replace_reg (rtx from, rtx to, rtx insn)\n \tnote = set_unique_reg_note (insn, REG_EQUAL, copy_rtx (src));\n     }\n \n-  /* If there is already a NOTE, update the expression in it with our\n-     replacement.  */\n-  else if (note != 0)\n-    XEXP (note, 0) = simplify_replace_rtx (XEXP (note, 0), from, to);\n-\n   /* REG_EQUAL may get simplified into register.\n      We don't allow that. Remove that note. This code ought\n      not to happen, because previous code ought to synthesize"}]}