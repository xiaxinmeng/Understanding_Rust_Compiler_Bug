{"sha": "15c5edb9219bffde7d0eb2c375115271d1621436", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTVjNWVkYjkyMTliZmZkZTdkMGViMmMzNzUxMTUyNzFkMTYyMTQzNg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1998-09-04T12:58:40Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "1998-09-04T12:58:40Z"}, "message": "gcc.c (do_spec_1): [case 'o'] Account for lang_specific_extra_outfiles.\n\n        * gcc.c (do_spec_1): [case 'o'] Account for\n        lang_specific_extra_outfiles.\n        (main): Correctly clear all slots in outfiles for\n        lang_specific_extra_outfiles.  Set input_file_number before\n        calling lang_specific_pre_link.\n\nFrom-SVN: r22234", "tree": {"sha": "a3461dd7c0404ab3c731511cb1f2847c7b234905", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3461dd7c0404ab3c731511cb1f2847c7b234905"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/15c5edb9219bffde7d0eb2c375115271d1621436", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15c5edb9219bffde7d0eb2c375115271d1621436", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15c5edb9219bffde7d0eb2c375115271d1621436", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15c5edb9219bffde7d0eb2c375115271d1621436/comments", "author": null, "committer": null, "parents": [{"sha": "cabc336a5ef33546fa4330972415152e59174ef8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cabc336a5ef33546fa4330972415152e59174ef8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cabc336a5ef33546fa4330972415152e59174ef8"}], "stats": {"total": 34, "additions": 27, "deletions": 7}, "files": [{"sha": "3e8dedb7d71fbb2f60b3db33fdd33ad13562cdd0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15c5edb9219bffde7d0eb2c375115271d1621436/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15c5edb9219bffde7d0eb2c375115271d1621436/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=15c5edb9219bffde7d0eb2c375115271d1621436", "patch": "@@ -1,3 +1,11 @@\n+Fri Sep  4 11:57:50 1998  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* gcc.c (do_spec_1): [case 'o'] Account for\n+\tlang_specific_extra_outfiles.\n+\t(main): Correctly clear all slots in outfiles for\n+\tlang_specific_extra_outfiles.  Set input_file_number before\n+\tcalling lang_specific_pre_link.\n+\n Fri Sep  4 10:37:07 1998  Jim Wilson  <wilson@cygnus.com>\n \n \t* loop.c (load_mems): Fix JUMP_LABEL field after for_each_rtx call."}, {"sha": "f832ae21f03e82646dd238fea71f0a56e7ce1705", "filename": "gcc/gcc.c", "status": "modified", "additions": 19, "deletions": 7, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15c5edb9219bffde7d0eb2c375115271d1621436/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15c5edb9219bffde7d0eb2c375115271d1621436/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=15c5edb9219bffde7d0eb2c375115271d1621436", "patch": "@@ -3732,9 +3732,16 @@ do_spec_1 (spec, inswitch, soft_matched_part)\n \t    break;\n \n \t  case 'o':\n-\t    for (i = 0; i < n_infiles; i++)\n-\t      store_arg (outfiles[i], 0, 0);\n-\t    break;\n+\t    {\n+\t      int max = n_infiles;\n+#ifdef LANG_SPECIFIC_DRIVER\n+\t      max += lang_specific_extra_outfiles;\n+#endif\n+\t      for (i = 0; i < max; i++)\n+\t\tif (outfiles[i])\n+\t\t  store_arg (outfiles[i], 0, 0);\n+\t      break;\n+\t    }\n \n \t  case 'O':\n \t    obstack_grow (&obstack, OBJECT_SUFFIX, strlen (OBJECT_SUFFIX));\n@@ -4984,7 +4991,7 @@ main (argc, argv)\n   i += lang_specific_extra_outfiles;\n #endif\n   outfiles = (char **) xmalloc (i * sizeof (char *));\n-  bzero ((char *) outfiles, n_infiles * sizeof (char *));\n+  bzero ((char *) outfiles, i * sizeof (char *));\n \n   /* Record which files were specified explicitly as link input.  */\n \n@@ -5080,9 +5087,14 @@ main (argc, argv)\n     }\n \n #ifdef LANG_SPECIFIC_DRIVER\n-  if (error_count == 0\n-      && lang_specific_pre_link ())\n-    error_count++;\n+  if (error_count == 0)\n+    {\n+      /* Make sure INPUT_FILE_NUMBER points to first available open\n+\t slot.  */\n+      input_file_number = n_infiles;\n+      if (lang_specific_pre_link ())\n+\terror_count++;\n+    }\n #endif\n \n   /* Run ld to link all the compiler output files.  */"}]}