{"sha": "ba3b38784c486a363d676df2543be51d0eb357a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmEzYjM4Nzg0YzQ4NmEzNjNkNjc2ZGYyNTQzYmU1MWQwZWIzNTdhMA==", "commit": {"author": {"name": "Brendan Kehoe", "email": "brendan@lisa.cygnus.com", "date": "1997-10-28T23:39:28Z"}, "committer": {"name": "Brendan Kehoe", "email": "brendan@gcc.gnu.org", "date": "1997-10-28T23:39:28Z"}, "message": "global.c (global_alloc): Use xmalloc instead of alloca for CONFLICTS...\n\n\t* global.c (global_alloc): Use xmalloc instead of alloca for\n\tCONFLICTS, since max_allocno * allocno_row_words alone can be more\n\tthan 2.5Mb sometimes.\n\nFrom-SVN: r16223", "tree": {"sha": "6e9ce222eb9af1aad3826cc235ca09e70aec95c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6e9ce222eb9af1aad3826cc235ca09e70aec95c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba3b38784c486a363d676df2543be51d0eb357a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba3b38784c486a363d676df2543be51d0eb357a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba3b38784c486a363d676df2543be51d0eb357a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba3b38784c486a363d676df2543be51d0eb357a0/comments", "author": null, "committer": null, "parents": [{"sha": "d540ae2cd874aeb3c4b07cdc0b25e1229eb4bf06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d540ae2cd874aeb3c4b07cdc0b25e1229eb4bf06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d540ae2cd874aeb3c4b07cdc0b25e1229eb4bf06"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "182a76e1ef6f4a75f8ddd8c9ef3185ba10b04287", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba3b38784c486a363d676df2543be51d0eb357a0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba3b38784c486a363d676df2543be51d0eb357a0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ba3b38784c486a363d676df2543be51d0eb357a0", "patch": "@@ -1,3 +1,9 @@\n+1997-10-28  Brendan Kehoe  <brendan@lisa.cygnus.com>\n+\n+\t* global.c (global_alloc): Use xmalloc instead of alloca for\n+\tCONFLICTS, since max_allocno * allocno_row_words alone can be more\n+\tthan 2.5Mb sometimes.\n+\n Tue Oct 28 15:29:15 1997  Richard Henderson  <rth@cygnus.com>\n \n \t* reload1.c (eliminate_regs [SET]): If [SUBREG] widened the mode of"}, {"sha": "0480ebf3c4dc868f85925f8965b07f3d36538797", "filename": "gcc/global.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba3b38784c486a363d676df2543be51d0eb357a0/gcc%2Fglobal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba3b38784c486a363d676df2543be51d0eb357a0/gcc%2Fglobal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fglobal.c?ref=ba3b38784c486a363d676df2543be51d0eb357a0", "patch": "@@ -486,8 +486,11 @@ global_alloc (file)\n \n   allocno_row_words = (max_allocno + INT_BITS - 1) / INT_BITS;\n \n-  conflicts = (INT_TYPE *) alloca (max_allocno * allocno_row_words\n-\t\t\t\t   * sizeof (INT_TYPE));\n+  /* We used to use alloca here, but the size of what it would try to\n+     allocate would occasionally cause it to exceed the stack limit and\n+     cause unpredictable core dumps.  Some examples were > 2Mb in size.  */\n+  conflicts = (INT_TYPE *) xmalloc (max_allocno * allocno_row_words\n+\t\t\t\t    * sizeof (INT_TYPE));\n   bzero ((char *) conflicts,\n \t max_allocno * allocno_row_words * sizeof (INT_TYPE));\n \n@@ -570,6 +573,8 @@ global_alloc (file)\n \t  }\n     }\n \n+  free (conflicts);\n+\n   /* Do the reloads now while the allocno data still exist, so that we can\n      try to assign new hard regs to any pseudo regs that are spilled.  */\n "}]}