{"sha": "0d30d435868d023a0a4684454c401380d5650351", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGQzMGQ0MzU4NjhkMDIzYTBhNDY4NDQ1NGM0MDEzODBkNTY1MDM1MQ==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2001-05-15T04:26:33Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2001-05-15T04:26:33Z"}, "message": "rs6000.c (num_insns_constant_wide): Constants are sign-extended.\n\n        * rs6000.c (num_insns_constant_wide): Constants are sign-extended.\n        (num_insns_constant): CONST_INT can be 64-bits.\n\nFrom-SVN: r42099", "tree": {"sha": "b93f6cbf0f570d26cbd6923b8f4732f4dd3d944c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b93f6cbf0f570d26cbd6923b8f4732f4dd3d944c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0d30d435868d023a0a4684454c401380d5650351", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d30d435868d023a0a4684454c401380d5650351", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d30d435868d023a0a4684454c401380d5650351", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d30d435868d023a0a4684454c401380d5650351/comments", "author": null, "committer": null, "parents": [{"sha": "0239bfdd63d58b68e2860282fe66ab47a96cd23b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0239bfdd63d58b68e2860282fe66ab47a96cd23b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0239bfdd63d58b68e2860282fe66ab47a96cd23b"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "d4cdef9e06b6d32d61207d02aa716ff86341f82b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d30d435868d023a0a4684454c401380d5650351/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d30d435868d023a0a4684454c401380d5650351/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0d30d435868d023a0a4684454c401380d5650351", "patch": "@@ -1,3 +1,8 @@\n+2001-05-14  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* rs6000.c (num_insns_constant_wide): Constants are sign-extended.\n+\t(num_insns_constant): CONST_INT can be 64-bits.\n+\n 2001-05-14  Stan Shebs  <shebs@apple.com>\n \n \t* config/darwin.h (LIB_SPEC): Just use -lSystem."}, {"sha": "a2b6b944384737127b70e42dc99770e06d7f4cdf", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d30d435868d023a0a4684454c401380d5650351/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d30d435868d023a0a4684454c401380d5650351/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=0d30d435868d023a0a4684454c401380d5650351", "patch": "@@ -754,9 +754,11 @@ num_insns_constant_wide (value)\n #if HOST_BITS_PER_WIDE_INT == 64\n   else if (TARGET_POWERPC64)\n     {\n-      unsigned HOST_WIDE_INT low  = value & 0xffffffff;\n+      HOST_WIDE_INT low  = value & 0xffffffff;\n       HOST_WIDE_INT high = value >> 32;\n \n+      low = (low ^ 0x80000000) - 0x80000000;  /* sign extend */\n+\n       if (high == 0 && (low & 0x80000000) == 0)\n \treturn 2;\n \n@@ -782,7 +784,14 @@ num_insns_constant (op, mode)\n      enum machine_mode mode;\n {\n   if (GET_CODE (op) == CONST_INT)\n-    return num_insns_constant_wide (INTVAL (op));\n+    {\n+#if HOST_BITS_PER_WIDE_INT == 64\n+      if (mask64_operand (op, mode))\n+\t    return 2;\n+      else\n+#endif\n+\treturn num_insns_constant_wide (INTVAL (op));\n+    }\n \n   else if (GET_CODE (op) == CONST_DOUBLE && mode == SFmode)\n     {"}]}