{"sha": "2eef7403a010176fe462257b6b29981e78d35602", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmVlZjc0MDNhMDEwMTc2ZmU0NjIyNTdiNmIyOTk4MWU3OGQzNTYwMg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-08-06T08:41:41Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-08-06T08:41:41Z"}, "message": "[multiple changes]\n\n2012-08-06  Robert Dewar  <dewar@adacore.com>\n\n\t* xoscons.adb: Minor code reorganization (remove unused variable\n\tE at line 331).\n\t* g-sercom.ads, exp_attr.adb: Minor reformatting.\n\t* sinfo.adb, sinfo.ads: Minor cleanup, remove unused flag\n\tStatic_Processing_OK.\n\n2012-08-06  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch3.adb (Build_Derived_Concurrent_Type): Copy discriminant\n\tconstraint when building a constrained subtype, to prevent\n\tundesirable tree sharing betweeb geberated subtype and derived\n\ttype definition.\n\n2012-08-06  Thomas Quinot  <quinot@adacore.com>\n\n\t* g-sercom-mingw.adb, s-oscons-tmplt.c: Add missing constants\n\ton Windows.\n\n2012-08-06  Sergey Rybin  <rybin@adacore.com frybin>\n\n\t* tree_io.ads: Update ASIS_Version_Number because of the tree fix\n\tfor discriminant constraints for concurrent types.\n\nFrom-SVN: r190171", "tree": {"sha": "299b07e568e65b558c71258870a2d29ec85faa2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/299b07e568e65b558c71258870a2d29ec85faa2b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2eef7403a010176fe462257b6b29981e78d35602", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2eef7403a010176fe462257b6b29981e78d35602", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2eef7403a010176fe462257b6b29981e78d35602", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2eef7403a010176fe462257b6b29981e78d35602/comments", "author": null, "committer": null, "parents": [{"sha": "cc6c4d6288d286bfd45dbc82b011f5cb6bc269a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc6c4d6288d286bfd45dbc82b011f5cb6bc269a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc6c4d6288d286bfd45dbc82b011f5cb6bc269a5"}], "stats": {"total": 147, "additions": 87, "deletions": 60}, "files": [{"sha": "c48bf74671bc3ea3fcfb93bb8b1c2311d40e5d13", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=2eef7403a010176fe462257b6b29981e78d35602", "patch": "@@ -1,3 +1,28 @@\n+2012-08-06  Robert Dewar  <dewar@adacore.com>\n+\n+\t* xoscons.adb: Minor code reorganization (remove unused variable\n+\tE at line 331).\n+\t* g-sercom.ads, exp_attr.adb: Minor reformatting.\n+\t* sinfo.adb, sinfo.ads: Minor cleanup, remove unused flag\n+\tStatic_Processing_OK.\n+\n+2012-08-06  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch3.adb (Build_Derived_Concurrent_Type): Copy discriminant\n+\tconstraint when building a constrained subtype, to prevent\n+\tundesirable tree sharing betweeb geberated subtype and derived\n+\ttype definition.\n+\n+2012-08-06  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* g-sercom-mingw.adb, s-oscons-tmplt.c: Add missing constants\n+\ton Windows.\n+\n+2012-08-06  Sergey Rybin  <rybin@adacore.com frybin>\n+\n+\t* tree_io.ads: Update ASIS_Version_Number because of the tree fix\n+\tfor discriminant constraints for concurrent types.\n+\n 2012-08-06  Thomas Quinot  <quinot@adacore.com>\n \n \t* sem_ch4.adb: Minor reformatting."}, {"sha": "105df466bec08a9a567a0a2cc740b348a7237416", "filename": "gcc/ada/exp_attr.adb", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fexp_attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fexp_attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_attr.adb?ref=2eef7403a010176fe462257b6b29981e78d35602", "patch": "@@ -835,6 +835,11 @@ package body Exp_Attr is\n \n       --  Remaining processing depends on specific attribute\n \n+      --  Note: individual sections of the following case statement are\n+      --  allowed to assume there is no code after the case statement, and\n+      --  are legitimately allowed to execute return statements if they have\n+      --  nothing more to do.\n+\n       case Id is\n \n       --  Attributes related to Ada 2012 iterators (placeholder ???)\n@@ -6074,6 +6079,11 @@ package body Exp_Attr is\n          null;\n       end case;\n \n+   --  Note: as mentioned earlier, individual sections of the above case\n+   --  statement assume there is no code after the case statement, and are\n+   --  legitimately allowed to execute return statements if they have nothing\n+   --  more to do, so DO NOT add code at this point.\n+\n    exception\n       when RE_Not_Available =>\n          return;"}, {"sha": "afc4d4773beda7c67f963c20960341eebdf2e447", "filename": "gcc/ada/g-sercom-mingw.adb", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fg-sercom-mingw.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fg-sercom-mingw.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-sercom-mingw.adb?ref=2eef7403a010176fe462257b6b29981e78d35602", "patch": "@@ -37,11 +37,14 @@ with Ada.Streams;                use Ada.Streams;\n with System;               use System;\n with System.Communication; use System.Communication;\n with System.CRTL;          use System.CRTL;\n+with System.OS_Constants;\n with System.Win32;         use System.Win32;\n with System.Win32.Ext;     use System.Win32.Ext;\n \n package body GNAT.Serial_Communications is\n \n+   package OSC renames System.OS_Constants;\n+\n    --  Common types\n \n    type Port_Data is new HANDLE;\n@@ -203,9 +206,9 @@ package body GNAT.Serial_Communications is\n       Com_Settings.fBinary         := Bits1 (System.Win32.TRUE);\n       Com_Settings.fOutxDsrFlow    := 0;\n       Com_Settings.fDsrSensitivity := 0;\n-      Com_Settings.fDtrControl     := DTR_CONTROL_ENABLE;\n+      Com_Settings.fDtrControl     := OSC.DTR_CONTROL_ENABLE;\n       Com_Settings.fInX            := 0;\n-      Com_Settings.fRtsControl     := RTS_CONTROL_ENABLE;\n+      Com_Settings.fRtsControl     := OSC.RTS_CONTROL_ENABLE;\n \n       case Flow is\n          when None =>"}, {"sha": "573eba280b6a713ca34212fede75b636d59b1f0f", "filename": "gcc/ada/g-sercom.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fg-sercom.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fg-sercom.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-sercom.ads?ref=2eef7403a010176fe462257b6b29981e78d35602", "patch": "@@ -87,8 +87,8 @@ package GNAT.Serial_Communications is\n    --  will wait for the whole buffer to be filed. If Block is not set then\n    --  the given Timeout (in seconds) is used. If Local is set then modem\n    --  control lines (in particular DCD) are ignored (not supported on\n-   --  Windows).\n-\n+   --  Windows). Flow indicates the flow control type as defined above.\n+   --\n    --  Note that the timeout precision may be limited on some implementation\n    --  (e.g. on GNU/Linux the maximum precision is a tenth of seconds).\n "}, {"sha": "bfd46ddf6a5b769e6040fd5f269ac6a053b601da", "filename": "gcc/ada/s-oscons-tmplt.c", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fs-oscons-tmplt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fs-oscons-tmplt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-oscons-tmplt.c?ref=2eef7403a010176fe462257b6b29981e78d35602", "patch": "@@ -156,6 +156,10 @@ pragma Style_Checks (\"M32766\");\n # include <signal.h>\n #endif\n \n+#ifdef __MINGW32__\n+# include <winbase.h>\n+#endif\n+\n #ifdef NATIVE\n #include <stdio.h>\n \n@@ -621,11 +625,9 @@ CND(E2BIG, \"Argument list too long\")\n CND(EILSEQ, \"Illegal byte sequence\")\n \n /**\n- **  Terminal I/O constants\n+ **  Terminal/serial I/O constants\n  **/\n \n-#ifdef HAVE_TERMIOS\n-\n /*\n \n    ----------------------\n@@ -634,6 +636,8 @@ CND(EILSEQ, \"Illegal byte sequence\")\n \n */\n \n+#ifdef HAVE_TERMIOS\n+\n #ifndef TCSANOW\n # define TCSANOW -1\n #endif\n@@ -949,6 +953,11 @@ CND(VEOL2, \"Alternative EOL\")\n \n #endif /* HAVE_TERMIOS */\n \n+#ifdef __MINGW32__\n+CNU(DTR_CONTROL_ENABLE, \"Enable DTR flow ctrl\")\n+CNU(RTS_CONTROL_ENABLE, \"Enable RTS flow ctrl\")\n+#endif\n+\n /*\n \n    -----------------------------"}, {"sha": "9a690fdf0fa6c53a54f4bf49e68ecc0d7f7cd21c", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=2eef7403a010176fe462257b6b29981e78d35602", "patch": "@@ -5432,7 +5432,8 @@ package body Sem_Ch3 is\n \n       elsif Constraint_Present then\n \n-         --  Build constrained subtype and derive from it\n+         --  Build constrained subtype, copying the constraint, and derive\n+         --  from it to create a derived constrained type.\n \n          declare\n             Loc  : constant Source_Ptr := Sloc (N);\n@@ -5446,7 +5447,7 @@ package body Sem_Ch3 is\n               Make_Subtype_Declaration (Loc,\n                 Defining_Identifier => Anon,\n                 Subtype_Indication =>\n-                  Subtype_Indication (Type_Definition (N)));\n+                  New_Copy_Tree (Subtype_Indication (Type_Definition (N))));\n             Insert_Before (N, Decl);\n             Analyze (Decl);\n "}, {"sha": "d2413ad2c1b8ba06a2c0d086667636cdaad08a16", "filename": "gcc/ada/sinfo.adb", "status": "modified", "additions": 0, "deletions": 16, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fsinfo.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fsinfo.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsinfo.adb?ref=2eef7403a010176fe462257b6b29981e78d35602", "patch": "@@ -2844,14 +2844,6 @@ package body Sinfo is\n       return List3 (N);\n    end Statements;\n \n-   function Static_Processing_OK\n-      (N : Node_Id) return Boolean is\n-   begin\n-      pragma Assert (False\n-        or else NT (N).Nkind = N_Aggregate);\n-      return Flag4 (N);\n-   end Static_Processing_OK;\n-\n    function Storage_Pool\n       (N : Node_Id) return Node_Id is\n    begin\n@@ -5905,14 +5897,6 @@ package body Sinfo is\n       Set_List3_With_Parent (N, Val);\n    end Set_Statements;\n \n-   procedure Set_Static_Processing_OK\n-      (N : Node_Id; Val : Boolean) is\n-   begin\n-      pragma Assert (False\n-        or else NT (N).Nkind = N_Aggregate);\n-      Set_Flag4 (N, Val);\n-   end Set_Static_Processing_OK;\n-\n    procedure Set_Storage_Pool\n       (N : Node_Id; Val : Node_Id) is\n    begin"}, {"sha": "8492948f4fe81711bc528ef18d19d929bdb3ee2a", "filename": "gcc/ada/sinfo.ads", "status": "modified", "additions": 1, "deletions": 21, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fsinfo.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fsinfo.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsinfo.ads?ref=2eef7403a010176fe462257b6b29981e78d35602", "patch": "@@ -670,7 +670,7 @@ package Sinfo is\n    --    evaluated at compile time without raising constraint error. Such\n    --    aggregates can be passed as is to Gigi without any expansion. See\n    --    Sem_Aggr for the specific conditions under which an aggregate has this\n-   --    flag set. See also the flag Static_Processing_OK.\n+   --    flag set.\n \n    --  Componentwise_Assignment (Flag14-Sem)\n    --    Present in N_Assignment_Statement nodes. Set for a record assignment\n@@ -1725,17 +1725,6 @@ package Sinfo is\n    --    This flag is set in both the N_Aspect_Specification node itself,\n    --    and in the pragma which is generated from this node.\n \n-   --  Static_Processing_OK (Flag4-Sem)\n-   --    Present in N_Aggregate nodes. When the Compile_Time_Known_Aggregate\n-   --    flag is set, the full value of the aggregate can be determined at\n-   --    compile time and the aggregate can be passed as is to the back-end.\n-   --    In this event it is irrelevant whether this flag is set or not.\n-   --    However, if the flag Compile_Time_Known_Aggregate is not set but\n-   --    Static_Processing_OK is set, the aggregate can (but need not) be\n-   --    converted into a compile time known aggregate by the expander. See\n-   --    Sem_Aggr for the specific conditions under which an aggregate has its\n-   --    Static_Processing_OK flag set.\n-\n    --  Storage_Pool (Node1-Sem)\n    --    Present in N_Allocator, N_Free_Statement, N_Simple_Return_Statement,\n    --    and N_Extended_Return_Statement nodes. References the entity for the\n@@ -3391,7 +3380,6 @@ package Sinfo is\n       --  Null_Record_Present (Flag17)\n       --  Aggregate_Bounds (Node3-Sem)\n       --  Associated_Node (Node4-Sem)\n-      --  Static_Processing_OK (Flag4-Sem)\n       --  Compile_Time_Known_Aggregate (Flag18-Sem)\n       --  Expansion_Delayed (Flag11-Sem)\n       --  Has_Self_Reference (Flag13-Sem)\n@@ -8969,9 +8957,6 @@ package Sinfo is\n    function Statements\n      (N : Node_Id) return List_Id;    -- List3\n \n-   function Static_Processing_OK\n-     (N : Node_Id) return Boolean;    -- Flag4\n-\n    function Storage_Pool\n      (N : Node_Id) return Node_Id;    -- Node1\n \n@@ -9944,9 +9929,6 @@ package Sinfo is\n    procedure Set_Statements\n      (N : Node_Id; Val : List_Id);            -- List3\n \n-   procedure Set_Static_Processing_OK\n-     (N : Node_Id; Val : Boolean);            -- Flag4\n-\n    procedure Set_Storage_Pool\n      (N : Node_Id; Val : Node_Id);            -- Node1\n \n@@ -12074,7 +12056,6 @@ package Sinfo is\n    pragma Inline (Specification);\n    pragma Inline (Split_PPC);\n    pragma Inline (Statements);\n-   pragma Inline (Static_Processing_OK);\n    pragma Inline (Storage_Pool);\n    pragma Inline (Subpool_Handle_Name);\n    pragma Inline (Strval);\n@@ -12394,7 +12375,6 @@ package Sinfo is\n    pragma Inline (Set_Specification);\n    pragma Inline (Set_Split_PPC);\n    pragma Inline (Set_Statements);\n-   pragma Inline (Set_Static_Processing_OK);\n    pragma Inline (Set_Storage_Pool);\n    pragma Inline (Set_Subpool_Handle_Name);\n    pragma Inline (Set_Strval);"}, {"sha": "9fa2121f4cd270f281089601b7376beea6d713e3", "filename": "gcc/ada/tree_io.ads", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Ftree_io.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Ftree_io.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftree_io.ads?ref=2eef7403a010176fe462257b6b29981e78d35602", "patch": "@@ -47,7 +47,7 @@ package Tree_IO is\n    Tree_Format_Error : exception;\n    --  Raised if a format error is detected in the input file\n \n-   ASIS_Version_Number : constant := 28;\n+   ASIS_Version_Number : constant := 29;\n    --  ASIS Version. This is used to check for consistency between the compiler\n    --  used to generate trees and an ASIS application that is reading the\n    --  trees. It must be incremented whenever a change is made to the tree\n@@ -56,6 +56,8 @@ package Tree_IO is\n    --\n    --  27  Changes in the tree structures for expression functions\n    --  28  Changes in Snames\n+   --  29  Changes in Sem_Ch3 (tree copying in case of discriminant constraint\n+   --      for concurrent types).\n \n    procedure Tree_Read_Initialize (Desc : File_Descriptor);\n    --  Called to initialize reading of a tree file. This call must be made"}, {"sha": "c740aa25383f261a8f14d530f7511687302a7c73", "filename": "gcc/ada/xoscons.adb", "status": "modified", "additions": 26, "deletions": 13, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fxoscons.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eef7403a010176fe462257b6b29981e78d35602/gcc%2Fada%2Fxoscons.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fxoscons.adb?ref=2eef7403a010176fe462257b6b29981e78d35602", "patch": "@@ -45,7 +45,7 @@ pragma Warnings (On);\n \n with GNAT.Table;\n \n-with XUtil;                   use XUtil;\n+with XUtil; use XUtil;\n \n procedure XOSCons is\n \n@@ -178,10 +178,12 @@ procedure XOSCons is\n          Put (OFile, S);\n       end Put;\n \n+   --  Start of processing for Output_Info\n+\n    begin\n-      if Info.Kind /= TXT then\n-         --  TXT case is handled by the common code below\n+      --  Case of non-TXT case (TXT case handled by common code below)\n \n+      if Info.Kind /= TXT then\n          case Lang is\n             when Lang_Ada =>\n                Put (\"   \" & Info.Constant_Name.all);\n@@ -207,18 +209,22 @@ procedure XOSCons is\n             if not Info.Int_Value.Positive then\n                Put (\"-\");\n             end if;\n+\n             Put (Trim (Info.Int_Value.Abs_Value'Img, Side => Left));\n \n          else\n             declare\n                Is_String : constant Boolean :=\n                              Info.Kind = C\n                                and then Info.Constant_Type.all = \"String\";\n+\n             begin\n                if Is_String then\n                   Put (\"\"\"\");\n                end if;\n+\n                Put (Info.Text_Value.all);\n+\n                if Is_String then\n                   Put (\"\"\"\");\n                end if;\n@@ -290,6 +296,7 @@ procedure XOSCons is\n       is\n          First    : Integer := S'First;\n          Result   : Int_Value_Type;\n+\n       begin\n          --  On some platforms, immediate integer values are prefixed with\n          --  a $ or # character in assembly output.\n@@ -300,14 +307,15 @@ procedure XOSCons is\n \n          if S (First) = '-' then\n             Result.Positive := False;\n-            First    := First + 1;\n+            First := First + 1;\n          else\n             Result.Positive := True;\n          end if;\n \n          Result.Abs_Value := Long_Unsigned'Value (S (First .. S'Last));\n \n          if not Result.Positive and then K = CNU then\n+\n             --  Negative value, but unsigned expected: take 2's complement\n             --  reciprocical value.\n \n@@ -320,7 +328,7 @@ procedure XOSCons is\n          return Result;\n \n       exception\n-         when E : others =>\n+         when others =>\n             Put_Line (Standard_Error, \"can't parse decimal value: \" & S);\n             raise;\n       end Parse_Int;\n@@ -346,6 +354,7 @@ procedure XOSCons is\n                Find_Colon (Index2);\n \n                Info.Constant_Name := Field_Alloc;\n+\n                if Info.Constant_Name'Length > Max_Constant_Name_Len then\n                   Max_Constant_Name_Len := Info.Constant_Name'Length;\n                end if;\n@@ -355,6 +364,7 @@ procedure XOSCons is\n \n                if Info.Kind = C then\n                   Info.Constant_Type := Field_Alloc;\n+\n                   if Info.Constant_Type'Length > Max_Constant_Type_Len then\n                      Max_Constant_Type_Len := Info.Constant_Type'Length;\n                   end if;\n@@ -367,6 +377,7 @@ procedure XOSCons is\n                   Info.Int_Value :=\n                     Parse_Int (Line (Index1 .. Index2 - 1), Info.Kind);\n                   Info.Value_Len := Info.Int_Value.Abs_Value'Img'Length - 1;\n+\n                   if not Info.Int_Value.Positive then\n                      Info.Value_Len := Info.Value_Len + 1;\n                   end if;\n@@ -403,12 +414,13 @@ procedure XOSCons is\n \n          Asm_Infos.Append (Info);\n       end;\n+\n    exception\n       when E : others =>\n-         Put_Line (Standard_Error,\n-           \"can't parse \" & Line);\n-         Put_Line (Standard_Error,\n-           \"exception raised: \" & Exception_Information (E));\n+         Put_Line\n+           (Standard_Error, \"can't parse \" & Line);\n+         Put_Line\n+           (Standard_Error, \"exception raised: \" & Exception_Information (E));\n    end Parse_Asm_Line;\n \n    ------------\n@@ -433,8 +445,8 @@ procedure XOSCons is\n \n    --  Output files\n \n-   Ada_File_Name  : constant String := Unit_Name & \".ads\";\n-   C_File_Name    : constant String := Unit_Name & \".h\";\n+   Ada_File_Name : constant String := Unit_Name & \".ads\";\n+   C_File_Name   : constant String := Unit_Name & \".h\";\n \n    Asm_File  : Ada.Text_IO.File_Type;\n    Tmpl_File : Ada.Text_IO.File_Type;\n@@ -456,7 +468,6 @@ begin\n    --  Load values from assembly file\n \n    Open (Asm_File, In_File, Asm_File_Name);\n-\n    while not End_Of_File (Asm_File) loop\n       Get_Line (Asm_File, Line, Last);\n       if Last > 2 and then Line (1 .. 2) = \"->\" then\n@@ -482,8 +493,10 @@ begin\n \n       if Last >= 2 and then Line (1 .. 2) = \"# \" then\n          declare\n-            Index : Integer := 3;\n+            Index : Integer;\n+\n          begin\n+            Index := 3;\n             while Index <= Last and then Line (Index) in '0' .. '9' loop\n                Index := Index + 1;\n             end loop;"}]}