{"sha": "e71d7f88ba619aab4d53468d4f26e97a670842dd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTcxZDdmODhiYTYxOWFhYjRkNTM0NjhkNGYyNmU5N2E2NzA4NDJkZA==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "dvorakz@suse.cz", "date": "2007-05-10T21:33:11Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2007-05-10T21:33:11Z"}, "message": "re PR tree-optimization/31885 (Not removing empty loop, scev not finding the correct result)\n\n\tPR tree-optimization/31885\n\t* tree-chrec.c (chrec_contains_undetermined): Do not consider NULL_TREE\n\tto be undetermined.\n\t(automatically_generated_chrec_p): Return false for NULL.\n\n\t* gcc.dg/tree-ssa/loop-29.c: New test.\n\nFrom-SVN: r124602", "tree": {"sha": "5bd5f7053c0c0609d3643ee5d62d5626410a8069", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5bd5f7053c0c0609d3643ee5d62d5626410a8069"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e71d7f88ba619aab4d53468d4f26e97a670842dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e71d7f88ba619aab4d53468d4f26e97a670842dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e71d7f88ba619aab4d53468d4f26e97a670842dd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e71d7f88ba619aab4d53468d4f26e97a670842dd/comments", "author": null, "committer": null, "parents": [{"sha": "5635c26e579161430860f8f85941949ccf586f1d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5635c26e579161430860f8f85941949ccf586f1d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5635c26e579161430860f8f85941949ccf586f1d"}], "stats": {"total": 43, "additions": 38, "deletions": 5}, "files": [{"sha": "40867e98cdfdbcec7ab883235d7d44e78fb448ce", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e71d7f88ba619aab4d53468d4f26e97a670842dd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e71d7f88ba619aab4d53468d4f26e97a670842dd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e71d7f88ba619aab4d53468d4f26e97a670842dd", "patch": "@@ -1,3 +1,10 @@\n+2007-05-10  Zdenek Dvorak  <dvorakz@suse.cz>\n+\n+\tPR tree-optimization/31885\n+\t* tree-chrec.c (chrec_contains_undetermined): Do not consider NULL_TREE\n+\tto be undetermined.\n+\t(automatically_generated_chrec_p): Return false for NULL.\n+\n 2007-05-08  Bernd Schmidt  <bernd.schmidt@analog.com>\n \n \t* config/bfin/bfin.h (MOVE_RATIO): Define."}, {"sha": "c0e3d1e23270f192d9e6744fe8beec9255f64a0d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e71d7f88ba619aab4d53468d4f26e97a670842dd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e71d7f88ba619aab4d53468d4f26e97a670842dd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e71d7f88ba619aab4d53468d4f26e97a670842dd", "patch": "@@ -1,3 +1,8 @@\n+2007-05-10  Zdenek Dvorak  <dvorakz@suse.cz>\n+\n+\tPR tree-optimization/31885\n+\t* gcc.dg/tree-ssa/loop-29.c: New test.\n+\n 2007-05-10 Dominique d'Humi\ufffdres <dominiq@lps.ens.fr>\n \n \t* assumed_dummy_1.f90: Fix dg directive."}, {"sha": "13699aafd622103d2c29851f21528192a87c2a7d", "filename": "gcc/testsuite/gcc.dg/tree-ssa/loop-29.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e71d7f88ba619aab4d53468d4f26e97a670842dd/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Floop-29.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e71d7f88ba619aab4d53468d4f26e97a670842dd/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Floop-29.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Floop-29.c?ref=e71d7f88ba619aab4d53468d4f26e97a670842dd", "patch": "@@ -0,0 +1,21 @@\n+/* PR 31885 */\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-O1 -fdump-tree-empty\" } */\n+\n+struct s {\n+    int *blah;\n+};\n+\n+static struct s array[] = { { 0 } };\n+\n+void\n+foo (struct s *p)\n+{\n+  struct s *q = &array[1];\n+  while (p < q)\n+    p++;\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"Removing empty loop\" 1 \"empty\" } } */\n+/* { dg-final { cleanup-tree-dump \"empty\" } } */"}, {"sha": "7abd5ad519f2e3a686f3c64ec2e745e0b1d0fe0f", "filename": "gcc/tree-chrec.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e71d7f88ba619aab4d53468d4f26e97a670842dd/gcc%2Ftree-chrec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e71d7f88ba619aab4d53468d4f26e97a670842dd/gcc%2Ftree-chrec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-chrec.c?ref=e71d7f88ba619aab4d53468d4f26e97a670842dd", "patch": "@@ -888,11 +888,12 @@ chrec_contains_undetermined (tree chrec)\n {\n   int i, n;\n \n-  if (chrec == chrec_dont_know\n-      || chrec == chrec_not_analyzed_yet\n-      || chrec == NULL_TREE)\n+  if (chrec == chrec_dont_know)\n     return true;\n \n+  if (chrec == NULL_TREE)\n+    return false;\n+\n   n = TREE_OPERAND_LENGTH (chrec);\n   for (i = 0; i < n; i++)\n     if (chrec_contains_undetermined (TREE_OPERAND (chrec, i)))"}, {"sha": "6be00d63165271a8b9e70b096f13aba11be0f4d8", "filename": "gcc/tree-chrec.h", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e71d7f88ba619aab4d53468d4f26e97a670842dd/gcc%2Ftree-chrec.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e71d7f88ba619aab4d53468d4f26e97a670842dd/gcc%2Ftree-chrec.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-chrec.h?ref=e71d7f88ba619aab4d53468d4f26e97a670842dd", "patch": "@@ -36,8 +36,7 @@ extern GTY(()) tree chrec_known;\n static inline bool\n automatically_generated_chrec_p (tree chrec)\n {\n-  return (chrec == chrec_not_analyzed_yet \n-\t  || chrec == chrec_dont_know\n+  return (chrec == chrec_dont_know\n \t  || chrec == chrec_known);\n }\n "}]}