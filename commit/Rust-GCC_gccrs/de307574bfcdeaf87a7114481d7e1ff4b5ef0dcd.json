{"sha": "de307574bfcdeaf87a7114481d7e1ff4b5ef0dcd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGUzMDc1NzRiZmNkZWFmODdhNzExNDQ4MWQ3ZTFmZjRiNWVmMGRjZA==", "commit": {"author": {"name": "Alexandre Petit-Bianco", "email": "apbianco@redhat.com", "date": "2001-04-04T17:56:25Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2001-04-04T17:56:25Z"}, "message": "re PR java/1074 (jv-scan fails on ArrayClass.java)\n\n2001-03-30  Alexandre Petit-Bianco  <apbianco@redhat.com>\n\n\t* parse-scan.y (array_type:): Rewritten.\n\t(type_declaration:): `empty_statement' replaces `SC_TK.'\n\t(class_member_declaration:): `empty statement' added.\n\t(method_body:): Simplified.\n\t(static_initializer:): Likewise.\n\t(primary_no_new_array:): Use `type_literals.'\n\t(type_literals:): New rule.\n\t(dims:): Set and update `bracket_count.'\n\tFixes PR java/1074. Fixes PR java/2412.\n\n(http://gcc.gnu.org/ml/gcc-bugs/2001-03/msg00835.html,\n http://gcc.gnu.org/ml/gcc-bugs/2000-12/msg00384.html,\n http://gcc.gnu.org/ml/gcc-patches/2001-04/msg00258.html)\n\nFrom-SVN: r41089", "tree": {"sha": "46add0978bcd240d9c609861d2cde22aecf52c3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/46add0978bcd240d9c609861d2cde22aecf52c3c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/de307574bfcdeaf87a7114481d7e1ff4b5ef0dcd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de307574bfcdeaf87a7114481d7e1ff4b5ef0dcd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de307574bfcdeaf87a7114481d7e1ff4b5ef0dcd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de307574bfcdeaf87a7114481d7e1ff4b5ef0dcd/comments", "author": null, "committer": null, "parents": [{"sha": "dd7fc59c3605672536f627d4089baedef8af1aed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd7fc59c3605672536f627d4089baedef8af1aed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd7fc59c3605672536f627d4089baedef8af1aed"}], "stats": {"total": 52, "additions": 35, "deletions": 17}, "files": [{"sha": "b50e456ec43793fcb7cb82f27c9e3ee9c28a28e6", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de307574bfcdeaf87a7114481d7e1ff4b5ef0dcd/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de307574bfcdeaf87a7114481d7e1ff4b5ef0dcd/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=de307574bfcdeaf87a7114481d7e1ff4b5ef0dcd", "patch": "@@ -10,6 +10,18 @@\n \tlang_printable_name call in a scratch buffer, so it \n \twon't be clobbered by the second call.\n \n+2001-03-30  Alexandre Petit-Bianco  <apbianco@redhat.com>\n+\n+\t* parse-scan.y (array_type:): Rewritten.\n+\t(type_declaration:): `empty_statement' replaces `SC_TK.'\n+\t(class_member_declaration:): `empty statement' added.\n+\t(method_body:): Simplified.\n+\t(static_initializer:): Likewise.\n+\t(primary_no_new_array:): Use `type_literals.'\n+\t(type_literals:): New rule.\n+\t(dims:): Set and update `bracket_count.'\n+\tFixes PR java/1074. Fixes PR java/2412.\n+\n 2001-03-28  Hans Boehm  <boehm@acm.org>\n \n \t* boehm.c (PROCEDURE_OBJECT_DESCRIPTOR): Set to use `build_int_2.'"}, {"sha": "28d7946c11f5124a4af25c757490e7a07260112e", "filename": "gcc/java/parse-scan.y", "status": "modified", "additions": 23, "deletions": 17, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de307574bfcdeaf87a7114481d7e1ff4b5ef0dcd/gcc%2Fjava%2Fparse-scan.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de307574bfcdeaf87a7114481d7e1ff4b5ef0dcd/gcc%2Fjava%2Fparse-scan.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse-scan.y?ref=de307574bfcdeaf87a7114481d7e1ff4b5ef0dcd", "patch": "@@ -242,14 +242,15 @@ interface_type:\n ;\n \n array_type:\n-\tprimitive_type OSB_TK CSB_TK\n-|\tname OSB_TK CSB_TK\n+\tprimitive_type dims\n \t\t{\n-\t\t  $$ = concat (\"[\", $1, NULL);\n+\t          while (bracket_count-- > 0) \n+\t\t    $$ = concat (\"[\", $1, NULL);\n \t\t}\n-|\tarray_type OSB_TK CSB_TK\n-\t\t{\t\n-\t\t  $$ = concat (\"[\", $1, NULL);\n+|\tname dims\n+\t\t{\n+\t          while (bracket_count-- > 0) \n+\t\t    $$ = concat (\"[\", $1, NULL);\n \t\t}\n ;\n \n@@ -316,7 +317,7 @@ type_import_on_demand_declaration:\n type_declaration:\n \tclass_declaration\n |\tinterface_declaration\n-|\tSC_TK\n+|\tempty_statement\n ;\n \n /* 19.7 Shortened from the original:\n@@ -393,6 +394,7 @@ class_member_declaration:\n |\tmethod_declaration\n |\tclass_declaration\t/* Added, JDK1.1 inner classes */\n |\tinterface_declaration\t/* Added, JDK1.1 inner classes */\n+|\tempty_statement\n ;\n \n /* 19.8.2 Productions from 8.3: Field Declarations  */\n@@ -513,14 +515,12 @@ class_type_list:\n \n method_body:\n \tblock\n-|\tblock SC_TK\n |\tSC_TK\n ;\n \n /* 19.8.4 Productions from 8.5: Static Initializers  */\n static_initializer:\n \tstatic block\n-|\tstatic block SC_TK\t/* Shouldn't be here. FIXME */\n ;\n \n static:\t\t\t\t/* Test lval.sub_token here */\n@@ -892,21 +892,25 @@ primary_no_new_array:\n |\tfield_access\n |\tmethod_invocation\n |\tarray_access\n-\t/* type DOT_TK CLASS_TK doens't work. So we split the rule\n-\t   'type' into its components. Missing is something for array,\n-\t   which will complete the reference_type part. FIXME */\n-|\tname DOT_TK CLASS_TK\t       /* Added, JDK1.1 class literals */\n-\t\t{ USE_ABSORBER; }\n-|\tprimitive_type DOT_TK CLASS_TK /* Added, JDK1.1 class literals */\n-\t\t{ USE_ABSORBER; }\n-|\tVOID_TK DOT_TK CLASS_TK\t       /* Added, JDK1.1 class literals */\n+|\ttype_literals\n         /* Added, JDK1.1 inner classes. Documentation is wrong\n            refering to a 'ClassName' (class_name) rule that doesn't\n            exist. Used name instead.  */\n |\tname DOT_TK THIS_TK\n \t\t{ USE_ABSORBER; }\n ;\n \n+type_literals:\n+\tname DOT_TK CLASS_TK\n+\t\t{ USE_ABSORBER; }\n+|\tarray_type DOT_TK CLASS_TK\n+\t\t{ USE_ABSORBER; }\n+|\tprimitive_type DOT_TK CLASS_TK\n+\t\t{ USE_ABSORBER; }\n+|\tVOID_TK DOT_TK CLASS_TK\n+\t\t{ USE_ABSORBER; }\n+;\n+\n class_instance_creation_expression:\n \tNEW_TK class_type OP_TK argument_list CP_TK\n |\tNEW_TK class_type OP_TK CP_TK\n@@ -960,7 +964,9 @@ dim_expr:\n \n dims:\t\t\t\t\n \tOSB_TK CSB_TK\n+\t\t{ bracket_count = 1; }\n |\tdims OSB_TK CSB_TK\n+\t\t{ bracket_count++; }\n ;\n \n field_access:"}]}