{"sha": "50c3975129c5d97387bbe4976bea1931d3fad0b2", "node_id": "C_kwDOANBUbNoAKDUwYzM5NzUxMjljNWQ5NzM4N2JiZTQ5NzZiZWExOTMxZDNmYWQwYjI", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-01-18T08:16:26Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-01-18T08:16:26Z"}, "message": "Update check_effective_target_recent_python3\n\nRequire at least Python 3.6.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.src/maintainers.exp: Use the new\n\tcheck_effective_target_recent_python3.\n\t* lib/target-supports.exp: Check for Python3 version >= 3.6.", "tree": {"sha": "e18b416e0efbaae594a7a475e13cd8bdd6428e41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e18b416e0efbaae594a7a475e13cd8bdd6428e41"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50c3975129c5d97387bbe4976bea1931d3fad0b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50c3975129c5d97387bbe4976bea1931d3fad0b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50c3975129c5d97387bbe4976bea1931d3fad0b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50c3975129c5d97387bbe4976bea1931d3fad0b2/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5e26bf17220926d308d0e3bb82bae6e592d2e485", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e26bf17220926d308d0e3bb82bae6e592d2e485", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e26bf17220926d308d0e3bb82bae6e592d2e485"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "a4b3986be777a7f8687bbef47f81880f2c11d2bb", "filename": "gcc/testsuite/gcc.src/maintainers.exp", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50c3975129c5d97387bbe4976bea1931d3fad0b2/gcc%2Ftestsuite%2Fgcc.src%2Fmaintainers.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50c3975129c5d97387bbe4976bea1931d3fad0b2/gcc%2Ftestsuite%2Fgcc.src%2Fmaintainers.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.src%2Fmaintainers.exp?ref=50c3975129c5d97387bbe4976bea1931d3fad0b2", "patch": "@@ -24,8 +24,8 @@ proc gcc_src_run_maintainers_verify_sh {} {\n     set contrib $rootdir/contrib\n     set maintainers $rootdir/MAINTAINERS\n \n-    if { ![check_effective_target_python3] } {\n-      unsupported \"$script python3 is missing\"\n+    if { ![check_effective_target_recent_python3] } {\n+      unsupported \"$script recent python3 is missing\"\n       return\n     }\n "}, {"sha": "fbb6c7352237bb489b0d9aa9798647bea793be38", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50c3975129c5d97387bbe4976bea1931d3fad0b2/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50c3975129c5d97387bbe4976bea1931d3fad0b2/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=50c3975129c5d97387bbe4976bea1931d3fad0b2", "patch": "@@ -11723,10 +11723,10 @@ proc check_effective_target___OPTIMIZE__ {} {\n     } [current_compiler_flags]]\n }\n \n-# Return 1 if python3 is available.\n+# Return 1 if python3 (>= 3.6) is available.\n \n-proc check_effective_target_python3 { } {\n-    set result [remote_exec host \"python3 --version\"]\n+proc check_effective_target_recent_python3 { } {\n+    set result [remote_exec host \"python3 -c \\\"import sys; assert sys.version_info >= (3, 6)\\\"\"]\n     set status [lindex $result 0]\n     if { $status == 0 } then {\n         return 1;"}]}