{"sha": "bc2dce329b4625d7ea00ad7add6c2afeb04f89f6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmMyZGNlMzI5YjQ2MjVkN2VhMDBhZDdhZGQ2YzJhZmViMDRmODlmNg==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2004-11-02T13:23:05Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-11-02T13:23:05Z"}, "message": "tree-phinodes.c (add_phi_arg): Add an assertion that the edge already exists.\n\n\t* tree-phinodes.c (add_phi_arg): Add an assertion that the\n\tedge already exists.\n\nFrom-SVN: r89985", "tree": {"sha": "7091abf3b32a0579cf01c68d71ac82ff7bb67e7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7091abf3b32a0579cf01c68d71ac82ff7bb67e7b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc2dce329b4625d7ea00ad7add6c2afeb04f89f6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc2dce329b4625d7ea00ad7add6c2afeb04f89f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc2dce329b4625d7ea00ad7add6c2afeb04f89f6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc2dce329b4625d7ea00ad7add6c2afeb04f89f6/comments", "author": null, "committer": null, "parents": [{"sha": "54699c021d74f8422c187104012fed4557d9d78d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54699c021d74f8422c187104012fed4557d9d78d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54699c021d74f8422c187104012fed4557d9d78d"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "60c224c1fba001054beeede460a74129c5257ee2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc2dce329b4625d7ea00ad7add6c2afeb04f89f6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc2dce329b4625d7ea00ad7add6c2afeb04f89f6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bc2dce329b4625d7ea00ad7add6c2afeb04f89f6", "patch": "@@ -1,3 +1,8 @@\n+2004-11-02  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* tree-phinodes.c (add_phi_arg): Add an assertion that the\n+\tedge already exists.\n+\n 2004-11-02  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* tree-phinodes.c (remove_phi_arg_num): Do not zero the"}, {"sha": "ba46c7864599c25bfe583f017e933d853d0fa207", "filename": "gcc/tree-phinodes.c", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc2dce329b4625d7ea00ad7add6c2afeb04f89f6/gcc%2Ftree-phinodes.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc2dce329b4625d7ea00ad7add6c2afeb04f89f6/gcc%2Ftree-phinodes.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-phinodes.c?ref=bc2dce329b4625d7ea00ad7add6c2afeb04f89f6", "patch": "@@ -295,12 +295,14 @@ create_phi_node (tree var, basic_block bb)\n void\n add_phi_arg (tree *phi, tree def, edge e)\n {\n+  basic_block bb = e->dest;\n   int i = PHI_NUM_ARGS (*phi);\n \n+  gcc_assert (bb == bb_for_stmt (*phi));\n+\n   if (i >= PHI_ARG_CAPACITY (*phi))\n     {\n       tree old_phi = *phi;\n-      basic_block bb;\n \n       /* Resize the phi.  Unfortunately, this will relocate it.  */\n       resize_phi_node (phi, ideal_phi_node_len (i + 4));\n@@ -311,13 +313,6 @@ add_phi_arg (tree *phi, tree def, edge e)\n       /* The result of the phi is defined by this phi node.  */\n       SSA_NAME_DEF_STMT (PHI_RESULT (*phi)) = *phi;\n \n-      /* Extract the basic block for the PHI from the PHI's annotation\n-\t rather than the edge.  This works better as the edge's\n-\t destination may not currently be the block with the PHI node\n-\t if we are in the process of threading the edge to a new\n-\t destination.  */\n-      bb = bb_for_stmt (*phi);\n-\n       release_phi_node (old_phi);\n \n       /* Update the list head if replacing the first listed phi.  */"}]}