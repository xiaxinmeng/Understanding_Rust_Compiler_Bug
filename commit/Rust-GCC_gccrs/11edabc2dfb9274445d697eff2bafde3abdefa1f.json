{"sha": "11edabc2dfb9274445d697eff2bafde3abdefa1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTFlZGFiYzJkZmI5Mjc0NDQ1ZDY5N2VmZjJiYWZkZTNhYmRlZmExZg==", "commit": {"author": {"name": "Senthil Kumar Selvaraj", "email": "senthil_kumar.selvaraj@atmel.com", "date": "2016-11-29T11:21:46Z"}, "committer": {"name": "Senthil Kumar Selvaraj", "email": "saaadhu@gcc.gnu.org", "date": "2016-11-29T11:21:46Z"}, "message": "Fix bogus pr31096-1.c failure for avr\n\nThe dump expects literals which would only be present if the target's\nint size is 32 bits.\n\nFix by explicitly using 32 bit ints for targets with __SIZEOF_INT__ < 4.\n\ngcc/testsuite/\n2016-11-29  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>\n\n\t* testsuite/gcc.dg/pr31096-1.c: Use __{U,}INT32_TYPE__ for\n\ttargets with sizeof(int) < 4.\n\nFrom-SVN: r242954", "tree": {"sha": "561c084f3992904d6c47187c6a75842074a58673", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/561c084f3992904d6c47187c6a75842074a58673"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/11edabc2dfb9274445d697eff2bafde3abdefa1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11edabc2dfb9274445d697eff2bafde3abdefa1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11edabc2dfb9274445d697eff2bafde3abdefa1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11edabc2dfb9274445d697eff2bafde3abdefa1f/comments", "author": null, "committer": {"login": "saaadhu", "id": 532256, "node_id": "MDQ6VXNlcjUzMjI1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/532256?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saaadhu", "html_url": "https://github.com/saaadhu", "followers_url": "https://api.github.com/users/saaadhu/followers", "following_url": "https://api.github.com/users/saaadhu/following{/other_user}", "gists_url": "https://api.github.com/users/saaadhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/saaadhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saaadhu/subscriptions", "organizations_url": "https://api.github.com/users/saaadhu/orgs", "repos_url": "https://api.github.com/users/saaadhu/repos", "events_url": "https://api.github.com/users/saaadhu/events{/privacy}", "received_events_url": "https://api.github.com/users/saaadhu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b302f2e058a37b462e8c78216a65ff7341a58bf1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b302f2e058a37b462e8c78216a65ff7341a58bf1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b302f2e058a37b462e8c78216a65ff7341a58bf1"}], "stats": {"total": 27, "additions": 20, "deletions": 7}, "files": [{"sha": "101a6e0689a9962861d3bc03672b179f0c731b3a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11edabc2dfb9274445d697eff2bafde3abdefa1f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11edabc2dfb9274445d697eff2bafde3abdefa1f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=11edabc2dfb9274445d697eff2bafde3abdefa1f", "patch": "@@ -1,3 +1,8 @@\n+2016-11-29  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>\n+\n+\t* testsuite/gcc.dg/pr31096-1.c: Use __{U,}INT32_TYPE__ for\n+\ttargets with sizeof(int) < 4.\n+\n 2016-11-29  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/78546"}, {"sha": "3866c7578b7a0da7e5e165ae798113226324c1f5", "filename": "gcc/testsuite/gcc.dg/pr31096-1.c", "status": "modified", "additions": 15, "deletions": 7, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11edabc2dfb9274445d697eff2bafde3abdefa1f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr31096-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11edabc2dfb9274445d697eff2bafde3abdefa1f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr31096-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr31096-1.c?ref=11edabc2dfb9274445d697eff2bafde3abdefa1f", "patch": "@@ -2,44 +2,52 @@\n /* { dg-do compile } */\n /* { dg-options \"-O2 -fdump-tree-optimized\" } */\n \n+#if __SIZEOF_INT__ < 4\n+  __extension__ typedef __INT32_TYPE__  int32_t;\n+  __extension__ typedef __UINT32_TYPE__ uint32_t;\n+#else\n+  typedef int int32_t;\n+  typedef unsigned uint32_t;\n+#endif\n+\n #define zero(name, op) \\\n-int name (int a, int b) \\\n+int32_t name (int32_t a, int32_t b) \\\n { return a * 0 op b * 0; }\n \n zero(zeq, ==) zero(zne, !=) zero(zlt, <)\n zero(zgt, >)  zero(zge, >=) zero(zle, <=)\n \n #define unsign_pos(name, op) \\\n-int name (unsigned a, unsigned b) \\\n+int32_t name (uint32_t a, uint32_t b) \\\n { return a * 4 op b * 4; }\n \n unsign_pos(upeq, ==) unsign_pos(upne, !=) unsign_pos(uplt, <)\n unsign_pos(upgt, >)  unsign_pos(upge, >=) unsign_pos(uple, <=)\n \n #define unsign_neg(name, op) \\\n-int name (unsigned a, unsigned b) \\\n+int32_t name (uint32_t a, uint32_t b) \\\n { return a * -2 op b * -2; }\n \n unsign_neg(uneq, ==) unsign_neg(unne, !=) unsign_neg(unlt, <)\n unsign_neg(ungt, >)  unsign_neg(unge, >=) unsign_neg(unle, <=)\n \n #define float(name, op) \\\n-int name (float a, float b) \\\n+int32_t name (float a, float b) \\\n { return a * 5 op b * 5; }\n \n float(feq, ==) float(fne, !=) float(flt, <)\n float(fgt, >)  float(fge, >=) float(fle, <=)\n \n #define float_val(name, op) \\\n-int name (int a, int b) \\\n+int32_t name (int32_t a, int32_t b) \\\n { return a * 54.0 op b * 54.0; }\n \n float_val(fveq, ==) float_val(fvne, !=) float_val(fvlt, <)\n float_val(fvgt, >)  float_val(fvge, >=) float_val(fvle, <=)\n \n #define vec(name, op) \\\n-int name (int a, int b) \\\n-{ int c[10]; return a * c[1] op b * c[1]; }\n+int32_t name (int32_t a, int32_t b) \\\n+{ int32_t c[10]; return a * c[1] op b * c[1]; }\n \n vec(veq, ==) vec(vne, !=) vec(vlt, <)\n vec(vgt, >)  vec(vge, >=) vec(vle, <=)"}]}