{"sha": "c15648f7aad6227b4fd2f3b91f08f45bc2ef552a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzE1NjQ4ZjdhYWQ2MjI3YjRmZDJmM2I5MWYwOGY0NWJjMmVmNTUyYQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-06-22T00:56:18Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-06-22T00:56:18Z"}, "message": "Changes to support ObjC as a front-end language.\n\nFrom-SVN: r14284", "tree": {"sha": "d67a465d1658a4c8f3b97959fb5a718f5a868ca0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d67a465d1658a4c8f3b97959fb5a718f5a868ca0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c15648f7aad6227b4fd2f3b91f08f45bc2ef552a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c15648f7aad6227b4fd2f3b91f08f45bc2ef552a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c15648f7aad6227b4fd2f3b91f08f45bc2ef552a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c15648f7aad6227b4fd2f3b91f08f45bc2ef552a/comments", "author": null, "committer": null, "parents": [{"sha": "14bb9bd890703d6bbc1132df41258617cf72f5eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14bb9bd890703d6bbc1132df41258617cf72f5eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14bb9bd890703d6bbc1132df41258617cf72f5eb"}], "stats": {"total": 66, "additions": 26, "deletions": 40}, "files": [{"sha": "8afcd6b6837995584bc2b96b54b71c890db3e31a", "filename": "gcc/objc/Makefile.in", "status": "modified", "additions": 26, "deletions": 40, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c15648f7aad6227b4fd2f3b91f08f45bc2ef552a/gcc%2Fobjc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c15648f7aad6227b4fd2f3b91f08f45bc2ef552a/gcc%2Fobjc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2FMakefile.in?ref=c15648f7aad6227b4fd2f3b91f08f45bc2ef552a", "patch": "@@ -34,39 +34,39 @@ SHELL=/bin/sh\n \n OPTIMIZE= -O\n \n-VPATH = $(srcdir)/objc\n+srcdir = .\n+VPATH = $(srcdir)\n \n AR = ar\n AR_FLAGS = rc\n \n-# Always search these dirs when compiling.\n-SUBDIR_INCLUDES = -I. -I.. -I$(srcdir) -I$(srcdir)/config\n+# Define this as & to perform parallel make on a Sequent.\n+# Note that this has some bugs, and it seems currently necessary \n+# to compile all the gen* files first by hand to avoid erroneous results.\n+P =\n \n-.c.o:\n-\t$(GCC_FOR_TARGET) $(OPTIMIZE) \\\n-\t\t-c $(GCC_CFLAGS) $(SUBDIR_INCLUDES) $<\n+# Definition of `all' is here so that new rules inserted by sed\n+# do not specify the default target.\n+all: all.indirect\n \n-.m.o:\n-\t$(GCC_FOR_TARGET) $(OPTIMIZE) -fgnu-runtime \\\n-\t\t-c $(GCC_CFLAGS) $(SUBDIR_INCLUDES) $<\n+# sed inserts variable overrides after the following line.\n+####target overrides\n+####host overrides\n+####cross overrides\n+####build overrides\n+\f\n \n-# If we were not invoked from the parent dir,\n-# invoke make in the parent dir and have reinvoke this makefile.\n-# That's necessary to get the right values for srcdir, etc.\n-all:\n-\tcd ..; $(MAKE) sublibobjc.a\n+OBJC_H = hash.h objc-list.h sarray.h objc.h objc-api.h \\\n+  NXConstStr.h Object.h Protocol.h encoding.h typedstream.h thr.h\n \n-OBJC_O = hash.o sarray.o class.o sendmsg.o init.o archive.o encoding.o \\\n-         selector.o objects.o misc.o NXConstStr.o Object.o Protocol.o \\\n-         nil_method.o thr.o linking.o $(OBJC_THREAD_FILE).o\n+# Now figure out from those variables how to compile and link.\n+all.indirect: Makefile compiler objc-runtime\n \n-libobjc.a: $(OBJC_O)\n-\t$(AR) rc libobjc.a $?\n-# ranlib is run in the parent directory's makefile.\n+compiler:\n+\tcd ..; $(MAKE) cc1obj\n \n-OBJC_H = hash.h objc-list.h sarray.h objc.h \\\n-         objc-api.h \\\n-\t NXConstStr.h Object.h Protocol.h encoding.h typedstream.h thr.h\n+objc-runtime:\n+\tcd ..; $(MAKE) libobjc.a\n \n # copy objc headers to installation include directory\n copy-headers: \n@@ -78,6 +78,9 @@ copy-headers:\n \t  chmod a+r $(incinstalldir)/objc/$${file}; \\\n \tdone\n \n+Makefile: $(srcdir)/Makefile.in $(srcdir)/../configure\n+\tcd ..; $(SHELL) config.status\n+\n mostlyclean:\n \t-rm -f *.o libobjc.a xforward fflags\n clean: mostlyclean\n@@ -86,20 +89,3 @@ extraclean: mostlyclean\n \n # For Sun VPATH.\n \n-hash.o: hash.c\n-sarray.o: sarray.c\n-class.o: class.c\n-sendmsg.o: sendmsg.c\n-init.o: init.c\n-archive.o: archive.c\n-encoding.o: encoding.c\n-selector.o: selector.c\n-objects.o: objects.c\n-misc.o: misc.c\n-NXConstStr.o: NXConstStr.m\n-Object.o: Object.m\n-Protocol.o: Protocol.m\n-thr.o: thr.h thr.c\n-$(OBJC_THREAD_FILE).o: $(OBJC_THREAD_FILE).c\n-nil_method.o: nil_method.c\n-linking.o: linking.m"}]}