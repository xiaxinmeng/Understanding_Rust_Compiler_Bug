{"sha": "60ea4be6cf38b6333158ac1a4b8e39c685af8328", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjBlYTRiZTZjZjM4YjYzMzMxNThhYzFhNGI4ZTM5YzY4NWFmODMyOA==", "commit": {"author": {"name": "Ian Bolton", "email": "ian.bolton@arm.com", "date": "2013-12-06T15:51:49Z"}, "committer": {"name": "Ian Bolton", "email": "ibolton@gcc.gnu.org", "date": "2013-12-06T15:51:49Z"}, "message": "[ARM] Add __builtin_trap support for A32\n\nCo-Authored-By: Mark Mitchell <mark@codesourcery.com>\n\nFrom-SVN: r205749", "tree": {"sha": "57fd954c2713a9109972e5899b217c4d795a3e32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/57fd954c2713a9109972e5899b217c4d795a3e32"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/60ea4be6cf38b6333158ac1a4b8e39c685af8328", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60ea4be6cf38b6333158ac1a4b8e39c685af8328", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60ea4be6cf38b6333158ac1a4b8e39c685af8328", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60ea4be6cf38b6333158ac1a4b8e39c685af8328/comments", "author": null, "committer": null, "parents": [{"sha": "0284b52ec9c54f2071f3f71cd994c2bf49b38639", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0284b52ec9c54f2071f3f71cd994c2bf49b38639", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0284b52ec9c54f2071f3f71cd994c2bf49b38639"}], "stats": {"total": 54, "additions": 54, "deletions": 0}, "files": [{"sha": "deb7eccbcc125076cc964f7ddcd8872168cf5cf4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=60ea4be6cf38b6333158ac1a4b8e39c685af8328", "patch": "@@ -1,3 +1,10 @@\n+2013-12-06  Ian Bolton  <ian.bolton@arm.com>\n+\t    Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR target/59091\n+\t* config/arm/arm.md (trap): New pattern.\n+\t* config/arm/types.md: Added a type for trap.\n+\n 2013-12-06  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n \t* expr.c (expand_assignment): Update bitregion_start and"}, {"sha": "389527cf21d844a8059c0fa58ac08bf141478f84", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=60ea4be6cf38b6333158ac1a4b8e39c685af8328", "patch": "@@ -9927,6 +9927,23 @@\n    (set_attr \"type\" \"mov_reg\")]\n )\n \n+(define_insn \"trap\"\n+  [(trap_if (const_int 1) (const_int 0))]\n+  \"\"\n+  \"*\n+  if (TARGET_ARM)\n+    return \\\".inst\\\\t0xe7f000f0\\\";\n+  else\n+    return \\\".inst\\\\t0xdeff\\\";\n+  \"\n+  [(set (attr \"length\")\n+\t(if_then_else (eq_attr \"is_thumb\" \"yes\")\n+\t\t      (const_int 2)\n+\t\t      (const_int 4)))\n+   (set_attr \"type\" \"trap\")\n+   (set_attr \"conds\" \"unconditional\")]\n+)\n+\n \f\n ;; Patterns to allow combination of arithmetic, cond code and shifts\n "}, {"sha": "6351f080b32cb29c2f71f8f204abb00ff66a19b2", "filename": "gcc/config/arm/types.md", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2Fconfig%2Farm%2Ftypes.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2Fconfig%2Farm%2Ftypes.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Ftypes.md?ref=60ea4be6cf38b6333158ac1a4b8e39c685af8328", "patch": "@@ -152,6 +152,7 @@\n ; store2             store 2 words to memory from arm registers.\n ; store3             store 3 words to memory from arm registers.\n ; store4             store 4 (or more) words to memory from arm registers.\n+; trap               cause a trap in the kernel.\n ; udiv               unsigned division.\n ; umaal              unsigned multiply accumulate accumulate long.\n ; umlal              unsigned multiply accumulate long.\n@@ -645,6 +646,7 @@\n   store2,\\\n   store3,\\\n   store4,\\\n+  trap,\\\n   udiv,\\\n   umaal,\\\n   umlal,\\"}, {"sha": "bdc37205c73fd470b0b8109e4f0f0227ef0e49ca", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=60ea4be6cf38b6333158ac1a4b8e39c685af8328", "patch": "@@ -1,3 +1,10 @@\n+2013-12-06  Ian Bolton  <ian.bolton@arm.com>\n+            Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR target/59091\n+\t* gcc.target/arm/builtin-trap.c: New test.\n+\t* gcc.target/arm/thumb-builtin-trap.c: Likewise.\n+\n 2013-12-06  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc.target/sparc/pdistn.c: New test."}, {"sha": "4ff8d253e751c9aa579b6e2c0ec4fa3c31214f39", "filename": "gcc/testsuite/gcc.target/arm/builtin-trap.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fbuiltin-trap.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fbuiltin-trap.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fbuiltin-trap.c?ref=60ea4be6cf38b6333158ac1a4b8e39c685af8328", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm32 } */\n+\n+void\n+trap ()\n+{\n+  __builtin_trap ();\n+}\n+\n+/* { dg-final { scan-assembler \"0xe7f000f0\" { target { arm_nothumb } } } } */"}, {"sha": "22e90e7d2cfad7a76fb48e9532519ce3beb065b4", "filename": "gcc/testsuite/gcc.target/arm/thumb-builtin-trap.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fthumb-builtin-trap.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60ea4be6cf38b6333158ac1a4b8e39c685af8328/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fthumb-builtin-trap.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fthumb-builtin-trap.c?ref=60ea4be6cf38b6333158ac1a4b8e39c685af8328", "patch": "@@ -0,0 +1,11 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mthumb\" } */\n+/* { dg-require-effective-target arm_thumb1_ok } */\n+\n+void\n+trap ()\n+{\n+  __builtin_trap ();\n+}\n+\n+/* { dg-final { scan-assembler \"0xdeff\" } } */"}]}