{"sha": "f129791ccd978f43f55cbb5c602ea246099127f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjEyOTc5MWNjZDk3OGY0M2Y1NWNiYjVjNjAyZWEyNDYwOTkxMjdmMw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@libertysurf.fr", "date": "2003-07-18T06:53:05Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2003-07-18T06:53:05Z"}, "message": "toplev.c (rest_of_handle_addresof): Rename into rest_of_handle_addressof.\n\n\t* toplev.c (rest_of_handle_addresof): Rename into\n\trest_of_handle_addressof.  Delete unreachable blocks\n\tif dead edges were purged after the addressof pass.\n\nFrom-SVN: r69545", "tree": {"sha": "6526b967def886168e4d9eb51085ca42f1737e3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6526b967def886168e4d9eb51085ca42f1737e3c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f129791ccd978f43f55cbb5c602ea246099127f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f129791ccd978f43f55cbb5c602ea246099127f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f129791ccd978f43f55cbb5c602ea246099127f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f129791ccd978f43f55cbb5c602ea246099127f3/comments", "author": {"login": "ebotcazou", "id": 48091907, "node_id": "MDQ6VXNlcjQ4MDkxOTA3", "avatar_url": "https://avatars.githubusercontent.com/u/48091907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebotcazou", "html_url": "https://github.com/ebotcazou", "followers_url": "https://api.github.com/users/ebotcazou/followers", "following_url": "https://api.github.com/users/ebotcazou/following{/other_user}", "gists_url": "https://api.github.com/users/ebotcazou/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebotcazou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebotcazou/subscriptions", "organizations_url": "https://api.github.com/users/ebotcazou/orgs", "repos_url": "https://api.github.com/users/ebotcazou/repos", "events_url": "https://api.github.com/users/ebotcazou/events{/privacy}", "received_events_url": "https://api.github.com/users/ebotcazou/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b2e608ca7ff1fa5bce267d52e27e96e36bd4e170", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2e608ca7ff1fa5bce267d52e27e96e36bd4e170", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2e608ca7ff1fa5bce267d52e27e96e36bd4e170"}], "stats": {"total": 57, "additions": 52, "deletions": 5}, "files": [{"sha": "2166ec5c54b39853b8ddbba372d64cc7f46fb053", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f129791ccd978f43f55cbb5c602ea246099127f3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f129791ccd978f43f55cbb5c602ea246099127f3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f129791ccd978f43f55cbb5c602ea246099127f3", "patch": "@@ -1,3 +1,10 @@\n+2003-07-18  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\tPR optimization/11083\n+\t* toplev.c (rest_of_handle_addresof): Rename into\n+\trest_of_handle_addressof.  Delete unreachable blocks\n+\tif dead edges were purged after the addressof pass.\n+\n 2003-07-18  Neil Booth  <neil@daikokuya.co.uk>\n \n \t* Makefile.in, configure, configure.in: Remove handling of"}, {"sha": "c69031a5be2264c54fd9d5fd6a1eda68c7ab9741", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f129791ccd978f43f55cbb5c602ea246099127f3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f129791ccd978f43f55cbb5c602ea246099127f3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f129791ccd978f43f55cbb5c602ea246099127f3", "patch": "@@ -1,3 +1,7 @@\n+2003-07-18  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\t* g++.dg/opt/cfg1.C: New test.\n+\n 2003-07-17  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR optimization/11557"}, {"sha": "dbc81fe9bd8125e7e47124a37801b41b011bda33", "filename": "gcc/testsuite/g++.dg/opt/cfg1.C", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f129791ccd978f43f55cbb5c602ea246099127f3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fcfg1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f129791ccd978f43f55cbb5c602ea246099127f3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fcfg1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fcfg1.C?ref=f129791ccd978f43f55cbb5c602ea246099127f3", "patch": "@@ -0,0 +1,36 @@\n+// PR optimization/11083\n+// Origin: <nick@ilm.com>\n+// Reduced testcase by Wolfgang Bangerth <bangerth@ticam.utexas.edu>\n+\n+// The compiler used to keep unreachable basic blocks after dead edges\n+// had been purged, which fooled the LCM code of the GCSE pass.\n+\n+// { dg-do compile }\n+// { dg-options \"-O2 -fnon-call-exceptions\" }\n+\n+extern void *memmove (void *, const void *, unsigned int) throw ();\n+\n+struct S {\n+    int *q;\n+\n+    S(int *i) : q(i) {}\n+};\n+\n+struct X {\n+    int *p;\n+\n+    void foo(S first, S last) {\n+      try        { memmove(0, 0, last.q - first.q); }\n+      catch(...) { throw; }\n+    }\n+\n+   void bar (const X& x);\n+};\n+\n+void X::bar (const X& x)\n+{\n+  const unsigned int xlen = S(x.p).q - S(x.p).q;\n+\n+  if (xlen > 0)\n+    foo(S(x.p), S(x.p));\n+}"}, {"sha": "cf61228dc83d7747fd8e0ace70517e04a50d38cc", "filename": "gcc/toplev.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f129791ccd978f43f55cbb5c602ea246099127f3/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f129791ccd978f43f55cbb5c602ea246099127f3/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=f129791ccd978f43f55cbb5c602ea246099127f3", "patch": "@@ -134,7 +134,7 @@ static void rest_of_handle_loop2 (tree, rtx);\n static void rest_of_handle_jump_bypass (tree, rtx);\n static void rest_of_handle_sibling_calls (rtx);\n static void rest_of_handle_null_pointer (tree, rtx);\n-static void rest_of_handle_addresof (tree, rtx);\n+static void rest_of_handle_addressof (tree, rtx);\n static void rest_of_handle_cfg (tree, rtx);\n static void rest_of_handle_branch_prob (tree, rtx);\n static void rest_of_handle_if_conversion (tree, rtx);\n@@ -2405,13 +2405,13 @@ rest_of_handle_cfg (tree decl, rtx insns)\n \n /* Purge addressofs.  */\n static void\n-rest_of_handle_addresof (tree decl, rtx insns)\n+rest_of_handle_addressof (tree decl, rtx insns)\n {\n   open_dump_file (DFI_addressof, decl);\n \n   purge_addressof (insns);\n-  if (optimize)\n-    purge_all_dead_edges (0);\n+  if (optimize && purge_all_dead_edges (0))\n+    delete_unreachable_blocks ();\n   reg_scan (insns, max_reg_num (), 1);\n \n   close_dump_file (DFI_addressof, print_rtl, insns);\n@@ -3219,7 +3219,7 @@ rest_of_compilation (tree decl)\n   if (optimize > 0)\n     rest_of_handle_cse (decl, insns);\n \n-  rest_of_handle_addresof (decl, insns);\n+  rest_of_handle_addressof (decl, insns);\n \n   ggc_collect ();\n "}]}