{"sha": "20e7012b755427d1db00ba6f236583ff3c24e710", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjBlNzAxMmI3NTU0MjdkMWRiMDBiYTZmMjM2NTgzZmYzYzI0ZTcxMA==", "commit": {"author": {"name": "Kito Cheng", "email": "kito.cheng@sifive.com", "date": "2019-08-26T02:15:47Z"}, "committer": {"name": "Kito Cheng", "email": "kito@gcc.gnu.org", "date": "2019-08-26T02:15:47Z"}, "message": "RISC-V: Add testcase for testing li pseudo instruction\n\ngcc/testsuite/ChangeLog:\n\n\tgcc.target/riscv/li.c: New test.\n\nFrom-SVN: r274920", "tree": {"sha": "3b4ed7ea11604a556cf5e2ec2c1eee0179c79055", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b4ed7ea11604a556cf5e2ec2c1eee0179c79055"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/20e7012b755427d1db00ba6f236583ff3c24e710", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20e7012b755427d1db00ba6f236583ff3c24e710", "html_url": "https://github.com/Rust-GCC/gccrs/commit/20e7012b755427d1db00ba6f236583ff3c24e710", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20e7012b755427d1db00ba6f236583ff3c24e710/comments", "author": {"login": "kito-cheng", "id": 2723185, "node_id": "MDQ6VXNlcjI3MjMxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/2723185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kito-cheng", "html_url": "https://github.com/kito-cheng", "followers_url": "https://api.github.com/users/kito-cheng/followers", "following_url": "https://api.github.com/users/kito-cheng/following{/other_user}", "gists_url": "https://api.github.com/users/kito-cheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/kito-cheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kito-cheng/subscriptions", "organizations_url": "https://api.github.com/users/kito-cheng/orgs", "repos_url": "https://api.github.com/users/kito-cheng/repos", "events_url": "https://api.github.com/users/kito-cheng/events{/privacy}", "received_events_url": "https://api.github.com/users/kito-cheng/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "900af77fc2cd68e9bc7f5acbc50df44ae97f0a78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/900af77fc2cd68e9bc7f5acbc50df44ae97f0a78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/900af77fc2cd68e9bc7f5acbc50df44ae97f0a78"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "dd4d9b7b631b3b5c48a0f380b79f8c9697892ed1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/20e7012b755427d1db00ba6f236583ff3c24e710/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/20e7012b755427d1db00ba6f236583ff3c24e710/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=20e7012b755427d1db00ba6f236583ff3c24e710", "patch": "@@ -1,3 +1,7 @@\n+2019-08-26  Kito Cheng  <kito.cheng@sifive.com>\n+\n+\t* gcc.target/riscv/li.c: New test.\n+\n 2019-08-24  Nathan Sidwell  <nathan@acm.org>\n \n \t* g++.dg/inherit/virtual14.C: New."}, {"sha": "fa5c02caee89457d499cabb9d95027189252fff8", "filename": "gcc/testsuite/gcc.target/riscv/li.c", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/20e7012b755427d1db00ba6f236583ff3c24e710/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fli.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/20e7012b755427d1db00ba6f236583ff3c24e710/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fli.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fli.c?ref=20e7012b755427d1db00ba6f236583ff3c24e710", "patch": "@@ -0,0 +1,36 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O1\" } */\n+#include <stdlib.h>\n+#define LOAD_IMM(var, val) \\\n+        asm (\"li %0, %1\\n\": \"=r\"(var): \"i\" (val))\n+\n+#define CHECK_LI(type, val) \\\n+  { \\\n+    type var; \\\n+    LOAD_IMM(var, val); \\\n+    if (var != val) \\\n+      abort(); \\\n+  }\n+\n+#define CHECK_LI32(val) CHECK_LI(int, val)\n+#define CHECK_LI64(val) CHECK_LI(long long, val)\n+\n+int main()\n+{\n+  CHECK_LI32(0x8001);\n+  CHECK_LI32(0x1f01);\n+  CHECK_LI32(0x12345001);\n+  CHECK_LI32(0xf2345001);\n+#if __riscv_xlen == 64\n+  CHECK_LI64(0x8001ll);\n+  CHECK_LI64(0x1f01ll);\n+  CHECK_LI64(0x12345001ll);\n+  CHECK_LI64(0xf2345001ll);\n+  CHECK_LI64(0xf12345001ll);\n+  CHECK_LI64(0xff00ff00ff001f01ll);\n+  CHECK_LI64(0x7ffffffff2345001ll);\n+  CHECK_LI64(0x7f0f243ff2345001ll);\n+  CHECK_LI64(0x1234567887654321ll);\n+#endif\n+  return 0;\n+}"}]}