{"sha": "823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODIzZTVmN2Y5ZmI1MmQ4ZTZhOWJiMmM5NzE2NGNjNTkzYWUxOGUxMQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2007-11-16T07:06:25Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2007-11-16T07:06:25Z"}, "message": "re PR c++/34100 (ICE with vector attribute)\n\n\tPR c++/34100\n\t* pt.c (apply_late_template_attributes): Do nothing if decl's type is\n\terror_mark_node.\n\n\t* g++.dg/template/crash73.C: New test.\n\nFrom-SVN: r130220", "tree": {"sha": "69bdbfb012a1c1899d137ac74395d71db0a76945", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/69bdbfb012a1c1899d137ac74395d71db0a76945"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b481444e66204a942f7c98db79183150b11f858b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b481444e66204a942f7c98db79183150b11f858b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b481444e66204a942f7c98db79183150b11f858b"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "00b18f84fd81e2e43023f92208923be98a33d1ee", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11", "patch": "@@ -1,3 +1,9 @@\n+2007-11-16  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/34100\n+\t* pt.c (apply_late_template_attributes): Do nothing if decl's type is\n+\terror_mark_node.\n+\n 2007-11-13  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/34054"}, {"sha": "5e1335f439ab8209eb13f28d28ae1952130e5838", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11", "patch": "@@ -6622,7 +6622,11 @@ apply_late_template_attributes (tree *decl_p, tree attributes, int attr_flags,\n       }\n \n   if (DECL_P (*decl_p))\n-    p = &DECL_ATTRIBUTES (*decl_p);\n+    {\n+      if (TREE_TYPE (*decl_p) == error_mark_node)\n+\treturn;\n+      p = &DECL_ATTRIBUTES (*decl_p);\n+    }\n   else\n     p = &TYPE_ATTRIBUTES (*decl_p);\n "}, {"sha": "ec46967d4c83eb82bea8b07f942529ad96e774bb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11", "patch": "@@ -1,3 +1,8 @@\n+2007-11-16  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/34100\n+\t* g++.dg/template/crash73.C: New test.\n+\n 2007-11-15  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/23848"}, {"sha": "5c3c87dad7a42379a535c2f041bd5407939fe4ae", "filename": "gcc/testsuite/g++.dg/template/crash73.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash73.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash73.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash73.C?ref=823e5f7f9fb52d8e6a9bb2c97164cc593ae18e11", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/34100\n+// { dg-do compile }\n+\n+template<typename T> struct A\n+{\n+  typedef typename T::X Y __attribute__((vector_size(8)));\t// { dg-error \"is not a class, struct\" }\n+};\n+\n+A<int> a;"}]}