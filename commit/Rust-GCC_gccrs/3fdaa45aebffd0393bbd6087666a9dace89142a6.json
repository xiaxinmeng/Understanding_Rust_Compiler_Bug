{"sha": "3fdaa45aebffd0393bbd6087666a9dace89142a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2ZkYWE0NWFlYmZmZDAzOTNiYmQ2MDg3NjY2YTlkYWNlODkxNDJhNg==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2003-04-08T14:01:58Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@gcc.gnu.org", "date": "2003-04-08T14:01:58Z"}, "message": "rs6000.c (rs6000_init_builtins): Set opaque types regardless of architecture.\n\n2003-04-08  Aldy Hernandez  <aldyh@redhat.com>\n\n        * config/rs6000/rs6000.c (rs6000_init_builtins): Set opaque types\n        regardless of architecture.\n        (spe_init_builtins): Change V2SI and V2SF types to opaque types.\n\nFrom-SVN: r65374", "tree": {"sha": "9bd027cb3a49f684b5885c59901621a7da3957b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9bd027cb3a49f684b5885c59901621a7da3957b4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3fdaa45aebffd0393bbd6087666a9dace89142a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fdaa45aebffd0393bbd6087666a9dace89142a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fdaa45aebffd0393bbd6087666a9dace89142a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fdaa45aebffd0393bbd6087666a9dace89142a6/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "490dbac747834003de9f5a6909c4103e287822aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/490dbac747834003de9f5a6909c4103e287822aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/490dbac747834003de9f5a6909c4103e287822aa"}], "stats": {"total": 59, "additions": 32, "deletions": 27}, "files": [{"sha": "c2b24c357e11b7b98447b1be5305e00b47ad4b40", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fdaa45aebffd0393bbd6087666a9dace89142a6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fdaa45aebffd0393bbd6087666a9dace89142a6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3fdaa45aebffd0393bbd6087666a9dace89142a6", "patch": "@@ -1,3 +1,9 @@\n+2003-04-08  Aldy Hernandez  <aldyh@redhat.com>\n+\n+        * config/rs6000/rs6000.c (rs6000_init_builtins): Set opaque types\n+        regardless of architecture.\n+        (spe_init_builtins): Change V2SI and V2SF types to opaque types.\n+\n 2003-04-08  J\"orn Rennecke <joern.rennecke@superh.com>\n \n \t* sh.c (push_regs, calc_live_regs): Return int.  Take single"}, {"sha": "c4e7971f131345eb283a348a72b24a57d54379b7", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 26, "deletions": 27, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fdaa45aebffd0393bbd6087666a9dace89142a6/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fdaa45aebffd0393bbd6087666a9dace89142a6/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=3fdaa45aebffd0393bbd6087666a9dace89142a6", "patch": "@@ -5436,12 +5436,11 @@ rs6000_expand_builtin (exp, target, subtarget, mode, ignore)\n static void\n rs6000_init_builtins ()\n {\n+  opaque_V2SI_type_node = copy_node (V2SI_type_node);\n+  opaque_V2SF_type_node = copy_node (V2SF_type_node);\n+\n   if (TARGET_SPE)\n-    {\n-      opaque_V2SI_type_node = copy_node (V2SI_type_node);\n-      opaque_V2SF_type_node = copy_node (V2SF_type_node);\n-      spe_init_builtins ();\n-    }\n+    spe_init_builtins ();\n   if (TARGET_ALTIVEC)\n     altivec_init_builtins ();\n   if (TARGET_ALTIVEC || TARGET_SPE)\n@@ -5483,71 +5482,71 @@ spe_init_builtins ()\n   tree endlink = void_list_node;\n   tree puint_type_node = build_pointer_type (unsigned_type_node);\n   tree pushort_type_node = build_pointer_type (short_unsigned_type_node);\n-  tree pv2si_type_node = build_pointer_type (V2SI_type_node);\n+  tree pv2si_type_node = build_pointer_type (opaque_V2SI_type_node);\n   struct builtin_description *d;\n   size_t i;\n \n   tree v2si_ftype_4_v2si\n     = build_function_type\n-    (V2SI_type_node,\n-     tree_cons (NULL_TREE, V2SI_type_node,\n-\t\ttree_cons (NULL_TREE, V2SI_type_node,\n-\t\t\t   tree_cons (NULL_TREE, V2SI_type_node,\n-\t\t\t\t      tree_cons (NULL_TREE, V2SI_type_node,\n+    (opaque_V2SI_type_node,\n+     tree_cons (NULL_TREE, opaque_V2SI_type_node,\n+\t\ttree_cons (NULL_TREE, opaque_V2SI_type_node,\n+\t\t\t   tree_cons (NULL_TREE, opaque_V2SI_type_node,\n+\t\t\t\t      tree_cons (NULL_TREE, opaque_V2SI_type_node,\n \t\t\t\t\t\t endlink)))));\n \n   tree v2sf_ftype_4_v2sf\n     = build_function_type\n-    (V2SF_type_node,\n-     tree_cons (NULL_TREE, V2SF_type_node,\n-\t\ttree_cons (NULL_TREE, V2SF_type_node,\n-\t\t\t   tree_cons (NULL_TREE, V2SF_type_node,\n-\t\t\t\t      tree_cons (NULL_TREE, V2SF_type_node,\n+    (opaque_V2SF_type_node,\n+     tree_cons (NULL_TREE, opaque_V2SF_type_node,\n+\t\ttree_cons (NULL_TREE, opaque_V2SF_type_node,\n+\t\t\t   tree_cons (NULL_TREE, opaque_V2SF_type_node,\n+\t\t\t\t      tree_cons (NULL_TREE, opaque_V2SF_type_node,\n \t\t\t\t\t\t endlink)))));\n \n   tree int_ftype_int_v2si_v2si\n     = build_function_type\n     (integer_type_node,\n      tree_cons (NULL_TREE, integer_type_node,\n-\t\ttree_cons (NULL_TREE, V2SI_type_node,\n-\t\t\t   tree_cons (NULL_TREE, V2SI_type_node,\n+\t\ttree_cons (NULL_TREE, opaque_V2SI_type_node,\n+\t\t\t   tree_cons (NULL_TREE, opaque_V2SI_type_node,\n \t\t\t\t      endlink))));\n \n   tree int_ftype_int_v2sf_v2sf\n     = build_function_type\n     (integer_type_node,\n      tree_cons (NULL_TREE, integer_type_node,\n-\t\ttree_cons (NULL_TREE, V2SF_type_node,\n-\t\t\t   tree_cons (NULL_TREE, V2SF_type_node,\n+\t\ttree_cons (NULL_TREE, opaque_V2SF_type_node,\n+\t\t\t   tree_cons (NULL_TREE, opaque_V2SF_type_node,\n \t\t\t\t      endlink))));\n \n   tree void_ftype_v2si_puint_int\n     = build_function_type (void_type_node,\n-\t\t\t   tree_cons (NULL_TREE, V2SI_type_node,\n+\t\t\t   tree_cons (NULL_TREE, opaque_V2SI_type_node,\n \t\t\t\t      tree_cons (NULL_TREE, puint_type_node,\n \t\t\t\t\t\t tree_cons (NULL_TREE,\n \t\t\t\t\t\t\t    integer_type_node,\n \t\t\t\t\t\t\t    endlink))));\n \n   tree void_ftype_v2si_puint_char\n     = build_function_type (void_type_node,\n-\t\t\t   tree_cons (NULL_TREE, V2SI_type_node,\n+\t\t\t   tree_cons (NULL_TREE, opaque_V2SI_type_node,\n \t\t\t\t      tree_cons (NULL_TREE, puint_type_node,\n \t\t\t\t\t\t tree_cons (NULL_TREE,\n \t\t\t\t\t\t\t    char_type_node,\n \t\t\t\t\t\t\t    endlink))));\n \n   tree void_ftype_v2si_pv2si_int\n     = build_function_type (void_type_node,\n-\t\t\t   tree_cons (NULL_TREE, V2SI_type_node,\n+\t\t\t   tree_cons (NULL_TREE, opaque_V2SI_type_node,\n \t\t\t\t      tree_cons (NULL_TREE, pv2si_type_node,\n \t\t\t\t\t\t tree_cons (NULL_TREE,\n \t\t\t\t\t\t\t    integer_type_node,\n \t\t\t\t\t\t\t    endlink))));\n \n   tree void_ftype_v2si_pv2si_char\n     = build_function_type (void_type_node,\n-\t\t\t   tree_cons (NULL_TREE, V2SI_type_node,\n+\t\t\t   tree_cons (NULL_TREE, opaque_V2SI_type_node,\n \t\t\t\t      tree_cons (NULL_TREE, pv2si_type_node,\n \t\t\t\t\t\t tree_cons (NULL_TREE,\n \t\t\t\t\t\t\t    char_type_node,\n@@ -5562,19 +5561,19 @@ spe_init_builtins ()\n \t\t\t   tree_cons (NULL_TREE, void_type_node, endlink));\n \n   tree v2si_ftype_pv2si_int\n-    = build_function_type (V2SI_type_node,\n+    = build_function_type (opaque_V2SI_type_node,\n \t\t\t   tree_cons (NULL_TREE, pv2si_type_node,\n \t\t\t\t      tree_cons (NULL_TREE, integer_type_node,\n \t\t\t\t\t\t endlink)));\n \n   tree v2si_ftype_puint_int\n-    = build_function_type (V2SI_type_node,\n+    = build_function_type (opaque_V2SI_type_node,\n \t\t\t   tree_cons (NULL_TREE, puint_type_node,\n \t\t\t\t      tree_cons (NULL_TREE, integer_type_node,\n \t\t\t\t\t\t endlink)));\n \n   tree v2si_ftype_pushort_int\n-    = build_function_type (V2SI_type_node,\n+    = build_function_type (opaque_V2SI_type_node,\n \t\t\t   tree_cons (NULL_TREE, pushort_type_node,\n \t\t\t\t      tree_cons (NULL_TREE, integer_type_node,\n \t\t\t\t\t\t endlink)));"}]}