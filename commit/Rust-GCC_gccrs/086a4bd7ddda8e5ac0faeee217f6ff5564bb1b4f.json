{"sha": "086a4bd7ddda8e5ac0faeee217f6ff5564bb1b4f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDg2YTRiZDdkZGRhOGU1YWMwZmFlZWUyMTdmNmZmNTU2NGJiMWI0Zg==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.ch", "date": "2003-09-09T17:37:53Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2003-09-09T17:37:53Z"}, "message": "2003-09-09  Andreas Tobler  <a.tobler@schweiz.ch>\n\n\t* src/powerpc/ffi.c (ffi_closure_helper_SYSV) Handle struct\n\tpassing correctly.\n\nFrom-SVN: r71238", "tree": {"sha": "c28314a33b91f14b646d643523e7ac75c39fa73d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c28314a33b91f14b646d643523e7ac75c39fa73d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/086a4bd7ddda8e5ac0faeee217f6ff5564bb1b4f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/086a4bd7ddda8e5ac0faeee217f6ff5564bb1b4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/086a4bd7ddda8e5ac0faeee217f6ff5564bb1b4f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/086a4bd7ddda8e5ac0faeee217f6ff5564bb1b4f/comments", "author": null, "committer": null, "parents": [{"sha": "f09859008013c74a6b5d2530232216a3965278d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f09859008013c74a6b5d2530232216a3965278d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f09859008013c74a6b5d2530232216a3965278d3"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "bc9f28a62a631a331e04d1aa7e84999ae844d4a8", "filename": "libffi/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/086a4bd7ddda8e5ac0faeee217f6ff5564bb1b4f/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/086a4bd7ddda8e5ac0faeee217f6ff5564bb1b4f/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=086a4bd7ddda8e5ac0faeee217f6ff5564bb1b4f", "patch": "@@ -1,3 +1,8 @@\n+2003-09-09  Andreas Tobler  <a.tobler@schweiz.ch>\n+\n+\t* src/powerpc/ffi.c (ffi_closure_helper_SYSV) Handle struct\n+\tpassing correctly.\n+\t\n 2003-09-09  Alan Modra  <amodra@bigpond.net.au>\n \n \t* configure: Regenerate."}, {"sha": "010050f91ba2717f39336efa6b5af17a9c260436", "filename": "libffi/src/powerpc/ffi.c", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/086a4bd7ddda8e5ac0faeee217f6ff5564bb1b4f/libffi%2Fsrc%2Fpowerpc%2Fffi.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/086a4bd7ddda8e5ac0faeee217f6ff5564bb1b4f/libffi%2Fsrc%2Fpowerpc%2Fffi.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fsrc%2Fpowerpc%2Fffi.c?ref=086a4bd7ddda8e5ac0faeee217f6ff5564bb1b4f", "patch": "@@ -853,8 +853,7 @@ ffi_closure_helper_SYSV (ffi_closure* closure, void * rvalue,\n \tcase FFI_TYPE_SINT32:\n \tcase FFI_TYPE_UINT32:\n \tcase FFI_TYPE_POINTER:\n-\tcase FFI_TYPE_STRUCT:\n-\t/* there are 8 gpr registers used to pass values */\n+\t  /* there are 8 gpr registers used to pass values */\n           if (ng < 8) {\n \t     avalue[i] = pgr;\n              ng++;\n@@ -864,6 +863,19 @@ ffi_closure_helper_SYSV (ffi_closure* closure, void * rvalue,\n              pst++;\n           }\n \t  break;\n+\t\n+\tcase FFI_TYPE_STRUCT:\n+\t  /* Structs are passed by reference. The address will appear in a \n+\t     gpr if it is one of the first 8 arguments.  */\n+          if (ng < 8) {\n+\t     avalue[i] = (void *) *pgr;\n+             ng++;\n+             pgr++;\n+          } else {\n+             avalue[i] = (void *) *pst;\n+             pst++;\n+          }\n+\t  break;\n \n \tcase FFI_TYPE_SINT64:\n \tcase FFI_TYPE_UINT64:"}]}