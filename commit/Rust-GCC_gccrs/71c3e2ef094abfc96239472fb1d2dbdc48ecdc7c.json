{"sha": "71c3e2ef094abfc96239472fb1d2dbdc48ecdc7c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzFjM2UyZWYwOTRhYmZjOTYyMzk0NzJmYjFkMmRiZGM0OGVjZGM3Yw==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2014-09-07T18:09:34Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2014-09-07T18:09:34Z"}, "message": "libgcov-interface.c (STRONG_ALIAS): Rename to ...\n\n\t* libgcov-interface.c (STRONG_ALIAS): Rename to ...\n\t(ALIAS_weak): ... here. Use forwarding function.  Adjust uses.\n\nFrom-SVN: r215005", "tree": {"sha": "746435996c27c2a979ed8e5cc74b20e06ea204cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/746435996c27c2a979ed8e5cc74b20e06ea204cd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/71c3e2ef094abfc96239472fb1d2dbdc48ecdc7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71c3e2ef094abfc96239472fb1d2dbdc48ecdc7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71c3e2ef094abfc96239472fb1d2dbdc48ecdc7c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71c3e2ef094abfc96239472fb1d2dbdc48ecdc7c/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2ce145f58fb481b37be633a46d54a477d5856e29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ce145f58fb481b37be633a46d54a477d5856e29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ce145f58fb481b37be633a46d54a477d5856e29"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "4ab05ef8f948abed846e0257f96c0cd9ac23d186", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71c3e2ef094abfc96239472fb1d2dbdc48ecdc7c/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71c3e2ef094abfc96239472fb1d2dbdc48ecdc7c/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=71c3e2ef094abfc96239472fb1d2dbdc48ecdc7c", "patch": "@@ -1,3 +1,8 @@\n+2014-09-07  Nathan sidwell  <nathan@acm.org>\n+\n+\t* libgcov-interface.c (STRONG_ALIAS): Rename to ...\n+\t(ALIAS_weak): ... here. Use forwarding function.  Adjust uses.\n+\n 2014-09-05  Joseph Myers  <joseph@codesourcery.com>\n \n \t* Makefile.in (CRTSTUFF_CFLAGS): Add -fbuilding-libgcc."}, {"sha": "e40268991af57de16e1539fcd99f4e936d05ae24", "filename": "libgcc/libgcov-interface.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71c3e2ef094abfc96239472fb1d2dbdc48ecdc7c/libgcc%2Flibgcov-interface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71c3e2ef094abfc96239472fb1d2dbdc48ecdc7c/libgcc%2Flibgcov-interface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcov-interface.c?ref=71c3e2ef094abfc96239472fb1d2dbdc48ecdc7c", "patch": "@@ -42,11 +42,14 @@ void __gcov_dump (void) {}\n \n #else\n \n-\n /* Some functions we want to bind in this dynamic object, but have an\n-   overridable global alias.  */\n-#define STRONG_ALIAS(src,dst) \\\n-  extern __typeof (src) dst __attribute__((alias (#src)))\n+   overridable global alias.  Unfortunately not all targets support\n+   aliases, so we just have a forwarding function.  That'll be tail\n+   called, so the cost is a single jump instruction.*/\n+\n+#define ALIAS_void_fn(src,dst) \\\n+  void dst (void)\t    \\\n+  { src (); }\n \n extern __gthread_mutex_t __gcov_flush_mx ATTRIBUTE_HIDDEN;\n extern __gthread_mutex_t __gcov_flush_mx ATTRIBUTE_HIDDEN;\n@@ -133,7 +136,7 @@ __gcov_reset_int (void)\n   __gcov_root.dumped = 0;\n }\n \n-STRONG_ALIAS (__gcov_reset_int, __gcov_reset);\n+ALIAS_void_fn (__gcov_reset_int, __gcov_reset);\n \n #endif /* L_gcov_reset */\n "}]}