{"sha": "8645370af18979123d9e94e3ed215d23dd740721", "node_id": "C_kwDOANBUbNoAKDg2NDUzNzBhZjE4OTc5MTIzZDllOTRlM2VkMjE1ZDIzZGQ3NDA3MjE", "commit": {"author": {"name": "Palmer Dabbelt", "email": "palmer@rivosinc.com", "date": "2022-01-14T02:10:19Z"}, "committer": {"name": "Palmer Dabbelt", "email": "palmer@rivosinc.com", "date": "2022-02-24T19:29:43Z"}, "message": "RISC-V: Document the degree of position independence that medany affords\n\nThe code generated by -mcmodel=medany is defined to be\nposition-independent, but is not guaranteed to function correctly when\nlinked into position-independent executables or libraries.  See the\nrecent discussion at the psABI specification [1] for more details.\n\nIt would be better to reject these invalid sequences when linking, but\nas pointed out in a recent LD bug [2] there may be some compatibility\nissues related to the PCREL_HI20 relocations used to initialize GP.\nGiven the complexity here it's unlikely we'll be able to reject these\nsequences any time soon, so instead just document that these may not\nwork.\n\n[1]: https://github.com/riscv-non-isa/riscv-elf-psabi-doc/issues/245\n[2]: https://sourceware.org/bugzilla/show_bug.cgi?id=28789\n\ngcc/ChangeLog:\n\n\t* doc/invoke.texi (RISC-V -mcmodel=medany): Document the degree\n\tof position independence that -mcmodel=medany affords.\n\nSigned-off-by: Palmer Dabbelt <palmer@rivosinc.com>", "tree": {"sha": "cef8546b2f5bbe7cba88f1c5ffc8ee52e51dc69b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cef8546b2f5bbe7cba88f1c5ffc8ee52e51dc69b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8645370af18979123d9e94e3ed215d23dd740721", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJHBAABCAAxFiEEKzw3R0RoQ7JKlDp6LhMZ81+7GIkFAmIX3KcTHHBhbG1lckBk\nYWJiZWx0LmNvbQAKCRAuExnzX7sYieMOD/94qwpbBHhsmWEgrgCmI2NOOkJU5Oke\n3ri+eeEZ6uiEmRdkyRY7UI96GNbJvv9zdXLlb3C+MGVtDfK6xCIwJDtZbOP+1ayk\n5ElyebYiYmDjs1RooIf1w5Lcw1mnf0wfw3W1LvY1rHCltWdVdHSQ1Cf6JxCfrBQ1\niMXORhZISkJZts9vhAVrPWLJI0xR7cXa9i+ujvbZo8l7P1YeU7YRV1uVzPi5RioU\nbwrdlVIybuBWUFGOfSTsLs7jFsRtUl5S1NnksAbmlHuB7WhGXvZAS2Ruesaoal/C\nBvKPa0J89Eldxs45JUrIEvWQk4zouKtWvalDs2TnMJh1oK98yvd40Tm1MCL6qydt\nXPd7eClz3DpTxCYeOYJ6TFm749bUu3MBaYn4LHBGD+YZ4ttQPR2eQClH6Y1sjZ2M\nX45LKGRqXMstfFde6tRchNoYziUCxvS/3r6w+vXCHf1EzoHYd36z7Xxi7HSiWww3\nVuaTXjtKzly3IxYX3bvVjlGJ7s/I7jj/LLWt19IjBNOYEA534g3Pc+NwsqXeZrkt\naSi/grQUiTB9n9n4v8c49OteAKg0uIupseUFPQZF/ia2yeLzlL0XJwBtsUWsJOot\n2dZthft/NN3eea4GaQepwzhIbqhsv4MIjTrUCJBG+fsyhg8gyyzQJe4bD8DAjbH7\n/u7J+/hQx1dofA==\n=ndf+\n-----END PGP SIGNATURE-----", "payload": "tree cef8546b2f5bbe7cba88f1c5ffc8ee52e51dc69b\nparent 157cc4e0117756503c7c63df97cf31de7570b088\nauthor Palmer Dabbelt <palmer@rivosinc.com> 1642126219 -0800\ncommitter Palmer Dabbelt <palmer@rivosinc.com> 1645730983 -0800\n\nRISC-V: Document the degree of position independence that medany affords\n\nThe code generated by -mcmodel=medany is defined to be\nposition-independent, but is not guaranteed to function correctly when\nlinked into position-independent executables or libraries.  See the\nrecent discussion at the psABI specification [1] for more details.\n\nIt would be better to reject these invalid sequences when linking, but\nas pointed out in a recent LD bug [2] there may be some compatibility\nissues related to the PCREL_HI20 relocations used to initialize GP.\nGiven the complexity here it's unlikely we'll be able to reject these\nsequences any time soon, so instead just document that these may not\nwork.\n\n[1]: https://github.com/riscv-non-isa/riscv-elf-psabi-doc/issues/245\n[2]: https://sourceware.org/bugzilla/show_bug.cgi?id=28789\n\ngcc/ChangeLog:\n\n\t* doc/invoke.texi (RISC-V -mcmodel=medany): Document the degree\n\tof position independence that -mcmodel=medany affords.\n\nSigned-off-by: Palmer Dabbelt <palmer@rivosinc.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8645370af18979123d9e94e3ed215d23dd740721", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8645370af18979123d9e94e3ed215d23dd740721", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8645370af18979123d9e94e3ed215d23dd740721/comments", "author": {"login": "palmer-dabbelt", "id": 1383006, "node_id": "MDQ6VXNlcjEzODMwMDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1383006?v=4", "gravatar_id": "", "url": "https://api.github.com/users/palmer-dabbelt", "html_url": "https://github.com/palmer-dabbelt", "followers_url": "https://api.github.com/users/palmer-dabbelt/followers", "following_url": "https://api.github.com/users/palmer-dabbelt/following{/other_user}", "gists_url": "https://api.github.com/users/palmer-dabbelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/palmer-dabbelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/palmer-dabbelt/subscriptions", "organizations_url": "https://api.github.com/users/palmer-dabbelt/orgs", "repos_url": "https://api.github.com/users/palmer-dabbelt/repos", "events_url": "https://api.github.com/users/palmer-dabbelt/events{/privacy}", "received_events_url": "https://api.github.com/users/palmer-dabbelt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "palmer-dabbelt", "id": 1383006, "node_id": "MDQ6VXNlcjEzODMwMDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1383006?v=4", "gravatar_id": "", "url": "https://api.github.com/users/palmer-dabbelt", "html_url": "https://github.com/palmer-dabbelt", "followers_url": "https://api.github.com/users/palmer-dabbelt/followers", "following_url": "https://api.github.com/users/palmer-dabbelt/following{/other_user}", "gists_url": "https://api.github.com/users/palmer-dabbelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/palmer-dabbelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/palmer-dabbelt/subscriptions", "organizations_url": "https://api.github.com/users/palmer-dabbelt/orgs", "repos_url": "https://api.github.com/users/palmer-dabbelt/repos", "events_url": "https://api.github.com/users/palmer-dabbelt/events{/privacy}", "received_events_url": "https://api.github.com/users/palmer-dabbelt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "157cc4e0117756503c7c63df97cf31de7570b088", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/157cc4e0117756503c7c63df97cf31de7570b088", "html_url": "https://github.com/Rust-GCC/gccrs/commit/157cc4e0117756503c7c63df97cf31de7570b088"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "ec291c0654266f840aa025b971cec72c3453cac5", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8645370af18979123d9e94e3ed215d23dd740721/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8645370af18979123d9e94e3ed215d23dd740721/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=8645370af18979123d9e94e3ed215d23dd740721", "patch": "@@ -27772,6 +27772,10 @@ Generate code for the medium-any code model. The program and its statically\n defined symbols must be within any single 2 GiB address range. Programs can be\n statically or dynamically linked.\n \n+The code generated by the medium-any code model is position-independent, but is\n+not guaranteed to function correctly when linked into position-independent\n+executables or libraries.\n+\n @item -mexplicit-relocs\n @itemx -mno-exlicit-relocs\n Use or do not use assembler relocation operators when dealing with symbolic"}]}