{"sha": "01ae893012ce58112229ac1e3bd1050d5afec72b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDFhZTg5MzAxMmNlNTgxMTIyMjlhYzFlM2JkMTA1MGQ1YWZlYzcyYg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargls@comcast.net", "date": "2005-04-07T18:26:37Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2005-04-07T18:26:37Z"}, "message": "simplify.c (gfc_simplify_exponent): Fix exponent(tiny(x))\n\nFrom-SVN: r97792", "tree": {"sha": "27d6b666571261da74732c902515eb5906f5a39d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27d6b666571261da74732c902515eb5906f5a39d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/01ae893012ce58112229ac1e3bd1050d5afec72b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01ae893012ce58112229ac1e3bd1050d5afec72b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01ae893012ce58112229ac1e3bd1050d5afec72b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01ae893012ce58112229ac1e3bd1050d5afec72b/comments", "author": null, "committer": null, "parents": [{"sha": "03359b57f439670c05cc0050690884e1ac03bca4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03359b57f439670c05cc0050690884e1ac03bca4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03359b57f439670c05cc0050690884e1ac03bca4"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "e114853a20ab55cd05432fe525b0c8e87fbddab3", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01ae893012ce58112229ac1e3bd1050d5afec72b/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01ae893012ce58112229ac1e3bd1050d5afec72b/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=01ae893012ce58112229ac1e3bd1050d5afec72b", "patch": "@@ -1,3 +1,7 @@\n+2005-04-07  Steven G. Kargl  <kargls@comcast.net>\n+\n+\t* simplify.c (gfc_simplify_exponent): Fix exponent(tiny(x))\n+\n 2005-04-06  Steven G. Kargl  <kargls@comcast.net>\n \n \t* invoke.texi: Remove documentation of -std=f90 "}, {"sha": "add391f195e9c3b18e16769ee40542e9ec4ec494", "filename": "gcc/fortran/simplify.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01ae893012ce58112229ac1e3bd1050d5afec72b/gcc%2Ffortran%2Fsimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01ae893012ce58112229ac1e3bd1050d5afec72b/gcc%2Ffortran%2Fsimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsimplify.c?ref=01ae893012ce58112229ac1e3bd1050d5afec72b", "patch": "@@ -967,6 +967,7 @@ gfc_simplify_exp (gfc_expr * x)\n gfc_expr *\n gfc_simplify_exponent (gfc_expr * x)\n {\n+  int i;\n   mpfr_t tmp;\n   gfc_expr *result;\n \n@@ -991,6 +992,12 @@ gfc_simplify_exponent (gfc_expr * x)\n \n   gfc_mpfr_to_mpz (result->value.integer, tmp);\n \n+  /* The model number for tiny(x) is b**(emin - 1) where b is the base and emin\n+     is the smallest exponent value.  So, we need to add 1 if x is tiny(x).  */\n+  i = gfc_validate_kind (x->ts.type, x->ts.kind, false);\n+  if (mpfr_cmp (x->value.real, gfc_real_kinds[i].tiny) == 0)\n+    mpz_add_ui (result->value.integer,result->value.integer, 1);\n+\n   mpfr_clear (tmp);\n \n   return range_check (result, \"EXPONENT\");"}]}