{"sha": "f8e9d51205091e8ca25cd831fc32671c714bf2f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjhlOWQ1MTIwNTA5MWU4Y2EyNWNkODMxZmMzMjY3MWM3MTRiZjJmNw==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "dvorakz@suse.cz", "date": "2004-11-11T20:12:34Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2004-11-11T20:12:34Z"}, "message": "re PR tree-optimization/17742 (C Optimization error with -O1 on i686)\n\n\tPR tree-optimization/17742\n\t* tree-scalar-evolution.c (follow_ssa_edge_in_rhs): Handle\n\tMINUS_EXPR correctly.\n\nFrom-SVN: r90492", "tree": {"sha": "8ffe0179b9d6365d2ca4bbddb0921543c6850566", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ffe0179b9d6365d2ca4bbddb0921543c6850566"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f8e9d51205091e8ca25cd831fc32671c714bf2f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8e9d51205091e8ca25cd831fc32671c714bf2f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8e9d51205091e8ca25cd831fc32671c714bf2f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8e9d51205091e8ca25cd831fc32671c714bf2f7/comments", "author": null, "committer": null, "parents": [{"sha": "e0afb98af7dafb0bb088cd57d168d95542fdbf6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0afb98af7dafb0bb088cd57d168d95542fdbf6b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0afb98af7dafb0bb088cd57d168d95542fdbf6b"}], "stats": {"total": 66, "additions": 11, "deletions": 55}, "files": [{"sha": "7c072a451069cbffdc1d0e76fd9aa18d260818da", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8e9d51205091e8ca25cd831fc32671c714bf2f7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8e9d51205091e8ca25cd831fc32671c714bf2f7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f8e9d51205091e8ca25cd831fc32671c714bf2f7", "patch": "@@ -1,3 +1,9 @@\n+2004-11-11  Zdenek Dvorak  <dvorakz@suse.cz>\n+\n+\tPR tree-optimization/17742\n+\t* tree-scalar-evolution.c (follow_ssa_edge_in_rhs): Handle\n+\tMINUS_EXPR correctly.\n+\n 2004-11-11  Sebastian Pop  <pop@cri.ensmp.fr>\n \n \t* tree-scalar-evolution.c (follow_ssa_edge_in_condition_phi): "}, {"sha": "21e020dfb90e0aa78f6adc6456db914c38f869fe", "filename": "gcc/tree-scalar-evolution.c", "status": "modified", "additions": 5, "deletions": 55, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8e9d51205091e8ca25cd831fc32671c714bf2f7/gcc%2Ftree-scalar-evolution.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8e9d51205091e8ca25cd831fc32671c714bf2f7/gcc%2Ftree-scalar-evolution.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-scalar-evolution.c?ref=f8e9d51205091e8ca25cd831fc32671c714bf2f7", "patch": "@@ -1185,66 +1185,16 @@ follow_ssa_edge_in_rhs (struct loop *loop,\n       STRIP_TYPE_NOPS (rhs1);\n \n       if (TREE_CODE (rhs0) == SSA_NAME)\n-\t{\n-\t  if (TREE_CODE (rhs1) == SSA_NAME)\n-\t    {\n-\t      /* Match an assignment under the form: \n-\t\t \"a = b - c\".  */\n-\t      res = follow_ssa_edge \n-\t\t(loop, SSA_NAME_DEF_STMT (rhs0), halting_phi, \n-\t\t evolution_of_loop);\n-\t      \n-\t      if (res)\n-\t\t*evolution_of_loop = add_to_evolution \n-\t\t  (loop->num, chrec_convert (type_rhs, *evolution_of_loop), \n-\t\t   MINUS_EXPR, rhs1);\n-\t      \n-\t      else\n-\t\t{\n-\t\t  res = follow_ssa_edge \n-\t\t    (loop, SSA_NAME_DEF_STMT (rhs1), halting_phi, \n-\t\t     evolution_of_loop);\n-\t\t  \n-\t\t  if (res)\n-\t\t    *evolution_of_loop = add_to_evolution \n-\t\t      (loop->num, \n-\t\t       chrec_fold_multiply (type_rhs, \n-\t\t\t\t\t    *evolution_of_loop, \n-\t\t\t\t\t    build_int_cst_type (type_rhs, -1)),\n-\t\t       PLUS_EXPR, rhs0);\n-\t\t}\n-\t    }\n-\t  \n-\t  else\n-\t    {\n-\t      /* Match an assignment under the form: \n-\t\t \"a = b - ...\".  */\n-\t      res = follow_ssa_edge \n-\t\t(loop, SSA_NAME_DEF_STMT (rhs0), halting_phi, \n-\t\t evolution_of_loop);\n-\t      if (res)\n-\t\t*evolution_of_loop = add_to_evolution \n-\t\t  (loop->num, chrec_convert (type_rhs, *evolution_of_loop), \n-\t\t   MINUS_EXPR, rhs1);\n-\t    }\n-\t}\n-      \n-      else if (TREE_CODE (rhs1) == SSA_NAME)\n \t{\n \t  /* Match an assignment under the form: \n-\t     \"a = ... - c\".  */\n-\t  res = follow_ssa_edge \n-\t    (loop, SSA_NAME_DEF_STMT (rhs1), halting_phi, \n-\t     evolution_of_loop);\n+\t     \"a = b - ...\".  */\n+\t  res = follow_ssa_edge (loop, SSA_NAME_DEF_STMT (rhs0), halting_phi, \n+\t\t\t\t evolution_of_loop);\n \t  if (res)\n \t    *evolution_of_loop = add_to_evolution \n-\t      (loop->num, \n-\t       chrec_fold_multiply (type_rhs, \n-\t\t\t\t    *evolution_of_loop, \n-\t\t\t\t    build_int_cst_type (type_rhs, -1)),\n-\t       PLUS_EXPR, rhs0);\n+\t\t    (loop->num, chrec_convert (type_rhs, *evolution_of_loop), \n+\t\t     MINUS_EXPR, rhs1);\n \t}\n-      \n       else\n \t/* Otherwise, match an assignment under the form: \n \t   \"a = ... - ...\".  */"}]}