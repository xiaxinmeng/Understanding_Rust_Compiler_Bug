{"sha": "7d2fb01c0ad6962eee602d076938ce9a65f54918", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2QyZmIwMWMwYWQ2OTYyZWVlNjAyZDA3NjkzOGNlOWE2NWY1NDkxOA==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2018-03-10T18:34:12Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2018-03-10T18:34:12Z"}, "message": "re PR fortran/84734 (Compiling codes with insane array dimensions gives an ICE after r257971)\n\n2018-03-09  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/84734\n\t* arith.c (check_result, eval_intrinsic):  If result overflows, pass\n\tthe expression up the chain instead of a NULL pointer.\n\n2018-03-09  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/84734\n\t* gfortran.dg/pr84734.f90: New test.\n\nFrom-SVN: r258416", "tree": {"sha": "0e9c7c23f9bc06e84bd48e7b87cc6b35cb49a7d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0e9c7c23f9bc06e84bd48e7b87cc6b35cb49a7d2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d2fb01c0ad6962eee602d076938ce9a65f54918", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d2fb01c0ad6962eee602d076938ce9a65f54918", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d2fb01c0ad6962eee602d076938ce9a65f54918", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d2fb01c0ad6962eee602d076938ce9a65f54918/comments", "author": null, "committer": null, "parents": [{"sha": "b3231b65bb70b49ee89460c4a53cadab87116ec8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3231b65bb70b49ee89460c4a53cadab87116ec8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3231b65bb70b49ee89460c4a53cadab87116ec8"}], "stats": {"total": 25, "additions": 22, "deletions": 3}, "files": [{"sha": "d4042189ab3ec20c9274b3a2c6c9796428d0b84e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d2fb01c0ad6962eee602d076938ce9a65f54918/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d2fb01c0ad6962eee602d076938ce9a65f54918/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=7d2fb01c0ad6962eee602d076938ce9a65f54918", "patch": "@@ -1,3 +1,9 @@\n+2018-03-10  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/84734\n+\t* arith.c (check_result, eval_intrinsic):  If result overflows, pass\n+\tthe expression up the chain instead of a NULL pointer.\n+\n 2018-03-07  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/64124"}, {"sha": "6f97d0f978451f2243478ae04788f2d4f9acbdcd", "filename": "gcc/fortran/arith.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d2fb01c0ad6962eee602d076938ce9a65f54918/gcc%2Ffortran%2Farith.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d2fb01c0ad6962eee602d076938ce9a65f54918/gcc%2Ffortran%2Farith.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Farith.c?ref=7d2fb01c0ad6962eee602d076938ce9a65f54918", "patch": "@@ -555,10 +555,10 @@ check_result (arith rc, gfc_expr *x, gfc_expr *r, gfc_expr **rp)\n       val = ARITH_OK;\n     }\n \n-  if (val != ARITH_OK)\n-    gfc_free_expr (r);\n-  else\n+  if (val == ARITH_OK || val == ARITH_OVERFLOW)\n     *rp = r;\n+  else\n+    gfc_free_expr (r);\n \n   return val;\n }\n@@ -1603,9 +1603,13 @@ eval_intrinsic (gfc_intrinsic_op op,\n   if (rc != ARITH_OK)\n     {\n       gfc_error (gfc_arith_error (rc), &op1->where);\n+      if (rc == ARITH_OVERFLOW)\n+\tgoto done;\n       return NULL;\n     }\n \n+done:\n+\n   gfc_free_expr (op1);\n   gfc_free_expr (op2);\n   return result;"}, {"sha": "323e8360781e7ee2dc0c93bc37e63410e9a9a008", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d2fb01c0ad6962eee602d076938ce9a65f54918/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d2fb01c0ad6962eee602d076938ce9a65f54918/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7d2fb01c0ad6962eee602d076938ce9a65f54918", "patch": "@@ -1,3 +1,8 @@\n+2018-03-10  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/84734\n+\t* gfortran.dg/pr84734.f90: New test.\n+\n 2018-03-10  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/prot3.adb: New test."}, {"sha": "4b117ae43e734afa19d0f34c31202019bafa5082", "filename": "gcc/testsuite/gfortran.dg/pr84734.f90", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d2fb01c0ad6962eee602d076938ce9a65f54918/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr84734.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d2fb01c0ad6962eee602d076938ce9a65f54918/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr84734.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr84734.f90?ref=7d2fb01c0ad6962eee602d076938ce9a65f54918", "patch": "@@ -0,0 +1,4 @@\n+! { dg-do compile }\n+! PR fortran/84734\n+   integer :: b(huge(1_8)+1_8) = 0 ! { dg-error \"Arithmetic overflow\" }\n+   end"}]}