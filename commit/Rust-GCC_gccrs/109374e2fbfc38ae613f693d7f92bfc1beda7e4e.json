{"sha": "109374e2fbfc38ae613f693d7f92bfc1beda7e4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTA5Mzc0ZTJmYmZjMzhhZTYxM2Y2OTNkN2Y5MmJmYzFiZWRhN2U0ZQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2014-08-27T21:23:03Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2014-08-27T21:23:03Z"}, "message": "emit-rtl.c (set_unique_reg_note): Discard notes with side effects.\n\ngcc/\n\t* emit-rtl.c (set_unique_reg_note): Discard notes with side effects.\n\nFrom-SVN: r214609", "tree": {"sha": "c235714f11418b1f758bec2f8e58e51f4d4780f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c235714f11418b1f758bec2f8e58e51f4d4780f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/109374e2fbfc38ae613f693d7f92bfc1beda7e4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/109374e2fbfc38ae613f693d7f92bfc1beda7e4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/109374e2fbfc38ae613f693d7f92bfc1beda7e4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/109374e2fbfc38ae613f693d7f92bfc1beda7e4e/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b7679d96ec58fe7e67cbc535d1e3b055e40ac4f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7679d96ec58fe7e67cbc535d1e3b055e40ac4f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7679d96ec58fe7e67cbc535d1e3b055e40ac4f3"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "2666b243f8c34218cc99c92372aef176b92d9699", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/109374e2fbfc38ae613f693d7f92bfc1beda7e4e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/109374e2fbfc38ae613f693d7f92bfc1beda7e4e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=109374e2fbfc38ae613f693d7f92bfc1beda7e4e", "patch": "@@ -1,3 +1,7 @@\n+2014-08-27  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\t* emit-rtl.c (set_unique_reg_note): Discard notes with side effects.\n+\n 2014-08-27  David Malcolm  <dmalcolm@redhat.com>\n \n \t* rtl.h (JUMP_LABEL_AS_INSN): New."}, {"sha": "9abe56ed7a733e35041ff84e9c877dd078a65074", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/109374e2fbfc38ae613f693d7f92bfc1beda7e4e/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/109374e2fbfc38ae613f693d7f92bfc1beda7e4e/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=109374e2fbfc38ae613f693d7f92bfc1beda7e4e", "patch": "@@ -5181,6 +5181,14 @@ set_unique_reg_note (rtx insn, enum reg_note kind, rtx datum)\n \t It serves no useful purpose and breaks eliminate_regs.  */\n       if (GET_CODE (datum) == ASM_OPERANDS)\n \treturn NULL_RTX;\n+\n+      /* Notes with side effects are dangerous.  Even if the side-effect\n+\t initially mirrors one in PATTERN (INSN), later optimizations\n+\t might alter the way that the final register value is calculated\n+\t and so move or alter the side-effect in some way.  The note would\n+\t then no longer be a valid substitution for SET_SRC.  */\n+      if (side_effects_p (datum))\n+\treturn NULL_RTX;\n       break;\n \n     default:"}]}