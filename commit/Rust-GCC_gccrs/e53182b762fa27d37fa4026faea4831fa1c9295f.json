{"sha": "e53182b762fa27d37fa4026faea4831fa1c9295f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTUzMTgyYjc2MmZhMjdkMzdmYTQwMjZmYWVhNDgzMWZhMWM5Mjk1Zg==", "commit": {"author": {"name": "Quentin Neill", "email": "quentin.neill@amd.com", "date": "2012-02-15T20:58:40Z"}, "committer": {"name": "Quentin Neill", "email": "qneill@gcc.gnu.org", "date": "2012-02-15T20:58:40Z"}, "message": "compare_tests: Fix trailing paths in dir arguments.\n\n2012-02-15   Quentin Neill  <quentin.neill@amd.com>\n\n\t* compare_tests: Fix trailing paths in dir arguments.\n\tHandle sum1/sum2 temp files with others.\n\nFrom-SVN: r184284", "tree": {"sha": "ebdfb3fcbe7261a24a848d24b8e4d9b6d105c513", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ebdfb3fcbe7261a24a848d24b8e4d9b6d105c513"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e53182b762fa27d37fa4026faea4831fa1c9295f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e53182b762fa27d37fa4026faea4831fa1c9295f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e53182b762fa27d37fa4026faea4831fa1c9295f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e53182b762fa27d37fa4026faea4831fa1c9295f/comments", "author": null, "committer": null, "parents": [{"sha": "2a5d011c41e8fe384dd5f638ea665b805aef0030", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a5d011c41e8fe384dd5f638ea665b805aef0030", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a5d011c41e8fe384dd5f638ea665b805aef0030"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "7f952888aa28eba8ee2870c51eadcbb46d7d7908", "filename": "contrib/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e53182b762fa27d37fa4026faea4831fa1c9295f/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e53182b762fa27d37fa4026faea4831fa1c9295f/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=e53182b762fa27d37fa4026faea4831fa1c9295f", "patch": "@@ -1,3 +1,8 @@\n+2012-02-15   Quentin Neill  <quentin.neill@amd.com>\n+\n+\t* compare_tests: Fix trailing paths in dir arguments.\n+\tHandle sum1/sum2 temp files with others.\n+\n 2012-02-14  Walter Lee  <walt@tilera.com>\n \n \t* config-list.mk (LIST): Add tilegx-linux-gnu and"}, {"sha": "2fc6e056fc62818581fddaa40a2540a7863f5a8e", "filename": "contrib/compare_tests", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e53182b762fa27d37fa4026faea4831fa1c9295f/contrib%2Fcompare_tests", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e53182b762fa27d37fa4026faea4831fa1c9295f/contrib%2Fcompare_tests", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fcompare_tests?ref=e53182b762fa27d37fa4026faea4831fa1c9295f", "patch": "@@ -43,7 +43,9 @@ lst2=/tmp/$tool-lst2.$$\n lst3=/tmp/$tool-lst3.$$\n lst4=/tmp/$tool-lst4.$$\n lst5=/tmp/$tool-lst5.$$\n-tmps=\"$tmp1 $tmp2 $now_s $before_s $lst1 $lst2 $lst3 $lst4 $lst5\"\n+sum1=/tmp/$tool-sum1.$$\n+sum2=/tmp/$tool-sum2.$$\n+tmps=\"$tmp1 $tmp2 $now_s $before_s $lst1 $lst2 $lst3 $lst4 $lst5 $sum1 $sum2\"\n \n [ \"$1\" = \"-strict\" ] && strict=$1 && shift\n [ \"$1\" = \"-?\" ] && usage\n@@ -60,8 +62,8 @@ if [ -d \"$1\" -a -d \"$2\" ] ; then\n \techo \"## Dir2=$2: `cat $lst2 | wc -l` sum files\"\n \techo\n \t# remove leading directory components to compare\n-\tsed -e \"s|^$1/||\" $lst1 | sort >$lst3\n-\tsed -e \"s|^$2/||\" $lst2 | sort >$lst4\n+\tsed -e \"s|^$1[/]*||\" $lst1 | sort >$lst3\n+\tsed -e \"s|^$2[/]*||\" $lst2 | sort >$lst4\n \tcomm -23 $lst3 $lst4 >$lst5\n \tif [ -s $lst5 ] ; then\n \t\techo \"# Extra sum files in Dir1=$1\"\n@@ -83,14 +85,11 @@ if [ -d \"$1\" -a -d \"$2\" ] ; then\n \t\texit $exit_status\n \tfi\n \tcmnsums=`cat $lst5 | wc -l`\n-\tsum1=\"/tmp/$tool-sum-1\"\n-\tsum2=\"/tmp/$tool-sum-2\"\n \techo \"# Comparing $cmnsums common sum files\"\n \t( for fname in `cat $lst5`; do cat $1/$fname; done ) >$sum1\n \t( for fname in `cat $lst5`; do cat $2/$fname; done ) >$sum2\n \techo \"## ${CONFIG_SHELL-/bin/sh} $0 $strict $sum1 $sum2\"\n \t${CONFIG_SHELL-/bin/sh} $0 $strict $sum1 $sum2\n-\trm -f $sum1 $sum2\n \tret=$?\n \tif [ $ret -ne 0 ]; then\n \t\texit_status=`expr $exit_status + 1`"}]}