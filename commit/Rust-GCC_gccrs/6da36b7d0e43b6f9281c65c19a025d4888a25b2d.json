{"sha": "6da36b7d0e43b6f9281c65c19a025d4888a25b2d", "node_id": "C_kwDOANBUbNoAKDZkYTM2YjdkMGU0M2I2ZjkyODFjNjVjMTlhMDI1ZDQ4ODhhMjViMmQ", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-10-04T22:14:30Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-10-05T14:56:56Z"}, "message": "libstdc++: Simplify constraints for std::any construction\n\nlibstdc++-v3/ChangeLog:\n\n\t* include/bits/utility.h (__is_in_place_type_v): Define\n\tvariable template to detect in_place_type_t specializations.\n\t(__is_in_place_type): Replace class template with alias\n\ttemplate using __is_in_place_type_v.\n\t* include/std/any (any(T&&)): Check __is_in_place_type first and\n\tavoid instantiating is_copy_constructible unnecessarily.", "tree": {"sha": "4393f9ba0ca5fcbd9c5179b06fe39ba46df2af39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4393f9ba0ca5fcbd9c5179b06fe39ba46df2af39"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6da36b7d0e43b6f9281c65c19a025d4888a25b2d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6da36b7d0e43b6f9281c65c19a025d4888a25b2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6da36b7d0e43b6f9281c65c19a025d4888a25b2d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6da36b7d0e43b6f9281c65c19a025d4888a25b2d/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "824e0855732c601e0866d0e8a9264a85f758213e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/824e0855732c601e0866d0e8a9264a85f758213e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/824e0855732c601e0866d0e8a9264a85f758213e"}], "stats": {"total": 15, "additions": 6, "deletions": 9}, "files": [{"sha": "fce52a4530df77624f6a606a4e27b9791d902107", "filename": "libstdc++-v3/include/bits/utility.h", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6da36b7d0e43b6f9281c65c19a025d4888a25b2d/libstdc%2B%2B-v3%2Finclude%2Fbits%2Futility.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6da36b7d0e43b6f9281c65c19a025d4888a25b2d/libstdc%2B%2B-v3%2Finclude%2Fbits%2Futility.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Futility.h?ref=6da36b7d0e43b6f9281c65c19a025d4888a25b2d", "patch": "@@ -184,17 +184,14 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     inline constexpr in_place_index_t<_Idx> in_place_index{};\n \n   template<typename>\n-    struct __is_in_place_type_impl : false_type\n-    { };\n+    inline constexpr bool __is_in_place_type_v = false;\n \n   template<typename _Tp>\n-    struct __is_in_place_type_impl<in_place_type_t<_Tp>> : true_type\n-    { };\n+    inline constexpr bool __is_in_place_type_v<in_place_type_t<_Tp>> = true;\n \n   template<typename _Tp>\n-    struct __is_in_place_type\n-      : public __is_in_place_type_impl<_Tp>\n-    { };\n+    using __is_in_place_type = bool_constant<__is_in_place_type_v<_Tp>>;\n+\n #endif // C++17\n #endif // C++14\n "}, {"sha": "e3d9d774de42f737b3019a99e3858c7d635d8dcf", "filename": "libstdc++-v3/include/std/any", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6da36b7d0e43b6f9281c65c19a025d4888a25b2d/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fany", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6da36b7d0e43b6f9281c65c19a025d4888a25b2d/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fany", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fany?ref=6da36b7d0e43b6f9281c65c19a025d4888a25b2d", "patch": "@@ -183,8 +183,8 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     /// Construct with a copy of @p __value as the contained object.\n     template <typename _Tp, typename _VTp = _Decay_if_not_any<_Tp>,\n \t      typename _Mgr = _Manager<_VTp>,\n-\t      enable_if_t<is_copy_constructible<_VTp>::value\n-\t\t\t  && !__is_in_place_type<_VTp>::value, bool> = true>\n+\t      typename = _Require<__not_<__is_in_place_type<_VTp>>,\n+\t\t\t\t  is_copy_constructible<_VTp>>>\n       any(_Tp&& __value)\n       : _M_manager(&_Mgr::_S_manage)\n       {"}]}