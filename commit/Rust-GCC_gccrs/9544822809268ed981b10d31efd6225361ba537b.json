{"sha": "9544822809268ed981b10d31efd6225361ba537b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTU0NDgyMjgwOTI2OGVkOTgxYjEwZDMxZWZkNjIyNTM2MWJhNTM3Yg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-11-11T21:25:42Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-11-11T21:25:42Z"}, "message": "net: Fix TCP keepalive handling for Solaris.\n\nFrom-SVN: r204688", "tree": {"sha": "a470cdd04f64276bd47a99e4dd2a6f25afeee4ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a470cdd04f64276bd47a99e4dd2a6f25afeee4ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9544822809268ed981b10d31efd6225361ba537b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9544822809268ed981b10d31efd6225361ba537b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9544822809268ed981b10d31efd6225361ba537b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9544822809268ed981b10d31efd6225361ba537b/comments", "author": null, "committer": null, "parents": [{"sha": "3c450181dc21de5fac5e6d96600bbdd16cb7fdcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c450181dc21de5fac5e6d96600bbdd16cb7fdcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c450181dc21de5fac5e6d96600bbdd16cb7fdcb"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "5a0c9d78bf3fd9d59ecaaef318d939181df413de", "filename": "libgo/Makefile.am", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9544822809268ed981b10d31efd6225361ba537b/libgo%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9544822809268ed981b10d31efd6225361ba537b/libgo%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.am?ref=9544822809268ed981b10d31efd6225361ba537b", "patch": "@@ -770,9 +770,13 @@ else\n if LIBGO_IS_DARWIN\n go_net_tcpsockopt_file = go/net/tcpsockopt_darwin.go\n else\n+if LIBGO_IS_SOLARIS\n+go_net_tcpsockopt_file = go/net/tcpsockopt_solaris.go\n+else\n go_net_tcpsockopt_file =  go/net/tcpsockopt_unix.go\n endif\n endif\n+endif\n \n go_net_files = \\\n \tgo/net/cgo_unix.go \\"}, {"sha": "6434bcf518ec6c40df5a15c8d2ae2eeee3ccbc4d", "filename": "libgo/Makefile.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9544822809268ed981b10d31efd6225361ba537b/libgo%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9544822809268ed981b10d31efd6225361ba537b/libgo%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.in?ref=9544822809268ed981b10d31efd6225361ba537b", "patch": "@@ -1006,7 +1006,8 @@ go_mime_files = \\\n @LIBGO_IS_LINUX_TRUE@go_net_interface_file = go/net/interface_linux.go\n @LIBGO_IS_LINUX_FALSE@go_net_cloexec_file = go/net/sys_cloexec.go\n @LIBGO_IS_LINUX_TRUE@go_net_cloexec_file = go/net/sock_cloexec.go\n-@LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_OPENBSD_FALSE@go_net_tcpsockopt_file = go/net/tcpsockopt_unix.go\n+@LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_OPENBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@go_net_tcpsockopt_file = go/net/tcpsockopt_unix.go\n+@LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_OPENBSD_FALSE@@LIBGO_IS_SOLARIS_TRUE@go_net_tcpsockopt_file = go/net/tcpsockopt_solaris.go\n @LIBGO_IS_DARWIN_TRUE@@LIBGO_IS_OPENBSD_FALSE@go_net_tcpsockopt_file = go/net/tcpsockopt_darwin.go\n @LIBGO_IS_OPENBSD_TRUE@go_net_tcpsockopt_file = go/net/tcpsockopt_openbsd.go\n go_net_files = \\"}, {"sha": "a285e2d8d61edb18e93446fedafe89f70dbc7db7", "filename": "libgo/go/net/tcpsockopt_solaris.go", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9544822809268ed981b10d31efd6225361ba537b/libgo%2Fgo%2Fnet%2Ftcpsockopt_solaris.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9544822809268ed981b10d31efd6225361ba537b/libgo%2Fgo%2Fnet%2Ftcpsockopt_solaris.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fnet%2Ftcpsockopt_solaris.go?ref=9544822809268ed981b10d31efd6225361ba537b", "patch": "@@ -0,0 +1,25 @@\n+// Copyright 2009 The Go Authors.  All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+package net\n+\n+import (\n+\t\"os\"\n+\t\"syscall\"\n+\t\"time\"\n+)\n+\n+// Set keep alive period.\n+func setKeepAlivePeriod(fd *netFD, d time.Duration) error {\n+\tif err := fd.incref(); err != nil {\n+\t\treturn err\n+\t}\n+\tdefer fd.decref()\n+\n+\t// The kernel expects milliseconds so round to next highest millisecond.\n+\td += (time.Millisecond - time.Nanosecond)\n+\tmsecs := int(d.Nanoseconds() / time.Millisecond)\n+\n+\treturn os.NewSyscallError(\"setsockopt\", syscall.SetsockoptInt(fd.sysfd, syscall.IPPROTO_TCP, syscall.TCP_KEEPALIVE_THRESHOLD, msecs))\n+}"}]}