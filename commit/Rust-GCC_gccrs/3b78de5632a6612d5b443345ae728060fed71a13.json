{"sha": "3b78de5632a6612d5b443345ae728060fed71a13", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2I3OGRlNTYzMmE2NjEyZDViNDQzMzQ1YWU3MjgwNjBmZWQ3MWExMw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-10-04T08:51:31Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-10-04T08:51:31Z"}, "message": "dumpfile.h, dumpfile.c: Remove TDI_ada.\n\n2012-10-04  Arnaud Charlet  <charlet@adacore.com>\n\n\t* dumpfile.h, dumpfile.c: Remove TDI_ada.\n\nc-family/\n\t* c-ada-spec.c (print_ada_declaration): Remove handling of TDF_RAW.\n\t* c.opt (-fdump-ada-spec, -fdump-ada-spec-slim): Move switch definition\n\tout of dumpfile.h.\n\nc/\n\t* c-decl.c (c_write_global_declarations): Fix handling of\n\t-fdump-ada-spec*.\n\ncp/\n        * decl2.c (cp_write_global_declarations): Fix handling of\n        -fdump-ada-spec*.\n\nFrom-SVN: r192067", "tree": {"sha": "a694463ed7d1b4928ebd657f78a634e247a46cdb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a694463ed7d1b4928ebd657f78a634e247a46cdb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b78de5632a6612d5b443345ae728060fed71a13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b78de5632a6612d5b443345ae728060fed71a13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b78de5632a6612d5b443345ae728060fed71a13", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b78de5632a6612d5b443345ae728060fed71a13/comments", "author": null, "committer": null, "parents": [{"sha": "aef3607fef6a00ff80b36cc096f5f29db2c964e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aef3607fef6a00ff80b36cc096f5f29db2c964e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aef3607fef6a00ff80b36cc096f5f29db2c964e1"}], "stats": {"total": 49, "additions": 36, "deletions": 13}, "files": [{"sha": "dd6a3b8e0ab0dbd3326d71dff051f5c2c2eb60b4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3b78de5632a6612d5b443345ae728060fed71a13", "patch": "@@ -1,3 +1,7 @@\n+2012-10-04  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* dumpfile.h, dumpfile.c: Remove TDI_ada.\n+\n 2012-10-04  Yuri Rumyantsev  <ysrumyan@gmail.com>\n \n \t* config/i386/i386.c (ix86_dep_by_shift_count_body) : Add"}, {"sha": "0d112cfe7a7e9c7b04aaf1b903bd4dcd211176d0", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=3b78de5632a6612d5b443345ae728060fed71a13", "patch": "@@ -1,7 +1,13 @@\n+2012-10-04  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* c-ada-spec.c (print_ada_declaration): Remove handling of TDF_RAW.\n+\t* c.opt (-fdump-ada-spec, -fdump-ada-spec-slim): Move switch definition\n+\tout of dumpfile.h.\n+\n 2012-09-25  Dehao Chen  <dehao@google.com>\n \n \tPR middle-end/54645\n-\t* c-family/c-pch.c (c_common_read_pch): Rebuild the location_adhoc_data\n+\t* c-pch.c (c_common_read_pch): Rebuild the location_adhoc_data\n \tmap when read in the pch.\n \n 2012-09-18 Arnaud Charlet  <charlet@adacore.com>"}, {"sha": "4f38a63ad897ca1ed70a21411059c21805929a03", "filename": "gcc/c-family/c-ada-spec.c", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fc-family%2Fc-ada-spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fc-family%2Fc-ada-spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ada-spec.c?ref=3b78de5632a6612d5b443345ae728060fed71a13", "patch": "@@ -2535,7 +2535,6 @@ print_ada_declaration (pretty_printer *buffer, tree t, tree type,\n   int is_class = false;\n   tree name = TYPE_NAME (TREE_TYPE (t));\n   tree decl_name = DECL_NAME (t);\n-  bool dump_internal = get_dump_file_info (TDI_ada)->pflags & TDF_RAW;\n   tree orig = NULL_TREE;\n \n   if (cpp_check && cpp_check (t, IS_TEMPLATE))\n@@ -2705,8 +2704,7 @@ print_ada_declaration (pretty_printer *buffer, tree t, tree type,\n     }\n   else\n     {\n-      if (!dump_internal\n-\t  && TREE_CODE (t) == VAR_DECL\n+      if (TREE_CODE (t) == VAR_DECL\n \t  && decl_name\n \t  && *IDENTIFIER_POINTER (decl_name) == '_')\n \treturn 0;\n@@ -2796,8 +2794,7 @@ print_ada_declaration (pretty_printer *buffer, tree t, tree type,\n \n       /* If this function has an entry in the dispatch table, we cannot\n \t omit it.  */\n-      if (!dump_internal && !DECL_VINDEX (t)\n-\t  && *IDENTIFIER_POINTER (decl_name) == '_')\n+      if (!DECL_VINDEX (t) && *IDENTIFIER_POINTER (decl_name) == '_')\n \t{\n \t  if (IDENTIFIER_POINTER (decl_name)[1] == '_')\n \t    return 0;"}, {"sha": "b02c515327c23fd91ae7f43bdffacab9a283f262", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=3b78de5632a6612d5b443345ae728060fed71a13", "patch": "@@ -799,6 +799,14 @@ fdollars-in-identifiers\n C ObjC C++ ObjC++\n Permit '$' as an identifier character\n \n+fdump-ada-spec\n+C ObjC C++ ObjC++ RejectNegative Var(flag_dump_ada_spec)\n+Write all declarations as Ada code transitively\n+\n+fdump-ada-spec-slim\n+C ObjC C++ ObjC++ RejectNegative Var(flag_dump_ada_spec_slim)\n+Write all declarations as Ada code for the given file only\n+\n felide-constructors\n C++ ObjC++ Var(flag_elide_constructors) Init(1)\n "}, {"sha": "257b752cca4510c6b4ec47c8e73800cebb35683e", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=3b78de5632a6612d5b443345ae728060fed71a13", "patch": "@@ -1,3 +1,8 @@\n+2012-10-04  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* c-decl.c (c_write_global_declarations): Fix handling of\n+\t-fdump-ada-spec*.\n+\n 2012-09-30  Sharad Singhai  <singhai@google.com>\n \n \t* c-decl.c (c_write_global_declarations): Use a different method"}, {"sha": "a4a8108d27919f8fc469f0ba177dd212353aa039", "filename": "gcc/c/c-decl.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-decl.c?ref=3b78de5632a6612d5b443345ae728060fed71a13", "patch": "@@ -10079,10 +10079,10 @@ c_write_global_declarations (void)\n   gcc_assert (!current_scope);\n \n   /* Handle -fdump-ada-spec[-slim]. */\n-  if (dump_initialized_p (TDI_ada))\n+  if (flag_dump_ada_spec || flag_dump_ada_spec_slim)\n     {\n       /* Build a table of files to generate specs for */\n-      if (get_dump_file_info (TDI_ada)->pflags & TDF_SLIM)\n+      if (flag_dump_ada_spec_slim)\n \tcollect_source_ref (main_input_filename);\n       else\n \tfor_each_global_decl (collect_source_ref_cb);"}, {"sha": "fe72a9ca7e4d97d01ac974717266e2116adfb97e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3b78de5632a6612d5b443345ae728060fed71a13", "patch": "@@ -1,3 +1,8 @@\n+2012-10-04  Arnaud Charlet  <charlet@adacore.com>\n+        \n+        * decl2.c (cp_write_global_declarations): Fix handling of\n+        -fdump-ada-spec*.\n+\n 2012-10-03  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/54777"}, {"sha": "87e38d3bf6fb5c0dc6af44dd25d047abb30df05b", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=3b78de5632a6612d5b443345ae728060fed71a13", "patch": "@@ -3698,9 +3698,9 @@ cp_write_global_declarations (void)\n   cgraph_process_same_body_aliases ();\n \n   /* Handle -fdump-ada-spec[-slim] */\n-  if (dump_initialized_p (TDI_ada))\n+  if (flag_dump_ada_spec || flag_dump_ada_spec_slim)\n     {\n-      if (get_dump_file_info (TDI_ada)->pflags & TDF_SLIM)\n+      if (flag_dump_ada_spec_slim)\n \tcollect_source_ref (main_input_filename);\n       else\n \tcollect_source_refs (global_namespace);"}, {"sha": "2f610b6c259e67fb1556a72fdafed09830bfc168", "filename": "gcc/dumpfile.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fdumpfile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fdumpfile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdumpfile.c?ref=3b78de5632a6612d5b443345ae728060fed71a13", "patch": "@@ -57,8 +57,7 @@ static struct dump_file_info dump_files[TDI_end] =\n    0, 0, 0, 5},\n   {\".vcg\", \"tree-vcg\", NULL, NULL, NULL, NULL, NULL, TDF_TREE,\n    0, 0, 0, 6},\n-  {\".ads\", \"ada-spec\", NULL, NULL, NULL, NULL, NULL, 0, 0, 0, 0, 7},\n-#define FIRST_AUTO_NUMBERED_DUMP 8\n+#define FIRST_AUTO_NUMBERED_DUMP 7\n \n   {NULL, \"tree-all\", NULL, NULL, NULL, NULL, NULL, TDF_TREE,\n    0, 0, 0, 0},"}, {"sha": "87a2c728623b6668b9fb6129890596abb1a4a560", "filename": "gcc/dumpfile.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fdumpfile.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b78de5632a6612d5b443345ae728060fed71a13/gcc%2Fdumpfile.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdumpfile.h?ref=3b78de5632a6612d5b443345ae728060fed71a13", "patch": "@@ -37,7 +37,6 @@ enum tree_dump_index\n   TDI_nested,\t\t\t/* dump each function after unnesting it */\n   TDI_vcg,\t\t\t/* create a VCG graph file for each\n \t\t\t\t   function's flowgraph.  */\n-  TDI_ada,                      /* dump declarations in Ada syntax.  */\n   TDI_tree_all,                 /* enable all the GENERIC/GIMPLE dumps.  */\n   TDI_rtl_all,                  /* enable all the RTL dumps.  */\n   TDI_ipa_all,                  /* enable all the IPA dumps.  */"}]}