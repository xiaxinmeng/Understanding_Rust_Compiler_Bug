{"sha": "cadf64d1d568ce60f0a0ac6014e6ad295b3448cc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2FkZjY0ZDFkNTY4Y2U2MGYwYTBhYzYwMTRlNmFkMjk1YjM0NDhjYw==", "commit": {"author": {"name": "Bob Duff", "email": "duff@adacore.com", "date": "2007-12-13T10:28:48Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-12-13T10:28:48Z"}, "message": "restrict.ads, [...] (Check_Implicit_Dynamic_Code_Allowed): New procedure to be called from the back end to check the...\n\n2007-12-06  Bob Duff  <duff@adacore.com>\n\n\t* restrict.ads, restrict.adb (Check_Implicit_Dynamic_Code_Allowed): New\n\tprocedure to be called from the back end to check the\n\tNo_Implicit_Dynamic_Code restriction.\n\nFrom-SVN: r130847", "tree": {"sha": "eddd27c4be020fe79f5bbbaa037be2af9394de2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eddd27c4be020fe79f5bbbaa037be2af9394de2d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cadf64d1d568ce60f0a0ac6014e6ad295b3448cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cadf64d1d568ce60f0a0ac6014e6ad295b3448cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cadf64d1d568ce60f0a0ac6014e6ad295b3448cc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cadf64d1d568ce60f0a0ac6014e6ad295b3448cc/comments", "author": {"login": "bobduff", "id": 29099567, "node_id": "MDQ6VXNlcjI5MDk5NTY3", "avatar_url": "https://avatars.githubusercontent.com/u/29099567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobduff", "html_url": "https://github.com/bobduff", "followers_url": "https://api.github.com/users/bobduff/followers", "following_url": "https://api.github.com/users/bobduff/following{/other_user}", "gists_url": "https://api.github.com/users/bobduff/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobduff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobduff/subscriptions", "organizations_url": "https://api.github.com/users/bobduff/orgs", "repos_url": "https://api.github.com/users/bobduff/repos", "events_url": "https://api.github.com/users/bobduff/events{/privacy}", "received_events_url": "https://api.github.com/users/bobduff/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6c1f47ee4b24ebae655517ad3ea934856aae662d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c1f47ee4b24ebae655517ad3ea934856aae662d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c1f47ee4b24ebae655517ad3ea934856aae662d"}], "stats": {"total": 28, "additions": 17, "deletions": 11}, "files": [{"sha": "85134080835d03ce03408e908dbadea1c3313310", "filename": "gcc/ada/restrict.adb", "status": "modified", "additions": 10, "deletions": 11, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cadf64d1d568ce60f0a0ac6014e6ad295b3448cc/gcc%2Fada%2Frestrict.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cadf64d1d568ce60f0a0ac6014e6ad295b3448cc/gcc%2Fada%2Frestrict.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Frestrict.adb?ref=cadf64d1d568ce60f0a0ac6014e6ad295b3448cc", "patch": "@@ -101,19 +101,18 @@ package body Restrict is\n \n    procedure Check_Elaboration_Code_Allowed (N : Node_Id) is\n    begin\n-      --  Avoid calling Namet.Unlock/Lock except when there is an error.\n-      --  Even in the error case it is a bit dubious, either gigi needs\n-      --  the table locked or it does not! ???\n-\n-      if Restrictions.Set (No_Elaboration_Code)\n-        and then not Suppress_Restriction_Message (N)\n-      then\n-         Namet.Unlock;\n-         Check_Restriction (No_Elaboration_Code, N);\n-         Namet.Lock;\n-      end if;\n+      Check_Restriction (No_Elaboration_Code, N);\n    end Check_Elaboration_Code_Allowed;\n \n+   -----------------------------------------\n+   -- Check_Implicit_Dynamic_Code_Allowed --\n+   -----------------------------------------\n+\n+   procedure Check_Implicit_Dynamic_Code_Allowed (N : Node_Id) is\n+   begin\n+      Check_Restriction (No_Implicit_Dynamic_Code, N);\n+   end Check_Implicit_Dynamic_Code_Allowed;\n+\n    ----------------------------------\n    -- Check_No_Implicit_Heap_Alloc --\n    ----------------------------------"}, {"sha": "e82449e593305d13108213e0a691a7e4549b6a8f", "filename": "gcc/ada/restrict.ads", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cadf64d1d568ce60f0a0ac6014e6ad295b3448cc/gcc%2Fada%2Frestrict.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cadf64d1d568ce60f0a0ac6014e6ad295b3448cc/gcc%2Fada%2Frestrict.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Frestrict.ads?ref=cadf64d1d568ce60f0a0ac6014e6ad295b3448cc", "patch": "@@ -207,6 +207,13 @@ package Restrict is\n    --  an elaboration routine. If elaboration code is not allowed, an error\n    --  message is posted on the node given as argument.\n \n+   procedure Check_Implicit_Dynamic_Code_Allowed (N : Node_Id);\n+   --  Tests to see if dynamic code generation (dynamically generated\n+   --  trampolines, in particular) is allowed by the current restrictions\n+   --  settings. This function is called by Gigi when it needs to generate code\n+   --  that generates a trampoline. If not allowed, an error message is posted\n+   --  on the node given as argument.\n+\n    procedure Check_No_Implicit_Heap_Alloc (N : Node_Id);\n    --  Equivalent to Check_Restriction (No_Implicit_Heap_Allocations, N).\n    --  Provided for easy use by back end, which has to check this restriction."}]}