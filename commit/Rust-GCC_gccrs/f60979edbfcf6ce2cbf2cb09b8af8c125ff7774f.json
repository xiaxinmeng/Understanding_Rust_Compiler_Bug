{"sha": "f60979edbfcf6ce2cbf2cb09b8af8c125ff7774f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjYwOTc5ZWRiZmNmNmNlMmNiZjJjYjA5YjhhZjhjMTI1ZmY3Nzc0Zg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2020-04-09T12:12:36Z"}, "committer": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2020-04-09T12:12:36Z"}, "message": "Avoid g++.dg/lto/alias-4_0.C test failure on ARM [PR91322]\n\n\tPR tree-optimization/91322\n\t* g++.dg/lto/alias-4_0.C: Avoid conflict with va_list on ARM and add\n\ta template testing that.", "tree": {"sha": "537e5bafaa25ebc7f33a046e88255650cae20817", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/537e5bafaa25ebc7f33a046e88255650cae20817"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f60979edbfcf6ce2cbf2cb09b8af8c125ff7774f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f60979edbfcf6ce2cbf2cb09b8af8c125ff7774f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f60979edbfcf6ce2cbf2cb09b8af8c125ff7774f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f60979edbfcf6ce2cbf2cb09b8af8c125ff7774f/comments", "author": null, "committer": null, "parents": [{"sha": "7ed2d6cbd094871a0dd23f2d433b962d5f462936", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ed2d6cbd094871a0dd23f2d433b962d5f462936", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ed2d6cbd094871a0dd23f2d433b962d5f462936"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "fac41ca63b5d1fafcd1026946cab5824aeac3bdf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f60979edbfcf6ce2cbf2cb09b8af8c125ff7774f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f60979edbfcf6ce2cbf2cb09b8af8c125ff7774f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f60979edbfcf6ce2cbf2cb09b8af8c125ff7774f", "patch": "@@ -1,3 +1,9 @@\n+2020-04-09  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR tree-optimization/91322\n+\t* g++.dg/lto/alias-4_0.C: Avoid conflict with va_list on ARM and add\n+\ta template testing that\n+\n 2020-04-09  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* lib/scanasm.exp (check-function-bodies): Treat the third"}, {"sha": "3d3863247538d3c1ac7c6c94e75cce9b07ecbca0", "filename": "gcc/testsuite/g++.dg/lto/alias-4_0.C", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f60979edbfcf6ce2cbf2cb09b8af8c125ff7774f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Falias-4_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f60979edbfcf6ce2cbf2cb09b8af8c125ff7774f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Falias-4_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Falias-4_0.C?ref=f60979edbfcf6ce2cbf2cb09b8af8c125ff7774f", "patch": "@@ -1,11 +1,14 @@\n /* { dg-lto-do run } */\n-/* { dg-lto-options { { -O3 -flto -fno-early-inlining } } } */\n+/* { dg-lto-options { { -O3 -flto -fno-early-inlining -fdump-ipa-cgraph} } } */\n __attribute__ ((used))\n short *ptr_init, **ptr=&ptr_init;\n \n __attribute__ ((used))\n struct a {\n   int *aptr;\n+  /* On ARM va_list is an anonymous structure containing pointer. \n+     This disable ODR TBAA on it.  */\n+  short b;\n } a, *aptr=&a;\n \n void\n@@ -29,3 +32,6 @@ main()\n   test ();\n   return 0;\n }\n+/* On ARM the testcase used to fial because struct a got in conflict with builtin\n+   va_list type.  Check that this does not happen.  */\n+/* { dg-final { scan-wpa-ipa-dump-not \"ODR and non-ODR type conflict\" \"cgraph\"  } } */"}]}