{"sha": "1821f97bb447dcfcb1fbdb780affbadc9ff03907", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTgyMWY5N2JiNDQ3ZGNmY2IxZmJkYjc4MGFmZmJhZGM5ZmYwMzkwNw==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2019-03-30T22:10:12Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gcc.gnu.org", "date": "2019-03-30T22:10:12Z"}, "message": "testsuite/gdc.test: Merge upstream dmd 5dd3eccc3\n\nThe D2 testsuite script has been updated to handle EXTRA_SOURCES and\nEXTRA_FILES settings being split across multiple lines, which is how\nthey appear in upstream.\n\nReviewed-on: https://github.com/dlang/dmd/pull/9517\n\ngcc/testsuite/ChangeLog:\n\n2019-03-30  Iain Buclaw  <ibuclaw@gdcproject.org>\n\n\t* gdc.test/gdc-test.exp (gdc-copy-extra): Append copied files to\n\tcleanup_extra_files.\n\t(dmd2dg): Copy additional files after test is processed.\n\t(gdc-do-test): Remove all copied files after test.\n\nFrom-SVN: r270038", "tree": {"sha": "6a2a1cb47fe4078c9dfa0cd26c6d53c2919ee98e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6a2a1cb47fe4078c9dfa0cd26c6d53c2919ee98e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1821f97bb447dcfcb1fbdb780affbadc9ff03907", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1821f97bb447dcfcb1fbdb780affbadc9ff03907", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1821f97bb447dcfcb1fbdb780affbadc9ff03907", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1821f97bb447dcfcb1fbdb780affbadc9ff03907/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0324a4978e151e4a1cb5aa93265d2876af581baa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0324a4978e151e4a1cb5aa93265d2876af581baa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0324a4978e151e4a1cb5aa93265d2876af581baa"}], "stats": {"total": 152, "additions": 103, "deletions": 49}, "files": [{"sha": "31ea106965b57c11f2db675a7737d2d24e216dfe", "filename": "gcc/d/dmd/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Fd%2Fdmd%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Fd%2Fdmd%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fdmd%2FMERGE?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,4 +1,4 @@\n-ab702e73e56aefb3b77b8f8f42da94bc22143eeb\n+5dd3eccc3b0758346f77bee3cdc3f6bd15de339b\n \n The first line of this file holds the git revision number of the last\n merge done from the dlang/dmd repository."}, {"sha": "8c46400a1f366ef0c307ebed9cfaedec34bae366", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,3 +1,10 @@\n+2019-03-30  Iain Buclaw  <ibuclaw@gdcproject.org>\n+\n+\t* gdc.test/gdc-test.exp (gdc-copy-extra): Append copied files to\n+\tcleanup_extra_files.\n+\t(dmd2dg): Copy additional files after test is translated.\n+\t(gdc-do-test): Remove all copied files after test.\n+\n 2019-03-30  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/89841"}, {"sha": "a1bac8e48f1692660834b3994f447777d3088cd0", "filename": "gcc/testsuite/gdc.test/compilable/test6395.d", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2Ftest6395.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2Ftest6395.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2Ftest6395.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,5 +1,6 @@\n-// REQUIRED_ARGS: -c -Icompilable/extra-files\n+// REQUIRED_ARGS: -Icompilable/extra-files\n // EXTRA_SOURCES: b6395.d\n+// EXTRA_FILES: extra-files/c6395.d\n \n // 6395\n "}, {"sha": "45344f13b8f27dd004799272f6c071271e7fffbb", "filename": "gcc/testsuite/gdc.test/compilable/test7190.d", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2Ftest7190.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2Ftest7190.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2Ftest7190.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,6 +1,9 @@\n // PERMUTE_ARGS:\n // REQUIRED_ARGS: -Icompilable/extra-files\n-// EXTRA_FILES: extra-files/example7190/controllers/HomeController.d extra-files/example7190/models/HomeModel.d extra-files/serenity7190/core/Controller.d  extra-files/serenity7190/core/Model.d\n+// EXTRA_FILES: extra-files/example7190/controllers/HomeController.d\n+// EXTRA_FILES: extra-files/example7190/models/HomeModel.d\n+// EXTRA_FILES: extra-files/serenity7190/core/Controller.d\n+// EXTRA_FILES: extra-files/serenity7190/core/Model.d\n \n import example7190.controllers.HomeController;\n import example7190.models.HomeModel;"}, {"sha": "2baee7c216bb9ef41317329f394920346219c47f", "filename": "gcc/testsuite/gdc.test/compilable/test9436.d", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2Ftest9436.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2Ftest9436.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2Ftest9436.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,4 +1,3 @@\n-// REQUIRED_ARGS: -c\n // EXTRA_SOURCES: imports/test9436interp.d\n \n // this is a dummy module for test 9436."}, {"sha": "7188758414c8c06ca708f3b975e9939298116258", "filename": "gcc/testsuite/gdc.test/compilable/testDIP37.d", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,6 +1,9 @@\n // PERMUTE_ARGS:\n // REQUIRED_ARGS: -Icompilable/extra-files\n-// EXTRA_FILES: extra-files/pkgDIP37/datetime/package.d extra-files/pkgDIP37/datetime/common.d extra-files/pkgDIP37/test17629/package.di extra-files/pkgDIP37/test17629/common.di\n+// EXTRA_FILES: extra-files/pkgDIP37/datetime/package.d\n+// EXTRA_FILES: extra-files/pkgDIP37/datetime/common.d\n+// EXTRA_FILES: extra-files/pkgDIP37/test17629/package.di\n+// EXTRA_FILES: extra-files/pkgDIP37/test17629/common.di\n \n void test1()\n {"}, {"sha": "3c4a409b709090228de41bea691da5dc7e84adf4", "filename": "gcc/testsuite/gdc.test/compilable/testDIP37_10302.d", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37_10302.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37_10302.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37_10302.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,6 +1,7 @@\n // PERMUTE_ARGS:\n-// REQUIRED_ARGS: -c -Icompilable/extra-files\n-// EXTRA_SOURCES: extra-files/pkgDIP37_10302/liba.d extra-files/pkgDIP37_10302/libb.d\n+// REQUIRED_ARGS: -Icompilable/extra-files\n+// COMPILED_IMPORTS: extra-files/pkgDIP37_10302/liba.d\n+// COMPILED_IMPORTS: extra-files/pkgDIP37_10302/libb.d\n // EXTRA_FILES: extra-files/pkgDIP37_10302/package.d\n \n module test;"}, {"sha": "f9adf86307c0392f533e68c02271e6259e908155", "filename": "gcc/testsuite/gdc.test/compilable/testDIP37_10354.d", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37_10354.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37_10354.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37_10354.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,6 +1,8 @@\n // PERMUTE_ARGS:\n // REQUIRED_ARGS: -o- -Icompilable/extra-files\n-// EXTRA_FILES: extra-files/pkgDIP37_10354/mbar.d extra-files/pkgDIP37_10354/mfoo.d extra-files/pkgDIP37_10354/package.d\n+// EXTRA_FILES: extra-files/pkgDIP37_10354/mbar.d\n+// EXTRA_FILES: extra-files/pkgDIP37_10354/mfoo.d\n+// EXTRA_FILES: extra-files/pkgDIP37_10354/package.d\n \n module testDIP37_10354;\n import pkgDIP37_10354.mfoo;"}, {"sha": "7da5bcf2d08f2b769b6a735860960151417868d8", "filename": "gcc/testsuite/gdc.test/compilable/testDIP37_10421.d", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37_10421.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37_10421.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FtestDIP37_10421.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,6 +1,8 @@\n // PERMUTE_ARGS:\n // REQUIRED_ARGS: -Icompilable/extra-files\n-// COMPILED_IMPORTS: extra-files/pkgDIP37_10421/algo/package.d extra-files/pkgDIP37_10421/algo/mod.d extra-files/pkgDIP37_10421/except.d\n+// COMPILED_IMPORTS: extra-files/pkgDIP37_10421/algo/package.d\n+// COMPILED_IMPORTS: extra-files/pkgDIP37_10421/algo/mod.d\n+// COMPILED_IMPORTS: extra-files/pkgDIP37_10421/except.d\n \n module testDIP37_10421;\n import pkgDIP37_10421.algo;"}, {"sha": "ab8a4a3cfbdc217ebd16b45a583098f60989e14f", "filename": "gcc/testsuite/gdc.test/gdc-test.exp", "status": "modified", "additions": 46, "deletions": 24, "changes": 70, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fgdc-test.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Fgdc-test.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Fgdc-test.exp?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -153,6 +153,10 @@ proc gdc-copy-extra { base extra } {\n     close $fdin\n     close $fdout\n \n+    # Remove file once test is finished.\n+    upvar 2 cleanup_extra_files cleanups\n+    lappend cleanups $extra\n+\n     return $extra\n }\n \n@@ -184,6 +188,9 @@ proc dmd2dg { base test } {\n     set PERMUTE_ARGS $DEFAULT_DFLAGS\n     set GDC_EXECUTE_ARGS \"\"\n \n+    set extra_sources \"\"\n+    set extra_files \"\"\n+\n     # Split base, folder/file.\n     set type [file dirname $test]\n     set name [file tail $test]\n@@ -230,46 +237,57 @@ proc dmd2dg { base test } {\n \t    regsub -- {REQUIRED_ARGS.*$} $copy_line $new_option out_line\n \n \t} elseif [regexp -- {EXTRA_SOURCES\\s*:\\s*(.*)} $copy_line match sources] {\n-\t    # Copy all sources to the testsuite build directory.\n-\t    foreach import $sources {\n-\t\t# print \"Import: $base $type/$import\"\n-\t\tgdc-copy-extra $base \"$type/$import\"\n+\t    # EXTRA_SOURCES are appended to extra_sources list\n+\t    foreach srcfile $sources {\n+\t\tlappend extra_sources $srcfile\n \t    }\n-\t    set new_option \"{ dg-additional-sources \\\"$sources\\\" }\"\n-\t    regsub -- {EXTRA_SOURCES.*$} $copy_line $new_option out_line\n+\t    regsub -- {EXTRA_SOURCES.*$} $copy_line \"\" out_line\n \n \t} elseif [regexp -- {EXTRA_CPP_SOURCES\\s*:\\s*(.*)} $copy_line match sources] {\n-\t    # Copy all sources to the testsuite build directory.\n-\t    foreach import $sources {\n-\t\t# print \"Import: $base $type/$import\"\n-\t\tgdc-copy-extra $base \"$type/$import\"\n+\t    # EXTRA_CPP_SOURCES are appended to extra_sources list\n+\t    foreach srcfile $sources {\n+\t\t# C++ sources are found in the extra-files directory.\n+\t\tlappend extra_sources \"extra-files/$srcfile\"\n \t    }\n-\t    set new_option \"{ dg-additional-sources \\\"$sources\\\" }\"\n-\t    regsub -- {EXTRA_CPP_SOURCES.*$} $copy_line $new_option out_line\n+\t    regsub -- {EXTRA_CPP_SOURCES.*$} $copy_line \"\" out_line\n \n \t} elseif [regexp -- {EXTRA_FILES\\s*:\\s*(.*)} $copy_line match files] {\n-\t    # Copy all files to the testsuite build directory.\n-\t    foreach import $files {\n-\t\t# print \"Import: $base $type/$import\"\n-\t\tgdc-copy-extra $base \"$type/$import\"\n+\t    # EXTRA_FILES are appended to extra_files list\n+\t    foreach file $files {\n+\t\tlappend extra_files $file\n \t    }\n-\t    set new_option \"{ dg-additional-files \\\"$files\\\" }\"\n-\t    regsub -- {EXTRA_FILES.*$} $copy_line $new_option out_line\n+\t    regsub -- {EXTRA_FILES.*$} $copy_line \"\" out_line\n \n \t} elseif [regexp -- {COMPILED_IMPORTS\\s*:\\s*(.*)} $copy_line match sources] {\n-\t    # Copy all sources to the testsuite build directory.\n+\t    # COMPILED_IMPORTS are appended to extra_sources list\n \t    foreach import $sources {\n-\t\t# print \"Import: $base $type/$import\"\n-\t\tgdc-copy-extra $base \"$type/$import\"\n+\t\tlappend extra_sources $import\n \t    }\n-\t    set new_option \"{ dg-additional-sources \\\"$sources\\\" }\"\n-\t    regsub -- {COMPILED_IMPORTS.*$} $copy_line $new_option out_line\n+\t    regsub -- {COMPILED_IMPORTS.*$} $copy_line \"\" out_line\n \n \t}\n \n \tputs $fdout $out_line\n     }\n \n+    # Now that all extra sources and files have been collected, copy them all\n+    # to the testsuite build directory.\n+    if { [llength $extra_sources] > 0 } {\n+\tforeach srcfile $extra_sources {\n+\t    gdc-copy-extra $base \"$type/$srcfile\"\n+\t}\n+\tset out_line \"// { dg-additional-sources \\\"$extra_sources\\\" }\"\n+\tputs $fdout $out_line\n+    }\n+\n+    if { [llength $extra_files] > 0 } {\n+\tforeach file $extra_files {\n+\t    gdc-copy-extra $base \"$type/$file\"\n+\t}\n+\tset out_line \"// { dg-additional-files \\\"$extra_files\\\" }\"\n+\tputs $fdout $out_line\n+    }\n+\n     # Add specific options for test type\n \n     # DMD's testsuite is extremely verbose, compiler messages from constructs\n@@ -387,6 +405,7 @@ proc gdc-do-test { } {\n \n \t# Convert to DG test.\n \tset imports [format \"-I%s/%s\" $base $dir]\n+\tset cleanup_extra_files \"\"\n \t# Include $subdir prefix so test names follow DejaGnu conventions.\n \tset filename \"$subdir/[dmd2dg $base $dir/$name.$ext]\"\n \n@@ -430,7 +449,10 @@ proc gdc-do-test { } {\n \t    }\n \t}\n \n-\t# Cleanup\n+\t# Cleanup test directory.\n+\tforeach srcfile $cleanup_extra_files {\n+\t    file delete $subdir/$srcfile\n+\t}\n \tfile delete $filename\n     }\n "}, {"sha": "3a914cd0e57d05fc5eb0cfe5b1df2fe2848e16d3", "filename": "gcc/testsuite/gdc.test/runnable/cabi1.d", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fcabi1.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fcabi1.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fcabi1.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,5 +1,5 @@\n \n-// EXTRA_CPP_SOURCES: extra-files/cabi2.cpp\n+// EXTRA_CPP_SOURCES: cabi2.cpp\n \n import core.stdc.stdio;\n import core.stdc.config;"}, {"sha": "83e1cff10d91cb0a369cfc6a6e4ae8a9362bfd2d", "filename": "gcc/testsuite/gdc.test/runnable/cpp_abi_tests.d", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fcpp_abi_tests.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fcpp_abi_tests.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fcpp_abi_tests.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,4 +1,4 @@\n-// EXTRA_CPP_SOURCES: extra-files/cpp_abi_tests.cpp\n+// EXTRA_CPP_SOURCES: cpp_abi_tests.cpp\n \n extern(C++) {\n "}, {"sha": "b9b4832991e879008de2cec9455e87baa38c6e01", "filename": "gcc/testsuite/gdc.test/runnable/cppa.d", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fcppa.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fcppa.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fcppa.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,5 +1,5 @@\n // PERMUTE_ARGS: -g\n-// EXTRA_CPP_SOURCES: extra-files/cppb.cpp\n+// EXTRA_CPP_SOURCES: cppb.cpp\n \n import core.stdc.stdio;\n import core.stdc.stdarg;"}, {"sha": "9099f94f2d0aaa8e8cb8b50058c7ac45971aa688", "filename": "gcc/testsuite/gdc.test/runnable/externmangle.d", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fexternmangle.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fexternmangle.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fexternmangle.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,4 +1,4 @@\n-// EXTRA_CPP_SOURCES: extra-files/externmangle.cpp\n+// EXTRA_CPP_SOURCES: externmangle.cpp\n \n extern(C++):\n "}, {"sha": "74beb2581f0210bdc306e45be6215d55885aba82", "filename": "gcc/testsuite/gdc.test/runnable/externmangle2.d", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fexternmangle2.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fexternmangle2.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fexternmangle2.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,4 +1,4 @@\n-// EXTRA_CPP_SOURCES: extra-files/externmangle2.cpp\n+// EXTRA_CPP_SOURCES: externmangle2.cpp\n \n version(Windows)\n {"}, {"sha": "31a5b568b502b93452ec5412978b83a1b6863820", "filename": "gcc/testsuite/gdc.test/runnable/ice10086a.d", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fice10086a.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fice10086a.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fice10086a.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,4 +1,5 @@\n-// EXTRA_SOURCES: imports/ice10086x.d imports/ice10086y.d\n+// EXTRA_SOURCES: imports/ice10086x.d\n+// EXTRA_SOURCES: imports/ice10086y.d\n \n import imports.ice10086x;\n import imports.ice10086y;"}, {"sha": "abb6f78a4acf5bbe7cdfa823d6a71442ee30d434", "filename": "gcc/testsuite/gdc.test/runnable/ice10086b.d", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fice10086b.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fice10086b.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fice10086b.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,4 +1,5 @@\n-// EXTRA_SOURCES: imports/ice10086y.d imports/ice10086x.d\n+// EXTRA_SOURCES: imports/ice10086y.d\n+// EXTRA_SOURCES: imports/ice10086x.d\n \n import imports.ice10086y;\n import imports.ice10086x;"}, {"sha": "e1467963ee7d1602eeaf4700636713124502ae07", "filename": "gcc/testsuite/gdc.test/runnable/ice4481.d", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fice4481.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fice4481.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fice4481.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,4 +1,5 @@\n-// EXTRA_SOURCES: imports/ice4481a.d imports/ice4481b.d\n+// EXTRA_SOURCES: imports/ice4481a.d\n+// EXTRA_SOURCES: imports/ice4481b.d\n \n import imports.ice4481a;\n import imports.ice4481b;"}, {"sha": "1fe8aff14a9cce47b8fbf1fe24e26d33622830b8", "filename": "gcc/testsuite/gdc.test/runnable/imports/std12010container.d", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fimports%2Fstd12010container.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fimports%2Fstd12010container.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Fimports%2Fstd12010container.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,4 +1,3 @@\n-module imports.std12010container;\n struct Array(T)\n {\n     private struct Payload"}, {"sha": "658f46eb51b008c1b8c173fb1b122e752cc4f2d5", "filename": "gcc/testsuite/gdc.test/runnable/link11069b.d", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Flink11069b.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Flink11069b.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Flink11069b.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,5 +1,7 @@\n // COMPILE_SEPARATELY\n-// EXTRA_SOURCES: imports/link11069x.d imports/link11069y.d imports/link11069z.d\n+// EXTRA_SOURCES: imports/link11069x.d\n+// EXTRA_SOURCES: imports/link11069y.d\n+// EXTRA_SOURCES: imports/link11069z.d\n \n import imports.link11069y;\n import imports.link11069z;"}, {"sha": "49c4eb184b1f610f24a2a28b0781cec798ee4d05", "filename": "gcc/testsuite/gdc.test/runnable/link12010.d", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Flink12010.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Flink12010.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Flink12010.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,5 +1,6 @@\n // COMPILE_SEPARATELY\n-// EXTRA_SOURCES: imports/a12010.d imports/std12010container.d\n+// EXTRA_SOURCES: imports/a12010.d\n+// EXTRA_FILES: imports/std12010container.d\n // REQUIRED_ARGS: -release\n // -release is necessary to avoid __assert.\n "}, {"sha": "f38b8cab8c2500796b8f096169e5d078148ac279", "filename": "gcc/testsuite/gdc.test/runnable/link2644.d", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Flink2644.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Flink2644.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Flink2644.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,5 +1,7 @@\n // PERMUTE_ARGS: -version=X -inline -release -g -O\n-// EXTRA_SOURCES: imports/link2644a.d imports/link2644b.d imports/link2644c.d\n+// EXTRA_SOURCES: imports/link2644a.d\n+// EXTRA_SOURCES: imports/link2644b.d\n+// EXTRA_SOURCES: imports/link2644c.d\n // COMPILE_SEPARATELY:\n \n module link2644;"}, {"sha": "f8fa7d5cdda2633d0265dd8fba745d602d4bad98", "filename": "gcc/testsuite/gdc.test/runnable/overload.d", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Foverload.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Foverload.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Foverload.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,4 +1,5 @@\n-// EXTRA_SOURCES: imports/ovs1528a.d imports/ovs1528b.d imports/template_ovs1.d imports/template_ovs2.d imports/template_ovs3.d\n+// EXTRA_SOURCES: imports/ovs1528a.d imports/ovs1528b.d\n+// EXTRA_SOURCES: imports/template_ovs1.d imports/template_ovs2.d imports/template_ovs3.d\n \n import imports.template_ovs1;\n import imports.template_ovs2;"}, {"sha": "55b6f539887f55b73fb828705efdcb334fd2f38d", "filename": "gcc/testsuite/gdc.test/runnable/test10736.d", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Ftest10736.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Ftest10736.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Ftest10736.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,4 +1,5 @@\n-// EXTRA_SOURCES: imports/test10736a.d imports/test10736b.d\n+// EXTRA_SOURCES: imports/test10736a.d\n+// EXTRA_SOURCES: imports/test10736b.d\n \n import imports.test10736a;\n import imports.test10736b;"}, {"sha": "c1285b3bef7e15199da4393d0903b1da33c167ba", "filename": "gcc/testsuite/gdc.test/runnable/test11863.d", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Ftest11863.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Ftest11863.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Ftest11863.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -1,5 +1,6 @@\n // COMPILE_SEPARATELY\n-// EXTRA_SOURCES: imports/std11863conv.d imports/std11863format.d\n+// EXTRA_SOURCES: imports/std11863conv.d\n+// EXTRA_FILES: imports/std11863format.d\n \n import imports.std11863conv;\n "}, {"sha": "87ee7a8e73a20a692273e1a804473f5ed67fbf94", "filename": "gcc/testsuite/gdc.test/runnable/test42.d", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Ftest42.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1821f97bb447dcfcb1fbdb780affbadc9ff03907/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Ftest42.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Frunnable%2Ftest42.d?ref=1821f97bb447dcfcb1fbdb780affbadc9ff03907", "patch": "@@ -5676,7 +5676,11 @@ void testreal_to_ulong()\n     real adjust = 1.0L/real.epsilon;\n     u = r2ulong(adjust);\n     //writefln(\"%s %s\", adjust, u);\n-    static if(real.mant_dig == 64)\n+    static if(real.mant_dig == 113)\n+        assert(u == 18446744073709551615UL);\n+    else static if(real.mant_dig == 106)\n+        assert(u == 18446744073709551615UL);\n+    else static if(real.mant_dig == 64)\n         assert(u == 9223372036854775808UL);\n     else static if(real.mant_dig == 53)\n         assert(u == 4503599627370496UL);"}]}