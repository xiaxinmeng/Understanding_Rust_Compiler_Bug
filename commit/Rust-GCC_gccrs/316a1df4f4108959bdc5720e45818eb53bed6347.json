{"sha": "316a1df4f4108959bdc5720e45818eb53bed6347", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzE2YTFkZjRmNDEwODk1OWJkYzU3MjBlNDU4MThlYjUzYmVkNjM0Nw==", "commit": {"author": {"name": "Michael Koch", "email": "konqueror@gmx.de", "date": "2004-07-17T08:37:22Z"}, "committer": {"name": "Michael Koch", "email": "mkoch@gcc.gnu.org", "date": "2004-07-17T08:37:22Z"}, "message": "2004-07-17  Michael Koch  <konqueror@gmx.de>\n\n\t* gnu/java/awt/EmbeddedWindow.java\n\t(static): Removed.\n\t(addNotify): Set peer via reflection.\n\t(setWindowPeer): Removed.\n\t* gnu/java/awt/natEmbeddedWindow.cc: Removed.\n\t* Makefile.am (nat_source_files):\n\tRemoved gnu/java/awt/natEmbeddedWindow.cc.\n\t* Makefile.in: Regenerated.\n\nFrom-SVN: r84854", "tree": {"sha": "3574e5e329368fbc3591baf62c3a75ce8a0e6cc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3574e5e329368fbc3591baf62c3a75ce8a0e6cc0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/316a1df4f4108959bdc5720e45818eb53bed6347", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/316a1df4f4108959bdc5720e45818eb53bed6347", "html_url": "https://github.com/Rust-GCC/gccrs/commit/316a1df4f4108959bdc5720e45818eb53bed6347", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/316a1df4f4108959bdc5720e45818eb53bed6347/comments", "author": null, "committer": null, "parents": [{"sha": "508a1c9c6d5d84df1207ff6d1e849e104b41694b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/508a1c9c6d5d84df1207ff6d1e849e104b41694b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/508a1c9c6d5d84df1207ff6d1e849e104b41694b"}], "stats": {"total": 67, "additions": 32, "deletions": 35}, "files": [{"sha": "c634be84d3e23388beca08c020f8244bc227de98", "filename": "libjava/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316a1df4f4108959bdc5720e45818eb53bed6347/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316a1df4f4108959bdc5720e45818eb53bed6347/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=316a1df4f4108959bdc5720e45818eb53bed6347", "patch": "@@ -1,3 +1,14 @@\n+2004-07-17  Michael Koch  <konqueror@gmx.de>\n+\n+\t* gnu/java/awt/EmbeddedWindow.java\n+\t(static): Removed.\n+\t(addNotify): Set peer via reflection.\n+\t(setWindowPeer): Removed.\n+\t* gnu/java/awt/natEmbeddedWindow.cc: Removed.\n+\t* Makefile.am (nat_source_files):\n+\tRemoved gnu/java/awt/natEmbeddedWindow.cc.\n+\t* Makefile.in: Regenerated.\n+\n 2004-07-17  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* configure.in(ZIP, GCJH): Remove white space around '=' in variable"}, {"sha": "5b1d3a635d7f11fafade1f27f8cf14017ccbee40", "filename": "libjava/Makefile.am", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316a1df4f4108959bdc5720e45818eb53bed6347/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316a1df4f4108959bdc5720e45818eb53bed6347/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=316a1df4f4108959bdc5720e45818eb53bed6347", "patch": "@@ -2943,7 +2943,6 @@ gnu/gcj/runtime/natSharedLibLoader.cc \\\n gnu/gcj/runtime/natStackTrace.cc \\\n gnu/gcj/runtime/natStringBuffer.cc \\\n gnu/gcj/runtime/natVMClassLoader.cc \\\n-gnu/java/awt/natEmbeddedWindow.cc \\\n gnu/java/lang/natMainThread.cc \\\n gnu/java/net/natPlainDatagramSocketImpl.cc \\\n gnu/java/net/natPlainSocketImpl.cc \\"}, {"sha": "b66742359a017f018b4e13846e0e6d0be50cd45a", "filename": "libjava/Makefile.in", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316a1df4f4108959bdc5720e45818eb53bed6347/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316a1df4f4108959bdc5720e45818eb53bed6347/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=316a1df4f4108959bdc5720e45818eb53bed6347", "patch": "@@ -2625,7 +2625,6 @@ gnu/gcj/runtime/natSharedLibLoader.cc \\\n gnu/gcj/runtime/natStackTrace.cc \\\n gnu/gcj/runtime/natStringBuffer.cc \\\n gnu/gcj/runtime/natVMClassLoader.cc \\\n-gnu/java/awt/natEmbeddedWindow.cc \\\n gnu/java/lang/natMainThread.cc \\\n gnu/java/net/natPlainDatagramSocketImpl.cc \\\n gnu/java/net/natPlainSocketImpl.cc \\\n@@ -2806,8 +2805,7 @@ gnu/gcj/convert/natOutput_SJIS.lo gnu/gcj/io/natSimpleSHSStream.lo \\\n gnu/gcj/io/shs.lo gnu/gcj/runtime/natFinalizerThread.lo \\\n gnu/gcj/runtime/natNameFinder.lo gnu/gcj/runtime/natSharedLibLoader.lo \\\n gnu/gcj/runtime/natStackTrace.lo gnu/gcj/runtime/natStringBuffer.lo \\\n-gnu/gcj/runtime/natVMClassLoader.lo gnu/java/awt/natEmbeddedWindow.lo \\\n-gnu/java/lang/natMainThread.lo \\\n+gnu/gcj/runtime/natVMClassLoader.lo gnu/java/lang/natMainThread.lo \\\n gnu/java/net/natPlainDatagramSocketImpl.lo \\\n gnu/java/net/natPlainSocketImpl.lo \\\n gnu/java/net/protocol/core/natCoreInputStream.lo \\\n@@ -3171,7 +3169,6 @@ DEP_FILES =  .deps/$(srcdir)/$(CONVERT_DIR)/gen-from-JIS.P \\\n .deps/gnu/java/awt/EventModifier.P \\\n .deps/gnu/java/awt/image/ImageDecoder.P \\\n .deps/gnu/java/awt/image/XBMDecoder.P \\\n-.deps/gnu/java/awt/natEmbeddedWindow.P \\\n .deps/gnu/java/awt/peer/ClasspathFontPeer.P \\\n .deps/gnu/java/awt/peer/EmbeddedWindowPeer.P \\\n .deps/gnu/java/awt/peer/GLightweightPeer.P \\"}, {"sha": "5f1d71a80683a69b38c021d6aee3273bce12a863", "filename": "libjava/gnu/java/awt/EmbeddedWindow.java", "status": "modified", "additions": 20, "deletions": 12, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316a1df4f4108959bdc5720e45818eb53bed6347/libjava%2Fgnu%2Fjava%2Fawt%2FEmbeddedWindow.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316a1df4f4108959bdc5720e45818eb53bed6347/libjava%2Fgnu%2Fjava%2Fawt%2FEmbeddedWindow.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fawt%2FEmbeddedWindow.java?ref=316a1df4f4108959bdc5720e45818eb53bed6347", "patch": "@@ -40,23 +40,20 @@\n \n import gnu.classpath.Configuration;\n import gnu.java.awt.peer.EmbeddedWindowPeer;\n+\n+import java.awt.Component;\n import java.awt.Frame;\n import java.awt.Toolkit;\n+import java.lang.reflect.Field;\n \n /**\n  * Represents an AWT window that can be embedded into another\n  * application.\n  * \n- * @author Michael Koch <konqueror@gmx.de>\n+ * @author Michael Koch (konqueror@gmx.de)\n  */\n public class EmbeddedWindow extends Frame\n {\n-  static\n-  {\n-    if (Configuration.INIT_LOAD_LIBRARY)\n-      System.loadLibrary(\"javaawt\");\n-  }\n-  \n   private long handle;\n   \n   /**\n@@ -93,14 +90,25 @@ public void addNotify()\n       throw new UnsupportedOperationException\n         (\"Embedded windows are not supported by the current peers: \" + tk.getClass());\n \n-    setWindowPeer (((EmbeddedWindowSupport) tk).createEmbeddedWindow (this));\n+    // Circumvent the package-privateness of the AWT internal\n+    // java.awt.Component.peer member variable.\n+    try\n+      {\n+\tField peerField = Component.class.getDeclaredField(\"peer\");\n+\tpeerField.set(this, ((EmbeddedWindowSupport) tk).createEmbeddedWindow (this));\n+      }\n+    catch (IllegalAccessException e)\n+      {\n+\t// This should never happen.\n+      }\n+    catch (NoSuchFieldException e)\n+      {\n+\t// This should never happen.\n+      }\n+\n     super.addNotify();\n   }\n \n-  // This method is only made native to circumvent the package-privateness of\n-  // an AWT internal java.awt.Component.peer member variable.\n-  native void setWindowPeer (EmbeddedWindowPeer peer);\n-\n   /**\n    * If the native peer for this embedded window has been created,\n    * then setHandle will embed the window.  If not, setHandle tells"}, {"sha": "79cdd6797e0ab19bb6e086297b9941df8c89da70", "filename": "libjava/gnu/java/awt/natEmbeddedWindow.cc", "status": "removed", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/508a1c9c6d5d84df1207ff6d1e849e104b41694b/libjava%2Fgnu%2Fjava%2Fawt%2FnatEmbeddedWindow.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/508a1c9c6d5d84df1207ff6d1e849e104b41694b/libjava%2Fgnu%2Fjava%2Fawt%2FnatEmbeddedWindow.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fawt%2FnatEmbeddedWindow.cc?ref=508a1c9c6d5d84df1207ff6d1e849e104b41694b", "patch": "@@ -1,18 +0,0 @@\n-/* Copyright (C) 2003  Free Software Foundation\n-\n-   This file is part of libgcj.\n-\n-This software is copyrighted work licensed under the terms of the\n-Libgcj License.  Please consult the file \"LIBGCJ_LICENSE\" for\n-details.  */\n-\n-#include <gnu/java/awt/EmbeddedWindow.h>\n-#include <gnu/java/awt/peer/EmbeddedWindowPeer.h>\n-#include <java/awt/peer/ComponentPeer.h>\n-\n-void\n-gnu::java::awt::EmbeddedWindow::setWindowPeer (gnu::java::awt::peer::EmbeddedWindowPeer* w)\n-{\n-  if (!peer)\n-    peer = reinterpret_cast< ::java::awt::peer::ComponentPeer *> (w);\n-}"}]}