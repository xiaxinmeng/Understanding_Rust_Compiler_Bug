{"sha": "d289e37a267820946191990603ad70cb29a7ffc9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDI4OWUzN2EyNjc4MjA5NDYxOTE5OTA2MDNhZDcwY2IyOWE3ZmZjOQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2005-09-19T17:01:40Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2005-09-19T17:01:40Z"}, "message": "re PR rtl-optimization/23941 (compress_float_constant creates denormals)\n\n        PR 23941\n        * real.c (exact_real_truncate): Return false if the format cannot\n        represent the number as a normal.\n\nFrom-SVN: r104424", "tree": {"sha": "939f5124bb5cc88af26701e1be41242556942d1d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/939f5124bb5cc88af26701e1be41242556942d1d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d289e37a267820946191990603ad70cb29a7ffc9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d289e37a267820946191990603ad70cb29a7ffc9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d289e37a267820946191990603ad70cb29a7ffc9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d289e37a267820946191990603ad70cb29a7ffc9/comments", "author": null, "committer": null, "parents": [{"sha": "3c7d0735f564a48ea13b5246c5675cabaf53d0c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c7d0735f564a48ea13b5246c5675cabaf53d0c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c7d0735f564a48ea13b5246c5675cabaf53d0c6"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "2a56dedfad28fc7a0e8745247a4cfc0428435aee", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d289e37a267820946191990603ad70cb29a7ffc9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d289e37a267820946191990603ad70cb29a7ffc9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d289e37a267820946191990603ad70cb29a7ffc9", "patch": "@@ -1,3 +1,9 @@\n+2005-09-19  Richard Henderson  <rth@redhat.com>\n+\n+\tPR 23941\n+\t* real.c (exact_real_truncate): Return false if the format cannot\n+\trepresent the number as a normal.\n+\n 2005-09-19  Dorit Nuzman  <dorit@il.ibm.com>\n \n \t* tree-ssa-operands.c (swap_tree_operands): Export."}, {"sha": "9b165ec0c97bc84be88c2b777db7b0d866c95db1", "filename": "gcc/real.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d289e37a267820946191990603ad70cb29a7ffc9/gcc%2Freal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d289e37a267820946191990603ad70cb29a7ffc9/gcc%2Freal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freal.c?ref=d289e37a267820946191990603ad70cb29a7ffc9", "patch": "@@ -2399,7 +2399,19 @@ real_value_truncate (enum machine_mode mode, REAL_VALUE_TYPE a)\n bool\n exact_real_truncate (enum machine_mode mode, const REAL_VALUE_TYPE *a)\n {\n+  const struct real_format *fmt;\n   REAL_VALUE_TYPE t;\n+  int emin2m1;\n+\n+  fmt = REAL_MODE_FORMAT (mode);\n+  gcc_assert (fmt);\n+\n+  /* Don't allow conversion to denormals.  */\n+  emin2m1 = (fmt->emin - 1) * fmt->log2_b;\n+  if (REAL_EXP (a) <= emin2m1)\n+    return false;\n+\n+  /* After conversion to the new mode, the value must be identical.  */\n   real_convert (&t, mode, a);\n   return real_identical (&t, a);\n }"}, {"sha": "4dfd6451c383593c7aab89b6588a926c0fac934d", "filename": "gcc/testsuite/gcc.c-torture/execute/pr23941.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d289e37a267820946191990603ad70cb29a7ffc9/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr23941.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d289e37a267820946191990603ad70cb29a7ffc9/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr23941.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr23941.c?ref=d289e37a267820946191990603ad70cb29a7ffc9", "patch": "@@ -0,0 +1,9 @@\n+extern void abort (void);\n+double d = __FLT_MIN__ / 2.0;\n+int main()\n+{\n+  double x = __FLT_MIN__ / 2.0;\n+  if (x != d)\n+    abort ();\n+  return 0;\n+}"}]}