{"sha": "2d34c587907abe84bc4af668e18b5293e531e66e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQzNGM1ODc5MDdhYmU4NGJjNGFmNjY4ZTE4YjUyOTNlNTMxZTY2ZQ==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2002-10-15T14:38:10Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2002-10-15T14:38:10Z"}, "message": "re PR rtl-optimization/7409 (loop optimization)\n\nPR opt/7409\n\t* loop.c (loop_regs_scan): Mark registers used for function\n\targument passing as MAY_NOT_OPTIMIZE.\n\nFrom-SVN: r58158", "tree": {"sha": "a5f854079aaa6b4a3eba047321597644ab46094b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5f854079aaa6b4a3eba047321597644ab46094b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d34c587907abe84bc4af668e18b5293e531e66e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d34c587907abe84bc4af668e18b5293e531e66e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d34c587907abe84bc4af668e18b5293e531e66e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d34c587907abe84bc4af668e18b5293e531e66e/comments", "author": null, "committer": null, "parents": [{"sha": "38364bd2f572728a98625b490bf3bc427f367a91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38364bd2f572728a98625b490bf3bc427f367a91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38364bd2f572728a98625b490bf3bc427f367a91"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "85c94510d40d324ef7291b47e791b91346498752", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d34c587907abe84bc4af668e18b5293e531e66e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d34c587907abe84bc4af668e18b5293e531e66e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2d34c587907abe84bc4af668e18b5293e531e66e", "patch": "@@ -1,3 +1,9 @@\n+2002-10-15  Ulrich Weigand  <uweigand@de.ibm.com>\n+\n+\tPR opt/7409\n+\t* loop.c (loop_regs_scan): Mark registers used for function\n+\targument passing as MAY_NOT_OPTIMIZE.\n+\n Mon Oct 14 20:33:12 CEST 2002  Jan Hubicka  <jh@suse.cz>\n \n \t* i386.md (movv2di_internal): New pattern."}, {"sha": "be4b12d0d74cdddb28f1de22a28ee775194c4a56", "filename": "gcc/loop.c", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d34c587907abe84bc4af668e18b5293e531e66e/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d34c587907abe84bc4af668e18b5293e531e66e/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=2d34c587907abe84bc4af668e18b5293e531e66e", "patch": "@@ -9676,6 +9676,25 @@ loop_regs_scan (loop, extra_size)\n \n       if (GET_CODE (insn) == CODE_LABEL || GET_CODE (insn) == JUMP_INSN)\n \tmemset (last_set, 0, regs->num * sizeof (rtx));\n+\n+      /* Invalidate all registers used for function argument passing.\n+\t We check rtx_varies_p for the same reason as below, to allow\n+\t optimizing PIC calculations.  */\n+      if (GET_CODE (insn) == CALL_INSN)\n+\t{\n+\t  rtx link;\n+\t  for (link = CALL_INSN_FUNCTION_USAGE (insn); \n+\t       link; \n+\t       link = XEXP (link, 1))\n+\t    {\n+\t      rtx op, reg;\n+\n+\t      if (GET_CODE (op = XEXP (link, 0)) == USE\n+\t\t  && GET_CODE (reg = XEXP (op, 0)) == REG\n+\t\t  && rtx_varies_p (reg, 1))\n+\t\tregs->array[REGNO (reg)].may_not_optimize = 1;\n+\t    }\n+\t}\n     }\n \n   /* Invalidate all hard registers clobbered by calls.  With one exception:"}]}