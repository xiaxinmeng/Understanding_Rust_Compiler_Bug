{"sha": "ae1b50e2e03aad06408b64c876f5d0511121de0d", "node_id": "C_kwDOANBUbNoAKGFlMWI1MGUyZTAzYWFkMDY0MDhiNjRjODc2ZjVkMDUxMTEyMWRlMGQ", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2022-01-27T21:14:18Z"}, "committer": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2022-01-27T21:15:02Z"}, "message": "testsuite: Fix gfortran.dg/ieee/signaling_?.f90 tests for x86 targets\n\nAs stated in signaling_?.f90 tests, x86-32 ABI is not suitable to\ncorrectly handle signaling NaNs.  However, XFAIL is not the correct choice\nto disable these tests, since various optimizations can generate code\nthat avoids moves from registers to memory (and back), resulting\nin the code that executes correctly, producing spurious XFAIL.\nThese tests should be disabled on x86-32 using { ! ia32 } dg-directive\nwhich rules out x32 ilp32 ABI, where tests execute without problems.\n\nPlease note that check_effective_target_ia32 test tries to compile code that\nuses __i386__ target-dependent preprocessor definition, so it is guaranteed\nto fail on all non-ia32 targets.\n\n2022-01-27  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n\ngcc/testsuite/ChangeLog:\n\n\t* gfortran.dg/ieee/signaling_1.f90 (dg-do):\n\tRun only on non-ia32 targets.\n\t* gfortran.dg/ieee/signaling_2.f90 (dg-do): Ditto.\n\t* gfortran.dg/ieee/signaling_3.f90 (dg-do): Ditto.", "tree": {"sha": "1b7c499f2e3e453716a9fd93794f3761b41a39dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b7c499f2e3e453716a9fd93794f3761b41a39dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ae1b50e2e03aad06408b64c876f5d0511121de0d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae1b50e2e03aad06408b64c876f5d0511121de0d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae1b50e2e03aad06408b64c876f5d0511121de0d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae1b50e2e03aad06408b64c876f5d0511121de0d/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b51fb28ed294cdf19087ca9d9ad107c9c52bec42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b51fb28ed294cdf19087ca9d9ad107c9c52bec42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b51fb28ed294cdf19087ca9d9ad107c9c52bec42"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "19fee283f54328d597fd1911e0f760f65e5d03d9", "filename": "gcc/testsuite/gfortran.dg/ieee/signaling_1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae1b50e2e03aad06408b64c876f5d0511121de0d/gcc%2Ftestsuite%2Fgfortran.dg%2Fieee%2Fsignaling_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae1b50e2e03aad06408b64c876f5d0511121de0d/gcc%2Ftestsuite%2Fgfortran.dg%2Fieee%2Fsignaling_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fieee%2Fsignaling_1.f90?ref=ae1b50e2e03aad06408b64c876f5d0511121de0d", "patch": "@@ -1,4 +1,4 @@\n-! { dg-do run { xfail { { i?86-*-* x86_64-*-* } && ilp32 } } }\n+! { dg-do run { target { ! ia32 } } }\n ! x87 / x86-32 ABI is unsuitable for signaling NaNs\n !\n ! { dg-additional-sources signaling_1_c.c }"}, {"sha": "03b04c783ebf157e24ca2c5d952054482ca21601", "filename": "gcc/testsuite/gfortran.dg/ieee/signaling_2.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae1b50e2e03aad06408b64c876f5d0511121de0d/gcc%2Ftestsuite%2Fgfortran.dg%2Fieee%2Fsignaling_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae1b50e2e03aad06408b64c876f5d0511121de0d/gcc%2Ftestsuite%2Fgfortran.dg%2Fieee%2Fsignaling_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fieee%2Fsignaling_2.f90?ref=ae1b50e2e03aad06408b64c876f5d0511121de0d", "patch": "@@ -1,4 +1,4 @@\n-! { dg-do run { xfail { { i?86-*-* x86_64-*-* } && ilp32 } } }\n+! { dg-do run { target { ! ia32 } } }\n ! x87 / x86-32 ABI is unsuitable for signaling NaNs\n !\n ! { dg-require-effective-target issignaling } */"}, {"sha": "ff2585d25897cd651b0d39742fd4c5acc2517c93", "filename": "gcc/testsuite/gfortran.dg/ieee/signaling_3.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae1b50e2e03aad06408b64c876f5d0511121de0d/gcc%2Ftestsuite%2Fgfortran.dg%2Fieee%2Fsignaling_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae1b50e2e03aad06408b64c876f5d0511121de0d/gcc%2Ftestsuite%2Fgfortran.dg%2Fieee%2Fsignaling_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fieee%2Fsignaling_3.f90?ref=ae1b50e2e03aad06408b64c876f5d0511121de0d", "patch": "@@ -1,4 +1,4 @@\n-! { dg-do run { xfail { { i?86-*-* x86_64-*-* } && ilp32 } } }\n+! { dg-do run { target { ! ia32 } } }\n ! x87 / x86-32 ABI is unsuitable for signaling NaNs\n !\n program test"}]}