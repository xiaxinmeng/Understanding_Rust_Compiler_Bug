{"sha": "17cf3985108a463cd143c310b566371f54008193", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTdjZjM5ODUxMDhhNDYzY2QxNDNjMzEwYjU2NjM3MWY1NDAwODE5Mw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-12-13T17:59:09Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-12-13T17:59:09Z"}, "message": "Restore part of patch lost for PR ada/15805:\n\n\t* sem_ch3.adb (Analyze_Object_Declaration): Signal an error\n\twhen an access to constant is used to initialize an access\n\tvalue.\n\nFrom-SVN: r130903", "tree": {"sha": "aa4f1056d50f24eeee9c880268699edd5e24cdf3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa4f1056d50f24eeee9c880268699edd5e24cdf3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/17cf3985108a463cd143c310b566371f54008193", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17cf3985108a463cd143c310b566371f54008193", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17cf3985108a463cd143c310b566371f54008193", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17cf3985108a463cd143c310b566371f54008193/comments", "author": null, "committer": null, "parents": [{"sha": "3958c9c88249a51d81d0070a5cddb4936764e452", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3958c9c88249a51d81d0070a5cddb4936764e452", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3958c9c88249a51d81d0070a5cddb4936764e452"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "b34132a22a1701d3adeae161be3c2666cefc08e3", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17cf3985108a463cd143c310b566371f54008193/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17cf3985108a463cd143c310b566371f54008193/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=17cf3985108a463cd143c310b566371f54008193", "patch": "@@ -2367,6 +2367,20 @@ package body Sem_Ch3 is\n \n          Set_Is_True_Constant (Id, True);\n \n+         --  If the initialization expression is an access to constant,\n+         --  it cannot be used with an access type.\n+\n+         if Is_Access_Type (Etype (E))\n+           and then Is_Access_Constant (Etype (E))\n+           and then Is_Access_Type (T)\n+           and then not Is_Access_Constant (T)\n+         then\n+            Error_Msg_NE (\"object of type& cannot be initialized with \" &\n+                          \"an access-to-constant expression\",\n+                          E,\n+                          T);\n+         end if;\n+\n          --  If we are analyzing a constant declaration, set its completion\n          --  flag after analyzing the expression.\n "}]}