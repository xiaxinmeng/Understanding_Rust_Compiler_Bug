{"sha": "cfa0bd19c5187edf728c1ca985b1c8ee7a477c73", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2ZhMGJkMTljNTE4N2VkZjcyOGMxY2E5ODViMWM4ZWU3YTQ3N2M3Mw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-07-22T19:12:46Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-07-22T19:12:46Z"}, "message": "utils.c (gnat_types_compatible_p): Don't require strict equality for the component type of array types.\n\n\t* gcc-interface/utils.c (gnat_types_compatible_p): Don't require strict\n\tequality for the component type of array types.\n\nFrom-SVN: r162424", "tree": {"sha": "7f1fd3b2d30f16cac3db37da0ccba262810b28f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f1fd3b2d30f16cac3db37da0ccba262810b28f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73/comments", "author": null, "committer": null, "parents": [{"sha": "426d63337543926a4b9343919c2ceb191d018433", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/426d63337543926a4b9343919c2ceb191d018433", "html_url": "https://github.com/Rust-GCC/gccrs/commit/426d63337543926a4b9343919c2ceb191d018433"}], "stats": {"total": 58, "additions": 50, "deletions": 8}, "files": [{"sha": "c80be7241a34e580f53cdeeee0db60412e6b8f38", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=cfa0bd19c5187edf728c1ca985b1c8ee7a477c73", "patch": "@@ -1,3 +1,8 @@\n+2010-07-22  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/utils.c (gnat_types_compatible_p): Don't require strict\n+\tequality for the component type of array types.\n+\n 2010-07-15  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* gcc-interface/decl.c: Carefully replace TREE_CHAIN with DECL_CHAIN.\n@@ -7,10 +12,10 @@\n \n 2010-07-13  Laurent GUERBY  <laurent@guerby.net>\n \n-        PR bootstrap/44458\n-        * gcc-interface/targtyps.c: Include tm_p.h.\n-        * gcc-interface/Make-lang.in: Update dependencies.\n-\t\n+\tPR bootstrap/44458\n+\t* gcc-interface/targtyps.c: Include tm_p.h.\n+\t* gcc-interface/Make-lang.in: Update dependencies.\n+\n 2010-07-09  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/trans.c (gnat_gimplify_expr) <ADDR_EXPR>: Deal with"}, {"sha": "eb65b7d2d4ddb989cd26734d38d2ccc463bc6f2d", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=cfa0bd19c5187edf728c1ca985b1c8ee7a477c73", "patch": "@@ -2080,17 +2080,17 @@ gnat_types_compatible_p (tree t1, tree t2)\n       && TYPE_PRECISION (TREE_TYPE (t1)) == TYPE_PRECISION (TREE_TYPE (t2)))\n     return 1;\n \n-  /* Array types are also compatible if they are constrained and have\n-     the same component type and the same domain.  */\n+  /* Array types are also compatible if they are constrained and have the same\n+     domain and compatible component types.  */\n   if (code == ARRAY_TYPE\n-      && TREE_TYPE (t1) == TREE_TYPE (t2)\n       && (TYPE_DOMAIN (t1) == TYPE_DOMAIN (t2)\n \t  || (TYPE_DOMAIN (t1)\n \t      && TYPE_DOMAIN (t2)\n \t      && tree_int_cst_equal (TYPE_MIN_VALUE (TYPE_DOMAIN (t1)),\n \t\t\t\t     TYPE_MIN_VALUE (TYPE_DOMAIN (t2)))\n \t      && tree_int_cst_equal (TYPE_MAX_VALUE (TYPE_DOMAIN (t1)),\n-\t\t\t\t     TYPE_MAX_VALUE (TYPE_DOMAIN (t2))))))\n+\t\t\t\t     TYPE_MAX_VALUE (TYPE_DOMAIN (t2)))))\n+      && gnat_types_compatible_p (TREE_TYPE (t1), TREE_TYPE (t2)))\n     return 1;\n \n   /* Padding record types are also compatible if they pad the same"}, {"sha": "40ef493c162de5437e4d3273ad2d81560df04f50", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cfa0bd19c5187edf728c1ca985b1c8ee7a477c73", "patch": "@@ -1,3 +1,7 @@\n+2010-07-22  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/aggr15.ad[sb]: New test.\n+\n 2010-07-22  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR debug/45024"}, {"sha": "e69e9d346e10ad21ba817e53cd338370f1d0c75e", "filename": "gcc/testsuite/gnat.dg/aggr15.adb", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73/gcc%2Ftestsuite%2Fgnat.dg%2Faggr15.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73/gcc%2Ftestsuite%2Fgnat.dg%2Faggr15.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Faggr15.adb?ref=cfa0bd19c5187edf728c1ca985b1c8ee7a477c73", "patch": "@@ -0,0 +1,18 @@\n+-- { dg-do compile }\r\n+-- { dg-options \"-gnatws\" }\r\n+\r\n+package body Aggr15 is\r\n+\r\n+  function CREATE return DATA_T is\r\n+    D : DATA_T;\r\n+  begin\r\n+    return D;\r\n+  end;\r\n+\r\n+  function ALL_CREATE return ALL_DATA_T is\r\n+    C : constant ALL_DATA_T := (others => (others => Create));\r\n+  begin\r\n+    return C;\r\n+  end;\r\n+\r\n+end Aggr15;\r"}, {"sha": "23f26a8df7dd1300cffbd00110c75b84d2e05f5b", "filename": "gcc/testsuite/gnat.dg/aggr15.ads", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73/gcc%2Ftestsuite%2Fgnat.dg%2Faggr15.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cfa0bd19c5187edf728c1ca985b1c8ee7a477c73/gcc%2Ftestsuite%2Fgnat.dg%2Faggr15.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Faggr15.ads?ref=cfa0bd19c5187edf728c1ca985b1c8ee7a477c73", "patch": "@@ -0,0 +1,15 @@\n+package Aggr15 is\r\n+\r\n+  type T is tagged record\r\n+    I : Integer;\r\n+  end record;\r\n+\r\n+  type DATA_T is record\r\n+    D : T;\r\n+  end record;\r\n+\r\n+  type ALL_DATA_T is array (1..2, 1..2) of DATA_T;\r\n+\r\n+  function ALL_CREATE return ALL_DATA_T;\r\n+\r\n+end Aggr15;\r"}]}