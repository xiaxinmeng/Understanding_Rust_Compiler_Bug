{"sha": "b30e83f809b2aa65222eb969f8b4523e5e1961f2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjMwZTgzZjgwOWIyYWE2NTIyMmViOTY5ZjhiNDUyM2U1ZTE5NjFmMg==", "commit": {"author": {"name": "Prathamesh Kulkarni", "email": "prathamesh.kulkarni@linaro.org", "date": "2019-11-21T20:20:36Z"}, "committer": {"name": "Prathamesh Kulkarni", "email": "prathamesh3492@gcc.gnu.org", "date": "2019-11-21T20:20:36Z"}, "message": "Use safe_dyn_cast instead of dyn_cast in find_loop_guard to fix PR92608.\n\n2019-11-22  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n\n\tPR tree-optimization/92608\n\t* tree-ssa-loop-unswitch.c (find_loop_guard): Use safe_dyn_cast instead\n\tof dyn_cast.\n\ntestsuite/\n\t* gcc.dg/torture/pr92608.c: New test.\n\nFrom-SVN: r278598", "tree": {"sha": "284504136e1dab0723aefe77d17043a04ea05754", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/284504136e1dab0723aefe77d17043a04ea05754"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b30e83f809b2aa65222eb969f8b4523e5e1961f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b30e83f809b2aa65222eb969f8b4523e5e1961f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b30e83f809b2aa65222eb969f8b4523e5e1961f2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b30e83f809b2aa65222eb969f8b4523e5e1961f2/comments", "author": null, "committer": null, "parents": [{"sha": "d2993abd39aafb807d5d726f253c7ffe8af6fa41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2993abd39aafb807d5d726f253c7ffe8af6fa41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2993abd39aafb807d5d726f253c7ffe8af6fa41"}], "stats": {"total": 38, "additions": 37, "deletions": 1}, "files": [{"sha": "ab7779297995c5dfb22488d303365b5b16c9192a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30e83f809b2aa65222eb969f8b4523e5e1961f2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30e83f809b2aa65222eb969f8b4523e5e1961f2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b30e83f809b2aa65222eb969f8b4523e5e1961f2", "patch": "@@ -1,3 +1,9 @@\n+2019-11-22  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\tPR tree-optimization/92608\n+\t* tree-ssa-loop-unswitch.c (find_loop_guard): Use safe_dyn_cast instead\n+\tof dyn_cast.\n+\n 2019-11-21  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* config/rs6000/predicates.md (extra_insn_branch_comparison_operator):"}, {"sha": "48bf697be0e9c044371ae8ad0e989e3568b3cf57", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30e83f809b2aa65222eb969f8b4523e5e1961f2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30e83f809b2aa65222eb969f8b4523e5e1961f2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b30e83f809b2aa65222eb969f8b4523e5e1961f2", "patch": "@@ -1,3 +1,8 @@\n+2019-11-22  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\tPR tree-optimization/92608\n+\t* gcc.dg/torture/pr92608.c: New test.\n+\n 2019-11-21  Iain Sandoe  <iain@sandoe.co.uk>\n \n \tPR testsuite/92619"}, {"sha": "3a6beaba44135c56aedb0c1c0fdeef7f1a62f854", "filename": "gcc/testsuite/gcc.dg/torture/pr92608.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30e83f809b2aa65222eb969f8b4523e5e1961f2/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr92608.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30e83f809b2aa65222eb969f8b4523e5e1961f2/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr92608.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr92608.c?ref=b30e83f809b2aa65222eb969f8b4523e5e1961f2", "patch": "@@ -0,0 +1,25 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-funswitch-loops\" } */\n+\n+int op, bs;\n+\n+void\n+q0 (void)\n+{\n+  op += 1 % (op == bs);\n+}\n+\n+void __attribute__ ((returns_twice))\n+co (void)\n+{\n+}\n+\n+void __attribute__ ((simd))\n+uq (void)\n+{\n+  q0 ();\n+  co ();\n+\n+  while (bs < 1)\n+    ++bs;\n+}"}, {"sha": "dbca6429abbf8efe76421ee1c69cc20e7a632f39", "filename": "gcc/tree-ssa-loop-unswitch.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30e83f809b2aa65222eb969f8b4523e5e1961f2/gcc%2Ftree-ssa-loop-unswitch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30e83f809b2aa65222eb969f8b4523e5e1961f2/gcc%2Ftree-ssa-loop-unswitch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-unswitch.c?ref=b30e83f809b2aa65222eb969f8b4523e5e1961f2", "patch": "@@ -586,7 +586,7 @@ find_loop_guard (class loop *loop)\n \tnext = single_succ (header);\n       else\n \t{\n-\t  cond = dyn_cast <gcond *> (last_stmt (header));\n+\t  cond = safe_dyn_cast <gcond *> (last_stmt (header));\n \t  if (! cond)\n \t    return NULL;\n \t  extract_true_false_edges_from_block (header, &te, &fe);"}]}