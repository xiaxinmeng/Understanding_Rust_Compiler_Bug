{"sha": "4e0684beff1fcd8398425b1fbe237cdbcb34c359", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGUwNjg0YmVmZjFmY2Q4Mzk4NDI1YjFmYmUyMzdjZGJjYjM0YzM1OQ==", "commit": {"author": {"name": "Steve Ellcey", "email": "sellcey@cavium.com", "date": "2018-05-17T21:05:46Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2018-05-17T21:05:46Z"}, "message": "thunderx2t99.md (thunderx2t99_ls_both): Delete.\n\n2018-05-17  Steve Ellcey  <sellcey@cavium.com>\n\n\t* config/aarch64/thunderx2t99.md (thunderx2t99_ls_both): Delete.\n\t(thunderx2t99_multiple): Delete psuedo-units from used cpus.\n\tAdd untyped.\n\t(thunderx2t99_alu_shift): Remove alu_shift_reg, alus_shift_reg.\n\tChange logics_shift_reg to logics_shift_imm.\n\t(thunderx2t99_fp_loadpair_basic): Delete.\n\t(thunderx2t99_fp_storepair_basic): Delete.\n\t(thunderx2t99_asimd_int): Add neon_sub and neon_sub_q types.\n\t(thunderx2t99_asimd_polynomial): Delete.\n\t(thunderx2t99_asimd_fp_simple): Add neon_fp_mul_s_scalar_q\n\tand neon_fp_mul_d_scalar_q.\n\t(thunderx2t99_asimd_fp_conv): Add *int_to_fp* types.\n\t(thunderx2t99_asimd_misc): Delete neon_dup and neon_dup_q.\n\t(thunderx2t99_asimd_recip_step): Add missing *sqrt* types.\n\t(thunderx2t99_asimd_lut): Add missing tbl types.\n\t(thunderx2t99_asimd_ext): Delete.\n\t(thunderx2t99_asimd_load1_1_mult): Delete.\n\t(thunderx2t99_asimd_load1_2_mult): Delete.\n\t(thunderx2t99_asimd_load1_ldp): New.\n\t(thunderx2t99_asimd_load1): New.\n\t(thunderx2t99_asimd_load2): Add missing *load2* types.\n\t(thunderx2t99_asimd_load3): New.\n\t(thunderx2t99_asimd_load4): New.\n\t(thunderx2t99_asimd_store1_1_mult): Delete.\n\t(thunderx2t99_asimd_store1_2_mult): Delete.\n\t(thunderx2t99_asimd_store2_mult): Delete.\n\t(thunderx2t99_asimd_store2_onelane): Delete.\n\t(thunderx2t99_asimd_store_stp): New.\n\t(thunderx2t99_asimd_store1): New.\n\t(thunderx2t99_asimd_store2): New.\n\t(thunderx2t99_asimd_store3): New.\n\t(thunderx2t99_asimd_store4): New.\n\nFrom-SVN: r260335", "tree": {"sha": "adf585dd4fdf7353347d489480eb3ef8a36e7c10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/adf585dd4fdf7353347d489480eb3ef8a36e7c10"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4e0684beff1fcd8398425b1fbe237cdbcb34c359", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e0684beff1fcd8398425b1fbe237cdbcb34c359", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e0684beff1fcd8398425b1fbe237cdbcb34c359", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e0684beff1fcd8398425b1fbe237cdbcb34c359/comments", "author": {"login": "sellcey", "id": 25938520, "node_id": "MDQ6VXNlcjI1OTM4NTIw", "avatar_url": "https://avatars.githubusercontent.com/u/25938520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sellcey", "html_url": "https://github.com/sellcey", "followers_url": "https://api.github.com/users/sellcey/followers", "following_url": "https://api.github.com/users/sellcey/following{/other_user}", "gists_url": "https://api.github.com/users/sellcey/gists{/gist_id}", "starred_url": "https://api.github.com/users/sellcey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sellcey/subscriptions", "organizations_url": "https://api.github.com/users/sellcey/orgs", "repos_url": "https://api.github.com/users/sellcey/repos", "events_url": "https://api.github.com/users/sellcey/events{/privacy}", "received_events_url": "https://api.github.com/users/sellcey/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fcf4f8311e25eb0fde59e6f6a61b570c4c1068e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcf4f8311e25eb0fde59e6f6a61b570c4c1068e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fcf4f8311e25eb0fde59e6f6a61b570c4c1068e3"}], "stats": {"total": 145, "additions": 95, "deletions": 50}, "files": [{"sha": "e027c17551b0bd6a4044ad7f8cb8471233ac007c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0684beff1fcd8398425b1fbe237cdbcb34c359/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0684beff1fcd8398425b1fbe237cdbcb34c359/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4e0684beff1fcd8398425b1fbe237cdbcb34c359", "patch": "@@ -1,3 +1,38 @@\n+2018-05-17  Steve Ellcey  <sellcey@cavium.com>\n+\n+\t* config/aarch64/thunderx2t99.md (thunderx2t99_ls_both): Delete.\n+\t(thunderx2t99_multiple): Delete psuedo-units from used cpus.\n+\tAdd untyped.\n+\t(thunderx2t99_alu_shift): Remove alu_shift_reg, alus_shift_reg.\n+\tChange logics_shift_reg to logics_shift_imm.\n+\t(thunderx2t99_fp_loadpair_basic): Delete.\n+\t(thunderx2t99_fp_storepair_basic): Delete.\n+\t(thunderx2t99_asimd_int): Add neon_sub and neon_sub_q types.\n+\t(thunderx2t99_asimd_polynomial): Delete.\n+\t(thunderx2t99_asimd_fp_simple): Add neon_fp_mul_s_scalar_q\n+\tand neon_fp_mul_d_scalar_q.\n+\t(thunderx2t99_asimd_fp_conv): Add *int_to_fp* types.\n+\t(thunderx2t99_asimd_misc): Delete neon_dup and neon_dup_q.\n+\t(thunderx2t99_asimd_recip_step): Add missing *sqrt* types.\n+\t(thunderx2t99_asimd_lut): Add missing tbl types.\n+\t(thunderx2t99_asimd_ext): Delete.\n+\t(thunderx2t99_asimd_load1_1_mult): Delete.\n+\t(thunderx2t99_asimd_load1_2_mult): Delete.\n+\t(thunderx2t99_asimd_load1_ldp): New.\n+\t(thunderx2t99_asimd_load1): New.\n+\t(thunderx2t99_asimd_load2): Add missing *load2* types.\n+\t(thunderx2t99_asimd_load3): New.\n+\t(thunderx2t99_asimd_load4): New.\n+\t(thunderx2t99_asimd_store1_1_mult): Delete.\n+\t(thunderx2t99_asimd_store1_2_mult): Delete.\n+\t(thunderx2t99_asimd_store2_mult): Delete.\n+\t(thunderx2t99_asimd_store2_onelane): Delete.\n+\t(thunderx2t99_asimd_store_stp): New.\n+\t(thunderx2t99_asimd_store1): New.\n+\t(thunderx2t99_asimd_store2): New.\n+\t(thunderx2t99_asimd_store3): New.\n+\t(thunderx2t99_asimd_store4): New.\n+\n 2018-05-17  Jerome Lambourg  <lambourg@adacore.com>\n \n \t* config/arm/arm_cmse.h (cmse_nsfptr_create, cmse_is_nsfptr): Remove"}, {"sha": "fb71de55eeca67573323b5f6c9e37af4097913df", "filename": "gcc/config/aarch64/thunderx2t99.md", "status": "modified", "additions": 60, "deletions": 50, "changes": 110, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0684beff1fcd8398425b1fbe237cdbcb34c359/gcc%2Fconfig%2Faarch64%2Fthunderx2t99.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0684beff1fcd8398425b1fbe237cdbcb34c359/gcc%2Fconfig%2Faarch64%2Fthunderx2t99.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Fthunderx2t99.md?ref=4e0684beff1fcd8398425b1fbe237cdbcb34c359", "patch": "@@ -54,8 +54,6 @@\n (define_reservation \"thunderx2t99_ls01\" \"thunderx2t99_ls0|thunderx2t99_ls1\")\n (define_reservation \"thunderx2t99_f01\" \"thunderx2t99_f0|thunderx2t99_f1\")\n \n-(define_reservation \"thunderx2t99_ls_both\" \"thunderx2t99_ls0+thunderx2t99_ls1\")\n-\n ; A load with delay in the ls0/ls1 pipes.\n (define_reservation \"thunderx2t99_l0delay\" \"thunderx2t99_ls0,\\\n \t\t\t\t      thunderx2t99_ls0d1,thunderx2t99_ls0d2,\\\n@@ -86,12 +84,10 @@\n \n (define_insn_reservation \"thunderx2t99_multiple\" 1\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"multiple\"))\n+       (eq_attr \"type\" \"multiple,untyped\"))\n   \"thunderx2t99_i0+thunderx2t99_i1+thunderx2t99_i2+thunderx2t99_ls0+\\\n    thunderx2t99_ls1+thunderx2t99_sd+thunderx2t99_i1m1+thunderx2t99_i1m2+\\\n-   thunderx2t99_i1m3+thunderx2t99_ls0d1+thunderx2t99_ls0d2+thunderx2t99_ls0d3+\\\n-   thunderx2t99_ls1d1+thunderx2t99_ls1d2+thunderx2t99_ls1d3+thunderx2t99_f0+\\\n-   thunderx2t99_f1\")\n+   thunderx2t99_i1m3+thunderx2t99_f0+thunderx2t99_f1\")\n \n ;; Integer arithmetic/logic instructions.\n \n@@ -113,9 +109,9 @@\n \n (define_insn_reservation \"thunderx2t99_alu_shift\" 2\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"alu_shift_imm,alu_ext,alu_shift_reg,\\\n-\t\t\talus_shift_imm,alus_ext,alus_shift_reg,\\\n-\t\t\tlogic_shift_imm,logics_shift_reg\"))\n+       (eq_attr \"type\" \"alu_shift_imm,alu_ext,\\\n+\t\t\talus_shift_imm,alus_ext,\\\n+\t\t\tlogic_shift_imm,logics_shift_imm\"))\n   \"thunderx2t99_i012,thunderx2t99_i012\")\n \n (define_insn_reservation \"thunderx2t99_div\" 13\n@@ -228,21 +224,11 @@\n        (eq_attr \"type\" \"f_loads,f_loadd\"))\n   \"thunderx2t99_ls01\")\n \n-(define_insn_reservation \"thunderx2t99_fp_loadpair_basic\" 4\n-  (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"neon_load1_2reg\"))\n-  \"thunderx2t99_ls01*2\")\n-\n (define_insn_reservation \"thunderx2t99_fp_store_basic\" 1\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n        (eq_attr \"type\" \"f_stores,f_stored\"))\n   \"thunderx2t99_ls01,thunderx2t99_sd\")\n \n-(define_insn_reservation \"thunderx2t99_fp_storepair_basic\" 1\n-  (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"neon_store1_2reg\"))\n-  \"thunderx2t99_ls01,(thunderx2t99_ls01+thunderx2t99_sd),thunderx2t99_sd\")\n-\n ;; ASIMD integer instructions.\n \n (define_insn_reservation \"thunderx2t99_asimd_int\" 7\n@@ -251,6 +237,7 @@\n \t\t\tneon_arith_acc,neon_arith_acc_q,\\\n \t\t\tneon_abs,neon_abs_q,\\\n \t\t\tneon_add,neon_add_q,\\\n+\t\t\tneon_sub,neon_sub_q,\\\n \t\t\tneon_neg,neon_neg_q,\\\n \t\t\tneon_add_long,neon_add_widen,\\\n \t\t\tneon_add_halve,neon_add_halve_q,\\\n@@ -301,11 +288,6 @@\n        (eq_attr \"type\" \"neon_logic,neon_logic_q\"))\n   \"thunderx2t99_f01\")\n \n-(define_insn_reservation \"thunderx2t99_asimd_polynomial\" 5\n-  (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"neon_mul_d_long\"))\n-  \"thunderx2t99_f01\")\n-\n ;; ASIMD floating-point instructions.\n \n (define_insn_reservation \"thunderx2t99_asimd_fp_simple\" 5\n@@ -332,6 +314,7 @@\n \t\t\tneon_fp_reduc_add_s_q,neon_fp_reduc_add_d_q,\\\n \t\t\tneon_fp_mul_s,neon_fp_mul_d,\\\n \t\t\tneon_fp_mul_s_q,neon_fp_mul_d_q,\\\n+\t\t\tneon_fp_mul_s_scalar_q,neon_fp_mul_d_scalar_q,\\\n \t\t\tneon_fp_mla_s,neon_fp_mla_d,\\\n \t\t\tneon_fp_mla_s_q,neon_fp_mla_d_q\"))\n   \"thunderx2t99_f01\")\n@@ -341,6 +324,8 @@\n        (eq_attr \"type\" \"neon_fp_cvt_widen_s,neon_fp_cvt_narrow_d_q,\\\n \t\t\tneon_fp_to_int_s,neon_fp_to_int_d,\\\n \t\t\tneon_fp_to_int_s_q,neon_fp_to_int_d_q,\\\n+\t\t\tneon_int_to_fp_s,neon_int_to_fp_d,\\\n+\t\t\tneon_int_to_fp_s_q,neon_int_to_fp_d_q,\\\n \t\t\tneon_fp_round_s,neon_fp_round_d,\\\n \t\t\tneon_fp_round_s_q,neon_fp_round_d_q\"))\n   \"thunderx2t99_f01\")\n@@ -373,48 +358,50 @@\n \t\t\tneon_fp_recpx_s,neon_fp_recpx_d,\\\n \t\t\tneon_fp_recpx_s_q,neon_fp_recpx_d_q,\\\n \t\t\tneon_rev,neon_rev_q,\\\n-\t\t\tneon_dup,neon_dup_q,\\\n \t\t\tneon_permute,neon_permute_q\"))\n   \"thunderx2t99_f01\")\n \n (define_insn_reservation \"thunderx2t99_asimd_recip_step\" 6\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n        (eq_attr \"type\" \"neon_fp_recps_s,neon_fp_recps_s_q,\\\n \t\t\tneon_fp_recps_d,neon_fp_recps_d_q,\\\n+\t\t\tneon_fp_sqrt_s,neon_fp_sqrt_s_q,\\\n+\t\t\tneon_fp_sqrt_d,neon_fp_sqrt_d_q,\\\n+\t\t\tneon_fp_rsqrte_s, neon_fp_rsqrte_s_q,\\\n+\t\t\tneon_fp_rsqrte_d, neon_fp_rsqrte_d_q,\\\n \t\t\tneon_fp_rsqrts_s, neon_fp_rsqrts_s_q,\\\n \t\t\tneon_fp_rsqrts_d, neon_fp_rsqrts_d_q\"))\n   \"thunderx2t99_f01\")\n \n (define_insn_reservation \"thunderx2t99_asimd_lut\" 8\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"neon_tbl1,neon_tbl1_q,neon_tbl2_q\"))\n+       (eq_attr \"type\" \"neon_tbl1,neon_tbl1_q,neon_tbl2,neon_tbl2_q,\\\n+\t\t\tneon_tbl3,neon_tbl3_q,neon_tbl4,neon_tbl4_q\"))\n   \"thunderx2t99_f01\")\n \n (define_insn_reservation \"thunderx2t99_asimd_elt_to_gr\" 6\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n        (eq_attr \"type\" \"neon_to_gp,neon_to_gp_q\"))\n   \"thunderx2t99_f01\")\n \n-(define_insn_reservation \"thunderx2t99_asimd_ext\" 7\n-  (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"neon_shift_imm_narrow_q,neon_sat_shift_imm_narrow_q\"))\n-  \"thunderx2t99_f01\")\n-\n ;; ASIMD load instructions.\n \n ; NOTE: These reservations attempt to model latency and throughput correctly,\n ; but the cycle timing of unit allocation is not necessarily accurate (because\n ; insns are split into uops, and those may be issued out-of-order).\n \n-(define_insn_reservation \"thunderx2t99_asimd_load1_1_mult\" 4\n+(define_insn_reservation \"thunderx2t99_asimd_load1_ldp\" 5\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"neon_load1_1reg,neon_load1_1reg_q\"))\n-  \"thunderx2t99_ls01\")\n+       (eq_attr \"type\" \"neon_ldp,neon_ldp_q\"))\n+  \"thunderx2t99_i012,thunderx2t99_ls01\")\n \n-(define_insn_reservation \"thunderx2t99_asimd_load1_2_mult\" 4\n+(define_insn_reservation \"thunderx2t99_asimd_load1\" 4\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"neon_load1_2reg,neon_load1_2reg_q\"))\n-  \"thunderx2t99_ls_both\")\n+       (eq_attr \"type\" \"neon_load1_1reg,neon_load1_1reg_q,\\\n+\t\t\tneon_load1_2reg,neon_load1_2reg_q,\\\n+\t\t\tneon_load1_3reg,neon_load1_3reg_q,\\\n+\t\t\tneon_load1_4reg,neon_load1_4reg_q\"))\n+  \"thunderx2t99_ls01\")\n \n (define_insn_reservation \"thunderx2t99_asimd_load1_onelane\" 5\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n@@ -431,36 +418,59 @@\n        (eq_attr \"type\" \"neon_load2_2reg,neon_load2_2reg_q,\\\n \t\t\tneon_load2_one_lane,neon_load2_one_lane_q,\\\n \t\t\tneon_load2_all_lanes,neon_load2_all_lanes_q\"))\n-  \"(thunderx2t99_l0delay,thunderx2t99_f01)|(thunderx2t99_l1delay,\\\n-    thunderx2t99_f01)\")\n+  \"thunderx2t99_l01delay,thunderx2t99_f01\")\n+\n+(define_insn_reservation \"thunderx2t99_asimd_load3\" 7\n+  (and (eq_attr \"tune\" \"thunderx2t99\")\n+       (eq_attr \"type\" \"neon_load3_3reg,neon_load3_3reg_q,\\\n+\t\t\tneon_load3_one_lane,neon_load3_one_lane_q,\\\n+\t\t\tneon_load3_all_lanes,neon_load3_all_lanes_q\"))\n+  \"thunderx2t99_l01delay,thunderx2t99_f01\")\n+\n+(define_insn_reservation \"thunderx2t99_asimd_load4\" 8\n+  (and (eq_attr \"tune\" \"thunderx2t99\")\n+       (eq_attr \"type\" \"neon_load4_4reg,neon_load4_4reg_q,\\\n+\t\t\tneon_load4_one_lane,neon_load4_one_lane_q,\\\n+\t\t\tneon_load4_all_lanes,neon_load4_all_lanes_q\"))\n+  \"thunderx2t99_l01delay,thunderx2t99_f01\")\n \n ;; ASIMD store instructions.\n \n ; Same note applies as for ASIMD load instructions.\n \n-(define_insn_reservation \"thunderx2t99_asimd_store1_1_mult\" 1\n+(define_insn_reservation \"thunderx2t99_asimd_store_stp\" 1\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"neon_store1_1reg,neon_store1_1reg_q\"))\n-  \"thunderx2t99_ls01\")\n+       (eq_attr \"type\" \"neon_stp,neon_stp_q\"))\n+  \"thunderx2t99_ls01,thunderx2t99_sd\")\n \n-(define_insn_reservation \"thunderx2t99_asimd_store1_2_mult\" 1\n+(define_insn_reservation \"thunderx2t99_asimd_store1\" 1\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"neon_store1_2reg,neon_store1_2reg_q\"))\n-  \"thunderx2t99_ls_both\")\n+       (eq_attr \"type\" \"neon_store1_1reg,neon_store1_1reg_q,\\\n+\t\t\tneon_store1_2reg,neon_store1_2reg_q,\\\n+\t\t\tneon_store1_3reg,neon_store1_4reg\"))\n+  \"thunderx2t99_ls01\")\n \n (define_insn_reservation \"thunderx2t99_asimd_store1_onelane\" 1\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n        (eq_attr \"type\" \"neon_store1_one_lane,neon_store1_one_lane_q\"))\n   \"thunderx2t99_ls01,thunderx2t99_f01\")\n \n-(define_insn_reservation \"thunderx2t99_asimd_store2_mult\" 1\n+(define_insn_reservation \"thunderx2t99_asimd_store2\" 1\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"neon_store2_2reg,neon_store2_2reg_q\"))\n-  \"thunderx2t99_ls_both,thunderx2t99_f01\")\n+       (eq_attr \"type\" \"neon_store2_2reg,neon_store2_2reg_q,\\\n+\t\t\tneon_store2_one_lane,neon_store2_one_lane_q\"))\n+  \"thunderx2t99_ls01,thunderx2t99_f01\")\n+\n+(define_insn_reservation \"thunderx2t99_asimd_store3\" 1\n+  (and (eq_attr \"tune\" \"thunderx2t99\")\n+       (eq_attr \"type\" \"neon_store3_3reg,neon_store3_3reg_q,\\\n+\t\t\tneon_store3_one_lane,neon_store3_one_lane_q\"))\n+  \"thunderx2t99_ls01,thunderx2t99_f01\")\n \n-(define_insn_reservation \"thunderx2t99_asimd_store2_onelane\" 1\n+(define_insn_reservation \"thunderx2t99_asimd_store4\" 1\n   (and (eq_attr \"tune\" \"thunderx2t99\")\n-       (eq_attr \"type\" \"neon_store2_one_lane,neon_store2_one_lane_q\"))\n+       (eq_attr \"type\" \"neon_store4_4reg,neon_store4_4reg_q,\\\n+\t\t\tneon_store4_one_lane,neon_store4_one_lane_q\"))\n   \"thunderx2t99_ls01,thunderx2t99_f01\")\n \n ;; Crypto extensions."}]}