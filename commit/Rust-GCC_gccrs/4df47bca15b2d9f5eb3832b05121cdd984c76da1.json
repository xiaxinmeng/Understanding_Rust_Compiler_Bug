{"sha": "4df47bca15b2d9f5eb3832b05121cdd984c76da1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGRmNDdiY2ExNWIyZDlmNWViMzgzMmIwNTEyMWNkZDk4NGM3NmRhMQ==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2011-02-11T18:13:11Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2011-02-11T18:13:11Z"}, "message": "re PR driver/47678 (missing error message for -I)\n\n\tPR driver/47678\n\t* gcc.c (main): Do not compile inputs if there were errors in\n\toption handling.\n\t* opts-common.c (read_cmdline_option): Check for wrong language\n\tafter other error checks.\n\ntestsuite:\n\t* gcc.dg/opts-6.c: New test.\n\nFrom-SVN: r170056", "tree": {"sha": "11b96690599d55f55bbd47567e194d7fc6f13d42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/11b96690599d55f55bbd47567e194d7fc6f13d42"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4df47bca15b2d9f5eb3832b05121cdd984c76da1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4df47bca15b2d9f5eb3832b05121cdd984c76da1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4df47bca15b2d9f5eb3832b05121cdd984c76da1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4df47bca15b2d9f5eb3832b05121cdd984c76da1/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1c31ca71a7923d16e6ccba733edf14db0b399be9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c31ca71a7923d16e6ccba733edf14db0b399be9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c31ca71a7923d16e6ccba733edf14db0b399be9"}], "stats": {"total": 35, "additions": 29, "deletions": 6}, "files": [{"sha": "0b859c56d6a28b9fc9972e484ea34249748f8f03", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4df47bca15b2d9f5eb3832b05121cdd984c76da1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4df47bca15b2d9f5eb3832b05121cdd984c76da1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4df47bca15b2d9f5eb3832b05121cdd984c76da1", "patch": "@@ -1,3 +1,11 @@\n+2011-02-11  Joseph Myers  <joseph@codesourcery.com>\n+\n+\tPR driver/47678\n+\t* gcc.c (main): Do not compile inputs if there were errors in\n+\toption handling.\n+\t* opts-common.c (read_cmdline_option): Check for wrong language\n+\tafter other error checks.\n+\n 2011-02-11  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* cgraph.c: Fix comment typos."}, {"sha": "ec35ed01f6dcffb3115256a469827a8ae7844eab", "filename": "gcc/gcc.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4df47bca15b2d9f5eb3832b05121cdd984c76da1/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4df47bca15b2d9f5eb3832b05121cdd984c76da1/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=4df47bca15b2d9f5eb3832b05121cdd984c76da1", "patch": "@@ -6597,6 +6597,9 @@ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\\n\\n\"\n   if (n_infiles == added_libraries)\n     fatal_error (\"no input files\");\n \n+  if (seen_error ())\n+    goto out;\n+\n   /* Make a place to record the compiler output file names\n      that correspond to the input files.  */\n \n@@ -6864,6 +6867,7 @@ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\\n\\n\"\n       printf (\"%s\\n\", bug_report_url);\n     }\n \n+ out:\n   return (signal_count != 0 ? 2\n \t  : seen_error () ? (pass_exit_codes ? greatest_status : 1)\n \t  : 0);"}, {"sha": "3c4044a206377a26c75d58d963e7bcaa2a3136e9", "filename": "gcc/opts-common.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4df47bca15b2d9f5eb3832b05121cdd984c76da1/gcc%2Fopts-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4df47bca15b2d9f5eb3832b05121cdd984c76da1/gcc%2Fopts-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts-common.c?ref=4df47bca15b2d9f5eb3832b05121cdd984c76da1", "patch": "@@ -960,12 +960,6 @@ read_cmdline_option (struct gcc_options *opts,\n       return;\n     }\n \n-  if (decoded->errors & CL_ERR_WRONG_LANG)\n-    {\n-      handlers->wrong_lang_callback (decoded, lang_mask);\n-      return;\n-    }\n-\n   if (decoded->errors & CL_ERR_MISSING_ARG)\n     {\n       if (option->missing_argument_error)\n@@ -1012,6 +1006,12 @@ read_cmdline_option (struct gcc_options *opts,\n       return;\n     }\n \n+  if (decoded->errors & CL_ERR_WRONG_LANG)\n+    {\n+      handlers->wrong_lang_callback (decoded, lang_mask);\n+      return;\n+    }\n+\n   gcc_assert (!decoded->errors);\n \n   if (!handle_option (opts, opts_set, decoded, lang_mask, DK_UNSPECIFIED,"}, {"sha": "b9406bab86db2de0ad909dc447a722e21394e81b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4df47bca15b2d9f5eb3832b05121cdd984c76da1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4df47bca15b2d9f5eb3832b05121cdd984c76da1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4df47bca15b2d9f5eb3832b05121cdd984c76da1", "patch": "@@ -1,3 +1,8 @@\n+2011-02-11  Joseph Myers  <joseph@codesourcery.com>\n+\n+\tPR driver/47678\n+\t* gcc.dg/opts-6.c: New test.\n+\n 2011-02-11  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR debug/47684"}, {"sha": "b0441dc39391c69166dcb9cb1f2f662f67a2d7d8", "filename": "gcc/testsuite/gcc.dg/opts-6.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4df47bca15b2d9f5eb3832b05121cdd984c76da1/gcc%2Ftestsuite%2Fgcc.dg%2Fopts-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4df47bca15b2d9f5eb3832b05121cdd984c76da1/gcc%2Ftestsuite%2Fgcc.dg%2Fopts-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fopts-6.c?ref=4df47bca15b2d9f5eb3832b05121cdd984c76da1", "patch": "@@ -0,0 +1,6 @@\n+/* Missing option arguments take precedence over wrong-language\n+   warnings.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-ftemplate-depth=\" } */\n+\n+/* { dg-error \"missing argument\" \"\" { target *-*-* } 0 } */"}]}