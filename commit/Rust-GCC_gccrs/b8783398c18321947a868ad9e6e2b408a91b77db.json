{"sha": "b8783398c18321947a868ad9e6e2b408a91b77db", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjg3ODMzOThjMTgzMjE5NDdhODY4YWQ5ZTZlMmI0MDhhOTFiNzdkYg==", "commit": {"author": {"name": "Thomas Quinot", "email": "quinot@adacore.com", "date": "2006-10-31T18:02:00Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2006-10-31T18:02:00Z"}, "message": "Makefile.in: Set EH mechanism to ZCX for FreeBSD.\n\n2006-10-31  Thomas Quinot  <quinot@adacore.com>\n\t    Eric Botcazou  <ebotcazou@adacore.com>\n\t    Arnaud Charlet  <charlet@adacore.com>\n\n\t* Makefile.in: Set EH mechanism to ZCX for FreeBSD.\n\t(NO_REORDER_ADAFLAGS): New var defined to -fno-toplevel-reorder if\n\tpossible.\n\t(a-except.o): Pass it to the compiler.\n\t(gnatlib-shared-vms): Removed -nostartfiles switch in link step.\n\t(LIBGNAT_TARGET_PAIRS for Windows): Avoid the use of the specific\n\ta-calend-mingw.adb version.\n\n        * Makefile.rtl: Added s-dsaser.\n\tAdd object entries for Ada.Calendar.[Arithmetic/Formatting/Time_Zones]\n\t(GNATRTL_TASKING_OBJS): Add Ada.Dispatching and\n\tAda.Dispatching.Round_Robin.\n\tAdded new unit Ada.Containers.Restricted_Bounded_Doubly_Linked_Lists\n\n\t* Make-lang.in: Remove all references to gt-ada-decl.h.\n\tAdd concatenation (s-strops/s-sopco3/s-sopco4/s-sopco5) to compiler\n\tsources.\n\tAdd dependency on ada/s-restri.o for GNAT1 and GNATBIND objects.\n\tUpdate dependencies.\n\n\t* system-freebsd-x86.ads: Make ZCX the default EH mechanism for FreeBSD\n\nFrom-SVN: r118285", "tree": {"sha": "b4c1ccf21b4907fef1cbd3f948e8a881af32fcff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b4c1ccf21b4907fef1cbd3f948e8a881af32fcff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b8783398c18321947a868ad9e6e2b408a91b77db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8783398c18321947a868ad9e6e2b408a91b77db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8783398c18321947a868ad9e6e2b408a91b77db", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8783398c18321947a868ad9e6e2b408a91b77db/comments", "author": null, "committer": null, "parents": [{"sha": "53973dcf9d58ce812fb38b2d9e837cbf23f55ebc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53973dcf9d58ce812fb38b2d9e837cbf23f55ebc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53973dcf9d58ce812fb38b2d9e837cbf23f55ebc"}], "stats": {"total": 3567, "additions": 2237, "deletions": 1330}, "files": [{"sha": "2774456aa4d5fda83d961bdb4fb62266d73f9a0d", "filename": "gcc/ada/Make-lang.in", "status": "modified", "additions": 2207, "deletions": 1319, "changes": 3526, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8783398c18321947a868ad9e6e2b408a91b77db/gcc%2Fada%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8783398c18321947a868ad9e6e2b408a91b77db/gcc%2Fada%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FMake-lang.in?ref=b8783398c18321947a868ad9e6e2b408a91b77db"}, {"sha": "a8c5fe043af4923456568336af9041e02ea13cf3", "filename": "gcc/ada/Makefile.in", "status": "modified", "additions": 17, "deletions": 6, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8783398c18321947a868ad9e6e2b408a91b77db/gcc%2Fada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8783398c18321947a868ad9e6e2b408a91b77db/gcc%2Fada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FMakefile.in?ref=b8783398c18321947a868ad9e6e2b408a91b77db", "patch": "@@ -843,6 +843,7 @@ ifeq ($(strip $(filter-out %86 freebsd%,$(arch) $(osys))),)\n   mlib-tgt.adb<mlib-tgt-linux.adb\n   GNATLIB_SHARED = gnatlib-shared-dual\n \n+  EH_MECHANISM=-gcc\n   THREADSLIB= -lc_r\n   GMEM_LIB = gmemlib\n   PREFIX_OBJS = $(PREFIX_REAL_OBJS)\n@@ -1197,7 +1198,6 @@ endif\n \n ifeq ($(strip $(filter-out cygwin32% mingw32% pe,$(osys))),)\n   LIBGNAT_TARGET_PAIRS = \\\n-  a-calend.adb<a-calend-mingw.adb \\\n   a-dirval.adb<a-dirval-mingw.adb \\\n   a-excpol.adb<a-excpol-abort.adb \\\n   a-intnam.ads<a-intnam-mingw.ads \\\n@@ -1847,7 +1847,7 @@ gnatlib-shared-vms:\n \tobjdump --syms $(LIBGNAT_OBJS) $(GNATRTL_NONTASKING_OBJS) | \\\n \t$(SHLIB_SYMVEC) >> SYMVEC_$$$$.opt && \\\n \techo \"case_sensitive=NO\" >> SYMVEC_$$$$.opt && \\\n-\t../../xgcc -g -B../../ -nostartfiles -shared -shared-libgcc \\\n+\t../../xgcc -g -B../../ -shared -shared-libgcc \\\n \t   -o libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) libgnat.a \\\n \t   sys\\$$library:trace.exe \\\n \t   --for-linker=/noinform \\\n@@ -1857,7 +1857,7 @@ gnatlib-shared-vms:\n \tobjdump --syms $(GNATRTL_TASKING_OBJS) | \\\n \t$(SHLIB_SYMVEC) >> SYMVEC_$$$$.opt && \\\n \techo \"case_sensitive=NO\" >> SYMVEC_$$$$.opt && \\\n-\t../../xgcc -g -B../../ -nostartfiles -shared -shared-libgcc \\\n+\t../../xgcc -g -B../../ -shared -shared-libgcc \\\n \t   -o libgnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n \t   libgnarl.a libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n \t   sys\\$$library:trace.exe \\\n@@ -1921,8 +1921,8 @@ ADA_RTL_OBJ_DIR = $(libsubdir)/adalib\n # force no sibling call optimization on s-traceb.o so the number of stack\n # frames to be skipped when computing a call chain is not modified by\n # optimization. However we can do that only when building the runtime\n-# (not the compiler) because the -fno-optimize-sibling-calls exists\n-# only in GCC 3.\n+# (not the compiler) because the -fno-optimize-sibling-calls option exists\n+# only in GCC 3 and above.\n \n ifneq (,$(findstring xgcc,$(CC)))\n NO_SIBLING_ADAFLAGS=-fno-optimize-sibling-calls\n@@ -1942,13 +1942,24 @@ s-tasdeb.o  : s-tasdeb.adb s-tasdeb.ads\n \t$(CC) -c $(ALL_ADAFLAGS) $(FORCE_DEBUG_ADAFLAGS) -O0 $(ADA_INCLUDES) \\\n \t      $< $(OUTPUT_OPTION)\n \n+# force no function reordering on a-except.o because of the exclusion bounds\n+# mechanism (see the source file for more detailed information). However we\n+# can do that only when building the runtime (not the compiler) because the\n+# -fno-toplevel-reorder option exists only in GCC 4.2 and above.\n+\n+ifneq (,$(findstring xgcc,$(CC)))\n+NO_REORDER_ADAFLAGS=-fno-toplevel-reorder\n+else\n+NO_REORDER_ADAFLAGS=\n+endif\n+\n # force debugging information on a-except.o so that it is always\n # possible to set conditional breakpoints on exceptions.\n # use -O1 otherwise gdb isn't able to get a full backtrace on mips targets.\n \n a-except.o  : a-except.adb a-except.ads\n \t$(CC) -c $(ALL_ADAFLAGS) $(FORCE_DEBUG_ADAFLAGS) -O1 -fno-inline \\\n-\t      $(ADA_INCLUDES) $< $(OUTPUT_OPTION)\n+\t      $(NO_REORDER_ADAFLAGS) $(ADA_INCLUDES) $< $(OUTPUT_OPTION)\n \n # force debugging information on s-assert.o so that it is always\n # possible to set breakpoint on assert failures."}, {"sha": "64c3ef4524519e43d18b40649c27de2d4cac93d8", "filename": "gcc/ada/Makefile.rtl", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8783398c18321947a868ad9e6e2b408a91b77db/gcc%2Fada%2FMakefile.rtl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8783398c18321947a868ad9e6e2b408a91b77db/gcc%2Fada%2FMakefile.rtl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FMakefile.rtl?ref=b8783398c18321947a868ad9e6e2b408a91b77db", "patch": "@@ -26,6 +26,8 @@\n \n # Objects needed only for tasking\n GNATRTL_TASKING_OBJS= \\\n+  a-diroro$(objext) \\\n+  a-dispat$(objext) \\\n   a-dynpri$(objext) \\\n   a-interr$(objext) \\\n   a-intsig$(objext) \\\n@@ -75,8 +77,11 @@ GNATRTL_TASKING_OBJS= \\\n \n # Objects needed for non-tasking.\n GNATRTL_NONTASKING_OBJS= \\\n+  a-calari$(objext) \\\n   a-caldel$(objext) \\\n   a-calend$(objext) \\\n+  a-calfor$(objext) \\\n+  a-catizo$(objext) \\\n   a-cdlili$(objext) \\\n   a-cgaaso$(objext) \\\n   a-cgarso$(objext) \\\n@@ -113,6 +118,7 @@ GNATRTL_NONTASKING_OBJS= \\\n   a-crbltr$(objext) \\\n   a-crbtgk$(objext) \\\n   a-crbtgo$(objext) \\\n+  a-crdlli$(objext) \\\n   a-cwila1$(objext) \\\n   a-cwila9$(objext) \\\n   a-decima$(objext) \\\n@@ -397,6 +403,7 @@ GNATRTL_NONTASKING_OBJS= \\\n   s-crtl$(objext)   \\\n   s-crc32$(objext)  \\\n   s-direio$(objext) \\\n+  s-dsaser$(objext) \\\n   s-errrep$(objext) \\\n   s-exctab$(objext) \\\n   s-exnint$(objext) \\"}, {"sha": "a92458067e3fa7a87e952c11b32edd939263cc0e", "filename": "gcc/ada/system-freebsd-x86.ads", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8783398c18321947a868ad9e6e2b408a91b77db/gcc%2Fada%2Fsystem-freebsd-x86.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8783398c18321947a868ad9e6e2b408a91b77db/gcc%2Fada%2Fsystem-freebsd-x86.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsystem-freebsd-x86.ads?ref=b8783398c18321947a868ad9e6e2b408a91b77db", "patch": "@@ -5,9 +5,9 @@\n --                               S Y S T E M                                --\n --                                                                          --\n --                                 S p e c                                  --\n---                           (FreeBSD/x86 Version)                          --\n+--                          (FreeBSD/x86 Version)                           --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- This specification is derived from the Ada Reference Manual for use with --\n -- GNAT. The copyright notice above, and the license provisions that follow --\n@@ -88,6 +88,7 @@ package System is\n \n    type Bit_Order is (High_Order_First, Low_Order_First);\n    Default_Bit_Order : constant Bit_Order := Low_Order_First;\n+   pragma Warnings (Off, Default_Bit_Order); -- kill constant condition warning\n \n    --  Priority-related Declarations (RM D.1)\n \n@@ -133,16 +134,16 @@ private\n    Preallocated_Stacks       : constant Boolean := False;\n    Signed_Zeros              : constant Boolean := True;\n    Stack_Check_Default       : constant Boolean := False;\n-   Stack_Check_Probes        : constant Boolean := False;\n+   Stack_Check_Probes        : constant Boolean := True;\n    Support_64_Bit_Divides    : constant Boolean := True;\n    Support_Aggregates        : constant Boolean := True;\n    Support_Composite_Assign  : constant Boolean := True;\n    Support_Composite_Compare : constant Boolean := True;\n    Support_Long_Shifts       : constant Boolean := True;\n    Suppress_Standard_Library : constant Boolean := False;\n    Use_Ada_Main_Program_Name : constant Boolean := False;\n-   ZCX_By_Default            : constant Boolean := False;\n-   GCC_ZCX_Support           : constant Boolean := False;\n+   ZCX_By_Default            : constant Boolean := True;\n+   GCC_ZCX_Support           : constant Boolean := True;\n    Front_End_ZCX_Support     : constant Boolean := False;\n \n    --  Obsolete entries, to be removed eventually (bootstrap issues!)"}]}