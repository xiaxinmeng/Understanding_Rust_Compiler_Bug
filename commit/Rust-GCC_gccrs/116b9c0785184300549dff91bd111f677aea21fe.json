{"sha": "116b9c0785184300549dff91bd111f677aea21fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTE2YjljMDc4NTE4NDMwMDU0OWRmZjkxYmQxMTFmNjc3YWVhMjFmZQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2011-09-21T13:10:31Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2011-09-21T13:10:31Z"}, "message": "re PR tree-optimization/50433 (ACATS c460010 fails to compile)\n\n\n\tPR tree-optimization/50433\n\t* ipa-inline-analysis.c (eliminated_by_inlining_prob): Use get_base_address.\n\nFrom-SVN: r179046", "tree": {"sha": "533bacc29cc3834c0fb7e1cc1f40da732fb9d038", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/533bacc29cc3834c0fb7e1cc1f40da732fb9d038"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/116b9c0785184300549dff91bd111f677aea21fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/116b9c0785184300549dff91bd111f677aea21fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/116b9c0785184300549dff91bd111f677aea21fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/116b9c0785184300549dff91bd111f677aea21fe/comments", "author": null, "committer": null, "parents": [{"sha": "bdbebb7dc6192e428fa9c5ece8de8efb33a7738f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdbebb7dc6192e428fa9c5ece8de8efb33a7738f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bdbebb7dc6192e428fa9c5ece8de8efb33a7738f"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "0f4aa869b346e6bfb3bf9767f3fd79e3a669b836", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/116b9c0785184300549dff91bd111f677aea21fe/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/116b9c0785184300549dff91bd111f677aea21fe/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=116b9c0785184300549dff91bd111f677aea21fe", "patch": "@@ -1,3 +1,8 @@\n+2011-09-21  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR tree-optimization/50433\n+\t* ipa-inline-analysis.c (eliminated_by_inlining_prob): Use get_base_address.\n+\n 2011-09-21  Jakub Jelinek  <jakub@redhat.com>\n \n \t* config/i386/sse.md (<code><mode>3 smaxmin:VI124_128 expander): Use"}, {"sha": "fc954b3d101779c0dc115ef9ab7e7549c40cd66d", "filename": "gcc/ipa-inline-analysis.c", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/116b9c0785184300549dff91bd111f677aea21fe/gcc%2Fipa-inline-analysis.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/116b9c0785184300549dff91bd111f677aea21fe/gcc%2Fipa-inline-analysis.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline-analysis.c?ref=116b9c0785184300549dff91bd111f677aea21fe", "patch": "@@ -1149,18 +1149,15 @@ eliminated_by_inlining_prob (gimple stmt)\n \t  {\n \t    tree rhs = gimple_assign_rhs1 (stmt);\n             tree lhs = gimple_assign_lhs (stmt);\n-\t    tree inner_rhs = rhs;\n-\t    tree inner_lhs = lhs;\n+\t    tree inner_rhs = get_base_address (rhs);\n+\t    tree inner_lhs = get_base_address (lhs);\n \t    bool rhs_free = false;\n \t    bool lhs_free = false;\n \n- \t    while (handled_component_p (inner_lhs)\n-\t\t   || TREE_CODE (inner_lhs) == MEM_REF)\n-\t      inner_lhs = TREE_OPERAND (inner_lhs, 0);\n- \t    while (handled_component_p (inner_rhs)\n-\t           || TREE_CODE (inner_rhs) == ADDR_EXPR\n-\t\t   || TREE_CODE (inner_rhs) == MEM_REF)\n-\t      inner_rhs = TREE_OPERAND (inner_rhs, 0);\n+\t    if (!inner_rhs)\n+\t      inner_rhs = rhs;\n+\t    if (!inner_lhs)\n+\t      inner_lhs = lhs;\n \n \t    if (unmodified_parm (stmt, inner_rhs))\n \t      rhs_free = true;"}]}