{"sha": "ce06965e6a9c46d6896ccb8a4553852a230c95fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2UwNjk2NWU2YTljNDZkNjg5NmNjYjhhNDU1Mzg1MmEyMzBjOTVmYw==", "commit": {"author": {"name": "Alexandre Petit-Bianco", "email": "apbianco@redhat.com", "date": "2001-03-26T22:12:16Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2001-03-26T22:12:16Z"}, "message": "parse.y (find_as_inner_class): Follow current package indications not to mistakingly load an unrelated class.\n\n2001-03-26  Alexandre Petit-Bianco  <apbianco@redhat.com>\n\n\t* parse.y (find_as_inner_class): Follow current package\n\tindications not to mistakingly load an unrelated class.\n\n(http://gcc.gnu.org/ml/gcc-patches/2001-03/msg01712.html)\n\nFrom-SVN: r40851", "tree": {"sha": "602715cc2492a4adc66e18cf92b70ba5933853fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/602715cc2492a4adc66e18cf92b70ba5933853fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce06965e6a9c46d6896ccb8a4553852a230c95fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce06965e6a9c46d6896ccb8a4553852a230c95fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce06965e6a9c46d6896ccb8a4553852a230c95fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce06965e6a9c46d6896ccb8a4553852a230c95fc/comments", "author": null, "committer": null, "parents": [{"sha": "d38a30c995c5d7abf7112f68c56a6f70d1e94019", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d38a30c995c5d7abf7112f68c56a6f70d1e94019", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d38a30c995c5d7abf7112f68c56a6f70d1e94019"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "d1471544b7f0f4aef125d74fd8422f36c9023cf0", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce06965e6a9c46d6896ccb8a4553852a230c95fc/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce06965e6a9c46d6896ccb8a4553852a230c95fc/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=ce06965e6a9c46d6896ccb8a4553852a230c95fc", "patch": "@@ -1,3 +1,8 @@\n+2001-03-26  Alexandre Petit-Bianco  <apbianco@redhat.com>\n+\n+\t* parse.y (find_as_inner_class): Follow current package\n+\tindications not to mistakingly load an unrelated class.\n+\n 2001-03-25  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* constants.c (PUTN): Use memcpy, not bcopy."}, {"sha": "f42d76399dedcc3e19d1ba1884a046241871e6ba", "filename": "gcc/java/parse.y", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce06965e6a9c46d6896ccb8a4553852a230c95fc/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce06965e6a9c46d6896ccb8a4553852a230c95fc/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=ce06965e6a9c46d6896ccb8a4553852a230c95fc", "patch": "@@ -3521,7 +3521,18 @@ find_as_inner_class (enclosing, name, cl)\n \t  acc = merge_qualified_name (acc, \n \t\t\t\t      EXPR_WFL_NODE (TREE_PURPOSE (qual)));\n \t  BUILD_PTR_FROM_NAME (ptr, acc);\n-\t  decl = do_resolve_class (NULL_TREE, ptr, NULL_TREE, cl);\n+\n+\t  /* Don't try to resolve ACC as a class name if it follows\n+\t     the current package name. We don't want to pick something\n+\t     that's accidentally there: for example `a.b.c' in package\n+\t     `a.b' shouldn't trigger loading `a' if it's there by\n+\t     itself. */\n+\t  if (ctxp->package\n+\t      && strstr (IDENTIFIER_POINTER (ctxp->package),\n+\t\t\t IDENTIFIER_POINTER (acc)))\n+\t    decl = NULL;\n+\t  else\n+\t    decl = do_resolve_class (NULL_TREE, ptr, NULL_TREE, cl);\n \t}\n \n       /* A NULL qual and a decl means that the search ended"}]}