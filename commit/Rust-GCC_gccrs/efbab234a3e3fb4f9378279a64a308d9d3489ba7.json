{"sha": "efbab234a3e3fb4f9378279a64a308d9d3489ba7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWZiYWIyMzRhM2UzZmI0ZjkzNzgyNzlhNjRhMzA4ZDlkMzQ4OWJhNw==", "commit": {"author": {"name": "Gregor Richards", "email": "gregor.richards@uwaterloo.ca", "date": "2015-10-20T23:42:17Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2015-10-20T23:42:17Z"}, "message": "Pass --secure-plt to the linker\n\n\t* config/rs6000/secureplt.h (LINK_SECURE_PLT_DEFAULT_SPEC): Define.\n\t* config/rs6000/sysv4.h (LINK_SECURE_PLT_SPEC): Define.\n\t(LINK_SPEC): Add %(link_secure_plt).\n\t(SUBTARGET_EXTRA_SPECS): Add \"link_secure_plt\".\n\t* config/rs6000/linux64.h (LINK_SECURE_PLT_SPEC): Redefine.\n\n\nCo-Authored-By: Alan Modra <amodra@gmail.com>\nCo-Authored-By: Szabolcs Nagy <szabolcs.nagy@arm.com>\n\nFrom-SVN: r229102", "tree": {"sha": "0ba3cf4044cedd5bb6c4c9a33c73817a1328cd0d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ba3cf4044cedd5bb6c4c9a33c73817a1328cd0d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/efbab234a3e3fb4f9378279a64a308d9d3489ba7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efbab234a3e3fb4f9378279a64a308d9d3489ba7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/efbab234a3e3fb4f9378279a64a308d9d3489ba7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efbab234a3e3fb4f9378279a64a308d9d3489ba7/comments", "author": null, "committer": null, "parents": [{"sha": "9ef83c047fe2cbeba27d814d2b7262b44688b128", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ef83c047fe2cbeba27d814d2b7262b44688b128", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ef83c047fe2cbeba27d814d2b7262b44688b128"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "77f659bc220aa4c556f166bfc8b56db02ea1f1ee", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efbab234a3e3fb4f9378279a64a308d9d3489ba7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efbab234a3e3fb4f9378279a64a308d9d3489ba7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=efbab234a3e3fb4f9378279a64a308d9d3489ba7", "patch": "@@ -1,3 +1,13 @@\n+2015-10-21  Gregor Richards  <gregor.richards@uwaterloo.ca>\n+\t    Szabolcs Nagy  <szabolcs.nagy@arm.com>\n+\t    Alan Modra  <amodra@gmail.com>\n+\n+\t* config/rs6000/secureplt.h (LINK_SECURE_PLT_DEFAULT_SPEC): Define.\n+\t* config/rs6000/sysv4.h (LINK_SECURE_PLT_SPEC): Define.\n+\t(LINK_SPEC): Add %(link_secure_plt).\n+\t(SUBTARGET_EXTRA_SPECS): Add \"link_secure_plt\".\n+\t* config/rs6000/linux64.h (LINK_SECURE_PLT_SPEC): Redefine.\n+\n 2015-10-20  Gregor Richards  <gregor.richards@uwaterloo.ca>\n \t    Szabolcs Nagy  <szabolcs.nagy@arm.com>\n "}, {"sha": "41472f4930fab412e45dbd443bce813d5dd71b68", "filename": "gcc/config/rs6000/linux64.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efbab234a3e3fb4f9378279a64a308d9d3489ba7/gcc%2Fconfig%2Frs6000%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efbab234a3e3fb4f9378279a64a308d9d3489ba7/gcc%2Fconfig%2Frs6000%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux64.h?ref=efbab234a3e3fb4f9378279a64a308d9d3489ba7", "patch": "@@ -174,20 +174,24 @@ extern int dot_symbols;\n #undef\tASM_DEFAULT_SPEC\n #undef\tASM_SPEC\n #undef\tLINK_OS_LINUX_SPEC\n+#undef\tLINK_SECURE_PLT_SPEC\n \n #ifndef\tRS6000_BI_ARCH\n #define\tASM_DEFAULT_SPEC \"-mppc64\"\n #define\tASM_SPEC\t \"%(asm_spec64) %(asm_spec_common)\"\n #define\tLINK_OS_LINUX_SPEC \"%(link_os_linux_spec64)\"\n+#define\tLINK_SECURE_PLT_SPEC \"\"\n #else\n #if DEFAULT_ARCH64_P\n #define\tASM_DEFAULT_SPEC \"-mppc%{!m32:64}\"\n #define\tASM_SPEC\t \"%{m32:%(asm_spec32)}%{!m32:%(asm_spec64)} %(asm_spec_common)\"\n #define\tLINK_OS_LINUX_SPEC \"%{m32:%(link_os_linux_spec32)}%{!m32:%(link_os_linux_spec64)}\"\n+#define\tLINK_SECURE_PLT_SPEC \"%{m32: \" LINK_SECURE_PLT_DEFAULT_SPEC \"}\"\n #else\n #define\tASM_DEFAULT_SPEC \"-mppc%{m64:64}\"\n #define\tASM_SPEC\t \"%{!m64:%(asm_spec32)}%{m64:%(asm_spec64)} %(asm_spec_common)\"\n #define\tLINK_OS_LINUX_SPEC \"%{!m64:%(link_os_linux_spec32)}%{m64:%(link_os_linux_spec64)}\"\n+#define\tLINK_SECURE_PLT_SPEC \"%{!m64: \" LINK_SECURE_PLT_DEFAULT_SPEC \"}\"\n #endif\n #endif\n "}, {"sha": "77edf2aefae7ffcc08673e3574c709a8bb6d4033", "filename": "gcc/config/rs6000/secureplt.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efbab234a3e3fb4f9378279a64a308d9d3489ba7/gcc%2Fconfig%2Frs6000%2Fsecureplt.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efbab234a3e3fb4f9378279a64a308d9d3489ba7/gcc%2Fconfig%2Frs6000%2Fsecureplt.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fsecureplt.h?ref=efbab234a3e3fb4f9378279a64a308d9d3489ba7", "patch": "@@ -18,3 +18,4 @@ along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n #define CC1_SECURE_PLT_DEFAULT_SPEC \"-msecure-plt\"\n+#define LINK_SECURE_PLT_DEFAULT_SPEC \"--secure-plt\""}, {"sha": "adb4333965a554716e3b2b3530e8c2385e41cac9", "filename": "gcc/config/rs6000/sysv4.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efbab234a3e3fb4f9378279a64a308d9d3489ba7/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efbab234a3e3fb4f9378279a64a308d9d3489ba7/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fsysv4.h?ref=efbab234a3e3fb4f9378279a64a308d9d3489ba7", "patch": "@@ -537,6 +537,9 @@ ENDIAN_SELECT(\" -mbig\", \" -mlittle\", DEFAULT_ASM_ENDIAN)\n #ifndef CC1_SECURE_PLT_DEFAULT_SPEC\n #define CC1_SECURE_PLT_DEFAULT_SPEC \"\"\n #endif\n+#ifndef LINK_SECURE_PLT_DEFAULT_SPEC\n+#define LINK_SECURE_PLT_DEFAULT_SPEC \"\"\n+#endif\n \n /* Pass -G xxx to the compiler.  */\n #undef CC1_SPEC\n@@ -567,13 +570,15 @@ ENDIAN_SELECT(\" -mbig\", \" -mlittle\", DEFAULT_ASM_ENDIAN)\n                : %(link_start_default)     }\"\n \n #define LINK_START_DEFAULT_SPEC \"\"\n+#define LINK_SECURE_PLT_SPEC LINK_SECURE_PLT_DEFAULT_SPEC\n \n #undef\tLINK_SPEC\n #define\tLINK_SPEC \"\\\n %{h*} %{v:-V} %{!msdata=none:%{G*}} %{msdata=none:-G0} \\\n %{R*} \\\n %(link_shlib) \\\n %{!T*: %(link_start) } \\\n+%{!static: %{!mbss-plt: %(link_secure_plt)}} \\\n %(link_os)\"\n \n /* Shared libraries are not default.  */\n@@ -889,6 +894,7 @@ ncrtn.o%s\"\n   { \"link_os_openbsd\",\t\tLINK_OS_OPENBSD_SPEC },\t\t\t\\\n   { \"link_os_default\",\t\tLINK_OS_DEFAULT_SPEC },\t\t\t\\\n   { \"cc1_secure_plt_default\",\tCC1_SECURE_PLT_DEFAULT_SPEC },\t\t\\\n+  { \"link_secure_plt\",\t\tLINK_SECURE_PLT_SPEC },\t\t\t\\\n   { \"cpp_os_ads\",\t\tCPP_OS_ADS_SPEC },\t\t\t\\\n   { \"cpp_os_yellowknife\",\tCPP_OS_YELLOWKNIFE_SPEC },\t\t\\\n   { \"cpp_os_mvme\",\t\tCPP_OS_MVME_SPEC },\t\t\t\\"}]}