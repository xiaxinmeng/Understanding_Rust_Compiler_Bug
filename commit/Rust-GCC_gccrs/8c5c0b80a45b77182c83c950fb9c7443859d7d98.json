{"sha": "8c5c0b80a45b77182c83c950fb9c7443859d7d98", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGM1YzBiODBhNDViNzcxODJjODNjOTUwZmI5Yzc0NDM4NTlkN2Q5OA==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-09-15T16:30:52Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-09-15T16:30:52Z"}, "message": "re PR fortran/29051 (segfault when too few values are in data statement of character array)\n\n2006-09-15  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/29051\n\t* decl.c (match_old_style_init): Set the 'where' field of the\n\tgfc_data structure 'newdata'.\n\n\t* match.c (match_case_eos): Add a comprehensible error message.\n\n2006-09-15  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/29051\n\t* gfortran.dg/oldstyle_3.f90: New test.\n\nFrom-SVN: r116977", "tree": {"sha": "2ee9a5e258ea7946f8f29aa839fb77c92adbaa72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2ee9a5e258ea7946f8f29aa839fb77c92adbaa72"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c5c0b80a45b77182c83c950fb9c7443859d7d98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c5c0b80a45b77182c83c950fb9c7443859d7d98", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c5c0b80a45b77182c83c950fb9c7443859d7d98", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c5c0b80a45b77182c83c950fb9c7443859d7d98/comments", "author": null, "committer": null, "parents": [{"sha": "906d8c784a5e3e9819238cd3f6e253f6f13f8657", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/906d8c784a5e3e9819238cd3f6e253f6f13f8657", "html_url": "https://github.com/Rust-GCC/gccrs/commit/906d8c784a5e3e9819238cd3f6e253f6f13f8657"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "371860a95e8bb101d8148bbdd1a62cb7e58d1990", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c5c0b80a45b77182c83c950fb9c7443859d7d98/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c5c0b80a45b77182c83c950fb9c7443859d7d98/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=8c5c0b80a45b77182c83c950fb9c7443859d7d98", "patch": "@@ -1,3 +1,11 @@\n+2006-09-15  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/29051\n+\t* decl.c (match_old_style_init): Set the 'where' field of the\n+\tgfc_data structure 'newdata'.\n+\n+\t* match.c (match_case_eos): Add a comprehensible error message.\n+\n 2006-09-13  Wolfgang Gellerich  <gellerich@de.ibm.com>\n \n \t* trans-expr.c (gfc_add_interface_mapping): For characters, dereference"}, {"sha": "6045b204663c25490dae52d07cffc30eef4c7f95", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c5c0b80a45b77182c83c950fb9c7443859d7d98/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c5c0b80a45b77182c83c950fb9c7443859d7d98/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=8c5c0b80a45b77182c83c950fb9c7443859d7d98", "patch": "@@ -395,6 +395,7 @@ match_old_style_init (const char *name)\n   newdata = gfc_get_data ();\n   newdata->var = gfc_get_data_variable ();\n   newdata->var->expr = gfc_get_variable_expr (st);\n+  newdata->where = gfc_current_locus;\n \n   /* Match initial value list. This also eats the terminal\n      '/'.  */"}, {"sha": "3f393856798e10118608e8649acbb7a7798a76a5", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c5c0b80a45b77182c83c950fb9c7443859d7d98/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c5c0b80a45b77182c83c950fb9c7443859d7d98/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=8c5c0b80a45b77182c83c950fb9c7443859d7d98", "patch": "@@ -3056,7 +3056,10 @@ match_case_eos (void)\n   /* If the case construct doesn't have a case-construct-name, we\n      should have matched the EOS.  */\n   if (!gfc_current_block ())\n-    return MATCH_ERROR;\n+    {\n+      gfc_error (\"Expected the name of the select case construct at %C\");\n+      return MATCH_ERROR;\n+    }\n \n   gfc_gobble_whitespace ();\n "}, {"sha": "d2cb97d59c33f206951ac3e8e254c70ceaea9e6d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c5c0b80a45b77182c83c950fb9c7443859d7d98/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c5c0b80a45b77182c83c950fb9c7443859d7d98/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8c5c0b80a45b77182c83c950fb9c7443859d7d98", "patch": "@@ -1,3 +1,8 @@\n+2006-09-15  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/29051\n+\t* gfortran.dg/oldstyle_3.f90: New test.\n+\n 2006-09-15  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR libgfortran/29099"}, {"sha": "dad69568b51c89047ae9550f07b15afef7cc1238", "filename": "gcc/testsuite/gfortran.dg/oldstyle_3.f90", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c5c0b80a45b77182c83c950fb9c7443859d7d98/gcc%2Ftestsuite%2Fgfortran.dg%2Foldstyle_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c5c0b80a45b77182c83c950fb9c7443859d7d98/gcc%2Ftestsuite%2Fgfortran.dg%2Foldstyle_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Foldstyle_3.f90?ref=8c5c0b80a45b77182c83c950fb9c7443859d7d98", "patch": "@@ -0,0 +1,10 @@\n+! { dg-do compile }\n+! Suppress the warning about an old-style initializer;\n+! { dg-options \"\" }\n+! This tests the fix for PR29052 in which the error below would cause a seg-fault\n+! because the locus of the initializer was never set.\n+!\n+! Contributed by Bud Davis  <bdavis@gcc.gnu.org>\n+!\n+       character*10 a(4,2) /'aaa','bbb','ccc','ddd'/ ! { dg-error \"more variables than values\" }\n+       end"}]}