{"sha": "44eca121fcf46c61cc2dd36bccb3bd5235b30006", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDRlY2ExMjFmY2Y0NmM2MWNjMmRkMzZiY2NiM2JkNTIzNWIzMDAwNg==", "commit": {"author": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2001-12-04T00:42:41Z"}, "committer": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2001-12-04T00:42:41Z"}, "message": "ia64.h (SIMULTANEOUS PREFETCHES): Define.\n\n\t* config/ia64/ia64.h (SIMULTANEOUS PREFETCHES): Define.\n\t  (PREFETCH_BLOCK): Define.\n\t* config/ia64/ia64.md (itanium_class): Add lfetch.\n\t  (prefetch, prefetch_internal): New.\n\nFrom-SVN: r47579", "tree": {"sha": "a85ba947c7e05f991209bc4a368534a7f5980b9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a85ba947c7e05f991209bc4a368534a7f5980b9f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/44eca121fcf46c61cc2dd36bccb3bd5235b30006", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44eca121fcf46c61cc2dd36bccb3bd5235b30006", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44eca121fcf46c61cc2dd36bccb3bd5235b30006", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44eca121fcf46c61cc2dd36bccb3bd5235b30006/comments", "author": null, "committer": null, "parents": [{"sha": "8527852a3bc2599bcb0f2931e31360196e75ecf7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8527852a3bc2599bcb0f2931e31360196e75ecf7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8527852a3bc2599bcb0f2931e31360196e75ecf7"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "53fa9f3dfd0230fe45112d2e8f9a0e85662267bd", "filename": "gcc/config/ia64/ia64.md", "status": "modified", "additions": 29, "deletions": 1, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44eca121fcf46c61cc2dd36bccb3bd5235b30006/gcc%2Fconfig%2Fia64%2Fia64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44eca121fcf46c61cc2dd36bccb3bd5235b30006/gcc%2Fconfig%2Fia64%2Fia64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.md?ref=44eca121fcf46c61cc2dd36bccb3bd5235b30006", "patch": "@@ -99,14 +99,15 @@\n ;; multiple instructions, patterns which emit 0 instructions, and patterns\n ;; which emit instruction that can go in any slot (e.g. nop).\n \n-(define_attr \"itanium_class\" \"unknown,ignore,stop_bit,br,fcmp,fcvtfx,fld,fmac,fmisc,frar_i,frar_m,frbr,frfr,frpr,ialu,icmp,ilog,ishf,ld,chk_s,long_i,mmmul,mmshf,mmshfi,rse_m,scall,sem,stf,st,syst_m0,syst_m,tbit,toar_i,toar_m,tobr,tofr,topr,xmpy,xtd,nop_b,nop_f,nop_i,nop_m,nop_x\"\n+(define_attr \"itanium_class\" \"unknown,ignore,stop_bit,br,fcmp,fcvtfx,fld,fmac,fmisc,frar_i,frar_m,frbr,frfr,frpr,ialu,icmp,ilog,ishf,ld,chk_s,long_i,mmmul,mmshf,mmshfi,rse_m,scall,sem,stf,st,syst_m0,syst_m,tbit,toar_i,toar_m,tobr,tofr,topr,xmpy,xtd,nop_b,nop_f,nop_i,nop_m,nop_x,lfetch\"\n          (const_string \"unknown\"))\n \n ;; chk_s has an I and an M form; use type A for convenience.\n (define_attr \"type\" \"unknown,A,I,M,F,B,L,X,S\"\n   (cond [(eq_attr \"itanium_class\" \"ld,st,fld,stf,sem,nop_m\") (const_string \"M\")\n \t (eq_attr \"itanium_class\" \"rse_m,syst_m,syst_m0\") (const_string \"M\")\n \t (eq_attr \"itanium_class\" \"frar_m,toar_m,frfr,tofr\") (const_string \"M\")\n+\t (eq_attr \"itanium_class\" \"lfetch\") (const_string \"M\")\n \t (eq_attr \"itanium_class\" \"chk_s,ialu,icmp,ilog\") (const_string \"A\")\n \t (eq_attr \"itanium_class\" \"fmisc,fmac,fcmp,xmpy\") (const_string \"F\")\n \t (eq_attr \"itanium_class\" \"fcvtfx,nop_f\") (const_string \"F\")\n@@ -5048,6 +5049,33 @@\n   \"\"\n   \"break.f 0\"\n   [(set_attr \"itanium_class\" \"nop_f\")])\n+\n+(define_insn \"prefetch\"\n+  [(prefetch (match_operand:DI 0 \"address_operand\" \"p\")\n+\t     (match_operand:DI 1 \"const_int_operand\" \"n\")\n+\t     (match_operand:DI 2 \"const_int_operand\" \"n\"))]\n+  \"\"\n+{\n+  static const char * const alt[2][4] = {\n+    \"lfetch.nta [%0]\",\n+    \"lfetch.nt1 [%0]\",\n+    \"lfetch.nt2 [%0]\",\n+    \"lfetch [%0]\",\n+    \"lfetch.excl.nta [%0]\",\n+    \"lfetch.excl.nt1 [%0]\",\n+    \"lfetch.excl.nt2 [%0]\",\n+    \"lfetch.excl [%0]\"\n+  };\n+  int i = (INTVAL (operands[1]));\n+  int j = (INTVAL (operands[2]));\n+\n+  if (i != 0 && i != 1)\n+    abort ();\n+  if (j < 0 || j > 3)\n+    abort ();\n+  return alt[i][j];\n+}\n+  [(set_attr \"itanium_class\" \"lfetch\")])\n \f\n ;; Non-local goto support.\n "}]}