{"sha": "f012c1abe0935f4136352b7e5fbb862179be42ed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjAxMmMxYWJlMDkzNWY0MTM2MzUyYjdlNWZiYjg2MjE3OWJlNDJlZA==", "commit": {"author": {"name": "Trevor Saunders", "email": "tsaunders@mozilla.com", "date": "2014-06-27T10:53:38Z"}, "committer": {"name": "Trevor Saunders", "email": "tbsaunde@gcc.gnu.org", "date": "2014-06-27T10:53:38Z"}, "message": "remove broken and redundant diagnostic in i386_pe_section_type_flags\n\nvarasm.c is the only caller of this target hook, and it correctly uses a\nhtab to check if the flags returned by the hook are the same as the\nflags it has for the section, and emit a error if not.\n\ngccc/\n\n\t* config/i386/winnt.c (i386_pe_section_type_flags): Remove\n\tredundant diagnostic machinary.\n\nFrom-SVN: r212069", "tree": {"sha": "1262294ef9fc146fb9a6719764ae04200b2b7012", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1262294ef9fc146fb9a6719764ae04200b2b7012"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f012c1abe0935f4136352b7e5fbb862179be42ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f012c1abe0935f4136352b7e5fbb862179be42ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f012c1abe0935f4136352b7e5fbb862179be42ed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f012c1abe0935f4136352b7e5fbb862179be42ed/comments", "author": null, "committer": null, "parents": [{"sha": "3fd269db216915329a3f016e4a7431a82ed564ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fd269db216915329a3f016e4a7431a82ed564ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fd269db216915329a3f016e4a7431a82ed564ef"}], "stats": {"total": 25, "additions": 5, "deletions": 20}, "files": [{"sha": "a7096a5cb1d0b01b4e9288398fff305ab42cd3e1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f012c1abe0935f4136352b7e5fbb862179be42ed/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f012c1abe0935f4136352b7e5fbb862179be42ed/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f012c1abe0935f4136352b7e5fbb862179be42ed", "patch": "@@ -1,3 +1,8 @@\n+2014-06-27  trevor Saunders  <tsaunders@mozilla.com>\n+\n+\t* config/i386/winnt.c (i386_pe_section_type_flags): Remove\n+\tredundant diagnostic machinary.\n+\n 2014-06-27  Richard Biener  <rguenther@suse.de>\n \n \t* tree-ssa-math-opts.c (bswap_replace): Fix"}, {"sha": "8a5d9822b70f33ad54f890db4c089baeddedca9b", "filename": "gcc/config/i386/winnt.c", "status": "modified", "additions": 0, "deletions": 20, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f012c1abe0935f4136352b7e5fbb862179be42ed/gcc%2Fconfig%2Fi386%2Fwinnt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f012c1abe0935f4136352b7e5fbb862179be42ed/gcc%2Fconfig%2Fi386%2Fwinnt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwinnt.c?ref=f012c1abe0935f4136352b7e5fbb862179be42ed", "patch": "@@ -469,19 +469,12 @@ i386_pe_reloc_rw_mask (void)\n unsigned int\n i386_pe_section_type_flags (tree decl, const char *name, int reloc)\n {\n-  static hash_table<pointer_hash<unsigned int> > *htab = NULL;\n   unsigned int flags;\n-  unsigned int **slot;\n \n   /* Ignore RELOC, if we are allowed to put relocated\n      const data into read-only section.  */\n   if (!flag_writable_rel_rdata)\n     reloc = 0;\n-  /* The names we put in the hashtable will always be the unique\n-     versions given to us by the stringtable, so we can just use\n-     their addresses as the keys.  */\n-  if (!htab)\n-    htab = new hash_table<pointer_hash<unsigned int> > (31);\n \n   if (decl && TREE_CODE (decl) == FUNCTION_DECL)\n     flags = SECTION_CODE;\n@@ -499,19 +492,6 @@ i386_pe_section_type_flags (tree decl, const char *name, int reloc)\n   if (decl && DECL_P (decl) && DECL_ONE_ONLY (decl))\n     flags |= SECTION_LINKONCE;\n \n-  /* See if we already have an entry for this section.  */\n-  slot = htab->find_slot ((unsigned int *)name, INSERT);\n-  if (!*slot)\n-    {\n-      *slot = (unsigned int *) xmalloc (sizeof (unsigned int));\n-      **slot = flags;\n-    }\n-  else\n-    {\n-      if (decl && **slot != flags)\n-\terror (\"%q+D causes a section type conflict\", decl);\n-    }\n-\n   return flags;\n }\n "}]}