{"sha": "9376fcd631f21656c9544b5a9355f31618b2d63a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTM3NmZjZDYzMWYyMTY1NmM5NTQ0YjVhOTM1NWYzMTYxOGIyZDYzYQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "1999-12-24T17:27:36Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1999-12-24T17:27:36Z"}, "message": "expr.c (store_constructor): Don't call clear_storage if size is variable.\n\n\t* expr.c (store_constructor): Don't call clear_storage if size is\n\tvariable.\n\nFrom-SVN: r31086", "tree": {"sha": "193ee7989a8a569cd6fffa4bbeec5515ae7296fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/193ee7989a8a569cd6fffa4bbeec5515ae7296fc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9376fcd631f21656c9544b5a9355f31618b2d63a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9376fcd631f21656c9544b5a9355f31618b2d63a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9376fcd631f21656c9544b5a9355f31618b2d63a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9376fcd631f21656c9544b5a9355f31618b2d63a/comments", "author": null, "committer": null, "parents": [{"sha": "272df862c2e34f440ea28c96e0ebe89e1fad160c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/272df862c2e34f440ea28c96e0ebe89e1fad160c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/272df862c2e34f440ea28c96e0ebe89e1fad160c"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "75b33fb94a25b81cd84f64f2fd2af7f8ca925987", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9376fcd631f21656c9544b5a9355f31618b2d63a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9376fcd631f21656c9544b5a9355f31618b2d63a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9376fcd631f21656c9544b5a9355f31618b2d63a", "patch": "@@ -1,3 +1,8 @@\n+Fri Dec 24 12:34:26 1999  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* expr.c (store_constructor): Don't call clear_storage if size is\n+\tvariable.\n+\n 1999-12-24  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* Makefile.in (toplev.o): Depend on loop.h."}, {"sha": "ac498a481e6198d11dd73e0f84329baac4e4bf9e", "filename": "gcc/expr.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9376fcd631f21656c9544b5a9355f31618b2d63a/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9376fcd631f21656c9544b5a9355f31618b2d63a/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=9376fcd631f21656c9544b5a9355f31618b2d63a", "patch": "@@ -4151,9 +4151,10 @@ store_constructor (exp, target, align, cleared, size)\n       /* If the constructor has fewer fields than the structure\n \t or if we are initializing the structure to mostly zeros,\n \t clear the whole structure first.  */\n-      else if ((list_length (CONSTRUCTOR_ELTS (exp))\n-\t\t!= list_length (TYPE_FIELDS (type)))\n-\t       || mostly_zeros_p (exp))\n+      else if (size > 0\n+\t       && ((list_length (CONSTRUCTOR_ELTS (exp))\n+\t\t    != list_length (TYPE_FIELDS (type)))\n+\t\t   || mostly_zeros_p (exp)))\n \t{\n \t  if (! cleared)\n \t    clear_storage (target, GEN_INT (size),\n@@ -4339,7 +4340,7 @@ store_constructor (exp, target, align, cleared, size)\n \t      || 4 * zero_count >= 3 * count)\n \t    need_to_clear = 1;\n \t}\n-      if (need_to_clear)\n+      if (need_to_clear && size > 0)\n \t{\n \t  if (! cleared)\n \t    clear_storage (target, GEN_INT (size),\n@@ -4519,7 +4520,7 @@ store_constructor (exp, target, align, cleared, size)\n \t bzero/memset), and set the bits we want.  */\n        \n       /* Check for all zeros.  */\n-      if (elt == NULL_TREE)\n+      if (elt == NULL_TREE && size > 0)\n \t{\n \t  if (!cleared)\n \t    clear_storage (target, GEN_INT (size),"}]}