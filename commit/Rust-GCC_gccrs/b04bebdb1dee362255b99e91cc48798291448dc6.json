{"sha": "b04bebdb1dee362255b99e91cc48798291448dc6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjA0YmViZGIxZGVlMzYyMjU1Yjk5ZTkxY2M0ODc5ODI5MTQ0OGRjNg==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2017-10-18T20:32:34Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2017-10-18T20:32:34Z"}, "message": "re PR fortran/79795 (Fortran ICE in resolve_symbol starting with r163221)\n\n2017-10-18  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/79795\n\t* resolve.c (resovle_symbol): Change gcc_assert to\n\tsensible error message.\n\n2017-10-18  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/79795\n\t* gfortran.dg/assumed_size_2.f90: New test.\n\nFrom-SVN: r253868", "tree": {"sha": "8964893780b6f124c767119ce4249576f645afd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8964893780b6f124c767119ce4249576f645afd0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b04bebdb1dee362255b99e91cc48798291448dc6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b04bebdb1dee362255b99e91cc48798291448dc6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b04bebdb1dee362255b99e91cc48798291448dc6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b04bebdb1dee362255b99e91cc48798291448dc6/comments", "author": null, "committer": null, "parents": [{"sha": "fe94440235cfaa57ee1c18abfde29c20fa3ff863", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe94440235cfaa57ee1c18abfde29c20fa3ff863", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe94440235cfaa57ee1c18abfde29c20fa3ff863"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "8b9f90eeb0ffec53d7037e969b29a566a42d6b56", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b04bebdb1dee362255b99e91cc48798291448dc6/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b04bebdb1dee362255b99e91cc48798291448dc6/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=b04bebdb1dee362255b99e91cc48798291448dc6", "patch": "@@ -1,3 +1,9 @@\n+2017-10-18  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/79795\n+\t* resolve.c (resovle_symbol): Change gcc_assert to\n+\tsensible error message.\n+\n 2017-10-18  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/82550"}, {"sha": "178854bb0ae8fd0edaab5a089d990bf81edeccc5", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b04bebdb1dee362255b99e91cc48798291448dc6/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b04bebdb1dee362255b99e91cc48798291448dc6/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=b04bebdb1dee362255b99e91cc48798291448dc6", "patch": "@@ -14403,7 +14403,23 @@ resolve_symbol (gfc_symbol *sym)\n \n   if (as)\n     {\n-      gcc_assert (as->type != AS_IMPLIED_SHAPE);\n+      /* If AS_IMPLIED_SHAPE makes it to here, it must be a bad\n+\t specification expression.  */\n+      if (as->type == AS_IMPLIED_SHAPE)\n+\t{\n+\t  int i;\n+\t  for (i=0; i<as->rank; i++)\n+\t    {\n+\t      if (as->lower[i] != NULL && as->upper[i] == NULL)\n+\t\t{\n+\t\t  gfc_error (\"Bad specification for assumed size array at %L\",\n+\t\t\t     &as->lower[i]->where);\n+\t\t  return;\n+\t\t}\n+\t    }\n+\t  gcc_unreachable();\n+\t}\n+\n       if (((as->type == AS_ASSUMED_SIZE && !as->cp_was_assumed)\n \t   || as->type == AS_ASSUMED_SHAPE)\n \t  && !sym->attr.dummy && !sym->attr.select_type_temporary)"}, {"sha": "a792c359d006e610faade255f8fb1ae02d0797e5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b04bebdb1dee362255b99e91cc48798291448dc6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b04bebdb1dee362255b99e91cc48798291448dc6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b04bebdb1dee362255b99e91cc48798291448dc6", "patch": "@@ -1,3 +1,8 @@\n+2017-10-18  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/79795\n+\t* gfortran.dg/assumed_size_2.f90: New test.\n+\n 2017-10-18  Uros Bizjak  <ubizjak@gmail.com>\n \t    Jakub Jelinek  <jakub@redhat.com>\n "}, {"sha": "e9a1185b5273716dd876bd10356281835812af57", "filename": "gcc/testsuite/gfortran.dg/assumed_size_2.f90", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b04bebdb1dee362255b99e91cc48798291448dc6/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_size_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b04bebdb1dee362255b99e91cc48798291448dc6/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_size_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_size_2.f90?ref=b04bebdb1dee362255b99e91cc48798291448dc6", "patch": "@@ -0,0 +1,4 @@\n+! { dg-do compile }\n+subroutine foo(a)\n+  dimension  a(*,*) ! { dg-error \"Bad specification for assumed size array\" }\n+end"}]}