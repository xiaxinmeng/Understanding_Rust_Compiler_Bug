{"sha": "6f9f0ce349db8290053b5e3cd8b7b117cb47aaad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmY5ZjBjZTM0OWRiODI5MDA1M2I1ZTNjZDhiN2IxMTdjYjQ3YWFhZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2008-12-09T10:35:15Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-12-09T10:35:15Z"}, "message": "re PR ada/38450 (ada bootstrap is broken)\n\n\tPR ada/38450\n\t* gcc-interface/utils.c (finish_record_type): Use SET_TYPE_MODE.\n\t* gcc-interface/decl.c (gnat_to_gnu_entity, make_aligning_type):\n\tLikewise.\n\nFrom-SVN: r142588", "tree": {"sha": "2d26d01a8b2486717bc8bb2e8e69385da3d1fcc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2d26d01a8b2486717bc8bb2e8e69385da3d1fcc2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f9f0ce349db8290053b5e3cd8b7b117cb47aaad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f9f0ce349db8290053b5e3cd8b7b117cb47aaad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f9f0ce349db8290053b5e3cd8b7b117cb47aaad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f9f0ce349db8290053b5e3cd8b7b117cb47aaad/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "457691343552e43ffbce002ef2bd4065e09d7c39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/457691343552e43ffbce002ef2bd4065e09d7c39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/457691343552e43ffbce002ef2bd4065e09d7c39"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "166baa82dcd73bcccb1f34e13214130d9705362c", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f9f0ce349db8290053b5e3cd8b7b117cb47aaad/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f9f0ce349db8290053b5e3cd8b7b117cb47aaad/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=6f9f0ce349db8290053b5e3cd8b7b117cb47aaad", "patch": "@@ -1,3 +1,10 @@\n+2008-12-09  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR ada/38450\n+\t* gcc-interface/utils.c (finish_record_type): Use SET_TYPE_MODE.\n+\t* gcc-interface/decl.c (gnat_to_gnu_entity, make_aligning_type):\n+\tLikewise.\n+\n 2008-12-05  Sebastian Pop  <sebastian.pop@amd.com>\n \n \tPR bootstrap/38262"}, {"sha": "20c5fb4686fbd875d803411a49e84501d45d5545", "filename": "gcc/ada/gcc-interface/decl.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f9f0ce349db8290053b5e3cd8b7b117cb47aaad/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f9f0ce349db8290053b5e3cd8b7b117cb47aaad/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.c?ref=6f9f0ce349db8290053b5e3cd8b7b117cb47aaad", "patch": "@@ -2032,7 +2032,7 @@ gnat_to_gnu_entity (Entity_Id gnat_entity, tree gnu_expr, int definition)\n \t   corresponding fat pointer.  */\n \tTREE_TYPE (gnu_type) = TYPE_POINTER_TO (gnu_type)\n \t  = TYPE_REFERENCE_TO (gnu_type) = gnu_fat_type;\n-\tTYPE_MODE (gnu_type) = BLKmode;\n+\tSET_TYPE_MODE (gnu_type, BLKmode);\n \tTYPE_ALIGN (gnu_type) = TYPE_ALIGN (tem);\n \tSET_TYPE_UNCONSTRAINED_ARRAY (gnu_fat_type, gnu_type);\n \n@@ -2873,7 +2873,7 @@ gnat_to_gnu_entity (Entity_Id gnat_entity, tree gnu_expr, int definition)\n \t   that these objects will always be placed in memory.  Do the\n \t   same thing for limited record types.  */\n \tif (Is_Tagged_Type (gnat_entity) || Is_Limited_Record (gnat_entity))\n-\t  TYPE_MODE (gnu_type) = BLKmode;\n+\t  SET_TYPE_MODE (gnu_type, BLKmode);\n \n \t/* If this is a derived type, we must make the alias set of this type\n \t   the same as that of the type we are derived from.  We assume here\n@@ -5572,7 +5572,7 @@ make_aligning_type (tree type, unsigned int align, tree size,\n     = size_binop (PLUS_EXPR, size,\n \t\t  size_int (room + align / BITS_PER_UNIT));\n \n-  TYPE_MODE (record_type) = BLKmode;\n+  SET_TYPE_MODE (record_type, BLKmode);\n \n   copy_alias_set (record_type, type);\n   return record_type;\n@@ -5721,8 +5721,8 @@ make_packable_type (tree type, bool in_record)\n   /* Try harder to get a packable type if necessary, for example\n      in case the record itself contains a BLKmode field.  */\n   if (in_record && TYPE_MODE (new_type) == BLKmode)\n-    TYPE_MODE (new_type)\n-      = mode_for_size_tree (TYPE_SIZE (new_type), MODE_INT, 1);\n+    SET_TYPE_MODE (new_type,\n+\t\t   mode_for_size_tree (TYPE_SIZE (new_type), MODE_INT, 1));\n \n   /* If neither the mode nor the size has shrunk, return the old type.  */\n   if (TYPE_MODE (new_type) == BLKmode && new_size >= size)"}, {"sha": "7b52d9022417567b0ec2e615e01bd23f22eb9f77", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f9f0ce349db8290053b5e3cd8b7b117cb47aaad/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f9f0ce349db8290053b5e3cd8b7b117cb47aaad/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=6f9f0ce349db8290053b5e3cd8b7b117cb47aaad", "patch": "@@ -839,7 +839,7 @@ finish_record_type (tree record_type, tree fieldlist, int rep_level,\n   if (rep_level > 0)\n     {\n       TYPE_ALIGN (record_type) = MAX (BITS_PER_UNIT, TYPE_ALIGN (record_type));\n-      TYPE_MODE (record_type) = BLKmode;\n+      SET_TYPE_MODE (record_type, BLKmode);\n \n       if (!had_size_unit)\n \tTYPE_SIZE_UNIT (record_type) = size_zero_node;"}]}