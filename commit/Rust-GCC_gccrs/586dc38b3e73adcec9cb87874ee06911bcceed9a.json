{"sha": "586dc38b3e73adcec9cb87874ee06911bcceed9a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTg2ZGMzOGIzZTczYWRjZWM5Y2I4Nzg3NGVlMDY5MTFiY2NlZWQ5YQ==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2015-11-18T22:55:17Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2015-11-18T22:55:17Z"}, "message": "re PR fortran/59910 (ICE in gfc_conv_array_initializer, at fortran/trans-array.c:5327)\n\n2015-11-18  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/59910\n\t* primary.c (gfc_match_structure_constructor): Reduce a structure\n\tconstructor in a DATA statement.\n\n2015-11-18  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/59910\n\t* gfortran.dg/pr59910.f90: New test.\n\nFrom-SVN: r230580", "tree": {"sha": "1a4887980cb1965c426ca7e3018bc017d9b8f709", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1a4887980cb1965c426ca7e3018bc017d9b8f709"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/586dc38b3e73adcec9cb87874ee06911bcceed9a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/586dc38b3e73adcec9cb87874ee06911bcceed9a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/586dc38b3e73adcec9cb87874ee06911bcceed9a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/586dc38b3e73adcec9cb87874ee06911bcceed9a/comments", "author": null, "committer": null, "parents": [{"sha": "9231aa17d6498905234d8e35216b324a1b067c8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9231aa17d6498905234d8e35216b324a1b067c8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9231aa17d6498905234d8e35216b324a1b067c8c"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "3bd9743468f2d1e9eb23125f1e96425cdf7b0b2b", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/586dc38b3e73adcec9cb87874ee06911bcceed9a/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/586dc38b3e73adcec9cb87874ee06911bcceed9a/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=586dc38b3e73adcec9cb87874ee06911bcceed9a", "patch": "@@ -1,3 +1,9 @@\n+2015-11-18  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/59910\n+\t* primary.c (gfc_match_structure_constructor): Reduce a structure\n+\tconstructor in a DATA statement.\n+\n 2015-11-18  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/43996"}, {"sha": "841e9e18287dad8766198f5dda1ac29d7bec796d", "filename": "gcc/fortran/primary.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/586dc38b3e73adcec9cb87874ee06911bcceed9a/gcc%2Ffortran%2Fprimary.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/586dc38b3e73adcec9cb87874ee06911bcceed9a/gcc%2Ffortran%2Fprimary.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fprimary.c?ref=586dc38b3e73adcec9cb87874ee06911bcceed9a", "patch": "@@ -2722,6 +2722,12 @@ gfc_match_structure_constructor (gfc_symbol *sym, gfc_expr **result)\n       return MATCH_ERROR;\n     }\n \n+  /* If a structure constructor is in a DATA statement, then each entity\n+     in the structure constructor must be a constant.  Try to reduce the\n+     expression here.  */\n+  if (gfc_in_match_data ())\n+    gfc_reduce_init_expr (e);\n+ \n   *result = e;\n   return MATCH_YES;\n }"}, {"sha": "8109c33cb4bd39bd283829fbe045ae0252277b26", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/586dc38b3e73adcec9cb87874ee06911bcceed9a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/586dc38b3e73adcec9cb87874ee06911bcceed9a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=586dc38b3e73adcec9cb87874ee06911bcceed9a", "patch": "@@ -1,3 +1,8 @@\n+2015-11-18  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/59910\n+\t* gfortran.dg/pr59910.f90: New test.\n+\n 2015-11-18  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/43996"}, {"sha": "2b288e4ff6c35b299afd03510a6fe98484d69cb6", "filename": "gcc/testsuite/gfortran.dg/pr59910.f90", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/586dc38b3e73adcec9cb87874ee06911bcceed9a/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr59910.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/586dc38b3e73adcec9cb87874ee06911bcceed9a/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr59910.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr59910.f90?ref=586dc38b3e73adcec9cb87874ee06911bcceed9a", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+! PR fortran/59910\n+!\n+program main\n+  implicit none\n+  type bar\n+      integer :: limit(1)\n+  end type\n+  type (bar) :: testsuite\n+  data testsuite / bar(reshape(source=[10],shape=[1])) /\n+end"}]}