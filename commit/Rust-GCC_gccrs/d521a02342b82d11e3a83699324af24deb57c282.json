{"sha": "d521a02342b82d11e3a83699324af24deb57c282", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDUyMWEwMjM0MmI4MmQxMWUzYTgzNjk5MzI0YWYyNGRlYjU3YzI4Mg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-11-16T00:17:27Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-11-16T00:17:27Z"}, "message": "(specs, float.h-cross, xlimits.h): Use temporary instead of redirecting output directly to make target.\n\n(specs, float.h-cross, xlimits.h): Use temporary instead of redirecting\noutput directly to make target.\n($(MD_FILE), xsys-protos.h): Likewise.\n(mostlyclean): Remove any of these temporaries.\n\nFrom-SVN: r8450", "tree": {"sha": "835462eb79c8fe1818a01b1d87a0f0e8c37aa1da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/835462eb79c8fe1818a01b1d87a0f0e8c37aa1da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d521a02342b82d11e3a83699324af24deb57c282", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d521a02342b82d11e3a83699324af24deb57c282", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d521a02342b82d11e3a83699324af24deb57c282", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d521a02342b82d11e3a83699324af24deb57c282/comments", "author": null, "committer": null, "parents": [{"sha": "f9a329089bad9dcdc86a9674d893133a4e791031", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9a329089bad9dcdc86a9674d893133a4e791031", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9a329089bad9dcdc86a9674d893133a4e791031"}], "stats": {"total": 22, "additions": 15, "deletions": 7}, "files": [{"sha": "167d14968a84b8aa52649fe1e0927c6d766cc64d", "filename": "gcc/Makefile.in", "status": "modified", "additions": 15, "deletions": 7, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d521a02342b82d11e3a83699324af24deb57c282/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d521a02342b82d11e3a83699324af24deb57c282/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=d521a02342b82d11e3a83699324af24deb57c282", "patch": "@@ -622,7 +622,8 @@ xgcc: gcc.o version.o $(LIBDEPS)\n \n # Dump a specs file to make -B./ read these specs over installed ones.\n specs: xgcc\n-\t$(GCC_FOR_TARGET) -dumpspecs > specs\n+\t$(GCC_FOR_TARGET) -dumpspecs > tmp-specs\n+\tmv tmp-specs specs\n \n # We do want to create an executable named `xgcc', so we can use it to\n # compile libgcc2.a.\n@@ -647,7 +648,8 @@ float.h-nat: enquire\n \n # Create a dummy float.h source for a cross-compiler.\n float.h-cross:\n-\techo \"#error float.h values not known for cross-compiler\" > float.h-cross\n+\techo \"#error float.h values not known for cross-compiler\" > t-float.h-cross\n+\tmv t-float.h-cross float.h-cross\n \n # Used to compile enquire with standard cc, but have forgotten why.\n # Let's try with GCC.\n@@ -662,10 +664,11 @@ enquire.o: $(srcdir)/enquire.c $(GCC_PASSES) stmp-int-hdrs\n # Build the version of limits.h that we will install.\n xlimits.h: glimits.h limitx.h limity.h\n \tif [ -f $(SYSTEM_HEADER_DIR)/limits.h ] ; then \\\n-\t  cat $(srcdir)/limitx.h $(srcdir)/glimits.h $(srcdir)/limity.h > xlimits.h; \\\n+\t  cat $(srcdir)/limitx.h $(srcdir)/glimits.h $(srcdir)/limity.h > tmp-xlimits.h; \\\n \telse \\\n-\t  cat $(srcdir)/glimits.h > xlimits.h; \\\n+\t  cat $(srcdir)/glimits.h > tmp-xlimits.h; \\\n \tfi\n+\tmv tmp-xlimits.h xlimits.h\n \f\n # Build libgcc.a.\n # This is done in two parts because some functions, in libgcc1.c,\n@@ -1289,7 +1292,8 @@ stamp-output : md genoutput $(srcdir)/move-if-change\n # Pass the md file through cpp if the target requests it.\n $(MD_FILE): $(MD_DEPS)\n \trm -f $@\n-\t$(MD_CPP) $(MD_CPPFLAGS) md.pre-cpp | sed 's/^# /; /g' > $@\n+\t$(MD_CPP) $(MD_CPPFLAGS) md.pre-cpp | sed 's/^# /; /g' > tmp-$@\n+\tmv tmp-$@ $@\n \n genconfig : genconfig.o $(HOST_RTL) $(HOST_LIBDEPS)\n \t$(HOST_CC) $(HOST_CFLAGS) $(HOST_LDFLAGS) -o genconfig \\\n@@ -1673,10 +1677,12 @@ scan.o: scan.c scan.h hconfig.h\n \t$(HOST_CC) -c $(HOST_CFLAGS) $(HOST_CPPFLAGS) $(INCLUDES) $(srcdir)/scan.c\n \n xsys-protos.h: $(GCC_PASSES) $(srcdir)/sys-protos.h deduced.h gen-protos Makefile\n-\tcat deduced.h $(srcdir)/sys-protos.h > fixtmp.c\n+\tcat deduced.h $(srcdir)/sys-protos.h > tmp-fixtmp.c\n+\tmv tmp-fixtmp.c fixtmp.c\n \t$(GCC_FOR_TARGET) fixtmp.c -w -U__SIZE_TYPE__ -U__PTRDIFF_TYPE_ -U__WCHAR_TYPE__ -E \\\n \t  | sed -e 's/\t/ /g' -e 's/ *(/ (/g' -e 's/ [ ]*/ /g' -e 's/( )/()/' \\\n-\t  | ./gen-protos >xsys-protos.h\n+\t  | ./gen-protos >xsys-protos.hT\n+\tmv xsys-protos.hT xsys-protos.h\n \trm -rf fixtmp.c\n \n fix-header: fix-header.o scan-decls.o scan.o xsys-protos.h $(HOST_LIBDEPS)\n@@ -1775,6 +1781,8 @@ mostlyclean: bytecode.mostlyclean lang.mostlyclean\n \t-rm -f tmp-float.h tmp-gcc.xtar.gz\n \t-rm -f tmp-foo1 tmp-foo2 tmp-proto.* tmp-unproto.1 tmp-SYSCALLS.s\n \t-rm -f tmp-c-parse.y tmp-objc-parse.y tmp-gperf.h\n+\t-rm -f tmp-specs t-float.h-cross tmp-xlimits.h\n+\t-rm -f tmp-fixtmp.c xsys-protos.hT\n # Delete the stamp files.\n \t-rm -f stamp-* tmp-*\n \t-rm -f */stamp-* */tmp-*"}]}