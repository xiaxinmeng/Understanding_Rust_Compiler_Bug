{"sha": "86b38416af1ff5483510c0e6179d583643e8bb16", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODZiMzg0MTZhZjFmZjU0ODM1MTBjMGU2MTc5ZDU4MzY0M2U4YmIxNg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-08-14T13:51:43Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-08-14T13:51:43Z"}, "message": "(print_node{,_brief}): Use REAL_VALUE_TO_DECIMAL to print REAL_CST\nifdef REAL_ARITHMETIC.\n\nFrom-SVN: r7916", "tree": {"sha": "fe5d712140286e4fbfc60660d4c41f88e8a39c2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe5d712140286e4fbfc60660d4c41f88e8a39c2d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/86b38416af1ff5483510c0e6179d583643e8bb16", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86b38416af1ff5483510c0e6179d583643e8bb16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86b38416af1ff5483510c0e6179d583643e8bb16", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86b38416af1ff5483510c0e6179d583643e8bb16/comments", "author": null, "committer": null, "parents": [{"sha": "066aca280f5d83e2afcf755e2627e4d40571aef7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/066aca280f5d83e2afcf755e2627e4d40571aef7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/066aca280f5d83e2afcf755e2627e4d40571aef7"}], "stats": {"total": 55, "additions": 43, "deletions": 12}, "files": [{"sha": "7419b53cf072eead158685034f182e31148bb1b7", "filename": "gcc/print-tree.c", "status": "modified", "additions": 43, "deletions": 12, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86b38416af1ff5483510c0e6179d583643e8bb16/gcc%2Fprint-tree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86b38416af1ff5483510c0e6179d583643e8bb16/gcc%2Fprint-tree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-tree.c?ref=86b38416af1ff5483510c0e6179d583643e8bb16", "patch": "@@ -144,8 +144,22 @@ print_node_brief (file, prefix, node, indent)\n     }\n   if (TREE_CODE (node) == REAL_CST)\n     {\n-#ifndef REAL_IS_NOT_DOUBLE\n-      fprintf (file, \" %e\", TREE_REAL_CST (node));\n+      REAL_VALUE_TYPE d = TREE_REAL_CST (node);\n+      if (TREE_OVERFLOW (node))\n+\tfprintf (file, \" overflow\");\n+\n+#if !defined(REAL_IS_NOT_DOUBLE) || defined(REAL_ARITHMETIC)\n+      if (REAL_VALUE_ISINF (d))\n+\tfprintf (file, \" Inf\");\n+      else if (REAL_VALUE_ISNAN (d))\n+\tfprintf (file, \" Nan\");\n+      else\n+\t{\n+\t  char string[100];\n+\n+\t  REAL_VALUE_TO_DECIMAL (d, \"%e\", string);\n+\t  fprintf (file, \" %s\", string);\n+\t}\n #else\n       {\n \tint i;\n@@ -155,7 +169,7 @@ print_node_brief (file, prefix, node, indent)\n \t  fprintf (file, \"%02x\", *p++);\n \tfprintf (file, \"\");\n       }\n-#endif /* REAL_IS_NOT_DOUBLE */\n+#endif\n     }\n \n   fprintf (file, \">\");\n@@ -605,17 +619,34 @@ print_node (file, prefix, node, indent)\n \t  break;\n \n \tcase REAL_CST:\n-#ifndef REAL_IS_NOT_DOUBLE\n-\t  fprintf (file, \" %e\", TREE_REAL_CST (node));\n-#else\n \t  {\n-\t    char *p = (char *) &TREE_REAL_CST (node);\n-\t    fprintf (file, \" 0x\");\n-\t    for (i = 0; i < sizeof TREE_REAL_CST (node); i++)\n-\t      fprintf (file, \"%02x\", *p++);\n-\t    fprintf (file, \"\");\n+\t    REAL_VALUE_TYPE d = TREE_REAL_CST (node);\n+\t    if (TREE_OVERFLOW (node))\n+\t      fprintf (file, \" overflow\");\n+\n+#if !defined(REAL_IS_NOT_DOUBLE) || defined(REAL_ARITHMETIC)\n+\t    if (REAL_VALUE_ISINF (d))\n+\t      fprintf (file, \" Inf\");\n+\t    else if (REAL_VALUE_ISNAN (d))\n+\t      fprintf (file, \" Nan\");\n+\t    else\n+\t      {\n+\t\tchar string[100];\n+\n+\t\tREAL_VALUE_TO_DECIMAL (d, \"%e\", string);\n+\t\tfprintf (file, \" %s\", string);\n+\t      }\n+#else\n+\t    {\n+\t      int i;\n+\t      unsigned char *p = (unsigned char *) &TREE_REAL_CST (node);\n+\t      fprintf (file, \" 0x\");\n+\t      for (i = 0; i < sizeof TREE_REAL_CST (node); i++)\n+\t\tfprintf (file, \"%02x\", *p++);\n+\t      fprintf (file, \"\");\n+\t    }\n+#endif\n \t  }\n-#endif /* REAL_IS_NOT_DOUBLE */\n \t  break;\n \n \tcase COMPLEX_CST:"}]}