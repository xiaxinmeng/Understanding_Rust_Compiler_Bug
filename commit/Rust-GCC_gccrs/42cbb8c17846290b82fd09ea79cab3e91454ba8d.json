{"sha": "42cbb8c17846290b82fd09ea79cab3e91454ba8d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDJjYmI4YzE3ODQ2MjkwYjgyZmQwOWVhNzljYWIzZTkxNDU0YmE4ZA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-14T23:10:22Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-14T23:10:22Z"}, "message": "Don't crash on invalid closure.\n\nFrom-SVN: r167821", "tree": {"sha": "11438e72ab7d38f129c7ad13faa05e91a005c4ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/11438e72ab7d38f129c7ad13faa05e91a005c4ca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/42cbb8c17846290b82fd09ea79cab3e91454ba8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42cbb8c17846290b82fd09ea79cab3e91454ba8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/42cbb8c17846290b82fd09ea79cab3e91454ba8d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42cbb8c17846290b82fd09ea79cab3e91454ba8d/comments", "author": null, "committer": null, "parents": [{"sha": "cad51bedb53a97dfce1915ff32d95e4aacf5bc93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cad51bedb53a97dfce1915ff32d95e4aacf5bc93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cad51bedb53a97dfce1915ff32d95e4aacf5bc93"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "67f9949f695b735c0179ad79c0e6cbc974e9611e", "filename": "gcc/go/gofrontend/gogo-tree.cc", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42cbb8c17846290b82fd09ea79cab3e91454ba8d/gcc%2Fgo%2Fgofrontend%2Fgogo-tree.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42cbb8c17846290b82fd09ea79cab3e91454ba8d/gcc%2Fgo%2Fgofrontend%2Fgogo-tree.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo-tree.cc?ref=42cbb8c17846290b82fd09ea79cab3e91454ba8d", "patch": "@@ -1313,14 +1313,19 @@ Function::get_or_make_decl(Gogo* gogo, Named_object* no, tree id)\n \t      push_struct_function(decl);\n \n \t      tree closure_decl = this->closure_var_->get_tree(gogo, no);\n+\t      if (closure_decl == error_mark_node)\n+\t\tthis->fndecl_ = error_mark_node;\n+\t      else\n+\t\t{\n+\t\t  DECL_ARTIFICIAL(closure_decl) = 1;\n+\t\t  DECL_IGNORED_P(closure_decl) = 1;\n+\t\t  TREE_USED(closure_decl) = 1;\n+\t\t  DECL_ARG_TYPE(closure_decl) = TREE_TYPE(closure_decl);\n+\t\t  TREE_READONLY(closure_decl) = 1;\n \n-\t      DECL_ARTIFICIAL(closure_decl) = 1;\n-\t      DECL_IGNORED_P(closure_decl) = 1;\n-\t      TREE_USED(closure_decl) = 1;\n-\t      DECL_ARG_TYPE(closure_decl) = TREE_TYPE(closure_decl);\n-\t      TREE_READONLY(closure_decl) = 1;\n+\t\t  DECL_STRUCT_FUNCTION(decl)->static_chain_decl = closure_decl;\n+\t\t}\n \n-\t      DECL_STRUCT_FUNCTION(decl)->static_chain_decl = closure_decl;\n \t      pop_cfun();\n \t    }\n \t}"}]}