{"sha": "777351a5fdf460dc2a4a2ed6c63a1e0b899512b7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzc3MzUxYTVmZGY0NjBkYzJhNGEyZWQ2YzYzYTFlMGI4OTk1MTJiNw==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2010-04-01T18:54:30Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2010-04-01T18:54:30Z"}, "message": "re PR debug/43325 (C++ external inner reference does not override outer scope)\n\nFix for PR debug/43325\n\ngcc/ChangeLog:\n\tPR debug/43325\n\t* dwarf2out.c (gen_variable_die): Allow debug info for variable\n\tre-declaration when it happens in a function.\n\ngcc/testsuite/ChangeLog:\n\tPR debug/43325\n\t* c-c++-common/dwarf2/redeclaration-1.C: New test.\n\nFrom-SVN: r157928", "tree": {"sha": "b6732222ccf4fafc095cadf5cc496e8153d3b0ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b6732222ccf4fafc095cadf5cc496e8153d3b0ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7/comments", "author": null, "committer": null, "parents": [{"sha": "d4b5fb2238f98fedbf123d80714b2ab1b0ceff2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4b5fb2238f98fedbf123d80714b2ab1b0ceff2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4b5fb2238f98fedbf123d80714b2ab1b0ceff2d"}], "stats": {"total": 35, "additions": 32, "deletions": 3}, "files": [{"sha": "e78624faf63848933a015dadf57054e14e61ed30", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=777351a5fdf460dc2a4a2ed6c63a1e0b899512b7", "patch": "@@ -1,3 +1,9 @@\n+2010-04-01  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR debug/43325\n+\t* dwarf2out.c (gen_variable_die): Allow debug info for variable\n+\tre-declaration when it happens in a function.\n+\n 2010-04-01  Aldy Hernandez  <aldyh@redhat.com>\n \n \t* cgraph.c (cgraph_add_function_insertion_hook): Update comment."}, {"sha": "5faa58c6c763ee7e51e232f985cd13733d990dd9", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=777351a5fdf460dc2a4a2ed6c63a1e0b899512b7", "patch": "@@ -18283,9 +18283,9 @@ gen_variable_die (tree decl, tree origin, dw_die_ref context_die)\n \n   /* If the compiler emitted a definition for the DECL declaration\n      and if we already emitted a DIE for it, don't emit a second\n-     DIE for it again.  */\n-  if (old_die\n-      && declaration)\n+     DIE for it again. Allow re-declarations of DECLs that are\n+     inside functions, though.  */\n+  if (old_die && declaration && !local_scope_p (context_die))\n     return;\n \n   /* For static data members, the declaration in the class is supposed"}, {"sha": "8cefbf4125a658aa1eb7cbc662c1902b104158b6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=777351a5fdf460dc2a4a2ed6c63a1e0b899512b7", "patch": "@@ -1,3 +1,8 @@\n+2010-04-01  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR debug/43325\n+\t* c-c++-common/dwarf2/redeclaration-1.C: New test.\n+\n 2010-04-01  Jason Merrill  <jason@redhat.com>\n \n \t* g++.dg/cpp0x/initlist12.C: Adjust expected errors."}, {"sha": "8aaff8ef2ea04321cb93bd83da2d537f77b8df86", "filename": "gcc/testsuite/c-c++-common/dwarf2/redeclaration-1.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fdwarf2%2Fredeclaration-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/777351a5fdf460dc2a4a2ed6c63a1e0b899512b7/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fdwarf2%2Fredeclaration-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fdwarf2%2Fredeclaration-1.C?ref=777351a5fdf460dc2a4a2ed6c63a1e0b899512b7", "patch": "@@ -0,0 +1,18 @@\n+// Origin: PR debug/43325\n+// { dg-options \"-g -dA\" }\n+// { dg-do compile }\n+\n+// { dg-final { scan-assembler-times \"\\[^\\n\\r\\]*\\\\(DIE \\[^\\n\\r\\]*DW_TAG_lexical_block\\\\)\\[\\n\\r\\]{1,2}\\[^\\n\\r\\]*DW_AT_low_pc\\[\\n\\r\\]{1,2}\\[^\\n\\r\\]*DW_AT_high_pc\\[\\n\\r\\]{1,2}\\[^\\n\\r\\]*\\\\(DIE \\[^\\n\\r\\]*DW_TAG_variable\\\\)\\[\\n\\r\\]{1,2}\\[^\\n\\r\\]*DW_AT_name\" 2 } }\n+\n+namespace S\n+{\n+  int\n+  f()\n+  {\n+    int i = 42;\n+    {\n+      extern int i;\n+      return i;\n+    }\n+  }\n+}"}]}