{"sha": "ce9b5c09a644ffd213cb00f378dfe5cf5a9dd7b8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2U5YjVjMDlhNjQ0ZmZkMjEzY2IwMGYzNzhkZmU1Y2Y1YTlkZDdiOA==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2020-04-22T06:34:49Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2020-04-22T06:34:49Z"}, "message": "testsuite: Handle --save-temps in schedule-cleanups\n\nSome tests use --save-temps, but schedule-cleanups strictly matches\n-save-temps, so we leave many temporary files after validation.\nInstead of fixing every offending testcase, it's simpler and\nfuture-proof to make schedule-cleanups handle both --save-temps and\n-save-temps.\n\n2020-04-22  Christophe Lyon  <christophe.lyon@linaro.org>\n\n\tgcc/testsuite/\n\t* lib/gcc-dg.exp (schedule-cleanups): Accept --save-temps.", "tree": {"sha": "2120fdb5b788f9bb13ecf76292cd58e8d171a557", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2120fdb5b788f9bb13ecf76292cd58e8d171a557"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce9b5c09a644ffd213cb00f378dfe5cf5a9dd7b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce9b5c09a644ffd213cb00f378dfe5cf5a9dd7b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce9b5c09a644ffd213cb00f378dfe5cf5a9dd7b8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce9b5c09a644ffd213cb00f378dfe5cf5a9dd7b8/comments", "author": null, "committer": null, "parents": [{"sha": "aedd04caa945260ea77fd22f29b77292f7dba72e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aedd04caa945260ea77fd22f29b77292f7dba72e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aedd04caa945260ea77fd22f29b77292f7dba72e"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "0689f202f646fdda29d3e1201cc83ed4bf3871ba", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce9b5c09a644ffd213cb00f378dfe5cf5a9dd7b8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce9b5c09a644ffd213cb00f378dfe5cf5a9dd7b8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ce9b5c09a644ffd213cb00f378dfe5cf5a9dd7b8", "patch": "@@ -1,3 +1,7 @@\n+2020-04-22  Christophe Lyon  <christophe.lyon@linaro.org>\n+\n+\t* lib/gcc-dg.exp (schedule-cleanups): Accept --save-temps.\n+\n 2020-04-22  Martin Sebor  <msebor@redhat.com>\n \n \tPR c++/94510"}, {"sha": "27cc7c19625d8bff12268de16ec0c20d558394b7", "filename": "gcc/testsuite/lib/gcc-dg.exp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce9b5c09a644ffd213cb00f378dfe5cf5a9dd7b8/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce9b5c09a644ffd213cb00f378dfe5cf5a9dd7b8/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp?ref=ce9b5c09a644ffd213cb00f378dfe5cf5a9dd7b8", "patch": "@@ -171,7 +171,7 @@ proc schedule-cleanups { opts } {\n \tverbose \"dg-keep-saved-temps ${keep_saved_temps_suffixes}\" 2\n     }\n     # -save-temps -> cleanup-saved-temps()\n-    if [regexp -- {(^|\\s+)-save-temps(\\s+|$)} $opts] {\n+    if [regexp -- {(^|\\s+)-?-save-temps(\\s+|$)} $opts] {\n \tverbose \"Cleanup -save-temps seen\" 4\n \tif [info exists keep_saved_temps_suffixes] {\n \t    append finalcode \"cleanup-saved-temps ${keep_saved_temps_suffixes}\\n\""}]}