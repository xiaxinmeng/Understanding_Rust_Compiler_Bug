{"sha": "2c73b7640dba91c6041404ab3e3b4f629ad73ad1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM3M2I3NjQwZGJhOTFjNjA0MTQwNGFiM2UzYjRmNjI5YWQ3M2FkMQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-03-09T14:10:58Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-03-09T14:10:58Z"}, "message": "re PR target/70049 (Error: operand size mismatch for `vpextrw' (wrong assembly generated) with -masm=intel)\n\n\tPR target/70049\n\t* config/i386/sse.md (*vec_extract<mode>): Use %0 instead of %k0\n\tif the operand is \"m\".\n\n\t* gcc.target/i386/pr70049.c: New test.\n\nFrom-SVN: r234085", "tree": {"sha": "af1ff9844b5e0db2c7d1aee3c639b2dc9d09787b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/af1ff9844b5e0db2c7d1aee3c639b2dc9d09787b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c73b7640dba91c6041404ab3e3b4f629ad73ad1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c73b7640dba91c6041404ab3e3b4f629ad73ad1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c73b7640dba91c6041404ab3e3b4f629ad73ad1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c73b7640dba91c6041404ab3e3b4f629ad73ad1/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c06d25bb3377e99191c0517b86ba210673bc9cf1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c06d25bb3377e99191c0517b86ba210673bc9cf1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c06d25bb3377e99191c0517b86ba210673bc9cf1"}], "stats": {"total": 35, "additions": 34, "deletions": 1}, "files": [{"sha": "c99bf6415b24e8c0129e011e55b677a8f185d95f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c73b7640dba91c6041404ab3e3b4f629ad73ad1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c73b7640dba91c6041404ab3e3b4f629ad73ad1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2c73b7640dba91c6041404ab3e3b4f629ad73ad1", "patch": "@@ -1,3 +1,9 @@\n+2016-03-09  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/70049\n+\t* config/i386/sse.md (*vec_extract<mode>): Use %0 instead of %k0\n+\tif the operand is \"m\".\n+\n 2016-03-09  Nathan Sidwell  <nathan@acm.org>\n \n \t* config/nvptx/nvptx.c (nvptx_option_override): Don't kill debug level."}, {"sha": "00e385aee2a37bdf3f79bdb768e8a98659c730a2", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c73b7640dba91c6041404ab3e3b4f629ad73ad1/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c73b7640dba91c6041404ab3e3b4f629ad73ad1/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=2c73b7640dba91c6041404ab3e3b4f629ad73ad1", "patch": "@@ -13307,7 +13307,9 @@\n \t  (parallel\n \t    [(match_operand:SI 2 \"const_0_to_<ssescalarnummask>_operand\")])))]\n   \"TARGET_SSE2\"\n-  \"%vpextr<ssemodesuffix>\\t{%2, %1, %k0|%k0, %1, %2}\"\n+  \"@\n+   %vpextr<ssemodesuffix>\\t{%2, %1, %k0|%k0, %1, %2}\n+   %vpextr<ssemodesuffix>\\t{%2, %1, %0|%0, %1, %2}\"\n   [(set_attr \"isa\" \"*,sse4\")\n    (set_attr \"type\" \"sselog1\")\n    (set_attr \"prefix_data16\" \"1\")"}, {"sha": "131ed75c624e7fb0132aa6a857aaafc3cbca6840", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c73b7640dba91c6041404ab3e3b4f629ad73ad1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c73b7640dba91c6041404ab3e3b4f629ad73ad1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2c73b7640dba91c6041404ab3e3b4f629ad73ad1", "patch": "@@ -1,3 +1,8 @@\n+2016-03-09  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/70049\n+\t* gcc.target/i386/pr70049.c: New test.\n+\n 2016-03-09  Richard Biener  <rguenther@suse.de>\n \n \tPR c/70143"}, {"sha": "a659bb35b0d0a464d76e95395d2ad56c1c80f2f6", "filename": "gcc/testsuite/gcc.target/i386/pr70049.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c73b7640dba91c6041404ab3e3b4f629ad73ad1/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70049.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c73b7640dba91c6041404ab3e3b4f629ad73ad1/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70049.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70049.c?ref=2c73b7640dba91c6041404ab3e3b4f629ad73ad1", "patch": "@@ -0,0 +1,20 @@\n+/* PR target/70049 */\n+/* { dg-do assemble { target avx } } */\n+/* { dg-require-effective-target masm_intel } */\n+/* { dg-options \"-Og -mavx -masm=intel\" } */\n+\n+typedef unsigned short A;\n+typedef unsigned short B __attribute__ ((vector_size (32)));\n+typedef unsigned int C;\n+typedef unsigned int D __attribute__ ((vector_size (32)));\n+typedef unsigned long long E;\n+typedef unsigned long long F __attribute__ ((vector_size (32)));\n+\n+C\n+foo(A a, C b, E c, F d, B e, D f, F g)\n+{\n+  b <<= 28;\n+  e[1] += b;\n+  d %= (F) { 0, f[4] } | 1;\n+  return a + b + c + d[3] + e[1] + g[3];\n+}"}]}