{"sha": "0ab03ea08c3886ad009afda41f3cd2df7733cfb1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGFiMDNlYTA4YzM4ODZhZDAwOWFmZGE0MWYzY2QyZGY3NzMzY2ZiMQ==", "commit": {"author": {"name": "Alexander Ivchenko", "email": "alexander.ivchenko@intel.com", "date": "2014-10-14T08:52:11Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2014-10-14T08:52:11Z"}, "message": "AVX-512. 74/n. Add byte/word max/mix reduction.\n\ngcc/\n\t* config/i386/i386.c\n\t(emit_reduc_half): Handle V64QI and V32HI mode.\n\t* config/i386/sse.md\n\t(define_mode_iterator VI_AVX512BW): New.\n\t(define_expand \"reduc_<code>_<mode>\"): Use VI512_48F_12BW.\n\nCo-Authored-By: Andrey Turetskiy <andrey.turetskiy@intel.com>\nCo-Authored-By: Anna Tikhonova <anna.tikhonova@intel.com>\nCo-Authored-By: Ilya Tocar <ilya.tocar@intel.com>\nCo-Authored-By: Ilya Verbin <ilya.verbin@intel.com>\nCo-Authored-By: Kirill Yukhin <kirill.yukhin@intel.com>\nCo-Authored-By: Maxim Kuznetsov <maxim.kuznetsov@intel.com>\nCo-Authored-By: Michael Zolotukhin <michael.v.zolotukhin@intel.com>\n\nFrom-SVN: r216192", "tree": {"sha": "dce6bb9a9e836ae11628ebd98de3cf85ed807553", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dce6bb9a9e836ae11628ebd98de3cf85ed807553"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ab03ea08c3886ad009afda41f3cd2df7733cfb1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ab03ea08c3886ad009afda41f3cd2df7733cfb1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ab03ea08c3886ad009afda41f3cd2df7733cfb1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ab03ea08c3886ad009afda41f3cd2df7733cfb1/comments", "author": null, "committer": null, "parents": [{"sha": "805e20ad3883e0fd3a11454d40460e1505690fe9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/805e20ad3883e0fd3a11454d40460e1505690fe9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/805e20ad3883e0fd3a11454d40460e1505690fe9"}], "stats": {"total": 25, "additions": 22, "deletions": 3}, "files": [{"sha": "79dcc11a005beb114c48bbba6c0c2128f0374add", "filename": "gcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ab03ea08c3886ad009afda41f3cd2df7733cfb1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ab03ea08c3886ad009afda41f3cd2df7733cfb1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0ab03ea08c3886ad009afda41f3cd2df7733cfb1", "patch": "@@ -1,3 +1,18 @@\n+2014-10-14  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n+\t    Maxim Kuznetsov  <maxim.kuznetsov@intel.com>\n+\t    Anna Tikhonova  <anna.tikhonova@intel.com>\n+\t    Ilya Tocar  <ilya.tocar@intel.com>\n+\t    Andrey Turetskiy  <andrey.turetskiy@intel.com>\n+\t    Ilya Verbin  <ilya.verbin@intel.com>\n+\t    Kirill Yukhin  <kirill.yukhin@intel.com>\n+\t    Michael Zolotukhin  <michael.v.zolotukhin@intel.com>\n+\n+\t* config/i386/i386.c\n+\t(emit_reduc_half): Handle V64QI and V32HI mode.\n+\t* config/i386/sse.md\n+\t(define_mode_iterator VI_AVX512BW): New.\n+\t(define_expand \"reduc_<code>_<mode>\"): Use VI512_48F_12BW.\n+\n 2014-10-14  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n \t    Maxim Kuznetsov  <maxim.kuznetsov@intel.com>\n \t    Anna Tikhonova  <anna.tikhonova@intel.com>"}, {"sha": "9deee91bc16d95a575bf3bd26c5e18a503e4b908", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ab03ea08c3886ad009afda41f3cd2df7733cfb1/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ab03ea08c3886ad009afda41f3cd2df7733cfb1/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=0ab03ea08c3886ad009afda41f3cd2df7733cfb1", "patch": "@@ -41210,6 +41210,8 @@ emit_reduc_half (rtx dest, rtx src, int i)\n \t\t\t\t    GEN_INT (i / 2));\n \t}\n       break;\n+    case V64QImode:\n+    case V32HImode:\n     case V16SImode:\n     case V16SFmode:\n     case V8DImode:"}, {"sha": "fa2babf3f8eaa0e94f9682ad383b079765457396", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ab03ea08c3886ad009afda41f3cd2df7733cfb1/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ab03ea08c3886ad009afda41f3cd2df7733cfb1/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=0ab03ea08c3886ad009afda41f3cd2df7733cfb1", "patch": "@@ -514,6 +514,8 @@\n (define_mode_iterator VI48_256 [V8SI V4DI])\n (define_mode_iterator VI48_512 [V16SI V8DI])\n (define_mode_iterator VI4_256_8_512 [V8SI V8DI])\n+(define_mode_iterator VI_AVX512BW\n+  [V16SI V8DI (V32HI \"TARGET_AVX512BW\") (V64QI \"TARGET_AVX512BW\")])\n \n ;; Int-float size matches\n (define_mode_iterator VI4F_128 [V4SI V4SF])\n@@ -2337,9 +2339,9 @@\n })\n \n (define_expand \"reduc_<code>_<mode>\"\n-  [(umaxmin:VI48_512\n-     (match_operand:VI48_512 0 \"register_operand\")\n-     (match_operand:VI48_512 1 \"register_operand\"))]\n+  [(umaxmin:VI_AVX512BW\n+     (match_operand:VI_AVX512BW 0 \"register_operand\")\n+     (match_operand:VI_AVX512BW 1 \"register_operand\"))]\n   \"TARGET_AVX512F\"\n {\n   ix86_expand_reduc (gen_<code><mode>3, operands[0], operands[1]);"}]}