{"sha": "dd629845b0931912853a26bf8f8e05adf9f048a2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ2Mjk4NDViMDkzMTkxMjg1M2EyNmJmOGY4ZTA1YWRmOWYwNDhhMg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2017-03-20T17:43:08Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-03-20T17:43:08Z"}, "message": "i386.c (ix86_function_regparm): Save an extra register for -fsplit-stack with DECL_STATIC_CHAIN.\n\n\t* config/i386/i386.c (ix86_function_regparm): Save an extra\n\tregister for -fsplit-stack with DECL_STATIC_CHAIN.\n\nFrom-SVN: r246286", "tree": {"sha": "2f86b99eeb5b9cd8832bcb6d5c42f7815353cf95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f86b99eeb5b9cd8832bcb6d5c42f7815353cf95"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd629845b0931912853a26bf8f8e05adf9f048a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd629845b0931912853a26bf8f8e05adf9f048a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd629845b0931912853a26bf8f8e05adf9f048a2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd629845b0931912853a26bf8f8e05adf9f048a2/comments", "author": null, "committer": null, "parents": [{"sha": "8026a5ae9c090029c51657651982603ca6fc381a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8026a5ae9c090029c51657651982603ca6fc381a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8026a5ae9c090029c51657651982603ca6fc381a"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "1385d92bcdf2535fd66422c13710391bf42d171a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd629845b0931912853a26bf8f8e05adf9f048a2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd629845b0931912853a26bf8f8e05adf9f048a2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dd629845b0931912853a26bf8f8e05adf9f048a2", "patch": "@@ -1,3 +1,8 @@\n+2017-03-20  Ian Lance Taylor  <iant@google.com>\n+\n+\t* config/i386/i386.c (ix86_function_regparm): Save an extra\n+\tregister for -fsplit-stack with DECL_STATIC_CHAIN.\n+\n 2017-03-17  Palmer Dabbelt  <palmer@dabbelt.com>\n \n \tPR target/79912"}, {"sha": "259f97b5a10e4580cc4405891398051fc29e6fed", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd629845b0931912853a26bf8f8e05adf9f048a2/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd629845b0931912853a26bf8f8e05adf9f048a2/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=dd629845b0931912853a26bf8f8e05adf9f048a2", "patch": "@@ -7975,8 +7975,14 @@ ix86_function_regparm (const_tree type, const_tree decl)\n \t\tlocal_regparm = 2;\n \n \t      /* Save a register for the split stack.  */\n-\t      if (local_regparm == 3 && flag_split_stack)\n-\t\tlocal_regparm = 2;\n+\t      if (flag_split_stack)\n+\t\t{\n+\t\t  if (local_regparm == 3)\n+\t\t    local_regparm = 2;\n+\t\t  else if (local_regparm == 2\n+\t\t\t   && DECL_STATIC_CHAIN (target->decl))\n+\t\t    local_regparm = 1;\n+\t\t}\n \n \t      /* Each fixed register usage increases register pressure,\n \t\t so less registers should be used for argument passing."}]}