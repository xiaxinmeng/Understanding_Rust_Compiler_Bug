{"sha": "31f74accb27dfe58e1926dbbcb0b9d57e55bde42", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzFmNzRhY2NiMjdkZmU1OGUxOTI2ZGJiY2IwYjlkNTdlNTViZGU0Mg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2005-07-25T07:51:12Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2005-07-25T07:51:12Z"}, "message": "re PR fortran/20063 (n*'xxxx' disables padding)\n\n\tPR fortran/20063\n\t* data.c (gfc_assign_data_value_range): Call\n\tcreate_character_initializer if last_ts is a character type.\n\n\t* gfortran.fortran-torture/execute/data_4.f90: New test.\n\nFrom-SVN: r102349", "tree": {"sha": "f2941d00c497cee2722fe86e247561fbdf30c097", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f2941d00c497cee2722fe86e247561fbdf30c097"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/31f74accb27dfe58e1926dbbcb0b9d57e55bde42", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31f74accb27dfe58e1926dbbcb0b9d57e55bde42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31f74accb27dfe58e1926dbbcb0b9d57e55bde42", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31f74accb27dfe58e1926dbbcb0b9d57e55bde42/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "044ed7ecf6f07beb86a90f7d79b3f5b9424764db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/044ed7ecf6f07beb86a90f7d79b3f5b9424764db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/044ed7ecf6f07beb86a90f7d79b3f5b9424764db"}], "stats": {"total": 30, "additions": 25, "deletions": 5}, "files": [{"sha": "205c7177bb00a542b3fb2511a42c9363acda259f", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31f74accb27dfe58e1926dbbcb0b9d57e55bde42/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31f74accb27dfe58e1926dbbcb0b9d57e55bde42/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=31f74accb27dfe58e1926dbbcb0b9d57e55bde42", "patch": "@@ -1,3 +1,9 @@\n+2005-07-25  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR fortran/20063\n+\t* data.c (gfc_assign_data_value_range): Call\n+\tcreate_character_initializer if last_ts is a character type.\n+\n 2005-07-22  Manfred Hollstein  <mh@suse.com>\n \n \t* match.c (gfc_match_symbol): Fix uninitialised warnings."}, {"sha": "d614db4a0844e011601ce800257bf14ac0671267", "filename": "gcc/fortran/data.c", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31f74accb27dfe58e1926dbbcb0b9d57e55bde42/gcc%2Ffortran%2Fdata.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31f74accb27dfe58e1926dbbcb0b9d57e55bde42/gcc%2Ffortran%2Fdata.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdata.c?ref=31f74accb27dfe58e1926dbbcb0b9d57e55bde42", "patch": "@@ -459,12 +459,17 @@ gfc_assign_data_value_range (gfc_expr * lvalue, gfc_expr * rvalue,\n       last_con = con;\n     }\n \n-  /* We should never be overwriting an existing initializer.  */\n-  gcc_assert (!init);\n+  if (last_ts->type == BT_CHARACTER)\n+    expr = create_character_intializer (init, last_ts, NULL, rvalue);\n+  else\n+    {\n+      /* We should never be overwriting an existing initializer.  */\n+      gcc_assert (!init);\n \n-  expr = gfc_copy_expr (rvalue);\n-  if (!gfc_compare_types (&lvalue->ts, &expr->ts))\n-    gfc_convert_type (expr, &lvalue->ts, 0);\n+      expr = gfc_copy_expr (rvalue);\n+      if (!gfc_compare_types (&lvalue->ts, &expr->ts))\n+\tgfc_convert_type (expr, &lvalue->ts, 0);\n+    }\n \n   if (last_con == NULL)\n     symbol->value = expr;"}, {"sha": "11ec1110cf5721bbae7a3b34bc052419ceafdd91", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31f74accb27dfe58e1926dbbcb0b9d57e55bde42/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31f74accb27dfe58e1926dbbcb0b9d57e55bde42/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=31f74accb27dfe58e1926dbbcb0b9d57e55bde42", "patch": "@@ -1,5 +1,8 @@\n 2005-07-25  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR fortran/20063\n+\t* gfortran.fortran-torture/execute/data_4.f90: New test.\n+\n \tPR middle-end/20303\n \t* gcc.dg/visibility-d.c: New test.\n "}, {"sha": "4b5c10e6a8bbf9505ab01e86df2da1027ee80267", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/data_4.f90", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31f74accb27dfe58e1926dbbcb0b9d57e55bde42/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fdata_4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31f74accb27dfe58e1926dbbcb0b9d57e55bde42/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fdata_4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fdata_4.f90?ref=31f74accb27dfe58e1926dbbcb0b9d57e55bde42", "patch": "@@ -0,0 +1,6 @@\n+\tCHARACTER*4 A(3),B(3),C(3)\n+\tDATA A /'A',\"A\",'A'/\n+\tDATA B /3*'A'/\n+\tDATA C /'A', 2*'A'/\n+\tIF (ANY(A.NE.B).OR.ANY(A.NE.C)) CALL ABORT\n+\tEND"}]}