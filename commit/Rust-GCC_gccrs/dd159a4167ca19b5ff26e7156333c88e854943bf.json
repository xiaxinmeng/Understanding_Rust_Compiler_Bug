{"sha": "dd159a4167ca19b5ff26e7156333c88e854943bf", "node_id": "C_kwDOANBUbNoAKGRkMTU5YTQxNjdjYTE5YjVmZjI2ZTcxNTYzMzNjODhlODU0OTQzYmY", "commit": {"author": {"name": "Przemyslaw Wirkus", "email": "przemyslaw.wirkus@arm.com", "date": "2021-11-17T13:38:24Z"}, "committer": {"name": "Przemyslaw Wirkus", "email": "przemyslaw.wirkus@arm.com", "date": "2021-11-17T13:59:42Z"}, "message": "aarch64: Add new vector mode V8DI\n\nThis patch is adding new V8DI mode which will be used with new Armv8.7-A\nLS64 extension intrinsics.\n\ngcc/ChangeLog:\n\n\t* config/aarch64/aarch64-modes.def (VECTOR_MODE): New V8DI mode.\n\t* config/aarch64/aarch64.c (aarch64_hard_regno_mode_ok): Handle\n\tV8DImode.\n\t* config/aarch64/iterators.md (define_mode_attr nunits): Add entry\n\tfor V8DI.", "tree": {"sha": "9fafa86eaa5eae5a09eb156c0f10a9af06bedf4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9fafa86eaa5eae5a09eb156c0f10a9af06bedf4c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd159a4167ca19b5ff26e7156333c88e854943bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd159a4167ca19b5ff26e7156333c88e854943bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd159a4167ca19b5ff26e7156333c88e854943bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd159a4167ca19b5ff26e7156333c88e854943bf/comments", "author": {"login": "PrzemekWirkus", "id": 6360720, "node_id": "MDQ6VXNlcjYzNjA3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/6360720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PrzemekWirkus", "html_url": "https://github.com/PrzemekWirkus", "followers_url": "https://api.github.com/users/PrzemekWirkus/followers", "following_url": "https://api.github.com/users/PrzemekWirkus/following{/other_user}", "gists_url": "https://api.github.com/users/PrzemekWirkus/gists{/gist_id}", "starred_url": "https://api.github.com/users/PrzemekWirkus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PrzemekWirkus/subscriptions", "organizations_url": "https://api.github.com/users/PrzemekWirkus/orgs", "repos_url": "https://api.github.com/users/PrzemekWirkus/repos", "events_url": "https://api.github.com/users/PrzemekWirkus/events{/privacy}", "received_events_url": "https://api.github.com/users/PrzemekWirkus/received_events", "type": "User", "site_admin": false}, "committer": {"login": "PrzemekWirkus", "id": 6360720, "node_id": "MDQ6VXNlcjYzNjA3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/6360720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PrzemekWirkus", "html_url": "https://github.com/PrzemekWirkus", "followers_url": "https://api.github.com/users/PrzemekWirkus/followers", "following_url": "https://api.github.com/users/PrzemekWirkus/following{/other_user}", "gists_url": "https://api.github.com/users/PrzemekWirkus/gists{/gist_id}", "starred_url": "https://api.github.com/users/PrzemekWirkus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PrzemekWirkus/subscriptions", "organizations_url": "https://api.github.com/users/PrzemekWirkus/orgs", "repos_url": "https://api.github.com/users/PrzemekWirkus/repos", "events_url": "https://api.github.com/users/PrzemekWirkus/events{/privacy}", "received_events_url": "https://api.github.com/users/PrzemekWirkus/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4e6bf0b9dd5585df1a1472d6a93b9fff72fe2524", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e6bf0b9dd5585df1a1472d6a93b9fff72fe2524", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e6bf0b9dd5585df1a1472d6a93b9fff72fe2524"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "f0265bd15b23291dced723229852554af8d02ee8", "filename": "gcc/config/aarch64/aarch64-modes.def", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd159a4167ca19b5ff26e7156333c88e854943bf/gcc%2Fconfig%2Faarch64%2Faarch64-modes.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd159a4167ca19b5ff26e7156333c88e854943bf/gcc%2Fconfig%2Faarch64%2Faarch64-modes.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-modes.def?ref=dd159a4167ca19b5ff26e7156333c88e854943bf", "patch": "@@ -81,6 +81,11 @@ INT_MODE (OI, 32);\n INT_MODE (CI, 48);\n INT_MODE (XI, 64);\n \n+/* V8DI mode.  */\n+VECTOR_MODE_WITH_PREFIX (V, INT, DI, 8, 5);\n+\n+ADJUST_ALIGNMENT (V8DI, 8);\n+\n /* Define Advanced SIMD modes for structures of 2, 3 and 4 d-registers.  */\n #define ADV_SIMD_D_REG_STRUCT_MODES(NVECS, VB, VH, VS, VD) \\\n   VECTOR_MODES_WITH_PREFIX (V##NVECS##x, INT, 8, 3); \\"}, {"sha": "7389b5953dc468f56ba60dc5434f4daa47d9c052", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd159a4167ca19b5ff26e7156333c88e854943bf/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd159a4167ca19b5ff26e7156333c88e854943bf/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=dd159a4167ca19b5ff26e7156333c88e854943bf", "patch": "@@ -3394,6 +3394,10 @@ aarch64_hard_regno_nregs (unsigned regno, machine_mode mode)\n static bool\n aarch64_hard_regno_mode_ok (unsigned regno, machine_mode mode)\n {\n+  if (mode == V8DImode)\n+    return IN_RANGE (regno, R0_REGNUM, R23_REGNUM)\n+           && multiple_p (regno - R0_REGNUM, 2);\n+\n   if (GET_MODE_CLASS (mode) == MODE_CC)\n     return regno == CC_REGNUM;\n "}, {"sha": "2c58d5570ae094658637c2d1cc86c8aa5c00f20a", "filename": "gcc/config/aarch64/iterators.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd159a4167ca19b5ff26e7156333c88e854943bf/gcc%2Fconfig%2Faarch64%2Fiterators.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd159a4167ca19b5ff26e7156333c88e854943bf/gcc%2Fconfig%2Faarch64%2Fiterators.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Fiterators.md?ref=dd159a4167ca19b5ff26e7156333c88e854943bf", "patch": "@@ -1062,7 +1062,7 @@\n (define_mode_attr nunits [(V8QI \"8\") (V16QI \"16\")\n \t\t\t  (V4HI \"4\") (V8HI \"8\")\n \t\t\t  (V2SI \"2\") (V4SI \"4\")\n-\t\t\t\t     (V2DI \"2\")\n+\t\t\t  (V2DI \"2\") (V8DI \"8\")\n \t\t\t  (V4HF \"4\") (V8HF \"8\")\n \t\t\t  (V4BF \"4\") (V8BF \"8\")\n \t\t\t  (V2SF \"2\") (V4SF \"4\")"}]}