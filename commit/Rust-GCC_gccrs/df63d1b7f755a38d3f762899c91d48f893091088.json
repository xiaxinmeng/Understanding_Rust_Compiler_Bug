{"sha": "df63d1b7f755a38d3f762899c91d48f893091088", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGY2M2QxYjdmNzU1YTM4ZDNmNzYyODk5YzkxZDQ4Zjg5MzA5MTA4OA==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2019-04-12T06:25:34Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gcc.gnu.org", "date": "2019-04-12T06:25:34Z"}, "message": "libphobos: Parallelize the libphobos testsuite\n\nThe removal of the check programs in libphobos means that all tests\nwill now be compiled one at a time, causing a notable slowdown in\ncomparison with the previous method of testing.\n\nlibphobos/ChangeLog:\n\n2019-04-12  Iain Buclaw  <ibuclaw@gdcproject.org>\n\n\t* testsuite/Makefile.am:\n\t* testsuite/Makefile.am (AUTOMAKE_OPTIONS): Remove dejagnu.\n\t(RUNTEST): Remove variable.\n\t(RUNTESTDEFAULTFLAGS, check_p_subno, check_p_numbers0,\n\tcheck_p_numbers1, check_p_numbers2, check_p_numbers3,\n\tcheck_p_numbers4, check_p_numbers5, check_p_numbers6, check_p_numbers,\n\tcheck_p_subdirs, check_DEJAGNU_libphobos_targets): New variables.\n\t(site.exp, %/site.exp, check-DEJAGNU, check-am, clean-local): New\n\trules written so that all the *.exp files are ran parallelized.\n\t(CLEANFILES): Add *.exe, *.o, and site.exp.\n\t* testsuite/Makefile.in: Regenerate.\n\nFrom-SVN: r270303", "tree": {"sha": "8ae4a312319b9365f8e564825b21d0011f767771", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ae4a312319b9365f8e564825b21d0011f767771"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df63d1b7f755a38d3f762899c91d48f893091088", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df63d1b7f755a38d3f762899c91d48f893091088", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df63d1b7f755a38d3f762899c91d48f893091088", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df63d1b7f755a38d3f762899c91d48f893091088/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0d6aae249d1a2ac9efe67407553711be3883a7f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d6aae249d1a2ac9efe67407553711be3883a7f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d6aae249d1a2ac9efe67407553711be3883a7f8"}], "stats": {"total": 307, "additions": 238, "deletions": 69}, "files": [{"sha": "e974a64299fc1e4f0ab50d5e89ec95d312738cee", "filename": "libphobos/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df63d1b7f755a38d3f762899c91d48f893091088/libphobos%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df63d1b7f755a38d3f762899c91d48f893091088/libphobos%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2FChangeLog?ref=df63d1b7f755a38d3f762899c91d48f893091088", "patch": "@@ -1,3 +1,17 @@\n+2019-04-12  Iain Buclaw  <ibuclaw@gdcproject.org>\n+\n+\t* testsuite/Makefile.am:\n+\t* testsuite/Makefile.am (AUTOMAKE_OPTIONS): Remove dejagnu.\n+\t(RUNTEST): Remove variable.\n+\t(RUNTESTDEFAULTFLAGS, check_p_subno, check_p_numbers0,\n+\tcheck_p_numbers1, check_p_numbers2, check_p_numbers3,\n+\tcheck_p_numbers4, check_p_numbers5, check_p_numbers6, check_p_numbers,\n+\tcheck_p_subdirs, check_DEJAGNU_libphobos_targets): New variables.\n+\t(site.exp, %/site.exp, check-DEJAGNU, check-am, clean-local): New\n+\trules written so that all the *.exp files are ran parallelized.\n+\t(CLEANFILES): Add *.exe, *.o, and site.exp.\n+\t* testsuite/Makefile.in: Regenerate.\n+\n 2019-04-12  Iain Buclaw  <ibuclaw@gdcproject.org>\n \n \t* configure.ac (ENABLE_SHARED, ENABLE_STATIC): Remove conditionals."}, {"sha": "55b2ba426408c72ac1039288b1a176466d1428f3", "filename": "libphobos/testsuite/Makefile.am", "status": "modified", "additions": 105, "deletions": 3, "changes": 108, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df63d1b7f755a38d3f762899c91d48f893091088/libphobos%2Ftestsuite%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df63d1b7f755a38d3f762899c91d48f893091088/libphobos%2Ftestsuite%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Ftestsuite%2FMakefile.am?ref=df63d1b7f755a38d3f762899c91d48f893091088", "patch": "@@ -17,16 +17,118 @@\n \n # Process this file with automake to produce Makefile.in.\n \n-AUTOMAKE_OPTIONS = foreign dejagnu\n+AUTOMAKE_OPTIONS = foreign\n \n # Setup the testing framework, if you have one\n EXPECT = $(shell if test -f $(top_builddir)/../expect/expect; then \\\n \t   echo $(top_builddir)/../expect/expect; else echo expect; fi)\n \n _RUNTEST = $(shell if test -f $(top_srcdir)/../dejagnu/runtest; then \\\n \t     echo $(top_srcdir)/../dejagnu/runtest; else echo runtest; fi)\n-RUNTEST = $(_RUNTEST) $(AM_RUNTESTFLAGS)\n+RUNTESTDEFAULTFLAGS = --tool $$tool --srcdir $$srcdir\n+\n+check_p_subno=$(word 2,$(subst _, ,$*))\n+check_p_numbers0:=1 2 3 4 5 6 7 8 9\n+check_p_numbers1:=0 $(check_p_numbers0)\n+check_p_numbers2:=$(foreach i,$(check_p_numbers0),$(addprefix $(i),$(check_p_numbers1)))\n+check_p_numbers3:=$(addprefix 0,$(check_p_numbers1)) $(check_p_numbers2)\n+check_p_numbers4:=$(foreach i,$(check_p_numbers0),$(addprefix $(i),$(check_p_numbers3)))\n+check_p_numbers5:=$(addprefix 0,$(check_p_numbers3)) $(check_p_numbers4)\n+check_p_numbers6:=$(foreach i,$(check_p_numbers0),$(addprefix $(i),$(check_p_numbers5)))\n+check_p_numbers:=$(check_p_numbers0) $(check_p_numbers2) $(check_p_numbers4) $(check_p_numbers6)\n+check_p_subdirs=$(wordlist 1,$(if $(GCC_TEST_PARALLEL_SLOTS),$(GCC_TEST_PARALLEL_SLOTS),10),$(check_p_numbers))\n+check_DEJAGNU_libphobos_targets = $(addprefix check-DEJAGNUlibphobos,$(check_p_subdirs))\n+$(check_DEJAGNU_libphobos_targets): check-DEJAGNUlibphobos%: libphobos%/site.exp\n+\n+site.exp: Makefile $(EXTRA_DEJAGNU_SITE_CONFIG)\n+\t@echo 'Making a new site.exp file ...'\n+\t@echo '## these variables are automatically generated by make ##' >site.tmp\n+\t@echo '# Do not edit here.  If you wish to override these values' >>site.tmp\n+\t@echo '# edit the last section' >>site.tmp\n+\t@echo 'set srcdir \"$(srcdir)\"' >>site.tmp\n+\t@echo \"set objdir `pwd`\" >>site.tmp\n+\t@echo 'set build_alias \"$(build_alias)\"' >>site.tmp\n+\t@echo 'set build_triplet $(build_triplet)' >>site.tmp\n+\t@echo 'set host_alias \"$(host_alias)\"' >>site.tmp\n+\t@echo 'set host_triplet $(host_triplet)' >>site.tmp\n+\t@echo 'set target_alias \"$(target_alias)\"' >>site.tmp\n+\t@echo 'set target_triplet $(target_triplet)' >>site.tmp\n+\t@list='$(EXTRA_DEJAGNU_SITE_CONFIG)'; for f in $$list; do \\\n+\t  echo \"## Begin content included from file $$f.  Do not modify. ##\" \\\n+\t   && cat `test -f \"$$f\" || echo '$(srcdir)/'`$$f \\\n+\t   && echo \"## End content included from file $$f. ##\" \\\n+\t   || exit 1; \\\n+\t done >> site.tmp\n+\t@echo \"## End of auto-generated content; you can edit from here. ##\" >> site.tmp\n+\t@if test -f site.exp; then \\\n+\t   sed -e '1,/^## End of auto-generated content.*##/d' site.exp >> site.tmp; \\\n+\tfi\n+\t@-rm -f site.bak\n+\t@test ! -f site.exp || mv site.exp site.bak\n+\t@mv site.tmp site.exp\n+\n+%/site.exp: site.exp\n+\t-@test -d $* || mkdir $*\n+\t@srcdir=`cd $(srcdir); ${PWD_COMMAND}`;\n+\t@objdir=`${PWD_COMMAND}`/$*; \\\n+\tsed -e \"s|^set srcdir .*$$|set srcdir $$srcdir|\" \\\n+\t    -e \"s|^set objdir .*$$|set objdir $$objdir|\" \\\n+\t    site.exp > $*/site.exp.tmp\n+\t@-rm -f $*/site.bak\n+\t@test ! -f $*/site.exp || mv $*/site.exp $*/site.bak\n+\t@mv $*/site.exp.tmp $*/site.exp\n+\n+# Run the testsuite in normal mode.\n+check-DEJAGNU $(check_DEJAGNU_libphobos_targets): check-DEJAGNU%: site.exp\n+\t$(if $*,@)AR=\"$(AR)\"; export AR; \\\n+\tRANLIB=\"$(RANLIB)\"; export RANLIB; \\\n+\tif [ -z \"$*\" ] && [ -n \"$(filter -j%, $(MFLAGS))\" ]; then \\\n+\t  rm -rf libphobos-parallel || true; \\\n+\t  mkdir libphobos-parallel; \\\n+\t  $(MAKE) $(AM_MAKEFLAGS) $(check_DEJAGNU_libphobos_targets); \\\n+\t  rm -rf libphobos-parallel || true; \\\n+\t  for idx in $(check_p_subdirs); do \\\n+\t    if [ -d libphobos$$idx ]; then \\\n+\t      mv -f libphobos$$idx/libphobos.sum libphobos$$idx/libphobos.sum.sep; \\\n+\t      mv -f libphobos$$idx/libphobos.log libphobos$$idx/libphobos.log.sep; \\\n+\t    fi; \\\n+\t  done; \\\n+\t  $(SHELL) $(srcdir)/../../contrib/dg-extract-results.sh \\\n+\t    libphobos[0-9]*/libphobos.sum.sep > libphobos.sum; \\\n+\t  $(SHELL) $(srcdir)/../../contrib/dg-extract-results.sh -L \\\n+\t    libphobos[0-9]*/libphobos.log.sep > libphobos.log; \\\n+\t  exit 0; \\\n+\tfi; \\\n+\tsrcdir=`$(am__cd) $(srcdir) && pwd`; export srcdir; \\\n+\tEXPECT=$(EXPECT); export EXPECT; \\\n+\truntest=$(_RUNTEST); \\\n+\tif [ -z \"$$runtest\" ]; then runtest=runtest; fi; \\\n+\ttool=libphobos; \\\n+\tif [ -n \"$*\" ]; then \\\n+\t  if [ -f libphobos-parallel/finished ]; then rm -rf \"$*\"; exit 0; fi; \\\n+\t  GCC_RUNTEST_PARALLELIZE_DIR=`${PWD_COMMAND}`/libphobos-parallel; \\\n+\t  export GCC_RUNTEST_PARALLELIZE_DIR; \\\n+\t  cd \"$*\"; \\\n+\tfi; \\\n+\tif $(SHELL) -c \"$$runtest --version\" > /dev/null 2>&1; then \\\n+\t  $$runtest $(AM_RUNTESTFLAGS) $(RUNTESTDEFAULTFLAGS) \\\n+\t\t    $(RUNTESTFLAGS); \\\n+\t  if [ -n \"$*\" ]; then \\\n+\t    touch $$GCC_RUNTEST_PARALLELIZE_DIR/finished; \\\n+\t  fi; \\\n+\telse \\\n+\t  echo \"WARNING: could not find \\`runtest'\" 1>&2; :;\\\n+\tfi\n+\n+check-am:\n+\t$(MAKE) $(AM_MAKEFLAGS) check-DEJAGNU\n+\n+.PHONY: check-DEJAGNU\n \n AM_MAKEFLAGS = \"EXEEXT=$(EXEEXT)\"\n \n-CLEANFILES = *.log *.sum\n+CLEANFILES = *.exe *.log *.o *.sum site.exp\n+\n+# To remove runtest-parallel directories.\n+clean-local:\n+\trm -rf libphobos*"}, {"sha": "b81209b92510935696f3801c16e845bffe39434b", "filename": "libphobos/testsuite/Makefile.in", "status": "modified", "additions": 119, "deletions": 66, "changes": 185, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df63d1b7f755a38d3f762899c91d48f893091088/libphobos%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df63d1b7f755a38d3f762899c91d48f893091088/libphobos%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Ftestsuite%2FMakefile.in?ref=df63d1b7f755a38d3f762899c91d48f893091088", "patch": "@@ -133,8 +133,6 @@ am__can_run_installinfo = \\\n     *) (install-info --version) >/dev/null 2>&1;; \\\n   esac\n am__tagged_files = $(HEADERS) $(SOURCES) $(TAGS_FILES) $(LISP)\n-DEJATOOL = $(PACKAGE)\n-RUNTESTDEFAULTFLAGS = --tool $$tool --srcdir $$srcdir\n ACLOCAL = @ACLOCAL@\n AMTAR = @AMTAR@\n AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@\n@@ -278,7 +276,7 @@ target_vendor = @target_vendor@\n top_build_prefix = @top_build_prefix@\n top_builddir = @top_builddir@\n top_srcdir = @top_srcdir@\n-AUTOMAKE_OPTIONS = foreign dejagnu\n+AUTOMAKE_OPTIONS = foreign\n \n # Setup the testing framework, if you have one\n EXPECT = $(shell if test -f $(top_builddir)/../expect/expect; then \\\n@@ -287,9 +285,20 @@ EXPECT = $(shell if test -f $(top_builddir)/../expect/expect; then \\\n _RUNTEST = $(shell if test -f $(top_srcdir)/../dejagnu/runtest; then \\\n \t     echo $(top_srcdir)/../dejagnu/runtest; else echo runtest; fi)\n \n-RUNTEST = $(_RUNTEST) $(AM_RUNTESTFLAGS)\n+RUNTESTDEFAULTFLAGS = --tool $$tool --srcdir $$srcdir\n+check_p_subno = $(word 2,$(subst _, ,$*))\n+check_p_numbers0 := 1 2 3 4 5 6 7 8 9\n+check_p_numbers1 := 0 $(check_p_numbers0)\n+check_p_numbers2 := $(foreach i,$(check_p_numbers0),$(addprefix $(i),$(check_p_numbers1)))\n+check_p_numbers3 := $(addprefix 0,$(check_p_numbers1)) $(check_p_numbers2)\n+check_p_numbers4 := $(foreach i,$(check_p_numbers0),$(addprefix $(i),$(check_p_numbers3)))\n+check_p_numbers5 := $(addprefix 0,$(check_p_numbers3)) $(check_p_numbers4)\n+check_p_numbers6 := $(foreach i,$(check_p_numbers0),$(addprefix $(i),$(check_p_numbers5)))\n+check_p_numbers := $(check_p_numbers0) $(check_p_numbers2) $(check_p_numbers4) $(check_p_numbers6)\n+check_p_subdirs = $(wordlist 1,$(if $(GCC_TEST_PARALLEL_SLOTS),$(GCC_TEST_PARALLEL_SLOTS),10),$(check_p_numbers))\n+check_DEJAGNU_libphobos_targets = $(addprefix check-DEJAGNUlibphobos,$(check_p_subdirs))\n AM_MAKEFLAGS = \"EXEEXT=$(EXEEXT)\"\n-CLEANFILES = *.log *.sum\n+CLEANFILES = *.exe *.log *.o *.sum site.exp\n all: all-am\n \n .SUFFIXES:\n@@ -336,52 +345,7 @@ ctags CTAGS:\n \n cscope cscopelist:\n \n-\n-check-DEJAGNU: site.exp\n-\tsrcdir='$(srcdir)'; export srcdir; \\\n-\tEXPECT=$(EXPECT); export EXPECT; \\\n-\tif $(SHELL) -c \"$(RUNTEST) --version\" > /dev/null 2>&1; then \\\n-\t  exit_status=0; l='$(DEJATOOL)'; for tool in $$l; do \\\n-\t    if $(RUNTEST) $(AM_RUNTESTFLAGS) $(RUNTESTDEFAULTFLAGS) $(RUNTESTFLAGS); \\\n-\t    then :; else exit_status=1; fi; \\\n-\t  done; \\\n-\telse echo \"WARNING: could not find '$(RUNTEST)'\" 1>&2; :;\\\n-\tfi; \\\n-\texit $$exit_status\n-site.exp: Makefile $(EXTRA_DEJAGNU_SITE_CONFIG)\n-\t@echo 'Making a new site.exp file ...'\n-\t@echo '## these variables are automatically generated by make ##' >site.tmp\n-\t@echo '# Do not edit here.  If you wish to override these values' >>site.tmp\n-\t@echo '# edit the last section' >>site.tmp\n-\t@echo 'set srcdir \"$(srcdir)\"' >>site.tmp\n-\t@echo \"set objdir `pwd`\" >>site.tmp\n-\t@echo 'set build_alias \"$(build_alias)\"' >>site.tmp\n-\t@echo 'set build_triplet $(build_triplet)' >>site.tmp\n-\t@echo 'set host_alias \"$(host_alias)\"' >>site.tmp\n-\t@echo 'set host_triplet $(host_triplet)' >>site.tmp\n-\t@echo 'set target_alias \"$(target_alias)\"' >>site.tmp\n-\t@echo 'set target_triplet $(target_triplet)' >>site.tmp\n-\t@list='$(EXTRA_DEJAGNU_SITE_CONFIG)'; for f in $$list; do \\\n-\t  echo \"## Begin content included from file $$f.  Do not modify. ##\" \\\n-\t   && cat `test -f \"$$f\" || echo '$(srcdir)/'`$$f \\\n-\t   && echo \"## End content included from file $$f. ##\" \\\n-\t   || exit 1; \\\n-\t done >> site.tmp\n-\t@echo \"## End of auto-generated content; you can edit from here. ##\" >> site.tmp\n-\t@if test -f site.exp; then \\\n-\t   sed -e '1,/^## End of auto-generated content.*##/d' site.exp >> site.tmp; \\\n-\t fi\n-\t@-rm -f site.bak\n-\t@test ! -f site.exp || mv site.exp site.bak\n-\t@mv site.tmp site.exp\n-\n-distclean-DEJAGNU:\n-\t-rm -f site.exp site.bak\n-\t-l='$(DEJATOOL)'; for tool in $$l; do \\\n-\t  rm -f $$tool.sum $$tool.log; \\\n-\tdone\n check-am: all-am\n-\t$(MAKE) $(AM_MAKEFLAGS) check-DEJAGNU\n check: check-am\n all-am: Makefile\n installdirs:\n@@ -418,11 +382,11 @@ maintainer-clean-generic:\n \t@echo \"it deletes files that may require special tools to rebuild.\"\n clean: clean-am\n \n-clean-am: clean-generic clean-libtool mostlyclean-am\n+clean-am: clean-generic clean-libtool clean-local mostlyclean-am\n \n distclean: distclean-am\n \t-rm -f Makefile\n-distclean-am: clean-am distclean-DEJAGNU distclean-generic\n+distclean-am: clean-am distclean-generic\n \n dvi: dvi-am\n \n@@ -482,23 +446,112 @@ ps-am:\n \n uninstall-am:\n \n-.MAKE: check-am install-am install-strip\n-\n-.PHONY: all all-am check check-DEJAGNU check-am clean clean-generic \\\n-\tclean-libtool cscopelist-am ctags-am distclean \\\n-\tdistclean-DEJAGNU distclean-generic distclean-libtool dvi \\\n-\tdvi-am html html-am info info-am install install-am \\\n-\tinstall-data install-data-am install-dvi install-dvi-am \\\n-\tinstall-exec install-exec-am install-html install-html-am \\\n-\tinstall-info install-info-am install-man install-pdf \\\n-\tinstall-pdf-am install-ps install-ps-am install-strip \\\n-\tinstallcheck installcheck-am installdirs maintainer-clean \\\n-\tmaintainer-clean-generic mostlyclean mostlyclean-generic \\\n-\tmostlyclean-libtool pdf pdf-am ps ps-am tags-am uninstall \\\n-\tuninstall-am\n+.MAKE: install-am install-strip\n+\n+.PHONY: all all-am check check-am clean clean-generic clean-libtool \\\n+\tclean-local cscopelist-am ctags-am distclean distclean-generic \\\n+\tdistclean-libtool dvi dvi-am html html-am info info-am install \\\n+\tinstall-am install-data install-data-am install-dvi \\\n+\tinstall-dvi-am install-exec install-exec-am install-html \\\n+\tinstall-html-am install-info install-info-am install-man \\\n+\tinstall-pdf install-pdf-am install-ps install-ps-am \\\n+\tinstall-strip installcheck installcheck-am installdirs \\\n+\tmaintainer-clean maintainer-clean-generic mostlyclean \\\n+\tmostlyclean-generic mostlyclean-libtool pdf pdf-am ps ps-am \\\n+\ttags-am uninstall uninstall-am\n \n .PRECIOUS: Makefile\n \n+$(check_DEJAGNU_libphobos_targets): check-DEJAGNUlibphobos%: libphobos%/site.exp\n+\n+site.exp: Makefile $(EXTRA_DEJAGNU_SITE_CONFIG)\n+\t@echo 'Making a new site.exp file ...'\n+\t@echo '## these variables are automatically generated by make ##' >site.tmp\n+\t@echo '# Do not edit here.  If you wish to override these values' >>site.tmp\n+\t@echo '# edit the last section' >>site.tmp\n+\t@echo 'set srcdir \"$(srcdir)\"' >>site.tmp\n+\t@echo \"set objdir `pwd`\" >>site.tmp\n+\t@echo 'set build_alias \"$(build_alias)\"' >>site.tmp\n+\t@echo 'set build_triplet $(build_triplet)' >>site.tmp\n+\t@echo 'set host_alias \"$(host_alias)\"' >>site.tmp\n+\t@echo 'set host_triplet $(host_triplet)' >>site.tmp\n+\t@echo 'set target_alias \"$(target_alias)\"' >>site.tmp\n+\t@echo 'set target_triplet $(target_triplet)' >>site.tmp\n+\t@list='$(EXTRA_DEJAGNU_SITE_CONFIG)'; for f in $$list; do \\\n+\t  echo \"## Begin content included from file $$f.  Do not modify. ##\" \\\n+\t   && cat `test -f \"$$f\" || echo '$(srcdir)/'`$$f \\\n+\t   && echo \"## End content included from file $$f. ##\" \\\n+\t   || exit 1; \\\n+\t done >> site.tmp\n+\t@echo \"## End of auto-generated content; you can edit from here. ##\" >> site.tmp\n+\t@if test -f site.exp; then \\\n+\t   sed -e '1,/^## End of auto-generated content.*##/d' site.exp >> site.tmp; \\\n+\tfi\n+\t@-rm -f site.bak\n+\t@test ! -f site.exp || mv site.exp site.bak\n+\t@mv site.tmp site.exp\n+\n+%/site.exp: site.exp\n+\t-@test -d $* || mkdir $*\n+\t@srcdir=`cd $(srcdir); ${PWD_COMMAND}`;\n+\t@objdir=`${PWD_COMMAND}`/$*; \\\n+\tsed -e \"s|^set srcdir .*$$|set srcdir $$srcdir|\" \\\n+\t    -e \"s|^set objdir .*$$|set objdir $$objdir|\" \\\n+\t    site.exp > $*/site.exp.tmp\n+\t@-rm -f $*/site.bak\n+\t@test ! -f $*/site.exp || mv $*/site.exp $*/site.bak\n+\t@mv $*/site.exp.tmp $*/site.exp\n+\n+# Run the testsuite in normal mode.\n+check-DEJAGNU $(check_DEJAGNU_libphobos_targets): check-DEJAGNU%: site.exp\n+\t$(if $*,@)AR=\"$(AR)\"; export AR; \\\n+\tRANLIB=\"$(RANLIB)\"; export RANLIB; \\\n+\tif [ -z \"$*\" ] && [ -n \"$(filter -j%, $(MFLAGS))\" ]; then \\\n+\t  rm -rf libphobos-parallel || true; \\\n+\t  mkdir libphobos-parallel; \\\n+\t  $(MAKE) $(AM_MAKEFLAGS) $(check_DEJAGNU_libphobos_targets); \\\n+\t  rm -rf libphobos-parallel || true; \\\n+\t  for idx in $(check_p_subdirs); do \\\n+\t    if [ -d libphobos$$idx ]; then \\\n+\t      mv -f libphobos$$idx/libphobos.sum libphobos$$idx/libphobos.sum.sep; \\\n+\t      mv -f libphobos$$idx/libphobos.log libphobos$$idx/libphobos.log.sep; \\\n+\t    fi; \\\n+\t  done; \\\n+\t  $(SHELL) $(srcdir)/../../contrib/dg-extract-results.sh \\\n+\t    libphobos[0-9]*/libphobos.sum.sep > libphobos.sum; \\\n+\t  $(SHELL) $(srcdir)/../../contrib/dg-extract-results.sh -L \\\n+\t    libphobos[0-9]*/libphobos.log.sep > libphobos.log; \\\n+\t  exit 0; \\\n+\tfi; \\\n+\tsrcdir=`$(am__cd) $(srcdir) && pwd`; export srcdir; \\\n+\tEXPECT=$(EXPECT); export EXPECT; \\\n+\truntest=$(_RUNTEST); \\\n+\tif [ -z \"$$runtest\" ]; then runtest=runtest; fi; \\\n+\ttool=libphobos; \\\n+\tif [ -n \"$*\" ]; then \\\n+\t  if [ -f libphobos-parallel/finished ]; then rm -rf \"$*\"; exit 0; fi; \\\n+\t  GCC_RUNTEST_PARALLELIZE_DIR=`${PWD_COMMAND}`/libphobos-parallel; \\\n+\t  export GCC_RUNTEST_PARALLELIZE_DIR; \\\n+\t  cd \"$*\"; \\\n+\tfi; \\\n+\tif $(SHELL) -c \"$$runtest --version\" > /dev/null 2>&1; then \\\n+\t  $$runtest $(AM_RUNTESTFLAGS) $(RUNTESTDEFAULTFLAGS) \\\n+\t\t    $(RUNTESTFLAGS); \\\n+\t  if [ -n \"$*\" ]; then \\\n+\t    touch $$GCC_RUNTEST_PARALLELIZE_DIR/finished; \\\n+\t  fi; \\\n+\telse \\\n+\t  echo \"WARNING: could not find \\`runtest'\" 1>&2; :;\\\n+\tfi\n+\n+check-am:\n+\t$(MAKE) $(AM_MAKEFLAGS) check-DEJAGNU\n+\n+.PHONY: check-DEJAGNU\n+\n+# To remove runtest-parallel directories.\n+clean-local:\n+\trm -rf libphobos*\n \n # Tell versions [3.59,3.63) of GNU make to not export all variables.\n # Otherwise a system limit (for SysV at least) may be exceeded."}]}