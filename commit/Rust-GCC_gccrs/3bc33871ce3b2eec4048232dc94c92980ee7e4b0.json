{"sha": "3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2JjMzM4NzFjZTNiMmVlYzQwNDgyMzJkYzk0YzkyOTgwZWU3ZTRiMA==", "commit": {"author": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2010-09-30T09:40:11Z"}, "committer": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2010-09-30T09:40:11Z"}, "message": "re PR objc/45842 (New obj(c-c++) failures)\n\n\n\tPR objc/45842\n\t* objc.dg/threedotthree-abi-1.m: Only apply at m32.\n\t* objc.dg/const-str-3.m: Correct header for memcpy.\n\t* objc.dg/const-str-7.m: Likewise.\n\t* objc.dg/method-20b.m: Provide an implementation of Object.\n\tAdjust XFAIL for m64 NeXT runtime.\n\t* objc.dg/const-str-12b.m: Use mapped data types Darwin >= 9.\n\t* objc.dg/encode-3.m: Correct line ordering, provide header for \n\tsprintf.\n\t* objc.dg/encode-7-next.m: Only run for 32bit.\n\t* objc.dg/encode-7-next-64bit.m: Only run for 64bit.\n\t* objc.dg/type-size-2.m: Provide an implementation of Object.\n\tAjust headers.\n\t* obj-c++.dg/const-str-7.mm: Correct header for memcpy.\n\t* obj-c++.dg/const-str-12.mm: Use mapped data types Darwin >= 9.\n\t* obj-c++.dg/method-23.mm: Provide an implementation of Object.\n\tAdjust XFAIL for m64 NeXT runtime.\n\t* obj-c++.dg/method-22.mm: Likewise.\n\t* obj-c++.dg/threedotthree-abi-1.mm: Only apply at m32.\n\nFrom-SVN: r164747", "tree": {"sha": "44591bf933bcb9bd5ef88993939914f51af605a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/44591bf933bcb9bd5ef88993939914f51af605a8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2de87f04d8e84834da204ded5a48e2baf0e4bc34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2de87f04d8e84834da204ded5a48e2baf0e4bc34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2de87f04d8e84834da204ded5a48e2baf0e4bc34"}], "stats": {"total": 55, "additions": 44, "deletions": 11}, "files": [{"sha": "8bf5f92ecb2e07ef71da7903e9006680283e9fa3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "patch": "@@ -1,3 +1,25 @@\n+2010-09-30  Iain Sandoe  <iains@gcc.gnu.org>\n+\n+\tPR objc/45842\n+\t* objc.dg/threedotthree-abi-1.m: Only apply at m32.\n+\t* objc.dg/const-str-3.m: Correct header for memcpy.\n+\t* objc.dg/const-str-7.m: Likewise.\n+\t* objc.dg/method-20b.m: Provide an implementation of Object.\n+\tAdjust XFAIL for m64 NeXT runtime.\n+\t* objc.dg/const-str-12b.m: Use mapped data types Darwin >= 9.\n+\t* objc.dg/encode-3.m: Correct line ordering, provide header for \n+\tsprintf.\n+\t* objc.dg/encode-7-next.m: Only run for 32bit.\n+\t* objc.dg/encode-7-next-64bit.m: Only run for 64bit.\n+\t* objc.dg/type-size-2.m: Provide an implementation of Object.\n+\tAjust headers.\n+\t* obj-c++.dg/const-str-7.mm: Correct header for memcpy.\n+\t* obj-c++.dg/const-str-12.mm: Use mapped data types Darwin >= 9.\n+\t* obj-c++.dg/method-23.mm: Provide an implementation of Object.\n+\tAdjust XFAIL for m64 NeXT runtime.\n+\t* obj-c++.dg/method-22.mm: Likewise.\n+\t* obj-c++.dg/threedotthree-abi-1.mm: Only apply at m32.\n+\n 2010-09-30  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \tMerge from 'apple/trunk' branch on FSF servers."}, {"sha": "b92b50bcb090161099c004c94c0a1f129f482b81", "filename": "gcc/testsuite/objc.dg/const-str-12b.m", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-12b.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-12b.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-12b.m?ref=3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "patch": "@@ -5,6 +5,7 @@\n /* { dg-do compile } */\n \n #include \"../objc-obj-c++-shared/Object1.h\"\n+#import \"../objc-obj-c++-shared/next-mapping.h\"\n \n @interface Foo: Object {\n   char *cString;\n@@ -17,7 +18,11 @@ @interface Bar: Object\n + (Foo *) getString: (int) which;\n @end\n \n+#ifdef NEXT_OBJC_USE_NEW_INTERFACE\n+struct fudge_objc_class _FooClassReference;\n+#else\n struct objc_class _FooClassReference;\n+#endif\n \n @implementation Bar\n + (Foo *) getString: (int) which {"}, {"sha": "26e72808e7ce9e8dfef6d32c9e50d0ce0c6d7489", "filename": "gcc/testsuite/objc.dg/const-str-3.m", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-3.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-3.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-3.m?ref=3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "patch": "@@ -8,7 +8,7 @@\n #import \"../objc-obj-c++-shared/next-mapping.h\"\n #include <stdio.h>\n #include <stdlib.h>\n-#include <memory.h>\n+#include <string.h>\n \n @interface Foo: Object {\n   char *cString;"}, {"sha": "24c5dd3ed82d7a15f65c56e6fafa30b53448b24c", "filename": "gcc/testsuite/objc.dg/const-str-7.m", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-7.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-7.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-7.m?ref=3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "patch": "@@ -6,7 +6,7 @@\n #include \"../objc-obj-c++-shared/Object1.h\"\n #include <stdio.h>\n #include <stdlib.h>\n-#include <memory.h>\n+#include <string.h>\n \n @interface Foo: Object {\n   char *cString;"}, {"sha": "46a6eb898a75a43669ea9e9de485ecd19efae0f8", "filename": "gcc/testsuite/objc.dg/encode-3.m", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fencode-3.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fencode-3.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fencode-3.m?ref=3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "patch": "@@ -1,10 +1,11 @@\n /* Method encoding tests for stand-alone @protocol declarations.  */\n /* Contributed by Ziemowit Laski <zlaski@apple.com>.  */\n /* { dg-do run } */\n+/* { dg-xfail-run-if \"Needs OBJC2 ABI\" { *-*-darwin* && { lp64 && { ! objc2 } } } { \"-fnext-runtime\" } { \"\" } } */\n \n-#include <stdlib.h>\n #include \"../objc-obj-c++-shared/Protocol1.h\"\n-/* { dg-xfail-run-if \"Needs OBJC2 ABI\" { *-*-darwin* && { lp64 && { ! objc2 } } } { \"-fnext-runtime\" } { \"\" } } */\n+#include <stdio.h>\n+#include <stdlib.h>\n \n #ifdef __cplusplus\n #define ProtoBool bool"}, {"sha": "bda3da8d82f271f6291707b1eba8dd68cf3d580d", "filename": "gcc/testsuite/objc.dg/encode-7-next-64bit.m", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fencode-7-next-64bit.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fencode-7-next-64bit.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fencode-7-next-64bit.m?ref=3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "patch": "@@ -1,8 +1,9 @@\n /* Additional testing for the NeXT runtime. Encoding in -m64 mode  */\n \n /* { dg-do run { target *-*-darwin* } } */\n-/* { dg-options \"-m64\" } */\n+/* { dg-require-effective-target lp64 } */\n /* { dg-skip-if \"\" { *-*-* } { \"-fgnu-runtime\" } { \"\" } } */\n+/* { dg-xfail-run-if \"Needs OBJC2 ABI\" { *-*-darwin* && { lp64 && { ! objc2 } } } { \"-fnext-runtime\" } { \"\" } } */\n \n #include <objc/Object.h>\n #include <stdbool.h>"}, {"sha": "70cd4b8a4e15902277ff61dc51970a858df4045d", "filename": "gcc/testsuite/objc.dg/encode-7-next.m", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fencode-7-next.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fencode-7-next.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fencode-7-next.m?ref=3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "patch": "@@ -2,7 +2,7 @@\n /* Author: Ziemowit Laski  <zlaski@apple.com>  */\n \n /* { dg-do run { target *-*-darwin* } } */\n-/* { dg-skip-if \"\" { powerpc*-*-darwin* } { \"-m64\" } { \"\" } } */\n+/* { dg-require-effective-target ilp32 } */\n /* { dg-skip-if \"\" { *-*-* } { \"-fgnu-runtime\" } { \"\" } } */\n \n #include \"../objc-obj-c++-shared/Object1.h\""}, {"sha": "733d8722b53d9d0eb8860de3212db239f80290f0", "filename": "gcc/testsuite/objc.dg/method-20b.m", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fmethod-20b.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fmethod-20b.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fmethod-20b.m?ref=3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "patch": "@@ -2,6 +2,8 @@\n    they should.  */\n /* { dg-do run } */\n /* { dg-options \"-O2\" } */\n+/* { dg-additional-sources \"../objc-obj-c++-shared/Object1.m\" } */\n+/* { dg-xfail-run-if \"Needs OBJC2 ABI\" { *-*-darwin* && { lp64 && { ! objc2 } } } { \"-fnext-runtime\" } { \"\" } } */\n \n #include \"../objc-obj-c++-shared/Object1.h\"\n #include <string.h>"}, {"sha": "5eb00014e7e72797804afa6ad0357851cde9145f", "filename": "gcc/testsuite/objc.dg/threedotthree-abi-1.m", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fthreedotthree-abi-1.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Fthreedotthree-abi-1.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fthreedotthree-abi-1.m?ref=3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "patch": "@@ -1,14 +1,15 @@\n /* This file tests that things are encoded using the gcc-3.3 ABI which is only\n    used by the NeXT runtime.  */\n /* { dg-do run { target *-*-darwin* } } */\n+/* { dg-require-effective-target ilp32 } */\n /* { dg-skip-if \"\" { *-*-* } { \"-fgnu-runtime\" } { \"\" } } */\n+\n+#include \"../objc-obj-c++-shared/Protocol1.h\"\n #include <stdio.h>\n #include <string.h>\n-#include \"../objc-obj-c++-shared/Protocol1.h\"\n \n extern void abort();\n \n-\n @protocol CommonProtocol\n \n -(oneway void)methodCall_On:(in bycopy id)someValue_On;"}, {"sha": "656d85a57b8b26f3d2c3a30df4f3d111d82e49f9", "filename": "gcc/testsuite/objc.dg/type-size-2.m", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Ftype-size-2.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bc33871ce3b2eec4048232dc94c92980ee7e4b0/gcc%2Ftestsuite%2Fobjc.dg%2Ftype-size-2.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Ftype-size-2.m?ref=3bc33871ce3b2eec4048232dc94c92980ee7e4b0", "patch": "@@ -4,9 +4,12 @@\n /* Contributed by Ziemowit Laski <zlaski@apple.com>.  */\n /* { dg-do run } */\n /* { dg-xfail-run-if \"Needs OBJC2 ABI\" { *-*-darwin* && { lp64 && { ! objc2 } } } { \"-fnext-runtime\" } { \"\" } } */\n+/* { dg-additional-sources \"../objc-obj-c++-shared/Object1.m\" } */\n+\n #include \"../objc-obj-c++-shared/Object1.h\"\n #include \"../objc-obj-c++-shared/next-mapping.h\"\n-//#include <objc/objc.h>\n+#include <stdio.h>\n+#include <stdlib.h>\n #ifdef __NEXT_RUNTIME__\n #include <objc/objc-runtime.h>\n #define METHOD Method\n@@ -70,5 +73,3 @@ int main(void) {\n   CHECK_IF(totsize == offs4 + sizeof(int *));                                           \n   return 0;\n }\n-\n-#include \"../objc-obj-c++-shared/Object1-implementation.h\""}]}