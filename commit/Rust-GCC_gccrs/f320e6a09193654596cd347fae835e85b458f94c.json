{"sha": "f320e6a09193654596cd347fae835e85b458f94c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjMyMGU2YTA5MTkzNjU0NTk2Y2QzNDdmYWU4MzVlODViNDU4Zjk0Yw==", "commit": {"author": {"name": "Ville Voutilainen", "email": "ville.voutilainen@gmail.com", "date": "2016-10-20T11:54:52Z"}, "committer": {"name": "Ville Voutilainen", "email": "ville@gcc.gnu.org", "date": "2016-10-20T11:54:52Z"}, "message": "Do the operator= SFINAE in the return type for optional,\n\nnot in the template parameters.\n* include/std/optional (operator=(_Up&&)): Move SFINAE\nfrom template parameters to the return type.\n(operator=(const optional<_Up>&)): Likewise.\n(operator=(optional<_Up>&&)): Likewise.\n\nFrom-SVN: r241372", "tree": {"sha": "e918f7173f1a80275990376780df8b568e73df2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e918f7173f1a80275990376780df8b568e73df2c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f320e6a09193654596cd347fae835e85b458f94c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f320e6a09193654596cd347fae835e85b458f94c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f320e6a09193654596cd347fae835e85b458f94c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f320e6a09193654596cd347fae835e85b458f94c/comments", "author": {"login": "villevoutilainen", "id": 963599, "node_id": "MDQ6VXNlcjk2MzU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villevoutilainen", "html_url": "https://github.com/villevoutilainen", "followers_url": "https://api.github.com/users/villevoutilainen/followers", "following_url": "https://api.github.com/users/villevoutilainen/following{/other_user}", "gists_url": "https://api.github.com/users/villevoutilainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/villevoutilainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villevoutilainen/subscriptions", "organizations_url": "https://api.github.com/users/villevoutilainen/orgs", "repos_url": "https://api.github.com/users/villevoutilainen/repos", "events_url": "https://api.github.com/users/villevoutilainen/events{/privacy}", "received_events_url": "https://api.github.com/users/villevoutilainen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "villevoutilainen", "id": 963599, "node_id": "MDQ6VXNlcjk2MzU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villevoutilainen", "html_url": "https://github.com/villevoutilainen", "followers_url": "https://api.github.com/users/villevoutilainen/followers", "following_url": "https://api.github.com/users/villevoutilainen/following{/other_user}", "gists_url": "https://api.github.com/users/villevoutilainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/villevoutilainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villevoutilainen/subscriptions", "organizations_url": "https://api.github.com/users/villevoutilainen/orgs", "repos_url": "https://api.github.com/users/villevoutilainen/repos", "events_url": "https://api.github.com/users/villevoutilainen/events{/privacy}", "received_events_url": "https://api.github.com/users/villevoutilainen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "88b3e631506a51e5e1ae04224efe0b5ac5f7d0ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88b3e631506a51e5e1ae04224efe0b5ac5f7d0ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88b3e631506a51e5e1ae04224efe0b5ac5f7d0ca"}], "stats": {"total": 64, "additions": 35, "deletions": 29}, "files": [{"sha": "378e9fad1457bec7dd26e8e0fba91bb2a6968712", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f320e6a09193654596cd347fae835e85b458f94c/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f320e6a09193654596cd347fae835e85b458f94c/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=f320e6a09193654596cd347fae835e85b458f94c", "patch": "@@ -1,3 +1,12 @@\n+2016-10-20  Ville Voutilainen  <ville.voutilainen@gmail.com>\n+\n+\tDo the operator= SFINAE in the return type for optional,\n+\tnot in the template parameters.\n+\t* include/std/optional (operator=(_Up&&)): Move SFINAE\n+\tfrom template parameters to the return type.\n+\t(operator=(const optional<_Up>&)): Likewise.\n+\t(operator=(optional<_Up>&&)): Likewise.\n+\n 2016-10-20  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* include/bits/allocator.h: Remove trailing whitespace, tab-indent."}, {"sha": "f272876fd8b3b9908472ddf7392a9f87b1244ec9", "filename": "libstdc++-v3/include/std/optional", "status": "modified", "additions": 26, "deletions": 29, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f320e6a09193654596cd347fae835e85b458f94c/libstdc%2B%2B-v3%2Finclude%2Fstd%2Foptional", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f320e6a09193654596cd347fae835e85b458f94c/libstdc%2B%2B-v3%2Finclude%2Fstd%2Foptional", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Foptional?ref=f320e6a09193654596cd347fae835e85b458f94c", "patch": "@@ -568,15 +568,14 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n         return *this;\n       }\n \n-      template<typename _Up = _Tp,\n-               enable_if_t<__and_<\n-\t\t\t     __not_<is_same<optional<_Tp>, decay_t<_Up>>>,\n-\t\t\t     is_constructible<_Tp, _Up>,\n-\t\t\t     __not_<__and_<is_scalar<_Tp>,\n-\t\t\t\t\t   is_same<_Tp, decay_t<_Up>>>>,\n-\t\t\t     is_assignable<_Tp&, _Up>>::value,\n-\t\t\t   bool> = true>\n-        optional&\n+      template<typename _Up = _Tp>\n+        enable_if_t<__and_<\n+\t\t      __not_<is_same<optional<_Tp>, decay_t<_Up>>>,\n+\t\t      is_constructible<_Tp, _Up>,\n+\t\t      __not_<__and_<is_scalar<_Tp>,\n+\t\t\t\t    is_same<_Tp, decay_t<_Up>>>>,\n+\t\t      is_assignable<_Tp&, _Up>>::value,\n+\t\t    optional&>\n         operator=(_Up&& __u)\n         {\n           if (this->_M_is_engaged())\n@@ -587,16 +586,15 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n           return *this;\n         }\n \n-      template<typename _Up,\n-               enable_if_t<__and_<\n-\t\t\t     __not_<is_same<_Tp, _Up>>,\n-\t\t\t     is_constructible<_Tp, const _Up&>,\n-\t\t\t     is_assignable<_Tp&, _Up>,\n-\t\t\t     __not_<__converts_from_optional<_Tp, _Up>>,\n-\t\t\t     __not_<__assigns_from_optional<_Tp, _Up>>\n-\t\t\t     >::value,\n-\t\t\t   bool> = true>\n-        optional&\n+      template<typename _Up>\n+\tenable_if_t<__and_<\n+\t\t      __not_<is_same<_Tp, _Up>>,\n+\t\t      is_constructible<_Tp, const _Up&>,\n+\t\t      is_assignable<_Tp&, _Up>,\n+\t\t      __not_<__converts_from_optional<_Tp, _Up>>,\n+\t\t      __not_<__assigns_from_optional<_Tp, _Up>>\n+\t\t      >::value,\n+\t\t    optional&>\n         operator=(const optional<_Up>& __u)\n         {\n           if (__u)\n@@ -613,16 +611,15 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n           return *this;\n         }\n \n-      template<typename _Up,\n-\t       enable_if_t<__and_<\n-\t\t\t     __not_<is_same<_Tp, _Up>>,\n-\t\t\t     is_constructible<_Tp, _Up>,\n-\t\t\t     is_assignable<_Tp&, _Up>,\n-\t\t\t     __not_<__converts_from_optional<_Tp, _Up>>,\n-\t\t\t     __not_<__assigns_from_optional<_Tp, _Up>>\n-\t\t\t     >::value,\n-\t\t\t   bool> = true>\n-        optional&\n+      template<typename _Up>\n+\tenable_if_t<__and_<\n+\t\t      __not_<is_same<_Tp, _Up>>,\n+\t\t      is_constructible<_Tp, _Up>,\n+\t\t      is_assignable<_Tp&, _Up>,\n+\t\t      __not_<__converts_from_optional<_Tp, _Up>>,\n+\t\t      __not_<__assigns_from_optional<_Tp, _Up>>\n+\t\t      >::value,\n+\t\t    optional&>\n         operator=(optional<_Up>&& __u)\n         {\n           if (__u)"}]}