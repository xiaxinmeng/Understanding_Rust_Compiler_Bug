{"sha": "6bbb3a69efa9d129c90179c3d00a0ac385a32f43", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmJiYjNhNjllZmE5ZDEyOWM5MDE3OWMzZDAwYTBhYzM4NWEzMmY0Mw==", "commit": {"author": {"name": "Volker Reichelt", "email": "v.reichelt@netcologne.de", "date": "2017-04-29T22:27:13Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2017-04-29T22:27:13Z"}, "message": "parser.c (cp_parser_member_declaration): Add fix-it hints for stray comma and missing semicolon at end of member declaration.\n\n        * parser.c (cp_parser_member_declaration): Add fix-it hints for\n        stray comma and missing semicolon at end of member declaration.\n\n        * g++.dg/diagnostic/member-decl-1.C: New test.\n\nFrom-SVN: r247412", "tree": {"sha": "c91b9914e72233b204f739045b85522526f2229f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c91b9914e72233b204f739045b85522526f2229f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6bbb3a69efa9d129c90179c3d00a0ac385a32f43", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bbb3a69efa9d129c90179c3d00a0ac385a32f43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6bbb3a69efa9d129c90179c3d00a0ac385a32f43", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bbb3a69efa9d129c90179c3d00a0ac385a32f43/comments", "author": {"login": "VReichelt", "id": 85767072, "node_id": "MDQ6VXNlcjg1NzY3MDcy", "avatar_url": "https://avatars.githubusercontent.com/u/85767072?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VReichelt", "html_url": "https://github.com/VReichelt", "followers_url": "https://api.github.com/users/VReichelt/followers", "following_url": "https://api.github.com/users/VReichelt/following{/other_user}", "gists_url": "https://api.github.com/users/VReichelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/VReichelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VReichelt/subscriptions", "organizations_url": "https://api.github.com/users/VReichelt/orgs", "repos_url": "https://api.github.com/users/VReichelt/repos", "events_url": "https://api.github.com/users/VReichelt/events{/privacy}", "received_events_url": "https://api.github.com/users/VReichelt/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "30fc569c180ea2bf773402d12e8435d99e42a389", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30fc569c180ea2bf773402d12e8435d99e42a389", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30fc569c180ea2bf773402d12e8435d99e42a389"}], "stats": {"total": 39, "additions": 35, "deletions": 4}, "files": [{"sha": "9c9818fa9ab83967d085e3b2471c0c0dc9b19d8e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bbb3a69efa9d129c90179c3d00a0ac385a32f43/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bbb3a69efa9d129c90179c3d00a0ac385a32f43/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6bbb3a69efa9d129c90179c3d00a0ac385a32f43", "patch": "@@ -1,3 +1,8 @@\n+2017-04-29  Volker Reichelt  <v.reichelt@netcologne.de>\n+\n+\t* parser.c (cp_parser_member_declaration): Add fix-it hints for\n+\tstray comma and missing semicolon at end of member declaration.\n+\n 2017-04-27  Volker Reichelt  <v.reichelt@netcologne.de>\n \n \t* parser.c (cp_parser_cast_expression): Add target type of cast to"}, {"sha": "95af052454eb9168b628ecb19b7ec4c6b349eead", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bbb3a69efa9d129c90179c3d00a0ac385a32f43/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bbb3a69efa9d129c90179c3d00a0ac385a32f43/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=6bbb3a69efa9d129c90179c3d00a0ac385a32f43", "patch": "@@ -23461,8 +23461,10 @@ cp_parser_member_declaration (cp_parser* parser)\n \t      if (cp_lexer_next_token_is (parser->lexer, CPP_SEMICOLON))\n \t\t{\n \t\t  cp_token *token = cp_lexer_previous_token (parser->lexer);\n-\t\t  error_at (token->location,\n-\t\t\t    \"stray %<,%> at end of member declaration\");\n+\t\t  gcc_rich_location richloc (token->location);\n+\t\t  richloc.add_fixit_remove ();\n+\t\t  error_at_rich_loc (&richloc, \"stray %<,%> at end of \"\n+\t\t\t\t     \"member declaration\");\n \t\t}\n \t    }\n \t  /* If the next token isn't a `;', then we have a parse error.  */\n@@ -23473,8 +23475,10 @@ cp_parser_member_declaration (cp_parser* parser)\n \t\t actual semicolon is missing.  Find the previous token\n \t\t and use that for our error position.  */\n \t      cp_token *token = cp_lexer_previous_token (parser->lexer);\n-\t      error_at (token->location,\n-\t\t\t\"expected %<;%> at end of member declaration\");\n+\t      gcc_rich_location richloc (token->location);\n+\t      richloc.add_fixit_insert_after (\";\");\n+\t      error_at_rich_loc (&richloc, \"expected %<;%> at end of \"\n+\t\t\t\t \"member declaration\");\n \n \t      /* Assume that the user meant to provide a semicolon.  If\n \t\t we were to cp_parser_skip_to_end_of_statement, we might"}, {"sha": "818e002b7bf07cc618a1f3f83d997f9f2602546a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bbb3a69efa9d129c90179c3d00a0ac385a32f43/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bbb3a69efa9d129c90179c3d00a0ac385a32f43/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6bbb3a69efa9d129c90179c3d00a0ac385a32f43", "patch": "@@ -1,3 +1,7 @@\n+2017-04-29  Volker Reichelt  <v.reichelt@netcologne.de>\n+\n+\t* g++.dg/diagnostic/member-decl-1.C: New test.\n+\n 2017-04-29  Marc Glisse  <marc.glisse@inria.fr>\n \n \tPR tree-optimization/80487"}, {"sha": "be1ef85c48965bf3d795a2c8786cea4b1b6c6a4b", "filename": "gcc/testsuite/g++.dg/diagnostic/member-decl-1.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bbb3a69efa9d129c90179c3d00a0ac385a32f43/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fmember-decl-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bbb3a69efa9d129c90179c3d00a0ac385a32f43/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fmember-decl-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fmember-decl-1.C?ref=6bbb3a69efa9d129c90179c3d00a0ac385a32f43", "patch": "@@ -0,0 +1,18 @@\n+// { dg-options \"-fdiagnostics-show-caret\" }\n+\n+struct A\n+{\n+  int i,;  /* { dg-error \"stray .,. at end of member declaration\" }\n+  { dg-begin-multiline-output \"\" }\n+   int i,;\n+        ^\n+        -\n+  { dg-end-multiline-output \"\" } */\n+\n+  int j  /* { dg-error \"expected .;. at end of member declaration\" }\n+  { dg-begin-multiline-output \"\" }\n+   int j\n+       ^\n+        ;\n+  { dg-end-multiline-output \"\" } */\n+};"}]}