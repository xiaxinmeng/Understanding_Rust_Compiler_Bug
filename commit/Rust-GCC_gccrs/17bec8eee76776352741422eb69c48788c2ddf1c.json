{"sha": "17bec8eee76776352741422eb69c48788c2ddf1c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTdiZWM4ZWVlNzY3NzYzNTI3NDE0MjJlYjY5YzQ4Nzg4YzJkZGYxYw==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@cygnus.co.uk", "date": "1999-10-10T11:37:46Z"}, "committer": {"name": "Bernd Schmidt", "email": "crux@gcc.gnu.org", "date": "1999-10-10T11:37:46Z"}, "message": "Don't put things between tablejumps and jump tables in loop.c\n\nFrom-SVN: r29887", "tree": {"sha": "b6ae3d6d89263adbe56709a7d54a3d75bb769731", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b6ae3d6d89263adbe56709a7d54a3d75bb769731"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/17bec8eee76776352741422eb69c48788c2ddf1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17bec8eee76776352741422eb69c48788c2ddf1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17bec8eee76776352741422eb69c48788c2ddf1c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17bec8eee76776352741422eb69c48788c2ddf1c/comments", "author": null, "committer": null, "parents": [{"sha": "85c45372dcd5cd6457e2c5e4d2fa941bb5dbc592", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85c45372dcd5cd6457e2c5e4d2fa941bb5dbc592", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85c45372dcd5cd6457e2c5e4d2fa941bb5dbc592"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "ab9aef9dee946854f0307c9114a274ee6d48cb61", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17bec8eee76776352741422eb69c48788c2ddf1c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17bec8eee76776352741422eb69c48788c2ddf1c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=17bec8eee76776352741422eb69c48788c2ddf1c", "patch": "@@ -1,3 +1,8 @@\n+Sun Oct 10 13:28:48 1999  Bernd Schmidt  <bernds@cygnus.co.uk>\n+\n+\t* loop.c (find_and_verify_loops): When looking for a BARRIER, don't\n+\tuse one before a jump table.\n+\n Sun Oct 10 02:41:41 1999  Richard Henderson  <rth@cygnus.com>\n \n \t* genrecog.c (add_to_sequence): Move allow_const_int test outside"}, {"sha": "ea815fff847a2969c56e704cef608f47d91c7357", "filename": "gcc/loop.c", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17bec8eee76776352741422eb69c48788c2ddf1c/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17bec8eee76776352741422eb69c48788c2ddf1c/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=17bec8eee76776352741422eb69c48788c2ddf1c", "patch": "@@ -2841,16 +2841,30 @@ find_and_verify_loops (f)\n \t\trtx target\n \t\t  = JUMP_LABEL (insn) ? JUMP_LABEL (insn) : get_last_insn ();\n \t\tint target_loop_num = uid_loop_num[INSN_UID (target)];\n-\t\trtx loc;\n+\t\trtx loc, loc2;\n \n \t\tfor (loc = target; loc; loc = PREV_INSN (loc))\n \t\t  if (GET_CODE (loc) == BARRIER\n+\t\t      /* Don't move things inside a tablejump.  */\n+\t\t      && ((loc2 = next_nonnote_insn (loc)) == 0\n+\t\t\t  || GET_CODE (loc2) != CODE_LABEL\n+\t\t\t  || (loc2 = next_nonnote_insn (loc2)) == 0\n+\t\t\t  || GET_CODE (loc2) != JUMP_INSN\n+\t\t\t  || (GET_CODE (PATTERN (loc2)) != ADDR_VEC\n+\t\t\t      && GET_CODE (PATTERN (loc2)) != ADDR_DIFF_VEC))\n \t\t      && uid_loop_num[INSN_UID (loc)] == target_loop_num)\n \t\t    break;\n \n \t\tif (loc == 0)\n \t\t  for (loc = target; loc; loc = NEXT_INSN (loc))\n \t\t    if (GET_CODE (loc) == BARRIER\n+\t\t\t/* Don't move things inside a tablejump.  */\n+\t\t\t&& ((loc2 = next_nonnote_insn (loc)) == 0\n+\t\t\t    || GET_CODE (loc2) != CODE_LABEL\n+\t\t\t    || (loc2 = next_nonnote_insn (loc2)) == 0\n+\t\t\t    || GET_CODE (loc2) != JUMP_INSN\n+\t\t\t    || (GET_CODE (PATTERN (loc2)) != ADDR_VEC\n+\t\t\t\t&& GET_CODE (PATTERN (loc2)) != ADDR_DIFF_VEC))\n \t\t\t&& uid_loop_num[INSN_UID (loc)] == target_loop_num)\n \t\t      break;\n "}]}