{"sha": "b52b98849feb98dccfe62a6fc914be3f2e167c1d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjUyYjk4ODQ5ZmViOThkY2NmZTYyYTZmYzkxNGJlM2YyZTE2N2MxZA==", "commit": {"author": {"name": "Christian Bruel", "email": "christian.bruel@st.com", "date": "2015-12-17T13:56:05Z"}, "committer": {"name": "Christian Bruel", "email": "chrbr@gcc.gnu.org", "date": "2015-12-17T13:56:05Z"}, "message": "tree.h (TYPE_MODE_RAW): New macro.\n\n2015-12-17  Christian Bruel  <christian.bruel@st.com>\n\n\t* tree.h (TYPE_MODE_RAW): New macro.\n\t* tree-streamer-out.c (pack_ts_type_common_value_fields):\n\tReplace TYPE_MODE by TYPE_MODE_RAW.\n\nFrom-SVN: r231758", "tree": {"sha": "a7dc4160b85544cb435236dbef90b30ebb85fdbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a7dc4160b85544cb435236dbef90b30ebb85fdbf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b52b98849feb98dccfe62a6fc914be3f2e167c1d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b52b98849feb98dccfe62a6fc914be3f2e167c1d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b52b98849feb98dccfe62a6fc914be3f2e167c1d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b52b98849feb98dccfe62a6fc914be3f2e167c1d/comments", "author": null, "committer": null, "parents": [{"sha": "2833da1d2a52591aa76c867d00ea3f838f387736", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2833da1d2a52591aa76c867d00ea3f838f387736", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2833da1d2a52591aa76c867d00ea3f838f387736"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "1db66d6583bb23a5156444bad7aae9cc1a2561de", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b52b98849feb98dccfe62a6fc914be3f2e167c1d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b52b98849feb98dccfe62a6fc914be3f2e167c1d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b52b98849feb98dccfe62a6fc914be3f2e167c1d", "patch": "@@ -1,3 +1,9 @@\n+2015-12-17  Christian Bruel  <christian.bruel@st.com>\n+\n+\t* tree.h (TYPE_MODE_RAW): New macro.\n+\t* tree-streamer-out.c (pack_ts_type_common_value_fields):\n+\tReplace TYPE_MODE by TYPE_MODE_RAW.\n+\n 2015-12-17  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/68835"}, {"sha": "ddb7eee6adebe2274d22a9550ee0f5799cdf8886", "filename": "gcc/tree-streamer-out.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b52b98849feb98dccfe62a6fc914be3f2e167c1d/gcc%2Ftree-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b52b98849feb98dccfe62a6fc914be3f2e167c1d/gcc%2Ftree-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-streamer-out.c?ref=b52b98849feb98dccfe62a6fc914be3f2e167c1d", "patch": "@@ -308,7 +308,10 @@ pack_ts_function_decl_value_fields (struct bitpack_d *bp, tree expr)\n static void\n pack_ts_type_common_value_fields (struct bitpack_d *bp, tree expr)\n {\n-  bp_pack_machine_mode (bp, TYPE_MODE (expr));\n+  /* for VECTOR_TYPE, TYPE_MODE reevaluates the mode using target_flags\n+     not necessary valid in a global context.\n+     Use the raw value previously set by layout_type.  */\n+  bp_pack_machine_mode (bp, TYPE_MODE_RAW (expr));\n   bp_pack_value (bp, TYPE_STRING_FLAG (expr), 1);\n   /* TYPE_NO_FORCE_BLK is private to stor-layout and need\n      no streaming.  */"}, {"sha": "5d1a77c76fc10a50c7fc8619f098d19226b0d9da", "filename": "gcc/tree.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b52b98849feb98dccfe62a6fc914be3f2e167c1d/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b52b98849feb98dccfe62a6fc914be3f2e167c1d/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=b52b98849feb98dccfe62a6fc914be3f2e167c1d", "patch": "@@ -1793,6 +1793,7 @@ extern void protected_set_expr_location (tree, location_t);\n #define TYPE_MAIN_VARIANT(NODE) (TYPE_CHECK (NODE)->type_common.main_variant)\n #define TYPE_CONTEXT(NODE) (TYPE_CHECK (NODE)->type_common.context)\n \n+#define TYPE_MODE_RAW(NODE) (TYPE_CHECK (NODE)->type_common.mode)\n #define TYPE_MODE(NODE) \\\n   (VECTOR_TYPE_P (TYPE_CHECK (NODE)) \\\n    ? vector_type_mode (NODE) : (NODE)->type_common.mode)"}]}