{"sha": "6e30c48120500ef2e8643a7574636ed02567dbb6", "node_id": "C_kwDOANBUbNoAKDZlMzBjNDgxMjA1MDBlZjJlODY0M2E3NTc0NjM2ZWQwMjU2N2RiYjY", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2021-11-11T13:39:19Z"}, "committer": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2021-11-11T13:39:19Z"}, "message": "Fix recursion discovery in ipa-pure-const\n\nWe make self recursive functions as looping of fear of endless recursion.\nThis is done correctly for local pure/const and for non-trivial SCCs in\ncallgraph, but for trivial SCCs we miss the flag.\n\nI think it is bad decision since infinite recursion will run out of stack,\nbut changing it upsets some testcases and should be done independently.\nSo this patch is fixing current behaviour to be consistent.\n\ngcc/ChangeLog:\n\n2021-11-11  Jan Hubicka  <hubicka@ucw.cz>\n\n\t* ipa-pure-const.c (propagate_pure_const): Self recursion is\n\ta side effects.", "tree": {"sha": "caa16297293051a1172012d9d00d10f889d5dfb4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/caa16297293051a1172012d9d00d10f889d5dfb4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e30c48120500ef2e8643a7574636ed02567dbb6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e30c48120500ef2e8643a7574636ed02567dbb6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e30c48120500ef2e8643a7574636ed02567dbb6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e30c48120500ef2e8643a7574636ed02567dbb6/comments", "author": null, "committer": null, "parents": [{"sha": "61396dfb2acfe956d420b279b2becec1c4f81ba2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61396dfb2acfe956d420b279b2becec1c4f81ba2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61396dfb2acfe956d420b279b2becec1c4f81ba2"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "422b52fba4be1ad5d0dfec65c885582fdc1e51fb", "filename": "gcc/ipa-pure-const.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e30c48120500ef2e8643a7574636ed02567dbb6/gcc%2Fipa-pure-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e30c48120500ef2e8643a7574636ed02567dbb6/gcc%2Fipa-pure-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-pure-const.c?ref=6e30c48120500ef2e8643a7574636ed02567dbb6", "patch": "@@ -1513,6 +1513,9 @@ propagate_pure_const (void)\n \t      enum pure_const_state_e edge_state = IPA_CONST;\n \t      bool edge_looping = false;\n \n+\t      if (e->recursive_p ())\n+\t\tlooping = true;\n+\n \t      if (dump_file && (dump_flags & TDF_DETAILS))\n \t\t{\n \t\t  fprintf (dump_file, \"    Call to %s\","}]}