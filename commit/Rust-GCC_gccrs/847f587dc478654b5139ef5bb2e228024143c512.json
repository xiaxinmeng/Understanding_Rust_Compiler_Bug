{"sha": "847f587dc478654b5139ef5bb2e228024143c512", "node_id": "C_kwDOANBUbNoAKDg0N2Y1ODdkYzQ3ODY1NGI1MTM5ZWY1YmIyZTIyODAyNDE0M2M1MTI", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2021-11-11T16:17:30Z"}, "committer": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2021-11-12T14:46:05Z"}, "message": "Fortran: Use build_debug_expr_decl to create DEBUG_DECL_EXPRs\n\nThis patch converts one more open coded construction of a\nDEBUG_EXPR_DECL to a call of build_debug_expr_decl that I missed in my\nprevious patch befause it happens to be in the Fortran front-end.\n\ngcc/fortran/ChangeLog:\n\n2021-11-11  Martin Jambor  <mjambor@suse.cz>\n\n\t* trans-types.c (gfc_get_array_descr_info): Use build_debug_expr_decl\n\tinstead of building DEBUG_EXPR_DECL manually.", "tree": {"sha": "412fd6fbd7a44d3d98c7caafda0b2a9a8471b06a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/412fd6fbd7a44d3d98c7caafda0b2a9a8471b06a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/847f587dc478654b5139ef5bb2e228024143c512", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE5elVTFt/d09Vsoczv2PBvD+kNUAFAmGOfi0ACgkQv2PBvD+k\nNUBtxRAAnvWzBm7E4gJKwv6sMHvVDrwr1PN6QFgBz2YXF9ohO1Fvs3PUZ0lFpE4m\n2C7Ea1Ho3VoIyeMa24nX+7n8uzDKKX254c6nuz2mJMdUDcHhBhXee0NCGh6hnr/v\nC32fdKVTd18RccsQOsqUHwtqVkel5JEeNNOTcZ/8Ul8Bpl7UB5E+XexGC3dwi18o\nw89klHUd6a1/3Rd2uoutOcCtb5Yd7gchBBwLK1un9ljcFIOT5qZlGmB05M4VlyU0\nv7ct85uLBB0TmIkH4x2+jgD3LhvpVLpxeoJuFLvHrnSl424As5j1NR/0eiC8dwYq\nGufGhPzQZdLx5xhLJtggGQqSXWtXDQmXr24nSAr4J5N6wA6YjxFTgKaIOfiXYnQA\nvl+3cbltYxd8OyHQCvOWo+J09/DtkQOxt1Kf6sOlFUXYajK/7HYX3WvbDzo/sCHh\nmrred8HubUiwAkVZ0avlqznWREHeFCvurtjlIh5q2STiN0UlNo5z6yVBAACtAphj\npijqSE989rqYz2BToR2/94yrV723noAczeRGwi2R4Er0i6BX0x8vPuJg6xA4ItQQ\nFhcJqBnEflRes2CQDW7+P8b8LZ1nMvpofXMlI/RGaUFL6H2v3CwM4eaZvKehc++/\nL9OOZAhHHxiotc2Jl9BYWAnhUyGrAMD25pKyRIgxo87a39rftqk=\n=zTms\n-----END PGP SIGNATURE-----", "payload": "tree 412fd6fbd7a44d3d98c7caafda0b2a9a8471b06a\nparent 6849c71c065e599282c98f3678f22ac52d97a755\nauthor Martin Jambor <mjambor@suse.cz> 1636647450 +0100\ncommitter Martin Jambor <mjambor@suse.cz> 1636728365 +0100\n\nFortran: Use build_debug_expr_decl to create DEBUG_DECL_EXPRs\n\nThis patch converts one more open coded construction of a\nDEBUG_EXPR_DECL to a call of build_debug_expr_decl that I missed in my\nprevious patch befause it happens to be in the Fortran front-end.\n\ngcc/fortran/ChangeLog:\n\n2021-11-11  Martin Jambor  <mjambor@suse.cz>\n\n\t* trans-types.c (gfc_get_array_descr_info): Use build_debug_expr_decl\n\tinstead of building DEBUG_EXPR_DECL manually.\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/847f587dc478654b5139ef5bb2e228024143c512", "html_url": "https://github.com/Rust-GCC/gccrs/commit/847f587dc478654b5139ef5bb2e228024143c512", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/847f587dc478654b5139ef5bb2e228024143c512/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6849c71c065e599282c98f3678f22ac52d97a755", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6849c71c065e599282c98f3678f22ac52d97a755", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6849c71c065e599282c98f3678f22ac52d97a755"}], "stats": {"total": 6, "additions": 2, "deletions": 4}, "files": [{"sha": "e5d36d5a58f4dc5f5f998eab52700ade74246e62", "filename": "gcc/fortran/trans-types.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/847f587dc478654b5139ef5bb2e228024143c512/gcc%2Ffortran%2Ftrans-types.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/847f587dc478654b5139ef5bb2e228024143c512/gcc%2Ffortran%2Ftrans-types.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-types.c?ref=847f587dc478654b5139ef5bb2e228024143c512", "patch": "@@ -3417,10 +3417,8 @@ gfc_get_array_descr_info (const_tree type, struct array_descr_info *info)\n   base_decl = GFC_TYPE_ARRAY_BASE_DECL (type, indirect);\n   if (!base_decl)\n     {\n-      base_decl = make_node (DEBUG_EXPR_DECL);\n-      DECL_ARTIFICIAL (base_decl) = 1;\n-      TREE_TYPE (base_decl) = indirect ? build_pointer_type (ptype) : ptype;\n-      SET_DECL_MODE (base_decl, TYPE_MODE (TREE_TYPE (base_decl)));\n+      base_decl = build_debug_expr_decl (indirect\n+\t\t\t\t\t ? build_pointer_type (ptype) : ptype);\n       GFC_TYPE_ARRAY_BASE_DECL (type, indirect) = base_decl;\n     }\n   info->base_decl = base_decl;"}]}