{"sha": "0fa83258de63ad09dcba856b3ac43f9139fc2ff6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGZhODMyNThkZTYzYWQwOWRjYmE4NTZiM2FjNDNmOTEzOWZjMmZmNg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-03-31T21:01:17Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-03-31T21:01:17Z"}, "message": "(emit_block_move, emit_push_insn, expand_assignment): Size passed to\nmemcpy/bcopy is SIZETYPE, not Pmode.\n\nFrom-SVN: r3966", "tree": {"sha": "f3e0a2e0d672d06c92488615b1dc2e9545a48690", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f3e0a2e0d672d06c92488615b1dc2e9545a48690"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0fa83258de63ad09dcba856b3ac43f9139fc2ff6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fa83258de63ad09dcba856b3ac43f9139fc2ff6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0fa83258de63ad09dcba856b3ac43f9139fc2ff6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fa83258de63ad09dcba856b3ac43f9139fc2ff6/comments", "author": null, "committer": null, "parents": [{"sha": "41e2a8bda05586c60114d9b3128c5f180566c727", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41e2a8bda05586c60114d9b3128c5f180566c727", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41e2a8bda05586c60114d9b3128c5f180566c727"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "0ca8fe06ebeb8a661c43b7e4e1833d9c0da0bd68", "filename": "gcc/expr.c", "status": "modified", "additions": 18, "deletions": 6, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0fa83258de63ad09dcba856b3ac43f9139fc2ff6/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0fa83258de63ad09dcba856b3ac43f9139fc2ff6/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=0fa83258de63ad09dcba856b3ac43f9139fc2ff6", "patch": "@@ -1410,12 +1410,16 @@ emit_block_move (x, y, size, align)\n       emit_library_call (memcpy_libfunc, 0,\n \t\t\t VOIDmode, 3, XEXP (x, 0), Pmode,\n \t\t\t XEXP (y, 0), Pmode,\n-\t\t\t convert_to_mode (Pmode, size, 1), Pmode);\n+\t\t\t convert_to_mode (TYPE_MODE (sizetype), size,\n+\t\t\t\t\t  TREE_UNSIGNED (sizetype)),\n+\t\t\t TYPE_MODE (sizetype));\n #else\n       emit_library_call (bcopy_libfunc, 0,\n \t\t\t VOIDmode, 3, XEXP (y, 0), Pmode,\n \t\t\t XEXP (x, 0), Pmode,\n-\t\t\t convert_to_mode (Pmode, size, 1), Pmode);\n+\t\t\t convert_to_mode (TYPE_MODE (sizetype), size,\n+\t\t\t\t\t  TREE_UNSIGNED (sizetype)),\n+\t\t\t TYPE_MODE (sizetype));\n #endif\n     }\n }\n@@ -1991,11 +1995,15 @@ emit_push_insn (x, mode, type, size, align, partial, reg, extra,\n #ifdef TARGET_MEM_FUNCTIONS\n \t  emit_library_call (memcpy_libfunc, 0,\n \t\t\t     VOIDmode, 3, temp, Pmode, XEXP (xinner, 0), Pmode,\n-\t\t\t     size, Pmode);\n+\t\t\t     convert_to_mode (TYPE_MODE (sizetype),\n+\t\t\t\t\t      size, TREE_UNSIGNED (sizetype)),\n+\t\t\t     size, TYPE_MODE (sizetype));\n #else\n \t  emit_library_call (bcopy_libfunc, 0,\n \t\t\t     VOIDmode, 3, XEXP (xinner, 0), Pmode, temp, Pmode,\n-\t\t\t     size, Pmode);\n+\t\t\t     convert_to_mode (TYPE_MODE (sizetype),\n+\t\t\t\t\t      size, TREE_UNSIGNED (sizetype)),\n+\t\t\t     size, TYPE_MODE (sizetype));\n #endif\n \t  OK_DEFER_POP;\n \t}\n@@ -2222,12 +2230,16 @@ expand_assignment (to, from, want_value, suggest_reg)\n       emit_library_call (memcpy_libfunc, 0,\n \t\t\t VOIDmode, 3, XEXP (to_rtx, 0), Pmode,\n \t\t\t XEXP (from_rtx, 0), Pmode,\n-\t\t\t size, Pmode);\n+\t\t\t convert_to_mode (TYPE_MODE (sizetype),\n+\t\t\t\t\t  size, TREE_UNSIGNED (sizetype)),\n+\t\t\t size, TYPE_MODE (sizetype));\n #else\n       emit_library_call (bcopy_libfunc, 0,\n \t\t\t VOIDmode, 3, XEXP (from_rtx, 0), Pmode,\n \t\t\t XEXP (to_rtx, 0), Pmode,\n-\t\t\t size, Pmode);\n+\t\t\t convert_to_mode (TYPE_MODE (sizetype),\n+\t\t\t\t\t  size, TREE_UNSIGNED (sizetype)),\n+\t\t\t size, TYPE_MODE (sizetype));\n #endif\n \n       preserve_temp_slots (to_rtx);"}]}