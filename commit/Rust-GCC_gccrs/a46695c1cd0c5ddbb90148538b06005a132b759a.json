{"sha": "a46695c1cd0c5ddbb90148538b06005a132b759a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTQ2Njk1YzFjZDBjNWRkYmI5MDE0ODUzOGIwNjAwNWExMzJiNzU5YQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2019-05-11T07:50:22Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2019-05-11T07:50:22Z"}, "message": "typeck.c (cp_build_function_call_vec): When mark_used fails unconditionally return error_mark_node.\n\n/cp\n2019-05-11  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* typeck.c (cp_build_function_call_vec): When mark_used fails\n\tunconditionally return error_mark_node.\n\n/testsuite\n2019-05-11  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* g++.dg/cpp2a/multiple-deleted-destroying-delete-error-1.C: New.\n\t* g++.dg/cpp2a/multiple-deleted-destroying-delete-error-2.C: Likewise.\n\nFrom-SVN: r271091", "tree": {"sha": "aaa218139488d57cd4e59b29b6ed4db5d4a8b143", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aaa218139488d57cd4e59b29b6ed4db5d4a8b143"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a46695c1cd0c5ddbb90148538b06005a132b759a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a46695c1cd0c5ddbb90148538b06005a132b759a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a46695c1cd0c5ddbb90148538b06005a132b759a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a46695c1cd0c5ddbb90148538b06005a132b759a/comments", "author": null, "committer": null, "parents": [{"sha": "c130ab6aad57e0309ec02f58f383aece584ac8cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c130ab6aad57e0309ec02f58f383aece584ac8cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c130ab6aad57e0309ec02f58f383aece584ac8cb"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "3da2493f08cc43677af246f752195ddf860bbbaa", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a46695c1cd0c5ddbb90148538b06005a132b759a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a46695c1cd0c5ddbb90148538b06005a132b759a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a46695c1cd0c5ddbb90148538b06005a132b759a", "patch": "@@ -1,3 +1,8 @@\n+2019-05-11  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* typeck.c (cp_build_function_call_vec): When mark_used fails\n+\tunconditionally return error_mark_node.\n+\n 2019-05-10  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* decl.c (grokvardecl): Use an accurate location in error message"}, {"sha": "d1f965be28016f44861d2ad7c0dc63bfa7ad451e", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a46695c1cd0c5ddbb90148538b06005a132b759a/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a46695c1cd0c5ddbb90148538b06005a132b759a/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=a46695c1cd0c5ddbb90148538b06005a132b759a", "patch": "@@ -3836,7 +3836,7 @@ cp_build_function_call_vec (tree function, vec<tree, va_gc> **params,\n           return error_mark_node;\n         }\n \n-      if (!mark_used (function, complain) && !(complain & tf_error))\n+      if (!mark_used (function, complain))\n \treturn error_mark_node;\n       fndecl = function;\n "}, {"sha": "2efe608a93e96f0420ad003e2be05da2f74835d6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a46695c1cd0c5ddbb90148538b06005a132b759a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a46695c1cd0c5ddbb90148538b06005a132b759a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a46695c1cd0c5ddbb90148538b06005a132b759a", "patch": "@@ -1,3 +1,8 @@\n+2019-05-11  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* g++.dg/cpp2a/multiple-deleted-destroying-delete-error-1.C: New.\n+\t* g++.dg/cpp2a/multiple-deleted-destroying-delete-error-2.C: Likewise.\n+\n 2019-05-10  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/61968"}, {"sha": "01e41424bc7aaf74a4594e411d5b8f93d24428ad", "filename": "gcc/testsuite/g++.dg/cpp2a/multiple-deleted-destroying-delete-error-1.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a46695c1cd0c5ddbb90148538b06005a132b759a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fmultiple-deleted-destroying-delete-error-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a46695c1cd0c5ddbb90148538b06005a132b759a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fmultiple-deleted-destroying-delete-error-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fmultiple-deleted-destroying-delete-error-1.C?ref=a46695c1cd0c5ddbb90148538b06005a132b759a", "patch": "@@ -0,0 +1,12 @@\n+// { dg-do compile { target c++2a } }\n+\n+#include <new>\n+\n+namespace delete_selection_d {\n+  struct B {\n+    void operator delete(void*) = delete;\n+    void operator delete(B *, std::destroying_delete_t) = delete;\n+  };\n+  void delete_B(B *b) { delete b; }  // { dg-bogus \"deleted .* deleted\" }\n+  // { dg-error \"deleted\" \"\" { target c++2a } .-1 }\n+}"}, {"sha": "314e2e9b697c1579719e425827e6965396557ee1", "filename": "gcc/testsuite/g++.dg/cpp2a/multiple-deleted-destroying-delete-error-2.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a46695c1cd0c5ddbb90148538b06005a132b759a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fmultiple-deleted-destroying-delete-error-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a46695c1cd0c5ddbb90148538b06005a132b759a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fmultiple-deleted-destroying-delete-error-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fmultiple-deleted-destroying-delete-error-2.C?ref=a46695c1cd0c5ddbb90148538b06005a132b759a", "patch": "@@ -0,0 +1,12 @@\n+// { dg-do compile { target c++2a } }\n+\n+#include <new>\n+\n+namespace delete_selection_r {\n+  struct B {\n+    void operator delete(B *, std::destroying_delete_t) = delete;\n+    void operator delete(void*) = delete;\n+  };\n+  void delete_B(B *b) { delete b; }  // { dg-bogus \"deleted .* deleted\" }\n+  // { dg-error \"deleted\" \"\" { target c++2a } .-1 }\n+}"}]}