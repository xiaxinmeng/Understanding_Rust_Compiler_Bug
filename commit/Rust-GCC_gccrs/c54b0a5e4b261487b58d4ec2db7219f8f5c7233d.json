{"sha": "c54b0a5e4b261487b58d4ec2db7219f8f5c7233d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzU0YjBhNWU0YjI2MTQ4N2I1OGQ0ZWMyZGI3MjE5ZjhmNWM3MjMzZA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2001-07-01T20:50:03Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2001-07-01T20:50:03Z"}, "message": "expr.c (expand_expr, [...]): Correct check for side-effects in the value of an array element.\n\n\t* expr.c (expand_expr, case ARRAY_REF): Correct check for\n\tside-effects in the value of an array element.\n\nFrom-SVN: r43680", "tree": {"sha": "adfd7bbb9c5ae27997b84e55b147cbff86b52a22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/adfd7bbb9c5ae27997b84e55b147cbff86b52a22"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c54b0a5e4b261487b58d4ec2db7219f8f5c7233d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c54b0a5e4b261487b58d4ec2db7219f8f5c7233d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c54b0a5e4b261487b58d4ec2db7219f8f5c7233d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c54b0a5e4b261487b58d4ec2db7219f8f5c7233d/comments", "author": null, "committer": null, "parents": [{"sha": "074919faeaece80caae9f7873dba67a596e28377", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/074919faeaece80caae9f7873dba67a596e28377", "html_url": "https://github.com/Rust-GCC/gccrs/commit/074919faeaece80caae9f7873dba67a596e28377"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "afa55a687083d2703f42001031a8192fd13c83cf", "filename": "gcc/expr.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c54b0a5e4b261487b58d4ec2db7219f8f5c7233d/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c54b0a5e4b261487b58d4ec2db7219f8f5c7233d/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=c54b0a5e4b261487b58d4ec2db7219f8f5c7233d", "patch": "@@ -6902,7 +6902,7 @@ expand_expr (exp, target, tmode, modifier)\n \t\t\t elem = TREE_CHAIN (elem))\n \t\t      ;\n \n-\t\t    if (elem && !TREE_SIDE_EFFECTS (elem))\n+\t\t    if (elem && !TREE_SIDE_EFFECTS (TREE_VALUE (elem)))\n \t\t      return expand_expr (fold (TREE_VALUE (elem)), target,\n \t\t\t\t\t  tmode, ro_modifier);\n \t\t  }"}, {"sha": "ab076f2af383c2ac8b05de29465a84f392e0ea5d", "filename": "gcc/testsuite/g++.old-deja/g++.other/array6.C", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c54b0a5e4b261487b58d4ec2db7219f8f5c7233d/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Farray6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c54b0a5e4b261487b58d4ec2db7219f8f5c7233d/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Farray6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Farray6.C?ref=c54b0a5e4b261487b58d4ec2db7219f8f5c7233d", "patch": "@@ -0,0 +1,20 @@\n+// Special g++ Options: -O1\n+\n+int count = 0;\n+\n+double foo () {\n+  count++;\n+  return 0;\n+};\n+\n+double bar () {\n+  const double x[1] = { foo() };\n+  return x[0];\n+};\n+\n+int main () \n+{\n+  bar();\n+  if (count != 1)\n+    return 1;\n+};"}]}