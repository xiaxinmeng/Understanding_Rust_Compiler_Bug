{"sha": "906fb125a14fba63516ed295b779546f1ea6e631", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTA2ZmIxMjVhMTRmYmE2MzUxNmVkMjk1Yjc3OTU0NmYxZWE2ZTYzMQ==", "commit": {"author": {"name": "Geoff Keating", "email": "geoffk@cygnus.com", "date": "1999-08-05T06:59:54Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-08-05T06:59:54Z"}, "message": "rs6000.c (rs6000_stack_info): For ABI_V4/ABI_SOLARIS -fpic...\n\n\n        * rs6000.c (rs6000_stack_info): For ABI_V4/ABI_SOLARIS -fpic, always\n        allocate space in the stack frame for the PIC register.\n\nFrom-SVN: r28525", "tree": {"sha": "5a6ed65a2d8639b605eac6f0737afe3cea250b1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a6ed65a2d8639b605eac6f0737afe3cea250b1c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/906fb125a14fba63516ed295b779546f1ea6e631", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/906fb125a14fba63516ed295b779546f1ea6e631", "html_url": "https://github.com/Rust-GCC/gccrs/commit/906fb125a14fba63516ed295b779546f1ea6e631", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/906fb125a14fba63516ed295b779546f1ea6e631/comments", "author": null, "committer": null, "parents": [{"sha": "14fe6c707fa8df05577b5480b7cc3e9c7d7fd860", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14fe6c707fa8df05577b5480b7cc3e9c7d7fd860", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14fe6c707fa8df05577b5480b7cc3e9c7d7fd860"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "7b37f795a3a93b216e9c45889ac23a361b6e5591", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/906fb125a14fba63516ed295b779546f1ea6e631/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/906fb125a14fba63516ed295b779546f1ea6e631/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=906fb125a14fba63516ed295b779546f1ea6e631", "patch": "@@ -1,3 +1,8 @@\n+Thu Aug  5 00:56:30 1999  Geoffrey Keating   <geoffk@cygnus.com>\n+\n+\t* rs6000.c (rs6000_stack_info): For ABI_V4/ABI_SOLARIS -fpic, always\n+\tallocate space in the stack frame for the PIC register.\n+\n Thu Aug  5 00:20:47 1999  Jeffrey A Law  (law@cygnus.com)\n \n \t* m68k.md (xordi3, anddi3): These patterns are not available on"}, {"sha": "2f49b37afb6d7c1ef8fb1dc4a405f0d26d2d848a", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/906fb125a14fba63516ed295b779546f1ea6e631/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/906fb125a14fba63516ed295b779546f1ea6e631/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=906fb125a14fba63516ed295b779546f1ea6e631", "patch": "@@ -3644,7 +3644,14 @@ rs6000_stack_info ()\n \n   /* Calculate which registers need to be saved & save area size */\n   info_ptr->first_gp_reg_save = first_reg_to_save ();\n-  info_ptr->gp_size = reg_size * (32 - info_ptr->first_gp_reg_save);\n+  /* Assume that we will have to save PIC_OFFSET_TABLE_REGNUM, \n+     even if it currently looks like we won't.  */\n+  if (flag_pic == 1 \n+      && (abi == ABI_V4 || abi == ABI_SOLARIS)\n+      && info_ptr->first_gp_reg_save > PIC_OFFSET_TABLE_REGNUM)\n+    info_ptr->gp_size = reg_size * (32 - PIC_OFFSET_TABLE_REGNUM);\n+  else\n+    info_ptr->gp_size = reg_size * (32 - info_ptr->first_gp_reg_save);\n \n   info_ptr->first_fp_reg_save = first_fp_reg_to_save ();\n   info_ptr->fp_size = 8 * (64 - info_ptr->first_fp_reg_save);"}]}