{"sha": "bb62e19a20a4bcabb9d158766c2a4fadcab2328a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmI2MmUxOWEyMGE0YmNhYmI5ZDE1ODc2NmMyYTRmYWRjYWIyMzI4YQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@freesoft.cz", "date": "1998-10-29T00:38:31Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-10-29T00:38:31Z"}, "message": "i386.md: Change ix86_cpu == PROCESSOR_PENTIUM to TARGET_PENTIUM\n\n        * i386.md: Change ix86_cpu == PROCESSOR_PENTIUM to TARGET_PENTIUM\n        (zero_extendsidi2): Use # in output template and handle completely by\n        splits.\n        (zero_extend splitters): New define_splits.\n        (ashiftrt_32): New pattern.\n\nCo-Authored-By: Jeffrey A Law <law@cygnus.com>\n\nFrom-SVN: r23418", "tree": {"sha": "be302a69f0c0e3b6f5d681b205c0846ba4a33696", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be302a69f0c0e3b6f5d681b205c0846ba4a33696"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bb62e19a20a4bcabb9d158766c2a4fadcab2328a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb62e19a20a4bcabb9d158766c2a4fadcab2328a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb62e19a20a4bcabb9d158766c2a4fadcab2328a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb62e19a20a4bcabb9d158766c2a4fadcab2328a/comments", "author": null, "committer": null, "parents": [{"sha": "63ece2d2779b1aaad137beabe029a9575994b640", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63ece2d2779b1aaad137beabe029a9575994b640", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63ece2d2779b1aaad137beabe029a9575994b640"}], "stats": {"total": 65, "additions": 37, "deletions": 28}, "files": [{"sha": "5152d5c6b69f02a1f9cc872fd119465e54b2fb28", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb62e19a20a4bcabb9d158766c2a4fadcab2328a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb62e19a20a4bcabb9d158766c2a4fadcab2328a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bb62e19a20a4bcabb9d158766c2a4fadcab2328a", "patch": "@@ -1,3 +1,12 @@\n+Thu Oct 29 01:33:54 1998  Jan Hubicka <hubicka@freesoft.cz>\n+\t\t\t  Jeffrey A Law  (law@cygnus.com)\n+\n+\t* i386.md: Change ix86_cpu == PROCESSOR_PENTIUM to TARGET_PENTIUM\n+\t(zero_extendsidi2): Use # in output template and handle completely by\n+\tsplits.\n+\t(zero_extend splitters): New define_splits.\n+\t(ashiftrt_32): New pattern.\n+\n Wed Oct 28 22:58:35 1998  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* tree.c (append_random_chars): New fn."}, {"sha": "7f381a17fc9fbce055b9262c3143e3b24589362b", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 28, "deletions": 28, "changes": 56, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb62e19a20a4bcabb9d158766c2a4fadcab2328a/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb62e19a20a4bcabb9d158766c2a4fadcab2328a/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=bb62e19a20a4bcabb9d158766c2a4fadcab2328a", "patch": "@@ -1252,7 +1252,7 @@\n      It is at least as fast as xor on any processor except a Pentium. */\n \n   if (operands[1] == const1_rtx\n-      && ix86_cpu == PROCESSOR_PENTIUM\n+      && TARGET_PENTIUM\n       && (link = find_reg_note (insn, REG_WAS_0, 0))\n       /* Make sure the insn that stored the 0 is still present.  */\n       && ! INSN_DELETED_P (XEXP (link, 0))\n@@ -1313,7 +1313,7 @@\n   /* movb $0,reg8 is 2 bytes, the same as xorl reg8,reg8.  */\n \n   if (operands[1] == const1_rtx\n-      && ix86_cpu == PROCESSOR_PENTIUM\n+      && TARGET_PENTIUM\n       && ! NON_QI_REG_P (operands[0])\n       && (link = find_reg_note (insn, REG_WAS_0, 0))\n       /* Make sure the insn that stored the 0 is still present.  */\n@@ -2022,34 +2022,25 @@\n  \"operands[2] = gen_rtx_REG (SImode, true_regnum (operands[1]));\")\n \n (define_insn \"zero_extendsidi2\"\n-  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=r,?r,?m\")\n-\t(zero_extend:DI (match_operand:SI 1 \"register_operand\" \"0,rm,r\")))]\n+  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=r,?r,?*o\")\n+\t(zero_extend:DI (match_operand:SI 1 \"general_operand\" \"0,rm,r\")))]\n   \"\"\n-  \"*\n-  {\n-  rtx high[2], low[2], xops[4];\n-\n-  if (REG_P (operands[0]) && REG_P (operands[1])\n-      && REGNO (operands[0]) == REGNO (operands[1]))\n-    {\n-      operands[0] = gen_rtx_REG (SImode, REGNO (operands[0]) + 1);\n-      return AS2 (xor%L0,%0,%0);\n-    }\n-\n-  split_di (operands, 1, low, high);\n-  xops[0] = low[0];\n-  xops[1] = operands[1];\n-  xops[2] = high[0];\n-  xops[3] = const0_rtx;\n-\n-  output_asm_insn (AS2 (mov%L0,%1,%0), xops);\n-  if (GET_CODE (low[0]) == MEM)\n-    output_asm_insn (AS2 (mov%L2,%3,%2), xops);\n-  else\n-    output_asm_insn (AS2 (xor%L2,%2,%2), xops);\n+  \"#\")\n \n-  RET;\n-}\")\n+(define_split \n+  [(set (match_operand:DI 0 \"register_operand\" \"\")\n+\t(zero_extend:DI (match_operand:SI 1 \"register_operand\" \"\")))]\n+  \"reload_completed && true_regnum (operands[0]) == true_regnum (operands[1])\"\n+  [(set (match_dup 4) (const_int 0))]\n+  \"split_di (&operands[0], 1, &operands[3], &operands[4]);\")\n+\n+(define_split \n+  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"\")\n+\t(zero_extend:DI (match_operand:SI 1 \"general_operand\" \"\")))]\n+  \"reload_completed\"\n+  [(set (match_dup 3) (match_dup 1))\n+   (set (match_dup 4) (const_int 0))]\n+  \"split_di (&operands[0], 1, &operands[3], &operands[4]);\")\n \f\n ;;- sign extension instructions\n \n@@ -4851,6 +4842,15 @@ byte_xor_operation:\n   RET;\n }\")\n \n+(define_insn \"ashrsi3_31\"\n+  [(set (match_operand:SI 0 \"nonimmediate_operand\" \"=rm,d\")\n+\t(ashiftrt:SI (match_operand:SI 1 \"nonimmediate_operand\" \"0,a\")\n+\t\t     (const_int 31)))]\n+  \"!TARGET_PENTIUM || optimize_size\"\n+  \"@\n+    sar%L0 $31,%0\n+    cltd\")\n+\n (define_insn \"ashrsi3\"\n   [(set (match_operand:SI 0 \"nonimmediate_operand\" \"=rm\")\n \t(ashiftrt:SI (match_operand:SI 1 \"nonimmediate_operand\" \"0\")"}]}