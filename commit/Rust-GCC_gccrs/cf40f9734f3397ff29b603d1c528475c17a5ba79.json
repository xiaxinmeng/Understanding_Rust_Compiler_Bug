{"sha": "cf40f9734f3397ff29b603d1c528475c17a5ba79", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Y0MGY5NzM0ZjMzOTdmZjI5YjYwM2QxYzUyODQ3NWMxN2E1YmE3OQ==", "commit": {"author": {"name": "Dehao Chen", "email": "dehao@google.com", "date": "2014-05-16T23:01:26Z"}, "committer": {"name": "Dehao Chen", "email": "dehao@gcc.gnu.org", "date": "2014-05-16T23:01:26Z"}, "message": "ira-int.h (REG_FREQ_FROM_EDGE_FREQ): Use optimize_function_for_size_p.\n\n2014-05-16  Dehao Chen  <dehao@google.com>\n\n        * ira-int.h (REG_FREQ_FROM_EDGE_FREQ): Use optimize_function_for_size_p.\n        * regs.h (REG_FREQ_FROM_BB): Likewise.\n\nFrom-SVN: r210536", "tree": {"sha": "8efa9607aecea48c0d6381e6b855c3cc4d594ddb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8efa9607aecea48c0d6381e6b855c3cc4d594ddb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cf40f9734f3397ff29b603d1c528475c17a5ba79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf40f9734f3397ff29b603d1c528475c17a5ba79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf40f9734f3397ff29b603d1c528475c17a5ba79", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf40f9734f3397ff29b603d1c528475c17a5ba79/comments", "author": {"login": "danielcdh", "id": 694263, "node_id": "MDQ6VXNlcjY5NDI2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/694263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielcdh", "html_url": "https://github.com/danielcdh", "followers_url": "https://api.github.com/users/danielcdh/followers", "following_url": "https://api.github.com/users/danielcdh/following{/other_user}", "gists_url": "https://api.github.com/users/danielcdh/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielcdh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielcdh/subscriptions", "organizations_url": "https://api.github.com/users/danielcdh/orgs", "repos_url": "https://api.github.com/users/danielcdh/repos", "events_url": "https://api.github.com/users/danielcdh/events{/privacy}", "received_events_url": "https://api.github.com/users/danielcdh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "48d8568e1f69a3459e236831ed6d17a05384eb5d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48d8568e1f69a3459e236831ed6d17a05384eb5d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48d8568e1f69a3459e236831ed6d17a05384eb5d"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "c04c8874df917c678087e19f17a5efee69b2475a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf40f9734f3397ff29b603d1c528475c17a5ba79/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf40f9734f3397ff29b603d1c528475c17a5ba79/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cf40f9734f3397ff29b603d1c528475c17a5ba79", "patch": "@@ -1,3 +1,8 @@\n+2014-05-16  Dehao Chen  <dehao@google.com>\n+\n+\t* ira-int.h (REG_FREQ_FROM_EDGE_FREQ): Use optimize_function_for_size_p.\n+\t* regs.h (REG_FREQ_FROM_BB): Likewise.\n+\n 2014-05-16  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \tPR target/51244"}, {"sha": "19d86019a0d2b3492881b767a2b17d9f2969d55a", "filename": "gcc/ira-int.h", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf40f9734f3397ff29b603d1c528475c17a5ba79/gcc%2Fira-int.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf40f9734f3397ff29b603d1c528475c17a5ba79/gcc%2Fira-int.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira-int.h?ref=cf40f9734f3397ff29b603d1c528475c17a5ba79", "patch": "@@ -42,9 +42,8 @@ along with GCC; see the file COPYING3.  If not see\n    profile driven feedback is available and the function is never\n    executed, frequency is always equivalent.  Otherwise rescale the\n    edge frequency.  */\n-#define REG_FREQ_FROM_EDGE_FREQ(freq)\t\t\t\t\t   \\\n-  (optimize_size || (flag_branch_probabilities\t\t\t\t   \\\n-\t\t     && !ENTRY_BLOCK_PTR_FOR_FN (cfun)->count)\t\t   \\\n+#define REG_FREQ_FROM_EDGE_FREQ(freq)\t\t\t\t   \\\n+  (optimize_function_for_size_p (cfun)\t\t\t\t   \\\n    ? REG_FREQ_MAX : (freq * REG_FREQ_MAX / BB_FREQ_MAX)\t\t   \\\n    ? (freq * REG_FREQ_MAX / BB_FREQ_MAX) : 1)\n "}, {"sha": "c8c978b24de74899a5f6a81cdd9753002cb0898d", "filename": "gcc/regs.h", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf40f9734f3397ff29b603d1c528475c17a5ba79/gcc%2Fregs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf40f9734f3397ff29b603d1c528475c17a5ba79/gcc%2Fregs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregs.h?ref=cf40f9734f3397ff29b603d1c528475c17a5ba79", "patch": "@@ -135,9 +135,7 @@ extern size_t reg_info_p_size;\n    or profile driven feedback is available and the function is never executed,\n    frequency is always equivalent.  Otherwise rescale the basic block\n    frequency.  */\n-#define REG_FREQ_FROM_BB(bb) (optimize_size\t\t\t\t      \\\n-\t\t\t      || (flag_branch_probabilities\t\t      \\\n-\t\t\t\t  && !ENTRY_BLOCK_PTR_FOR_FN (cfun)->count)   \\\n+#define REG_FREQ_FROM_BB(bb) (optimize_function_for_size_p (cfun)\t      \\\n \t\t\t      ? REG_FREQ_MAX\t\t\t\t      \\\n \t\t\t      : ((bb)->frequency * REG_FREQ_MAX / BB_FREQ_MAX)\\\n \t\t\t      ? ((bb)->frequency * REG_FREQ_MAX / BB_FREQ_MAX)\\"}]}