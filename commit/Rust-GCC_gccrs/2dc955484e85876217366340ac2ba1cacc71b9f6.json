{"sha": "2dc955484e85876217366340ac2ba1cacc71b9f6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmRjOTU1NDg0ZTg1ODc2MjE3MzY2MzQwYWMyYmExY2FjYzcxYjlmNg==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2007-10-18T12:44:03Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2007-10-18T12:44:03Z"}, "message": "re PR fortran/33733 (ICEs in simplify_transfer)\n\n2007-10-18  Paul Thomas  <pault@gcc.gnu.org>\n\t    Dominique d'Humieres  <dominiq@lps.ens.fr>\n\n\tPR fortran/33733\n\t* simplify.c (gfc_simplify_transfer): Return null if the source\n\texpression is EXPR_FUNCTION.\n\n2007-10-18  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/33733\n\t* gfortran.dg/transfer_simplify_6.f90: New test.\n\nFrom-SVN: r129435", "tree": {"sha": "78b764aa11db8a305689cf048eea74d3865c3291", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/78b764aa11db8a305689cf048eea74d3865c3291"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2dc955484e85876217366340ac2ba1cacc71b9f6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dc955484e85876217366340ac2ba1cacc71b9f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2dc955484e85876217366340ac2ba1cacc71b9f6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dc955484e85876217366340ac2ba1cacc71b9f6/comments", "author": null, "committer": null, "parents": [{"sha": "741e7594bec656ff6a5bc2e7e83655e86880e868", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/741e7594bec656ff6a5bc2e7e83655e86880e868", "html_url": "https://github.com/Rust-GCC/gccrs/commit/741e7594bec656ff6a5bc2e7e83655e86880e868"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "0bb13c14adbb9ef8d881c39f39e81adb5bfceb4d", "filename": "gcc/fortran/simplify.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2dc955484e85876217366340ac2ba1cacc71b9f6/gcc%2Ffortran%2Fsimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2dc955484e85876217366340ac2ba1cacc71b9f6/gcc%2Ffortran%2Fsimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsimplify.c?ref=2dc955484e85876217366340ac2ba1cacc71b9f6", "patch": "@@ -4011,6 +4011,9 @@ gfc_simplify_transfer (gfc_expr *source, gfc_expr *mold, gfc_expr *size)\n \t|| !gfc_is_constant_expr (size))\n     return NULL;\n \n+  if (source->expr_type == EXPR_FUNCTION)\n+    return NULL;\n+\n   /* Calculate the size of the source.  */\n   if (source->expr_type == EXPR_ARRAY\n       && gfc_array_size (source, &tmp) == FAILURE)"}, {"sha": "b557c064f0e758d95d86ad505715f0dd244c573c", "filename": "gcc/testsuite/gfortran.dg/transfer_simplify_6.f90", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2dc955484e85876217366340ac2ba1cacc71b9f6/gcc%2Ftestsuite%2Fgfortran.dg%2Ftransfer_simplify_6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2dc955484e85876217366340ac2ba1cacc71b9f6/gcc%2Ftestsuite%2Fgfortran.dg%2Ftransfer_simplify_6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ftransfer_simplify_6.f90?ref=2dc955484e85876217366340ac2ba1cacc71b9f6", "patch": "@@ -0,0 +1,9 @@\n+! { dg-do compile }\n+! Checks the fix for PR33733, in which the functions of arrays\n+! for the 'source' argument would cause an ICE.\n+!\n+! Contributed by FX Coudert <fxcoudert@gcc.gnu.org>\n+!\n+  print *, transfer(sqrt([100.]), 0_1)\n+  print *, transfer(achar([100]), 0_1)\n+end"}]}