{"sha": "1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWRlMTJlYWI3NDk2ZmU3YThhMDNlODNlZmJiZjZkZDYzMThjM2FhMA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-05-10T18:28:03Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-05-10T18:28:03Z"}, "message": "re PR debug/44028 (-fcompare-debug failure (length) with -O3 -fsched-pressure -fschedule-insns)\n\n\tPR debug/44028\n\t* haifa-sched.c (schedule_insn): When clearing INSN_VAR_LOCATION_LOC,\n\tclear also INSN_REG_USE_LIST.\n\n\t* gcc.dg/pr44028.c: New test.\n\nFrom-SVN: r159240", "tree": {"sha": "d86819bbb461712b2745a75881652b0b4f22b6e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d86819bbb461712b2745a75881652b0b4f22b6e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e472d6bf32eb3baf6334e187926dd8fb4dcf8b01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e472d6bf32eb3baf6334e187926dd8fb4dcf8b01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e472d6bf32eb3baf6334e187926dd8fb4dcf8b01"}], "stats": {"total": 42, "additions": 42, "deletions": 0}, "files": [{"sha": "cd9b37493907454d2778e4a46d91f9f30e50ea8b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0", "patch": "@@ -1,3 +1,9 @@\n+2010-05-10  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/44028\n+\t* haifa-sched.c (schedule_insn): When clearing INSN_VAR_LOCATION_LOC,\n+\tclear also INSN_REG_USE_LIST.\n+\n 2010-05-10  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* config/mips/mips.c (TARGET_SMALL_REGISTER_CLASSES_FOR_MODE_P): Undef."}, {"sha": "0dd220d7302a507355c7408209e78b0bbb0141f9", "filename": "gcc/haifa-sched.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0/gcc%2Fhaifa-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0/gcc%2Fhaifa-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhaifa-sched.c?ref=1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0", "patch": "@@ -1695,6 +1695,7 @@ schedule_insn (rtx insn)\n \t sd_iterator_cond (&sd_it, &dep);)\n       {\n \trtx dbg = DEP_PRO (dep);\n+\tstruct reg_use_data *use, *next;\n \n \tgcc_assert (DEBUG_INSN_P (dbg));\n \n@@ -1716,6 +1717,14 @@ schedule_insn (rtx insn)\n \tINSN_VAR_LOCATION_LOC (dbg) = gen_rtx_UNKNOWN_VAR_LOC ();\n \tdf_insn_rescan (dbg);\n \n+\t/* Unknown location doesn't use any registers.  */\n+\tfor (use = INSN_REG_USE_LIST (dbg); use != NULL; use = next)\n+\t  {\n+\t    next = use->next_insn_use;\n+\t    free (use);\n+\t  }\n+\tINSN_REG_USE_LIST (dbg) = NULL;\n+\n \t/* We delete rather than resolve these deps, otherwise we\n \t   crash in sched_free_deps(), because forward deps are\n \t   expected to be released before backward deps.  */"}, {"sha": "824920b41351283aa955d4dfe4083d608bcd526a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0", "patch": "@@ -1,3 +1,8 @@\n+2010-05-10  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/44028\n+\t* gcc.dg/pr44028.c: New test.\n+\n 2010-05-08  Daniel Franke  <franke.daniel@gmail.com>\n \n \tPR fortran/27866"}, {"sha": "33452172bd76a07ea8650296dcca80effd13a34a", "filename": "gcc/testsuite/gcc.dg/pr44028.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0/gcc%2Ftestsuite%2Fgcc.dg%2Fpr44028.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0/gcc%2Ftestsuite%2Fgcc.dg%2Fpr44028.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr44028.c?ref=1de12eab7496fe7a8a03e83efbbf6dd6318c3aa0", "patch": "@@ -0,0 +1,22 @@\n+/* PR debug/44028 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O3 -fcompare-debug\" } */\n+/* { dg-options \"-O3 -fsched-pressure -fschedule-insns -fcompare-debug\" { target i?86-*-* x86_64-*-* } } */\n+\n+struct S { int val[16]; };\n+\n+static inline int\n+bar (struct S x)\n+{\n+  long double pc = 0;\n+  int i;\n+  for (i = 0; i < 16; i++)\n+    pc += x.val[i];\n+  return pc;\n+}\n+\n+int\n+foo (struct S x)\n+{\n+  return bar (x);\n+}"}]}