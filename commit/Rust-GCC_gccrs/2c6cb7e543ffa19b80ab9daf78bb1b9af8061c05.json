{"sha": "2c6cb7e543ffa19b80ab9daf78bb1b9af8061c05", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM2Y2I3ZTU0M2ZmYTE5YjgwYWI5ZGFmNzhiYjFiOWFmODA2MWMwNQ==", "commit": {"author": {"name": "Philip Herron", "email": "herron.philip@googlemail.com", "date": "2020-05-20T16:54:47Z"}, "committer": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2020-11-28T21:13:14Z"}, "message": "Add the referenced function to the CallExpr when resolved", "tree": {"sha": "ba4c1b78b9c8eee419f2f67f04c08f891c61ffc6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba4c1b78b9c8eee419f2f67f04c08f891c61ffc6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c6cb7e543ffa19b80ab9daf78bb1b9af8061c05", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c6cb7e543ffa19b80ab9daf78bb1b9af8061c05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c6cb7e543ffa19b80ab9daf78bb1b9af8061c05", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c6cb7e543ffa19b80ab9daf78bb1b9af8061c05/comments", "author": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "committer": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1acf8eba36b06ab816866821542d189935ba360e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1acf8eba36b06ab816866821542d189935ba360e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1acf8eba36b06ab816866821542d189935ba360e"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "48ea69981d8a42f28e986ee0764e1c3d250128f9", "filename": "gcc/rust/analysis/rust-type-resolution.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c6cb7e543ffa19b80ab9daf78bb1b9af8061c05/gcc%2Frust%2Fanalysis%2Frust-type-resolution.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c6cb7e543ffa19b80ab9daf78bb1b9af8061c05/gcc%2Frust%2Fanalysis%2Frust-type-resolution.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fanalysis%2Frust-type-resolution.cc?ref=2c6cb7e543ffa19b80ab9daf78bb1b9af8061c05", "patch": "@@ -439,11 +439,13 @@ TypeResolution::visit (AST::EnumExprFieldless &expr)\n void\n TypeResolution::visit (AST::CallExpr &expr)\n {\n+  // this look up should probably be moved to name resolution\n   auto fndecl = lookupFndecl (expr.function.get ());\n   if (fndecl == NULL)\n     return;\n \n   typeBuffer.push_back (fndecl->return_type.get ());\n+  expr.fndeclRef = fndecl;\n \n   auto before = typeBuffer.size ();\n   for (auto &item : expr.params)"}, {"sha": "827ca0d31e25a3e1f4c80c43dd0a4ed67f257fb2", "filename": "gcc/rust/ast/rust-expr.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c6cb7e543ffa19b80ab9daf78bb1b9af8061c05/gcc%2Frust%2Fast%2Frust-expr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c6cb7e543ffa19b80ab9daf78bb1b9af8061c05/gcc%2Frust%2Fast%2Frust-expr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fast%2Frust-expr.h?ref=2c6cb7e543ffa19b80ab9daf78bb1b9af8061c05", "patch": "@@ -23,6 +23,7 @@ class Statement;*/ // decls no longer required as definitions moved to rust-ast.\n \n // Decl as definition moved to rust-ast.h\n class ExprWithoutBlock;\n+class Function;\n \n // AST node for an expression with an accompanying block - abstract\n class ExprWithBlock : public Expr\n@@ -2534,6 +2535,8 @@ class CallExpr : public ExprWithoutBlock\n \n   Location locus;\n \n+  Function *fndeclRef;\n+\n   /*~CallExpr() {\n       delete function;\n   }*/"}]}