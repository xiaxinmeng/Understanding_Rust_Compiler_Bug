{"sha": "5a3bf28119c7a8d2d43d26b5eee588ee0e4472e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWEzYmYyODExOWM3YThkMmQ0M2QyNmI1ZWVlNTg4ZWUwZTQ0NzJlNQ==", "commit": {"author": {"name": "David Edelsohn", "email": "dje.gcc@gmail.com", "date": "2021-05-20T18:07:18Z"}, "committer": {"name": "David Edelsohn", "email": "dje.gcc@gmail.com", "date": "2021-05-20T21:21:31Z"}, "message": "aix: collect2 text files in archive\n\nRust places text files in archives.  AIX ld ignores such files with a\nwarning.  The collect2 wrapper for ld had been exiting with a fatal\nerror if it scanned an archive that contained a non-COFF file.\n\nThis patch updates collect2.c to issue a warning and ignore the file\nmember, matching the behavior of AIX ld.  GCC can encounter archives\ncreated by Rust and should not issue a fatal error.  This changes\nfatal_error to warning, with an implicit location and no associated\noptimization flag.\n\ngcc/ChangeLog:\n\n2021-05-20  Clement Chigot  <clement.chigot@atos.net>\n\t    David Edelsohn  <dje.gcc@gmail.com>\n\n\t* collect2.c (scan_prog_file): Issue non-fatal warning for\n\tnon-COFF files.", "tree": {"sha": "3bf339c1891803df2b60aeae1291b9c82f25604d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3bf339c1891803df2b60aeae1291b9c82f25604d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5a3bf28119c7a8d2d43d26b5eee588ee0e4472e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a3bf28119c7a8d2d43d26b5eee588ee0e4472e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a3bf28119c7a8d2d43d26b5eee588ee0e4472e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a3bf28119c7a8d2d43d26b5eee588ee0e4472e5/comments", "author": {"login": "edelsohn", "id": 667700, "node_id": "MDQ6VXNlcjY2NzcwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/667700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edelsohn", "html_url": "https://github.com/edelsohn", "followers_url": "https://api.github.com/users/edelsohn/followers", "following_url": "https://api.github.com/users/edelsohn/following{/other_user}", "gists_url": "https://api.github.com/users/edelsohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/edelsohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edelsohn/subscriptions", "organizations_url": "https://api.github.com/users/edelsohn/orgs", "repos_url": "https://api.github.com/users/edelsohn/repos", "events_url": "https://api.github.com/users/edelsohn/events{/privacy}", "received_events_url": "https://api.github.com/users/edelsohn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "edelsohn", "id": 667700, "node_id": "MDQ6VXNlcjY2NzcwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/667700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edelsohn", "html_url": "https://github.com/edelsohn", "followers_url": "https://api.github.com/users/edelsohn/followers", "following_url": "https://api.github.com/users/edelsohn/following{/other_user}", "gists_url": "https://api.github.com/users/edelsohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/edelsohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edelsohn/subscriptions", "organizations_url": "https://api.github.com/users/edelsohn/orgs", "repos_url": "https://api.github.com/users/edelsohn/repos", "events_url": "https://api.github.com/users/edelsohn/events{/privacy}", "received_events_url": "https://api.github.com/users/edelsohn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "885035eacb36b5bf1aa3b0d05f675ab89665d7be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/885035eacb36b5bf1aa3b0d05f675ab89665d7be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/885035eacb36b5bf1aa3b0d05f675ab89665d7be"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "b08c6e7afaee30b332cd0379b61fcaa2658d540d", "filename": "gcc/collect2.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a3bf28119c7a8d2d43d26b5eee588ee0e4472e5/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a3bf28119c7a8d2d43d26b5eee588ee0e4472e5/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=5a3bf28119c7a8d2d43d26b5eee588ee0e4472e5", "patch": "@@ -2779,7 +2779,10 @@ scan_prog_file (const char *prog_name, scanpass which_pass,\n       if ((ldptr = ldopen (CONST_CAST (char *, prog_name), ldptr)) != NULL)\n \t{\n \t  if (! MY_ISCOFF (HEADER (ldptr).f_magic))\n-\t    fatal_error (input_location, \"%s: not a COFF file\", prog_name);\n+\t    {\n+\t      warning (0, \"%s: not a COFF file\", prog_name);\n+\t      continue;\n+\t    }\n \n \t  if (GCC_CHECK_HDR (ldptr))\n \t    {"}]}