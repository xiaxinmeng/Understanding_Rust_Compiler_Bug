{"sha": "d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDNlZjY3ZWFmMzlmMWFmNjRhMWExMzMxYzYzYWQ2MGRkOGMyMTdjZA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2007-08-06T19:58:11Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2007-08-06T19:58:11Z"}, "message": "re PR target/31868 (Non-Linux DWARF EH x86-64 targets have broken crtend.o)\n\n2007-08-06  H.J. Lu  <hongjiu.lu@intel.com>\n\t    Daniel Jacobowitz  <dan@codesourcery.com>\n\n\tPR target/31868\n\t* config.gcc (x86_64-*-freebsd*): Add i386/t-crtstuff to\n\ttmake_file.\n\t(x86_64-*-netbsd*): Likewise.\n\t(x86_64-*-linux*): Likewise.\n\t(x86_64-*-kfreebsd*-gnu): Likewise.\n\t(x86_64-*-knetbsd*-gnu): Likewise.\n\t(i[34567]86-*-solaris2.1[0-9]*): Likewise.\n\n\t* config/i386/t-linux64 (CRTSTUFF_T_CFLAGS): Removed.\n\n\t* config/i386/t-crtstuff (CRTSTUFF_T_CFLAGS): Update comments.\n\tAdd -fno-asynchronous-unwind-tables.\n\n\t* config/t-freebsd (CRTSTUFF_T_CFLAGS_S): Add $(CRTSTUFF_T_CFLAGS).\n\t* config/t-libc-ok (CRTSTUFF_T_CFLAGS_S): Likewise.\n\t* config/t-lynx (CRTSTUFF_T_CFLAGS_S): Likewise.\n\t* config/t-netbsd (CRTSTUFF_T_CFLAGS_S): Likewise.\n\t* config/t-svr4 (CRTSTUFF_T_CFLAGS_S): Likewise.\n\nCo-Authored-By: Daniel Jacobowitz <dan@codesourcery.com>\n\nFrom-SVN: r127248", "tree": {"sha": "2eb73bc1ae71127d70cb151cdf799ea9d6bced0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2eb73bc1ae71127d70cb151cdf799ea9d6bced0e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a31fa2e0d3cab234ccb56fe5fdcfcf0efd3dee31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a31fa2e0d3cab234ccb56fe5fdcfcf0efd3dee31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a31fa2e0d3cab234ccb56fe5fdcfcf0efd3dee31"}], "stats": {"total": 52, "additions": 38, "deletions": 14}, "files": [{"sha": "86e14233c59886d4422ae0de91f2972c130550e8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "patch": "@@ -1,3 +1,26 @@\n+2007-08-06  H.J. Lu  <hongjiu.lu@intel.com>\n+\t    Daniel Jacobowitz  <dan@codesourcery.com>\n+\n+\tPR target/31868\n+\t* config.gcc (x86_64-*-freebsd*): Add i386/t-crtstuff to\n+\ttmake_file.\n+\t(x86_64-*-netbsd*): Likewise.\n+\t(x86_64-*-linux*): Likewise.\n+\t(x86_64-*-kfreebsd*-gnu): Likewise.\n+\t(x86_64-*-knetbsd*-gnu): Likewise.\n+\t(i[34567]86-*-solaris2.1[0-9]*): Likewise.\n+\n+\t* config/i386/t-linux64 (CRTSTUFF_T_CFLAGS): Removed.\n+\n+\t* config/i386/t-crtstuff (CRTSTUFF_T_CFLAGS): Update comments.\n+\tAdd -fno-asynchronous-unwind-tables.\n+\n+\t* config/t-freebsd (CRTSTUFF_T_CFLAGS_S): Add $(CRTSTUFF_T_CFLAGS).\n+\t* config/t-libc-ok (CRTSTUFF_T_CFLAGS_S): Likewise.\n+\t* config/t-lynx (CRTSTUFF_T_CFLAGS_S): Likewise.\n+\t* config/t-netbsd (CRTSTUFF_T_CFLAGS_S): Likewise.\n+\t* config/t-svr4 (CRTSTUFF_T_CFLAGS_S): Likewise.\n+\n 2007-08-06  Steve Ellcey  <sje@cup.hp.com>\n \n \t* config/ia64/ia64.c (ia64_c_mode_for_suffix): New."}, {"sha": "503a60bf633f745daaf7adbdf081212e352cac93", "filename": "gcc/config.gcc", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "patch": "@@ -1095,6 +1095,7 @@ i[34567]86-*-freebsd*)\n \t;;\n x86_64-*-freebsd*)\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h ${fbsd_tm_file} i386/x86-64.h i386/freebsd.h i386/freebsd64.h\"\n+\ttmake_file=\"${tmake_file} i386/t-crtstuff\"\n \t;;\n i[34567]86-*-netbsdelf*)\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h netbsd.h netbsd-elf.h i386/netbsd-elf.h\"\n@@ -1107,6 +1108,7 @@ i[34567]86-*-netbsd*)\n \t;;\n x86_64-*-netbsd*)\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h netbsd.h netbsd-elf.h i386/x86-64.h i386/netbsd64.h\"\n+\ttmake_file=\"${tmake_file} i386/t-crtstuff\"\n \t;;\n i[34567]86-*-openbsd2.*|i[34567]86-*openbsd3.[0123])\n \ttm_file=\"i386/i386.h i386/unix.h i386/bsd.h i386/gas.h i386/gstabs.h openbsd-oldgas.h openbsd.h i386/openbsd.h\"\n@@ -1166,7 +1168,7 @@ x86_64-*-linux* | x86_64-*-kfreebsd*-gnu | x86_64-*-knetbsd*-gnu)\n \tx86_64-*-kfreebsd*-gnu) tm_file=\"${tm_file} kfreebsd-gnu.h\" ;;\n \tx86_64-*-knetbsd*-gnu) tm_file=\"${tm_file} knetbsd-gnu.h\" ;;\n \tesac\n-\ttmake_file=\"${tmake_file} i386/t-linux64 i386/t-crtpc i386/t-crtfm i386/t-fprules-softfp64 soft-fp/t-softfp t-dfprules\"\n+\ttmake_file=\"${tmake_file} i386/t-linux64 i386/t-crtstuff i386/t-crtpc i386/t-crtfm i386/t-fprules-softfp64 soft-fp/t-softfp t-dfprules\"\n \t;;\n i[34567]86-*-gnu*)\n \t;;\n@@ -1263,7 +1265,7 @@ i[34567]86-*-solaris2*)\n \t*-*-solaris2.1[0-9]*)\n \t\ttm_file=\"${tm_file} i386/x86-64.h i386/sol2-10.h\"\n \t\ttm_defines=\"${tm_defines} TARGET_BI_ARCH=1\"\n-\t\ttmake_file=\"$tmake_file i386/t-sol2-10\"\n+\t\ttmake_file=\"$tmake_file i386/t-crtstuff i386/t-sol2-10\"\n \t\tneed_64bit_hwint=yes\n \t\t# FIXME: -m64 for i[34567]86-*-* should be allowed just\n \t\t# like -m32 for x86_64-*-*."}, {"sha": "8fe58751640e4907228c7219c5c0d9b45225fd62", "filename": "gcc/config/i386/t-crtstuff", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Fi386%2Ft-crtstuff", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Fi386%2Ft-crtstuff", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ft-crtstuff?ref=d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "patch": "@@ -1,2 +1,7 @@\n # The pushl in CTOR initialization interferes with frame pointer elimination.\n-CRTSTUFF_T_CFLAGS = -fno-omit-frame-pointer\n+# crtend*.o cannot be compiled without -fno-asynchronous-unwind-tables,\n+# because then __FRAME_END__ might not be the last thing in .eh_frame\n+# section.  -fno-asynchronous-unwind-tables is off by default for i386\n+# and is on by default for x86-64.  We turn it off for both i386 and\n+# x86-64.\n+CRTSTUFF_T_CFLAGS = -fno-omit-frame-pointer -fno-asynchronous-unwind-tables"}, {"sha": "0a70cd90d463b8c80a092f12b393b0aad93968d6", "filename": "gcc/config/i386/t-linux64", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Fi386%2Ft-linux64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Fi386%2Ft-linux64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ft-linux64?ref=d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "patch": "@@ -17,9 +17,3 @@ EXTRA_MULTILIB_PARTS=crtbegin.o crtend.o crtbeginS.o crtendS.o \\\n \n softfp_wrap_start := '\\#ifdef __x86_64__'\n softfp_wrap_end := '\\#endif'\n-\n-# The pushl in CTOR initialization interferes with frame pointer elimination.\n-# crtend*.o cannot be compiled without -fno-asynchronous-unwind-tables,\n-# because then __FRAME_END__ might not be the last thing in .eh_frame\n-# section.\n-CRTSTUFF_T_CFLAGS = -fno-omit-frame-pointer -fno-asynchronous-unwind-tables"}, {"sha": "0680618a6ec703efec0d50f05def28eda7ce1458", "filename": "gcc/config/t-freebsd", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Ft-freebsd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Ft-freebsd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-freebsd?ref=d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "patch": "@@ -1,5 +1,5 @@\n # Compile crtbeginS.o and crtendS.o with pic.\n-CRTSTUFF_T_CFLAGS_S = -fPIC\n+CRTSTUFF_T_CFLAGS_S = $(CRTSTUFF_T_CFLAGS) -fPIC\n \n # Compile libgcc.a with pic.\n TARGET_LIBGCC2_CFLAGS += -fPIC"}, {"sha": "561ee0b31d17050d6bf55315211d1089aeffb251", "filename": "gcc/config/t-libc-ok", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Ft-libc-ok", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Ft-libc-ok", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-libc-ok?ref=d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "patch": "@@ -1 +1 @@\n-CRTSTUFF_T_CFLAGS_S=-fPIC\n+CRTSTUFF_T_CFLAGS_S = $(CRTSTUFF_T_CFLAGS) -fPIC"}, {"sha": "3a6a5d871e4800499e0352b99727d125b50069b0", "filename": "gcc/config/t-lynx", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Ft-lynx", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Ft-lynx", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-lynx?ref=d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "patch": "@@ -1,5 +1,5 @@\n # Compile crtbeginS.o and crtendS.o with pic.\n-CRTSTUFF_T_CFLAGS_S = -fPIC\n+CRTSTUFF_T_CFLAGS_S = $(CRTSTUFF_T_CFLAGS) -fPIC\n \n # Compile libgcc2.a with pic.\n TARGET_LIBGCC2_CFLAGS = -fPIC"}, {"sha": "34949e12858ccc0325fccb0ff8c4493b6c2162a8", "filename": "gcc/config/t-netbsd", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Ft-netbsd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Ft-netbsd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-netbsd?ref=d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "patch": "@@ -1,2 +1,2 @@\n # Always build crtstuff with PIC.\n-CRTSTUFF_T_CFLAGS = -fPIC\n+CRTSTUFF_T_CFLAGS_S = $(CRTSTUFF_T_CFLAGS) -fPIC"}, {"sha": "3ea1174580dccb5c949d9d417f57711ee7861e8e", "filename": "gcc/config/t-svr4", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Ft-svr4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd/gcc%2Fconfig%2Ft-svr4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-svr4?ref=d3ef67eaf39f1af64a1a1331c63ad60dd8c217cd", "patch": "@@ -4,7 +4,7 @@\n # we will be doing that, we just always use -fPIC when compiling the\n # routines in crtstuff.c.  Likewise for libgcc2.c.\n \n-CRTSTUFF_T_CFLAGS = -fPIC\n+CRTSTUFF_T_CFLAGS_S = $(CRTSTUFF_T_CFLAGS) -fPIC\n TARGET_LIBGCC2_CFLAGS = -fPIC\n \n # See all the declarations."}]}