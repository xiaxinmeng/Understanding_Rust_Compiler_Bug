{"sha": "79387e574aaf8493e7fa9faef537a98f297061f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzkzODdlNTc0YWFmODQ5M2U3ZmE5ZmFlZjUzN2E5OGYyOTcwNjFmNw==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2006-07-21T05:31:33Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2006-07-21T05:31:33Z"}, "message": "config.gcc (i[34567]86-*-solaris2*): Add usegas.h to $tm_file if the target assembler is GNU binutils' gas.\n\n\n\t* config.gcc (i[34567]86-*-solaris2*): Add usegas.h to $tm_file\n\tif the target assembler is GNU binutils' gas.\n\t* config/i386/sol2-10.h (ASM_SPEC): Check USE_GAS to determine\n\twhether to pass GNU gas or native as command line options.\n\nFrom-SVN: r115638", "tree": {"sha": "c36efa3263124cc352e13d6db6d70e14e7a1a505", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c36efa3263124cc352e13d6db6d70e14e7a1a505"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/79387e574aaf8493e7fa9faef537a98f297061f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79387e574aaf8493e7fa9faef537a98f297061f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79387e574aaf8493e7fa9faef537a98f297061f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79387e574aaf8493e7fa9faef537a98f297061f7/comments", "author": null, "committer": null, "parents": [{"sha": "1ffb99e925d3608ed7c2f093d8e17001c8599525", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ffb99e925d3608ed7c2f093d8e17001c8599525", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ffb99e925d3608ed7c2f093d8e17001c8599525"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "597e1c14a7ac799be16f0ec4fd69221c59585bca", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79387e574aaf8493e7fa9faef537a98f297061f7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79387e574aaf8493e7fa9faef537a98f297061f7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=79387e574aaf8493e7fa9faef537a98f297061f7", "patch": "@@ -1,3 +1,10 @@\n+2006-07-20  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* config.gcc (i[34567]86-*-solaris2*): Add usegas.h to $tm_file\n+\tif the target assembler is GNU binutils' gas.\n+\t* config/i386/sol2-10.h (ASM_SPEC): Check USE_GAS to determine\n+\twhether to pass GNU gas or native as command line options.\n+\n 2006-07-20  Jason Merrill  <jason@redhat.com>\n \n \t* tree.c (remove_attribute): New fn."}, {"sha": "058fef7975b1f579f0ad14e871950038c2fb6949", "filename": "gcc/config.gcc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79387e574aaf8493e7fa9faef537a98f297061f7/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79387e574aaf8493e7fa9faef537a98f297061f7/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=79387e574aaf8493e7fa9faef537a98f297061f7", "patch": "@@ -1164,6 +1164,9 @@ i[34567]86-*-solaris2*)\n \telse\n \t\ttmake_file=\"$tmake_file t-slibgcc-sld\"\n \tfi\n+\tif test x$gas = xyes; then\n+\t\ttm_file=\"usegas.h ${tm_file}\"\n+\tfi\n \tcase ${target} in\n \t*-*-solaris2.[789] | *-*-solaris2.1[0-9]*)\n \t\ttm_file=\"$tm_file tm-dwarf2.h\""}, {"sha": "af51b4cb37682cd8abcdde3c861af7a6ef8d7bc6", "filename": "gcc/config/i386/sol2-10.h", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79387e574aaf8493e7fa9faef537a98f297061f7/gcc%2Fconfig%2Fi386%2Fsol2-10.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79387e574aaf8493e7fa9faef537a98f297061f7/gcc%2Fconfig%2Fi386%2Fsol2-10.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsol2-10.h?ref=79387e574aaf8493e7fa9faef537a98f297061f7", "patch": "@@ -22,9 +22,17 @@ Boston, MA 02110-1301, USA.  */\n #undef ASM_COMMENT_START\n #define ASM_COMMENT_START \"/\"\n \n+/* binutils' GNU as understands --32 and --64, but the native Solaris\n+   assembler requires -xarch=generic or -xarch=generic64 instead.  */\n #undef ASM_SPEC\n+#ifdef USE_GAS\n #define ASM_SPEC \"%{v:-V} %{Qy:} %{!Qn:-Qy} %{n} %{T} %{Ym,*} %{Yd,*} \" \\\n \t\t \"%{Wa,*:%*} %{m32:--32} %{m64:--64} -s %(asm_cpu)\"\n+#else\n+#define ASM_SPEC \"%{v:-V} %{Qy:} %{!Qn:-Qy} %{n} %{T} %{Ym,*} %{Yd,*} \" \\\n+\t\t \"%{Wa,*:%*} %{m32:-xarch=generic} %{m64:-xarch=generic64} \" \\\n+\t\t \"-s %(asm_cpu)\"\n+#endif\n \n #undef NO_PROFILE_COUNTERS\n "}]}