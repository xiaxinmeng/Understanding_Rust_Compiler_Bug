{"sha": "b245befcdd8ca0c38df47ea86537b92881490591", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjI0NWJlZmNkZDhjYTBjMzhkZjQ3ZWE4NjUzN2I5Mjg4MTQ5MDU5MQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2019-09-09T10:26:50Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-09-09T10:26:50Z"}, "message": "re PR target/91704 ([X86] Codegen for _mm256_cmpgt_epi8 is affected by -funsigned-char)\n\n\tPR target/91704\n\t* config/i386/avxintrin.h (__v32qs): New typedef.\n\t* config/i386/avx2intrin.h (_mm256_cmpgt_epi8): Use casts to __v32qs\n\tinstead of __v32qi.\n\n\t* gcc.target/i386/pr91704.c: New test.\n\nFrom-SVN: r275507", "tree": {"sha": "49281ad0f8a9b880c377b7dbbb260f7b3afbf3c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/49281ad0f8a9b880c377b7dbbb260f7b3afbf3c0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b245befcdd8ca0c38df47ea86537b92881490591", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b245befcdd8ca0c38df47ea86537b92881490591", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b245befcdd8ca0c38df47ea86537b92881490591", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b245befcdd8ca0c38df47ea86537b92881490591/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "91dfef9610b8844c62dc7186a9aea9a6aca9805c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91dfef9610b8844c62dc7186a9aea9a6aca9805c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91dfef9610b8844c62dc7186a9aea9a6aca9805c"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "fc56822af4d0932df674308b291f67719c261f2e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b245befcdd8ca0c38df47ea86537b92881490591/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b245befcdd8ca0c38df47ea86537b92881490591/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b245befcdd8ca0c38df47ea86537b92881490591", "patch": "@@ -1,3 +1,10 @@\n+2019-09-09  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/91704\n+\t* config/i386/avxintrin.h (__v32qs): New typedef.\n+\t* config/i386/avx2intrin.h (_mm256_cmpgt_epi8): Use casts to __v32qs\n+\tinstead of __v32qi.\n+\n 2019-09-09  Jose E. Marchesi  <jose.marchesi@oracle.com>\n \n \t* doc/invoke.texi (Option Summary): Cover eBPF."}, {"sha": "372d77f84fe2b6b68a9cc2e6a4c849f48e1c6c00", "filename": "gcc/config/i386/avx2intrin.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b245befcdd8ca0c38df47ea86537b92881490591/gcc%2Fconfig%2Fi386%2Favx2intrin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b245befcdd8ca0c38df47ea86537b92881490591/gcc%2Fconfig%2Fi386%2Favx2intrin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Favx2intrin.h?ref=b245befcdd8ca0c38df47ea86537b92881490591", "patch": "@@ -258,7 +258,7 @@ extern __inline __m256i\n __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm256_cmpgt_epi8 (__m256i __A, __m256i __B)\n {\n-  return (__m256i) ((__v32qi)__A > (__v32qi)__B);\n+  return (__m256i) ((__v32qs)__A > (__v32qs)__B);\n }\n \n extern __inline __m256i"}, {"sha": "95a9e018a7e156cd7a89cc31bc95d8eba3fdd336", "filename": "gcc/config/i386/avxintrin.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b245befcdd8ca0c38df47ea86537b92881490591/gcc%2Fconfig%2Fi386%2Favxintrin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b245befcdd8ca0c38df47ea86537b92881490591/gcc%2Fconfig%2Fi386%2Favxintrin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Favxintrin.h?ref=b245befcdd8ca0c38df47ea86537b92881490591", "patch": "@@ -47,6 +47,7 @@ typedef unsigned int __v8su __attribute__ ((__vector_size__ (32)));\n typedef short __v16hi __attribute__ ((__vector_size__ (32)));\n typedef unsigned short __v16hu __attribute__ ((__vector_size__ (32)));\n typedef char __v32qi __attribute__ ((__vector_size__ (32)));\n+typedef signed char __v32qs __attribute__ ((__vector_size__ (32)));\n typedef unsigned char __v32qu __attribute__ ((__vector_size__ (32)));\n \n /* The Intel API is flexible enough that we must allow aliasing with other"}, {"sha": "d1c448a3a078d2683830445a3b12b4420133ea05", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b245befcdd8ca0c38df47ea86537b92881490591/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b245befcdd8ca0c38df47ea86537b92881490591/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b245befcdd8ca0c38df47ea86537b92881490591", "patch": "@@ -1,3 +1,8 @@\n+2019-09-09  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/91704\n+\t* gcc.target/i386/pr91704.c: New test.\n+\n 2019-09-09  Jose E. Marchesi  <jose.marchesi@oracle.com>\n \n \t* gcc.dg/builtins-config.h: eBPF doesn't support C99 standard"}, {"sha": "b996e24ad7497be27a19c1a80cf7825b1742870b", "filename": "gcc/testsuite/gcc.target/i386/pr91704.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b245befcdd8ca0c38df47ea86537b92881490591/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr91704.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b245befcdd8ca0c38df47ea86537b92881490591/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr91704.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr91704.c?ref=b245befcdd8ca0c38df47ea86537b92881490591", "patch": "@@ -0,0 +1,14 @@\n+/* PR target/91704 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -funsigned-char -mavx2 -mavx512f -masm=att\" } */\n+/* { dg-final { scan-assembler-times \"\\tvpcmpgtb\\t%ymm\" 1 } } */\n+/* { dg-final { scan-assembler-not \"\\tvpsubusb\\t\" } } */\n+/* { dg-final { scan-assembler-not \"\\tvpcmpeqb\\t\" } } */\n+\n+#include <x86intrin.h>\n+\n+__m256i\n+foo (__m256i x, __m256i y)\n+{\n+  return _mm256_cmpgt_epi8 (x, y);\n+}"}]}