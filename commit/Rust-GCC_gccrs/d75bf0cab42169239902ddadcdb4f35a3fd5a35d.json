{"sha": "d75bf0cab42169239902ddadcdb4f35a3fd5a35d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDc1YmYwY2FiNDIxNjkyMzk5MDJkZGFkY2RiNGYzNWEzZmQ1YTM1ZA==", "commit": {"author": {"name": "Dorit Naishlos", "email": "dorit@il.ibm.com", "date": "2004-11-30T13:19:54Z"}, "committer": {"name": "Dorit Nuzman", "email": "dorit@gcc.gnu.org", "date": "2004-11-30T13:19:54Z"}, "message": "tree-vectorizer.c (vect_can_force_dr_alignment_p): Return false for decls that are assembled before vectorization takes place.\n\n\t* tree-vectorizer.c (vect_can_force_dr_alignment_p): Return false for\n\tdecls that are assembled before vectorization takes place.\n\t(vect_compute_data_ref_alignment): Set DECL_USER_ALIGN to 1.\n\nFrom-SVN: r91517", "tree": {"sha": "d060cfed08727b698c904d1e568016ba783a57b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d060cfed08727b698c904d1e568016ba783a57b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d75bf0cab42169239902ddadcdb4f35a3fd5a35d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d75bf0cab42169239902ddadcdb4f35a3fd5a35d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d75bf0cab42169239902ddadcdb4f35a3fd5a35d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d75bf0cab42169239902ddadcdb4f35a3fd5a35d/comments", "author": null, "committer": null, "parents": [{"sha": "9b09c842b5339a624677754bdadf377ccf944bf4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b09c842b5339a624677754bdadf377ccf944bf4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b09c842b5339a624677754bdadf377ccf944bf4"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "bade2ffd7173d4649335fb81386bef3d3ab9fd3b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d75bf0cab42169239902ddadcdb4f35a3fd5a35d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d75bf0cab42169239902ddadcdb4f35a3fd5a35d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d75bf0cab42169239902ddadcdb4f35a3fd5a35d", "patch": "@@ -1,3 +1,10 @@\n+2004-11-30  Dorit Naishlos  <dorit@il.ibm.com>\n+\n+\tPR tree-opt/18173\n+\t* tree-vectorizer.c (vect_can_force_dr_alignment_p): Return false for\n+\tdecls that are assembled before vectorization takes place.\n+\t(vect_compute_data_ref_alignment): Set DECL_USER_ALIGN to 1.\t\n+\n 2004-11-30  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \t* passes.c (rest_of_handle_old_regalloc): Delete unreachable blocks"}, {"sha": "d476d813ff2789c21ca59bc618d89602a6a4643a", "filename": "gcc/tree-vectorizer.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d75bf0cab42169239902ddadcdb4f35a3fd5a35d/gcc%2Ftree-vectorizer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d75bf0cab42169239902ddadcdb4f35a3fd5a35d/gcc%2Ftree-vectorizer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vectorizer.c?ref=d75bf0cab42169239902ddadcdb4f35a3fd5a35d", "patch": "@@ -1509,6 +1509,9 @@ vect_can_force_dr_alignment_p (tree decl, unsigned int alignment)\n   if (DECL_EXTERNAL (decl))\n     return false;\n \n+  if (TREE_ASM_WRITTEN (decl))\n+    return false;\n+\n   if (TREE_STATIC (decl))\n     return (alignment <= MAX_OFILE_ALIGNMENT);\n   else\n@@ -4130,7 +4133,7 @@ vect_compute_data_ref_alignment (struct data_reference *dr,\n       if (vect_debug_details (NULL))\n \tfprintf (dump_file, \"force alignment\");\n       DECL_ALIGN (base) = TYPE_ALIGN (vectype);\n-      DECL_USER_ALIGN (base) = TYPE_ALIGN (vectype);\n+      DECL_USER_ALIGN (base) = 1;\n     }\n \n   /* At this point we assume that the base is aligned, and the offset from it"}]}