{"sha": "d9c28ce3a4b7a885ee63b295036f95f861bf212d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDljMjhjZTNhNGI3YTg4NWVlNjNiMjk1MDM2Zjk1Zjg2MWJmMjEyZA==", "commit": {"author": {"name": "Peter Schmid", "email": "schmid@snake.iap.physik.tu-darmstadt.de", "date": "2001-10-04T19:49:54Z"}, "committer": {"name": "Toon Moene", "email": "toon@gcc.gnu.org", "date": "2001-10-04T19:49:54Z"}, "message": "g77.exp: set libg2c_dir correctly.\n\n2001-10-04  Peter Schmid  <schmid@snake.iap.physik.tu-darmstadt.de>\n\n\t* lib/g77.exp: set libg2c_dir correctly.\n\nFrom-SVN: r46013", "tree": {"sha": "da28733db3e6b73702afef4e8d5598b314f97644", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da28733db3e6b73702afef4e8d5598b314f97644"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9c28ce3a4b7a885ee63b295036f95f861bf212d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9c28ce3a4b7a885ee63b295036f95f861bf212d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9c28ce3a4b7a885ee63b295036f95f861bf212d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9c28ce3a4b7a885ee63b295036f95f861bf212d/comments", "author": null, "committer": null, "parents": [{"sha": "7f50e2e396b2450cedd2116220a99289cae0d6d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f50e2e396b2450cedd2116220a99289cae0d6d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f50e2e396b2450cedd2116220a99289cae0d6d9"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "0335486a15640bf9a273dada5deb37da12dc895f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9c28ce3a4b7a885ee63b295036f95f861bf212d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9c28ce3a4b7a885ee63b295036f95f861bf212d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d9c28ce3a4b7a885ee63b295036f95f861bf212d", "patch": "@@ -1,3 +1,7 @@\n+2001-10-04  Peter Schmid  <schmid@snake.iap.physik.tu-darmstadt.de>\n+\n+\t* lib/g77.exp: set libg2c_dir correctly.\n+\n 2001-10-02  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* gcc.dg/cpp/macro11.c: New test."}, {"sha": "44ea774d9705a8b33c533fa82c0e7dfabe409786", "filename": "gcc/testsuite/lib/g77.exp", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9c28ce3a4b7a885ee63b295036f95f861bf212d/gcc%2Ftestsuite%2Flib%2Fg77.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9c28ce3a4b7a885ee63b295036f95f861bf212d/gcc%2Ftestsuite%2Flib%2Fg77.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fg77.exp?ref=d9c28ce3a4b7a885ee63b295036f95f861bf212d", "patch": "@@ -116,10 +116,14 @@ proc g77_init { args } {\n }\n \n proc g77_target_compile { source dest type options } {\n+    global rootme;\n     global tmpdir;\n     global gluefile wrap_flags;\n     global G77_UNDER_TEST\n     global TOOL_OPTIONS\n+    global ld_library_path;\n+\n+    set ld_library_path \".:${rootme}\"\n \n     if { [target_info needs_status_wrapper]!=\"\" && [info exists gluefile] } {\n \tlappend options \"libs=${gluefile}\"\n@@ -143,12 +147,21 @@ proc g77_target_compile { source dest type options } {\n     }\n     if ![is_remote host] {\n       set gccpath \"[get_multilibs]\"\n-      set libg2c_dir [lookfor_file ${gccpath} libf2c/libg2c.a]\n+      set libg2c_dir [lookfor_file ${gccpath} libf2c/libg2c.la]\n       if { $libg2c_dir != \"\" } {\n \tset libg2c_link_flags \"-L[file dirname ${libg2c_dir}]\"\n \tlappend options \"additional_flags=${libg2c_link_flags}\"\n       }\n     }\n+    set g2cpath \"[get_multilibs]\"\n+    set libg2c_dir [lookfor_file ${g2cpath} libf2c/.libs/libg2c.a]\n+    if { $libg2c_dir != \"\" } {\n+        set libg2c_dir [file dirname ${libg2c_dir}]\n+        set g2c_link_flags \"-L${libg2c_dir}\"\n+        lappend options \"additional_flags=${g2c_link_flags}\"\n+        append ld_library_path \":${libg2c_dir}\"\n+    }\n+ \n     lappend options \"compiler=$G77_UNDER_TEST\"\n     return [target_compile $source $dest $type $options]\n }"}]}