{"sha": "ee19ef45ba9dc5a783303e353d538e83dabe3377", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWUxOWVmNDViYTlkYzVhNzgzMzAzZTM1M2Q1MzhlODNkYWJlMzM3Nw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-10-08T10:54:27Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-10-08T10:54:27Z"}, "message": "invoke.texi: Document accepting Else, fallthrough.\n\n\t* doc/invoke.texi: Document accepting Else, fallthrough.\n\n\t* lex.c (fallthrough_comment_p): Accept Else, fallthrough.\n\n\t* c-c++-common/Wimplicit-fallthrough-23.c (foo): Add further tests.\n\nFrom-SVN: r240886", "tree": {"sha": "2bb03fc407441f31957cbe3fcb1f2eeb60783246", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2bb03fc407441f31957cbe3fcb1f2eeb60783246"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee19ef45ba9dc5a783303e353d538e83dabe3377", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee19ef45ba9dc5a783303e353d538e83dabe3377", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee19ef45ba9dc5a783303e353d538e83dabe3377", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee19ef45ba9dc5a783303e353d538e83dabe3377/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "81b02905b035e7afee46c38186c95434b6d86813", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81b02905b035e7afee46c38186c95434b6d86813", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81b02905b035e7afee46c38186c95434b6d86813"}], "stats": {"total": 43, "additions": 34, "deletions": 9}, "files": [{"sha": "fa748f35aa56495b6cfb055241fc5dc047a85122", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee19ef45ba9dc5a783303e353d538e83dabe3377/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee19ef45ba9dc5a783303e353d538e83dabe3377/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ee19ef45ba9dc5a783303e353d538e83dabe3377", "patch": "@@ -1,5 +1,7 @@\n 2016-10-08  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* doc/invoke.texi: Document accepting Else, fallthrough.\n+\n \t* doc/invoke.texi (-Wimplicit-fallthrough): Document FALLTHRU comment\n \tstyle changes.\n "}, {"sha": "8d8fdeedcf3c10af4997ecb3f95c430264a8b454", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee19ef45ba9dc5a783303e353d538e83dabe3377/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee19ef45ba9dc5a783303e353d538e83dabe3377/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=ee19ef45ba9dc5a783303e353d538e83dabe3377", "patch": "@@ -4181,11 +4181,11 @@ should match one of the following regular expressions:\n \n @item @code{lint -fallthrough ?}\n \n-@item @code{[ \\t.!]*(ELSE |INTENTIONAL(LY)? )?FALL(S | |-)?THR(OUGH|U)[ \\t.!]*(-[^\\n\\r]*)?}\n+@item @code{[ \\t.!]*(ELSE,? |INTENTIONAL(LY)? )?FALL(S | |-)?THR(OUGH|U)[ \\t.!]*(-[^\\n\\r]*)?}\n \n-@item @code{[ \\t.!]*(Else |Intentional(ly)? )?Fall((s | |-)[Tt]|t)hr(ough|u)[ \\t.!]*(-[^\\n\\r]*)?}\n+@item @code{[ \\t.!]*(Else,? |Intentional(ly)? )?Fall((s | |-)[Tt]|t)hr(ough|u)[ \\t.!]*(-[^\\n\\r]*)?}\n \n-@item @code{[ \\t.!]*([Ee]lse |[Ii]ntentional(ly)? )?fall(s | |-)?thr(ough|u)[ \\t.!]*(-[^\\n\\r]*)?}\n+@item @code{[ \\t.!]*([Ee]lse,? |[Ii]ntentional(ly)? )?fall(s | |-)?thr(ough|u)[ \\t.!]*(-[^\\n\\r]*)?}\n \n @end itemize\n "}, {"sha": "9422a47dd0978cc9c9afbcc07cc7c11551ae53d9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee19ef45ba9dc5a783303e353d538e83dabe3377/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee19ef45ba9dc5a783303e353d538e83dabe3377/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ee19ef45ba9dc5a783303e353d538e83dabe3377", "patch": "@@ -2,6 +2,8 @@\n \n \t* c-c++-common/Wimplicit-fallthrough-23.c (foo): Add further tests.\n \n+\t* c-c++-common/Wimplicit-fallthrough-23.c (foo): Add further tests.\n+\n \t* c-c++-common/Wimplicit-fallthrough-23.c: New test.\n \t* c-c++-common/Wimplicit-fallthrough-24.c: New test.\n "}, {"sha": "01a43883acc4b00340e44a8de7f50a5401c4bc02", "filename": "gcc/testsuite/c-c++-common/Wimplicit-fallthrough-23.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee19ef45ba9dc5a783303e353d538e83dabe3377/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWimplicit-fallthrough-23.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee19ef45ba9dc5a783303e353d538e83dabe3377/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWimplicit-fallthrough-23.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWimplicit-fallthrough-23.c?ref=ee19ef45ba9dc5a783303e353d538e83dabe3377", "patch": "@@ -114,6 +114,12 @@ foo (int i)\n     case 34:\n       bar (34);\n       break;\n+    case 35:\n+      bar (35);\t\t\t/* { dg-bogus \"this statement may \\[laf]* through\" } */\n+      /* Else, fall-through. */\n+    case 36:\n+      bar (36);\n+      break;\n     default:\n       break;\n     }\n@@ -225,6 +231,12 @@ foo (int i)\n     case 34:\n       bar (34);\n       break;\n+    case 35:\n+      bar (35);\t\t\t/* { dg-bogus \"this statement may \\[laf]* through\" } */\n+      // Else, fall-through\n+    case 36:\n+      bar (36);\n+      break;\n     default:\n       break;\n     }"}, {"sha": "1f4db497dd13b2bd3398a7539875c66506c85573", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee19ef45ba9dc5a783303e353d538e83dabe3377/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee19ef45ba9dc5a783303e353d538e83dabe3377/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=ee19ef45ba9dc5a783303e353d538e83dabe3377", "patch": "@@ -1,5 +1,7 @@\n 2016-10-08  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* lex.c (fallthrough_comment_p): Accept Else, fallthrough.\n+\n \t* lex.c (fallthrough_comment_p): Extend to handle more common FALLTHRU\n \tcomment styles.\n "}, {"sha": "4d8e5e703269e5e1340010c292cfab2169225956", "filename": "libcpp/lex.c", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee19ef45ba9dc5a783303e353d538e83dabe3377/libcpp%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee19ef45ba9dc5a783303e353d538e83dabe3377/libcpp%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Flex.c?ref=ee19ef45ba9dc5a783303e353d538e83dabe3377", "patch": "@@ -2074,9 +2074,9 @@ fallthrough_comment_p (cpp_reader *pfile, const unsigned char *comment_start)\n         from++;\n     }\n   /* Whole comment contents (regex):\n-     [ \\t.!]*(ELSE |INTENTIONAL(LY)? )?FALL(S | |-)?THR(OUGH|U)[ \\t.!]*(-[^\\n\\r]*)?\n-     [ \\t.!]*(Else |Intentional(ly)? )?Fall((s | |-)[Tt]|t)hr(ough|u)[ \\t.!]*(-[^\\n\\r]*)?\n-     [ \\t.!]*([Ee]lse |[Ii]ntentional(ly)? )?fall(s | |-)?thr(ough|u)[ \\t.!]*(-[^\\n\\r]*)?\n+     [ \\t.!]*(ELSE,? |INTENTIONAL(LY)? )?FALL(S | |-)?THR(OUGH|U)[ \\t.!]*(-[^\\n\\r]*)?\n+     [ \\t.!]*(Else,? |Intentional(ly)? )?Fall((s | |-)[Tt]|t)hr(ough|u)[ \\t.!]*(-[^\\n\\r]*)?\n+     [ \\t.!]*([Ee]lse,? |[Ii]ntentional(ly)? )?fall(s | |-)?thr(ough|u)[ \\t.!]*(-[^\\n\\r]*)?\n    */\n   else\n     {\n@@ -2089,11 +2089,18 @@ fallthrough_comment_p (cpp_reader *pfile, const unsigned char *comment_start)\n           if ((size_t) (pfile->buffer->cur - from)\n \t      < sizeof \"else fallthru\" - 1)\n \t    return false;\n-\t  if (f == 'E' && memcmp (from + 1, \"LSE F\", sizeof \"LSE F\" - 1) == 0)\n+\t  if (f == 'E' && memcmp (from + 1, \"LSE\", sizeof \"LSE\" - 1) == 0)\n \t    all_upper = true;\n-\t  else if (memcmp (from + 1, \"lse \", sizeof \"lse \" - 1))\n+\t  else if (memcmp (from + 1, \"lse\", sizeof \"lse\" - 1))\n+\t    return false;\n+\t  from += sizeof \"else\" - 1;\n+\t  if (*from == ',')\n+\t    from++;\n+          if (*from != ' ')\n+\t    return false;\n+\t  from++;\n+\t  if (all_upper && *from == 'f')\n \t    return false;\n-\t  from += sizeof \"else \" - 1;\n \t  if (f == 'e' && *from == 'F')\n \t    return false;\n \t  f = *from;"}]}