{"sha": "58760a81d720022370380a3607548e7d48e9ea83", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTg3NjBhODFkNzIwMDIyMzcwMzgwYTM2MDc1NDhlN2Q0OGU5ZWE4Mw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2008-09-28T15:12:07Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2008-09-28T15:12:07Z"}, "message": "re PR middle-end/36575 (ACATS c460011 fails at -O3)\n\n\tPR middle-end/36575\n\t* fold-const (div_and_round_double) <ROUND_DIV_EXPR>: Fix typo.\n\nFrom-SVN: r140734", "tree": {"sha": "ff78e41067c16ff05944e5571c26cfb14b13bbfb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff78e41067c16ff05944e5571c26cfb14b13bbfb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/58760a81d720022370380a3607548e7d48e9ea83", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58760a81d720022370380a3607548e7d48e9ea83", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58760a81d720022370380a3607548e7d48e9ea83", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58760a81d720022370380a3607548e7d48e9ea83/comments", "author": null, "committer": null, "parents": [{"sha": "86cfb27a7d6f38b1138ad376738ec6690dfe2e8b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86cfb27a7d6f38b1138ad376738ec6690dfe2e8b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86cfb27a7d6f38b1138ad376738ec6690dfe2e8b"}], "stats": {"total": 47, "additions": 45, "deletions": 2}, "files": [{"sha": "e0405f6453ef64a5f933cdb114c6b148b88e5803", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58760a81d720022370380a3607548e7d48e9ea83/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58760a81d720022370380a3607548e7d48e9ea83/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=58760a81d720022370380a3607548e7d48e9ea83", "patch": "@@ -1,3 +1,8 @@\n+2008-09-28  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR middle-end/36575\n+\t* fold-const (div_and_round_double) <ROUND_DIV_EXPR>: Fix typo.\n+\n 2008-09-28  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* expmed.c (store_fixed_bit_field): Always use convert_to_mode in"}, {"sha": "0ce122a15545b3f57362ce781703d55bd6099460", "filename": "gcc/fold-const.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58760a81d720022370380a3607548e7d48e9ea83/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58760a81d720022370380a3607548e7d48e9ea83/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=58760a81d720022370380a3607548e7d48e9ea83", "patch": "@@ -835,15 +835,15 @@ div_and_round_double (enum tree_code code, int uns,\n \tif (hden < 0)\n \t  neg_double (lden, hden, &labs_den, &habs_den);\n \n-\t/* If (2 * abs (lrem) >= abs (lden)) */\n+\t/* If (2 * abs (lrem) >= abs (lden)), adjust the quotient.  */\n \tmul_double ((HOST_WIDE_INT) 2, (HOST_WIDE_INT) 0,\n \t\t    labs_rem, habs_rem, &ltwice, &htwice);\n \n \tif (((unsigned HOST_WIDE_INT) habs_den\n \t     < (unsigned HOST_WIDE_INT) htwice)\n \t    || (((unsigned HOST_WIDE_INT) habs_den\n \t\t == (unsigned HOST_WIDE_INT) htwice)\n-\t\t&& (labs_den < ltwice)))\n+\t\t&& (labs_den <= ltwice)))\n \t  {\n \t    if (*hquo < 0)\n \t      /* quo = quo - 1;  */"}, {"sha": "41ba8dc295fc3d17ecd4f07acb151fd5faa1f192", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58760a81d720022370380a3607548e7d48e9ea83/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58760a81d720022370380a3607548e7d48e9ea83/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=58760a81d720022370380a3607548e7d48e9ea83", "patch": "@@ -1,3 +1,7 @@\n+2008-09-28  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/conv_decimal.adb: New test.\n+\n 2008-09-26  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/37275"}, {"sha": "d5199c1b48b98df1beb7c3a3a60a856c95c2ee5d", "filename": "gcc/testsuite/gnat.dg/conv_decimal.adb", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58760a81d720022370380a3607548e7d48e9ea83/gcc%2Ftestsuite%2Fgnat.dg%2Fconv_decimal.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58760a81d720022370380a3607548e7d48e9ea83/gcc%2Ftestsuite%2Fgnat.dg%2Fconv_decimal.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fconv_decimal.adb?ref=58760a81d720022370380a3607548e7d48e9ea83", "patch": "@@ -0,0 +1,34 @@\n+-- PR middle-end/36575\n+-- reporter: Laurent Guerby <laurent@guerby.net>\n+-- { dg-do run }\n+\n+procedure Conv_Decimal is\n+\n+  type Unsigned_Over_8 is mod 2**8+2;\n+  type Signed_Over_8 is range -200 .. 200;\n+\n+  procedure Assert(Truth: Boolean) is\n+  begin\n+    if not Truth then\n+      raise Program_Error;\n+    end if;\n+  end;\n+\n+  type Decim is delta 0.1 digits 5;\n+\n+  Halfway  : Decim := 2.5;\n+  Neg_Half : Decim := -2.5;\n+\n+  Big      : Unsigned_Over_8;\n+  Also_Big : Signed_Over_8;\n+\n+begin\n+  Big := Unsigned_Over_8 (Halfway); -- Rounds up by 4.6(33).\n+  Assert(Big = 3);\n+\n+  Also_Big := Signed_Over_8 (Halfway); -- Rounds up by 4.6(33).\n+  Assert(Also_Big = 3);\n+\n+  Also_Big := Signed_Over_8 (Neg_Half); -- Rounds down by 4.6(33).\n+  Assert(Also_Big = -3);\n+end;"}]}