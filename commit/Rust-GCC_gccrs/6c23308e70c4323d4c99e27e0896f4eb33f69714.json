{"sha": "6c23308e70c4323d4c99e27e0896f4eb33f69714", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmMyMzMwOGU3MGM0MzIzZDRjOTllMjdlMDg5NmY0ZWIzM2Y2OTcxNA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-08-29T03:06:15Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-08-29T03:06:15Z"}, "message": "compiler: Fix comparison of struct/array with interface.\n\nThe compiler used to crash when the struct/array was not\naddressable.\n\nThe test case is https://codereview.appspot.com/135170043 .\n\nThis fixes http://golang.org/issue/8612 .\n\nFrom-SVN: r214713", "tree": {"sha": "11f470026475e1fc32934ad05b20faf40f2d6a3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/11f470026475e1fc32934ad05b20faf40f2d6a3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6c23308e70c4323d4c99e27e0896f4eb33f69714", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c23308e70c4323d4c99e27e0896f4eb33f69714", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c23308e70c4323d4c99e27e0896f4eb33f69714", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c23308e70c4323d4c99e27e0896f4eb33f69714/comments", "author": null, "committer": null, "parents": [{"sha": "bbbf5d5ab47a1632a3de692a451409ca201a4985", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bbbf5d5ab47a1632a3de692a451409ca201a4985", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bbbf5d5ab47a1632a3de692a451409ca201a4985"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "6414136fed01b7d2484e1af614c339e8e534b695", "filename": "gcc/go/gofrontend/expressions.cc", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c23308e70c4323d4c99e27e0896f4eb33f69714/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c23308e70c4323d4c99e27e0896f4eb33f69714/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc?ref=6c23308e70c4323d4c99e27e0896f4eb33f69714", "patch": "@@ -5187,10 +5187,13 @@ Binary_expression::do_lower(Gogo* gogo, Named_object*,\n   // Lower struct, array, and some interface comparisons.\n   if (op == OPERATOR_EQEQ || op == OPERATOR_NOTEQ)\n     {\n-      if (left->type()->struct_type() != NULL)\n+      if (left->type()->struct_type() != NULL\n+\t  && right->type()->struct_type() != NULL)\n \treturn this->lower_struct_comparison(gogo, inserter);\n       else if (left->type()->array_type() != NULL\n-\t       && !left->type()->is_slice_type())\n+\t       && !left->type()->is_slice_type()\n+\t       && right->type()->array_type() != NULL\n+\t       && !right->type()->is_slice_type())\n \treturn this->lower_array_comparison(gogo, inserter);\n       else if ((left->type()->interface_type() != NULL\n                 && right->type()->interface_type() == NULL)"}]}