{"sha": "cff555dccdb73f52ab49ccf65e7f23263248ee86", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2ZmNTU1ZGNjZGI3M2Y1MmFiNDljY2Y2NWU3ZjIzMjYzMjQ4ZWU4Ng==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2004-01-25T17:51:51Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-01-25T17:51:51Z"}, "message": "lib1funcs.asm (divnorm, modnorm): Optimize by using ccr.\n\n\t* config/h8300/lib1funcs.asm (divnorm, modnorm): Optimize by\n\tusing ccr.\n\nFrom-SVN: r76573", "tree": {"sha": "22bc75f588f0a64706c1b78b24433cb1927c255c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/22bc75f588f0a64706c1b78b24433cb1927c255c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cff555dccdb73f52ab49ccf65e7f23263248ee86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cff555dccdb73f52ab49ccf65e7f23263248ee86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cff555dccdb73f52ab49ccf65e7f23263248ee86", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cff555dccdb73f52ab49ccf65e7f23263248ee86/comments", "author": null, "committer": null, "parents": [{"sha": "30f58b01a438ce9b02693331ee76995352c28db8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30f58b01a438ce9b02693331ee76995352c28db8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30f58b01a438ce9b02693331ee76995352c28db8"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "b3be4d2bc50e116035e04e4225601a461f269223", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cff555dccdb73f52ab49ccf65e7f23263248ee86/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cff555dccdb73f52ab49ccf65e7f23263248ee86/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cff555dccdb73f52ab49ccf65e7f23263248ee86", "patch": "@@ -1,3 +1,8 @@\n+2004-01-25  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/lib1funcs.asm (divnorm, modnorm): Optimize by\n+\tusing ccr.\n+\n 2004-01-25  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/i860/i860-protos.h: Remove the prototype for"}, {"sha": "985ec36e317da4190557b23ee107088f9918fe44", "filename": "gcc/config/h8300/lib1funcs.asm", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cff555dccdb73f52ab49ccf65e7f23263248ee86/gcc%2Fconfig%2Fh8300%2Flib1funcs.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cff555dccdb73f52ab49ccf65e7f23263248ee86/gcc%2Fconfig%2Fh8300%2Flib1funcs.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Flib1funcs.asm?ref=cff555dccdb73f52ab49ccf65e7f23263248ee86", "patch": "@@ -2,7 +2,8 @@\n ;; Contributed by Steve Chamberlain <sac@cygnus.com>\n ;; Optimizations by Toshiyasu Morita <toshiyasu.morita@renesas.com>\n \n-/* Copyright (C) 1994, 2000, 2001, 2002 Free Software Foundation, Inc.\n+/* Copyright (C) 1994, 2000, 2001, 2002, 2003, 2004\n+   Free Software Foundation, Inc.\n \n This file is free software; you can redistribute it and/or modify it\n under the terms of the GNU General Public License as published by the\n@@ -174,30 +175,28 @@ ___ucmpsi2:\n \t.section .text\n \t.align 2\n divnorm:\n-\tmov.b\t#0x0,A2L\n \tor\tA0H,A0H\t\t; is divisor > 0\n+\tstc\tccr,A2L\n \tbge\t_lab1\n \tnot\tA0H\t\t; no - then make it +ve\n \tnot\tA0L\n \tadds\t#1,A0\n-\txor\t#0x1,A2L\t; and remember that in A2L\n _lab1:\tor\tA1H,A1H\t; look at dividend\n \tbge\t_lab2\n \tnot\tA1H\t\t; it is -ve, make it positive\n \tnot\tA1L\n \tadds\t#1,A1\n-\txor\t#0x1,A2L; and toggle sign of result\n+\txor\t#0x8,A2L; and toggle sign of result\n _lab2:\trts\n ;; Basically the same, except that the sign of the divisor determines\n ;; the sign.\n modnorm:\n-\tmov.b\t#0x0,A2L\n \tor\tA0H,A0H\t\t; is divisor > 0\n+\tstc\tccr,A2L\n \tbge\t_lab7\n \tnot\tA0H\t\t; no - then make it +ve\n \tnot\tA0L\n \tadds\t#1,A0\n-\txor\t#0x1,A2L\t; and remember that in A2L\n _lab7:\tor\tA1H,A1H\t; look at dividend\n \tbge\t_lab8\n \tnot\tA1H\t\t; it is -ve, make it positive\n@@ -211,7 +210,7 @@ _lab8:\trts\n ___divhi3:\n \tbsr\tdivnorm\n \tbsr\t___udivhi3\n-negans:\tor\tA2L,A2L\t; should answer be negative ?\n+negans:\tbtst\t#3,A2L\t; should answer be negative ?\n \tbeq\t_lab4\n \tnot\tA0H\t; yes, so make it so\n \tnot\tA0L"}]}