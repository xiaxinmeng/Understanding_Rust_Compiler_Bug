{"sha": "02540df4e6b7c030012c1c5d1383dc03a41f6f8e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDI1NDBkZjRlNmI3YzAzMDAxMmMxYzVkMTM4M2RjMDNhNDFmNmY4ZQ==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2010-05-18T08:12:56Z"}, "committer": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2010-05-18T08:12:56Z"}, "message": "add lto to powerpc-*darwin and enable for 32bit darwin\n\nSteven Bosscher  <steven@gcc.gnu.org>\nChangeLog:\n\t* configure.ac (--enable-lto): All *-apple-darwin* now support LTO.\n\t* configure: Regenerate.\n\ngcc/ChangeLog:\n\t* config.gcc (powerpc-*-darwin*, powerpc64-*-darwin*): Add\n\tlto-macho as lto_binary_reader.\n\n\t* darwin.c (darwin_asm_named_section): Do not add assembler comment\n\tafter .section directive; just print it before the directive instead.\n\n\n\nM    gcc/config.gcc\nM    gcc/config/darwin.c\nM    ChangeLog\nM    gcc/ChangeLog\n\nFrom-SVN: r159527", "tree": {"sha": "39b77ee32c3ee392fdb9b93500e805b045d06bf2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/39b77ee32c3ee392fdb9b93500e805b045d06bf2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02540df4e6b7c030012c1c5d1383dc03a41f6f8e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02540df4e6b7c030012c1c5d1383dc03a41f6f8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02540df4e6b7c030012c1c5d1383dc03a41f6f8e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/comments", "author": null, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "451078b5e0ebc5a97db4fa973088ec58ff11ece6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/451078b5e0ebc5a97db4fa973088ec58ff11ece6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/451078b5e0ebc5a97db4fa973088ec58ff11ece6"}], "stats": {"total": 24, "additions": 20, "deletions": 4}, "files": [{"sha": "2aa46dec8fea51737a273980f1e36f66720f3acf", "filename": "ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=02540df4e6b7c030012c1c5d1383dc03a41f6f8e", "patch": "@@ -1,3 +1,8 @@\n+2010-05-18  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\t* configure.ac (--enable-lto): All *-apple-darwin* now support LTO.\n+\t* configure: Regenerate.\n+\n 2010-05-12  Sriraman Tallam  <tmsriram@google.com>\n \n \t* MAINTAINERS (Write After Approval): Add myself."}, {"sha": "8edfde3da4d753dd410214c5e75f5b53b91b9f3d", "filename": "configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=02540df4e6b7c030012c1c5d1383dc03a41f6f8e", "patch": "@@ -6686,7 +6686,7 @@ else\n   # -flto it won't be needed until after installation anyway.\n     case $target in\n       *-cygwin*|*-mingw*) ;;\n-      x86_64-apple-darwin*) ;;\n+      *-apple-darwin*) ;;\n       *) if test x\"$enable_lto\" = x\"yes\"; then\n \tas_fn_error \"LTO support is not enabled for this target.\" \"$LINENO\" 5\n         fi"}, {"sha": "f78c5273084a06aa9299d8431b6745363815229e", "filename": "configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=02540df4e6b7c030012c1c5d1383dc03a41f6f8e", "patch": "@@ -1803,7 +1803,7 @@ fi],[if test x\"$default_enable_lto\" = x\"yes\" ; then\n   # -flto it won't be needed until after installation anyway.\n     case $target in\n       *-cygwin*|*-mingw*) ;;\n-      x86_64-apple-darwin*) ;;\n+      *-apple-darwin*) ;;\n       *) if test x\"$enable_lto\" = x\"yes\"; then\n \tAC_MSG_ERROR([LTO support is not enabled for this target.])\n         fi"}, {"sha": "56d1b0bef2ef4e39ae66eb7ec1e2c2748d5b4e5e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=02540df4e6b7c030012c1c5d1383dc03a41f6f8e", "patch": "@@ -1,3 +1,11 @@\n+2010-05-18  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\t* config.gcc (powerpc-*-darwin*, powerpc64-*-darwin*): Add\n+\tlto-macho as lto_binary_reader.\n+\n+\t* darwin.c (darwin_asm_named_section): Do not add assembler comment\n+\tafter .section directive; just print it before the directive instead.\n+\n 2010-05-17  Jan Hubicka  <jh@suse.cz>\n \n \t* cgraph.c (cgraph_create_virtual_clone): Only check"}, {"sha": "2c4d1213c35aa96ae45fc1bb4c570b73d804da74", "filename": "gcc/config.gcc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=02540df4e6b7c030012c1c5d1383dc03a41f6f8e", "patch": "@@ -1891,12 +1891,14 @@ powerpc-*-darwin*)\n \t  *-darwin[0-6]*)\n \t    ;;\n \tesac\n+\tlto_binary_reader=lto-macho\n \textra_headers=altivec.h\n \t;;\n powerpc64-*-darwin*)\n \ttm_file=\"${tm_file} ${cpu_type}/darwin8.h ${cpu_type}/darwin64.h\"\n \textra_options=\"${extra_options} ${cpu_type}/darwin.opt\"\n \t# We're omitting t-darwin8 to avoid building any multilibs\n+\tlto_binary_reader=lto-macho\n \textra_headers=altivec.h\n \t;;\n powerpc*-*-freebsd*)"}, {"sha": "6c63d7a32b4b89fefdce59ed676c8e1487a01bcb", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02540df4e6b7c030012c1c5d1383dc03a41f6f8e/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=02540df4e6b7c030012c1c5d1383dc03a41f6f8e", "patch": "@@ -1460,8 +1460,9 @@ darwin_asm_named_section (const char *name,\n       obstack_grow (&lto_section_names_obstack, \"\\\\0\\\"\\n\", 4);\n \n       /* Output the dummy section name.  */\n-      fprintf (asm_out_file, \"\\t.section %s,__%08X,regular,debug\\t# %s\\n\",\n-\t       LTO_SEGMENT_NAME, lto_section_names_offset, name);\n+      fprintf (asm_out_file, \"\\t# %s\\n\", name);\n+      fprintf (asm_out_file, \"\\t.section %s,__%08X,regular,debug\\n\",\n+\t       LTO_SEGMENT_NAME, lto_section_names_offset);\n \n       /* Update the offset for the next section name.  Make sure we stay\n \t within reasonable length.  */  "}]}