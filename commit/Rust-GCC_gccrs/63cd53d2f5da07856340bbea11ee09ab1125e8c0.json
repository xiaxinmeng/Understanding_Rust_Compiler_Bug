{"sha": "63cd53d2f5da07856340bbea11ee09ab1125e8c0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjNjZDUzZDJmNWRhMDc4NTYzNDBiYmVhMTFlZTA5YWIxMTI1ZThjMA==", "commit": {"author": {"name": "Cl\u00e9ment Chigot", "email": "chigot.c@gmail.com", "date": "2020-05-26T09:31:37Z"}, "committer": {"name": "Ian Lance Taylor", "email": "iant@golang.org", "date": "2020-09-23T00:29:52Z"}, "message": "runtime, net: fix build errors on AIX\n\nReviewed-on: https://go-review.googlesource.com/c/gofrontend/+/235158", "tree": {"sha": "fe31f55256655defed5054c94da8dc5ef81e9aa2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe31f55256655defed5054c94da8dc5ef81e9aa2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/63cd53d2f5da07856340bbea11ee09ab1125e8c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63cd53d2f5da07856340bbea11ee09ab1125e8c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63cd53d2f5da07856340bbea11ee09ab1125e8c0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63cd53d2f5da07856340bbea11ee09ab1125e8c0/comments", "author": {"login": "Helflym", "id": 23002587, "node_id": "MDQ6VXNlcjIzMDAyNTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23002587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Helflym", "html_url": "https://github.com/Helflym", "followers_url": "https://api.github.com/users/Helflym/followers", "following_url": "https://api.github.com/users/Helflym/following{/other_user}", "gists_url": "https://api.github.com/users/Helflym/gists{/gist_id}", "starred_url": "https://api.github.com/users/Helflym/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Helflym/subscriptions", "organizations_url": "https://api.github.com/users/Helflym/orgs", "repos_url": "https://api.github.com/users/Helflym/repos", "events_url": "https://api.github.com/users/Helflym/events{/privacy}", "received_events_url": "https://api.github.com/users/Helflym/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ianlancetaylor", "id": 3194333, "node_id": "MDQ6VXNlcjMxOTQzMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/3194333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianlancetaylor", "html_url": "https://github.com/ianlancetaylor", "followers_url": "https://api.github.com/users/ianlancetaylor/followers", "following_url": "https://api.github.com/users/ianlancetaylor/following{/other_user}", "gists_url": "https://api.github.com/users/ianlancetaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianlancetaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianlancetaylor/subscriptions", "organizations_url": "https://api.github.com/users/ianlancetaylor/orgs", "repos_url": "https://api.github.com/users/ianlancetaylor/repos", "events_url": "https://api.github.com/users/ianlancetaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/ianlancetaylor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e41e66b78d4e0ba4f7e0b2423abf68d359a84fdd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e41e66b78d4e0ba4f7e0b2423abf68d359a84fdd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e41e66b78d4e0ba4f7e0b2423abf68d359a84fdd"}], "stats": {"total": 35, "additions": 24, "deletions": 11}, "files": [{"sha": "d17d39702c8ef5caf071b6338ca7fc52a545dbe2", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63cd53d2f5da07856340bbea11ee09ab1125e8c0/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63cd53d2f5da07856340bbea11ee09ab1125e8c0/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=63cd53d2f5da07856340bbea11ee09ab1125e8c0", "patch": "@@ -1,4 +1,4 @@\n-b24062f0b2e8f6173731d5654afe0addf857270e\n+5605a0727d3395becba1fbd4447807073984ec13\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "e7ff87383c3a7309516b003e13307cb2b466293c", "filename": "libgo/go/internal/cpu/cpu_no_init.go", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_no_init.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_no_init.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_no_init.go?ref=63cd53d2f5da07856340bbea11ee09ab1125e8c0", "patch": "@@ -6,6 +6,7 @@\n // +build !amd64\n // +build !arm\n // +build !arm64\n+// +build !ppc\n // +build !ppc64\n // +build !ppc64le\n // +build !s390x"}, {"sha": "56ff87524eea50b087e0207acab9d7082ba645ff", "filename": "libgo/go/internal/cpu/cpu_ppcx.go", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_ppcx.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_ppcx.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_ppcx.go?ref=63cd53d2f5da07856340bbea11ee09ab1125e8c0", "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style\n // license that can be found in the LICENSE file.\n \n-// +build ppc64 ppc64le\n+// +build ppc ppc64 ppc64le\n \n package cpu\n ", "previous_filename": "libgo/go/internal/cpu/cpu_ppc64x.go"}, {"sha": "bd5538699bb7eb55a0b4e68828c8de00096a62f1", "filename": "libgo/go/net/interface_aix.go", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fgo%2Fnet%2Finterface_aix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fgo%2Fnet%2Finterface_aix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fnet%2Finterface_aix.go?ref=63cd53d2f5da07856340bbea11ee09ab1125e8c0", "patch": "@@ -33,8 +33,6 @@ const _RTAX_NETMASK = 2\n const _RTAX_IFA = 5\n const _RTAX_MAX = 8\n \n-const _SIOCGIFMTU = -0x3fd796aa\n-\n func getIfList() ([]byte, error) {\n \tneeded, err := syscall.Getkerninfo(_KINFO_RT_IFLIST, 0, 0, 0)\n \tif err != nil {"}, {"sha": "951aeb6cffd7d59517dc2ac677c99c64d0ac8527", "filename": "libgo/go/runtime/os_aix.go", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fgo%2Fruntime%2Fos_aix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fgo%2Fruntime%2Fos_aix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fruntime%2Fos_aix.go?ref=63cd53d2f5da07856340bbea11ee09ab1125e8c0", "patch": "@@ -46,7 +46,7 @@ func clock_gettime(clock_id int64, timeout *timespec) int32\n \n //go:nosplit\n func semacreate(mp *m) {\n-\tif mp.mos.waitsema != 0 {\n+\tif mp.waitsema != 0 {\n \t\treturn\n \t}\n \n@@ -59,7 +59,7 @@ func semacreate(mp *m) {\n \tif sem_init(sem, 0, 0) != 0 {\n \t\tthrow(\"sem_init\")\n \t}\n-\tmp.mos.waitsema = uintptr(unsafe.Pointer(sem))\n+\tmp.waitsema = uintptr(unsafe.Pointer(sem))\n }\n \n //go:nosplit\n@@ -85,7 +85,7 @@ func semasleep(ns int64) int32 {\n \t\tts.tv_sec = timespec_sec_t(sec)\n \t\tts.tv_nsec = timespec_nsec_t(nsec)\n \n-\t\tif sem_timedwait((*semt)(unsafe.Pointer(_m_.mos.waitsema)), &ts) != 0 {\n+\t\tif sem_timedwait((*semt)(unsafe.Pointer(_m_.waitsema)), &ts) != 0 {\n \t\t\terr := errno()\n \t\t\tif err == _ETIMEDOUT || err == _EAGAIN || err == _EINTR {\n \t\t\t\treturn -1\n@@ -96,7 +96,7 @@ func semasleep(ns int64) int32 {\n \t\treturn 0\n \t}\n \tfor {\n-\t\tr1 := sem_wait((*semt)(unsafe.Pointer(_m_.mos.waitsema)))\n+\t\tr1 := sem_wait((*semt)(unsafe.Pointer(_m_.waitsema)))\n \t\tif r1 == 0 {\n \t\t\tbreak\n \t\t}\n@@ -110,7 +110,7 @@ func semasleep(ns int64) int32 {\n \n //go:nosplit\n func semawakeup(mp *m) {\n-\tif sem_post((*semt)(unsafe.Pointer(mp.mos.waitsema))) != 0 {\n+\tif sem_post((*semt)(unsafe.Pointer(mp.waitsema))) != 0 {\n \t\tthrow(\"sem_post\")\n \t}\n }\n@@ -128,7 +128,6 @@ const (\n \n const (\n \t// getsystemcfg constants\n-\t_SC_IMPL     = 2\n \t_IMPL_POWER8 = 0x10000\n \t_IMPL_POWER9 = 0x20000\n )"}, {"sha": "9671e394cb8cd8739a4db75e2b7e4fe92804b113", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=63cd53d2f5da07856340bbea11ee09ab1125e8c0", "patch": "@@ -1041,9 +1041,16 @@ grep '^const _IFF' gen-sysinfo.go | \\\n     sed -e 's/^\\(const \\)_\\(IFF[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n grep '^const _IFNAMSIZ' gen-sysinfo.go | \\\n     sed -e 's/^\\(const \\)_\\(IFNAMSIZ[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n-grep '^const _SIOC' gen-sysinfo.go |\n+grep '^const _SIOC' gen-sysinfo.go | \\\n+    grep -v '_val =' | \\\n     sed -e 's/^\\(const \\)_\\(SIOC[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n \n+if ! grep '^const SIOCGIFMTU' ${OUT} >/dev/null 2>&1; then\n+\tif grep '^const _SIOCGIFMTU_val' ${OUT} >/dev/null 2>&1; then\n+\t\techo 'const SIOCGIFMTU = _SIOCGIFMTU_val' >> ${OUT}\n+\tfi\n+fi\n+\n # The ifaddrmsg struct.\n grep '^type _ifaddrmsg ' gen-sysinfo.go | \\\n     sed -e 's/_ifaddrmsg/IfAddrmsg/' \\"}, {"sha": "6ea990f471ad332d192c5ecbd480745e35c0a40a", "filename": "libgo/sysinfo.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fsysinfo.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63cd53d2f5da07856340bbea11ee09ab1125e8c0/libgo%2Fsysinfo.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fsysinfo.c?ref=63cd53d2f5da07856340bbea11ee09ab1125e8c0", "patch": "@@ -281,6 +281,14 @@ enum {\n #endif\n };\n \n+// SIOCGIFMTU can't be added in the above enum as it might\n+// be signed in some OSes.\n+#ifdef SIOCGIFMTU\n+enum {\n+  SIOCGIFMTU_val = SIOCGIFMTU,\n+};\n+#endif\n+\n #if defined(HAVE_SYS_EPOLL_H)\n enum {\n   epoll_data_offset = offsetof(struct epoll_event, data)"}]}