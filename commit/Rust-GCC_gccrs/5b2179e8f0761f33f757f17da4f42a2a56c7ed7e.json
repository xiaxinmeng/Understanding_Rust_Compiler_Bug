{"sha": "5b2179e8f0761f33f757f17da4f42a2a56c7ed7e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWIyMTc5ZThmMDc2MWYzM2Y3NTdmMTdkYTRmNDJhMmE1NmM3ZWQ3ZQ==", "commit": {"author": {"name": "Gavin Romig-Koch", "email": "gavin@gcc.gnu.org", "date": "1999-02-03T12:42:12Z"}, "committer": {"name": "Gavin Romig-Koch", "email": "gavin@gcc.gnu.org", "date": "1999-02-03T12:42:12Z"}, "message": "undo last revision; I commited more stuff than I intended.\n\nFrom-SVN: r25005", "tree": {"sha": "d9d4fd84a5486afba4d7a0159bcced99b262dc20", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d9d4fd84a5486afba4d7a0159bcced99b262dc20"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b2179e8f0761f33f757f17da4f42a2a56c7ed7e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b2179e8f0761f33f757f17da4f42a2a56c7ed7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b2179e8f0761f33f757f17da4f42a2a56c7ed7e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b2179e8f0761f33f757f17da4f42a2a56c7ed7e/comments", "author": null, "committer": null, "parents": [{"sha": "de52e202c29386858f2c678e6d8ac3c8a3ac0718", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de52e202c29386858f2c678e6d8ac3c8a3ac0718", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de52e202c29386858f2c678e6d8ac3c8a3ac0718"}], "stats": {"total": 37, "additions": 18, "deletions": 19}, "files": [{"sha": "1e64a05951428730b3979748acb975294d94d1f5", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 18, "deletions": 19, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b2179e8f0761f33f757f17da4f42a2a56c7ed7e/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b2179e8f0761f33f757f17da4f42a2a56c7ed7e/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=5b2179e8f0761f33f757f17da4f42a2a56c7ed7e", "patch": "@@ -2248,7 +2248,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (SImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   if (TARGET_CHECK_RANGE_DIV)\n@@ -2298,7 +2298,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (DImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   if (TARGET_CHECK_RANGE_DIV)\n@@ -2348,7 +2348,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (SImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   \n@@ -2389,7 +2389,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (DImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   \n@@ -2414,7 +2414,7 @@\n \n (define_expand \"div_trap\"\n   [(trap_if (eq (match_operand 0 \"register_operand\" \"d\")\n-\t\t(match_operand 1 \"true_reg_or_0_operand\" \"dJ\"))\n+\t\t(match_operand 1 \"reg_or_0_operand\" \"dJ\"))\n             (match_operand 2 \"immediate_operand\" \"\"))]\n   \"\"\n   \"\n@@ -2428,7 +2428,7 @@\n \n (define_insn \"div_trap_normal\"\n   [(trap_if (eq (match_operand 0 \"register_operand\" \"d\")\n-\t\t(match_operand 1 \"true_reg_or_0_operand\" \"dJ\"))\n+\t\t(match_operand 1 \"reg_or_0_operand\" \"dJ\"))\n             (match_operand 2 \"immediate_operand\" \"\"))]\n   \"!TARGET_MIPS16\"\n   \"*\n@@ -2471,7 +2471,7 @@\n \n (define_insn \"div_trap_mips16\"\n   [(trap_if (eq (match_operand 0 \"register_operand\" \"d\")\n-\t\t(match_operand 1 \"true_reg_or_0_operand\" \"dJ\"))\n+\t\t(match_operand 1 \"reg_or_0_operand\" \"dJ\"))\n             (match_operand 2 \"immediate_operand\" \"\"))\n    (clobber (reg:SI 24))]\n   \"TARGET_MIPS16\"\n@@ -2490,16 +2490,15 @@\n       have_dep_anti = 1;\n   if (! have_dep_anti)\n     {\n-      /* No branch delay slots on mips16. */ \n       if (GET_CODE (operands[1]) == CONST_INT)\n-        return \\\"%(bnez\\\\t%0,1f\\\\n\\\\tbreak\\\\t%2\\\\n1:%)\\\";\n+        return \\\"%(bnez\\\\t%0,1f\\\\n\\\\tnop\\\\n\\\\tbreak\\\\t%2\\\\n1:%)\\\";\n       else\n-        return \\\"%(bne\\\\t%0,%1,1f\\\\n\\\\tbreak\\\\t%2\\\\n1:%)\\\";\n+        return \\\"%(bne\\\\t%0,%1,1f\\\\n\\\\tnop\\\\n\\\\tbreak\\\\t%2\\\\n1:%)\\\";\n     }\n   return \\\"\\\";\n }\"\n   [(set_attr \"type\" \"unknown\")\n-   (set_attr \"length\" \"3\")])\n+   (set_attr \"length\" \"4\")])\n \n (define_expand \"divsi3\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=l\")\n@@ -2516,7 +2515,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (SImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   if (TARGET_CHECK_RANGE_DIV)\n@@ -2559,7 +2558,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (DImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   if (TARGET_CHECK_RANGE_DIV)\n@@ -2602,7 +2601,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (SImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   if (TARGET_CHECK_RANGE_DIV)\n@@ -2645,7 +2644,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (DImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   if (TARGET_CHECK_RANGE_DIV)\n@@ -2688,7 +2687,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (SImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   \n@@ -2722,7 +2721,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (DImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   \n@@ -2756,7 +2755,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (SImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   \n@@ -2790,7 +2789,7 @@\n   if (!TARGET_NO_CHECK_ZERO_DIV)\n     {\n       emit_insn (gen_div_trap (operands[2],\n-\t\t\t       GEN_INT (0),\n+\t\t\t       copy_to_mode_reg (DImode, GEN_INT (0)),\n \t\t\t       GEN_INT (0x7)));\n     }\n   "}]}