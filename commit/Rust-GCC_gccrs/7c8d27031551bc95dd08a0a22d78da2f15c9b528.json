{"sha": "7c8d27031551bc95dd08a0a22d78da2f15c9b528", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2M4ZDI3MDMxNTUxYmM5NWRkMDhhMGEyMmQ3OGRhMmYxNWM5YjUyOA==", "commit": {"author": {"name": "Daniel Franke", "email": "dfranke@gcc.gnu.org", "date": "2008-01-24T21:28:20Z"}, "committer": {"name": "Daniel Franke", "email": "dfranke@gcc.gnu.org", "date": "2008-01-24T21:28:20Z"}, "message": "re PR fortran/34202 (ICE (segfault) for invalid code in formalize_init_expr (data.c:691))\n\ngcc/fortran:\n2008-01-24  Daniel Franke  <franke.daniel@gmail.com>\n\n        PR fortran/34202\n\t* data.c (formalize_structure_cons): Skip formalization on\n\tempty structures.\n\ngcc/testsuite:\n2008-01-24  Daniel Franke  <franke.daniel@gmail.com>\n\n        PR fortran/34202\n        * gfortran.dg/empty_type.f90: New test.\n\nFrom-SVN: r131810", "tree": {"sha": "91dc2fff88d64eaf4657f688aaf3b0508c559322", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/91dc2fff88d64eaf4657f688aaf3b0508c559322"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c8d27031551bc95dd08a0a22d78da2f15c9b528", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c8d27031551bc95dd08a0a22d78da2f15c9b528", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c8d27031551bc95dd08a0a22d78da2f15c9b528", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c8d27031551bc95dd08a0a22d78da2f15c9b528/comments", "author": null, "committer": null, "parents": [{"sha": "ae7a8ebc899c56617cd370ec3910d3e7702ba37e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae7a8ebc899c56617cd370ec3910d3e7702ba37e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae7a8ebc899c56617cd370ec3910d3e7702ba37e"}], "stats": {"total": 36, "additions": 33, "deletions": 3}, "files": [{"sha": "c9cdfde362e313d7cf33ca8f7782a6634a7aab79", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c8d27031551bc95dd08a0a22d78da2f15c9b528/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c8d27031551bc95dd08a0a22d78da2f15c9b528/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=7c8d27031551bc95dd08a0a22d78da2f15c9b528", "patch": "@@ -1,3 +1,9 @@\n+2008-01-24  Daniel Franke  <franke.daniel@gmail.com>\n+\n+\tPR fortran/34202\n+\t* data.c (formalize_structure_cons): Skip formalization on\n+\tempty structures.\n+\n 2008-01-24  Daniel Franke  <franke.daniel@gmail.com>\n \n \t* gfortran.texi (OpenMP): Extended existing documentation."}, {"sha": "41dc85f8fa06d9d25424a26e39a6246a0252f12b", "filename": "gcc/fortran/data.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c8d27031551bc95dd08a0a22d78da2f15c9b528/gcc%2Ffortran%2Fdata.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c8d27031551bc95dd08a0a22d78da2f15c9b528/gcc%2Ffortran%2Fdata.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdata.c?ref=7c8d27031551bc95dd08a0a22d78da2f15c9b528", "patch": "@@ -688,7 +688,7 @@ formalize_structure_cons (gfc_expr *expr)\n   c = expr->value.constructor;\n \n   /* Constructor is already formalized.  */\n-  if (c->n.component == NULL)\n+  if (!c || c->n.component == NULL)\n     return;\n \n   head = tail = NULL;"}, {"sha": "8af0ba245b44feb921305aa6528d9338cf5e1eff", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c8d27031551bc95dd08a0a22d78da2f15c9b528/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c8d27031551bc95dd08a0a22d78da2f15c9b528/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7c8d27031551bc95dd08a0a22d78da2f15c9b528", "patch": "@@ -1,7 +1,12 @@\n+2008-01-24  Daniel Franke  <franke.daniel@gmail.com>\n+\n+\tPR fortran/34202\n+\t* gfortran.dg/empty_type.f90: New test.\n+\n 2008-01-24  Paolo Carlini  <pcarlini@suse.de>\n \n-        PR c++/34603\n-        * g++.dg/template/crash77.C: New.\n+\tPR c++/34603\n+\t* g++.dg/template/crash77.C: New.\n \n 2008-01-24  Uros Bizjak  <ubizjak@gmail.com>\n "}, {"sha": "cea25660dce083fadd1e4fb20296f43c95d2800e", "filename": "gcc/testsuite/gfortran.dg/empty_type.f90", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c8d27031551bc95dd08a0a22d78da2f15c9b528/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_type.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c8d27031551bc95dd08a0a22d78da2f15c9b528/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_type.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fempty_type.f90?ref=7c8d27031551bc95dd08a0a22d78da2f15c9b528", "patch": "@@ -0,0 +1,19 @@\n+! { dg-do compile }\n+! PR fortran/34202\n+! ICE on contruction of empty types\n+! Testcase contributed by Tobias Burnus\n+\n+program bug4a\n+  implicit none\n+  type bug4\n+    ! Intentionally left empty\n+  end type bug4\n+\n+  type compound\n+    type(bug4) b\n+  end type compound\n+\n+  type(bug4), parameter :: f = bug4()\n+  type(compound), parameter :: g = compound(bug4())\n+end program bug4a\n+"}]}