{"sha": "e95873dd5bbab240f64c4ab8138646ead2e3bdfc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTk1ODczZGQ1YmJhYjI0MGY2NGM0YWI4MTM4NjQ2ZWFkMmUzYmRmYw==", "commit": {"author": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2011-06-01T22:36:08Z"}, "committer": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2011-06-01T22:36:08Z"}, "message": "sh.c (expand_cbranchdi4): Use a scratch register if needed when original operands are used for msw_skip...\n\n\t* config/sh/sh.c (expand_cbranchdi4): Use a scratch register if\n\tneeded when original operands are used for msw_skip comparison.\n\t* gcc.c-torture/compile/pr49238.c: New.\n\nFrom-SVN: r174550", "tree": {"sha": "232ef5af44e2c3235f2cd52f53a50a63518761fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/232ef5af44e2c3235f2cd52f53a50a63518761fa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e95873dd5bbab240f64c4ab8138646ead2e3bdfc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e95873dd5bbab240f64c4ab8138646ead2e3bdfc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e95873dd5bbab240f64c4ab8138646ead2e3bdfc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e95873dd5bbab240f64c4ab8138646ead2e3bdfc/comments", "author": null, "committer": null, "parents": [{"sha": "a82fcbe8255c5a3716710f27f08dc76ac16aeeca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a82fcbe8255c5a3716710f27f08dc76ac16aeeca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a82fcbe8255c5a3716710f27f08dc76ac16aeeca"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "9b9fc4179dbb020781794b062c912a10985cb23c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e95873dd5bbab240f64c4ab8138646ead2e3bdfc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e95873dd5bbab240f64c4ab8138646ead2e3bdfc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e95873dd5bbab240f64c4ab8138646ead2e3bdfc", "patch": "@@ -1,3 +1,9 @@\n+2011-06-01  Kaz Kojima  <kkojima@gcc.gnu.org>\n+\n+\tPR target/49238\n+\t* config/sh/sh.c (expand_cbranchdi4): Use a scratch register if\n+\tneeded when original operands are used for msw_skip comparison.\n+\n 2011-06-01  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR debug/49250"}, {"sha": "c5fbd569602c323810536a0428a37437543436cd", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e95873dd5bbab240f64c4ab8138646ead2e3bdfc/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e95873dd5bbab240f64c4ab8138646ead2e3bdfc/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=e95873dd5bbab240f64c4ab8138646ead2e3bdfc", "patch": "@@ -2199,6 +2199,13 @@ expand_cbranchdi4 (rtx *operands, enum rtx_code comparison)\n \t{\n \t  operands[1] = op1h;\n \t  operands[2] = op2h;\n+\t  if (reload_completed\n+\t      && ! arith_reg_or_0_operand (op2h, SImode)\n+\t      && (true_regnum (op1h) || (comparison != EQ && comparison != NE)))\n+\t    {\n+\t      emit_move_insn (scratch, operands[2]);\n+\t      operands[2] = scratch;\n+\t    }\n \t}\n \n       operands[3] = skip_label = gen_label_rtx ();"}, {"sha": "a611a29f406ac620a3f8be07d6bcca034910f9e8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e95873dd5bbab240f64c4ab8138646ead2e3bdfc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e95873dd5bbab240f64c4ab8138646ead2e3bdfc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e95873dd5bbab240f64c4ab8138646ead2e3bdfc", "patch": "@@ -1,3 +1,8 @@\n+2011-06-01  Kaz Kojima  <kkojima@gcc.gnu.org>\n+\n+\tPR target/49238\n+\t* gcc.c-torture/compile/pr49238.c: New.\n+\n 2011-06-01  Sofiane Naci  <sofiane.naci@arm.com>\n \n \t* gcc.target/arm/g2.c: Skip test in -mthumb."}, {"sha": "fd8443a8f086bf788abb9459a38de4684fecf166", "filename": "gcc/testsuite/gcc.c-torture/compile/pr49238.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e95873dd5bbab240f64c4ab8138646ead2e3bdfc/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr49238.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e95873dd5bbab240f64c4ab8138646ead2e3bdfc/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr49238.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr49238.c?ref=e95873dd5bbab240f64c4ab8138646ead2e3bdfc", "patch": "@@ -0,0 +1,18 @@\n+/* PR target/49238 */\n+extern int bar (void);\n+\n+void\n+foo (unsigned long long a, int b)\n+{\n+  int i;\n+\n+  if (b)\n+    for (a = -12; a >= 10; a = bar ())\n+      break;\n+  else\n+    return;\n+\n+  for (i = 0; i < 10; i += 10)\n+    if ((i == bar ()) | (bar () >= a))\n+      bar ();\n+}"}]}