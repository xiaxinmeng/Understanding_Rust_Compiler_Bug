{"sha": "75251fe0c9486bc4c3211684b3c7888ca61951a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzUyNTFmZTBjOTQ4NmJjNGMzMjExNjg0YjNjNzg4OGNhNjE5NTFhMQ==", "commit": {"author": {"name": "David J. MacKenzie", "email": "djm@gnu.org", "date": "1992-03-07T20:39:54Z"}, "committer": {"name": "David J. MacKenzie", "email": "djm@gnu.org", "date": "1992-03-07T20:39:54Z"}, "message": "*** empty log message ***\n\nFrom-SVN: r415", "tree": {"sha": "80a5b635834e1d802c50d68f3240286bbeaa30ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/80a5b635834e1d802c50d68f3240286bbeaa30ce"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75251fe0c9486bc4c3211684b3c7888ca61951a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75251fe0c9486bc4c3211684b3c7888ca61951a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75251fe0c9486bc4c3211684b3c7888ca61951a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75251fe0c9486bc4c3211684b3c7888ca61951a1/comments", "author": null, "committer": null, "parents": [{"sha": "ca2d2f1ed0dd3a81f8dcbc814517bef3872fb4ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca2d2f1ed0dd3a81f8dcbc814517bef3872fb4ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca2d2f1ed0dd3a81f8dcbc814517bef3872fb4ee"}], "stats": {"total": 68, "additions": 64, "deletions": 4}, "files": [{"sha": "c3b749c7ef7e90c59849b231301bf37e0a6d8f04", "filename": "gcc/fixincludes", "status": "modified", "additions": 64, "deletions": 4, "changes": 68, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75251fe0c9486bc4c3211684b3c7888ca61951a1/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75251fe0c9486bc4c3211684b3c7888ca61951a1/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=75251fe0c9486bc4c3211684b3c7888ca61951a1", "patch": "@@ -112,18 +112,21 @@ while [ $# != 0 ]; do\n # is much faster than actually trying to fix it.\n # But the argument to egrep must be kept small, or many versions of egrep\n # won't be able to handle it.\n+# rms: I removed `|#[el].*if.*[^/ \t]' because it made egrep fail.\n     if egrep '[ \t_]_IO|CTRL|#define.NULL|#[el]*if.*([0-9]|#e[nl]|sparc|vax|sun|pyr)' $file > /dev/null; then\n       echo Fixing $file\n       if [ -r $file ]; then\n \tcp $file $2/$file >/dev/null 2>&1\t\\\n \t|| echo \"Can't copy $file\"\n \tchmod +w $2/$file\n+# Following two lines removed.\n+#\t  s%^\\([ \t]*#[ \t]*endif[ \t]*\\)\\([^/ \t].*\\)$%\\1/* \\2 */%\n+#\t  s%^\\([ \t]*#[ \t]*else[ \t]*\\)\\([^/ \t].*\\)$%\\1/* \\2 */%\n+\n \tsed -e '\n \t\t\t\t   :loop\n \t  /\\\\$/\t\t\tN\n \t  /\\\\$/\t\t\tb loop\n-\t  s%\\(#[ \t]*endif[ \t]*\\)\\([^/ \t].*\\)$%\\1/* \\2 */%\n-\t  s%\\(#[ \t]*else[ \t]*\\)\\([^/ \t].*\\)$%\\1/* \\2 */%\n \t  /[ \t]_IO[A-Z]*[ \t]*(/\ts/(\\(.\\),/('\\''\\1'\\'',/\n \t  /[ \t]BSD43__IO[A-Z]*[ \t]*(/\ts/(\\(.\\),/('\\''\\1'\\'',/\n \t  /#define._IO/\t\ts/'\\''x'\\''/x/g\n@@ -313,6 +316,24 @@ EOF\n   fi\n fi\n \n+# Remove nested comments created by #endifs in a comment (Ultrix 4.1)\n+# Only needed if commenting out junk after #endif.\n+#file=signal.h\n+#if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+#  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+#  chmod +w ${LIB}/$file 2>/dev/null\n+#fi\n+#\n+#if [ -r ${LIB}/$file ]; then\n+#  echo Fixing $file, nested comments\n+#  sed -e 's/#endif.*/#endif/' ${LIB}/$file > ${LIB}/${file}.sed\n+#  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+#  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+#    echo Deleting ${LIB}/$file\\; no fixes were needed.\n+#    rm -f ${LIB}/$file\n+#  fi\n+#fi\n+\n # Check for superfluous `static' (in Ultrix 4.2)\n file=machine/cpu.h\n if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n@@ -340,7 +361,7 @@ EOF\n   fi\n fi\n \n-# Deal with yet another challenge, this in X11/Xmu.h\n+# Incorrect sprintf declaration in X11/Xmu.h\n file=X11/Xmu.h\n if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n   mkdir ${LIB}/X11 2>/dev/null\n@@ -382,7 +403,7 @@ if [ -r ${LIB}/$file ]; then\n   fi\n fi\n \n-# Fix the CAT macro in memvar.h.\n+# Fix the CAT macro in SunOS memvar.h.\n file=pixrect/memvar.h\n if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n   mkdir ${LIB}/pixrect 2>/dev/null\n@@ -516,6 +537,45 @@ if [ -r ${LIB}/$file ]; then\n   fi\n fi\n \n+# Incorrect #include in Sony News-OS 3.2.\n+file=machine/machparam.h\n+if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+  mkdir ${LIB}/machine 2>/dev/null\n+  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+  chmod +w ${LIB}/$file 2>/dev/null\n+fi\n+\n+if [ -r ${LIB}/$file ]; then\n+  echo Fixing $file, incorrect \\#include\n+  sed -e 's@\"../machine/endian.h\"@<machine/endian.h>@' \\\n+    ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+    echo Deleting ${LIB}/$file\\; no fixes were needed.\n+    rm -f ${LIB}/$file\n+  fi\n+fi\n+\n+# Multiline comment after typedef on IRIX 4.0.1.\n+file=sys/types.h\n+if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+  mkdir ${LIB}/sys 2>/dev/null\n+  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+  chmod +w ${LIB}/$file 2>/dev/null\n+fi\n+\n+if [ -r ${LIB}/$file ]; then\n+  echo Fixing $file, comment in the middle of \\#ifdef\n+  sed -e 's@type of the result@type of the result */@' \\\n+    -e 's@of the sizeof@/* of the sizeof@' \\\n+    ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+    echo Deleting ${LIB}/$file\\; no fixes were needed.\n+    rm -f ${LIB}/$file\n+  fi\n+fi\n+\n echo 'Removing unneeded directories:'\n cd $LIB\n files=`find . -type d -print | sort -r`"}]}