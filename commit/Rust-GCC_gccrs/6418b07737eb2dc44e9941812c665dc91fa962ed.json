{"sha": "6418b07737eb2dc44e9941812c665dc91fa962ed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjQxOGIwNzczN2ViMmRjNDRlOTk0MTgxMmM2NjVkYzkxZmE5NjJlZA==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2016-12-19T20:23:08Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2016-12-19T20:23:08Z"}, "message": "i386.md (*popcounthi2_1): New insn_and_split pattern.\n\n\t* config/i386/i386.md (*popcounthi2_1): New insn_and_split pattern.\n\ntestsuite/ChangeLog:\n\n\t* gcc.target/i386/pr59874-3.c: New test.\n\nFrom-SVN: r243811", "tree": {"sha": "5f095451827efcf4f167e9d971707070889f08ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5f095451827efcf4f167e9d971707070889f08ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6418b07737eb2dc44e9941812c665dc91fa962ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6418b07737eb2dc44e9941812c665dc91fa962ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6418b07737eb2dc44e9941812c665dc91fa962ed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6418b07737eb2dc44e9941812c665dc91fa962ed/comments", "author": null, "committer": null, "parents": [{"sha": "f56013e5416cfddd5078e49df50f2a2db187392a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f56013e5416cfddd5078e49df50f2a2db187392a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f56013e5416cfddd5078e49df50f2a2db187392a"}], "stats": {"total": 64, "additions": 49, "deletions": 15}, "files": [{"sha": "49484d79407e02762c3f4635800482d35d081435", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6418b07737eb2dc44e9941812c665dc91fa962ed/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6418b07737eb2dc44e9941812c665dc91fa962ed/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6418b07737eb2dc44e9941812c665dc91fa962ed", "patch": "@@ -1,6 +1,10 @@\n+2016-12-19  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* config/i386/i386.md (*popcounthi2_1): New insn_and_split pattern.\n+\n 2016-12-19  Sandra Loosemore  <sandra@codesourcery.com>\n \n-\t* doc/cpp.texi: Clean up anachronistic C99 references and remove \n+\t* doc/cpp.texi: Clean up anachronistic C99 references and remove\n \tdiscussion of very old GCC versions.\n \t(Differences from previous versions): Delete entire section.\n \n@@ -183,8 +187,7 @@\n \t* config/arc/arc.md (mulsidi_600): Change to insn_and_split,\n \tgenerate new mul64 insn for core multiplication work.\n \t(umulsidi_600): Likewise, but use mulu64 insn.\n-\t(mul64): New pattern, content taken from old mulsidi_600 insn\n-\tpattern.\n+\t(mul64): New pattern, content taken from old mulsidi_600 insn pattern.\n \t(mulu64): Likewise, but using umulsidi_600.\n \t(mulsidi3): Remove move to destination, this is now handled by\n \tmulsidi_600 insn_and_split."}, {"sha": "a88c0b8c81afb9f94b25e2827411c43b337c2f5e", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6418b07737eb2dc44e9941812c665dc91fa962ed/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6418b07737eb2dc44e9941812c665dc91fa962ed/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=6418b07737eb2dc44e9941812c665dc91fa962ed", "patch": "@@ -13221,6 +13221,24 @@\n    (set_attr \"type\" \"bitmanip\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n+(define_insn_and_split \"*popcounthi2_1\"\n+  [(set (match_operand:SI 0 \"register_operand\")\n+\t(popcount:SI\n+\t  (zero_extend:SI (match_operand:HI 1 \"nonimmediate_operand\"))))\n+   (clobber (reg:CC FLAGS_REG))]\n+  \"TARGET_POPCNT\n+   && can_create_pseudo_p ()\"\n+  \"#\"\n+  \"&& 1\"\n+  [(const_int 0)]\n+{\n+  rtx tmp = gen_reg_rtx (HImode);\n+\n+  emit_insn (gen_popcounthi2 (tmp, operands[1]));\n+  emit_insn (gen_zero_extendhisi2 (operands[0], tmp));\n+  DONE;\n+})\n+\n (define_insn \"popcounthi2\"\n   [(set (match_operand:HI 0 \"register_operand\" \"=r\")\n \t(popcount:HI"}, {"sha": "cd0d954976afaeacc93e836107f68b7317f31901", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 15, "deletions": 12, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6418b07737eb2dc44e9941812c665dc91fa962ed/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6418b07737eb2dc44e9941812c665dc91fa962ed/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6418b07737eb2dc44e9941812c665dc91fa962ed", "patch": "@@ -1,18 +1,21 @@\n+2016-12-19  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* gcc.target/i386/pr59874-3.c: New test.\n+\n 2016-12-19  Will Schmidt  <will_schmidt@vnet.ibm.com>\n \n-\t*  gcc.dg/vmx/mult-even-odd-be-order.c: Mark\n-\tvariables as volatile.\n-\t*  gcc.target/powerpc/fold-vec-mult-char.c: New.\n-\t*  gcc.target/powerpc/fold-vec-mult-float.c: New.\n-\t*  gcc.target/powerpc/fold-vec-mult-floatdouble.c: New.\n-\t*  gcc.target/powerpc/fold-vec-mult-int.c: New.\n-\t*  gcc.target/powerpc/fold-vec-mult-int128-p8.c: New.\n-\t*  gcc.target/powerpc/fold-vec-mult-int128-p9.c: New.\n-\t*  gcc.target/powerpc/fold-vec-mult-longlong.c: New.\n-\t*  gcc.target/powerpc/fold-vec-mult-short.c: New.\n+\t* gcc.dg/vmx/mult-even-odd-be-order.c: Mark variables as volatile.\n+\t* gcc.target/powerpc/fold-vec-mult-char.c: New.\n+\t* gcc.target/powerpc/fold-vec-mult-float.c: New.\n+\t* gcc.target/powerpc/fold-vec-mult-floatdouble.c: New.\n+\t* gcc.target/powerpc/fold-vec-mult-int.c: New.\n+\t* gcc.target/powerpc/fold-vec-mult-int128-p8.c: New.\n+\t* gcc.target/powerpc/fold-vec-mult-int128-p9.c: New.\n+\t* gcc.target/powerpc/fold-vec-mult-longlong.c: New.\n+\t* gcc.target/powerpc/fold-vec-mult-short.c: New.\n \n 2016-12-19  Will Schmidt  <will_schmidt@vnet.ibm.com>\n- \n+\n \t* gcc.target/powerpc/fold-vec-sub-char.c: New.\n \t* gcc.target/powerpc/fold-vec-sub-float.c: New.\n \t* gcc.target/powerpc/fold-vec-sub-floatdouble.c: New.\n@@ -39,7 +42,7 @@\n 2016-12-17  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/78746\n-\t* charlen_03.f90: Remove test. \n+\t* charlen_03.f90: Remove test.\n \t* charlen_10.f90: Ditto.\n \n 2016-12-17  Jakub Jelinek  <jakub@redhat.com>"}, {"sha": "ec55a12e2a0db526b1d76c103b4e8230b9952d22", "filename": "gcc/testsuite/gcc.target/i386/pr59874-3.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6418b07737eb2dc44e9941812c665dc91fa962ed/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr59874-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6418b07737eb2dc44e9941812c665dc91fa962ed/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr59874-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr59874-3.c?ref=6418b07737eb2dc44e9941812c665dc91fa962ed", "patch": "@@ -0,0 +1,10 @@\n+/* PR target/59874 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -mpopcnt -masm=att\" } */\n+/* { dg-final { scan-assembler \"popcntw\" } } */\n+\n+unsigned int\n+foo (unsigned short x)\n+{\n+  return __builtin_popcount (x);\n+}"}]}