{"sha": "1f872df76202fbf8ffef70c688246847b80cbedb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWY4NzJkZjc2MjAyZmJmOGZmZWY3MGM2ODgyNDY4NDdiODBjYmVkYg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2014-01-07T09:40:28Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2014-01-07T09:40:28Z"}, "message": "semantics.c (trait_expr_value, [...]): Implement the letter of 20.11.6 about Base and Derived naming the same class...\n\n/cp\n2014-01-07  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* semantics.c (trait_expr_value, [CPTK_IS_BASE_OF]): Implement\n\tthe letter of 20.11.6 about Base and Derived naming the same\n\tclass type modulo cv-qualifiers.\n\n/testsuite\n2014-01-07  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* g++.dg/ext/is_base_of_incomplete-2.C: New.\n\nFrom-SVN: r206386", "tree": {"sha": "73fefc4bdfec92bfe670fbd49f73b7271f440fde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/73fefc4bdfec92bfe670fbd49f73b7271f440fde"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f872df76202fbf8ffef70c688246847b80cbedb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f872df76202fbf8ffef70c688246847b80cbedb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f872df76202fbf8ffef70c688246847b80cbedb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f872df76202fbf8ffef70c688246847b80cbedb/comments", "author": null, "committer": null, "parents": [{"sha": "a0cbe71e87398b958cc88f5e3a7529cb9e1fd137", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0cbe71e87398b958cc88f5e3a7529cb9e1fd137", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a0cbe71e87398b958cc88f5e3a7529cb9e1fd137"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "b31014fcc752ab2e55f8105fb69cc3584bd36f40", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f872df76202fbf8ffef70c688246847b80cbedb/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f872df76202fbf8ffef70c688246847b80cbedb/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1f872df76202fbf8ffef70c688246847b80cbedb", "patch": "@@ -1,3 +1,9 @@\n+2014-01-07  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* semantics.c (trait_expr_value, [CPTK_IS_BASE_OF]): Implement\n+\tthe letter of 20.11.6 about Base and Derived naming the same\n+\tclass type modulo cv-qualifiers.\n+\n 2014-01-06  Adam Butcher  <adam@jessamine.co.uk>\n \n \tPR c++/59635"}, {"sha": "9f878874e6d71e44434a34f2839f9585b8d82bd3", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f872df76202fbf8ffef70c688246847b80cbedb/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f872df76202fbf8ffef70c688246847b80cbedb/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=1f872df76202fbf8ffef70c688246847b80cbedb", "patch": "@@ -7106,7 +7106,8 @@ trait_expr_value (cp_trait_kind kind, tree type1, tree type2)\n \n     case CPTK_IS_BASE_OF:\n       return (NON_UNION_CLASS_TYPE_P (type1) && NON_UNION_CLASS_TYPE_P (type2)\n-\t      && DERIVED_FROM_P (type1, type2));\n+\t      && (same_type_ignoring_top_level_qualifiers_p (type1, type2)\n+\t\t  || DERIVED_FROM_P (type1, type2)));\n \n     case CPTK_IS_CLASS:\n       return (NON_UNION_CLASS_TYPE_P (type1));"}, {"sha": "a8910bbe26cade4a4a26f8a4701ea6613026f1f9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f872df76202fbf8ffef70c688246847b80cbedb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f872df76202fbf8ffef70c688246847b80cbedb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1f872df76202fbf8ffef70c688246847b80cbedb", "patch": "@@ -1,3 +1,7 @@\n+2014-01-07  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* g++.dg/ext/is_base_of_incomplete-2.C: New.\n+\n 2014-01-07  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/58668"}, {"sha": "54862585d0995ba771c91d494ad0bcc8b40c42b0", "filename": "gcc/testsuite/g++.dg/ext/is_base_of_incomplete-2.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f872df76202fbf8ffef70c688246847b80cbedb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fis_base_of_incomplete-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f872df76202fbf8ffef70c688246847b80cbedb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fis_base_of_incomplete-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fis_base_of_incomplete-2.C?ref=1f872df76202fbf8ffef70c688246847b80cbedb", "patch": "@@ -0,0 +1,5 @@\n+struct T;\n+\n+int check1[__is_base_of(T, T) ? 1 : -1];\n+int check2[__is_base_of(T, const T) ? 1 : -1];\n+int check3[__is_base_of(volatile T, T) ? 1 : -1];"}]}