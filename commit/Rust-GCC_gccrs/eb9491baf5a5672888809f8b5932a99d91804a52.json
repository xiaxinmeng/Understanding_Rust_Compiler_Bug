{"sha": "eb9491baf5a5672888809f8b5932a99d91804a52", "node_id": "C_kwDOANBUbNoAKGViOTQ5MWJhZjVhNTY3Mjg4ODgwOWY4YjU5MzJhOTlkOTE4MDRhNTI", "commit": {"author": {"name": "Max Filippov", "email": "jcmvbkbc@gmail.com", "date": "2017-05-18T22:11:10Z"}, "committer": {"name": "Max Filippov", "email": "jcmvbkbc@gmail.com", "date": "2022-12-07T18:01:11Z"}, "message": "libgcc: xtensa: use built-in configuration\n\nNow that gcc provides __XCHAL_* definitions use them instead of XCHAL_*\ndefinitions from the include/xtensa-config.h. That makes libgcc\ndynamically configurable for the target xtensa core.\n\nlibgcc/\n\t* config/xtensa/crti.S (xtensa-config.h): Replace #inlcude with\n\txtensa-config-builtin.h.\n\t* config/xtensa/crtn.S: Likewise.\n\t* config/xtensa/lib1funcs.S: Likewise.\n\t* config/xtensa/lib2funcs.S: Likewise.\n\t* config/xtensa/xtensa-config-builtin.h: New File.", "tree": {"sha": "a5a1db00287a5b97f2433fb24a5d0dcd28456f98", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5a1db00287a5b97f2433fb24a5d0dcd28456f98"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eb9491baf5a5672888809f8b5932a99d91804a52", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb9491baf5a5672888809f8b5932a99d91804a52", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb9491baf5a5672888809f8b5932a99d91804a52", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb9491baf5a5672888809f8b5932a99d91804a52/comments", "author": {"login": "jcmvbkbc", "id": 166731, "node_id": "MDQ6VXNlcjE2NjczMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/166731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcmvbkbc", "html_url": "https://github.com/jcmvbkbc", "followers_url": "https://api.github.com/users/jcmvbkbc/followers", "following_url": "https://api.github.com/users/jcmvbkbc/following{/other_user}", "gists_url": "https://api.github.com/users/jcmvbkbc/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcmvbkbc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcmvbkbc/subscriptions", "organizations_url": "https://api.github.com/users/jcmvbkbc/orgs", "repos_url": "https://api.github.com/users/jcmvbkbc/repos", "events_url": "https://api.github.com/users/jcmvbkbc/events{/privacy}", "received_events_url": "https://api.github.com/users/jcmvbkbc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jcmvbkbc", "id": 166731, "node_id": "MDQ6VXNlcjE2NjczMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/166731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcmvbkbc", "html_url": "https://github.com/jcmvbkbc", "followers_url": "https://api.github.com/users/jcmvbkbc/followers", "following_url": "https://api.github.com/users/jcmvbkbc/following{/other_user}", "gists_url": "https://api.github.com/users/jcmvbkbc/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcmvbkbc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcmvbkbc/subscriptions", "organizations_url": "https://api.github.com/users/jcmvbkbc/orgs", "repos_url": "https://api.github.com/users/jcmvbkbc/repos", "events_url": "https://api.github.com/users/jcmvbkbc/events{/privacy}", "received_events_url": "https://api.github.com/users/jcmvbkbc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ecb575d09c0ff5314088214c2bb39f1959ad3318", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecb575d09c0ff5314088214c2bb39f1959ad3318", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ecb575d09c0ff5314088214c2bb39f1959ad3318"}], "stats": {"total": 206, "additions": 202, "deletions": 4}, "files": [{"sha": "2452a88a0351c6c83fe873a34e9f3bff6a87f839", "filename": "libgcc/config/xtensa/crti.S", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9491baf5a5672888809f8b5932a99d91804a52/libgcc%2Fconfig%2Fxtensa%2Fcrti.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9491baf5a5672888809f8b5932a99d91804a52/libgcc%2Fconfig%2Fxtensa%2Fcrti.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fxtensa%2Fcrti.S?ref=eb9491baf5a5672888809f8b5932a99d91804a52", "patch": "@@ -24,7 +24,7 @@\n # .init sections.  Users may put any desired instructions in those\n # sections.\n \n-#include \"xtensa-config.h\"\n+#include \"xtensa-config-builtin.h\"\n \n \t.section .init\n \t.globl _init"}, {"sha": "8520945fbd7cec6f5d25afbc032a2371e996b556", "filename": "libgcc/config/xtensa/crtn.S", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9491baf5a5672888809f8b5932a99d91804a52/libgcc%2Fconfig%2Fxtensa%2Fcrtn.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9491baf5a5672888809f8b5932a99d91804a52/libgcc%2Fconfig%2Fxtensa%2Fcrtn.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fxtensa%2Fcrtn.S?ref=eb9491baf5a5672888809f8b5932a99d91804a52", "patch": "@@ -25,7 +25,7 @@\n # fact return.  Users may put any desired instructions in those sections.\n # This file is the last thing linked into any executable.\n \n-#include \"xtensa-config.h\"\n+#include \"xtensa-config-builtin.h\"\n \n \t.section .init\n #if XCHAL_HAVE_WINDOWED && !__XTENSA_CALL0_ABI__"}, {"sha": "e5a35aa7dcc89633356e208eddd269cfab56ba1f", "filename": "libgcc/config/xtensa/lib1funcs.S", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9491baf5a5672888809f8b5932a99d91804a52/libgcc%2Fconfig%2Fxtensa%2Flib1funcs.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9491baf5a5672888809f8b5932a99d91804a52/libgcc%2Fconfig%2Fxtensa%2Flib1funcs.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fxtensa%2Flib1funcs.S?ref=eb9491baf5a5672888809f8b5932a99d91804a52", "patch": "@@ -23,7 +23,7 @@ a copy of the GCC Runtime Library Exception along with this program;\n see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n <http://www.gnu.org/licenses/>.  */\n \n-#include \"xtensa-config.h\"\n+#include \"xtensa-config-builtin.h\"\n \n /* Define macros for the ABS and ADDX* instructions to handle cases\n    where they are not included in the Xtensa processor configuration.  */"}, {"sha": "ef2a83251352c655c54a5e510b4b74acd4dd5b51", "filename": "libgcc/config/xtensa/lib2funcs.S", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9491baf5a5672888809f8b5932a99d91804a52/libgcc%2Fconfig%2Fxtensa%2Flib2funcs.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9491baf5a5672888809f8b5932a99d91804a52/libgcc%2Fconfig%2Fxtensa%2Flib2funcs.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fxtensa%2Flib2funcs.S?ref=eb9491baf5a5672888809f8b5932a99d91804a52", "patch": "@@ -23,7 +23,7 @@ a copy of the GCC Runtime Library Exception along with this program;\n see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n <http://www.gnu.org/licenses/>.  */\n \n-#include \"xtensa-config.h\"\n+#include \"xtensa-config-builtin.h\"\n \n /* __xtensa_libgcc_window_spill: This function flushes out all but the\n    current register window.  This is used to set up the stack so that"}, {"sha": "36d4d9db330b824ee2d08010818ed6c0ad2ddf2e", "filename": "libgcc/config/xtensa/xtensa-config-builtin.h", "status": "added", "additions": 198, "deletions": 0, "changes": 198, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9491baf5a5672888809f8b5932a99d91804a52/libgcc%2Fconfig%2Fxtensa%2Fxtensa-config-builtin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9491baf5a5672888809f8b5932a99d91804a52/libgcc%2Fconfig%2Fxtensa%2Fxtensa-config-builtin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fxtensa%2Fxtensa-config-builtin.h?ref=eb9491baf5a5672888809f8b5932a99d91804a52", "patch": "@@ -0,0 +1,198 @@\n+/* Xtensa configuration settings.\n+   Copyright (C) 2022 Free Software Foundation, Inc.\n+\n+   This file is part of GCC.\n+\n+   GCC is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3, or (at your option)\n+   any later version.\n+\n+   GCC is distributed in the hope that it will be useful, but WITHOUT\n+   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n+   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n+   License for more details.\n+\n+   Under Section 7 of GPL version 3, you are granted additional\n+   permissions described in the GCC Runtime Library Exception, version\n+   3.1, as published by the Free Software Foundation.\n+\n+   You should have received a copy of the GNU General Public License and\n+   a copy of the GCC Runtime Library Exception along with this program;\n+   see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+#ifndef XTENSA_CONFIG_BUILTIN_H\n+#define XTENSA_CONFIG_BUILTIN_H\n+\n+/* The macros defined here match those with the same names in the Xtensa\n+   compile-time HAL (Hardware Abstraction Layer).  Please refer to the\n+   Xtensa System Software Reference Manual for documentation of these\n+   macros.  */\n+\n+#undef XCHAL_HAVE_BE\n+#define XCHAL_HAVE_BE\t\t\t__XCHAL_HAVE_BE\n+\n+#undef XCHAL_HAVE_DENSITY\n+#define XCHAL_HAVE_DENSITY\t\t__XCHAL_HAVE_DENSITY\n+\n+#undef XCHAL_HAVE_CONST16\n+#define XCHAL_HAVE_CONST16\t\t__XCHAL_HAVE_CONST16\n+\n+#undef XCHAL_HAVE_ABS\n+#define XCHAL_HAVE_ABS\t\t\t__XCHAL_HAVE_ABS\n+\n+#undef XCHAL_HAVE_ADDX\n+#define XCHAL_HAVE_ADDX\t\t\t__XCHAL_HAVE_ADDX\n+\n+#undef XCHAL_HAVE_L32R\n+#define XCHAL_HAVE_L32R\t\t\t__XCHAL_HAVE_L32R\n+\n+#undef XSHAL_USE_ABSOLUTE_LITERALS\n+#define XSHAL_USE_ABSOLUTE_LITERALS\t__XSHAL_USE_ABSOLUTE_LITERALS\n+\n+#undef XSHAL_HAVE_TEXT_SECTION_LITERALS\n+#define XSHAL_HAVE_TEXT_SECTION_LITERALS __XSHAL_HAVE_TEXT_SECTION_LITERALS\n+\n+#undef XCHAL_HAVE_MAC16\n+#define XCHAL_HAVE_MAC16\t\t__XCHAL_HAVE_MAC16\n+\n+#undef XCHAL_HAVE_MUL16\n+#define XCHAL_HAVE_MUL16\t\t__XCHAL_HAVE_MUL16\n+\n+#undef XCHAL_HAVE_MUL32\n+#define XCHAL_HAVE_MUL32\t\t__XCHAL_HAVE_MUL32\n+\n+#undef XCHAL_HAVE_MUL32_HIGH\n+#define XCHAL_HAVE_MUL32_HIGH\t\t__XCHAL_HAVE_MUL32_HIGH\n+\n+#undef XCHAL_HAVE_DIV32\n+#define XCHAL_HAVE_DIV32\t\t__XCHAL_HAVE_DIV32\n+\n+#undef XCHAL_HAVE_NSA\n+#define XCHAL_HAVE_NSA\t\t\t__XCHAL_HAVE_NSA\n+\n+#undef XCHAL_HAVE_MINMAX\n+#define XCHAL_HAVE_MINMAX\t\t__XCHAL_HAVE_MINMAX\n+\n+#undef XCHAL_HAVE_SEXT\n+#define XCHAL_HAVE_SEXT\t\t\t__XCHAL_HAVE_SEXT\n+\n+#undef XCHAL_HAVE_LOOPS\n+#define XCHAL_HAVE_LOOPS\t\t__XCHAL_HAVE_LOOPS\n+\n+#undef XCHAL_HAVE_THREADPTR\n+#define XCHAL_HAVE_THREADPTR\t\t__XCHAL_HAVE_THREADPTR\n+\n+#undef XCHAL_HAVE_RELEASE_SYNC\n+#define XCHAL_HAVE_RELEASE_SYNC\t\t__XCHAL_HAVE_RELEASE_SYNC\n+\n+#undef XCHAL_HAVE_S32C1I\n+#define XCHAL_HAVE_S32C1I\t\t__XCHAL_HAVE_S32C1I\n+\n+#undef XCHAL_HAVE_BOOLEANS\n+#define XCHAL_HAVE_BOOLEANS\t\t__XCHAL_HAVE_BOOLEANS\n+\n+#undef XCHAL_HAVE_FP\n+#define XCHAL_HAVE_FP\t\t\t__XCHAL_HAVE_FP\n+\n+#undef XCHAL_HAVE_FP_DIV\n+#define XCHAL_HAVE_FP_DIV\t\t__XCHAL_HAVE_FP_DIV\n+\n+#undef XCHAL_HAVE_FP_RECIP\n+#define XCHAL_HAVE_FP_RECIP\t\t__XCHAL_HAVE_FP_RECIP\n+\n+#undef XCHAL_HAVE_FP_SQRT\n+#define XCHAL_HAVE_FP_SQRT\t\t__XCHAL_HAVE_FP_SQRT\n+\n+#undef XCHAL_HAVE_FP_RSQRT\n+#define XCHAL_HAVE_FP_RSQRT\t\t__XCHAL_HAVE_FP_RSQRT\n+\n+#undef XCHAL_HAVE_FP_POSTINC\n+#define XCHAL_HAVE_FP_POSTINC\t\t__XCHAL_HAVE_FP_POSTINC\n+\n+#undef XCHAL_HAVE_DFP\n+#define XCHAL_HAVE_DFP\t\t\t__XCHAL_HAVE_DFP\n+\n+#undef XCHAL_HAVE_DFP_DIV\n+#define XCHAL_HAVE_DFP_DIV\t\t__XCHAL_HAVE_DFP_DIV\n+\n+#undef XCHAL_HAVE_DFP_RECIP\n+#define XCHAL_HAVE_DFP_RECIP\t\t__XCHAL_HAVE_DFP_RECIP\n+\n+#undef XCHAL_HAVE_DFP_SQRT\n+#define XCHAL_HAVE_DFP_SQRT\t\t__XCHAL_HAVE_DFP_SQRT\n+\n+#undef XCHAL_HAVE_DFP_RSQRT\n+#define XCHAL_HAVE_DFP_RSQRT\t\t__XCHAL_HAVE_DFP_RSQRT\n+\n+#undef XCHAL_HAVE_WINDOWED\n+#define XCHAL_HAVE_WINDOWED\t\t__XCHAL_HAVE_WINDOWED\n+\n+#undef XCHAL_NUM_AREGS\n+#define XCHAL_NUM_AREGS\t\t\t__XCHAL_NUM_AREGS2\n+\n+#undef XCHAL_HAVE_WIDE_BRANCHES\n+#define XCHAL_HAVE_WIDE_BRANCHES\t__XCHAL_HAVE_WIDE_BRANCHES\n+\n+#undef XCHAL_HAVE_PREDICTED_BRANCHES\n+#define XCHAL_HAVE_PREDICTED_BRANCHES\t__XCHAL_HAVE_PREDICTED_BRANCHES\n+\n+\n+#undef XCHAL_ICACHE_SIZE\n+#define XCHAL_ICACHE_SIZE\t\t__XCHAL_ICACHE_SIZE6384\n+\n+#undef XCHAL_DCACHE_SIZE\n+#define XCHAL_DCACHE_SIZE\t\t__XCHAL_DCACHE_SIZE6384\n+\n+#undef XCHAL_ICACHE_LINESIZE\n+#define XCHAL_ICACHE_LINESIZE\t\t__XCHAL_ICACHE_LINESIZE2\n+\n+#undef XCHAL_DCACHE_LINESIZE\n+#define XCHAL_DCACHE_LINESIZE\t\t__XCHAL_DCACHE_LINESIZE2\n+\n+#undef XCHAL_ICACHE_LINEWIDTH\n+#define XCHAL_ICACHE_LINEWIDTH\t\t__XCHAL_ICACHE_LINEWIDTH\n+\n+#undef XCHAL_DCACHE_LINEWIDTH\n+#define XCHAL_DCACHE_LINEWIDTH\t\t__XCHAL_DCACHE_LINEWIDTH\n+\n+#undef XCHAL_DCACHE_IS_WRITEBACK\n+#define XCHAL_DCACHE_IS_WRITEBACK\t__XCHAL_DCACHE_IS_WRITEBACK\n+\n+\n+#undef XCHAL_HAVE_MMU\n+#define XCHAL_HAVE_MMU\t\t\t__XCHAL_HAVE_MMU\n+\n+#undef XCHAL_MMU_MIN_PTE_PAGE_SIZE\n+#define XCHAL_MMU_MIN_PTE_PAGE_SIZE\t__XCHAL_MMU_MIN_PTE_PAGE_SIZE2\n+\n+\n+#undef XCHAL_HAVE_DEBUG\n+#define XCHAL_HAVE_DEBUG\t\t__XCHAL_HAVE_DEBUG\n+\n+#undef XCHAL_NUM_IBREAK\n+#define XCHAL_NUM_IBREAK\t\t__XCHAL_NUM_IBREAK\n+\n+#undef XCHAL_NUM_DBREAK\n+#define XCHAL_NUM_DBREAK\t\t__XCHAL_NUM_DBREAK\n+\n+#undef XCHAL_DEBUGLEVEL\n+#define XCHAL_DEBUGLEVEL\t\t__XCHAL_DEBUGLEVEL\n+\n+\n+#undef XCHAL_MAX_INSTRUCTION_SIZE\n+#define XCHAL_MAX_INSTRUCTION_SIZE\t__XCHAL_MAX_INSTRUCTION_SIZE\n+\n+#undef XCHAL_INST_FETCH_WIDTH\n+#define XCHAL_INST_FETCH_WIDTH\t\t__XCHAL_INST_FETCH_WIDTH\n+\n+\n+#undef XSHAL_ABI\n+#undef XTHAL_ABI_WINDOWED\n+#undef XTHAL_ABI_CALL0\n+#define XSHAL_ABI\t\t\t__XSHAL_ABITHAL_ABI_WINDOWED\n+#define XTHAL_ABI_WINDOWED\t\t__XTHAL_ABI_WINDOWED\n+#define XTHAL_ABI_CALL0\t\t\t__XTHAL_ABI_CALL0\n+\n+#endif /* !XTENSA_CONFIG_BUILTIN_H */"}]}