{"sha": "e141542e74a015a27828aeaf89dabfbac9506ccc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTE0MTU0MmU3NGEwMTVhMjc4MjhhZWFmODlkYWJmYmFjOTUwNmNjYw==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2011-07-13T16:28:30Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-07-13T16:28:30Z"}, "message": "darwin-crt2.c: Move to ../libgcc/config/rs6000.\n\n\tgcc:\n\t* config/darwin-crt2.c: Move to ../libgcc/config/rs6000.\n\t* config/darwin-crt3.c: Move to ../libgcc/config.\n\t* config/t-darwin (EXTRA_MULTILIB_PARTS): Remove.\n\t($(T)crt3$(objext)): Remove.\n\t* config/rs6000/t-darwin (DARWIN_EXTRA_CRT_BUILD_CFLAGS): Remove.\n\t($(T)crt2$(objext)): Remove.\n\t* config.gcc (powerpc-*-darwin*): Remove extra_parts.\n\t(powerpc64-*-darwin*): Likewise.\n\n\tgcc/po:\n\t* EXCLUDES (config/darwin-crt2.c): Remove.\n\n\tlibgcc:\n\t* config/darwin-crt3.o: New file.\n\t* config/rs6000/darwin-crt2.c: New file.\n\t* config/t-darwin: New file.\n\t* config/rs6000/t-darwin (DARWIN_EXTRA_CRT_BUILD_CFLAGS): New variable.\n\t(crt2.o): New rule.\n\t* config.host (*-*-darwin*): Add crt3.o to extra_parts.\n\t(powerpc-*-darwin*): Add crt2.o to extra_parts.\n\t(powerpc64-*-darwin*): Likewise.\n\nFrom-SVN: r176239", "tree": {"sha": "71239e2a182cf221f08a79040e504a6015a27b28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/71239e2a182cf221f08a79040e504a6015a27b28"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e141542e74a015a27828aeaf89dabfbac9506ccc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e141542e74a015a27828aeaf89dabfbac9506ccc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e141542e74a015a27828aeaf89dabfbac9506ccc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e141542e74a015a27828aeaf89dabfbac9506ccc/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "72fbc381feb3f20f12ddaed9538fb1b719ffc164", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72fbc381feb3f20f12ddaed9538fb1b719ffc164", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72fbc381feb3f20f12ddaed9538fb1b719ffc164"}], "stats": {"total": 59, "additions": 38, "deletions": 21}, "files": [{"sha": "522258417ac3617cac25dba6ec0a59894a2cce29", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "patch": "@@ -1,3 +1,14 @@\n+2011-07-13  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* config/darwin-crt2.c: Move to ../libgcc/config/rs6000.\n+\t* config/darwin-crt3.c: Move to ../libgcc/config.\n+\t* config/t-darwin (EXTRA_MULTILIB_PARTS): Remove.\n+\t($(T)crt3$(objext)): Remove.\n+\t* config/rs6000/t-darwin (DARWIN_EXTRA_CRT_BUILD_CFLAGS): Remove.\n+\t($(T)crt2$(objext)): Remove.\n+\t* config.gcc (powerpc-*-darwin*): Remove extra_parts.\n+\t(powerpc64-*-darwin*): Likewise.\n+\n 2011-07-13  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/i386/i386.c (x86_output_mi_thunk): Support ptr_mode"}, {"sha": "decd6ab8be8e09437fc089abdd6ea7037e2d8a71", "filename": "gcc/config.gcc", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "patch": "@@ -2030,7 +2030,6 @@ picochip-*)\n #\t;;\n powerpc-*-darwin*)\n \textra_options=\"${extra_options} rs6000/darwin.opt\"\n-\textra_parts=\"crt2.o\"\n \tcase ${target} in\n \t  *-darwin1[0-9]* | *-darwin[8-9]*)\n \t    tmake_file=\"${tmake_file} rs6000/t-darwin8\"\n@@ -2047,7 +2046,6 @@ powerpc-*-darwin*)\n \t;;\n powerpc64-*-darwin*)\n \textra_options=\"${extra_options} ${cpu_type}/darwin.opt\"\n-\textra_parts=\"crt2.o\"\n \ttmake_file=\"${tmake_file} ${cpu_type}/t-darwin64 t-slibgcc-dummy\"\n \ttm_file=\"${tm_file} ${cpu_type}/darwin8.h ${cpu_type}/darwin64.h\"\n \textra_headers=altivec.h"}, {"sha": "8113b9ecbcb4f0aab63bc1a3d9dc9f8a35ebb979", "filename": "gcc/config/rs6000/t-darwin", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2Fconfig%2Frs6000%2Ft-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2Fconfig%2Frs6000%2Ft-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ft-darwin?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "patch": "@@ -27,8 +27,6 @@ LIB2FUNCS_STATIC_EXTRA = \\\n \t$(srcdir)/config/rs6000/darwin-fpsave.asm  \\\n \t$(srcdir)/config/rs6000/darwin-vecsave.asm\n \n-DARWIN_EXTRA_CRT_BUILD_CFLAGS = -mlongcall -mmacosx-version-min=10.4\n-\n # The .asm files above are designed to run on all processors,\n # even though they use AltiVec instructions.  -Wa is used because\n # -force_cpusubtype_ALL doesn't work with -dynamiclib.\n@@ -46,10 +44,3 @@ LIB2ADDEH += $(srcdir)/config/rs6000/darwin-fallback.c\n \n darwin-fpsave.o:\t$(srcdir)/config/rs6000/darwin-asm.h\n darwin-tramp.o:\t\t$(srcdir)/config/rs6000/darwin-asm.h\n-\n-# Explain how to build crt2.o\n-$(T)crt2$(objext): $(srcdir)/config/darwin-crt2.c $(GCC_PASSES) \\\n-\t$(TCONFIG_H) stmp-int-hdrs tsystem.h\n-\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) $(MULTILIB_CFLAGS) \\\n-\t  $(DARWIN_EXTRA_CRT_BUILD_CFLAGS) \\\n-\t  -c $(srcdir)/config/darwin-crt2.c -o $(T)crt2$(objext)"}, {"sha": "9e77395998d8f80d7fd42e6e1cfac69057d7222d", "filename": "gcc/config/t-darwin", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2Fconfig%2Ft-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2Fconfig%2Ft-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-darwin?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "patch": "@@ -42,15 +42,6 @@ darwin-driver.o: $(srcdir)/config/darwin-driver.c \\\n \t$(COMPILER) -c $(ALL_COMPILERFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \\\n \t  $(srcdir)/config/darwin-driver.c\n \n-# How to build crt3.o\n-EXTRA_MULTILIB_PARTS=crt3.o\n-# Pass -fno-tree-dominator-opts to work around bug 26840.\n-$(T)crt3$(objext): $(srcdir)/config/darwin-crt3.c $(GCC_PASSES) \\\n-\t$(TCONFIG_H) stmp-int-hdrs tsystem.h\n-\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) $(MULTILIB_CFLAGS) \\\n-\t  -fno-tree-dominator-opts $(DARWIN_EXTRA_CRT_BUILD_CFLAGS) \\\n-\t  -c $(srcdir)/config/darwin-crt3.c -o $(T)crt3$(objext)\n-\n # Use unwind-dw2-fde-darwin\n LIB2ADDEH = $(srcdir)/unwind-dw2.c $(srcdir)/unwind-dw2-fde-darwin.c \\\n   $(srcdir)/unwind-sjlj.c $(srcdir)/unwind-c.c"}, {"sha": "ff45aa8d8574f509c3d4d0d7cdf94d4dff88a463", "filename": "gcc/po/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2Fpo%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2Fpo%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpo%2FChangeLog?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "patch": "@@ -1,3 +1,7 @@\n+2011-07-13  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* EXCLUDES (config/darwin-crt2.c): Remove.\n+\n 2011-07-11  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* EXCLUDES (libgcov.c): Remove."}, {"sha": "cc29a2bd1ac7d0de397a7d6447d6885445ab5f7a", "filename": "gcc/po/EXCLUDES", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2Fpo%2FEXCLUDES", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/gcc%2Fpo%2FEXCLUDES", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpo%2FEXCLUDES?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "patch": "@@ -22,7 +22,6 @@\n # .def are examined to begin with.\n \n #   These files are part of libgcc, or target headers provided by gcc.\n-config/darwin-crt2.c\n config/fp-bit.c\n config/fp-bit.h\n config/vxlib.c"}, {"sha": "bfbf1053157653d4be2b309db3f56ee35f6e6e5b", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "patch": "@@ -1,3 +1,14 @@\n+2011-07-13  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* config/darwin-crt3.o: New file.\n+\t* config/rs6000/darwin-crt2.c: New file.\n+\t* config/t-darwin: New file.\n+\t* config/rs6000/t-darwin (DARWIN_EXTRA_CRT_BUILD_CFLAGS): New variable.\n+\t(crt2.o): New rule.\n+\t* config.host (*-*-darwin*): Add crt3.o to extra_parts.\n+\t(powerpc-*-darwin*): Add crt2.o to extra_parts.\n+\t(powerpc64-*-darwin*): Likewise.\n+\n 2011-07-13  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* config/i386/netware-crt0.c: New file."}, {"sha": "56ce998a62b7db61f080281c840b3de616548c4e", "filename": "libgcc/config.host", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "patch": "@@ -153,6 +153,7 @@ case ${host} in\n *-*-darwin*)\n   asm_hidden_op=.private_extern\n   tmake_file=\"t-darwin ${cpu_type}/t-darwin t-slibgcc-darwin\"\n+  extra_parts=crt3.o\n   ;;\n *-*-freebsd[12] | *-*-freebsd[12].* | *-*-freebsd*aout*)\n   # This is the place-holder for the generic a.out configuration\n@@ -528,8 +529,10 @@ powerpc-*-darwin*)\n \t  md_unwind_header=rs6000/darwin-unwind.h\n \t  ;;\n \tesac\n+\textra_parts=\"$extra_parts crt2.o\"\n \t;;\n powerpc64-*-darwin*)\n+\textra_parts=\"$extra_parts crt2.o\"\n \t;;\n powerpc-*-freebsd*)\n \ttmake_file=\"${tmake_file} rs6000/t-ppccomm rs6000/t-freebsd t-softfp\""}, {"sha": "9b64f2aa8c3e6e1b3c93ab03c42291d25dd126fa", "filename": "libgcc/config/darwin-crt3.c", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2Fconfig%2Fdarwin-crt3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2Fconfig%2Fdarwin-crt3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fdarwin-crt3.c?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "previous_filename": "gcc/config/darwin-crt3.c"}, {"sha": "f4a584a8f9f369b20cb2516900d1254d0f435431", "filename": "libgcc/config/rs6000/darwin-crt2.c", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2Fconfig%2Frs6000%2Fdarwin-crt2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2Fconfig%2Frs6000%2Fdarwin-crt2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Frs6000%2Fdarwin-crt2.c?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "previous_filename": "gcc/config/darwin-crt2.c"}, {"sha": "4541e4ed3ed4c6bcd1567851c66e61036c7b5eb1", "filename": "libgcc/config/rs6000/t-darwin", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2Fconfig%2Frs6000%2Ft-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2Fconfig%2Frs6000%2Ft-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Frs6000%2Ft-darwin?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "patch": "@@ -1 +1,6 @@\n+DARWIN_EXTRA_CRT_BUILD_CFLAGS = -mlongcall -mmacosx-version-min=10.4\n+\n+crt2.o: $(srcdir)/config/rs6000/darwin-crt2.c\n+\t$(crt_compile) $(DARWIN_EXTRA_CRT_BUILD_CFLAGS) -c $<\n+\n SHLIB_VERPFX = $(gcc_srcdir)/config/rs6000/darwin-libgcc"}, {"sha": "548f0e3d469c9a82ec5460aa24af1029a1949ddb", "filename": "libgcc/config/t-darwin", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2Fconfig%2Ft-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e141542e74a015a27828aeaf89dabfbac9506ccc/libgcc%2Fconfig%2Ft-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Ft-darwin?ref=e141542e74a015a27828aeaf89dabfbac9506ccc", "patch": "@@ -0,0 +1,4 @@\n+# Pass -fno-tree-dominator-opts to work around bug 26840.\n+crt3.o: $(srcdir)/config/darwin-crt3.c\n+\t$(crt_compile) \\\n+\t  -fno-tree-dominator-opts $(DARWIN_EXTRA_CRT_BUILD_CFLAGS) -c $<"}]}