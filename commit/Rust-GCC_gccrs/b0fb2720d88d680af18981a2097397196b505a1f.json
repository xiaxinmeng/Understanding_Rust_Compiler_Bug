{"sha": "b0fb2720d88d680af18981a2097397196b505a1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjBmYjI3MjBkODhkNjgwYWYxODk4MWEyMDk3Mzk3MTk2YjUwNWExZg==", "commit": {"author": {"name": "Julian Brown", "email": "julian@codesourcery.com", "date": "2021-02-09T22:09:00Z"}, "committer": {"name": "Julian Brown", "email": "julian@codesourcery.com", "date": "2021-02-10T03:16:28Z"}, "message": "Revert \"openacc: Allow strided arrays in update directives\"\n\nThis patch reverts the non-testsuite parts of commit\n9a4d32f85ccebc0ee4b24e6d9d7a4f11c04d7146 which cause ICEs without the\nyet-to-be-approved patch here:\n\n  https://gcc.gnu.org/pipermail/gcc-patches/2021-February/564711.html\n\ngcc/fortran/\n\n\tPR fortran/98979\n\t* openmp.c (resolve_omp_clauses): Omit OpenACC update in\n\tcontiguity check and stride-specified error.", "tree": {"sha": "936e46b1581240d8adffbd5ea303bbf290671865", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/936e46b1581240d8adffbd5ea303bbf290671865"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b0fb2720d88d680af18981a2097397196b505a1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0fb2720d88d680af18981a2097397196b505a1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0fb2720d88d680af18981a2097397196b505a1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0fb2720d88d680af18981a2097397196b505a1f/comments", "author": {"login": "jtb20", "id": 6094880, "node_id": "MDQ6VXNlcjYwOTQ4ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/6094880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtb20", "html_url": "https://github.com/jtb20", "followers_url": "https://api.github.com/users/jtb20/followers", "following_url": "https://api.github.com/users/jtb20/following{/other_user}", "gists_url": "https://api.github.com/users/jtb20/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtb20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtb20/subscriptions", "organizations_url": "https://api.github.com/users/jtb20/orgs", "repos_url": "https://api.github.com/users/jtb20/repos", "events_url": "https://api.github.com/users/jtb20/events{/privacy}", "received_events_url": "https://api.github.com/users/jtb20/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jtb20", "id": 6094880, "node_id": "MDQ6VXNlcjYwOTQ4ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/6094880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtb20", "html_url": "https://github.com/jtb20", "followers_url": "https://api.github.com/users/jtb20/followers", "following_url": "https://api.github.com/users/jtb20/following{/other_user}", "gists_url": "https://api.github.com/users/jtb20/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtb20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtb20/subscriptions", "organizations_url": "https://api.github.com/users/jtb20/orgs", "repos_url": "https://api.github.com/users/jtb20/repos", "events_url": "https://api.github.com/users/jtb20/events{/privacy}", "received_events_url": "https://api.github.com/users/jtb20/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0a91b73e5b0147ca8cd832fd99ed4593d896b1d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a91b73e5b0147ca8cd832fd99ed4593d896b1d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0a91b73e5b0147ca8cd832fd99ed4593d896b1d0"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "aab17f0589f6e44708ecd1f2acc27fb4303b17f7", "filename": "gcc/fortran/openmp.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0fb2720d88d680af18981a2097397196b505a1f/gcc%2Ffortran%2Fopenmp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0fb2720d88d680af18981a2097397196b505a1f/gcc%2Ffortran%2Fopenmp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fopenmp.c?ref=b0fb2720d88d680af18981a2097397196b505a1f", "patch": "@@ -5192,8 +5192,7 @@ resolve_omp_clauses (gfc_code *code, gfc_omp_clauses *omp_clauses,\n \t\t\t   array isn't contiguous.  An expression such as\n \t\t\t   arr(-n:n,-n:n) could be contiguous even if it looks\n \t\t\t   like it may not be.  */\n-\t\t\tif (code->op != EXEC_OACC_UPDATE\n-\t\t\t    && list != OMP_LIST_CACHE\n+\t\t\tif (list != OMP_LIST_CACHE\n \t\t\t    && list != OMP_LIST_DEPEND\n \t\t\t    && !gfc_is_simply_contiguous (n->expr, false, true)\n \t\t\t    && gfc_is_not_contiguous (n->expr))\n@@ -5231,7 +5230,7 @@ resolve_omp_clauses (gfc_code *code, gfc_omp_clauses *omp_clauses,\n \t\t\tint i;\n \t\t\tgfc_array_ref *ar = &array_ref->u.ar;\n \t\t\tfor (i = 0; i < ar->dimen; i++)\n-\t\t\t  if (ar->stride[i] && code->op != EXEC_OACC_UPDATE)\n+\t\t\t  if (ar->stride[i])\n \t\t\t    {\n \t\t\t      gfc_error (\"Stride should not be specified for \"\n \t\t\t\t\t \"array section in %s clause at %L\","}]}