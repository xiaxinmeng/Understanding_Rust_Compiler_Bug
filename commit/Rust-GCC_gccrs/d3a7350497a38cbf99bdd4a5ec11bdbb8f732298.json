{"sha": "d3a7350497a38cbf99bdd4a5ec11bdbb8f732298", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDNhNzM1MDQ5N2EzOGNiZjk5YmRkNGE1ZWMxMWJkYmI4ZjczMjI5OA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2010-10-12T13:35:22Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2010-10-12T13:35:22Z"}, "message": "random.tcc (piecewise_linear_distribution<>:: operator()): Don't crash when the dist is default-constructed.\n\n2010-10-12  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* include/bits/random.tcc (piecewise_linear_distribution<>::\n\toperator()): Don't crash when the dist is default-constructed.\n\t* testsuite/26_numerics/random/piecewise_linear_distribution/\n\toperators/call-default.cc: New.\n\nFrom-SVN: r165379", "tree": {"sha": "665ac82091f6e9d408cfc6f83ab9733db92b1094", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/665ac82091f6e9d408cfc6f83ab9733db92b1094"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d3a7350497a38cbf99bdd4a5ec11bdbb8f732298", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3a7350497a38cbf99bdd4a5ec11bdbb8f732298", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3a7350497a38cbf99bdd4a5ec11bdbb8f732298", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3a7350497a38cbf99bdd4a5ec11bdbb8f732298/comments", "author": null, "committer": null, "parents": [{"sha": "a81f4b678524dbc3c3614f785c5bfee0944ce522", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a81f4b678524dbc3c3614f785c5bfee0944ce522", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a81f4b678524dbc3c3614f785c5bfee0944ce522"}], "stats": {"total": 51, "additions": 51, "deletions": 0}, "files": [{"sha": "b6bd2ef998d6562352c7cf317df118f6d6960845", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3a7350497a38cbf99bdd4a5ec11bdbb8f732298/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3a7350497a38cbf99bdd4a5ec11bdbb8f732298/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=d3a7350497a38cbf99bdd4a5ec11bdbb8f732298", "patch": "@@ -1,3 +1,10 @@\n+2010-10-12  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* include/bits/random.tcc (piecewise_linear_distribution<>::\n+\toperator()): Don't crash when the dist is default-constructed.\n+\t* testsuite/26_numerics/random/piecewise_linear_distribution/\n+\toperators/call-default.cc: New.\n+\n 2010-10-11  Jonathan Wakely  <jwakely.gcc@gmail.com>\n \n \t* testsuite/23_containers/bitset/cons/2.cc: Tweak."}, {"sha": "d360b41c9b6cde2bd147420da544df951bf0ddcc", "filename": "libstdc++-v3/include/bits/random.tcc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3a7350497a38cbf99bdd4a5ec11bdbb8f732298/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3a7350497a38cbf99bdd4a5ec11bdbb8f732298/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.tcc?ref=d3a7350497a38cbf99bdd4a5ec11bdbb8f732298", "patch": "@@ -2623,6 +2623,9 @@ namespace std\n \t  __aurng(__urng);\n \n \tconst double __p = __aurng();\n+\tif (__param._M_m.empty())\n+\t  return __p;\n+\n \tauto __pos = std::lower_bound(__param._M_cp.begin(),\n \t\t\t\t      __param._M_cp.end(), __p);\n \tconst size_t __i = __pos - __param._M_cp.begin();"}, {"sha": "426c4d8371149684302e00d1bccc14764ce0a725", "filename": "libstdc++-v3/testsuite/26_numerics/random/piecewise_linear_distribution/operators/call-default.cc", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3a7350497a38cbf99bdd4a5ec11bdbb8f732298/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Frandom%2Fpiecewise_linear_distribution%2Foperators%2Fcall-default.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3a7350497a38cbf99bdd4a5ec11bdbb8f732298/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Frandom%2Fpiecewise_linear_distribution%2Foperators%2Fcall-default.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Frandom%2Fpiecewise_linear_distribution%2Foperators%2Fcall-default.cc?ref=d3a7350497a38cbf99bdd4a5ec11bdbb8f732298", "patch": "@@ -0,0 +1,41 @@\n+// { dg-options \"-std=c++0x\" }\n+// { dg-require-cstdint \"\" }\n+//\n+// 2010-10-12  Paolo Carlini  <paolo.carlini@oracle.com>\n+//\n+// Copyright (C) 2010 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+//\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+// 26.5.8.5.3 Class template piecewise_linear_distribution\n+//   [rand.dist.samp.plinear]\n+\n+#include <random>\n+\n+void\n+test01()\n+{\n+  std::piecewise_linear_distribution<> u;\n+  std::minstd_rand0 rng;\n+\n+  u(rng);\n+}\n+\n+int main()\n+{\n+  test01();\n+  return 0;\n+}"}]}