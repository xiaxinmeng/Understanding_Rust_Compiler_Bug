{"sha": "05048fc29f0e36e814281270a19762c962c1d9d2", "node_id": "C_kwDOANBUbNoAKDA1MDQ4ZmMyOWYwZTM2ZTgxNDI4MTI3MGExOTc2MmM5NjJjMWQ5ZDI", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2022-06-25T12:07:43Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2022-12-07T11:16:31Z"}, "message": "configure: When host-shared, pass --with-pic to in-tree lib configs.\n\nIf we are building PIC/PIE host executables, and we are building dependent\nlibs (e.g. GMP) in-tree those libs need to be configured to generate PIC code.\n\nSigned-off-by: Iain Sandoe <iain@sandoe.co.uk>\n\nChangeLog:\n\n\t* Makefile.def: Pass host_libs_picflag to host dependent library\n\tconfigures.\n\t* Makefile.in: Regenerate.\n\t* configure: Regenerate.\n\t* configure.ac (host_libs_picflag): New configure variable set to\n\t'--with-pic' when building 'host_shared'.", "tree": {"sha": "18c40e56eb65abc333ecebe1de52b3b1c59316b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/18c40e56eb65abc333ecebe1de52b3b1c59316b3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/05048fc29f0e36e814281270a19762c962c1d9d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05048fc29f0e36e814281270a19762c962c1d9d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/05048fc29f0e36e814281270a19762c962c1d9d2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05048fc29f0e36e814281270a19762c962c1d9d2/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45e09c2eb9c2bdd34ef777e06ddc9908dd0664f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45e09c2eb9c2bdd34ef777e06ddc9908dd0664f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45e09c2eb9c2bdd34ef777e06ddc9908dd0664f9"}], "stats": {"total": 154, "additions": 88, "deletions": 66}, "files": [{"sha": "25e48938dbf933bc6b2cf5d03b523e3e2e397a31", "filename": "Makefile.def", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05048fc29f0e36e814281270a19762c962c1d9d2/Makefile.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05048fc29f0e36e814281270a19762c962c1d9d2/Makefile.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.def?ref=05048fc29f0e36e814281270a19762c962c1d9d2", "patch": "@@ -50,7 +50,7 @@ host_modules= { module= gcc; bootstrap=true;\n \t\textra_make_flags=\"$(EXTRA_GCC_FLAGS)\"; };\n host_modules= { module= gmp; lib_path=.libs; bootstrap=true;\n \t\t// Work around in-tree gmp configure bug with missing flex.\n-\t\textra_configure_flags='--disable-shared LEX=\"touch lex.yy.c\"';\n+\t\textra_configure_flags='--disable-shared LEX=\"touch lex.yy.c\" @host_libs_picflag@';\n \t\textra_make_flags='AM_CFLAGS=\"-DNO_ASM\"';\n \t\tno_install= true;\n \t\t// none-*-* disables asm optimizations, bootstrap-testing\n@@ -60,18 +60,19 @@ host_modules= { module= gmp; lib_path=.libs; bootstrap=true;\n \t\t// different from host for target.\n \t        target=\"none-${host_vendor}-${host_os}\"; };\n host_modules= { module= mpfr; lib_path=src/.libs; bootstrap=true;\n-\t\textra_configure_flags='--disable-shared @extra_mpfr_configure_flags@';\n+\t\textra_configure_flags='--disable-shared @extra_mpfr_configure_flags@ @host_libs_picflag@';\n \t\textra_make_flags='AM_CFLAGS=\"-DNO_ASM\"';\n \t\tno_install= true; };\n host_modules= { module= mpc; lib_path=src/.libs; bootstrap=true;\n-\t\textra_configure_flags='--disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@ --disable-maintainer-mode';\n+\t\textra_configure_flags='--disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@  @host_libs_picflag@ --disable-maintainer-mode';\n \t\tno_install= true; };\n host_modules= { module= isl; lib_path=.libs; bootstrap=true;\n-\t\textra_configure_flags='--disable-shared @extra_isl_gmp_configure_flags@';\n+\t\textra_configure_flags='--disable-shared @extra_isl_gmp_configure_flags@  @host_libs_picflag@';\n \t\textra_make_flags='V=1';\n \t\tno_install= true; };\n host_modules= { module= gold; bootstrap=true; };\n host_modules= { module= gprof; };\n+// intl acts on 'host_shared' directly, and does not support --with-pic.\n host_modules= { module= intl; bootstrap=true; };\n host_modules= { module= tcl;\n                 missing=mostlyclean; };\n@@ -107,7 +108,7 @@ host_modules= { module= libiberty-linker-plugin; bootstrap=true;\n // We abuse missing to avoid installing anything for libiconv.\n host_modules= { module= libiconv;\n \t\tbootstrap=true;\n-\t\textra_configure_flags='--disable-shared';\n+\t\textra_configure_flags='--disable-shared  @host_libs_picflag@';\n \t\tno_install= true;\n \t\tmissing= pdf;\n \t\tmissing= html;\n@@ -122,7 +123,7 @@ host_modules= { module= sim; };\n host_modules= { module= texinfo; no_install= true; };\n host_modules= { module= zlib; no_install=true; no_check=true;\n \t\tbootstrap=true;\n-\t        extra_configure_flags='@extra_host_zlib_configure_flags@';};\n+\t        extra_configure_flags='@extra_host_zlib_configure_flags@ @host_libs_picflag@';};\n host_modules= { module= gnulib; };\n host_modules= { module= gdbsupport; };\n host_modules= { module= gdbserver; };"}, {"sha": "c426b0607c4567c2e87f55d8df82a993646c93ba", "filename": "Makefile.in", "status": "modified", "additions": 60, "deletions": 60, "changes": 120, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05048fc29f0e36e814281270a19762c962c1d9d2/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05048fc29f0e36e814281270a19762c962c1d9d2/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=05048fc29f0e36e814281270a19762c962c1d9d2", "patch": "@@ -13118,7 +13118,7 @@ configure-gmp:\n \t  $$s/$$module_srcdir/configure \\\n \t  --srcdir=$${topdir}/$$module_srcdir \\\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=none-${host_vendor}-${host_os} \\\n-\t  --target=none-${host_vendor}-${host_os} --disable-shared LEX=\"touch lex.yy.c\" \\\n+\t  --target=none-${host_vendor}-${host_os} --disable-shared LEX=\"touch lex.yy.c\" @host_libs_picflag@ \\\n \t  || exit 1\n @endif gmp\n \n@@ -13154,7 +13154,7 @@ configure-stage1-gmp:\n \t  --target=none-${host_vendor}-${host_os} \\\n \t   \\\n \t  $(STAGE1_CONFIGURE_FLAGS) \\\n-\t  --disable-shared LEX=\"touch lex.yy.c\"\n+\t  --disable-shared LEX=\"touch lex.yy.c\" @host_libs_picflag@\n @endif gmp-bootstrap\n \n .PHONY: configure-stage2-gmp maybe-configure-stage2-gmp\n@@ -13188,7 +13188,7 @@ configure-stage2-gmp:\n \t  --target=none-${host_vendor}-${host_os} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE2_CONFIGURE_FLAGS) \\\n-\t  --disable-shared LEX=\"touch lex.yy.c\"\n+\t  --disable-shared LEX=\"touch lex.yy.c\" @host_libs_picflag@\n @endif gmp-bootstrap\n \n .PHONY: configure-stage3-gmp maybe-configure-stage3-gmp\n@@ -13222,7 +13222,7 @@ configure-stage3-gmp:\n \t  --target=none-${host_vendor}-${host_os} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE3_CONFIGURE_FLAGS) \\\n-\t  --disable-shared LEX=\"touch lex.yy.c\"\n+\t  --disable-shared LEX=\"touch lex.yy.c\" @host_libs_picflag@\n @endif gmp-bootstrap\n \n .PHONY: configure-stage4-gmp maybe-configure-stage4-gmp\n@@ -13256,7 +13256,7 @@ configure-stage4-gmp:\n \t  --target=none-${host_vendor}-${host_os} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE4_CONFIGURE_FLAGS) \\\n-\t  --disable-shared LEX=\"touch lex.yy.c\"\n+\t  --disable-shared LEX=\"touch lex.yy.c\" @host_libs_picflag@\n @endif gmp-bootstrap\n \n .PHONY: configure-stageprofile-gmp maybe-configure-stageprofile-gmp\n@@ -13290,7 +13290,7 @@ configure-stageprofile-gmp:\n \t  --target=none-${host_vendor}-${host_os} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEprofile_CONFIGURE_FLAGS) \\\n-\t  --disable-shared LEX=\"touch lex.yy.c\"\n+\t  --disable-shared LEX=\"touch lex.yy.c\" @host_libs_picflag@\n @endif gmp-bootstrap\n \n .PHONY: configure-stagetrain-gmp maybe-configure-stagetrain-gmp\n@@ -13324,7 +13324,7 @@ configure-stagetrain-gmp:\n \t  --target=none-${host_vendor}-${host_os} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEtrain_CONFIGURE_FLAGS) \\\n-\t  --disable-shared LEX=\"touch lex.yy.c\"\n+\t  --disable-shared LEX=\"touch lex.yy.c\" @host_libs_picflag@\n @endif gmp-bootstrap\n \n .PHONY: configure-stagefeedback-gmp maybe-configure-stagefeedback-gmp\n@@ -13358,7 +13358,7 @@ configure-stagefeedback-gmp:\n \t  --target=none-${host_vendor}-${host_os} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEfeedback_CONFIGURE_FLAGS) \\\n-\t  --disable-shared LEX=\"touch lex.yy.c\"\n+\t  --disable-shared LEX=\"touch lex.yy.c\" @host_libs_picflag@\n @endif gmp-bootstrap\n \n .PHONY: configure-stageautoprofile-gmp maybe-configure-stageautoprofile-gmp\n@@ -13392,7 +13392,7 @@ configure-stageautoprofile-gmp:\n \t  --target=none-${host_vendor}-${host_os} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautoprofile_CONFIGURE_FLAGS) \\\n-\t  --disable-shared LEX=\"touch lex.yy.c\"\n+\t  --disable-shared LEX=\"touch lex.yy.c\" @host_libs_picflag@\n @endif gmp-bootstrap\n \n .PHONY: configure-stageautofeedback-gmp maybe-configure-stageautofeedback-gmp\n@@ -13426,7 +13426,7 @@ configure-stageautofeedback-gmp:\n \t  --target=none-${host_vendor}-${host_os} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautofeedback_CONFIGURE_FLAGS) \\\n-\t  --disable-shared LEX=\"touch lex.yy.c\"\n+\t  --disable-shared LEX=\"touch lex.yy.c\" @host_libs_picflag@\n @endif gmp-bootstrap\n \n \n@@ -14255,7 +14255,7 @@ configure-mpfr:\n \t  $$s/$$module_srcdir/configure \\\n \t  --srcdir=$${topdir}/$$module_srcdir \\\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n-\t  --target=${target_alias} --disable-shared @extra_mpfr_configure_flags@ \\\n+\t  --target=${target_alias} --disable-shared @extra_mpfr_configure_flags@ @host_libs_picflag@ \\\n \t  || exit 1\n @endif mpfr\n \n@@ -14291,7 +14291,7 @@ configure-stage1-mpfr:\n \t  --target=${target_alias} \\\n \t   \\\n \t  $(STAGE1_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpfr_configure_flags@\n+\t  --disable-shared @extra_mpfr_configure_flags@ @host_libs_picflag@\n @endif mpfr-bootstrap\n \n .PHONY: configure-stage2-mpfr maybe-configure-stage2-mpfr\n@@ -14325,7 +14325,7 @@ configure-stage2-mpfr:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE2_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpfr_configure_flags@\n+\t  --disable-shared @extra_mpfr_configure_flags@ @host_libs_picflag@\n @endif mpfr-bootstrap\n \n .PHONY: configure-stage3-mpfr maybe-configure-stage3-mpfr\n@@ -14359,7 +14359,7 @@ configure-stage3-mpfr:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE3_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpfr_configure_flags@\n+\t  --disable-shared @extra_mpfr_configure_flags@ @host_libs_picflag@\n @endif mpfr-bootstrap\n \n .PHONY: configure-stage4-mpfr maybe-configure-stage4-mpfr\n@@ -14393,7 +14393,7 @@ configure-stage4-mpfr:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE4_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpfr_configure_flags@\n+\t  --disable-shared @extra_mpfr_configure_flags@ @host_libs_picflag@\n @endif mpfr-bootstrap\n \n .PHONY: configure-stageprofile-mpfr maybe-configure-stageprofile-mpfr\n@@ -14427,7 +14427,7 @@ configure-stageprofile-mpfr:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEprofile_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpfr_configure_flags@\n+\t  --disable-shared @extra_mpfr_configure_flags@ @host_libs_picflag@\n @endif mpfr-bootstrap\n \n .PHONY: configure-stagetrain-mpfr maybe-configure-stagetrain-mpfr\n@@ -14461,7 +14461,7 @@ configure-stagetrain-mpfr:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEtrain_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpfr_configure_flags@\n+\t  --disable-shared @extra_mpfr_configure_flags@ @host_libs_picflag@\n @endif mpfr-bootstrap\n \n .PHONY: configure-stagefeedback-mpfr maybe-configure-stagefeedback-mpfr\n@@ -14495,7 +14495,7 @@ configure-stagefeedback-mpfr:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEfeedback_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpfr_configure_flags@\n+\t  --disable-shared @extra_mpfr_configure_flags@ @host_libs_picflag@\n @endif mpfr-bootstrap\n \n .PHONY: configure-stageautoprofile-mpfr maybe-configure-stageautoprofile-mpfr\n@@ -14529,7 +14529,7 @@ configure-stageautoprofile-mpfr:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautoprofile_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpfr_configure_flags@\n+\t  --disable-shared @extra_mpfr_configure_flags@ @host_libs_picflag@\n @endif mpfr-bootstrap\n \n .PHONY: configure-stageautofeedback-mpfr maybe-configure-stageautofeedback-mpfr\n@@ -14563,7 +14563,7 @@ configure-stageautofeedback-mpfr:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautofeedback_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpfr_configure_flags@\n+\t  --disable-shared @extra_mpfr_configure_flags@ @host_libs_picflag@\n @endif mpfr-bootstrap\n \n \n@@ -15392,7 +15392,7 @@ configure-mpc:\n \t  $$s/$$module_srcdir/configure \\\n \t  --srcdir=$${topdir}/$$module_srcdir \\\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n-\t  --target=${target_alias} --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@ --disable-maintainer-mode \\\n+\t  --target=${target_alias} --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@  @host_libs_picflag@ --disable-maintainer-mode \\\n \t  || exit 1\n @endif mpc\n \n@@ -15428,7 +15428,7 @@ configure-stage1-mpc:\n \t  --target=${target_alias} \\\n \t   \\\n \t  $(STAGE1_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@ --disable-maintainer-mode\n+\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@  @host_libs_picflag@ --disable-maintainer-mode\n @endif mpc-bootstrap\n \n .PHONY: configure-stage2-mpc maybe-configure-stage2-mpc\n@@ -15462,7 +15462,7 @@ configure-stage2-mpc:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE2_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@ --disable-maintainer-mode\n+\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@  @host_libs_picflag@ --disable-maintainer-mode\n @endif mpc-bootstrap\n \n .PHONY: configure-stage3-mpc maybe-configure-stage3-mpc\n@@ -15496,7 +15496,7 @@ configure-stage3-mpc:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE3_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@ --disable-maintainer-mode\n+\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@  @host_libs_picflag@ --disable-maintainer-mode\n @endif mpc-bootstrap\n \n .PHONY: configure-stage4-mpc maybe-configure-stage4-mpc\n@@ -15530,7 +15530,7 @@ configure-stage4-mpc:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE4_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@ --disable-maintainer-mode\n+\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@  @host_libs_picflag@ --disable-maintainer-mode\n @endif mpc-bootstrap\n \n .PHONY: configure-stageprofile-mpc maybe-configure-stageprofile-mpc\n@@ -15564,7 +15564,7 @@ configure-stageprofile-mpc:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEprofile_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@ --disable-maintainer-mode\n+\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@  @host_libs_picflag@ --disable-maintainer-mode\n @endif mpc-bootstrap\n \n .PHONY: configure-stagetrain-mpc maybe-configure-stagetrain-mpc\n@@ -15598,7 +15598,7 @@ configure-stagetrain-mpc:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEtrain_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@ --disable-maintainer-mode\n+\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@  @host_libs_picflag@ --disable-maintainer-mode\n @endif mpc-bootstrap\n \n .PHONY: configure-stagefeedback-mpc maybe-configure-stagefeedback-mpc\n@@ -15632,7 +15632,7 @@ configure-stagefeedback-mpc:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEfeedback_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@ --disable-maintainer-mode\n+\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@  @host_libs_picflag@ --disable-maintainer-mode\n @endif mpc-bootstrap\n \n .PHONY: configure-stageautoprofile-mpc maybe-configure-stageautoprofile-mpc\n@@ -15666,7 +15666,7 @@ configure-stageautoprofile-mpc:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautoprofile_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@ --disable-maintainer-mode\n+\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@  @host_libs_picflag@ --disable-maintainer-mode\n @endif mpc-bootstrap\n \n .PHONY: configure-stageautofeedback-mpc maybe-configure-stageautofeedback-mpc\n@@ -15700,7 +15700,7 @@ configure-stageautofeedback-mpc:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautofeedback_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@ --disable-maintainer-mode\n+\t  --disable-shared @extra_mpc_gmp_configure_flags@ @extra_mpc_mpfr_configure_flags@  @host_libs_picflag@ --disable-maintainer-mode\n @endif mpc-bootstrap\n \n \n@@ -16529,7 +16529,7 @@ configure-isl:\n \t  $$s/$$module_srcdir/configure \\\n \t  --srcdir=$${topdir}/$$module_srcdir \\\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n-\t  --target=${target_alias} --disable-shared @extra_isl_gmp_configure_flags@ \\\n+\t  --target=${target_alias} --disable-shared @extra_isl_gmp_configure_flags@  @host_libs_picflag@ \\\n \t  || exit 1\n @endif isl\n \n@@ -16565,7 +16565,7 @@ configure-stage1-isl:\n \t  --target=${target_alias} \\\n \t   \\\n \t  $(STAGE1_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_isl_gmp_configure_flags@\n+\t  --disable-shared @extra_isl_gmp_configure_flags@  @host_libs_picflag@\n @endif isl-bootstrap\n \n .PHONY: configure-stage2-isl maybe-configure-stage2-isl\n@@ -16599,7 +16599,7 @@ configure-stage2-isl:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE2_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_isl_gmp_configure_flags@\n+\t  --disable-shared @extra_isl_gmp_configure_flags@  @host_libs_picflag@\n @endif isl-bootstrap\n \n .PHONY: configure-stage3-isl maybe-configure-stage3-isl\n@@ -16633,7 +16633,7 @@ configure-stage3-isl:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE3_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_isl_gmp_configure_flags@\n+\t  --disable-shared @extra_isl_gmp_configure_flags@  @host_libs_picflag@\n @endif isl-bootstrap\n \n .PHONY: configure-stage4-isl maybe-configure-stage4-isl\n@@ -16667,7 +16667,7 @@ configure-stage4-isl:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE4_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_isl_gmp_configure_flags@\n+\t  --disable-shared @extra_isl_gmp_configure_flags@  @host_libs_picflag@\n @endif isl-bootstrap\n \n .PHONY: configure-stageprofile-isl maybe-configure-stageprofile-isl\n@@ -16701,7 +16701,7 @@ configure-stageprofile-isl:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEprofile_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_isl_gmp_configure_flags@\n+\t  --disable-shared @extra_isl_gmp_configure_flags@  @host_libs_picflag@\n @endif isl-bootstrap\n \n .PHONY: configure-stagetrain-isl maybe-configure-stagetrain-isl\n@@ -16735,7 +16735,7 @@ configure-stagetrain-isl:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEtrain_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_isl_gmp_configure_flags@\n+\t  --disable-shared @extra_isl_gmp_configure_flags@  @host_libs_picflag@\n @endif isl-bootstrap\n \n .PHONY: configure-stagefeedback-isl maybe-configure-stagefeedback-isl\n@@ -16769,7 +16769,7 @@ configure-stagefeedback-isl:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEfeedback_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_isl_gmp_configure_flags@\n+\t  --disable-shared @extra_isl_gmp_configure_flags@  @host_libs_picflag@\n @endif isl-bootstrap\n \n .PHONY: configure-stageautoprofile-isl maybe-configure-stageautoprofile-isl\n@@ -16803,7 +16803,7 @@ configure-stageautoprofile-isl:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautoprofile_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_isl_gmp_configure_flags@\n+\t  --disable-shared @extra_isl_gmp_configure_flags@  @host_libs_picflag@\n @endif isl-bootstrap\n \n .PHONY: configure-stageautofeedback-isl maybe-configure-stageautofeedback-isl\n@@ -16837,7 +16837,7 @@ configure-stageautofeedback-isl:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautofeedback_CONFIGURE_FLAGS) \\\n-\t  --disable-shared @extra_isl_gmp_configure_flags@\n+\t  --disable-shared @extra_isl_gmp_configure_flags@  @host_libs_picflag@\n @endif isl-bootstrap\n \n \n@@ -29635,7 +29635,7 @@ configure-libiconv:\n \t  $$s/$$module_srcdir/configure \\\n \t  --srcdir=$${topdir}/$$module_srcdir \\\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n-\t  --target=${target_alias} --disable-shared \\\n+\t  --target=${target_alias} --disable-shared  @host_libs_picflag@ \\\n \t  || exit 1\n @endif libiconv\n \n@@ -29671,7 +29671,7 @@ configure-stage1-libiconv:\n \t  --target=${target_alias} \\\n \t   \\\n \t  $(STAGE1_CONFIGURE_FLAGS) \\\n-\t  --disable-shared\n+\t  --disable-shared  @host_libs_picflag@\n @endif libiconv-bootstrap\n \n .PHONY: configure-stage2-libiconv maybe-configure-stage2-libiconv\n@@ -29705,7 +29705,7 @@ configure-stage2-libiconv:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE2_CONFIGURE_FLAGS) \\\n-\t  --disable-shared\n+\t  --disable-shared  @host_libs_picflag@\n @endif libiconv-bootstrap\n \n .PHONY: configure-stage3-libiconv maybe-configure-stage3-libiconv\n@@ -29739,7 +29739,7 @@ configure-stage3-libiconv:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE3_CONFIGURE_FLAGS) \\\n-\t  --disable-shared\n+\t  --disable-shared  @host_libs_picflag@\n @endif libiconv-bootstrap\n \n .PHONY: configure-stage4-libiconv maybe-configure-stage4-libiconv\n@@ -29773,7 +29773,7 @@ configure-stage4-libiconv:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE4_CONFIGURE_FLAGS) \\\n-\t  --disable-shared\n+\t  --disable-shared  @host_libs_picflag@\n @endif libiconv-bootstrap\n \n .PHONY: configure-stageprofile-libiconv maybe-configure-stageprofile-libiconv\n@@ -29807,7 +29807,7 @@ configure-stageprofile-libiconv:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEprofile_CONFIGURE_FLAGS) \\\n-\t  --disable-shared\n+\t  --disable-shared  @host_libs_picflag@\n @endif libiconv-bootstrap\n \n .PHONY: configure-stagetrain-libiconv maybe-configure-stagetrain-libiconv\n@@ -29841,7 +29841,7 @@ configure-stagetrain-libiconv:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEtrain_CONFIGURE_FLAGS) \\\n-\t  --disable-shared\n+\t  --disable-shared  @host_libs_picflag@\n @endif libiconv-bootstrap\n \n .PHONY: configure-stagefeedback-libiconv maybe-configure-stagefeedback-libiconv\n@@ -29875,7 +29875,7 @@ configure-stagefeedback-libiconv:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEfeedback_CONFIGURE_FLAGS) \\\n-\t  --disable-shared\n+\t  --disable-shared  @host_libs_picflag@\n @endif libiconv-bootstrap\n \n .PHONY: configure-stageautoprofile-libiconv maybe-configure-stageautoprofile-libiconv\n@@ -29909,7 +29909,7 @@ configure-stageautoprofile-libiconv:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautoprofile_CONFIGURE_FLAGS) \\\n-\t  --disable-shared\n+\t  --disable-shared  @host_libs_picflag@\n @endif libiconv-bootstrap\n \n .PHONY: configure-stageautofeedback-libiconv maybe-configure-stageautofeedback-libiconv\n@@ -29943,7 +29943,7 @@ configure-stageautofeedback-libiconv:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautofeedback_CONFIGURE_FLAGS) \\\n-\t  --disable-shared\n+\t  --disable-shared  @host_libs_picflag@\n @endif libiconv-bootstrap\n \n \n@@ -33007,7 +33007,7 @@ configure-zlib:\n \t  $$s/$$module_srcdir/configure \\\n \t  --srcdir=$${topdir}/$$module_srcdir \\\n \t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n-\t  --target=${target_alias} @extra_host_zlib_configure_flags@ \\\n+\t  --target=${target_alias} @extra_host_zlib_configure_flags@ @host_libs_picflag@ \\\n \t  || exit 1\n @endif zlib\n \n@@ -33043,7 +33043,7 @@ configure-stage1-zlib:\n \t  --target=${target_alias} \\\n \t   \\\n \t  $(STAGE1_CONFIGURE_FLAGS) \\\n-\t  @extra_host_zlib_configure_flags@\n+\t  @extra_host_zlib_configure_flags@ @host_libs_picflag@\n @endif zlib-bootstrap\n \n .PHONY: configure-stage2-zlib maybe-configure-stage2-zlib\n@@ -33077,7 +33077,7 @@ configure-stage2-zlib:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE2_CONFIGURE_FLAGS) \\\n-\t  @extra_host_zlib_configure_flags@\n+\t  @extra_host_zlib_configure_flags@ @host_libs_picflag@\n @endif zlib-bootstrap\n \n .PHONY: configure-stage3-zlib maybe-configure-stage3-zlib\n@@ -33111,7 +33111,7 @@ configure-stage3-zlib:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE3_CONFIGURE_FLAGS) \\\n-\t  @extra_host_zlib_configure_flags@\n+\t  @extra_host_zlib_configure_flags@ @host_libs_picflag@\n @endif zlib-bootstrap\n \n .PHONY: configure-stage4-zlib maybe-configure-stage4-zlib\n@@ -33145,7 +33145,7 @@ configure-stage4-zlib:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGE4_CONFIGURE_FLAGS) \\\n-\t  @extra_host_zlib_configure_flags@\n+\t  @extra_host_zlib_configure_flags@ @host_libs_picflag@\n @endif zlib-bootstrap\n \n .PHONY: configure-stageprofile-zlib maybe-configure-stageprofile-zlib\n@@ -33179,7 +33179,7 @@ configure-stageprofile-zlib:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEprofile_CONFIGURE_FLAGS) \\\n-\t  @extra_host_zlib_configure_flags@\n+\t  @extra_host_zlib_configure_flags@ @host_libs_picflag@\n @endif zlib-bootstrap\n \n .PHONY: configure-stagetrain-zlib maybe-configure-stagetrain-zlib\n@@ -33213,7 +33213,7 @@ configure-stagetrain-zlib:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEtrain_CONFIGURE_FLAGS) \\\n-\t  @extra_host_zlib_configure_flags@\n+\t  @extra_host_zlib_configure_flags@ @host_libs_picflag@\n @endif zlib-bootstrap\n \n .PHONY: configure-stagefeedback-zlib maybe-configure-stagefeedback-zlib\n@@ -33247,7 +33247,7 @@ configure-stagefeedback-zlib:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEfeedback_CONFIGURE_FLAGS) \\\n-\t  @extra_host_zlib_configure_flags@\n+\t  @extra_host_zlib_configure_flags@ @host_libs_picflag@\n @endif zlib-bootstrap\n \n .PHONY: configure-stageautoprofile-zlib maybe-configure-stageautoprofile-zlib\n@@ -33281,7 +33281,7 @@ configure-stageautoprofile-zlib:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautoprofile_CONFIGURE_FLAGS) \\\n-\t  @extra_host_zlib_configure_flags@\n+\t  @extra_host_zlib_configure_flags@ @host_libs_picflag@\n @endif zlib-bootstrap\n \n .PHONY: configure-stageautofeedback-zlib maybe-configure-stageautofeedback-zlib\n@@ -33315,7 +33315,7 @@ configure-stageautofeedback-zlib:\n \t  --target=${target_alias} \\\n \t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n \t  $(STAGEautofeedback_CONFIGURE_FLAGS) \\\n-\t  @extra_host_zlib_configure_flags@\n+\t  @extra_host_zlib_configure_flags@ @host_libs_picflag@\n @endif zlib-bootstrap\n \n "}, {"sha": "6815216cf49b8d505b9338871f9c8e3de215df58", "filename": "configure", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05048fc29f0e36e814281270a19762c962c1d9d2/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05048fc29f0e36e814281270a19762c962c1d9d2/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=05048fc29f0e36e814281270a19762c962c1d9d2", "patch": "@@ -685,6 +685,7 @@ get_gcc_base_ver\n extra_host_zlib_configure_flags\n extra_host_libiberty_configure_flags\n stage1_languages\n+host_libs_picflag\n host_shared\n extra_linker_plugin_flags\n extra_linker_plugin_configure_flags\n@@ -8596,6 +8597,16 @@ fi\n \n \n \n+\n+# If we are building PIC/PIE host executables, and we are building dependent\n+# libs (e.g. GMP) in-tree those libs need to be configured to generate PIC\n+# code.\n+host_libs_picflag=\n+if test \"$host_shared\" = \"yes\";then\n+host_libs_picflag='--with-pic'\n+fi\n+\n+\n # By default, C and C++ are the only stage 1 languages.\n stage1_languages=,c,\n "}, {"sha": "83bbc4cd04d40247bd3b8e03ba5acc9e4df039b0", "filename": "configure.ac", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05048fc29f0e36e814281270a19762c962c1d9d2/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05048fc29f0e36e814281270a19762c962c1d9d2/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=05048fc29f0e36e814281270a19762c962c1d9d2", "patch": "@@ -1868,8 +1868,18 @@ AC_ARG_ENABLE(host-shared,\n   x86_64-*-darwin* | aarch64-*-darwin*) host_shared=yes ;;\n   *) host_shared=no ;;\n  esac])\n+\n AC_SUBST(host_shared)\n \n+# If we are building PIC/PIE host executables, and we are building dependent\n+# libs (e.g. GMP) in-tree those libs need to be configured to generate PIC\n+# code.\n+host_libs_picflag=\n+if test \"$host_shared\" = \"yes\";then\n+host_libs_picflag='--with-pic'\n+fi\n+AC_SUBST(host_libs_picflag)\n+\n # By default, C and C++ are the only stage 1 languages.\n stage1_languages=,c,\n "}]}