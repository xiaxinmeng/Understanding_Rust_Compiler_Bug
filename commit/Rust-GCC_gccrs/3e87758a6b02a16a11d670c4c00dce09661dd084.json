{"sha": "3e87758a6b02a16a11d670c4c00dce09661dd084", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2U4Nzc1OGE2YjAyYTE2YTExZDY3MGM0YzAwZGNlMDk2NjFkZDA4NA==", "commit": {"author": {"name": "Razya Ladelsky", "email": "razya@il.ibm.com", "date": "2007-01-10T10:21:50Z"}, "committer": {"name": "Razya Ladelsky", "email": "razya@gcc.gnu.org", "date": "2007-01-10T10:21:50Z"}, "message": "function.c (get_last_funcdef_no): New function.\n\n2007-01-10  Razya Ladelsky  <razya@il.ibm.com>\n\n        * function.c (get_last_funcdef_no): New function.\n        * function.h (get_last_funcdef_no): Declare.\n        * tree-inline.c (initialize_cfun): Add initialization.\n        (tree_function_versioning): Cleanup.\n\nFrom-SVN: r120638", "tree": {"sha": "033712e9795d7747396d5e1f15d66beefe6a1139", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/033712e9795d7747396d5e1f15d66beefe6a1139"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3e87758a6b02a16a11d670c4c00dce09661dd084", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e87758a6b02a16a11d670c4c00dce09661dd084", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e87758a6b02a16a11d670c4c00dce09661dd084", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e87758a6b02a16a11d670c4c00dce09661dd084/comments", "author": null, "committer": null, "parents": [{"sha": "9b718f81fd2014633e4e21eb30e9aca9370a7bdf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b718f81fd2014633e4e21eb30e9aca9370a7bdf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b718f81fd2014633e4e21eb30e9aca9370a7bdf"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "43e4b39164f1c083a38c1c95769124dde2fe4fc5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e87758a6b02a16a11d670c4c00dce09661dd084/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e87758a6b02a16a11d670c4c00dce09661dd084/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3e87758a6b02a16a11d670c4c00dce09661dd084", "patch": "@@ -1,3 +1,10 @@\n+2007-01-10  Razya Ladelsky  <razya@il.ibm.com>\n+        \n+        * function.c (get_last_funcdef_no): New function.\n+\t* function.h (get_last_funcdef_no): Declare. \n+        * tree-inline.c (initialize_cfun): Add initialization.\n+        (tree_function_versioning): Cleanup.\n+\t\n 2007-01-10  Jan Hubicka  <jh@suse.cz>\n \n \t* tree-inline.c (setup_one_parameter): Do not propagate into abnormal"}, {"sha": "e941c7c7140bbbd5835500eba08053a4d4585f33", "filename": "gcc/function.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e87758a6b02a16a11d670c4c00dce09661dd084/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e87758a6b02a16a11d670c4c00dce09661dd084/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=3e87758a6b02a16a11d670c4c00dce09661dd084", "patch": "@@ -3773,6 +3773,14 @@ debug_find_var_in_block_tree (tree var, tree block)\n   return NULL_TREE;\n }\n \f\n+\n+/* Return value of funcdef and increase it.  */\n+int\n+get_next_funcdef_no(void) \n+{\n+  return funcdef_no++;\n+}\n+\n /* Allocate a function structure for FNDECL and set its contents\n    to the defaults.  */\n \n@@ -3787,7 +3795,7 @@ allocate_struct_function (tree fndecl)\n   cfun->stack_alignment_needed = STACK_BOUNDARY;\n   cfun->preferred_stack_boundary = STACK_BOUNDARY;\n \n-  current_function_funcdef_no = funcdef_no++;\n+  current_function_funcdef_no = get_next_funcdef_no ();\n \n   cfun->function_frequency = FUNCTION_FREQUENCY_NORMAL;\n "}, {"sha": "e02077f6c63c36c76f8ea1acd703e3d6a3c8a54d", "filename": "gcc/function.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e87758a6b02a16a11d670c4c00dce09661dd084/gcc%2Ffunction.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e87758a6b02a16a11d670c4c00dce09661dd084/gcc%2Ffunction.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.h?ref=3e87758a6b02a16a11d670c4c00dce09661dd084", "patch": "@@ -599,4 +599,5 @@ extern bool reference_callee_copied (CUMULATIVE_ARGS *, enum machine_mode,\n \n extern void used_types_insert (tree);\n \n+extern int get_next_funcdef_no (void);\n #endif  /* GCC_FUNCTION_H */"}, {"sha": "3775585d5ecc2ee4398219f84b805ef28bf7f7f7", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e87758a6b02a16a11d670c4c00dce09661dd084/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e87758a6b02a16a11d670c4c00dce09661dd084/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=3e87758a6b02a16a11d670c4c00dce09661dd084", "patch": "@@ -1080,6 +1080,7 @@ initialize_cfun (tree new_fndecl, tree callee_fndecl, gcov_type count,\n   /* Register specific tree functions.  */\n   tree_register_cfg_hooks ();\n   *new_cfun = *DECL_STRUCT_FUNCTION (callee_fndecl);\n+  new_cfun->funcdef_no = get_next_funcdef_no ();\n   VALUE_HISTOGRAMS (new_cfun) = NULL;\n   new_cfun->unexpanded_var_list = NULL;\n   new_cfun->cfg = NULL;\n@@ -3303,7 +3304,13 @@ tree_function_versioning (tree old_decl, tree new_decl, varray_type tree_map,\n   fold_cond_expr_cond ();\n   if (gimple_in_ssa_p (cfun))\n     {\n+      free_dominance_info (CDI_DOMINATORS);\n+      free_dominance_info (CDI_POST_DOMINATORS);\n+      delete_unreachable_blocks ();\n       update_ssa (TODO_update_ssa);\n+      fold_cond_expr_cond ();\n+      if (need_ssa_update_p ())\n+        update_ssa (TODO_update_ssa);\n     }\n   free_dominance_info (CDI_DOMINATORS);\n   free_dominance_info (CDI_POST_DOMINATORS);"}]}