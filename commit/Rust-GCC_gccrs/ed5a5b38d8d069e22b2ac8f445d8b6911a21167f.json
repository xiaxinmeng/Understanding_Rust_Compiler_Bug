{"sha": "ed5a5b38d8d069e22b2ac8f445d8b6911a21167f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQ1YTViMzhkOGQwNjllMjJiMmFjOGY0NDVkOGI2OTExYTIxMTY3Zg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2015-02-12T09:48:44Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2015-02-12T09:48:44Z"}, "message": "re PR sanitizer/65019 (Compare debug failure with -fsanitize=alignment,object-size,vptr -O3)\n\n\tPR sanitizer/65019\n\t* ubsan.c (ubsan_expand_objsize_ifn): Always return true.\n\n\t* g++.dg/ubsan/pr65019.C: New test.\n\nFrom-SVN: r220641", "tree": {"sha": "5f4b92144de1a854564ce87e3af8408e13428a5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5f4b92144de1a854564ce87e3af8408e13428a5e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "01f834e33c2635b2e1ac7f8bb3bd0007c83a094d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01f834e33c2635b2e1ac7f8bb3bd0007c83a094d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01f834e33c2635b2e1ac7f8bb3bd0007c83a094d"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "60af263eebdf3c2296e7da55f122d567ed1404a8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ed5a5b38d8d069e22b2ac8f445d8b6911a21167f", "patch": "@@ -1,5 +1,8 @@\n 2015-02-12  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR sanitizer/65019\n+\t* ubsan.c (ubsan_expand_objsize_ifn): Always return true.\n+\n \tPR tree-optimization/65014\n \t* fold-const.c (fold_binary_loc): When creating {L,R}ROTATE_EXPR,\n \tuse original second operand of arg0 or arg1 instead of"}, {"sha": "01127e953c59b22acc4cbd4015ab17cc36161928", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ed5a5b38d8d069e22b2ac8f445d8b6911a21167f", "patch": "@@ -1,5 +1,8 @@\n 2015-02-12  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR sanitizer/65019\n+\t* g++.dg/ubsan/pr65019.C: New test.\n+\n \tPR tree-optimization/65014\n \t* gcc.c-torture/compile/pr65014.c: New test.\n "}, {"sha": "a7f21a7d241bd28d7a936649574bb85e226d1461", "filename": "gcc/testsuite/g++.dg/ubsan/pr65019.C", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr65019.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr65019.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr65019.C?ref=ed5a5b38d8d069e22b2ac8f445d8b6911a21167f", "patch": "@@ -0,0 +1,24 @@\n+// PR sanitizer/65019\n+// { dg-do compile }\n+// { dg-options \"-fsanitize=alignment,object-size,vptr -std=c++11 -O2 -fcompare-debug\" }\n+\n+struct A { };\n+struct B { };\n+struct C final {\n+  C (const A &, int);\n+  static B *foo (const A &, int = 1);\n+  virtual ~C ();\n+  void *c;\n+};\n+\n+B *\n+C::foo (const A &x, int y)\n+{\n+  C *d = new C (x, y);\n+  if (d->c == nullptr)\n+    delete d;\n+}\n+\n+C::~C ()\n+{\n+}"}, {"sha": "fc3352f99495eaf52353be33eead0320713e3bc0", "filename": "gcc/ubsan.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f/gcc%2Fubsan.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed5a5b38d8d069e22b2ac8f445d8b6911a21167f/gcc%2Fubsan.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fubsan.c?ref=ed5a5b38d8d069e22b2ac8f445d8b6911a21167f", "patch": "@@ -987,7 +987,7 @@ ubsan_expand_objsize_ifn (gimple_stmt_iterator *gsi)\n   /* Get rid of the UBSAN_OBJECT_SIZE call from the IR.  */\n   unlink_stmt_vdef (stmt);\n   gsi_remove (&gsi_orig, true);\n-  return gsi_end_p (*gsi);\n+  return true;\n }\n \n /* Cached __ubsan_vptr_type_cache decl.  */"}]}