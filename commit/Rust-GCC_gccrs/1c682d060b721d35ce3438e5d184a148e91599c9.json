{"sha": "1c682d060b721d35ce3438e5d184a148e91599c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWM2ODJkMDYwYjcyMWQzNWNlMzQzOGU1ZDE4NGExNDhlOTE1OTljOQ==", "commit": {"author": {"name": "Fabien Ch\u00eane", "email": "fabien@gcc.gnu.org", "date": "2011-05-09T17:42:21Z"}, "committer": {"name": "Fabien Ch\u00eane", "email": "fabien@gcc.gnu.org", "date": "2011-05-09T17:42:21Z"}, "message": "Fix PR C++/48859\n\nFrom-SVN: r173583", "tree": {"sha": "e39462e9bc904dc0a764e8e128f8aae151b6ccc4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e39462e9bc904dc0a764e8e128f8aae151b6ccc4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1c682d060b721d35ce3438e5d184a148e91599c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c682d060b721d35ce3438e5d184a148e91599c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c682d060b721d35ce3438e5d184a148e91599c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c682d060b721d35ce3438e5d184a148e91599c9/comments", "author": null, "committer": null, "parents": [{"sha": "03808d178a46df619f8470211c4cff9946a51fd4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03808d178a46df619f8470211c4cff9946a51fd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03808d178a46df619f8470211c4cff9946a51fd4"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "04096deee9cda8e0b5b948134c152e030e37eae4", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c682d060b721d35ce3438e5d184a148e91599c9/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c682d060b721d35ce3438e5d184a148e91599c9/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1c682d060b721d35ce3438e5d184a148e91599c9", "patch": "@@ -1,3 +1,9 @@\n+2011-05-07  Fabien Ch\u00eane  <fabien@gcc.gnu.org>\n+\t\n+\tPR c++/48859\n+\t* init.c (diagnose_uninitialized_cst_or_ref_member_1): stop the\n+\trecursion if there is user defined constructor.\n+\n 2011-05-09  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/34772"}, {"sha": "3eb804dd56a4129d6667baa86477459bf16dd8fd", "filename": "gcc/cp/init.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c682d060b721d35ce3438e5d184a148e91599c9/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c682d060b721d35ce3438e5d184a148e91599c9/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=1c682d060b721d35ce3438e5d184a148e91599c9", "patch": "@@ -1915,6 +1915,9 @@ diagnose_uninitialized_cst_or_ref_member_1 (tree type, tree origin,\n \n       field_type = strip_array_types (TREE_TYPE (field));\n \n+      if (type_has_user_provided_constructor (field_type))\n+\tcontinue;\n+\n       if (TREE_CODE (field_type) == REFERENCE_TYPE)\n \t{\n \t  ++ error_count;"}, {"sha": "04885cd76272b0e16011268481d5aca7c1147db9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c682d060b721d35ce3438e5d184a148e91599c9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c682d060b721d35ce3438e5d184a148e91599c9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1c682d060b721d35ce3438e5d184a148e91599c9", "patch": "@@ -1,3 +1,7 @@\n+2001-05-07  Fabien Ch\u00eane  <fabien@gcc.gnu.org>\n+\tPR c++/48859\n+\t* g++.dg/init/pr48859.C: New.\n+\n 2011-05-09  Jason Merrill  <jason@redhat.com>\n \n \t* gcc.dg/gcc.dg/uninit-D.c: Move to c-c++-common."}, {"sha": "8ef5c2ee4a44ed637c4823f18f92b6a84e6e20a3", "filename": "gcc/testsuite/g++.dg/init/pr48859.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c682d060b721d35ce3438e5d184a148e91599c9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fpr48859.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c682d060b721d35ce3438e5d184a148e91599c9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fpr48859.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fpr48859.C?ref=1c682d060b721d35ce3438e5d184a148e91599c9", "patch": "@@ -0,0 +1,14 @@\n+// PR c++/48859\n+// { dg-do compile }\n+\n+struct HasConstructor {\n+  HasConstructor() {}\n+};\n+\n+class ConstMember {\n+  const HasConstructor empty_;\n+};\n+\n+void foo() {\n+  new ConstMember;\n+}"}]}