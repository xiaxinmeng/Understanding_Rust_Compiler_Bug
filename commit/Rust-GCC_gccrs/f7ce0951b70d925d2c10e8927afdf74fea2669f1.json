{"sha": "f7ce0951b70d925d2c10e8927afdf74fea2669f1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjdjZTA5NTFiNzBkOTI1ZDJjMTBlODkyN2FmZGY3NGZlYTI2NjlmMQ==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2009-11-30T22:06:19Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2009-11-30T22:06:19Z"}, "message": "function.c (instantiate_virtual_regs_in_insn): Copy to new reg before forcing mode.\n\n2009-11-30  Steve Ellcey  <sje@cup.hp.com>\n\t    Jakub Jelinek <jakub@redhat.com>\n\n\t* function.c (instantiate_virtual_regs_in_insn): Copy to new reg\n\tbefore forcing mode.\n\nCo-Authored-By: Jakub Jelinek <jakub@redhat.com>\n\nFrom-SVN: r154843", "tree": {"sha": "fb16f209e57818115437c91ffbfdfdfbcbf18c3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb16f209e57818115437c91ffbfdfdfbcbf18c3d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f7ce0951b70d925d2c10e8927afdf74fea2669f1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7ce0951b70d925d2c10e8927afdf74fea2669f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7ce0951b70d925d2c10e8927afdf74fea2669f1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7ce0951b70d925d2c10e8927afdf74fea2669f1/comments", "author": null, "committer": null, "parents": [{"sha": "d64728cf05af8eeb2c26c9cc97f8cbb774b39093", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d64728cf05af8eeb2c26c9cc97f8cbb774b39093", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d64728cf05af8eeb2c26c9cc97f8cbb774b39093"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "2ded17f3a0b64417d78b9445d81f0c4e117b9562", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7ce0951b70d925d2c10e8927afdf74fea2669f1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7ce0951b70d925d2c10e8927afdf74fea2669f1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f7ce0951b70d925d2c10e8927afdf74fea2669f1", "patch": "@@ -1,3 +1,9 @@\n+2009-11-30  Steve Ellcey  <sje@cup.hp.com>\n+\t    Jakub Jelinek <jakub@redhat.com>\n+\n+\t* function.c (instantiate_virtual_regs_in_insn): Copy to new reg\n+\tbefore forcing mode.\n+\n 2009-11-30  Anatoly Sokolov  <aesok@post.ru>\n \n \t* config/sh/sh.c (sh_promote_prototypes): Make static."}, {"sha": "b8042d08551897be55660ba4098f00b1694a8fc4", "filename": "gcc/function.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7ce0951b70d925d2c10e8927afdf74fea2669f1/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7ce0951b70d925d2c10e8927afdf74fea2669f1/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=f7ce0951b70d925d2c10e8927afdf74fea2669f1", "patch": "@@ -1598,7 +1598,13 @@ instantiate_virtual_regs_in_insn (rtx insn)\n       if (!safe_insn_predicate (insn_code, i, x))\n \t{\n \t  start_sequence ();\n-\t  x = force_reg (insn_data[insn_code].operand[i].mode, x);\n+\t  if (REG_P (x))\n+\t    {\n+\t      gcc_assert (REGNO (x) <= LAST_VIRTUAL_REGISTER);\n+\t      x = copy_to_reg (x);\n+\t    }\n+\t  else\n+\t    x = force_reg (insn_data[insn_code].operand[i].mode, x);\n \t  seq = get_insns ();\n \t  end_sequence ();\n \t  if (seq)"}]}