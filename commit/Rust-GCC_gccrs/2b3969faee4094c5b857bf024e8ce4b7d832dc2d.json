{"sha": "2b3969faee4094c5b857bf024e8ce4b7d832dc2d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmIzOTY5ZmFlZTQwOTRjNWI4NTdiZjAyNGU4Y2U0YjdkODMyZGMyZA==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2006-08-14T11:55:52Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2006-08-14T11:55:52Z"}, "message": "re PR rtl-optimization/28634 (rounding problem with -fdelayed-branch on hppa/mips)\n\ngcc/\n\tPR rtl-optimization/28634\n\t* reorg.c (fill_slots_from_thread): Do not assume A + X - X == A\n\tfor floating-point modes unless flag_unsafe_math_optimizations.\n\ngcc/testsuite/\n\tPR rtl-optimization/28634\n\t* gcc.c-torture/execute/ieee/pr28634.c: New test.\n\nFrom-SVN: r116124", "tree": {"sha": "708c5891d7f7a0a2c10d910822ab1ea133ae9978", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/708c5891d7f7a0a2c10d910822ab1ea133ae9978"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b3969faee4094c5b857bf024e8ce4b7d832dc2d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b3969faee4094c5b857bf024e8ce4b7d832dc2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b3969faee4094c5b857bf024e8ce4b7d832dc2d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b3969faee4094c5b857bf024e8ce4b7d832dc2d/comments", "author": null, "committer": null, "parents": [{"sha": "62eed976f51e31e2998e282ae3aeaa9d615c948b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62eed976f51e31e2998e282ae3aeaa9d615c948b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62eed976f51e31e2998e282ae3aeaa9d615c948b"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "8a53adee42f3c6b8c42274b0273b0dea17ceae85", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b3969faee4094c5b857bf024e8ce4b7d832dc2d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b3969faee4094c5b857bf024e8ce4b7d832dc2d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2b3969faee4094c5b857bf024e8ce4b7d832dc2d", "patch": "@@ -1,3 +1,9 @@\n+2006-08-14  Richard Sandiford  <richard@codesourcery.com>\n+\n+\tPR rtl-optimization/28634\n+\t* reorg.c (fill_slots_from_thread): Do not assume A + X - X == A\n+\tfor floating-point modes unless flag_unsafe_math_optimizations.\n+\n 2006-08-13  Alexandre Oliva  <aoliva@redhat.com>\n \t    Andrew Pinski  <pinskia@physics.uc.edu>\n "}, {"sha": "8c097dca41255f75c0d20ebab7956a6cae8bc659", "filename": "gcc/reorg.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b3969faee4094c5b857bf024e8ce4b7d832dc2d/gcc%2Freorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b3969faee4094c5b857bf024e8ce4b7d832dc2d/gcc%2Freorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freorg.c?ref=2b3969faee4094c5b857bf024e8ce4b7d832dc2d", "patch": "@@ -2817,6 +2817,8 @@ fill_slots_from_thread (rtx insn, rtx condition, rtx thread,\n       dest = SET_DEST (pat), src = SET_SRC (pat);\n       if ((GET_CODE (src) == PLUS || GET_CODE (src) == MINUS)\n \t  && rtx_equal_p (XEXP (src, 0), dest)\n+\t  && (!FLOAT_MODE_P (GET_MODE (src))\n+\t      || flag_unsafe_math_optimizations)\n \t  && ! reg_overlap_mentioned_p (dest, XEXP (src, 1))\n \t  && ! side_effects_p (pat))\n \t{"}, {"sha": "7481db0ec6d3a5e4bc8098a8de7ea3c900fc3c9b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b3969faee4094c5b857bf024e8ce4b7d832dc2d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b3969faee4094c5b857bf024e8ce4b7d832dc2d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2b3969faee4094c5b857bf024e8ce4b7d832dc2d", "patch": "@@ -1,3 +1,8 @@\n+2006-08-14  Richard Sandiford  <richard@codesourcery.com>\n+\n+\tPR rtl-optimization/28634\n+\t* gcc.c-torture/execute/ieee/pr28634.c: New test.\n+\n 2006-08-13  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR c/27184"}, {"sha": "a0c525497d72815278629e16d7df45bfd27e304d", "filename": "gcc/testsuite/gcc.c-torture/execute/ieee/pr28634.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b3969faee4094c5b857bf024e8ce4b7d832dc2d/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fieee%2Fpr28634.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b3969faee4094c5b857bf024e8ce4b7d832dc2d/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fieee%2Fpr28634.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fieee%2Fpr28634.c?ref=2b3969faee4094c5b857bf024e8ce4b7d832dc2d", "patch": "@@ -0,0 +1,15 @@\n+/* PR rtl-optimization/28634.  On targets with delayed branches,\n+   dbr_schedule could do the next iteration's addition in the\n+   branch delay slot, then subtract the value again if the branch\n+   wasn't taken.  This can lead to rounding errors.  */\n+double x = -0x1.0p53;\n+double y = 1;\n+int\n+main (void)\n+{\n+  while (y > 0)\n+    y += x;\n+  if (y != x + 1)\n+    abort ();\n+  exit (0);\n+}"}]}