{"sha": "cca18f3bd5e146516dc92c8a4940d0cfebeae08c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NhMThmM2JkNWUxNDY1MTZkYzkyYzhhNDk0MGQwY2ZlYmVhZTA4Yw==", "commit": {"author": {"name": "Claudiu Zissulescu", "email": "claziss@synopsys.com", "date": "2019-11-06T13:31:07Z"}, "committer": {"name": "Claudiu Zissulescu", "email": "claziss@gcc.gnu.org", "date": "2019-11-06T13:31:07Z"}, "message": "[ARC] Cleanup sign/zero extend patterns\n\nClean up sign/zero extend patterns.\n\ngcc/\nxxxx-xx-xx  Claudiu Zissulescu  <claziss@synopsys.com>\n\n\t* config/arc/arc.md (zero_extendqihi2_i): Cleanup pattern.\n\t(zero_extendqisi2_ac): Likewise.\n\t(zero_extendhisi2_i): Likewise.\n\t(extendqihi2_i): Likewise.\n\t(extendqisi2_ac): Likewise.\n\t(extendhisi2_i): Likewise.\n\nFrom-SVN: r277883", "tree": {"sha": "c73739439bda626c43064da77a70fda8fa37ac8a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c73739439bda626c43064da77a70fda8fa37ac8a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cca18f3bd5e146516dc92c8a4940d0cfebeae08c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cca18f3bd5e146516dc92c8a4940d0cfebeae08c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cca18f3bd5e146516dc92c8a4940d0cfebeae08c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cca18f3bd5e146516dc92c8a4940d0cfebeae08c/comments", "author": {"login": "claziss", "id": 2761368, "node_id": "MDQ6VXNlcjI3NjEzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claziss", "html_url": "https://github.com/claziss", "followers_url": "https://api.github.com/users/claziss/followers", "following_url": "https://api.github.com/users/claziss/following{/other_user}", "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}", "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claziss/subscriptions", "organizations_url": "https://api.github.com/users/claziss/orgs", "repos_url": "https://api.github.com/users/claziss/repos", "events_url": "https://api.github.com/users/claziss/events{/privacy}", "received_events_url": "https://api.github.com/users/claziss/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "06af1f1a0def9de076ec629ea634122f15882ce6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06af1f1a0def9de076ec629ea634122f15882ce6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06af1f1a0def9de076ec629ea634122f15882ce6"}], "stats": {"total": 114, "additions": 65, "deletions": 49}, "files": [{"sha": "0162a7f61f9584bbcd141e2be5ecbbb65ded40f2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cca18f3bd5e146516dc92c8a4940d0cfebeae08c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cca18f3bd5e146516dc92c8a4940d0cfebeae08c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cca18f3bd5e146516dc92c8a4940d0cfebeae08c", "patch": "@@ -1,3 +1,12 @@\n+2019-11-06  Claudiu Zissulescu  <claziss@synopsys.com>\n+\n+\t* config/arc/arc.md (zero_extendqihi2_i): Cleanup pattern.\n+\t(zero_extendqisi2_ac): Likewise.\n+\t(zero_extendhisi2_i): Likewise.\n+\t(extendqihi2_i): Likewise.\n+\t(extendqisi2_ac): Likewise.\n+\t(extendhisi2_i): Likewise.\n+\n 2019-11-06  Richard Biener  <rguenther@suse.de>\n \n \t* tree-vect-loop.c (vectorizable_reduction): Remember reduction"}, {"sha": "67932c4e3a0b3427289088a1fa40c3dd25619d08", "filename": "gcc/config/arc/arc.md", "status": "modified", "additions": 56, "deletions": 49, "changes": 105, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cca18f3bd5e146516dc92c8a4940d0cfebeae08c/gcc%2Fconfig%2Farc%2Farc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cca18f3bd5e146516dc92c8a4940d0cfebeae08c/gcc%2Fconfig%2Farc%2Farc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farc%2Farc.md?ref=cca18f3bd5e146516dc92c8a4940d0cfebeae08c", "patch": "@@ -1801,18 +1801,22 @@ core_3, archs4x, archs4xd, archs4xd_slow\"\n   [(set_attr \"type\" \"cmove,cmove\")\n    (set_attr \"length\" \"8,16\")])\n \n+;; -------------------------------------------------------------------\n+;; Sign/Zero extension\n+;; -------------------------------------------------------------------\n \n (define_insn \"*zero_extendqihi2_i\"\n-  [(set (match_operand:HI 0 \"dest_reg_operand\" \"=Rcq,Rcq#q,Rcw,w,r,r\")\n-\t(zero_extend:HI (match_operand:QI 1 \"nonvol_nonimm_operand\" \"0,Rcq#q,0,c,Ucm,m\")))]\n+  [(set (match_operand:HI 0 \"dest_reg_operand\" \"=q,q,r,r,r,r\")\n+\t(zero_extend:HI\n+\t (match_operand:QI 1 \"nonvol_nonimm_operand\" \"0,q,0,r,Ucm,m\")))]\n   \"\"\n   \"@\n-   extb%? %0,%1%&\n-   extb%? %0,%1%&\n-   bmsk%? %0,%1,7\n-   extb %0,%1\n-   xldb%U1 %0,%1\n-   ldb%U1 %0,%1\"\n+   extb%?\\\\t%0,%1\n+   extb%?\\\\t%0,%1\n+   bmsk%?\\\\t%0,%1,7\n+   extb\\\\t%0,%1\n+   xldb%U1\\\\t%0,%1\n+   ldb%U1\\\\t%0,%1\"\n   [(set_attr \"type\" \"unary,unary,unary,unary,load,load\")\n    (set_attr \"iscompact\" \"maybe,true,false,false,false,false\")\n    (set_attr \"predicable\" \"no,no,yes,no,no,no\")])\n@@ -1825,18 +1829,19 @@ core_3, archs4x, archs4xd, archs4xd_slow\"\n )\n \n (define_insn \"*zero_extendqisi2_ac\"\n-  [(set (match_operand:SI 0 \"dest_reg_operand\"    \"=Rcq,Rcq#q,Rcw,w,qRcq,!*x,r,r\")\n-\t(zero_extend:SI (match_operand:QI 1 \"nonvol_nonimm_operand\" \"0,Rcq#q,0,c,T,Usd,Ucm,m\")))]\n+  [(set (match_operand:SI 0 \"dest_reg_operand\"    \"=q,q,r,r,q,!*x,r,r\")\n+\t(zero_extend:SI\n+\t (match_operand:QI 1 \"nonvol_nonimm_operand\" \"0,q,0,r,T,Usd,Ucm,m\")))]\n   \"\"\n   \"@\n-   extb%? %0,%1%&\n-   extb%? %0,%1%&\n-   bmsk%? %0,%1,7\n-   extb %0,%1\n-   ldb%? %0,%1%&\n-   ldb%? %0,%1%&\n-   xldb%U1 %0,%1\n-   ldb%U1 %0,%1\"\n+   extb%?\\\\t%0,%1\n+   extb%?\\\\t%0,%1\n+   bmsk%?\\\\t%0,%1,7\n+   extb\\\\t%0,%1\n+   ldb%?\\\\t%0,%1\n+   ldb%?\\\\t%0,%1\n+   xldb%U1\\\\t%0,%1\n+   ldb%U1\\\\t%0,%1\"\n   [(set_attr \"type\" \"unary,unary,unary,unary,load,load,load,load\")\n    (set_attr \"iscompact\" \"maybe,true,false,false,true,true,false,false\")\n    (set_attr \"predicable\" \"no,no,yes,no,no,no,no,no\")])\n@@ -1849,23 +1854,23 @@ core_3, archs4x, archs4xd, archs4xd_slow\"\n )\n \n (define_insn \"*zero_extendhisi2_i\"\n-  [(set (match_operand:SI 0 \"dest_reg_operand\" \"=Rcq,q,Rcw,w,!x,Rcqq,r,r\")\n-\t(zero_extend:SI (match_operand:HI 1 \"nonvol_nonimm_operand\" \"0,q,0,c,Usd,T,Ucm,m\")))]\n+  [(set (match_operand:SI 0 \"dest_reg_operand\" \"=q,q,r,r,!x,q,r,r\")\n+\t(zero_extend:SI\n+\t (match_operand:HI 1 \"nonvol_nonimm_operand\" \"0,q,0,r,Usd,T,Ucm,m\")))]\n   \"\"\n   \"@\n-   ext%_%? %0,%1%&\n-   ext%_%? %0,%1%&\n-   bmsk%? %0,%1,15\n-   ext%_ %0,%1\n-   ld%_%? %0,%1\n-   ld%_%? %0,%1\n-   * return TARGET_EM ? \\\"xldh%U1%V1 %0,%1\\\" : \\\"xldw%U1 %0,%1\\\";\n-   ld%_%U1%V1 %0,%1\"\n+   ext%_%?\\\\t%0,%1\n+   ext%_%?\\\\t%0,%1\n+   bmsk%?\\\\t%0,%1,15\n+   ext%_\\\\t%0,%1\n+   ld%_%?\\\\t%0,%1\n+   ld%_%?\\\\t%0,%1\n+   xldw%U1\\\\t%0,%1\n+   ld%_%U1%V1\\\\t%0,%1\"\n   [(set_attr \"type\" \"unary,unary,unary,unary,load,load,load,load\")\n    (set_attr \"iscompact\" \"maybe,true,false,false,true,true,false,false\")\n    (set_attr \"predicable\" \"no,no,yes,no,no,no,no,no\")])\n \n-\n (define_expand \"zero_extendhisi2\"\n   [(set (match_operand:SI 0 \"dest_reg_operand\" \"\")\n \t(zero_extend:SI (match_operand:HI 1 \"nonvol_nonimm_operand\" \"\")))]\n@@ -1876,19 +1881,19 @@ core_3, archs4x, archs4xd, archs4xd_slow\"\n ;; Sign extension instructions.\n \n (define_insn \"*extendqihi2_i\"\n-  [(set (match_operand:HI 0 \"dest_reg_operand\" \"=Rcqq,r,r,r\")\n-\t(sign_extend:HI (match_operand:QI 1 \"nonvol_nonimm_operand\" \"Rcqq,r,Uex,m\")))]\n+  [(set (match_operand:HI 0 \"dest_reg_operand\" \"=q,r,r,r\")\n+\t(sign_extend:HI\n+\t (match_operand:QI 1 \"nonvol_nonimm_operand\" \"q,r,Uex,m\")))]\n   \"\"\n   \"@\n-   sexb%? %0,%1%&\n-   sexb %0,%1\n-   ldb.x%U1 %0,%1\n-   ldb.x%U1 %0,%1\"\n+   sexb%?\\\\t%0,%1\n+   sexb\\\\t%0,%1\n+   ldb.x%U1\\\\t%0,%1\n+   ldb.x%U1\\\\t%0,%1\"\n   [(set_attr \"type\" \"unary,unary,load,load\")\n    (set_attr \"iscompact\" \"true,false,false,false\")\n    (set_attr \"length\" \"*,*,*,8\")])\n \n-\n (define_expand \"extendqihi2\"\n   [(set (match_operand:HI 0 \"dest_reg_operand\" \"\")\n \t(sign_extend:HI (match_operand:QI 1 \"nonvol_nonimm_operand\" \"\")))]\n@@ -1897,14 +1902,15 @@ core_3, archs4x, archs4xd, archs4xd_slow\"\n )\n \n (define_insn \"*extendqisi2_ac\"\n-  [(set (match_operand:SI 0 \"dest_reg_operand\" \"=Rcqq,w,r,r\")\n-\t(sign_extend:SI (match_operand:QI 1 \"nonvol_nonimm_operand\" \"Rcqq,c,Uex,m\")))]\n+  [(set (match_operand:SI 0 \"dest_reg_operand\" \"=q,r,r,r\")\n+\t(sign_extend:SI\n+\t (match_operand:QI 1 \"nonvol_nonimm_operand\" \"q,r,Uex,m\")))]\n   \"\"\n   \"@\n-   sexb%? %0,%1%&\n-   sexb %0,%1\n-   ldb.x%U1 %0,%1\n-   ldb.x%U1 %0,%1\"\n+   sexb%?\\\\t%0,%1\n+   sexb\\\\t%0,%1\n+   ldb.x%U1\\\\t%0,%1\n+   ldb.x%U1\\\\t%0,%1\"\n   [(set_attr \"type\" \"unary,unary,load,load\")\n    (set_attr \"iscompact\" \"true,false,false,false\")\n    (set_attr \"length\" \"*,*,*,8\")])\n@@ -1917,15 +1923,16 @@ core_3, archs4x, archs4xd, archs4xd_slow\"\n )\n \n (define_insn \"*extendhisi2_i\"\n-  [(set (match_operand:SI 0 \"dest_reg_operand\" \"=Rcqq,w,Rcqq,r,r\")\n-\t(sign_extend:SI (match_operand:HI 1 \"nonvol_nonimm_operand\" \"Rcqq,c,Ucd,Uex,m\")))]\n+  [(set (match_operand:SI 0 \"dest_reg_operand\" \"=q,r,q,r,r\")\n+\t(sign_extend:SI\n+\t (match_operand:HI 1 \"nonvol_nonimm_operand\" \"q,r,Ucd,Uex,m\")))]\n   \"\"\n   \"@\n-   sex%_%? %0,%1%&\n-   sex%_ %0,%1\n-   ldh%?.x %0,%1%&\n-   ld%_.x%U1%V1 %0,%1\n-   ld%_.x%U1%V1 %0,%1\"\n+   sex%_%?\\\\t%0,%1\n+   sex%_\\\\t%0,%1\n+   ldh%?.x\\\\t%0,%1%&\n+   ld%_.x%U1%V1\\\\t%0,%1\n+   ld%_.x%U1%V1\\\\t%0,%1\"\n   [(set_attr \"type\" \"unary,unary,load,load,load\")\n    (set_attr \"iscompact\" \"true,false,true,false,false\")\n    (set_attr \"length\" \"*,*,*,4,8\")])"}]}