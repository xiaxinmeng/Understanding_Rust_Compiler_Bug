{"sha": "43ee49e8f39d5d3d678f742a2d2e89f073632835", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDNlZTQ5ZThmMzlkNWQzZDY3OGY3NDJhMmQyZTg5ZjA3MzYzMjgzNQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchell@usa.net", "date": "1998-04-22T13:23:32Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-04-22T13:23:32Z"}, "message": "class.c (finish_struct): Set TREE_PRIVATE and TREE_PROTECTED for the DECL_RESULTs of a member...\n\n\t* class.c (finish_struct): Set TREE_PRIVATE and TREE_PROTECTED for\n\tthe DECL_RESULTs of a member TEMPLATE_DECL, not just the\n\tTEMPLATE_DECL.\n\nFrom-SVN: r19376", "tree": {"sha": "a707e26881caf1023846c1db55586d07793a5745", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a707e26881caf1023846c1db55586d07793a5745"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/43ee49e8f39d5d3d678f742a2d2e89f073632835", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43ee49e8f39d5d3d678f742a2d2e89f073632835", "html_url": "https://github.com/Rust-GCC/gccrs/commit/43ee49e8f39d5d3d678f742a2d2e89f073632835", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43ee49e8f39d5d3d678f742a2d2e89f073632835/comments", "author": null, "committer": null, "parents": [{"sha": "27eef9cececccd37254c9106b02fd965369650eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27eef9cececccd37254c9106b02fd965369650eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27eef9cececccd37254c9106b02fd965369650eb"}], "stats": {"total": 33, "additions": 33, "deletions": 0}, "files": [{"sha": "20725d820aeaa91b9dbe9dc7eef99fad9f5a4a7b", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43ee49e8f39d5d3d678f742a2d2e89f073632835/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43ee49e8f39d5d3d678f742a2d2e89f073632835/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=43ee49e8f39d5d3d678f742a2d2e89f073632835", "patch": "@@ -1,3 +1,9 @@\n+Wed Apr 22 13:24:48 1998  Mark Mitchell  <mmitchell@usa.net>\n+\n+\t* class.c (finish_struct): Set TREE_PRIVATE and TREE_PROTECTED for\n+\tthe DECL_RESULTs of a member TEMPLATE_DECL, not just the\n+\tTEMPLATE_DECL.\n+\n Tue Apr 21 22:00:04 1998  Mark Mitchell  <mmitchell@usa.net>\n \n \t* errfn.c (cp_thing): Use xrealloc, not xmalloc, to copy memory."}, {"sha": "fc1c675ff78fc1678a5b1f37d27cbad7298f3ac7", "filename": "gcc/cp/class.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43ee49e8f39d5d3d678f742a2d2e89f073632835/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43ee49e8f39d5d3d678f742a2d2e89f073632835/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=43ee49e8f39d5d3d678f742a2d2e89f073632835", "patch": "@@ -4318,6 +4318,12 @@ finish_struct (t, list_of_fieldlists, attributes, warn_anon)\n \t  TREE_PRIVATE (x) = access == access_private_node;\n \t  TREE_PROTECTED (x) = access == access_protected_node;\n \n+\t  if (TREE_CODE (x) == TEMPLATE_DECL)\n+\t    {\n+\t      TREE_PRIVATE (DECL_RESULT (x)) = TREE_PRIVATE (x);\n+\t      TREE_PROTECTED (DECL_RESULT (x)) = TREE_PROTECTED (x);\n+\t    }\n+\n \t  /* Check for inconsistent use of this name in the class body.\n              Enums, types and static vars have already been checked.  */\n \t  if (TREE_CODE (x) != TYPE_DECL && TREE_CODE (x) != USING_DECL"}, {"sha": "e99103f40e6d343916825d9ff36b24b1c0db674e", "filename": "gcc/testsuite/g++.old-deja/g++.pt/memtemp74.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43ee49e8f39d5d3d678f742a2d2e89f073632835/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fmemtemp74.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43ee49e8f39d5d3d678f742a2d2e89f073632835/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fmemtemp74.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fmemtemp74.C?ref=43ee49e8f39d5d3d678f742a2d2e89f073632835", "patch": "@@ -0,0 +1,21 @@\n+// Build don't link:\n+\n+template <class T>\n+class S\n+{\n+protected:\n+  template <class U>\n+  void f(U); // ERROR - is protected\n+\n+private:\n+  template <class U>\n+  void g(U); // ERROR - is private\n+};\n+\n+\n+void f()\n+{\n+  S<double> s;\n+  s.f(3); // ERROR - within this context\n+  s.g(2.0); // ERROR - within this context\n+}"}]}