{"sha": "b0213198c922e82a632e1e78aa08dada252732ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjAyMTMxOThjOTIyZTgyYTYzMmUxZTc4YWEwOGRhZGEyNTI3MzJhYg==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1993-04-06T00:51:12Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1993-04-06T00:51:12Z"}, "message": "pa.md (prologue, epilogue): New define_expands.\n\n\t* pa.md (prologue, epilogue): New define_expands.\n\t(return_internal, call_profiler): New define_insns.\n\nFrom-SVN: r4023", "tree": {"sha": "6ea0af8e94cc8d34d05b39b59726c65fbb26ae8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6ea0af8e94cc8d34d05b39b59726c65fbb26ae8f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b0213198c922e82a632e1e78aa08dada252732ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0213198c922e82a632e1e78aa08dada252732ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0213198c922e82a632e1e78aa08dada252732ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0213198c922e82a632e1e78aa08dada252732ab/comments", "author": null, "committer": null, "parents": [{"sha": "ff78f7732cf4bf15d75d11d696ea5563d76ac1fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff78f7732cf4bf15d75d11d696ea5563d76ac1fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff78f7732cf4bf15d75d11d696ea5563d76ac1fa"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "f5df9dfc2906feccafb15f8f62c6fdd8b1ab2286", "filename": "gcc/config/pa/pa.md", "status": "modified", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0213198c922e82a632e1e78aa08dada252732ab/gcc%2Fconfig%2Fpa%2Fpa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0213198c922e82a632e1e78aa08dada252732ab/gcc%2Fconfig%2Fpa%2Fpa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.md?ref=b0213198c922e82a632e1e78aa08dada252732ab", "patch": "@@ -2580,6 +2580,47 @@\n   \"bv%* 0(%%r2)\"\n   [(set_attr \"type\" \"branch\")])\n \n+;; Use a different pattern for functions which have non-trivial \n+;; epilogues so as not to confuse jump and reorg.\n+(define_insn \"return_internal\"\n+  [(use (reg:SI 2))\n+   (return)]\n+  \"\"\n+  \"bv%* 0(%%r2)\"\n+  [(set_attr \"type\" \"branch\")])\n+\n+(define_expand \"prologue\"\n+  [(const_int 0)]\n+  \"\"\n+  \"hppa_expand_prologue ();DONE;\")\n+\n+(define_expand \"epilogue\"\n+  [(return)]\n+  \"\"\n+  \"\n+{\n+  /* Try to use the trivial return first.  Else use the full \n+     epilogue.  */\n+  if (hppa_can_use_return_insn_p ())\n+   emit_jump_insn (gen_return ());\n+  else\n+    {\n+      hppa_expand_epilogue ();\n+      emit_jump_insn (gen_return_internal ());\n+    }\n+  DONE;\n+}\")\n+\n+;; Special because we use the value placed in %r2 by the bl instruction\n+;; from within its delay slot to set the value for the 2nd parameter to\n+;; the call.\n+(define_insn \"call_profiler\"\n+  [(unspec_volatile [(const_int 0)] 0)\n+   (use (match_operand:SI 0 \"const_int_operand\" \"\"))]\n+  \"\"\n+  \"bl _mcount,%%r2\\;ldo %0(%%r2),%%r25\"\n+  [(set_attr \"length\" \"2\")])\n+\n (define_insn \"jump\"\n   [(set (pc) (label_ref (match_operand 0 \"\" \"\")))]\n   \"\""}]}