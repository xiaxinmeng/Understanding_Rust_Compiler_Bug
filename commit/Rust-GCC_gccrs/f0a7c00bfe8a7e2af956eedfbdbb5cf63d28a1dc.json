{"sha": "f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjBhN2MwMGJmZThhN2UyYWY5NTZlZWRmYmRiYjVjZjYzZDI4YTFkYw==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2015-12-04T18:18:27Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2015-12-04T18:18:27Z"}, "message": "re PR c++/68645 (FAIL: c-c++-common/attr-simd-3.c  -std=gnu++11 (test for excess errors))\n\n\tPR c++/68645\n\t* parser.c (cp_parser_direct_declarator)\n\t(cp_parser_late_return_type_opt): Put Cilk+ attributes on\n\tdeclarator->attributes, not std_attributes.\n\nFrom-SVN: r231294", "tree": {"sha": "f0868f627aacafc71f710dd7fcc80de0f65005e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f0868f627aacafc71f710dd7fcc80de0f65005e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e87eed2a9cbc1fe429ad550337e819cddcdc9c5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e87eed2a9cbc1fe429ad550337e819cddcdc9c5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e87eed2a9cbc1fe429ad550337e819cddcdc9c5a"}], "stats": {"total": 25, "additions": 17, "deletions": 8}, "files": [{"sha": "4568fb8c87a6a505f45e9b422cb1b31a1a84835a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc", "patch": "@@ -1,3 +1,10 @@\n+2015-12-04  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/68645\n+\t* parser.c (cp_parser_direct_declarator)\n+\t(cp_parser_late_return_type_opt): Put Cilk+ attributes on\n+\tdeclarator->attributes, not std_attributes.\n+\n 2015-12-04  David Malcolm  <dmalcolm@redhat.com>\n \n \t* cp-tree.h (class cp_expr): New class."}, {"sha": "b28d17a9b492c3037d75a48594c6a6f620d98c59", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc", "patch": "@@ -18714,6 +18714,7 @@ cp_parser_direct_declarator (cp_parser* parser,\n \t\t  /* In here, we handle cases where attribute is used after\n \t\t     the function declaration.  For example:\n \t\t     void func (int x) __attribute__((vector(..)));  */\n+\t\t  tree gnu_attrs = NULL_TREE;\n \t\t  if (flag_cilkplus\n \t\t      && cp_next_tokens_can_be_gnu_attribute_p (parser))\n \t\t    {\n@@ -18727,7 +18728,7 @@ cp_parser_direct_declarator (cp_parser* parser,\n \t\t      else if (!cp_parser_parse_definitely (parser))\n \t\t\t;\n \t\t      else\n-\t\t\tattrs = chainon (attr, attrs);\n+\t\t\tgnu_attrs = attr;\n \t\t    }\n \t\t  tree requires_clause = NULL_TREE;\n \t\t  late_return = (cp_parser_late_return_type_opt\n@@ -18748,6 +18749,7 @@ cp_parser_direct_declarator (cp_parser* parser,\n \t\t\t\t\t\t     late_return,\n \t\t\t\t\t\t     requires_clause);\n \t\t  declarator->std_attributes = attrs;\n+\t\t  declarator->attributes = gnu_attrs;\n \t\t  /* Any subsequent parameter lists are to do with\n \t\t     return type, so are not those of the declared\n \t\t     function.  */\n@@ -19547,17 +19549,17 @@ cp_parser_late_return_type_opt (cp_parser* parser, cp_declarator *declarator,\n   requires_clause = cp_parser_requires_clause_opt (parser);\n \n   if (cilk_simd_fn_vector_p)\n-    declarator->std_attributes\n+    declarator->attributes\n       = cp_parser_late_parsing_cilk_simd_fn_info (parser,\n-\t\t\t\t\t\t  declarator->std_attributes);\n+\t\t\t\t\t\t  declarator->attributes);\n   if (declare_simd_p)\n-    declarator->std_attributes\n+    declarator->attributes\n       = cp_parser_late_parsing_omp_declare_simd (parser,\n-\t\t\t\t\t\t declarator->std_attributes);\n+\t\t\t\t\t\t declarator->attributes);\n   if (oacc_routine_p)\n-    declarator->std_attributes\n+    declarator->attributes\n       = cp_parser_late_parsing_oacc_routine (parser,\n-\t\t\t\t\t     declarator->std_attributes);\n+\t\t\t\t\t     declarator->attributes);\n \n   if (quals >= 0)\n     {"}, {"sha": "d61ba82de3c73f94d25338f44cc88ebc8f660f01", "filename": "gcc/testsuite/c-c++-common/attr-simd-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fattr-simd-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fattr-simd-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fattr-simd-3.c?ref=f0a7c00bfe8a7e2af956eedfbdbb5cf63d28a1dc", "patch": "@@ -2,4 +2,4 @@\n /* { dg-options \"-fcilkplus\" } */\n /* { dg-prune-output \"undeclared here \\\\(not in a function\\\\)|\\[^\\n\\r\\]* was not declared in this scope\" } */\n \n-void f () __attribute__((__simd__, __vector__)); /* { dg-error \"in the same function marked as a Cilk Plus\" \"PR68158\" { xfail c++ } } */\n+void f () __attribute__((__simd__, __vector__)); /* { dg-error \"in the same function marked as a Cilk Plus\" \"PR68158\" } */"}]}