{"sha": "959d87966a28c5f67a33db114e4d342fe7072f0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTU5ZDg3OTY2YTI4YzVmNjdhMzNkYjExNGU0ZDM0MmZlNzA3MmYwYw==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-05-03T02:30:57Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-05-03T02:30:57Z"}, "message": "call.c (build_over_call): Do evaluate arg even if it has empty class type.\n\n\t* call.c (build_over_call): Do evaluate arg even if it has empty\n\tclass type.\n\t* decl.c (start_function): Don't push a member function.\n\nFrom-SVN: r19525", "tree": {"sha": "39c012108cbd87f4081860437911778013d6d707", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/39c012108cbd87f4081860437911778013d6d707"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/959d87966a28c5f67a33db114e4d342fe7072f0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/959d87966a28c5f67a33db114e4d342fe7072f0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/959d87966a28c5f67a33db114e4d342fe7072f0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/959d87966a28c5f67a33db114e4d342fe7072f0c/comments", "author": null, "committer": null, "parents": [{"sha": "e40abc32364fa16fe666ca92248b008712221a2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e40abc32364fa16fe666ca92248b008712221a2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e40abc32364fa16fe666ca92248b008712221a2b"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "a1bf5c9abe98858fc2db0034bcf41b5e4a5a99a9", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/959d87966a28c5f67a33db114e4d342fe7072f0c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/959d87966a28c5f67a33db114e4d342fe7072f0c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=959d87966a28c5f67a33db114e4d342fe7072f0c", "patch": "@@ -1,3 +1,9 @@\n+Sun May  3 01:32:14 1998  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* call.c (build_over_call): Do evaluate arg even if it has empty \n+\tclass type.\n+\t* decl.c (start_function): Don't push a member function.\n+\n Thu Apr 30 18:59:23 1998  Jim Wilson  <wilson@cygnus.com>\n \n \t* Makefile.in (g++FAQ.info): Put -o option before input file."}, {"sha": "0c4326c81d1eba1d8c7ef7f40acfe08cd56eab9c", "filename": "gcc/cp/call.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/959d87966a28c5f67a33db114e4d342fe7072f0c/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/959d87966a28c5f67a33db114e4d342fe7072f0c/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=959d87966a28c5f67a33db114e4d342fe7072f0c", "patch": "@@ -3363,7 +3363,8 @@ build_over_call (cand, args, flags)\n \t  /* Don't copy the padding byte; it might not have been allocated\n \t     if to is a base subobject.  */\n \t  if (is_empty_class (DECL_CLASS_CONTEXT (fn)))\n-\t    return to;\n+\t    return build (COMPOUND_EXPR, TREE_TYPE (to),\n+\t\t\t  cp_convert (void_type_node, arg), to);\n \n \t  val = build (INIT_EXPR, DECL_CONTEXT (fn), to, arg);\n \t  TREE_SIDE_EFFECTS (val) = 1;\n@@ -3377,12 +3378,14 @@ build_over_call (cand, args, flags)\n       tree to = stabilize_reference\n \t(build_indirect_ref (TREE_VALUE (converted_args), 0));\n \n+      arg = build_indirect_ref (TREE_VALUE (TREE_CHAIN (converted_args)), 0);\n+\n       /* Don't copy the padding byte; it might not have been allocated\n \t if to is a base subobject.  */\n       if (is_empty_class (DECL_CLASS_CONTEXT (fn)))\n-\treturn to;\n+\treturn build (COMPOUND_EXPR, TREE_TYPE (to),\n+\t\t      cp_convert (void_type_node, arg), to);\n \n-      arg = build_indirect_ref (TREE_VALUE (TREE_CHAIN (converted_args)), 0);\n       val = build (MODIFY_EXPR, TREE_TYPE (to), to, arg);\n       TREE_SIDE_EFFECTS (val) = 1;\n       return val;"}, {"sha": "ede5d3cc14ead1e025b79a09f4e83256717f3805", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/959d87966a28c5f67a33db114e4d342fe7072f0c/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/959d87966a28c5f67a33db114e4d342fe7072f0c/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=959d87966a28c5f67a33db114e4d342fe7072f0c", "patch": "@@ -11620,8 +11620,9 @@ start_function (declspecs, declarator, attrs, pre_parsed_p)\n   else if (pre_parsed_p == 0)\n     {\n       /* A specialization is not used to guide overload resolution.  */\n-      if (flag_guiding_decls \n-\t  || !DECL_TEMPLATE_SPECIALIZATION (decl1))\n+      if ((flag_guiding_decls \n+\t   || !DECL_TEMPLATE_SPECIALIZATION (decl1))\n+\t  && ! DECL_FUNCTION_MEMBER_P (decl1))\n \tdecl1 = pushdecl (decl1);\n       DECL_MAIN_VARIANT (decl1) = decl1;\n       fntype = TREE_TYPE (decl1);"}]}