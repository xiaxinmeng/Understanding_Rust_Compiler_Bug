{"sha": "7e0228bf2ace9c1738da0c8128b100196e873809", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2UwMjI4YmYyYWNlOWMxNzM4ZGEwYzgxMjhiMTAwMTk2ZTg3MzgwOQ==", "commit": {"author": {"name": "Naveen H.S", "email": "Naveen.Hurugalawadi@caviumnetworks.com", "date": "2013-04-25T11:55:05Z"}, "committer": {"name": "Naveen H.S", "email": "naveenh@gcc.gnu.org", "date": "2013-04-25T11:55:05Z"}, "message": "aarch64.md (*ngc<mode>): New pattern.\n\ngcc/\n\n2013-04-25  Naveen H.S  <Naveen.Hurugalawadi@caviumnetworks.com>\n\n\t* config/aarch64/aarch64.md (*ngc<mode>): New pattern.\n\t(*ngcsi_uxtw): New pattern.\n\ngcc/testsuite/\n\n2013-04-25  Naveen H.S  <Naveen.Hurugalawadi@caviumnetworks.com>\n\n\t* gcc.target/aarch64/ngc.c: New.\n\nFrom-SVN: r198302", "tree": {"sha": "ca89cee9ea7fe465fa741428bb221fae5f656ffb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca89cee9ea7fe465fa741428bb221fae5f656ffb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e0228bf2ace9c1738da0c8128b100196e873809", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e0228bf2ace9c1738da0c8128b100196e873809", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e0228bf2ace9c1738da0c8128b100196e873809", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e0228bf2ace9c1738da0c8128b100196e873809/comments", "author": null, "committer": null, "parents": [{"sha": "23db309f6e6d9ffc903c18a3b6f665d2ae940899", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23db309f6e6d9ffc903c18a3b6f665d2ae940899", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23db309f6e6d9ffc903c18a3b6f665d2ae940899"}], "stats": {"total": 96, "additions": 96, "deletions": 0}, "files": [{"sha": "e281812f7facf412a39822dfc2e5473a4cab70d7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e0228bf2ace9c1738da0c8128b100196e873809/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e0228bf2ace9c1738da0c8128b100196e873809/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7e0228bf2ace9c1738da0c8128b100196e873809", "patch": "@@ -1,3 +1,8 @@\n+2013-04-25  Naveen H.S  <Naveen.Hurugalawadi@caviumnetworks.com>\n+\n+\t* config/aarch64/aarch64.md (*ngc<mode>): New pattern.\n+\t(*ngcsi_uxtw): New pattern.\n+\n 2013-04-25  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n             Julian Brown  <julian@codesourcery.com>\n "}, {"sha": "3e1059142a1bc546ef824c5cb1fb6f586b5ecf78", "filename": "gcc/config/aarch64/aarch64.md", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e0228bf2ace9c1738da0c8128b100196e873809/gcc%2Fconfig%2Faarch64%2Faarch64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e0228bf2ace9c1738da0c8128b100196e873809/gcc%2Fconfig%2Faarch64%2Faarch64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.md?ref=7e0228bf2ace9c1738da0c8128b100196e873809", "patch": "@@ -1989,6 +1989,27 @@\n    (set_attr \"mode\" \"SI\")]\n )\n \n+(define_insn \"*ngc<mode>\"\n+  [(set (match_operand:GPI 0 \"register_operand\" \"=r\")\n+\t(minus:GPI (neg:GPI (ltu:GPI (reg:CC CC_REGNUM) (const_int 0)))\n+\t\t   (match_operand:GPI 1 \"register_operand\" \"r\")))]\n+  \"\"\n+  \"ngc\\\\t%<w>0, %<w>1\"\n+  [(set_attr \"v8type\" \"adc\")\n+   (set_attr \"mode\" \"<MODE>\")]\n+)\n+\n+(define_insn \"*ngcsi_uxtw\"\n+  [(set (match_operand:DI 0 \"register_operand\" \"=r\")\n+\t(zero_extend:DI\n+\t (minus:SI (neg:SI (ltu:SI (reg:CC CC_REGNUM) (const_int 0)))\n+\t\t   (match_operand:SI 1 \"register_operand\" \"r\"))))]\n+  \"\"\n+  \"ngc\\\\t%w0, %w1\"\n+  [(set_attr \"v8type\" \"adc\")\n+   (set_attr \"mode\" \"SI\")]\n+)\n+\n (define_insn \"*neg<mode>2_compare0\"\n   [(set (reg:CC_NZ CC_REGNUM)\n \t(compare:CC_NZ (neg:GPI (match_operand:GPI 1 \"register_operand\" \"r\"))"}, {"sha": "035ea20ad3c7043bcad48ed59ba4a4bf04af6863", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e0228bf2ace9c1738da0c8128b100196e873809/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e0228bf2ace9c1738da0c8128b100196e873809/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7e0228bf2ace9c1738da0c8128b100196e873809", "patch": "@@ -1,3 +1,7 @@\n+2013-04-25  Naveen H.S  <Naveen.Hurugalawadi@caviumnetworks.com>\n+\n+\t* gcc.target/aarch64/ngc.c: New.\n+\n 2013-04-25  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* lib/target-supports.exp"}, {"sha": "336432160c2d77ef39494752513329a6be52881e", "filename": "gcc/testsuite/gcc.target/aarch64/ngc.c", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e0228bf2ace9c1738da0c8128b100196e873809/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fngc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e0228bf2ace9c1738da0c8128b100196e873809/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fngc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fngc.c?ref=7e0228bf2ace9c1738da0c8128b100196e873809", "patch": "@@ -0,0 +1,66 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O2 --save-temps -fno-inline\" } */\n+\n+extern void abort (void);\n+typedef unsigned int u32;\n+\n+u32\n+ngc_si (u32 a, u32 b, u32 c, u32 d)\n+{\n+  a = -b - (c < d);\n+  return a;\n+}\n+\n+typedef unsigned long long u64;\n+\n+u64\n+ngc_si_tst (u64 a, u32 b, u32 c, u32 d)\n+{\n+  a = -b - (c < d);\n+  return a;\n+}\n+\n+u64\n+ngc_di (u64 a, u64 b, u64 c, u64 d)\n+{\n+  a = -b - (c < d);\n+  return a;\n+}\n+\n+int\n+main ()\n+{\n+  int x;\n+  u64 y;\n+\n+  x = ngc_si (29, 4, 5, 4);\n+  if (x != -4)\n+    abort ();\n+\n+  x = ngc_si (1024, 2, 20, 13);\n+  if (x != -2)\n+    abort ();\n+\n+  y = ngc_si_tst (0x130000029ll, 32, 50, 12);\n+  if (y != 0xffffffe0)\n+    abort ();\n+\n+  y = ngc_si_tst (0x5000500050005ll, 21, 2, 14);\n+  if (y != 0xffffffea)\n+    abort ();\n+\n+  y = ngc_di (0x130000029ll, 0x320000004ll, 0x505050505ll, 0x123123123ll);\n+  if (y != 0xfffffffcdffffffc)\n+    abort ();\n+\n+  y = ngc_di (0x5000500050005ll,\n+\t      0x2111211121112ll, 0x0000000002020ll, 0x1414575046477ll);\n+  if (y != 0xfffdeeedeeedeeed)\n+    abort ();\n+\n+  return 0;\n+}\n+\n+/* { dg-final { scan-assembler-times \"ngc\\tw\\[0-9\\]+, w\\[0-9\\]+\" 2 } } */\n+/* { dg-final { scan-assembler-times \"ngc\\tx\\[0-9\\]+, x\\[0-9\\]+\" 1 } } */\n+/* { dg-final { cleanup-saved-temps } } */"}]}