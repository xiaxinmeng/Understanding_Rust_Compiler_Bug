{"sha": "f082d7a951f7f36f1f59faa8d20eb40000bb5f54", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjA4MmQ3YTk1MWY3ZjM2ZjFmNTlmYWE4ZDIwZWI0MDAwMGJiNWY1NA==", "commit": {"author": {"name": "Gunther Nikl", "email": "gni@gecko.de", "date": "2003-11-30T04:28:34Z"}, "committer": {"name": "Bernardo Innocenti", "email": "bernie@gcc.gnu.org", "date": "2003-11-30T04:28:34Z"}, "message": "m68k.c (MOTOROLA): Move from here...\n\n\t* config/m68k/m68k.c (MOTOROLA): Move from here...\n\t* config/m68k/m68k.h (MOTOROLA): ... to here.\n\t(OUTPUT_JUMP): Use do {...} while (0).\n\t* config/m68k/m68k.md: Replace #ifdef MOTOROLA with C statements.\n\nFrom-SVN: r74049", "tree": {"sha": "f448784b930942e41134a883814bb12a91cd2910", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f448784b930942e41134a883814bb12a91cd2910"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f082d7a951f7f36f1f59faa8d20eb40000bb5f54", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f082d7a951f7f36f1f59faa8d20eb40000bb5f54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f082d7a951f7f36f1f59faa8d20eb40000bb5f54", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f082d7a951f7f36f1f59faa8d20eb40000bb5f54/comments", "author": null, "committer": null, "parents": [{"sha": "c16202e159aa5c0c0571f24f968a9effe1243a95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c16202e159aa5c0c0571f24f968a9effe1243a95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c16202e159aa5c0c0571f24f968a9effe1243a95"}], "stats": {"total": 726, "additions": 257, "deletions": 469}, "files": [{"sha": "391d0672d616f1a48ee42b5a3772b2ef31abb388", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f082d7a951f7f36f1f59faa8d20eb40000bb5f54/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f082d7a951f7f36f1f59faa8d20eb40000bb5f54/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f082d7a951f7f36f1f59faa8d20eb40000bb5f54", "patch": "@@ -1,3 +1,10 @@\n+2003-11-28  Gunther Nikl  <gni@gecko.de>\n+\n+\t* config/m68k/m68k.c (MOTOROLA): Move from here...\n+\t* config/m68k/m68k.h (MOTOROLA): ... to here.\n+\t(OUTPUT_JUMP): Use do {...} while (0).\n+\t* config/m68k/m68k.md: Replace #ifdef MOTOROLA with C statements.\n+\n 2003-11-28  Gunther Nikl  <gni@gecko.de>\n \n \t* config.gcc (m68020-*-elf*, m68k-*-elf*, m68010-*-netbsdelf*,"}, {"sha": "b99d1553bb3bedc6dea70518edfc29794fe96a5e", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f082d7a951f7f36f1f59faa8d20eb40000bb5f54/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f082d7a951f7f36f1f59faa8d20eb40000bb5f54/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=f082d7a951f7f36f1f59faa8d20eb40000bb5f54", "patch": "@@ -43,17 +43,6 @@ Boston, MA 02111-1307, USA.  */\n #include \"debug.h\"\n #include \"flags.h\"\n \n-/* We need to have MOTOROLA always defined (either 0 or 1) because we use\n-   if-statements and ?: on it.  This way we have compile-time error checking\n-   for both the MOTOROLA and MIT code paths.  We do rely on the host compiler\n-   to optimize away all constant tests.  */\n-#ifdef MOTOROLA\n-# undef MOTOROLA\n-# define MOTOROLA 1  /* Use the Motorola assembly syntax.  */\n-#else\n-# define MOTOROLA 0  /* Use the MIT assembly syntax.  */\n-#endif\n-\n /* The ASM_DOT macro allows easy string pasting to handle the differences\n    between MOTOROLA and MIT syntaxes in asm_fprintf(), which doesn't\n    support the %. option.  */"}, {"sha": "193983c72d35ab700a75fe96e0b20ff0447552e7", "filename": "gcc/config/m68k/m68k.h", "status": "modified", "additions": 14, "deletions": 9, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f082d7a951f7f36f1f59faa8d20eb40000bb5f54/gcc%2Fconfig%2Fm68k%2Fm68k.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f082d7a951f7f36f1f59faa8d20eb40000bb5f54/gcc%2Fconfig%2Fm68k%2Fm68k.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.h?ref=f082d7a951f7f36f1f59faa8d20eb40000bb5f54", "patch": "@@ -20,6 +20,18 @@ along with GCC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n+/* We need to have MOTOROLA always defined (either 0 or 1) because we use\n+   if-statements and ?: on it.  This way we have compile-time error checking\n+   for both the MOTOROLA and MIT code paths.  We do rely on the host compiler\n+   to optimize away all constant tests.  */\n+#ifdef MOTOROLA\n+# undef MOTOROLA\n+# define MOTOROLA 1  /* Use the Motorola assembly syntax.  */\n+# define TARGET_VERSION fprintf (stderr, \" (68k, Motorola syntax)\")\n+#else\n+# define TARGET_VERSION fprintf (stderr, \" (68k, MIT syntax)\")\n+# define MOTOROLA 0  /* Use the MIT assembly syntax.  */\n+#endif\n \n /* Note that some other tm.h files include this one and then override\n    many of the definitions that relate to assembler syntax.  */\n@@ -103,13 +115,6 @@ Boston, MA 02111-1307, USA.  */\n /* Set the default */\n #define INT_OP_GROUP INT_OP_DOT_WORD\n \n-/* Print subsidiary information on the compiler version in use.  */\n-#ifdef MOTOROLA\n-#define TARGET_VERSION fprintf (stderr, \" (68k, Motorola syntax)\");\n-#else\n-#define TARGET_VERSION fprintf (stderr, \" (68k, MIT syntax)\");\n-#endif\n-\n /* Run-time compilation parameters selecting different hardware subsets.  */\n \n extern int target_flags;\n@@ -1399,11 +1404,11 @@ __transfer_from_trampoline ()\t\t\t\t\t\\\n #define NOTICE_UPDATE_CC(EXP,INSN) notice_update_cc (EXP, INSN)\n \n #define OUTPUT_JUMP(NORMAL, FLOAT, NO_OV)  \\\n-{ if (cc_prev_status.flags & CC_IN_68881)\t\t\t\\\n+do { if (cc_prev_status.flags & CC_IN_68881)\t\t\t\\\n     return FLOAT;\t\t\t\t\t\t\\\n   if (cc_prev_status.flags & CC_NO_OVERFLOW)\t\t\t\\\n     return NO_OV;\t\t\t\t\t\t\\\n-  return NORMAL; }\n+  return NORMAL; } while (0)\n \f\n /* Control the assembler format that we output.  */\n "}, {"sha": "11f219c82661924fefb15bffa4a2d6abc0562267", "filename": "gcc/config/m68k/m68k.md", "status": "modified", "additions": 236, "deletions": 449, "changes": 685, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f082d7a951f7f36f1f59faa8d20eb40000bb5f54/gcc%2Fconfig%2Fm68k%2Fm68k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f082d7a951f7f36f1f59faa8d20eb40000bb5f54/gcc%2Fconfig%2Fm68k%2Fm68k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.md?ref=f082d7a951f7f36f1f59faa8d20eb40000bb5f54", "patch": "@@ -698,18 +698,14 @@\n       if (!TARGET_68040 && !TARGET_68060)\n \treturn \\\"sub%.l %0,%0\\\";\n       else\n-\t{\n-#ifdef MOTOROLA\n+\treturn MOTOROLA ?\n #ifdef SGS\n \t  /* Many SGS assemblers croak on size specifiers for constants.  */\n-\t  return \\\"lea 0,%0\\\";\n-#else\n-\t  return \\\"lea 0.w,%0\\\";\n-#endif\n+\t  \\\"lea 0,%0\\\" :\n #else\n-\t  return \\\"lea 0:w,%0\\\";\n+\t  \\\"lea 0.w,%0\\\" :\n #endif\n-\t}\n+\t  \\\"lea 0:w,%0\\\";\n     }\n   /* moveq is faster on the 68000.  */\n   if (DATA_REG_P (operands[0]) && (!TARGET_68020 && !TARGET_COLDFIRE))\n@@ -907,18 +903,14 @@\n \t  if (!TARGET_68040 && !TARGET_68060)\n \t    return \\\"sub%.l %0,%0\\\";\n \t  else\n-\t    {\n-#ifdef MOTOROLA\n+\t    return MOTOROLA ?\n #ifdef SGS\n \t      /* Many SGS assemblers croak on size specifiers for constants.  */\n-\t      return \\\"lea 0,%0\\\";\n-#else\n-\t      return \\\"lea 0.w,%0\\\";\n-#endif\n+\t      \\\"lea 0,%0\\\" :\n #else\n-\t      return \\\"lea 0:w,%0\\\";\n+\t      \\\"lea 0.w,%0\\\" :\n #endif\n-\t    }\n+\t      \\\"lea 0:w,%0\\\";\n \t}\n       /* moveq is faster on the 68000.  */\n       if (DATA_REG_P (operands[0]) && !(TARGET_68020 || TARGET_COLDFIRE))\n@@ -1448,29 +1440,26 @@\n \t   && GET_CODE (XEXP (operands[0], 0)) == PRE_DEC)\n     {\n       operands[0] = XEXP (XEXP (operands[0], 0), 0);\n-#ifdef MOTOROLA\n+      return MOTOROLA ?\n #ifdef SGS\n-      return \\\"clr%.l -(%0)\\;move%.b %1,3(%0)\\\";\n-#else\n-      return \\\"clr%.l -(%0)\\;move%.b %1,(3,%0)\\\";\n-#endif\n+\t\\\"clr%.l -(%0)\\;move%.b %1,3(%0)\\\" :\n #else\n-      return \\\"clrl %0@-\\;moveb %1,%0@(3)\\\";\n+\t\\\"clr%.l -(%0)\\;move%.b %1,(3,%0)\\\" :\n #endif\n+\t\\\"clrl %0@-\\;moveb %1,%0@(3)\\\";\n+\t\n     }\n   else if (GET_CODE (operands[0]) == MEM\n \t   && GET_CODE (XEXP (operands[0], 0)) == POST_INC)\n     {\n       operands[0] = XEXP (XEXP (operands[0], 0), 0);\n-#ifdef MOTOROLA\n+      return MOTOROLA ?\n #ifdef SGS\n-      return \\\"clr%.l (%0)+\\;move%.b %1,-1(%0)\\\";\n+\t\\\"clr%.l (%0)+\\;move%.b %1,-1(%0)\\\" :\n #else\n-      return \\\"clr%.l (%0)+\\;move%.b %1,(-1,%0)\\\";\n-#endif\n-#else\n-      return \\\"clrl %0@+\\;moveb %1,%0@(-1)\\\";\n+\t\\\"clr%.l (%0)+\\;move%.b %1,(-1,%0)\\\" :\n #endif\n+\t\\\"clrl %0@+\\;moveb %1,%0@(-1)\\\";\n     }\n   else\n     {\n@@ -2003,11 +1992,7 @@\n         operands[2] = gen_rtx_MEM (SImode, XEXP (XEXP (operands[0], 0), 0));\n     }\n   output_asm_insn (\\\"move%.l %1,%0\\\", operands);\n-#ifdef MOTOROLA\n-  output_asm_insn (\\\"jbpl %l3\\\", operands);\n-#else\n-  output_asm_insn (\\\"jpl %l3\\\", operands);\n-#endif\n+  output_asm_insn (MOTOROLA ? \\\"jbpl %l3\\\" : \\\"jpl %l3\\\", operands);\n   output_asm_insn (\\\"addq%.l %#1,%2\\\", operands);\n   (*targetm.asm_out.internal_label) (asm_out_file, \\\"L\\\",\n \t\t\t\tCODE_LABEL_NUMBER (operands[3]));\n@@ -2094,11 +2079,7 @@\n \t    }\n \t}\n       if (ADDRESS_REG_P (operands[0]) && !TARGET_68040)\n-#ifdef MOTOROLA  \n-\t    return \\\"lea (%c2,%0),%0\\\";\n-#else\n-\t    return \\\"lea %0@(%c2),%0\\\";\n-#endif\n+\treturn MOTOROLA ? \\\"lea (%c2,%0),%0\\\" : \\\"lea %0@(%c2),%0\\\";\n     }\n   return \\\"add%.w %2,%0\\\";\n }\")\n@@ -2154,11 +2135,7 @@\n \t    }\n \t}\n       if (ADDRESS_REG_P (operands[0]) && !TARGET_68040)\n-#ifdef MOTOROLA  \n-\t    return \\\"lea (%c1,%0),%0\\\";\n-#else\n-\t    return \\\"lea %0@(%c1),%0\\\";\n-#endif\n+\treturn MOTOROLA ? \\\"lea (%c1,%0),%0\\\" : \\\"lea %0@(%c1),%0\\\";\n     }\n   return \\\"add%.w %1,%0\\\";\n }\")\n@@ -2208,11 +2185,7 @@\n \t    }\n \t}\n       if (ADDRESS_REG_P (operands[0]) && !TARGET_68040)\n-#ifdef MOTOROLA  \n-\t    return \\\"lea (%c1,%0),%0\\\";\n-#else\n-\t    return \\\"lea %0@(%c1),%0\\\";\n-#endif\n+\treturn MOTOROLA ? \\\"lea (%c1,%0),%0\\\" : \\\"lea %0@(%c1),%0\\\";\n     }\n   return \\\"add%.w %1,%0\\\";\n }\")\n@@ -2621,11 +2594,7 @@\n   \"\"\n   \"*\n {\n-#if defined(MOTOROLA)\n-  return \\\"muls%.w %2,%0\\\";\n-#else\n-  return \\\"muls %2,%0\\\";\n-#endif\n+  return MOTOROLA ? \\\"muls%.w %2,%0\\\" : \\\"muls %2,%0\\\";\n }\")\n \n (define_insn \"mulhisi3\"\n@@ -2637,11 +2606,7 @@\n   \"\"\n   \"*\n {\n-#if defined(MOTOROLA)\n-  return \\\"muls%.w %2,%0\\\";\n-#else\n-  return \\\"muls %2,%0\\\";\n-#endif\n+  return MOTOROLA ? \\\"muls%.w %2,%0\\\" : \\\"muls %2,%0\\\";\n }\")\n \n (define_insn \"\"\n@@ -2652,11 +2617,7 @@\n   \"INTVAL (operands[2]) >= -0x8000 && INTVAL (operands[2]) <= 0x7fff\"\n   \"*\n {\n-#if defined(MOTOROLA)\n-  return \\\"muls%.w %2,%0\\\";\n-#else\n-  return \\\"muls %2,%0\\\";\n-#endif\n+  return MOTOROLA ? \\\"muls%.w %2,%0\\\" : \\\"muls %2,%0\\\";\n }\")\n \n (define_expand \"mulsi3\"\n@@ -2690,11 +2651,7 @@\n   \"\"\n   \"*\n {\n-#if defined(MOTOROLA)\n-  return \\\"mulu%.w %2,%0\\\";\n-#else\n-  return \\\"mulu %2,%0\\\";\n-#endif\n+  return MOTOROLA ? \\\"mulu%.w %2,%0\\\" : \\\"mulu %2,%0\\\";\n }\")\n \n (define_insn \"\"\n@@ -2705,11 +2662,7 @@\n   \"INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 0xffff\"\n   \"*\n {\n-#if defined(MOTOROLA)\n-  return \\\"mulu%.w %2,%0\\\";\n-#else\n-  return \\\"mulu %2,%0\\\";\n-#endif\n+  return MOTOROLA ? \\\"mulu%.w %2,%0\\\" : \\\"mulu %2,%0\\\";\n }\")\n \n ;; We need a separate DEFINE_EXPAND for u?mulsidi3 to be able to use the\n@@ -3182,11 +3135,10 @@\n   \"!TARGET_COLDFIRE || TARGET_CF_HWDIV\"\n   \"*\n {\n-#ifdef MOTOROLA\n-  output_asm_insn (\\\"ext%.l %0\\;divs%.w %2,%0\\\", operands);\n-#else\n-  output_asm_insn (\\\"extl %0\\;divs %2,%0\\\", operands);\n-#endif\n+  output_asm_insn (MOTOROLA ?\n+    \\\"ext%.l %0\\;divs%.w %2,%0\\\" :\n+    \\\"extl %0\\;divs %2,%0\\\",\n+    operands);\n   if (!find_reg_note(insn, REG_UNUSED, operands[3]))\n     {\n       CC_STATUS_INIT;\n@@ -3205,11 +3157,10 @@\n   \"!TARGET_COLDFIRE || TARGET_CF_HWDIV\"\n   \"*\n {\n-#ifdef MOTOROLA\n-  output_asm_insn (\\\"and%.l %#0xFFFF,%0\\;divu%.w %2,%0\\\", operands);\n-#else\n-  output_asm_insn (\\\"and%.l %#0xFFFF,%0\\;divu %2,%0\\\", operands);\n-#endif\n+  output_asm_insn (MOTOROLA ?\n+    \\\"and%.l %#0xFFFF,%0\\;divu%.w %2,%0\\\" :\n+    \\\"and%.l %#0xFFFF,%0\\;divu %2,%0\\\",\n+    operands);\n   if (!find_reg_note(insn, REG_UNUSED, operands[3]))\n     {\n       CC_STATUS_INIT;\n@@ -5663,22 +5614,19 @@\n {\n   CC_STATUS_INIT;\n   if (which_alternative == 1)\n-#ifdef MOTOROLA\n-    return \\\"move%.l %0,%2\\;or%.l %0,%2\\;jbeq %l1\\\";\n-#else\n-    return \\\"move%.l %0,%2\\;or%.l %0,%2\\;jeq %l1\\\";\n-#endif\n+    {\n+      if (MOTOROLA)\n+\treturn \\\"move%.l %0,%2\\;or%.l %0,%2\\;jbeq %l1\\\";\n+      else\n+\treturn \\\"move%.l %0,%2\\;or%.l %0,%2\\;jeq %l1\\\";\n+    }\n   if ((cc_prev_status.value1\n       && rtx_equal_p (cc_prev_status.value1, operands[0]))\n     || (cc_prev_status.value2\n       && rtx_equal_p (cc_prev_status.value2, operands[0])))\n     {\n       cc_status = cc_prev_status;\n-#ifdef MOTOROLA\n-      return \\\"jbeq %l1\\\";\n-#else\n-      return \\\"jeq %l1\\\";\n-#endif\n+      return MOTOROLA ? \\\"jbeq %l1\\\" : \\\"jeq %l1\\\";\n     }\n   if (GET_CODE (operands[0]) == REG)\n     operands[3] = gen_rtx_REG (SImode, REGNO (operands[0]) + 1);\n@@ -5690,47 +5638,42 @@\n \t{\n \t  if (reg_overlap_mentioned_p (operands[2], operands[3]))\n \t    {\n-#ifdef MOTOROLA\n-\t      return \\\"or%.l %0,%2\\;jbeq %l1\\\";\n-#else\n-\t      return \\\"or%.l %0,%2\\;jeq %l1\\\";\n-#endif\n+\t      if (MOTOROLA)\n+\t\treturn \\\"or%.l %0,%2\\;jbeq %l1\\\";\n+\t      else\n+\t\treturn \\\"or%.l %0,%2\\;jeq %l1\\\";\n \t    }\n \t  else\n \t    {\n-#ifdef MOTOROLA\n-\t      return \\\"or%.l %3,%2\\;jbeq %l1\\\";\n-#else\n-\t      return \\\"or%.l %3,%2\\;jeq %l1\\\";\n-#endif\n+\t      if (MOTOROLA)\n+\t\treturn \\\"or%.l %3,%2\\;jbeq %l1\\\";\n+\t      else\n+\t\treturn \\\"or%.l %3,%2\\;jeq %l1\\\";\n \t    }\n \t}\n-#ifdef MOTOROLA\n-      return \\\"move%.l %0,%2\\;or%.l %3,%2\\;jbeq %l1\\\";\n-#else\n-      return \\\"move%.l %0,%2\\;or%.l %3,%2\\;jeq %l1\\\";\n-#endif\n+      if (MOTOROLA)\n+\treturn \\\"move%.l %0,%2\\;or%.l %3,%2\\;jbeq %l1\\\";\n+      else\n+\treturn \\\"move%.l %0,%2\\;or%.l %3,%2\\;jeq %l1\\\";\n     }\n   operands[4] = gen_label_rtx();\n   if (TARGET_68020 || TARGET_COLDFIRE)\n     {\n-#ifdef MOTOROLA\n-      output_asm_insn (\\\"tst%.l %0\\;jbne %l4\\;tst%.l %3\\;jbeq %l1\\\", operands);\n-#else\n-      output_asm_insn (\\\"tst%.l %0\\;jne %l4\\;tst%.l %3\\;jeq %l1\\\", operands);\n-#endif\n+      if (MOTOROLA)\n+\toutput_asm_insn (\\\"tst%.l %0\\;jbne %l4\\;tst%.l %3\\;jbeq %l1\\\", operands);\n+      else\n+\toutput_asm_insn (\\\"tst%.l %0\\;jne %l4\\;tst%.l %3\\;jeq %l1\\\", operands);\n     }\n   else\n     {\n-#ifdef MOTOROLA\n+      if (MOTOROLA)\n #ifdef SGS_CMP_ORDER\n-      output_asm_insn (\\\"cmp%.w %0,%#0\\;jbne %l4\\;cmp%.w %3,%#0\\;jbeq %l1\\\", operands);\n-#else\n-      output_asm_insn (\\\"cmp%.w %#0,%0\\;jbne %l4\\;cmp%.w %#0,%3\\;jbeq %l1\\\", operands);\n-#endif\n+\toutput_asm_insn (\\\"cmp%.w %0,%#0\\;jbne %l4\\;cmp%.w %3,%#0\\;jbeq %l1\\\", operands);\n #else\n-      output_asm_insn (\\\"cmp%.w %#0,%0\\;jne %l4\\;cmp%.w %#0,%3\\;jeq %l1\\\", operands);\n+\toutput_asm_insn (\\\"cmp%.w %#0,%0\\;jbne %l4\\;cmp%.w %#0,%3\\;jbeq %l1\\\", operands);\n #endif\n+      else\n+\toutput_asm_insn (\\\"cmp%.w %#0,%0\\;jne %l4\\;cmp%.w %#0,%3\\;jeq %l1\\\", operands);\n     }\n   (*targetm.asm_out.internal_label) (asm_out_file, \\\"L\\\",\n \t\t\t\tCODE_LABEL_NUMBER (operands[4]));\n@@ -5753,11 +5696,7 @@\n       && rtx_equal_p (cc_prev_status.value2, operands[0])))\n     {\n       cc_status = cc_prev_status;\n-#ifdef MOTOROLA\n-      return \\\"jbne %l1\\\";\n-#else\n-      return \\\"jne %l1\\\";\n-#endif\n+      return MOTOROLA ? \\\"jbne %l1\\\" : \\\"jne %l1\\\";\n     }\n   CC_STATUS_INIT;\n   if (GET_CODE (operands[0]) == REG)\n@@ -5770,46 +5709,41 @@\n \t{\n \t  if (reg_overlap_mentioned_p (operands[2], operands[3]))\n \t    {\n-#ifdef MOTOROLA\n-\t      return \\\"or%.l %0,%2\\;jbne %l1\\\";\n-#else\n-\t      return \\\"or%.l %0,%2\\;jne %l1\\\";\n-#endif\n+\t      if (MOTOROLA)\n+\t\treturn \\\"or%.l %0,%2\\;jbne %l1\\\";\n+\t      else\n+\t\treturn \\\"or%.l %0,%2\\;jne %l1\\\";\n \t    }\n \t  else\n \t    {\n-#ifdef MOTOROLA\n-\t      return \\\"or%.l %3,%2\\;jbne %l1\\\";\n-#else\n-\t      return \\\"or%.l %3,%2\\;jne %l1\\\";\n-#endif\n+\t      if (MOTOROLA)\n+\t\treturn \\\"or%.l %3,%2\\;jbne %l1\\\";\n+\t      else\n+\t\treturn \\\"or%.l %3,%2\\;jne %l1\\\";\n \t    }\n \t}\n-#ifdef MOTOROLA\n-      return \\\"move%.l %0,%2\\;or%.l %3,%2\\;jbne %l1\\\";\n-#else\n-      return \\\"move%.l %0,%2\\;or%.l %3,%2\\;jne %l1\\\";\n-#endif\n+      if (MOTOROLA)\n+\treturn \\\"move%.l %0,%2\\;or%.l %3,%2\\;jbne %l1\\\";\n+      else\n+\treturn \\\"move%.l %0,%2\\;or%.l %3,%2\\;jne %l1\\\";\n     }\n   if (TARGET_68020 || TARGET_COLDFIRE)\n     {\n-#ifdef MOTOROLA\n-      return \\\"tst%.l %0\\;jbne %l1\\;tst%.l %3\\;jbne %l1\\\";\n-#else\n-      return \\\"tst%.l %0\\;jne %l1\\;tst%.l %3\\;jne %l1\\\";\n-#endif\n+      if (MOTOROLA)\n+\treturn \\\"tst%.l %0\\;jbne %l1\\;tst%.l %3\\;jbne %l1\\\";\n+      else\n+\treturn \\\"tst%.l %0\\;jne %l1\\;tst%.l %3\\;jne %l1\\\";\n     }\n   else\n     {\n-#ifdef MOTOROLA\n+      if (MOTOROLA)\n #ifdef SGS_CMP_ORDER\n-      return \\\"cmp%.w %0,%#0\\;jbne %l1\\;cmp%.w %3,%#0\\;jbne %l1\\\";\n+\treturn \\\"cmp%.w %0,%#0\\;jbne %l1\\;cmp%.w %3,%#0\\;jbne %l1\\\";\n #else\n-      return \\\"cmp%.w %#0,%0\\;jbne %l1\\;cmp%.w %#0,%3\\;jbne %l1\\\";\n-#endif\n-#else\n-      return \\\"cmp%.w %#0,%0\\;jne %l1\\;cmp%.w %#0,%3\\;jne %l1\\\";\n+\treturn \\\"cmp%.w %#0,%0\\;jbne %l1\\;cmp%.w %#0,%3\\;jbne %l1\\\";\n #endif\n+      else\n+\treturn \\\"cmp%.w %#0,%0\\;jne %l1\\;cmp%.w %#0,%3\\;jne %l1\\\";\n     }\n } \")\n \n@@ -5830,19 +5764,11 @@\n       cc_status = cc_prev_status;\n       if (cc_status.flags & CC_REVERSED)\n \t{\n-#ifdef MOTOROLA\n-\t  return \\\"jble %l1\\\";\n-#else\n-\t  return \\\"jle %l1\\\";\n-#endif\n+\t  return MOTOROLA ? \\\"jble %l1\\\" : \\\"jle %l1\\\";\n \t}\n       else\n \t{\n-#ifdef MOTOROLA\n-\t  return \\\"jbpl %l1\\\";\n-#else\n-\t  return \\\"jpl %l1\\\";\n-#endif\n+\t  return MOTOROLA ? \\\"jbpl %l1\\\" : \\\"jpl %l1\\\";\n \t}\n     }\n   CC_STATUS_INIT;\n@@ -5858,11 +5784,7 @@\n #endif\n     }\n \n-#ifdef MOTOROLA\n-  return \\\"jbpl %l1\\\";\n-#else\n-  return \\\"jpl %l1\\\";\n-#endif\n+  return MOTOROLA ? \\\"jbpl %l1\\\" : \\\"jpl %l1\\\";\n } \")\n \n (define_insn \"blt0_di\"\n@@ -5882,19 +5804,11 @@\n       cc_status = cc_prev_status;\n       if (cc_status.flags & CC_REVERSED)\n \t{\n-#ifdef MOTOROLA\n-\t  return \\\"jbgt %l1\\\";\n-#else\n-\t  return \\\"jgt %l1\\\";\n-#endif\n+\t  return MOTOROLA ? \\\"jbgt %l1\\\" : \\\"jgt %l1\\\";\n \t}\n       else\n \t{\n-#ifdef MOTOROLA\n-\t  return \\\"jbmi %l1\\\";\n-#else\n-\t  return \\\"jmi %l1\\\";\n-#endif\n+\t  return MOTOROLA ? \\\"jbmi %l1\\\" : \\\"jmi %l1\\\";\n \t}\n     }\n   CC_STATUS_INIT;\n@@ -5910,11 +5824,7 @@\n #endif\n     }\n \n-#ifdef MOTOROLA\n-  return \\\"jbmi %l1\\\";\n-#else\n-  return \\\"jmi %l1\\\";\n-#endif\n+  return MOTOROLA ? \\\"jbmi %l1\\\" : \\\"jmi %l1\\\";\n } \")\n \n (define_insn \"beq\"\n@@ -5926,11 +5836,10 @@\n   \"\"\n   \"*\n {\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jbeq %l0\\\", \\\"fbeq %l0\\\", \\\"jbeq %l0\\\");\n-#else\n-  OUTPUT_JUMP (\\\"jeq %l0\\\", \\\"fjeq %l0\\\", \\\"jeq %l0\\\");\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jbeq %l0\\\", \\\"fbeq %l0\\\", \\\"jbeq %l0\\\");\n+  else\n+    OUTPUT_JUMP (\\\"jeq %l0\\\", \\\"fjeq %l0\\\", \\\"jeq %l0\\\");\n }\")\n \n (define_insn \"bne\"\n@@ -5942,11 +5851,10 @@\n   \"\"\n   \"*\n {\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jbne %l0\\\", \\\"fbne %l0\\\", \\\"jbne %l0\\\");\n-#else\n-  OUTPUT_JUMP (\\\"jne %l0\\\", \\\"fjne %l0\\\", \\\"jne %l0\\\");\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jbne %l0\\\", \\\"fbne %l0\\\", \\\"jbne %l0\\\");\n+  else\n+    OUTPUT_JUMP (\\\"jne %l0\\\", \\\"fjne %l0\\\", \\\"jne %l0\\\");\n }\")\n \n (define_insn \"bgt\"\n@@ -5957,11 +5865,10 @@\n \t\t      (pc)))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jbgt %l0\\\", \\\"fbgt %l0\\\", 0);\n-#else\n-  OUTPUT_JUMP (\\\"jgt %l0\\\", \\\"fjgt %l0\\\", 0);\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jbgt %l0\\\", \\\"fbgt %l0\\\", 0);\n+  else\n+    OUTPUT_JUMP (\\\"jgt %l0\\\", \\\"fjgt %l0\\\", 0);\n \")\n \n (define_insn \"bgtu\"\n@@ -5972,11 +5879,7 @@\n \t\t      (pc)))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  return \\\"jbhi %l0\\\";\n-#else\n-  return \\\"jhi %l0\\\";\n-#endif\n+  return MOTOROLA ? \\\"jbhi %l0\\\" : \\\"jhi %l0\\\";\n \")\n \n (define_insn \"blt\"\n@@ -5987,11 +5890,10 @@\n \t\t      (pc)))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jblt %l0\\\", \\\"fblt %l0\\\", \\\"jbmi %l0\\\");\n-#else\n-  OUTPUT_JUMP (\\\"jlt %l0\\\", \\\"fjlt %l0\\\", \\\"jmi %l0\\\");\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jblt %l0\\\", \\\"fblt %l0\\\", \\\"jbmi %l0\\\");\n+  else\n+    OUTPUT_JUMP (\\\"jlt %l0\\\", \\\"fjlt %l0\\\", \\\"jmi %l0\\\");\n \")\n \n (define_insn \"bltu\"\n@@ -6002,11 +5904,7 @@\n \t\t      (pc)))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  return \\\"jbcs %l0\\\";\n-#else\n-  return \\\"jcs %l0\\\";\n-#endif\n+  return MOTOROLA ? \\\"jbcs %l0\\\" : \\\"jcs %l0\\\";\n \")\n \n (define_insn \"bge\"\n@@ -6017,11 +5915,10 @@\n \t\t      (pc)))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jbge %l0\\\", \\\"fbge %l0\\\", \\\"jbpl %l0\\\");\n-#else\n-  OUTPUT_JUMP (\\\"jge %l0\\\", \\\"fjge %l0\\\", \\\"jpl %l0\\\");\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jbge %l0\\\", \\\"fbge %l0\\\", \\\"jbpl %l0\\\");\n+  else\n+    OUTPUT_JUMP (\\\"jge %l0\\\", \\\"fjge %l0\\\", \\\"jpl %l0\\\");\n \")\n \n (define_insn \"bgeu\"\n@@ -6032,11 +5929,7 @@\n \t\t      (pc)))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  return \\\"jbcc %l0\\\";\n-#else\n-  return \\\"jcc %l0\\\";\n-#endif\n+  return MOTOROLA ? \\\"jbcc %l0\\\" : \\\"jcc %l0\\\";\n \")\n \n (define_insn \"ble\"\n@@ -6047,11 +5940,10 @@\n \t\t      (pc)))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jble %l0\\\", \\\"fble %l0\\\", 0);\n-#else\n-  OUTPUT_JUMP (\\\"jle %l0\\\", \\\"fjle %l0\\\", 0);\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jble %l0\\\", \\\"fble %l0\\\", 0);\n+  else\n+    OUTPUT_JUMP (\\\"jle %l0\\\", \\\"fjle %l0\\\", 0);\n \")\n \n (define_insn \"bleu\"\n@@ -6062,11 +5954,7 @@\n \t\t      (pc)))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  return \\\"jbls %l0\\\";\n-#else\n-  return \\\"jls %l0\\\";\n-#endif\n+  return MOTOROLA ? \\\"jbls %l0\\\" : \\\"jls %l0\\\";\n \")\n \n (define_insn \"bordered\"\n@@ -6078,11 +5966,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbor %l0\";\n-#else\n-  return \"fjor %l0\";\n-#endif\n+  return MOTOROLA ? \"fbor %l0\" : \"fjor %l0\";\n })\n \n (define_insn \"bunordered\"\n@@ -6094,11 +5978,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbun %l0\";\n-#else\n-  return \"fjun %l0\";\n-#endif\n+  return MOTOROLA ? \"fbun %l0\" : \"fjun %l0\";\n })\n \n (define_insn \"buneq\"\n@@ -6110,11 +5990,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbueq %l0\";\n-#else\n-  return \"fjueq %l0\";\n-#endif\n+  return MOTOROLA ? \"fbueq %l0\" : \"fjueq %l0\";\n })\n \n (define_insn \"bunge\"\n@@ -6126,11 +6002,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbuge %l0\";\n-#else\n-  return \"fjuge %l0\";\n-#endif\n+  return MOTOROLA ? \"fbuge %l0\" : \"fjuge %l0\";\n })\n \n (define_insn \"bungt\"\n@@ -6142,11 +6014,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbugt %l0\";\n-#else\n-  return \"fjugt %l0\";\n-#endif\n+  return MOTOROLA ? \"fbugt %l0\" : \"fjugt %l0\";\n })\n \n (define_insn \"bunle\"\n@@ -6158,11 +6026,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbule %l0\";\n-#else\n-  return \"fjule %l0\";\n-#endif\n+  return MOTOROLA ? \"fbule %l0\" : \"fjule %l0\";\n })\n \n (define_insn \"bunlt\"\n@@ -6174,11 +6038,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbult %l0\";\n-#else\n-  return \"fjult %l0\";\n-#endif\n+  return MOTOROLA ? \"fbult %l0\" : \"fjult %l0\";\n })\n \n (define_insn \"bltgt\"\n@@ -6190,11 +6050,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbogl %l0\";\n-#else\n-  return \"fjogl %l0\";\n-#endif\n+  return MOTOROLA ? \"fbogl %l0\" : \"fjogl %l0\";\n })\n \f\n ;; Negated conditional jump instructions.\n@@ -6208,11 +6064,10 @@\n   \"\"\n   \"*\n {\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jbne %l0\\\", \\\"fbne %l0\\\", \\\"jbne %l0\\\");\n-#else\n-  OUTPUT_JUMP (\\\"jne %l0\\\", \\\"fjne %l0\\\", \\\"jne %l0\\\");\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jbne %l0\\\", \\\"fbne %l0\\\", \\\"jbne %l0\\\");\n+  else\n+    OUTPUT_JUMP (\\\"jne %l0\\\", \\\"fjne %l0\\\", \\\"jne %l0\\\");\n }\")\n \n (define_insn \"\"\n@@ -6224,11 +6079,10 @@\n   \"\"\n   \"*\n {\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jbeq %l0\\\", \\\"fbeq %l0\\\", \\\"jbeq %l0\\\");\n-#else\n-  OUTPUT_JUMP (\\\"jeq %l0\\\", \\\"fjeq %l0\\\", \\\"jeq %l0\\\");\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jbeq %l0\\\", \\\"fbeq %l0\\\", \\\"jbeq %l0\\\");\n+  else\n+    OUTPUT_JUMP (\\\"jeq %l0\\\", \\\"fjeq %l0\\\", \\\"jeq %l0\\\");\n }\")\n \n (define_insn \"\"\n@@ -6239,11 +6093,10 @@\n \t\t      (label_ref (match_operand 0 \"\" \"\"))))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jble %l0\\\", \\\"fbngt %l0\\\", 0);\n-#else\n-  OUTPUT_JUMP (\\\"jle %l0\\\", \\\"fjngt %l0\\\", 0);\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jble %l0\\\", \\\"fbngt %l0\\\", 0);\n+  else\n+    OUTPUT_JUMP (\\\"jle %l0\\\", \\\"fjngt %l0\\\", 0);\n \")\n \n (define_insn \"\"\n@@ -6254,11 +6107,7 @@\n \t\t      (label_ref (match_operand 0 \"\" \"\"))))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  return \\\"jbls %l0\\\";\n-#else\n-  return \\\"jls %l0\\\";\n-#endif\n+  return MOTOROLA ? \\\"jbls %l0\\\" : \\\"jls %l0\\\";\n \")\n \n (define_insn \"\"\n@@ -6269,11 +6118,10 @@\n \t\t      (label_ref (match_operand 0 \"\" \"\"))))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jbge %l0\\\", \\\"fbnlt %l0\\\", \\\"jbpl %l0\\\");\n-#else\n-  OUTPUT_JUMP (\\\"jge %l0\\\", \\\"fjnlt %l0\\\", \\\"jpl %l0\\\");\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jbge %l0\\\", \\\"fbnlt %l0\\\", \\\"jbpl %l0\\\");\n+  else\n+    OUTPUT_JUMP (\\\"jge %l0\\\", \\\"fjnlt %l0\\\", \\\"jpl %l0\\\");\n \")\n \n (define_insn \"\"\n@@ -6284,11 +6132,7 @@\n \t\t      (label_ref (match_operand 0 \"\" \"\"))))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  return \\\"jbcc %l0\\\";\n-#else\n-  return \\\"jcc %l0\\\";\n-#endif\n+  return MOTOROLA ? \\\"jbcc %l0\\\" : \\\"jcc %l0\\\";\n \")\n \n (define_insn \"\"\n@@ -6299,11 +6143,10 @@\n \t\t      (label_ref (match_operand 0 \"\" \"\"))))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jblt %l0\\\", \\\"fbnge %l0\\\", \\\"jbmi %l0\\\");\n-#else\n-  OUTPUT_JUMP (\\\"jlt %l0\\\", \\\"fjnge %l0\\\", \\\"jmi %l0\\\");\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jblt %l0\\\", \\\"fbnge %l0\\\", \\\"jbmi %l0\\\");\n+  else\n+    OUTPUT_JUMP (\\\"jlt %l0\\\", \\\"fjnge %l0\\\", \\\"jmi %l0\\\");\n \")\n \n (define_insn \"\"\n@@ -6314,11 +6157,7 @@\n \t\t      (label_ref (match_operand 0 \"\" \"\"))))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  return \\\"jbcs %l0\\\";\n-#else\n-  return \\\"jcs %l0\\\";\n-#endif\n+  return MOTOROLA ? \\\"jbcs %l0\\\" : \\\"jcs %l0\\\";\n \")\n \n (define_insn \"\"\n@@ -6329,11 +6168,10 @@\n \t\t      (label_ref (match_operand 0 \"\" \"\"))))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  OUTPUT_JUMP (\\\"jbgt %l0\\\", \\\"fbnle %l0\\\", 0);\n-#else\n-  OUTPUT_JUMP (\\\"jgt %l0\\\", \\\"fjnle %l0\\\", 0);\n-#endif\n+  if (MOTOROLA)\n+    OUTPUT_JUMP (\\\"jbgt %l0\\\", \\\"fbnle %l0\\\", 0);\n+  else\n+    OUTPUT_JUMP (\\\"jgt %l0\\\", \\\"fjnle %l0\\\", 0);\n \")\n \n (define_insn \"\"\n@@ -6344,11 +6182,7 @@\n \t\t      (label_ref (match_operand 0 \"\" \"\"))))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  return \\\"jbhi %l0\\\";\n-#else\n-  return \\\"jhi %l0\\\";\n-#endif\n+  return MOTOROLA ? \\\"jbhi %l0\\\" : \\\"jhi %l0\\\";\n \")\n \n (define_insn \"*bordered_rev\"\n@@ -6360,11 +6194,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbun %l0\";\n-#else\n-  return \"fjun %l0\";\n-#endif\n+  return MOTOROLA ? \"fbun %l0\" : \"fjun %l0\";\n })\n \n (define_insn \"*bunordered_rev\"\n@@ -6376,11 +6206,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbor %l0\";\n-#else\n-  return \"fjor %l0\";\n-#endif\n+  return MOTOROLA ? \"fbor %l0\" : \"fjor %l0\";\n })\n \n (define_insn \"*buneq_rev\"\n@@ -6392,11 +6218,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbogl %l0\";\n-#else\n-  return \"fjogl %l0\";\n-#endif\n+  return MOTOROLA ? \"fbogl %l0\" : \"fjogl %l0\";\n })\n \n (define_insn \"*bunge_rev\"\n@@ -6408,11 +6230,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbolt %l0\";\n-#else\n-  return \"fjolt %l0\";\n-#endif\n+  return MOTOROLA ? \"fbolt %l0\" : \"fjolt %l0\";\n })\n \n (define_insn \"*bunle_rev\"\n@@ -6424,11 +6242,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbogt %l0\";\n-#else\n-  return \"fjogt %l0\";\n-#endif\n+  return MOTOROLA ? \"fbogt %l0\" : \"fjogt %l0\";\n })\n \n (define_insn \"*bunlt_rev\"\n@@ -6440,11 +6254,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fboge %l0\";\n-#else\n-  return \"fjoge %l0\";\n-#endif\n+  return MOTOROLA ? \"fboge %l0\" : \"fjoge %l0\";\n })\n \n (define_insn \"*bltgt_rev\"\n@@ -6456,11 +6266,7 @@\n {\n   if (!(cc_prev_status.flags & CC_IN_68881))\n     abort ();\n-#ifdef MOTOROLA\n-  return \"fbueq %l0\";\n-#else\n-  return \"fjueq %l0\";\n-#endif\n+  return MOTOROLA ? \"fbueq %l0\" : \"fjueq %l0\";\n })\n \f\n ;; Unconditional and other jump instructions\n@@ -6469,11 +6275,7 @@\n \t(label_ref (match_operand 0 \"\" \"\")))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  return \\\"jbra %l0\\\";\n-#else\n-  return \\\"jra %l0\\\";\n-#endif\n+  return MOTOROLA ? \\\"jbra %l0\\\" : \\\"jra %l0\\\";\n \")\n \n ;; We support two different ways of handling dispatch tables.\n@@ -6497,11 +6299,7 @@\n    (use (label_ref (match_operand 1 \"\" \"\")))]\n   \"\"\n   \"*\n-#ifdef MOTOROLA\n-  return \\\"jmp (%0)\\\";\n-#else\n-  return \\\"jmp %0@\\\";\n-#endif\n+  return MOTOROLA ? \\\"jmp (%0)\\\" : \\\"jmp %0@\\\";\n \")\n \n ;; Jump to variable address from dispatch table of relative addresses.\n@@ -6542,28 +6340,16 @@\n     {\n       if (ADDRESS_REG_P (operands[0]))\n \t{\n-#ifdef MOTOROLA\n-\t  return \\\"jmp (2,pc,%0.l)\\\";\n-#else\n-\t  return \\\"jmp pc@(2,%0:l)\\\";\n-#endif\n+\t  return MOTOROLA ? \\\"jmp (2,pc,%0.l)\\\" : \\\"jmp pc@(2,%0:l)\\\";\n \t}\n+      else if (MOTOROLA)\n+\treturn \\\"ext%.l %0\\;jmp (2,pc,%0.l)\\\";\n       else\n-\t{\n-#ifdef MOTOROLA\n-\t  return \\\"ext%.l %0\\;jmp (2,pc,%0.l)\\\";\n-#else\n-\t  return \\\"extl %0\\;jmp pc@(2,%0:l)\\\";\n-#endif\n-\t}\n+\treturn \\\"extl %0\\;jmp pc@(2,%0:l)\\\";\n     }\n   else\n     {\n-#ifdef MOTOROLA\n-      return \\\"jmp (2,pc,%0.w)\\\";\n-#else\n-      return \\\"jmp pc@(2,%0:w)\\\";\n-#endif\n+      return MOTOROLA ? \\\"jmp (2,pc,%0.w)\\\" : \\\"jmp pc@(2,%0:w)\\\";\n     }\n #endif\n #endif\n@@ -6588,21 +6374,19 @@\n     return \\\"dbra %0,%l1\\\";\n   if (GET_CODE (operands[0]) == MEM)\n     {\n-#ifdef MOTOROLA\n-      return \\\"subq%.w %#1,%0\\;jbcc %l1\\\";\n-#else /* not MOTOROLA */\n-      return \\\"subqw %#1,%0\\;jcc %l1\\\";\n-#endif\n+      if (MOTOROLA)\n+\treturn \\\"subq%.w %#1,%0\\;jbcc %l1\\\";\n+      else\n+\treturn \\\"subqw %#1,%0\\;jcc %l1\\\";\n     }\n-#ifdef MOTOROLA\n+  if (MOTOROLA)\n #ifdef SGS_CMP_ORDER\n-  return \\\"subq%.w %#1,%0\\;cmp%.w %0,%#-1\\;jbne %l1\\\";\n+    return \\\"subq%.w %#1,%0\\;cmp%.w %0,%#-1\\;jbne %l1\\\";\n #else /* not SGS_CMP_ORDER */\n-  return \\\"subq%.w %#1,%0\\;cmp%.w %#-1,%0\\;jbne %l1\\\";\n-#endif\n-#else /* not MOTOROLA */\n-  return \\\"subqw %#1,%0\\;cmpw %#-1,%0\\;jne %l1\\\";\n+    return \\\"subq%.w %#1,%0\\;cmp%.w %#-1,%0\\;jbne %l1\\\";\n #endif\n+  else\n+    return \\\"subqw %#1,%0\\;cmpw %#-1,%0\\;jne %l1\\\";\n }\")\n \n (define_insn \"\"\n@@ -6619,23 +6403,26 @@\n   \"*\n {\n   CC_STATUS_INIT;\n-#ifdef MOTOROLA\n-  if (DATA_REG_P (operands[0]))\n-    return \\\"dbra %0,%l1\\;clr%.w %0\\;subq%.l %#1,%0\\;jbcc %l1\\\";\n-  if (GET_CODE (operands[0]) == MEM)\n-    return \\\"subq%.l %#1,%0\\;jbcc %l1\\\";\n+  if (MOTOROLA)\n+    {\n+      if (DATA_REG_P (operands[0]))\n+        return \\\"dbra %0,%l1\\;clr%.w %0\\;subq%.l %#1,%0\\;jbcc %l1\\\";\n+      if (GET_CODE (operands[0]) == MEM)\n+        return \\\"subq%.l %#1,%0\\;jbcc %l1\\\";\n #ifdef SGS_CMP_ORDER\n-  return \\\"subq.l %#1,%0\\;cmp.l %0,%#-1\\;jbne %l1\\\";\n+      return \\\"subq.l %#1,%0\\;cmp.l %0,%#-1\\;jbne %l1\\\";\n #else /* not SGS_CMP_ORDER */\n-  return \\\"subq.l %#1,%0\\;cmp.l %#-1,%0\\;jbne %l1\\\";\n+      return \\\"subq.l %#1,%0\\;cmp.l %#-1,%0\\;jbne %l1\\\";\n #endif /* not SGS_CMP_ORDER */\n-#else /* not MOTOROLA */\n-  if (DATA_REG_P (operands[0]))\n-    return \\\"dbra %0,%l1\\;clr%.w %0\\;subql %#1,%0\\;jcc %l1\\\";\n-  if (GET_CODE (operands[0]) == MEM)\n-    return \\\"subql %#1,%0\\;jcc %l1\\\";\n-  return \\\"subql %#1,%0\\;cmpl %#-1,%0\\;jne %l1\\\";\n-#endif /* not MOTOROLA */\n+    }\n+  else\n+    {\n+      if (DATA_REG_P (operands[0]))\n+        return \\\"dbra %0,%l1\\;clr%.w %0\\;subql %#1,%0\\;jcc %l1\\\";\n+      if (GET_CODE (operands[0]) == MEM)\n+        return \\\"subql %#1,%0\\;jcc %l1\\\";\n+      return \\\"subql %#1,%0\\;cmpl %#-1,%0\\;jne %l1\\\";\n+    }\n }\")\n \n ;; Two dbra patterns that use REG_NOTES info generated by strength_reduce.\n@@ -6655,23 +6442,26 @@\n   \"*\n {\n   CC_STATUS_INIT;\n-#ifdef MOTOROLA\n-  if (DATA_REG_P (operands[0]))\n-    return \\\"dbra %0,%l1\\\";\n-  if (GET_CODE (operands[0]) == MEM)\n-    return \\\"subq%.w %#1,%0\\;jbcc %l1\\\";\n+  if (MOTOROLA)\n+    {\n+      if (DATA_REG_P (operands[0]))\n+        return \\\"dbra %0,%l1\\\";\n+      if (GET_CODE (operands[0]) == MEM)\n+        return \\\"subq%.w %#1,%0\\;jbcc %l1\\\";\n #ifdef SGS_CMP_ORDER\n-  return \\\"subq.w %#1,%0\\;cmp.w %0,%#-1\\;jbne %l1\\\";\n+      return \\\"subq.w %#1,%0\\;cmp.w %0,%#-1\\;jbne %l1\\\";\n #else /* not SGS_CMP_ORDER */\n-  return \\\"subq.w %#1,%0\\;cmp.w %#-1,%0\\;jbne %l1\\\";\n+      return \\\"subq.w %#1,%0\\;cmp.w %#-1,%0\\;jbne %l1\\\";\n #endif /* not SGS_CMP_ORDER */\n-#else /* not MOTOROLA */\n-  if (DATA_REG_P (operands[0]))\n-    return \\\"dbra %0,%l1\\\";\n-  if (GET_CODE (operands[0]) == MEM)\n-    return \\\"subqw %#1,%0\\;jcc %l1\\\";\n-  return \\\"subqw %#1,%0\\;cmpw %#-1,%0\\;jne %l1\\\";\n-#endif /* not MOTOROLA */\n+    }\n+  else\n+    {\n+      if (DATA_REG_P (operands[0]))\n+        return \\\"dbra %0,%l1\\\";\n+      if (GET_CODE (operands[0]) == MEM)\n+        return \\\"subqw %#1,%0\\;jcc %l1\\\";\n+      return \\\"subqw %#1,%0\\;cmpw %#-1,%0\\;jne %l1\\\";\n+    }\n }\")\n \n (define_expand \"decrement_and_branch_until_zero\"\n@@ -6703,23 +6493,26 @@\n   \"*\n {\n   CC_STATUS_INIT;\n-#ifdef MOTOROLA\n-  if (DATA_REG_P (operands[0]))\n-    return \\\"dbra %0,%l1\\;clr%.w %0\\;subq%.l %#1,%0\\;jbcc %l1\\\";\n-  if (GET_CODE (operands[0]) == MEM)\n-    return \\\"subq%.l %#1,%0\\;jbcc %l1\\\";\n+  if (MOTOROLA)\n+    {\n+      if (DATA_REG_P (operands[0]))\n+        return \\\"dbra %0,%l1\\;clr%.w %0\\;subq%.l %#1,%0\\;jbcc %l1\\\";\n+      if (GET_CODE (operands[0]) == MEM)\n+        return \\\"subq%.l %#1,%0\\;jbcc %l1\\\";\n #ifdef SGS_CMP_ORDER\n-  return \\\"subq.l %#1,%0\\;cmp.l %0,%#-1\\;jbne %l1\\\";\n+      return \\\"subq.l %#1,%0\\;cmp.l %0,%#-1\\;jbne %l1\\\";\n #else /* not SGS_CMP_ORDER */\n-  return \\\"subq.l %#1,%0\\;cmp.l %#-1,%0\\;jbne %l1\\\";\n+      return \\\"subq.l %#1,%0\\;cmp.l %#-1,%0\\;jbne %l1\\\";\n #endif /* not SGS_CMP_ORDER */\n-#else /* not MOTOROLA */\n-  if (DATA_REG_P (operands[0]))\n-    return \\\"dbra %0,%l1\\;clr%.w %0\\;subql %#1,%0\\;jcc %l1\\\";\n-  if (GET_CODE (operands[0]) == MEM)\n-    return \\\"subql %#1,%0\\;jcc %l1\\\";\n-  return \\\"subql %#1,%0\\;cmpl %#-1,%0\\;jne %l1\\\";\n-#endif /* not MOTOROLA */\n+    }\n+  else\n+    {\n+      if (DATA_REG_P (operands[0]))\n+        return \\\"dbra %0,%l1\\;clr%.w %0\\;subql %#1,%0\\;jcc %l1\\\";\n+      if (GET_CODE (operands[0]) == MEM)\n+        return \\\"subql %#1,%0\\;jcc %l1\\\";\n+      return \\\"subql %#1,%0\\;cmpl %#-1,%0\\;jne %l1\\\";\n+    }\n }\")\n \n \n@@ -6781,7 +6574,7 @@\n \n   \"! flag_pic\"\n   \"*\n-#if defined (MOTOROLA) && !defined (USE_GAS)\n+#if MOTOROLA && !defined (USE_GAS)\n   return \\\"jsr %0\\\";\n #else\n   return \\\"jbsr %0\\\";\n@@ -6823,7 +6616,7 @@\n   ;; Operand 2 not really used on the m68000.\n   \"! flag_pic\"\n   \"*\n-#if defined (MOTOROLA) && !defined (USE_GAS)\n+#if MOTOROLA && !defined (USE_GAS)\n   return \\\"jsr %1\\\";\n #else\n   return \\\"jbsr %1\\\";\n@@ -6919,7 +6712,7 @@\n       && GET_CODE (XEXP (operands[1], 0)) != PLUS)\n     {\n       rtx labelref = XEXP (operands[1], 1);\n-#if defined (MOTOROLA) && !defined (SGS_SWITCH_TABLES)\n+#if MOTOROLA && !defined (SGS_SWITCH_TABLES)\n #ifdef SGS\n       asm_fprintf (asm_out_file, \\\"\\\\tset %LLI%d,.+2\\\\n\\\",\n \t\t   CODE_LABEL_NUMBER (XEXP (labelref, 0)));\n@@ -6995,12 +6788,10 @@\n         {\n \t  if (TARGET_68040)\n \t    output_asm_insn (\\\"add%.w %1,%0\\\", xoperands);\n-\t  else\n-#ifdef MOTOROLA  \n+\t  else if (MOTOROLA)\n \t    output_asm_insn (\\\"lea (%c1,%0),%0\\\", xoperands);\n-#else\n+\t  else\n \t    output_asm_insn (\\\"lea %0@(%c1),%0\\\", xoperands);\n-#endif\n         }\n       else\n         output_asm_insn (\\\"add%.l %1,%0\\\", xoperands);\n@@ -7042,14 +6833,10 @@\n         {\n \t  if (TARGET_68040)\n \t    output_asm_insn (\\\"add%.w %1,%0\\\", xoperands);\n+\t  else if (MOTOROLA)\n+\t    output_asm_insn (\\\"lea (%c1,%0),%0\\\", xoperands);\n \t  else\n-\t    {\n-#ifdef MOTOROLA  \n-\t      output_asm_insn (\\\"lea (%c1,%0),%0\\\", xoperands);\n-#else\n-\t      output_asm_insn (\\\"lea %0@(%c1),%0\\\", xoperands);\n-#endif\n-\t    }\n+\t    output_asm_insn (\\\"lea %0@(%c1),%0\\\", xoperands);\n         }\n       else\n         output_asm_insn (\\\"add%.l %1,%0\\\", xoperands);"}]}