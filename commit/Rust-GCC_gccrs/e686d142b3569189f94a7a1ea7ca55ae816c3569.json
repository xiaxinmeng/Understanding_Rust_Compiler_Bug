{"sha": "e686d142b3569189f94a7a1ea7ca55ae816c3569", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTY4NmQxNDJiMzU2OTE4OWY5NGE3YTFlYTdjYTU1YWU4MTZjMzU2OQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2001-10-23T20:46:41Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2001-10-23T20:46:41Z"}, "message": "alias.c (can_address_p): Compnonents are not addressable if the containing type has alias set 0.\n\n\t* alias.c (can_address_p): Compnonents are not addressable if\n\tthe containing type has alias set 0.\n\t(get_alias_set): Rework to use STRIP_NOPS.\n\tOnly call front-end routine on object, type, or object with\n\tNOPs stripped, not inner values.\n\tUse language hook to call front-end routine.\n\t* builtins.c (get_memory_rtx): Always call set_mem_attributes.\n\t(expand_builtin_apply): Call set_mem_align on MEMs we make.\n\tDon't pass alignment to emit_block_move.\n\t(expand_builtin_memcpy, expand_builtin_va_copy): Likewise.\n\t(expand_builtin_memset): Likewise, but for clear_storage.\n\t* c-common.c (lang_get_alias_set): Renamed to c_common_alias_set\n\tand remove C++ specific parts.\n\t* c-common.h (c_common_get_alias_set): Add declaration.\n\t* c-lang.c (LANG_HOOKS_GET_ALIAS_SET): New macro.\n\t* calls.c (emit_call_1): Fix typo in sibcall_pop case.\n\t(save_fixed_argument_area): Call set_mem_align.\n\tRemove alignment in call to emit_block_move.\n\t(emit_library_call_value_1, store_one_arg): Likewise.\n\t(target_for_arg): Remove; disabled long ago.\n\t* emit-rtl.c (set_mem_attributes): Rework to only call get_mem_attrs\n\tonce and similar cleanups.\n\t(offset_address): Use proper introductory comment.\n\t* expr.c (emit_block_move): Use alignment from that of MEM args, not\n\tfrom explicit operand; all callers changed.\n\t(clear_storage): Likewise.\n\t(expand_assignment): Don't call set_mem_alias_set on to_rtx.\n\t(store_field): Remove kludge on alias set used for to_rtx.\n\t(highest_pow2_factor, case *_DIV_EXPR): Never return 0.\n\t(expand_expr_unaligned): Call set_mem_attributes instead of\n\tset_mem_alias_set.\n\t* expr.h (emit_block_move, clear_storage): Remove ALIGN argument.\n\t* function.c (assign_stack_temp_for_type): Set MEM alignment.\n\t(expand_function_end): Track MEM attributes of trampolines.\n\t* ifcvt.c (noce_try_cmove_arith): Set alignment of new MEM.\n\t* integrate.c (copy_rtx_and_substitute, case CALL): Copy memory\n\tattributes from original.\n\t* langhooks.c (lang_hook_default_get_alias_set): New function.\n\t(hook_get_alias_set_0): New function.\n\t* langhooks.h (hook_get_alias_set_0): New declaration.\n\t(lang_hook_default_get_alias_set): Likewise.\n\t(LANG_HOOKS_GET_ALIAS_SET): New macro; add to initializer.\n\t* reload1.c (alter_reg): Use adjust_address_nv.\n\t* rtl.c (get_mode_alignment): Moved to here.\n\t* rtl.h (MEM_ALIGN): Take default from mode, if not BLKmode, and\n\tchange default if unknown from 1 to BITS_PER_UNIT.\n\t* stor-layout.c (get_mode_alignment): Remove from here.\n\t* toplev.h (struct lang_hoks): Add get_alias_set field.\n\t* tree.h (lang_get_alias_set): Delete declaration.\n\t* config/arc/arc.c (arc_setup_incoming_varags): Set MEM alignment.\n\t* config/i386/i386.c (ix86_setup_incoming_varargs): Likewise.\n\t(ix86_va_arg): Likewise.\n\t* config/i960/i960.c (i960_setup_incoming_varargs): Likewise.\n\t* config/pa/pa.c (hppa_builtin_saveregs): Likewise.\n\t* config/sparc/sparc.c (sparc_va_arg): Likewise.\n\t* config/rs6000/rs6000.c (setup_incoming_varargs): Likewise.\n\t(expand_block_move_mem): Remove dead code.\n\t* cp/cp-lang.c (cxx_get_alias_set): New function.\n\tPoint LANG_HOOKS_GET_ALIAS_SET to it.\n\t* f/com.c (LANG_HOOKS_GET_ALIAS_SET): New macro.\n\t(lang_get_alias_set): Delete.\n\t* java/lang.c (lang_get_alias_set): Deleted.\n\nFrom-SVN: r46443", "tree": {"sha": "ab73aaf7281179221f5f41c55ba136779a29a224", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab73aaf7281179221f5f41c55ba136779a29a224"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e686d142b3569189f94a7a1ea7ca55ae816c3569", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e686d142b3569189f94a7a1ea7ca55ae816c3569", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e686d142b3569189f94a7a1ea7ca55ae816c3569", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e686d142b3569189f94a7a1ea7ca55ae816c3569/comments", "author": null, "committer": null, "parents": [{"sha": "74e2819c708b6e2eb7668f3410ecf87b8709ac00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74e2819c708b6e2eb7668f3410ecf87b8709ac00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74e2819c708b6e2eb7668f3410ecf87b8709ac00"}], "stats": {"total": 9, "additions": 1, "deletions": 8}, "files": [{"sha": "08b3fdc709e8bb914a2a90246d38445994db3023", "filename": "gcc/function.c", "status": "modified", "additions": 1, "deletions": 8, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e686d142b3569189f94a7a1ea7ca55ae816c3569/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e686d142b3569189f94a7a1ea7ca55ae816c3569/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=e686d142b3569189f94a7a1ea7ca55ae816c3569", "patch": "@@ -5018,15 +5018,8 @@ assign_parms (fndecl)\n       if (parm == function_result_decl)\n \t{\n \t  tree result = DECL_RESULT (fndecl);\n-\t  rtx addr = DECL_RTL (parm);\n-\t  rtx x;\n+\t  rtx x = gen_rtx_MEM (DECL_MODE (result), DECL_RTL (parm));\n \n-#ifdef POINTERS_EXTEND_UNSIGNED\n-\t  if (GET_MODE (addr) != Pmode)\n-\t    addr = convert_memory_address (Pmode, addr);\n-#endif\n-\n-\t  x = gen_rtx_MEM (DECL_MODE (result), addr);\n \t  set_mem_attributes (x, result, 1);\n \t  SET_DECL_RTL (result, x);\n \t}"}]}