{"sha": "910eabe5013f0feaed1a493a42f3cf577cb90769", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTEwZWFiZTUwMTNmMGZlYWVkMWE0OTNhNDJmM2NmNTc3Y2I5MDc2OQ==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1999-10-04T06:08:16Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-10-04T06:08:16Z"}, "message": "genattrtab.c (simplify_cond): Make TESTS an array of rtxs, instead of rtunions.\n\n        * genattrtab.c (simplify_cond): Make TESTS an array of rtxs, instead\n        of rtunions.\n\nFrom-SVN: r29792", "tree": {"sha": "ca6da6fdbd99fa188291c05a82062d9f8beeca25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca6da6fdbd99fa188291c05a82062d9f8beeca25"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/910eabe5013f0feaed1a493a42f3cf577cb90769", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/910eabe5013f0feaed1a493a42f3cf577cb90769", "html_url": "https://github.com/Rust-GCC/gccrs/commit/910eabe5013f0feaed1a493a42f3cf577cb90769", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/910eabe5013f0feaed1a493a42f3cf577cb90769/comments", "author": null, "committer": null, "parents": [{"sha": "aedf9aa78cd6a5c8e792a3b5859d44decf8b8885", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aedf9aa78cd6a5c8e792a3b5859d44decf8b8885", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aedf9aa78cd6a5c8e792a3b5859d44decf8b8885"}], "stats": {"total": 33, "additions": 18, "deletions": 15}, "files": [{"sha": "c6162b0f2af8e37892a6b2409ddeaaa1075aa806", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/910eabe5013f0feaed1a493a42f3cf577cb90769/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/910eabe5013f0feaed1a493a42f3cf577cb90769/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=910eabe5013f0feaed1a493a42f3cf577cb90769", "patch": "@@ -1,5 +1,8 @@\n Sun Oct  3 14:14:16 1999  Jeffrey A Law  (law@cygnus.com)\n \n+\t* genattrtab.c (simplify_cond): Make TESTS an array of rtxs, instead\n+\tof rtunions.\n+\n \t* mbchar.h: Add missing #endif.\n \n \t* t-fr30 (LIB2FUNCS_EXTRA): Remove definition."}, {"sha": "815f3f141d72dae688eb417e530f3d26273ecd66", "filename": "gcc/genattrtab.c", "status": "modified", "additions": 15, "deletions": 15, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/910eabe5013f0feaed1a493a42f3cf577cb90769/gcc%2Fgenattrtab.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/910eabe5013f0feaed1a493a42f3cf577cb90769/gcc%2Fgenattrtab.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgenattrtab.c?ref=910eabe5013f0feaed1a493a42f3cf577cb90769", "patch": "@@ -2531,14 +2531,14 @@ simplify_cond (exp, insn_code, insn_index)\n   rtx defval = XEXP (exp, 1);\n   rtx new_defval = XEXP (exp, 1);\n   int len = XVECLEN (exp, 0);\n-  rtunion *tests = (rtunion *) alloca (len * sizeof (rtunion));\n+  rtx *tests = (rtx *) alloca (len * sizeof (rtx));\n   int allsame = 1;\n   char *first_spacer;\n \n   /* This lets us free all storage allocated below, if appropriate.  */\n   first_spacer = (char *) obstack_finish (rtl_obstack);\n \n-  bcopy ((char *) XVEC (exp, 0)->elem, (char *) tests, len * sizeof (rtunion));\n+  bcopy ((char *) XVEC (exp, 0)->elem, (char *) tests, len * sizeof (rtx));\n \n   /* See if default value needs simplification.  */\n   if (GET_CODE (defval) == COND)\n@@ -2551,10 +2551,10 @@ simplify_cond (exp, insn_code, insn_index)\n       rtx newtest, newval;\n \n       /* Simplify this test.  */\n-      newtest = SIMPLIFY_TEST_EXP (tests[i].rtx, insn_code, insn_index);\n-      tests[i].rtx = newtest;\n+      newtest = SIMPLIFY_TEST_EXP (tests[i], insn_code, insn_index);\n+      tests[i] = newtest;\n \n-      newval = tests[i + 1].rtx;\n+      newval = tests[i + 1];\n       /* See if this value may need simplification.  */\n       if (GET_CODE (newval) == COND)\n \tnewval = simplify_cond (newval, insn_code, insn_index);\n@@ -2565,49 +2565,49 @@ simplify_cond (exp, insn_code, insn_index)\n \t  /* If test is true, make this value the default\n \t     and discard this + any following tests.  */\n \t  len = i;\n-\t  defval = tests[i + 1].rtx;\n+\t  defval = tests[i + 1];\n \t  new_defval = newval;\n \t}\n \n       else if (newtest == false_rtx)\n \t{\n \t  /* If test is false, discard it and its value.  */\n \t  for (j = i; j < len - 2; j++)\n-\t    tests[j].rtx = tests[j + 2].rtx;\n+\t    tests[j] = tests[j + 2];\n \t  len -= 2;\n \t}\n \n-      else if (i > 0 && attr_equal_p (newval, tests[i - 1].rtx))\n+      else if (i > 0 && attr_equal_p (newval, tests[i - 1]))\n \t{\n \t  /* If this value and the value for the prev test are the same,\n \t     merge the tests.  */\n \n-\t  tests[i - 2].rtx\n-\t    = insert_right_side (IOR, tests[i - 2].rtx, newtest,\n+\t  tests[i - 2]\n+\t    = insert_right_side (IOR, tests[i - 2], newtest,\n \t\t\t\t insn_code, insn_index);\n \n \t  /* Delete this test/value.  */\n \t  for (j = i; j < len - 2; j++)\n-\t    tests[j].rtx = tests[j + 2].rtx;\n+\t    tests[j] = tests[j + 2];\n \t  len -= 2;\n \t}\n \n       else\n-\ttests[i + 1].rtx = newval;\n+\ttests[i + 1] = newval;\n     }\n \n   /* If the last test in a COND has the same value\n      as the default value, that test isn't needed.  */\n \n-  while (len > 0 && attr_equal_p (tests[len - 1].rtx, new_defval))\n+  while (len > 0 && attr_equal_p (tests[len - 1], new_defval))\n     len -= 2;\n \n   /* See if we changed anything.  */\n   if (len != XVECLEN (exp, 0) || new_defval != XEXP (exp, 1))\n     allsame = 0;\n   else\n     for (i = 0; i < len; i++)\n-      if (! attr_equal_p (tests[i].rtx, XVECEXP (exp, 0, i)))\n+      if (! attr_equal_p (tests[i], XVECEXP (exp, 0, i)))\n \t{\n \t  allsame = 0;\n \t  break;\n@@ -2633,7 +2633,7 @@ simplify_cond (exp, insn_code, insn_index)\n \n       XVEC (newexp, 0) = rtvec_alloc (len);\n       bcopy ((char *) tests, (char *) XVEC (newexp, 0)->elem,\n-\t     len * sizeof (rtunion));\n+\t     len * sizeof (rtx));\n       XEXP (newexp, 1) = new_defval;\n       return newexp;\n     }"}]}