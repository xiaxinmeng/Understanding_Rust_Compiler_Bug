{"sha": "8bd7070a7a6fc94831aa9a67083ae038410ab19b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGJkNzA3MGE3YTZmYzk0ODMxYWE5YTY3MDgzYWUwMzg0MTBhYjE5Yg==", "commit": {"author": {"name": "Andreas Krebbel", "email": "Andreas.Krebbel@de.ibm.com", "date": "2014-02-07T14:20:17Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2014-02-07T14:20:17Z"}, "message": "optabs.c (expand_atomic_compare_and_swap): Allow expander to fail.\n\n2014-02-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\t* optabs.c (expand_atomic_compare_and_swap): Allow expander to\n\tfail.\n\nFrom-SVN: r207599", "tree": {"sha": "568308588a3d98d59b2346356c4d5a36e636405b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/568308588a3d98d59b2346356c4d5a36e636405b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8bd7070a7a6fc94831aa9a67083ae038410ab19b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bd7070a7a6fc94831aa9a67083ae038410ab19b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bd7070a7a6fc94831aa9a67083ae038410ab19b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bd7070a7a6fc94831aa9a67083ae038410ab19b/comments", "author": null, "committer": null, "parents": [{"sha": "831806cb211df749b12f47ee4b669e30f7a5f009", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/831806cb211df749b12f47ee4b669e30f7a5f009", "html_url": "https://github.com/Rust-GCC/gccrs/commit/831806cb211df749b12f47ee4b669e30f7a5f009"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "106a30d39bc2195c17e697005e7ac7419612ea91", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bd7070a7a6fc94831aa9a67083ae038410ab19b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bd7070a7a6fc94831aa9a67083ae038410ab19b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8bd7070a7a6fc94831aa9a67083ae038410ab19b", "patch": "@@ -1,3 +1,8 @@\n+2014-02-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\t* optabs.c (expand_atomic_compare_and_swap): Allow expander to\n+\tfail.\n+\n 2014-02-07  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/60092"}, {"sha": "cec25a443cec025c69a413010aa6b93e4c375b0f", "filename": "gcc/optabs.c", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bd7070a7a6fc94831aa9a67083ae038410ab19b/gcc%2Foptabs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bd7070a7a6fc94831aa9a67083ae038410ab19b/gcc%2Foptabs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptabs.c?ref=8bd7070a7a6fc94831aa9a67083ae038410ab19b", "patch": "@@ -7383,12 +7383,13 @@ expand_atomic_compare_and_swap (rtx *ptarget_bool, rtx *ptarget_oval,\n       create_integer_operand (&ops[5], is_weak);\n       create_integer_operand (&ops[6], succ_model);\n       create_integer_operand (&ops[7], fail_model);\n-      expand_insn (icode, 8, ops);\n-\n-      /* Return success/failure.  */\n-      target_bool = ops[0].value;\n-      target_oval = ops[1].value;\n-      goto success;\n+      if (maybe_expand_insn (icode, 8, ops))\n+\t{\n+\t  /* Return success/failure.  */\n+\t  target_bool = ops[0].value;\n+\t  target_oval = ops[1].value;\n+\t  goto success;\n+\t}\n     }\n \n   /* Otherwise fall back to the original __sync_val_compare_and_swap"}]}