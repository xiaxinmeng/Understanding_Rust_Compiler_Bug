{"sha": "02fb5732ff57c43f21ae95d5d01d6da70ca867e4", "node_id": "C_kwDOANBUbNoAKDAyZmI1NzMyZmY1N2M0M2YyMWFlOTVkNWQwMWQ2ZGE3MGNhODY3ZTQ", "commit": {"author": {"name": "Andre Vieira", "email": "andre.simoesdiasvieira@arm.com", "date": "2021-11-10T09:51:53Z"}, "committer": {"name": "Andre Vieira", "email": "andre.simoesdiasvieira@arm.com", "date": "2021-11-10T09:51:53Z"}, "message": "[AArch64] Fix big-endian testisms introduced by NEON gimple lowering patch\n\nThis patch reverts the tests for big-endian after the NEON gimple lowering\npatch.  The earlier patch only lowers NEON loads and stores for little-endian,\nmeaning the codegen now differs between endinanness so we need target specific\ntesting.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.target/aarch64/fmla_intrinsic_1.c: Fix big-endian testism.\n\t* gcc.target/aarch64/fmls_intrinsic_1.c: Likewise.\n\t* gcc.target/aarch64/fmul_intrinsic_1.c: Likewise.", "tree": {"sha": "52b52c5e5c0a5c1f220a05056385103a97ebaa96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52b52c5e5c0a5c1f220a05056385103a97ebaa96"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02fb5732ff57c43f21ae95d5d01d6da70ca867e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02fb5732ff57c43f21ae95d5d01d6da70ca867e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02fb5732ff57c43f21ae95d5d01d6da70ca867e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02fb5732ff57c43f21ae95d5d01d6da70ca867e4/comments", "author": {"login": "avieira-arm", "id": 68072104, "node_id": "MDQ6VXNlcjY4MDcyMTA0", "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avieira-arm", "html_url": "https://github.com/avieira-arm", "followers_url": "https://api.github.com/users/avieira-arm/followers", "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}", "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions", "organizations_url": "https://api.github.com/users/avieira-arm/orgs", "repos_url": "https://api.github.com/users/avieira-arm/repos", "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/avieira-arm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "avieira-arm", "id": 68072104, "node_id": "MDQ6VXNlcjY4MDcyMTA0", "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avieira-arm", "html_url": "https://github.com/avieira-arm", "followers_url": "https://api.github.com/users/avieira-arm/followers", "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}", "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions", "organizations_url": "https://api.github.com/users/avieira-arm/orgs", "repos_url": "https://api.github.com/users/avieira-arm/repos", "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/avieira-arm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b406bb901f7e98f7c6d66a240c2eb64b7cd7e615", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b406bb901f7e98f7c6d66a240c2eb64b7cd7e615", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b406bb901f7e98f7c6d66a240c2eb64b7cd7e615"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "c1aeb06e74753052c2ee441b361b92148f1b4b0a", "filename": "gcc/testsuite/gcc.target/aarch64/fmla_intrinsic_1.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02fb5732ff57c43f21ae95d5d01d6da70ca867e4/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Ffmla_intrinsic_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02fb5732ff57c43f21ae95d5d01d6da70ca867e4/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Ffmla_intrinsic_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Ffmla_intrinsic_1.c?ref=02fb5732ff57c43f21ae95d5d01d6da70ca867e4", "patch": "@@ -107,10 +107,12 @@ main (int argc, char **argv)\n \n /* vfma_lane_f64.\n    vfma_laneq_f64. */\n-/* { dg-final { scan-assembler-times \"fmadd\\\\td\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\" 2 } } */\n+/* { dg-final { scan-assembler-times \"fmadd\\\\td\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\" 1 { target aarch64_big_endian } } } */\n+/* { dg-final { scan-assembler-times \"fmadd\\\\td\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\" 2 { target aarch64_little_endian } } } */\n \n /* vfmaq_lane_f64.\n    vfmaq_laneq_f64.  */\n-/* { dg-final { scan-assembler-times \"fmla\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.d\\\\\\[\\[0-9\\]+\\\\\\]\" 2 } } */\n+/* { dg-final { scan-assembler-times \"fmla\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.d\\\\\\[\\[0-9\\]+\\\\\\]\" 3 { target aarch64_big_endian } } } */\n+/* { dg-final { scan-assembler-times \"fmla\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.d\\\\\\[\\[0-9\\]+\\\\\\]\" 2 { target aarch64_little_endian } } } */\n \n "}, {"sha": "3137ea91e809e37de589091e9bbd43bfe4d221a1", "filename": "gcc/testsuite/gcc.target/aarch64/fmls_intrinsic_1.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02fb5732ff57c43f21ae95d5d01d6da70ca867e4/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Ffmls_intrinsic_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02fb5732ff57c43f21ae95d5d01d6da70ca867e4/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Ffmls_intrinsic_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Ffmls_intrinsic_1.c?ref=02fb5732ff57c43f21ae95d5d01d6da70ca867e4", "patch": "@@ -108,10 +108,12 @@ main (int argc, char **argv)\n \n /* vfms_lane_f64.\n    vfms_laneq_f64.  */\n-/* { dg-final { scan-assembler-times \"fmsub\\\\td\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\" 2 } } */\n+/* { dg-final { scan-assembler-times \"fmsub\\\\td\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\" 1 { target aarch64_big_endian } } } */\n+/* { dg-final { scan-assembler-times \"fmsub\\\\td\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\\, d\\[0-9\\]+\" 2 { target aarch64_little_endian } } } */\n \n /* vfmsq_lane_f64.\n    vfmsq_laneq_f64.  */\n-/* { dg-final { scan-assembler-times \"fmls\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.d\\\\\\[\\[0-9\\]+\\\\\\]\" 2 } } */\n+/* { dg-final { scan-assembler-times \"fmls\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.d\\\\\\[\\[0-9\\]+\\\\\\]\" 3 { target aarch64_big_endian } } } */\n+/* { dg-final { scan-assembler-times \"fmls\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.d\\\\\\[\\[0-9\\]+\\\\\\]\" 2 { target aarch64_little_endian } } } */\n \n "}, {"sha": "7d4829c40d7042226f2f09fab9fdfa7c3dd211c4", "filename": "gcc/testsuite/gcc.target/aarch64/fmul_intrinsic_1.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02fb5732ff57c43f21ae95d5d01d6da70ca867e4/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Ffmul_intrinsic_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02fb5732ff57c43f21ae95d5d01d6da70ca867e4/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Ffmul_intrinsic_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Ffmul_intrinsic_1.c?ref=02fb5732ff57c43f21ae95d5d01d6da70ca867e4", "patch": "@@ -107,10 +107,12 @@ main (int argc, char **argv)\n \n /* vmul_lane_f64.\n    Vmul_laneq_f64. */\n-/* { dg-final { scan-assembler-times \"fmul\\\\td\\[0-9\\]+, d\\[0-9\\]+, d\\[0-9\\]+\" 2 } } */\n+/* { dg-final { scan-assembler-times \"fmul\\\\td\\[0-9\\]+, d\\[0-9\\]+, d\\[0-9\\]+\" 1 { target aarch64_big_endian } } } */\n+/* { dg-final { scan-assembler-times \"fmul\\\\td\\[0-9\\]+, d\\[0-9\\]+, d\\[0-9\\]+\" 2 { target aarch64_little_endian } } } */\n \n /* vmulq_lane_f64.\n    vmulq_laneq_f64.  */\n-/* { dg-final { scan-assembler-times \"fmul\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.d\\\\\\[\\[0-9\\]+\\\\\\]\" 2 } } */\n+/* { dg-final { scan-assembler-times \"fmul\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.d\\\\\\[\\[0-9\\]+\\\\\\]\" 3 { target aarch64_big_endian } } } */\n+/* { dg-final { scan-assembler-times \"fmul\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.d\\\\\\[\\[0-9\\]+\\\\\\]\" 2 { target aarch64_little_endian } } } */\n \n "}]}