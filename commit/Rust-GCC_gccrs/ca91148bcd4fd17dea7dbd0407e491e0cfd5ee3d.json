{"sha": "ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2E5MTE0OGJjZDRmZDE3ZGVhN2RiZDA0MDdlNDkxZTBjZmQ1ZWUzZA==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2002-10-11T20:23:21Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2002-10-11T20:23:21Z"}, "message": "objs-gcc.sh: Don't install GDB testsuite if GDB was not built.\n\n\t* objs-gcc.sh: Don't install GDB testsuite if GDB was not built.\n\t* btest-gcc.sh: Don't run GDB testsuite if it doesn't exist.\n\nFrom-SVN: r58062", "tree": {"sha": "9e9e1cd2000ef7f031686e36fd6bd2ae144a5c12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9e9e1cd2000ef7f031686e36fd6bd2ae144a5c12"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "dac45b5c091237cb7e8f723e75b3897a8f763432", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dac45b5c091237cb7e8f723e75b3897a8f763432", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dac45b5c091237cb7e8f723e75b3897a8f763432"}], "stats": {"total": 25, "additions": 18, "deletions": 7}, "files": [{"sha": "9b3406a71c2893c046ba9eb4ddf823ce727ae04c", "filename": "contrib/regression/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d/contrib%2Fregression%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d/contrib%2Fregression%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fregression%2FChangeLog?ref=ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d", "patch": "@@ -1,3 +1,8 @@\n+2002-10-11  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* objs-gcc.sh: Don't install GDB testsuite if GDB was not built.\n+\t* btest-gcc.sh: Don't run GDB testsuite if it doesn't exist.\n+\n 2002-10-09  Phil Edwards  <pme@gcc.gnu.org>\n \n \t* btest-gcc.sh, objs-gcc.sh:  Update TARGET comments."}, {"sha": "7dfddb86ed6780214ec21b61e8fd84666a6d85c6", "filename": "contrib/regression/btest-gcc.sh", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d/contrib%2Fregression%2Fbtest-gcc.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d/contrib%2Fregression%2Fbtest-gcc.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fregression%2Fbtest-gcc.sh?ref=ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d", "patch": "@@ -127,6 +127,7 @@ make check-target-libstdc++-v3\n \n # Test the just-built GCC with the GDB testsuite.\n mkdir test-gdb || exit 1\n+if [ -d $GDB_TESTSUITE ] ; then\n cd $GDB_TESTSUITE || exit 1\n for i in gdb.* ; do\n   if [ -d $i ] ; then\n@@ -142,6 +143,9 @@ echo \"set build_alias $H_BUILD\" >> site.exp\n echo \"set build_triplet $H_BUILD\" >> site.exp\n echo \"set srcdir $GDB_TESTSUITE\" >> site.exp\n runtest --tool gdb\n+else\n+  echo 'gdb tests not run' > $BUILD/test-gdb/gdb.sum\n+fi\n \n # Sanity-check the testlogs.  They should contain at least one PASS.\n cd $BUILD || exit 1"}, {"sha": "cc152d1f80cef4393e7f2fcf062da9f9d4e73513", "filename": "contrib/regression/objs-gcc.sh", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d/contrib%2Fregression%2Fobjs-gcc.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d/contrib%2Fregression%2Fobjs-gcc.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fregression%2Fobjs-gcc.sh?ref=ca91148bcd4fd17dea7dbd0407e491e0cfd5ee3d", "patch": "@@ -113,13 +113,15 @@ else\n   make install || exit 1\n fi\n \n-mkdir -p $PREFIX/share/gdb-testsuite || exit 1\n-cd $SOURCE/gdb/testsuite || exit 1\n-find . -print | cpio -pdmu $PREFIX/share/gdb-testsuite || exit 1\n-# selftest.exp requires keeping old sources around, which is impractical\n-rm $PREFIX/share/gdb-testsuite/gdb.base/selftest.exp\n-# these tests seem to be broken and randomly failing\n-rm -r $PREFIX/share/gdb-testsuite/gdb.mi\n+if [ -x $PREFIX/bin/$TARGET-gdb ] ; then\n+  mkdir -p $PREFIX/share/gdb-testsuite || exit 1\n+  cd $SOURCE/gdb/testsuite || exit 1\n+  find . -print | cpio -pdmu $PREFIX/share/gdb-testsuite || exit 1\n+  # selftest.exp requires keeping old sources around, which is impractical\n+  rm $PREFIX/share/gdb-testsuite/gdb.base/selftest.exp\n+  # these tests seem to be broken and randomly failing\n+  rm -r $PREFIX/share/gdb-testsuite/gdb.mi\n+fi\n \n echo pass > $RESULT\n exit 0"}]}