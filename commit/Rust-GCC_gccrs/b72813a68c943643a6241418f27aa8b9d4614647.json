{"sha": "b72813a68c943643a6241418f27aa8b9d4614647", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjcyODEzYTY4Yzk0MzY0M2E2MjQxNDE4ZjI3YWE4YjlkNDYxNDY0Nw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-11-11T23:28:54Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-11-11T23:28:54Z"}, "message": "libgo: fix DejaGNU testsuite compiler when using build sysroot\n    \n    Patch by Maciej W. Rozycki.\n    \n    Reviewed-on: https://go-review.googlesource.com/c/gofrontend/+/206577\n\nFrom-SVN: r278070", "tree": {"sha": "6824183e1fd5660d87c890193f616f8e6e81136e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6824183e1fd5660d87c890193f616f8e6e81136e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b72813a68c943643a6241418f27aa8b9d4614647", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b72813a68c943643a6241418f27aa8b9d4614647", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b72813a68c943643a6241418f27aa8b9d4614647", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b72813a68c943643a6241418f27aa8b9d4614647/comments", "author": null, "committer": null, "parents": [{"sha": "ce6a6c007e5a985e64fd6293b9606420debe50f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce6a6c007e5a985e64fd6293b9606420debe50f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce6a6c007e5a985e64fd6293b9606420debe50f5"}], "stats": {"total": 42, "additions": 34, "deletions": 8}, "files": [{"sha": "ba80569e26db0832b8d0364a6254ea4637272cc8", "filename": "libgo/configure", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure?ref=b72813a68c943643a6241418f27aa8b9d4614647", "patch": "@@ -15850,7 +15850,7 @@ else\n   multilib_arg=\n fi\n \n-ac_config_files=\"$ac_config_files Makefile testsuite/Makefile\"\n+ac_config_files=\"$ac_config_files Makefile testsuite/Makefile testsuite/libgo-test-support.exp\"\n \n \n ac_config_commands=\"$ac_config_commands default\"\n@@ -17031,6 +17031,7 @@ do\n     \"libtool\") CONFIG_COMMANDS=\"$CONFIG_COMMANDS libtool\" ;;\n     \"Makefile\") CONFIG_FILES=\"$CONFIG_FILES Makefile\" ;;\n     \"testsuite/Makefile\") CONFIG_FILES=\"$CONFIG_FILES testsuite/Makefile\" ;;\n+    \"testsuite/libgo-test-support.exp\") CONFIG_FILES=\"$CONFIG_FILES testsuite/libgo-test-support.exp\" ;;\n     \"default\") CONFIG_COMMANDS=\"$CONFIG_COMMANDS default\" ;;\n \n   *) as_fn_error $? \"invalid argument: \\`$ac_config_target'\" \"$LINENO\" 5;;"}, {"sha": "00b4054a0ee6826820bcaf58618262384543ca91", "filename": "libgo/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure.ac?ref=b72813a68c943643a6241418f27aa8b9d4614647", "patch": "@@ -877,7 +877,7 @@ else\n   multilib_arg=\n fi\n \n-AC_CONFIG_FILES(Makefile testsuite/Makefile)\n+AC_CONFIG_FILES(Makefile testsuite/Makefile testsuite/libgo-test-support.exp)\n \n AC_CONFIG_COMMANDS([default],\n [if test -n \"$CONFIG_FILES\"; then"}, {"sha": "892cda770dc99cb358aa9abb0a4192cb243ff2ff", "filename": "libgo/testsuite/Makefile.am", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Ftestsuite%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Ftestsuite%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Ftestsuite%2FMakefile.am?ref=b72813a68c943643a6241418f27aa8b9d4614647", "patch": "@@ -11,6 +11,8 @@ RUNTEST = `if [ -f $(top_srcdir)/../dejagnu/runtest ] ; then \\\n \t       echo $(top_srcdir)/../dejagnu/runtest ; \\\n \t    else echo runtest; fi`\n \n+EXTRA_DEJAGNU_SITE_CONFIG = libgo-test-support.exp\n+\n # When running the tests we set GCC_EXEC_PREFIX to the install tree so that\n # files that have already been installed there will be found.  The -B option\n # overrides it, so use of GCC_EXEC_PREFIX will not result in using GCC files"}, {"sha": "7b4b27f0c309ddd1bd2bfe121b1a20e3914af8e3", "filename": "libgo/testsuite/Makefile.in", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Ftestsuite%2FMakefile.in?ref=b72813a68c943643a6241418f27aa8b9d4614647", "patch": "@@ -106,7 +106,7 @@ am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \\\n DIST_COMMON = $(srcdir)/Makefile.am\n mkinstalldirs = $(SHELL) $(top_srcdir)/../mkinstalldirs\n CONFIG_HEADER = $(top_builddir)/config.h\n-CONFIG_CLEAN_FILES =\n+CONFIG_CLEAN_FILES = libgo-test-support.exp\n CONFIG_CLEAN_VPATH_FILES =\n AM_V_P = $(am__v_P_@AM_V@)\n am__v_P_ = $(am__v_P_@AM_DEFAULT_V@)\n@@ -299,6 +299,7 @@ RUNTEST = `if [ -f $(top_srcdir)/../dejagnu/runtest ] ; then \\\n \t       echo $(top_srcdir)/../dejagnu/runtest ; \\\n \t    else echo runtest; fi`\n \n+EXTRA_DEJAGNU_SITE_CONFIG = libgo-test-support.exp\n \n # When running the tests we set GCC_EXEC_PREFIX to the install tree so that\n # files that have already been installed there will be found.  The -B option\n@@ -338,6 +339,8 @@ $(top_srcdir)/configure: @MAINTAINER_MODE_TRUE@ $(am__configure_deps)\n $(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)\n \tcd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh\n $(am__aclocal_m4_deps):\n+libgo-test-support.exp: $(top_builddir)/config.status $(srcdir)/libgo-test-support.exp.in\n+\tcd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@\n \n mostlyclean-libtool:\n \t-rm -f *.lo"}, {"sha": "b5833bbafe270dc5de1a3ce60d7f674c4cb0c00c", "filename": "libgo/testsuite/lib/libgo.exp", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Ftestsuite%2Flib%2Flibgo.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Ftestsuite%2Flib%2Flibgo.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Ftestsuite%2Flib%2Flibgo.exp?ref=b72813a68c943643a6241418f27aa8b9d4614647", "patch": "@@ -14,13 +14,16 @@\n # along with GCC; see the file COPYING3.  If not see\n # <http://www.gnu.org/licenses/>.\n \n-set gccdir [lookfor_file $tool_root_dir gcc/libgcc.a]\n-if {$gccdir != \"\"} {\n-    set gccdir [file dirname $gccdir]\n-}\n-set GOC_UNDER_TEST \"$gccdir/gccgo -B$gccdir/\"\n set TESTING_IN_BUILD_TREE 1\n \n+if ![info exists GOC_UNDER_TEST] then {\n+    set gccdir [lookfor_file $tool_root_dir gcc/libgcc.a]\n+    if {$gccdir != \"\"} {\n+\tset gccdir [file dirname $gccdir]\n+    }\n+    set GOC_UNDER_TEST \"$gccdir/gccgo -B$gccdir/\"\n+}\n+\n if [info exists GOTEST_TMPDIR] {\n     set tmpdir $GOTEST_TMPDIR\n }"}, {"sha": "aaa6c5ef91d403891da5ac23890887f25ff1f00a", "filename": "libgo/testsuite/libgo-test-support.exp.in", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Ftestsuite%2Flibgo-test-support.exp.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b72813a68c943643a6241418f27aa8b9d4614647/libgo%2Ftestsuite%2Flibgo-test-support.exp.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Ftestsuite%2Flibgo-test-support.exp.in?ref=b72813a68c943643a6241418f27aa8b9d4614647", "patch": "@@ -0,0 +1,17 @@\n+# Copyright (C) 2019 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+set GOC_UNDER_TEST {@GOC@}"}]}