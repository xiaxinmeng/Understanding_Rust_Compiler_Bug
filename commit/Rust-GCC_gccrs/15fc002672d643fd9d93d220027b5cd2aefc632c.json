{"sha": "15fc002672d643fd9d93d220027b5cd2aefc632c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTVmYzAwMjY3MmQ2NDNmZDlkOTNkMjIwMDI3YjVjZDJhZWZjNjMyYw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-05-06T17:44:29Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-05-06T17:44:29Z"}, "message": "(allocate_dynamic_stack_space): Just return virtual_stack_dynamic_rtx if asking for zero bytes.\n\n(allocate_dynamic_stack_space): Just return virtual_stack_dynamic_rtx if\nasking for zero bytes.\nSet current_function_calls_alloca here and also record new stack level for\nnonlocal gotos.\n\nFrom-SVN: r7229", "tree": {"sha": "d7b5a1c9d8c9683d72283fd889f53d7255accaa7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d7b5a1c9d8c9683d72283fd889f53d7255accaa7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/15fc002672d643fd9d93d220027b5cd2aefc632c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15fc002672d643fd9d93d220027b5cd2aefc632c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15fc002672d643fd9d93d220027b5cd2aefc632c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15fc002672d643fd9d93d220027b5cd2aefc632c/comments", "author": null, "committer": null, "parents": [{"sha": "1fd3ef7f65b9a12b392c889568cbcde92abe5f5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1fd3ef7f65b9a12b392c889568cbcde92abe5f5b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1fd3ef7f65b9a12b392c889568cbcde92abe5f5b"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "7f1e196e5a870edab931f22bc33e5c5f7e110984", "filename": "gcc/explow.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15fc002672d643fd9d93d220027b5cd2aefc632c/gcc%2Fexplow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15fc002672d643fd9d93d220027b5cd2aefc632c/gcc%2Fexplow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexplow.c?ref=15fc002672d643fd9d93d220027b5cd2aefc632c", "patch": "@@ -915,6 +915,15 @@ allocate_dynamic_stack_space (size, target, known_align)\n      rtx target;\n      int known_align;\n {\n+  /* If we're asking for zero bytes, it doesn't matter what we point\n+     to since we can't derefference it.  But return a reasonable\n+     address anyway.  */\n+  if (size == const0_rtx)\n+    return virtual_stack_dynamic_rtx;\n+\n+  /* Otherwise, show we're calling alloca or equivalent.  */\n+  current_function_calls_alloca = 1;\n+\n   /* Ensure the size is in the proper mode.  */\n   if (GET_MODE (size) != VOIDmode && GET_MODE (size) != Pmode)\n     size = convert_to_mode (Pmode, size, 1);\n@@ -1061,6 +1070,10 @@ allocate_dynamic_stack_space (size, target, known_align)\n     emit_insn (gen_probe ());\n #endif\n \n+  /* Record the new stack level for nonlocal gotos.  */\n+  if (nonlocal_goto_handler_slot != 0)\n+    emit_stack_save (SAVE_NONLOCAL, &nonlocal_goto_stack_level, NULL_RTX);\n+\n   return target;\n }\n \f"}]}