{"sha": "23b72f17460354ac10b83db1ad1a4c854ea5edfd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjNiNzJmMTc0NjAzNTRhYzEwYjgzZGIxYWQxYTRjODU0ZWE1ZWRmZA==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@nildram.co.uk", "date": "2007-09-25T21:18:11Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-09-25T21:18:11Z"}, "message": "libstdc++.exp (check_v3_target_fileio): Test lseek.\n\nlibstdc++-v3/\n\t* testsuite/lib/libstdc++.exp (check_v3_target_fileio): Test lseek.\n\nFrom-SVN: r128772", "tree": {"sha": "def41e46a510e20b9fcb9c60b98e2eacc72a9ff2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/def41e46a510e20b9fcb9c60b98e2eacc72a9ff2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/23b72f17460354ac10b83db1ad1a4c854ea5edfd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23b72f17460354ac10b83db1ad1a4c854ea5edfd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23b72f17460354ac10b83db1ad1a4c854ea5edfd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23b72f17460354ac10b83db1ad1a4c854ea5edfd/comments", "author": null, "committer": null, "parents": [{"sha": "0a86bcc9251e57dcb5dd33601171b456ef493cd5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a86bcc9251e57dcb5dd33601171b456ef493cd5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0a86bcc9251e57dcb5dd33601171b456ef493cd5"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "f274975795f5d5959ee6827c0d549448b864fb8a", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23b72f17460354ac10b83db1ad1a4c854ea5edfd/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23b72f17460354ac10b83db1ad1a4c854ea5edfd/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=23b72f17460354ac10b83db1ad1a4c854ea5edfd", "patch": "@@ -1,3 +1,7 @@\n+2007-09-25  Richard Sandiford  <rsandifo@nildram.co.uk>\n+\n+\t* testsuite/lib/libstdc++.exp (check_v3_target_fileio): Test lseek.\n+\n 2007-09-17  Benjamin Kosnik  <bkoz@redhat.com>\n \t    Chalathip Thumkanon  <chalathip@gmail.com>\n "}, {"sha": "6603d71a01dc61aec3a2af6f69972cdb61e7e122", "filename": "libstdc++-v3/testsuite/lib/libstdc++.exp", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23b72f17460354ac10b83db1ad1a4c854ea5edfd/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23b72f17460354ac10b83db1ad1a4c854ea5edfd/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp?ref=23b72f17460354ac10b83db1ad1a4c854ea5edfd", "patch": "@@ -599,15 +599,20 @@ proc check_v3_target_fileio { } {\n \tputs $f \"int main ()\"\n \tputs $f \"{\"\n \tputs $f \"  int fd  = open (\\\".\\\", O_RDONLY);\"\n+\tputs $f \"  int ret = 0;\"\n \tputs $f \"  if (fd == -1)\"\n \tputs $f \"  {\"\n \tputs $f \"    int err = errno;\"\n \tputs $f \"    if (err == EIO || err == ENOSYS)\"\n-\tputs $f \"      return 1;\"\n+\tputs $f \"      ret = 1;\"\n \tputs $f \"  }\"\n \tputs $f \"  else\"\n+\tputs $f \"  {\"\n+\tputs $f \"    if (lseek (fd, 0, SEEK_CUR) == -1)\"\n+\tputs $f \"      ret = 1;\"\n \tputs $f \"    close (fd);\"\n-\tputs $f \"  return 0;\"\n+\tputs $f \"  }\"\n+\tputs $f \"  return ret;\"\n \tputs $f \"}\" \n \tclose $f\n "}]}