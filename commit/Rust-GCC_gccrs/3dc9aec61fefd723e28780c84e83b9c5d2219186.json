{"sha": "3dc9aec61fefd723e28780c84e83b9c5d2219186", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2RjOWFlYzYxZmVmZDcyM2UyODc4MGM4NGU4M2I5YzVkMjIxOTE4Ng==", "commit": {"author": {"name": "Will Cohen", "email": "wcohen@redhat.com", "date": "2000-12-05T16:21:54Z"}, "committer": {"name": "William Cohen", "email": "wcohen@gcc.gnu.org", "date": "2000-12-05T16:21:54Z"}, "message": "Modification to define_label and finish_case_label in decl.c to handle\nscoping correctly.\n\nFrom-SVN: r38041", "tree": {"sha": "a8a66e35983e04131f75782b10f0c10ddc5cc82c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a8a66e35983e04131f75782b10f0c10ddc5cc82c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3dc9aec61fefd723e28780c84e83b9c5d2219186", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3dc9aec61fefd723e28780c84e83b9c5d2219186", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3dc9aec61fefd723e28780c84e83b9c5d2219186", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3dc9aec61fefd723e28780c84e83b9c5d2219186/comments", "author": {"login": "wcohen", "id": 1050609, "node_id": "MDQ6VXNlcjEwNTA2MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1050609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wcohen", "html_url": "https://github.com/wcohen", "followers_url": "https://api.github.com/users/wcohen/followers", "following_url": "https://api.github.com/users/wcohen/following{/other_user}", "gists_url": "https://api.github.com/users/wcohen/gists{/gist_id}", "starred_url": "https://api.github.com/users/wcohen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wcohen/subscriptions", "organizations_url": "https://api.github.com/users/wcohen/orgs", "repos_url": "https://api.github.com/users/wcohen/repos", "events_url": "https://api.github.com/users/wcohen/events{/privacy}", "received_events_url": "https://api.github.com/users/wcohen/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cbb409451baa17eed88f57e0b575ff5f6b01fab5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbb409451baa17eed88f57e0b575ff5f6b01fab5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbb409451baa17eed88f57e0b575ff5f6b01fab5"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "7358f65cbeb44c6a56bc2f2977878048c5f5e76d", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dc9aec61fefd723e28780c84e83b9c5d2219186/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dc9aec61fefd723e28780c84e83b9c5d2219186/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3dc9aec61fefd723e28780c84e83b9c5d2219186", "patch": "@@ -1,3 +1,9 @@\n+2000-12-05  Will Cohen  <wcohen@redhat.com>\n+\n+\t* decl.c (finish_case_label): Cleared\n+\tmore_cleanups_ok in surrounding function scopes.\n+\t(define_label): Likewise.\n+\n 2000-12-05  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* cp-tree.h (IDENTIFIER_VIRTUAL_P): Document."}, {"sha": "d68c300e2bca25e2a55d1a16d12d087775a59434", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dc9aec61fefd723e28780c84e83b9c5d2219186/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dc9aec61fefd723e28780c84e83b9c5d2219186/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=3dc9aec61fefd723e28780c84e83b9c5d2219186", "patch": "@@ -5068,14 +5068,16 @@ define_label (filename, line, name)\n {\n   tree decl = lookup_label (name);\n   struct named_label_list *ent;\n+  register struct binding_level *p;\n \n   for (ent = named_labels; ent; ent = ent->next)\n     if (ent->label_decl == decl)\n       break;\n \n-  /* After labels, make any new cleanups go into their\n+  /* After labels, make any new cleanups in the function go into their\n      own new (temporary) binding contour.  */\n-  current_binding_level->more_cleanups_ok = 0;\n+  for (p = current_binding_level; !(p->parm_flag); p = p->level_chain)\n+    p->more_cleanups_ok = 0;\n \n   if (name == get_identifier (\"wchar_t\"))\n     cp_pedwarn (\"label named wchar_t\");\n@@ -5161,6 +5163,7 @@ finish_case_label (low_value, high_value)\n      tree high_value;\n {\n   tree cond;\n+  register struct binding_level *p;\n \n   if (! switch_stack)\n     {\n@@ -5194,9 +5197,10 @@ finish_case_label (low_value, high_value)\n \n   check_switch_goto (switch_stack->level);\n \n-  /* After labels, make any new cleanups go into their\n+  /* After labels, make any new cleanups in the function go into their\n      own new (temporary) binding contour.  */\n-  current_binding_level->more_cleanups_ok = 0;\n+  for (p = current_binding_level; !(p->parm_flag); p = p->level_chain)\n+    p->more_cleanups_ok = 0;\n   current_function_return_value = NULL_TREE;\n }\n \f"}]}