{"sha": "4779063140d6dc06de57d489923c91df7513f374", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDc3OTA2MzE0MGQ2ZGMwNmRlNTdkNDg5OTIzYzkxZGY3NTEzZjM3NA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2018-02-15T18:05:40Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2018-02-15T18:05:40Z"}, "message": "re PR c++/84330 ([concepts] ICE with broken constraint)\n\n/cp\n2018-02-15  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/84330\n\t* constraint.cc (tsubst_constraint_info): Handle an error_mark_node\n\tas first argument.\n\n/testsuite\n2018-02-15  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/84330\n\t* g++.dg/concepts/pr84330.C: New.\n\nFrom-SVN: r257698", "tree": {"sha": "94f235097de8e000d7242084733fddf09bb25f14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/94f235097de8e000d7242084733fddf09bb25f14"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4779063140d6dc06de57d489923c91df7513f374", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4779063140d6dc06de57d489923c91df7513f374", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4779063140d6dc06de57d489923c91df7513f374", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4779063140d6dc06de57d489923c91df7513f374/comments", "author": null, "committer": null, "parents": [{"sha": "60887f8c2df851fd14988578dfe23126e2e8b9b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60887f8c2df851fd14988578dfe23126e2e8b9b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60887f8c2df851fd14988578dfe23126e2e8b9b5"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "f7fd4e36278cb05f1062bcbff4b73fdcbbd2a11f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4779063140d6dc06de57d489923c91df7513f374/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4779063140d6dc06de57d489923c91df7513f374/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=4779063140d6dc06de57d489923c91df7513f374", "patch": "@@ -1,3 +1,9 @@\n+2018-02-15  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/84330\n+\t* constraint.cc (tsubst_constraint_info): Handle an error_mark_node\n+\tas first argument.\n+\n 2018-02-14  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/84350"}, {"sha": "37eded17c941f42d48a5373091dfa6bec757a93a", "filename": "gcc/cp/constraint.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4779063140d6dc06de57d489923c91df7513f374/gcc%2Fcp%2Fconstraint.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4779063140d6dc06de57d489923c91df7513f374/gcc%2Fcp%2Fconstraint.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fconstraint.cc?ref=4779063140d6dc06de57d489923c91df7513f374", "patch": "@@ -1918,7 +1918,7 @@ tsubst_constraint_info (tree t, tree args,\n tree\n tsubst_constraint (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n {\n-  if (t == NULL_TREE)\n+  if (t == NULL_TREE || t == error_mark_node)\n     return t;\n   switch (TREE_CODE (t))\n   {"}, {"sha": "91e14ced710958dfa77b769648d4993641e503f0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4779063140d6dc06de57d489923c91df7513f374/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4779063140d6dc06de57d489923c91df7513f374/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4779063140d6dc06de57d489923c91df7513f374", "patch": "@@ -1,3 +1,8 @@\n+2018-02-15  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/84330\n+\t* g++.dg/concepts/pr84330.C: New.\n+\n 2018-02-15  Tom de Vries  <tom@codesourcery.com>\n \n \t* gcc.dg/Wstringop-overflow-3.c: Require effective target alloca."}, {"sha": "975ee8941db8e56f26a3c7726dbb5d43ce14ea25", "filename": "gcc/testsuite/g++.dg/concepts/pr84330.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4779063140d6dc06de57d489923c91df7513f374/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fpr84330.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4779063140d6dc06de57d489923c91df7513f374/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fpr84330.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fpr84330.C?ref=4779063140d6dc06de57d489923c91df7513f374", "patch": "@@ -0,0 +1,12 @@\n+// PR c++/84330\n+// { dg-options \"-fconcepts\" }\n+\n+struct A\n+{\n+  template<typename T> requires sizeof(T) >> 0 void foo(T);  // { dg-error \"predicate constraint\" }\n+\n+  void bar()\n+  {\n+    foo(0);  // { dg-error \"no matching\" }\n+  }\n+};"}]}