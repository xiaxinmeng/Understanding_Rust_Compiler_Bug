{"sha": "9c026b8767d906ad9969f287152b237d9a20258e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWMwMjZiODc2N2Q5MDZhZDk5NjlmMjg3MTUyYjIzN2Q5YTIwMjU4ZQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2010-05-08T11:38:26Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-05-08T11:38:26Z"}, "message": "* gcc-interface/decl.c (make_aligning_type): Declare the type.\n\nFrom-SVN: r159183", "tree": {"sha": "c9ff0be570529a9d26034693ee68985146adcd5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c9ff0be570529a9d26034693ee68985146adcd5f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c026b8767d906ad9969f287152b237d9a20258e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c026b8767d906ad9969f287152b237d9a20258e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c026b8767d906ad9969f287152b237d9a20258e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c026b8767d906ad9969f287152b237d9a20258e/comments", "author": null, "committer": null, "parents": [{"sha": "35e2a4b8423dda850cb7898e30fdd75762226c4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35e2a4b8423dda850cb7898e30fdd75762226c4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35e2a4b8423dda850cb7898e30fdd75762226c4b"}], "stats": {"total": 56, "additions": 53, "deletions": 3}, "files": [{"sha": "3878ccd414937a15f86661381d4a0de1d8e3a241", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c026b8767d906ad9969f287152b237d9a20258e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c026b8767d906ad9969f287152b237d9a20258e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=9c026b8767d906ad9969f287152b237d9a20258e", "patch": "@@ -1,3 +1,7 @@\n+2010-05-08  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/decl.c (make_aligning_type): Declare the type.\n+\n 2010-05-08  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/decl.c (gnat_to_gnu_entity): Create variables for size"}, {"sha": "6df79fb878ed04b6e68614dacc857a428f48d521", "filename": "gcc/ada/gcc-interface/decl.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c026b8767d906ad9969f287152b237d9a20258e/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c026b8767d906ad9969f287152b237d9a20258e/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.c?ref=9c026b8767d906ad9969f287152b237d9a20258e", "patch": "@@ -5955,8 +5955,8 @@ make_aligning_type (tree type, unsigned int align, tree size,\n \n   if (TREE_CODE (name) == TYPE_DECL)\n     name = DECL_NAME (name);\n-\n-  TYPE_NAME (record_type) = concat_name (name, \"_ALIGN\");\n+  name = concat_name (name, \"ALIGN\");\n+  TYPE_NAME (record_type) = name;\n \n   /* Compute VOFFSET and then POS.  The next byte position multiple of some\n      alignment after some address is obtained by \"and\"ing the alignment minus\n@@ -6001,8 +6001,12 @@ make_aligning_type (tree type, unsigned int align, tree size,\n \t\t  size_int (room + align / BITS_PER_UNIT));\n \n   SET_TYPE_MODE (record_type, BLKmode);\n-\n   relate_alias_sets (record_type, type, ALIAS_SET_COPY);\n+\n+  /* Declare it now since it will never be declared otherwise.  This is\n+     necessary to ensure that its subtrees are properly marked.  */\n+  create_type_decl (name, record_type, NULL, true, false, Empty);\n+\n   return record_type;\n }\n \f"}, {"sha": "08266b1d434c22f01cbf730446f9edf654069aa8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c026b8767d906ad9969f287152b237d9a20258e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c026b8767d906ad9969f287152b237d9a20258e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9c026b8767d906ad9969f287152b237d9a20258e", "patch": "@@ -1,3 +1,7 @@\n+2010-05-08  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/lto4.ad[sb]: New test.\n+\n 2010-05-08  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/specs/lto3.ads: New test."}, {"sha": "4e84b1d563d9f30214d51a756bb9581fcdea343a", "filename": "gcc/testsuite/gnat.dg/lto4.adb", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c026b8767d906ad9969f287152b237d9a20258e/gcc%2Ftestsuite%2Fgnat.dg%2Flto4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c026b8767d906ad9969f287152b237d9a20258e/gcc%2Ftestsuite%2Fgnat.dg%2Flto4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Flto4.adb?ref=9c026b8767d906ad9969f287152b237d9a20258e", "patch": "@@ -0,0 +1,12 @@\n+-- { dg-do compile }\n+-- { dg-options \"-flto\" }\n+\n+package body Lto4 is\n+\n+   procedure SS_Allocate (Stack : Stack_Ptr) is\n+      Chunk : Chunk_Ptr := Stack.Current_Chunk;\n+   begin\n+      Chunk := new Chunk_Id (First => Chunk.Last, Last  => Chunk.Last);\n+   end;\n+\n+end Lto4;"}, {"sha": "36c9f9464e52b11f18063b10bdacfa290b9cc682", "filename": "gcc/testsuite/gnat.dg/lto4.ads", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c026b8767d906ad9969f287152b237d9a20258e/gcc%2Ftestsuite%2Fgnat.dg%2Flto4.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c026b8767d906ad9969f287152b237d9a20258e/gcc%2Ftestsuite%2Fgnat.dg%2Flto4.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Flto4.ads?ref=9c026b8767d906ad9969f287152b237d9a20258e", "patch": "@@ -0,0 +1,26 @@\n+with System.Storage_Elements;\n+\n+package Lto4 is\n+\n+   package SSE renames System.Storage_Elements;\n+\n+   type SS_Ptr is new SSE.Integer_Address;\n+\n+   type Memory is array (SS_Ptr range <>) of SSE.Storage_Element;\n+   for Memory'Alignment use Standard'Maximum_Alignment;\n+\n+   type Chunk_Id (First, Last : SS_Ptr) is record\n+      Mem : Memory (First .. Last);\n+   end record;\n+\n+   type Chunk_Ptr is access all Chunk_Id;\n+\n+   type Stack_Id is record\n+      Current_Chunk : Chunk_Ptr;\n+   end record;\n+\n+   type Stack_Ptr is access Stack_Id;\n+\n+   procedure SS_Allocate (Stack : Stack_Ptr);\n+\n+end Lto4;"}]}