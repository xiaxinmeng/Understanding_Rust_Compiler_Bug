{"sha": "785f21af82139f512eb12f3318899c9f967409e6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzg1ZjIxYWY4MjEzOWY1MTJlYjEyZjMzMTg4OTljOWY5Njc0MDllNg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2015-02-13T05:26:37Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2015-02-13T05:26:37Z"}, "message": "re PR c++/64956 (__GXX_ABI_VERSION needs a proper definition for the 5.x releases)\n\n\tPR c++/64956\n\t* c-opts.c (c_common_post_options): Change flag_abi_version from 0\n\tto the current highest version.\n\t* c-cppbuiltin.c (c_cpp_builtins): Assert that it isn't 0.\n\nFrom-SVN: r220675", "tree": {"sha": "744efbe1acbab7ac37dd08aff6192b4ea5985c38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/744efbe1acbab7ac37dd08aff6192b4ea5985c38"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/785f21af82139f512eb12f3318899c9f967409e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/785f21af82139f512eb12f3318899c9f967409e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/785f21af82139f512eb12f3318899c9f967409e6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/785f21af82139f512eb12f3318899c9f967409e6/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6a1e352e1efbdf33a3df892dadd725f0b09c70c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a1e352e1efbdf33a3df892dadd725f0b09c70c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a1e352e1efbdf33a3df892dadd725f0b09c70c9"}], "stats": {"total": 31, "additions": 20, "deletions": 11}, "files": [{"sha": "c63384be94758b01a5f501c406031f7c980571a2", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/785f21af82139f512eb12f3318899c9f967409e6/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/785f21af82139f512eb12f3318899c9f967409e6/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=785f21af82139f512eb12f3318899c9f967409e6", "patch": "@@ -1,3 +1,10 @@\n+2015-02-12  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/64956\n+\t* c-opts.c (c_common_post_options): Change flag_abi_version from 0\n+\tto the current highest version.\n+\t* c-cppbuiltin.c (c_cpp_builtins): Assert that it isn't 0.\n+\n 2015-02-04  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/64824"}, {"sha": "60c2d7f38624e67f9b3f92f6d8a30380b91142cd", "filename": "gcc/c-family/c-cppbuiltin.c", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/785f21af82139f512eb12f3318899c9f967409e6/gcc%2Fc-family%2Fc-cppbuiltin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/785f21af82139f512eb12f3318899c9f967409e6/gcc%2Fc-family%2Fc-cppbuiltin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-cppbuiltin.c?ref=785f21af82139f512eb12f3318899c9f967409e6", "patch": "@@ -891,14 +891,8 @@ c_cpp_builtins (cpp_reader *pfile)\n   /* Represents the C++ ABI version, always defined so it can be used while\n      preprocessing C and assembler.  */\n   if (flag_abi_version == 0)\n-    /* Use a very large value so that:\n-\n-\t #if __GXX_ABI_VERSION >= <value for version X>\n-\n-       will work whether the user explicitly says \"-fabi-version=x\" or\n-       \"-fabi-version=0\".  Do not use INT_MAX because that will be\n-       different from system to system.  */\n-    builtin_define_with_int_value (\"__GXX_ABI_VERSION\", 999999);\n+    /* We should have set this to something real in c_common_post_options.  */\n+    gcc_unreachable ();\n   else if (flag_abi_version == 1)\n     /* Due to a historical accident, this version had the value\n        \"102\".  */"}, {"sha": "1a67b5a766debc87b54ed83511b0a7eb8012035d", "filename": "gcc/c-family/c-opts.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/785f21af82139f512eb12f3318899c9f967409e6/gcc%2Fc-family%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/785f21af82139f512eb12f3318899c9f967409e6/gcc%2Fc-family%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-opts.c?ref=785f21af82139f512eb12f3318899c9f967409e6", "patch": "@@ -886,6 +886,11 @@ c_common_post_options (const char **pfilename)\n \twarn_abi = false;\n     }\n \n+  /* Change flag_abi_version to be the actual current ABI level for the\n+     benefit of c_cpp_builtins.  */\n+  if (flag_abi_version == 0)\n+    flag_abi_version = 8;\n+\n   if (cxx_dialect >= cxx11)\n     {\n       /* If we're allowing C++0x constructs, don't warn about C++98"}, {"sha": "0c60e84797aab2e89d2e4943cc8e46d3af248372", "filename": "gcc/common.opt", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/785f21af82139f512eb12f3318899c9f967409e6/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/785f21af82139f512eb12f3318899c9f967409e6/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=785f21af82139f512eb12f3318899c9f967409e6", "patch": "@@ -806,7 +806,8 @@ Driver Undocumented\n ;\n ; 1: The version of the ABI first used in G++ 3.2.  No longer selectable.\n ;\n-; 2: The version of the ABI first used in G++ 3.4 (and current default).\n+; 2: The version of the ABI first used in G++ 3.4, and the default\n+;    until GCC 4.9.\n ;\n ; 3: The version of the ABI that fixes the missing underscore\n ;    in template non-type arguments of pointer type.\n@@ -831,7 +832,8 @@ Driver Undocumented\n ;\n ; 8: The version of the ABI that corrects the substitution behavior of\n ;    function types with function-cv-qualifiers.\n-;    First selectable in G++ 4.9.\n+;    First selectable in G++ 4.9 and default in G++ 5\n+;    (set in c_common_post_options).\n ;\n ; Additional positive integers will be assigned as new versions of\n ; the ABI become the default version of the ABI."}, {"sha": "fbcbb2cdc9648a8940c16d99692707bffa8da2bd", "filename": "gcc/testsuite/g++.dg/abi/macro0.C", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/785f21af82139f512eb12f3318899c9f967409e6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmacro0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/785f21af82139f512eb12f3318899c9f967409e6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmacro0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmacro0.C?ref=785f21af82139f512eb12f3318899c9f967409e6", "patch": "@@ -1,5 +1,6 @@\n+// This testcase will need to be kept in sync with c_common_post_options.\n // { dg-options \"-fabi-version=0\" }\n \n-#if __GXX_ABI_VERSION != 999999\n+#if __GXX_ABI_VERSION != 1008\n #error \"Incorrect value of __GXX_ABI_VERSION\"\n #endif"}]}