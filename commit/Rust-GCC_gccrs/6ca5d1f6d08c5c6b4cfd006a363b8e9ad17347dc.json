{"sha": "6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmNhNWQxZjZkMDhjNWM2YjRjZmQwMDZhMzYzYjhlOWFkMTczNDdkYw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-03-26T16:18:51Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-03-26T16:18:51Z"}, "message": "re PR debug/43516 (\"-fcompare-debug failure\" at -O2)\n\n\tPR debug/43516\n\t* flags.h (final_insns_dump_p): New extern.\n\t* final.c (final_insns_dump_p): New variable.\n\t(rest_of_clean_state): Set it before -fdump-final-insns=\n\tdumping, clear afterwards.\n\t* print-rtl.c (print_rtx): If final_insns_dump_p don't dump\n\tMEM_ALIAS_SET on MEMs.\n\nFrom-SVN: r157753", "tree": {"sha": "9d76e0c545aec903e1d1c2de6c36145397d24c24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9d76e0c545aec903e1d1c2de6c36145397d24c24"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1360467133687fc799b31a91bb9a975bd0a634e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1360467133687fc799b31a91bb9a975bd0a634e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1360467133687fc799b31a91bb9a975bd0a634e0"}], "stats": {"total": 30, "additions": 26, "deletions": 4}, "files": [{"sha": "0e8d0b9795284324a450c1f5ecc86d1fada5e40c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc", "patch": "@@ -1,3 +1,13 @@\n+2010-03-26  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/43516\n+\t* flags.h (final_insns_dump_p): New extern.\n+\t* final.c (final_insns_dump_p): New variable.\n+\t(rest_of_clean_state): Set it before -fdump-final-insns=\n+\tdumping, clear afterwards.\n+\t* print-rtl.c (print_rtx): If final_insns_dump_p don't dump\n+\tMEM_ALIAS_SET on MEMs.\n+\n 2010-03-26  David S. Miller  <davem@davemloft.net>\n \n \t* configure.ac: Fix sparc GOTDATA_OP bug check."}, {"sha": "e2b7461bbbea18a3f3a66b460381ff753c43d0e1", "filename": "gcc/final.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc", "patch": "@@ -1,6 +1,6 @@\n /* Convert RTL to assembler code and output it, for GNU compiler.\n    Copyright (C) 1987, 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997,\n-   1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009\n+   1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -207,6 +207,9 @@ static int dialect_number;\n /* Nonnull if the insn currently being emitted was a COND_EXEC pattern.  */\n rtx current_insn_predicate;\n \n+/* True if printing into -fdump-final-insns= dump.  */   \n+bool final_insns_dump_p;\n+\n #ifdef HAVE_ATTR_length\n static int asm_insn_count (rtx);\n #endif\n@@ -4384,6 +4387,7 @@ rest_of_clean_state (void)\n \t  flag_dump_noaddr = flag_dump_unnumbered = 1;\n \t  if (flag_compare_debug_opt || flag_compare_debug)\n \t    dump_flags |= TDF_NOUID;\n+\t  final_insns_dump_p = true;\n \n \t  for (insn = get_insns (); insn; insn = NEXT_INSN (insn))\n \t    if (LABEL_P (insn))\n@@ -4417,6 +4421,7 @@ rest_of_clean_state (void)\n     {\n       flag_dump_noaddr = save_noaddr;\n       flag_dump_unnumbered = save_unnumbered;\n+      final_insns_dump_p = false;\n \n       if (fclose (final_output))\n \t{"}, {"sha": "bc51b2bda348f81f3a8e7d7ea04aa08c2d8bbe0b", "filename": "gcc/flags.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc/gcc%2Fflags.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc/gcc%2Fflags.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflags.h?ref=6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc", "patch": "@@ -182,6 +182,10 @@ extern int flag_gen_aux_info;\n \n extern int flag_dump_unnumbered;\n \n+/* True if printing into -fdump-final-insns= dump.  */\n+\n+extern bool final_insns_dump_p;\n+\n /* Nonzero means change certain warnings into errors.\n    Usually these are warnings about failure to conform to some standard.  */\n "}, {"sha": "b02143a937a9db5a82dc0c1b42723c758f8160c0", "filename": "gcc/print-rtl.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc/gcc%2Fprint-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc/gcc%2Fprint-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-rtl.c?ref=6ca5d1f6d08c5c6b4cfd006a363b8e9ad17347dc", "patch": "@@ -1,6 +1,6 @@\n /* Print RTL for GCC.\n    Copyright (C) 1987, 1988, 1992, 1997, 1998, 1999, 2000, 2002, 2003,\n-   2004, 2005, 2007, 2008, 2009\n+   2004, 2005, 2007, 2008, 2009, 2010\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -548,8 +548,11 @@ print_rtx (const_rtx in_rtx)\n     {\n #ifndef GENERATOR_FILE\n     case MEM:\n-      fprintf (outfile, \" [\" HOST_WIDE_INT_PRINT_DEC,\n-\t       (HOST_WIDE_INT) MEM_ALIAS_SET (in_rtx));\n+      if (__builtin_expect (final_insns_dump_p, false))\n+\tfprintf (outfile, \" [\");\n+      else\n+\tfprintf (outfile, \" [\" HOST_WIDE_INT_PRINT_DEC,\n+\t\t (HOST_WIDE_INT) MEM_ALIAS_SET (in_rtx));\n \n       if (MEM_EXPR (in_rtx))\n \tprint_mem_expr (outfile, MEM_EXPR (in_rtx));"}]}