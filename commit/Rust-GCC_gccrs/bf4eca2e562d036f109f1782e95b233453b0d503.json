{"sha": "bf4eca2e562d036f109f1782e95b233453b0d503", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmY0ZWNhMmU1NjJkMDM2ZjEwOWYxNzgyZTk1YjIzMzQ1M2IwZDUwMw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-12-12T11:40:28Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-12-12T11:40:28Z"}, "message": "re PR target/86806 (SPARC port needs updating for CVE-2017-5753)\n\n\tPR target/86806\n\t* config/sparc/sparc.md (unspecv): Add UNSPECV_SPECULATION_BARRIER.\n\t(speculation_barrier): New instruction for V9.\n\nFrom-SVN: r267053", "tree": {"sha": "eba67c59329144a5a95f7b2dac92239b462a7be7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eba67c59329144a5a95f7b2dac92239b462a7be7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf4eca2e562d036f109f1782e95b233453b0d503", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf4eca2e562d036f109f1782e95b233453b0d503", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf4eca2e562d036f109f1782e95b233453b0d503", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf4eca2e562d036f109f1782e95b233453b0d503/comments", "author": null, "committer": null, "parents": [{"sha": "9c47a019948f5caf12e7726001e15fefcb32d065", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c47a019948f5caf12e7726001e15fefcb32d065", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c47a019948f5caf12e7726001e15fefcb32d065"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "2026219238f8bc7d0616cc322c13f7c6a751c7dc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf4eca2e562d036f109f1782e95b233453b0d503/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf4eca2e562d036f109f1782e95b233453b0d503/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bf4eca2e562d036f109f1782e95b233453b0d503", "patch": "@@ -1,3 +1,9 @@\n+2018-12-12  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR target/86806\n+\t* config/sparc/sparc.md (unspecv): Add UNSPECV_SPECULATION_BARRIER.\n+\t(speculation_barrier): New instruction for V9.\n+\n 2018-12-12 Segher Boessenkool  <segher@kernel.crashing.org>\n \t   Iain Sandoe  <iain@sandoe.co.uk>\n "}, {"sha": "431993cd70fe148042b65b6799710e6e747dfc70", "filename": "gcc/config/sparc/sparc.md", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf4eca2e562d036f109f1782e95b233453b0d503/gcc%2Fconfig%2Fsparc%2Fsparc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf4eca2e562d036f109f1782e95b233453b0d503/gcc%2Fconfig%2Fsparc%2Fsparc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.md?ref=bf4eca2e562d036f109f1782e95b233453b0d503", "patch": "@@ -104,6 +104,9 @@\n \n (define_c_enum \"unspecv\" [\n   UNSPECV_BLOCKAGE\n+\n+  UNSPECV_SPECULATION_BARRIER\n+\n   UNSPECV_PROBE_STACK_RANGE\n \n   UNSPECV_FLUSHW\n@@ -7309,6 +7312,14 @@ visl\")\n   \"\"\n   [(set_attr \"length\" \"0\")])\n \n+;; We use membar #Sync for the speculation barrier on V9.\n+\n+(define_insn \"speculation_barrier\"\n+  [(unspec_volatile [(const_int 0)] UNSPECV_SPECULATION_BARRIER)]\n+  \"TARGET_V9\"\n+  \"membar\\t64\"\n+  [(set_attr \"type\" \"multi\")])\n+\n (define_expand \"probe_stack\"\n   [(set (match_operand 0 \"memory_operand\" \"\") (const_int 0))]\n   \"\""}]}