{"sha": "5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWIxY2NlOTFlNTI5NWQzYzFkNDJlMmJlYTRiMmM2ZjUxYTRjY2Q2NQ==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2011-02-24T09:53:26Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-02-24T09:53:26Z"}, "message": "re PR fortran/47839 (ICE in dwarf2out.c:add_AT_specification)\n\n2011-02-24  Richard Guenther  <rguenther@suse.de>\n\n\tPR fortran/47839\n\t* f95-lang.c (pushdecl): For externs in non-global scope push\n\ta copy of the decl into the BLOCK.\n\n\t* gfortran.dg/lto/pr47839_0.f90: New testcase.\n\t* gfortran.dg/lto/pr47839_1.f90: Likewise.\n\nFrom-SVN: r170463", "tree": {"sha": "4c970e4ebdf5239ec11759f84f7472469b258a8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4c970e4ebdf5239ec11759f84f7472469b258a8f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "68f792d0d5c6865aba270fd840700782576baafd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68f792d0d5c6865aba270fd840700782576baafd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68f792d0d5c6865aba270fd840700782576baafd"}], "stats": {"total": 44, "additions": 39, "deletions": 5}, "files": [{"sha": "7bef41bd659d91bdd6bb8455f5cf33cea60c4d4d", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65", "patch": "@@ -1,3 +1,9 @@\n+2011-02-24  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR fortran/47839\n+\t* f95-lang.c (pushdecl): For externs in non-global scope push\n+\ta copy of the decl into the BLOCK.\n+\n 2011-02-23  Mikael Morin  <mikael@gcc.gnu.org>\n \n \tPR fortran/40850"}, {"sha": "3340dc4ee247b5573489804ba4d01bbac3c0a007", "filename": "gcc/fortran/f95-lang.c", "status": "modified", "additions": 12, "deletions": 5, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65/gcc%2Ffortran%2Ff95-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65/gcc%2Ffortran%2Ff95-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ff95-lang.c?ref=5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65", "patch": "@@ -498,13 +498,20 @@ poplevel (int keep, int reverse, int functionbody)\n tree\n pushdecl (tree decl)\n {\n-  /* External objects aren't nested, other objects may be.  */\n-  if (DECL_EXTERNAL (decl))\n-    DECL_CONTEXT (decl) = NULL_TREE;\n-  else if (global_bindings_p ())\n+  if (global_bindings_p ())\n     DECL_CONTEXT (decl) = current_translation_unit;\n   else\n-    DECL_CONTEXT (decl) = current_function_decl;\n+    {\n+      /* External objects aren't nested.  For debug info insert a copy\n+         of the decl into the binding level.  */\n+      if (DECL_EXTERNAL (decl))\n+\t{\n+\t  tree orig = decl;\n+\t  decl = copy_node (decl);\n+\t  DECL_CONTEXT (orig) = NULL_TREE;\n+\t}\n+      DECL_CONTEXT (decl) = current_function_decl;\n+    }\n \n   /* Put the declaration on the list.  The list of declarations is in reverse\n      order. The list will be reversed later if necessary.  This needs to be"}, {"sha": "4f097e27e906943d5aabc7aef915d5b2f404b582", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65", "patch": "@@ -1,3 +1,9 @@\n+2011-02-24  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR fortran/47839\n+\t* gfortran.dg/lto/pr47839_0.f90: New testcase.\n+\t* gfortran.dg/lto/pr47839_1.f90: Likewise.\n+\n 2011-02-23  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR libgfortran/47567"}, {"sha": "9ea9315284a1aa67dc0070b49efda13f7665f9b3", "filename": "gcc/testsuite/gfortran.dg/lto/pr47839_0.f90", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65/gcc%2Ftestsuite%2Fgfortran.dg%2Flto%2Fpr47839_0.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65/gcc%2Ftestsuite%2Fgfortran.dg%2Flto%2Fpr47839_0.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Flto%2Fpr47839_0.f90?ref=5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65", "patch": "@@ -0,0 +1,8 @@\n+! { dg-lto-do link }\n+! { dg-lto-options {{ -g -flto }} }\n+! { dg-extra-ld-options \"-r -nostdlib\" }\n+\n+MODULE globalvar_mod\n+integer        :: xstop\n+CONTAINS\n+END MODULE globalvar_mod"}, {"sha": "5c94ff17b5c9654a423e99a6c2c4a7b8fee398d6", "filename": "gcc/testsuite/gfortran.dg/lto/pr47839_1.f90", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65/gcc%2Ftestsuite%2Fgfortran.dg%2Flto%2Fpr47839_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65/gcc%2Ftestsuite%2Fgfortran.dg%2Flto%2Fpr47839_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Flto%2Fpr47839_1.f90?ref=5b1cce91e5295d3c1d42e2bea4b2c6f51a4ccd65", "patch": "@@ -0,0 +1,7 @@\n+MODULE PEC_mod\n+CONTAINS\n+SUBROUTINE PECapply(Ex)\n+USE globalvar_mod, ONLY : xstop\n+real(kind=8), dimension(1:xstop), intent(inout) :: Ex\n+END SUBROUTINE PECapply\n+END MODULE PEC_mod"}]}