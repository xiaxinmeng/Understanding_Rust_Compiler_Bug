{"sha": "0e94b75085af60341759c30fb522c9438c4b18b8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGU5NGI3NTA4NWFmNjAzNDE3NTljMzBmYjUyMmM5NDM4YzRiMThiOA==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2010-02-26T22:06:56Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2010-02-26T22:06:56Z"}, "message": "diagnostic.c (diagnostic_initialize): Update.\n\n2010-02-26  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\t* diagnostic.c (diagnostic_initialize): Update.\n\t(diagnostic_report_diagnostic): Test inhibit_notes_p for\n\tinformative notes.\n\t* diagnostic.h (diagnostic_context): New bool inhibit_notes_p.\n\t(diagnostic_inhibit_notes): New.\n\t* toplev.c (process_options): inhibit notes with -fcompare-debug.\n\nFrom-SVN: r157100", "tree": {"sha": "dc7e9199bbd5f92c7eed38be3754a171070f0408", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc7e9199bbd5f92c7eed38be3754a171070f0408"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e94b75085af60341759c30fb522c9438c4b18b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e94b75085af60341759c30fb522c9438c4b18b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e94b75085af60341759c30fb522c9438c4b18b8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e94b75085af60341759c30fb522c9438c4b18b8/comments", "author": null, "committer": null, "parents": [{"sha": "7e1542b921b63aea61cc239be5eeeb632631a5b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e1542b921b63aea61cc239be5eeeb632631a5b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e1542b921b63aea61cc239be5eeeb632631a5b9"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "f731855d83bbf9a4e039d4afc62487942c9efcc4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e94b75085af60341759c30fb522c9438c4b18b8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e94b75085af60341759c30fb522c9438c4b18b8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0e94b75085af60341759c30fb522c9438c4b18b8", "patch": "@@ -1,3 +1,12 @@\n+2010-02-26  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\t* diagnostic.c (diagnostic_initialize): Update.\n+\t(diagnostic_report_diagnostic): Test inhibit_notes_p for\n+\tinformative notes.\n+\t* diagnostic.h (diagnostic_context): New bool inhibit_notes_p.\n+\t(diagnostic_inhibit_notes): New.\n+\t* toplev.c (process_options): inhibit notes with -fcompare-debug.\n+\n 2010-02-26  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR c/20631"}, {"sha": "4322d65493553342a94c9b9ea201b67900209925", "filename": "gcc/diagnostic.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e94b75085af60341759c30fb522c9438c4b18b8/gcc%2Fdiagnostic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e94b75085af60341759c30fb522c9438c4b18b8/gcc%2Fdiagnostic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdiagnostic.c?ref=0e94b75085af60341759c30fb522c9438c4b18b8", "patch": "@@ -109,6 +109,7 @@ diagnostic_initialize (diagnostic_context *context)\n   context->last_module = 0;\n   context->last_function = NULL;\n   context->lock = 0;\n+  context->inhibit_notes_p = false;\n }\n \n /* Initialize DIAGNOSTIC, where the message MSG has already been\n@@ -317,11 +318,11 @@ diagnostic_report_diagnostic (diagnostic_context *context,\n       && !diagnostic_report_warnings_p (location))\n     return false;\n \n-  if (diagnostic->kind == DK_NOTE && flag_compare_debug)\n-    return false;\n-\n   if (diagnostic->kind == DK_PEDWARN)\n     diagnostic->kind = pedantic_warning_kind ();\n+ \n+  if (diagnostic->kind == DK_NOTE && context->inhibit_notes_p)\n+    return false;\n \n   if (context->lock > 0)\n     {"}, {"sha": "e2dc8c820e1b041c1071ce0069f9d6cb425ee3a1", "filename": "gcc/diagnostic.h", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e94b75085af60341759c30fb522c9438c4b18b8/gcc%2Fdiagnostic.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e94b75085af60341759c30fb522c9438c4b18b8/gcc%2Fdiagnostic.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdiagnostic.h?ref=0e94b75085af60341759c30fb522c9438c4b18b8", "patch": "@@ -113,8 +113,17 @@ struct diagnostic_context\n   const struct line_map *last_module;\n \n   int lock;\n+\n+  bool inhibit_notes_p;\n };\n \n+static inline void\n+diagnostic_inhibit_notes (diagnostic_context * context)\n+{\n+  context->inhibit_notes_p = true;\n+}\n+\n+\n /* Client supplied function to announce a diagnostic.  */\n #define diagnostic_starter(DC) (DC)->begin_diagnostic\n "}, {"sha": "385d5e184ef83d4ffe6c412135e5ad898b3297bc", "filename": "gcc/toplev.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e94b75085af60341759c30fb522c9438c4b18b8/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e94b75085af60341759c30fb522c9438c4b18b8/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=0e94b75085af60341759c30fb522c9438c4b18b8", "patch": "@@ -1810,6 +1810,10 @@ process_options (void)\n   OVERRIDE_OPTIONS;\n #endif\n \n+  /* Avoid any informative notes in the second run of -fcompare-debug.  */\n+  if (flag_compare_debug) \n+    diagnostic_inhibit_notes (global_dc);\n+\n   if (flag_section_anchors && !target_supports_section_anchors_p ())\n     {\n       warning (OPT_fsection_anchors,"}]}