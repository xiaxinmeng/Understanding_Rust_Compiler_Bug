{"sha": "cea768b0caa43d0957d752933bb43f3d73bfed69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2VhNzY4YjBjYWE0M2QwOTU3ZDc1MjkzM2JiNDNmM2Q3M2JmZWQ2OQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2017-07-04T13:42:22Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2017-07-04T13:42:22Z"}, "message": "* haifa-sched.c (sched_create_recovery_edges): Update profile.\n\nFrom-SVN: r249967", "tree": {"sha": "ecd90f4cad54db5c8483a1a24d021d72c83f9ec9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ecd90f4cad54db5c8483a1a24d021d72c83f9ec9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cea768b0caa43d0957d752933bb43f3d73bfed69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cea768b0caa43d0957d752933bb43f3d73bfed69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cea768b0caa43d0957d752933bb43f3d73bfed69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cea768b0caa43d0957d752933bb43f3d73bfed69/comments", "author": null, "committer": null, "parents": [{"sha": "4741e46d775429fe32086dd93ced7ea86644eba2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4741e46d775429fe32086dd93ced7ea86644eba2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4741e46d775429fe32086dd93ced7ea86644eba2"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "89678c226fdc5d07558331df29f2117511f36d3b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cea768b0caa43d0957d752933bb43f3d73bfed69/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cea768b0caa43d0957d752933bb43f3d73bfed69/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cea768b0caa43d0957d752933bb43f3d73bfed69", "patch": "@@ -1,3 +1,7 @@\n+2017-07-04  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* haifa-sched.c (sched_create_recovery_edges): Update profile.\n+\n 2017-07-04  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* bb-reorder.c (better_edge_p): Fix handling of uninitialized"}, {"sha": "af0ed27b18ff250b4b3cf8a964c9d94aeed61d3a", "filename": "gcc/haifa-sched.c", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cea768b0caa43d0957d752933bb43f3d73bfed69/gcc%2Fhaifa-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cea768b0caa43d0957d752933bb43f3d73bfed69/gcc%2Fhaifa-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhaifa-sched.c?ref=cea768b0caa43d0957d752933bb43f3d73bfed69", "patch": "@@ -8302,7 +8302,19 @@ sched_create_recovery_edges (basic_block first_bb, basic_block rec,\n   else\n     edge_flags = 0;\n \n-  make_edge (first_bb, rec, edge_flags);\n+  edge e2 = single_succ_edge (first_bb);\n+  edge e = make_edge (first_bb, rec, edge_flags);\n+\n+  /* TODO: The actual probability can be determined and is computed as\n+     'todo_spec' variable in create_check_block_twin and\n+     in sel-sched.c `check_ds' in create_speculation_check.  */\n+  e->probability = profile_probability::very_unlikely ();\n+  e->count = first_bb->count.apply_probability (e->probability);\n+  rec->count = e->count;\n+  rec->frequency = EDGE_FREQUENCY (e);\n+  e2->probability = e->probability.invert ();\n+  e2->count = first_bb->count - e2->count;\n+\n   rtx_code_label *label = block_label (second_bb);\n   rtx_jump_insn *jump = emit_jump_insn_after (targetm.gen_jump (label),\n \t\t\t\t\t      BB_END (rec));"}]}