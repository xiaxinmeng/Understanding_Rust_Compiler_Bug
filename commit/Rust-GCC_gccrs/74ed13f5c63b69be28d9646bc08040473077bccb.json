{"sha": "74ed13f5c63b69be28d9646bc08040473077bccb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzRlZDEzZjVjNjNiNjliZTI4ZDk2NDZiYzA4MDQwNDczMDc3YmNjYg==", "commit": {"author": {"name": "Bob Wilson", "email": "bob.wilson@acm.org", "date": "2007-05-09T17:05:14Z"}, "committer": {"name": "Bob Wilson", "email": "bwilson@gcc.gnu.org", "date": "2007-05-09T17:05:14Z"}, "message": "xtensa.c (xtensa_output_literal): Mask out high bits for floating-point values if HOST_BITS_PER_LONG > 32.\n\n\t* config/xtensa/xtensa.c (xtensa_output_literal): Mask out high bits\n\tfor floating-point values if HOST_BITS_PER_LONG > 32.  Use split_double\n\tinstead of operand_subword.\n\nFrom-SVN: r124578", "tree": {"sha": "97bcbcddf8b42d466de62857c000c48bccd08122", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97bcbcddf8b42d466de62857c000c48bccd08122"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/74ed13f5c63b69be28d9646bc08040473077bccb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74ed13f5c63b69be28d9646bc08040473077bccb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74ed13f5c63b69be28d9646bc08040473077bccb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74ed13f5c63b69be28d9646bc08040473077bccb/comments", "author": null, "committer": null, "parents": [{"sha": "520c62adcda2977418be8c7163d413549f5e7e3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/520c62adcda2977418be8c7163d413549f5e7e3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/520c62adcda2977418be8c7163d413549f5e7e3d"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "36211dc2d6cdbbb4e69a25cf72f54f304892a8fe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74ed13f5c63b69be28d9646bc08040473077bccb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74ed13f5c63b69be28d9646bc08040473077bccb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=74ed13f5c63b69be28d9646bc08040473077bccb", "patch": "@@ -1,3 +1,9 @@\n+2007-05-09  Bob Wilson  <bob.wilson@acm.org>\n+\n+\t* config/xtensa/xtensa.c (xtensa_output_literal): Mask out high bits\n+\tfor floating-point values if HOST_BITS_PER_LONG > 32.  Use split_double\n+\tinstead of operand_subword.\n+\n 2007-05-08  Bernd Schmidt  <bernd.schmidt@analog.com>\n \n \t* config/bfin/bfin.h (LOCAL_ALIGNMENT): Define."}, {"sha": "81e7797c6b52868a853bf5b9df64bb3e887c4d30", "filename": "gcc/config/xtensa/xtensa.c", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74ed13f5c63b69be28d9646bc08040473077bccb/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74ed13f5c63b69be28d9646bc08040473077bccb/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.c?ref=74ed13f5c63b69be28d9646bc08040473077bccb", "patch": "@@ -1939,6 +1939,7 @@ xtensa_output_literal (FILE *file, rtx x, enum machine_mode mode, int labelno)\n   long value_long[2];\n   REAL_VALUE_TYPE r;\n   int size;\n+  rtx first, second;\n \n   fprintf (file, \"\\t.literal .LC%u, \", (unsigned) labelno);\n \n@@ -1952,11 +1953,18 @@ xtensa_output_literal (FILE *file, rtx x, enum machine_mode mode, int labelno)\n \t{\n \tcase SFmode:\n \t  REAL_VALUE_TO_TARGET_SINGLE (r, value_long[0]);\n+#if HOST_BITS_PER_LONG > 32\n+\t  value_long[0] &= 0xffffffff;\n+#endif\n \t  fprintf (file, \"0x%08lx\\n\", value_long[0]);\n \t  break;\n \n \tcase DFmode:\n \t  REAL_VALUE_TO_TARGET_DOUBLE (r, value_long);\n+#if HOST_BITS_PER_LONG > 32\n+\t  value_long[0] &= 0xffffffff;\n+\t  value_long[1] &= 0xffffffff;\n+#endif\n \t  fprintf (file, \"0x%08lx, 0x%08lx\\n\",\n \t\t   value_long[0], value_long[1]);\n \t  break;\n@@ -1978,9 +1986,10 @@ xtensa_output_literal (FILE *file, rtx x, enum machine_mode mode, int labelno)\n \t  break;\n \n \tcase 8:\n-\t  output_addr_const (file, operand_subword (x, 0, 0, DImode));\n+\t  split_double (x, &first, &second);\n+\t  output_addr_const (file, first);\n \t  fputs (\", \", file);\n-\t  output_addr_const (file, operand_subword (x, 1, 0, DImode));\n+\t  output_addr_const (file, second);\n \t  fputs (\"\\n\", file);\n \t  break;\n "}]}