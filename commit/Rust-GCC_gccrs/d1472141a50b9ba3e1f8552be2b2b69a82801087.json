{"sha": "d1472141a50b9ba3e1f8552be2b2b69a82801087", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDE0NzIxNDFhNTBiOWJhM2UxZjg1NTJiZTJiMmI2OWE4MjgwMTA4Nw==", "commit": {"author": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1999-04-06T14:27:17Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1999-04-06T14:27:17Z"}, "message": "parse.y (patch_binop): Don't fold if non-constant and emiting class files.\n\nh\n\t* parse.y (patch_binop):  Don't fold if non-constant and emiting\n\tclass files.\n\nFrom-SVN: r26214", "tree": {"sha": "f4e55c626edd2c7e93de6a79b62840e6f8ef802a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f4e55c626edd2c7e93de6a79b62840e6f8ef802a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1472141a50b9ba3e1f8552be2b2b69a82801087", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1472141a50b9ba3e1f8552be2b2b69a82801087", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1472141a50b9ba3e1f8552be2b2b69a82801087", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1472141a50b9ba3e1f8552be2b2b69a82801087/comments", "author": null, "committer": null, "parents": [{"sha": "099a9dd0c6cbc53d8c3c3799230e4321c312fbcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/099a9dd0c6cbc53d8c3c3799230e4321c312fbcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/099a9dd0c6cbc53d8c3c3799230e4321c312fbcb"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "9a343107e1548e51f082bd03fdb3692c93d73367", "filename": "gcc/java/parse.y", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1472141a50b9ba3e1f8552be2b2b69a82801087/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1472141a50b9ba3e1f8552be2b2b69a82801087/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=d1472141a50b9ba3e1f8552be2b2b69a82801087", "patch": "@@ -9370,8 +9370,12 @@ patch_binop (node, wfl_op1, wfl_op2)\n   TREE_TYPE (node) = prom_type;\n   TREE_SIDE_EFFECTS (node) = TREE_SIDE_EFFECTS (op1) | TREE_SIDE_EFFECTS (op2);\n   \n-  /* fold does not respect side-effect order as required for Java but not C. */\n-  if (! TREE_SIDE_EFFECTS (node))\n+  /* fold does not respect side-effect order as required for Java but not C.\n+   * Also, it sometimes create SAVE_EXPRs which are bad when emitting\n+   * bytecode.\n+   */\n+  if (flag_emit_class_files ? (TREE_CONSTANT (op1) && TREE_CONSTANT (op2))\n+      : ! TREE_SIDE_EFFECTS (node))\n     node = fold (node);\n   return node;\n }"}]}