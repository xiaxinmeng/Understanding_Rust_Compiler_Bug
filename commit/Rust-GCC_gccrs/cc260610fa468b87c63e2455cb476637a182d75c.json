{"sha": "cc260610fa468b87c63e2455cb476637a182d75c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2MyNjA2MTBmYTQ2OGI4N2M2M2UyNDU1Y2I0NzY2MzdhMTgyZDc1Yw==", "commit": {"author": {"name": "Daniel Berlin", "email": "dan@cgsoftware.com", "date": "2001-07-05T02:08:16Z"}, "committer": {"name": "Daniel Berlin", "email": "dberlin@gcc.gnu.org", "date": "2001-07-05T02:08:16Z"}, "message": "dwarf2out.c (dwarf2out_define): Update comment.\n\n2001-07-04  Daniel Berlin  <dan@cgsoftware.com>\n\n\t* dwarf2out.c (dwarf2out_define): Update comment.\n\t(dwarf2out_undef): Ditto.\n\t(dwarf2out_start_source_file): Ditto.\n\t(dwarf2out_end_source_file): Ditto.\n\t(dwarf2out_finish): Output DW_MACINFO_end_file for primary file,\n\tsince we never call the start/end debug hook for the primary file.\n\nFrom-SVN: r43773", "tree": {"sha": "186d62e9d1f7702c8a4505ecb927aac4882c124a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/186d62e9d1f7702c8a4505ecb927aac4882c124a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cc260610fa468b87c63e2455cb476637a182d75c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc260610fa468b87c63e2455cb476637a182d75c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc260610fa468b87c63e2455cb476637a182d75c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc260610fa468b87c63e2455cb476637a182d75c/comments", "author": null, "committer": null, "parents": [{"sha": "cc32b876fe1850d5ab119207aa3a229455ba8719", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc32b876fe1850d5ab119207aa3a229455ba8719", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc32b876fe1850d5ab119207aa3a229455ba8719"}], "stats": {"total": 26, "additions": 20, "deletions": 6}, "files": [{"sha": "2014e76aa0a2f73a890ea666b7c689214f846143", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc260610fa468b87c63e2455cb476637a182d75c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc260610fa468b87c63e2455cb476637a182d75c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cc260610fa468b87c63e2455cb476637a182d75c", "patch": "@@ -1,3 +1,12 @@\n+2001-07-04  Daniel Berlin  <dan@cgsoftware.com>\n+\n+\t* dwarf2out.c (dwarf2out_define): Update comment.\n+\t(dwarf2out_undef): Ditto.\n+\t(dwarf2out_start_source_file): Ditto.\n+\t(dwarf2out_end_source_file): Ditto.\n+\t(dwarf2out_finish): Output DW_MACINFO_end_file for primary file,\n+\tsince we never call the start/end debug hook for the primary file.\n+\n 2001-07-04  Kazu Hirata  <kazu@hxi.com>\n \n \t* config/h8300/h8300.c (get_shift_alg): Remove an extra operand"}, {"sha": "d5f3d4086f5843ab12080946394d77e6814ca5f5", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc260610fa468b87c63e2455cb476637a182d75c/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc260610fa468b87c63e2455cb476637a182d75c/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=cc260610fa468b87c63e2455cb476637a182d75c", "patch": "@@ -11268,8 +11268,7 @@ dwarf2out_line (filename, line)\n     }\n }\n \n-/* Record the beginning of a new source file, for later output\n-   of the .debug_macinfo section.*/\n+/* Record the beginning of a new source file. */\n \n void\n dwarf2out_start_source_file (lineno, filename)\n@@ -11291,8 +11290,7 @@ dwarf2out_start_source_file (lineno, filename)\n     }\n }\n \n-/* Record the end of a source file, for later output\n-   of the .debug_macinfo section.  At present, unimplemented.  */\n+/* Record the end of a source file.  */\n \n void\n dwarf2out_end_source_file ()\n@@ -11309,7 +11307,7 @@ dwarf2out_end_source_file ()\n     }\n }\n \n-/* Called from check_newline in c-parse.y.  The `buffer' parameter contains\n+/* Called from debug_define in toplev.c.  The `buffer' parameter contains\n    the tail part of the directive line, i.e. the part which is past the\n    initial whitespace, #, whitespace, directive-name, whitespace part.  */\n \n@@ -11333,7 +11331,7 @@ dwarf2out_define (lineno, buffer)\n     }\n }\n \n-/* Called from check_newline in c-parse.y.  The `buffer' parameter contains\n+/* Called from debug_undef in toplev.c.  The `buffer' parameter contains\n    the tail part of the directive line, i.e. the part which is past the\n    initial whitespace, #, whitespace, directive-name, whitespace part.  */\n \n@@ -11565,6 +11563,13 @@ dwarf2out_finish ()\n       output_location_lists (die);\n       have_location_lists = 0;\n     }\n+\n+  /* Have to end the primary source file. */\n+  if (debug_info_level >= DINFO_LEVEL_VERBOSE)\n+    { \n+      ASM_OUTPUT_SECTION (asm_out_file, DEBUG_MACINFO_SECTION);\n+      dw2_asm_output_data (1, DW_MACINFO_end_file, \"End file\");\n+    }\n   \n }\n #endif /* DWARF2_DEBUGGING_INFO */"}]}