{"sha": "4993465992b6711d8bda90247122135d01ed6f3d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDk5MzQ2NTk5MmI2NzExZDhiZGE5MDI0NzEyMjEzNWQwMWVkNmYzZA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2012-11-09T09:10:04Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2012-11-09T09:10:04Z"}, "message": "i386.c (release_scratch_register_on_entry): Also adjust sp_offset manually.\n\n\t* config/i386/i386.c (release_scratch_register_on_entry): Also adjust\n\tsp_offset manually.\n\nFrom-SVN: r193352", "tree": {"sha": "a0625b25649e54bcd74c20cddab79d541fe83668", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a0625b25649e54bcd74c20cddab79d541fe83668"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4993465992b6711d8bda90247122135d01ed6f3d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4993465992b6711d8bda90247122135d01ed6f3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4993465992b6711d8bda90247122135d01ed6f3d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4993465992b6711d8bda90247122135d01ed6f3d/comments", "author": null, "committer": null, "parents": [{"sha": "55fcb9015cdc05b33cd6ad52c5815120ebe88f24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55fcb9015cdc05b33cd6ad52c5815120ebe88f24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55fcb9015cdc05b33cd6ad52c5815120ebe88f24"}], "stats": {"total": 53, "additions": 52, "deletions": 1}, "files": [{"sha": "f8f19bad0e4667ae788c297c3cda067b70028163", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4993465992b6711d8bda90247122135d01ed6f3d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4993465992b6711d8bda90247122135d01ed6f3d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4993465992b6711d8bda90247122135d01ed6f3d", "patch": "@@ -1,3 +1,8 @@\n+2012-11-09  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* config/i386/i386.c (release_scratch_register_on_entry): Also adjust\n+\tsp_offset manually.\n+\n 2012-11-08  Christian Bruel  <christian.bruel@st.com>\n \n \t* tree-ssa-tail-merge.c (replace_block_by): Update bb2 profile count.\n@@ -55,7 +60,6 @@\n \t* ipa-prop.c (determine_known_aggregate_parts): Skip writes to\n \tdifferent declarations when tracking writes to a declaration.\n \n->>>>>>> .r193349\n 2012-11-07  David S. Miller  <davem@davemloft.net>\n \n \t* config/sparc/constraints.md (\"U\"): Document, in detail,"}, {"sha": "3a6f494e4e0e258adf19cca7b0807ee4f29c526a", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4993465992b6711d8bda90247122135d01ed6f3d/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4993465992b6711d8bda90247122135d01ed6f3d/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=4993465992b6711d8bda90247122135d01ed6f3d", "patch": "@@ -9462,13 +9462,15 @@ release_scratch_register_on_entry (struct scratch_reg *sr)\n {\n   if (sr->saved)\n     {\n+      struct machine_function *m = cfun->machine;\n       rtx x, insn = emit_insn (gen_pop (sr->reg));\n \n       /* The RTX_FRAME_RELATED_P mechanism doesn't know about pop.  */\n       RTX_FRAME_RELATED_P (insn) = 1;\n       x = gen_rtx_PLUS (Pmode, stack_pointer_rtx, GEN_INT (UNITS_PER_WORD));\n       x = gen_rtx_SET (VOIDmode, stack_pointer_rtx, x);\n       add_reg_note (insn, REG_FRAME_RELATED_EXPR, x);\n+      m->fs.sp_offset -= UNITS_PER_WORD;\n     }\n }\n "}, {"sha": "226c5f8cefe808c6562d99b6dfaf86b78938c0d4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4993465992b6711d8bda90247122135d01ed6f3d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4993465992b6711d8bda90247122135d01ed6f3d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4993465992b6711d8bda90247122135d01ed6f3d", "patch": "@@ -1,3 +1,7 @@\n+2012-11-09  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/stack_check3.ad[sb]: New test.\n+\n 2012-11-08  Ian Lance Taylor  <iant@google.com>\n \n \t* go.test/go-test.exp (go-gc-tests): Handle runoutput test type"}, {"sha": "734ed4227337e19f19210cc910e19a284c566332", "filename": "gcc/testsuite/gnat.dg/stack_check3.adb", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4993465992b6711d8bda90247122135d01ed6f3d/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_check3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4993465992b6711d8bda90247122135d01ed6f3d/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_check3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_check3.adb?ref=4993465992b6711d8bda90247122135d01ed6f3d", "patch": "@@ -0,0 +1,36 @@\n+-- { dg-do compile }\n+-- { dg-options \"-O -fstack-check\" }\n+\n+package body Stack_Check3 is\n+\n+  type Int_Arr is array (1 .. 34) of Integer;\n+\n+  type Rec (D : Boolean := False) is\n+    record\n+      case D is\n+        when True  => IA : Int_Arr;\n+        when False => null;\n+      end case;\n+    end record;\n+\n+  type Rec_Arr is array (1 .. 256) of Rec;\n+\n+  protected Prot_Arr is\n+    procedure Reset;\n+  private\n+    A : Rec_Arr;\n+  end Prot_Arr;\n+\n+  protected body Prot_Arr is\n+    procedure Reset is\n+    begin\n+      A := (others => (D => False));\n+    end Reset;\n+  end Prot_Arr;\n+\n+  procedure Reset is\n+  begin\n+    Prot_Arr.Reset;\n+  end Reset;\n+\n+end Stack_Check3;"}, {"sha": "869c418839e820ef99b8db59fc6264b5a9073a4e", "filename": "gcc/testsuite/gnat.dg/stack_check3.ads", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4993465992b6711d8bda90247122135d01ed6f3d/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_check3.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4993465992b6711d8bda90247122135d01ed6f3d/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_check3.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fstack_check3.ads?ref=4993465992b6711d8bda90247122135d01ed6f3d", "patch": "@@ -0,0 +1,5 @@\n+package Stack_Check3 is\n+\n+  procedure Reset;\n+\n+end Stack_Check3;"}]}