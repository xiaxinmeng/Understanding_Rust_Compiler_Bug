{"sha": "fca380479c1092ca186ee0ddd253cbccd01ff567", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmNhMzgwNDc5YzEwOTJjYTE4NmVlMGRkZDI1M2NiY2NkMDFmZjU2Nw==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2014-10-30T10:06:37Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2014-10-30T10:06:37Z"}, "message": "Build a shared host libiberty also for libcc1's benefit.\n\n\t* configure.ac (extra_host_libiberty_configure_flags): Add\n\t--enable-shared also for libcc1's benefit.\n\t* configure: Regenerate.\n\nFrom-SVN: r216912", "tree": {"sha": "2392e45c3c7991792ae5cd9a68f8310d425fd4e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2392e45c3c7991792ae5cd9a68f8310d425fd4e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fca380479c1092ca186ee0ddd253cbccd01ff567", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fca380479c1092ca186ee0ddd253cbccd01ff567", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fca380479c1092ca186ee0ddd253cbccd01ff567", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fca380479c1092ca186ee0ddd253cbccd01ff567/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e0d80a586d221ea06ee6efa239aa81517ccc33fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0d80a586d221ea06ee6efa239aa81517ccc33fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0d80a586d221ea06ee6efa239aa81517ccc33fb"}], "stats": {"total": 36, "additions": 29, "deletions": 7}, "files": [{"sha": "ebcae80fa97883d470817441c5b299843be85d85", "filename": "ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fca380479c1092ca186ee0ddd253cbccd01ff567/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fca380479c1092ca186ee0ddd253cbccd01ff567/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=fca380479c1092ca186ee0ddd253cbccd01ff567", "patch": "@@ -1,3 +1,9 @@\n+2014-10-30  Thomas Schwinge  <thomas@codesourcery.com>\n+\n+\t* configure.ac (extra_host_libiberty_configure_flags): Add\n+\t--enable-shared also for libcc1's benefit.\n+\t* configure: Regenerate.\n+\n 2014-10-29  Tristan Gingold  <gingold@adacore.com>\n \n \t* MAINTAINERS: Change my email address."}, {"sha": "3eab122bdc91705e0d6d1f3227a969fa3d8b721d", "filename": "configure", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fca380479c1092ca186ee0ddd253cbccd01ff567/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fca380479c1092ca186ee0ddd253cbccd01ff567/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=fca380479c1092ca186ee0ddd253cbccd01ff567", "patch": "@@ -642,8 +642,8 @@ CXXFLAGS_FOR_TARGET\n CFLAGS_FOR_TARGET\n DEBUG_PREFIX_CFLAGS_FOR_TARGET\n SYSROOT_CFLAGS_FOR_TARGET\n-stage1_languages\n extra_host_libiberty_configure_flags\n+stage1_languages\n extra_linker_plugin_flags\n extra_linker_plugin_configure_flags\n clooginc\n@@ -6259,19 +6259,16 @@ if test -d ${srcdir}/gcc; then\n   new_enable_languages=,c,\n \n   # If LTO is enabled, add the LTO front end.\n-  extra_host_libiberty_configure_flags=\n   if test \"$enable_lto\" = \"yes\" ; then\n     case ,${enable_languages}, in\n       *,lto,*) ;;\n       *) enable_languages=\"${enable_languages},lto\" ;;\n     esac\n     if test \"${build_lto_plugin}\" = \"yes\" ; then\n       configdirs=\"$configdirs lto-plugin\"\n-      extra_host_libiberty_configure_flags=--enable-shared\n     fi\n   fi\n \n-\n   missing_languages=`echo \",$enable_languages,\" | sed -e s/,all,/,/ -e s/,c,/,/ `\n   potential_languages=,c,\n \n@@ -6584,6 +6581,17 @@ then\n   esac\n fi\n \n+# Sometimes we have special requirements for the host libiberty.\n+extra_host_libiberty_configure_flags=\n+case \" $configdirs \" in\n+  *\" lto-plugin \"* | *\" libcc1 \"*)\n+    # When these are to be built as shared libraries, the same applies to\n+    # libiberty.\n+    extra_host_libiberty_configure_flags=--enable-shared\n+    ;;\n+esac\n+\n+\n # Produce a warning message for the subdirs we can't configure.\n # This isn't especially interesting in the Cygnus tree, but in the individual\n # FSF releases, it's important to let people know when their machine isn't"}, {"sha": "d8262f8a9105cd2a1749311b7eaa5cb77da5c76a", "filename": "configure.ac", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fca380479c1092ca186ee0ddd253cbccd01ff567/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fca380479c1092ca186ee0ddd253cbccd01ff567/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=fca380479c1092ca186ee0ddd253cbccd01ff567", "patch": "@@ -1852,18 +1852,15 @@ if test -d ${srcdir}/gcc; then\n   new_enable_languages=,c,\n \n   # If LTO is enabled, add the LTO front end.\n-  extra_host_libiberty_configure_flags=\n   if test \"$enable_lto\" = \"yes\" ; then\n     case ,${enable_languages}, in\n       *,lto,*) ;;\n       *) enable_languages=\"${enable_languages},lto\" ;;\n     esac\n     if test \"${build_lto_plugin}\" = \"yes\" ; then\n       configdirs=\"$configdirs lto-plugin\"\n-      extra_host_libiberty_configure_flags=--enable-shared\n     fi\n   fi\n-  AC_SUBST(extra_host_libiberty_configure_flags)\n \n   missing_languages=`echo \",$enable_languages,\" | sed -e s/,all,/,/ -e s/,c,/,/ `\n   potential_languages=,c,\n@@ -2177,6 +2174,17 @@ then\n   esac\n fi\n \n+# Sometimes we have special requirements for the host libiberty.\n+extra_host_libiberty_configure_flags=\n+case \" $configdirs \" in\n+  *\" lto-plugin \"* | *\" libcc1 \"*)\n+    # When these are to be built as shared libraries, the same applies to\n+    # libiberty.\n+    extra_host_libiberty_configure_flags=--enable-shared\n+    ;;\n+esac\n+AC_SUBST(extra_host_libiberty_configure_flags)\n+\n # Produce a warning message for the subdirs we can't configure.\n # This isn't especially interesting in the Cygnus tree, but in the individual\n # FSF releases, it's important to let people know when their machine isn't"}]}