{"sha": "ddce352881f2a8fcea7e43d6e0354b5d03e1874e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGRjZTM1Mjg4MWYyYThmY2VhN2U0M2Q2ZTAzNTRiNWQwM2UxODc0ZQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1999-02-24T11:46:56Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1999-02-24T11:46:56Z"}, "message": "* pt.c (tsubst): Allow an array of explicit size zero.\n\nFrom-SVN: r25400", "tree": {"sha": "1e5aee575a337c24c45dd986e2256087618d5a0c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e5aee575a337c24c45dd986e2256087618d5a0c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ddce352881f2a8fcea7e43d6e0354b5d03e1874e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ddce352881f2a8fcea7e43d6e0354b5d03e1874e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ddce352881f2a8fcea7e43d6e0354b5d03e1874e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ddce352881f2a8fcea7e43d6e0354b5d03e1874e/comments", "author": null, "committer": null, "parents": [{"sha": "69688f1ed7606189b16bbdbd506dfc6e863e8309", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69688f1ed7606189b16bbdbd506dfc6e863e8309", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69688f1ed7606189b16bbdbd506dfc6e863e8309"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "348739f079c0e39c05f7b7744e7625faa760e745", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ddce352881f2a8fcea7e43d6e0354b5d03e1874e/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ddce352881f2a8fcea7e43d6e0354b5d03e1874e/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ddce352881f2a8fcea7e43d6e0354b5d03e1874e", "patch": "@@ -1,3 +1,7 @@\n+1999-02-24  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* pt.c (tsubst): Allow an array of explicit size zero.\n+\n 1999-02-23  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* errfn.c: Change varargs code to look like toplev.c."}, {"sha": "b13a8c832ebf65e01969164aa9d79230f43c513d", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ddce352881f2a8fcea7e43d6e0354b5d03e1874e/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ddce352881f2a8fcea7e43d6e0354b5d03e1874e/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=ddce352881f2a8fcea7e43d6e0354b5d03e1874e", "patch": "@@ -6017,9 +6017,9 @@ tsubst (t, args, complain, in_decl)\n \treturn t;\n \n       {\n-\ttree max = TREE_OPERAND (TYPE_MAX_VALUE (t), 0);\n+\ttree max, omax = TREE_OPERAND (TYPE_MAX_VALUE (t), 0);\n \n-\tmax = tsubst_expr (max, args, complain, in_decl);\n+\tmax = tsubst_expr (omax, args, complain, in_decl);\n \tif (max == error_mark_node)\n \t  return error_mark_node;\n \n@@ -6032,7 +6032,13 @@ tsubst (t, args, complain, in_decl)\n \t    return itype;\n \t  }\n \n-\tif (integer_zerop (max) || INT_CST_LT (max, integer_zero_node))\n+\tif (integer_zerop (omax))\n+\t  {\n+\t    /* Still allow an explicit array of size zero.  */\n+\t    if (pedantic)\n+\t      pedwarn (\"creating array with size zero\");\n+\t  }\n+\telse if (integer_zerop (max) || INT_CST_LT (max, integer_zero_node))\n \t  {\n \t    /* [temp.deduct]\n "}]}