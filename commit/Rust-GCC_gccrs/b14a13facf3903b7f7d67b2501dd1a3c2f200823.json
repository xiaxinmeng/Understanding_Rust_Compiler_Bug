{"sha": "b14a13facf3903b7f7d67b2501dd1a3c2f200823", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjE0YTEzZmFjZjM5MDNiN2Y3ZDY3YjI1MDFkZDFhM2MyZjIwMDgyMw==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2018-02-28T17:36:20Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2018-02-28T17:36:20Z"}, "message": "re PR fortran/83901 (ICE in fold_convert_loc, at fold-const.c:2402)\n\n2018-02-28  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/83901\n\t* trans-stmt.c (trans_associate_var): Make sure that the se\n\texpression is a pointer type before converting it to the symbol\n\tbackend_decl type.\n\n2018-02-28  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/83901\n\t* gfortran.dg/associate_37.f90: New test.\n\n\tPR fortran/83344\n\t* gfortran.dg/associate_36.f90: Add Steve Kargl as contributer.\n\nFrom-SVN: r258076", "tree": {"sha": "dcd09ad336ba1d82feadc364daa2642e3d5bf37c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dcd09ad336ba1d82feadc364daa2642e3d5bf37c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b14a13facf3903b7f7d67b2501dd1a3c2f200823", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b14a13facf3903b7f7d67b2501dd1a3c2f200823", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b14a13facf3903b7f7d67b2501dd1a3c2f200823", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b14a13facf3903b7f7d67b2501dd1a3c2f200823/comments", "author": null, "committer": null, "parents": [{"sha": "ba64c7b8934fbd59a1d5bd370a4aaab4bf2d0ed2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba64c7b8934fbd59a1d5bd370a4aaab4bf2d0ed2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba64c7b8934fbd59a1d5bd370a4aaab4bf2d0ed2"}], "stats": {"total": 36, "additions": 34, "deletions": 2}, "files": [{"sha": "ebddc041759e6e5b2a95b8a29afa7046bfdbde7b", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b14a13facf3903b7f7d67b2501dd1a3c2f200823/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b14a13facf3903b7f7d67b2501dd1a3c2f200823/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=b14a13facf3903b7f7d67b2501dd1a3c2f200823", "patch": "@@ -1,3 +1,10 @@\n+2018-02-28  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/83901\n+\t* trans-stmt.c (trans_associate_var): Make sure that the se\n+\texpression is a pointer type before converting it to the symbol\n+\tbackend_decl type.\n+\n 2018-02-25  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/83633"}, {"sha": "25d5d3cc8cb5564b472d240c07f348c4aef045b3", "filename": "gcc/fortran/trans-stmt.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b14a13facf3903b7f7d67b2501dd1a3c2f200823/gcc%2Ffortran%2Ftrans-stmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b14a13facf3903b7f7d67b2501dd1a3c2f200823/gcc%2Ffortran%2Ftrans-stmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-stmt.c?ref=b14a13facf3903b7f7d67b2501dd1a3c2f200823", "patch": "@@ -1907,7 +1907,8 @@ trans_associate_var (gfc_symbol *sym, gfc_wrapped_block *block)\n \n       attr = gfc_expr_attr (e);\n       if (sym->ts.type == BT_CHARACTER && e->ts.type == BT_CHARACTER\n-\t  && (attr.allocatable || attr.pointer || attr.dummy))\n+\t  && (attr.allocatable || attr.pointer || attr.dummy)\n+\t  && POINTER_TYPE_P (TREE_TYPE (se.expr)))\n \t{\n \t  /* These are pointer types already.  */\n \t  tmp = fold_convert (TREE_TYPE (sym->backend_decl), se.expr);"}, {"sha": "33387b022a298eb8bdfd881f35a8fa47b5d8a113", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b14a13facf3903b7f7d67b2501dd1a3c2f200823/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b14a13facf3903b7f7d67b2501dd1a3c2f200823/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b14a13facf3903b7f7d67b2501dd1a3c2f200823", "patch": "@@ -1,3 +1,11 @@\n+2018-02-28  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/83901\n+\t* gfortran.dg/associate_37.f90: New test.\n+\n+\tPR fortran/83344\n+\t* gfortran.dg/associate_36.f90: Add Steve Kargl as contributer.\n+\n 2018-02-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/52991"}, {"sha": "1506dc917bad4e5ab27b18510bc042f7fce39120", "filename": "gcc/testsuite/gfortran.dg/associate_36.f90", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b14a13facf3903b7f7d67b2501dd1a3c2f200823/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_36.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b14a13facf3903b7f7d67b2501dd1a3c2f200823/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_36.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_36.f90?ref=b14a13facf3903b7f7d67b2501dd1a3c2f200823", "patch": "@@ -2,7 +2,8 @@\n !\n ! Test the fix for PR83344.\n !\n-! Contributed by <Janne Blomqvist  <jb@gcc.gnu.org>\n+! Contributed by Janne Blomqvist  <jb@gcc.gnu.org>\n+! and Steve Kargl  <kargl@gcc.gnu.org>\n !\n program foo\n    implicit none"}, {"sha": "bcabe277be1133677ec8e54c81f83a863f1a766d", "filename": "gcc/testsuite/gfortran.dg/associate_37.f90", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b14a13facf3903b7f7d67b2501dd1a3c2f200823/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_37.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b14a13facf3903b7f7d67b2501dd1a3c2f200823/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_37.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_37.f90?ref=b14a13facf3903b7f7d67b2501dd1a3c2f200823", "patch": "@@ -0,0 +1,15 @@\n+! { dg-do run }\n+! { dg-options \"-fcoarray=single\" }\n+!\n+! Tests the fix for the regression PR83901.\n+!\n+! Contributed by G Steinmetz  <gscfq@t-online.de>\n+!\n+program p\n+   character(8), allocatable :: x[:]\n+   allocate (x[*])\n+   x = 'abc'\n+   associate (y => x)\n+     if (y .ne. 'abc') stop 1\n+   end associate\n+end"}]}