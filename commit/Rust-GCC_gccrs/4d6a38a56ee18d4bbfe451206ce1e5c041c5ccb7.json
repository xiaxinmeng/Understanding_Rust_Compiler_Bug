{"sha": "4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGQ2YTM4YTU2ZWUxOGQ0YmJmZTQ1MTIwNmNlMWU1YzA0MWM1Y2NiNw==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2015-05-28T10:48:29Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-05-28T10:48:29Z"}, "message": "sem_util.adb (Wrong_Type): In any instance...\n\n2015-05-28  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_util.adb (Wrong_Type): In any instance, do not emit error\n\tif type of expression is the partial view of the expected type.\n\n2015-05-28  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_res.adb (Resolve_Actuals): a)  The replacement of formal\n\tnames in named associations only needs to be done within an\n\tinstance, on a call to a primitive of a formal derived type,\n\twhere the actual subprogram may have different formal names than\n\tthose of the primitive operation of the formal type.\n\tb) Defaulted parameters must be taken into account when obtaining\n\tthe names of the formals of the actual subprogram being called.\n\nFrom-SVN: r223804", "tree": {"sha": "6a53879ef2ea6f4d4f74d2e4eb820b3f62cb5f2a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6a53879ef2ea6f4d4f74d2e4eb820b3f62cb5f2a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9fb5fd444bef7601aec09778bc6ee926a6f76fd4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fb5fd444bef7601aec09778bc6ee926a6f76fd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9fb5fd444bef7601aec09778bc6ee926a6f76fd4"}], "stats": {"total": 44, "additions": 35, "deletions": 9}, "files": [{"sha": "c618018346cc3dbfed8a9520588a304538b70a66", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7", "patch": "@@ -1,3 +1,18 @@\n+2015-05-28  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_util.adb (Wrong_Type): In any instance, do not emit error\n+\tif type of expression is the partial view of the expected type.\n+\n+2015-05-28  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_res.adb (Resolve_Actuals): a)  The replacement of formal\n+\tnames in named associations only needs to be done within an\n+\tinstance, on a call to a primitive of a formal derived type,\n+\twhere the actual subprogram may have different formal names than\n+\tthose of the primitive operation of the formal type.\n+\tb) Defaulted parameters must be taken into account when obtaining\n+\tthe names of the formals of the actual subprogram being called.\n+\n 2015-05-28  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_ch13.adb, sem_disp.ads: Minor reformatting."}, {"sha": "9492fff6b0d354cca3f1d9a741cbb46156111783", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7", "patch": "@@ -3053,11 +3053,12 @@ package body Sem_Res is\n       Real_F : Entity_Id;\n \n       Real_Subp : Entity_Id;\n-      --  If the subprogram being called is an overridden operation,\n-      --  Real_Subp is the subprogram that will be called. It may have\n-      --  different formal names than the overridden operation, so after\n-      --  actual is resolved, the name of the actual in a named association\n-      --  must carry the name of the actual of the subprogram being called.\n+      --  If the subprogram being called is an inherited operation for\n+      --  a formal derived type in an instance, Real_Subp is the subprogram\n+      --  that will be called. It may have different formal names than the\n+      --  operation of the formal in the generic, so after actual is resolved\n+      --  the name of the actual in a named association must carry the name\n+      --  of the actual of the subprogram being called.\n \n       procedure Check_Aliased_Parameter;\n       --  Check rules on aliased parameters and related accessibility rules\n@@ -3569,6 +3570,7 @@ package body Sem_Res is\n \n       if Is_Overloadable (Nam)\n         and then Is_Inherited_Operation (Nam)\n+        and then In_Instance\n         and then Present (Alias (Nam))\n         and then Present (Overridden_Operation (Alias (Nam)))\n       then\n@@ -4534,17 +4536,17 @@ package body Sem_Res is\n \n             Next_Actual (A);\n \n-            if Present (Real_Subp) then\n-               Next_Formal (Real_F);\n-            end if;\n-\n          --  Case where actual is not present\n \n          else\n             Insert_Default;\n          end if;\n \n          Next_Formal (F);\n+\n+         if Present (Real_Subp) then\n+            Next_Formal (Real_F);\n+         end if;\n       end loop;\n    end Resolve_Actuals;\n "}, {"sha": "3fe6d67787bd767aa586be28ad6f2ba5f5121bf2", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=4d6a38a56ee18d4bbfe451206ce1e5c041c5ccb7", "patch": "@@ -19027,6 +19027,15 @@ package body Sem_Util is\n            and then Covers (Full_View (Expected_Type), Etype (Expr))\n          then\n             return;\n+\n+         --  Conversely, type of expression may be the private one.\n+\n+         elsif Is_Private_Type (Base_Type (Etype (Expr)))\n+           and then Full_View (Base_Type (Etype (Expr))) =\n+             Expected_Type\n+         then\n+            return;\n+\n          end if;\n       end if;\n "}]}