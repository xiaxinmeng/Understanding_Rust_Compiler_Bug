{"sha": "91088ddb810837c123b010796ec85bed37a5f78b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTEwODhkZGI4MTA4MzdjMTIzYjAxMDc5NmVjODViZWQzN2E1Zjc4Yg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2001-06-08T18:12:54Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2001-06-08T18:12:54Z"}, "message": "stmt.c (current_nesting_level): New fn.\n\n        * stmt.c (current_nesting_level): New fn.\n        * tree.h: Declare it.\n        * c-semantics.c (genrtl_compound_stmt): Use it.\n\n        * dbxout.c (dbxout_symbol): Use DECL_RTL_SET_P.\n\nFrom-SVN: r43037", "tree": {"sha": "187e90ea880d88157f9c24c0a1081dd53bfa131c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/187e90ea880d88157f9c24c0a1081dd53bfa131c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/91088ddb810837c123b010796ec85bed37a5f78b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91088ddb810837c123b010796ec85bed37a5f78b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91088ddb810837c123b010796ec85bed37a5f78b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91088ddb810837c123b010796ec85bed37a5f78b/comments", "author": null, "committer": null, "parents": [{"sha": "c16bd4e207aa2b1a9b6cfd2b5828793455570311", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c16bd4e207aa2b1a9b6cfd2b5828793455570311", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c16bd4e207aa2b1a9b6cfd2b5828793455570311"}], "stats": {"total": 32, "additions": 30, "deletions": 2}, "files": [{"sha": "984633dcb037131d16497fb2d2514b6ef2454ee7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91088ddb810837c123b010796ec85bed37a5f78b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91088ddb810837c123b010796ec85bed37a5f78b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=91088ddb810837c123b010796ec85bed37a5f78b", "patch": "@@ -1,3 +1,11 @@\n+2001-06-08  Jason Merrill  <jason_merrill@redhat.com>\n+\n+\t* stmt.c (current_nesting_level): New fn.\n+\t* tree.h: Declare it.\n+\t* c-semantics.c (genrtl_compound_stmt): Use it.\n+\n+\t* dbxout.c (dbxout_symbol): Use DECL_RTL_SET_P.\n+\n 2001-06-08  Jakub Jelinek  <jakub@redhat.com>\n \n \t* jump.c (mark_modified_reg): Allow jump threading if condition\n@@ -134,7 +142,6 @@ Thu Jun  7 16:17:40 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \tdocumentation should be added to invoke.texi.  Avoid an overfull\n \thbox.\n \n->>>>>>> 1.10276\n Thu Jun  7 17:09:50 CEST 2001  Jan Hubicka  <jh@suse.cz>\n \n \t* toplev.c (rest_of_compilation): Revert previous patch.\n@@ -169,6 +176,7 @@ Thu Jun  7 12:12:58 CEST 2001  Jan Hubicka  <jh@suse.cz>\n \n \t* emit-rtl.c (operand_subword): Remove unused variable.\n \n+>>>>>>> 1.10284\n Wed Jun  6 14:51:05 CEST 2001  Jan Hubicka  <jh@suse.cz>\n \n \t* i386.md (floatdi?f): Avoid usinf of SSE instructions"}, {"sha": "6a963a9a10e20eda71ed84eb73de18e56e469560", "filename": "gcc/c-semantics.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91088ddb810837c123b010796ec85bed37a5f78b/gcc%2Fc-semantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91088ddb810837c123b010796ec85bed37a5f78b/gcc%2Fc-semantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-semantics.c?ref=91088ddb810837c123b010796ec85bed37a5f78b", "patch": "@@ -666,7 +666,17 @@ void\n genrtl_compound_stmt (t)\n     tree t;\n {\n+#ifdef ENABLE_CHECKING\n+  struct nesting *n = current_nesting_level ();\n+#endif\n+\n   expand_stmt (COMPOUND_BODY (t));\n+\n+#ifdef ENABLE_CHECKING\n+  /* Make sure that we've pushed and popped the same number of levels.  */\n+  if (n != current_nesting_level ())\n+    abort ();\n+#endif\n }\n \n /* Generate the RTL for an ASM_STMT. */"}, {"sha": "ee51faecde0cbc3a6a70488a3f5a870602bd6efe", "filename": "gcc/dbxout.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91088ddb810837c123b010796ec85bed37a5f78b/gcc%2Fdbxout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91088ddb810837c123b010796ec85bed37a5f78b/gcc%2Fdbxout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdbxout.c?ref=91088ddb810837c123b010796ec85bed37a5f78b", "patch": "@@ -1816,7 +1816,7 @@ dbxout_symbol (decl, local)\n     case RESULT_DECL:\n       /* Named return value, treat like a VAR_DECL.  */\n     case VAR_DECL:\n-      if (DECL_RTL (decl) == 0)\n+      if (! DECL_RTL_SET_P (decl))\n \treturn 0;\n       /* Don't mention a variable that is external.\n \t Let the file that defines it describe it.  */"}, {"sha": "3cefc7ce3eed1b05319d5f369bed52e167c9a015", "filename": "gcc/stmt.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91088ddb810837c123b010796ec85bed37a5f78b/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91088ddb810837c123b010796ec85bed37a5f78b/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=91088ddb810837c123b010796ec85bed37a5f78b", "patch": "@@ -3395,6 +3395,15 @@ conditional_context ()\n   return block_stack && block_stack->data.block.conditional_code;\n }\n \n+/* Return an opaque pointer to the current nesting level, so frontend code\n+   can check its own sanity.  */\n+\n+struct nesting *\n+current_nesting_level ()\n+{\n+  return cfun ? block_stack : 0;\n+}\n+\n /* Emit a handler label for a nonlocal goto handler.\n    Also emit code to store the handler label in SLOT before BEFORE_INSN.  */\n "}, {"sha": "7805ef8987b6ad29a6ac6bf35c4a608921145a37", "filename": "gcc/tree.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91088ddb810837c123b010796ec85bed37a5f78b/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91088ddb810837c123b010796ec85bed37a5f78b/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=91088ddb810837c123b010796ec85bed37a5f78b", "patch": "@@ -2567,6 +2567,7 @@ extern void end_cleanup_deferral\t\tPARAMS ((void));\n extern int is_body_block\t\t\tPARAMS ((tree));\n \n extern int conditional_context\t\t\tPARAMS ((void));\n+extern struct nesting * current_nesting_level\tPARAMS ((void));\n extern tree last_cleanup_this_contour\t\tPARAMS ((void));\n extern void expand_start_case\t\t\tPARAMS ((int, tree, tree,\n \t\t\t\t\t\t       const char *));"}]}