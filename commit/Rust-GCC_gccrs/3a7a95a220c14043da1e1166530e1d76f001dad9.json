{"sha": "3a7a95a220c14043da1e1166530e1d76f001dad9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2E3YTk1YTIyMGMxNDA0M2RhMWUxMTY2NTMwZTFkNzZmMDAxZGFkOQ==", "commit": {"author": {"name": "Jos\u00e9 Rui Faustino de Sousa", "email": "jrfsousa@gmail.com", "date": "2020-08-30T18:03:13Z"}, "committer": {"name": "Jos\u00e9 Rui Faustino de Sousa", "email": "jrfsousa@gmail.com", "date": "2020-08-30T18:03:13Z"}, "message": "\t2020-8-20  Jos\u00e9 Rui Faustino de Sousa  <jrfsousa@gmail.com>\n\ngcc/fortran/ChangeLog:\n\n\tPR fortran/96727\n\t* expr.c (gfc_check_init_expr): Add default error message for the AS_ASSUMED_RANK case.\n\ngcc/testsuite/ChangeLog:\n\n\tPR fortran/96727\n\t* gfortran.dg/PR96727.f90: New test.", "tree": {"sha": "617c9faf7d287b69cd3321eb22a0ee16a120c6f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/617c9faf7d287b69cd3321eb22a0ee16a120c6f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3a7a95a220c14043da1e1166530e1d76f001dad9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a7a95a220c14043da1e1166530e1d76f001dad9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a7a95a220c14043da1e1166530e1d76f001dad9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a7a95a220c14043da1e1166530e1d76f001dad9/comments", "author": {"login": "jrfsousa", "id": 56982651, "node_id": "MDQ6VXNlcjU2OTgyNjUx", "avatar_url": "https://avatars.githubusercontent.com/u/56982651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrfsousa", "html_url": "https://github.com/jrfsousa", "followers_url": "https://api.github.com/users/jrfsousa/followers", "following_url": "https://api.github.com/users/jrfsousa/following{/other_user}", "gists_url": "https://api.github.com/users/jrfsousa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrfsousa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrfsousa/subscriptions", "organizations_url": "https://api.github.com/users/jrfsousa/orgs", "repos_url": "https://api.github.com/users/jrfsousa/repos", "events_url": "https://api.github.com/users/jrfsousa/events{/privacy}", "received_events_url": "https://api.github.com/users/jrfsousa/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jrfsousa", "id": 56982651, "node_id": "MDQ6VXNlcjU2OTgyNjUx", "avatar_url": "https://avatars.githubusercontent.com/u/56982651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrfsousa", "html_url": "https://github.com/jrfsousa", "followers_url": "https://api.github.com/users/jrfsousa/followers", "following_url": "https://api.github.com/users/jrfsousa/following{/other_user}", "gists_url": "https://api.github.com/users/jrfsousa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrfsousa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrfsousa/subscriptions", "organizations_url": "https://api.github.com/users/jrfsousa/orgs", "repos_url": "https://api.github.com/users/jrfsousa/repos", "events_url": "https://api.github.com/users/jrfsousa/events{/privacy}", "received_events_url": "https://api.github.com/users/jrfsousa/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f7d99acf6d94eed6a7f9b9f76bd4c2243c660b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f7d99acf6d94eed6a7f9b9f76bd4c2243c660b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f7d99acf6d94eed6a7f9b9f76bd4c2243c660b2"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "68784a235f146f9d7b55e6c3ad374934b5b9f244", "filename": "gcc/fortran/expr.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a7a95a220c14043da1e1166530e1d76f001dad9/gcc%2Ffortran%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a7a95a220c14043da1e1166530e1d76f001dad9/gcc%2Ffortran%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.c?ref=3a7a95a220c14043da1e1166530e1d76f001dad9", "patch": "@@ -3007,6 +3007,12 @@ gfc_check_init_expr (gfc_expr *e)\n \t\t\t   e->symtree->n.sym->name, &e->where);\n \t\tbreak;\n \n+\t      case AS_ASSUMED_RANK:\n+\t\tgfc_error (\"Assumed-rank array %qs at %L is not permitted \"\n+\t\t\t   \"in an initialization expression\",\n+\t\t\t   e->symtree->n.sym->name, &e->where);\n+\t\tbreak;\n+\n \t      default:\n \t\tgcc_unreachable();\n \t  }"}, {"sha": "d45dbb7ccd64e3bf5d31137d491273773babe674", "filename": "gcc/testsuite/gfortran.dg/PR96727.f90", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a7a95a220c14043da1e1166530e1d76f001dad9/gcc%2Ftestsuite%2Fgfortran.dg%2FPR96727.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a7a95a220c14043da1e1166530e1d76f001dad9/gcc%2Ftestsuite%2Fgfortran.dg%2FPR96727.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2FPR96727.f90?ref=3a7a95a220c14043da1e1166530e1d76f001dad9", "patch": "@@ -0,0 +1,34 @@\n+! { dg-do run }\n+!\n+! Test the fix for PR96727\n+!\n+\n+program cref_p\n+\n+  implicit none\n+  \n+  integer                     :: i\n+\n+  integer,          parameter :: n = 3\n+  integer,          parameter :: p(*) = [(i, i=1,n*n)]\n+  character(len=*), parameter :: q = repeat('a', n*n)\n+  \n+  integer            :: a(n,n)\n+  character(len=n*n) :: c\n+\n+  a = reshape(p, shape=[n,n])\n+  call csub(a, c)\n+  if (c/=q) stop 1\n+  stop\n+\n+contains\n+\n+  subroutine csub(a, b)\n+    integer,                intent(in)  :: a(..)\n+    character(len=size(a)), intent(out) :: b\n+\n+    b = repeat('a', len(b))\n+    return\n+  end subroutine csub\n+  \n+end program cref_p"}]}