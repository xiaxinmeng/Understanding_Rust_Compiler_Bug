{"sha": "44a2150dce36055e552f408433327d0ead1359d0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDRhMjE1MGRjZTM2MDU1ZTU1MmY0MDg0MzMzMjdkMGVhZDEzNTlkMA==", "commit": {"author": {"name": "Zack Weinberg", "email": "zackw@stanford.edu", "date": "2001-04-03T01:01:41Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2001-04-03T01:01:41Z"}, "message": "expr.c (pop_type_0): Save the result of the first lang_printable_name call in a scratch buffer...\n\n\t* expr.c (pop_type_0): Save the result of the first\n\tlang_printable_name call in a scratch buffer, so it\n\twon't be clobbered by the second call.\n\nFrom-SVN: r41032", "tree": {"sha": "c3db32d8130542bcf75cf7b14580d9da46c60023", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3db32d8130542bcf75cf7b14580d9da46c60023"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/44a2150dce36055e552f408433327d0ead1359d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44a2150dce36055e552f408433327d0ead1359d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44a2150dce36055e552f408433327d0ead1359d0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44a2150dce36055e552f408433327d0ead1359d0/comments", "author": null, "committer": null, "parents": [{"sha": "30a20a1ee0168656d375ea2333e14b46937bdc6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30a20a1ee0168656d375ea2333e14b46937bdc6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30a20a1ee0168656d375ea2333e14b46937bdc6a"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "ac8ee1c8ce18759f9e5379ea9756fe50a4aa120e", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44a2150dce36055e552f408433327d0ead1359d0/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44a2150dce36055e552f408433327d0ead1359d0/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=44a2150dce36055e552f408433327d0ead1359d0", "patch": "@@ -1,3 +1,9 @@\n+2001-04-02  Zack Weinberg  <zackw@stanford.edu>\n+\n+\t* expr.c (pop_type_0): Save the result of the first\n+\tlang_printable_name call in a scratch buffer, so it \n+\twon't be clobbered by the second call.\n+\n 2001-03-28  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* expr.c (pop_type_0): Call `concat' rather than building the"}, {"sha": "cb9ae160931f5aefef7d93934096d99cfdd1891a", "filename": "gcc/java/expr.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44a2150dce36055e552f408433327d0ead1359d0/gcc%2Fjava%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44a2150dce36055e552f408433327d0ead1359d0/gcc%2Fjava%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fexpr.c?ref=44a2150dce36055e552f408433327d0ead1359d0", "patch": "@@ -356,9 +356,15 @@ pop_type_0 (type, messagep)\n \treturn object_ptr_type_node;\n     }\n \n-  *messagep = concat (\"expected type '\", lang_printable_name (type, 0),\n-\t\t      \"' but stack contains '\", lang_printable_name (t, 0),\n-\t\t      \"'\", NULL);\n+  /* lang_printable_name uses a static buffer, so we must save the result\n+     from calling it the first time.  */\n+  {\n+    char *temp = xstrdup (lang_printable_name (type, 0));\n+    *messagep = concat (\"expected type '\", temp,\n+\t\t\t\"' but stack contains '\", lang_printable_name (t, 0),\n+\t\t\t\"'\", NULL);\n+    free (temp);\n+  }\n   return type;\n }\n "}]}