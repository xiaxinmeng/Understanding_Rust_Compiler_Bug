{"sha": "8733916b600980c3c3b2603f7127dbf10c8a09f5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODczMzkxNmI2MDA5ODBjM2MzYjI2MDNmNzEyN2RiZjEwYzhhMDlmNQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2011-11-22T20:48:33Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2011-11-22T20:48:33Z"}, "message": "re PR c++/51265 (ICE in finish_decltype_type, at cp/semantics.c:5244)\n\n/cp\n2011-11-22  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/51265\n\t* semantics.c (finish_decltype_type): Handle PTRMEM_CST.\n\n/testsuite\n2011-11-22  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/51265\n\t* g++.dg/cpp0x/decltype36.C: New.\n\nFrom-SVN: r181638", "tree": {"sha": "13dd384e23226e7b359f3c6b05e2677f9292f440", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/13dd384e23226e7b359f3c6b05e2677f9292f440"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8733916b600980c3c3b2603f7127dbf10c8a09f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8733916b600980c3c3b2603f7127dbf10c8a09f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8733916b600980c3c3b2603f7127dbf10c8a09f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8733916b600980c3c3b2603f7127dbf10c8a09f5/comments", "author": null, "committer": null, "parents": [{"sha": "68cf80fa0be828435c7efd6d3780b41cea406a98", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68cf80fa0be828435c7efd6d3780b41cea406a98", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68cf80fa0be828435c7efd6d3780b41cea406a98"}], "stats": {"total": 34, "additions": 33, "deletions": 1}, "files": [{"sha": "9d8f47b8666f78676234ec99505c6e1006387fac", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8733916b600980c3c3b2603f7127dbf10c8a09f5/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8733916b600980c3c3b2603f7127dbf10c8a09f5/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=8733916b600980c3c3b2603f7127dbf10c8a09f5", "patch": "@@ -1,3 +1,8 @@\n+2011-11-22  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/51265\n+\t* semantics.c (finish_decltype_type): Handle PTRMEM_CST.\n+\n 2011-11-22  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR c++/51143"}, {"sha": "3c9853a3529c594a725161d50c2c61c0df2cd512", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8733916b600980c3c3b2603f7127dbf10c8a09f5/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8733916b600980c3c3b2603f7127dbf10c8a09f5/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=8733916b600980c3c3b2603f7127dbf10c8a09f5", "patch": "@@ -5235,8 +5235,9 @@ finish_decltype_type (tree expr, bool id_expression_or_member_access_p,\n           gcc_unreachable ();\n \n         case INTEGER_CST:\n+\tcase PTRMEM_CST:\n           /* We can get here when the id-expression refers to an\n-             enumerator.  */\n+             enumerator or non-type template parameter.  */\n           type = TREE_TYPE (expr);\n           break;\n "}, {"sha": "d0dd9b97afdf0a3f2192690a3c0370a9182da4c8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8733916b600980c3c3b2603f7127dbf10c8a09f5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8733916b600980c3c3b2603f7127dbf10c8a09f5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8733916b600980c3c3b2603f7127dbf10c8a09f5", "patch": "@@ -1,3 +1,8 @@\n+2011-11-22  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/51265\n+\t* g++.dg/cpp0x/decltype36.C: New.\n+\n 2011-11-22  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/51074"}, {"sha": "f3dfed992cfd2d17ec568a80ec282bb666b3b45e", "filename": "gcc/testsuite/g++.dg/cpp0x/decltype36.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8733916b600980c3c3b2603f7127dbf10c8a09f5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype36.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8733916b600980c3c3b2603f7127dbf10c8a09f5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype36.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype36.C?ref=8733916b600980c3c3b2603f7127dbf10c8a09f5", "patch": "@@ -0,0 +1,21 @@\n+// PR c++/51265\n+// { dg-options -std=c++0x }\n+\n+struct Funny\n+{\n+  int print(int);\n+};\n+\n+template<typename X>\n+void c();\n+\n+template<typename X, X ff>\n+void xx()\n+{\n+  c<decltype(ff)>();\n+}\n+\n+int main()\n+{\n+  xx<int(Funny::*)(int), &Funny::print>();\n+}"}]}