{"sha": "9845b52bfbbfe165725ff96f9802530bbc26d007", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg0NWI1MmJmYmJmZTE2NTcyNWZmOTZmOTgwMjUzMGJiYzI2ZDAwNw==", "commit": {"author": {"name": "Theodore Papadopoulo", "email": "Theodore.Papadopoulo@sophia.inria.fr", "date": "2000-08-12T01:30:06Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2000-08-12T01:30:06Z"}, "message": "decl2.c (add_function): Reorganize.\n\n        * decl2.c (add_function): Reorganize.\n        (arg_assoc): Do not consider function template decls.\n\nFrom-SVN: r35653", "tree": {"sha": "07ee97d7f5e62d27b7e364b7b03c19c04a497ed7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/07ee97d7f5e62d27b7e364b7b03c19c04a497ed7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9845b52bfbbfe165725ff96f9802530bbc26d007", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9845b52bfbbfe165725ff96f9802530bbc26d007", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9845b52bfbbfe165725ff96f9802530bbc26d007", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9845b52bfbbfe165725ff96f9802530bbc26d007/comments", "author": {"login": "papadop", "id": 1387516, "node_id": "MDQ6VXNlcjEzODc1MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1387516?v=4", "gravatar_id": "", "url": "https://api.github.com/users/papadop", "html_url": "https://github.com/papadop", "followers_url": "https://api.github.com/users/papadop/followers", "following_url": "https://api.github.com/users/papadop/following{/other_user}", "gists_url": "https://api.github.com/users/papadop/gists{/gist_id}", "starred_url": "https://api.github.com/users/papadop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/papadop/subscriptions", "organizations_url": "https://api.github.com/users/papadop/orgs", "repos_url": "https://api.github.com/users/papadop/repos", "events_url": "https://api.github.com/users/papadop/events{/privacy}", "received_events_url": "https://api.github.com/users/papadop/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3388651ce03f3e78e9342af592247d68b3f6fc16", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3388651ce03f3e78e9342af592247d68b3f6fc16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3388651ce03f3e78e9342af592247d68b3f6fc16"}], "stats": {"total": 40, "additions": 32, "deletions": 8}, "files": [{"sha": "82ceceb9c0439caac44aa6ee8f83ba5539add2a5", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9845b52bfbbfe165725ff96f9802530bbc26d007/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9845b52bfbbfe165725ff96f9802530bbc26d007/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9845b52bfbbfe165725ff96f9802530bbc26d007", "patch": "@@ -1,3 +1,8 @@\n+2000-08-11  Theodore Papadopoulo <Theodore.Papadopoulo@sophia.inria.fr>\n+\n+\t* decl2.c (add_function): Reorganize.\n+\t(arg_assoc): Do not consider function template decls.\n+\n 2000-08-11  Jason Merrill  <jason@redhat.com>\n \n \t* decl.c (lookup_name_real): Don't forget the TYPENAME_TYPE we're"}, {"sha": "7bdd34c0008a799387062702a7147c5b8d801ae9", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 14, "deletions": 8, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9845b52bfbbfe165725ff96f9802530bbc26d007/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9845b52bfbbfe165725ff96f9802530bbc26d007/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=9845b52bfbbfe165725ff96f9802530bbc26d007", "patch": "@@ -4791,10 +4791,11 @@ add_function (k, fn)\n      case.  */\n \n   /* We must find only functions, or exactly one non-function. */\n-  if (k->functions && is_overloaded_fn (k->functions)\n-      && is_overloaded_fn (fn))\n+  if (!k->functions) \n+    k->functions = fn;\n+  else if (is_overloaded_fn (k->functions) && is_overloaded_fn (fn))\n     k->functions = build_overload (fn, k->functions);\n-  else if (k->functions)\n+  else\n     {\n       tree f1 = OVL_CURRENT (k->functions);\n       tree f2 = fn;\n@@ -4807,8 +4808,7 @@ add_function (k, fn)\n       cp_error (\"  in call to `%D'\", k->name);\n       return 1;\n     }\n-  else\n-    k->functions = fn;\n+\n   return 0;\n }\n \n@@ -5063,9 +5063,15 @@ arg_assoc (k, n)\n     {\n       my_friendly_assert (TREE_CODE (n) == OVERLOAD, 980715);\n       \n-      for (; n; n = OVL_CHAIN (n))\n-\tif (arg_assoc_type (k, TREE_TYPE (OVL_FUNCTION (n))))\n-\t  return 1;\n+      for (; n; n = OVL_CHAIN (n)) \n+        {\n+          /* Do not consider function template decls during Koenig lookup.  */\n+\n+          tree fn = OVL_FUNCTION (n);\n+\t  if (!DECL_FUNCTION_TEMPLATE_P (fn)\n+              && arg_assoc_type (k, TREE_TYPE (fn)))\n+\t    return 1;\n+        }\n     }\n \n   return 0;"}, {"sha": "b8014a57fa3129ddb4f0bb2eb71c845a7fc64d39", "filename": "gcc/testsuite/g++.old-deja/g++.ns/koenig9.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9845b52bfbbfe165725ff96f9802530bbc26d007/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Fkoenig9.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9845b52bfbbfe165725ff96f9802530bbc26d007/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Fkoenig9.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Fkoenig9.C?ref=9845b52bfbbfe165725ff96f9802530bbc26d007", "patch": "@@ -0,0 +1,13 @@\n+// Build don't link:\n+\n+// Copyright (C) 2000 Free Software Foundation, Inc.\n+// Contributed by Theodore.Papadopoulo 23 Jun 2000 <Theodore.Papadopoulo@sophia.inria.fr>\n+\n+#include <algorithm>\n+\n+void foo(const char*,...);\n+\n+inline void\n+bar() {\n+  foo(\"\",count);    //  ERROR - multiple overloaded count functions\n+}"}]}