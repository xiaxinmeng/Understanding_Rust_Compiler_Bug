{"sha": "6ef6945c9cbb0ab43f3b04e97f0a2285494a9c87", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmVmNjk0NWM5Y2JiMGFiNDNmM2IwNGU5N2YwYTIyODU0OTRhOWM4Nw==", "commit": {"author": {"name": "Trevor Saunders", "email": "tsaunders@mozilla.com", "date": "2014-08-05T19:52:08Z"}, "committer": {"name": "Trevor Saunders", "email": "tbsaunde@gcc.gnu.org", "date": "2014-08-05T19:52:08Z"}, "message": "fix pr62009 use after free in redirect_edge_var_map_dup\n\nThe change to get the entry for the old edge before inserting the new\none was incorrect because if inserting the new one resized the table\nthen the pointer to the entry for the old one would become invalid.\n\ngcc/\n\n\t* tree-ssa.c (redirect_edge_var_map_dup): insert newe before\n\tgetting olde.\n\nFrom-SVN: r213644", "tree": {"sha": "08e15d996f5d38479d228272b96d20455a6a1b92", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08e15d996f5d38479d228272b96d20455a6a1b92"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ef6945c9cbb0ab43f3b04e97f0a2285494a9c87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ef6945c9cbb0ab43f3b04e97f0a2285494a9c87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ef6945c9cbb0ab43f3b04e97f0a2285494a9c87", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ef6945c9cbb0ab43f3b04e97f0a2285494a9c87/comments", "author": null, "committer": null, "parents": [{"sha": "fa12e57e0cbd3f761326c511cc2eeac9581f6889", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa12e57e0cbd3f761326c511cc2eeac9581f6889", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa12e57e0cbd3f761326c511cc2eeac9581f6889"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "17a0f2d93c4adf2e7c4cc777d9a6db39f878fa6a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef6945c9cbb0ab43f3b04e97f0a2285494a9c87/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef6945c9cbb0ab43f3b04e97f0a2285494a9c87/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6ef6945c9cbb0ab43f3b04e97f0a2285494a9c87", "patch": "@@ -1,3 +1,8 @@\n+2014-08-05  Trevor Saunders  <tsaunders@mozilla.com>\n+\n+\t* tree-ssa.c (redirect_edge_var_map_dup): insert newe before\n+\tgetting olde.\n+\n 2014-08-05  Richard Biener  <rguenther@suse.de>\n \n \tPR rtl-optimization/61672"}, {"sha": "e6842969304b181b7e0f0edd8224b341b5f779f9", "filename": "gcc/tree-ssa.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef6945c9cbb0ab43f3b04e97f0a2285494a9c87/gcc%2Ftree-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef6945c9cbb0ab43f3b04e97f0a2285494a9c87/gcc%2Ftree-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa.c?ref=6ef6945c9cbb0ab43f3b04e97f0a2285494a9c87", "patch": "@@ -106,11 +106,12 @@ redirect_edge_var_map_dup (edge newe, edge olde)\n   if (!edge_var_maps)\n     return;\n \n-  auto_vec<edge_var_map> *head = edge_var_maps->get (olde);\n-  if (!head)\n+  auto_vec<edge_var_map> *new_head = &edge_var_maps->get_or_insert (newe);\n+  auto_vec<edge_var_map> *old_head = edge_var_maps->get (olde);\n+  if (!old_head)\n     return;\n \n-  edge_var_maps->get_or_insert (newe).safe_splice (*head);\n+  new_head->safe_splice (*old_head);\n }\n \n "}]}