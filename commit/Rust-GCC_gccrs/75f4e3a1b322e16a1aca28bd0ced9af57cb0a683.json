{"sha": "75f4e3a1b322e16a1aca28bd0ced9af57cb0a683", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzVmNGUzYTFiMzIyZTE2YTFhY2EyOGJkMGNlZDlhZjU3Y2IwYTY4Mw==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2019-09-09T17:59:54Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2019-09-09T17:59:54Z"}, "message": "Tweak interface to ira-build.c:ior_hard_reg_conflicts\n\nThis patch makes ior_hard_reg_conflicts take a const_hard_reg_set\nrather than a pointer, so that it can be passed a temporary object\nin later patches.\n\n2019-09-09  Richard Sandiford  <richard.sandiford@arm.com>\n\ngcc/\n\t* ira-int.h (ior_hard_reg_conflicts): Take a const_hard_reg_set\n\tinstead of a HARD_REG_SET *.\n\t* ira-build.c (ior_hard_reg_conflicts): Likewise.\n\t(ira_build): Update call accordingly.\n\t* ira-emit.c (add_range_and_copies_from_move_list): Likewise.\n\nFrom-SVN: r275535", "tree": {"sha": "6d34be743bff9b04f48cceeea34a2fb06e2bba98", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d34be743bff9b04f48cceeea34a2fb06e2bba98"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a85796511b2b7985f79331c996761f7a87cb8116", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a85796511b2b7985f79331c996761f7a87cb8116", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a85796511b2b7985f79331c996761f7a87cb8116"}], "stats": {"total": 22, "additions": 15, "deletions": 7}, "files": [{"sha": "7ae8c4333f9e9f9c03ce7a2cee9319c7cc9f84d6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=75f4e3a1b322e16a1aca28bd0ced9af57cb0a683", "patch": "@@ -1,3 +1,11 @@\n+2019-09-09  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* ira-int.h (ior_hard_reg_conflicts): Take a const_hard_reg_set\n+\tinstead of a HARD_REG_SET *.\n+\t* ira-build.c (ior_hard_reg_conflicts): Likewise.\n+\t(ira_build): Update call accordingly.\n+\t* ira-emit.c (add_range_and_copies_from_move_list): Likewise.\n+\n 2019-09-09  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* hard-reg-set.h (HARD_REG_SET::operator==): New function."}, {"sha": "834bea71011531df07cc3e51b5ef80005345720b", "filename": "gcc/ira-build.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683/gcc%2Fira-build.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683/gcc%2Fira-build.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira-build.c?ref=75f4e3a1b322e16a1aca28bd0ced9af57cb0a683", "patch": "@@ -614,15 +614,15 @@ merge_hard_reg_conflicts (ira_allocno_t from, ira_allocno_t to,\n /* Update hard register conflict information for all objects associated with\n    A to include the regs in SET.  */\n void\n-ior_hard_reg_conflicts (ira_allocno_t a, HARD_REG_SET *set)\n+ior_hard_reg_conflicts (ira_allocno_t a, const_hard_reg_set set)\n {\n   ira_allocno_object_iterator i;\n   ira_object_t obj;\n \n   FOR_EACH_ALLOCNO_OBJECT (a, obj, i)\n     {\n-      OBJECT_CONFLICT_HARD_REGS (obj) |= *set;\n-      OBJECT_TOTAL_CONFLICT_HARD_REGS (obj) |= *set;\n+      OBJECT_CONFLICT_HARD_REGS (obj) |= set;\n+      OBJECT_TOTAL_CONFLICT_HARD_REGS (obj) |= set;\n     }\n }\n \n@@ -3462,7 +3462,7 @@ ira_build (void)\n \t allocno crossing calls.  */\n       FOR_EACH_ALLOCNO (a, ai)\n \tif (ALLOCNO_CALLS_CROSSED_NUM (a) != 0)\n-\t  ior_hard_reg_conflicts (a, &call_used_reg_set);\n+\t  ior_hard_reg_conflicts (a, call_used_reg_set);\n     }\n   if (internal_flag_ira_verbose > 2 && ira_dump_file != NULL)\n     print_copies (ira_dump_file);"}, {"sha": "9ac052107214697d56b5d482b8184b7851d15b71", "filename": "gcc/ira-emit.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683/gcc%2Fira-emit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683/gcc%2Fira-emit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira-emit.c?ref=75f4e3a1b322e16a1aca28bd0ced9af57cb0a683", "patch": "@@ -1122,8 +1122,8 @@ add_range_and_copies_from_move_list (move_t list, ira_loop_tree_node_t node,\n \t      ira_allocate_object_conflicts (to_obj, n);\n \t    }\n \t}\n-      ior_hard_reg_conflicts (from, &hard_regs_live);\n-      ior_hard_reg_conflicts (to, &hard_regs_live);\n+      ior_hard_reg_conflicts (from, hard_regs_live);\n+      ior_hard_reg_conflicts (to, hard_regs_live);\n \n       update_costs (from, true, freq);\n       update_costs (to, false, freq);"}, {"sha": "95e22aa26b177a30f02a76fa2fd08a855a1a95b7", "filename": "gcc/ira-int.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683/gcc%2Fira-int.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75f4e3a1b322e16a1aca28bd0ced9af57cb0a683/gcc%2Fira-int.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira-int.h?ref=75f4e3a1b322e16a1aca28bd0ced9af57cb0a683", "patch": "@@ -998,7 +998,7 @@ extern void ira_set_allocno_class (ira_allocno_t, enum reg_class);\n extern bool ira_conflict_vector_profitable_p (ira_object_t, int);\n extern void ira_allocate_conflict_vec (ira_object_t, int);\n extern void ira_allocate_object_conflicts (ira_object_t, int);\n-extern void ior_hard_reg_conflicts (ira_allocno_t, HARD_REG_SET *);\n+extern void ior_hard_reg_conflicts (ira_allocno_t, const_hard_reg_set);\n extern void ira_print_expanded_allocno (ira_allocno_t);\n extern void ira_add_live_range_to_object (ira_object_t, int, int);\n extern live_range_t ira_create_live_range (ira_object_t, int, int,"}]}