{"sha": "7a99defe0dbef55bcbcf2df076a896cc0e7e6658", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2E5OWRlZmUwZGJlZjU1YmNiY2YyZGYwNzZhODk2Y2MwZTdlNjY1OA==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargls@comcast.net", "date": "2008-10-12T09:38:18Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2008-10-12T09:38:18Z"}, "message": "re PR fortran/37792 (ICE in gfc_conv_array_initializer; works with -fno-range-check)\n\n2008-10-12  Steven G. Kargl  <kargls@comcast.net>\n\n\tPR fortran/37792\n\t* fortran/resolve.c (resolve_fl_variable): Simplify the\n\tinitializer if there is one.\n\n2008-10-12  Steven G. Kargl  <kargls@comcast.net>\n\n\tPR fortran/37792\n\t* gfortran.dg/arithmetic_overflow_1.f90: New test.\n\nFrom-SVN: r141072", "tree": {"sha": "e8a19ce422ac67088aac5040060854ec59a70454", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e8a19ce422ac67088aac5040060854ec59a70454"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7a99defe0dbef55bcbcf2df076a896cc0e7e6658", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a99defe0dbef55bcbcf2df076a896cc0e7e6658", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a99defe0dbef55bcbcf2df076a896cc0e7e6658", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a99defe0dbef55bcbcf2df076a896cc0e7e6658/comments", "author": null, "committer": null, "parents": [{"sha": "35fced0142d6f22855aeee5129dfe381e9409d62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35fced0142d6f22855aeee5129dfe381e9409d62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35fced0142d6f22855aeee5129dfe381e9409d62"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "3d8b8265ea40f4e23f85850168f45b69624c7a83", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a99defe0dbef55bcbcf2df076a896cc0e7e6658/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a99defe0dbef55bcbcf2df076a896cc0e7e6658/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=7a99defe0dbef55bcbcf2df076a896cc0e7e6658", "patch": "@@ -1,3 +1,9 @@\n+2008-10-12  Steven G. Kargl  <kargls@comcast.net>\n+\n+\tPR fortran/37792\n+\t* fortran/resolve.c (resolve_fl_variable): Simplify the\n+\tinitializer if there is one.\n+\n 2008-10-11  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/37794"}, {"sha": "70d3ad5df99862e625a88fdebf636ffe47a53428", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a99defe0dbef55bcbcf2df076a896cc0e7e6658/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a99defe0dbef55bcbcf2df076a896cc0e7e6658/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=7a99defe0dbef55bcbcf2df076a896cc0e7e6658", "patch": "@@ -7525,6 +7525,10 @@ resolve_fl_variable (gfc_symbol *sym, int mp_flag)\n \t}\n     }\n \n+  /* Ensure that any initializer is simplified.  */\n+  if (sym->value)\n+    gfc_simplify_expr (sym->value, 1);\n+\n   /* Reject illegal initializers.  */\n   if (!sym->mark && sym->value)\n     {"}, {"sha": "92b1f53b6fcef5e92c29a59da7b914b83c9bcad0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a99defe0dbef55bcbcf2df076a896cc0e7e6658/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a99defe0dbef55bcbcf2df076a896cc0e7e6658/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7a99defe0dbef55bcbcf2df076a896cc0e7e6658", "patch": "@@ -1,3 +1,8 @@\n+2008-10-12  Steven G. Kargl  <kargls@comcast.net>\n+\n+\tPR fortran/37792\n+\t* gfortran.dg/arithmetic_overflow_1.f90: New test.\n+\n 2008-10-11  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/loop_optimization5.adb: New test."}, {"sha": "b19844f93fdea709d1e44cb4e91f3e4e803b6f78", "filename": "gcc/testsuite/gfortran.dg/arithmetic_overflow_1.f90", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a99defe0dbef55bcbcf2df076a896cc0e7e6658/gcc%2Ftestsuite%2Fgfortran.dg%2Farithmetic_overflow_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a99defe0dbef55bcbcf2df076a896cc0e7e6658/gcc%2Ftestsuite%2Fgfortran.dg%2Farithmetic_overflow_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Farithmetic_overflow_1.f90?ref=7a99defe0dbef55bcbcf2df076a896cc0e7e6658", "patch": "@@ -0,0 +1,10 @@\n+! { dg-do compile }\n+! Fixes PR37787 where the arithmetic overflow was not detected and an ICE ensued.\n+!\n+! Contributed by Tobias Burnus <burnus@gcc.gnu.org>\n+!\n+program bug\n+  implicit none\n+   integer(1) :: a(2) = (/ Z'FF', Z'FF' /) ! { dg-error \"Arithmetic overflow\" }\n+   print*, a\n+end program bug"}]}