{"sha": "fdf84417b930dec65dbabe735ca984080079af6e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmRmODQ0MTdiOTMwZGVjNjVkYmFiZTczNWNhOTg0MDgwMDc5YWY2ZQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2005-10-01T08:42:33Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-10-01T08:42:33Z"}, "message": "gcc_release (build_sources): If trying to apply a tag that already exists, issue an error message and exit.\n\n\t* gcc_release (build_sources): If trying to apply a tag that\n\talready exists, issue an error message and exit.\n\nFrom-SVN: r104854", "tree": {"sha": "557379fa258c8654fc3d84bab363f4e03b5559ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/557379fa258c8654fc3d84bab363f4e03b5559ca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fdf84417b930dec65dbabe735ca984080079af6e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdf84417b930dec65dbabe735ca984080079af6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fdf84417b930dec65dbabe735ca984080079af6e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdf84417b930dec65dbabe735ca984080079af6e/comments", "author": null, "committer": null, "parents": [{"sha": "cc6312c1e8cc9254859557e613fccc447cea45e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc6312c1e8cc9254859557e613fccc447cea45e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc6312c1e8cc9254859557e613fccc447cea45e6"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "968e14a68ea99ea5362265638fc37778098be42c", "filename": "maintainer-scripts/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdf84417b930dec65dbabe735ca984080079af6e/maintainer-scripts%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdf84417b930dec65dbabe735ca984080079af6e/maintainer-scripts%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2FChangeLog?ref=fdf84417b930dec65dbabe735ca984080079af6e", "patch": "@@ -1,3 +1,8 @@\n+2005-10-01  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* gcc_release (build_sources): If trying to apply a tag that\n+\talready exists, issue an error message and exit.\n+\n 2005-09-30  Joseph S. Myers  <joseph@codesourcery.com>\n \n \tPR other/23693"}, {"sha": "6458ce1b24ecb0a212ce3b542c49048b778f011b", "filename": "maintainer-scripts/gcc_release", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdf84417b930dec65dbabe735ca984080079af6e/maintainer-scripts%2Fgcc_release", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdf84417b930dec65dbabe735ca984080079af6e/maintainer-scripts%2Fgcc_release", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fgcc_release?ref=fdf84417b930dec65dbabe735ca984080079af6e", "patch": "@@ -170,12 +170,19 @@ EOF\n   EXPORTDATE=\"\"\n   if [ -n \"${TAG}\" ]; then\n     inform \"Tagging sources as ${TAG}\"\n-    # The -F option to CVS is intentionally not used below.  If you\n-    # need to retry a release, you will have to manually remove any\n-    # existing tag.\n+    EXPORTTAG=\"-r${TAG}\"\n+    # Try to check out a file using ${TAG}.  If the command succeeds,\n+    # then the sources have already been tagged.  We don't want to \n+    # overwrite an existing tag, so we don't want to use the \"-F\"\n+    # option to \"cvs rtag\" below.  So, if the tag already exists,\n+    # issue an error message; the release manager can manually remove\n+    # the tag if appropriate.\n+    if ${CVS} export -d \"`basename ${SOURCE_DIRECTORY}`\" \\\n+      \"${EXPORTTAG}\" gcc/ChangeLog; then\n+      error \"Tag ${TAG} already exists\"\n+    fi\n     ${CVS} rtag -r ${CVSBRANCH} ${TAG} gcc || \\\n       error \"Could not tag sources\"\n-    EXPORTTAG=\"-r${TAG}\"\n   else\n     if [ ${CVSBRANCH} != \"HEAD\" ]; then\n       EXPORTTAG=\"-r${CVSBRANCH}\""}]}