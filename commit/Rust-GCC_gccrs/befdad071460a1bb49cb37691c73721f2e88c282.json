{"sha": "befdad071460a1bb49cb37691c73721f2e88c282", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmVmZGFkMDcxNDYwYTFiYjQ5Y2IzNzY5MWM3MzcyMWYyZTg4YzI4Mg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2007-02-15T20:51:29Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2007-02-15T20:51:29Z"}, "message": "expr.c (expand_expr_real_1): If a temporary is made and the reference doesn't use the alias set of its type...\n\n\t* expr.c (expand_expr_real_1) <normal_inner_ref>: If a temporary\n\tis made and the reference doesn't use the alias set of its type,\n\tdo not create the temporary using that type.\n\nFrom-SVN: r122014", "tree": {"sha": "92fca5300e88aba9f3665cce220913e0eff12c52", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/92fca5300e88aba9f3665cce220913e0eff12c52"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/befdad071460a1bb49cb37691c73721f2e88c282", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/befdad071460a1bb49cb37691c73721f2e88c282", "html_url": "https://github.com/Rust-GCC/gccrs/commit/befdad071460a1bb49cb37691c73721f2e88c282", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/befdad071460a1bb49cb37691c73721f2e88c282/comments", "author": null, "committer": null, "parents": [{"sha": "eab79d78e7b90cd54fd93260e5c7b9816a8dd251", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eab79d78e7b90cd54fd93260e5c7b9816a8dd251", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eab79d78e7b90cd54fd93260e5c7b9816a8dd251"}], "stats": {"total": 21, "additions": 18, "deletions": 3}, "files": [{"sha": "9ad61e22128e5b60eb2dd696826d4a4863dbf0cf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/befdad071460a1bb49cb37691c73721f2e88c282/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/befdad071460a1bb49cb37691c73721f2e88c282/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=befdad071460a1bb49cb37691c73721f2e88c282", "patch": "@@ -1,3 +1,9 @@\n+2007-02-15  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* expr.c (expand_expr_real_1) <normal_inner_ref>: If a temporary\n+\tis made and the reference doesn't use the alias set of its type,\n+\tdo not create the temporary using that type.\n+\n 2007-02-15  Aldy Hernandez  <aldyh@redhat.com>\n \n \t* jump.c: Remove prototypes for delete_computation and"}, {"sha": "42cb253e72e1cc56d1e9767079a1790c1a11edbd", "filename": "gcc/expr.c", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/befdad071460a1bb49cb37691c73721f2e88c282/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/befdad071460a1bb49cb37691c73721f2e88c282/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=befdad071460a1bb49cb37691c73721f2e88c282", "patch": "@@ -7711,9 +7711,18 @@ expand_expr_real_1 (tree exp, rtx target, enum machine_mode tmode,\n \t       necessarily be constant.  */\n \t    if (mode == BLKmode)\n \t      {\n-\t\trtx new\n-\t\t  = assign_stack_temp_for_type\n-\t\t    (ext_mode, GET_MODE_BITSIZE (ext_mode), 0, type);\n+\t\tHOST_WIDE_INT size = GET_MODE_BITSIZE (ext_mode);\n+\t\trtx new;\n+\n+\t\t/* If the reference doesn't use the alias set of its type,\n+\t\t   we cannot create the temporary using that type.  */\n+\t\tif (component_uses_parent_alias_set (exp))\n+\t\t  {\n+\t\t    new = assign_stack_local (ext_mode, size, 0);\n+\t\t    set_mem_alias_set (new, get_alias_set (exp));\n+\t\t  }\n+\t\telse\n+\t\t  new = assign_stack_temp_for_type (ext_mode, size, 0, type);\n \n \t\temit_move_insn (new, op0);\n \t\top0 = copy_rtx (new);"}]}