{"sha": "77ec8b8c0f75a5f0b953e5dd6696e6b07253f21b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdlYzhiOGMwZjc1YTVmMGI5NTNlNWRkNjY5NmU2YjA3MjUzZjIxYg==", "commit": {"author": {"name": "Aditya Kumar", "email": "aditya.k7@samsung.com", "date": "2015-10-21T18:53:35Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2015-10-21T18:53:35Z"}, "message": "avoid generation of empty guards in trivial cases\n\nWe used to insert a trivial integer_onep condition around loops we know have\nmore than an iteration.  This patch avoids generating those conditions.\n\n\t* graphite-isl-ast-to-gimple.c (graphite_create_new_loop_guard): Do not call\n\tcreate_empty_if_region_on_edge when cond_expr is true.\n\t(translate_isl_ast_node_for): Check whether a guard has been generated.\n\nCo-Authored-By: Sebastian Pop <s.pop@samsung.com>\n\nFrom-SVN: r229137", "tree": {"sha": "e9fe19bfcb75c2f7c755a5ac577e0861c0c15e1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9fe19bfcb75c2f7c755a5ac577e0861c0c15e1c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77ec8b8c0f75a5f0b953e5dd6696e6b07253f21b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77ec8b8c0f75a5f0b953e5dd6696e6b07253f21b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77ec8b8c0f75a5f0b953e5dd6696e6b07253f21b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77ec8b8c0f75a5f0b953e5dd6696e6b07253f21b/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "caf5b4dfca050e8e93b1ee15705ab9c759854f40", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/caf5b4dfca050e8e93b1ee15705ab9c759854f40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/caf5b4dfca050e8e93b1ee15705ab9c759854f40"}], "stats": {"total": 22, "additions": 18, "deletions": 4}, "files": [{"sha": "1bad16db4b1c987c36167d58144faee31ae35ac0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77ec8b8c0f75a5f0b953e5dd6696e6b07253f21b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77ec8b8c0f75a5f0b953e5dd6696e6b07253f21b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=77ec8b8c0f75a5f0b953e5dd6696e6b07253f21b", "patch": "@@ -1,3 +1,10 @@\n+2015-10-21  Aditya Kumar  <aditya.k7@samsung.com>\n+\t    Sebastian Pop  <s.pop@samsung.com>\n+\n+\t* graphite-isl-ast-to-gimple.c (graphite_create_new_loop_guard): Do not call\n+\tcreate_empty_if_region_on_edge when cond_expr is true.\n+\t(translate_isl_ast_node_for): Check whether a guard has been generated.\n+\n 2015-10-21  Aditya Kumar  <aditya.k7@samsung.com>\n \n \t* graphite-poly.h (struct dr_info): Added invalid_alias_set number."}, {"sha": "de2847743e15d724f51aa1b450b20d288ed8143f", "filename": "gcc/graphite-isl-ast-to-gimple.c", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77ec8b8c0f75a5f0b953e5dd6696e6b07253f21b/gcc%2Fgraphite-isl-ast-to-gimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77ec8b8c0f75a5f0b953e5dd6696e6b07253f21b/gcc%2Fgraphite-isl-ast-to-gimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-isl-ast-to-gimple.c?ref=77ec8b8c0f75a5f0b953e5dd6696e6b07253f21b", "patch": "@@ -707,7 +707,10 @@ graphite_create_new_loop_guard (edge entry_edge,\n       cond_expr = fold_build2 (LT_EXPR, boolean_type_node, *lb, ub_one);\n     }\n \n-  exit_edge = create_empty_if_region_on_edge (entry_edge, cond_expr);\n+  if (integer_onep (cond_expr))\n+    exit_edge = entry_edge;\n+  else\n+    exit_edge = create_empty_if_region_on_edge (entry_edge, cond_expr);\n \n   return exit_edge;\n }\n@@ -723,10 +726,14 @@ translate_isl_ast_node_for (loop_p context_loop, __isl_keep isl_ast_node *node,\n   tree type, lb, ub;\n   edge last_e = graphite_create_new_loop_guard (next_e, node, &type,\n \t\t\t\t\t\t&lb, &ub, ip);\n-  edge true_e = get_true_edge_from_guard_bb (next_e->dest);\n \n-  translate_isl_ast_for_loop (context_loop, node, true_e,\n-\t\t\t      type, lb, ub, ip);\n+  if (last_e == next_e)\n+    /* There was no guard generated.  */\n+    return translate_isl_ast_for_loop (context_loop, node, last_e,\n+\t\t\t\t       type, lb, ub, ip);\n+\n+  edge true_e = get_true_edge_from_guard_bb (next_e->dest);\n+  translate_isl_ast_for_loop (context_loop, node, true_e, type, lb, ub, ip);\n   return last_e;\n }\n "}]}