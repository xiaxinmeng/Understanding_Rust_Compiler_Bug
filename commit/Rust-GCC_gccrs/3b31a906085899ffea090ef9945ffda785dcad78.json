{"sha": "3b31a906085899ffea090ef9945ffda785dcad78", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2IzMWE5MDYwODU4OTlmZmVhMDkwZWY5OTQ1ZmZkYTc4NWRjYWQ3OA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-12-11T23:04:39Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-12-11T23:04:39Z"}, "message": "re PR ada/88429 (libada build fails with --disable-shared)\n\nlibada/\n\tPR ada/88429\n\t* configure.ac (default_gnatlib_target): Set to gnatlib instead of\n\tgnatlib-plain if --disable-shared.\n\t* configure: Regenerate.\n\t* Makefile.in (all): Replace gnatlib prerequisite with libada.\n\t(ADA_RTS_SUBDIR): Delete.\n\t(libada): New target, renamed from...\n\t(gnatlib): ...this.  Merge with other library targets.\n\t(gnatlib-plain): Delete.\n\t(install-gnatlib): Rename to...\n\t(install-libada): ...this.\n\t(install): Replace install-gnatlib prerequisite with install-libada.\ngcc/ada/\n\tPR ada/88429\n\t* gcc-interface/Makefile.in (./stamp-gnatlib1-$(RTSDIR)): Also pass\n\tMULTISUBDIR to sub-make and add quotes around $(THREAD_KIND).\n\t(gnatlib-shared-dual): Also pass PICFLAG_FOR_TARGET to sub-make.\n\t(gnatlib-sjlj): Also pass MULTISUBDIR to sub-make, but do not pass\n\tPICFLAG_FOR_TARGET.\n\t(gnatlib-zcx): Likewise.\n\nFrom-SVN: r267034", "tree": {"sha": "999a51362e3680534f9080d66c4c7db477a7f213", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/999a51362e3680534f9080d66c4c7db477a7f213"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b31a906085899ffea090ef9945ffda785dcad78", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b31a906085899ffea090ef9945ffda785dcad78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b31a906085899ffea090ef9945ffda785dcad78", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b31a906085899ffea090ef9945ffda785dcad78/comments", "author": null, "committer": null, "parents": [{"sha": "be68937be28ad63bd6f7a75d0fa5c851ba4afc2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be68937be28ad63bd6f7a75d0fa5c851ba4afc2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be68937be28ad63bd6f7a75d0fa5c851ba4afc2b"}], "stats": {"total": 80, "additions": 51, "deletions": 29}, "files": [{"sha": "566f560667f1b8ec65553533b6258b70bf172fb0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b31a906085899ffea090ef9945ffda785dcad78/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b31a906085899ffea090ef9945ffda785dcad78/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3b31a906085899ffea090ef9945ffda785dcad78", "patch": "@@ -10,7 +10,7 @@\n \terror when stack pointer is clobbered.\n \t(expand_asm_stmt): Refactor clobber check in separate function.\n \n-2018-12-11  Eric Botcazou  <botcazou@adacore.com>\n+2018-12-11  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* config/rs6000/vxworks.h (RS6000_STARTING_FRAME_OFFSET): Define,\n \taccounting for STACK_BOUNDARY 128."}, {"sha": "f04a052adec574dc10b10615969fc5e2980af441", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b31a906085899ffea090ef9945ffda785dcad78/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b31a906085899ffea090ef9945ffda785dcad78/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=3b31a906085899ffea090ef9945ffda785dcad78", "patch": "@@ -1,7 +1,16 @@\n+2018-12-11  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR ada/88429\n+\t* gcc-interface/Makefile.in (./stamp-gnatlib1-$(RTSDIR)): Also pass\n+\tMULTISUBDIR to sub-make and add quotes around $(THREAD_KIND).\n+\t(gnatlib-shared-dual): Also pass PICFLAG_FOR_TARGET to sub-make.\n+\t(gnatlib-sjlj): Also pass MULTISUBDIR to sub-make, but do not pass\n+\tPICFLAG_FOR_TARGET.\n+\t(gnatlib-zcx): Likewise.\n+\n 2018-12-11  Piotr Trojanek  <trojanek@adacore.com>\n \n-\t* libgnat/a-calend.ads: Add \"Global => null\" contracts to pure\n-\troutines.\n+\t* libgnat/a-calend.ads: Add \"Global => null\" contract to pure routines.\n \n 2018-12-11  Hristian Kirtchev  <kirtchev@adacore.com>\n "}, {"sha": "4e74252bd7405e10b04cb2fcf4b8893964754023", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 15, "deletions": 8, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b31a906085899ffea090ef9945ffda785dcad78/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b31a906085899ffea090ef9945ffda785dcad78/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=3b31a906085899ffea090ef9945ffda785dcad78", "patch": "@@ -1,5 +1,5 @@\n # Makefile for GNU Ada Compiler (GNAT).\n-#   Copyright (C) 1994-2017 Free Software Foundation, Inc.\n+#   Copyright (C) 1994-2018 Free Software Foundation, Inc.\n \n #This file is part of GCC.\n \n@@ -564,7 +564,7 @@ install-gnatlib: ../stamp-gnatlib-$(RTSDIR) install-gcc-specs\n \t$(RM) ../stamp-gnatlib-$(RTSDIR)\n \n ../stamp-gnatlib1-$(RTSDIR): Makefile ../stamp-gnatlib2-$(RTSDIR)\n-\t$(MAKE) THREAD_KIND=$(THREAD_KIND) setup-rts\n+\t$(MAKE) MULTISUBDIR=\"$(MULTISUBDIR)\" THREAD_KIND=\"$(THREAD_KIND)\" setup-rts\n # Copy tsystem.h\n \t$(CP) $(srcdir)/tsystem.h $(RTSDIR)\n \t$(RM) ../stamp-gnatlib-$(RTSDIR)\n@@ -688,6 +688,7 @@ gnatlib-shared-dual:\n              GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\\n \t     GNATLIBCFLAGS=\"$(GNATLIBCFLAGS)\" \\\n \t     GNATLIBCFLAGS_FOR_C=\"$(GNATLIBCFLAGS_FOR_C)\" \\\n+\t     PICFLAG_FOR_TARGET=\"$(PICFLAG_FOR_TARGET)\" \\\n \t     MULTISUBDIR=\"$(MULTISUBDIR)\" \\\n \t     THREAD_KIND=\"$(THREAD_KIND)\" \\\n              gnatlib-shared-default\n@@ -804,8 +805,11 @@ gnatlib-shared:\n # commenting the pragma instead of deleting the line, as the latter might\n # result in getting multiple blank lines, hence possible style check errors.\n gnatlib-sjlj:\n-\t$(MAKE) $(FLAGS_TO_PASS) EH_MECHANISM=\"\" \\\n-\tTHREAD_KIND=\"$(THREAD_KIND)\" ../stamp-gnatlib1-$(RTSDIR)\n+\t$(MAKE) $(FLAGS_TO_PASS) \\\n+\t     EH_MECHANISM=\"\" \\\n+\t     MULTISUBDIR=\"$(MULTISUBDIR)\" \\\n+\t     THREAD_KIND=\"$(THREAD_KIND)\" \\\n+\t     ../stamp-gnatlib1-$(RTSDIR)\n \tsed \\\n \t  -e 's/Frontend_Exceptions.*/Frontend_Exceptions       : constant Boolean := True;/' \\\n \t  -e 's/ZCX_By_Default.*/ZCX_By_Default            : constant Boolean := False;/' \\\n@@ -819,11 +823,14 @@ gnatlib-sjlj:\n \t     FORCE_DEBUG_ADAFLAGS=\"$(FORCE_DEBUG_ADAFLAGS)\" \\\n \t     MULTISUBDIR=\"$(MULTISUBDIR)\" \\\n \t     THREAD_KIND=\"$(THREAD_KIND)\" \\\n-\t     PICFLAG_FOR_TARGET=\"$(PICFLAG_FOR_TARGET)\" gnatlib\n+\t     gnatlib\n \n gnatlib-zcx:\n-\t$(MAKE) $(FLAGS_TO_PASS) EH_MECHANISM=\"-gcc\" \\\n-\t  THREAD_KIND=\"$(THREAD_KIND)\" ../stamp-gnatlib1-$(RTSDIR)\n+\t$(MAKE) $(FLAGS_TO_PASS) \\\n+\t     EH_MECHANISM=\"-gcc\" \\\n+\t     MULTISUBDIR=\"$(MULTISUBDIR)\" \\\n+\t     THREAD_KIND=\"$(THREAD_KIND)\" \\\n+\t     ../stamp-gnatlib1-$(RTSDIR)\n \tsed \\\n \t  -e 's/Frontend_Exceptions.*/Frontend_Exceptions       : constant Boolean := False;/' \\\n \t  -e 's/ZCX_By_Default.*/ZCX_By_Default            : constant Boolean := True;/' \\\n@@ -837,7 +844,7 @@ gnatlib-zcx:\n \t     FORCE_DEBUG_ADAFLAGS=\"$(FORCE_DEBUG_ADAFLAGS)\" \\\n \t     MULTISUBDIR=\"$(MULTISUBDIR)\" \\\n \t     THREAD_KIND=\"$(THREAD_KIND)\" \\\n-\t     PICFLAG_FOR_TARGET=\"$(PICFLAG_FOR_TARGET)\" gnatlib\n+\t     gnatlib\n \n # Compiling object files from source files.\n "}, {"sha": "e6f186c47d4eaa47fd248b0efc9b8582888ca7b0", "filename": "libada/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b31a906085899ffea090ef9945ffda785dcad78/libada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b31a906085899ffea090ef9945ffda785dcad78/libada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FChangeLog?ref=3b31a906085899ffea090ef9945ffda785dcad78", "patch": "@@ -1,3 +1,18 @@\n+2018-12-11  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR ada/88429\n+\t* configure.ac (default_gnatlib_target): Set to gnatlib instead of\n+\tgnatlib-plain if --disable-shared.\n+\t* configure: Regenerate.\n+\t* Makefile.in (all): Replace gnatlib prerequisite with libada.\n+\t(ADA_RTS_SUBDIR): Delete.\n+\t(libada): New target, renamed from...\n+\t(gnatlib): ...this.  Merge with other library targets.\n+\t(gnatlib-plain): Delete.\n+\t(install-gnatlib): Rename to...\n+\t(install-libada): ...this.\n+\t(install): Replace install-gnatlib prerequisite with install-libada.\n+\n 2018-10-31  Joseph Myers  <joseph@codesourcery.com>\n \n \tPR bootstrap/82856"}, {"sha": "aa6c3273c343392889dcfab94298de8d3046367e", "filename": "libada/Makefile.in", "status": "modified", "additions": 7, "deletions": 16, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b31a906085899ffea090ef9945ffda785dcad78/libada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b31a906085899ffea090ef9945ffda785dcad78/libada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FMakefile.in?ref=3b31a906085899ffea090ef9945ffda785dcad78", "patch": "@@ -16,7 +16,7 @@\n # <http://www.gnu.org/licenses/>.\n \n # Default target; must be first.\n-all: gnatlib\n+all: libada\n \t$(MULTIDO) $(AM_MAKEFLAGS) DO=all multi-do # $(MAKE)\n \n .PHONY: all\n@@ -70,7 +70,6 @@ target_noncanonical:=@target_noncanonical@\n version := $(shell @get_gcc_base_ver@ $(srcdir)/../gcc/BASE-VER)\n libsubdir := $(libdir)/gcc/$(target_noncanonical)/$(version)$(MULTISUBDIR)\n ADA_RTS_DIR=$(GCC_DIR)/ada/rts$(subst /,_,$(MULTISUBDIR))\n-ADA_RTS_SUBDIR=./rts$(subst /,_,$(MULTISUBDIR))\n \n # exeext should not be used because it's the *host* exeext.  We're building\n # a *target* library, aren't we?!?  Likewise for CC.  Still, provide bogus\n@@ -96,20 +95,12 @@ LIBADA_FLAGS_TO_PASS = \\\n \t\"GCC_FOR_TARGET=$(CC)\" \\\n         \"CFLAGS=$(CFLAGS)\"\n \n-# Rules to build gnatlib.\n-.PHONY: gnatlib gnatlib-plain gnatlib-sjlj gnatlib-zcx gnatlib-shared osconstool\n-gnatlib: @default_gnatlib_target@\n+.PHONY: libada gnatlib gnatlib-shared gnatlib-sjlj gnatlib-zcx osconstool\n \n-gnatlib-plain: osconstool $(GCC_DIR)/ada/Makefile\n-\ttest -f stamp-libada || \\\n-\t$(MAKE) -C $(GCC_DIR)/ada $(LIBADA_FLAGS_TO_PASS) gnatlib \\\n-\t&& touch stamp-libada\n-\t-rm -rf adainclude\n-\t-rm -rf adalib\n-\t$(LN_S_RECURSIVE) $(ADA_RTS_DIR) adainclude\n-\t$(LN_S_RECURSIVE) $(ADA_RTS_DIR) adalib\n+# Rules to build and install libada.\n+libada: @default_gnatlib_target@\n \n-gnatlib-sjlj gnatlib-zcx gnatlib-shared: osconstool $(GCC_DIR)/ada/Makefile\n+gnatlib gnatlib-shared gnatlib-sjlj gnatlib-zcx: osconstool $(GCC_DIR)/ada/Makefile\n \ttest -f stamp-libada || \\\n \t$(MAKE) -C $(GCC_DIR)/ada $(LIBADA_FLAGS_TO_PASS) $@ \\\n \t&& touch stamp-libada\n@@ -121,7 +112,7 @@ gnatlib-sjlj gnatlib-zcx gnatlib-shared: osconstool $(GCC_DIR)/ada/Makefile\n osconstool:\n \t$(MAKE) -C $(GCC_DIR)/ada $(LIBADA_FLAGS_TO_PASS) ./bldtools/oscons/xoscons\n \n-install-gnatlib: $(GCC_DIR)/ada/Makefile\n+install-libada: $(GCC_DIR)/ada/Makefile\n \t$(MAKE) -C $(GCC_DIR)/ada $(LIBADA_FLAGS_TO_PASS) install-gnatlib\n \n # Check uninstalled version.\n@@ -148,7 +139,7 @@ TAGS:\n .PHONY: check installcheck info dvi pdf html\n \n # Installation rules.\n-install: install-gnatlib\n+install: install-libada\n \t$(MULTIDO) $(AM_MAKEFLAGS) DO=install multi-do # $(MAKE)\n \n install-strip: install"}, {"sha": "743f98afd8eb96a4bef1779236f61b6f82a3d20f", "filename": "libada/configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b31a906085899ffea090ef9945ffda785dcad78/libada%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b31a906085899ffea090ef9945ffda785dcad78/libada%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2Fconfigure?ref=3b31a906085899ffea090ef9945ffda785dcad78", "patch": "@@ -3264,7 +3264,7 @@ fi\n if test ${enable_shared} = yes; then\n   default_gnatlib_target=\"gnatlib-shared\"\n else\n-  default_gnatlib_target=\"gnatlib-plain\"\n+  default_gnatlib_target=\"gnatlib\"\n fi\n \n "}, {"sha": "6c0bb8bed1052f9a42a0136b8c33e95d0afb4fc1", "filename": "libada/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b31a906085899ffea090ef9945ffda785dcad78/libada%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b31a906085899ffea090ef9945ffda785dcad78/libada%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2Fconfigure.ac?ref=3b31a906085899ffea090ef9945ffda785dcad78", "patch": "@@ -129,7 +129,7 @@ AC_PROG_LN_S\n if test ${enable_shared} = yes; then\n   default_gnatlib_target=\"gnatlib-shared\"\n else\n-  default_gnatlib_target=\"gnatlib-plain\"\n+  default_gnatlib_target=\"gnatlib\"\n fi\n AC_SUBST([default_gnatlib_target])\n "}]}