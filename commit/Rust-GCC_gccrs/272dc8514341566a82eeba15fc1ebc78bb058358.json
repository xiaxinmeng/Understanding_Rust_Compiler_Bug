{"sha": "272dc8514341566a82eeba15fc1ebc78bb058358", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjcyZGM4NTE0MzQxNTY2YTgyZWViYTE1ZmMxZWJjNzhiYjA1ODM1OA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2010-12-15T17:35:04Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2010-12-15T17:35:04Z"}, "message": "re PR c++/42083 ([C++0x] ICE on invalid with \"tree check: expected aggr_init_expr, have error_mark in build_value_init\")\n\n/cp\n2010-12-15  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/42083\n\t* init.c (build_value_init): Check build_special_member_call return\n\tvalue for error_mark_node.\n\n/testsuite\n2010-12-15  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/42083\n\t* g++.dg/cpp0x/lambda/lambda-ice2.C: New.\n\nFrom-SVN: r167862", "tree": {"sha": "dbc26356c5a8f07d6802127f4c6e4b322b817203", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dbc26356c5a8f07d6802127f4c6e4b322b817203"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/272dc8514341566a82eeba15fc1ebc78bb058358", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/272dc8514341566a82eeba15fc1ebc78bb058358", "html_url": "https://github.com/Rust-GCC/gccrs/commit/272dc8514341566a82eeba15fc1ebc78bb058358", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/272dc8514341566a82eeba15fc1ebc78bb058358/comments", "author": null, "committer": null, "parents": [{"sha": "da17cbb79b755dbc2beaa109450535bddd600481", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da17cbb79b755dbc2beaa109450535bddd600481", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da17cbb79b755dbc2beaa109450535bddd600481"}], "stats": {"total": 35, "additions": 32, "deletions": 3}, "files": [{"sha": "6dd121a91d6ab6a2670e0781de66b452aca2f702", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/272dc8514341566a82eeba15fc1ebc78bb058358/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/272dc8514341566a82eeba15fc1ebc78bb058358/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=272dc8514341566a82eeba15fc1ebc78bb058358", "patch": "@@ -1,3 +1,9 @@\n+2010-12-15  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/42083\n+\t* init.c (build_value_init): Check build_special_member_call return\n+\tvalue for error_mark_node.\n+\n 2010-12-14  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/46930"}, {"sha": "9c3dd327fb6c090279818fa0a390e886f400e060", "filename": "gcc/cp/init.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/272dc8514341566a82eeba15fc1ebc78bb058358/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/272dc8514341566a82eeba15fc1ebc78bb058358/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=272dc8514341566a82eeba15fc1ebc78bb058358", "patch": "@@ -314,9 +314,11 @@ build_value_init (tree type, tsubst_flags_t complain)\n \t  tree ctor = build_special_member_call\n \t    (NULL_TREE, complete_ctor_identifier,\n \t     NULL, type, LOOKUP_NORMAL, complain);\n-\n-\t  ctor = build_aggr_init_expr (type, ctor);\n-\t  AGGR_INIT_ZERO_FIRST (ctor) = 1;\n+\t  if (ctor != error_mark_node)\n+\t    {\n+\t      ctor = build_aggr_init_expr (type, ctor);\n+\t      AGGR_INIT_ZERO_FIRST (ctor) = 1;\n+\t    }\n \t  return ctor;\n \t}\n     }"}, {"sha": "1d865c6dd91d18ca2eaa4c1066ccb69c6f229d22", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/272dc8514341566a82eeba15fc1ebc78bb058358/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/272dc8514341566a82eeba15fc1ebc78bb058358/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=272dc8514341566a82eeba15fc1ebc78bb058358", "patch": "@@ -1,3 +1,8 @@\n+2010-12-15  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/42083\n+\t* g++.dg/cpp0x/lambda/lambda-ice2.C: New.\n+\n 2010-12-15  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* gfortran.dg/debug/pr46756.f: Correct PR number."}, {"sha": "352137aad241907bbe4575ba78c1f8b421856919", "filename": "gcc/testsuite/g++.dg/cpp0x/lambda/lambda-ice2.C", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/272dc8514341566a82eeba15fc1ebc78bb058358/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/272dc8514341566a82eeba15fc1ebc78bb058358/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice2.C?ref=272dc8514341566a82eeba15fc1ebc78bb058358", "patch": "@@ -0,0 +1,16 @@\n+// PR c++/42083\n+// { dg-options \"-std=c++0x\" }\n+\n+template<typename F>\n+decltype(F()) run(F f) // { dg-message \"note\" }\n+{\n+  return f();\n+}\n+\n+int main()\n+{\n+  auto l = []() { return 5; };\n+\n+  run(l); // { dg-error \"no match\" }\n+  // { dg-message \"candidate\" \"candidate note\" { target *-*-* } 14 }\n+}"}]}