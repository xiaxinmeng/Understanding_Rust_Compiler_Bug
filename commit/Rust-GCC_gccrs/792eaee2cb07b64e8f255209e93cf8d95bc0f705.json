{"sha": "792eaee2cb07b64e8f255209e93cf8d95bc0f705", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzkyZWFlZTJjYjA3YjY0ZThmMjU1MjA5ZTkzY2Y4ZDk1YmMwZjcwNQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2007-02-06T01:35:10Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2007-02-06T01:35:10Z"}, "message": "re PR debug/30189 (ICE on modified_type_die)\n\ngcc/ChangeLog:\nPR debug/30189\n* dwarf2out.c (modified_type_die): Follow DECL_ORIGINAL_TYPE\neven if cv-qualification is the same.\ngcc/testsuite/ChangeLog:\nPR debug/30189\n* gcc.dg/pr30189.c: New test.\n\nFrom-SVN: r121638", "tree": {"sha": "d183f0b9e7eb1fc5592761718d4cc3a1467dce6f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d183f0b9e7eb1fc5592761718d4cc3a1467dce6f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/792eaee2cb07b64e8f255209e93cf8d95bc0f705", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/792eaee2cb07b64e8f255209e93cf8d95bc0f705", "html_url": "https://github.com/Rust-GCC/gccrs/commit/792eaee2cb07b64e8f255209e93cf8d95bc0f705", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/792eaee2cb07b64e8f255209e93cf8d95bc0f705/comments", "author": null, "committer": null, "parents": [{"sha": "613698c025d047e99d9666c37da2f49b97a8c803", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/613698c025d047e99d9666c37da2f49b97a8c803", "html_url": "https://github.com/Rust-GCC/gccrs/commit/613698c025d047e99d9666c37da2f49b97a8c803"}], "stats": {"total": 37, "additions": 34, "deletions": 3}, "files": [{"sha": "01aa9dc59c117731801b6d38ade51a2e320eefdf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/792eaee2cb07b64e8f255209e93cf8d95bc0f705/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/792eaee2cb07b64e8f255209e93cf8d95bc0f705/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=792eaee2cb07b64e8f255209e93cf8d95bc0f705", "patch": "@@ -1,3 +1,9 @@\n+2007-02-05  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR debug/30189\n+\t* dwarf2out.c (modified_type_die): Follow DECL_ORIGINAL_TYPE\n+\teven if cv-qualification is the same.\n+\n 2007-02-05  Geoffrey Keating  <geoffk@apple.com>\n \n \t* config/rs6000/darwin-tramp.asm (__trampoline_setup): Call"}, {"sha": "d529d8c879def4425df1094e5a5ab2f27b34e79c", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/792eaee2cb07b64e8f255209e93cf8d95bc0f705/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/792eaee2cb07b64e8f255209e93cf8d95bc0f705/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=792eaee2cb07b64e8f255209e93cf8d95bc0f705", "patch": "@@ -8519,9 +8519,11 @@ modified_type_die (tree type, int is_const_type, int is_volatile_type,\n \t  gen_type_die (qualified_type, context_die);\n \t  return lookup_type_die (qualified_type);\n \t}\n-      else if (DECL_ORIGINAL_TYPE (name)\n-\t       && (is_const_type < TYPE_READONLY (dtype)\n-\t\t   || is_volatile_type < TYPE_VOLATILE (dtype)))\n+      else if (is_const_type < TYPE_READONLY (dtype)\n+\t       || is_volatile_type < TYPE_VOLATILE (dtype)\n+\t       || (is_const_type <= TYPE_READONLY (dtype)\n+\t\t   && is_volatile_type <= TYPE_VOLATILE (dtype)\n+\t\t   && DECL_ORIGINAL_TYPE (name) != type))\n \t/* cv-unqualified version of named type.  Just use the unnamed\n \t   type to which it refers.  */\n \treturn modified_type_die (DECL_ORIGINAL_TYPE (name),"}, {"sha": "abfefcc631f602db908e5f02a5ba15838be89d0e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/792eaee2cb07b64e8f255209e93cf8d95bc0f705/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/792eaee2cb07b64e8f255209e93cf8d95bc0f705/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=792eaee2cb07b64e8f255209e93cf8d95bc0f705", "patch": "@@ -1,3 +1,8 @@\n+2007-02-05  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR debug/30189\n+\t* gcc.dg/pr30189.c: New test.\n+\n 2007-02-05      Dwarakanath Rajagopal <dwarak.rajagopal@amd.com>\n \n         * gcc.dg/i386-cpuid.h: Test whether SSE4A is supported"}, {"sha": "6aa963e7a108601215611adca5ece84a2e6e00a7", "filename": "gcc/testsuite/gcc.dg/pr30189.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/792eaee2cb07b64e8f255209e93cf8d95bc0f705/gcc%2Ftestsuite%2Fgcc.dg%2Fpr30189.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/792eaee2cb07b64e8f255209e93cf8d95bc0f705/gcc%2Ftestsuite%2Fgcc.dg%2Fpr30189.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr30189.c?ref=792eaee2cb07b64e8f255209e93cf8d95bc0f705", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-g -O\" } */\n+\n+extern void foo (void);\n+\n+static\n+void baz (int i)\n+{\n+  foo ();\n+  typedef char A[i];\n+  struct { A b; } *x = 0;\n+}\n+\n+void\n+bar (i)\n+{\n+  baz (i);\n+}"}]}