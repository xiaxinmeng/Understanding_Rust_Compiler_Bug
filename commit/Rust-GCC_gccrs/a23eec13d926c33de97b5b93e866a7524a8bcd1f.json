{"sha": "a23eec13d926c33de97b5b93e866a7524a8bcd1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTIzZWVjMTNkOTI2YzMzZGU5N2I1YjkzZTg2NmE3NTI0YThiY2QxZg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargls@comcast.net", "date": "2006-05-03T21:24:11Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2006-05-03T21:24:11Z"}, "message": "re PR fortran/26896 (Description of implementation of -Wtabs/-Wno-tabs reversed)\n\n2006-03-30  Steven G. Kargl  <kargls@comcast.net>\n \n\tPR fortran/26896\n\t* lang.opt: Fix -Wtab description\n\n\tPR fortran/20248 \n\t* lang.opt: New flag -fall-intrinsics.\n\t* invoke.texi:  Document option.\n\t* gfortran.h (options_t):  New member flag_all_intrinsics.\n\t* options.c (gfc_init_options, gfc_handle_option): Set new option.\n\tsort nearby misplaced options.\n\t* intrinsic.c (add_sym, make_generic, make_alias):  Use it.\n \n2006-03-30  Steven G. Kargl  <kargls@comcast.net>\n\n\t* gfortran.dg/iargc.f90:  New test.\n\nFrom-SVN: r113502", "tree": {"sha": "76d5f89de0f22f26d69e8f1e2ee408c4e2363a77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76d5f89de0f22f26d69e8f1e2ee408c4e2363a77"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a23eec13d926c33de97b5b93e866a7524a8bcd1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a23eec13d926c33de97b5b93e866a7524a8bcd1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a23eec13d926c33de97b5b93e866a7524a8bcd1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a23eec13d926c33de97b5b93e866a7524a8bcd1f/comments", "author": null, "committer": null, "parents": [{"sha": "afd83fe4394ec1ad673e4930573eac6e64a11a01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afd83fe4394ec1ad673e4930573eac6e64a11a01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afd83fe4394ec1ad673e4930573eac6e64a11a01"}], "stats": {"total": 69, "additions": 56, "deletions": 13}, "files": [{"sha": "93020992f350356147816224001485c3290a473e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=a23eec13d926c33de97b5b93e866a7524a8bcd1f", "patch": "@@ -1,3 +1,16 @@\n+2006-05-02  Steven G. Kargl  <kargls@comcast.net>\n+\n+\tPR fortran/26896\n+\t* lang.opt: Fix -Wtab description\n+\n+\tPR fortran/20248  \n+\t* lang.opt: New flag -fall-intrinsics.\n+\t* invoke.texi:  Document option.\n+\t* gfortran.h (options_t):  New member flag_all_intrinsics.\n+\t* options.c (gfc_init_options, gfc_handle_option): Set new option.\n+\tsort nearby misplaced options.\n+\t* intrinsic.c (add_sym, make_generic, make_alias):  Use it.\n+ \n 2006-05-02 Paul Thomas <pault@gcc.gnu.org>\n \n         PR fortran/27269"}, {"sha": "b345910e47fa1c4386d02eb8f3e7191d9e967a2c", "filename": "gcc/fortran/gfortran.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2Fgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2Fgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.h?ref=a23eec13d926c33de97b5b93e866a7524a8bcd1f", "patch": "@@ -1614,6 +1614,7 @@ typedef struct\n   int warn_underflow;\n   int warn_unused_labels;\n \n+  int flag_all_intrinsics;\n   int flag_default_double;\n   int flag_default_integer;\n   int flag_default_real;"}, {"sha": "e0763b8d777fbedc6a1d279bdcfd9f24291e36df", "filename": "gcc/fortran/intrinsic.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2Fintrinsic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2Fintrinsic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fintrinsic.c?ref=a23eec13d926c33de97b5b93e866a7524a8bcd1f", "patch": "@@ -224,7 +224,8 @@ add_sym (const char *name, int elemental, int actual_ok ATTRIBUTE_UNUSED,\n \n   /* First check that the intrinsic belongs to the selected standard.\n      If not, don't add it to the symbol list.  */\n-  if (!(gfc_option.allow_std & standard))\n+  if (!(gfc_option.allow_std & standard)\n+      && gfc_option.flag_all_intrinsics == 0)\n     return;\n \n   switch (sizing)\n@@ -782,7 +783,8 @@ make_generic (const char *name, gfc_generic_isym_id generic_id, int standard)\n {\n   gfc_intrinsic_sym *g;\n \n-  if (!(gfc_option.allow_std & standard))\n+  if (!(gfc_option.allow_std & standard)\n+      && gfc_option.flag_all_intrinsics == 0)\n     return;\n \n   if (sizing != SZ_NOTHING)\n@@ -824,7 +826,8 @@ make_alias (const char *name, int standard)\n \n   /* First check that the intrinsic belongs to the selected standard.\n      If not, don't add it to the symbol list.  */\n-  if (!(gfc_option.allow_std & standard))\n+  if (!(gfc_option.allow_std & standard)\n+      && gfc_option.flag_all_intrinsics == 0)\n     return;\n \n   switch (sizing)"}, {"sha": "867e18adb0459d71de7345328504c2a342892ab0", "filename": "gcc/fortran/invoke.texi", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finvoke.texi?ref=a23eec13d926c33de97b5b93e866a7524a8bcd1f", "patch": "@@ -116,7 +116,7 @@ by type.  Explanations are in the following sections.\n @item Fortran Language Options\n @xref{Fortran Dialect Options,,Options Controlling Fortran Dialect}.\n @gccoptlist{\n--ffree-form  -fno-fixed-form @gol\n+-fall-intrinsics -ffree-form  -fno-fixed-form @gol\n -fdollar-ok  -fimplicit-none  -fmax-identifier-length @gol\n -std=@var{std} -fd-lines-as-code -fd-lines-as-comments @gol\n -ffixed-line-length-@var{n}  -ffixed-line-length-none @gol\n@@ -191,6 +191,12 @@ Specify the layout used by the source file.  The free form layout\n was introduced in Fortran 90.  Fixed form was traditionally used in\n older Fortran programs.\n \n+@cindex -fall-intrinsics\n+@item -fall-intrinsics\n+Accept all of the intrinsic procedures provided in libgfortran \n+without regard to the setting of @option{-std}.  In particular, \n+this option can be quite useful with @option{-std=f95}.\n+\n @cindex option, -fd-lines-as-code\n @cindex -fd-lines-as-code, option\n @cindex option, -fd-lines-as-comments"}, {"sha": "439eb02963641130ccfb9945018be796f680585f", "filename": "gcc/fortran/lang.opt", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2Flang.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2Flang.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Flang.opt?ref=a23eec13d926c33de97b5b93e866a7524a8bcd1f", "patch": "@@ -67,7 +67,7 @@ Warn about \\\"suspicious\\\" constructs\n \n Wtabs\n Fortran\n-Warn about nonconforming uses of the tab character\n+Permit nonconforming uses of the tab character\n \n Wunderflow\n Fortran\n@@ -77,6 +77,10 @@ Wunused-labels\n Fortran\n Warn when a label is unused\n \n+fall-intrinsics\n+Fortran RejectNegative\n+All intrinsics procedures are available regardless of selected standard\n+\n fautomatic\n Fortran\n Do not treat local variables and COMMON blocks as if they were named in SAVE statements"}, {"sha": "ff3719e54d91decce8b806c35415757be6295b1b", "filename": "gcc/fortran/options.c", "status": "modified", "additions": 13, "deletions": 8, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2Foptions.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ffortran%2Foptions.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Foptions.c?ref=a23eec13d926c33de97b5b93e866a7524a8bcd1f", "patch": "@@ -61,6 +61,7 @@ gfc_init_options (unsigned int argc ATTRIBUTE_UNUSED,\n   gfc_option.warn_underflow = 1;\n   gfc_option.warn_unused_labels = 0;\n \n+  gfc_option.flag_all_intrinsics = 0;\n   gfc_option.flag_default_double = 0;\n   gfc_option.flag_default_integer = 0;\n   gfc_option.flag_default_real = 0;\n@@ -424,6 +425,18 @@ gfc_handle_option (size_t scode, const char *arg, int value)\n     case OPT_Wunused_labels:\n       gfc_option.warn_unused_labels = value;\n       break;\n+\n+    case OPT_fall_intrinsics:\n+      gfc_option.flag_all_intrinsics = 1;\n+      break;\n+\n+    case OPT_fautomatic:\n+      gfc_option.flag_automatic = value;\n+      break;\n+\n+    case OPT_fbackslash:\n+      gfc_option.flag_backslash = value;\n+      break;\n       \n     case OPT_fcray_pointer:\n       gfc_option.flag_cray_pointer = value;\n@@ -437,14 +450,6 @@ gfc_handle_option (size_t scode, const char *arg, int value)\n       gfc_option.flag_dollar_ok = value;\n       break;\n \n-    case OPT_fautomatic:\n-      gfc_option.flag_automatic = value;\n-      break;\n-\n-    case OPT_fbackslash:\n-      gfc_option.flag_backslash = value;\n-      break;\n-\n     case OPT_fd_lines_as_code:\n       gfc_option.flag_d_lines = 1;\n       break;"}, {"sha": "399b36dab161c7c7a8ad73fe0922329a0f804e16", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a23eec13d926c33de97b5b93e866a7524a8bcd1f", "patch": "@@ -1,3 +1,8 @@\n+2006-05-02  Steven G. Kargl  <kargls@comcast.net>\n+\n+\tPR fortran/20248\n+\t* gfortran.dg/iargc.f90:  New test.\n+\n 2006-05-02  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/27102"}, {"sha": "a91e9003ac6b776df63cd2faed2b4ffc81811766", "filename": "gcc/testsuite/gfortran.dg/iargc.f90", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ftestsuite%2Fgfortran.dg%2Fiargc.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a23eec13d926c33de97b5b93e866a7524a8bcd1f/gcc%2Ftestsuite%2Fgfortran.dg%2Fiargc.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fiargc.f90?ref=a23eec13d926c33de97b5b93e866a7524a8bcd1f", "patch": "@@ -0,0 +1,6 @@\n+! { dg-do compile }\n+! { dg-options \"-fall-intrinsics -std=f95\" }\n+! PR fortran/20248\n+program z\n+   if (iargc() /= 0) call abort\n+end program z"}]}