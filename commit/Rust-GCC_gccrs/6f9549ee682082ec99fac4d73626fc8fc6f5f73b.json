{"sha": "6f9549ee682082ec99fac4d73626fc8fc6f5f73b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmY5NTQ5ZWU2ODIwODJlYzk5ZmFjNGQ3MzYyNmZjOGZjNmY1ZjczYg==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2014-09-03T14:16:54Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2014-09-03T14:16:54Z"}, "message": "re PR ipa/61986 (ICE on valid code at -O3 on x86_64-linux-gnu indecide_about_value, at ipa-cp.c:3480)\n\n2014-09-03  Martin Jambor  <mjambor@suse.cz>\n    \n\tPR ipa/61986\n\t* ipa-cp.c (find_aggregate_values_for_callers_subset): Chain\n\tcreated replacements in ascending order of offsets.\n\t(known_aggs_to_agg_replacement_list): Likewise.\n    \ngcc/testsuite/\n\t* gcc.dg/ipa/pr61986.c: New test.\n\nFrom-SVN: r214877", "tree": {"sha": "ec00253dce4e388b8c159005e098a36d3a0baf5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ec00253dce4e388b8c159005e098a36d3a0baf5a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f9549ee682082ec99fac4d73626fc8fc6f5f73b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f9549ee682082ec99fac4d73626fc8fc6f5f73b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f9549ee682082ec99fac4d73626fc8fc6f5f73b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f9549ee682082ec99fac4d73626fc8fc6f5f73b/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2b3ae5d12a3f6cdb9008d77eb18fddb1344ce1bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b3ae5d12a3f6cdb9008d77eb18fddb1344ce1bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b3ae5d12a3f6cdb9008d77eb18fddb1344ce1bb"}], "stats": {"total": 76, "additions": 70, "deletions": 6}, "files": [{"sha": "fdafce834612180e7636fda2ef3136f1c2b13830", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f9549ee682082ec99fac4d73626fc8fc6f5f73b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f9549ee682082ec99fac4d73626fc8fc6f5f73b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6f9549ee682082ec99fac4d73626fc8fc6f5f73b", "patch": "@@ -1,3 +1,10 @@\n+2014-09-03  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR ipa/61986\n+\t* ipa-cp.c (find_aggregate_values_for_callers_subset): Chain\n+\tcreated replacements in ascending order of offsets.\n+\t(known_aggs_to_agg_replacement_list): Likewise.\n+\n 2014-09-03  Martin Liska  <mliska@suse.cz>\n \n \t* tree-ssa-sccvn.c (vn_reference_lookup_call): default (NULL) value"}, {"sha": "58121d4df3e052073b3ed34bcfb551c10fdd24e6", "filename": "gcc/ipa-cp.c", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f9549ee682082ec99fac4d73626fc8fc6f5f73b/gcc%2Fipa-cp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f9549ee682082ec99fac4d73626fc8fc6f5f73b/gcc%2Fipa-cp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-cp.c?ref=6f9549ee682082ec99fac4d73626fc8fc6f5f73b", "patch": "@@ -3146,7 +3146,8 @@ find_aggregate_values_for_callers_subset (struct cgraph_node *node,\n \t\t\t\t\t  vec<cgraph_edge *> callers)\n {\n   struct ipa_node_params *dest_info = IPA_NODE_REF (node);\n-  struct ipa_agg_replacement_value *res = NULL;\n+  struct ipa_agg_replacement_value *res;\n+  struct ipa_agg_replacement_value **tail = &res;\n   struct cgraph_edge *cs;\n   int i, j, count = ipa_get_param_count (dest_info);\n \n@@ -3190,14 +3191,15 @@ find_aggregate_values_for_callers_subset (struct cgraph_node *node,\n \t  v->offset = item->offset;\n \t  v->value = item->value;\n \t  v->by_ref = plats->aggs_by_ref;\n-\t  v->next = res;\n-\t  res = v;\n+\t  *tail = v;\n+\t  tail = &v->next;\n \t}\n \n     next_param:\n       if (inter.exists ())\n \tinter.release ();\n     }\n+  *tail = NULL;\n   return res;\n }\n \n@@ -3206,7 +3208,8 @@ find_aggregate_values_for_callers_subset (struct cgraph_node *node,\n static struct ipa_agg_replacement_value *\n known_aggs_to_agg_replacement_list (vec<ipa_agg_jump_function> known_aggs)\n {\n-  struct ipa_agg_replacement_value *res = NULL;\n+  struct ipa_agg_replacement_value *res;\n+  struct ipa_agg_replacement_value **tail = &res;\n   struct ipa_agg_jump_function *aggjf;\n   struct ipa_agg_jf_item *item;\n   int i, j;\n@@ -3220,9 +3223,10 @@ known_aggs_to_agg_replacement_list (vec<ipa_agg_jump_function> known_aggs)\n \tv->offset = item->offset;\n \tv->value = item->value;\n \tv->by_ref = aggjf->by_ref;\n-\tv->next = res;\n-\tres = v;\n+\t*tail = v;\n+\ttail = &v->next;\n       }\n+  *tail = NULL;\n   return res;\n }\n "}, {"sha": "7d3c32b560d4bcde2dd3f3ac664b22b37fae37d2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f9549ee682082ec99fac4d73626fc8fc6f5f73b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f9549ee682082ec99fac4d73626fc8fc6f5f73b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6f9549ee682082ec99fac4d73626fc8fc6f5f73b", "patch": "@@ -1,3 +1,8 @@\n+2014-09-03  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR ipa/61986\n+\t* gcc.dg/ipa/pr61986.c: New test.\n+\n 2014-09-03  Marek Polacek  <polacek@redhat.com>\n \n \tPR c/62294"}, {"sha": "8d2f658b87cd6e55ea4cf2a0f6d68ce02b20b755", "filename": "gcc/testsuite/gcc.dg/ipa/pr61986.c", "status": "added", "additions": 48, "deletions": 0, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f9549ee682082ec99fac4d73626fc8fc6f5f73b/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fpr61986.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f9549ee682082ec99fac4d73626fc8fc6f5f73b/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fpr61986.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fpr61986.c?ref=6f9549ee682082ec99fac4d73626fc8fc6f5f73b", "patch": "@@ -0,0 +1,48 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O3\" } */\n+\n+int a, b, c;\n+\n+struct S\n+{\n+  int f0;\n+  int f1;\n+} d;\n+\n+static int fn2 (struct S);\n+void fn3 (struct S);\n+\n+void\n+fn1 (struct S p)\n+{\n+  struct S h = { 0, 0 };\n+  fn3 (p);\n+  fn2 (h);\n+}\n+\n+int\n+fn2 (struct S p)\n+{\n+  struct S j = { 0, 0 };\n+  fn3 (p);\n+  fn2 (j);\n+  return 0;\n+}\n+\n+void\n+fn3 (struct S p)\n+{\n+  for (; b; a++)\n+    c = p.f0;\n+  fn1 (d);\n+}\n+\n+void\n+fn4 ()\n+{\n+  for (;;)\n+    {\n+      struct S f = { 0, 0 };\n+      fn1 (f);\n+    }\n+}"}]}