{"sha": "d97817522c056cde61126cd04dffd0990ef5652f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDk3ODE3NTIyYzA1NmNkZTYxMTI2Y2QwNGRmZmQwOTkwZWY1NjUyZg==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2009-03-07T01:47:25Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2009-03-07T01:47:25Z"}, "message": "re PR target/37520 (NO_DOLLAR_IN_LABEL should be defined on x86 targets)\n\n2009-03-06  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR c++/37520\n\t* cp-tree.h: Check NO_DOT_IN_LABEL before NO_DOLLAR_IN_LABEL\n\twhen mangling symbols.\n\nFrom-SVN: r144692", "tree": {"sha": "5892b332ae2b3ecfa6f3b1cb161cecb0e399ba30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5892b332ae2b3ecfa6f3b1cb161cecb0e399ba30"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d97817522c056cde61126cd04dffd0990ef5652f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d97817522c056cde61126cd04dffd0990ef5652f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d97817522c056cde61126cd04dffd0990ef5652f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d97817522c056cde61126cd04dffd0990ef5652f/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c2a19d8c8267212378246a7e94c36cb5398de651", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2a19d8c8267212378246a7e94c36cb5398de651", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2a19d8c8267212378246a7e94c36cb5398de651"}], "stats": {"total": 36, "additions": 21, "deletions": 15}, "files": [{"sha": "dcf3158df603910ff95c7a94e6e63e3b04abe69c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d97817522c056cde61126cd04dffd0990ef5652f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d97817522c056cde61126cd04dffd0990ef5652f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d97817522c056cde61126cd04dffd0990ef5652f", "patch": "@@ -1,3 +1,9 @@\n+2009-03-06  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR c++/37520\n+\t* cp-tree.h: Check NO_DOT_IN_LABEL before NO_DOLLAR_IN_LABEL\n+\twhen mangling symbols.\n+\n 2009-03-06  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/33492"}, {"sha": "0b1d7c61cdceb614b22b01a06a3d6787a7a49e07", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 15, "deletions": 15, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d97817522c056cde61126cd04dffd0990ef5652f/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d97817522c056cde61126cd04dffd0990ef5652f/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=d97817522c056cde61126cd04dffd0990ef5652f", "patch": "@@ -3660,20 +3660,8 @@ extern GTY(()) VEC(tree,gc) *local_classes;\n    at a particular location, we can index into the string at\n    any other location that provides distinguishing characters).  */\n \n-/* Define NO_DOLLAR_IN_LABEL in your favorite tm file if your assembler\n-   doesn't allow '$' in symbol names.  */\n-#ifndef NO_DOLLAR_IN_LABEL\n-\n-#define JOINER '$'\n-\n-#define AUTO_TEMP_NAME \"_$tmp_\"\n-#define VFIELD_BASE \"$vf\"\n-#define VFIELD_NAME \"_vptr$\"\n-#define VFIELD_NAME_FORMAT \"_vptr$%s\"\n-#define ANON_AGGRNAME_FORMAT \"$_%d\"\n-\n-#else /* NO_DOLLAR_IN_LABEL */\n-\n+/* Define NO_DOT_IN_LABEL in your favorite tm file if your assembler\n+   doesn't allow '.' in symbol names.  */\n #ifndef NO_DOT_IN_LABEL\n \n #define JOINER '.'\n@@ -3687,6 +3675,18 @@ extern GTY(()) VEC(tree,gc) *local_classes;\n \n #else /* NO_DOT_IN_LABEL */\n \n+#ifndef NO_DOLLAR_IN_LABEL\n+\n+#define JOINER '$'\n+\n+#define AUTO_TEMP_NAME \"_$tmp_\"\n+#define VFIELD_BASE \"$vf\"\n+#define VFIELD_NAME \"_vptr$\"\n+#define VFIELD_NAME_FORMAT \"_vptr$%s\"\n+#define ANON_AGGRNAME_FORMAT \"$_%d\"\n+\n+#else /* NO_DOLLAR_IN_LABEL */\n+\n #define IN_CHARGE_NAME \"__in_chrg\"\n #define AUTO_TEMP_NAME \"__tmp_\"\n #define TEMP_NAME_P(ID_NODE) \\\n@@ -3709,8 +3709,8 @@ extern GTY(()) VEC(tree,gc) *local_classes;\n \t     sizeof (ANON_AGGRNAME_PREFIX) - 1))\n #define ANON_AGGRNAME_FORMAT \"__anon_%d\"\n \n-#endif\t/* NO_DOT_IN_LABEL */\n #endif\t/* NO_DOLLAR_IN_LABEL */\n+#endif\t/* NO_DOT_IN_LABEL */\n \n #define THIS_NAME \"this\"\n "}]}