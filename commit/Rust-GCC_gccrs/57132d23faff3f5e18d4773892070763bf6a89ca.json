{"sha": "57132d23faff3f5e18d4773892070763bf6a89ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTcxMzJkMjNmYWZmM2Y1ZTE4ZDQ3NzM4OTIwNzA3NjNiZjZhODljYQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2012-09-14T17:02:04Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "2012-09-14T17:02:04Z"}, "message": "reload.c (find_dummy_reload): Don't use OUT as a reload reg for IN if it overlaps a fixed register.\n\n\t* reload.c (find_dummy_reload): Don't use OUT as a reload reg\n\tfor IN if it overlaps a fixed register.\n\nFrom-SVN: r191305", "tree": {"sha": "669ec75fa8e27dc3bc1599c04d8fd597458e27c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/669ec75fa8e27dc3bc1599c04d8fd597458e27c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/57132d23faff3f5e18d4773892070763bf6a89ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57132d23faff3f5e18d4773892070763bf6a89ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57132d23faff3f5e18d4773892070763bf6a89ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57132d23faff3f5e18d4773892070763bf6a89ca/comments", "author": null, "committer": null, "parents": [{"sha": "a27d595da25b497f14d8f3714b63819f712cde11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a27d595da25b497f14d8f3714b63819f712cde11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a27d595da25b497f14d8f3714b63819f712cde11"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "cbe531ad86f3e4f16dce86e3ef037449c767eeeb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57132d23faff3f5e18d4773892070763bf6a89ca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57132d23faff3f5e18d4773892070763bf6a89ca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=57132d23faff3f5e18d4773892070763bf6a89ca", "patch": "@@ -1,3 +1,8 @@\n+2012-09-14  Richard Earnshaw  <rearnsha@arm.com>\n+\n+\t* reload.c (find_dummy_reload): Don't use OUT as a reload reg\n+\tfor IN if it overlaps a fixed register.\n+\n 2012-09-14  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR rtl-optimization/44194"}, {"sha": "2e41ed6498e6a394dc01c6c4ed3d1f6df6da6ec6", "filename": "gcc/reload.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57132d23faff3f5e18d4773892070763bf6a89ca/gcc%2Freload.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57132d23faff3f5e18d4773892070763bf6a89ca/gcc%2Freload.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload.c?ref=57132d23faff3f5e18d4773892070763bf6a89ca", "patch": "@@ -2036,7 +2036,12 @@ find_dummy_reload (rtx real_in, rtx real_out, rtx *inloc, rtx *outloc,\n \t However, we only ignore IN in its role as this reload.\n \t If the insn uses IN elsewhere and it contains OUT,\n \t that counts.  We can't be sure it's the \"same\" operand\n-\t so it might not go through this reload.  */\n+\t so it might not go through this reload.  \n+\n+         We also need to avoid using OUT if it, or part of it, is a\n+         fixed register.  Modifying such registers, even transiently,\n+         may have undefined effects on the machine, such as modifying\n+         the stack pointer.  */\n       saved_rtx = *inloc;\n       *inloc = const0_rtx;\n \n@@ -2049,7 +2054,8 @@ find_dummy_reload (rtx real_in, rtx real_out, rtx *inloc, rtx *outloc,\n \n \t  for (i = 0; i < nwords; i++)\n \t    if (! TEST_HARD_REG_BIT (reg_class_contents[(int) rclass],\n-\t\t\t\t     regno + i))\n+\t\t\t\t     regno + i)\n+\t\t|| fixed_regs[regno + i])\n \t      break;\n \n \t  if (i == nwords)"}]}