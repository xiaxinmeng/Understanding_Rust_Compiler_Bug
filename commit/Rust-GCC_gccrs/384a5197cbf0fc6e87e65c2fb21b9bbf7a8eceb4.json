{"sha": "384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzg0YTUxOTdjYmYwZmM2ZTg3ZTY1YzJmYjIxYjliYmY3YThlY2ViNA==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2010-07-08T16:37:49Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-07-08T16:37:49Z"}, "message": "Add the -ftree-loop-if-convert flag.\n\n2010-07-08  Sebastian Pop  <sebastian.pop@amd.com>\n\n\t* common.opt (ftree-loop-if-convert): New flag.\n\t* doc/invoke.texi (ftree-loop-if-convert): Documented.\n\t* tree-if-conv.c (gate_tree_if_conversion): Enable if-conversion\n\twhen flag_tree_loop_if_convert is set.\n\nFrom-SVN: r161963", "tree": {"sha": "1c1c6dee711cac40bee4937265d51a8bbbf086a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c1c6dee711cac40bee4937265d51a8bbbf086a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f8e1995a5bd72a8578902d05841537e7a34c27c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8e1995a5bd72a8578902d05841537e7a34c27c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8e1995a5bd72a8578902d05841537e7a34c27c0"}], "stats": {"total": 31, "additions": 26, "deletions": 5}, "files": [{"sha": "d74518635b6f1556cb2378e5a04bbb09803a5a84", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4", "patch": "@@ -1,3 +1,10 @@\n+2010-07-08  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* common.opt (ftree-loop-if-convert): New flag.\n+\t* doc/invoke.texi (ftree-loop-if-convert): Documented.\n+\t* tree-if-conv.c (gate_tree_if_conversion): Enable if-conversion\n+\twhen flag_tree_loop_if_convert is set.\n+\n 2010-07-08  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.c: Use short syntax for function calls"}, {"sha": "111d7b7d9e680c159f1e9939a71e919a445d23c9", "filename": "gcc/common.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4", "patch": "@@ -653,6 +653,10 @@ fif-conversion2\n Common Report Var(flag_if_conversion2) Optimization\n Perform conversion of conditional jumps to conditional execution\n \n+ftree-loop-if-convert\n+Common Report Var(flag_tree_loop_if_convert) Init(-1) Optimization\n+Convert conditional jumps in innermost loops to branchless equivalents\n+\n ; -finhibit-size-directive inhibits output of .size for ELF.\n ; This is used only for compiling crtstuff.c,\n ; and it may be extended to other effects"}, {"sha": "4d6a1af3aa8b1bbb1b79f52f774aa9999606ae20", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4", "patch": "@@ -342,7 +342,7 @@ Objective-C and Objective-C++ Dialects}.\n -fearly-inlining -fipa-sra -fexpensive-optimizations -ffast-math @gol\n -ffinite-math-only -ffloat-store -fexcess-precision=@var{style} @gol\n -fforward-propagate -ffunction-sections @gol\n--fgcse -fgcse-after-reload -fgcse-las -fgcse-lm @gol\n+-fgcse -fgcse-after-reload -fgcse-las -fgcse-lm -fgraphite-identity @gol\n -fgcse-sm -fif-conversion -fif-conversion2 -findirect-inlining @gol\n -finline-functions -finline-functions-called-once -finline-limit=@var{n} @gol\n -finline-small-functions -fipa-cp -fipa-cp-clone -fipa-matrix-reorg -fipa-pta @gol\n@@ -352,7 +352,7 @@ Objective-C and Objective-C++ Dialects}.\n -fira-loop-pressure -fno-ira-share-save-slots @gol\n -fno-ira-share-spill-slots -fira-verbose=@var{n} @gol\n -fivopts -fkeep-inline-functions -fkeep-static-consts @gol\n--floop-block -floop-interchange -floop-strip-mine -fgraphite-identity @gol\n+-floop-block -floop-interchange -floop-strip-mine @gol\n -floop-parallelize-all -flto -flto-compression-level -flto-report -fltrans @gol\n -fltrans-output-list -fmerge-all-constants -fmerge-constants -fmodulo-sched @gol\n -fmodulo-sched-allow-regmoves -fmove-loop-invariants -fmudflap @gol\n@@ -382,8 +382,8 @@ Objective-C and Objective-C++ Dialects}.\n -fsplit-wide-types -fstack-protector -fstack-protector-all @gol\n -fstrict-aliasing -fstrict-overflow -fthread-jumps -ftracer @gol\n -ftree-builtin-call-dce -ftree-ccp -ftree-ch -ftree-copy-prop @gol\n--ftree-copyrename -ftree-dce @gol\n--ftree-dominator-opts -ftree-dse -ftree-forwprop -ftree-fre -ftree-loop-im @gol\n+-ftree-copyrename -ftree-dce -ftree-dominator-opts -ftree-dse @gol\n+-ftree-forwprop -ftree-fre -ftree-loop-if-convert -ftree-loop-im @gol\n -ftree-phiprop -ftree-loop-distribution @gol\n -ftree-loop-ivcanon -ftree-loop-linear -ftree-loop-optimize @gol\n -ftree-parallelize-loops=@var{n} -ftree-pre -ftree-pta -ftree-reassoc @gol\n@@ -6883,6 +6883,13 @@ profitable to parallelize the loops.\n Compare the results of several data dependence analyzers.  This option\n is used for debugging the data dependence analyzers.\n \n+@item -ftree-loop-if-convert\n+Attempt to transform conditional jumps in the innermost loops to\n+branch-less equivalents.  The intent is to remove control-flow from\n+the innermost loops in order to improve the ability of the\n+vectorization pass to handle these loops.  This is enabled by default\n+if vectorization is enabled.\n+\n @item -ftree-loop-distribution\n Perform loop distribution.  This flag can improve cache performance on\n big loop bodies and allow further loop optimizations, like"}, {"sha": "2dd8aa1edd34ee5575997e1fd1edd072a78d6f77", "filename": "gcc/tree-if-conv.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4/gcc%2Ftree-if-conv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4/gcc%2Ftree-if-conv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-if-conv.c?ref=384a5197cbf0fc6e87e65c2fb21b9bbf7a8eceb4", "patch": "@@ -1239,10 +1239,13 @@ main_tree_if_conversion (void)\n   return changed ? TODO_cleanup_cfg : 0;\n }\n \n+/* Returns true when the if-conversion pass is enabled.  */\n+\n static bool\n gate_tree_if_conversion (void)\n {\n-  return flag_tree_vectorize != 0;\n+  return ((flag_tree_vectorize && flag_tree_loop_if_convert != 0)\n+\t  || flag_tree_loop_if_convert == 1);\n }\n \n struct gimple_opt_pass pass_if_conversion ="}]}