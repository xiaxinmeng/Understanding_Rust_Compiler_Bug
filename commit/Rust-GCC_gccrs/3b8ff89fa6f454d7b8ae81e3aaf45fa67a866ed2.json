{"sha": "3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2I4ZmY4OWZhNmY0NTRkN2I4YWU4MWUzYWFmNDVmYTY3YTg2NmVkMg==", "commit": {"author": {"name": "Mikael Pettersson", "email": "mikpe@it.uu.se", "date": "2011-01-27T04:25:49Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2011-01-27T04:25:49Z"}, "message": "re PR rtl-optimization/46856 (internal compiler error in final_scan_insn breaks m68k-linux bootstrap)\n\n\n\tPR rtl-optimization/46856\n\t* postreload.c (reload_combine_recognize_const_pattern): Do not\n\tseparate cc0 setter and user on cc0 targets.\n\n\tPR rtl-optimization/46856\n\t* gcc.c-torture/compile/pr46856.c: New test.\n\nFrom-SVN: r169321", "tree": {"sha": "45ee964249b55af1bfcdd3579663480715ec0f6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45ee964249b55af1bfcdd3579663480715ec0f6b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2/comments", "author": null, "committer": null, "parents": [{"sha": "434b897293cc5fc065a5ecb1536171520887adc4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/434b897293cc5fc065a5ecb1536171520887adc4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/434b897293cc5fc065a5ecb1536171520887adc4"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "207e618f55a1a27238c216e5feedc6930b7f18ec", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2", "patch": "@@ -1,3 +1,9 @@\n+2011-01-26  Mikael Pettersson <mikpe@it.uu.se>\n+\n+\tPR rtl-optimization/46856\n+\t* postreload.c (reload_combine_recognize_const_pattern): Do not\n+\tseparate cc0 setter and user on cc0 targets.\n+\n 2011-01-26  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \tPR c/43082"}, {"sha": "1cb42f65aad1bf7504cd940aa5a3f8ac1e799a3c", "filename": "gcc/postreload.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2/gcc%2Fpostreload.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2/gcc%2Fpostreload.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpostreload.c?ref=3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2", "patch": "@@ -1009,6 +1009,12 @@ reload_combine_recognize_const_pattern (rtx insn)\n \t      && reg_state[clobbered_regno].real_store_ruid >= use_ruid)\n \t    break;\n \n+#ifdef HAVE_cc0\n+\t  /* Do not separate cc0 setter and cc0 user on HAVE_cc0 targets.  */\n+\t  if (must_move_add && sets_cc0_p (PATTERN (use_insn)))\n+\t    break;\n+#endif\n+\n \t  gcc_assert (reg_state[regno].store_ruid <= use_ruid);\n \t  /* Avoid moving a use of ADDREG past a point where it is stored.  */\n \t  if (reg_state[REGNO (addreg)].store_ruid > use_ruid)"}, {"sha": "4414684c20e0d5e5b614a8afed3e207ddd27d61c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2", "patch": "@@ -1,3 +1,8 @@\n+2011-01-26  Mikael Pettersson <mikpe@it.uu.se>\n+\n+\tPR rtl-optimization/46856\n+\t* gcc.c-torture/compile/pr46856.c: New test.\n+\n 2011-01-26  Nicola Pero  <nicola.pero@meta-innovation.com>\n \t    Andrew Pinski  <pinskia@gmail.com>\n "}, {"sha": "2ec5e8baf9ea5ca1e8764fa2a960cd30e790a7fc", "filename": "gcc/testsuite/gcc.c-torture/compile/pr46856.c", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr46856.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr46856.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr46856.c?ref=3b8ff89fa6f454d7b8ae81e3aaf45fa67a866ed2", "patch": "@@ -0,0 +1,26 @@\n+struct data {\n+    int prio;\n+    signed char status;\n+};\n+\n+struct base {\n+    unsigned _num;\n+    struct data vec[10];\n+};\n+\n+static struct data *ix(struct base *base, unsigned i)\n+{\n+    return &base->vec[i];\n+}\n+\n+struct heap {\n+    struct base base;\n+};\n+\n+struct heap *heap;\n+\n+void increase_insn_priority (int *fld, int amount)\n+{\n+    if (ix(heap ? &heap->base : 0, *fld)->status > 0)\n+\tix(heap ? &heap->base : 0, *fld)->prio += amount;\n+}"}]}