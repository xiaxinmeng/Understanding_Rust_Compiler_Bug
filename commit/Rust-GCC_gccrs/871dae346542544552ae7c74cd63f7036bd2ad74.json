{"sha": "871dae346542544552ae7c74cd63f7036bd2ad74", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODcxZGFlMzQ2NTQyNTQ0NTUyYWU3Yzc0Y2Q2M2Y3MDM2YmQyYWQ3NA==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2015-02-04T14:24:00Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2015-02-04T14:24:00Z"}, "message": "Fix signedness of compares expanding debug exprs.\n\nfor  gcc/ChangeLog\n\n\tPR debug/64817\n\t* cfgexpand.c (expand_debug_expr): Compute unsignedp from\n\toperands for tcc_comparison exprs.  Fix typos.\n\nfor  gcc/testsuite/ChangeLog\n\n\tPR debug/64817\n\t* gcc.dg/pr64817-3.c: New.\n\nFrom-SVN: r220406", "tree": {"sha": "ad0568979dce71bbcf4e2054007589eecb9c4ef2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad0568979dce71bbcf4e2054007589eecb9c4ef2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/871dae346542544552ae7c74cd63f7036bd2ad74", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/871dae346542544552ae7c74cd63f7036bd2ad74", "html_url": "https://github.com/Rust-GCC/gccrs/commit/871dae346542544552ae7c74cd63f7036bd2ad74", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/871dae346542544552ae7c74cd63f7036bd2ad74/comments", "author": null, "committer": null, "parents": [{"sha": "af9f5d95df023eab3779878815bc2ad09870f36e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af9f5d95df023eab3779878815bc2ad09870f36e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af9f5d95df023eab3779878815bc2ad09870f36e"}], "stats": {"total": 31, "additions": 28, "deletions": 3}, "files": [{"sha": "47133e92ecdc56746e7b8e01729fdb072da510d7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/871dae346542544552ae7c74cd63f7036bd2ad74/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/871dae346542544552ae7c74cd63f7036bd2ad74/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=871dae346542544552ae7c74cd63f7036bd2ad74", "patch": "@@ -1,5 +1,9 @@\n 2015-02-04  Alexandre Oliva <aoliva@redhat.com>\n \n+\tPR debug/64817\n+\t* cfgexpand.c (expand_debug_expr): Compute unsignedp from\n+\toperands for tcc_comparison exprs.  Fix typos.\n+\n \tPR debug/64817\n \t* simplify-rtx.c (simplify_binary_operation_1): Simplify one\n \tof two XORs that have an intervening AND or IOR."}, {"sha": "7dfe1f6e7f52f420d9a1ada3862728653b9cae99", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/871dae346542544552ae7c74cd63f7036bd2ad74/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/871dae346542544552ae7c74cd63f7036bd2ad74/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=871dae346542544552ae7c74cd63f7036bd2ad74", "patch": "@@ -3911,7 +3911,6 @@ expand_debug_expr (tree exp)\n \n     binary:\n     case tcc_binary:\n-    case tcc_comparison:\n       op1 = expand_debug_expr (TREE_OPERAND (exp, 1));\n       if (!op1)\n \treturn NULL_RTX;\n@@ -3925,6 +3924,10 @@ expand_debug_expr (tree exp)\n \treturn NULL_RTX;\n       break;\n \n+    case tcc_comparison:\n+      unsignedp = TYPE_UNSIGNED (TREE_TYPE (TREE_OPERAND (exp, 0)));\n+      goto binary;\n+\n     case tcc_type:\n     case tcc_statement:\n       gcc_unreachable ();\n@@ -4006,7 +4009,7 @@ expand_debug_expr (tree exp)\n \top0 = copy_rtx (op0);\n \n       if (GET_MODE (op0) == BLKmode\n-\t  /* If op0 is not BLKmode, but BLKmode is, adjust_mode\n+\t  /* If op0 is not BLKmode, but mode is, adjust_mode\n \t     below would ICE.  While it is likely a FE bug,\n \t     try to be robust here.  See PR43166.  */\n \t  || mode == BLKmode\n@@ -5285,7 +5288,7 @@ expand_gimple_basic_block (basic_block bb, bool disable_tail_calls)\n \n \t\tif (have_debug_uses)\n \t\t  {\n-\t\t    /* OP is a TERed SSA name, with DEF it's defining\n+\t\t    /* OP is a TERed SSA name, with DEF its defining\n \t\t       statement, and where OP is used in further debug\n \t\t       instructions.  Generate a debug temporary, and\n \t\t       replace all uses of OP in debug insns with that"}, {"sha": "c1b430534ab5a3722d4c4991c0c9d71a3e6571a5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/871dae346542544552ae7c74cd63f7036bd2ad74/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/871dae346542544552ae7c74cd63f7036bd2ad74/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=871dae346542544552ae7c74cd63f7036bd2ad74", "patch": "@@ -1,3 +1,8 @@\n+2015-02-04  Alexandre Oliva <aoliva@redhat.com>\n+\n+\tPR debug/64817\n+\t* gcc.dg/pr64817-3.c: New.\n+\n 2015-02-04  Jakub Jelinek  <jakub@redhat.com>\n \t    Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>\n "}, {"sha": "3fe0117082d7e4035aa4113b238b39af555a1326", "filename": "gcc/testsuite/gcc.dg/pr64817-3.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/871dae346542544552ae7c74cd63f7036bd2ad74/gcc%2Ftestsuite%2Fgcc.dg%2Fpr64817-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/871dae346542544552ae7c74cd63f7036bd2ad74/gcc%2Ftestsuite%2Fgcc.dg%2Fpr64817-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr64817-3.c?ref=871dae346542544552ae7c74cd63f7036bd2ad74", "patch": "@@ -0,0 +1,13 @@\n+/* PR debug/64817 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O3 -g\" } */\n+\n+int a;\n+\n+void\n+foo (void)\n+{\n+  int e;\n+  a = ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((a & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) & 231) ^ 14) ^ 1;\n+  e = (a > 0);\n+}"}]}