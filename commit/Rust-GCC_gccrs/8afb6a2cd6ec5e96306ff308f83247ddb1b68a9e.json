{"sha": "8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGFmYjZhMmNkNmVjNWU5NjMwNmZmMzA4ZjgzMjQ3ZGRiMWI2OGE5ZQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-10-13T20:19:17Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-10-13T20:19:17Z"}, "message": "re PR sanitizer/82353 (runtime ubsan crash)\n\n\tPR sanitizer/82353\n\t* g++.dg/ubsan/pr82353-2.C: New test.\n\t* g++.dg/ubsan/pr82353-2-aux.cc: New file.\n\t* g++.dg/ubsan/pr82353-2.h: New file.\n\nFrom-SVN: r253744", "tree": {"sha": "94d62c69ce985f85a16400a64b8f849b469d408d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/94d62c69ce985f85a16400a64b8f849b469d408d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "39382c092ee9bb5c0033018acee7f09dc82638e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39382c092ee9bb5c0033018acee7f09dc82638e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39382c092ee9bb5c0033018acee7f09dc82638e0"}], "stats": {"total": 90, "additions": 90, "deletions": 0}, "files": [{"sha": "c6419c7f8f177ce4bff11aaed7d83f640617b04c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e", "patch": "@@ -1,3 +1,10 @@\n+2017-10-13  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR sanitizer/82353\n+\t* g++.dg/ubsan/pr82353-2.C: New test.\n+\t* g++.dg/ubsan/pr82353-2-aux.cc: New file.\n+\t* g++.dg/ubsan/pr82353-2.h: New file.\n+\n 2017-10-13  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/81048"}, {"sha": "75d466b39bb77255acbe2bc97d4f50aa25412735", "filename": "gcc/testsuite/g++.dg/ubsan/pr82353-2-aux.cc", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr82353-2-aux.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr82353-2-aux.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr82353-2-aux.cc?ref=8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e", "patch": "@@ -0,0 +1,32 @@\n+// PR sanitizer/82353\n+\n+#include \"pr82353-2.h\"\n+\n+B a;\n+E b;\n+B C::c0;\n+unsigned D::d0;\n+\n+void\n+foo ()\n+{\n+  a.b1 = p.f2.e2.b1 = 5;\n+}\n+\n+void\n+bar ()\n+{\n+  int c = p.f2.e4.d1.a0 - -~p.f4 * 89;\n+  q.c0.b0 = i > g * a.b0 * h - k % a.b1;\n+  if ((~(m * j) && -~p.f4 * 90284000534361) % ~m * j)\n+    b.e2.b0 << l << f;\n+  o = -~p.f4 * 89;\n+  int d = p.f4;\n+  if (b.e2.b0)\n+    b.e2.b1 = c;\n+  bool e = ~-~p.f4;\n+  a.b1 % e;\n+  if (k / p.f2.e2.b1)\n+    b.e4.d0 = g * a.b0 * h;\n+  n = j;\n+}"}, {"sha": "31a35ac3a0236c1f7c55f5b730439e58b2293c19", "filename": "gcc/testsuite/g++.dg/ubsan/pr82353-2.C", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr82353-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr82353-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr82353-2.C?ref=8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e", "patch": "@@ -0,0 +1,20 @@\n+// PR sanitizer/82353\n+// { dg-do run }\n+// { dg-options \"-fsanitize=undefined -fno-sanitize-recover=undefined -std=c++11 -O2 -w\" }\n+// { dg-additional-sources \"pr82353-2-aux.cc\" }\n+\n+#include \"pr82353-2.h\"\n+\n+unsigned long f, g;\n+bool h, k, j, i;\n+unsigned char l, m;\n+short n;\n+unsigned o;\n+F p;\n+\n+int\n+main ()\n+{\n+  foo ();\n+  bar ();\n+}"}, {"sha": "4693d2299f27b0e873cb51d411dd1654bb661de2", "filename": "gcc/testsuite/g++.dg/ubsan/pr82353-2.h", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr82353-2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr82353-2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr82353-2.h?ref=8afb6a2cd6ec5e96306ff308f83247ddb1b68a9e", "patch": "@@ -0,0 +1,31 @@\n+extern unsigned long f, g;\n+extern bool h, i, j, k;\n+extern unsigned char l, m;\n+extern short n;\n+extern unsigned o;\n+struct B {\n+  short b0 : 27;\n+  long b1 : 10;\n+};\n+struct A {\n+  int a0 : 5;\n+};\n+struct C {\n+  static B c0;\n+};\n+struct D {\n+  static unsigned d0;\n+  A d1;\n+};\n+struct E {\n+  B e2;\n+  D e4;\n+};\n+struct F {\n+  E f2;\n+  short f4;\n+};\n+extern F p;\n+extern C q;\n+void foo ();\n+void bar ();"}]}