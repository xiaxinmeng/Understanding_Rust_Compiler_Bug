{"sha": "dca167984aeca670ff2c7ad7eebc8a66256b086f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGNhMTY3OTg0YWVjYTY3MGZmMmM3YWQ3ZWViYzhhNjYyNTZiMDg2Zg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-11-07T13:33:37Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-11-07T13:33:37Z"}, "message": "re PR target/77834 (ICE: in make_decl_rtl, at varasm.c:1311 with -O -ftree-pre -mstringop-strategy=libcall)\n\n\tPR target/77834\n\t* alias.c (nonoverlapping_memrefs_p): If one decl is\n\tFUNCTION_DECL or LABEL_DECL and the other is not, return 1.\n\nFrom-SVN: r241905", "tree": {"sha": "04db102b5a6c0fb6e79c7b477f6333ed80abc756", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/04db102b5a6c0fb6e79c7b477f6333ed80abc756"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dca167984aeca670ff2c7ad7eebc8a66256b086f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dca167984aeca670ff2c7ad7eebc8a66256b086f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dca167984aeca670ff2c7ad7eebc8a66256b086f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dca167984aeca670ff2c7ad7eebc8a66256b086f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a98152285e49156026d0b70bacfe562a6f9d3ac2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a98152285e49156026d0b70bacfe562a6f9d3ac2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a98152285e49156026d0b70bacfe562a6f9d3ac2"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "34e88da56420b409b5c2fd8e26b6328f7fec410b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dca167984aeca670ff2c7ad7eebc8a66256b086f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dca167984aeca670ff2c7ad7eebc8a66256b086f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dca167984aeca670ff2c7ad7eebc8a66256b086f", "patch": "@@ -1,3 +1,9 @@\n+2016-11-07  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/77834\n+\t* alias.c (nonoverlapping_memrefs_p): If one decl is\n+\tFUNCTION_DECL or LABEL_DECL and the other is not, return 1.\n+\n 2016-11-07  Richard Biener  <rguenther@suse.de>\n \n \tPR target/78229"}, {"sha": "1ea2417bed1d29d41eeb796744e298a4ba824beb", "filename": "gcc/alias.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dca167984aeca670ff2c7ad7eebc8a66256b086f/gcc%2Falias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dca167984aeca670ff2c7ad7eebc8a66256b086f/gcc%2Falias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Falias.c?ref=dca167984aeca670ff2c7ad7eebc8a66256b086f", "patch": "@@ -2755,6 +2755,14 @@ nonoverlapping_memrefs_p (const_rtx x, const_rtx y, bool loop_invariant)\n       || TREE_CODE (expry) == CONST_DECL)\n     return 1;\n \n+  /* If one decl is known to be a function or label in a function and\n+     the other is some kind of data, they can't overlap.  */\n+  if ((TREE_CODE (exprx) == FUNCTION_DECL\n+       || TREE_CODE (exprx) == LABEL_DECL)\n+      != (TREE_CODE (expry) == FUNCTION_DECL\n+\t  || TREE_CODE (expry) == LABEL_DECL))\n+    return 1;\n+\n   /* If either of the decls doesn't have DECL_RTL set (e.g. marked as\n      living in multiple places), we can't tell anything.  Exception\n      are FUNCTION_DECLs for which we can create DECL_RTL on demand.  */\n@@ -2804,7 +2812,7 @@ nonoverlapping_memrefs_p (const_rtx x, const_rtx y, bool loop_invariant)\n \n   /* Offset based disambiguation not appropriate for loop invariant */\n   if (loop_invariant)\n-    return 0;              \n+    return 0;\n \n   /* Offset based disambiguation is OK even if we do not know that the\n      declarations are necessarily different"}]}