{"sha": "78fd4c51f4d05692b35ec9be7162d2827f5e6ba5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzhmZDRjNTFmNGQwNTY5MmIzNWVjOWJlNzE2MmQyODI3ZjVlNmJhNQ==", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2017-11-01T02:14:19Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@gcc.gnu.org", "date": "2017-11-01T02:14:19Z"}, "message": "configure.ac (--enable-libssp): New.\n\n2017-10-31  Sandra Loosemore  <sandra@codesourcery.com>\n\n\tgcc/\n\t* configure.ac (--enable-libssp): New.\n\t(gcc_cv_libc_provides_ssp): Check for explicit setting before\n\ttrying to determine target-specific default.  Adjust indentation.\n\t* configure: Regenerated.\n\t* doc/install.texi (Configuration): Expand --disable-libssp\n\tdocumentation.\n\nFrom-SVN: r254288", "tree": {"sha": "8dc6795f8afa2acc7505e23e13aae2efa62bd51b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8dc6795f8afa2acc7505e23e13aae2efa62bd51b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "15e9b45a28d874bec85ef309d87cb1f1b222368c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15e9b45a28d874bec85ef309d87cb1f1b222368c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15e9b45a28d874bec85ef309d87cb1f1b222368c"}], "stats": {"total": 62, "additions": 54, "deletions": 8}, "files": [{"sha": "4c653194a4c8cb0711d839d536ec4dd15b80e6ad", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=78fd4c51f4d05692b35ec9be7162d2827f5e6ba5", "patch": "@@ -1,3 +1,12 @@\n+2017-10-31  Sandra Loosemore  <sandra@codesourcery.com>\n+\n+\t* configure.ac (--enable-libssp): New.\n+\t(gcc_cv_libc_provides_ssp): Check for explicit setting before\n+\ttrying to determine target-specific default.  Adjust indentation.\n+\t* configure: Regenerated.\n+\t* doc/install.texi (Configuration): Expand --disable-libssp\n+\tdocumentation.\n+\n 2017-10-31  Daniel Santos  <daniel.santos@pobox.com>\n \n \tconfig/i386/i386.c (ix86_expand_epilogue): Correct stack"}, {"sha": "c4313cce39fea60ca60526409bf6b43b1911a3bb", "filename": "gcc/configure", "status": "modified", "additions": 23, "deletions": 3, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=78fd4c51f4d05692b35ec9be7162d2827f5e6ba5", "patch": "@@ -942,6 +942,7 @@ enable_fix_cortex_a53_843419\n with_glibc_version\n enable_gnu_unique_object\n enable_linker_build_id\n+enable_libssp\n enable_default_ssp\n with_long_double_128\n with_gc\n@@ -1682,6 +1683,7 @@ Optional Features:\n                           extension on glibc systems\n   --enable-linker-build-id\n                           compiler will always pass --build-id to linker\n+  --enable-libssp         enable linking against libssp\n   --enable-default-ssp    enable Stack Smashing Protection as default\n   --enable-maintainer-mode\n                           enable make rules and dependencies not useful (and\n@@ -18440,7 +18442,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 18443 \"configure\"\n+#line 18445 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -18546,7 +18548,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 18549 \"configure\"\n+#line 18551 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -29040,13 +29042,30 @@ $as_echo \"#define HAVE_SOLARIS_CRTS 1\" >>confdefs.h\n \n fi\n \n+# Check whether --enable-libssp was given.\n+if test \"${enable_libssp+set}\" = set; then :\n+  enableval=$enable_libssp; case \"${enableval}\" in\n+  yes|no)\n+    ;;\n+  *)\n+    as_fn_error \"unknown libssp setting $enableval\" \"$LINENO\" 5\n+    ;;\n+esac\n+fi\n+\n+\n # Test for stack protector support in target C library.\n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking __stack_chk_fail in target C library\" >&5\n $as_echo_n \"checking __stack_chk_fail in target C library... \" >&6; }\n if test \"${gcc_cv_libc_provides_ssp+set}\" = set; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_libc_provides_ssp=no\n+  if test \"x$enable_libssp\" = \"xno\"; then\n+    gcc_cv_libc_provides_ssp=yes\n+  elif test \"x$enable_libssp\" = \"xyes\"; then\n+    gcc_cv_libc_provides_ssp=no\n+  else\n     case \"$target\" in\n        *-*-musl*)\n \t # All versions of musl provide stack protector\n@@ -29094,8 +29113,9 @@ else\n fi\n \n         ;;\n-  *) gcc_cv_libc_provides_ssp=no ;;\n+       *) gcc_cv_libc_provides_ssp=no ;;\n     esac\n+  fi\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gcc_cv_libc_provides_ssp\" >&5\n $as_echo \"$gcc_cv_libc_provides_ssp\" >&6; }"}, {"sha": "08685b846a082d749700da35d61e1f268a8cfcc9", "filename": "gcc/configure.ac", "status": "modified", "additions": 20, "deletions": 4, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=78fd4c51f4d05692b35ec9be7162d2827f5e6ba5", "patch": "@@ -5756,10 +5756,25 @@ if test x$gcc_cv_solaris_crts = xyes; then\n   \t    [Define if the system-provided CRTs are present on Solaris.])\n fi\n \n+AC_ARG_ENABLE(libssp,\n+[AS_HELP_STRING([--enable-libssp], [enable linking against libssp])],\n+[case \"${enableval}\" in\n+  yes|no)\n+    ;;\n+  *)\n+    AC_MSG_ERROR([unknown libssp setting $enableval])\n+    ;;\n+esac], [])\n+\n # Test for stack protector support in target C library.\n AC_CACHE_CHECK(__stack_chk_fail in target C library,\n-      gcc_cv_libc_provides_ssp,\n-      [gcc_cv_libc_provides_ssp=no\n+  gcc_cv_libc_provides_ssp,\n+  [gcc_cv_libc_provides_ssp=no\n+  if test \"x$enable_libssp\" = \"xno\"; then\n+    gcc_cv_libc_provides_ssp=yes\n+  elif test \"x$enable_libssp\" = \"xyes\"; then\n+    gcc_cv_libc_provides_ssp=no\n+  else\n     case \"$target\" in\n        *-*-musl*)\n \t # All versions of musl provide stack protector\n@@ -5796,8 +5811,9 @@ AC_CACHE_CHECK(__stack_chk_fail in target C library,\n \t AC_CHECK_FUNC(__stack_chk_fail,[gcc_cv_libc_provides_ssp=yes],\n            [echo \"no __stack_chk_fail on this target\"])\n         ;;\n-  *) gcc_cv_libc_provides_ssp=no ;;\n-    esac])\n+       *) gcc_cv_libc_provides_ssp=no ;;\n+    esac\n+  fi])\n \n if test x$gcc_cv_libc_provides_ssp = xyes; then\n   AC_DEFINE(TARGET_LIBC_PROVIDES_SSP, 1,"}, {"sha": "b10c94af5ca1b5ea68f59e809146f8760ccff43a", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78fd4c51f4d05692b35ec9be7162d2827f5e6ba5/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=78fd4c51f4d05692b35ec9be7162d2827f5e6ba5", "patch": "@@ -1640,7 +1640,8 @@ not be built.\n \n @item --disable-libssp\n Specify that the run-time libraries for stack smashing protection\n-should not be built.\n+should not be built or linked against.  On many targets library support\n+is provided by the C library instead.\n \n @item --disable-libquadmath\n Specify that the GCC quad-precision math library should not be built."}]}