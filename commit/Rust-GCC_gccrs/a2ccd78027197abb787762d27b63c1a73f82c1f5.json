{"sha": "a2ccd78027197abb787762d27b63c1a73f82c1f5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTJjY2Q3ODAyNzE5N2FiYjc4Nzc2MmQyN2I2M2MxYTczZjgyYzFmNQ==", "commit": {"author": {"name": "Nagaraju Mekala", "email": "nmekala@xilinx.com", "date": "2020-04-04T09:10:08Z"}, "committer": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2020-04-05T16:13:37Z"}, "message": "Microblaze: Fixed missing save of r18 in fast_interrupt. Register 18 is used as a clobber register, and must be stored when entering a fast_interrupt. Before this fix, register 18 was only saved if it was used directly in the interrupt function.\n\n    However, if the fast_interrupt function called a function that used\n    r18, the register would not be saved, and thus be mangled\n    upon returning from the interrupt.\n\n\t* config/microblaze/microblaze.c (microblaze_must_save_register): Check\n\tfor fast_interrupt.", "tree": {"sha": "a51d23da09eb1834732ef427d2fe343d97665f1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a51d23da09eb1834732ef427d2fe343d97665f1e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a2ccd78027197abb787762d27b63c1a73f82c1f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2ccd78027197abb787762d27b63c1a73f82c1f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2ccd78027197abb787762d27b63c1a73f82c1f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2ccd78027197abb787762d27b63c1a73f82c1f5/comments", "author": {"login": "Nagaraju22", "id": 7566423, "node_id": "MDQ6VXNlcjc1NjY0MjM=", "avatar_url": "https://avatars.githubusercontent.com/u/7566423?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nagaraju22", "html_url": "https://github.com/Nagaraju22", "followers_url": "https://api.github.com/users/Nagaraju22/followers", "following_url": "https://api.github.com/users/Nagaraju22/following{/other_user}", "gists_url": "https://api.github.com/users/Nagaraju22/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nagaraju22/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nagaraju22/subscriptions", "organizations_url": "https://api.github.com/users/Nagaraju22/orgs", "repos_url": "https://api.github.com/users/Nagaraju22/repos", "events_url": "https://api.github.com/users/Nagaraju22/events{/privacy}", "received_events_url": "https://api.github.com/users/Nagaraju22/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "971c3d0ea28fda1e764c6f47e0d901418adddb93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/971c3d0ea28fda1e764c6f47e0d901418adddb93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/971c3d0ea28fda1e764c6f47e0d901418adddb93"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "0ce457b734752a1e4eb10e13a8fe7be0edbe0532", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2ccd78027197abb787762d27b63c1a73f82c1f5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2ccd78027197abb787762d27b63c1a73f82c1f5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a2ccd78027197abb787762d27b63c1a73f82c1f5", "patch": "@@ -1,9 +1,9 @@\n 2020-04-05 Nagaraju Mekala <nmekala@xilix.com>\n-    \n-        * gcc/config/microblaze/microblaze.md (trap): Update output pattern.\n \n-        * gcc/testsuite/gcc.target/microblaze/others/builtin-trap.c\n-        (dg-final): update in the scan-assembler instruction\n+\t* config/microblaze/microblaze.c (microblaze_must_save_register): Check\n+\tfor fast_interrupt.\n+ \n+\t* config/microblaze/microblaze.md (trap): Update output pattern.\n \n 2020-04-04  Hannes Domani  <ssbssa@yahoo.de>\n \t    Jakub Jelinek  <jakub@redhat.com>"}, {"sha": "a0f81b71391ef4711a1324a0461f43c8dd04f0bf", "filename": "gcc/config/microblaze/microblaze.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2ccd78027197abb787762d27b63c1a73f82c1f5/gcc%2Fconfig%2Fmicroblaze%2Fmicroblaze.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2ccd78027197abb787762d27b63c1a73f82c1f5/gcc%2Fconfig%2Fmicroblaze%2Fmicroblaze.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmicroblaze%2Fmicroblaze.c?ref=a2ccd78027197abb787762d27b63c1a73f82c1f5", "patch": "@@ -2035,7 +2035,7 @@ microblaze_must_save_register (int regno)\n     {\n       if (df_regs_ever_live_p (regno) \n \t  || regno == MB_ABI_MSR_SAVE_REG\n-\t  || (interrupt_handler\n+\t  || ((interrupt_handler || fast_interrupt)\n               && (regno == MB_ABI_ASM_TEMP_REGNUM\n \t          || regno == MB_ABI_EXCEPTION_RETURN_ADDR_REGNUM)))\n \treturn 1;"}]}