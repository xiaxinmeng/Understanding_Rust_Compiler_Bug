{"sha": "8872df353884fec6d7ff0e8bf8eee356439ec8d8", "node_id": "C_kwDOANBUbNoAKDg4NzJkZjM1Mzg4NGZlYzZkN2ZmMGU4YmY4ZWVlMzU2NDM5ZWM4ZDg", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-12-06T10:39:51Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-12-06T10:39:51Z"}, "message": "testsuite: Use -mnofpu for rx-*-* in ieee testsuite [PR107046]\n\nadd_options_for_ieee has:\n    if { [istarget alpha*-*-*]\n         || [istarget sh*-*-*] } {\n       return \"$flags -mieee\"\n    }\n    if { [istarget rx-*-*] } {\n       return \"$flags -mnofpu\"\n    }\nbut ieee.exp doesn't use add_options_for_ieee, instead it has:\nif { [istarget \"alpha*-*-*\"]\n     || [istarget \"sh*-*-*\"] } then {\n  lappend additional_flags \"-mieee\"\n}\namong other things (plus -ffloat-store on some arches etc.).\n\nThe following patch adds the rx -mnofpu similarly in the hope\nof fixing ieee.exp FAILs on rx.\n\nPreapproved in the PR by Jeff, committed to trunk.\n\n2022-12-06  Jakub Jelinek  <jakub@redhat.com>\n\n\tPR testsuite/107046\n\t* gcc.c-torture/execute/ieee/ieee.exp: For rx-*-* append\n\t-mnofpu.", "tree": {"sha": "32724a841a4fc61383445fc1f7648523408a84d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/32724a841a4fc61383445fc1f7648523408a84d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8872df353884fec6d7ff0e8bf8eee356439ec8d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8872df353884fec6d7ff0e8bf8eee356439ec8d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8872df353884fec6d7ff0e8bf8eee356439ec8d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8872df353884fec6d7ff0e8bf8eee356439ec8d8/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "926f5059bb8d295e2b68cea7c9af53606946eb1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/926f5059bb8d295e2b68cea7c9af53606946eb1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/926f5059bb8d295e2b68cea7c9af53606946eb1a"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "fda34a7f935439dfaa6a5b0895841579cf287e54", "filename": "gcc/testsuite/gcc.c-torture/execute/ieee/ieee.exp", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8872df353884fec6d7ff0e8bf8eee356439ec8d8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fieee%2Fieee.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8872df353884fec6d7ff0e8bf8eee356439ec8d8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fieee%2Fieee.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fieee%2Fieee.exp?ref=8872df353884fec6d7ff0e8bf8eee356439ec8d8", "patch": "@@ -52,6 +52,9 @@ if { [istarget \"alpha*-*-*\"]\n      || [istarget \"sh*-*-*\"] } then {\n   lappend additional_flags \"-mieee\"\n }\n+if [istarget rx-*-*] then {\n+  lappend additional_flags \"-mnofpu\"\n+}\n \n if { ![check_effective_target_signal] } {\n     lappend additional_flags \"-DSIGNAL_SUPPRESS\""}]}