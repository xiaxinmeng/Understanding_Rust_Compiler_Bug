{"sha": "f2e70da638b4f6ba868ff07ab2123cad4fd9fd02", "node_id": "C_kwDOANBUbNoAKGYyZTcwZGE2MzhiNGY2YmE4NjhmZjA3YWIyMTIzY2FkNGZkOWZkMDI", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2023-03-22T13:01:07Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2023-03-22T17:48:20Z"}, "message": "libstdc++: Remove std::formatter<const charT[N], charT> specialization\n\nThis was approved in Issaquah as LWG 3833.\n\nlibstdc++-v3/ChangeLog:\n\n\t* include/std/format (formatter<const charT[N], charT>): Do not\n\tdefine partial speclialization, as per LWG 3833.\n\t* testsuite/std/format/formatter/requirements.cc: Check it.", "tree": {"sha": "bcbe7aeb447b374969dcf1f9cc3f6b80f29e8cb4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bcbe7aeb447b374969dcf1f9cc3f6b80f29e8cb4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f2e70da638b4f6ba868ff07ab2123cad4fd9fd02", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2e70da638b4f6ba868ff07ab2123cad4fd9fd02", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2e70da638b4f6ba868ff07ab2123cad4fd9fd02", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2e70da638b4f6ba868ff07ab2123cad4fd9fd02/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "924d990425d29ef39f3faac49d4a3772e4302c96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/924d990425d29ef39f3faac49d4a3772e4302c96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/924d990425d29ef39f3faac49d4a3772e4302c96"}], "stats": {"total": 31, "additions": 9, "deletions": 22}, "files": [{"sha": "72b6b450ad162f53d2304f61275bc4ee19e0a776", "filename": "libstdc++-v3/include/std/format", "status": "modified", "additions": 0, "deletions": 22, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2e70da638b4f6ba868ff07ab2123cad4fd9fd02/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fformat", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2e70da638b4f6ba868ff07ab2123cad4fd9fd02/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fformat", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fformat?ref=f2e70da638b4f6ba868ff07ab2123cad4fd9fd02", "patch": "@@ -1882,28 +1882,6 @@ namespace __format\n       __format::__formatter_str<_CharT> _M_f;\n     };\n \n-  template<__format::__char _CharT, size_t _Nm>\n-    struct formatter<const _CharT[_Nm], _CharT>\n-    {\n-      formatter() = default;\n-\n-      [[__gnu__::__always_inline__]]\n-      constexpr typename basic_format_parse_context<_CharT>::iterator\n-      parse(basic_format_parse_context<_CharT>& __pc)\n-      { return _M_f.parse(__pc); }\n-\n-      template<typename _Out>\n-\ttypename basic_format_context<_Out, _CharT>::iterator\n-\tformat(const _CharT (&__u)[_Nm],\n-\t       basic_format_context<_Out, _CharT>& __fc) const\n-\t{ return _M_f.format({__u, _Nm}, __fc); }\n-\n-      constexpr void set_debug_format() noexcept { _M_f.set_debug_format(); }\n-\n-    private:\n-      __format::__formatter_str<_CharT> _M_f;\n-    };\n-\n   template<typename _Traits, typename _Alloc>\n     struct formatter<basic_string<char, _Traits, _Alloc>, char>\n     {"}, {"sha": "7d95f7fafe98456c43ac83337133312070e73b39", "filename": "libstdc++-v3/testsuite/std/format/formatter/requirements.cc", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2e70da638b4f6ba868ff07ab2123cad4fd9fd02/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Fformat%2Fformatter%2Frequirements.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2e70da638b4f6ba868ff07ab2123cad4fd9fd02/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Fformat%2Fformatter%2Frequirements.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Fformat%2Fformatter%2Frequirements.cc?ref=f2e70da638b4f6ba868ff07ab2123cad4fd9fd02", "patch": "@@ -51,6 +51,15 @@ test_specializations() // [format.formatter.spec]\n   static_assert( ! std::is_move_constructible_v<Ferr> );\n   static_assert( ! std::is_copy_assignable_v<Ferr> );\n   static_assert( ! std::is_move_assignable_v<Ferr> );\n+\n+  // LWG 3833. Remove specialization\n+  // template<size_t N> struct formatter<const charT[N], charT>\n+  using Farr = std::format_context::formatter_type<const char[1]>;\n+  static_assert( ! std::is_default_constructible_v<Farr> );\n+  static_assert( ! std::is_copy_constructible_v<Farr> );\n+  static_assert( ! std::is_move_constructible_v<Farr> );\n+  static_assert( ! std::is_copy_assignable_v<Farr> );\n+  static_assert( ! std::is_move_assignable_v<Farr> );\n }\n \n int main()"}]}