{"sha": "c1428b53621c229c7dc75a94a3e99248224b6e50", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzE0MjhiNTM2MjFjMjI5YzdkYzc1YTk0YTNlOTkyNDgyMjRiNmU1MA==", "commit": {"author": {"name": "Phil Edwards", "email": "pme@gcc.gnu.org", "date": "2000-12-01T20:55:44Z"}, "committer": {"name": "Phil Edwards", "email": "pme@gcc.gnu.org", "date": "2000-12-01T20:55:44Z"}, "message": "[multiple changes]\n\n2000-12-01  Phil Edwards  <pme@sources.redhat.com>\n\n\t* mkcheck.in:  Count static and shared results separately.\n\n2000-12-01  Loren J. Rittle  <ljrittle@acm.org>\n\n\t* mkcheck.in:  Correct typo.\n\nFrom-SVN: r37924", "tree": {"sha": "0e1d5c4ef5ed7498fbcfd0279396a97c90b1dacf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0e1d5c4ef5ed7498fbcfd0279396a97c90b1dacf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c1428b53621c229c7dc75a94a3e99248224b6e50", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1428b53621c229c7dc75a94a3e99248224b6e50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1428b53621c229c7dc75a94a3e99248224b6e50", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1428b53621c229c7dc75a94a3e99248224b6e50/comments", "author": null, "committer": null, "parents": [{"sha": "c4765d18f2b94c466136c40c34b6fc19202aba9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4765d18f2b94c466136c40c34b6fc19202aba9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4765d18f2b94c466136c40c34b6fc19202aba9c"}], "stats": {"total": 54, "additions": 42, "deletions": 12}, "files": [{"sha": "877cb9e43e2863880264d2c3431c1acec6eb957c", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1428b53621c229c7dc75a94a3e99248224b6e50/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1428b53621c229c7dc75a94a3e99248224b6e50/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c1428b53621c229c7dc75a94a3e99248224b6e50", "patch": "@@ -1,3 +1,11 @@\n+2000-12-01  Phil Edwards  <pme@sources.redhat.com>\n+\n+\t* mkcheck.in:  Count static and shared results separately.\n+\n+2000-12-01  Loren J. Rittle  <ljrittle@acm.org>\n+\n+\t* mkcheck.in:  Correct typo.\n+\n 2000-12-01  Gabriel Dos Reis  <gdr@codesourcery.com>\n \n \t* src/cmath.cc: Remove."}, {"sha": "ca0b03cd0843270d6bd9fed7c0b07586182623c9", "filename": "libstdc++-v3/mkcheck.in", "status": "modified", "additions": 34, "deletions": 12, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1428b53621c229c7dc75a94a3e99248224b6e50/libstdc%2B%2B-v3%2Fmkcheck.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1428b53621c229c7dc75a94a3e99248224b6e50/libstdc%2B%2B-v3%2Fmkcheck.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fmkcheck.in?ref=c1428b53621c229c7dc75a94a3e99248224b6e50", "patch": "@@ -57,11 +57,11 @@ BUILD_DIR=$1; SRC_DIR=$2; PREFIX_DIR=$3; LTCXX=$4; LIBS=$5; LTEXE=$6; CXX=$7; CX\n IFS=$saved_ifs\n \n # specific libtool flag(s) to force the use of shared libraries, if any\n-SH_FLAGS=\n+SH_FLAG=\n \n # specific libtool flag(s) to force the use of static libraries, if any\n-ST_FLAGS=\"-static\"\n-#ST_FLAGS=\"-all-static\"\n+ST_FLAG=\"-static\"\n+#ST_FLAG=\"-all-static\"\n \n # Set up the testing directory, which should be in a directory called\n # \"testsuite\" in the root level of the build directory.\n@@ -144,14 +144,20 @@ echo \"text == size of the executable text section\" >> $RESULTS_FILE\n echo \"data == size of the executable data section\" >> $RESULTS_FILE\n echo \"total == size of the executable\" >> $RESULTS_FILE\n echo \"\" >> $RESULTS_FILE\n-echo \"(First static, then shared.)\" >> $RESULTS_FILE\n \n echo \"p\" | awk '{printf(\"%s \", $1)}' >> $RESULTS_FILE\n echo \"ctime\" \"etime\" | awk '{printf(\"%s\\t%s\\t\", $1, $2)}' >> $RESULTS_FILE\n echo \"text\" \"data\" | awk '{printf(\"%s\\t%s\\t\", $1, $2)}' >> $RESULTS_FILE\n echo \"total\" \"name\" | awk '{printf(\"%s\\t%s\\t\", $1, $2)}' >> $RESULTS_FILE\n echo \"\" >> $RESULTS_FILE\n \n+# Counters.  These could be members of an array, but they'd all have to\n+# become individuals anyhow if we ever change this script to super-portable sh.\n+shared_pass=0\n+shared_fail=0\n+static_pass=0\n+static_fail=0\n+\n \n #\n # 2.5:  support functions\n@@ -355,16 +361,32 @@ test_file()\n         # the file did not compile/link.\n         printf \"\\n\" >> $LOG_FILE\n         `cat compile.out >> $LOG_FILE` \n-\trm compile.out\n+        rm compile.out\n         RESULT=\"-b\"\n         TEXT=\"0\"\n         DATA=\"0\"\n         SIZE=\"0\"\n     fi\n \n+    # update the counters\n+    if test \"$RESULT\" = \"+\" ; then\n+        if test x\"$S_FLAG\" = x\"$ST_FLAG\"; then\n+            static_pass=`expr $static_pass + 1`\n+        else\n+            shared_pass=`expr $shared_pass + 1`\n+        fi\n+    else\n+        if test x\"$S_FLAG\" = x\"$ST_FLAG\"; then\n+            static_fail=`expr $static_fail + 1`\n+        else\n+            shared_fail=`expr $shared_fail + 1`\n+        fi\n+    fi\n+\n     printf \"%s\\t\" \"$RESULT\"\n-    printf \"%-2s %d\\t%.3f\\t%s\\t%s\\t%s\\t%s\\n\"   \\\n-        \"$RESULT\" $C_TIME $E_TIME $TEXT $DATA $SIZE $NAME >> $RESULTS_FILE\n+    printf \"%-2s %d\\t%.3f\\t%s\\t%s\\t%s\\t%s %s\\n\"   \\\n+        \"$RESULT\" $C_TIME $E_TIME $TEXT $DATA $SIZE $NAME \"$S_FLAG\"    \\\n+        >> $RESULTS_FILE\n }\n \n setup_size_command\n@@ -383,13 +405,13 @@ do\n     SH_NAME=\"`echo $PRE_NAME | sed 's/cc$/sh-exe/'`\"\n \n     if test @enable_static@ = yes; then\n-        test_file $NAME $ST_NAME $ST_FLAG \n+        test_file $NAME $ST_NAME \"$ST_FLAG\"\n     else\n         printf \"x\\t\"\n         printf \"static skipped\\n\" >> $RESULTS_FILE\n     fi\n     if test @enable_shared@ = yes; then\n-        test_file $NAME $SH_NAME $SH_FLAG \n+        test_file $NAME $SH_NAME \"$SH_FLAG\"\n     else\n         printf \"x\\t\"\n         printf \"shared skipped\\n\" >> $RESULTS_FILE\n@@ -405,9 +427,9 @@ TEST_TIME_END=$($TIMER_COMMAND)\n # 4: summary\n #\n # grep can count faster than we can...\n-total_failures=$(egrep -c \"^\\-\" $RESULTS_FILE)\n-total_successes=$(egrep -c \"^\\+\" $RESULTS_FILE)\n-resultstext=\"pass/fail results:  ${total_successes}/${total_failures}\"\n+total_failures=`expr ${shared_fail} + ${static_fail}`\n+total_successes=`expr ${shared_pass} + ${static_pass}`\n+resultstext=\"pass/fail results:  ${shared_pass}/${shared_fail} shared + ${static_pass}/${static_fail} static = ${total_successes}/${total_failures} total\"\n if [ $total_failures -eq 0 ]; then\n     resultstext=\"${resultstext}, WIN WIN\"\n fi"}]}