{"sha": "c10166c437ce15a119b663ac153a6bbcddb1ce84", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzEwMTY2YzQzN2NlMTVhMTE5YjY2M2FjMTUzYTZiYmNkZGIxY2U4NA==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2005-05-26T05:51:22Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2005-05-26T05:51:22Z"}, "message": "re PR middle-end/21709 (ICE on compile-time complex NaN)\n\n\n\tPR middle-end/21709\n\t* fold-const.c (const_binop): Check for division by zero during\n\tcomplex division.\n\n\t* gcc.dg/pr21709-1.c: New test case.\n\nFrom-SVN: r100188", "tree": {"sha": "f1a62da9b426bbca532d566171554a727730161b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f1a62da9b426bbca532d566171554a727730161b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c10166c437ce15a119b663ac153a6bbcddb1ce84", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c10166c437ce15a119b663ac153a6bbcddb1ce84", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c10166c437ce15a119b663ac153a6bbcddb1ce84", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c10166c437ce15a119b663ac153a6bbcddb1ce84/comments", "author": null, "committer": null, "parents": [{"sha": "67730e237530f73a8ac3ff9ea35d7a6438407cd2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67730e237530f73a8ac3ff9ea35d7a6438407cd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67730e237530f73a8ac3ff9ea35d7a6438407cd2"}], "stats": {"total": 62, "additions": 41, "deletions": 21}, "files": [{"sha": "6d9e69f5c1923683f9906f827ce79227bed1f0b4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c10166c437ce15a119b663ac153a6bbcddb1ce84/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c10166c437ce15a119b663ac153a6bbcddb1ce84/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c10166c437ce15a119b663ac153a6bbcddb1ce84", "patch": "@@ -1,3 +1,9 @@\n+2005-05-25  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR middle-end/21709\n+\t* fold-const.c (const_binop): Check for division by zero during\n+\tcomplex division.\n+\n 2005-05-26  Ian Lance Taylor  <ian@airs.com>\n \n \t* reload1.c (verify_initial_elim_offsets): Add braces to avoid"}, {"sha": "0d5f4ebf2b17fc4628bdfd2bc24938e61980c996", "filename": "gcc/fold-const.c", "status": "modified", "additions": 24, "deletions": 21, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c10166c437ce15a119b663ac153a6bbcddb1ce84/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c10166c437ce15a119b663ac153a6bbcddb1ce84/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=c10166c437ce15a119b663ac153a6bbcddb1ce84", "patch": "@@ -1600,33 +1600,36 @@ const_binop (enum tree_code code, tree arg1, tree arg2, int notrunc)\n \n \tcase RDIV_EXPR:\n \t  {\n+\t    tree t1, t2, real, imag;\n \t    tree magsquared\n \t      = const_binop (PLUS_EXPR,\n \t\t\t     const_binop (MULT_EXPR, r2, r2, notrunc),\n \t\t\t     const_binop (MULT_EXPR, i2, i2, notrunc),\n \t\t\t     notrunc);\n \n-\t    t = build_complex (type,\n-\t\t\t       const_binop\n-\t\t\t       (INTEGRAL_TYPE_P (TREE_TYPE (r1))\n-\t\t\t\t? TRUNC_DIV_EXPR : RDIV_EXPR,\n-\t\t\t\tconst_binop (PLUS_EXPR,\n-\t\t\t\t\t     const_binop (MULT_EXPR, r1, r2,\n-\t\t\t\t\t\t\t  notrunc),\n-\t\t\t\t\t     const_binop (MULT_EXPR, i1, i2,\n-\t\t\t\t\t\t\t  notrunc),\n-\t\t\t\t\t     notrunc),\n-\t\t\t\tmagsquared, notrunc),\n-\t\t\t       const_binop\n-\t\t\t       (INTEGRAL_TYPE_P (TREE_TYPE (r1))\n-\t\t\t\t? TRUNC_DIV_EXPR : RDIV_EXPR,\n-\t\t\t\tconst_binop (MINUS_EXPR,\n-\t\t\t\t\t     const_binop (MULT_EXPR, i1, r2,\n-\t\t\t\t\t\t\t  notrunc),\n-\t\t\t\t\t     const_binop (MULT_EXPR, r1, i2,\n-\t\t\t\t\t\t\t  notrunc),\n-\t\t\t\t\t     notrunc),\n-\t\t\t\tmagsquared, notrunc));\n+\t    t1 = const_binop (PLUS_EXPR,\n+\t\t\t      const_binop (MULT_EXPR, r1, r2, notrunc),\n+\t\t\t      const_binop (MULT_EXPR, i1, i2, notrunc),\n+\t\t\t      notrunc);\n+\t    t2 = const_binop (MINUS_EXPR,\n+\t\t\t      const_binop (MULT_EXPR, i1, r2, notrunc),\n+\t\t\t      const_binop (MULT_EXPR, r1, i2, notrunc),\n+\t\t\t      notrunc);\n+\n+\t    if (INTEGRAL_TYPE_P (TREE_TYPE (r1)))\n+\t      {\n+\t\treal = const_binop (TRUNC_DIV_EXPR, t1, magsquared, notrunc);\n+\t\timag = const_binop (TRUNC_DIV_EXPR, t2, magsquared, notrunc);\n+\t      }\n+\t    else\n+\t      {\n+\t\treal = const_binop (RDIV_EXPR, t1, magsquared, notrunc);\n+\t\timag = const_binop (RDIV_EXPR, t2, magsquared, notrunc);\n+\t\tif (!real || !imag)\n+\t\t  return NULL_TREE;\n+\t      }\n+\n+\t    t = build_complex (type, real, imag);\n \t  }\n \t  break;\n "}, {"sha": "9f2f537a924be53699304fb334fc71c4ee007ef8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c10166c437ce15a119b663ac153a6bbcddb1ce84/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c10166c437ce15a119b663ac153a6bbcddb1ce84/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c10166c437ce15a119b663ac153a6bbcddb1ce84", "patch": "@@ -1,3 +1,8 @@\n+2005-05-25  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR middle-end/21709\n+\t* gcc.dg/pr21709-1.c: New test case.\n+\n 2005-05-25  Ziemowit Laski  <zlaski@apple.com>\n \t    Mike Stump  <mrs@apple.com>\n "}, {"sha": "0d6f20f3260bc7d7f783c0a22b7b106593ee3265", "filename": "gcc/testsuite/gcc.dg/pr21709-1.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c10166c437ce15a119b663ac153a6bbcddb1ce84/gcc%2Ftestsuite%2Fgcc.dg%2Fpr21709-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c10166c437ce15a119b663ac153a6bbcddb1ce84/gcc%2Ftestsuite%2Fgcc.dg%2Fpr21709-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr21709-1.c?ref=c10166c437ce15a119b663ac153a6bbcddb1ce84", "patch": "@@ -0,0 +1,6 @@\n+/* PR middle-end/21709 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+double _Complex f(void) { return 1.0iF / 0.0; }\n+"}]}