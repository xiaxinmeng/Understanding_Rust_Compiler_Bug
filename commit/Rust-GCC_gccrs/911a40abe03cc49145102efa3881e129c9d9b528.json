{"sha": "911a40abe03cc49145102efa3881e129c9d9b528", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTExYTQwYWJlMDNjYzQ5MTQ1MTAyZWZhMzg4MWUxMjljOWQ5YjUyOA==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-11-28T05:36:07Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-11-28T05:36:07Z"}, "message": "re PR fortran/20880 (USE association of procedure's own interface)\n\n2006-11-28  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/20880\n\t* resolve.c (resolve_fl_procedure): Error if procedure is\n\tambiguous modified to require attr.referenced.\n\n2006-11-28  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/20880\n\t* gfortran.dg/interface_3.f90: Modify errors.\n\nFrom-SVN: r119272", "tree": {"sha": "f84fbfbcbc1d745269318450cc377786650ce509", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f84fbfbcbc1d745269318450cc377786650ce509"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/911a40abe03cc49145102efa3881e129c9d9b528", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/911a40abe03cc49145102efa3881e129c9d9b528", "html_url": "https://github.com/Rust-GCC/gccrs/commit/911a40abe03cc49145102efa3881e129c9d9b528", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/911a40abe03cc49145102efa3881e129c9d9b528/comments", "author": null, "committer": null, "parents": [{"sha": "b93029150149dce2e8d2d3948b5e8d7fbd14c26e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b93029150149dce2e8d2d3948b5e8d7fbd14c26e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b93029150149dce2e8d2d3948b5e8d7fbd14c26e"}], "stats": {"total": 45, "additions": 41, "deletions": 4}, "files": [{"sha": "1db60367918655ba12c58f72e20e217e74fd2265", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/911a40abe03cc49145102efa3881e129c9d9b528/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/911a40abe03cc49145102efa3881e129c9d9b528/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=911a40abe03cc49145102efa3881e129c9d9b528", "patch": "@@ -1,3 +1,9 @@\n+2006-11-28  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/20880\n+\t* resolve.c (resolve_fl_procedure): Error if procedure is\n+\tambiguous modified to require attr.referenced.\n+\n 2006-11-26  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n \n \tPR fortran/29892"}, {"sha": "fd544c9a33bba0fce17b314cbc57abdcc471ddf7", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/911a40abe03cc49145102efa3881e129c9d9b528/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/911a40abe03cc49145102efa3881e129c9d9b528/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=911a40abe03cc49145102efa3881e129c9d9b528", "patch": "@@ -5523,7 +5523,9 @@ resolve_fl_procedure (gfc_symbol *sym, int mp_flag)\n     return FAILURE;\n \n   st = gfc_find_symtree (gfc_current_ns->sym_root, sym->name);\n-  if (st && st->ambiguous && !sym->attr.generic)\n+  if (st && st->ambiguous\n+\t && sym->attr.referenced\n+\t && !sym->attr.generic)\n     {\n       gfc_error (\"Procedure %s at %L is ambiguous\",\n \t\t sym->name, &sym->declared_at);"}, {"sha": "89b0464f272349416ea8ddc36361d76996eaed11", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/911a40abe03cc49145102efa3881e129c9d9b528/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/911a40abe03cc49145102efa3881e129c9d9b528/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=911a40abe03cc49145102efa3881e129c9d9b528", "patch": "@@ -1,3 +1,8 @@\n+2006-11-28  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/20880\n+\t* gfortran.dg/interface_3.f90: Modify errors.\n+\n 2006-11-28  Ben Elliston  <bje@au.ibm.com>\n \n \t* lib/gcc-defs.exp (${tool}_check_compile): xfail test cases that"}, {"sha": "ecc7c4fa9e38b3bfd2c257ef80f7463776a0be78", "filename": "gcc/testsuite/gfortran.dg/interface_3.f90", "status": "modified", "additions": 27, "deletions": 3, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/911a40abe03cc49145102efa3881e129c9d9b528/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/911a40abe03cc49145102efa3881e129c9d9b528/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_3.f90?ref=911a40abe03cc49145102efa3881e129c9d9b528", "patch": "@@ -18,14 +18,25 @@ function my_fun (a)\n end interface\n end module\n \n-! This is the original PR\n-subroutine my_sub (a) ! { dg-error \"is ambiguous\" }\n+module test_mod2\n+interface\n+  function my_fun (a)\n+    real a, my_fun\n+  end function\n+end interface\n+end module\n+\n+\n+! This is the original PR, excepting that the error requires the symbol\n+! to be referenced.\n+subroutine my_sub (a)\n   use test_mod\n   real a\n+  call my_sub (a)  ! { dg-error \"ambiguous reference\" }\n   print *, a\n end subroutine\n \n-integer function my_fun (a) ! { dg-error \"is ambiguous\" }\n+integer function my_fun (a)\n   use test_mod\n   real a\n   print *, a\n@@ -42,4 +53,17 @@ subroutine thy_sub (a) ! { dg-error \"enclosing procedure\" }\n   real a\n   print *, a\n end subroutine\n+\n+subroutine thy_fun (a)\n+  use test_mod\n+  use test_mod2  ! OK because there is no reference to my_fun\n+  print *, a\n+end subroutine thy_fun\n+\n+subroutine his_fun (a)\n+  use test_mod\n+  use test_mod2\n+  print *, my_fun (a)  ! { dg-error \"ambiguous reference\" }\n+end subroutine his_fun\n+\n ! { dg-final { cleanup-modules \"test_mod\" } }"}]}