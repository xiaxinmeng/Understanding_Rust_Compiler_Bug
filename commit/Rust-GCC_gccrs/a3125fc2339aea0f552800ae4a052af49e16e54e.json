{"sha": "a3125fc2339aea0f552800ae4a052af49e16e54e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTMxMjVmYzIzMzlhZWEwZjU1MjgwMGFlNGEwNTJhZjQ5ZTE2ZTU0ZQ==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2014-09-26T13:07:42Z"}, "committer": {"name": "Christophe Lyon", "email": "clyon@gcc.gnu.org", "date": "2014-09-26T13:07:42Z"}, "message": "[AArch64] Enable Address Sanitizer.\n\n2014-09-26  Christophe Lyon  <christophe.lyon@linaro.org>\n\n\t[AArch64] Enable Address Sanitizer.\n\n\tgcc/\n\t* config/aarch64/aarch64-linux.h (ASAN_CC1_SPEC): Define.\n        (CC1_SPEC): Define.\n        * config/aarch64/aarch64.c (aarch64_asan_shadow_offset): New function.\n        (TARGET_ASAN_SHADOW_OFFSET): Define.\n\n\tlibsanitzer/\n\t* configure.tgt: Enable build on aarch64*-linux.\n\nFrom-SVN: r215642", "tree": {"sha": "9fce4544423abd6254839964208ba2182026f2c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9fce4544423abd6254839964208ba2182026f2c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3125fc2339aea0f552800ae4a052af49e16e54e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3125fc2339aea0f552800ae4a052af49e16e54e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3125fc2339aea0f552800ae4a052af49e16e54e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3125fc2339aea0f552800ae4a052af49e16e54e/comments", "author": null, "committer": null, "parents": [{"sha": "bf898b300eea2cd87a1afcadd886c7ae3d593091", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf898b300eea2cd87a1afcadd886c7ae3d593091", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf898b300eea2cd87a1afcadd886c7ae3d593091"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "b00392374920b17bc8d83485520f0cb31a01c8b7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3125fc2339aea0f552800ae4a052af49e16e54e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3125fc2339aea0f552800ae4a052af49e16e54e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a3125fc2339aea0f552800ae4a052af49e16e54e", "patch": "@@ -1,3 +1,10 @@\n+2014-09-26  Christophe Lyon  <christophe.lyon@linaro.org>\n+\n+\t* config/aarch64/aarch64-linux.h (ASAN_CC1_SPEC): Define.\n+        (CC1_SPEC): Define.\n+        * config/aarch64/aarch64.c (aarch64_asan_shadow_offset): New function.\n+        (TARGET_ASAN_SHADOW_OFFSET): Define.\n+\n 2014-09-26  Martin Liska  <mliska@suse.cz>\n \n \t* cgraph.c (cgraph_node::release_body): New argument keep_arguments"}, {"sha": "3fbde9388058ba417cb8c351ef7de6459347943e", "filename": "gcc/config/aarch64/aarch64-linux.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3125fc2339aea0f552800ae4a052af49e16e54e/gcc%2Fconfig%2Faarch64%2Faarch64-linux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3125fc2339aea0f552800ae4a052af49e16e54e/gcc%2Fconfig%2Faarch64%2Faarch64-linux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-linux.h?ref=a3125fc2339aea0f552800ae4a052af49e16e54e", "patch": "@@ -23,6 +23,12 @@\n \n #define GLIBC_DYNAMIC_LINKER \"/lib/ld-linux-aarch64%{mbig-endian:_be}%{mabi=ilp32:_ilp32}.so.1\"\n \n+#undef  ASAN_CC1_SPEC\n+#define ASAN_CC1_SPEC \"%{%:sanitize(address):-funwind-tables}\"\n+\n+#undef  CC1_SPEC\n+#define CC1_SPEC GNU_USER_TARGET_CC1_SPEC ASAN_CC1_SPEC\n+\n #define CPP_SPEC \"%{pthread:-D_REENTRANT}\"\n \n #define LINUX_TARGET_LINK_SPEC  \"%{h*}\t\t\\"}, {"sha": "5144c35e29f67d3ee76883f22eb71a3daa880c81", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3125fc2339aea0f552800ae4a052af49e16e54e/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3125fc2339aea0f552800ae4a052af49e16e54e/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=a3125fc2339aea0f552800ae4a052af49e16e54e", "patch": "@@ -9777,6 +9777,14 @@ aarch64_expand_movmem (rtx *operands)\n   return true;\n }\n \n+/* Implement the TARGET_ASAN_SHADOW_OFFSET hook.  */\n+\n+static unsigned HOST_WIDE_INT\n+aarch64_asan_shadow_offset (void)\n+{\n+  return (HOST_WIDE_INT_1 << 36);\n+}\n+\n #undef TARGET_ADDRESS_COST\n #define TARGET_ADDRESS_COST aarch64_address_cost\n \n@@ -10023,6 +10031,9 @@ aarch64_expand_movmem (rtx *operands)\n #undef TARGET_CALL_FUSAGE_CONTAINS_NON_CALLEE_CLOBBERS\n #define TARGET_CALL_FUSAGE_CONTAINS_NON_CALLEE_CLOBBERS true\n \n+#undef TARGET_ASAN_SHADOW_OFFSET\n+#define TARGET_ASAN_SHADOW_OFFSET aarch64_asan_shadow_offset\n+\n struct gcc_target targetm = TARGET_INITIALIZER;\n \n #include \"gt-aarch64.h\""}, {"sha": "eaabf43f7ccbc637cf8bd3ad36b9ee5a7e8776e7", "filename": "libsanitizer/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3125fc2339aea0f552800ae4a052af49e16e54e/libsanitizer%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3125fc2339aea0f552800ae4a052af49e16e54e/libsanitizer%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2FChangeLog?ref=a3125fc2339aea0f552800ae4a052af49e16e54e", "patch": "@@ -1,3 +1,7 @@\n+2014-09-26  Christophe Lyon  <christophe.lyon@linaro.org>\n+\n+\t* configure.tgt: Enable build on aarch64*-linux.\n+\n 2014-09-19  Kostya Serebryany  <kcc@google.com>\n \n \t* All source files: Merge from upstream r218156."}, {"sha": "2c302ab64897b7e352f0d3c1164182d30c50e3d7", "filename": "libsanitizer/configure.tgt", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3125fc2339aea0f552800ae4a052af49e16e54e/libsanitizer%2Fconfigure.tgt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3125fc2339aea0f552800ae4a052af49e16e54e/libsanitizer%2Fconfigure.tgt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fconfigure.tgt?ref=a3125fc2339aea0f552800ae4a052af49e16e54e", "patch": "@@ -35,6 +35,8 @@ case \"${target}\" in\n \t;;\n   arm*-*-linux*)\n \t;;\n+  aarch64*-*-linux*)\n+\t;;\n   x86_64-*-darwin[1]* | i?86-*-darwin[1]*)\n \tTSAN_SUPPORTED=no\n \t;;"}]}