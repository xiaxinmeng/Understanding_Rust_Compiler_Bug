{"sha": "0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGU0YTBkZWYxZWZmMTNlNGI0MmY4NjY3ZjJiZTFiNWU0ZWZiYmZkYg==", "commit": {"author": {"name": "Kai Tietz", "email": "ktietz@redhat.com", "date": "2015-02-27T13:19:38Z"}, "committer": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2015-02-27T13:19:38Z"}, "message": "re PR libgcc/65038 ([regression 5] Unable to find ftw.h for libgcov-util.c)\n\n        PR target/65038\n        * config.in: Regenerated.\n        * configure: Likewise.\n        * configure.ac (AC_HEADER_STDC): Added explicit.\n        (AC_CHECK_HEADERS): Check for default headers  plus\n        for ftw.h header.\n        * libgcov-util.c (gcov_read_profile_dir): Disable use\n        of ftw-function, if header is not found.\n        (ftw_read_file): Likewise.\n\nFrom-SVN: r221059", "tree": {"sha": "0a95b69849b1ff2ca29b0fdccf3838f2234017c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0a95b69849b1ff2ca29b0fdccf3838f2234017c0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb/comments", "author": null, "committer": null, "parents": [{"sha": "0824d924898e0bef2e717716eef705d46103e390", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0824d924898e0bef2e717716eef705d46103e390", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0824d924898e0bef2e717716eef705d46103e390"}], "stats": {"total": 316, "additions": 316, "deletions": 0}, "files": [{"sha": "603dea868e454562acc26fdd0c26981edc3926b4", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb", "patch": "@@ -1,3 +1,15 @@\n+2015-02-27  Kai Tietz  <ktietz@redhat.com>\n+\n+\tPR target/65038\n+\t* config.in: Regenerated.\n+\t* configure: Likewise.\n+\t* configure.ac (AC_HEADER_STDC): Added explicit.\n+\t(AC_CHECK_HEADERS): Check for default headers  plus\n+\tfor ftw.h header.\n+\t* libgcov-util.c (gcov_read_profile_dir): Disable use\n+\tof ftw-function, if header is not found.\n+\t(ftw_read_file): Likewise.\n+\n 2015-02-23  Thomas Schwinge  <thomas@codesourcery.com>\n \n \tPR target/65181"}, {"sha": "57fdec1f508b3b0215af59e4d86bf3583159bb7d", "filename": "libgcc/config.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb/libgcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb/libgcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.in?ref=0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb", "patch": "@@ -3,6 +3,9 @@\n /* Define to 1 if the target assembler supports thread-local storage. */\n #undef HAVE_CC_TLS\n \n+/* Define to 1 if you have the <ftw.h> header file. */\n+#undef HAVE_FTW_H\n+\n /* Define if _Unwind_GetIPInfo is available. */\n #undef HAVE_GETIPINFO\n "}, {"sha": "a88259da325b2f9a559ee69d32cf80ca61761af5", "filename": "libgcc/configure", "status": "modified", "additions": 290, "deletions": 0, "changes": 290, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb/libgcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb/libgcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfigure?ref=0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb", "patch": "@@ -571,6 +571,8 @@ force_explicit_eh_registry\n fixed_point\n enable_decimal_float\n decimal_float\n+EGREP\n+GREP\n long_double_type_size\n double_type_size\n CPP\n@@ -1714,6 +1716,35 @@ rm -f conftest.val\n   return $ac_retval\n \n } # ac_fn_c_compute_int\n+\n+# ac_fn_c_check_header_preproc LINENO HEADER VAR\n+# ----------------------------------------------\n+# Tests whether HEADER is present, setting the cache variable VAR accordingly.\n+ac_fn_c_check_header_preproc ()\n+{\n+  as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $2\" >&5\n+$as_echo_n \"checking for $2... \" >&6; }\n+if { as_var=$3; eval \"test \\\"\\${$as_var+set}\\\" = set\"; }; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <$2>\n+_ACEOF\n+if ac_fn_c_try_cpp \"$LINENO\"; then :\n+  eval \"$3=yes\"\n+else\n+  eval \"$3=no\"\n+fi\n+rm -f conftest.err conftest.$ac_ext\n+fi\n+eval ac_res=\\$$3\n+\t       { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_res\" >&5\n+$as_echo \"$ac_res\" >&6; }\n+  eval $as_lineno_stack; test \"x$as_lineno_stack\" = x && { as_lineno=; unset as_lineno;}\n+\n+} # ac_fn_c_check_header_preproc\n cat >config.log <<_ACEOF\n This file contains any messages produced by compilers while\n running configure, to aid debugging if configure makes a mistake.\n@@ -4093,6 +4124,265 @@ as_fn_arith $ac_cv_sizeof_long_double \\* 8 && long_double_type_size=$as_val\n \n \n \n+\n+for ac_header in inttypes.h stdint.h stdlib.h ftw.h \\\n+\tunistd.h sys/stat.h sys/types.h \\\n+\tstring.h strings.h memory.h\n+do :\n+  as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n+ac_fn_c_check_header_preproc \"$LINENO\" \"$ac_header\" \"$as_ac_Header\"\n+eval as_val=\\$$as_ac_Header\n+   if test \"x$as_val\" = x\"\"yes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define `$as_echo \"HAVE_$ac_header\" | $as_tr_cpp` 1\n+_ACEOF\n+\n+fi\n+done\n+\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e\" >&5\n+$as_echo_n \"checking for grep that handles long lines and -e... \" >&6; }\n+if test \"${ac_cv_path_GREP+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  if test -z \"$GREP\"; then\n+  ac_path_GREP_found=false\n+  # Loop through the user's path and test for each of PROGNAME-LIST\n+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+    for ac_prog in grep ggrep; do\n+    for ac_exec_ext in '' $ac_executable_extensions; do\n+      ac_path_GREP=\"$as_dir/$ac_prog$ac_exec_ext\"\n+      { test -f \"$ac_path_GREP\" && $as_test_x \"$ac_path_GREP\"; } || continue\n+# Check for GNU ac_path_GREP and select it if it is found.\n+  # Check for GNU $ac_path_GREP\n+case `\"$ac_path_GREP\" --version 2>&1` in\n+*GNU*)\n+  ac_cv_path_GREP=\"$ac_path_GREP\" ac_path_GREP_found=:;;\n+*)\n+  ac_count=0\n+  $as_echo_n 0123456789 >\"conftest.in\"\n+  while :\n+  do\n+    cat \"conftest.in\" \"conftest.in\" >\"conftest.tmp\"\n+    mv \"conftest.tmp\" \"conftest.in\"\n+    cp \"conftest.in\" \"conftest.nl\"\n+    $as_echo 'GREP' >> \"conftest.nl\"\n+    \"$ac_path_GREP\" -e 'GREP$' -e '-(cannot match)-' < \"conftest.nl\" >\"conftest.out\" 2>/dev/null || break\n+    diff \"conftest.out\" \"conftest.nl\" >/dev/null 2>&1 || break\n+    as_fn_arith $ac_count + 1 && ac_count=$as_val\n+    if test $ac_count -gt ${ac_path_GREP_max-0}; then\n+      # Best one so far, save it but keep looking for a better one\n+      ac_cv_path_GREP=\"$ac_path_GREP\"\n+      ac_path_GREP_max=$ac_count\n+    fi\n+    # 10*(2^10) chars as input seems more than enough\n+    test $ac_count -gt 10 && break\n+  done\n+  rm -f conftest.in conftest.tmp conftest.nl conftest.out;;\n+esac\n+\n+      $ac_path_GREP_found && break 3\n+    done\n+  done\n+  done\n+IFS=$as_save_IFS\n+  if test -z \"$ac_cv_path_GREP\"; then\n+    as_fn_error \"no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin\" \"$LINENO\" 5\n+  fi\n+else\n+  ac_cv_path_GREP=$GREP\n+fi\n+\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_GREP\" >&5\n+$as_echo \"$ac_cv_path_GREP\" >&6; }\n+ GREP=\"$ac_cv_path_GREP\"\n+\n+\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for egrep\" >&5\n+$as_echo_n \"checking for egrep... \" >&6; }\n+if test \"${ac_cv_path_EGREP+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  if echo a | $GREP -E '(a|b)' >/dev/null 2>&1\n+   then ac_cv_path_EGREP=\"$GREP -E\"\n+   else\n+     if test -z \"$EGREP\"; then\n+  ac_path_EGREP_found=false\n+  # Loop through the user's path and test for each of PROGNAME-LIST\n+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+    for ac_prog in egrep; do\n+    for ac_exec_ext in '' $ac_executable_extensions; do\n+      ac_path_EGREP=\"$as_dir/$ac_prog$ac_exec_ext\"\n+      { test -f \"$ac_path_EGREP\" && $as_test_x \"$ac_path_EGREP\"; } || continue\n+# Check for GNU ac_path_EGREP and select it if it is found.\n+  # Check for GNU $ac_path_EGREP\n+case `\"$ac_path_EGREP\" --version 2>&1` in\n+*GNU*)\n+  ac_cv_path_EGREP=\"$ac_path_EGREP\" ac_path_EGREP_found=:;;\n+*)\n+  ac_count=0\n+  $as_echo_n 0123456789 >\"conftest.in\"\n+  while :\n+  do\n+    cat \"conftest.in\" \"conftest.in\" >\"conftest.tmp\"\n+    mv \"conftest.tmp\" \"conftest.in\"\n+    cp \"conftest.in\" \"conftest.nl\"\n+    $as_echo 'EGREP' >> \"conftest.nl\"\n+    \"$ac_path_EGREP\" 'EGREP$' < \"conftest.nl\" >\"conftest.out\" 2>/dev/null || break\n+    diff \"conftest.out\" \"conftest.nl\" >/dev/null 2>&1 || break\n+    as_fn_arith $ac_count + 1 && ac_count=$as_val\n+    if test $ac_count -gt ${ac_path_EGREP_max-0}; then\n+      # Best one so far, save it but keep looking for a better one\n+      ac_cv_path_EGREP=\"$ac_path_EGREP\"\n+      ac_path_EGREP_max=$ac_count\n+    fi\n+    # 10*(2^10) chars as input seems more than enough\n+    test $ac_count -gt 10 && break\n+  done\n+  rm -f conftest.in conftest.tmp conftest.nl conftest.out;;\n+esac\n+\n+      $ac_path_EGREP_found && break 3\n+    done\n+  done\n+  done\n+IFS=$as_save_IFS\n+  if test -z \"$ac_cv_path_EGREP\"; then\n+    as_fn_error \"no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin\" \"$LINENO\" 5\n+  fi\n+else\n+  ac_cv_path_EGREP=$EGREP\n+fi\n+\n+   fi\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP\" >&5\n+$as_echo \"$ac_cv_path_EGREP\" >&6; }\n+ EGREP=\"$ac_cv_path_EGREP\"\n+\n+\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for ANSI C header files\" >&5\n+$as_echo_n \"checking for ANSI C header files... \" >&6; }\n+if test \"${ac_cv_header_stdc+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <stdlib.h>\n+#include <stdarg.h>\n+#include <string.h>\n+#include <float.h>\n+\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  ac_cv_header_stdc=yes\n+else\n+  ac_cv_header_stdc=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <string.h>\n+\n+_ACEOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  $EGREP \"memchr\" >/dev/null 2>&1; then :\n+\n+else\n+  ac_cv_header_stdc=no\n+fi\n+rm -f conftest*\n+\n+fi\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <stdlib.h>\n+\n+_ACEOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  $EGREP \"free\" >/dev/null 2>&1; then :\n+\n+else\n+  ac_cv_header_stdc=no\n+fi\n+rm -f conftest*\n+\n+fi\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.\n+  if test \"$cross_compiling\" = yes; then :\n+  :\n+else\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <ctype.h>\n+#include <stdlib.h>\n+#if ((' ' & 0x0FF) == 0x020)\n+# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n+# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))\n+#else\n+# define ISLOWER(c) \\\n+\t\t   (('a' <= (c) && (c) <= 'i') \\\n+\t\t     || ('j' <= (c) && (c) <= 'r') \\\n+\t\t     || ('s' <= (c) && (c) <= 'z'))\n+# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))\n+#endif\n+\n+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))\n+int\n+main ()\n+{\n+  int i;\n+  for (i = 0; i < 256; i++)\n+    if (XOR (islower (i), ISLOWER (i))\n+\t|| toupper (i) != TOUPPER (i))\n+      return 2;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_run \"$LINENO\"; then :\n+\n+else\n+  ac_cv_header_stdc=no\n+fi\n+rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \\\n+  conftest.$ac_objext conftest.beam conftest.$ac_ext\n+fi\n+\n+fi\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc\" >&5\n+$as_echo \"$ac_cv_header_stdc\" >&6; }\n+if test $ac_cv_header_stdc = yes; then\n+\n+$as_echo \"#define STDC_HEADERS 1\" >>confdefs.h\n+\n+fi\n+\n+\n # Check for decimal float support.\n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether decimal floating point is supported\" >&5\n $as_echo_n \"checking whether decimal floating point is supported... \" >&6; }"}, {"sha": "5edcbde69ddcc7d1b28dca46107c4df684a498a6", "filename": "libgcc/configure.ac", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb/libgcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb/libgcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfigure.ac?ref=0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb", "patch": "@@ -197,6 +197,11 @@ AS_VAR_ARITH([long_double_type_size], [$ac_cv_sizeof_long_double \\* 8])\n AC_SUBST(double_type_size)\n AC_SUBST(long_double_type_size)\n \n+AC_CHECK_HEADERS(inttypes.h stdint.h stdlib.h ftw.h \\\n+\tunistd.h sys/stat.h sys/types.h \\\n+\tstring.h strings.h memory.h)\n+AC_HEADER_STDC\n+\n # Check for decimal float support.\n AC_CACHE_CHECK([whether decimal floating point is supported], [libgcc_cv_dfp],\n \t       [AC_COMPILE_IFELSE([AC_LANG_PROGRAM([["}, {"sha": "d76c2eb4858a928ed4adcdf361fdfef8b21f7024", "filename": "libgcc/libgcov-util.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb/libgcc%2Flibgcov-util.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb/libgcc%2Flibgcov-util.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcov-util.c?ref=0e4a0def1eff13e4b42f8667f2be1b5e4efbbfdb", "patch": "@@ -52,7 +52,9 @@ void gcov_set_verbose (void)\n \n #include \"obstack.h\"\n #include <unistd.h>\n+#ifdef HAVE_FTW_H\n #include <ftw.h>\n+#endif\n \n static void tag_function (unsigned, unsigned);\n static void tag_blocks (unsigned, unsigned);\n@@ -380,6 +382,7 @@ read_gcda_file (const char *filename)\n   return obj_info;\n }\n \n+#ifdef HAVE_FTW_H\n /* This will be called by ftw(). It opens and read a gcda file FILENAME.\n    Return a non-zero value to stop the tree walk.  */\n \n@@ -417,6 +420,7 @@ ftw_read_file (const char *filename,\n \n   return 0;\n }\n+#endif\n \n /* Initializer for reading a profile dir.  */\n \n@@ -451,7 +455,9 @@ gcov_read_profile_dir (const char* dir_name, int recompute_summary ATTRIBUTE_UNU\n       fnotice (stderr, \"%s is not a directory\\n\", dir_name);\n       return NULL;\n     }\n+#ifdef HAVE_FTW_H\n   ftw (\".\", ftw_read_file, 50);\n+#endif\n   ret = chdir (pwd);\n   free (pwd);\n "}]}