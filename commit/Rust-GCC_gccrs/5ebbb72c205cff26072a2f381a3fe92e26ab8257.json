{"sha": "5ebbb72c205cff26072a2f381a3fe92e26ab8257", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWViYmI3MmMyMDVjZmYyNjA3MmEyZjM4MWEzZmU5MmUyNmFiODI1Nw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2018-08-01T12:09:33Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2018-08-01T12:09:33Z"}, "message": "re PR c++/86661 (g++ ICE:tree check: expected tree that contains \u2018decl minimal\u2019 structure, have \u2018overload\u2019 in note_name_declared_in_class, at cp/class.c:8288)\n\n/cp\n2018-08-01  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/86661\n\t* class.c (note_name_declared_in_class): Use location_of in permerror\n\tinstead of DECL_SOURCE_LOCATION (for OVERLOADs).\n\n/testsuite\n2018-08-01  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/86661\n\t* g++.dg/lookup/name-clash12.C: New.\n\nFrom-SVN: r263207", "tree": {"sha": "6069af51b8c67f8d701c0039ecd38edd61d41cd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6069af51b8c67f8d701c0039ecd38edd61d41cd0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ebbb72c205cff26072a2f381a3fe92e26ab8257", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ebbb72c205cff26072a2f381a3fe92e26ab8257", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ebbb72c205cff26072a2f381a3fe92e26ab8257", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ebbb72c205cff26072a2f381a3fe92e26ab8257/comments", "author": null, "committer": null, "parents": [{"sha": "e4837aa9fbb91803585f038de67b0d62d256b654", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4837aa9fbb91803585f038de67b0d62d256b654", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4837aa9fbb91803585f038de67b0d62d256b654"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "d66c195131c955a4a7560890b8ee4cd7a1c2fd14", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ebbb72c205cff26072a2f381a3fe92e26ab8257/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ebbb72c205cff26072a2f381a3fe92e26ab8257/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5ebbb72c205cff26072a2f381a3fe92e26ab8257", "patch": "@@ -1,3 +1,9 @@\n+2018-08-01  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/86661\n+\t* class.c (note_name_declared_in_class): Use location_of in permerror\n+\tinstead of DECL_SOURCE_LOCATION (for OVERLOADs).\n+\n 2018-07-31  Tom de Vries  <tdevries@suse.de>\n \n \tPR debug/86687"}, {"sha": "de59831c54e56887942dd48ebeb970024637b0d6", "filename": "gcc/cp/class.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ebbb72c205cff26072a2f381a3fe92e26ab8257/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ebbb72c205cff26072a2f381a3fe92e26ab8257/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=5ebbb72c205cff26072a2f381a3fe92e26ab8257", "patch": "@@ -8285,7 +8285,7 @@ note_name_declared_in_class (tree name, tree decl)\n \t A name N used in a class S shall refer to the same declaration\n \t in its context and when re-evaluated in the completed scope of\n \t S.  */\n-      if (permerror (DECL_SOURCE_LOCATION (decl),\n+      if (permerror (location_of (decl),\n \t\t     \"declaration of %q#D changes meaning of %qD\",\n \t\t     decl, OVL_NAME (decl)))\n \tinform (location_of ((tree) n->value),"}, {"sha": "7bf890ae8e1461dcfa9d4b6a14769906c0467a25", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ebbb72c205cff26072a2f381a3fe92e26ab8257/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ebbb72c205cff26072a2f381a3fe92e26ab8257/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5ebbb72c205cff26072a2f381a3fe92e26ab8257", "patch": "@@ -1,3 +1,8 @@\n+2018-08-01  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/86661\n+\t* g++.dg/lookup/name-clash12.C: New.\n+\n 2018-08-01  Richard Biener  <rguenther@suse.de>\n \n \t* gcc.dg/tree-ssa/ssa-fre-68.c: New testcase."}, {"sha": "07ed8c318ccb306055234361f46f6d51a4f58be2", "filename": "gcc/testsuite/g++.dg/lookup/name-clash12.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ebbb72c205cff26072a2f381a3fe92e26ab8257/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fname-clash12.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ebbb72c205cff26072a2f381a3fe92e26ab8257/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fname-clash12.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fname-clash12.C?ref=5ebbb72c205cff26072a2f381a3fe92e26ab8257", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/86661\n+\n+typedef int a;  // { dg-message \"declared here\" }\n+namespace {\n+class b {\n+  a c;\n+  template <typename> void a();  // { dg-error \"changes meaning\" }\n+};\n+}"}]}