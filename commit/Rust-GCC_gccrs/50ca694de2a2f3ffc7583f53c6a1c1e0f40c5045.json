{"sha": "50ca694de2a2f3ffc7583f53c6a1c1e0f40c5045", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTBjYTY5NGRlMmEyZjNmZmM3NTgzZjUzYzZhMWMxZTBmNDBjNTA0NQ==", "commit": {"author": {"name": "Jim Wilson", "email": "jim.wilson@linaro.org", "date": "2017-07-25T16:06:37Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2017-07-25T16:06:37Z"}, "message": "Fix i686-pc-cygwin build failure.\n\n\tgcc/\n\tPR bootstrap/81521\n\t* config/i386/winnt-cxx.c (i386_pe_adjust_class_at_definition): Look\n\tfor FUNCTION_DECLs in TYPE_FIELDS rather than TYPE_METHODS.\n\nFrom-SVN: r250529", "tree": {"sha": "ca85a34ef2b969d89db341b840f428aa41181cca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca85a34ef2b969d89db341b840f428aa41181cca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50ca694de2a2f3ffc7583f53c6a1c1e0f40c5045", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50ca694de2a2f3ffc7583f53c6a1c1e0f40c5045", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50ca694de2a2f3ffc7583f53c6a1c1e0f40c5045", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50ca694de2a2f3ffc7583f53c6a1c1e0f40c5045/comments", "author": null, "committer": null, "parents": [{"sha": "df7c5241f8aff0ffeca5e356e8f92960d2177289", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df7c5241f8aff0ffeca5e356e8f92960d2177289", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df7c5241f8aff0ffeca5e356e8f92960d2177289"}], "stats": {"total": 21, "additions": 13, "deletions": 8}, "files": [{"sha": "1ddf5b5933996ef6464ba672637793334461b443", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50ca694de2a2f3ffc7583f53c6a1c1e0f40c5045/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50ca694de2a2f3ffc7583f53c6a1c1e0f40c5045/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=50ca694de2a2f3ffc7583f53c6a1c1e0f40c5045", "patch": "@@ -1,3 +1,9 @@\n+2017-07-25  Jim Wilson  <jim.wilson@linaro.org>\n+\n+\tPR bootstrap/81521\n+\t* config/i386/winnt-cxx.c (i386_pe_adjust_class_at_definition): Look\n+\tfor FUNCTION_DECLs in TYPE_FIELDS rather than TYPE_METHODS.\n+\n 2017-07-25  Jim Wilson  <jim.wilson@linaro.org>\n \n \t* config/i386/gstabs.h: Delete."}, {"sha": "a3569fb1b561805bf3d27caf07197ccc707deb41", "filename": "gcc/config/i386/winnt-cxx.c", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50ca694de2a2f3ffc7583f53c6a1c1e0f40c5045/gcc%2Fconfig%2Fi386%2Fwinnt-cxx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50ca694de2a2f3ffc7583f53c6a1c1e0f40c5045/gcc%2Fconfig%2Fi386%2Fwinnt-cxx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwinnt-cxx.c?ref=50ca694de2a2f3ffc7583f53c6a1c1e0f40c5045", "patch": "@@ -127,7 +127,8 @@ i386_pe_adjust_class_at_definition (tree t)\n \t    for (thunk = DECL_THUNKS (member); thunk;\n \t\t thunk = TREE_CHAIN (thunk))\n \t      maybe_add_dllexport (thunk);\n-\t}\n+\t  }\n+\n       /* Check vtables  */\n       for (member = CLASSTYPE_VTABLES (t);\n \t   member; member = DECL_CHAIN (member))\n@@ -145,14 +146,11 @@ i386_pe_adjust_class_at_definition (tree t)\n \t That is just right since out-of class declarations can only be a\n \t definition.   */\n \n-      /* Check static VAR_DECL's.  */\n+      /* Check FUNCTION_DECL's and static VAR_DECL's.  */\n       for (member = TYPE_FIELDS (t); member; member = DECL_CHAIN (member))\n \tif (TREE_CODE (member) == VAR_DECL)     \n \t  maybe_add_dllimport (member);\n-    \n-      /* Check FUNCTION_DECL's.  */\n-      for (member = TYPE_METHODS (t); member;  member = DECL_CHAIN (member))\n-\tif (TREE_CODE (member) == FUNCTION_DECL)\n+\telse if (TREE_CODE (member) == FUNCTION_DECL)\n \t  {\n \t    tree thunk;\n \t    maybe_add_dllimport (member);\n@@ -161,10 +159,11 @@ i386_pe_adjust_class_at_definition (tree t)\n \t    for (thunk = DECL_THUNKS (member); thunk;\n \t\t thunk = DECL_CHAIN (thunk))\n \t      maybe_add_dllimport (thunk);\n-\t }\n+\t  }\n  \n       /* Check vtables  */\n-      for (member = CLASSTYPE_VTABLES (t); member;  member = DECL_CHAIN (member))\n+      for (member = CLASSTYPE_VTABLES (t);\n+\t   member;  member = DECL_CHAIN (member))\n \tif (TREE_CODE (member) == VAR_DECL) \n \t  maybe_add_dllimport (member);\n "}]}