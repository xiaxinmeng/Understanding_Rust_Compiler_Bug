{"sha": "84e33251331478d41b1c05768ccf0d060ce5b242", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODRlMzMyNTEzMzE0NzhkNDFiMWMwNTc2OGNjZjBkMDYwY2U1YjI0Mg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-09-11T18:27:17Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-09-11T18:27:17Z"}, "message": "re PR fortran/91642 (ICE: Bad IO basetype (transfer_expr, at fortran/trans-io.c:2507))\n\n2019-09-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/91642\n\t* io.c (gfc_match_inquire): null() cannot be in an iolength inquire\n\tlist.\n\n2019-09-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/91642\n\t* gfortran.dg/pr91642.f90: New test.\n\nFrom-SVN: r275655", "tree": {"sha": "e18f328b6545634658a698d4bfdc1d94f126e1b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e18f328b6545634658a698d4bfdc1d94f126e1b9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/84e33251331478d41b1c05768ccf0d060ce5b242", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84e33251331478d41b1c05768ccf0d060ce5b242", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84e33251331478d41b1c05768ccf0d060ce5b242", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84e33251331478d41b1c05768ccf0d060ce5b242/comments", "author": null, "committer": null, "parents": [{"sha": "19e057e7cc47115ea89f5d222baaae41e0084f50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19e057e7cc47115ea89f5d222baaae41e0084f50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19e057e7cc47115ea89f5d222baaae41e0084f50"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "b3770ce04541808b4e61e7e6aab0e1c7b6d70818", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84e33251331478d41b1c05768ccf0d060ce5b242/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84e33251331478d41b1c05768ccf0d060ce5b242/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=84e33251331478d41b1c05768ccf0d060ce5b242", "patch": "@@ -1,3 +1,9 @@\n+2019-09-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/91642\n+\t* io.c (gfc_match_inquire): null() cannot be in an iolength inquire\n+\tlist.\n+\n 2019-09-05  Harald Anlauf  <anlauf@gmx.de>\n \n \tPR fortran/91496"}, {"sha": "bb645602a2ca1c8103de76f3558a04ae84d933d0", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84e33251331478d41b1c05768ccf0d060ce5b242/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84e33251331478d41b1c05768ccf0d060ce5b242/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=84e33251331478d41b1c05768ccf0d060ce5b242", "patch": "@@ -4641,6 +4641,17 @@ gfc_match_inquire (void)\n       if (m == MATCH_NO)\n \tgoto syntax;\n \n+      for (gfc_code *c = code; c; c = c->next)\n+\tif (c->expr1 && c->expr1->expr_type == EXPR_FUNCTION\n+\t    && c->expr1->symtree && c->expr1->symtree->n.sym->attr.function\n+\t    && !c->expr1->symtree->n.sym->attr.external\n+\t    && strcmp (c->expr1->symtree->name, \"null\") == 0)\n+\t  {\n+\t    gfc_error (\"NULL() near %L cannot appear in INQUIRE statement\",\n+\t\t       &c->expr1->where);\n+\t    goto cleanup;\n+\t  }\n+\n       new_st.op = EXEC_IOLENGTH;\n       new_st.expr1 = inquire->iolength;\n       new_st.ext.inquire = inquire;"}, {"sha": "6c316ee7f93f335d967d528fec0b713b3aa72225", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84e33251331478d41b1c05768ccf0d060ce5b242/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84e33251331478d41b1c05768ccf0d060ce5b242/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=84e33251331478d41b1c05768ccf0d060ce5b242", "patch": "@@ -1,3 +1,8 @@\n+2019-09-11  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/91642\n+\t* gfortran.dg/pr91642.f90: New test.\n+\n 2019-09-11  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/89435"}, {"sha": "b3cc40f50ece48a20dba212ae89fe9f67c1f770d", "filename": "gcc/testsuite/gfortran.dg/pr91642.f90", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84e33251331478d41b1c05768ccf0d060ce5b242/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91642.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84e33251331478d41b1c05768ccf0d060ce5b242/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91642.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91642.f90?ref=84e33251331478d41b1c05768ccf0d060ce5b242", "patch": "@@ -0,0 +1,19 @@\n+! { dg-do compile }\n+! PR fortran/91642\n+! Code contributed by Gerhard Steinmetz\n+program p\n+   integer i\n+   integer :: iol\n+   integer, external :: null\n+   i = 0\n+   inquire (iolength=iol) null()\n+   if (iol == 4) stop 1\n+end\n+\n+subroutine q\n+   integer i\n+   integer :: iol\n+   i = 0\n+   inquire (iolength=iol) i, null() ! { dg-error \"cannot appear in INQUIRE\" }\n+   if (iol == 4) stop 2\n+end"}]}