{"sha": "5945bebf44217c25eb47124b66823df7f1ddcb3d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTk0NWJlYmY0NDIxN2MyNWViNDcxMjRiNjY4MjNkZjdmMWRkY2IzZA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2013-08-17T18:14:18Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2013-08-17T18:14:18Z"}, "message": "re PR middle-end/58179 (obj_type_ref ICE building libobjc)\n\n\tPR middle-end/58179\n\t* tree.c (obj_type_ref_class): Do not ICE on non-method calls.\n\nFrom-SVN: r201817", "tree": {"sha": "7420acbccb1aaf6b9fc6cba0db0d8aee83d75a18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7420acbccb1aaf6b9fc6cba0db0d8aee83d75a18"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5945bebf44217c25eb47124b66823df7f1ddcb3d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5945bebf44217c25eb47124b66823df7f1ddcb3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5945bebf44217c25eb47124b66823df7f1ddcb3d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5945bebf44217c25eb47124b66823df7f1ddcb3d/comments", "author": null, "committer": null, "parents": [{"sha": "f4fca9d48101c0a7e6073fb280e65f976f582811", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4fca9d48101c0a7e6073fb280e65f976f582811", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4fca9d48101c0a7e6073fb280e65f976f582811"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "6462a0559be5636c0ee2a190777f7fd80ad82f09", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5945bebf44217c25eb47124b66823df7f1ddcb3d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5945bebf44217c25eb47124b66823df7f1ddcb3d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5945bebf44217c25eb47124b66823df7f1ddcb3d", "patch": "@@ -1,3 +1,8 @@\n+2013-08-16  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/58179\n+\t* tree.c (obj_type_ref_class): Do not ICE on non-method calls.\n+\n 2013-08-16  David Edelsohn  <dje.gcc@gmail.com>\n \n \t* config/rs6000/rs6000.md (rs6000_get_timebase_ppc32): Add length"}, {"sha": "8b4d86585bbd6cb1287990746d40cc9528435e7e", "filename": "gcc/tree.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5945bebf44217c25eb47124b66823df7f1ddcb3d/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5945bebf44217c25eb47124b66823df7f1ddcb3d/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=5945bebf44217c25eb47124b66823df7f1ddcb3d", "patch": "@@ -11873,7 +11873,11 @@ obj_type_ref_class (tree ref)\n   ref = TREE_TYPE (ref);\n   gcc_checking_assert (TREE_CODE (ref) == POINTER_TYPE);\n   ref = TREE_TYPE (ref);\n-  gcc_checking_assert (TREE_CODE (ref) == METHOD_TYPE);\n+  /* We look for type THIS points to.  ObjC also builds\n+     OBJ_TYPE_REF with non-method calls, Their first parameter\n+     ID however also corresponds to class type. */\n+  gcc_checking_assert (TREE_CODE (ref) == METHOD_TYPE\n+\t\t       || TREE_CODE (ref) == FUNCTION_TYPE);\n   ref = TREE_VALUE (TYPE_ARG_TYPES (ref));\n   gcc_checking_assert (TREE_CODE (ref) == POINTER_TYPE);\n   return TREE_TYPE (ref);"}]}