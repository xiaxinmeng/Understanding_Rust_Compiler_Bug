{"sha": "72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzIzNTFmYTMxZjY2MTYxYmQyY2U3ZmE5OTZiYzZiNGZjYTNhZDJjZQ==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2010-10-13T10:06:28Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-10-13T10:06:28Z"}, "message": "re PR middle-end/45874 (ICE in verify_flow_info failed)\n\n2010-10-13  Richard Guenther  <rguenther@suse.de>\n\n\tPR middle-end/45874\n\t* cgraphunit.c (cgraph_redirect_edge_call_stmt_to_callee):\n\tFixup the CFG when EH was fixed up.\n\n\t* g++.dg/torture/pr45874.C: New testcase.\n\nFrom-SVN: r165416", "tree": {"sha": "6aa17beec9e5ff5f167458432718aad437e812e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6aa17beec9e5ff5f167458432718aad437e812e5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a1178b309a5d316fe6040380a540807495acadc5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1178b309a5d316fe6040380a540807495acadc5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1178b309a5d316fe6040380a540807495acadc5"}], "stats": {"total": 75, "additions": 74, "deletions": 1}, "files": [{"sha": "6793255edcf32931aa968c4e4beed225c8ee086e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce", "patch": "@@ -1,3 +1,9 @@\n+2010-10-13  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/45874\n+\t* cgraphunit.c (cgraph_redirect_edge_call_stmt_to_callee):\n+\tFixup the CFG when EH was fixed up.\n+\n 2010-10-13  Ira Rosen  <irar@il.ibm.com>\n \n \t* tree-vect-slp.c (vect_get_constant_vectors): Fix comment."}, {"sha": "95f30e25f5743cae0cbdf92aecd1e493dff1b7fc", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce", "patch": "@@ -2167,13 +2167,17 @@ cgraph_redirect_edge_call_stmt_to_callee (struct cgraph_edge *e)\n \tSSA_NAME_DEF_STMT (gimple_vdef (new_stmt)) = new_stmt;\n \n       gsi = gsi_for_stmt (e->call_stmt);\n-      gsi_replace (&gsi, new_stmt, true);\n+      gsi_replace (&gsi, new_stmt, false);\n+      if (maybe_clean_or_replace_eh_stmt (e->call_stmt, new_stmt))\n+\tgimple_purge_dead_eh_edges (gimple_bb (new_stmt));\n     }\n   else\n     {\n       new_stmt = e->call_stmt;\n       gimple_call_set_fndecl (new_stmt, e->callee->decl);\n       update_stmt (new_stmt);\n+      if (maybe_clean_eh_stmt (new_stmt))\n+\tgimple_purge_dead_eh_edges (gimple_bb (new_stmt));\n     }\n \n   cgraph_set_call_stmt_including_clones (e->caller, e->call_stmt, new_stmt);"}, {"sha": "f5687e3b442b70b6ba3e4b7d28e3d08e0dcfe8a8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce", "patch": "@@ -1,3 +1,8 @@\n+2010-10-13  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/45874\n+\t* g++.dg/torture/pr45874.C: New testcase.\n+\n 2010-10-13  Iain Sandoe  <iains@gcc.gnu.org>\n \n \t* objc.dg/attributes/method-attribute-1.m: Update to respond"}, {"sha": "70965ff574ea1ee03adafc8a96d5f9811cfe081f", "filename": "gcc/testsuite/g++.dg/torture/pr45874.C", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr45874.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr45874.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr45874.C?ref=72351fa31f66161bd2ce7fa996bc6b4fca3ad2ce", "patch": "@@ -0,0 +1,58 @@\n+// { dg-do compile }\n+\n+typedef struct {\n+} IppLibraryVersion;\n+typedef unsigned char Ipp8u;\n+typedef unsigned int Ipp32u;\n+typedef signed int Ipp32s;\n+typedef enum e_vm_Status {\n+    VM_OK = 0,     VM_OPERATION_FAILED =-999,     VM_NOT_INITIALIZED =-998,     VM_TIMEOUT =-987,     VM_NOT_ENOUGH_DATA =-996,      VM_NULL_PTR =-995,     VM_SO_CANT_LOAD =-994,     VM_SO_INVALID_HANDLE =-993,     VM_SO_CANT_GET_ADDR =-992 }\n+    vm_status;\n+    typedef Ipp32s Status;\n+    class MediaReceiver {\n+    };\n+class MediaBuffer : public MediaReceiver {\n+};\n+struct TrackInfo {\n+};\n+struct Mpeg2TrackInfo : public TrackInfo     {\n+};\n+class BitstreamReader     {\n+public:          BitstreamReader(void);\n+\t\t virtual ~BitstreamReader(void) {\n+\t\t }\n+\t\t Ipp32u GetBits(Ipp32s iNum);\n+\t\t void SkipBits(Ipp32s iNum);\n+protected:          virtual void Refresh(void);\n+\t\t    Ipp32s m_iReadyBits;\n+};\n+class FrameConstructor : public MediaBuffer     {\n+};\n+class VideoFrameConstructor : public FrameConstructor     {\n+};\n+class Mpeg2FrameConstructor : public VideoFrameConstructor     {\n+    static Status ParsePictureHeader(Ipp8u *buf, Ipp32s iLen, Mpeg2TrackInfo *pInfo);\n+};\n+Status Mpeg2FrameConstructor::ParsePictureHeader(Ipp8u *buf, Ipp32s iLen, Mpeg2TrackInfo *pInfo) {\n+    BitstreamReader bs;\n+    bs.SkipBits(32 + 4 + 4 + 4 + 4 + 4 + 2);\n+    bs.SkipBits(1 + 1 + 1 + 1 + 1 + 1 + 1);\n+    bs.SkipBits(5);\n+    bs.SkipBits(3);\n+    Ipp8u source_format;\n+    bs.SkipBits(22);\n+    bs.SkipBits(8);\n+    if (7 == source_format)     {\n+\tIpp8u ufep = (Ipp8u)bs.GetBits(3);\n+\tif (0x01 == ufep)         {\n+\t    bs.SkipBits(10);\n+\t}\n+    }\n+}\n+void BitstreamReader::SkipBits(Ipp32s iNum) {\n+    if (iNum <= m_iReadyBits)     {\n+\tm_iReadyBits -= iNum;\n+\tRefresh();\n+    }\n+}\n+void BitstreamReader::Refresh(void) { }"}]}