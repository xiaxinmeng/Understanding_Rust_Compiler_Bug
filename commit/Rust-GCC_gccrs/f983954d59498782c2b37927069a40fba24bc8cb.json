{"sha": "f983954d59498782c2b37927069a40fba24bc8cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjk4Mzk1NGQ1OTQ5ODc4MmMyYjM3OTI3MDY5YTQwZmJhMjRiYzhjYg==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2010-02-25T05:47:10Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2010-02-25T05:47:10Z"}, "message": "transfer.c (require_type): Subtract one from item_count for output of error message.\n\n2010-02-24  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\t* io/transfer.c (require_type): Subtract one from item_count for output\n\tof error message.  Add comment before formatted_transfer function\n\texplaining why the item_count is off by one.\n\nFrom-SVN: r157060", "tree": {"sha": "87fefa147788c965881d2bd146799466d9e3ed69", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/87fefa147788c965881d2bd146799466d9e3ed69"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f983954d59498782c2b37927069a40fba24bc8cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f983954d59498782c2b37927069a40fba24bc8cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f983954d59498782c2b37927069a40fba24bc8cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f983954d59498782c2b37927069a40fba24bc8cb/comments", "author": null, "committer": null, "parents": [{"sha": "03a32789f408a7e59da4386375ddd77b8b6a3531", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03a32789f408a7e59da4386375ddd77b8b6a3531", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03a32789f408a7e59da4386375ddd77b8b6a3531"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "785a3a8c8384addc55f6387b346f31dbd09d2c23", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f983954d59498782c2b37927069a40fba24bc8cb/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f983954d59498782c2b37927069a40fba24bc8cb/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=f983954d59498782c2b37927069a40fba24bc8cb", "patch": "@@ -1,3 +1,9 @@\n+2010-02-24  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\t* io/transfer.c (require_type): Subtract one from item_count for output\n+\tof error message.  Add comment before formatted_transfer function\n+\texplaining why the item_count is off by one.\n+\n 2010-02-24  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* io/write_float.def (WRITE_FLOAT): Use __builtin_signbit."}, {"sha": "63a18a6ef3baf843ebae36e79f8973978ff631ed", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f983954d59498782c2b37927069a40fba24bc8cb/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f983954d59498782c2b37927069a40fba24bc8cb/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=f983954d59498782c2b37927069a40fba24bc8cb", "patch": "@@ -925,8 +925,9 @@ require_type (st_parameter_dt *dtp, bt expected, bt actual, const fnode *f)\n   if (actual == expected)\n     return 0;\n \n+  /* Adjust item_count before emitting error message.  */\n   sprintf (buffer, \"Expected %s for item %d in formatted transfer, got %s\",\n-\t   type_name (expected), dtp->u.p.item_count, type_name (actual));\n+\t   type_name (expected), dtp->u.p.item_count - 1, type_name (actual));\n \n   format_error (dtp, f, buffer);\n   return 1;\n@@ -1703,6 +1704,12 @@ formatted_transfer_scalar_write (st_parameter_dt *dtp, bt type, void *p, int kin\n   unget_format (dtp, f);\n }\n \n+  /* This function is first called from data_init_transfer to initiate the loop\n+     over each item in the format, transferring data as required.  Subsequent\n+     calls to this function occur for each data item foound in the READ/WRITE\n+     statement.  The item_count is incremented for each call.  Since the first\n+     call is from data_transfer_init, the item_count is always one greater than\n+     the actual count number of the item being transferred.  */\n \n static void\n formatted_transfer (st_parameter_dt *dtp, bt type, void *p, int kind,"}]}