{"sha": "7a968a57826efd0a56fc3dd172134f57c76a33c8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2E5NjhhNTc4MjZlZmQwYTU2ZmMzZGQxNzIxMzRmNTdjNzZhMzNjOA==", "commit": {"author": {"name": "Scott Gilbertson", "email": "scottg@mantatest.com", "date": "2003-01-15T23:18:58Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2003-01-15T23:18:58Z"}, "message": "XToolkit.java (getColorModel): Implemented.\n\n2003-01-15  Scott Gilbertson  <scottg@mantatest.com>\n\n\t* gnu/awt/xlib/XToolkit.java (getColorModel): Implemented.\n\t* gnu/awt/xlib/XGraphicsConfiguration.java (getPixel): Work with\n\t16-bit display mode.\n\nFrom-SVN: r61362", "tree": {"sha": "f39a4fca2c01f1adf7e3990b5a79360436b447e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f39a4fca2c01f1adf7e3990b5a79360436b447e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7a968a57826efd0a56fc3dd172134f57c76a33c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a968a57826efd0a56fc3dd172134f57c76a33c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a968a57826efd0a56fc3dd172134f57c76a33c8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a968a57826efd0a56fc3dd172134f57c76a33c8/comments", "author": null, "committer": null, "parents": [{"sha": "f077f1693bd11aee4daeb9bc9720f1f96161de46", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f077f1693bd11aee4daeb9bc9720f1f96161de46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f077f1693bd11aee4daeb9bc9720f1f96161de46"}], "stats": {"total": 47, "additions": 35, "deletions": 12}, "files": [{"sha": "9f1d5304c80cd19c84b1bd6fa0b96c67d9612919", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a968a57826efd0a56fc3dd172134f57c76a33c8/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a968a57826efd0a56fc3dd172134f57c76a33c8/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=7a968a57826efd0a56fc3dd172134f57c76a33c8", "patch": "@@ -1,3 +1,9 @@\n+2003-01-15  Scott Gilbertson  <scottg@mantatest.com>\n+\n+\t* gnu/awt/xlib/XToolkit.java (getColorModel): Implemented.\n+\t* gnu/awt/xlib/XGraphicsConfiguration.java (getPixel): Work with\n+\t16-bit display mode.\n+\n 2003-01-15  Scott Gilbertson  <scottg@mantatest.com>\n \n \t* java/awt/CardLayout.java (show): Rewrote."}, {"sha": "7d7d5159fe0ccde8d2aff8542dc8429048b0434a", "filename": "libjava/gnu/awt/xlib/XGraphicsConfiguration.java", "status": "modified", "additions": 27, "deletions": 10, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a968a57826efd0a56fc3dd172134f57c76a33c8/libjava%2Fgnu%2Fawt%2Fxlib%2FXGraphicsConfiguration.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a968a57826efd0a56fc3dd172134f57c76a33c8/libjava%2Fgnu%2Fawt%2Fxlib%2FXGraphicsConfiguration.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fawt%2Fxlib%2FXGraphicsConfiguration.java?ref=7a968a57826efd0a56fc3dd172134f57c76a33c8", "patch": "@@ -1,4 +1,4 @@\n-/* Copyright (C) 2000  Free Software Foundation\n+/* Copyright (C) 2000, 2003  Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -389,15 +389,32 @@ XFontMetrics getXFontMetrics(java.awt.Font awtFont)\n \n   int getPixel(Color color)\n   {\n+    /* FIXME: consider an integer technique whenever\n+     * the ColorModel is 8 bits per color.\n+     * The problem with using integers is that it doesn't work unless\n+     * the colors are 8 bits each (as in the array), since ColorModel.getDataElement(int[],int)\n+     * expects non-normalized values.  For example, in a 16-bit display mode, you\n+     * would typically have 5 bits each for red and blue, and 6 bits for green.\n     int[] components =\n-        {\n-\t  color.getRed(),\n-\t  color.getGreen(),\n-\t  color.getBlue(),\n-\t  0xff\n-\t};\n-\t\n-    ColorModel cm = getColorModel();\n-    return cm.getDataElement(components, 0);\n+    {\n+      color.getRed (),\n+      color.getGreen (),\n+      color.getBlue (),\n+      0xff\n+    };\n+     */\n+    \n+    float[] normalizedComponents =\n+    {\n+      ((float)color.getRed ()) / 255F,\n+      ((float)color.getGreen ()) / 255F,\n+      ((float)color.getBlue ()) / 255F,\n+      1\n+    };\n+    int[] unnormalizedComponents = { 0, 0, 0, 0xff };\n+    ColorModel cm = getColorModel ();\n+    cm.getUnnormalizedComponents(normalizedComponents, 0,\n+\t\t\t\t unnormalizedComponents, 0);\n+    return cm.getDataElement (unnormalizedComponents, 0);\n   }\n }"}, {"sha": "c71b39d0f80035515119b07cf17c1fe73910348c", "filename": "libjava/gnu/awt/xlib/XToolkit.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a968a57826efd0a56fc3dd172134f57c76a33c8/libjava%2Fgnu%2Fawt%2Fxlib%2FXToolkit.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a968a57826efd0a56fc3dd172134f57c76a33c8/libjava%2Fgnu%2Fawt%2Fxlib%2FXToolkit.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fawt%2Fxlib%2FXToolkit.java?ref=7a968a57826efd0a56fc3dd172134f57c76a33c8", "patch": "@@ -1,4 +1,4 @@\n-/* Copyright (C) 2000, 2002  Free Software Foundation\n+/* Copyright (C) 2000, 2002, 2003  Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -173,7 +173,7 @@ public int getScreenResolution()\n   \n   public java.awt.image.ColorModel getColorModel()\n   {\n-    throw new UnsupportedOperationException(\"not implemented yet\");\n+    return getDefaultXGraphicsConfiguration().getColorModel();\n   }\n \n   public String[] getFontList()"}]}