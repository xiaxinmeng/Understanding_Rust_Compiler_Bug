{"sha": "02484af985da5f2f56cf2f8aecb69f7d50848807", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDI0ODRhZjk4NWRhNWYyZjU2Y2YyZjhhZWNiNjlmN2Q1MDg0ODgwNw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@libertysurf.fr", "date": "2003-03-24T11:29:11Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2003-03-24T11:29:11Z"}, "message": "re PR target/10072 ([Sparc] internal compiler error: in trunc_int_for_mode, at explow.c:54)\n\n\tPR target/10072\n\t* combine.c (simplify_if_then_else): Check that the mode\n\thas MODE_INT class before applying the (OP Z (mult COND C2))\n\ttransformation.\n\nFrom-SVN: r64785", "tree": {"sha": "420839c3baf4ce62bb9390453b158cc7001f3df3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/420839c3baf4ce62bb9390453b158cc7001f3df3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02484af985da5f2f56cf2f8aecb69f7d50848807", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02484af985da5f2f56cf2f8aecb69f7d50848807", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02484af985da5f2f56cf2f8aecb69f7d50848807", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02484af985da5f2f56cf2f8aecb69f7d50848807/comments", "author": {"login": "ebotcazou", "id": 48091907, "node_id": "MDQ6VXNlcjQ4MDkxOTA3", "avatar_url": "https://avatars.githubusercontent.com/u/48091907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebotcazou", "html_url": "https://github.com/ebotcazou", "followers_url": "https://api.github.com/users/ebotcazou/followers", "following_url": "https://api.github.com/users/ebotcazou/following{/other_user}", "gists_url": "https://api.github.com/users/ebotcazou/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebotcazou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebotcazou/subscriptions", "organizations_url": "https://api.github.com/users/ebotcazou/orgs", "repos_url": "https://api.github.com/users/ebotcazou/repos", "events_url": "https://api.github.com/users/ebotcazou/events{/privacy}", "received_events_url": "https://api.github.com/users/ebotcazou/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "941bc65971482ba8194d7ab1b3eb2514b481cc70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/941bc65971482ba8194d7ab1b3eb2514b481cc70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/941bc65971482ba8194d7ab1b3eb2514b481cc70"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "9bc5b91838adee98389da1eec2e0f1d6b58af1d9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02484af985da5f2f56cf2f8aecb69f7d50848807/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02484af985da5f2f56cf2f8aecb69f7d50848807/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=02484af985da5f2f56cf2f8aecb69f7d50848807", "patch": "@@ -1,3 +1,10 @@\n+2003-03-23  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\tPR target/10072\n+\t* combine.c (simplify_if_then_else): Check that the mode\n+\thas MODE_INT class before applying the (OP Z (mult COND C2))\n+\ttransformation.\n+\n 2003-03-23  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \tPR optimization/9414\n@@ -9040,3 +9047,4 @@\n \t* doc/tm.texi (REGISTER_TARGET_PRAGMAS): Update\n \n See ChangeLog.8 for earlier changes.\n+"}, {"sha": "dd017062daaaceab49e39f8606e5d4afeaec93c0", "filename": "gcc/combine.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02484af985da5f2f56cf2f8aecb69f7d50848807/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02484af985da5f2f56cf2f8aecb69f7d50848807/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=02484af985da5f2f56cf2f8aecb69f7d50848807", "patch": "@@ -4969,7 +4969,9 @@ simplify_if_then_else (x)\n      neither 1 or -1, but it isn't worth checking for.  */\n \n   if ((STORE_FLAG_VALUE == 1 || STORE_FLAG_VALUE == -1)\n-      && comparison_p && mode != VOIDmode && ! side_effects_p (x))\n+      && comparison_p\n+      && GET_MODE_CLASS (mode) == MODE_INT\n+      && ! side_effects_p (x))\n     {\n       rtx t = make_compound_operation (true_rtx, SET);\n       rtx f = make_compound_operation (false_rtx, SET);"}, {"sha": "d5fbd913f719cb6266c5019aad74a71bff657d8e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02484af985da5f2f56cf2f8aecb69f7d50848807/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02484af985da5f2f56cf2f8aecb69f7d50848807/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=02484af985da5f2f56cf2f8aecb69f7d50848807", "patch": "@@ -1,3 +1,7 @@\n+2003-03-23  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\t* gcc.dg/ultrasp5.c: New test.\n+\n 2003-03-23  Arpad Beszedes <beszedes@cc.u-szeged.hu>\n \n \tPR middle-end/9967"}, {"sha": "c3660073cb9176d3e6eaba5f81583c639e405493", "filename": "gcc/testsuite/gcc.dg/ultrasp5.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02484af985da5f2f56cf2f8aecb69f7d50848807/gcc%2Ftestsuite%2Fgcc.dg%2Fultrasp5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02484af985da5f2f56cf2f8aecb69f7d50848807/gcc%2Ftestsuite%2Fgcc.dg%2Fultrasp5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fultrasp5.c?ref=02484af985da5f2f56cf2f8aecb69f7d50848807", "patch": "@@ -0,0 +1,12 @@\n+/* PR target/10072 */\n+/* Originator: Peter van Hoof <p.van-hoof@qub.ac.uk>\n+/* { dg-do compile } */\n+/* { dg-options \"-O1 -mcpu=ultrasparc -ffast-math\" { target sparc-*-* } } */\n+\n+void p(int v)\n+{\n+  int i=v,j;\n+  float a,b,c,x[i];\n+\n+  x[i] = (a/(((b)>(c)) ? (b) : (c)) - (((i) == (j)) ? 1.f : 0.f));\n+}"}]}