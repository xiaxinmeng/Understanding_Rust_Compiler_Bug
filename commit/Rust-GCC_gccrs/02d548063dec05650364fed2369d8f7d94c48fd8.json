{"sha": "02d548063dec05650364fed2369d8f7d94c48fd8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDJkNTQ4MDYzZGVjMDU2NTAzNjRmZWQyMzY5ZDhmN2Q5NGM0OGZkOA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2017-08-30T19:09:16Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-08-30T19:09:16Z"}, "message": "* varasm.c (decode_addr_const): Deal with INDIRECT_REF <INTEGER_CST>.\n\nFrom-SVN: r251545", "tree": {"sha": "ae6f7165f15840269e24e851ea73816957f1a8ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ae6f7165f15840269e24e851ea73816957f1a8ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02d548063dec05650364fed2369d8f7d94c48fd8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02d548063dec05650364fed2369d8f7d94c48fd8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02d548063dec05650364fed2369d8f7d94c48fd8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02d548063dec05650364fed2369d8f7d94c48fd8/comments", "author": null, "committer": null, "parents": [{"sha": "e0bd5a2824b13532b5377b52b90dfcd4cfce9c0d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0bd5a2824b13532b5377b52b90dfcd4cfce9c0d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0bd5a2824b13532b5377b52b90dfcd4cfce9c0d"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "c797558849c2a0c30f9316c7bfc012266eccb0f9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02d548063dec05650364fed2369d8f7d94c48fd8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02d548063dec05650364fed2369d8f7d94c48fd8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=02d548063dec05650364fed2369d8f7d94c48fd8", "patch": "@@ -1,3 +1,7 @@\n+2017-08-30  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* varasm.c (decode_addr_const): Deal with INDIRECT_REF <INTEGER_CST>.\n+\n 2017-08-30  Pat Haugen  <pthaugen@us.ibm.com>\n \n \t* config/rs6000/rs6000.c (rs6000_emit_prologue_move_from_cr): Rename from"}, {"sha": "0fab4d4702ab0e2985663f3ab0b6f6d0253fa3e1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02d548063dec05650364fed2369d8f7d94c48fd8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02d548063dec05650364fed2369d8f7d94c48fd8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=02d548063dec05650364fed2369d8f7d94c48fd8", "patch": "@@ -1,3 +1,7 @@\n+2017-08-30  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/aggr22.ad[sb]: New test.\n+\n 2017-08-30  Pat Haugen  <pthaugen@us.ibm.com>\n \n \t* gcc.target/powerpc/cr_shrink-wrap.c: New."}, {"sha": "a9eb2e700b6414d3c8725aaa937dd8ac633d28ee", "filename": "gcc/testsuite/gnat.dg/aggr22.adb", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02d548063dec05650364fed2369d8f7d94c48fd8/gcc%2Ftestsuite%2Fgnat.dg%2Faggr22.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02d548063dec05650364fed2369d8f7d94c48fd8/gcc%2Ftestsuite%2Fgnat.dg%2Faggr22.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Faggr22.adb?ref=02d548063dec05650364fed2369d8f7d94c48fd8", "patch": "@@ -0,0 +1,14 @@\n+-- { dg-do compile }\n+\n+package body Aggr22 is\n+\n+  type Ptr is access all Integer;\n+  type Arr is array (Positive range <>) of Ptr;\n+\n+  procedure Proc is\n+    A : Arr (1 .. 33);\n+  begin\n+    A := (1 => null, 2 .. 32 => My_Rec.I'Access, 33 => null);\n+  end;\n+\n+end Aggr22;"}, {"sha": "4fe86db3e9013b6c47d7c5bb6fdbd8792fbc2b8b", "filename": "gcc/testsuite/gnat.dg/aggr22.ads", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02d548063dec05650364fed2369d8f7d94c48fd8/gcc%2Ftestsuite%2Fgnat.dg%2Faggr22.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02d548063dec05650364fed2369d8f7d94c48fd8/gcc%2Ftestsuite%2Fgnat.dg%2Faggr22.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Faggr22.ads?ref=02d548063dec05650364fed2369d8f7d94c48fd8", "patch": "@@ -0,0 +1,16 @@\n+with System;\n+\n+package Aggr22 is\n+\n+   type Rec is record\n+     C : Character;\n+     I : aliased Integer;\n+   end record;\n+\n+   My_Rec : aliased Rec;\n+   pragma Import (Ada, My_Rec);\n+   for My_Rec'Address use System'To_Address (16#40086000#);\n+\n+   procedure Proc;\n+\n+end Aggr22;"}, {"sha": "e5393377a4337d9224ebe0591003b6db2b59b37a", "filename": "gcc/varasm.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02d548063dec05650364fed2369d8f7d94c48fd8/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02d548063dec05650364fed2369d8f7d94c48fd8/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=02d548063dec05650364fed2369d8f7d94c48fd8", "patch": "@@ -2924,6 +2924,13 @@ decode_addr_const (tree exp, struct addr_const *value)\n       x = output_constant_def (target, 1);\n       break;\n \n+    case INDIRECT_REF:\n+      /* This deals with absolute addresses.  */\n+      offset += tree_to_shwi (TREE_OPERAND (target, 0));\n+      x = gen_rtx_MEM (QImode,\n+\t\t       gen_rtx_SYMBOL_REF (Pmode, \"origin of addresses\"));\n+      break;\n+\n     default:\n       gcc_unreachable ();\n     }"}]}