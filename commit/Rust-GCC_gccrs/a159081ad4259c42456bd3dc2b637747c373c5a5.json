{"sha": "a159081ad4259c42456bd3dc2b637747c373c5a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTE1OTA4MWFkNDI1OWM0MjQ1NmJkM2RjMmI2Mzc3NDdjMzczYzVhNQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2020-11-02T07:59:02Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2020-11-02T10:03:30Z"}, "message": "tree-optimization/97650 - fix ICE in vect_get_and_check_slp_defs\n\nI was mistaken to treat vect_external_def as only applying to\nSSA_NAME defs, so check for that.\n\n2020-11-02  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/97650\n\t* tree-vect-slp.c (vect_get_and_check_slp_defs): Check\n\tfor SSA_NAME before checking SSA_NAME_IS_DEFAULT_DEF.\n\n\t* gcc.dg/vect/bb-slp-pr97650.c: New testcase.", "tree": {"sha": "3f2113fad492f1c6b4f622a5176ee809cbdf85eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3f2113fad492f1c6b4f622a5176ee809cbdf85eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a159081ad4259c42456bd3dc2b637747c373c5a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a159081ad4259c42456bd3dc2b637747c373c5a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a159081ad4259c42456bd3dc2b637747c373c5a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a159081ad4259c42456bd3dc2b637747c373c5a5/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4ad70477801548db4d37e8d540a3fd6ebbbcfd48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ad70477801548db4d37e8d540a3fd6ebbbcfd48", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ad70477801548db4d37e8d540a3fd6ebbbcfd48"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "f9c91fb5827f0ec676866d6f04885a3aa0e52c75", "filename": "gcc/testsuite/gcc.dg/vect/bb-slp-pr97650.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a159081ad4259c42456bd3dc2b637747c373c5a5/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fbb-slp-pr97650.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a159081ad4259c42456bd3dc2b637747c373c5a5/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fbb-slp-pr97650.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fbb-slp-pr97650.c?ref=a159081ad4259c42456bd3dc2b637747c373c5a5", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-Os -fallow-store-data-races\" } */\n+\n+short a=0;\n+unsigned long *volatile *volatile *volatile *b;\n+unsigned long *volatile *volatile *volatile **c[7];\n+void d() {\n+  short e=0;\n+  for (; a;) {\n+    e = 0;\n+    for (; e < 7; e++)\n+      c[e] = &b;\n+  }\n+}\n+int main() { return 0; }"}, {"sha": "d5249196d5eee44427ee3913d2e27137da504cbc", "filename": "gcc/tree-vect-slp.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a159081ad4259c42456bd3dc2b637747c373c5a5/gcc%2Ftree-vect-slp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a159081ad4259c42456bd3dc2b637747c373c5a5/gcc%2Ftree-vect-slp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-slp.c?ref=a159081ad4259c42456bd3dc2b637747c373c5a5", "patch": "@@ -530,6 +530,7 @@ vect_get_and_check_slp_defs (vec_info *vinfo, unsigned char swap,\n       if (backedge\n \t  && dts[i] == vect_external_def\n \t  && is_a <bb_vec_info> (vinfo)\n+\t  && TREE_CODE (oprnd) == SSA_NAME\n \t  && !SSA_NAME_IS_DEFAULT_DEF (oprnd)\n \t  && !dominated_by_p (CDI_DOMINATORS,\n \t\t\t      as_a <bb_vec_info> (vinfo)->bbs[0],"}]}