{"sha": "cf38f48a33db6760662fb12716f87b3e3a9ac732", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2YzOGY0OGEzM2RiNjc2MDY2MmZiMTI3MTZmODdiM2UzYTlhYzczMg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-03-25T13:28:41Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-03-25T13:28:41Z"}, "message": "* pt.c (tsubst_decl): Tsubst into DECL_BEFRIENDING_CLASSES.\n\nFrom-SVN: r25982", "tree": {"sha": "2fb8f30bee1981c6862f42fc02589582fa67f6d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2fb8f30bee1981c6862f42fc02589582fa67f6d5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cf38f48a33db6760662fb12716f87b3e3a9ac732", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf38f48a33db6760662fb12716f87b3e3a9ac732", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf38f48a33db6760662fb12716f87b3e3a9ac732", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf38f48a33db6760662fb12716f87b3e3a9ac732/comments", "author": null, "committer": null, "parents": [{"sha": "4e8d7ddc2a4fc825984ca301f5e12e9f4a739ec2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e8d7ddc2a4fc825984ca301f5e12e9f4a739ec2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e8d7ddc2a4fc825984ca301f5e12e9f4a739ec2"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "b6bff825ff76ddbc6c8ceed5fb620fb60ff5f493", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf38f48a33db6760662fb12716f87b3e3a9ac732/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf38f48a33db6760662fb12716f87b3e3a9ac732/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=cf38f48a33db6760662fb12716f87b3e3a9ac732", "patch": "@@ -1,3 +1,7 @@\n+1999-03-25  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* pt.c (tsubst_decl): Tsubst into DECL_BEFRIENDING_CLASSES.\n+\n 1999-03-25  Nathan Sidwell  <nathan@acm.org>\n \n \t* decl.c (init_decl_processing): Add `signed' type as a synonym"}, {"sha": "812cf94c4f466e5a26ec62995177e1c422e1fad5", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf38f48a33db6760662fb12716f87b3e3a9ac732/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf38f48a33db6760662fb12716f87b3e3a9ac732/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=cf38f48a33db6760662fb12716f87b3e3a9ac732", "patch": "@@ -5470,6 +5470,7 @@ tsubst_decl (t, args, type, in_decl)\n       {\n \ttree ctx;\n \ttree argvec = NULL_TREE;\n+\ttree *friends;\n \ttree gen_tmpl;\n \tint member;\n \tint args_depth;\n@@ -5669,6 +5670,17 @@ tsubst_decl (t, args, type, in_decl)\n \t      SET_IDENTIFIER_GLOBAL_VALUE (DECL_ASSEMBLER_NAME (r), r);\n \t  }\n \n+\t/* Copy the list of befriending classes.  */\n+\tfor (friends = &DECL_BEFRIENDING_CLASSES (r);\n+\t     *friends;\n+\t     friends = &TREE_CHAIN (*friends)) \n+\t  {\n+\t    *friends = copy_node (*friends);\n+\t    TREE_VALUE (*friends) = tsubst (TREE_VALUE (*friends),\n+\t\t\t\t\t    args, /*complain=*/1, \n+\t\t\t\t\t    in_decl);\n+\t  }\n+\n \tif (DECL_CONSTRUCTOR_P (r))\n \t  {\n \t    maybe_retrofit_in_chrg (r);"}, {"sha": "7840629e588e3f2642d51dc2e6042f0cb0c19bde", "filename": "gcc/testsuite/g++.old-deja/g++.pt/friend40.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf38f48a33db6760662fb12716f87b3e3a9ac732/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ffriend40.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf38f48a33db6760662fb12716f87b3e3a9ac732/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ffriend40.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ffriend40.C?ref=cf38f48a33db6760662fb12716f87b3e3a9ac732", "patch": "@@ -0,0 +1,11 @@\n+// Build don't link:\n+// Origin: Jason Merrill <jason@cygnus.com>\n+\n+template<class T> struct A\n+{\n+  friend void f ();\n+};\n+\n+A<short> a;\n+A<int> b;\n+"}]}