{"sha": "8f8bb1d2008496ba3856bc12f8b2cae12195c235", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGY4YmIxZDIwMDg0OTZiYTM4NTZiYzEyZjhiMmNhZTEyMTk1YzIzNQ==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "dvorakz@suse.cz", "date": "2006-11-12T20:59:28Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2006-11-12T20:59:28Z"}, "message": "tree-flow.h (name_mappings_registered_p): Declare.\n\n\t* tree-flow.h (name_mappings_registered_p): Declare.\n\t* tree-into-ssa.c (name_mappings_registered_p): New function.\n\t* tree-cfg.c (tree_can_merge_blocks_p): Check\n\tname_mappings_registered_p instead of need_ssa_update_p.\n\nFrom-SVN: r118732", "tree": {"sha": "ef6efd848adb18c3716797fe42c38a08f297a155", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ef6efd848adb18c3716797fe42c38a08f297a155"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8f8bb1d2008496ba3856bc12f8b2cae12195c235", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f8bb1d2008496ba3856bc12f8b2cae12195c235", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f8bb1d2008496ba3856bc12f8b2cae12195c235", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f8bb1d2008496ba3856bc12f8b2cae12195c235/comments", "author": null, "committer": null, "parents": [{"sha": "4d2280f60db6ea2a50ac3890bb1fd5073d705863", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d2280f60db6ea2a50ac3890bb1fd5073d705863", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d2280f60db6ea2a50ac3890bb1fd5073d705863"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "22b956f1ff5f991b7c46502ee083b3a50b7a5362", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f8bb1d2008496ba3856bc12f8b2cae12195c235/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f8bb1d2008496ba3856bc12f8b2cae12195c235/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8f8bb1d2008496ba3856bc12f8b2cae12195c235", "patch": "@@ -1,3 +1,10 @@\n+2006-11-12  Zdenek Dvorak <dvorakz@suse.cz>\n+\n+\t* tree-flow.h (name_mappings_registered_p): Declare.\n+\t* tree-into-ssa.c (name_mappings_registered_p): New function.\n+\t* tree-cfg.c (tree_can_merge_blocks_p): Check\n+\tname_mappings_registered_p instead of need_ssa_update_p.\n+\n 2006-11-12  Zdenek Dvorak <dvorakz@suse.cz>\n \n \t* tree-ssa-loop.c (tree_vectorize): Return the result of"}, {"sha": "7c397aaa8e69688b544e4b93145073238dbbd38e", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f8bb1d2008496ba3856bc12f8b2cae12195c235/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f8bb1d2008496ba3856bc12f8b2cae12195c235/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=8f8bb1d2008496ba3856bc12f8b2cae12195c235", "patch": "@@ -1200,11 +1200,13 @@ tree_can_merge_blocks_p (basic_block a, basic_block b)\n     return false;\n \n   /* It must be possible to eliminate all phi nodes in B.  If ssa form\n-     is not up-to-date, we cannot eliminate any phis.  */\n+     is not up-to-date, we cannot eliminate any phis; however, if only\n+     some symbols as whole are marked for renaming, this is not a problem,\n+     as phi nodes for those symbols are irrelevant in updating anyway.  */\n   phi = phi_nodes (b);\n   if (phi)\n     {\n-      if (need_ssa_update_p ())\n+      if (name_mappings_registered_p ())\n \treturn false;\n \n       for (; phi; phi = PHI_CHAIN (phi))\n@@ -1242,7 +1244,6 @@ replace_uses_by (tree name, tree val)\n   edge e;\n   unsigned i;\n \n-\n   FOR_EACH_IMM_USE_STMT (stmt, imm_iter, name)\n     {\n       FOR_EACH_IMM_USE_ON_STMT (use, imm_iter)"}, {"sha": "61910f9e1a94880c9794484eefd3cc283385e67a", "filename": "gcc/tree-flow.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f8bb1d2008496ba3856bc12f8b2cae12195c235/gcc%2Ftree-flow.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f8bb1d2008496ba3856bc12f8b2cae12195c235/gcc%2Ftree-flow.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-flow.h?ref=8f8bb1d2008496ba3856bc12f8b2cae12195c235", "patch": "@@ -716,6 +716,7 @@ void delete_update_ssa (void);\n void register_new_name_mapping (tree, tree);\n tree create_new_def_for (tree, tree, def_operand_p);\n bool need_ssa_update_p (void);\n+bool name_mappings_registered_p (void);\n bool name_registered_for_update_p (tree);\n bitmap ssa_names_to_replace (void);\n void release_ssa_name_after_update_ssa (tree name);"}, {"sha": "3bcddfebaeb8ca6d9e1cd4e5e9a0b35383726541", "filename": "gcc/tree-into-ssa.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f8bb1d2008496ba3856bc12f8b2cae12195c235/gcc%2Ftree-into-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f8bb1d2008496ba3856bc12f8b2cae12195c235/gcc%2Ftree-into-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-into-ssa.c?ref=8f8bb1d2008496ba3856bc12f8b2cae12195c235", "patch": "@@ -2659,6 +2659,13 @@ need_ssa_update_p (void)\n   return syms_to_rename || old_ssa_names || new_ssa_names;\n }\n \n+/* Return true if SSA name mappings have been registered for SSA updating.  */\n+\n+bool\n+name_mappings_registered_p (void)\n+{\n+  return repl_tbl && htab_elements (repl_tbl) > 0;\n+}\n \n /* Return true if name N has been registered in the replacement table.  */\n "}]}