{"sha": "d33744e42a08e71e9e3425dd9b08903e64c0f964", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDMzNzQ0ZTQyYTA4ZTcxZTllMzQyNWRkOWIwODkwM2U2NGMwZjk2NA==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2009-07-27T13:47:11Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-07-27T13:47:11Z"}, "message": "gnatfind.adb, [...]: Minor reformatting and code clean up.\n\n2009-07-27  Robert Dewar  <dewar@adacore.com>\n\n\t* gnatfind.adb, osint.ads, sem.adb, xr_tabls.adb: Minor reformatting\n\tand code clean up.\n\nFrom-SVN: r150117", "tree": {"sha": "c01f4f9157f276fa89e016d54921d2aad79f8c47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c01f4f9157f276fa89e016d54921d2aad79f8c47"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d33744e42a08e71e9e3425dd9b08903e64c0f964", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d33744e42a08e71e9e3425dd9b08903e64c0f964", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d33744e42a08e71e9e3425dd9b08903e64c0f964", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d33744e42a08e71e9e3425dd9b08903e64c0f964/comments", "author": null, "committer": null, "parents": [{"sha": "df7c3f6275380f0228dbf6edf62133357ec3a8d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df7c3f6275380f0228dbf6edf62133357ec3a8d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df7c3f6275380f0228dbf6edf62133357ec3a8d7"}], "stats": {"total": 46, "additions": 27, "deletions": 19}, "files": [{"sha": "bd34c32f360c485102fc455fdce052350d70abee", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d33744e42a08e71e9e3425dd9b08903e64c0f964/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d33744e42a08e71e9e3425dd9b08903e64c0f964/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=d33744e42a08e71e9e3425dd9b08903e64c0f964", "patch": "@@ -1,3 +1,8 @@\n+2009-07-27  Robert Dewar  <dewar@adacore.com>\n+\n+\t* gnatfind.adb, osint.ads, sem.adb, xr_tabls.adb: Minor reformatting\n+\tand code clean up.\n+\n 2009-07-27  Ed Schonberg  <schonberg@adacore.com>\n \n \t* exp_ch9.adb (Expand_N_Timed_Entry_Call): Do not attempt expansion in"}, {"sha": "8af7b9e4f8b57e1bc6a55e87b097eb8a68e95997", "filename": "gcc/ada/gnatfind.adb", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d33744e42a08e71e9e3425dd9b08903e64c0f964/gcc%2Fada%2Fgnatfind.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d33744e42a08e71e9e3425dd9b08903e64c0f964/gcc%2Fada%2Fgnatfind.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatfind.adb?ref=d33744e42a08e71e9e3425dd9b08903e64c0f964", "patch": "@@ -157,14 +157,13 @@ procedure Gnatfind is\n \n             --  Only switch starting with -- recognized is --RTS\n \n-            when '-'    =>\n-\n+            when '-' =>\n                if GNAT.Command_Line.Full_Switch = \"-RTS\" then\n+\n                   --  Check that it is the first time we see this switch\n \n                   if RTS_Specified = null then\n                      RTS_Specified := new String'(GNAT.Command_Line.Parameter);\n-\n                   elsif RTS_Specified.all /= GNAT.Command_Line.Parameter then\n                      Osint.Fail (\"--RTS cannot be specified multiple times\");\n                   end if;\n@@ -204,18 +203,21 @@ procedure Gnatfind is\n                                       \"adalib directory\");\n                      end if;\n                   end;\n+\n+               --  Process -ext switch\n+\n                elsif GNAT.Command_Line.Full_Switch = \"-ext\" then\n+\n                   --  Check that it is the first time we see this switch\n \n                   if EXT_Specified = null then\n                      EXT_Specified := new String'(GNAT.Command_Line.Parameter);\n-\n                   elsif EXT_Specified.all /= GNAT.Command_Line.Parameter then\n                      Osint.Fail (\"--ext cannot be specified multiple times\");\n                   end if;\n \n-                  if EXT_Specified'Length\n-                    = Osint.ALI_Default_Suffix'Length\n+                  if\n+                    EXT_Specified'Length = Osint.ALI_Default_Suffix'Length\n                   then\n                      Osint.ALI_Suffix := EXT_Specified.all'Access;\n                   else"}, {"sha": "a44d4e24b3cb171a4fc252e526f853fb9381738f", "filename": "gcc/ada/osint.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d33744e42a08e71e9e3425dd9b08903e64c0f964/gcc%2Fada%2Fosint.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d33744e42a08e71e9e3425dd9b08903e64c0f964/gcc%2Fada%2Fosint.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint.ads?ref=d33744e42a08e71e9e3425dd9b08903e64c0f964", "patch": "@@ -572,8 +572,8 @@ package Osint is\n    --  Get length of argument\n \n    ALI_Default_Suffix : constant String_Ptr := new String'(\"ali\");\n-   ALI_Suffix : String_Ptr := ALI_Default_Suffix;\n-   --  The suffix used for the library files (also known as ALI files)\n+   ALI_Suffix         : String_Ptr          := ALI_Default_Suffix;\n+   --  The suffixes used for the library files (also known as ALI files)\n \n private\n "}, {"sha": "b8ad571487e2a454c40c7514db4449415e10dc5d", "filename": "gcc/ada/sem.adb", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d33744e42a08e71e9e3425dd9b08903e64c0f964/gcc%2Fada%2Fsem.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d33744e42a08e71e9e3425dd9b08903e64c0f964/gcc%2Fada%2Fsem.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem.adb?ref=d33744e42a08e71e9e3425dd9b08903e64c0f964", "patch": "@@ -1873,13 +1873,12 @@ package body Sem is\n             Main_CU : constant Node_Id := Cunit (Main_Unit);\n \n          begin\n-\n-            --  If the main unit is an instantiation, the body appears\n-            --  before the instance spec, which is added later to the\n-            --  unit list. Do the spec if present, body will follow.\n+            --  If the main unit is an instantiation, the body appears before\n+            --  the instance spec, which is added later to the unit list. Do\n+            --  the spec if present, body will follow.\n \n             if Nkind (Original_Node (Unit (Main_CU)))\n-            in N_Generic_Instantiation\n+                 in N_Generic_Instantiation\n               and then Present (Library_Unit (Main_CU))\n             then\n                Do_Unit_And_Dependents\n@@ -1965,9 +1964,11 @@ package body Sem is\n                   end loop;\n \n                   --  See if it belongs to current unit, and if so, include its\n-                  --  with_clauses.\n+                  --  with_clauses. Do not process main unit prematurely.\n \n-                  if Pnode = CU then\n+                  if Pnode = CU\n+                    and then (CU /= Cunit (Main_Unit))\n+                  then\n                      Walk_Immediate (Cunit (S), Include_Limited);\n                   end if;\n                end;"}, {"sha": "95bdfa985d87ffe7477dcd7696efa1dd10479960", "filename": "gcc/ada/xr_tabls.adb", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d33744e42a08e71e9e3425dd9b08903e64c0f964/gcc%2Fada%2Fxr_tabls.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d33744e42a08e71e9e3425dd9b08903e64c0f964/gcc%2Fada%2Fxr_tabls.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fxr_tabls.adb?ref=d33744e42a08e71e9e3425dd9b08903e64c0f964", "patch": "@@ -824,14 +824,14 @@ package body Xr_Tabls is\n       end if;\n \n       if File.Dir = null then\n-         if Ada.Strings.Fixed.Tail (File.File.all, 3)\n-           = Osint.ALI_Suffix.all\n+         if Ada.Strings.Fixed.Tail (File.File.all, 3) =\n+                                               Osint.ALI_Suffix.all\n          then\n             Tmp := Locate_Regular_File\n-              (Internal_Strip (File.File.all), Directories.Obj_Dir);\n+                     (Internal_Strip (File.File.all), Directories.Obj_Dir);\n          else\n             Tmp := Locate_Regular_File\n-              (File.File.all, Directories.Src_Dir);\n+                     (File.File.all, Directories.Src_Dir);\n          end if;\n \n          if Tmp = null then"}]}