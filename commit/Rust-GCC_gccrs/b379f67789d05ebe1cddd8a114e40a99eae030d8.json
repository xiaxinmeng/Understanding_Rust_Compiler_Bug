{"sha": "b379f67789d05ebe1cddd8a114e40a99eae030d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjM3OWY2Nzc4OWQwNWViZTFjZGRkOGExMTRlNDBhOTllYWUwMzBkOA==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2010-09-20T22:15:17Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2010-09-20T22:15:17Z"}, "message": "gcc-dg.exp (clanup-stack-usage): Really remove .su files.\n\n\t* lib/gcc-dg.exp (clanup-stack-usage): Really remove .su files.\n\nFrom-SVN: r164466", "tree": {"sha": "0de180f133480dbba46535db093a0d03ecb39583", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0de180f133480dbba46535db093a0d03ecb39583"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b379f67789d05ebe1cddd8a114e40a99eae030d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b379f67789d05ebe1cddd8a114e40a99eae030d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b379f67789d05ebe1cddd8a114e40a99eae030d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b379f67789d05ebe1cddd8a114e40a99eae030d8/comments", "author": null, "committer": null, "parents": [{"sha": "48dbbcd6e29e7520b91dce52f492fa07fb6e4aad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48dbbcd6e29e7520b91dce52f492fa07fb6e4aad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48dbbcd6e29e7520b91dce52f492fa07fb6e4aad"}], "stats": {"total": 25, "additions": 21, "deletions": 4}, "files": [{"sha": "ac22fff6f857c5f6f0028ef69b210b8ea4be7c94", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b379f67789d05ebe1cddd8a114e40a99eae030d8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b379f67789d05ebe1cddd8a114e40a99eae030d8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b379f67789d05ebe1cddd8a114e40a99eae030d8", "patch": "@@ -1,3 +1,7 @@\n+2010-09-21  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* lib/gcc-dg.exp (clanup-stack-usage): Really remove .su files.\n+\n 2010-09-20  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/45438\n@@ -8281,7 +8285,7 @@\n \t* gfortran.dg/read_x_eof.f90: New test.\n \t* gfortran.dg/read_x_past.f: Update test.\n \n-2010-03-10  Jan Hubicka   <jh@suse.cz>\n+2010-03-10  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc.c-torture/compile/pr43288.c: New test.\n "}, {"sha": "4995c4982eb7b49784e638d704b0ce436de30d44", "filename": "gcc/testsuite/gfortran.dg/inline_transpose_1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b379f67789d05ebe1cddd8a114e40a99eae030d8/gcc%2Ftestsuite%2Fgfortran.dg%2Finline_transpose_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b379f67789d05ebe1cddd8a114e40a99eae030d8/gcc%2Ftestsuite%2Fgfortran.dg%2Finline_transpose_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finline_transpose_1.f90?ref=b379f67789d05ebe1cddd8a114e40a99eae030d8", "patch": "@@ -200,5 +200,5 @@ end subroutine toto\n ! { # Commented out as failing at -O0: dg-final { scan-tree-dump-times \"_gfortran_abort\" 32 \"optimized\" } }\n !\n ! cleanup\n-! { #dg-final { cleanup-tree-dump \"original\" } }\n+! { dg-final { cleanup-tree-dump \"original\" } }\n ! { dg-final { cleanup-tree-dump \"optimized\" } }"}, {"sha": "e52a23fe0d465564cead63b2ed4beb2ad7fff978", "filename": "gcc/testsuite/lib/gcc-dg.exp", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b379f67789d05ebe1cddd8a114e40a99eae030d8/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b379f67789d05ebe1cddd8a114e40a99eae030d8/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp?ref=b379f67789d05ebe1cddd8a114e40a99eae030d8", "patch": "@@ -461,8 +461,21 @@ proc cleanup-ipa-dump { suffix } {\n }\n \n # Remove a stack usage file for the current test.\n-proc cleanup-stack-usage { args } {\n-  cleanup-dump \"su\"\n+proc cleanup-stack-usage { } {\n+    # This assumes that we are two frames down from dg-test or some other proc\n+    # that stores the filename of the testcase in a local variable \"name\".\n+    # A cleaner solution would require a new DejaGnu release.\n+    upvar 2 name testcase\n+    # The name might include a list of options; extract the file name.\n+    set testcase [lindex $testcase 0]\n+    remove-build-file \"[file rootname [file tail $testcase]].su\"\n+\n+    # Clean up files for additional source files.\n+    if [info exists additional_sources] {\n+\tforeach srcfile $additional_sources {\n+\t    remove-build-file \"[file rootname [file tail $srcfile]].su\"\n+\t}\n+    }\n }\n \n # Remove all dump files with the provided suffix."}]}