{"sha": "789c274118d76ab0aab936c51e62a792bab3ab98", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzg5YzI3NDExOGQ3NmFiMGFhYjkzNmM1MWU2MmE3OTJiYWIzYWI5OA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-04-17T02:22:57Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-04-17T02:22:57Z"}, "message": "re PR ipa/60854 (inline constructor of extern template)\n\n\n\tPR ipa/60854\n\t* ipa.c (symtab_remove_unreachable_nodes): Mark targets of\n\texternal aliases alive, too.\n\t* g++.dg/torture/pr60854.C: New testcase.\n\nFrom-SVN: r209459", "tree": {"sha": "e83569f9f053202fd911a7bd3c28f928d43fec95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e83569f9f053202fd911a7bd3c28f928d43fec95"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/789c274118d76ab0aab936c51e62a792bab3ab98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/789c274118d76ab0aab936c51e62a792bab3ab98", "html_url": "https://github.com/Rust-GCC/gccrs/commit/789c274118d76ab0aab936c51e62a792bab3ab98", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/789c274118d76ab0aab936c51e62a792bab3ab98/comments", "author": null, "committer": null, "parents": [{"sha": "9950a4f2121966e72c27406d7eeb4dc55b8e2eec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9950a4f2121966e72c27406d7eeb4dc55b8e2eec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9950a4f2121966e72c27406d7eeb4dc55b8e2eec"}], "stats": {"total": 37, "additions": 36, "deletions": 1}, "files": [{"sha": "5cff60ebc36f5ac027126404bfe2a8c7b7a8d0b6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/789c274118d76ab0aab936c51e62a792bab3ab98/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/789c274118d76ab0aab936c51e62a792bab3ab98/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=789c274118d76ab0aab936c51e62a792bab3ab98", "patch": "@@ -1,3 +1,9 @@\n+2014-04-16  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/60854\n+\t* ipa.c (symtab_remove_unreachable_nodes): Mark targets of\n+\texternal aliases alive, too.\n+\n 2014-04-16  Andrew  Pinski  <apinski@cavium.com>\n \n \t* config/host-linux.c (TRY_EMPTY_VM_SPACE): Change aarch64 ilp32"}, {"sha": "3d82a39286c6288cbd42d4c59b75bdbbfb212d5a", "filename": "gcc/ipa.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/789c274118d76ab0aab936c51e62a792bab3ab98/gcc%2Fipa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/789c274118d76ab0aab936c51e62a792bab3ab98/gcc%2Fipa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa.c?ref=789c274118d76ab0aab936c51e62a792bab3ab98", "patch": "@@ -415,7 +415,18 @@ symtab_remove_unreachable_nodes (bool before_inlining_p, FILE *file)\n \t\t\t  || !DECL_EXTERNAL (e->callee->decl)\n \t\t\t  || e->callee->alias\n \t\t\t  || before_inlining_p))\n-\t\t    pointer_set_insert (reachable, e->callee);\n+\t\t    {\n+\t\t      /* Be sure that we will not optimize out alias target\n+\t\t\t body.  */\n+\t\t      if (DECL_EXTERNAL (e->callee->decl)\n+\t\t\t  && e->callee->alias\n+\t\t\t  && before_inlining_p)\n+\t\t\t{\n+\t\t          pointer_set_insert (reachable,\n+\t\t\t\t\t      cgraph_function_node (e->callee));\n+\t\t\t}\n+\t\t      pointer_set_insert (reachable, e->callee);\n+\t\t    }\n \t\t  enqueue_node (e->callee, &first, reachable);\n \t\t}\n "}, {"sha": "de911fd4f40473025aae8de9d79a46286e06a56d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/789c274118d76ab0aab936c51e62a792bab3ab98/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/789c274118d76ab0aab936c51e62a792bab3ab98/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=789c274118d76ab0aab936c51e62a792bab3ab98", "patch": "@@ -1,3 +1,8 @@\n+2014-04-16  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/60854\n+\t* g++.dg/torture/pr60854.C: New testcase.\n+\n 2014-04-16  Catherine Moore  <clm@codesourcery.com>\n \n \t* gcc.target/mips/umips-store16-2.c: New test."}, {"sha": "fa4b2e71ab7eca8488d8d3170e4dc4debc32becb", "filename": "gcc/testsuite/g++.dg/torture/pr60854.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/789c274118d76ab0aab936c51e62a792bab3ab98/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr60854.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/789c274118d76ab0aab936c51e62a792bab3ab98/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr60854.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr60854.C?ref=789c274118d76ab0aab936c51e62a792bab3ab98", "patch": "@@ -0,0 +1,13 @@\n+template <typename T>\n+class MyClass\n+{\n+public:\n+  __attribute__ ((__always_inline__)) inline MyClass () { ; }\n+};\n+\n+extern template class MyClass<double>;\n+\n+void Func()\n+{\n+  MyClass<double> x;\n+}"}]}