{"sha": "baf3fbad0de4fd24bb8ed34f4b8bde9715fee33f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmFmM2ZiYWQwZGU0ZmQyNGJiOGVkMzRmNGI4YmRlOTcxNWZlZTMzZg==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2015-08-14T01:18:14Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2015-08-14T01:18:14Z"}, "message": "jit: on OS X, add -Wl,-undefined,dynamic_lookup to driver invocation\n\ngcc/jit/ChangeLog:\n\t* jit-playback.c (invoke_driver): On OS X, add\n\t\"-Wl,-undefined,dynamic_lookup\" to the driver arguments.\n\nFrom-SVN: r226882", "tree": {"sha": "80fbb70cb9c8b0ee23ce5adf5a4faa851146543d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/80fbb70cb9c8b0ee23ce5adf5a4faa851146543d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/baf3fbad0de4fd24bb8ed34f4b8bde9715fee33f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/baf3fbad0de4fd24bb8ed34f4b8bde9715fee33f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/baf3fbad0de4fd24bb8ed34f4b8bde9715fee33f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/baf3fbad0de4fd24bb8ed34f4b8bde9715fee33f/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3f7fd1822b4e0e771008edbdf13d3894a9871f83", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f7fd1822b4e0e771008edbdf13d3894a9871f83", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f7fd1822b4e0e771008edbdf13d3894a9871f83"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "efa0d8892036bfd767ea31c1ee93141d63b83e7d", "filename": "gcc/jit/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/baf3fbad0de4fd24bb8ed34f4b8bde9715fee33f/gcc%2Fjit%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/baf3fbad0de4fd24bb8ed34f4b8bde9715fee33f/gcc%2Fjit%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjit%2FChangeLog?ref=baf3fbad0de4fd24bb8ed34f4b8bde9715fee33f", "patch": "@@ -1,3 +1,8 @@\n+2015-08-13  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* jit-playback.c (invoke_driver): On OS X, add\n+\t\"-Wl,-undefined,dynamic_lookup\" to the driver arguments.\n+\n 2015-08-03  David Malcolm  <dmalcolm@redhat.com>\n \n \t* docs/topics/compatibility.rst (LIBGCCJIT_ABI_4): New."}, {"sha": "01cfd4baf13ec09acbd0dc7d67852ee77d3212cd", "filename": "gcc/jit/jit-playback.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/baf3fbad0de4fd24bb8ed34f4b8bde9715fee33f/gcc%2Fjit%2Fjit-playback.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/baf3fbad0de4fd24bb8ed34f4b8bde9715fee33f/gcc%2Fjit%2Fjit-playback.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjit%2Fjit-playback.c?ref=baf3fbad0de4fd24bb8ed34f4b8bde9715fee33f", "patch": "@@ -2416,6 +2416,15 @@ invoke_driver (const char *ctxt_progname,\n      time.  */\n   ADD_ARG (\"-fno-use-linker-plugin\");\n \n+#if defined (DARWIN_X86) || defined (DARWIN_PPC)\n+  /* OS X's linker defaults to treating undefined symbols as errors.\n+     If the context has any imported functions or globals they will be\n+     undefined until the .so is dynamically-linked into the process.\n+     Ensure that the driver passes in \"-undefined dynamic_lookup\" to the\n+     linker.  */\n+  ADD_ARG (\"-Wl,-undefined,dynamic_lookup\");\n+#endif\n+\n   /* pex argv arrays are NULL-terminated.  */\n   argvec.safe_push (NULL);\n "}]}