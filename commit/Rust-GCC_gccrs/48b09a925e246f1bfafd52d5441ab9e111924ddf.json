{"sha": "48b09a925e246f1bfafd52d5441ab9e111924ddf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDhiMDlhOTI1ZTI0NmYxYmZhZmQ1MmQ1NDQxYWI5ZTExMTkyNGRkZg==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@codesourcery.com", "date": "2010-06-12T07:44:51Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2010-06-12T07:44:51Z"}, "message": "config.gcc (mips64*-*-linux*, [...]): Add crtfastmath.o to extra_parts.\n\ngcc/\n\t* config.gcc (mips64*-*-linux*, mipsisa64*-*-linux*,\n\tmips*-*-linux*): Add crtfastmath.o to extra_parts.\n\t* config/mips/crtfastmath.c: New.\n\t* config/mips/linux.h (ENDFILE_SPEC): New.\n\nlibgcc/\n\t* config.host (mips64*-*-linux*, mips*-*-linux*): Add mips/t-crtfm\n\tto tmake_file.  Add crtfastmath.o to extra_parts.\n\t* config/mips/t-crtfm: New.\n\nFrom-SVN: r160655", "tree": {"sha": "9df2902968711e22f82bc2ba2cfc2ded7649e0af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9df2902968711e22f82bc2ba2cfc2ded7649e0af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48b09a925e246f1bfafd52d5441ab9e111924ddf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48b09a925e246f1bfafd52d5441ab9e111924ddf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48b09a925e246f1bfafd52d5441ab9e111924ddf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48b09a925e246f1bfafd52d5441ab9e111924ddf/comments", "author": null, "committer": null, "parents": [{"sha": "b53cd1c5cf3aa84837b677fda803c1664857774a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b53cd1c5cf3aa84837b677fda803c1664857774a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b53cd1c5cf3aa84837b677fda803c1664857774a"}], "stats": {"total": 81, "additions": 81, "deletions": 0}, "files": [{"sha": "0102777ed2dbeaf78983dfcee10ee2b4caca9b8c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48b09a925e246f1bfafd52d5441ab9e111924ddf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48b09a925e246f1bfafd52d5441ab9e111924ddf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=48b09a925e246f1bfafd52d5441ab9e111924ddf", "patch": "@@ -1,3 +1,10 @@\n+2010-06-12  Kazu Hirata  <kazu@codesourcery.com>\n+\n+\t* config.gcc (mips64*-*-linux*, mipsisa64*-*-linux*,\n+\tmips*-*-linux*): Add crtfastmath.o to extra_parts.\n+\t* config/mips/crtfastmath.c: New.\n+\t* config/mips/linux.h (ENDFILE_SPEC): New.\n+\n 2010-06-12  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* graphite-clast-to-gimple.c (gcc_type_for_interval): Do not pass"}, {"sha": "7ae54cca5fcb314214596ccaafd10189c64096d0", "filename": "gcc/config.gcc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48b09a925e246f1bfafd52d5441ab9e111924ddf/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48b09a925e246f1bfafd52d5441ab9e111924ddf/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=48b09a925e246f1bfafd52d5441ab9e111924ddf", "patch": "@@ -1750,6 +1750,7 @@ mips64*-*-linux* | mipsisa64*-*-linux*)\n \t\t\ttm_defines=\"${tm_defines} MIPS_ISA_DEFAULT=65\"\n \t\t\t;;\n \tesac\n+\textra_parts=\"$extra_parts crtfastmath.o\"\n \tgnu_ld=yes\n \tgas=yes\n \ttest x$with_llsc != x || with_llsc=yes\n@@ -1764,6 +1765,7 @@ mips*-*-linux*)\t\t\t\t# Linux MIPS, either endian.\n         mipsisa32*)\n \t\ttm_defines=\"${tm_defines} MIPS_ISA_DEFAULT=32\"\n         esac\n+\textra_parts=\"$extra_parts crtfastmath.o\"\n \ttest x$with_llsc != x || with_llsc=yes\n \t;;\n mips*-*-openbsd*)"}, {"sha": "a9586b0a797b135410c31d3a126109ad5edf0e27", "filename": "gcc/config/mips/crtfastmath.c", "status": "added", "additions": 53, "deletions": 0, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48b09a925e246f1bfafd52d5441ab9e111924ddf/gcc%2Fconfig%2Fmips%2Fcrtfastmath.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48b09a925e246f1bfafd52d5441ab9e111924ddf/gcc%2Fconfig%2Fmips%2Fcrtfastmath.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fcrtfastmath.c?ref=48b09a925e246f1bfafd52d5441ab9e111924ddf", "patch": "@@ -0,0 +1,53 @@\n+/* Copyright (C) 2010 Free Software Foundation, Inc. \n+\n+   This file is part of GCC.\n+\n+   GCC is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3, or (at your option)\n+   any later version.\n+\n+   GCC is distributed in the hope that it will be useful, but WITHOUT\n+   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n+   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n+   License for more details.\n+\n+   Under Section 7 of GPL version 3, you are granted additional\n+   permissions described in the GCC Runtime Library Exception, version\n+   3.1, as published by the Free Software Foundation.\n+\n+   You should have received a copy of the GNU General Public License\n+   and a copy of the GCC Runtime Library Exception along with this\n+   program; see the files COPYING3 and COPYING.RUNTIME respectively.\n+   If not, see <http://www.gnu.org/licenses/>.  */\n+\n+#ifdef __mips_hard_float\n+\n+/* Flush denormalized numbers to zero.  */\n+#define _FPU_FLUSH_TZ   0x1000000\n+\n+/* Rounding control.  */\n+#define _FPU_RC_NEAREST 0x0     /* RECOMMENDED */\n+#define _FPU_RC_ZERO    0x1\n+#define _FPU_RC_UP      0x2\n+#define _FPU_RC_DOWN    0x3\n+\n+/* Enable interrupts for IEEE exceptions.  */\n+#define _FPU_IEEE     0x00000F80\n+\n+/* Macros for accessing the hardware control word.  */\n+#define _FPU_GETCW(cw) __asm__ (\"cfc1 %0,$31\" : \"=r\" (cw))\n+#define _FPU_SETCW(cw) __asm__ (\"ctc1 %0,$31\" : : \"r\" (cw))\n+\n+static void __attribute__((constructor))\n+set_fast_math (void)\n+{\n+  unsigned int fcr;\n+\n+  /* Flush to zero, round to nearest, IEEE exceptions disabled.  */\n+  fcr = _FPU_FLUSH_TZ | _FPU_RC_NEAREST;\n+\n+  _FPU_SETCW(fcr);\n+}\n+\n+#endif /* __mips_hard_float */"}, {"sha": "8087e8ffd12e288bce34d839d7d7e3508c2223cd", "filename": "gcc/config/mips/linux.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48b09a925e246f1bfafd52d5441ab9e111924ddf/gcc%2Fconfig%2Fmips%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48b09a925e246f1bfafd52d5441ab9e111924ddf/gcc%2Fconfig%2Fmips%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Flinux.h?ref=48b09a925e246f1bfafd52d5441ab9e111924ddf", "patch": "@@ -147,3 +147,9 @@ extern const char *host_detect_local_cpu (int argc, const char **argv);\n #define DRIVER_SELF_SPECS \\\n   BASE_DRIVER_SELF_SPECS, \\\n   LINUX_DRIVER_SELF_SPECS\n+\n+/* Similar to standard Linux, but adding -ffast-math support.  */\n+#undef  ENDFILE_SPEC\n+#define ENDFILE_SPEC \\\n+  \"%{ffast-math|funsafe-math-optimizations:crtfastmath.o%s} \\\n+   %{shared|pie:crtendS.o%s;:crtend.o%s} crtn.o%s\""}, {"sha": "a261a056f696f4909ecb1028f8d022a5afaa2c4e", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48b09a925e246f1bfafd52d5441ab9e111924ddf/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48b09a925e246f1bfafd52d5441ab9e111924ddf/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=48b09a925e246f1bfafd52d5441ab9e111924ddf", "patch": "@@ -1,3 +1,9 @@\n+2010-06-12  Kazu Hirata  <kazu@codesourcery.com>\n+\n+\t* config.host (mips64*-*-linux*, mips*-*-linux*): Add mips/t-crtfm\n+\tto tmake_file.  Add crtfastmath.o to extra_parts.\n+\t* config/mips/t-crtfm: New.\n+\n 2010-05-19  Joel Sherrill <joel.sherrill@oarcorp.com>\n \n \t* config.host (sparc64-*-rtems*): New target."}, {"sha": "6784147d6d707b5e70e19a2357e86279a3112b76", "filename": "libgcc/config.host", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48b09a925e246f1bfafd52d5441ab9e111924ddf/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48b09a925e246f1bfafd52d5441ab9e111924ddf/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=48b09a925e246f1bfafd52d5441ab9e111924ddf", "patch": "@@ -400,8 +400,12 @@ mips-sgi-irix[56]*)\n mips*-*-netbsd*)\t\t\t# NetBSD/mips, either endian.\n \t;;\n mips64*-*-linux*)\n+\textra_parts=\"$extra_parts crtfastmath.o\"\n+\ttmake_file=\"{$tmake_file} mips/t-crtfm\"\n \t;;\n mips*-*-linux*)\t\t\t\t# Linux MIPS, either endian.\n+\textra_parts=\"$extra_parts crtfastmath.o\"\n+\ttmake_file=\"{$tmake_file} mips/t-crtfm\"\n \t;;\n mips*-*-openbsd*)\n \t;;"}, {"sha": "fe2e06619b1134dda64beba55c8d7d4dc2ee3e02", "filename": "libgcc/config/mips/t-crtfm", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48b09a925e246f1bfafd52d5441ab9e111924ddf/libgcc%2Fconfig%2Fmips%2Ft-crtfm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48b09a925e246f1bfafd52d5441ab9e111924ddf/libgcc%2Fconfig%2Fmips%2Ft-crtfm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmips%2Ft-crtfm?ref=48b09a925e246f1bfafd52d5441ab9e111924ddf", "patch": "@@ -0,0 +1,3 @@\n+crtfastmath.o: $(gcc_srcdir)/config/mips/crtfastmath.c\n+\t$(gcc_compile) -c $(gcc_srcdir)/config/mips/crtfastmath.c\n+"}]}