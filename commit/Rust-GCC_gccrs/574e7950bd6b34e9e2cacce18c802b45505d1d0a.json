{"sha": "574e7950bd6b34e9e2cacce18c802b45505d1d0a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTc0ZTc5NTBiZDZiMzRlOWUyY2FjY2UxOGM4MDJiNDU1MDVkMWQwYQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2021-06-18T16:16:25Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2021-08-24T10:45:13Z"}, "message": "arm: add erratum mitigation to __gnu_cmse_nonsecure_call [PR102035]\n\nAdd the recommended erratum mitigation sequence to\n__gnu_cmse_nonsecure_call for use on Armv8-m.main devices. Since this\nis in the library code we cannot know in advance whether the core we\nare running on will be affected by this, so always enable it.\n\nlibgcc:\n\tPR target/102035\n\t* config/arm/cmse_nonsecure_call.S (__gnu_cmse_nonsecure_call):\n\tAdd vlldm erratum work-around.", "tree": {"sha": "5c7752f47e18236e7c7b84e7727b191eadf0eb25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c7752f47e18236e7c7b84e7727b191eadf0eb25"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/574e7950bd6b34e9e2cacce18c802b45505d1d0a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/574e7950bd6b34e9e2cacce18c802b45505d1d0a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/574e7950bd6b34e9e2cacce18c802b45505d1d0a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/574e7950bd6b34e9e2cacce18c802b45505d1d0a/comments", "author": null, "committer": null, "parents": [{"sha": "3929bca9ca95de9d35e82ae8828b188029e3eb70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3929bca9ca95de9d35e82ae8828b188029e3eb70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3929bca9ca95de9d35e82ae8828b188029e3eb70"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "c8e0fbbe665d037bea532ceeb4faa4a4adace66f", "filename": "libgcc/config/arm/cmse_nonsecure_call.S", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/574e7950bd6b34e9e2cacce18c802b45505d1d0a/libgcc%2Fconfig%2Farm%2Fcmse_nonsecure_call.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/574e7950bd6b34e9e2cacce18c802b45505d1d0a/libgcc%2Fconfig%2Farm%2Fcmse_nonsecure_call.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Farm%2Fcmse_nonsecure_call.S?ref=574e7950bd6b34e9e2cacce18c802b45505d1d0a", "patch": "@@ -102,6 +102,11 @@ blxns\t    r4\n #ifdef __ARM_PCS_VFP\n vpop.f64    {d8-d15}\n #else\n+/* VLLDM erratum mitigation sequence. */\n+mrs\t    r5, control\n+tst\t    r5, #8\t  /* CONTROL_S.SFPA */\n+it\t    ne\n+.inst.w\t    0xeeb00a40\t  /* vmovne s0, s0 */\n vlldm\t    sp\t\t  /* Lazy restore of d0-d16 and FPSCR.  */\n add\t    sp, sp, #0x88 /* Free space used to save floating point registers.  */\n #endif /* __ARM_PCS_VFP */"}]}