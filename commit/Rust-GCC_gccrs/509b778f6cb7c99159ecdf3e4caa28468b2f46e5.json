{"sha": "509b778f6cb7c99159ecdf3e4caa28468b2f46e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTA5Yjc3OGY2Y2I3Yzk5MTU5ZWNkZjNlNGNhYTI4NDY4YjJmNDZlNQ==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2016-07-21T19:38:57Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2016-07-21T19:38:57Z"}, "message": "Define missing delete operators in libstdc++ testsuite\n\n\t* testsuite/23_containers/vector/zero_sized_allocations.cc:\n\tDefine sized deallocation function.\n\t* testsuite/util/testsuite_new_operators.h:\n\t(operator delete(void*, const std::nothrow_t&)): Define nothrow\n\tdeallocation function.\n\nFrom-SVN: r238610", "tree": {"sha": "f1d4d2f2ce4464822f9185d06dcc7ef2c7fbafdf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f1d4d2f2ce4464822f9185d06dcc7ef2c7fbafdf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/509b778f6cb7c99159ecdf3e4caa28468b2f46e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/509b778f6cb7c99159ecdf3e4caa28468b2f46e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/509b778f6cb7c99159ecdf3e4caa28468b2f46e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/509b778f6cb7c99159ecdf3e4caa28468b2f46e5/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e93a101f83b67b47f2247505ff6fa9f39aa47442", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e93a101f83b67b47f2247505ff6fa9f39aa47442", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e93a101f83b67b47f2247505ff6fa9f39aa47442"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "9a0a71b43f74996b9ff83480f47b9ebec15bfdfa", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/509b778f6cb7c99159ecdf3e4caa28468b2f46e5/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/509b778f6cb7c99159ecdf3e4caa28468b2f46e5/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=509b778f6cb7c99159ecdf3e4caa28468b2f46e5", "patch": "@@ -1,5 +1,11 @@\n 2016-07-21  Jonathan Wakely  <jwakely@redhat.com>\n \n+\t* testsuite/23_containers/vector/zero_sized_allocations.cc:\n+\tDefine sized deallocation function.\n+\t* testsuite/util/testsuite_new_operators.h:\n+\t(operator delete(void*, const std::nothrow_t&)): Define nothrow\n+\tdeallocation function.\n+\n \t* testsuite/21_strings/basic_string/modifiers/append/char/1.cc: Fix\n \treads past the end of strings.\n \t* testsuite/21_strings/basic_string/operations/compare/char/1.cc:"}, {"sha": "74fa95cc841c383fe47124712e1eeece600ab6d5", "filename": "libstdc++-v3/testsuite/23_containers/vector/zero_sized_allocations.cc", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/509b778f6cb7c99159ecdf3e4caa28468b2f46e5/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Fzero_sized_allocations.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/509b778f6cb7c99159ecdf3e4caa28468b2f46e5/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Fzero_sized_allocations.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Fzero_sized_allocations.cc?ref=509b778f6cb7c99159ecdf3e4caa28468b2f46e5", "patch": "@@ -22,7 +22,7 @@\n \n unsigned int zero_sized_news = 0;\n \n-void *operator new(size_t size) throw (std::bad_alloc)\n+void *operator new(std::size_t size) throw (std::bad_alloc)\n {\n   /* malloc(0) is unpredictable; avoid it.  */\n   if (size == 0)\n@@ -45,6 +45,14 @@ void operator delete(void *ptr) throw()\n     std::free(ptr);\n }\n \n+#if __cpp_sized_deallocation\n+void operator delete(void *ptr, std::size_t) throw()\n+{\n+  if (ptr != 0)\n+    std::free(ptr);\n+}\n+#endif\n+\n // http://gcc.gnu.org/ml/libstdc++/2007-09/msg00006.html\n void test01()\n {\n@@ -57,7 +65,7 @@ void test01()\n   VERIFY( zero_sized_news == 0 );\n \n   v->resize(10);\n-  delete(v);\n+  delete v;\n   VERIFY( zero_sized_news == 0 );\n }\n "}, {"sha": "6713fb83ed817f4327a75d2e2a74bf4df0fca23e", "filename": "libstdc++-v3/testsuite/util/testsuite_new_operators.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/509b778f6cb7c99159ecdf3e4caa28468b2f46e5/libstdc%2B%2B-v3%2Ftestsuite%2Futil%2Ftestsuite_new_operators.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/509b778f6cb7c99159ecdf3e4caa28468b2f46e5/libstdc%2B%2B-v3%2Ftestsuite%2Futil%2Ftestsuite_new_operators.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Futil%2Ftestsuite_new_operators.h?ref=509b778f6cb7c99159ecdf3e4caa28468b2f46e5", "patch": "@@ -64,6 +64,13 @@ void operator delete(void* p) throw()\n     std::free(p);\n }\n \n+void operator delete(void* p, const std::nothrow_t&) throw()\n+{\n+  if (p)\n+    std::free(p);\n+}\n+\n+\n #endif // _GLIBCXX_TESTSUITE_NEW_OPERATORS_H\n \n "}]}