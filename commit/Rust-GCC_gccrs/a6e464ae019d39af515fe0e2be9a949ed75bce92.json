{"sha": "a6e464ae019d39af515fe0e2be9a949ed75bce92", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTZlNDY0YWUwMTlkMzlhZjUxNWZlMGUyYmU5YTk0OWVkNzViY2U5Mg==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@bitrange.com", "date": "2003-03-09T01:20:03Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2003-03-09T01:20:03Z"}, "message": "aout.h (CRIS_CPP_SUBTARGET_SPEC): Move -D__AOUT__ to...\n\n\t* config/cris/aout.h (CRIS_CPP_SUBTARGET_SPEC): Move -D__AOUT__ to...\n\t(TARGET_OS_CPP_BUILTINS): New macro.\n\t* config/cris/cris.h (CRIS_CPP_SUBTARGET_SPEC): Move -D__ELF__ to...\n\t(TARGET_OS_CPP_BUILTINS): New macro.\n\t(CPP_PREDEFINES): Don't define.  Move old definitions and...\n\t(CPP_SPEC): ...move -D__CRIS_ABI_version=2 to...\n\t(TARGET_CPU_CPP_BUILTINS): New macro.\n\t* config/cris/linux.h (CRIS_CPP_SUBTARGET_SPEC): Move constant\n\tdefinitions and the optional __PIC__, __pic__ and\n\t__NO_UNDERSCORES__ definitions to...\n\t(TARGET_OS_CPP_BUILTINS): New macro.\n\nFrom-SVN: r64014", "tree": {"sha": "913ded9b8b4eca49a4b84321520a46f133e80a43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/913ded9b8b4eca49a4b84321520a46f133e80a43"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6e464ae019d39af515fe0e2be9a949ed75bce92", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6e464ae019d39af515fe0e2be9a949ed75bce92", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6e464ae019d39af515fe0e2be9a949ed75bce92", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6e464ae019d39af515fe0e2be9a949ed75bce92/comments", "author": null, "committer": null, "parents": [{"sha": "00a221f0ac842627bbbd9f40213eef9cb5b32007", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00a221f0ac842627bbbd9f40213eef9cb5b32007", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00a221f0ac842627bbbd9f40213eef9cb5b32007"}], "stats": {"total": 82, "additions": 69, "deletions": 13}, "files": [{"sha": "a64ec2376fd12f327db023758e8f0ef0442f2730", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6e464ae019d39af515fe0e2be9a949ed75bce92/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6e464ae019d39af515fe0e2be9a949ed75bce92/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a6e464ae019d39af515fe0e2be9a949ed75bce92", "patch": "@@ -1,5 +1,17 @@\n 2003-03-09  Hans-Peter Nilsson  <hp@bitrange.com>\n \n+\t* config/cris/aout.h (CRIS_CPP_SUBTARGET_SPEC): Move -D__AOUT__ to...\n+\t(TARGET_OS_CPP_BUILTINS): New macro.\n+\t* config/cris/cris.h (CRIS_CPP_SUBTARGET_SPEC): Move -D__ELF__ to...\n+\t(TARGET_OS_CPP_BUILTINS): New macro.\n+\t(CPP_PREDEFINES): Don't define.  Move old definitions and...\n+\t(CPP_SPEC): ...move -D__CRIS_ABI_version=2 to...\n+\t(TARGET_CPU_CPP_BUILTINS): New macro.\n+\t* config/cris/linux.h (CRIS_CPP_SUBTARGET_SPEC): Move constant\n+\tdefinitions and the optional __PIC__, __pic__ and\n+\t__NO_UNDERSCORES__ definitions to...\n+\t(TARGET_OS_CPP_BUILTINS): New macro.\n+\n \t* flags.h (flag_leading_underscore): Declare.\n \n \t* c-opts.c (c_common_post_options): On fopen failure, return"}, {"sha": "db98c3fe9571af484775f73e7726175f6969df3d", "filename": "gcc/config/cris/aout.h", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6e464ae019d39af515fe0e2be9a949ed75bce92/gcc%2Fconfig%2Fcris%2Faout.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6e464ae019d39af515fe0e2be9a949ed75bce92/gcc%2Fconfig%2Fcris%2Faout.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fcris%2Faout.h?ref=a6e464ae019d39af515fe0e2be9a949ed75bce92", "patch": "@@ -64,8 +64,7 @@ Boston, MA 02111-1307, USA.  */\n \n #undef CRIS_CPP_SUBTARGET_SPEC\n #define CRIS_CPP_SUBTARGET_SPEC \\\n- \"-D__AOUT__\\\n-  %{melinux:-D__gnu_linux__ -D__linux__ -D__unix__ -D__elinux__ -D__uclinux__\\\n+ \"%{melinux:-D__gnu_linux__ -D__linux__ -D__unix__ -D__elinux__ -D__uclinux__\\\n     %{!nostdinc:\\\n       %{!mbest-lib-options:%{isystem*}}\\\n       -isystem elinux/include%s\\\n@@ -118,6 +117,19 @@ Boston, MA 02111-1307, USA.  */\n #undef CRIS_SUBTARGET_DEFAULT\n #define CRIS_SUBTARGET_DEFAULT 0\n \n+\n+/* Node: Run-time Target */\n+\n+/* For the cris-*-aout subtarget.  */\n+#undef TARGET_OS_CPP_BUILTINS\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      builtin_define (\"__AOUT__\");\t\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n+\n+\n /* Node: Storage Layout */\n \n /* We can align to 16 bits (only) with CRIS a.out.  */"}, {"sha": "13bff9cee3bbe768c20036806b565b25c900a0ac", "filename": "gcc/config/cris/cris.h", "status": "modified", "additions": 19, "deletions": 6, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6e464ae019d39af515fe0e2be9a949ed75bce92/gcc%2Fconfig%2Fcris%2Fcris.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6e464ae019d39af515fe0e2be9a949ed75bce92/gcc%2Fconfig%2Fcris%2Fcris.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fcris%2Fcris.h?ref=a6e464ae019d39af515fe0e2be9a949ed75bce92", "patch": "@@ -116,8 +116,7 @@ extern const char *cris_elinux_stacksize_str;\n    Note that -melf overrides -maout.  */\n \n #define CPP_SPEC \\\n- \"-D__CRIS_ABI_version=2\\\n-  %{mtune=*:-D__tune_%* %{mtune=v*:-D__CRIS_arch_tune=%*}}\\\n+ \"%{mtune=*:-D__tune_%* %{mtune=v*:-D__CRIS_arch_tune=%*}}\\\n    %{mtune=etrax4:-D__tune_v3 -D__CRIS_arch_tune=3}\\\n    %{mtune=etrax100:-D__tune_v8 -D__CRIS_arch_tune=8}\\\n    %{mtune=svinto:-D__tune_v8 -D__CRIS_arch_tune=8}\\\n@@ -141,8 +140,7 @@ extern const char *cris_elinux_stacksize_str;\n \n /* For the cris-*-elf subtarget.  */\n #define CRIS_CPP_SUBTARGET_SPEC \\\n- \"-D__ELF__\\\n-  %{mbest-lib-options:\\\n+ \"%{mbest-lib-options:\\\n    %{!moverride-best-lib-options:\\\n     %{!march=*:%{!metrax*:%{!mcpu=*:-D__tune_v10 -D__CRIS_arch_tune=10}}}}}\"\n \n@@ -246,8 +244,23 @@ extern const char *cris_elinux_stacksize_str;\n \n /* Node: Run-time Target */\n \n-/* Only keep the non-varying ones here.  */\n-#define CPP_PREDEFINES\t\"-Dcris -DCRIS -DGNU_CRIS\"\n+#define TARGET_CPU_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      builtin_define_std (\"cris\");\t\t\\\n+      builtin_define_std (\"CRIS\");\t\t\\\n+      builtin_define_std (\"GNU_CRIS\");\t\t\\\n+      builtin_define (\"__CRIS_ABI_version=2\");\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n+\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      builtin_define (\"__ELF__\");\t\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n+\n \n /* This needs to be at least 32 bits.  */\n extern int target_flags;"}, {"sha": "f85743f7a9af2443dcca03113bdc6b4a161eec1a", "filename": "gcc/config/cris/linux.h", "status": "modified", "additions": 24, "deletions": 5, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6e464ae019d39af515fe0e2be9a949ed75bce92/gcc%2Fconfig%2Fcris%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6e464ae019d39af515fe0e2be9a949ed75bce92/gcc%2Fconfig%2Fcris%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fcris%2Flinux.h?ref=a6e464ae019d39af515fe0e2be9a949ed75bce92", "patch": "@@ -1,5 +1,5 @@\n /* Definitions for GCC.  Part of the machine description for CRIS.\n-   Copyright (C) 2001, 2002 Free Software Foundation, Inc.\n+   Copyright (C) 2001, 2002, 2003 Free Software Foundation, Inc.\n    Contributed by Axis Communications.  Written by Hans-Peter Nilsson.\n \n This file is part of GCC.\n@@ -47,10 +47,7 @@ Boston, MA 02111-1307, USA.  */\n \n #undef CRIS_CPP_SUBTARGET_SPEC\n #define CRIS_CPP_SUBTARGET_SPEC \\\n-  \"-D__gnu_linux__ -D__linux__ -D__unix__  -D__ELF__\\\n-   %{pthread:-D_REENTRANT}\\\n-   %{fPIC|fpic: -D__PIC__ -D__pic__}\\\n-   %{!fleading-underscore:-fno-leading-underscore -D__NO_UNDERSCORES__}\\\n+  \"%{pthread:-D_REENTRANT}\\\n    %{!march=*:%{!cpu=*:-D__arch_v10 -D__CRIS_arch_version=10}}\\\n    %{!ansi:%{!std=*:%{!undef:-Dlinux -Dunix}\\\n      -Asystem(unix) -Asystem(posix) -Acpu(cris) -Amachine(cris)}}\"\n@@ -99,6 +96,28 @@ Boston, MA 02111-1307, USA.  */\n   %{!r:%{O2|O3: --gc-sections}}\"\n \n \n+/* Node: Run-time Target */\n+\n+/* For the cris-*-linux* subtarget.  */\n+#undef TARGET_OS_CPP_BUILTINS\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      builtin_define (\"__gnu_linux__\");\t\t\\\n+      builtin_define (\"__linux__\");\t\t\\\n+      builtin_define (\"__unix__\");\t\t\\\n+      builtin_define (\"__ELF__\");\t\t\\\n+      if (flag_pic)\t\t\t\t\\\n+\t{\t\t\t\t\t\\\n+\t  builtin_define (\"__PIC__\");\t\t\\\n+\t  builtin_define (\"__pic__\");\t\t\\\n+\t}\t\t\t\t\t\\\n+      if (flag_leading_underscore <= 0)\t\t\\\n+\tbuiltin_define (\"__NO_UNDERSCORES__\");\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n+     \n+\n /* Node: Sections */\n \n /* GNU/Linux has crti and crtn and does not need the"}]}