{"sha": "d36837f4cac8268ddb67fcf4f8ecfe323d79d92b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDM2ODM3ZjRjYWM4MjY4ZGRiNjdmY2Y0ZjhlY2ZlMzIzZDc5ZDkyYg==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "rakdver@atrey.karlin.mff.cuni.cz", "date": "2004-08-05T08:41:57Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2004-08-05T08:41:57Z"}, "message": "re PR tree-optimization/16864 (Segmentation fault during tree tail call elimination)\n\n\tPR tree-optimization/16864\n\t* tree-tailcall.c (eliminate_tail_call): Do not create phi nodes\n\tfor ssa names without default_def.\n\nFrom-SVN: r85597", "tree": {"sha": "6050fa494643615f796ada88dc8112f74b9e730c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6050fa494643615f796ada88dc8112f74b9e730c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d36837f4cac8268ddb67fcf4f8ecfe323d79d92b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d36837f4cac8268ddb67fcf4f8ecfe323d79d92b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d36837f4cac8268ddb67fcf4f8ecfe323d79d92b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d36837f4cac8268ddb67fcf4f8ecfe323d79d92b/comments", "author": null, "committer": null, "parents": [{"sha": "943bf8b5136c2d756f86a84271bbcc97b0b0bedc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/943bf8b5136c2d756f86a84271bbcc97b0b0bedc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/943bf8b5136c2d756f86a84271bbcc97b0b0bedc"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "f0e761752649ec4a0617056722ccf9d2af1e5e84", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d36837f4cac8268ddb67fcf4f8ecfe323d79d92b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d36837f4cac8268ddb67fcf4f8ecfe323d79d92b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d36837f4cac8268ddb67fcf4f8ecfe323d79d92b", "patch": "@@ -1,3 +1,9 @@\n+2004-08-05  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n+\n+\tPR tree-optimization/16864\n+\t* tree-tailcall.c (eliminate_tail_call): Do not create phi nodes\n+\tfor ssa names without default_def.\n+\n 2004-08-05  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/i386/i386.c (ix86_expand_prologue): If the function uses a"}, {"sha": "6e1957c597d3c9b1684ac2f6ca969f83bb9be87d", "filename": "gcc/tree-tailcall.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d36837f4cac8268ddb67fcf4f8ecfe323d79d92b/gcc%2Ftree-tailcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d36837f4cac8268ddb67fcf4f8ecfe323d79d92b/gcc%2Ftree-tailcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-tailcall.c?ref=d36837f4cac8268ddb67fcf4f8ecfe323d79d92b", "patch": "@@ -730,7 +730,17 @@ eliminate_tail_call (struct tailcall *t)\n       if (!phi)\n \t{\n \t  tree name = var_ann (param)->default_def;\n-\t  tree new_name = make_ssa_name (param, SSA_NAME_DEF_STMT (name));\n+\t  tree new_name;\n+\n+\t  if (!name)\n+\t    {\n+\t      /* It may happen that the tag does not have a default_def in case\n+\t\t when all uses of it are dominated by a MUST_DEF.  This however\n+\t\t means that it is not necessary to add a phi node for this\n+\t\t tag.  */\n+\t      continue;\n+\t    }\n+\t  new_name = make_ssa_name (param, SSA_NAME_DEF_STMT (name));\n \n \t  var_ann (param)->default_def = new_name;\n \t  phi = create_phi_node (name, first);"}]}