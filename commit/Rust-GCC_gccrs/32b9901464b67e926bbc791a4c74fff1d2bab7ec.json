{"sha": "32b9901464b67e926bbc791a4c74fff1d2bab7ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzJiOTkwMTQ2NGI2N2U5MjZiYmM3OTFhNGM3NGZmZjFkMmJhYjdlYw==", "commit": {"author": {"name": "Jerome Lambourg", "email": "lambourg@adacore.com", "date": "2008-08-06T08:52:44Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-06T08:52:44Z"}, "message": "g-comlin.adb (Set_Command_Line): Now that aliases can contain parameters, always specify the expected separator.\n\n2008-08-06  Jerome Lambourg  <lambourg@adacore.com>\n\n\t* g-comlin.adb (Set_Command_Line): Now that aliases can contain\n\tparameters, always specify the expected separator.\n\nFrom-SVN: r138780", "tree": {"sha": "6189b253ac1f4acc2ceb148109bbf601ed7c0dbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6189b253ac1f4acc2ceb148109bbf601ed7c0dbb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/32b9901464b67e926bbc791a4c74fff1d2bab7ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32b9901464b67e926bbc791a4c74fff1d2bab7ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32b9901464b67e926bbc791a4c74fff1d2bab7ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32b9901464b67e926bbc791a4c74fff1d2bab7ec/comments", "author": {"login": "lambourg", "id": 480233, "node_id": "MDQ6VXNlcjQ4MDIzMw==", "avatar_url": "https://avatars.githubusercontent.com/u/480233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lambourg", "html_url": "https://github.com/lambourg", "followers_url": "https://api.github.com/users/lambourg/followers", "following_url": "https://api.github.com/users/lambourg/following{/other_user}", "gists_url": "https://api.github.com/users/lambourg/gists{/gist_id}", "starred_url": "https://api.github.com/users/lambourg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lambourg/subscriptions", "organizations_url": "https://api.github.com/users/lambourg/orgs", "repos_url": "https://api.github.com/users/lambourg/repos", "events_url": "https://api.github.com/users/lambourg/events{/privacy}", "received_events_url": "https://api.github.com/users/lambourg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c9b9957118ebcb122ffeef1b73184e5b8736b2ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9b9957118ebcb122ffeef1b73184e5b8736b2ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9b9957118ebcb122ffeef1b73184e5b8736b2ef"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "02a0f9a47a8254351359c7532553afab9352fefb", "filename": "gcc/ada/g-comlin.adb", "status": "modified", "additions": 17, "deletions": 3, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32b9901464b67e926bbc791a4c74fff1d2bab7ec/gcc%2Fada%2Fg-comlin.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32b9901464b67e926bbc791a4c74fff1d2bab7ec/gcc%2Fada%2Fg-comlin.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-comlin.adb?ref=32b9901464b67e926bbc791a4c74fff1d2bab7ec", "patch": "@@ -1295,13 +1295,19 @@ package body GNAT.Command_Line is\n \n                   --  Add it with no parameter, if that's the way the user\n                   --  wants it.\n+                  --  Specify the separator in all cases, as the switch might\n+                  --  need to be unaliased, and the alias might contain\n+                  --  switches with parameters.\n \n                   if Section = null then\n                      Add_Switch\n-                       (Cmd, Switch_Char & Full_Switch (Parser));\n+                       (Cmd, Switch_Char & Full_Switch (Parser),\n+                        Separator => Separator (Parser));\n                   else\n                      Add_Switch\n-                       (Cmd, Switch_Char & Full_Switch (Parser), Section.all);\n+                       (Cmd, Switch_Char & Full_Switch (Parser),\n+                        Separator => Separator (Parser),\n+                        Section   => Section.all);\n                   end if;\n             end;\n          end loop;\n@@ -1439,9 +1445,17 @@ package body GNAT.Command_Line is\n                      if not Require_Parameter (Cmd.Config.Switches (S).all)\n                        or else Last >= Param\n                      then\n-                        if Idx = Group'First and then Last = Group'Last then\n+                        if Idx = Group'First\n+                          and then Last = Group'Last\n+                          and then Last < Param\n+                        then\n                            --  The group only concerns a single switch. Do not\n                            --  perform recursive call.\n+\n+                           --  Note that we still perform a recursive call if\n+                           --  a parameter is detected in the switch, as this\n+                           --  is a way to correctly identify such a parameter\n+                           --  in aliases.\n                            return False;\n                         end if;\n "}]}