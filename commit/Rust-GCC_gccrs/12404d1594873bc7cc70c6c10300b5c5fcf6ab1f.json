{"sha": "12404d1594873bc7cc70c6c10300b5c5fcf6ab1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTI0MDRkMTU5NDg3M2JjN2NjNzBjNmMxMDMwMGI1YzVmY2Y2YWIxZg==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2018-11-21T13:08:26Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2018-11-21T13:08:26Z"}, "message": "apply_subst_iterator: Handle define_split/define_insn_and_split\n\n\t* read-rtl.c (apply_subst_iterator): Handle define_split and\n\tdefine_insn_and_split.\n\nFrom-SVN: r266341", "tree": {"sha": "68897d0f4ccae70a608cdcf2c71a864db1dc7ec2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68897d0f4ccae70a608cdcf2c71a864db1dc7ec2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/12404d1594873bc7cc70c6c10300b5c5fcf6ab1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12404d1594873bc7cc70c6c10300b5c5fcf6ab1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12404d1594873bc7cc70c6c10300b5c5fcf6ab1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12404d1594873bc7cc70c6c10300b5c5fcf6ab1f/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f259abd260739aca06f8760dcbc0a1a567018ff2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f259abd260739aca06f8760dcbc0a1a567018ff2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f259abd260739aca06f8760dcbc0a1a567018ff2"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "2728ccbe671d143207bb92ffd991ce3c85e3f8fa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12404d1594873bc7cc70c6c10300b5c5fcf6ab1f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12404d1594873bc7cc70c6c10300b5c5fcf6ab1f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=12404d1594873bc7cc70c6c10300b5c5fcf6ab1f", "patch": "@@ -1,3 +1,8 @@\n+2018-11-21  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* read-rtl.c (apply_subst_iterator): Handle define_split and\n+\tdefine_insn_and_split.\n+\n 2018-11-21  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/87817"}, {"sha": "dfe22d3333b1a0bf328ff0dd40ef909a08d20fbd", "filename": "gcc/read-rtl.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12404d1594873bc7cc70c6c10300b5c5fcf6ab1f/gcc%2Fread-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12404d1594873bc7cc70c6c10300b5c5fcf6ab1f/gcc%2Fread-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fread-rtl.c?ref=12404d1594873bc7cc70c6c10300b5c5fcf6ab1f", "patch": "@@ -272,12 +272,15 @@ apply_subst_iterator (rtx rt, unsigned int, int value)\n   rtx new_attr;\n   rtvec attrs_vec, new_attrs_vec;\n   int i;\n-  if (value == 1)\n+  /* define_split has no attributes.  */\n+  if (value == 1 || GET_CODE (rt) == DEFINE_SPLIT)\n     return;\n   gcc_assert (GET_CODE (rt) == DEFINE_INSN\n+\t      || GET_CODE (rt) == DEFINE_INSN_AND_SPLIT\n \t      || GET_CODE (rt) == DEFINE_EXPAND);\n \n-  attrs_vec = XVEC (rt, 4);\n+  int attrs = GET_CODE (rt) == DEFINE_INSN_AND_SPLIT ? 7 : 4;\n+  attrs_vec = XVEC (rt, attrs);\n \n   /* If we've already added attribute 'current_iterator_name', then we\n      have nothing to do now.  */\n@@ -309,7 +312,7 @@ apply_subst_iterator (rtx rt, unsigned int, int value)\n \t      GET_NUM_ELEM (attrs_vec) * sizeof (rtx));\n       new_attrs_vec->elem[GET_NUM_ELEM (attrs_vec)] = new_attr;\n     }\n-  XVEC (rt, 4) = new_attrs_vec;\n+  XVEC (rt, attrs) = new_attrs_vec;\n }\n \n /* Map subst-attribute ATTR to subst iterator ITER.  */"}]}