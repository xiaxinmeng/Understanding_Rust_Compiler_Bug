{"sha": "0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGZjZDg2MjkwZDhlYzdkYmU4ZWI4YzEzYjY3NjdjYjE3NzVjY2QzZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2019-10-19T22:27:10Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-10-19T22:27:10Z"}, "message": "nodiscard-reason-only-one.C: In dg-error or dg-warning remove (?n) uses and replace .* with \\[^\\n\\r]*.\n\n\t* g++.dg/cpp2a/nodiscard-reason-only-one.C: In dg-error or dg-warning\n\tremove (?n) uses and replace .* with \\[^\\n\\r]*.\n\t* g++.dg/cpp2a/nodiscard-reason.C: Likewise.\n\t* g++.dg/cpp2a/nodiscard-once.C: Likewise.\n\t* g++.dg/cpp2a/nodiscard-reason-nonstring.C: Likewise.\n\nFrom-SVN: r277205", "tree": {"sha": "dbd4bf5923c07ff5473026f39b4b7589ba4de9bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dbd4bf5923c07ff5473026f39b4b7589ba4de9bc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b3fbf95ec1becab6d713e621175331c57abcaa88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3fbf95ec1becab6d713e621175331c57abcaa88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3fbf95ec1becab6d713e621175331c57abcaa88"}], "stats": {"total": 90, "additions": 49, "deletions": 41}, "files": [{"sha": "d03774bb616156459bb8a86a2a91954c19aed278", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f", "patch": "@@ -1,3 +1,11 @@\n+2019-10-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* g++.dg/cpp2a/nodiscard-reason-only-one.C: In dg-error or dg-warning\n+\tremove (?n) uses and replace .* with \\[^\\n\\r]*.\n+\t* g++.dg/cpp2a/nodiscard-reason.C: Likewise.\n+\t* g++.dg/cpp2a/nodiscard-once.C: Likewise.\n+\t* g++.dg/cpp2a/nodiscard-reason-nonstring.C: Likewise.\n+\n 2019-10-19  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/92140"}, {"sha": "b9dde5cfb5786f79a30aeebd9dd0920d8840aed9", "filename": "gcc/testsuite/g++.dg/cpp2a/nodiscard-once.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-once.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-once.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-once.C?ref=0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f", "patch": "@@ -2,7 +2,7 @@\n /* { dg-do compile { target c++2a } } */\n /* { dg-options \"-O -ftrack-macro-expansion=0\" } */\n \n-[[nodiscard, nodiscard]] int check1 (void); /* { dg-error \"(?n)nodiscard.*can appear at most once\" } */\n+[[nodiscard, nodiscard]] int check1 (void); /* { dg-error \"nodiscard\\[^\\n\\r]*can appear at most once\" } */\n \n void\n test (void)"}, {"sha": "76692e732c4fff9aff771d01b07bab757bae6b29", "filename": "gcc/testsuite/g++.dg/cpp2a/nodiscard-reason-nonstring.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason-nonstring.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason-nonstring.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason-nonstring.C?ref=0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f", "patch": "@@ -2,7 +2,7 @@\n /* { dg-do compile { target c++2a } } */\n /* { dg-options \"-O -ftrack-macro-expansion=0\" } */\n \n-[[nodiscard(123)]] int check1 (void); /* { dg-error \"(?n)nodiscard.*must be a string constant\" } */\n+[[nodiscard(123)]] int check1 (void); /* { dg-error \"nodiscard\\[^\\n\\r]*must be a string constant\" } */\n \n void\n test (void)"}, {"sha": "d42f4dc7bbe970020537de33911c1f3f80b62826", "filename": "gcc/testsuite/g++.dg/cpp2a/nodiscard-reason-only-one.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason-only-one.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason-only-one.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason-only-one.C?ref=0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f", "patch": "@@ -2,7 +2,7 @@\n /* { dg-do compile { target c++2a } } */\n /* { dg-options \"-O -ftrack-macro-expansion=0\" } */\n \n-[[nodiscard(\"not\", \"allowed\")]] int check1 (void); /* { dg-error \"(?n)wrong number of arguments..*nodiscard\" } */\n+[[nodiscard(\"not\", \"allowed\")]] int check1 (void); /* { dg-error \"wrong number of arguments.\\[^\\n\\r]*nodiscard\" } */\n \n void\n test (void)"}, {"sha": "e0230b1d519f397925d9961b4607e8d90ef419ad", "filename": "gcc/testsuite/g++.dg/cpp2a/nodiscard-reason.C", "status": "modified", "additions": 38, "deletions": 38, "changes": 76, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason.C?ref=0fcd86290d8ec7dbe8eb8c13b6767cb1775ccd3f", "patch": "@@ -13,8 +13,8 @@ typedef struct { char big[1024]; fnt fn; } C;\n struct [[nodiscard(\"exact_D_message\")]] D { int i; D(); ~D(); };\n \n NODIS E check1 (void);\n-NODIS void check2 (void); /* { dg-warning \"(?n)10:.nodiscard.*exact_message\" } */\n-NODIS int foo;         /* { dg-warning \"(?n)9:.nodiscard.*exact_message\" } */\n+NODIS void check2 (void); /* { dg-warning \"10:.nodiscard\\[^\\n\\r]*exact_message\" } */\n+NODIS int foo;         /* { dg-warning \"9:.nodiscard\\[^\\n\\r]*exact_message\" } */\n int bar (void);\n NODISAI E check3 (void) { return (E)bar (); }\n NODIS A check4 (void);\n@@ -52,152 +52,152 @@ test (void)\n     return;\n   i += check1 ();\n   i += ({ check1 (); });\n-  check1 ();           /* { dg-warning \"(?n)nodiscard.*exact_message\" } */\n+  check1 ();           /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_message\" } */\n   (void) check1 ();\n-  check1 (), bar ();   /* { dg-warning \"(?n)nodiscard.*exact_message\" } */\n+  check1 (), bar ();   /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_message\" } */\n   check2 ();\n   (void) check2 ();\n   check2 (), bar ();\n   if (check3 ())\n     return;\n   i += check3 ();\n   i += ({ check3 (); });\n-  check3 ();           /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  check3 ();           /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   (void) check3 ();\n-  check3 (), bar ();   /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  check3 (), bar ();   /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   a = check4 ();\n   if (a.i)\n     return;\n   if (check4 ().i)\n     return;\n   if (({ check4 (); }).i)\n     return;\n-  check4 ();           /* { dg-warning \"(?n)nodiscard.*exact_message\" } */\n+  check4 ();           /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_message\" } */\n   (void) check4 ();\n-  check4 (), bar ();   /* { dg-warning \"(?n)nodiscard.*exact_message\" } */\n+  check4 (), bar ();   /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_message\" } */\n   b = check5 ();\n   if (b.i + b.j)\n     return;\n   if (check5 ().j)\n     return;\n   if (({ check5 (); }).j)\n     return;\n-  check5 ();           /* { dg-warning \"(?n)nodiscard.*exact_message\" } */\n+  check5 ();           /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_message\" } */\n   (void) check5 ();\n-  check5 (), bar ();   /* { dg-warning \"(?n)nodiscard.*exact_message\" } */\n+  check5 (), bar ();   /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_message\" } */\n   c = check6 ();\n   if (c.big[12] + c.big[29])\n     return;\n   if (check6 ().big[27])\n     return;\n   if (({ check6 (); }).big[0])\n     return;\n-  check6 ();           /* { dg-warning \"(?n)nodiscard.*exact_message\" } */\n+  check6 ();           /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_message\" } */\n   (void) check6 ();\n-  check6 (), bar ();   /* { dg-warning \"(?n)nodiscard.*exact_message\" } */\n+  check6 (), bar ();   /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_message\" } */\n   a = check7 ();\n   if (a.i)\n     return;\n   if (check7 ().i)\n     return;\n   if (({ check7 (); }).i)\n     return;\n-  check7 ();           /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  check7 ();           /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   (void) check7 ();\n-  check7 (), bar ();   /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  check7 (), bar ();   /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   b = check8 ();\n   if (b.i + b.j)\n     return;\n   if (check8 ().j)\n     return;\n   if (({ check8 (); }).j)\n     return;\n-  check8 ();           /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  check8 ();           /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   (void) check8 ();\n-  check8 (), bar ();   /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  check8 (), bar ();   /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   c = check9 ();\n   if (c.big[12] + c.big[29])\n     return;\n   if (check9 ().big[27])\n     return;\n   if (({ check9 (); }).big[0])\n     return;\n-  check9 ();           /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  check9 ();           /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   (void) check9 ();\n-  check9 (), bar ();   /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  check9 (), bar ();   /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   if (check_int_result (GU (j)))\n     return;\n   i += check_int_result (GU (j));\n   i += ({ check_int_result (GU (j)); });\n-  check_int_result (GU (j)); /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  check_int_result (GU (j)); /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   (void) check_int_result (GU (j));\n-  check_int_result (GU (j)), bar (); /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  check_int_result (GU (j)), bar (); /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   if (fnptr ())\n     return;\n   i += fnptr ();\n   i += ({ fnptr (); });\n-  fnptr ();            /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  fnptr ();            /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   (void) fnptr ();\n-  fnptr (), bar ();    /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  fnptr (), bar ();    /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   fnptr = check1;\n   if (fnptr ())\n     return;\n   i += fnptr ();\n   i += ({ fnptr (); });\n-  fnptr ();            /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  fnptr ();            /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   (void) fnptr ();\n-  fnptr (), bar ();    /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  fnptr (), bar ();    /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   fnptr = check3;\n   if (fnptr ())\n     return;\n   i += fnptr ();\n   i += ({ fnptr (); });\n-  fnptr ();            /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  fnptr ();            /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   (void) fnptr ();\n-  fnptr (), bar ();    /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  fnptr (), bar ();    /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   if (bar9 ().fn ())\n     return;\n   i += bar9 ().fn ();\n   i += ({ bar9 ().fn (); });\n-  bar9 ().fn ();       /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  bar9 ().fn ();       /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   (void) bar9 ().fn ();\n-  bar9 ().fn (), bar (); /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  bar9 ().fn (), bar (); /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   if ((k ? check1 : check10) ())\n     return;\n   i += (k ? check1 : check10) ();\n   i += ({ (k ? check1 : check10) (); });\n-  (k ? check1 : check10) (); /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  (k ? check1 : check10) (); /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   (void) (k ? check1 : check10) ();\n-  (k ? check1 : check10) (), bar (); /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  (k ? check1 : check10) (), bar (); /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   if ((k ? check3 : check11) ())\n     return;\n   i += (k ? check3 : check11) ();\n   i += ({ (k ? check3 : check11) (); });\n-  (k ? check3 : check11) (); /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  (k ? check3 : check11) (); /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   (void) (k ? check3 : check11) ();\n-  (k ? check3 : check11) (), bar (); /* { dg-warning \"(?n)nodiscard.*exact_inline_message\" } */\n+  (k ? check3 : check11) (), bar (); /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n   if (pcheck1 ())\n     return;\n   i += pcheck1 ();\n   i += ({ pcheck1 (); });\n-  pcheck1 ();          /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  pcheck1 ();          /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   (void) pcheck1 ();\n-  pcheck1 (), bar ();  /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  pcheck1 (), bar ();  /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   if (pcheck3 ())\n     return;\n   i += pcheck3 ();\n   i += ({ pcheck3 (); });\n-  pcheck3 ();          /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  pcheck3 ();          /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   (void) pcheck3 ();\n-  pcheck3 (), bar ();  /* { dg-warning \"(?n)nodiscard.*exact_E_message\" } */\n+  pcheck3 (), bar ();  /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   d = check12 ();\n   if (d.i)\n     return;\n   if (check12 ().i)\n     return;\n   if (({ check12 (); }).i)\n     return;\n-  check12 ();          /* { dg-warning \"(?n)nodiscard.*exact_D_message\" } */\n+  check12 ();          /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_D_message\" } */\n   (void) check12 ();\n-  check12 (), bar ();  /* { dg-warning \"(?n)nodiscard.*exact_D_message\" } */\n+  check12 (), bar ();  /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_D_message\" } */\n }"}]}