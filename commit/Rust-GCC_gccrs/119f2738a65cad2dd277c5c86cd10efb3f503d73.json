{"sha": "119f2738a65cad2dd277c5c86cd10efb3f503d73", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTE5ZjI3MzhhNjVjYWQyZGQyNzdjNWM4NmNkMTBlZmIzZjUwM2Q3Mw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-06-16T00:45:02Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-06-16T00:45:02Z"}, "message": "(mips_expand_prologue): If tsize_rtx is large_int...\n\n(mips_expand_prologue): If tsize_rtx is large_int, emit two\ninsns instead of one splitable insn, setting RTX_FRAME_RELATED_P.\n\nFrom-SVN: r14249", "tree": {"sha": "8b6a3b9556f3b0689d15c839594f28c84bf49104", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b6a3b9556f3b0689d15c839594f28c84bf49104"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/119f2738a65cad2dd277c5c86cd10efb3f503d73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/119f2738a65cad2dd277c5c86cd10efb3f503d73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/119f2738a65cad2dd277c5c86cd10efb3f503d73", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/119f2738a65cad2dd277c5c86cd10efb3f503d73/comments", "author": null, "committer": null, "parents": [{"sha": "ef76d03b8af2720923b55595bf516e26341d0977", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef76d03b8af2720923b55595bf516e26341d0977", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef76d03b8af2720923b55595bf516e26341d0977"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "fee0408a8d0b7ecf6690997963f122e7ebcd0f13", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 19, "deletions": 2, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/119f2738a65cad2dd277c5c86cd10efb3f503d73/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/119f2738a65cad2dd277c5c86cd10efb3f503d73/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=119f2738a65cad2dd277c5c86cd10efb3f503d73", "patch": "@@ -5443,8 +5443,25 @@ mips_expand_prologue ()\n \t  if (tsize > 32767)\n \t    {\n \t      tmp_rtx = gen_rtx (REG, Pmode, MIPS_TEMP1_REGNUM);\n-\t      insn = emit_move_insn (tmp_rtx, tsize_rtx);\n-\t      RTX_FRAME_RELATED_P (insn) = 1;\n+\n+\t      /* Instruction splitting doesn't preserve the RTX_FRAME_RELATED_P\n+\t\t bit, so make sure that we don't emit anything that can be\n+\t\t split.  */\n+\t      if (large_int (tsize_rtx))\n+\t\t{\n+\t\t  insn = emit_move_insn (tmp_rtx,\n+\t\t\t\t\t GEN_INT (tsize & 0xffff0000));\n+\t\t  RTX_FRAME_RELATED_P (insn) = 1;\n+\t\t  insn = emit_insn (gen_iorsi3 (tmp_rtx, tmp_rtx,\n+\t\t\t\t\t\tGEN_INT (tsize & 0x0000ffff)));\n+\t\t  RTX_FRAME_RELATED_P (insn) = 1;\n+\t\t}\n+\t      else\n+\t\t{\n+\t\t  insn = emit_move_insn (tmp_rtx, tsize_rtx);\n+\t\t  RTX_FRAME_RELATED_P (insn) = 1;\n+\t\t}\n+\n \t      tsize_rtx = tmp_rtx;\n \t    }\n "}]}