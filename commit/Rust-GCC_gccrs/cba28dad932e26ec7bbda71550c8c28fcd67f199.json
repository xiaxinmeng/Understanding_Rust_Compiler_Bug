{"sha": "cba28dad932e26ec7bbda71550c8c28fcd67f199", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2JhMjhkYWQ5MzJlMjZlYzdiYmRhNzE1NTBjOGMyOGZjZDY3ZjE5OQ==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2007-10-27T17:59:59Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2007-10-27T17:59:59Z"}, "message": "re PR fortran/31306 (ICE with implicit character variables)\n\n2007-10-27 Jerry DeLisle <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/31306\n\t* decl.c (char_len_param_value): Add check for conflicting attributes of\n\tfunction argument.\n\nFrom-SVN: r129685", "tree": {"sha": "61008037e02804d3587a8239de8ada3d2a7c1efc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61008037e02804d3587a8239de8ada3d2a7c1efc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cba28dad932e26ec7bbda71550c8c28fcd67f199", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cba28dad932e26ec7bbda71550c8c28fcd67f199", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cba28dad932e26ec7bbda71550c8c28fcd67f199", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cba28dad932e26ec7bbda71550c8c28fcd67f199/comments", "author": null, "committer": null, "parents": [{"sha": "735da29ae3b49afa8f4e14b622713f9daf6523da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/735da29ae3b49afa8f4e14b622713f9daf6523da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/735da29ae3b49afa8f4e14b622713f9daf6523da"}], "stats": {"total": 34, "additions": 33, "deletions": 1}, "files": [{"sha": "2dd0c388e4c518f37d33195143e01165ff6f1ed8", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cba28dad932e26ec7bbda71550c8c28fcd67f199/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cba28dad932e26ec7bbda71550c8c28fcd67f199/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=cba28dad932e26ec7bbda71550c8c28fcd67f199", "patch": "@@ -1,3 +1,9 @@\n+2007-10-27 Jerry DeLisle <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/31306\n+\t* decl.c (char_len_param_value): Add check for conflicting attributes of\n+\tfunction argument.\n+\n 2007-10-27  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/33862"}, {"sha": "0ecb0080c25b66785d549686b18f2edf075245c0", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 27, "deletions": 1, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cba28dad932e26ec7bbda71550c8c28fcd67f199/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cba28dad932e26ec7bbda71550c8c28fcd67f199/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=cba28dad932e26ec7bbda71550c8c28fcd67f199", "patch": "@@ -566,13 +566,39 @@ match_intent_spec (void)\n static match\n char_len_param_value (gfc_expr **expr)\n {\n+  match m;\n+\n   if (gfc_match_char ('*') == MATCH_YES)\n     {\n       *expr = NULL;\n       return MATCH_YES;\n     }\n \n-  return gfc_match_expr (expr);\n+  m = gfc_match_expr (expr);\n+  if (m == MATCH_YES && (*expr)->expr_type == EXPR_FUNCTION)\n+    {\n+      if ((*expr)->value.function.actual\n+\t  && (*expr)->value.function.actual->expr->symtree)\n+\t{\n+\t  gfc_expr *e;\n+\t  e = (*expr)->value.function.actual->expr;\n+\t  if (e->symtree->n.sym->attr.flavor == FL_PROCEDURE\n+\t      && e->expr_type == EXPR_VARIABLE)\n+\t    {\n+\t      if (e->symtree->n.sym->ts.type == BT_UNKNOWN)\n+\t\tgoto syntax;\n+\t      if (e->symtree->n.sym->ts.type == BT_CHARACTER\n+\t\t  && e->symtree->n.sym->ts.cl\n+\t\t  && e->symtree->n.sym->ts.cl->length->ts.type == BT_UNKNOWN)\n+\t        goto syntax;\n+\t    }\n+\t}\n+    }\n+  return m;\n+\n+syntax:\n+  gfc_error (\"Conflict in attributes of function argument at %C\");\n+  return MATCH_ERROR;\n }\n \n "}]}