{"sha": "5830150a57f01dcf73d4d7cfcd2374fd68291a9f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTgzMDE1MGE1N2YwMWRjZjczZDRkN2NmY2QyMzc0ZmQ2ODI5MWE5Zg==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2009-08-18T19:44:04Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2009-08-18T19:44:04Z"}, "message": "* compare-debug: Drop .eh_frame relocations too.\n\nFrom-SVN: r150901", "tree": {"sha": "2e6b825684f24764477329b5327cc36af371a034", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2e6b825684f24764477329b5327cc36af371a034"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5830150a57f01dcf73d4d7cfcd2374fd68291a9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5830150a57f01dcf73d4d7cfcd2374fd68291a9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5830150a57f01dcf73d4d7cfcd2374fd68291a9f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5830150a57f01dcf73d4d7cfcd2374fd68291a9f/comments", "author": null, "committer": null, "parents": [{"sha": "c2d88223c848bb4d8ef5b6cdc799e0dbe68635c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2d88223c848bb4d8ef5b6cdc799e0dbe68635c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2d88223c848bb4d8ef5b6cdc799e0dbe68635c2"}], "stats": {"total": 42, "additions": 19, "deletions": 23}, "files": [{"sha": "778f380eddc436b83c24f6805540688f7b198771", "filename": "contrib/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5830150a57f01dcf73d4d7cfcd2374fd68291a9f/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5830150a57f01dcf73d4d7cfcd2374fd68291a9f/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=5830150a57f01dcf73d4d7cfcd2374fd68291a9f", "patch": "@@ -1,3 +1,7 @@\n+2009-08-18  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* compare-debug: Drop .eh_frame relocations too.\n+\n 2009-08-18  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR testsuite/40704"}, {"sha": "9864ee91f307d176f03201370c491687a0afbcb7", "filename": "contrib/compare-debug", "status": "modified", "additions": 15, "deletions": 23, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5830150a57f01dcf73d4d7cfcd2374fd68291a9f/contrib%2Fcompare-debug", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5830150a57f01dcf73d4d7cfcd2374fd68291a9f/contrib%2Fcompare-debug", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fcompare-debug?ref=5830150a57f01dcf73d4d7cfcd2374fd68291a9f", "patch": "@@ -107,41 +107,33 @@ else\n \n     trap 'rm -f \"$1.$suf1\" \"$2.$suf2\" \"$1.$suf3\" \"$2.$suf4\"' 0 1 2 15\n \n-    if (objcopy -v) 2>&1 | grep -e \"--remove-section\" > /dev/null; then\n-      objcopy --remove-section .eh_frame \"$1.$suf1\" \"$1.$suf3\"\n-      cmp \"$1.$suf1\" \"$1.$suf3\" > /dev/null\n-      cmp1=$?\n-\n-      objcopy --remove-section .eh_frame \"$2.$suf2\" \"$2.$suf4\"\n-      cmp \"$2.$suf2\" \"$2.$suf4\" > /dev/null\n-      cmp2=$?\n+    echo stripping off .eh_frame, then retrying >&2\n \n+    if (objcopy -v) 2>&1 | grep -e \"--remove-section\" > /dev/null; then\n+      objcopy --remove-section .eh_frame --remove-section .rel.eh_frame --remove-section .rela.eh_frame \"$1.$suf1\" \"$1.$suf3\"\n       mv \"$1.$suf3\" \"$1.$suf1\"\n+\n+      objcopy --remove-section .eh_frame --remove-section .rel.eh_frame --remove-section .rela.eh_frame \"$2.$suf2\" \"$2.$suf4\"\n       mv \"$2.$suf4\" \"$2.$suf2\"\n     elif (strip --help) 2>&1 | grep -e --remove-section > /dev/null; then\n       cp \"$1.$suf1\" \"$1.$suf3\"\n-      strip --remove-section .eh_frame \"$1.$suf3\"\n+      strip --remove-section .eh_frame --remove-section .rel.eh_frame --remove-section .rela.eh_frame \"$1.$suf3\"\n+      mv \"$1.$suf3\" \"$1.$suf1\"\n \n       cp \"$2.$suf2\" \"$2.$suf4\"\n-      strip --remove-section .eh_frame \"$2.$suf4\"\n-\n-      cmp \"$1.$suf1\" \"$1.$suf3\" > /dev/null\n-      cmp1=$?\n-\n-      cmp \"$2.$suf2\" \"$2.$suf4\" > /dev/null\n-      cmp2=$?\n-\n-      mv \"$1.$suf3\" \"$1.$suf1\"\n+      strip --remove-section .eh_frame --remove-section .rel.eh_frame --remove-section .rela.eh_frame \"$2.$suf4\"\n       mv \"$2.$suf4\" \"$2.$suf2\"\n+    else\n+      echo failed to strip off .eh_frame >&2\n     fi\n \n     trap 'rm -f \"$1.$suf1\" \"$2.$suf2\"' 0 1 2 15\n-  fi\n \n-  if test \"x$cmp1\" != \"x$cmp2\" && cmp \"$1.$suf1\" \"$2.$suf2\"; then\n-    status=0\n-  else\n-    status=1\n+    if cmp \"$1.$suf1\" \"$2.$suf2\"; then\n+      status=0\n+    else\n+      status=1\n+    fi\n   fi\n fi\n "}]}