{"sha": "0bf0df50e5a18e7b707ba0091cb86e1bd388d4b3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGJmMGRmNTBlNWExOGU3YjcwN2JhMDA5MWNiODZlMWJkMzg4ZDRiMw==", "commit": {"author": {"name": "Tsvetkova Alexandra", "email": "aleksandra.tsvetkova@intel.com", "date": "2015-12-29T12:52:42Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2015-12-29T12:52:42Z"}, "message": "mpx_wrappers.c (__mpx_wrapper_memmove): Special handling of one pointer copy.\n\nlibmpx/\n\n2015-12-29  Tsvetkova Alexandra  <aleksandra.tsvetkova@intel.com>\n\n\t* libmpxwrap/mpx_wrappers.c (__mpx_wrapper_memmove): Special\n\thandling of one pointer copy.\n\nFrom-SVN: r231991", "tree": {"sha": "15fb381620421c16562fcbe81b00c4e41e55af5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/15fb381620421c16562fcbe81b00c4e41e55af5c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0bf0df50e5a18e7b707ba0091cb86e1bd388d4b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bf0df50e5a18e7b707ba0091cb86e1bd388d4b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0bf0df50e5a18e7b707ba0091cb86e1bd388d4b3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bf0df50e5a18e7b707ba0091cb86e1bd388d4b3/comments", "author": null, "committer": null, "parents": [{"sha": "8c20a15574b1a551bc6b51b35129b56f69110ef9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c20a15574b1a551bc6b51b35129b56f69110ef9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c20a15574b1a551bc6b51b35129b56f69110ef9"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "d53080778495c51b4301e6229acfbc7c10e486c2", "filename": "libmpx/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0bf0df50e5a18e7b707ba0091cb86e1bd388d4b3/libmpx%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0bf0df50e5a18e7b707ba0091cb86e1bd388d4b3/libmpx%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmpx%2FChangeLog?ref=0bf0df50e5a18e7b707ba0091cb86e1bd388d4b3", "patch": "@@ -1,3 +1,8 @@\n+2015-12-29  Tsvetkova Alexandra  <aleksandra.tsvetkova@intel.com>\n+\n+\t* libmpxwrap/mpx_wrappers.c (__mpx_wrapper_memmove): Special\n+\thandling of one pointer copy.\n+\n 2015-12-11  Tsvetkova Alexandra  <aleksandra.tsvetkova@intel.com>\n \n \t* mpxrt/Makefile.am (libmpx_la_LDFLAGS): Add -version-info"}, {"sha": "4df4e9e76e8ffb4bf75ee3597ee90301b78266a9", "filename": "libmpx/mpxwrap/mpx_wrappers.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0bf0df50e5a18e7b707ba0091cb86e1bd388d4b3/libmpx%2Fmpxwrap%2Fmpx_wrappers.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0bf0df50e5a18e7b707ba0091cb86e1bd388d4b3/libmpx%2Fmpxwrap%2Fmpx_wrappers.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmpx%2Fmpxwrap%2Fmpx_wrappers.c?ref=0bf0df50e5a18e7b707ba0091cb86e1bd388d4b3", "patch": "@@ -483,7 +483,18 @@ __mpx_wrapper_memmove (void *dst, const void *src, size_t n)\n   __bnd_chk_ptr_bounds (dst, n);\n   __bnd_chk_ptr_bounds (src, n);\n \n+  /* When we copy exactly one pointer it is faster to\n+     just use bndldx + bndstx.  */\n+  if (n == sizeof (void *))\n+  {\n+    const void **s = (const void**)src;\n+    void **d = (void**)dst;\n+    *d = *s;\n+    return dst;\n+  }\n+\n   memmove (dst, src, n);\n+\n   /* Not necessary to copy bounds if size is less then size of pointer\n      or SRC==DST.  */\n   if ((n >= sizeof (void *)) && (src != dst))"}]}