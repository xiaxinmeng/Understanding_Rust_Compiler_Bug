{"sha": "55ad8d77abea762498975abf81dc029a97957a6d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTVhZDhkNzdhYmVhNzYyNDk4OTc1YWJmODFkYzAyOWE5Nzk1N2E2ZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-11-30T23:51:26Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-11-30T23:51:26Z"}, "message": "re PR c++/55542 (g++ segmentation fault)\n\n\tPR c++/55542\n\t* pt.c (make_ith_pack_parameter_name): Return NULL if\n\tname is NULL.\n\t(tsubst_decl): Call make_ith_pack_parameter_name even if\n\tDECL_NAME is NULL.\n\n\t* g++.dg/cpp0x/vt-55542.C: New test.\n\nFrom-SVN: r194010", "tree": {"sha": "a0ef3b6ff2f660c06b70a91f3292e1ca083c90b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a0ef3b6ff2f660c06b70a91f3292e1ca083c90b9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/55ad8d77abea762498975abf81dc029a97957a6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55ad8d77abea762498975abf81dc029a97957a6d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55ad8d77abea762498975abf81dc029a97957a6d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55ad8d77abea762498975abf81dc029a97957a6d/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a37d67b62172f4835d32a83bf54c8c1b4d171271", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a37d67b62172f4835d32a83bf54c8c1b4d171271", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a37d67b62172f4835d32a83bf54c8c1b4d171271"}], "stats": {"total": 44, "additions": 40, "deletions": 4}, "files": [{"sha": "b419f648a273abee4737ea7702534fc3a2b4245c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ad8d77abea762498975abf81dc029a97957a6d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ad8d77abea762498975abf81dc029a97957a6d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=55ad8d77abea762498975abf81dc029a97957a6d", "patch": "@@ -1,3 +1,11 @@\n+2012-12-01  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/55542\n+\t* pt.c (make_ith_pack_parameter_name): Return NULL if\n+\tname is NULL.\n+\t(tsubst_decl): Call make_ith_pack_parameter_name even if\n+\tDECL_NAME is NULL.\n+\n 2012-11-29  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/53137"}, {"sha": "e349be6c4ab7f7e82eb4ba2d5e711a1613a8fd80", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ad8d77abea762498975abf81dc029a97957a6d/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ad8d77abea762498975abf81dc029a97957a6d/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=55ad8d77abea762498975abf81dc029a97957a6d", "patch": "@@ -2905,6 +2905,8 @@ make_ith_pack_parameter_name (tree name, int i)\n   char* newname;\n   int newname_len;\n \n+  if (name == NULL_TREE)\n+    return name;\n   snprintf (numbuf, NUMBUF_LEN, \"%i\", i);\n   newname_len = IDENTIFIER_LENGTH (name)\n \t        + strlen (numbuf) + 2;\n@@ -10261,10 +10263,9 @@ tsubst_decl (tree t, tree args, tsubst_flags_t complain)\n                 /* Get the Ith type.  */\n                 type = TREE_VEC_ELT (expanded_types, i);\n \n-                if (DECL_NAME (r))\n-                  /* Rename the parameter to include the index.  */\n-                  DECL_NAME (r) =\n-                    make_ith_pack_parameter_name (DECL_NAME (r), i);\n+\t\t/* Rename the parameter to include the index.  */\n+\t\tDECL_NAME (r)\n+\t\t  = make_ith_pack_parameter_name (DECL_NAME (r), i);\n               }\n             else if (!type)\n               /* We're dealing with a normal parameter.  */"}, {"sha": "a5e29e28d6b09cc5fcc999b4ac9eed4512b83a4b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ad8d77abea762498975abf81dc029a97957a6d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ad8d77abea762498975abf81dc029a97957a6d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=55ad8d77abea762498975abf81dc029a97957a6d", "patch": "@@ -1,3 +1,8 @@\n+2012-12-01  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/55542\n+\t* g++.dg/cpp0x/vt-55542.C: New test.\n+\n 2012-11-30  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/specs/pack9.ads: New test."}, {"sha": "3d5efee87d9c2ae55253fee76b6c75c0f3b68d5b", "filename": "gcc/testsuite/g++.dg/cpp0x/vt-55542.C", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ad8d77abea762498975abf81dc029a97957a6d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvt-55542.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ad8d77abea762498975abf81dc029a97957a6d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvt-55542.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvt-55542.C?ref=55ad8d77abea762498975abf81dc029a97957a6d", "patch": "@@ -0,0 +1,22 @@\n+// PR c++/55542\n+// { dg-options \"-std=c++11\" }\n+\n+template <typename ... P>\n+struct B\n+{\n+  template <typename O>\n+  B (O *o, void (O::*f) (P ... p)) {}\n+};\n+class C\n+{\n+  void foo (void *, int);\n+  template <typename ... A>\n+  void bar (A ... a);\n+  B <void *> c;\n+  B <void *, int> d;\n+  C (int) : c (this, &C::bar), d (this, &C::foo) {}\n+};\n+template <typename ... A>\n+void C::bar (A ...)\n+{\n+}"}]}