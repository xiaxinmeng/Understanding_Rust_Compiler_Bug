{"sha": "400639e641126d3582233df36b9216e5cd59e8c8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDAwNjM5ZTY0MTEyNmQzNTgyMjMzZGYzNmI5MjE2ZTVjZDU5ZThjOA==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gnu.org", "date": "2002-08-16T18:19:00Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2002-08-16T18:19:00Z"}, "message": "libjava.exp (gcc_version): Removed.\n\n2002-08-16  H.J. Lu <hjl@gnu.org>\n\n\t* lib/libjava.exp (gcc_version): Removed.\n\t(libgcj_jar): New.\n\t(libjava_init): Set libgcj_jar with tcl glob.\n\t(libjava_arguments): Use libgcj_jar.\n\nFrom-SVN: r56382", "tree": {"sha": "d6bb967ec2a9498b65999df79db308f787311d37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d6bb967ec2a9498b65999df79db308f787311d37"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/400639e641126d3582233df36b9216e5cd59e8c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/400639e641126d3582233df36b9216e5cd59e8c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/400639e641126d3582233df36b9216e5cd59e8c8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/400639e641126d3582233df36b9216e5cd59e8c8/comments", "author": null, "committer": null, "parents": [{"sha": "fdf68669ec920c9530aa1b6b7e8fe31377ea780a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdf68669ec920c9530aa1b6b7e8fe31377ea780a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fdf68669ec920c9530aa1b6b7e8fe31377ea780a"}], "stats": {"total": 22, "additions": 14, "deletions": 8}, "files": [{"sha": "73bc125189974230562813b1c18c6ce75b0293c5", "filename": "libjava/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/400639e641126d3582233df36b9216e5cd59e8c8/libjava%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/400639e641126d3582233df36b9216e5cd59e8c8/libjava%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FChangeLog?ref=400639e641126d3582233df36b9216e5cd59e8c8", "patch": "@@ -1,3 +1,10 @@\n+2002-08-16  H.J. Lu <hjl@gnu.org>\n+\n+\t* lib/libjava.exp (gcc_version): Removed.\n+\t(libgcj_jar): New.\n+\t(libjava_init): Set libgcj_jar with tcl glob.\n+\t(libjava_arguments): Use libgcj_jar.\n+\n 2002-07-22  Tom Tromey  <tromey@redhat.com>\n \n \t* libjava.compile/zeroexp.java: New file."}, {"sha": "bbac0eaca9a11ca3884568a853ac9fc90a372577", "filename": "libjava/testsuite/lib/libjava.exp", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/400639e641126d3582233df36b9216e5cd59e8c8/libjava%2Ftestsuite%2Flib%2Flibjava.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/400639e641126d3582233df36b9216e5cd59e8c8/libjava%2Ftestsuite%2Flib%2Flibjava.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flib%2Flibjava.exp?ref=400639e641126d3582233df36b9216e5cd59e8c8", "patch": "@@ -112,7 +112,7 @@ proc libjava_init { args } {\n     global TOOL_EXECUTABLE\n     global original_ld_library_path\n     global env objdir\n-    global env gcc_version\n+    global env libgcj_jar\n     global tool_root_dir\n     global libjava_libgcc_s_path\n \n@@ -130,10 +130,9 @@ proc libjava_init { args } {\n \t}\n     }\n \n-    # Determine the version so we can find the libgcj jar file.\n-    set text [eval exec \"$GCJ_UNDER_TEST --version 2>@ stdout\"]\n-    regexp -- \"gcj \\[^ \\]+ (\\[^ \\]+) .*\" $text ignore gcc_version\n-    verbose \"jar file is libgcj-$gcc_version.jar\"\n+    # Find the libgcj jar file.\n+    set libgcj_jar [glob $objdir/../libgcj-*.jar]\n+    verbose \"jar file is $libgcj_jar\"\n \n     # FIXME: This finds libgcj.spec for the default multilib.\n     # If thread models differ between multilibs, this has to be moved\n@@ -292,7 +291,7 @@ proc libjava_arguments {{mode compile}} {\n     global runtests\n     global env\n     global tool_root_dir\n-    global gcc_version\n+    global libgcj_jar\n     global libjava_libgcc_s_path\n \n     if [info exists LIBJAVA] {\n@@ -358,9 +357,9 @@ proc libjava_arguments {{mode compile}} {\n     verbose \"LD_LIBRARY_PATH = $env(LD_LIBRARY_PATH)\"\n \n     # Set the CLASSPATH environment variable\n-    verbose \"CLASSPATH is .:$srcdir/$subdir:$objdir:$objdir/../libgcj-$gcc_version.jar\"\n+    verbose \"CLASSPATH is .:$srcdir/$subdir:$objdir:$libgcj_jar\"\n     global env\n-    set env(CLASSPATH) \".:$srcdir/$subdir:$objdir:$objdir/../libgcj-$gcc_version.jar\"\n+    set env(CLASSPATH) \".:$srcdir/$subdir:$objdir:$libgcj_jar\"\n \n     if {$mode == \"link\"} {\n \tglobal wrapper_file wrap_compile_flags;"}]}