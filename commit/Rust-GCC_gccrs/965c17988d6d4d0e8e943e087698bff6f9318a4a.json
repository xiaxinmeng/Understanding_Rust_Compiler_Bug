{"sha": "965c17988d6d4d0e8e943e087698bff6f9318a4a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTY1YzE3OTg4ZDZkNGQwZThlOTQzZTA4NzY5OGJmZjZmOTMxOGE0YQ==", "commit": {"author": {"name": "Steve Ellcey", "email": "sellcey@mips.com", "date": "2012-09-10T17:28:20Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2012-09-10T17:28:20Z"}, "message": "config.gcc: Add mips*-mti-linux* target Handle with_synci like other options.\n\n2012-09-10  Steve Ellcey  <sellcey@mips.com>\n\n\t* config.gcc: Add mips*-mti-linux* target\n\tHandle with_synci like other options.\n\t* config/mips/gnu-user64.h (LINUX64_DRIVER_SELF_SPECS): New.\n\t(DRIVER_SELF_SPECS): Define in terms of LINUX64_DRIVER_SELF_SPECS.\n\t* config/mips/mips.h (MIPS_ISA_SYNCI_SPEC): New.\n\t* config/mips/mti-linux.h: New file.\n\t* config/mips/t-mti-linux: New file.\n\nFrom-SVN: r191155", "tree": {"sha": "a29c811a4735ed2125bf8c920df9f87aeb70d2ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a29c811a4735ed2125bf8c920df9f87aeb70d2ec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/965c17988d6d4d0e8e943e087698bff6f9318a4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/965c17988d6d4d0e8e943e087698bff6f9318a4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/965c17988d6d4d0e8e943e087698bff6f9318a4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/965c17988d6d4d0e8e943e087698bff6f9318a4a/comments", "author": null, "committer": null, "parents": [{"sha": "320e29d7e525e243d48c89679ba11c115e3e577c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/320e29d7e525e243d48c89679ba11c115e3e577c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/320e29d7e525e243d48c89679ba11c115e3e577c"}], "stats": {"total": 106, "additions": 100, "deletions": 6}, "files": [{"sha": "3abb393d22aac2a2ee2d283b57a157c3741aa46c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=965c17988d6d4d0e8e943e087698bff6f9318a4a", "patch": "@@ -1,3 +1,13 @@\n+2012-09-10  Steve Ellcey  <sellcey@mips.com>\n+\n+\t* config.gcc: Add mips*-mti-linux* target\n+\tHandle with_synci like other options.\n+\t* config/mips/gnu-user64.h (LINUX64_DRIVER_SELF_SPECS): New.\n+\t(DRIVER_SELF_SPECS): Define in terms of LINUX64_DRIVER_SELF_SPECS.\n+\t* config/mips/mips.h (MIPS_ISA_SYNCI_SPEC): New.\n+\t* config/mips/mti-linux.h: New file.\n+\t* config/mips/t-mti-linux: New file.\n+\n 2012-09-10  Marc Glisse  <marc.glisse@inria.fr>\n \n         * tree-ssa-forwprop.c (simplify_permutation): Handle CONSTRUCTOR."}, {"sha": "ba366b398e94bb0bd6d5555ce94edd87b787013f", "filename": "gcc/config.gcc", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=965c17988d6d4d0e8e943e087698bff6f9318a4a", "patch": "@@ -1696,6 +1696,14 @@ mips*-*-netbsd*)\t\t\t# NetBSD/mips, either endian.\n \ttm_file=\"elfos.h ${tm_file} mips/elf.h netbsd.h netbsd-elf.h mips/netbsd.h\"\n \textra_options=\"${extra_options} netbsd.opt netbsd-elf.opt\"\n \t;;\n+mips*-mti-linux*)\n+\ttm_file=\"dbxelf.h elfos.h gnu-user.h linux.h glibc-stdint.h ${tm_file} mips/gnu-user.h mips/gnu-user64.h mips/linux64.h mips/linux-common.h mips/mti-linux.h\"\n+\ttmake_file=\"${tmake_file} mips/t-mti-linux\"\n+\ttm_defines=\"${tm_defines} MIPS_ISA_DEFAULT=33 MIPS_ABI_DEFAULT=ABI_32\"\n+\tgnu_ld=yes\n+\tgas=yes\n+\ttest x$with_llsc != x || with_llsc=yes\n+\t;;\n mips64*-*-linux* | mipsisa64*-*-linux*)\n \ttm_file=\"dbxelf.h elfos.h gnu-user.h linux.h glibc-stdint.h ${tm_file} mips/gnu-user.h mips/gnu-user64.h mips/linux64.h mips/linux-common.h\"\n \ttmake_file=\"${tmake_file} mips/t-linux64\"\n@@ -3273,10 +3281,11 @@ case \"${target}\" in\n \t\tyes)\n \t\t\twith_synci=synci\n \t\t\t;;\n-\t\t\"\" | no)\n-\t\t\t# No is the default.\n+\t\tno)\n \t\t\twith_synci=no-synci\n \t\t\t;;\n+\t\t\"\")\n+\t\t\t;;\n \t\t*)\n \t\t\techo \"Unknown synci type used in --with-synci\" 1>&2\n \t\t\texit 1"}, {"sha": "7c2187f4150c73d579b2310af1849f5ac0135d35", "filename": "gcc/config/mips/gnu-user64.h", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2Fconfig%2Fmips%2Fgnu-user64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2Fconfig%2Fmips%2Fgnu-user64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fgnu-user64.h?ref=965c17988d6d4d0e8e943e087698bff6f9318a4a", "patch": "@@ -20,13 +20,17 @@ along with GCC; see the file COPYING3.  If not see\n \n /* Force the default endianness and ABI flags onto the command line\n    in order to make the other specs easier to write.  */\n-#undef DRIVER_SELF_SPECS\n-#define DRIVER_SELF_SPECS \\\n-  BASE_DRIVER_SELF_SPECS, \\\n+\n+#define LINUX64_DRIVER_SELF_SPECS \\\n   LINUX_DRIVER_SELF_SPECS \\\n   \" %{!EB:%{!EL:%(endian_spec)}}\" \\\n   \" %{!mabi=*: -\" MULTILIB_ABI_DEFAULT \"}\"\n \n+#undef DRIVER_SELF_SPECS\n+#define DRIVER_SELF_SPECS \\\n+  BASE_DRIVER_SELF_SPECS, \\\n+  LINUX64_DRIVER_SELF_SPECS\n+\n #undef GNU_USER_TARGET_LINK_SPEC\n #define GNU_USER_TARGET_LINK_SPEC \"\\\n %{G*} %{EB} %{EL} %{mips1} %{mips2} %{mips3} %{mips4} \\"}, {"sha": "e04f099527359221c33690635047cce16cecccb2", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=965c17988d6d4d0e8e943e087698bff6f9318a4a", "patch": "@@ -728,6 +728,11 @@ struct mips_cpu_info {\n #define MIPS_32BIT_OPTION_SPEC \\\n   \"mips1|mips2|mips32*|mgp32\"\n \n+/* Infer a -msynci setting from a -mips argument, on the assumption that\n+   -msynci is desired where possible.  */\n+#define MIPS_ISA_SYNCI_SPEC \\\n+  \"%{msynci|mno-synci:;:%{mips32r2|mips64r2:-msynci;:-mno-synci}}\"\n+\n #if MIPS_ABI_DEFAULT == ABI_O64 \\\n   || MIPS_ABI_DEFAULT == ABI_N32 \\\n   || MIPS_ABI_DEFAULT == ABI_64\n@@ -762,7 +767,6 @@ struct mips_cpu_info {\n   {\"mips-plt\", \"%{!mplt:%{!mno-plt:-m%(VALUE)}}\" }, \\\n   {\"synci\", \"%{!msynci:%{!mno-synci:-m%(VALUE)}}\" }\n \n-\n /* A spec that infers the -mdsp setting from an -march argument.  */\n #define BASE_DRIVER_SELF_SPECS \\\n   \"%{!mno-dsp: \\"}, {"sha": "36c003c60cb3027b169e00230cec4c0b526660d1", "filename": "gcc/config/mips/mti-linux.h", "status": "added", "additions": 43, "deletions": 0, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2Fconfig%2Fmips%2Fmti-linux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2Fconfig%2Fmips%2Fmti-linux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmti-linux.h?ref=965c17988d6d4d0e8e943e087698bff6f9318a4a", "patch": "@@ -0,0 +1,43 @@\n+/* Target macros for mips*-mti-linux* targets.\n+   Copyright (C) 2012\n+   Free Software Foundation, Inc.\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 3, or (at your option)\n+any later version.\n+\n+GCC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GCC; see the file COPYING3.  If not see\n+<http://www.gnu.org/licenses/>.  */\n+\n+/* This target is a multilib target, specify the sysroot paths.  */\n+#undef SYSROOT_SUFFIX_SPEC\n+#define SYSROOT_SUFFIX_SPEC \\\n+    \"%{mips32:/mips32}%{mips64:/mips64}%{mips64r2:/mips64r2}%{msoft-float:/sof}%{mel|EL:/el}%{mabi=64:/64}%{mabi=n32:/n32}\"\n+\n+#undef DRIVER_SELF_SPECS\n+#define DRIVER_SELF_SPECS\t\t\t\t\t\t\\\n+  /* Make sure a -mips option is present.  This helps us to pick\t\\\n+     the right multilib, and also makes the later specs easier\t\t\\\n+     to write.  */\t\t\t\t\t\t\t\\\n+  MIPS_ISA_LEVEL_SPEC,\t\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+  /* Infer the default float setting from -march.  */\t\t\t\\\n+  MIPS_ARCH_FLOAT_SPEC,\t\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+  /* Infer the -msynci setting from -march if not explicitly set.  */\t\\\n+  MIPS_ISA_SYNCI_SPEC,\t\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+  /* Base SPECs.  */\t\t\t\t\t\t\t\\\n+  BASE_DRIVER_SELF_SPECS\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+  /* Use the standard linux specs for everything else.  */\t\t\\\n+  LINUX64_DRIVER_SELF_SPECS"}, {"sha": "ba11706ffeef546a9fb599ffac4733d52725d5fe", "filename": "gcc/config/mips/t-mti-linux", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2Fconfig%2Fmips%2Ft-mti-linux", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/965c17988d6d4d0e8e943e087698bff6f9318a4a/gcc%2Fconfig%2Fmips%2Ft-mti-linux", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-mti-linux?ref=965c17988d6d4d0e8e943e087698bff6f9318a4a", "patch": "@@ -0,0 +1,24 @@\n+# Copyright (C) 2012 Free Software Foundation, Inc.\n+#\n+# This file is part of GCC.\n+#\n+# GCC is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3, or (at your option)\n+# any later version.\n+#\n+# GCC is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+# The default build is mips32r2, hard-float big-endian.  Add mips32,\n+# soft-float, and little-endian variations.\n+\n+MULTILIB_OPTIONS = mips32/mips64/mips64r2 msoft-float EL\n+MULTILIB_DIRNAMES = mips32 mips64 mips64r2 sof el\n+MULTILIB_MATCHES = EL=mel EB=meb"}]}