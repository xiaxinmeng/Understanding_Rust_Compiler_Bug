{"sha": "6e436286338333f42a87c418764476baf456740c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmU0MzYyODYzMzgzMzNmNDJhODdjNDE4NzY0NDc2YmFmNDU2NzQwYw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-01-22T17:11:36Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-01-22T17:11:36Z"}, "message": "compiler: Avoid infinite recursion when describing initialization loops.\n\nFixes infinite recursion from golang/go#7558.\n\nFrom-SVN: r220009", "tree": {"sha": "8fc27c0bfd0169b2ea8916f14713dd5192b913f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8fc27c0bfd0169b2ea8916f14713dd5192b913f7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e436286338333f42a87c418764476baf456740c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e436286338333f42a87c418764476baf456740c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e436286338333f42a87c418764476baf456740c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e436286338333f42a87c418764476baf456740c/comments", "author": null, "committer": null, "parents": [{"sha": "f77107e8141ed85ea5f35a9dd840e4431a27d763", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f77107e8141ed85ea5f35a9dd840e4431a27d763", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f77107e8141ed85ea5f35a9dd840e4431a27d763"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "252560d9e353ccd7194fd7d5032e079b843d51f5", "filename": "gcc/go/gofrontend/gogo.cc", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e436286338333f42a87c418764476baf456740c/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e436286338333f42a87c418764476baf456740c/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo.cc?ref=6e436286338333f42a87c418764476baf456740c", "patch": "@@ -1089,6 +1089,7 @@ sort_var_inits(Gogo* gogo, Var_inits* var_inits)\n   // variable initializations that depend on it.\n   typedef std::map<Var_init, std::set<Var_init*> > Init_deps;\n   Init_deps init_deps;\n+  bool init_loop = false;\n   for (Var_inits::iterator p1 = var_inits->begin();\n        p1 != var_inits->end();\n        ++p1)\n@@ -1137,14 +1138,15 @@ sort_var_inits(Gogo* gogo, Var_inits* var_inits)\n \t\t\t   p2var->message_name().c_str());\n \t\t  inform(p2->var()->location(), \"%qs defined here\",\n \t\t\t p2var->message_name().c_str());\n-\t\t  p2 = var_inits->end();\n+\t\t  init_loop = true;\n+\t\t  break;\n \t\t}\n \t    }\n \t}\n     }\n \n   // If there are no dependencies then the declaration order is sorted.\n-  if (!init_deps.empty())\n+  if (!init_deps.empty() && !init_loop)\n     {\n       // Otherwise, sort variable initializations by emitting all variables with\n       // no dependencies in declaration order. VAR_INITS is already in"}]}