{"sha": "285cf766c1309edd7e61bf0dc45754af987d1b26", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjg1Y2Y3NjZjMTMwOWVkZDdlNjFiZjBkYzQ1NzU0YWY5ODdkMWIyNg==", "commit": {"author": {"name": "Maxim Blinov", "email": "maxim.blinov@embecosm.com", "date": "2019-07-31T21:36:41Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2019-07-31T21:36:41Z"}, "message": "RISC-V: Raise error on unexpected ISA string at end.\n\n\t2019-07-31  Maxim Blinov  <maxim.blinov@embecosm.com>\n\tgcc/\n\t* common/config/riscv/riscv-common.c: Check -march string ends\n\twith null.\n\tgcc/testsuite/\n\t* gcc.target/riscv/attribute-10.c: New test.\n\nFrom-SVN: r273951", "tree": {"sha": "66055209daef2fc584601b4c1e27d95effeb05d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/66055209daef2fc584601b4c1e27d95effeb05d6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/285cf766c1309edd7e61bf0dc45754af987d1b26", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/285cf766c1309edd7e61bf0dc45754af987d1b26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/285cf766c1309edd7e61bf0dc45754af987d1b26", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/285cf766c1309edd7e61bf0dc45754af987d1b26/comments", "author": {"login": "mablinov", "id": 10012248, "node_id": "MDQ6VXNlcjEwMDEyMjQ4", "avatar_url": "https://avatars.githubusercontent.com/u/10012248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mablinov", "html_url": "https://github.com/mablinov", "followers_url": "https://api.github.com/users/mablinov/followers", "following_url": "https://api.github.com/users/mablinov/following{/other_user}", "gists_url": "https://api.github.com/users/mablinov/gists{/gist_id}", "starred_url": "https://api.github.com/users/mablinov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mablinov/subscriptions", "organizations_url": "https://api.github.com/users/mablinov/orgs", "repos_url": "https://api.github.com/users/mablinov/repos", "events_url": "https://api.github.com/users/mablinov/events{/privacy}", "received_events_url": "https://api.github.com/users/mablinov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3090082cbefd8b1374f237bd4242b554490b2933", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3090082cbefd8b1374f237bd4242b554490b2933", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3090082cbefd8b1374f237bd4242b554490b2933"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "ec13629349fe6816ece822a7e837456b17f3aa3b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/285cf766c1309edd7e61bf0dc45754af987d1b26/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/285cf766c1309edd7e61bf0dc45754af987d1b26/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=285cf766c1309edd7e61bf0dc45754af987d1b26", "patch": "@@ -1,3 +1,8 @@\n+2019-07-31  Maxim Blinov  <maxim.blinov@embecosm.com>\n+\n+\t* common/config/riscv/riscv-common.c: Check -march string ends\n+\twith null.\n+\n 2019-07-31  Alexander Monakov  <amonakov@ispras.ru>\n \n \t* ipa-devirt.c (type_warning_cmp): Make static."}, {"sha": "a16d6c5b44860038fd9800435e8e637f544403fd", "filename": "gcc/common/config/riscv/riscv-common.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/285cf766c1309edd7e61bf0dc45754af987d1b26/gcc%2Fcommon%2Fconfig%2Friscv%2Friscv-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/285cf766c1309edd7e61bf0dc45754af987d1b26/gcc%2Fcommon%2Fconfig%2Friscv%2Friscv-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon%2Fconfig%2Friscv%2Friscv-common.c?ref=285cf766c1309edd7e61bf0dc45754af987d1b26", "patch": "@@ -513,6 +513,13 @@ riscv_subset_list::parse (const char *arch, location_t loc)\n   if (p == NULL)\n     goto fail;\n \n+  if (*p != '\\0')\n+    {\n+      error_at (loc, \"%<-march=%s%>: unexpected ISA string at end: %qs\",\n+               arch, p);\n+      goto fail;\n+    }\n+\n   return subset_list;\n \n fail:"}, {"sha": "99f6b22f86c1a9c62ee8ac5a17f8798ea7e5c85f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/285cf766c1309edd7e61bf0dc45754af987d1b26/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/285cf766c1309edd7e61bf0dc45754af987d1b26/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=285cf766c1309edd7e61bf0dc45754af987d1b26", "patch": "@@ -1,3 +1,7 @@\n+2019-07-31  Maxim Blinov  <maxim.blinov@embecosm.com>\n+\n+\t* gcc.target/riscv/attribute-10.c: New test.\n+\n 2019-07-31  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/91280"}, {"sha": "dd817879a6752f5885425494be1b1b33259897c1", "filename": "gcc/testsuite/gcc.target/riscv/attribute-10.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/285cf766c1309edd7e61bf0dc45754af987d1b26/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fattribute-10.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/285cf766c1309edd7e61bf0dc45754af987d1b26/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fattribute-10.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fattribute-10.c?ref=285cf766c1309edd7e61bf0dc45754af987d1b26", "patch": "@@ -0,0 +1,6 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=rv32im_s_sx_unexpectedstring -mabi=ilp32\" } */\n+int foo()\n+{\n+}\n+/* { dg-error \"unexpected ISA string at end:\" \"\" { target { \"riscv*-*-*\" } } 0 } */"}]}