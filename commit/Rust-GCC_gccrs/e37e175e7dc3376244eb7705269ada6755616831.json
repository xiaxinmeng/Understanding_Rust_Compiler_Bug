{"sha": "e37e175e7dc3376244eb7705269ada6755616831", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTM3ZTE3NWU3ZGMzMzc2MjQ0ZWI3NzA1MjY5YWRhNjc1NTYxNjgzMQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2021-07-09T10:08:52Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2021-07-09T10:13:39Z"}, "message": "Fix build failure on Windows with older binutils\n\nThis is the build failure on Windows with binutils for which GNU as accepts\nthe --gdwarf-5 switch but GNU ld generates broken binaries with DWARF 5.\n\nWe already have the HAVE_LD_BROKEN_PE_DWARF5 kludge to disable DWARF 5 in\nthis case but it only tames the DWARF version in the compiler, so the\ndriver still passes --gdwarf-5 when invoked on an assembly file with -g.\n\ngcc/\n\tPR target/101377\n\t* gcc.c (ASM_DEBUG_DWARF_OPTION): Set again to --gdwarf2 in\n\tthe case where HAVE_AS_WORKING_DWARF_N_FLAG is not defined\n\tand HAVE_LD_BROKEN_PE_DWARF5 is defined.", "tree": {"sha": "8af34b7a644ba69760008683df434f2f0ac4475b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8af34b7a644ba69760008683df434f2f0ac4475b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e37e175e7dc3376244eb7705269ada6755616831", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e37e175e7dc3376244eb7705269ada6755616831", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e37e175e7dc3376244eb7705269ada6755616831", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e37e175e7dc3376244eb7705269ada6755616831/comments", "author": null, "committer": null, "parents": [{"sha": "10722fb36de944c2385a275bb2b270727f7c93a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10722fb36de944c2385a275bb2b270727f7c93a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10722fb36de944c2385a275bb2b270727f7c93a4"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "f086dd47b9124d96274df4e394e4a7c32df9eab2", "filename": "gcc/gcc.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e175e7dc3376244eb7705269ada6755616831/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e175e7dc3376244eb7705269ada6755616831/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=e37e175e7dc3376244eb7705269ada6755616831", "patch": "@@ -916,7 +916,7 @@ proper position among the other output files.  */\n    than in ASM_DEBUG_SPEC, so that it applies to both .s and .c etc.\n    compilations.  */\n #  define ASM_DEBUG_DWARF_OPTION \"\"\n-# elif defined(HAVE_AS_GDWARF_5_DEBUG_FLAG)\n+# elif defined(HAVE_AS_GDWARF_5_DEBUG_FLAG) && !defined(HAVE_LD_BROKEN_PE_DWARF5)\n #  define ASM_DEBUG_DWARF_OPTION \"%{%:dwarf-version-gt(4):--gdwarf-5;\" \\\n \t\"%:dwarf-version-gt(3):--gdwarf-4;\"\t\t\t\t\\\n \t\"%:dwarf-version-gt(2):--gdwarf-3;\"\t\t\t\t\\"}]}