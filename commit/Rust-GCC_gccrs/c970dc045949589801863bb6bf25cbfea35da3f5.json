{"sha": "c970dc045949589801863bb6bf25cbfea35da3f5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzk3MGRjMDQ1OTQ5NTg5ODAxODYzYmI2YmYyNWNiZmVhMzVkYTNmNQ==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2013-07-27T12:55:59Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2013-07-27T12:55:59Z"}, "message": "re PR fortran/57285 ([OOP] ICE on invalid: \"gfc_array_dimen_size(): Bad dimension\" due to SIZE intrinsic with invalid dim on CLASS dummy)\n\n2013-07-27  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/57285\n\t* check.c (dim_rank_check): Re-enable this check for CLASS arrays.\n\n2013-07-27  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/57285\n\t* gfortran.dg/class_array_19.f90: New.\n\nFrom-SVN: r201284", "tree": {"sha": "8e2f39045081dad0b8809c4d0b011ce18a06f7ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8e2f39045081dad0b8809c4d0b011ce18a06f7ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c970dc045949589801863bb6bf25cbfea35da3f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c970dc045949589801863bb6bf25cbfea35da3f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c970dc045949589801863bb6bf25cbfea35da3f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c970dc045949589801863bb6bf25cbfea35da3f5/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "538e2a82e90fbccb9b1df1f20cd96102cf689454", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/538e2a82e90fbccb9b1df1f20cd96102cf689454", "html_url": "https://github.com/Rust-GCC/gccrs/commit/538e2a82e90fbccb9b1df1f20cd96102cf689454"}], "stats": {"total": 27, "additions": 24, "deletions": 3}, "files": [{"sha": "6b95a0dc22fdb408a763f247945e9a100ec05980", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c970dc045949589801863bb6bf25cbfea35da3f5/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c970dc045949589801863bb6bf25cbfea35da3f5/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c970dc045949589801863bb6bf25cbfea35da3f5", "patch": "@@ -1,3 +1,8 @@\n+2013-07-27  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/57285\n+\t* check.c (dim_rank_check): Re-enable this check for CLASS arrays.\n+\n 2013-07-25  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/57966"}, {"sha": "758639e27afaeba36c0e1d5f0c28ec912ed666fb", "filename": "gcc/fortran/check.c", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c970dc045949589801863bb6bf25cbfea35da3f5/gcc%2Ffortran%2Fcheck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c970dc045949589801863bb6bf25cbfea35da3f5/gcc%2Ffortran%2Fcheck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fcheck.c?ref=c970dc045949589801863bb6bf25cbfea35da3f5", "patch": "@@ -608,9 +608,6 @@ dim_rank_check (gfc_expr *dim, gfc_expr *array, int allow_assumed)\n   if (dim->expr_type != EXPR_CONSTANT)\n     return true;\n \n-  if (array->ts.type == BT_CLASS)\n-    return true;\n-\n   if (array->expr_type == EXPR_FUNCTION && array->value.function.isym\n       && array->value.function.isym->id == GFC_ISYM_SPREAD)\n     rank = array->rank + 1;"}, {"sha": "0940a3934ce73172c615a3650b296511d5aa4d06", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c970dc045949589801863bb6bf25cbfea35da3f5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c970dc045949589801863bb6bf25cbfea35da3f5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c970dc045949589801863bb6bf25cbfea35da3f5", "patch": "@@ -1,3 +1,8 @@\n+2013-07-27  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/57285\n+\t* gfortran.dg/class_array_19.f90: New.\n+\n 2013-07-27  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc.dg/vect/pr57705.c: Adjust for a !vect_pack_trunc target."}, {"sha": "0b28db180db2fb7d399a39f64e74fb00061cafb2", "filename": "gcc/testsuite/gfortran.dg/class_array_19.f90", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c970dc045949589801863bb6bf25cbfea35da3f5/gcc%2Ftestsuite%2Fgfortran.dg%2Fclass_array_19.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c970dc045949589801863bb6bf25cbfea35da3f5/gcc%2Ftestsuite%2Fgfortran.dg%2Fclass_array_19.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fclass_array_19.f90?ref=c970dc045949589801863bb6bf25cbfea35da3f5", "patch": "@@ -0,0 +1,14 @@\n+! { dg-do compile }\n+!\n+! PR 57285: [OOP] ICE on invalid: \"gfc_array_dimen_size(): Bad dimension\" due to SIZE intrinsic with invalid dim on CLASS dummy\n+!\n+! Contributed by Lorenz H\u00fcdepohl <bugs@stellardeath.org>\n+\n+  type type_t\n+  end type\n+contains\n+  subroutine foo(a)\n+    class(type_t), intent(in) :: a(:)\n+    type(type_t) :: c(size(a,dim=2))   ! { dg-error \"is not a valid dimension index\" }\n+  end subroutine\n+end  "}]}