{"sha": "383b2b42cbdd3868ebccf2fdf107ba4e2741bf55", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzgzYjJiNDJjYmRkMzg2OGViY2NmMmZkZjEwN2JhNGUyNzQxYmY1NQ==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2005-11-15T13:59:30Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2005-11-15T13:59:30Z"}, "message": "gprep.adb: Implement -C switch to scan comments\n\n2005-11-14  Robert Dewar  <dewar@adacore.com>\n\t    Vincent Celier  <celier@adacore.com>\n\n\t* gprep.adb: Implement -C switch to scan comments\n\n\t* scng.adb: Scan comment symbol separately if Replace_In_Comments set\n\n\t* scans.ads: Comment updates (including new use of Tok_Comment in\n\tpreprocessing)\n\n\t* opt.ads: Add documentation for flags that are used by gprmake,\n\tcurrently and in the next version of gprmake.\n\t(Verbosity_Level): New variable\n\tAdd Replace_In_Comments switch\n\n\t* vms_data.ads: Add VMS equivalent for new gnatmake switches -vl, -vm\n\tand -vm.\n\tAdd /REPLACE_IN_COMMENTS for gnatprep -C switch\n\nFrom-SVN: r106983", "tree": {"sha": "1749f6b7d009bff6be0c884041ec399989dfcfc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1749f6b7d009bff6be0c884041ec399989dfcfc0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55/comments", "author": null, "committer": null, "parents": [{"sha": "0bce6c77ca1f0e57afe1ff257d0a4ea87a94e75f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bce6c77ca1f0e57afe1ff257d0a4ea87a94e75f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0bce6c77ca1f0e57afe1ff257d0a4ea87a94e75f"}], "stats": {"total": 207, "additions": 151, "deletions": 56}, "files": [{"sha": "ebe5184204f08dd42548a9adc442eb295ba5c1ce", "filename": "gcc/ada/gprep.adb", "status": "modified", "additions": 32, "deletions": 21, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55/gcc%2Fada%2Fgprep.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55/gcc%2Fada%2Fgprep.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgprep.adb?ref=383b2b42cbdd3868ebccf2fdf107ba4e2741bf55", "patch": "@@ -73,7 +73,7 @@ package body GPrep is\n    File_Name_Buffer_Initial_Size : constant := 50;\n    File_Name_Buffer : String_Access :=\n                         new String (1 .. File_Name_Buffer_Initial_Size);\n-   --  A buffer to build output file names from input file names.\n+   --  A buffer to build output file names from input file names\n \n    -----------------\n    -- Subprograms --\n@@ -102,7 +102,7 @@ package body GPrep is\n    --  True if C is in 'a' .. 'z' or in 'A' .. 'Z'\n \n    procedure Double_File_Name_Buffer;\n-   --  Double the size of the file name buffer.\n+   --  Double the size of the file name buffer\n \n    procedure Preprocess_Infile_Name;\n    --  When the specified output is a directory, preprocess the infile name\n@@ -116,12 +116,12 @@ package body GPrep is\n    --  Process a -D switch on the command line\n \n    procedure Put_Char_To_Outfile (C : Character);\n-   --  Output one character to the output file.\n-   --  Used to initialize the preprocessor.\n+   --  Output one character to the output file. Used to initialize the\n+   --  preprocessor.\n \n    procedure New_EOL_To_Outfile;\n-   --  Output a new line to the output file.\n-   --  Used to initialize the preprocessor.\n+   --  Output a new line to the output file. Used to initialize the\n+   --  preprocessor.\n \n    procedure Scan_Command_Line;\n    --  Scan the switches and the file names\n@@ -137,7 +137,7 @@ package body GPrep is\n    begin\n       if not Copyright_Displayed then\n          Write_Line (\"GNAT Preprocessor \" & Gnatvsn.Gnat_Version_String);\n-         Write_Line (\"Copyright 1996-2004 Free Software Foundation, Inc.\");\n+         Write_Line (\"Copyright 1996-2005, Free Software Foundation, Inc.\");\n          Copyright_Displayed := True;\n       end if;\n    end Display_Copyright;\n@@ -198,21 +198,23 @@ package body GPrep is\n       --  Test we had all the arguments needed\n \n       if Infile_Name = No_Name then\n+\n          --  No input file specified, just output the usage and exit\n \n          Usage;\n          return;\n \n       elsif Outfile_Name = No_Name then\n+\n          --  No output file specified, just output the usage and exit\n \n          Usage;\n          return;\n       end if;\n \n-      --  If a pragma Source_File_Name, we need to keep line numbers.\n-      --  So, if the deleted lines are not put as comment, we must output them\n-      --  as blank lines.\n+      --  If a pragma Source_File_Name, we need to keep line numbers. So, if\n+      --  the deleted lines are not put as comment, we must output them as\n+      --  blank lines.\n \n       if Source_Ref_Pragma and (not Opt.Comment_Deleted_Lines) then\n          Opt.Blank_Deleted_Lines := True;\n@@ -245,8 +247,7 @@ package body GPrep is\n          end;\n       end if;\n \n-      --  If there are errors in the definition file, output these errors\n-      --  and exit.\n+      --  If there are errors in the definition file, output them and exit\n \n       if Total_Errors_Detected > 0 then\n          Errutil.Finalize (Source_Type => \"definition\");\n@@ -281,7 +282,6 @@ package body GPrep is\n       --  rooted at the input directory.\n \n       Process_Files;\n-\n    end Gnatprep;\n \n    ---------------------\n@@ -327,7 +327,7 @@ package body GPrep is\n \n    procedure Preprocess_Infile_Name is\n       Len    : Natural;\n-      First  : Positive := 1;\n+      First  : Positive;\n       Last   : Natural;\n       Symbol : Name_Id;\n       Data   : Symbol_Data;\n@@ -346,6 +346,7 @@ package body GPrep is\n \n       --  Look for possible symbols in the file name\n \n+      First := 1;\n       while First < Len loop\n \n          --  A symbol starts with a dollar sign followed by a letter\n@@ -387,7 +388,7 @@ package body GPrep is\n \n                      declare\n                         Sym_Len : constant Positive := Last - First + 1;\n-                        Offset : constant Integer := Name_Len - Sym_Len;\n+                        Offset  : constant Integer := Name_Len - Sym_Len;\n                         New_Len : constant Natural := Len + Offset;\n \n                      begin\n@@ -465,7 +466,7 @@ package body GPrep is\n       --  Outfile_Name.\n \n       procedure Recursive_Process (In_Dir : String; Out_Dir : String);\n-      --  Process recursively files in In_Dir. Results go to Out_Dir.\n+      --  Process recursively files in In_Dir. Results go to Out_Dir\n \n       ----------------------\n       -- Process_One_File --\n@@ -475,7 +476,7 @@ package body GPrep is\n          Infile : Source_File_Index;\n \n       begin\n-         --  Create the output file; fails if this does not work.\n+         --  Create the output file (fails if this does not work)\n \n          begin\n             Create (Text_Outfile, Out_File, Get_Name_String (Outfile_Name));\n@@ -521,8 +522,7 @@ package body GPrep is\n             Errutil.Finalize (Source_Type => \"input\");\n          end if;\n \n-         --  If we had some errors, delete the output file, and report\n-         --  the errors.\n+         --  If we had some errors, delete the output file, and report them\n \n          if Err_Vars.Total_Errors_Detected > 0 then\n             if Outfile /= Standard_Output then\n@@ -533,7 +533,7 @@ package body GPrep is\n \n             OS_Exit (0);\n \n-         --  otherwise, close the output file, and we are done.\n+         --  Otherwise, close the output file, and we are done\n \n          elsif Outfile /= Standard_Output then\n             Close (Text_Outfile);\n@@ -564,6 +564,8 @@ package body GPrep is\n             Output_Directory := Out_Dir_Name;\n          end Set_Directory_Names;\n \n+      --  Start of processing for Recursive_Process\n+\n       begin\n          --  Open the current input directory\n \n@@ -645,8 +647,11 @@ package body GPrep is\n          end loop;\n       end Recursive_Process;\n \n+   --  Start of processing for Process_Files\n+\n    begin\n       if Output_Directory = No_Name then\n+\n          --  If the output is not a directory, fail if the input is\n          --  an existing directory, to avoid possible problems.\n \n@@ -660,6 +665,7 @@ package body GPrep is\n          Process_One_File;\n \n       elsif Input_Directory = No_Name then\n+\n          --  Get the output file name from the input file name, and process\n          --  the single input file.\n \n@@ -697,7 +703,8 @@ package body GPrep is\n \n       loop\n          begin\n-            Switch := GNAT.Command_Line.Getopt (\"D: b c r s u v\");\n+            Switch := GNAT.Command_Line.Getopt (\"D: b c C r s u v\");\n+\n             case Switch is\n \n                when ASCII.NUL =>\n@@ -713,6 +720,9 @@ package body GPrep is\n                when 'c' =>\n                   Opt.Comment_Deleted_Lines := True;\n \n+               when 'C' =>\n+                  Opt.Replace_In_Comments := True;\n+\n                when 'r' =>\n                   Source_Ref_Pragma := True;\n \n@@ -780,6 +790,7 @@ package body GPrep is\n       Write_Line (\"gnatprep switches:\");\n       Write_Line (\"   -b  Replace preprocessor lines by blank lines\");\n       Write_Line (\"   -c  Keep preprocessor lines as comments\");\n+      Write_Line (\"   -C  Do symbol replacements within comments\");\n       Write_Line (\"   -D  Associate symbol with value\");\n       Write_Line (\"   -r  Generate Source_Reference pragma\");\n       Write_Line (\"   -s  Print a sorted list of symbol names and values\");"}, {"sha": "69cd038e1244f817032d0d80c77e2f2c7d024db5", "filename": "gcc/ada/opt.ads", "status": "modified", "additions": 46, "deletions": 22, "changes": 68, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55/gcc%2Fada%2Fopt.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55/gcc%2Fada%2Fopt.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fopt.ads?ref=383b2b42cbdd3868ebccf2fdf107ba4e2741bf55", "patch": "@@ -34,7 +34,7 @@\n --  This package contains global flags set by the initialization routine from\n --  the command line and referenced throughout the compiler, the binder, or\n --  other GNAT tools. The comments indicate which options are used by which\n---  programs (GNAT, GNATBIND, GNATMAKE, etc).\n+--  programs (GNAT, GNATBIND, GNATLINK, GNATMAKE, GPRMAKE, etc).\n \n with Gnatvsn;  use Gnatvsn;\n with Hostparm; use Hostparm;\n@@ -61,8 +61,12 @@ package Opt is\n    --  Set True if binder file to be generated in Ada rather than C\n \n    type Ada_Version_Type is (Ada_83, Ada_95, Ada_05);\n+   pragma Warnings (Off, Ada_Version_Type);\n    --  Versions of Ada for Ada_Version below. Note that these are ordered,\n    --  so that tests like Ada_Version >= Ada_95 are legitimate and useful.\n+   --  The Warnings_Off pragma stops warnings for Ada_Version >= Ada_05,\n+   --  which we want to allow, so that things work OK when Ada_15 is added!\n+   --  This warning is now removed, so this pragma can be removed some time???\n \n    Ada_Version_Default : Ada_Version_Type := Ada_95;\n    --  GNAT\n@@ -148,7 +152,7 @@ package Opt is\n    --  it ON. It is set ON when Tree_Output is set ON, it can also be set ON\n    --  from the code of GNSA-based tool (a client may need to set ON the\n    --  Back_Annotate_Rep_Info flag in this case. At the moment this does not\n-   --  make very much sense, because GNSA can not do back annotation).\n+   --  make very much sense, because GNSA cannot do back annotation).\n \n    Back_Annotate_Rep_Info : Boolean := False;\n    --  GNAT\n@@ -173,7 +177,7 @@ package Opt is\n    --  building a library. May be set to True by Gnatbind.Scan_Bind_Arg.\n \n    Bind_Only : Boolean := False;\n-   --  GNATMAKE\n+   --  GNATMAKE, GPRMAKE\n    --  Set to True to skip compile and link steps\n    --  (except when Compile_Only and/or Link_Only are True).\n \n@@ -218,7 +222,7 @@ package Opt is\n    --  directly modified by gnatmake, to affect the shared binder routines.\n \n    Check_Switches : Boolean := False;\n-   --  GNATMAKE\n+   --  GNATMAKE, GPRMAKE\n    --  Set to True to check compiler options during the make process\n \n    Check_Unreferenced : Boolean := False;\n@@ -242,9 +246,9 @@ package Opt is\n    --  in the output file.\n \n    Compile_Only : Boolean := False;\n-   --  GNATMAKE, GNATCLEAN\n-   --  GNATMAKE: set to True to skip bind and link steps (except when\n-   --            Bind_Only is True).\n+   --  GNATMAKE, GNATCLEAN, GPRMAKE\n+   --  GNATMAKE, GPRMAKE: set to True to skip bind and link steps (except when\n+   --                     Bind_Only is True).\n    --  GNATCLEAN: set to True to only the files produced by the compiler are to\n    --             be deleted, but not the library files or executable files.\n \n@@ -268,9 +272,9 @@ package Opt is\n    --  Set to True to activate warnings on constant conditions\n \n    Create_Mapping_File : Boolean := False;\n-   --  GNATMAKE\n-   --  Set to True (-C switch) to indicate that gnatmake will invoke\n-   --  the compiler with a mapping file (-gnatem compiler switch).\n+   --  GNATMAKE, GPRMAKE\n+   --  Set to True (-C switch) to indicate that the compiler will be invoked\n+   --  with a mapping file (-gnatem compiler switch).\n \n    Debug_Pragmas_Enabled : Boolean := False;\n    --  GNAT\n@@ -309,7 +313,7 @@ package Opt is\n    --  potentially blocking operations are detected from protected actions.\n \n    Display_Compilation_Progress : Boolean := False;\n-   --  GNATMAKE\n+   --  GNATMAKE, GPRMAKE\n    --  Set True (-d switch) to display information on progress while compiling\n    --  files. Internal flag to be used in conjunction with an IDE (e.g GPS).\n \n@@ -451,11 +455,11 @@ package Opt is\n    --  (-F switch set).\n \n    Force_Compilations : Boolean := False;\n-   --  GNATMAKE\n+   --  GNATMAKE, GPRMAKE\n    --  Set to force recompilations even when the objects are up-to-date.\n \n    Full_Path_Name_For_Brief_Errors : Boolean := False;\n-   --  GNAT, GNATMAKE, GNATCLEAN\n+   --  GNAT, GNATMAKE, GNATCLEAN, GPRMAKE\n    --  When True, in Brief_Output mode, each error message line\n    --  will start with the full path name of the source.\n    --  When False, only the file name without directory information\n@@ -566,8 +570,8 @@ package Opt is\n    --  if not.\n \n    Keep_Going : Boolean := False;\n-   --  GNATMAKE\n-   --  When True signals gnatmake to ignore compilation errors and keep\n+   --  GNATMAKE, GPRMAKE\n+   --  When True signals to ignore compilation errors and keep\n    --  processing sources until there is no more work.\n \n    Keep_Temporary_Files : Boolean := False;\n@@ -576,7 +580,7 @@ package Opt is\n    --  deleted. Set by switch -dn or qualifier /KEEP_TEMPORARY_FILES.\n \n    Link_Only : Boolean := False;\n-   --  GNATMAKE\n+   --  GNATMAKE, GPRMAKE\n    --  Set to True to skip compile and bind steps\n    --  (except when Bind_Only is set to True).\n \n@@ -693,7 +697,7 @@ package Opt is\n    --  Column_Number'Last during scanning of configuration pragma files.\n \n    Maximum_Processes : Positive := 1;\n-   --  GNATMAKE\n+   --  GNATMAKE, GPRMAKE\n    --  Maximum number of processes that should be spawned to carry out\n    --  compilations.\n \n@@ -762,11 +766,11 @@ package Opt is\n    --  This constant reflects the optimization level (0,1,2 for -O0,-O1,-O2)\n \n    Output_File_Name_Present : Boolean := False;\n-   --  GNATBIND, GNAT, GNATMAKE\n+   --  GNATBIND, GNAT, GNATMAKE, GPRMAKE\n    --  Set to True when the output C file name is given with option -o\n    --  for GNATBIND, when the object file name is given with option\n    --  -gnatO for GNAT or when the executable is given with option -o\n-   --  for GNATMAKE.\n+   --  for GNATMAKE or GPRMAKE.\n \n    Output_Linker_Option_List : Boolean := False;\n    --  GNATBIND\n@@ -829,10 +833,14 @@ package Opt is\n    --  used if the policy is set in package System.\n \n    Quiet_Output : Boolean := False;\n-   --  GNATMAKE, GNATCLEAN, GPR2MAKE\n+   --  GNATMAKE, GNATCLEAN, GPRMAKE\n    --  Set to True if the tool should not have any output if there are no\n    --  errors or warnings.\n \n+   Replace_In_Comments : Boolean := False;\n+   --  GNATPREP\n+   --  Set to True if -C switch used\n+\n    RTS_Lib_Path_Name : String_Ptr := null;\n    RTS_Src_Path_Name : String_Ptr := null;\n    --  GNAT\n@@ -1017,17 +1025,33 @@ package Opt is\n    --  This flag determines if validity checking is on or off. The initial\n    --  state is on, and the required default validity checks are active. The\n    --  actual set of checks that is performed if Validity_Checks_On is set is\n-   --  defined by the switches in package Sem_Val. The Validity_Checks_On flag\n+   --  defined by the switches in package Validsw. The Validity_Checks_On flag\n    --  is controlled by pragma Validity_Checks (On | Off), and also some\n    --  generated compiler code (typically code that has to do with validity\n    --  check generation) is compiled with this flag set to False. This flag is\n    --  set to False by the -gnatp switch.\n \n    Verbose_Mode : Boolean := False;\n-   --  GNAT, GNATBIND, GNATMAKE, GNATLINK, GNATLS, GNATNAME, GNATCLEAN\n+   --  GNAT, GNATBIND, GNATMAKE, GNATLINK, GNATLS, GNATNAME, GNATCLEAN,\n+   --  GPRMAKE\n    --  Set to True to get verbose mode (full error message text and location\n    --  information sent to standard output, also header, copyright and summary)\n \n+   type Verbosity_Level_Type is (None, Low, Medium, High);\n+   Verbosity_Level : Verbosity_Level_Type := High;\n+   --  GNATMAKE, GPRMAKE\n+   --  Modified by gnatmake or gprmake switches -v, -vl, -vm, -vh. Indicates\n+   --  the level of verbosity of informational messages:\n+   --\n+   --  In Low Verbosity, the reasons why a source is recompiled, the name\n+   --  of the executable and the reason it must be rebuilt is output.\n+   --\n+   --  In Medium Verbosity, additional lines are output for each ALI file\n+   --  that is checked.\n+   --\n+   --  In High Verbosity, additional lines are output when the ALI file\n+   --  is part of an Ada library, is read-only or is part of the runtime.\n+\n    Warn_On_Ada_2005_Compatibility : Boolean := True;\n    --  GNAT\n    --  Set to True to active all warnings on Ada 2005 compatibility issues,"}, {"sha": "7e2a58078a101e8191155d325dc2a5954137f7c6", "filename": "gcc/ada/scans.ads", "status": "modified", "additions": 23, "deletions": 12, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55/gcc%2Fada%2Fscans.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55/gcc%2Fada%2Fscans.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fscans.ads?ref=383b2b42cbdd3868ebccf2fdf107ba4e2741bf55", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -190,22 +190,27 @@ package Scans is\n \n       Tok_Dot_Dot,         -- ..           Sterm, Chtok\n \n-      --  The following three entries are used only when scanning project\n-      --  files.\n-\n       Tok_Project,\n       Tok_Extends,\n       Tok_External,\n-      Tok_Comment,\n+      --  These three entries represent keywords for the project file language\n+      --  and can be returned only in the case of scanning project files.\n \n-      --  The following entry is used by the preprocessor and when scanning\n-      --  project files.\n+      Tok_Comment,\n+      --  This entry is used when scanning project files (where it represents\n+      --  an entire comment), and in preprocessing with the -C switch set\n+      --  (where it represents just the \"--\" of a comment). For the project\n+      --  file case, the text of the comment is stored in\n \n       Tok_End_Of_Line,\n-\n-      --  The following entry is used by the preprocessor\n+      --  Represents an end of line. Not used during normal compilation scans\n+      --  where end of line is ignored. Active for preprocessor scanning and\n+      --  also when scanning project files (where it is neede because of ???)\n \n       Tok_Special,\n+      --  Used only in preprocessor scanning (to represent one of the\n+      --  characters '#', '$', '?', '@', '`', '\\', '^', '~', or '_'. The\n+      --  character value itself is stored in Scans.Special_Character.\n \n       No_Token);\n       --  No_Token is used for initializing Token values to indicate that\n@@ -394,7 +399,7 @@ package Scans is\n    --  We do things this way to minimize the impact on comment scanning.\n \n    Character_Code : Char_Code;\n-   --  Valid only when Token is Tok_Char_Literal.\n+   --  Valid only when Token is Tok_Char_Literal\n \n    Real_Literal_Value : Ureal;\n    --  Valid only when Token is Tok_Real_Literal\n@@ -411,11 +416,17 @@ package Scans is\n    --  Valid only when Token = Tok_String_Literal.\n \n    Special_Character : Character;\n-   --  Valid only when Token = Tok_Special\n+   --  Valid only when Token = Tok_Special. Returns one of the characters\n+   --  '#', '$', '?', '@', '`', '\\', '^', '~', or '_'.\n+   --\n+   --  Why only this set? What about wide characters???\n \n    Comment_Id : Name_Id := No_Name;\n    --  Valid only when Token = Tok_Comment. Store the string that follows\n-   --  the two '-' of a comment.\n+   --  the \"--\" of a comment when scanning project files.\n+   --\n+   --  Is it really right for this to be a Name rather than a String, what\n+   --  about the case of Wide_Wide_Characters???\n \n    --------------------------------------------------------\n    -- Procedures for Saving and Restoring the Scan State --"}, {"sha": "687c32b11d5d6ca6f3376c87ec2ec9a15319c006", "filename": "gcc/ada/scng.adb", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55/gcc%2Fada%2Fscng.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55/gcc%2Fada%2Fscng.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fscng.adb?ref=383b2b42cbdd3868ebccf2fdf107ba4e2741bf55", "patch": "@@ -1465,6 +1465,17 @@ package body Scng is\n             else -- Source (Scan_Ptr + 1) = '-' then\n                if Style_Check then Style.Check_Comment; end if;\n                Scan_Ptr := Scan_Ptr + 2;\n+\n+               --  If we are in preprocessor mode with Replace_In_Comments set,\n+               --  then we return the \"--\" as a token on its own.\n+\n+               if Replace_In_Comments then\n+                  Token := Tok_Comment;\n+                  return;\n+               end if;\n+\n+               --  Otherwise scan out the comment\n+\n                Start_Of_Comment := Scan_Ptr;\n \n                --  Loop to scan comment (this loop runs more than once only if"}, {"sha": "9f37b20683c53686218669d12010fa62fcfbc408", "filename": "gcc/ada/vms_data.ads", "status": "modified", "additions": 39, "deletions": 1, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55/gcc%2Fada%2Fvms_data.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/383b2b42cbdd3868ebccf2fdf107ba4e2741bf55/gcc%2Fada%2Fvms_data.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fvms_data.ads?ref=383b2b42cbdd3868ebccf2fdf107ba4e2741bf55", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1996-2005 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1996-2005, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -3760,6 +3760,14 @@ package VMS_Data is\n    --   /VERBOSE), then error lines start with the full path name of the\n    --   project file, rather than its simple file name.\n \n+   S_Make_Hi_Verb : aliased constant S := \"/HIGH_VERBOSITY \"               &\n+                                          \"-vh\";\n+   --        /NOHIGH_VERBOSITY (D)\n+   --        /HIGH_VERBOSITY\n+   --\n+   --   Displays the reason for all recompilations GNAT MAKE decides are\n+   --   necessary, in high verbosity. Equivalent to /VERBOSE.\n+\n    S_Make_Inplace : aliased constant S := \"/IN_PLACE \"                     &\n                                             \"-i\";\n    --        /NOIN_PLACE (D)\n@@ -3798,6 +3806,15 @@ package VMS_Data is\n    --   /COMPILER_QUALIFIERS, /BINDER_QUALIFIERS and /MAKE_QUALIFIERS will be\n    --   passed to any GNAT LINK commands generated by GNAT LINK.\n \n+   S_Make_Low_Verb : aliased constant S := \"/LOW_VERBOSITY \"               &\n+                                           \"-vl\";\n+   --        /NOLOW_VERBOSITY (D)\n+   --        /LOW_VERBOSITY\n+   --\n+   --   Displays the reason for all recompilations GNAT MAKE decides are\n+   --   necessary, in low verbosity, that is with less output than\n+   --   /MEDIUM_VERBOSITY, /HIGH_VERBOSITY or /VERBOSE.\n+\n    S_Make_Make    : aliased constant S := \"/MAKE_QUALIFIERS=?\"             &\n                                             \"-margs MAKE\";\n    --        /MAKE_QUALIFIERS\n@@ -3822,6 +3839,15 @@ package VMS_Data is\n    --   the mapping file. This will improve the source search during the next\n    --   invocations of the compiler\n \n+   S_Make_Med_Verb : aliased constant S := \"/MEDIUM_VERBOSITY \"            &\n+                                           \"-vm\";\n+   --        /NOMEDIUM_VERBOSITY (D)\n+   --        /MEDIUM_VERBOSITY\n+   --\n+   --   Displays the reason for all recompilations GNAT MAKE decides are\n+   --   necessary, in medium verbosity, that is with potentially less output\n+   --   than /HIGH_VERBOSITY or /VERBOSE.\n+\n    S_Make_Mess    : aliased constant S := \"/MESSAGES_PROJECT_FILE=\"        &\n                                             \"DEFAULT \"                     &\n                                                \"-vP0 \"                     &\n@@ -4017,12 +4043,15 @@ package VMS_Data is\n       S_Make_Ext     'Access,\n       S_Make_Force   'Access,\n       S_Make_Full    'Access,\n+      S_Make_Hi_Verb 'Access,\n       S_Make_Inplace 'Access,\n       S_Make_Index   'Access,\n       S_Make_Library 'Access,\n       S_Make_Link    'Access,\n+      S_Make_Low_Verb'Access,\n       S_Make_Make    'Access,\n       S_Make_Mapping 'Access,\n+      S_Make_Med_Verb'Access,\n       S_Make_Mess    'Access,\n       S_Make_Minimal 'Access,\n       S_Make_Nolink  'Access,\n@@ -4452,6 +4481,14 @@ package VMS_Data is\n    --   Preprocessor lines and deleted lines are completely removed from the\n    --   output.\n \n+   S_Prep_Replace : aliased constant S := \"/REPLACE_IN_COMMENTS \"          &\n+                                            \"-C\";\n+   --        /NOREPLACE_IN_COMMENTS (D)\n+   --        /REPLACE_IN_COMMENTS\n+   --\n+   --   Causes preprocessor to scan comments and perform replacements on\n+   --   any $symbol occurrences within the comment text.\n+\n    S_Prep_Symbols : aliased constant S := \"/SYMBOLS \"                      &\n                                             \"-s\";\n    --        /NOSYMBOLS (D)\n@@ -4471,6 +4508,7 @@ package VMS_Data is\n       S_Prep_Com     'Access,\n       S_Prep_Ref     'Access,\n       S_Prep_Remove  'Access,\n+      S_Prep_Replace 'Access,\n       S_Prep_Symbols 'Access,\n       S_Prep_Undef   'Access);\n "}]}