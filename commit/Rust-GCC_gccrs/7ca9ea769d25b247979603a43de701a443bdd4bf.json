{"sha": "7ca9ea769d25b247979603a43de701a443bdd4bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2NhOWVhNzY5ZDI1YjI0Nzk3OTYwM2E0M2RlNzAxYTQ0M2JkZDRiZg==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2012-02-05T15:06:40Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2012-02-05T15:06:40Z"}, "message": "gcc/\n\t* config/mips/mips.md (sibcall_internal, sibcall_value_internal)\n\t(sibcall_value_multiple_internal, call_split, call_internal_direct)\n\t(call_direct_split, call_value_split, call_value_internal_direct)\n\t(call_value_direct_split, call_value_multiple_split): Use jal and\n\tjal_macro attributes.\n\nFrom-SVN: r183913", "tree": {"sha": "46d113e8728d9805cc2d7017928e8e6f47324579", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/46d113e8728d9805cc2d7017928e8e6f47324579"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7ca9ea769d25b247979603a43de701a443bdd4bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ca9ea769d25b247979603a43de701a443bdd4bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ca9ea769d25b247979603a43de701a443bdd4bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ca9ea769d25b247979603a43de701a443bdd4bf/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6caf807fbaf064ef477306d84f58e4de1584ab09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6caf807fbaf064ef477306d84f58e4de1584ab09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6caf807fbaf064ef477306d84f58e4de1584ab09"}], "stats": {"total": 42, "additions": 29, "deletions": 13}, "files": [{"sha": "13d324c17217ea7b220808ca6a9a0dfdb7dfb593", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ca9ea769d25b247979603a43de701a443bdd4bf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ca9ea769d25b247979603a43de701a443bdd4bf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7ca9ea769d25b247979603a43de701a443bdd4bf", "patch": "@@ -1,3 +1,11 @@\n+2012-02-05  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\t* config/mips/mips.md (sibcall_internal, sibcall_value_internal)\n+\t(sibcall_value_multiple_internal, call_split, call_internal_direct)\n+\t(call_direct_split, call_value_split, call_value_internal_direct)\n+\t(call_value_direct_split, call_value_multiple_split): Use jal and\n+\tjal_macro attributes.\n+\n 2012-02-05  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* reload1.c (reload_regs_reach_end_p): Replace with..."}, {"sha": "e5d716dfa4fec76fd847f71f70d93894d098764e", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 21, "deletions": 13, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ca9ea769d25b247979603a43de701a443bdd4bf/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ca9ea769d25b247979603a43de701a443bdd4bf/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=7ca9ea769d25b247979603a43de701a443bdd4bf", "patch": "@@ -6119,7 +6119,8 @@\n \t (match_operand 1 \"\" \"\"))]\n   \"TARGET_SIBCALLS && SIBLING_CALL_P (insn)\"\n   { return MIPS_CALL (\"j\", operands, 0, 1); }\n-  [(set_attr \"type\" \"call\")])\n+  [(set_attr \"jal\" \"indirect,direct\")\n+   (set_attr \"jal_macro\" \"no\")])\n \n (define_expand \"sibcall_value\"\n   [(parallel [(set (match_operand 0 \"\")\n@@ -6139,7 +6140,8 @@\n               (match_operand 2 \"\" \"\")))]\n   \"TARGET_SIBCALLS && SIBLING_CALL_P (insn)\"\n   { return MIPS_CALL (\"j\", operands, 1, 2); }\n-  [(set_attr \"type\" \"call\")])\n+  [(set_attr \"jal\" \"indirect,direct\")\n+   (set_attr \"jal_macro\" \"no\")])\n \n (define_insn \"sibcall_value_multiple_internal\"\n   [(set (match_operand 0 \"register_operand\" \"\")\n@@ -6150,7 +6152,8 @@\n \t      (match_dup 2)))]\n   \"TARGET_SIBCALLS && SIBLING_CALL_P (insn)\"\n   { return MIPS_CALL (\"j\", operands, 1, 2); }\n-  [(set_attr \"type\" \"call\")])\n+  [(set_attr \"jal\" \"indirect,direct\")\n+   (set_attr \"jal_macro\" \"no\")])\n \n (define_expand \"call\"\n   [(parallel [(call (match_operand 0 \"\")\n@@ -6214,13 +6217,14 @@\n   [(set_attr \"jal\" \"indirect,direct\")])\n \n (define_insn \"call_split\"\n-  [(call (mem:SI (match_operand 0 \"call_insn_operand\" \"cS\"))\n+  [(call (mem:SI (match_operand 0 \"call_insn_operand\" \"c,S\"))\n \t (match_operand 1 \"\" \"\"))\n    (clobber (reg:SI RETURN_ADDR_REGNUM))\n    (clobber (reg:SI 28))]\n   \"TARGET_SPLIT_CALLS\"\n   { return MIPS_CALL (\"jal\", operands, 0, 1); }\n-  [(set_attr \"type\" \"call\")])\n+  [(set_attr \"jal\" \"indirect,direct\")\n+   (set_attr \"jal_macro\" \"no\")])\n \n ;; A pattern for calls that must be made directly.  It is used for\n ;; MIPS16 calls that the linker may need to redirect to a hard-float\n@@ -6240,7 +6244,7 @@\n \t\t   gen_call_direct_split (operands[0], operands[1]));\n   DONE;\n }\n-  [(set_attr \"type\" \"call\")])\n+  [(set_attr \"jal\" \"direct\")])\n \n (define_insn \"call_direct_split\"\n   [(call (mem:SI (match_operand 0 \"const_call_insn_operand\"))\n@@ -6250,7 +6254,8 @@\n    (clobber (reg:SI 28))]\n   \"TARGET_SPLIT_CALLS\"\n   { return MIPS_CALL (\"jal\", operands, 0, -1); }\n-  [(set_attr \"type\" \"call\")])\n+  [(set_attr \"jal\" \"direct\")\n+   (set_attr \"jal_macro\" \"no\")])\n \n (define_expand \"call_value\"\n   [(parallel [(set (match_operand 0 \"\")\n@@ -6284,13 +6289,14 @@\n \n (define_insn \"call_value_split\"\n   [(set (match_operand 0 \"register_operand\" \"\")\n-        (call (mem:SI (match_operand 1 \"call_insn_operand\" \"cS\"))\n+        (call (mem:SI (match_operand 1 \"call_insn_operand\" \"c,S\"))\n               (match_operand 2 \"\" \"\")))\n    (clobber (reg:SI RETURN_ADDR_REGNUM))\n    (clobber (reg:SI 28))]\n   \"TARGET_SPLIT_CALLS\"\n   { return MIPS_CALL (\"jal\", operands, 1, 2); }\n-  [(set_attr \"type\" \"call\")])\n+  [(set_attr \"jal\" \"indirect,direct\")\n+   (set_attr \"jal_macro\" \"no\")])\n \n ;; See call_internal_direct.\n (define_insn_and_split \"call_value_internal_direct\"\n@@ -6309,7 +6315,7 @@\n \t\t\t\t\t\toperands[2]));\n   DONE;\n }\n-  [(set_attr \"type\" \"call\")])\n+  [(set_attr \"jal\" \"direct\")])\n \n (define_insn \"call_value_direct_split\"\n   [(set (match_operand 0 \"register_operand\")\n@@ -6320,7 +6326,8 @@\n    (clobber (reg:SI 28))]\n   \"TARGET_SPLIT_CALLS\"\n   { return MIPS_CALL (\"jal\", operands, 1, -1); }\n-  [(set_attr \"type\" \"call\")])\n+  [(set_attr \"jal\" \"direct\")\n+   (set_attr \"jal_macro\" \"no\")])\n \n ;; See comment for call_internal.\n (define_insn_and_split \"call_value_multiple_internal\"\n@@ -6345,7 +6352,7 @@\n \n (define_insn \"call_value_multiple_split\"\n   [(set (match_operand 0 \"register_operand\" \"\")\n-        (call (mem:SI (match_operand 1 \"call_insn_operand\" \"cS\"))\n+        (call (mem:SI (match_operand 1 \"call_insn_operand\" \"c,S\"))\n               (match_operand 2 \"\" \"\")))\n    (set (match_operand 3 \"register_operand\" \"\")\n \t(call (mem:SI (match_dup 1))\n@@ -6354,7 +6361,8 @@\n    (clobber (reg:SI 28))]\n   \"TARGET_SPLIT_CALLS\"\n   { return MIPS_CALL (\"jal\", operands, 1, 2); }\n-  [(set_attr \"type\" \"call\")])\n+  [(set_attr \"jal\" \"indirect,direct\")\n+   (set_attr \"jal_macro\" \"no\")])\n \n ;; Call subroutine returning any type.\n "}]}