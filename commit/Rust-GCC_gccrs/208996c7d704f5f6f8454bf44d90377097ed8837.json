{"sha": "208996c7d704f5f6f8454bf44d90377097ed8837", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjA4OTk2YzdkNzA0ZjVmNmY4NDU0YmY0NGQ5MDM3NzA5N2VkODgzNw==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@nildram.co.uk", "date": "2007-09-23T19:08:56Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-09-23T19:08:56Z"}, "message": "function.c (assign_parm_setup_block): Explicitly convert BLKmode parameters from word_mode to the subword type if...\n\ngcc/\n\t* function.c (assign_parm_setup_block): Explicitly convert BLKmode\n\tparameters from word_mode to the subword type if such a truncation\n\tis not a no-op.\n\nFrom-SVN: r128696", "tree": {"sha": "9293268eac64e17a465440936726ccb35d7c0668", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9293268eac64e17a465440936726ccb35d7c0668"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/208996c7d704f5f6f8454bf44d90377097ed8837", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/208996c7d704f5f6f8454bf44d90377097ed8837", "html_url": "https://github.com/Rust-GCC/gccrs/commit/208996c7d704f5f6f8454bf44d90377097ed8837", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/208996c7d704f5f6f8454bf44d90377097ed8837/comments", "author": null, "committer": null, "parents": [{"sha": "4c4717752abbed17c278b44ba9891128a5c14e0d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c4717752abbed17c278b44ba9891128a5c14e0d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c4717752abbed17c278b44ba9891128a5c14e0d"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "940e6b6b3c8d6d0f3200d81fa3ca46034da214a0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/208996c7d704f5f6f8454bf44d90377097ed8837/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/208996c7d704f5f6f8454bf44d90377097ed8837/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=208996c7d704f5f6f8454bf44d90377097ed8837", "patch": "@@ -1,3 +1,9 @@\n+2007-09-23  Richard Sandiford  <rsandifo@nildram.co.uk>\n+\n+\t* function.c (assign_parm_setup_block): Explicitly convert BLKmode\n+\tparameters from word_mode to the subword type if such a truncation\n+\tis not a no-op.\n+\n 2007-09-23  Jakub Jelinek  <jakub@redhat.com>\n \n \t* configure.ac (MAKEINFO): Handle makeinfo version 4.10 and above."}, {"sha": "5f2dd480d245002d458571042f8116ff00c84127", "filename": "gcc/function.c", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/208996c7d704f5f6f8454bf44d90377097ed8837/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/208996c7d704f5f6f8454bf44d90377097ed8837/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=208996c7d704f5f6f8454bf44d90377097ed8837", "patch": "@@ -2591,7 +2591,21 @@ assign_parm_setup_block (struct assign_parm_data_all *all,\n #endif\n \t      )\n \t    {\n-\t      rtx reg = gen_rtx_REG (mode, REGNO (entry_parm));\n+\t      rtx reg;\n+\n+\t      /* We are really truncating a word_mode value containing\n+\t\t SIZE bytes into a value of mode MODE.  If such an\n+\t\t operation requires no actual instructions, we can refer\n+\t\t to the value directly in mode MODE, otherwise we must\n+\t\t start with the register in word_mode and explicitly\n+\t\t convert it.  */\n+\t      if (TRULY_NOOP_TRUNCATION (size * BITS_PER_UNIT, BITS_PER_WORD))\n+\t\treg = gen_rtx_REG (mode, REGNO (entry_parm));\n+\t      else\n+\t\t{\n+\t\t  reg = gen_rtx_REG (word_mode, REGNO (entry_parm));\n+\t\t  reg = convert_to_mode (mode, copy_to_reg (reg), 1);\n+\t\t}\n \t      emit_move_insn (change_address (mem, mode, 0), reg);\n \t    }\n "}]}