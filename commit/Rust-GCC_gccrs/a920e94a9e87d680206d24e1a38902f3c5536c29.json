{"sha": "a920e94a9e87d680206d24e1a38902f3c5536c29", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTkyMGU5NGE5ZTg3ZDY4MDIwNmQyNGUxYTM4OTAyZjNjNTUzNmMyOQ==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-01-29T16:31:24Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-01-29T16:31:24Z"}, "message": "re PR fortran/18578 (intent(inout) violation is not detected)\n\n2006-01-29  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/18578\n\tPR fortran/18579\n\tPR fortran/20857\n\tPR fortran/20885\n\t* interface.c (compare_actual_formal): Error for INTENT(OUT or INOUT)\n\tif actual argument is not a variable.\n\n2006-01-29  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/18578\n\tPR fortran/18579\n\tPR fortran/20857\n\tPR fortran/20885\n\t* gfortran.dg/intent_out_1.f90: New test.\n\nFrom-SVN: r110376", "tree": {"sha": "2efa745c0302c8ea212bcdc685d98c5d62accfe1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2efa745c0302c8ea212bcdc685d98c5d62accfe1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a920e94a9e87d680206d24e1a38902f3c5536c29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a920e94a9e87d680206d24e1a38902f3c5536c29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a920e94a9e87d680206d24e1a38902f3c5536c29", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a920e94a9e87d680206d24e1a38902f3c5536c29/comments", "author": null, "committer": null, "parents": [{"sha": "e8f9ec3507675aa1687cb38f7b307b301c6e3f1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8f9ec3507675aa1687cb38f7b307b301c6e3f1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8f9ec3507675aa1687cb38f7b307b301c6e3f1a"}], "stats": {"total": 46, "additions": 46, "deletions": 0}, "files": [{"sha": "4eb14b89d161d4c3f9eaf451b966fab695c9c7da", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a920e94a9e87d680206d24e1a38902f3c5536c29/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a920e94a9e87d680206d24e1a38902f3c5536c29/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=a920e94a9e87d680206d24e1a38902f3c5536c29", "patch": "@@ -1,3 +1,12 @@\n+2006-01-29  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/18578\n+\tPR fortran/18579\n+\tPR fortran/20857\n+\tPR fortran/20885\n+\t* interface.c (compare_actual_formal): Error for INTENT(OUT or INOUT)\n+\tif actual argument is not a variable.\n+\n 2006-01-28  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/17911"}, {"sha": "93e3657af71a94859f1dc34513f622a92b648dcc", "filename": "gcc/fortran/interface.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a920e94a9e87d680206d24e1a38902f3c5536c29/gcc%2Ffortran%2Finterface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a920e94a9e87d680206d24e1a38902f3c5536c29/gcc%2Ffortran%2Finterface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finterface.c?ref=a920e94a9e87d680206d24e1a38902f3c5536c29", "patch": "@@ -1273,6 +1273,16 @@ compare_actual_formal (gfc_actual_arglist ** ap,\n \t  return 0;\n \t}\n \n+      /* Check intent = OUT/INOUT for definable actual argument.  */\n+      if (a->expr->expr_type != EXPR_VARIABLE\n+\t     && (f->sym->attr.intent == INTENT_OUT\n+\t\t   || f->sym->attr.intent == INTENT_INOUT))\n+\t{\n+\t  gfc_error (\"Actual argument at %L must be definable to \"\n+\t\t     \"match dummy INTENT = OUT/INOUT\", &a->expr->where);\n+          return 0;\n+        }\n+\n     match:\n       if (a == actual)\n \tna = i;"}, {"sha": "bd6eade6dba13fe78f057e71fde9370d474456e9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a920e94a9e87d680206d24e1a38902f3c5536c29/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a920e94a9e87d680206d24e1a38902f3c5536c29/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a920e94a9e87d680206d24e1a38902f3c5536c29", "patch": "@@ -1,5 +1,13 @@\n 2006-01-29  Paul Thomas  <pault@gcc.gnu.org>\n \n+\tPR fortran/18578\n+\tPR fortran/18579\n+\tPR fortran/20857\n+\tPR fortran/20885\n+\t* gfortran.dg/intent_out_1.f90: New test.\n+\n+2006-01-28  Paul Thomas  <pault@gcc.gnu.org>\n+\n \tPR fortran/17911\n \t* gfortran.dg/procedure_lvalue.f90: New test.\n "}, {"sha": "62d74157302a0a32924e4f29756c2a6a114f73f9", "filename": "gcc/testsuite/gfortran.dg/intent_out_1.f90", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a920e94a9e87d680206d24e1a38902f3c5536c29/gcc%2Ftestsuite%2Fgfortran.dg%2Fintent_out_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a920e94a9e87d680206d24e1a38902f3c5536c29/gcc%2Ftestsuite%2Fgfortran.dg%2Fintent_out_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fintent_out_1.f90?ref=a920e94a9e87d680206d24e1a38902f3c5536c29", "patch": "@@ -0,0 +1,19 @@\n+! { dg-do compile }\n+! Tests the fix for PRs 18578, 18579 and their repeats 20857 and 20885.\n+! Contributed by Paul Thomas  <pault@gcc@gnu.org>\n+  real, parameter :: a =42.0\n+  real :: b\n+  call foo(b + 2.0)    ! { dg-error \"must be definable\" }\n+  call foo(a)          ! { dg-error \"must be definable\" }\n+  call bar(b + 2.0)    ! { dg-error \"must be definable\" }\n+  call bar(a)          ! { dg-error \"must be definable\" }\n+contains\n+  subroutine foo(a)\n+    real, intent(out) :: a\n+    a = 0.0\n+  end subroutine foo\n+  subroutine bar(a)\n+    real, intent(INout) :: a\n+    a = 0.0\n+  end subroutine bar\n+end"}]}