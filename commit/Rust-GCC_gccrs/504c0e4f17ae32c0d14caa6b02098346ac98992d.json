{"sha": "504c0e4f17ae32c0d14caa6b02098346ac98992d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTA0YzBlNGYxN2FlMzJjMGQxNGNhYTZiMDIwOTgzNDZhYzk4OTkyZA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-08-17T23:33:46Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-08-17T23:33:46Z"}, "message": "re PR tree-optimization/17051 (ICE: internal compiler error: verify_ssa failed.for SSA_NAME: l_addr<D8610>_650)\n\n        PR 17051\n        * tree-sra.c (scalarize_use): Mark all v_defs for !is_output too.\n\nFrom-SVN: r86158", "tree": {"sha": "43cdb5f4d2475904967ded397fa79c8c9d1c7fcf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/43cdb5f4d2475904967ded397fa79c8c9d1c7fcf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/504c0e4f17ae32c0d14caa6b02098346ac98992d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/504c0e4f17ae32c0d14caa6b02098346ac98992d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/504c0e4f17ae32c0d14caa6b02098346ac98992d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/504c0e4f17ae32c0d14caa6b02098346ac98992d/comments", "author": null, "committer": null, "parents": [{"sha": "7fa53b443afcae40c7e692cb4115fc755dc87b5d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7fa53b443afcae40c7e692cb4115fc755dc87b5d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7fa53b443afcae40c7e692cb4115fc755dc87b5d"}], "stats": {"total": 30, "additions": 26, "deletions": 4}, "files": [{"sha": "3e3252d76337ab7f911fb73ecbe44a72ff3b5674", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/504c0e4f17ae32c0d14caa6b02098346ac98992d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/504c0e4f17ae32c0d14caa6b02098346ac98992d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=504c0e4f17ae32c0d14caa6b02098346ac98992d", "patch": "@@ -1,3 +1,8 @@\n+2004-08-17  Richard Henderson  <rth@redhat.com>\n+\n+\tPR 17051\n+\t* tree-sra.c (scalarize_use): Mark all v_defs for !is_output too.\n+\n 2004-08-17  DJ Delorie  <dj@redhat.com>\n \n \t* doc/extend.texi: Document new xstormy16 attribute."}, {"sha": "158596c8f2da9d3d53290a9cccac19b3d1a0dbba", "filename": "gcc/testsuite/gcc.c-torture/compile/20040817-1.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/504c0e4f17ae32c0d14caa6b02098346ac98992d/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040817-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/504c0e4f17ae32c0d14caa6b02098346ac98992d/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040817-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040817-1.c?ref=504c0e4f17ae32c0d14caa6b02098346ac98992d", "patch": "@@ -0,0 +1,19 @@\n+/* PR 17051: SRA failed to rename the VOPS properly.  */\n+\n+struct A\n+{\n+    char c, d;\n+};\n+\n+void foo(struct A *p)\n+{\n+    struct A a = *p;\n+\n+    if (p->c)\n+        bar1(a);\n+    else\n+    {\n+        if (p) bar2(a,a.c);\n+        bar3(a.c);\n+    }\n+}"}, {"sha": "e6b254c6145f495497c5ca5c275828ebc9b621a5", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/504c0e4f17ae32c0d14caa6b02098346ac98992d/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/504c0e4f17ae32c0d14caa6b02098346ac98992d/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=504c0e4f17ae32c0d14caa6b02098346ac98992d", "patch": "@@ -1780,11 +1780,9 @@ scalarize_use (struct sra_elt *elt, tree *expr_p, block_stmt_iterator *bsi,\n       generate_copy_inout (elt, is_output, generate_element_ref (elt), &list);\n       if (list == NULL)\n \treturn;\n+      mark_all_v_defs (expr_first (list));\n       if (is_output)\n-\t{\n-\t  mark_all_v_defs (expr_first (list));\n-\t  sra_insert_after (bsi, list);\n-\t}\n+\tsra_insert_after (bsi, list);\n       else\n \tsra_insert_before (bsi, list);\n     }"}]}