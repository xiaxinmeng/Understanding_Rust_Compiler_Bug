{"sha": "63f7136fd89b12e2a76b546474ae5ec88fb1f62a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjNmNzEzNmZkODliMTJlMmE3NmI1NDY0NzRhZTVlYzg4ZmIxZjYyYQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-09-30T00:31:34Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-09-30T00:31:34Z"}, "message": "(movdf+3): Handle overlapping registers in define_split.\n\nFrom-SVN: r8176", "tree": {"sha": "616398ace3755c646e53294910e5bf57088b00fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/616398ace3755c646e53294910e5bf57088b00fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/63f7136fd89b12e2a76b546474ae5ec88fb1f62a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63f7136fd89b12e2a76b546474ae5ec88fb1f62a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63f7136fd89b12e2a76b546474ae5ec88fb1f62a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63f7136fd89b12e2a76b546474ae5ec88fb1f62a/comments", "author": null, "committer": null, "parents": [{"sha": "57cb9b60874ba518f04b3e5592f3c63c03771b06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57cb9b60874ba518f04b3e5592f3c63c03771b06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57cb9b60874ba518f04b3e5592f3c63c03771b06"}], "stats": {"total": 25, "additions": 21, "deletions": 4}, "files": [{"sha": "8440955829a742bf05fd127507599373f80596f3", "filename": "gcc/config/sparc/sparc.md", "status": "modified", "additions": 21, "deletions": 4, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63f7136fd89b12e2a76b546474ae5ec88fb1f62a/gcc%2Fconfig%2Fsparc%2Fsparc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63f7136fd89b12e2a76b546474ae5ec88fb1f62a/gcc%2Fconfig%2Fsparc%2Fsparc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.md?ref=63f7136fd89b12e2a76b546474ae5ec88fb1f62a", "patch": "@@ -2039,6 +2039,8 @@\n   [(set_attr \"type\" \"store,load,move,store,load\")\n    (set_attr \"length\" \"1,1,2,3,3\")])\n \n+;; Must handle overlapping registers here, since parameters can be unaligned\n+;; in registers.\n ;; ??? Do we need a v9 version of this?\n (define_split\n   [(set (match_operand:DF 0 \"register_operand\" \"\")\n@@ -2047,10 +2049,25 @@\n   [(set (match_dup 2) (match_dup 3))\n    (set (match_dup 4) (match_dup 5))]\n   \"\n-{ operands[2] = operand_subword (operands[0], 0, 0, DFmode);\n-  operands[3] = operand_subword (operands[1], 0, 0, DFmode);\n-  operands[4] = operand_subword (operands[0], 1, 0, DFmode);\n-  operands[5] = operand_subword (operands[1], 1, 0, DFmode); }\")\n+{\n+  rtx first_set = operand_subword (operands[0], 0, 0, DFmode);\n+  rtx second_use = operand_subword (operands[1], 1, 0, DFmode);\n+\n+  if (REGNO (first_set) == REGNO (second_use))\n+    {\n+      operands[2] = operand_subword (operands[0], 1, 0, DFmode);\n+      operands[3] = second_use;\n+      operands[4] = first_set;\n+      operands[5] = operand_subword (operands[1], 0, 0, DFmode);\n+    }\n+  else\n+    {\n+      operands[2] = first_set;\n+      operands[3] = operand_subword (operands[1], 0, 0, DFmode);\n+      operands[4] = operand_subword (operands[0], 1, 0, DFmode);\n+      operands[5] = second_use;\n+    }\n+}\")\n \n (define_insn \"\"\n   [(set (mem:DF (match_operand:SI 0 \"symbolic_operand\" \"i,i\"))"}]}