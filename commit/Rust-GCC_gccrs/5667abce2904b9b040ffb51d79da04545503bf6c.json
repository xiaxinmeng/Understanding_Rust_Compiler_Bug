{"sha": "5667abce2904b9b040ffb51d79da04545503bf6c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTY2N2FiY2UyOTA0YjliMDQwZmZiNTFkNzlkYTA0NTQ1NTAzYmY2Yw==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@wolery.cumb.org", "date": "2000-06-07T22:43:44Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-06-07T22:43:44Z"}, "message": "c-decl.c (pushdecl): Do not call COMPLETE_TYPE_P on error_mark_node.\n\n\t* c-decl.c (pushdecl): Do not call COMPLETE_TYPE_P on\n\terror_mark_node.\n\t* print-tree.c (print_node): The transparent_union_flag means\n\tdifferent things for unions and arrays.  Do not inspect it\n\twith TYPE_TRANSPARENT_UNION.\n\nFrom-SVN: r34449", "tree": {"sha": "68e575e9aa68b36833e0f78077ec30ecbf15773b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68e575e9aa68b36833e0f78077ec30ecbf15773b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5667abce2904b9b040ffb51d79da04545503bf6c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5667abce2904b9b040ffb51d79da04545503bf6c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5667abce2904b9b040ffb51d79da04545503bf6c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5667abce2904b9b040ffb51d79da04545503bf6c/comments", "author": null, "committer": null, "parents": [{"sha": "5af7e2c2e1949e500d44d78d25f98cd3cfdf3e3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5af7e2c2e1949e500d44d78d25f98cd3cfdf3e3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5af7e2c2e1949e500d44d78d25f98cd3cfdf3e3c"}], "stats": {"total": 29, "additions": 25, "deletions": 4}, "files": [{"sha": "e129114d1e2993f660b5c5149aee81a24899b167", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5667abce2904b9b040ffb51d79da04545503bf6c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5667abce2904b9b040ffb51d79da04545503bf6c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5667abce2904b9b040ffb51d79da04545503bf6c", "patch": "@@ -1,3 +1,11 @@\n+2000-06-07  Zack Weinberg  <zack@wolery.cumb.org>\n+\n+\t* c-decl.c (pushdecl): Do not call COMPLETE_TYPE_P on\n+\terror_mark_node. \n+\t* print-tree.c (print_node): The transparent_union_flag means\n+\tdifferent things for unions and arrays.  Do not inspect it\n+\twith TYPE_TRANSPARENT_UNION.\n+\n 2000-06-06  Jakub Jelinek  <jakub@redhat.com>\n \n \t* cpplib.c (do_ifdef, do_ifndef): Don't segfault if parse_ifdef"}, {"sha": "5ee40ba2a5d973270d3beb904b7c02e57b44a67e", "filename": "gcc/c-decl.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5667abce2904b9b040ffb51d79da04545503bf6c/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5667abce2904b9b040ffb51d79da04545503bf6c/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=5667abce2904b9b040ffb51d79da04545503bf6c", "patch": "@@ -2422,8 +2422,12 @@ pushdecl (x)\n \t    b->shadowed = tree_cons (name, oldlocal, b->shadowed);\n \t}\n \n-      /* Keep count of variables in this level with incomplete type.  */\n-      if (!COMPLETE_TYPE_P (TREE_TYPE (x)))\n+      /* Keep count of variables in this level with incomplete type.\n+\t If the input is erroneous, we can have error_mark in the type\n+\t slot (e.g. \"f(void a, ...)\") - that doesn't count as an\n+\t incomplete type.  */\n+      if (TREE_TYPE (x) != error_mark_node\n+\t  && !COMPLETE_TYPE_P (TREE_TYPE (x)))\n \t++b->n_incomplete;\n     }\n "}, {"sha": "8774538ce3e64bddf80fd0099fe8b9c02bcd2423", "filename": "gcc/print-tree.c", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5667abce2904b9b040ffb51d79da04545503bf6c/gcc%2Fprint-tree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5667abce2904b9b040ffb51d79da04545503bf6c/gcc%2Fprint-tree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-tree.c?ref=5667abce2904b9b040ffb51d79da04545503bf6c", "patch": "@@ -480,8 +480,17 @@ print_node (file, prefix, node, indent)\n \tfputs (\" string-flag\", file);\n       if (TYPE_NEEDS_CONSTRUCTING (node))\n \tfputs (\" needs-constructing\", file);\n-      if (TYPE_TRANSPARENT_UNION (node))\n-\tfputs (\" transparent-union\", file);\n+      /* The transparent-union flag is used for different things in\n+\t different nodes.  */\n+      if (TYPE_CHECK (node)->type.transparent_union_flag)\n+\t{\n+\t  if (TREE_CODE (node) == UNION_TYPE)\n+\t    fputs (\" transparent-union\", file);\n+\t  else if (TREE_CODE (node) == ARRAY_TYPE)\n+\t    fputs (\" nonaliased-component\", file);\n+\t  else\n+\t    fputs (\" tu-flag\", file);\n+\t}\n       if (TYPE_PACKED (node))\n \tfputs (\" packed\", file);\n "}]}