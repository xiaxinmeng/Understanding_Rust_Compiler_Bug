{"sha": "ad0b9cf1a076fb9a802d9ba7fa2223aa3166dca2", "node_id": "C_kwDOANBUbNoAKGFkMGI5Y2YxYTA3NmZiOWE4MDJkOWJhN2ZhMjIyM2FhMzE2NmRjYTI", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2023-03-22T11:10:38Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2023-03-22T17:48:19Z"}, "message": "libstdc++: Make std::istream_iterator copy ctor constexpr (LWG 3600)\n\nAs explained in LWG 3600, we never implemented a C++0x change that made\nthe copy constructor of std::istream_iterator defined as defaulted. That\nwould be an ABI break, so the resolution of LWG 3600 is to not require\nit to be trivial, but just constexpr and conditionally noexcept. This\napplies that resolution.\n\nlibstdc++-v3/ChangeLog:\n\n\t* include/bits/stream_iterator.h (istream_iterator): Add\n\tconstexpr to copy constructor, as per LWG 3600.\n\t* testsuite/24_iterators/istream_iterator/cons/constexpr.cc:\n\tCheck copy construction.", "tree": {"sha": "de8bf89f7660bfb22684e73f485c7b33a6594e3b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/de8bf89f7660bfb22684e73f485c7b33a6594e3b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad0b9cf1a076fb9a802d9ba7fa2223aa3166dca2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad0b9cf1a076fb9a802d9ba7fa2223aa3166dca2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad0b9cf1a076fb9a802d9ba7fa2223aa3166dca2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad0b9cf1a076fb9a802d9ba7fa2223aa3166dca2/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "81d762cbec9685c2f2571da21d48f42c42eff33b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81d762cbec9685c2f2571da21d48f42c42eff33b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81d762cbec9685c2f2571da21d48f42c42eff33b"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "9dc4a550be60aa2f3bb13c7e8d2234cbc347d24a", "filename": "libstdc++-v3/include/bits/stream_iterator.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad0b9cf1a076fb9a802d9ba7fa2223aa3166dca2/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstream_iterator.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad0b9cf1a076fb9a802d9ba7fa2223aa3166dca2/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstream_iterator.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstream_iterator.h?ref=ad0b9cf1a076fb9a802d9ba7fa2223aa3166dca2", "patch": "@@ -80,6 +80,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       : _M_stream(std::__addressof(__s)), _M_ok(true)\n       { _M_read(); }\n \n+      _GLIBCXX_CONSTEXPR\n       istream_iterator(const istream_iterator& __obj)\n       _GLIBCXX_NOEXCEPT_IF(is_nothrow_copy_constructible<_Tp>::value)\n       : _M_stream(__obj._M_stream), _M_value(__obj._M_value),"}, {"sha": "95fda572d8e1321e1ed8cfa27dcea828cf27116e", "filename": "libstdc++-v3/testsuite/24_iterators/istream_iterator/cons/constexpr.cc", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad0b9cf1a076fb9a802d9ba7fa2223aa3166dca2/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fistream_iterator%2Fcons%2Fconstexpr.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad0b9cf1a076fb9a802d9ba7fa2223aa3166dca2/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fistream_iterator%2Fcons%2Fconstexpr.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fistream_iterator%2Fcons%2Fconstexpr.cc?ref=ad0b9cf1a076fb9a802d9ba7fa2223aa3166dca2", "patch": "@@ -24,5 +24,10 @@ int main()\n {\n   __gnu_test::constexpr_default_constructible test;\n   test.operator()<std::istream_iterator<char>>();\n+\n+  // LWG 3600. Making istream_iterator copy constructor trivial is an ABI break\n+  __gnu_test::constexpr_single_value_constructible test2;\n+  test2.operator()<std::istream_iterator<char>, std::istream_iterator<char>>();\n+\n   return 0;\n }"}]}