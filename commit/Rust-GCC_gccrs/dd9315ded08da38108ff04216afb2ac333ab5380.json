{"sha": "dd9315ded08da38108ff04216afb2ac333ab5380", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ5MzE1ZGVkMDhkYTM4MTA4ZmYwNDIxNmFmYjJhYzMzM2FiNTM4MA==", "commit": {"author": {"name": "Daniel Kraft", "email": "d@domob.eu", "date": "2008-10-16T16:28:23Z"}, "committer": {"name": "Daniel Kraft", "email": "domob@gcc.gnu.org", "date": "2008-10-16T16:28:23Z"}, "message": "resolve.c (resolve_elemental_actual): Handle calls to intrinsic subroutines correctly.\n\n2008-10-16  Daniel Kraft  <d@domob.eu>\n\n\t* resolve.c (resolve_elemental_actual): Handle calls to intrinsic\n\tsubroutines correctly.\n\n2008-10-16  Daniel Kraft  <d@domob.eu>\n\n\t* gfortran.dg/elemental_intrinsic_1.f03: New test.\n\nFrom-SVN: r141175", "tree": {"sha": "58c7c536f6bb3989e2f639ae8679bab849aa5ba0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58c7c536f6bb3989e2f639ae8679bab849aa5ba0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd9315ded08da38108ff04216afb2ac333ab5380", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd9315ded08da38108ff04216afb2ac333ab5380", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd9315ded08da38108ff04216afb2ac333ab5380", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd9315ded08da38108ff04216afb2ac333ab5380/comments", "author": {"login": "domob1812", "id": 4943644, "node_id": "MDQ6VXNlcjQ5NDM2NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4943644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/domob1812", "html_url": "https://github.com/domob1812", "followers_url": "https://api.github.com/users/domob1812/followers", "following_url": "https://api.github.com/users/domob1812/following{/other_user}", "gists_url": "https://api.github.com/users/domob1812/gists{/gist_id}", "starred_url": "https://api.github.com/users/domob1812/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/domob1812/subscriptions", "organizations_url": "https://api.github.com/users/domob1812/orgs", "repos_url": "https://api.github.com/users/domob1812/repos", "events_url": "https://api.github.com/users/domob1812/events{/privacy}", "received_events_url": "https://api.github.com/users/domob1812/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "919e5c5edf386d390e97199d4b302b3a59a57e36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/919e5c5edf386d390e97199d4b302b3a59a57e36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/919e5c5edf386d390e97199d4b302b3a59a57e36"}], "stats": {"total": 32, "additions": 30, "deletions": 2}, "files": [{"sha": "d4ff6b34c306033f4e6f3d220f08378f6059e951", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd9315ded08da38108ff04216afb2ac333ab5380/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd9315ded08da38108ff04216afb2ac333ab5380/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=dd9315ded08da38108ff04216afb2ac333ab5380", "patch": "@@ -1,3 +1,8 @@\n+2008-10-16  Daniel Kraft  <d@domob.eu>\n+\n+\t* resolve.c (resolve_elemental_actual): Handle calls to intrinsic\n+\tsubroutines correctly.\n+\n 2008-10-13  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* simplify.c: Remove MPFR_VERSION_NUM(2,3,0) conditionals."}, {"sha": "1816907c3ec35b191446564482d0a398852b178e", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd9315ded08da38108ff04216afb2ac333ab5380/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd9315ded08da38108ff04216afb2ac333ab5380/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=dd9315ded08da38108ff04216afb2ac333ab5380", "patch": "@@ -1352,10 +1352,18 @@ resolve_elemental_actual (gfc_expr *expr, gfc_code *c)\n       else\n \treturn SUCCESS;\n     }\n-  else if (c && c->ext.actual != NULL && c->symtree->n.sym->attr.elemental)\n+  else if (c && c->ext.actual != NULL)\n     {\n       arg0 = c->ext.actual;\n-      esym = c->symtree->n.sym;\n+      \n+      if (c->resolved_sym)\n+\tesym = c->resolved_sym;\n+      else\n+\tesym = c->symtree->n.sym;\n+      gcc_assert (esym);\n+\n+      if (!esym->attr.elemental)\n+\treturn SUCCESS;\n     }\n   else\n     return SUCCESS;"}, {"sha": "bb15a266e086b2d3035ce5a8659c0d90cb98064f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd9315ded08da38108ff04216afb2ac333ab5380/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd9315ded08da38108ff04216afb2ac333ab5380/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dd9315ded08da38108ff04216afb2ac333ab5380", "patch": "@@ -1,3 +1,7 @@\n+2008-10-16  Daniel Kraft  <d@domob.eu>\n+\n+\t* gfortran.dg/elemental_intrinsic_1.f03: New test.\n+\n 2008-10-16  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/37664"}, {"sha": "8fdaa0fe9e52e14d64615cc728fc4b1ced93e6f4", "filename": "gcc/testsuite/gfortran.dg/elemental_intrinsic_1.f03", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd9315ded08da38108ff04216afb2ac333ab5380/gcc%2Ftestsuite%2Fgfortran.dg%2Felemental_intrinsic_1.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd9315ded08da38108ff04216afb2ac333ab5380/gcc%2Ftestsuite%2Fgfortran.dg%2Felemental_intrinsic_1.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Felemental_intrinsic_1.f03?ref=dd9315ded08da38108ff04216afb2ac333ab5380", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+\n+! Conformance-checking of arguments was not done for intrinsic elemental\n+! subroutines, check this works now.\n+\n+! This is the test from PR fortran/35681, comment #1 (second program).\n+\n+  integer, dimension(10) :: ILA1 = (/1,2,3,4,5,6,7,8,9,10/)\n+  call mvbits ((ILA1((/9/))), 2, 4, ILA1, 3) ! { dg-error \"Different shape\" }\n+  write (*,'(10(I3))') ila1\n+  end "}]}