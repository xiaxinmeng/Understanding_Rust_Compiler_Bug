{"sha": "c18605ccec6c240b67ecf2b4ce2700e7877bf94e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzE4NjA1Y2NlYzZjMjQwYjY3ZWNmMmI0Y2UyNzAwZTc4NzdiZjk0ZQ==", "commit": {"author": {"name": "Andreas Krebbel", "email": "Andreas.Krebbel@de.ibm.com", "date": "2010-09-06T14:20:31Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2010-09-06T14:20:31Z"}, "message": "combine.c (try_combine): Set subst_low_luid to i0.\n\n2010-09-06  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\t* combine.c (try_combine): Set subst_low_luid to i0.\n\n2010-09-06  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\t* gcc.dg/20100906-1.c: New testcase.\n\nFrom-SVN: r163917", "tree": {"sha": "f0804d17459f9e6f97ca82a54d3e9ae880ce678c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f0804d17459f9e6f97ca82a54d3e9ae880ce678c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c18605ccec6c240b67ecf2b4ce2700e7877bf94e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c18605ccec6c240b67ecf2b4ce2700e7877bf94e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c18605ccec6c240b67ecf2b4ce2700e7877bf94e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c18605ccec6c240b67ecf2b4ce2700e7877bf94e/comments", "author": null, "committer": null, "parents": [{"sha": "6d105d8db87a50562d855bb54b39b3c21f3e0060", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d105d8db87a50562d855bb54b39b3c21f3e0060", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d105d8db87a50562d855bb54b39b3c21f3e0060"}], "stats": {"total": 58, "additions": 57, "deletions": 1}, "files": [{"sha": "18893e72a5e97bda05655cc4b30493b6dfad02d6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c18605ccec6c240b67ecf2b4ce2700e7877bf94e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c18605ccec6c240b67ecf2b4ce2700e7877bf94e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c18605ccec6c240b67ecf2b4ce2700e7877bf94e", "patch": "@@ -1,3 +1,7 @@\n+2010-09-06  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\t* combine.c (try_combine): Set subst_low_luid to i0.\n+\n 2010-09-06  Richard Guenther  <rguenther@suse.de>\n \n \t* tree.def (MISALIGNED_INDIRECT_REF): Remove."}, {"sha": "bed5768b03f160d930850f5306e6cad28106607d", "filename": "gcc/combine.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c18605ccec6c240b67ecf2b4ce2700e7877bf94e/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c18605ccec6c240b67ecf2b4ce2700e7877bf94e/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=c18605ccec6c240b67ecf2b4ce2700e7877bf94e", "patch": "@@ -3138,7 +3138,7 @@ try_combine (rtx i3, rtx i2, rtx i1, rtx i0, int *new_direct_jump_p)\n \t}\n \n       n_occurrences = 0;\n-      subst_low_luid = DF_INSN_LUID (i1);\n+      subst_low_luid = DF_INSN_LUID (i0);\n       newpat = subst (newpat, i0dest, i0src, 0,\n \t\t      i0_feeds_i1_n && i0dest_in_i0src);\n       substed_i0 = 1;"}, {"sha": "17ddd50214a4be9543efe6a0ff61ece64da9ef6f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c18605ccec6c240b67ecf2b4ce2700e7877bf94e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c18605ccec6c240b67ecf2b4ce2700e7877bf94e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c18605ccec6c240b67ecf2b4ce2700e7877bf94e", "patch": "@@ -1,3 +1,7 @@\n+2010-09-06  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\t* gcc.dg/20100906-1.c: New testcase.\n+\n 2010-09-06  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR testsuite/45543"}, {"sha": "a6541e3ff8432979fe3cf9d254653b49c525ba2b", "filename": "gcc/testsuite/gcc.dg/20100906-1.c", "status": "added", "additions": 48, "deletions": 0, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c18605ccec6c240b67ecf2b4ce2700e7877bf94e/gcc%2Ftestsuite%2Fgcc.dg%2F20100906-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c18605ccec6c240b67ecf2b4ce2700e7877bf94e/gcc%2Ftestsuite%2Fgcc.dg%2F20100906-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20100906-1.c?ref=c18605ccec6c240b67ecf2b4ce2700e7877bf94e", "patch": "@@ -0,0 +1,48 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O2\" } */\n+\n+/* This testcase got misoptimized by combine due to a wrong setting of\n+   subst_low_luid in try_combine.  */\n+\n+enum rtx_code {\n+  A, B\n+};\n+\n+void abort (void);\n+\n+struct rtx_def {\n+  __extension__ enum rtx_code code:16;\n+};\n+typedef struct rtx_def *rtx;\n+\n+void __attribute__((noinline))\n+add_constraint (unsigned char is_a)\n+{\n+  if (is_a)\n+    abort ();\n+}\n+\n+void __attribute__((noinline))\n+foo (rtx defn)\n+{\n+  switch (defn->code)\n+    {\n+    case A:\n+    case B:\n+      add_constraint (defn->code == A);\n+      break;\n+    default:\n+      break;\n+    }\n+}\n+\n+int\n+main ()\n+{\n+  struct rtx_def r;\n+\n+  r.code = B;\n+\n+  foo (&r);\n+  return 0;\n+}"}]}