{"sha": "e32ca426242f0e3c650f3122342792ad42255511", "node_id": "C_kwDOANBUbNoAKGUzMmNhNDI2MjQyZjBlM2M2NTBmMzEyMjM0Mjc5MmFkNDIyNTU1MTE", "commit": {"author": {"name": "Maciej W. Rozycki", "email": "macro@embecosm.com", "date": "2022-07-28T13:04:33Z"}, "committer": {"name": "Maciej W. Rozycki", "email": "macro@embecosm.com", "date": "2022-07-28T13:04:33Z"}, "message": "doc: Clarify FENV_ACCESS pragma semantics WRT `-ftrapping-math'\n\nOur documentation indicates that it is the `-frounding-math' invocation\noption that controls whether we respect what the FENV_ACCESS pragma\nwould imply, should we implement it, regarding the floating point\nenvironment.  It is only a part of the picture however, because the\n`-ftrapping-math' invocation option also affects how we handle said\nenvironment.  Clarify that in the description of both options then, as\nwell as the FENV_ACCESS pragma itself.\n\n\tgcc/\n\t* doc/implement-c.texi (Floating point implementation): Mention\n\t`-fno-trapping-math' in the context of FENV_ACCESS pragma.\n\t* doc/invoke.texi (Optimize Options): Clarify FENV_ACCESS pragma\n\timplication in the descriptions of `-fno-trapping-math' and\n\t`-frounding-math'.", "tree": {"sha": "81c58b388bce8e9c27954e303633597601b46974", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81c58b388bce8e9c27954e303633597601b46974"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e32ca426242f0e3c650f3122342792ad42255511", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e32ca426242f0e3c650f3122342792ad42255511", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e32ca426242f0e3c650f3122342792ad42255511", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e32ca426242f0e3c650f3122342792ad42255511/comments", "author": {"login": "maciej-w-rozycki", "id": 117297942, "node_id": "U_kgDOBv3TFg", "avatar_url": "https://avatars.githubusercontent.com/u/117297942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maciej-w-rozycki", "html_url": "https://github.com/maciej-w-rozycki", "followers_url": "https://api.github.com/users/maciej-w-rozycki/followers", "following_url": "https://api.github.com/users/maciej-w-rozycki/following{/other_user}", "gists_url": "https://api.github.com/users/maciej-w-rozycki/gists{/gist_id}", "starred_url": "https://api.github.com/users/maciej-w-rozycki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maciej-w-rozycki/subscriptions", "organizations_url": "https://api.github.com/users/maciej-w-rozycki/orgs", "repos_url": "https://api.github.com/users/maciej-w-rozycki/repos", "events_url": "https://api.github.com/users/maciej-w-rozycki/events{/privacy}", "received_events_url": "https://api.github.com/users/maciej-w-rozycki/received_events", "type": "User", "site_admin": false}, "committer": {"login": "maciej-w-rozycki", "id": 117297942, "node_id": "U_kgDOBv3TFg", "avatar_url": "https://avatars.githubusercontent.com/u/117297942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maciej-w-rozycki", "html_url": "https://github.com/maciej-w-rozycki", "followers_url": "https://api.github.com/users/maciej-w-rozycki/followers", "following_url": "https://api.github.com/users/maciej-w-rozycki/following{/other_user}", "gists_url": "https://api.github.com/users/maciej-w-rozycki/gists{/gist_id}", "starred_url": "https://api.github.com/users/maciej-w-rozycki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maciej-w-rozycki/subscriptions", "organizations_url": "https://api.github.com/users/maciej-w-rozycki/orgs", "repos_url": "https://api.github.com/users/maciej-w-rozycki/repos", "events_url": "https://api.github.com/users/maciej-w-rozycki/events{/privacy}", "received_events_url": "https://api.github.com/users/maciej-w-rozycki/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "94f5a8f0d4910be2d861f7a9699e93efd609d042", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94f5a8f0d4910be2d861f7a9699e93efd609d042", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94f5a8f0d4910be2d861f7a9699e93efd609d042"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "c2088ffa777dc67d015ccda27896eb1695fcf2a2", "filename": "gcc/doc/implement-c.texi", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e32ca426242f0e3c650f3122342792ad42255511/gcc%2Fdoc%2Fimplement-c.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e32ca426242f0e3c650f3122342792ad42255511/gcc%2Fdoc%2Fimplement-c.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fimplement-c.texi?ref=e32ca426242f0e3c650f3122342792ad42255511", "patch": "@@ -339,7 +339,8 @@ This is subject to change.\n 7.6.1).}\n \n This pragma is not implemented, but the default is to ``off'' unless\n-@option{-frounding-math} is used in which case it is ``on''.\n+@option{-frounding-math} is used and @option{-fno-trapping-math} is not\n+in which case it is ``on''.\n \n @item\n @cite{Additional floating-point exceptions, rounding modes, environments,"}, {"sha": "fd7edd1938d2a4b1fb8a4a5737a4097acdcd6a36", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e32ca426242f0e3c650f3122342792ad42255511/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e32ca426242f0e3c650f3122342792ad42255511/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=e32ca426242f0e3c650f3122342792ad42255511", "patch": "@@ -13674,6 +13674,11 @@ math functions.\n \n The default is @option{-ftrapping-math}.\n \n+Future versions of GCC may provide finer control of this setting\n+using C99's @code{FENV_ACCESS} pragma.  This command-line option\n+will be used along with @option{-frounding-math} to specify the\n+default state for @code{FENV_ACCESS}.\n+\n @item -frounding-math\n @opindex frounding-math\n Disable transformations and optimizations that assume default floating-point\n@@ -13692,7 +13697,8 @@ This option is experimental and does not currently guarantee to\n disable all GCC optimizations that are affected by rounding mode.\n Future versions of GCC may provide finer control of this setting\n using C99's @code{FENV_ACCESS} pragma.  This command-line option\n-will be used to specify the default state for @code{FENV_ACCESS}.\n+will be used along with @option{-ftrapping-math} to specify the\n+default state for @code{FENV_ACCESS}.\n \n @item -fsignaling-nans\n @opindex fsignaling-nans"}]}