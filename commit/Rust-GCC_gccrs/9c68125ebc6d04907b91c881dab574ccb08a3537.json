{"sha": "9c68125ebc6d04907b91c881dab574ccb08a3537", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWM2ODEyNWViYzZkMDQ5MDdiOTFjODgxZGFiNTc0Y2NiMDhhMzUzNw==", "commit": {"author": {"name": "Bill Schmidt", "email": "wschmidt@linux.vnet.ibm.com", "date": "2012-05-18T16:01:17Z"}, "committer": {"name": "William Schmidt", "email": "wschmidt@gcc.gnu.org", "date": "2012-05-18T16:01:17Z"}, "message": "rs6000.c (print_operand): Revise code that unsafely relied on signed overflow behavior.\n\n2012-05-18  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n\n\t* config/rs6000/rs6000.c (print_operand): Revise code that unsafely\n\trelied on signed overflow behavior.\n\nFrom-SVN: r187657", "tree": {"sha": "9edfe411af0a9de0059465a303cd35023ad4c302", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9edfe411af0a9de0059465a303cd35023ad4c302"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c68125ebc6d04907b91c881dab574ccb08a3537", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c68125ebc6d04907b91c881dab574ccb08a3537", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c68125ebc6d04907b91c881dab574ccb08a3537", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c68125ebc6d04907b91c881dab574ccb08a3537/comments", "author": {"login": "wschmidt-ibm", "id": 5520937, "node_id": "MDQ6VXNlcjU1MjA5Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/5520937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wschmidt-ibm", "html_url": "https://github.com/wschmidt-ibm", "followers_url": "https://api.github.com/users/wschmidt-ibm/followers", "following_url": "https://api.github.com/users/wschmidt-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/wschmidt-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/wschmidt-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wschmidt-ibm/subscriptions", "organizations_url": "https://api.github.com/users/wschmidt-ibm/orgs", "repos_url": "https://api.github.com/users/wschmidt-ibm/repos", "events_url": "https://api.github.com/users/wschmidt-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/wschmidt-ibm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a4293fa6610acbe4412370b586122fc40615eeb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4293fa6610acbe4412370b586122fc40615eeb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4293fa6610acbe4412370b586122fc40615eeb9"}], "stats": {"total": 33, "additions": 10, "deletions": 23}, "files": [{"sha": "95bf7f91e57311903a88f75d986c3936ca18971f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c68125ebc6d04907b91c881dab574ccb08a3537/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c68125ebc6d04907b91c881dab574ccb08a3537/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9c68125ebc6d04907b91c881dab574ccb08a3537", "patch": "@@ -1,3 +1,8 @@\n+2012-05-18  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+\n+\t* config/rs6000/rs6000.c (print_operand): Revise code that unsafely\n+\trelied on signed overflow behavior.\n+\n 2012-05-18  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/53346"}, {"sha": "0896af3bccf5a4ac25d28e6d2cb562805b417cfd", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 5, "deletions": 23, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c68125ebc6d04907b91c881dab574ccb08a3537/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c68125ebc6d04907b91c881dab574ccb08a3537/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=9c68125ebc6d04907b91c881dab574ccb08a3537", "patch": "@@ -14679,7 +14679,6 @@ void\n print_operand (FILE *file, rtx x, int code)\n {\n   int i;\n-  HOST_WIDE_INT val;\n   unsigned HOST_WIDE_INT uval;\n \n   switch (code)\n@@ -15120,34 +15119,17 @@ print_operand (FILE *file, rtx x, int code)\n \n     case 'W':\n       /* MB value for a PowerPC64 rldic operand.  */\n-      val = (GET_CODE (x) == CONST_INT\n-\t     ? INTVAL (x) : CONST_DOUBLE_HIGH (x));\n-\n-      if (val < 0)\n-\ti = -1;\n-      else\n-\tfor (i = 0; i < HOST_BITS_PER_WIDE_INT; i++)\n-\t  if ((val <<= 1) < 0)\n-\t    break;\n+      i = clz_hwi (GET_CODE (x) == CONST_INT\n+\t\t   ? INTVAL (x) : CONST_DOUBLE_HIGH (x));\n \n #if HOST_BITS_PER_WIDE_INT == 32\n-      if (GET_CODE (x) == CONST_INT && i >= 0)\n+      if (GET_CODE (x) == CONST_INT && i > 0)\n \ti += 32;  /* zero-extend high-part was all 0's */\n       else if (GET_CODE (x) == CONST_DOUBLE && i == 32)\n-\t{\n-\t  val = CONST_DOUBLE_LOW (x);\n-\n-\t  gcc_assert (val);\n-\t  if (val < 0)\n-\t    --i;\n-\t  else\n-\t    for ( ; i < 64; i++)\n-\t      if ((val <<= 1) < 0)\n-\t\tbreak;\n-\t}\n+\ti = clz_hwi (CONST_DOUBLE_LOW (x)) + 32;\n #endif\n \n-      fprintf (file, \"%d\", i + 1);\n+      fprintf (file, \"%d\", i);\n       return;\n \n     case 'x':"}]}