{"sha": "932e32375ae90a7ca6d146efccf7e87b820f032a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTMyZTMyMzc1YWU5MGE3Y2E2ZDE0NmVmY2NmN2U4N2I4MjBmMDMyYQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-02-02T18:41:27Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-02-02T18:41:27Z"}, "message": "libgo: Apply upstream libtool patch.\n\nhttp://gcc.gnu.org/ml/gcc-patches/2011-02/msg00008.html\n\nFrom-SVN: r169766", "tree": {"sha": "34f29a9a6a38f10f149e23a9247a2414a301b290", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/34f29a9a6a38f10f149e23a9247a2414a301b290"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/932e32375ae90a7ca6d146efccf7e87b820f032a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/932e32375ae90a7ca6d146efccf7e87b820f032a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/932e32375ae90a7ca6d146efccf7e87b820f032a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/932e32375ae90a7ca6d146efccf7e87b820f032a/comments", "author": null, "committer": null, "parents": [{"sha": "9ed8059cb111ab4148a00548819051cc37832294", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ed8059cb111ab4148a00548819051cc37832294", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ed8059cb111ab4148a00548819051cc37832294"}], "stats": {"total": 41, "additions": 34, "deletions": 7}, "files": [{"sha": "d7b689e3e1bc6ed21c152af4386dc812ae567209", "filename": "libgo/config/libtool.m4", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/932e32375ae90a7ca6d146efccf7e87b820f032a/libgo%2Fconfig%2Flibtool.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/932e32375ae90a7ca6d146efccf7e87b820f032a/libgo%2Fconfig%2Flibtool.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfig%2Flibtool.m4?ref=932e32375ae90a7ca6d146efccf7e87b820f032a", "patch": "@@ -1287,14 +1287,27 @@ s390*-*linux*|s390*-*tpf*|sparc*-*linux*)\n     CFLAGS=\"$SAVE_CFLAGS\"\n   fi\n   ;;\n-sparc*-*solaris*)\n+*-*solaris*)\n   # Find out which ABI we are using.\n   echo 'int i;' > conftest.$ac_ext\n   if AC_TRY_EVAL(ac_compile); then\n     case `/usr/bin/file conftest.o` in\n     *64-bit*)\n       case $lt_cv_prog_gnu_ld in\n-      yes*) LD=\"${LD-ld} -m elf64_sparc\" ;;\n+      yes*)\n+        case $host in\n+        i?86-*-solaris*)\n+          LD=\"${LD-ld} -m elf_x86_64\"\n+          ;;\n+        sparc*-*-solaris*)\n+          LD=\"${LD-ld} -m elf64_sparc\"\n+          ;;\n+        esac\n+        # GNU ld 2.21 introduced _sol2 emulations.  Use them if available.\n+        if ${LD-ld} -V | grep _sol2 >/dev/null 2>&1; then\n+          LD=\"${LD-ld}_sol2\"\n+        fi\n+        ;;\n       *)\n \tif ${LD-ld} -64 -r -o conftest2.o conftest.o >/dev/null 2>&1; then\n \t  LD=\"${LD-ld} -64\""}, {"sha": "3ab4627d7be2cad2c005b1c41d021b0bf28e779d", "filename": "libgo/configure", "status": "modified", "additions": 19, "deletions": 5, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/932e32375ae90a7ca6d146efccf7e87b820f032a/libgo%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/932e32375ae90a7ca6d146efccf7e87b820f032a/libgo%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure?ref=932e32375ae90a7ca6d146efccf7e87b820f032a", "patch": "@@ -6391,7 +6391,7 @@ $as_echo \"$lt_cv_cc_needs_belf\" >&6; }\n     CFLAGS=\"$SAVE_CFLAGS\"\n   fi\n   ;;\n-sparc*-*solaris*)\n+*-*solaris*)\n   # Find out which ABI we are using.\n   echo 'int i;' > conftest.$ac_ext\n   if { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_compile\\\"\"; } >&5\n@@ -6402,7 +6402,20 @@ sparc*-*solaris*)\n     case `/usr/bin/file conftest.o` in\n     *64-bit*)\n       case $lt_cv_prog_gnu_ld in\n-      yes*) LD=\"${LD-ld} -m elf64_sparc\" ;;\n+      yes*)\n+        case $host in\n+        i?86-*-solaris*)\n+          LD=\"${LD-ld} -m elf_x86_64\"\n+          ;;\n+        sparc*-*-solaris*)\n+          LD=\"${LD-ld} -m elf64_sparc\"\n+          ;;\n+        esac\n+        # GNU ld 2.21 introduced _sol2 emulations.  Use them if available.\n+        if ${LD-ld} -V | grep _sol2 >/dev/null 2>&1; then\n+          LD=\"${LD-ld}_sol2\"\n+        fi\n+        ;;\n       *)\n \tif ${LD-ld} -64 -r -o conftest2.o conftest.o >/dev/null 2>&1; then\n \t  LD=\"${LD-ld} -64\"\n@@ -10890,7 +10903,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10893 \"configure\"\n+#line 10906 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -10996,7 +11009,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10999 \"configure\"\n+#line 11012 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -14123,7 +14136,8 @@ fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $libgo_cv_func___sync_bool_compare_and_swap_4\" >&5\n $as_echo \"$libgo_cv_func___sync_bool_compare_and_swap_4\" >&6; }\n if test \"$libgo_cv_func___sync_bool_compare_and_swap_4\" = \"yes\"; then\n-  $as_echo \"#define HAVE_SYNC_BOOL_COMPARE_AND_SWAP_4 1\" >>confdefs.h\n+\n+$as_echo \"#define HAVE_SYNC_BOOL_COMPARE_AND_SWAP_4 1\" >>confdefs.h\n \n fi\n "}]}