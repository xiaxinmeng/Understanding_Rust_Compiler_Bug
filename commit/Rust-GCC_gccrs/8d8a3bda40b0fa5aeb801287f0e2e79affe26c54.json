{"sha": "8d8a3bda40b0fa5aeb801287f0e2e79affe26c54", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQ4YTNiZGE0MGIwZmE1YWViODAxMjg3ZjBlMmU3OWFmZmUyNmM1NA==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2011-05-31T12:17:21Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2011-05-31T12:17:21Z"}, "message": "re PR debug/49047 (DW_AT_linkage_name missing for constructors and destructors)\n\nFix PR debug/49047\n\ngcc/\n\n\t* dwarf2out.c (gen_subprogram_die): Emit linkage name attribute\n\tfor concrete functions containing the code of cloned functions.\n\ngcc/testsuite/\n\n\t* g++.dg/debug/dwarf2/cdtor-1.C: New test.\n\nFrom-SVN: r174474", "tree": {"sha": "18b31c88a8a9f88d67ab7bf52a03714bab357854", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/18b31c88a8a9f88d67ab7bf52a03714bab357854"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54/comments", "author": null, "committer": null, "parents": [{"sha": "6e8c8b23001dd0f042e591e707a4a1cd3ddb5914", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e8c8b23001dd0f042e591e707a4a1cd3ddb5914", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e8c8b23001dd0f042e591e707a4a1cd3ddb5914"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "e29a763cb0d087b5e636861e27e10eda8e96ccd6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8d8a3bda40b0fa5aeb801287f0e2e79affe26c54", "patch": "@@ -1,3 +1,9 @@\n+2011-05-31  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR debug/49047\n+\t* dwarf2out.c (gen_subprogram_die): Emit linkage name attribute\n+    \tfor concrete functions containing the code of cloned functions.\n+\n 2011-05-31  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-ssa-forwprop.c (forward_propagate_into_comparison): Rename"}, {"sha": "9a415e9a171c564921d695d5e1237f640e0e39b9", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=8d8a3bda40b0fa5aeb801287f0e2e79affe26c54", "patch": "@@ -19636,6 +19636,12 @@ gen_subprogram_die (tree decl, dw_die_ref context_die)\n \n       subr_die = new_die (DW_TAG_subprogram, context_die, decl);\n       add_abstract_origin_attribute (subr_die, origin);\n+      /*  This is where the actual code for a cloned function is.\n+\t  Let's emit linkage name attribute for it.  This helps\n+\t  debuggers to e.g, set breakpoints into\n+\t  constructors/destructors when the user asks \"break\n+\t  K::K\".  */\n+      add_linkage_name (subr_die, decl);\n     }\n   else if (old_die)\n     {"}, {"sha": "dfa323b06abaaba6a0d20cc2671227b8a28752e4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8d8a3bda40b0fa5aeb801287f0e2e79affe26c54", "patch": "@@ -1,3 +1,8 @@\n+2011-05-31  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR debug/49047\n+\t* g++.dg/debug/dwarf2/cdtor-1.C: New test.\n+\n 2011-05-31  Ira Rosen  <ira.rosen@linaro.org>\n \n \tPR testsuite/49239"}, {"sha": "6d39e54ae08aa6b5a15c63dfa6ec60a675397fa1", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/cdtor-1.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fcdtor-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fcdtor-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fcdtor-1.C?ref=8d8a3bda40b0fa5aeb801287f0e2e79affe26c54", "patch": "@@ -0,0 +1,17 @@\n+// origin PR debug/49047\n+// { dg-options \"-g -dA\" }\n+// { dg-do compile }\n+\n+struct K\n+{\n+  K () { }\n+  ~K () { }\n+};\n+\n+int\n+main()\n+{\n+    K k;\n+}\n+\n+// { dg-final {scan-assembler-times \"\\[^\\n\\r\\]*DW_AT_MIPS_linkage_name:\" 2 } }"}]}