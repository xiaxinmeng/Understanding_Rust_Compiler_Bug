{"sha": "2443af37208590b754984ffd04b8ac19db5eff9f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQ0M2FmMzcyMDg1OTBiNzU0OTg0ZmZkMDRiOGFjMTlkYjVlZmY5Zg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2003-04-14T21:33:05Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2003-04-14T21:33:05Z"}, "message": "integrate.c (expand_inline_function): Don't inline if would lose /u on a BLKmode TARGET.\n\n\t* integrate.c (expand_inline_function): Don't inline if would\n\tlose /u on a BLKmode TARGET.\n\nFrom-SVN: r65594", "tree": {"sha": "7491f2ef529da6bd1407e2f4ee48e798a42db879", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7491f2ef529da6bd1407e2f4ee48e798a42db879"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2443af37208590b754984ffd04b8ac19db5eff9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2443af37208590b754984ffd04b8ac19db5eff9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2443af37208590b754984ffd04b8ac19db5eff9f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2443af37208590b754984ffd04b8ac19db5eff9f/comments", "author": null, "committer": null, "parents": [{"sha": "8cb5fbbf742615e6ca90e417ff8ad27dc481c6b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cb5fbbf742615e6ca90e417ff8ad27dc481c6b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8cb5fbbf742615e6ca90e417ff8ad27dc481c6b5"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "8b0dafc18f9741992d6dd114fa36a01793b2b60c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2443af37208590b754984ffd04b8ac19db5eff9f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2443af37208590b754984ffd04b8ac19db5eff9f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2443af37208590b754984ffd04b8ac19db5eff9f", "patch": "@@ -1,3 +1,8 @@\n+2003-04-14  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* integrate.c (expand_inline_function): Don't inline if would\n+\tlose /u on a BLKmode TARGET.\n+\n 2003-04-14  Joel Brobecker  <brobecker@gnat.com>\n \n         * dwarf2out.c (gen_compile_unit_die): Emit DW_LANG_Ada95 instead"}, {"sha": "7a1865881c66cb46220fbf8895252af09f001710", "filename": "gcc/integrate.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2443af37208590b754984ffd04b8ac19db5eff9f/gcc%2Fintegrate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2443af37208590b754984ffd04b8ac19db5eff9f/gcc%2Fintegrate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fintegrate.c?ref=2443af37208590b754984ffd04b8ac19db5eff9f", "patch": "@@ -736,6 +736,14 @@ expand_inline_function (fndecl, parms, target, ignore, type,\n \treturn (rtx) (size_t) -1;\n     }\n \n+  /* If there is a TARGET which is a readonly BLKmode MEM and DECL_RESULT\n+     is also a mem, we are going to lose the readonly on the stores, so don't\n+     inline.  */\n+  if (target != 0 && GET_CODE (target) == MEM && GET_MODE (target) == BLKmode\n+      && RTX_UNCHANGING_P (target) && DECL_RTL_SET_P (DECL_RESULT (fndecl))\n+      && GET_CODE (DECL_RTL (DECL_RESULT (fndecl))) == MEM)\n+    return (rtx) (size_t) -1;\n+\n   /* Extra arguments are valid, but will be ignored below, so we must\n      evaluate them here for side-effects.  */\n   for (; actual; actual = TREE_CHAIN (actual))"}]}