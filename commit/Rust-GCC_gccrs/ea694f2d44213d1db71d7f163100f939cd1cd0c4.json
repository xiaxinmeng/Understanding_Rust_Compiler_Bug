{"sha": "ea694f2d44213d1db71d7f163100f939cd1cd0c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWE2OTRmMmQ0NDIxM2QxZGI3MWQ3ZjE2MzEwMGY5MzljZDFjZDBjNA==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1994-04-06T00:04:56Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1994-04-06T00:04:56Z"}, "message": "(process_command): Add \"include\" prefix for [blah/]stageN.\n\nFrom-SVN: r6968", "tree": {"sha": "4b36fc352f547548d4ca7e92de61c08c912cc203", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4b36fc352f547548d4ca7e92de61c08c912cc203"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ea694f2d44213d1db71d7f163100f939cd1cd0c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea694f2d44213d1db71d7f163100f939cd1cd0c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea694f2d44213d1db71d7f163100f939cd1cd0c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea694f2d44213d1db71d7f163100f939cd1cd0c4/comments", "author": null, "committer": null, "parents": [{"sha": "5625b0521defe673b22cd65c99f1134a6d2944e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5625b0521defe673b22cd65c99f1134a6d2944e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5625b0521defe673b22cd65c99f1134a6d2944e0"}], "stats": {"total": 14, "additions": 9, "deletions": 5}, "files": [{"sha": "0871edb53d28cc72cbb11ad5ab2bbf9385af980d", "filename": "gcc/gcc.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea694f2d44213d1db71d7f163100f939cd1cd0c4/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea694f2d44213d1db71d7f163100f939cd1cd0c4/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=ea694f2d44213d1db71d7f163100f939cd1cd0c4", "patch": "@@ -2432,12 +2432,16 @@ process_command (argc, argv)\n \t\tadd_prefix (&include_prefix, concat (value, \"include\", \"\"),\n \t\t\t    1, 0, 0);\n \n-\t\t/* As a kludge, if the arg is \"stageN/\", just add\n+\t\t/* As a kludge, if the arg is \"[blah/]stageN/\", just add\n \t\t   \"include\" to the include prefix.  */\n-\t\tif (strlen (value) == 7 && value[6] == '/'\n-\t\t    && strncmp (value, \"stage\", 5) == 0\n-\t\t    && isdigit (value[5]))\n-\t\t  add_prefix (&include_prefix, \"include\", 1, 0, 0);\n+\t\t{\n+\t\t  int len = strlen (value);\n+\t\t  if ((len == 7 || (len > 7 && value[len-8] == '/'))\n+\t\t      && strncmp (value+len-7, \"stage\", 5) == 0\n+\t\t      && isdigit (value[len-2])\n+\t\t      && value[len-1] == '/')\n+\t\t    add_prefix (&include_prefix, \"include\", 1, 0, 0);\n+\t\t}\n \t      }\n \t      break;\n "}]}