{"sha": "1db815f4f38be2028ab386b2a5e5e43a88280d21", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWRiODE1ZjRmMzhiZTIwMjhhYjM4NmIyYTVlNWU0M2E4ODI4MGQyMQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-11-06T13:57:34Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-11-06T14:00:14Z"}, "message": "c++: Parser tweaks\n\nWe need to adjust the wording for 'export'.  Between c++11 and c++20\nit is deprecated.  Outside those ranges it is unsupported (at the\nmoment).  While here, there's also an unneeded setting of a bool --\nit's inside an if block that just checked it was true.\n\n\tgcc/cp/\n\t* parser.c (cp_parser_template_declaration): Adjust 'export' warning.\n\t(cp_parser_explicit_specialization): Remove unneeded bool setting.", "tree": {"sha": "fc22bfde2c046d689e58723dc799ef67271fb0d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc22bfde2c046d689e58723dc799ef67271fb0d7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1db815f4f38be2028ab386b2a5e5e43a88280d21", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1db815f4f38be2028ab386b2a5e5e43a88280d21", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1db815f4f38be2028ab386b2a5e5e43a88280d21", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1db815f4f38be2028ab386b2a5e5e43a88280d21/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "15bcd01a94c23f312ac03b5faea29f18ef8d2a07", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15bcd01a94c23f312ac03b5faea29f18ef8d2a07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15bcd01a94c23f312ac03b5faea29f18ef8d2a07"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "6e7b982f073d1ae55636c6ac4be140b81e367ed4", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1db815f4f38be2028ab386b2a5e5e43a88280d21/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1db815f4f38be2028ab386b2a5e5e43a88280d21/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=1db815f4f38be2028ab386b2a5e5e43a88280d21", "patch": "@@ -16031,8 +16031,13 @@ cp_parser_template_declaration (cp_parser* parser, bool member_p)\n     {\n       /* Consume the `export' token.  */\n       cp_lexer_consume_token (parser->lexer);\n-      /* Warn that we do not support `export'.  */\n-      warning (0, \"keyword %<export%> not implemented, and will be ignored\");\n+      /* Warn that this use of export is deprecated.  */\n+      if (cxx_dialect < cxx11)\n+\twarning (0, \"keyword %<export%> not implemented, and will be ignored\");\n+      else if (cxx_dialect < cxx20)\n+\twarning (0, \"keyword %<export%> is deprecated, and is ignored\");\n+      else\n+\twarning (0, \"keyword %<export%> not implemented, and will be ignored\");\n     }\n \n   cp_parser_template_declaration_after_export (parser, member_p);\n@@ -17753,7 +17758,6 @@ cp_parser_explicit_specialization (cp_parser* parser)\n       /* Give it C++ linkage to avoid confusing other parts of the\n \t front end.  */\n       push_lang_context (lang_name_cplusplus);\n-      need_lang_pop = true;\n     }\n \n   /* Let the front end know that we are beginning a specialization.  */"}]}