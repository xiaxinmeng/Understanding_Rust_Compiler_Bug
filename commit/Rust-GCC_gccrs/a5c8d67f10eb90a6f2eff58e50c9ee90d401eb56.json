{"sha": "a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVjOGQ2N2YxMGViOTBhNmYyZWZmNThlNTBjOWVlOTBkNDAxZWI1Ng==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2006-02-23T18:06:21Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2006-02-23T18:06:21Z"}, "message": "re PR middle-end/26412 (ICE with external arrays using OpenMP)\n\n\tPR middle-end/26412\n\t* gimplify.c (omp_add_variable): Guard variable size decl test with\n\tDECL_SIZE (decl) check.\n\n\t* gcc.dg/gomp/pr26412.c: New test.\n\nFrom-SVN: r111391", "tree": {"sha": "f66c7d26145b7181e2d7622fae3701243f16af8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f66c7d26145b7181e2d7622fae3701243f16af8d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "98b2060a0def628fcc061edb036feabc98d00362", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98b2060a0def628fcc061edb036feabc98d00362", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98b2060a0def628fcc061edb036feabc98d00362"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "1f81c5b2d301dd2a28f7fdfacb8383519080d7a7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56", "patch": "@@ -1,3 +1,9 @@\n+2006-02-23  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/26412\n+\t* gimplify.c (omp_add_variable): Guard variable size decl test with\n+\tDECL_SIZE (decl) check.\n+\n 2006-02-23  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/26439"}, {"sha": "10373c2d92f8cdbffe3c0bbd19cec587605d8ed9", "filename": "gcc/gimplify.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56", "patch": "@@ -4267,7 +4267,7 @@ omp_add_variable (struct gimplify_omp_ctx *ctx, tree decl, unsigned int flags)\n   /* When adding a variable-sized variable, we have to handle all sorts\n      of additional bits of data: the pointer replacement variable, and \n      the parameters of the type.  */\n-  if (!TREE_CONSTANT (DECL_SIZE (decl)))\n+  if (DECL_SIZE (decl) && !TREE_CONSTANT (DECL_SIZE (decl)))\n     {\n       /* Add the pointer replacement variable as PRIVATE if the variable\n \t replacement is private, else FIRSTPRIVATE since we'll need the"}, {"sha": "3d359f123142158fdeb6ed72a48ac2f50c86f084", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56", "patch": "@@ -1,3 +1,8 @@\n+2006-02-23  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/26412\n+\t* gcc.dg/gomp/pr26412.c: New test.\n+\n 2006-02-22  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \tPR c++/26291"}, {"sha": "6baecfe6895b9977bd0ca2f5965739041c5e9b9e", "filename": "gcc/testsuite/gcc.dg/gomp/pr26412.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fpr26412.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fpr26412.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fpr26412.c?ref=a5c8d67f10eb90a6f2eff58e50c9ee90d401eb56", "patch": "@@ -0,0 +1,18 @@\n+/* PR middle-end/26412 */\n+/* { dg-do compile } */\n+\n+extern double a[];\n+extern int b;\n+\n+double\n+test (void)\n+{\n+  int i;\n+  double c = 0;\n+\n+#pragma omp parallel for private(i) reduction(+:c)\n+  for (i = 0; i < 10000; i++)\n+    c += a[b];\n+\n+  return c;\n+}"}]}