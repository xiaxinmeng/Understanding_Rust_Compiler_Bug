{"sha": "9a6ac422ec269e12c88a852369bb3cc32c72c2b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWE2YWM0MjJlYzI2OWUxMmM4OGE4NTIzNjliYjNjYzMyYzcyYzJiOQ==", "commit": {"author": {"name": "Fritz Reese", "email": "fritzoreese@gmail.com", "date": "2016-10-27T14:14:44Z"}, "committer": {"name": "Fritz Reese", "email": "foreese@gcc.gnu.org", "date": "2016-10-27T14:14:44Z"}, "message": "Fix some DEC I/O testcases.\n\n\tgcc/testsuite/gfortran.dg/\n\t* dec_io_5.f90, dec_io_6.f90: Don't use \"test.txt\", and use\n\tdg-shouldfail/dg-output instead of XFAIL.\n\nFrom-SVN: r241623", "tree": {"sha": "c610b577db8e3b24d9caaa5f11571c6a54da22e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c610b577db8e3b24d9caaa5f11571c6a54da22e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9a6ac422ec269e12c88a852369bb3cc32c72c2b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a6ac422ec269e12c88a852369bb3cc32c72c2b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a6ac422ec269e12c88a852369bb3cc32c72c2b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a6ac422ec269e12c88a852369bb3cc32c72c2b9/comments", "author": {"login": "fritzr", "id": 2230564, "node_id": "MDQ6VXNlcjIyMzA1NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2230564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fritzr", "html_url": "https://github.com/fritzr", "followers_url": "https://api.github.com/users/fritzr/followers", "following_url": "https://api.github.com/users/fritzr/following{/other_user}", "gists_url": "https://api.github.com/users/fritzr/gists{/gist_id}", "starred_url": "https://api.github.com/users/fritzr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fritzr/subscriptions", "organizations_url": "https://api.github.com/users/fritzr/orgs", "repos_url": "https://api.github.com/users/fritzr/repos", "events_url": "https://api.github.com/users/fritzr/events{/privacy}", "received_events_url": "https://api.github.com/users/fritzr/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "953f0758237ac909dcdd84d91d4c4dbfe787e40a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/953f0758237ac909dcdd84d91d4c4dbfe787e40a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/953f0758237ac909dcdd84d91d4c4dbfe787e40a"}], "stats": {"total": 36, "additions": 29, "deletions": 7}, "files": [{"sha": "22a9ce83ac39f979826146b4b1e6935e1302daf0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a6ac422ec269e12c88a852369bb3cc32c72c2b9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a6ac422ec269e12c88a852369bb3cc32c72c2b9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9a6ac422ec269e12c88a852369bb3cc32c72c2b9", "patch": "@@ -1,3 +1,9 @@\n+2016-10-27  Fritz Reese <fritzoreese@gmail.com>\n+\n+\t* gfortran.dg/dec_io_5.f90: Don't use \"test.txt\", and use\n+\tdg-shouldfail/dg-output instead of XFAIL.\n+\t* gfortran.dg/dec_io_6.f90: Likewise.\n+\n 2016-10-27  Thomas Preud'homme  <thomas.preudhomme@arm.com>\n \n \t* gcc.target/arm/atomic-comp-swap-release-acquire-3.c: New test."}, {"sha": "c6633a508bf1c49c4ab5e03a31ee67c82d43bbf7", "filename": "gcc/testsuite/gfortran.dg/dec_io_5.f90", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a6ac422ec269e12c88a852369bb3cc32c72c2b9/gcc%2Ftestsuite%2Fgfortran.dg%2Fdec_io_5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a6ac422ec269e12c88a852369bb3cc32c72c2b9/gcc%2Ftestsuite%2Fgfortran.dg%2Fdec_io_5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdec_io_5.f90?ref=9a6ac422ec269e12c88a852369bb3cc32c72c2b9", "patch": "@@ -1,5 +1,6 @@\n-! { dg-do run \"xfail *-*-*\" }\n+! { dg-do run }\n ! { dg-options \"-fdec\" }\n+! { dg-shouldfail \"ACTION conflicts with READONLY\" }\n !\n ! Test that we get a run-time error for opening a READONLY file with\n ! ACTION='WRITE'.\n@@ -8,10 +9,11 @@\n implicit none\n \n integer :: fd = 8\n-character(*), parameter :: f = \"test.txt\"\n+character(*), parameter :: f = \"dec_io_5.txt\"\n character(10), volatile :: c\n c = 'write'\n \n-open(unit=fd,file=f,action=c,readonly) ! XFAIL \"ACTION conflicts with READONLY\"\n+open(unit=fd,file=f,action=c,readonly)\n \n end\n+! { dg-output \"ACTION conflicts with READONLY\" }"}, {"sha": "2dfaf9d890161a56090216106454c57b56c5ad29", "filename": "gcc/testsuite/gfortran.dg/dec_io_6.f90", "status": "modified", "additions": 18, "deletions": 4, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a6ac422ec269e12c88a852369bb3cc32c72c2b9/gcc%2Ftestsuite%2Fgfortran.dg%2Fdec_io_6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a6ac422ec269e12c88a852369bb3cc32c72c2b9/gcc%2Ftestsuite%2Fgfortran.dg%2Fdec_io_6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdec_io_6.f90?ref=9a6ac422ec269e12c88a852369bb3cc32c72c2b9", "patch": "@@ -1,15 +1,29 @@\n-! { dg-do run \"xfail *-*-*\" }\n+! { dg-do run }\n ! { dg-options \"-fdec\" }\n !\n-! Test that we get a run-time error for close-on-delete with READONLY.\n+! Test that we get a run-time warning for close-on-delete with READONLY,\n+! and that the file is protected from deletion.\n !\n \n implicit none\n \n integer :: fd = 8\n-character(*), parameter :: f = \"test.txt\"\n+character(*), parameter :: f = \"dec_io_6.txt\"\n+logical :: exists\n+\n+open(unit=fd,file=f,action='write')\n+close(unit=fd)\n \n open(unit=fd,file=f,action='read',readonly)\n-close(unit=fd,status='delete') ! XFAIL \"protected by READONLY\"\n+close(unit=fd,status='delete') ! { dg-output \"file protected by READONLY\" }\n+\n+inquire(file=f, EXIST=exists)\n+if (.not. exists) then\n+  print *, 'file was not protected by READONLY!'\n+  call abort()\n+endif\n+\n+open(unit=fd,file=f,action='write')\n+close(unit=fd,status='delete') ! cleanup\n \n end"}]}