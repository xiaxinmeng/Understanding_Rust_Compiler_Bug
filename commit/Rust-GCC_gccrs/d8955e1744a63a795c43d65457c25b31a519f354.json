{"sha": "d8955e1744a63a795c43d65457c25b31a519f354", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDg5NTVlMTc0NGE2M2E3OTVjNDNkNjU0NTdjMjViMzFhNTE5ZjM1NA==", "commit": {"author": {"name": "Craig Burley", "email": "craig@jcb-sc.com", "date": "1999-04-03T20:34:35Z"}, "committer": {"name": "Craig Burley", "email": "burley@gcc.gnu.org", "date": "1999-04-03T20:34:35Z"}, "message": "Make -fno-emulate-complex the default\n\nFrom-SVN: r26161", "tree": {"sha": "b524182a48e163e0374645e450332b3692ef41eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b524182a48e163e0374645e450332b3692ef41eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8955e1744a63a795c43d65457c25b31a519f354", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8955e1744a63a795c43d65457c25b31a519f354", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8955e1744a63a795c43d65457c25b31a519f354", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8955e1744a63a795c43d65457c25b31a519f354/comments", "author": null, "committer": null, "parents": [{"sha": "0ea78edbd7375b83ae45d275e89fc8a5e0b25ebb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ea78edbd7375b83ae45d275e89fc8a5e0b25ebb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ea78edbd7375b83ae45d275e89fc8a5e0b25ebb"}], "stats": {"total": 99, "additions": 41, "deletions": 58}, "files": [{"sha": "4d3b71cdd532cce337e9395dd34f362e4f60c592", "filename": "gcc/f/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2FChangeLog?ref=d8955e1744a63a795c43d65457c25b31a519f354", "patch": "@@ -1,3 +1,11 @@\n+Sat Apr  3 23:29:33 1999  Craig Burley  <craig@jcb-sc.com>\n+\n+\t* bugs.texi, g77.texi, lang-options.h, news.texi, top.c:\n+\tMake -fno-emulate-complex the default, as COMPLEX support\n+\tin the back end is now believed to be working.\n+\n+\t* version.c: Bump version.\n+\n Fri Apr  2 13:33:16 1999  Craig Burley  <craig@jcb-sc.com>\n \n \t* g77.texi: -malign-double now works."}, {"sha": "ccf3a7b5ebb094607a09958cb3b03f131870063d", "filename": "gcc/f/bugs.texi", "status": "modified", "additions": 1, "deletions": 18, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Fbugs.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Fbugs.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fbugs.texi?ref=d8955e1744a63a795c43d65457c25b31a519f354", "patch": "@@ -9,7 +9,7 @@\n @c in the standalone derivations of this file (e.g. BUGS).\n @set copyrights-bugs 1995-1999\n \n-@set last-update-bugs 1999-03-15\n+@set last-update-bugs 1999-04-03\n \n @include root.texi\n \n@@ -247,23 +247,6 @@ This problem is largely resolved as of version 0.5.23.\n Version 0.6 should solve most or all remaining problems\n (such as cross-compiling involving 64-bit machines).\n \n-@cindex COMPLEX support\n-@cindex support, COMPLEX\n-@item\n-Maintainers of @code{gcc} report that the back end definitely has ``broken''\n-support for @code{COMPLEX} types.\n-Based on their input, it seems many of\n-the problems affect only the more-general facilities for gcc's\n-@code{__complex__} type, such as @code{__complex__ int}\n-(where the real and imaginary parts are integers) that GNU\n-Fortran does not use.\n-\n-Version 0.5.20 of @code{g77} works around this\n-problem by not using the back end's support for @code{COMPLEX}.\n-The new option @samp{-fno-emulate-complex} avoids the work-around,\n-reverting to using the same ``broken'' mechanism as that used\n-by versions of @code{g77} prior to 0.5.20.\n-\n @cindex padding\n @cindex structures\n @cindex common blocks"}, {"sha": "a6b611ccd3d51de6e9b5132e7cd9a1064593d71f", "filename": "gcc/f/g77.texi", "status": "modified", "additions": 22, "deletions": 35, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Fg77.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Fg77.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fg77.texi?ref=d8955e1744a63a795c43d65457c25b31a519f354", "patch": "@@ -2,7 +2,7 @@\n @c %**start of header\n @setfilename g77.info\n \n-@set last-update 1999-04-02\n+@set last-update 1999-04-03\n @set copyrights-g77 1995-1999\n \n @include root.texi\n@@ -1466,7 +1466,7 @@ by type.  Explanations are in the following sections.\n -fpcc-struct-return  -freg-struct-return\n -fshort-double  -fno-common  -fpack-struct\n -fzeros  -fno-second-underscore\n--fdebug-kludge  -fno-emulate-complex\n+-fdebug-kludge  -femulate-complex\n -falias-check  -fargument-alias\n -fargument-noalias  -fno-argument-noalias-global\n -fno-globals\n@@ -3253,44 +3253,36 @@ Current plans call for this to happen when published versions of @code{g77}\n and @code{gdb} exist that provide proper access to debugging information on\n @code{COMMON} and @code{EQUIVALENCE} members.\n \n-@cindex -fno-emulate-complex option\n-@cindex options, -fno-emulate-complex\n-@item -fno-emulate-complex\n-Implement @code{COMPLEX} arithmetic using the facilities in\n+@cindex -femulate-complex option\n+@cindex options, -femulate-complex\n+@item -femulate-complex\n+Implement @code{COMPLEX} arithmetic via emulation,\n+instead of using the facilities of\n the @code{gcc} back end that provide direct support of\n-@code{complex} arithmetic, instead of emulating the arithmetic.\n+@code{complex} arithmetic.\n \n-@code{gcc} has some known problems in its back-end support\n+(@code{gcc} had some bugs in its back-end support\n for @code{complex} arithmetic, due primarily to the support not being\n-completed as of version 2.7.2.2.\n-Other front ends for the @code{gcc} back end avoid this problem\n-by emulating @code{complex} arithmetic at a higher level, so the\n-back end sees arithmetic on the real and imaginary components.\n-To make @code{g77} more portable to systems where @code{complex}\n-support in the @code{gcc} back end is particularly troublesome,\n-@code{g77} now defaults to performing the same kinds of emulations\n-done by these other front ends.\n-\n-Use @samp{-fno-emulate-complex} to try the @code{complex} support\n-in the @code{gcc} back end, in case it works and produces faster\n-programs.\n-So far, all the known bugs seem to involve compile-time crashes,\n-rather than the generation of incorrect code.\n+completed as of version 2.8.1 and @code{egcs} 1.1.2.)\n+\n+Use @samp{-femulate-complex} if you suspect code-generation bugs,\n+or experience compiler crashes,\n+that might result from @code{g77} using the @code{COMPLEX} support\n+in the @code{gcc} back end.\n+If using that option fixes the bugs or crashes you are seeing,\n+that indicates a likely @code{g77} bugs\n+(though, all compiler crashes are considered bugs),\n+so, please report it.\n+(Note that the known bugs, now believed fixed, produced compiler crashes\n+rather than causing the generation of incorrect code.)\n \n Use of this option should not affect how Fortran code compiled\n by @code{g77} works in terms of its interfaces to other code,\n e.g. that compiled by @code{f2c}.\n \n-@emph{Caution:} Future versions of @code{g77} are likely to change\n-the default for this option to\n-@samp{-fno-emulate-complex}, and perhaps someday ignore both forms\n+@emph{Caution:} Future versions of @code{g77} might ignore both forms\n of this option.\n \n-Also, it is possible that use of the @samp{-fno-emulate-complex} option\n-could result in incorrect code being silently produced by @code{g77}.\n-But, this is generally true of compilers anyway, so, as usual, test\n-the programs you compile before assuming they are working.\n-\n @cindex -falias-check option\n @cindex options, -falias-check\n @cindex -fargument-alias option\n@@ -8896,11 +8888,6 @@ mode afterward.\n (In @code{gdb}, this is accomplished via @samp{set lang c} and\n either @samp{set lang fortran} or @samp{set lang auto}.)\n \n-@emph{Note:} Compiling with the @samp{-fno-emulate-complex} option\n-avoids the debugging problem, but is known to cause other problems\n-like compiler crashes and generation of incorrect code, so it is\n-not recommended.\n-\n @node Arrays\n @section Arrays (DIMENSION)\n @cindex DIMENSION statement"}, {"sha": "3f439fdd6a8d05c74bae2a2e99427154ba2c42d8", "filename": "gcc/f/lang-options.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Flang-options.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Flang-options.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Flang-options.h?ref=d8955e1744a63a795c43d65457c25b31a519f354", "patch": "@@ -81,8 +81,8 @@ FTNOPT( \"-finit-local-zero\", \"Initialize local vars and arrays to zero\" )\n FTNOPT( \"-fno-init-local-zero\", \"\" )\n FTNOPT( \"-fbackslash\", \"\" )\n FTNOPT( \"-fno-backslash\", \"Backslashes in character/hollerith constants not special (C-style)\" )\n-FTNOPT( \"-femulate-complex\", \"\" )\n-FTNOPT( \"-fno-emulate-complex\", \"Have compiler back end cope with COMPLEX arithmetic\" )\n+FTNOPT( \"-femulate-complex\", \"Have front end emulate COMPLEX arithmetic to avoid bugs\" )\n+FTNOPT( \"-fno-emulate-complex\", \"\" )\n FTNOPT( \"-funderscoring\", \"\" )\n FTNOPT( \"-fno-underscoring\", \"Disable the appending of underscores to externals\" )\n FTNOPT( \"-fsecond-underscore\", \"\" )"}, {"sha": "8723157ce929b4dfc29d19aa5ba49a9a9ef58701", "filename": "gcc/f/news.texi", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Fnews.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Fnews.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fnews.texi?ref=d8955e1744a63a795c43d65457c25b31a519f354", "patch": "@@ -9,7 +9,7 @@\n @c in the standalone derivations of this file (e.g. NEWS).\n @set copyrights-news 1995-1999\n \n-@set last-update-news 1999-04-02\n+@set last-update-news 1999-04-03\n \n @include root.texi\n \n@@ -204,6 +204,11 @@ when the corresponding @emph{subsequent} function program unit\n disagrees with the reference concerning the type of the function.\n @end ifclear\n \n+@item\n+@code{-fno-emulate-complex} is now the default option.\n+This should result in improved performance\n+of code that uses the @code{COMPLEX} data type.\n+\n @cindex alignment\n @cindex double-precision performance\n @cindex -malign-double"}, {"sha": "692801841b3f40c82cc1526372b0e5232394bd59", "filename": "gcc/f/top.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Ftop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Ftop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Ftop.c?ref=d8955e1744a63a795c43d65457c25b31a519f354", "patch": "@@ -65,7 +65,7 @@ bool ffe_is_do_internal_checks_ = FALSE;\n bool ffe_is_90_ = FFETARGET_defaultIS_90;\n bool ffe_is_automatic_ = FFETARGET_defaultIS_AUTOMATIC;\n bool ffe_is_backslash_ = FFETARGET_defaultIS_BACKSLASH;\n-bool ffe_is_emulate_complex_ = TRUE;\n+bool ffe_is_emulate_complex_ = FALSE;\n bool ffe_is_underscoring_ = FFETARGET_defaultEXTERNAL_UNDERSCORED\n   || FFETARGET_defaultUNDERSCORED_EXTERNAL_UNDERSCORED;\n bool ffe_is_second_underscore_ = FFETARGET_defaultUNDERSCORED_EXTERNAL_UNDERSCORED;"}, {"sha": "5ec5a80800676fd683f1c1dca03c788ed1ca7d80", "filename": "gcc/f/version.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Fversion.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8955e1744a63a795c43d65457c25b31a519f354/gcc%2Ff%2Fversion.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fversion.c?ref=d8955e1744a63a795c43d65457c25b31a519f354", "patch": "@@ -1 +1 @@\n-const char *ffe_version_string = \"0.5.24-19990313\";\n+const char *ffe_version_string = \"0.5.24-19990403\";"}]}