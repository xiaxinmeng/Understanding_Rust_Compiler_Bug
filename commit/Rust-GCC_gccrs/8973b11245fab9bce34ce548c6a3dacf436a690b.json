{"sha": "8973b11245fab9bce34ce548c6a3dacf436a690b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODk3M2IxMTI0NWZhYjliY2UzNGNlNTQ4YzZhM2RhY2Y0MzZhNjkwYg==", "commit": {"author": {"name": "Sergey Grechanik", "email": "mouseentity@ispras.ru", "date": "2011-06-07T14:46:42Z"}, "committer": {"name": "Alexander Monakov", "email": "amonakov@gcc.gnu.org", "date": "2011-06-07T14:46:42Z"}, "message": "arm.c (coproc_secondary_reload_class): Return NO_REGS for constant vectors.\n\n2011-06-07  Sergey Grechanik  <mouseentity@ispras.ru>\n\n\t* config/arm/arm.c (coproc_secondary_reload_class): Return NO_REGS for\n\tconstant vectors.\n\ntestsuite:\n\t* gcc.target/arm/neon-reload-class.c: New test.\n\nFrom-SVN: r174749", "tree": {"sha": "b80943f4d645961065dea925422413537a13c69c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b80943f4d645961065dea925422413537a13c69c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8973b11245fab9bce34ce548c6a3dacf436a690b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8973b11245fab9bce34ce548c6a3dacf436a690b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8973b11245fab9bce34ce548c6a3dacf436a690b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8973b11245fab9bce34ce548c6a3dacf436a690b/comments", "author": null, "committer": null, "parents": [{"sha": "67b884536dbfd3253b372b1a13a070f2fa7c704f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67b884536dbfd3253b372b1a13a070f2fa7c704f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67b884536dbfd3253b372b1a13a070f2fa7c704f"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "1e19906d9d1ba0b6a8755e1e4b69f999caaa7352", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8973b11245fab9bce34ce548c6a3dacf436a690b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8973b11245fab9bce34ce548c6a3dacf436a690b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8973b11245fab9bce34ce548c6a3dacf436a690b", "patch": "@@ -1,3 +1,8 @@\n+2011-06-07  Sergey Grechanik  <mouseentity@ispras.ru>\n+\n+\t* config/arm/arm.c (coproc_secondary_reload_class): Return NO_REGS for\n+\tconstant vectors.\n+\n 2011-06-07  Richard Guenther  <rguenther@suse.de>\n \n \t* stor-layout.c (initialize_sizetypes): Initialize all"}, {"sha": "1037d9db8b75b3122a43efe40211296d1bf3a1da", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8973b11245fab9bce34ce548c6a3dacf436a690b/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8973b11245fab9bce34ce548c6a3dacf436a690b/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=8973b11245fab9bce34ce548c6a3dacf436a690b", "patch": "@@ -9079,7 +9079,7 @@ coproc_secondary_reload_class (enum machine_mode mode, rtx x, bool wb)\n   /* The neon move patterns handle all legitimate vector and struct\n      addresses.  */\n   if (TARGET_NEON\n-      && MEM_P (x)\n+      && (MEM_P (x) || GET_CODE (x) == CONST_VECTOR)\n       && (GET_MODE_CLASS (mode) == MODE_VECTOR_INT\n \t  || GET_MODE_CLASS (mode) == MODE_VECTOR_FLOAT\n \t  || VALID_NEON_STRUCT_MODE (mode)))"}, {"sha": "05849cc82dd2a9f92013f00918723c0bedad5229", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8973b11245fab9bce34ce548c6a3dacf436a690b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8973b11245fab9bce34ce548c6a3dacf436a690b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8973b11245fab9bce34ce548c6a3dacf436a690b", "patch": "@@ -1,3 +1,7 @@\n+2011-06-07  Sergey Grechanik  <mouseentity@ispras.ru>\n+\n+\t* gcc.target/arm/neon-reload-class.c: New test.\n+\n 2011-06-07  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR debug/49130"}, {"sha": "c63aa04960ccb1250589588851da5b5d19a357a6", "filename": "gcc/testsuite/gcc.target/arm/neon-reload-class.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8973b11245fab9bce34ce548c6a3dacf436a690b/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fneon-reload-class.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8973b11245fab9bce34ce548c6a3dacf436a690b/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fneon-reload-class.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fneon-reload-class.c?ref=8973b11245fab9bce34ce548c6a3dacf436a690b", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_neon_ok } */\n+/* { dg-options \"-O2 -ftree-vectorize\" }  */\n+/* { dg-add-options arm_neon } */\n+\n+\n+void\n+_op_blend_p_caa_dp(unsigned *s, unsigned* e, unsigned *d, unsigned c) {\n+  while (d < e) {\n+    *d = ( (((((*s) >> 8) & 0x00ff00ff) * (c)) & 0xff00ff00) + (((((*s) & 0x00ff00ff) * (c)) >> 8) & 0x00ff00ff) );\n+    d++;\n+    s++;\n+  }\n+}\n+\n+/* These constants should be emitted as immediates rather than loaded from memory.  */\n+\n+/* { dg-final { scan-assembler-not \"(\\\\.d?word|mov(w|t))\" } } */"}]}