{"sha": "6f69173e896f251b47075d29b7d146e6b51fc5ac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmY2OTE3M2U4OTZmMjUxYjQ3MDc1ZDI5YjdkMTQ2ZTZiNTFmYzVhYw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-01-26T20:11:46Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-01-26T20:11:46Z"}, "message": "re PR c++/13663 (gcc segfaults on invalid use of member)\n\n\tPR c++/13663\n\t* semantics.c (finish_for_expr): Check for unresolved overloaded\n\tfunctions.\n\n\tPR c++/13363\n\t* g++.dg/expr/for1.C: New test.\n\nFrom-SVN: r76659", "tree": {"sha": "4adc386d86d81cf768b91773ce0f5b5eb0841e32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4adc386d86d81cf768b91773ce0f5b5eb0841e32"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f69173e896f251b47075d29b7d146e6b51fc5ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f69173e896f251b47075d29b7d146e6b51fc5ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f69173e896f251b47075d29b7d146e6b51fc5ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f69173e896f251b47075d29b7d146e6b51fc5ac/comments", "author": null, "committer": null, "parents": [{"sha": "044feeeba05b6f0e599fbaa325429cb659987e59", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/044feeeba05b6f0e599fbaa325429cb659987e59", "html_url": "https://github.com/Rust-GCC/gccrs/commit/044feeeba05b6f0e599fbaa325429cb659987e59"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "a6248b68735f69a140a69afcc0d2de605d07128a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f69173e896f251b47075d29b7d146e6b51fc5ac/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f69173e896f251b47075d29b7d146e6b51fc5ac/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6f69173e896f251b47075d29b7d146e6b51fc5ac", "patch": "@@ -1,5 +1,9 @@\n 2004-01-26  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/13663\n+\t* semantics.c (finish_for_expr): Check for unresolved overloaded\n+\tfunctions.\n+\n \t* class.c (add_method): Just check processing_template_decl to\n \tdetermine whether or not we are within a template.\n \t* decl2.c (maybe_retrofit_in_chrg): Likewise."}, {"sha": "deb5b820ed4a317d06494a1a814f69a4e422daa3", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f69173e896f251b47075d29b7d146e6b51fc5ac/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f69173e896f251b47075d29b7d146e6b51fc5ac/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=6f69173e896f251b47075d29b7d146e6b51fc5ac", "patch": "@@ -678,6 +678,13 @@ finish_for_cond (tree cond, tree for_stmt)\n void\n finish_for_expr (tree expr, tree for_stmt)\n {\n+  /* If EXPR is an overloaded function, issue an error; there is no\n+     context available to use to perform overload resolution.  */\n+  if (expr && type_unknown_p (expr))\n+    {\n+      cxx_incomplete_type_error (expr, TREE_TYPE (expr));\n+      expr = error_mark_node;\n+    }\n   FOR_EXPR (for_stmt) = expr;\n }\n "}, {"sha": "3d25f199c21686def1555db4a868bd42decd8165", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f69173e896f251b47075d29b7d146e6b51fc5ac/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f69173e896f251b47075d29b7d146e6b51fc5ac/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6f69173e896f251b47075d29b7d146e6b51fc5ac", "patch": "@@ -1,3 +1,8 @@\n+2004-01-26  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/13363\n+\t* g++.dg/expr/for1.C: New test.\n+\n 2004-01-26  Fariborz Jahanian <fjahanian@apple.com>\n \n \tPR middle-end/13779"}, {"sha": "baffd424a41151e778f99bf9e88c80d9f15eeba8", "filename": "gcc/testsuite/g++.dg/expr/for1.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f69173e896f251b47075d29b7d146e6b51fc5ac/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Ffor1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f69173e896f251b47075d29b7d146e6b51fc5ac/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Ffor1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Ffor1.C?ref=6f69173e896f251b47075d29b7d146e6b51fc5ac", "patch": "@@ -0,0 +1,14 @@\n+// PR c++/13663\n+\n+struct S {\n+  void f();\n+};\n+\n+void g(int);\n+void g(double);\n+\n+void h () {\n+  S s;\n+  for (;;s.f); // { dg-error \"\" }\n+  for (;;g); // { dg-error \"\" }\n+}"}]}