{"sha": "67124cb62dd566664aa53183821957fa97b27e54", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjcxMjRjYjYyZGQ1NjY2NjRhYTUzMTgzODIxOTU3ZmE5N2IyN2U1NA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-11-08T14:57:47Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-11-08T14:57:47Z"}, "message": "re PR middle-end/87916 (ICE in dwarf2out_abstract_function, at dwarf2out.c:22479 since r264943)\n\n\tPR middle-end/87916\n\t* cgraphclones.c (duplicate_thunk_for_node): Also set DECL_IGNORED_P.\n\nFrom-SVN: r265916", "tree": {"sha": "9cd4ec578ca89d0ce79be9d3528d1b03b49e0144", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9cd4ec578ca89d0ce79be9d3528d1b03b49e0144"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67124cb62dd566664aa53183821957fa97b27e54", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67124cb62dd566664aa53183821957fa97b27e54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67124cb62dd566664aa53183821957fa97b27e54", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67124cb62dd566664aa53183821957fa97b27e54/comments", "author": null, "committer": null, "parents": [{"sha": "212755ff9137bcd3975e02f4936c96bdb7eaf709", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/212755ff9137bcd3975e02f4936c96bdb7eaf709", "html_url": "https://github.com/Rust-GCC/gccrs/commit/212755ff9137bcd3975e02f4936c96bdb7eaf709"}], "stats": {"total": 58, "additions": 58, "deletions": 0}, "files": [{"sha": "c83df0bbb8b3e5d28d55d364ae80c5344a130d92", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67124cb62dd566664aa53183821957fa97b27e54/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67124cb62dd566664aa53183821957fa97b27e54/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=67124cb62dd566664aa53183821957fa97b27e54", "patch": "@@ -1,3 +1,8 @@\n+2018-11-08  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR middle-end/87916\n+\t* cgraphclones.c (duplicate_thunk_for_node): Also set DECL_IGNORED_P.\n+\n 2018-11-08  David Malcolm  <dmalcolm@redhat.com>\n \n \t* cgraph.c: Include \"selftest.h\"."}, {"sha": "0fbc7a919bde3be70010e35fc2fee13ebcd8456a", "filename": "gcc/cgraphclones.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67124cb62dd566664aa53183821957fa97b27e54/gcc%2Fcgraphclones.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67124cb62dd566664aa53183821957fa97b27e54/gcc%2Fcgraphclones.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphclones.c?ref=67124cb62dd566664aa53183821957fa97b27e54", "patch": "@@ -321,6 +321,10 @@ duplicate_thunk_for_node (cgraph_node *thunk, cgraph_node *node)\n \t\t\t\t\t\t       \"artificial_thunk\");\n   SET_DECL_ASSEMBLER_NAME (new_decl, DECL_NAME (new_decl));\n \n+  /* We need to force DECL_IGNORED_P because the new thunk is created after\n+     early debug was run.  */\n+  DECL_IGNORED_P (new_decl) = 1;\n+\n   new_thunk = cgraph_node::create (new_decl);\n   set_new_clone_decl_and_node_flags (new_thunk);\n   new_thunk->definition = true;"}, {"sha": "63019e187f51931d1a1b92c27c49ba06b178e42e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67124cb62dd566664aa53183821957fa97b27e54/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67124cb62dd566664aa53183821957fa97b27e54/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=67124cb62dd566664aa53183821957fa97b27e54", "patch": "@@ -1,3 +1,7 @@\n+2018-11-08  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* g++.dg/other/pr87916.C: New test.\n+\n 2018-11-08  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/87929"}, {"sha": "5c69478243013083c862a3d15593cc8d0880b13e", "filename": "gcc/testsuite/g++.dg/other/pr87916.C", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67124cb62dd566664aa53183821957fa97b27e54/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr87916.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67124cb62dd566664aa53183821957fa97b27e54/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr87916.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr87916.C?ref=67124cb62dd566664aa53183821957fa97b27e54", "patch": "@@ -0,0 +1,45 @@\n+// PR middle-end/87916\n+// Testcase by Martin Li\u0161ka <marxin@gcc.gnu.org>\n+\n+// { dg-do compile }\n+// { dg-options \"-O2 -g\" }\n+// { dg-additional-options \"-fPIC\" { target fpic } }\n+\n+struct a {\n+  virtual ~a();\n+};\n+template <typename b> class c {\n+public:\n+  class d {\n+  public:\n+    d(c);\n+    b *operator->();\n+  };\n+};\n+int e, f;\n+class g {\n+public:\n+  class h {\n+  public:\n+    virtual void j(g &, int &, bool) = 0;\n+  };\n+  c<h> k();\n+  int *l();\n+  int *m();\n+};\n+int *g::l() try {\n+  for (c<h>::d i(k());;)\n+    i->j(*this, e, true);\n+} catch (int) {\n+  return 0;\n+}\n+int *g::m() try {\n+  for (c<h>::d i(k());;)\n+    i->j(*this, f, false);\n+} catch (int) {\n+  return 0;\n+}\n+struct n : a, g::h {\n+  void o();\n+  void j(g &, int &, bool) { o(); }\n+};"}]}