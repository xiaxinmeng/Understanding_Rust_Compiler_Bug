{"sha": "106b54666459294e68b176e2f2e811e488158880", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTA2YjU0NjY2NDU5Mjk0ZTY4YjE3NmUyZjJlODExZTQ4ODE1ODg4MA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2015-02-09T20:45:04Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2015-02-09T20:45:04Z"}, "message": "re PR ipa/63566 (i686 bootstrap fails: ICE RTL flag check: INSN_UID used with unexpected rtx code 'set' in INSN_UID, at rtl.h:1326)\n\n\tPR ipa/63566 \n\t* ipa-icf.c (set_local): New function.\n\t(sem_function::merge): Use it.\n\nFrom-SVN: r220548", "tree": {"sha": "e5856920069ec77b403a8c8ae6d07a6d9dce0b86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5856920069ec77b403a8c8ae6d07a6d9dce0b86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/106b54666459294e68b176e2f2e811e488158880", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/106b54666459294e68b176e2f2e811e488158880", "html_url": "https://github.com/Rust-GCC/gccrs/commit/106b54666459294e68b176e2f2e811e488158880", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/106b54666459294e68b176e2f2e811e488158880/comments", "author": null, "committer": null, "parents": [{"sha": "b8ec1bd3298611c791737123a476a13c1eb9e219", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8ec1bd3298611c791737123a476a13c1eb9e219", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8ec1bd3298611c791737123a476a13c1eb9e219"}], "stats": {"total": 22, "additions": 18, "deletions": 4}, "files": [{"sha": "5f7c6214a3e928598aead998f36c3eb4ed99e364", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/106b54666459294e68b176e2f2e811e488158880/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/106b54666459294e68b176e2f2e811e488158880/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=106b54666459294e68b176e2f2e811e488158880", "patch": "@@ -1,3 +1,9 @@\n+2015-02-08  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/63566 \n+\t* ipa-icf.c (set_local): New function.\n+\t(sem_function::merge): Use it.\n+\n 2015-02-08  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* ipa-devirt.c (odr_types_equivalent_p): Fix formating."}, {"sha": "692946ae7b1741b7c72ff647120451946ce56b21", "filename": "gcc/ipa-icf.c", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/106b54666459294e68b176e2f2e811e488158880/gcc%2Fipa-icf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/106b54666459294e68b176e2f2e811e488158880/gcc%2Fipa-icf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-icf.c?ref=106b54666459294e68b176e2f2e811e488158880", "patch": "@@ -584,6 +584,16 @@ sem_function::equals_private (sem_item *item,\n   return result;\n }\n \n+/* Set LOCAL_P of NODE to true if DATA is non-NULL.\n+   Helper for call_for_symbol_thunks_and_aliases.  */\n+\n+static bool\n+set_local (cgraph_node *node, void *data)\n+{\n+  node->local.local = data != NULL;\n+  return false;\n+}\n+\n /* Merges instance with an ALIAS_ITEM, where alias, thunk or redirection can\n    be applied.  */\n bool\n@@ -743,10 +753,8 @@ sem_function::merge (sem_item *alias_item)\n       cgraph_node::create_alias (alias_func->decl, decl);\n       alias->resolve_alias (original);\n \n-      /* Workaround for PR63566 that forces equal calling convention\n-       to be used.  */\n-      alias->local.local = false;\n-      original->local.local = false;\n+      original->call_for_symbol_thunks_and_aliases\n+\t (set_local, (void *)(size_t) original->local_p (), true);\n \n       if (dump_file)\n \tfprintf (dump_file, \"Callgraph alias has been created.\\n\\n\");"}]}