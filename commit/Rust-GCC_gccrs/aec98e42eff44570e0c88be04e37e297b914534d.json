{"sha": "aec98e42eff44570e0c88be04e37e297b914534d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWVjOThlNDJlZmY0NDU3MGUwYzg4YmUwNGUzN2UyOTdiOTE0NTM0ZA==", "commit": {"author": {"name": "Marc Lehmann", "email": "pcg@goof.com", "date": "1998-02-05T20:49:54Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-02-05T20:49:54Z"}, "message": "integrate.c (INTEGRATE_THRESHOLD): Inline only small functions when -Os is specified.\n\n        * integrate.c (INTEGRATE_THRESHOLD): Inline only small functions\n        when -Os is specified.\n        * toplev.c (main): Don't disable flag_inline_functions anymore when\n        -Os is in effect.\n\nFrom-SVN: r17671", "tree": {"sha": "ffb329918bec313fd2e4055bc4b596f65ffa05e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ffb329918bec313fd2e4055bc4b596f65ffa05e5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aec98e42eff44570e0c88be04e37e297b914534d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aec98e42eff44570e0c88be04e37e297b914534d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aec98e42eff44570e0c88be04e37e297b914534d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aec98e42eff44570e0c88be04e37e297b914534d/comments", "author": null, "committer": null, "parents": [{"sha": "eabb2ebae83d72ceb279b530a631eade3579c836", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eabb2ebae83d72ceb279b530a631eade3579c836", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eabb2ebae83d72ceb279b530a631eade3579c836"}], "stats": {"total": 19, "additions": 12, "deletions": 7}, "files": [{"sha": "b349a6c67ef10f3acaefe1f54f468c0a439bf409", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aec98e42eff44570e0c88be04e37e297b914534d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aec98e42eff44570e0c88be04e37e297b914534d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aec98e42eff44570e0c88be04e37e297b914534d", "patch": "@@ -1,3 +1,10 @@\n+1998-02-05  Marc Lehmann  <pcg@goof.com>\n+\n+\t* integrate.c (INTEGRATE_THRESHOLD): Inline only small functions\n+\twhen -Os is specified.\n+\t* toplev.c (main): Don't disable flag_inline_functions anymore when\n+\t-Os is in effect.\n+\n Fri Feb  6 00:27:36 1998  J\"orn Rennecke <amylaar@cygnus.co.uk>\n \n         * regmove.c: Update."}, {"sha": "ec1f8b81a3a00d4ec0889fa4389adad5321d2536", "filename": "gcc/integrate.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aec98e42eff44570e0c88be04e37e297b914534d/gcc%2Fintegrate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aec98e42eff44570e0c88be04e37e297b914534d/gcc%2Fintegrate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fintegrate.c?ref=aec98e42eff44570e0c88be04e37e297b914534d", "patch": "@@ -52,8 +52,12 @@ extern tree poplevel ();\n /* Default max number of insns a function can have and still be inline.\n    This is overridden on RISC machines.  */\n #ifndef INTEGRATE_THRESHOLD\n+/* Inlining small functions might save more space then not inlining at\n+   all.  Assume 1 instruction for the call and 1.5 insns per argument.  */\n #define INTEGRATE_THRESHOLD(DECL) \\\n-  (8 * (8 + list_length (DECL_ARGUMENTS (DECL))))\n+  (optimize_size \\\n+   ? (1 + (3 * list_length (DECL_ARGUMENTS (DECL)) / 2)) \\\n+   : (8 * (8 + list_length (DECL_ARGUMENTS (DECL)))))\n #endif\n \f\n static rtx initialize_for_inline PROTO((tree, int, int, int, int));"}, {"sha": "af67a11246d308243a79a6b0e7c213a5b31f56e6", "filename": "gcc/toplev.c", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aec98e42eff44570e0c88be04e37e297b914534d/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aec98e42eff44570e0c88be04e37e297b914534d/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=aec98e42eff44570e0c88be04e37e297b914534d", "patch": "@@ -3798,12 +3798,6 @@ main (argc, argv, envp)\n       flag_inline_functions = 1;\n     }\n \n-  /* Disable code bloating optimizations if optimizing for size. */\n-  if (optimize_size)\n-    {\n-      flag_inline_functions = 0;\n-    }\n-\n   /* Initialize target_flags before OPTIMIZATION_OPTIONS so the latter can\n      modify it.  */\n   target_flags = 0;"}]}