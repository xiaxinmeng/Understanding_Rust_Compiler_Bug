{"sha": "2a8fcd43bd18b2b3a138c2a0f9607adaca668722", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmE4ZmNkNDNiZDE4YjJiM2ExMzhjMmEwZjk2MDdhZGFjYTY2ODcyMg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-10-29T10:02:16Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-10-29T10:02:16Z"}, "message": "[multiple changes]\n\n2012-10-29  Steve Baird  <baird@adacore.com>\n\n\t* sem_ch13.adb (Analyze_Attribute_Definition_Clause): If CodePeer_Mode\n\t= True and we detect that an Address specification is used to overlay\n\tanother object, do not set that object's Treat_As_Volatile flag.\n\n2012-10-29  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch3.adb (Constant_Redeclaration): If the type of a\n\tdeferred constant has invariants, generate invariant call on\n\tthe initial value.\n\nFrom-SVN: r192917", "tree": {"sha": "6188daffc22af5664bbc733fe2fcad67f3c1d6b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6188daffc22af5664bbc733fe2fcad67f3c1d6b3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2a8fcd43bd18b2b3a138c2a0f9607adaca668722", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a8fcd43bd18b2b3a138c2a0f9607adaca668722", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a8fcd43bd18b2b3a138c2a0f9607adaca668722", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a8fcd43bd18b2b3a138c2a0f9607adaca668722/comments", "author": null, "committer": null, "parents": [{"sha": "415450ea8e5025bbf8c8506aada92f7a69dd97fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/415450ea8e5025bbf8c8506aada92f7a69dd97fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/415450ea8e5025bbf8c8506aada92f7a69dd97fa"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "ecd16a2f91ed7e2e123b27e420037c47569895a4", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a8fcd43bd18b2b3a138c2a0f9607adaca668722/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a8fcd43bd18b2b3a138c2a0f9607adaca668722/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=2a8fcd43bd18b2b3a138c2a0f9607adaca668722", "patch": "@@ -1,3 +1,15 @@\n+2012-10-29  Steve Baird  <baird@adacore.com>\n+\n+\t* sem_ch13.adb (Analyze_Attribute_Definition_Clause): If CodePeer_Mode\n+\t= True and we detect that an Address specification is used to overlay\n+\tanother object, do not set that object's Treat_As_Volatile flag.\n+\n+2012-10-29  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch3.adb (Constant_Redeclaration): If the type of a\n+\tdeferred constant has invariants, generate invariant call on\n+\tthe initial value.\n+\n 2012-10-29  Bob Duff  <duff@adacore.com>\n \n \t* sem_ch13.adb (Replace_Type_Reference): Use correct sloc for"}, {"sha": "e67026dcb63a71806a5a6f5233b5646407ecfbf6", "filename": "gcc/ada/sem_ch13.adb", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a8fcd43bd18b2b3a138c2a0f9607adaca668722/gcc%2Fada%2Fsem_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a8fcd43bd18b2b3a138c2a0f9607adaca668722/gcc%2Fada%2Fsem_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch13.adb?ref=2a8fcd43bd18b2b3a138c2a0f9607adaca668722", "patch": "@@ -2708,7 +2708,21 @@ package body Sem_Ch13 is\n                   if Present (O_Ent)\n                     and then Is_Object (O_Ent)\n                     and then not Off\n+\n+                    --  The following test is an expedient solution to what\n+                    --  is really a problem in CodePeer. Suppressing the\n+                    --  Set_Treat_As_Volatile call here prevents later\n+                    --  generation (in some cases) of trees that CodePeer\n+                    --  should, but currently does not, handle correctly.\n+                    --  This test should probably be removed when CodePeer\n+                    --  is improved, just because we want the tree CodePeer\n+                    --  analyzes to match the tree for which we generate code\n+                    --  as closely as is practical. ???\n+\n+                    and then not CodePeer_Mode\n                   then\n+                     --  ??? O_Ent might not be in current unit\n+\n                      Set_Treat_As_Volatile (O_Ent);\n                   end if;\n "}, {"sha": "818bfd083cd1ae5c16d8b8a9eebe6cabf66dd23d", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a8fcd43bd18b2b3a138c2a0f9607adaca668722/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a8fcd43bd18b2b3a138c2a0f9607adaca668722/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=2a8fcd43bd18b2b3a138c2a0f9607adaca668722", "patch": "@@ -10656,6 +10656,18 @@ package body Sem_Ch3 is\n          then\n             Check_Recursive_Declaration (Designated_Type (T));\n          end if;\n+\n+         --  A deferred constant is a visible entity. If type has invariants,\n+         --  verify that the initial value satisfies them.\n+\n+         if Expander_Active and then Has_Invariants (T) then\n+            declare\n+               Call : constant Node_Id :=\n+                 Make_Invariant_Call (New_Occurrence_Of (Prev, Sloc (N)));\n+            begin\n+               Insert_After (N, Call);\n+            end;\n+         end if;\n       end if;\n    end Constant_Redeclaration;\n "}]}