{"sha": "cca19830cae82e147d69cfbf06ac9cdea0890495", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NhMTk4MzBjYWU4MmUxNDdkNjljZmJmMDZhYzljZGVhMDg5MDQ5NQ==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1996-05-22T03:50:11Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1996-05-22T03:50:11Z"}, "message": "h8300.md (div patterns): Rewrite.\n\n        * h8300/h8300.md (div patterns): Rewrite.\n        (mod patterns): Likewise.\n\nFrom-SVN: r12072", "tree": {"sha": "0a83d71b03924ff4dca17281368b6b29ccf355d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0a83d71b03924ff4dca17281368b6b29ccf355d5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cca19830cae82e147d69cfbf06ac9cdea0890495", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cca19830cae82e147d69cfbf06ac9cdea0890495", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cca19830cae82e147d69cfbf06ac9cdea0890495", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cca19830cae82e147d69cfbf06ac9cdea0890495/comments", "author": null, "committer": null, "parents": [{"sha": "71032fe3c4c7b0f9c4820d46d226f1b587025035", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71032fe3c4c7b0f9c4820d46d226f1b587025035", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71032fe3c4c7b0f9c4820d46d226f1b587025035"}], "stats": {"total": 48, "additions": 32, "deletions": 16}, "files": [{"sha": "ae32c1e9cfcd3d0ef2dcd1d71d6bfa573c97290b", "filename": "gcc/config/h8300/h8300.md", "status": "modified", "additions": 32, "deletions": 16, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cca19830cae82e147d69cfbf06ac9cdea0890495/gcc%2Fconfig%2Fh8300%2Fh8300.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cca19830cae82e147d69cfbf06ac9cdea0890495/gcc%2Fconfig%2Fh8300%2Fh8300.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.md?ref=cca19830cae82e147d69cfbf06ac9cdea0890495", "patch": "@@ -842,8 +842,10 @@\n \n (define_insn \"udivqi3\"\n   [(set (match_operand:QI 0 \"register_operand\" \"=r\")\n-\t(udiv:QI (match_operand:HI 1 \"general_operand\" \"0\")\n-\t\t (match_operand:QI 2 \"register_operand\" \"r\")))]\n+\t(truncate:QI\n+\t  (udiv:HI\n+\t    (match_operand:HI 1 \"general_operand\" \"0\")\n+\t    (zero_extend:HI (match_operand:QI 2 \"register_operand\" \"r\")))))]\n   \"\"\n   \"divxu\t%X2,%T0\"\n   [(set_attr \"length\" \"2\")\n@@ -853,26 +855,32 @@\n \n (define_insn \"divqi3\"\n   [(set (match_operand:QI 0 \"register_operand\" \"=r\")\n-\t(div:QI (match_operand:HI 1 \"general_operand\" \"0\")\n-\t\t(match_operand:QI 2 \"register_operand\" \"r\")))]\n+\t(truncate:QI\n+\t  (div:HI\n+\t    (match_operand:HI 1 \"general_operand\" \"0\")\n+\t    (sign_extend:HI (match_operand:QI 2 \"register_operand\" \"r\")))))]\n   \"\"\n   \"divxu\t%X2,%T0\"\n   [(set_attr \"length\" \"2\")\n    (set_attr \"cc\" \"clobber\")])\n \n (define_insn \"udivhi3\"\n   [(set (match_operand:HI 0 \"register_operand\" \"=r\")\n-\t(udiv:HI (match_operand:SI 1 \"general_operand\" \"0\")\n-\t\t (match_operand:HI 2 \"register_operand\" \"r\")))]\n+\t(truncate:HI\n+\t  (udiv:SI\n+\t    (match_operand:SI 1 \"general_operand\" \"0\")\n+\t    (zero_extend:SI (match_operand:HI 2 \"register_operand\" \"r\")))))]\n   \"TARGET_H8300H\"\n   \"divxu.w\t%T2,%S0\"\n   [(set_attr \"length\" \"2\")\n    (set_attr \"cc\" \"clobber\")])\n \n (define_insn \"divhi3\"\n   [(set (match_operand:HI 0 \"register_operand\" \"=r\")\n-\t(div:HI (match_operand:SI 1 \"general_operand\" \"0\")\n-\t\t(match_operand:HI 2 \"register_operand\" \"r\")))]\n+\t(truncate:HI\n+\t  (div:SI\n+\t    (match_operand:SI 1 \"general_operand\" \"0\")\n+\t    (sign_extend:SI (match_operand:HI 2 \"register_operand\" \"r\")))))]\n   \"TARGET_H8300H\"\n   \"divxs.w\t%T2,%S0\"\n   [(set_attr \"length\" \"4\")\n@@ -884,35 +892,43 @@\n \n (define_insn \"umodqi3\"\n   [(set (match_operand:QI 0 \"register_operand\" \"=r\")\n-\t(umod:QI (match_operand:HI 1 \"general_operand\" \"0\")\n-\t\t (match_operand:QI 2 \"register_operand\" \"r\")))]\n+\t(truncate:QI\n+\t  (umod:HI\n+\t    (match_operand:HI 1 \"general_operand\" \"0\")\n+\t    (zero_extend:HI (match_operand:QI 2 \"register_operand\" \"r\")))))]\n   \"\"\n   \"divxu\t%X2,%T0\\;mov %t0,%s0\"\n   [(set_attr \"length\" \"4\")\n    (set_attr \"cc\" \"clobber\")])\n \n (define_insn \"modqi3\"\n   [(set (match_operand:QI 0 \"register_operand\" \"=r\")\n-\t(mod:QI (match_operand:HI 1 \"general_operand\" \"0\")\n-\t\t(match_operand:QI 2 \"register_operand\" \"r\")))]\n+\t(truncate:QI\n+\t  (mod:HI\n+\t    (match_operand:HI 1 \"general_operand\" \"0\")\n+\t    (sign_extend:HI (match_operand:QI 2 \"register_operand\" \"r\")))))]\n   \"TARGET_H8300H\"\n   \"divxs.b\t%X2,%T0\\;mov %t0,%s0\"\n   [(set_attr \"length\" \"6\")\n    (set_attr \"cc\" \"clobber\")])\n \n (define_insn \"umodhi3\"\n   [(set (match_operand:HI 0 \"register_operand\" \"=r\")\n-\t(umod:HI (match_operand:SI 1 \"general_operand\" \"0\")\n-\t\t (match_operand:HI 2 \"register_operand\" \"r\")))]\n+\t(truncate:HI\n+\t  (umod:SI\n+\t    (match_operand:SI 1 \"general_operand\" \"0\")\n+\t    (zero_extend:SI (match_operand:HI 2 \"register_operand\" \"r\")))))]\n   \"TARGET_H8300H\"\n   \"divxu.w\t%T2,%S0\\;mov %e0,%f0\"\n   [(set_attr \"length\" \"4\")\n    (set_attr \"cc\" \"clobber\")])\n \n (define_insn \"modhi3\"\n   [(set (match_operand:HI 0 \"register_operand\" \"=r\")\n-\t(mod:HI (match_operand:SI 1 \"general_operand\" \"0\")\n-\t\t(match_operand:HI 2 \"register_operand\" \"r\")))]\n+\t(truncate:HI\n+\t  (mod:SI\n+\t    (match_operand:SI 1 \"general_operand\" \"0\")\n+\t    (sign_extend:SI (match_operand:HI 2 \"register_operand\" \"r\")))))]\n   \"TARGET_H8300H\"\n   \"divxs.w\t%T2,%S0\\;mov %e0,%f0\"\n   [(set_attr \"length\" \"6\")"}]}