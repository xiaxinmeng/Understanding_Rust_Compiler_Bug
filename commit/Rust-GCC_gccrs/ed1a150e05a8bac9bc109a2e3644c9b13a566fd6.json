{"sha": "ed1a150e05a8bac9bc109a2e3644c9b13a566fd6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQxYTE1MGUwNWE4YmFjOWJjMTA5YTJlMzY0NGM5YjEzYTU2NmZkNg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2001-09-20T12:56:59Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2001-09-20T12:56:59Z"}, "message": "stor-layout.c (layout_type, [...]): Kludge to disable array-too-large test for signed sizetype.\n\n\t* stor-layout.c (layout_type, case ARRAY_TYPE): Kludge to disable\n\tarray-too-large test for signed sizetype.\n\nFrom-SVN: r45707", "tree": {"sha": "c46e1780f50e12eb39b3ecf27d44ccecbeff1967", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c46e1780f50e12eb39b3ecf27d44ccecbeff1967"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed1a150e05a8bac9bc109a2e3644c9b13a566fd6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed1a150e05a8bac9bc109a2e3644c9b13a566fd6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed1a150e05a8bac9bc109a2e3644c9b13a566fd6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed1a150e05a8bac9bc109a2e3644c9b13a566fd6/comments", "author": null, "committer": null, "parents": [{"sha": "6eb791fc977474c35eed05b27836328e110460ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6eb791fc977474c35eed05b27836328e110460ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6eb791fc977474c35eed05b27836328e110460ad"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "1b17a43b6609106ba444b17d157ead97dbe84859", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1a150e05a8bac9bc109a2e3644c9b13a566fd6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1a150e05a8bac9bc109a2e3644c9b13a566fd6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ed1a150e05a8bac9bc109a2e3644c9b13a566fd6", "patch": "@@ -1,3 +1,8 @@\n+Thu Sep 20 09:00:27 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* stor-layout.c (layout_type, case ARRAY_TYPE): Kludge to disable\n+\tarray-too-large test for signed sizetype.\n+\n Thu Sep 20 12:19:36 CEST 2001  Jan Hubicka  <jh@suse.cz>\n \n \t* i386.md (indirect_jump): Allow Pmode operand."}, {"sha": "57b839f7724bce40463b9bf79e2246934ed6add5", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed1a150e05a8bac9bc109a2e3644c9b13a566fd6/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed1a150e05a8bac9bc109a2e3644c9b13a566fd6/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=ed1a150e05a8bac9bc109a2e3644c9b13a566fd6", "patch": "@@ -1445,9 +1445,16 @@ layout_type (type)\n \t\t= size_binop (MULT_EXPR, TYPE_SIZE_UNIT (element), length);\n \n \t    /* Complain if the user has requested an array too large to\n-\t       fit in size_t.  */\n+\t       fit in size_t.\n+\n+\t       ??? Disable this test for signed sizetypes.  This has the effect\n+\t       of disabling it for Ada, where it will cause trouble.  However,\n+\t       this test doesn't make sense for C either since there should\n+\t       be no problem with a type whose size overflows, only an\n+\t       object whose size overflows.  */\n \t    if (TREE_CODE (TYPE_SIZE (type)) == INTEGER_CST\n-\t\t&& TREE_OVERFLOW (TYPE_SIZE (type)))\n+\t\t&& TREE_OVERFLOW (TYPE_SIZE (type))\n+\t\t&& TREE_UNSIGNED (TREE_TYPE (TYPE_SIZE (type))))\n \t      {\n \t\terror (\"requested array too large for target\");\n "}]}