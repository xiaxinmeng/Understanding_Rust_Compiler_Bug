{"sha": "07820c51656042bbed6eb9661d33d4bec1f04c47", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDc4MjBjNTE2NTYwNDJiYmVkNmViOTY2MWQzM2Q0YmVjMWYwNGM0Nw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-10-13T12:55:07Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-10-13T12:55:07Z"}, "message": "Code cleanup.\n\nFrom-SVN: r241113", "tree": {"sha": "151e716580440504bdb8f192bc8c81b637af905f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/151e716580440504bdb8f192bc8c81b637af905f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/07820c51656042bbed6eb9661d33d4bec1f04c47", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07820c51656042bbed6eb9661d33d4bec1f04c47", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07820c51656042bbed6eb9661d33d4bec1f04c47", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07820c51656042bbed6eb9661d33d4bec1f04c47/comments", "author": null, "committer": null, "parents": [{"sha": "5dc203d228f3bafc063278e4b6ef7954300b3908", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5dc203d228f3bafc063278e4b6ef7954300b3908", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5dc203d228f3bafc063278e4b6ef7954300b3908"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "cd74cfcd8f10edf62c4fcb83311293fbd9fe0f20", "filename": "gcc/ada/contracts.adb", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07820c51656042bbed6eb9661d33d4bec1f04c47/gcc%2Fada%2Fcontracts.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07820c51656042bbed6eb9661d33d4bec1f04c47/gcc%2Fada%2Fcontracts.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fcontracts.adb?ref=07820c51656042bbed6eb9661d33d4bec1f04c47", "patch": "@@ -2030,11 +2030,13 @@ package body Contracts is\n                   --  A protection field renaming appears as\n                   --    Prot : ... := _object._object;\n \n+                  --  A renamed private component is just a component of\n+                  --  _object, with an arbitrary name.\n+\n                   elsif Ekind (Obj) = E_Variable\n                     and then Nkind (Pref) = N_Identifier\n                     and then Chars (Pref) = Name_uObject\n                     and then Nkind (Sel) = N_Identifier\n-                    and then Chars (Sel) = Name_uObject\n                   then\n                      return True;\n                   end if;\n@@ -2307,9 +2309,16 @@ package body Contracts is\n                --  Certain internally generated object renamings such as those\n                --  for discriminants and protection fields must be elaborated\n                --  before the preconditions are evaluated, as their expressions\n-               --  may mention the discriminants.\n+               --  may mention the discriminants. The renamings include those\n+               --  for private components so we need to find the last such.\n \n                elsif Is_Prologue_Renaming (Decl) then\n+                  while Present (Next (Decl))\n+                    and then Is_Prologue_Renaming (Next (Decl))\n+                  loop\n+                     Next (Decl);\n+                  end loop;\n+\n                   Insert_Node := Decl;\n \n                --  Otherwise the declaration does not come from source. This"}]}