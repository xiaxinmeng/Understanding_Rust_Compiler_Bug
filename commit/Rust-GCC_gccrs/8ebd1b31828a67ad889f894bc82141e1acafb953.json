{"sha": "8ebd1b31828a67ad889f894bc82141e1acafb953", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGViZDFiMzE4MjhhNjdhZDg4OWY4OTRiYzgyMTQxZTFhY2FmYjk1Mw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-11-10T17:05:18Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-11-10T17:05:18Z"}, "message": "cpp.c (cpp_define_builtins): Define _OPENMP to 201511 instead of 201307.\n\ngcc/fortran/\n\t* cpp.c (cpp_define_builtins): Define _OPENMP to 201511 instead\n\tof 201307.\n\t* gfortran.texi: Mention partial OpenMP 4.5 support.\n\t* intrinsic.texi: Update for OpenMP 4.5.\ngcc/testsuite/\n\t* gfortran.dg/openmp-define-3.f90: Expect 201511 instead of\n\t201307.\nlibgomp/\n\t* omp_lib.f90.in (openmp_version): Change to 201511 from 201307.\n\t* omp_lib.h.in (openmp_version): Likewise.\n\t* testsuite/libgomp.fortran/openmp_version-1.f: Expect 201511 instead\n\tof 201307.\n\t* testsuite/libgomp.fortran/openmp_version-2.f90: Likewise.\n\nFrom-SVN: r242044", "tree": {"sha": "13c61eab73f4e7bdef9c733eed440aa4db51b241", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/13c61eab73f4e7bdef9c733eed440aa4db51b241"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8ebd1b31828a67ad889f894bc82141e1acafb953", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ebd1b31828a67ad889f894bc82141e1acafb953", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ebd1b31828a67ad889f894bc82141e1acafb953", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ebd1b31828a67ad889f894bc82141e1acafb953/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e93f30a65fdca10d8881fe1a462eca347b5f58b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e93f30a65fdca10d8881fe1a462eca347b5f58b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e93f30a65fdca10d8881fe1a462eca347b5f58b2"}], "stats": {"total": 39, "additions": 27, "deletions": 12}, "files": [{"sha": "012d211ff00dea9d38694aace1f6cee54c5aa996", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=8ebd1b31828a67ad889f894bc82141e1acafb953", "patch": "@@ -1,5 +1,10 @@\n 2016-11-10  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* cpp.c (cpp_define_builtins): Define _OPENMP to 201511 instead\n+\tof 201307.\n+\t* gfortran.texi: Mention partial OpenMP 4.5 support.\n+\t* intrinsic.texi: Update for OpenMP 4.5.\n+\n \t* openmp.c (gfc_free_omp_clauses): Free critical_name, grainsize,\n \thint, num_tasks, priority and if_exprs.\n \t(gfc_match_omp_to_link, gfc_match_omp_depend_sink): New functions."}, {"sha": "68ec549c9c30611af4d5d91f4aa13ff4929b9eee", "filename": "gcc/fortran/cpp.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ffortran%2Fcpp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ffortran%2Fcpp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fcpp.c?ref=8ebd1b31828a67ad889f894bc82141e1acafb953", "patch": "@@ -168,7 +168,7 @@ cpp_define_builtins (cpp_reader *pfile)\n     cpp_define (pfile, \"_OPENACC=201306\");\n \n   if (flag_openmp)\n-    cpp_define (pfile, \"_OPENMP=201307\");\n+    cpp_define (pfile, \"_OPENMP=201511\");\n \n   /* The defines below are necessary for the TARGET_* macros.\n "}, {"sha": "6d8805cfc9856f60ba4a2944bf44e5b2c764102e", "filename": "gcc/fortran/gfortran.texi", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ffortran%2Fgfortran.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ffortran%2Fgfortran.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.texi?ref=8ebd1b31828a67ad889f894bc82141e1acafb953", "patch": "@@ -536,7 +536,8 @@ The current status of the support is can be found in the\n and @ref{TS 18508 status} sections of the documentation.\n \n Additionally, the GNU Fortran compilers supports the OpenMP specification\n-(version 4.0, @url{http://openmp.org/@/wp/@/openmp-specifications/}).\n+(version 4.0 and most of the features of the 4.5 version,\n+@url{http://openmp.org/@/wp/@/openmp-specifications/}).\n There also is initial support for the OpenACC specification (targeting\n version 2.0, @uref{http://www.openacc.org/}).\n Note that this is an experimental feature, incomplete, and subject to\n@@ -1999,7 +2000,7 @@ and environment variables that influence run-time behavior.\n \n GNU Fortran strives to be compatible to the \n @uref{http://openmp.org/wp/openmp-specifications/,\n-OpenMP Application Program Interface v4.0}.\n+OpenMP Application Program Interface v4.5}.\n \n To enable the processing of the OpenMP directive @code{!$omp} in\n free-form source code; the @code{c$omp}, @code{*$omp} and @code{!$omp}"}, {"sha": "8122c6288234d7bc647ed337cca5f5bbe9a5b84e", "filename": "gcc/fortran/intrinsic.texi", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ffortran%2Fintrinsic.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ffortran%2Fintrinsic.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fintrinsic.texi?ref=8ebd1b31828a67ad889f894bc82141e1acafb953", "patch": "@@ -14769,7 +14769,7 @@ with the following options: @code{-fno-unsafe-math-optimizations\n @section OpenMP Modules @code{OMP_LIB} and @code{OMP_LIB_KINDS}\n @table @asis\n @item @emph{Standard}:\n-OpenMP Application Program Interface v4.0\n+OpenMP Application Program Interface v4.5\n @end table\n \n \n@@ -14783,8 +14783,8 @@ the named constants defined in the modules are listed\n below.\n \n For details refer to the actual\n-@uref{http://www.openmp.org/mp-documents/OpenMP4.0.0.pdf,\n-OpenMP Application Program Interface v4.0}.\n+@uref{http://www.openmp.org/wp-content/uploads/openmp-4.5.pdf,\n+OpenMP Application Program Interface v4.5}.\n \n @code{OMP_LIB_KINDS} provides the following scalar default-integer\n named constants:\n@@ -14799,7 +14799,7 @@ named constants:\n @code{OMP_LIB} provides the scalar default-integer\n named constant @code{openmp_version} with a value of the form\n @var{yyyymm}, where @code{yyyy} is the year and @var{mm} the month\n-of the OpenMP version; for OpenMP v4.0 the value is @code{201307}.\n+of the OpenMP version; for OpenMP v4.5 the value is @code{201511}.\n \n The following scalar integer named constants of the\n kind @code{omp_sched_kind}:"}, {"sha": "d522e24928c2ec3dc7e3236ec82520b5280eb17a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8ebd1b31828a67ad889f894bc82141e1acafb953", "patch": "@@ -1,5 +1,8 @@\n 2016-11-10  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* gfortran.dg/openmp-define-3.f90: Expect 201511 instead of\n+\t201307.\n+\n \t* g++.dg/cpp1z/noexcept-type14.C: New test.\n \t* g++.dg/asan/asan_test.C: Remove -Wno-c++1z-compat from dg-options.\n "}, {"sha": "d20502dece18f6d60440c7599369ff1831431ea6", "filename": "gcc/testsuite/gfortran.dg/openmp-define-3.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ftestsuite%2Fgfortran.dg%2Fopenmp-define-3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ebd1b31828a67ad889f894bc82141e1acafb953/gcc%2Ftestsuite%2Fgfortran.dg%2Fopenmp-define-3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fopenmp-define-3.f90?ref=8ebd1b31828a67ad889f894bc82141e1acafb953", "patch": "@@ -6,6 +6,6 @@\n # error _OPENMP not defined\n #endif\n \n-#if _OPENMP != 201307\n+#if _OPENMP != 201511\n # error _OPENMP defined to wrong value\n #endif"}, {"sha": "7e32fd0066612523d32a24dd1ff8719a77445272", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ebd1b31828a67ad889f894bc82141e1acafb953/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ebd1b31828a67ad889f894bc82141e1acafb953/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=8ebd1b31828a67ad889f894bc82141e1acafb953", "patch": "@@ -1,5 +1,11 @@\n 2016-11-10  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* omp_lib.f90.in (openmp_version): Change to 201511 from 201307.\n+\t* omp_lib.h.in (openmp_version): Likewise.\n+\t* testsuite/libgomp.fortran/openmp_version-1.f: Expect 201511 instead\n+\tof 201307.\n+\t* testsuite/libgomp.fortran/openmp_version-2.f90: Likewise.\n+\n \t* testsuite/libgomp.fortran/examples-4/declare_target-1.f90\n \t(fib_wrapper): Add map(from: x) clause.\n \t* testsuite/libgomp.fortran/examples-4/declare_target-2.f90"}, {"sha": "2e73ce5f93b9fb4c002548bb65c98779a98422b5", "filename": "libgomp/omp_lib.f90.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ebd1b31828a67ad889f894bc82141e1acafb953/libgomp%2Fomp_lib.f90.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ebd1b31828a67ad889f894bc82141e1acafb953/libgomp%2Fomp_lib.f90.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fomp_lib.f90.in?ref=8ebd1b31828a67ad889f894bc82141e1acafb953", "patch": "@@ -59,7 +59,7 @@\n       module omp_lib\n         use omp_lib_kinds\n         implicit none\n-        integer, parameter :: openmp_version = 201307\n+        integer, parameter :: openmp_version = 201511\n \n         interface\n           subroutine omp_init_lock (svar)"}, {"sha": "032b6573ee5bd43dd547c98206f4a94a2d5fcd96", "filename": "libgomp/omp_lib.h.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ebd1b31828a67ad889f894bc82141e1acafb953/libgomp%2Fomp_lib.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ebd1b31828a67ad889f894bc82141e1acafb953/libgomp%2Fomp_lib.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fomp_lib.h.in?ref=8ebd1b31828a67ad889f894bc82141e1acafb953", "patch": "@@ -58,7 +58,7 @@\n       parameter (omp_lock_hint_contended = 2)\n       parameter (omp_lock_hint_nonspeculative = 4)\n       parameter (omp_lock_hint_speculative = 8)\n-      parameter (openmp_version = 201307)\n+      parameter (openmp_version = 201511)\n \n       external omp_init_lock, omp_init_nest_lock\n       external omp_init_lock_with_hint"}, {"sha": "20ca78a9fed4fe2fefaacb62190314cdbd95da07", "filename": "libgomp/testsuite/libgomp.fortran/openmp_version-1.f", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ebd1b31828a67ad889f894bc82141e1acafb953/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fopenmp_version-1.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ebd1b31828a67ad889f894bc82141e1acafb953/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fopenmp_version-1.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fopenmp_version-1.f?ref=8ebd1b31828a67ad889f894bc82141e1acafb953", "patch": "@@ -4,6 +4,6 @@ program main\n       implicit none\n       include \"omp_lib.h\"\n \n-      if (openmp_version .ne. 201307) call abort;\n+      if (openmp_version .ne. 201511) call abort;\n \n       end program main"}, {"sha": "1e0dbec7bc4ff46ee1c7c1bd8e8ca2ff077bbc47", "filename": "libgomp/testsuite/libgomp.fortran/openmp_version-2.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ebd1b31828a67ad889f894bc82141e1acafb953/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fopenmp_version-2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ebd1b31828a67ad889f894bc82141e1acafb953/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fopenmp_version-2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fopenmp_version-2.f90?ref=8ebd1b31828a67ad889f894bc82141e1acafb953", "patch": "@@ -4,6 +4,6 @@ program main\n   use omp_lib\n   implicit none\n \n-  if (openmp_version .ne. 201307) call abort;\n+  if (openmp_version .ne. 201511) call abort;\n \n end program main"}]}