{"sha": "ee9f69b425fabd8af248d75fe7ee62ca17112253", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWU5ZjY5YjQyNWZhYmQ4YWYyNDhkNzVmZTdlZTYyY2ExNzExMjI1Mw==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2007-03-09T00:32:34Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2007-03-09T00:32:34Z"}, "message": "re PR c/31072 ([4.2 Rgression] Wrong code for volatile var with initalization and optimization)\n\n2007-03-08  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR C/31072\n        * c-decl.c (merge_decls): Don't call make_var_volatile.\n        * varasm.c (make_var_volatile): Remove.\n        * output.h (make_var_volatile): Remove.\n\n2007-03-08  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR C/31072\n        * gcc.c-torture/execute/pr31072.c: New test.\n\nFrom-SVN: r122736", "tree": {"sha": "00b828664fda1c04e56f45ffb7f17ee5c3ffab4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00b828664fda1c04e56f45ffb7f17ee5c3ffab4e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee9f69b425fabd8af248d75fe7ee62ca17112253", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee9f69b425fabd8af248d75fe7ee62ca17112253", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee9f69b425fabd8af248d75fe7ee62ca17112253", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee9f69b425fabd8af248d75fe7ee62ca17112253/comments", "author": null, "committer": null, "parents": [{"sha": "99681c8b0fdde287c11d0ef22cf6341fc661d323", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99681c8b0fdde287c11d0ef22cf6341fc661d323", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99681c8b0fdde287c11d0ef22cf6341fc661d323"}], "stats": {"total": 43, "additions": 23, "deletions": 20}, "files": [{"sha": "91cb190996796524efc4a44398d13c876b498535", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ee9f69b425fabd8af248d75fe7ee62ca17112253", "patch": "@@ -1,3 +1,10 @@\n+2007-03-08  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR C/31072\n+\t* c-decl.c (merge_decls): Don't call make_var_volatile.\n+\t* varasm.c (make_var_volatile): Remove.\n+\t* output.h (make_var_volatile): Remove.\n+\n 2007-03-08  Zdenek Dvorak  <dvorakz@suse.cz>\n \n \tPR tree-optimization/31085"}, {"sha": "fd5b065c19358fd75a8711efb0d32297e05ef2a0", "filename": "gcc/c-decl.c", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=ee9f69b425fabd8af248d75fe7ee62ca17112253", "patch": "@@ -1690,11 +1690,7 @@ merge_decls (tree newdecl, tree olddecl, tree newtype, tree oldtype)\n     TREE_READONLY (olddecl) = 1;\n \n   if (TREE_THIS_VOLATILE (newdecl))\n-    {\n-      TREE_THIS_VOLATILE (olddecl) = 1;\n-      if (TREE_CODE (newdecl) == VAR_DECL)\n-\tmake_var_volatile (newdecl);\n-    }\n+    TREE_THIS_VOLATILE (olddecl) = 1;\n \n   /* Merge deprecatedness.  */\n   if (TREE_DEPRECATED (newdecl))"}, {"sha": "a5c29f0d8e0bcca601dbb0d7993d8d281b07d189", "filename": "gcc/output.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2Foutput.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2Foutput.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foutput.h?ref=ee9f69b425fabd8af248d75fe7ee62ca17112253", "patch": "@@ -170,10 +170,6 @@ extern void emutls_finish (void);\n    Prefixes such as % are optional.  */\n extern int decode_reg_name (const char *);\n \n-/* Make the rtl for variable VAR be volatile.\n-   Use this only for static variables.  */\n-extern void make_var_volatile (tree);\n-\n extern void assemble_alias (tree, tree);\n \n extern void default_assemble_visibility (tree, int);"}, {"sha": "ba0392e8b331d36ae12dc2507c234c609025b49a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ee9f69b425fabd8af248d75fe7ee62ca17112253", "patch": "@@ -1,3 +1,8 @@\n+2007-03-08  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR C/31072\n+\t* gcc.c-torture/execute/pr31072.c: New test.\n+\n 2007-03-08  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* gcc.dg/builtins-55.c: Test *lceil* and *lfloor*."}, {"sha": "beb4b558e34e3ef69c5a514e96f77eff78c46ec7", "filename": "gcc/testsuite/gcc.c-torture/execute/pr31072.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr31072.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr31072.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr31072.c?ref=ee9f69b425fabd8af248d75fe7ee62ca17112253", "patch": "@@ -0,0 +1,10 @@\n+extern volatile int ReadyFlag_NotProperlyInitialized;\n+\n+volatile int ReadyFlag_NotProperlyInitialized=1;\n+\n+int main(void)\n+{\n+  if (ReadyFlag_NotProperlyInitialized != 1)\n+    __builtin_abort ();\n+  return 0;\n+}"}, {"sha": "7e482b3a34b13a47a0d9ea773a5cef9dd48caf45", "filename": "gcc/varasm.c", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee9f69b425fabd8af248d75fe7ee62ca17112253/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=ee9f69b425fabd8af248d75fe7ee62ca17112253", "patch": "@@ -1403,17 +1403,6 @@ make_decl_rtl (tree decl)\n   if (flag_mudflap && TREE_CODE (decl) == VAR_DECL)\n     mudflap_enqueue_decl (decl);\n }\n-\n-/* Make the rtl for variable VAR be volatile.\n-   Use this only for static variables.  */\n-\n-void\n-make_var_volatile (tree var)\n-{\n-  gcc_assert (MEM_P (DECL_RTL (var)));\n-\n-  MEM_VOLATILE_P (DECL_RTL (var)) = 1;\n-}\n \f\n /* Output a string of literal assembler code\n    for an `asm' keyword used between functions.  */"}]}