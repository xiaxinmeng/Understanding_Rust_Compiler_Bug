{"sha": "ff97dd826e77fa9ee1f3c89a73e2cee855cf5fb9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmY5N2RkODI2ZTc3ZmE5ZWUxZjNjODlhNzNlMmNlZTg1NWNmNWZiOQ==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@gmail.com", "date": "2017-08-12T00:28:04Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2017-08-12T00:28:04Z"}, "message": "[RS6000] linux startfile/endfile\n\nThese need to match the gnu-user.h definitions to support\n--enable-default-pie.  Otherwise we end up linking the wrong startup\nfiles when defaulting to PIE.\n\n\tPR target/81170\n\tPR target/81295\n\t* config/rs6000/sysv4.h (STARTFILE_LINUX_SPEC): Upgrade to\n\tmatch gnu-user.h startfile.\n\t(ENDFILE_LINUX_SPEC): Similarly.\n\nFrom-SVN: r251065", "tree": {"sha": "878ec8a8752c039952f66556cfc6411fb8a5d528", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/878ec8a8752c039952f66556cfc6411fb8a5d528"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff97dd826e77fa9ee1f3c89a73e2cee855cf5fb9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff97dd826e77fa9ee1f3c89a73e2cee855cf5fb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff97dd826e77fa9ee1f3c89a73e2cee855cf5fb9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff97dd826e77fa9ee1f3c89a73e2cee855cf5fb9/comments", "author": {"login": "amodra", "id": 6006325, "node_id": "MDQ6VXNlcjYwMDYzMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amodra", "html_url": "https://github.com/amodra", "followers_url": "https://api.github.com/users/amodra/followers", "following_url": "https://api.github.com/users/amodra/following{/other_user}", "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}", "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amodra/subscriptions", "organizations_url": "https://api.github.com/users/amodra/orgs", "repos_url": "https://api.github.com/users/amodra/repos", "events_url": "https://api.github.com/users/amodra/events{/privacy}", "received_events_url": "https://api.github.com/users/amodra/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9567c62efb83a03348971a01cc6f6d0ec5d79908", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9567c62efb83a03348971a01cc6f6d0ec5d79908", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9567c62efb83a03348971a01cc6f6d0ec5d79908"}], "stats": {"total": 54, "additions": 36, "deletions": 18}, "files": [{"sha": "55645ca3b85674a01de23d5b27e564570d8a3b52", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff97dd826e77fa9ee1f3c89a73e2cee855cf5fb9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff97dd826e77fa9ee1f3c89a73e2cee855cf5fb9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ff97dd826e77fa9ee1f3c89a73e2cee855cf5fb9", "patch": "@@ -1,3 +1,11 @@\n+2017-08-12  Alan Modra  <amodra@gmail.com>\n+\n+\tPR target/81170\n+\tPR target/81295\n+\t* config/rs6000/sysv4.h (STARTFILE_LINUX_SPEC): Upgrade to\n+\tmatch gnu-user.h startfile.\n+\t(ENDFILE_LINUX_SPEC): Similarly.\n+\n 2017-08-11  Thomas Schwinge  <thomas@codesourcery.com>\n \n \tPR lto/81430"}, {"sha": "cbee89140ddca2f635e7dd39baeda2a5a6169e93", "filename": "gcc/config/rs6000/sysv4.h", "status": "modified", "additions": 28, "deletions": 18, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff97dd826e77fa9ee1f3c89a73e2cee855cf5fb9/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff97dd826e77fa9ee1f3c89a73e2cee855cf5fb9/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fsysv4.h?ref=ff97dd826e77fa9ee1f3c89a73e2cee855cf5fb9", "patch": "@@ -757,24 +757,34 @@ ENDIAN_SELECT(\" -mbig\", \" -mlittle\", DEFAULT_ASM_ENDIAN)\n #define CRTOFFLOADEND \"\"\n #endif\n \n-#ifdef HAVE_LD_PIE\n-#define\tSTARTFILE_LINUX_SPEC \"\\\n-%{!shared: %{pg|p|profile:gcrt1.o%s;pie:Scrt1.o%s;:crt1.o%s}} \\\n-%{mnewlib:ecrti.o%s;:crti.o%s} \\\n-%{static:crtbeginT.o%s;shared|pie:crtbeginS.o%s;:crtbegin.o%s} \\\n-\" CRTOFFLOADBEGIN\n-#else\n-#define\tSTARTFILE_LINUX_SPEC \"\\\n-%{!shared: %{pg|p|profile:gcrt1.o%s;:crt1.o%s}} \\\n-%{mnewlib:ecrti.o%s;:crti.o%s} \\\n-%{static:crtbeginT.o%s;shared|pie:crtbeginS.o%s;:crtbegin.o%s} \\\n-\" CRTOFFLOADBEGIN\n-#endif\n-\n-#define\tENDFILE_LINUX_SPEC \"\\\n-%{shared|pie:crtendS.o%s;:crtend.o%s} \\\n-%{mnewlib:ecrtn.o%s;:crtn.o%s} \\\n-\" CRTOFFLOADEND\n+/* STARTFILE_LINUX_SPEC should be the same as GNU_USER_TARGET_STARTFILE_SPEC\n+   but with the mnewlib ecrti.o%s selection substituted for crti.o%s.  */\n+#define\tSTARTFILE_LINUX_SPEC \\\n+  \"%{shared:; \\\n+     pg|p|profile:gcrt1.o%s; \\\n+     static:crt1.o%s; \\\n+     \" PIE_SPEC \":Scrt1.o%s; \\\n+     :crt1.o%s} \\\n+   %{mnewlib:ecrti.o%s;:crti.o%s} \\\n+   %{static:crtbeginT.o%s; \\\n+     shared|\" PIE_SPEC \":crtbeginS.o%s; \\\n+     :crtbegin.o%s} \\\n+   %{fvtable-verify=none:%s; \\\n+     fvtable-verify=preinit:vtv_start_preinit.o%s; \\\n+     fvtable-verify=std:vtv_start.o%s} \\\n+   \" CRTOFFLOADBEGIN\n+\n+/* ENDFILE_LINUX_SPEC should be the same as GNU_USER_TARGET_ENDFILE_SPEC\n+   but with the mnewlib ecrtn.o%s selection substituted for crtn.o%s.  */\n+#define ENDFILE_LINUX_SPEC \\\n+  \"%{fvtable-verify=none:%s; \\\n+     fvtable-verify=preinit:vtv_end_preinit.o%s; \\\n+     fvtable-verify=std:vtv_end.o%s} \\\n+   %{static:crtend.o%s; \\\n+     shared|\" PIE_SPEC \":crtendS.o%s; \\\n+     :crtend.o%s} \\\n+   %{mnewlib:ecrtn.o%s;:crtn.o%s} \\\n+   \" CRTOFFLOADEND\n \n #define LINK_START_LINUX_SPEC \"\"\n "}]}