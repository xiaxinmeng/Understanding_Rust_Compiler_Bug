{"sha": "7dc17098a2c31f04a702967845220d5b1e4a2336", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2RjMTcwOThhMmMzMWYwNGE3MDI5Njc4NDUyMjBkNWIxZTRhMjMzNg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2002-07-05T15:16:56Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2002-07-05T15:16:56Z"}, "message": "re PR rtl-optimization/7145 (g++ -O with structure initializer & return value optimization generates bad code)\n\n        PR optimization/7145\n        * tree.c (cp_copy_res_decl_for_inlining): Also copy DECL_INITIAL.\n\n[[Split portion of a mixed commit.]]\n\nFrom-SVN: r55262.2", "tree": {"sha": "716cf7db649c843c0967c20a371c584e2c0ca472", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/716cf7db649c843c0967c20a371c584e2c0ca472"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7dc17098a2c31f04a702967845220d5b1e4a2336", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dc17098a2c31f04a702967845220d5b1e4a2336", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dc17098a2c31f04a702967845220d5b1e4a2336", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dc17098a2c31f04a702967845220d5b1e4a2336/comments", "author": null, "committer": null, "parents": [{"sha": "98c07d7bd78d311fc95985791421bfde08f40a0b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98c07d7bd78d311fc95985791421bfde08f40a0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98c07d7bd78d311fc95985791421bfde08f40a0b"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "531647d67e13460480a36d35e8fa10c603d5062e", "filename": "gcc/testsuite/g++.dg/opt/nrv4.C", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dc17098a2c31f04a702967845220d5b1e4a2336/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fnrv4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dc17098a2c31f04a702967845220d5b1e4a2336/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fnrv4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fnrv4.C?ref=7dc17098a2c31f04a702967845220d5b1e4a2336", "patch": "@@ -0,0 +1,23 @@\n+// PR optimization/7145\n+// Bug: The NRV optimization caused us to lose the initializer for 'ret'.\n+// { dg-options -O }\n+// { dg-do run }\n+\n+struct GdkColor {\n+  long  pixel;\n+  short red;\n+  short green;\n+  short blue;\n+};\n+\n+inline GdkColor mkcolor() {\n+  GdkColor ret={0,1,2,3};\n+  return ret;\n+}\n+\n+int\n+main()\n+{\n+  GdkColor col=mkcolor();\n+  return (col.pixel != 0 || col.red != 1 || col.green != 2 || col.blue != 3);\n+}"}]}