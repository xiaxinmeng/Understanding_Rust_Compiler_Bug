{"sha": "2a67186a2461e6644e36f673795983484aa22fad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmE2NzE4NmEyNDYxZTY2NDRlMzZmNjczNzk1OTgzNDg0YWEyMmZhZA==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.ch", "date": "2006-04-27T22:20:03Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2006-04-27T22:20:03Z"}, "message": "configure.ac: Add an additional checks for dladdr and dlopen on dld.\n\n2006-04-28  Andreas Tobler  <a.tobler@schweiz.ch>\n\n\t* configure.ac: Add an additional checks for dladdr and dlopen on dld.\n\t* configure: Rebuilt.\n\nFrom-SVN: r113323", "tree": {"sha": "2ea9fd8aa8f0566ff4fd2b519f1dd08dfbcb4fa4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2ea9fd8aa8f0566ff4fd2b519f1dd08dfbcb4fa4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2a67186a2461e6644e36f673795983484aa22fad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a67186a2461e6644e36f673795983484aa22fad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a67186a2461e6644e36f673795983484aa22fad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a67186a2461e6644e36f673795983484aa22fad/comments", "author": null, "committer": null, "parents": [{"sha": "6c00f606c162459e5cc17a9c3f2474314df7071b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c00f606c162459e5cc17a9c3f2474314df7071b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c00f606c162459e5cc17a9c3f2474314df7071b"}], "stats": {"total": 181, "additions": 176, "deletions": 5}, "files": [{"sha": "ae7766eb0a0255ab71c222c7d7084e578493e08f", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a67186a2461e6644e36f673795983484aa22fad/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a67186a2461e6644e36f673795983484aa22fad/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=2a67186a2461e6644e36f673795983484aa22fad", "patch": "@@ -1,3 +1,8 @@\n+2006-04-28  Andreas Tobler  <a.tobler@schweiz.ch>\n+\n+\t* configure.ac: Add an additional checks for dladdr and dlopen on dld.\n+\t* configure: Rebuilt.\n+\n 2006-04-25  Tom Tromey  <tromey@redhat.com>\n \n \t* gnu/gcj/runtime/natSharedLibLoader.cc: Include gc.h later."}, {"sha": "6361ecfb32e4e08ec39b6519cece7f20036bf4c0", "filename": "libjava/configure", "status": "modified", "additions": 162, "deletions": 1, "changes": 163, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a67186a2461e6644e36f673795983484aa22fad/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a67186a2461e6644e36f673795983484aa22fad/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=2a67186a2461e6644e36f673795983484aa22fad", "patch": "@@ -10036,6 +10036,7 @@ fi\n \n done\n \n+   # Do an additional check on dld, HP-UX for example has dladdr in libdld.sl\n    echo \"$as_me:$LINENO: checking for dladdr in -ldl\" >&5\n echo $ECHO_N \"checking for dladdr in -ldl... $ECHO_C\" >&6\n if test \"${ac_cv_lib_dl_dladdr+set}\" = set; then\n@@ -10112,6 +10113,86 @@ cat >>confdefs.h <<\\_ACEOF\n #define HAVE_DLADDR 1\n _ACEOF\n \n+else\n+\n+       echo \"$as_me:$LINENO: checking for dladdr in -ldld\" >&5\n+echo $ECHO_N \"checking for dladdr in -ldld... $ECHO_C\" >&6\n+if test \"${ac_cv_lib_dld_dladdr+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  ac_check_lib_save_LIBS=$LIBS\n+LIBS=\"-ldld  $LIBS\"\n+if test x$gcc_no_link = xyes; then\n+  { { echo \"$as_me:$LINENO: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&5\n+echo \"$as_me: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&2;}\n+   { (exit 1); exit 1; }; }\n+fi\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+#ifdef __cplusplus\n+extern \"C\"\n+#endif\n+/* We use char because int might match the return type of a gcc2\n+   builtin and then its argument prototype would still apply.  */\n+char dladdr ();\n+int\n+main ()\n+{\n+dladdr ();\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_cv_lib_dld_dladdr=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_cv_lib_dld_dladdr=no\n+fi\n+rm -f conftest.err conftest.$ac_objext \\\n+      conftest$ac_exeext conftest.$ac_ext\n+LIBS=$ac_check_lib_save_LIBS\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_lib_dld_dladdr\" >&5\n+echo \"${ECHO_T}$ac_cv_lib_dld_dladdr\" >&6\n+if test $ac_cv_lib_dld_dladdr = yes; then\n+\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define HAVE_DLADDR 1\n+_ACEOF\n+\n+fi\n+\n fi\n \n \n@@ -12949,7 +13030,7 @@ done\n echo \"$as_me: error: memcpy is required\" >&2;}\n    { (exit 1); exit 1; }; }\n    fi\n-\n+   # Do an additional check on dld, HP-UX for example has dlopen in libdld.sl\n    echo \"$as_me:$LINENO: checking for dlopen in -ldl\" >&5\n echo $ECHO_N \"checking for dlopen in -ldl... $ECHO_C\" >&6\n if test \"${ac_cv_lib_dl_dlopen+set}\" = set; then\n@@ -13026,6 +13107,86 @@ cat >>confdefs.h <<\\_ACEOF\n #define HAVE_DLOPEN 1\n _ACEOF\n \n+else\n+\n+       echo \"$as_me:$LINENO: checking for dlopen in -ldld\" >&5\n+echo $ECHO_N \"checking for dlopen in -ldld... $ECHO_C\" >&6\n+if test \"${ac_cv_lib_dld_dlopen+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  ac_check_lib_save_LIBS=$LIBS\n+LIBS=\"-ldld  $LIBS\"\n+if test x$gcc_no_link = xyes; then\n+  { { echo \"$as_me:$LINENO: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&5\n+echo \"$as_me: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&2;}\n+   { (exit 1); exit 1; }; }\n+fi\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+#ifdef __cplusplus\n+extern \"C\"\n+#endif\n+/* We use char because int might match the return type of a gcc2\n+   builtin and then its argument prototype would still apply.  */\n+char dlopen ();\n+int\n+main ()\n+{\n+dlopen ();\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_cv_lib_dld_dlopen=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_cv_lib_dld_dlopen=no\n+fi\n+rm -f conftest.err conftest.$ac_objext \\\n+      conftest$ac_exeext conftest.$ac_ext\n+LIBS=$ac_check_lib_save_LIBS\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_lib_dld_dlopen\" >&5\n+echo \"${ECHO_T}$ac_cv_lib_dld_dlopen\" >&6\n+if test $ac_cv_lib_dld_dlopen = yes; then\n+\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define HAVE_DLOPEN 1\n+_ACEOF\n+\n+fi\n+\n fi\n \n "}, {"sha": "5732fb21c71378e6dcb232e4cd03bd6f1816277f", "filename": "libjava/configure.ac", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a67186a2461e6644e36f673795983484aa22fad/libjava%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a67186a2461e6644e36f673795983484aa22fad/libjava%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.ac?ref=2a67186a2461e6644e36f673795983484aa22fad", "patch": "@@ -897,9 +897,12 @@ else\n \t\t   inet_pton uname inet_ntoa \\\n \t\t   fork execvp pipe sigaction ftruncate])\n    AC_CHECK_FUNCS(inet_aton inet_addr, break)\n-   AC_CHECK_HEADERS(execinfo.h unistd.h dlfcn.h) \n+   AC_CHECK_HEADERS(execinfo.h unistd.h dlfcn.h)\n+   # Do an additional check on dld, HP-UX for example has dladdr in libdld.sl\n    AC_CHECK_LIB(dl, dladdr, [\n-       AC_DEFINE(HAVE_DLADDR, 1, [Define if you have dladdr()])])\n+       AC_DEFINE(HAVE_DLADDR, 1, [Define if you have dladdr()])], [\n+       AC_CHECK_LIB(dld, dladdr, [\n+       AC_DEFINE(HAVE_DLADDR, 1, [Define if you have dladdr()])])])\n \n    if test x\"$build\" = x\"$host\"; then\n      AC_CHECK_FILES(/proc/self/exe, [\n@@ -1053,9 +1056,11 @@ else\n    if test \"$memcpy_found\" = no; then\n       AC_MSG_ERROR([memcpy is required])\n    fi\n-\n+   # Do an additional check on dld, HP-UX for example has dlopen in libdld.sl\n    AC_CHECK_LIB(dl, dlopen, [\n-       AC_DEFINE(HAVE_DLOPEN, 1, [Define if dlopen is available])])\n+       AC_DEFINE(HAVE_DLOPEN, 1, [Define if dlopen is available])], [\n+       AC_CHECK_LIB(dld, dlopen, [\n+       AC_DEFINE(HAVE_DLOPEN, 1, [Define if dlopen is available])])])\n \n    # Some library-finding code we stole from Tcl.\n    #--------------------------------------------------------------------"}]}