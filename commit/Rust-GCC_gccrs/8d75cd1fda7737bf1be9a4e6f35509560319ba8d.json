{"sha": "8d75cd1fda7737bf1be9a4e6f35509560319ba8d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQ3NWNkMWZkYTc3MzdiZjFiZTlhNGU2ZjM1NTA5NTYwMzE5YmE4ZA==", "commit": {"author": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "2001-05-26T16:17:46Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "2001-05-26T16:17:46Z"}, "message": "This check template is now upgraded for AutoGen5\n\nFrom-SVN: r42632", "tree": {"sha": "8a5b7a85ad3fa7bec9417fa703b87ef2a07913b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a5b7a85ad3fa7bec9417fa703b87ef2a07913b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d75cd1fda7737bf1be9a4e6f35509560319ba8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d75cd1fda7737bf1be9a4e6f35509560319ba8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d75cd1fda7737bf1be9a4e6f35509560319ba8d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d75cd1fda7737bf1be9a4e6f35509560319ba8d/comments", "author": null, "committer": null, "parents": [{"sha": "4950f233fd97b311aa8ab10fb288b8153e3f7543", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4950f233fd97b311aa8ab10fb288b8153e3f7543", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4950f233fd97b311aa8ab10fb288b8153e3f7543"}], "stats": {"total": 72, "additions": 35, "deletions": 37}, "files": [{"sha": "c89b214d91b553ed6dce386418bc657d7673ee53", "filename": "gcc/fixinc/check.tpl", "status": "modified", "additions": 35, "deletions": 37, "changes": 72, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d75cd1fda7737bf1be9a4e6f35509560319ba8d/gcc%2Ffixinc%2Fcheck.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d75cd1fda7737bf1be9a4e6f35509560319ba8d/gcc%2Ffixinc%2Fcheck.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Fcheck.tpl?ref=8d75cd1fda7737bf1be9a4e6f35509560319ba8d", "patch": "@@ -25,53 +25,51 @@ export TARGET_MACHINE DESTDIR SRCDIR FIND_BASE VERBOSE INPUT ORIGDIR\n \n rm -rf ${DESTDIR} ${SRCDIR}\n mkdir ${DESTDIR} ${SRCDIR}\n-\n-( cd ${SRCDIR}\n-  set +e\n-  for f in [=\n-\n-  (shellf \"echo `\n-\n-  for f in %s\n-  do case $f in\n-     */* ) echo $f | sed 's;/[^/]*$;;' ;;\n-     esac\n-  done | sort -u\n-\n-  ` \" (join \" \" (stack \"fix.files\"))  ) =]\n-  do\n-    mkdir $f || mkdir -p $f\n-  done ) > /dev/null 2>&1\n-\n+(\n+[=\n+  (shellf\n+    \"for f in %s\n+     do case $f in\n+        */* ) echo $f | sed 's;/[^/]*$;;' ;;\n+        esac\n+     done | sort -u | \\\n+     while read g\n+     do echo \\\"  mkdir \\\\${SRCDIR}/$g || mkdir -p \\\\${SRCDIR}/$g || exit 1\\\"\n+     done\" (join \" \" (stack \"fix.files\"))  ) =]\n+) 2> /dev/null[= # suppress 'No such file or directory' messages =]\n cd inc\n [=\n+(define sfile \"\")\n+(define dfile \"\")              =][=\n \n-FOR fix =][=\n+FOR fix                        =][=\n \n-  IF (> (count \"test_text\") 1) =]\n-#\n-#  [=hackname=] has [=(count \"test_text\")=] tests\n-#\n-sfile=[=\n-    IF (exist? \"files\") =][=\n-      files[] =][=\n-    ELSE  =]testing.h[=\n-    ENDIF =][=\n-    FOR test_text FROM 1 =]\n-dfile=`dirname $sfile`/[=(string-tr! (get \"hackname\") \"_A-Z\" \"-a-z\")\n-                        =]-[=(for-index)=].h\n-cat >> $sfile <<_HACK_EOF_\n+  IF (> (count \"test_text\") 1) =][=\n+\n+    (set! sfile (if (exist? \"files\") (get \"files[]\") \"testing.h\"))\n+    (set! dfile (string-append\n+          (if (*==* sfile \"/\")\n+              (shellf \"echo \\\"%s\\\"|sed 's,/[^/]*,/,'\" sfile )\n+              \"\" )\n+          (string-tr! (get \"hackname\") \"_A-Z\" \"-a-z\")\n+    )           )              =][=\n+\n+    FOR test_text (for-from 1) =]\n+cat >> [=(. sfile)=] <<_HACK_EOF_\n \n \n #if defined( [=(string-upcase! (get \"hackname\"))=]_CHECK_[=(for-index)=] )\n [=test_text=]\n #endif  /* [=(string-upcase! (get \"hackname\"))=]_CHECK_[=(for-index)=] */\n _HACK_EOF_\n-echo $sfile | ../../fixincl\n-mv -f $sfile $dfile\n-[ -f ${DESTDIR}/$sfile ] && mv ${DESTDIR}/$sfile ${DESTDIR}/$dfile[=\n+echo [=(. sfile)=] | ../../fixincl\n+mv -f [=(. sfile)=] [=(. dfile)=]-[=(for-index)=].h\n+[ -f ${DESTDIR}/[=(. sfile)=] ] && [=#\n+   =]mv ${DESTDIR}/[=(. sfile)=] ${DESTDIR}/[=(. dfile)=]-[=(for-index)=].h[=\n+\n     ENDFOR  test_text =][=\n-  ENDIF               =][=\n+\n+  ENDIF  multi-test   =][=\n \n ENDFOR  fix\n \n@@ -138,7 +136,7 @@ do\n     :\n \n   else\n-    diff -c $f ${TESTBASE}/$f >&2 || :\n+    diff -u $f ${TESTBASE}/$f >&2 || :\n     exitok=false\n   fi\n done"}]}