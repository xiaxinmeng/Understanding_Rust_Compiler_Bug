{"sha": "a71742a8e7089aa9c8f0c3104bb3a84852a99b74", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTcxNzQyYThlNzA4OWFhOWM4ZjBjMzEwNGJiM2E4NDg1MmE5OWI3NA==", "commit": {"author": {"name": "Laurent Guerby", "email": "guerby@acm.org", "date": "2002-04-04T20:19:36Z"}, "committer": {"name": "Laurent Guerby", "email": "guerby@gcc.gnu.org", "date": "2002-04-04T20:19:36Z"}, "message": "make.adb: Implement -margs, remove restriction about file name placement.\n\n2002-04-04  Laurent Guerby  <guerby@acm.org>\n\n\t* make.adb: Implement -margs, remove restriction about file name placement.\n\t* makeusg.adb: Documentation update.\n\t* Makefile.in (TOOLS_FLAGS_TO_PASS): Add VPATH=$(fsrcdir).\n\t* Makefile.in (gnattools3): Comment out, gnatmem does not build without libaddr2line.\n\nFrom-SVN: r51866", "tree": {"sha": "a891ec6673a48e1eecea94c17fd56ad4411321d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a891ec6673a48e1eecea94c17fd56ad4411321d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a71742a8e7089aa9c8f0c3104bb3a84852a99b74", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a71742a8e7089aa9c8f0c3104bb3a84852a99b74", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a71742a8e7089aa9c8f0c3104bb3a84852a99b74", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a71742a8e7089aa9c8f0c3104bb3a84852a99b74/comments", "author": null, "committer": null, "parents": [{"sha": "a4fa73f3592ca4ab0837f5ce8d15556794be26ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4fa73f3592ca4ab0837f5ce8d15556794be26ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4fa73f3592ca4ab0837f5ce8d15556794be26ea"}], "stats": {"total": 40, "additions": 23, "deletions": 17}, "files": [{"sha": "1e89ad8f16e945cbef26cc43e7ae44fb9daf3eb3", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a71742a8e7089aa9c8f0c3104bb3a84852a99b74/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a71742a8e7089aa9c8f0c3104bb3a84852a99b74/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=a71742a8e7089aa9c8f0c3104bb3a84852a99b74", "patch": "@@ -1,3 +1,10 @@\n+2002-04-04  Laurent Guerby  <guerby@acm.org>\n+\n+\t* make.adb: Implement -margs, remove restriction about file name placement.\n+\t* makeusg.adb: Documentation update.\n+\t* Makefile.in (TOOLS_FLAGS_TO_PASS): Add VPATH=$(fsrcdir).\n+\t* Makefile.in (gnattools3): Comment out, gnatmem does not build without libaddr2line.\n+\n 2002-04-04  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* utils.c (create_subprog_decl): Use SET_DECL_ASSEMBLER_NAME."}, {"sha": "8a053144a628d43e3a1381a40b18384111a7c72e", "filename": "gcc/ada/Makefile.in", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a71742a8e7089aa9c8f0c3104bb3a84852a99b74/gcc%2Fada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a71742a8e7089aa9c8f0c3104bb3a84852a99b74/gcc%2Fada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FMakefile.in?ref=a71742a8e7089aa9c8f0c3104bb3a84852a99b74", "patch": "@@ -1593,6 +1593,7 @@ TOOLS_FLAGS_TO_PASS=\t\t\\\n \t\"libsubdir=$(libsubdir)\"\t\\\n \t\"exeext=$(exeext)\"\t\\\n \t\"srcdir=$(fsrcdir)\"\t\\\n+\t\"VPATH=$(fsrcdir)\"      \\\n         \"TOOLS_LIBS=$(TOOLS_LIBS) $(TGT_LIB)\"\t\\\n \t\"GNATMAKE=$(GNATMAKE)\"\t\\\n \t\"GNATLINK=$(GNATLINK)\"\t\\\n@@ -1660,9 +1661,9 @@ gnattools2: ../stamp-tools\n \n # These tools are only built for the native version.\n gnattools3: ../stamp-tools\n-\t$(MAKE) -C tools -f ../Makefile $(TOOLS_FLAGS_TO_PASS) \\\n-\t  TOOLSCASE=native \\\n-\t  top_builddir=../.. ../../gnatmem$(exeext) $(EXTRA_GNATTOOLS)\n+#\t$(MAKE) -C tools -f ../Makefile $(TOOLS_FLAGS_TO_PASS) \\\n+#\t  TOOLSCASE=native \\\n+#\t  top_builddir=../.. ../../gnatmem$(exeext) $(EXTRA_GNATTOOLS)\n \n ../../gnatchop$(exeext):\n \t$(GNATMAKE) -c $(ADA_INCLUDES) gnatchop --GCC=\"$(CC) $(ALL_ADAFLAGS)\""}, {"sha": "80a0f851bbf4e0f0ad85817d529d8ab6a5fb5c4f", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 4, "deletions": 11, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a71742a8e7089aa9c8f0c3104bb3a84852a99b74/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a71742a8e7089aa9c8f0c3104bb3a84852a99b74/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=a71742a8e7089aa9c8f0c3104bb3a84852a99b74", "patch": "@@ -447,14 +447,10 @@ package body Make is\n    --  Set to True after having scanned the file_name for\n    --  switch \"-o file_name\"\n \n-   File_Name_Seen : Boolean := False;\n-   --  Set to true after having seen at least one file name.\n-   --  Used in Scan_Make_Arg only, but must be a global variable.\n-\n    type Make_Program_Type is (None, Compiler, Binder, Linker);\n \n    Program_Args : Make_Program_Type := None;\n-   --  Used to indicate if we are scanning gcc, gnatbind, or gnatbl\n+   --  Used to indicate if we are scanning gnatmake, gcc, gnatbind, or gnatbind\n    --  options within the gnatmake command line.\n    --  Used in Scan_Make_Arg only, but must be a global variable.\n \n@@ -4260,16 +4256,14 @@ package body Make is\n             Argv = \"-cargs\"\n               or else\n             Argv = \"-largs\"\n+              or else\n+            Argv = \"-margs\"\n       then\n-         if not File_Name_Seen then\n-            Fail (\"-cargs, -bargs, -largs \",\n-                  \"must appear after unit or file name\");\n-         end if;\n-\n          case Argv (2) is\n             when 'c' => Program_Args := Compiler;\n             when 'b' => Program_Args := Binder;\n             when 'l' => Program_Args := Linker;\n+            when 'm' => Program_Args := None;\n \n             when others =>\n                raise Program_Error;\n@@ -4674,7 +4668,6 @@ package body Make is\n       --  If not a switch it must be a file name\n \n       else\n-         File_Name_Seen := True;\n          Add_File (Argv);\n       end if;\n    end Scan_Make_Arg;"}, {"sha": "3f061d7f313acf22884453addd4ffc612f2063e5", "filename": "gcc/ada/makeusg.adb", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a71742a8e7089aa9c8f0c3104bb3a84852a99b74/gcc%2Fada%2Fmakeusg.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a71742a8e7089aa9c8f0c3104bb3a84852a99b74/gcc%2Fada%2Fmakeusg.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakeusg.adb?ref=a71742a8e7089aa9c8f0c3104bb3a84852a99b74", "patch": "@@ -39,11 +39,11 @@ begin\n    Write_Str (\"Usage: \");\n    Osint.Write_Program_Name;\n    Write_Str (\"  opts  name  \");\n-   Write_Str (\"{[-cargs opts] [-bargs opts] [-largs opts]}\");\n+   Write_Str (\"{[-cargs opts] [-bargs opts] [-largs opts] [-margs opts]}\");\n    Write_Eol;\n    Write_Eol;\n-   Write_Str (\"  name  is a file name from which you can omit the\");\n-   Write_Str (\" .adb or .ads suffix\");\n+   Write_Str (\"  name is one or more file name from which you\");\n+   Write_Str (\" can omit the .adb or .ads suffix\");\n    Write_Eol;\n    Write_Eol;\n \n@@ -253,6 +253,11 @@ begin\n    Write_Str (\"  -largs opts   opts are passed to the linker\");\n    Write_Eol;\n \n+   --  Line for -margs\n+\n+   Write_Str (\"  -margs opts   opts are passed to gnatmake\");\n+   Write_Eol;\n+\n    --  Add usage information for gcc\n \n    Usage;"}]}