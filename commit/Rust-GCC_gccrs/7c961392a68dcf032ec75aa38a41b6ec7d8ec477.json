{"sha": "7c961392a68dcf032ec75aa38a41b6ec7d8ec477", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2M5NjEzOTJhNjhkY2YwMzJlYzc1YWEzOGE0MWI2ZWM3ZDhlYzQ3Nw==", "commit": {"author": {"name": "Szabolcs Nagy", "email": "szabolcs.nagy@arm.com", "date": "2016-01-06T14:51:35Z"}, "committer": {"name": "Szabolcs Nagy", "email": "nsz@gcc.gnu.org", "date": "2016-01-06T14:51:35Z"}, "message": "Fix libatomic multilib parallel build (PR other/67627)\n\nThe all-multi target may be built in parallel with the %_.lo\ntargets which generate make dependencies that are parsed during\nthe build of all-multi.\n\nThis patch forces all-multi to only run after the *_.lo targets\nare done.\n\nlibatomic:\n\tPR other/67627\n\t* Makefile.am (all-multi): Add dependency.\n\t* Makefile.in: Regenerate.\n\nFrom-SVN: r232102", "tree": {"sha": "444dfe130e7c482dd2feae37033602b82702fc82", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/444dfe130e7c482dd2feae37033602b82702fc82"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c961392a68dcf032ec75aa38a41b6ec7d8ec477", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c961392a68dcf032ec75aa38a41b6ec7d8ec477", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c961392a68dcf032ec75aa38a41b6ec7d8ec477", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c961392a68dcf032ec75aa38a41b6ec7d8ec477/comments", "author": {"login": "nsz-arm", "id": 30925343, "node_id": "MDQ6VXNlcjMwOTI1MzQz", "avatar_url": "https://avatars.githubusercontent.com/u/30925343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nsz-arm", "html_url": "https://github.com/nsz-arm", "followers_url": "https://api.github.com/users/nsz-arm/followers", "following_url": "https://api.github.com/users/nsz-arm/following{/other_user}", "gists_url": "https://api.github.com/users/nsz-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/nsz-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nsz-arm/subscriptions", "organizations_url": "https://api.github.com/users/nsz-arm/orgs", "repos_url": "https://api.github.com/users/nsz-arm/repos", "events_url": "https://api.github.com/users/nsz-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/nsz-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0c3e5dd1e6efc0c30d679ac2c57ab12f86c6c5af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c3e5dd1e6efc0c30d679ac2c57ab12f86c6c5af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c3e5dd1e6efc0c30d679ac2c57ab12f86c6c5af"}], "stats": {"total": 26, "additions": 20, "deletions": 6}, "files": [{"sha": "f476a6fa8b43ce2710ec8b49e64991d405b416d5", "filename": "libatomic/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c961392a68dcf032ec75aa38a41b6ec7d8ec477/libatomic%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c961392a68dcf032ec75aa38a41b6ec7d8ec477/libatomic%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libatomic%2FChangeLog?ref=7c961392a68dcf032ec75aa38a41b6ec7d8ec477", "patch": "@@ -1,3 +1,9 @@\n+2016-01-06  Szabolcs Nagy  <szabolcs.nagy@arm.com>\n+\n+\tPR other/67627\n+\t* Makefile.am (all-multi): Add dependency.\n+\t* Makefile.in: Regenerate.\n+\n 2016-01-04  Jakub Jelinek  <jakub@redhat.com>\n \n \tUpdate copyright years."}, {"sha": "b35124428509cf71c862ab2b8a64219361cebfc2", "filename": "libatomic/Makefile.am", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c961392a68dcf032ec75aa38a41b6ec7d8ec477/libatomic%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c961392a68dcf032ec75aa38a41b6ec7d8ec477/libatomic%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libatomic%2FMakefile.am?ref=7c961392a68dcf032ec75aa38a41b6ec7d8ec477", "patch": "@@ -139,3 +139,10 @@ endif\n \n libatomic_convenience_la_SOURCES = $(libatomic_la_SOURCES)\n libatomic_convenience_la_LIBADD = $(libatomic_la_LIBADD)\n+\n+# Override the automake generated all-multi rule to guarantee that all-multi\n+# is not run in parallel with the %_.lo rules which generate $(DEPDIR)/*.Ppo\n+# makefile fragments to avoid broken *.Ppo getting included into the Makefile\n+# when it is reloaded during the build of all-multi.\n+all-multi: $(libatomic_la_LIBADD)\n+\t$(MULTIDO) $(AM_MAKEFLAGS) DO=all multi-do # $(MAKE)"}, {"sha": "a083d8702e44b3c3622db87828dac86cb622f5cf", "filename": "libatomic/Makefile.in", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c961392a68dcf032ec75aa38a41b6ec7d8ec477/libatomic%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c961392a68dcf032ec75aa38a41b6ec7d8ec477/libatomic%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libatomic%2FMakefile.in?ref=7c961392a68dcf032ec75aa38a41b6ec7d8ec477", "patch": "@@ -496,12 +496,6 @@ clean-libtool:\n \n distclean-libtool:\n \t-rm -f libtool config.lt\n-\n-# GNU Make needs to see an explicit $(MAKE) variable in the command it\n-# runs to enable its job server during parallel builds.  Hence the\n-# comments below.\n-all-multi:\n-\t$(MULTIDO) $(AM_MAKEFLAGS) DO=all multi-do # $(MAKE)\n install-multi:\n \t$(MULTIDO) $(AM_MAKEFLAGS) DO=install multi-do # $(MAKE)\n \n@@ -800,6 +794,13 @@ vpath % $(strip $(search_path))\n %_.lo: Makefile\n \t$(LTCOMPILE) $(M_DEPS) $(M_SIZE) $(M_IFUNC) -c -o $@ $(M_SRC)\n \n+# Override the automake generated all-multi rule to guarantee that all-multi\n+# is not run in parallel with the %_.lo rules which generate $(DEPDIR)/*.Ppo\n+# makefile fragments to avoid broken *.Ppo getting included into the Makefile\n+# when it is reloaded during the build of all-multi.\n+all-multi: $(libatomic_la_LIBADD)\n+\t$(MULTIDO) $(AM_MAKEFLAGS) DO=all multi-do # $(MAKE)\n+\n # Tell versions [3.59,3.63) of GNU make to not export all variables.\n # Otherwise a system limit (for SysV at least) may be exceeded.\n .NOEXPORT:"}]}