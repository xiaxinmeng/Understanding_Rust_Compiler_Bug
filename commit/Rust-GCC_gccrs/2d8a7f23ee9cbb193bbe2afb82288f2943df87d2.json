{"sha": "2d8a7f23ee9cbb193bbe2afb82288f2943df87d2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQ4YTdmMjNlZTljYmIxOTNiYmUyYWZiODIyODhmMjk0M2RmODdkMg==", "commit": {"author": {"name": "Danny Smith", "email": "dannysmith@users.sourceforge.net", "date": "2005-03-30T09:58:48Z"}, "committer": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2005-03-30T09:58:48Z"}, "message": "backport: tlink.c (recompile_files): Do not assume that \"rename\" can overwrite an existing file.\n\n\tMerge from csl-arm-branch.\n\t2004-02-12  Mark Mitchell  <mark@codesourcery.com>\n\n\t* tlink.c (recompile_files): Do not assume that \"rename\" can\n\toverwrite an existing file.\n\nFrom-SVN: r97252", "tree": {"sha": "bce791a3c35ae1160381c46c5016b45ddd7e3328", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bce791a3c35ae1160381c46c5016b45ddd7e3328"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d8a7f23ee9cbb193bbe2afb82288f2943df87d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d8a7f23ee9cbb193bbe2afb82288f2943df87d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d8a7f23ee9cbb193bbe2afb82288f2943df87d2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d8a7f23ee9cbb193bbe2afb82288f2943df87d2/comments", "author": null, "committer": null, "parents": [{"sha": "9ecbc8f49fcaf0a5864df7b07ead3369ccf9c07b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ecbc8f49fcaf0a5864df7b07ead3369ccf9c07b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ecbc8f49fcaf0a5864df7b07ead3369ccf9c07b"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "00025a8002b1e11a8d32f664e4af17218a50f90c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d8a7f23ee9cbb193bbe2afb82288f2943df87d2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d8a7f23ee9cbb193bbe2afb82288f2943df87d2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2d8a7f23ee9cbb193bbe2afb82288f2943df87d2", "patch": "@@ -1,3 +1,11 @@\n+2005-03-31  Danny Smith  <dannysmith@users.sourceforge.net>\n+\n+\tMerge from csl-arm-branch.\n+\t2004-02-12  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* tlink.c (recompile_files): Do not assume that \"rename\" can\n+\toverwrite an existing file.\n+\n 2005-03-31  Paolo Bonzini  <bonzini@gnu.org>\n \n \t* gcc/configure.ac (TL_AC_GNU_MAKE_GCC_LIB_PATH): Remove."}, {"sha": "3fe531af9e7915b2dd8975f7c3df5d07a8705d7c", "filename": "gcc/tlink.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d8a7f23ee9cbb193bbe2afb82288f2943df87d2/gcc%2Ftlink.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d8a7f23ee9cbb193bbe2afb82288f2943df87d2/gcc%2Ftlink.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftlink.c?ref=2d8a7f23ee9cbb193bbe2afb82288f2943df87d2", "patch": "@@ -470,7 +470,13 @@ recompile_files (void)\n \t}\n       fclose (stream);\n       fclose (output);\n-      rename (outname, f->key);\n+      /* On Windows \"rename\" returns -1 and sets ERRNO to EACCESS if\n+\t the new file name already exists.  Therefore, we explicitly\n+\t remove the old file first.  */\n+      if (remove (f->key) == -1)\n+\tfatal_perror (\"removing .rpo file\");\n+      if (rename (outname, f->key) == -1)\n+\tfatal_perror (\"renaming .rpo file\");\n \n       if (!f->args)\n \t{"}]}