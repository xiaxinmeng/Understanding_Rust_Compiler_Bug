{"sha": "3aa07c6de03acb89a44cf480bc4a3cfb0e2365cc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2FhMDdjNmRlMDNhY2I4OWE0NGNmNDgwYmM0YTNjZmIwZTIzNjVjYw==", "commit": {"author": {"name": "Matt Kraai", "email": "kraai@alumni.cmu.edu", "date": "2003-06-05T07:11:39Z"}, "committer": {"name": "Matt Kraai", "email": "kraai@gcc.gnu.org", "date": "2003-06-05T07:11:39Z"}, "message": "* bindgen.adb (Gen_Adafinal_C, Gen_Adainit_C, Gen_Elab_Defs_C)\n\t(Gen_Main_C, Gen_Output_File_C): Generate ISO C.\n\nFrom-SVN: r67478", "tree": {"sha": "d30a851905586e979705d131e41b858257ac23b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d30a851905586e979705d131e41b858257ac23b4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3aa07c6de03acb89a44cf480bc4a3cfb0e2365cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3aa07c6de03acb89a44cf480bc4a3cfb0e2365cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3aa07c6de03acb89a44cf480bc4a3cfb0e2365cc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3aa07c6de03acb89a44cf480bc4a3cfb0e2365cc/comments", "author": null, "committer": null, "parents": [{"sha": "f109386655bfce0251a68cf552aaa6289fa0b5d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f109386655bfce0251a68cf552aaa6289fa0b5d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f109386655bfce0251a68cf552aaa6289fa0b5d2"}], "stats": {"total": 51, "additions": 23, "deletions": 28}, "files": [{"sha": "ea2e1bd60878aeaf341d6f84c81e2f9d7ba4857a", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aa07c6de03acb89a44cf480bc4a3cfb0e2365cc/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aa07c6de03acb89a44cf480bc4a3cfb0e2365cc/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=3aa07c6de03acb89a44cf480bc4a3cfb0e2365cc", "patch": "@@ -1,3 +1,8 @@\n+2003-06-05  Matt Kraai  <kraai@alumni.cmu.edu>\n+\n+\t* bindgen.adb (Gen_Adafinal_C, Gen_Adainit_C, Gen_Elab_Defs_C)\n+\t(Gen_Main_C, Gen_Output_File_C): Generate ISO C.\n+\n 2003-06-04  Matt Kraai  <kraai@alumni.cmu.edu>\n \n \t* gnat_ug.texi (The GNAT Run-Time Library Builder gnatlbr):"}, {"sha": "6910deba3bbef3ec69447f572c1cbb9e6199e561", "filename": "gcc/ada/bindgen.adb", "status": "modified", "additions": 18, "deletions": 28, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aa07c6de03acb89a44cf480bc4a3cfb0e2365cc/gcc%2Fada%2Fbindgen.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aa07c6de03acb89a44cf480bc4a3cfb0e2365cc/gcc%2Fada%2Fbindgen.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbindgen.adb?ref=3aa07c6de03acb89a44cf480bc4a3cfb0e2365cc", "patch": "@@ -232,7 +232,8 @@ package body Bindgen is\n \n    procedure Gen_Adafinal_C is\n    begin\n-      WBI (\"void \" & Ada_Final_Name.all & \" () {\");\n+      WBI (\"void \" & Ada_Final_Name.all & \" (void)\");\n+      WBI (\"{\");\n       WBI (\"   system__standard_library__adafinal ();\");\n       WBI (\"}\");\n       WBI (\"\");\n@@ -472,7 +473,7 @@ package body Bindgen is\n       Main_Priority : Int renames ALIs.Table (ALIs.First).Main_Priority;\n \n    begin\n-      WBI (\"void \" & Ada_Init_Name.all & \" ()\");\n+      WBI (\"void \" & Ada_Init_Name.all & \" (void)\");\n       WBI (\"{\");\n \n       --  Generate externals for elaboration entities\n@@ -821,7 +822,7 @@ package body Bindgen is\n             Set_Unit_Name;\n             Set_String (\"___elab\");\n             Set_Char (Name_Buffer (Name_Len)); -- 's' or 'b' for spec/body\n-            Set_String (\" PARAMS ((void));\");\n+            Set_String (\" (void);\");\n             Write_Statement_Buffer;\n          end if;\n \n@@ -1340,7 +1341,7 @@ package body Bindgen is\n       --  Normal case with command line arguments present\n \n       else\n-         Set_String (\" (argc, argv, envp)\");\n+         Set_String (\" (int argc, char **argv, char **envp)\");\n       end if;\n \n       Write_Statement_Buffer;\n@@ -1357,9 +1358,6 @@ package body Bindgen is\n       --  Normal case of arguments present\n \n       else\n-         WBI (\"    int argc;\");\n-         WBI (\"    char **argv;\");\n-         WBI (\"    char **envp;\");\n          WBI (\"{\");\n \n          --  Generate a reference to __gnat_ada_main_program_name. This symbol\n@@ -1984,30 +1982,22 @@ package body Bindgen is\n \n       Resolve_Binder_Options;\n \n-      WBI (\"#ifdef __STDC__\");\n-      WBI (\"#define PARAMS(paramlist) paramlist\");\n-      WBI (\"#else\");\n-      WBI (\"#define PARAMS(paramlist) ()\");\n-      WBI (\"#endif\");\n-      WBI (\"\");\n-\n-      WBI (\"extern void __gnat_set_globals \");\n-      WBI (\" PARAMS ((int, int, int, int, int, int, const char *,\");\n-      WBI (\"          int, int, int));\");\n-      WBI (\"extern void \" & Ada_Final_Name.all & \" PARAMS ((void));\");\n-      WBI (\"extern void \" & Ada_Init_Name.all & \" PARAMS ((void));\");\n+      WBI (\"extern void __gnat_set_globals (int, int, int, int, int, int,\");\n+      WBI (\"                                const char *, int, int, int);\");\n+      WBI (\"extern void \" & Ada_Final_Name.all & \" (void);\");\n+      WBI (\"extern void \" & Ada_Init_Name.all & \" (void);\");\n \n-      WBI (\"extern void system__standard_library__adafinal PARAMS ((void));\");\n+      WBI (\"extern void system__standard_library__adafinal (void);\");\n \n       if not No_Main_Subprogram then\n-         WBI (\"extern int main PARAMS ((int, char **, char **));\");\n+         WBI (\"extern int main (int, char **, char **);\");\n          if Hostparm.OpenVMS then\n-            WBI (\"extern void __posix_exit PARAMS ((int));\");\n+            WBI (\"extern void __posix_exit (int);\");\n          else\n-            WBI (\"extern void exit PARAMS ((int));\");\n+            WBI (\"extern void exit (int);\");\n          end if;\n \n-         WBI (\"extern void __gnat_break_start PARAMS ((void));\");\n+         WBI (\"extern void __gnat_break_start (void);\");\n          Set_String (\"extern \");\n \n          if ALIs.Table (ALIs.First).Main_Program = Proc then\n@@ -2018,14 +2008,14 @@ package body Bindgen is\n \n          Get_Name_String (Units.Table (First_Unit_Entry).Uname);\n          Set_Main_Program_Name;\n-         Set_String (\" PARAMS ((void));\");\n+         Set_String (\" (void);\");\n          Write_Statement_Buffer;\n       end if;\n \n       if not No_Run_Time_Specified then\n-         WBI (\"extern void __gnat_initialize PARAMS ((void));\");\n-         WBI (\"extern void __gnat_finalize PARAMS ((void));\");\n-         WBI (\"extern void __gnat_install_handler PARAMS ((void));\");\n+         WBI (\"extern void __gnat_initialize (void);\");\n+         WBI (\"extern void __gnat_finalize (void);\");\n+         WBI (\"extern void __gnat_install_handler (void);\");\n       end if;\n \n       WBI (\"\");"}]}