{"sha": "a61ae535c3e79a446d525fd7205049f407e0464c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTYxYWU1MzVjM2U3OWE0NDZkNTI1ZmQ3MjA1MDQ5ZjQwN2UwNDY0Yw==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2019-02-14T14:10:25Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2019-02-14T14:10:25Z"}, "message": "Add std::timespec and std::timespec_get for C++17\n\n\t* configure.ac: Check for C11 timespec_get function.\n\t* crossconfig.m4 (freebsd, linux, gnu, cygwin, solaris, netbsd)\n\t(openbsd): Likewise\n\t* config.h.in: Regenerate.\n\t* configure: Regenerate.\n\t* include/c_global/ctime (timespec, timespec_get): Add to namespace\n\tstd for C++17 and up.\n\nFrom-SVN: r268879", "tree": {"sha": "fc093c17dad61380775eff93003a6f62f3442861", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc093c17dad61380775eff93003a6f62f3442861"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a61ae535c3e79a446d525fd7205049f407e0464c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a61ae535c3e79a446d525fd7205049f407e0464c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a61ae535c3e79a446d525fd7205049f407e0464c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a61ae535c3e79a446d525fd7205049f407e0464c/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f4dcbf7cd8c60457ab9b156017db6e39293657b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f4dcbf7cd8c60457ab9b156017db6e39293657b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f4dcbf7cd8c60457ab9b156017db6e39293657b"}], "stats": {"total": 72, "additions": 72, "deletions": 0}, "files": [{"sha": "932b80716ba4d9cdba8568f95aa56b23d5f3f5b5", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=a61ae535c3e79a446d525fd7205049f407e0464c", "patch": "@@ -1,5 +1,13 @@\n 2019-02-14  Jonathan Wakely  <jwakely@redhat.com>\n \n+\t* configure.ac: Check for C11 timespec_get function.\n+\t* crossconfig.m4 (freebsd, linux, gnu, cygwin, solaris, netbsd)\n+\t(openbsd): Likewise\n+\t* config.h.in: Regenerate.\n+\t* configure: Regenerate.\n+\t* include/c_global/ctime (timespec, timespec_get): Add to namespace\n+\tstd for C++17 and up.\n+\n \t* doc/xml/manual/intro.xml: Document LWG 2537 status.\n \t* include/bits/stl_queue.h\n \t(priority_queue(const Compare&, const Container&, const Alloc&))"}, {"sha": "034d91b3a5f931ed7ebf5b92ee87eb3e9e45c04c", "filename": "libstdc++-v3/config.h.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig.h.in?ref=a61ae535c3e79a446d525fd7205049f407e0464c", "patch": "@@ -508,6 +508,9 @@\n /* Define to 1 if you have the <tgmath.h> header file. */\n #undef HAVE_TGMATH_H\n \n+/* Define to 1 if you have the `timespec_get' function. */\n+#undef HAVE_TIMESPEC_GET\n+\n /* Define to 1 if the target supports thread-local storage. */\n #undef HAVE_TLS\n "}, {"sha": "857f886571ec5b7fd46d7a542113cbcb0a9c9db4", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=a61ae535c3e79a446d525fd7205049f407e0464c", "patch": "@@ -28428,6 +28428,19 @@ if test \"x$ac_cv_func__wfopen\" = xyes; then :\n #define HAVE__WFOPEN 1\n _ACEOF\n \n+fi\n+done\n+\n+\n+  # C11 functions for C++17 library\n+  for ac_func in timespec_get\n+do :\n+  ac_fn_c_check_func \"$LINENO\" \"timespec_get\" \"ac_cv_func_timespec_get\"\n+if test \"x$ac_cv_func_timespec_get\" = xyes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define HAVE_TIMESPEC_GET 1\n+_ACEOF\n+\n fi\n done\n \n@@ -53613,6 +53626,17 @@ if eval test \\\"x\\$\"$as_ac_var\"\\\" = x\"yes\"; then :\n #define `$as_echo \"HAVE_$ac_func\" | $as_tr_cpp` 1\n _ACEOF\n \n+fi\n+done\n+\n+    for ac_func in timespec_get\n+do :\n+  ac_fn_c_check_func \"$LINENO\" \"timespec_get\" \"ac_cv_func_timespec_get\"\n+if test \"x$ac_cv_func_timespec_get\" = xyes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define HAVE_TIMESPEC_GET 1\n+_ACEOF\n+\n fi\n done\n \n@@ -60232,6 +60256,17 @@ _ACEOF\n fi\n done\n \n+    for ac_func in timespec_get\n+do :\n+  ac_fn_c_check_func \"$LINENO\" \"timespec_get\" \"ac_cv_func_timespec_get\"\n+if test \"x$ac_cv_func_timespec_get\" = xyes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define HAVE_TIMESPEC_GET 1\n+_ACEOF\n+\n+fi\n+done\n+\n \n \n \n@@ -66542,6 +66577,17 @@ if eval test \\\"x\\$\"$as_ac_var\"\\\" = x\"yes\"; then :\n #define `$as_echo \"HAVE_$ac_func\" | $as_tr_cpp` 1\n _ACEOF\n \n+fi\n+done\n+\n+    for ac_func in timespec_get\n+do :\n+  ac_fn_c_check_func \"$LINENO\" \"timespec_get\" \"ac_cv_func_timespec_get\"\n+if test \"x$ac_cv_func_timespec_get\" = xyes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define HAVE_TIMESPEC_GET 1\n+_ACEOF\n+\n fi\n done\n "}, {"sha": "6c98f27044170bb08507c07b69b01fbc899d0ece", "filename": "libstdc++-v3/configure.ac", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure.ac?ref=a61ae535c3e79a446d525fd7205049f407e0464c", "patch": "@@ -265,6 +265,9 @@ if $GLIBCXX_IS_NATIVE; then\n   AC_CHECK_FUNCS(aligned_alloc posix_memalign memalign _aligned_malloc)\n   AC_CHECK_FUNCS(_wfopen)\n \n+  # C11 functions for C++17 library\n+  AC_CHECK_FUNCS(timespec_get)\n+\n   # For iconv support.\n   AM_ICONV\n "}, {"sha": "4a3030080534b5fa99752485ac654cb0726efa06", "filename": "libstdc++-v3/crossconfig.m4", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2Fcrossconfig.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2Fcrossconfig.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fcrossconfig.m4?ref=a61ae535c3e79a446d525fd7205049f407e0464c", "patch": "@@ -135,6 +135,7 @@ case \"${host}\" in\n     fi\n     AC_CHECK_FUNCS(__cxa_thread_atexit)\n     AC_CHECK_FUNCS(aligned_alloc posix_memalign memalign _aligned_malloc)\n+    AC_CHECK_FUNCS(timespec_get)\n     ;;\n \n   *-fuchsia*)\n@@ -194,6 +195,7 @@ case \"${host}\" in\n     GCC_CHECK_TLS\n     AC_CHECK_FUNCS(__cxa_thread_atexit_impl)\n     AC_CHECK_FUNCS(aligned_alloc posix_memalign memalign _aligned_malloc)\n+    AC_CHECK_FUNCS(timespec_get)\n     AM_ICONV\n     ;;\n   *-mingw32*)\n@@ -221,6 +223,7 @@ case \"${host}\" in\n       AC_DEFINE(HAVE_ISNANL)\n     fi\n     AC_CHECK_FUNCS(aligned_alloc posix_memalign memalign _aligned_malloc)\n+    AC_CHECK_FUNCS(timespec_get)\n     ;;\n   *-qnx6.1* | *-qnx6.2*)\n     SECTION_FLAGS='-ffunction-sections -fdata-sections'"}, {"sha": "685c821b5778c4cde2f740d3e4e91cd4c3c2a9e6", "filename": "libstdc++-v3/include/c_global/ctime", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fctime", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a61ae535c3e79a446d525fd7205049f407e0464c/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fctime", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fctime?ref=a61ae535c3e79a446d525fd7205049f407e0464c", "patch": "@@ -72,4 +72,13 @@ namespace std\n   using ::strftime;\n } // namespace\n \n+#if __cplusplus >= 201703L && defined(_GLIBCXX_HAVE_TIMESPEC_GET)\n+#undef timespec_get\n+namespace std\n+{\n+  using ::timespec;\n+  using ::timespec_get;\n+} // namespace std\n+#endif\n+\n #endif"}]}