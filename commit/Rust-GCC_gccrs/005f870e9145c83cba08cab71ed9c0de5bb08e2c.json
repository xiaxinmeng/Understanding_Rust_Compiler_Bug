{"sha": "005f870e9145c83cba08cab71ed9c0de5bb08e2c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDA1Zjg3MGU5MTQ1YzgzY2JhMDhjYWI3MWVkOWMwZGU1YmIwOGUyYw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-10-09T15:06:46Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-10-09T15:06:46Z"}, "message": "[Ada] Minor tweaks to suppress warnings\n\n2018-10-09  Eric Botcazou  <ebotcazou@adacore.com>\n\ngcc/ada/\n\n\t* adaint.c (__gnat_get_executable_suffix_ptr): Add new line.\n\t(__gnat_locate_exec): Check that HOST_EXECUTABLE_SUFFIX is not\n\tempty before doing a string search for it.\n\t* socket.c (ATTRIBUTE_UNUSED): Define.\n\t(__gnat_disable_sigpipe): Add ATTRIBUTE_UNUSED on parameter.\n\t* terminals.c (ATTRIBUTE_UNUSED): Move around.\n\t(__gnat_setup_child_communication): Add ATTRIBUTE_UNUSED on\n\tparameter.\n\t(__gnat_send_header): Add ATTRIBUTE_UNUSED on parameters.\n\nFrom-SVN: r264982", "tree": {"sha": "24092813a3bc51a0549f2115239c80f287591877", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24092813a3bc51a0549f2115239c80f287591877"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/005f870e9145c83cba08cab71ed9c0de5bb08e2c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/005f870e9145c83cba08cab71ed9c0de5bb08e2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/005f870e9145c83cba08cab71ed9c0de5bb08e2c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/005f870e9145c83cba08cab71ed9c0de5bb08e2c/comments", "author": null, "committer": null, "parents": [{"sha": "ea891b439e876000d139e45f44c49b9436d195a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea891b439e876000d139e45f44c49b9436d195a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea891b439e876000d139e45f44c49b9436d195a4"}], "stats": {"total": 36, "additions": 27, "deletions": 9}, "files": [{"sha": "d393c453eefddb41022fb464aa3730489947c392", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/005f870e9145c83cba08cab71ed9c0de5bb08e2c/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/005f870e9145c83cba08cab71ed9c0de5bb08e2c/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=005f870e9145c83cba08cab71ed9c0de5bb08e2c", "patch": "@@ -1,3 +1,15 @@\n+2018-10-09  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* adaint.c (__gnat_get_executable_suffix_ptr): Add new line.\n+\t(__gnat_locate_exec): Check that HOST_EXECUTABLE_SUFFIX is not\n+\tempty before doing a string search for it.\n+\t* socket.c (ATTRIBUTE_UNUSED): Define.\n+\t(__gnat_disable_sigpipe): Add ATTRIBUTE_UNUSED on parameter.\n+\t* terminals.c (ATTRIBUTE_UNUSED): Move around.\n+\t(__gnat_setup_child_communication): Add ATTRIBUTE_UNUSED on\n+\tparameter.\n+\t(__gnat_send_header): Add ATTRIBUTE_UNUSED on parameters.\n+\n 2018-10-09  Yannick Moy  <moy@adacore.com>\n \n \t* sem_prag.adb (Process_Compile_Time_Warning_Or_Error): Rewrite"}, {"sha": "88500a6e027173959b230f7d3482fe6d101107bf", "filename": "gcc/ada/adaint.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/005f870e9145c83cba08cab71ed9c0de5bb08e2c/gcc%2Fada%2Fadaint.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/005f870e9145c83cba08cab71ed9c0de5bb08e2c/gcc%2Fada%2Fadaint.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fadaint.c?ref=005f870e9145c83cba08cab71ed9c0de5bb08e2c", "patch": "@@ -662,6 +662,7 @@ void\n __gnat_get_executable_suffix_ptr (int *len, const char **value)\n {\n   *value = HOST_EXECUTABLE_SUFFIX;\n+\n   if (!*value)\n     *len = 0;\n   else\n@@ -2893,12 +2894,12 @@ __gnat_locate_regular_file (char *file_name, char *path_val)\n char *\n __gnat_locate_exec (char *exec_name, char *path_val)\n {\n+  const unsigned int len = strlen (HOST_EXECUTABLE_SUFFIX);\n   char *ptr;\n-  if (!strstr (exec_name, HOST_EXECUTABLE_SUFFIX))\n+\n+  if (len > 0 && !strstr (exec_name, HOST_EXECUTABLE_SUFFIX))\n     {\n-      char *full_exec_name =\n-        (char *) alloca\n-\t  (strlen (exec_name) + strlen (HOST_EXECUTABLE_SUFFIX) + 1);\n+      char *full_exec_name = (char *) alloca (strlen (exec_name) + len + 1);\n \n       strcpy (full_exec_name, exec_name);\n       strcat (full_exec_name, HOST_EXECUTABLE_SUFFIX);"}, {"sha": "ed5b8dff04b1c09a2b705de5e28269460851c7a9", "filename": "gcc/ada/socket.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/005f870e9145c83cba08cab71ed9c0de5bb08e2c/gcc%2Fada%2Fsocket.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/005f870e9145c83cba08cab71ed9c0de5bb08e2c/gcc%2Fada%2Fsocket.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsocket.c?ref=005f870e9145c83cba08cab71ed9c0de5bb08e2c", "patch": "@@ -31,6 +31,8 @@\n \n /*  This file provides a portable binding to the sockets API                */\n \n+#define ATTRIBUTE_UNUSED __attribute__((unused))\n+\n /* Ensure access to errno is thread safe.  */\n #define _REENTRANT\n #define _THREAD_SAFE\n@@ -95,7 +97,7 @@ extern int  __gnat_inet_pton (int, const char *, void *);\n /* Disable the sending of SIGPIPE for writes on a broken stream */\n \n void\n-__gnat_disable_sigpipe (int fd)\n+__gnat_disable_sigpipe (int fd ATTRIBUTE_UNUSED)\n {\n #ifdef SO_NOSIGPIPE\n   int val = 1;"}, {"sha": "b25aadbe6b082b8ad20824bae374385e58babee1", "filename": "gcc/ada/terminals.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/005f870e9145c83cba08cab71ed9c0de5bb08e2c/gcc%2Fada%2Fterminals.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/005f870e9145c83cba08cab71ed9c0de5bb08e2c/gcc%2Fada%2Fterminals.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fterminals.c?ref=005f870e9145c83cba08cab71ed9c0de5bb08e2c", "patch": "@@ -29,13 +29,13 @@\n  *                                                                          *\n  ****************************************************************************/\n \n+#define ATTRIBUTE_UNUSED __attribute__((unused))\n+\n /* First all usupported platforms. Add stubs for exported routines. */\n \n #if defined (VMS) || defined (__vxworks) || defined (__Lynx__) \\\n   || defined (__ANDROID__) || defined (__PikeOS__) || defined(__DJGPP__)\n \n-#define ATTRIBUTE_UNUSED __attribute__((unused))\n-\n void *\n __gnat_new_tty (void)\n {\n@@ -1412,7 +1412,7 @@ int\n __gnat_setup_child_communication\n    (pty_desc *desc,\n     char **new_argv,\n-    int Use_Pipes)\n+    int Use_Pipes ATTRIBUTE_UNUSED)\n {\n   int status;\n   int pid = getpid ();\n@@ -1588,7 +1588,10 @@ __gnat_free_process (pty_desc** desc)\n \n /* __gnat_send_header - dummy function. this interface is only used on Windows */\n void\n-__gnat_send_header (pty_desc* desc, char header[5], int size, int *ret)\n+__gnat_send_header (pty_desc* desc ATTRIBUTE_UNUSED,\n+\t\t    char header[5] ATTRIBUTE_UNUSED,\n+\t\t    int size ATTRIBUTE_UNUSED,\n+\t\t    int *ret ATTRIBUTE_UNUSED)\n {\n   *ret = 0;\n }"}]}