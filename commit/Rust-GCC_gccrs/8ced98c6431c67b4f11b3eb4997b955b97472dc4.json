{"sha": "8ced98c6431c67b4f11b3eb4997b955b97472dc4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGNlZDk4YzY0MzFjNjdiNGYxMWIzZWI0OTk3Yjk1NWI5NzQ3MmRjNA==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2019-03-21T19:54:51Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2019-03-21T19:54:51Z"}, "message": "[PR72741] The name in a Fortran OpenACC 'routine' directive refers to the containing subroutine or function\n\n\tgcc/fortran/\n\tPR fortran/72741\n\t* openmp.c (gfc_match_oacc_routine): Clarify.\n\tgcc/testsuite/\n\tPR fortran/72741\n\t* gfortran.dg/goacc/routine-module-mod-1.f90: Update.\n\nFrom-SVN: r269856", "tree": {"sha": "49e5818fb5e5068922a4a583bef9c6d6a59d044f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/49e5818fb5e5068922a4a583bef9c6d6a59d044f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8ced98c6431c67b4f11b3eb4997b955b97472dc4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ced98c6431c67b4f11b3eb4997b955b97472dc4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ced98c6431c67b4f11b3eb4997b955b97472dc4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ced98c6431c67b4f11b3eb4997b955b97472dc4/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "64a40f1320c0edc160796266876958ffae8fdd96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64a40f1320c0edc160796266876958ffae8fdd96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64a40f1320c0edc160796266876958ffae8fdd96"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "111e3a266e9b0d3c62c0161c7edc6d4a0aa1c518", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ced98c6431c67b4f11b3eb4997b955b97472dc4/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ced98c6431c67b4f11b3eb4997b955b97472dc4/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=8ced98c6431c67b4f11b3eb4997b955b97472dc4", "patch": "@@ -1,5 +1,8 @@\n 2019-03-21  Thomas Schwinge  <thomas@codesourcery.com>\n \n+\tPR fortran/72741\n+\t* openmp.c (gfc_match_oacc_routine): Clarify.\n+\n \tPR fortran/72741\n \t* module.c (verify_OACC_ROUTINE_LOP_NONE): New function.\n \t(enum ab_attribute): Add AB_OACC_ROUTINE_LOP_GANG,"}, {"sha": "1b1a0b4108fd8f85f9c58c6a9fa2872467b1e8a3", "filename": "gcc/fortran/openmp.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ced98c6431c67b4f11b3eb4997b955b97472dc4/gcc%2Ffortran%2Fopenmp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ced98c6431c67b4f11b3eb4997b955b97472dc4/gcc%2Ffortran%2Fopenmp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fopenmp.c?ref=8ced98c6431c67b4f11b3eb4997b955b97472dc4", "patch": "@@ -2314,6 +2314,9 @@ gfc_match_oacc_routine (void)\n \t  if (st)\n \t    {\n \t      sym = st->n.sym;\n+\t      /* If the name in a 'routine' directive refers to the containing\n+\t\t subroutine or function, then make sure that we'll later handle\n+\t\t this accordingly.  */\n \t      if (gfc_current_ns->proc_name != NULL\n \t\t  && strcmp (sym->name, gfc_current_ns->proc_name->name) == 0)\n \t        sym = NULL;"}, {"sha": "0c94f6bcacf8c0af45fc8c2c8ecec53376d55a1d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ced98c6431c67b4f11b3eb4997b955b97472dc4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ced98c6431c67b4f11b3eb4997b955b97472dc4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8ced98c6431c67b4f11b3eb4997b955b97472dc4", "patch": "@@ -1,5 +1,8 @@\n 2019-03-21  Thomas Schwinge  <thomas@codesourcery.com>\n \n+\tPR fortran/72741\n+\t* gfortran.dg/goacc/routine-module-mod-1.f90: Update.\n+\n \tPR fortran/72741\n \t* gfortran.dg/goacc/routine-module-1.f90: New file.\n \t* gfortran.dg/goacc/routine-module-2.f90: Likewise."}, {"sha": "23c673fe3bd1b20e8d0926bd18ae53dcdbc7f5bb", "filename": "gcc/testsuite/gfortran.dg/goacc/routine-module-mod-1.f90", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ced98c6431c67b4f11b3eb4997b955b97472dc4/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Froutine-module-mod-1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ced98c6431c67b4f11b3eb4997b955b97472dc4/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Froutine-module-mod-1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Froutine-module-mod-1.f90?ref=8ced98c6431c67b4f11b3eb4997b955b97472dc4", "patch": "@@ -18,7 +18,7 @@ end subroutine s_1\n \n   subroutine s_2\n     implicit none\n-    !$acc routine seq\n+    !$acc routine (s_2) seq\n \n     integer :: i\n \n@@ -41,7 +41,7 @@ end subroutine v_1\n \n   subroutine w_1\n     implicit none\n-    !$acc routine worker\n+    !$acc routine (w_1) worker\n \n     integer :: i\n "}]}