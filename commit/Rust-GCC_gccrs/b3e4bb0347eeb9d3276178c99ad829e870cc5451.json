{"sha": "b3e4bb0347eeb9d3276178c99ad829e870cc5451", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNlNGJiMDM0N2VlYjlkMzI3NjE3OGM5OWFkODI5ZTg3MGNjNTQ1MQ==", "commit": {"author": {"name": "Scott Gilbertson", "email": "sgilbertson@gcc.gnu.org", "date": "2003-12-05T22:10:16Z"}, "committer": {"name": "Scott Gilbertson", "email": "sgilbertson@gcc.gnu.org", "date": "2003-12-05T22:10:16Z"}, "message": "GC.java (updateClip): Added rectangles argument.\n\n2003-12-05  Scott Gilbertson  <scottg@mantatest.com>\n\n\t* gnu/gcj/xlib/GC.java (updateClip): Added rectangles argument.\n\t(clip): Removed field\n\t(clipRectangles): New field.\n\t(clone): Use new updateClip.\n\t(setClipRectangles): Use new updateClip.\n\t* gnu/gcj/xlib/natGC.cc (updateClip): Prepare passed rectangles.\n\nFrom-SVN: r74348", "tree": {"sha": "d43341b19fb3c144239db46d91e3cd5c33056c61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d43341b19fb3c144239db46d91e3cd5c33056c61"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3e4bb0347eeb9d3276178c99ad829e870cc5451", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e4bb0347eeb9d3276178c99ad829e870cc5451", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3e4bb0347eeb9d3276178c99ad829e870cc5451", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e4bb0347eeb9d3276178c99ad829e870cc5451/comments", "author": null, "committer": null, "parents": [{"sha": "07a3c905b3608f7631f6e146b77fda01daddaea5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07a3c905b3608f7631f6e146b77fda01daddaea5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07a3c905b3608f7631f6e146b77fda01daddaea5"}], "stats": {"total": 47, "additions": 32, "deletions": 15}, "files": [{"sha": "74c4099708a34eca38ef1f3dc3ed53b167efbb27", "filename": "libjava/ChangeLog", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e4bb0347eeb9d3276178c99ad829e870cc5451/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e4bb0347eeb9d3276178c99ad829e870cc5451/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=b3e4bb0347eeb9d3276178c99ad829e870cc5451", "patch": "@@ -1,3 +1,12 @@\n+2003-12-05  Scott Gilbertson  <scottg@mantatest.com>\n+\n+\t* gnu/gcj/xlib/GC.java (updateClip): Added rectangles argument.\n+\t(clip): Removed field\n+\t(clipRectangles): New field.\n+\t(clone): Use new updateClip.\n+\t(setClipRectangles): Use new updateClip.\n+\t* gnu/gcj/xlib/natGC.cc (updateClip): Prepare passed rectangles.\n+\n 2003-12-04  Michael Koch  <konqueror@gmx.de>\n \n \t* java/io/FilePermission.java:\n@@ -4145,7 +4154,7 @@\n \t(_Jv_BytecodeVerifier): Initialize it.\n \t(~_Jv_BytecodeVerifier): Destroy ref_intersection objects. \n \n-2003-07-24  H. V\ufffdis\ufffdnen  <hvaisane@joyx.joensuu.fi>\n+2003-07-24  H. V\u00e4is\u00e4nen  <hvaisane@joyx.joensuu.fi>\n \n \t* java/text/SimpleDateFormat.java (format) [YEAR_FIELD]: Zero pad\n \tunless field size is 2.\n@@ -7232,7 +7241,7 @@\n \t* java/io/ObjectOutputStream.java\n \t(PutField.put): Doesnt throws anything.\n \n-2003\ufffd03-28  Michael Koch  <konqueror@gmx.de>\n+2003\u00ad03-28  Michael Koch  <konqueror@gmx.de>\n \n \t* java/io/FileOutputStream.java:\n \tMerged class documentation and authors with classpath."}, {"sha": "da427c9ab9dd73cb4e01d4699e87b98559a30cc7", "filename": "libjava/gnu/gcj/xlib/GC.java", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e4bb0347eeb9d3276178c99ad829e870cc5451/libjava%2Fgnu%2Fgcj%2Fxlib%2FGC.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e4bb0347eeb9d3276178c99ad829e870cc5451/libjava%2Fgnu%2Fgcj%2Fxlib%2FGC.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fgcj%2Fxlib%2FGC.java?ref=b3e4bb0347eeb9d3276178c99ad829e870cc5451", "patch": "@@ -45,7 +45,7 @@ public Object clone()\n \t    gcClone.structure = null;\n \t  }\n \tgcClone.initStructure(this);\n-\tgcClone.updateClip();\n+\tgcClone.updateClip(clipRectangles);\n \treturn gcClone;\n       } \n     catch (CloneNotSupportedException ex)\n@@ -107,8 +107,8 @@ public void dispose()\n    */\n   public void setClipRectangles(Rectangle[] rectangles)\n   {\n-    clip = new Clip(rectangles);\n-    updateClip();\n+    clipRectangles = rectangles;\n+    updateClip(clipRectangles);\n   }\n \n   public native void drawString(String text, int x, int y);\n@@ -148,10 +148,10 @@ public Drawable getDrawable()\n     return target;\n   }\n \n-  private native void updateClip();\n+  private native void updateClip(Rectangle[] rectangles);\n \n   private Drawable target;\n   private RawData structure;\n-  private Clip clip;\n+  private Rectangle[] clipRectangles;\n }\n "}, {"sha": "3819da450052a710c972cd4b2d4707c9c7076f13", "filename": "libjava/gnu/gcj/xlib/natGC.cc", "status": "modified", "additions": 16, "deletions": 8, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e4bb0347eeb9d3276178c99ad829e870cc5451/libjava%2Fgnu%2Fgcj%2Fxlib%2FnatGC.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e4bb0347eeb9d3276178c99ad829e870cc5451/libjava%2Fgnu%2Fgcj%2Fxlib%2FnatGC.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fgcj%2Fxlib%2FnatGC.cc?ref=b3e4bb0347eeb9d3276178c99ad829e870cc5451", "patch": "@@ -217,25 +217,33 @@ void gnu::gcj::xlib::GC::putImage(XImage* image,\n   // no fast fail\n }\n \n-void gnu::gcj::xlib::GC::updateClip()\n+void gnu::gcj::xlib::GC::updateClip(AWTRectArray* rectangles)\n {\n-  if (clip == 0)\n-    return;\n+  int numRect = JvGetArrayLength(rectangles);\n+  XRectVector* xrectvector = new XRectVector(numRect);\n   \n+  for (int i=0; i<numRect; i++)\n+  {\n+    AWTRect* awtrect = elements(rectangles)[i];\n+    XRectangle& xrect = (*xrectvector)[i];\n+      \n+    xrect.x      = awtrect->x;\n+    xrect.y      = awtrect->y;\n+    xrect.width  = awtrect->width;\n+    xrect.height = awtrect->height;\n+  }\n+\n   Display* display = target->getDisplay();\n   ::Display* dpy = (::Display*) (display->display);\n   ::GC gc = (::GC) structure;\n-  \n-  XRectVector* xrectvector = (XRectVector*) (clip->xrects);\n-  int numRect = xrectvector->size();\n-  \n+\n   int originX = 0;\n   int originY = 0;\n   int ordering = Unsorted;\n   XSetClipRectangles(dpy, gc, originX, originY,\n \t\t     &(xrectvector->front()), numRect,\n \t\t     ordering);\n-  // no fast fail\n+  delete xrectvector;\n }\n \n void gnu::gcj::xlib::GC::copyArea (gnu::gcj::xlib::Drawable * source, "}]}