{"sha": "d594623ade98699f505a959c91f8f58fc9828255", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDU5NDYyM2FkZTk4Njk5ZjUwNWE5NTljOTFmOGY1OGZjOTgyODI1NQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2004-07-07T20:29:13Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2004-07-07T20:29:13Z"}, "message": "collect2.c (dump_file): Don't call cplus_demangle if HAVE_LD_DEMANGLE is defined.\n\n2004-07-07  H.J. Lu  <hongjiu.lu@intel.com>\n\n\t* collect2.c (dump_file): Don't call cplus_demangle if\n\tHAVE_LD_DEMANGLE is defined.\n\t(main): Pass \"--demangle\" to ld if no_demangle is not 0 and\n\tHAVE_LD_DEMANGLE is defined. Don't set current_demangling_style\n\tif HAVE_LD_DEMANGLE is defined.\n\n\t* configure.ac (--with-demangler-in-ld): Added\n\t(HAVE_LD_DEMANGLE): Define if ld supports --demangle when\n\t--with-demangler-in-ld is used.\n\t* config.in: Regenerated.\n\t* configure: Likewise.\n\nFrom-SVN: r84227", "tree": {"sha": "e6dfd33f5e444278cf6eff5e3e80fc6d94ba1a92", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e6dfd33f5e444278cf6eff5e3e80fc6d94ba1a92"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d594623ade98699f505a959c91f8f58fc9828255", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d594623ade98699f505a959c91f8f58fc9828255", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d594623ade98699f505a959c91f8f58fc9828255", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d594623ade98699f505a959c91f8f58fc9828255/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f0517163a9b573e1e5858490d95787a48c8a4a10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0517163a9b573e1e5858490d95787a48c8a4a10", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0517163a9b573e1e5858490d95787a48c8a4a10"}], "stats": {"total": 188, "additions": 95, "deletions": 93}, "files": [{"sha": "5d5cef42c0dddae4eaafb1c2b98e15303d70630b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d594623ade98699f505a959c91f8f58fc9828255/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d594623ade98699f505a959c91f8f58fc9828255/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d594623ade98699f505a959c91f8f58fc9828255", "patch": "@@ -1,3 +1,17 @@\n+2004-07-07  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* collect2.c (dump_file): Don't call cplus_demangle if\n+\tHAVE_LD_DEMANGLE is defined.\n+\t(main): Pass \"--demangle\" to ld if no_demangle is not 0 and\n+\tHAVE_LD_DEMANGLE is defined. Don't set current_demangling_style\n+\tif HAVE_LD_DEMANGLE is defined.\n+\n+\t* configure.ac (--with-demangler-in-ld): Added\n+\t(HAVE_LD_DEMANGLE): Define if ld supports --demangle when\n+\t--with-demangler-in-ld is used.\n+\t* config.in: Regenerated.\n+\t* configure: Likewise.\n+\n 2004-07-07  Roger Sayle  <roger@eyesopen.com>\n \n \t* config/rs6000/rs6000.c (struct processor_costs): Add new fields"}, {"sha": "79f7885e6e7562feddd8a35031101b3b0e9de106", "filename": "gcc/collect2.c", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d594623ade98699f505a959c91f8f58fc9828255/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d594623ade98699f505a959c91f8f58fc9828255/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=d594623ade98699f505a959c91f8f58fc9828255", "patch": "@@ -491,10 +491,14 @@ dump_file (const char *name)\n \t  if (!strncmp (p, USER_LABEL_PREFIX, strlen (USER_LABEL_PREFIX)))\n \t    p += strlen (USER_LABEL_PREFIX);\n \n+#ifdef HAVE_LD_DEMANGLE\n+\t  result = 0;\n+#else\n \t  if (no_demangle)\n \t    result = 0;\n \t  else\n \t    result = cplus_demangle (p, DMGL_PARAMS | DMGL_ANSI | DMGL_VERBOSE);\n+#endif\n \n \t  if (result)\n \t    {\n@@ -841,8 +845,8 @@ main (int argc, char **argv)\n   /* Do not invoke xcalloc before this point, since locale needs to be\n      set first, in case a diagnostic is issued.  */\n \n-  ld1 = (const char **)(ld1_argv = xcalloc(sizeof (char *), argc+3));\n-  ld2 = (const char **)(ld2_argv = xcalloc(sizeof (char *), argc+10));\n+  ld1 = (const char **)(ld1_argv = xcalloc(sizeof (char *), argc+4));\n+  ld2 = (const char **)(ld2_argv = xcalloc(sizeof (char *), argc+11));\n   object = (const char **)(object_lst = xcalloc(sizeof (char *), argc));\n \n #ifdef DEBUG\n@@ -873,7 +877,9 @@ main (int argc, char **argv)\n   obstack_begin (&temporary_obstack, 0);\n   temporary_firstobj = obstack_alloc (&temporary_obstack, 0);\n \n+#ifndef HAVE_LD_DEMANGLE\n   current_demangling_style = auto_demangling;\n+#endif\n   p = getenv (\"COLLECT_GCC_OPTIONS\");\n   while (p && *p)\n     {\n@@ -1063,6 +1069,10 @@ main (int argc, char **argv)\n   /* After the first file, put in the c++ rt0.  */\n \n   first_file = 1;\n+#ifdef HAVE_LD_DEMANGLE\n+  if (!no_demangle)\n+    *ld1++ = *ld2++ = \"--demangle\";\n+#endif\n   while ((arg = *++argv) != (char *) 0)\n     {\n       *ld1++ = *ld2++ = arg;"}, {"sha": "ab3a67083291117c3c80008597bd773af9e72d29", "filename": "gcc/config.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d594623ade98699f505a959c91f8f58fc9828255/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d594623ade98699f505a959c91f8f58fc9828255/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=d594623ade98699f505a959c91f8f58fc9828255", "patch": "@@ -341,6 +341,9 @@\n /* Define if your linker supports --as-needed and --no-as-needed options. */\n #undef HAVE_LD_AS_NEEDED\n \n+/* Define if your linker supports --demangle option. */\n+#undef HAVE_LD_DEMANGLE\n+\n /* Define if your linker supports --eh-frame-hdr option. */\n #undef HAVE_LD_EH_FRAME_HDR\n "}, {"sha": "3f5a180148cd1b65bc432cb72ff7ab90672d8fe7", "filename": "gcc/configure", "status": "modified", "additions": 40, "deletions": 91, "changes": 131, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d594623ade98699f505a959c91f8f58fc9828255/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d594623ade98699f505a959c91f8f58fc9828255/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=d594623ade98699f505a959c91f8f58fc9828255", "patch": "@@ -309,7 +309,7 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP strict1_warn warn_cflags WERROR nocommon_flag TREEBROWSER EGREP valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN_S LN RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file FORBUILD PACKAGE VERSION USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS CROSS ALL SYSTEM_HEADER_DIR inhibit_libc BUILD_PREFIX BUILD_PREFIX_1 CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 libgcc_visibility GGC zlibdir zlibinc MAINT ANDER BANSHEEINC BANSHEELIB gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir gcc_version gcc_version_full gcc_version_trigger host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure symbolic_link thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines target_noncanonical c_target_objs cxx_target_objs target_cpu_default GMPLIBS GMPINC LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP strict1_warn warn_cflags WERROR nocommon_flag TREEBROWSER EGREP valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN_S RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file FORBUILD PACKAGE VERSION USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS CROSS ALL SYSTEM_HEADER_DIR inhibit_libc BUILD_PREFIX BUILD_PREFIX_1 CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 libgcc_visibility GGC zlibdir zlibinc MAINT ANDER BANSHEEINC BANSHEELIB gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir gcc_version gcc_version_full gcc_version_trigger host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure symbolic_link thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines target_noncanonical c_target_objs cxx_target_objs target_cpu_default GMPLIBS GMPINC LIBOBJS LTLIBOBJS'\n ac_subst_files='language_hooks'\n \n # Initialize some variables set by options.\n@@ -915,6 +915,7 @@ Optional Packages:\n                           (relative to PREFIX) as well as PREFIX/bin\n   --with-gnu-ld           arrange to work with GNU ld.\n   --with-ld               arrange to use the specified ld (full pathname)\n+  --with-demangler-in-ld  try to use demangler in GNU ld.\n   --with-gnu-as           arrange to work with GNU as\n   --with-as               arrange to use the specified as (full pathname)\n   --with-stabs            arrange to use stabs instead of host debug format\n@@ -1734,6 +1735,16 @@ else\n echo \"${ECHO_T}no\" >&6\n fi\n \n+# With demangler in GNU ld\n+\n+# Check whether --with-demangler-in-ld or --without-demangler-in-ld was given.\n+if test \"${with_demangler_in_ld+set}\" = set; then\n+  withval=\"$with_demangler_in_ld\"\n+  demangler_in_ld=\"$with_demangler_in_ld\"\n+else\n+  demangler_in_ld=no\n+fi;\n+\n # ----------------------\n # Find default assembler\n # ----------------------\n@@ -4949,32 +4960,7 @@ echo \"${ECHO_T}no, and neither does ln, so using cp\" >&6\n   fi\n fi\n \n-echo \"$as_me:$LINENO: checking whether ln works\" >&5\n-echo $ECHO_N \"checking whether ln works... $ECHO_C\" >&6\n-if test \"${acx_cv_prog_LN+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  rm -f conftestdata_t\n-echo >conftestdata_f\n-if ln conftestdata_f conftestdata_t 2>/dev/null\n-then\n-  acx_cv_prog_LN=ln\n-else\n-  acx_cv_prog_LN=no\n-fi\n-rm -f conftestdata_f conftestdata_t\n-\n-fi\n-if test $acx_cv_prog_LN = no; then\n-  LN=\"$LN_S\"\n-  echo \"$as_me:$LINENO: result: no, using $LN\" >&5\n-echo \"${ECHO_T}no, using $LN\" >&6\n-else\n-  LN=\"$acx_cv_prog_LN\"\n-  echo \"$as_me:$LINENO: result: yes\" >&5\n-echo \"${ECHO_T}yes\" >&6\n-fi\n-\n+ACX_PROG_LN($LN_S)\n if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"${ac_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}ranlib; ac_word=$2\n@@ -5255,7 +5241,7 @@ if test \"${gcc_cv_prog_makeinfo_modern+set}\" = set; then\n else\n     ac_prog_version=`$MAKEINFO --version 2>&1 |\n                    sed -n 's/^.*GNU texinfo.* \\([0-9][0-9.]*\\).*$/\\1/p'`\n-  echo \"configure:5258: version of makeinfo is $ac_prog_version\" >&5\n+  echo \"configure:5244: version of makeinfo is $ac_prog_version\" >&5\n   case $ac_prog_version in\n     '')     gcc_cv_prog_makeinfo_modern=no;;\n     4.[2-9]*)\n@@ -5687,68 +5673,7 @@ _ACEOF\n \n fi\n \n-echo \"$as_me:$LINENO: checking whether string.h and strings.h may both be included\" >&5\n-echo $ECHO_N \"checking whether string.h and strings.h may both be included... $ECHO_C\" >&6\n-if test \"${gcc_cv_header_string+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-#include <string.h>\n-#include <strings.h>\n-int\n-main ()\n-{\n-\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  gcc_cv_header_string=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-gcc_cv_header_string=no\n-fi\n-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-fi\n-echo \"$as_me:$LINENO: result: $gcc_cv_header_string\" >&5\n-echo \"${ECHO_T}$gcc_cv_header_string\" >&6\n-if test $gcc_cv_header_string = yes; then\n-\n-cat >>confdefs.h <<\\_ACEOF\n-#define STRING_WITH_STRINGS 1\n-_ACEOF\n-\n-fi\n-\n+ACX_HEADER_STRING\n echo \"$as_me:$LINENO: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n echo $ECHO_N \"checking for sys/wait.h that is POSIX.1 compatible... $ECHO_C\" >&6\n if test \"${ac_cv_header_sys_wait_h+set}\" = set; then\n@@ -10928,6 +10853,31 @@ fi\n \n # Target-specific assembler checks.\n \n+if test x\"$demangler_in_ld\" = xyes; then\n+  echo \"$as_me:$LINENO: checking linker --demangle support\" >&5\n+echo $ECHO_N \"checking linker --demangle support... $ECHO_C\" >&6\n+  gcc_cv_ld_demangle=no\n+  if test $in_tree_ld = yes; then\n+    if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 14 -o \"$gcc_cv_gld_major_version\" -gt 2; then \\\n+      gcc_cv_ld_demangle=yes\n+    fi\n+  elif test x$gcc_cv_ld != x -a x\"$gnu_ld\" = xyes; then\n+    # Check if the GNU linker supports --demangle option\n+    if $gcc_cv_ld --help 2>/dev/null | grep no-demangle > /dev/null; then\n+      gcc_cv_ld_demangle=yes\n+    fi\n+  fi\n+  if test x\"$gcc_cv_ld_demangle\" = xyes; then\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define HAVE_LD_DEMANGLE 1\n+_ACEOF\n+\n+  fi\n+  echo \"$as_me:$LINENO: result: $gcc_cv_ld_demangle\" >&5\n+echo \"${ECHO_T}$gcc_cv_ld_demangle\" >&6\n+fi\n+\n case \"$target\" in\n   # All TARGET_ABI_OSF targets.\n   alpha*-*-osf* | alpha*-*-linux* | alpha*-*-*bsd*)\n@@ -12903,7 +12853,6 @@ s,@onestep@,$onestep,;t t\n s,@SET_MAKE@,$SET_MAKE,;t t\n s,@AWK@,$AWK,;t t\n s,@LN_S@,$LN_S,;t t\n-s,@LN@,$LN,;t t\n s,@RANLIB@,$RANLIB,;t t\n s,@ac_ct_RANLIB@,$ac_ct_RANLIB,;t t\n s,@ranlib_flags@,$ranlib_flags,;t t"}, {"sha": "d965c1147b34e89129a126b1787fc716b3f5cfbb", "filename": "gcc/configure.ac", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d594623ade98699f505a959c91f8f58fc9828255/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d594623ade98699f505a959c91f8f58fc9828255/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=d594623ade98699f505a959c91f8f58fc9828255", "patch": "@@ -211,6 +211,12 @@ else\n   AC_MSG_RESULT(no)\n fi\n \n+# With demangler in GNU ld\n+AC_ARG_WITH(demangler-in-ld,\n+[  --with-demangler-in-ld  try to use demangler in GNU ld.],\n+demangler_in_ld=\"$with_demangler_in_ld\",\n+demangler_in_ld=no)\n+\n # ----------------------\n # Find default assembler\n # ----------------------\n@@ -2454,6 +2460,26 @@ fi\n \n # Target-specific assembler checks.\n \n+if test x\"$demangler_in_ld\" = xyes; then\n+  AC_MSG_CHECKING(linker --demangle support)\n+  gcc_cv_ld_demangle=no\n+  if test $in_tree_ld = yes; then\n+    if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 14 -o \"$gcc_cv_gld_major_version\" -gt 2; then \\\n+      gcc_cv_ld_demangle=yes\n+    fi\n+  elif test x$gcc_cv_ld != x -a x\"$gnu_ld\" = xyes; then\n+    # Check if the GNU linker supports --demangle option\n+    if $gcc_cv_ld --help 2>/dev/null | grep no-demangle > /dev/null; then\n+      gcc_cv_ld_demangle=yes\n+    fi\n+  fi\n+  if test x\"$gcc_cv_ld_demangle\" = xyes; then\n+    AC_DEFINE(HAVE_LD_DEMANGLE, 1,\n+[Define if your linker supports --demangle option.])\n+  fi\n+  AC_MSG_RESULT($gcc_cv_ld_demangle)\n+fi\n+\n case \"$target\" in\n   # All TARGET_ABI_OSF targets.\n   alpha*-*-osf* | alpha*-*-linux* | alpha*-*-*bsd*)"}]}