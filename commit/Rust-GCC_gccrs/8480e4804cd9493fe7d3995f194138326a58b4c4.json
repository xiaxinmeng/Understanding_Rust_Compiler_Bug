{"sha": "8480e4804cd9493fe7d3995f194138326a58b4c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODQ4MGU0ODA0Y2Q5NDkzZmU3ZDM5OTVmMTk0MTM4MzI2YTU4YjRjNA==", "commit": {"author": {"name": "Chandrakala Chavva", "email": "cchavva@redhat.com", "date": "2001-02-07T01:05:35Z"}, "committer": {"name": "Chandra Chavva", "email": "cchavva@gcc.gnu.org", "date": "2001-02-07T01:05:35Z"}, "message": "final.c: Revert back my previous changes.\n\n        * final.c: Revert back my previous changes.\n        * output.h: Make profile_label_no extern.\n        * config/rs6000/rs6000.c (output_profile_hook): Use standard functions\n        for generating label.\n\nFrom-SVN: r39506", "tree": {"sha": "0c18211f287a38ff9a4df25afe649a2f53598ab0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c18211f287a38ff9a4df25afe649a2f53598ab0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8480e4804cd9493fe7d3995f194138326a58b4c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8480e4804cd9493fe7d3995f194138326a58b4c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8480e4804cd9493fe7d3995f194138326a58b4c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8480e4804cd9493fe7d3995f194138326a58b4c4/comments", "author": null, "committer": null, "parents": [{"sha": "7739adfb17bdef58039b9c5aef0f33bd5f2fabf5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7739adfb17bdef58039b9c5aef0f33bd5f2fabf5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7739adfb17bdef58039b9c5aef0f33bd5f2fabf5"}], "stats": {"total": 40, "additions": 24, "deletions": 16}, "files": [{"sha": "9c1596c6ea8556ca78a7f2f4a4276b1ce18d3427", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8480e4804cd9493fe7d3995f194138326a58b4c4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8480e4804cd9493fe7d3995f194138326a58b4c4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8480e4804cd9493fe7d3995f194138326a58b4c4", "patch": "@@ -1,3 +1,10 @@\n+2001-02-06  Chandrakala Chavva  <cchavva@redhat.com>\n+\n+\t* final.c: Revert back my previous changes.\n+\t* output.h: Make profile_label_no extern.\n+\t* config/rs6000/rs6000.c (output_profile_hook): Use standard functions\n+\tfor generating label.\n+\n 2001-02-06  Laurynas Biveinis  <lauras@softhome.net>\n \n \t* config/i386/djgpp.h: Add comments about standard paths."}, {"sha": "d64d7772289383f95c416c3ccb6429e834317df2", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 12, "deletions": 15, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8480e4804cd9493fe7d3995f194138326a58b4c4/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8480e4804cd9493fe7d3995f194138326a58b4c4/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=8480e4804cd9493fe7d3995f194138326a58b4c4", "patch": "@@ -7118,24 +7118,21 @@ void\n output_profile_hook (labelno)\n      int labelno;\n {\n+  if (DEFAULT_ABI == ABI_AIX)\n+    {\n+      char buf[30];\n+      char *label_name;\n+      rtx fun;\n \n-   if (profile_flag && DEFAULT_ABI == ABI_AIX)\n-     {\n-       char *buf;\n-       int length = 0;\n-       rtx fun;\n-\n-       labelno += 1;\n-       buf = permalloc (labelno+6);\n-\n-       ASM_GENERATE_INTERNAL_LABEL (buf, \"LP\", labelno);\n-\n-       fun = gen_rtx_SYMBOL_REF (Pmode, buf+1);\n+      labelno += 1;\n \n-       emit_library_call (init_one_libfunc (RS6000_MCOUNT), 0, VOIDmode, 1,\n-                          fun, Pmode, Pmode);\n+      ASM_GENERATE_INTERNAL_LABEL (buf, \"LP\", labelno);\n+      STRIP_NAME_ENCODING (label_name, ggc_strdup (buf));\n+      fun = gen_rtx_SYMBOL_REF (Pmode, label_name);\n \n-      }\n+      emit_library_call (init_one_libfunc (RS6000_MCOUNT), 0, VOIDmode, 1,\n+                         fun, Pmode);\n+    }\n }\n \n /* Write function profiler code. */"}, {"sha": "3a2fc1537c5e22356364a15767c356ef9b2f8ada", "filename": "gcc/final.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8480e4804cd9493fe7d3995f194138326a58b4c4/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8480e4804cd9493fe7d3995f194138326a58b4c4/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=8480e4804cd9493fe7d3995f194138326a58b4c4", "patch": "@@ -205,6 +205,10 @@ char regs_ever_live[FIRST_PSEUDO_REGISTER];\n \n int frame_pointer_needed;\n \n+/* Assign unique numbers to labels generated for profiling.  */\n+\n+int profile_label_no;\n+\n /* Number of unmatched NOTE_INSN_BLOCK_BEG notes we have seen.  */\n \n static int block_depth;"}, {"sha": "d50b795c8c8fbe1ee65565492ca159210f8446fa", "filename": "gcc/output.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8480e4804cd9493fe7d3995f194138326a58b4c4/gcc%2Foutput.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8480e4804cd9493fe7d3995f194138326a58b4c4/gcc%2Foutput.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foutput.h?ref=8480e4804cd9493fe7d3995f194138326a58b4c4", "patch": "@@ -459,4 +459,4 @@ extern const char *user_label_prefix;\n #endif\n /* Assign unique numbers to labels generated for profiling.  */\n \n-int profile_label_no;\n+extern int profile_label_no;"}]}