{"sha": "372e033b8f9c7b7f5f38313a8638570908b90b1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzcyZTAzM2I4ZjljN2I3ZjVmMzgzMTNhODYzODU3MDkwOGI5MGIxZg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-09-22T07:13:24Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-09-22T07:13:24Z"}, "message": "(choose_reload_regs): When setting reg_has_output_reload,\n\nloop over multiple regs only for hard reg.  Set reg_is_output_reload\nin separate loop.\n\nFrom-SVN: r2204", "tree": {"sha": "6ef8b12f199b00ef180f129148c649c9e5302a77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6ef8b12f199b00ef180f129148c649c9e5302a77"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/372e033b8f9c7b7f5f38313a8638570908b90b1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/372e033b8f9c7b7f5f38313a8638570908b90b1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/372e033b8f9c7b7f5f38313a8638570908b90b1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/372e033b8f9c7b7f5f38313a8638570908b90b1f/comments", "author": null, "committer": null, "parents": [{"sha": "4323a0e11eab7e6eb217fe00e19e9363c8f1e240", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4323a0e11eab7e6eb217fe00e19e9363c8f1e240", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4323a0e11eab7e6eb217fe00e19e9363c8f1e240"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "a6d95efb842568dcecb6c04dfe5352adac1d96f2", "filename": "gcc/reload1.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/372e033b8f9c7b7f5f38313a8638570908b90b1f/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/372e033b8f9c7b7f5f38313a8638570908b90b1f/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=372e033b8f9c7b7f5f38313a8638570908b90b1f", "patch": "@@ -4634,12 +4634,18 @@ choose_reload_regs (insn, avoid_return_reg)\n \t  && reload_reg_rtx[r] != 0)\n \t{\n \t  register int nregno = REGNO (reload_out[r]);\n-\t  int nr = HARD_REGNO_NREGS (nregno, reload_mode[r]);\n+\t  int nr = 1;\n+\n+\t  if (nregno < FIRST_PSEUDO_REGISTER)\n+\t    nr = HARD_REGNO_NREGS (nregno, reload_mode[r]);\n \n \t  while (--nr >= 0)\n+\t    reg_has_output_reload[nregno + nr] = 1;\n+\n+\t  if (i >= 0)\n \t    {\n-\t      reg_has_output_reload[nregno + nr] = 1;\n-\t      if (i >= 0)\n+\t      nr = HARD_REGNO_NREGS (spill_regs[i], reload_mode[r]);\n+\t      while (--nr >= 0)\n \t\tSET_HARD_REG_BIT (reg_is_output_reload, spill_regs[i] + nr);\n \t    }\n "}]}