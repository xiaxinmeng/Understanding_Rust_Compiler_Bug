{"sha": "b335ef4e999eb11741b0ebb89987a57c09c18028", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjMzNWVmNGU5OTllYjExNzQxYjBlYmI4OTk4N2E1N2MwOWMxODAyOA==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2015-01-08T16:01:37Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2015-01-08T16:01:37Z"}, "message": "libgomp: Fix 32-bit x86 Intel MIC offloading testing.\n\n    [...]\n    spawn [...]/build-gcc/gcc/xgcc -B[...]/build-gcc/gcc/ [...]/source-gcc/libgomp/testsuite/libgomp.c/examples-4/e.50.1.c -B[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp/ -B[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp/.libs -I[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp -I[...]/source-gcc/libgomp/testsuite/.. -march=i486 -fmessage-length=0 -fno-diagnostics-show-caret -fdiagnostics-color=never -B[...]/install/offload-x86_64-intelmicemul-linux-gnu/libexec/gcc/x86_64-unknown-linux-gnu/5.0.0 -B[...]/install/offload-x86_64-intelmicemul-linux-gnu/bin -fopenmp -O2 -L[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp/.libs -lm -m32 -o ./e.50.1.exe\n    PASS: libgomp.c/examples-4/e.50.1.c (test for excess errors)\n    Setting LD_LIBRARY_PATH to .:[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp/../liboffloadmic/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp/../liboffloadmic/plugin/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp/../libstdc++-v3/src/.libs:[...]/install/offload-x86_64-intelmicemul-linux-gnu/lib64:[...]/install/offload-x86_64-intelmicemul-linux-gnu/lib:[...]/build-gcc/gcc:[...]/build-gcc/gcc/32:.:[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp/../liboffloadmic/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp/../liboffloadmic/plugin/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/32/libgomp/../libstdc++-v3/src/.libs:[...]/install/offload-x86_64-intelmicemul-linux-gnu/lib64:[...]/install/offload-x86_64-intelmicemul-linux-gnu/lib:[...]/build-gcc/gcc:[...]/build-gcc/gcc/32:[...]/build-gcc/x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/libsanitizer/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/libvtv/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/libcilkrts/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/liboffloadmic/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/libssp/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/libgomp/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/libitm/.libs:[...]/build-gcc/x86_64-unknown-linux-gnu/libatomic/.libs:[...]/build-gcc/./gcc:[...]/build-gcc/./prev-gcc\n    spawn [open ...]\n    /tmp/offload_WCXKRZ/offload_target_main: error while loading shared libraries: liboffloadmic_target.so.5: wrong ELF class: ELFCLASS64\n    WARNING: program timed out.\n    FAIL: libgomp.c/examples-4/e.50.1.c execution test\n    [...]\n\n    $ find -name liboffloadmic_target.so.5\n    ./install/offload-x86_64-intelmicemul-linux-gnu/lib64/liboffloadmic_target.so.5\n    ./install/offload-x86_64-intelmicemul-linux-gnu/lib32/liboffloadmic_target.so.5\n    ./build-gcc-offload-x86_64-intelmicemul-linux-gnu/x86_64-intelmicemul-linux-gnu/32/liboffloadmic/.libs/liboffloadmic_target.so.5\n    ./build-gcc-offload-x86_64-intelmicemul-linux-gnu/x86_64-intelmicemul-linux-gnu/liboffloadmic/.libs/liboffloadmic_target.so.5\n\nThis is a \"standard\" GCC configuration: x86_64-intelmicemul-linux-gnu with\n(default) multilibs enabled.\n\n\tlibgomp/\n\t* configure.ac [tgt_dir] (offload_additional_lib_paths): Also add\n\t\"$tgt_dir/lib32\".\n\t* configure: Regenerate.\n\nFrom-SVN: r219349", "tree": {"sha": "6a2309fb1d3b7e077ab87c8db91201813083eacf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6a2309fb1d3b7e077ab87c8db91201813083eacf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b335ef4e999eb11741b0ebb89987a57c09c18028", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b335ef4e999eb11741b0ebb89987a57c09c18028", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b335ef4e999eb11741b0ebb89987a57c09c18028", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b335ef4e999eb11741b0ebb89987a57c09c18028/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f9a0eca40d0bacce52cf56998d79ca0d02345355", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9a0eca40d0bacce52cf56998d79ca0d02345355", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9a0eca40d0bacce52cf56998d79ca0d02345355"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "11e0086516a794d6928bbd886184e6e83e1f032b", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b335ef4e999eb11741b0ebb89987a57c09c18028/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b335ef4e999eb11741b0ebb89987a57c09c18028/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=b335ef4e999eb11741b0ebb89987a57c09c18028", "patch": "@@ -1,5 +1,9 @@\n 2015-01-08  Thomas Schwinge  <thomas@codesourcery.com>\n \n+\t* configure.ac [tgt_dir] (offload_additional_lib_paths): Also add\n+\t\"$tgt_dir/lib32\".\n+\t* configure: Regenerate.\n+\n \t* testsuite/lib/libgomp.exp (libgomp_init): Correctly match\n \t\"intelmic\" in $offload_targets.\n "}, {"sha": "d109fc1677aea6ca5809998903946aaa40bb4c44", "filename": "libgomp/configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b335ef4e999eb11741b0ebb89987a57c09c18028/libgomp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b335ef4e999eb11741b0ebb89987a57c09c18028/libgomp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure?ref=b335ef4e999eb11741b0ebb89987a57c09c18028", "patch": "@@ -16262,7 +16262,7 @@ if test x\"$enable_offload_targets\" != x; then\n     fi\n     if test x\"$tgt_dir\" != x; then\n       offload_additional_options=\"$offload_additional_options -B$tgt_dir/libexec/gcc/\\$(target_alias)/\\$(gcc_version) -B$tgt_dir/bin\"\n-      offload_additional_lib_paths=\"$offload_additional_lib_paths:$tgt_dir/lib64:$tgt_dir/lib\"\n+      offload_additional_lib_paths=\"$offload_additional_lib_paths:$tgt_dir/lib64:$tgt_dir/lib:$tgt_dir/lib32\"\n     else\n       offload_additional_options=\"$offload_additional_options -B\\$(libexecdir)/gcc/\\$(target_alias)/\\$(gcc_version) -B\\$(bindir)\"\n       offload_additional_lib_paths=\"$offload_additional_lib_paths:$toolexeclibdir\""}, {"sha": "c8a98f0396e0d7f95e812f40eb8f059819eb287d", "filename": "libgomp/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b335ef4e999eb11741b0ebb89987a57c09c18028/libgomp%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b335ef4e999eb11741b0ebb89987a57c09c18028/libgomp%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure.ac?ref=b335ef4e999eb11741b0ebb89987a57c09c18028", "patch": "@@ -304,7 +304,7 @@ if test x\"$enable_offload_targets\" != x; then\n     fi\n     if test x\"$tgt_dir\" != x; then\n       offload_additional_options=\"$offload_additional_options -B$tgt_dir/libexec/gcc/\\$(target_alias)/\\$(gcc_version) -B$tgt_dir/bin\"\n-      offload_additional_lib_paths=\"$offload_additional_lib_paths:$tgt_dir/lib64:$tgt_dir/lib\"\n+      offload_additional_lib_paths=\"$offload_additional_lib_paths:$tgt_dir/lib64:$tgt_dir/lib:$tgt_dir/lib32\"\n     else\n       offload_additional_options=\"$offload_additional_options -B\\$(libexecdir)/gcc/\\$(target_alias)/\\$(gcc_version) -B\\$(bindir)\"\n       offload_additional_lib_paths=\"$offload_additional_lib_paths:$toolexeclibdir\""}]}