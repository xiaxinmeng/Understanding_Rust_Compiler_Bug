{"sha": "e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTI5YmQzOGY5NmU5YzhhOWJkNmJhMGQxMmE3M2RlZTM3OTRmNDg5NQ==", "commit": {"author": {"name": "Thomas Quinot", "email": "quinot@adacore.com", "date": "2007-09-26T10:42:09Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-09-26T10:42:09Z"}, "message": "gnatvsn.ads (PCS_Version_Number, [...]): Removed.\n\n2007-09-26  Thomas Quinot  <quinot@adacore.com>\n\t    Sergey Rybin  <rybin@adacore.com>\n\n\t* gnatvsn.ads (PCS_Version_Number, ASIS_Version_Number): Removed.\n\n\t* exp_dist.ads (PCS_Version_Number): Move from Gnatvsn to Exp_Dist,\n\twhere it belongs.\n\n\t* opt.ads: Move ASIS_Version_Number from Gnatvsn into Tree_IO.\n\n\t* rtsfind.adb (PCS_Version_Number): Move from Gnatvsn to Exp_Dist,\n\twhere it belongs.\n\n\t* sem_dist.ads: Minor comment fix\n\n\t* tree_io.ads: Move ASIS_Version_Number from Gnatvsn into Tree_IO.\n\nFrom-SVN: r128783", "tree": {"sha": "122d807b58819eca7af099f8147ccecdf1e42fad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/122d807b58819eca7af099f8147ccecdf1e42fad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/comments", "author": null, "committer": null, "parents": [{"sha": "8dfea8e71402226d8589cf0dcbaef8c0f19db236", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dfea8e71402226d8589cf0dcbaef8c0f19db236", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dfea8e71402226d8589cf0dcbaef8c0f19db236"}], "stats": {"total": 39, "additions": 20, "deletions": 19}, "files": [{"sha": "cada018330d18a0781c46b52e7035eee2a0e1a9e", "filename": "gcc/ada/exp_dist.ads", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Fexp_dist.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Fexp_dist.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_dist.ads?ref=e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895", "patch": "@@ -31,6 +31,13 @@ with Types; use Types;\n \n package Exp_Dist is\n \n+   PCS_Version_Number : constant := 1;\n+   --  PCS interface version. This is used to check for consistency between the\n+   --  compiler used to generate distribution stubs and the PCS implementation.\n+   --  It must be incremented whenever a change is made to the generated code\n+   --  for distribution stubs that would result in the compiler being\n+   --  incompatible with an older version of the PCS, or vice versa.\n+\n    procedure Add_RAST_Features (Vis_Decl : Node_Id);\n    --  Build and add bodies for dereference and 'Access subprograms for a\n    --  remote access to subprogram type. Vis_Decl is the declaration node for"}, {"sha": "b806f448eb9a47b2c4ee546787f6edc19864c6e5", "filename": "gcc/ada/gnatvsn.ads", "status": "modified", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Fgnatvsn.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Fgnatvsn.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatvsn.ads?ref=e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895", "patch": "@@ -90,20 +90,6 @@ package Gnatvsn is\n    Verbose_Library_Version : constant String := \"GNAT Lib v\" & Library_Version;\n    --  Version string stored in e.g. ALI files.\n \n-   ASIS_Version_Number : constant := 6;\n-   --  ASIS Version. This is used to check for consistency between the compiler\n-   --  used to generate trees, and an ASIS application that is reading the\n-   --  trees. It must be updated (incremented) whenever a change is made to\n-   --  the tree format that would result in a compiler being incompatible with\n-   --  an older version of ASIS, or vice versa.\n-\n-   PCS_Version_Number : constant := 1;\n-   --  PCS interface version. This is used to check for consistency between the\n-   --  compiler used to generate distribution stubs and the PCS implementation.\n-   --  It must be incremented whenever a change is made to the generated code\n-   --  for distribution stubs that would result in the compiler being\n-   --  incompatible with an older version of the PCS, or vice versa.\n-\n    Current_Year : constant String := \"2007\";\n    --  Used in printing copyright messages\n "}, {"sha": "d766e97abbe955c1d5dac76a3e0e86cea816592e", "filename": "gcc/ada/opt.ads", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Fopt.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Fopt.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fopt.ads?ref=e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895", "patch": "@@ -1451,7 +1451,8 @@ package Opt is\n    --  They are set by Tree_Read procedure, so they represent the version\n    --  number (and the version string) of the compiler which has created the\n    --  tree, and they are supposed to be compared with the corresponding values\n-   --  from the Gnatvsn package which is a part of ASIS implementation.\n+   --  from the Tree_IO and Gnatvsn packages which also are a part of ASIS\n+   --  implementation.\n \n    Tree_Version_String : String_Access;\n    --  Used to store the compiler version string read from a tree file to check\n@@ -1464,7 +1465,7 @@ package Opt is\n \n    Tree_ASIS_Version_Number : Int;\n    --  Used to store the ASIS version number read from a tree file to check if\n-   --  it is the same as stored in the ASIS version number in Gnatvsn.\n+   --  it is the same as stored in the ASIS version number in Tree_IO.\n \n private\n "}, {"sha": "0b17d957f814665390374c34f4edb6544fec2c3d", "filename": "gcc/ada/rtsfind.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Frtsfind.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Frtsfind.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Frtsfind.adb?ref=e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895", "patch": "@@ -30,9 +30,9 @@ with Debug;    use Debug;\n with Einfo;    use Einfo;\n with Elists;   use Elists;\n with Errout;   use Errout;\n+with Exp_Dist; use Exp_Dist;\n with Fname;    use Fname;\n with Fname.UF; use Fname.UF;\n-with Gnatvsn;  use Gnatvsn;\n with Lib;      use Lib;\n with Lib.Load; use Lib.Load;\n with Namet;    use Namet;\n@@ -921,7 +921,7 @@ package body Rtsfind is\n             if Get_PCS_Name = Name_No_DSA then\n                Check_RPC_Failure (\"distribution feature not supported\");\n \n-            elsif Get_PCS_Version /= Gnatvsn.PCS_Version_Number then\n+            elsif Get_PCS_Version /= Exp_Dist.PCS_Version_Number then\n                Check_RPC_Failure (\"PCS version mismatch\");\n \n             end if;"}, {"sha": "da64ef858efb7753a059210d933082d2738d74a1", "filename": "gcc/ada/sem_dist.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Fsem_dist.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Fsem_dist.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_dist.ads?ref=e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895", "patch": "@@ -37,7 +37,7 @@ package Sem_Dist is\n    function Get_PCS_Version return Int;\n    --  Return the version number of the PCS API implemented by the PCS.\n    --  The consistency of this version with the one expected by Exp_Dist\n-   --  (Gnatvsn.PCS_Version_Number) in Rtsfind.Check_RPC.\n+   --  (Exp_Dist.PCS_Version_Number) in Rtsfind.RTE.Check_RPC.\n    --  If no PCS version information is available, 0 is returned.\n \n    procedure Add_Stub_Constructs (N : Node_Id);"}, {"sha": "a8a49e91aafc19aefd2d13a589d808d56234e490", "filename": "gcc/ada/tree_io.ads", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Ftree_io.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895/gcc%2Fada%2Ftree_io.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftree_io.ads?ref=e29bd38f96e9c8a9bd6ba0d12a73dee3794f4895", "patch": "@@ -46,6 +46,13 @@ package Tree_IO is\n    Tree_Format_Error : exception;\n    --  Raised if a format error is detected in the input file\n \n+   ASIS_Version_Number : constant := 21;\n+   --  ASIS Version. This is used to check for consistency between the compiler\n+   --  used to generate trees and an ASIS application that is reading the\n+   --  trees. It must be incremented whenever a change is made to the tree\n+   --  format that would result in the compiler being incompatible with an\n+   --  older version of ASIS, or vice versa.\n+\n    procedure Tree_Read_Initialize (Desc : File_Descriptor);\n    --  Called to initialize reading of a tree file. This call must be made\n    --  before calls to Tree_Read_xx. No calls to Tree_Write_xx are permitted"}]}