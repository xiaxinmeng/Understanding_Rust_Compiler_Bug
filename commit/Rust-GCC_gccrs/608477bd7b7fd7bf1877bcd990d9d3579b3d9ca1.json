{"sha": "608477bd7b7fd7bf1877bcd990d9d3579b3d9ca1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjA4NDc3YmQ3YjdmZDdiZjE4NzdiY2Q5OTBkOWQzNTc5YjNkOWNhMQ==", "commit": {"author": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2001-05-16T21:50:27Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2001-05-16T21:50:27Z"}, "message": "cppexp.c (lex): Use NODE_NAME and NODE_LEN.\n\n\t* cppexp.c (lex): Use NODE_NAME and NODE_LEN.\n\t* cpphash.c (_cpp_lookup_with_hash): Similarly.\n\t* cpplex.c (cpp_ideq, parse_identifier, cpp_token_len,\n\tcpp_spell_token, cpp_output_token): Similarly.\n\t* cpplib.c (lex_macro_node, do_undef, do_pragma,\n\tdo_pragma_poison, parse_assertion, do_assert): Similarly.\n\t* cppmacro.c (builtin_macro, parse_args, funlike_invocation_p,\n\tsave_parameter, _cpp_create_definition, check_trad_stringification,\n\tcpp_macro_definition): Similarly.\n\t* cppmain.c (cb_define, cb_undef, dump_macro): Similarly.\n\t* c-lex.c (cb_undef, c_lex): Similarly.\n\t* fix-header.c (recognized_function): Similarly.\n\t* cpplib.h (NODE_LEN, NODE_NAME): New.\n\t(cpp_hashnode): Rename length len.\n\nFrom-SVN: r42172", "tree": {"sha": "1e81834d295180b9ec450f3bc267f67e3be65149", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e81834d295180b9ec450f3bc267f67e3be65149"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/608477bd7b7fd7bf1877bcd990d9d3579b3d9ca1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/608477bd7b7fd7bf1877bcd990d9d3579b3d9ca1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/608477bd7b7fd7bf1877bcd990d9d3579b3d9ca1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/608477bd7b7fd7bf1877bcd990d9d3579b3d9ca1/comments", "author": null, "committer": null, "parents": [{"sha": "c25d4f6a6bda616dec75fbc1c2cddddfa8f2ff81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c25d4f6a6bda616dec75fbc1c2cddddfa8f2ff81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c25d4f6a6bda616dec75fbc1c2cddddfa8f2ff81"}], "stats": {"total": 26, "additions": 13, "deletions": 13}, "files": [{"sha": "610063328b6904a8452ee66543652e3d67e718a0", "filename": "gcc/cpplib.h", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/608477bd7b7fd7bf1877bcd990d9d3579b3d9ca1/gcc%2Fcpplib.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/608477bd7b7fd7bf1877bcd990d9d3579b3d9ca1/gcc%2Fcpplib.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.h?ref=608477bd7b7fd7bf1877bcd990d9d3579b3d9ca1", "patch": "@@ -37,7 +37,7 @@ typedef struct cpp_buffer cpp_buffer;\n typedef struct cpp_options cpp_options;\n typedef struct cpp_token cpp_token;\n typedef struct cpp_string cpp_string;\n-typedef struct cpp_hashnode cpp_hashnode;\n+typedef struct c_common_identifier cpp_hashnode;\n typedef struct cpp_macro cpp_macro;\n typedef struct cpp_lexer_pos cpp_lexer_pos;\n typedef struct cpp_lookahead cpp_lookahead;\n@@ -177,7 +177,7 @@ struct cpp_token\n \n   union\n   {\n-    struct cpp_hashnode *node;\t/* An identifier.  */\n+    cpp_hashnode *node;\t\t/* An identifier.  */\n     struct cpp_string str;\t/* A string, or number.  */\n     unsigned int arg_no;\t/* Argument no. for a CPP_MACRO_ARG.  */\n     unsigned char c;\t\t/* Character represented by CPP_OTHER.  */\n@@ -466,21 +466,21 @@ enum builtin_type\n   BT_STDC\t\t\t/* `__STDC__' */\n };\n \n-/* There is a slot in the hashnode for use by front ends when integrated\n-   with cpplib.  It holds a tree (see tree.h) but we mustn't drag that\n-   header into every user of cpplib.h.  cpplib does not do anything with\n-   this slot except clear it when a new node is created.  */\n-union tree_node;\n+#include \"c-rid.h\"\n \n-struct cpp_hashnode\n+#define C_RID_CODE(id) (((struct c_common_identifier *) (id))->rid_code)\n+\n+/* The common part of an identifier node shared amongst all 3 C front\n+   ends.  Also used to store CPP identifiers, which are a superset of\n+   identifiers in the grammatical sense.  */\n+struct c_common_identifier\n {\n-  const unsigned char *name;\t\t/* Null-terminated name.  */\n-  unsigned int hash;\t\t\t/* Cached hash value.  */\n-  unsigned short length;\t\t/* Length of name excluding null.  */\n+  struct tree_identifier ident;\t\t/* See tree-core.h.  */\n   unsigned short arg_index;\t\t/* Macro argument index.  */\n   unsigned char directive_index;\t/* Index into directive table.  */\n-  ENUM_BITFIELD(node_type) type : 8;\t/* Node type.  */\n-  unsigned char flags;\t\t\t/* Node flags.  */\n+  ENUM_BITFIELD(rid) rid_code : 8;\t/* Rid code - for front ends.  */\n+  ENUM_BITFIELD(node_type) type : 8;\t/* CPP node type.  */\n+  unsigned char flags;\t\t\t/* CPP flags.  */\n \n   union\n   {"}]}