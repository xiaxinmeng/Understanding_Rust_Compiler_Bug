{"sha": "c0e8f02b27afc1a07f30a7597f8ae34094821f9d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzBlOGYwMmIyN2FmYzFhMDdmMzBhNzU5N2Y4YWUzNDA5NDgyMWY5ZA==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2018-05-25T21:57:24Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2018-05-25T21:57:24Z"}, "message": "re PR fortran/85786 (Segfault in associated intrinsic)\n\n2018-05-25  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/85786\n\t* gfortran.dg/pr85786.f90: New test.\n\nFrom-SVN: r260783", "tree": {"sha": "620bf656acde3d479f2814ec627e407d651d8400", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/620bf656acde3d479f2814ec627e407d651d8400"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c0e8f02b27afc1a07f30a7597f8ae34094821f9d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0e8f02b27afc1a07f30a7597f8ae34094821f9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0e8f02b27afc1a07f30a7597f8ae34094821f9d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0e8f02b27afc1a07f30a7597f8ae34094821f9d/comments", "author": null, "committer": null, "parents": [{"sha": "d9338471b91bbe6e1579088c7d40ab257ac3764d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9338471b91bbe6e1579088c7d40ab257ac3764d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9338471b91bbe6e1579088c7d40ab257ac3764d"}], "stats": {"total": 51, "additions": 51, "deletions": 0}, "files": [{"sha": "b8133dd8454bca7052d5671d44018a74399fc665", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0e8f02b27afc1a07f30a7597f8ae34094821f9d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0e8f02b27afc1a07f30a7597f8ae34094821f9d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c0e8f02b27afc1a07f30a7597f8ae34094821f9d", "patch": "@@ -1,3 +1,8 @@\n+2018-05-25  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/85786\n+\t* gfortran.dg/pr85786.f90: New test.\n+\n 2018-05-25  Paul Koning  <ni1d@arrl.net>\n \n \t* gcc.c-torture/compile/20151204.c: Skip if pdp11."}, {"sha": "e319acfaa07041dcf92d6a9d9b6fe95dd8b92ecd", "filename": "gcc/testsuite/gfortran.dg/pr85786.f90", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0e8f02b27afc1a07f30a7597f8ae34094821f9d/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr85786.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0e8f02b27afc1a07f30a7597f8ae34094821f9d/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr85786.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr85786.f90?ref=c0e8f02b27afc1a07f30a7597f8ae34094821f9d", "patch": "@@ -0,0 +1,46 @@\n+! { dg-do run }\n+! PR fortran/85786\n+program test\n+\n+   implicit none\n+\n+   type :: p2d\n+      real, pointer :: p(:,:) => null()\n+   end type p2d\n+  \n+   type :: test_cs\n+      type(p2d), pointer :: v(:) => null()\n+   end type test_cs\n+\n+   type(test_cs), pointer :: cs\n+   real, allocatable, target :: e(:,:)\n+\n+   allocate(cs)\n+   if (associated(cs) .neqv. .true.) stop 1\n+\n+   allocate(cs%v(2))\n+   if (associated(cs%v) .neqv. .true.) stop 2\n+\n+   allocate(e(2,2))\n+   e = 42\n+\n+   if (query_ptr(e, cs) .neqv. .true.) stop 3\n+\n+   contains\n+\n+      logical function query_ptr(f_ptr, cs)\n+\n+         real, target, intent(in) :: f_ptr(:,:)\n+         type(test_cs), pointer, intent(inout) :: cs\n+\n+         if (associated(cs)) then\n+            if (associated(cs%v) .neqv. .true.) stop 4\n+            cs%v(2)%p => f_ptr\n+            if (associated(cs%v(2)%p) .neqv. .true.) stop 5\n+            query_ptr = associated(cs%v(2)%p, f_ptr)\n+         else\n+            query_ptr = .false.\n+         end if\n+  end function query_ptr\n+\n+end program test"}]}