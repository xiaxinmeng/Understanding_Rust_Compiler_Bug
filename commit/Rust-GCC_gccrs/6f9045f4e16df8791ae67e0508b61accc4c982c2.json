{"sha": "6f9045f4e16df8791ae67e0508b61accc4c982c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmY5MDQ1ZjRlMTZkZjg3OTFhZTY3ZTA1MDhiNjFhY2NjNGM5ODJjMg==", "commit": {"author": {"name": "Ilya Enkovich", "email": "enkovich.gnu@gmail.com", "date": "2015-10-21T15:57:00Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2015-10-21T15:57:00Z"}, "message": "omp-low.c (simd_clone_create): Set in_other_partition for created clones.\n\ngcc/\n\n\t* omp-low.c (simd_clone_create): Set in_other_partition\n\tfor created clones.\n\ngcc/testsuite/\n\n\t* gcc.dg/lto/simd-function_0.c: New test.\n\nFrom-SVN: r229127", "tree": {"sha": "9340e02338d4af72c0dc29692ea7986474164355", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9340e02338d4af72c0dc29692ea7986474164355"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f9045f4e16df8791ae67e0508b61accc4c982c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f9045f4e16df8791ae67e0508b61accc4c982c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f9045f4e16df8791ae67e0508b61accc4c982c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f9045f4e16df8791ae67e0508b61accc4c982c2/comments", "author": null, "committer": null, "parents": [{"sha": "cbb5c732c20e385bf3d0bf04b533b22281a7dde2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbb5c732c20e385bf3d0bf04b533b22281a7dde2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbb5c732c20e385bf3d0bf04b533b22281a7dde2"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "29714051f3a686ba0f846f3fa56aa7e67b660bd2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f9045f4e16df8791ae67e0508b61accc4c982c2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f9045f4e16df8791ae67e0508b61accc4c982c2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6f9045f4e16df8791ae67e0508b61accc4c982c2", "patch": "@@ -1,3 +1,8 @@\n+2015-10-21  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\t* omp-low.c (simd_clone_create): Set in_other_partition\n+\tfor created clones.\n+\n 2015-10-21  David Wohlferd  <dw@LimeGreenSocks.com>\n \n \t* doc/extend.exp (Local Register Variables): Rewrite."}, {"sha": "b71609b76a4598830d7d9889d463a3289d6d8a6e", "filename": "gcc/omp-low.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f9045f4e16df8791ae67e0508b61accc4c982c2/gcc%2Fomp-low.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f9045f4e16df8791ae67e0508b61accc4c982c2/gcc%2Fomp-low.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fomp-low.c?ref=6f9045f4e16df8791ae67e0508b61accc4c982c2", "patch": "@@ -16318,6 +16318,8 @@ simd_clone_create (struct cgraph_node *old_node)\n       DECL_STATIC_CONSTRUCTOR (new_decl) = 0;\n       DECL_STATIC_DESTRUCTOR (new_decl) = 0;\n       new_node = old_node->create_version_clone (new_decl, vNULL, NULL);\n+      if (old_node->in_other_partition)\n+\tnew_node->in_other_partition = 1;\n       symtab->call_cgraph_insertion_hooks (new_node);\n     }\n   if (new_node == NULL)"}, {"sha": "ed725eec7f8249877e5f2b28bc2e6b5eb2f623c1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f9045f4e16df8791ae67e0508b61accc4c982c2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f9045f4e16df8791ae67e0508b61accc4c982c2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6f9045f4e16df8791ae67e0508b61accc4c982c2", "patch": "@@ -1,3 +1,7 @@\n+2015-10-21  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\t* gcc.dg/lto/simd-function_0.c: New test.\n+\n 2015-10-21  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/68018"}, {"sha": "cda31aafb2e4cccc1fd4825280b1b991f36d697c", "filename": "gcc/testsuite/gcc.dg/lto/simd-function_0.c", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f9045f4e16df8791ae67e0508b61accc4c982c2/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fsimd-function_0.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f9045f4e16df8791ae67e0508b61accc4c982c2/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fsimd-function_0.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fsimd-function_0.c?ref=6f9045f4e16df8791ae67e0508b61accc4c982c2", "patch": "@@ -0,0 +1,34 @@\n+/* { dg-lto-do link } */\n+/* { dg-require-effective-target avx2 } */\n+/* { dg-lto-options { { -fopenmp-simd -O3 -ffast-math -mavx2 -flto -flto-partition=max } } } */\n+\n+#define SIZE 4096\n+float x[SIZE];\n+\n+\n+#pragma omp declare simd\n+float\n+__attribute__ ((noinline))\n+my_mul (float x, float y) {\n+  return x * y;\n+}\n+\n+__attribute__ ((noinline))\n+int foo ()\n+{\n+  int i = 0;\n+#pragma omp simd safelen (16)\n+  for (i = 0; i < SIZE; i++)\n+    x[i] = my_mul ((float)i, 9932.3323);\n+  return (int)x[0];\n+}\n+\n+int main ()\n+{\n+  int i = 0;\n+  for (i = 0; i < SIZE; i++)\n+    x[i] = my_mul ((float) i, 9932.3323);\n+  foo ();\n+  return (int)x[0];\n+}\n+"}]}