{"sha": "caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2FlYTU5ZmY2NmM0ZWMxNTlmNGE1YmIyOWMxZmVjMDU1NmNkOTkxYQ==", "commit": {"author": {"name": "Kelvin Nilsen", "email": "kelvin@gcc.gnu.org", "date": "2016-06-21T21:39:49Z"}, "committer": {"name": "Kelvin Nilsen", "email": "kelvin@gcc.gnu.org", "date": "2016-06-21T21:39:49Z"}, "message": "rs6000.h: Add conditional preprocessing directives to disable Power9-specific compiler...\n\ngcc/ChangeLog:\n\n2016-06-21  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n\n\t* config/rs6000/rs6000.h: Add conditional preprocessing directives\n\tto disable Power9-specific compiler features if HAVE_AS_POWER9 is\n\tnot defined.\n\ngcc/testsuite/ChangeLog:\n\n2016-06-21  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n\n\t* gcc.target/powerpc/darn-0.c: Add dejagnu directives to disable\n\ttest if effective-target is not powerpc_p9vector_ok, or if a -mcpu\n\toverride other than -mcpu=power9 command-line option is specified,\n\tor if the target operating system is aix.\n\t* gcc.target/powerpc/darn-1.c: Likewise.\n\t* gcc.target/powerpc/darn-2.c: Likewise.\n\t* gcc.target/powerpc/vslv-0.c: Add dejagnu directives to disable\n\ttest if effective-target is not powerpc_p9vector_ok or if the\n\ttarget operating system is not defined.\n\t* gcc.target/powerpc/vslv-1.c: Likewise.\n\t* gcc.target/powerpc/vsrv-0.c: Likewise.\n\t* gcc.target/powerpc/vsrv-1.c: Likewise.\n\nFrom-SVN: r237659", "tree": {"sha": "ede44990018e3bb6dad8fcc01f48c79f71feca6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ede44990018e3bb6dad8fcc01f48c79f71feca6a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/comments", "author": null, "committer": null, "parents": [{"sha": "d42b75599229d4a0e36fddae2931feff40ae7c03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d42b75599229d4a0e36fddae2931feff40ae7c03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d42b75599229d4a0e36fddae2931feff40ae7c03"}], "stats": {"total": 62, "additions": 60, "deletions": 2}, "files": [{"sha": "020e08d5b87e53088ddfa6b62a4e0920b04fa0b7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "patch": "@@ -1,3 +1,9 @@\n+2016-06-21  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n+\n+\t* config/rs6000/rs6000.h: Add conditional preprocessing directives\n+\tto disable Power9-specific compiler features if HAVE_AS_POWER9 is\n+\tnot defined.\n+\n 2016-06-21  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* tree.c (verify_type_variant): Skip TYPE_SIZE and TYPE_SIZE_UNIT if"}, {"sha": "d3cba82748b78c5e929fbdb32c3b77067a0e0435", "filename": "gcc/config/rs6000/rs6000.h", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Fconfig%2Frs6000%2Frs6000.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Fconfig%2Frs6000%2Frs6000.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.h?ref=caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "patch": "@@ -302,6 +302,26 @@ extern const char *host_detect_local_cpu (int argc, const char **argv);\n #define TARGET_P8_VECTOR 0\n #endif\n \n+/* Define the ISA 3.0 flags as 0 if the target assembler does not support\n+   Power9 instructions.  Allow -mpower9-fusion, since it does not add new\n+   instructions.  Allow -misel, since it predates ISA 3.0 and does\n+   not require any Power9 features.  */\n+\n+#ifndef HAVE_AS_POWER9\n+#undef  TARGET_FLOAT128_HW\n+#undef  TARGET_MODULO\n+#undef  TARGET_P9_VECTOR\n+#undef  TARGET_P9_MINMAX\n+#undef  TARGET_P9_DFORM_SCALAR\n+#undef  TARGET_P9_DFORM_VECTOR\n+#define TARGET_FLOAT128_HW 0\n+#define TARGET_MODULO 0\n+#define TARGET_P9_VECTOR 0\n+#define TARGET_P9_MINMAX 0\n+#define TARGET_P9_DFORM_SCALAR 0\n+#define TARGET_P9_DFORM_VECTOR 0\n+#endif\n+\n /* Define TARGET_LWSYNC_INSTRUCTION if the assembler knows about lwsync.  If\n    not, generate the lwsync code as an integer constant.  */\n #ifdef HAVE_AS_LWSYNC"}, {"sha": "51d7a3082fbb1fcebbaff3d4181065338a0610bd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "patch": "@@ -1,3 +1,18 @@\n+2016-06-21  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n+\n+\t* gcc.target/powerpc/darn-0.c: Add dejagnu directives to disable\n+\ttest if effective-target is not powerpc_p9vector_ok, or if a -mcpu\n+\toverride other than -mcpu=power9 command-line option is specified,\n+\tor if the target operating system is aix.\n+\t* gcc.target/powerpc/darn-1.c: Likewise.\n+\t* gcc.target/powerpc/darn-2.c: Likewise.\n+\t* gcc.target/powerpc/vslv-0.c: Add dejagnu directives to disable\n+\ttest if effective-target is not powerpc_p9vector_ok or if the\n+\ttarget operating system is not defined.\n+\t* gcc.target/powerpc/vslv-1.c: Likewise.\n+\t* gcc.target/powerpc/vsrv-0.c: Likewise.\n+\t* gcc.target/powerpc/vsrv-1.c: Likewise.\n+\n 2016-06-21  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/71068"}, {"sha": "fc150766108a24af720cf4ceab6fc4d45df9f23a", "filename": "gcc/testsuite/gcc.target/powerpc/darn-0.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdarn-0.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdarn-0.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdarn-0.c?ref=caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "patch": "@@ -1,4 +1,7 @@\n /* { dg-do compile { target { powerpc*-*-* } } } */\n+/* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power9\" } } */\n+/* { dg-require-effective-target powerpc_p9vector_ok } */\n+/* { dg-skip-if \"\" { powerpc*-*-aix* } } */\n /* { dg-options \"-mcpu=power9\" } */\n \n /* This test should succeed on both 32- and 64-bit configurations.  */"}, {"sha": "9b7482d6551ab1339104451bba98a5db8d8fde6c", "filename": "gcc/testsuite/gcc.target/powerpc/darn-1.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdarn-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdarn-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdarn-1.c?ref=caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "patch": "@@ -1,6 +1,9 @@\n /* { dg-do compile { target { powerpc*-*-* } } } */\n-/* { dg-options \"-mcpu=power9\" } */\n+/* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power9\" } } */\n+/* { dg-require-effective-target powerpc_p9vector_ok } */\n /* { dg-require-effective-target lp64 } */\n+/* { dg-skip-if \"\" { powerpc*-*-aix* } } */\n+/* { dg-options \"-mcpu=power9\" } */\n \n #include <altivec.h>\n "}, {"sha": "84493602cfcfb82d2b3a7a1c033a2290c8d5f605", "filename": "gcc/testsuite/gcc.target/powerpc/darn-2.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdarn-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdarn-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fdarn-2.c?ref=caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "patch": "@@ -1,6 +1,9 @@\n /* { dg-do compile { target { powerpc*-*-* } } } */\n-/* { dg-options \"-mcpu=power9\" } */\n+/* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power9\" } } */\n+/* { dg-require-effective-target powerpc_p9vector_ok } */\n /* { dg-require-effective-target lp64 } */\n+/* { dg-skip-if \"\" { powerpc*-*-aix* } } */\n+/* { dg-options \"-mcpu=power9\" } */\n \n #include <altivec.h>\n "}, {"sha": "9ad04dd92e7efe3187f3fedeffb8d0485d5aa8d6", "filename": "gcc/testsuite/gcc.target/powerpc/vslv-0.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvslv-0.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvslv-0.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvslv-0.c?ref=caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "patch": "@@ -1,5 +1,7 @@\n /* { dg-do compile { target { powerpc*-*-* } } } */\n /* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power9\" } } */\n+/* { dg-require-effective-target powerpc_p9vector_ok } */\n+/* { dg-skip-if \"\" { powerpc*-*-aix* } } */\n /* { dg-options \"-mcpu=power9\" } */\n \n #include <altivec.h>"}, {"sha": "2d09543c814dc2daea102754f3425f1ef2c3b277", "filename": "gcc/testsuite/gcc.target/powerpc/vslv-1.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvslv-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvslv-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvslv-1.c?ref=caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "patch": "@@ -1,5 +1,7 @@\n /* { dg-do compile { target { powerpc*-*-* } } } */\n /* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power9\" } } */\n+/* { dg-require-effective-target powerpc_p9vector_ok } */\n+/* { dg-skip-if \"\" { powerpc*-*-aix* } } */\n /* { dg-options \"-mcpu=power9\" } */\n \n #include <altivec.h>"}, {"sha": "29c7e3fde200ab13b5be1f0bb77274d72fb7d89c", "filename": "gcc/testsuite/gcc.target/powerpc/vsrv-0.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsrv-0.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsrv-0.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsrv-0.c?ref=caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "patch": "@@ -1,5 +1,7 @@\n /* { dg-do compile { target { powerpc*-*-* } } } */\n /* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power9\" } } */\n+/* { dg-require-effective-target powerpc_p9vector_ok } */\n+/* { dg-skip-if \"\" { powerpc*-*-aix* } } */\n /* { dg-options \"-mcpu=power9\" } */\n \n #include <altivec.h>"}, {"sha": "cd3f714bd64dc28c4fb53b1dcb50250c124a5ede", "filename": "gcc/testsuite/gcc.target/powerpc/vsrv-1.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsrv-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caea59ff66c4ec159f4a5bb29c1fec0556cd991a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsrv-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fvsrv-1.c?ref=caea59ff66c4ec159f4a5bb29c1fec0556cd991a", "patch": "@@ -1,5 +1,7 @@\n /* { dg-do compile { target { powerpc*-*-* } } } */\n /* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power9\" } } */\n+/* { dg-require-effective-target powerpc_p9vector_ok } */\n+/* { dg-skip-if \"\" { powerpc*-*-aix* } } */\n /* { dg-options \"-mcpu=power9\" } */\n \n #include <altivec.h>"}]}