{"sha": "747639c28ff29046b26ffafc9a04fc42a72f683b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzQ3NjM5YzI4ZmYyOTA0NmIyNmZmYWZjOWEwNGZjNDJhNzJmNjgzYg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-01-08T01:08:29Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-01-08T01:08:29Z"}, "message": "re PR go/59430 (os/user FAILs on Solaris)\n\n\tPR go/59430\nos/user: Use POSIX functions on Solaris.\n\nFrom-SVN: r206412", "tree": {"sha": "64ded3dc2ea89ef1e27d4a84653a9306f1dcfe05", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64ded3dc2ea89ef1e27d4a84653a9306f1dcfe05"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/747639c28ff29046b26ffafc9a04fc42a72f683b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/747639c28ff29046b26ffafc9a04fc42a72f683b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/747639c28ff29046b26ffafc9a04fc42a72f683b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/747639c28ff29046b26ffafc9a04fc42a72f683b/comments", "author": null, "committer": null, "parents": [{"sha": "2da4a7611b2b68bb446f6138bd474c426006444c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2da4a7611b2b68bb446f6138bd474c426006444c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2da4a7611b2b68bb446f6138bd474c426006444c"}], "stats": {"total": 60, "additions": 50, "deletions": 10}, "files": [{"sha": "4f09bc30bf613571d88086bf2ee0d71c63fd122d", "filename": "libgo/Makefile.am", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/747639c28ff29046b26ffafc9a04fc42a72f683b/libgo%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/747639c28ff29046b26ffafc9a04fc42a72f683b/libgo%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.am?ref=747639c28ff29046b26ffafc9a04fc42a72f683b", "patch": "@@ -1465,10 +1465,17 @@ go_os_signal_files = \\\n \tgo/os/signal/signal.go \\\n \tgo/os/signal/signal_unix.go\n \n+if LIBGO_IS_SOLARIS\n+os_user_decls_file = go/os/user/decls_solaris.go\n+else\n+os_user_decls_file = go/os/user/decls_unix.go\n+endif\n+\n go_os_user_files = \\\n-\tgo/os/user/user.go \\\n \tgo/os/user/lookup.go \\\n-\tgo/os/user/lookup_unix.go\n+\tgo/os/user/lookup_unix.go \\\n+\tgo/os/user/user.go \\\n+\t$(os_user_decls_file)\n \n go_path_filepath_files = \\\n \tgo/path/filepath/match.go \\"}, {"sha": "cf93938379b783753dc4d87bdd5fdb888964d67e", "filename": "libgo/Makefile.in", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/747639c28ff29046b26ffafc9a04fc42a72f683b/libgo%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/747639c28ff29046b26ffafc9a04fc42a72f683b/libgo%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.in?ref=747639c28ff29046b26ffafc9a04fc42a72f683b", "patch": "@@ -1670,10 +1670,13 @@ go_os_signal_files = \\\n \tgo/os/signal/signal.go \\\n \tgo/os/signal/signal_unix.go\n \n+@LIBGO_IS_SOLARIS_FALSE@os_user_decls_file = go/os/user/decls_unix.go\n+@LIBGO_IS_SOLARIS_TRUE@os_user_decls_file = go/os/user/decls_solaris.go\n go_os_user_files = \\\n-\tgo/os/user/user.go \\\n \tgo/os/user/lookup.go \\\n-\tgo/os/user/lookup_unix.go\n+\tgo/os/user/lookup_unix.go \\\n+\tgo/os/user/user.go \\\n+\t$(os_user_decls_file)\n \n go_path_filepath_files = \\\n \tgo/path/filepath/match.go \\"}, {"sha": "788a00f06613020ded87045b819f3470894f258f", "filename": "libgo/go/os/user/decls_solaris.go", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/747639c28ff29046b26ffafc9a04fc42a72f683b/libgo%2Fgo%2Fos%2Fuser%2Fdecls_solaris.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/747639c28ff29046b26ffafc9a04fc42a72f683b/libgo%2Fgo%2Fos%2Fuser%2Fdecls_solaris.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fos%2Fuser%2Fdecls_solaris.go?ref=747639c28ff29046b26ffafc9a04fc42a72f683b", "patch": "@@ -0,0 +1,18 @@\n+// Copyright 2014 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+// +build solaris\n+// +build cgo\n+\n+package user\n+\n+import \"syscall\"\n+\n+// Declarations for the libc functions on Solaris.\n+\n+//extern __posix_getpwnam_r\n+func libc_getpwnam_r(name *byte, pwd *syscall.Passwd, buf *byte, buflen syscall.Size_t, result **syscall.Passwd) int\n+\n+//extern __posix_getpwuid_r\n+func libc_getpwuid_r(uid syscall.Uid_t, pwd *syscall.Passwd, buf *byte, buflen syscall.Size_t, result **syscall.Passwd) int"}, {"sha": "f76e4c9bdfcc92fe4716cf41513be5e08989d2d7", "filename": "libgo/go/os/user/decls_unix.go", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/747639c28ff29046b26ffafc9a04fc42a72f683b/libgo%2Fgo%2Fos%2Fuser%2Fdecls_unix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/747639c28ff29046b26ffafc9a04fc42a72f683b/libgo%2Fgo%2Fos%2Fuser%2Fdecls_unix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fos%2Fuser%2Fdecls_unix.go?ref=747639c28ff29046b26ffafc9a04fc42a72f683b", "patch": "@@ -0,0 +1,18 @@\n+// Copyright 2014 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+// +build darwin dragonfly freebsd linux netbsd openbsd\n+// +build cgo\n+\n+package user\n+\n+import \"syscall\"\n+\n+// Declarations for the libc functions on most Unix systems.\n+\n+//extern getpwnam_r\n+func libc_getpwnam_r(name *byte, pwd *syscall.Passwd, buf *byte, buflen syscall.Size_t, result **syscall.Passwd) int\n+\n+//extern getpwuid_r\n+func libc_getpwuid_r(uid syscall.Uid_t, pwd *syscall.Passwd, buf *byte, buflen syscall.Size_t, result **syscall.Passwd) int"}, {"sha": "2d309ed33300fb22eb644b5be4c5e517baf340df", "filename": "libgo/go/os/user/lookup_unix.go", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/747639c28ff29046b26ffafc9a04fc42a72f683b/libgo%2Fgo%2Fos%2Fuser%2Flookup_unix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/747639c28ff29046b26ffafc9a04fc42a72f683b/libgo%2Fgo%2Fos%2Fuser%2Flookup_unix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fos%2Fuser%2Flookup_unix.go?ref=747639c28ff29046b26ffafc9a04fc42a72f683b", "patch": "@@ -27,12 +27,6 @@ static int mygetpwuid_r(int uid, struct passwd *pwd,\n }\n */\n \n-//extern getpwnam_r\n-func libc_getpwnam_r(name *byte, pwd *syscall.Passwd, buf *byte, buflen syscall.Size_t, result **syscall.Passwd) int\n-\n-//extern getpwuid_r\n-func libc_getpwuid_r(uid syscall.Uid_t, pwd *syscall.Passwd, buf *byte, buflen syscall.Size_t, result **syscall.Passwd) int\n-\n // bytePtrToString takes a NUL-terminated array of bytes and convert\n // it to a Go string.\n func bytePtrToString(p *byte) string {"}]}