{"sha": "1e43cc9461ba4f73939c94f07d2f5b305943eb29", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWU0M2NjOTQ2MWJhNGY3MzkzOWM5NGYwN2QyZjViMzA1OTQzZWIyOQ==", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2015-05-21T13:30:24Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2015-05-21T13:30:24Z"}, "message": "Testsuite check for sqrt_insn. Move pow/sqrt synth test from gcc.target/aarch64/ to to gcc.dg/\n\n\t* lib/target-supports.exp (check_effective_target_sqrt_insn): New check.\n\t* gcc.dg/pow-sqrt-synth-1.c: New test.\n\t* gcc.target/aarch64/pow-sqrt-synth-1.c: Delete.\n\n\t* doc/sourcebuild.texi (7.2.3.9 Other hardware attributes):\n\tDocument sqrt_insn.\n\nFrom-SVN: r223485", "tree": {"sha": "5fc480432be09e5919afdfdc2d6c0d53661c0eb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5fc480432be09e5919afdfdc2d6c0d53661c0eb9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e43cc9461ba4f73939c94f07d2f5b305943eb29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e43cc9461ba4f73939c94f07d2f5b305943eb29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e43cc9461ba4f73939c94f07d2f5b305943eb29", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e43cc9461ba4f73939c94f07d2f5b305943eb29/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "eb7d283dc33d007ef49e76ba16680644869877c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb7d283dc33d007ef49e76ba16680644869877c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb7d283dc33d007ef49e76ba16680644869877c4"}], "stats": {"total": 41, "additions": 38, "deletions": 3}, "files": [{"sha": "46784af723504805ea2615e4a5004d6fd41a4832", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e43cc9461ba4f73939c94f07d2f5b305943eb29/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e43cc9461ba4f73939c94f07d2f5b305943eb29/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1e43cc9461ba4f73939c94f07d2f5b305943eb29", "patch": "@@ -1,3 +1,8 @@\n+2015-05-21  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+\t* doc/sourcebuild.texi (7.2.3.9 Other hardware attributes):\n+\tDocument sqrt_insn.\n+\n 2015-05-21  Richard Biener  <rguenther@suse.de>\n \n \tPR c++/66211"}, {"sha": "abe07799f33fedcd83717f59230f346253e7829d", "filename": "gcc/doc/sourcebuild.texi", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e43cc9461ba4f73939c94f07d2f5b305943eb29/gcc%2Fdoc%2Fsourcebuild.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e43cc9461ba4f73939c94f07d2f5b305943eb29/gcc%2Fdoc%2Fsourcebuild.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fsourcebuild.texi?ref=1e43cc9461ba4f73939c94f07d2f5b305943eb29", "patch": "@@ -1695,6 +1695,9 @@ Target supports FPU instructions.\n @item non_strict_align\n Target does not require strict alignment.\n \n+@item sqrt_insn\n+Target has a square root instruction that the compiler can generate.\n+\n @item sse\n Target supports compiling @code{sse} instructions.\n "}, {"sha": "a5b78aa738e0cec3a8f3431ca7103ee21dbb1c4e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e43cc9461ba4f73939c94f07d2f5b305943eb29/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e43cc9461ba4f73939c94f07d2f5b305943eb29/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1e43cc9461ba4f73939c94f07d2f5b305943eb29", "patch": "@@ -1,3 +1,9 @@\n+2015-05-21  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+\t* lib/target-supports.exp (check_effective_target_sqrt_insn): New check.\n+\t* gcc.dg/pow-sqrt-synth-1.c: New test.\n+\t* gcc.target/aarch64/pow-sqrt-synth-1.c: Delete.\n+\n 2015-05-21  Richard Biener  <rguenther@suse.de>\n \n \tPR c++/66211"}, {"sha": "d55b62634386f0a2bb8aa912e0ecca770a5e493d", "filename": "gcc/testsuite/gcc.dg/pow-sqrt-synth-1.c", "status": "renamed", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e43cc9461ba4f73939c94f07d2f5b305943eb29/gcc%2Ftestsuite%2Fgcc.dg%2Fpow-sqrt-synth-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e43cc9461ba4f73939c94f07d2f5b305943eb29/gcc%2Ftestsuite%2Fgcc.dg%2Fpow-sqrt-synth-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpow-sqrt-synth-1.c?ref=1e43cc9461ba4f73939c94f07d2f5b305943eb29", "patch": "@@ -1,6 +1,6 @@\n-/* { dg-do compile } */\n+/* { dg-do compile { target sqrt_insn } } */\n /* { dg-options \"-fdump-tree-sincos -Ofast --param max-pow-sqrt-depth=8\" } */\n-\n+/* { dg-additional-options \"-mfloat-abi=softfp -mfpu=neon-vfpv4\" { target arm*-*-* } } */\n \n double\n foo (double a)\n@@ -35,4 +35,4 @@ vecfoo (double *a)\n }\n \n /* { dg-final { scan-tree-dump-times \"synthesizing\" 7 \"sincos\" } } */\n-/* { dg-final { cleanup-tree-dump \"sincos\" } } */\n\\ No newline at end of file\n+/* { dg-final { cleanup-tree-dump \"sincos\" } } */", "previous_filename": "gcc/testsuite/gcc.target/aarch64/pow-sqrt-synth-1.c"}, {"sha": "f0c209fc7022fda77ee2a04b496fca8a6b1dcce0", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e43cc9461ba4f73939c94f07d2f5b305943eb29/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e43cc9461ba4f73939c94f07d2f5b305943eb29/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=1e43cc9461ba4f73939c94f07d2f5b305943eb29", "patch": "@@ -4670,6 +4670,27 @@ proc check_effective_target_vect_call_copysignf { } {\n     return $et_vect_call_copysignf_saved\n }\n \n+# Return 1 if the target supports hardware square root instructions.\n+\n+proc check_effective_target_sqrt_insn { } {\n+    global et_sqrt_insn_saved\n+\n+    if [info exists et_sqrt_insn_saved] {\n+\tverbose \"check_effective_target_hw_sqrt: using cached result\" 2\n+    } else {\n+\tset et_sqrt_insn_saved 0\n+\tif { [istarget x86_64-*-*]\n+\t     || [istarget powerpc*-*-*]\n+\t     || [istarget aarch64*-*-*]\n+\t     || ([istarget arm*-*-*] && [check_effective_target_arm_vfp_ok]) } {\n+\t   set et_sqrt_insn_saved 1\n+\t}\n+    }\n+\n+    verbose \"check_effective_target_hw_sqrt: returning et_sqrt_insn_saved\" 2\n+    return $et_sqrt_insn_saved\n+}\n+\n # Return 1 if the target supports vector sqrtf calls.\n \n proc check_effective_target_vect_call_sqrtf { } {"}]}