{"sha": "fb2c2b167238f82d9103b7fb78ad24918548c245", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmIyYzJiMTY3MjM4ZjgyZDkxMDNiN2ZiNzhhZDI0OTE4NTQ4YzI0NQ==", "commit": {"author": {"name": "Ira Rosen", "email": "ira.rosen@linaro.org", "date": "2011-08-11T05:43:14Z"}, "committer": {"name": "Ira Rosen", "email": "irar@gcc.gnu.org", "date": "2011-08-11T05:43:14Z"}, "message": "re PR tree-optimization/50039 (Segfault in vect_operation_fits_smaller_type())\n\n\n        PR tree-optimization/50039\n        * tree-vect-patterns.c (vect_operation_fits_smaller_type): Check\n        that DEF_STMT has a stmt_vec_info.\n\nFrom-SVN: r177647", "tree": {"sha": "1fcad82c6c0c74fcfec903c3fef532092fa82d10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1fcad82c6c0c74fcfec903c3fef532092fa82d10"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fb2c2b167238f82d9103b7fb78ad24918548c245", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb2c2b167238f82d9103b7fb78ad24918548c245", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb2c2b167238f82d9103b7fb78ad24918548c245", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb2c2b167238f82d9103b7fb78ad24918548c245/comments", "author": null, "committer": null, "parents": [{"sha": "7746e0a16c01b8646a09c2a2c9e636d397a6e546", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7746e0a16c01b8646a09c2a2c9e636d397a6e546", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7746e0a16c01b8646a09c2a2c9e636d397a6e546"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "f85d349b8e1cd3fbe662087d92c911a363bb3ce2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb2c2b167238f82d9103b7fb78ad24918548c245/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb2c2b167238f82d9103b7fb78ad24918548c245/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fb2c2b167238f82d9103b7fb78ad24918548c245", "patch": "@@ -1,3 +1,9 @@\n+2011-08-11  Ira Rosen  <ira.rosen@linaro.org>\n+\n+\tPR tree-optimization/50039\n+\t* tree-vect-patterns.c (vect_operation_fits_smaller_type): Check\n+\tthat DEF_STMT has a stmt_vec_info.\n+\n 2011-08-10  Richard Guenther  <rguenther@suse.de>\n \n \t* tree.h (can_trust_pointer_alignment): Remove."}, {"sha": "4ec4ba1e7f29aa253b9dfa22af120bea212d7840", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb2c2b167238f82d9103b7fb78ad24918548c245/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb2c2b167238f82d9103b7fb78ad24918548c245/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fb2c2b167238f82d9103b7fb78ad24918548c245", "patch": "@@ -1,3 +1,9 @@\n+2011-08-11  Ira Rosen  <ira.rosen@linaro.org>\n+\n+\tPR tree-optimization/50039\n+\t* gcc.dg/vect/vect.exp: Run no-tree-fre-* tests with -fno-tree-fre.\n+\t* gcc.dg/vect/no-tree-fre-pr50039.c: New test.\n+\n 2011-08-10  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* gcc.target/i386/sse4_1-blendps-2.c: Include <stdlib.h>."}, {"sha": "11c0c70049f05c121de08416ad31fc7b38c9351b", "filename": "gcc/testsuite/gcc.dg/vect/no-tree-fre-pr50039.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb2c2b167238f82d9103b7fb78ad24918548c245/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fno-tree-fre-pr50039.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb2c2b167238f82d9103b7fb78ad24918548c245/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fno-tree-fre-pr50039.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fno-tree-fre-pr50039.c?ref=fb2c2b167238f82d9103b7fb78ad24918548c245", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile } */\n+\n+extern unsigned char g_5;\n+extern int g_31, g_76;\n+int main(void) {\n+ int i, j;\n+    for (j=0; j < 2; ++j) {\n+        g_31 = -3;\n+        for (i=0; i < 2; ++i)\n+          g_76 = (g_31 ? g_31+1 : 0) ^ g_5;\n+    }\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */\n+"}, {"sha": "ab92be47ab86cc0a68f6f9a030108660308b11b7", "filename": "gcc/testsuite/gcc.dg/vect/vect.exp", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb2c2b167238f82d9103b7fb78ad24918548c245/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb2c2b167238f82d9103b7fb78ad24918548c245/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect.exp?ref=fb2c2b167238f82d9103b7fb78ad24918548c245", "patch": "@@ -257,6 +257,12 @@ lappend VECT_SLP_CFLAGS \"-fno-tree-reassoc\"\n dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/no-tree-reassoc-bb-slp-*.\\[cS\\]]]  \\\n         \"\" $VECT_SLP_CFLAGS\n \n+# -fno-tree-fre\n+set DEFAULT_VECTCFLAGS $SAVED_DEFAULT_VECTCFLAGS\n+lappend DEFAULT_VECTCFLAGS \"-fno-tree-fre\"\n+dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/no-tree-fre-*.\\[cS\\]]]  \\\n+        \"\" $DEFAULT_VECTCFLAGS\n+\n # Clean up.\n set dg-do-what-default ${save-dg-do-what-default}\n "}, {"sha": "ef6a4fd372d6a8f40e85747bfe9e68c9ffc71437", "filename": "gcc/tree-vect-patterns.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb2c2b167238f82d9103b7fb78ad24918548c245/gcc%2Ftree-vect-patterns.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb2c2b167238f82d9103b7fb78ad24918548c245/gcc%2Ftree-vect-patterns.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-patterns.c?ref=fb2c2b167238f82d9103b7fb78ad24918548c245", "patch": "@@ -897,7 +897,8 @@ vect_operation_fits_smaller_type (gimple stmt, tree def, tree *new_type,\n   else\n     {\n       first = true;\n-      if (!widened_name_p (oprnd, stmt, &half_type, &def_stmt, false))\n+      if (!widened_name_p (oprnd, stmt, &half_type, &def_stmt, false)\n+          || !vinfo_for_stmt (def_stmt))\n         return false;\n     }\n "}]}