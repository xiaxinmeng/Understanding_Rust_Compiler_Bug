{"sha": "cb6d4a9fce89e5bea9476338870125bac9b83e96", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2I2ZDRhOWZjZTg5ZTViZWE5NDc2MzM4ODcwMTI1YmFjOWI4M2U5Ng==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2005-06-08T11:09:13Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2005-06-08T11:09:13Z"}, "message": "re PR c++/19894 (pointer-to-void member not rejected in template)\n\n\tPR c++/19894\n\t* pt.c (tsubst): Reject pointer-to-member of type void.\n\n\t* g++.dg/template/ptrmem15.C: New test.\n\n\tPR c++/20563\n\t* parser.c (cp_parser_label_declaration): Deal with invalid/missing\n\tidentifiers.\n\n\t* g++.dg/ext/label4.C: New test.\n\nFrom-SVN: r100754", "tree": {"sha": "d807bfd40a0af5e5e71210780fe36ea13da24aee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d807bfd40a0af5e5e71210780fe36ea13da24aee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb6d4a9fce89e5bea9476338870125bac9b83e96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb6d4a9fce89e5bea9476338870125bac9b83e96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb6d4a9fce89e5bea9476338870125bac9b83e96", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb6d4a9fce89e5bea9476338870125bac9b83e96/comments", "author": null, "committer": null, "parents": [{"sha": "21956c07ad851e6fa1b3892cb87b495c11efc2ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21956c07ad851e6fa1b3892cb87b495c11efc2ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21956c07ad851e6fa1b3892cb87b495c11efc2ba"}], "stats": {"total": 44, "additions": 42, "deletions": 2}, "files": [{"sha": "c15f9b4043360555f26988a40c9ac90dda390f61", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=cb6d4a9fce89e5bea9476338870125bac9b83e96", "patch": "@@ -1,3 +1,12 @@\n+2005-06-08  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/19894\n+\t* pt.c (tsubst): Reject pointer-to-member of type void.\n+\n+\tPR c++/20563\n+\t* parser.c (cp_parser_label_declaration): Deal with invalid/missing\n+\tidentifiers.\n+\n 2005-06-07  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* cp-tree.def (DEFAULT_ARG): Adjust documentation."}, {"sha": "cb389d24afe9a6112c27b8535da8d85ba8ad108d", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=cb6d4a9fce89e5bea9476338870125bac9b83e96", "patch": "@@ -14392,7 +14392,10 @@ cp_parser_label_declaration (cp_parser* parser)\n \n       /* Look for an identifier.  */\n       identifier = cp_parser_identifier (parser);\n-      /* Declare it as a lobel.  */\n+      /* If we failed, stop.  */\n+      if (identifier == error_mark_node)\n+\tbreak;\n+      /* Declare it as a label.  */\n       finish_label_decl (identifier);\n       /* If the next token is a `;', stop.  */\n       if (cp_lexer_next_token_is (parser->lexer, CPP_SEMICOLON))"}, {"sha": "292dc0ae78b7b7a8e9df44bea26edf4522054dc5", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=cb6d4a9fce89e5bea9476338870125bac9b83e96", "patch": "@@ -7271,7 +7271,12 @@ tsubst (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n \t  {\n \t    if (complain & tf_error)\n \t      error (\"creating pointer to member reference type %qT\", type);\n-\t    \n+\t    return error_mark_node;\n+\t  }\n+\tif (TREE_CODE (type) == VOID_TYPE)\n+\t  {\n+\t    if (complain & tf_error)\n+\t      error (\"creating pointer to member of type void\");\n \t    return error_mark_node;\n \t  }\n \tgcc_assert (TREE_CODE (type) != METHOD_TYPE);"}, {"sha": "05aa1b4f33cf1dfc587a88bf3671db1d727e6cda", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cb6d4a9fce89e5bea9476338870125bac9b83e96", "patch": "@@ -1,3 +1,11 @@\n+2005-06-08  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/19894\n+\t* g++.dg/template/ptrmem15.C: New test.\n+\n+\tPR c++/20563\n+\t* g++.dg/ext/label4.C: New test.\n+\n 2005-06-08  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \t* gcc.dg/tls/debug-1.c: New test."}, {"sha": "80b50a799815fdfc1a5a76dc836541a895ee3550", "filename": "gcc/testsuite/g++.dg/ext/label4.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Flabel4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Flabel4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Flabel4.C?ref=cb6d4a9fce89e5bea9476338870125bac9b83e96", "patch": "@@ -0,0 +1,6 @@\n+// PR c++/20563: ICE (--enable-checking), infinite loop (--disable-checking)\n+// Origin:       Giovanni Bajo <giovannibajo@libero.it>\n+\n+// { dg-do compile }\n+\n+__label__ *l;  // { dg-error \"before\" }"}, {"sha": "553d2953fd9cd40b1dd926fe39f86df4742aa586", "filename": "gcc/testsuite/g++.dg/template/ptrmem15.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fptrmem15.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb6d4a9fce89e5bea9476338870125bac9b83e96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fptrmem15.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fptrmem15.C?ref=cb6d4a9fce89e5bea9476338870125bac9b83e96", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/19894\n+// Origin: Volker Reichelt <reichelt@igpm.rwth-aachen.de>\n+\n+template<typename T> struct A\n+{\n+    T A::* p;  // { dg-error \"void\" }\n+};\n+\n+A<void> a;     // { dg-error \"instantiated\" }"}]}