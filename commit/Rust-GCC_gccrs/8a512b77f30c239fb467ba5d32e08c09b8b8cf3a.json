{"sha": "8a512b77f30c239fb467ba5d32e08c09b8b8cf3a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGE1MTJiNzdmMzBjMjM5ZmI0NjdiYTVkMzJlMDhjMDliOGI4Y2YzYQ==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel1@de.ibm.com", "date": "2004-10-08T16:36:09Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2004-10-08T16:36:09Z"}, "message": "s390.c (s390_register_info): Don't save fprs for -msoft-float.\n\n2004-10-08  Andreas Krebbel  <krebbel1@de.ibm.com>\n\n\t* config/s390/s390.c (s390_register_info): Don't save fprs for\n\t-msoft-float.\n\t(s390_conditional_register_usage): Make fprs 'fixed' for -msoft-float.\n\nFrom-SVN: r88764", "tree": {"sha": "b82bb91fb09ceb97f207a7c28e24b483d89f6d31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b82bb91fb09ceb97f207a7c28e24b483d89f6d31"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8a512b77f30c239fb467ba5d32e08c09b8b8cf3a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a512b77f30c239fb467ba5d32e08c09b8b8cf3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a512b77f30c239fb467ba5d32e08c09b8b8cf3a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a512b77f30c239fb467ba5d32e08c09b8b8cf3a/comments", "author": null, "committer": null, "parents": [{"sha": "064e93c2c84363cbaaeda1104f7227515517099c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/064e93c2c84363cbaaeda1104f7227515517099c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/064e93c2c84363cbaaeda1104f7227515517099c"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "5ce51198f3b4ba83bd81161df24b2a63e7d5e621", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a512b77f30c239fb467ba5d32e08c09b8b8cf3a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a512b77f30c239fb467ba5d32e08c09b8b8cf3a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8a512b77f30c239fb467ba5d32e08c09b8b8cf3a", "patch": "@@ -1,3 +1,9 @@\n+2004-10-08  Andreas Krebbel  <krebbel1@de.ibm.com>\n+\n+\t* config/s390/s390.c (s390_register_info): Don't save fprs for \n+\t-msoft-float.\n+\t(s390_conditional_register_usage): Make fprs 'fixed' for -msoft-float.\n+\n 2004-10-08  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \t* config/s390/s390.h (TARGET_DEFAULT_BACKCHAIN): New define."}, {"sha": "1d4d813458b1e080a19e6fa8a894420f44eb88ea", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a512b77f30c239fb467ba5d32e08c09b8b8cf3a/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a512b77f30c239fb467ba5d32e08c09b8b8cf3a/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=8a512b77f30c239fb467ba5d32e08c09b8b8cf3a", "patch": "@@ -6219,8 +6219,9 @@ s390_register_info (int live_regs[])\n         cfun_frame_layout.last_save_gpr = 6;\n \n       /* Mark f0, f2 for 31 bit and f0-f4 for 64 bit to be saved.  */\n-      for (i = 0; i < (TARGET_64BIT ? 4 : 2); i++)\n-\tcfun_set_fpr_bit (i);\n+      if (TARGET_HARD_FLOAT)\n+\tfor (i = 0; i < (TARGET_64BIT ? 4 : 2); i++)\n+\t  cfun_set_fpr_bit (i);\n     }\n \n   if (!TARGET_64BIT)\n@@ -8403,6 +8404,12 @@ s390_conditional_register_usage (void)\n       for (i = 18; i < 20; i++)\n \tcall_used_regs[i] = call_really_used_regs[i] = 0;\n     }\n+\n+  if (TARGET_SOFT_FLOAT)\n+    {\n+      for (i = 16; i < 32; i++)\n+\tcall_used_regs[i] = fixed_regs[i] = 1;\n+    }\n }\n \n /* Corresponding function to eh_return expander.  */"}]}