{"sha": "75902396e6dbed2a3cacb42452992db156c6f32f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU5MDIzOTZlNmRiZWQyYTNjYWNiNDI0NTI5OTJkYjE1NmM2ZjMyZg==", "commit": {"author": {"name": "Jim Wilson", "email": "jimw@sifive.com", "date": "2018-09-25T01:27:06Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2018-09-25T01:27:06Z"}, "message": "RISC-V: Fix problems with ilp32e ABI support.\n\n\tgcc/\n\tPR target/87391\n\t* config/riscv/riscv.h (STACK_BOUNDARY): Test riscv_abi == ABI_ILP32E\n\tnot TARGET_RVE.\n\t(ABI_STACK_BOUNDARY, MAX_ARGS_IN_REGISTERS): Likewise.\n\nFrom-SVN: r264555", "tree": {"sha": "bd42915e3a2135af6222e00c3c3953f37de8039a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bd42915e3a2135af6222e00c3c3953f37de8039a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75902396e6dbed2a3cacb42452992db156c6f32f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75902396e6dbed2a3cacb42452992db156c6f32f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75902396e6dbed2a3cacb42452992db156c6f32f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75902396e6dbed2a3cacb42452992db156c6f32f/comments", "author": null, "committer": null, "parents": [{"sha": "0276f2c271c114762f7eaefd6e6efd25924cd3ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0276f2c271c114762f7eaefd6e6efd25924cd3ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0276f2c271c114762f7eaefd6e6efd25924cd3ea"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "c6b3167ac0c059b9d54a4527b017cc32abcfef76", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75902396e6dbed2a3cacb42452992db156c6f32f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75902396e6dbed2a3cacb42452992db156c6f32f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=75902396e6dbed2a3cacb42452992db156c6f32f", "patch": "@@ -1,3 +1,10 @@\n+2018-09-24  Jim Wilson  <jimw@sifive.com>\n+\n+\tPR target/87391\n+\t* config/riscv/riscv.h (STACK_BOUNDARY): Test riscv_abi == ABI_ILP32E\n+\tnot TARGET_RVE.\n+\t(ABI_STACK_BOUNDARY, MAX_ARGS_IN_REGISTERS): Likewise.\n+\n 2018-09-24  Andrew Pinski  <apinski@marvell.com>\n \n \t*  config/aarch64/aarch64.c (aarch_macro_fusion_pair_p): Don't"}, {"sha": "4bbb491ac87f49a6d02a8e300233f7c2d06eafce", "filename": "gcc/config/riscv/riscv.h", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75902396e6dbed2a3cacb42452992db156c6f32f/gcc%2Fconfig%2Friscv%2Friscv.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75902396e6dbed2a3cacb42452992db156c6f32f/gcc%2Fconfig%2Friscv%2Friscv.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Friscv.h?ref=75902396e6dbed2a3cacb42452992db156c6f32f", "patch": "@@ -126,10 +126,11 @@ along with GCC; see the file COPYING3.  If not see\n #define FUNCTION_BOUNDARY (TARGET_RVC ? 16 : 32)\n \n /* The smallest supported stack boundary the calling convention supports.  */\n-#define STACK_BOUNDARY (TARGET_RVE ? BITS_PER_WORD : 2 * BITS_PER_WORD)\n+#define STACK_BOUNDARY \\\n+  (riscv_abi == ABI_ILP32E ? BITS_PER_WORD : 2 * BITS_PER_WORD)\n \n /* The ABI stack alignment.  */\n-#define ABI_STACK_BOUNDARY (TARGET_RVE ? BITS_PER_WORD : 128)\n+#define ABI_STACK_BOUNDARY (riscv_abi == ABI_ILP32E ? BITS_PER_WORD : 128)\n \n /* There is no point aligning anything to a rounder boundary than this.  */\n #define BIGGEST_ALIGNMENT 128\n@@ -492,7 +493,7 @@ enum reg_class\n #define GP_RETURN GP_ARG_FIRST\n #define FP_RETURN (UNITS_PER_FP_ARG == 0 ? GP_RETURN : FP_ARG_FIRST)\n \n-#define MAX_ARGS_IN_REGISTERS (TARGET_RVE ? 6 : 8)\n+#define MAX_ARGS_IN_REGISTERS (riscv_abi == ABI_ILP32E ? 6 : 8)\n \n /* Symbolic macros for the first/last argument registers.  */\n "}]}