{"sha": "2802d48b3034ae2d2a51784315c9a6ae27ad2969", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjgwMmQ0OGIzMDM0YWUyZDJhNTE3ODQzMTVjOWE2YWUyN2FkMjk2OQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-07-11T00:26:25Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-07-11T00:26:25Z"}, "message": "runtime: Drop reflectFlags tests.\n\nThe flags were used by the reflect package in the past, but\nnot for a couple of years now.\n\nFrom-SVN: r212446", "tree": {"sha": "983ddb702bc48e4bb076ef6d435a60d099b51089", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/983ddb702bc48e4bb076ef6d435a60d099b51089"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2802d48b3034ae2d2a51784315c9a6ae27ad2969", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2802d48b3034ae2d2a51784315c9a6ae27ad2969", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2802d48b3034ae2d2a51784315c9a6ae27ad2969", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2802d48b3034ae2d2a51784315c9a6ae27ad2969/comments", "author": null, "committer": null, "parents": [{"sha": "cb40eec03a07c923ad83853ff7cf2f40a39ed0fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb40eec03a07c923ad83853ff7cf2f40a39ed0fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb40eec03a07c923ad83853ff7cf2f40a39ed0fb"}], "stats": {"total": 30, "additions": 0, "deletions": 30}, "files": [{"sha": "3555a65d9ccbe77a5961c081c80807ed74004351", "filename": "libgo/runtime/go-eface-compare.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fgo-eface-compare.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fgo-eface-compare.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-eface-compare.c?ref=2802d48b3034ae2d2a51784315c9a6ae27ad2969", "patch": "@@ -19,10 +19,6 @@ __go_empty_interface_compare (struct __go_empty_interface left,\n \n   left_descriptor = left.__type_descriptor;\n \n-  if (((uintptr_t) left_descriptor & reflectFlags) != 0\n-      || ((uintptr_t) right.__type_descriptor & reflectFlags) != 0)\n-    runtime_panicstring (\"invalid interface value\");\n-\n   if (left_descriptor == NULL && right.__type_descriptor == NULL)\n     return 0;\n   if (left_descriptor == NULL || right.__type_descriptor == NULL)"}, {"sha": "743f126ec1e4c4794d39406789a0efe7caec6903", "filename": "libgo/runtime/go-eface-val-compare.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fgo-eface-val-compare.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fgo-eface-val-compare.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-eface-val-compare.c?ref=2802d48b3034ae2d2a51784315c9a6ae27ad2969", "patch": "@@ -20,8 +20,6 @@ __go_empty_interface_value_compare (\n   const struct __go_type_descriptor *left_descriptor;\n \n   left_descriptor = left.__type_descriptor;\n-  if (((uintptr_t) left_descriptor & reflectFlags) != 0)\n-    runtime_panicstring (\"invalid interface value\");\n   if (left_descriptor == NULL)\n     return 1;\n   if (!__go_type_descriptors_equal (left_descriptor, right_descriptor))"}, {"sha": "a38917fd0c6d60bdedd59a8571f145fed3f92b55", "filename": "libgo/runtime/go-interface-eface-compare.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fgo-interface-eface-compare.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fgo-interface-eface-compare.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-interface-eface-compare.c?ref=2802d48b3034ae2d2a51784315c9a6ae27ad2969", "patch": "@@ -18,8 +18,6 @@ __go_interface_empty_compare (struct __go_interface left,\n {\n   const struct __go_type_descriptor *left_descriptor;\n \n-  if (((uintptr_t) right.__type_descriptor & reflectFlags) != 0)\n-    runtime_panicstring (\"invalid interface value\");\n   if (left.__methods == NULL && right.__type_descriptor == NULL)\n     return 0;\n   if (left.__methods == NULL || right.__type_descriptor == NULL)"}, {"sha": "30614d25112540e2d9bce150e30062aa5fa34ba9", "filename": "libgo/runtime/go-type-eface.c", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fgo-type-eface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fgo-type-eface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-type-eface.c?ref=2802d48b3034ae2d2a51784315c9a6ae27ad2969", "patch": "@@ -44,9 +44,6 @@ __go_type_equal_empty_interface (const void *vv1, const void *vv2,\n   v2 = (const struct __go_empty_interface *) vv2;\n   v1_descriptor = v1->__type_descriptor;\n   v2_descriptor = v2->__type_descriptor;\n-  if (((uintptr_t) v1_descriptor & reflectFlags) != 0\n-      || ((uintptr_t) v2_descriptor & reflectFlags) != 0)\n-    runtime_panicstring (\"invalid interface value\");\n   if (v1_descriptor == NULL || v2_descriptor == NULL)\n     return v1_descriptor == v2_descriptor;\n   if (!__go_type_descriptors_equal (v1_descriptor, v2_descriptor))"}, {"sha": "51c2355772d2373d1153c2b96998fe9ad929847f", "filename": "libgo/runtime/go-type.h", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fgo-type.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fgo-type.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-type.h?ref=2802d48b3034ae2d2a51784315c9a6ae27ad2969", "patch": "@@ -302,15 +302,6 @@ struct __go_struct_type\n   struct __go_open_array __fields;\n };\n \n-/* If an empty interface has these bits set in its type pointer, it\n-   was copied from a reflect.Value and is not a valid empty\n-   interface.  */\n-\n-enum \n-{\n-  reflectFlags = 3,\n-};\n-\n /* Whether a type descriptor is a pointer.  */\n \n static inline _Bool"}, {"sha": "0d5cb5e97aa01fbf72136fb9d9f8febb85a84770", "filename": "libgo/runtime/iface.goc", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fiface.goc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Fiface.goc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fiface.goc?ref=2802d48b3034ae2d2a51784315c9a6ae27ad2969", "patch": "@@ -32,8 +32,6 @@ func ifacetype(i interface) (d *const_descriptor) {\n \n // Convert an empty interface to an empty interface.\n func ifaceE2E2(e empty_interface) (ret empty_interface, ok bool) {\n-\tif(((uintptr_t)e.__type_descriptor&reflectFlags) != 0)\n-\t\truntime_panicstring(\"invalid interface value\");\n \tret = e;\n \tok = ret.__type_descriptor != nil;\n }\n@@ -53,8 +51,6 @@ func ifaceI2E2(i interface) (ret empty_interface, ok bool) {\n \n // Convert an empty interface to a non-empty interface.\n func ifaceE2I2(inter *descriptor, e empty_interface) (ret interface, ok bool) {\n-\tif(((uintptr_t)e.__type_descriptor&reflectFlags) != 0)\n-\t\truntime_panicstring(\"invalid interface value\");\n \tif (e.__type_descriptor == nil) {\n \t\tret.__methods = nil;\n \t\tret.__object = nil;\n@@ -84,8 +80,6 @@ func ifaceI2I2(inter *descriptor, i interface) (ret interface, ok bool) {\n \n // Convert an empty interface to a pointer type.\n func ifaceE2T2P(inter *descriptor, e empty_interface) (ret *void, ok bool) {\n-\tif(((uintptr_t)e.__type_descriptor&reflectFlags) != 0)\n-\t\truntime_panicstring(\"invalid interface value\");\n \tif (!__go_type_descriptors_equal(inter, e.__type_descriptor)) {\n \t\tret = nil;\n \t\tok = 0;\n@@ -109,8 +103,6 @@ func ifaceI2T2P(inter *descriptor, i interface) (ret *void, ok bool) {\n \n // Convert an empty interface to a non-pointer type.\n func ifaceE2T2(inter *descriptor, e empty_interface, ret *void) (ok bool) {\n-\tif(((uintptr_t)e.__type_descriptor&reflectFlags) != 0)\n-\t\truntime_panicstring(\"invalid interface value\");\n \tif (!__go_type_descriptors_equal(inter, e.__type_descriptor)) {\n \t\t__builtin_memset(ret, 0, inter->__size);\n \t\tok = 0;"}, {"sha": "4e493ee810a1ebced4023b58bd9bf67155a8910e", "filename": "libgo/runtime/reflect.goc", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Freflect.goc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2802d48b3034ae2d2a51784315c9a6ae27ad2969/libgo%2Fruntime%2Freflect.goc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Freflect.goc?ref=2802d48b3034ae2d2a51784315c9a6ae27ad2969", "patch": "@@ -12,8 +12,6 @@ func ifaceE2I(inter *Type, e Eface, ret *Iface) {\n \tconst Type *t;\n \tEface err;\n \n-\tif(((uintptr)e.__type_descriptor&reflectFlags) != 0)\n-\t\truntime_throw(\"invalid interface value\");\n \tt = e.__type_descriptor;\n \tif(t == nil) {\n \t\t// explicit conversions require non-nil interface value."}]}