{"sha": "591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTkxZjg2OWFkNzBiYTJiNWNmMWQ4YThiNTc1MjkxNDJjYzBkMDU1NA==", "commit": {"author": {"name": "Andrew Stubbs", "email": "ams@codesourcery.com", "date": "2020-02-03T15:02:22Z"}, "committer": {"name": "Andrew Stubbs", "email": "ams@codesourcery.com", "date": "2020-02-03T17:23:18Z"}, "message": "Remove gfx801 \"carrizo\" support\n\n2020-02-03  Andrew Stubbs  <ams@codesourcery.com>\n\n\tgcc/\n\t* config.gcc: Remove \"carrizo\" support.\n\t* config/gcn/gcn-opts.h (processor_type): Likewise.\n\t* config/gcn/gcn.c (gcn_omp_device_kind_arch_isa): Likewise.\n\t* config/gcn/gcn.opt (gpu_type): Likewise.\n\t* config/gcn/t-omp-device: Likewise.\n\n\tlibgomp/\n\t* plugin/plugin-gcn.c (EF_AMDGPU_MACH_AMDGCN_GFX801): Remove.\n\t(gcn_gfx801_s): Remove.\n\t(isa_hsa_name): Remove gfx801.\n\t(isa_gcc_name): Remove gfx801/carizzo.\n\t(isa_code): Remove gfx801.", "tree": {"sha": "bc964976f6ae43ea9e75385fadfcc3a5e3eca247", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bc964976f6ae43ea9e75385fadfcc3a5e3eca247"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "html_url": "https://github.com/Rust-GCC/gccrs/commit/591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/comments", "author": {"login": "ams-cs", "id": 2235130, "node_id": "MDQ6VXNlcjIyMzUxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2235130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ams-cs", "html_url": "https://github.com/ams-cs", "followers_url": "https://api.github.com/users/ams-cs/followers", "following_url": "https://api.github.com/users/ams-cs/following{/other_user}", "gists_url": "https://api.github.com/users/ams-cs/gists{/gist_id}", "starred_url": "https://api.github.com/users/ams-cs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ams-cs/subscriptions", "organizations_url": "https://api.github.com/users/ams-cs/orgs", "repos_url": "https://api.github.com/users/ams-cs/repos", "events_url": "https://api.github.com/users/ams-cs/events{/privacy}", "received_events_url": "https://api.github.com/users/ams-cs/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ams-cs", "id": 2235130, "node_id": "MDQ6VXNlcjIyMzUxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2235130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ams-cs", "html_url": "https://github.com/ams-cs", "followers_url": "https://api.github.com/users/ams-cs/followers", "following_url": "https://api.github.com/users/ams-cs/following{/other_user}", "gists_url": "https://api.github.com/users/ams-cs/gists{/gist_id}", "starred_url": "https://api.github.com/users/ams-cs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ams-cs/subscriptions", "organizations_url": "https://api.github.com/users/ams-cs/orgs", "repos_url": "https://api.github.com/users/ams-cs/repos", "events_url": "https://api.github.com/users/ams-cs/events{/privacy}", "received_events_url": "https://api.github.com/users/ams-cs/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3539fc1317267b30eb7c4ad48d52f4e46b3a198a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3539fc1317267b30eb7c4ad48d52f4e46b3a198a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3539fc1317267b30eb7c4ad48d52f4e46b3a198a"}], "stats": {"total": 39, "additions": 20, "deletions": 19}, "files": [{"sha": "fef79bb44d5620572c07a4a1118eeadeb84178b2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "patch": "@@ -1,3 +1,11 @@\n+2020-02-03  Andrew Stubbs  <ams@codesourcery.com>\n+\n+\t* config.gcc: Remove \"carrizo\" support.\n+\t* config/gcn/gcn-opts.h (processor_type): Likewise.\n+\t* config/gcn/gcn.c (gcn_omp_device_kind_arch_isa): Likewise.\n+\t* config/gcn/gcn.opt (gpu_type): Likewise.\n+\t* config/gcn/t-omp-device: Likewise.\n+\n 2020-02-03  Stam Markianos-Wright  <stam.markianos-wright@arm.com>\n \n \tPR target/91816"}, {"sha": "ae5a845fccea2a2c0d8ba2275972f664a2a9a26e", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "patch": "@@ -4404,7 +4404,7 @@ case \"${target}\" in\n \t\tfor which in arch tune; do\n \t\t\teval \"val=\\$with_$which\"\n \t\t\tcase ${val} in\n-\t\t\t\"\" | carrizo | fiji | gfx900 | gfx906 )\n+\t\t\t\"\" | fiji | gfx900 | gfx906 )\n \t\t\t\t# OK\n \t\t\t\t;;\n \t\t\t*)"}, {"sha": "385d2be867533e3f64c24cfbe2d88a04e7386a62", "filename": "gcc/config/gcn/gcn-opts.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2Fconfig%2Fgcn%2Fgcn-opts.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2Fconfig%2Fgcn%2Fgcn-opts.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fgcn%2Fgcn-opts.h?ref=591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "patch": "@@ -20,7 +20,6 @@\n /* Which processor to generate code or schedule for.  */\n enum processor_type\n {\n-  PROCESSOR_CARRIZO,\n   PROCESSOR_FIJI,\n   PROCESSOR_VEGA\n };"}, {"sha": "5bcad7d1d414e552a4791bf529c60524915392ab", "filename": "gcc/config/gcn/gcn.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2Fconfig%2Fgcn%2Fgcn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2Fconfig%2Fgcn%2Fgcn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fgcn%2Fgcn.c?ref=591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "patch": "@@ -2571,8 +2571,6 @@ gcn_omp_device_kind_arch_isa (enum omp_device_kind_arch_isa trait,\n     case omp_device_arch:\n       return strcmp (name, \"gcn\") == 0;\n     case omp_device_isa:\n-      if (strcmp (name, \"carrizo\") == 0)\n-\treturn gcn_arch == PROCESSOR_CARRIZO;\n       if (strcmp (name, \"fiji\") == 0)\n \treturn gcn_arch == PROCESSOR_FIJI;\n       if (strcmp (name, \"gfx900\") == 0)"}, {"sha": "04c73d64630b28a7c13628c5b76df618571bf38d", "filename": "gcc/config/gcn/gcn.opt", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2Fconfig%2Fgcn%2Fgcn.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2Fconfig%2Fgcn%2Fgcn.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fgcn%2Fgcn.opt?ref=591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "patch": "@@ -25,9 +25,6 @@ Enum\n Name(gpu_type) Type(enum processor_type)\n GCN GPU type to use:\n \n-EnumValue\n-Enum(gpu_type) String(carrizo) Value(PROCESSOR_CARRIZO)\n-\n EnumValue\n Enum(gpu_type) String(fiji) Value(PROCESSOR_FIJI)\n \n@@ -38,11 +35,11 @@ EnumValue\n Enum(gpu_type) String(gfx906) Value(PROCESSOR_VEGA)\n \n march=\n-Target RejectNegative Joined ToLower Enum(gpu_type) Var(gcn_arch) Init(PROCESSOR_CARRIZO)\n+Target RejectNegative Joined ToLower Enum(gpu_type) Var(gcn_arch) Init(PROCESSOR_FIJI)\n Specify the name of the target GPU.\n \n mtune=\n-Target RejectNegative Joined ToLower Enum(gpu_type) Var(gcn_tune) Init(PROCESSOR_CARRIZO)\n+Target RejectNegative Joined ToLower Enum(gpu_type) Var(gcn_tune) Init(PROCESSOR_FIJI)\n Specify the name of the target GPU.\n \n m32"}, {"sha": "d9809d5f4552bc49c01899c5bf39792150154f8b", "filename": "gcc/config/gcn/t-omp-device", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2Fconfig%2Fgcn%2Ft-omp-device", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/gcc%2Fconfig%2Fgcn%2Ft-omp-device", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fgcn%2Ft-omp-device?ref=591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "patch": "@@ -1,4 +1,4 @@\n omp-device-properties-gcn: $(srcdir)/config/gcn/gcn.c\n \techo kind: gpu > $@\n \techo arch: gcn >> $@\n-\techo isa: carrizo fiji gfx900 gfx906 >> $@\n+\techo isa: fiji gfx900 gfx906 >> $@"}, {"sha": "9b20b461841809b3adde93b0c6f7ebd4b9e2603f", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "patch": "@@ -1,3 +1,11 @@\n+2020-02-03  Andrew Stubbs  <ams@codesourcery.com>\n+\n+\t* plugin/plugin-gcn.c (EF_AMDGPU_MACH_AMDGCN_GFX801): Remove.\n+\t(gcn_gfx801_s): Remove.\n+\t(isa_hsa_name): Remove gfx801.\n+\t(isa_gcc_name): Remove gfx801/carizzo.\n+\t(isa_code): Remove gfx801.\n+\n 2020-02-03  Julian Brown  <julian@codesourcery.com>\n \t    Tobias Burnus  <tobias@codesourcery.com>\n "}, {"sha": "dc72c90962c2d4725beeb51619fc402e0ff6864b", "filename": "libgomp/plugin/plugin-gcn.c", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/libgomp%2Fplugin%2Fplugin-gcn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/591f869ad70ba2b5cf1d8a8b57529142cc0d0554/libgomp%2Fplugin%2Fplugin-gcn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fplugin%2Fplugin-gcn.c?ref=591f869ad70ba2b5cf1d8a8b57529142cc0d0554", "patch": "@@ -403,7 +403,6 @@ struct gcn_image_desc\n    See https://llvm.org/docs/AMDGPUUsage.html#amdgpu-ef-amdgpu-mach-table */\n \n typedef enum {\n-  EF_AMDGPU_MACH_AMDGCN_GFX801 = 0x028,\n   EF_AMDGPU_MACH_AMDGCN_GFX803 = 0x02a,\n   EF_AMDGPU_MACH_AMDGCN_GFX900 = 0x02c,\n   EF_AMDGPU_MACH_AMDGCN_GFX906 = 0x02f,\n@@ -1629,7 +1628,6 @@ elf_gcn_isa_field (Elf64_Ehdr *image)\n   return image->e_flags & EF_AMDGPU_MACH_MASK;\n }\n \n-const static char *gcn_gfx801_s = \"gfx801\";\n const static char *gcn_gfx803_s = \"gfx803\";\n const static char *gcn_gfx900_s = \"gfx900\";\n const static char *gcn_gfx906_s = \"gfx906\";\n@@ -1642,8 +1640,6 @@ static const char*\n isa_hsa_name (int isa) {\n   switch(isa)\n     {\n-    case EF_AMDGPU_MACH_AMDGCN_GFX801:\n-      return gcn_gfx801_s;\n     case EF_AMDGPU_MACH_AMDGCN_GFX803:\n       return gcn_gfx803_s;\n     case EF_AMDGPU_MACH_AMDGCN_GFX900:\n@@ -1662,8 +1658,6 @@ static const char*\n isa_gcc_name (int isa) {\n   switch(isa)\n     {\n-    case EF_AMDGPU_MACH_AMDGCN_GFX801:\n-      return \"carrizo\";\n     case EF_AMDGPU_MACH_AMDGCN_GFX803:\n       return \"fiji\";\n     default:\n@@ -1676,9 +1670,6 @@ isa_gcc_name (int isa) {\n \n static gcn_isa\n isa_code(const char *isa) {\n-  if (!strncmp (isa, gcn_gfx801_s, gcn_isa_name_len))\n-    return EF_AMDGPU_MACH_AMDGCN_GFX801;\n-\n   if (!strncmp (isa, gcn_gfx803_s, gcn_isa_name_len))\n     return EF_AMDGPU_MACH_AMDGCN_GFX803;\n "}]}