{"sha": "57711cd1b32defc3c3d95be529039b30133c70e1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTc3MTFjZDFiMzJkZWZjM2MzZDk1YmU1MjkwMzliMzAxMzNjNzBlMQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-09-16T22:54:12Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-09-16T22:54:12Z"}, "message": "re PR c++/33124 (C++ frontend should not warn about new a[0] in template context)\n\n/cp\n2007-09-16  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/33124\n\t* init.c (build_new): Remove warning for zero-element\n\tallocations.\n\n/testsuite\n2007-09-16  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/33124\n\t* g++.dg/warn/new1.C: Adjust.\n\t* g++.dg/torture/str_empty.C: Likewise.\n\nFrom-SVN: r128531", "tree": {"sha": "574bd1f2cca76ddd33dc33ff128bf4b3b27fa5f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/574bd1f2cca76ddd33dc33ff128bf4b3b27fa5f7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/57711cd1b32defc3c3d95be529039b30133c70e1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57711cd1b32defc3c3d95be529039b30133c70e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57711cd1b32defc3c3d95be529039b30133c70e1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57711cd1b32defc3c3d95be529039b30133c70e1/comments", "author": null, "committer": null, "parents": [{"sha": "348eea5f00fe47fa13c235e9e93c082b8b285f97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/348eea5f00fe47fa13c235e9e93c082b8b285f97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/348eea5f00fe47fa13c235e9e93c082b8b285f97"}], "stats": {"total": 31, "additions": 14, "deletions": 17}, "files": [{"sha": "aa4659f7654a0cd465006463aa4939d2dffc291d", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57711cd1b32defc3c3d95be529039b30133c70e1/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57711cd1b32defc3c3d95be529039b30133c70e1/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=57711cd1b32defc3c3d95be529039b30133c70e1", "patch": "@@ -1,3 +1,9 @@\n+2007-09-16  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/33124\n+\t* init.c (build_new): Remove warning for zero-element\n+\tallocations.\n+\n 2007-09-16  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tcp/"}, {"sha": "e11d18433b3cd99c6a61c80b0d38d76ed5c93a43", "filename": "gcc/cp/init.c", "status": "modified", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57711cd1b32defc3c3d95be529039b30133c70e1/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57711cd1b32defc3c3d95be529039b30133c70e1/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=57711cd1b32defc3c3d95be529039b30133c70e1", "patch": "@@ -2173,21 +2173,6 @@ build_new (tree placement, tree type, tree nelts, tree init,\n       if (!build_expr_type_conversion (WANT_INT | WANT_ENUM, nelts, false))\n \tpedwarn (\"size in array new must have integral type\");\n       nelts = cp_save_expr (cp_convert (sizetype, nelts));\n-      /* It is valid to allocate a zero-element array:\n-\n-\t   [expr.new]\n-\n-\t   When the value of the expression in a direct-new-declarator\n-\t   is zero, the allocation function is called to allocate an\n-\t   array with no elements.  The pointer returned by the\n-\t   new-expression is non-null.  [Note: If the library allocation\n-\t   function is called, the pointer returned is distinct from the\n-\t   pointer to any other object.]\n-\n-\t However, that is not generally useful, so we issue a\n-\t warning.  */\n-      if (integer_zerop (nelts))\n-\twarning (0, \"allocating zero-element array\");\n     }\n \n   /* ``A reference cannot be created by the new operator.  A reference"}, {"sha": "1c5209a66a576f291e95108117951bcc60aa55a2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57711cd1b32defc3c3d95be529039b30133c70e1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57711cd1b32defc3c3d95be529039b30133c70e1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=57711cd1b32defc3c3d95be529039b30133c70e1", "patch": "@@ -1,3 +1,9 @@\n+2007-09-16  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/33124\n+\t* g++.dg/warn/new1.C: Adjust.\n+\t* g++.dg/torture/str_empty.C: Likewise.\n+\n 2007-09-16  Richard Sandiford  <rsandifo@nildram.co.uk>\n \n \t* gcc.target/mips/dse-1.c: New test."}, {"sha": "e24f0b6ac9f73df4fdc7433666d4b8b0947472b2", "filename": "gcc/testsuite/g++.dg/torture/str_empty.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57711cd1b32defc3c3d95be529039b30133c70e1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fstr_empty.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57711cd1b32defc3c3d95be529039b30133c70e1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fstr_empty.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fstr_empty.C?ref=57711cd1b32defc3c3d95be529039b30133c70e1", "patch": "@@ -9,7 +9,7 @@ struct polynomial {\n \n void spline_rep1 ()\n {\n-  new polynomial[0];  // { dg-warning \"allocating zero-element array\" }\n+  new polynomial[0];  // { dg-bogus \"allocating zero-element array\" }\n }\n \n "}, {"sha": "b50b2c354e7adbcecac15b7aa61f4a1cf6a62c28", "filename": "gcc/testsuite/g++.dg/warn/new1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57711cd1b32defc3c3d95be529039b30133c70e1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fnew1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57711cd1b32defc3c3d95be529039b30133c70e1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fnew1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fnew1.C?ref=57711cd1b32defc3c3d95be529039b30133c70e1", "patch": "@@ -1,3 +1,3 @@\n void f() {\n-  new int[0]; // { dg-warning \"zero\" }\n+  new int[0]; // { dg-bogus \"zero\" }\n }"}]}