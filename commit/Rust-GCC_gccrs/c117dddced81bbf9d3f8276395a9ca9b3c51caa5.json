{"sha": "c117dddced81bbf9d3f8276395a9ca9b3c51caa5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzExN2RkZGNlZDgxYmJmOWQzZjgyNzYzOTVhOWNhOWIzYzUxY2FhNQ==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2003-02-09T04:25:16Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2003-02-09T04:25:16Z"}, "message": "optabs.c (expand_unop): Widen clz properly when clz is done via libcall.\n\n\t* optabs.c (expand_unop): Widen clz properly when clz is done\n\tvia libcall.\n\nFrom-SVN: r62595", "tree": {"sha": "9c41d4715db8183fa4cc21bb3b2577b70c3e259f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9c41d4715db8183fa4cc21bb3b2577b70c3e259f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c117dddced81bbf9d3f8276395a9ca9b3c51caa5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c117dddced81bbf9d3f8276395a9ca9b3c51caa5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c117dddced81bbf9d3f8276395a9ca9b3c51caa5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c117dddced81bbf9d3f8276395a9ca9b3c51caa5/comments", "author": null, "committer": null, "parents": [{"sha": "5053bdf8341e2af288d18c4fd07eb216d6732879", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5053bdf8341e2af288d18c4fd07eb216d6732879", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5053bdf8341e2af288d18c4fd07eb216d6732879"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "91d46e4b458626c9f41efe5c27582125e486f53f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c117dddced81bbf9d3f8276395a9ca9b3c51caa5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c117dddced81bbf9d3f8276395a9ca9b3c51caa5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c117dddced81bbf9d3f8276395a9ca9b3c51caa5", "patch": "@@ -1,3 +1,8 @@\n+2003-02-08  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* optabs.c (expand_unop): Widen clz properly when clz is done\n+\tvia libcall.\n+\n 2003-02-08  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/h8300/clzsi2.c: Replace \"GNU CC\" with \"GCC\"."}, {"sha": "226b199daa0a23f380ada018bca05b2c326b0895", "filename": "gcc/optabs.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c117dddced81bbf9d3f8276395a9ca9b3c51caa5/gcc%2Foptabs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c117dddced81bbf9d3f8276395a9ca9b3c51caa5/gcc%2Foptabs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptabs.c?ref=c117dddced81bbf9d3f8276395a9ca9b3c51caa5", "patch": "@@ -2722,6 +2722,14 @@ expand_unop (mode, unoptab, op0, target, unsignedp)\n \t      temp = expand_unop (wider_mode, unoptab, xop0, NULL_RTX,\n \t\t\t\t  unsignedp);\n \n+\t      /* If we are generating clz using wider mode, adjust the\n+\t\t result.  */\n+\t      if (unoptab == clz_optab && temp != 0)\n+\t\ttemp = expand_binop (wider_mode, sub_optab, temp,\n+\t\t\t\t     GEN_INT (GET_MODE_BITSIZE (wider_mode)\n+\t\t\t\t\t      - GET_MODE_BITSIZE (mode)),\n+\t\t\t\t     target, true, OPTAB_DIRECT);\n+\n \t      if (temp)\n \t\t{\n \t\t  if (class != MODE_INT)"}]}