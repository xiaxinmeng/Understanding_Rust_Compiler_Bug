{"sha": "9e46226d997030a197aaff707ce2cd678a6bd0c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWU0NjIyNmQ5OTcwMzBhMTk3YWFmZjcwN2NlMmNkNjc4YTZiZDBjNA==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2003-08-14T06:04:46Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2003-08-14T06:04:46Z"}, "message": "* protoize.c (substr): Delete, callers changed to `strstr'.\n\nFrom-SVN: r70430", "tree": {"sha": "180f85591962090333544eae1a66e261519685b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/180f85591962090333544eae1a66e261519685b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9e46226d997030a197aaff707ce2cd678a6bd0c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e46226d997030a197aaff707ce2cd678a6bd0c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e46226d997030a197aaff707ce2cd678a6bd0c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e46226d997030a197aaff707ce2cd678a6bd0c4/comments", "author": null, "committer": null, "parents": [{"sha": "c5d190371ba33d6b23cd39876baa3d999267614a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5d190371ba33d6b23cd39876baa3d999267614a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5d190371ba33d6b23cd39876baa3d999267614a"}], "stats": {"total": 33, "additions": 7, "deletions": 26}, "files": [{"sha": "c2572c72f909ab98202e09a2a1dc15eaa0b0a5de", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e46226d997030a197aaff707ce2cd678a6bd0c4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e46226d997030a197aaff707ce2cd678a6bd0c4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9e46226d997030a197aaff707ce2cd678a6bd0c4", "patch": "@@ -1,3 +1,7 @@\n+2003-08-14  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* protoize.c (substr): Delete, callers changed to `strstr'.\n+\n 2003-08-13  Zack Weinberg  <zack@codesourcery.com>\n \n \t* config.gcc (iq2000*-*-elf*): Don't set xm_file."}, {"sha": "0dd91e242196ade5e6153c6db70b31d382a67a55", "filename": "gcc/protoize.c", "status": "modified", "additions": 3, "deletions": 26, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e46226d997030a197aaff707ce2cd678a6bd0c4/gcc%2Fprotoize.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e46226d997030a197aaff707ce2cd678a6bd0c4/gcc%2Fprotoize.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprotoize.c?ref=9e46226d997030a197aaff707ce2cd678a6bd0c4", "patch": "@@ -79,7 +79,6 @@ extern void fancy_abort  (void) ATTRIBUTE_NORETURN;\n static void notice (const char *, ...) ATTRIBUTE_PRINTF_1;\n static char *savestring (const char *, unsigned int);\n static char *dupnstr (const char *, size_t);\n-static const char *substr (const char *, const char * const);\n static int safe_read (int, void *, int);\n static void safe_write (int, void *, int, const char *);\n static void save_pointers (void);\n@@ -548,28 +547,6 @@ dupnstr (const char *s, size_t n)\n   ret_val[n] = '\\0';\n   return ret_val;\n }\n-\n-/* Return a pointer to the first occurrence of s2 within s1 or NULL if s2\n-   does not occur within s1.  Assume neither s1 nor s2 are null pointers.  */\n-\n-static const char *\n-substr (const char *s1, const char *const s2)\n-{\n-  for (; *s1 ; s1++)\n-    {\n-      const char *p1;\n-      const char *p2;\n-      int c;\n-\n-      for (p1 = s1, p2 = s2; (c = *p2); p1++, p2++)\n-\tif (*p1 != c)\n-\t  goto outer;\n-      return s1;\n-outer:\n-      ;\n-    }\n-  return 0;\n-}\n \f\n /* Read LEN bytes at PTR from descriptor DESC, for file FILENAME,\n    retrying if necessary.  Return the actual number of bytes read.  */\n@@ -2516,7 +2493,7 @@ find_extern_def (const def_dec_info *head, const def_dec_info *user)\n \t        char *p;\n \n \t        strcpy (needed, user->ansi_decl);\n-\t        p = (NONCONST char *) substr (needed, user->hash_entry->symbol)\n+\t        p = strstr (needed, user->hash_entry->symbol)\n \t            + strlen (user->hash_entry->symbol) + 2;\n \t\t/* Avoid having ??? in the string.  */\n \t\t*p++ = '?';\n@@ -2875,7 +2852,7 @@ other_variable_style_function (const char *ansi_header)\n   /* See if we have a stdarg function, or a function which has stdarg style\n      parameters or a stdarg style return type.  */\n \n-  return substr (ansi_header, \"...\") != 0;\n+  return strstr (ansi_header, \"...\") != 0;\n \n #else /* !defined (UNPROTOIZE) */\n \n@@ -2889,7 +2866,7 @@ other_variable_style_function (const char *ansi_header)\n     {\n       const char *candidate;\n \n-      if ((candidate = substr (p, varargs_style_indicator)) == 0)\n+      if ((candidate = strstr (p, varargs_style_indicator)) == 0)\n \treturn 0;\n       else\n \tif (!is_id_char (candidate[-1]) && !is_id_char (candidate[len]))"}]}