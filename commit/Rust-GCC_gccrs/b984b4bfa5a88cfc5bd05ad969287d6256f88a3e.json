{"sha": "b984b4bfa5a88cfc5bd05ad969287d6256f88a3e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjk4NGI0YmZhNWE4OGNmYzViZDA1YWQ5NjkyODdkNjI1NmY4OGEzZQ==", "commit": {"author": {"name": "Frank Ch. Eigler", "email": "fche@redhat.com", "date": "2004-07-09T19:51:51Z"}, "committer": {"name": "Frank Ch. Eigler", "email": "fche@gcc.gnu.org", "date": "2004-07-09T19:51:51Z"}, "message": "Test case for g++/15861\n\n2004-07-09  Frank Ch. Eigler  <fche@redhat.com>\n\n\tTest case for g++/15861\n\t* testsuite/libmudflap.c++/ctors-[12].cxx: New test case halves.\n\t* testsuite/libmudflap.c++/ctors.exp: Driver.\n\t* testsuite/libmudflap.c++/c++frags.exp: Elide redundant default.\n\tLook only for *frag* test cases.\n\nFrom-SVN: r84392", "tree": {"sha": "592bc95ef11d7a025eaaa1012ee19ac150dec14c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/592bc95ef11d7a025eaaa1012ee19ac150dec14c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e/comments", "author": {"login": "fche", "id": 588885, "node_id": "MDQ6VXNlcjU4ODg4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/588885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fche", "html_url": "https://github.com/fche", "followers_url": "https://api.github.com/users/fche/followers", "following_url": "https://api.github.com/users/fche/following{/other_user}", "gists_url": "https://api.github.com/users/fche/gists{/gist_id}", "starred_url": "https://api.github.com/users/fche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fche/subscriptions", "organizations_url": "https://api.github.com/users/fche/orgs", "repos_url": "https://api.github.com/users/fche/repos", "events_url": "https://api.github.com/users/fche/events{/privacy}", "received_events_url": "https://api.github.com/users/fche/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "999a1ad4ec7212dc6ac0217750bcbbf86518c7db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/999a1ad4ec7212dc6ac0217750bcbbf86518c7db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/999a1ad4ec7212dc6ac0217750bcbbf86518c7db"}], "stats": {"total": 75, "additions": 73, "deletions": 2}, "files": [{"sha": "804359a0036d32565abf1fc5ad366283e96c507d", "filename": "libmudflap/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e/libmudflap%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e/libmudflap%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2FChangeLog?ref=b984b4bfa5a88cfc5bd05ad969287d6256f88a3e", "patch": "@@ -1,3 +1,11 @@\n+2004-07-09  Frank Ch. Eigler  <fche@redhat.com>\n+\n+\tTest case for g++/15861\n+\t* testsuite/libmudflap.c++/ctors-[12].cxx: New test case halves.\n+\t* testsuite/libmudflap.c++/ctors.exp: Driver.\n+\t* testsuite/libmudflap.c++/c++frags.exp: Elide redundant default.\n+\tLook only for *frag* test cases.\n+\n 2004-07-08  Frank Ch. Eigler  <fche@redhat.com>\n \n \tANSI C conversion, libmudflap specialization, recursion limiting."}, {"sha": "5eb69aa65282927906bf9f3556142d2f0f7b6729", "filename": "libmudflap/testsuite/libmudflap.c++/c++frags.exp", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fc%2B%2Bfrags.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fc%2B%2Bfrags.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fc%2B%2Bfrags.exp?ref=b984b4bfa5a88cfc5bd05ad969287d6256f88a3e", "patch": "@@ -6,9 +6,9 @@ dg-init\n global srcdir\n \n foreach flags [list {} {-static} {-O2} {-O3}] {\n-    foreach srcfile [lsort [glob -nocomplain ${srcdir}/libmudflap.c++/*.cxx]] {\n+    foreach srcfile [lsort [glob -nocomplain ${srcdir}/libmudflap.c++/*frag.cxx]] {\n \tset bsrc [file tail $srcfile]\n-\tsetenv MUDFLAP_OPTIONS \"-no-heur-proc-map -viol-segv\"\n+\tsetenv MUDFLAP_OPTIONS \"-viol-segv\"\n \tdg-runtest $srcfile $flags \"-fmudflap -lmudflap\"\n     }\n }"}, {"sha": "7717c805ca58ea6b7279668e66d6c70a7e1e37f0", "filename": "libmudflap/testsuite/libmudflap.c++/ctors-1.cxx", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fctors-1.cxx", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fctors-1.cxx", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fctors-1.cxx?ref=b984b4bfa5a88cfc5bd05ad969287d6256f88a3e", "patch": "@@ -0,0 +1,20 @@\n+#include <iostream>\n+\n+\n+extern char k [];\n+\n+class foo\n+{\n+ public:\n+  foo (char *m) { m [40] = 20; }\n+};\n+\n+\n+foo f1 (k);\n+foo f2 (k);\n+foo f3 (k);\n+\n+int main ()\n+{\n+  return 0;\n+}"}, {"sha": "c1a501979bf75331a04713b7521c0342ff618b88", "filename": "libmudflap/testsuite/libmudflap.c++/ctors-2.cxx", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fctors-2.cxx", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fctors-2.cxx", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fctors-2.cxx?ref=b984b4bfa5a88cfc5bd05ad969287d6256f88a3e", "patch": "@@ -0,0 +1 @@\n+char k [500];"}, {"sha": "a160bc9d340ea2b09b9c5aae346a464b5a706b24", "filename": "libmudflap/testsuite/libmudflap.c++/ctors.exp", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fctors.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b984b4bfa5a88cfc5bd05ad969287d6256f88a3e/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fctors.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Ftestsuite%2Flibmudflap.c%2B%2B%2Fctors.exp?ref=b984b4bfa5a88cfc5bd05ad969287d6256f88a3e", "patch": "@@ -0,0 +1,42 @@\n+\n+libmudflap-init c++\n+\n+dg-init\n+\n+global srcdir subdir\n+\n+foreach flags [list {} {-static} {-O2} {-O3}] {\n+    set l1 [libmudflap_target_compile \"$srcdir/$subdir/ctors-1.cxx\" \"ctors-1.o\" object {additional_flags=-fmudflap}]\n+    set test \"ctors-1 compilation ${flags}\"\n+    if [string match \"*mudflap cannot track lifetime of*k*\" $l1] { pass $test } { fail $test }\n+\n+    set l2 [libmudflap_target_compile \"$srcdir/$subdir/ctors-2.cxx\" \"ctors-2.o\" object {additional_flags=-fmudflap}]\n+    set test \"ctors-2 compilation ${flags}\"\n+    if [string match \"\" $l2]  { pass $test } { fail $test }\n+\n+    set l3 [libmudflap_target_compile \"ctors-1.o ctors-2.o\" \"ctors-12.exe\" executable {additional_flags=-fmudflap additional_flags=-lmudflap additional_flags=-lstdc++}]\n+    set test \"ctors-12 linkage ${flags}\"\n+    if [string match \"\" $l3]  { pass $test } { fail $test }\n+\n+    set l4 [libmudflap_target_compile \"ctors-2.o ctors-1.o\" \"ctors-21.exe\" executable {additional_flags=-fmudflap additional_flags=-lmudflap additional_flags=-lstdc++}]\n+    set test \"ctors-21 linkage ${flags}\"\n+    if [string match \"\" $l3]  { pass $test } { fail $test }\n+\n+    setenv MUDFLAP_OPTIONS \"-viol-segv\"\n+\n+    remote_spawn host \"./ctors-12.exe\"\n+    set l5 [remote_wait host 10]\n+    set test \"ctors-12 execution ${flags}\"\n+    if {[lindex $l5 0] == 0}  { pass $test } { fail $test }\n+\n+    remote_spawn host \"./ctors-21.exe\"\n+    set l6 [remote_wait host 10]\n+    set test \"ctors-21 execution ${flags}\"\n+    if {[lindex $l6 0] == 0}  { pass $test } { fail $test }\n+\n+    foreach f [glob -nocomplain \"ctors-*\"] {\n+       remote_file build delete $f\n+    }\n+}\n+\n+dg-finish"}]}