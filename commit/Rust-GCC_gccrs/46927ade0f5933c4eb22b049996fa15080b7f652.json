{"sha": "46927ade0f5933c4eb22b049996fa15080b7f652", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDY5MjdhZGUwZjU5MzNjNGViMjJiMDQ5OTk2ZmExNTA4MGI3ZjY1Mg==", "commit": {"author": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2019-11-13T11:13:57Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2019-11-13T11:13:57Z"}, "message": "PR fortran/92470 Fixes for CFI_address\n\n        libgfortran/\n        PR fortran/92470\n        * runtime/ISO_Fortran_binding.c (CFI_establish): Set lower_bound to 0\n        also for CFI_attribute_other.\n\n        gcc/testsuite/\n        PR fortran/92470\n        * gfortran.dg/ISO_Fortran_binding_1.c (establish_c): Add assert for\n        lower_bound == 0.\n\nFrom-SVN: r278128", "tree": {"sha": "83a041f06768458e390fa467c2bc8a32bd1bbf36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/83a041f06768458e390fa467c2bc8a32bd1bbf36"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46927ade0f5933c4eb22b049996fa15080b7f652", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46927ade0f5933c4eb22b049996fa15080b7f652", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46927ade0f5933c4eb22b049996fa15080b7f652", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46927ade0f5933c4eb22b049996fa15080b7f652/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0302955aeb7133bb3ff0a0e7673f0ca33152f036", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0302955aeb7133bb3ff0a0e7673f0ca33152f036", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0302955aeb7133bb3ff0a0e7673f0ca33152f036"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "1727bf0eac77b65809b3b68bedffbef7b5882a74", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46927ade0f5933c4eb22b049996fa15080b7f652/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46927ade0f5933c4eb22b049996fa15080b7f652/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=46927ade0f5933c4eb22b049996fa15080b7f652", "patch": "@@ -1,3 +1,9 @@\n+2019-11-13  Tobias Burnus  <tobias@codesourcery.com>\n+\n+\tPR fortran/92470\n+\t* gfortran.dg/ISO_Fortran_binding_1.c (establish_c): Add assert for\n+\tlower_bound == 0.\n+\n 2019-11-13  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* gcc.target/aarch64/sve/mask_struct_store_3.c: Add"}, {"sha": "a5714593c5221a802b622be39c7c5230ab113f62", "filename": "gcc/testsuite/gfortran.dg/ISO_Fortran_binding_1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46927ade0f5933c4eb22b049996fa15080b7f652/gcc%2Ftestsuite%2Fgfortran.dg%2FISO_Fortran_binding_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46927ade0f5933c4eb22b049996fa15080b7f652/gcc%2Ftestsuite%2Fgfortran.dg%2FISO_Fortran_binding_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2FISO_Fortran_binding_1.c?ref=46927ade0f5933c4eb22b049996fa15080b7f652", "patch": "@@ -109,6 +109,7 @@ int establish_c(CFI_cdesc_t * desc)\n \t\t      CFI_attribute_pointer,\n \t\t      CFI_type_struct,\n \t\t      sizeof(t), 1, extent);\n+  assert (desc->dim[0].lower_bound == 0);\n   for (idx[0] = 0; idx[0] < extent[0]; idx[0]++)\n     {\n       res_addr = (t*)CFI_address (desc, idx);"}, {"sha": "0727ade0104ab7e49e8cdcc6bfdb58d5395619ea", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46927ade0f5933c4eb22b049996fa15080b7f652/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46927ade0f5933c4eb22b049996fa15080b7f652/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=46927ade0f5933c4eb22b049996fa15080b7f652", "patch": "@@ -1,3 +1,9 @@\n+2019-11-13  Tobias Burnus  <tobias@codesourcery.com>\n+\n+\tPR fortran/92470\n+\t* runtime/ISO_Fortran_binding.c (CFI_establish): Set lower_bound to 0\n+\talso for CFI_attribute_other.\n+\n 2019-11-12  Tobias Burnus  <tobias@codesourcery.com>\n \n \tPR fortran/92470"}, {"sha": "91d9ae46d3d8a35b5d5505d62a165bd688af49f7", "filename": "libgfortran/runtime/ISO_Fortran_binding.c", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46927ade0f5933c4eb22b049996fa15080b7f652/libgfortran%2Fruntime%2FISO_Fortran_binding.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46927ade0f5933c4eb22b049996fa15080b7f652/libgfortran%2Fruntime%2FISO_Fortran_binding.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fruntime%2FISO_Fortran_binding.c?ref=46927ade0f5933c4eb22b049996fa15080b7f652", "patch": "@@ -387,13 +387,7 @@ int CFI_establish (CFI_cdesc_t *dv, void *base_addr, CFI_attribute_t attribute,\n \n       for (int i = 0; i < rank; i++)\n \t{\n-\t  /* If the C Descriptor is for a pointer then the lower bounds of every\n-\t   * dimension are set to zero. */\n-\t  if (attribute == CFI_attribute_pointer)\n-\t    dv->dim[i].lower_bound = 0;\n-\t  else\n-\t    dv->dim[i].lower_bound = 1;\n-\n+\t  dv->dim[i].lower_bound = 0;\n \t  dv->dim[i].extent = extents[i];\n \t  if (i == 0)\n \t    dv->dim[i].sm = dv->elem_len;"}]}