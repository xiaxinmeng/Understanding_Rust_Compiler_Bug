{"sha": "316d4b547e6de0d43de81011508fe23aa009b38a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzE2ZDRiNTQ3ZTZkZTBkNDNkZTgxMDExNTA4ZmUyM2FhMDA5YjM4YQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-06-17T18:52:18Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-06-17T18:52:18Z"}, "message": "typeck.c (build_binary_op_nodefault): Change % in format strings to %%.\n\n\t* typeck.c (build_binary_op_nodefault): Change % in format strings\n\tto %%.\n\t* decl.c (grokvardecl): Don't build_static_name for decls that\n\taren't at namespace scope.\n\t* init.c (perform_member_init): Catch default-initialization of\n\treferences.\n\nFrom-SVN: r20547", "tree": {"sha": "f0406a4e85227b69fba61107d1c37b346895e280", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f0406a4e85227b69fba61107d1c37b346895e280"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/316d4b547e6de0d43de81011508fe23aa009b38a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/316d4b547e6de0d43de81011508fe23aa009b38a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/316d4b547e6de0d43de81011508fe23aa009b38a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/316d4b547e6de0d43de81011508fe23aa009b38a/comments", "author": null, "committer": null, "parents": [{"sha": "77f194c29905bf0b828f3867a7d44b7368fe0228", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77f194c29905bf0b828f3867a7d44b7368fe0228", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77f194c29905bf0b828f3867a7d44b7368fe0228"}], "stats": {"total": 25, "additions": 21, "deletions": 4}, "files": [{"sha": "f3e2cfb7f402106bcae4f0f9b5e38e2a59cb8faf", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316d4b547e6de0d43de81011508fe23aa009b38a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316d4b547e6de0d43de81011508fe23aa009b38a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=316d4b547e6de0d43de81011508fe23aa009b38a", "patch": "@@ -1,3 +1,14 @@\n+1998-06-17  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* typeck.c (build_binary_op_nodefault): Change % in format strings\n+\tto %%.\n+\n+\t* decl.c (grokvardecl): Don't build_static_name for decls that\n+\taren't at namespace scope.\n+\n+\t* init.c (perform_member_init): Catch default-initialization of\n+\treferences.\n+\n 1998-06-17  Mark Mitchell  <mark@markmitchell.com>\n \n \t* errfn.c (cp_thing): Handle the `%%' formatting sequence.\n@@ -139,7 +150,7 @@\n \n 1998-06-10  Jason Merrill  <jason@yorick.cygnus.com>\n \n-\t* init.c (resolve_offset_ref): Handle default-initialization.\n+\t* init.c (perform_member_init): Handle default-initialization.\n \n \t* except.c (build_throw): Handle throwing NULL.\n "}, {"sha": "6e5b102345ae282949f3e215a16864c62110f98e", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316d4b547e6de0d43de81011508fe23aa009b38a/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316d4b547e6de0d43de81011508fe23aa009b38a/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=316d4b547e6de0d43de81011508fe23aa009b38a", "patch": "@@ -7848,7 +7848,7 @@ grokvardecl (type, declarator, specbits_in, initialized, constp, in_namespace)\n     {\n       tree context = in_namespace ? in_namespace : current_namespace;\n       decl = build_decl (VAR_DECL, declarator, complete_type (type));\n-      if (context != global_namespace && declarator)\n+      if (context != global_namespace && namespace_bindings_p ())\n \tDECL_ASSEMBLER_NAME (decl) =  build_static_name (context,\n \t\t\t\t\t\t\t declarator);\n     }"}, {"sha": "798915544212c7bb954a71e04bba73b4214ef7f6", "filename": "gcc/cp/init.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316d4b547e6de0d43de81011508fe23aa009b38a/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316d4b547e6de0d43de81011508fe23aa009b38a/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=316d4b547e6de0d43de81011508fe23aa009b38a", "patch": "@@ -200,6 +200,12 @@ perform_member_init (member, name, init, explicit)\n \t      /* default-initialization.  */\n \t      if (AGGREGATE_TYPE_P (type))\n \t\tinit = build (CONSTRUCTOR, type, NULL_TREE, NULL_TREE);\n+\t      else if (TREE_CODE (type) == REFERENCE_TYPE)\n+\t\t{\n+\t\t  cp_error (\"default-initialization of `%#D', which has reference type\",\n+\t\t\t    member);\n+\t\t  init = error_mark_node;\n+\t\t}\n \t      else\n \t\tinit = integer_zero_node;\n \t    }"}, {"sha": "5176c56711264af55dabed0cb700376c03436f68", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/316d4b547e6de0d43de81011508fe23aa009b38a/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/316d4b547e6de0d43de81011508fe23aa009b38a/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=316d4b547e6de0d43de81011508fe23aa009b38a", "patch": "@@ -3354,9 +3354,9 @@ build_binary_op_nodefault (code, orig_op0, orig_op1, error_code)\n     case TRUNC_MOD_EXPR:\n     case FLOOR_MOD_EXPR:\n       if (code1 == INTEGER_TYPE && integer_zerop (op1))\n-\tcp_warning (\"division by zero in `%E % 0'\", op0);\n+\tcp_warning (\"division by zero in `%E %% 0'\", op0);\n       else if (code1 == REAL_TYPE && real_zerop (op1))\n-\tcp_warning (\"division by zero in `%E % 0.'\", op0);\n+\tcp_warning (\"division by zero in `%E %% 0.'\", op0);\n       \n       if (code0 == INTEGER_TYPE && code1 == INTEGER_TYPE)\n \t{"}]}