{"sha": "02fa47a905c1e06a5490032cc4bd4f733f4a0453", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDJmYTQ3YTkwNWMxZTA2YTU0OTAwMzJjYzRiZDRmNzMzZjRhMDQ1Mw==", "commit": {"author": {"name": "Carl Love", "email": "cel@us.ibm.com", "date": "2018-06-28T19:45:07Z"}, "committer": {"name": "Carl Love", "email": "carll@gcc.gnu.org", "date": "2018-06-28T19:45:07Z"}, "message": "p9-extract-1.c: Add test case.\n\ngcc/testsuite/ChangeLog:\n\n2018-06-28  Carl Love  <cel@us.ibm.com>\n\n\t* gcc.target/p9-extract-1.c: Add test case.\n\t* gcc.target/builtins-3-p9-runnable.c: Add test case to match\n\tname in ABI.\n\nFrom-SVN: r262230", "tree": {"sha": "11b4a5baf84587b2de21fa211474b5b9df3d38b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/11b4a5baf84587b2de21fa211474b5b9df3d38b9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02fa47a905c1e06a5490032cc4bd4f733f4a0453", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02fa47a905c1e06a5490032cc4bd4f733f4a0453", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02fa47a905c1e06a5490032cc4bd4f733f4a0453", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02fa47a905c1e06a5490032cc4bd4f733f4a0453/comments", "author": {"login": "carlelove", "id": 86435705, "node_id": "MDQ6VXNlcjg2NDM1NzA1", "avatar_url": "https://avatars.githubusercontent.com/u/86435705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlelove", "html_url": "https://github.com/carlelove", "followers_url": "https://api.github.com/users/carlelove/followers", "following_url": "https://api.github.com/users/carlelove/following{/other_user}", "gists_url": "https://api.github.com/users/carlelove/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlelove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlelove/subscriptions", "organizations_url": "https://api.github.com/users/carlelove/orgs", "repos_url": "https://api.github.com/users/carlelove/repos", "events_url": "https://api.github.com/users/carlelove/events{/privacy}", "received_events_url": "https://api.github.com/users/carlelove/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "81c8283fb6fe366ce6b1615cf3d05427e2f91d14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81c8283fb6fe366ce6b1615cf3d05427e2f91d14", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81c8283fb6fe366ce6b1615cf3d05427e2f91d14"}], "stats": {"total": 56, "additions": 56, "deletions": 0}, "files": [{"sha": "58860c7aebd12af739f72fa286ad955c45636b83", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02fa47a905c1e06a5490032cc4bd4f733f4a0453/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02fa47a905c1e06a5490032cc4bd4f733f4a0453/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=02fa47a905c1e06a5490032cc4bd4f733f4a0453", "patch": "@@ -1,3 +1,9 @@\n+2018-06-28  Carl Love  <cel@us.ibm.com>\n+\n+\t* gcc.target/p9-extract-1.c: Add test case.\n+\t* gcc.target/builtins-3-p9-runnable.c: Add test case to match\n+\tname in ABI.\n+\n 2018-06-28  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/86348"}, {"sha": "35a81a7facba6bd9e361f62b967468699925e918", "filename": "gcc/testsuite/gcc.target/powerpc/builtins-3-p9-runnable.c", "status": "modified", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02fa47a905c1e06a5490032cc4bd4f733f4a0453/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3-p9-runnable.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02fa47a905c1e06a5490032cc4bd4f733f4a0453/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3-p9-runnable.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3-p9-runnable.c?ref=02fa47a905c1e06a5490032cc4bd4f733f4a0453", "patch": "@@ -30,6 +30,48 @@ int main() {\n    printf (\"                                0B011110100000000, 0B1011010000000000};\\n\\n\");\n #endif\n \n+   /* The ABI lists the builtins as:\n+\n+        vec_extract_fp32_from_shorth()\n+        vec_extract_fp32_from_shortl()\n+\n+      GCC will also accept and map the builtin names\n+\n+        vec_extract_fp_from_shorth()\n+        vec_extract_fp_from_shortl()\n+\n+      to the same builtins internally.  For completeness,\n+      test both builtin function names.  */\n+\n+   vfexpt = (vector float){1.0, -2.0, 0.0, 8.5};\n+   vfr = vec_extract_fp32_from_shorth(vusha);\n+\n+#ifdef DEBUG\n+   printf (\"vec_extract_fp32_from_shorth\\n\");\n+   for (i=0; i<4; i++)\n+     printf(\"result[%d] = %f; expected[%d] = %f\\n\",\n+\t    i, vfr[i], i, vfexpt[i]);\n+#endif\n+\n+   for (i=0; i<4; i++) {\n+      if (vfr[i] != vfexpt[i])\n+         abort();\n+   }\n+\n+   vfexpt = (vector float){1.5, 0.5, 1.25, -0.25};\n+   vfr = vec_extract_fp32_from_shortl(vusha);\n+\n+#ifdef DEBUG\n+   printf (\"\\nvec_extract_fp32_from_shortl\\n\");\n+   for (i=0; i<4; i++)\n+     printf(\"result[%d] = %f; expected[%d] = %f\\n\",\n+\t    i, vfr[i], i, vfexpt[i]);\n+#endif\n+\n+    for (i=0; i<4; i++) {\n+      if (vfr[i] != vfexpt[i])\n+         abort();\n+   }\n    vfexpt = (vector float){1.0, -2.0, 0.0, 8.5};\n    vfr = vec_extract_fp_from_shorth(vusha);\n "}, {"sha": "203f5bf5def1eac924771ba9f910246bce680a47", "filename": "gcc/testsuite/gcc.target/powerpc/p9-extract-1.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02fa47a905c1e06a5490032cc4bd4f733f4a0453/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fp9-extract-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02fa47a905c1e06a5490032cc4bd4f733f4a0453/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fp9-extract-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fp9-extract-1.c?ref=02fa47a905c1e06a5490032cc4bd4f733f4a0453", "patch": "@@ -122,6 +122,14 @@ extract_bool_int_0 (vector bool int a)\n   return b;\n }\n \n+unsigned short int\n+extract_bool_short_int_0 (vector bool short int a)\n+{\n+  int c = 0;\n+  unsigned short int b = vec_extract (a, c);\n+  return b;\n+}\n+\n /* { dg-final { scan-assembler     \"vextub\\[lr\\]x \" } } */\n /* { dg-final { scan-assembler     \"vextuh\\[lr\\]x \" } } */\n /* { dg-final { scan-assembler     \"vextuw\\[lr\\]x \" } } */"}]}