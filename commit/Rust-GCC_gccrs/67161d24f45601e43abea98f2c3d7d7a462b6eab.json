{"sha": "67161d24f45601e43abea98f2c3d7d7a462b6eab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjcxNjFkMjRmNDU2MDFlNDNhYmVhOThmMmMzZDdkN2E0NjJiNmVhYg==", "commit": {"author": {"name": "Peter Bergner", "email": "bergner@linux.ibm.com", "date": "2020-06-26T00:06:37Z"}, "committer": {"name": "Peter Bergner", "email": "bergner@linux.ibm.com", "date": "2020-06-26T21:28:39Z"}, "message": "rs6000: Add support for __builtin_cpu_is (\"power10\")\n\nAdd support for __builtin_cpu_is (\"power10\").  Also add documentation for\nthe recently added \"arch_3_1\" and \"mma\" __builtin_cpu_supports arguments.\n\n2020-06-25  Peter Bergner  <bergner@linux.ibm.com>\n\ngcc/\n\t* config/rs6000/rs6000-call.c (cpu_is_info) <power10>: New.\n\t* doc/extend.texi (PowerPC Built-in Functions): Document power10,\n\tarch_3_1 and mma.\n\ngcc/testsuite/\n\t* gcc.target/powerpc/cpu-builtin-1.c: Add tests for power10, arch_3_1\n\tand mma.", "tree": {"sha": "e81f31c9d43af69f4c3b7e8d9b26728e463e65f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e81f31c9d43af69f4c3b7e8d9b26728e463e65f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67161d24f45601e43abea98f2c3d7d7a462b6eab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67161d24f45601e43abea98f2c3d7d7a462b6eab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67161d24f45601e43abea98f2c3d7d7a462b6eab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67161d24f45601e43abea98f2c3d7d7a462b6eab/comments", "author": {"login": "peter-bergner", "id": 17504345, "node_id": "MDQ6VXNlcjE3NTA0MzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/17504345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peter-bergner", "html_url": "https://github.com/peter-bergner", "followers_url": "https://api.github.com/users/peter-bergner/followers", "following_url": "https://api.github.com/users/peter-bergner/following{/other_user}", "gists_url": "https://api.github.com/users/peter-bergner/gists{/gist_id}", "starred_url": "https://api.github.com/users/peter-bergner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peter-bergner/subscriptions", "organizations_url": "https://api.github.com/users/peter-bergner/orgs", "repos_url": "https://api.github.com/users/peter-bergner/repos", "events_url": "https://api.github.com/users/peter-bergner/events{/privacy}", "received_events_url": "https://api.github.com/users/peter-bergner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "peter-bergner", "id": 17504345, "node_id": "MDQ6VXNlcjE3NTA0MzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/17504345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peter-bergner", "html_url": "https://github.com/peter-bergner", "followers_url": "https://api.github.com/users/peter-bergner/followers", "following_url": "https://api.github.com/users/peter-bergner/following{/other_user}", "gists_url": "https://api.github.com/users/peter-bergner/gists{/gist_id}", "starred_url": "https://api.github.com/users/peter-bergner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peter-bergner/subscriptions", "organizations_url": "https://api.github.com/users/peter-bergner/orgs", "repos_url": "https://api.github.com/users/peter-bergner/repos", "events_url": "https://api.github.com/users/peter-bergner/events{/privacy}", "received_events_url": "https://api.github.com/users/peter-bergner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0801f419440c14f6772b28f763ad7d40f7f7a580", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0801f419440c14f6772b28f763ad7d40f7f7a580", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0801f419440c14f6772b28f763ad7d40f7f7a580"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "d3cf2de88780e2f9cb81af858b8b00ab9ee9b04f", "filename": "gcc/config/rs6000/rs6000-call.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67161d24f45601e43abea98f2c3d7d7a462b6eab/gcc%2Fconfig%2Frs6000%2Frs6000-call.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67161d24f45601e43abea98f2c3d7d7a462b6eab/gcc%2Fconfig%2Frs6000%2Frs6000-call.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-call.c?ref=67161d24f45601e43abea98f2c3d7d7a462b6eab", "patch": "@@ -105,6 +105,7 @@ static const struct\n   const char *cpu;\n   unsigned int cpuid;\n } cpu_is_info[] = {\n+  { \"power10\",\t   PPC_PLATFORM_POWER10 },\n   { \"power9\",\t   PPC_PLATFORM_POWER9 },\n   { \"power8\",\t   PPC_PLATFORM_POWER8 },\n   { \"power7\",\t   PPC_PLATFORM_POWER7 },"}, {"sha": "343fbba8223186523002e431fddcb1f889b66b94", "filename": "gcc/doc/extend.texi", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67161d24f45601e43abea98f2c3d7d7a462b6eab/gcc%2Fdoc%2Fextend.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67161d24f45601e43abea98f2c3d7d7a462b6eab/gcc%2Fdoc%2Fextend.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fextend.texi?ref=67161d24f45601e43abea98f2c3d7d7a462b6eab", "patch": "@@ -17123,6 +17123,8 @@ issues a warning.\n The following CPU names can be detected:\n \n @table @samp\n+@item power10\n+IBM POWER10 Server CPU.\n @item power9\n IBM POWER9 Server CPU.\n @item power8\n@@ -17199,6 +17201,8 @@ CPU supports ISA 2.06 (eg, POWER7)\n CPU supports ISA 2.07 (eg, POWER8)\n @item arch_3_00\n CPU supports ISA 3.0 (eg, POWER9)\n+@item arch_3_1\n+CPU supports ISA 3.1 (eg, POWER10)\n @item archpmu\n CPU supports the set of compatible performance monitoring events.\n @item booke\n@@ -17232,6 +17236,8 @@ CPU supports icache snooping capabilities.\n CPU supports 128-bit IEEE binary floating point instructions.\n @item isel\n CPU supports the integer select instruction.\n+@item mma\n+CPU supports the matrix-multiply assist instructions.\n @item mmu\n CPU has a memory management unit.\n @item notb"}, {"sha": "2bcf6f679daa51d8deaa93d7c1ac8123f7932486", "filename": "gcc/testsuite/gcc.target/powerpc/cpu-builtin-1.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67161d24f45601e43abea98f2c3d7d7a462b6eab/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fcpu-builtin-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67161d24f45601e43abea98f2c3d7d7a462b6eab/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fcpu-builtin-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fcpu-builtin-1.c?ref=67161d24f45601e43abea98f2c3d7d7a462b6eab", "patch": "@@ -24,6 +24,7 @@ use_cpu_is_builtins (unsigned int *p)\n   p[12] = __builtin_cpu_is (\"ppc440\");\n   p[13] = __builtin_cpu_is (\"ppc405\");\n   p[14] = __builtin_cpu_is (\"ppc-cell-be\");\n+  p[15] = __builtin_cpu_is (\"power10\");\n #else\n   p[0] = 0;\n #endif\n@@ -74,6 +75,8 @@ use_cpu_supports_builtins (unsigned int *p)\n   p[38] = __builtin_cpu_supports (\"darn\");\n   p[39] = __builtin_cpu_supports (\"scv\");\n   p[40] = __builtin_cpu_supports (\"htm-no-suspend\");\n+  p[41] = __builtin_cpu_supports (\"arch_3_1\");\n+  p[42] = __builtin_cpu_supports (\"mma\");\n #else\n   p[0] = 0;\n #endif"}]}