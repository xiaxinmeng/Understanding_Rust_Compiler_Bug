{"sha": "faa396c4eee228108802135f9aa0986254aca8e4", "node_id": "C_kwDOANBUbNoAKGZhYTM5NmM0ZWVlMjI4MTA4ODAyMTM1ZjlhYTA5ODYyNTRhY2E4ZTQ", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@adacore.com", "date": "2021-07-31T15:02:47Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2021-09-23T13:06:16Z"}, "message": "[Ada] Add N_Has_Bounds and N_Is_Index\n\ngcc/ada/\n\n\t* einfo-utils.adb (Next_Index): Verify input and output are\n\tN_Is_Index.\n\t* gen_il-gen-gen_nodes.adb (N_Has_Bounds, N_Is_Index): Add.\n\t* gen_il-types.ads (N_Has_Bounds, N_Is_Index): Likewise.\n\t* sem_ch3.adb (Array_Type_Declaration): Use Next, not\n\tNext_Index.\n\t* sem_ch12.adb (Formal_Dimensions): Likewise.\n\t* sem_util.adb (Is_Valid_Renaming): Likewise.", "tree": {"sha": "a723dad1c0d847ae4b411f4b2afb3ee591859760", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a723dad1c0d847ae4b411f4b2afb3ee591859760"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/faa396c4eee228108802135f9aa0986254aca8e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/faa396c4eee228108802135f9aa0986254aca8e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/faa396c4eee228108802135f9aa0986254aca8e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/faa396c4eee228108802135f9aa0986254aca8e4/comments", "author": {"login": "richardkenner", "id": 56170968, "node_id": "MDQ6VXNlcjU2MTcwOTY4", "avatar_url": "https://avatars.githubusercontent.com/u/56170968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richardkenner", "html_url": "https://github.com/richardkenner", "followers_url": "https://api.github.com/users/richardkenner/followers", "following_url": "https://api.github.com/users/richardkenner/following{/other_user}", "gists_url": "https://api.github.com/users/richardkenner/gists{/gist_id}", "starred_url": "https://api.github.com/users/richardkenner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richardkenner/subscriptions", "organizations_url": "https://api.github.com/users/richardkenner/orgs", "repos_url": "https://api.github.com/users/richardkenner/repos", "events_url": "https://api.github.com/users/richardkenner/events{/privacy}", "received_events_url": "https://api.github.com/users/richardkenner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ead89f5f1491c13025704d036223b257e00e89d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ead89f5f1491c13025704d036223b257e00e89d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ead89f5f1491c13025704d036223b257e00e89d3"}], "stats": {"total": 25, "additions": 21, "deletions": 4}, "files": [{"sha": "c6c3277b346935247c240909ff3cbd55f72a16fe", "filename": "gcc/ada/einfo-utils.adb", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Feinfo-utils.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Feinfo-utils.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo-utils.adb?ref=faa396c4eee228108802135f9aa0986254aca8e4", "patch": "@@ -1976,6 +1976,8 @@ package body Einfo.Utils is\n \n    function Next_Index (Id : Node_Id) return Node_Id is\n    begin\n+      pragma Assert (Nkind (Id) in N_Is_Index);\n+      pragma Assert (No (Next (Id)) or else Nkind (Next (Id)) in N_Is_Index);\n       return Next (Id);\n    end Next_Index;\n "}, {"sha": "43d77f2032f509b06f687a92334fad5938aed0b5", "filename": "gcc/ada/gen_il-gen-gen_nodes.adb", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Fgen_il-gen-gen_nodes.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Fgen_il-gen-gen_nodes.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgen_il-gen-gen_nodes.adb?ref=faa396c4eee228108802135f9aa0986254aca8e4", "patch": "@@ -1649,4 +1649,17 @@ begin -- Gen_IL.Gen.Gen_Nodes\n              N_Terminate_Alternative));\n    --  Nodes with condition fields (does not include N_Raise_xxx_Error)\n \n+   Union (N_Has_Bounds,\n+          Children =>\n+            (N_Range,\n+             N_Real_Range_Specification,\n+             N_Signed_Integer_Type_Definition));\n+   --  Nodes that have Low_Bound and High_Bound defined\n+\n+   Union (N_Is_Index,\n+          Children =>\n+            (N_Has_Bounds,\n+             N_Has_Entity,\n+             N_Subtype_Indication));\n+   --  Nodes that can be an index of an array\n end Gen_IL.Gen.Gen_Nodes;"}, {"sha": "3df185de2b37a5c04416ec2cebe05387a1cea012", "filename": "gcc/ada/gen_il-types.ads", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Fgen_il-types.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Fgen_il-types.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgen_il-types.ads?ref=faa396c4eee228108802135f9aa0986254aca8e4", "patch": "@@ -88,9 +88,12 @@ package Gen_IL.Types is\n       N_Generic_Declaration,\n       N_Generic_Instantiation,\n       N_Generic_Renaming_Declaration,\n+      N_Has_Bounds,\n       N_Has_Chars,\n+      N_Has_Condition,\n       N_Has_Entity,\n       N_Has_Etype,\n+      N_Is_Index,\n       N_Multiplying_Operator,\n       N_Later_Decl_Item,\n       N_Membership_Test,\n@@ -111,7 +114,6 @@ package Gen_IL.Types is\n       N_Statement_Other_Than_Procedure_Call,\n       N_Subprogram_Call,\n       N_Subprogram_Instantiation,\n-      N_Has_Condition,\n       N_Subexpr,\n       N_Subprogram_Specification,\n       N_Unary_Op,"}, {"sha": "e4cb7e3229c39135419be975dea459558a00198d", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=faa396c4eee228108802135f9aa0986254aca8e4", "patch": "@@ -13047,7 +13047,7 @@ package body Sem_Ch12 is\n \n             while Present (Index) loop\n                Num := Num + 1;\n-               Next_Index (Index);\n+               Next (Index);\n             end loop;\n \n             return Num;"}, {"sha": "bf81f763faaed8474b75482f7a2be126c073d356", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=faa396c4eee228108802135f9aa0986254aca8e4", "patch": "@@ -6254,7 +6254,7 @@ package body Sem_Ch3 is\n \n          --  Move to next index\n \n-         Next_Index (Index);\n+         Next (Index);\n          Nb_Index := Nb_Index + 1;\n       end loop;\n "}, {"sha": "de18f75f0215bff6c9a794a95042a21ed7a027b1", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/faa396c4eee228108802135f9aa0986254aca8e4/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=faa396c4eee228108802135f9aa0986254aca8e4", "patch": "@@ -7445,7 +7445,7 @@ package body Sem_Util is\n                      return False;\n                   end if;\n \n-                  Next_Index (Indx);\n+                  Next (Indx);\n                end loop;\n             end;\n "}]}