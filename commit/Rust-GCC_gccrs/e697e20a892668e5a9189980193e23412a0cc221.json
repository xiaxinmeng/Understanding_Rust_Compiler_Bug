{"sha": "e697e20a892668e5a9189980193e23412a0cc221", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTY5N2UyMGE4OTI2NjhlNWE5MTg5OTgwMTkzZTIzNDEyYTBjYzIyMQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-05-20T10:37:50Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-05-20T10:37:50Z"}, "message": "expr.h (lang_expand_constant): Declare.\n\n\t* expr.h (lang_expand_constant): Declare.\n\t* toplev.c (lang_expand_constant): Define it.\n\t* varasm.c (output_constant): Use it.\n\nFrom-SVN: r27058", "tree": {"sha": "63b68f9258232c111fa185a58bb0c65f557a3d2a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/63b68f9258232c111fa185a58bb0c65f557a3d2a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e697e20a892668e5a9189980193e23412a0cc221", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e697e20a892668e5a9189980193e23412a0cc221", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e697e20a892668e5a9189980193e23412a0cc221", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e697e20a892668e5a9189980193e23412a0cc221/comments", "author": null, "committer": null, "parents": [{"sha": "f96b337ae42e599a58d93473061854c2fb34d749", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f96b337ae42e599a58d93473061854c2fb34d749", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f96b337ae42e599a58d93473061854c2fb34d749"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "82c95ac1cae8235a401d4f2cb3625addffabe532", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e697e20a892668e5a9189980193e23412a0cc221/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e697e20a892668e5a9189980193e23412a0cc221/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e697e20a892668e5a9189980193e23412a0cc221", "patch": "@@ -1,3 +1,9 @@\n+Thu May 20 10:38:43 1999  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* expr.h (lang_expand_constant): Declare.\n+\t* toplev.c (lang_expand_constant): Define it.\n+\t* varasm.c (output_constant): Use it.\n+\n Thu May 20 11:28:53 1999  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* optabs.c (expand_cmplxdiv_straight, expand_cmplxdiv_wide):"}, {"sha": "2164ccd9d06452f112b9d473029651427ab9436b", "filename": "gcc/expr.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e697e20a892668e5a9189980193e23412a0cc221/gcc%2Fexpr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e697e20a892668e5a9189980193e23412a0cc221/gcc%2Fexpr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.h?ref=e697e20a892668e5a9189980193e23412a0cc221", "patch": "@@ -1015,6 +1015,12 @@ extern rtx (*lang_expand_expr) PROTO ((union tree_node *, rtx,\n \t\t\t\t       enum machine_mode,\n \t\t\t\t       enum expand_modifier modifier));\n \n+/* Hook called by output_constant for language-specific tree codes.\n+   It is up to the language front-end to install a hook if it has any\n+   such codes that output_constant needs to know about.  Returns a\n+   language-independent constant equivalent to its input.  */\n+extern union tree_node * (*lang_expand_constant) PROTO((tree));\n+\n extern void init_all_optabs\t\t\tPROTO ((void));\n extern void init_mov_optab\t\t\tPROTO ((void));\n extern void do_jump_by_parts_equality_rtx\tPROTO((rtx, rtx, rtx));"}, {"sha": "92617f799dc007ff86fd66eff33f9de478c16037", "filename": "gcc/toplev.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e697e20a892668e5a9189980193e23412a0cc221/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e697e20a892668e5a9189980193e23412a0cc221/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=e697e20a892668e5a9189980193e23412a0cc221", "patch": "@@ -375,6 +375,8 @@ typedef rtx (*lang_expand_expr_t)\n \n lang_expand_expr_t lang_expand_expr = 0;\n \n+tree (*lang_expand_constant) PROTO((tree)) = 0;\n+\n /* Pointer to function to finish handling an incomplete decl at the\n    end of compilation.  */\n "}, {"sha": "4f9229053256d91ae2cec6f81074c90e19313d9a", "filename": "gcc/varasm.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e697e20a892668e5a9189980193e23412a0cc221/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e697e20a892668e5a9189980193e23412a0cc221/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=e697e20a892668e5a9189980193e23412a0cc221", "patch": "@@ -3897,6 +3897,13 @@ output_constant (exp, size)\n {\n   register enum tree_code code = TREE_CODE (TREE_TYPE (exp));\n \n+  /* Some front-ends use constants other than the standard\n+     language-indepdent varieties, but which may still be output\n+     directly.  Give the front-end a chance to convert EXP to a\n+     language-independent representation.  */\n+  if (lang_expand_constant)\n+    exp = (*lang_expand_constant) (exp);\n+\n   if (size == 0 || flag_syntax_only)\n     return;\n "}]}