{"sha": "89fc36051e8045d8bb086b3228c1aec280884097", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODlmYzM2MDUxZTgwNDVkOGJiMDg2YjMyMjhjMWFlYzI4MDg4NDA5Nw==", "commit": {"author": {"name": "Ziemowit Laski", "email": "zlaski@apple.com", "date": "2001-09-06T00:26:34Z"}, "committer": {"name": "Stan Shebs", "email": "shebs@gcc.gnu.org", "date": "2001-09-06T00:26:34Z"}, "message": "objc-act.c (build_message_expr): If a class method cannot be found...\n\n2001-09-05  Ziemowit Laski  <zlaski@apple.com>\n\n        * objc/objc-act.c (build_message_expr): If a class method cannot\n        be found, do not issue a warning if a corresponding instance\n        method exists in the root class.\n\n2001-09-05  Ziemowit Laski  <zlaski@apple.com>\n\n        * objc.dg/method-2.m: New.\n\nFrom-SVN: r45428", "tree": {"sha": "f5f3d8aa668421ed73489dd49d533e1aed497a2a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f5f3d8aa668421ed73489dd49d533e1aed497a2a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/89fc36051e8045d8bb086b3228c1aec280884097", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89fc36051e8045d8bb086b3228c1aec280884097", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89fc36051e8045d8bb086b3228c1aec280884097", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89fc36051e8045d8bb086b3228c1aec280884097/comments", "author": null, "committer": null, "parents": [{"sha": "2d25bf5d526dae1fbeffc3dbc88b75d824b27ea9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d25bf5d526dae1fbeffc3dbc88b75d824b27ea9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d25bf5d526dae1fbeffc3dbc88b75d824b27ea9"}], "stats": {"total": 48, "additions": 45, "deletions": 3}, "files": [{"sha": "6605eb313d01e6dc3995e33af66e19edede83926", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89fc36051e8045d8bb086b3228c1aec280884097/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89fc36051e8045d8bb086b3228c1aec280884097/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=89fc36051e8045d8bb086b3228c1aec280884097", "patch": "@@ -1,3 +1,9 @@\n+2001-09-05  Ziemowit Laski  <zlaski@apple.com>\n+\n+        * objc/objc-act.c (build_message_expr): If a class method cannot\n+\tbe found, do not issue a warning if a corresponding instance\n+\tmethod exists in the root class.\n+\n 2001-09-05  Richard Henderson  <rth@redhat.com>\n \n \t* config/alpha/alpha.c (alpha_expand_mov): Initialize temp."}, {"sha": "358d0ea3b73159d38ceed3f54ce518f1d82a89b6", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89fc36051e8045d8bb086b3228c1aec280884097/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89fc36051e8045d8bb086b3228c1aec280884097/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=89fc36051e8045d8bb086b3228c1aec280884097", "patch": "@@ -5177,8 +5177,7 @@ build_message_expr (mess)\n \t    method_prototype = lookup_class_method_static (iface, sel_name);\n \t}\n \n-      if (!method_prototype \n-          || TREE_CODE (method_prototype) != CLASS_METHOD_DECL)\n+      if (!method_prototype)\n \t{\n \t  warning (\"cannot find class (factory) method.\");\n \t  warning (\"return type for `%s' defaults to id\",\n@@ -5687,7 +5686,9 @@ lookup_class_method_static (interface, ident)\n     }\n   while (inter);\n \n-  /* Simulate wrap around.  */\n+  /* If no class (factory) method was found, check if an _instance_\n+     method of the same name exists in the root class.  This is what\n+     the Objective-C runtime will do.  */\n   return lookup_instance_method_static (root_inter, ident);\n }\n "}, {"sha": "0b5516cb79b8bc22207f1fc8efdb0c38ae3c5b11", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89fc36051e8045d8bb086b3228c1aec280884097/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89fc36051e8045d8bb086b3228c1aec280884097/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=89fc36051e8045d8bb086b3228c1aec280884097", "patch": "@@ -1,3 +1,7 @@\n+2001-09-05  Ziemowit Laski  <zlaski@apple.com>\n+\n+\t* objc.dg/method-2.m: New.\n+\t\n 2001-09-04  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/4203"}, {"sha": "b4cd4da637693111ae6079ae8083f613f9cf4a27", "filename": "gcc/testsuite/objc.dg/method-2.m", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89fc36051e8045d8bb086b3228c1aec280884097/gcc%2Ftestsuite%2Fobjc.dg%2Fmethod-2.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89fc36051e8045d8bb086b3228c1aec280884097/gcc%2Ftestsuite%2Fobjc.dg%2Fmethod-2.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fmethod-2.m?ref=89fc36051e8045d8bb086b3228c1aec280884097", "patch": "@@ -0,0 +1,31 @@\n+/* Test for lookup of class (factory) methods.  */\n+/* Author: Ziemowit Laski <zlaski@apple.com>.  */\n+/* { dg-do compile } */\n+\n+@interface MyBase \n+- (void) rootInstanceMethod;\n+@end\n+\n+@interface MyIntermediate: MyBase\n+@end\n+\n+@interface MyDerived: MyIntermediate\n+- (void) instanceMethod;\n++ (void) classMethod;\n+@end\n+\n+@implementation MyDerived\n+- (void) instanceMethod {\n+}\n+\n++ (void) classMethod {                    /* If a class method is not found, the root  */\n+    [self rootInstanceMethod];            /* class is searched for an instance method  */\n+    [MyIntermediate rootInstanceMethod];  /* with the same name.                       */\n+\n+    [self instanceMethod];       /* { dg-warning \"cannot find class\" } */\n+    /* { dg-warning \"defaults to id\" \"\" { target *-*-* } 25 } */\n+    [MyDerived instanceMethod];  /* { dg-warning \"cannot find class\" } */\n+    /* { dg-warning \"defaults to id\" \"\" { target *-*-* } 27 } */ \n+}\n+@end\n+"}]}