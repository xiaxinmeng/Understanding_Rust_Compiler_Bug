{"sha": "749bd22ddc50b5112e5ed506ffef7249bf8e6fb3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzQ5YmQyMmRkYzUwYjUxMTJlNWVkNTA2ZmZlZjcyNDliZjhlNmZiMw==", "commit": {"author": {"name": "Maciej W. Rozycki", "email": "macro@wdc.com", "date": "2020-04-06T22:32:45Z"}, "committer": {"name": "Maciej W. Rozycki", "email": "macro@wdc.com", "date": "2020-04-06T22:32:45Z"}, "message": "libgomp/test: Remove a build sysroot fix regression\n\nFix a problem with commit c8e759b4215b (\"libgomp/test: Fix compilation\nfor build sysroot\") that caused a regression in some standalone test\nenvironments where testsuite/libgomp-test-support.exp is used, but the\ncompiler is expected to be determined by `[find_gcc]', and set the\nGCC_UNDER_TEST TCL variable in testsuite/libgomp-site-extra.exp instead.\n\n\tlibgomp/\n\t* configure.ac: Add testsuite/libgomp-site-extra.exp to output\n\tfiles.\n\t* configure: Regenerate.\n\t* testsuite/libgomp-site-extra.exp.in: New file.\n\t* testsuite/libgomp-test-support.exp.in (GCC_UNDER_TEST): Remove\n\tvariable.\n\t* testsuite/Makefile.am (EXTRA_DEJAGNU_SITE_CONFIG): New\n\tvariable.\n\t* testsuite/Makefile.in: Regenerate.", "tree": {"sha": "4ab4c9318f014f4494a32933abab33abac3fc36c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4ab4c9318f014f4494a32933abab33abac3fc36c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/comments", "author": null, "committer": null, "parents": [{"sha": "5ff06d762a88077aff0fb637c931c64e6f47f93d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ff06d762a88077aff0fb637c931c64e6f47f93d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ff06d762a88077aff0fb637c931c64e6f47f93d"}], "stats": {"total": 27, "additions": 24, "deletions": 3}, "files": [{"sha": "6f7327ab4a757299e6d8c2ebbd49d6975be9f71c", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=749bd22ddc50b5112e5ed506ffef7249bf8e6fb3", "patch": "@@ -1,3 +1,15 @@\n+2020-04-06  Maciej W. Rozycki  <macro@wdc.com>\n+\n+\t* configure.ac: Add testsuite/libgomp-site-extra.exp to output\n+\tfiles.\n+\t* configure: Regenerate.\n+\t* testsuite/libgomp-site-extra.exp.in: New file.\n+\t* testsuite/libgomp-test-support.exp.in (GCC_UNDER_TEST): Remove\n+\tvariable.\n+\t* testsuite/Makefile.am (EXTRA_DEJAGNU_SITE_CONFIG): New\n+\tvariable.\n+\t* testsuite/Makefile.in: Regenerate.\n+\n 2020-04-03  Thomas Schwinge  <thomas@codesourcery.com>\n \n \tPR tree-optimization/89713"}, {"sha": "d8d98f182d4cc4672ac48fc4f04f0a32071eac3e", "filename": "libgomp/configure", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure?ref=749bd22ddc50b5112e5ed506ffef7249bf8e6fb3", "patch": "@@ -17047,6 +17047,8 @@ ac_config_files=\"$ac_config_files Makefile testsuite/Makefile libgomp.spec\"\n \n ac_config_files=\"$ac_config_files testsuite/libgomp-test-support.pt.exp:testsuite/libgomp-test-support.exp.in\"\n \n+ac_config_files=\"$ac_config_files testsuite/libgomp-site-extra.exp\"\n+\n cat >confcache <<\\_ACEOF\n # This file is a shell script that caches the results of configure\n # tests run on this system so they can be shared between configure\n@@ -18200,6 +18202,7 @@ do\n     \"testsuite/Makefile\") CONFIG_FILES=\"$CONFIG_FILES testsuite/Makefile\" ;;\n     \"libgomp.spec\") CONFIG_FILES=\"$CONFIG_FILES libgomp.spec\" ;;\n     \"testsuite/libgomp-test-support.pt.exp\") CONFIG_FILES=\"$CONFIG_FILES testsuite/libgomp-test-support.pt.exp:testsuite/libgomp-test-support.exp.in\" ;;\n+    \"testsuite/libgomp-site-extra.exp\") CONFIG_FILES=\"$CONFIG_FILES testsuite/libgomp-site-extra.exp\" ;;\n \n   *) as_fn_error $? \"invalid argument: \\`$ac_config_target'\" \"$LINENO\" 5;;\n   esac"}, {"sha": "ef5d293c31e99abf5e069166d38bd3cf71f235fa", "filename": "libgomp/configure.ac", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure.ac?ref=749bd22ddc50b5112e5ed506ffef7249bf8e6fb3", "patch": "@@ -436,4 +436,5 @@ GCC_BASE_VER\n AC_CONFIG_FILES(omp.h omp_lib.h omp_lib.f90 libgomp_f.h)\n AC_CONFIG_FILES(Makefile testsuite/Makefile libgomp.spec)\n AC_CONFIG_FILES([testsuite/libgomp-test-support.pt.exp:testsuite/libgomp-test-support.exp.in])\n+AC_CONFIG_FILES([testsuite/libgomp-site-extra.exp])\n AC_OUTPUT"}, {"sha": "655a413c160b5686c159b6ce2b89b01c621c1f11", "filename": "libgomp/testsuite/Makefile.am", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Ftestsuite%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Ftestsuite%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2FMakefile.am?ref=749bd22ddc50b5112e5ed506ffef7249bf8e6fb3", "patch": "@@ -12,6 +12,8 @@ _RUNTEST = $(shell if test -f $(top_srcdir)/../dejagnu/runtest; then \\\n \t     echo $(top_srcdir)/../dejagnu/runtest; else echo runtest; fi)\n RUNTESTDEFAULTFLAGS = --tool $$tool --srcdir $$srcdir\n \n+EXTRA_DEJAGNU_SITE_CONFIG = libgomp-site-extra.exp\n+\n # Instead of directly in ../testsuite/libgomp-test-support.exp.in, the\n # following variables have to be \"routed through\" this Makefile, for expansion\n # of the several (Makefile) variables used therein."}, {"sha": "52aa6c5fbc9ed76b161fbeb879bbdd0853956fc4", "filename": "libgomp/testsuite/Makefile.in", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2FMakefile.in?ref=749bd22ddc50b5112e5ed506ffef7249bf8e6fb3", "patch": "@@ -111,7 +111,8 @@ am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \\\n DIST_COMMON = $(srcdir)/Makefile.am\n mkinstalldirs = $(SHELL) $(top_srcdir)/../mkinstalldirs\n CONFIG_HEADER = $(top_builddir)/config.h\n-CONFIG_CLEAN_FILES = libgomp-test-support.pt.exp\n+CONFIG_CLEAN_FILES = libgomp-test-support.pt.exp \\\n+\tlibgomp-site-extra.exp\n CONFIG_CLEAN_VPATH_FILES =\n AM_V_P = $(am__v_P_@AM_V@)\n am__v_P_ = $(am__v_P_@AM_DEFAULT_V@)\n@@ -310,6 +311,7 @@ _RUNTEST = $(shell if test -f $(top_srcdir)/../dejagnu/runtest; then \\\n \t     echo $(top_srcdir)/../dejagnu/runtest; else echo runtest; fi)\n \n RUNTESTDEFAULTFLAGS = --tool $$tool --srcdir $$srcdir\n+EXTRA_DEJAGNU_SITE_CONFIG = libgomp-site-extra.exp\n all: all-am\n \n .SUFFIXES:\n@@ -344,6 +346,8 @@ $(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)\n $(am__aclocal_m4_deps):\n libgomp-test-support.pt.exp: $(top_builddir)/config.status $(srcdir)/libgomp-test-support.exp.in\n \tcd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@\n+libgomp-site-extra.exp: $(top_builddir)/config.status $(srcdir)/libgomp-site-extra.exp.in\n+\tcd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@\n \n mostlyclean-libtool:\n \t-rm -f *.lo"}, {"sha": "c0d26660bad96f7fcaba6a9073f7fadfff685c0e", "filename": "libgomp/testsuite/libgomp-site-extra.exp.in", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Ftestsuite%2Flibgomp-site-extra.exp.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Ftestsuite%2Flibgomp-site-extra.exp.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp-site-extra.exp.in?ref=749bd22ddc50b5112e5ed506ffef7249bf8e6fb3", "patch": "@@ -0,0 +1 @@\n+set GCC_UNDER_TEST {@CC@}"}, {"sha": "98fb442b5370e078e1e0d5c0c864774930d83a47", "filename": "libgomp/testsuite/libgomp-test-support.exp.in", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Ftestsuite%2Flibgomp-test-support.exp.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/749bd22ddc50b5112e5ed506ffef7249bf8e6fb3/libgomp%2Ftestsuite%2Flibgomp-test-support.exp.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp-test-support.exp.in?ref=749bd22ddc50b5112e5ed506ffef7249bf8e6fb3", "patch": "@@ -1,5 +1,3 @@\n-set GCC_UNDER_TEST {@CC@}\n-\n set cuda_driver_include \"@CUDA_DRIVER_INCLUDE@\"\n set cuda_driver_lib \"@CUDA_DRIVER_LIB@\"\n set hsa_runtime_lib \"@HSA_RUNTIME_LIB@\""}]}