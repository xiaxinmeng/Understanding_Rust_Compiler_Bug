{"sha": "dfc55970936e74f5305b4170d51f37e33982f901", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZjNTU5NzA5MzZlNzRmNTMwNWI0MTcwZDUxZjM3ZTMzOTgyZjkwMQ==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@wolery.stanford.edu", "date": "2000-11-22T00:18:18Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-11-22T00:18:18Z"}, "message": "stringpool.c (stringpool_statistics): Also report number and percentage of entries which are identifiers.\n\n\t* stringpool.c (stringpool_statistics): Also report number and\n\tpercentage of entries which are identifiers.\n\nFrom-SVN: r37633", "tree": {"sha": "e887ed32697fcd124a74f19e4d01ea9aa3657f62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e887ed32697fcd124a74f19e4d01ea9aa3657f62"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dfc55970936e74f5305b4170d51f37e33982f901", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfc55970936e74f5305b4170d51f37e33982f901", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfc55970936e74f5305b4170d51f37e33982f901", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfc55970936e74f5305b4170d51f37e33982f901/comments", "author": null, "committer": null, "parents": [{"sha": "5feb272b7a4f084ae628f16c7e252a14b3b47764", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5feb272b7a4f084ae628f16c7e252a14b3b47764", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5feb272b7a4f084ae628f16c7e252a14b3b47764"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "3e7b3d8f835fab259d05b39a969cb241ef74d75a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfc55970936e74f5305b4170d51f37e33982f901/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfc55970936e74f5305b4170d51f37e33982f901/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dfc55970936e74f5305b4170d51f37e33982f901", "patch": "@@ -1,3 +1,8 @@\n+2000-11-21  Zack Weinberg  <zack@wolery.stanford.edu>\n+\n+\t* stringpool.c (stringpool_statistics): Also report number and\n+\tpercentage of entries which are identifiers.\n+\n 2000-11-21  Diego Novillo  <dnovillo@redhat.com>\n \n \t* gcse.c (hoist_expr_reaches_here_p): Do not mark expr_bb as"}, {"sha": "ceb454d92217e9df6b1323ee0d19e5c45f66e705", "filename": "gcc/stringpool.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfc55970936e74f5305b4170d51f37e33982f901/gcc%2Fstringpool.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfc55970936e74f5305b4170d51f37e33982f901/gcc%2Fstringpool.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstringpool.c?ref=dfc55970936e74f5305b4170d51f37e33982f901", "patch": "@@ -345,7 +345,7 @@ maybe_get_identifier (text)\n void\n stringpool_statistics ()\n {\n-  size_t nelts, overhead, headers;\n+  size_t nelts, nids, overhead, headers;\n   size_t total_bytes, longest, sum_of_squares;\n   double exp_len, exp_len2, exp2_len;\n   struct str_header *e;\n@@ -356,7 +356,7 @@ stringpool_statistics ()\n \t\t     : (x) / (1024*1024))))\n #define LABEL(x) ((x) < 1024*10 ? ' ' : ((x) < 1024*1024*10 ? 'k' : 'M'))\n \n-  total_bytes = longest = sum_of_squares = 0;\n+  total_bytes = longest = sum_of_squares = nids = 0;\n   FORALL_STRINGS (e)\n     {\n       size_t n = e->len;\n@@ -365,6 +365,8 @@ stringpool_statistics ()\n       sum_of_squares += n*n;\n       if (n > longest)\n \tlongest = n;\n+      if (e->data)\n+\tnids++;\n     }\n       \n   nelts = string_hash.nelements;\n@@ -374,10 +376,13 @@ stringpool_statistics ()\n   fprintf (stderr,\n \"\\nString pool\\n\\\n entries\\t\\t%lu\\n\\\n+identifiers\\t%lu (%.2f%%)\\n\\\n slots\\t\\t%lu\\n\\\n bytes\\t\\t%lu%c (%lu%c overhead)\\n\\\n table size\\t%lu%c\\n\",\n-\t   (unsigned long) nelts, (unsigned long) string_hash.nslots,\n+\t   (unsigned long) nelts,\n+\t   (unsigned long) nids, nids * 100.0 / nelts,\n+\t   (unsigned long) string_hash.nslots,\n \t   SCALE (total_bytes), LABEL (total_bytes),\n \t   SCALE (overhead), LABEL (overhead),\n \t   SCALE (headers), LABEL (headers));"}]}