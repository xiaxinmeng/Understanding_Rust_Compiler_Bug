{"sha": "7137fd76b55fa37aefa04e836e91ded8f974a2e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzEzN2ZkNzZiNTVmYTM3YWVmYTA0ZTgzNmU5MWRlZDhmOTc0YTJlOA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2001-06-08T17:42:25Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2001-06-08T17:42:25Z"}, "message": "ia64.c (ia64_function_arg): Use [SDT]Fmode as gr_mode for complex floats passed to unprototyped functions.\n\n\t* config/ia64/ia64.c (ia64_function_arg): Use [SDT]Fmode as gr_mode\n\tfor complex floats passed to unprototyped functions.\n\n\t* gcc.c-torture/execute/20010605-2.c: New test.\n\nFrom-SVN: r43029", "tree": {"sha": "2add345de09733889088579c56a5a2804989af35", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2add345de09733889088579c56a5a2804989af35"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7137fd76b55fa37aefa04e836e91ded8f974a2e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7137fd76b55fa37aefa04e836e91ded8f974a2e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7137fd76b55fa37aefa04e836e91ded8f974a2e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7137fd76b55fa37aefa04e836e91ded8f974a2e8/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b912bca0f08b27318ebcdcf2ce268e3dc464d110", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b912bca0f08b27318ebcdcf2ce268e3dc464d110", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b912bca0f08b27318ebcdcf2ce268e3dc464d110"}], "stats": {"total": 51, "additions": 50, "deletions": 1}, "files": [{"sha": "f75f9b1521dc13cacecf4ef9ca4cf688f65823a3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7137fd76b55fa37aefa04e836e91ded8f974a2e8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7137fd76b55fa37aefa04e836e91ded8f974a2e8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7137fd76b55fa37aefa04e836e91ded8f974a2e8", "patch": "@@ -1,3 +1,8 @@\n+2001-06-08  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* config/ia64/ia64.c (ia64_function_arg): Use [SDT]Fmode as gr_mode\n+\tfor complex floats passed to unprototyped functions.\n+\n 2001-06-08  Mark Mitchell  <mark@codesourcery.com>\n \n \t* except.c (expand_eh_region_end_allowed): Call"}, {"sha": "b8d0803d8adc26e892de846ef6e613bf93224d49", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7137fd76b55fa37aefa04e836e91ded8f974a2e8/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7137fd76b55fa37aefa04e836e91ded8f974a2e8/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=7137fd76b55fa37aefa04e836e91ded8f974a2e8", "patch": "@@ -2865,13 +2865,17 @@ ia64_function_arg (cum, mode, type, named, incoming)\n \t     adjusted/little endian.  */\n \t  else if (byte_size - offset == 4)\n \t    gr_mode = SImode;\n+\t  /* Complex floats need to have float mode.  */\n+\t  if (GET_MODE_CLASS (mode) == MODE_COMPLEX_FLOAT)\n+\t    gr_mode = hfa_mode;\n \n \t  loc[i] = gen_rtx_EXPR_LIST (VOIDmode,\n \t\t\t\t      gen_rtx_REG (gr_mode, (basereg\n \t\t\t\t\t\t\t     + int_regs)),\n \t\t\t\t      GEN_INT (offset));\n \t  offset += GET_MODE_SIZE (gr_mode);\n-\t  int_regs++;\n+\t  int_regs += GET_MODE_SIZE (gr_mode) <= UNITS_PER_WORD\n+\t\t      ? 1 : GET_MODE_SIZE (gr_mode) / UNITS_PER_WORD;\n \t}\n \n       /* If we ended up using just one location, just return that one loc.  */"}, {"sha": "1bc218d387f1916f7b67039e401290f742dc3412", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7137fd76b55fa37aefa04e836e91ded8f974a2e8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7137fd76b55fa37aefa04e836e91ded8f974a2e8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7137fd76b55fa37aefa04e836e91ded8f974a2e8", "patch": "@@ -1,3 +1,7 @@\n+2001-06-08  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* gcc.c-torture/execute/20010605-2.c: New test.\n+\n 2001-06-08  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* g++.old-deja/g++.abi/vbase2.C: New test."}, {"sha": "09c7f76ac8203ca94294c52621405ec63a86a0ba", "filename": "gcc/testsuite/gcc.c-torture/execute/20010605-2.c", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7137fd76b55fa37aefa04e836e91ded8f974a2e8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20010605-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7137fd76b55fa37aefa04e836e91ded8f974a2e8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20010605-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20010605-2.c?ref=7137fd76b55fa37aefa04e836e91ded8f974a2e8", "patch": "@@ -0,0 +1,36 @@\n+void foo (), bar (), baz ();\n+int main ()\n+{\n+  __complex__ double x;\n+  __complex__ float y;\n+  __complex__ long double z;\n+  __real__ x = 1.0;\n+  __imag__ x = 2.0;\n+  foo (x);\n+  __real__ y = 3.0f;\n+  __imag__ y = 4.0f;\n+  bar (y);\n+  __real__ z = 5.0L;\n+  __imag__ z = 6.0L;\n+  baz (z);\n+  exit (0);\n+}\n+\n+void foo (__complex__ double x)\n+{\n+  if (__real__ x != 1.0 || __imag__ x != 2.0)\n+    abort ();\n+}\n+\n+void bar (__complex__ float x)\n+{\n+  if (__real__ x != 3.0f || __imag__ x != 4.0f)\n+    abort ();\n+}\n+\n+void baz (__complex__ long double x)\n+{\n+  if (__real__ x != 5.0L || __imag__ x != 6.0L)\n+    abort ();\n+}\n+"}]}