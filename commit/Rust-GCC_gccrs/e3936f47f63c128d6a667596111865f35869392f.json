{"sha": "e3936f47f63c128d6a667596111865f35869392f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTM5MzZmNDdmNjNjMTI4ZDZhNjY3NTk2MTExODY1ZjM1ODY5MzkyZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2013-02-07T08:04:58Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2013-02-07T08:04:58Z"}, "message": "re PR target/56228 (Indirect call fails to assemble)\n\n\tPR target/56228\n\t* config/rs6000/rs6000.md (ptrm): New mode attr.\n\t(call_indirect_aix<ptrsize>, call_indirect_aix<ptrsize>_nor11,\n\tcall_value_indirect_aix<pttrsize>,\n\tcall_value_indirect_aix<pttrsize>_nor11): Use <ptrm> instead of\n\tm in constraints.\n\n\t* gcc.dg/pr56228.c: New test.\n\nFrom-SVN: r195840", "tree": {"sha": "9abbb95b786cbe3bf97cb031b673fdc6a8f3e65e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9abbb95b786cbe3bf97cb031b673fdc6a8f3e65e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e3936f47f63c128d6a667596111865f35869392f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3936f47f63c128d6a667596111865f35869392f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3936f47f63c128d6a667596111865f35869392f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3936f47f63c128d6a667596111865f35869392f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d96d674b0167195bafacdc7b66aed8723ec74737", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d96d674b0167195bafacdc7b66aed8723ec74737", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d96d674b0167195bafacdc7b66aed8723ec74737"}], "stats": {"total": 49, "additions": 41, "deletions": 8}, "files": [{"sha": "175b85bb2648d7a81d9cfd2cc5986cd81389b32b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3936f47f63c128d6a667596111865f35869392f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3936f47f63c128d6a667596111865f35869392f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e3936f47f63c128d6a667596111865f35869392f", "patch": "@@ -1,3 +1,12 @@\n+2013-02-07  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/56228\n+\t* config/rs6000/rs6000.md (ptrm): New mode attr.\n+\t(call_indirect_aix<ptrsize>, call_indirect_aix<ptrsize>_nor11,\n+\tcall_value_indirect_aix<pttrsize>,\n+\tcall_value_indirect_aix<pttrsize>_nor11): Use <ptrm> instead of\n+\tm in constraints.\n+\n 2013-02-07  Michael Haubenwallner  <michael.haubenwallner@salomon.at>\n \n \t* collect2.c (main): Set aix64_flag for -G and -bsvr4 too, disable"}, {"sha": "a665fa50abfd159a40f80a510136ac66645a1641", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3936f47f63c128d6a667596111865f35869392f/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3936f47f63c128d6a667596111865f35869392f/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=e3936f47f63c128d6a667596111865f35869392f", "patch": "@@ -292,6 +292,9 @@\n (define_mode_attr ptrload [(SI \"lwz\")\n \t\t\t   (DI \"ld\")])\n \n+(define_mode_attr ptrm [(SI \"m\")\n+\t\t\t(DI \"Y\")])\n+\n (define_mode_attr rreg [(SF   \"f\")\n \t\t\t(DF   \"ws\")\n \t\t\t(V4SF \"wf\")\n@@ -10662,8 +10665,8 @@\n (define_insn \"call_indirect_aix<ptrsize>\"\n   [(call (mem:SI (match_operand:P 0 \"register_operand\" \"c,*l\"))\n \t (match_operand 1 \"\" \"g,g\"))\n-   (use (match_operand:P 2 \"memory_operand\" \"m,m\"))\n-   (set (reg:P TOC_REGNUM) (match_operand:P 3 \"memory_operand\" \"m,m\"))\n+   (use (match_operand:P 2 \"memory_operand\" \"<ptrm>,<ptrm>\"))\n+   (set (reg:P TOC_REGNUM) (match_operand:P 3 \"memory_operand\" \"<ptrm>,<ptrm>\"))\n    (use (reg:P STATIC_CHAIN_REGNUM))\n    (clobber (reg:P LR_REGNO))]\n   \"DEFAULT_ABI == ABI_AIX && TARGET_POINTERS_TO_NESTED_FUNCTIONS\"\n@@ -10680,8 +10683,8 @@\n (define_insn \"call_indirect_aix<ptrsize>_nor11\"\n   [(call (mem:SI (match_operand:P 0 \"register_operand\" \"c,*l\"))\n \t (match_operand 1 \"\" \"g,g\"))\n-   (use (match_operand:P 2 \"memory_operand\" \"m,m\"))\n-   (set (reg:P TOC_REGNUM) (match_operand:P 3 \"memory_operand\" \"m,m\"))\n+   (use (match_operand:P 2 \"memory_operand\" \"<ptrm>,<ptrm>\"))\n+   (set (reg:P TOC_REGNUM) (match_operand:P 3 \"memory_operand\" \"<ptrm>,<ptrm>\"))\n    (clobber (reg:P LR_REGNO))]\n   \"DEFAULT_ABI == ABI_AIX && !TARGET_POINTERS_TO_NESTED_FUNCTIONS\"\n   \"<ptrload> 2,%2\\;b%T0l\\;<ptrload> 2,%3\"\n@@ -10698,8 +10701,8 @@\n   [(set (match_operand 0 \"\" \"\")\n \t(call (mem:SI (match_operand:P 1 \"register_operand\" \"c,*l\"))\n \t      (match_operand 2 \"\" \"g,g\")))\n-   (use (match_operand:P 3 \"memory_operand\" \"m,m\"))\n-   (set (reg:P TOC_REGNUM) (match_operand:P 4 \"memory_operand\" \"m,m\"))\n+   (use (match_operand:P 3 \"memory_operand\" \"<ptrm>,<ptrm>\"))\n+   (set (reg:P TOC_REGNUM) (match_operand:P 4 \"memory_operand\" \"<ptrm>,<ptrm>\"))\n    (use (reg:P STATIC_CHAIN_REGNUM))\n    (clobber (reg:P LR_REGNO))]\n   \"DEFAULT_ABI == ABI_AIX && TARGET_POINTERS_TO_NESTED_FUNCTIONS\"\n@@ -10718,8 +10721,8 @@\n   [(set (match_operand 0 \"\" \"\")\n \t(call (mem:SI (match_operand:P 1 \"register_operand\" \"c,*l\"))\n \t      (match_operand 2 \"\" \"g,g\")))\n-   (use (match_operand:P 3 \"memory_operand\" \"m,m\"))\n-   (set (reg:P TOC_REGNUM) (match_operand:P 4 \"memory_operand\" \"m,m\"))\n+   (use (match_operand:P 3 \"memory_operand\" \"<ptrm>,<ptrm>\"))\n+   (set (reg:P TOC_REGNUM) (match_operand:P 4 \"memory_operand\" \"<ptrm>,<ptrm>\"))\n    (clobber (reg:P LR_REGNO))]\n   \"DEFAULT_ABI == ABI_AIX && !TARGET_POINTERS_TO_NESTED_FUNCTIONS\"\n   \"<ptrload> 2,%3\\;b%T1l\\;<ptrload> 2,%4\""}, {"sha": "49f87f1f4a9f27ad7cb8bbb5ad51270223622d41", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3936f47f63c128d6a667596111865f35869392f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3936f47f63c128d6a667596111865f35869392f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e3936f47f63c128d6a667596111865f35869392f", "patch": "@@ -1,3 +1,8 @@\n+2013-02-07  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/56228\n+\t* gcc.dg/pr56228.c: New test.\n+\n 2013-02-07  Alan Modra  <amodra@gmail.com>\n \n \tPR target/54009"}, {"sha": "ccdcbe199a446191413726f53931be2d3963f095", "filename": "gcc/testsuite/gcc.dg/pr56228.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3936f47f63c128d6a667596111865f35869392f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr56228.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3936f47f63c128d6a667596111865f35869392f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr56228.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr56228.c?ref=e3936f47f63c128d6a667596111865f35869392f", "patch": "@@ -0,0 +1,16 @@\n+/* PR target/56228 */\n+/* { dg-do assemble } */\n+/* { dg-options \"-O2\" } */\n+\n+short a[14] = { 1, 2 };\n+short b[15] = { 3, 4 };\n+\n+int\n+foo ()\n+{\n+  void (*fna) (void) = (void (*) (void)) a;\n+  void (*fnb) (void) = (void (*) (void)) b;\n+  fna ();\n+  fnb ();\n+  return a[1] == b[1];\n+}"}]}