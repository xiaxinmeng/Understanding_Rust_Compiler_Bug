{"sha": "e354dca60268ea14f3b20fb865b23e27af751022", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTM1NGRjYTYwMjY4ZWExNGYzYjIwZmI4NjViMjNlMjdhZjc1MTAyMg==", "commit": {"author": {"name": "Ghjuvan Lacambre", "email": "lacambre@adacore.com", "date": "2020-08-20T15:17:39Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-10-22T12:11:25Z"}, "message": "[Ada] Fix parser not detecting casing issues in keywords\n\ngcc/ada/\n\n\t* scng.adb (Scan): Check if any letter of the token is\n\tuppercase.", "tree": {"sha": "27f5f04f556ef4a796e96cc978711f4a3ebf0a64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27f5f04f556ef4a796e96cc978711f4a3ebf0a64"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e354dca60268ea14f3b20fb865b23e27af751022", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e354dca60268ea14f3b20fb865b23e27af751022", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e354dca60268ea14f3b20fb865b23e27af751022", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e354dca60268ea14f3b20fb865b23e27af751022/comments", "author": {"login": "glacambre", "id": 11534587, "node_id": "MDQ6VXNlcjExNTM0NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/11534587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glacambre", "html_url": "https://github.com/glacambre", "followers_url": "https://api.github.com/users/glacambre/followers", "following_url": "https://api.github.com/users/glacambre/following{/other_user}", "gists_url": "https://api.github.com/users/glacambre/gists{/gist_id}", "starred_url": "https://api.github.com/users/glacambre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glacambre/subscriptions", "organizations_url": "https://api.github.com/users/glacambre/orgs", "repos_url": "https://api.github.com/users/glacambre/repos", "events_url": "https://api.github.com/users/glacambre/events{/privacy}", "received_events_url": "https://api.github.com/users/glacambre/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d302be6eba3f7c09ca01496fd2172c6aeb8967b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d302be6eba3f7c09ca01496fd2172c6aeb8967b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d302be6eba3f7c09ca01496fd2172c6aeb8967b3"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "0d5cff84d5dcd1cadae8dcc6001f3da9c53162ae", "filename": "gcc/ada/scng.adb", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e354dca60268ea14f3b20fb865b23e27af751022/gcc%2Fada%2Fscng.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e354dca60268ea14f3b20fb865b23e27af751022/gcc%2Fada%2Fscng.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fscng.adb?ref=e354dca60268ea14f3b20fb865b23e27af751022", "patch": "@@ -1180,6 +1180,8 @@ package body Scng is\n          end if;\n       end Start_Of_Wide_Character;\n \n+      Token_Contains_Uppercase : Boolean;\n+\n    --  Start of processing for Scan\n \n    begin\n@@ -1241,6 +1243,8 @@ package body Scng is\n \n          Token_Ptr := Scan_Ptr;\n \n+         Token_Contains_Uppercase := False;\n+\n          --  Here begins the main case statement which transfers control on the\n          --  basis of the non-blank character we have encountered.\n \n@@ -1999,6 +2003,7 @@ package body Scng is\n          --  Upper case letters\n \n          when 'A' .. 'Z' =>\n+            Token_Contains_Uppercase := True;\n             Name_Len := 1;\n             Underline_Found := False;\n             Name_Buffer (1) :=\n@@ -2347,6 +2352,8 @@ package body Scng is\n                Accumulate_Checksum (Source (Scan_Ptr));\n \n             elsif Source (Scan_Ptr) in 'A' .. 'Z' then\n+               Token_Contains_Uppercase := True;\n+\n                Name_Buffer (Name_Len + 1) :=\n                  Character'Val (Character'Pos (Source (Scan_Ptr)) + 32);\n                Accumulate_Checksum (Name_Buffer (Name_Len + 1));\n@@ -2601,7 +2608,7 @@ package body Scng is\n                --  Ada 2005 (AI-340): Do not apply the style check in case of\n                --  MOD attribute.\n \n-               if Source (Token_Ptr) <= 'Z'\n+               if Token_Contains_Uppercase\n                  and then (Prev_Token /= Tok_Apostrophe\n                            or else\n                              (Token /= Tok_Access and then"}]}