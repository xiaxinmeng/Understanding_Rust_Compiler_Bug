{"sha": "8d358a4aae876bfa44501f8d2830564fbe6f1cdd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQzNThhNGFhZTg3NmJmYTQ0NTAxZjhkMjgzMDU2NGZiZTZmMWNkZA==", "commit": {"author": {"name": "Ira Rosen", "email": "irar@gcc.gnu.org", "date": "2007-10-25T16:41:45Z"}, "committer": {"name": "Ira Rosen", "email": "irar@gcc.gnu.org", "date": "2007-10-25T16:41:45Z"}, "message": "re PR tree-optimization/33833 (ICE in build2_stat, at tree.c:3110 at -O3, tree-vectorizer)\n\n\tPR tree-optimization/33833\n\t* tree-vect-analyze.c (vect_analyze_data_refs): Use POINTER_PLUS_EXPR\n\tand convert init to sizetype in inner_base construction.\n\nFrom-SVN: r129628", "tree": {"sha": "b66ef1223115922be5631a7da7e510310407e428", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b66ef1223115922be5631a7da7e510310407e428"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d358a4aae876bfa44501f8d2830564fbe6f1cdd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d358a4aae876bfa44501f8d2830564fbe6f1cdd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d358a4aae876bfa44501f8d2830564fbe6f1cdd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d358a4aae876bfa44501f8d2830564fbe6f1cdd/comments", "author": null, "committer": null, "parents": [{"sha": "7f1d67caa75b80cf8d187b7612cb2c717774000c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f1d67caa75b80cf8d187b7612cb2c717774000c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f1d67caa75b80cf8d187b7612cb2c717774000c"}], "stats": {"total": 52, "additions": 48, "deletions": 4}, "files": [{"sha": "2a3ca69e9fca3ce3d3297a83e4ecd509760521df", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d358a4aae876bfa44501f8d2830564fbe6f1cdd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d358a4aae876bfa44501f8d2830564fbe6f1cdd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8d358a4aae876bfa44501f8d2830564fbe6f1cdd", "patch": "@@ -1,3 +1,9 @@\n+2007-10-25  Ira Rosen  <irar@il.ibm.com>\n+\n+\tPR tree-optimization/33833\n+\t* tree-vect-analyze.c (vect_analyze_data_refs): Use POINTER_PLUS_EXPR\n+\tand convert init to sizetype in inner_base construction.\n+\n 2007-10-25  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-flow.h (mem_sym_stats): Remove."}, {"sha": "5551ed5f80aeada73248a94a2858aea42f6e9697", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d358a4aae876bfa44501f8d2830564fbe6f1cdd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d358a4aae876bfa44501f8d2830564fbe6f1cdd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8d358a4aae876bfa44501f8d2830564fbe6f1cdd", "patch": "@@ -1,3 +1,9 @@\n+2007-10-25  Martin Michlmayr <tbm@cyrius.com>\n+            Ira Rosen  <irar@il.ibm.com>\n+\n+\tPR tree-optimization/33833\n+\t* gcc.dg/vect/pr33833.c: New testcase.\n+\n 2007-10-25  David Daney  <ddaney@avtrex.com>\n \n \t* gcc.dg/tree-ssa/20040204-1.c: Un-xfail for mips*-*-*."}, {"sha": "f862a915cb60098708e8ff545897333127b94b5b", "filename": "gcc/testsuite/gcc.dg/vect/pr33833.c", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d358a4aae876bfa44501f8d2830564fbe6f1cdd/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr33833.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d358a4aae876bfa44501f8d2830564fbe6f1cdd/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr33833.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr33833.c?ref=8d358a4aae876bfa44501f8d2830564fbe6f1cdd", "patch": "@@ -0,0 +1,31 @@\n+/* Testcase by Martin Michlmayr <tbm@cyrius.com> */\n+/* { dg-do compile } */\n+\n+struct list_head\n+{\n+  struct list_head *prev;\n+};\n+struct prio_array\n+{\n+  struct list_head queue[100];\n+};\n+struct rq\n+{\n+  struct prio_array *active, arrays[2];\n+} per_cpu__runqueues;\n+\n+void sched_init (unsigned long __ptr)\n+{\n+  int j, k;\n+  struct prio_array *array;\n+  struct rq *rq;\n+  rq = (&(*( { (typeof (&per_cpu__runqueues)) (__ptr); } )));\n+  for (j = 0; j < 2; j++)\n+  {\n+    array = rq->arrays + j;\n+    for (k = 0; k < 100; k++)\n+        (array->queue + k)->prev = array->queue;\n+  }\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "2bb28da32b0e7987ce98ed69c4c1cc7f3390e875", "filename": "gcc/tree-vect-analyze.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d358a4aae876bfa44501f8d2830564fbe6f1cdd/gcc%2Ftree-vect-analyze.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d358a4aae876bfa44501f8d2830564fbe6f1cdd/gcc%2Ftree-vect-analyze.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-analyze.c?ref=8d358a4aae876bfa44501f8d2830564fbe6f1cdd", "patch": "@@ -3287,10 +3287,11 @@ vect_analyze_data_refs (loop_vec_info loop_vinfo)\n \n \t  /* Build a reference to the first location accessed by the \n \t     inner-loop: *(BASE+INIT). (The first location is actually\n-\t     BASE+INIT+OFFSET, but we add OFFSET separately later.  */\n-\t  tree inner_base = build_fold_indirect_ref \n-\t\t\t\t(fold_build2 (PLUS_EXPR, \n-\t\t\t\t\t      TREE_TYPE (base), base, init));\n+\t     BASE+INIT+OFFSET, but we add OFFSET separately later).  */\n+          tree inner_base = build_fold_indirect_ref\n+                                (fold_build2 (POINTER_PLUS_EXPR,\n+                                              TREE_TYPE (base), base, \n+                                              fold_convert (sizetype, init)));\n \n \t  if (vect_print_dump_info (REPORT_DETAILS))\n \t    {"}]}