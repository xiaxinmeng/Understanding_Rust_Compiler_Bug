{"sha": "54f9e2781e026570ce63e3f0689bb7a7c1ab79a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTRmOWUyNzgxZTAyNjU3MGNlNjNlM2YwNjg5YmI3YTdjMWFiNzlhNg==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2006-03-18T01:56:07Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2006-03-18T01:56:07Z"}, "message": "re PR fortran/26509 (incorrect behaviour of error-handler for direct access write)\n\n2006-03-17  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libgfortran/26509\n\t* libgfortran.h: Add ERROR_DIRECT_EOR.\n\t* runtime/error.c (translate_error): Add translation for new error.\n\t* io/transfer.c (write_buf): Add check for EOR when mode is \n\tdirect access.\n\nFrom-SVN: r112198", "tree": {"sha": "8248c3daa123616f0ef35a71869afdad2a98fd78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8248c3daa123616f0ef35a71869afdad2a98fd78"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6/comments", "author": null, "committer": null, "parents": [{"sha": "8e0524013a9f474b8f766dc38c157efa1085d325", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e0524013a9f474b8f766dc38c157efa1085d325", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e0524013a9f474b8f766dc38c157efa1085d325"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "1ea7ffa35e48c892de71f29a61fb327861ad53ff", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=54f9e2781e026570ce63e3f0689bb7a7c1ab79a6", "patch": "@@ -1,3 +1,11 @@\n+2006-03-17  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libgfortran/26509\n+\t* libgfortran.h: Add ERROR_DIRECT_EOR.\n+\t* runtime/error.c (translate_error): Add translation for new error.\n+\t* io/transfer.c (write_buf): Add check for EOR when mode is \n+\tdirect access.\n+\n 2006-03-13  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/25378"}, {"sha": "4626d46b7ad2679ed591602291a7d12a9b77f8f8", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=54f9e2781e026570ce63e3f0689bb7a7c1ab79a6", "patch": "@@ -384,7 +384,10 @@ write_buf (st_parameter_dt *dtp, void *buf, size_t nbytes)\n {\n   if (dtp->u.p.current_unit->bytes_left < nbytes)\n     {\n-      generate_error (&dtp->common, ERROR_EOR, NULL);\n+      if (dtp->u.p.current_unit->flags.access == ACCESS_DIRECT)\n+\tgenerate_error (&dtp->common, ERROR_DIRECT_EOR, NULL);\n+      else\n+\tgenerate_error (&dtp->common, ERROR_EOR, NULL);\n       return FAILURE;\n     }\n "}, {"sha": "8316540416d3687de443cecffb6ab386c494bf09", "filename": "libgfortran/libgfortran.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6/libgfortran%2Flibgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6/libgfortran%2Flibgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Flibgfortran.h?ref=54f9e2781e026570ce63e3f0689bb7a7c1ab79a6", "patch": "@@ -380,6 +380,7 @@ typedef enum\n   ERROR_INTERNAL,\n   ERROR_INTERNAL_UNIT,\n   ERROR_ALLOCATION,\n+  ERROR_DIRECT_EOR,\n   ERROR_LAST\t\t\t/* Not a real error, the last error # + 1.  */\n }\n error_codes;"}, {"sha": "8ccb381a650de022724e44b53c99ea66e2a0c120", "filename": "libgfortran/runtime/error.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6/libgfortran%2Fruntime%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54f9e2781e026570ce63e3f0689bb7a7c1ab79a6/libgfortran%2Fruntime%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fruntime%2Ferror.c?ref=54f9e2781e026570ce63e3f0689bb7a7c1ab79a6", "patch": "@@ -431,6 +431,10 @@ translate_error (int code)\n       p = \"Internal unit I/O error\";\n       break;\n \n+    case ERROR_DIRECT_EOR:\n+      p = \"Write exceeds length of DIRECT access record\";\n+      break;\n+\n     default:\n       p = \"Unknown error code\";\n       break;"}]}