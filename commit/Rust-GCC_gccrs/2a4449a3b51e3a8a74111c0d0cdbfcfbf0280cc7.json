{"sha": "2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmE0NDQ5YTNiNTFlM2E4YTc0MTExYzBkMGNkYmZjZmJmMDI4MGNjNw==", "commit": {"author": {"name": "Nathan Froyd", "email": "froydnj@codesourcery.com", "date": "2010-06-09T15:34:07Z"}, "committer": {"name": "Nathan Froyd", "email": "froydnj@gcc.gnu.org", "date": "2010-06-09T15:34:07Z"}, "message": "cp-tree.h (struct saved_scope): Change decl_ns_list field type to a VEC.\n\n\t* cp-tree.h (struct saved_scope): Change decl_ns_list field type\n\tto a VEC.\n\t* decl2.c (cp_write_global_declarations): Adjust for new type of\n\tdecl_namespace_list.\n\t* name-lookup.c (current_decl_namespace): Likewise.\n\t(push_decl_namespace): Likewise.\n\t(pop_decl_namespace): Likewise.\n\nFrom-SVN: r160487", "tree": {"sha": "f591df14aec60eb4f3d7ef970df84e67ef698457", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f591df14aec60eb4f3d7ef970df84e67ef698457"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7/comments", "author": null, "committer": null, "parents": [{"sha": "0244e6f7e07176d02c4135e64e776bc117553c90", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0244e6f7e07176d02c4135e64e776bc117553c90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0244e6f7e07176d02c4135e64e776bc117553c90"}], "stats": {"total": 24, "additions": 17, "deletions": 7}, "files": [{"sha": "8a261416f1c75089cb0fb1468cd42f12114ca67d", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7", "patch": "@@ -1,3 +1,13 @@\n+2010-06-09  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\t* cp-tree.h (struct saved_scope): Change decl_ns_list field type\n+\tto a VEC.\n+\t* decl2.c (cp_write_global_declarations): Adjust for new type of\n+\tdecl_namespace_list.\n+\t* name-lookup.c (current_decl_namespace): Likewise.\n+\t(push_decl_namespace): Likewise.\n+\t(pop_decl_namespace): Likewise.\n+\n 2010-06-09  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* call.c (build_java_interface_fn_ref): Call build_function_type_list"}, {"sha": "adff6168b8094bdc6aeb14bc48f4fb1c9de22594", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7", "patch": "@@ -896,7 +896,7 @@ extern GTY(()) tree cp_global_trees[CPTI_MAX];\n struct GTY(()) saved_scope {\n   VEC(cxx_saved_binding,gc) *old_bindings;\n   tree old_namespace;\n-  tree decl_ns_list;\n+  VEC(tree,gc) *decl_ns_list;\n   tree class_name;\n   tree class_type;\n   tree access_specifier;"}, {"sha": "691c1dbc0f3d284b7e8fd030380cd7b2a7724fe0", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7", "patch": "@@ -3586,7 +3586,8 @@ cp_write_global_declarations (void)\n   at_eof = 1;\n \n   /* Bad parse errors.  Just forget about it.  */\n-  if (! global_bindings_p () || current_class_type || decl_namespace_list)\n+  if (! global_bindings_p () || current_class_type\n+      || !VEC_empty (tree,decl_namespace_list))\n     return;\n \n   if (pch_file)"}, {"sha": "af6829fc3bdf632045116a0789bca8e162bc3667", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=2a4449a3b51e3a8a74111c0d0cdbfcfbf0280cc7", "patch": "@@ -3195,8 +3195,8 @@ current_decl_namespace (void)\n {\n   tree result;\n   /* If we have been pushed into a different namespace, use it.  */\n-  if (decl_namespace_list)\n-    return TREE_PURPOSE (decl_namespace_list);\n+  if (!VEC_empty (tree, decl_namespace_list))\n+    return VEC_last (tree, decl_namespace_list);\n \n   if (current_class_type)\n     result = decl_namespace_context (current_class_type);\n@@ -3380,16 +3380,15 @@ push_decl_namespace (tree decl)\n {\n   if (TREE_CODE (decl) != NAMESPACE_DECL)\n     decl = decl_namespace_context (decl);\n-  decl_namespace_list = tree_cons (ORIGINAL_NAMESPACE (decl),\n-\t\t\t\t   NULL_TREE, decl_namespace_list);\n+  VEC_safe_push (tree, gc, decl_namespace_list, ORIGINAL_NAMESPACE (decl));\n }\n \n /* [namespace.memdef]/2 */\n \n void\n pop_decl_namespace (void)\n {\n-  decl_namespace_list = TREE_CHAIN (decl_namespace_list);\n+  VEC_pop (tree, decl_namespace_list);\n }\n \n /* Return the namespace that is the common ancestor"}]}