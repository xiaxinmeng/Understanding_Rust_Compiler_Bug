{"sha": "72f4648ec51398d2985f5b30922df02d8f8ade69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzJmNDY0OGVjNTEzOThkMjk4NWY1YjMwOTIyZGYwMmQ4ZjhhZGU2OQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1992-09-28T21:16:10Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1992-09-28T21:16:10Z"}, "message": "(orcc peephole): Don't allow FP regs to match pattern.\n\nFrom-SVN: r2274", "tree": {"sha": "feffa4441d9cdcf3fd96eb8af9eda2555d2dee21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/feffa4441d9cdcf3fd96eb8af9eda2555d2dee21"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72f4648ec51398d2985f5b30922df02d8f8ade69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72f4648ec51398d2985f5b30922df02d8f8ade69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72f4648ec51398d2985f5b30922df02d8f8ade69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72f4648ec51398d2985f5b30922df02d8f8ade69/comments", "author": null, "committer": null, "parents": [{"sha": "339ae22de6e41bf83da880de0d1c5890d70aa3cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/339ae22de6e41bf83da880de0d1c5890d70aa3cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/339ae22de6e41bf83da880de0d1c5890d70aa3cb"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "e516fd6bae0dc1c549ae62c14db843383afdb296", "filename": "gcc/config/sparc/sparc.md", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72f4648ec51398d2985f5b30922df02d8f8ade69/gcc%2Fconfig%2Fsparc%2Fsparc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72f4648ec51398d2985f5b30922df02d8f8ade69/gcc%2Fconfig%2Fsparc%2Fsparc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.md?ref=72f4648ec51398d2985f5b30922df02d8f8ade69", "patch": "@@ -2945,16 +2945,18 @@\n   \"std %3,%2\")\n  \n ;; Optimize the case of following a reg-reg move with a test\n-;; of reg just moved.\n+;; of reg just moved.  Don't allow floating point regs for operand 1.\n+;; This can result from a float to fix conversion.\n \n (define_peephole\n   [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n \t(match_operand:SI 1 \"register_operand\" \"r\"))\n    (set (reg:CC 0)\n \t(compare:CC (match_operand:SI 2 \"register_operand\" \"r\")\n \t\t    (const_int 0)))]\n-  \"rtx_equal_p (operands[2], operands[0])\n-   || rtx_equal_p (operands[2], operands[1])\"\n+  \"(rtx_equal_p (operands[2], operands[0])\n+    || rtx_equal_p (operands[2], operands[1]))\n+   && ! FP_REG_P (operands[1])\"\n   \"orcc %1,%%g0,%0\")\n \n ;; Do {sign,zero}-extended compares somewhat more efficiently."}]}