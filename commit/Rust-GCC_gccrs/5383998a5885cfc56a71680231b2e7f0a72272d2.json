{"sha": "5383998a5885cfc56a71680231b2e7f0a72272d2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTM4Mzk5OGE1ODg1Y2ZjNTZhNzE2ODAyMzFiMmU3ZjBhNzIyNzJkMg==", "commit": {"author": {"name": "Xi Ruoyao", "email": "ryxi@stu.xidian.edu.cn", "date": "2017-05-23T10:16:08Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2017-05-23T10:16:08Z"}, "message": "PR libstdc++/67214 Avoid signed overflow in num_get::_M_extract_int\n\n2017-05-23  Xi Ruoyao  <ryxi@stu.xidian.edu.cn>\n\n\tPR libstdc++/67214\n\t* include/bits/locale_facets.tcc (num_get::_M_extract_int): Add\n\texplicit conversion to avoid signed overflow.\n\nFrom-SVN: r248362", "tree": {"sha": "ae5d995c6ee17d13ac5743f45f52adfe2cf8e381", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ae5d995c6ee17d13ac5743f45f52adfe2cf8e381"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5383998a5885cfc56a71680231b2e7f0a72272d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5383998a5885cfc56a71680231b2e7f0a72272d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5383998a5885cfc56a71680231b2e7f0a72272d2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5383998a5885cfc56a71680231b2e7f0a72272d2/comments", "author": {"login": "xry111", "id": 8733039, "node_id": "MDQ6VXNlcjg3MzMwMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8733039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xry111", "html_url": "https://github.com/xry111", "followers_url": "https://api.github.com/users/xry111/followers", "following_url": "https://api.github.com/users/xry111/following{/other_user}", "gists_url": "https://api.github.com/users/xry111/gists{/gist_id}", "starred_url": "https://api.github.com/users/xry111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xry111/subscriptions", "organizations_url": "https://api.github.com/users/xry111/orgs", "repos_url": "https://api.github.com/users/xry111/repos", "events_url": "https://api.github.com/users/xry111/events{/privacy}", "received_events_url": "https://api.github.com/users/xry111/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "008c7367882c28ab07d39b3e914533cc6ca2256a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/008c7367882c28ab07d39b3e914533cc6ca2256a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/008c7367882c28ab07d39b3e914533cc6ca2256a"}], "stats": {"total": 26, "additions": 16, "deletions": 10}, "files": [{"sha": "5b34ccf1166928be75abbcf4b50023d905e30cc9", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5383998a5885cfc56a71680231b2e7f0a72272d2/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5383998a5885cfc56a71680231b2e7f0a72272d2/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=5383998a5885cfc56a71680231b2e7f0a72272d2", "patch": "@@ -1,3 +1,9 @@\n+2017-05-23  Xi Ruoyao  <ryxi@stu.xidian.edu.cn>\n+\n+\tPR libstdc++/67214\n+\t* include/bits/locale_facets.tcc (num_get::_M_extract_int): Add\n+\texplicit conversion to avoid signed overflow.\n+\n 2017-05-19  Jonathan Wakely  <jwakely@redhat.com>\n \n \tPR libstdc++/80796"}, {"sha": "d7710e6bb32bd1ada47c56b19b38c6f26c55d481", "filename": "libstdc++-v3/include/bits/locale_facets.tcc", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5383998a5885cfc56a71680231b2e7f0a72272d2/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5383998a5885cfc56a71680231b2e7f0a72272d2/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc?ref=5383998a5885cfc56a71680231b2e7f0a72272d2", "patch": "@@ -375,10 +375,10 @@ _GLIBCXX_BEGIN_NAMESPACE_LDBL\n       _M_extract_int(_InIter __beg, _InIter __end, ios_base& __io,\n \t\t     ios_base::iostate& __err, _ValueT& __v) const\n       {\n-        typedef char_traits<_CharT>\t\t\t     __traits_type;\n+        typedef char_traits<_CharT>\t\t\t    __traits_type;\n \tusing __gnu_cxx::__add_unsigned;\n-\ttypedef typename __add_unsigned<_ValueT>::__type __unsigned_type;\n-\ttypedef __numpunct_cache<_CharT>                     __cache_type;\n+\ttypedef typename __add_unsigned<_ValueT>::__type    __unsigned_type;\n+\ttypedef __numpunct_cache<_CharT>                    __cache_type;\n \t__use_cache<__cache_type> __uc;\n \tconst locale& __loc = __io._M_getloc();\n \tconst __cache_type* __lc = __uc(__loc);\n@@ -463,15 +463,16 @@ _GLIBCXX_BEGIN_NAMESPACE_LDBL\n \t\t\t      - __num_base::_S_izero : __base);\n \n \t// Extract.\n+\ttypedef __gnu_cxx::__numeric_traits<_ValueT> __num_traits;\n \tstring __found_grouping;\n \tif (__lc->_M_use_grouping)\n \t  __found_grouping.reserve(32);\n \tbool __testfail = false;\n \tbool __testoverflow = false;\n \tconst __unsigned_type __max =\n-\t  (__negative && __gnu_cxx::__numeric_traits<_ValueT>::__is_signed)\n-\t  ? -__gnu_cxx::__numeric_traits<_ValueT>::__min\n-\t  : __gnu_cxx::__numeric_traits<_ValueT>::__max;\n+\t  (__negative && __num_traits::__is_signed)\n+\t  ? -static_cast<__unsigned_type>(__num_traits::__min)\n+\t  : __num_traits::__max;\n \tconst __unsigned_type __smax = __max / __base;\n \t__unsigned_type __result = 0;\n \tint __digit = 0;\n@@ -572,11 +573,10 @@ _GLIBCXX_BEGIN_NAMESPACE_LDBL\n \t  }\n \telse if (__testoverflow)\n \t  {\n-\t    if (__negative\n-\t\t&& __gnu_cxx::__numeric_traits<_ValueT>::__is_signed)\n-\t      __v = __gnu_cxx::__numeric_traits<_ValueT>::__min;\n+\t    if (__negative && __num_traits::__is_signed)\n+\t      __v = __num_traits::__min;\n \t    else\n-\t      __v = __gnu_cxx::__numeric_traits<_ValueT>::__max;\n+\t      __v = __num_traits::__max;\n \t    __err = ios_base::failbit;\n \t  }\n \telse"}]}