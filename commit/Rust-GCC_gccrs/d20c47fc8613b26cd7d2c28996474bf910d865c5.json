{"sha": "d20c47fc8613b26cd7d2c28996474bf910d865c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDIwYzQ3ZmM4NjEzYjI2Y2Q3ZDJjMjg5OTY0NzRiZjkxMGQ4NjVjNQ==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.com", "date": "2016-01-19T13:02:17Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2016-01-19T13:02:17Z"}, "message": "* ira.c (ira): Update regstat data if we deleted insns.\n\nFrom-SVN: r232556", "tree": {"sha": "bc66ac8bb00e285b27407568dcf8fa8a4e0d4f46", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bc66ac8bb00e285b27407568dcf8fa8a4e0d4f46"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d20c47fc8613b26cd7d2c28996474bf910d865c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d20c47fc8613b26cd7d2c28996474bf910d865c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d20c47fc8613b26cd7d2c28996474bf910d865c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d20c47fc8613b26cd7d2c28996474bf910d865c5/comments", "author": null, "committer": null, "parents": [{"sha": "e47294194f2f60fb7934c8203c4b5d59552919fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e47294194f2f60fb7934c8203c4b5d59552919fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e47294194f2f60fb7934c8203c4b5d59552919fb"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "6cf6bbcc0e8125c580da350f9aff866142ee532d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d20c47fc8613b26cd7d2c28996474bf910d865c5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d20c47fc8613b26cd7d2c28996474bf910d865c5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d20c47fc8613b26cd7d2c28996474bf910d865c5", "patch": "@@ -1,3 +1,7 @@\n+2016-01-19  Bernd Schmidt  <bschmidt@redhat.com>\n+\n+\t* ira.c (ira): Update regstat data if we deleted insns.\n+\n 2016-01-19  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/68955\n@@ -13,7 +17,7 @@\n \tassume that the node has body.\n \t* cgraph.c (cgraph_node::get_untransformed_body): Use gimple_body_p\n \tcheck.\n-\t\n+\n 2016-01-19  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* lto-streamer-out.c (lto_output): Do not stream instrumentation"}, {"sha": "52596175c069555bffa216f5ed06c109c9451f94", "filename": "gcc/ira.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d20c47fc8613b26cd7d2c28996474bf910d865c5/gcc%2Fira.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d20c47fc8613b26cd7d2c28996474bf910d865c5/gcc%2Fira.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira.c?ref=d20c47fc8613b26cd7d2c28996474bf910d865c5", "patch": "@@ -5185,19 +5185,27 @@ ira (FILE *f)\n   setup_reg_equiv ();\n   setup_reg_equiv_init ();\n \n+  bool update_regstat = false;\n+\n   if (optimize && rebuild_p)\n     {\n       timevar_push (TV_JUMP);\n       rebuild_jump_labels (get_insns ());\n       if (purge_all_dead_edges ())\n-\tdelete_unreachable_blocks ();\n+\t{\n+\t  delete_unreachable_blocks ();\n+\t  update_regstat = true;\n+\t}\n       timevar_pop (TV_JUMP);\n     }\n \n   allocated_reg_info_size = max_reg_num ();\n \n   if (delete_trivially_dead_insns (get_insns (), max_reg_num ()))\n-    df_analyze ();\n+    {\n+      df_analyze ();\n+      update_regstat = true;\n+    }\n \n   /* It is not worth to do such improvement when we use a simple\n      allocation because of -O0 usage or because the function is too\n@@ -5308,7 +5316,7 @@ ira (FILE *f)\n     check_allocation ();\n #endif\n \n-  if (max_regno != max_regno_before_ira)\n+  if (update_regstat || max_regno != max_regno_before_ira)\n     {\n       regstat_free_n_sets_and_refs ();\n       regstat_free_ri ();"}]}