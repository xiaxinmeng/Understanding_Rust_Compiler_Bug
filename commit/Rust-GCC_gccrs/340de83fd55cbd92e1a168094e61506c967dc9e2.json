{"sha": "340de83fd55cbd92e1a168094e61506c967dc9e2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzQwZGU4M2ZkNTVjYmQ5MmUxYTE2ODA5NGU2MTUwNmM5NjdkYzllMg==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-03-22T08:38:04Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-03-22T08:38:04Z"}, "message": "* Makefile.tpl (experimental top level bootstrap) Move stage1\n\tlanguage setting from all- target to configure- target; disable\n\tintermodule optimization in stage 1; prevent gratuitous rebuilds\n\tof stage 1.\n\t* Makefile.in: Regenerate.\n\t* configure.in: Comma-separate stage 1 language list for top\n\tlevel bootstrap.\n\t* configure: Regenerate.\n\nFrom-SVN: r79816", "tree": {"sha": "1c556dcbbcb3585452c3995d226ab8f65f7de88f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c556dcbbcb3585452c3995d226ab8f65f7de88f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/340de83fd55cbd92e1a168094e61506c967dc9e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/340de83fd55cbd92e1a168094e61506c967dc9e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/340de83fd55cbd92e1a168094e61506c967dc9e2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/340de83fd55cbd92e1a168094e61506c967dc9e2/comments", "author": null, "committer": null, "parents": [{"sha": "a836124ac91b14886fcddb3df6f386b297550cab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a836124ac91b14886fcddb3df6f386b297550cab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a836124ac91b14886fcddb3df6f386b297550cab"}], "stats": {"total": 55, "additions": 43, "deletions": 12}, "files": [{"sha": "57d088df5ed20af9d14cd1131cec356ea1606839", "filename": "ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/340de83fd55cbd92e1a168094e61506c967dc9e2/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/340de83fd55cbd92e1a168094e61506c967dc9e2/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=340de83fd55cbd92e1a168094e61506c967dc9e2", "patch": "@@ -1,5 +1,14 @@\n 2004-03-22  Nathanael Nerode  <neroden@gcc.gnu.org>\n \n+\t* Makefile.tpl (experimental top level bootstrap) Move stage1\n+\tlanguage setting from all- target to configure- target; disable\n+\tintermodule optimization in stage 1; prevent gratuitous rebuilds\n+\tof stage 1.\n+\t* Makefile.in: Regenerate.\n+\t* configure.in: Comma-separate stage 1 language list for top\n+\tlevel bootstrap.\n+\t* configure: Regenerate.\n+\n \t* Makefile.tpl: Clean up experimental top level bootstrap support:\n \tnote known problems; set CONFIG_SHELL; don't set BUILD_CC; relocate\n \tprev-gcc in configure- targets as well as all- targets."}, {"sha": "7e2cf55501fb59ce5f24c680c05e1c8402b1de6c", "filename": "Makefile.in", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/340de83fd55cbd92e1a168094e61506c967dc9e2/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/340de83fd55cbd92e1a168094e61506c967dc9e2/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=340de83fd55cbd92e1a168094e61506c967dc9e2", "patch": "@@ -23777,7 +23777,11 @@ STAMP = echo timestamp >\n STAGE1_CFLAGS=@stage1_cflags@\n STAGE1_LANGUAGES=@stage1_languages@\n \n-# TODO: deal with OBJS-onestep\n+# For stage 1:\n+# * we force-disable intermodule optimizations, even if\n+#   --enable-intermodule was passed.  Luckily, autoconf always accepts\n+#   the last* argument when conflicting --enable arguments are passed.\n+# * we build only C (and possibly Ada).\n configure-stage1-gcc:\n \techo configure-stage1-gcc > stage_last ; \\\n \tif [ -f stage1-gcc/Makefile ] ; then \\\n@@ -23820,19 +23824,26 @@ configure-stage1-gcc:\n \t    libsrcdir=\"$$s/gcc\";; \\\n \tesac; \\\n \t$(SHELL) $${libsrcdir}/configure \\\n-\t  $(HOST_CONFIGARGS) $${srcdiroption} ; \\\n+\t  $(HOST_CONFIGARGS) $${srcdiroption} \\\n+\t  --disable-intermodule \\\n+\t  --enable-languages=\"$(STAGE1_LANGUAGES)\"; \\\n \tcd .. ; \\\n \tmv gcc stage1-gcc ; \\\n \t$(STAMP) configure-stage1-gcc\n \n-all-stage1-gcc: configure-stage1-gcc all-bootstrap\n+# Real targets act phony if they depend on phony targets; this hack\n+# prevents gratuitous rebuilding of stage 1.\n+prebootstrap:\n+\t$(MAKE) all-bootstrap\n+\t$(STAMP) prebootstrap\n+\n+all-stage1-gcc: configure-stage1-gcc prebootstrap\n \techo all-stage1-gcc > stage_last ; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \tmv stage1-gcc gcc ; \\\n \tcd gcc && \\\n \t$(MAKE) $(GCC_FLAGS_TO_PASS) \\\n-                LANGUAGES=\"$(STAGE1_LANGUAGES)\" \\\n \t\tCFLAGS=\"$(STAGE1_CFLAGS)\" \\\n \t\tCOVERAGE_FLAGS= || exit 1 ; \\\n \tcd .. ; \\"}, {"sha": "de8559446a688379d63d2954e87b40a24d62d4e2", "filename": "Makefile.tpl", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/340de83fd55cbd92e1a168094e61506c967dc9e2/Makefile.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/340de83fd55cbd92e1a168094e61506c967dc9e2/Makefile.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.tpl?ref=340de83fd55cbd92e1a168094e61506c967dc9e2", "patch": "@@ -1294,7 +1294,11 @@ STAMP = echo timestamp >\n STAGE1_CFLAGS=@stage1_cflags@\n STAGE1_LANGUAGES=@stage1_languages@\n \n-# TODO: deal with OBJS-onestep\n+# For stage 1:\n+# * we force-disable intermodule optimizations, even if\n+#   --enable-intermodule was passed.  Luckily, autoconf always accepts\n+#   the last* argument when conflicting --enable arguments are passed.\n+# * we build only C (and possibly Ada).\n configure-stage1-gcc:\n \techo configure-stage1-gcc > stage_last ; \\\n \tif [ -f stage1-gcc/Makefile ] ; then \\\n@@ -1337,19 +1341,26 @@ configure-stage1-gcc:\n \t    libsrcdir=\"$$s/gcc\";; \\\n \tesac; \\\n \t$(SHELL) $${libsrcdir}/configure \\\n-\t  $(HOST_CONFIGARGS) $${srcdiroption} ; \\\n+\t  $(HOST_CONFIGARGS) $${srcdiroption} \\\n+\t  --disable-intermodule \\\n+\t  --enable-languages=\"$(STAGE1_LANGUAGES)\"; \\\n \tcd .. ; \\\n \tmv gcc stage1-gcc ; \\\n \t$(STAMP) configure-stage1-gcc\n \n-all-stage1-gcc: configure-stage1-gcc all-bootstrap\n+# Real targets act phony if they depend on phony targets; this hack\n+# prevents gratuitous rebuilding of stage 1.\n+prebootstrap:\n+\t$(MAKE) all-bootstrap\n+\t$(STAMP) prebootstrap\n+\n+all-stage1-gcc: configure-stage1-gcc prebootstrap\n \techo all-stage1-gcc > stage_last ; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \tmv stage1-gcc gcc ; \\\n \tcd gcc && \\\n \t$(MAKE) $(GCC_FLAGS_TO_PASS) \\\n-                LANGUAGES=\"$(STAGE1_LANGUAGES)\" \\\n \t\tCFLAGS=\"$(STAGE1_CFLAGS)\" \\\n \t\tCOVERAGE_FLAGS= || exit 1 ; \\\n \tcd .. ; \\"}, {"sha": "a884c3281bf28fe5a319582c42296d7d0c31f006", "filename": "configure", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/340de83fd55cbd92e1a168094e61506c967dc9e2/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/340de83fd55cbd92e1a168094e61506c967dc9e2/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=340de83fd55cbd92e1a168094e61506c967dc9e2", "patch": "@@ -2283,8 +2283,8 @@ if test -d ${srcdir}/gcc; then\n \t    missing_languages=`echo \"$missing_languages\" | sed \"s/,$language,/,/\"`\n \t    case ${boot_language} in\n \t      yes)\n-\t\t# Add to (space-separated) list of stage 1 languages.\n-\t\tstage1_languages=\"${stage1_languages} ${language}\"\n+\t\t# Add to (comma-separated) list of stage 1 languages.\n+\t\tstage1_languages=\"${stage1_languages},${language}\"\n \t\t;;\n \t    esac\n \t    ;;"}, {"sha": "0a9f05fd8fc37d88c6f2046df93f6c884ad425b5", "filename": "configure.in", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/340de83fd55cbd92e1a168094e61506c967dc9e2/configure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/340de83fd55cbd92e1a168094e61506c967dc9e2/configure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.in?ref=340de83fd55cbd92e1a168094e61506c967dc9e2", "patch": "@@ -1180,8 +1180,8 @@ if test -d ${srcdir}/gcc; then\n \t    missing_languages=`echo \"$missing_languages\" | sed \"s/,$language,/,/\"`\n \t    case ${boot_language} in\n \t      yes)\n-\t\t# Add to (space-separated) list of stage 1 languages.\n-\t\tstage1_languages=\"${stage1_languages} ${language}\"\n+\t\t# Add to (comma-separated) list of stage 1 languages.\n+\t\tstage1_languages=\"${stage1_languages},${language}\"\n \t\t;;\n \t    esac\n \t    ;;"}]}