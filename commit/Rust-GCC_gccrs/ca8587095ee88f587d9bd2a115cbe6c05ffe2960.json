{"sha": "ca8587095ee88f587d9bd2a115cbe6c05ffe2960", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2E4NTg3MDk1ZWU4OGY1ODdkOWJkMmExMTVjYmU2YzA1ZmZlMjk2MA==", "commit": {"author": {"name": "Daniel Berlin", "email": "dberlin@dberlin.org", "date": "2006-08-22T14:04:16Z"}, "committer": {"name": "Daniel Berlin", "email": "dberlin@gcc.gnu.org", "date": "2006-08-22T14:04:16Z"}, "message": "re PR tree-optimization/28003 (optimizer bug)\n\n2006-08-22  Daniel Berlin  <dberlin@dberlin.org>\n\n\tPR tree-optimization/28003\n\t* tree-ssa-alias.c (compute_may_aliases): Compute call clobbered\n\tbefore grouping aliases.\n\nFrom-SVN: r116323", "tree": {"sha": "81bb3dbcd2eb11bcbda0b5066d2c8a4cd44d8a05", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81bb3dbcd2eb11bcbda0b5066d2c8a4cd44d8a05"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca8587095ee88f587d9bd2a115cbe6c05ffe2960", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca8587095ee88f587d9bd2a115cbe6c05ffe2960", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca8587095ee88f587d9bd2a115cbe6c05ffe2960", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca8587095ee88f587d9bd2a115cbe6c05ffe2960/comments", "author": {"login": "dberlin", "id": 324715, "node_id": "MDQ6VXNlcjMyNDcxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/324715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dberlin", "html_url": "https://github.com/dberlin", "followers_url": "https://api.github.com/users/dberlin/followers", "following_url": "https://api.github.com/users/dberlin/following{/other_user}", "gists_url": "https://api.github.com/users/dberlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dberlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dberlin/subscriptions", "organizations_url": "https://api.github.com/users/dberlin/orgs", "repos_url": "https://api.github.com/users/dberlin/repos", "events_url": "https://api.github.com/users/dberlin/events{/privacy}", "received_events_url": "https://api.github.com/users/dberlin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "883259c6d3071d35451cd34353191565bc4cee34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/883259c6d3071d35451cd34353191565bc4cee34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/883259c6d3071d35451cd34353191565bc4cee34"}], "stats": {"total": 43, "additions": 40, "deletions": 3}, "files": [{"sha": "3e4e388113647606e1d17c952acbdc207fbcb6fe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca8587095ee88f587d9bd2a115cbe6c05ffe2960/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca8587095ee88f587d9bd2a115cbe6c05ffe2960/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ca8587095ee88f587d9bd2a115cbe6c05ffe2960", "patch": "@@ -1,3 +1,9 @@\n+2006-08-22  Daniel Berlin  <dberlin@dberlin.org>\n+\n+\tPR tree-optimization/28003\n+\t* tree-ssa-alias.c (compute_may_aliases): Compute call clobbered\n+\tbefore grouping aliases.\n+\n 2006-08-22  Roger Sayle  <roger@eyesopen.com>\n \n \t* config/i386/i386.c (ix86_value_regno): Don't return FIRST_MMX_REG"}, {"sha": "ff260bcf4b47484aff3ea5152327c544b43527f3", "filename": "gcc/testsuite/g++.dg/tree-ssa/pr28003.C", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca8587095ee88f587d9bd2a115cbe6c05ffe2960/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftree-ssa%2Fpr28003.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca8587095ee88f587d9bd2a115cbe6c05ffe2960/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftree-ssa%2Fpr28003.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftree-ssa%2Fpr28003.C?ref=ca8587095ee88f587d9bd2a115cbe6c05ffe2960", "patch": "@@ -0,0 +1,31 @@\n+// PR tree-optimization/28003\n+// Alias grouping needs to be computed after call clobbering, because it\n+// changes around the tags and variables in a way that makes our\n+// call clobbering computation incorrect.\n+// { dg-do run }\n+// { dg-options \"-O2\" }\n+extern \"C\" void abort(void);\n+struct A\n+{\n+  int i, j[9];\n+  A() : i(1) { j[0]=j[1]=j[2]=j[3]=j[4]=j[5]=j[6]=j[7]=j[8]=0; }\n+};\n+\n+struct B\n+{\n+  A a;\n+};\n+\n+B b[] =\n+{\n+  {}, {}, {}, {}, {}, {}, {}, {}, {}, {},\n+  {}, {}, {}, {}, {}, {}, {}, {}, {}, {},\n+  {}, {}, {}, {}, {}\n+};\n+\n+int main()\n+{\n+  if (1 - b[sizeof(b)/sizeof(B) - 1].a.i != 0)\n+    abort();\n+  return 0;\n+}"}, {"sha": "d3c5700c873cd58393ccb6fda800d8ae77cd16a4", "filename": "gcc/tree-ssa-alias.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca8587095ee88f587d9bd2a115cbe6c05ffe2960/gcc%2Ftree-ssa-alias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca8587095ee88f587d9bd2a115cbe6c05ffe2960/gcc%2Ftree-ssa-alias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-alias.c?ref=ca8587095ee88f587d9bd2a115cbe6c05ffe2960", "patch": "@@ -678,14 +678,14 @@ compute_may_aliases (void)\n   /* Compute type-based flow-insensitive aliasing for all the type\n      memory tags.  */\n   compute_flow_insensitive_aliasing (ai);\n+  \n+  /* Compute call clobbering information.  */\n+  compute_call_clobbered (ai);\n \n   /* Determine if we need to enable alias grouping.  */\n   if (ai->total_alias_vops >= MAX_ALIASED_VOPS)\n     group_aliases (ai);\n \n-  /* Compute call clobbering information.  */\n-  compute_call_clobbered (ai);\n-\n   /* If the program has too many call-clobbered variables and/or function\n      calls, create .GLOBAL_VAR and use it to model call-clobbering\n      semantics at call sites.  This reduces the number of virtual operands"}]}