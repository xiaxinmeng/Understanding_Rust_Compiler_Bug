{"sha": "03845b47e6a3519de3be01030abdaa20e3595983", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDM4NDViNDdlNmEzNTE5ZGUzYmUwMTAzMGFiZGFhMjBlMzU5NTk4Mw==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2003-09-06T13:34:00Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2003-09-06T13:34:00Z"}, "message": "re PR c/9862 (spurious warnings with -W -finline-functions)\n\n\tPR c/9862\n\t* c-decl.c (c_expand_body_1): Move return warning from here...\n\t(finish_function): ...to here.\n\n\t* gcc.dg/20030906-1.c: New test.\n\t* gcc.dg/20030906-2.c: Likewise.\n\nFrom-SVN: r71134", "tree": {"sha": "95933801fe9d7d8c2366530070824dbcb792e031", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95933801fe9d7d8c2366530070824dbcb792e031"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03845b47e6a3519de3be01030abdaa20e3595983", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03845b47e6a3519de3be01030abdaa20e3595983", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03845b47e6a3519de3be01030abdaa20e3595983", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03845b47e6a3519de3be01030abdaa20e3595983/comments", "author": null, "committer": null, "parents": [{"sha": "b92bc2a028982a808589a187381095c158182446", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b92bc2a028982a808589a187381095c158182446", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b92bc2a028982a808589a187381095c158182446"}], "stats": {"total": 68, "additions": 61, "deletions": 7}, "files": [{"sha": "8d7e360d68fbcabbd2825bc947fd0494390ff5c5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03845b47e6a3519de3be01030abdaa20e3595983/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03845b47e6a3519de3be01030abdaa20e3595983/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=03845b47e6a3519de3be01030abdaa20e3595983", "patch": "@@ -1,3 +1,9 @@\n+2003-09-06  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\tPR c/9862\n+\t* c-decl.c (c_expand_body_1): Move return warning from here...\n+\t(finish_function): ...to here.\n+\n 2003-09-05  Geoffrey Keating  <geoffk@apple.com>\n \n \t* config/rs6000/darwin.h (PREFERRED_RELOAD_CLASS): Always return"}, {"sha": "f4896f3f8bc3cca132a0fccfcd802fbc9a12dd7b", "filename": "gcc/c-decl.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03845b47e6a3519de3be01030abdaa20e3595983/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03845b47e6a3519de3be01030abdaa20e3595983/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=03845b47e6a3519de3be01030abdaa20e3595983", "patch": "@@ -6129,6 +6129,13 @@ finish_function ()\n       && DECL_INLINE (fndecl))\n     warning (\"no return statement in function returning non-void\");\n \n+  /* With just -Wextra, complain only if function returns both with\n+     and without a value.  */\n+  if (extra_warnings\n+      && current_function_returns_value\n+      && current_function_returns_null)\n+    warning (\"this function may return with or without a value\");\n+\n   /* We're leaving the context of this function, so zap cfun.  It's still in\n      DECL_SAVED_INSNS, and we'll restore it in tree_rest_of_compilation.  */\n   cfun = NULL;\n@@ -6178,13 +6185,6 @@ c_expand_body_1 (tree fndecl, int nested_p)\n \n   tree_rest_of_compilation (fndecl);\n \n-  /* With just -Wextra, complain only if function returns both with\n-     and without a value.  */\n-  if (extra_warnings\n-      && current_function_returns_value\n-      && current_function_returns_null)\n-    warning (\"this function may return with or without a value\");\n-\n   if (DECL_STATIC_CONSTRUCTOR (fndecl))\n     {\n       if (targetm.have_ctors_dtors)"}, {"sha": "65f499d18346b6e829b3ff65767db6ea3b7538bd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03845b47e6a3519de3be01030abdaa20e3595983/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03845b47e6a3519de3be01030abdaa20e3595983/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=03845b47e6a3519de3be01030abdaa20e3595983", "patch": "@@ -1,3 +1,9 @@\n+2003-09-06  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\tPR c/9862\n+\t* gcc.dg/20030906-1.c: New test.\n+\t* gcc.dg/20030906-2.c: Likewise.\n+\n 2003-09-06  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/12167"}, {"sha": "57d80f044c357555cdff5858e5cadb674c953c26", "filename": "gcc/testsuite/gcc.dg/20030906-1.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03845b47e6a3519de3be01030abdaa20e3595983/gcc%2Ftestsuite%2Fgcc.dg%2F20030906-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03845b47e6a3519de3be01030abdaa20e3595983/gcc%2Ftestsuite%2Fgcc.dg%2F20030906-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20030906-1.c?ref=03845b47e6a3519de3be01030abdaa20e3595983", "patch": "@@ -0,0 +1,21 @@\n+/* Bug 9862 -- Spurious warnings with -finline-functions.\n+   Copyright (C) 2003 Free Software Foundation Inc.  */\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-O -finline-functions -Wextra\" } */\n+\n+extern int i;\n+extern int foo (void);\n+extern int bar (void);\n+\n+int foo (void)\n+{\n+  if( i ) return 0;\n+  else    return 1;\n+}\t\t/* { dg-bogus \"may return with or without a value\" } */\n+\n+int bar (void)\n+{\n+  if( i ) return;\n+  else    return 1;\n+}\t\t/* { dg-warning \"may return with or without a value\" } */"}, {"sha": "8f3d3781618e6385f8baedb6e7bd64d1df26309d", "filename": "gcc/testsuite/gcc.dg/20030906-2.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03845b47e6a3519de3be01030abdaa20e3595983/gcc%2Ftestsuite%2Fgcc.dg%2F20030906-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03845b47e6a3519de3be01030abdaa20e3595983/gcc%2Ftestsuite%2Fgcc.dg%2F20030906-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20030906-2.c?ref=03845b47e6a3519de3be01030abdaa20e3595983", "patch": "@@ -0,0 +1,21 @@\n+/* Bug 9862 -- Spurious warnings with -finline-functions.\n+   Copyright (C) 2003 Free Software Foundation Inc.  */\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-O -finline-functions -Wextra\" } */\n+\n+extern int i;\n+extern int foo (void);\n+extern int bar (void);\n+\n+int foo (void)\n+{\n+  if( i ) return;\n+  else    return 1;\n+}\t\t/* { dg-warning \"may return with or without a value\" } */\n+\n+int bar (void)\n+{\n+  if( i ) return 0;\n+  else    return 1;\n+}"}]}