{"sha": "0efb9d64adf43e0022940478d7ffcf70a92f4305", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGVmYjlkNjRhZGY0M2UwMDIyOTQwNDc4ZDdmZmNmNzBhOTJmNDMwNQ==", "commit": {"author": {"name": "Andreas Krebbel", "email": "Andreas.Krebbel@de.ibm.com", "date": "2011-02-08T11:15:53Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2011-02-08T11:15:53Z"}, "message": "gimple-low.c (lower_function_body): Don't remove the location of the return statement here.\n\n2011-02-08  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\t* gimple-low.c (lower_function_body): Don't remove the location of\n\tthe return statement here.\n\t(lower_gimple_return): Do it here instead but only if the return\n\tstatement is actually used twice.\n\nFrom-SVN: r169918", "tree": {"sha": "eb9f8ee051045f0da17a63b2ffc3ac8df688b5e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb9f8ee051045f0da17a63b2ffc3ac8df688b5e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0efb9d64adf43e0022940478d7ffcf70a92f4305", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0efb9d64adf43e0022940478d7ffcf70a92f4305", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0efb9d64adf43e0022940478d7ffcf70a92f4305", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0efb9d64adf43e0022940478d7ffcf70a92f4305/comments", "author": null, "committer": null, "parents": [{"sha": "034b8ae4f8c89314b13879ef2d403c14daa5c4fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/034b8ae4f8c89314b13879ef2d403c14daa5c4fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/034b8ae4f8c89314b13879ef2d403c14daa5c4fd"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "36e7a731040e928550ff54e720dd7c6320672cda", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0efb9d64adf43e0022940478d7ffcf70a92f4305/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0efb9d64adf43e0022940478d7ffcf70a92f4305/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0efb9d64adf43e0022940478d7ffcf70a92f4305", "patch": "@@ -1,3 +1,10 @@\n+2011-02-08  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\t* gimple-low.c (lower_function_body): Don't remove the location of\n+\tthe return statement here.\n+\t(lower_gimple_return): Do it here instead but only if the return\n+\tstatement is actually used twice.\n+\n 2011-02-08  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/47632"}, {"sha": "67087a0aadc12907561e4c806f0d46f2f2c6728a", "filename": "gcc/gimple-low.c", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0efb9d64adf43e0022940478d7ffcf70a92f4305/gcc%2Fgimple-low.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0efb9d64adf43e0022940478d7ffcf70a92f4305/gcc%2Fgimple-low.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-low.c?ref=0efb9d64adf43e0022940478d7ffcf70a92f4305", "patch": "@@ -148,11 +148,6 @@ lower_function_body (void)\n \n       x = gimple_build_label (t.label);\n       gsi_insert_after (&i, x, GSI_CONTINUE_LINKING);\n-\n-      /* Remove the line number from the representative return statement.\n-\t It now fills in for many such returns.  Failure to remove this\n-\t will result in incorrect results for coverage analysis.  */\n-      gimple_set_location (t.stmt, UNKNOWN_LOCATION);\n       gsi_insert_after (&i, t.stmt, GSI_CONTINUE_LINKING);\n     }\n \n@@ -746,7 +741,14 @@ lower_gimple_return (gimple_stmt_iterator *gsi, struct lower_data *data)\n       tmp_rs = *VEC_index (return_statements_t, data->return_statements, i);\n \n       if (gimple_return_retval (stmt) == gimple_return_retval (tmp_rs.stmt))\n-\tgoto found;\n+\t{\n+\t  /* Remove the line number from the representative return statement.\n+\t     It now fills in for many such returns.  Failure to remove this\n+\t     will result in incorrect results for coverage analysis.  */\n+\t  gimple_set_location (tmp_rs.stmt, UNKNOWN_LOCATION);\n+\n+\t  goto found;\n+\t}\n     }\n \n   /* Not found.  Create a new label and record the return statement.  */"}]}