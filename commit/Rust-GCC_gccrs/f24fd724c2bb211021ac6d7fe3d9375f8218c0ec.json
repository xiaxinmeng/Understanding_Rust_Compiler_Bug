{"sha": "f24fd724c2bb211021ac6d7fe3d9375f8218c0ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjI0ZmQ3MjRjMmJiMjExMDIxYWM2ZDdmZTNkOTM3NWY4MjE4YzBlYw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2001-04-27T00:56:16Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2001-04-27T00:56:16Z"}, "message": "libjava.exp (libjava_init): Use UTF-8 encoding.\n\n\t* lib/libjava.exp (libjava_init): Use UTF-8 encoding.\n\t(test_libjava_from_javac): Likewise.\n\nFrom-SVN: r41617", "tree": {"sha": "14f8a698b070301260bc844163e64eaeb9bf2626", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/14f8a698b070301260bc844163e64eaeb9bf2626"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f24fd724c2bb211021ac6d7fe3d9375f8218c0ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f24fd724c2bb211021ac6d7fe3d9375f8218c0ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f24fd724c2bb211021ac6d7fe3d9375f8218c0ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f24fd724c2bb211021ac6d7fe3d9375f8218c0ec/comments", "author": null, "committer": null, "parents": [{"sha": "041c9d5a47d130a36237976b3db111416efd35ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/041c9d5a47d130a36237976b3db111416efd35ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/041c9d5a47d130a36237976b3db111416efd35ee"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "c8b9a5f94cb8c74b98aecf333b010a5abf94a22f", "filename": "libjava/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f24fd724c2bb211021ac6d7fe3d9375f8218c0ec/libjava%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f24fd724c2bb211021ac6d7fe3d9375f8218c0ec/libjava%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FChangeLog?ref=f24fd724c2bb211021ac6d7fe3d9375f8218c0ec", "patch": "@@ -1,3 +1,8 @@\n+2001-04-25  Tom Tromey  <tromey@redhat.com>\n+\n+\t* lib/libjava.exp (libjava_init): Use UTF-8 encoding.\n+\t(test_libjava_from_javac): Likewise.\n+\n 2001-04-09  Tom Tromey  <tromey@redhat.com>\n \n \t* libjava.lang/pr83.xfail: Removed."}, {"sha": "18a07e252446fb0939ced328697d9382b291f8dd", "filename": "libjava/testsuite/lib/libjava.exp", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f24fd724c2bb211021ac6d7fe3d9375f8218c0ec/libjava%2Ftestsuite%2Flib%2Flibjava.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f24fd724c2bb211021ac6d7fe3d9375f8218c0ec/libjava%2Ftestsuite%2Flib%2Flibjava.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flib%2Flibjava.exp?ref=f24fd724c2bb211021ac6d7fe3d9375f8218c0ec", "patch": "@@ -127,6 +127,9 @@ proc libjava_init { args } {\n \t}\n     }\n \n+    # Always set encoding used by gcj.\n+    append GCJ_UNDER_TEST \" --encoding=UTF-8\"\n+\n     if [info exists env(LD_LIBRARY_PATH)] {\n \tset original_ld_library_path $env(LD_LIBRARY_PATH)\n     } else {\n@@ -501,15 +504,18 @@ proc test_libjava_from_javac { options srcfile compile_args inpfile resultfile e\n     # Find name to use for --main, and name of all class files.\n     set jvscan [find_jvscan]\n     verbose \"jvscan is $jvscan\"\n+    # We insulate ourselves from the user's locale by forcing the\n+    # encoding on jvscan.\n+    set jvscan \"compiler=$jvscan additional_flags=--encoding=UTF-8\"\n     set main_name [string trim \\\n \t\t     [prune_warnings \\\n \t\t\t[libjava_tcompile $srcfile \"\" none \\\n-\t\t\t   \"compiler=$jvscan additional_flags=--print-main\"]]]\n+\t\t\t   \"$jvscan additional_flags=--print-main\"]]]\n     verbose \"main name is $main_name\"\n     set class_out [string trim \\\n \t\t     [prune_warnings \\\n \t\t\t[libjava_tcompile $srcfile \"\" none \\\n-\t\t\t   \"compiler=$jvscan additional_flags=--list-class\"]]]\n+\t\t\t   \"$jvscan additional_flags=--list-class\"]]]\n     verbose \"class list is $class_out\"\n \n     if {[string match \"*parse error*\" $main_name]"}]}