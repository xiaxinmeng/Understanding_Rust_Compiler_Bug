{"sha": "11522353fe7d3490ecf2877879bd2978b2277926", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTE1MjIzNTNmZTdkMzQ5MGVjZjI4Nzc4NzliZDI5NzhiMjI3NzkyNg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2008-07-24T04:51:12Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2008-07-24T04:51:12Z"}, "message": "tree-vrp.c (infer_value_range): Ignore asm statements when looking for memory accesses for...\n\n./:\t* tree-vrp.c (infer_value_range): Ignore asm statements when\n\tlooking for memory accesses for -fdelete-null-pointer-checks.\ntestsuite/:\n\t* gcc.target/i386/20080723-1.c: New test.\n\nFrom-SVN: r138107", "tree": {"sha": "e15d5bf5c67194c4fee0af6c55638ec97a3044e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e15d5bf5c67194c4fee0af6c55638ec97a3044e8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/11522353fe7d3490ecf2877879bd2978b2277926", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11522353fe7d3490ecf2877879bd2978b2277926", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11522353fe7d3490ecf2877879bd2978b2277926", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11522353fe7d3490ecf2877879bd2978b2277926/comments", "author": null, "committer": null, "parents": [{"sha": "e816b6b586db405da98b97e1940c595bb5ee1ffa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e816b6b586db405da98b97e1940c595bb5ee1ffa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e816b6b586db405da98b97e1940c595bb5ee1ffa"}], "stats": {"total": 62, "additions": 61, "deletions": 1}, "files": [{"sha": "b032c85bbac73742954c4c632e4c79254ccc32d2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11522353fe7d3490ecf2877879bd2978b2277926/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11522353fe7d3490ecf2877879bd2978b2277926/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=11522353fe7d3490ecf2877879bd2978b2277926", "patch": "@@ -1,3 +1,8 @@\n+2008-07-23  Ian Lance Taylor  <iant@google.com>\n+\n+\t* tree-vrp.c (infer_value_range): Ignore asm statements when\n+\tlooking for memory accesses for -fdelete-null-pointer-checks.\n+\n 2008-07-24  Ben Elliston  <bje@au.ibm.com>\n \n \t* config/spu/spu-c.c (__vector_keyword): New variable."}, {"sha": "f4d271c3e17113eadd1f7db95e733771a9cb9fbf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11522353fe7d3490ecf2877879bd2978b2277926/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11522353fe7d3490ecf2877879bd2978b2277926/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=11522353fe7d3490ecf2877879bd2978b2277926", "patch": "@@ -1,3 +1,7 @@\n+2008-07-23  Ian Lance Taylor  <iant@google.com>\n+\n+\t* gcc.target/i386/20080723-1.c: New test.\n+\n 2008-07-24  Ben Elliston  <bje@au.ibm.com>\n \n \t* gcc.target/spu/vector.c: New test."}, {"sha": "a2ed5bf86dfd8bfa10146afc63c5e8bde9a825d8", "filename": "gcc/testsuite/gcc.target/i386/20080723-1.c", "status": "added", "additions": 49, "deletions": 0, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11522353fe7d3490ecf2877879bd2978b2277926/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2F20080723-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11522353fe7d3490ecf2877879bd2978b2277926/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2F20080723-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2F20080723-1.c?ref=11522353fe7d3490ecf2877879bd2978b2277926", "patch": "@@ -0,0 +1,49 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O2\" } */\n+\n+extern void abort (void);\n+extern void exit (int);\n+\n+static inline __attribute__((always_inline))\n+void\n+prefetch (void *x)\n+{\n+  asm volatile(\"prefetcht0 %0\" : : \"m\" (*(unsigned long *)x));\n+}\n+\n+struct hlist_head\n+{\n+  struct hlist_node *first;\n+};\n+\n+struct hlist_node\n+{\n+  struct hlist_node *next;\n+  unsigned long i_ino;\n+};\n+\n+struct hlist_node * find_inode_fast(struct hlist_head *head, unsigned long ino)\n+{\n+  struct hlist_node *node;\n+\n+  for (node = head->first;\n+       node && (prefetch (node->next), 1);\n+       node = node->next)\n+    {\n+      if (node->i_ino == ino)\n+\tbreak;\n+    }\n+  return node ? node : 0;\n+}\n+\n+struct hlist_node g2;\n+struct hlist_node g1 = { &g2 };\n+struct hlist_head h = { &g1 };\n+\n+int\n+main()\n+{\n+  if (find_inode_fast (&h, 1) != 0)\n+    abort ();\n+  exit (0);\n+}"}, {"sha": "62f314795ae0ebc9b1a0f05c533015413b11df9c", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11522353fe7d3490ecf2877879bd2978b2277926/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11522353fe7d3490ecf2877879bd2978b2277926/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=11522353fe7d3490ecf2877879bd2978b2277926", "patch": "@@ -3456,7 +3456,9 @@ infer_value_range (tree stmt, tree op, enum tree_code *comp_code_p, tree *val_p)\n \n   /* We can only assume that a pointer dereference will yield\n      non-NULL if -fdelete-null-pointer-checks is enabled.  */\n-  if (flag_delete_null_pointer_checks && POINTER_TYPE_P (TREE_TYPE (op)))\n+  if (flag_delete_null_pointer_checks\n+      && POINTER_TYPE_P (TREE_TYPE (op))\n+      && TREE_CODE (stmt) != ASM_EXPR)\n     {\n       unsigned num_uses, num_loads, num_stores;\n "}]}