{"sha": "0ec052fe44254693b9e8c0640c8c04ee3099de4b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGVjMDUyZmU0NDI1NDY5M2I5ZThjMDY0MGM4YzA0ZWUzMDk5ZGU0Yg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2015-02-10T17:20:01Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2015-02-10T17:20:01Z"}, "message": "re PR c++/64994 (Firefox build error: ICE: in cxx_eval_call_expression, at cp/constexpr.c:1353)\n\n\tPR c++/64994\n\t* constexpr.c (cxx_eval_call_expression): Walk the clone list.\n\nFrom-SVN: r220589", "tree": {"sha": "8c21095cac2575d43649c0ccfcfa5861c9b77417", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c21095cac2575d43649c0ccfcfa5861c9b77417"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ec052fe44254693b9e8c0640c8c04ee3099de4b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ec052fe44254693b9e8c0640c8c04ee3099de4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ec052fe44254693b9e8c0640c8c04ee3099de4b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ec052fe44254693b9e8c0640c8c04ee3099de4b/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "082908e33d11405196e37f2a6feaefae7e013cd4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/082908e33d11405196e37f2a6feaefae7e013cd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/082908e33d11405196e37f2a6feaefae7e013cd4"}], "stats": {"total": 39, "additions": 37, "deletions": 2}, "files": [{"sha": "73d1b931fb17307bfa6ae20fd166b16c6f5d387d", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ec052fe44254693b9e8c0640c8c04ee3099de4b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ec052fe44254693b9e8c0640c8c04ee3099de4b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=0ec052fe44254693b9e8c0640c8c04ee3099de4b", "patch": "@@ -1,3 +1,8 @@\n+2015-02-10  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/64994\n+\t* constexpr.c (cxx_eval_call_expression): Walk the clone list.\n+\n 2015-02-10  Jan Hubicka  <hubicka@ucw.cz>\n \n \tPR ipa/64982"}, {"sha": "2b56cb2d62bb83c53c72644d183580975282780d", "filename": "gcc/cp/constexpr.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ec052fe44254693b9e8c0640c8c04ee3099de4b/gcc%2Fcp%2Fconstexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ec052fe44254693b9e8c0640c8c04ee3099de4b/gcc%2Fcp%2Fconstexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fconstexpr.c?ref=0ec052fe44254693b9e8c0640c8c04ee3099de4b", "patch": "@@ -1348,8 +1348,12 @@ cxx_eval_call_expression (const constexpr_ctx *ctx, tree t,\n \t      if (DECL_SAVED_TREE (fun) == NULL_TREE\n \t\t  && (DECL_CONSTRUCTOR_P (fun) || DECL_DESTRUCTOR_P (fun)))\n \t\t/* The maybe-in-charge 'tor had its DECL_SAVED_TREE\n-\t\t   cleared, try the first clone.  */\n-\t\tfun = DECL_CHAIN (fun);\n+\t\t   cleared, try a clone.  */\n+\t\tfor (fun = DECL_CHAIN (fun);\n+\t\t     fun && DECL_CLONED_FUNCTION_P (fun);\n+\t\t     fun = DECL_CHAIN (fun))\n+\t\t  if (DECL_SAVED_TREE (fun))\n+\t\t    break;\n \t      gcc_assert (DECL_SAVED_TREE (fun));\n \t      tree parms, res;\n "}, {"sha": "fa4ff7cc75ef4a39e18d507b05c18d89167a51bd", "filename": "gcc/testsuite/g++.dg/cpp0x/constexpr-ctor18.C", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ec052fe44254693b9e8c0640c8c04ee3099de4b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-ctor18.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ec052fe44254693b9e8c0640c8c04ee3099de4b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-ctor18.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-ctor18.C?ref=0ec052fe44254693b9e8c0640c8c04ee3099de4b", "patch": "@@ -0,0 +1,26 @@\n+// PR c++/64994\n+// { dg-do compile { target c++11 } }\n+\n+class TimeStamp {\n+public:\n+  constexpr TimeStamp() : mValue() {}\n+  int mValue;\n+};\n+\n+class A {\n+  class B;\n+  A(bool);\n+};\n+class C {\n+  TimeStamp mFadeBeginTime;\n+};\n+class A::B {\n+public:\n+  B(int) {}\n+  TimeStamp mPrevEventTime[1];\n+};\n+\n+A::A(bool) {\n+  new C;\n+  B(0);\n+}"}]}