{"sha": "0b738568dad569012c12839d57721939ac8ef3f5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGI3Mzg1NjhkYWQ1NjkwMTJjMTI4MzlkNTc3MjE5MzlhYzhlZjNmNQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2007-08-28T09:50:04Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2007-08-28T09:50:04Z"}, "message": "re PR middle-end/32370 (Segfault after rejecting bogus assembler)\n\n\tPR middle-end/32370\n\t* passes.c (init_optimization_passes): Move pass_df_finish\n\tafter pass_postreload sublist.\n\n\t* gcc.dg/pr32370.c: New test.\n\nFrom-SVN: r127856", "tree": {"sha": "86fe83018d696ab2099609448cb335ccab58e116", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/86fe83018d696ab2099609448cb335ccab58e116"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0b738568dad569012c12839d57721939ac8ef3f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b738568dad569012c12839d57721939ac8ef3f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b738568dad569012c12839d57721939ac8ef3f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b738568dad569012c12839d57721939ac8ef3f5/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "71cca28908fd6715721704da2fe4f8929879cd86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71cca28908fd6715721704da2fe4f8929879cd86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71cca28908fd6715721704da2fe4f8929879cd86"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "bc2e9bef119d2b9322142c4cce0539bb1da34963", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b738568dad569012c12839d57721939ac8ef3f5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b738568dad569012c12839d57721939ac8ef3f5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0b738568dad569012c12839d57721939ac8ef3f5", "patch": "@@ -1,5 +1,9 @@\n 2007-08-28  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/32370\n+\t* passes.c (init_optimization_passes): Move pass_df_finish\n+\tafter pass_postreload sublist.\n+\n \tPR rtl-optimization/33148\n \t* simplify-rtx.c (simplify_unary_operation_1): Only optimize\n \t(neg (lt X 0)) if X has scalar int mode."}, {"sha": "1a34752fa71ee6ebb2404b134236fd1e8f8ffa55", "filename": "gcc/passes.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b738568dad569012c12839d57721939ac8ef3f5/gcc%2Fpasses.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b738568dad569012c12839d57721939ac8ef3f5/gcc%2Fpasses.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.c?ref=0b738568dad569012c12839d57721939ac8ef3f5", "patch": "@@ -762,13 +762,13 @@ init_optimization_passes (void)\n \t  NEXT_PASS (pass_machine_reorg);\n \t  NEXT_PASS (pass_cleanup_barriers);\n \t  NEXT_PASS (pass_delay_slots);\n-\t  NEXT_PASS (pass_df_finish);\n \t  NEXT_PASS (pass_split_for_shorten_branches);\n \t  NEXT_PASS (pass_convert_to_eh_region_ranges);\n \t  NEXT_PASS (pass_shorten_branches);\n \t  NEXT_PASS (pass_set_nothrow_function_flags);\n \t  NEXT_PASS (pass_final);\n \t}\n+      NEXT_PASS (pass_df_finish);\n     }\n   NEXT_PASS (pass_clean_state);\n   *p = NULL;"}, {"sha": "47ee5d715d538b4cd87ea2cd478b2eccf3a258ba", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b738568dad569012c12839d57721939ac8ef3f5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b738568dad569012c12839d57721939ac8ef3f5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0b738568dad569012c12839d57721939ac8ef3f5", "patch": "@@ -1,5 +1,8 @@\n 2007-08-28  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/32370\n+\t* gcc.dg/pr32370.c: New test.\n+\n \tPR rtl-optimization/33148\n \t* gcc.c-torture/compile/20070827-1.c: New test.\n "}, {"sha": "18afde21f0f335aae199cc81fdf44aaaed4db5eb", "filename": "gcc/testsuite/gcc.dg/pr32370.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b738568dad569012c12839d57721939ac8ef3f5/gcc%2Ftestsuite%2Fgcc.dg%2Fpr32370.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b738568dad569012c12839d57721939ac8ef3f5/gcc%2Ftestsuite%2Fgcc.dg%2Fpr32370.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr32370.c?ref=0b738568dad569012c12839d57721939ac8ef3f5", "patch": "@@ -0,0 +1,24 @@\n+/* PR middle-end/32370 */\n+/* { dg-do compile { target i?86-*-* x86_64-*-* ia64-*-* } } */\n+/* { dg-options \"\" { target ia64-*-* } } */\n+/* { dg-options \"-ffixed-esi\" { target i?86-*-* x86_64-*-* } } */\n+\n+#if defined __i386__ || defined __x86_64__\n+# define C \"=S\"\n+#elif defined __ia64__\n+# define C \"=a\"\n+#endif\n+\n+unsigned int\n+foo (unsigned long port)\n+{\n+  unsigned int v;\n+  __asm__ __volatile__ (\"\" : C (v) : \"Nd\" (port));\t/* { dg-error \"while reloading\\|has impossible\" } */\n+  return v;\n+}\n+\n+void\n+bar (void)\n+{\n+  foo (0);\n+}"}]}