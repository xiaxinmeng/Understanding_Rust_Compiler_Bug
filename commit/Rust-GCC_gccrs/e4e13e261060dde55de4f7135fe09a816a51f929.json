{"sha": "e4e13e261060dde55de4f7135fe09a816a51f929", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTRlMTNlMjYxMDYwZGRlNTVkZTRmNzEzNWZlMDlhODE2YTUxZjkyOQ==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2019-01-26T21:07:15Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gcc.gnu.org", "date": "2019-01-26T21:07:15Z"}, "message": "Fix ICE when handling void initialized manifest constants.\n\ngcc/d/ChangeLog:\n\n2019-01-26  Iain Buclaw  <ibuclaw@gdcproject.org>\n\n\tPR d/89042\n\t* decl.cc (DeclVisitor::visit(VarDeclaration)): Don't assert if\n\thandling a void initialized manifest constant.\n\ngcc/testsuite/ChangeLog:\n\n2019-01-26  Iain Buclaw  <ibuclaw@gdcproject.org>\n\n\tPR d/89042\n\t* gdc.dg/pr89042a.d: New test.\n\t* gdc.dg/pr89042b.d: New test.\n\nFrom-SVN: r268304", "tree": {"sha": "654e8d21aa880ad2e9e2a90e6f88b811d0a39c67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/654e8d21aa880ad2e9e2a90e6f88b811d0a39c67"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e4e13e261060dde55de4f7135fe09a816a51f929", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4e13e261060dde55de4f7135fe09a816a51f929", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4e13e261060dde55de4f7135fe09a816a51f929", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4e13e261060dde55de4f7135fe09a816a51f929/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3a55c8e248e82f0d64ed8acb85183fefe53cfc0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a55c8e248e82f0d64ed8acb85183fefe53cfc0a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a55c8e248e82f0d64ed8acb85183fefe53cfc0a"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "151fe1c6ab1f62b2d6e9fce860dda8f577b8d680", "filename": "gcc/d/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4e13e261060dde55de4f7135fe09a816a51f929/gcc%2Fd%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4e13e261060dde55de4f7135fe09a816a51f929/gcc%2Fd%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2FChangeLog?ref=e4e13e261060dde55de4f7135fe09a816a51f929", "patch": "@@ -1,3 +1,9 @@\n+2019-01-26  Iain Buclaw  <ibuclaw@gdcproject.org>\n+\n+\tPR d/89042\n+\t* decl.cc (DeclVisitor::visit(VarDeclaration)): Don't assert if\n+\thandling a void initialized manifest constant.\n+\n 2019-01-21  Iain Buclaw  <ibuclaw@gdcproject.org>\n \n \t* d-frontend.cc (Compiler::paintAsType): Update for new signature."}, {"sha": "7edfe523d3e92be0276a0806ec00c3b39b5e07a4", "filename": "gcc/d/decl.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4e13e261060dde55de4f7135fe09a816a51f929/gcc%2Fd%2Fdecl.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4e13e261060dde55de4f7135fe09a816a51f929/gcc%2Fd%2Fdecl.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fdecl.cc?ref=e4e13e261060dde55de4f7135fe09a816a51f929", "patch": "@@ -593,8 +593,11 @@ class DeclVisitor : public Visitor\n \tif (d->isInstantiated ())\n \t  return;\n \n+\t/* Cannot make an expression out of a void initializer.  */\n+\tif (!d->_init || d->_init->isVoidInitializer ())\n+\t  return;\n+\n \ttree decl = get_symbol_decl (d);\n-\tgcc_assert (d->_init && !d->_init->isVoidInitializer ());\n \tExpression *ie = initializerToExpression (d->_init);\n \n \t/* CONST_DECL was initially intended for enumerals and may be used for"}, {"sha": "f1e89d56010e2237b6fb6046f6db522f5f6619cd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4e13e261060dde55de4f7135fe09a816a51f929/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4e13e261060dde55de4f7135fe09a816a51f929/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e4e13e261060dde55de4f7135fe09a816a51f929", "patch": "@@ -1,3 +1,9 @@\n+2019-01-26  Iain Buclaw  <ibuclaw@gdcproject.org>\n+\n+\tPR d/89042\n+\t* gdc.dg/pr89042a.d: New test.\n+\t* gdc.dg/pr89042b.d: New test.\n+\n 2019-01-26  Harald Anlauf  <anlauf@gmx.de>\n \n \tPR fortran/57553"}, {"sha": "42e05aee181a1f4923bc53ee1cd18339aca63cb1", "filename": "gcc/testsuite/gdc.dg/pr89042a.d", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4e13e261060dde55de4f7135fe09a816a51f929/gcc%2Ftestsuite%2Fgdc.dg%2Fpr89042a.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4e13e261060dde55de4f7135fe09a816a51f929/gcc%2Ftestsuite%2Fgdc.dg%2Fpr89042a.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.dg%2Fpr89042a.d?ref=e4e13e261060dde55de4f7135fe09a816a51f929", "patch": "@@ -0,0 +1,2 @@\n+// https://gcc.gnu.org/bugzilla/show_bug.cgi?id=89042\n+enum void[] a = void;"}, {"sha": "73a1c6eff2d1582f390c115133eeb879a25d817a", "filename": "gcc/testsuite/gdc.dg/pr89042b.d", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4e13e261060dde55de4f7135fe09a816a51f929/gcc%2Ftestsuite%2Fgdc.dg%2Fpr89042b.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4e13e261060dde55de4f7135fe09a816a51f929/gcc%2Ftestsuite%2Fgdc.dg%2Fpr89042b.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.dg%2Fpr89042b.d?ref=e4e13e261060dde55de4f7135fe09a816a51f929", "patch": "@@ -0,0 +1,2 @@\n+// https://gcc.gnu.org/bugzilla/show_bug.cgi?id=89042\n+enum void[2] a = void;"}]}