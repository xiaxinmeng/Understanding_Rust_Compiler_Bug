{"sha": "fcc448088df39d4512d3f1fd1d85ea2c83c36cf9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmNjNDQ4MDg4ZGYzOWQ0NTEyZDNmMWZkMWQ4NWVhMmM4M2MzNmNmOQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2008-01-24T17:08:10Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2008-01-24T17:08:10Z"}, "message": "re PR target/34856 (ICE with some constant vectors)\n\n\tPR target/34856\n\t* config/i386/i386.c (ix86_expand_vector_init): Consider only\n\tCONST_INT, CONST_DOUBLE and CONST_FIXED as constant vector elements.\n\ntestsuite/ChangeLog:\n\n\tPR target/34856\n\t* gcc.dg/pr34856.c: New test.\n\nFrom-SVN: r131796", "tree": {"sha": "c6b21fc37a86df364486f9155106cbb51f394317", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c6b21fc37a86df364486f9155106cbb51f394317"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "94de25225dcfcb12f44414885e32de5bfcba91e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94de25225dcfcb12f44414885e32de5bfcba91e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94de25225dcfcb12f44414885e32de5bfcba91e2"}], "stats": {"total": 40, "additions": 39, "deletions": 1}, "files": [{"sha": "6b4689aeb5473c6a3dd21d795f93b83258c37842", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fcc448088df39d4512d3f1fd1d85ea2c83c36cf9", "patch": "@@ -1,3 +1,9 @@\n+2008-01-24  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/34856\n+\t* config/i386/i386.c (ix86_expand_vector_init): Consider only\n+\tCONST_INT, CONST_DOUBLE and CONST_FIXED as constant vector elements.\n+\n 2008-01-24  Jakub Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/34934"}, {"sha": "6e9ae2a2ebd82d8b53620897ecb4f76a6c395c2d", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=fcc448088df39d4512d3f1fd1d85ea2c83c36cf9", "patch": "@@ -23593,7 +23593,9 @@ ix86_expand_vector_init (bool mmx_ok, rtx target, rtx vals)\n   for (i = 0; i < n_elts; ++i)\n     {\n       x = XVECEXP (vals, 0, i);\n-      if (!CONSTANT_P (x))\n+      if (!(CONST_INT_P (x)\n+\t    || GET_CODE (x) == CONST_DOUBLE\n+\t    || GET_CODE (x) == CONST_FIXED))\n \tn_var++, one_var = i;\n       else if (x != CONST0_RTX (inner_mode))\n \tall_const_zero = false;"}, {"sha": "96515abbcba5db569c0f77f20834a49d27eaaa95", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fcc448088df39d4512d3f1fd1d85ea2c83c36cf9", "patch": "@@ -1,3 +1,8 @@\n+2008-01-24  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/34856\n+\t* gcc.dg/pr34856.c: New test.\n+\n 2008-01-24  Tobias Burnus  <burnus@net-b.de>\n \n \t* gfortran.dg/namelist_39.f90: Delete temporary files."}, {"sha": "7900cc3472b7eab5c8c96445f955b2a4bdb5397c", "filename": "gcc/testsuite/gcc.dg/pr34856.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34856.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcc448088df39d4512d3f1fd1d85ea2c83c36cf9/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34856.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34856.c?ref=fcc448088df39d4512d3f1fd1d85ea2c83c36cf9", "patch": "@@ -0,0 +1,25 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+/* { dg-options \"-O2 -msse2\" { target { i?86-*-* x86_64-*-* } } } */\n+\n+#undef __vector\n+#define __vector __attribute__((vector_size(16) ))\n+\n+typedef __vector signed char qword;\n+typedef __vector unsigned int VU32;\n+\n+extern short g[192 + 16];\n+\n+void f (qword);\n+\n+void f1 (unsigned ctr)\n+{\n+  VU32 pin;\n+  pin = (VU32){(unsigned int) &g[16]};\n+  do\n+    {\n+      f ((qword) pin);\n+      ctr--;\n+    }\n+  while (ctr);\n+}"}]}