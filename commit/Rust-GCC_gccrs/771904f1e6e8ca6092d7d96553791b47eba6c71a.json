{"sha": "771904f1e6e8ca6092d7d96553791b47eba6c71a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzcxOTA0ZjFlNmU4Y2E2MDkyZDdkOTY1NTM3OTFiNDdlYmE2YzcxYQ==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2007-03-16T01:07:52Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2007-03-16T01:07:52Z"}, "message": "cp-demangle.c (d_encoding): Exit early on error.\n\n\t* cp-demangle.c (d_encoding): Exit early on error.\n\t(d_pointer_to_member_type): Exit early if cplus_demangle_type\n\treturns NULL.\n\t(cplus_demangle_type): Likewise.\n\t* testsuite/demangle-expected: New testcase.\n\nFrom-SVN: r122972", "tree": {"sha": "36dda64d30068c584b2a3efbdad5b5d9fefa6696", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/36dda64d30068c584b2a3efbdad5b5d9fefa6696"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/771904f1e6e8ca6092d7d96553791b47eba6c71a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/771904f1e6e8ca6092d7d96553791b47eba6c71a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/771904f1e6e8ca6092d7d96553791b47eba6c71a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/771904f1e6e8ca6092d7d96553791b47eba6c71a/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ba502ad6bec253a702ad177c6257aab4a8c1102f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba502ad6bec253a702ad177c6257aab4a8c1102f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba502ad6bec253a702ad177c6257aab4a8c1102f"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "5c2f527c102c0809ec7c70bbc52e7561063e4411", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/771904f1e6e8ca6092d7d96553791b47eba6c71a/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/771904f1e6e8ca6092d7d96553791b47eba6c71a/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=771904f1e6e8ca6092d7d96553791b47eba6c71a", "patch": "@@ -1,3 +1,11 @@\n+2007-03-15  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* cp-demangle.c (d_encoding): Exit early on error.\n+\t(d_pointer_to_member_type): Exit early if cplus_demangle_type\n+\treturns NULL.\n+\t(cplus_demangle_type): Likewise.\n+\t* testsuite/demangle-expected: New testcase.\n+\n 2007-03-01  Brooks Moses  <brooks.moses@codesourcery.com>\n \n \t* Makefile.in: Add install-pdf target as copied from"}, {"sha": "5c930c6ab3f2045dc8c10d4e5b40f43bad0e851c", "filename": "libiberty/cp-demangle.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/771904f1e6e8ca6092d7d96553791b47eba6c71a/libiberty%2Fcp-demangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/771904f1e6e8ca6092d7d96553791b47eba6c71a/libiberty%2Fcp-demangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fcp-demangle.c?ref=771904f1e6e8ca6092d7d96553791b47eba6c71a", "patch": "@@ -1067,7 +1067,7 @@ d_encoding (struct d_info *di, int top_level)\n \t}\n \n       peek = d_peek_char (di);\n-      if (peek == '\\0' || peek == 'E')\n+      if (dc == NULL || peek == '\\0' || peek == 'E')\n \treturn dc;\n       return d_make_comp (di, DEMANGLE_COMPONENT_TYPED_NAME, dc,\n \t\t\t  d_bare_function_type (di, has_return_type (dc)));\n@@ -1780,7 +1780,7 @@ cplus_demangle_type (struct d_info *di)\n       if (pret == NULL)\n \treturn NULL;\n       *pret = cplus_demangle_type (di);\n-      if (! d_add_substitution (di, ret))\n+      if (! *pret || ! d_add_substitution (di, ret))\n \treturn NULL;\n       return ret;\n     }\n@@ -2135,6 +2135,8 @@ d_pointer_to_member_type (struct d_info *di)\n   if (pmem == NULL)\n     return NULL;\n   *pmem = cplus_demangle_type (di);\n+  if (*pmem == NULL)\n+    return NULL;\n \n   if (pmem != &mem && (*pmem)->type != DEMANGLE_COMPONENT_FUNCTION_TYPE)\n     {"}, {"sha": "471819e26c0fae971ac54c96098d8123e456c7b5", "filename": "libiberty/testsuite/demangle-expected", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/771904f1e6e8ca6092d7d96553791b47eba6c71a/libiberty%2Ftestsuite%2Fdemangle-expected", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/771904f1e6e8ca6092d7d96553791b47eba6c71a/libiberty%2Ftestsuite%2Fdemangle-expected", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Ftestsuite%2Fdemangle-expected?ref=771904f1e6e8ca6092d7d96553791b47eba6c71a", "patch": "@@ -3838,3 +3838,7 @@ _ZNSA\n --format=gnu-v3\n _ZNT\n _ZNT\n+# Dereferencing NULL in d_pointer_to_member_type\n+--format=gnu-v3\n+_Z1aMark\n+_Z1aMark"}]}