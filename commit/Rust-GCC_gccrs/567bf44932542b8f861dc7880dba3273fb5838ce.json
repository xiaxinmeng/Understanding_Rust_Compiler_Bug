{"sha": "567bf44932542b8f861dc7880dba3273fb5838ce", "node_id": "C_kwDOANBUbNoAKDU2N2JmNDQ5MzI1NDJiOGY4NjFkYzc4ODBkYmEzMjczZmI1ODM4Y2U", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2022-04-23T10:28:28Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-05-30T08:29:02Z"}, "message": "[Ada] Fix expansion of aggregate for discriminated limited extension\n\nThe presence of the discriminants prevents the values associated with the\ncomponents of the parent type from being put into the sub-aggregate built\nfor the _Parent component.\n\ngcc/ada/\n\n\t* exp_aggr.adb (Expand_Record_Aggregate.Build_Back_End_Aggregate):\n\tSkip the discriminants at the start of the component list before\n\tlooking for the components inherited from the parent in the case\n\tof a tagged extension.", "tree": {"sha": "7589a33afa115dfedb033469f9ca3d869a979dce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7589a33afa115dfedb033469f9ca3d869a979dce"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/567bf44932542b8f861dc7880dba3273fb5838ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/567bf44932542b8f861dc7880dba3273fb5838ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/567bf44932542b8f861dc7880dba3273fb5838ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/567bf44932542b8f861dc7880dba3273fb5838ce/comments", "author": null, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "878ded4f9a974bbcf90346d746daa5eeebdd7bd6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/878ded4f9a974bbcf90346d746daa5eeebdd7bd6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/878ded4f9a974bbcf90346d746daa5eeebdd7bd6"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "4828406647ca666f31b099972d6b86c91132381a", "filename": "gcc/ada/exp_aggr.adb", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/567bf44932542b8f861dc7880dba3273fb5838ce/gcc%2Fada%2Fexp_aggr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/567bf44932542b8f861dc7880dba3273fb5838ce/gcc%2Fada%2Fexp_aggr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_aggr.adb?ref=567bf44932542b8f861dc7880dba3273fb5838ce", "patch": "@@ -8474,11 +8474,21 @@ package body Exp_Aggr is\n                   Parent_Name  : Node_Id;\n \n                begin\n-                  --  Remove the inherited component association from the\n-                  --  aggregate and store them in the parent aggregate\n-\n                   First_Comp   := First (Component_Associations (N));\n                   Parent_Comps := New_List;\n+\n+                  --  First skip the discriminants\n+\n+                  while Present (First_Comp)\n+                    and then Ekind (Entity (First (Choices (First_Comp))))\n+                                                               = E_Discriminant\n+                  loop\n+                     Next (First_Comp);\n+                  end loop;\n+\n+                  --  Then remove the inherited component association from the\n+                  --  aggregate and store them in the parent aggregate\n+\n                   while Present (First_Comp)\n                     and then\n                       Scope (Original_Record_Component"}]}