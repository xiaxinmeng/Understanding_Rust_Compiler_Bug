{"sha": "cce96d4aacd01f9b9172adcaaf172b8858258040", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NlOTZkNGFhY2QwMWY5YjkxNzJhZGNhYWYxNzJiODg1ODI1ODA0MA==", "commit": {"author": {"name": "Janis Johnson", "email": "janis187@us.ibm.com", "date": "2005-05-24T21:27:38Z"}, "committer": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2005-05-24T21:27:38Z"}, "message": "gcc-dg.exp (cleanup-ipa-dump): New.\n\n\t* lib/gcc-dg.exp (cleanup-ipa-dump): New.\n\t(cleanup-coverage-files, cleanup-repo-files, cleanup-rtl-dump,\n\tcleanup-tree-dump, cleanup-saved-temps): Update comments.\n\nFrom-SVN: r100116", "tree": {"sha": "3cff64c4efd6475bf1010dc65eef41e2d3341c2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3cff64c4efd6475bf1010dc65eef41e2d3341c2c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cce96d4aacd01f9b9172adcaaf172b8858258040", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cce96d4aacd01f9b9172adcaaf172b8858258040", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cce96d4aacd01f9b9172adcaaf172b8858258040", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cce96d4aacd01f9b9172adcaaf172b8858258040/comments", "author": null, "committer": null, "parents": [{"sha": "d7cf8390c73e75b15e1d518c5707909f7c659938", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7cf8390c73e75b15e1d518c5707909f7c659938", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7cf8390c73e75b15e1d518c5707909f7c659938"}], "stats": {"total": 46, "additions": 35, "deletions": 11}, "files": [{"sha": "14b79cf5a5e9a16f359f3390ff382af84f3dacb7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cce96d4aacd01f9b9172adcaaf172b8858258040/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cce96d4aacd01f9b9172adcaaf172b8858258040/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cce96d4aacd01f9b9172adcaaf172b8858258040", "patch": "@@ -1,3 +1,9 @@\n+2005-05-24  Janis Johnson  <janis187@us.ibm.com>\n+\n+\t* lib/gcc-dg.exp (cleanup-ipa-dump): New.\n+\t(cleanup-coverage-files, cleanup-repo-files, cleanup-rtl-dump,\n+\tcleanup-tree-dump, cleanup-saved-temps): Update comments.\n+\n 2005-05-24  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \tPR C++/21645"}, {"sha": "ab2f18992afe83f8f92f647992d1f42a3fd0e2cb", "filename": "gcc/testsuite/lib/gcc-dg.exp", "status": "modified", "additions": 29, "deletions": 11, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cce96d4aacd01f9b9172adcaaf172b8858258040/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cce96d4aacd01f9b9172adcaaf172b8858258040/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp?ref=cce96d4aacd01f9b9172adcaaf172b8858258040", "patch": "@@ -307,8 +307,8 @@ proc remove-build-file { pat } {\n \n # Remove compiler-generated coverage files for the current test.\n proc cleanup-coverage-files { } {\n-    # This assumes that we are two frames down from dg-test, and that\n-    # it still stores the filename of the testcase in a local variable \"name\".\n+    # This assumes that we are two frames down from dg-test or some other proc\n+    # that stores the filename of the testcase in a local variable \"name\".\n     # A cleaner solution would require a new DejaGnu release.\n     upvar 2 name testcase\n     remove-build-file \"[file rootname [file tail $testcase]].gc??\"\n@@ -323,8 +323,8 @@ proc cleanup-coverage-files { } {\n \n # Remove compiler-generated files from -repo for the current test.\n proc cleanup-repo-files { } {\n-    # This assumes that we are two frames down from dg-test, and that\n-    # it still stores the filename of the testcase in a local variable \"name\".\n+    # This assumes that we are two frames down from dg-test or some other proc\n+    # that stores the filename of the testcase in a local variable \"name\".\n     # A cleaner solution would require a new DejaGnu release.\n     upvar 2 name testcase\n     remove-build-file \"[file rootname [file tail $testcase]].o\"\n@@ -343,8 +343,8 @@ proc cleanup-repo-files { } {\n #\n # SUFFIX is the filename suffix pattern.\n proc cleanup-rtl-dump { suffix } {\n-    # This assumes that we are two frames down from dg-test, and that\n-    # it still stores the filename of the testcase in a local variable \"name\".\n+    # This assumes that we are two frames down from dg-test or some other proc\n+    # that stores the filename of the testcase in a local variable \"name\".\n     # A cleaner solution would require a new DejaGnu release.\n     upvar 2 name testcase\n     remove-build-file \"[file tail $testcase].??.$suffix\"\n@@ -361,9 +361,9 @@ proc cleanup-rtl-dump { suffix } {\n #\n # SUFFIX is the file suffix pattern.\n proc cleanup-tree-dump { suffix } {\n-    # This assumes that we are two frames down from dg-test, and that\n-    # it still stores the filename of the testcase in a local variable \"name\".\n-    # A cleaner solution would require a new dejagnu release.\n+    # This assumes that we are two frames down from dg-test or some other proc\n+    # that stores the filename of the testcase in a local variable \"name\".\n+    # A cleaner solution would require a new DejaGnu release.\n     upvar 2 name testcase\n     remove-build-file \"[file tail $testcase].t??.$suffix\"\n \n@@ -375,15 +375,33 @@ proc cleanup-tree-dump { suffix } {\n     }\n }\n \n+# Remove a specific ipa dump file for the current test.\n+#\n+# SUFFIX is the file suffix pattern.\n+proc cleanup-ipa-dump { suffix } {\n+    # This assumes that we are two frames down from dg-test or some other proc\n+    # that stores the filename of the testcase in a local variable \"name\".\n+    # A cleaner solution would require a new DejaGnu release.\n+    upvar 2 name testcase\n+    remove-build-file \"[file tail $testcase].i??.$suffix\"\n+\n+    # Clean up dump files for additional source files.\n+    if [info exists additional_sources] {\n+\tforeach srcfile $additional_sources {\n+\t    remove-build-file \"[file tail $srcfile].i??.$suffix\"\n+\t}\n+    }\n+}\n+\n # Remove files kept by --save-temps for the current test.\n #\n # Currently this is only .i files, but more can be added if there are\n # tests generating them.\n proc cleanup-saved-temps { } {\n     global additional_sources\n \n-    # This assumes that we are two frames down from dg-test, and that\n-    # it still stores the filename of the testcase in a local variable \"name\".\n+    # This assumes that we are two frames down from dg-test or some other proc\n+    # that stores the filename of the testcase in a local variable \"name\".\n     # A cleaner solution would require a new DejaGnu release.\n     upvar 2 name testcase\n     remove-build-file \"[file rootname [file tail $testcase]].ii\""}]}