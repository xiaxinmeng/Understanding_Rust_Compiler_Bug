{"sha": "0a826db38e1d2e64803226194b3648ce79badf88", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGE4MjZkYjM4ZTFkMmU2NDgwMzIyNjE5NGIzNjQ4Y2U3OWJhZGY4OA==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2011-04-17T07:34:35Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2011-04-17T07:34:35Z"}, "message": "re PR fortran/48624 (gfortran DECL issues in function declaration)\n\n2011-05-17  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/48624\n        * trans-decl.c (gfc_get_extern_function_decl): Fix decl\n        for external procedures with proc arguments.\n\nFrom-SVN: r172604", "tree": {"sha": "e241bc83a7dce6b2cb047364129288463120e6ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e241bc83a7dce6b2cb047364129288463120e6ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0a826db38e1d2e64803226194b3648ce79badf88", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a826db38e1d2e64803226194b3648ce79badf88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0a826db38e1d2e64803226194b3648ce79badf88", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a826db38e1d2e64803226194b3648ce79badf88/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b183e9e0797c43ac6f8a87f044d385f4cd6dbed9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b183e9e0797c43ac6f8a87f044d385f4cd6dbed9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b183e9e0797c43ac6f8a87f044d385f4cd6dbed9"}], "stats": {"total": 24, "additions": 6, "deletions": 18}, "files": [{"sha": "cdb53e7952d6cc0e523354d9e25cd988884c00f5", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a826db38e1d2e64803226194b3648ce79badf88/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a826db38e1d2e64803226194b3648ce79badf88/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=0a826db38e1d2e64803226194b3648ce79badf88", "patch": "@@ -1,3 +1,9 @@\n+2011-05-17  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/48624\n+\t* trans-decl.c (gfc_get_extern_function_decl): Fix decl\n+\tfor external procedures with proc arguments.\n+\n 2011-04-15  Michael Matz  <matz@suse.de>\n \n \t* trans-array.c (toplevel): Include gimple.h."}, {"sha": "866720f96a497ac0c8391aef00f2e5ec1c6777d0", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a826db38e1d2e64803226194b3648ce79badf88/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a826db38e1d2e64803226194b3648ce79badf88/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=0a826db38e1d2e64803226194b3648ce79badf88", "patch": "@@ -1527,7 +1527,6 @@ gfc_get_extern_function_decl (gfc_symbol * sym)\n   tree name;\n   tree mangled_name;\n   gfc_gsymbol *gsym;\n-  bool proc_formal_arg;\n \n   if (sym->backend_decl)\n     return sym->backend_decl;\n@@ -1544,27 +1543,10 @@ gfc_get_extern_function_decl (gfc_symbol * sym)\n      return the backend_decl.  */\n   gsym =  gfc_find_gsymbol (gfc_gsym_root, sym->name);\n \n-  /* Do not use procedures that have a procedure argument because this\n-     can result in problems of multiple decls during inlining.  */\n-  proc_formal_arg = false;\n-  if (gsym && gsym->ns && gsym->ns->proc_name)\n-    {\n-      gfc_formal_arglist *formal = gsym->ns->proc_name->formal;\n-      for (; formal; formal = formal->next)\n-\t{\n-\t  if (formal->sym && formal->sym->attr.flavor == FL_PROCEDURE)\n-\t    {\n-\t      proc_formal_arg = true;\n-\t      break;\n-\t    }\n-\t}\n-    }\n-\n   if (gfc_option.flag_whole_file\n \t&& (!sym->attr.use_assoc || sym->attr.if_source != IFSRC_DECL)\n \t&& !sym->backend_decl\n \t&& gsym && gsym->ns\n-\t&& !proc_formal_arg\n \t&& ((gsym->type == GSYM_SUBROUTINE) || (gsym->type == GSYM_FUNCTION))\n \t&& (gsym->ns->proc_name->backend_decl || !sym->attr.intrinsic))\n     {"}]}