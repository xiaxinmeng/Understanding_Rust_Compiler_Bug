{"sha": "a5cf630e39611a1e7461aa0d17bed196f60bd710", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVjZjYzMGUzOTYxMWExZTc0NjFhYTBkMTdiZWQxOTZmNjBiZDcxMA==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2010-01-18T19:11:24Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2010-01-18T19:11:24Z"}, "message": "re PR c++/42766 (tree check fail in build_expr_type_conversion)\n\nFix PR c++/42766\n\ngcc/cp/ChangeLog:\n\tPR c++/42766\n\t* cvt.c (build_expr_type_conversion): Look through OVERLOAD.\n\ngcc/testsuite/ChangeLog:\n\tPR c++/42766\n\t* g++.dg/conversion/op6.C: New test.\n\nFrom-SVN: r156020", "tree": {"sha": "5679c87e4eb28cec5f1c93cb970dddeb574c4df9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5679c87e4eb28cec5f1c93cb970dddeb574c4df9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5cf630e39611a1e7461aa0d17bed196f60bd710", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5cf630e39611a1e7461aa0d17bed196f60bd710", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5cf630e39611a1e7461aa0d17bed196f60bd710", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5cf630e39611a1e7461aa0d17bed196f60bd710/comments", "author": null, "committer": null, "parents": [{"sha": "3b9e834309be0cec32c5ec39c552a9bd39f533ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b9e834309be0cec32c5ec39c552a9bd39f533ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b9e834309be0cec32c5ec39c552a9bd39f533ee"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "ccb2afec9e4573aae5e65522fd99183ce7e800bc", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cf630e39611a1e7461aa0d17bed196f60bd710/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cf630e39611a1e7461aa0d17bed196f60bd710/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a5cf630e39611a1e7461aa0d17bed196f60bd710", "patch": "@@ -1,3 +1,8 @@\n+2010-01-18  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/42766\n+\t* cvt.c (build_expr_type_conversion): Look through OVERLOAD.\n+\n 2010-01-17  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR c++/42697"}, {"sha": "cbe85965a59df1cf096f02a430d61608cf233dac", "filename": "gcc/cp/cvt.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cf630e39611a1e7461aa0d17bed196f60bd710/gcc%2Fcp%2Fcvt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cf630e39611a1e7461aa0d17bed196f60bd710/gcc%2Fcp%2Fcvt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcvt.c?ref=a5cf630e39611a1e7461aa0d17bed196f60bd710", "patch": "@@ -1203,6 +1203,7 @@ build_expr_type_conversion (int desires, tree expr, bool complain)\n       int win = 0;\n       tree candidate;\n       tree cand = TREE_VALUE (conv);\n+      cand = OVL_CURRENT (cand);\n \n       if (winner && winner == cand)\n \tcontinue;"}, {"sha": "11a7540f5719c98187b917fa0850063cb334ad1c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cf630e39611a1e7461aa0d17bed196f60bd710/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cf630e39611a1e7461aa0d17bed196f60bd710/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a5cf630e39611a1e7461aa0d17bed196f60bd710", "patch": "@@ -1,3 +1,8 @@\n+2010-01-18  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/42766\n+\t* g++.dg/conversion/op6.C: New test.\n+\n 2010-01-18  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/42774"}, {"sha": "9aec9f0a8086bb49faf507c97d5956ff88ff2d88", "filename": "gcc/testsuite/g++.dg/conversion/op6.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cf630e39611a1e7461aa0d17bed196f60bd710/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconversion%2Fop6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cf630e39611a1e7461aa0d17bed196f60bd710/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconversion%2Fop6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconversion%2Fop6.C?ref=a5cf630e39611a1e7461aa0d17bed196f60bd710", "patch": "@@ -0,0 +1,18 @@\n+// Origin: PR c++/42766\n+// { dg-do compile }\n+\n+template<class T> class smart_pointer {\n+public:\n+    operator T* () const { }\n+    operator bool () const { }\n+    operator bool () { }\n+};\n+class Context { };\n+typedef smart_pointer<Context> ContextP;\n+class SvnClient  {\n+    ~SvnClient();\n+    ContextP svnContext;\n+};\n+SvnClient::~SvnClient() {\n+    delete svnContext;\n+}"}]}