{"sha": "310bbbf468139f038709bf212b8c9f64a4be61a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzEwYmJiZjQ2ODEzOWYwMzg3MDliZjIxMmI4YzlmNjRhNGJlNjFhOA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-03-10T19:28:07Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-03-10T19:28:07Z"}, "message": "(copy_constant): Copy operand of ADDR_EXPR if it is a constant.\n\nFrom-SVN: r9164", "tree": {"sha": "7cdd03b9623f929e436752e61a688f9b326fb4f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7cdd03b9623f929e436752e61a688f9b326fb4f6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/310bbbf468139f038709bf212b8c9f64a4be61a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/310bbbf468139f038709bf212b8c9f64a4be61a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/310bbbf468139f038709bf212b8c9f64a4be61a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/310bbbf468139f038709bf212b8c9f64a4be61a8/comments", "author": null, "committer": null, "parents": [{"sha": "31c97f6a227591c55d4f1b15e9ea8afea7e3fff4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31c97f6a227591c55d4f1b15e9ea8afea7e3fff4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31c97f6a227591c55d4f1b15e9ea8afea7e3fff4"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "818628ba27385415f3db46c42ad96c565987449f", "filename": "gcc/varasm.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/310bbbf468139f038709bf212b8c9f64a4be61a8/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/310bbbf468139f038709bf212b8c9f64a4be61a8/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=310bbbf468139f038709bf212b8c9f64a4be61a8", "patch": "@@ -2568,12 +2568,18 @@ copy_constant (exp)\n {\n   switch (TREE_CODE (exp))\n     {\n+    case ADDR_EXPR:\n+      /* For ADDR_EXPR, we do not want to copy the decl whose address\n+\t is requested.  We do want to copy constants though.  */\n+      if (TREE_CODE_CLASS (TREE_CODE (TREE_OPERAND (exp, 0))) == 'c')\n+\treturn build1 (TREE_CODE (exp), TREE_TYPE (exp),\n+\t\t       copy_constant (TREE_OPERAND (exp, 0)));\n+      else\n+\treturn copy_node (exp);\n+\n     case INTEGER_CST:\n     case REAL_CST:\n     case STRING_CST:\n-    case ADDR_EXPR:\n-      /* For ADDR_EXPR, we do not want to copy the decl\n-\t whose address is requested.  */\n       return copy_node (exp);\n \n     case COMPLEX_CST:"}]}