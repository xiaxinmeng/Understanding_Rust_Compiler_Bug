{"sha": "895fdc1f4c9ff1dfb18b80af838aa353363edb40", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODk1ZmRjMWY0YzlmZjFkZmIxOGI4MGFmODM4YWEzNTMzNjNlZGI0MA==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2020-11-01T15:39:10Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2020-11-01T17:21:35Z"}, "message": "ipa: Fix segmentation fault in function_summary<clone_info*>::get(cgraph_node*)\n\nPR 97660 occurs when cgraph_node::get returns NULL, and this NULL\ncgraph_node is then passed to clone_info::get.  As the original assert\nprior to the regressing change in r11-4587 allowed for the cgraph_node\nto be NULL, clone_info::get is now only called when cgraph_node::get\nreturns a nonnull value.\n\ngcc/ChangeLog:\n\n\tPR ipa/97660\n\t* cgraph.c (cgraph_edge::redirect_call_stmt_to_callee): Don't call\n\tclone_info::get when cgraph_node::get returns NULL.", "tree": {"sha": "379a6d0ef89c6bdab9174b083c6d9d6349f3c1be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/379a6d0ef89c6bdab9174b083c6d9d6349f3c1be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/895fdc1f4c9ff1dfb18b80af838aa353363edb40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/895fdc1f4c9ff1dfb18b80af838aa353363edb40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/895fdc1f4c9ff1dfb18b80af838aa353363edb40", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/895fdc1f4c9ff1dfb18b80af838aa353363edb40/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "318be202bb7a8b4b1068f7467ad899a9e1f61618", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/318be202bb7a8b4b1068f7467ad899a9e1f61618", "html_url": "https://github.com/Rust-GCC/gccrs/commit/318be202bb7a8b4b1068f7467ad899a9e1f61618"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "36bdb009bf85c20fe6173de76703d070cb7d8d5e", "filename": "gcc/cgraph.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/895fdc1f4c9ff1dfb18b80af838aa353363edb40/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/895fdc1f4c9ff1dfb18b80af838aa353363edb40/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=895fdc1f4c9ff1dfb18b80af838aa353363edb40", "patch": "@@ -1491,9 +1491,11 @@ cgraph_edge::redirect_call_stmt_to_callee (cgraph_edge *e)\n     }\n   if (flag_checking && decl)\n     {\n-      cgraph_node *node = cgraph_node::get (decl);\n-      clone_info *info = clone_info::get (node);\n-      gcc_assert (!node || !info || !info->param_adjustments);\n+      if (cgraph_node *node = cgraph_node::get (decl))\n+\t{\n+\t  clone_info *info = clone_info::get (node);\n+\t  gcc_assert (!info || !info->param_adjustments);\n+\t}\n     }\n \n   clone_info *callee_info = clone_info::get (e->callee);"}]}