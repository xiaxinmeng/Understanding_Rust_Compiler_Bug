{"sha": "0075cea0fdccc2efb781f4f3c924007de37a3417", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDA3NWNlYTBmZGNjYzJlZmI3ODFmNGYzYzkyNDAwN2RlMzdhMzQxNw==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@gmail.com", "date": "2020-04-01T03:04:47Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gmail.com", "date": "2020-09-24T03:22:02Z"}, "message": "[RS6000] Count rldimi constant insns\n\nrldimi is generated by rs6000_emit_set_long_const when the high and\nlow 32 bits of a 64-bit constant are equal.\n\n\tPR target/93012\n\t* config/rs6000/rs6000.c (num_insns_constant_gpr): Count rldimi\n\tconstants correctly.", "tree": {"sha": "36b8de216b167b7d303f42b07512a5be98a1ba31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/36b8de216b167b7d303f42b07512a5be98a1ba31"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0075cea0fdccc2efb781f4f3c924007de37a3417", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0075cea0fdccc2efb781f4f3c924007de37a3417", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0075cea0fdccc2efb781f4f3c924007de37a3417", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0075cea0fdccc2efb781f4f3c924007de37a3417/comments", "author": {"login": "amodra", "id": 6006325, "node_id": "MDQ6VXNlcjYwMDYzMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amodra", "html_url": "https://github.com/amodra", "followers_url": "https://api.github.com/users/amodra/followers", "following_url": "https://api.github.com/users/amodra/following{/other_user}", "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}", "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amodra/subscriptions", "organizations_url": "https://api.github.com/users/amodra/orgs", "repos_url": "https://api.github.com/users/amodra/repos", "events_url": "https://api.github.com/users/amodra/events{/privacy}", "received_events_url": "https://api.github.com/users/amodra/received_events", "type": "User", "site_admin": false}, "committer": {"login": "amodra", "id": 6006325, "node_id": "MDQ6VXNlcjYwMDYzMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amodra", "html_url": "https://github.com/amodra", "followers_url": "https://api.github.com/users/amodra/followers", "following_url": "https://api.github.com/users/amodra/following{/other_user}", "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}", "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amodra/subscriptions", "organizations_url": "https://api.github.com/users/amodra/orgs", "repos_url": "https://api.github.com/users/amodra/repos", "events_url": "https://api.github.com/users/amodra/events{/privacy}", "received_events_url": "https://api.github.com/users/amodra/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "08cd8d5929eac84b27788d8483fd75ab7ad13129", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08cd8d5929eac84b27788d8483fd75ab7ad13129", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08cd8d5929eac84b27788d8483fd75ab7ad13129"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "5f4e2927a212656a8aa697fd4ba72ddcef3c30f0", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0075cea0fdccc2efb781f4f3c924007de37a3417/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0075cea0fdccc2efb781f4f3c924007de37a3417/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=0075cea0fdccc2efb781f4f3c924007de37a3417", "patch": "@@ -5731,7 +5731,7 @@ direct_return (void)\n \n /* Helper for num_insns_constant.  Calculate number of instructions to\n    load VALUE to a single gpr using combinations of addi, addis, ori,\n-   oris and sldi instructions.  */\n+   oris, sldi and rldimi instructions.  */\n \n static int\n num_insns_constant_gpr (HOST_WIDE_INT value)\n@@ -5759,7 +5759,7 @@ num_insns_constant_gpr (HOST_WIDE_INT value)\n \n       high >>= 1;\n \n-      if (low == 0)\n+      if (low == 0 || low == high)\n \treturn num_insns_constant_gpr (high) + 1;\n       else if (high == 0)\n \treturn num_insns_constant_gpr (low) + 1;"}]}