{"sha": "e44615776acf0044b29215200e3d7e180c5fc4ff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTQ0NjE1Nzc2YWNmMDA0NGIyOTIxNTIwMGUzZDdlMTgwYzVmYzRmZg==", "commit": {"author": {"name": "Ben Elliston", "email": "bje@au.ibm.com", "date": "2005-03-22T00:15:32Z"}, "committer": {"name": "Ben Elliston", "email": "bje@gcc.gnu.org", "date": "2005-03-22T00:15:32Z"}, "message": "options.exp (check_for_options): Create a real C program...\n\n\t* gcc.misc-tests/options.exp (check_for_options): Create a real C\n\tprogram, compile it into a real executable and then delete the .c\n\tand .x files afterwards, to avoid problems on testglue targets.\n\nFrom-SVN: r96844", "tree": {"sha": "8ed3370cc2c5fc64fe2156e7951c454a0d4da529", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ed3370cc2c5fc64fe2156e7951c454a0d4da529"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e44615776acf0044b29215200e3d7e180c5fc4ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e44615776acf0044b29215200e3d7e180c5fc4ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e44615776acf0044b29215200e3d7e180c5fc4ff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e44615776acf0044b29215200e3d7e180c5fc4ff/comments", "author": null, "committer": null, "parents": [{"sha": "aed63147cb5c4099a4fc3586784be919a84cda04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aed63147cb5c4099a4fc3586784be919a84cda04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aed63147cb5c4099a4fc3586784be919a84cda04"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "4c5939e82eae3995fc6d5f732a992ad9fd2032f3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e44615776acf0044b29215200e3d7e180c5fc4ff/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e44615776acf0044b29215200e3d7e180c5fc4ff/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e44615776acf0044b29215200e3d7e180c5fc4ff", "patch": "@@ -1,3 +1,9 @@\n+2005-03-22  Ben Elliston  <bje@au.ibm.com>\n+\n+\t* gcc.misc-tests/options.exp (check_for_options): Create a real C\n+\tprogram, compile it into a real executable and then delete the .c\n+\tand .x files afterwards, to avoid problems on testglue targets.\n+\n 2005-03-21  Stuart Hastings  <stuart@apple.com>\n \n \t* gcc.target/i386/sse-2.c: New."}, {"sha": "1405513c460f540fdfd080d9409fcd5238e8593e", "filename": "gcc/testsuite/gcc.misc-tests/options.exp", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e44615776acf0044b29215200e3d7e180c5fc4ff/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e44615776acf0044b29215200e3d7e180c5fc4ff/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp?ref=e44615776acf0044b29215200e3d7e180c5fc4ff", "patch": "@@ -20,15 +20,21 @@\n # respectively.\n \n proc check_for_options {language gcc_options compiler_pattern as_pattern ld_pattern} {\n+    set filename test-[pid]\n+    set fd [open $filename.c w]\n+    puts $fd \"int main (void) \\{ return 0; \\}\"\n+    close $fd\n+    remote_download host $filename.c\n+\n     set test \"compiler driver $gcc_options option(s)\"\n     set gcc_options \"\\{additional_flags=$gcc_options -v\\}\"\n-    set src \"-x$language /dev/null\"\n \n     switch \"$language\" {\n \t\"c\" { set compiler cc1 }\n \tdefault { error \"unknown language\" }\n     }\n-    set gcc_output [gcc_target_compile $src /dev/null executable $gcc_options]\n+    set gcc_output [gcc_target_compile $filename.c $filename.x executable $gcc_options]\n+    remote_file build delete $filename.c $filename.x $filename.gcno\n \n     if {![regexp -- \"/$compiler -quiet.*$compiler_pattern\" $gcc_output]} {\n \tfail \"$test (compiler options)\""}]}