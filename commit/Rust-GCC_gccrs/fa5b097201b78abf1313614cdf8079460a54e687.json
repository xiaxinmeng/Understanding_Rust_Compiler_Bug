{"sha": "fa5b097201b78abf1313614cdf8079460a54e687", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmE1YjA5NzIwMWI3OGFiZjEzMTM2MTRjZGY4MDc5NDYwYTU0ZTY4Nw==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2005-12-15T07:22:10Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2005-12-15T07:22:10Z"}, "message": "re PR target/25406 (gcc.dg/20030625-1.c, gcc.dg/20050620-1.c, gcc.dg/940510-1.c, gcc.dg/c99-flex-array-1.c, gcc.dg/pr14475.c, and gcc.dg/noncompile/incomplete-1.c fail on powerpc-darwin)\n\n\tPR target/25406\n\t* config/rs6000/rs6000.c (rs6000_special_round_type_align): Handle\n\terror_mark_node.  Make alignment params unsigned.\n\t* config/rs6000/rs6000-protos.h\n\t(rs6000_special_round_type_align): Update prototype.\n\t(rs6000_machopic_legitimize_pic_address): Remove arg names.\n\nFrom-SVN: r108562", "tree": {"sha": "68441a56b11856966154a0bb679e8533b594c0fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68441a56b11856966154a0bb679e8533b594c0fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa5b097201b78abf1313614cdf8079460a54e687", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa5b097201b78abf1313614cdf8079460a54e687", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa5b097201b78abf1313614cdf8079460a54e687", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa5b097201b78abf1313614cdf8079460a54e687/comments", "author": null, "committer": null, "parents": [{"sha": "018c145d971406e5d9fa81b9ba1122b57446a24b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/018c145d971406e5d9fa81b9ba1122b57446a24b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/018c145d971406e5d9fa81b9ba1122b57446a24b"}], "stats": {"total": 38, "additions": 26, "deletions": 12}, "files": [{"sha": "0546407d0c78f71f3098078edb59b819fd535d60", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5b097201b78abf1313614cdf8079460a54e687/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5b097201b78abf1313614cdf8079460a54e687/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fa5b097201b78abf1313614cdf8079460a54e687", "patch": "@@ -1,3 +1,12 @@\n+2005-12-15  Alan Modra  <amodra@bigpond.net.au>\n+\n+\tPR target/25406\n+\t* config/rs6000/rs6000.c (rs6000_special_round_type_align): Handle\n+\terror_mark_node.  Make alignment params unsigned.\n+\t* config/rs6000/rs6000-protos.h\n+\t(rs6000_special_round_type_align): Update prototype.\n+\t(rs6000_machopic_legitimize_pic_address): Remove arg names.\n+\n 2005-12-14  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \tPR rtl-optimization/25310"}, {"sha": "a7cc3a6ddc1f26eb47f451ec2705fe81e30f3671", "filename": "gcc/config/rs6000/rs6000-protos.h", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5b097201b78abf1313614cdf8079460a54e687/gcc%2Fconfig%2Frs6000%2Frs6000-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5b097201b78abf1313614cdf8079460a54e687/gcc%2Fconfig%2Frs6000%2Frs6000-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-protos.h?ref=fa5b097201b78abf1313614cdf8079460a54e687", "patch": "@@ -105,14 +105,13 @@ extern rtx rs6000_return_addr (int, rtx);\n extern void rs6000_output_symbol_ref (FILE*, rtx);\n extern HOST_WIDE_INT rs6000_initial_elimination_offset (int, int);\n \n-extern rtx rs6000_machopic_legitimize_pic_address (rtx orig,\n-\t\t\t\t\t\t   enum machine_mode mode,\n-\t\t\t\t\t\t   rtx reg);\n-\n+extern rtx rs6000_machopic_legitimize_pic_address (rtx, enum machine_mode,\n+\t\t\t\t\t\t   rtx);\n #endif /* RTX_CODE */\n \n #ifdef TREE_CODE\n-extern unsigned int rs6000_special_round_type_align (tree, int, int);\n+extern unsigned int rs6000_special_round_type_align (tree, unsigned int,\n+\t\t\t\t\t\t     unsigned int);\n extern void function_arg_advance (CUMULATIVE_ARGS *, enum machine_mode,\n \t\t\t\t  tree, int, int);\n extern int function_arg_boundary (enum machine_mode, tree);"}, {"sha": "e196279cac55945b80873c5fb51aae09dd754e97", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 13, "deletions": 7, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5b097201b78abf1313614cdf8079460a54e687/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5b097201b78abf1313614cdf8079460a54e687/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=fa5b097201b78abf1313614cdf8079460a54e687", "patch": "@@ -2505,21 +2505,27 @@ invalid_e500_subreg (rtx op, enum machine_mode mode)\n    field is an FP double while the FP fields remain word aligned.  */\n \n unsigned int\n-rs6000_special_round_type_align (tree type, int computed, int specified)\n+rs6000_special_round_type_align (tree type, unsigned int computed,\n+\t\t\t\t unsigned int specified)\n {\n+  unsigned int align = MAX (computed, specified);\n   tree field = TYPE_FIELDS (type);\n \n   /* Skip all non field decls */\n   while (field != NULL && TREE_CODE (field) != FIELD_DECL)\n     field = TREE_CHAIN (field);\n \n-  if (field == NULL || field == type\n-      || TYPE_MODE (TREE_CODE (TREE_TYPE (field)) == ARRAY_TYPE\n-\t\t    ? get_inner_array_type (field)\n-\t\t    : TREE_TYPE (field)) != DFmode)\n-    return MAX (computed, specified);\n+  if (field != NULL && field != type)\n+    {\n+      type = TREE_TYPE (field);\n+      while (TREE_CODE (type) == ARRAY_TYPE)\n+\ttype = TREE_TYPE (type);\n+\n+      if (type != error_mark_node && TYPE_MODE (type) == DFmode)\n+\talign = MAX (align, 64);\n+    }\n \n-  return MAX (MAX (computed, specified), 64);\n+  return align;\n }\n \n /* Return 1 for an operand in small memory on V.4/eabi.  */"}]}