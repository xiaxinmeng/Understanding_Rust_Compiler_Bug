{"sha": "61407e018940633a9ca997bf3773f794faa25e23", "node_id": "C_kwDOANBUbNoAKDYxNDA3ZTAxODk0MDYzM2E5Y2E5OTdiZjM3NzNmNzk0ZmFhMjVlMjM", "commit": {"author": {"name": "Andre Vieira", "email": "andre.simoesdiasvieira@arm.com", "date": "2023-03-02T14:11:59Z"}, "committer": {"name": "Andre Vieira", "email": "andre.simoesdiasvieira@arm.com", "date": "2023-03-02T14:11:59Z"}, "message": "simplify-rtx: Use byte in simplify_subreg rather than assume 0 offset\n\nThis patch fixes a missed review comment in an earlier patch using byte instead\nof a 0 offset.  Also improves the comment as suggested.\n\ngcc/ChangeLog:\n\n\t* simplify-rtx.cc (simplify_context::simplify_subreg): Use byte instead\n\tof constant 0 offset.", "tree": {"sha": "f3cfddd13896a74f36e274e9399c8566f2c62060", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f3cfddd13896a74f36e274e9399c8566f2c62060"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/61407e018940633a9ca997bf3773f794faa25e23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61407e018940633a9ca997bf3773f794faa25e23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61407e018940633a9ca997bf3773f794faa25e23", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61407e018940633a9ca997bf3773f794faa25e23/comments", "author": {"login": "avieira-arm", "id": 68072104, "node_id": "MDQ6VXNlcjY4MDcyMTA0", "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avieira-arm", "html_url": "https://github.com/avieira-arm", "followers_url": "https://api.github.com/users/avieira-arm/followers", "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}", "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions", "organizations_url": "https://api.github.com/users/avieira-arm/orgs", "repos_url": "https://api.github.com/users/avieira-arm/repos", "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/avieira-arm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "avieira-arm", "id": 68072104, "node_id": "MDQ6VXNlcjY4MDcyMTA0", "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avieira-arm", "html_url": "https://github.com/avieira-arm", "followers_url": "https://api.github.com/users/avieira-arm/followers", "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}", "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions", "organizations_url": "https://api.github.com/users/avieira-arm/orgs", "repos_url": "https://api.github.com/users/avieira-arm/repos", "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/avieira-arm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "62a8d31ecc07041af4a81353c2d57d9845c4b771", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62a8d31ecc07041af4a81353c2d57d9845c4b771", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62a8d31ecc07041af4a81353c2d57d9845c4b771"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "3b33afa24617f3185872ddc43284e4c9cd073510", "filename": "gcc/simplify-rtx.cc", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61407e018940633a9ca997bf3773f794faa25e23/gcc%2Fsimplify-rtx.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61407e018940633a9ca997bf3773f794faa25e23/gcc%2Fsimplify-rtx.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.cc?ref=61407e018940633a9ca997bf3773f794faa25e23", "patch": "@@ -7667,10 +7667,10 @@ simplify_context::simplify_subreg (machine_mode outermode, rtx op,\n \t}\n     }\n \n-  /* Try simplifying a SUBREG expression of a non-integer OUTERMODE by using a\n-     NEW_OUTERMODE of the same size instead, other simplifications rely on\n-     integer to integer subregs and we'd potentially miss out on optimizations\n-     otherwise.  */\n+  /* If the outer mode is not integral, try taking a subreg with the equivalent\n+     integer outer mode and then bitcasting the result.\n+     Other simplifications rely on integer to integer subregs and we'd\n+     potentially miss out on optimizations otherwise.  */\n   if (known_gt (GET_MODE_SIZE (innermode),\n \t\tGET_MODE_SIZE (outermode))\n       && SCALAR_INT_MODE_P (innermode)\n@@ -7680,7 +7680,7 @@ simplify_context::simplify_subreg (machine_mode outermode, rtx op,\n     {\n       rtx tem = simplify_subreg (int_outermode, op, innermode, byte);\n       if (tem)\n-\treturn simplify_gen_subreg (outermode, tem, int_outermode, 0);\n+\treturn simplify_gen_subreg (outermode, tem, int_outermode, byte);\n     }\n \n   /* If OP is a vector comparison and the subreg is not changing the"}]}