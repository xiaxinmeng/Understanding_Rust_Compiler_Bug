{"sha": "8d8e8f3ad567c7bd1de708fcc841f691d9686c4d", "node_id": "C_kwDOANBUbNoAKDhkOGU4ZjNhZDU2N2M3YmQxZGU3MDhmY2M4NDFmNjkxZDk2ODZjNGQ", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2016-07-21T19:38:51Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-11-16T14:09:00Z"}, "message": "libstdc++: Fix out-of-bound array accesses in testsuite\n\nI fixed some undefined behaviour in string tests in r238609, but I only\nfixed the narrow char versions. This applies the same fixes to the\nwchar_t ones. These problems were found when testing a patch to make\nstd::basic_string usable in constexpr.\n\nlibstdc++-v3/ChangeLog:\n\n\t* testsuite/21_strings/basic_string/modifiers/append/wchar_t/1.cc:\n\tFix reads past the end of strings.\n\t* testsuite/21_strings/basic_string/operations/compare/wchar_t/1.cc:\n\tLikewise.\n\t* testsuite/experimental/string_view/operations/compare/wchar_t/1.cc:\n\tLikewise.", "tree": {"sha": "c04fb30c21bbc8dabf46a40070225b57f4e70b61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c04fb30c21bbc8dabf46a40070225b57f4e70b61"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d8e8f3ad567c7bd1de708fcc841f691d9686c4d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d8e8f3ad567c7bd1de708fcc841f691d9686c4d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d8e8f3ad567c7bd1de708fcc841f691d9686c4d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d8e8f3ad567c7bd1de708fcc841f691d9686c4d/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "971976947154c7442a2f8262a9bbd1bc540e6544", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/971976947154c7442a2f8262a9bbd1bc540e6544", "html_url": "https://github.com/Rust-GCC/gccrs/commit/971976947154c7442a2f8262a9bbd1bc540e6544"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "684209f143ee91508b874393893a2fe6c9027c6a", "filename": "libstdc++-v3/testsuite/21_strings/basic_string/modifiers/append/wchar_t/1.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d8e8f3ad567c7bd1de708fcc841f691d9686c4d/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fmodifiers%2Fappend%2Fwchar_t%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d8e8f3ad567c7bd1de708fcc841f691d9686c4d/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fmodifiers%2Fappend%2Fwchar_t%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fmodifiers%2Fappend%2Fwchar_t%2F1.cc?ref=8d8e8f3ad567c7bd1de708fcc841f691d9686c4d", "patch": "@@ -117,7 +117,7 @@ void test01(void)\n   VERIFY( str06 == L\"corpus, corpus\" );\n \n   str06 = str02;\n-  str06.append(L\"corpus, \", 12);\n+  str06.append(L\"corpus, \", 9); // n=9 includes null terminator\n   VERIFY( str06 != L\"corpus, corpus, \" );\n \n "}, {"sha": "6f2113fb16ac73e7a59b21adaf0f9bc14721735b", "filename": "libstdc++-v3/testsuite/21_strings/basic_string/operations/compare/wchar_t/1.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d8e8f3ad567c7bd1de708fcc841f691d9686c4d/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Foperations%2Fcompare%2Fwchar_t%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d8e8f3ad567c7bd1de708fcc841f691d9686c4d/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Foperations%2Fcompare%2Fwchar_t%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Foperations%2Fcompare%2Fwchar_t%2F1.cc?ref=8d8e8f3ad567c7bd1de708fcc841f691d9686c4d", "patch": "@@ -81,8 +81,8 @@ test01()\n   test_value(wcsncmp(str_1.data(), str_0.data(), 6), z);\n   test_value(wcsncmp(str_1.data(), str_0.data(), 14), lt);\n   test_value(wmemcmp(str_1.data(), str_0.data(), 6), z);\n-  test_value(wmemcmp(str_1.data(), str_0.data(), 14), lt);\n-  test_value(wmemcmp(L\"costa marbella\", L\"costa rica\", 14), lt);\n+  test_value(wmemcmp(str_1.data(), str_0.data(), 10), lt);\n+  test_value(wmemcmp(L\"costa marbella\", L\"costa rica\", 10), lt);\n \n   // int compare(const basic_string& str) const;\n   test_value(str_0.compare(str_1), gt); //because r>m"}, {"sha": "20bb030970b447d297f22fa55a7e689fefeadcb6", "filename": "libstdc++-v3/testsuite/experimental/string_view/operations/compare/wchar_t/1.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d8e8f3ad567c7bd1de708fcc841f691d9686c4d/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fstring_view%2Foperations%2Fcompare%2Fwchar_t%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d8e8f3ad567c7bd1de708fcc841f691d9686c4d/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fstring_view%2Foperations%2Fcompare%2Fwchar_t%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fstring_view%2Foperations%2Fcompare%2Fwchar_t%2F1.cc?ref=8d8e8f3ad567c7bd1de708fcc841f691d9686c4d", "patch": "@@ -81,8 +81,8 @@ test01()\n   test_value(wcsncmp(str_1.data(), str_0.data(), 6), z);\n   test_value(wcsncmp(str_1.data(), str_0.data(), 14), lt);\n   test_value(wmemcmp(str_1.data(), str_0.data(), 6), z);\n-  test_value(wmemcmp(str_1.data(), str_0.data(), 14), lt);\n-  test_value(wmemcmp(L\"costa marbella\", L\"costa rica\", 14), lt);\n+  test_value(wmemcmp(str_1.data(), str_0.data(), 10), lt);\n+  test_value(wmemcmp(L\"costa marbella\", L\"costa rica\", 10), lt);\n \n   // int compare(const basic_string_view& str) const;\n   test_value(str_0.compare(str_1), gt); //because r>m"}]}