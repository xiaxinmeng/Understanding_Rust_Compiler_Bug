{"sha": "8ad8135aa470596753f2c8ea82468418dc349cad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGFkODEzNWFhNDcwNTk2NzUzZjJjOGVhODI0Njg0MThkYzM0OWNhZA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2002-07-24T22:05:19Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-07-24T22:05:19Z"}, "message": "expr.c (expand_expr): Use GOTO_SUBROUTINE_EXPR form when not optimizing.\n\n        * expr.c (expand_expr) [TRY_FINALLY_EXPR]: Use GOTO_SUBROUTINE_EXPR\n        form when not optimizing.\n\nFrom-SVN: r55723", "tree": {"sha": "c4bc272bd6a465210b3a6e6557304dc51ce673c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4bc272bd6a465210b3a6e6557304dc51ce673c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8ad8135aa470596753f2c8ea82468418dc349cad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ad8135aa470596753f2c8ea82468418dc349cad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ad8135aa470596753f2c8ea82468418dc349cad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ad8135aa470596753f2c8ea82468418dc349cad/comments", "author": null, "committer": null, "parents": [{"sha": "dc44a4d856ada5c6796fa65dedb29e61b839c6b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc44a4d856ada5c6796fa65dedb29e61b839c6b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc44a4d856ada5c6796fa65dedb29e61b839c6b3"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "d80a5f7173a02075195d49ed2c8c3e6a5c01b694", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ad8135aa470596753f2c8ea82468418dc349cad/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ad8135aa470596753f2c8ea82468418dc349cad/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8ad8135aa470596753f2c8ea82468418dc349cad", "patch": "@@ -1,3 +1,8 @@\n+2002-07-24  Richard Henderson  <rth@redhat.com>\n+\n+\t* expr.c (expand_expr) [TRY_FINALLY_EXPR]: Use GOTO_SUBROUTINE_EXPR\n+\tform when not optimizing.\n+\n 2002-07-24  David Mosberger  <davidm@hpl.hp.com>\n \n \t* config/ia64/ia64.c (gen_thread_pointer): Fix typo in marking"}, {"sha": "1b880c136164766c9306737ea75d8f1cf5f26e3b", "filename": "gcc/expr.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ad8135aa470596753f2c8ea82468418dc349cad/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ad8135aa470596753f2c8ea82468418dc349cad/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=8ad8135aa470596753f2c8ea82468418dc349cad", "patch": "@@ -8966,12 +8966,18 @@ expand_expr (exp, target, tmode, modifier)\n \ttree try_block = TREE_OPERAND (exp, 0);\n \ttree finally_block = TREE_OPERAND (exp, 1);\n \n-        if (unsafe_for_reeval (finally_block) > 1)\n+        if (!optimize || unsafe_for_reeval (finally_block) > 1)\n \t  {\n \t    /* In this case, wrapping FINALLY_BLOCK in an UNSAVE_EXPR\n \t       is not sufficient, so we cannot expand the block twice.\n \t       So we play games with GOTO_SUBROUTINE_EXPR to let us\n \t       expand the thing only once.  */\n+\t    /* When not optimizing, we go ahead with this form since\n+\t       (1) user breakpoints operate more predictably without\n+\t\t   code duplication, and\n+\t       (2) we're not running any of the global optimizers\n+\t           that would explode in time/space with the highly\n+\t\t   connected CFG created by the indirect branching.  */\n \n \t    rtx finally_label = gen_label_rtx ();\n \t    rtx done_label = gen_label_rtx ();"}]}