{"sha": "84fc24e8a0955d26e26f81f5a393fccf69156916", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODRmYzI0ZThhMDk1NWQyNmUyNmY4MWY1YTM5M2ZjY2Y2OTE1NjkxNg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2005-07-16T12:15:27Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2005-07-16T12:15:27Z"}, "message": "cfg.c (update_bb_profile_for_threading): Fix profile updating.\n\n\n\t* cfg.c (update_bb_profile_for_threading): Fix profile updating.\n\t(scale_bbs_frequencies_int): Watch roundoff errors.\n\t* predict.c (return_prediction): Initialize return_stmt.\n\nFrom-SVN: r102087", "tree": {"sha": "e40a6f3a4c3b50f937ebf086c49acc42fc0c325d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e40a6f3a4c3b50f937ebf086c49acc42fc0c325d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/84fc24e8a0955d26e26f81f5a393fccf69156916", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84fc24e8a0955d26e26f81f5a393fccf69156916", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84fc24e8a0955d26e26f81f5a393fccf69156916", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84fc24e8a0955d26e26f81f5a393fccf69156916/comments", "author": null, "committer": null, "parents": [{"sha": "866c78db255daf2afb26f267a84469000ac89318", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/866c78db255daf2afb26f267a84469000ac89318", "html_url": "https://github.com/Rust-GCC/gccrs/commit/866c78db255daf2afb26f267a84469000ac89318"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "de6bad93aff0181c8cfe6596486d0e574332aa8d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84fc24e8a0955d26e26f81f5a393fccf69156916/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84fc24e8a0955d26e26f81f5a393fccf69156916/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=84fc24e8a0955d26e26f81f5a393fccf69156916", "patch": "@@ -1,3 +1,9 @@\n+2005-07-16  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cfg.c (update_bb_profile_for_threading): Fix profile updating.\n+\t(scale_bbs_frequencies_int): Watch roundoff errors.\n+\t* predict.c (return_prediction): Initialize return_stmt.\n+\n 2005-07-16  Jan Hubicka  <jh@suse.cz>\n \n \t* profile.c (rest_of_handle_branch_prob): Fix handling of estimation"}, {"sha": "e6af6cfbaff535fdb60d9b09efb7c39249507fa5", "filename": "gcc/cfg.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84fc24e8a0955d26e26f81f5a393fccf69156916/gcc%2Fcfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84fc24e8a0955d26e26f81f5a393fccf69156916/gcc%2Fcfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfg.c?ref=84fc24e8a0955d26e26f81f5a393fccf69156916", "patch": "@@ -896,7 +896,11 @@ update_bb_profile_for_threading (basic_block bb, int edge_frequency,\n       int scale = 65536 * REG_BR_PROB_BASE / prob;\n \n       FOR_EACH_EDGE (c, ei, bb->succs)\n-\tc->probability = (c->probability * scale) / 65536;\n+\t{\n+\t  c->probability = (c->probability * scale) / 65536;\n+\t  if (c->probability > REG_BR_PROB_BASE)\n+\t    c->probability = REG_BR_PROB_BASE;\n+\t}\n     }\n \n   gcc_assert (bb == taken_edge->src);\n@@ -917,6 +921,10 @@ scale_bbs_frequencies_int (basic_block *bbs, int nbbs, int num, int den)\n {\n   int i;\n   edge e;\n+  if (num < 0)\n+    num = 0;\n+  if (num > den)\n+    return;\n   for (i = 0; i < nbbs; i++)\n     {\n       edge_iterator ei;"}, {"sha": "a448c0449b88445296b4906e35473a2d273bf181", "filename": "gcc/predict.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84fc24e8a0955d26e26f81f5a393fccf69156916/gcc%2Fpredict.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84fc24e8a0955d26e26f81f5a393fccf69156916/gcc%2Fpredict.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpredict.c?ref=84fc24e8a0955d26e26f81f5a393fccf69156916", "patch": "@@ -1206,7 +1206,7 @@ return_prediction (tree val, enum prediction *prediction)\n static void\n apply_return_prediction (int *heads)\n {\n-  tree return_stmt;\n+  tree return_stmt = NULL;\n   tree return_val;\n   edge e;\n   tree phi;"}]}