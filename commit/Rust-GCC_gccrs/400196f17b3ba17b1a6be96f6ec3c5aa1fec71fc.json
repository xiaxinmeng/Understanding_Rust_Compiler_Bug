{"sha": "400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDAwMTk2ZjE3YjNiYTE3YjFhNmJlOTZmNmVjM2M1YWExZmVjNzFmYw==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2008-08-18T08:40:32Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2008-08-18T08:40:32Z"}, "message": "tree-sra.c (generate_element_init_1): Deal with NULL constructor element index.\n\n2008-08-18  Richard Guenther  <rguenther@suse.de>\n\n\t* tree-sra.c (generate_element_init_1): Deal with NULL constructor\n\telement index.\n\t(scalarize_init): If we failed to generate some initializers\n\tdo not generate zeros for not instantiated members.  Instead\n\trely on the copy out.\n\t* tree-ssa-operands.c (get_addr_dereference_operands): Warn\n\tabout missing flow-sensitive alias info only if we have\n\taliases computed.\n\nFrom-SVN: r139188", "tree": {"sha": "24ff58adc68f2b06c8eb78be461d5f77f191a2f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24ff58adc68f2b06c8eb78be461d5f77f191a2f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "46102bbfb97c6fdd82c44cea42e3a1e7c91ab99b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46102bbfb97c6fdd82c44cea42e3a1e7c91ab99b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46102bbfb97c6fdd82c44cea42e3a1e7c91ab99b"}], "stats": {"total": 32, "additions": 26, "deletions": 6}, "files": [{"sha": "0f42ce4159dfcd49eab43a230799d7137d8b83d0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc", "patch": "@@ -1,3 +1,14 @@\n+2008-08-18  Richard Guenther  <rguenther@suse.de>\n+\n+\t* tree-sra.c (generate_element_init_1): Deal with NULL constructor\n+\telement index.\n+\t(scalarize_init): If we failed to generate some initializers\n+\tdo not generate zeros for not instantiated members.  Instead\n+\trely on the copy out.\n+\t* tree-ssa-operands.c (get_addr_dereference_operands): Warn\n+\tabout missing flow-sensitive alias info only if we have\n+\taliases computed.\n+\n 2008-08-17  Nick Clifton  <nickc@redhat.com>\n \n \t* doc/extend.texi (Function Attributes): Fix typo in description"}, {"sha": "85217ece07ae17429f552912e94588b6880adc38", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc", "patch": "@@ -2779,6 +2779,12 @@ generate_element_init_1 (struct sra_elt *elt, tree init, gimple_seq *seq_p)\n     case CONSTRUCTOR:\n       FOR_EACH_CONSTRUCTOR_ELT (CONSTRUCTOR_ELTS (init), idx, purpose, value)\n \t{\n+\t  /* Array constructors are routinely created with NULL indices.  */\n+\t  if (purpose == NULL_TREE)\n+\t    {\n+\t      result = false;\n+\t      break;\n+\t    }\n \t  if (TREE_CODE (purpose) == RANGE_EXPR)\n \t    {\n \t      tree lower = TREE_OPERAND (purpose, 0);\n@@ -3404,11 +3410,6 @@ scalarize_init (struct sra_elt *lhs_elt, tree rhs, gimple_stmt_iterator *gsi)\n       result = generate_element_init (lhs_elt, rhs, &init_seq);\n     }\n \n-  /* CONSTRUCTOR is defined such that any member not mentioned is assigned\n-     a zero value.  Initialize the rest of the instantiated elements.  */\n-  generate_element_zero (lhs_elt, &seq);\n-  gimple_seq_add_seq (&seq, init_seq);\n-\n   if (!result)\n     {\n       /* If we failed to convert the entire initializer, then we must\n@@ -3423,6 +3424,13 @@ scalarize_init (struct sra_elt *lhs_elt, tree rhs, gimple_stmt_iterator *gsi)\n       gimple_seq_add_seq (&seq0, seq);\n       seq = seq0;\n     }\n+  else\n+    {\n+      /* CONSTRUCTOR is defined such that any member not mentioned is assigned\n+\t a zero value.  Initialize the rest of the instantiated elements.  */\n+      generate_element_zero (lhs_elt, &seq);\n+      gimple_seq_add_seq (&seq, init_seq);\n+    }\n \n   if (lhs_elt->use_block_copy || !result)\n     {"}, {"sha": "8c94baa5c668005f6c118a611e5ce5181f3dc33e", "filename": "gcc/tree-ssa-operands.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc/gcc%2Ftree-ssa-operands.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc/gcc%2Ftree-ssa-operands.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-operands.c?ref=400196f17b3ba17b1a6be96f6ec3c5aa1fec71fc", "patch": "@@ -1504,7 +1504,8 @@ get_addr_dereference_operands (gimple stmt, tree *addr, int flags,\n \t      && TREE_CODE (ptr) == SSA_NAME\n \t      && (pi == NULL\n \t\t  || (pi->name_mem_tag == NULL_TREE\n-\t\t      && !pi->pt_anything)))\n+\t\t      && !pi->pt_anything))\n+\t      && gimple_aliases_computed_p (cfun))\n \t    {\n \t      fprintf (dump_file,\n \t\t  \"NOTE: no flow-sensitive alias info for \");"}]}