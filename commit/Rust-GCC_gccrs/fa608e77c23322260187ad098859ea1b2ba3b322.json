{"sha": "fa608e77c23322260187ad098859ea1b2ba3b322", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmE2MDhlNzdjMjMzMjIyNjAxODdhZDA5ODg1OWVhMWIyYmEzYjMyMg==", "commit": {"author": {"name": "Markus Trippelsdorf", "email": "markus@trippelsdorf.de", "date": "2014-10-24T06:39:24Z"}, "committer": {"name": "Markus Trippelsdorf", "email": "trippels@gcc.gnu.org", "date": "2014-10-24T06:39:24Z"}, "message": "Fix bootstrap/PR63632\n\nr216566 (r216568 for 4.9 branch) added %{fno-lto} to LINK_COMMAND_SPEC.\nHowever the linker doesn't understand -fno-lto and errors out.\nThis causes an LTO/PGO bootstrap failure, because -fno-lto is used\nduring STAGEprofile.\nFixed by filtering out -fno-lto in collect2.c.\n\nFrom-SVN: r216613", "tree": {"sha": "2c02a7576b870f559cb78d1d963fc61ae2709e65", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2c02a7576b870f559cb78d1d963fc61ae2709e65"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa608e77c23322260187ad098859ea1b2ba3b322", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa608e77c23322260187ad098859ea1b2ba3b322", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa608e77c23322260187ad098859ea1b2ba3b322", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa608e77c23322260187ad098859ea1b2ba3b322/comments", "author": null, "committer": null, "parents": [{"sha": "f1c859ee84ad2d44fa9fc1867b183c47ee1d0489", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1c859ee84ad2d44fa9fc1867b183c47ee1d0489", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1c859ee84ad2d44fa9fc1867b183c47ee1d0489"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "857acd07f82e0953068a97cfefbf65c154e21994", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa608e77c23322260187ad098859ea1b2ba3b322/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa608e77c23322260187ad098859ea1b2ba3b322/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fa608e77c23322260187ad098859ea1b2ba3b322", "patch": "@@ -1,3 +1,8 @@\n+2014-10-24  Markus Trippelsdorf  <markus@trippelsdorf.de>\n+\n+\tPR bootstrap/63632\n+\t* collect2.c (main): Filter out -fno-lto.\n+\n 2014-10-24  Martin Liska  <mliska@suse.cz>\n \n \t* ipa-icf.c (sem_item_optimizer::parse_nonsingleton_classes): Guard"}, {"sha": "7c067ffcafbb7088e1ec2b44e3a0a660a03801be", "filename": "gcc/collect2.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa608e77c23322260187ad098859ea1b2ba3b322/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa608e77c23322260187ad098859ea1b2ba3b322/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=fa608e77c23322260187ad098859ea1b2ba3b322", "patch": "@@ -1311,6 +1311,12 @@ main (int argc, char **argv)\n \t\t  ld1--;\n \t\t  ld2--;\n \t\t}\n+\t      else if (strncmp (arg, \"-fno-lto\", 8) == 0)\n+\t\t{\n+\t\t  /* Do not pass -fno-lto to the linker. */\n+\t\t  ld1--;\n+\t\t  ld2--;\n+\t\t}\n #ifdef TARGET_AIX_VERSION\n \t      else\n \t\t{"}, {"sha": "3b7dbdca53afa0f7ff59aab41f2ac0d2bbf2e5df", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa608e77c23322260187ad098859ea1b2ba3b322/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa608e77c23322260187ad098859ea1b2ba3b322/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fa608e77c23322260187ad098859ea1b2ba3b322", "patch": "@@ -1,3 +1,8 @@\n+2014-10-24  Markus Trippelsdorf  <markus@trippelsdorf.de>\n+\n+\tPR bootstrap/63632\n+\t* g++.dg/torture/pr63632.C: New test.\n+\n 2014-10-23  Jonathan Wakely  <jwakely@redhat.com>\n \n \tPR c++/63619"}, {"sha": "48cd8692412a9fe4805aecec369da06a2bc7b580", "filename": "gcc/testsuite/g++.dg/torture/pr63632.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa608e77c23322260187ad098859ea1b2ba3b322/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr63632.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa608e77c23322260187ad098859ea1b2ba3b322/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr63632.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr63632.C?ref=fa608e77c23322260187ad098859ea1b2ba3b322", "patch": "@@ -0,0 +1,5 @@\n+// PR bootstrap/63632\n+// { dg-do link }\n+// { dg-options \"-fno-lto\" }\n+\n+int main () {}"}]}