{"sha": "92e770277f735559fae532ddcf7307d50e209b2f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTJlNzcwMjc3ZjczNTU1OWZhZTUzMmRkY2Y3MzA3ZDUwZTIwOWIyZg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-03T10:04:04Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-03T10:04:04Z"}, "message": "[multiple changes]\n\n2011-08-03  Emmanuel Briot  <briot@adacore.com>\n\n\t* prj-pp.adb (Pretty_Print): remove trailing blank line in the file\n\n2011-08-03  Javier Miranda  <miranda@adacore.com>\n\n\t* sem_aux.adb (Is_VM_By_Copy_Actual): Fix wrong use of\n\tTagged_Type_Expansion.\n\n2011-08-03  Yannick Moy  <moy@adacore.com>\n\n\t* sem_res.adb\n\t(Resolve_Op_Concat_Arg): do not issue a SPARK violation when argument of\n\tconcatenation is the name of a constant\n\nFrom-SVN: r177258", "tree": {"sha": "05acac75911853ad37f2557a0e69825c2857fe54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/05acac75911853ad37f2557a0e69825c2857fe54"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/92e770277f735559fae532ddcf7307d50e209b2f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92e770277f735559fae532ddcf7307d50e209b2f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92e770277f735559fae532ddcf7307d50e209b2f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92e770277f735559fae532ddcf7307d50e209b2f/comments", "author": null, "committer": null, "parents": [{"sha": "ab29a348ebe1345e469cede91ea4b2ef7c72e1fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab29a348ebe1345e469cede91ea4b2ef7c72e1fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab29a348ebe1345e469cede91ea4b2ef7c72e1fe"}], "stats": {"total": 36, "additions": 25, "deletions": 11}, "files": [{"sha": "475fc118e30be7fec9ed482820b04f9a3fe71c46", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92e770277f735559fae532ddcf7307d50e209b2f/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92e770277f735559fae532ddcf7307d50e209b2f/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=92e770277f735559fae532ddcf7307d50e209b2f", "patch": "@@ -1,3 +1,18 @@\n+2011-08-03  Emmanuel Briot  <briot@adacore.com>\n+\n+\t* prj-pp.adb (Pretty_Print): remove trailing blank line in the file\n+\n+2011-08-03  Javier Miranda  <miranda@adacore.com>\n+\n+\t* sem_aux.adb (Is_VM_By_Copy_Actual): Fix wrong use of\n+\tTagged_Type_Expansion.\n+\n+2011-08-03  Yannick Moy  <moy@adacore.com>\n+\n+\t* sem_res.adb\n+\t(Resolve_Op_Concat_Arg): do not issue a SPARK violation when argument of\n+\tconcatenation is the name of a constant\n+\n 2011-08-03  Emmanuel Briot  <briot@adacore.com>\n \n \t* prj-proc.adb, prj-ext.adb, prj-ext.ads, prj-env.adb, prj-env.ads,"}, {"sha": "cf0ae4a661987bf5fb5f944975d448ba682214f6", "filename": "gcc/ada/prj-pp.adb", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92e770277f735559fae532ddcf7307d50e209b2f/gcc%2Fada%2Fprj-pp.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92e770277f735559fae532ddcf7307d50e209b2f/gcc%2Fada%2Fprj-pp.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-pp.adb?ref=92e770277f735559fae532ddcf7307d50e209b2f", "patch": "@@ -948,10 +948,6 @@ package body Prj.PP is\n       end if;\n \n       Print (Project, 0);\n-\n-      if W_Char = null or else W_Str = null then\n-         Output.Write_Eol;\n-      end if;\n    end Pretty_Print;\n \n    -----------------------"}, {"sha": "fd78fbf2cd8a3319f563e5ab5719cb1bd66d3805", "filename": "gcc/ada/sem_aux.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92e770277f735559fae532ddcf7307d50e209b2f/gcc%2Fada%2Fsem_aux.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92e770277f735559fae532ddcf7307d50e209b2f/gcc%2Fada%2Fsem_aux.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_aux.adb?ref=92e770277f735559fae532ddcf7307d50e209b2f", "patch": "@@ -33,10 +33,10 @@\n with Atree;  use Atree;\n with Einfo;  use Einfo;\n with Namet;  use Namet;\n-with Opt;    use Opt;\n with Sinfo;  use Sinfo;\n with Snames; use Snames;\n with Stand;  use Stand;\n+with Targparm; use Targparm;\n \n package body Sem_Aux is\n \n@@ -791,7 +791,7 @@ package body Sem_Aux is\n \n    function Is_VM_By_Copy_Actual (N : Node_Id) return Boolean is\n    begin\n-      return not Tagged_Type_Expansion\n+      return VM_Target /= No_VM\n         and then Nkind (N) = N_Identifier\n         and then Present (Renamed_Object (Entity (N)))\n         and then Nkind (Renamed_Object (Entity (N))) = N_Slice;"}, {"sha": "a5e229195f8c9d485e03cc38542b375cfc07c915", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92e770277f735559fae532ddcf7307d50e209b2f/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92e770277f735559fae532ddcf7307d50e209b2f/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=92e770277f735559fae532ddcf7307d50e209b2f", "patch": "@@ -7774,10 +7774,10 @@ package body Sem_Res is\n       end if;\n \n       --  Concatenation is restricted in SPARK: each operand must be either a\n-      --  string literal, a static character expression, or another\n-      --  concatenation. Arg cannot be a concatenation here as callers of\n-      --  Resolve_Op_Concat_Arg call it separately on each final operand, past\n-      --  concatenation operations.\n+      --  string literal, the name of a string constant, a static character or\n+      --  string expression, or another concatenation. Arg cannot be a\n+      --  concatenation here as callers of Resolve_Op_Concat_Arg call it\n+      --  separately on each final operand, past concatenation operations.\n \n       if Is_Character_Type (Etype (Arg)) then\n          if not Is_Static_Expression (Arg) then\n@@ -7786,7 +7786,10 @@ package body Sem_Res is\n          end if;\n \n       elsif Is_String_Type (Etype (Arg)) then\n-         if not Is_Static_Expression (Arg) then\n+         if not (Nkind_In (Arg, N_Identifier, N_Expanded_Name)\n+                  and then Is_Constant_Object (Entity (Arg)))\n+           and then not Is_Static_Expression (Arg)\n+         then\n             Check_SPARK_Restriction\n               (\"string operand for concatenation should be static\", N);\n          end if;"}]}