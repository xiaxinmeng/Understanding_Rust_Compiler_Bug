{"sha": "e20eae6a8dd495f17a867855e384e6cbea99d61f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTIwZWFlNmE4ZGQ0OTVmMTdhODY3ODU1ZTM4NGU2Y2JlYTk5ZDYxZg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-06-12T14:03:28Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-06-12T14:03:28Z"}, "message": "re PR c++/42021 (Misleading error message when inherited typedefs cause ambiguity)\n\n2013-06-12  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/42021\n\t* parser.c (cp_parser_nested_name_specifier_opt): Avoid emitting\n\tagain diagnostic already emitted by cp_parser_lookup_name.\n\nFrom-SVN: r200013", "tree": {"sha": "213bd1e1bd6d646a5d21381f9d6244dbb3ed7867", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/213bd1e1bd6d646a5d21381f9d6244dbb3ed7867"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e20eae6a8dd495f17a867855e384e6cbea99d61f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e20eae6a8dd495f17a867855e384e6cbea99d61f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e20eae6a8dd495f17a867855e384e6cbea99d61f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e20eae6a8dd495f17a867855e384e6cbea99d61f/comments", "author": null, "committer": null, "parents": [{"sha": "cddd69eb6d95094c00792899f59ca3d9381b2254", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cddd69eb6d95094c00792899f59ca3d9381b2254", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cddd69eb6d95094c00792899f59ca3d9381b2254"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "c8a9e127963b9b93439f8eba561e07f850b52431", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e20eae6a8dd495f17a867855e384e6cbea99d61f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e20eae6a8dd495f17a867855e384e6cbea99d61f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e20eae6a8dd495f17a867855e384e6cbea99d61f", "patch": "@@ -1,8 +1,14 @@\n+2013-06-12  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/42021\n+\t* parser.c (cp_parser_nested_name_specifier_opt): Avoid emitting\n+\tagain diagnostic already emitted by cp_parser_lookup_name.\n+\n 2013-06-11  Jan Hubicka  <jh@suse.cz>\n \n \tPR c++/57551\n-\t* cp/pt.c (mark_decl_instantiated): Do not export explicit instantiations\n-\tof anonymous namespace templates.\n+\t* cp/pt.c (mark_decl_instantiated): Do not export explicit\n+\tinstantiations of anonymous namespace templates.\n \n 2013-06-10  Jason Merrill  <jason@redhat.com>\n "}, {"sha": "7b4c358d5335d9237f7b1b0ba1a3ea96e8a7a7e4", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e20eae6a8dd495f17a867855e384e6cbea99d61f/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e20eae6a8dd495f17a867855e384e6cbea99d61f/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=e20eae6a8dd495f17a867855e384e6cbea99d61f", "patch": "@@ -5230,10 +5230,16 @@ cp_parser_nested_name_specifier_opt (cp_parser *parser,\n \t\t\t\t  decl);\n \t\t      else if (ambiguous_decls)\n \t\t\t{\n-\t\t\t  error_at (token->location,\n-\t\t\t\t    \"reference to %qD is ambiguous\",\n-\t\t\t\t    token->u.value);\n-\t\t\t  print_candidates (ambiguous_decls);\n+\t\t\t  // cp_parser_lookup_name has the same diagnostic,\n+\t\t\t  // thus make sure to emit it almost once.\n+\t\t\t  if (cp_parser_uncommitted_to_tentative_parse_p\n+\t\t\t      (parser))\n+\t\t\t    {\n+\t\t\t      error_at (token->location,\n+\t\t\t\t\t\"reference to %qD is ambiguous\",\n+\t\t\t\t\ttoken->u.value);\n+\t\t\t      print_candidates (ambiguous_decls);\n+\t\t\t    }\n \t\t\t  decl = error_mark_node;\n \t\t\t}\n \t\t      else"}]}