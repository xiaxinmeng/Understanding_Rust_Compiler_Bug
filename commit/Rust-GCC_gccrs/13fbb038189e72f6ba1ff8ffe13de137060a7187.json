{"sha": "13fbb038189e72f6ba1ff8ffe13de137060a7187", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTNmYmIwMzgxODllNzJmNmJhMWZmOGZmZTEzZGUxMzcwNjBhNzE4Nw==", "commit": {"author": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1994-10-15T00:32:58Z"}, "committer": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1994-10-15T00:32:58Z"}, "message": "(finish_enum): Disable code which forces enums to be signed,\n\n        since this conflicts with their use as bitfields. type_promotes_to\n        handles promotion of enums of underlying unsigned types to signed\n        integer types.\n\nFrom-SVN: r8279", "tree": {"sha": "31bd1143b29a49c1d148daff4bfefe4fbe918707", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/31bd1143b29a49c1d148daff4bfefe4fbe918707"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/13fbb038189e72f6ba1ff8ffe13de137060a7187", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13fbb038189e72f6ba1ff8ffe13de137060a7187", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13fbb038189e72f6ba1ff8ffe13de137060a7187", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13fbb038189e72f6ba1ff8ffe13de137060a7187/comments", "author": null, "committer": null, "parents": [{"sha": "c6a29b1f9dac32b18da43f58cd5a84745cbbf797", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6a29b1f9dac32b18da43f58cd5a84745cbbf797", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6a29b1f9dac32b18da43f58cd5a84745cbbf797"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "d4e04f05f5183ea0a2dfe3399a1a98fe97eb4011", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13fbb038189e72f6ba1ff8ffe13de137060a7187/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13fbb038189e72f6ba1ff8ffe13de137060a7187/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=13fbb038189e72f6ba1ff8ffe13de137060a7187", "patch": "@@ -10282,9 +10282,20 @@ finish_enum (enumtype, values)\n     if (! flag_short_enums && precision < TYPE_PRECISION (integer_type_node))\n       precision = TYPE_PRECISION (integer_type_node);\n \n+\n+    /*\n+     *  The following code is unnecessary since the function \n+     *  type_promotes_to deals correctly with promotion of enums of \n+     *  underlying unsigned types to signed integer types.\n+     *  Moreover, it causes an enum bitfield to require one more bit of\n+     *  storage than defined by the ANSI/ISO C++ resolution section r.7.2\n+     *  which defines the range of an enum. \n+     */\n+#if 0\n     /* Unlike the C frontend, we prefer signed types.  */\n     if (unsignedp && int_fits_type_p (maxnode, type_for_size (precision, 0)))\n       unsignedp = 0;\n+#endif\n \n     TYPE_PRECISION (enumtype) = precision;\n     TYPE_SIZE (enumtype) = NULL_TREE;"}]}