{"sha": "87a64f537b2da1b02a7ec0de254b60614db72074", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODdhNjRmNTM3YjJkYTFiMDJhN2VjMGRlMjU0YjYwNjE0ZGI3MjA3NA==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2008-01-22T06:01:54Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2008-01-22T06:01:54Z"}, "message": "re PR fortran/34896 (libgomp.fortran/reduction5.f90)\n\n2008-01-22  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/34896\n\t* module.c (read_module): Set use_rename attribute.\n\n2008-01-22  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/34896\n\t* gfortran.dg/use_rename_2.f90: New test.\n\nFrom-SVN: r131712", "tree": {"sha": "095c8b10c9b4fca54ba9aa5dbe4217f40eaac509", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/095c8b10c9b4fca54ba9aa5dbe4217f40eaac509"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/87a64f537b2da1b02a7ec0de254b60614db72074", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87a64f537b2da1b02a7ec0de254b60614db72074", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87a64f537b2da1b02a7ec0de254b60614db72074", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87a64f537b2da1b02a7ec0de254b60614db72074/comments", "author": null, "committer": null, "parents": [{"sha": "1d4f537493ecfd41dcdaef735eee2bedce6a85f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d4f537493ecfd41dcdaef735eee2bedce6a85f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1d4f537493ecfd41dcdaef735eee2bedce6a85f6"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "c6be6130a80753c1f2fd907564d4229365c6c707", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87a64f537b2da1b02a7ec0de254b60614db72074/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87a64f537b2da1b02a7ec0de254b60614db72074/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=87a64f537b2da1b02a7ec0de254b60614db72074", "patch": "@@ -1,3 +1,8 @@\n+2008-01-22  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/34896\n+\t* module.c (read_module): Set use_rename attribute.\n+\n 2007-01-21  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/34901"}, {"sha": "c2dc27ae2194d4d390bee0d55ed56da7e438ea5e", "filename": "gcc/fortran/module.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87a64f537b2da1b02a7ec0de254b60614db72074/gcc%2Ffortran%2Fmodule.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87a64f537b2da1b02a7ec0de254b60614db72074/gcc%2Ffortran%2Fmodule.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmodule.c?ref=87a64f537b2da1b02a7ec0de254b60614db72074", "patch": "@@ -3769,6 +3769,9 @@ read_module (void)\n \t      st->n.sym = sym;\n \t      st->n.sym->refs++;\n \n+\t      if (strcmp (name, p) != 0)\n+\t\tsym->attr.use_rename = 1;\n+\n \t      /* Store the symtree pointing to this symbol.  */\n \t      info->u.rsym.symtree = st;\n "}, {"sha": "b3095a15f765419c4c8ab4d34c8b167f3bfe3bb3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87a64f537b2da1b02a7ec0de254b60614db72074/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87a64f537b2da1b02a7ec0de254b60614db72074/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=87a64f537b2da1b02a7ec0de254b60614db72074", "patch": "@@ -1,3 +1,8 @@\n+2008-01-22  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/34896\n+\t* gfortran.dg/use_rename_2.f90: New test.\n+\n 2008-01-21  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/34856"}, {"sha": "3ca6f698af5851b38c0a2f6215330227f6714c54", "filename": "gcc/testsuite/gfortran.dg/use_rename_2.f90", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87a64f537b2da1b02a7ec0de254b60614db72074/gcc%2Ftestsuite%2Fgfortran.dg%2Fuse_rename_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87a64f537b2da1b02a7ec0de254b60614db72074/gcc%2Ftestsuite%2Fgfortran.dg%2Fuse_rename_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fuse_rename_2.f90?ref=87a64f537b2da1b02a7ec0de254b60614db72074", "patch": "@@ -0,0 +1,26 @@\n+! { dg-do run }\n+! { dg-options \"-O1\" }\n+! Checks the fix for PR34896 which was a regression that prevented max\n+! and min from being interchanged by the USE statement below.  It is further\n+! checked by libgomp/testsuite/libgomp.fortran/reduction5.f90\n+!\n+! Reported by H.J. Lu <hjl.tools@gmail.com>\n+!\n+module reduction5\n+  intrinsic min, max\n+end module reduction5\n+\n+program reduction_5_regression\n+  call test2\n+contains\n+  subroutine test2\n+    use reduction5, min => max, max => min\n+    integer a, b\n+    a = max (1,5)\n+    b = min (1,5)\n+    if (a .ne. 1) call abort ()\n+    if (b .ne. 5) call abort ()\n+  end subroutine test2\n+end\n+\n+! { dg-final { cleanup-modules \"reduction5\" } }"}]}