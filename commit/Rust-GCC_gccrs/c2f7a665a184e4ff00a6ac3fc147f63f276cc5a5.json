{"sha": "c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzJmN2E2NjVhMTg0ZTRmZjAwYTZhYzNmYzE0N2Y2M2YyNzZjYzVhNQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2019-06-27T08:21:32Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2019-06-27T08:21:32Z"}, "message": "Fix misc stuff seen by clang-static-analyzer.\n\n2019-06-27  Martin Liska  <mliska@suse.cz>\n\n\t* lto-dump.c (struct symbol_entry): Add default dtor.\n\t(struct variable_entry): Likewise.\n\t(struct function_entry): Likewise.\n\t(dump_list_functions): Release memory.\n\t(dump_list_variables): Likewise.\n2019-06-27  Martin Liska  <mliska@suse.cz>\n\n\t* libgcov-util.c (gcov_profile_merge): Release allocated\n\tmemory.\n\t(calculate_overlap): Likewise.\n\nFrom-SVN: r272733", "tree": {"sha": "73d8a4968841119728532fccadcef88a226783c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/73d8a4968841119728532fccadcef88a226783c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b5b31291bd21749edc3d1f1d74ac09fcb6a89310", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5b31291bd21749edc3d1f1d74ac09fcb6a89310", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5b31291bd21749edc3d1f1d74ac09fcb6a89310"}], "stats": {"total": 38, "additions": 36, "deletions": 2}, "files": [{"sha": "ad14ac6ce5c4286b516f998dc9f389d0ab10c7ef", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5", "patch": "@@ -1,3 +1,11 @@\n+2019-06-27  Martin Liska  <mliska@suse.cz>\n+\n+\t* lto-dump.c (struct symbol_entry): Add default dtor.\n+\t(struct variable_entry): Likewise.\n+\t(struct function_entry): Likewise.\n+\t(dump_list_functions): Release memory.\n+\t(dump_list_variables): Likewise.\n+\n 2019-06-24  Jan Hubicka  <jh@suse.cz>\n \n \t* lto-common.c (compare_tree_sccs_1): Compare CXX_ODR_P;"}, {"sha": "e9de33cf5d81227a3d5f08dd215150c1bd1fcaf1", "filename": "gcc/lto/lto-dump.c", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5/gcc%2Flto%2Flto-dump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5/gcc%2Flto%2Flto-dump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto-dump.c?ref=c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5", "patch": "@@ -44,6 +44,9 @@ struct symbol_entry\n   symbol_entry (symtab_node *node_): node (node_)\n   {}\n \n+  virtual ~symbol_entry ()\n+  {}\n+\n   char* get_name () const\n   {\n     if (flag_lto_dump_demangle)\n@@ -72,6 +75,9 @@ struct variable_entry: public symbol_entry\n   variable_entry (varpool_node *node_): symbol_entry (node_)\n   {}\n \n+  virtual ~variable_entry ()\n+  {}\n+\n   virtual size_t get_size () const\n   {\n     varpool_node *vnode = dyn_cast<varpool_node *> (node);\n@@ -99,6 +105,9 @@ struct function_entry: public symbol_entry\n   function_entry (cgraph_node *node_): symbol_entry (node_)\n   {}\n \n+  virtual ~function_entry ()\n+  {}\n+\n   virtual void dump ()\n   {\n     symbol_entry :: dump ();\n@@ -166,7 +175,10 @@ void dump_list_functions (void)\n   int i=0;\n   symbol_entry* e;\n   FOR_EACH_VEC_ELT (v, i, e)\n-    e->dump ();\n+    {\n+      e->dump ();\n+      delete e;\n+    }\n }\n \n /* Dump list of variables and their details.  */\n@@ -194,7 +206,10 @@ void dump_list_variables (void)\n   int i=0;\n   symbol_entry* e;\n   FOR_EACH_VEC_ELT (v, i, e)\n-    e->dump ();\n+    {\n+      e->dump ();\n+      delete e;\n+    }\n }\n \n /* Dump symbol list.  */"}, {"sha": "fa8230629f698a153fee6a8c4ff0482d4c9beeb8", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5", "patch": "@@ -1,3 +1,9 @@\n+2019-06-27  Martin Liska  <mliska@suse.cz>\n+\n+\t* libgcov-util.c (gcov_profile_merge): Release allocated\n+\tmemory.\n+\t(calculate_overlap): Likewise.\n+\n 2019-06-25  Iain Sandoe  <iain@sandoe.co.uk>\n \n \t* config.host: Add libef_ppc.a to the extra files for powerpc-darwin."}, {"sha": "404ece6faa6320d110346ce27989d03aa599d33b", "filename": "libgcc/libgcov-util.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5/libgcc%2Flibgcov-util.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5/libgcc%2Flibgcov-util.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcov-util.c?ref=c2f7a665a184e4ff00a6ac3fc147f63f276cc5a5", "patch": "@@ -681,6 +681,9 @@ gcov_profile_merge (struct gcov_info *tgt_profile, struct gcov_info *src_profile\n       tgt_tail = gi_ptr;\n     }\n \n+  free (in_src_not_tgt);\n+  free (tgt_infos);\n+\n   return 0;\n }\n \n@@ -1280,6 +1283,8 @@ calculate_overlap (struct gcov_info *gcov_list1,\n \n     }\n \n+  free (all_infos);\n+\n   if (overlap_obj_level)\n     printf(\"   SUM:%36s  overlap = %6.2f%% (%5.2f%% %5.2f%%)\\n\",\n            \"\", sum_val*100, sum_cum_1*100, sum_cum_2*100);"}]}