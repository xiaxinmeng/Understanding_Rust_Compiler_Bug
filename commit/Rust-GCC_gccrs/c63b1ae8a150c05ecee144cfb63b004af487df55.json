{"sha": "c63b1ae8a150c05ecee144cfb63b004af487df55", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzYzYjFhZThhMTUwYzA1ZWNlZTE0NGNmYjYzYjAwNGFmNDg3ZGY1NQ==", "commit": {"author": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2001-08-29T21:43:41Z"}, "committer": {"name": "Andrew Macleod", "email": "amacleod@gcc.gnu.org", "date": "2001-08-29T21:43:41Z"}, "message": "gcse.c (compute_hash_table): The SRC part of an insn with a RETVAL note should not be considered outside the...\n\n\n2001-08-29  Andrew MacLeod  <amacleod@redhat.com>\n\n\t* gcse.c (compute_hash_table): The SRC part of an insn with a RETVAL\n\tnote should not be considered outside the libcall block.\n\nFrom-SVN: r45276", "tree": {"sha": "865976ad0565108e4b7044a2fbec43d1778de04e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/865976ad0565108e4b7044a2fbec43d1778de04e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c63b1ae8a150c05ecee144cfb63b004af487df55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c63b1ae8a150c05ecee144cfb63b004af487df55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c63b1ae8a150c05ecee144cfb63b004af487df55", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c63b1ae8a150c05ecee144cfb63b004af487df55/comments", "author": null, "committer": null, "parents": [{"sha": "c864312278d46ec2a65bec64f6eef53be1b5a0e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c864312278d46ec2a65bec64f6eef53be1b5a0e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c864312278d46ec2a65bec64f6eef53be1b5a0e9"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "cbf514b286023dbd475d580c12e9431f1a704dff", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c63b1ae8a150c05ecee144cfb63b004af487df55/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c63b1ae8a150c05ecee144cfb63b004af487df55/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c63b1ae8a150c05ecee144cfb63b004af487df55", "patch": "@@ -1,3 +1,8 @@\n+2001-08-29  Andrew MacLeod  <amacleod@redhat.com>\n+\n+\t* gcse.c (compute_hash_table): The SRC part of an insn with a RETVAL\n+\tnote should not be considered outside the libcall block.\n+\n 2001-08-29  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* genattrtab.c (attr_printf): Use VA_OPEN/VA_FIXEDARG/VA_CLOSE."}, {"sha": "029c5b6cf24c2a87838505f184427f47319e9646", "filename": "gcc/gcse.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c63b1ae8a150c05ecee144cfb63b004af487df55/gcc%2Fgcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c63b1ae8a150c05ecee144cfb63b004af487df55/gcc%2Fgcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcse.c?ref=c63b1ae8a150c05ecee144cfb63b004af487df55", "patch": "@@ -2545,10 +2545,12 @@ compute_hash_table (set_p)\n \tif (INSN_P (insn))\n \t  {\n \t    if (find_reg_note (insn, REG_LIBCALL, NULL_RTX))\n-\t      in_libcall_block = 1;\n-\t    else if (find_reg_note (insn, REG_RETVAL, NULL_RTX))\n-\t      in_libcall_block = 0;\n-\t    hash_scan_insn (insn, set_p, in_libcall_block);\n+              in_libcall_block = 1;\n+            else if (set_p && find_reg_note (insn, REG_RETVAL, NULL_RTX))\n+              in_libcall_block = 0;\n+            hash_scan_insn (insn, set_p, in_libcall_block);\n+            if (!set_p && find_reg_note (insn, REG_RETVAL, NULL_RTX))\n+              in_libcall_block = 0;\n \t}\n     }\n "}]}