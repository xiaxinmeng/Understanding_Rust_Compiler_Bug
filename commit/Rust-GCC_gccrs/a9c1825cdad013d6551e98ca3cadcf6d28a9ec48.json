{"sha": "a9c1825cdad013d6551e98ca3cadcf6d28a9ec48", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTljMTgyNWNkYWQwMTNkNjU1MWU5OGNhM2NhZGNmNmQyOGE5ZWM0OA==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@linux.vnet.ibm.com", "date": "2016-11-11T19:12:12Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "2016-11-11T19:12:12Z"}, "message": "re PR target/78243 (incorrect byte offset in vextractuh with -mcpu=power9)\n\n2016-11-11  Michael Meissner  <meissner@linux.vnet.ibm.com>\n\n\tPR target/78243\n\t* config/rs6000/vsx.md (vsx_extract_<mode>_p9): Correct the\n\telement order for little endian ordering.\n\n\t* config/rs6000/altivec.md (reduc_plus_scal_<mode>): Use\n\tVECTOR_ELT_ORDER_BIG and not BYTES_BIG_ENDIAN to adjust element\n\tnumber.\n\nFrom-SVN: r242317", "tree": {"sha": "babc5f5f2ff75ed9804025f3a97c006bf9e013e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/babc5f5f2ff75ed9804025f3a97c006bf9e013e4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9c1825cdad013d6551e98ca3cadcf6d28a9ec48", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9c1825cdad013d6551e98ca3cadcf6d28a9ec48", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9c1825cdad013d6551e98ca3cadcf6d28a9ec48", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9c1825cdad013d6551e98ca3cadcf6d28a9ec48/comments", "author": null, "committer": null, "parents": [{"sha": "9d8f95deca5b9a5ba63c638cf96f4678c68d2bd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d8f95deca5b9a5ba63c638cf96f4678c68d2bd0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d8f95deca5b9a5ba63c638cf96f4678c68d2bd0"}], "stats": {"total": 23, "additions": 18, "deletions": 5}, "files": [{"sha": "401151205d9f02aa97fcf5d1cfc85f6b68b59ad7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9c1825cdad013d6551e98ca3cadcf6d28a9ec48/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9c1825cdad013d6551e98ca3cadcf6d28a9ec48/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a9c1825cdad013d6551e98ca3cadcf6d28a9ec48", "patch": "@@ -1,3 +1,13 @@\n+2016-11-11  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\n+\tPR target/78243\n+\t* config/rs6000/vsx.md (vsx_extract_<mode>_p9): Correct the\n+\telement order for little endian ordering.\n+\n+\t* config/rs6000/altivec.md (reduc_plus_scal_<mode>): Use\n+\tVECTOR_ELT_ORDER_BIG and not BYTES_BIG_ENDIAN to adjust element\n+\tnumber.\n+\n 2016-11-11  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/78310"}, {"sha": "802aa7459af57c0cf79e6e3f86d309aab596262f", "filename": "gcc/config/rs6000/altivec.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9c1825cdad013d6551e98ca3cadcf6d28a9ec48/gcc%2Fconfig%2Frs6000%2Faltivec.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9c1825cdad013d6551e98ca3cadcf6d28a9ec48/gcc%2Fconfig%2Frs6000%2Faltivec.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faltivec.md?ref=a9c1825cdad013d6551e98ca3cadcf6d28a9ec48", "patch": "@@ -2785,7 +2785,7 @@\n   rtx vtmp1 = gen_reg_rtx (V4SImode);\n   rtx vtmp2 = gen_reg_rtx (<MODE>mode);\n   rtx dest = gen_lowpart (V4SImode, vtmp2);\n-  int elt = BYTES_BIG_ENDIAN ? GET_MODE_NUNITS (<MODE>mode) - 1 : 0;\n+  int elt = VECTOR_ELT_ORDER_BIG ? GET_MODE_NUNITS (<MODE>mode) - 1 : 0;\n \n   emit_insn (gen_altivec_vspltisw (vzero, const0_rtx));\n   emit_insn (gen_altivec_vsum4s<VI_char>s (vtmp1, operands[1], vzero));"}, {"sha": "c5a57cbebb620993ea5a667ad20c15e1868400b4", "filename": "gcc/config/rs6000/vsx.md", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9c1825cdad013d6551e98ca3cadcf6d28a9ec48/gcc%2Fconfig%2Frs6000%2Fvsx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9c1825cdad013d6551e98ca3cadcf6d28a9ec48/gcc%2Fconfig%2Frs6000%2Fvsx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fvsx.md?ref=a9c1825cdad013d6551e98ca3cadcf6d28a9ec48", "patch": "@@ -2542,10 +2542,13 @@\n   \"VECTOR_MEM_VSX_P (<MODE>mode) && TARGET_VEXTRACTUB\n    && TARGET_VSX_SMALL_INTEGER\"\n {\n-  /* Note, the element number has already been adjusted for endianness, so we\n-     don't have to adjust it here.  */\n-  int unit_size = GET_MODE_UNIT_SIZE (<MODE>mode);\n-  HOST_WIDE_INT offset = unit_size * INTVAL (operands[2]);\n+  HOST_WIDE_INT elt = INTVAL (operands[2]);\n+  HOST_WIDE_INT elt_adj = (!VECTOR_ELT_ORDER_BIG\n+\t\t\t   ? GET_MODE_NUNITS (<MODE>mode) - 1 - elt\n+\t\t\t   : elt);\n+\n+  HOST_WIDE_INT unit_size = GET_MODE_UNIT_SIZE (<MODE>mode);\n+  HOST_WIDE_INT offset = unit_size * elt_adj;\n \n   operands[2] = GEN_INT (offset);\n   if (unit_size == 4)"}]}