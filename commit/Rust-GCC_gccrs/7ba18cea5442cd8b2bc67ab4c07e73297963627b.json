{"sha": "7ba18cea5442cd8b2bc67ab4c07e73297963627b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2JhMThjZWE1NDQyY2Q4YjJiYzY3YWI0YzA3ZTczMjk3OTYzNjI3Yg==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2005-10-24T20:20:40Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2005-10-24T20:20:40Z"}, "message": "re PR libfortran/24416 (Wrong reading following namelist reading)\n\n2005-10-24  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/24416\n\t* libgfortran/io/list_read.c (namelist_read): Exit with call to\n\tfree_saved () so that character strings do not accumulate.\n\n2005-10-24  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/24416\n\tgfortran.dg/namelist_char_only.f90: New test.\n\nFrom-SVN: r105862", "tree": {"sha": "5c5fd990d242774c49c6f17cc3197d870ec10922", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c5fd990d242774c49c6f17cc3197d870ec10922"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7ba18cea5442cd8b2bc67ab4c07e73297963627b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ba18cea5442cd8b2bc67ab4c07e73297963627b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ba18cea5442cd8b2bc67ab4c07e73297963627b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ba18cea5442cd8b2bc67ab4c07e73297963627b/comments", "author": null, "committer": null, "parents": [{"sha": "83d890b9ba13c57aec4dcee1de9901ceab6e9a84", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83d890b9ba13c57aec4dcee1de9901ceab6e9a84", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83d890b9ba13c57aec4dcee1de9901ceab6e9a84"}], "stats": {"total": 51, "additions": 46, "deletions": 5}, "files": [{"sha": "1151980d511abff5d9ae367b040c216c90c6e52f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ba18cea5442cd8b2bc67ab4c07e73297963627b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ba18cea5442cd8b2bc67ab4c07e73297963627b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7ba18cea5442cd8b2bc67ab4c07e73297963627b", "patch": "@@ -1,3 +1,8 @@\n+2005-10-24  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/24416\n+\tgfortran.dg/namelist_char_only.f90: New test.\n+\n 2005-10-24  Asher Langton  <langton2@llnl.gov>\n \n \tPR fortran/17031"}, {"sha": "eb2d7ea83d048f3a0a08dd8e26d262c64615b807", "filename": "gcc/testsuite/gfortran.dg/namelist_char_only.f90", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ba18cea5442cd8b2bc67ab4c07e73297963627b/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_char_only.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ba18cea5442cd8b2bc67ab4c07e73297963627b/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_char_only.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_char_only.f90?ref=7ba18cea5442cd8b2bc67ab4c07e73297963627b", "patch": "@@ -0,0 +1,29 @@\n+! { dg-do run }\n+! { dg-options \"-O0\" }\n+! Test patch for PR24416.f90 - a used to come back from the read with var\n+! prepended.\n+!\n+  IMPLICIT NONE\n+  CHARACTER(len=10)  :: var = \"hello\"\n+  character(len=10)  :: a = \"\"\n+  NAMELIST /inx/ var\n+\n+  OPEN(unit=11, status='scratch')\n+  write (11, *) \"&INX\"\n+  write (11, *) \"  var = 'goodbye'\"\n+  write (11, *) \"&END\"\n+  rewind (11)\n+\n+  READ(11,NML=inx)\n+  CLOSE(11)\n+\n+  OPEN(unit=11, status='scratch')\n+  write (11, *) \"alls_well\"\n+  rewind (11)\n+\n+  READ(11,*) a\n+  CLOSE(11)\n+\n+  if (a /= \"alls_well\") call abort ()\n+\n+END\n\\ No newline at end of file"}, {"sha": "52ad1a91f642a42eb575513daa9de6ad5d0c43f8", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ba18cea5442cd8b2bc67ab4c07e73297963627b/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ba18cea5442cd8b2bc67ab4c07e73297963627b/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=7ba18cea5442cd8b2bc67ab4c07e73297963627b", "patch": "@@ -1,9 +1,15 @@\n+2005-10-24  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/24416\n+\t* libgfortran/io/list_read.c (namelist_read): Exit with call to\n+\tfree_saved () so that character strings do not accumulate.\n+\n 2005-10-23  Jerry DeLisle  <jvdelisle@verizon.net>\n \n-        PR libgfortran/24489\n-        * io/transfer.c (read_block): Change the order of execution to not read\n-        past end-of-record.\n-        (read_block_direct): Same change.\n+\tPR libgfortran/24489\n+\t* io/transfer.c (read_block): Change the order of execution to not read\n+\tpast end-of-record.\n+\t(read_block_direct): Same change.\n \n 2005-10-23  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n "}, {"sha": "2e1717ab463d62c82b38eefce782d62e2ebd1ff2", "filename": "libgfortran/io/list_read.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ba18cea5442cd8b2bc67ab4c07e73297963627b/libgfortran%2Fio%2Flist_read.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ba18cea5442cd8b2bc67ab4c07e73297963627b/libgfortran%2Fio%2Flist_read.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Flist_read.c?ref=7ba18cea5442cd8b2bc67ab4c07e73297963627b", "patch": "@@ -2364,13 +2364,14 @@ namelist_read (void)\n         }\n \n    }\n-\n+  free_saved ();\n   return;\n \n   /* All namelist error calls return from here */\n \n nml_err_ret:\n \n+  free_saved ();\n   generate_error (ERROR_READ_VALUE , nml_err_msg);\n   return;\n }"}]}