{"sha": "694d73e1659c7db09d415c8ba0ebeb441c0782a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Njk0ZDczZTE2NTljN2RiMDlkNDE1YzhiYTBlYmViNDQxYzA3ODJhOA==", "commit": {"author": {"name": "James A. Morrison", "email": "phython@gcc.gnu.org", "date": "2005-03-11T03:18:56Z"}, "committer": {"name": "James A. Morrison", "email": "phython@gcc.gnu.org", "date": "2005-03-11T03:18:56Z"}, "message": "re PR tree-optimization/20130 (Fold a * -1 - 1 into ~a;)\n\n2005-03-11  James A. Morrison  <phython@gcc.gnu.org>\n\n       PR tree-optimization/20130\n       * fold-const.c (fold): Fold x * -1 into -x.\n\nFrom-SVN: r96283", "tree": {"sha": "2c71b62d1a54cb3df4ca245b02f729ad871db5e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2c71b62d1a54cb3df4ca245b02f729ad871db5e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/694d73e1659c7db09d415c8ba0ebeb441c0782a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/694d73e1659c7db09d415c8ba0ebeb441c0782a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/694d73e1659c7db09d415c8ba0ebeb441c0782a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/694d73e1659c7db09d415c8ba0ebeb441c0782a8/comments", "author": null, "committer": null, "parents": [{"sha": "550b7784c6e4fdf832cca6619f61f0c0f5935d07", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/550b7784c6e4fdf832cca6619f61f0c0f5935d07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/550b7784c6e4fdf832cca6619f61f0c0f5935d07"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "82d61aaafb849c2b9556a27fe414d6439aef3d3f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/694d73e1659c7db09d415c8ba0ebeb441c0782a8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/694d73e1659c7db09d415c8ba0ebeb441c0782a8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=694d73e1659c7db09d415c8ba0ebeb441c0782a8", "patch": "@@ -1,3 +1,8 @@\n+2005-03-11  James A. Morrison  <phython@gcc.gnu.org>\n+\n+\tPR tree-optimization/20130\n+\t* fold-const.c (fold): Fold x * -1 into -x.\n+\n 2005-03-11  Kaz Kojima  <kkojima@gcc.gnu.org>\n \n \tPR rtl-optimization/20331"}, {"sha": "9d0a9f02d7368bc794549c2ae3dacb1bf1b51a9f", "filename": "gcc/fold-const.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/694d73e1659c7db09d415c8ba0ebeb441c0782a8/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/694d73e1659c7db09d415c8ba0ebeb441c0782a8/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=694d73e1659c7db09d415c8ba0ebeb441c0782a8", "patch": "@@ -7785,6 +7785,9 @@ fold_binary (enum tree_code code, tree type, tree op0, tree op1)\n \t    return omit_one_operand (type, arg1, arg0);\n \t  if (integer_onep (arg1))\n \t    return non_lvalue (fold_convert (type, arg0));\n+\t  /* Transform x * -1 into -x.  */\n+\t  if (integer_all_onesp (arg1))\n+\t    return fold_convert (type, negate_expr (arg0));\n \n \t  /* (a * (1 << b)) is (a << b)  */\n \t  if (TREE_CODE (arg1) == LSHIFT_EXPR"}, {"sha": "c51d1d111063674434e5dd226d76da4eff85cbd2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/694d73e1659c7db09d415c8ba0ebeb441c0782a8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/694d73e1659c7db09d415c8ba0ebeb441c0782a8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=694d73e1659c7db09d415c8ba0ebeb441c0782a8", "patch": "@@ -1,3 +1,8 @@\n+2005-03-10  James A. Morrison  <phython@gcc.gnu.org>\n+\n+\tPR tree-optimization/20130\n+\t* gcc.dg/pr20130-1.c: New test.\n+\n 2005-03-10  Steve Ellcey  <sje@cup.hp.com>\n \n \tPR target/20095"}, {"sha": "7097ff600eb2b63ff028d96d3fc4c1b311b72804", "filename": "gcc/testsuite/gcc.dg/pr20130-1.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/694d73e1659c7db09d415c8ba0ebeb441c0782a8/gcc%2Ftestsuite%2Fgcc.dg%2Fpr20130-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/694d73e1659c7db09d415c8ba0ebeb441c0782a8/gcc%2Ftestsuite%2Fgcc.dg%2Fpr20130-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr20130-1.c?ref=694d73e1659c7db09d415c8ba0ebeb441c0782a8", "patch": "@@ -0,0 +1,14 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fdump-tree-generic\" } */\n+int z (int a) {\n+\treturn a * -1;\n+}\n+\n+int x (int a) {\n+\treturn -1 * a;\n+}\n+\n+int y (int a) {\n+\treturn -(-1 * -a);\n+}\n+/* { dg-final { scan-tree-dump-times \"-a\" 3 \"generic\" } } */"}]}