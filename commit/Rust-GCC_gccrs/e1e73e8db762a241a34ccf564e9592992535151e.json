{"sha": "e1e73e8db762a241a34ccf564e9592992535151e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTFlNzNlOGRiNzYyYTI0MWEzNGNjZjU2NGU5NTkyOTkyNTM1MTUxZQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2005-09-23T16:33:47Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2005-09-23T16:33:47Z"}, "message": "enable.m4: New file.\n\nconfig:\n\t* enable.m4: New file.\n\t* tls.m4: New file.\nlibmudflap:\n\t* aclocal.m4, configure: Rebuilt.\n\t* configure.ac: Use GCC_CHECK_TLS.\n\t* acinclude.m4 (LIBMUDFLAP_CHECK_TLS, LIBMUDFLAP_ENABLE): Moved\n\tto ../config.\n\nFrom-SVN: r104571", "tree": {"sha": "9cbf55c3da9f19be71ffd49e2127da8c09829396", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9cbf55c3da9f19be71ffd49e2127da8c09829396"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e1e73e8db762a241a34ccf564e9592992535151e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1e73e8db762a241a34ccf564e9592992535151e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1e73e8db762a241a34ccf564e9592992535151e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1e73e8db762a241a34ccf564e9592992535151e/comments", "author": null, "committer": null, "parents": [{"sha": "9304100dbfd990b391236e4fd870e19a77344d52", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9304100dbfd990b391236e4fd870e19a77344d52", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9304100dbfd990b391236e4fd870e19a77344d52"}], "stats": {"total": 143, "additions": 80, "deletions": 63}, "files": [{"sha": "800698cf2b8e6628281e7d0d4874d0d6f5529ddf", "filename": "config/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1e73e8db762a241a34ccf564e9592992535151e/config%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1e73e8db762a241a34ccf564e9592992535151e/config%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2FChangeLog?ref=e1e73e8db762a241a34ccf564e9592992535151e", "patch": "@@ -1,3 +1,8 @@\n+2005-09-23  Tom Tromey  <tromey@redhat.com>\n+\n+\t* enable.m4: New file.\n+\t* tls.m4: New file.\n+\n 2005-08-12  Paolo Bonzini  <bonzini@gnu.org>\n \n \t* config/acx.m4 (NCN_CHECK_TARGET_TOOL, NCN_STRICT_CHECK_TOOL,"}, {"sha": "88b29b8aa7fb0d68b113969e8bc84388e4d2634e", "filename": "config/enable.m4", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1e73e8db762a241a34ccf564e9592992535151e/config%2Fenable.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1e73e8db762a241a34ccf564e9592992535151e/config%2Fenable.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Fenable.m4?ref=e1e73e8db762a241a34ccf564e9592992535151e", "patch": "@@ -0,0 +1,38 @@\n+dnl ----------------------------------------------------------------------\n+dnl This whole bit snagged from libstdc++-v3.\n+\n+dnl\n+dnl GCC_ENABLE\n+dnl    (FEATURE, DEFAULT, HELP-ARG, HELP-STRING)\n+dnl    (FEATURE, DEFAULT, HELP-ARG, HELP-STRING, permit a|b|c)\n+dnl    (FEATURE, DEFAULT, HELP-ARG, HELP-STRING, SHELL-CODE-HANDLER)\n+dnl\n+dnl See docs/html/17_intro/configury.html#enable for documentation.\n+dnl\n+AC_DEFUN([GCC_ENABLE],[dnl\n+m4_define([_g_switch],[--enable-$1])dnl\n+m4_define([_g_help],[AC_HELP_STRING(_g_switch$3,[$4 @<:@default=$2@:>@])])dnl\n+ AC_ARG_ENABLE($1,_g_help,\n+  m4_bmatch([$5],\n+   [^permit ],\n+     [[\n+      case \"$enableval\" in\n+       m4_bpatsubst([$5],[permit ])) ;;\n+       *) AC_MSG_ERROR(Unknown argument to enable/disable $1) ;;\n+          dnl Idea for future:  generate a URL pointing to\n+          dnl \"onlinedocs/configopts.html#whatever\"\n+      esac\n+     ]],\n+   [^$],\n+     [[\n+      case \"$enableval\" in\n+       yes|no) ;;\n+       *) AC_MSG_ERROR(Argument to enable/disable $1 must be yes or no) ;;\n+      esac\n+     ]],\n+   [[$5]]),\n+  [enable_]m4_bpatsubst([$1],-,_)[=][$2])\n+m4_undefine([_g_switch])dnl\n+m4_undefine([_g_help])dnl\n+])\n+"}, {"sha": "5cbb6854f6c784e422925bf71769a24c2cabc89c", "filename": "config/tls.m4", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1e73e8db762a241a34ccf564e9592992535151e/config%2Ftls.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1e73e8db762a241a34ccf564e9592992535151e/config%2Ftls.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Ftls.m4?ref=e1e73e8db762a241a34ccf564e9592992535151e", "patch": "@@ -0,0 +1,21 @@\n+dnl Check whether the target supports TLS.\n+AC_DEFUN([GCC_CHECK_TLS], [\n+  GCC_ENABLE(tls, yes, [Use thread-local storage])\n+  AC_CACHE_CHECK([whether the target supports thread-local storage],\n+\t\t have_tls, [\n+    AC_RUN_IFELSE([__thread int a; int b; int main() { return a = b; }],\n+      [dnl If the test case passed with dynamic linking, try again with\n+      dnl static linking.  This fails at least with some older Red Hat\n+      dnl releases.\n+      save_LDFLAGS=\"$LDFLAGS\"\n+      LDFLAGS=\"-static $LDFLAGS\"\n+      AC_RUN_IFELSE([__thread int a; int b; int main() { return a = b; }],\n+\t\t    [have_tls=yes], [have_tls=no], [])\n+      LDFLAGS=\"$save_LDFLAGS\"],\n+      [have_tls=no],\n+      [AC_COMPILE_IFELSE([__thread int foo;], [have_tls=yes], [have_tls=no])]\n+    )])\n+  if test \"$enable_tls $have_tls\" = \"yes yes\"; then\n+    AC_DEFINE(HAVE_TLS, 1,\n+\t      [Define to 1 if the target supports thread-local storage.])\n+  fi])"}, {"sha": "537c260a6d24c9e5c135714ac70e97bd82f3c076", "filename": "libmudflap/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2FChangeLog?ref=e1e73e8db762a241a34ccf564e9592992535151e", "patch": "@@ -1,3 +1,10 @@\n+2005-09-23  Tom Tromey  <tromey@redhat.com>\n+\n+\t* aclocal.m4, configure: Rebuilt.\n+\t* configure.ac: Use GCC_CHECK_TLS.\n+\t* acinclude.m4 (LIBMUDFLAP_CHECK_TLS, LIBMUDFLAP_ENABLE): Moved\n+\tto ../config.\n+\n 2005-08-22  Jim Wilson  <wilson@specifix.com>\n \n \t* mf-hooks2.c (MF_REGISTER_fopen): Define to __MF_TYPE_STATIC when"}, {"sha": "43921f23c731ba8210c46b066c8af012e06d0336", "filename": "libmudflap/Makefile.in", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2FMakefile.in?ref=e1e73e8db762a241a34ccf564e9592992535151e", "patch": "@@ -50,7 +50,9 @@ DIST_COMMON = $(am__configure_deps) $(include_HEADERS) \\\n subdir = .\n ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n am__aclocal_m4_deps = $(top_srcdir)/../config/depstand.m4 \\\n-\t$(top_srcdir)/../config/lead-dot.m4 $(top_srcdir)/acinclude.m4 \\\n+\t$(top_srcdir)/../config/enable.m4 \\\n+\t$(top_srcdir)/../config/lead-dot.m4 \\\n+\t$(top_srcdir)/../config/tls.m4 $(top_srcdir)/acinclude.m4 \\\n \t$(top_srcdir)/../libtool.m4 $(top_srcdir)/configure.ac\n am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \\\n \t$(ACLOCAL_M4)"}, {"sha": "38e0808ad933ea3560b68635887ffadc4f9ec6a3", "filename": "libmudflap/acinclude.m4", "status": "modified", "additions": 0, "deletions": 60, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Facinclude.m4?ref=e1e73e8db762a241a34ccf564e9592992535151e", "patch": "@@ -1,25 +1,3 @@\n-dnl Check whether the target supports TLS.\n-AC_DEFUN([LIBMUDFLAP_CHECK_TLS], [\n-  LIBMUDFLAP_ENABLE(tls, yes, [Use thread-local storage])\n-  AC_CACHE_CHECK([whether the target supports thread-local storage],\n-\t\t have_tls, [\n-    AC_RUN_IFELSE([__thread int a; int b; int main() { return a = b; }],\n-      [dnl If the test case passed with dynamic linking, try again with\n-      dnl static linking.  This fails at least with some older Red Hat\n-      dnl releases.\n-      save_LDFLAGS=\"$LDFLAGS\"\n-      LDFLAGS=\"-static $LDFLAGS\"\n-      AC_RUN_IFELSE([__thread int a; int b; int main() { return a = b; }],\n-\t\t    [have_tls=yes], [have_tls=no], [])\n-      LDFLAGS=\"$save_LDFLAGS\"],\n-      [have_tls=no],\n-      [AC_COMPILE_IFELSE([__thread int foo;], [have_tls=yes], [have_tls=no])]\n-    )])\n-  if test \"$enable_tls $have_tls\" = \"yes yes\"; then\n-    AC_DEFINE(HAVE_TLS, 1,\n-\t      [Define to 1 if the target supports thread-local storage.])\n-  fi])\n-\n dnl ----------------------------------------------------------------------\n dnl This whole bit snagged from libgfortran.\n \n@@ -32,41 +10,3 @@ AC_DEFUN([AM_PROG_LIBTOOL])\n AC_DEFUN([AC_LIBTOOL_DLOPEN])\n AC_DEFUN([AC_PROG_LD])\n ])\n-\n-dnl ----------------------------------------------------------------------\n-dnl This whole bit snagged from libstdc++-v3.\n-\n-dnl\n-dnl LIBMUDFLAP_ENABLE\n-dnl    (FEATURE, DEFAULT, HELP-ARG, HELP-STRING)\n-dnl    (FEATURE, DEFAULT, HELP-ARG, HELP-STRING, permit a|b|c)\n-dnl    (FEATURE, DEFAULT, HELP-ARG, HELP-STRING, SHELL-CODE-HANDLER)\n-dnl\n-dnl See docs/html/17_intro/configury.html#enable for documentation.\n-dnl\n-m4_define([LIBMUDFLAP_ENABLE],[dnl\n-m4_define([_g_switch],[--enable-$1])dnl\n-m4_define([_g_help],[AC_HELP_STRING(_g_switch$3,[$4 @<:@default=$2@:>@])])dnl\n- AC_ARG_ENABLE($1,_g_help,\n-  m4_bmatch([$5],\n-   [^permit ],\n-     [[\n-      case \"$enableval\" in\n-       m4_bpatsubst([$5],[permit ])) ;;\n-       *) AC_MSG_ERROR(Unknown argument to enable/disable $1) ;;\n-          dnl Idea for future:  generate a URL pointing to\n-          dnl \"onlinedocs/configopts.html#whatever\"\n-      esac\n-     ]],\n-   [^$],\n-     [[\n-      case \"$enableval\" in\n-       yes|no) ;;\n-       *) AC_MSG_ERROR(Argument to enable/disable $1 must be yes or no) ;;\n-      esac\n-     ]],\n-   [[$5]]),\n-  [enable_]m4_bpatsubst([$1],-,_)[=][$2])\n-m4_undefine([_g_switch])dnl\n-m4_undefine([_g_help])dnl\n-])"}, {"sha": "db8245fc80bca0daef877a5eb4564b41bc680dd3", "filename": "libmudflap/aclocal.m4", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Faclocal.m4?ref=e1e73e8db762a241a34ccf564e9592992535151e", "patch": "@@ -915,5 +915,7 @@ AC_SUBST([am__untar])\n ]) # _AM_PROG_TAR\n \n m4_include([../config/depstand.m4])\n+m4_include([../config/enable.m4])\n m4_include([../config/lead-dot.m4])\n+m4_include([../config/tls.m4])\n m4_include([acinclude.m4])"}, {"sha": "038bac54618d233674b0980b203c0d81f1e11f5d", "filename": "libmudflap/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Fconfigure.ac?ref=e1e73e8db762a241a34ccf564e9592992535151e", "patch": "@@ -245,7 +245,7 @@ else\n fi\n \n # See if we support thread-local storage.\n-LIBMUDFLAP_CHECK_TLS\n+GCC_CHECK_TLS\n \n AC_CONFIG_FILES([Makefile testsuite/Makefile testsuite/mfconfig.exp])\n AC_OUTPUT"}, {"sha": "02cf6ecadcf4188f4f33e3ce36eb7bec0448e527", "filename": "libmudflap/testsuite/Makefile.in", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1e73e8db762a241a34ccf564e9592992535151e/libmudflap%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libmudflap%2Ftestsuite%2FMakefile.in?ref=e1e73e8db762a241a34ccf564e9592992535151e", "patch": "@@ -41,7 +41,9 @@ DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in \\\n \t$(srcdir)/mfconfig.exp.in\n ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n am__aclocal_m4_deps = $(top_srcdir)/../config/depstand.m4 \\\n-\t$(top_srcdir)/../config/lead-dot.m4 $(top_srcdir)/acinclude.m4 \\\n+\t$(top_srcdir)/../config/enable.m4 \\\n+\t$(top_srcdir)/../config/lead-dot.m4 \\\n+\t$(top_srcdir)/../config/tls.m4 $(top_srcdir)/acinclude.m4 \\\n \t$(top_srcdir)/../libtool.m4 $(top_srcdir)/configure.ac\n am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \\\n \t$(ACLOCAL_M4)"}]}