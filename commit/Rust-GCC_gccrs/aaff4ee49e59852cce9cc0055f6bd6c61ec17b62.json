{"sha": "aaff4ee49e59852cce9cc0055f6bd6c61ec17b62", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWFmZjRlZTQ5ZTU5ODUyY2NlOWNjMDA1NWY2YmQ2YzYxZWMxN2I2Mg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1998-11-11T22:48:27Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "1998-11-11T22:48:27Z"}, "message": "jvspec.c (GC_NAME): New define.\n\n\t* jvspec.c (GC_NAME): New define.\n\t(lang_specific_driver): Use GC_NAME.  Add GC_NAME to command line\n\tif required.\n\t* Make-lang.in (jvspec.o): Define WITH_GC_<name>.\n\nFrom-SVN: r23612", "tree": {"sha": "b95134ad7e108b793dab5ae19b6a913de62c4c4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b95134ad7e108b793dab5ae19b6a913de62c4c4d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aaff4ee49e59852cce9cc0055f6bd6c61ec17b62", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aaff4ee49e59852cce9cc0055f6bd6c61ec17b62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aaff4ee49e59852cce9cc0055f6bd6c61ec17b62", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aaff4ee49e59852cce9cc0055f6bd6c61ec17b62/comments", "author": null, "committer": null, "parents": [{"sha": "df37e3db8e3296b10abee765fbe8a9daf25d173a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df37e3db8e3296b10abee765fbe8a9daf25d173a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df37e3db8e3296b10abee765fbe8a9daf25d173a"}], "stats": {"total": 26, "additions": 21, "deletions": 5}, "files": [{"sha": "061016083399898117550cc245430b60908e9407", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aaff4ee49e59852cce9cc0055f6bd6c61ec17b62/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aaff4ee49e59852cce9cc0055f6bd6c61ec17b62/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=aaff4ee49e59852cce9cc0055f6bd6c61ec17b62", "patch": "@@ -1,3 +1,10 @@\n+1998-11-11  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* jvspec.c (GC_NAME): New define.\n+\t(lang_specific_driver): Use GC_NAME.  Add GC_NAME to command line\n+\tif required.\n+\t* Make-lang.in (jvspec.o): Define WITH_GC_<name>.\n+\n Wed Nov 11 19:08:52 1998  Per Bothner  <bothner@cygnus.com>\n \n \t* jcf-dump.c (TABLE_SWITCH):  Fix typos."}, {"sha": "6c37ef63c13e7e7a925da0040f206ad552da23f1", "filename": "gcc/java/Make-lang.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aaff4ee49e59852cce9cc0055f6bd6c61ec17b62/gcc%2Fjava%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aaff4ee49e59852cce9cc0055f6bd6c61ec17b62/gcc%2Fjava%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FMake-lang.in?ref=aaff4ee49e59852cce9cc0055f6bd6c61ec17b62", "patch": "@@ -84,7 +84,7 @@ $(GCJ).c: $(srcdir)/gcc.c\n \t$(LN_S) $(srcdir)/gcc.c $@\n \n jvspec.o: $(srcdir)/java/jvspec.c\n-\t$(CC) -c -DWITH_THREAD_$(GCC_THREAD_FILE) \\\n+\t$(CC) -c -DWITH_THREAD_$(GCC_THREAD_FILE) -DWITH_GC_$(JAVAGC) \\\n \t\t$(ALL_CFLAGS) $(ALL_CPPFLAGS) \\\n \t\t$(INCLUDES) $(srcdir)/java/jvspec.c\n "}, {"sha": "4b44ba0635a6d8438963397e7db11d9d74f7bd70", "filename": "gcc/java/jvspec.c", "status": "modified", "additions": 13, "deletions": 4, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aaff4ee49e59852cce9cc0055f6bd6c61ec17b62/gcc%2Fjava%2Fjvspec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aaff4ee49e59852cce9cc0055f6bd6c61ec17b62/gcc%2Fjava%2Fjvspec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjvspec.c?ref=aaff4ee49e59852cce9cc0055f6bd6c61ec17b62", "patch": "@@ -35,6 +35,10 @@ The Free Software Foundation is independent of Sun Microsystems, Inc.  */\n #define THREAD_NAME \"-lqthreads\"\n #endif\n \n+#if defined (WITH_GC_boehm)\n+#define GC_NAME \"-lgc\"\n+#endif\n+\n /* This bit is set if we saw a `-xfoo' language specification.  */\n #define LANGSPEC\t(1<<1)\n /* This bit is set if they did `-lm' or `-lmath'.  */\n@@ -231,7 +235,7 @@ lang_specific_driver (fn, in_argc, in_argv, in_added_libraries)\n \t    saw_libjava = 1;\n \t  else if (strcmp (argv[i], \"-lc\") == 0)\n \t    args[i] |= WITHLIBC;\n-\t  else if (strcmp (argv[i], \"-lgc\") == 0)\n+\t  else if (strcmp (argv[i], GC_NAME) == 0)\n \t    args[i] |= GCLIB;\n #ifdef THREAD_NAME\n \t  else if (strcmp (argv[i], THREAD_NAME) == 0)\n@@ -372,7 +376,7 @@ lang_specific_driver (fn, in_argc, in_argv, in_added_libraries)\n     {\n       lang_specific_extra_outfiles++;\n     }\n-  arglist = (char **) xmalloc ((num_args + 1) * sizeof (char *));\n+  arglist = (char **) xmalloc ((num_args + 4) * sizeof (char *));\n \n   for (i = 0, j = 0; i < argc; i++, j++)\n     {\n@@ -474,10 +478,15 @@ lang_specific_driver (fn, in_argc, in_argv, in_added_libraries)\n       added_libraries++;\n     }\n \n-  /* FIXME: we need a way to know when the GC library should be\n-     added.  Then we can add it if the user hasn't already.  */\n   if (saw_gc)\n     arglist[j++] = saw_gc;\n+#ifdef GC_NAME\n+  else if (library)\n+    {\n+      arglist[j++] = GC_NAME;\n+      added_libraries++;\n+    }\n+#endif\n \n   /* Thread library must come after GC library as well as after\n      -ljava.  */"}]}