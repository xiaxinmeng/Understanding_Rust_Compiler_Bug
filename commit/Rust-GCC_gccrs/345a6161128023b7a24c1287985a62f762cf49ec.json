{"sha": "345a6161128023b7a24c1287985a62f762cf49ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzQ1YTYxNjExMjgwMjNiN2EyNGMxMjg3OTg1YTYyZjc2MmNmNDllYw==", "commit": {"author": {"name": "David S. Miller", "email": "davem@gcc.gnu.org", "date": "1998-09-24T02:44:55Z"}, "committer": {"name": "David S. Miller", "email": "davem@gcc.gnu.org", "date": "1998-09-24T02:44:55Z"}, "message": "[multiple changes]\n\nThu Sep 24 01:35:34 1998  David S. Miller  <davem@pierdol.cobaltmicro.com>\n\t* config/sparc/sol2-sld-64.h (TRANSFER_FROM_TRAMPOLINE): Define.\n\t* config/sparc/sparc.c (sparc64_initialize_trampoline): If that is\n\tdefined, emit libcall to __enable_execute_stack.  Also fix opcodes\n\tand offsets in actual stack trampoline code so they match the\n\tcommentary and actually work.\nThu Sep 24 01:19:02 1998  Jakub Jelinek  <jj@sunsite.ms.mff.cuni.cz>\n\t* configure.in (sparcv9-*-solaris): Use t-sol2 and t-sol2-64 for\n\ttmake_file.\n\t(sparc64-*-linux): Use t-linux and sparc/t-linux64 for\n\ttmake_file.  Set extra_parts to needed crt objects.\n\t* configure: Rebuilt.\n\t* config/sparc/linux64.h (SPARC_BI_ARCH): Define.\n\t(TARGET_DEFAULT): Set if default is v9 or ultra.\n\t(STARTFILE_SPEC32, STARTFILE_SPEC64): New macros.\n\t(STARTFILE_SPEC): Set to those upon SPARC_BI_ARCH.\n\t(ENDFILE_SPEC32, ENDFILE_SPEC64, ENDFILE_SPEC): Likewise.\n\t(SUBTARGET_EXTRA_SPECS, LINK_ARCH32_SPEC, LINK_ARCH64_SPEC,\n\tLINK_SPEC, LINK_ARCH_SPEC): Likewise.\n\t(TARGET_VERSION): Define.\n\t(MULTILIB_DEFAULT): Define.\n\t* config/sparc/sparc.h (CPP_CPU_DEFAULT_SPEC): Rearrange so that\n\tmixed 32/64 bit compilers based upon SPARC_BI_ARCH work.\n\t(CPP_CPU64_DEFAULT_SPEC, CPP_CPU32_DEFAULT_SEC): Define\n\tappropriately.\n\t(TARGET_SWITCHES): Allow ptr32/ptr64 options once more.\n\t* config/sparc/sparc.c (sparc_override_options): If arch and\n\tpointer size disagree, emit diagnostic and fix it up.  If\n\tSPARC_BI_ARCH and TARGET_ARCH32, set cmodel to CM_32.  Turn off\n\tV8PLUS in 64-bit mode.\n\t* config/sparc/t-linux64: New file.\n\t* config/sparc/t-sol2-64: New file.\n\t* config/sparc/t-sol2: Adjust build rules to use MULTILIB_CFLAGS.\n\t* config/sparc/sol2-sld-64.h (SPARC_BI_ARCH): Define.\n\t(ASM_CPU32_DEFAULT_SPEC, ASM_CPU64_DEFAULT_SPEC,\n\tCPP_CPU32_DEFAULT_SPEC, CPP_CPU64_DEFAULT_SPEC): Define.\n\t(ASM_SPEC, CPP_CPU_SPEC): Set appropriately based upon those.\n\t(STARTFILE_SPEC32, STARTFILE_SPEC32, STARTFILE_ARCH_SPEC):\n\tDefine.\n\t(STARTFILE_SPEC): Set approriately based upon those.\n\t(CPP_CPU_DEFAULT_SPEC, ASM_CPU_DEFAULT_SPEC): Set based upon\n\tdisposition of DEFAULT_ARCH32_P.\n\t(LINK_ARCH32_SPEC, LINK_ARCH64_SPEC): Define.\n\t(LINK_ARCH_SPEC, LINK_ARCH_DEFAULT_SPEC): Set based upon those.\n\t(CC1_SPEC, MULTILIB_DEFAULTS): Set based upon DEFAULT_ARCH32_P.\n\t(MD_STARTFILE_PREFIX): Set correctly based upon SPARC_BI_ARCH.\n\t* config/sparc/xm-sysv4-64.h (HOST_BITS_PER_LONG): Only set on\n\tarch64/v9.\n\t* config/sparc/xm-sp64.h (HOST_BITS_PER_LONG): Likewise.\n\nFrom-SVN: r22565", "tree": {"sha": "ccabaa4bdfb06ec166cddcefdd27f29fe835a5b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ccabaa4bdfb06ec166cddcefdd27f29fe835a5b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/345a6161128023b7a24c1287985a62f762cf49ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/345a6161128023b7a24c1287985a62f762cf49ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/345a6161128023b7a24c1287985a62f762cf49ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/345a6161128023b7a24c1287985a62f762cf49ec/comments", "author": null, "committer": null, "parents": [{"sha": "8d9716c63aee56535ef6ec7fabd75b530d30d579", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d9716c63aee56535ef6ec7fabd75b530d30d579", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d9716c63aee56535ef6ec7fabd75b530d30d579"}], "stats": {"total": 868, "additions": 676, "deletions": 192}, "files": [{"sha": "0c2c7fba96c5ce7b8c9b8ac1f7cc94d5a94caaba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 53, "deletions": 0, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -1,3 +1,56 @@\n+Thu Sep 24 01:35:34 1998  David S. Miller  <davem@pierdol.cobaltmicro.com>\n+\n+\t* config/sparc/sol2-sld-64.h (TRANSFER_FROM_TRAMPOLINE): Define.\n+\t* config/sparc/sparc.c (sparc64_initialize_trampoline): If that is\n+\tdefined, emit libcall to __enable_execute_stack.  Also fix opcodes\n+\tand offsets in actual stack trampoline code so they match the\n+\tcommentary and actually work.\n+\n+Thu Sep 24 01:19:02 1998  Jakub Jelinek  <jj@sunsite.ms.mff.cuni.cz>\n+\n+\t* configure.in (sparcv9-*-solaris): Use t-sol2 and t-sol2-64 for\n+\ttmake_file.\n+\t(sparc64-*-linux): Use t-linux and sparc/t-linux64 for\n+\ttmake_file.  Set extra_parts to needed crt objects.\n+\t* configure: Rebuilt.\n+\t* config/sparc/linux64.h (SPARC_BI_ARCH): Define.\n+\t(TARGET_DEFAULT): Set if default is v9 or ultra.\n+\t(STARTFILE_SPEC32, STARTFILE_SPEC64): New macros.\n+\t(STARTFILE_SPEC): Set to those upon SPARC_BI_ARCH.\n+\t(ENDFILE_SPEC32, ENDFILE_SPEC64, ENDFILE_SPEC): Likewise.\n+\t(SUBTARGET_EXTRA_SPECS, LINK_ARCH32_SPEC, LINK_ARCH64_SPEC,\n+\tLINK_SPEC, LINK_ARCH_SPEC): Likewise.\n+\t(TARGET_VERSION): Define.\n+\t(MULTILIB_DEFAULT): Define.\n+\t* config/sparc/sparc.h (CPP_CPU_DEFAULT_SPEC): Rearrange so that\n+\tmixed 32/64 bit compilers based upon SPARC_BI_ARCH work.\n+\t(CPP_CPU64_DEFAULT_SPEC, CPP_CPU32_DEFAULT_SEC): Define\n+\tappropriately.\n+\t(TARGET_SWITCHES): Allow ptr32/ptr64 options once more.\n+\t* config/sparc/sparc.c (sparc_override_options): If arch and\n+\tpointer size disagree, emit diagnostic and fix it up.  If\n+\tSPARC_BI_ARCH and TARGET_ARCH32, set cmodel to CM_32.  Turn off\n+\tV8PLUS in 64-bit mode.\n+\t* config/sparc/t-linux64: New file.\n+\t* config/sparc/t-sol2-64: New file.\n+\t* config/sparc/t-sol2: Adjust build rules to use MULTILIB_CFLAGS.\n+\t* config/sparc/sol2-sld-64.h (SPARC_BI_ARCH): Define.\n+\t(ASM_CPU32_DEFAULT_SPEC, ASM_CPU64_DEFAULT_SPEC,\n+\tCPP_CPU32_DEFAULT_SPEC, CPP_CPU64_DEFAULT_SPEC): Define.\n+\t(ASM_SPEC, CPP_CPU_SPEC): Set appropriately based upon those.\n+\t(STARTFILE_SPEC32, STARTFILE_SPEC32, STARTFILE_ARCH_SPEC):\n+\tDefine.\n+\t(STARTFILE_SPEC): Set approriately based upon those.\n+\t(CPP_CPU_DEFAULT_SPEC, ASM_CPU_DEFAULT_SPEC): Set based upon\n+\tdisposition of DEFAULT_ARCH32_P.\n+\t(LINK_ARCH32_SPEC, LINK_ARCH64_SPEC): Define.\n+\t(LINK_ARCH_SPEC, LINK_ARCH_DEFAULT_SPEC): Set based upon those.\n+\t(CC1_SPEC, MULTILIB_DEFAULTS): Set based upon DEFAULT_ARCH32_P.\n+\t(MD_STARTFILE_PREFIX): Set correctly based upon SPARC_BI_ARCH.\n+\t* config/sparc/xm-sysv4-64.h (HOST_BITS_PER_LONG): Only set on\n+\tarch64/v9.\n+\t* config/sparc/xm-sp64.h (HOST_BITS_PER_LONG): Likewise.\n+\t\n Wed Sep 23 22:32:31 1998  Mark Mitchell  <mark@markmitchell.com>\n \n \t* rtl.h (init_virtual_regs): New function."}, {"sha": "ed8c3ec3d5573521015e3ee4c8b072132a5e70a5", "filename": "gcc/config/sparc/linux64.h", "status": "modified", "additions": 137, "deletions": 16, "changes": 153, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Flinux64.h?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -19,9 +19,7 @@ along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n-/* ??? bi-architecture support will require changes to the linker\n-   related specs, among perhaps other things (multilibs).  */\n-/* #define SPARC_BI_ARCH */\n+#define SPARC_BI_ARCH\n \n #define LINUX_DEFAULT_ELF\n \n@@ -36,6 +34,16 @@ Boston, MA 02111-1307, USA.  */\n #undef MD_EXEC_PREFIX\n #undef MD_STARTFILE_PREFIX\n \n+#if TARGET_CPU_DEFAULT == TARGET_CPU_v9 || TARGET_CPU_DEFAULT == TARGET_CPU_ultrasparc\n+/* A 64 bit v9 compiler with stack-bias,\n+   in a Medium/Low code model environment.  */\n+\n+#undef TARGET_DEFAULT\n+#define TARGET_DEFAULT \\\n+  (MASK_V9 + MASK_PTR64 + MASK_64BIT /* + MASK_HARD_QUAD */ \\\n+   + MASK_STACK_BIAS + MASK_APP_REGS + MASK_EPILOGUE + MASK_FPU)\n+#endif\n+\n /* Output at beginning of assembler file.  */\n /* The .file command should always begin the output.  */\n #undef ASM_FILE_START\n@@ -54,31 +62,73 @@ Boston, MA 02111-1307, USA.  */\n    object constructed before entering `main'. */\n    \n #undef  STARTFILE_SPEC\n-#define STARTFILE_SPEC \\\n+\n+#define STARTFILE_SPEC32 \\\n   \"%{!shared: \\\n      %{pg:gcrt1.o%s} %{!pg:%{p:gcrt1.o%s} %{!p:crt1.o%s}}}\\\n    crti.o%s %{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}\"\n \n+#define STARTFILE_SPEC64 \\\n+  \"%{!shared: \\\n+     %{pg:/usr/lib64/gcrt1.o%s} %{!pg:%{p:/usr/lib64/gcrt1.o%s} %{!p:/usr/lib64/crt1.o%s}}}\\\n+   /usr/lib64/crti.o%s %{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}\"\n+   \n+#ifdef SPARC_BI_ARCH\n+\n+#if DEFAULT_ARCH32_P\n+#define STARTFILE_SPEC \"\\\n+%{m32:\" STARTFILE_SPEC32 \"} \\\n+%{m64:\" STARTFILE_SPEC64 \"} \\\n+%{!m32:%{!m64:\" STARTFILE_SPEC32 \"}}\"\n+#else\n+#define STARTFILE_SPEC \"\\\n+%{m32:\" STARTFILE_SPEC32 \"} \\\n+%{m64:\" STARTFILE_SPEC64 \"} \\\n+%{!m32:%{!m64:\" STARTFILE_SPEC64 \"}}\"\n+#endif\n+\n+#else\n+\n+#define STARTFILE_SPEC STARTFILE_SPEC64\n+\n+#endif\n+\n /* Provide a ENDFILE_SPEC appropriate for GNU/Linux.  Here we tack on\n    the GNU/Linux magical crtend.o file (see crtstuff.c) which\n    provides part of the support for getting C++ file-scope static\n    object constructed before entering `main', followed by a normal\n    GNU/Linux \"finalizer\" file, `crtn.o'.  */\n \n #undef  ENDFILE_SPEC\n-#define ENDFILE_SPEC \\\n+\n+#define ENDFILE_SPEC32 \\\n   \"%{!shared:crtend.o%s} %{shared:crtendS.o%s} crtn.o%s\"\n \n-#undef TARGET_VERSION\n-#define TARGET_VERSION fprintf (stderr, \" (sparc64 GNU/Linux with ELF)\");\n+#define ENDFILE_SPEC64 \\\n+  \"%{!shared:crtend.o%s} %{shared:crtendS.o%s} /usr/lib64/crtn.o%s\"\n+  \n+#ifdef SPARC_BI_ARCH\n \n-/* A 64 bit v9 compiler with stack-bias,\n-   in a Medium/Anywhere code model environment.  */\n+#if DEFAULT_ARCH32_P\n+#define ENDFILE_SPEC \"\\\n+%{m32:\" ENDFILE_SPEC32 \"} \\\n+%{m64:\" ENDFILE_SPEC64 \"} \\\n+%{!m32:%{!m64:\" ENDFILE_SPEC32 \"}}\"\n+#else\n+#define ENDFILE_SPEC \"\\\n+%{m32:\" ENDFILE_SPEC32 \"} \\\n+%{m64:\" ENDFILE_SPEC64 \"} \\\n+%{!m32:%{!m64:\" ENDFILE_SPEC64 \"}}\"\n+#endif\n \n-#undef TARGET_DEFAULT\n-#define TARGET_DEFAULT \\\n-  (MASK_V9 + MASK_PTR64 + MASK_64BIT /* + MASK_HARD_QUAD */ \\\n-   + MASK_STACK_BIAS + MASK_APP_REGS + MASK_EPILOGUE + MASK_FPU)\n+#else\n+\n+#define ENDFILE_SPEC ENDFILE_SPEC64\n+\n+#endif\n+\n+#undef TARGET_VERSION\n+#define TARGET_VERSION fprintf (stderr, \" (sparc64 GNU/Linux with ELF)\");\n \n /* The default code model.  */\n #undef SPARC_DEFAULT_CMODEL\n@@ -92,7 +142,7 @@ Boston, MA 02111-1307, USA.  */\n \n #undef LONG_DOUBLE_TYPE_SIZE\n #define LONG_DOUBLE_TYPE_SIZE 128\n-    \n+\n #undef CPP_PREDEFINES\n #define CPP_PREDEFINES \"-D__ELF__ -Dunix -Dsparc -Dlinux -Asystem(unix) -Asystem(posix)\"\n \n@@ -126,17 +176,88 @@ Boston, MA 02111-1307, USA.  */\n \n /* If ELF is the default format, we should not use /lib/elf. */\n \n+#ifdef SPARC_BI_ARCH\n+\n+#undef SUBTARGET_EXTRA_SPECS\n+#define SUBTARGET_EXTRA_SPECS \\\n+  { \"link_arch32\",       LINK_ARCH32_SPEC },              \\\n+  { \"link_arch64\",       LINK_ARCH64_SPEC },              \\\n+  { \"link_arch_default\", LINK_ARCH_DEFAULT_SPEC },\t  \\\n+  { \"link_arch\",\t LINK_ARCH_SPEC },\n+    \n+#define LINK_ARCH32_SPEC \"-m elf32_sparc -Y P,/usr/lib %{shared:-shared} \\\n+  %{!shared: \\\n+    %{!ibcs: \\\n+      %{!static: \\\n+        %{rdynamic:-export-dynamic} \\\n+        %{!dynamic-linker:-dynamic-linker /lib/ld-linux.so.2}} \\\n+        %{static:-static}}} \\\n+\"\n+\n+#define LINK_ARCH64_SPEC \"-m elf64_sparc -Y P,/usr/lib64 %{shared:-shared} \\\n+  %{!shared: \\\n+    %{!ibcs: \\\n+      %{!static: \\\n+        %{rdynamic:-export-dynamic} \\\n+        %{!dynamic-linker:-dynamic-linker /lib64/ld-linux.so.2}} \\\n+        %{static:-static}}} \\\n+\"\n+\n+#define LINK_ARCH_SPEC \"\\\n+%{m32:%(link_arch32)} \\\n+%{m64:%(link_arch64)} \\\n+%{!m32:%{!m64:%(link_arch_default)}} \\\n+\"\n+\n+#define LINK_ARCH_DEFAULT_SPEC \\\n+(DEFAULT_ARCH32_P ? LINK_ARCH32_SPEC : LINK_ARCH64_SPEC)\n+\n #undef  LINK_SPEC\n-#define LINK_SPEC \"-m elf64_sparc -Y P,/usr/lib %{shared:-shared} \\\n+#define LINK_SPEC \"\\\n+%(link_arch) \\\n+%{mlittle-endian:-EL} \\\n+\"\n+\n+#undef\tCC1_SPEC\n+#if DEFAULT_ARCH32_P\n+#define CC1_SPEC \"\\\n+%{sun4:} %{target:} \\\n+%{mcypress:-mcpu=cypress} \\\n+%{msparclite:-mcpu=sparclite} %{mf930:-mcpu=f930} %{mf934:-mcpu=f934} \\\n+%{mv8:-mcpu=v8} %{msupersparc:-mcpu=supersparc} \\\n+%{m64:-mptr64 -mcpu=ultrasparc -mstack-bias} \\\n+\"\n+#else\n+#define CC1_SPEC \"\\\n+%{sun4:} %{target:} \\\n+%{mcypress:-mcpu=cypress} \\\n+%{msparclite:-mcpu=sparclite} %{mf930:-mcpu=f930} %{mf934:-mcpu=f934} \\\n+%{mv8:-mcpu=v8} %{msupersparc:-mcpu=supersparc} \\\n+%{m32:-mptr32 -mcpu=cypress -mno-stack-bias} \\\n+\"\n+#endif\n+\n+#if DEFAULT_ARCH32_P\n+#define MULTILIB_DEFAULTS { \"m32\" }\n+#else\n+#define MULTILIB_DEFAULTS { \"m64\" }\n+#endif\n+\n+#else /* !SPARC_BI_ARCH */\n+\n+#undef LINK_SPEC\n+#define LINK_ARCH_SPEC \"-m elf64_sparc -Y P,/usr/lib64 %{shared:-shared} \\\n   %{!shared: \\\n     %{!ibcs: \\\n       %{!static: \\\n         %{rdynamic:-export-dynamic} \\\n-        %{!dynamic-linker:-dynamic-linker /lib/ld-linux64.so.2}} \\\n+        %{!dynamic-linker:-dynamic-linker /lib64/ld-linux.so.2}} \\\n         %{static:-static}}} \\\n %{mlittle-endian:-EL} \\\n \"\n \n+#endif /* !SPARC_BI_ARCH */\n+\n /* The sun bundled assembler doesn't accept -Yd, (and neither does gas).\n    It's safe to pass -s always, even if -g is not used. */\n #undef ASM_SPEC"}, {"sha": "7364cbb84e8377e370fff8746f14489f8ddc152b", "filename": "gcc/config/sparc/sol2-sld-64.h", "status": "modified", "additions": 244, "deletions": 40, "changes": 284, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Fsol2-sld-64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Fsol2-sld-64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsol2-sld-64.h?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -1,6 +1,8 @@\n /* Definitions of target machine for GNU compiler, for 64-bit SPARC\n    running Solaris 2 using the system linker.  */\n \n+#define SPARC_BI_ARCH\n+\n #include \"sparc/sol2.h\"\n \n /* At least up through Solaris 2.6,\n@@ -12,14 +14,12 @@\n \n /* A 64 bit v9 compiler with stack-bias */\n \n+#if TARGET_CPU_DEFAULT == TARGET_CPU_v9 || TARGET_CPU_DEFAULT == TARGET_CPU_ultrasparc\n #undef TARGET_DEFAULT\n #define TARGET_DEFAULT \\\n   (MASK_V9 + MASK_PTR64 + MASK_64BIT /* + MASK_HARD_QUAD */ + \\\n    MASK_STACK_BIAS + MASK_APP_REGS + MASK_EPILOGUE + MASK_FPU)\n-\n-/* ??? bi-architecture support will require changes to the linker\n-   related specs, among perhaps other things (multilibs).  */\n-/* #define SPARC_BI_ARCH */\n+#endif\n \n /* The default code model.  */\n #undef SPARC_DEFAULT_CMODEL\n@@ -28,58 +28,243 @@\n #undef LONG_DOUBLE_TYPE_SIZE\n #define LONG_DOUBLE_TYPE_SIZE 128\n \n+#undef ASM_CPU32_DEFAULT_SPEC\n+#define ASM_CPU32_DEFAULT_SPEC\t\"\"\n+#undef ASM_CPU64_DEFAULT_SPEC\n+#define ASM_CPU64_DEFAULT_SPEC\t\"-xarch=v9\"\n+\n #if TARGET_CPU_DEFAULT == TARGET_CPU_v9\n-#undef CPP_CPU_DEFAULT_SPEC\n-#define CPP_CPU_DEFAULT_SPEC \"-D__sparcv9\"\n-#undef ASM_CPU_DEFAULT_SPEC\n-#define ASM_CPU_DEFAULT_SPEC \"-xarch=v9\"\n-#undef CPP_CPU_SPEC\n-#define CPP_CPU_SPEC \"\\\n-%{mcypress:} \\\n-%{msparclite:-D__sparclite__} \\\n-%{mf930:-D__sparclite__} %{mf934:-D__sparclite__} \\\n-%{mv8:-D__sparcv8} \\\n-%{msupersparc:-D__supersparc__ -D__sparcv8} \\\n-%{mcpu=sparclet:-D__sparclet__} %{mcpu=tsc701:-D__sparclet__} \\\n-%{mcpu=sparclite:-D__sparclite__} \\\n-%{mcpu=f930:-D__sparclite__} %{mcpu=f934:-D__sparclite__} \\\n-%{mcpu=v8:-D__sparc_v8__} \\\n-%{mcpu=supersparc:-D__supersparc__ -D__sparcv8} \\\n-%{mcpu=v9:-D__sparcv9} \\\n-%{mcpu=ultrasparc:-D__sparcv9} \\\n-%{!mcpu*:%{!mcypress:%{!msparclite:%{!mf930:%{!mf934:%{!mv8:%{!msupersparc:%(cpp_cpu_default)}}}}}}} \\\n-\"\n+#undef CPP_CPU64_DEFAULT_SPEC\n+#define CPP_CPU64_DEFAULT_SPEC \"\"\n+#undef ASM_CPU32_DEFAULT_SPEC\n+#define ASM_CPU32_DEFAULT_SPEC \"-xarch=v8plus\"\n #endif\n #if TARGET_CPU_DEFAULT == TARGET_CPU_ultrasparc\n-#undef CPP_CPU_DEFAULT_SPEC\n-#define CPP_CPU_DEFAULT_SPEC \"-D__sparcv9\"\n-#undef ASM_CPU_DEFAULT_SPEC\n-#define ASM_CPU_DEFAULT_SPEC \"-xarch=v9a\"\n+#undef CPP_CPU64_DEFAULT_SPEC\n+#define CPP_CPU64_DEFAULT_SPEC \"\"\n+#undef ASM_CPU32_DEFAULT_SPEC\n+#define ASM_CPU32_DEFAULT_SPEC \"-xarch=v8plusa\"\n+#undef ASM_CPU64_DEFAULT_SPEC\n+#define ASM_CPU64_DEFAULT_SPEC \"-xarch=v9a\"\n+#endif\n+\n+/* The sun bundled assembler doesn't accept -Yd, (and neither does gas).\n+   It's safe to pass -s always, even if -g is not used. */\n+#undef ASM_SPEC\n+#define ASM_SPEC \"\\\n+%{v:-V} %{Qy:} %{!Qn:-Qy} %{n} %{T} %{Ym,*} %{Wa,*:%*} -s \\\n+%{fpic:-K PIC} %{fPIC:-K PIC} \\\n+%(asm_cpu)\\\n+\"\n+\n+#if DEFAULT_ARCH32_P\n+#define DEF_ARCH32_SPEC(__str) \"%{!m64:\" __str \"}\"\n+#define DEF_ARCH64_SPEC(__str) \"%{m64:\" __str \"}\"\n+#else\n+#define DEF_ARCH32_SPEC(__str) \"%{m32:\" __str \"}\"\n+#define DEF_ARCH64_SPEC(__str) \"%{!m32:\" __str \"}\"\n+#endif\n+\n #undef CPP_CPU_SPEC\n #define CPP_CPU_SPEC \"\\\n %{mcypress:} \\\n %{msparclite:-D__sparclite__} \\\n %{mf930:-D__sparclite__} %{mf934:-D__sparclite__} \\\n-%{mv8:-D__sparcv8} \\\n-%{msupersparc:-D__supersparc__ -D__sparcv8} \\\n+%{mv8:\" DEF_ARCH32_SPEC(\"-D__sparcv8\") \"} \\\n+%{msupersparc:-D__supersparc__ \" DEF_ARCH32_SPEC(\"-D__sparcv8\") \"} \\\n %{mcpu=sparclet:-D__sparclet__} %{mcpu=tsc701:-D__sparclet__} \\\n %{mcpu=sparclite:-D__sparclite__} \\\n %{mcpu=f930:-D__sparclite__} %{mcpu=f934:-D__sparclite__} \\\n-%{mcpu=v8:-D__sparc_v8__} \\\n-%{mcpu=supersparc:-D__supersparc__ -D__sparcv8} \\\n-%{mcpu=v9:-D__sparcv9} \\\n-%{mcpu=ultrasparc:-D__sparcv9} \\\n+%{mcpu=v8:\" DEF_ARCH32_SPEC(\"-D__sparcv8\") \"} \\\n+%{mcpu=supersparc:-D__supersparc__ \" DEF_ARCH32_SPEC(\"-D__sparcv8\") \"} \\\n+%{mcpu=v9:\" DEF_ARCH32_SPEC(\"-D__sparcv8\") \"} \\\n+%{mcpu=ultrasparc:\" DEF_ARCH32_SPEC(\"-D__sparcv8\") \"} \\\n %{!mcpu*:%{!mcypress:%{!msparclite:%{!mf930:%{!mf934:%{!mv8:%{!msupersparc:%(cpp_cpu_default)}}}}}}} \\\n \"\n-#endif\n \n #undef ASM_CPU_SPEC\n-#define ASM_CPU_SPEC \"\\\n-%{mcpu=v8plus:-xarch=v8plus} \\\n-%{mcpu=ultrasparc:-xarch=v9a} \\\n+#define ASM_CPU_SPEC \"\n+%{mcpu=ultrasparc:\" DEF_ARCH32_SPEC(\"-xarch=v8plusa\") DEF_ARCH64_SPEC(\"-xarch=v9a\") \"} \\\n+%{mcpu=v9:\" DEF_ARCH32_SPEC(\"-xarch=v8plus\") DEF_ARCH64_SPEC(\"-xarch=v9\") \"} \\\n+%{!mcpu=ultrasparc:%{!mcpu=v9:%{mcpu*:\" DEF_ARCH32_SPEC(\"-xarch=v8\") DEF_ARCH64_SPEC(\"-xarch=v9\") \"}}} \\\n %{!mcpu*:%(asm_cpu_default)} \\\n \"\n \n+#define STARTFILE_SPEC32 \"\\\n+%{ansi:values-Xc.o%s} \\\n+%{!ansi: \\\n+ %{traditional:values-Xt.o%s} \\\n+ %{!traditional:values-Xa.o%s}}\"\n+\n+#define STARTFILE_SPEC64 \"\\\n+%{ansi:/usr/lib/sparcv9/values-Xc.o%s} \\\n+%{!ansi: \\\n+ %{traditional:/usr/lib/sparcv9/values-Xt.o%s} \\\n+ %{!traditional:/usr/lib/sparcv9/values-Xa.o%s}}\"\n+ \n+#ifdef SPARC_BI_ARCH\n+\n+#if DEFAULT_ARCH32_P\n+#define STARTFILE_ARCH_SPEC \"\\\n+%{m32:\" STARTFILE_SPEC32 \"} \\\n+%{m64:\" STARTFILE_SPEC64 \"} \\\n+%{!m32:%{!m64:\" STARTFILE_SPEC32 \"}}\"\n+#else\n+#define STARTFILE_ARCH_SPEC \"\\\n+%{m32:\" STARTFILE_SPEC32 \"} \\\n+%{m64:\" STARTFILE_SPEC64 \"} \\\n+%{!m32:%{!m64:\" STARTFILE_SPEC64 \"}}\"\n+#endif\n+\n+#else /* !SPARC_BI_ARCH */\n+\n+/* In this case we define MD_STARTFILE_PREFIX to /usr/lib/sparcv9/ */\n+#define STARTFILE_ARCH_SPEC STARTFILE_SPEC32\n+\n+#endif /* !SPARC_BI_ARCH */\n+\n+#undef STARTFILE_SPEC\n+#define STARTFILE_SPEC \"%{!shared: \\\n+\t\t\t %{!symbolic: \\\n+\t\t\t  %{p:mcrt1.o%s} \\\n+                          %{!p: \\\n+\t                    %{pg:gcrt1.o%s gmon.o%s} \\\n+                            %{!pg:crt1.o%s}}}} \\\n+\t\t\tcrti.o%s\" STARTFILE_ARCH_SPEC \" \\\n+\t\t\tcrtbegin.o%s\"\n+\n+#ifdef SPARC_BI_ARCH\n+\n+#undef CPP_CPU_DEFAULT_SPEC\n+#define CPP_CPU_DEFAULT_SPEC \\\n+(DEFAULT_ARCH32_P ? \"\\\n+%{m64:\" CPP_CPU64_DEFAULT_SPEC \"} \\\n+%{!m64:\" CPP_CPU32_DEFAULT_SPEC \"} \\\n+\" : \"\\\n+%{m32:\" CPP_CPU32_DEFAULT_SPEC \"} \\\n+%{!m32:\" CPP_CPU64_DEFAULT_SPEC \"} \\\n+\")\n+\n+#undef ASM_CPU_DEFAULT_SPEC\n+#define ASM_CPU_DEFAULT_SPEC \\\n+(DEFAULT_ARCH32_P ? \"\\\n+%{m64:\" ASM_CPU64_DEFAULT_SPEC \"} \\\n+%{!m64:\" ASM_CPU32_DEFAULT_SPEC \"} \\\n+\" : \"\\\n+%{m32:\" ASM_CPU32_DEFAULT_SPEC \"} \\\n+%{!m32:\" ASM_CPU64_DEFAULT_SPEC \"} \\\n+\")\n+\n+#undef CPP_ARCH32_SPEC\n+#define CPP_ARCH32_SPEC \"-D__SIZE_TYPE__=unsigned\\\\ int -D__PTRDIFF_TYPE__=int \\\n+-D__GCC_NEW_VARARGS__ -Acpu(sparc) -Amachine(sparc)\"\n+#undef CPP_ARCH64_SPEC\n+#define CPP_ARCH64_SPEC \"-D__SIZE_TYPE__=long\\\\ unsigned\\\\ int -D__PTRDIFF_TYPE__=long\\\\ int \\\n+-D__arch64__ -Acpu(sparc64) -Amachine(sparcv9) -D__sparcv9\"\n+\n+#undef CPP_ARCH_SPEC\n+#define CPP_ARCH_SPEC \"\\\n+%{m32:%(cpp_arch32)} \\\n+%{m64:%(cpp_arch64)} \\\n+%{!m32:%{!m64:%(cpp_arch_default)}} \\\n+\"\n+\n+#undef ASM_ARCH_SPEC\n+#define ASM_ARCH_SPEC \"\"\n+\n+#undef ASM_ARCH32_SPEC\n+#define ASM_ARCH32_SPEC \"\"\n+\n+#undef ASM_ARCH64_SPEC\n+#define ASM_ARCH64_SPEC \"\"\n+\n+#undef ASM_ARCH_DEFAULT_SPEC\n+#define ASM_ARCH_DEFAULT_SPEC \"\"\n+\n+#undef SUBTARGET_EXTRA_SPECS\n+#define SUBTARGET_EXTRA_SPECS \\\n+  { \"link_arch32\",       LINK_ARCH32_SPEC },              \\\n+  { \"link_arch64\",       LINK_ARCH64_SPEC },              \\\n+  { \"link_arch_default\", LINK_ARCH_DEFAULT_SPEC },\t  \\\n+  { \"link_arch\",\t LINK_ARCH_SPEC },\n+    \n+/* This should be the same as in svr4.h, except with -R added.  */\n+#define LINK_ARCH32_SPEC \\\n+  \"%{G:-G} \\\n+   %{YP,*} \\\n+   %{R*} \\\n+   %{compat-bsd: \\\n+     %{!YP,*:%{p:-Y P,/usr/ucblib:/usr/ccs/lib/libp:/usr/lib/libp:/usr/ccs/lib:/usr/lib} \\\n+       %{pg:-Y P,/usr/ucblib:/usr/ccs/lib/libp:/usr/lib/libp:/usr/ccs/lib:/usr/lib} \\\n+       %{!p:%{!pg:-Y P,/usr/ucblib:/usr/ccs/lib:/usr/lib}}} \\\n+     -R /usr/ucblib} \\\n+   %{!compat-bsd: \\\n+     %{!YP,*:%{p:-Y P,/usr/ccs/lib/libp:/usr/lib/libp:/usr/ccs/lib:/usr/lib} \\\n+       %{pg:-Y P,/usr/ccs/lib/libp:/usr/lib/libp:/usr/ccs/lib:/usr/lib} \\\n+       %{!p:%{!pg:-Y P,/usr/ccs/lib:/usr/lib}}}}\"\n+\n+#define LINK_ARCH64_SPEC \\\n+  \"%{mcmodel=medlow:-M /usr/lib/ld/sparcv9/map.below4G} \\\n+   %{G:-G} \\\n+   %{YP,*} \\\n+   %{R*} \\\n+   %{compat-bsd: \\\n+     %{!YP,*:%{p:-Y P,/usr/ucblib/sparcv9:/usr/lib/libp/sparcv9:/usr/lib/sparcv9} \\\n+       %{pg:-Y P,/usr/ucblib/sparcv9:/usr/lib/libp/sparcv9:/usr/lib/sparcv9} \\\n+       %{!p:%{!pg:-Y P,/usr/ucblib/sparcv9:/usr/lib/sparcv9}}} \\\n+     -R /usr/ucblib} \\\n+   %{!compat-bsd: \\\n+     %{!YP,*:%{p:-Y P,/usr/lib/libp/sparcv9:/usr/lib/sparcv9} \\\n+       %{pg:-Y P,/usr/lib/libp/sparcv9:/usr/lib/sparcv9} \\\n+       %{!p:%{!pg:-Y P,/usr/lib/sparcv9}}}}\"\n+\n+#define LINK_ARCH_SPEC \"\\\n+%{m32:%(link_arch32)} \\\n+%{m64:%(link_arch64)} \\\n+%{!m32:%{!m64:%(link_arch_default)}} \\\n+\"\n+\n+#define LINK_ARCH_DEFAULT_SPEC \\\n+(DEFAULT_ARCH32_P ? LINK_ARCH32_SPEC : LINK_ARCH64_SPEC)\n+\n+#undef  LINK_SPEC\n+#define LINK_SPEC \\\n+  \"%{h*} %{v:-V} \\\n+   %{b} %{Wl,*:%*} \\\n+   %{static:-dn -Bstatic} \\\n+   %{shared:-G -dy %{!mimpure-text:-z text}} \\\n+   %{symbolic:-Bsymbolic -G -dy -z text} \\\n+   %(link_arch) \\\n+   %{Qy:} %{!Qn:-Qy}\"\n+\n+#undef\tCC1_SPEC\n+#if DEFAULT_ARCH32_P\n+#define CC1_SPEC \"\\\n+%{sun4:} %{target:} \\\n+%{mcypress:-mcpu=cypress} \\\n+%{msparclite:-mcpu=sparclite} %{mf930:-mcpu=f930} %{mf934:-mcpu=f934} \\\n+%{mv8:-mcpu=v8} %{msupersparc:-mcpu=supersparc} \\\n+%{m64:-mptr64 -mcpu=v9 -mstack-bias -mno-v8plus} \\\n+\"\n+#else\n+#define CC1_SPEC \"\\\n+%{sun4:} %{target:} \\\n+%{mcypress:-mcpu=cypress} \\\n+%{msparclite:-mcpu=sparclite} %{mf930:-mcpu=f930} %{mf934:-mcpu=f934} \\\n+%{mv8:-mcpu=v8} %{msupersparc:-mcpu=supersparc} \\\n+%{m32:-mptr32 -mcpu=cypress -mno-stack-bias} \\\n+%{mv8plus:-m32 -mptr32 -mcpu=cypress -mno-stack-bias} \\\n+\"\n+#endif\n+\n+#if DEFAULT_ARCH32_P\n+#define MULTILIB_DEFAULTS { \"m32\" }\n+#else\n+#define MULTILIB_DEFAULTS { \"m64\" }\n+#endif\n+\n+#else /* !SPARC_BI_ARCH */\n+\n /*\n  * This should be the same as in sol2-sld.h, except with \"/sparcv9\"\n  * appended to the paths and /usr/ccs/lib is no longer necessary\n@@ -105,6 +290,25 @@\n        %{pg:-Y P,/usr/lib/libp/sparcv9:/usr/lib/sparcv9} \\\n        %{!p:%{!pg:-Y P,/usr/lib/sparcv9}}}} \\\n    %{Qy:} %{!Qn:-Qy}\"\n-\n+   \n #undef MD_STARTFILE_PREFIX\n-#define MD_STARTFILE_PREFIX \"/usr/ccs/lib/sparcv9/\"\n+#define MD_STARTFILE_PREFIX \"/usr/lib/sparcv9/\"\n+\n+/* Attempt to turn on access permissions for the stack.  */\n+\n+#define TRANSFER_FROM_TRAMPOLINE                                       \\\n+void                                                                   \\\n+__enable_execute_stack (addr)                                          \\\n+     void *addr;                                                       \\\n+{                                                                      \\\n+  long size = getpagesize ();                                          \\\n+  long mask = ~(size-1);                                               \\\n+  char *page = (char *) (((long) addr) & mask);                               \\\n+  char *end  = (char *) ((((long) (addr + TRAMPOLINE_SIZE)) & mask) + size); \\\n+                                                                       \\\n+  /* 7 is PROT_READ | PROT_WRITE | PROT_EXEC */                               \\\n+  if (mprotect (page, end - page, 7) < 0)                              \\\n+    perror (\"mprotect of trampoline code\");                            \\\n+}\n+   \n+#endif /* ! SPARC_BI_ARCH */"}, {"sha": "180666bb8173857c95c6c0003b4cd71c283c2c59", "filename": "gcc/config/sparc/sparc.c", "status": "modified", "additions": 28, "deletions": 5, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Fsparc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Fsparc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.c?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -210,7 +210,7 @@ sparc_override_options ()\n   struct cpu_table *cpu;\n   struct sparc_cpu_select *sel;\n   int fpu;\n-\n+  \n #ifndef SPARC_BI_ARCH\n   /* Check for unsupported architecture size.  */\n   if (! TARGET_64BIT != DEFAULT_ARCH32_P)\n@@ -220,8 +220,25 @@ sparc_override_options ()\n     }\n #endif\n \n+  /* At the moment we don't allow different pointer size and architecture */\n+  if (! TARGET_64BIT != ! TARGET_PTR64)\n+    {\n+      error (\"-mptr%d not allowed on -m%d\",\n+      \t     TARGET_PTR64 ? 64 : 32, TARGET_64BIT ? 64 : 32);\n+      if (TARGET_64BIT)\n+    \ttarget_flags |= MASK_PTR64;\n+      else\n+        target_flags &= ~MASK_PTR64;\n+    }\n+\n   /* Code model selection.  */\n   sparc_cmodel = SPARC_DEFAULT_CMODEL;\n+  \n+#ifdef SPARC_BI_ARCH\n+  if (TARGET_ARCH32)\n+    sparc_cmodel = CM_32;\n+#endif\n+\n   if (sparc_cmodel_string != NULL)\n     {\n       if (TARGET_ARCH64)\n@@ -280,8 +297,8 @@ sparc_override_options ()\n   if (TARGET_V9 && TARGET_ARCH32)\n     target_flags |= MASK_DEPRECATED_V8_INSNS;\n \n-  /* V8PLUS requires V9 */\n-  if (! TARGET_V9)\n+  /* V8PLUS requires V9, makes no sense in 64 bit mode.  */\n+  if (! TARGET_V9 || TARGET_ARCH64)\n     target_flags &= ~MASK_V8PLUS;\n \n   /* Don't use stack biasing in 32 bit mode.  */\n@@ -5453,6 +5470,11 @@ void\n sparc64_initialize_trampoline (tramp, fnaddr, cxt)\n      rtx tramp, fnaddr, cxt;\n {\n+#ifdef TRANSFER_FROM_TRAMPOLINE\n+  emit_library_call (gen_rtx (SYMBOL_REF, Pmode, \"__enable_execute_stack\"),\n+                     0, VOIDmode, 1, tramp, Pmode);\n+#endif\n+\n   /*\n \trd\t%pc, %g1\n \tldx\t[%g1+24], %g5\n@@ -5466,12 +5488,13 @@ sparc64_initialize_trampoline (tramp, fnaddr, cxt)\n   emit_move_insn (gen_rtx_MEM (SImode, plus_constant (tramp, 4)),\n \t\t  GEN_INT (0xca586018));\n   emit_move_insn (gen_rtx_MEM (SImode, plus_constant (tramp, 8)),\n-\t\t  GEN_INT (0x81c04000));\n+\t\t  GEN_INT (0x81c14000));\n   emit_move_insn (gen_rtx_MEM (SImode, plus_constant (tramp, 12)),\n \t\t  GEN_INT (0xca586010));\n   emit_move_insn (gen_rtx_MEM (DImode, plus_constant (tramp, 16)), cxt);\n-  emit_move_insn (gen_rtx_MEM (DImode, plus_constant (tramp, 20)), fnaddr);\n+  emit_move_insn (gen_rtx_MEM (DImode, plus_constant (tramp, 24)), fnaddr);\n   emit_insn (gen_flush (validize_mem (gen_rtx_MEM (DImode, tramp))));\n+\n   if (sparc_cpu != PROCESSOR_ULTRASPARC)\n     emit_insn (gen_flush (validize_mem (gen_rtx_MEM (DImode, plus_constant (tramp, 8)))));\n }"}, {"sha": "e09e964f92de7cf8f28983206bbc7d078c858216", "filename": "gcc/config/sparc/sparc.h", "status": "modified", "additions": 72, "deletions": 22, "changes": 94, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Fsparc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Fsparc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.h?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -109,34 +109,74 @@ extern enum cmodel sparc_cmodel;\n #define TARGET_CPU_sparc64\t5\t/* alias */\n #define TARGET_CPU_ultrasparc\t6\n \n-#if TARGET_CPU_DEFAULT == TARGET_CPU_sparc || TARGET_CPU_DEFAULT == TARGET_CPU_v8 || TARGET_CPU_DEFAULT == TARGET_CPU_supersparc\n-#define CPP_CPU_DEFAULT_SPEC \"\"\n-#define ASM_CPU_DEFAULT_SPEC \"\"\n-#endif\n-#if TARGET_CPU_DEFAULT == TARGET_CPU_sparclet\n-#define CPP_CPU_DEFAULT_SPEC \"-D__sparclet__\"\n-#define ASM_CPU_DEFAULT_SPEC \"-Asparclet\"\n-#endif\n-#if TARGET_CPU_DEFAULT == TARGET_CPU_sparclite\n-#define CPP_CPU_DEFAULT_SPEC \"-D__sparclite__\"\n-#define ASM_CPU_DEFAULT_SPEC \"-Asparclite\"\n-#endif\n+#if TARGET_CPU_DEFAULT == TARGET_CPU_v9 || TARGET_CPU_DEFAULT == TARGET_CPU_ultrasparc\n+\n+#define CPP_CPU32_DEFAULT_SPEC \"\"\n+#define ASM_CPU32_DEFAULT_SPEC \"\"\n+\n #if TARGET_CPU_DEFAULT == TARGET_CPU_v9\n /* ??? What does Sun's CC pass?  */\n-#define CPP_CPU_DEFAULT_SPEC \"-D__sparc_v9__\"\n+#define CPP_CPU64_DEFAULT_SPEC \"-D__sparc_v9__\"\n /* ??? It's not clear how other assemblers will handle this, so by default\n    use GAS.  Sun's Solaris assembler recognizes -xarch=v8plus, but this case\n    is handled in sol2.h.  */\n-#define ASM_CPU_DEFAULT_SPEC \"-Av9\"\n+#define ASM_CPU64_DEFAULT_SPEC \"-Av9\"\n #endif\n #if TARGET_CPU_DEFAULT == TARGET_CPU_ultrasparc\n-#define CPP_CPU_DEFAULT_SPEC \"-D__sparc_v9__\"\n-#define ASM_CPU_DEFAULT_SPEC \"-Av9a\"\n+#define CPP_CPU64_DEFAULT_SPEC \"-D__sparc_v9__\"\n+#define ASM_CPU64_DEFAULT_SPEC \"-Av9a\"\n+#endif\n+\n+#else\n+\n+#define CPP_CPU64_DEFAULT_SPEC \"\"\n+#define ASM_CPU64_DEFAULT_SPEC \"\"\n+\n+#if TARGET_CPU_DEFAULT == TARGET_CPU_sparc || TARGET_CPU_DEFAULT == TARGET_CPU_v8 || TARGET_CPU_DEFAULT == TARGET_CPU_supersparc\n+#define CPP_CPU32_DEFAULT_SPEC \"\"\n+#define ASM_CPU32_DEFAULT_SPEC \"\"\n+#endif\n+#if TARGET_CPU_DEFAULT == TARGET_CPU_sparclet\n+#define CPP_CPU32_DEFAULT_SPEC \"-D__sparclet__\"\n+#define ASM_CPU32_DEFAULT_SPEC \"-Asparclet\"\n #endif\n-#ifndef CPP_CPU_DEFAULT_SPEC\n+#if TARGET_CPU_DEFAULT == TARGET_CPU_sparclite\n+#define CPP_CPU32_DEFAULT_SPEC \"-D__sparclite__\"\n+#define ASM_CPU32_DEFAULT_SPEC \"-Asparclite\"\n+#endif\n+\n+#endif\n+\n+#if !defined(CPP_CPU32_DEFAULT_SPEC) || !defined(CPP_CPU64_DEFAULT_SPEC)\n Unrecognized value in TARGET_CPU_DEFAULT.\n #endif\n \n+#ifdef SPARC_BI_ARCH\n+\n+#define CPP_CPU_DEFAULT_SPEC \\\n+(DEFAULT_ARCH32_P ? \"\\\n+%{m64:\" CPP_CPU64_DEFAULT_SPEC \"} \\\n+%{!m64:\" CPP_CPU32_DEFAULT_SPEC \"} \\\n+\" : \"\\\n+%{m32:\" CPP_CPU32_DEFAULT_SPEC \"} \\\n+%{!m32:\" CPP_CPU64_DEFAULT_SPEC \"} \\\n+\")\n+#define ASM_CPU_DEFAULT_SPEC \\\n+(DEFAULT_ARCH32_P ? \"\\\n+%{m64:\" ASM_CPU64_DEFAULT_SPEC \"} \\\n+%{!m64:\" ASM_CPU32_DEFAULT_SPEC \"} \\\n+\" : \"\\\n+%{m32:\" ASM_CPU32_DEFAULT_SPEC \"} \\\n+%{!m32:\" ASM_CPU64_DEFAULT_SPEC \"} \\\n+\")\n+\n+#else /* !SPARC_BI_ARCH */\n+\n+#define CPP_CPU_DEFAULT_SPEC (DEFAULT_ARCH32_P ? CPP_CPU32_DEFAULT_SPEC : CPP_CPU64_DEFAULT_SPEC)\n+#define ASM_CPU_DEFAULT_SPEC (DEFAULT_ARCH32_P ? ASM_CPU32_DEFAULT_SPEC : ASM_CPU64_DEFAULT_SPEC)\n+\n+#endif /* !SPARC_BI_ARCH */\n+\n /* Names to predefine in the preprocessor for this target machine.\n    ??? It would be nice to not include any subtarget specific values here,\n    however there's no way to portably provide subtarget values to\n@@ -171,8 +211,20 @@ Unrecognized value in TARGET_CPU_DEFAULT.\n    sparc64 in 32 bit environments, so for now we only use `sparc64' in\n    64 bit environments.  */\n \n+#ifdef SPARC_BI_ARCH\n+\n+#define CPP_ARCH32_SPEC \"-D__SIZE_TYPE__=unsigned\\\\ int -D__PTRDIFF_TYPE__=int \\\n+-D__GCC_NEW_VARARGS__ -Acpu(sparc) -Amachine(sparc)\"\n+#define CPP_ARCH64_SPEC \"-D__SIZE_TYPE__=long\\\\ unsigned\\\\ int -D__PTRDIFF_TYPE__=long\\\\ int \\\n+-D__arch64__ -Acpu(sparc64) -Amachine(sparc64)\"\n+\n+#else\n+\n #define CPP_ARCH32_SPEC \"-D__GCC_NEW_VARARGS__ -Acpu(sparc) -Amachine(sparc)\"\n #define CPP_ARCH64_SPEC \"-D__arch64__ -Acpu(sparc64) -Amachine(sparc64)\"\n+\n+#endif\n+\n #define CPP_ARCH_DEFAULT_SPEC \\\n (DEFAULT_ARCH32_P ? CPP_ARCH32_SPEC : CPP_ARCH64_SPEC)\n \n@@ -413,8 +465,7 @@ extern int target_flags;\n /* 0x2000, 0x4000 are unused */\n \n /* Nonzero if pointers are 64 bits.\n-   This is not a user selectable option, though it may be one day -\n-   so it is used to determine pointer size instead of an architecture flag.  */\n+   At the moment it must follow architecture size flag.  */\n #define MASK_PTR64 0x8000\n #define TARGET_PTR64 (target_flags & MASK_PTR64)\n \n@@ -512,9 +563,8 @@ extern int target_flags;\n     {\"v8\", 0},\t\t\t\t\\\n     {\"supersparc\", 0},\t\t\t\\\n     /* End of deprecated options.  */\t\\\n-    /* -mptrNN exists for *experimental* purposes.  */ \\\n-/*  {\"ptr64\", MASK_PTR64}, */\t\t\\\n-/*  {\"ptr32\", -MASK_PTR64}, */\t\t\\\n+    {\"ptr64\", MASK_PTR64},\t\t\\\n+    {\"ptr32\", -MASK_PTR64},\t\t\\\n     {\"32\", -MASK_64BIT},\t\t\\\n     {\"64\", MASK_64BIT},\t\t\t\\\n     {\"stack-bias\", MASK_STACK_BIAS},\t\\"}, {"sha": "077cf69e719374c1e15b69b3e3a599d69c07535f", "filename": "gcc/config/sparc/t-linux64", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Ft-linux64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Ft-linux64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Ft-linux64?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -0,0 +1,21 @@\n+MULTILIB_OPTIONS = m64/m32\n+MULTILIB_DIRNAMES = 64 32\n+MULTILIB_MATCHES =\n+\n+LIBGCC = stmp-multilib\n+INSTALL_LIBGCC = install-multilib\n+\n+EXTRA_MULTILIB_PARTS=crtbegin.o crtend.o crtbeginS.o crtendS.o\n+\n+tcrtbeginS.o: crtstuff.c $(GCC_PASSES) $(CONFIG_H) \\\n+  defaults.h frame.h gbl-ctors.h\n+\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) $(MULTILIB_CFLAGS) -g0 \\\n+\t  -finhibit-size-directive -fno-inline-functions -fno-exceptions $(CRTSTUFF_T_CFLAGS_S) \\\n+\t  -c $(srcdir)/crtstuff.c -DCRT_BEGIN -o tcrtbeginS$(objext)\n+\n+tcrtendS.o: crtstuff.c $(GCC_PASSES) $(CONFIG_H) \\\n+  defaults.h frame.h gbl-ctors.h\n+\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) $(MULTILIB_CFLAGS) -g0 \\\n+\t  -finhibit-size-directive -fno-inline-functions -fno-exceptions $(CRTSTUFF_T_CFLAGS_S) \\\n+\t  -c $(srcdir)/crtstuff.c -DCRT_END -o tcrtendS$(objext)\n+"}, {"sha": "a9b6ee1479392a71dc01cbe72080da63dc5b2ad4", "filename": "gcc/config/sparc/t-sol2", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Ft-sol2", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Ft-sol2", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Ft-sol2?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -6,19 +6,19 @@ CROSS_LIBGCC1 =\n LIBGCC1_TEST =\n \n # gmon build rule:\n-gmon.o:\t$(srcdir)/config/sparc/gmon-sol2.c $(GCC_PASSES) $(CONFIG_H) stmp-int-hdrs\n-\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) \\\n-\t\t-c $(srcdir)/config/sparc/gmon-sol2.c -o gmon.o\n+$(T)gmon.o:\t$(srcdir)/config/sparc/gmon-sol2.c $(GCC_PASSES) $(CONFIG_H) stmp-int-hdrs\n+\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(INCLUDES) $(MULTILIB_CFLAGS) \\\n+\t\t-c $(srcdir)/config/sparc/gmon-sol2.c -o $(T)gmon.o\n \n # Assemble startup files.\n-crt1.o: $(srcdir)/config/sparc/sol2-c1.asm $(GCC_PASSES)\n-\t$(GCC_FOR_TARGET) -c -o crt1.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-c1.asm\n-crti.o: $(srcdir)/config/sparc/sol2-ci.asm $(GCC_PASSES)\n-\t$(GCC_FOR_TARGET) -c -o crti.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-ci.asm\n-crtn.o: $(srcdir)/config/sparc/sol2-cn.asm $(GCC_PASSES)\n-\t$(GCC_FOR_TARGET) -c -o crtn.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-cn.asm\n-gcrt1.o: $(srcdir)/config/sparc/sol2-c1.asm $(GCC_PASSES)\n-\t$(GCC_FOR_TARGET) -c -DGCRT1 -o gcrt1.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-c1.asm\n+$(T)crt1.o: $(srcdir)/config/sparc/sol2-c1.asm $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)crt1.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-c1.asm\n+$(T)crti.o: $(srcdir)/config/sparc/sol2-ci.asm $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)crti.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-ci.asm\n+$(T)crtn.o: $(srcdir)/config/sparc/sol2-cn.asm $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -o $(T)crtn.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-cn.asm\n+$(T)gcrt1.o: $(srcdir)/config/sparc/sol2-c1.asm $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c -DGCRT1 -o $(T)gcrt1.o -x assembler-with-cpp $(srcdir)/config/sparc/sol2-c1.asm\n \n # We need to use -fPIC when we are using gcc to compile the routines in\n # crtstuff.c.  This is only really needed when we are going to use gcc/g++"}, {"sha": "8d42c4453542c0400a5a16d2e6148367122e8b63", "filename": "gcc/config/sparc/t-sol2-64", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Ft-sol2-64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Ft-sol2-64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Ft-sol2-64?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -0,0 +1,8 @@\n+MULTILIB_OPTIONS = m32/m64\n+MULTILIB_DIRNAMES = sparcv7 sparcv9\n+MULTILIB_MATCHES =\n+\n+LIBGCC = stmp-multilib\n+INSTALL_LIBGCC = install-multilib\n+\n+EXTRA_MULTILIB_PARTS=crtbegin.o crtend.o gmon.o crt1.o crti.o crtn.o gcrt1.o"}, {"sha": "b673161282f49d3c72482ce9864a4c3b5a165153", "filename": "gcc/config/sparc/xm-sp64.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Fxm-sp64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Fxm-sp64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fxm-sp64.h?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -21,5 +21,7 @@ Boston, MA 02111-1307, USA.  */\n #include <sparc/xm-sparc.h>\n \n /* This describes the machine the compiler is hosted on.  */\n+#if defined(__arch64__) || defined(__sparc_v9__) || defined(__sparcv9)\n #undef HOST_BITS_PER_LONG\n #define HOST_BITS_PER_LONG 64\n+#endif"}, {"sha": "c506d22dd3606a750ecf22c9a37934bb83c02e1d", "filename": "gcc/config/sparc/xm-sysv4-64.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Fxm-sysv4-64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfig%2Fsparc%2Fxm-sysv4-64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fxm-sysv4-64.h?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -21,5 +21,7 @@ Boston, MA 02111-1307, USA.  */\n #include <sparc/xm-sysv4.h>\n \n /* This describes the machine the compiler is hosted on.  */\n+#if defined(__arch64__) || defined(__sparc_v9__) || defined(__sparcv9)\n #undef HOST_BITS_PER_LONG\n #define HOST_BITS_PER_LONG 64\n+#endif"}, {"sha": "8ff1a7c55c3f2c6edcd9d82a92f53df3f428c8c1", "filename": "gcc/configure", "status": "modified", "additions": 95, "deletions": 96, "changes": 191, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -1,7 +1,7 @@\n #! /bin/sh\n \n # Guess values for system-dependent variables and create Makefiles.\n-# Generated automatically using autoconf version 2.12.1 \n+# Generated automatically using autoconf version 2.12 \n # Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.\n #\n # This configure script is free software; the Free Software Foundation\n@@ -85,7 +85,6 @@ mandir='${prefix}/man'\n # Initialize some other variables.\n subdirs=\n MFLAGS= MAKEFLAGS=\n-SHELL=${CONFIG_SHELL-/bin/sh}\n # Maximum number of lines to put in a shell here document.\n ac_max_here_lines=12\n \n@@ -369,7 +368,7 @@ EOF\n     verbose=yes ;;\n \n   -version | --version | --versio | --versi | --vers)\n-    echo \"configure generated by autoconf version 2.12.1\"\n+    echo \"configure generated by autoconf version 2.12\"\n     exit 0 ;;\n \n   -with-* | --with-*)\n@@ -571,7 +570,7 @@ copy=cp\n # - two terminals occur directly after each other\n # - the path contains an element with a dot in it\n echo $ac_n \"checking LIBRARY_PATH variable\"\"... $ac_c\" 1>&6\n-echo \"configure:575: checking LIBRARY_PATH variable\" >&5\n+echo \"configure:574: checking LIBRARY_PATH variable\" >&5\n case ${LIBRARY_PATH} in\n   [:\\;]* | *[:\\;] | *[:\\;][:\\;]* |  *[:\\;]. | .[:\\;]*| . | *[:\\;].[:\\;]* )\n     library_path_setting=\"contains current directory\"\n@@ -596,7 +595,7 @@ fi\n # - two terminals occur directly after each other\n # - the path contains an element with a dot in it\n echo $ac_n \"checking GCC_EXEC_PREFIX variable\"\"... $ac_c\" 1>&6\n-echo \"configure:600: checking GCC_EXEC_PREFIX variable\" >&5\n+echo \"configure:599: checking GCC_EXEC_PREFIX variable\" >&5\n case ${GCC_EXEC_PREFIX} in\n   [:\\;]* | *[:\\;] | *[:\\;][:\\;]* |  *[:\\;]. | .[:\\;]*| . | *[:\\;].[:\\;]* )\n     gcc_exec_prefix_setting=\"contains current directory\"\n@@ -855,33 +854,33 @@ esac\n \n \n # Make sure we can run config.sub.\n-if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :\n+if $ac_config_sub sun4 >/dev/null 2>&1; then :\n else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:864: checking host system type\" >&5\n+echo \"configure:863: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n NONE)\n   case $nonopt in\n   NONE)\n-    if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :\n+    if host_alias=`$ac_config_guess`; then :\n     else { echo \"configure: error: can not guess host type; you must specify one\" 1>&2; exit 1; }\n     fi ;;\n   *) host_alias=$nonopt ;;\n   esac ;;\n esac\n \n-host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`\n+host=`$ac_config_sub $host_alias`\n host_cpu=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\1/'`\n host_vendor=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\2/'`\n host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:885: checking target system type\" >&5\n+echo \"configure:884: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -892,14 +891,14 @@ NONE)\n   esac ;;\n esac\n \n-target=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $target_alias`\n+target=`$ac_config_sub $target_alias`\n target_cpu=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\1/'`\n target_vendor=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\2/'`\n target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:903: checking build system type\" >&5\n+echo \"configure:902: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -910,7 +909,7 @@ NONE)\n   esac ;;\n esac\n \n-build=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $build_alias`\n+build=`$ac_config_sub $build_alias`\n build_cpu=`echo $build | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\1/'`\n build_vendor=`echo $build | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\2/'`\n build_os=`echo $build | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n@@ -926,7 +925,7 @@ test \"$host_alias\" != \"$target_alias\" &&\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:930: checking for $ac_word\" >&5\n+echo \"configure:929: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -955,7 +954,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:959: checking for $ac_word\" >&5\n+echo \"configure:958: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1003,7 +1002,7 @@ fi\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1007: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1006: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -1013,11 +1012,11 @@ ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS\n cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext <<EOF\n-#line 1017 \"configure\"\n+#line 1016 \"configure\"\n #include \"confdefs.h\"\n main(){return(0);}\n EOF\n-if { (eval echo configure:1021: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1020: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -1037,12 +1036,12 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:1041: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1040: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:1046: checking whether we are using GNU C\" >&5\n+echo \"configure:1045: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1051,7 +1050,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1055: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1054: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1066,7 +1065,7 @@ if test $ac_cv_prog_gcc = yes; then\n   ac_save_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\n   echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1070: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:1069: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1105,7 +1104,7 @@ fi\n \n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:1109: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:1108: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1138,7 +1137,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1142: checking for $ac_word\" >&5\n+echo \"configure:1141: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AWK'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1169,7 +1168,7 @@ done\n # Extract the first word of \"flex\", so it can be a program name with args.\n set dummy flex; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1173: checking for $ac_word\" >&5\n+echo \"configure:1172: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LEX'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1202,15 +1201,15 @@ then\n   *) ac_lib=l ;;\n   esac\n   echo $ac_n \"checking for yywrap in -l$ac_lib\"\"... $ac_c\" 1>&6\n-echo \"configure:1206: checking for yywrap in -l$ac_lib\" >&5\n+echo \"configure:1205: checking for yywrap in -l$ac_lib\" >&5\n ac_lib_var=`echo $ac_lib'_'yywrap | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-l$ac_lib  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1214 \"configure\"\n+#line 1213 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -1221,7 +1220,7 @@ int main() {\n yywrap()\n ; return 0; }\n EOF\n-if { (eval echo configure:1225: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1224: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -1244,7 +1243,7 @@ fi\n fi\n \n echo $ac_n \"checking whether ln works\"\"... $ac_c\" 1>&6\n-echo \"configure:1248: checking whether ln works\" >&5\n+echo \"configure:1247: checking whether ln works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_LN'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1276,7 +1275,7 @@ else\n fi\n \n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:1280: checking whether ln -s works\" >&5\n+echo \"configure:1279: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1308,19 +1307,19 @@ else\n fi\n \n echo $ac_n \"checking for volatile\"\"... $ac_c\" 1>&6\n-echo \"configure:1312: checking for volatile\" >&5\n+echo \"configure:1311: checking for volatile\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_c_volatile'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1317 \"configure\"\n+#line 1316 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n volatile int foo;\n ; return 0; }\n EOF\n-if { (eval echo configure:1324: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1323: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_c_volatile=yes\n else\n@@ -1343,7 +1342,7 @@ fi\n # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1347: checking for $ac_word\" >&5\n+echo \"configure:1346: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1374,7 +1373,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1378: checking for $ac_word\" >&5\n+echo \"configure:1377: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_YACC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1414,7 +1413,7 @@ test -n \"$YACC\" || YACC=\"yacc\"\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:1418: checking for a BSD compatible install\" >&5\n+echo \"configure:1417: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1465,7 +1464,7 @@ test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:1469: checking how to run the C preprocessor\" >&5\n+echo \"configure:1468: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -1480,13 +1479,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 1484 \"configure\"\n+#line 1483 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1490: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1489: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   :\n@@ -1497,13 +1496,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1501 \"configure\"\n+#line 1500 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1507: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1506: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   :\n@@ -1526,20 +1525,20 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:1530: checking for ANSI C header files\" >&5\n+echo \"configure:1529: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1535 \"configure\"\n+#line 1534 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1543: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1542: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1556,7 +1555,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1560 \"configure\"\n+#line 1559 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -1574,7 +1573,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1578 \"configure\"\n+#line 1577 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -1595,7 +1594,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1599 \"configure\"\n+#line 1598 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -1606,7 +1605,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:1610: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1609: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -1630,12 +1629,12 @@ EOF\n fi\n \n echo $ac_n \"checking whether time.h and sys/time.h may both be included\"\"... $ac_c\" 1>&6\n-echo \"configure:1634: checking whether time.h and sys/time.h may both be included\" >&5\n+echo \"configure:1633: checking whether time.h and sys/time.h may both be included\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_time'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1639 \"configure\"\n+#line 1638 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/time.h>\n@@ -1644,7 +1643,7 @@ int main() {\n struct tm *tp;\n ; return 0; }\n EOF\n-if { (eval echo configure:1648: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1647: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_time=yes\n else\n@@ -1665,20 +1664,20 @@ EOF\n fi\n \n echo $ac_n \"checking whether string.h and strings.h may both be included\"\"... $ac_c\" 1>&6\n-echo \"configure:1669: checking whether string.h and strings.h may both be included\" >&5\n+echo \"configure:1668: checking whether string.h and strings.h may both be included\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_header_string'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1674 \"configure\"\n+#line 1673 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n #include <strings.h>\n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1682: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1681: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_header_string=yes\n else\n@@ -1702,17 +1701,17 @@ for ac_hdr in limits.h stddef.h string.h strings.h stdlib.h time.h fcntl.h unist\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:1706: checking for $ac_hdr\" >&5\n+echo \"configure:1705: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1711 \"configure\"\n+#line 1710 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1716: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1715: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1742,17 +1741,17 @@ done\n # Check for thread headers.\n ac_safe=`echo \"thread.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for thread.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1746: checking for thread.h\" >&5\n+echo \"configure:1745: checking for thread.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1751 \"configure\"\n+#line 1750 \"configure\"\n #include \"confdefs.h\"\n #include <thread.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1756: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1755: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1776,17 +1775,17 @@ fi\n \n ac_safe=`echo \"pthread.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for pthread.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1780: checking for pthread.h\" >&5\n+echo \"configure:1779: checking for pthread.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1785 \"configure\"\n+#line 1784 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1790: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1789: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1813,7 +1812,7 @@ fi\n # Extract the first word of \"gnatbind\", so it can be a program name with args.\n set dummy gnatbind; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1817: checking for $ac_word\" >&5\n+echo \"configure:1816: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gnat'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1843,20 +1842,20 @@ fi\n # See if the system preprocessor understands the ANSI C preprocessor\n # stringification operator.\n echo $ac_n \"checking whether cpp understands the stringify operator\"\"... $ac_c\" 1>&6\n-echo \"configure:1847: checking whether cpp understands the stringify operator\" >&5\n+echo \"configure:1846: checking whether cpp understands the stringify operator\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_c_have_stringify'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1852 \"configure\"\n+#line 1851 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n #define S(x)   #x\n char *test = S(foo);\n ; return 0; }\n EOF\n-if { (eval echo configure:1860: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1859: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_c_have_stringify=yes\n else\n@@ -1879,20 +1878,20 @@ fi\n # Use <inttypes.h> only if it exists,\n # doesn't clash with <sys/types.h>, and declares intmax_t.\n echo $ac_n \"checking for inttypes.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1883: checking for inttypes.h\" >&5\n+echo \"configure:1882: checking for inttypes.h\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_header_inttypes_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1888 \"configure\"\n+#line 1887 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <inttypes.h>\n int main() {\n intmax_t i = -1;\n ; return 0; }\n EOF\n-if { (eval echo configure:1896: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1895: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<EOF\n #define HAVE_INTTYPES_H 1\n@@ -1915,12 +1914,12 @@ for ac_func in strtoul bsearch strerror putenv popen bcopy bzero bcmp \\\n \tsysconf isascii gettimeofday strsignal\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1919: checking for $ac_func\" >&5\n+echo \"configure:1918: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1924 \"configure\"\n+#line 1923 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1943,7 +1942,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1947: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1946: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1972,12 +1971,12 @@ done\n #AC_CHECK_TYPE(wchar_t, unsigned int)\n \n echo $ac_n \"checking for vprintf\"\"... $ac_c\" 1>&6\n-echo \"configure:1976: checking for vprintf\" >&5\n+echo \"configure:1975: checking for vprintf\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vprintf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1981 \"configure\"\n+#line 1980 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vprintf(); below.  */\n@@ -2000,7 +1999,7 @@ vprintf();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2004: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2003: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vprintf=yes\"\n else\n@@ -2024,12 +2023,12 @@ fi\n \n if test \"$ac_cv_func_vprintf\" != yes; then\n echo $ac_n \"checking for _doprnt\"\"... $ac_c\" 1>&6\n-echo \"configure:2028: checking for _doprnt\" >&5\n+echo \"configure:2027: checking for _doprnt\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func__doprnt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2033 \"configure\"\n+#line 2032 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char _doprnt(); below.  */\n@@ -2052,7 +2051,7 @@ _doprnt();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2056: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2055: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func__doprnt=yes\"\n else\n@@ -2088,15 +2087,15 @@ fi\n \n \n echo $ac_n \"checking whether the printf functions support %p\"\"... $ac_c\" 1>&6\n-echo \"configure:2092: checking whether the printf functions support %p\" >&5\n+echo \"configure:2091: checking whether the printf functions support %p\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_func_printf_ptr'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   gcc_cv_func_printf_ptr=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2100 \"configure\"\n+#line 2099 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n \n@@ -2109,7 +2108,7 @@ main()\n   exit (p != q);\n }\n EOF\n-if { (eval echo configure:2113: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2112: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   gcc_cv_func_printf_ptr=yes\n else\n@@ -2138,12 +2137,12 @@ for ac_func in malloc realloc calloc free bcopy bzero bcmp \\\n \tstrsignal\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:2142: checking whether $ac_func must be declared\" >&5\n+echo \"configure:2141: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2147 \"configure\"\n+#line 2146 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -2176,7 +2175,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:2180: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2179: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -2205,12 +2204,12 @@ done\n for ac_func in getrlimit setrlimit\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:2209: checking whether $ac_func must be declared\" >&5\n+echo \"configure:2208: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2214 \"configure\"\n+#line 2213 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -2247,7 +2246,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:2251: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2250: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -2274,12 +2273,12 @@ done\n \n \n echo $ac_n \"checking for sys_siglist declaration in signal.h or unistd.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2278: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n+echo \"configure:2277: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_decl_sys_siglist'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2283 \"configure\"\n+#line 2282 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <signal.h>\n@@ -2291,7 +2290,7 @@ int main() {\n char *msg = *(sys_siglist + 1);\n ; return 0; }\n EOF\n-if { (eval echo configure:2295: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2294: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_decl_sys_siglist=yes\n else\n@@ -4739,7 +4738,7 @@ for machine in $build $host $target; do\n \t\ttm_file=sparc/sol2-sld-64.h\n \t\txm_file=\"sparc/xm-sysv4-64.h sparc/xm-sol2.h\"\n \t\txm_defines=\"USG POSIX\"\n-\t\ttmake_file=sparc/t-sol2\n+\t\ttmake_file=\"sparc/t-sol2 sparc/t-sol2-64\"\n \t\txmake_file=sparc/x-sysv4\n \t\textra_parts=\"crt1.o crti.o crtn.o gcrt1.o crtbegin.o crtend.o\"\n \t\tfixincludes=fixinc.wrap\n@@ -4845,11 +4844,12 @@ for machine in $build $host $target; do\n \t\textra_parts=\"crtbegin.o crtend.o\"\n \t\t;;\n \tsparc64-*-linux*)\t\t# 64-bit Sparc's running GNU/Linux\n-\t\ttmake_file=sparc/t-sp64\n+\t\ttmake_file=\"t-linux sparc/t-linux64\"\n \t\txm_file=\"sparc/xm-sp64.h sparc/xm-linux.h\"\n \t\ttm_file=sparc/linux64.h\n \t\txmake_file=x-linux\n \t\tfixincludes=Makefile.in\t# The headers are ok already.\n+\t\textra_parts=\"crtbegin.o crtbeginS.o crtend.o crtendS.o\"\n \t\tgnu_ld=yes\n \t\t;;\n # This hasn't been upgraded to GCC 2.\n@@ -5909,7 +5909,7 @@ EOF\n # Ultrix sh set writes to stderr and can't be redirected directly,\n # and sets the high bit in the cache file unless we assign to the vars.\n (set) 2>&1 |\n-  case `(ac_space=' '; set) 2>&1 | grep ac_space` in\n+  case `(ac_space=' '; set) 2>&1` in\n   *ac_space=\\ *)\n     # `set' does not quote correctly, so add quotes (double-quote substitution\n     # turns \\\\\\\\ into \\\\, and sed turns \\\\ into \\).\n@@ -5976,7 +5976,7 @@ do\n     echo \"running \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion\"\n     exec \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;\n   -version | --version | --versio | --versi | --vers | --ver | --ve | --v)\n-    echo \"$CONFIG_STATUS generated by autoconf version 2.12.1\"\n+    echo \"$CONFIG_STATUS generated by autoconf version 2.12\"\n     exit 0 ;;\n   -help | --help | --hel | --he | --h)\n     echo \"\\$ac_cs_usage\"; exit 0 ;;\n@@ -5995,7 +5995,6 @@ sed 's/%@/@@/; s/@%/@@/; s/%g\\$/@g/; /@g\\$/s/[\\\\\\\\&%]/\\\\\\\\&/g;\n  s/@@/%@/; s/@@/@%/; s/@g\\$/%g/' > conftest.subs <<\\\\CEOF\n $ac_vpsub\n $extrasub\n-s%@SHELL@%$SHELL%g\n s%@CFLAGS@%$CFLAGS%g\n s%@CPPFLAGS@%$CPPFLAGS%g\n s%@CXXFLAGS@%$CXXFLAGS%g"}, {"sha": "5e1b434fa4de5fa4812084e63c8f8b287e571b25", "filename": "gcc/configure.in", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/345a6161128023b7a24c1287985a62f762cf49ec/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=345a6161128023b7a24c1287985a62f762cf49ec", "patch": "@@ -2878,7 +2878,7 @@ changequote([,])dnl\n \t\ttm_file=sparc/sol2-sld-64.h\n \t\txm_file=\"sparc/xm-sysv4-64.h sparc/xm-sol2.h\"\n \t\txm_defines=\"USG POSIX\"\n-\t\ttmake_file=sparc/t-sol2\n+\t\ttmake_file=\"sparc/t-sol2 sparc/t-sol2-64\"\n \t\txmake_file=sparc/x-sysv4\n \t\textra_parts=\"crt1.o crti.o crtn.o gcrt1.o crtbegin.o crtend.o\"\n \t\tfixincludes=fixinc.wrap\n@@ -2986,11 +2986,12 @@ changequote([,])dnl\n \t\textra_parts=\"crtbegin.o crtend.o\"\n \t\t;;\n \tsparc64-*-linux*)\t\t# 64-bit Sparc's running GNU/Linux\n-\t\ttmake_file=sparc/t-sp64\n+\t\ttmake_file=\"t-linux sparc/t-linux64\"\n \t\txm_file=\"sparc/xm-sp64.h sparc/xm-linux.h\"\n \t\ttm_file=sparc/linux64.h\n \t\txmake_file=x-linux\n \t\tfixincludes=Makefile.in\t# The headers are ok already.\n+\t\textra_parts=\"crtbegin.o crtbeginS.o crtend.o crtendS.o\"\n \t\tgnu_ld=yes\n \t\t;;\n # This hasn't been upgraded to GCC 2."}]}