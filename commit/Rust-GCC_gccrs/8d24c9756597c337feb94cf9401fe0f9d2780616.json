{"sha": "8d24c9756597c337feb94cf9401fe0f9d2780616", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQyNGM5NzU2NTk3YzMzN2ZlYjk0Y2Y5NDAxZmUwZjlkMjc4MDYxNg==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2012-08-29T01:37:16Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2012-08-29T01:37:16Z"}, "message": "re PR libstdc++/54102 (generated html vs. utf8)\n\n2012-08-28  Benjamin Kosnik  <bkoz@redhat.com>\n\n\tPR libstdc++/54102\n\t* doc/xsl/customization.xsl.in: New.\n\t* configure.ac: Output local copy of customization xsl.\n\t* doc/Makefile.am (stamp-html-single-docbook): Use XSL_LOCAL_STYLE.\n\t(stamp-html-docbook): Set stringparam to UTF-8.\n\t* Makefile.in: Regenerated.\n\t* configure: Same.\n\t* doc/Makefile.in: Same.\n\nFrom-SVN: r190768", "tree": {"sha": "8e04e4c1238f8d25788e626abbb2fafb77ff47cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8e04e4c1238f8d25788e626abbb2fafb77ff47cb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d24c9756597c337feb94cf9401fe0f9d2780616", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d24c9756597c337feb94cf9401fe0f9d2780616", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d24c9756597c337feb94cf9401fe0f9d2780616", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d24c9756597c337feb94cf9401fe0f9d2780616/comments", "author": null, "committer": null, "parents": [{"sha": "fabfa16b371e9354e2a62d88e80a698ba161ee3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fabfa16b371e9354e2a62d88e80a698ba161ee3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fabfa16b371e9354e2a62d88e80a698ba161ee3c"}], "stats": {"total": 69, "additions": 57, "deletions": 12}, "files": [{"sha": "c92bbb373396eacaa8161cbdd4cf7ce97d859c82", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=8d24c9756597c337feb94cf9401fe0f9d2780616", "patch": "@@ -1,3 +1,14 @@\n+2012-08-28  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\tPR libstdc++/54102\n+\t* doc/xsl/customization.xsl.in: New.\n+\t* configure.ac: Output local copy of customization xsl.\n+\t* doc/Makefile.am (stamp-html-single-docbook): Use XSL_LOCAL_STYLE.\n+\t(stamp-html-docbook): Set stringparam to UTF-8.\n+\t* Makefile.in: Regenerated.\n+\t* configure: Same.\n+\t* doc/Makefile.in: Same.\n+\n 2012-08-27  Ulrich Drepper  <drepper@gmail.com>\n \n \tAdd interfaces to retrieve random numbers in bulk."}, {"sha": "5089d0a63d9a13134ccd24338732011a8794deef", "filename": "libstdc++-v3/Makefile.in", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FMakefile.in?ref=8d24c9756597c337feb94cf9401fe0f9d2780616", "patch": "@@ -39,7 +39,8 @@ DIST_COMMON = $(top_srcdir)/fragment.am README ChangeLog \\\n \t$(top_srcdir)/configure $(am__configure_deps) \\\n \t$(srcdir)/config.h.in $(srcdir)/../mkinstalldirs \\\n \t$(top_srcdir)/scripts/testsuite_flags.in \\\n-\t$(top_srcdir)/scripts/extract_symvers.in\n+\t$(top_srcdir)/scripts/extract_symvers.in \\\n+\t$(top_srcdir)/doc/xsl/customization.xsl.in\n subdir = .\n ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n am__aclocal_m4_deps = $(top_srcdir)/../config/acx.m4 \\\n@@ -67,7 +68,8 @@ am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \\\n am__CONFIG_DISTCLEAN_FILES = config.status config.cache config.log \\\n  configure.lineno config.status.lineno\n CONFIG_HEADER = config.h\n-CONFIG_CLEAN_FILES = scripts/testsuite_flags scripts/extract_symvers\n+CONFIG_CLEAN_FILES = scripts/testsuite_flags scripts/extract_symvers \\\n+\tdoc/xsl/customization.xsl\n CONFIG_CLEAN_VPATH_FILES =\n depcomp =\n am__depfiles_maybe =\n@@ -434,6 +436,8 @@ scripts/testsuite_flags: $(top_builddir)/config.status $(top_srcdir)/scripts/tes\n \tcd $(top_builddir) && $(SHELL) ./config.status $@\n scripts/extract_symvers: $(top_builddir)/config.status $(top_srcdir)/scripts/extract_symvers.in\n \tcd $(top_builddir) && $(SHELL) ./config.status $@\n+doc/xsl/customization.xsl: $(top_builddir)/config.status $(top_srcdir)/doc/xsl/customization.xsl.in\n+\tcd $(top_builddir) && $(SHELL) ./config.status $@\n \n mostlyclean-libtool:\n \t-rm -f *.lo"}, {"sha": "9ea8042a1ca9d00350a95b24781c49ae5168325f", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=8d24c9756597c337feb94cf9401fe0f9d2780616", "patch": "@@ -71893,6 +71893,8 @@ ac_config_files=\"$ac_config_files scripts/testsuite_flags\"\n \n ac_config_files=\"$ac_config_files scripts/extract_symvers\"\n \n+ac_config_files=\"$ac_config_files doc/xsl/customization.xsl\"\n+\n \n # Multilibs need MULTISUBDIR defined correctly in certain makefiles so\n # that multilib installs will end up installed in the correct place.\n@@ -73104,6 +73106,7 @@ do\n     \"Makefile\") CONFIG_FILES=\"$CONFIG_FILES Makefile\" ;;\n     \"scripts/testsuite_flags\") CONFIG_FILES=\"$CONFIG_FILES scripts/testsuite_flags\" ;;\n     \"scripts/extract_symvers\") CONFIG_FILES=\"$CONFIG_FILES scripts/extract_symvers\" ;;\n+    \"doc/xsl/customization.xsl\") CONFIG_FILES=\"$CONFIG_FILES doc/xsl/customization.xsl\" ;;\n     \"include/Makefile\") CONFIG_FILES=\"$CONFIG_FILES include/Makefile\" ;;\n     \"libsupc++/Makefile\") CONFIG_FILES=\"$CONFIG_FILES libsupc++/Makefile\" ;;\n     \"python/Makefile\") CONFIG_FILES=\"$CONFIG_FILES python/Makefile\" ;;"}, {"sha": "5c86bb975898d62d1c27e7b91525cfbb97292364", "filename": "libstdc++-v3/configure.ac", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure.ac?ref=8d24c9756597c337feb94cf9401fe0f9d2780616", "patch": "@@ -432,6 +432,7 @@ dnl AC_OUTPUT macro.  This one lists the files to be created:\n AC_CONFIG_FILES(Makefile)\n AC_CONFIG_FILES([scripts/testsuite_flags],[chmod +x scripts/testsuite_flags])\n AC_CONFIG_FILES([scripts/extract_symvers],[chmod +x scripts/extract_symvers])\n+AC_CONFIG_FILES([doc/xsl/customization.xsl])\n \n # Multilibs need MULTISUBDIR defined correctly in certain makefiles so\n # that multilib installs will end up installed in the correct place."}, {"sha": "b787200c5b874e136ec128b51ceb7498b6e42c1a", "filename": "libstdc++-v3/doc/Makefile.am", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2Fdoc%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2Fdoc%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2FMakefile.am?ref=8d24c9756597c337feb94cf9401fe0f9d2780616", "patch": "@@ -465,9 +465,10 @@ XSLT_PARAM = --param toc.section.depth 4\n #XSL_STYLE_DIR = /usr/share/xml/docbook/stylesheet/docbook-xsl-ns\n #XSL_STYLE_DIR = /usr/share/sgml/docbook/xsl-ns-stylesheets\n XSL_FO_STYLE = $(XSL_STYLE_DIR)/fo/docbook.xsl\n-XSL_HTML_STYLE = $(XSL_STYLE_DIR)/xhtml-1_1/chunk.xsl\n-XSL_HTML_SINGLE_STYLE = $(XSL_STYLE_DIR)/xhtml-1_1/docbook.xsl\n+XSL_HTML_STYLE = $(XSL_STYLE_DIR)/html/chunk.xsl\n+XSL_HTML_SINGLE_STYLE = $(XSL_STYLE_DIR)/html/docbook.xsl\n XSL_EPUB_STYLE = $(XSL_STYLE_DIR)/epub3/chunk.xsl\n+XSL_LOCAL_STYLE = ${glibcxx_builddir}/doc/xsl/customization.xsl\n \n ${docbook_outdir}/epub:\n \tmkdir -p ${docbook_outdir}/epub\n@@ -529,21 +530,25 @@ stamp-html-docbook-lwg: stamp-html-docbook $(xml_extra)\n stamp-html-docbook-data: stamp-html-docbook-images stamp-html-docbook-lwg\n \t$(STAMP) stamp-html-docbook-data\n \n-# HTML, index plus chapters\n+# HTML, \"chunked\" into index plus chapters as separate pages\n stamp-html-docbook: $(xml_sources) ${docbook_outdir}/html\n \t@echo \"Generating html files...\"\n \t$(XSLTPROC) $(XSLT_PARAM) $(XSLT_FLAGS) -o ${docbook_outdir}/html/ \\\n-\t$(XSL_HTML_STYLE) ${top_srcdir}/doc/xml/spine.xml\n+\t --stringparam chunker.output.encoding UTF-8 \\\n+\t$(XSL_HTML_STYLE) \\\n+\t${top_srcdir}/doc/xml/spine.xml\n \t$(STAMP) stamp-html-docbook\n \n doc-html-docbook: stamp-html-docbook-data\n \n # HTML, all one page\n+# NB: Have to generate customization XSL for UTF-8 output.\n manual_html = ${docbook_outdir}/html/libstdc++-manual-single.html\n stamp-html-single-docbook: $(xml_sources) ${docbook_outdir}/html\n \t@echo \"Generating html single file...\"\n \t$(XSLTPROC) $(XSLT_PARAM) $(XSLT_FLAGS) -o ${manual_html} \\\n-\t$(XSL_HTML_SINGLE_STYLE) ${top_srcdir}/doc/xml/spine.xml\n+\t${XSL_LOCAL_STYLE} \\\n+\t${top_srcdir}/doc/xml/spine.xml\n \t$(STAMP) stamp-html-single-docbook\n \n doc-html-single-docbook: stamp-html-single-docbook"}, {"sha": "40272ef03a799245271c9e91cb544b54e5135255", "filename": "libstdc++-v3/doc/Makefile.in", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2Fdoc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2Fdoc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2FMakefile.in?ref=8d24c9756597c337feb94cf9401fe0f9d2780616", "patch": "@@ -517,9 +517,10 @@ XSLT_PARAM = --param toc.section.depth 4\n #XSL_STYLE_DIR = /usr/share/xml/docbook/stylesheet/docbook-xsl-ns\n #XSL_STYLE_DIR = /usr/share/sgml/docbook/xsl-ns-stylesheets\n XSL_FO_STYLE = $(XSL_STYLE_DIR)/fo/docbook.xsl\n-XSL_HTML_STYLE = $(XSL_STYLE_DIR)/xhtml-1_1/chunk.xsl\n-XSL_HTML_SINGLE_STYLE = $(XSL_STYLE_DIR)/xhtml-1_1/docbook.xsl\n+XSL_HTML_STYLE = $(XSL_STYLE_DIR)/html/chunk.xsl\n+XSL_HTML_SINGLE_STYLE = $(XSL_STYLE_DIR)/html/docbook.xsl\n XSL_EPUB_STYLE = $(XSL_STYLE_DIR)/epub3/chunk.xsl\n+XSL_LOCAL_STYLE = ${glibcxx_builddir}/doc/xsl/customization.xsl\n LINT_FLAGS = --debug --xinclude --noent --noblanks --noout\n SCHEMA_FLAGS = http://www.docbook.org/xml/5.0/dtd/docbook.dtd\n #SCHEMA_FLAGS = --nonet /usr/share/xml/docbook5/schema/dtd/5.0/docbook.dtd\n@@ -533,6 +534,7 @@ manual_xml = ${docbook_outdir}/xml/libstdc++-manual.xml\n set_xml = ${docbook_outdir}/xml/libstdc++-set.xml\n \n # HTML, all one page\n+# NB: Have to generate customization XSL for UTF-8 output.\n manual_html = ${docbook_outdir}/html/libstdc++-manual-single.html\n \n # PDF, via dblatex\n@@ -917,18 +919,21 @@ stamp-html-docbook-lwg: stamp-html-docbook $(xml_extra)\n stamp-html-docbook-data: stamp-html-docbook-images stamp-html-docbook-lwg\n \t$(STAMP) stamp-html-docbook-data\n \n-# HTML, index plus chapters\n+# HTML, \"chunked\" into index plus chapters as separate pages\n stamp-html-docbook: $(xml_sources) ${docbook_outdir}/html\n \t@echo \"Generating html files...\"\n \t$(XSLTPROC) $(XSLT_PARAM) $(XSLT_FLAGS) -o ${docbook_outdir}/html/ \\\n-\t$(XSL_HTML_STYLE) ${top_srcdir}/doc/xml/spine.xml\n+\t --stringparam chunker.output.encoding UTF-8 \\\n+\t$(XSL_HTML_STYLE) \\\n+\t${top_srcdir}/doc/xml/spine.xml\n \t$(STAMP) stamp-html-docbook\n \n doc-html-docbook: stamp-html-docbook-data\n stamp-html-single-docbook: $(xml_sources) ${docbook_outdir}/html\n \t@echo \"Generating html single file...\"\n \t$(XSLTPROC) $(XSLT_PARAM) $(XSLT_FLAGS) -o ${manual_html} \\\n-\t$(XSL_HTML_SINGLE_STYLE) ${top_srcdir}/doc/xml/spine.xml\n+\t${XSL_LOCAL_STYLE} \\\n+\t${top_srcdir}/doc/xml/spine.xml\n \t$(STAMP) stamp-html-single-docbook\n \n doc-html-single-docbook: stamp-html-single-docbook"}, {"sha": "9db621ce73a8f100ecc8d2a5eba205c3d141e1ad", "filename": "libstdc++-v3/doc/xsl/customization.xsl.in", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2Fdoc%2Fxsl%2Fcustomization.xsl.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d24c9756597c337feb94cf9401fe0f9d2780616/libstdc%2B%2B-v3%2Fdoc%2Fxsl%2Fcustomization.xsl.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fxsl%2Fcustomization.xsl.in?ref=8d24c9756597c337feb94cf9401fe0f9d2780616", "patch": "@@ -0,0 +1,16 @@\n+<?xml version='1.0'?>\n+\n+<!--\n+  Specialization/customization layer for libstdc++.\n+  To output both chunked/single page HTML in UTF-8 charset\n+\n+  XSL_STYLE_DIR is set in acinclude.m4\n+\n+<xsl:import html=\"@XSL_STYLE_DIR@/html/docbook.xsl\"/>\n+-->\n+\n+<xsl:stylesheet  xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+\t\t version=\"1.0\">\n+<xsl:import href=\"@XSL_STYLE_DIR@/html/docbook.xsl\"/>\n+<xsl:output method=\"html\" encoding=\"UTF-8\" indent=\"no\"/>\n+</xsl:stylesheet>"}]}