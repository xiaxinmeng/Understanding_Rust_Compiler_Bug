{"sha": "c38628062d37af9bbf6478eaf9f0568c0e156eff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzM4NjI4MDYyZDM3YWY5YmJmNjQ3OGVhZjlmMDU2OGMwZTE1NmVmZg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-02-08T18:01:23Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-02-08T18:01:23Z"}, "message": "re PR libstdc++/14026 (std::uncaught_exception is true although there are no uncaught exceptions (rethrow, ghost exception))\n\n        PR libstdc++/14026\n        * libsupc++/eh_catch.cc (__cxa_begin_catch): Don't adjust\n        uncaughtExceptions during nested catch rethrow.\n        * testsuite/18_support/14026.cc: New.\n\nFrom-SVN: r77492", "tree": {"sha": "cc7b028fb0b5dddd6aa536778874ae7ce1806b33", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc7b028fb0b5dddd6aa536778874ae7ce1806b33"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c38628062d37af9bbf6478eaf9f0568c0e156eff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c38628062d37af9bbf6478eaf9f0568c0e156eff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c38628062d37af9bbf6478eaf9f0568c0e156eff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c38628062d37af9bbf6478eaf9f0568c0e156eff/comments", "author": null, "committer": null, "parents": [{"sha": "fb1b37c797ac31dbabfa627ccbbedd51006333ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb1b37c797ac31dbabfa627ccbbedd51006333ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb1b37c797ac31dbabfa627ccbbedd51006333ea"}], "stats": {"total": 49, "additions": 46, "deletions": 3}, "files": [{"sha": "4da5edd796afd74c8459a22bb2ce9e56e861b3ae", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c38628062d37af9bbf6478eaf9f0568c0e156eff/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c38628062d37af9bbf6478eaf9f0568c0e156eff/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c38628062d37af9bbf6478eaf9f0568c0e156eff", "patch": "@@ -1,3 +1,10 @@\n+2004-02-08  Richard Henderson  <rth@redhat.com>\n+\n+\tPR libstdc++/14026\n+\t* libsupc++/eh_catch.cc (__cxa_begin_catch): Don't adjust \n+\tuncaughtExceptions during nested catch rethrow.\n+\t* testsuite/18_support/14026.cc: New.\n+\n 2004-02-08  Paolo Carlini  <pcarlini@suse.de>\n \n \t* include/bits/basic_string.tcc (assign(const _CharT*, size_type)):"}, {"sha": "0e186605f09a064e96f93d033d0df19bbb388cbe", "filename": "libstdc++-v3/libsupc++/eh_catch.cc", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c38628062d37af9bbf6478eaf9f0568c0e156eff/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Feh_catch.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c38628062d37af9bbf6478eaf9f0568c0e156eff/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Feh_catch.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Feh_catch.cc?ref=c38628062d37af9bbf6478eaf9f0568c0e156eff", "patch": "@@ -1,5 +1,5 @@\n // -*- C++ -*- Exception handling routines for catching.\n-// Copyright (C) 2001, 2003 Free Software Foundation, Inc.\n+// Copyright (C) 2001, 2003, 2004 Free Software Foundation, Inc.\n //\n // This file is part of GCC.\n //\n@@ -65,10 +65,12 @@ __cxa_begin_catch (void *exc_obj_in)\n     // This exception was rethrown from an immediately enclosing region.\n     count = -count + 1;\n   else\n-    count += 1;\n+    {\n+      count += 1;\n+      globals->uncaughtExceptions -= 1;\n+    }\n   header->handlerCount = count;\n \n-  globals->uncaughtExceptions -= 1;\n   if (header != prev)\n     {\n       header->nextException = prev;"}, {"sha": "103ac64a9d70ace38f258b111d99a66b47f06382", "filename": "libstdc++-v3/testsuite/18_support/14026.cc", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c38628062d37af9bbf6478eaf9f0568c0e156eff/libstdc%2B%2B-v3%2Ftestsuite%2F18_support%2F14026.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c38628062d37af9bbf6478eaf9f0568c0e156eff/libstdc%2B%2B-v3%2Ftestsuite%2F18_support%2F14026.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F18_support%2F14026.cc?ref=c38628062d37af9bbf6478eaf9f0568c0e156eff", "patch": "@@ -0,0 +1,34 @@\n+// PR 14026\n+// 18.6.4 uncaught_exception\n+\n+#include <cstdlib>\n+#include <exception>\n+#include <testsuite_hooks.h>\n+\n+static void\n+no_uncaught ()\n+{\n+  if (std::uncaught_exception ())\n+    abort ();\n+}\n+\n+int\n+main ()\n+{\n+  try\n+    {\n+      throw 1;\n+    }\n+  catch (...)\n+    {\n+      try\n+        {\n+          throw;\n+        }\n+      catch (...)\n+        {\n+          no_uncaught ();\n+        }\n+    }\n+  no_uncaught ();\n+}"}]}