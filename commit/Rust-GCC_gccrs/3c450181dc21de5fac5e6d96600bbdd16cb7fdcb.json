{"sha": "3c450181dc21de5fac5e6d96600bbdd16cb7fdcb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2M0NTAxODFkYzIxZGU1ZmFjNWU2ZDk2NjAwYmJkZDE2Y2I3ZmRjYg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-11-11T21:21:50Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-11-11T21:21:50Z"}, "message": "mksysinfo, net: Always define F_DUPFD_CLOEXEC.\n\nFor Solaris and CentOS portability.\n\nFrom-SVN: r204687", "tree": {"sha": "4f7025cbbf5334e10ed41103edbe6ce63bd5b86d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4f7025cbbf5334e10ed41103edbe6ce63bd5b86d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3c450181dc21de5fac5e6d96600bbdd16cb7fdcb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c450181dc21de5fac5e6d96600bbdd16cb7fdcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c450181dc21de5fac5e6d96600bbdd16cb7fdcb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c450181dc21de5fac5e6d96600bbdd16cb7fdcb/comments", "author": null, "committer": null, "parents": [{"sha": "35aacd4cc9fa3b7c80192eb0e78ea7bba7e56358", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35aacd4cc9fa3b7c80192eb0e78ea7bba7e56358", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35aacd4cc9fa3b7c80192eb0e78ea7bba7e56358"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "4911ab0abe3f3aac33211a61750c48f39d5b9a4d", "filename": "libgo/go/net/fd_unix.go", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c450181dc21de5fac5e6d96600bbdd16cb7fdcb/libgo%2Fgo%2Fnet%2Ffd_unix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c450181dc21de5fac5e6d96600bbdd16cb7fdcb/libgo%2Fgo%2Fnet%2Ffd_unix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fnet%2Ffd_unix.go?ref=3c450181dc21de5fac5e6d96600bbdd16cb7fdcb", "patch": "@@ -410,7 +410,7 @@ func (fd *netFD) accept(toAddr func(syscall.Sockaddr) Addr) (netfd *netFD, err e\n var tryDupCloexec = int32(1)\n \n func dupCloseOnExec(fd int) (newfd int, err error) {\n-\tif atomic.LoadInt32(&tryDupCloexec) == 1 {\n+\tif atomic.LoadInt32(&tryDupCloexec) == 1 && syscall.F_DUPFD_CLOEXEC != 0 {\n \t\tr0, _, e1 := syscall.Syscall(syscall.SYS_FCNTL, uintptr(fd), syscall.F_DUPFD_CLOEXEC, 0)\n \t\tif runtime.GOOS == \"darwin\" && e1 == syscall.EBADF {\n \t\t\t// On OS X 10.6 and below (but we only support"}, {"sha": "025729ccad1df0259cd014b915f8fb46d555b1d6", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c450181dc21de5fac5e6d96600bbdd16cb7fdcb/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c450181dc21de5fac5e6d96600bbdd16cb7fdcb/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=3c450181dc21de5fac5e6d96600bbdd16cb7fdcb", "patch": "@@ -220,6 +220,11 @@ if ! grep '^const O_CLOEXEC' ${OUT} >/dev/null 2>&1; then\n   echo \"const O_CLOEXEC = 0\" >> ${OUT}\n fi\n \n+# The os package requires F_DUPFD_CLOEXEC to be defined.\n+if ! grep '^const F_DUPFD_CLOEXEC' ${OUT} >/dev/null 2>&1; then\n+  echo \"const F_DUPFD_CLOEXEC = 0\" >> ${OUT}\n+fi\n+\n # These flags can be lost on i386 GNU/Linux when using\n # -D_FILE_OFFSET_BITS=64, because we see \"#define F_SETLK F_SETLK64\"\n # before we see the definition of F_SETLK64."}]}