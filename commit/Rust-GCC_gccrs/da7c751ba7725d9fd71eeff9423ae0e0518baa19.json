{"sha": "da7c751ba7725d9fd71eeff9423ae0e0518baa19", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGE3Yzc1MWJhNzcyNWQ5ZmQ3MWVlZmY5NDIzYWUwZTA1MThiYWExOQ==", "commit": {"author": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2017-03-03T16:35:00Z"}, "committer": {"name": "Martin Sebor", "email": "msebor@gcc.gnu.org", "date": "2017-03-03T16:35:00Z"}, "message": "PR tree-optimization/79699 - small memory leak in MPFR\n\ngcc/ChangeLog:\n\t* context.c (context::~context): Free MPFR caches to avoid\n\ta memory leak on program exit.\n\nFrom-SVN: r245878", "tree": {"sha": "5ab26fcfe0c2379490c77c00e1f88aff0180a583", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ab26fcfe0c2379490c77c00e1f88aff0180a583"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da7c751ba7725d9fd71eeff9423ae0e0518baa19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da7c751ba7725d9fd71eeff9423ae0e0518baa19", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da7c751ba7725d9fd71eeff9423ae0e0518baa19", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da7c751ba7725d9fd71eeff9423ae0e0518baa19/comments", "author": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d9074b295905374434534278524d541c47545347", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9074b295905374434534278524d541c47545347", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9074b295905374434534278524d541c47545347"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "d78b3f41d5322ae4973311c8f03ae80106919310", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da7c751ba7725d9fd71eeff9423ae0e0518baa19/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da7c751ba7725d9fd71eeff9423ae0e0518baa19/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=da7c751ba7725d9fd71eeff9423ae0e0518baa19", "patch": "@@ -1,3 +1,9 @@\n+2017-03-03  Martin Sebor  <msebor@redhat.com>\n+\n+\tPR tree-optimization/79699\n+\t* context.c (context::~context): Free MPFR caches to avoid\n+\ta memory leak on program exit.\n+\n 2017-03-03  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/aarch64/aarch64.c (aarch64_float_const_representable_p):"}, {"sha": "bacad5a5e77549ddb6dbd8984cc2fc8efee36cd7", "filename": "gcc/context.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da7c751ba7725d9fd71eeff9423ae0e0518baa19/gcc%2Fcontext.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da7c751ba7725d9fd71eeff9423ae0e0518baa19/gcc%2Fcontext.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcontext.c?ref=da7c751ba7725d9fd71eeff9423ae0e0518baa19", "patch": "@@ -23,6 +23,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"context.h\"\n #include \"pass_manager.h\"\n #include \"dumpfile.h\"\n+#include \"realmpfr.h\"\n \n /* The singleton holder of global state: */\n gcc::context *g;\n@@ -42,4 +43,7 @@ gcc::context::~context ()\n {\n   delete m_passes;\n   delete m_dumps;\n+\n+  /* Release MPFR caches to avoid Valgrind leak reports.  */\n+  mpfr_free_cache ();\n }"}]}