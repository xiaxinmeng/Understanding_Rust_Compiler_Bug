{"sha": "a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTdmYThkMTgxOWM1NWJmYjc4OTkzZWFjM2FhYmMzOGJiYzIyNWY2OQ==", "commit": {"author": {"name": "Edward Smith-Rowland", "email": "3dw4rd@verizon.net", "date": "2014-12-20T01:21:15Z"}, "committer": {"name": "Edward Smith-Rowland", "email": "emsr@gcc.gnu.org", "date": "2014-12-20T01:21:15Z"}, "message": "c-cppbuiltin.c (__cpp_sized_deallocation): Uncomment and move macro.\n\nc-family/\n\n2014-12-20  Edward Smith-Rowland  <3dw4rd@verizon.net>\n\n\t* c-cppbuiltin.c (__cpp_sized_deallocation): Uncomment and move macro.\n\tControl macro with flag_sized_deallocation.\n\n\ntestsuite/\n\n2014-12-20  Edward Smith-Rowland  <3dw4rd@verizon.net>\n\n\t* g++.dg/cpp1y/feat-cxx98-neg.C: Enable __cpp_sized_deallocation test.\n\t* g++.dg/cpp1y/feat-cxx14.C: Ditto.\n\t* g++.dg/cpp1y/feat-cxx11-neg.C: Ditto and move tests for consistent\n\torder.\n\t* g++.dg/cpp1y/feat-sized-dealloc-neg.C: New.\n\t* g++.dg/cpp1y/feat-sized-dealloc.C: New.\n\nFrom-SVN: r218986", "tree": {"sha": "91dae2664c4bf4da7b40f355d728accd028ab2b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/91dae2664c4bf4da7b40f355d728accd028ab2b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/comments", "author": {"login": "emsr", "id": 1936479, "node_id": "MDQ6VXNlcjE5MzY0Nzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1936479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emsr", "html_url": "https://github.com/emsr", "followers_url": "https://api.github.com/users/emsr/followers", "following_url": "https://api.github.com/users/emsr/following{/other_user}", "gists_url": "https://api.github.com/users/emsr/gists{/gist_id}", "starred_url": "https://api.github.com/users/emsr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emsr/subscriptions", "organizations_url": "https://api.github.com/users/emsr/orgs", "repos_url": "https://api.github.com/users/emsr/repos", "events_url": "https://api.github.com/users/emsr/events{/privacy}", "received_events_url": "https://api.github.com/users/emsr/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "768952be25c2fc50bce51a5658377934d49f473f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/768952be25c2fc50bce51a5658377934d49f473f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/768952be25c2fc50bce51a5658377934d49f473f"}], "stats": {"total": 53, "additions": 44, "deletions": 9}, "files": [{"sha": "47aa690dae7d94ca3b94044428508b5c6158cc76", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "patch": "@@ -1,3 +1,8 @@\n+2014-12-20  Edward Smith-Rowland  <3dw4rd@verizon.net>\n+\n+\t* c-cppbuiltin.c (__cpp_sized_deallocation): Uncomment and move macro.\n+\tControl macro with flag_sized_deallocation.\n+\n 2014-12-20  Martin Uecker <uecker@eecs.berkeley.edu>\n \n \t* c.opt (Wdiscarded-array-qualifiers): New option."}, {"sha": "6cdb32ceebec93690510dd75cd5f97083b32a1fa", "filename": "gcc/c-family/c-cppbuiltin.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Fc-family%2Fc-cppbuiltin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Fc-family%2Fc-cppbuiltin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-cppbuiltin.c?ref=a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "patch": "@@ -866,8 +866,9 @@ c_cpp_builtins (cpp_reader *pfile)\n \t  cpp_define (pfile, \"__cpp_aggregate_nsdmi=201304\");\n \t  cpp_define (pfile, \"__cpp_variable_templates=201304\");\n \t  cpp_define (pfile, \"__cpp_digit_separators=201309\");\n-\t  //cpp_define (pfile, \"__cpp_sized_deallocation=201309\");\n \t}\n+      if (flag_sized_deallocation)\n+\tcpp_define (pfile, \"__cpp_sized_deallocation=201309\");\n     }\n   /* Note that we define this for C as well, so that we know if\n      __attribute__((cleanup)) will interface with EH.  */"}, {"sha": "85d11d015071232654f255cee75effecd987eb39", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "patch": "@@ -1,3 +1,12 @@\n+2014-12-19  Edward Smith-Rowland  <3dw4rd@verizon.net>\n+\n+\t* g++.dg/cpp1y/feat-cxx98-neg.C: Enable __cpp_sized_deallocation test.\n+\t* g++.dg/cpp1y/feat-cxx14.C: Ditto.\n+\t* g++.dg/cpp1y/feat-cxx11-neg.C: Ditto and move tests for consistent\n+\torder.\n+\t* g++.dg/cpp1y/feat-sized-dealloc-neg.C: New.\n+\t* g++.dg/cpp1y/feat-sized-dealloc.C: New.\n+\n 2014-12-20  Martin Uecker <uecker@eecs.berkeley.edu>\n \n \t* gcc.dg/Wwrite-strings-1.c: Change dg-warning."}, {"sha": "81daa04b4de9a22c194062c9b3a5eb1c9377208e", "filename": "gcc/testsuite/g++.dg/cpp1y/feat-cxx11-neg.C", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx11-neg.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx11-neg.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx11-neg.C?ref=a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "patch": "@@ -22,6 +22,10 @@\n #  error \"__cpp_return_type_deduction\" // { dg-error \"error\" }\n #endif\n \n+#ifndef __cpp_aggregate_nsdmi\n+#  error \"__cpp_aggregate_nsdmi\" // { dg-error \"error\" }\n+#endif\n+\n #ifndef __cpp_variable_templates\n #  error \"__cpp_variable_templates\" // { dg-error \"error\" }\n #endif\n@@ -30,8 +34,8 @@\n #  error \"__cpp_digit_separators\" // { dg-error \"error\" }\n #endif\n \n-#ifndef __cpp_aggregate_nsdmi\n-#  error \"__cpp_aggregate_nsdmi\" // { dg-error \"error\" }\n+#ifndef __cpp_sized_deallocation\n+#  error \"__cpp_sized_deallocation\" // { dg-error \"error\" }\n #endif\n \n //  Array TS features:"}, {"sha": "129296664c12cf26e19005f7926109773795f51d", "filename": "gcc/testsuite/g++.dg/cpp1y/feat-cxx14.C", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx14.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx14.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx14.C?ref=a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "patch": "@@ -175,9 +175,10 @@\n #  error \"__cpp_digit_separators != 201309\"\n #endif\n \n-//  Sized deallocation not in yet.\n-#ifdef __cpp_sized_deallocation\n+#ifndef __cpp_sized_deallocation\n #  error \"__cpp_sized_deallocation\"\n+#elif __cpp_sized_deallocation != 201309\n+#  error \"__cpp_sized_deallocation != 201309\"\n #endif\n \n //  GNU VLA support:"}, {"sha": "9c25fc3780ad390e696590ed59f37db0ac5f44ce", "filename": "gcc/testsuite/g++.dg/cpp1y/feat-cxx98-neg.C", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx98-neg.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx98-neg.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx98-neg.C?ref=a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "patch": "@@ -109,10 +109,9 @@\n #  error \"__cpp_digit_separators\" // { dg-error \"error\" }\n #endif\n \n-//  Sized deallocation not in yet.\n-//#ifdef __cpp_sized_deallocation\n-//#  error \"__cpp_sized_deallocation\"\n-//#endif\n+#ifndef __cpp_sized_deallocation\n+#  error \"__cpp_sized_deallocation\" // { dg-error \"error\" }\n+#endif\n \n //  C++11 attributes:\n "}, {"sha": "b1a3dc5e15727cf606208e14539a7e6d29b0a5bf", "filename": "gcc/testsuite/g++.dg/cpp1y/feat-sized-dealloc-neg.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-sized-dealloc-neg.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-sized-dealloc-neg.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-sized-dealloc-neg.C?ref=a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "patch": "@@ -0,0 +1,6 @@\n+// { dg-do compile { target c++14 } }\n+// { dg-options \"-fno-sized-deallocation\" }\n+\n+#ifndef __cpp_sized_deallocation\n+#  error \"__cpp_sized_deallocation\" // { dg-error \"error\" }\n+#endif"}, {"sha": "a91246ff5a3b93d1e71cbeee537f5ead6c210872", "filename": "gcc/testsuite/g++.dg/cpp1y/feat-sized-dealloc.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-sized-dealloc.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7fa8d1819c55bfb78993eac3aabc38bbc225f69/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-sized-dealloc.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-sized-dealloc.C?ref=a7fa8d1819c55bfb78993eac3aabc38bbc225f69", "patch": "@@ -0,0 +1,10 @@\n+// { dg-do compile { target c++11_only } }\n+// { dg-options \"-fsized-deallocation\" }\n+\n+// C++14 features:\n+\n+#ifndef __cpp_sized_deallocation\n+#  error \"__cpp_sized_deallocation\"\n+#elif __cpp_sized_deallocation != 201309\n+#  error \"__cpp_sized_deallocation != 201309\"\n+#endif"}]}