{"sha": "309e9930efb67cd497365b487ff3f66b4d178e8f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzA5ZTk5MzBlZmI2N2NkNDk3MzY1YjQ4N2ZmM2Y2NmI0ZDE3OGU4Zg==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2009-07-21T04:51:30Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2009-07-21T04:51:30Z"}, "message": "re PR fortran/40726 (miscompilation at -O1)\n\n2009-07-21  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/40726\n\t* trans-decl.c (gfc_get_extern_function_decl): Do not set\n\tDECL_IS_MALLOC for pointer valued functions.\n\t(build_function_decl): The same.\n\nFrom-SVN: r149846", "tree": {"sha": "3788d167fcc76815d634acbfc48c8773ce67ce86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3788d167fcc76815d634acbfc48c8773ce67ce86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/309e9930efb67cd497365b487ff3f66b4d178e8f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/309e9930efb67cd497365b487ff3f66b4d178e8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/309e9930efb67cd497365b487ff3f66b4d178e8f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/309e9930efb67cd497365b487ff3f66b4d178e8f/comments", "author": null, "committer": null, "parents": [{"sha": "7fa94fbb93a68190133b41905db29bc00b820b7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7fa94fbb93a68190133b41905db29bc00b820b7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7fa94fbb93a68190133b41905db29bc00b820b7f"}], "stats": {"total": 20, "additions": 7, "deletions": 13}, "files": [{"sha": "ebd8a4c2d0a4e56e5c2387a4f6bb3e8a3c6da28a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/309e9930efb67cd497365b487ff3f66b4d178e8f/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/309e9930efb67cd497365b487ff3f66b4d178e8f/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=309e9930efb67cd497365b487ff3f66b4d178e8f", "patch": "@@ -1,3 +1,10 @@\n+2009-07-21  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/40726\n+\t* trans-decl.c (gfc_get_extern_function_decl): Do not set\n+\tDECL_IS_MALLOC for pointer valued functions.\n+\t(build_function_decl): The same.\n+\n 2009-07-19  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/40727"}, {"sha": "fa25782b949432dbfc4ce3f83042c9149ee8a51a", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/309e9930efb67cd497365b487ff3f66b4d178e8f/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/309e9930efb67cd497365b487ff3f66b4d178e8f/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=309e9930efb67cd497365b487ff3f66b4d178e8f", "patch": "@@ -1423,12 +1423,6 @@ gfc_get_extern_function_decl (gfc_symbol * sym)\n \t\t       FUNCTION_DECL, name, type);\n \n   SET_DECL_ASSEMBLER_NAME (fndecl, mangled_name);\n-  /* If the return type is a pointer, avoid alias issues by setting\n-     DECL_IS_MALLOC to nonzero. This means that the function should be\n-     treated as if it were a malloc, meaning it returns a pointer that\n-     is not an alias.  */\n-  if (POINTER_TYPE_P (type))\n-    DECL_IS_MALLOC (fndecl) = 1;\n \n   /* Set the context of this decl.  */\n   if (0 && sym->ns && sym->ns->proc_name)\n@@ -1559,13 +1553,6 @@ build_function_decl (gfc_symbol * sym)\n   /* Don't call layout_decl for a RESULT_DECL.\n      layout_decl (result_decl, 0);  */\n \n-  /* If the return type is a pointer, avoid alias issues by setting\n-     DECL_IS_MALLOC to nonzero. This means that the function should be\n-     treated as if it were a malloc, meaning it returns a pointer that\n-     is not an alias.  */\n-  if (POINTER_TYPE_P (type))\n-    DECL_IS_MALLOC (fndecl) = 1;\n-\n   /* Set up all attributes for the function.  */\n   DECL_CONTEXT (fndecl) = current_function_decl;\n   DECL_EXTERNAL (fndecl) = 0;"}]}