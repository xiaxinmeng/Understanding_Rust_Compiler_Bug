{"sha": "54b96a2d6adb14e7158097f5d75c0aff6df8987f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTRiOTZhMmQ2YWRiMTRlNzE1ODA5N2Y1ZDc1YzBhZmY2ZGY4OTg3Zg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2015-10-27T16:42:24Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2015-10-27T16:42:24Z"}, "message": "re PR fortran/68108 (erroneous error message 'scalar integer expression expected')\n\n2015-10-27  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/68108\n\t* decl.c (char_len_param_value): Check for REF_ARRAY.\n \n2015-10-27  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/68108\n\t* gfortran.dg/pr67805_2.f90: New test.\n\nFrom-SVN: r229446", "tree": {"sha": "a37757079981bcc615f4dcff51924fac97030ef7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a37757079981bcc615f4dcff51924fac97030ef7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54b96a2d6adb14e7158097f5d75c0aff6df8987f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54b96a2d6adb14e7158097f5d75c0aff6df8987f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54b96a2d6adb14e7158097f5d75c0aff6df8987f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54b96a2d6adb14e7158097f5d75c0aff6df8987f/comments", "author": null, "committer": null, "parents": [{"sha": "5affe17f859a0857b9d9c7c638f1e4e3939d1172", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5affe17f859a0857b9d9c7c638f1e4e3939d1172", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5affe17f859a0857b9d9c7c638f1e4e3939d1172"}], "stats": {"total": 38, "additions": 36, "deletions": 2}, "files": [{"sha": "37956ce444a567ef81c9db1384cbeff1b469c0a7", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b96a2d6adb14e7158097f5d75c0aff6df8987f/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b96a2d6adb14e7158097f5d75c0aff6df8987f/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=54b96a2d6adb14e7158097f5d75c0aff6df8987f", "patch": "@@ -1,3 +1,8 @@\n+2015-10-27  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/68108\n+\t* decl.c (char_len_param_value): Check for REF_ARRAY.\n+\n 2015-10-26  Louis Krupp  <louis.krupp@zoho.com>\n \n \tPR fortran/66056"}, {"sha": "07c539162f4a3857cf38fdd4f30b000896ed6d23", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b96a2d6adb14e7158097f5d75c0aff6df8987f/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b96a2d6adb14e7158097f5d75c0aff6df8987f/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=54b96a2d6adb14e7158097f5d75c0aff6df8987f", "patch": "@@ -748,13 +748,15 @@ char_len_param_value (gfc_expr **expr, bool *deferred)\n \n       /* This catches the invalid code \"[character(m(2:3)) :: 'x', 'y']\",\n \t which causes an ICE if gfc_reduce_init_expr() is called.  */\n-      if (e->ref && e->ref->u.ar.type == AR_UNKNOWN\n+      if (e->ref && e->ref->type == REF_ARRAY\n+\t  && e->ref->u.ar.type == AR_UNKNOWN\n \t  && e->ref->u.ar.dimen_type[0] == DIMEN_RANGE)\n \tgoto syntax;\n \n       gfc_reduce_init_expr (e);\n \n-      if ((e->ref && e->ref->u.ar.type != AR_ELEMENT) \n+      if ((e->ref && e->ref->type == REF_ARRAY\n+\t   && e->ref->u.ar.type != AR_ELEMENT) \n \t  || (!e->ref && e->expr_type == EXPR_ARRAY))\n \t{\n \t  gfc_free_expr (e);"}, {"sha": "ab53bc1ff3c7ad5ce5159863e6976cb249d700ce", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b96a2d6adb14e7158097f5d75c0aff6df8987f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b96a2d6adb14e7158097f5d75c0aff6df8987f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=54b96a2d6adb14e7158097f5d75c0aff6df8987f", "patch": "@@ -1,3 +1,8 @@\n+ 2015-10-27  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/68108\n+\t* gfortran.dg/pr67805_2.f90: New test.\n+\n 2015-10-27  Abderrazek Zaafrani  <a.zaafrani@samsung.com>\n \t    Aditya Kumar  <aditya.k7@samsung.com>\n "}, {"sha": "4438d3e6912fb1d3ac6970b8678251bf18cf4474", "filename": "gcc/testsuite/gfortran.dg/pr67805_2.f90", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b96a2d6adb14e7158097f5d75c0aff6df8987f/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67805_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b96a2d6adb14e7158097f5d75c0aff6df8987f/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67805_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67805_2.f90?ref=54b96a2d6adb14e7158097f5d75c0aff6df8987f", "patch": "@@ -0,0 +1,22 @@\n+! { dg-do compile }\n+! PR fortran/68108\n+! Code contributed by Juergen Reuter (juergen.reuter at desy dot de)\n+! Test fix for regression caused by PR fortran/67805.\n+module lexers\n+  implicit none\n+  type :: template_t\n+     character(256) :: charset1\n+     integer :: len1\n+  end type template_t\n+\n+contains\n+\n+  subroutine match_quoted (tt, s, n)\n+    type(template_t), intent(in) :: tt\n+    character(*), intent(in) :: s\n+    integer, intent(out) :: n\n+    character(tt%len1) :: ch1\n+    ch1 = tt%charset1\n+  end subroutine match_quoted\n+\n+end module lexers"}]}