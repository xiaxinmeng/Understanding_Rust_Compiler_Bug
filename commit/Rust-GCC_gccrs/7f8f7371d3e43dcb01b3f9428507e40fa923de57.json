{"sha": "7f8f7371d3e43dcb01b3f9428507e40fa923de57", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Y4ZjczNzFkM2U0M2RjYjAxYjNmOTQyODUwN2U0MGZhOTIzZGU1Nw==", "commit": {"author": {"name": "John Hassey", "email": "hassey@gnu.org", "date": "1993-02-18T03:05:08Z"}, "committer": {"name": "John Hassey", "email": "hassey@gnu.org", "date": "1993-02-18T03:05:08Z"}, "message": "(emit_ldst): For large offsets use register index\ninstead of immediate.\n\nFrom-SVN: r3484", "tree": {"sha": "ded4d7a206a3cc4446f67a92a6f822d1d6508015", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ded4d7a206a3cc4446f67a92a6f822d1d6508015"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f8f7371d3e43dcb01b3f9428507e40fa923de57", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f8f7371d3e43dcb01b3f9428507e40fa923de57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f8f7371d3e43dcb01b3f9428507e40fa923de57", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f8f7371d3e43dcb01b3f9428507e40fa923de57/comments", "author": null, "committer": null, "parents": [{"sha": "abc1d3f177dd5824bb9c5bb99abd177c2ee6f5be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abc1d3f177dd5824bb9c5bb99abd177c2ee6f5be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abc1d3f177dd5824bb9c5bb99abd177c2ee6f5be"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "c4718fb534758dbe0f3878b55e18c5858e571ce4", "filename": "gcc/config/m88k/m88k.c", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f8f7371d3e43dcb01b3f9428507e40fa923de57/gcc%2Fconfig%2Fm88k%2Fm88k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f8f7371d3e43dcb01b3f9428507e40fa923de57/gcc%2Fconfig%2Fm88k%2Fm88k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm88k%2Fm88k.c?ref=7f8f7371d3e43dcb01b3f9428507e40fa923de57", "patch": "@@ -2127,7 +2127,22 @@ emit_ldst (store_p, regno, mode, offset)\n      int offset;\n {\n   rtx reg = gen_rtx (REG, mode, regno);\n-  rtx mem = gen_rtx (MEM, mode, plus_constant (stack_pointer_rtx, offset));\n+  rtx mem;\n+\n+  if (SMALL_INTVAL (offset))\n+    {\n+      mem = gen_rtx (MEM, mode, plus_constant (stack_pointer_rtx, offset));\n+    }\n+  else\n+    {\n+      /* offset is too large for immediate index must use register */\n+\n+      rtx disp = gen_rtx (CONST_INT, VOIDmode, offset);\n+      rtx temp = gen_rtx (REG, SImode, TEMP_REGNUM);\n+      rtx regi = gen_rtx (PLUS, SImode, stack_pointer_rtx, temp);\n+      emit_move_insn (temp, disp);\n+      mem = gen_rtx (MEM, mode, regi);\n+    }\n \n   if (store_p)\n     emit_move_insn (mem, reg);"}]}