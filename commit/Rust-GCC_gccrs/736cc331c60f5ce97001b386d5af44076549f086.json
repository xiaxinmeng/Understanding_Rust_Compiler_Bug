{"sha": "736cc331c60f5ce97001b386d5af44076549f086", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzM2Y2MzMzFjNjBmNWNlOTcwMDFiMzg2ZDVhZjQ0MDc2NTQ5ZjA4Ng==", "commit": {"author": {"name": "Johannes Singler", "email": "singler@kit.edu", "date": "2010-06-08T09:11:49Z"}, "committer": {"name": "Johannes Singler", "email": "singler@gcc.gnu.org", "date": "2010-06-08T09:11:49Z"}, "message": "2010-06-08  Johannes Singler  <singler@kit.edu>\n\n        * include/parallel/partial_sum.h\n        (__parallel_partial_sum_linear):\n        Correctly calculate part lengths for partial_sum_dilation!=1.0f.\n\nFrom-SVN: r160428", "tree": {"sha": "9129229778941484eeb985061e9bde666e88d58c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9129229778941484eeb985061e9bde666e88d58c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/736cc331c60f5ce97001b386d5af44076549f086", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/736cc331c60f5ce97001b386d5af44076549f086", "html_url": "https://github.com/Rust-GCC/gccrs/commit/736cc331c60f5ce97001b386d5af44076549f086", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/736cc331c60f5ce97001b386d5af44076549f086/comments", "author": null, "committer": null, "parents": [{"sha": "a9429e29f506f5b8c28b28ab387fc2d261a4220c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9429e29f506f5b8c28b28ab387fc2d261a4220c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9429e29f506f5b8c28b28ab387fc2d261a4220c"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "3ebfd13bac37e739ad6cb4154e68552d1efe9e11", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/736cc331c60f5ce97001b386d5af44076549f086/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/736cc331c60f5ce97001b386d5af44076549f086/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=736cc331c60f5ce97001b386d5af44076549f086", "patch": "@@ -1,3 +1,9 @@\n+2010-06-08  Johannes Singler  <singler@kit.edu>\n+\n+        * include/parallel/partial_sum.h\n+        (__parallel_partial_sum_linear):\n+        Correctly calculate part lengths for partial_sum_dilation!=1.\n+\n 2010-06-07  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR libstdc++/44417"}, {"sha": "d398c4585a252ff02c52e47ad90c272c0663b1be", "filename": "libstdc++-v3/include/parallel/partial_sum.h", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/736cc331c60f5ce97001b386d5af44076549f086/libstdc%2B%2B-v3%2Finclude%2Fparallel%2Fpartial_sum.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/736cc331c60f5ce97001b386d5af44076549f086/libstdc%2B%2B-v3%2Finclude%2Fparallel%2Fpartial_sum.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fparallel%2Fpartial_sum.h?ref=736cc331c60f5ce97001b386d5af44076549f086", "patch": "@@ -127,10 +127,13 @@ namespace __gnu_parallel\n \t    equally_split(__n, __num_threads + 1, __borders);\n \t  else\n \t    {\n+\t      _DifferenceType __first_part_length =\n+\t\t  std::max<_DifferenceType>(1,\n+\t\t    __n / (1.0f + __s.partial_sum_dilation * __num_threads));\n \t      _DifferenceType __chunk_length =\n-\t\t((double)__n\n-\t\t / ((double)__num_threads + __s.partial_sum_dilation)),\n-\t\t__borderstart = __n - __num_threads * __chunk_length;\n+\t\t  (__n - __first_part_length) / __num_threads;\n+\t      _DifferenceType __borderstart =\n+\t\t  __n - __num_threads * __chunk_length;\n \t      __borders[0] = 0;\n \t      for (_ThreadIndex __i = 1; __i < (__num_threads + 1); ++__i)\n \t\t{"}]}