{"sha": "c6c36e7310e6b67f2c37f0dabc6852c2b50c7a3c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzZjMzZlNzMxMGU2YjY3ZjJjMzdmMGRhYmM2ODUyYzJiNTBjN2EzYw==", "commit": {"author": {"name": "Teresa Johnson", "email": "tejohnson@google.com", "date": "2012-09-07T13:49:47Z"}, "committer": {"name": "Teresa Johnson", "email": "tejohnson@gcc.gnu.org", "date": "2012-09-07T13:49:47Z"}, "message": "This fixes part of the issue described in PR gcov-profile/54487 where there...\n\nThis fixes part of the issue described in PR gcov-profile/54487 where\nthere were warnings about mismatches due to slight differences in the\nmerged histograms in different object files. This can happen due to\nthe truncating integer division in the merge routine, which could result\nin slightly different histograms when summaries are merged in different\norders.\n\n2012-09-07  Teresa Johnson  <tejohnson@google.com>\n\n        PR gcov-profile/54487\n\t* libgcc/libgcov.c (gcov_exit): Avoid warning on histogram\n        differences.\n\nFrom-SVN: r191074", "tree": {"sha": "c39d7334f52a5e6331db1c4a7f53a91d5887df86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c39d7334f52a5e6331db1c4a7f53a91d5887df86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c6c36e7310e6b67f2c37f0dabc6852c2b50c7a3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6c36e7310e6b67f2c37f0dabc6852c2b50c7a3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6c36e7310e6b67f2c37f0dabc6852c2b50c7a3c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6c36e7310e6b67f2c37f0dabc6852c2b50c7a3c/comments", "author": {"login": "teresajohnson", "id": 20446403, "node_id": "MDQ6VXNlcjIwNDQ2NDAz", "avatar_url": "https://avatars.githubusercontent.com/u/20446403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teresajohnson", "html_url": "https://github.com/teresajohnson", "followers_url": "https://api.github.com/users/teresajohnson/followers", "following_url": "https://api.github.com/users/teresajohnson/following{/other_user}", "gists_url": "https://api.github.com/users/teresajohnson/gists{/gist_id}", "starred_url": "https://api.github.com/users/teresajohnson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teresajohnson/subscriptions", "organizations_url": "https://api.github.com/users/teresajohnson/orgs", "repos_url": "https://api.github.com/users/teresajohnson/repos", "events_url": "https://api.github.com/users/teresajohnson/events{/privacy}", "received_events_url": "https://api.github.com/users/teresajohnson/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "48d3d75d39df4bd391c3e89f9e31df505c672151", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48d3d75d39df4bd391c3e89f9e31df505c672151", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48d3d75d39df4bd391c3e89f9e31df505c672151"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "cc030f2640ac6a70b5d7537a1360919be966ab17", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6c36e7310e6b67f2c37f0dabc6852c2b50c7a3c/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6c36e7310e6b67f2c37f0dabc6852c2b50c7a3c/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=c6c36e7310e6b67f2c37f0dabc6852c2b50c7a3c", "patch": "@@ -1,3 +1,9 @@\n+2012-09-07  Teresa Johnson  <tejohnson@google.com>\n+\n+        PR gcov-profile/54487\n+\t* libgcc/libgcov.c (gcov_exit): Avoid warning on histogram\n+        differences.\n+\n 2012-09-05  Georg-Johann Lay  <avr@gjlay.de>\n \n \tPR target/54461"}, {"sha": "c58427e753bb57eee491def0567d4edc4a4d9fd2", "filename": "libgcc/libgcov.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6c36e7310e6b67f2c37f0dabc6852c2b50c7a3c/libgcc%2Flibgcov.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6c36e7310e6b67f2c37f0dabc6852c2b50c7a3c/libgcc%2Flibgcov.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcov.c?ref=c6c36e7310e6b67f2c37f0dabc6852c2b50c7a3c", "patch": "@@ -707,7 +707,13 @@ gcov_exit (void)\n \t    memcpy (cs_all, cs_prg, sizeof (*cs_all));\n \t  else if (!all_prg.checksum\n \t\t   && (!GCOV_LOCKED || cs_all->runs == cs_prg->runs)\n-\t\t   && memcmp (cs_all, cs_prg, sizeof (*cs_all)))\n+                   /* Don't compare the histograms, which may have slight\n+                      variations depending on the order they were updated\n+                      due to the truncating integer divides used in the\n+                      merge.  */\n+                   && memcmp (cs_all, cs_prg,\n+                              sizeof (*cs_all) - (sizeof (gcov_bucket_type)\n+                                                  * GCOV_HISTOGRAM_SIZE)))\n \t    {\n \t      fprintf (stderr, \"profiling:%s:Invocation mismatch - some data files may have been removed%s\\n\",\n \t\t       gi_filename, GCOV_LOCKED"}]}