{"sha": "1b68567490b702d200be15437d69449f9becfe8d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWI2ODU2NzQ5MGI3MDJkMjAwYmUxNTQzN2Q2OTQ0OWY5YmVjZmU4ZA==", "commit": {"author": {"name": "Vincent Celier", "email": "celier@adacore.com", "date": "2007-10-15T13:55:54Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-10-15T13:55:54Z"}, "message": "snames.adb, snames.ads: Add new standard name runtime_library_dir\n\n2007-10-15  Vincent Celier  <celier@adacore.com>\n\n\t* snames.adb, snames.ads: Add new standard name runtime_library_dir\n\n\t* prj.ads (Language_Config): Add new component Runtime_Library_Dir\n\n\t* prj-attr.adb: Add project level attribute Runtime_Library_Dir\n\n\t* prj-env.adb (Create_Mapping_File): Do not put an entry if the path of\n\tthe source is unknown.\n\n\t* prj-ext.adb: Spelling error fix\n\n\t* prj-nmsc.adb (Check_Ada_Name): Reject any unit that includes an Ada\n\t95 reserved word in its name.\n\t(Process_Project_Level_Array_Attributes): Process new attribute\n\tRuntime_Library_Dir.\n\n\t* prj-part.adb (Parse_Single_Project): Do not check the name of the\n\tconfig project against the user project names.\n\n\t* prj-proc.adb (Expression): In multi-language mode, indexes that do\n\tnot include a dot are always case insensitive.\n\t(Process_Declarative_Items): Ditto\n\t(Process_Project_Tree_Phase_1): Set Success to False in case an error is\n\tdetected.\n\n\t* prj-util.adb (Value_Of (In_Array)): When Force_Lower_Case_Index is\n\tTrue, compare both indexes in lower case.\n\nFrom-SVN: r129329", "tree": {"sha": "d473c56824326a8cc5ef2a16bc73fee0a57b0839", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d473c56824326a8cc5ef2a16bc73fee0a57b0839"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b68567490b702d200be15437d69449f9becfe8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b68567490b702d200be15437d69449f9becfe8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b68567490b702d200be15437d69449f9becfe8d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b68567490b702d200be15437d69449f9becfe8d/comments", "author": {"login": "vcelier", "id": 8888056, "node_id": "MDQ6VXNlcjg4ODgwNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8888056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcelier", "html_url": "https://github.com/vcelier", "followers_url": "https://api.github.com/users/vcelier/followers", "following_url": "https://api.github.com/users/vcelier/following{/other_user}", "gists_url": "https://api.github.com/users/vcelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcelier/subscriptions", "organizations_url": "https://api.github.com/users/vcelier/orgs", "repos_url": "https://api.github.com/users/vcelier/repos", "events_url": "https://api.github.com/users/vcelier/events{/privacy}", "received_events_url": "https://api.github.com/users/vcelier/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c16dd6a8559cddeb9a5fdf777d8b1f9cc775a627", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c16dd6a8559cddeb9a5fdf777d8b1f9cc775a627", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c16dd6a8559cddeb9a5fdf777d8b1f9cc775a627"}], "stats": {"total": 573, "additions": 327, "deletions": 246}, "files": [{"sha": "41bd6c4f4cebe347bc2704438488302fbb006346", "filename": "gcc/ada/prj-attr.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-attr.adb?ref=1b68567490b702d200be15437d69449f9becfe8d", "patch": "@@ -127,6 +127,7 @@ package body Prj.Attr is\n    \"SVlibrary_auto_init_supported#\" &\n    \"LVshared_library_minimum_switches#\" &\n    \"LVlibrary_version_switches#\" &\n+   \"Saruntime_library_dir#\" &\n \n    --  package Naming\n "}, {"sha": "f5259b1453d9cda503e3d96ee711047501ad914d", "filename": "gcc/ada/prj-env.adb", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-env.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-env.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-env.adb?ref=1b68567490b702d200be15437d69449f9becfe8d", "patch": "@@ -1333,7 +1333,8 @@ package body Prj.Env is\n \n                if Src_Data.Language_Name = Language and then\n                  (not Src_Data.Locally_Removed) and then\n-                 Src_Data.Replaced_By = No_Source\n+                 Src_Data.Replaced_By = No_Source and then\n+                 Src_Data.Path /= No_Path\n                then\n                   if Src_Data.Unit /= No_Name then\n                      Get_Name_String (Src_Data.Unit);\n@@ -1404,6 +1405,7 @@ package body Prj.Env is\n \n    procedure Delete_All_Path_Files (In_Tree : Project_Tree_Ref) is\n       Disregard : Boolean := True;\n+      pragma Warnings (Off, Disregard);\n \n    begin\n       for Index in Path_File_Table.First .."}, {"sha": "37c8fc1601a19318fa909b28284f66d265067aea", "filename": "gcc/ada/prj-ext.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-ext.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-ext.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-ext.adb?ref=1b68567490b702d200be15437d69449f9becfe8d", "patch": "@@ -217,7 +217,7 @@ package body Prj.Ext is\n             Name_Len := Name_Len - No_Project_Default_Dir'Length - 1;\n \n             --  After removing the '-', go back one character to get the next\n-            --  directory corectly.\n+            --  directory correctly.\n \n             Last := Last - 1;\n "}, {"sha": "0574cb2c6daa01de2f4f283eb7a5d6ed35598b95", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 174, "deletions": 141, "changes": 315, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=1b68567490b702d200be15437d69449f9becfe8d", "patch": "@@ -668,6 +668,48 @@ package body Prj.Nmsc is\n       Need_Letter     : Boolean := True;\n       Last_Underscore : Boolean := False;\n       OK              : Boolean := The_Name'Length > 0;\n+      First           : Positive;\n+\n+      function Is_Reserved (S : String) return Boolean;\n+      --  Check that the given name is not an Ada 95 reserved word. The\n+      --  reason for the Ada 95 here is that we do not want to exclude the case\n+      --  of an Ada 95 unit called Interface (for example). In Ada 2005, such\n+      --  a unit name would be rejected anyway by the compiler, so there is no\n+      --  requirement that the project file parser reject this.\n+\n+      -----------------\n+      -- Is_Reserved --\n+      -----------------\n+\n+      function Is_Reserved (S : String) return Boolean is\n+         Name : Name_Id;\n+\n+      begin\n+         Name_Len := 0;\n+         Add_Str_To_Name_Buffer (S);\n+         Name := Name_Find;\n+\n+         if Get_Name_Table_Byte (Name) /= 0\n+           and then Name /= Name_Project\n+           and then Name /= Name_Extends\n+           and then Name /= Name_External\n+           and then Name not in Ada_2005_Reserved_Words\n+         then\n+            Unit := No_Name;\n+\n+            if Current_Verbosity = High then\n+               Write_Str (The_Name);\n+               Write_Line (\" is an Ada reserved word.\");\n+            end if;\n+\n+            return True;\n+\n+         else\n+            return False;\n+         end if;\n+      end Is_Reserved;\n+\n+   --  Start of processing for Check_Ada_Name\n \n    begin\n       To_Lower (The_Name);\n@@ -677,11 +719,14 @@ package body Prj.Nmsc is\n \n       --  Special cases of children of packages A, G, I and S on VMS\n \n-      if OpenVMS_On_Target and then\n-        Name_Len > 3 and then\n-        Name_Buffer (2 .. 3) = \"__\" and then\n-        ((Name_Buffer (1) = 'a') or else (Name_Buffer (1) = 'g') or else\n-         (Name_Buffer (1) = 'i') or else (Name_Buffer (1) = 's'))\n+      if OpenVMS_On_Target\n+        and then Name_Len > 3\n+        and then Name_Buffer (2 .. 3) = \"__\"\n+        and then\n+          ((Name_Buffer (1) = 'a') or else\n+           (Name_Buffer (1) = 'g') or else\n+           (Name_Buffer (1) = 'i') or else\n+           (Name_Buffer (1) = 's'))\n       then\n          Name_Buffer (2) := '.';\n          Name_Buffer (3 .. Name_Len - 1) := Name_Buffer (4 .. Name_Len);\n@@ -690,28 +735,12 @@ package body Prj.Nmsc is\n \n       Real_Name := Name_Find;\n \n-      --  Check first that the given name is not an Ada 95 reserved word. The\n-      --  reason for the Ada 95 here is that we do not want to exclude the case\n-      --  of an Ada 95 unit called Interface (for example). In Ada 2005, such\n-      --  a unit name would be rejected anyway by the compiler, so there is no\n-      --  requirement that the project file parser reject this.\n-\n-      if Get_Name_Table_Byte (Real_Name) /= 0\n-        and then Real_Name /= Name_Project\n-        and then Real_Name /= Name_Extends\n-        and then Real_Name /= Name_External\n-        and then Real_Name not in Ada_2005_Reserved_Words\n-      then\n-         Unit := No_Name;\n-\n-         if Current_Verbosity = High then\n-            Write_Str (The_Name);\n-            Write_Line (\" is an Ada reserved word.\");\n-         end if;\n-\n+      if Is_Reserved (Name_Buffer (1 .. Name_Len)) then\n          return;\n       end if;\n \n+      First := The_Name'First;\n+\n       for Index in The_Name'Range loop\n          if Need_Letter then\n \n@@ -753,6 +782,13 @@ package body Prj.Nmsc is\n \n          elsif The_Name (Index) = '.' then\n \n+            --  First, check if the name before the dot is not a reserved word\n+            if Is_Reserved (The_Name (First .. Index - 1)) then\n+               return;\n+            end if;\n+\n+            First := Index + 1;\n+\n             --  We need a letter after a dot\n \n             Need_Letter := True;\n@@ -785,6 +821,12 @@ package body Prj.Nmsc is\n       OK := OK and then not Need_Letter and then not Last_Underscore;\n \n       if OK then\n+         if First /= Name'First and then\n+           Is_Reserved (The_Name (First .. The_Name'Last))\n+         then\n+            return;\n+         end if;\n+\n          Unit := Real_Name;\n \n       else\n@@ -824,6 +866,7 @@ package body Prj.Nmsc is\n \n          begin\n             --  Dot_Replacement cannot\n+\n             --   - be empty\n             --   - start or end with an alphanumeric\n             --   - be a single '_'\n@@ -1927,6 +1970,14 @@ package body Prj.Nmsc is\n                           (Lang_Index).Config.Toolchain_Version :=\n                           Element.Value.Value;\n \n+                     when Name_Runtime_Library_Dir =>\n+\n+                        --  Attribute Runtime_Library_Dir (<language>)\n+\n+                        In_Tree.Languages_Data.Table\n+                          (Lang_Index).Config.Runtime_Library_Dir :=\n+                          Element.Value.Value;\n+\n                      when others =>\n                         null;\n                   end case;\n@@ -1941,9 +1992,7 @@ package body Prj.Nmsc is\n \n    begin\n       Process_Project_Level_Simple_Attributes;\n-\n       Process_Project_Level_Array_Attributes;\n-\n       Process_Packages;\n \n       --  For unit based languages, set Casing, Dot_Replacement and\n@@ -3169,12 +3218,11 @@ package body Prj.Nmsc is\n                --  For all unit based languages, if any, set the specified\n                --  value of Dot_Replacement, Casing and/or Separate_Suffix.\n \n-               if Dot_Replacement /= No_File or else\n-                 Casing_Defined or else\n-                 Separate_Suffix /= No_File\n+               if Dot_Replacement /= No_File\n+                 or else Casing_Defined\n+                 or else Separate_Suffix /= No_File\n                then\n                   Lang_Id := Data.First_Language_Processing;\n-\n                   while Lang_Id /= No_Language_Index loop\n                      if In_Tree.Languages_Data.Table\n                        (Lang_Id).Config.Kind = Unit_Based\n@@ -3206,11 +3254,12 @@ package body Prj.Nmsc is\n             --  Next, get the spec and body suffixes\n \n             declare\n-               Suffix : Variable_Value;\n-\n-               Lang_Id : Language_Index := Data.First_Language_Processing;\n+               Suffix  : Variable_Value;\n+               Lang_Id : Language_Index;\n                Lang    : Name_Id;\n+\n             begin\n+               Lang_Id := Data.First_Language_Processing;\n                while Lang_Id /= No_Language_Index loop\n                   Lang := In_Tree.Languages_Data.Table (Lang_Id).Name;\n \n@@ -3384,18 +3433,20 @@ package body Prj.Nmsc is\n          end if;\n       end Check_Library;\n \n+   --  Start of processing for Check_Library_Attributes\n+\n    begin\n       --  Special case of extending project\n \n       if Data.Extends /= No_Project then\n          declare\n             Extended_Data : constant Project_Data :=\n-                           In_Tree.Projects.Table (Data.Extends);\n+                              In_Tree.Projects.Table (Data.Extends);\n \n          begin\n-            --  If the project extended is a library project, we inherit\n-            --  the library name, if it is not redefined; we check that\n-            --  the library directory is specified.\n+            --  If the project extended is a library project, we inherit the\n+            --  library name, if it is not redefined; we check that the library\n+            --  directory is specified.\n \n             if Extended_Data.Library then\n                if Lib_Name.Default then\n@@ -3606,7 +3657,7 @@ package body Prj.Nmsc is\n          else\n             if Lib_ALI_Dir.Value = Empty_String then\n                if Current_Verbosity = High then\n-                  Write_Line (\"No library 'A'L'I directory specified\");\n+                  Write_Line (\"No library ALI directory specified\");\n                end if;\n                Data.Library_ALI_Dir := Data.Library_Dir;\n                Data.Display_Library_ALI_Dir := Data.Display_Library_Dir;\n@@ -3946,10 +3997,11 @@ package body Prj.Nmsc is\n          end;\n \n          declare\n-            Current : Array_Element_Id := Data.Naming.Spec_Suffix;\n+            Current : Array_Element_Id;\n             Element : Array_Element;\n \n          begin\n+            Current := Data.Naming.Spec_Suffix;\n             while Current /= No_Array_Element loop\n                Element := In_Tree.Array_Elements.Table (Current);\n                Get_Name_String (Element.Value.Value);\n@@ -3970,14 +4022,14 @@ package body Prj.Nmsc is\n \n          declare\n             Impl_Suffixs : Array_Element_Id :=\n-              Util.Value_Of\n-                (Name_Body_Suffix,\n-                 Naming.Decl.Arrays,\n-                 In_Tree);\n+                             Util.Value_Of\n+                               (Name_Body_Suffix,\n+                                Naming.Decl.Arrays,\n+                                In_Tree);\n \n-            Suffix       : Array_Element_Id;\n-            Element      : Array_Element;\n-            Suffix2      : Array_Element_Id;\n+            Suffix  : Array_Element_Id;\n+            Element : Array_Element;\n+            Suffix2 : Array_Element_Id;\n \n          begin\n             --  If some suffixes have been specified, we make sure that\n@@ -3987,12 +4039,11 @@ package body Prj.Nmsc is\n \n             if Impl_Suffixs /= No_Array_Element then\n                Suffix := Data.Naming.Body_Suffix;\n-\n                while Suffix /= No_Array_Element loop\n                   Element :=\n                     In_Tree.Array_Elements.Table (Suffix);\n-                  Suffix2 := Impl_Suffixs;\n \n+                  Suffix2 := Impl_Suffixs;\n                   while Suffix2 /= No_Array_Element loop\n                      exit when In_Tree.Array_Elements.Table\n                                 (Suffix2).Index = Element.Index;\n@@ -4001,8 +4052,7 @@ package body Prj.Nmsc is\n                   end loop;\n \n                   --  There is a registered default suffix, but no suffix was\n-                  --  specified in the project file. Add the default to the\n-                  --  array.\n+                  --  specified in the project file. Add default to the array.\n \n                   if Suffix2 = No_Array_Element then\n                      Array_Element_Table.Increment_Last\n@@ -4029,10 +4079,11 @@ package body Prj.Nmsc is\n          end;\n \n          declare\n-            Current : Array_Element_Id := Data.Naming.Body_Suffix;\n+            Current : Array_Element_Id;\n             Element : Array_Element;\n \n          begin\n+            Current := Data.Naming.Body_Suffix;\n             while Current /= No_Array_Element loop\n                Element := In_Tree.Array_Elements.Table (Current);\n                Get_Name_String (Element.Value.Value);\n@@ -4070,12 +4121,12 @@ package body Prj.Nmsc is\n    ---------------------------------\n \n    procedure Check_Programming_Languages\n-     (In_Tree       : Project_Tree_Ref;\n-      Project       : Project_Id;\n-      Data          : in out Project_Data)\n+     (In_Tree : Project_Tree_Ref;\n+      Project : Project_Id;\n+      Data    : in out Project_Data)\n    is\n-      Languages : Variable_Value := Nil_Variable_Value;\n-      Def_Lang  : Variable_Value := Nil_Variable_Value;\n+      Languages   : Variable_Value := Nil_Variable_Value;\n+      Def_Lang    : Variable_Value := Nil_Variable_Value;\n       Def_Lang_Id : Name_Id;\n \n    begin\n@@ -4170,6 +4221,7 @@ package body Prj.Nmsc is\n \n             begin\n                if Get_Mode = Ada_Only then\n+\n                   --  Assume that there is no language specified yet\n \n                   Data.Other_Sources_Present := False;\n@@ -4356,16 +4408,13 @@ package body Prj.Nmsc is\n                                  In_Tree);\n \n       Auto_Init_Supported : Boolean;\n-\n       OK                  : Boolean := True;\n-\n       Source              : Source_Id;\n       Next_Proj           : Project_Id;\n \n    begin\n       if Get_Mode = Multi_Language then\n          Auto_Init_Supported := Data.Config.Auto_Init_Supported;\n-\n       else\n          Auto_Init_Supported :=\n            MLib.Tgt.Standalone_Library_Auto_Init_Is_Supported;\n@@ -4397,8 +4446,9 @@ package body Prj.Nmsc is\n \n                declare\n                   ALI         : constant String :=\n-                    ALI_File_Name (Name_Buffer (1 .. Name_Len));\n+                                  ALI_File_Name (Name_Buffer (1 .. Name_Len));\n                   ALI_Name_Id : Name_Id;\n+\n                begin\n                   Name_Len := ALI'Length;\n                   Name_Buffer (1 .. Name_Len) := ALI;\n@@ -4650,8 +4700,8 @@ package body Prj.Nmsc is\n \n             if Lib_Auto_Init.Default then\n \n-               --  If no attribute Library_Auto_Init is declared, then\n-               --  set auto init only if it is supported.\n+               --  If no attribute Library_Auto_Init is declared, then set auto\n+               --  init only if it is supported.\n \n                Data.Lib_Auto_Init := Auto_Init_Supported;\n \n@@ -4667,8 +4717,8 @@ package body Prj.Nmsc is\n                      Data.Lib_Auto_Init := True;\n \n                   else\n-                     --  Library_Auto_Init cannot be \"true\" if auto init\n-                     --  is not supported\n+                     --  Library_Auto_Init cannot be \"true\" if auto init is not\n+                     --  supported\n \n                      Error_Msg\n                        (Project, In_Tree,\n@@ -4686,12 +4736,11 @@ package body Prj.Nmsc is\n             end if;\n          end SAL_Library;\n \n-         --  If attribute Library_Src_Dir is defined and not the\n-         --  empty string, check if the directory exist and is not\n-         --  the object directory or one of the source directories.\n-         --  This is the directory where copies of the interface\n-         --  sources will be copied. Note that this directory may be\n-         --  the library directory.\n+         --  If attribute Library_Src_Dir is defined and not the empty string,\n+         --  check if the directory exist and is not the object directory or\n+         --  one of the source directories. This is the directory where copies\n+         --  of the interface sources will be copied. Note that this directory\n+         --  may be the library directory.\n \n          if Lib_Src_Dir.Value /= Empty_String then\n             declare\n@@ -4713,12 +4762,12 @@ package body Prj.Nmsc is\n \n                if Data.Library_Src_Dir = No_Path then\n \n-                  --  Get the absolute name of the library directory\n-                  --  that does not exist, to report an error.\n+                  --  Get the absolute name of the library directory that does\n+                  --  not exist, to report an error.\n \n                   declare\n                      Dir_Name : constant String :=\n-                       Get_Name_String (Dir_Id);\n+                                  Get_Name_String (Dir_Id);\n \n                   begin\n                      if Is_Absolute_Path (Dir_Name) then\n@@ -4751,8 +4800,7 @@ package body Prj.Nmsc is\n                         Lib_Src_Dir.Location);\n                   end;\n \n-                  --  Report an error if it is the same as the object\n-                  --  directory.\n+                  --  Report error if it is the same as the object directory\n \n                elsif Data.Library_Src_Dir = Data.Object_Directory then\n                   Error_Msg\n@@ -4773,8 +4821,7 @@ package body Prj.Nmsc is\n \n                      Src_Dirs := Data.Source_Dirs;\n                      while Src_Dirs /= Nil_String loop\n-                        Src_Dir := In_Tree.String_Elements.Table\n-                                                          (Src_Dirs);\n+                        Src_Dir := In_Tree.String_Elements.Table (Src_Dirs);\n \n                         --  Report error if it is one of the source directories\n \n@@ -5105,6 +5152,7 @@ package body Prj.Nmsc is\n \n       procedure Add_File is\n          File : File_Name_Type;\n+\n       begin\n          Add ('\"');\n          File_Number := File_Number + 1;\n@@ -5131,6 +5179,7 @@ package body Prj.Nmsc is\n \n       procedure Add_Name is\n          Name : Name_Id;\n+\n       begin\n          Add ('\"');\n          Name_Number := Name_Number + 1;\n@@ -5171,7 +5220,7 @@ package body Prj.Nmsc is\n          First := First + 1;\n \n          --  Warning character is always the first one in this package\n-         --  this is an undocumented kludge!!!\n+         --  this is an undocumented kludge???\n \n       elsif Msg (First) = '?' then\n          First := First + 1;\n@@ -5248,7 +5297,7 @@ package body Prj.Nmsc is\n                      Write_Line (Source_Directory);\n                   end if;\n \n-                  --  We look to every entry in the source directory\n+                  --  We look at every entry in the source directory\n \n                   Open (Dir, Source_Directory\n                                (Source_Directory'First .. Dir_Last));\n@@ -5318,10 +5367,9 @@ package body Prj.Nmsc is\n          Write_Line (\"end Looking for sources.\");\n       end if;\n \n-      --  If we have looked for sources and found none, then\n-      --  it is an error, except if it is an extending project.\n-      --  If a non extending project is not supposed to contain\n-      --  any source, then we never call Find_Ada_Sources.\n+      --  If we have looked for sources and found none, then it is an error,\n+      --  except if it is an extending project. If a non extending project is\n+      --  not supposed to contain any source, then never call Find_Ada_Sources.\n \n       if Current_Source = Nil_String and then\n         Data.Extends = No_Project\n@@ -5341,7 +5389,7 @@ package body Prj.Nmsc is\n       For_Language : Language_Index;\n       Follow_Links : Boolean := False)\n    is\n-      Source_Dir      : String_List_Id := Data.Source_Dirs;\n+      Source_Dir      : String_List_Id;\n       Element         : String_Element;\n       Dir             : Dir_Type;\n       Current_Source  : String_List_Id := Nil_String;\n@@ -5352,8 +5400,9 @@ package body Prj.Nmsc is\n          Write_Line (\"Looking for sources:\");\n       end if;\n \n-      --  For each subdirectory\n+      --  Loop through subdirectories\n \n+      Source_Dir := Data.Source_Dirs;\n       while Source_Dir /= Nil_String loop\n          begin\n             Source_Recorded := False;\n@@ -5367,8 +5416,8 @@ package body Prj.Nmsc is\n                                        Name_Buffer (1 .. Name_Len) &\n                                          Directory_Separator;\n \n-                  Dir_Last  : constant Natural :=\n-                                Compute_Directory_Last (Source_Directory);\n+                  Dir_Last : constant Natural :=\n+                               Compute_Directory_Last (Source_Directory);\n \n                begin\n                   if Current_Verbosity = High then\n@@ -5464,10 +5513,10 @@ package body Prj.Nmsc is\n \n       if For_Language = Ada_Language_Index then\n \n-         --  If we have looked for sources and found none, then\n-         --  it is an error, except if it is an extending project.\n-         --  If a non extending project is not supposed to contain\n-         --  any source, then we never call Find_Sources.\n+         --  If we have looked for sources and found none, then it is an error,\n+         --  except if it is an extending project. If a non extending project\n+         --  is not supposed to contain any source files, then never call\n+         --  Find_Sources.\n \n          if Current_Source /= Nil_String then\n             Data.Ada_Sources_Present := True;\n@@ -5502,9 +5551,9 @@ package body Prj.Nmsc is\n                       Util.Value_Of\n                         (Name_Object_Dir, Data.Decl.Attributes, In_Tree);\n \n-      Exec_Dir    : constant Variable_Value :=\n-                      Util.Value_Of\n-                        (Name_Exec_Dir, Data.Decl.Attributes, In_Tree);\n+      Exec_Dir : constant Variable_Value :=\n+                   Util.Value_Of\n+                     (Name_Exec_Dir, Data.Decl.Attributes, In_Tree);\n \n       Source_Dirs : constant Variable_Value :=\n                       Util.Value_Of\n@@ -5527,8 +5576,7 @@ package body Prj.Nmsc is\n          Location : Source_Ptr;\n          Removed  : Boolean := False);\n       --  Find one or several source directories, and add (or remove, if\n-      --  Removed is True) them to the list of source directories of the\n-      --  project.\n+      --  Removed is True) them to list of source directories of the project.\n \n       ----------------------\n       -- Find_Source_Dirs --\n@@ -5551,13 +5599,13 @@ package body Prj.Nmsc is\n          -------------------------\n \n          procedure Recursive_Find_Dirs (Path : Name_Id) is\n-            Dir      : Dir_Type;\n-            Name     : String (1 .. 250);\n-            Last     : Natural;\n-            List     : String_List_Id := Data.Source_Dirs;\n-            Prev     : String_List_Id := Nil_String;\n-            Element  : String_Element;\n-            Found    : Boolean := False;\n+            Dir     : Dir_Type;\n+            Name    : String (1 .. 250);\n+            Last    : Natural;\n+            List    : String_List_Id;\n+            Prev    : String_List_Id;\n+            Element : String_Element;\n+            Found   : Boolean := False;\n \n             Non_Canonical_Path : Name_Id := No_Name;\n             Canonical_Path     : Name_Id := No_Name;\n@@ -5579,9 +5627,9 @@ package body Prj.Nmsc is\n             Canonical_Path := Name_Find;\n \n             --  To avoid processing the same directory several times, check\n-            --  if the directory is already in Recursive_Dirs. If it is,\n-            --  then there is nothing to do, just return. If it is not, put\n-            --  it there and continue recursive processing.\n+            --  if the directory is already in Recursive_Dirs. If it is, then\n+            --  there is nothing to do, just return. If it is not, put it there\n+            --  and continue recursive processing.\n \n             if not Removed then\n                if Recursive_Dirs.Get (Canonical_Path) then\n@@ -5593,6 +5641,8 @@ package body Prj.Nmsc is\n \n             --  Check if directory is already in list\n \n+            List := Data.Source_Dirs;\n+            Prev := Nil_String;\n             while List /= Nil_String loop\n                Element := In_Tree.String_Elements.Table (List);\n \n@@ -7564,9 +7614,26 @@ package body Prj.Nmsc is\n          end if;\n       end Search_Directories;\n \n+      Excluded_Sources : Variable_Value :=\n+                           Util.Value_Of\n+                             (Name_Excluded_Source_Files,\n+                              Data.Decl.Attributes,\n+                              In_Tree);\n+\n    --  Start of processing for Look_For_Sources\n \n    begin\n+      --  If Excluded_Source_Files is not declared, check\n+      --  Locally_Removed_Files.\n+\n+      if Excluded_Sources.Default then\n+         Excluded_Sources :=\n+           Util.Value_Of\n+             (Name_Locally_Removed_Files,\n+              Data.Decl.Attributes,\n+              In_Tree);\n+      end if;\n+\n       if Get_Mode = Ada_Only and then\n         Is_A_Language (In_Tree, Data, \"ada\")\n       then\n@@ -7583,12 +7650,6 @@ package body Prj.Nmsc is\n                                     Data.Decl.Attributes,\n                                     In_Tree);\n \n-            Excluded_Sources : Variable_Value :=\n-                                 Util.Value_Of\n-                                   (Name_Excluded_Source_Files,\n-                                    Data.Decl.Attributes,\n-                                    In_Tree);\n-\n          begin\n             pragma Assert\n               (Sources.Kind = List,\n@@ -7708,17 +7769,6 @@ package body Prj.Nmsc is\n                  (Project, In_Tree, Data, Follow_Links);\n             end if;\n \n-            --  If Excluded_ource_Files is not declared, check\n-            --  Locally_Removed_Files.\n-\n-            if Excluded_Sources.Default then\n-               Excluded_Sources :=\n-                 Util.Value_Of\n-                   (Name_Locally_Removed_Files,\n-                    Data.Decl.Attributes,\n-                    In_Tree);\n-            end if;\n-\n             --  If there are sources that are locally removed, mark them as\n             --  such in the Units table.\n \n@@ -8120,25 +8170,9 @@ package body Prj.Nmsc is\n                                     Data.Decl.Attributes,\n                                     In_Tree);\n \n-            Excluded_Sources : Variable_Value :=\n-                                 Util.Value_Of\n-                                   (Name_Excluded_Source_Files,\n-                                    Data.Decl.Attributes,\n-                                    In_Tree);\n             Name_Loc         : Name_Location;\n \n          begin\n-            --  If Excluded_ource_Files is not declared, check\n-            --  Locally_Removed_Files.\n-\n-            if Excluded_Sources.Default then\n-               Excluded_Sources :=\n-                 Util.Value_Of\n-                   (Name_Locally_Removed_Files,\n-                    Data.Decl.Attributes,\n-                    In_Tree);\n-            end if;\n-\n             if not Sources.Default then\n                if not Source_List_File.Default then\n                   Error_Msg\n@@ -8314,8 +8348,7 @@ package body Prj.Nmsc is\n \n    function Path_Name_Of\n      (File_Name : File_Name_Type;\n-      Directory : Path_Name_Type)\n-      return String\n+      Directory : Path_Name_Type) return String\n    is\n       Result : String_Access;\n "}, {"sha": "f576841148f0640a7046aba911198fa27b56abd3", "filename": "gcc/ada/prj-part.adb", "status": "modified", "additions": 46, "deletions": 49, "changes": 95, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-part.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-part.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-part.adb?ref=1b68567490b702d200be15437d69449f9becfe8d", "patch": "@@ -439,7 +439,9 @@ package body Prj.Part is\n       Store_Comments         : Boolean := False)\n    is\n       Current_Directory : constant String := Get_Current_Dir;\n+\n       Dummy : Boolean;\n+      pragma Warnings (Off, Dummy);\n \n       Real_Project_File_Name : String_Access :=\n                                  Osint.To_Canonical_File_Spec\n@@ -1055,16 +1057,8 @@ package body Prj.Part is\n          --  or not following Ada identifier's syntax).\n \n          Error_Msg_File_1 := File_Name_Type (Canonical_Path_Name);\n-\n-         if In_Configuration then\n-            Error_Msg (\"{ is not a valid path name for a configuration \" &\n-                       \"project file\",\n-                       Token_Ptr);\n-\n-         else\n-            Error_Msg (\"?{ is not a valid path name for a project file\",\n-                       Token_Ptr);\n-         end if;\n+         Error_Msg (\"?{ is not a valid path name for a project file\",\n+                    Token_Ptr);\n       end if;\n \n       if Current_Verbosity >= Medium then\n@@ -1234,49 +1228,52 @@ package body Prj.Part is\n             Set_First_With_Clause_Of (Project, In_Tree, Imported_Projects);\n          end;\n \n-         declare\n-            Name_And_Node : Tree_Private_Part.Project_Name_And_Node :=\n-              Tree_Private_Part.Projects_Htable.Get_First\n-                (In_Tree.Projects_HT);\n-            Project_Name : Name_Id := Name_And_Node.Name;\n-\n-         begin\n-            --  Check if we already have a project with this name\n-\n-            while Project_Name /= No_Name\n-              and then Project_Name /= Name_Of_Project\n-            loop\n-               Name_And_Node :=\n-                 Tree_Private_Part.Projects_Htable.Get_Next\n+         if not In_Configuration then\n+            declare\n+               Name_And_Node : Tree_Private_Part.Project_Name_And_Node :=\n+                 Tree_Private_Part.Projects_Htable.Get_First\n                    (In_Tree.Projects_HT);\n-               Project_Name := Name_And_Node.Name;\n-            end loop;\n+               Project_Name : Name_Id := Name_And_Node.Name;\n \n-            --  Report an error if we already have a project with this name\n+            begin\n+               --  Check if we already have a project with this name\n+\n+               while Project_Name /= No_Name\n+                 and then Project_Name /= Name_Of_Project\n+               loop\n+                  Name_And_Node :=\n+                    Tree_Private_Part.Projects_Htable.Get_Next\n+                      (In_Tree.Projects_HT);\n+                  Project_Name := Name_And_Node.Name;\n+               end loop;\n \n-            if Project_Name /= No_Name then\n-               Error_Msg_Name_1 := Project_Name;\n-               Error_Msg\n-                 (\"duplicate project name %%\", Location_Of (Project, In_Tree));\n-               Error_Msg_Name_1 :=\n-                 Name_Id (Path_Name_Of (Name_And_Node.Node, In_Tree));\n-               Error_Msg\n-                 (\"\\already in %%\", Location_Of (Project, In_Tree));\n+               --  Report an error if we already have a project with this name\n \n-            else\n-               --  Otherwise, add the name of the project to the hash table, so\n-               --  that we can check that no other subsequent project will have\n-               --  the same name.\n-\n-               Tree_Private_Part.Projects_Htable.Set\n-                 (T => In_Tree.Projects_HT,\n-                  K => Name_Of_Project,\n-                  E => (Name           => Name_Of_Project,\n-                        Node           => Project,\n-                        Canonical_Path => Canonical_Path_Name,\n-                        Extended       => Extended));\n-            end if;\n-         end;\n+               if Project_Name /= No_Name then\n+                  Error_Msg_Name_1 := Project_Name;\n+                  Error_Msg\n+                    (\"duplicate project name %%\",\n+                     Location_Of (Project, In_Tree));\n+                  Error_Msg_Name_1 :=\n+                    Name_Id (Path_Name_Of (Name_And_Node.Node, In_Tree));\n+                  Error_Msg\n+                    (\"\\already in %%\", Location_Of (Project, In_Tree));\n+\n+               else\n+                  --  Otherwise, add the name of the project to the hash table,\n+                  --  so that we can check that no other subsequent project\n+                  --  will have the same name.\n+\n+                  Tree_Private_Part.Projects_Htable.Set\n+                    (T => In_Tree.Projects_HT,\n+                     K => Name_Of_Project,\n+                     E => (Name           => Name_Of_Project,\n+                           Node           => Project,\n+                           Canonical_Path => Canonical_Path_Name,\n+                           Extended       => Extended));\n+               end if;\n+            end;\n+         end if;\n \n       end if;\n "}, {"sha": "c3c321cc70329ba8293928e159cc7955fa580ffc", "filename": "gcc/ada/prj-proc.adb", "status": "modified", "additions": 76, "deletions": 41, "changes": 117, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-proc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-proc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-proc.adb?ref=1b68567490b702d200be15437d69449f9becfe8d", "patch": "@@ -766,6 +766,7 @@ package body Prj.Proc is\n                         The_Array   : Array_Id := No_Array;\n                         The_Element : Array_Element_Id := No_Array_Element;\n                         Array_Index : Name_Id := No_Name;\n+                        Lower       : Boolean;\n \n                      begin\n                         if The_Package /= No_Package then\n@@ -792,9 +793,26 @@ package body Prj.Proc is\n \n                            Get_Name_String (Index);\n \n-                           if Case_Insensitive\n-                                (The_Current_Term, From_Project_Node_Tree)\n-                           then\n+                           Lower :=\n+                             Case_Insensitive\n+                               (The_Current_Term, From_Project_Node_Tree);\n+\n+                           --  In multi-language mode (gprbuild), the index is\n+                           --  always case insensitive if it does not include\n+                           --  any dot.\n+\n+                           if Get_Mode = Multi_Language and then not Lower then\n+                              Lower := True;\n+\n+                              for J in 1 .. Name_Len loop\n+                                 if Name_Buffer (J) = '.' then\n+                                    Lower := False;\n+                                    exit;\n+                                 end if;\n+                              end loop;\n+                           end if;\n+\n+                           if Lower then\n                               To_Lower (Name_Buffer (1 .. Name_Len));\n                            end if;\n \n@@ -1875,12 +1893,32 @@ package body Prj.Proc is\n \n                         --  Put in lower case, if necessary\n \n-                        if Case_Insensitive\n-                             (Current_Item, From_Project_Node_Tree)\n-                        then\n-                           GNAT.Case_Util.To_Lower\n-                                            (Name_Buffer (1 .. Name_Len));\n-                        end if;\n+                        declare\n+                           Lower : Boolean;\n+\n+                        begin\n+                           Lower :=\n+                             Case_Insensitive\n+                               (Current_Item, From_Project_Node_Tree);\n+\n+                           --  In multi-language mode (gprbuild), the index is\n+                           --  always case insensitive if it does not include\n+                           --  any dot.\n+\n+                           if Get_Mode = Multi_Language and then not Lower then\n+                              for J in 1 .. Name_Len loop\n+                                 if Name_Buffer (J) = '.' then\n+                                    Lower := False;\n+                                    exit;\n+                                 end if;\n+                              end loop;\n+                           end if;\n+\n+                           if Lower then\n+                              GNAT.Case_Util.To_Lower\n+                                (Name_Buffer (1 .. Name_Len));\n+                           end if;\n+                        end;\n \n                         declare\n                            The_Array : Array_Id;\n@@ -1895,18 +1933,19 @@ package body Prj.Proc is\n                            --  Look for the array in the appropriate list\n \n                            if Pkg /= No_Package then\n-                              The_Array := In_Tree.Packages.Table\n-                                             (Pkg).Decl.Arrays;\n+                              The_Array :=\n+                                In_Tree.Packages.Table (Pkg).Decl.Arrays;\n \n                            else\n-                              The_Array := In_Tree.Projects.Table\n-                                             (Project).Decl.Arrays;\n+                              The_Array :=\n+                                In_Tree.Projects.Table (Project).Decl.Arrays;\n                            end if;\n \n                            while\n                              The_Array /= No_Array\n-                             and then In_Tree.Arrays.Table\n-                                        (The_Array).Name /= Current_Item_Name\n+                               and then\n+                                 In_Tree.Arrays.Table (The_Array).Name /=\n+                                                            Current_Item_Name\n                            loop\n                               The_Array := In_Tree.Arrays.Table\n                                              (The_Array).Next;\n@@ -1918,45 +1957,38 @@ package body Prj.Proc is\n                            --  created automatically later\n \n                            if The_Array = No_Array then\n-                              Array_Table.Increment_Last\n-                                (In_Tree.Arrays);\n-                              The_Array := Array_Table.Last\n-                                (In_Tree.Arrays);\n+                              Array_Table.Increment_Last (In_Tree.Arrays);\n+                              The_Array := Array_Table.Last (In_Tree.Arrays);\n \n                               if Pkg /= No_Package then\n-                                 In_Tree.Arrays.Table\n-                                   (The_Array) :=\n+                                 In_Tree.Arrays.Table (The_Array) :=\n                                    (Name  => Current_Item_Name,\n                                     Value => No_Array_Element,\n                                     Next  =>\n                                       In_Tree.Packages.Table\n                                         (Pkg).Decl.Arrays);\n \n-                                 In_Tree.Packages.Table\n-                                   (Pkg).Decl.Arrays :=\n+                                 In_Tree.Packages.Table (Pkg).Decl.Arrays :=\n                                      The_Array;\n \n                               else\n-                                 In_Tree.Arrays.Table\n-                                   (The_Array) :=\n+                                 In_Tree.Arrays.Table (The_Array) :=\n                                    (Name  => Current_Item_Name,\n                                     Value => No_Array_Element,\n                                     Next  =>\n                                       In_Tree.Projects.Table\n                                         (Project).Decl.Arrays);\n \n                                  In_Tree.Projects.Table\n-                                   (Project).Decl.Arrays :=\n-                                     The_Array;\n+                                   (Project).Decl.Arrays := The_Array;\n                               end if;\n \n                            --  Otherwise initialize The_Array_Element as the\n                            --  head of the element list.\n \n                            else\n                               The_Array_Element :=\n-                                In_Tree.Arrays.Table\n-                                  (The_Array).Value;\n+                                In_Tree.Arrays.Table (The_Array).Value;\n                            end if;\n \n                            --  Look in the list, if any, to find an element\n@@ -1984,16 +2016,16 @@ package body Prj.Proc is\n \n                               In_Tree.Array_Elements.Table\n                                 (The_Array_Element) :=\n-                                (Index  => Index_Name,\n-                                 Src_Index =>\n-                                   Source_Index_Of\n-                                     (Current_Item, From_Project_Node_Tree),\n-                                 Index_Case_Sensitive =>\n-                                 not Case_Insensitive\n-                                   (Current_Item, From_Project_Node_Tree),\n-                                 Value  => New_Value,\n-                                 Next => In_Tree.Arrays.Table\n-                                           (The_Array).Value);\n+                                  (Index  => Index_Name,\n+                                   Src_Index =>\n+                                     Source_Index_Of\n+                                       (Current_Item, From_Project_Node_Tree),\n+                                   Index_Case_Sensitive =>\n+                                     not Case_Insensitive\n+                                       (Current_Item, From_Project_Node_Tree),\n+                                   Value  => New_Value,\n+                                   Next => In_Tree.Arrays.Table\n+                                             (The_Array).Value);\n                               In_Tree.Arrays.Table\n                                 (The_Array).Value := The_Array_Element;\n \n@@ -2038,7 +2070,7 @@ package body Prj.Proc is\n                      Name   : Name_Id     := No_Name;\n \n                   begin\n-                     --  If a project were specified for the case variable,\n+                     --  If a project was specified for the case variable,\n                      --  get its id.\n \n                      if Project_Node_Of\n@@ -2223,7 +2255,6 @@ package body Prj.Proc is\n    is\n    begin\n       Error_Report := Report_Error;\n-      Success := True;\n \n       if Reset_Tree then\n \n@@ -2244,6 +2275,10 @@ package body Prj.Proc is\n          From_Project_Node_Tree => From_Project_Node_Tree,\n          Extended_By            => No_Project);\n \n+      Success :=\n+        Total_Errors_Detected = 0\n+          and then\n+            (Warning_Mode /= Treat_As_Error or else Warnings_Detected = 0);\n    end Process_Project_Tree_Phase_1;\n \n    ----------------------------------"}, {"sha": "c41c3da25ad93867fccf26aaea3c533429900848", "filename": "gcc/ada/prj-util.adb", "status": "modified", "additions": 14, "deletions": 6, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj-util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-util.adb?ref=1b68567490b702d200be15437d69449f9becfe8d", "patch": "@@ -524,9 +524,10 @@ package body Prj.Util is\n       In_Tree                : Project_Tree_Ref;\n       Force_Lower_Case_Index : Boolean := False) return Variable_Value\n    is\n-      Current    : Array_Element_Id;\n-      Element    : Array_Element;\n-      Real_Index : Name_Id;\n+      Current      : Array_Element_Id;\n+      Element      : Array_Element;\n+      Real_Index_1 : Name_Id;\n+      Real_Index_2 : Name_Id;\n \n    begin\n       Current := In_Array;\n@@ -537,18 +538,25 @@ package body Prj.Util is\n \n       Element := In_Tree.Array_Elements.Table (Current);\n \n-      Real_Index := Index;\n+      Real_Index_1 := Index;\n \n       if not Element.Index_Case_Sensitive or Force_Lower_Case_Index then\n          Get_Name_String (Index);\n          To_Lower (Name_Buffer (1 .. Name_Len));\n-         Real_Index := Name_Find;\n+         Real_Index_1 := Name_Find;\n       end if;\n \n       while Current /= No_Array_Element loop\n          Element := In_Tree.Array_Elements.Table (Current);\n+         Real_Index_2 := Element.Index;\n+\n+         if not Element.Index_Case_Sensitive or Force_Lower_Case_Index then\n+            Get_Name_String (Element.Index);\n+            To_Lower (Name_Buffer (1 .. Name_Len));\n+            Real_Index_2 := Name_Find;\n+         end if;\n \n-         if Real_Index = Element.Index and then\n+         if Real_Index_1 = Real_Index_2 and then\n            Src_Index = Element.Src_Index\n          then\n             return Element.Value;"}, {"sha": "938b3a0503338fecd5077fa00c380009e87aa228", "filename": "gcc/ada/prj.ads", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fprj.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.ads?ref=1b68567490b702d200be15437d69449f9becfe8d", "patch": "@@ -370,6 +370,8 @@ package Prj is\n       --  shared libraries. Specified in the configuration. When not specified,\n       --  there is no need for such switch.\n \n+      Runtime_Library_Dir : Name_Id := No_Name;\n+\n       Mapping_File_Switches  : Name_List_Index := No_Name_List;\n       --  The option(s) to provide a mapping file to the compiler. Specified in\n       --  the configuration. When not ???\n@@ -417,6 +419,7 @@ package Prj is\n                            Compiler_Driver_Path       => null,\n                            Compiler_Required_Switches => No_Name_List,\n                            Compilation_PIC_Option     => No_Name_List,\n+                           Runtime_Library_Dir        => No_Name,\n                            Mapping_File_Switches      => No_Name_List,\n                            Mapping_Spec_Suffix        => No_File,\n                            Mapping_Body_Suffix        => No_File,"}, {"sha": "a6693a73af679d172a042b5ded9e82f4ba6cfb00", "filename": "gcc/ada/snames.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fsnames.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fsnames.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.adb?ref=1b68567490b702d200be15437d69449f9becfe8d", "patch": "@@ -776,6 +776,7 @@ package body Snames is\n      \"symbolic_link_supported#\" &\n      \"toolchain_description#\" &\n      \"toolchain_version#\" &\n+     \"runtime_library_dir#\" &\n      \"unaligned_valid#\" &\n      \"interface#\" &\n      \"overriding#\" &"}, {"sha": "b7a7ab12fc1381f74bed0bd2e0a5dfdda9195352", "filename": "gcc/ada/snames.ads", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fsnames.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b68567490b702d200be15437d69449f9becfe8d/gcc%2Fada%2Fsnames.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.ads?ref=1b68567490b702d200be15437d69449f9becfe8d", "patch": "@@ -1092,25 +1092,26 @@ package Snames is\n    Name_Symbolic_Link_Supported        : constant Name_Id := N + 715;\n    Name_Toolchain_Description          : constant Name_Id := N + 716;\n    Name_Toolchain_Version              : constant Name_Id := N + 717;\n+   Name_Runtime_Library_Dir            : constant Name_Id := N + 718;\n \n    --  Other miscellaneous names used in front end\n \n-   Name_Unaligned_Valid                : constant Name_Id := N + 718;\n+   Name_Unaligned_Valid                : constant Name_Id := N + 719;\n \n    --  Ada 2005 reserved words\n \n-   First_2005_Reserved_Word            : constant Name_Id := N + 719;\n-   Name_Interface                      : constant Name_Id := N + 719;\n-   Name_Overriding                     : constant Name_Id := N + 720;\n-   Name_Synchronized                   : constant Name_Id := N + 721;\n-   Last_2005_Reserved_Word             : constant Name_Id := N + 721;\n+   First_2005_Reserved_Word            : constant Name_Id := N + 720;\n+   Name_Interface                      : constant Name_Id := N + 720;\n+   Name_Overriding                     : constant Name_Id := N + 721;\n+   Name_Synchronized                   : constant Name_Id := N + 722;\n+   Last_2005_Reserved_Word             : constant Name_Id := N + 722;\n \n    subtype Ada_2005_Reserved_Words is\n      Name_Id range First_2005_Reserved_Word .. Last_2005_Reserved_Word;\n \n    --  Mark last defined name for consistency check in Snames body\n \n-   Last_Predefined_Name                : constant Name_Id := N + 721;\n+   Last_Predefined_Name                : constant Name_Id := N + 722;\n \n    ---------------------------------------\n    -- Subtypes Defining Name Categories --"}]}