{"sha": "8c081e84f7b8dbc477c62c5a16834e2f6ce9d095", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGMwODFlODRmN2I4ZGJjNDc3YzYyYzVhMTY4MzRlMmY2Y2U5ZDA5NQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2002-10-31T00:04:12Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2002-10-31T00:04:12Z"}, "message": "re PR c++/8160 (ICE in build_modify_expr, at cp/typeck.c:5494: Array initialization)\n\n\tPR c++/8160\n\t* typeck2.c (process_init_constructor): Call complete_array_type.\n\n\tPR c++/8149\n\t* decl.c (make_typename_type): Issue errors about invalid results.\n\n\tPR c++/8160\n\t* g++.dg/template/complit1.C: New test.\n\n\tPR c++/8149\n\t* g++.dg/template/typename4.C: Likewise.\n\nFrom-SVN: r58663", "tree": {"sha": "74cb4f2dd20fa6d242447fa4a4194d8b4f40e4fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74cb4f2dd20fa6d242447fa4a4194d8b4f40e4fb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/comments", "author": null, "committer": null, "parents": [{"sha": "9402f6fb7450c77691ef079abae90b2130a65117", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9402f6fb7450c77691ef079abae90b2130a65117", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9402f6fb7450c77691ef079abae90b2130a65117"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "d53fd4d947ab04252571551e3c3ea5a6d7a2692f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=8c081e84f7b8dbc477c62c5a16834e2f6ce9d095", "patch": "@@ -1,3 +1,11 @@\n+2002-10-30  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/8160\n+\t* typeck2.c (process_init_constructor): Call complete_array_type.\n+\n+\tPR c++/8149\n+\t* decl.c (make_typename_type): Issue errors about invalid results.\n+\t\n 2002-10-30  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n \n \tCore issue 287, PR c++/7639"}, {"sha": "9ee055679ff9e1924debdd5ba301f3866acbcd0e", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=8c081e84f7b8dbc477c62c5a16834e2f6ce9d095", "patch": "@@ -5702,6 +5702,13 @@ make_typename_type (context, name, complain)\n \t  t = lookup_field (context, name, 0, 1);\n \t  if (t)\n \t    {\n+\t      if (TREE_CODE (t) != TYPE_DECL)\n+\t\t{\n+\t\t  if (complain & tf_error)\n+\t\t    error (\"no type named `%#T' in `%#T'\", name, context);\n+\t\t  return error_mark_node;\n+\t\t}\n+\n \t      if (complain & tf_parsing)\n \t\ttype_access_control (context, t);\n \t      else"}, {"sha": "750aa3c94bfa127e25b31b2d7d526814d6e103de", "filename": "gcc/cp/typeck2.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Fcp%2Ftypeck2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Fcp%2Ftypeck2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck2.c?ref=8c081e84f7b8dbc477c62c5a16834e2f6ce9d095", "patch": "@@ -942,6 +942,8 @@ process_init_constructor (type, init, elts)\n     return error_mark_node;\n \n   result = build (CONSTRUCTOR, type, NULL_TREE, nreverse (members));\n+  if (TREE_CODE (type) == ARRAY_TYPE && TYPE_DOMAIN (type) == NULL_TREE)\n+    complete_array_type (type, result, /*do_default=*/0);\n   if (init)\n     TREE_HAS_CONSTRUCTOR (result) = TREE_HAS_CONSTRUCTOR (init);\n   if (allconstant) TREE_CONSTANT (result) = 1;"}, {"sha": "437893d0b515f48149f5fbfb7fd657b93ac42a09", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8c081e84f7b8dbc477c62c5a16834e2f6ce9d095", "patch": "@@ -1,3 +1,11 @@\n+2002-10-30  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/8160\n+\t* g++.dg/template/complit1.C: New test.\n+\n+\tPR c++/8149\n+\t* g++.dg/template/typename4.C: Likewise.\n+\n 2002-10-30  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n \n \tCore issue 287, PR c++/7639"}, {"sha": "ab057b3b7ee83a93e59b9785e4f434901c76ec3d", "filename": "gcc/testsuite/g++.dg/template/complit1.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcomplit1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcomplit1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcomplit1.C?ref=8c081e84f7b8dbc477c62c5a16834e2f6ce9d095", "patch": "@@ -0,0 +1,11 @@\n+// { dg-options \"\" }\n+\n+template <int D> struct C {\n+  int d[3];\n+  C();\n+};\n+\n+template<int D>\n+C<D>::C() : d((int[]){1,2,3}) {};\n+\n+template class C<1>;"}, {"sha": "add95156cec2a8a865fafafb1497fb7ccf474a99", "filename": "gcc/testsuite/g++.dg/template/typename4.C", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypename4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c081e84f7b8dbc477c62c5a16834e2f6ce9d095/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypename4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypename4.C?ref=8c081e84f7b8dbc477c62c5a16834e2f6ce9d095", "patch": "@@ -0,0 +1,3 @@\n+struct B { template <typename U> struct C; };\n+template <typename T> struct A { typedef typename T::C V; }; // { dg-error \"\" }\n+void f () { A<B>::V p; } // { dg-error \"\" }"}]}