{"sha": "c8eaf058ed6452f3648950b1fa68443bc8e5c106", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzhlYWYwNThlZDY0NTJmMzY0ODk1MGIxZmE2ODQ0M2JjOGU1YzEwNg==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2019-02-03T10:53:01Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2019-02-03T10:53:01Z"}, "message": "re PR debug/87295 ([early debug] ICE with -ffat-lto-objects -fdebug-types-section -g)\n\n2019-02-03  Richard Biener  <rguenther@suse.de>\n\n\tPR debug/87295\n\t* dwarf2out.c (copy_ancestor_tree): Register non-stubs as\n\torig.\n\n\t* g++.dg/debug/dwarf2/pr87295.C: New testcase.\n\nFrom-SVN: r268485", "tree": {"sha": "6fe9dced4bd2ffc34136302222cb3ecb67190a39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6fe9dced4bd2ffc34136302222cb3ecb67190a39"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c8eaf058ed6452f3648950b1fa68443bc8e5c106", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8eaf058ed6452f3648950b1fa68443bc8e5c106", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8eaf058ed6452f3648950b1fa68443bc8e5c106", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8eaf058ed6452f3648950b1fa68443bc8e5c106/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7d8b09996deb2ceb24478f7af6b0bc58045da751", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d8b09996deb2ceb24478f7af6b0bc58045da751", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d8b09996deb2ceb24478f7af6b0bc58045da751"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "dc2116ba92a5b3f348467680766be6bb92409889", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8eaf058ed6452f3648950b1fa68443bc8e5c106/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8eaf058ed6452f3648950b1fa68443bc8e5c106/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c8eaf058ed6452f3648950b1fa68443bc8e5c106", "patch": "@@ -1,3 +1,9 @@\n+2019-02-03  Richard Biener  <rguenther@suse.de>\n+\n+\tPR debug/87295\n+\t* dwarf2out.c (copy_ancestor_tree): Register non-stubs as\n+\torig.\n+\n 2019-02-02  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/87887"}, {"sha": "d78e75c914afc9bb1e4999606a331111ec9a18ab", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8eaf058ed6452f3648950b1fa68443bc8e5c106/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8eaf058ed6452f3648950b1fa68443bc8e5c106/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=c8eaf058ed6452f3648950b1fa68443bc8e5c106", "patch": "@@ -8169,6 +8169,11 @@ copy_ancestor_tree (dw_die_ref unit, dw_die_ref die,\n   decl_table_entry **slot = NULL;\n   struct decl_table_entry *entry = NULL;\n \n+  /* If DIE refers to a stub unfold that so we get the appropriate\n+     DIE registered as orig in decl_table.  */\n+  if (dw_die_ref c = get_AT_ref (die, DW_AT_signature))\n+    die = c;\n+\n   if (decl_table)\n     {\n       /* Check if the entry has already been copied to UNIT.  */"}, {"sha": "30ac08b77abbeba28ed99f91a0429a92bf259a55", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8eaf058ed6452f3648950b1fa68443bc8e5c106/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8eaf058ed6452f3648950b1fa68443bc8e5c106/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c8eaf058ed6452f3648950b1fa68443bc8e5c106", "patch": "@@ -1,3 +1,8 @@\n+2019-02-03  Richard Biener  <rguenther@suse.de>\n+\n+\tPR debug/87295\n+\t* g++.dg/debug/dwarf2/pr87295.C: New testcase.\n+\n 2019-02-02  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/88298"}, {"sha": "3afe7625bc253690a647d848278e4c08501a2173", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/pr87295.C", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8eaf058ed6452f3648950b1fa68443bc8e5c106/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpr87295.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8eaf058ed6452f3648950b1fa68443bc8e5c106/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpr87295.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpr87295.C?ref=c8eaf058ed6452f3648950b1fa68443bc8e5c106", "patch": "@@ -0,0 +1,22 @@\n+// { dg-additional-options \"-fdebug-types-section\" }\n+// { dg-require-effective-target c++11 }\n+\n+struct A {};\n+namespace N {\n+    struct B {\n+\tusing C = struct H {};\n+\tusing D = A;\n+    };\n+}\n+struct E : N::B {\n+    typedef C C;\n+};\n+namespace N {\n+    struct F {\n+\tE::C d;\n+\tE::D h;\n+    };\n+}\n+struct G {\n+    N::F i;\n+} j;"}]}