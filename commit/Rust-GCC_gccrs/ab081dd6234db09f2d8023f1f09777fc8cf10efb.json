{"sha": "ab081dd6234db09f2d8023f1f09777fc8cf10efb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWIwODFkZDYyMzRkYjA5ZjJkODAyM2YxZjA5Nzc3ZmM4Y2YxMGVmYg==", "commit": {"author": {"name": "Andreas Krebbel", "email": "Andreas.Krebbel@de.ibm.com", "date": "2011-03-22T09:07:26Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2011-03-22T09:07:26Z"}, "message": "s390.c (s390_delegitimize_address): Fix offset handling for PLTOFF/GOTOFF.\n\n2011-03-22  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\t* config/s390/s390.c (s390_delegitimize_address): Fix offset\n\thandling for PLTOFF/GOTOFF.\n\nFrom-SVN: r171281", "tree": {"sha": "ad79e23636f85a26823bbfe93e73b5134ce8071b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad79e23636f85a26823bbfe93e73b5134ce8071b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab081dd6234db09f2d8023f1f09777fc8cf10efb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab081dd6234db09f2d8023f1f09777fc8cf10efb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab081dd6234db09f2d8023f1f09777fc8cf10efb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab081dd6234db09f2d8023f1f09777fc8cf10efb/comments", "author": null, "committer": null, "parents": [{"sha": "6fd5332b45083b82b5f568906baa1aec743af386", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fd5332b45083b82b5f568906baa1aec743af386", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fd5332b45083b82b5f568906baa1aec743af386"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "d164a0218f691d6a02460180407b0bc709710a33", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab081dd6234db09f2d8023f1f09777fc8cf10efb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab081dd6234db09f2d8023f1f09777fc8cf10efb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ab081dd6234db09f2d8023f1f09777fc8cf10efb", "patch": "@@ -1,3 +1,8 @@\n+2011-03-22  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\t* config/s390/s390.c (s390_delegitimize_address): Fix offset\n+\thandling for PLTOFF/GOTOFF.\n+\n 2011-03-22  Nick Clifton  <nickc@redhat.com>\n \n \t* config/i386/cygming.h (SUBTARGET_OVERRIDE_OPTIONS): Remove"}, {"sha": "ab1005a6c8aa38819c2354af5acfe76bec4901b2", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab081dd6234db09f2d8023f1f09777fc8cf10efb/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab081dd6234db09f2d8023f1f09777fc8cf10efb/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=ab081dd6234db09f2d8023f1f09777fc8cf10efb", "patch": "@@ -5030,17 +5030,22 @@ s390_delegitimize_address (rtx orig_x)\n       && REGNO (XEXP (x, 0)) == PIC_OFFSET_TABLE_REGNUM\n       && GET_CODE (XEXP (x, 1)) == CONST)\n     {\n+      HOST_WIDE_INT offset = 0;\n+\n       /* The const operand.  */\n       y = XEXP (XEXP (x, 1), 0);\n \n       if (GET_CODE (y) == PLUS\n \t  && GET_CODE (XEXP (y, 1)) == CONST_INT)\n-\ty = XEXP (y, 0);\n+\t{\n+\t  offset = INTVAL (XEXP (y, 1));\n+\t  y = XEXP (y, 0);\n+\t}\n \n       if (GET_CODE (y) == UNSPEC\n \t  && (XINT (y, 1) == UNSPEC_GOTOFF\n \t      || XINT (y, 1) == UNSPEC_PLTOFF))\n-\treturn XVECEXP (y, 0, 0);\n+\treturn plus_constant (XVECEXP (y, 0, 0), offset);\n     }\n \n   if (GET_CODE (x) != MEM)"}]}