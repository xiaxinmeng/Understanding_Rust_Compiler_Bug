{"sha": "208b7d85d73cbd166e207f0e062cccbdfbf52bb3", "node_id": "C_kwDOANBUbNoAKDIwOGI3ZDg1ZDczY2JkMTY2ZTIwN2YwZTA2MmNjY2JkZmJmNTJiYjM", "commit": {"author": {"name": "A. Wilcox", "email": "AWilcox@Wilcox-Tech.com", "date": "2020-08-30T15:30:07Z"}, "committer": {"name": "Ian Lance Taylor", "email": "iant@golang.org", "date": "2022-04-18T22:16:35Z"}, "message": "runtime: add special handling for signal 34\n\nThe musl libc uses signal 34 internally for setgid (similar to how glibc\nuses signal 32 and signal 33).  For this reason, special handling is\nneeded for this signal in the runtime. The gc implementation already\nhandles the signal accordingly.  As such, this commit intends to\nsimply copy the behavior of the Google Go implementation to libgo.\n\nSee https://go.dev/issues/39343\n\nReviewed-on: https://go-review.googlesource.com/c/gofrontend/+/400594", "tree": {"sha": "9ad7aa0d2479624e6a39cca53959dcd5219d4804", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9ad7aa0d2479624e6a39cca53959dcd5219d4804"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/208b7d85d73cbd166e207f0e062cccbdfbf52bb3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/208b7d85d73cbd166e207f0e062cccbdfbf52bb3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/208b7d85d73cbd166e207f0e062cccbdfbf52bb3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/208b7d85d73cbd166e207f0e062cccbdfbf52bb3/comments", "author": {"login": "awilfox", "id": 303838, "node_id": "MDQ6VXNlcjMwMzgzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/303838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awilfox", "html_url": "https://github.com/awilfox", "followers_url": "https://api.github.com/users/awilfox/followers", "following_url": "https://api.github.com/users/awilfox/following{/other_user}", "gists_url": "https://api.github.com/users/awilfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/awilfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awilfox/subscriptions", "organizations_url": "https://api.github.com/users/awilfox/orgs", "repos_url": "https://api.github.com/users/awilfox/repos", "events_url": "https://api.github.com/users/awilfox/events{/privacy}", "received_events_url": "https://api.github.com/users/awilfox/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ianlancetaylor", "id": 3194333, "node_id": "MDQ6VXNlcjMxOTQzMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/3194333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianlancetaylor", "html_url": "https://github.com/ianlancetaylor", "followers_url": "https://api.github.com/users/ianlancetaylor/followers", "following_url": "https://api.github.com/users/ianlancetaylor/following{/other_user}", "gists_url": "https://api.github.com/users/ianlancetaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianlancetaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianlancetaylor/subscriptions", "organizations_url": "https://api.github.com/users/ianlancetaylor/orgs", "repos_url": "https://api.github.com/users/ianlancetaylor/repos", "events_url": "https://api.github.com/users/ianlancetaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/ianlancetaylor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d210653f3907ac1829fd275d067b2855ea53da24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d210653f3907ac1829fd275d067b2855ea53da24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d210653f3907ac1829fd275d067b2855ea53da24"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "eeff61d82f8fec10c08f4f8f0bca25ca670ed5e0", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/208b7d85d73cbd166e207f0e062cccbdfbf52bb3/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/208b7d85d73cbd166e207f0e062cccbdfbf52bb3/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=208b7d85d73cbd166e207f0e062cccbdfbf52bb3", "patch": "@@ -1,4 +1,4 @@\n-62fc90f52da2f52cbe3b4f10e560dc6aa59baeb5\n+8336fe4a5da68d9188dfbc4fb647ccbbe4d60ba4\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "82e6996ab7e30b7de9dbe1e346a1aec9da41643a", "filename": "libgo/go/runtime/signal_gccgo.go", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/208b7d85d73cbd166e207f0e062cccbdfbf52bb3/libgo%2Fgo%2Fruntime%2Fsignal_gccgo.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/208b7d85d73cbd166e207f0e062cccbdfbf52bb3/libgo%2Fgo%2Fruntime%2Fsignal_gccgo.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fruntime%2Fsignal_gccgo.go?ref=208b7d85d73cbd166e207f0e062cccbdfbf52bb3", "patch": "@@ -106,7 +106,8 @@ func getsig(i uint32) uintptr {\n \tif sigaction(i, nil, &sa) < 0 {\n \t\t// On GNU/Linux glibc rejects attempts to call\n \t\t// sigaction with signal 32 (SIGCANCEL) or 33 (SIGSETXID).\n-\t\tif GOOS == \"linux\" && (i == 32 || i == 33) {\n+\t\t// On musl signal 34 (SIGSYNCCALL) also needs to be treated accordingly.\n+\t\tif GOOS == \"linux\" && (i == 32 || i == 33 || i == 34) {\n \t\t\treturn _SIG_DFL\n \t\t}\n \t\tthrow(\"sigaction read failure\")"}, {"sha": "cdf6fcd823fbc8a3cf33c3d2d21bebdc580ec513", "filename": "libgo/mksigtab.sh", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/208b7d85d73cbd166e207f0e062cccbdfbf52bb3/libgo%2Fmksigtab.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/208b7d85d73cbd166e207f0e062cccbdfbf52bb3/libgo%2Fmksigtab.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksigtab.sh?ref=208b7d85d73cbd166e207f0e062cccbdfbf52bb3", "patch": "@@ -95,10 +95,12 @@ checksig _SIGLOST '   {_SigNotify, \"SIGLOST: resource lost (Sun); server died (G\n \n # Special handling of signals 32 and 33 on GNU/Linux systems,\n # because they are special to glibc.\n+# Signal 34 is additionally special to Linux systems with musl.\n if test \"${GOOS}\" = \"linux\"; then\n-    SIGLIST=$SIGLIST\"_32__33_\"\n+    SIGLIST=$SIGLIST\"_32__33__34_\"\n     echo '\t32: {_SigSetStack + _SigUnblock, \"signal 32\"}, /* SIGCANCEL; see issue 6997 */'\n     echo '\t33: {_SigSetStack + _SigUnblock, \"signal 33\"}, /* SIGSETXID; see issues 3871, 9400, 12498 */'\n+    echo '\t34: {_SigSetStack + _SigUnblock, \"signal 34\"}, /* musl SIGSYNCCALL; see issue 39343 */'\n fi\n \n if test \"${GOOS}\" = \"aix\"; then"}]}