{"sha": "98544adc26c0f956ecf63495749f029e3943bc31", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg1NDRhZGMyNmMwZjk1NmVjZjYzNDk1NzQ5ZjAyOWUzOTQzYmMzMQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2016-04-27T18:10:02Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2016-04-27T18:10:02Z"}, "message": "i386.c (ix86_spill_class): Enable for TARGET_SSE2 when inter-unit moves to/from vector registers are enabled.\n\n\t* config/i386/i386.c (ix86_spill_class): Enable for TARGET_SSE2 when\n\tinter-unit moves to/from vector registers are enabled.  Do not disable\n\tfor TARGET_MMX.\n\nFrom-SVN: r235523", "tree": {"sha": "1f9ab2032cfeea3be2c9bb3b146ba2e1f8f1af2f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f9ab2032cfeea3be2c9bb3b146ba2e1f8f1af2f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/98544adc26c0f956ecf63495749f029e3943bc31", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98544adc26c0f956ecf63495749f029e3943bc31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98544adc26c0f956ecf63495749f029e3943bc31", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98544adc26c0f956ecf63495749f029e3943bc31/comments", "author": null, "committer": null, "parents": [{"sha": "b55b11bb7a9aceb8c7ffda6c194347ec6c1556e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b55b11bb7a9aceb8c7ffda6c194347ec6c1556e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b55b11bb7a9aceb8c7ffda6c194347ec6c1556e5"}], "stats": {"total": 26, "additions": 20, "deletions": 6}, "files": [{"sha": "cac640e0db1d61783aec0c514b5a8c3cd90210e4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98544adc26c0f956ecf63495749f029e3943bc31/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98544adc26c0f956ecf63495749f029e3943bc31/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=98544adc26c0f956ecf63495749f029e3943bc31", "patch": "@@ -1,3 +1,9 @@\n+2016-04-27  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* config/i386/i386.c (ix86_spill_class): Enable for TARGET_SSE2 when\n+\tinter-unit moves to/from vector registers are enabled.  Do not disable\n+\tfor TARGET_MMX.\n+\n 2016-04-27  David Malcolm  <dmalcolm@redhat.com>\n \n \t* df.h (DF_SCAN, DF_LR, DF_LIVE, DF_RD, DF_CHAIN, DF_WORD_LR,\n@@ -13,6 +19,12 @@\n \treflect the removal of the leading \"i\" field for INSN_UID in\n \tr210360.  Fix bogus apostrophe.\n \n+2016-04-27  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* config/i386/i386.c (ix86_spill_class): Enable for TARGET_SSE2 when\n+\tinter-unit moves to/from vector registers are enabled.  Do not disable\n+\tfor TARGET_MMX.\n+\n 2016-04-27  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.md\n@@ -21,8 +33,7 @@\n 2016-04-27  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/70155\n-\t* config/i386/i386.c (scalar_to_vector_candidate_p): Renamed\n-\tto ...\n+\t* config/i386/i386.c (scalar_to_vector_candidate_p): Renamed to ...\n \t(dimode_scalar_to_vector_candidate_p): This.\n \t(timode_scalar_to_vector_candidate_p): New function.\n \t(scalar_to_vector_candidate_p): Likewise.\n@@ -652,7 +663,7 @@\n \tdirectly without checking mode class.\n \n 2016-04-20  Andrew Pinski  <apinski@cavium.com>\n-            Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\t    Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \tPR target/64971\n \t* config/aarch64/aarch64.md (sibcall): Force call\n@@ -1078,7 +1089,7 @@\n \n 2016-04-18  Richard Biener  <rguenther@suse.de>\n \n-        PR middle-end/37870\n+\tPR middle-end/37870\n \t* expmed.c (extract_bit_field_1): Remove broken case\n \tusing a wider MODE_INT mode.\n "}, {"sha": "84a589aabe647fdb4a11298da99b57654f9dfb48", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98544adc26c0f956ecf63495749f029e3943bc31/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98544adc26c0f956ecf63495749f029e3943bc31/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=98544adc26c0f956ecf63495749f029e3943bc31", "patch": "@@ -53874,9 +53874,12 @@ ix86_get_mask_mode (unsigned nunits, unsigned vector_size)\n static reg_class_t\n ix86_spill_class (reg_class_t rclass, machine_mode mode)\n {\n-  if (TARGET_SSE && TARGET_GENERAL_REGS_SSE_SPILL && ! TARGET_MMX\n+  if (TARGET_GENERAL_REGS_SSE_SPILL\n+      && TARGET_SSE2\n+      && TARGET_INTER_UNIT_MOVES_TO_VEC\n+      && TARGET_INTER_UNIT_MOVES_FROM_VEC\n       && (mode == SImode || (TARGET_64BIT && mode == DImode))\n-      && rclass != NO_REGS && INTEGER_CLASS_P (rclass))\n+      && INTEGER_CLASS_P (rclass))\n     return ALL_SSE_REGS;\n   return NO_REGS;\n }"}]}