{"sha": "42962a480a755c0f72ff8de60a6de1fbfc85affd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDI5NjJhNDgwYTc1NWMwZjcyZmY4ZGU2MGE2ZGUxZmJmYzg1YWZmZA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1999-05-12T11:23:44Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "1999-05-12T11:23:44Z"}, "message": "javaprims.h: Updated namespace declarations.\n\n\t* include/javaprims.h: Updated namespace declarations.\n\t* classes.pl (scan): Uniquify class list.\n\t* Makefile.in, configure: Rebuilt.\n\t* Makefile.am (nat_source_files): Added natConcreteProcess.cc.\n\t(built_java_source_files): New macro.\n\t(nat_headers): Added built_java_source_files.\n\t(javao_files): Likewise.\n\t(EXTRA_libgcj_la_SOURCES): Likewise.\n\t(libgcj.zip): Create built class files.\n\t($(built_java_source_files:.java=.class)): New target.\n\t(jv_convert_LDADD): Added -L$(here)/.libs.\n\t* configure.in: Create links for ConcreteProcess.java and\n\tnatConcreteProcess.cc.\n\t* java/lang/Runtime.java (exec): Create a ConcreteProcess.\n\t* java/lang/natEcosProcess.cc: New file.\n\t* java/lang/EcosProcess.java: New file.\n\t* java/lang/PosixProcess.java: New file.\n\t* java/lang/natPosixProcess.cc: New file.\n\nFrom-SVN: r26901", "tree": {"sha": "abd228e8accc8f1b67bdf10c59963d3a1cc6047f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/abd228e8accc8f1b67bdf10c59963d3a1cc6047f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/42962a480a755c0f72ff8de60a6de1fbfc85affd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42962a480a755c0f72ff8de60a6de1fbfc85affd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/42962a480a755c0f72ff8de60a6de1fbfc85affd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42962a480a755c0f72ff8de60a6de1fbfc85affd/comments", "author": null, "committer": null, "parents": [{"sha": "3b551e09f129c36d08e8c9635e1dab299e022fa3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b551e09f129c36d08e8c9635e1dab299e022fa3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b551e09f129c36d08e8c9635e1dab299e022fa3"}], "stats": {"total": 680, "additions": 555, "deletions": 125}, "files": [{"sha": "7131ba77787c216bc69793f23cd02408668cb11f", "filename": "libjava/ChangeLog", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -1,3 +1,24 @@\n+1999-05-12  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* include/javaprims.h: Updated namespace declarations.\n+\t* classes.pl (scan): Uniquify class list.\n+\t* Makefile.in, configure: Rebuilt.\n+\t* Makefile.am (nat_source_files): Added natConcreteProcess.cc.\n+\t(built_java_source_files): New macro.\n+\t(nat_headers): Added built_java_source_files.\n+\t(javao_files): Likewise.\n+\t(EXTRA_libgcj_la_SOURCES): Likewise.\n+\t(libgcj.zip): Create built class files.\n+\t($(built_java_source_files:.java=.class)): New target.\n+\t(jv_convert_LDADD): Added -L$(here)/.libs.\n+\t* configure.in: Create links for ConcreteProcess.java and\n+\tnatConcreteProcess.cc.\n+\t* java/lang/Runtime.java (exec): Create a ConcreteProcess.\n+\t* java/lang/natEcosProcess.cc: New file.\n+\t* java/lang/EcosProcess.java: New file.\n+\t* java/lang/PosixProcess.java: New file.\n+\t* java/lang/natPosixProcess.cc: New file.\n+\n 1999-05-12  Warren Levy  <warrenl@cygnus.com>\n \n \t* java/net/PlainSocketImpl.java: Corrected copyright & header comments."}, {"sha": "82665dd7ba8ac8a7cfe7d2d5b32ece907947ceea", "filename": "libjava/Makefile.am", "status": "modified", "additions": 24, "deletions": 4, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -85,11 +85,12 @@ nat_files = $(nat_source_files:.cc=.lo)\n ## Objects from C sources in subdirs.\n c_files = $(c_source_files:.c=.lo)\n ## Objects from Java sources in subdirs.\n-javao_files = $(java_source_files:.java=.lo)\n+javao_files = $(java_source_files:.java=.lo) \\\n+\t$(built_java_source_files:.java=.lo)\n \n libgcj_la_SOURCES = prims.cc jni.cc exception.cc\n EXTRA_libgcj_la_SOURCES = boehm.cc nogc.cc posix-threads.cc no-threads.cc \\\n-\t$(c_source_files) $(java_source_files)\n+\t$(c_source_files) $(java_source_files) $(built_java_source_files)\n libgcj_la_DEPENDENCIES = libgcj.zip $(javao_files) $(nat_files) \\\n \t$(c_files) $(GCOBJS) $(THREADOBJS)\n libgcj_la_LIBADD = $(javao_files) $(nat_files) $(c_files) $(GCOBJS) \\\n@@ -106,13 +107,24 @@ libgcj_la_LDFLAGS = -rpath $(toolexeclibdir) \\\n ## hand-maintained headers.\n $(java_source_files:.java=.class): libgcj.zip\n \n+## FIXME: this isn't really correct.\n+$(built_java_source_files:.java=.class): $(built_java_source_files)\n+## This little nastiness is here so that the backquoted stuff in the\n+## GCJ definition can be correctly expanded, if required.\n+\tjavac=\"$(JAVAC)\"; \\\n+\t$$javac $(JCFLAGS) -classpath $(here):`cd $(srcdir) && /bin/pwd` \\\n+\t  -d $(here) $?\n+\n ## We have the zip file depend on the java sources and not the class\n ## files, because we don't know the names of all the class files.\n ## FIXME: this method fails in a peculiar case: if libgcj.zip is\n ## up-to-date, and foo.class is removed, and bar.java is touched, then\n ## `make libgcj.zip' will not rebuilt foo.class.  That's because\n ## libgcj.zip is not out-of-date with respect to foo.java.\n libgcj.zip: $(java_source_files)\n+## FIXME: this ought to depend on built_java_source_files, but right\n+## now it can't.  Ugly.\n+\t$(MAKE) $(built_java_source_files:.java=.class)\n ## This little nastiness is here so that the backquoted stuff in the\n ## GCJ definition can be correctly expanded, if required.\n \tjavac=\"$(JAVAC)\"; cd $(srcdir); \\\n@@ -168,7 +180,8 @@ $(javao_files): %.lo: %.java\n \t$(GCJH) -classpath $(top_builddir) $(basename $<)\n \n ## Header files used when compiling some of the nat* files.\n-nat_headers = $(ordinary_java_source_files:.java=.h)\n+nat_headers = $(ordinary_java_source_files:.java=.h) \\\n+\t$(built_java_source_files:.java=.h)\n \n $(nat_headers): libgcj.zip\n \n@@ -268,8 +281,10 @@ jv_convert_LINK = $(LIBTOOL) --mode=link $(GCJ) $(JC1FLAGS) $(LDFLAGS) \\\n ## We explicitly link in the libraries we need.  This way we don't\n ## need -nodefaultlibs, so we can still rely on gcj picking up the\n ## system libraries we need (via the specs file).\n+## We need the -L so that gcj can find libgcj with `-lgcj'.\n+## FIXME: should be _libs on some systems.\n jv_convert_LDADD = $(convert_source_files:.java=.lo) libgcj.la \\\n-\t$(GCLIBS) $(THREADLIBS) $(ZLIBS)\n+\t$(GCLIBS) $(THREADLIBS) $(ZLIBS) -L$(here)/.libs\n ## Depend on the spec file to make sure it is up to date before\n ## linking this program.\n jv_convert_DEPENDENCIES = $(convert_source_files:.java=.lo) \\\n@@ -411,6 +426,10 @@ java/awt/peer/WindowPeer.java\n \n # $(awt_java_source_files)\n \n+## Java files which are created by configure and thus are in the build\n+## directory.\n+built_java_source_files = java/lang/ConcreteProcess.java\n+\n ## List of all .java files to be compiled.  Please keep this list\n ## alphabetical.  Please put files from gnu/gcj/convert into\n ## convert_source_files.  If the .java file has a hand-maintained\n@@ -679,6 +698,7 @@ java/io/natFile.cc \\\n java/io/natFileDescriptor.cc \\\n java/lang/natCharacter.cc \\\n java/lang/natClass.cc \\\n+java/lang/natConcreteProcess.cc \\\n java/lang/natDouble.cc \\\n java/lang/natFirstThread.cc \\\n java/lang/natFloat.cc \\"}, {"sha": "e45a5a97ef9bfffe9813f5a7bab6f653d839a4f7", "filename": "libjava/Makefile.in", "status": "modified", "additions": 19, "deletions": 5, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -156,11 +156,13 @@ INCLUDES = -Iinclude -I$(top_srcdir)/include $(GCINCS) $(THREADINCS) $(EH_COMMON\n \n nat_files = $(nat_source_files:.cc=.lo)\n c_files = $(c_source_files:.c=.lo)\n-javao_files = $(java_source_files:.java=.lo)\n+javao_files = $(java_source_files:.java=.lo) \\\n+\t$(built_java_source_files:.java=.lo)\n+\n \n libgcj_la_SOURCES = prims.cc jni.cc exception.cc\n EXTRA_libgcj_la_SOURCES = boehm.cc nogc.cc posix-threads.cc no-threads.cc \\\n-\t$(c_source_files) $(java_source_files)\n+\t$(c_source_files) $(java_source_files) $(built_java_source_files)\n \n libgcj_la_DEPENDENCIES = libgcj.zip $(javao_files) $(nat_files) \\\n \t$(c_files) $(GCOBJS) $(THREADOBJS)\n@@ -177,7 +179,9 @@ CLEANFILES = libgcj.zip\n \n SUFFIXES = .class .java .h\n \n-nat_headers = $(ordinary_java_source_files:.java=.h)\n+nat_headers = $(ordinary_java_source_files:.java=.h) \\\n+\t$(built_java_source_files:.java=.h)\n+\n \n FTFRIEND = void JvRunMain (jclass klass, int argc, const char **argv)\n \n@@ -279,6 +283,8 @@ java/awt/peer/WindowPeer.java\n \n # $(awt_java_source_files)\n \n+built_java_source_files = java/lang/ConcreteProcess.java\n+\n ordinary_java_source_files = $(convert_source_files) \\\n gnu/gcj/text/BaseBreakIterator.java \\\n gnu/gcj/text/CharacterBreakIterator.java \\\n@@ -543,6 +549,7 @@ java/io/natFile.cc \\\n java/io/natFileDescriptor.cc \\\n java/lang/natCharacter.cc \\\n java/lang/natClass.cc \\\n+java/lang/natConcreteProcess.cc \\\n java/lang/natDouble.cc \\\n java/lang/natFirstThread.cc \\\n java/lang/natFloat.cc \\\n@@ -721,8 +728,9 @@ DEP_FILES =  .deps/$(srcdir)/$(CONVERT_DIR)/gen-from-JIS.P \\\n .deps/java/lang/ClassNotFoundException.P \\\n .deps/java/lang/CloneNotSupportedException.P \\\n .deps/java/lang/Cloneable.P .deps/java/lang/Comparable.P \\\n-.deps/java/lang/Compiler.P .deps/java/lang/Double.P \\\n-.deps/java/lang/Error.P .deps/java/lang/Exception.P \\\n+.deps/java/lang/Compiler.P .deps/java/lang/ConcreteProcess.P \\\n+.deps/java/lang/Double.P .deps/java/lang/Error.P \\\n+.deps/java/lang/Exception.P \\\n .deps/java/lang/ExceptionInInitializerError.P \\\n .deps/java/lang/FirstThread.P .deps/java/lang/Float.P \\\n .deps/java/lang/IllegalAccessError.P \\\n@@ -1341,7 +1349,13 @@ maintainer-clean-generic clean mostlyclean distclean maintainer-clean\n \n $(java_source_files:.java=.class): libgcj.zip\n \n+$(built_java_source_files:.java=.class): $(built_java_source_files)\n+\tjavac=\"$(JAVAC)\"; \\\n+\t$$javac $(JCFLAGS) -classpath $(here):`cd $(srcdir) && /bin/pwd` \\\n+\t  -d $(here) $?\n+\n libgcj.zip: $(java_source_files)\n+\t$(MAKE) $(built_java_source_files:.java=.class)\n \tjavac=\"$(JAVAC)\"; cd $(srcdir); \\\n \t  $$javac $(JCFLAGS) -classpath $(here):`/bin/pwd` -d $(here) \\\n \t    $(subst $(srcdir)/,,$?)"}, {"sha": "35da03ef1a00b19abf413061570106736c321cba", "filename": "libjava/classes.pl", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fclasses.pl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fclasses.pl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasses.pl?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -36,7 +36,7 @@ sub scan\n {\n     local ($dir, $indent) = @_;\n     local (@subdirs) = ();\n-    local (@classes) = ();\n+    local (%classes) = ();\n \n     local ($d) = new DirHandle $dir;\n     local (*JFILE);\n@@ -72,7 +72,7 @@ sub scan\n \t\t# For now assume that class names start with upper\n \t\t# case letter.\n \t\tnext unless /(class|interface) ([A-Z][A-Za-z0-9]+)/;\n-\t\tpush (@classes, $2);\n+\t\t$classes{$2} = 1;\n \t    }\n \t    close (FILE);\n \t}\n@@ -86,7 +86,7 @@ sub scan\n     print $spaces, \"namespace \", $classname, \"\\n\";\n     print $spaces, \"{\\n\";\n \n-    foreach (sort @classes)\n+    foreach (sort keys %classes)\n     {\n \tprint $spaces, \"  class \", $_, \";\\n\";\n     }"}, {"sha": "f0141ac58abe97344aa0f017896a207ad27dcac3", "filename": "libjava/configure", "status": "modified", "additions": 115, "deletions": 109, "changes": 224, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -2611,9 +2611,11 @@ fi\n case \"$TARGET_ECOS\" in\n    no)\n       FILE_DESCRIPTOR=natFileDescriptorPosix.cc\n+      PROCESS=Posix\n       ;;\n    *)\n       FILE_DESCRIPTOR=natFileDescriptorEcos.cc\n+      PROCESS=Ecos\n       cat >> confdefs.h <<\\EOF\n #define ECOS 1\n EOF\n@@ -2622,7 +2624,7 @@ EOF\n esac\n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:2626: checking how to run the C preprocessor\" >&5\n+echo \"configure:2628: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -2637,13 +2639,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 2641 \"configure\"\n+#line 2643 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2647: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2649: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2654,13 +2656,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2658 \"configure\"\n+#line 2660 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2664: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2666: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2671,13 +2673,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2675 \"configure\"\n+#line 2677 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2681: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2683: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2702,7 +2704,7 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n cat > conftest.$ac_ext <<EOF\n-#line 2706 \"configure\"\n+#line 2708 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n EOF\n@@ -2717,7 +2719,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 2721 \"configure\"\n+#line 2723 \"configure\"\n #include \"confdefs.h\"\n #include <sys/config.h>\n EOF\n@@ -2733,7 +2735,7 @@ rm -f conftest*\n \n \n cat > conftest.$ac_ext <<EOF\n-#line 2737 \"configure\"\n+#line 2739 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n EOF\n@@ -2748,7 +2750,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 2752 \"configure\"\n+#line 2754 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n EOF\n@@ -2767,6 +2769,10 @@ test -d java || mkdir java\n test -d java/io || mkdir java/io\n \n \n+test -d java/lang || mkdir java/lang\n+\n+\n+\n SYSTEMSPEC=\n \n \n@@ -2782,7 +2788,7 @@ ZLIBSPEC=\n libsubdir=.libs\n \n echo $ac_n \"checking for garbage collector to use\"\"... $ac_c\" 1>&6\n-echo \"configure:2786: checking for garbage collector to use\" >&5\n+echo \"configure:2792: checking for garbage collector to use\" >&5\n # Check whether --enable-java-gc or --disable-java-gc was given.\n if test \"${enable_java_gc+set}\" = set; then\n   enableval=\"$enable_java_gc\"\n@@ -2832,7 +2838,7 @@ esac\n \n \n echo $ac_n \"checking for threads package to use\"\"... $ac_c\" 1>&6\n-echo \"configure:2836: checking for threads package to use\" >&5\n+echo \"configure:2842: checking for threads package to use\" >&5\n # Check whether --enable-threads or --disable-threads was given.\n if test \"${enable_threads+set}\" = set; then\n   enableval=\"$enable_threads\"\n@@ -3024,12 +3030,12 @@ else\n    for ac_func in strerror ioctl select open fsync sleep\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3028: checking for $ac_func\" >&5\n+echo \"configure:3034: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3033 \"configure\"\n+#line 3039 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3052,7 +3058,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3056: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3062: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3079,12 +3085,12 @@ done\n    for ac_func in ctime_r ctime\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3083: checking for $ac_func\" >&5\n+echo \"configure:3089: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3088 \"configure\"\n+#line 3094 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3107,7 +3113,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3111: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3117: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3134,12 +3140,12 @@ done\n    for ac_func in gmtime_r localtime_r readdir_r getpwuid_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3138: checking for $ac_func\" >&5\n+echo \"configure:3144: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3143 \"configure\"\n+#line 3149 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3162,7 +3168,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3166: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3172: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3189,12 +3195,12 @@ done\n    for ac_func in access stat mkdir rename rmdir unlink realpath\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3193: checking for $ac_func\" >&5\n+echo \"configure:3199: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3198 \"configure\"\n+#line 3204 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3217,7 +3223,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3221: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3227: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3244,12 +3250,12 @@ done\n    for ac_func in inet_aton inet_addr\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3248: checking for $ac_func\" >&5\n+echo \"configure:3254: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3253 \"configure\"\n+#line 3259 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3272,7 +3278,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3276: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3282: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3299,12 +3305,12 @@ done\n    for ac_func in inet_pton uname\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3303: checking for $ac_func\" >&5\n+echo \"configure:3309: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3308 \"configure\"\n+#line 3314 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3327,7 +3333,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3331: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3337: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3355,12 +3361,12 @@ done\n    for ac_func in gethostbyname_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3359: checking for $ac_func\" >&5\n+echo \"configure:3365: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3364 \"configure\"\n+#line 3370 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3383,7 +3389,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3387: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3393: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3410,7 +3416,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 3414 \"configure\"\n+#line 3420 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -3434,12 +3440,12 @@ done\n    for ac_func in gethostbyaddr_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3438: checking for $ac_func\" >&5\n+echo \"configure:3444: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3443 \"configure\"\n+#line 3449 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3462,7 +3468,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3466: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3472: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3489,7 +3495,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 3493 \"configure\"\n+#line 3499 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -3513,12 +3519,12 @@ done\n    for ac_func in gethostname\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3517: checking for $ac_func\" >&5\n+echo \"configure:3523: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3522 \"configure\"\n+#line 3528 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3541,7 +3547,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3545: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3551: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3565,7 +3571,7 @@ EOF\n EOF\n \n      cat > conftest.$ac_ext <<EOF\n-#line 3569 \"configure\"\n+#line 3575 \"configure\"\n #include \"confdefs.h\"\n #include <unistd.h>\n EOF\n@@ -3592,12 +3598,12 @@ done\n    for ac_func in pthread_mutexattr_settype pthread_mutexattr_setkind_np sched_yield\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3596: checking for $ac_func\" >&5\n+echo \"configure:3602: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3601 \"configure\"\n+#line 3607 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3620,7 +3626,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3624: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3630: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3651,12 +3657,12 @@ done\n    for ac_func in gettimeofday time ftime\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3655: checking for $ac_func\" >&5\n+echo \"configure:3661: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3660 \"configure\"\n+#line 3666 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3679,7 +3685,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3683: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3689: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3712,12 +3718,12 @@ done\n    for ac_func in memmove\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3716: checking for $ac_func\" >&5\n+echo \"configure:3722: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3721 \"configure\"\n+#line 3727 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3740,7 +3746,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3744: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3750: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3773,12 +3779,12 @@ done\n    for ac_func in memcpy\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3777: checking for $ac_func\" >&5\n+echo \"configure:3783: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3782 \"configure\"\n+#line 3788 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3801,7 +3807,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3805: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3811: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3849,20 +3855,20 @@ done\n    #--------------------------------------------------------------------\n \n    echo $ac_n \"checking for socket libraries\"\"... $ac_c\" 1>&6\n-echo \"configure:3853: checking for socket libraries\" >&5\n+echo \"configure:3859: checking for socket libraries\" >&5\n if eval \"test \\\"`echo '$''{'gcj_cv_lib_sockets'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   gcj_cv_lib_sockets=\n      gcj_checkBoth=0\n      unset ac_cv_func_connect\n      echo $ac_n \"checking for connect\"\"... $ac_c\" 1>&6\n-echo \"configure:3861: checking for connect\" >&5\n+echo \"configure:3867: checking for connect\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_connect'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3866 \"configure\"\n+#line 3872 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char connect(); below.  */\n@@ -3885,7 +3891,7 @@ connect();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3889: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3895: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_connect=yes\"\n else\n@@ -3908,22 +3914,22 @@ fi\n      if test \"$gcj_checkSocket\" = 1; then\n \t unset ac_cv_func_connect\n \t echo $ac_n \"checking for main in -lsocket\"\"... $ac_c\" 1>&6\n-echo \"configure:3912: checking for main in -lsocket\" >&5\n+echo \"configure:3918: checking for main in -lsocket\" >&5\n ac_lib_var=`echo socket'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lsocket  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3920 \"configure\"\n+#line 3926 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:3927: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3933: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -3950,12 +3956,12 @@ fi\n \t LIBS=\"$LIBS -lsocket -lnsl\"\n \t unset ac_cv_func_accept\n \t echo $ac_n \"checking for accept\"\"... $ac_c\" 1>&6\n-echo \"configure:3954: checking for accept\" >&5\n+echo \"configure:3960: checking for accept\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_accept'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3959 \"configure\"\n+#line 3965 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char accept(); below.  */\n@@ -3978,7 +3984,7 @@ accept();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3982: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3988: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_accept=yes\"\n else\n@@ -4005,12 +4011,12 @@ fi\n      gcj_oldLibs=$LIBS\n      LIBS=\"$LIBS $gcj_cv_lib_sockets\"\n      echo $ac_n \"checking for gethostbyname\"\"... $ac_c\" 1>&6\n-echo \"configure:4009: checking for gethostbyname\" >&5\n+echo \"configure:4015: checking for gethostbyname\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4014 \"configure\"\n+#line 4020 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char gethostbyname(); below.  */\n@@ -4033,7 +4039,7 @@ gethostbyname();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4037: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4043: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_gethostbyname=yes\"\n else\n@@ -4051,22 +4057,22 @@ if eval \"test \\\"`echo '$ac_cv_func_'gethostbyname`\\\" = yes\"; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for main in -lnsl\"\"... $ac_c\" 1>&6\n-echo \"configure:4055: checking for main in -lnsl\" >&5\n+echo \"configure:4061: checking for main in -lnsl\" >&5\n ac_lib_var=`echo nsl'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lnsl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4063 \"configure\"\n+#line 4069 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:4070: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4076: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4098,15 +4104,15 @@ echo \"$ac_t\"\"$gcj_cv_lib_sockets\" 1>&6\n \n    if test \"$with_system_zlib\" = yes; then\n       echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n-echo \"configure:4102: checking for deflate in -lz\" >&5\n+echo \"configure:4108: checking for deflate in -lz\" >&5\n ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lz  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4110 \"configure\"\n+#line 4116 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -4117,7 +4123,7 @@ int main() {\n deflate()\n ; return 0; }\n EOF\n-if { (eval echo configure:4121: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4127: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4217,17 +4223,17 @@ for ac_hdr in unistd.h sys/time.h sys/types.h fcntl.h sys/ioctl.h sys/filio.h sy\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:4221: checking for $ac_hdr\" >&5\n+echo \"configure:4227: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4226 \"configure\"\n+#line 4232 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:4231: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:4237: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -4257,17 +4263,17 @@ for ac_hdr in dirent.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:4261: checking for $ac_hdr\" >&5\n+echo \"configure:4267: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4266 \"configure\"\n+#line 4272 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:4271: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:4277: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -4295,16 +4301,16 @@ done\n \n \n echo $ac_n \"checking whether struct sockaddr_in6 is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4299: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n+echo \"configure:4305: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4301 \"configure\"\n+#line 4307 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct sockaddr_in6 addr6;\n ; return 0; }\n EOF\n-if { (eval echo configure:4308: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4314: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_INET6 1\n@@ -4320,16 +4326,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for socklen_t in sys/socket.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4324: checking for socklen_t in sys/socket.h\" >&5\n+echo \"configure:4330: checking for socklen_t in sys/socket.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4326 \"configure\"\n+#line 4332 \"configure\"\n #include \"confdefs.h\"\n #include <sys/socket.h>\n int main() {\n socklen_t x = 5;\n ; return 0; }\n EOF\n-if { (eval echo configure:4333: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4339: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_SOCKLEN_T 1\n@@ -4345,16 +4351,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for tm_gmtoff in struct tm\"\"... $ac_c\" 1>&6\n-echo \"configure:4349: checking for tm_gmtoff in struct tm\" >&5\n+echo \"configure:4355: checking for tm_gmtoff in struct tm\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4351 \"configure\"\n+#line 4357 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n struct tm tim; tim.tm_gmtoff = 0;\n ; return 0; }\n EOF\n-if { (eval echo configure:4358: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4364: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define STRUCT_TM_HAS_GMTOFF 1\n@@ -4367,16 +4373,16 @@ else\n   rm -rf conftest*\n   echo \"$ac_t\"\"no\" 1>&6\n    echo $ac_n \"checking for global timezone variable\"\"... $ac_c\" 1>&6\n-echo \"configure:4371: checking for global timezone variable\" >&5\n+echo \"configure:4377: checking for global timezone variable\" >&5\n             cat > conftest.$ac_ext <<EOF\n-#line 4373 \"configure\"\n+#line 4379 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n long z2 = timezone;\n ; return 0; }\n EOF\n-if { (eval echo configure:4380: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4386: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_TIMEZONE 1\n@@ -4396,19 +4402,19 @@ rm -f conftest*\n # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4400: checking for working alloca.h\" >&5\n+echo \"configure:4406: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4405 \"configure\"\n+#line 4411 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n char *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:4412: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4418: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -4429,12 +4435,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:4433: checking for alloca\" >&5\n+echo \"configure:4439: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4438 \"configure\"\n+#line 4444 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -4462,7 +4468,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:4466: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4472: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -4494,12 +4500,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:4498: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:4504: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4503 \"configure\"\n+#line 4509 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -4524,12 +4530,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4528: checking for $ac_func\" >&5\n+echo \"configure:4534: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4533 \"configure\"\n+#line 4539 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4552,7 +4558,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4556: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4562: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4579,15 +4585,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:4583: checking stack direction for C alloca\" >&5\n+echo \"configure:4589: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4591 \"configure\"\n+#line 4597 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -4606,7 +4612,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:4610: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:4616: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -4633,7 +4639,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4637: checking for $ac_word\" >&5\n+echo \"configure:4643: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_PERL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5106,8 +5112,8 @@ fi; done\n EOF\n \n cat >> $CONFIG_STATUS <<EOF\n-ac_sources=\"java/io/$FILE_DESCRIPTOR include/$GCHDR include/$THREADH $SIGNAL_HANDLER\"\n-ac_dests=\"java/io/natFileDescriptor.cc include/java-gc.h include/java-threads.h include/java-signal.h\"\n+ac_sources=\"java/io/$FILE_DESCRIPTOR java/lang/${PROCESS}Process.java java/lang/nat${PROCESS}Process.cc include/$GCHDR include/$THREADH $SIGNAL_HANDLER\"\n+ac_dests=\"java/io/natFileDescriptor.cc java/lang/ConcreteProcess.java java/lang/natConcreteProcess.cc include/java-gc.h include/java-threads.h include/java-signal.h\"\n EOF\n \n cat >> $CONFIG_STATUS <<\\EOF"}, {"sha": "e21053574fed0270a79946a192fa8166e61ebf30", "filename": "libjava/configure.in", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.in?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -55,9 +55,11 @@ TARGET_ECOS=\"$with_ecos\"\n case \"$TARGET_ECOS\" in\n    no)\n       FILE_DESCRIPTOR=natFileDescriptorPosix.cc\n+      PROCESS=Posix\n       ;;\n    *)\n       FILE_DESCRIPTOR=natFileDescriptorEcos.cc\n+      PROCESS=Ecos\n       AC_DEFINE(ECOS)\n       ;;\n esac\n@@ -76,6 +78,11 @@ test -d java || mkdir java\n test -d java/io || mkdir java/io\n AC_LINK_FILES(java/io/$FILE_DESCRIPTOR, java/io/natFileDescriptor.cc)\n \n+dnl Likewise for ConcreteProcess.java and natConcreteProcess.cc.\n+test -d java/lang || mkdir java/lang\n+AC_LINK_FILES(java/lang/${PROCESS}Process.java, java/lang/ConcreteProcess.java)\n+AC_LINK_FILES(java/lang/nat${PROCESS}Process.cc, java/lang/natConcreteProcess.cc)\n+\n SYSTEMSPEC=\n AC_SUBST(SYSTEMSPEC)\n "}, {"sha": "2f815d28c06838274945e26dd9623bf86e00e3f5", "filename": "libjava/include/javaprims.h", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Finclude%2Fjavaprims.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Finclude%2Fjavaprims.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fjavaprims.h?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -106,6 +106,7 @@ extern \"Java\"\n       class Cloneable;\n       class Comparable;\n       class Compiler;\n+      class ConcreteProcess;\n       class Double;\n       class Error;\n       class Exception;\n@@ -161,7 +162,6 @@ extern \"Java\"\n       class VerifyError;\n       class VirtualMachineError;\n       class Void;\n-\n       namespace reflect\n       {\n         class AccessibleObject;\n@@ -197,6 +197,7 @@ extern \"Java\"\n       class Observable;\n       class Observer;\n       class Properties;\n+      class PropertyResourceBundle;\n       class Random;\n       class ResourceBundle;\n       class SimpleTimeZone;\n@@ -206,19 +207,20 @@ extern \"Java\"\n       class TooManyListenersException;\n       class Vector;\n       class VectorEnumeration;\n-\n       namespace zip\n       {\n         class Adler32;\n         class CRC32;\n         class Checksum;\n         class Deflater;\n         class DeflaterOutputStream;\n+        class InflaterInputStream;\n         class ZipConstants;\n         class ZipEntry;\n         class ZipEnumeration;\n         class ZipException;\n         class ZipFile;\n+        class ZipInputStream;\n         class ZipOutputStream;\n       };\n     };"}, {"sha": "83449169a648a61ff1b6b842456b72f148c04b45", "filename": "libjava/java/lang/EcosProcess.java", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fjava%2Flang%2FEcosProcess.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fjava%2Flang%2FEcosProcess.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FEcosProcess.java?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -0,0 +1,59 @@\n+// EcosProcess.java - Subclass of Process for eCos systems.\n+\n+/* Copyright (C) 1998, 1999  Cygnus Solutions\n+\n+   This file is part of libgcj.\n+\n+This software is copyrighted work licensed under the terms of the\n+Libgcj License.  Please consult the file \"LIBGCJ_LICENSE\" for\n+details.  */\n+\n+package java.lang;\n+\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.io.IOException;\n+\n+/**\n+ * @author Tom Tromey <tromey@cygnus.com>\n+ * @date May 11, 1999\n+ */\n+\n+// This is entirely internal to our implementation.\n+\n+// This file is copied to `ConcreteProcess.java' before compilation.\n+// Hence the class name apparently does not match the file name.\n+final class ConcreteProcess extends Process\n+{\n+  // See natEcosProcess.cc to understand why this is native.\n+  public native void destroy ();\n+\n+  public int exitValue ()\n+  {\n+    return 0;\n+  }\n+  public InputStream getErrorStream ()\n+  {\n+    return null;\n+  }\n+\n+  public InputStream getInputStream ()\n+  {\n+    return null;\n+  }\n+\n+  public OutputStream getOutputStream ()\n+  {\n+    return null;\n+  }\n+\n+  public int waitFor () throws InterruptedException\n+  {\n+    return 0;\n+  }\n+\n+  public ConcreteProcess (String[] progarray, String[] envp) throws IOException\n+  {\n+    throw new IOException (\"eCos processes unimplemented\");\n+  }\n+}"}, {"sha": "396287ad46d8eaa99e0ec8c90898f01d76dc7b39", "filename": "libjava/java/lang/PosixProcess.java", "status": "added", "additions": 74, "deletions": 0, "changes": 74, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fjava%2Flang%2FPosixProcess.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fjava%2Flang%2FPosixProcess.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FPosixProcess.java?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -0,0 +1,74 @@\n+// PosixProcess.java - Subclass of Process for POSIX systems.\n+\n+/* Copyright (C) 1998, 1999  Cygnus Solutions\n+\n+   This file is part of libgcj.\n+\n+This software is copyrighted work licensed under the terms of the\n+Libgcj License.  Please consult the file \"LIBGCJ_LICENSE\" for\n+details.  */\n+\n+package java.lang;\n+\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.io.IOException;\n+\n+/**\n+ * @author Tom Tromey <tromey@cygnus.com>\n+ * @date May 3, 1999\n+ */\n+\n+// This is entirely internal to our implementation.\n+\n+// This file is copied to `ConcreteProcess.java' before compilation.\n+// Hence the class name apparently does not match the file name.\n+final class ConcreteProcess extends Process\n+{\n+  public native void destroy ();\n+  public native int exitValue ();\n+\n+  public InputStream getErrorStream ()\n+  {\n+    return errorStream;\n+  }\n+\n+  public InputStream getInputStream ()\n+  {\n+    return inputStream;\n+  }\n+\n+  public OutputStream getOutputStream ()\n+  {\n+    return outputStream;\n+  }\n+\n+  public native int waitFor () throws InterruptedException;\n+\n+  // This is used for actual initialization, as we can't write a\n+  // native constructor.\n+  public native void startProcess (String[] progarray, String[] envp)\n+    throws IOException;\n+\n+  // This file is copied to `ConcreteProcess.java' before\n+  // compilation.  Hence the constructor name apparently does not\n+  // match the file name.\n+  public ConcreteProcess (String[] progarray, String[] envp) throws IOException\n+  {\n+    startProcess (progarray, envp);\n+  }\n+\n+  // The process id.  This is cast to a pid_t on the native side.\n+  private long pid;\n+\n+  // True when child has exited.\n+  private boolean hasExited;\n+\n+  // The exit status, if the child has exited.\n+  private int status;\n+\n+  // The streams.\n+  private InputStream errorStream;\n+  private InputStream inputStream;\n+  private OutputStream outputStream;\n+}"}, {"sha": "62a7c181d9f7f2fb70bd824e052b47455fe910ce", "filename": "libjava/java/lang/Runtime.java", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fjava%2Flang%2FRuntime.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fjava%2Flang%2FRuntime.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FRuntime.java?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -52,8 +52,7 @@ public Process exec (String[] progarray, String[] envp) throws IOException\n     SecurityManager s = System.getSecurityManager();\n     if (s != null)\n       s.checkExec(progarray[0]);\n-    // FIXME.\n-    return null;\n+    return new ConcreteProcess (progarray, envp);\n   }\n \n   private final static void checkExit (int status)"}, {"sha": "774a6977aac3075e55455e84cfa10d83ff18eb9d", "filename": "libjava/java/lang/natEcosProcess.cc", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fjava%2Flang%2FnatEcosProcess.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fjava%2Flang%2FnatEcosProcess.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatEcosProcess.cc?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -0,0 +1,25 @@\n+// natEcosProcess.cc - Native side of eCos processes.\n+\n+/* Copyright (C) 1998, 1999  Cygnus Solutions\n+\n+   This file is part of libgcj.\n+\n+This software is copyrighted work licensed under the terms of the\n+Libgcj License.  Please consult the file \"LIBGCJ_LICENSE\" for\n+details.  */\n+\n+// The configury system needs this file to exist, since we can't\n+// really conditionally link files (an autoconf bug).  To avoid having\n+// an empty translation unit, we make a single method native.  FIXME.\n+\n+#include <config.h>\n+\n+#include <cni.h>\n+#include <jvm.h>\n+\n+#include <java/lang/ConcreteProcess.h>\n+\n+void\n+java::lang::ConcreteProcess::destroy (void)\n+{\n+}"}, {"sha": "30fa9d582299a21d33b5b71b23fefde087d8f767", "filename": "libjava/java/lang/natPosixProcess.cc", "status": "added", "additions": 203, "deletions": 0, "changes": 203, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fjava%2Flang%2FnatPosixProcess.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42962a480a755c0f72ff8de60a6de1fbfc85affd/libjava%2Fjava%2Flang%2FnatPosixProcess.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatPosixProcess.cc?ref=42962a480a755c0f72ff8de60a6de1fbfc85affd", "patch": "@@ -0,0 +1,203 @@\n+// natPosixProcess.cc - Native side of POSIX process code.\n+\n+/* Copyright (C) 1998, 1999  Cygnus Solutions\n+\n+   This file is part of libgcj.\n+\n+This software is copyrighted work licensed under the terms of the\n+Libgcj License.  Please consult the file \"LIBGCJ_LICENSE\" for\n+details.  */\n+\n+#include <config.h>\n+\n+#ifdef HAVE_UNISTD_H\n+#include <unistd.h>\n+#endif\n+#include <errno.h>\n+#include <fcntl.h>\n+#include <sys/types.h>\n+#include <sys/wait.h>\n+#include <signal.h>\n+#include <string.h>\n+#include <stdlib.h>\n+\n+#include <cni.h>\n+#include <jvm.h>\n+\n+#include <java/lang/ConcreteProcess.h>\n+#include <java/lang/IllegalThreadStateException.h>\n+#include <java/lang/InterruptedException.h>\n+#include <java/lang/NullPointerException.h>\n+#include <java/lang/Thread.h>\n+#include <java/io/FileDescriptor.h>\n+#include <java/io/FileInputStream.h>\n+#include <java/io/FileOutputStream.h>\n+#include <java/io/IOException.h>\n+\n+extern char **environ;\n+\n+void\n+java::lang::ConcreteProcess::destroy (void)\n+{\n+  if (! hasExited)\n+    {\n+      // Really kill it.\n+      kill ((pid_t) pid, SIGKILL);\n+    }\n+}\n+\n+jint\n+java::lang::ConcreteProcess::exitValue (void)\n+{\n+  if (! hasExited)\n+    {\n+      int wstat;\n+      pid_t r = waitpid ((pid_t) pid, &wstat, WNOHANG);\n+      if (r == -1)\n+\t{\n+\t  jstring x = JvNewStringLatin1 (strerror (errno));\n+\t  _Jv_Throw (new IllegalThreadStateException (x));\n+\t}\n+\n+      hasExited = true;\n+      // Just use the raw status.  FIXME: what is right?\n+      status = wstat;\n+    }\n+\n+  return status;\n+}\n+\n+jint\n+java::lang::ConcreteProcess::waitFor (void)\n+{\n+  if (! hasExited)\n+    {\n+      int wstat;\n+      int r = waitpid ((pid_t) pid, &wstat, 0);\n+\n+      if (r != -1)\n+\t{\n+\t  hasExited = true;\n+\t  // Just use the raw status.  FIXME: what is right?\n+\t  status = wstat;\n+\t}\n+\n+      if (java::lang::Thread::interrupted())\n+\t_Jv_Throw (new InterruptedException (JvNewStringLatin1 (\"wait interrupted\")));\n+    }\n+\n+  return status;\n+}\n+\n+static char *\n+new_string (jstring string)\n+{\n+  jsize s = _Jv_GetStringUTFLength (string);\n+  char *buf = (char *) _Jv_Malloc (s + 1);\n+  _Jv_GetStringUTFRegion (string, 0, s, buf);\n+  buf[s] = '\\0';\n+  return buf;\n+}\n+\n+void\n+java::lang::ConcreteProcess::startProcess (jstringArray progarray,\n+\t\t\t\t\t   jstringArray envp)\n+{\n+  using namespace java::io;\n+\n+  hasExited = false;\n+\n+  if (! progarray)\n+    _Jv_Throw (new NullPointerException);\n+\n+  // Transform arrays to native form.\n+  // FIXME: we use malloc here.  We shouldn't.  If an exception is\n+  // thrown we will leak memory.\n+  char **args = (char **) _Jv_Malloc ((progarray->length + 1)\n+\t\t\t\t      * sizeof (char *));\n+\n+  char **env = NULL;\n+  if (envp)\n+    env = (char **) _Jv_Malloc ((envp->length + 1) * sizeof (char *));\n+\n+//   for (int i = 0; i < progarray->length; ++i)\n+//     args[i] = NULL;\n+//   for (int i = 0; i < envp->length; ++i)\n+//     env[i] = NULL;\n+\n+  // FIXME: GC will fail here if _Jv_Malloc throws an exception.\n+  // That's because we have to manually free the contents, but we \n+  jstring *elts = elements (progarray);\n+  for (int i = 0; i < progarray->length; ++i)\n+    args[i] = new_string (elts[i]);\n+  args[progarray->length] = NULL;\n+\n+  if (envp)\n+    {\n+      elts = elements (envp);\n+      for (int i = 0; i < envp->length; ++i)\n+\targs[i] = new_string (elts[i]);\n+      args[envp->length] = NULL;\n+    }\n+\n+  // Create pipes for I/O.\n+  int inp[2], outp[2], errp[2];\n+\n+  if (pipe (inp)\n+      || pipe (outp)\n+      || pipe (errp))\n+    {\n+    ioerror:\n+      // FIXME.\n+      _Jv_Free (args);\n+      if (env)\n+\t_Jv_Free (env);\n+      _Jv_Throw (new IOException (JvNewStringLatin1 (strerror (errno))));\n+    }\n+\n+  // We create the streams before forking.  Otherwise if we had an\n+  // error while creating the streams we would have run the child with\n+  // no way to communicate with it.\n+  errorStream = new FileInputStream (new FileDescriptor (errp[0]));\n+  inputStream = new FileInputStream (new FileDescriptor (inp[0]));\n+  outputStream = new FileOutputStream (new FileDescriptor (outp[1]));\n+\n+  // We don't use vfork() because that would cause the local\n+  // environment to be set by the child.\n+  if ((pid = (jlong) fork ()) == -1)\n+    goto ioerror;\n+\n+  if (pid == 0)\n+    {\n+      // Child process, so remap descriptors and exec.\n+\n+      if (envp)\n+\tenviron = env;\n+\n+      // We ignore errors from dup2 because they should never occur.\n+      dup2 (outp[0], 0);\n+      dup2 (inp[1], 1);\n+      dup2 (errp[1], 2);\n+\n+      close (inp[0]);\n+      close (inp[1]);\n+      close (errp[0]);\n+      close (errp[1]);\n+      close (outp[0]);\n+      close (outp[1]);\n+\n+      environ = env;\n+      execvp (args[0], args);\n+      _exit (127);\n+    }\n+\n+  // Parent.  Close extra file descriptors and mark ours as\n+  // close-on-exec.\n+  close (outp[0]);\n+  close (inp[1]);\n+  close (errp[1]);\n+\n+  fcntl (outp[1], F_SETFD, 1);\n+  fcntl (inp[0], F_SETFD, 1);\n+  fcntl (errp[0], F_SETFD, 1);\n+}"}]}