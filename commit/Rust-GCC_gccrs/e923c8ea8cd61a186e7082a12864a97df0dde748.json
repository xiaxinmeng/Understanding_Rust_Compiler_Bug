{"sha": "e923c8ea8cd61a186e7082a12864a97df0dde748", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTkyM2M4ZWE4Y2Q2MWExODZlNzA4MmExMjg2NGE5N2RmMGRkZTc0OA==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@google.com", "date": "2009-07-06T17:04:34Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2009-07-06T17:04:34Z"}, "message": "tree-pretty-print.c (dump_generic_node): Protect against NULL op0.\n\n\n\t* tree-pretty-print.c (dump_generic_node): Protect\n\tagainst NULL op0.\n\t(debug_tree_chain): Handle cycles.\n\nFrom-SVN: r149289", "tree": {"sha": "da30ecfc5ea26303c889456d1b4acfc28ad86266", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da30ecfc5ea26303c889456d1b4acfc28ad86266"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e923c8ea8cd61a186e7082a12864a97df0dde748", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e923c8ea8cd61a186e7082a12864a97df0dde748", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e923c8ea8cd61a186e7082a12864a97df0dde748", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e923c8ea8cd61a186e7082a12864a97df0dde748/comments", "author": {"login": "dnovillo", "id": 7295335, "node_id": "MDQ6VXNlcjcyOTUzMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/7295335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnovillo", "html_url": "https://github.com/dnovillo", "followers_url": "https://api.github.com/users/dnovillo/followers", "following_url": "https://api.github.com/users/dnovillo/following{/other_user}", "gists_url": "https://api.github.com/users/dnovillo/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnovillo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnovillo/subscriptions", "organizations_url": "https://api.github.com/users/dnovillo/orgs", "repos_url": "https://api.github.com/users/dnovillo/repos", "events_url": "https://api.github.com/users/dnovillo/events{/privacy}", "received_events_url": "https://api.github.com/users/dnovillo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b824522ad40d558e595d2ef529a9ddad8c78c8bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b824522ad40d558e595d2ef529a9ddad8c78c8bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b824522ad40d558e595d2ef529a9ddad8c78c8bf"}], "stats": {"total": 29, "additions": 23, "deletions": 6}, "files": [{"sha": "0c740ebc1dfa33a5e5a7d7cca7842c4456627006", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e923c8ea8cd61a186e7082a12864a97df0dde748/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e923c8ea8cd61a186e7082a12864a97df0dde748/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e923c8ea8cd61a186e7082a12864a97df0dde748", "patch": "@@ -1,3 +1,9 @@\n+2009-07-06  Diego Novillo  <dnovillo@google.com>\n+\n+\t* tree-pretty-print.c (dump_generic_node): Protect\n+\tagainst NULL op0.\n+\t(debug_tree_chain): Handle cycles.\n+\n 2009-07-06  Nick Clifton  <nickc@redhat.com>\n \t    DJ Delorie  <dj@redhat.com>\n "}, {"sha": "faf23c6192970360ec646dd7750454758e0d7d09", "filename": "gcc/tree-pretty-print.c", "status": "modified", "additions": 17, "deletions": 6, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e923c8ea8cd61a186e7082a12864a97df0dde748/gcc%2Ftree-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e923c8ea8cd61a186e7082a12864a97df0dde748/gcc%2Ftree-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-pretty-print.c?ref=e923c8ea8cd61a186e7082a12864a97df0dde748", "patch": "@@ -99,13 +99,24 @@ debug_generic_stmt (tree t)\n void\n debug_tree_chain (tree t)\n {\n+  struct pointer_set_t *seen = pointer_set_create ();\n+\n   while (t)\n-  {\n-    print_generic_expr (stderr, t, TDF_VOPS|TDF_MEMSYMS|TDF_UID);\n-    fprintf(stderr, \" \");\n-    t = TREE_CHAIN (t);\n-  }\n+    {\n+      print_generic_expr (stderr, t, TDF_VOPS|TDF_MEMSYMS|TDF_UID);\n+      fprintf (stderr, \" \");\n+      t = TREE_CHAIN (t);\n+      if (pointer_set_insert (seen, t))\n+\t{\n+\t  fprintf (stderr, \"... [cycled back to \");\n+\t  print_generic_expr (stderr, t, TDF_VOPS|TDF_MEMSYMS|TDF_UID);\n+\t  fprintf (stderr, \"]\");\n+\t  break;\n+\t}\n+    }\n   fprintf (stderr, \"\\n\");\n+\n+  pointer_set_destroy (seen);\n }\n \n /* Prints declaration DECL to the FILE with details specified by FLAGS.  */\n@@ -1051,7 +1062,7 @@ dump_generic_node (pretty_printer *buffer, tree node, int spc, int flags,\n     case COMPONENT_REF:\n       op0 = TREE_OPERAND (node, 0);\n       str = \".\";\n-      if (TREE_CODE (op0) == INDIRECT_REF)\n+      if (op0 && TREE_CODE (op0) == INDIRECT_REF)\n \t{\n \t  op0 = TREE_OPERAND (op0, 0);\n \t  str = \"->\";"}]}