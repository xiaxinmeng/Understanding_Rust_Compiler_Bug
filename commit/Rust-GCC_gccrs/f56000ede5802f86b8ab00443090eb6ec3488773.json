{"sha": "f56000ede5802f86b8ab00443090eb6ec3488773", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjU2MDAwZWRlNTgwMmY4NmI4YWIwMDQ0MzA5MGViNmVjMzQ4ODc3Mw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2010-05-08T12:06:57Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-05-08T12:06:57Z"}, "message": "gimple.c (gimple_types_compatible_p): Treat bounds of domain types as equal if they are both PLACEHOLDER_EXPRs.\n\n\t* gimple.c (gimple_types_compatible_p) <ARRAY_TYPE>: Treat bounds of\n\tdomain types as equal if they are both PLACEHOLDER_EXPRs.\n\nFrom-SVN: r159185", "tree": {"sha": "57e6668227eb70406d56df0c6b6cd2991214eb57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/57e6668227eb70406d56df0c6b6cd2991214eb57"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f56000ede5802f86b8ab00443090eb6ec3488773", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f56000ede5802f86b8ab00443090eb6ec3488773", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f56000ede5802f86b8ab00443090eb6ec3488773", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f56000ede5802f86b8ab00443090eb6ec3488773/comments", "author": null, "committer": null, "parents": [{"sha": "901ad63f3070d0f561f205618cc830486af365fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/901ad63f3070d0f561f205618cc830486af365fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/901ad63f3070d0f561f205618cc830486af365fb"}], "stats": {"total": 39, "additions": 37, "deletions": 2}, "files": [{"sha": "735c120b2e74b6be75651f06061f5297786e4610", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f56000ede5802f86b8ab00443090eb6ec3488773/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f56000ede5802f86b8ab00443090eb6ec3488773/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f56000ede5802f86b8ab00443090eb6ec3488773", "patch": "@@ -1,3 +1,8 @@\n+2010-05-08  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gimple.c (gimple_types_compatible_p) <ARRAY_TYPE>: Treat bounds of\n+\tdomain types as equal if they are both PLACEHOLDER_EXPRs.\n+\n 2010-05-08  Richard Guenther  <rguenther@suse.de>\n \n \t* lto-wrapper.c (run_gcc): Remove linker output from"}, {"sha": "d9a613ad1892fdf38b4b3eef090b1ee50db34428", "filename": "gcc/gimple.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f56000ede5802f86b8ab00443090eb6ec3488773/gcc%2Fgimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f56000ede5802f86b8ab00443090eb6ec3488773/gcc%2Fgimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple.c?ref=f56000ede5802f86b8ab00443090eb6ec3488773", "patch": "@@ -3305,9 +3305,15 @@ gimple_types_compatible_p (tree t1, tree t2)\n \n \t      /* The minimum/maximum values have to be the same.  */\n \t      if ((min1 == min2\n-\t\t   || (min1 && min2 && operand_equal_p (min1, min2, 0)))\n+\t\t   || (min1 && min2\n+\t\t       && ((TREE_CODE (min1) == PLACEHOLDER_EXPR\n+\t\t\t    && TREE_CODE (min2) == PLACEHOLDER_EXPR)\n+\t\t           || operand_equal_p (min1, min2, 0))))\n \t\t  && (max1 == max2\n-\t\t      || (max1 && max2 && operand_equal_p (max1, max2, 0))))\n+\t\t      || (max1 && max2\n+\t\t\t  && ((TREE_CODE (max1) == PLACEHOLDER_EXPR\n+\t\t\t       && TREE_CODE (max2) == PLACEHOLDER_EXPR)\n+\t\t\t      || operand_equal_p (max1, max2, 0)))))\n \t\tgoto same_types;\n \t      else\n \t\tgoto different_types;"}, {"sha": "b0d26f113db9cb4d83032a60be64c30a257dc2a8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f56000ede5802f86b8ab00443090eb6ec3488773/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f56000ede5802f86b8ab00443090eb6ec3488773/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f56000ede5802f86b8ab00443090eb6ec3488773", "patch": "@@ -1,3 +1,8 @@\n+2010-05-08  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/lto6.adb: New test.\n+\t* gnat.dg/lto6_pkg.ads: New helper.\n+\n 2010-05-08  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/lto5.adb: New test."}, {"sha": "f3d4841d7aa8cf738e26699bb966d6f73221f55b", "filename": "gcc/testsuite/gnat.dg/lto6.adb", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f56000ede5802f86b8ab00443090eb6ec3488773/gcc%2Ftestsuite%2Fgnat.dg%2Flto6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f56000ede5802f86b8ab00443090eb6ec3488773/gcc%2Ftestsuite%2Fgnat.dg%2Flto6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Flto6.adb?ref=f56000ede5802f86b8ab00443090eb6ec3488773", "patch": "@@ -0,0 +1,11 @@\n+-- { dg-do run }\n+-- { dg-options \"-gnat05 -O2 -flto\" }\n+\n+with Lto6_Pkg; use Lto6_Pkg;\n+\n+procedure Lto6 is\n+  type Enum is (A, B, C, D);\n+  Table : array (B .. C, 1 .. 1) of F_String := (others => (others => Null_String));\n+begin\n+  Table := (others => (others => Null_String));\n+end;"}, {"sha": "81b7ddc5a87dc89f093d5563a0253380d1d8328e", "filename": "gcc/testsuite/gnat.dg/lto6_pkg.ads", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f56000ede5802f86b8ab00443090eb6ec3488773/gcc%2Ftestsuite%2Fgnat.dg%2Flto6_pkg.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f56000ede5802f86b8ab00443090eb6ec3488773/gcc%2Ftestsuite%2Fgnat.dg%2Flto6_pkg.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Flto6_pkg.ads?ref=f56000ede5802f86b8ab00443090eb6ec3488773", "patch": "@@ -0,0 +1,8 @@\n+with Ada.Finalization; use Ada.Finalization;\n+\n+package Lto6_Pkg is\n+  type F_String is new Controlled with record\n+    Data : access String;\n+  end record;\n+  Null_String : constant F_String := (Controlled with Data => null);\n+end Lto6_Pkg;"}]}