{"sha": "9fbd3e416654b42041026f9d51d1115a42dd5d34", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWZiZDNlNDE2NjU0YjQyMDQxMDI2ZjlkNTFkMTExNWE0MmRkNWQzNA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2003-01-28T19:30:00Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2003-01-28T19:30:00Z"}, "message": "cpplib.h (struct cpp_options): Add warn_deprecated field.\n\n        * cpplib.h (struct cpp_options): Add warn_deprecated field.\n        * cppinit.c (cpp_create_reader): Turn it on by default.\n        * c-opts.c (c_common_decode_option): Set it.\n        * cpplib.c (do_pragma_once): Only complain about #pragma once\n        if warn_deprecated is set.\n\nFrom-SVN: r62005", "tree": {"sha": "e935857a003fa751109e2bb1c411f1ff70dd7772", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e935857a003fa751109e2bb1c411f1ff70dd7772"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9fbd3e416654b42041026f9d51d1115a42dd5d34", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fbd3e416654b42041026f9d51d1115a42dd5d34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9fbd3e416654b42041026f9d51d1115a42dd5d34", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fbd3e416654b42041026f9d51d1115a42dd5d34/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fe352c2900b2bfc9af52a1f761063a6bb974acdb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe352c2900b2bfc9af52a1f761063a6bb974acdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe352c2900b2bfc9af52a1f761063a6bb974acdb"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "51fed17af87f8eed35546f372ba45d69ae025364", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fbd3e416654b42041026f9d51d1115a42dd5d34/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fbd3e416654b42041026f9d51d1115a42dd5d34/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9fbd3e416654b42041026f9d51d1115a42dd5d34", "patch": "@@ -1,4 +1,13 @@\n+2003-01-28  Jason Merrill  <jason@redhat.com>\n+\n+\t* cpplib.h (struct cpp_options): Add warn_deprecated field.\n+\t* cppinit.c (cpp_create_reader): Turn it on by default.\n+\t* c-opts.c (c_common_decode_option): Set it.\n+\t* cpplib.c (do_pragma_once): Only complain about #pragma once\n+\tif warn_deprecated is set.\n+\n 2003-01-28  Dale Johannesen  <dalej@apple.com>\n+\n         * emit-rtl.c (const_double_htab_hash):  Use mode in the hash.\n         * loop.c (scan_loop):  Move movables on -Os rich-register targets.\n         * config/rs6000/rs6000.md (sibcall*):  Use match_operand for LR."}, {"sha": "4043447fdf2a9342185bb3de80176d3a622ed74a", "filename": "gcc/c-opts.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fbd3e416654b42041026f9d51d1115a42dd5d34/gcc%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fbd3e416654b42041026f9d51d1115a42dd5d34/gcc%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-opts.c?ref=9fbd3e416654b42041026f9d51d1115a42dd5d34", "patch": "@@ -767,6 +767,7 @@ c_common_decode_option (argc, argv)\n \n     case OPT_Wdeprecated:\n       warn_deprecated = on;\n+      cpp_opts->warn_deprecated = on;\n       break;\n \n     case OPT_Wdiv_by_zero:"}, {"sha": "591b4bfd76aaf8ef9b0286eede780ee6742f8e58", "filename": "gcc/cppinit.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fbd3e416654b42041026f9d51d1115a42dd5d34/gcc%2Fcppinit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fbd3e416654b42041026f9d51d1115a42dd5d34/gcc%2Fcppinit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppinit.c?ref=9fbd3e416654b42041026f9d51d1115a42dd5d34", "patch": "@@ -527,6 +527,7 @@ cpp_create_reader (lang)\n   CPP_OPTION (pfile, tabstop) = 8;\n   CPP_OPTION (pfile, operator_names) = 1;\n   CPP_OPTION (pfile, warn_endif_labels) = 1;\n+  CPP_OPTION (pfile, warn_deprecated) = 1;\n   CPP_OPTION (pfile, warn_long_long) = !CPP_OPTION (pfile, c99);\n \n   CPP_OPTION (pfile, pending) ="}, {"sha": "a40fe1229ff4e5f5f111ce36dbc983484112b0d6", "filename": "gcc/cpplib.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fbd3e416654b42041026f9d51d1115a42dd5d34/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fbd3e416654b42041026f9d51d1115a42dd5d34/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=9fbd3e416654b42041026f9d51d1115a42dd5d34", "patch": "@@ -1223,7 +1223,8 @@ static void\n do_pragma_once (pfile)\n      cpp_reader *pfile;\n {\n-  cpp_error (pfile, DL_WARNING, \"#pragma once is obsolete\");\n+  if (CPP_OPTION (pfile, warn_deprecated))\n+    cpp_error (pfile, DL_WARNING, \"#pragma once is obsolete\");\n \n   if (pfile->buffer->prev == NULL)\n     cpp_error (pfile, DL_WARNING, \"#pragma once in main file\");"}, {"sha": "d16bf121db6c2034b32267084afd832ec923e2a8", "filename": "gcc/cpplib.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fbd3e416654b42041026f9d51d1115a42dd5d34/gcc%2Fcpplib.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fbd3e416654b42041026f9d51d1115a42dd5d34/gcc%2Fcpplib.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.h?ref=9fbd3e416654b42041026f9d51d1115a42dd5d34", "patch": "@@ -278,6 +278,9 @@ struct cpp_options\n   /* Nonzero means don't print warning messages.  */\n   unsigned char inhibit_warnings;\n \n+  /* Nonzero means complain about deprecated features.  */\n+  unsigned char warn_deprecated;\n+\n   /* Nonzero means don't suppress warnings from system headers.  */\n   unsigned char warn_system_headers;\n "}]}