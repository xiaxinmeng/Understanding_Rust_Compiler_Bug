{"sha": "1e386bb8227491625e10fc31160c88c3ae08428c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWUzODZiYjgyMjc0OTE2MjVlMTBmYzMxMTYwYzg4YzNhZTA4NDI4Yw==", "commit": {"author": {"name": "Bill Schmidt", "email": "wschmidt@linux.vnet.ibm.com", "date": "2014-04-02T22:07:30Z"}, "committer": {"name": "William Schmidt", "email": "wschmidt@gcc.gnu.org", "date": "2014-04-02T22:07:30Z"}, "message": "re PR tree-optimization/60733 (ICE due to SLSR on valid code at -O3 on x86_64-linux-gnu)\n\n[gcc]\n\n2014-04-02  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n\n\tPR tree-optimization/60733\n\t* gimple-ssa-strength-reduction.c (ncd_with_phi): Change required\n\tinsertion point for PHI candidates to be the end of the feeding\n\tblock for the PHI argument.\n\n[gcc/testsuite]\n\n2014-04-02  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n\n\tPR tree-optimization/60733\n\t* gcc.dg/torture/pr60733.c:  New test.\n\nFrom-SVN: r209040", "tree": {"sha": "0ab3d6f4ca0a169616ae2196f21d9ffc7687fd49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ab3d6f4ca0a169616ae2196f21d9ffc7687fd49"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e386bb8227491625e10fc31160c88c3ae08428c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e386bb8227491625e10fc31160c88c3ae08428c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e386bb8227491625e10fc31160c88c3ae08428c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e386bb8227491625e10fc31160c88c3ae08428c/comments", "author": {"login": "wschmidt-ibm", "id": 5520937, "node_id": "MDQ6VXNlcjU1MjA5Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/5520937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wschmidt-ibm", "html_url": "https://github.com/wschmidt-ibm", "followers_url": "https://api.github.com/users/wschmidt-ibm/followers", "following_url": "https://api.github.com/users/wschmidt-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/wschmidt-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/wschmidt-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wschmidt-ibm/subscriptions", "organizations_url": "https://api.github.com/users/wschmidt-ibm/orgs", "repos_url": "https://api.github.com/users/wschmidt-ibm/repos", "events_url": "https://api.github.com/users/wschmidt-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/wschmidt-ibm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f4581282e57ef0f609b21be81e641911965c3bd8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4581282e57ef0f609b21be81e641911965c3bd8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4581282e57ef0f609b21be81e641911965c3bd8"}], "stats": {"total": 52, "additions": 50, "deletions": 2}, "files": [{"sha": "6a473c85d44dfc18d8a9133ecb70b20c2726cc1a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e386bb8227491625e10fc31160c88c3ae08428c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e386bb8227491625e10fc31160c88c3ae08428c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1e386bb8227491625e10fc31160c88c3ae08428c", "patch": "@@ -1,3 +1,10 @@\n+2014-04-02  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+\n+\tPR tree-optimization/60733\n+\t* gimple-ssa-strength-reduction.c (ncd_with_phi): Change required\n+\tinsertion point for PHI candidates to be the end of the feeding\n+\tblock for the PHI argument.\n+\n 2014-04-02  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR rtl-optimization/60650"}, {"sha": "9ad1b4f066e37de056c34098d06a13919de98d25", "filename": "gcc/gimple-ssa-strength-reduction.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e386bb8227491625e10fc31160c88c3ae08428c/gcc%2Fgimple-ssa-strength-reduction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e386bb8227491625e10fc31160c88c3ae08428c/gcc%2Fgimple-ssa-strength-reduction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-ssa-strength-reduction.c?ref=1e386bb8227491625e10fc31160c88c3ae08428c", "patch": "@@ -3001,10 +3001,10 @@ ncd_with_phi (slsr_cand_t c, double_int incr, gimple phi,\n \t    {\n \t      slsr_cand_t arg_cand = base_cand_from_table (arg);\n \t      double_int diff = arg_cand->index - basis->index;\n+\t      basic_block pred = gimple_phi_arg_edge (phi, i)->src;\n \n \t      if ((incr == diff) || (!address_arithmetic_p && incr == -diff))\n-\t\tncd = ncd_for_two_cands (ncd, gimple_bb (arg_cand->cand_stmt),\n-\t\t\t\t\t *where, arg_cand, where);\n+\t\tncd = ncd_for_two_cands (ncd, pred, *where, NULL, where);\n \t    }\n \t}\n     }"}, {"sha": "cc26f21a265d4249776c85aaf2b664ed01bef2f2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e386bb8227491625e10fc31160c88c3ae08428c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e386bb8227491625e10fc31160c88c3ae08428c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1e386bb8227491625e10fc31160c88c3ae08428c", "patch": "@@ -1,3 +1,8 @@\n+2014-04-02  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+\n+\tPR tree-optimization/60733\n+\t* gcc.dg/torture/pr60733.c:  New test.\n+\n 2014-04-02  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR rtl-optimization/60650"}, {"sha": "49cc59ea33ac7eef016493eb922a9d00d068fe4d", "filename": "gcc/testsuite/gcc.dg/torture/pr60733.c", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e386bb8227491625e10fc31160c88c3ae08428c/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr60733.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e386bb8227491625e10fc31160c88c3ae08428c/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr60733.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr60733.c?ref=1e386bb8227491625e10fc31160c88c3ae08428c", "patch": "@@ -0,0 +1,36 @@\n+/* { dg-do run } */\n+\n+int a, d, e, f, g, h, i, j, k;\n+unsigned short b;\n+\n+short\n+fn1 (int p1, int p2)\n+{\n+  return p1 * p2;\n+}\n+\n+int\n+main ()\n+{\n+  for (; a; a--)\n+    {\n+      int l = 0;\n+      if (f >= 0)\n+\t{\n+\t  for (; h;)\n+\t    e = 0;\n+\t  for (; l != -6; l--)\n+\t    {\n+\t      j = fn1 (b--, d);\n+\t      for (g = 0; g; g = 1)\n+\t\t;\n+\t      k = e ? 2 : 0;\n+\t    }\n+\t  i = 0;\n+\t  for (;;)\n+\t    ;\n+\t}\n+    }\n+  d = 0;\n+  return 0;\n+}"}]}