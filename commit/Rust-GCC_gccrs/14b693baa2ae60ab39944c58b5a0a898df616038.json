{"sha": "14b693baa2ae60ab39944c58b5a0a898df616038", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTRiNjkzYmFhMmFlNjBhYjM5OTQ0YzU4YjVhMGE4OThkZjYxNjAzOA==", "commit": {"author": {"name": "Harald Anlauf", "email": "anlauf@gmx.de", "date": "2019-02-14T20:24:54Z"}, "committer": {"name": "Harald Anlauf", "email": "anlauf@gcc.gnu.org", "date": "2019-02-14T20:24:54Z"}, "message": "re PR fortran/88248 ([F18] Bogus warning about obsolescent feature: Labeled DO statement)\n\n2019-02-14  Harald Anlauf  <anlauf@gmx.de>\n\n\tPR fortran/88248\n\t* symbol.c: Move check for labeled DO statement from\n\tgfc_define_st_label to gfc_reference_st_label.\n\n\tPR fortran/88248\n\t* gfortran.dg/pr88248.f90: New test.\n\t* gfortran.dg/f2018_obs.f90: Updated test.\n\nFrom-SVN: r268895", "tree": {"sha": "d9516b577a7fc71d25338416126e2651f27cab37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d9516b577a7fc71d25338416126e2651f27cab37"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/14b693baa2ae60ab39944c58b5a0a898df616038", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14b693baa2ae60ab39944c58b5a0a898df616038", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14b693baa2ae60ab39944c58b5a0a898df616038", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14b693baa2ae60ab39944c58b5a0a898df616038/comments", "author": {"login": "harald-anlauf", "id": 90786862, "node_id": "MDQ6VXNlcjkwNzg2ODYy", "avatar_url": "https://avatars.githubusercontent.com/u/90786862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harald-anlauf", "html_url": "https://github.com/harald-anlauf", "followers_url": "https://api.github.com/users/harald-anlauf/followers", "following_url": "https://api.github.com/users/harald-anlauf/following{/other_user}", "gists_url": "https://api.github.com/users/harald-anlauf/gists{/gist_id}", "starred_url": "https://api.github.com/users/harald-anlauf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harald-anlauf/subscriptions", "organizations_url": "https://api.github.com/users/harald-anlauf/orgs", "repos_url": "https://api.github.com/users/harald-anlauf/repos", "events_url": "https://api.github.com/users/harald-anlauf/events{/privacy}", "received_events_url": "https://api.github.com/users/harald-anlauf/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "26a8c34ec94a479266f641699dbc4a8b36bdfd30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26a8c34ec94a479266f641699dbc4a8b36bdfd30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26a8c34ec94a479266f641699dbc4a8b36bdfd30"}], "stats": {"total": 53, "additions": 47, "deletions": 6}, "files": [{"sha": "bcf885e729ddec7ed9831fe4978b2ee607dcba49", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14b693baa2ae60ab39944c58b5a0a898df616038/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14b693baa2ae60ab39944c58b5a0a898df616038/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=14b693baa2ae60ab39944c58b5a0a898df616038", "patch": "@@ -1,3 +1,9 @@\n+2019-02-14  Harald Anlauf  <anlauf@gmx.de>\n+\n+\tPR fortran/88248\n+\t* symbol.c: Move check for labeled DO statement from\n+\tgfc_define_st_label to gfc_reference_st_label.\n+\n 2019-02-14  Cesar Philippidis  <cesar@codesourcery.com>\n \n \tPR fortran/72715"}, {"sha": "c8a1f842d353f877e0697162d4f7224c93344b0f", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14b693baa2ae60ab39944c58b5a0a898df616038/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14b693baa2ae60ab39944c58b5a0a898df616038/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=14b693baa2ae60ab39944c58b5a0a898df616038", "patch": "@@ -2743,10 +2743,6 @@ gfc_define_st_label (gfc_st_label *lp, gfc_sl_type type, locus *label_locus)\n \t\t\t\t  \"DO termination statement which is not END DO\"\n \t\t\t\t  \" or CONTINUE with label %d at %C\", labelno))\n \t    return;\n-\t  if (type == ST_LABEL_DO_TARGET\n-\t      && !gfc_notify_std (GFC_STD_F2018_OBS, \"Labeled DO statement \"\n-\t\t\t\t  \"at %L\", label_locus))\n-\t    return;\n \t  break;\n \n \tdefault:\n@@ -2804,6 +2800,11 @@ gfc_reference_st_label (gfc_st_label *lp, gfc_sl_type type)\n \t\t\t  \"Shared DO termination label %d at %C\", labelno))\n     return false;\n \n+  if (type == ST_LABEL_DO_TARGET\n+      && !gfc_notify_std (GFC_STD_F2018_OBS, \"Labeled DO statement \"\n+\t\t\t  \"at %L\", &gfc_current_locus))\n+    return false;\n+\n   if (lp->referenced != ST_LABEL_DO_TARGET)\n     lp->referenced = type;\n   rc = true;"}, {"sha": "61f2a4732c159f33eaf33e434892c3259e63e503", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14b693baa2ae60ab39944c58b5a0a898df616038/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14b693baa2ae60ab39944c58b5a0a898df616038/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=14b693baa2ae60ab39944c58b5a0a898df616038", "patch": "@@ -1,3 +1,9 @@\n+2019-02-14  Harald Anlauf  <anlauf@gmx.de>\n+\n+\tPR fortran/88248\n+\t* gfortran.dg/pr88248.f90: New test.\n+\t* gfortran.dg/f2018_obs.f90: Updated test.\n+\n 2019-02-14  Tamar Christina  <tamar.christina@arm.com>\n \n \t* gcc.target/arm/pr88850.c: change options to additional option."}, {"sha": "d99934b873940f799505fb874061e24c683505a6", "filename": "gcc/testsuite/gfortran.dg/f2018_obs.f90", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14b693baa2ae60ab39944c58b5a0a898df616038/gcc%2Ftestsuite%2Fgfortran.dg%2Ff2018_obs.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14b693baa2ae60ab39944c58b5a0a898df616038/gcc%2Ftestsuite%2Fgfortran.dg%2Ff2018_obs.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ff2018_obs.f90?ref=14b693baa2ae60ab39944c58b5a0a898df616038", "patch": "@@ -19,8 +19,8 @@ program f2018_obs\n \n   equivalence (a(10),b(1))           ! { dg-warning \"obsolescent feature\" }\n \n-  do 99 i=1,10\n-99 continue                          ! { dg-warning \"obsolescent feature\" }\n+  do 99 i=1,10                       ! { dg-warning \"obsolescent feature\" }\n+99 continue\n \n   j = (/ 0, 1, 2, 3, 4, 0, 6, 7  /)\n   forall (i=1:8, j(i) /= 0)          ! { dg-warning \"obsolescent feature\" }"}, {"sha": "2a49305e70a3ab562c448e0ed7d6306452720944", "filename": "gcc/testsuite/gfortran.dg/pr88248.f90", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14b693baa2ae60ab39944c58b5a0a898df616038/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr88248.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14b693baa2ae60ab39944c58b5a0a898df616038/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr88248.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr88248.f90?ref=14b693baa2ae60ab39944c58b5a0a898df616038", "patch": "@@ -0,0 +1,28 @@\n+! { dg-do compile }\n+! { dg-options \"-std=f2018\" }\n+!\n+! PR88248 - [F18] Bogus warning about obsolescent feature: Labeled DO statement\n+!\n+program pr88248\n+  character*80 text     ! { dg-warning \"Old-style character length\" }\n+  f(x) = x              ! { dg-warning \"Statement function\" }\n+  call foo (*99)        ! { dg-warning \"Alternate-return argument\" }\n+  data y / 1.0 /        ! { dg-warning \"DATA statement\" }\n+  goto (1,99) i+1       ! { dg-warning \"Computed GOTO\" }\n+  ! No warning should be printed below\n+  goto 1\n+1 continue\n+  open (10, err=99)\n+  close (10, err=99)\n+  backspace (10, err=99)\n+  endfile (10, err=99)\n+  rewind (10, err=99)\n+  flush (10, err=99)\n+  inquire (10, err=99)\n+  read (*, end=99) text\n+99 continue\n+end\n+\n+subroutine foobar ()\n+entry bar ()            ! { dg-warning \"ENTRY statement\" }\n+end subroutine foobar"}]}