{"sha": "0d3c880062c47315ef250bbf80291004a0eb0cb8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGQzYzg4MDA2MmM0NzMxNWVmMjUwYmJmODAyOTEwMDRhMGViMGNiOA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2003-04-14T21:36:35Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2003-04-14T21:36:35Z"}, "message": "stor-layout.c (layout_type, [...]): Add missing code to handle \"superflat arrays\" in Ada.\n\n\t* stor-layout.c (layout_type, case ARRAY_TYPE): Add missing code to\n\thandle \"superflat arrays\" in Ada.\n\nFrom-SVN: r65595", "tree": {"sha": "d86cbe78e722e036e7f5c050e4a0db9fb9ee428a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d86cbe78e722e036e7f5c050e4a0db9fb9ee428a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0d3c880062c47315ef250bbf80291004a0eb0cb8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d3c880062c47315ef250bbf80291004a0eb0cb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d3c880062c47315ef250bbf80291004a0eb0cb8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d3c880062c47315ef250bbf80291004a0eb0cb8/comments", "author": null, "committer": null, "parents": [{"sha": "2443af37208590b754984ffd04b8ac19db5eff9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2443af37208590b754984ffd04b8ac19db5eff9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2443af37208590b754984ffd04b8ac19db5eff9f"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "daec31200dfd89ada0ed5db748441bf4cf1d438f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d3c880062c47315ef250bbf80291004a0eb0cb8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d3c880062c47315ef250bbf80291004a0eb0cb8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0d3c880062c47315ef250bbf80291004a0eb0cb8", "patch": "@@ -1,5 +1,8 @@\n 2003-04-14  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n+\t* stor-layout.c (layout_type, case ARRAY_TYPE): Add missing code to\n+\thandle \"superflat arrays\" in Ada.\n+\n \t* integrate.c (expand_inline_function): Don't inline if would\n \tlose /u on a BLKmode TARGET.\n "}, {"sha": "7ebdda845d181cbb2dac0e3967604d4cc889c733", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d3c880062c47315ef250bbf80291004a0eb0cb8/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d3c880062c47315ef250bbf80291004a0eb0cb8/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=0d3c880062c47315ef250bbf80291004a0eb0cb8", "patch": "@@ -1740,6 +1740,15 @@ layout_type (type)\n \t\t  element_size = integer_one_node;\n \t      }\n \n+\t    /* If neither bound is a constant and sizetype is signed, make\n+\t       sure the size is never negative.  We should really do this\n+\t       if *either* bound is non-constant, but this is the best\n+\t       compromise between C and Ada.  */\n+\t    if (! TREE_UNSIGNED (sizetype)\n+\t\t&& TREE_CODE (TYPE_MIN_VALUE (index)) != INTEGER_CST\n+\t\t&& TREE_CODE (TYPE_MAX_VALUE (index)) != INTEGER_CST)\n+\t      length = size_binop (MAX_EXPR, length, size_zero_node);\n+\n \t    TYPE_SIZE (type) = size_binop (MULT_EXPR, element_size,\n \t\t\t\t\t   convert (bitsizetype, length));\n "}]}