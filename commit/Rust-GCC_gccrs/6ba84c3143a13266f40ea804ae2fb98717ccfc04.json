{"sha": "6ba84c3143a13266f40ea804ae2fb98717ccfc04", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmJhODRjMzE0M2ExMzI2NmY0MGVhODA0YWUyZmI5ODcxN2NjZmMwNA==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2012-05-04T18:53:17Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2012-05-04T18:53:17Z"}, "message": "re PR fortran/53111 (Derived types cannot be USE-associated again with -std=f95)\n\n2012-05-04  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/53111\n        * resolve.c (resolve_fl_derived): Fix -std=f95\n        diagnostic for generic vs. DT names.\n\n2012-05-04  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/53111\n        * gfortran.dg/constructor_7.f90: New.\n        * gfortran.dg/constructor_8.f90: New.\n\nFrom-SVN: r187174", "tree": {"sha": "a8fd75206e80a78b28a8d7f21a16cbdaa1a6bb2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a8fd75206e80a78b28a8d7f21a16cbdaa1a6bb2e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ba84c3143a13266f40ea804ae2fb98717ccfc04", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ba84c3143a13266f40ea804ae2fb98717ccfc04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ba84c3143a13266f40ea804ae2fb98717ccfc04", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ba84c3143a13266f40ea804ae2fb98717ccfc04/comments", "author": null, "committer": null, "parents": [{"sha": "cef31f9c56a00141385da8caa2efb53886747e67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cef31f9c56a00141385da8caa2efb53886747e67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cef31f9c56a00141385da8caa2efb53886747e67"}], "stats": {"total": 98, "additions": 91, "deletions": 7}, "files": [{"sha": "0965b00bc10e9f98a4030ee2d44c4db84ab4a487", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ba84c3143a13266f40ea804ae2fb98717ccfc04/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ba84c3143a13266f40ea804ae2fb98717ccfc04/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=6ba84c3143a13266f40ea804ae2fb98717ccfc04", "patch": "@@ -1,3 +1,9 @@\n+2012-05-04  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/53111\n+\t* resolve.c (resolve_fl_derived): Fix -std=f95\n+\tdiagnostic for generic vs. DT names.\n+\n 2012-05-03  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/52864"}, {"sha": "411ebb5a1c249d396b2738e5c6707f067f4db2ab", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ba84c3143a13266f40ea804ae2fb98717ccfc04/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ba84c3143a13266f40ea804ae2fb98717ccfc04/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=6ba84c3143a13266f40ea804ae2fb98717ccfc04", "patch": "@@ -12015,6 +12015,8 @@ resolve_fl_derived (gfc_symbol *sym)\n   if (!sym->attr.is_class)\n     gfc_find_symbol (sym->name, sym->ns, 0, &gen_dt);\n   if (gen_dt && gen_dt->generic && gen_dt->generic->next\n+      && (!gen_dt->generic->sym->attr.use_assoc\n+\t  || gen_dt->generic->sym->module != gen_dt->generic->next->sym->module)\n       && gfc_notify_std (GFC_STD_F2003, \"Fortran 2003: Generic name '%s' of \"\n \t\t\t \"function '%s' at %L being the same name as derived \"\n \t\t\t \"type at %L\", sym->name,"}, {"sha": "c3e7db777f0110474b26d0d09065345b3651a92e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 13, "deletions": 7, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ba84c3143a13266f40ea804ae2fb98717ccfc04/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ba84c3143a13266f40ea804ae2fb98717ccfc04/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6ba84c3143a13266f40ea804ae2fb98717ccfc04", "patch": "@@ -1,3 +1,9 @@\n+2012-05-04  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/53111\n+\t* gfortran.dg/constructor_7.f90: New.\n+\t* gfortran.dg/constructor_8.f90: New.\n+\n 2012-05-04  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/53166\n@@ -92,10 +98,10 @@\n \n 2012-05-03  Greta Yorsh  <Greta.Yorsh@arm.com>\n \n-       * gcc.dg/fixed-point/composite-type.c (dg-options): Add\n-       option -ftrack-macro-expansion=0.\n-       * gcc.dg/fixed-point/operator-bitwise.c (dg-options): Add\n-       option -ftrack-macro-expansion=0.\n+\t* gcc.dg/fixed-point/composite-type.c (dg-options): Add\n+\toption -ftrack-macro-expansion=0.\n+\t* gcc.dg/fixed-point/operator-bitwise.c (dg-options): Add\n+\toption -ftrack-macro-expansion=0.\n \n 2012-05-03  Greta Yorsh  <Greta.Yorsh@arm.com>\n \n@@ -260,11 +266,11 @@\n \n \tFix expansion point loc for macro-like tokens\n \t* gcc.dg/debug/dwarf2/pr41445-5.c: Adjust.\n-    \t* gcc.dg/debug/dwarf2/pr41445-6.c: Likewise.\n+\t* gcc.dg/debug/dwarf2/pr41445-6.c: Likewise.\n \n \tFix token pasting with -ftrack-macro-expansion\n \t* gcc.dg/cpp/paste17.c: New test case for\n-    \t-ftrack-macro-expansion=2 mode only.\n+\t-ftrack-macro-expansion=2 mode only.\n \t* gcc.dg/cpp/macro-exp-tracking-5.c: Likewise.\n \n 2012-04-30  Eric Botcazou  <ebotcazou@adacore.com>\n@@ -274,7 +280,7 @@\n 2012-04-29  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR 53149\n-        * gcc.dg/20011021-1.c: Adjust testcase.\n+\t* gcc.dg/20011021-1.c: Adjust testcase.\n \n 2012-04-29  Thomas Koenig  <tkoenig@gcc.gnu.org>\n "}, {"sha": "f3d6605a34c9949ae19af7a964854c4012680f68", "filename": "gcc/testsuite/gfortran.dg/constructor_7.f90", "status": "added", "additions": 48, "deletions": 0, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ba84c3143a13266f40ea804ae2fb98717ccfc04/gcc%2Ftestsuite%2Fgfortran.dg%2Fconstructor_7.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ba84c3143a13266f40ea804ae2fb98717ccfc04/gcc%2Ftestsuite%2Fgfortran.dg%2Fconstructor_7.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fconstructor_7.f90?ref=6ba84c3143a13266f40ea804ae2fb98717ccfc04", "patch": "@@ -0,0 +1,48 @@\n+! { dg-do compile }\n+! { dg-options \"-std=f95\" }\n+!\n+! PR fortran/53111\n+!\n+\n+! ------------ INVALID ONE ------------------------\n+\n+module m\n+type t\n+  integer :: i\n+end type t\n+end\n+\n+module m2\n+ interface t\n+   module procedure sub\n+ end interface t\n+contains\n+ integer function sub()\n+   sub = 4\n+ end function sub\n+end module m2\n+\n+! Note: The following is formally valid as long as \"t\" is not used.\n+! For simplicity, -std=f95 will give an error.\n+! It is unlikely that a real-world program is rejected with -std=f95\n+! because of that.\n+\n+use m   ! { dg-error \"Fortran 2003: Generic name 't' of function 'sub' at .1. being the same name as derived type at\" }\n+use m2  ! { dg-error \"Fortran 2003: Generic name 't' of function 'sub' at .1. being the same name as derived type at\" }\n+! i = sub()  ! << Truly invalid in F95, valid in F2003\n+end\n+\n+! ------------ INVALID TWO ------------------------\n+\n+module m3\n+type t2  ! { dg-error \"Fortran 2003: Generic name 't2' of function 'sub2' at .1. being the same name as derived type at\" }\n+  integer :: i\n+end type t2\n+ interface t2\n+   module procedure sub2\n+ end interface t2\n+contains\n+ integer function sub2()  ! { dg-error \"Fortran 2003: Generic name 't2' of function 'sub2' at .1. being the same name as derived type at\" }\n+   sub2 = 4\n+ end function sub2\n+end module m3"}, {"sha": "ff0dff7b8685adb8f25ecc85443f63048b784be3", "filename": "gcc/testsuite/gfortran.dg/constructor_8.f90", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ba84c3143a13266f40ea804ae2fb98717ccfc04/gcc%2Ftestsuite%2Fgfortran.dg%2Fconstructor_8.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ba84c3143a13266f40ea804ae2fb98717ccfc04/gcc%2Ftestsuite%2Fgfortran.dg%2Fconstructor_8.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fconstructor_8.f90?ref=6ba84c3143a13266f40ea804ae2fb98717ccfc04", "patch": "@@ -0,0 +1,22 @@\n+! { dg-do compile }\n+! { dg-options \"-std=f95\" }\n+!\n+! PR fortran/53111\n+!\n+! Contributed by Jacob Middag, reduced by Janus Weil.\n+!\n+\n+module a\n+  type :: my\n+    real :: x\n+  end type\n+end module\n+\n+module b\n+  use a\n+end module\n+\n+program test\n+  use a\n+  use b\n+end program"}]}