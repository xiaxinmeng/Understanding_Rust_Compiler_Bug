{"sha": "7d78d5a600e1475d2aed1ca81fe6d0687fae0256", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Q3OGQ1YTYwMGUxNDc1ZDJhZWQxY2E4MWZlNmQwNjg3ZmFlMDI1Ng==", "commit": {"author": {"name": "Dave Korn", "email": "dave.korn.cygwin@gmail.com", "date": "2012-02-24T16:17:01Z"}, "committer": {"name": "Dave Korn", "email": "davek@gcc.gnu.org", "date": "2012-02-24T16:17:01Z"}, "message": "Makefile.in (bindir): Import from autoconf and pass down to submake.\n\nlibada/ChangeLog:\n\n\t* Makefile.in (bindir): Import from autoconf and pass down to submake.\n\ngcc/ada/ChangeLog:\n\n\t* gcc-interface/Makefile.in (WIN_SO_PREFIX [windows targets]): New\n\tWindows-specific make variable.\n\t(WIN_SO_INSTALL_DIR [windows targets]): Likewise.\n\t(install-gnatlib): Respect the above during installation when set,\n\tand also install any windows import library that has been built.\n\t(gnatlib-shared-win32): Use WIN_SO_PREFIX to name output DLL and also\n\tbuild a corresponding import library.\n\nFrom-SVN: r184558", "tree": {"sha": "7e3f906c08edd762b8f0f0e75d4f9b6f06343f82", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7e3f906c08edd762b8f0f0e75d4f9b6f06343f82"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d78d5a600e1475d2aed1ca81fe6d0687fae0256", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d78d5a600e1475d2aed1ca81fe6d0687fae0256", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d78d5a600e1475d2aed1ca81fe6d0687fae0256", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d78d5a600e1475d2aed1ca81fe6d0687fae0256/comments", "author": {"login": "davek-cygwin", "id": 530057, "node_id": "MDQ6VXNlcjUzMDA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/530057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davek-cygwin", "html_url": "https://github.com/davek-cygwin", "followers_url": "https://api.github.com/users/davek-cygwin/followers", "following_url": "https://api.github.com/users/davek-cygwin/following{/other_user}", "gists_url": "https://api.github.com/users/davek-cygwin/gists{/gist_id}", "starred_url": "https://api.github.com/users/davek-cygwin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davek-cygwin/subscriptions", "organizations_url": "https://api.github.com/users/davek-cygwin/orgs", "repos_url": "https://api.github.com/users/davek-cygwin/repos", "events_url": "https://api.github.com/users/davek-cygwin/events{/privacy}", "received_events_url": "https://api.github.com/users/davek-cygwin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "89743f6c30cf306cb21e24a2372fa1bb6eb36230", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89743f6c30cf306cb21e24a2372fa1bb6eb36230", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89743f6c30cf306cb21e24a2372fa1bb6eb36230"}], "stats": {"total": 46, "additions": 37, "deletions": 9}, "files": [{"sha": "34f0b3e475b5fbba808fc1ca0bb9ebd4784d5dc0", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d78d5a600e1475d2aed1ca81fe6d0687fae0256/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d78d5a600e1475d2aed1ca81fe6d0687fae0256/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=7d78d5a600e1475d2aed1ca81fe6d0687fae0256", "patch": "@@ -1,3 +1,13 @@\n+2012-02-24  Dave Korn  <dave.korn.cygwin@gmail.com>\n+\n+\t* gcc-interface/Makefile.in (WIN_SO_PREFIX [windows targets]): New\n+\tWindows-specific make variable.\n+\t(WIN_SO_INSTALL_DIR [windows targets]): Likewise.\n+\t(install-gnatlib): Respect the above during installation when set,\n+\tand also install any windows import library that has been built.\n+\t(gnatlib-shared-win32): Use WIN_SO_PREFIX to name output DLL and also\n+\tbuild a corresponding import library.\n+\n 2012-02-22  Robert Dewar  <dewar@adacore.com>\n \n \t* exp_util.adb, make.adb, sem_dim.adb, sem_ch4.adb, exp_disp.adb: Minor"}, {"sha": "5fa6ffa07021fd7e2255ef920bfa26abaeaf27d4", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 21, "deletions": 9, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d78d5a600e1475d2aed1ca81fe6d0687fae0256/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d78d5a600e1475d2aed1ca81fe6d0687fae0256/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=7d78d5a600e1475d2aed1ca81fe6d0687fae0256", "patch": "@@ -1589,16 +1589,19 @@ ifeq ($(strip $(filter-out cygwin% mingw32% pe,$(osys))),)\n   # the Cygwin port has always been a CygMing frankenhybrid and it is\n   # a long-term project to disentangle them.\n   ifeq ($(strip $(filter-out cygwin%,$(osys))),)\n+    WIN_SO_PREFIX=cyg\n     LIBGNAT_TARGET_PAIRS = \\\n     s-memory.adb<s-memory.adb \\\n     g-socthi.ads<g-socthi.ads \\\n     g-socthi.adb<g-socthi.adb\n   else\n+    WIN_SO_PREFIX=lib\n     LIBGNAT_TARGET_PAIRS = \\\n     s-memory.adb<s-memory-mingw.adb \\\n     g-socthi.ads<g-socthi-mingw.ads \\\n     g-socthi.adb<g-socthi-mingw.adb\n   endif\n+  WIN_SO_INSTALL_DIR = $(bindir)\n   LIBGNAT_TARGET_PAIRS += \\\n   a-dirval.adb<a-dirval-mingw.adb \\\n   a-excpol.adb<a-excpol-abort.adb \\\n@@ -2449,11 +2452,14 @@ install-gnatlib: ../stamp-gnatlib-$(RTSDIR)\n #     for shared libraries on some targets, e.g. on HP-UX where the x\n #     permission is required.\n #     Also install the .dSYM directories if they exist (these directories\n-#     contain the debug information for the shared libraries on darwin)\n+#     contain the debug information for the shared libraries on darwin),\n+#     and the windows import libraries if they exist.\n+\tlibpfx=$(if $(WIN_SO_PREFIX),$(WIN_SO_PREFIX),lib); \\\n+\tlibrtlobjdir=$(if $(WIN_SO_INSTALL_DIR),$(WIN_SO_INSTALL_DIR),$(ADA_RTL_OBJ_DIR)); \\\n \tfor file in gnat gnarl; do \\\n-\t   if [ -f $(RTSDIR)/lib$${file}$(hyphen)$(LIBRARY_VERSION)$(soext) ]; then \\\n-\t      $(INSTALL) $(RTSDIR)/lib$${file}$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n-\t\t\t $(DESTDIR)$(ADA_RTL_OBJ_DIR); \\\n+\t   if [ -f $(RTSDIR)/$${libpfx}$${file}$(hyphen)$(LIBRARY_VERSION)$(soext) ]; then \\\n+\t      $(INSTALL) $(RTSDIR)/$${libpfx}$${file}$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t\t\t $(DESTDIR)$${librtlobjdir}; \\\n \t   fi; \\\n \t   if [ -f $(RTSDIR)/lib$${file}$(soext) ]; then \\\n \t      $(LN_S) lib$${file}$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n@@ -2463,6 +2469,10 @@ install-gnatlib: ../stamp-gnatlib-$(RTSDIR)\n \t      $(CP) -r $(RTSDIR)/lib$${file}$(hyphen)$(LIBRARY_VERSION)$(soext).dSYM \\\n \t        $(DESTDIR)$(ADA_RTL_OBJ_DIR); \\\n \t   fi; \\\n+\t   if [ -f $(RTSDIR)/lib$${file}$(hyphen)$(LIBRARY_VERSION)$(soext)$(arext) ]; then \\\n+\t      $(INSTALL_DATA) $(RTSDIR)/lib$${file}$(hyphen)$(LIBRARY_VERSION)$(soext)$(arext) \\\n+\t\t\t $(DESTDIR)$(ADA_RTL_OBJ_DIR); \\\n+\t   fi; \\\n \tdone\n # This copy must be done preserving the date on the original file.\n \tfor file in $(RTSDIR)/*.ad?; do \\\n@@ -2674,16 +2684,18 @@ gnatlib-shared-win32:\n \tcd $(RTSDIR); `echo \"$(GCC_FOR_TARGET)\" \\\n                 | sed -e 's,\\./xgcc,../../xgcc,' -e 's,-B\\./,-B../../,'` -shared -shared-libgcc \\\n \t\t$(PICFLAG_FOR_TARGET) \\\n-\t\t-o libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t\t-o $(WIN_SO_PREFIX)gnat$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t\t-Wl,-out-implib,libgnat$(hyphen)$(LIBRARY_VERSION)$(soext)$(arext) \\\n \t\t$(GNATRTL_NONTASKING_OBJS) $(LIBGNAT_OBJS) \\\n-\t\t$(SO_OPTS)libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) $(MISCLIB)\n+\t\t$(SO_OPTS)$(WIN_SO_PREFIX)gnat$(hyphen)$(LIBRARY_VERSION)$(soext) $(MISCLIB)\n \tcd $(RTSDIR); `echo \"$(GCC_FOR_TARGET)\" \\\n                 | sed -e 's,\\./xgcc,../../xgcc,' -e 's,-B\\./,-B../../,'` -shared -shared-libgcc \\\n \t\t$(PICFLAG_FOR_TARGET) \\\n-\t\t-o libgnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t\t-o $(WIN_SO_PREFIX)gnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t\t-Wl,-out-implib,libgnarl$(hyphen)$(LIBRARY_VERSION)$(soext)$(arext) \\\n \t\t$(GNATRTL_TASKING_OBJS) \\\n-\t\t$(SO_OPTS)libgnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n-\t\t$(THREADSLIB) -Wl,libgnat$(hyphen)$(LIBRARY_VERSION)$(soext)\n+\t\t$(SO_OPTS)$(WIN_SO_PREFIX)gnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \\\n+\t\t$(THREADSLIB) -L. -lgnat$(hyphen)$(LIBRARY_VERSION)\n \n gnatlib-shared-darwin:\n \t$(MAKE) $(FLAGS_TO_PASS) \\"}, {"sha": "256ccccf016b76d9ace3620bc3134e50ba659132", "filename": "libada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d78d5a600e1475d2aed1ca81fe6d0687fae0256/libada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d78d5a600e1475d2aed1ca81fe6d0687fae0256/libada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FChangeLog?ref=7d78d5a600e1475d2aed1ca81fe6d0687fae0256", "patch": "@@ -1,3 +1,7 @@\n+2012-02-24  Dave Korn  <dave.korn.cygwin@gmail.com>\n+\n+\t* Makefile.in (bindir): Import from autoconf and pass down to submake.\n+\n 2012-01-22  Douglas B Rupp  <rupp@gnat.com>\n \n \t* configure: Regenerate."}, {"sha": "36cf5ad5e5ab10057fd7499129a12b4308f90f77", "filename": "libada/Makefile.in", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d78d5a600e1475d2aed1ca81fe6d0687fae0256/libada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d78d5a600e1475d2aed1ca81fe6d0687fae0256/libada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FMakefile.in?ref=7d78d5a600e1475d2aed1ca81fe6d0687fae0256", "patch": "@@ -33,6 +33,7 @@ MULTICLEAN = true\n SHELL = @SHELL@\n srcdir = @srcdir@\n libdir = @libdir@\n+bindir = @bindir@\n build = @build@\n target = @target@\n prefix = @prefix@\n@@ -83,6 +84,7 @@ LIBADA_FLAGS_TO_PASS = \\\n         \"TRACE=$(TRACE)\" \\\n         \"MULTISUBDIR=$(MULTISUBDIR)\" \\\n         \"libsubdir=$(libsubdir)\" \\\n+        \"bindir=$(bindir)\" \\\n         \"objext=$(objext)\" \\\n         \"prefix=$(prefix)\" \\\n         \"exeext=.exeext.should.not.be.used \" \\"}]}