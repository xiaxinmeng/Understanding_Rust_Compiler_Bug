{"sha": "125bf21299ea6ddad03bcace5982a998d1432c54", "node_id": "C_kwDOANBUbNoAKDEyNWJmMjEyOTllYTZkZGFkMDNiY2FjZTU5ODJhOTk4ZDE0MzJjNTQ", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2022-06-19T09:21:28Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2022-06-20T15:21:03Z"}, "message": "testsuite, Darwin: Allow for two CTOR bodies in array61 test.\n\nFor targets without alias support, we emit two essentially identical function\nbodies into the gimple (complete and base CTORs). So this test needs to allow\nfor that when the target does not support aliases.  The target support alias\ntest does not seem to be usable in the context of a single scan-tree-dump so\nthe fix here uses the target designation.\n\nNote that the array has 10 elements, so that if the test were failing (because\nwe were emitting 10 inits instead of a loop) the count would be expected to\nexceed 2, on Darwin and 1 where there's alias support.\n\nSigned-off-by: Iain Sandoe <iain@sandoe.co.uk>\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/init/array61.C: Allow for two CTOR bodies on Darwin, where\n\taliases are not currently supported.", "tree": {"sha": "0b4537eb249c9d84025f607956f63a1e1c572b76", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b4537eb249c9d84025f607956f63a1e1c572b76"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/125bf21299ea6ddad03bcace5982a998d1432c54", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/125bf21299ea6ddad03bcace5982a998d1432c54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/125bf21299ea6ddad03bcace5982a998d1432c54", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/125bf21299ea6ddad03bcace5982a998d1432c54/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2eb3adb43eadead0d8666bc9f4dd4feab4bf7875", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "c8f82b9f1555499f7b27dbdebac7e56054728b71", "filename": "gcc/testsuite/g++.dg/init/array61.C", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/125bf21299ea6ddad03bcace5982a998d1432c54/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray61.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/125bf21299ea6ddad03bcace5982a998d1432c54/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray61.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray61.C?ref=125bf21299ea6ddad03bcace5982a998d1432c54", "patch": "@@ -1,7 +1,8 @@\n // PR c++/92385\n // { dg-do compile { target c++11 } }\n // { dg-additional-options -fdump-tree-gimple }\n-// { dg-final { scan-tree-dump-times \"item::item\" 1 \"gimple\" } }\n+// { dg-final { scan-tree-dump-times \"item::item\" 1 \"gimple\" { target { ! *-*-darwin* } } } }\n+// { dg-final { scan-tree-dump-times \"item::item\" 2 \"gimple\" { target { *-*-darwin* } } } }\n \n struct item {\n   int i;"}]}