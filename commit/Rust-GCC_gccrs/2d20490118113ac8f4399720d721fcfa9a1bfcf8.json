{"sha": "2d20490118113ac8f4399720d721fcfa9a1bfcf8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQyMDQ5MDExODExM2FjOGY0Mzk5NzIwZDcyMWZjZmE5YTFiZmNmOA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-02-15T13:27:41Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-02-15T13:27:41Z"}, "message": "(zero_extendqi[hs]i2+3): Ensure operating on REG.\n\nFrom-SVN: r13637", "tree": {"sha": "66a28ba3c5f246e8c0696e9806628525225a100f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/66a28ba3c5f246e8c0696e9806628525225a100f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d20490118113ac8f4399720d721fcfa9a1bfcf8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d20490118113ac8f4399720d721fcfa9a1bfcf8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d20490118113ac8f4399720d721fcfa9a1bfcf8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d20490118113ac8f4399720d721fcfa9a1bfcf8/comments", "author": null, "committer": null, "parents": [{"sha": "4d2c432d8832636b094b20024bda7d1b1ff095aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d2c432d8832636b094b20024bda7d1b1ff095aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d2c432d8832636b094b20024bda7d1b1ff095aa"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "a45aeab6484cb58ef10e1ac88ee270c0463e9d21", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 15, "deletions": 5, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d20490118113ac8f4399720d721fcfa9a1bfcf8/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d20490118113ac8f4399720d721fcfa9a1bfcf8/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=2d20490118113ac8f4399720d721fcfa9a1bfcf8", "patch": "@@ -1,5 +1,5 @@\n ;; GCC machine description for Intel X86.\n-;; Copyright (C) 1988, 1994, 1995, 1996 Free Software Foundation, Inc.\n+;; Copyright (C) 1988, 1994, 1995, 1996, 1997 Free Software Foundation, Inc.\n ;; Mostly by William Schelter.\n \n ;; This file is part of GNU CC.\n@@ -1898,13 +1898,18 @@\n (define_split\n   [(set (match_operand:HI 0 \"register_operand\" \"\")\n \t(zero_extend:HI (match_operand:QI 1 \"register_operand\" \"\")))]\n- \"reload_completed && TARGET_ZERO_EXTEND_WITH_AND && REGNO (operands[0]) != REGNO (operands[1])\"\n+ \"reload_completed && TARGET_ZERO_EXTEND_WITH_AND\"\n  [(set (match_dup 0)\n        (match_dup 2))\n   (set (match_dup 0)\n        (and:HI (match_dup 0)\n \t       (const_int 255)))]\n- \"operands[2] = gen_rtx (REG, HImode, REGNO (operands[1]));\")\n+ \"if (GET_CODE (operands[1]) == SUBREG && SUBREG_WORD (operands[1]) == 0)\n+    operands[1] = SUBREG_REG (operands[1]);\n+  if (GET_CODE (operands[0]) != REG || GET_CODE (operands[1]) != REG\n+      || REGNO (operands[0]) == REGNO (operands[1]))\n+    FAIL;\n+  operands[2] = gen_rtx (REG, HImode, REGNO (operands[1]));\")\n \n (define_insn \"zero_extendqisi2\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=q,&q,?r\")\n@@ -1984,13 +1989,18 @@\n (define_split\n   [(set (match_operand:SI 0 \"register_operand\" \"\")\n \t(zero_extend:SI (match_operand:QI 1 \"register_operand\" \"\")))]\n- \"reload_completed && TARGET_ZERO_EXTEND_WITH_AND && REGNO (operands[0]) != REGNO (operands[1])\"\n+ \"reload_completed && TARGET_ZERO_EXTEND_WITH_AND\"\n  [(set (match_dup 0)\n        (match_dup 2))\n   (set (match_dup 0)\n        (and:SI (match_dup 0)\n \t       (const_int 255)))]\n- \"operands[2] = gen_rtx (REG, SImode, REGNO (operands[1]));\")\n+ \"if (GET_CODE (operands[1]) == SUBREG && SUBREG_WORD (operands[1]) == 0)\n+    operands[1] = SUBREG_REG (operands[1]);\n+  if (GET_CODE (operands[1]) != REG\n+      || REGNO (operands[0]) == REGNO (operands[1]))\n+    FAIL;\n+  operands[2] = gen_rtx (REG, SImode, REGNO (operands[1]));\")\n \n (define_insn \"zero_extendsidi2\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=r,?r,?m\")"}]}