{"sha": "d81ecf52ff643ec879350503f0393d361162cf64", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDgxZWNmNTJmZjY0M2VjODc5MzUwNTAzZjAzOTNkMzYxMTYyY2Y2NA==", "commit": {"author": {"name": "David Ung", "email": "davidu@mips.com", "date": "2006-11-07T14:28:08Z"}, "committer": {"name": "David Ung", "email": "davidu@gcc.gnu.org", "date": "2006-11-07T14:28:08Z"}, "message": "mips.c (mips_rtx_cost_optimize_size): New table of costs when optimizing for size.\n\n\t* config/mips/mips.c (mips_rtx_cost_optimize_size): New table of\n\tcosts when optimizing for size.\n\t(override_options): Use mips_rtx_cost_optimize_size table for cost\n\tcalculations.\n\nFrom-SVN: r118550", "tree": {"sha": "3a3b4ff53a714a1a5394ac1a1f6f30b795235e77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3a3b4ff53a714a1a5394ac1a1f6f30b795235e77"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d81ecf52ff643ec879350503f0393d361162cf64", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d81ecf52ff643ec879350503f0393d361162cf64", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d81ecf52ff643ec879350503f0393d361162cf64", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d81ecf52ff643ec879350503f0393d361162cf64/comments", "author": null, "committer": null, "parents": [{"sha": "010b2043b094449c1d89d07da6e20bbfafd0f0e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/010b2043b094449c1d89d07da6e20bbfafd0f0e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/010b2043b094449c1d89d07da6e20bbfafd0f0e7"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "ae1706c3fdc5d4daeea35f09dee8130c9311fb41", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d81ecf52ff643ec879350503f0393d361162cf64/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d81ecf52ff643ec879350503f0393d361162cf64/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d81ecf52ff643ec879350503f0393d361162cf64", "patch": "@@ -1,8 +1,15 @@\n+2006-11-07  David Ung  <davidu@mips.com>\n+\n+\t* config/mips/mips.c (mips_rtx_cost_optimize_size): New table of\n+\tcosts when optimizing for size.\n+\t(override_options): Use mips_rtx_cost_optimize_size table for cost\n+\tcalculations.\n+\n 2006-11-07  Jie Zhang  <jie.zhang@analog.com>\n \n \t* gcc.c (process_command): Treat -b as normal switch if its argument\n \thas no dash.\n-\n+\t\n 2006-11-07  David Ung  <davidu@mips.com>\n \t\n \t* config/mips/mips.h (ISA_HAS_PREFETCHX): Add ISA_MIPS32R2 to the"}, {"sha": "52e2aabe1fe5f8b421d7180a51f34fe8bf39a454", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 19, "deletions": 1, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d81ecf52ff643ec879350503f0393d361162cf64/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d81ecf52ff643ec879350503f0393d361162cf64/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=d81ecf52ff643ec879350503f0393d361162cf64", "patch": "@@ -796,6 +796,21 @@ const struct mips_cpu_info mips_cpu_info_table[] = {\n                       COSTS_N_INSNS (256), /* fp_div_sf */    \\\n                       COSTS_N_INSNS (256)  /* fp_div_df */\n \n+static struct mips_rtx_cost_data const mips_rtx_cost_optimize_size =\n+  {\n+      COSTS_N_INSNS (1),            /* fp_add */\n+      COSTS_N_INSNS (1),            /* fp_mult_sf */\n+      COSTS_N_INSNS (1),            /* fp_mult_df */\n+      COSTS_N_INSNS (1),            /* fp_div_sf */\n+      COSTS_N_INSNS (1),            /* fp_div_df */\n+      COSTS_N_INSNS (1),            /* int_mult_si */\n+      COSTS_N_INSNS (1),            /* int_mult_di */\n+      COSTS_N_INSNS (1),            /* int_div_si */\n+      COSTS_N_INSNS (1),            /* int_div_di */\n+                       2,           /* branch_cost */\n+                       4            /* memory_latency */\n+  };\n+\n static struct mips_rtx_cost_data const mips_rtx_cost_data[PROCESSOR_MAX] =\n   {\n     { /* R3000 */\n@@ -4756,7 +4771,10 @@ override_options (void)\n     mips_set_tune (mips_arch_info);\n \n   /* Set cost structure for the processor.  */\n-  mips_cost = &mips_rtx_cost_data[mips_tune];\n+  if (optimize_size)\n+    mips_cost = &mips_rtx_cost_optimize_size;\n+  else\n+    mips_cost = &mips_rtx_cost_data[mips_tune];\n \n   if ((target_flags_explicit & MASK_64BIT) != 0)\n     {"}]}