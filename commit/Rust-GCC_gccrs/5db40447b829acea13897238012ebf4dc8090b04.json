{"sha": "5db40447b829acea13897238012ebf4dc8090b04", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWRiNDA0NDdiODI5YWNlYTEzODk3MjM4MDEyZWJmNGRjODA5MGIwNA==", "commit": {"author": {"name": "Andreas Krebbel", "email": "Andreas.Krebbel@de.ibm.com", "date": "2013-10-10T12:01:23Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2013-10-10T12:01:23Z"}, "message": "re PR target/57377 (compiler cannot be built with RTL checking)\n\n2013-10-10  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\tPR target/57377\n\t* gensupport.c (gen_mnemonic_attr): Handle (set (attr x) y) and\n\t(set_attr_alternative x ...) when searching for user defined\n\tmnemonic attribute.\n\nFrom-SVN: r203353", "tree": {"sha": "fede89564009dac8323afb9c942a675a3f1358a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fede89564009dac8323afb9c942a675a3f1358a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5db40447b829acea13897238012ebf4dc8090b04", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5db40447b829acea13897238012ebf4dc8090b04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5db40447b829acea13897238012ebf4dc8090b04", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5db40447b829acea13897238012ebf4dc8090b04/comments", "author": null, "committer": null, "parents": [{"sha": "ed018d4b1f9996ee14eadc313b4bac1a0ce23b4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed018d4b1f9996ee14eadc313b4bac1a0ce23b4c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed018d4b1f9996ee14eadc313b4bac1a0ce23b4c"}], "stats": {"total": 34, "additions": 28, "deletions": 6}, "files": [{"sha": "fdf0f2cc1d3c41862f9656d0c3eb834e90b80b08", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5db40447b829acea13897238012ebf4dc8090b04/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5db40447b829acea13897238012ebf4dc8090b04/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5db40447b829acea13897238012ebf4dc8090b04", "patch": "@@ -1,3 +1,10 @@\n+2013-10-10  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\tPR target/57377\n+\t* gensupport.c (gen_mnemonic_attr): Handle (set (attr x) y) and\n+\t(set_attr_alternative x ...) when searching for user defined\n+\tmnemonic attribute.\n+\n 2013-10-10  Andrew MacLeod  <amacleod@redhat.com>\n \n \t* config/aplha/alpha.c: Add gimple-ssa.h to include list."}, {"sha": "e6c5c23a161c426a7635a4b7dbffb3dffea9e960", "filename": "gcc/gensupport.c", "status": "modified", "additions": 21, "deletions": 6, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5db40447b829acea13897238012ebf4dc8090b04/gcc%2Fgensupport.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5db40447b829acea13897238012ebf4dc8090b04/gcc%2Fgensupport.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgensupport.c?ref=5db40447b829acea13897238012ebf4dc8090b04", "patch": "@@ -2445,14 +2445,29 @@ gen_mnemonic_attr (void)\n       bool found = false;\n \n       /* Check if the insn definition already has\n-\t (set_attr \"mnemonic\" ...).  */\n+\t (set_attr \"mnemonic\" ...) or (set (attr \"mnemonic\") ...).  */\n       if (XVEC (insn, 4))\n  \tfor (i = 0; i < XVECLEN (insn, 4); i++)\n-\t  if (strcmp (XSTR (XVECEXP (insn, 4, i), 0), MNEMONIC_ATTR_NAME) == 0)\n-\t    {\n-\t      found = true;\n-\t      break;\n-\t    }\n+\t  {\n+\t    rtx set_attr = XVECEXP (insn, 4, i);\n+\n+\t    switch (GET_CODE (set_attr))\n+\t      {\n+\t      case SET_ATTR:\n+\t      case SET_ATTR_ALTERNATIVE:\n+\t\tif (strcmp (XSTR (set_attr, 0), MNEMONIC_ATTR_NAME) == 0)\n+\t\t  found = true;\n+\t\tbreak;\n+\t      case SET:\n+\t\tif (GET_CODE (SET_DEST (set_attr)) == ATTR\n+\t\t    && strcmp (XSTR (SET_DEST (set_attr), 0),\n+\t\t\t       MNEMONIC_ATTR_NAME) == 0)\n+\t\t  found = true;\n+\t\tbreak;\n+\t      default:\n+\t\tbreak;\n+\t      }\n+\t  }\n \n       if (!found)\n \tgen_mnemonic_setattr (mnemonic_htab, insn);"}]}