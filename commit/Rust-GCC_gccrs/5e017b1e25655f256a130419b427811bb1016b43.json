{"sha": "5e017b1e25655f256a130419b427811bb1016b43", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWUwMTdiMWUyNTY1NWYyNTZhMTMwNDE5YjQyNzgxMWJiMTAxNmI0Mw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2019-08-30T15:15:40Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2019-08-30T15:15:40Z"}, "message": "trans.c (gnat_to_gnu): Do not set the location on an expression used for a tag.\n\n\t* gcc-interface/trans.c (gnat_to_gnu): Do not set the location on an\n\texpression used for a tag.\n\nFrom-SVN: r275197", "tree": {"sha": "203ea3028b131425718668468e1d778aaf5c5647", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/203ea3028b131425718668468e1d778aaf5c5647"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e017b1e25655f256a130419b427811bb1016b43", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e017b1e25655f256a130419b427811bb1016b43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e017b1e25655f256a130419b427811bb1016b43", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e017b1e25655f256a130419b427811bb1016b43/comments", "author": null, "committer": null, "parents": [{"sha": "0c2837b5c408f8fd2b023a7bf00be9abd1e28a28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c2837b5c408f8fd2b023a7bf00be9abd1e28a28", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c2837b5c408f8fd2b023a7bf00be9abd1e28a28"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "f4c510d9fff06ebabc8d3a5dc3f63c0e7d230b9c", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e017b1e25655f256a130419b427811bb1016b43/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e017b1e25655f256a130419b427811bb1016b43/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=5e017b1e25655f256a130419b427811bb1016b43", "patch": "@@ -1,3 +1,8 @@\n+2019-08-30  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/trans.c (gnat_to_gnu): Do not set the location on an\n+\texpression used for a tag.\n+\n 2019-08-30  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/gigi.h (aggregate_type_contains_array_p): Declare."}, {"sha": "e7064c6e72e6bd76806fd72c10b25dc3af01fd1d", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e017b1e25655f256a130419b427811bb1016b43/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e017b1e25655f256a130419b427811bb1016b43/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=5e017b1e25655f256a130419b427811bb1016b43", "patch": "@@ -8727,10 +8727,16 @@ gnat_to_gnu (Node_Id gnat_node)\n \tset_gnu_expr_location_from_node (gnu_result, gnat_node);\n     }\n \n-  /* Set the location information on the result if it's not a simple name.\n+  /* Set the location information on the result if it's not a simple name\n+     or something that contains a simple name, for example a tag, because\n+     we don\"t want all the references to get the location of the first use.\n      Note that we may have no result if we tried to build a CALL_EXPR node\n      to a procedure with no side-effects and optimization is enabled.  */\n-  else if (kind != N_Identifier && gnu_result && EXPR_P (gnu_result))\n+  else if (kind != N_Identifier\n+\t   && !(kind == N_Selected_Component\n+\t\t&& Chars (Selector_Name (gnat_node)) == Name_uTag)\n+\t   && gnu_result\n+\t   && EXPR_P (gnu_result))\n     set_gnu_expr_location_from_node (gnu_result, gnat_node);\n \n   /* If we're supposed to return something of void_type, it means we have"}]}