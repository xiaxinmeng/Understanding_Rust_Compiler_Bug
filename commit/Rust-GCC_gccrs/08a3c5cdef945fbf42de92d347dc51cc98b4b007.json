{"sha": "08a3c5cdef945fbf42de92d347dc51cc98b4b007", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDhhM2M1Y2RlZjk0NWZiZjQyZGU5MmQzNDdkYzUxY2M5OGI0YjAwNw==", "commit": {"author": {"name": "Kenneth Zadeck", "email": "zadeck@naturalbridge.com", "date": "2005-07-08T17:34:13Z"}, "committer": {"name": "Kenneth Zadeck", "email": "zadeck@gcc.gnu.org", "date": "2005-07-08T17:34:13Z"}, "message": "bitmap.c (bitmap_and, [...]): Removed \"a != b\" assert and inserted fastpath code for this case.\n\n2005-07-08  Kenneth Zadeck <zadeck@naturalbridge.com>\n\n\t* bitmap.c (bitmap_and, bitmap_and_into, bitmap_and_compl,\n\tbitmap_and_compl_into, bitmap_xor, bitmap_xor_into): Removed \"a !=\n\tb\" assert and inserted fastpath code for this case.\n\t(bitmap_ior): Removed \"a != b\" assert.\n\nFrom-SVN: r101780", "tree": {"sha": "9e72f0f2ce125c857bf2a4101fcdfa83693dd6e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9e72f0f2ce125c857bf2a4101fcdfa83693dd6e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08a3c5cdef945fbf42de92d347dc51cc98b4b007", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08a3c5cdef945fbf42de92d347dc51cc98b4b007", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08a3c5cdef945fbf42de92d347dc51cc98b4b007", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08a3c5cdef945fbf42de92d347dc51cc98b4b007/comments", "author": {"login": "zadeck", "id": 42682403, "node_id": "MDQ6VXNlcjQyNjgyNDAz", "avatar_url": "https://avatars.githubusercontent.com/u/42682403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zadeck", "html_url": "https://github.com/zadeck", "followers_url": "https://api.github.com/users/zadeck/followers", "following_url": "https://api.github.com/users/zadeck/following{/other_user}", "gists_url": "https://api.github.com/users/zadeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/zadeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zadeck/subscriptions", "organizations_url": "https://api.github.com/users/zadeck/orgs", "repos_url": "https://api.github.com/users/zadeck/repos", "events_url": "https://api.github.com/users/zadeck/events{/privacy}", "received_events_url": "https://api.github.com/users/zadeck/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5e180a3f547f7c698ebcf31c97f8a69a199a7554", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e180a3f547f7c698ebcf31c97f8a69a199a7554", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e180a3f547f7c698ebcf31c97f8a69a199a7554"}], "stats": {"total": 62, "additions": 54, "deletions": 8}, "files": [{"sha": "b4ae5cd05cf27e4d70a390dc251cf90d89d73975", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08a3c5cdef945fbf42de92d347dc51cc98b4b007/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08a3c5cdef945fbf42de92d347dc51cc98b4b007/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=08a3c5cdef945fbf42de92d347dc51cc98b4b007", "patch": "@@ -1,3 +1,10 @@\n+2005-07-08  Kenneth Zadeck <zadeck@naturalbridge.com>\n+\n+\t* bitmap.c (bitmap_and, bitmap_and_into, bitmap_and_compl,\n+\tbitmap_and_compl_into, bitmap_xor, bitmap_xor_into): Removed \"a !=\n+\tb\" assert and inserted fastpath code for this case.\n+\t(bitmap_ior): Removed \"a != b\" assert.\n+\n 2005-07-08  Kazuhiro Inaoka <inaoka.kazuhiro@renesas.com>\n \n \t* config/m32r/linux.h (STARTFILE_SPEC): Support PIE."}, {"sha": "e587c24bda2bcb03d4ad9d9a05cad9b998751779", "filename": "gcc/bitmap.c", "status": "modified", "additions": 47, "deletions": 8, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08a3c5cdef945fbf42de92d347dc51cc98b4b007/gcc%2Fbitmap.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08a3c5cdef945fbf42de92d347dc51cc98b4b007/gcc%2Fbitmap.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbitmap.c?ref=08a3c5cdef945fbf42de92d347dc51cc98b4b007", "patch": "@@ -583,7 +583,14 @@ bitmap_and (bitmap dst, bitmap a, bitmap b)\n   bitmap_element *b_elt = b->first;\n   bitmap_element *dst_prev = NULL;\n \n-  gcc_assert (dst != a && dst != b && a != b);\n+  gcc_assert (dst != a && dst != b);\n+\n+  if (a == b)\n+    {\n+      bitmap_copy (dst, a);\n+      return;\n+    }\n+\n   while (a_elt && b_elt)\n     {\n       if (a_elt->indx < b_elt->indx)\n@@ -631,7 +638,9 @@ bitmap_and_into (bitmap a, bitmap b)\n   bitmap_element *b_elt = b->first;\n   bitmap_element *next;\n \n-  gcc_assert (a != b);\n+  if (a == b) \n+    return;\n+\n   while (a_elt && b_elt)\n     {\n       if (a_elt->indx < b_elt->indx)\n@@ -677,8 +686,14 @@ bitmap_and_compl (bitmap dst, bitmap a, bitmap b)\n   bitmap_element *b_elt = b->first;\n   bitmap_element *dst_prev = NULL;\n \n-  gcc_assert (dst != a && dst != b && a != b);\n+  gcc_assert (dst != a && dst != b);\n   \n+  if (a == b)\n+    {\n+      bitmap_clear (dst);\n+      return;\n+    }\n+\n   while (a_elt)\n     {\n       if (!b_elt || a_elt->indx < b_elt->indx)\n@@ -737,7 +752,17 @@ bitmap_and_compl_into (bitmap a, bitmap b)\n   bitmap_element *next;\n   BITMAP_WORD changed = 0;\n \n-  gcc_assert (a != b);\n+  if (a == b)\n+    {\n+      if (bitmap_empty_p (a))\n+\treturn false;\n+      else\n+\t{\n+\t  bitmap_clear (a);\n+\t  return true;\n+\t}\n+    }\n+\n   while (a_elt && b_elt)\n     {\n       if (a_elt->indx < b_elt->indx)\n@@ -782,7 +807,8 @@ bitmap_ior (bitmap dst, bitmap a, bitmap b)\n   bitmap_element *dst_prev = NULL;\n   bool changed = false;  \n \n-  gcc_assert (dst != a && dst != b && a != b);\n+  gcc_assert (dst != a && dst != b);\n+\n   while (a_elt || b_elt)\n     {\n       if (a_elt && b_elt && a_elt->indx == b_elt->indx)\n@@ -883,7 +909,9 @@ bitmap_ior_into (bitmap a, bitmap b)\n   bitmap_element *a_prev = NULL;\n   bool changed = false;\n \n-  gcc_assert (a != b);\n+  if (a == b)\n+    return false;\n+\n   while (b_elt)\n     {\n       if (!a_elt || b_elt->indx < a_elt->indx)\n@@ -946,7 +974,13 @@ bitmap_xor (bitmap dst, bitmap a, bitmap b)\n   bitmap_element *b_elt = b->first;\n   bitmap_element *dst_prev = NULL;\n \n-  gcc_assert (dst != a && dst != b && a != b);\n+  gcc_assert (dst != a && dst != b);\n+  if (a == b)\n+    {\n+      bitmap_clear (dst);\n+      return;\n+    }\n+\n   while (a_elt || b_elt)\n     {\n       if (a_elt && b_elt && a_elt->indx == b_elt->indx)\n@@ -1014,7 +1048,12 @@ bitmap_xor_into (bitmap a, bitmap b)\n   bitmap_element *b_elt = b->first;\n   bitmap_element *a_prev = NULL;\n \n-  gcc_assert (a != b);\n+  if (a == b)\n+    {\n+      bitmap_clear (a);\n+      return;\n+    }\n+\n   while (b_elt)\n     {\n       if (!a_elt || b_elt->indx < a_elt->indx)"}]}