{"sha": "ef190c93b07f04d61e28d70bb9a360fd2f3efbde", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWYxOTBjOTNiMDdmMDRkNjFlMjhkNzBiYjlhMzYwZmQyZjNlZmJkZQ==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2018-11-15T14:01:29Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2018-11-15T14:01:29Z"}, "message": "graphite: add missing dump_enabled_p checks (PR tree-optimization/88015)\n\ngcc/ChangeLog:\n\tPR tree-optimization/88015\n\t* graphite-isl-ast-to-gimple.c\n\t(translate_isl_ast_to_gimple::scop_to_isl_ast): Add missing check\n\tfor dump_enabled_p.\n\t* graphite-sese-to-poly.c (build_poly_scop): Likewise.\n\nFrom-SVN: r266184", "tree": {"sha": "9611ac72979e3810999fc74e98c916853e82bfdb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9611ac72979e3810999fc74e98c916853e82bfdb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef190c93b07f04d61e28d70bb9a360fd2f3efbde", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef190c93b07f04d61e28d70bb9a360fd2f3efbde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef190c93b07f04d61e28d70bb9a360fd2f3efbde", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef190c93b07f04d61e28d70bb9a360fd2f3efbde/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0e02fb26381e7c8a4766eb0e29c325b5ef6917f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e02fb26381e7c8a4766eb0e29c325b5ef6917f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e02fb26381e7c8a4766eb0e29c325b5ef6917f9"}], "stats": {"total": 36, "additions": 24, "deletions": 12}, "files": [{"sha": "d9857fef20cb7e279d79855e2e9c6df09b56c34e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef190c93b07f04d61e28d70bb9a360fd2f3efbde/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef190c93b07f04d61e28d70bb9a360fd2f3efbde/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ef190c93b07f04d61e28d70bb9a360fd2f3efbde", "patch": "@@ -1,3 +1,11 @@\n+2018-11-15  David Malcolm  <dmalcolm@redhat.com>\n+\n+\tPR tree-optimization/88015\n+\t* graphite-isl-ast-to-gimple.c\n+\t(translate_isl_ast_to_gimple::scop_to_isl_ast): Add missing check\n+\tfor dump_enabled_p.\n+\t* graphite-sese-to-poly.c (build_poly_scop): Likewise.\n+\n 2018-11-15  Richard Biener  <rguenther@suse.de>\n \n         PR middle-end/88029"}, {"sha": "cc93fb94dafd8357d10113bb34555e74bb92de9a", "filename": "gcc/graphite-isl-ast-to-gimple.c", "status": "modified", "additions": 14, "deletions": 11, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef190c93b07f04d61e28d70bb9a360fd2f3efbde/gcc%2Fgraphite-isl-ast-to-gimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef190c93b07f04d61e28d70bb9a360fd2f3efbde/gcc%2Fgraphite-isl-ast-to-gimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-isl-ast-to-gimple.c?ref=ef190c93b07f04d61e28d70bb9a360fd2f3efbde", "patch": "@@ -1411,17 +1411,20 @@ scop_to_isl_ast (scop_p scop)\n   isl_ctx_set_max_operations (scop->isl_context, old_max_operations);\n   if (isl_ctx_last_error (scop->isl_context) != isl_error_none)\n     {\n-      dump_user_location_t loc = find_loop_location\n-\t(scop->scop_info->region.entry->dest->loop_father);\n-      if (isl_ctx_last_error (scop->isl_context) == isl_error_quota)\n-\tdump_printf_loc (MSG_MISSED_OPTIMIZATION, loc,\n-\t\t\t \"loop nest not optimized, AST generation timed out \"\n-\t\t\t \"after %d operations [--param max-isl-operations]\\n\",\n-\t\t\t max_operations);\n-      else\n-\tdump_printf_loc (MSG_MISSED_OPTIMIZATION, loc,\n-\t\t\t \"loop nest not optimized, ISL AST generation \"\n-\t\t\t \"signalled an error\\n\");\n+      if (dump_enabled_p ())\n+\t{\n+\t  dump_user_location_t loc = find_loop_location\n+\t    (scop->scop_info->region.entry->dest->loop_father);\n+\t  if (isl_ctx_last_error (scop->isl_context) == isl_error_quota)\n+\t    dump_printf_loc (MSG_MISSED_OPTIMIZATION, loc,\n+\t\t\t     \"loop nest not optimized, AST generation timed out \"\n+\t\t\t     \"after %d operations [--param max-isl-operations]\\n\",\n+\t\t\t     max_operations);\n+\t  else\n+\t    dump_printf_loc (MSG_MISSED_OPTIMIZATION, loc,\n+\t\t\t     \"loop nest not optimized, ISL AST generation \"\n+\t\t\t     \"signalled an error\\n\");\n+\t}\n       isl_ast_node_free (ast_isl);\n       return NULL;\n     }"}, {"sha": "1d41cffeb04e48270358c301d2c9eb3bd18bb735", "filename": "gcc/graphite-sese-to-poly.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef190c93b07f04d61e28d70bb9a360fd2f3efbde/gcc%2Fgraphite-sese-to-poly.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef190c93b07f04d61e28d70bb9a360fd2f3efbde/gcc%2Fgraphite-sese-to-poly.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-sese-to-poly.c?ref=ef190c93b07f04d61e28d70bb9a360fd2f3efbde", "patch": "@@ -1218,7 +1218,8 @@ build_poly_scop (scop_p scop)\n   enum isl_error err = isl_ctx_last_error (scop->isl_context);\n   isl_ctx_reset_error (scop->isl_context);\n   isl_options_set_on_error (scop->isl_context, old_err);\n-  if (err != isl_error_none)\n+  if (err != isl_error_none\n+      && dump_enabled_p ())\n     dump_printf (MSG_MISSED_OPTIMIZATION,\n \t\t \"ISL error while building poly scop\\n\");\n "}]}