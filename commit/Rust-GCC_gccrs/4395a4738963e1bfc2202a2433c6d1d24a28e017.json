{"sha": "4395a4738963e1bfc2202a2433c6d1d24a28e017", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDM5NWE0NzM4OTYzZTFiZmMyMjAyYTI0MzNjNmQxZDI0YTI4ZTAxNw==", "commit": {"author": {"name": "Thomas Preud'homme", "email": "thomas.preudhomme@arm.com", "date": "2017-09-13T10:27:00Z"}, "committer": {"name": "Thomas Preud'homme", "email": "thopre01@gcc.gnu.org", "date": "2017-09-13T10:27:00Z"}, "message": "[testsuite/ARM] Fix coprocessor intrinsic test failures on ARMv8-A\n\nCoprocessor intrinsic tests in gcc.target/arm/acle test whether\n__ARM_FEATURE_COPROC has the right bit defined before calling the\nintrinsic. This allows to test both the correct setting of that macro\nand the availability and correct working of the intrinsic. However the\n__ARM_FEATURE_COPROC macro is no longer defined for ARMv8-A since\nr249399.\n\nThis patch changes the testcases to skip that test for ARMv8-A and\nARMv8-R targets.  It also fixes some irregularity in the coprocessor\neffective targets:\n- add ldcl and stcl to the list of instructions listed as guarded by\n  arm_coproc1_ok\n- enable tests guarded by arm_coproc2_ok, arm_coproc3_ok and\n  arm_coproc4_ok for Thumb-2 capable targets but disable for Thumb-1\n  targets.\n\n2017-09-13  Thomas Preud'homme  <thomas.preudhomme@arm.com>\n\n    gcc/testsuite/\n    * gcc.target/arm/acle/cdp.c: Skip __ARM_FEATURE_COPROC check for\n    ARMv8-A and ARMv8-R.\n    * gcc.target/arm/acle/cdp2.c: Likewise.\n    * gcc.target/arm/acle/ldc.c: Likewise.\n    * gcc.target/arm/acle/ldc2.c: Likewise.\n    * gcc.target/arm/acle/ldc2l.c: Likewise.\n    * gcc.target/arm/acle/ldcl.c: Likewise.\n    * gcc.target/arm/acle/mcr.c: Likewise.\n    * gcc.target/arm/acle/mcr2.c: Likewise.\n    * gcc.target/arm/acle/mcrr.c: Likewise.\n    * gcc.target/arm/acle/mcrr2.c: Likewise.\n    * gcc.target/arm/acle/mrc.c: Likewise.\n    * gcc.target/arm/acle/mrc2.c: Likewise.\n    * gcc.target/arm/acle/mrrc.c: Likewise.\n    * gcc.target/arm/acle/mrrc2.c: Likewise.\n    * gcc.target/arm/acle/stc.c: Likewise.\n    * gcc.target/arm/acle/stc2.c: Likewise.\n    * gcc.target/arm/acle/stc2l.c: Likewise.\n    * gcc.target/arm/acle/stcl.c: Likewise.\n    * lib/target-supports.exp:\n    (check_effective_target_arm_coproc1_ok_nocache): Mention ldcl\n    and stcl in the comment.\n    (check_effective_target_arm_coproc2_ok_nocache): Allow Thumb-2 targets\n    and disable Thumb-1 targets.\n    (check_effective_target_arm_coproc3_ok_nocache): Likewise.\n    (check_effective_target_arm_coproc4_ok_nocache): Likewise.\n\nAcked-by: Kyrill Tkachov <kyrylo.tkachov@foss.arm.com>\n\nFrom-SVN: r252074", "tree": {"sha": "76d2904a464304639359afb27c9332d5ed660d93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76d2904a464304639359afb27c9332d5ed660d93"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4395a4738963e1bfc2202a2433c6d1d24a28e017", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4395a4738963e1bfc2202a2433c6d1d24a28e017", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4395a4738963e1bfc2202a2433c6d1d24a28e017", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4395a4738963e1bfc2202a2433c6d1d24a28e017/comments", "author": {"login": "RoboTux", "id": 272327, "node_id": "MDQ6VXNlcjI3MjMyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/272327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RoboTux", "html_url": "https://github.com/RoboTux", "followers_url": "https://api.github.com/users/RoboTux/followers", "following_url": "https://api.github.com/users/RoboTux/following{/other_user}", "gists_url": "https://api.github.com/users/RoboTux/gists{/gist_id}", "starred_url": "https://api.github.com/users/RoboTux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RoboTux/subscriptions", "organizations_url": "https://api.github.com/users/RoboTux/orgs", "repos_url": "https://api.github.com/users/RoboTux/repos", "events_url": "https://api.github.com/users/RoboTux/events{/privacy}", "received_events_url": "https://api.github.com/users/RoboTux/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c29730ec17675f70785f6326c35a2be59eaba53b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c29730ec17675f70785f6326c35a2be59eaba53b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c29730ec17675f70785f6326c35a2be59eaba53b"}], "stats": {"total": 94, "additions": 71, "deletions": 23}, "files": [{"sha": "bb2bcbe4ac87e91fdae3e6fde5e3078a6b6b5a15", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -1,3 +1,32 @@\n+2017-09-13  Thomas Preud'homme  <thomas.preudhomme@arm.com>\n+\n+\t* gcc.target/arm/acle/cdp.c: Skip __ARM_FEATURE_COPROC check for\n+\tARMv8-A and ARMv8-R.\n+\t* gcc.target/arm/acle/cdp2.c: Likewise.\n+\t* gcc.target/arm/acle/ldc.c: Likewise.\n+\t* gcc.target/arm/acle/ldc2.c: Likewise.\n+\t* gcc.target/arm/acle/ldc2l.c: Likewise.\n+\t* gcc.target/arm/acle/ldcl.c: Likewise.\n+\t* gcc.target/arm/acle/mcr.c: Likewise.\n+\t* gcc.target/arm/acle/mcr2.c: Likewise.\n+\t* gcc.target/arm/acle/mcrr.c: Likewise.\n+\t* gcc.target/arm/acle/mcrr2.c: Likewise.\n+\t* gcc.target/arm/acle/mrc.c: Likewise.\n+\t* gcc.target/arm/acle/mrc2.c: Likewise.\n+\t* gcc.target/arm/acle/mrrc.c: Likewise.\n+\t* gcc.target/arm/acle/mrrc2.c: Likewise.\n+\t* gcc.target/arm/acle/stc.c: Likewise.\n+\t* gcc.target/arm/acle/stc2.c: Likewise.\n+\t* gcc.target/arm/acle/stc2l.c: Likewise.\n+\t* gcc.target/arm/acle/stcl.c: Likewise.\n+\t* lib/target-supports.exp:\n+\t(check_effective_target_arm_coproc1_ok_nocache): Mention ldcl\n+\tand stcl in the comment.\n+\t(check_effective_target_arm_coproc2_ok_nocache): Allow Thumb-2 targets\n+\tand disable Thumb-1 targets.\n+\t(check_effective_target_arm_coproc3_ok_nocache): Likewise.\n+\t(check_effective_target_arm_coproc4_ok_nocache): Likewise.\n+\n 2017-09-13  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/47226"}, {"sha": "cfa922a797cddbf4a99f27ec156fd2d2fc9a460d", "filename": "gcc/testsuite/gcc.target/arm/acle/cdp.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fcdp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fcdp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fcdp.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc1_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x1) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x1) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "b18076c26274043be8ac71e6516b9b6eac3b4137", "filename": "gcc/testsuite/gcc.target/arm/acle/cdp2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fcdp2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fcdp2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fcdp2.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc2_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x2) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x2) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "10c879f4a15e7c293541c61dc974d972798ecedf", "filename": "gcc/testsuite/gcc.target/arm/acle/ldc.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldc.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc1_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x1) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x1) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "d561adacccf358a1dbfa9db253c9bc08847c7e33", "filename": "gcc/testsuite/gcc.target/arm/acle/ldc2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldc2.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc2_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x2) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x2) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "2c2a381c272e3f6f5c5a1335a80c49089e6b1fb2", "filename": "gcc/testsuite/gcc.target/arm/acle/ldc2l.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldc2l.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldc2l.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldc2l.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc2_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x2) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x2) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "acbe5a3a2d0ce709b0d5a874428e8a210f21465c", "filename": "gcc/testsuite/gcc.target/arm/acle/ldcl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldcl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldcl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fldcl.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc1_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x1) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x1) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "fb8e3c28ea1e8a7274fdfaabbb045b991953bfb4", "filename": "gcc/testsuite/gcc.target/arm/acle/mcr.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcr.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc1_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x1) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x1) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "b83d9d7df8b5c87c0ae1a5a8d482eb6f5e0e696f", "filename": "gcc/testsuite/gcc.target/arm/acle/mcr2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcr2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcr2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcr2.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc2_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x2) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x2) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "468dd96fb9b6a726aaa235172340a904b4e420d8", "filename": "gcc/testsuite/gcc.target/arm/acle/mcrr.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcrr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcrr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcrr.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc3_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x4) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x4) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "1173ad06b533233651bddb1dd9d118ddeed5f8ae", "filename": "gcc/testsuite/gcc.target/arm/acle/mcrr2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcrr2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcrr2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmcrr2.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc4_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x8) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x8) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "b09634f14f2db4d85f21e516b9f13909dc735eb9", "filename": "gcc/testsuite/gcc.target/arm/acle/mrc.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrc.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc1_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x1) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x1) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "7dd691f0e49bab722a685075e638a4227a7239e8", "filename": "gcc/testsuite/gcc.target/arm/acle/mrc2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrc2.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc2_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x2) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x2) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "c004660fadcadb912b3c246241843e22242dffcc", "filename": "gcc/testsuite/gcc.target/arm/acle/mrrc.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrrc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrrc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrrc.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc3_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x4) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x4) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "b5d56da8f90b2397408617dda610703f44f4435b", "filename": "gcc/testsuite/gcc.target/arm/acle/mrrc2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrrc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrrc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fmrrc2.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc4_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x8) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x8) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "6155bd07dc38e1435bbc1df737a9e727ac7a768b", "filename": "gcc/testsuite/gcc.target/arm/acle/stc.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstc.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc1_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x1) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x1) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "57598d986a36ada7988dba430f7ee9d11897b605", "filename": "gcc/testsuite/gcc.target/arm/acle/stc2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstc2.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc2_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x2) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x2) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "0bca8dfa1f89bfe92221b63b63ebff0990a58021", "filename": "gcc/testsuite/gcc.target/arm/acle/stc2l.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstc2l.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstc2l.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstc2l.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc2_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x2) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x2) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "be6270f26719f19167635d43f0ea02356369b16b", "filename": "gcc/testsuite/gcc.target/arm/acle/stcl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstcl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstcl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Facle%2Fstcl.c?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -5,7 +5,8 @@\n /* { dg-require-effective-target arm_coproc1_ok } */\n \n #include \"arm_acle.h\"\n-#if (__ARM_FEATURE_COPROC & 0x1) == 0\n+#if (__ARM_ARCH < 8 || !defined (__ARM_ARCH_ISA_ARM)) \\\n+    && (__ARM_FEATURE_COPROC & 0x1) == 0\n   #error \"__ARM_FEATURE_COPROC does not have correct feature bits set\"\n #endif\n "}, {"sha": "2733c6281003cc206e262a86e490777414f21414", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4395a4738963e1bfc2202a2433c6d1d24a28e017/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=4395a4738963e1bfc2202a2433c6d1d24a28e017", "patch": "@@ -8504,8 +8504,8 @@ proc check_effective_target_rdrand { } {\n     } \"-mrdrnd\" ]\n }\n \n-# Return 1 if the target supports coprocessor instructions: cdp, ldc, stc, mcr and\n-# mrc.\n+# Return 1 if the target supports coprocessor instructions: cdp, ldc, ldcl,\n+# stc, stcl, mcr and mrc.\n proc check_effective_target_arm_coproc1_ok_nocache { } {\n     if { ![istarget arm*-*-*] } {\n \treturn 0\n@@ -8530,7 +8530,7 @@ proc check_effective_target_arm_coproc2_ok_nocache { } {\n \treturn 0\n     }\n     return [check_no_compiler_messages_nocache arm_coproc2_ok assembly {\n-\t#if __ARM_ARCH < 5\n+\t#if (__thumb__ && !__thumb2__) || __ARM_ARCH < 5\n \t#error FOO\n \t#endif\n     }]\n@@ -8549,7 +8549,8 @@ proc check_effective_target_arm_coproc3_ok_nocache { } {\n \treturn 0\n     }\n     return [check_no_compiler_messages_nocache arm_coproc3_ok assembly {\n-\t#if __ARM_ARCH < 6 && !defined (__ARM_ARCH_5TE__)\n+\t#if (__thumb__ && !__thumb2__) \\\n+\t    || (__ARM_ARCH < 6 && !defined (__ARM_ARCH_5TE__))\n \t#error FOO\n \t#endif\n     }]\n@@ -8568,7 +8569,7 @@ proc check_effective_target_arm_coproc4_ok_nocache { } {\n \treturn 0\n     }\n     return [check_no_compiler_messages_nocache arm_coproc4_ok assembly {\n-\t#if __ARM_ARCH < 6\n+\t#if (__thumb__ && !__thumb2__) || __ARM_ARCH < 6\n \t#error FOO\n \t#endif\n     }]"}]}