{"sha": "0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGMwYzZmNDlkNTc1ZjcwYjhmYmQ2NGE1ZDAzM2Q2NWVlMjRmOWFkMg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-10-27T13:22:25Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-10-27T13:22:25Z"}, "message": "[multiple changes]\n\n2009-10-27  Thomas Quinot  <quinot@adacore.com>\n\n\t* sem_ch12.adb (Install_Formal_Packages): Do not omit installation of\n\tvisible entities when the formal package doesn't have a box.\n\n\t* checks.adb: Minor reformatting.\n\n2009-10-27  Vincent Celier  <celier@adacore.com>\n\n\t* prj-part.adb (Parse): Catch exception Types.Unrecoverable_Error and\n\tset Project to Empty_Node.\n\n2009-10-27  Robert Dewar  <dewar@adacore.com>\n\n\t* gnatbind.adb: Minor reformatting\n\nFrom-SVN: r153593", "tree": {"sha": "19a3adc4ab8d0fc718d9a6dc0de8064797138b72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19a3adc4ab8d0fc718d9a6dc0de8064797138b72"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2/comments", "author": null, "committer": null, "parents": [{"sha": "fdfcc663025bcdca7562b2d16211a0588e484927", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdfcc663025bcdca7562b2d16211a0588e484927", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fdfcc663025bcdca7562b2d16211a0588e484927"}], "stats": {"total": 101, "additions": 59, "deletions": 42}, "files": [{"sha": "de24ed144255a307309cfd702b0dec2995c83f2a", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2", "patch": "@@ -1,3 +1,19 @@\n+2009-10-27  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* sem_ch12.adb (Install_Formal_Packages): Do not omit installation of\n+\tvisible entities when the formal package doesn't have a box.\n+\n+\t* checks.adb: Minor reformatting.\n+\n+2009-10-27  Vincent Celier  <celier@adacore.com>\n+\n+\t* prj-part.adb (Parse): Catch exception Types.Unrecoverable_Error and\n+\tset Project to Empty_Node.\n+\n+2009-10-27  Robert Dewar  <dewar@adacore.com>\n+\n+\t* gnatbind.adb: Minor reformatting\n+\n 2009-10-27  Arnaud Charlet  <charlet@adacore.com>\n \n \t* exp_aggr.adb: Fix comment."}, {"sha": "ff511665b738c87a76b30277a7bf3cb303364b4a", "filename": "gcc/ada/checks.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2/gcc%2Fada%2Fchecks.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2/gcc%2Fada%2Fchecks.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fchecks.adb?ref=0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2", "patch": "@@ -848,7 +848,7 @@ package body Checks is\n          --  is not set anyway, or we are not doing code expansion, or the\n          --  parent node is a type conversion whose operand is an arithmetic\n          --  operation on signed integers on which the expander can promote\n-         --  later the operands to type integer (see Expand_N_Type_Conversion).\n+         --  later the operands to type Integer (see Expand_N_Type_Conversion).\n \n          --  Special case CLI target, where arithmetic overflow checks can be\n          --  performed for integer and long_integer"}, {"sha": "fb3dc3d74ba9e85c50aa4b388fdb1665a0966428", "filename": "gcc/ada/gnatbind.adb", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2/gcc%2Fada%2Fgnatbind.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2/gcc%2Fada%2Fgnatbind.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatbind.adb?ref=0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2", "patch": "@@ -838,12 +838,14 @@ begin\n                   end if;\n                end loop;\n \n-               --  Subunits do not appear in the elaboration table because\n-               --  they are subsumed by their parent units, but we need to\n-               --  list them for other tools. For now they are listed after\n-               --  other files, rather than following immediately their parent,\n-               --  because there is no cheap link between the elaboration table\n-               --  and the ALIs table.\n+               --  Subunits do not appear in the elaboration table because they\n+               --  are subsumed by their parent units, but we need to list them\n+               --  for other tools. For now they are listed after other files,\n+               --  rather than right after their parent, since there is no easy\n+               --  link between the elaboration table and the ALIs table ???\n+               --  Note also that subunits may appear repeatedly in the list,\n+               --  if the parent unit appears in the context of several units\n+               --  in the closure.\n \n                for J in Sdep.First .. Sdep.Last loop\n                   if Sdep.Table (J).Subunit_Name /= No_Name\n@@ -853,8 +855,7 @@ begin\n                         Write_Str (\"   \");\n                      end if;\n \n-                     Write_Str\n-                       (Get_Name_String (Sdep.Table (J).Sfile));\n+                     Write_Str (Get_Name_String (Sdep.Table (J).Sfile));\n                      Write_Eol;\n                   end if;\n                end loop;"}, {"sha": "7702f540930cfb179385cd8b2349cfbb0a20fec3", "filename": "gcc/ada/prj-part.adb", "status": "modified", "additions": 21, "deletions": 13, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2/gcc%2Fada%2Fprj-part.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2/gcc%2Fada%2Fprj-part.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-part.adb?ref=0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2", "patch": "@@ -485,19 +485,27 @@ package body Prj.Part is\n             return;\n          end if;\n \n-         Parse_Single_Project\n-           (In_Tree           => In_Tree,\n-            Project           => Project,\n-            Extends_All       => Dummy,\n-            Path_Name         => Path_Name,\n-            Extended          => False,\n-            From_Extended     => None,\n-            In_Limited        => False,\n-            Packages_To_Check => Packages_To_Check,\n-            Depth             => 0,\n-            Current_Dir       => Current_Directory,\n-            Is_Config_File    => Is_Config_File,\n-            Flags             => Flags);\n+         begin\n+            Parse_Single_Project\n+              (In_Tree           => In_Tree,\n+               Project           => Project,\n+               Extends_All       => Dummy,\n+               Path_Name         => Path_Name,\n+               Extended          => False,\n+               From_Extended     => None,\n+               In_Limited        => False,\n+               Packages_To_Check => Packages_To_Check,\n+               Depth             => 0,\n+               Current_Dir       => Current_Directory,\n+               Is_Config_File    => Is_Config_File,\n+               Flags             => Flags);\n+\n+         exception\n+            when Types.Unrecoverable_Error =>\n+               --  Unrecoverable_Error is raised when a line is too long.\n+               --  A meaningful error message will be displayed later.\n+               Project := Empty_Node;\n+         end;\n \n          --  If Project is an extending-all project, create the eventual\n          --  virtual extending projects and check that there are no illegally"}, {"sha": "174811bb81a43986bea522283160de0cdb7d6637", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 12, "deletions": 20, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=0c0c6f49d575f70b8fbd64a5d033d65ee24f9ad2", "patch": "@@ -540,12 +540,9 @@ package body Sem_Ch12 is\n    --  initialized before call to Check_Generic_Child_Unit.\n \n    procedure Install_Formal_Packages (Par : Entity_Id);\n-   --  If any of the formals of the parent are formal packages with box,\n-   --  their formal parts are visible in the parent and thus in the child\n-   --  unit as well. Analogous to what is done in Check_Generic_Actuals\n-   --  for the unit itself. This procedure is also used in an instance, to\n-   --  make visible the proper entities of the actual for a formal package\n-   --  declared with a box.\n+   --  Install the visible part of any formal of the parent that is a formal\n+   --  package. Note that for the case of a formal package with a box, this\n+   --  includes the formal part of the formal package (12.7(10/2)).\n \n    procedure Install_Parent (P : Entity_Id; In_Body : Boolean := False);\n    --  When compiling an instance of a child unit the parent (which is\n@@ -5217,11 +5214,10 @@ package body Sem_Ch12 is\n \n                elsif In_Open_Scopes (Inst_Par) then\n \n-                  --  If the parent is already installed verify that the\n-                  --  actuals for its formal packages declared with a box\n-                  --  are already installed. This is necessary when the\n-                  --  child instance is a child of the parent instance.\n-                  --  In this case the parent is placed on the scope stack\n+                  --  If the parent is already installed, install the actuals\n+                  --  for its formal packages. This is necessary when the\n+                  --  child instance is a child of the parent instance:\n+                  --  in this case, the parent is placed on the scope stack\n                   --  but the formal packages are not made visible.\n \n                   Install_Formal_Packages (Inst_Par);\n@@ -7191,24 +7187,20 @@ package body Sem_Ch12 is\n             if Renamed_Object (E) = Par then\n                exit;\n \n-            --  The visibility of a formal of an enclosing generic is\n-            --  already correct.\n+            --  The visibility of a formal of an enclosing generic is already\n+            --  correct.\n \n             elsif Denotes_Formal_Package (E) then\n                null;\n \n-            elsif Present (Associated_Formal_Package (E))\n-              and then Box_Present (Parent (Associated_Formal_Package (E)))\n-            then\n+            elsif Present (Associated_Formal_Package (E)) then\n                Check_Generic_Actuals (Renamed_Object (E), True);\n                Set_Is_Hidden (E, False);\n \n                --  Find formal package in generic unit that corresponds to\n                --  (instance of) formal package in instance.\n \n-               while Present (Gen_E)\n-                 and then  Chars (Gen_E) /= Chars (E)\n-               loop\n+               while Present (Gen_E) and then Chars (Gen_E) /= Chars (E) loop\n                   Next_Entity (Gen_E);\n                end loop;\n \n@@ -8365,7 +8357,7 @@ package body Sem_Ch12 is\n                \"with volatile actual\", Actual);\n          end if;\n \n-      --  formal in-parameter\n+      --  Formal in-parameter\n \n       else\n          --  The instantiation of a generic formal in-parameter is constant"}]}