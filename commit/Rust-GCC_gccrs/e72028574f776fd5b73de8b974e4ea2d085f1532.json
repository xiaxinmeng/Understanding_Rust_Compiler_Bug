{"sha": "e72028574f776fd5b73de8b974e4ea2d085f1532", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTcyMDI4NTc0Zjc3NmZkNWI3M2RlOGI5NzRlNGVhMmQwODVmMTUzMg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-02-15T17:10:40Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-02-15T17:10:40Z"}, "message": "re PR c++/79301 (With -Werror=pedantic outside C++17 mode, __has_cpp_attribute(fallthrough) is nonzero but [[fallthrough]] fails)\n\n\tPR c++/79301\n\t* parser.c (cp_parser_std_attribute): Don't pedwarn about\n\t[[deprecated]] with -std=c++11 and [[fallthrough]] with\n\t-std=c++11 and -std=c++14.\n\n\t* g++.dg/cpp1y/feat-cxx11-neg.C: Remove (with pedwarn) from\n\t[[deprecated]] comment.\n\t* g++.dg/cpp1y/feat-cxx98-neg.C: Likewise.\n\t* g++.dg/cpp1y/feat-cxx11.C: Likewise.\n\t* g++.dg/cpp1y/attr-deprecated-neg.C: Don't expect warnings for\n\t[[deprecated]] in -std=c++11.\n\t* g++.dg/cpp0x/fallthrough2.C: Don't expect warnings for\n\t[[fallthrough]] in -std=c++11 and -std=c++14.\n\nFrom-SVN: r245489", "tree": {"sha": "741f2855ba78ee73ac193fa675fb1641b6262fa6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/741f2855ba78ee73ac193fa675fb1641b6262fa6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e72028574f776fd5b73de8b974e4ea2d085f1532", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e72028574f776fd5b73de8b974e4ea2d085f1532", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e72028574f776fd5b73de8b974e4ea2d085f1532", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e72028574f776fd5b73de8b974e4ea2d085f1532/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4f5e5fcba8a9cbabb0e05f9cb753b549396bc2de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f5e5fcba8a9cbabb0e05f9cb753b549396bc2de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f5e5fcba8a9cbabb0e05f9cb753b549396bc2de"}], "stats": {"total": 47, "additions": 25, "deletions": 22}, "files": [{"sha": "b281f0b0c70e4dea7d395fe0d2edd67baa2e8288", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e72028574f776fd5b73de8b974e4ea2d085f1532", "patch": "@@ -1,5 +1,10 @@\n 2017-02-15  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c++/79301\n+\t* parser.c (cp_parser_std_attribute): Don't pedwarn about\n+\t[[deprecated]] with -std=c++11 and [[fallthrough]] with\n+\t-std=c++11 and -std=c++14.\n+\n \tPR c++/79288\n \t* decl.c (grokdeclarator): For static data members, handle thread_p\n \tonly after handling inline."}, {"sha": "cd41ee6a3c3eb83befda197258864dcc7c9b7a89", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 2, "deletions": 14, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=e72028574f776fd5b73de8b974e4ea2d085f1532", "patch": "@@ -24749,22 +24749,10 @@ cp_parser_std_attribute (cp_parser *parser, tree attr_ns)\n \tTREE_PURPOSE (TREE_PURPOSE (attribute)) = get_identifier (\"gnu\");\n       /* C++14 deprecated attribute is equivalent to GNU's.  */\n       else if (is_attribute_p (\"deprecated\", attr_id))\n-\t{\n-\t  if (cxx_dialect == cxx11)\n-\t    pedwarn (token->location, OPT_Wpedantic,\n-\t\t     \"%<deprecated%> is a C++14 feature;\"\n-\t\t     \" use %<gnu::deprecated%>\");\n-\t  TREE_PURPOSE (TREE_PURPOSE (attribute)) = get_identifier (\"gnu\");\n-\t}\n+\tTREE_PURPOSE (TREE_PURPOSE (attribute)) = get_identifier (\"gnu\");\n       /* C++17 fallthrough attribute is equivalent to GNU's.  */\n       else if (is_attribute_p (\"fallthrough\", attr_id))\n-\t{\n-\t  if (cxx_dialect < cxx1z)\n-\t    pedwarn (token->location, OPT_Wpedantic,\n-\t\t     \"%<fallthrough%> is a C++17 feature;\"\n-\t\t     \" use %<gnu::fallthrough%>\");\n-\t  TREE_PURPOSE (TREE_PURPOSE (attribute)) = get_identifier (\"gnu\");\n-\t}\n+\tTREE_PURPOSE (TREE_PURPOSE (attribute)) = get_identifier (\"gnu\");\n       /* Transactional Memory TS optimize_for_synchronized attribute is\n \t equivalent to GNU transaction_callable.  */\n       else if (is_attribute_p (\"optimize_for_synchronized\", attr_id))"}, {"sha": "f749fb7dbc9785057f9fa6bfd4cffab4404fe3d5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e72028574f776fd5b73de8b974e4ea2d085f1532", "patch": "@@ -1,5 +1,15 @@\n 2017-02-15  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c++/79301\n+\t* g++.dg/cpp1y/feat-cxx11-neg.C: Remove (with pedwarn) from\n+\t[[deprecated]] comment.\n+\t* g++.dg/cpp1y/feat-cxx98-neg.C: Likewise.\n+\t* g++.dg/cpp1y/feat-cxx11.C: Likewise.\n+\t* g++.dg/cpp1y/attr-deprecated-neg.C: Don't expect warnings for\n+\t[[deprecated]] in -std=c++11.\n+\t* g++.dg/cpp0x/fallthrough2.C: Don't expect warnings for\n+\t[[fallthrough]] in -std=c++11 and -std=c++14.\n+\n \tPR c++/79288\n \t* g++.dg/tls/pr79288.C: New test.\n "}, {"sha": "f2d0ce1c6930dc1f913a9444ff2d33b828cb4560", "filename": "gcc/testsuite/g++.dg/cpp0x/fallthrough2.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Ffallthrough2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Ffallthrough2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Ffallthrough2.C?ref=e72028574f776fd5b73de8b974e4ea2d085f1532", "patch": "@@ -11,7 +11,7 @@ f (int i)\n     {\n     case 1:\n       bar (1);\n-      [[fallthrough]]; // { dg-warning \".fallthrough. is a C\\\\+\\\\+17 feature\" \"\" { target { c++14_down } }  }\n+      [[fallthrough]];\n     case 3:\n       bar (1);\n       [[gnu::fallthrough, gnu::fallthrough]]; // { dg-warning \".fallthrough. attribute specified multiple times\" }"}, {"sha": "3c5646c3993c4d1a36963805eea3b62bd4b3a40e", "filename": "gcc/testsuite/g++.dg/cpp1y/attr-deprecated-neg.C", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated-neg.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated-neg.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated-neg.C?ref=e72028574f776fd5b73de8b974e4ea2d085f1532", "patch": "@@ -1,22 +1,22 @@\n // { dg-do compile { target c++11_only } }\n // { dg-options \"-pedantic\" }\n \n-class [[deprecated]] A // { dg-warning \"'deprecated' is a C..14 feature\" }\n+class [[deprecated]] A // { dg-bogus \"'deprecated' is a C..14 feature\" }\n {\n };\n \n-[[deprecated]] // { dg-warning \"'deprecated' is a C..14 feature\" }\n+[[deprecated]] // { dg-bogus \"'deprecated' is a C..14 feature\" }\n int\n foo(int n)\n {\n   return 42 + n;\n }\n \n-class [[deprecated(\"B has been superceded by C\")]] B // { dg-warning \"'deprecated' is a C..14 feature\" }\n+class [[deprecated(\"B has been superceded by C\")]] B // { dg-bogus \"'deprecated' is a C..14 feature\" }\n {\n };\n \n-[[deprecated(\"bar is unsafe; use foobar instead\")]] // { dg-warning \"'deprecated' is a C..14 feature\" }\n+[[deprecated(\"bar is unsafe; use foobar instead\")]] // { dg-bogus \"'deprecated' is a C..14 feature\" }\n int\n bar(int n)\n {"}, {"sha": "8d68aaa2b835cb5b027608527da084808fb20291", "filename": "gcc/testsuite/g++.dg/cpp1y/feat-cxx11-neg.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx11-neg.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx11-neg.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx11-neg.C?ref=e72028574f776fd5b73de8b974e4ea2d085f1532", "patch": "@@ -57,7 +57,7 @@\n \n //  C++14 attributes:\n \n-//  Attribute [[deprecated]] is allowed in C++11 as an extension (with pedwarn).\n+//  Attribute [[deprecated]] is allowed in C++11 as an extension.\n //#ifdef __has_cpp_attribute\n //#  if __has_cpp_attribute(deprecated) == 201309\n //#    error \"__has_cpp_attribute(deprecated)\" // {  }"}, {"sha": "98112218d8ff0e7b29fa30db3b158d1ffd33741c", "filename": "gcc/testsuite/g++.dg/cpp1y/feat-cxx11.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx11.C?ref=e72028574f776fd5b73de8b974e4ea2d085f1532", "patch": "@@ -166,7 +166,7 @@\n \n //  C++14 attributes:\n \n-//  Attribute [[deprecated]] is allowed in C++11 as an extension (with pedwarn).\n+//  Attribute [[deprecated]] is allowed in C++11 as an extension.\n #ifdef __has_cpp_attribute\n #  if ! __has_cpp_attribute(deprecated)\n #    error \"__has_cpp_attribute(deprecated)\""}, {"sha": "d76a1e2617d2a2c500b565e45e9277c115a9dddd", "filename": "gcc/testsuite/g++.dg/cpp1y/feat-cxx98-neg.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx98-neg.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e72028574f776fd5b73de8b974e4ea2d085f1532/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx98-neg.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Ffeat-cxx98-neg.C?ref=e72028574f776fd5b73de8b974e4ea2d085f1532", "patch": "@@ -144,7 +144,7 @@\n \n //  C++14 attributes:\n \n-//  Attribute [[deprecated]] is allowed in C++11 as an extension (with pedwarn).\n+//  Attribute [[deprecated]] is allowed in C++11 as an extension.\n //#ifdef __has_cpp_attribute\n //#  if __has_cpp_attribute(deprecated) == 201309\n //#    error \"__has_cpp_attribute(deprecated)\" // {  }"}]}