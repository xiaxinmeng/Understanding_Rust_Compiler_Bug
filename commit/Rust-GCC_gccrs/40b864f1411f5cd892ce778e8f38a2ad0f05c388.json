{"sha": "40b864f1411f5cd892ce778e8f38a2ad0f05c388", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDBiODY0ZjE0MTFmNWNkODkyY2U3NzhlOGYzOGEyYWQwZjA1YzM4OA==", "commit": {"author": {"name": "Carl Love", "email": "cel@us.ibm.com", "date": "2018-02-26T18:13:56Z"}, "committer": {"name": "Carl Love", "email": "carll@gcc.gnu.org", "date": "2018-02-26T18:13:56Z"}, "message": "builtins-3.c: Move vec_neg builtin tests to Power 8 test file.\n\ngcc/testsuite/ChangeLog:\n\n2018-02-26  Carl Love  <cel@us.ibm.com>\n\t* gcc.target/powerpc/builtins-3.c: Move vec_neg builtin tests to\n\tPower 8 test file.\n\t* gcc.target/powerpc/builtins-3-p8.c: Add vec_neg builtin tests.\n\t* gcc.target/powerpc/fold-vec-neg-char.c(dg-options): Add -mcpu=power8.\n\t* gcc.target/powerpc/fold-vec-neg-floatdouble.c(dg-options): Add\n\t-mcpu=power8.\n\t* gcc.target/powerpc/fold-vec-neg-int.c(dg-options): Remove file.\n\t* gcc.target/powerpc/fold-vec-neg-short.c(dg-options): Add\n\t-mcpu=power8.\n\nFrom-SVN: r258006", "tree": {"sha": "c5db6b18ad37de920a65e981fb20d91a20f0adc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c5db6b18ad37de920a65e981fb20d91a20f0adc2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/40b864f1411f5cd892ce778e8f38a2ad0f05c388", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40b864f1411f5cd892ce778e8f38a2ad0f05c388", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40b864f1411f5cd892ce778e8f38a2ad0f05c388", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40b864f1411f5cd892ce778e8f38a2ad0f05c388/comments", "author": {"login": "carlelove", "id": 86435705, "node_id": "MDQ6VXNlcjg2NDM1NzA1", "avatar_url": "https://avatars.githubusercontent.com/u/86435705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlelove", "html_url": "https://github.com/carlelove", "followers_url": "https://api.github.com/users/carlelove/followers", "following_url": "https://api.github.com/users/carlelove/following{/other_user}", "gists_url": "https://api.github.com/users/carlelove/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlelove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlelove/subscriptions", "organizations_url": "https://api.github.com/users/carlelove/orgs", "repos_url": "https://api.github.com/users/carlelove/repos", "events_url": "https://api.github.com/users/carlelove/events{/privacy}", "received_events_url": "https://api.github.com/users/carlelove/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fc4358365865a18f842038e6b57dbd4f0b87709d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc4358365865a18f842038e6b57dbd4f0b87709d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc4358365865a18f842038e6b57dbd4f0b87709d"}], "stats": {"total": 117, "additions": 70, "deletions": 47}, "files": [{"sha": "ba25b2e19e4340fd03b376364b53ce06b4d31390", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=40b864f1411f5cd892ce778e8f38a2ad0f05c388", "patch": "@@ -1,3 +1,15 @@\n+2018-02-26  Carl Love  <cel@us.ibm.com>\n+\n+\t* gcc.target/powerpc/builtins-3.c: Move vec_neg builtin tests to\n+\tPower 8 test file.\n+\t* gcc.target/powerpc/builtins-3-p8.c: Add vec_neg builtin tests.\n+\t* gcc.target/powerpc/fold-vec-neg-char.c(dg-options): Add -mcpu=power8.\n+\t* gcc.target/powerpc/fold-vec-neg-floatdouble.c(dg-options): Add\n+\t-mcpu=power8.\n+\t* gcc.target/powerpc/fold-vec-neg-int.c(dg-options): Remove file.\n+\t* gcc.target/powerpc/fold-vec-neg-short.c(dg-options): Add\n+\t-mcpu=power8.\n+\n 2018-02-26  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/84039"}, {"sha": "f7f31073e83d8896b71740ccda1222b30c03188b", "filename": "gcc/testsuite/gcc.target/powerpc/builtins-3-p8.c", "status": "modified", "additions": 43, "deletions": 0, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3-p8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3-p8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3-p8.c?ref=40b864f1411f5cd892ce778e8f38a2ad0f05c388", "patch": "@@ -180,6 +180,37 @@ test_vull_mulo_vui_vui (vector unsigned int x, vector unsigned int y)\n \treturn vec_mulo (x, y);\n }\n \n+vector signed char\n+test_neg_char (vector signed char x)\n+{\n+\treturn vec_neg (x);\n+}\n+\n+vector short\n+test_neg_short (vector short x)\n+{\n+\treturn vec_neg (x);\n+}\n+\n+vector int\n+test_neg_int (vector int x)\n+{\n+\treturn vec_neg (x);\n+}\n+\n+vector float\n+test_neg_float (vector float x)\n+{\n+\treturn vec_neg (x);\n+}\n+\n+vector double\n+test_neg_double (vector double x)\n+{\n+\treturn vec_neg (x);\n+}\n+\n+\n /* Expected test results:\n \n      test_eq_long_long                         1 vcmpequd inst\n@@ -200,6 +231,11 @@ test_vull_mulo_vui_vui (vector unsigned int x, vector unsigned int y)\n      test_vull_mulo_vui_vui                    1 vmulouw\n      test_vsll_mule_vsi_vsi                    1 vmulesw\n      test_vull_mule_vui_vui                    1 vmuleuw\n+     test_neg_char                             1 vspltisw, 1 vsububm\n+     test_neg_short                            1 vspltisw, 1 vsubuhm\n+     test_neg_int                              1 vspltisw, 1 vsubuwm\n+     test_neg_float                            1 xvnegsp\n+     test_neg_float                            1 xvnegdp\n  */\n \n /* { dg-final { scan-assembler-times \"vcmpequd\" 1 } } */\n@@ -220,3 +256,10 @@ test_vull_mulo_vui_vui (vector unsigned int x, vector unsigned int y)\n /* { dg-final { scan-assembler-times \"vmulouw\"  1 } } */\n /* { dg-final { scan-assembler-times \"vmulesw\"  1 } } */\n /* { dg-final { scan-assembler-times \"vmuleuw\"  1 } } */\n+/* { dg-final { scan-assembler-times \"vspltisw\" 3 } } */\n+/* { dg-final { scan-assembler-times \"vsububm\"  1 } } */\n+/* { dg-final { scan-assembler-times \"vsubuhm\"  1 } } */\n+/* { dg-final { scan-assembler-times \"vsubuwm\"  1 } } */\n+/* { dg-final { scan-assembler-times \"xvnegsp\"  1 } } */\n+/* { dg-final { scan-assembler-times \"xvnegdp\"  1 } } */\n+"}, {"sha": "0288b80773ca28bf85c9d6e8f51853d5acc7c5ca", "filename": "gcc/testsuite/gcc.target/powerpc/builtins-3.c", "status": "modified", "additions": 4, "deletions": 41, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-3.c?ref=40b864f1411f5cd892ce778e8f38a2ad0f05c388", "patch": "@@ -59,36 +59,6 @@ test_nabs_double (vector double x)\n \treturn vec_nabs (x);\n }\n \n-vector signed char\n-test_neg_char (vector signed char x)\n-{\n-\treturn vec_neg (x);\n-}\n-\n-vector short\n-test_neg_short (vector short x)\n-{\n-\treturn vec_neg (x);\n-}\n-\n-vector int\n-test_neg_int (vector int x)\n-{\n-\treturn vec_neg (x);\n-}\n-\n-vector float\n-test_neg_float (vector float x)\n-{\n-\treturn vec_neg (x);\n-}\n-\n-vector double\n-test_neg_double (vector double x)\n-{\n-\treturn vec_neg (x);\n-}\n-\n vector signed char\n test_sll_vsc_vsc_vsuc (vector signed char x, vector unsigned char y)\n {\n@@ -340,11 +310,6 @@ test_cmpb_float (vector float x, vector float y)\n      test_nabs_int             1 vspltisw, 1 vsubuwm, 1 vminsw\n      test_nabs_float           1 xvnabssp\n      test_nabs_double          1 xvnabsdp\n-     test_neg_char             1 vspltisw, 1 vsububm\n-     test_neg_short            1 vspltisw, 1 vsubuhm\n-     test_neg_int              1 vspltisw, 1 vsubuwm\n-     test_neg_float            1 xvnegsp\n-     test_neg_float            1 xvnegdp\n      test_vsll_slo_vsll_vsc    1 vslo\n      test_vsll_slo_vsll_vuc    1 vslo\n      test_vull_slo_vsll_vsc    1 vslo\n@@ -363,17 +328,15 @@ test_cmpb_float (vector float x, vector float y)\n /* { dg-final { scan-assembler-times \"vcmpequh\" 1 } } */\n /* { dg-final { scan-assembler-times \"vcmpequw\" 1 } } */\n /* { dg-final { scan-assembler-times \"vsldoi\"   1 } } */\n-/* { dg-final { scan-assembler-times \"vsububm\"  2 } } */\n-/* { dg-final { scan-assembler-times \"vsubuhm\"  2 } } */\n-/* { dg-final { scan-assembler-times \"vsubuwm\"  2 } } */\n+/* { dg-final { scan-assembler-times \"vsububm\"  1 } } */\n+/* { dg-final { scan-assembler-times \"vsubuhm\"  1 } } */\n+/* { dg-final { scan-assembler-times \"vsubuwm\"  1 } } */\n /* { dg-final { scan-assembler-times \"vminsb\"   1 } } */\n /* { dg-final { scan-assembler-times \"vminsh\"   1 } } */\n /* { dg-final { scan-assembler-times \"vminsw\"   1 } } */\n-/* { dg-final { scan-assembler-times \"vspltisw\" 6 } } */\n+/* { dg-final { scan-assembler-times \"vspltisw\" 3 } } */\n /* { dg-final { scan-assembler-times \"xvnabssp\" 1 } } */\n /* { dg-final { scan-assembler-times \"xvnabsdp\" 1 } } */\n-/* { dg-final { scan-assembler-times \"xvnegsp\"  1 } } */\n-/* { dg-final { scan-assembler-times \"xvnegdp\"  1 } } */\n /* { dg-final { scan-assembler-times \"vslo\"    20 } } */\n /* { dg-final { scan-assembler-times \"xxsldwi\"  8 } } */\n /* { dg-final { scan-assembler-times \"vcmpbfp\"  1 } } */"}, {"sha": "a1ef0e7e717cdb96cfff521dd0bd6ddec3461c37", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-neg-char.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-neg-char.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-neg-char.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-neg-char.c?ref=40b864f1411f5cd892ce778e8f38a2ad0f05c388", "patch": "@@ -2,8 +2,9 @@\n    inputs produce the right code.  */\n \n /* { dg-do compile } */\n-/* { dg-require-effective-target powerpc_altivec_ok } */\n-/* { dg-options \"-maltivec -O2\" } */\n+/* { dg-require-effective-target powerpc_p8vector_ok } */\n+/* { dg-options \"-mvsx -O2 -mcpu=power8\" } */\n+/* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power8\" } } */\n \n #include <altivec.h>\n "}, {"sha": "af09ce6575e032271f045d8f9c633c462cc12e47", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-neg-floatdouble.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-neg-floatdouble.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-neg-floatdouble.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-neg-floatdouble.c?ref=40b864f1411f5cd892ce778e8f38a2ad0f05c388", "patch": "@@ -2,8 +2,10 @@\n    double inputs for VSX produce the right code.  */\n \n /* { dg-do compile } */\n-/* { dg-require-effective-target powerpc_vsx_ok } */\n-/* { dg-options \"-mvsx -O2\" } */\n+/* { dg-require-effective-target powerpc_p8vector_ok } */\n+/* { dg-options \"-mvsx -O2 -mcpu=power8\" } */\n+/* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power8\" } } */\n+\n \n #include <altivec.h>\n "}, {"sha": "404c1605a651f27b618541348b1ef8a8d9b4e9de", "filename": "gcc/testsuite/gcc.target/powerpc/fold-vec-neg-short.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-neg-short.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40b864f1411f5cd892ce778e8f38a2ad0f05c388/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-neg-short.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Ffold-vec-neg-short.c?ref=40b864f1411f5cd892ce778e8f38a2ad0f05c388", "patch": "@@ -2,8 +2,10 @@\n    inputs produce the right code.  */\n \n /* { dg-do compile } */\n-/* { dg-require-effective-target powerpc_altivec_ok } */\n-/* { dg-options \"-maltivec -O2\" } */\n+/* { dg-require-effective-target powerpc_p8vector_ok } */\n+/* { dg-options \"-mvsx -O2 -mcpu=power8\" } */\n+/* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power8\" } } */\n+\n \n #include <altivec.h>\n "}]}