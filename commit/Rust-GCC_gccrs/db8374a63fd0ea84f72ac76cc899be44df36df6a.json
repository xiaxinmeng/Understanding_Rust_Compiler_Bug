{"sha": "db8374a63fd0ea84f72ac76cc899be44df36df6a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGI4Mzc0YTYzZmQwZWE4NGY3MmFjNzZjYzg5OWJlNDRkZjM2ZGY2YQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2019-10-21T06:41:15Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2019-10-21T06:41:15Z"}, "message": "Pass a vec_info to supportable_narrowing_operation\n\n2019-10-21  Richard Sandiford  <richard.sandiford@arm.com>\n\ngcc/\n\t* tree-vectorizer.h (supportable_narrowing_operation): Take a vec_info.\n\t* tree-vect-stmts.c (supportable_narrowing_operation): Likewise.\n\t(simple_integer_narrowing): Update call accordingly.\n\t(vectorizable_conversion): Likewise.\n\nFrom-SVN: r277231", "tree": {"sha": "087b69e9dada6d34ac381e187dac95c166c0a69b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/087b69e9dada6d34ac381e187dac95c166c0a69b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db8374a63fd0ea84f72ac76cc899be44df36df6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db8374a63fd0ea84f72ac76cc899be44df36df6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db8374a63fd0ea84f72ac76cc899be44df36df6a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db8374a63fd0ea84f72ac76cc899be44df36df6a/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6c261c667801eee46a6221d3681d17493c0bbd65", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c261c667801eee46a6221d3681d17493c0bbd65", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c261c667801eee46a6221d3681d17493c0bbd65"}], "stats": {"total": 27, "additions": 17, "deletions": 10}, "files": [{"sha": "d5b25ce94647c828798e64717323d4ccd9830f0a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db8374a63fd0ea84f72ac76cc899be44df36df6a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db8374a63fd0ea84f72ac76cc899be44df36df6a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=db8374a63fd0ea84f72ac76cc899be44df36df6a", "patch": "@@ -1,3 +1,10 @@\n+2019-10-21  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* tree-vectorizer.h (supportable_narrowing_operation): Take a vec_info.\n+\t* tree-vect-stmts.c (supportable_narrowing_operation): Likewise.\n+\t(simple_integer_narrowing): Update call accordingly.\n+\t(vectorizable_conversion): Likewise.\n+\n 2019-10-21  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* tree-vect-stmts.c (simple_integer_narrowing): Take a vec_info."}, {"sha": "92c31ab93a327e22c872e8a49f10f87cdc064dad", "filename": "gcc/tree-vect-stmts.c", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db8374a63fd0ea84f72ac76cc899be44df36df6a/gcc%2Ftree-vect-stmts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db8374a63fd0ea84f72ac76cc899be44df36df6a/gcc%2Ftree-vect-stmts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-stmts.c?ref=db8374a63fd0ea84f72ac76cc899be44df36df6a", "patch": "@@ -3175,7 +3175,7 @@ vectorizable_bswap (stmt_vec_info stmt_info, gimple_stmt_iterator *gsi,\n    *CONVERT_CODE.  */\n \n static bool\n-simple_integer_narrowing (vec_info *, tree vectype_out, tree vectype_in,\n+simple_integer_narrowing (vec_info *vinfo, tree vectype_out, tree vectype_in,\n \t\t\t  tree_code *convert_code)\n {\n   if (!INTEGRAL_TYPE_P (TREE_TYPE (vectype_out))\n@@ -3185,8 +3185,8 @@ simple_integer_narrowing (vec_info *, tree vectype_out, tree vectype_in,\n   tree_code code;\n   int multi_step_cvt = 0;\n   auto_vec <tree, 8> interm_types;\n-  if (!supportable_narrowing_operation (NOP_EXPR, vectype_out, vectype_in,\n-\t\t\t\t\t&code, &multi_step_cvt,\n+  if (!supportable_narrowing_operation (vinfo, NOP_EXPR, vectype_out,\n+\t\t\t\t\tvectype_in, &code, &multi_step_cvt,\n \t\t\t\t\t&interm_types)\n       || multi_step_cvt)\n     return false;\n@@ -4957,8 +4957,8 @@ vectorizable_conversion (stmt_vec_info stmt_info, gimple_stmt_iterator *gsi,\n \n     case NARROW:\n       gcc_assert (op_type == unary_op);\n-      if (supportable_narrowing_operation (code, vectype_out, vectype_in,\n-\t\t\t\t\t   &code1, &multi_step_cvt,\n+      if (supportable_narrowing_operation (vinfo, code, vectype_out,\n+\t\t\t\t\t   vectype_in, &code1, &multi_step_cvt,\n \t\t\t\t\t   &interm_types))\n \tbreak;\n \n@@ -4974,8 +4974,8 @@ vectorizable_conversion (stmt_vec_info stmt_info, gimple_stmt_iterator *gsi,\n       if (!supportable_convert_operation (code, cvt_type, vectype_in,\n \t\t\t\t\t  &decl1, &codecvt1))\n \tgoto unsupported;\n-      if (supportable_narrowing_operation (NOP_EXPR, vectype_out, cvt_type,\n-\t\t\t\t\t   &code1, &multi_step_cvt,\n+      if (supportable_narrowing_operation (vinfo, NOP_EXPR, vectype_out,\n+\t\t\t\t\t   cvt_type, &code1, &multi_step_cvt,\n \t\t\t\t\t   &interm_types))\n \tbreak;\n       goto unsupported;\n@@ -11649,7 +11649,7 @@ supportable_widening_operation (enum tree_code code, stmt_vec_info stmt_info,\n    narrowing operation (short in the above example).   */\n \n bool\n-supportable_narrowing_operation (enum tree_code code,\n+supportable_narrowing_operation (vec_info *, enum tree_code code,\n \t\t\t\t tree vectype_out, tree vectype_in,\n \t\t\t\t enum tree_code *code1, int *multi_step_cvt,\n                                  vec<tree> *interm_types)"}, {"sha": "71b1da5b1eeab38b41dbd651766353bd7d933ea9", "filename": "gcc/tree-vectorizer.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db8374a63fd0ea84f72ac76cc899be44df36df6a/gcc%2Ftree-vectorizer.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db8374a63fd0ea84f72ac76cc899be44df36df6a/gcc%2Ftree-vectorizer.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vectorizer.h?ref=db8374a63fd0ea84f72ac76cc899be44df36df6a", "patch": "@@ -1603,8 +1603,8 @@ extern bool supportable_widening_operation (enum tree_code, stmt_vec_info,\n \t\t\t\t\t    tree, tree, enum tree_code *,\n \t\t\t\t\t    enum tree_code *, int *,\n \t\t\t\t\t    vec<tree> *);\n-extern bool supportable_narrowing_operation (enum tree_code, tree, tree,\n-\t\t\t\t\t     enum tree_code *,\n+extern bool supportable_narrowing_operation (vec_info *, enum tree_code, tree,\n+\t\t\t\t\t     tree, enum tree_code *,\n \t\t\t\t\t     int *, vec<tree> *);\n extern unsigned record_stmt_cost (stmt_vector_for_cost *, int,\n \t\t\t\t  enum vect_cost_for_stmt, stmt_vec_info,"}]}