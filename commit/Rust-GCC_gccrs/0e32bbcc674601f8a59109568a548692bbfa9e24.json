{"sha": "0e32bbcc674601f8a59109568a548692bbfa9e24", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGUzMmJiY2M2NzQ2MDFmOGE1OTEwOTU2OGE1NDg2OTJiYmZhOWUyNA==", "commit": {"author": {"name": "Daniel Jacobowitz", "email": "dan@codesourcery.com", "date": "2005-11-16T22:09:52Z"}, "committer": {"name": "Daniel Jacobowitz", "email": "drow@gcc.gnu.org", "date": "2005-11-16T22:09:52Z"}, "message": "* unwind-sjlj.c (_Unwind_GetCFA): Handle the builtin_setjmp case.\n\nFrom-SVN: r107102", "tree": {"sha": "9b560384f7981dc682a54d1711274eb0c0f4631f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b560384f7981dc682a54d1711274eb0c0f4631f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e32bbcc674601f8a59109568a548692bbfa9e24", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e32bbcc674601f8a59109568a548692bbfa9e24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e32bbcc674601f8a59109568a548692bbfa9e24", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e32bbcc674601f8a59109568a548692bbfa9e24/comments", "author": null, "committer": null, "parents": [{"sha": "6276e725b276838be6383f941bec392e182d63b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6276e725b276838be6383f941bec392e182d63b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6276e725b276838be6383f941bec392e182d63b0"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "9f35e986e385b8b4d681b0c7651a40f16280b117", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e32bbcc674601f8a59109568a548692bbfa9e24/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e32bbcc674601f8a59109568a548692bbfa9e24/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0e32bbcc674601f8a59109568a548692bbfa9e24", "patch": "@@ -1,3 +1,7 @@\n+2005-11-16  Daniel Jacobowitz  <dan@codesourcery.com>\n+\n+\t* unwind-sjlj.c (_Unwind_GetCFA): Handle the builtin_setjmp case.\n+\n 2005-11-16  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* config/alpha/alpha.c (alpha_init_builtins): Use type_for_mode"}, {"sha": "9ea6d06c9a75c17bcb3d43ec3f4508d2d2213005", "filename": "gcc/unwind-sjlj.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e32bbcc674601f8a59109568a548692bbfa9e24/gcc%2Funwind-sjlj.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e32bbcc674601f8a59109568a548692bbfa9e24/gcc%2Funwind-sjlj.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funwind-sjlj.c?ref=0e32bbcc674601f8a59109568a548692bbfa9e24", "patch": "@@ -185,6 +185,18 @@ _Unwind_Word\n _Unwind_GetCFA (struct _Unwind_Context *context __attribute__((unused)))\n {\n   /* ??? Ideally __builtin_setjmp places the CFA in the jmpbuf.  */\n+\n+#ifndef DONT_USE_BUILTIN_SETJMP\n+  /* This is a crude imitation of the CFA: the saved stack pointer.\n+     This is roughly the CFA of the frame before CONTEXT.  When using the\n+     DWARF-2 unwinder _Unwind_GetCFA returns the CFA of the frame described\n+     by CONTEXT instead; but for DWARF-2 the cleanups associated with\n+     CONTEXT have already been run, and for SJLJ they have not yet been.  */\n+  if (context->fc != NULL)\n+    return (_Unwind_Word) context->fc->jbuf[2];\n+#endif\n+\n+  /* Otherwise we're out of luck for now.  */\n   return (_Unwind_Word) 0;\n }\n "}]}