{"sha": "811232fe06c205ffaab2f41c8701d974947ac05d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODExMjMyZmUwNmMyMDVmZmFhYjJmNDFjODcwMWQ5NzQ5NDdhYzA1ZA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2009-11-11T20:57:20Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2009-11-11T20:57:20Z"}, "message": "(patch by Richard Guenther)\n\n\n\t(patch by Richard Guenther)\n\t* lto-streamer-out.c (output_function): Output head of argument list\n\tearlier.\n\t* lto-streamer-in.c (input_function): Re-map arguments into merged\n\tdeclaration.\n\nFrom-SVN: r154105", "tree": {"sha": "008149a3f7f77ef2ec3b2c71d9baf2eebe63aa85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/008149a3f7f77ef2ec3b2c71d9baf2eebe63aa85"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/811232fe06c205ffaab2f41c8701d974947ac05d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/811232fe06c205ffaab2f41c8701d974947ac05d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/811232fe06c205ffaab2f41c8701d974947ac05d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/811232fe06c205ffaab2f41c8701d974947ac05d/comments", "author": null, "committer": null, "parents": [{"sha": "5fae76b1004f5f6d195b000d5866703a4d2faf91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5fae76b1004f5f6d195b000d5866703a4d2faf91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5fae76b1004f5f6d195b000d5866703a4d2faf91"}], "stats": {"total": 34, "additions": 28, "deletions": 6}, "files": [{"sha": "3e4d5bed3655a6f79f3657310bea15840c254136", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/811232fe06c205ffaab2f41c8701d974947ac05d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/811232fe06c205ffaab2f41c8701d974947ac05d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=811232fe06c205ffaab2f41c8701d974947ac05d", "patch": "@@ -1,3 +1,11 @@\n+2009-11-11  Jan Hubicka  <jh@suse.cz>\n+\n+\t(patch by Richard Guenther)\n+\t* lto-streamer-out.c (output_function): Output head of argument list\n+\tearlier.\n+\t* lto-streamer-in.c (input_function): Re-map arguments into merged\n+\tdeclaration.\n+\n 2009-11-11  Jan Hubicka  <jh@suse.cz>\n \n \t* lto-cgraph.c: Include gcov-io.h"}, {"sha": "59784a42f6358bfd96ef9c37c3ca402868b6e9af", "filename": "gcc/lto-streamer-in.c", "status": "modified", "additions": 17, "deletions": 3, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/811232fe06c205ffaab2f41c8701d974947ac05d/gcc%2Flto-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/811232fe06c205ffaab2f41c8701d974947ac05d/gcc%2Flto-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-in.c?ref=811232fe06c205ffaab2f41c8701d974947ac05d", "patch": "@@ -1262,6 +1262,7 @@ input_function (tree fn_decl, struct data_in *data_in,\n   basic_block bb;\n   struct bitpack_d *bp;\n   struct cgraph_node *node;\n+  tree args, narg, oarg;\n \n   fn = DECL_STRUCT_FUNCTION (fn_decl);\n   tag = input_record_start (ib);\n@@ -1296,6 +1297,22 @@ input_function (tree fn_decl, struct data_in *data_in,\n   /* Read all the local symbols.  */\n   fn->local_decls = lto_input_tree (ib, data_in);\n \n+  /* Read all function arguments.  We need to re-map them here to the\n+     arguments of the merged function declaration.  */\n+  args = lto_input_tree (ib, data_in); \n+  for (oarg = args, narg = DECL_ARGUMENTS (fn_decl);\n+       oarg && narg;\n+       oarg = TREE_CHAIN (oarg), narg = TREE_CHAIN (narg))\n+    {\n+      int ix;\n+      bool res;\n+      res = lto_streamer_cache_lookup (data_in->reader_cache, oarg, &ix);\n+      gcc_assert (res);\n+      /* Replace the argument in the streamer cache.  */\n+      lto_streamer_cache_insert_at (data_in->reader_cache, narg, ix);\n+    }\n+  gcc_assert (!oarg && !narg);\n+\n   /* Read all the SSA names.  */\n   input_ssa_names (ib, data_in, fn);\n \n@@ -1307,9 +1324,6 @@ input_function (tree fn_decl, struct data_in *data_in,\n   gcc_assert (DECL_INITIAL (fn_decl));\n   DECL_SAVED_TREE (fn_decl) = NULL_TREE;\n \n-  /* Read all function arguments.  */\n-  DECL_ARGUMENTS (fn_decl) = lto_input_tree (ib, data_in); \n-\n   /* Read all the basic blocks.  */\n   tag = input_record_start (ib);\n   while (tag)"}, {"sha": "1c5f910393423773a3a3cdcc85917f8f4d25a3af", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/811232fe06c205ffaab2f41c8701d974947ac05d/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/811232fe06c205ffaab2f41c8701d974947ac05d/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=811232fe06c205ffaab2f41c8701d974947ac05d", "patch": "@@ -1870,6 +1870,9 @@ output_function (struct cgraph_node *node)\n   /* Output all the local variables in the function.  */\n   lto_output_tree_ref (ob, fn->local_decls);\n \n+  /* Output the head of the arguments list.  */\n+  lto_output_tree_ref (ob, DECL_ARGUMENTS (function));\n+\n   /* Output all the SSA names used in the function.  */\n   output_ssa_names (ob, fn);\n \n@@ -1880,9 +1883,6 @@ output_function (struct cgraph_node *node)\n      lexical scopes.  */\n   lto_output_tree (ob, DECL_INITIAL (function), true);\n \n-  /* Output the head of the arguments list.  */\n-  lto_output_tree_ref (ob, DECL_ARGUMENTS (function));\n-\n   /* We will renumber the statements.  The code that does this uses\n      the same ordering that we use for serializing them so we can use\n      the same code on the other end and not have to write out the"}]}