{"sha": "b49a1a1e0fef509deb7d91ef348ad3793478f471", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjQ5YTFhMWUwZmVmNTA5ZGViN2Q5MWVmMzQ4YWQzNzkzNDc4ZjQ3MQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2008-03-07T18:41:01Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2008-03-07T18:41:01Z"}, "message": "decl.c (gnat_to_gnu_entity): Add comment for the packed array type case.\n\n\t* decl.c (gnat_to_gnu_entity) <E_Modular_Integer_Subtype>: Add\n\tcomment for the packed array type case.\n\t* utils.c (build_template): Use a loop to strip padding or\n\tcontaining records for justified modular types.\n\nFrom-SVN: r133014", "tree": {"sha": "01383e32c69120abe8445d35e65f328e6c8bdf0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/01383e32c69120abe8445d35e65f328e6c8bdf0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b49a1a1e0fef509deb7d91ef348ad3793478f471", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b49a1a1e0fef509deb7d91ef348ad3793478f471", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b49a1a1e0fef509deb7d91ef348ad3793478f471", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b49a1a1e0fef509deb7d91ef348ad3793478f471/comments", "author": null, "committer": null, "parents": [{"sha": "38516a1ab66ecdd05a12bfaad2eb05736a36e1c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38516a1ab66ecdd05a12bfaad2eb05736a36e1c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38516a1ab66ecdd05a12bfaad2eb05736a36e1c0"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "5632ddfc694ee398f6083ca1a8b4368326962c70", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b49a1a1e0fef509deb7d91ef348ad3793478f471/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b49a1a1e0fef509deb7d91ef348ad3793478f471/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=b49a1a1e0fef509deb7d91ef348ad3793478f471", "patch": "@@ -1,3 +1,10 @@\n+2008-03-07  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* decl.c (gnat_to_gnu_entity) <E_Modular_Integer_Subtype>: Add\n+\tcomment for the packed array type case.\n+\t* utils.c (build_template): Use a loop to strip padding or\n+\tcontaining records for justified modular types.\n+\n 2008-03-07  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* decl.c (gnat_to_gnu_entity): Issue a warning on suspiciously"}, {"sha": "c1d02ec5d5eea23f56ffceb5eb7a6ed6198439d8", "filename": "gcc/ada/decl.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b49a1a1e0fef509deb7d91ef348ad3793478f471/gcc%2Fada%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b49a1a1e0fef509deb7d91ef348ad3793478f471/gcc%2Fada%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fdecl.c?ref=b49a1a1e0fef509deb7d91ef348ad3793478f471", "patch": "@@ -1493,6 +1493,11 @@ gnat_to_gnu_entity (Entity_Id gnat_entity, tree gnu_expr, int definition)\n \t    = UI_To_gnu (RM_Size (gnat_entity), bitsizetype);\n \t  gnu_type = make_node (RECORD_TYPE);\n \t  TYPE_NAME (gnu_type) = create_concat_name (gnat_entity, \"JM\");\n+\n+\t  /* Propagate the alignment of the modular type to the record.\n+\t     This means that bitpacked arrays have \"ceil\" alignment for\n+\t     their size, which may seem counter-intuitive but makes it\n+\t     possible to easily overlay them on modular types.  */\n \t  TYPE_ALIGN (gnu_type) = TYPE_ALIGN (gnu_field_type);\n \t  TYPE_USER_ALIGN (gnu_type) = TYPE_USER_ALIGN (gnu_field_type);\n \t  TYPE_PACKED (gnu_type) = 1;"}, {"sha": "46ce865bdb4a6e5915e3a75fbd62e0ab9507622d", "filename": "gcc/ada/utils.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b49a1a1e0fef509deb7d91ef348ad3793478f471/gcc%2Fada%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b49a1a1e0fef509deb7d91ef348ad3793478f471/gcc%2Fada%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Futils.c?ref=b49a1a1e0fef509deb7d91ef348ad3793478f471", "patch": "@@ -2486,9 +2486,9 @@ build_template (tree template_type, tree array_type, tree expr)\n   tree bound_list = NULL_TREE;\n   tree field;\n \n-  if (TREE_CODE (array_type) == RECORD_TYPE\n-      && (TYPE_IS_PADDING_P (array_type)\n-\t  || TYPE_JUSTIFIED_MODULAR_P (array_type)))\n+  while (TREE_CODE (array_type) == RECORD_TYPE\n+\t && (TYPE_IS_PADDING_P (array_type)\n+\t     || TYPE_JUSTIFIED_MODULAR_P (array_type)))\n     array_type = TREE_TYPE (TYPE_FIELDS (array_type));\n \n   if (TREE_CODE (array_type) == ARRAY_TYPE"}]}