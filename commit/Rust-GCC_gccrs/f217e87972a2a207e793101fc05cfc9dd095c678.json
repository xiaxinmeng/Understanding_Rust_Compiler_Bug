{"sha": "f217e87972a2a207e793101fc05cfc9dd095c678", "node_id": "C_kwDOANBUbNoAKGYyMTdlODc5NzJhMmEyMDdlNzkzMTAxZmMwNWNmYzlkZDA5NWM2Nzg", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2021-10-25T13:22:06Z"}, "committer": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2021-10-25T13:26:39Z"}, "message": "sra: Fix the fix for PR 102505 (PR 102886)\n\nI was not careful with the fix for PR 102505 and did not craft the\ncheck to satisfy the verifier carefully, which lead to PR 102886.\n(The verifier has the test structured differently and somewhat\nredundantly, so I could not just copy it).\n\nThis patch fixes it.  I hope it is quite obvious correction of an\noversight and so will commit it if survives bootstrap and testing on\nx86_64-linux and ppc64le-linux.\n\nTestcase for this bug is gcc.dg/tree-ssa/sra-18.c (but only on\nplatforms with constant pools).  I will backport the two fixes\nto the release branches squashed.\n\ngcc/ChangeLog:\n\n2021-10-22  Martin Jambor  <mjambor@suse.cz>\n\n\tPR tree-optimization/102886\n\t* tree-sra.c (totally_scalarize_subtree): Fix the out of\n\taccess-condition.", "tree": {"sha": "3933cabec5e41954faf44aacaaaa95c508c2ea12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3933cabec5e41954faf44aacaaaa95c508c2ea12"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f217e87972a2a207e793101fc05cfc9dd095c678", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE5elVTFt/d09Vsoczv2PBvD+kNUAFAmF2sI8ACgkQv2PBvD+k\nNUCiOA//TOaVvHpXrkwsuwKdl2jF2IZFE3EhWrSA8dJYHc8UDfxf4TDRYobiCLaa\nN3GAwthVf2xaXD6ervMZF90BpuaEL/KiZl2Q/cjWYTuHZ2sfjZ6MZIhkD5V04SZu\nC0Adp6+m/hGIB4dHchj1UJAxg+Uxqdk4PUlifaabYS7FKDOpr7lK/UEBnMRAKDMo\nw7bvMUl6+pfdlzn0G0WIaZgl6iCSM/fDxt6MLgv4eH9TcyIYSePT/CO8fzVP6mUO\n412B8+7QOaJ5tLsicA0OMw9mja6Xu88oCvdg2JRk60k985/m/34SOVviU6vTfTIw\no2Fh79h+WyD+Qk4yriDvzrLwd05ozoNSGYtPv0XB+Jn+C8Pf2SPGaDftgjLTz4V+\niQhX6e0lDitQHmWyDyFhPI+xAkeBZZN8gv3pQaSNeFw7BCRQ1BzIEsa5vmuCGnmx\nPD52EqFUaZQ0tzRLo6SKFZCEtKq9bv38kuI9evLz4ie3e1QV0Y9p1A7eXmtsv08E\nje4W0tIvWDO4vVNVTjuxFKj/HN9en8l+h4vmXjTdtCKLy3uMn1JGylZ0Mo42VPjd\nz1M21BS+x4E/MvsN1zuQqZAW0qJnVbN5L/nWaypgp8GUaf77g9xyBENyi89Qoipf\nHK4P6gDHaqEg+sTIN9uHlgKjWDlCgRt17F0Y5ZIAaLrd8taTPvc=\n=O7mE\n-----END PGP SIGNATURE-----", "payload": "tree 3933cabec5e41954faf44aacaaaa95c508c2ea12\nparent 7518e4c2f0758daac5d650d400565cf49ac3c8c5\nauthor Martin Jambor <mjambor@suse.cz> 1635168126 +0200\ncommitter Martin Jambor <mjambor@suse.cz> 1635168399 +0200\n\nsra: Fix the fix for PR 102505 (PR 102886)\n\nI was not careful with the fix for PR 102505 and did not craft the\ncheck to satisfy the verifier carefully, which lead to PR 102886.\n(The verifier has the test structured differently and somewhat\nredundantly, so I could not just copy it).\n\nThis patch fixes it.  I hope it is quite obvious correction of an\noversight and so will commit it if survives bootstrap and testing on\nx86_64-linux and ppc64le-linux.\n\nTestcase for this bug is gcc.dg/tree-ssa/sra-18.c (but only on\nplatforms with constant pools).  I will backport the two fixes\nto the release branches squashed.\n\ngcc/ChangeLog:\n\n2021-10-22  Martin Jambor  <mjambor@suse.cz>\n\n\tPR tree-optimization/102886\n\t* tree-sra.c (totally_scalarize_subtree): Fix the out of\n\taccess-condition.\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f217e87972a2a207e793101fc05cfc9dd095c678", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f217e87972a2a207e793101fc05cfc9dd095c678", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f217e87972a2a207e793101fc05cfc9dd095c678/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7518e4c2f0758daac5d650d400565cf49ac3c8c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7518e4c2f0758daac5d650d400565cf49ac3c8c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7518e4c2f0758daac5d650d400565cf49ac3c8c5"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "76e3aae405c1304c37c42dec79c847311f6f7604", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f217e87972a2a207e793101fc05cfc9dd095c678/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f217e87972a2a207e793101fc05cfc9dd095c678/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=f217e87972a2a207e793101fc05cfc9dd095c678", "patch": "@@ -3288,7 +3288,7 @@ totally_scalarize_subtree (struct access *root)\n \t      continue;\n \n \t    HOST_WIDE_INT pos = root->offset + int_bit_position (fld);\n-\t    if (pos + fsize > root->size)\n+\t    if (pos + fsize > root->offset + root->size)\n \t      return false;\n \t    enum total_sra_field_state\n \t      state = total_should_skip_creating_access (root,"}]}