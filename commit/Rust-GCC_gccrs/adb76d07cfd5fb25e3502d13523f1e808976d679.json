{"sha": "adb76d07cfd5fb25e3502d13523f1e808976d679", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWRiNzZkMDdjZmQ1ZmIyNWUzNTAyZDEzNTIzZjFlODA4OTc2ZDY3OQ==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2005-03-29T16:22:32Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2005-03-29T16:22:32Z"}, "message": "a-direct.ads, [...] (Start_Search): Free allocated search buffer if an exception is raised.\n\n2005-03-29  Robert Dewar  <dewar@adacore.com>\n\n\t* a-direct.ads, a-direct.adb (Start_Search): Free allocated search\n\tbuffer if an exception is raised.\n\nFrom-SVN: r97188", "tree": {"sha": "5fe482ead953da9596e3d6a901df2bdaac034483", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5fe482ead953da9596e3d6a901df2bdaac034483"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/adb76d07cfd5fb25e3502d13523f1e808976d679", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adb76d07cfd5fb25e3502d13523f1e808976d679", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adb76d07cfd5fb25e3502d13523f1e808976d679", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adb76d07cfd5fb25e3502d13523f1e808976d679/comments", "author": null, "committer": null, "parents": [{"sha": "077f6c59778318ca9eda5c339acce7810711614f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/077f6c59778318ca9eda5c339acce7810711614f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/077f6c59778318ca9eda5c339acce7810711614f"}], "stats": {"total": 32, "additions": 18, "deletions": 14}, "files": [{"sha": "810455941ebed378415f63f5f5891061c1079ca0", "filename": "gcc/ada/a-direct.adb", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adb76d07cfd5fb25e3502d13523f1e808976d679/gcc%2Fada%2Fa-direct.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adb76d07cfd5fb25e3502d13523f1e808976d679/gcc%2Fada%2Fa-direct.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-direct.adb?ref=adb76d07cfd5fb25e3502d13523f1e808976d679", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2004 Free Software Foundation, Inc.               --\n+--          Copyright (C) 2004-2005 Free Software Foundation, Inc.          --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -31,15 +31,15 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with Ada.Directories.Validity; use Ada.Directories.Validity;\n-with Ada.Strings.Unbounded;    use Ada.Strings.Unbounded;\n+with Ada.Directories.Validity;   use Ada.Directories.Validity;\n+with Ada.Strings.Unbounded;      use Ada.Strings.Unbounded;\n with Ada.Unchecked_Deallocation;\n-with Ada.Characters.Handling;  use Ada.Characters.Handling;\n+with Ada.Characters.Handling;    use Ada.Characters.Handling;\n \n-with GNAT.Directory_Operations; use GNAT.Directory_Operations;\n-with GNAT.OS_Lib;               use GNAT.OS_Lib;\n-with GNAT.Regexp;               use GNAT.Regexp;\n---  ??? Ada units cannot depend on GNAT units\n+with GNAT.Directory_Operations;  use GNAT.Directory_Operations;\n+with GNAT.OS_Lib;                use GNAT.OS_Lib;\n+with GNAT.Regexp;                use GNAT.Regexp;\n+--  ??? Ada units should not depend on GNAT units\n \n with System;\n \n@@ -938,6 +938,7 @@ package body Ada.Directories is\n \n       exception\n          when Error_In_Regexp =>\n+            Free (Search.Value);\n             raise Name_Error;\n       end;\n "}, {"sha": "5047cc76bd51c6590a5eb86fc816b020981a450a", "filename": "gcc/ada/a-direct.ads", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adb76d07cfd5fb25e3502d13523f1e808976d679/gcc%2Fada%2Fa-direct.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adb76d07cfd5fb25e3502d13523f1e808976d679/gcc%2Fada%2Fa-direct.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-direct.ads?ref=adb76d07cfd5fb25e3502d13523f1e808976d679", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 2004 Free Software Foundation, Inc.               --\n+--          Copyright (C) 2004-2005 Free Software Foundation, Inc.          --\n --                                                                          --\n -- This specification is derived for use with GNAT from AI-00248,  which is --\n -- expected to be a part of a future expected revised Ada Reference Manual. --\n@@ -304,10 +304,10 @@ package Ada.Directories is\n    --  Starts a search in the directory entry in the directory named by\n    --  Directory for entries matching Pattern. Pattern represents a file name\n    --  matching pattern. If Pattern is null, all items in the directory are\n-   --  matched; otherwise, the interpretation of Pattern is\n-   --  implementation-defined. Only items which match Filter will be returned.\n-   --  After a successful call on Start_Search, the object Search may have\n-   --  entries available, but it may have no entries available if no files or\n+   --  matched; otherwise, the interpretation of Pattern is implementation-\n+   --  defined. Only items which match Filter will be returned. After a\n+   --  successful call on Start_Search, the object Search may have entries\n+   --  available, but it may have no entries available if no files or\n    --  directories match Pattern and Filter. The exception Name_Error is\n    --  propagated if the string given by Directory does not identify an\n    --  existing directory, or if Pattern does not allow the identification of\n@@ -317,7 +317,10 @@ package Ada.Directories is\n \n    procedure End_Search (Search : in out Search_Type);\n    --  Ends the search represented by Search. After a successful call on\n-   --  End_Search, the object Search will have no entries available.\n+   --  End_Search, the object Search will have no entries available. Note\n+   --  that is is not necessary to call End_Search if the call to Start_Search\n+   --  was unsuccessful and raised an exception (but it is harmless to make\n+   --  the call in this case)>\n \n    function More_Entries (Search : Search_Type) return Boolean;\n    --  Returns True if more entries are available to be returned by a call"}]}