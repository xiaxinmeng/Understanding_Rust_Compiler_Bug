{"sha": "352b8babea0ef7d9995f1cb54a482cedca08987f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzUyYjhiYWJlYTBlZjdkOTk5NWYxY2I1NGE0ODJjZWRjYTA4OTg3Zg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2016-08-01T20:19:34Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2016-08-01T20:19:34Z"}, "message": "* mangle.c (mangle_decl): Fix mangled name change warning.\n\nFrom-SVN: r238964", "tree": {"sha": "12efcd4def72c6c22099fd84360de10722f65537", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/12efcd4def72c6c22099fd84360de10722f65537"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/352b8babea0ef7d9995f1cb54a482cedca08987f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/352b8babea0ef7d9995f1cb54a482cedca08987f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/352b8babea0ef7d9995f1cb54a482cedca08987f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/352b8babea0ef7d9995f1cb54a482cedca08987f/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "92d58deefa851844eddec070d3f944b163d245e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92d58deefa851844eddec070d3f944b163d245e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92d58deefa851844eddec070d3f944b163d245e6"}], "stats": {"total": 13, "additions": 8, "deletions": 5}, "files": [{"sha": "2960579c3a200217a131bbd7009a01dfad55c862", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/352b8babea0ef7d9995f1cb54a482cedca08987f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/352b8babea0ef7d9995f1cb54a482cedca08987f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=352b8babea0ef7d9995f1cb54a482cedca08987f", "patch": "@@ -1,5 +1,7 @@\n 2016-08-01  Jason Merrill  <jason@redhat.com>\n \n+\t* mangle.c (mangle_decl): Fix mangled name change warning.\n+\n \tPR c++/72766\n \t* constexpr.c (cxx_eval_pointer_plus_expression): Check constancy\n \tof nelts."}, {"sha": "e0bbfc994b9f27cabc8d7ccccce8aaf95d88b625", "filename": "gcc/cp/mangle.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/352b8babea0ef7d9995f1cb54a482cedca08987f/gcc%2Fcp%2Fmangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/352b8babea0ef7d9995f1cb54a482cedca08987f/gcc%2Fcp%2Fmangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmangle.c?ref=352b8babea0ef7d9995f1cb54a482cedca08987f", "patch": "@@ -1,4 +1,4 @@\n-/* Name mangling for the 3.0 C++ ABI.\n+/* Name mangling for the 3.0 -*- C++ -*- ABI.\n    Copyright (C) 2000-2016 Free Software Foundation, Inc.\n    Written by Alex Samuel <samuel@codesourcery.com>\n \n@@ -3732,6 +3732,7 @@ mangle_decl (const tree decl)\n \t      id2 = mangle_decl_string (decl);\n \t      id2 = targetm.mangle_decl_assembler_name (decl, id2);\n \t    }\n+\t  flag_abi_version = save_ver;\n \n \t  if (id2 == id)\n \t    /* OK.  */;\n@@ -3740,8 +3741,8 @@ mangle_decl (const tree decl)\n \t    warning_at (DECL_SOURCE_LOCATION (G.entity), OPT_Wabi,\n \t\t\t\"the mangled name of %qD changed between \"\n \t\t\t\"-fabi-version=%d (%D) and -fabi-version=%d (%D)\",\n-\t\t\tG.entity, save_ver, id2,\n-\t\t\twarn_abi_version, id);\n+\t\t\tG.entity, warn_abi_version, id2,\n+\t\t\tsave_ver, id);\n \t  else\n \t    warning_at (DECL_SOURCE_LOCATION (G.entity), OPT_Wabi,\n \t\t\t\"the mangled name of %qD changes between \""}, {"sha": "96a0f22546f0deeda7c3f393ced58f4f7a2e375d", "filename": "gcc/testsuite/g++.dg/abi/Wabi-2-3.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/352b8babea0ef7d9995f1cb54a482cedca08987f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2FWabi-2-3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/352b8babea0ef7d9995f1cb54a482cedca08987f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2FWabi-2-3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2FWabi-2-3.C?ref=352b8babea0ef7d9995f1cb54a482cedca08987f", "patch": "@@ -12,5 +12,5 @@ template <int &> struct S { };\n \n // Expect the diagnostic to reference the ABI version specified via\n // -fabi-version=3 and the ABI version specified via -Wabi=2.\n-void foo (S<N>) { }   // { dg-warning \"the mangled name of .void foo\\\\(S<N>\\\\). changed between -fabi-version=3 \\\\(_Z3foo1SILZ1NEE\\\\) and -fabi-version=2 \\\\(_Z3foo1SIL_Z1NEE\\\\)\" }\n+void foo (S<N>) { }   // { dg-warning \"the mangled name of .void foo\\\\(S<N>\\\\). changed between -fabi-version=2 \\\\(_Z3foo1SILZ1NEE\\\\) and -fabi-version=3 \\\\(_Z3foo1SIL_Z1NEE\\\\)\" }\n "}, {"sha": "46bd7135200520a603909cb309145bded5363d01", "filename": "gcc/testsuite/g++.dg/abi/Wabi-3-2.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/352b8babea0ef7d9995f1cb54a482cedca08987f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2FWabi-3-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/352b8babea0ef7d9995f1cb54a482cedca08987f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2FWabi-3-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2FWabi-3-2.C?ref=352b8babea0ef7d9995f1cb54a482cedca08987f", "patch": "@@ -12,5 +12,5 @@ template <int &> struct S { };\n \n // Expect the diagnostic to reference the ABI version specified via\n // -fabi-version=2 and the ABI version specified via -Wabi=3.\n-void foo (S<N>) { }   // { dg-warning \"the mangled name of .void foo\\\\(S<N>\\\\). changed between -fabi-version=2 \\\\(_Z3foo1SIL_Z1NEE\\\\) and -fabi-version=3 \\\\(_Z3foo1SILZ1NEE\\\\)\" }\n+void foo (S<N>) { }   // { dg-warning \"the mangled name of .void foo\\\\(S<N>\\\\). changes between -fabi-version=2 \\\\(_Z3foo1SILZ1NEE\\\\) and -fabi-version=3 \\\\(_Z3foo1SIL_Z1NEE\\\\)\" }\n "}]}