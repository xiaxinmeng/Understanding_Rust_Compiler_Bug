{"sha": "9e9945c5b254a1ca528623ae19b68f1995f1fd52", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWU5OTQ1YzViMjU0YTFjYTUyODYyM2FlMTliNjhmMTk5NWYxZmQ1Mg==", "commit": {"author": {"name": "Daniel Berlin", "email": "dberlin@dberlin.org", "date": "2005-03-22T23:18:43Z"}, "committer": {"name": "Daniel Berlin", "email": "dberlin@gcc.gnu.org", "date": "2005-03-22T23:18:43Z"}, "message": "c-opts.c (c_common_parse_file): Only start/end main source file if debug hooks says the writer wants it.\n\n2005-03-22  Daniel Berlin  <dberlin@dberlin.org>\n\n\t* c-opts.c (c_common_parse_file): Only start/end main source file\n\tif debug hooks says the writer wants it.\n\t* dbxout.c (dbx_debug_hooks): Add start_end_main_source_file\n\tmember.\n\t(xcoff_debug_hooks): Ditto.\n\t* debug.c (do_nothing_hooks): Ditto.\n\t* debug.h (gcc_debug_hooks): Ditto.\n\t* dwarf2out.c (dwarf2_debug_hooks): Ditto.\n\t* sdbout.c (sdb_debug_hooks): Ditto.\n\t* vmsdbgout.c (vmsdbg_debug_hooks): Ditto.\n\nFrom-SVN: r96902", "tree": {"sha": "799a9a1311ed8a193206a711f79a301221abc71d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/799a9a1311ed8a193206a711f79a301221abc71d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9e9945c5b254a1ca528623ae19b68f1995f1fd52", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e9945c5b254a1ca528623ae19b68f1995f1fd52", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e9945c5b254a1ca528623ae19b68f1995f1fd52", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e9945c5b254a1ca528623ae19b68f1995f1fd52/comments", "author": {"login": "dberlin", "id": 324715, "node_id": "MDQ6VXNlcjMyNDcxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/324715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dberlin", "html_url": "https://github.com/dberlin", "followers_url": "https://api.github.com/users/dberlin/followers", "following_url": "https://api.github.com/users/dberlin/following{/other_user}", "gists_url": "https://api.github.com/users/dberlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dberlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dberlin/subscriptions", "organizations_url": "https://api.github.com/users/dberlin/orgs", "repos_url": "https://api.github.com/users/dberlin/repos", "events_url": "https://api.github.com/users/dberlin/events{/privacy}", "received_events_url": "https://api.github.com/users/dberlin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8ff24a798e576cd22463248fb6975b5b58fd094e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ff24a798e576cd22463248fb6975b5b58fd094e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ff24a798e576cd22463248fb6975b5b58fd094e"}], "stats": {"total": 45, "additions": 35, "deletions": 10}, "files": [{"sha": "a48df49a5284d3c277d5dc960cd2d45e8bf76540", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9e9945c5b254a1ca528623ae19b68f1995f1fd52", "patch": "@@ -1,3 +1,16 @@\n+2005-03-22  Daniel Berlin  <dberlin@dberlin.org>\n+\n+\t* c-opts.c (c_common_parse_file): Only start/end main source file\n+\tif debug hooks says the writer wants it.\n+\t* dbxout.c (dbx_debug_hooks): Add start_end_main_source_file\n+\tmember.\n+\t(xcoff_debug_hooks): Ditto.\n+\t* debug.c (do_nothing_hooks): Ditto.\n+\t* debug.h (gcc_debug_hooks): Ditto.\n+\t* dwarf2out.c (dwarf2_debug_hooks): Ditto.\n+\t* sdbout.c (sdb_debug_hooks): Ditto.\n+\t* vmsdbgout.c (vmsdbg_debug_hooks): Ditto.\n+\t\n 2005-03-22  Mark Mitchell  <mark@codesourcery.com>\n \n \t* doc/extend.texi: Deprecate C++ min/max operators."}, {"sha": "42c8236fc03325b34bee6e3129718e4f068aea36", "filename": "gcc/c-opts.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-opts.c?ref=9e9945c5b254a1ca528623ae19b68f1995f1fd52", "patch": "@@ -1102,16 +1102,18 @@ c_common_parse_file (int set_yydebug)\n   i = 0;\n   for (;;)\n     {\n-      /* Start the main input file */\n-      (*debug_hooks->start_source_file) (0, this_input_filename);\n+      /* Start the main input file, if the debug writer wants it. */\n+      if (debug_hooks->start_end_main_source_file)\n+\t(*debug_hooks->start_source_file) (0, this_input_filename);\n       finish_options ();\n       pch_init ();\n       push_file_scope ();\n       c_parse_file ();\n       finish_file ();\n       pop_file_scope ();\n-      /* And end the main input file.  */\n-      (*debug_hooks->end_source_file) (0);\n+      /* And end the main input file, if the debug writer wants it  */\n+      if (debug_hooks->start_end_main_source_file)\n+\t(*debug_hooks->end_source_file) (0);\n       if (++i >= num_in_fnames)\n \tbreak;\n       cpp_undef_all (parse_in);"}, {"sha": "271cc1984031da5f901b3df4d8f25dfab84171e0", "filename": "gcc/dbxout.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fdbxout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fdbxout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdbxout.c?ref=9e9945c5b254a1ca528623ae19b68f1995f1fd52", "patch": "@@ -378,7 +378,8 @@ const struct gcc_debug_hooks dbx_debug_hooks =\n   debug_nothing_tree,\t\t         /* outlining_inline_function */\n   debug_nothing_rtx,\t\t         /* label */\n   dbxout_handle_pch,\t\t         /* handle_pch */\n-  debug_nothing_rtx\t\t         /* var_location */\n+  debug_nothing_rtx,\t\t         /* var_location */\n+  0                                      /* start_end_main_source_file */\n };\n #endif /* DBX_DEBUGGING_INFO  */\n \n@@ -408,7 +409,8 @@ const struct gcc_debug_hooks xcoff_debug_hooks =\n   debug_nothing_tree,\t\t         /* outlining_inline_function */\n   debug_nothing_rtx,\t\t         /* label */\n   dbxout_handle_pch,\t\t         /* handle_pch */\n-  debug_nothing_rtx\t\t         /* var_location */\n+  debug_nothing_rtx,\t\t         /* var_location */\n+  0                                      /* start_end_main_source_file */\n };\n #endif /* XCOFF_DEBUGGING_INFO  */\n \f"}, {"sha": "226dc4ec60136d1382239e394c5eeaef6f7944ec", "filename": "gcc/debug.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fdebug.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fdebug.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdebug.c?ref=9e9945c5b254a1ca528623ae19b68f1995f1fd52", "patch": "@@ -47,7 +47,8 @@ const struct gcc_debug_hooks do_nothing_debug_hooks =\n   debug_nothing_tree,\t\t         /* outlining_inline_function */\n   debug_nothing_rtx,\t\t         /* label */\n   debug_nothing_int,\t\t         /* handle_pch */\n-  debug_nothing_rtx\t\t         /* var_location */\n+  debug_nothing_rtx,\t\t         /* var_location */\n+  0                                      /* start_end_main_source_file */\n };\n \n /* This file contains implementations of each debug hook that do"}, {"sha": "3feccc5331304260ee3b77f5b9a8aac1fc26741f", "filename": "gcc/debug.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fdebug.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fdebug.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdebug.h?ref=9e9945c5b254a1ca528623ae19b68f1995f1fd52", "patch": "@@ -119,6 +119,10 @@ struct gcc_debug_hooks\n \n   /* Called from final_scan_insn for any NOTE_INSN_VAR_LOCATION note.  */\n   void (* var_location) (rtx);\n+\n+  /* This is 1 if the debug writer wants to see start and end commands for the\n+     main source files, and 0 otherwise.  */\n+  int start_end_main_source_file;\n };\n \n extern const struct gcc_debug_hooks *debug_hooks;"}, {"sha": "24e573b2ea4cd3885eed324b324b25ce4d9c83d3", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=9e9945c5b254a1ca528623ae19b68f1995f1fd52", "patch": "@@ -3444,7 +3444,8 @@ const struct gcc_debug_hooks dwarf2_debug_hooks =\n   dwarf2out_abstract_function,\t/* outlining_inline_function */\n   debug_nothing_rtx,\t\t/* label */\n   debug_nothing_int,\t\t/* handle_pch */\n-  dwarf2out_var_location\n+  dwarf2out_var_location,\n+  1                             /* start_end_main_source_file */\n };\n #endif\n \f"}, {"sha": "e6ab7fb6c40d0de6b85640ce50eafdcb8cd61686", "filename": "gcc/sdbout.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fsdbout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fsdbout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsdbout.c?ref=9e9945c5b254a1ca528623ae19b68f1995f1fd52", "patch": "@@ -335,7 +335,8 @@ const struct gcc_debug_hooks sdb_debug_hooks =\n   debug_nothing_tree,\t\t         /* outlining_inline_function */\n   sdbout_label,\t\t\t         /* label */\n   debug_nothing_int,\t\t         /* handle_pch */\n-  debug_nothing_rtx\t\t         /* var_location */\n+  debug_nothing_rtx,\t\t         /* var_location */\n+  0                                      /* start_end_main_source_file */\n };\n \n /* Return a unique string to name an anonymous type.  */"}, {"sha": "d0f4abe6e0acf8fd179c737830ec7ab5793ddaaf", "filename": "gcc/vmsdbgout.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fvmsdbgout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e9945c5b254a1ca528623ae19b68f1995f1fd52/gcc%2Fvmsdbgout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvmsdbgout.c?ref=9e9945c5b254a1ca528623ae19b68f1995f1fd52", "patch": "@@ -209,7 +209,8 @@ const struct gcc_debug_hooks vmsdbg_debug_hooks\n    vmsdbgout_abstract_function,\n    debug_nothing_rtx,\t\t  /* label */\n    debug_nothing_int,\t\t  /* handle_pch */\n-   debug_nothing_rtx\t\t  /* var_location */\n+   debug_nothing_rtx,\t\t  /* var_location */\n+   0                              /* start_end_main_source_file */\n };\n \n /* Definitions of defaults for assembler-dependent names of various"}]}