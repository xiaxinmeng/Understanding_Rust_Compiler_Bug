{"sha": "9d7013b8ac6b072089612f9bb48461b1cd3df259", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWQ3MDEzYjhhYzZiMDcyMDg5NjEyZjliYjQ4NDYxYjFjZDNkZjI1OQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2002-04-03T21:59:03Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2002-04-03T21:59:03Z"}, "message": "* gcc.dg/cpp/ucs.c: Improved long UCS test.\n\nFrom-SVN: r51815", "tree": {"sha": "c35d605bf5855d1402b7adb3a08981e2b4fec6b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c35d605bf5855d1402b7adb3a08981e2b4fec6b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9d7013b8ac6b072089612f9bb48461b1cd3df259", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d7013b8ac6b072089612f9bb48461b1cd3df259", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d7013b8ac6b072089612f9bb48461b1cd3df259", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d7013b8ac6b072089612f9bb48461b1cd3df259/comments", "author": null, "committer": null, "parents": [{"sha": "faf6db38a43b62603b0015206329865d1ce91c09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/faf6db38a43b62603b0015206329865d1ce91c09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/faf6db38a43b62603b0015206329865d1ce91c09"}], "stats": {"total": 42, "additions": 38, "deletions": 4}, "files": [{"sha": "470ab8e324a0f978d46de429a1b23bfd84c4c2dd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d7013b8ac6b072089612f9bb48461b1cd3df259/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d7013b8ac6b072089612f9bb48461b1cd3df259/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9d7013b8ac6b072089612f9bb48461b1cd3df259", "patch": "@@ -1,3 +1,7 @@\n+2002-04-03  Richard Henderson  <rth@redhat.com>\n+\n+\t* gcc.dg/cpp/ucs.c: Improved long UCS test.\n+\n 2002-04-03  Hans-Peter Nilsson  <hp@bitrange.com>\n \n \t* gcc.dg/wchar_t-1.c, gcc.dg/wchar_t-1.c: Fix typo last change."}, {"sha": "1dfe444d0c116c45d37bc201a103fa6456223f66", "filename": "gcc/testsuite/gcc.dg/cpp/ucs.c", "status": "modified", "additions": 34, "deletions": 4, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d7013b8ac6b072089612f9bb48461b1cd3df259/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fucs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d7013b8ac6b072089612f9bb48461b1cd3df259/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fucs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fucs.c?ref=9d7013b8ac6b072089612f9bb48461b1cd3df259", "patch": "@@ -5,13 +5,43 @@\n \n /* This tests universal character sequences.\n \n-   Neil Booth, 22 May 2001.  */\n+   Neil Booth, 22 May 2001.\n+   Richard Henderson, 3 Apr 2002.  */\n+\n+#include <limits.h>\n+\n+#define unsigned        +0\n+#define int             +0 \n+#define char            +1\n+#define short           +2 \n+#define long            +3\n+\n+#if __WCHAR_TYPE__ == 0\n+# define WCHAR_MAX      INT_MAX\n+#elif __WCHAR_TYPE__ == 1\n+# define WCHAR_MAX      CHAR_MAX\n+#elif __WCHAR_TYPE__ == 2\n+# define WCHAR_MAX      SHRT_MAX\n+#elif __WCHAR_TYPE__ == 3\n+# define WCHAR_MAX      LONG_MAX\n+#else\n+# error wacky wchar_t\n+#endif\n+\n+#undef unsigned\n+#undef int\n+#undef char\n+#undef short\n+#undef long\n \n #if L'\\u1234' != 0x1234\n #error bad short ucs\t/* { dg-bogus \"bad\" \"bad \\u1234 evaluation\" } */\n #endif\n-#if L'\\U1234abcd' != 0x1234abcd\n-#error bad long ucs\t/* { dg-bogus \"bad\" \"bad \\U1234abcd evaluation\" } */\n+\n+#if WCHAR_MAX >= 0x7ffffff\n+# if L'\\U1234abcd' != 0x1234abcd\n+#  error bad long ucs\t/* { dg-bogus \"bad\" \"bad \\U1234abcd evaluation\" } */\n+# endif\n #endif\n \n void foo ()\n@@ -24,7 +54,7 @@ void foo ()\n   c = L'\\u000x';\t/* { dg-error \"non-hex\" \"non-hex digit in UCN\" } */\n   /* If sizeof(HOST_WIDE_INT) > sizeof(wchar_t), we can get a multi-character\n      constant warning even for wide characters.  */\n-  /* { dg-warning \"too long|multi-character\" \"\" { target *-*-* } 24 } */\n+  /* { dg-warning \"too long|multi-character\" \"\" { target *-*-* } 54 } */\n \n   c = '\\u0024';\t\t/* { dg-bogus \"invalid\" \"0024 is a valid UCN\" } */\n   c = \"\\u0040\"[0];\t/* { dg-bogus \"invalid\" \"0040 is a valid UCN\" } */"}]}