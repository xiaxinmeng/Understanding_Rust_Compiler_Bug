{"sha": "da5c25f37101cd71f08e31ad581a00840ef75497", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGE1YzI1ZjM3MTAxY2Q3MWYwOGUzMWFkNTgxYTAwODQwZWY3NTQ5Nw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-01-27T09:10:04Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-01-27T09:10:04Z"}, "message": "Rename PROP_trees to PROP_gimple\n\nPROP_trees actually means GIMPLE IL, rather than GENERIC, so better\nnot to confuse users.\n\n2021-01-27  Jakub Jelinek  <jakub@redhat.com>\n\n\t* tree-pass.h (PROP_trees): Rename to ...\n\t(PROP_gimple): ... this.\n\t* cfgexpand.c (pass_data_expand): Replace PROP_trees with PROP_gimple.\n\t* passes.c (execute_function_dump, execute_function_todo,\n\texecute_one_ipa_transform_pass, execute_one_pass): Likewise.\n\t* varpool.c (ctor_for_folding): Likewise.", "tree": {"sha": "06b1114c3736183b5e5d5cfc71633cbc744b0f11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/06b1114c3736183b5e5d5cfc71633cbc744b0f11"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da5c25f37101cd71f08e31ad581a00840ef75497", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da5c25f37101cd71f08e31ad581a00840ef75497", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da5c25f37101cd71f08e31ad581a00840ef75497", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da5c25f37101cd71f08e31ad581a00840ef75497/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "efc9ccbfd0ca4da6bf0aba913df6f77f56044dc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efc9ccbfd0ca4da6bf0aba913df6f77f56044dc2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/efc9ccbfd0ca4da6bf0aba913df6f77f56044dc2"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "8d20ca6cefb406cd44b8cbeb1e8f860c1b178598", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5c25f37101cd71f08e31ad581a00840ef75497/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5c25f37101cd71f08e31ad581a00840ef75497/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=da5c25f37101cd71f08e31ad581a00840ef75497", "patch": "@@ -6503,7 +6503,7 @@ const pass_data pass_data_expand =\n     | PROP_gimple_lvec\n     | PROP_gimple_lva), /* properties_required */\n   PROP_rtl, /* properties_provided */\n-  ( PROP_ssa | PROP_trees ), /* properties_destroyed */\n+  ( PROP_ssa | PROP_gimple ), /* properties_destroyed */\n   0, /* todo_flags_start */\n   0, /* todo_flags_finish */\n };"}, {"sha": "64550b00b43cb977ae01fdfd7278c7a7281955ee", "filename": "gcc/passes.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5c25f37101cd71f08e31ad581a00840ef75497/gcc%2Fpasses.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5c25f37101cd71f08e31ad581a00840ef75497/gcc%2Fpasses.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.c?ref=da5c25f37101cd71f08e31ad581a00840ef75497", "patch": "@@ -1793,7 +1793,7 @@ execute_function_dump (function *fn, void *data)\n     {\n       push_cfun (fn);\n \n-      if (fn->curr_properties & PROP_trees)\n+      if (fn->curr_properties & PROP_gimple)\n         dump_function_to_file (fn->decl, dump_file, dump_flags);\n       else\n \tprint_rtl_with_bb (dump_file, get_insns (), dump_flags);\n@@ -2034,7 +2034,7 @@ execute_function_todo (function *fn, void *data)\n \n       if (flags & TODO_verify_il)\n \t{\n-\t  if (cfun->curr_properties & PROP_trees)\n+\t  if (cfun->curr_properties & PROP_gimple)\n \t    {\n \t      if (cfun->curr_properties & PROP_cfg)\n \t\t/* IPA passes leave stmts to be fixed up, so make sure to\n@@ -2272,7 +2272,7 @@ execute_one_ipa_transform_pass (struct cgraph_node *node,\n \n   /* Note that the folders should only create gimple expressions.\n      This is a hack until the new folder is ready.  */\n-  in_gimple_form = (cfun && (cfun->curr_properties & PROP_trees)) != 0;\n+  in_gimple_form = (cfun && (cfun->curr_properties & PROP_gimple)) != 0;\n \n   pass_init_dump_file (pass);\n \n@@ -2545,7 +2545,7 @@ execute_one_pass (opt_pass *pass)\n \n   /* Note that the folders should only create gimple expressions.\n      This is a hack until the new folder is ready.  */\n-  in_gimple_form = (cfun && (cfun->curr_properties & PROP_trees)) != 0;\n+  in_gimple_form = (cfun && (cfun->curr_properties & PROP_gimple)) != 0;\n \n   pass_init_dump_file (pass);\n \n@@ -2628,7 +2628,7 @@ execute_one_pass (opt_pass *pass)\n   pass_fini_dump_file (pass);\n \n   if (pass->type != SIMPLE_IPA_PASS && pass->type != IPA_PASS)\n-    gcc_assert (!(cfun->curr_properties & PROP_trees)\n+    gcc_assert (!(cfun->curr_properties & PROP_gimple)\n \t\t|| pass->type != RTL_PASS);\n \n   current_pass = NULL;"}, {"sha": "15693fee15043333f850919f3bc57fa8273b8374", "filename": "gcc/tree-pass.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5c25f37101cd71f08e31ad581a00840ef75497/gcc%2Ftree-pass.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5c25f37101cd71f08e31ad581a00840ef75497/gcc%2Ftree-pass.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-pass.h?ref=da5c25f37101cd71f08e31ad581a00840ef75497", "patch": "@@ -225,7 +225,7 @@ class simple_ipa_opt_pass : public opt_pass\n #define PROP_gimple_lomp_dev\t(1 << 16)\t/* done omp_device_lower */\n #define PROP_rtl_split_insns\t(1 << 17)\t/* RTL has insns split.  */\n \n-#define PROP_trees \\\n+#define PROP_gimple \\\n   (PROP_gimple_any | PROP_gimple_lcf | PROP_gimple_leh | PROP_gimple_lomp)\n \n /* To-do flags.  */"}, {"sha": "4830df5c3201a0225b3e8d7b4e52e1157a08d66d", "filename": "gcc/varpool.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5c25f37101cd71f08e31ad581a00840ef75497/gcc%2Fvarpool.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5c25f37101cd71f08e31ad581a00840ef75497/gcc%2Fvarpool.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarpool.c?ref=da5c25f37101cd71f08e31ad581a00840ef75497", "patch": "@@ -415,7 +415,7 @@ ctor_for_folding (tree decl)\n       gcc_assert (!TREE_PUBLIC (decl));\n       /* Unless this is called during FE folding.  */\n       if (cfun\n-\t  && (cfun->curr_properties & (PROP_trees | PROP_rtl)) == 0\n+\t  && (cfun->curr_properties & (PROP_gimple | PROP_rtl)) == 0\n \t  && TREE_READONLY (decl)\n \t  && !TREE_SIDE_EFFECTS (decl)\n \t  && DECL_INITIAL (decl))"}]}