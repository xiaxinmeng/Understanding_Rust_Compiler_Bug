{"sha": "7af3b946a4181ba5ae292a4a2ff905a4ae999073", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2FmM2I5NDZhNDE4MWJhNWFlMjkyYTRhMmZmOTA1YTRhZTk5OTA3Mw==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2014-09-22T07:36:59Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2014-09-22T07:36:59Z"}, "message": "combine.c (subst): Use simplify_subreg_regno rather than REG_CANNOT_CHANGE_MODE_P to detect...\n\ngcc/\n\t* combine.c (subst): Use simplify_subreg_regno rather than\n\tREG_CANNOT_CHANGE_MODE_P to detect invalid mode changes.\n\nFrom-SVN: r215448", "tree": {"sha": "85b775fbbda18d475c50ade22299ac69b66598f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/85b775fbbda18d475c50ade22299ac69b66598f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7af3b946a4181ba5ae292a4a2ff905a4ae999073", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7af3b946a4181ba5ae292a4a2ff905a4ae999073", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7af3b946a4181ba5ae292a4a2ff905a4ae999073", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7af3b946a4181ba5ae292a4a2ff905a4ae999073/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0cb07998ae317e89dbf9695db731bfc8aa5f9d41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cb07998ae317e89dbf9695db731bfc8aa5f9d41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0cb07998ae317e89dbf9695db731bfc8aa5f9d41"}], "stats": {"total": 13, "additions": 8, "deletions": 5}, "files": [{"sha": "830b2efad7497584489ca5b6e2caa754e05847ea", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af3b946a4181ba5ae292a4a2ff905a4ae999073/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af3b946a4181ba5ae292a4a2ff905a4ae999073/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7af3b946a4181ba5ae292a4a2ff905a4ae999073", "patch": "@@ -1,3 +1,8 @@\n+2014-09-22  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* combine.c (subst): Use simplify_subreg_regno rather than\n+\tREG_CANNOT_CHANGE_MODE_P to detect invalid mode changes.\n+\n 2014-09-22  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* rtl.h (subreg_info): Expand commentary"}, {"sha": "13284865a497275e260d5eff54286d410f160e27", "filename": "gcc/combine.c", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af3b946a4181ba5ae292a4a2ff905a4ae999073/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af3b946a4181ba5ae292a4a2ff905a4ae999073/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=7af3b946a4181ba5ae292a4a2ff905a4ae999073", "patch": "@@ -5121,15 +5121,13 @@ subst (rtx x, rtx from, rtx to, int in_dest, int in_cond, int unique_copy)\n \t\t      )\n \t\t    return gen_rtx_CLOBBER (VOIDmode, const0_rtx);\n \n-#ifdef CANNOT_CHANGE_MODE_CLASS\n \t\t  if (code == SUBREG\n \t\t      && REG_P (to)\n \t\t      && REGNO (to) < FIRST_PSEUDO_REGISTER\n-\t\t      && REG_CANNOT_CHANGE_MODE_P (REGNO (to),\n-\t\t\t\t\t\t   GET_MODE (to),\n-\t\t\t\t\t\t   GET_MODE (x)))\n+\t\t      && simplify_subreg_regno (REGNO (to), GET_MODE (to),\n+\t\t\t\t\t\tSUBREG_BYTE (x),\n+\t\t\t\t\t\tGET_MODE (x)) < 0)\n \t\t    return gen_rtx_CLOBBER (VOIDmode, const0_rtx);\n-#endif\n \n \t\t  new_rtx = (unique_copy && n_occurrences ? copy_rtx (to) : to);\n \t\t  n_occurrences++;"}]}