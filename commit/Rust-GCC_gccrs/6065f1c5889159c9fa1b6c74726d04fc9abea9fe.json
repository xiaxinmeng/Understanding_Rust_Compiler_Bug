{"sha": "6065f1c5889159c9fa1b6c74726d04fc9abea9fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjA2NWYxYzU4ODkxNTljOWZhMWI2Yzc0NzI2ZDA0ZmM5YWJlYTlmZQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-01-29T15:31:10Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-01-29T15:31:10Z"}, "message": "runtime: fix sigprof frame counting\n    \n    If sigtramp and sigtrampgo are both on stack, n -= framesToDiscard\n    is executed twice, which should actually run only once.\n    \n    Reviewed-on: https://go-review.googlesource.com/c/159238\n\nFrom-SVN: r268366", "tree": {"sha": "fc8bafc955762ebe803bb67f0b2813659c95f935", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc8bafc955762ebe803bb67f0b2813659c95f935"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6065f1c5889159c9fa1b6c74726d04fc9abea9fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6065f1c5889159c9fa1b6c74726d04fc9abea9fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6065f1c5889159c9fa1b6c74726d04fc9abea9fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6065f1c5889159c9fa1b6c74726d04fc9abea9fe/comments", "author": null, "committer": null, "parents": [{"sha": "fac31afe6a8ee178de0662353dbd6f2cc5ab3556", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fac31afe6a8ee178de0662353dbd6f2cc5ab3556", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fac31afe6a8ee178de0662353dbd6f2cc5ab3556"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "10e20cebfcd8991ab21a0494d27255b8aac9ff36", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6065f1c5889159c9fa1b6c74726d04fc9abea9fe/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6065f1c5889159c9fa1b6c74726d04fc9abea9fe/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=6065f1c5889159c9fa1b6c74726d04fc9abea9fe", "patch": "@@ -1,4 +1,4 @@\n-c2cac0ba0a92e74d5675c3c9f4e53d2567dbc903\n+5af8ee0693944c280b1f529450dbfd4ec1ee451d\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "b4fa88fe5d869c0bec5300fa9b6e62503f4c4fbc", "filename": "libgo/go/runtime/proc.go", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6065f1c5889159c9fa1b6c74726d04fc9abea9fe/libgo%2Fgo%2Fruntime%2Fproc.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6065f1c5889159c9fa1b6c74726d04fc9abea9fe/libgo%2Fgo%2Fruntime%2Fproc.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fruntime%2Fproc.go?ref=6065f1c5889159c9fa1b6c74726d04fc9abea9fe", "patch": "@@ -3542,14 +3542,13 @@ func sigprof(pc uintptr, gp *g, mp *m) {\n \t\tfor i := 0; i < n; i++ {\n \t\t\tif stklocs[i].function == \"runtime.sigtrampgo\" && i+2 < n {\n \t\t\t\tframesToDiscard = i + 2\n-\t\t\t\tn -= framesToDiscard\n \t\t\t}\n \t\t\tif stklocs[i].function == \"runtime.sigtramp\" && i+2 < n {\n \t\t\t\tframesToDiscard = i + 2\n-\t\t\t\tn -= framesToDiscard\n \t\t\t\tbreak\n \t\t\t}\n \t\t}\n+\t\tn -= framesToDiscard\n \t\tfor i := 0; i < n; i++ {\n \t\t\tstk[i] = stklocs[i+framesToDiscard].pc\n \t\t}"}]}