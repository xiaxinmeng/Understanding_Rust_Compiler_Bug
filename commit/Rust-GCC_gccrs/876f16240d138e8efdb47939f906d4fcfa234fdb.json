{"sha": "876f16240d138e8efdb47939f906d4fcfa234fdb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODc2ZjE2MjQwZDEzOGU4ZWZkYjQ3OTM5ZjkwNmQ0ZmNmYTIzNGZkYg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-04-18T10:52:05Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-04-18T10:52:05Z"}, "message": "[multiple changes]\n\n2016-04-18  Gary Dismukes  <dismukes@adacore.com>\n\n\t* sem_ch13.adb (Has_Good_Profile): Improvement\n\tof error message. Now indicates subtype_mark of formal parameter\n\trather than the formal's name, plus minor rewording.\n\n2016-04-18  Pascal Obry  <obry@adacore.com>\n\n\t* adaint.c, adaint.h, s-os_lib.ads: Add new routine Current_Process_Id.\n\nFrom-SVN: r235128", "tree": {"sha": "9b42b6cd9a21f1e11c88eb34de241a163a6906ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b42b6cd9a21f1e11c88eb34de241a163a6906ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/876f16240d138e8efdb47939f906d4fcfa234fdb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/876f16240d138e8efdb47939f906d4fcfa234fdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/876f16240d138e8efdb47939f906d4fcfa234fdb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/876f16240d138e8efdb47939f906d4fcfa234fdb/comments", "author": null, "committer": null, "parents": [{"sha": "77039fe27cc01b05a08798ed94a3051500743922", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77039fe27cc01b05a08798ed94a3051500743922", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77039fe27cc01b05a08798ed94a3051500743922"}], "stats": {"total": 43, "additions": 38, "deletions": 5}, "files": [{"sha": "a8a6f5c7e0d56a30f14857b2057cf476da850e71", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/876f16240d138e8efdb47939f906d4fcfa234fdb/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/876f16240d138e8efdb47939f906d4fcfa234fdb/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=876f16240d138e8efdb47939f906d4fcfa234fdb", "patch": "@@ -1,3 +1,13 @@\n+2016-04-18  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* sem_ch13.adb (Has_Good_Profile): Improvement\n+\tof error message. Now indicates subtype_mark of formal parameter\n+\trather than the formal's name, plus minor rewording.\n+\n+2016-04-18  Pascal Obry  <obry@adacore.com>\n+\n+\t* adaint.c, adaint.h, s-os_lib.ads: Add new routine Current_Process_Id.\n+\n 2016-04-18  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* stringt.adb, exp_ch6.adb, sem_ch13.adb: Minor reformatting."}, {"sha": "a9a5b684df8b81c0f3ddd39e8768707f8bef580a", "filename": "gcc/ada/adaint.c", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/876f16240d138e8efdb47939f906d4fcfa234fdb/gcc%2Fada%2Fadaint.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/876f16240d138e8efdb47939f906d4fcfa234fdb/gcc%2Fada%2Fadaint.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fadaint.c?ref=876f16240d138e8efdb47939f906d4fcfa234fdb", "patch": "@@ -2613,6 +2613,22 @@ __gnat_os_exit (int status)\n   exit (status);\n }\n \n+int\n+__gnat_current_process_id (void)\n+{\n+#if defined (__vxworks) || defined (__PikeOS__)\n+  return -1;\n+\n+#elif defined (_WIN32)\n+\n+  return (int)GetCurrentProcessId();\n+\n+#else\n+\n+  return (int)getpid();\n+#endif\n+}\n+\n /* Locate file on path, that matches a predicate */\n \n char *"}, {"sha": "5df192677c57f2f98ff4b7412b4aa49b64e47513", "filename": "gcc/ada/adaint.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/876f16240d138e8efdb47939f906d4fcfa234fdb/gcc%2Fada%2Fadaint.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/876f16240d138e8efdb47939f906d4fcfa234fdb/gcc%2Fada%2Fadaint.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fadaint.h?ref=876f16240d138e8efdb47939f906d4fcfa234fdb", "patch": "@@ -206,8 +206,9 @@ extern int    __gnat_is_symbolic_link\t\t   (char *name);\n extern int    __gnat_portable_spawn                (char *[]);\n extern int    __gnat_portable_no_block_spawn       (char *[]);\n extern int    __gnat_portable_wait                 (int *);\n+extern int    __gnat_current_process_id            (void);\n extern char  *__gnat_locate_exec                   (char *, char *);\n-extern char  *__gnat_locate_exec_on_path\t   (char *);\n+extern char  *__gnat_locate_exec_on_path           (char *);\n extern char  *__gnat_locate_regular_file           (char *, char *);\n extern void   __gnat_maybe_glob_args               (int *, char ***);\n extern void   __gnat_os_exit\t\t\t   (int);"}, {"sha": "f53c2ec1a583191b3abb144062438dcc47b80fc3", "filename": "gcc/ada/s-os_lib.ads", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/876f16240d138e8efdb47939f906d4fcfa234fdb/gcc%2Fada%2Fs-os_lib.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/876f16240d138e8efdb47939f906d4fcfa234fdb/gcc%2Fada%2Fs-os_lib.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-os_lib.ads?ref=876f16240d138e8efdb47939f906d4fcfa234fdb", "patch": "@@ -723,6 +723,10 @@ package System.OS_Lib is\n    Invalid_Pid : constant Process_Id;\n    --  A special value used to indicate errors, as described below\n \n+   function Current_Process_Id return Process_Id;\n+   --  Returns the current process id or Invalid_Pid if not supported by the\n+   --  runtime.\n+\n    function Argument_String_To_List\n      (Arg_String : String) return Argument_List_Access;\n    --  Take a string that is a program and its arguments and parse it into an\n@@ -1060,6 +1064,7 @@ private\n    pragma Import (C, Path_Separator, \"__gnat_path_separator\");\n    pragma Import (C, Directory_Separator, \"__gnat_dir_separator\");\n    pragma Import (C, Current_Time, \"__gnat_current_time\");\n+   pragma Import (C, Current_Process_Id, \"__gnat_current_process_id\");\n \n    type OS_Time is\n      range -(2 ** (Standard'Address_Size - Integer'(1))) .."}, {"sha": "01760a2ba5e6d95bdd0fb451891349abda4f7444", "filename": "gcc/ada/sem_ch13.adb", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/876f16240d138e8efdb47939f906d4fcfa234fdb/gcc%2Fada%2Fsem_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/876f16240d138e8efdb47939f906d4fcfa234fdb/gcc%2Fada%2Fsem_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch13.adb?ref=876f16240d138e8efdb47939f906d4fcfa234fdb", "patch": "@@ -3752,14 +3752,14 @@ package body Sem_Ch13 is\n          Pnam : Entity_Id;\n \n          Is_Read : constant Boolean := (TSS_Nam = TSS_Stream_Read);\n-         --  True for Read attribute, false for other attributes\n+         --  True for Read attribute, False for other attributes\n \n          function Has_Good_Profile\n            (Subp   : Entity_Id;\n             Report : Boolean := False) return Boolean;\n          --  Return true if the entity is a subprogram with an appropriate\n-         --  profile for the attribute being defined. If result is false and\n-         --  Report is True function emits appropriate error.\n+         --  profile for the attribute being defined. If result is False and\n+         --  Report is True, function emits appropriate error.\n \n          ----------------------\n          -- Has_Good_Profile --\n@@ -3844,7 +3844,8 @@ package body Sem_Ch13 is\n             then\n                if Report and not Is_First_Subtype (Typ) then\n                   Error_Msg_N\n-                    (\"formal of stream operation must be a first subtype\", F);\n+                    (\"subtype of formal in stream operation must be a first \"\n+                     & \"subtype\", Parameter_Type (Parent (F)));\n                end if;\n \n                return False;"}]}