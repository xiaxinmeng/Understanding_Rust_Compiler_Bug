{"sha": "d87834de87432d0ad05ca62ffcd68aba34bc0bc8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDg3ODM0ZGU4NzQzMmQwYWQwNWNhNjJmZmNkNjhhYmEzNGJjMGJjOA==", "commit": {"author": {"name": "Trevor Saunders", "email": "tbsaunde+gcc@tbsaunde.org", "date": "2015-05-22T01:04:24Z"}, "committer": {"name": "Trevor Saunders", "email": "tbsaunde@gcc.gnu.org", "date": "2015-05-22T01:04:24Z"}, "message": "always define HAVE_peephole\n\ngcc/ChangeLog:\n\n2015-05-20  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n\n\t* final.c (final_scan_insn): Don't check HAVE_peephole with the\n\tpreprocessor.\n\t* output.h: Likewise.\n\t* genconfig.c (main): Alwways define HAVE_peephole.\n\t* genpeep.c: Don't emit checks of HAVE_peephole.\n\nFrom-SVN: r223519", "tree": {"sha": "b9b8f8180fd4a7b71093a8572091026d66805bbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9b8f8180fd4a7b71093a8572091026d66805bbf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d87834de87432d0ad05ca62ffcd68aba34bc0bc8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d87834de87432d0ad05ca62ffcd68aba34bc0bc8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d87834de87432d0ad05ca62ffcd68aba34bc0bc8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d87834de87432d0ad05ca62ffcd68aba34bc0bc8/comments", "author": null, "committer": null, "parents": [{"sha": "692e031294569fc76371c9eda58f01cce1716c22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/692e031294569fc76371c9eda58f01cce1716c22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/692e031294569fc76371c9eda58f01cce1716c22"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "89cccfbe894ce196a66daacbaf0bc0c25cbf5d5a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d87834de87432d0ad05ca62ffcd68aba34bc0bc8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d87834de87432d0ad05ca62ffcd68aba34bc0bc8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d87834de87432d0ad05ca62ffcd68aba34bc0bc8", "patch": "@@ -1,3 +1,11 @@\n+2015-05-20  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n+\n+\t* final.c (final_scan_insn): Don't check HAVE_peephole with the\n+\tpreprocessor.\n+\t* output.h: Likewise.\n+\t* genconfig.c (main): Alwways define HAVE_peephole.\n+\t* genpeep.c: Don't emit checks of HAVE_peephole.\n+\n 2015-05-20  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n \n \t* combine.c, expmed.c, expr.c, optabs.c optabs.h, toplev.c: DOn't"}, {"sha": "c8f059b17c0a118d930e5b4dbf85ae11c30e6352", "filename": "gcc/final.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d87834de87432d0ad05ca62ffcd68aba34bc0bc8/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d87834de87432d0ad05ca62ffcd68aba34bc0bc8/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=d87834de87432d0ad05ca62ffcd68aba34bc0bc8", "patch": "@@ -2905,10 +2905,9 @@ final_scan_insn (rtx_insn *insn, FILE *file, int optimize_p ATTRIBUTE_UNUSED,\n \n #endif\n \n-#ifdef HAVE_peephole\n \t/* Do machine-specific peephole optimizations if desired.  */\n \n-\tif (optimize_p && !flag_no_peephole && !nopeepholes)\n+\tif (HAVE_peephole && optimize_p && !flag_no_peephole && !nopeepholes)\n \t  {\n \t    rtx_insn *next = peephole (insn);\n \t    /* When peepholing, if there were notes within the peephole,\n@@ -2937,7 +2936,6 @@ final_scan_insn (rtx_insn *insn, FILE *file, int optimize_p ATTRIBUTE_UNUSED,\n \t    /* PEEPHOLE might have changed this.  */\n \t    body = PATTERN (insn);\n \t  }\n-#endif\n \n \t/* Try to recognize the instruction.\n \t   If successful, verify that the operands satisfy the"}, {"sha": "7237dedee5666b71262db21497f42cf4adcdc0fe", "filename": "gcc/genconfig.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d87834de87432d0ad05ca62ffcd68aba34bc0bc8/gcc%2Fgenconfig.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d87834de87432d0ad05ca62ffcd68aba34bc0bc8/gcc%2Fgenconfig.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgenconfig.c?ref=d87834de87432d0ad05ca62ffcd68aba34bc0bc8", "patch": "@@ -369,6 +369,8 @@ main (int argc, char **argv)\n \n   if (have_peephole_flag)\n     printf (\"#define HAVE_peephole 1\\n\");\n+  else\n+    printf (\"#define HAVE_peephole 0\\n\");\n \n   if (have_peephole2_flag)\n     {"}, {"sha": "b914e85f863af46c4059408495dcf4c6385118a5", "filename": "gcc/genpeep.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d87834de87432d0ad05ca62ffcd68aba34bc0bc8/gcc%2Fgenpeep.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d87834de87432d0ad05ca62ffcd68aba34bc0bc8/gcc%2Fgenpeep.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgenpeep.c?ref=d87834de87432d0ad05ca62ffcd68aba34bc0bc8", "patch": "@@ -389,7 +389,6 @@ from the machine description file `md'.  */\\n\\n\");\n   printf (\"#include \\\"flags.h\\\"\\n\");\n   printf (\"#include \\\"tm-constrs.h\\\"\\n\\n\");\n \n-  printf (\"#ifdef HAVE_peephole\\n\");\n   printf (\"extern rtx peep_operand[];\\n\\n\");\n   printf (\"#define operands peep_operand\\n\\n\");\n \n@@ -423,7 +422,6 @@ from the machine description file `md'.  */\\n\\n\");\n     max_opno = 1;\n \n   printf (\"rtx peep_operand[%d];\\n\", max_opno + 1);\n-  printf (\"#endif\\n\");\n \n   fflush (stdout);\n   return (ferror (stdout) != 0 ? FATAL_EXIT_CODE : SUCCESS_EXIT_CODE);"}, {"sha": "4ce6eeaa2b476bf2513bb13074f1365d1c471400", "filename": "gcc/output.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d87834de87432d0ad05ca62ffcd68aba34bc0bc8/gcc%2Foutput.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d87834de87432d0ad05ca62ffcd68aba34bc0bc8/gcc%2Foutput.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foutput.h?ref=d87834de87432d0ad05ca62ffcd68aba34bc0bc8", "patch": "@@ -289,9 +289,7 @@ extern void assemble_addr_to_section (rtx, section *);\n /* Return the size of the constant pool.  */\n extern int get_pool_size (void);\n \n-#ifdef HAVE_peephole\n extern rtx_insn *peephole (rtx_insn *);\n-#endif\n \n extern void output_shared_constant_pool (void);\n "}]}