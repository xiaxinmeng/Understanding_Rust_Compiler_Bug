{"sha": "c46d001a91568c9fd19ee74c73d34f87ebd4aef5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQ2ZDAwMWE5MTU2OGM5ZmQxOWVlNzRjNzNkMzRmODdlYmQ0YWVmNQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-05-09T11:29:26Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-05-09T11:29:26Z"}, "message": "var-tracking.c (find_mem_expr_in_1pdv): Fix thinko.\n\n\t* var-tracking.c (find_mem_expr_in_1pdv): Fix thinko.\n\t(dataflow_set_preserve_mem_locs): Likewise.\n\nFrom-SVN: r173565", "tree": {"sha": "94397de0519dcf37d7100736a01a6b387c549837", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/94397de0519dcf37d7100736a01a6b387c549837"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c46d001a91568c9fd19ee74c73d34f87ebd4aef5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c46d001a91568c9fd19ee74c73d34f87ebd4aef5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c46d001a91568c9fd19ee74c73d34f87ebd4aef5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c46d001a91568c9fd19ee74c73d34f87ebd4aef5/comments", "author": null, "committer": null, "parents": [{"sha": "6d9e7c41392e812ac14837c025558b9ab381f614", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d9e7c41392e812ac14837c025558b9ab381f614", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d9e7c41392e812ac14837c025558b9ab381f614"}], "stats": {"total": 20, "additions": 13, "deletions": 7}, "files": [{"sha": "de400532ab0efeb9b78190a3f9248a1c564d03ae", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c46d001a91568c9fd19ee74c73d34f87ebd4aef5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c46d001a91568c9fd19ee74c73d34f87ebd4aef5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c46d001a91568c9fd19ee74c73d34f87ebd4aef5", "patch": "@@ -1,4 +1,10 @@\n-2011-05-04  Philipp Thomas  <pth@suse.de>\n+2011-05-09  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* var-tracking.c (find_mem_expr_in_1pdv): Fix thinko.\n+\t(dataflow_set_preserve_mem_locs): Likewise.\n+\n+2011-05-09  Philipp Thomas  <pth@suse.de>\n+\n \t* config/mep/mep.c (mep_validate_vliw): Syntax description\n \tshould not be translated.\n "}, {"sha": "90411123a69ea612dca0a6d3ac9170d8439024ae", "filename": "gcc/var-tracking.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c46d001a91568c9fd19ee74c73d34f87ebd4aef5/gcc%2Fvar-tracking.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c46d001a91568c9fd19ee74c73d34f87ebd4aef5/gcc%2Fvar-tracking.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvar-tracking.c?ref=c46d001a91568c9fd19ee74c73d34f87ebd4aef5", "patch": "@@ -4113,8 +4113,9 @@ find_mem_expr_in_1pdv (tree expr, rtx val, htab_t vars)\n   VALUE_RECURSED_INTO (val) = true;\n \n   for (node = var->var_part[0].loc_chain; node; node = node->next)\n-    if (MEM_P (node->loc) && MEM_EXPR (node->loc) == expr\n-\t&& MEM_OFFSET (node->loc) == 0)\n+    if (MEM_P (node->loc)\n+\t&& MEM_EXPR (node->loc) == expr\n+\t&& INT_MEM_OFFSET (node->loc) == 0)\n       {\n \twhere = node;\n \tbreak;\n@@ -4177,11 +4178,10 @@ dataflow_set_preserve_mem_locs (void **slot, void *data)\n \t{\n \t  for (loc = var->var_part[0].loc_chain; loc; loc = loc->next)\n \t    {\n-\t      /* We want to remove dying MEMs that doesn't refer to\n-\t\t DECL.  */\n+\t      /* We want to remove dying MEMs that doesn't refer to DECL.  */\n \t      if (GET_CODE (loc->loc) == MEM\n \t\t  && (MEM_EXPR (loc->loc) != decl\n-\t\t      || MEM_OFFSET (loc->loc))\n+\t\t      || INT_MEM_OFFSET (loc->loc) != 0)\n \t\t  && !mem_dies_at_call (loc->loc))\n \t\tbreak;\n \t      /* We want to move here MEMs that do refer to DECL.  */\n@@ -4225,7 +4225,7 @@ dataflow_set_preserve_mem_locs (void **slot, void *data)\n \n \t  if (GET_CODE (loc->loc) != MEM\n \t      || (MEM_EXPR (loc->loc) == decl\n-\t\t  && MEM_OFFSET (loc->loc) == 0)\n+\t\t  && INT_MEM_OFFSET (loc->loc) == 0)\n \t      || !mem_dies_at_call (loc->loc))\n \t    {\n \t      if (old_loc != loc->loc && emit_notes)"}]}