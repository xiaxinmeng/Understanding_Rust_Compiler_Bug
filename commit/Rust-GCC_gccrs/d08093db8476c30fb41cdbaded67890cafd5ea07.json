{"sha": "d08093db8476c30fb41cdbaded67890cafd5ea07", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDA4MDkzZGI4NDc2YzMwZmI0MWNkYmFkZWQ2Nzg5MGNhZmQ1ZWEwNw==", "commit": {"author": {"name": "Mikhail Maltsev", "email": "maltsevm@gmail.com", "date": "2015-05-22T22:58:22Z"}, "committer": {"name": "Mikhail Maltsev", "email": "miyuki@gcc.gnu.org", "date": "2015-05-22T22:58:22Z"}, "message": "re PR rtl-optimization/66237 (FAIL: gcc.dg/tree-prof/pr34999.c compilation,  -fprofile-use -D_PROFILE_USE (internal compiler error))\n\nPR rtl-optimization/66237\n\n* bb-reorder.c (fix_crossing_conditional_branches): Fix wrong\nlocation of an \"as_a\" cast.\n\nFrom-SVN: r223596", "tree": {"sha": "32eb05b580d974d86e6377daea61dd9f20ad6137", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/32eb05b580d974d86e6377daea61dd9f20ad6137"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d08093db8476c30fb41cdbaded67890cafd5ea07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d08093db8476c30fb41cdbaded67890cafd5ea07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d08093db8476c30fb41cdbaded67890cafd5ea07", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d08093db8476c30fb41cdbaded67890cafd5ea07/comments", "author": {"login": "miyuki", "id": 4668268, "node_id": "MDQ6VXNlcjQ2NjgyNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/4668268?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miyuki", "html_url": "https://github.com/miyuki", "followers_url": "https://api.github.com/users/miyuki/followers", "following_url": "https://api.github.com/users/miyuki/following{/other_user}", "gists_url": "https://api.github.com/users/miyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/miyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miyuki/subscriptions", "organizations_url": "https://api.github.com/users/miyuki/orgs", "repos_url": "https://api.github.com/users/miyuki/repos", "events_url": "https://api.github.com/users/miyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/miyuki/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3b0244cc3bef04fd09e58bfb553c6cef9a2ad02d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b0244cc3bef04fd09e58bfb553c6cef9a2ad02d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b0244cc3bef04fd09e58bfb553c6cef9a2ad02d"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "233763c332926ff9e44e0d513ba2e1f37be8ab80", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d08093db8476c30fb41cdbaded67890cafd5ea07/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d08093db8476c30fb41cdbaded67890cafd5ea07/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d08093db8476c30fb41cdbaded67890cafd5ea07", "patch": "@@ -1,3 +1,9 @@\n+2015-05-22  Mikhail Maltsev  <maltsevm@gmail.com>\n+\n+\tPR rtl-optimization/66237\n+\t* bb-reorder.c (fix_crossing_conditional_branches): Fix wrong\n+\tlocation of an \"as_a\" cast.\n+\n 2015-05-22  Jeff Law  <law@redhat.com>\n \n \t* config/pa/pa.md (non-canonical shift-add insns): Remove."}, {"sha": "cbf63438a4b19bff9623831780574d846b4ecf79", "filename": "gcc/bb-reorder.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d08093db8476c30fb41cdbaded67890cafd5ea07/gcc%2Fbb-reorder.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d08093db8476c30fb41cdbaded67890cafd5ea07/gcc%2Fbb-reorder.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbb-reorder.c?ref=d08093db8476c30fb41cdbaded67890cafd5ea07", "patch": "@@ -2044,7 +2044,7 @@ fix_crossing_conditional_branches (void)\n \n       if (crossing_edge)\n \t{\n-\t  rtx_jump_insn *old_jump = as_a <rtx_jump_insn *> (BB_END (cur_bb));\n+\t  rtx_insn *old_jump = BB_END (cur_bb);\n \n \t  /* Check to make sure the jump instruction is a\n \t     conditional jump.  */\n@@ -2067,6 +2067,9 @@ fix_crossing_conditional_branches (void)\n \n \t  if (set_src && (GET_CODE (set_src) == IF_THEN_ELSE))\n \t    {\n+\t      rtx_jump_insn *old_jump_insn =\n+\t\t\tas_a <rtx_jump_insn *> (old_jump);\n+\n \t      if (GET_CODE (XEXP (set_src, 1)) == PC)\n \t\told_label = XEXP (set_src, 2);\n \t      else if (GET_CODE (XEXP (set_src, 2)) == PC)\n@@ -2095,7 +2098,7 @@ fix_crossing_conditional_branches (void)\n \t\t  emit_label (new_label);\n \n \t\t  gcc_assert (GET_CODE (old_label) == LABEL_REF);\n-\t\t  old_jump_target = old_jump->jump_target ();\n+\t\t  old_jump_target = old_jump_insn->jump_target ();\n \t\t  new_jump = as_a <rtx_jump_insn *>\n \t\t\t\t(emit_jump_insn (gen_jump (old_jump_target)));\n \t\t  new_jump->set_jump_target (old_jump_target);\n@@ -2114,7 +2117,7 @@ fix_crossing_conditional_branches (void)\n \n \t      /* Make old jump branch to new bb.  */\n \n-\t      redirect_jump (old_jump, new_label, 0);\n+\t      redirect_jump (old_jump_insn, new_label, 0);\n \n \t      /* Remove crossing_edge as predecessor of 'dest'.  */\n "}]}