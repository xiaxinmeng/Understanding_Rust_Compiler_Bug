{"sha": "b49326f1ca9f1e9ec206d431643cf1996008fdcf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjQ5MzI2ZjFjYTlmMWU5ZWMyMDZkNDMxNjQzY2YxOTk2MDA4ZmRjZg==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel1@de.ibm.com", "date": "2008-02-14T08:40:40Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2008-02-14T08:40:40Z"}, "message": "s390.c (s390_mainpool_start): Emit the pool before the first section switch note.\n\n2008-02-14  Andreas Krebbel  <krebbel1@de.ibm.com>\n\n\t* config/s390/s390.c (s390_mainpool_start): Emit the pool\n\tbefore the first section switch note.\n\nFrom-SVN: r132315", "tree": {"sha": "487383f49dcf5db7bbfccdcbea74d4cd01b3fbbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/487383f49dcf5db7bbfccdcbea74d4cd01b3fbbf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b49326f1ca9f1e9ec206d431643cf1996008fdcf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b49326f1ca9f1e9ec206d431643cf1996008fdcf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b49326f1ca9f1e9ec206d431643cf1996008fdcf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b49326f1ca9f1e9ec206d431643cf1996008fdcf/comments", "author": null, "committer": null, "parents": [{"sha": "346341a4e2cbb8fd5b94dc5b883c79cca3856861", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/346341a4e2cbb8fd5b94dc5b883c79cca3856861", "html_url": "https://github.com/Rust-GCC/gccrs/commit/346341a4e2cbb8fd5b94dc5b883c79cca3856861"}], "stats": {"total": 18, "additions": 9, "deletions": 9}, "files": [{"sha": "23d2bec85a74024761cf79fd0118b25f4502c051", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b49326f1ca9f1e9ec206d431643cf1996008fdcf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b49326f1ca9f1e9ec206d431643cf1996008fdcf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b49326f1ca9f1e9ec206d431643cf1996008fdcf", "patch": "@@ -1,3 +1,8 @@\n+2008-02-14  Andreas Krebbel  <krebbel1@de.ibm.com>\n+\n+\t* config/s390/s390.c (s390_mainpool_start): Emit the pool\n+\tbefore the first section switch note.\n+\n 2008-02-14 Ralf Wildenhues <Ralf.Wildenhues@gmx.de>\n \n \t* doc/bugreport.texi: Update copyright years."}, {"sha": "280358c0c3f6d2d2a51778691241a9db10cd50a8", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 4, "deletions": 9, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b49326f1ca9f1e9ec206d431643cf1996008fdcf/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b49326f1ca9f1e9ec206d431643cf1996008fdcf/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=b49326f1ca9f1e9ec206d431643cf1996008fdcf", "patch": "@@ -5683,7 +5683,6 @@ s390_mainpool_start (void)\n {\n   struct constant_pool *pool;\n   rtx insn;\n-  bool in_pool_section_p = false;\n \n   pool = s390_alloc_pool ();\n \n@@ -5696,7 +5695,6 @@ s390_mainpool_start (void)\n \t{\n \t  gcc_assert (!pool->pool_insn);\n \t  pool->pool_insn = insn;\n-\t  in_pool_section_p = true;\n \t}\n \n       if (!TARGET_CPU_ZARCH && s390_execute_label (insn))\n@@ -5722,12 +5720,9 @@ s390_mainpool_start (void)\n \t Z cpus where we can emit the literal pool at the end of the\n \t function body within the text section.  */\n       if (NOTE_P (insn)\n-\t  && NOTE_KIND (insn) == NOTE_INSN_SWITCH_TEXT_SECTIONS)\n-\t{\n-\t  if (in_pool_section_p)\n-\t    pool->emit_pool_after = PREV_INSN (insn);\n-\t  in_pool_section_p = !in_pool_section_p;\n-\t}\n+\t  && NOTE_KIND (insn) == NOTE_INSN_SWITCH_TEXT_SECTIONS\n+\t  && !pool->emit_pool_after)\n+\tpool->emit_pool_after = PREV_INSN (insn);\n     }\n \n   gcc_assert (pool->pool_insn || pool->size == 0);\n@@ -5744,7 +5739,7 @@ s390_mainpool_start (void)\n \n   /* If the functions ends with the section where the literal pool\n      should be emitted set the marker to its end.  */\n-  if (pool && in_pool_section_p)\n+  if (pool && !pool->emit_pool_after)\n     pool->emit_pool_after = get_last_insn ();\n \n   return pool;"}]}