{"sha": "c034c38f8d6becbe6d607910351acceb58b97854", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzAzNGMzOGY4ZDZiZWNiZTZkNjA3OTEwMzUxYWNjZWI1OGI5Nzg1NA==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2018-02-24T17:22:10Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2018-02-24T17:22:10Z"}, "message": "re PR fortran/30792 (DATA implied-do substring allowed with -std=f95/f2003)\n\n2018-02-24  Steven G. Kargl <kargl@gcc.gnu.org>\n\n\tPR fortran/30792\n\t* decl.c (gfc_match_data): Check for invalid substring in\n\tdata-implied-do\n\n2018-02-24  Steven G. Kargl <kargl@gcc.gnu.org>\n\n\tPR fortran/30792\n\t* gfortran.dg/data_substring.f90: New test.\n\nFrom-SVN: r257962", "tree": {"sha": "892f8aa8a7c976e64b07f6db68e8850271b42aff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/892f8aa8a7c976e64b07f6db68e8850271b42aff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c034c38f8d6becbe6d607910351acceb58b97854", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c034c38f8d6becbe6d607910351acceb58b97854", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c034c38f8d6becbe6d607910351acceb58b97854", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c034c38f8d6becbe6d607910351acceb58b97854/comments", "author": null, "committer": null, "parents": [{"sha": "118cd6baeda97b91c667bb5933a56a72f8c0dc84", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/118cd6baeda97b91c667bb5933a56a72f8c0dc84", "html_url": "https://github.com/Rust-GCC/gccrs/commit/118cd6baeda97b91c667bb5933a56a72f8c0dc84"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "6e69042c89677c67981f0e3b7cc1e6254d84857b", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c034c38f8d6becbe6d607910351acceb58b97854/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c034c38f8d6becbe6d607910351acceb58b97854/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c034c38f8d6becbe6d607910351acceb58b97854", "patch": "@@ -1,3 +1,9 @@\n+2018-02-24  Steven G. Kargl <kargl@gcc.gnu.org>\n+\n+\tPR fortran/30792\n+\t* decl.c (gfc_match_data): Check for invalid substring in\n+\tdata-implied-do\n+\n 2018-02-23  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \t* intrinsic.texi: Arguments to MATMUL cannot both be rank one."}, {"sha": "e377a213db49ff1217dc3d4b61ec37c9260945e7", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c034c38f8d6becbe6d607910351acceb58b97854/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c034c38f8d6becbe6d607910351acceb58b97854/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=c034c38f8d6becbe6d607910351acceb58b97854", "patch": "@@ -585,6 +585,20 @@ gfc_match_data (void)\n       if (m != MATCH_YES)\n \tgoto cleanup;\n \n+      if (new_data->var->iter.var\n+\t  && new_data->var->iter.var->ts.type == BT_INTEGER\n+\t  && new_data->var->iter.var->symtree->n.sym->attr.implied_index == 1\n+\t  && new_data->var->list\n+\t  && new_data->var->list->expr\n+\t  && new_data->var->list->expr->ts.type == BT_CHARACTER\n+\t  && new_data->var->list->expr->ref\n+\t  && new_data->var->list->expr->ref->type == REF_SUBSTRING)\n+\t{\n+\t  gfc_error (\"Invalid substring in data-implied-do at %L in DATA \"\n+\t\t     \"statement\", &new_data->var->list->expr->where);\n+\t  goto cleanup;\n+\t}\n+\n       m = top_val_list (new_data);\n       if (m != MATCH_YES)\n \tgoto cleanup;"}, {"sha": "60d8a9e0843ff5802157c927874d152358063537", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c034c38f8d6becbe6d607910351acceb58b97854/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c034c38f8d6becbe6d607910351acceb58b97854/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c034c38f8d6becbe6d607910351acceb58b97854", "patch": "@@ -1,3 +1,8 @@\n+2018-02-24  Steven G. Kargl <kargl@gcc.gnu.org>\n+\n+\tPR fortran/30792\n+\t* gfortran.dg/data_substring.f90: New test.\n+\n 2018-02-24  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/83692"}, {"sha": "6d6b2c0157976549124939cecc3589ef894879e6", "filename": "gcc/testsuite/gfortran.dg/data_substring.f90", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c034c38f8d6becbe6d607910351acceb58b97854/gcc%2Ftestsuite%2Fgfortran.dg%2Fdata_substring.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c034c38f8d6becbe6d607910351acceb58b97854/gcc%2Ftestsuite%2Fgfortran.dg%2Fdata_substring.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdata_substring.f90?ref=c034c38f8d6becbe6d607910351acceb58b97854", "patch": "@@ -0,0 +1,6 @@\n+! { dg-do compile }\n+! PR fortran/30792\n+character string*1025\n+integer i\n+data (string(i:i),i=1,1025)/1025*'?'/  ! { dg-error \"Invalid substring\" }\n+end"}]}