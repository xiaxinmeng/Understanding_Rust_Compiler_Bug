{"sha": "5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWRhMWVjZjI2ZTBkYTFjOGViN2Q2OTM5Y2U2ZTFjNGJiYmViN2Y5OA==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "1999-10-05T16:21:34Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "1999-10-05T16:21:34Z"}, "message": "mbchar.c (literal_codeset, [...]): Constify a char*.\n\n\t* mbchar.c (literal_codeset, local_mbtowc, local_mblen): Constify\n\ta char*.\n\t(local_mbtowc): Change the type of variable `i' from int to size_t.\n\n\t* mbchar.h (ISSJIS1, ISSJIS2): Use parens around && within ||.\n\t(local_mbtowc, local_mblen, literal_codeset): Constify a char*.\n\nFrom-SVN: r29827", "tree": {"sha": "c4e09005c1e1506838b18bc5bde1279009298f56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4e09005c1e1506838b18bc5bde1279009298f56"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98/comments", "author": null, "committer": null, "parents": [{"sha": "018fc244dc645ae8ff169d4cfdcf3b8580067410", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/018fc244dc645ae8ff169d4cfdcf3b8580067410", "html_url": "https://github.com/Rust-GCC/gccrs/commit/018fc244dc645ae8ff169d4cfdcf3b8580067410"}], "stats": {"total": 33, "additions": 21, "deletions": 12}, "files": [{"sha": "f91f855d8154a94bf1a5cf9fb9b40d71bfa26246", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98", "patch": "@@ -1,3 +1,12 @@\n+Tue Oct  5 12:16:49 1999  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* mbchar.c (literal_codeset, local_mbtowc, local_mblen): Constify\n+\ta char*.\n+\t(local_mbtowc): Change the type of variable `i' from int to size_t.\n+\n+\t* mbchar.h (ISSJIS1, ISSJIS2): Use parens around && within ||.\n+\t(local_mbtowc, local_mblen, literal_codeset): Constify a char*.\n+\n Tue Oct  5 11:34:52 1999  Michael Meissner  <meissner@cygnus.com>\n \n \t* ggc-{common,callbacks,none,page,simple}.c (toplevel): Reorder"}, {"sha": "3978612f342d9818ee4d6de49af3b7fa2a3df814", "filename": "gcc/mbchar.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98/gcc%2Fmbchar.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98/gcc%2Fmbchar.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmbchar.c?ref=5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98", "patch": "@@ -80,7 +80,7 @@ static JIS_ACTION JIS_action_table[JIS_S_NUM][JIS_C_NUM] = {\n };\n \n \n-char *literal_codeset = NULL;\n+const char *literal_codeset = NULL;\n \n /* Store into *PWC (if PWC is not null) the wide character\n    corresponding to the multibyte character at the start of the\n@@ -94,12 +94,12 @@ char *literal_codeset = NULL;\n int\n local_mbtowc (pwc, s, n)\n      wchar_t *pwc;\n-     char *s;\n+     const char *s;\n      size_t n;\n {\n   static JIS_STATE save_state = ASCII;\n   JIS_STATE curr_state = save_state;\n-  unsigned char *t = (unsigned char *) s;\n+  const unsigned char *t = (const unsigned char *) s;\n \n   if (s != NULL && n == 0)\n     return -1;\n@@ -178,8 +178,8 @@ local_mbtowc (pwc, s, n)\n     {\n       JIS_ACTION action;\n       JIS_CHAR_TYPE ch;\n-      unsigned char *ptr;\n-      int i, curr_ch;\n+      const unsigned char *ptr;\n+      size_t i, curr_ch;\n  \n       if (s == NULL)\n \t{\n@@ -260,7 +260,7 @@ local_mbtowc (pwc, s, n)\n \n             case MAKE_A:\n             case MAKE_J:\n-              ptr = (char *) (t + i + 1);\n+              ptr = (const unsigned char *) (t + i + 1);\n               break;\n \n             case ERROR:\n@@ -297,7 +297,7 @@ local_mbtowc (pwc, s, n)\n \n int\n local_mblen (s, n)\n-     char *s;\n+     const char *s;\n      size_t n;\n {\n   return local_mbtowc (NULL, s, n);"}, {"sha": "84060d454ea4311deb2d6f550707d332253ddc7b", "filename": "gcc/mbchar.h", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98/gcc%2Fmbchar.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98/gcc%2Fmbchar.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmbchar.h?ref=5da1ecf26e0da1c8eb7d6939ce6e1c4bbbeb7f98", "patch": "@@ -26,16 +26,16 @@ Boston, MA 02111-1307, USA.  */\n /* Escape character used for JIS encoding */\n #define JIS_ESC_CHAR 0x1b\n \n-#define ISSJIS1(c)   ((c) >= 0x81 && (c) <= 0x9f || (c) >= 0xe0 && (c) <= 0xef)\n-#define ISSJIS2(c)   ((c) >= 0x40 && (c) <= 0x7e || (c) >= 0x80 && (c) <= 0xfc)\n+#define ISSJIS1(c)   (((c) >= 0x81 && (c) <= 0x9f) || ((c) >= 0xe0 && (c) <= 0xef))\n+#define ISSJIS2(c)   (((c) >= 0x40 && (c) <= 0x7e) || ((c) >= 0x80 && (c) <= 0xfc))\n #define ISEUCJP(c)   ((c) >= 0xa1 && (c) <= 0xfe)\n #define ISJIS(c)     ((c) >= 0x21 && (c) <= 0x7e)\n \n-extern int local_mbtowc     PROTO ((wchar_t *, char *, size_t));\n-extern int local_mblen      PROTO ((char *, size_t));\n+extern int local_mbtowc     PROTO ((wchar_t *, const char *, size_t));\n+extern int local_mblen      PROTO ((const char *, size_t));\n extern int local_mb_cur_max PROTO ((void));\n \n /* The locale being used for multibyte characters in string/char literals.  */\n-extern char *literal_codeset;\n+extern const char *literal_codeset;\n #endif /* MULTIBYTE_CHARS */\n #endif"}]}