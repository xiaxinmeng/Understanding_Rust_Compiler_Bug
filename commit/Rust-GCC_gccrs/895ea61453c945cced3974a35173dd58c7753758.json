{"sha": "895ea61453c945cced3974a35173dd58c7753758", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODk1ZWE2MTQ1M2M5NDVjY2VkMzk3NGEzNTE3M2RkNThjNzc1Mzc1OA==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2000-07-12T20:15:20Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2000-07-12T20:15:20Z"}, "message": "c-decl.c (define_label): Warn about identifier conflicts with labels in traditional C.\n\n\t* c-decl.c (define_label): Warn about identifier conflicts with\n\tlabels in traditional C.\n\n\t* c-parse.in (unop +): Warn about the unary plus operator for\n\ttraditional C.\n\n\t* c-typeck.c (store_init_value): Warn about automatic aggregate\n\tinitialization for traditional C.\n\n\t* invoke.texi (-Wtraditional): Document new warnings.\n\nFrom-SVN: r34997", "tree": {"sha": "e7fca6dc3d8c848108c755daa00e7fe40a2c41e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7fca6dc3d8c848108c755daa00e7fe40a2c41e3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/895ea61453c945cced3974a35173dd58c7753758", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/895ea61453c945cced3974a35173dd58c7753758", "html_url": "https://github.com/Rust-GCC/gccrs/commit/895ea61453c945cced3974a35173dd58c7753758", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/895ea61453c945cced3974a35173dd58c7753758/comments", "author": null, "committer": null, "parents": [{"sha": "8364301f5a1725e900f4554f5d9358146c804ee3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8364301f5a1725e900f4554f5d9358146c804ee3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8364301f5a1725e900f4554f5d9358146c804ee3"}], "stats": {"total": 38, "additions": 37, "deletions": 1}, "files": [{"sha": "079c76401020da296a43d531ec16441b0beadb0a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/895ea61453c945cced3974a35173dd58c7753758/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/895ea61453c945cced3974a35173dd58c7753758/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=895ea61453c945cced3974a35173dd58c7753758", "patch": "@@ -1,3 +1,16 @@\n+2000-07-12  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* c-decl.c (define_label): Warn about identifier conflicts with\n+\tlabels in traditional C.\n+\n+\t* c-parse.in (unop +): Warn about the unary plus operator for\n+\ttraditional C.\n+\n+\t* c-typeck.c (store_init_value): Warn about automatic aggregate\n+\tinitialization for traditional C.\n+\n+\t* invoke.texi (-Wtraditional): Document new warnings.\n+\n 2000-07-12  Gabriel Dos Reis  <gdr@codesourcery.com>\n \n \t* Makefile.in (c-errors.o): Fix thinko in dependency."}, {"sha": "f212e186cb8e57ea43fd7c976a9d377ce09beefd", "filename": "gcc/c-decl.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/895ea61453c945cced3974a35173dd58c7753758/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/895ea61453c945cced3974a35173dd58c7753758/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=895ea61453c945cced3974a35173dd58c7753758", "patch": "@@ -2706,6 +2706,10 @@ define_label (filename, line, name)\n       decl = lookup_label (name);\n     }\n \n+  if (warn_traditional && lookup_name (name))\n+    warning (\"traditional C lacks a separate namespace for labels, identifier `%s' conflicts\",\n+\t     IDENTIFIER_POINTER (name));\n+  \n   if (DECL_INITIAL (decl) != 0)\n     {\n       error (\"duplicate label `%s'\", IDENTIFIER_POINTER (name));"}, {"sha": "87dfcebc810e13bdc7952cd677e964801fe5444b", "filename": "gcc/c-parse.in", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/895ea61453c945cced3974a35173dd58c7753758/gcc%2Fc-parse.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/895ea61453c945cced3974a35173dd58c7753758/gcc%2Fc-parse.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parse.in?ref=895ea61453c945cced3974a35173dd58c7753758", "patch": "@@ -411,7 +411,12 @@ unop:     '&'\n \t| '-'\n \t\t{ $$ = NEGATE_EXPR; }\n \t| '+'\n-\t\t{ $$ = CONVERT_EXPR; }\n+\t\t{ $$ = CONVERT_EXPR;\n+ifc\n+  if (warn_traditional)\n+    warning (\"traditional C rejects the unary plus operator\");\n+end ifc\n+\t\t}\n \t| PLUSPLUS\n \t\t{ $$ = PREINCREMENT_EXPR; }\n \t| MINUSMINUS"}, {"sha": "f0297642fda5b488719685c9a89cbe66cf3db2e4", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/895ea61453c945cced3974a35173dd58c7753758/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/895ea61453c945cced3974a35173dd58c7753758/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=895ea61453c945cced3974a35173dd58c7753758", "patch": "@@ -4401,6 +4401,10 @@ store_init_value (decl, init)\n     }\n #endif\n \n+  if (warn_traditional\n+      && AGGREGATE_TYPE_P (TREE_TYPE (decl)) && ! TREE_STATIC (decl))\n+    warning (\"traditional C rejects automatic aggregate initialization\");\n+\n   DECL_INITIAL (decl) = value;\n \n   /* ANSI wants warnings about out-of-range constant initializers.  */"}, {"sha": "95d743506dceee5060c1324a393629895095584c", "filename": "gcc/invoke.texi", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/895ea61453c945cced3974a35173dd58c7753758/gcc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/895ea61453c945cced3974a35173dd58c7753758/gcc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Finvoke.texi?ref=895ea61453c945cced3974a35173dd58c7753758", "patch": "@@ -1824,6 +1824,16 @@ Usage of ANSI string concatenation is detected.\n \n @item\n A function macro appears without arguments.\n+\n+@item\n+The unary plus operator.\n+\n+@item\n+Initialization of automatic aggregates.\n+\n+@item\n+Identifier conflicts with labels.  Traditional C lacks a separate\n+namespace for labels.\n @end itemize\n \n @item -Wundef"}]}