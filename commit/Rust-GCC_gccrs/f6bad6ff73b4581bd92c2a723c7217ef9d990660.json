{"sha": "f6bad6ff73b4581bd92c2a723c7217ef9d990660", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjZiYWQ2ZmY3M2I0NTgxYmQ5MmMyYTcyM2M3MjE3ZWY5ZDk5MDY2MA==", "commit": {"author": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1994-05-14T01:56:51Z"}, "committer": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1994-05-14T01:56:51Z"}, "message": "(integrate_decl_tree): Use copy_node to make a copy of the decl.\n\n(integrate_decl_tree): Use copy_node to make a copy\n        of the decl.  Also call copy_lang_decl to copy the\n        language-specific bits.\n\nFrom-SVN: r7296", "tree": {"sha": "184ffe6256797ddb00f65066d8ac3fa58b2115f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/184ffe6256797ddb00f65066d8ac3fa58b2115f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f6bad6ff73b4581bd92c2a723c7217ef9d990660", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6bad6ff73b4581bd92c2a723c7217ef9d990660", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6bad6ff73b4581bd92c2a723c7217ef9d990660", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6bad6ff73b4581bd92c2a723c7217ef9d990660/comments", "author": null, "committer": null, "parents": [{"sha": "78b099bdf3f3c171c31ed723ec5a67d0727795c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78b099bdf3f3c171c31ed723ec5a67d0727795c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78b099bdf3f3c171c31ed723ec5a67d0727795c3"}], "stats": {"total": 23, "additions": 11, "deletions": 12}, "files": [{"sha": "0d03ba85812ded0fcade92120597eb0b8f2e359c", "filename": "gcc/integrate.c", "status": "modified", "additions": 11, "deletions": 12, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6bad6ff73b4581bd92c2a723c7217ef9d990660/gcc%2Fintegrate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6bad6ff73b4581bd92c2a723c7217ef9d990660/gcc%2Fintegrate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fintegrate.c?ref=f6bad6ff73b4581bd92c2a723c7217ef9d990660", "patch": "@@ -1925,9 +1925,13 @@ integrate_decl_tree (let, level, map)\n   \n   for (t = BLOCK_VARS (let); t; t = TREE_CHAIN (t))\n     {\n-      tree d = build_decl (TREE_CODE (t), DECL_NAME (t), TREE_TYPE (t));\n-      DECL_SOURCE_LINE (d) = DECL_SOURCE_LINE (t);\n-      DECL_SOURCE_FILE (d) = DECL_SOURCE_FILE (t);\n+      tree d;\n+\n+      push_obstacks_nochange ();\n+      saveable_allocation ();\n+      d = copy_node (t);\n+      pop_obstacks ();\n+\n       if (DECL_RTL (t) != 0)\n \t{\n \t  DECL_RTL (d) = copy_rtx_and_substitute (DECL_RTL (t), map);\n@@ -1938,19 +1942,14 @@ integrate_decl_tree (let, level, map)\n \t  subst_constants (&DECL_RTL (d), NULL_RTX, map);\n \t  apply_change_group ();\n \t}\n-      else if (DECL_RTL (t))\n-\tDECL_RTL (d) = copy_rtx (DECL_RTL (t));\n-      DECL_EXTERNAL (d) = DECL_EXTERNAL (t);\n-      TREE_STATIC (d) = TREE_STATIC (t);\n-      TREE_PUBLIC (d) = TREE_PUBLIC (t);\n-      TREE_CONSTANT (d) = TREE_CONSTANT (t);\n-      TREE_ADDRESSABLE (d) = TREE_ADDRESSABLE (t);\n-      TREE_READONLY (d) = TREE_READONLY (t);\n-      TREE_SIDE_EFFECTS (d) = TREE_SIDE_EFFECTS (t);\n       /* These args would always appear unused, if not for this.  */\n       TREE_USED (d) = 1;\n       /* Prevent warning for shadowing with these.  */\n       DECL_ABSTRACT_ORIGIN (d) = t;\n+\n+      if (DECL_LANG_SPECIFIC (d))\n+\tcopy_lang_decl (d);\n+\n       pushdecl (d);\n     }\n "}]}