{"sha": "763a27ee730f23883d6ab6feacb9b22992a8d16c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzYzYTI3ZWU3MzBmMjM4ODNkNmFiNmZlYWNiOWIyMjk5MmE4ZDE2Yw==", "commit": {"author": {"name": "Danny Smith", "email": "dannysmith@users.sourceforge.net", "date": "2008-01-26T09:31:30Z"}, "committer": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2008-01-26T09:31:30Z"}, "message": "re PR target/34970 (name mangling broken for __attributte__((fastcall)))\n\nPR target/34970\n\ngcc\n\t* config/i386/cygming.h (ASM_OUTPUT_LABELREF): Define.\ntestsuite\n\t* gcc.target/i386/fastcall-1.c: Scan for correct label.\n\tUse -std=gnu89 switch.\n\nFrom-SVN: r131859", "tree": {"sha": "5756030d9aa7b91f6a9e3740f35f40f2ec92e01d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5756030d9aa7b91f6a9e3740f35f40f2ec92e01d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/763a27ee730f23883d6ab6feacb9b22992a8d16c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/763a27ee730f23883d6ab6feacb9b22992a8d16c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/763a27ee730f23883d6ab6feacb9b22992a8d16c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/763a27ee730f23883d6ab6feacb9b22992a8d16c/comments", "author": null, "committer": null, "parents": [{"sha": "8fa07a56dfd1e9a357e5ee498d55097d76695628", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fa07a56dfd1e9a357e5ee498d55097d76695628", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8fa07a56dfd1e9a357e5ee498d55097d76695628"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "d05641da28a902d45264851c250638b5bce3e039", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/763a27ee730f23883d6ab6feacb9b22992a8d16c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/763a27ee730f23883d6ab6feacb9b22992a8d16c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=763a27ee730f23883d6ab6feacb9b22992a8d16c", "patch": "@@ -1,3 +1,8 @@\n+2008-01-26  Danny Smith  <dannysmith@users.sourceforge.net>\n+\n+\tPR target/34970\n+\t* config/i386/cygming.h (ASM_OUTPUT_LABELREF): Define.\n+\n 2008-01-25  Joseph Myers  <joseph@codesourcery.com>\n \n \tPR other/31955"}, {"sha": "3b18af5ba0f0985acf9e71cdcab77dbca6beaaa4", "filename": "gcc/config/i386/cygming.h", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/763a27ee730f23883d6ab6feacb9b22992a8d16c/gcc%2Fconfig%2Fi386%2Fcygming.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/763a27ee730f23883d6ab6feacb9b22992a8d16c/gcc%2Fconfig%2Fi386%2Fcygming.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fcygming.h?ref=763a27ee730f23883d6ab6feacb9b22992a8d16c", "patch": "@@ -1,7 +1,7 @@\n /* Operating system specific defines to be used when targeting GCC for\n    hosting on Windows32, using a Unix style C library and tools.\n    Copyright (C) 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003,\n-   2004, 2005, 2007\n+   2004, 2005, 2007, 2008\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -197,6 +197,17 @@ do {\t\t\t\t\t\t\t\\\n   ASM_OUTPUT_LABEL ((STREAM), (NAME));\t\t\t\\\n } while (0)\n \n+/* Output a reference to a label. Fastcall function symbols\n+   keep their '@' prefix, while other symbols are prefixed\n+   with USER_LABEL_PREFIX.  */\n+#undef ASM_OUTPUT_LABELREF\n+#define  ASM_OUTPUT_LABELREF(STREAM, NAME)\t\\\n+do {\t\t\t\t\t\t\\\n+  if ((NAME)[0] != FASTCALL_PREFIX)\t\t\\\n+    fputs (USER_LABEL_PREFIX, (STREAM));\t\\\n+  fputs ((NAME), (STREAM));\t\t\t\\\n+} while (0)\n+\n \f\n /* Emit code to check the stack when allocating more than 4000\n    bytes in one go.  */"}, {"sha": "a09d87711c6607514273062f924d731ca379d5a4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/763a27ee730f23883d6ab6feacb9b22992a8d16c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/763a27ee730f23883d6ab6feacb9b22992a8d16c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=763a27ee730f23883d6ab6feacb9b22992a8d16c", "patch": "@@ -1,3 +1,9 @@\n+2008-01-26  Danny Smith  <dannysmith@users.sourceforge.net>\n+\n+\tPR target/34970\n+\t* gcc.target/i386/fastcall-1.c: Scan for correct label.\n+\tUse -std=gnu89 switch.\n+\n 2008-01-25  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR libfortran/34876"}, {"sha": "9d701239169f88bb69711d31965b4f9696808f6e", "filename": "gcc/testsuite/gcc.target/i386/fastcall-1.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/763a27ee730f23883d6ab6feacb9b22992a8d16c/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffastcall-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/763a27ee730f23883d6ab6feacb9b22992a8d16c/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffastcall-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffastcall-1.c?ref=763a27ee730f23883d6ab6feacb9b22992a8d16c", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do compile { target i?86-*-mingw32* i?86-*-cygwin* } } */\n+/* { dg-options \"-std=gnu89\" } */\n \n void\n __attribute__ ((fastcall))\n@@ -15,3 +16,6 @@ f3() { }\n void\n __attribute__ ((fastcall))\n f4(int x, int y, int z) { }\n+\n+/* Scan for global label with correct prefix and suffix.  */\n+/* { dg-final { scan-assembler \"\\.globl\\[ \\t\\]@f4@12\" } } */"}]}