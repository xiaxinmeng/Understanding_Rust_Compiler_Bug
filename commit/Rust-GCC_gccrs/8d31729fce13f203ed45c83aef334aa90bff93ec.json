{"sha": "8d31729fce13f203ed45c83aef334aa90bff93ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQzMTcyOWZjZTEzZjIwM2VkNDVjODNhZWYzMzRhYTkwYmZmOTNlYw==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1997-11-19T16:20:12Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1997-11-19T16:20:12Z"}, "message": "New test.\n\nFrom-SVN: r16578", "tree": {"sha": "258e7751ebc55344297e2b9a56221d4988f61d48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/258e7751ebc55344297e2b9a56221d4988f61d48"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d31729fce13f203ed45c83aef334aa90bff93ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d31729fce13f203ed45c83aef334aa90bff93ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d31729fce13f203ed45c83aef334aa90bff93ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d31729fce13f203ed45c83aef334aa90bff93ec/comments", "author": null, "committer": null, "parents": [{"sha": "4dff12bfa26cec4aedc2c0fb432c61d98c8e70f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4dff12bfa26cec4aedc2c0fb432c61d98c8e70f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4dff12bfa26cec4aedc2c0fb432c61d98c8e70f4"}], "stats": {"total": 72, "additions": 72, "deletions": 0}, "files": [{"sha": "649e87217ed7f263ac5d9794c19e282fea7a7982", "filename": "gcc/testsuite/g77.f-torture/execute/dnrm2.f", "status": "added", "additions": 72, "deletions": 0, "changes": 72, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d31729fce13f203ed45c83aef334aa90bff93ec/gcc%2Ftestsuite%2Fg77.f-torture%2Fexecute%2Fdnrm2.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d31729fce13f203ed45c83aef334aa90bff93ec/gcc%2Ftestsuite%2Fg77.f-torture%2Fexecute%2Fdnrm2.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg77.f-torture%2Fexecute%2Fdnrm2.f?ref=8d31729fce13f203ed45c83aef334aa90bff93ec", "patch": "@@ -0,0 +1,72 @@\n+CCC g77 0.5.21 `Actual Bugs':\n+CCC   * A code-generation bug afflicts Intel x86 targets when `-O2' is\n+CCC     specified compiling, for example, an old version of the `DNRM2'\n+CCC     routine.  The x87 coprocessor stack is being somewhat mismanaged\n+CCC     in cases where assigned `GOTO' and `ASSIGN' are involved.\n+CCC\n+CCC     Version 0.5.21 of `g77' contains an initial effort to fix the\n+CCC     problem, but this effort is incomplete, and a more complete fix is\n+CCC     planned for the next release.\n+\n+C     Currently this test fails with (at least) `-O2 -funroll-loops' on\n+C     i586-unknown-linux-gnulibc1.\n+\n+C     (This is actually an obsolete version of dnrm2 -- consult the\n+c     current Netlib BLAS.)\n+\n+      integer i\n+      double precision a(1:100)\n+      do i=1,100\n+         a(i)=0.D0\n+      enddo\n+      if (dnrm2(100,a,1) .ne. 0.0) call exit(1)\n+      end\n+\n+      double precision function dnrm2 ( n, dx, incx)\n+      integer i, incx, ix, j, n, next\n+      double precision   dx(1), cutlo, cuthi, hitest, sum, xmax,zero,one\n+      data   zero, one /0.0d0, 1.0d0/\n+      if(n .gt. 0 .and. incx.gt.0) go to 10\n+         dnrm2  = zero\n+         go to 300\n+   10 assign 30 to next\n+      sum = zero\n+      i = 1\n+      ix = 1\n+   20    go to next,(30, 50, 70, 110)\n+   30 if( dabs(dx(i)) .gt. cutlo) go to 85\n+      assign 50 to next\n+      xmax = zero\n+   50 if( dx(i) .eq. zero) go to 200\n+      if( dabs(dx(i)) .gt. cutlo) go to 85\n+      assign 70 to next\n+      go to 105\n+  100 continue\n+      ix = j\n+      assign 110 to next\n+      sum = (sum / dx(i)) / dx(i)\n+  105 xmax = dabs(dx(i))\n+      go to 115\n+   70 if( dabs(dx(i)) .gt. cutlo ) go to 75\n+  110 if( dabs(dx(i)) .le. xmax ) go to 115\n+         sum = one + sum * (xmax / dx(i))**2\n+         xmax = dabs(dx(i))\n+         go to 200\n+  115 sum = sum + (dx(i)/xmax)**2\n+      go to 200\n+   75 sum = (sum * xmax) * xmax\n+   85 hitest = cuthi/float( n )\n+      do 95 j = ix,n\n+      if(dabs(dx(i)) .ge. hitest) go to 100\n+         sum = sum + dx(i)**2\n+         i = i + incx\n+   95 continue\n+      dnrm2 = dsqrt( sum )\n+      go to 300\n+  200 continue\n+      ix = ix + 1\n+      i = i + incx\n+      if( ix .le. n ) go to 20\n+      dnrm2 = xmax * dsqrt(sum)\n+  300 continue\n+      end"}]}