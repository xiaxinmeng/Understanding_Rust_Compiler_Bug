{"sha": "67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjdlOTUxOGUyMGI4YjgzNmJiYWE5ZGM3ODNiZDZhNGRiNTZjMmJjYg==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2018-05-21T06:45:55Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2018-05-21T06:45:55Z"}, "message": "re PR fortran/85841 ([F2018] reject deleted features)\n\n2018-05-21  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/85841\n\t* libgfortran.h: New macros GFC_STD_OPT_*.\n\t* error.c (notify_std_msg): New function.\n\t(gfc_notify_std): Adjust such that it can handle combinations of\n\tGFC_STD_* flags in the 'std' argument, not just a single one.\n\t* match.c (match_arithmetic_if, gfc_match_if): Reject arithmetic if\n\tin Fortran 2018.\n\t(gfc_match_stopcode): Use GFC_STD_OPT_* macros.\n\t* options.c (set_default_std_flags): Warn for F2018 deleted features\n\tby default.\n\t(gfc_handle_option): F2018 deleted features are allowed in earlier\n\tstandards.\n\t* symbol.c (gfc_define_st_label, gfc_reference_st_label): Reject\n\tnonblock do constructs in Fortran 2018.\n\n\n2018-05-21  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/85841\n\t* gfortran.dg/g77/19990826-3.f: Add option \"-std=legacy\".\n\t* gfortran.dg/g77/20020307-1.f: Ditto.\n\t* gfortran.dg/g77/980310-3.f: Ditto.\n\t* gfortran.dg/goacc/loop-1-2.f95: Ditto.\n\t* gfortran.dg/goacc/loop-1.f95: Ditto.\n\t* gfortran.dg/gomp/appendix-a/a.6.1.f90: Ditto.\n\t* gfortran.dg/gomp/appendix-a/a.6.2.f90: Ditto.\n\t* gfortran.dg/gomp/do-1.f90: Ditto.\n\t* gfortran.dg/gomp/omp_do1.f90: Ditto.\n\t* gfortran.dg/pr17229.f: Ditto.\n\t* gfortran.dg/pr37243.f: Ditto.\n\t* gfortran.dg/pr49721-1.f: Ditto.\n\t* gfortran.dg/pr58484.f: Ditto.\n\t* gfortran.dg/pr81175.f: Ditto.\n\t* gfortran.dg/pr81723.f: Ditto.\n\t* gfortran.dg/predcom-2.f: Ditto.\n\t* gfortran.dg/vect/Ofast-pr50414.f90: Ditto.\n\t* gfortran.dg/vect/cost-model-pr34445a.f: Ditto.\n\t* gfortran.dg/vect/fast-math-mgrid-resid.f: Ditto.\n\t* gfortran.dg/vect/pr52580.f: Ditto.\n\nFrom-SVN: r260433", "tree": {"sha": "746807b3f3b84235d9e02e992b13eca29b037db2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/746807b3f3b84235d9e02e992b13eca29b037db2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f3f7cefecc833b4ab652215ceb8b408c21dca225", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3f7cefecc833b4ab652215ceb8b408c21dca225", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3f7cefecc833b4ab652215ceb8b408c21dca225"}], "stats": {"total": 264, "additions": 160, "deletions": 104}, "files": [{"sha": "190ce3e0d7d1265571b0c223cfac2a2d621b1d7f", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,3 +1,20 @@\n+2018-05-21  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/85841\n+\t* libgfortran.h: New macros GFC_STD_OPT_*.\n+\t* error.c (notify_std_msg): New function.\n+\t(gfc_notify_std): Adjust such that it can handle combinations of\n+\tGFC_STD_* flags in the 'std' argument, not just a single one.\n+\t* match.c (match_arithmetic_if, gfc_match_if): Reject arithmetic if\n+\tin Fortran 2018.\n+\t(gfc_match_stopcode): Use GFC_STD_OPT_* macros.\n+\t* options.c (set_default_std_flags): Warn for F2018 deleted features\n+\tby default.\n+\t(gfc_handle_option): F2018 deleted features are allowed in earlier\n+\tstandards.\n+\t* symbol.c (gfc_define_st_label, gfc_reference_st_label): Reject\n+\tnonblock do constructs in Fortran 2018.\n+\n 2018-05-20  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/80657"}, {"sha": "fc183e0bf7063683f42300f2a9cf49ea3f299992", "filename": "gcc/fortran/error.c", "status": "modified", "additions": 53, "deletions": 47, "changes": 100, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ferror.c?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -842,6 +842,40 @@ gfc_notification_std (int std)\n }\n \n \n+/* Return a string describing the nature of a standard violation\n+ * and/or the relevant version of the standard.  */\n+\n+char const*\n+notify_std_msg(int std)\n+{\n+\n+  if (std & GFC_STD_F2018_DEL)\n+    return _(\"Fortran 2018 deleted feature:\");\n+  else if (std & GFC_STD_F2018_OBS)\n+    return _(\"Fortran 2018 obsolescent feature:\");\n+  else if (std & GFC_STD_F2018)\n+    return _(\"Fortran 2018:\");\n+  else if (std & GFC_STD_F2008_TS)\n+    return \"TS 29113/TS 18508:\";\n+  else if (std & GFC_STD_F2008_OBS)\n+    return _(\"Fortran 2008 obsolescent feature:\");\n+  else if (std & GFC_STD_F2008)\n+    return \"Fortran 2008:\";\n+  else if (std & GFC_STD_F2003)\n+    return \"Fortran 2003:\";\n+  else if (std & GFC_STD_GNU)\n+    return _(\"GNU Extension:\");\n+  else if (std & GFC_STD_LEGACY)\n+    return _(\"Legacy Extension:\");\n+  else if (std & GFC_STD_F95_OBS)\n+    return _(\"Obsolescent feature:\");\n+  else if (std & GFC_STD_F95_DEL)\n+    return _(\"Deleted feature:\");\n+  else\n+    gcc_unreachable ();\n+}\n+\n+\n /* Possibly issue a warning/error about use of a nonstandard (or deleted)\n    feature.  An error/warning will be issued if the currently selected\n    standard does not contain the requested bits.  Return false if\n@@ -851,55 +885,24 @@ bool\n gfc_notify_std (int std, const char *gmsgid, ...)\n {\n   va_list argp;\n-  bool warning;\n   const char *msg, *msg2;\n   char *buffer;\n \n-  warning = ((gfc_option.warn_std & std) != 0) && !inhibit_warnings;\n-  if ((gfc_option.allow_std & std) != 0 && !warning)\n-    return true;\n+  /* Determine whether an error or a warning is needed.  */\n+  const int wstd = std & gfc_option.warn_std;    /* Standard to warn about.  */\n+  const int estd = std & ~gfc_option.allow_std;  /* Standard to error about.  */\n+  const bool warning = (wstd != 0) && !inhibit_warnings;\n+  const bool error = (estd != 0);\n \n+  if (!error && !warning)\n+    return true;\n   if (suppress_errors)\n-    return warning ? true : false;\n+    return !error;\n \n-  switch (std)\n-  {\n-    case GFC_STD_F2018_DEL:\n-      msg = _(\"Fortran 2018 deleted feature:\");\n-      break;\n-    case GFC_STD_F2018_OBS:\n-      msg = _(\"Fortran 2018 obsolescent feature:\");\n-      break;\n-    case GFC_STD_F2018:\n-      msg = _(\"Fortran 2018:\");\n-      break;\n-    case GFC_STD_F2008_TS:\n-      msg = \"TS 29113/TS 18508:\";\n-      break;\n-    case GFC_STD_F2008_OBS:\n-      msg = _(\"Fortran 2008 obsolescent feature:\");\n-      break;\n-    case GFC_STD_F2008:\n-      msg = \"Fortran 2008:\";\n-      break;\n-    case GFC_STD_F2003:\n-      msg = \"Fortran 2003:\";\n-      break;\n-    case GFC_STD_GNU:\n-      msg = _(\"GNU Extension:\");\n-      break;\n-    case GFC_STD_LEGACY:\n-      msg = _(\"Legacy Extension:\");\n-      break;\n-    case GFC_STD_F95_OBS:\n-      msg = _(\"Obsolescent feature:\");\n-      break;\n-    case GFC_STD_F95_DEL:\n-      msg = _(\"Deleted feature:\");\n-      break;\n-    default:\n-      gcc_unreachable ();\n-  }\n+  if (error)\n+    msg = notify_std_msg (estd);\n+  else\n+    msg = notify_std_msg (wstd);\n \n   msg2 = _(gmsgid);\n   buffer = (char *) alloca (strlen (msg) + strlen (msg2) + 2);\n@@ -908,13 +911,16 @@ gfc_notify_std (int std, const char *gmsgid, ...)\n   strcat (buffer, msg2);\n \n   va_start (argp, gmsgid);\n-  if (warning)\n-    gfc_warning (0, buffer, argp);\n-  else\n+  if (error)\n     gfc_error_opt (0, buffer, argp);\n+  else\n+    gfc_warning (0, buffer, argp);\n   va_end (argp);\n \n-  return (warning && !warnings_are_errors) ? true : false;\n+  if (error)\n+    return false;\n+  else\n+    return (warning && !warnings_are_errors);\n }\n \n "}, {"sha": "278ee41655e509fdff919a5dc0a8df78c4b11a56", "filename": "gcc/fortran/libgfortran.h", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2Flibgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2Flibgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Flibgfortran.h?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -37,6 +37,16 @@ along with GCC; see the file COPYING3.  If not see\n #define GFC_STD_F77\t\t(1<<0)\t/* Included in F77, but not deleted or\n \t\t\t\t\t   obsolescent in later standards.  */\n \n+/* Combinations of the above flags that specify which classes of features\n+ * are allowed with a certain -std option.  */\n+#define GFC_STD_OPT_F95\t\t(GFC_STD_F77 | GFC_STD_F95 | GFC_STD_F95_OBS  \\\n+\t\t\t\t| GFC_STD_F2008_OBS | GFC_STD_F2018_OBS \\\n+\t\t\t\t| GFC_STD_F2018_DEL)\n+#define GFC_STD_OPT_F03\t\t(GFC_STD_OPT_F95 | GFC_STD_F2003)\n+#define GFC_STD_OPT_F08\t\t(GFC_STD_OPT_F03 | GFC_STD_F2008)\n+#define GFC_STD_OPT_F08TS\t(GFC_STD_OPT_F08 | GFC_STD_F2008_TS)\n+#define GFC_STD_OPT_F18\t\t((GFC_STD_OPT_F08TS | GFC_STD_F2018) \\\n+\t\t\t\t& (~GFC_STD_F2018_DEL))\n \n /* Bitmasks for the various FPE that can be enabled.  These need to be straight integers\n    e.g., 8 instead of (1<<3), because they will be included in Fortran source.  */"}, {"sha": "6d53d03e91d28173cfe93515634193013777e4dc", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1442,7 +1442,8 @@ match_arithmetic_if (void)\n       return MATCH_ERROR;\n     }\n \n-  if (!gfc_notify_std (GFC_STD_F95_OBS, \"Arithmetic IF statement at %C\"))\n+  if (!gfc_notify_std (GFC_STD_F95_OBS | GFC_STD_F2018_DEL,\n+\t\t       \"Arithmetic IF statement at %C\"))\n     return MATCH_ERROR;\n \n   new_st.op = EXEC_ARITHMETIC_IF;\n@@ -1522,7 +1523,8 @@ gfc_match_if (gfc_statement *if_type)\n \t  return MATCH_ERROR;\n \t}\n \n-      if (!gfc_notify_std (GFC_STD_F95_OBS, \"Arithmetic IF statement at %C\"))\n+      if (!gfc_notify_std (GFC_STD_F95_OBS | GFC_STD_F2018_DEL,\n+\t\t\t   \"Arithmetic IF statement at %C\"))\n \treturn MATCH_ERROR;\n \n       new_st.op = EXEC_ARITHMETIC_IF;\n@@ -2938,12 +2940,10 @@ gfc_match_stopcode (gfc_statement st)\n   bool f95, f03;\n \n   /* Set f95 for -std=f95.  */\n-  f95 = gfc_option.allow_std == (GFC_STD_F95_OBS | GFC_STD_F95 | GFC_STD_F77\n-\t\t\t\t | GFC_STD_F2008_OBS);\n+  f95 = (gfc_option.allow_std == GFC_STD_OPT_F95);\n \n   /* Set f03 for -std=f2003.  */\n-  f03 = gfc_option.allow_std == (GFC_STD_F95_OBS | GFC_STD_F95 | GFC_STD_F77\n-\t\t\t\t | GFC_STD_F2008_OBS | GFC_STD_F2003);\n+  f03 = (gfc_option.allow_std == GFC_STD_OPT_F03);\n \n   /* Look for a blank between STOP and the stop-code for F2008 or later.  */\n   if (gfc_current_form != FORM_FIXED && !(f95 || f03))"}, {"sha": "6f45a8e284d31292a3a2da59e98f55563ad588a2", "filename": "gcc/fortran/options.c", "status": "modified", "additions": 6, "deletions": 13, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2Foptions.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2Foptions.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Foptions.c?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -44,7 +44,7 @@ set_default_std_flags (void)\n     | GFC_STD_F2003 | GFC_STD_F2008 | GFC_STD_F95 | GFC_STD_F77\n     | GFC_STD_F2008_OBS | GFC_STD_F2008_TS | GFC_STD_GNU | GFC_STD_LEGACY\n     | GFC_STD_F2018 | GFC_STD_F2018_DEL | GFC_STD_F2018_OBS;\n-  gfc_option.warn_std = GFC_STD_F95_DEL | GFC_STD_LEGACY;\n+  gfc_option.warn_std = GFC_STD_F2018_DEL | GFC_STD_F95_DEL | GFC_STD_LEGACY;\n }\n \n \n@@ -705,8 +705,7 @@ gfc_handle_option (size_t scode, const char *arg, int value,\n       break;\n \n     case OPT_std_f95:\n-      gfc_option.allow_std = GFC_STD_F95_OBS | GFC_STD_F95 | GFC_STD_F77\n-\t\t\t     | GFC_STD_F2008_OBS;\n+      gfc_option.allow_std = GFC_STD_OPT_F95;\n       gfc_option.warn_std = GFC_STD_F95_OBS;\n       gfc_option.max_continue_fixed = 19;\n       gfc_option.max_continue_free = 39;\n@@ -716,37 +715,31 @@ gfc_handle_option (size_t scode, const char *arg, int value,\n       break;\n \n     case OPT_std_f2003:\n-      gfc_option.allow_std = GFC_STD_F95_OBS | GFC_STD_F77 \n-\t| GFC_STD_F2003 | GFC_STD_F95 | GFC_STD_F2008_OBS;\n+      gfc_option.allow_std = GFC_STD_OPT_F03;\n       gfc_option.warn_std = GFC_STD_F95_OBS;\n       gfc_option.max_identifier_length = 63;\n       warn_ampersand = 1;\n       warn_tabs = 1;\n       break;\n \n     case OPT_std_f2008:\n-      gfc_option.allow_std = GFC_STD_F95_OBS | GFC_STD_F77 \n-\t| GFC_STD_F2003 | GFC_STD_F95 | GFC_STD_F2008 | GFC_STD_F2008_OBS;\n+      gfc_option.allow_std = GFC_STD_OPT_F08;\n       gfc_option.warn_std = GFC_STD_F95_OBS | GFC_STD_F2008_OBS;\n       gfc_option.max_identifier_length = 63;\n       warn_ampersand = 1;\n       warn_tabs = 1;\n       break;\n \n     case OPT_std_f2008ts:\n-      gfc_option.allow_std = GFC_STD_F95_OBS | GFC_STD_F77 \n-\t| GFC_STD_F2003 | GFC_STD_F95 | GFC_STD_F2008 | GFC_STD_F2008_OBS\n-\t| GFC_STD_F2008_TS;\n+      gfc_option.allow_std = GFC_STD_OPT_F08TS;\n       gfc_option.warn_std = GFC_STD_F95_OBS | GFC_STD_F2008_OBS;\n       gfc_option.max_identifier_length = 63;\n       warn_ampersand = 1;\n       warn_tabs = 1;\n       break;\n \n     case OPT_std_f2018:\n-      gfc_option.allow_std = GFC_STD_F95_OBS | GFC_STD_F77\n-\t| GFC_STD_F2003 | GFC_STD_F95 | GFC_STD_F2008 | GFC_STD_F2008_OBS\n-\t| GFC_STD_F2008_TS | GFC_STD_F2018 | GFC_STD_F2018_OBS;\n+      gfc_option.allow_std = GFC_STD_OPT_F18;\n       gfc_option.warn_std = GFC_STD_F95_OBS | GFC_STD_F2008_OBS\n \t| GFC_STD_F2018_OBS;\n       gfc_option.max_identifier_length = 63;"}, {"sha": "5538763732a59a3e03fba14eb2548fdf1b02993f", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -2721,9 +2721,9 @@ gfc_define_st_label (gfc_st_label *lp, gfc_sl_type type, locus *label_locus)\n \t    lp->defined = type;\n \n \t  if (lp->referenced == ST_LABEL_DO_TARGET && type != ST_LABEL_DO_TARGET\n-      \t      && !gfc_notify_std (GFC_STD_F95_OBS, \"DO termination statement \"\n-\t\t\t\t  \"which is not END DO or CONTINUE with \"\n-\t\t\t\t  \"label %d at %C\", labelno))\n+      \t      && !gfc_notify_std (GFC_STD_F95_OBS | GFC_STD_F2018_DEL,\n+\t\t\t\t  \"DO termination statement which is not END DO\"\n+\t\t\t\t  \" or CONTINUE with label %d at %C\", labelno))\n \t    return;\n \t  break;\n \n@@ -2778,8 +2778,8 @@ gfc_reference_st_label (gfc_st_label *lp, gfc_sl_type type)\n     }\n \n   if (lp->referenced == ST_LABEL_DO_TARGET && type == ST_LABEL_DO_TARGET\n-      && !gfc_notify_std (GFC_STD_F95_OBS, \"Shared DO termination label %d \"\n-\t\t\t  \"at %C\", labelno))\n+      && !gfc_notify_std (GFC_STD_F95_OBS | GFC_STD_F2018_DEL,\n+\t\t\t  \"Shared DO termination label %d at %C\", labelno))\n     return false;\n \n   if (lp->referenced != ST_LABEL_DO_TARGET)"}, {"sha": "250f7a247edc8ec23f7d2dae9bf043351386aecf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,3 +1,27 @@\n+2018-05-21  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/85841\n+\t* gfortran.dg/g77/19990826-3.f: Add option \"-std=legacy\".\n+\t* gfortran.dg/g77/20020307-1.f: Ditto.\n+\t* gfortran.dg/g77/980310-3.f: Ditto.\n+\t* gfortran.dg/goacc/loop-1-2.f95: Ditto.\n+\t* gfortran.dg/goacc/loop-1.f95: Ditto.\n+\t* gfortran.dg/gomp/appendix-a/a.6.1.f90: Ditto.\n+\t* gfortran.dg/gomp/appendix-a/a.6.2.f90: Ditto.\n+\t* gfortran.dg/gomp/do-1.f90: Ditto.\n+\t* gfortran.dg/gomp/omp_do1.f90: Ditto.\n+\t* gfortran.dg/pr17229.f: Ditto.\n+\t* gfortran.dg/pr37243.f: Ditto.\n+\t* gfortran.dg/pr49721-1.f: Ditto.\n+\t* gfortran.dg/pr58484.f: Ditto.\n+\t* gfortran.dg/pr81175.f: Ditto.\n+\t* gfortran.dg/pr81723.f: Ditto.\n+\t* gfortran.dg/predcom-2.f: Ditto.\n+\t* gfortran.dg/vect/Ofast-pr50414.f90: Ditto.\n+\t* gfortran.dg/vect/cost-model-pr34445a.f: Ditto.\n+\t* gfortran.dg/vect/fast-math-mgrid-resid.f: Ditto.\n+\t* gfortran.dg/vect/pr52580.f: Ditto.\n+\n 2018-05-20  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/80657"}, {"sha": "6e5f9924f9b9733cc4548bc37faa17a79819dc5b", "filename": "gcc/testsuite/gfortran.dg/g77/19990826-3.f", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2F19990826-3.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2F19990826-3.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2F19990826-3.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,4 +1,5 @@\n c { dg-do compile }\n+c { dg-options \"-std=legacy\" }\n * Date: Thu, 19 Aug 1999 10:02:32 +0200\n * From: Frederic Devernay <devernay@istar.fr>\n * Organization: ISTAR\n@@ -64,7 +65,7 @@ SUBROUTINE PCAPOP(M1,M2,L1,L2,NMEM,N1,N2,IB,IBB,K3,TF,TS,TC,TTO)\n       IF(M2.LT.64)INDE=5\n       IF(M2.LT.32)INDE=4\n       DO 3 NUN =3,INUN\n-      DO 3 NDE=3,INDE ! { dg-warning \"Obsolescent feature: Shared DO termination\" }\n+      DO 3 NDE=3,INDE\n       N10=2**NUN\n       N20=2**NDE\n       NDIF=(N10-N20)"}, {"sha": "0ef4e6863bf44acdad7023f9c127b0d436c4efef", "filename": "gcc/testsuite/gfortran.dg/g77/20020307-1.f", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2F20020307-1.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2F20020307-1.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2F20020307-1.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,12 +1,13 @@\n c { dg-do compile }\n+c { dg-options \"-std=legacy\" }\n       SUBROUTINE SWEEP\n       PARAMETER(MAXDIM=4,MAXVEC=4**3*8,MAXT=20)\n       REAL(KIND=8) B,W1,W2,BNORM,BINV,WT,W0,C1,C2,R1,R2\n       DIMENSION B(MAXVEC,0:3),W1(MAXVEC,0:3),W2(MAXVEC,0:3)\n       DIMENSION BNORM(MAXVEC),BINV(MAXVEC),WT(MAXVEC),W0(MAXVEC)\n       DIMENSION C1(MAXVEC),C2(MAXVEC),R1(MAXVEC),R2(MAXVEC)\n       DO 200 ILAT=1,2**IDIM\n-      DO 200 I1=1,IDIM  ! { dg-warning \"Obsolescent feature: Shared DO termination\" }\n+      DO 200 I1=1,IDIM\n       DO 220 I2=1,IDIM\n       CALL INTACT(ILAT,I1,I1,W1)\n 220   CONTINUE"}, {"sha": "39bd86c8036595d0b55b7d62cdf1a711fe0259f0", "filename": "gcc/testsuite/gfortran.dg/g77/980310-3.f", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2F980310-3.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2F980310-3.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2F980310-3.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,4 +1,5 @@\n c { dg-do compile }\n+c { dg-options \"-std=legacy\" }\n c\n c This demonstrates a problem with g77 and pic on x86 where \n c egcs 1.0.1 and earlier will generate bogus assembler output.\n@@ -128,7 +129,7 @@ subroutine scaleg (n,ma,a,mb,b,low,igh,cscale,cperm,wk)\n c\n       basl = dlog10(2.0d0)\n       do 240 i = low,igh\n-         do 240 j = low,igh ! { dg-warning \"Obsolescent feature: Shared DO termination\" }\n+         do 240 j = low,igh\n             tb = b(i,j)\n             ta = a(i,j)\n             if (ta .eq. 0.0d0) go to 220\n@@ -242,7 +243,7 @@ subroutine scaleg (n,ma,a,mb,b,low,igh,cscale,cperm,wk)\n          ir = wk(i,1)\n          fi = 2.0d0**ir\n          if (i .lt. low) fi = 1.0d0\n-         do 400 j =low,n ! { dg-warning \"Obsolescent feature: Shared DO termination\" }\n+         do 400 j =low,n\n             jc = cscale(j)\n             fj = 2.0d0**jc\n             if (j .le. igh) go to 390"}, {"sha": "f89687aab43be5657c439a3441f480308d2cec99", "filename": "gcc/testsuite/gfortran.dg/goacc/loop-1-2.f95", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Floop-1-2.f95", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Floop-1-2.f95", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Floop-1-2.f95?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,4 +1,5 @@\n ! See also loop-1.f95.\n+! { dg-additional-options \"-std=legacy\" }\n \n program test\n   call test1\n@@ -32,14 +33,12 @@ subroutine test1\n   do 300 d = 1, 30, 6\n       i = d\n   300 a(i) = 1\n-  ! { dg-warning \"Deleted feature: Loop variable at .1. must be integer\" \"\" { target *-*-* } 32 }\n-  ! { dg-error \"ACC LOOP iteration variable must be of type integer\" \"\" { target *-*-* } 32 }\n+  ! { dg-error \"ACC LOOP iteration variable must be of type integer\" \"\" { target *-*-* } 33 }\n   !$acc loop\n   do d = 1, 30, 5\n        i = d\n       a(i) = 2\n   end do\n-  ! { dg-warning \"Deleted feature: Loop variable at .1. must be integer\" \"\" { target *-*-* } 38 }\n   ! { dg-error \"ACC LOOP iteration variable must be of type integer\" \"\" { target *-*-* } 38 }\n   !$acc loop\n   do i = 1, 30\n@@ -150,8 +149,7 @@ subroutine test1\n     do i = 1, 3\n         do r = 4, 6\n         end do\n-        ! { dg-warning \"Deleted feature: Loop variable at .1. must be integer\" \"\" { target *-*-* } 151 }\n-        ! { dg-error \"ACC LOOP iteration variable must be of type integer\" \"\" { target *-*-* } 151 }\n+        ! { dg-error \"ACC LOOP iteration variable must be of type integer\" \"\" { target *-*-* } 150 }\n     end do\n \n     ! Both seq and independent are not allowed"}, {"sha": "e51c9a40f9237ce739aba8244602a08e6fc36e66", "filename": "gcc/testsuite/gfortran.dg/goacc/loop-1.f95", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Floop-1.f95", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Floop-1.f95", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Floop-1.f95?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,4 +1,5 @@\n ! See also loop-1-2.f95.\n+! { dg-additional-options \"-std=legacy\" }\n \n module test\n   implicit none\n@@ -32,14 +33,12 @@ subroutine test1\n   do 300 d = 1, 30, 6\n       i = d\n   300 a(i) = 1\n-  ! { dg-warning \"Deleted feature: Loop variable at .1. must be integer\" \"\" { target *-*-* } 32 }\n-  ! { dg-error \"ACC LOOP iteration variable must be of type integer\" \"\" { target *-*-* } 32 }\n+  ! { dg-error \"ACC LOOP iteration variable must be of type integer\" \"\" { target *-*-* } 33 }\n   !$acc loop\n   do d = 1, 30, 5\n        i = d\n       a(i) = 2\n   end do\n-  ! { dg-warning \"Deleted feature: Loop variable at .1. must be integer\" \"\" { target *-*-* } 38 }\n   ! { dg-error \"ACC LOOP iteration variable must be of type integer\" \"\" { target *-*-* } 38 }\n   !$acc loop\n   do i = 1, 30\n@@ -150,8 +149,7 @@ subroutine test1\n     do i = 1, 3\n         do r = 4, 6\n         end do\n-        ! { dg-warning \"Deleted feature: Loop variable at .1. must be integer\" \"\" { target *-*-* } 151 }\n-        ! { dg-error \"ACC LOOP iteration variable must be of type integer\" \"\" { target *-*-* } 151 }\n+        ! { dg-error \"ACC LOOP iteration variable must be of type integer\" \"\" { target *-*-* } 150 }\n     end do\n \n     ! Both seq and independent are not allowed"}, {"sha": "189dff95ae447eb3b6f8c915c1dad7406c84238f", "filename": "gcc/testsuite/gfortran.dg/gomp/appendix-a/a.6.1.f90", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.6.1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.6.1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.6.1.f90?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,4 +1,5 @@\n ! { dg-do compile }\n+! { dg-options \"-std=legacy\" }\n \n       SUBROUTINE WORK(I, J)\n       INTEGER I,J"}, {"sha": "677880fe13e62f1b727b16a92486fa6e5f3056e0", "filename": "gcc/testsuite/gfortran.dg/gomp/appendix-a/a.6.2.f90", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.6.2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.6.2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.6.2.f90?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,4 +1,5 @@\n ! { dg-do compile }\n+! { dg-additional-options \"-std=legacy\" }\n \n         SUBROUTINE WORK(I, J)\n         INTEGER I,J"}, {"sha": "94978eabad481d06a431e962a076e3363d62fa9f", "filename": "gcc/testsuite/gfortran.dg/gomp/do-1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fdo-1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fdo-1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fdo-1.f90?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-options \"-O -fopenmp -fdump-tree-omplower\" }\n+! { dg-options \"-O -fopenmp -fdump-tree-omplower -std=legacy\" }\n \n subroutine foo (i, j, k, s, a)\n   integer :: i, j, k, s, a(100), l"}, {"sha": "3f33e27d9a706f0bfbcd708804a651dabc17ae43", "filename": "gcc/testsuite/gfortran.dg/gomp/omp_do1.f90", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fomp_do1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fomp_do1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fomp_do1.f90?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-options \"-fopenmp -std=gnu\" }\n+! { dg-options \"-fopenmp -std=legacy\" }\n subroutine foo\n   integer :: i, j\n   integer, dimension (30) :: a\n@@ -24,11 +24,11 @@ subroutine foo\n     i = i + 1\n   end do\n !$omp do\n-  do 300 d = 1, 30, 6 ! { dg-warning \"Deleted feature: Loop variable\" }\n+  do 300 d = 1, 30, 6\n     i = d\n 300 a(i) = 1\n !$omp do\n-  do d = 1, 30, 5 ! { dg-warning \"Deleted feature: Loop variable\" }\n+  do d = 1, 30, 5\n     i = d\n     a(i) = 2\n   end do"}, {"sha": "cce4388ddce9aa4c386e0b41177364a439f87821", "filename": "gcc/testsuite/gfortran.dg/pr17229.f", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr17229.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr17229.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr17229.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,23 +1,24 @@\n ! PR fortran/17229\n ! { dg-do run }\n+! { dg-options \"-std=legacy\" }\n \n       integer i\n       logical l\n \n       l = .false.\n       i = -1\n-      if (l) if (i) 999,999,999 ! { dg-warning \"Obsolescent feature\" }\n+      if (l) if (i) 999,999,999\n \n       l = .true.\n-      if (l) if (i) 10,999,999 ! { dg-warning \"Obsolescent feature\" }\n+      if (l) if (i) 10,999,999\n       go to 999\n \n    10 i = 0\n-      if (l) if (i) 999,20,999 ! { dg-warning \"Obsolescent feature\" }\n+      if (l) if (i) 999,20,999\n       go to 999\n \n    20 i = 1\n-      if (l) if (i) 999,999,30 ! { dg-warning \"Obsolescent feature\" }\n+      if (l) if (i) 999,999,30\n       go to 999\n \n   999 STOP 1"}, {"sha": "f2a10a080555d0a818e1d515d09d88d7b7c72d39", "filename": "gcc/testsuite/gfortran.dg/pr37243.f", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr37243.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr37243.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr37243.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,5 +1,6 @@\n ! PR rtl-optimization/37243\n ! { dg-do run }\n+! { dg-options \"-std=legacy\" }\n ! { dg-add-options ieee }\n ! Check if register allocator handles IR flattening correctly.\n       SUBROUTINE SCHMD(V,M,N,LDV)\n@@ -13,10 +14,10 @@ SUBROUTINE SCHMD(V,M,N,LDV)\n       DO 160 I = 1,M\n       DUMI = ZERO\n       DO 100 K = 1,N\n-  100 DUMI = DUMI+V(K,I)*V(K,I) ! { dg-warning \"Obsolescent feature: DO termination statement which is not END DO or CONTINUE\" }\n+  100 DUMI = DUMI+V(K,I)*V(K,I)\n       DUMI = ONE/ SQRT(DUMI)\n       DO 120 K = 1,N\n-  120 V(K,I) = V(K,I)*DUMI ! { dg-warning \"Obsolescent feature: DO termination statement which is not END DO or CONTINUE\" }\n+  120 V(K,I) = V(K,I)*DUMI\n       IF (I .EQ. M) GO TO 160\n       I1 = I+1\n       DO 140 J = I1,M\n@@ -34,15 +35,15 @@ SUBROUTINE SCHMD(V,M,N,LDV)\n   220 J = J+1\n       IF (J .GT. N) GO TO 320\n       DO 240 K = 1,N\n-  240 V(K,I) = ZERO ! { dg-warning \"Obsolescent feature: DO termination statement which is not END DO or CONTINUE\" }\n+  240 V(K,I) = ZERO\n       CALL DAXPY(N,DUM,V(1,I),1,V(1,I),1)\n   260 CONTINUE\n       DUMI = ZERO\n       DO 280 K = 1,N\n-  280 DUMI = DUMI+V(K,I)*V(K,I) ! { dg-warning \"Obsolescent feature: DO termination statement which is not END DO or CONTINUE\" }\n+  280 DUMI = DUMI+V(K,I)*V(K,I)\n       IF ( ABS(DUMI) .LT. TOL) GO TO 220\n       DO 300 K = 1,N\n-  300 V(K,I) = V(K,I)*DUMI ! { dg-warning \"Obsolescent feature: DO termination statement which is not END DO or CONTINUE\" }\n+  300 V(K,I) = V(K,I)*DUMI\n       GO TO 200\n   320 END\n       program main"}, {"sha": "ab72ba4c1eb3224a1380e6739c1147ea66afa6d9", "filename": "gcc/testsuite/gfortran.dg/pr49721-1.f", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr49721-1.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr49721-1.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr49721-1.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,6 +1,6 @@\n ! PR middle-end/49721\n ! { dg-do compile }\n-! { dg-options \"-O3 -funroll-loops\" }\n+! { dg-options \"-O3 -funroll-loops -std=legacy\" }\n \n       subroutine midbloc6(c,a2,a2i,q)\n       parameter (ndim2=6)"}, {"sha": "e71fd1a1981cc057d11b2a4499c1f70e3570d26a", "filename": "gcc/testsuite/gfortran.dg/pr58484.f", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr58484.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr58484.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr58484.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-options \"-O2\" }\n+! { dg-options \"-O2 -std=legacy\" }\n       SUBROUTINE UMPSE(AIBJ,NOC,NDIM,NOCA,NVIRA,NOCCA,E2)\n       DIMENSION AIBJ(NOC,NDIM,*)\n       DO 20 MA=1,NVIRA"}, {"sha": "a260d39d3c37e2b652d17ee5469c632e9e07e245", "filename": "gcc/testsuite/gfortran.dg/pr81175.f", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr81175.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr81175.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr81175.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-options \"-Ofast -fwrapv\" }\n+! { dg-options \"-Ofast -fwrapv -std=legacy\" }\n ! { dg-additional-options \"-march=broadwell\" { target x86_64-*-* i?86-*-* } }\n       SUBROUTINE ECPDRA(IC4C,FP,FQ,G)\n       IMPLICIT DOUBLE PRECISION (A-H,O-Z)"}, {"sha": "271ce858d75eeb65736577f7c8af8c9968bb3840", "filename": "gcc/testsuite/gfortran.dg/pr81723.f", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr81723.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr81723.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr81723.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-options \"-O3 -fno-automatic\" }\n+! { dg-options \"-O3 -fno-automatic -std=legacy\" }\n \n       FUNCTION WWERF(Z)\n "}, {"sha": "81469c36f45186192350867c5f57e34cbf8ae066", "filename": "gcc/testsuite/gfortran.dg/predcom-2.f", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpredcom-2.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fpredcom-2.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpredcom-2.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,7 +1,7 @@\n ! PR 32220, ICE when the loop is not unrolled enough to eliminate all \n !   register copies\n ! { dg-do compile }\n-! { dg-options \"-O3\" }\n+! { dg-options \"-O3 -std=legacy\" }\n \n       subroutine derv (b,cosxy,thick)\n c"}, {"sha": "6ec369950ec81afd59f28467d056172866d43e78", "filename": "gcc/testsuite/gfortran.dg/vect/Ofast-pr50414.f90", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2FOfast-pr50414.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2FOfast-pr50414.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2FOfast-pr50414.f90?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,4 +1,5 @@\n ! { dg-do compile }\n+! { dg-options \"-std=legacy\" }\n \n       SUBROUTINE  SUB  (A,L,YMAX)\n       DIMENSION A(L)"}, {"sha": "125b01feadcd28b49487a7cbba0e1720ea40fc8f", "filename": "gcc/testsuite/gfortran.dg/vect/cost-model-pr34445a.f", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fcost-model-pr34445a.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fcost-model-pr34445a.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fcost-model-pr34445a.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,4 +1,5 @@\n c { dg-do compile }\n+c { dg-options \"-std=legacy\" }\n       subroutine derv (xx,b,bv,det,r,s,t,ndopt,cosxy,thick,edis,\n      1                  vni,vnt)\n       implicit real*8 (a-h,o-z)"}, {"sha": "08965cc5e2029cc2d9b3208f68cb7bbd0a7dde55", "filename": "gcc/testsuite/gfortran.dg/vect/fast-math-mgrid-resid.f", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Ffast-math-mgrid-resid.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Ffast-math-mgrid-resid.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Ffast-math-mgrid-resid.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,6 +1,6 @@\n ! { dg-do compile }\n ! { dg-require-effective-target vect_double }\n-! { dg-options \"-O3 --param vect-max-peeling-for-alignment=0 -fpredictive-commoning -fdump-tree-pcom-details\" }\n+! { dg-options \"-O3 --param vect-max-peeling-for-alignment=0 -fpredictive-commoning -fdump-tree-pcom-details -std=legacy\" }\n ! { dg-additional-options \"-mprefer-avx128\" { target { i?86-*-* x86_64-*-* } } }\n ! { dg-additional-options \"-mzarch\" { target { s390*-*-* } } }\n "}, {"sha": "6f6df1ae48b299bc6b0939e08a08d4f0ec793630", "filename": "gcc/testsuite/gfortran.dg/vect/pr52580.f", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr52580.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr52580.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr52580.f?ref=67e9518e20b8b836bbaa9dc783bd6a4db56c2bcb", "patch": "@@ -1,4 +1,5 @@\n ! { dg-do compile }\n+! { dg-options \"-std=legacy\" }\n ! { dg-require-effective-target vect_double }\n       SUBROUTINE CALC2\n       IMPLICIT REAL*8\t(A-H, O-Z)"}]}