{"sha": "d796bfa95cbd60745f2131875283870e3703fc0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDc5NmJmYTk1Y2JkNjA3NDVmMjEzMTg3NTI4Mzg3MGUzNzAzZmMwYw==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2007-10-12T00:09:10Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2007-10-12T00:09:10Z"}, "message": "gthr-posix.h (__gthread_active_init): Create detached instead of joinable thread when...\n\n\t* gthr-posix.h (__gthread_active_init): Create detached instead of\n\tjoinable thread when testing whether threads are active on hppa-hpux.\n\t* gthr-posix95.h (__gthread_active_init): Likewise.\n\nFrom-SVN: r129246", "tree": {"sha": "96d1a495e5c05f428f9fc1f5f90dd3d1f9669f92", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/96d1a495e5c05f428f9fc1f5f90dd3d1f9669f92"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d796bfa95cbd60745f2131875283870e3703fc0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d796bfa95cbd60745f2131875283870e3703fc0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d796bfa95cbd60745f2131875283870e3703fc0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d796bfa95cbd60745f2131875283870e3703fc0c/comments", "author": null, "committer": null, "parents": [{"sha": "8885751219b7aa0391a53af06a1d05b215cb048e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8885751219b7aa0391a53af06a1d05b215cb048e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8885751219b7aa0391a53af06a1d05b215cb048e"}], "stats": {"total": 30, "additions": 18, "deletions": 12}, "files": [{"sha": "a5272799e0dd575a05e88299bc92894cc751f1bd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d796bfa95cbd60745f2131875283870e3703fc0c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d796bfa95cbd60745f2131875283870e3703fc0c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d796bfa95cbd60745f2131875283870e3703fc0c", "patch": "@@ -1,3 +1,9 @@\n+2007-10-11  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\t* gthr-posix.h (__gthread_active_init): Create detached instead of\n+\tjoinable thread when testing whether threads are active on hppa-hpux.\n+\t* gthr-posix95.h (__gthread_active_init): Likewise.\n+\n 2007-10-11  Kenneth Zadeck <zadeck@naturalbridge.com>\n \n \tPR middle-end/33676"}, {"sha": "ad6822e26ade652f0ce2620f9d2406a9a181e6d8", "filename": "gcc/gthr-posix.h", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d796bfa95cbd60745f2131875283870e3703fc0c/gcc%2Fgthr-posix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d796bfa95cbd60745f2131875283870e3703fc0c/gcc%2Fgthr-posix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgthr-posix.h?ref=d796bfa95cbd60745f2131875283870e3703fc0c", "patch": "@@ -246,20 +246,20 @@ __gthread_active_init (void)\n {\n   static pthread_mutex_t __gthread_active_mutex = PTHREAD_MUTEX_INITIALIZER;\n   pthread_t t;\n+  pthread_attr_t a;\n   int result;\n \n   __gthrw_(pthread_mutex_lock) (&__gthread_active_mutex);\n   if (__gthread_active < 0)\n     {\n-      result = __gthrw_(pthread_create) (&t, NULL, __gthread_start, NULL);\n+      __gthrw_(pthread_attr_init) (&a);\n+      __gthrw_(pthread_attr_setdetachstate) (&a, PTHREAD_CREATE_DETACHED);\n+      result = __gthrw_(pthread_create) (&t, &a, __gthread_start, NULL);\n       if (result != ENOSYS)\n-\t{\n-\t  __gthread_active = 1;\n-\t  if (!result)\n-\t    __gthrw_(pthread_join) (t, NULL);\n-\t}\n+\t__gthread_active = 1;\n       else\n \t__gthread_active = 0;\n+      __gthrw_(pthread_attr_destroy) (&a);\n     }\n   __gthrw_(pthread_mutex_unlock) (&__gthread_active_mutex);\n }"}, {"sha": "eb54c925f6f8d6c29599b53f4f676e67a07c74f8", "filename": "gcc/gthr-posix95.h", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d796bfa95cbd60745f2131875283870e3703fc0c/gcc%2Fgthr-posix95.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d796bfa95cbd60745f2131875283870e3703fc0c/gcc%2Fgthr-posix95.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgthr-posix95.h?ref=d796bfa95cbd60745f2131875283870e3703fc0c", "patch": "@@ -209,20 +209,20 @@ __gthread_active_init (void)\n {\n   static pthread_mutex_t __gthread_active_mutex = PTHREAD_MUTEX_INITIALIZER;\n   pthread_t t;\n+  pthread_attr_t a;\n   int result;\n \n   __gthrw_(pthread_mutex_lock) (&__gthread_active_mutex);\n   if (__gthread_active < 0)\n     {\n-      result = __gthrw_(pthread_create) (&t, NULL, __gthread_start, NULL);\n+      __gthrw_(pthread_attr_init) (&a);\n+      __gthrw_(pthread_attr_setdetachstate) (&a, PTHREAD_CREATE_DETACHED);\n+      result = __gthrw_(pthread_create) (&t, &a, __gthread_start, NULL);\n       if (result != ENOSYS)\n-\t{\n-\t  __gthread_active = 1;\n-\t  if (!result)\n-\t    __gthrw_(pthread_join) (t, NULL);\n-\t}\n+\t__gthread_active = 1;\n       else\n \t__gthread_active = 0;\n+      __gthrw_(pthread_attr_destroy) (&a);\n     }\n   __gthrw_(pthread_mutex_unlock) (&__gthread_active_mutex);\n }"}]}