{"sha": "55f61a560234c69dcc3537b2a5fd2eabbff52e20", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTVmNjFhNTYwMjM0YzY5ZGNjMzUzN2IyYTVmZDJlYWJiZmY1MmUyMA==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@TechFak.Uni-Bielefeld.DE", "date": "2001-06-11T20:36:56Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2001-06-11T20:36:56Z"}, "message": "iris6.h (NO_BUILTIN_WINT_TYPE): Define.\n\n\t* config/mips/iris6.h (NO_BUILTIN_WINT_TYPE): Define.\n\t(WINT_TYPE): Override.\n\t(WINT_TYPE_SIZE): Likewise.\n\t(SUBTARGET_CPP_SIZE_SPEC): Define __WINT_TYPE__ as appropriate.\n\n\t* config/sparc/sol2.h (WINT_TYPE): Define.\n\t(WINT_TYPE_SIZE): Likewise.\n\n\t* config/sparc/sol2-sld-64.h (NO_BUILTIN_WINT_TYPE): Define.\n\t(WINT_TYPE): Override.\n\t(WINT_TYPE_SIZE): Likewise.\n\t(CPP_ARCH32_SPEC): Add __WINT_TYPE__ definition.\n\t(CPP_ARCH64_SPEC): Likewise.\n\n\ttestsuite:\n\t* gcc.dg/wchar_t-1.c: New file.\n\t* gcc.dg/wint_t-1.c: Likewise.\n\nFrom-SVN: r43216", "tree": {"sha": "52e03245239b2413855cba828ff26ce55d769c11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52e03245239b2413855cba828ff26ce55d769c11"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/55f61a560234c69dcc3537b2a5fd2eabbff52e20", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55f61a560234c69dcc3537b2a5fd2eabbff52e20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55f61a560234c69dcc3537b2a5fd2eabbff52e20", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55f61a560234c69dcc3537b2a5fd2eabbff52e20/comments", "author": null, "committer": null, "parents": [{"sha": "8ac9057145ea0b58b97c69daeb9f723a002faaa1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ac9057145ea0b58b97c69daeb9f723a002faaa1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ac9057145ea0b58b97c69daeb9f723a002faaa1"}], "stats": {"total": 120, "additions": 115, "deletions": 5}, "files": [{"sha": "45092bd0a52d0d049847c58d0fe10df08460b972", "filename": "gcc/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=55f61a560234c69dcc3537b2a5fd2eabbff52e20", "patch": "@@ -1,3 +1,19 @@\n+2001-06-11  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n+\n+\t* config/mips/iris6.h (NO_BUILTIN_WINT_TYPE): Define.\n+\t(WINT_TYPE): Override.\n+\t(WINT_TYPE_SIZE): Likewise.\n+\t(SUBTARGET_CPP_SIZE_SPEC): Define __WINT_TYPE__ as appropriate.\n+\n+\t* config/sparc/sol2.h (WINT_TYPE): Define.\n+\t(WINT_TYPE_SIZE): Likewise.\n+\n+\t* config/sparc/sol2-sld-64.h (NO_BUILTIN_WINT_TYPE): Define.\n+\t(WINT_TYPE): Override.\n+\t(WINT_TYPE_SIZE): Likewise.\n+\t(CPP_ARCH32_SPEC): Add __WINT_TYPE__ definition.\n+\t(CPP_ARCH64_SPEC): Likewise.\n+\n 2001-06-11  Richard Henderson  <rth@redhat.com>\n \n \t* unwind-dw2-fde.c (__deregister_frame_info): Don't play games"}, {"sha": "d7fc21979924963151339b774a055d9388fc10b6", "filename": "gcc/config/mips/iris6.h", "status": "modified", "additions": 26, "deletions": 4, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Fconfig%2Fmips%2Firis6.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Fconfig%2Fmips%2Firis6.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Firis6.h?ref=55f61a560234c69dcc3537b2a5fd2eabbff52e20", "patch": "@@ -39,6 +39,26 @@ Boston, MA 02111-1307, USA.  */\n    we avoid creating such labels.  */\n #define DWARF2_GENERATE_TEXT_SECTION_LABEL 0\n \n+/* wchar_t is defined differently with and without -mabi=64.  */\n+\n+#define NO_BUILTIN_WCHAR_TYPE\n+\n+#undef WCHAR_TYPE\n+#define WCHAR_TYPE (Pmode == DImode ? \"int\" : \"long int\")\n+\n+#undef WCHAR_TYPE_SIZE\n+#define WCHAR_TYPE_SIZE 32\n+\n+/* Same for wint_t.  */\n+\n+#define NO_BUILTIN_WINT_TYPE\n+\n+#undef WINT_TYPE\n+#define WINT_TYPE (Pmode == DImode ? \"int\" : \"long int\")\n+\n+#undef WINT_TYPE_SIZE\n+#define WINT_TYPE_SIZE 32\n+\n /* For Irix 6, -mabi=64 implies TARGET_LONG64.  */\n /* This is handled in override_options.  */\n \n@@ -57,10 +77,12 @@ Boston, MA 02111-1307, USA.  */\n \n #undef SUBTARGET_CPP_SIZE_SPEC\n #define SUBTARGET_CPP_SIZE_SPEC \"\\\n-%{mabi=32: -D__SIZE_TYPE__=unsigned\\\\ int -D__PTRDIFF_TYPE__=int} \\\n-%{mabi=n32: -D__SIZE_TYPE__=unsigned\\\\ int -D__PTRDIFF_TYPE__=int} \\\n-%{mabi=64: -D__SIZE_TYPE__=long\\\\ unsigned\\\\ int -D__PTRDIFF_TYPE__=long\\\\ int} \\\n-%{!mabi*: -D__SIZE_TYPE__=unsigned\\\\ int -D__PTRDIFF_TYPE__=int}\"\n+%{mabi=32|mabi=n32: -D__SIZE_TYPE__=unsigned\\\\ int -D__PTRDIFF_TYPE__=int \\\n+-D__WCHAR_TYPE__=long\\\\ int -D__WINT_TYPE__=long\\\\ int} \\\n+%{mabi=64: -D__SIZE_TYPE__=long\\\\ unsigned\\\\ int -D__PTRDIFF_TYPE__=long\\\\ int \\\n+-D__WCHAR_TYPE__=int -D__WINT_TYPE__=int} \\\n+%{!mabi*: -D__SIZE_TYPE__=unsigned\\\\ int -D__PTRDIFF_TYPE__=int \\\n+-D__WCHAR_TYPE__=long\\\\ int -D__WINT_TYPE__=long\\\\ int}\"\n \n /* We must make -mips3 do what -mlong64 used to do.  */\n /* ??? If no mipsX option given, but a mabi=X option is, then should set"}, {"sha": "9179635c6363ea9663aaf539edbe03c4a7cbcfd7", "filename": "gcc/config/sparc/sol2-sld-64.h", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Fconfig%2Fsparc%2Fsol2-sld-64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Fconfig%2Fsparc%2Fsol2-sld-64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsol2-sld-64.h?ref=55f61a560234c69dcc3537b2a5fd2eabbff52e20", "patch": "@@ -161,11 +161,35 @@\n %{!m32:\" ASM_CPU64_DEFAULT_SPEC \"} \\\n \")\n \n+/* wchar_t is called differently in <wchar.h> for 32 and 64-bit\n+   compilations.  This is called for by SCD 2.4.1, p. 6-83, Figure 6-65\n+   (32-bit) and p. 6P-10, Figure 6.38 (64-bit).  */\n+#define NO_BUILTIN_WCHAR_TYPE\n+\n+#undef WCHAR_TYPE\n+#define WCHAR_TYPE (TARGET_ARCH64 ? \"int\" : \"long int\")\n+\n+#undef WCHAR_TYPE_SIZE\n+#define WCHAR_TYPE_SIZE 32\n+\n+/* Same for wint_t.  See SCD 2.4.1, p. 6-83, Figure 6-66 (32-bit).  There's\n+   no corresponding 64-bit definition, but this is what Solaris 8\n+   <iso/wchar_iso.h> uses.  */\n+#define NO_BUILTIN_WINT_TYPE\n+\n+#undef WINT_TYPE\n+#define WINT_TYPE (TARGET_ARCH64 ? \"int\" : \"long int\")\n+\n+#undef WINT_TYPE_SIZE\n+#define WINT_TYPE_SIZE 32\n+\n #undef CPP_ARCH32_SPEC\n #define CPP_ARCH32_SPEC \"-D__SIZE_TYPE__=unsigned\\\\ int -D__PTRDIFF_TYPE__=int \\\n+-D__WCHAR_TYPE__=long\\\\ int -D__WINT_TYPE__=long\\\\ int \\\n -D__GCC_NEW_VARARGS__ -Acpu=sparc -Amachine=sparc\"\n #undef CPP_ARCH64_SPEC\n #define CPP_ARCH64_SPEC \"-D__SIZE_TYPE__=long\\\\ unsigned\\\\ int -D__PTRDIFF_TYPE__=long\\\\ int \\\n+-D__WCHAR_TYPE__=int -D__WINT_TYPE__=int \\\n -D__arch64__ -Acpu=sparc64 -Amachine=sparcv9 -D__sparcv9\"\n \n #undef CPP_ARCH_SPEC"}, {"sha": "ee7fa063b1733b51b4f93a313a3a748666e76894", "filename": "gcc/config/sparc/sol2.h", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Fconfig%2Fsparc%2Fsol2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Fconfig%2Fsparc%2Fsol2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsol2.h?ref=55f61a560234c69dcc3537b2a5fd2eabbff52e20", "patch": "@@ -1,5 +1,6 @@\n /* Definitions of target machine for GNU compiler, for SPARC running Solaris 2\n-   Copyright 1992, 1995, 1996, 1997, 1998, 1999 Free Software Foundation, Inc.\n+   Copyright 1992, 1995, 1996, 1997, 1998, 1999, 2000,\n+   2001 Free Software Foundation, Inc.\n    Contributed by Ron Guilmette (rfg@netcom.com).\n    Additional changes by David V. Henkel-Wallace (gumby@cygnus.com).\n \n@@ -23,6 +24,14 @@ Boston, MA 02111-1307, USA.  */\n /* Supposedly the same as vanilla sparc svr4, except for the stuff below: */\n #include \"sparc/sysv4.h\"\n \n+/* Solaris 2 uses a wint_t different from the default. This is required\n+   by the SCD 2.4.1, p. 6-83, Figure 6-66.  */\n+#undef\tWINT_TYPE\n+#define\tWINT_TYPE \"long int\"\n+\n+#undef\tWINT_TYPE_SIZE\n+#define\tWINT_TYPE_SIZE BITS_PER_WORD\n+\n #undef CPP_PREDEFINES\n #define CPP_PREDEFINES \\\n \"-Dsparc -Dsun -Dunix -D__svr4__ -D__SVR4 \\"}, {"sha": "17842d129875cee6609b67c55394e1616cb7449f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=55f61a560234c69dcc3537b2a5fd2eabbff52e20", "patch": "@@ -1,3 +1,8 @@\n+2001-06-11  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n+\n+\t* gcc.dg/wchar_t-1.c: New file.\n+\t* gcc.dg/wint_t-1.c: Likewise.\n+\n 2001-06-11  Bernd Schmidt  <bernds@redhat.com>\n \n \t* g++.old-deja/g++.other/stepanov_v1p2.C: Remove."}, {"sha": "6d95c69c304d839725f4e64864ab8e180e7a0f39", "filename": "gcc/testsuite/gcc.dg/wchar_t-1.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Ftestsuite%2Fgcc.dg%2Fwchar_t-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Ftestsuite%2Fgcc.dg%2Fwchar_t-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fwchar_t-1.c?ref=55f61a560234c69dcc3537b2a5fd2eabbff52e20", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-Wall\" } */\n+\n+/* Compile with -Wall to get a warning if built-in and system wchar_t don't\n+   match.  */\n+\n+#define _STDDEF_H\n+#include <wchar.h>\n+\n+__WCHAR_TYPE__ __wc_t__;\n+wchar_t *wc_t_p;\n+\n+void\n+wct (void)\n+{\n+  wc_t_p = &__wc_t__;\n+}"}, {"sha": "3f88dcbeab06d751e2ca035739943f9d5e7bf884", "filename": "gcc/testsuite/gcc.dg/wint_t-1.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Ftestsuite%2Fgcc.dg%2Fwint_t-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55f61a560234c69dcc3537b2a5fd2eabbff52e20/gcc%2Ftestsuite%2Fgcc.dg%2Fwint_t-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fwint_t-1.c?ref=55f61a560234c69dcc3537b2a5fd2eabbff52e20", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-Wall\" } */\n+\n+/* Compile with -Wall to get a warning if built-in and system wint_t don't\n+   match.  */\n+\n+#define _STDDEF_H\n+#include <wchar.h>\n+\n+__WINT_TYPE__ __wi_t__;\n+wint_t *wi_t_p;\n+\n+void\n+wit (void)\n+{\n+  wi_t_p = &__wi_t__;\n+}"}]}