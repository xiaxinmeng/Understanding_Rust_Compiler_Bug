{"sha": "acff804059ca670f5a43b6f5ae2fca6dfc4b3697", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWNmZjgwNDA1OWNhNjcwZjVhNDNiNmY1YWUyZmNhNmRmYzRiMzY5Nw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2007-06-29T20:13:41Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2007-06-29T20:13:41Z"}, "message": "re PR rtl-optimization/32372 (ICE in df_refs_verify, at df-scan.c:4065)\n\n\n\tPR middle-end/32372\n\t* cse.c (cse_insn): Avoid invalid sharing in between register note and\n\tthe insn pattern.\n\nFrom-SVN: r126122", "tree": {"sha": "afd5c89d9831e8d4c725ca7a2cde430ca62f6d42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/afd5c89d9831e8d4c725ca7a2cde430ca62f6d42"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/acff804059ca670f5a43b6f5ae2fca6dfc4b3697", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acff804059ca670f5a43b6f5ae2fca6dfc4b3697", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acff804059ca670f5a43b6f5ae2fca6dfc4b3697", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acff804059ca670f5a43b6f5ae2fca6dfc4b3697/comments", "author": null, "committer": null, "parents": [{"sha": "4e63b362a711b50ad75dcac2da73127503be2609", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e63b362a711b50ad75dcac2da73127503be2609", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e63b362a711b50ad75dcac2da73127503be2609"}], "stats": {"total": 38, "additions": 35, "deletions": 3}, "files": [{"sha": "5da242ac5e70f0b87a456a16df0670229ef65476", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acff804059ca670f5a43b6f5ae2fca6dfc4b3697/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acff804059ca670f5a43b6f5ae2fca6dfc4b3697/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=acff804059ca670f5a43b6f5ae2fca6dfc4b3697", "patch": "@@ -1,3 +1,9 @@\n+2007-06-29 Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/32372\n+\t* cse.c (cse_insn): Avoid invalid sharing in between register note and\n+\tthe insn pattern.\n+\n 2007-06-29 Anatoly Sokolov <aesok@post.ru>\n \n \tPR target/32335"}, {"sha": "d3334925ea0dc73000726392cc6d757eabbf3d2c", "filename": "gcc/cse.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acff804059ca670f5a43b6f5ae2fca6dfc4b3697/gcc%2Fcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acff804059ca670f5a43b6f5ae2fca6dfc4b3697/gcc%2Fcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcse.c?ref=acff804059ca670f5a43b6f5ae2fca6dfc4b3697", "patch": "@@ -4181,7 +4181,7 @@ cse_insn (rtx insn, rtx libcall_insn)\n       canon_reg (XEXP (tem, 0), insn);\n       apply_change_group ();\n       src_eqv = fold_rtx (XEXP (tem, 0), insn);\n-      XEXP (tem, 0) = src_eqv;\n+      XEXP (tem, 0) = copy_rtx (src_eqv);\n       df_notes_rescan (insn);\n     }\n \n@@ -7012,7 +7012,7 @@ struct tree_opt_pass pass_cse =\n   0,                                    /* properties_provided */\n   0,                                    /* properties_destroyed */\n   0,                                    /* todo_flags_start */\n-  TODO_df_finish |\n+  TODO_df_finish | TODO_verify_rtl_sharing |\n   TODO_dump_func |\n   TODO_ggc_collect |\n   TODO_verify_flow,                     /* todo_flags_finish */\n@@ -7070,7 +7070,7 @@ struct tree_opt_pass pass_cse2 =\n   0,                                    /* properties_provided */\n   0,                                    /* properties_destroyed */\n   0,                                    /* todo_flags_start */\n-  TODO_df_finish |\n+  TODO_df_finish | TODO_verify_rtl_sharing |\n   TODO_dump_func |\n   TODO_ggc_collect |\n   TODO_verify_flow,                     /* todo_flags_finish */"}, {"sha": "5657411231d508287b669fb6b50d7a84fb03526d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acff804059ca670f5a43b6f5ae2fca6dfc4b3697/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acff804059ca670f5a43b6f5ae2fca6dfc4b3697/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=acff804059ca670f5a43b6f5ae2fca6dfc4b3697", "patch": "@@ -1,3 +1,8 @@\n+2007-06-29  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/32372\n+\t* gcc.c-torture/compile/pr32372.c: new.\n+\n 2007-06-29  Daniel Franke  <franke.daniel@gmail.com>\n \n \t* gfortran.dg/operator_3.f90: New test."}, {"sha": "cead1ca0096d676645da8ce97d1d12e1f3bc831a", "filename": "gcc/testsuite/gcc.c-torture/compile/pr32372.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acff804059ca670f5a43b6f5ae2fca6dfc4b3697/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr32372.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acff804059ca670f5a43b6f5ae2fca6dfc4b3697/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr32372.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr32372.c?ref=acff804059ca670f5a43b6f5ae2fca6dfc4b3697", "patch": "@@ -0,0 +1,21 @@\n+typedef struct AVCodecContext\n+{\n+  int flags;\n+  void *priv_data;\n+  char codec_name[32];\n+}\n+AVCodecContext;\n+typedef struct ScanTable\n+{\n+  int obmc;\n+  int umvplus;\n+  int h263_aic;\n+}\n+MpegEncContext;\n+MPV_encode_init (AVCodecContext *avctx)\n+{\n+  MpegEncContext *s = avctx->priv_data;\n+  s->umvplus = (avctx->flags & 0x02000000) ? 1 : 0;\n+  s->h263_aic = (avctx->flags & 0x01000000) ? 1 : 0;\n+  s->h263_aic = s->obmc || s->umvplus;\n+}"}]}