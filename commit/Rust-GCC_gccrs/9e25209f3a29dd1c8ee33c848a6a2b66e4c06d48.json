{"sha": "9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWUyNTIwOWYzYTI5ZGQxYzhlZTMzYzg0OGE2YTJiNjZlNGMwNmQ0OA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2015-03-16T10:26:28Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2015-03-16T10:26:28Z"}, "message": "re PR middle-end/65409 (ICE in store_field)\n\n\tPR middle-end/65409\n\t* expr.c (store_field): Do not do a direct block copy if the source is\n\ta PARALLEL with BLKmode.\n\nFrom-SVN: r221453", "tree": {"sha": "74360d68ac8e131f8a56766c8bda7af6b7cf6beb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74360d68ac8e131f8a56766c8bda7af6b7cf6beb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48/comments", "author": null, "committer": null, "parents": [{"sha": "2aab918dacb5a7dc51a4a33db785f2840a093d9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2aab918dacb5a7dc51a4a33db785f2840a093d9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2aab918dacb5a7dc51a4a33db785f2840a093d9d"}], "stats": {"total": 40, "additions": 35, "deletions": 5}, "files": [{"sha": "b17168e87746c5dc2776b8a0c9b4785c6a96ac27", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48", "patch": "@@ -1,3 +1,9 @@\n+2015-03-16  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR middle-end/65409\n+\t* expr.c (store_field): Do not do a direct block copy if the source is\n+\ta PARALLEL with BLKmode.\n+\n 2015-03-16  Tom de Vries  <tom@codesourcery.com>\n \n \tPR middle-end/65414"}, {"sha": "dc13a14f4e7860a08612d855e2b84804dda5ab7e", "filename": "gcc/expr.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48", "patch": "@@ -6645,11 +6645,12 @@ store_field (rtx target, HOST_WIDE_INT bitsize, HOST_WIDE_INT bitpos,\n \t  && mode != TYPE_MODE (TREE_TYPE (exp)))\n \ttemp = convert_modes (mode, TYPE_MODE (TREE_TYPE (exp)), temp, 1);\n \n-      /* If the modes of TEMP and TARGET are both BLKmode, both\n-\t must be in memory and BITPOS must be aligned on a byte\n-\t boundary.  If so, we simply do a block copy.  Likewise\n-\t for a BLKmode-like TARGET.  */\n-      if (GET_MODE (temp) == BLKmode\n+      /* If TEMP is not a PARALLEL (see below) and its mode and that of TARGET\n+\t are both BLKmode, both must be in memory and BITPOS must be aligned\n+\t on a byte boundary.  If so, we simply do a block copy.  Likewise for\n+\t a BLKmode-like TARGET.  */\n+      if (GET_CODE (temp) != PARALLEL\n+\t  && GET_MODE (temp) == BLKmode\n \t  && (GET_MODE (target) == BLKmode\n \t      || (MEM_P (target)\n \t\t  && GET_MODE_CLASS (GET_MODE (target)) == MODE_INT"}, {"sha": "edfdf6bd28f19fde8e318998cbaa97b9422679b1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48", "patch": "@@ -1,3 +1,7 @@\n+2015-03-16  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* testsuite/g++.dg/pr65049.C: New test.\n+\n 2015-03-16  Tom de Vries  <tom@codesourcery.com>\n \n \t* gcc.target/i386/fuse-caller-save-rec.c: Add PR64895 xfail on scans."}, {"sha": "7ced500a6f78d6b521307c03df8b55b79061d649", "filename": "gcc/testsuite/g++.dg/pr65049.C", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr65049.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr65049.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr65049.C?ref=9e25209f3a29dd1c8ee33c848a6a2b66e4c06d48", "patch": "@@ -0,0 +1,19 @@\n+// PR middle-end/65409\n+// Reported by Ignacy Gawedzki <bugs@qult.net>\n+\n+struct Foo\n+{\n+  Foo() {}\n+  int  a;\n+  int  b;\n+  char c;\n+};\n+\n+Foo copy_foo(Foo);\n+\n+struct Bar : Foo\n+{\n+  Bar(Foo t) : Foo(copy_foo(t)) {}\n+};\n+\n+Bar a = Foo();"}]}