{"sha": "8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGVhMGRjYjllMGNjZWJmYzAzYmJlMWI1MmEwOTZjNjVjOGU0ZDExYw==", "commit": {"author": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2015-05-18T18:37:18Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2015-05-18T18:37:18Z"}, "message": "freebsd-spec.h (FBSD_STARTFILE_SPEC): Add the bits to build pie executables.\n\n2015-05-18  Andreas Tobler  <andreast@gcc.gnu.org>\n\ngcc:\n        * config/freebsd-spec.h (FBSD_STARTFILE_SPEC): Add the bits to build\n\tpie executables.\n\t(FBSD_ENDFILE_SPEC): Likewise.\n\t* config/i386/freebsd.h (STARTFILE_SPEC): Remove and use the one from\n\tconfig/freebsd-spec.h.\n\t(ENDFILE_SPEC): Likewise.\n\ngcc/testsuite:\n\t* lib/target-supports.exp (check_effective_target_pie): Add *-*-freebsd*\n\tto the family of pie capable targets.\n\nFrom-SVN: r223308", "tree": {"sha": "033adad23885c4a7d4ef4c6de9ccd9fc3062f4bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/033adad23885c4a7d4ef4c6de9ccd9fc3062f4bb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c/comments", "author": null, "committer": null, "parents": [{"sha": "f41aecf4283f14f54fb0774103fbf7931dff2aa3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f41aecf4283f14f54fb0774103fbf7931dff2aa3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f41aecf4283f14f54fb0774103fbf7931dff2aa3"}], "stats": {"total": 53, "additions": 28, "deletions": 25}, "files": [{"sha": "c00a8789d451400c9e97ff6e732f478570ce0e30", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c", "patch": "@@ -1,3 +1,12 @@\n+2015-05-18  Andreas Tobler  <andreast@gcc.gnu.org>\n+\n+\t* config/freebsd-spec.h (FBSD_STARTFILE_SPEC): Add the bits to build\n+\tpie executables.\n+\t(FBSD_ENDFILE_SPEC): Likewise.\n+\t* config/i386/freebsd.h (STARTFILE_SPEC): Remove and use the one from\n+\tconfig/freebsd-spec.h.\n+\t(ENDFILE_SPEC): Likewise.\n+\n 2015-05-18  Uros Bizjak  <ubizjak@gmail.com>\n \t    Richard Henderson  <rth@redhat.com>\n "}, {"sha": "9341db789eb09859533cb6e991321671c3d59610", "filename": "gcc/config/freebsd-spec.h", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c/gcc%2Fconfig%2Ffreebsd-spec.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c/gcc%2Fconfig%2Ffreebsd-spec.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ffreebsd-spec.h?ref=8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c", "patch": "@@ -66,8 +66,9 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n   \"%{!shared: \\\n      %{pg:gcrt1.o%s} %{!pg:%{p:gcrt1.o%s} \\\n \t\t       %{!p:%{profile:gcrt1.o%s} \\\n-\t\t\t %{!profile:crt1.o%s}}}} \\\n-   crti.o%s %{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}\"\n+\t\t\t %{!profile: \\\n+                            %{pie: Scrt1.o%s;:crt1.o%s}}}}} \\\n+   crti.o%s %{static:crtbeginT.o%s;shared|pie:crtbeginS.o%s;:crtbegin.o%s}\"\n \n /* Provide a ENDFILE_SPEC appropriate for FreeBSD.  Here we tack on\n    the magical crtend.o file (see crtstuff.c) which provides part of \n@@ -76,7 +77,7 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n \t`crtn.o'.  */\n \n #define FBSD_ENDFILE_SPEC \\\n-  \"%{!shared:crtend.o%s} %{shared:crtendS.o%s} crtn.o%s\"\n+  \"%{shared|pie:crtendS.o%s;:crtend.o%s} crtn.o%s\"\n \n /* Provide a LIB_SPEC appropriate for FreeBSD as configured and as\n    required by the user-land thread model.  Before __FreeBSD_version"}, {"sha": "6ce160ed4095cd486141f7afae233d436a9957d3", "filename": "gcc/config/i386/freebsd.h", "status": "modified", "additions": 9, "deletions": 22, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c/gcc%2Fconfig%2Fi386%2Ffreebsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c/gcc%2Fconfig%2Fi386%2Ffreebsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ffreebsd.h?ref=8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c", "patch": "@@ -59,28 +59,15 @@ along with GCC; see the file COPYING3.  If not see\n #define SUBTARGET_EXTRA_SPECS \\\n   { \"fbsd_dynamic_linker\", FBSD_DYNAMIC_LINKER }\n     \n-/* Provide a STARTFILE_SPEC appropriate for FreeBSD.  Here we add\n-   the magical crtbegin.o file (see crtstuff.c) which provides part \n-\tof the support for getting C++ file-scope static object constructed \n-\tbefore entering `main'.  */\n-   \n-#undef\tSTARTFILE_SPEC\n-#define STARTFILE_SPEC \\\n-  \"%{!shared: \\\n-     %{pg:gcrt1.o%s} %{!pg:%{p:gcrt1.o%s} \\\n-\t\t       %{!p:%{profile:gcrt1.o%s} \\\n-\t\t\t %{!profile:crt1.o%s}}}} \\\n-   crti.o%s %{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}\"\n-\n-/* Provide a ENDFILE_SPEC appropriate for FreeBSD.  Here we tack on\n-   the magical crtend.o file (see crtstuff.c) which provides part of \n-\tthe support for getting C++ file-scope static object constructed \n-\tbefore entering `main', followed by a normal \"finalizer\" file, \n-\t`crtn.o'.  */\n-\n-#undef\tENDFILE_SPEC\n-#define ENDFILE_SPEC \\\n-  \"%{!shared:crtend.o%s} %{shared:crtendS.o%s} crtn.o%s\"\n+/* Use the STARTFILE_SPEC from config/freebsd-spec.h.  */\n+\n+#undef  STARTFILE_SPEC\n+#define STARTFILE_SPEC FBSD_STARTFILE_SPEC\n+\n+/* Use the ENDFILE_SPEC from config/freebsd-spec.h.  */\n+\n+#undef  ENDFILE_SPEC\n+#define ENDFILE_SPEC FBSD_ENDFILE_SPEC\n \n /* Provide a LINK_SPEC appropriate for FreeBSD.  Here we provide support\n    for the special GCC options -static and -shared, which allow us to"}, {"sha": "c4b77b36dbad149668633edebcdc900761b678ba", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c", "patch": "@@ -1,3 +1,8 @@\n+2015-05-12  Andreas Tobler  <andreast@gcc.gnu.org>\n+\n+\t* lib/target-supports.exp (check_effective_target_pie): Add *-*-freebsd*\n+\tto the family of pie capable targets.\n+\n 2015-05-18  Alex Velenko <Alex.Velenko@arm.com>\n \n \t* gcc.target/arm/bics_1.c : New testcase."}, {"sha": "e3f824a63ae863b4554aeda6d12013c63a8bc6c7", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=8ea0dcb9e0ccebfc03bbe1b52a096c65c8e4d11c", "patch": "@@ -954,6 +954,7 @@ proc check_effective_target_shared { } {\n \n proc check_effective_target_pie { } {\n     if { [istarget *-*-darwin\\[912\\]*]\n+\t || [istarget *-*-freebsd*]\n \t || [istarget *-*-linux*]\n \t || [istarget *-*-gnu*] } {\n \treturn 1;"}]}