{"sha": "d9d71657bddce08c4686c41cf2ea00b344bd47b6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDlkNzE2NTdiZGRjZTA4YzQ2ODZjNDFjZjJlYTAwYjM0NGJkNDdiNg==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@unitus.it", "date": "2002-11-18T20:03:52Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2002-11-18T20:03:52Z"}, "message": "PR libstdc++/6745 (continued)\n\n2002-11-18  Paolo Carlini  <pcarlini@unitus.it>\n\n\tPR libstdc++/6745 (continued)\n\t* include/bits/streambuf.tcc (__copy_streambufs):\n\tDeal with interactive input by using isatty as in the\n\tfix for libstdc++/8399.\n\nFrom-SVN: r59229", "tree": {"sha": "e0fbd6ee779e2f0dfea99116014ed4f23ddeb579", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e0fbd6ee779e2f0dfea99116014ed4f23ddeb579"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9d71657bddce08c4686c41cf2ea00b344bd47b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9d71657bddce08c4686c41cf2ea00b344bd47b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9d71657bddce08c4686c41cf2ea00b344bd47b6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9d71657bddce08c4686c41cf2ea00b344bd47b6/comments", "author": null, "committer": null, "parents": [{"sha": "c986baf631d89169f339f1d23014e62614d2e93e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c986baf631d89169f339f1d23014e62614d2e93e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c986baf631d89169f339f1d23014e62614d2e93e"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "7934d74d5150e7519acb83a674406dc176f19444", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9d71657bddce08c4686c41cf2ea00b344bd47b6/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9d71657bddce08c4686c41cf2ea00b344bd47b6/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=d9d71657bddce08c4686c41cf2ea00b344bd47b6", "patch": "@@ -1,3 +1,10 @@\n+2002-11-18  Paolo Carlini  <pcarlini@unitus.it>\n+\n+\tPR libstdc++/6745 (continued)\n+\t* include/bits/streambuf.tcc (__copy_streambufs):\n+\tDeal with interactive input by using isatty as in the\n+\tfix for libstdc++/8399.\n+\n 2002-11-17  Jakub Jelinek  <jakub@redhat.com>\n \n \t* config/linker-map.gnu: Export _S_construct even if size_t is"}, {"sha": "cdaab2e213bf92285095e479cdb79af1f80f0139", "filename": "libstdc++-v3/include/bits/streambuf.tcc", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9d71657bddce08c4686c41cf2ea00b344bd47b6/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstreambuf.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9d71657bddce08c4686c41cf2ea00b344bd47b6/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstreambuf.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstreambuf.tcc?ref=d9d71657bddce08c4686c41cf2ea00b344bd47b6", "patch": "@@ -37,6 +37,10 @@\n \n #pragma GCC system_header\n \n+#ifdef _GLIBCPP_HAVE_UNISTD_H\n+#include <unistd.h>\n+#endif\n+\n namespace std \n {\n   template<typename _CharT, typename _Traits>\n@@ -219,8 +223,14 @@ namespace std\n \t\t}\n  \t      else \n \t\t{\n-\t\t  _CharT __buf[256];\n-\t\t  streamsize __charsread = __sbin->sgetn(__buf, sizeof(__buf));\n+#ifdef _GLIBCPP_HAVE_ISATTY\t\t  \n+\t\t  size_t __size = isatty(0) ? 1 : static_cast<size_t>(BUFSIZ);\n+#else\n+\t\t  size_t __size = 1;\n+#endif\n+\t\t  _CharT* __buf =\n+\t\t    static_cast<_CharT*>(__builtin_alloca(sizeof(_CharT) * __size));\n+\t\t  streamsize __charsread = __sbin->sgetn(__buf, __size);\n \t\t  __xtrct = __sbout->sputn(__buf, __charsread);\n \t\t  __ret += __xtrct;\n \t\t  if (__xtrct != __charsread)"}]}