{"sha": "03b8ec294f34655d06758e7f65c2c57604632e38", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDNiOGVjMjk0ZjM0NjU1ZDA2NzU4ZTdmNjVjMmM1NzYwNDYzMmUzOA==", "commit": {"author": {"name": "Dhananjay R. Deshpande", "email": "dhananjayd@kpit.com", "date": "2002-06-14T11:06:38Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2002-06-14T11:06:38Z"}, "message": "sh.h: Define HARD_REGNO_RENAME_OK\n\nFri Jun 14 12:04:02 2002  Dhananjay R. Deshpande <dhananjayd@kpit.com>\n\n\t* sh.h: Define HARD_REGNO_RENAME_OK\n\t* sh.c: sh_hard_regno_rename_ok: New. If current function has\n\tinterrupt_handler attribute, only registers saved on stack are OK.\n\t* sh-protos.h: Declare sh_hard_regno_rename_ok.\n\nFrom-SVN: r54612", "tree": {"sha": "8c275a1c4955e42e791a15ea109f2cdcb2159a13", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c275a1c4955e42e791a15ea109f2cdcb2159a13"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03b8ec294f34655d06758e7f65c2c57604632e38", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03b8ec294f34655d06758e7f65c2c57604632e38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03b8ec294f34655d06758e7f65c2c57604632e38", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03b8ec294f34655d06758e7f65c2c57604632e38/comments", "author": null, "committer": null, "parents": [{"sha": "8e831557e4de285a788d4c80ce0d2139c2a3125e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e831557e4de285a788d4c80ce0d2139c2a3125e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e831557e4de285a788d4c80ce0d2139c2a3125e"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "d5d900f801e62b902049f5dff0b2566b57a46e63", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03b8ec294f34655d06758e7f65c2c57604632e38/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03b8ec294f34655d06758e7f65c2c57604632e38/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=03b8ec294f34655d06758e7f65c2c57604632e38", "patch": "@@ -1,3 +1,10 @@\n+Fri Jun 14 12:04:02 2002  Dhananjay R. Deshpande <dhananjayd@kpit.com>\n+\n+\t* sh.h: Define HARD_REGNO_RENAME_OK\n+\t* sh.c: sh_hard_regno_rename_ok: New. If current function has\n+\tinterrupt_handler attribute, only registers saved on stack are OK.\n+\t* sh-protos.h: Declare sh_hard_regno_rename_ok.\n+\n 2002-06-14  Kaz Kojima  <kkojima@gcc.gnu.org>\n \n \t* config/sh/sh.md (jump): Emit jump insn."}, {"sha": "3503f57948a6aba8c6a209391ce668163ec9be84", "filename": "gcc/config/sh/sh-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03b8ec294f34655d06758e7f65c2c57604632e38/gcc%2Fconfig%2Fsh%2Fsh-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03b8ec294f34655d06758e7f65c2c57604632e38/gcc%2Fconfig%2Fsh%2Fsh-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh-protos.h?ref=03b8ec294f34655d06758e7f65c2c57604632e38", "patch": "@@ -122,6 +122,7 @@ extern int sh_need_epilogue PARAMS ((void));\n extern int initial_elimination_offset PARAMS ((int, int));\n extern int fldi_ok PARAMS ((void));\n extern int sh_pr_n_sets PARAMS ((void));\n+extern int sh_hard_regno_rename_ok PARAMS ((unsigned int, unsigned int));\n \n #ifdef HARD_CONST\n extern void fpscr_set_from_mem PARAMS ((int, HARD_REG_SET));"}, {"sha": "22851372405aca8df395f41f8a74bb5b9e325310", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03b8ec294f34655d06758e7f65c2c57604632e38/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03b8ec294f34655d06758e7f65c2c57604632e38/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=03b8ec294f34655d06758e7f65c2c57604632e38", "patch": "@@ -6701,6 +6701,26 @@ sh_can_redirect_branch (branch1, branch2)\n   return 0;\n }\n \n+/* Return non-zero if register old_reg can be renamed to register new_reg.  */\n+int\n+sh_hard_regno_rename_ok (old_reg, new_reg)\n+     unsigned int old_reg ATTRIBUTE_UNUSED;\n+     unsigned int new_reg;\n+{\n+\n+/* Interrupt functions can only use registers that have already been\n+   saved by the prologue, even if they would normally be\n+   call-clobbered.  */\n+\n+   if ((lookup_attribute (\"interrupt_handler\",\n+\t\t\t  DECL_ATTRIBUTES (current_function_decl))\n+\t!= NULL_TREE)\n+       && !regs_ever_live[new_reg])\n+     return 0;\n+\n+   return 1;\n+}\n+\n /* A C statement (sans semicolon) to update the integer variable COST\n    based on the relationship between INSN that is dependent on\n    DEP_INSN through the dependence LINK.  The default is to make no"}, {"sha": "6891fd0758b0e4df6156f5688bb4aa75c729ab34", "filename": "gcc/config/sh/sh.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03b8ec294f34655d06758e7f65c2c57604632e38/gcc%2Fconfig%2Fsh%2Fsh.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03b8ec294f34655d06758e7f65c2c57604632e38/gcc%2Fconfig%2Fsh%2Fsh.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.h?ref=03b8ec294f34655d06758e7f65c2c57604632e38", "patch": "@@ -942,6 +942,12 @@ extern char sh_additional_register_names[ADDREGNAMES_SIZE] \\\n \t\t\t      && (GET_MODE_SIZE (MODE2) <= 4)) \\\n \t\t\t  : ((MODE1) != SFmode && (MODE2) != SFmode))))\n \n+/* A C expression that is nonzero if hard register NEW_REG can be\n+   considered for use as a rename register for OLD_REG register */\n+\n+#define HARD_REGNO_RENAME_OK(OLD_REG, NEW_REG) \\\n+   sh_hard_regno_rename_ok (OLD_REG, NEW_REG)\n+\n /* Specify the registers used for certain standard purposes.\n    The values of these macros are register numbers.  */\n "}]}