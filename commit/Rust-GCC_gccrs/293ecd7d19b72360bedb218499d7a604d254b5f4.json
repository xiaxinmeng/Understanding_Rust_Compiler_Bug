{"sha": "293ecd7d19b72360bedb218499d7a604d254b5f4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjkzZWNkN2QxOWI3MjM2MGJlZGIyMTg0OTlkN2E2MDRkMjU0YjVmNA==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@cygnus.com", "date": "1999-05-26T06:05:46Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "1999-05-26T06:05:46Z"}, "message": "Check against frame_pointer_rtx not FRAME_POINTER_REGNUM\n\nFrom-SVN: r27165", "tree": {"sha": "661fe9fac4efdf01391e5c14dd3d7996e960fb06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/661fe9fac4efdf01391e5c14dd3d7996e960fb06"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/293ecd7d19b72360bedb218499d7a604d254b5f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/293ecd7d19b72360bedb218499d7a604d254b5f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/293ecd7d19b72360bedb218499d7a604d254b5f4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/293ecd7d19b72360bedb218499d7a604d254b5f4/comments", "author": null, "committer": null, "parents": [{"sha": "9eb4080f6f5275430b5378468ddc820a98e5cfe3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9eb4080f6f5275430b5378468ddc820a98e5cfe3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9eb4080f6f5275430b5378468ddc820a98e5cfe3"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "1617a788ba2f41b7a8a72bdba5efa611e4d3f0fd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/293ecd7d19b72360bedb218499d7a604d254b5f4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/293ecd7d19b72360bedb218499d7a604d254b5f4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=293ecd7d19b72360bedb218499d7a604d254b5f4", "patch": "@@ -1,3 +1,10 @@\n+Wed May 26 06:05:10 1999  Nick Clifton  <nickc@cygnus.com>\n+\n+\t* flow.c (insn_dead_p): Check against frame_pointer_rtx not\n+\tFRAME_POINTER_REGNUM. \n+\t(mark_set_1): Ditto.\n+\t(mark_used_regs): Ditto.\n+\n Wed May 26 02:19:31 1999  Philip Blundell  <pb@nexus.co.uk>\n \n \t* arm.h (NEED_PLT_GOT): Fix mistake in last change."}, {"sha": "be1f8d0e23d589ab03aeab55b24fc6152d116def", "filename": "gcc/flow.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/293ecd7d19b72360bedb218499d7a604d254b5f4/gcc%2Fflow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/293ecd7d19b72360bedb218499d7a604d254b5f4/gcc%2Fflow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflow.c?ref=293ecd7d19b72360bedb218499d7a604d254b5f4", "patch": "@@ -2957,7 +2957,7 @@ insn_dead_p (x, needed, call_ok, notes)\n \t  /* Don't delete insns to set global regs.  */\n \t  if ((regno < FIRST_PSEUDO_REGISTER && global_regs[regno])\n \t      /* Make sure insns to set frame pointer aren't deleted.  */\n-\t      || regno == FRAME_POINTER_REGNUM\n+\t      || r == frame_pointer_rtx\n #if FRAME_POINTER_REGNUM != HARD_FRAME_POINTER_REGNUM\n \t      || regno == HARD_FRAME_POINTER_REGNUM\n #endif\n@@ -3268,7 +3268,8 @@ mark_set_1 (needed, dead, x, insn, significant)\n     mem_set_list = gen_rtx_EXPR_LIST (VOIDmode, reg, mem_set_list);\n \n   if (GET_CODE (reg) == REG\n-      && (regno = REGNO (reg), regno != FRAME_POINTER_REGNUM)\n+      && reg != frame_pointer_rtx\n+      && (regno = REGNO (reg), 1)\n #if FRAME_POINTER_REGNUM != HARD_FRAME_POINTER_REGNUM\n       && regno != HARD_FRAME_POINTER_REGNUM\n #endif\n@@ -3733,7 +3734,7 @@ mark_used_regs (needed, live, x, final, insn)\n #if FRAME_POINTER_REGNUM != ARG_POINTER_REGNUM\n \t\t|| (regno == ARG_POINTER_REGNUM && fixed_regs[regno])\n #endif\n-\t\t|| regno == FRAME_POINTER_REGNUM)\n+\t\t|| (x == frame_pointer_rtx))\n \t      {\n \t\t/* If this is a register we are going to try to eliminate,\n \t\t   don't mark it live here.  If we are successful in\n@@ -3909,7 +3910,8 @@ mark_used_regs (needed, live, x, final, insn)\n \tif ((GET_CODE (testreg) == PARALLEL\n \t     && GET_MODE (testreg) == BLKmode)\n \t    || (GET_CODE (testreg) == REG\n-\t\t&& (regno = REGNO (testreg), regno != FRAME_POINTER_REGNUM)\n+\t\t&& testreg != frame_pointer_rtx\n+\t\t&& (regno = REGNO (testreg), 1)\n #if FRAME_POINTER_REGNUM != HARD_FRAME_POINTER_REGNUM\n \t\t&& regno != HARD_FRAME_POINTER_REGNUM\n #endif"}]}