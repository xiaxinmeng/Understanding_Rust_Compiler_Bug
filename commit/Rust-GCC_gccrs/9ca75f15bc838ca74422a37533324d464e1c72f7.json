{"sha": "9ca75f15bc838ca74422a37533324d464e1c72f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWNhNzVmMTViYzgzOGNhNzQ0MjJhMzc1MzMzMjRkNDY0ZTFjNzJmNw==", "commit": {"author": {"name": "Daniel Jacobowitz", "email": "drow@mvista.com", "date": "2004-04-19T18:02:40Z"}, "committer": {"name": "Daniel Jacobowitz", "email": "drow@gcc.gnu.org", "date": "2004-04-19T18:02:40Z"}, "message": "stor-layout.c (layout_decl): Check DECL_PACKED before calling ADJUST_FIELD_ALIGN.\n\n\t* stor-layout.c (layout_decl): Check DECL_PACKED before calling\n\tADJUST_FIELD_ALIGN.  Check maximum_field_alignment after.\n\nFrom-SVN: r80860", "tree": {"sha": "8ce7d356ff28ad832d653e593d6bfa7a3a05ebc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ce7d356ff28ad832d653e593d6bfa7a3a05ebc3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ca75f15bc838ca74422a37533324d464e1c72f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ca75f15bc838ca74422a37533324d464e1c72f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ca75f15bc838ca74422a37533324d464e1c72f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ca75f15bc838ca74422a37533324d464e1c72f7/comments", "author": null, "committer": null, "parents": [{"sha": "c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "198314a3f7a6a116002237402625c4ee6908cbbd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ca75f15bc838ca74422a37533324d464e1c72f7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ca75f15bc838ca74422a37533324d464e1c72f7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9ca75f15bc838ca74422a37533324d464e1c72f7", "patch": "@@ -1,3 +1,8 @@\n+2004-04-19  Daniel Jacobowitz  <drow@mvista.com>\n+\n+\t* stor-layout.c (layout_decl): Check DECL_PACKED before calling\n+\tADJUST_FIELD_ALIGN.  Check maximum_field_alignment after.\n+\n 2004-04-19  Andrew PInski  <pinskia@physics.uc.edu>\n \n \t* builtins.c (fold_builtin_cabs): Remove fndecl parameter."}, {"sha": "33d0a86e90d9c78a326444b6fa329f9a30719f72", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ca75f15bc838ca74422a37533324d464e1c72f7/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ca75f15bc838ca74422a37533324d464e1c72f7/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=9ca75f15bc838ca74422a37533324d464e1c72f7", "patch": "@@ -512,10 +512,7 @@ layout_decl (tree decl, unsigned int known_align)\n \t      || TREE_CODE (DECL_SIZE_UNIT (decl)) == INTEGER_CST))\n \tDECL_ALIGN (decl) = MIN (DECL_ALIGN (decl), BITS_PER_UNIT);\n \n-      /* Should this be controlled by DECL_USER_ALIGN, too?  */\n-      if (maximum_field_alignment != 0)\n-\tDECL_ALIGN (decl) = MIN (DECL_ALIGN (decl), maximum_field_alignment);\n-      if (! DECL_USER_ALIGN (decl))\n+      if (! DECL_USER_ALIGN (decl) && ! DECL_PACKED (decl))\n \t{\n \t  /* Some targets (i.e. i386, VMS) limit struct field alignment\n \t     to a lower boundary than alignment of variables unless\n@@ -528,6 +525,10 @@ layout_decl (tree decl, unsigned int known_align)\n \t  DECL_ALIGN (decl) = ADJUST_FIELD_ALIGN (decl, DECL_ALIGN (decl));\n #endif\n \t}\n+\n+      /* Should this be controlled by DECL_USER_ALIGN, too?  */\n+      if (maximum_field_alignment != 0)\n+\tDECL_ALIGN (decl) = MIN (DECL_ALIGN (decl), maximum_field_alignment);\n     }\n \n   /* Evaluate nonconstant size only once, either now or as soon as safe.  */"}]}