{"sha": "58e94443400c84cb32f07b7ffe0f383d75d5a688", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NThlOTQ0NDM0MDBjODRjYjMyZjA3YjdmZmUwZjM4M2Q3NWQ1YTY4OA==", "commit": {"author": {"name": "Geert Bosch", "email": "bosch@adacore.com", "date": "2008-11-07T09:56:33Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2008-11-07T09:56:33Z"}, "message": "trans.c (build_binary_op_trapv): Convert arguments and result for call to __gnat_mulv64.\n\n\t* gcc-interface/trans.c (build_binary_op_trapv): Convert arguments\n\tand result for call to __gnat_mulv64.\n\nFrom-SVN: r141668", "tree": {"sha": "d75657f0fa708155979e72e35fcd2f88557bcc96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d75657f0fa708155979e72e35fcd2f88557bcc96"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/58e94443400c84cb32f07b7ffe0f383d75d5a688", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58e94443400c84cb32f07b7ffe0f383d75d5a688", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58e94443400c84cb32f07b7ffe0f383d75d5a688", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58e94443400c84cb32f07b7ffe0f383d75d5a688/comments", "author": null, "committer": null, "parents": [{"sha": "a7c43bbc03165cf0f566fcdd5d5a99bd0b6eae7c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7c43bbc03165cf0f566fcdd5d5a99bd0b6eae7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7c43bbc03165cf0f566fcdd5d5a99bd0b6eae7c"}], "stats": {"total": 45, "additions": 44, "deletions": 1}, "files": [{"sha": "3cb89a6cd21b9f89f237fa03b47ab13f6b0f1f06", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58e94443400c84cb32f07b7ffe0f383d75d5a688/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58e94443400c84cb32f07b7ffe0f383d75d5a688/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=58e94443400c84cb32f07b7ffe0f383d75d5a688", "patch": "@@ -1,3 +1,8 @@\n+2008-11-07  Geert Bosch  <bosch@adacore.com>\n+\n+\t* gcc-interface/trans.c (build_binary_op_trapv): Convert arguments\n+\tand result for call to __gnat_mulv64.\n+\n 2008-11-07  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/trans.c: Fix formatting nits."}, {"sha": "005d517fda889158b7c4f430584a27290e92f86d", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58e94443400c84cb32f07b7ffe0f383d75d5a688/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58e94443400c84cb32f07b7ffe0f383d75d5a688/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=58e94443400c84cb32f07b7ffe0f383d75d5a688", "patch": "@@ -6032,7 +6032,13 @@ build_binary_op_trapv (enum tree_code code, tree gnu_type, tree left,\n       int needed_precision = precision * 2;\n \n       if (code == MULT_EXPR && precision == 64)\n-\treturn build_call_2_expr (mulv64_decl, lhs, rhs);\n+\t{ \n+\t  tree int_64 = gnat_type_for_size (64, 0);\n+\n+\t  return convert (gnu_type, build_call_2_expr (mulv64_decl,\n+\t\t\t\t\t\t       convert (int_64, lhs),\n+\t\t\t\t\t\t       convert (int_64, rhs)));\n+\t}\n \n       else if (needed_precision <= BITS_PER_WORD\n \t       || (code == MULT_EXPR "}, {"sha": "ae35d29d4363e848107d49815c33f557e571cb64", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58e94443400c84cb32f07b7ffe0f383d75d5a688/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58e94443400c84cb32f07b7ffe0f383d75d5a688/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=58e94443400c84cb32f07b7ffe0f383d75d5a688", "patch": "@@ -1,3 +1,7 @@\n+2008-11-07  Geert Bosch  <bosch@adacore.com>\n+\n+\t* gnat.dg/test_8bitlong_overflow.adb: New test.\n+\n 2008-11-07  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* g++.dg/ipa/iinline-1.C: Remove -c flag, add -fpie for PIC"}, {"sha": "b22c87170e558a6f80c7dc059616c932c985b872", "filename": "gcc/testsuite/gnat.dg/test_8bitlong_overflow.adb", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58e94443400c84cb32f07b7ffe0f383d75d5a688/gcc%2Ftestsuite%2Fgnat.dg%2Ftest_8bitlong_overflow.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58e94443400c84cb32f07b7ffe0f383d75d5a688/gcc%2Ftestsuite%2Fgnat.dg%2Ftest_8bitlong_overflow.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Ftest_8bitlong_overflow.adb?ref=58e94443400c84cb32f07b7ffe0f383d75d5a688", "patch": "@@ -0,0 +1,28 @@\n+-- { dg-do run }\n+-- { dg-options \"-gnato\" }\n+\n+procedure Test_8bitlong_Overflow is\n+\n+   pragma Unsuppress (Overflow_Check);\n+   generic\n+       type T is range <>;\n+   package G is\n+      LO   : T := T'first;\n+      ONE  : T := T(1);\n+\n+      type A2 is array(T range <>) of T;\n+      subtype SA2 is A2(LO..4*ONE);\n+\n+      ARRAY_AGGR : SA2 := SA2'(others=>LO + 1);\n+\n+      POS_1   : T := T'pos(LO*ONE);\n+   end;\n+\n+   type T is new LONG_INTEGER range -1..10;\n+   for T'size use 8;\n+\n+   package P is new G (T);\n+\n+begin\n+   null;\n+end;"}]}