{"sha": "9a9dcce8e8f235bddcbb89bf6010577686b4627b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWE5ZGNjZThlOGYyMzViZGRjYmI4OWJmNjAxMDU3NzY4NmI0NjI3Yg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2012-03-31T16:24:04Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2012-03-31T16:24:04Z"}, "message": "unwind-ia64.c (uw_install_context): Manually save LC if it hasn't been previously saved.\n\n\t* config/ia64/unwind-ia64.c (uw_install_context): Manually save LC\n\tif it hasn't been previously saved.\n\nFrom-SVN: r186045", "tree": {"sha": "fda83759f1936ac74f3ccd9fa96c2c489dd575ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fda83759f1936ac74f3ccd9fa96c2c489dd575ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9a9dcce8e8f235bddcbb89bf6010577686b4627b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a9dcce8e8f235bddcbb89bf6010577686b4627b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a9dcce8e8f235bddcbb89bf6010577686b4627b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a9dcce8e8f235bddcbb89bf6010577686b4627b/comments", "author": null, "committer": null, "parents": [{"sha": "71bb37ba99c71d21d504b91bd0c8904d89f2db58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71bb37ba99c71d21d504b91bd0c8904d89f2db58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71bb37ba99c71d21d504b91bd0c8904d89f2db58"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "0adcc5ac1dba0087704ec74d95392cc84ab177b9", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a9dcce8e8f235bddcbb89bf6010577686b4627b/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a9dcce8e8f235bddcbb89bf6010577686b4627b/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=9a9dcce8e8f235bddcbb89bf6010577686b4627b", "patch": "@@ -1,3 +1,8 @@\n+2012-03-31  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* config/ia64/unwind-ia64.c (uw_install_context): Manually save LC\n+\tif it hasn't been previously saved.\n+\n 2012-03-29  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/i386/linux-unwind.h (x86_64_fallback_frame_state): Define"}, {"sha": "2bb9100a4995936b1a45e9c7f529fc2a0dc8abff", "filename": "libgcc/config/ia64/unwind-ia64.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a9dcce8e8f235bddcbb89bf6010577686b4627b/libgcc%2Fconfig%2Fia64%2Funwind-ia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a9dcce8e8f235bddcbb89bf6010577686b4627b/libgcc%2Fconfig%2Fia64%2Funwind-ia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fia64%2Funwind-ia64.c?ref=9a9dcce8e8f235bddcbb89bf6010577686b4627b", "patch": "@@ -2169,8 +2169,20 @@ uw_install_context (struct _Unwind_Context *current __attribute__((unused)),\n \t\t    struct _Unwind_Context *target)\n {\n   unw_word ireg_buf[4], ireg_nat = 0, ireg_pr = 0;\n+  unw_word saved_lc;\n   int i;\n \n+  /* ??? LC is a fixed register so the call to __builtin_unwind_init in\n+     uw_init_context doesn't cause it to be saved.  In case it isn't in\n+     the user frames either, we need to manually do so here, lest it be\n+     clobbered by the loop just below.  */\n+  if (target->lc_loc == NULL)\n+    {\n+      register unw_word lc asm (\"ar.lc\");\n+      saved_lc = lc;\n+      target->lc_loc = &saved_lc;\n+    }\n+\n   /* Copy integer register data from the target context to a\n      temporary buffer.  Do this so that we can frob AR.UNAT\n      to get the NaT bits for these registers set properly.  */"}]}