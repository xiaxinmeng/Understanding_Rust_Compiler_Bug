{"sha": "5ada27f8e0ca6e3d780a54fcb92b2ac647d38627", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWFkYTI3ZjhlMGNhNmUzZDc4MGE1NGZjYjkyYjJhYzY0N2QzODYyNw==", "commit": {"author": {"name": "Alexander Popov", "email": "alex.popov@linux.com", "date": "2020-07-10T20:10:16Z"}, "committer": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2020-07-10T20:26:05Z"}, "message": "Improve shrink wrapping debug output\n\nCurrently if requires_stack_frame_p() returns true for some insn, the\nshrink-wrapping debug output contains only the number of a block containing\nthat insn.\n\nBut it is very useful to see the particular insn that requires the prologue.\nLet's call print_rtl_single to display that insn in the following pass dump.\n\ngcc/\n\n\t* shrink-wrap.c (try_shrink_wrapping): Improve debug output.", "tree": {"sha": "303ad3aba6af52713c15504bd98fead67cdd58e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/303ad3aba6af52713c15504bd98fead67cdd58e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ada27f8e0ca6e3d780a54fcb92b2ac647d38627", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ada27f8e0ca6e3d780a54fcb92b2ac647d38627", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ada27f8e0ca6e3d780a54fcb92b2ac647d38627", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ada27f8e0ca6e3d780a54fcb92b2ac647d38627/comments", "author": {"login": "a13xp0p0v", "id": 1419667, "node_id": "MDQ6VXNlcjE0MTk2Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/1419667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a13xp0p0v", "html_url": "https://github.com/a13xp0p0v", "followers_url": "https://api.github.com/users/a13xp0p0v/followers", "following_url": "https://api.github.com/users/a13xp0p0v/following{/other_user}", "gists_url": "https://api.github.com/users/a13xp0p0v/gists{/gist_id}", "starred_url": "https://api.github.com/users/a13xp0p0v/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a13xp0p0v/subscriptions", "organizations_url": "https://api.github.com/users/a13xp0p0v/orgs", "repos_url": "https://api.github.com/users/a13xp0p0v/repos", "events_url": "https://api.github.com/users/a13xp0p0v/events{/privacy}", "received_events_url": "https://api.github.com/users/a13xp0p0v/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "def4c0b47e0af546d1669743286fee3c3f3159d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/def4c0b47e0af546d1669743286fee3c3f3159d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/def4c0b47e0af546d1669743286fee3c3f3159d3"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "d70635e94a351d2926457e752dd288fec7c9b0e7", "filename": "gcc/shrink-wrap.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ada27f8e0ca6e3d780a54fcb92b2ac647d38627/gcc%2Fshrink-wrap.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ada27f8e0ca6e3d780a54fcb92b2ac647d38627/gcc%2Fshrink-wrap.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fshrink-wrap.c?ref=5ada27f8e0ca6e3d780a54fcb92b2ac647d38627", "patch": "@@ -43,6 +43,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"rtl-iter.h\"\n #include \"valtrack.h\"\n #include \"function-abi.h\"\n+#include \"print-rtl.h\"\n \n /* Return true if INSN requires the stack frame to be set up.\n    PROLOGUE_USED contains the hard registers used in the function\n@@ -735,7 +736,11 @@ try_shrink_wrapping (edge *entry_edge, rtx_insn *prologue_seq)\n \t\t\t\t       set_up_by_prologue.set))\n \t  {\n \t    if (dump_file)\n-\t      fprintf (dump_file, \"Block %d needs the prologue.\\n\", bb->index);\n+\t      {\n+\t\tfprintf (dump_file, \"Block %d needs prologue due to insn %d:\\n\",\n+\t\t\t bb->index, INSN_UID (insn));\n+\t\tprint_rtl_single (dump_file, insn);\n+\t      }\n \t    pro = nearest_common_dominator (CDI_DOMINATORS, pro, bb);\n \t    break;\n \t  }"}]}