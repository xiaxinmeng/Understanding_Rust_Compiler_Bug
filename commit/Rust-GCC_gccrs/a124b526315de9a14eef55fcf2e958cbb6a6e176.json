{"sha": "a124b526315de9a14eef55fcf2e958cbb6a6e176", "node_id": "C_kwDOANBUbNoAKGExMjRiNTI2MzE1ZGU5YTE0ZWVmNTVmY2YyZTk1OGNiYjZhNmUxNzY", "commit": {"author": {"name": "Ronan Desplanques", "email": "desplanques@adacore.com", "date": "2022-12-19T17:37:19Z"}, "committer": {"name": "Marc Poulhi\u00e8s", "email": "poulhies@adacore.com", "date": "2023-01-05T14:30:00Z"}, "message": "ada: Fix spurious emissions of -gnatwj warning\n\nBefore this patch, the compiler would erroneously emit a warning\nabout the use of parentheses for array aggregates being discouraged\nin some situations. Those situations were the ones where array\naggregates were used as generic actuals when instantiating generic\npackages defined in the runtime library.\n\nThis patch fixes this issue by looking at the Ada version explicitly\nspecified by the user instead of the Ada_Version flag which is\nalways set to the latest Ada version when compiling code from the\nruntime library.\n\ngcc/ada/\n\n\t* sem_aggr.adb (Resolve_Array_Aggregate): Tweak conditions for\n\twarning about use of parentheses for array aggregates.", "tree": {"sha": "b850dfdc6b3f3ae09e16fd6f537edc12589d89f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b850dfdc6b3f3ae09e16fd6f537edc12589d89f3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a124b526315de9a14eef55fcf2e958cbb6a6e176", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a124b526315de9a14eef55fcf2e958cbb6a6e176", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a124b526315de9a14eef55fcf2e958cbb6a6e176", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a124b526315de9a14eef55fcf2e958cbb6a6e176/comments", "author": {"login": "ronan-d", "id": 14870758, "node_id": "MDQ6VXNlcjE0ODcwNzU4", "avatar_url": "https://avatars.githubusercontent.com/u/14870758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronan-d", "html_url": "https://github.com/ronan-d", "followers_url": "https://api.github.com/users/ronan-d/followers", "following_url": "https://api.github.com/users/ronan-d/following{/other_user}", "gists_url": "https://api.github.com/users/ronan-d/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronan-d/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronan-d/subscriptions", "organizations_url": "https://api.github.com/users/ronan-d/orgs", "repos_url": "https://api.github.com/users/ronan-d/repos", "events_url": "https://api.github.com/users/ronan-d/events{/privacy}", "received_events_url": "https://api.github.com/users/ronan-d/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dkm", "id": 87603, "node_id": "MDQ6VXNlcjg3NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/87603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkm", "html_url": "https://github.com/dkm", "followers_url": "https://api.github.com/users/dkm/followers", "following_url": "https://api.github.com/users/dkm/following{/other_user}", "gists_url": "https://api.github.com/users/dkm/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkm/subscriptions", "organizations_url": "https://api.github.com/users/dkm/orgs", "repos_url": "https://api.github.com/users/dkm/repos", "events_url": "https://api.github.com/users/dkm/events{/privacy}", "received_events_url": "https://api.github.com/users/dkm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9ef547a7a99522db8f0f028bde8febc8f1ad8bb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ef547a7a99522db8f0f028bde8febc8f1ad8bb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ef547a7a99522db8f0f028bde8febc8f1ad8bb8"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "958b2bbbd18ac71bcb0b12c1c9de3696c2a0accd", "filename": "gcc/ada/sem_aggr.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a124b526315de9a14eef55fcf2e958cbb6a6e176/gcc%2Fada%2Fsem_aggr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a124b526315de9a14eef55fcf2e958cbb6a6e176/gcc%2Fada%2Fsem_aggr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_aggr.adb?ref=a124b526315de9a14eef55fcf2e958cbb6a6e176", "patch": "@@ -1922,7 +1922,7 @@ package body Sem_Aggr is\n \n       --  Disable the warning for GNAT Mode to allow for easier transition.\n \n-      if Ada_Version >= Ada_2022\n+      if Ada_Version_Explicit >= Ada_2022\n         and then Warn_On_Obsolescent_Feature\n         and then not GNAT_Mode\n         and then not Is_Homogeneous_Aggregate (N)"}]}