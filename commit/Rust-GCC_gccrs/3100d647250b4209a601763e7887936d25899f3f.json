{"sha": "3100d647250b4209a601763e7887936d25899f3f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzEwMGQ2NDcyNTBiNDIwOWE2MDE3NjNlNzg4NzkzNmQyNTg5OWYzZg==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2004-06-11T03:22:30Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2004-06-11T03:22:30Z"}, "message": "fold-const.c (fold_inf_compare): Avoid creating non-gimple code when we are in gimple form.\n\n        * fold-const.c (fold_inf_compare): Avoid creating non-gimple\n        code when we are in gimple form.\n\n\n        * gcc.c-torture/compile/20040610-1.c: New test.\n\nFrom-SVN: r82958", "tree": {"sha": "1f7da268e22cc234d32ba6f2a4c85f419a465a4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f7da268e22cc234d32ba6f2a4c85f419a465a4d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3100d647250b4209a601763e7887936d25899f3f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3100d647250b4209a601763e7887936d25899f3f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3100d647250b4209a601763e7887936d25899f3f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3100d647250b4209a601763e7887936d25899f3f/comments", "author": null, "committer": null, "parents": [{"sha": "da291c876347aad7c585d2a7fe8a463af74dd422", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da291c876347aad7c585d2a7fe8a463af74dd422", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da291c876347aad7c585d2a7fe8a463af74dd422"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "ca94a49eb60e04c77e95a8602de7b40198e11ab6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3100d647250b4209a601763e7887936d25899f3f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3100d647250b4209a601763e7887936d25899f3f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3100d647250b4209a601763e7887936d25899f3f", "patch": "@@ -1,3 +1,8 @@\n+2004-06-10  Jeff Law  <law@redhat.com>\n+\n+\t* fold-const.c (fold_inf_compare): Avoid creating non-gimple\n+\tcode when we are in gimple form.\n+\n 2004-06-10  Diego Novillo  <dnovillo@redhat.com>\n \n \t* Makefile.in (tree-ssanames.o): Depend on TREE_FLOW_H."}, {"sha": "3a7053e802ec01848d6b09073bfcf9ccf02b72bc", "filename": "gcc/fold-const.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3100d647250b4209a601763e7887936d25899f3f/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3100d647250b4209a601763e7887936d25899f3f/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=3100d647250b4209a601763e7887936d25899f3f", "patch": "@@ -5214,6 +5214,12 @@ fold_inf_compare (enum tree_code code, tree type, tree arg0, tree arg1)\n       if (! HONOR_NANS (mode))\n \treturn fold (build2 (neg ? GE_EXPR : LE_EXPR, type,\n \t\t\t     arg0, build_real (TREE_TYPE (arg0), max)));\n+\n+      /* The transformation below creates non-gimple code and thus is\n+\t not appropriate if we are in gimple form.  */\n+      if (in_gimple_form)\n+\treturn NULL_TREE;\n+\t\n       temp = fold (build2 (neg ? LT_EXPR : GT_EXPR, type,\n \t\t\t   arg0, build_real (TREE_TYPE (arg0), max)));\n       return fold (build1 (TRUTH_NOT_EXPR, type, temp));"}, {"sha": "fc42f8b144d349cbef4b14722b18d71e263b13af", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3100d647250b4209a601763e7887936d25899f3f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3100d647250b4209a601763e7887936d25899f3f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3100d647250b4209a601763e7887936d25899f3f", "patch": "@@ -1,3 +1,7 @@\n+2004-06-10  Jeff Law  <law@redhat.com>\n+\n+\t* gcc.c-torture/compile/20040610-1.c: New test.\n+\n 2004-06-11  Giovanni Bajo  <giovannibajo@gcc.gnu.org>\n \n \t* g++.old-deja/g++.robertl/eb4.C: Adjust error markers."}, {"sha": "37fb65ca2c149e493e3c7d6dfdbe1012a63f8fca", "filename": "gcc/testsuite/gcc.c-torture/compile/20040610-1.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3100d647250b4209a601763e7887936d25899f3f/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040610-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3100d647250b4209a601763e7887936d25899f3f/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040610-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040610-1.c?ref=3100d647250b4209a601763e7887936d25899f3f", "patch": "@@ -0,0 +1,5 @@\n+int foo (float x)\n+{\n+        float i = __builtin_inff ();\n+        return x != i;\n+}"}]}