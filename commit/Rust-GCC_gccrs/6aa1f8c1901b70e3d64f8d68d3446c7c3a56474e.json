{"sha": "6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmFhMWY4YzE5MDFiNzBlM2Q2NGY4ZDY4ZDM0NDZjN2MzYTU2NDc0ZQ==", "commit": {"author": {"name": "Bruce Korb", "email": "bkorb@gnu.org", "date": "2008-09-06T19:57:26Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "2008-09-06T19:57:26Z"}, "message": "fix glibc_mutex_init fix\n\nFrom-SVN: r140071", "tree": {"sha": "4e52f6dae3c611152e1d65b676f22e56f6f790d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e52f6dae3c611152e1d65b676f22e56f6f790d3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/comments", "author": {"login": "brkorb", "id": 1242936, "node_id": "MDQ6VXNlcjEyNDI5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1242936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brkorb", "html_url": "https://github.com/brkorb", "followers_url": "https://api.github.com/users/brkorb/followers", "following_url": "https://api.github.com/users/brkorb/following{/other_user}", "gists_url": "https://api.github.com/users/brkorb/gists{/gist_id}", "starred_url": "https://api.github.com/users/brkorb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brkorb/subscriptions", "organizations_url": "https://api.github.com/users/brkorb/orgs", "repos_url": "https://api.github.com/users/brkorb/repos", "events_url": "https://api.github.com/users/brkorb/events{/privacy}", "received_events_url": "https://api.github.com/users/brkorb/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1b1f56cf4ded44b75c93b8285a66ec34e5c1316c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b1f56cf4ded44b75c93b8285a66ec34e5c1316c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b1f56cf4ded44b75c93b8285a66ec34e5c1316c"}], "stats": {"total": 452, "additions": 254, "deletions": 198}, "files": [{"sha": "44bf0e8f6499a3eb22cdb916389d73264b507853", "filename": "fixincludes/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2FChangeLog?ref=6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "patch": "@@ -1,3 +1,15 @@\n+2008-09-06  Bruce Korb  <bkorb@gnu.org>\n+\n+\t* fixincl.tpl (sed): make the program executable configurable.\n+\tSome platforms have some rather oddball defaults.\n+\t* config.h.in (SED_PROGRAM): define the default sed.\n+\t* fixincl.x: regenerated\n+\t* tests/base/internal/wchar_core.h: fix bad sample text\n+\t* tests/base/math.h: fix bad sample text\n+\t* configure.ac: search for working sed\n+\t* inclhack.def (glibc_mutex_init): fix non-portable construct\n+\tand re-order a few misordered entries.\n+\n 2008-06-17  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n \t* configure: Regenerate."}, {"sha": "3693285482bf4328bb0dffb5e1a5c4818804953c", "filename": "fixincludes/config.h.in", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Fconfig.h.in?ref=6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "patch": "@@ -38,6 +38,8 @@\n    you don't. */\n #undef HAVE_DECL_FFLUSH_UNLOCKED\n \n+#define SED_PROGRAM \"/usr/bin/sed\"\n+\n /* Define to 1 if you have the declaration of `fgetc_unlocked', and to 0 if\n    you don't. */\n #undef HAVE_DECL_FGETC_UNLOCKED"}, {"sha": "aaa39cd123fe7c03935c99180025d789aebc2cb7", "filename": "fixincludes/configure.ac", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Fconfigure.ac?ref=6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "patch": "@@ -5,6 +5,7 @@ AC_CONFIG_SRCDIR(inclhack.def)\n AC_CONFIG_AUX_DIR(..)\n AC_CANONICAL_SYSTEM\n AC_PROG_CC\n+AC_PROG_SED\n \n # Figure out what compiler warnings we can enable.\n # See config/warnings.m4 for details.\n@@ -106,6 +107,8 @@ else\n   MAINT='#'\n fi\t\n AC_SUBST(MAINT)\n+AC_DEFINE_UNQUITED([SED_PROGRAM], \"${SED}\",\n+   [Defined to the best working sed program on the host system])\n \n AC_CONFIG_HEADERS(config.h, [echo timestamp > stamp-h])\n AC_CONFIG_FILES(Makefile mkheaders.almost:mkheaders.in)"}, {"sha": "c8d4b2ce1455a4ca65a61abb3728111d7488cf48", "filename": "fixincludes/fixincl.tpl", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Ffixincl.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Ffixincl.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ffixincl.tpl?ref=6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "patch": "@@ -35,6 +35,10 @@ x=fixincl.x =]\n  *  You should have received a copy of the GNU General Public License along\n  *  with this program.  If not, see <http://www.gnu.org/licenses/>.\n  */\n+#ifndef SED_PROGRAM\n+#define SED_PROGRAM \"/usr/bin/sed\"\n+#endif\n+static char const sed_cmd_z[] = SED_PROGRAM;\n [=\n \n FOR fix =]\n@@ -165,7 +169,7 @@ static tTestDesc a[=(. Hack)=]Tests[] = {[=\n  *  Fix Command Arguments for [=(. Hack)=]\n  */\n static const char* apz[=(. Hack)=]Patch[] = {[=\n-    IF   (exist? \"sed\")=] \"sed\"[=\n+    IF   (exist? \"sed\")=] sed_cmd_z[=\n       FOR sed=],\n     \"-e\", [=(kr-string (get \"sed\"))=][=\n       ENDFOR sed=],[="}, {"sha": "aa2568921788392f8ede31fad36d237e2fe7f652", "filename": "fixincludes/fixincl.x", "status": "modified", "additions": 127, "deletions": 119, "changes": 246, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Ffixincl.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Ffixincl.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ffixincl.x?ref=6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "patch": "@@ -2,11 +2,11 @@\n  * \n  * DO NOT EDIT THIS FILE   (fixincl.x)\n  * \n- * It has been AutoGen-ed  Sunday June  8, 2008 at 09:19:13 AM PDT\n+ * It has been AutoGen-ed  Saturday September  6, 2008 at 11:42:15 AM PDT\n  * From the definitions    inclhack.def\n  * and the template file   fixincl\n  */\n-/* DO NOT SVN-MERGE THIS FILE, EITHER Sun Jun  8 09:19:13 PDT 2008\n+/* DO NOT SVN-MERGE THIS FILE, EITHER Sat Sep  6 11:42:15 PDT 2008\n  *\n  * You must regenerate it.  Use the ./genfixes script.\n  *\n@@ -36,6 +36,10 @@\n  *  You should have received a copy of the GNU General Public License along\n  *  with this program.  If not, see <http://www.gnu.org/licenses/>.\n  */\n+#ifndef SED_PROGRAM\n+#define SED_PROGRAM \"/usr/bin/sed\"\n+#endif\n+static char const sed_cmd_z[] = SED_PROGRAM;\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n@@ -873,7 +877,7 @@ static tTestDesc aAlpha_Bad_LvalTests[] = {\n /*\n  *  Fix Command Arguments for Alpha_Bad_Lval\n  */\n-static const char* apzAlpha_Bad_LvalPatch[] = { \"sed\",\n+static const char* apzAlpha_Bad_LvalPatch[] = { sed_cmd_z,\n     \"-e\", \"s/^[ \\t]*#[ \\t]*define[ \\t][ \\t]*\\\\([^(]*\\\\)\\\\(([^)]*)\\\\)[ \\t]*\\\\(_.*\\\\)\\\\1\\\\2[ \\t]*$/#define \\\\1 \\\\3\\\\1/\",\n     (char*)NULL };\n \n@@ -1058,7 +1062,7 @@ static tTestDesc aAlpha_Pthread_InitTests[] = {\n /*\n  *  Fix Command Arguments for Alpha_Pthread_Init\n  */\n-static const char* apzAlpha_Pthread_InitPatch[] = { \"sed\",\n+static const char* apzAlpha_Pthread_InitPatch[] = { sed_cmd_z,\n     \"-e\", \"s@MVALID\\\\(.*\\\\)A}@MVALID\\\\1A, 0, 0, 0, 0, 0, 0 }@\\n\\\n s@MVALID\\\\(.*\\\\)_}@MVALID\\\\1_, 0, 0, 0, 0 }@\\n\\\n s@CVALID\\\\(.*\\\\)A}@CVALID\\\\1A, 0, 0, 0, 0 }@\\n\\\n@@ -1134,7 +1138,7 @@ static tTestDesc aAlpha_WcharTests[] = {\n /*\n  *  Fix Command Arguments for Alpha_Wchar\n  */\n-static const char* apzAlpha_WcharPatch[] = { \"sed\",\n+static const char* apzAlpha_WcharPatch[] = { sed_cmd_z,\n     \"-e\", \"s@#define wcstok wcstok_r@extern wchar_t *wcstok __((wchar_t *, const wchar_t *, wchar_t **)) __asm__(\\\"wcstok_r\\\");@\",\n     \"-e\", \"s@#define wcsftime __wcsftime_isoc@extern size_t   wcsftime __((wchar_t *, size_t, const wchar_t *, const struct tm *)) __asm__(\\\"__wcsftime_isoc\\\");@\",\n     (char*)NULL };\n@@ -1463,7 +1467,7 @@ static tTestDesc aBroken_CabsTests[] = {\n /*\n  *  Fix Command Arguments for Broken_Cabs\n  */\n-static const char* apzBroken_CabsPatch[] = { \"sed\",\n+static const char* apzBroken_CabsPatch[] = { sed_cmd_z,\n     \"-e\", \"s/^extern[ \\t]*double[ \\t]*cabs[ \\t]*([^\\\\)]*);//\",\n     \"-e\", \"s/^extern[ \\t]*long[ \\t]*double[ \\t]*cabsl[ \\t]*([^\\\\)]*);//\",\n     (char*)NULL };\n@@ -1807,7 +1811,7 @@ tSCC zDec_Intern_AsmList[] =\n /*\n  *  Fix Command Arguments for Dec_Intern_Asm\n  */\n-static const char* apzDec_Intern_AsmPatch[] = { \"sed\",\n+static const char* apzDec_Intern_AsmPatch[] = { sed_cmd_z,\n     \"-e\", \"/^[ \\t]*float[ \\t]*fasm/i\\\\\\n\\\n #ifdef __DECC\\n\",\n     \"-e\", \"/^[ \\t]*#[ \\t]*pragma[ \\t]*intrinsic([ \\t]*dasm/a\\\\\\n\\\n@@ -2117,7 +2121,7 @@ static tTestDesc aGlibc_C99_Inline_2Tests[] = {\n /*\n  *  Fix Command Arguments for Glibc_C99_Inline_2\n  */\n-static const char* apzGlibc_C99_Inline_2Patch[] = { \"sed\",\n+static const char* apzGlibc_C99_Inline_2Patch[] = { sed_cmd_z,\n     \"-e\", \"s/extern int \\\\(stat\\\\|lstat\\\\|fstat\\\\|mknod\\\\)/#ifdef __GNUC_GNU_INLINE__\\\\\\n\\\n extern\\\\\\n\\\n #endif\\\\\\n\\\n@@ -2247,8 +2251,11 @@ static tTestDesc aGlibc_Mutex_InitTests[] = {\n /*\n  *  Fix Command Arguments for Glibc_Mutex_Init\n  */\n-static const char* apzGlibc_Mutex_InitPatch[] = { \"sed\",\n-    \"-e\", \"/define[ \\t]\\\\+PTHREAD_MUTEX_INITIALIZER[ \\t]*\\\\\\\\/,+1s/{ { 0, } }/{ { 0, 0, 0, 0, 0, 0 } }/\",\n+static const char* apzGlibc_Mutex_InitPatch[] = { sed_cmd_z,\n+    \"-e\", \"/define[ \\t]\\\\+PTHREAD_MUTEX_INITIALIZER[ \\t]*\\\\\\\\/{\\n\\\n+N\\n\\\n+s/{ { 0, } }/{ { 0, 0, 0, 0, 0, 0 } }/\\n\\\n+}\",\n     \"-e\", \"s/{ \\\\(0, 0, 0, 0, PTHREAD_MUTEX_\\\\(RECURSIVE\\\\|ERRORCHECK\\\\|ADAPTIVE\\\\)_NP\\\\) }/{ \\\\1, 0 }/\",\n     \"-e\", \"s/{ \\\\(0, 0, 0, PTHREAD_MUTEX_\\\\(RECURSIVE\\\\|ERRORCHECK\\\\|ADAPTIVE\\\\)_NP\\\\) }/{ \\\\1, 0, 0 }/\",\n     \"-e\", \"/define[ \\t]\\\\+PTHREAD_RWLOCK_INITIALIZER[ \\t]*\\\\\\\\/N;s/^[ \\t]*#[ \\t]*\\\\(define[ \\t]\\\\+PTHREAD_RWLOCK_INITIALIZER[ \\t]*\\\\\\\\\\\\)\\\\n[ \\t]*{ { 0, } }/# if __WORDSIZE == 64\\\\n#  \\\\1\\\\n  { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }\\\\n# else\\\\n#  \\\\1\\\\n  { { 0, 0, 0, 0, 0, 0, 0, 0 } }\\\\n# endif/\",\n@@ -2371,6 +2378,51 @@ static const char* apzHp_SysfilePatch[] = {\n     \"\\\\(\\\\.\\\\.\\\\.\\\\)\",\n     (char*)NULL };\n \n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Hppa_Hpux_Fp_Macros fix\n+ */\n+tSCC zHppa_Hpux_Fp_MacrosName[] =\n+     \"hppa_hpux_fp_macros\";\n+\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zHppa_Hpux_Fp_MacrosList[] =\n+  \"math.h\\0\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+tSCC* apzHppa_Hpux_Fp_MacrosMachs[] = {\n+        \"hppa*-hp-hpux11*\",\n+        (const char*)NULL };\n+\n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zHppa_Hpux_Fp_MacrosSelect0[] =\n+       \"#[ \\t]*define[ \\t]*FP_NORMAL.*\\n\\\n+#[ \\t]*define[ \\t]*FP_ZERO.*\\n\\\n+#[ \\t]*define[ \\t]*FP_INFINITE.*\\n\\\n+#[ \\t]*define[ \\t]*FP_SUBNORMAL.*\\n\\\n+#[ \\t]*define[ \\t]*FP_NAN.*\\n\";\n+\n+#define    HPPA_HPUX_FP_MACROS_TEST_CT  1\n+static tTestDesc aHppa_Hpux_Fp_MacrosTests[] = {\n+  { TT_EGREP,    zHppa_Hpux_Fp_MacrosSelect0, (regex_t*)NULL }, };\n+\n+/*\n+ *  Fix Command Arguments for Hppa_Hpux_Fp_Macros\n+ */\n+static const char* apzHppa_Hpux_Fp_MacrosPatch[] = {\n+    \"format\",\n+    \"#endif /* _INCLUDE_HPUX_SOURCE */\\n\\n\\\n+#if defined(_INCLUDE_HPUX_SOURCE) || \\\\\\n\\\n+   (defined(__STDC_VERSION__) && (__STDC_VERSION__ >= 199901L))\\n\\\n+%0#endif\\n\\n\\\n+#ifdef _INCLUDE_HPUX_SOURCE\\n\",\n+    (char*)NULL };\n+\n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n  *  Description of Hpux10_Cpp_Pow_Inline fix\n@@ -2450,50 +2502,6 @@ static const char* apzHpux11_Cpp_Pow_InlinePatch[] = {\n     \"\",\n     (char*)NULL };\n \n-/* * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  Description of Hppa_Hpux_Fp_Macros fix\n- */\n-tSCC zHppa_Hpux_Fp_MacrosName[] =\n-     \"hppa_hpux_fp_macros\";\n-\n-/*\n- *  File name selection pattern\n- */\n-tSCC zHppa_Hpux_Fp_MacrosList[] =\n-  \"math.h\\0\";\n-/*\n- *  Machine/OS name selection pattern\n- */\n-tSCC* apzHppa_Hpux_Fp_MacrosMachs[] = {\n-        \"hppa*-hp-hpux11*\",\n-        (const char*)NULL };\n-\n-/*\n- *  content selection pattern - do fix if pattern found\n- */\n-tSCC zHppa_Hpux_Fp_MacrosSelect0[] =\n-       \"#[ \\t]*define[ \\t]*FP_NORMAL.*\\n\\\n-#[ \\t]*define[ \\t]*FP_ZERO.*\\n\\\n-#[ \\t]*define[ \\t]*FP_INFINITE.*\\n\\\n-#[ \\t]*define[ \\t]*FP_SUBNORMAL.*\\n\\\n-#[ \\t]*define[ \\t]*FP_NAN.*\\n\";\n-\n-#define    HPPA_HPUX_FP_MACROS_TEST_CT  1\n-static tTestDesc aHppa_Hpux_Fp_MacrosTests[] = {\n-  { TT_EGREP,    zHppa_Hpux_Fp_MacrosSelect0, (regex_t*)NULL }, };\n-\n-/*\n- *  Fix Command Arguments for Hppa_Hpux_Fp_Macros\n- */\n-static const char* apzHppa_Hpux_Fp_MacrosPatch[] = {\n-    \"format\",\n-    \"#endif /* _INCLUDE_HPUX_SOURCE */\\n\\n\\\n-#if defined(_INCLUDE_HPUX_SOURCE) || (defined(__STDC_VERSION__) && (__STDC_VERSION__ >= 199901L))\\n\\\n-%0#endif\\n\\n\\\n-#ifdef _INCLUDE_HPUX_SOURCE\\n\",\n-    (char*)NULL };\n-\n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n  *  Description of Hpux10_Ctype_Declarations1 fix\n@@ -2740,6 +2748,43 @@ static const char* apzHpux11_FabsfPatch[] = {\n #endif\",\n     (char*)NULL };\n \n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Hpux11_Pthread_Const fix\n+ */\n+tSCC zHpux11_Pthread_ConstName[] =\n+     \"hpux11_pthread_const\";\n+\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zHpux11_Pthread_ConstList[] =\n+  \"sys/pthread.h\\0\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+tSCC* apzHpux11_Pthread_ConstMachs[] = {\n+        \"*-hp-hpux11.[0-3]*\",\n+        (const char*)NULL };\n+\n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zHpux11_Pthread_ConstSelect0[] =\n+       \"^#define[ \\t]*__POINTER_SET[ \\t]*\\\\(\\\\(void \\\\*\\\\) 1LL\\\\)\";\n+\n+#define    HPUX11_PTHREAD_CONST_TEST_CT  1\n+static tTestDesc aHpux11_Pthread_ConstTests[] = {\n+  { TT_EGREP,    zHpux11_Pthread_ConstSelect0, (regex_t*)NULL }, };\n+\n+/*\n+ *  Fix Command Arguments for Hpux11_Pthread_Const\n+ */\n+static const char* apzHpux11_Pthread_ConstPatch[] = {\n+    \"format\",\n+    \"#define __POINTER_SET\\t\\t((void *) 1L)\",\n+    (char*)NULL };\n+\n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n  *  Description of Hpux11_Size_T fix\n@@ -2918,7 +2963,7 @@ static tTestDesc aHpux8_Bogus_InlinesTests[] = {\n /*\n  *  Fix Command Arguments for Hpux8_Bogus_Inlines\n  */\n-static const char* apzHpux8_Bogus_InlinesPatch[] = { \"sed\",\n+static const char* apzHpux8_Bogus_InlinesPatch[] = { sed_cmd_z,\n     \"-e\", \"s@inline int abs(int [a-z][a-z]*) {.*}@extern \\\"C\\\" int abs(int);@\",\n     \"-e\", \"s@inline double abs(double [a-z][a-z]*) {.*}@@\",\n     \"-e\", \"s@inline int sqr(int [a-z][a-z]*) {.*}@@\",\n@@ -3037,7 +3082,7 @@ static tTestDesc aHpux_Long_DoubleTests[] = {\n /*\n  *  Fix Command Arguments for Hpux_Long_Double\n  */\n-static const char* apzHpux_Long_DoublePatch[] = { \"sed\",\n+static const char* apzHpux_Long_DoublePatch[] = { sed_cmd_z,\n     \"-e\", \"/^#[ \\t]*ifndef _LONG_DOUBLE/,/\\\\/\\\\* _LONG_DOUBLE \\\\*\\\\//D\",\n     \"-e\", \"s/long_double/long double/g\",\n     (char*)NULL };\n@@ -3238,43 +3283,6 @@ extern \\\"C\\\" {\\n\\\n #endif\",\n     (char*)NULL };\n \n-/* * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  Description of Hpux11_Pthread_Const fix\n- */\n-tSCC zHpux11_Pthread_ConstName[] =\n-     \"hpux11_pthread_const\";\n-\n-/*\n- *  File name selection pattern\n- */\n-tSCC zHpux11_Pthread_ConstList[] =\n-  \"sys/pthread.h\\0\";\n-/*\n- *  Machine/OS name selection pattern\n- */\n-tSCC* apzHpux11_Pthread_ConstMachs[] = {\n-        \"*-hp-hpux11.[0-3]*\",\n-        (const char*)NULL };\n-\n-/*\n- *  content selection pattern - do fix if pattern found\n- */\n-tSCC zHpux11_Pthread_ConstSelect0[] =\n-       \"^#define[ \\t]*__POINTER_SET[ \\t]*\\\\(\\\\(void \\\\*\\\\) 1LL\\\\)\";\n-\n-#define    HPUX11_PTHREAD_CONST_TEST_CT  1\n-static tTestDesc aHpux11_Pthread_ConstTests[] = {\n-  { TT_EGREP,    zHpux11_Pthread_ConstSelect0, (regex_t*)NULL }, };\n-\n-/*\n- *  Fix Command Arguments for Hpux11_Pthread_Const\n- */\n-static const char* apzHpux11_Pthread_ConstPatch[] = {\n-    \"format\",\n-    \"#define __POINTER_SET\\t\\t((void *) 1L)\",\n-    (char*)NULL };\n-\n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n  *  Description of Hpux_Pthread_Initializers fix\n@@ -3299,7 +3307,7 @@ tSCC* apzHpux_Pthread_InitializersMachs[] = {\n /*\n  *  Fix Command Arguments for Hpux_Pthread_Initializers\n  */\n-static const char* apzHpux_Pthread_InitializersPatch[] = { \"sed\",\n+static const char* apzHpux_Pthread_InitializersPatch[] = { sed_cmd_z,\n     \"-e\", \"s@^[ \\t]*1, 1, 1, 1,[ \\t]*\\\\\\\\@\\t{ 1, 1, 1, 1 },\\t\\t\\t\\t\\t\\t\\t\\\\\\\\@\",\n     \"-e\", \"s@^[ \\t]*1,[ \\t]*\\\\\\\\@\\t{ 1, 0 }@\",\n     \"-e\", \"/^[ \\t]*0$/d\",\n@@ -3581,7 +3589,7 @@ static tTestDesc aIp_Missing_SemiTests[] = {\n /*\n  *  Fix Command Arguments for Ip_Missing_Semi\n  */\n-static const char* apzIp_Missing_SemiPatch[] = { \"sed\",\n+static const char* apzIp_Missing_SemiPatch[] = { sed_cmd_z,\n     \"-e\", \"/^struct/,/^};/s/}$/};/\",\n     (char*)NULL };\n \n@@ -4387,7 +4395,7 @@ static tTestDesc aNested_Sys_LimitsTests[] = {\n /*\n  *  Fix Command Arguments for Nested_Sys_Limits\n  */\n-static const char* apzNested_Sys_LimitsPatch[] = { \"sed\",\n+static const char* apzNested_Sys_LimitsPatch[] = { sed_cmd_z,\n     \"-e\", \"/CHILD_MAX/s,/\\\\* Max, Max,\",\n     \"-e\", \"/OPEN_MAX/s,/\\\\* Max, Max,\",\n     (char*)NULL };\n@@ -5148,7 +5156,7 @@ static tTestDesc aSco_MathTests[] = {\n /*\n  *  Fix Command Arguments for Sco_Math\n  */\n-static const char* apzSco_MathPatch[] = { \"sed\",\n+static const char* apzSco_MathPatch[] = { sed_cmd_z,\n     \"-e\", \"/#define.*__fp_class(a) \\\\\\\\/i\\\\\\n\\\n #ifndef __GNUC__\\n\",\n     \"-e\", \"/.*__builtin_generic/a\\\\\\n\\\n@@ -5671,7 +5679,7 @@ static tTestDesc aSolaris_Stdio_TagTests[] = {\n /*\n  *  Fix Command Arguments for Solaris_Stdio_Tag\n  */\n-static const char* apzSolaris_Stdio_TagPatch[] = { \"sed\",\n+static const char* apzSolaris_Stdio_TagPatch[] = { sed_cmd_z,\n     \"-e\", \"s/defined(__cplusplus) && (__cplusplus < 54321L)/0/\",\n     (char*)NULL };\n \n@@ -5780,7 +5788,7 @@ static tTestDesc aStdio_Va_ListTests[] = {\n /*\n  *  Fix Command Arguments for Stdio_Va_List\n  */\n-static const char* apzStdio_Va_ListPatch[] = { \"sed\",\n+static const char* apzStdio_Va_ListPatch[] = { sed_cmd_z,\n     \"-e\", \"s@[ \\t]va_list\\\\([ \\t)]\\\\)@ __gnuc_va_list\\\\1@\\n\\\n s@(va_list)&@(__gnuc_va_list)\\\\&@\\n\\\n s@ _VA_LIST_));@ __gnuc_va_list));@\\n\\\n@@ -5830,7 +5838,7 @@ static tTestDesc aStdio_Va_List_ClientsTests[] = {\n /*\n  *  Fix Command Arguments for Stdio_Va_List_Clients\n  */\n-static const char* apzStdio_Va_List_ClientsPatch[] = { \"sed\",\n+static const char* apzStdio_Va_List_ClientsPatch[] = { sed_cmd_z,\n     \"-e\", \"s@[ \\t]va_list\\\\([ \\t)]\\\\)@ __gnuc_va_list\\\\1@\\n\\\n s@(va_list)&@(__gnuc_va_list)\\\\&@\\n\\\n s@ _VA_LIST_));@ __gnuc_va_list));@\\n\\\n@@ -6211,7 +6219,7 @@ static tTestDesc aSun_MallocTests[] = {\n /*\n  *  Fix Command Arguments for Sun_Malloc\n  */\n-static const char* apzSun_MallocPatch[] = { \"sed\",\n+static const char* apzSun_MallocPatch[] = { sed_cmd_z,\n     \"-e\", \"s/typedef[ \\t]char \\\\*\\tmalloc_t/typedef void \\\\*\\tmalloc_t/g\",\n     \"-e\", \"s/int[ \\t][ \\t]*free/void\\tfree/g\",\n     \"-e\", \"s/char\\\\([ \\t]*\\\\*[ \\t]*malloc\\\\)/void\\\\1/g\",\n@@ -6249,7 +6257,7 @@ static tTestDesc aSun_Rusers_SemiTests[] = {\n /*\n  *  Fix Command Arguments for Sun_Rusers_Semi\n  */\n-static const char* apzSun_Rusers_SemiPatch[] = { \"sed\",\n+static const char* apzSun_Rusers_SemiPatch[] = { sed_cmd_z,\n     \"-e\", \"/^struct/,/^};/s/_cnt$/_cnt;/\",\n     (char*)NULL };\n \n@@ -6357,7 +6365,7 @@ static tTestDesc aSvr4_Disable_OptTests[] = {\n /*\n  *  Fix Command Arguments for Svr4_Disable_Opt\n  */\n-static const char* apzSvr4_Disable_OptPatch[] = { \"sed\",\n+static const char* apzSvr4_Disable_OptPatch[] = { sed_cmd_z,\n     \"-e\", \"/#define.*__std_hdr_/d\",\n     (char*)NULL };\n \n@@ -6547,7 +6555,7 @@ static tTestDesc aSysv68_StringTests[] = {\n /*\n  *  Fix Command Arguments for Sysv68_String\n  */\n-static const char* apzSysv68_StringPatch[] = { \"sed\",\n+static const char* apzSysv68_StringPatch[] = { sed_cmd_z,\n     \"-e\", \"s/extern[ \\t]*int[ \\t]*strlen();/extern unsigned int strlen();/\",\n     \"-e\", \"s/extern[ \\t]*int[ \\t]*ffs[ \\t]*(long);/extern int ffs(int);/\",\n     \"-e\", \"s/strdup(char \\\\*s1);/strdup(const char *s1);/\",\n@@ -6852,7 +6860,7 @@ static tTestDesc aVxworks_Gcc_ProblemTests[] = {\n /*\n  *  Fix Command Arguments for Vxworks_Gcc_Problem\n  */\n-static const char* apzVxworks_Gcc_ProblemPatch[] = { \"sed\",\n+static const char* apzVxworks_Gcc_ProblemPatch[] = { sed_cmd_z,\n     \"-e\", \"s/#ifdef __GNUC_TYPEOF_FEATURE_BROKEN_USE_DEFAULT_UNTIL_FIXED__/#if 1/\",\n     \"-e\", \"/[ \\t]size_t/i\\\\\\n\\\n #ifndef _GCC_SIZE_T\\\\\\n\\\n@@ -6949,7 +6957,7 @@ static tTestDesc aVxworks_Needs_VxworksTests[] = {\n /*\n  *  Fix Command Arguments for Vxworks_Needs_Vxworks\n  */\n-static const char* apzVxworks_Needs_VxworksPatch[] = { \"sed\",\n+static const char* apzVxworks_Needs_VxworksPatch[] = { sed_cmd_z,\n     \"-e\", \"/#[ \\t]define[ \\t][ \\t]*__INCstath/a\\\\\\n\\\n #include <types/vxTypesOld.h>\\n\",\n     (char*)NULL };\n@@ -7122,7 +7130,7 @@ static tTestDesc aX11_NewTests[] = {\n /*\n  *  Fix Command Arguments for X11_New\n  */\n-static const char* apzX11_NewPatch[] = { \"sed\",\n+static const char* apzX11_NewPatch[] = { sed_cmd_z,\n     \"-e\", \"/Widget\\told, new;/i\\\\\\n\\\n #ifdef __cplusplus\\\\\\n\\\n \\tWidget\\told, c_new;\\\\\\n\\\n@@ -7239,14 +7247,15 @@ typedef enum {\n     GNU_TYPES_FIXIDX,\n     HP_INLINE_FIXIDX,\n     HP_SYSFILE_FIXIDX,\n+    HPPA_HPUX_FP_MACROS_FIXIDX,\n     HPUX10_CPP_POW_INLINE_FIXIDX,\n     HPUX11_CPP_POW_INLINE_FIXIDX,\n-    HPPA_HPUX_FP_MACROS_FIXIDX,\n     HPUX10_CTYPE_DECLARATIONS1_FIXIDX,\n     HPUX10_CTYPE_DECLARATIONS2_FIXIDX,\n     HPUX10_STDIO_DECLARATIONS_FIXIDX,\n     HPUX11_ABS_FIXIDX,\n     HPUX11_FABSF_FIXIDX,\n+    HPUX11_PTHREAD_CONST_FIXIDX,\n     HPUX11_SIZE_T_FIXIDX,\n     HPUX11_SNPRINTF_FIXIDX,\n     HPUX11_UINT32_C_FIXIDX,\n@@ -7260,7 +7269,6 @@ typedef enum {\n     HPUX11_EXTERN_SENDFILE_FIXIDX,\n     HPUX11_EXTERN_SENDPATH_FIXIDX,\n     HPUX_EXTERN_ERRNO_FIXIDX,\n-    HPUX11_PTHREAD_CONST_FIXIDX,\n     HPUX_PTHREAD_INITIALIZERS_FIXIDX,\n     HUGE_VAL_HEX_FIXIDX,\n     HUGE_VALF_HEX_FIXIDX,\n@@ -7647,6 +7655,11 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n      HP_SYSFILE_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n      aHp_SysfileTests,   apzHp_SysfilePatch, 0 },\n \n+  {  zHppa_Hpux_Fp_MacrosName,    zHppa_Hpux_Fp_MacrosList,\n+     apzHppa_Hpux_Fp_MacrosMachs,\n+     HPPA_HPUX_FP_MACROS_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n+     aHppa_Hpux_Fp_MacrosTests,   apzHppa_Hpux_Fp_MacrosPatch, 0 },\n+\n   {  zHpux10_Cpp_Pow_InlineName,    zHpux10_Cpp_Pow_InlineList,\n      apzHpux10_Cpp_Pow_InlineMachs,\n      HPUX10_CPP_POW_INLINE_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n@@ -7657,11 +7670,6 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n      HPUX11_CPP_POW_INLINE_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n      aHpux11_Cpp_Pow_InlineTests,   apzHpux11_Cpp_Pow_InlinePatch, 0 },\n \n-  {  zHppa_Hpux_Fp_MacrosName,    zHppa_Hpux_Fp_MacrosList,\n-     apzHppa_Hpux_Fp_MacrosMachs,\n-     HPPA_HPUX_FP_MACROS_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n-     aHppa_Hpux_Fp_MacrosTests,   apzHppa_Hpux_Fp_MacrosPatch, 0 },\n-\n   {  zHpux10_Ctype_Declarations1Name,    zHpux10_Ctype_Declarations1List,\n      apzHpux10_Ctype_Declarations1Machs,\n      HPUX10_CTYPE_DECLARATIONS1_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n@@ -7687,6 +7695,11 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n      HPUX11_FABSF_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n      aHpux11_FabsfTests,   apzHpux11_FabsfPatch, 0 },\n \n+  {  zHpux11_Pthread_ConstName,    zHpux11_Pthread_ConstList,\n+     apzHpux11_Pthread_ConstMachs,\n+     HPUX11_PTHREAD_CONST_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n+     aHpux11_Pthread_ConstTests,   apzHpux11_Pthread_ConstPatch, 0 },\n+\n   {  zHpux11_Size_TName,    zHpux11_Size_TList,\n      apzHpux11_Size_TMachs,\n      HPUX11_SIZE_T_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n@@ -7752,11 +7765,6 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n      HPUX_EXTERN_ERRNO_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n      aHpux_Extern_ErrnoTests,   apzHpux_Extern_ErrnoPatch, 0 },\n \n-  {  zHpux11_Pthread_ConstName,    zHpux11_Pthread_ConstList,\n-     apzHpux11_Pthread_ConstMachs,\n-     HPUX11_PTHREAD_CONST_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n-     aHpux11_Pthread_ConstTests,   apzHpux11_Pthread_ConstPatch, 0 },\n-\n   {  zHpux_Pthread_InitializersName,    zHpux_Pthread_InitializersList,\n      apzHpux_Pthread_InitializersMachs,\n      HPUX_PTHREAD_INITIALIZERS_TEST_CT, FD_MACH_ONLY,"}, {"sha": "69ea0cf59a80f5a6f24f2bb621c569e8fe4f04cf", "filename": "fixincludes/inclhack.def", "status": "modified", "additions": 97, "deletions": 70, "changes": 167, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Finclhack.def?ref=6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "patch": "@@ -620,6 +620,7 @@ fix = {\n \t\t\"#endif\";\n };\n \n+\n /*\n  * Compaq Tru64 v5.1 defines all of its PTHREAD_*_INITIALIZER macros\n  * incorrectly, specifying less fields in the initializers than are\n@@ -639,32 +640,34 @@ fix = {\n                 \"s@CVALID\\\\(.*\\\\)_}@CVALID\\\\1_, 0, 0 }@\\n\"\n                 \"s@WVALID\\\\(.*\\\\)A}@WVALID\\\\1A, 0, 0, 0, 0, 0, 0, 0, 0, 0 }@\\n\"\n                 \"s@WVALID\\\\(.*\\\\)_}@WVALID\\\\1_, 0, 0, 0, 0, 0, 0, 0 }@\\n\";\n-    test_text = \"/*\\n\"\n-                \" * @(#)_RCSfile: pthread.h,v \\\\$ \"\n-                \"_Revision: 1.1.33.21 \\\\$ (DEC) \"\n-                \"_Date: 2000/08/15 15:30:13 \\\\$\\n\"\n-                \" */\\n\"\n-\"#ifndef _PTHREAD_NOMETER_STATIC\\n\"\n-\"# define PTHREAD_MUTEX_INITIALIZER \\\\\\n\"\n-\"    {_PTHREAD_MSTATE_CONFIG, _PTHREAD_MVALID | _PTHREAD_MVF_STA}\\n\"\n-\"# define PTHREAD_COND_INITIALIZER \\\\\\n\"\n-\"    {_PTHREAD_CSTATE_SLOW, _PTHREAD_CVALID | _PTHREAD_CVF_STA}\\n\"\n-\"# define PTHREAD_MUTEX_INITWITHNAME_NP(_n_,_a_) \\\\\\n\"\n-\"    {_PTHREAD_MSTATE_CONFIG, _PTHREAD_MVALID | _PTHREAD_MVF_STA, _n_, _a_}\\n\"\n-\"# define PTHREAD_COND_INITWITHNAME_NP(_n_,_a_) \\\\\\n\"\n-\"    {_PTHREAD_CSTATE_SLOW, _PTHREAD_CVALID | _PTHREAD_CVF_STA, _n_, _a_}\\n\"\n-\"#else\\n\"\n-\"# define PTHREAD_MUTEX_INITIALIZER {0, _PTHREAD_MVALID | _PTHREAD_MVF_STA}\\n\"\n-\"# define PTHREAD_MUTEX_INITWITHNAME_NP(_n_,_a_) \\\\\\n\"\n-\"    {0, _PTHREAD_MVALID | _PTHREAD_MVF_STA, _n_, _a_}\\n\"\n-\"# define PTHREAD_COND_INITWITHNAME_NP(_n_,_a_) \\\\\\n\"\n-\"    {0, _PTHREAD_CVALID | _PTHREAD_CVF_STA, _n_, _a_}\\n\"\n-\"#endif\\n\\n\"\n-\"#define PTHREAD_RWLOCK_INITIALIZER {_PTHREAD_RWVALID | _PTHREAD_RWVF_STA}\\n\"\n-\"#define PTHREAD_RWLOCK_INITWITHNAME_NP(_n_,_a_) \\\\\\n\"\n-\"        {_PTHREAD_RWVALID | _PTHREAD_RWVF_STA, _n_, _a_}\\n\";\n+    test_text = <<- _EOText_\n+\t/*\n+\t * @(#)_RCSfile: pthread.h,v $ _Revision: 1.1.33.21 $ (DEC) _Date: 2000/08/15 15:30:13 $\n+\t */\n+\t#ifndef _PTHREAD_NOMETER_STATIC\n+\t# define PTHREAD_MUTEX_INITIALIZER \\\n+\t    {_PTHREAD_MSTATE_CONFIG, _PTHREAD_MVALID | _PTHREAD_MVF_STA}\n+\t# define PTHREAD_COND_INITIALIZER \\\n+\t    {_PTHREAD_CSTATE_SLOW, _PTHREAD_CVALID | _PTHREAD_CVF_STA}\n+\t# define PTHREAD_MUTEX_INITWITHNAME_NP(_n_,_a_) \\\n+\t    {_PTHREAD_MSTATE_CONFIG, _PTHREAD_MVALID | _PTHREAD_MVF_STA, _n_, _a_}\n+\t# define PTHREAD_COND_INITWITHNAME_NP(_n_,_a_) \\\n+\t    {_PTHREAD_CSTATE_SLOW, _PTHREAD_CVALID | _PTHREAD_CVF_STA, _n_, _a_}\n+\t#else\n+\t# define PTHREAD_MUTEX_INITIALIZER {0, _PTHREAD_MVALID | _PTHREAD_MVF_STA}\n+\t# define PTHREAD_MUTEX_INITWITHNAME_NP(_n_,_a_) \\\n+\t    {0, _PTHREAD_MVALID | _PTHREAD_MVF_STA, _n_, _a_}\n+\t# define PTHREAD_COND_INITWITHNAME_NP(_n_,_a_) \\\n+\t    {0, _PTHREAD_CVALID | _PTHREAD_CVF_STA, _n_, _a_}\n+\t#endif\n+\n+\t#define PTHREAD_RWLOCK_INITIALIZER {_PTHREAD_RWVALID | _PTHREAD_RWVF_STA}\n+\t#define PTHREAD_RWLOCK_INITWITHNAME_NP(_n_,_a_) \\\n+\t        {_PTHREAD_RWVALID | _PTHREAD_RWVF_STA, _n_, _a_}\n+\t_EOText_;\n };\n \n+\n /*\n  *  Fix return value of sbrk in unistd.h on Alpha OSF/1 V2.0\n  *  And OpenBSD.\n@@ -852,10 +855,10 @@ fix = {\n                 \"extern long double cabsl( struct __cabsl_s );\";\n };\n \n+\n /*\n  * Fixup Darwin's broken check for __builtin_nanf.\n- */ \n-    \n+ */    \n fix = {\n     hackname  = broken_nan;\n     /*\n@@ -871,7 +874,7 @@ fix = {\n     c_fix     = format; \n     c_fix_arg = \"#if 1\";\n     test_text = \"#if defined(__APPLE_CC__) && (__APPLE_CC__ >= 1345)\";\n-}; \n+};\n \n \n /*\n@@ -1228,10 +1231,12 @@ fix = {\n     hackname = glibc_mutex_init;\n     files    = pthread.h;\n     select   = '\\{ *\\{ *0, *\\} *\\}';\n-    sed      = \"/define[ \\t]\\\\+PTHREAD_MUTEX_INITIALIZER[ \\t]*\\\\\\\\/,+1\"\n-               \"s/{ { 0, } }/{ { 0, 0, 0, 0, 0, 0 } }/\";\n-    sed      = \"s/{ \\\\(0, 0, 0, 0, PTHREAD_MUTEX_\\\\(RECURSIVE\\\\|ERRORCHECK\\\\|ADAPTIVE\\\\)_NP\\\\) }/{ \\\\1, 0 }/\";\n-    sed      = \"s/{ \\\\(0, 0, 0, PTHREAD_MUTEX_\\\\(RECURSIVE\\\\|ERRORCHECK\\\\|ADAPTIVE\\\\)_NP\\\\) }/{ \\\\1, 0, 0 }/\";\n+    sed      = \"/define[ \\t]\\\\+PTHREAD_MUTEX_INITIALIZER[ \\t]*\\\\\\\\/{\\n\"\n+               \"N\\ns/{ { 0, } }/{ { 0, 0, 0, 0, 0, 0 } }/\\n}\";\n+    sed      = \"s/{ \\\\(0, 0, 0, 0, PTHREAD_MUTEX_\"\n+               \"\\\\(RECURSIVE\\\\|ERRORCHECK\\\\|ADAPTIVE\\\\)_NP\\\\) }/{ \\\\1, 0 }/\";\n+    sed      = \"s/{ \\\\(0, 0, 0, PTHREAD_MUTEX_\"\n+               \"\\\\(RECURSIVE\\\\|ERRORCHECK\\\\|ADAPTIVE\\\\)_NP\\\\) }/{ \\\\1, 0, 0 }/\";\n     sed      = \"/define[ \\t]\\\\+PTHREAD_RWLOCK_INITIALIZER[ \\t]*\\\\\\\\/\"\n                \"N;s/^[ \\t]*#[ \\t]*\"\n                \"\\\\(define[ \\t]\\\\+PTHREAD_RWLOCK_INITIALIZER[ \\t]*\\\\\\\\\\\\)\\\\n\"\n@@ -1242,7 +1247,8 @@ fix = {\n                \"#  \\\\1\\\\n\"\n                \"  { { 0, 0, 0, 0, 0, 0, 0, 0 } }\\\\n\"\n                \"# endif/\";\n-    sed      = \"s/{ \\\\(0, 0, 0, 0, 0, 0, PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP\\\\) }/{ \\\\1, 0 }/\";\n+    sed      = \"s/{ \\\\(0, 0, 0, 0, 0, 0, \"\n+               \"PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP\\\\) }/{ \\\\1, 0 }/\";\n     sed      = \"/define[ \\t]\\\\+PTHREAD_COND_INITIALIZER/\"\n                \"s/{ { 0, } }/{ { 0, 0, 0, 0, 0, (void *) 0, 0, 0 } }/\";\n \n@@ -1348,6 +1354,40 @@ fix = {\n };\n \n \n+/*\n+ *  Un-Hide a series of five FP defines from post-1999 compliance GCC:\n+ *  FP_NORMAL, FP_ZERO, FP_INFINITE, FP_SUBNORMAL and FP_NAN\n+ */\n+fix = {\n+     hackname  = hppa_hpux_fp_macros;\n+     mach      = \"hppa*-hp-hpux11*\";\n+     files     = math.h;\n+     select    = \"#[ \\t]*define[ \\t]*FP_NORMAL.*\\n\"\n+\t\t \"#[ \\t]*define[ \\t]*FP_ZERO.*\\n\"\n+\t\t \"#[ \\t]*define[ \\t]*FP_INFINITE.*\\n\"\n+\t\t \"#[ \\t]*define[ \\t]*FP_SUBNORMAL.*\\n\"\n+\t\t \"#[ \\t]*define[ \\t]*FP_NAN.*\\n\";\n+     c_fix     = format;\n+     c_fix_arg = <<- _EOFix_\n+\t#endif /* _INCLUDE_HPUX_SOURCE */\n+\n+\t#if defined(_INCLUDE_HPUX_SOURCE) || \\\n+\t   (defined(__STDC_VERSION__) && (__STDC_VERSION__ >= 199901L))\n+\t%0#endif\n+\n+\t#ifdef _INCLUDE_HPUX_SOURCE\n+\n+\t_EOFix_;\n+\n+     test_text =\n+            \"#  define FP_NORMAL     0\\n\"\n+            \"#  define FP_ZERO       1\\n\"\n+            \"#  define FP_INFINITE   2\\n\"\n+            \"#  define FP_SUBNORMAL  3\\n\"\n+            \"#  define FP_NAN        4\\n\";\n+};\n+\n+\n /*\n  * Delete C++ double pow (double, int) inline function from HP-UX 10 & 11\n  * math.h to prevent clash with define in c_std/bits/std_cmath.h.\n@@ -1396,27 +1436,6 @@ fix = {\n };\n \n \n-fix = {\n-     hackname  = hppa_hpux_fp_macros;\n-     mach      = \"hppa*-hp-hpux11*\";\n-     files     = math.h;\n-     select    = \"#[ \\t]*define[ \\t]*FP_NORMAL.*\\n\"\n-\t\t \"#[ \\t]*define[ \\t]*FP_ZERO.*\\n\"\n-\t\t \"#[ \\t]*define[ \\t]*FP_INFINITE.*\\n\"\n-\t\t \"#[ \\t]*define[ \\t]*FP_SUBNORMAL.*\\n\"\n-\t\t \"#[ \\t]*define[ \\t]*FP_NAN.*\\n\";\n-     c_fix     = format;\n-     c_fix_arg = \"#endif /* _INCLUDE_HPUX_SOURCE */\\n\\n#if defined(_INCLUDE_HPUX_SOURCE) || (defined(__STDC_VERSION__) && (__STDC_VERSION__ >= 199901L))\\n%0#endif\\n\\n#ifdef _INCLUDE_HPUX_SOURCE\\n\";\n-\n-     test_text =\n-            \"#  define FP_NORMAL     0\\n\"\n-            \"#  define FP_ZERO       1\\n\"\n-            \"#  define FP_INFINITE   2\\n\"\n-            \"#  define FP_SUBNORMAL  3\\n\"\n-            \"#  define FP_NAN        4\\n\";\n-};\n-\n-\n /*\n  *  Fix hpux 10.X missing ctype declarations 1\n  */\n@@ -1512,7 +1531,6 @@ fix = {\n     select    = \"ifndef _MATH_INCLUDED\";\n     c_fix     = format;\n     c_fix_arg = \"if !defined(_MATH_INCLUDED) || defined(__GNUG__)\";\n-//  sed       = \"s/ifndef _MATH_INCLUDED/if !defined(_MATH_INCLUDED) || defined(__GNUG__)/\";\n     test_text = \"#ifndef _MATH_INCLUDED\";\n };\n \n@@ -1537,6 +1555,21 @@ fix = {\n };\n \n \n+/*\n+ *  Fix C99 constant in __POINTER_SET define.\n+ */\n+fix = {\n+    hackname  = hpux11_pthread_const;\n+    mach      = \"*-hp-hpux11.[0-3]*\";\n+    files     = sys/pthread.h;\n+    select    = \"^#define[ \\t]*__POINTER_SET[ \\t]*\\\\(\\\\(void \\\\*\\\\) 1LL\\\\)\";\n+\n+    c_fix     = format;\n+    c_fix_arg = \"#define __POINTER_SET\\t\\t((void *) 1L)\";\n+    test_text = \"#define __POINTER_SET\\t\\t((void *) 1LL)\";\n+};\n+\n+\n /*\n  * Prevent HP-UX 11 from defining __size_t and preventing size_t from\n  * being defined by having it define _hpux_size_t instead.\n@@ -1763,19 +1796,6 @@ fix = {\n     test_text = \"   extern int errno;\\n\";\n };\n \n-/*\n- *  Fix C99 constant in __POINTER_SET define.\n- */\n-fix = {\n-    hackname  = hpux11_pthread_const;\n-    mach      = \"*-hp-hpux11.[0-3]*\";\n-    files     = sys/pthread.h;\n-    select    = \"^#define[ \\t]*__POINTER_SET[ \\t]*\\\\(\\\\(void \\\\*\\\\) 1LL\\\\)\";\n-\n-    c_fix     = format;\n-    c_fix_arg = \"#define __POINTER_SET\\t\\t((void *) 1L)\";\n-    test_text = \"#define __POINTER_SET\\t\\t((void *) 1LL)\";\n-};\n \n /*\n  *  Add missing braces to pthread initializer defines.\n@@ -2112,7 +2132,9 @@ fix = {\n     c_fix_arg = \"#if _NO_XOPEN5 && !defined(__c99)\\n%1\";\n \n     test_text = \"#if _NO_XOPEN5\\n\"\n-\t\t\"extern size_t          wcsftime(wchar_t *, __SGI_LIBC_NAMESPACE_QUALIFIER size_t, const char *, const struct tm *);\";\n+\t\t\"extern size_t wcsftime(wchar_t *, \"\n+\t\t\"__SGI_LIBC_NAMESPACE_QUALIFIER size_t, const char *, \"\n+\t\t\"const struct tm *);\";\n };\n \n /*\n@@ -2278,7 +2300,8 @@ fix = {\n      * exception either.  So currently we bypass only for glibc, based on a\n      * comment in the fixed glibc header.  Ick.\n      */\n-    bypass    = 'We have a problem when using C\\+\\+|for C\\+\\+, _[a-z0-9A-Z_]+_exception; for C, exception';\n+    bypass    = 'We have a problem when using C\\+\\+|for C\\+\\+, '\n+\t\t'_[a-z0-9A-Z_]+_exception; for C, exception';\n     c_fix     = wrap;\n \n     c_fix_arg = \"#ifdef __cplusplus\\n\"\n@@ -2368,7 +2391,11 @@ fix = {\n     select    = \"extern __inline int\";\n \n     c_fix     = format;\n-    c_fix_arg = \"extern\\n#ifdef __GNUC_STDC_INLINE__\\n__attribute__((__gnu_inline__))\\n#endif\\n__inline int\";\n+    c_fix_arg = \"extern\\n\"\n+\t\t\"#ifdef __GNUC_STDC_INLINE__\\n\"\n+\t\t\"__attribute__((__gnu_inline__))\\n\"\n+\t\t\"#endif\\n\"\n+\t\t\"__inline int\";\n \n     test_text = \"extern __inline int\\nsigaddset(sigset_t *set, int signo)\\n{}\";\n };"}, {"sha": "9c9fc4e97b29b717400a9ada24291f4a579cf833", "filename": "fixincludes/tests/base/internal/wchar_core.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Ftests%2Fbase%2Finternal%2Fwchar_core.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Ftests%2Fbase%2Finternal%2Fwchar_core.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ftests%2Fbase%2Finternal%2Fwchar_core.h?ref=6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "patch": "@@ -11,5 +11,5 @@\n \n #if defined( IRIX_WCSFTIME_CHECK )\n #if _NO_XOPEN5 && !defined(__c99)\n-extern size_t          wcsftime(wchar_t *, __SGI_LIBC_NAMESPACE_QUALIFIER size_t, const char *, const struct tm *);\n+extern size_t wcsftime(wchar_t *, __SGI_LIBC_NAMESPACE_QUALIFIER size_t, const char *, const struct tm *);\n #endif  /* IRIX_WCSFTIME_CHECK */"}, {"sha": "389dacf25c7136f91d6d35353ea06dfc624754a3", "filename": "fixincludes/tests/base/math.h", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Ftests%2Fbase%2Fmath.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Ftests%2Fbase%2Fmath.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ftests%2Fbase%2Fmath.h?ref=6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "patch": "@@ -43,15 +43,11 @@ extern int matherr();\n #endif  /* EXCEPTION_STRUCTURE_CHECK */\n \n \n-#if defined( HPUX11_CPP_POW_INLINE_CHECK )\n-\n-#endif  /* HPUX11_CPP_POW_INLINE_CHECK */\n-\n-\n #if defined( HPPA_HPUX_FP_MACROS_CHECK )\n #endif /* _INCLUDE_HPUX_SOURCE */\n \n-#if defined(_INCLUDE_HPUX_SOURCE) || (defined(__STDC_VERSION__) && (__STDC_VERSION__ >= 199901L))\n+#if defined(_INCLUDE_HPUX_SOURCE) || \\\n+   (defined(__STDC_VERSION__) && (__STDC_VERSION__ >= 199901L))\n #  define FP_NORMAL     0\n #  define FP_ZERO       1\n #  define FP_INFINITE   2\n@@ -64,6 +60,11 @@ extern int matherr();\n #endif  /* HPPA_HPUX_FP_MACROS_CHECK */\n \n \n+#if defined( HPUX11_CPP_POW_INLINE_CHECK )\n+\n+#endif  /* HPUX11_CPP_POW_INLINE_CHECK */\n+\n+\n #if defined( HPUX11_FABSF_CHECK )\n #ifdef _PA_RISC\n #ifndef __cplusplus"}, {"sha": "4f18e718057053dc409c30c05738dd9d8e3172dd", "filename": "fixincludes/tests/base/pthread.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Ftests%2Fbase%2Fpthread.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e/fixincludes%2Ftests%2Fbase%2Fpthread.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ftests%2Fbase%2Fpthread.h?ref=6aa1f8c1901b70e3d64f8d68d3446c7c3a56474e", "patch": "@@ -52,7 +52,6 @@\n \n #define PTHREAD_RWLOCK_INITIALIZER {_PTHREAD_RWVALID | _PTHREAD_RWVF_STA, 0, 0, 0, 0, 0, 0, 0, 0, 0 }\n #define PTHREAD_RWLOCK_INITWITHNAME_NP(_n_,_a_)         {_PTHREAD_RWVALID | _PTHREAD_RWVF_STA, _n_, _a_, 0, 0, 0, 0, 0, 0, 0 }\n-\n #endif  /* ALPHA_PTHREAD_INIT_CHECK */\n \n "}]}