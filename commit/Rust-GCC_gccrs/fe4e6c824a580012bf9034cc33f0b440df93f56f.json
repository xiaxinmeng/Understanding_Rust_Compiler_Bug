{"sha": "fe4e6c824a580012bf9034cc33f0b440df93f56f", "node_id": "C_kwDOANBUbNoAKGZlNGU2YzgyNGE1ODAwMTJiZjkwMzRjYzMzZjBiNDQwZGY5M2Y1NmY", "commit": {"author": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2021-09-23T13:32:00Z"}, "committer": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2021-09-23T16:56:43Z"}, "message": "Look for a relation between operands only when possible.\n\nDo not look for a relation between 2 operands if there is no range-ops handler.\n\n\tgcc/\n\tPR tree-optimization/102463\n\t* gimple-range-fold.cc (fold_using_range::relation_fold_and_or): If\n\tthere is no range-ops handler, don't look for a relation.\n\n\tgcc/testsuite/\n\t* gcc.dg/pr102463.c: New.", "tree": {"sha": "d51ab000122b4b0e4c987ac4c00cccf6d0675680", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d51ab000122b4b0e4c987ac4c00cccf6d0675680"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe4e6c824a580012bf9034cc33f0b440df93f56f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe4e6c824a580012bf9034cc33f0b440df93f56f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe4e6c824a580012bf9034cc33f0b440df93f56f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe4e6c824a580012bf9034cc33f0b440df93f56f/comments", "author": null, "committer": null, "parents": [{"sha": "053e1d642104d19d5f9e5fb08a9e7354a0db28f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/053e1d642104d19d5f9e5fb08a9e7354a0db28f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/053e1d642104d19d5f9e5fb08a9e7354a0db28f5"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "bb09b751a4e628749131e898c78c42fc470396ea", "filename": "gcc/gimple-range-fold.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe4e6c824a580012bf9034cc33f0b440df93f56f/gcc%2Fgimple-range-fold.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe4e6c824a580012bf9034cc33f0b440df93f56f/gcc%2Fgimple-range-fold.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-range-fold.cc?ref=fe4e6c824a580012bf9034cc33f0b440df93f56f", "patch": "@@ -1358,6 +1358,10 @@ fold_using_range::relation_fold_and_or (irange& lhs_range, gimple *s,\n   range_operator *handler1 = gimple_range_handler (SSA_NAME_DEF_STMT (ssa1));\n   range_operator *handler2 = gimple_range_handler (SSA_NAME_DEF_STMT (ssa2));\n \n+  // If either handler is not present, no relation is found.\n+  if (!handler1 || !handler2)\n+    return;\n+\n   int_range<2> bool_one (boolean_true_node, boolean_true_node);\n \n   relation_kind relation1 = handler1->op1_op2_relation (bool_one);"}, {"sha": "ca63f0b8767dc8ec034f3e23d0111eccfaaa1352", "filename": "gcc/testsuite/gcc.dg/pr102463.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe4e6c824a580012bf9034cc33f0b440df93f56f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr102463.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe4e6c824a580012bf9034cc33f0b440df93f56f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr102463.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr102463.c?ref=fe4e6c824a580012bf9034cc33f0b440df93f56f", "patch": "@@ -0,0 +1,21 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+_Bool _bfd_elf_merge_symbol_h, _bfd_elf_merge_symbol_h_1;\n+_Bool _bfd_elf_merge_symbol_olddef;\n+_Bool bfd_is_com_section();\n+\n+void\n+_bfd_elf_merge_symbol() {\n+  _Bool newdef = bfd_is_com_section(), ntdef, tdef;\n+  _bfd_elf_merge_symbol_olddef = _bfd_elf_merge_symbol_h;\n+  if (_bfd_elf_merge_symbol_h_1) {\n+    ntdef = newdef;\n+    tdef = _bfd_elf_merge_symbol_h;\n+  } else {\n+    ntdef = _bfd_elf_merge_symbol_h;\n+    tdef = newdef;\n+  }\n+  if (tdef && ntdef)\n+    ;\n+}"}]}