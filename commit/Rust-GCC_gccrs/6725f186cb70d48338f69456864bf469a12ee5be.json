{"sha": "6725f186cb70d48338f69456864bf469a12ee5be", "node_id": "C_kwDOANBUbNoAKDY3MjVmMTg2Y2I3MGQ0ODMzOGY2OTQ1Njg2NGJmNDY5YTEyZWU1YmU", "commit": {"author": {"name": "Mark Mentovai", "email": "mark@mentovai.com", "date": "2022-06-10T14:56:42Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2022-06-12T22:20:57Z"}, "message": "Darwin: Future-proof -mmacosx-version-min\n\nf18cbc1ee1f4 (2021-12-18) updated various parts of gcc to not impose a\nDarwin or macOS version maximum of the current known release. Different\nparts of gcc accept, variously, Darwin version numbers matching\ndarwin2*, and macOS major version numbers up to 99. The current released\nversion is Darwin 21 and macOS 12, with Darwin 22 and macOS 13 expected\nfor public release later this year. With one major OS release per year,\nthis strategy is expected to provide another 8 years of headroom.\n\nHowever, f18cbc1ee1f4 missed config/darwin-c.c (now .cc), which\ncontinued to impose a maximum of macOS 12 on the -mmacosx-version-min\ncompiler driver argument. This was last updated from 11 to 12 in\n11b967577483 (2021-10-27), but kicking the can down the road one year at\na time is not a viable strategy, and is not in line with the more recent\ntechnique from f18cbc1ee1f4.\n\nPrior to 556ab5125912 (2020-11-06), config/darwin-c.c did not impose a\nmaximum that needed annual maintenance, as at that point, all macOS\nreleases had used a major version of 10. The stricter approach imposed\nsince then was valuable for a time until the particulars of the new\nversioning scheme were established and understood, but now that they\nare, it's prudent to restore a more permissive approach.\n\ngcc/ChangeLog:\n\n\t* config/darwin-c.cc: Make -mmacosx-version-min more future-proof.\n\nSigned-off-by: Mark Mentovai <mark@mentovai.com>", "tree": {"sha": "219fd33438c2957c8f463b5996cb31740281690f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/219fd33438c2957c8f463b5996cb31740281690f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6725f186cb70d48338f69456864bf469a12ee5be", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6725f186cb70d48338f69456864bf469a12ee5be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6725f186cb70d48338f69456864bf469a12ee5be", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6725f186cb70d48338f69456864bf469a12ee5be/comments", "author": {"login": "markmentovai", "id": 933273, "node_id": "MDQ6VXNlcjkzMzI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/933273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markmentovai", "html_url": "https://github.com/markmentovai", "followers_url": "https://api.github.com/users/markmentovai/followers", "following_url": "https://api.github.com/users/markmentovai/following{/other_user}", "gists_url": "https://api.github.com/users/markmentovai/gists{/gist_id}", "starred_url": "https://api.github.com/users/markmentovai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markmentovai/subscriptions", "organizations_url": "https://api.github.com/users/markmentovai/orgs", "repos_url": "https://api.github.com/users/markmentovai/repos", "events_url": "https://api.github.com/users/markmentovai/events{/privacy}", "received_events_url": "https://api.github.com/users/markmentovai/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ff500e1cf16d95d9400da6b7d11020f5cb8524ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff500e1cf16d95d9400da6b7d11020f5cb8524ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff500e1cf16d95d9400da6b7d11020f5cb8524ad"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "1f82b36d2de10e09cdd826eb77b78a9ab9f68203", "filename": "gcc/config/darwin-c.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6725f186cb70d48338f69456864bf469a12ee5be/gcc%2Fconfig%2Fdarwin-c.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6725f186cb70d48338f69456864bf469a12ee5be/gcc%2Fconfig%2Fdarwin-c.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin-c.cc?ref=6725f186cb70d48338f69456864bf469a12ee5be", "patch": "@@ -691,7 +691,8 @@ macosx_version_as_macro (void)\n   if (!version_array)\n     goto fail;\n \n-  if (version_array[MAJOR] < 10 || version_array[MAJOR] > 12)\n+  /* System tools accept up to 99 as a major version.  */\n+  if (version_array[MAJOR] < 10 || version_array[MAJOR] > 99)\n     goto fail;\n \n   if (version_array[MAJOR] == 10 && version_array[MINOR] < 10)"}]}