{"sha": "882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODgyZWFkYWYyMGVjODIzN2NmOTFjZDQ2ZmVhNGQ4NTZkZGEwYjNjNg==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2013-10-10T12:38:44Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2013-10-10T12:38:44Z"}, "message": "sem_aggr.adb (Resolve_Array_Aggregate): Identify duplicated cases.\n\n2013-10-10  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_aggr.adb (Resolve_Array_Aggregate): Identify duplicated\n\tcases.\n\n2013-10-10  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_ch9.adb (Analyze_Task_Body): Aspects are illegal\n\t(Analyze_Protected_Body): Aspects are illegal.\n\n2013-10-10  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_ch6.adb, sem_ch13.adb: Minor reformatting.\n\t* sem_case.adb (Check_Choices): Fix bad listing of missing\n\tvalues from predicated subtype case (Check_Choices): List\n\tduplicated values.\n\t* errout.adb (Set_Msg_Text): Process warning tags in VMS mode\n\t* erroutc.adb (Output_Msg_Text): Handle VMS warning tags\n\t* gnat_ugn.texi: Document /WARNINGS=TAG_WARNINGS for VMS\n\t* ug_words: Add entries for -gnatw.d and -gnatw.D\n\t* vms_data.ads: Add [NO]TAG_WARNINGS for -gnatw.D/-gnatw.d\n\t* lib-writ.ads: Documentation fixes\n\n2013-10-10  Robert Dewar  <dewar@adacore.com>\n\n\t* a-wichha.adb, a-wichha.ads, a-zchhan.adb, a-zchhan.ads\n\t(Is_Other_Format): New name for Is_Other.\n\t(Is_Punctuation_Connector): New name for Is_Punctuation\n\nFrom-SVN: r203366", "tree": {"sha": "f6d8b6353875c6410d7322d14dc9a5694a443286", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f6d8b6353875c6410d7322d14dc9a5694a443286"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/comments", "author": null, "committer": null, "parents": [{"sha": "ea3c0651d31936376fae927e5099f74d359e0adb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea3c0651d31936376fae927e5099f74d359e0adb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea3c0651d31936376fae927e5099f74d359e0adb"}], "stats": {"total": 778, "additions": 599, "deletions": 179}, "files": [{"sha": "52168948699d3d2bb4ac2977473e4fae43187452", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -1,3 +1,32 @@\n+2013-10-10  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_aggr.adb (Resolve_Array_Aggregate): Identify duplicated\n+\tcases.\n+\n+2013-10-10  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_ch9.adb (Analyze_Task_Body): Aspects are illegal\n+\t(Analyze_Protected_Body): Aspects are illegal.\n+\n+2013-10-10  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_ch6.adb, sem_ch13.adb: Minor reformatting.\n+\t* sem_case.adb (Check_Choices): Fix bad listing of missing\n+\tvalues from predicated subtype case (Check_Choices): List\n+\tduplicated values.\n+\t* errout.adb (Set_Msg_Text): Process warning tags in VMS mode\n+\t* erroutc.adb (Output_Msg_Text): Handle VMS warning tags\n+\t* gnat_ugn.texi: Document /WARNINGS=TAG_WARNINGS for VMS\n+\t* ug_words: Add entries for -gnatw.d and -gnatw.D\n+\t* vms_data.ads: Add [NO]TAG_WARNINGS for -gnatw.D/-gnatw.d\n+\t* lib-writ.ads: Documentation fixes\n+\n+2013-10-10  Robert Dewar  <dewar@adacore.com>\n+\n+\t* a-wichha.adb, a-wichha.ads, a-zchhan.adb, a-zchhan.ads\n+\t(Is_Other_Format): New name for Is_Other.\n+\t(Is_Punctuation_Connector): New name for Is_Punctuation\n+\n 2013-10-10  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* aspects.adb: Add entries in table Canonical_Aspects for aspects"}, {"sha": "8cdc7efb40072c01fcbfc0e0a25a7382cfcaa26b", "filename": "gcc/ada/a-wichha.adb", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fa-wichha.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fa-wichha.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-wichha.adb?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---            Copyright (C) 2010-2012, Free Software Foundation, Inc.       --\n+--          Copyright (C) 2010-2013, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -108,18 +108,18 @@ package body Ada.Wide_Characters.Handling is\n    function Is_Mark (Item : Wide_Character) return Boolean\n      renames Ada.Wide_Characters.Unicode.Is_Mark;\n \n-   --------------\n-   -- Is_Other --\n-   --------------\n+   ---------------------\n+   -- Is_Other_Format --\n+   ---------------------\n \n-   function Is_Other (Item : Wide_Character) return Boolean\n+   function Is_Other_Format (Item : Wide_Character) return Boolean\n      renames Ada.Wide_Characters.Unicode.Is_Other;\n \n-   --------------------\n-   -- Is_Punctuation --\n-   --------------------\n+   ------------------------------\n+   -- Is_Punctuation_Connector --\n+   ------------------------------\n \n-   function Is_Punctuation (Item : Wide_Character) return Boolean\n+   function Is_Punctuation_Connector (Item : Wide_Character) return Boolean\n      renames Ada.Wide_Characters.Unicode.Is_Punctuation;\n \n    --------------"}, {"sha": "7964756e5be9a4a9f25da512cbe7e866a708d6d7", "filename": "gcc/ada/a-wichha.ads", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fa-wichha.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fa-wichha.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-wichha.ads?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -78,13 +78,13 @@ package Ada.Wide_Characters.Handling is\n    --  Returns True if the Wide_Character designated by Item is categorized as\n    --  mark_non_spacing or mark_spacing_combining, otherwise returns false.\n \n-   function Is_Other (Item : Wide_Character) return Boolean;\n-   pragma Inline (Is_Other);\n+   function Is_Other_Format (Item : Wide_Character) return Boolean;\n+   pragma Inline (Is_Other_Format);\n    --  Returns True if the Wide_Character designated by Item is categorized as\n    --  other_format, otherwise returns false.\n \n-   function Is_Punctuation (Item : Wide_Character) return Boolean;\n-   pragma Inline (Is_Punctuation);\n+   function Is_Punctuation_Connector (Item : Wide_Character) return Boolean;\n+   pragma Inline (Is_Punctuation_Connector);\n    --  Returns True if the Wide_Character designated by Item is categorized as\n    --  punctuation_connector, otherwise returns false.\n "}, {"sha": "54db3ba8130b7b9bd409baa40db588cfdf7eb9df", "filename": "gcc/ada/a-zchhan.adb", "status": "modified", "additions": 10, "deletions": 9, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fa-zchhan.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fa-zchhan.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-zchhan.adb?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---            Copyright (C) 2010-2012, Free Software Foundation, Inc.       --\n+--          Copyright (C) 2010-2013, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -108,18 +108,19 @@ package body Ada.Wide_Wide_Characters.Handling is\n    function Is_Mark (Item : Wide_Wide_Character) return Boolean\n      renames Ada.Wide_Wide_Characters.Unicode.Is_Mark;\n \n-   --------------\n-   -- Is_Other --\n-   --------------\n+   ---------------------\n+   -- Is_Other_Format --\n+   ---------------------\n \n-   function Is_Other (Item : Wide_Wide_Character) return Boolean\n+   function Is_Other_Format (Item : Wide_Wide_Character) return Boolean\n      renames Ada.Wide_Wide_Characters.Unicode.Is_Other;\n \n-   --------------------\n-   -- Is_Punctuation --\n-   --------------------\n+   ------------------------------\n+   -- Is_Punctuation_Connector --\n+   ------------------------------\n \n-   function Is_Punctuation (Item : Wide_Wide_Character) return Boolean\n+   function Is_Punctuation_Connector\n+     (Item : Wide_Wide_Character) return Boolean\n      renames Ada.Wide_Wide_Characters.Unicode.Is_Punctuation;\n \n    --------------"}, {"sha": "354452b49f5546406dfa9291cf219774e94a6302", "filename": "gcc/ada/a-zchhan.ads", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fa-zchhan.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fa-zchhan.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-zchhan.ads?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -82,13 +82,14 @@ package Ada.Wide_Wide_Characters.Handling is\n    --  categorized as mark_non_spacing or mark_spacing_combining, otherwise\n    --  returns false.\n \n-   function Is_Other (Item : Wide_Wide_Character) return Boolean;\n-   pragma Inline (Is_Other);\n+   function Is_Other_Format (Item : Wide_Wide_Character) return Boolean;\n+   pragma Inline (Is_Other_Format);\n    --  Returns True if the Wide_Wide_Character designated by Item is\n    --  categorized as other_format, otherwise returns false.\n \n-   function Is_Punctuation (Item : Wide_Wide_Character) return Boolean;\n-   pragma Inline (Is_Punctuation);\n+   function Is_Punctuation_Connector\n+     (Item : Wide_Wide_Character) return Boolean;\n+   pragma Inline (Is_Punctuation_Connector);\n    --  Returns True if the Wide_Wide_Character designated by Item is\n    --  categorized as punctuation_connector, otherwise returns false.\n "}, {"sha": "e6ef3a715d37ddf417e71b545b80ebf28b1fe5bf", "filename": "gcc/ada/errout.adb", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Ferrout.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Ferrout.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferrout.adb?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -49,7 +49,6 @@ with Sinfo;    use Sinfo;\n with Snames;   use Snames;\n with Stand;    use Stand;\n with Stylesw;  use Stylesw;\n-with Targparm; use Targparm;\n with Uname;    use Uname;\n \n package body Errout is\n@@ -2705,7 +2704,7 @@ package body Errout is\n          Warning_Msg_Char := ' ';\n \n          if P <= Text'Last and then Text (P) = '?' then\n-            if Warning_Doc_Switch and not OpenVMS_On_Target then\n+            if Warning_Doc_Switch then\n                Warning_Msg_Char := '?';\n             end if;\n \n@@ -2717,7 +2716,7 @@ package body Errout is\n                      Text (P) in 'A' .. 'Z')\n            and then Text (P + 1) = '?'\n          then\n-            if Warning_Doc_Switch and not OpenVMS_On_Target then\n+            if Warning_Doc_Switch then\n                Warning_Msg_Char := Text (P);\n             end if;\n \n@@ -2805,7 +2804,6 @@ package body Errout is\n \n                if Error_Msg_Warn\n                  and Warning_Doc_Switch\n-                 and not OpenVMS_On_Target\n                then\n                   Warning_Msg_Char := '?';\n                end if;"}, {"sha": "9007be47ce581c47b5564e7f6b7c8ac9d3e40034", "filename": "gcc/ada/erroutc.adb", "status": "modified", "additions": 264, "deletions": 4, "changes": 268, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Ferroutc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Ferroutc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferroutc.adb?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -31,6 +31,7 @@\n \n with Atree;    use Atree;\n with Casing;   use Casing;\n+with Csets;    use Csets;\n with Debug;    use Debug;\n with Err_Vars; use Err_Vars;\n with Namet;    use Namet;\n@@ -450,21 +451,280 @@ package body Erroutc is\n       Split    : Natural;\n       Start    : Natural;\n \n+      function Get_VMS_Warn_String (W : Character) return String;\n+      --  On VMS, given a warning character W, returns VMS command string\n+      --  that corresponds to that warning character\n+\n+      -------------------------\n+      -- Get_VMS_Warn_String --\n+      -------------------------\n+\n+      function Get_VMS_Warn_String (W : Character) return String is\n+         S, E : Natural;\n+         --  Start and end of VMS_QUALIFIER below\n+\n+         P : Natural;\n+         --  Scans through string\n+\n+         --  The following is a copy of the S_GCC_Warn string from the package\n+         --  VMS_Data. If we made that package part of the compiler sources\n+         --  we could just with it and avoid the duplication ???\n+\n+         V : constant String :=          \"/WARNINGS=\"                      &\n+                                            \"DEFAULT \"                     &\n+                                               \"!-gnatws,!-gnatwe \"        &\n+                                            \"ALL \"                         &\n+                                               \"-gnatwa \"                  &\n+                                            \"EVERY \"                       &\n+                                               \"-gnatw.e \"                 &\n+                                            \"OPTIONAL \"                    &\n+                                               \"-gnatwa \"                  &\n+                                            \"NOOPTIONAL \"                  &\n+                                               \"-gnatwA \"                  &\n+                                            \"NOALL \"                       &\n+                                               \"-gnatwA \"                  &\n+                                            \"ALL_GCC \"                     &\n+                                               \"-Wall \"                    &\n+                                            \"FAILING_ASSERTIONS \"          &\n+                                               \"-gnatw.a \"                 &\n+                                            \"NO_FAILING_ASSERTIONS \"       &\n+                                               \"-gnatw.A \"                 &\n+                                            \"BAD_FIXED_VALUES \"            &\n+                                               \"-gnatwb \"                  &\n+                                            \"NO_BAD_FIXED_VALUES \"         &\n+                                               \"-gnatwB \"                  &\n+                                            \"BIASED_REPRESENTATION \"       &\n+                                               \"-gnatw.b \"                 &\n+                                            \"NO_BIASED_REPRESENTATION \"    &\n+                                               \"-gnatw.B \"                 &\n+                                            \"CONDITIONALS \"                &\n+                                               \"-gnatwc \"                  &\n+                                            \"NOCONDITIONALS \"              &\n+                                               \"-gnatwC \"                  &\n+                                            \"MISSING_COMPONENT_CLAUSES \"   &\n+                                               \"-gnatw.c \"                 &\n+                                            \"NOMISSING_COMPONENT_CLAUSES \" &\n+                                               \"-gnatw.C \"                 &\n+                                            \"IMPLICIT_DEREFERENCE \"        &\n+                                               \"-gnatwd \"                  &\n+                                            \"NO_IMPLICIT_DEREFERENCE \"     &\n+                                               \"-gnatwD \"                  &\n+                                            \"TAG_WARNINGS \"                &\n+                                               \"-gnatw.d \"                 &\n+                                            \"NOTAG_WARNINGS \"              &\n+                                               \"-gnatw.D \"                 &\n+                                            \"ERRORS \"                      &\n+                                               \"-gnatwe \"                  &\n+                                            \"UNREFERENCED_FORMALS \"        &\n+                                               \"-gnatwf \"                  &\n+                                            \"NOUNREFERENCED_FORMALS \"      &\n+                                               \"-gnatwF \"                  &\n+                                            \"UNRECOGNIZED_PRAGMAS \"        &\n+                                               \"-gnatwg \"                  &\n+                                            \"NOUNRECOGNIZED_PRAGMAS \"      &\n+                                               \"-gnatwG \"                  &\n+                                            \"HIDING \"                      &\n+                                               \"-gnatwh \"                  &\n+                                            \"NOHIDING \"                    &\n+                                               \"-gnatwH \"                  &\n+                                            \"AVOIDGAPS \"                   &\n+                                               \"-gnatw.h \"                 &\n+                                            \"NOAVOIDGAPS \"                 &\n+                                               \"-gnatw.H \"                 &\n+                                            \"IMPLEMENTATION \"              &\n+                                               \"-gnatwi \"                  &\n+                                            \"NOIMPLEMENTATION \"            &\n+                                               \"-gnatwI \"                  &\n+                                            \"OBSOLESCENT \"                 &\n+                                               \"-gnatwj \"                  &\n+                                            \"NOOBSOLESCENT \"               &\n+                                               \"-gnatwJ \"                  &\n+                                            \"CONSTANT_VARIABLES \"          &\n+                                               \"-gnatwk \"                  &\n+                                            \"NOCONSTANT_VARIABLES \"        &\n+                                               \"-gnatwK \"                  &\n+                                            \"STANDARD_REDEFINITION \"       &\n+                                               \"-gnatw.k \"                 &\n+                                            \"NOSTANDARD_REDEFINITION \"     &\n+                                               \"-gnatw.K \"                 &\n+                                            \"ELABORATION \"                 &\n+                                               \"-gnatwl \"                  &\n+                                            \"NOELABORATION \"               &\n+                                               \"-gnatwL \"                  &\n+                                            \"MODIFIED_UNREF \"              &\n+                                               \"-gnatwm \"                  &\n+                                            \"NOMODIFIED_UNREF \"            &\n+                                               \"-gnatwM \"                  &\n+                                            \"SUSPICIOUS_MODULUS \"          &\n+                                               \"-gnatw.m \"                 &\n+                                            \"NOSUSPICIOUS_MODULUS \"        &\n+                                               \"-gnatw.M \"                 &\n+                                            \"NORMAL \"                      &\n+                                               \"-gnatwn \"                  &\n+                                            \"OVERLAYS \"                    &\n+                                               \"-gnatwo \"                  &\n+                                            \"NOOVERLAYS \"                  &\n+                                               \"-gnatwO \"                  &\n+                                            \"OUT_PARAM_UNREF \"             &\n+                                               \"-gnatw.o \"                 &\n+                                            \"NOOUT_PARAM_UNREF \"           &\n+                                               \"-gnatw.O \"                 &\n+                                            \"INEFFECTIVE_INLINE \"          &\n+                                               \"-gnatwp \"                  &\n+                                            \"NOINEFFECTIVE_INLINE \"        &\n+                                               \"-gnatwP \"                  &\n+                                            \"MISSING_PARENS \"              &\n+                                               \"-gnatwq \"                  &\n+                                            \"PARAMETER_ORDER \"             &\n+                                               \"-gnatw.p \"                 &\n+                                            \"NOPARAMETER_ORDER \"           &\n+                                               \"-gnatw.P \"                 &\n+                                            \"NOMISSING_PARENS \"            &\n+                                               \"-gnatwQ \"                  &\n+                                            \"REDUNDANT \"                   &\n+                                               \"-gnatwr \"                  &\n+                                            \"NOREDUNDANT \"                 &\n+                                               \"-gnatwR \"                  &\n+                                            \"OBJECT_RENAMES \"              &\n+                                               \"-gnatw.r \"                 &\n+                                            \"NOOBJECT_RENAMES \"            &\n+                                               \"-gnatw.R \"                 &\n+                                            \"SUPPRESS \"                    &\n+                                               \"-gnatws \"                  &\n+                                            \"OVERRIDING_SIZE \"             &\n+                                               \"-gnatw.s \"                 &\n+                                            \"NOOVERRIDING_SIZE \"           &\n+                                               \"-gnatw.S \"                 &\n+                                            \"DELETED_CODE \"                &\n+                                               \"-gnatwt \"                  &\n+                                            \"NODELETED_CODE \"              &\n+                                               \"-gnatwT \"                  &\n+                                            \"UNINITIALIZED \"               &\n+                                               \"-Wuninitialized \"          &\n+                                            \"UNUSED \"                      &\n+                                               \"-gnatwu \"                  &\n+                                            \"NOUNUSED \"                    &\n+                                               \"-gnatwU \"                  &\n+                                            \"UNORDERED_ENUMERATIONS \"      &\n+                                               \"-gnatw.u \"                 &\n+                                            \"NOUNORDERED_ENUMERATIONS \"    &\n+                                               \"-gnatw.U \"                 &\n+                                            \"VARIABLES_UNINITIALIZED \"     &\n+                                               \"-gnatwv \"                  &\n+                                            \"NOVARIABLES_UNINITIALIZED \"   &\n+                                               \"-gnatwV \"                  &\n+                                            \"REVERSE_BIT_ORDER \"           &\n+                                               \"-gnatw.v \"                 &\n+                                            \"NOREVERSE_BIT_ORDER \"         &\n+                                               \"-gnatw.V \"                 &\n+                                            \"LOWBOUND_ASSUMED \"            &\n+                                               \"-gnatww \"                  &\n+                                            \"NOLOWBOUND_ASSUMED \"          &\n+                                               \"-gnatwW \"                  &\n+                                            \"WARNINGS_OFF_PRAGMAS \"        &\n+                                               \"-gnatw.w \"                 &\n+                                            \"NO_WARNINGS_OFF_PRAGMAS \"     &\n+                                               \"-gnatw.W \"                 &\n+                                            \"IMPORT_EXPORT_PRAGMAS \"       &\n+                                               \"-gnatwx \"                  &\n+                                            \"NOIMPORT_EXPORT_PRAGMAS \"     &\n+                                               \"-gnatwX \"                  &\n+                                            \"LOCAL_RAISE_HANDLING \"        &\n+                                               \"-gnatw.x \"                 &\n+                                            \"NOLOCAL_RAISE_HANDLING \"      &\n+                                               \"-gnatw.X \"                 &\n+                                            \"ADA_2005_COMPATIBILITY \"      &\n+                                               \"-gnatwy \"                  &\n+                                            \"NOADA_2005_COMPATIBILITY \"    &\n+                                               \"-gnatwY \"                  &\n+                                            \"UNCHECKED_CONVERSIONS \"       &\n+                                               \"-gnatwz \"                  &\n+                                            \"NOUNCHECKED_CONVERSIONS \"     &\n+                                               \"-gnatwZ\";\n+\n+      --  Start of processing for Get_VMS_Warn_String\n+\n+      begin\n+         --  This function works by inspecting the string S_GCC_Warn in the\n+         --  package VMS_Data. We are looking for\n+\n+         --     space VMS_QUALIFIER space -gnatwq\n+\n+         --  where q is the lower case letter W if W is lower case, and the\n+         --  two character string .W if W is upper case. If we find a match\n+         --  we return VMS_QUALIFIER, otherwise we return empty (this should\n+         --  be an error, but no point in bombing over something so trivial).\n+\n+         P := 1;\n+\n+         --  Loop through entries in S_GCC_Warn\n+\n+         loop\n+            --  Scan to next blank\n+\n+            loop\n+               if P >= V'Last - 1 then\n+                  return \"\";\n+               end if;\n+\n+               exit when V (P) = ' ' and then V (P + 1) in 'A' .. 'Z';\n+               P := P + 1;\n+            end loop;\n+\n+            P := P + 1;\n+            S := P;\n+\n+            --  Scan to blank at end of VMS_QUALIFIER\n+\n+            loop\n+               if P >= V'Last then\n+                  return \"\";\n+               end if;\n+\n+               exit when V (P) = ' ';\n+               P := P + 1;\n+            end loop;\n+\n+            E := P - 1;\n+\n+            --  See if this entry matches, and if so, return it\n+\n+            if V (P + 1 .. P + 6) = \"-gnatw\"\n+              and then\n+                ((W in 'a' .. 'z' and then V (P + 7) = W)\n+                    or else\n+                 (V (P + 7) = '.' and then Fold_Upper (V (P + 8)) = W))\n+            then\n+               return V (S .. E);\n+            end if;\n+         end loop;\n+      end Get_VMS_Warn_String;\n+\n+   --  Start of processing for Output_Msg_Text\n+\n    begin\n       --  Add warning doc tag if needed\n \n       if Warn and then Warn_Chr /= ' ' then\n          if Warn_Chr = '?' then\n             Warn_Tag := new String'(\" [enabled by default]\");\n \n+         elsif OpenVMS_On_Target then\n+            declare\n+               Qual : constant String := Get_VMS_Warn_String (Warn_Chr);\n+            begin\n+               if Qual = \"\" then\n+                  Warn_Tag := new String'(Qual);\n+               else\n+                  Warn_Tag := new String'(\" [\" & Qual & ']');\n+               end if;\n+            end;\n+\n          elsif Warn_Chr in 'a' .. 'z' then\n             Warn_Tag := new String'(\" [-gnatw\" & Warn_Chr & ']');\n \n          else pragma Assert (Warn_Chr in 'A' .. 'Z');\n-            Warn_Tag :=\n-              new String'(\" [-gnatw.\"\n-                          & Character'Val (Character'Pos (Warn_Chr) + 32)\n-                          & ']');\n+            Warn_Tag := new String'(\" [-gnatw.\" & Fold_Lower (Warn_Chr) & ']');\n          end if;\n \n       else"}, {"sha": "b15aacd980c9ec08ec20e33adbcb3540430260c5", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 18, "deletions": 2, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -4782,9 +4782,7 @@ individually controlled.  The warnings that are not turned on by this\n switch are\n @option{-gnatwd} (implicit dereferencing),\n @option{-gnatwh} (hiding),\n-@ifclear vms\n @option{-gnatw.d} (tag warnings with -gnatw switch)\n-@end ifclear\n @option{-gnatw.h} (holes (gaps) in record layouts)\n @option{-gnatw.i} (overlapping actuals),\n @option{-gnatw.k} (redefinition of names in standard),\n@@ -4951,6 +4949,24 @@ mode in which warnings are not tagged as described above for\n @code{-gnatw.d}.\n @end ifclear\n \n+@ifset vms\n+@item -gnatw.d\n+@emph{Activate tagging of warning messages.}\n+@cindex @option{-gnatw.d} (@command{gcc})\n+If this switch is set, then warning messages are tagged, either with\n+the appropriate WARNINGS qualifier string (e.g. [SUSPICIOUS_MODULUS]\n+or with ``[enabled by default]'' if the warning is not under control of a\n+specific WARNING qualifier switch. This mode is off by default, and is not\n+affected by the use of @code{-gnatwa}.\n+\n+@item -gnatw.D\n+@emph{Deactivate tagging of warning messages.}\n+@cindex @option{-gnatw.d} (@command{gcc})\n+If this switch is set, then warning messages return to the default\n+mode in which warnings are not tagged as described above for\n+@code{-gnatw.d}.\n+@end ifset\n+\n @item -gnatwe\n @emph{Treat warnings and style checks as errors.}\n @cindex @option{-gnatwe} (@command{gcc})"}, {"sha": "ef57dfc8252d5888c7a85de2bb9ecb5d71fff84e", "filename": "gcc/ada/lib-writ.ads", "status": "modified", "additions": 60, "deletions": 48, "changes": 108, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Flib-writ.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Flib-writ.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-writ.ads?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -183,55 +183,55 @@ package Lib.Writ is\n    --      corresponding source file. Parameters is a sequence of zero or more\n    --      two letter codes that indicate configuration pragmas and other\n    --      parameters that apply:\n-   --\n+\n    --      The arguments are as follows:\n-   --\n+\n    --         CE   Compilation errors. If this is present it means that the ali\n    --              file resulted from a compilation with the -gnatQ switch set,\n    --              and illegalities were detected. The ali file contents may\n    --              not be completely reliable, but the format will be correct\n    --              and complete. Note that NO is always present if CE is\n    --              present.\n-   --\n+\n    --         DB   Detect_Blocking pragma is in effect for all units in this\n    --              file.\n-   --\n+\n    --         Ex   A valid Partition_Elaboration_Policy pragma applies to all\n    --              the units in this file, where x is the first character\n    --              (upper case) of the policy name (e.g. 'C' for Concurrent).\n-   --\n+\n    --         FD   Configuration pragmas apply to all the units in this file\n    --              specifying a possibly non-standard floating point format\n    --              (VAX float with Long_Float using D_Float).\n-   --\n+\n    --         FG   Configuration pragmas apply to all the units in this file\n    --              specifying a possibly non-standard floating point format\n    --              (VAX float with Long_Float using G_Float).\n-   --\n+\n    --         FI   Configuration pragmas apply to all the units in this file\n    --              specifying a possibly non-standard floating point format\n    --              (IEEE Float).\n-   --\n+\n    --         Lx   A valid Locking_Policy pragma applies to all the units in\n    --              this file, where x is the first character (upper case) of\n    --              the policy name (e.g. 'C' for Ceiling_Locking).\n-   --\n+\n    --         NO   No object. This flag indicates that the units in this file\n    --              were not compiled to produce an object. This can occur as a\n    --              result of the use of -gnatc, or if no object can be produced\n    --              (e.g. when a package spec is compiled instead of the body,\n    --              or a subunit on its own).\n-   --\n+\n    --         NR   No_Run_Time. Indicates that a pragma No_Run_Time applies\n    --              to all units in the file.\n-   --\n+\n    --         NS   Normalize_Scalars pragma in effect for all units in\n    --              this file.\n-   --\n+\n    --         Qx   A valid Queueing_Policy pragma applies to all the units\n    --              in this file, where x is the first character (upper case)\n    --              of the policy name (e.g. 'P' for Priority_Queueing).\n-   --\n+\n    --         SL   Indicates that the unit is an Interface to a Standalone\n    --              Library. Note that this indication is never given by the\n    --              compiler, but is added by the Project Manager in gnatmake\n@@ -240,19 +240,19 @@ package Lib.Writ is\n \n    --         SS   This unit references System.Secondary_Stack (that is,\n    --              the unit makes use of the secondary stack facilities).\n-   --\n+\n    --         Tx   A valid Task_Dispatching_Policy pragma applies to all\n    --              the units in this file, where x is the first character\n    --              (upper case) of the corresponding policy name (e.g. 'F'\n    --              for FIFO_Within_Priorities).\n-   --\n+\n    --         UA  Unreserve_All_Interrupts pragma was processed in one or\n    --             more units in this file\n-   --\n+\n    --         ZX  Units in this file use zero-cost exceptions and have\n    --             generated exception tables. If ZX is not present, the\n    --             longjmp/setjmp exception scheme is in use.\n-   --\n+\n    --      Note that language defined units never output policy (Lx, Tx, Qx)\n    --      parameters. Language defined units must correctly handle all\n    --      possible cases. These values are checked for consistency by the\n@@ -513,27 +513,27 @@ package Lib.Writ is\n    --  The lines for each compilation unit have the following form\n \n    --    U unit-name source-name version <<attributes>>\n-   --\n+\n    --      This line identifies the unit to which this section of the library\n    --      information file applies. The first three parameters are the unit\n    --      name in internal format, as described in package Uname, and the name\n    --      of the source file containing the unit.\n-   --\n+\n    --      Version is the version given as eight hexadecimal characters with\n    --      upper case letters. This value is the exclusive or of the source\n    --      checksums of the unit and all its semantically dependent units.\n-   --\n+\n    --      The <<attributes>> are a series of two letter codes indicating\n    --      information about the unit:\n-   --\n+\n    --         BD  Unit does not have pragma Elaborate_Body, but the elaboration\n    --             circuit has determined that it would be a good idea if this\n    --             pragma were present, since the body of the package contains\n    --             elaboration code that modifies one or more variables in the\n    --             visible part of the package. The binder will try, but does\n    --             not promise, to keep the elaboration of the body close to\n    --             the elaboration of the spec.\n-   --\n+\n    --         DE  Dynamic Elaboration. This unit was compiled with the dynamic\n    --             elaboration model, as set by either the -gnatE switch or\n    --             pragma Elaboration_Checks (Dynamic).\n@@ -545,7 +545,7 @@ package Lib.Writ is\n    --             body together whenever possible, and for an instance it is\n    --             always possible; however setting EB ensures that this is done\n    --             even when using the -p gnatbind switch).\n-   --\n+\n    --         EE  Elaboration entity is present which must be set true when\n    --             the unit is elaborated. The name of the elaboration entity is\n    --             formed from the unit name in the usual way. If EE is present,\n@@ -554,28 +554,28 @@ package Lib.Writ is\n    --             be set even if NE is set. This happens when the boolean is\n    --             needed solely for checking for the case of access before\n    --             elaboration.\n-   --\n+\n    --         GE  Unit is a generic declaration, or corresponding body\n    --\n    --         IL  Unit source uses a style with identifiers in all lower-case\n    --         IU  (IL) or all upper case (IU). If the standard mixed-case usage\n    --             is detected, or the compiler cannot determine the style, then\n    --             no I parameter will appear.\n-   --\n+\n    --         IS  Initialize_Scalars pragma applies to this unit, or else there\n    --             is at least one use of the Invalid_Value attribute.\n-   --\n+\n    --         KM  Unit source uses a style with keywords in mixed case (KM)\n    --         KU  or all upper case (KU). If the standard lower-case usage is\n    --             is detected, or the compiler cannot determine the style, then\n    --             no K parameter will appear.\n-   --\n+\n    --         NE  Unit has no elaboration routine. All subprogram bodies and\n    --             specs are in this category. Package bodies and specs may or\n    --             may not have NE set, depending on whether or not elaboration\n    --             code is required. Set if N_Compilation_Unit node has flag\n    --             Has_No_Elaboration_Code set.\n-   --\n+\n    --         OL   The units in this file are compiled with a local pragma\n    --              Optimize_Alignment, so no consistency requirement applies\n    --              to these units. All internal units have this status since\n@@ -584,33 +584,33 @@ package Lib.Writ is\n    --         OO   Optimize_Alignment (Off) is the default setting for all\n    --              units in this file. All files in the partition that specify\n    --              a default must specify the same default.\n-   --\n+\n    --         OS   Optimize_Alignment (Space) is the default setting for all\n    --              units in this file. All files in the partition that specify\n    --              a default must specify the same default.\n-   --\n+\n    --         OT   Optimize_Alignment (Time) is the default setting for all\n    --              units in this file. All files in the partition that specify\n    --              a default must specify the same default.\n-   --\n+\n    --         PF  The unit has a library-level (package) finalizer\n-   --\n+\n    --         PK  Unit is package, rather than a subprogram\n-   --\n+\n    --         PU  Unit has pragma Pure\n-   --\n+\n    --         PR  Unit has pragma Preelaborate\n-   --\n+\n    --         RA  Unit declares a Remote Access to Class-Wide (RACW) type\n-   --\n+\n    --         RC  Unit has pragma Remote_Call_Interface\n-   --\n+\n    --         RT  Unit has pragma Remote_Types\n-   --\n+\n    --         SP  Unit has pragma Shared_Passive.\n-   --\n+\n    --         SU  Unit is a subprogram, rather than a package\n-   --\n+\n    --      The attributes may appear in any order, separated by spaces.\n \n    --  -----------------------------\n@@ -624,7 +624,7 @@ package Lib.Writ is\n    --    Y unit-name [source-name lib-name] [E] [EA] [ED] [AD]\n    --      or\n    --    Z unit-name [source-name lib-name] [E] [EA] [ED] [AD]\n-   --\n+\n    --      One W line is present for each unit that is mentioned in an explicit\n    --      non-limited with clause by the current unit. One Y line is present\n    --      for each unit that is mentioned in an explicit limited with clause\n@@ -638,26 +638,32 @@ package Lib.Writ is\n    --      third parameter is the file name of the library information file\n    --      that contains the results of compiling this unit. The optional\n    --      modifiers are used as follows:\n-   --\n+\n    --        E   pragma Elaborate applies to this unit\n-   --\n+\n    --        EA  pragma Elaborate_All applies to this unit\n-   --\n+\n    --        ED  Elaborate_Desirable set for this unit, which means that there\n    --            is no Elaborate, but the analysis suggests that Program_Error\n    --            may be raised if the Elaborate conditions cannot be satisfied.\n    --            The binder will attempt to treat ED as E if it can.\n-   --\n+\n    --        AD  Elaborate_All_Desirable set for this unit, which means that\n    --            there is no Elaborate_All, but the analysis suggests that\n    --            Program_Error may be raised if the Elaborate_All conditions\n    --            cannot be satisfied. The binder will attempt to treat AD as\n    --            EA if it can.\n-   --\n+\n    --      The parameter source-name and lib-name are omitted for the case of a\n    --      generic unit compiled with earlier versions of GNAT which did not\n-   --      generate object or ali files for generics.\n-   --\n+   --      generate object or ali files for generics. For compatibility in the\n+   --      bootstrap path we continue to omit these entries for predefined\n+   --      generic units, even though we do now generate object and ali files.\n+\n+   --      However, in SPARK mode, we always generate source-name and lib-name\n+   --      parameters. Bootstrap issues do not apply there, and we need this\n+   --      information to properly compute frame conditions of subprograms.\n+\n    --      The parameter source-name and lib-name are also omitted for the W\n    --      lines that result from use of a Restriction_Set attribute which gets\n    --      a result of False from a No_Dependence check, in the case where the\n@@ -696,6 +702,12 @@ package Lib.Writ is\n    --      source file, so that this order is preserved by the binder in\n    --      constructing the set of linker arguments.\n \n+   --  Note: Linker_Options lines never appear in the ALI file generated for\n+   --  a predefined generic unit, and there is cicuitry in Sem_Prag to enforce\n+   --  this restriction, which is needed because of not generating source name\n+   --  and lib name parameters on the with lines for such files, as explained\n+   --  above in the section on with lines.\n+\n    --  --------------\n    --  -- N  Notes --\n    --  --------------"}, {"sha": "96f1a40868bbb94ccb163e3fcbea523c1234ff8f", "filename": "gcc/ada/sem_aggr.adb", "status": "modified", "additions": 107, "deletions": 66, "changes": 173, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fsem_aggr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fsem_aggr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_aggr.adb?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -1723,9 +1723,9 @@ package body Sem_Aggr is\n \n       --  Variables local to Resolve_Array_Aggregate\n \n-      Assoc   : Node_Id;\n-      Choice  : Node_Id;\n-      Expr    : Node_Id;\n+      Assoc  : Node_Id;\n+      Choice : Node_Id;\n+      Expr   : Node_Id;\n \n       Discard : Node_Id;\n       pragma Warnings (Off, Discard);\n@@ -1900,14 +1900,6 @@ package body Sem_Aggr is\n             High : Node_Id;\n             --  Denote the lowest and highest values in an aggregate choice\n \n-            Hi_Val : Uint;\n-            Lo_Val : Uint;\n-            --  High end of one range and Low end of the next. Should be\n-            --  contiguous if there is no hole in the list of values.\n-\n-            Missing_Values : Boolean;\n-            --  Set True if missing index values\n-\n             S_Low  : Node_Id := Empty;\n             S_High : Node_Id := Empty;\n             --  if a choice in an aggregate is a subtype indication these\n@@ -2064,14 +2056,14 @@ package body Sem_Aggr is\n                   --  Resolve_Aggr_Expr to check the rules about\n                   --  dimensionality.\n \n-                  if not Resolve_Aggr_Expr (Assoc,\n-                                            Single_Elmt => Single_Choice)\n+                  if not Resolve_Aggr_Expr\n+                           (Assoc, Single_Elmt => Single_Choice)\n                   then\n                      return Failure;\n                   end if;\n \n-               elsif not Resolve_Aggr_Expr (Expression (Assoc),\n-                                            Single_Elmt => Single_Choice)\n+               elsif not Resolve_Aggr_Expr\n+                           (Expression (Assoc), Single_Elmt => Single_Choice)\n                then\n                   return Failure;\n \n@@ -2134,80 +2126,129 @@ package body Sem_Aggr is\n             end loop;\n \n             --  If aggregate contains more than one choice then these must be\n-            --  static. Sort them and check that they are contiguous.\n+            --  static. Check for duplicate and missing values.\n+\n+            --  Note: there is duplicated code here wrt Check_Choice_Set in\n+            --  the body of Sem_Case, and it is possible we could just reuse\n+            --  that procedure. To be checked ???\n \n             if Nb_Discrete_Choices > 1 then\n-               Sort_Case_Table (Table);\n-               Missing_Values := False;\n+               Check_Choices : declare\n+                  Choice : Node_Id;\n+                  --  Location of choice for messages\n \n-               Outer : for J in 1 .. Nb_Discrete_Choices - 1 loop\n-                  if Expr_Value (Table (J).Choice_Hi) >=\n-                       Expr_Value (Table (J + 1).Choice_Lo)\n-                  then\n-                     Error_Msg_N\n-                       (\"duplicate choice values in array aggregate\",\n-                        Table (J).Choice_Node);\n-                     return Failure;\n+                  Hi_Val : Uint;\n+                  Lo_Val : Uint;\n+                  --  High end of one range and Low end of the next. Should be\n+                  --  contiguous if there is no hole in the list of values.\n \n-                  elsif not Others_Present then\n-                     Hi_Val := Expr_Value (Table (J).Choice_Hi);\n-                     Lo_Val := Expr_Value (Table (J + 1).Choice_Lo);\n+                  Missing_Or_Duplicates : Boolean := False;\n+                  --  Set True if missing or duplicate choices found\n \n-                     --  If missing values, output error messages\n+                  procedure Output_Bad_Choices (Lo, Hi : Uint; C : Node_Id);\n+                  --  Output continuation message with a representation of the\n+                  --  bounds (just Lo if Lo = Hi, else Lo .. Hi). C is the\n+                  --  choice node where the message is to be posted.\n \n-                     if Lo_Val - Hi_Val > 1 then\n+                  ------------------------\n+                  -- Output_Bad_Choices --\n+                  ------------------------\n \n-                        --  Header message if not first missing value\n+                  procedure Output_Bad_Choices (Lo, Hi : Uint; C : Node_Id) is\n+                  begin\n+                     --  Enumeration type case\n \n-                        if not Missing_Values then\n-                           Error_Msg_N\n-                             (\"missing index value(s) in array aggregate\", N);\n-                           Missing_Values := True;\n+                     if Is_Enumeration_Type (Index_Typ) then\n+                        Error_Msg_Name_1 :=\n+                          Chars (Get_Enum_Lit_From_Pos (Index_Typ, Lo, Loc));\n+                        Error_Msg_Name_2 :=\n+                          Chars (Get_Enum_Lit_From_Pos (Index_Typ, Hi, Loc));\n+\n+                        if Lo = Hi then\n+                           Error_Msg_N (\"\\\\  %!\", C);\n+                        else\n+                           Error_Msg_N (\"\\\\  % .. %!\", C);\n                         end if;\n \n-                        --  Output values of missing indexes\n+                        --  Integer types case\n \n-                        Lo_Val := Lo_Val - 1;\n-                        Hi_Val := Hi_Val + 1;\n+                     else\n+                        Error_Msg_Uint_1 := Lo;\n+                        Error_Msg_Uint_2 := Hi;\n \n-                        --  Enumeration type case\n+                        if Lo = Hi then\n+                           Error_Msg_N (\"\\\\  ^!\", C);\n+                        else\n+                           Error_Msg_N (\"\\\\  ^ .. ^!\", C);\n+                        end if;\n+                     end if;\n+                  end Output_Bad_Choices;\n \n-                        if Is_Enumeration_Type (Index_Typ) then\n-                           Error_Msg_Name_1 :=\n-                             Chars\n-                               (Get_Enum_Lit_From_Pos\n-                                 (Index_Typ, Hi_Val, Loc));\n+               --  Start of processing for Check_Choices\n \n-                           if Lo_Val = Hi_Val then\n-                              Error_Msg_N (\"\\  %\", N);\n-                           else\n-                              Error_Msg_Name_2 :=\n-                                Chars\n-                                  (Get_Enum_Lit_From_Pos\n-                                    (Index_Typ, Lo_Val, Loc));\n-                              Error_Msg_N (\"\\  % .. %\", N);\n-                           end if;\n+               begin\n+                  Sort_Case_Table (Table);\n \n-                        --  Integer types case\n+                  --  Loop through entries in table to find duplicate indexes\n \n+                  for J in 1 .. Nb_Discrete_Choices - 1 loop\n+                     Hi_Val := Expr_Value (Table (J).Choice_Hi);\n+                     Lo_Val := Expr_Value (Table (J + 1).Choice_Lo);\n+\n+                     if Hi_Val >= Lo_Val then\n+                        Choice := Table (J + 1).Choice_Lo;\n+                        Error_Msg_Sloc := Sloc (Table (J).Choice_Hi);\n+\n+                        if Hi_Val = Lo_Val then\n+                           Error_Msg_N\n+                             (\"index value in array aggregate duplicates \"\n+                              & \"the one given#\",\n+                              Choice);\n                         else\n-                           Error_Msg_Uint_1 := Hi_Val;\n+                           Error_Msg_N\n+                             (\"index values in array aggregate duplicate \"\n+                              & \"those given#\", Choice);\n+                        end if;\n+\n+                        Missing_Or_Duplicates := True;\n+                        Output_Bad_Choices (Lo_Val, Hi_Val, Choice);\n+                     end if;\n+                  end loop;\n \n-                           if Lo_Val = Hi_Val then\n-                              Error_Msg_N (\"\\  ^\", N);\n+                  --  Loop through entries in table to find missing indexes.\n+                  --  Not needed if others present, since missing impossible.\n+\n+                  if not Others_Present then\n+                     for J in 1 .. Nb_Discrete_Choices - 1 loop\n+                        Hi_Val := Expr_Value (Table (J).Choice_Hi);\n+                        Lo_Val := Expr_Value (Table (J + 1).Choice_Lo);\n+\n+                        if Hi_Val < Lo_Val - 1 then\n+                           Choice := Table (J + 1).Choice_Lo;\n+\n+                           if Hi_Val + 1 = Lo_Val - 1 then\n+                              Error_Msg_N\n+                                (\"missing index value in array aggregate!\",\n+                                 Choice);\n                            else\n-                              Error_Msg_Uint_2 := Lo_Val;\n-                              Error_Msg_N (\"\\  ^ .. ^\", N);\n+                              Error_Msg_N\n+                                (\"missing index values in array aggregate!\",\n+                                 Choice);\n                            end if;\n+\n+                           Missing_Or_Duplicates := True;\n+                           Output_Bad_Choices (Hi_Val + 1, Lo_Val - 1, Choice);\n                         end if;\n-                     end if;\n+                     end loop;\n                   end if;\n-               end loop Outer;\n \n-               if Missing_Values then\n-                  Set_Etype (N, Any_Composite);\n-                  return Failure;\n-               end if;\n+                  --  If either missing or duplicate values, return failure\n+\n+                  if Missing_Or_Duplicates then\n+                     Set_Etype (N, Any_Composite);\n+                     return Failure;\n+                  end if;\n+               end Check_Choices;\n             end if;\n \n             --  STEP 2 (B): Compute aggregate bounds and min/max choices values"}, {"sha": "68ac66ac93d540e8ef8baf8fb3535f3ee5ce4002", "filename": "gcc/ada/sem_case.adb", "status": "modified", "additions": 61, "deletions": 11, "changes": 72, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fsem_case.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fsem_case.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_case.adb?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -126,6 +126,10 @@ package body Sem_Case is\n       --  choice that covered a predicate set. Error denotes whether the check\n       --  found an illegal intersection.\n \n+      procedure Dup_Choice (Lo, Hi : Uint; C : Node_Id);\n+      --  Post message \"duplication of choice value(s) bla bla at xx\". Message\n+      --  is posted at location C. Caller sets Error_Msg_Sloc for xx.\n+\n       procedure Explain_Non_Static_Bound;\n       --  Called when we find a non-static bound, requiring the base type to\n       --  be covered. Provides where possible a helpful explanation of why the\n@@ -237,6 +241,7 @@ package body Sem_Case is\n          Choice_Hi : constant Uint := Expr_Value (Choice.Hi);\n          Choice_Lo : constant Uint := Expr_Value (Choice.Lo);\n          Loc       : Source_Ptr;\n+         LocN      : Node_Id;\n          Next_Hi   : Uint;\n          Next_Lo   : Uint;\n          Pred_Hi   : Uint;\n@@ -248,11 +253,13 @@ package body Sem_Case is\n          --  Find the proper error message location\n \n          if Present (Choice.Node) then\n-            Loc := Sloc (Choice.Node);\n+            LocN := Choice.Node;\n          else\n-            Loc := Sloc (Case_Node);\n+            LocN := Case_Node;\n          end if;\n \n+         Loc := Sloc (LocN);\n+\n          if Present (Pred) then\n             Pred_Lo := Expr_Value (Low_Bound  (Pred));\n             Pred_Hi := Expr_Value (High_Bound (Pred));\n@@ -267,10 +274,12 @@ package body Sem_Case is\n \n          --  Step 1: Detect duplicate choices\n \n-         if Inside_Range (Choice_Lo, Choice_Hi, Prev_Lo)\n-           or else Inside_Range (Choice_Lo, Choice_Hi, Prev_Hi)\n-         then\n-            Error_Msg (\"duplication of choice value\", Loc);\n+         if Inside_Range (Choice_Lo, Choice_Hi, Prev_Lo) then\n+            Dup_Choice (Prev_Lo, UI_Min (Prev_Hi, Choice_Hi), LocN);\n+            Error := True;\n+\n+         elsif Inside_Range (Choice_Lo, Choice_Hi, Prev_Hi) then\n+            Dup_Choice (UI_Max (Choice_Lo, Prev_Lo), Prev_Hi, LocN);\n             Error := True;\n \n          --  Step 2: Detect full coverage\n@@ -420,6 +429,45 @@ package body Sem_Case is\n          end if;\n       end Check_Against_Predicate;\n \n+      ----------------\n+      -- Dup_Choice --\n+      ----------------\n+\n+      procedure Dup_Choice (Lo, Hi : Uint; C : Node_Id) is\n+      begin\n+         --  In some situations, we call this with a null range, and obviously\n+         --  we don't want to complain in this case.\n+\n+         if Lo > Hi then\n+            return;\n+         end if;\n+\n+         --  Case of only one value that is missing\n+\n+         if Lo = Hi then\n+            if Is_Integer_Type (Bounds_Type) then\n+               Error_Msg_Uint_1 := Lo;\n+               Error_Msg_N (\"duplication of choice value: ^#!\", C);\n+            else\n+               Error_Msg_Name_1 := Choice_Image (Lo, Bounds_Type);\n+               Error_Msg_N (\"duplication of choice value: %#!\", C);\n+            end if;\n+\n+         --  More than one choice value, so print range of values\n+\n+         else\n+            if Is_Integer_Type (Bounds_Type) then\n+               Error_Msg_Uint_1 := Lo;\n+               Error_Msg_Uint_2 := Hi;\n+               Error_Msg_N (\"duplication of choice values: ^ .. ^#!\", C);\n+            else\n+               Error_Msg_Name_1 := Choice_Image (Lo, Bounds_Type);\n+               Error_Msg_Name_2 := Choice_Image (Hi, Bounds_Type);\n+               Error_Msg_N (\"duplication of choice values: % .. %#!\", C);\n+            end if;\n+         end if;\n+      end Dup_Choice;\n+\n       ------------------------------\n       -- Explain_Non_Static_Bound --\n       ------------------------------\n@@ -691,10 +739,12 @@ package body Sem_Case is\n \n                if Sloc (Prev_Choice) <= Sloc (Choice) then\n                   Error_Msg_Sloc := Sloc (Prev_Choice);\n-                  Error_Msg_N (\"duplication of choice value#\", Choice);\n+                  Dup_Choice\n+                    (Choice_Lo, UI_Min (Choice_Hi, Prev_Hi), Choice);\n                else\n                   Error_Msg_Sloc := Sloc (Choice);\n-                  Error_Msg_N (\"duplication of choice value#\", Prev_Choice);\n+                  Dup_Choice\n+                    (Choice_Lo, UI_Min (Choice_Hi, Prev_Hi), Prev_Choice);\n                end if;\n \n             elsif not Others_Present and then Choice_Lo /= Prev_Hi + 1 then\n@@ -706,10 +756,10 @@ package body Sem_Case is\n             end if;\n          end loop;\n \n-         if not Others_Present and then Expr_Value (Bounds_Hi) > Choice_Hi then\n-            Missing_Choice (Choice_Hi + 1, Bounds_Hi);\n+         if not Others_Present and then Expr_Value (Bounds_Hi) > Prev_Hi then\n+            Missing_Choice (Prev_Hi + 1, Bounds_Hi);\n \n-            if Expr_Value (Bounds_Hi) > Choice_Hi + 1 then\n+            if Expr_Value (Bounds_Hi) > Prev_Hi + 1 then\n                Explain_Non_Static_Bound;\n             end if;\n          end if;"}, {"sha": "6f5887ea6ad5a1ca36e8f2c62365975e6dbf90b4", "filename": "gcc/ada/sem_ch13.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fsem_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fsem_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch13.adb?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -1422,9 +1422,9 @@ package body Sem_Ch13 is\n                goto Continue;\n             end if;\n \n-            --  Skip looking at aspect if it is totally disabled. Just mark\n-            --  it as such for later reference in the tree. This also sets\n-            --  the Is_Ignored and Is_Checked flags appropriately.\n+            --  Skip looking at aspect if it is totally disabled. Just mark it\n+            --  as such for later reference in the tree. This also sets the\n+            --  Is_Ignored and Is_Checked flags appropriately.\n \n             Check_Applicable_Policy (Aspect);\n "}, {"sha": "f138aeadecd7a894a122850c0e7317c94de2f574", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -2691,8 +2691,8 @@ package body Sem_Ch6 is\n       end if;\n \n       --  Language-defined aspects cannot appear in a subprogram body [stub] if\n-      --  the corresponding spec already has aspects. An exception to this rule\n-      --  are certain user-defined aspects.\n+      --  the subprogram has a separate spec. Certainly implementation-defined\n+      --  aspects are allowed to appear (per Aspects_On_Body_Of_Stub_OK).\n \n       if Has_Aspects (N) then\n          if Present (Spec_Id)\n@@ -2705,7 +2705,7 @@ package body Sem_Ch6 is\n          then\n             Error_Msg_N\n               (\"aspect specifications must appear in subprogram declaration\",\n-                N);\n+               N);\n \n          --  Delay the analysis of aspect specifications that apply to a body\n          --  stub until the proper body is analyzed. If the corresponding body"}, {"sha": "b7374ba83987a9eb66f414d01d9fae3351ead945", "filename": "gcc/ada/sem_ch9.adb", "status": "modified", "additions": 11, "deletions": 12, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fsem_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fsem_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch9.adb?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -1736,16 +1736,16 @@ package body Sem_Ch9 is\n \n       --  Protected bodies are currently removed by the expander. Since there\n       --  are no language-defined aspects that apply to a protected body, it is\n-      --  not worth changing the whole expansion to accomodate user-defined\n-      --  aspects. Plus we cannot possibly known the semantics of user-defined\n-      --  aspects in order to plan ahead.\n+      --  not worth changing the whole expansion to accomodate implementation-\n+      --  defined aspects. Plus we cannot possibly known the semantics of such\n+      --  future implementation defined aspects in order to plan ahead.\n \n       if Has_Aspects (N) then\n          Error_Msg_N\n-           (\"?user-defined aspects on protected bodies are not supported\", N);\n+           (\"aspects on protected bodies are not allowed\",\n+            First (Aspect_Specifications (N)));\n \n-         --  The aspects are removed for now to prevent cascading errors down\n-         --  stream.\n+         --  Remove illegal aspects to prevent cascaded errors later on\n \n          Remove_Aspects (N);\n       end if;\n@@ -2726,15 +2726,15 @@ package body Sem_Ch9 is\n       --  Task bodies are transformed into a subprogram spec and body pair by\n       --  the expander. Since there are no language-defined aspects that apply\n       --  to a task body, it is not worth changing the whole expansion to\n-      --  accomodate user-defined aspects. Plus we cannot possibly known the\n-      --  semantics of user-defined aspects in order to plan ahead.\n+      --  accomodate implementation-defined aspects. Plus we cannot possibly\n+      --  know semantics of such aspects in order to plan ahead.\n \n       if Has_Aspects (N) then\n          Error_Msg_N\n-           (\"?user-defined aspects on task bodies are not supported\", N);\n+           (\"aspects on task bodies are not allowed\",\n+            First (Aspect_Specifications (N)));\n \n-         --  The aspects are removed for now to prevent cascading errors down\n-         --  stream.\n+         --  Remove illegal aspects to prevent cascaded errors later on\n \n          Remove_Aspects (N);\n       end if;\n@@ -2763,7 +2763,6 @@ package body Sem_Ch9 is\n       then\n          if Nkind (Parent (Spec_Id)) = N_Task_Type_Declaration then\n             Error_Msg_NE (\"duplicate body for task type&\", N, Spec_Id);\n-\n          else\n             Error_Msg_NE (\"duplicate body for task&\", N, Spec_Id);\n          end if;"}, {"sha": "e03b422aadf5d367a85b76e9d2125f3d84d22027", "filename": "gcc/ada/ug_words", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fug_words", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fug_words", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fug_words?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -142,6 +142,8 @@ gcc -c          ^ GNAT COMPILE\n -gnatwC         ^ /WARNINGS=NOCONDITIONALS\n -gnatw.c        ^ /WARNINGS=MISSING_COMPONENT_CLAUSES\n -gnatw.C        ^ /WARNINGS=NOMISSING_COMPONENT_CLAUSES\n+-gnatw.d        ^ /WARNINGS=TAG_WARNINGS\n+-gnatw.D        ^ /WARNINGS=NOTAG_WARNINGS\n -gnatwd         ^ /WARNINGS=IMPLICIT_DEREFERENCE\n -gnatwD         ^ /WARNINGS=NOIMPLICIT_DEREFERENCE\n -gnatwe         ^ /WARNINGS=ERRORS"}, {"sha": "359419002e628b4af2a845794e69957be4439e5b", "filename": "gcc/ada/vms_data.ads", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fvms_data.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/882eadaf20ec8237cf91cd46fea4d856dda0b3c6/gcc%2Fada%2Fvms_data.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fvms_data.ads?ref=882eadaf20ec8237cf91cd46fea4d856dda0b3c6", "patch": "@@ -3094,6 +3094,10 @@ package VMS_Data is\n                                                \"-gnatwd \"                  &\n                                             \"NO_IMPLICIT_DEREFERENCE \"     &\n                                                \"-gnatwD \"                  &\n+                                            \"TAG_WARNINGS \"                &\n+                                               \"-gnatw.d \"                 &\n+                                            \"NOTAG_WARNINGS \"              &\n+                                               \"-gnatw.D \"                 &\n                                             \"ERRORS \"                      &\n                                                \"-gnatwe \"                  &\n                                             \"UNREFERENCED_FORMALS \"        &\n@@ -3489,6 +3493,13 @@ package VMS_Data is\n    --\n    --   NOVARIABLES_UNINITIALIZED       Suppress warnings for uninitialized\n    --                                   variables.\n+   --\n+   --   TAG_WARNINGS            Causes the string [xxx] to be added to warnings\n+   --                           that are controlled by the warning string xxx,\n+   --                           e.g. [REDUNDANT], or if the warning is enabled\n+   --                           by default, the tag is [enabled by default].\n+   --\n+   --   NOTAG_WARNINGS          Turns off warning tag output (default setting).\n \n    S_GCC_WarnX   : aliased constant S := \"/NOWARNINGS \"                    &\n                                             \"-gnatws\";"}]}