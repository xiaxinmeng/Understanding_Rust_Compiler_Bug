{"sha": "13291c16c043afabb7411422aa811e56d51b51fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTMyOTFjMTZjMDQzYWZhYmI3NDExNDIyYWE4MTFlNTZkNTFiNTFmZQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2009-10-07T09:11:28Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2009-10-07T09:11:28Z"}, "message": "collect2.c (main): Add -fno-whole-program.\n\n\n\t* collect2.c (main): Add -fno-whole-program.\n\t* gcc.c (set_collect_gcc_options): Do not remove whole program here.\n\nFrom-SVN: r152521", "tree": {"sha": "de925db224c03a06ee28967d52e6dc37cbad5f81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/de925db224c03a06ee28967d52e6dc37cbad5f81"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/13291c16c043afabb7411422aa811e56d51b51fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13291c16c043afabb7411422aa811e56d51b51fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13291c16c043afabb7411422aa811e56d51b51fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13291c16c043afabb7411422aa811e56d51b51fe/comments", "author": null, "committer": null, "parents": [{"sha": "b20996ff13afd304d44aafd0966501cc4bd10b97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b20996ff13afd304d44aafd0966501cc4bd10b97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b20996ff13afd304d44aafd0966501cc4bd10b97"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "31b4ad7c37ffbd9f367444291e715a9a8bb4ce39", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13291c16c043afabb7411422aa811e56d51b51fe/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13291c16c043afabb7411422aa811e56d51b51fe/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=13291c16c043afabb7411422aa811e56d51b51fe", "patch": "@@ -1,3 +1,8 @@\n+2009-10-07  Jan Hubicka  <jh@suse.cz>\n+\n+\t* collect2.c (main): Add -fno-whole-program.\n+\t* gcc.c (set_collect_gcc_options): Do not remove whole program here.\n+\n 2009-10-07  Jan Hubicka  <jh@suse.cz>\n \n \t* lto-symtab.c (lto_cgraph_replace_node): Assert that inline clones has"}, {"sha": "01ef4317379ba877fe1da8f348b5e867ca024b43", "filename": "gcc/collect2.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13291c16c043afabb7411422aa811e56d51b51fe/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13291c16c043afabb7411422aa811e56d51b51fe/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=13291c16c043afabb7411422aa811e56d51b51fe", "patch": "@@ -1271,8 +1271,8 @@ main (int argc, char **argv)\n   obstack_free (&temporary_obstack, temporary_firstobj);\n \n   /* -fno-profile-arcs -fno-test-coverage -fno-branch-probabilities\n-     -fno-exceptions -w */\n-  num_c_args += 5;\n+     -fno-exceptions -w -fno-whole-program */\n+  num_c_args += 6;\n \n   c_argv = XCNEWVEC (char *, num_c_args);\n   c_ptr = CONST_CAST2 (const char **, char **, c_argv);\n@@ -1440,6 +1440,7 @@ main (int argc, char **argv)\n   *c_ptr++ = \"-fno-branch-probabilities\";\n   *c_ptr++ = \"-fno-exceptions\";\n   *c_ptr++ = \"-w\";\n+  *c_ptr++ = \"-fno-whole-program\";\n \n   /* !!! When GCC calls collect2,\n      it does not know whether it is calling collect2 or ld."}, {"sha": "d94462d9ac59eead720bf9749374bcf9ff982f5b", "filename": "gcc/gcc.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13291c16c043afabb7411422aa811e56d51b51fe/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13291c16c043afabb7411422aa811e56d51b51fe/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=13291c16c043afabb7411422aa811e56d51b51fe", "patch": "@@ -4636,11 +4636,6 @@ set_collect_gcc_options (void)\n       if ((switches[i].live_cond & SWITCH_IGNORE) != 0)\n \tcontinue;\n \n-      /* Don't use -fwhole-program when compiling the init and fini routines,\n-\t since we'd wrongly assume that the routines aren't needed.  */\n-      if (strcmp (switches[i].part1, \"fwhole-program\") == 0)\n-\tcontinue;\n-\n       obstack_grow (&collect_obstack, \"'-\", 2);\n       q = switches[i].part1;\n       while ((p = strchr (q, '\\'')))"}]}