{"sha": "f73dc006049cd217fdd2fa943b861ad9f517aa66", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjczZGMwMDYwNDljZDIxN2ZkZDJmYTk0M2I4NjFhZDlmNTE3YWE2Ng==", "commit": {"author": {"name": "Wilco Dijkstra", "email": "wdijkstr@arm.com", "date": "2019-01-25T13:29:06Z"}, "committer": {"name": "Wilco Dijkstra", "email": "wilco@gcc.gnu.org", "date": "2019-01-25T13:29:06Z"}, "message": "[PATCH][AArch64] Fix generation of tst (PR87763)\n\nThe TST instruction no longer matches in all cases due to changes in\nCombine.  The fix is simple, we now need to allow a subreg as well when\nselecting the cc_mode.  This fixes the tst_5.c and tst_6.c failures.\n\nAArch64 regress & bootstrap OK.\n\n\tPR rtl-optimization/87763\n\t* config/aarch64/aarch64.c (aarch64_select_cc_mode):\n\tAllow SUBREG when matching CC_NZmode compare.\n\nFrom-SVN: r268265", "tree": {"sha": "0e78f46d34616689a142cafe5f64d7bc16046651", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0e78f46d34616689a142cafe5f64d7bc16046651"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f73dc006049cd217fdd2fa943b861ad9f517aa66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f73dc006049cd217fdd2fa943b861ad9f517aa66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f73dc006049cd217fdd2fa943b861ad9f517aa66", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f73dc006049cd217fdd2fa943b861ad9f517aa66/comments", "author": null, "committer": null, "parents": [{"sha": "cb1ba35f582f07096a045574b571576bdcc439a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb1ba35f582f07096a045574b571576bdcc439a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb1ba35f582f07096a045574b571576bdcc439a9"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "87794469c3bf7b855554d4ebe7429b9054c82180", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f73dc006049cd217fdd2fa943b861ad9f517aa66/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f73dc006049cd217fdd2fa943b861ad9f517aa66/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f73dc006049cd217fdd2fa943b861ad9f517aa66", "patch": "@@ -1,3 +1,9 @@\n+2019-01-25  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n+\tPR rtl-optimization/87763\n+\t* config/aarch64/aarch64.c (aarch64_select_cc_mode):\n+\tAllow SUBREG when matching CC_NZmode compare.\n+\n 2019-01-25  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/89049"}, {"sha": "8bddff9029bd48fbc245bf275ee3e1b3ffe8b55e", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f73dc006049cd217fdd2fa943b861ad9f517aa66/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f73dc006049cd217fdd2fa943b861ad9f517aa66/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=f73dc006049cd217fdd2fa943b861ad9f517aa66", "patch": "@@ -7163,7 +7163,7 @@ aarch64_select_cc_mode (RTX_CODE code, rtx x, rtx y)\n \n   /* Equality comparisons of short modes against zero can be performed\n      using the TST instruction with the appropriate bitmask.  */\n-  if (y == const0_rtx && REG_P (x)\n+  if (y == const0_rtx && (REG_P (x) || SUBREG_P (x))\n       && (code == EQ || code == NE)\n       && (mode_x == HImode || mode_x == QImode))\n     return CC_NZmode;"}]}