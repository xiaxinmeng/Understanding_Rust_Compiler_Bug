{"sha": "d466b40756ea5ed503f7d5c43bddf9f5cf57b859", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQ2NmI0MDc1NmVhNWVkNTAzZjdkNWM0M2JkZGY5ZjVjZjU3Yjg1OQ==", "commit": {"author": {"name": "Michael Matz", "email": "matz@suse.de", "date": "2011-08-23T14:38:24Z"}, "committer": {"name": "Michael Matz", "email": "matz@gcc.gnu.org", "date": "2011-08-23T14:38:24Z"}, "message": "cfgexpand.c (expand_one_register_var): Use get_pointer_alignment.\n\n\t* cfgexpand.c (expand_one_register_var): Use get_pointer_alignment.\n\t(gimple_expand_cfg): Merge alignment info for coalesced pointer\n\tSSA names.\n\nFrom-SVN: r177989", "tree": {"sha": "9806909655076506baa134e3fa62aed610a37357", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9806909655076506baa134e3fa62aed610a37357"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d466b40756ea5ed503f7d5c43bddf9f5cf57b859", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d466b40756ea5ed503f7d5c43bddf9f5cf57b859", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d466b40756ea5ed503f7d5c43bddf9f5cf57b859", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d466b40756ea5ed503f7d5c43bddf9f5cf57b859/comments", "author": {"login": "susematz", "id": 4117296, "node_id": "MDQ6VXNlcjQxMTcyOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4117296?v=4", "gravatar_id": "", "url": "https://api.github.com/users/susematz", "html_url": "https://github.com/susematz", "followers_url": "https://api.github.com/users/susematz/followers", "following_url": "https://api.github.com/users/susematz/following{/other_user}", "gists_url": "https://api.github.com/users/susematz/gists{/gist_id}", "starred_url": "https://api.github.com/users/susematz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/susematz/subscriptions", "organizations_url": "https://api.github.com/users/susematz/orgs", "repos_url": "https://api.github.com/users/susematz/repos", "events_url": "https://api.github.com/users/susematz/events{/privacy}", "received_events_url": "https://api.github.com/users/susematz/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bfcbe068860c133c2bc4a48dbc476d4085aa93fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfcbe068860c133c2bc4a48dbc476d4085aa93fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfcbe068860c133c2bc4a48dbc476d4085aa93fd"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "3bb93182699133df6cc0df9ffe71625b879fccad", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d466b40756ea5ed503f7d5c43bddf9f5cf57b859/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d466b40756ea5ed503f7d5c43bddf9f5cf57b859/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d466b40756ea5ed503f7d5c43bddf9f5cf57b859", "patch": "@@ -1,3 +1,9 @@\n+2011-08-12  Michael Matz  <matz@suse.de>\n+\n+\t* cfgexpand.c (expand_one_register_var): Use get_pointer_alignment.\n+\t(gimple_expand_cfg): Merge alignment info for coalesced pointer\n+\tSSA names.\n+\n 2011-08-23  Richard Guenther  <rguenther@suse.de>\n \n \t* Makefile.in (tree-data-ref.o): Add tree-affine.h dependency."}, {"sha": "03a4409eeda902c6c39c901ce6ddf2bf1c46b767", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 26, "deletions": 1, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d466b40756ea5ed503f7d5c43bddf9f5cf57b859/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d466b40756ea5ed503f7d5c43bddf9f5cf57b859/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=d466b40756ea5ed503f7d5c43bddf9f5cf57b859", "patch": "@@ -909,7 +909,7 @@ expand_one_register_var (tree var)\n     mark_user_reg (x);\n \n   if (POINTER_TYPE_P (type))\n-    mark_reg_pointer (x, TYPE_ALIGN (TREE_TYPE (type)));\n+    mark_reg_pointer (x, get_pointer_alignment (var));\n }\n \n /* A subroutine of expand_one_var.  Called to assign rtl to a VAR_DECL that\n@@ -4265,6 +4265,31 @@ gimple_expand_cfg (void)\n \t}\n     }\n \n+  /* If we have a class containing differently aligned pointers\n+     we need to merge those into the corresponding RTL pointer\n+     alignment.  */\n+  for (i = 1; i < num_ssa_names; i++)\n+    {\n+      tree name = ssa_name (i);\n+      int part;\n+      rtx r;\n+\n+      if (!name\n+\t  || !POINTER_TYPE_P (TREE_TYPE (name))\n+\t  /* We might have generated new SSA names in\n+\t     update_alias_info_with_stack_vars.  They will have a NULL\n+\t     defining statements, and won't be part of the partitioning,\n+\t     so ignore those.  */\n+\t  || !SSA_NAME_DEF_STMT (name))\n+\tcontinue;\n+      part = var_to_partition (SA.map, name);\n+      if (part == NO_PARTITION)\n+\tcontinue;\n+      r = SA.partition_to_pseudo[part];\n+      if (REG_P (r))\n+\tmark_reg_pointer (r, get_pointer_alignment (name));\n+    }\n+\n   /* If this function is `main', emit a call to `__main'\n      to run global initializers, etc.  */\n   if (DECL_NAME (current_function_decl)"}]}