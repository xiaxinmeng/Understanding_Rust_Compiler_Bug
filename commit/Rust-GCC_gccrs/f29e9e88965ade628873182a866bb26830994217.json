{"sha": "f29e9e88965ade628873182a866bb26830994217", "node_id": "C_kwDOANBUbNoAKGYyOWU5ZTg4OTY1YWRlNjI4ODczMTgyYTg2NmJiMjY4MzA5OTQyMTc", "commit": {"author": {"name": "Joel Brobecker", "email": "brobecker@adacore.com", "date": "2022-03-14T03:54:02Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-05-16T08:42:05Z"}, "message": "[Ada] GNAT.Debug_Pools: Improve documentation of the Stack_Trace_Depth parameter\n\nSetting this parameter to zero when calling the Configure procedure has\nthe effect of disabling completely the tracking of the biggest memory\nusers, which wasn't clear from the current documentation.  So this patch\nenhances the documentation of both the Configure procedure as well as\nthe Dump procedure to make that explicit.\n\ngcc/ada/\n\n\t* libgnat/g-debpoo.ads: Improve documentation of the\n\tStack_Trace_Depth parameter.", "tree": {"sha": "8bd56f86854691969622c8d5bc30af169d3b415e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8bd56f86854691969622c8d5bc30af169d3b415e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f29e9e88965ade628873182a866bb26830994217", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f29e9e88965ade628873182a866bb26830994217", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f29e9e88965ade628873182a866bb26830994217", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f29e9e88965ade628873182a866bb26830994217/comments", "author": {"login": "brobecke", "id": 11981700, "node_id": "MDQ6VXNlcjExOTgxNzAw", "avatar_url": "https://avatars.githubusercontent.com/u/11981700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brobecke", "html_url": "https://github.com/brobecke", "followers_url": "https://api.github.com/users/brobecke/followers", "following_url": "https://api.github.com/users/brobecke/following{/other_user}", "gists_url": "https://api.github.com/users/brobecke/gists{/gist_id}", "starred_url": "https://api.github.com/users/brobecke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brobecke/subscriptions", "organizations_url": "https://api.github.com/users/brobecke/orgs", "repos_url": "https://api.github.com/users/brobecke/repos", "events_url": "https://api.github.com/users/brobecke/events{/privacy}", "received_events_url": "https://api.github.com/users/brobecke/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1bdf9fa390282299418e21534674d0ab252e9f34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bdf9fa390282299418e21534674d0ab252e9f34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bdf9fa390282299418e21534674d0ab252e9f34"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "e3df752abd12e141a81d88c91cce6dc39058d3c2", "filename": "gcc/ada/libgnat/g-debpoo.ads", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f29e9e88965ade628873182a866bb26830994217/gcc%2Fada%2Flibgnat%2Fg-debpoo.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f29e9e88965ade628873182a866bb26830994217/gcc%2Fada%2Flibgnat%2Fg-debpoo.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fg-debpoo.ads?ref=f29e9e88965ade628873182a866bb26830994217", "patch": "@@ -123,7 +123,8 @@ package GNAT.Debug_Pools is\n    --    traces that are output to indicate locations of actions for error\n    --    conditions such as bad allocations. If set to zero, the debug pool\n    --    will not try to compute backtraces. This is more efficient but gives\n-   --    less information on problem locations\n+   --    less information on problem locations (and in particular, this\n+   --    disables the tracking of the biggest users of memory).\n    --\n    --    Maximum_Logically_Freed_Memory: maximum amount of memory (bytes)\n    --    that should be kept before starting to physically deallocate some.\n@@ -275,8 +276,12 @@ package GNAT.Debug_Pools is\n       Size   : Positive;\n       Report : Report_Type := All_Reports);\n    --  Dump information about memory usage.\n-   --  Size is the number of the biggest memory users we want to show. Report\n-   --  indicates which sorting order is used in the report.\n+   --  Size is the number of the biggest memory users we want to show\n+   --  (requires that the Debug_Pool has been configured with Stack_Trace_Depth\n+   --  greater than zero). Also, for efficiency reasons, tracebacks with\n+   --  a memory allocation below 1_000 bytes are not shown in the \"biggest\n+   --  memory users\" part of the report.\n+   --  Report indicates which sorting order is used in the report.\n \n    procedure Dump_Stdout\n      (Pool   : Debug_Pool;"}]}