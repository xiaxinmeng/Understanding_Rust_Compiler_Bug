{"sha": "1e5787ef86dd68d1e332eee116d1bc92c17aae44", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWU1Nzg3ZWY4NmRkNjhkMWUzMzJlZWUxMTZkMWJjOTJjMTdhYWU0NA==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "dvorakz@suse.cz", "date": "2006-08-31T19:33:56Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2006-08-31T19:33:56Z"}, "message": "re PR tree-optimization/28839 (ICE in tree-vectorizer.c with -O2 -ftree-vectorize -funswitch-loops)\n\n\tPR tree-optimization/28839\n\t* tree-into-ssa.c (prune_unused_phi_nodes): Take into account kills in\n\tblocks in that phi arguments appear.\n\n\t* gcc.dg/pr28839.c: New test.\n\nFrom-SVN: r116605", "tree": {"sha": "e7746b9aad7f941d889dd157949c58c54a052970", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7746b9aad7f941d889dd157949c58c54a052970"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e5787ef86dd68d1e332eee116d1bc92c17aae44", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e5787ef86dd68d1e332eee116d1bc92c17aae44", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e5787ef86dd68d1e332eee116d1bc92c17aae44", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e5787ef86dd68d1e332eee116d1bc92c17aae44/comments", "author": null, "committer": null, "parents": [{"sha": "6a10f7b36203b8e6ff277d64a78110c98c7c5744", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a10f7b36203b8e6ff277d64a78110c98c7c5744", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a10f7b36203b8e6ff277d64a78110c98c7c5744"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "949adec7367671d4bb09e89b9edc77b801f08087", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e5787ef86dd68d1e332eee116d1bc92c17aae44/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e5787ef86dd68d1e332eee116d1bc92c17aae44/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1e5787ef86dd68d1e332eee116d1bc92c17aae44", "patch": "@@ -1,3 +1,9 @@\n+2006-08-31  Zdenek Dvorak <dvorakz@suse.cz>\n+\n+\tPR tree-optimization/28839\n+\t* tree-into-ssa.c (prune_unused_phi_nodes): Take into account kills in\n+\tblocks in that phi arguments appear.\n+\n 2006-08-31  Roger Sayle  <roger@eyesopen.com>\n \n \tPR other/22313"}, {"sha": "1a3ecb598edcad16a216d4fa2f66715ddefe387f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e5787ef86dd68d1e332eee116d1bc92c17aae44/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e5787ef86dd68d1e332eee116d1bc92c17aae44/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1e5787ef86dd68d1e332eee116d1bc92c17aae44", "patch": "@@ -1,3 +1,8 @@\n+2006-08-31  Zdenek Dvorak <dvorakz@suse.cz>\n+\n+\tPR tree-optimization/28839\n+\t* gcc.dg/pr28839.c: New test.\n+\n 2006-08-31  Andreas Krebbel  <krebbel1@de.ibm.com>\n \n \tPR target/24367"}, {"sha": "56a42a37b6e38c51adc33b1ba469f078644cc8f5", "filename": "gcc/testsuite/gcc.dg/pr28839.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e5787ef86dd68d1e332eee116d1bc92c17aae44/gcc%2Ftestsuite%2Fgcc.dg%2Fpr28839.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e5787ef86dd68d1e332eee116d1bc92c17aae44/gcc%2Ftestsuite%2Fgcc.dg%2Fpr28839.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr28839.c?ref=1e5787ef86dd68d1e332eee116d1bc92c17aae44", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile { target i?86-*-* x86_64-*-* } } */\n+/* { dg-options \"-O2 -msse2 -ftree-vectorize -funswitch-loops\" } */\n+\n+static int ready[10];\n+void abort (void);\n+void test_once (int t,int t1)\n+{\n+  int i, repeat;\n+  for (i = 0; i < 10; i++)\n+    {\n+      ready[i] = 0;\n+      if (t1)\n+\tif (b())\n+\t  abort ();\n+    }\n+  if (t)\n+    abort ();\n+}"}, {"sha": "14a50b62c62be820706a2e7e4bb95900fe004fcd", "filename": "gcc/tree-into-ssa.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e5787ef86dd68d1e332eee116d1bc92c17aae44/gcc%2Ftree-into-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e5787ef86dd68d1e332eee116d1bc92c17aae44/gcc%2Ftree-into-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-into-ssa.c?ref=1e5787ef86dd68d1e332eee116d1bc92c17aae44", "patch": "@@ -977,6 +977,13 @@ prune_unused_phi_nodes (bitmap phis, bitmap kills, bitmap uses)\n \t  if (bitmap_bit_p (uses, u))\n \t    continue;\n \n+\t  /* In case there is a kill directly in the use block, do not record\n+\t     the use (this is also necessary for correctness, as we assume that\n+\t     uses dominated by a def directly in their block have been filtered\n+\t     out before).  */\n+\t  if (bitmap_bit_p (kills, u))\n+\t    continue;\n+\n \t  bitmap_set_bit (uses, u);\n \t  VEC_safe_push (int, heap, worklist, u);\n \t}"}]}