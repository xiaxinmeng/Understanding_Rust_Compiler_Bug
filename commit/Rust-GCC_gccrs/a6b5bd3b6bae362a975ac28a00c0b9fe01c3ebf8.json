{"sha": "a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTZiNWJkM2I2YmFlMzYyYTk3NWFjMjhhMDBjMGI5ZmUwMWMzZWJmOA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-11-10T22:23:53Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-11-10T22:23:53Z"}, "message": "natFileDescriptorWin32.cc (read): Handle case where count is 0.\n\n\t* java/io/natFileDescriptorWin32.cc (read): Handle case where\n\tcount is 0.\n\t* java/io/natFileDescriptorPosix.cc (read): Handle case where\n\tcount is 0.\n\nFrom-SVN: r58997", "tree": {"sha": "2fb42dbbd9ac0cc4375ec9851dfbebc902b7c95b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2fb42dbbd9ac0cc4375ec9851dfbebc902b7c95b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8/comments", "author": null, "committer": null, "parents": [{"sha": "f18590c6209457736eda5e66c76c33e3f92532fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f18590c6209457736eda5e66c76c33e3f92532fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f18590c6209457736eda5e66c76c33e3f92532fd"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "a05b2cd5effbc802f0f81c42ac82b46d3469dec7", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8", "patch": "@@ -1,5 +1,10 @@\n 2002-11-10  Tom Tromey  <tromey@redhat.com>\n \n+\t* java/io/natFileDescriptorWin32.cc (read): Handle case where\n+\tcount is 0.\n+\t* java/io/natFileDescriptorPosix.cc (read): Handle case where\n+\tcount is 0.\n+\n \t* java/io/Externalizable.java, java/io/FilePermission.java,\n \tjava/io/ObjectStreamConstants.java, java/io/Serializable.java,\n \tjava/io/SerializablePermission.java, java/text/Format.java,"}, {"sha": "80e6bad97ae9ec180a20d45c2bfcceae90a54cff", "filename": "libjava/java/io/natFileDescriptorPosix.cc", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8/libjava%2Fjava%2Fio%2FnatFileDescriptorPosix.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8/libjava%2Fjava%2Fio%2FnatFileDescriptorPosix.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFileDescriptorPosix.cc?ref=a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8", "patch": "@@ -293,6 +293,11 @@ java::io::FileDescriptor::read (jbyteArray buffer, jint offset, jint count)\n   jsize bsize = JvGetArrayLength (buffer);\n   if (offset < 0 || count < 0 || offset + count > bsize)\n     throw new java::lang::ArrayIndexOutOfBoundsException;\n+\n+  // Must return 0 if an attempt is made to read 0 bytes.\n+  if (count == 0)\n+    return 0;\n+\n   jbyte *bytes = elements (buffer) + offset;\n   int r = ::read (fd, bytes, count);\n   if (r == 0)"}, {"sha": "4b157f7042c9b8f0df5d315113c00fed86857355", "filename": "libjava/java/io/natFileDescriptorWin32.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8/libjava%2Fjava%2Fio%2FnatFileDescriptorWin32.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8/libjava%2Fjava%2Fio%2FnatFileDescriptorWin32.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFileDescriptorWin32.cc?ref=a6b5bd3b6bae362a975ac28a00c0b9fe01c3ebf8", "patch": "@@ -305,6 +305,10 @@ java::io::FileDescriptor::read(jbyteArray buffer, jint offset, jint count)\n   if (offset < 0 || count < 0 || offset + count > bsize)\n     throw new java::lang::ArrayIndexOutOfBoundsException;\n \n+  // Must return 0 if an attempt is made to read 0 bytes.\n+  if (count == 0)\n+    return 0;\n+\n   jbyte *bytes = elements (buffer) + offset;\n \n   DWORD read;"}]}