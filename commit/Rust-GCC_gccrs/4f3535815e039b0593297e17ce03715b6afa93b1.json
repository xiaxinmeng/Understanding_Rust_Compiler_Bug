{"sha": "4f3535815e039b0593297e17ce03715b6afa93b1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGYzNTM1ODE1ZTAzOWIwNTkzMjk3ZTE3Y2UwMzcxNWI2YWZhOTNiMQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-11-09T16:21:45Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-11-09T16:21:45Z"}, "message": "re PR middle-end/77718 (expand_builtin_memcmp swaps args)\n\n\tPR target/77718\n\t* builtins.c (expand_builtin_memcmp): Formatting fix.\n\n\t* gcc.c-torture/execute/pr77718.c: New test.\n\nFrom-SVN: r242007", "tree": {"sha": "af77023a79588c2779e0da15be494e19c56e21c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/af77023a79588c2779e0da15be494e19c56e21c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4f3535815e039b0593297e17ce03715b6afa93b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f3535815e039b0593297e17ce03715b6afa93b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f3535815e039b0593297e17ce03715b6afa93b1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f3535815e039b0593297e17ce03715b6afa93b1/comments", "author": null, "committer": null, "parents": [{"sha": "2e955d50a928eac736c1e4a6eddc932d3400200a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e955d50a928eac736c1e4a6eddc932d3400200a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e955d50a928eac736c1e4a6eddc932d3400200a"}], "stats": {"total": 36, "additions": 34, "deletions": 2}, "files": [{"sha": "d5616524c0df49c4fde41197557143143567067d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f3535815e039b0593297e17ce03715b6afa93b1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f3535815e039b0593297e17ce03715b6afa93b1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4f3535815e039b0593297e17ce03715b6afa93b1", "patch": "@@ -1,5 +1,8 @@\n 2016-11-09  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR target/77718\n+\t* builtins.c (expand_builtin_memcmp): Formatting fix.\n+\n \t* flag-types.h (enum sanitize_code): Add SANITIZE_SHIFT_BASE\n \tand SANITIZE_SHIFT_EXPONENT, change SANITIZE_SHIFT to bitwise\n \tor of them, renumber other enumerators.\n@@ -5059,7 +5062,8 @@\n \n 2016-09-29  Bernd Schmidt  <bschmidt@redhat.com>\n \n-\t* builtins.c (expand_builtin_memcmp): don't swap args unless\n+\tPR target/77718\n+\t* builtins.c (expand_builtin_memcmp): Don't swap args unless\n \tresult is only being compared with zero.\n \n 2016-09-29  Marek Polacek  <polacek@redhat.com>"}, {"sha": "3ac2d44148440b124559ba7cd3de483b7a74b72d", "filename": "gcc/builtins.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f3535815e039b0593297e17ce03715b6afa93b1/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f3535815e039b0593297e17ce03715b6afa93b1/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=4f3535815e039b0593297e17ce03715b6afa93b1", "patch": "@@ -3754,7 +3754,7 @@ expand_builtin_memcmp (tree exp, rtx target, bool result_eq)\n     {\n       src_str = c_getstr (arg1);\n       if (src_str != NULL)\n-       std::swap (arg1_rtx, arg2_rtx);\n+\tstd::swap (arg1_rtx, arg2_rtx);\n     }\n \n   /* If SRC is a string constant and block move would be done"}, {"sha": "7a3b6c5ffc608e4619c970e4b93ea72294156f06", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f3535815e039b0593297e17ce03715b6afa93b1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f3535815e039b0593297e17ce03715b6afa93b1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4f3535815e039b0593297e17ce03715b6afa93b1", "patch": "@@ -1,5 +1,8 @@\n 2016-11-09  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR target/77718\n+\t* gcc.c-torture/execute/pr77718.c: New test.\n+\n \t* gcc.dg/ubsan/c99-shift-3.c: New test.\n \t* gcc.dg/ubsan/c99-shift-4.c: New test.\n \t* gcc.dg/ubsan/c99-shift-5.c: New test."}, {"sha": "a76effef801f51e67e989a3cd5ff027950fc6bf7", "filename": "gcc/testsuite/gcc.c-torture/execute/pr77718.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f3535815e039b0593297e17ce03715b6afa93b1/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr77718.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f3535815e039b0593297e17ce03715b6afa93b1/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr77718.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr77718.c?ref=4f3535815e039b0593297e17ce03715b6afa93b1", "patch": "@@ -0,0 +1,25 @@\n+/* PR middle-end/77718 */\n+\n+char a[64] __attribute__((aligned (8)));\n+\n+__attribute__((noinline, noclone)) int\n+foo (void)\n+{\n+  return __builtin_memcmp (\"bbbbbb\", a, 6);\n+}\n+\n+__attribute__((noinline, noclone)) int\n+bar (void)\n+{\n+  return __builtin_memcmp (a, \"bbbbbb\", 6);\n+}\n+\n+int\n+main ()\n+{\n+  __builtin_memset (a, 'a', sizeof (a));\n+  if (((foo () < 0) ^ ('a' > 'b'))\n+      || ((bar () < 0) ^ ('a' < 'b')))\n+    __builtin_abort ();\n+  return 0;\n+}"}]}