{"sha": "852b55f9afbc31fac5d593fa2943af98e9c18533", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODUyYjU1ZjlhZmJjMzFmYWM1ZDU5M2ZhMjk0M2FmOThlOWMxODUzMw==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2015-07-15T18:54:18Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2015-07-15T18:54:18Z"}, "message": "mkoffload.c (process): Add C++ protection to emitted code.\n\n\t* config/nvptx/mkoffload.c (process): Add C++ protection to\n\temitted code.\n\nFrom-SVN: r225844", "tree": {"sha": "b50a07f7205cd237180363b15608b85e5cfff3a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b50a07f7205cd237180363b15608b85e5cfff3a2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/852b55f9afbc31fac5d593fa2943af98e9c18533", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/852b55f9afbc31fac5d593fa2943af98e9c18533", "html_url": "https://github.com/Rust-GCC/gccrs/commit/852b55f9afbc31fac5d593fa2943af98e9c18533", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/852b55f9afbc31fac5d593fa2943af98e9c18533/comments", "author": null, "committer": null, "parents": [{"sha": "58b62eaab2044b7f51d389738698a10ecd1322b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58b62eaab2044b7f51d389738698a10ecd1322b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58b62eaab2044b7f51d389738698a10ecd1322b9"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "f05f82ece79106fbce4f9fcdc5fc6d26ffec1087", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/852b55f9afbc31fac5d593fa2943af98e9c18533/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/852b55f9afbc31fac5d593fa2943af98e9c18533/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=852b55f9afbc31fac5d593fa2943af98e9c18533", "patch": "@@ -1,3 +1,8 @@\n+2015-07-15  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* config/nvptx/mkoffload.c (process): Add C++ protection to\n+\temitted code.\n+\n 2015-07-14  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR target/66854"}, {"sha": "42cce3b7e07ed8dd5002d381e9dbc621367f91dd", "filename": "gcc/config/nvptx/mkoffload.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/852b55f9afbc31fac5d593fa2943af98e9c18533/gcc%2Fconfig%2Fnvptx%2Fmkoffload.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/852b55f9afbc31fac5d593fa2943af98e9c18533/gcc%2Fconfig%2Fnvptx%2Fmkoffload.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fmkoffload.c?ref=852b55f9afbc31fac5d593fa2943af98e9c18533", "patch": "@@ -867,7 +867,13 @@ process (FILE *in, FILE *out)\n \t\t\"func_mappings\\n\", nvars, nfuncs);\n   fprintf (out, \"};\\n\\n\");\n \n-  fprintf (out, \"extern void GOMP_offload_register (const void *, int, void *);\\n\");\n+  fprintf (out, \"#ifdef __cplusplus\\n\"\n+\t   \"extern \\\"C\\\" {\\n\"\n+\t   \"#endif\\n\");\n+  fprintf (out, \"extern void GOMP_offload_register (void *, int, void *);\\n\");\n+  fprintf (out, \"#ifdef __cplusplus\\n\"\n+\t   \"}\\n\"\n+\t   \"#endif\\n\");\n \n   fprintf (out, \"extern void *__OFFLOAD_TABLE__[];\\n\\n\");\n   fprintf (out, \"static __attribute__((constructor)) void init (void)\\n{\\n\");"}]}