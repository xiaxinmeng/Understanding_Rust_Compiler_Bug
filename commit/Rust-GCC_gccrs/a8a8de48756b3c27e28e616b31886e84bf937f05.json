{"sha": "a8a8de48756b3c27e28e616b31886e84bf937f05", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YThhOGRlNDg3NTZiM2MyN2UyOGU2MTZiMzE4ODZlODRiZjkzN2YwNQ==", "commit": {"author": {"name": "Anthony Green", "email": "green@redhat.com", "date": "2003-06-08T22:07:48Z"}, "committer": {"name": "Anthony Green", "email": "green@gcc.gnu.org", "date": "2003-06-08T22:07:48Z"}, "message": "URLStreamHandler.java (sameFile): Fix port value comparison.\n\n2003-06-08  Anthony Green  <green@redhat.com>\n\n        * java/net/URLStreamHandler.java (sameFile): Fix port value\n        comparison.\n        * java/net/URL.java (handler): Make package private.\n        * gnu/gcj/protocol/http/Handler.java (getDefaultPort): New method.\n\nFrom-SVN: r67640", "tree": {"sha": "17da92559877904ab4b92fcd89330f000a62e5eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/17da92559877904ab4b92fcd89330f000a62e5eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a8a8de48756b3c27e28e616b31886e84bf937f05", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8a8de48756b3c27e28e616b31886e84bf937f05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8a8de48756b3c27e28e616b31886e84bf937f05", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8a8de48756b3c27e28e616b31886e84bf937f05/comments", "author": {"login": "atgreen", "id": 89993, "node_id": "MDQ6VXNlcjg5OTkz", "avatar_url": "https://avatars.githubusercontent.com/u/89993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atgreen", "html_url": "https://github.com/atgreen", "followers_url": "https://api.github.com/users/atgreen/followers", "following_url": "https://api.github.com/users/atgreen/following{/other_user}", "gists_url": "https://api.github.com/users/atgreen/gists{/gist_id}", "starred_url": "https://api.github.com/users/atgreen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atgreen/subscriptions", "organizations_url": "https://api.github.com/users/atgreen/orgs", "repos_url": "https://api.github.com/users/atgreen/repos", "events_url": "https://api.github.com/users/atgreen/events{/privacy}", "received_events_url": "https://api.github.com/users/atgreen/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "51d2dfa601d743ba2f4cbe4e70691a3a6ddf2fa6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51d2dfa601d743ba2f4cbe4e70691a3a6ddf2fa6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51d2dfa601d743ba2f4cbe4e70691a3a6ddf2fa6"}], "stats": {"total": 31, "additions": 26, "deletions": 5}, "files": [{"sha": "d0b1a4d5c6f8ef541a3a9347ea97274633ba4b88", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8a8de48756b3c27e28e616b31886e84bf937f05/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8a8de48756b3c27e28e616b31886e84bf937f05/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=a8a8de48756b3c27e28e616b31886e84bf937f05", "patch": "@@ -1,3 +1,10 @@\n+2003-06-08  Anthony Green  <green@redhat.com>\n+\n+\t* java/net/URLStreamHandler.java (sameFile): Fix port value\n+\tcomparison.\n+\t* java/net/URL.java (handler): Make package private.\n+\t* gnu/gcj/protocol/http/Handler.java (getDefaultPort): New method.\n+\n 2003-06-07  Tom Tromey  <tromey@redhat.com>\n \n \tFor PR libgcj/11085:"}, {"sha": "608d07eda02bb80bbe42401bd6d005911cb0ecb4", "filename": "libjava/gnu/gcj/protocol/http/Handler.java", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8a8de48756b3c27e28e616b31886e84bf937f05/libjava%2Fgnu%2Fgcj%2Fprotocol%2Fhttp%2FHandler.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8a8de48756b3c27e28e616b31886e84bf937f05/libjava%2Fgnu%2Fgcj%2Fprotocol%2Fhttp%2FHandler.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fgcj%2Fprotocol%2Fhttp%2FHandler.java?ref=a8a8de48756b3c27e28e616b31886e84bf937f05", "patch": "@@ -1,6 +1,6 @@\n // Handler.java - URLStreamHandler for http protocol.\n \n-/* Copyright (C) 1999  Free Software Foundation\n+/* Copyright (C) 1999, 2003  Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -16,7 +16,8 @@\n import java.io.IOException;\n \n /**\n- * @author Warren Levy <warrenl@cygnus.com>\n+ * @author Warren Levy\n+ * @author Anthony Green <green@redhat.com>\n  * @date March 26, 1999.\n  */\n \n@@ -32,4 +33,9 @@ protected URLConnection openConnection(URL url) throws IOException\n   {\n     return new Connection(url);\n   }\n+\n+  protected int getDefaultPort ()\n+  {\n+    return 80;\n+  }\n }"}, {"sha": "5e32e2e67efa9408ad2a673f611776f8cb0f1d90", "filename": "libjava/java/net/URL.java", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8a8de48756b3c27e28e616b31886e84bf937f05/libjava%2Fjava%2Fnet%2FURL.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8a8de48756b3c27e28e616b31886e84bf937f05/libjava%2Fjava%2Fnet%2FURL.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FURL.java?ref=a8a8de48756b3c27e28e616b31886e84bf937f05", "patch": "@@ -1,5 +1,5 @@\n /* URL.java -- Uniform Resource Locator Class\n-   Copyright (C) 1998, 1999, 2000, 2002 Free Software Foundation, Inc.\n+   Copyright (C) 1998, 1999, 2000, 2002, 2003  Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -147,7 +147,7 @@ public final class URL implements Serializable\n   /**\n    * The protocol handler in use for this URL\n    */\n-  transient private URLStreamHandler handler;\n+  transient URLStreamHandler handler;\n \n   /**\n    * This a table where we cache protocol handlers to avoid the overhead"}, {"sha": "604279defa27a8d927078d2cba4600cabb06c7cf", "filename": "libjava/java/net/URLStreamHandler.java", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8a8de48756b3c27e28e616b31886e84bf937f05/libjava%2Fjava%2Fnet%2FURLStreamHandler.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8a8de48756b3c27e28e616b31886e84bf937f05/libjava%2Fjava%2Fnet%2FURLStreamHandler.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FURLStreamHandler.java?ref=a8a8de48756b3c27e28e616b31886e84bf937f05", "patch": "@@ -265,7 +265,15 @@ protected boolean sameFile(URL url1, URL url2)\n       return true;\n     // This comparison is very conservative.  It assumes that any\n     // field can be null.\n-    if (url1 == null || url2 == null || url1.getPort() != url2.getPort())\n+    if (url1 == null || url2 == null)\n+      return false;\n+    int p1 = url1.getPort ();\n+    if (p1 == -1)\n+      p1 = url1.handler.getDefaultPort ();\n+    int p2 = url2.getPort ();\n+    if (p2 == -1)\n+      p2 = url2.handler.getDefaultPort ();\n+    if (p1 != p2)\n       return false;\n     String s1, s2;\n     s1 = url1.getProtocol();"}]}