{"sha": "2e3757e78af922758a8ec45c4af78159384a6091", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmUzNzU3ZTc4YWY5MjI3NThhOGVjNDVjNGFmNzgxNTkzODRhNjA5MQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2017-05-11T15:46:48Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2017-05-11T15:46:48Z"}, "message": "Revert pushdecl_top_level_and_finish name change.\n\n\t* name-lookup.h (pushdecl_top_level_and_finish): Resurrect old\n\tname.\n\t* name-lookup.c (pushdecl_top_level_and_finish): Likewise.\n\t* decl.c (cp_make_fname_decl): Adjust.\n\t* decl2.c (get_guard, handle_tls_init):  Adjust.\n\t* rtti.c (get_tinfo_decl, tinfo_base_init):  Adjust.\n\nFrom-SVN: r247915", "tree": {"sha": "4a1a23aa226c5ccdecfb8c02cbc1facd91132b95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4a1a23aa226c5ccdecfb8c02cbc1facd91132b95"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2e3757e78af922758a8ec45c4af78159384a6091", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e3757e78af922758a8ec45c4af78159384a6091", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e3757e78af922758a8ec45c4af78159384a6091", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e3757e78af922758a8ec45c4af78159384a6091/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cc09ff603becdabd716421a65a88ad91b075bce8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc09ff603becdabd716421a65a88ad91b075bce8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc09ff603becdabd716421a65a88ad91b075bce8"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "63fac4d8713c92a273ac68e8caba120ebc3882eb", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=2e3757e78af922758a8ec45c4af78159384a6091", "patch": "@@ -1,5 +1,12 @@\n 2017-05-11  Nathan Sidwell  <nathan@acm.org>\n \n+\tRevert pushdecl_top_level_and_finish name change.\n+\t* name-lookup.h (pushdecl_top_level_and_finish): Resurrect old name.\n+\t* name-lookup.c (pushdecl_top_level_and_finish): Likewise.\n+\t* decl.c (cp_make_fname_decl): Adjust.\n+\t* decl2.c (get_guard, handle_tls_init):  Adjust.\n+\t* rtti.c (get_tinfo_decl, tinfo_base_init):  Adjust.\n+\n \t* name-lookup.c (pushdecl_outermost_localscope): Always\n \tconditionally stop timer.\n "}, {"sha": "476fd8da2ef8c589e5e56ea02254b819f37c4ca4", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=2e3757e78af922758a8ec45c4af78159384a6091", "patch": "@@ -4342,7 +4342,7 @@ cp_make_fname_decl (location_t loc, tree id, int type_dep)\n   else\n     {\n       DECL_THIS_STATIC (decl) = true;\n-      pushdecl_top_level_with_init (decl, init);\n+      pushdecl_top_level_and_finish (decl, init);\n     }\n \n   return decl;"}, {"sha": "46959ec77f778837c2ef29edd1f8b4c69ac8c207", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=2e3757e78af922758a8ec45c4af78159384a6091", "patch": "@@ -3021,7 +3021,7 @@ get_guard (tree decl)\n       DECL_ARTIFICIAL (guard) = 1;\n       DECL_IGNORED_P (guard) = 1;\n       TREE_USED (guard) = 1;\n-      pushdecl_top_level_with_init (guard, NULL_TREE);\n+      pushdecl_top_level_and_finish (guard, NULL_TREE);\n     }\n   return guard;\n }\n@@ -4261,7 +4261,7 @@ handle_tls_init (void)\n   TREE_USED (guard) = true;\n   CP_DECL_THREAD_LOCAL_P (guard) = true;\n   set_decl_tls_model (guard, decl_default_tls_model (guard));\n-  pushdecl_top_level_with_init (guard, NULL_TREE);\n+  pushdecl_top_level_and_finish (guard, NULL_TREE);\n \n   tree fn = get_local_tls_init_fn ();\n   start_preparsed_function (fn, NULL_TREE, SF_PRE_PARSED);"}, {"sha": "183133b517a88bf145fe022f190cd881f57b3178", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=2e3757e78af922758a8ec45c4af78159384a6091", "patch": "@@ -4586,7 +4586,7 @@ pushdecl_top_level_maybe_friend (tree x, bool is_friend)\n    initializing it with INIT.  */\n \n tree\n-pushdecl_top_level_with_init (tree x, tree init)\n+pushdecl_top_level_and_finish (tree x, tree init)\n {\n   return pushdecl_top_level_1 (x, &init, false);\n }"}, {"sha": "4b46f3e7dc74f390414013db3604fcef1625cee0", "filename": "gcc/cp/name-lookup.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2Fname-lookup.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2Fname-lookup.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.h?ref=2e3757e78af922758a8ec45c4af78159384a6091", "patch": "@@ -340,7 +340,7 @@ extern tree pushdecl (tree);\n extern tree pushdecl_outermost_localscope (tree);\n extern tree pushdecl_top_level_maybe_friend (tree, bool is_friend);\n extern tree pushdecl_top_level (tree);\n-extern tree pushdecl_top_level_with_init (tree, tree);\n+extern tree pushdecl_top_level_and_finish (tree, tree);\n extern tree pushtag (tree, tree, tag_scope);\n extern bool push_namespace (tree);\n extern void pop_namespace (void);"}, {"sha": "89d18914adfe6d87d80225ce250fab3aec483b70", "filename": "gcc/cp/rtti.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2Frtti.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e3757e78af922758a8ec45c4af78159384a6091/gcc%2Fcp%2Frtti.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Frtti.c?ref=2e3757e78af922758a8ec45c4af78159384a6091", "patch": "@@ -445,7 +445,7 @@ get_tinfo_decl (tree type)\n       DECL_NOT_REALLY_EXTERN (d) = 1;\n       set_linkage_according_to_type (type, d);\n \n-      d = pushdecl_top_level_with_init (d, NULL_TREE);\n+      d = pushdecl_top_level_and_finish (d, NULL_TREE);\n       if (CLASS_TYPE_P (type))\n \tCLASSTYPE_TYPEINFO_VAR (TYPE_MAIN_VARIANT (type)) = d;\n \n@@ -911,7 +911,7 @@ tinfo_base_init (tinfo_s *ti, tree target)\n     name_string = tinfo_name (target, !TREE_PUBLIC (name_decl));\n     DECL_INITIAL (name_decl) = name_string;\n     mark_used (name_decl);\n-    pushdecl_top_level_with_init (name_decl, name_string);\n+    pushdecl_top_level_and_finish (name_decl, name_string);\n   }\n \n   vtable_ptr = ti->vtable;"}]}