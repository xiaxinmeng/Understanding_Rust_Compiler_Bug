{"sha": "5e9c4ed903c39f82f28362d9411d4dbc491264ec", "node_id": "C_kwDOANBUbNoAKDVlOWM0ZWQ5MDNjMzlmODJmMjgzNjJkOTQxMWQ0ZGJjNDkxMjY0ZWM", "commit": {"author": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2022-09-14T15:38:30Z"}, "committer": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2022-09-28T13:10:17Z"}, "message": "arm: Define __ARM_FEATURE_AES and __ARM_FEATURE_SHA2 when march +crypto is selected\n\nHi all,\n\nthis patch fixes the missing definition of __ARM_FEATURE_AES and\n__ARM_FEATURE_SHA2 when AES SHA1 & SHA2 crypto instructions are\navailable [1] (read when march +crypto is selected).\n\nOkay for master?\n\nThanks\n\n  Andrea\n\n[1] <https://raw.githubusercontent.com/ARM-software/acle/main/main/acle.md>\n\ngcc/ChangeLog\n\n2022-09-14  Andrea Corallo  <andrea.corallo@arm.com>\n\n\t* config/arm/arm-c.cc (arm_cpu_builtins): Define\n\t__ARM_FEATURE_AES and __ARM_FEATURE_SHA2.\n\ngcc/testsuite/ChangeLog\n\n2022-09-14  Andrea Corallo  <andrea.corallo@arm.com>\n\n\t* gcc.target/arm/attr-crypto.c: Update test.", "tree": {"sha": "94837eae718ff631c6db58abbdff1d080e0646ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/94837eae718ff631c6db58abbdff1d080e0646ba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e9c4ed903c39f82f28362d9411d4dbc491264ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e9c4ed903c39f82f28362d9411d4dbc491264ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e9c4ed903c39f82f28362d9411d4dbc491264ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e9c4ed903c39f82f28362d9411d4dbc491264ec/comments", "author": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b48d7ff3570fa0ebe7790275cf020d8885120338", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b48d7ff3570fa0ebe7790275cf020d8885120338", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b48d7ff3570fa0ebe7790275cf020d8885120338"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "86c56bf26800e273a8b244ff68299db1ea16f43e", "filename": "gcc/config/arm/arm-c.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e9c4ed903c39f82f28362d9411d4dbc491264ec/gcc%2Fconfig%2Farm%2Farm-c.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e9c4ed903c39f82f28362d9411d4dbc491264ec/gcc%2Fconfig%2Farm%2Farm-c.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm-c.cc?ref=5e9c4ed903c39f82f28362d9411d4dbc491264ec", "patch": "@@ -202,6 +202,8 @@ arm_cpu_builtins (struct cpp_reader* pfile)\n   def_or_undef_macro (pfile, \"__ARM_FEATURE_QBIT\", TARGET_ARM_QBIT);\n   def_or_undef_macro (pfile, \"__ARM_FEATURE_SAT\", TARGET_ARM_SAT);\n   def_or_undef_macro (pfile, \"__ARM_FEATURE_CRYPTO\", TARGET_CRYPTO);\n+  def_or_undef_macro (pfile, \"__ARM_FEATURE_AES\", TARGET_CRYPTO);\n+  def_or_undef_macro (pfile, \"__ARM_FEATURE_SHA2\", TARGET_CRYPTO);\n \n   def_or_undef_macro (pfile, \"__ARM_FEATURE_UNALIGNED\", unaligned_access);\n "}, {"sha": "05e458f36b648880e8c777b8f11cf08a4ab37419", "filename": "gcc/testsuite/gcc.target/arm/attr-crypto.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e9c4ed903c39f82f28362d9411d4dbc491264ec/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr-crypto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e9c4ed903c39f82f28362d9411d4dbc491264ec/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr-crypto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr-crypto.c?ref=5e9c4ed903c39f82f28362d9411d4dbc491264ec", "patch": "@@ -16,6 +16,14 @@\n #error __ARM_FEATURE_CRYPTO not defined.\n #endif\n \n+#ifndef __ARM_FEATURE_AES\n+#error __ARM_FEATURE_AES not defined.\n+#endif\n+\n+#ifndef __ARM_FEATURE_SHA2\n+#error __ARM_FEATURE_SHA2 not defined.\n+#endif\n+\n #ifndef __ARM_NEON\n #error __ARM_NEON not defined.\n #endif"}]}