{"sha": "2dca20cd247a5502fc1fe2f0d1e63a29c3b92ae3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmRjYTIwY2QyNDdhNTUwMmZjMWZlMmYwZDFlNjNhMjljM2I5MmFlMw==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-08T04:58:24Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-08T04:58:24Z"}, "message": "(expand_expr, case VAR_DECL): If decl wasn't laid out,\n\nlay it out now, and fix the rtl's mode.\n\nFrom-SVN: r5671", "tree": {"sha": "90a890c8ae6ce46d546faf2b67d8776eba3a8104", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/90a890c8ae6ce46d546faf2b67d8776eba3a8104"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2dca20cd247a5502fc1fe2f0d1e63a29c3b92ae3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dca20cd247a5502fc1fe2f0d1e63a29c3b92ae3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2dca20cd247a5502fc1fe2f0d1e63a29c3b92ae3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dca20cd247a5502fc1fe2f0d1e63a29c3b92ae3/comments", "author": null, "committer": null, "parents": [{"sha": "20bf3fac14ef2e556787dd07199d45dbd813e31d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20bf3fac14ef2e556787dd07199d45dbd813e31d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/20bf3fac14ef2e556787dd07199d45dbd813e31d"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "0d01325046482313aeb89863b52955e8f5d63d18", "filename": "gcc/expr.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2dca20cd247a5502fc1fe2f0d1e63a29c3b92ae3/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2dca20cd247a5502fc1fe2f0d1e63a29c3b92ae3/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=2dca20cd247a5502fc1fe2f0d1e63a29c3b92ae3", "patch": "@@ -3681,8 +3681,19 @@ expand_expr (exp, target, tmode, modifier)\n \t  return CONST0_RTX (mode);\n \t}\n \n-    case FUNCTION_DECL:\n     case VAR_DECL:\n+      /* If a static var's type was incomplete when the decl was written,\n+\t but the type is complete now, lay out the decl now.  */\n+      if (DECL_SIZE (exp) == 0 && TYPE_SIZE (TREE_TYPE (exp)) != 0\n+\t  && (TREE_STATIC (exp) || DECL_EXTERNAL (exp)))\n+\t{\n+\t  push_obstacks_nochange ();\n+\t  end_temporary_allocation ();\n+\t  layout_decl (exp, 0);\n+\t  PUT_MODE (DECL_RTL (exp), DECL_MODE (exp));\n+\t  pop_obstacks ();\n+\t}\n+    case FUNCTION_DECL:\n     case RESULT_DECL:\n       if (DECL_RTL (exp) == 0)\n \tabort ();"}]}