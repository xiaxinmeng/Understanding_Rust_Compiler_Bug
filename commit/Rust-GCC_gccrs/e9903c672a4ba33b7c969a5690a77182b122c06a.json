{"sha": "e9903c672a4ba33b7c969a5690a77182b122c06a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTk5MDNjNjcyYTRiYTMzYjdjOTY5YTU2OTBhNzcxODJiMTIyYzA2YQ==", "commit": {"author": {"name": "Vladimir Prus", "email": "vladimir@codesourcery.com", "date": "2006-11-08T18:16:27Z"}, "committer": {"name": "Vladimir Prus", "email": "vprus@gcc.gnu.org", "date": "2006-11-08T18:16:27Z"}, "message": "pex-win32.c (no_suffixes): Remove.\n\n2006-11-08  Vladimir Prus  <vladimir@codesourcery.com>\n\n        * pex-win32.c (no_suffixes): Remove.\n        (std_suffixes): Add \"\" as first element.\n        (find_executable): Remove detection of already-present\n        extension. Try all suffixes in std_suffixes.\n\nFrom-SVN: r118595", "tree": {"sha": "1aa965afd8e6b4c76d2cee2014032af08434efbc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1aa965afd8e6b4c76d2cee2014032af08434efbc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e9903c672a4ba33b7c969a5690a77182b122c06a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9903c672a4ba33b7c969a5690a77182b122c06a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9903c672a4ba33b7c969a5690a77182b122c06a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9903c672a4ba33b7c969a5690a77182b122c06a/comments", "author": {"login": "vprus", "id": 225915, "node_id": "MDQ6VXNlcjIyNTkxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/225915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vprus", "html_url": "https://github.com/vprus", "followers_url": "https://api.github.com/users/vprus/followers", "following_url": "https://api.github.com/users/vprus/following{/other_user}", "gists_url": "https://api.github.com/users/vprus/gists{/gist_id}", "starred_url": "https://api.github.com/users/vprus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vprus/subscriptions", "organizations_url": "https://api.github.com/users/vprus/orgs", "repos_url": "https://api.github.com/users/vprus/repos", "events_url": "https://api.github.com/users/vprus/events{/privacy}", "received_events_url": "https://api.github.com/users/vprus/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5cdc4a2674ba9be28278e536a46c9f09c903cbee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cdc4a2674ba9be28278e536a46c9f09c903cbee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cdc4a2674ba9be28278e536a46c9f09c903cbee"}], "stats": {"total": 22, "additions": 15, "deletions": 7}, "files": [{"sha": "592954b3c47dac296891d2f493ec50e9d5a9f867", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9903c672a4ba33b7c969a5690a77182b122c06a/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9903c672a4ba33b7c969a5690a77182b122c06a/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=e9903c672a4ba33b7c969a5690a77182b122c06a", "patch": "@@ -1,3 +1,10 @@\n+2006-11-08  Vladimir Prus  <vladimir@codesourcery.com>\n+\n+\t* pex-win32.c (no_suffixes): Remove.\n+\t(std_suffixes): Add \"\" as first element.\n+\t(find_executable): Remove detection of already-present\n+\textension. Try all suffixes in std_suffixes.\n+\t\t\t\t\n 2006-11-07  Julian Brown  <julian@codesourcery.com>\n \n \t* floatformat.c (get_field): Fix segfault with little-endian word"}, {"sha": "ef9eb025caf63a8f3aa908423b6b73e75d06fff4", "filename": "libiberty/pex-win32.c", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9903c672a4ba33b7c969a5690a77182b122c06a/libiberty%2Fpex-win32.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9903c672a4ba33b7c969a5690a77182b122c06a/libiberty%2Fpex-win32.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fpex-win32.c?ref=e9903c672a4ba33b7c969a5690a77182b122c06a", "patch": "@@ -382,16 +382,18 @@ argv_to_cmdline (char *const *argv)\n   return cmdline;\n }\n \n+/* We'll try the passed filename with all the known standard\n+   extensions, and then without extension.  We try no extension\n+   last so that we don't try to run some random extension-less\n+   file that might be hanging around.  We try both extension\n+   and no extension so that we don't need any fancy logic\n+   to determine if a file has extension.  */\n static const char *const\n std_suffixes[] = {\n   \".com\",\n   \".exe\",\n   \".bat\",\n   \".cmd\",\n-  0\n-};\n-static const char *const\n-no_suffixes[] = {\n   \"\",\n   0\n };\n@@ -409,7 +411,6 @@ find_executable (const char *program, BOOL search)\n   const char *const *ext;\n   const char *p, *q;\n   size_t proglen = strlen (program);\n-  int has_extension = !!strchr (program, '.');\n   int has_slash = (strchr (program, '/') || strchr (program, '\\\\'));\n   HANDLE h;\n \n@@ -432,7 +433,7 @@ find_executable (const char *program, BOOL search)\n       if (*q == ';')\n \tq++;\n     }\n-  fe_len = fe_len + 1 + proglen + (has_extension ? 1 : 5);\n+  fe_len = fe_len + 1 + proglen + 5 /* space for extension */;\n   full_executable = XNEWVEC (char, fe_len);\n \n   p = path;\n@@ -458,7 +459,7 @@ find_executable (const char *program, BOOL search)\n \n       /* At this point, e points to the terminating NUL character for\n          full_executable.  */\n-      for (ext = has_extension ? no_suffixes : std_suffixes; *ext; ext++)\n+      for (ext = std_suffixes; *ext; ext++)\n \t{\n \t  /* Remove any current extension.  */\n \t  *e = '\\0';"}]}