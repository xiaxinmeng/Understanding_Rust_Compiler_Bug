{"sha": "84306176023e6f75c964d353ca4a8c7f28ba8da3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODQzMDYxNzYwMjNlNmY3NWM5NjRkMzUzY2E0YThjN2YyOGJhOGRhMw==", "commit": {"author": {"name": "Philip Blundell", "email": "pb@nexus.co.uk", "date": "1999-05-26T01:29:10Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-05-26T01:29:10Z"}, "message": "arm.h (NEED_PLT_GOT): Fix mistake in last change.\n\n\ufffd\n        * arm.h (NEED_PLT_GOT): Fix mistake in last change.\n        (GOT_PCREL): New macro.  Define to 1 if not already defined.\n        * arm/elf.h (GOT_PCREL): Define to 0.\n        * arm.c (arm_finalize_pic): Take into account the setting of\n        GOT_PCREL.\n\nFrom-SVN: r27156", "tree": {"sha": "22b6221b6ec100abee36001d1ef8b167281ad425", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/22b6221b6ec100abee36001d1ef8b167281ad425"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/84306176023e6f75c964d353ca4a8c7f28ba8da3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84306176023e6f75c964d353ca4a8c7f28ba8da3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84306176023e6f75c964d353ca4a8c7f28ba8da3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84306176023e6f75c964d353ca4a8c7f28ba8da3/comments", "author": null, "committer": null, "parents": [{"sha": "d238a2376dc0baff5a4bb0ed3a475e655402b6f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d238a2376dc0baff5a4bb0ed3a475e655402b6f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d238a2376dc0baff5a4bb0ed3a475e655402b6f1"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "9bd4023c4106f45c7f31c161132f909443b68ded", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84306176023e6f75c964d353ca4a8c7f28ba8da3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84306176023e6f75c964d353ca4a8c7f28ba8da3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=84306176023e6f75c964d353ca4a8c7f28ba8da3", "patch": "@@ -1,3 +1,11 @@\n+Wed May 26 02:19:31 1999  Philip Blundell  <pb@nexus.co.uk>\n+\n+\t* arm.h (NEED_PLT_GOT): Fix mistake in last change.\n+\t(GOT_PCREL): New macro.  Define to 1 if not already defined.\n+\t* arm/elf.h (GOT_PCREL): Define to 0.\n+\t* arm.c (arm_finalize_pic): Take into account the setting of\n+\tGOT_PCREL.\n+\n Tue May 25 14:06:06 1999  Jeffrey A Law  (law@cygnus.com)\n \n \t* output.h (STRIP_NAME_ENCODING): Provide default definition."}, {"sha": "eb18be781af59088495c54ab3af771cc022843f6", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84306176023e6f75c964d353ca4a8c7f28ba8da3/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84306176023e6f75c964d353ca4a8c7f28ba8da3/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=84306176023e6f75c964d353ca4a8c7f28ba8da3", "patch": "@@ -1566,8 +1566,11 @@ arm_finalize_pic ()\n   /* On the ARM the PC register contains 'dot + 8' at the time of the\n      addition.  */\n   pic_tmp = plus_constant (gen_rtx_LABEL_REF (Pmode, l1), 8);\n-  pic_tmp2 = gen_rtx_CONST (VOIDmode,\n+  if (GOT_PCREL)\n+    pic_tmp2 = gen_rtx_CONST (VOIDmode,\n \t\t\t    gen_rtx_PLUS (Pmode, global_offset_table, pc_rtx));\n+  else\n+    pic_tmp2 = gen_rtx_CONST (VOIDmode, global_offset_table);\n \n   pic_rtx = gen_rtx_CONST (Pmode, gen_rtx_MINUS (Pmode, pic_tmp2, pic_tmp));\n   "}, {"sha": "87a141aa174dc6ff4c45dc8a4b0fca9fd69e82b9", "filename": "gcc/config/arm/arm.h", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84306176023e6f75c964d353ca4a8c7f28ba8da3/gcc%2Fconfig%2Farm%2Farm.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84306176023e6f75c964d353ca4a8c7f28ba8da3/gcc%2Fconfig%2Farm%2Farm.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.h?ref=84306176023e6f75c964d353ca4a8c7f28ba8da3", "patch": "@@ -483,6 +483,21 @@ extern int arm_is_6_or_7;\n #ifndef NEED_PLT_GOT\n #define NEED_PLT_GOT\t0\n #endif\n+\n+/* Nonzero if we need to refer to the GOT with a PC-relative\n+   offset.  In other words, generate\n+\n+   .word\t_GLOBAL_OFFSET_TABLE_ - [. - (.Lxx + 8)]  \n+\n+   rather than\n+\n+   .word\t_GLOBAL_OFFSET_TABLE_ - (.Lxx + 8)\n+\n+   The default is true, which matches NetBSD.  Subtargets can \n+   override this if required.  */\n+#ifndef GOT_PCREL\n+#define GOT_PCREL   1\n+#endif\n \f\n /* Target machine storage Layout.  */\n "}, {"sha": "b282004d77d9ec9119805a98f814124da7ec11f8", "filename": "gcc/config/arm/elf.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84306176023e6f75c964d353ca4a8c7f28ba8da3/gcc%2Fconfig%2Farm%2Felf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84306176023e6f75c964d353ca4a8c7f28ba8da3/gcc%2Fconfig%2Farm%2Felf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Felf.h?ref=84306176023e6f75c964d353ca4a8c7f28ba8da3", "patch": "@@ -338,4 +338,7 @@ do {\t\t\t\t\t\t\\\n /* For PIC code we need to explicitly specify (PLT) and (GOT) relocs.  */\n #define NEED_PLT_GOT\tflag_pic\n \n+/* The ELF assembler handles GOT addressing differently to NetBSD.  */\n+#define GOT_PCREL\t0\n+\n #include \"arm/aout.h\""}]}