{"sha": "5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWVkYjFjNDhmOGU1MjZhMmI4ZjdmOWQwM2ZjZTlhN2ZkY2IxNGI4OA==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2017-07-31T08:54:05Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2017-07-31T08:54:05Z"}, "message": "Learn GIMPLE pretty printer to produce nicer dump output.\n\n2017-07-31  Martin Liska  <mliska@suse.cz>\n\n\t* gimple-pretty-print.c (dump_gimple_label): Never dump\n\tBB info.\n\t(dump_gimple_bb_header): Always dump BB info.\n\t(pp_cfg_jump): Do not append info about BB when dumping a jump.\n2017-07-31  Martin Liska  <mliska@suse.cz>\n\n\t* gcc.dg/builtin-unreachable-6.c: Update scanned patterns.\n\t* gcc.dg/tree-ssa/attr-hotcold-2.c: Likewise.\n\nFrom-SVN: r250731", "tree": {"sha": "1201645f0a06438d350f307006cd61246b1b0ecd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1201645f0a06438d350f307006cd61246b1b0ecd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f34ebeb25ef25e5937f60b7e6115c3f693a12ac3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f34ebeb25ef25e5937f60b7e6115c3f693a12ac3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f34ebeb25ef25e5937f60b7e6115c3f693a12ac3"}], "stats": {"total": 51, "additions": 22, "deletions": 29}, "files": [{"sha": "ef0147633323a096fce95684aa8e52d3a5715cff", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88", "patch": "@@ -1,3 +1,10 @@\n+2017-07-31  Martin Liska  <mliska@suse.cz>\n+\n+\t* gimple-pretty-print.c (dump_gimple_label): Never dump\n+\tBB info.\n+\t(dump_gimple_bb_header): Always dump BB info.\n+\t(pp_cfg_jump): Do not append info about BB when dumping a jump.\n+\n 2017-07-31  Martin Liska  <mliska@suse.cz>\n \n \tPR sanitize/81530"}, {"sha": "8b69b72e9e224ee8e1ad320fb6030b34637b83fb", "filename": "gcc/gimple-pretty-print.c", "status": "modified", "additions": 7, "deletions": 26, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88/gcc%2Fgimple-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88/gcc%2Fgimple-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-pretty-print.c?ref=5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88", "patch": "@@ -1120,9 +1120,6 @@ dump_gimple_label (pretty_printer *buffer, glabel *gs, int spc,\n   else\n     {\n       dump_generic_node (buffer, label, spc, flags, false);\n-      basic_block bb = gimple_bb (gs);\n-      if (bb && !(flags & TDF_GIMPLE))\n-\tpp_scalar (buffer, \" %s\", dump_profile (bb->frequency, bb->count));\n       pp_colon (buffer);\n     }\n   if (flags & TDF_GIMPLE)\n@@ -2695,16 +2692,12 @@ dump_gimple_bb_header (FILE *outf, basic_block bb, int indent,\n     }\n   else\n     {\n-      gimple *stmt = first_stmt (bb);\n-      if (!stmt || gimple_code (stmt) != GIMPLE_LABEL)\n-\t{\n-\t  if (flags & TDF_GIMPLE)\n-\t    fprintf (outf, \"%*sbb_%d:\\n\", indent, \"\", bb->index);\n-\t  else\n-\t    fprintf (outf, \"%*s<bb %d> %s:\\n\",\n-\t\t     indent, \"\", bb->index, dump_profile (bb->frequency,\n-\t\t\t\t\t\t\t  bb->count));\n-\t}\n+      if (flags & TDF_GIMPLE)\n+\tfprintf (outf, \"%*sbb_%d:\\n\", indent, \"\", bb->index);\n+      else\n+\tfprintf (outf, \"%*s<bb %d> %s:\\n\",\n+\t\t indent, \"\", bb->index, dump_profile (bb->frequency,\n+\t\t\t\t\t\t      bb->count));\n     }\n }\n \n@@ -2760,22 +2753,10 @@ pp_cfg_jump (pretty_printer *buffer, edge e, dump_flags_t flags)\n     }\n   else\n     {\n-      gimple *stmt = first_stmt (e->dest);\n-\n       pp_string (buffer, \"goto <bb \");\n       pp_decimal_int (buffer, e->dest->index);\n       pp_greater (buffer);\n-      if (stmt && gimple_code (stmt) == GIMPLE_LABEL)\n-\t{\n-\t  pp_string (buffer, \" (\");\n-\t  dump_generic_node (buffer,\n-\t\t\t     gimple_label_label (as_a <glabel *> (stmt)),\n-\t\t\t     0, 0, false);\n-\t  pp_right_paren (buffer);\n-\t  pp_semicolon (buffer);\n-\t}\n-      else\n-\tpp_semicolon (buffer);\n+      pp_semicolon (buffer);\n \n       dump_edge_probability (buffer, e);\n     }"}, {"sha": "f77d27ce53d12fa50ea9a7d45213dcc403a69e1d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88", "patch": "@@ -1,3 +1,8 @@\n+2017-07-31  Martin Liska  <mliska@suse.cz>\n+\n+\t* gcc.dg/builtin-unreachable-6.c: Update scanned patterns.\n+\t* gcc.dg/tree-ssa/attr-hotcold-2.c: Likewise.\n+\n 2017-07-31  Martin Liska  <mliska@suse.cz>\n \n \tPR sanitize/81530"}, {"sha": "2f8ca3695463fc6780d51c7f8f8db98e04a741dd", "filename": "gcc/testsuite/gcc.dg/builtin-unreachable-6.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-unreachable-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-unreachable-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-unreachable-6.c?ref=5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88", "patch": "@@ -16,5 +16,5 @@ foo (int b, int c)\n   goto *x;\n }\n \n-/* { dg-final { scan-tree-dump-times \"lab \\\\\\[\\[0-9.\\]+%\\\\\\]\" 1 \"fab1\" } } */\n+/* { dg-final { scan-tree-dump-times \"lab:\" 1 \"fab1\" } } */\n /* { dg-final { scan-tree-dump-times \"__builtin_unreachable\" 1 \"fab1\" } } */"}, {"sha": "5f7e3afa2ae6caeb9b784ed2e5966bf75a904faa", "filename": "gcc/testsuite/gcc.dg/tree-ssa/attr-hotcold-2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fattr-hotcold-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fattr-hotcold-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fattr-hotcold-2.c?ref=5edb1c48f8e526a2b8f7f9d03fce9a7fdcb14b88", "patch": "@@ -20,9 +20,9 @@ void f(int x, int y)\n \n /* { dg-final { scan-tree-dump-times \"hot label heuristics\" 1 \"profile_estimate\" } } */\n /* { dg-final { scan-tree-dump-times \"cold label heuristics\" 1 \"profile_estimate\" } } */\n-/* { dg-final { scan-tree-dump \"A \\\\\\[0\\\\\\..*\\\\\\]\" \"profile_estimate\" } } */\n+/* { dg-final { scan-tree-dump-times \"combined heuristics: 0\\\\\\..*\" 1 \"profile_estimate\" } } */\n \n /* Note: we're attempting to match some number > 6000, i.e. > 60%.\n    The exact number ought to be tweekable without having to juggle\n    the testcase around too much.  */\n-/* { dg-final { scan-tree-dump \"B \\\\\\[\\[6-9\\]\\[0-9\\]\\\\\\..*\\\\\\]\" \"profile_estimate\" } } */\n+/* { dg-final { scan-tree-dump-times \"combined heuristics: \\[6-9\\]\\[0-9\\]\\\\\\..*\" 1 \"profile_estimate\" } } */"}]}