{"sha": "3a1d601a2ab1aab5977603d8643f298910460f11", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2ExZDYwMWEyYWIxYWFiNTk3NzYwM2Q4NjQzZjI5ODkxMDQ2MGYxMQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2015-10-14T21:52:37Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2015-10-14T21:52:37Z"}, "message": "mips.h (MIPS_STACK_ALIGN): Implement using ROUND_UP macro.\n\n\t* config/mips/mips.h (MIPS_STACK_ALIGN): Implement using\n\tROUND_UP macro.\n\t* config/mips/mips.c (mips_setup_incoming_varargs): Use\n\tROUND_DOWN to calculate off.\n\t(mips_gimplify_va_arg_expr): Use ROUND_UP to calculate rsize.\n\t(mips_emit_probe_stack_range): Use ROUND_DOWN to calculate\n\trounded_size.\n\nFrom-SVN: r228829", "tree": {"sha": "2f08ddb0540104fa9edd3c69a3a9dd051761153b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f08ddb0540104fa9edd3c69a3a9dd051761153b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3a1d601a2ab1aab5977603d8643f298910460f11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a1d601a2ab1aab5977603d8643f298910460f11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a1d601a2ab1aab5977603d8643f298910460f11", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a1d601a2ab1aab5977603d8643f298910460f11/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "903eccd1d5e371d7a15e86595f7058eb178c0c04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/903eccd1d5e371d7a15e86595f7058eb178c0c04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/903eccd1d5e371d7a15e86595f7058eb178c0c04"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "30860c45647d27c1be8e5da04ea62e1978326711", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a1d601a2ab1aab5977603d8643f298910460f11/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a1d601a2ab1aab5977603d8643f298910460f11/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3a1d601a2ab1aab5977603d8643f298910460f11", "patch": "@@ -1,3 +1,13 @@\n+2015-10-14  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* config/mips/mips.h (MIPS_STACK_ALIGN): Implement using\n+\tROUND_UP macro.\n+\t* config/mips/mips.c (mips_setup_incoming_varargs): Use\n+\tROUND_DOWN to calculate off.\n+\t(mips_gimplify_va_arg_expr): Use ROUND_UP to calculate rsize.\n+\t(mips_emit_probe_stack_range): Use ROUND_DOWN to calculate\n+\trounded_size.\n+\n 2015-10-14  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gimplify.c (gimplify_addr_expr) <MEM_REF>: New case."}, {"sha": "521b587366958d31586060844140c6f4193ed51d", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a1d601a2ab1aab5977603d8643f298910460f11/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a1d601a2ab1aab5977603d8643f298910460f11/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=3a1d601a2ab1aab5977603d8643f298910460f11", "patch": "@@ -6080,7 +6080,7 @@ mips_setup_incoming_varargs (cumulative_args_t cum, machine_mode mode,\n \t  /* Set OFF to the offset from virtual_incoming_args_rtx of\n \t     the first float register.  The FP save area lies below\n \t     the integer one, and is aligned to UNITS_PER_FPVALUE bytes.  */\n-\t  off = (-gp_saved * UNITS_PER_WORD) & -UNITS_PER_FPVALUE;\n+\t  off = ROUND_DOWN (-gp_saved * UNITS_PER_WORD, UNITS_PER_FPVALUE);\n \t  off -= fp_saved * UNITS_PER_FPREG;\n \n \t  mode = TARGET_SINGLE_FLOAT ? SFmode : DFmode;\n@@ -6444,7 +6444,7 @@ mips_gimplify_va_arg_expr (tree valist, tree type, gimple_seq *pre_p,\n \t\t\tunshare_expr (valist), f_gtop, NULL_TREE);\n \t  off = build3 (COMPONENT_REF, TREE_TYPE (f_goff),\n \t\t\tunshare_expr (valist), f_goff, NULL_TREE);\n-\t  rsize = (size + UNITS_PER_WORD - 1) & -UNITS_PER_WORD;\n+\t  rsize = ROUND_UP (size, UNITS_PER_WORD);\n \t  if (rsize > UNITS_PER_WORD)\n \t    {\n \t      /* [1] Emit code for: off &= -rsize.\t*/\n@@ -11320,7 +11320,7 @@ mips_emit_probe_stack_range (HOST_WIDE_INT first, HOST_WIDE_INT size)\n \n       /* Step 1: round SIZE to the previous multiple of the interval.  */\n \n-      rounded_size = size & -PROBE_INTERVAL;\n+      rounded_size = ROUND_DOWN (size, PROBE_INTERVAL);\n \n \n       /* Step 2: compute initial and final value of the loop counter.  */"}, {"sha": "501d283845b67803afa5c82fde6cb379044b9a67", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a1d601a2ab1aab5977603d8643f298910460f11/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a1d601a2ab1aab5977603d8643f298910460f11/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=3a1d601a2ab1aab5977603d8643f298910460f11", "patch": "@@ -2486,7 +2486,7 @@ typedef struct mips_args {\n /* Treat LOC as a byte offset from the stack pointer and round it up\n    to the next fully-aligned offset.  */\n #define MIPS_STACK_ALIGN(LOC) \\\n-  (TARGET_NEWABI ? ((LOC) + 15) & -16 : ((LOC) + 7) & -8)\n+  (TARGET_NEWABI ? ROUND_UP ((LOC), 16) : ROUND_UP ((LOC), 8))\n \n \f\n /* Output assembler code to FILE to increment profiler label # LABELNO"}]}