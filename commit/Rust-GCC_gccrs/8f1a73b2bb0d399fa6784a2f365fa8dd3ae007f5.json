{"sha": "8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGYxYTczYjJiYjBkMzk5ZmE2Nzg0YTJmMzY1ZmE4ZGQzYWUwMDdmNQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2018-03-12T12:32:28Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2018-03-12T12:32:28Z"}, "message": "re PR tree-optimization/84803 (ICE from ifcvt_memrefs_wont_trap with -O3)\n\n2018-03-12  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/84803\n\t* tree-if-conv.c (ifcvt_memrefs_wont_trap): Don't do anything\n\tfor refs DR analysis didn't process.\n\n\t* gcc.dg/torture/pr84803.c: New testcase.\n\nFrom-SVN: r258446", "tree": {"sha": "015fba0e40c3335857cbad4936a92ccef81dd21c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/015fba0e40c3335857cbad4936a92ccef81dd21c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b270a5215a4ed5a99efa93ed34a98eab75fe13c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b270a5215a4ed5a99efa93ed34a98eab75fe13c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b270a5215a4ed5a99efa93ed34a98eab75fe13c7"}], "stats": {"total": 46, "additions": 46, "deletions": 0}, "files": [{"sha": "548de755bb7cfd984c191417af0baa6238c0993a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5", "patch": "@@ -1,3 +1,9 @@\n+2018-03-12  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/84803\n+\t* tree-if-conv.c (ifcvt_memrefs_wont_trap): Don't do anything\n+\tfor refs DR analysis didn't process.\n+\n 2018-03-12  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/84777"}, {"sha": "c13747ad1b69d601508346b26f99b5c3dbf58028", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5", "patch": "@@ -1,3 +1,8 @@\n+2018-03-12  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/84803\n+\t* gcc.dg/torture/pr84803.c: New testcase.\n+\n 2018-03-12  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/84813"}, {"sha": "81aad626d6c4cc4e509fcc88e8951106d919c2a0", "filename": "gcc/testsuite/gcc.dg/torture/pr84803.c", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr84803.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr84803.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr84803.c?ref=8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5", "patch": "@@ -0,0 +1,30 @@\n+/* { dg-do compile } */\n+\n+long a;\n+long *b;\n+void c ();\n+void d ();\n+void\n+e (long f)\n+{\n+  if (a)\n+    *b = f;\n+}\n+void\n+g ()\n+{\n+  c (g, e);\n+}\n+void\n+c (int f, int h ())\n+{\n+  d (f, h, \"\");\n+}\n+void\n+d (int f, int h (), char *i, char *k)\n+{\n+  int j;\n+  d (f, h, i + 1, k);\n+  while (--j)\n+    h (*i);\n+}"}, {"sha": "71dac4fb48a1c3f500affcf7bb66cc258c3d5b07", "filename": "gcc/tree-if-conv.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5/gcc%2Ftree-if-conv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5/gcc%2Ftree-if-conv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-if-conv.c?ref=8f1a73b2bb0d399fa6784a2f365fa8dd3ae007f5", "patch": "@@ -864,6 +864,11 @@ base_object_writable (tree ref)\n static bool\n ifcvt_memrefs_wont_trap (gimple *stmt, vec<data_reference_p> drs)\n {\n+  /* If DR didn't see a reference here we can't use it to tell\n+     whether the ref traps or not.  */\n+  if (gimple_uid (stmt) == 0)\n+    return false;\n+\n   data_reference_p *master_dr, *base_master_dr;\n   data_reference_p a = drs[gimple_uid (stmt) - 1];\n "}]}