{"sha": "fe6e61fb236e1ac764a7f044ae80ddf458e981a6", "node_id": "C_kwDOANBUbNoAKGZlNmU2MWZiMjM2ZTFhYzc2NGE3ZjA0NGFlODBkZGY0NThlOTgxYTY", "commit": {"author": {"name": "Gaius Mulley", "email": "gaiusmod2@gmail.com", "date": "2023-03-24T12:16:44Z"}, "committer": {"name": "Gaius Mulley", "email": "gaiusmod2@gmail.com", "date": "2023-03-24T12:16:44Z"}, "message": "modula2: Enable iso-extended-opaque-run-pass.exp to build library tests\n\nThis patch fixes the tcl test script iso-extended-opaque-run-pass.exp so\nthat the test library modules are built and included with the link command.\n\ngcc/testsuite/ChangeLog:\n\n\t* gm2/projects/iso/small/run/pass/iso-extended-opaque-run-pass.exp:\n\tCompile object for stressset.mod and testlib.mod.  Add test so\n\tthat we only link these\tobjects with test application objects.\n\nSigned-off-by: Gaius Mulley <gaiusmod2@gmail.com>", "tree": {"sha": "46152a1b593d7be0ce2d7ac60ceb6fa19c4edf96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/46152a1b593d7be0ce2d7ac60ceb6fa19c4edf96"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe6e61fb236e1ac764a7f044ae80ddf458e981a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe6e61fb236e1ac764a7f044ae80ddf458e981a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe6e61fb236e1ac764a7f044ae80ddf458e981a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe6e61fb236e1ac764a7f044ae80ddf458e981a6/comments", "author": null, "committer": null, "parents": [{"sha": "5450833e4f9993f81ac16cbbcf4e46881a519f85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5450833e4f9993f81ac16cbbcf4e46881a519f85", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5450833e4f9993f81ac16cbbcf4e46881a519f85"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "4669290befbd52e16bb71dbf6966c49a46001a8d", "filename": "gcc/testsuite/gm2/projects/iso/small/run/pass/iso-extended-opaque-run-pass.exp", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe6e61fb236e1ac764a7f044ae80ddf458e981a6/gcc%2Ftestsuite%2Fgm2%2Fprojects%2Fiso%2Fsmall%2Frun%2Fpass%2Fiso-extended-opaque-run-pass.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe6e61fb236e1ac764a7f044ae80ddf458e981a6/gcc%2Ftestsuite%2Fgm2%2Fprojects%2Fiso%2Fsmall%2Frun%2Fpass%2Fiso-extended-opaque-run-pass.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgm2%2Fprojects%2Fiso%2Fsmall%2Frun%2Fpass%2Fiso-extended-opaque-run-pass.exp?ref=fe6e61fb236e1ac764a7f044ae80ddf458e981a6", "patch": "@@ -25,16 +25,18 @@ if $tracelevel then {\n load_lib gm2-torture.exp\n \n gm2_init_iso \"${srcdir}/gm2/projects/iso/small/run/pass\"\n-gm2_link_obj testlib.o\n+gm2_link_obj \"testlib.o stressset.o\"\n \n foreach testcase [lsort [glob -nocomplain $srcdir/$subdir/*.mod]] {\n     # If we're only testing specific files and this isn't one of them, skip it.\n     if ![runtest_file_p $runtests $testcase] then {\n \tcontinue\n     }\n \n-    if { $testcase != \"$srcdir/$subdir/testlib.mod\" } {\n+    if { $testcase != \"$srcdir/$subdir/testlib.mod\" &&\n+\t $testcase != \"$srcdir/$subdir/stressset.mod\" } then {\n         gm2_target_compile $srcdir/$subdir/testlib.mod testlib.o object \"-g\"\n+        gm2_target_compile $srcdir/$subdir/stressset.mod stressset.o object \"-g\"\n \tgm2-torture-execute $testcase \"\" \"pass\"\n     }\n }"}]}