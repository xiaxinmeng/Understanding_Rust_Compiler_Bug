{"sha": "e03c52533a83e71475c4975ade1fc5ae96b4be53", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTAzYzUyNTMzYTgzZTcxNDc1YzQ5NzVhZGUxZmM1YWU5NmI0YmU1Mw==", "commit": {"author": {"name": "Vincent Celier", "email": "celier@adacore.com", "date": "2013-04-11T12:49:21Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2013-04-11T12:49:21Z"}, "message": "make.adb (Compile): Clarify the error message reported when gnatmake refuses to compile a runtime...\n\n2013-04-11  Vincent Celier  <celier@adacore.com>\n\n\t* make.adb (Compile): Clarify the error message reported\n\twhen gnatmake refuses to compile a runtime source.\n\t(Start_Compile_If_Possible): Ditto.\n\n2013-04-11  Vincent Celier  <celier@adacore.com>\n\n\t* gnat_ugn.texi: Add documentation about -gnatc and gnatmake.\n\nFrom-SVN: r197783", "tree": {"sha": "6fda737eaa79b6f84b8996e52f0d2d2b8e346abe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6fda737eaa79b6f84b8996e52f0d2d2b8e346abe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e03c52533a83e71475c4975ade1fc5ae96b4be53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e03c52533a83e71475c4975ade1fc5ae96b4be53", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e03c52533a83e71475c4975ade1fc5ae96b4be53", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e03c52533a83e71475c4975ade1fc5ae96b4be53/comments", "author": {"login": "vcelier", "id": 8888056, "node_id": "MDQ6VXNlcjg4ODgwNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8888056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcelier", "html_url": "https://github.com/vcelier", "followers_url": "https://api.github.com/users/vcelier/followers", "following_url": "https://api.github.com/users/vcelier/following{/other_user}", "gists_url": "https://api.github.com/users/vcelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcelier/subscriptions", "organizations_url": "https://api.github.com/users/vcelier/orgs", "repos_url": "https://api.github.com/users/vcelier/repos", "events_url": "https://api.github.com/users/vcelier/events{/privacy}", "received_events_url": "https://api.github.com/users/vcelier/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9f5b865addfa21a27fed3cff43599cce72011f47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f5b865addfa21a27fed3cff43599cce72011f47", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f5b865addfa21a27fed3cff43599cce72011f47"}], "stats": {"total": 90, "additions": 53, "deletions": 37}, "files": [{"sha": "56fa2a2590f686c2b18d1b64d4f9d2b0596b557f", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e03c52533a83e71475c4975ade1fc5ae96b4be53/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e03c52533a83e71475c4975ade1fc5ae96b4be53/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=e03c52533a83e71475c4975ade1fc5ae96b4be53", "patch": "@@ -1,3 +1,13 @@\n+2013-04-11  Vincent Celier  <celier@adacore.com>\n+\n+\t* make.adb (Compile): Clarify the error message reported\n+\twhen gnatmake refuses to compile a runtime source.\n+\t(Start_Compile_If_Possible): Ditto.\n+\n+2013-04-11  Vincent Celier  <celier@adacore.com>\n+\n+\t* gnat_ugn.texi: Add documentation about -gnatc and gnatmake.\n+\n 2013-04-11  Vincent Celier  <celier@adacore.com>\n \n \t* switch-c.adb: Document internal switches."}, {"sha": "dadf4d1ad275da975efedfbcec2b7412c8374f35", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e03c52533a83e71475c4975ade1fc5ae96b4be53/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e03c52533a83e71475c4975ade1fc5ae96b4be53/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=e03c52533a83e71475c4975ade1fc5ae96b4be53", "patch": "@@ -4153,7 +4153,15 @@ Assume no invalid (bad) values except for 'Valid attribute use\n \n @item -gnatc\n @cindex @option{-gnatc} (@command{gcc})\n-Check syntax and semantics only (no code generation attempted).\n+Check syntax and semantics only (no code generation attempted). When the\n+compiler is invoked by @command{gnatmake}, if the switch @option{-gnatc} is\n+only given to the compiler (after @option{-cargs} or in package Compiler of\n+the project file, @command{gnatmake} will fail because it will not find the\n+object file after compilation. If @command{gnatmake} is called with\n+@option{-gnatc} as a builder switch (before @option{-cargs} or in package\n+Builder of the project file) then @command{gnatmake} will not fail because\n+it will not look for the object files after compilation, and it will not try\n+to build and link.\n \n @item -gnatC\n @cindex @option{-gnatC} (@command{gcc})"}, {"sha": "56b7a7f1f64f88b34ae6e3dd43ddca775642592f", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 34, "deletions": 36, "changes": 70, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e03c52533a83e71475c4975ade1fc5ae96b4be53/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e03c52533a83e71475c4975ade1fc5ae96b4be53/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=e03c52533a83e71475c4975ade1fc5ae96b4be53", "patch": "@@ -1321,8 +1321,8 @@ package body Make is\n                      then\n                         Errutil.Error_Msg\n                           ('\"' & Argv &\n-                           \"\"\" is not a gnatmake switch. Consider moving \" &\n-                           \"it to Global_Compilation_Switches.\",\n+                           \"\"\" is not a gnatmake switch. Consider moving \"\n+                           & \"it to Global_Compilation_Switches.\",\n                            Element.Location);\n                         Make_Failed (\"*** illegal switch \"\"\" & Argv & \"\"\"\");\n                      end if;\n@@ -2982,8 +2982,8 @@ package body Make is\n                   Make_Failed\n                     (\"not allowed to compile \"\"\" &\n                      Get_Name_String (Fname) &\n-                     \"\"\"; use -a switch, or compile file with \" &\n-                     \"\"\"-gnatg\"\" switch\");\n+                     \"\"\"; use -a switch, or use the compiler directly with \"\n+                     & \"the \"\"-gnatg\"\" switch\");\n                end if;\n             end if;\n          end;\n@@ -3449,8 +3449,8 @@ package body Make is\n                   Fail\n                     (\"not allowed to compile \"\"\" &\n                      Get_Name_String (Source.File) &\n-                     \"\"\"; use -a switch, or compile file with \" &\n-                     \"\"\"-gnatg\"\" switch\");\n+                     \"\"\"; use -a switch, or use the compiler directly with \"\n+                     & \"the \"\"-gnatg\"\" switch\");\n                end if;\n \n                Verbose_Msg\n@@ -3841,7 +3841,7 @@ package body Make is\n          Last := 1;\n          Result (1) :=\n            new String'\n-                 (\"-gnatec=\" & Get_Name_String (For_Project.Config_File_Name));\n+             (\"-gnatec=\" & Get_Name_String (For_Project.Config_File_Name));\n \n       else\n          Temporary_Config_File := False;\n@@ -4233,8 +4233,7 @@ package body Make is\n                                    (Index).Library_Dir.Display_Name) &\n                           \"lib\" &\n                           Get_Name_String\n-                            (Library_Projs.Table\n-                               (Index).Library_Name) &\n+                            (Library_Projs.Table (Index).Library_Name) &\n                           \".\" &\n                           MLib.Tgt.Archive_Ext);\n \n@@ -4244,18 +4243,16 @@ package body Make is\n                      Linker_Switches.Increment_Last;\n                      Linker_Switches.Table (Linker_Switches.Last) :=\n                        new String'(\"-L\" &\n-                         Get_Name_String\n-                           (Library_Projs.Table (Index).\n-                              Library_Dir.Display_Name));\n+                         Get_Name_String (Library_Projs.Table (Index).\n+                                            Library_Dir.Display_Name));\n \n                      --  Add the -l switch\n \n                      Linker_Switches.Increment_Last;\n                      Linker_Switches.Table (Linker_Switches.Last) :=\n                        new String'(\"-l\" &\n                          Get_Name_String\n-                           (Library_Projs.Table (Index).\n-                              Library_Name));\n+                           (Library_Projs.Table (Index).Library_Name));\n                   end if;\n                end if;\n             end loop;\n@@ -5592,8 +5589,8 @@ package body Make is\n          --  No main program may be specified on the command line\n \n          elsif Osint.Number_Of_Files /= 0 then\n-            Make_Failed (\"-B cannot be used with a main specified on \" &\n-                         \"the command line\");\n+            Make_Failed\n+              (\"-B cannot be used with a main specified on the command line\");\n \n          --  And the project file cannot be a library project file\n \n@@ -5641,8 +5638,9 @@ package body Make is\n               and then not Unique_Compile\n               and then ((not Make_Steps) or else Bind_Only or else Link_Only)\n             then\n-               Make_Failed (\"cannot specify a main program \" &\n-                            \"on the command line for a library project file\");\n+               Make_Failed\n+                 (\"cannot specify a main program \"\n+                  & \"on the command line for a library project file\");\n             end if;\n \n          --  If no mains have been specified on the command line, and we are\n@@ -5652,8 +5650,8 @@ package body Make is\n \n          else\n             if Main_Index /= 0 then\n-               Make_Failed (\"cannot specify a multi-unit index but no main \" &\n-                            \"on the command line\");\n+               Make_Failed (\"cannot specify a multi-unit index but no main \"\n+                            & \"on the command line\");\n             end if;\n \n             declare\n@@ -5879,9 +5877,10 @@ package body Make is\n             Add_Switch\n               (\"-I\" &\n                Normalize_Directory_Name\n-               (Get_Primary_Src_Search_Directory.all).all,\n-               Compiler, Append_Switch => False,\n-               And_Save => False);\n+                 (Get_Primary_Src_Search_Directory.all).all,\n+                  Compiler,\n+                  Append_Switch => False,\n+                  And_Save      => False);\n \n          end if;\n \n@@ -6440,9 +6439,8 @@ package body Make is\n             if Prefix'Length > 0 then\n                declare\n                   PATH : constant String :=\n-                           Prefix & Directory_Separator & \"bin\" &\n-                           Path_Separator &\n-                           Getenv (\"PATH\").all;\n+                    Prefix & Directory_Separator & \"bin\" & Path_Separator &\n+                      Getenv (\"PATH\").all;\n                begin\n                   Setenv (\"PATH\", PATH);\n                end;\n@@ -7423,8 +7421,8 @@ package body Make is\n       elsif Program_Args = Linker\n         and then Argv = \"-o\"\n       then\n-         Make_Failed (\"switch -o not allowed within a -largs. \" &\n-                      \"Use -o directly.\");\n+         Make_Failed\n+           (\"switch -o not allowed within a -largs. Use -o directly.\");\n \n       --  Check to see if we are reading switches after a -cargs, -bargs or\n       --  -largs switch. If so, save it.\n@@ -7573,16 +7571,16 @@ package body Make is\n                   elsif Src_Path_Name = null\n                     and then Lib_Path_Name = null\n                   then\n-                     Make_Failed (\"RTS path not valid: missing \" &\n-                                  \"adainclude and adalib directories\");\n+                     Make_Failed (\"RTS path not valid: missing \"\n+                                  & \"adainclude and adalib directories\");\n \n                   elsif Src_Path_Name = null then\n-                     Make_Failed (\"RTS path not valid: missing adainclude \" &\n-                                  \"directory\");\n+                     Make_Failed (\"RTS path not valid: missing adainclude \"\n+                                  & \"directory\");\n \n                   elsif  Lib_Path_Name = null then\n-                     Make_Failed (\"RTS path not valid: missing adalib \" &\n-                                  \"directory\");\n+                     Make_Failed (\"RTS path not valid: missing adalib \"\n+                                  & \"directory\");\n                   end if;\n                end;\n             end if;\n@@ -7820,8 +7818,8 @@ package body Make is\n                --  or a -P switch inside a project file.\n \n                Fail\n-                 (\"either the tool is not \"\"project-aware\"\" or \" &\n-                  \"a project file is specified inside a project file\");\n+                 (\"either the tool is not \"\"project-aware\"\" or \"\n+                  & \"a project file is specified inside a project file\");\n \n             elsif Argv'Last = 2 then\n "}]}