{"sha": "ca9a9b12e9a59cf5b0652d4987a93239a14ab28d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2E5YTliMTJlOWE1OWNmNWIwNjUyZDQ5ODdhOTMyMzlhMTRhYjI4ZA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2001-02-14T00:15:15Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2001-02-14T00:15:15Z"}, "message": "i386.md (fixsfsi2, fixdfdi2): Fix previous patch again.\n\n\n\t* i386.md (fixsfsi2, fixdfdi2): Fix previous patch again.\n\t(sqrtsf2): Use TARGET_SSE instead of TARGET_SSE2)\n\t(sqrtsf2 patterns): Use 'x' instead of 'Y'.\n\t(sqrtextendsfdf2): Disable for SSE2.\n\nFrom-SVN: r39652", "tree": {"sha": "9345c1a1cb4118ee1263aea3796392c8a52d5987", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9345c1a1cb4118ee1263aea3796392c8a52d5987"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca9a9b12e9a59cf5b0652d4987a93239a14ab28d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca9a9b12e9a59cf5b0652d4987a93239a14ab28d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca9a9b12e9a59cf5b0652d4987a93239a14ab28d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca9a9b12e9a59cf5b0652d4987a93239a14ab28d/comments", "author": null, "committer": null, "parents": [{"sha": "94807d3318a6a63a3a0efe3419e6a402e77087bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94807d3318a6a63a3a0efe3419e6a402e77087bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94807d3318a6a63a3a0efe3419e6a402e77087bb"}], "stats": {"total": 32, "additions": 23, "deletions": 9}, "files": [{"sha": "006f4d25bb20d8faacaa9b2fa1cb8001af7ddd8b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca9a9b12e9a59cf5b0652d4987a93239a14ab28d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca9a9b12e9a59cf5b0652d4987a93239a14ab28d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ca9a9b12e9a59cf5b0652d4987a93239a14ab28d", "patch": "@@ -1,3 +1,17 @@\n+Wed Feb 14 01:13:59 CET 2001  Jan Hubicka  <jh@suse.cz>\n+\n+\t* i386.md (fixsfsi2, fixdfdi2): Fix previous patch again.\n+\t(sqrtsf2): Use TARGET_SSE instead of TARGET_SSE2)\n+\t(sqrtsf2 patterns): Use 'x' instead of 'Y'.\n+\t(sqrtextendsfdf2): Disable for SSE2.\n+\n+Wed Feb 14 00:19:28 CET 2001  Jan Hubicka  <jh@suse.cz>\n+\n+\t* i386.md (fixsfsi2, fixdfdi2): Fix previous patch again.\n+\t(sqrtsf2): Use TARGET_SSE instead of TARGET_SSE2)\n+\t(sqrtsf2 patterns): Use 'x' instead of 'Y'.\n+\t(sqrtextendsfdf2): Disable for SSE2.\n+\n Wed Feb 14 00:11:20 CET 2001  Jan Hubicka  <jh@suse.cz>\n \n \t* i386.md (movsfcc_1): Support integer cmove instruction."}, {"sha": "acd709ca678a7ad90f5cc736e646f9543bc43b4c", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca9a9b12e9a59cf5b0652d4987a93239a14ab28d/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca9a9b12e9a59cf5b0652d4987a93239a14ab28d/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=ca9a9b12e9a59cf5b0652d4987a93239a14ab28d", "patch": "@@ -4097,7 +4097,7 @@\n {\n   if (TARGET_SSE2)\n    {\n-     rtx out = force_reg (SImode, operands[0]);\n+     rtx out = REG_P (operands[0]) ? operands[0] : gen_reg_rtx (SImode);\n      emit_insn (gen_fix_truncdfsi_sse (out, operands[1]));\n      if (out != operands[0])\n \temit_move_insn (operands[0], out);\n@@ -4121,7 +4121,7 @@\n {\n   if (TARGET_SSE2)\n    {\n-     rtx out = force_reg (SImode, operands[0]);\n+     rtx out = REG_P (operands[0]) ? operands[0] : gen_reg_rtx (SImode);\n      emit_insn (gen_fix_truncdfsi_sse (out, operands[1]));\n      if (out != operands[0])\n \temit_move_insn (operands[0], out);\n@@ -10860,7 +10860,7 @@\n   operands[4] = ix86_force_to_memory (GET_MODE (operands[2]), operands[2]);\n   operands[4] = gen_rtx_FLOAT (GET_MODE (operands[0]), operands[4]);\n   emit_insn (gen_rtx_SET (VOIDmode, operands[0],\n-\t\t\t  gen_rtx_fmt_ee (GET_CODE (operands[3]),\n+\t\t\t  gen_rtx_fmt_ee (GET_CODE (operands[5]),\n \t\t\t\t\t  GET_MODE (operands[3]),\n \t\t\t\t\t  operands[1],\n \t\t\t\t\t  operands[4])));\n@@ -10873,16 +10873,16 @@\n (define_expand \"sqrtsf2\"\n   [(set (match_operand:SF 0 \"register_operand\" \"\")\n \t(sqrt:SF (match_operand:SF 1 \"nonimmediate_operand\" \"\")))]\n-  \"(! TARGET_NO_FANCY_MATH_387 && TARGET_80387) || TARGET_SSE2\"\n+  \"(! TARGET_NO_FANCY_MATH_387 && TARGET_80387) || TARGET_SSE\"\n   \"\n {\n   if (!TARGET_SSE)\n     operands[1] = force_reg (SFmode, operands[1]);\n }\")\n \n (define_insn \"sqrtsf2_1\"\n-  [(set (match_operand:SF 0 \"register_operand\" \"=f#Y,Y#f\")\n-\t(sqrt:SF (match_operand:SF 1 \"nonimmediate_operand\" \"0#Y,Ym#f\")))]\n+  [(set (match_operand:SF 0 \"register_operand\" \"=f#x,x#f\")\n+\t(sqrt:SF (match_operand:SF 1 \"nonimmediate_operand\" \"0#x,xm#f\")))]\n   \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n    && (TARGET_SSE && TARGET_MIX_SSE_I387)\"\n   \"@\n@@ -10893,8 +10893,8 @@\n    (set_attr \"athlon_decode\" \"direct,*\")])\n \n (define_insn \"sqrtsf2_1_sse_only\"\n-  [(set (match_operand:SF 0 \"register_operand\" \"=Y\")\n-\t(sqrt:SF (match_operand:SF 1 \"nonimmediate_operand\" \"Ym\")))]\n+  [(set (match_operand:SF 0 \"register_operand\" \"=x\")\n+\t(sqrt:SF (match_operand:SF 1 \"nonimmediate_operand\" \"xm\")))]\n   \"TARGET_SSE && (!TARGET_80387 || !TARGET_MIX_SSE_I387)\"\n   \"sqrtss\\\\t{%1, %0|%0, %1}\"\n   [(set_attr \"type\" \"sse\")\n@@ -10956,7 +10956,7 @@\n   [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n \t(sqrt:DF (float_extend:DF\n \t\t  (match_operand:SF 1 \"register_operand\" \"0\"))))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\"\n+  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 && !TARGET_SSE2\"\n   \"fsqrt\"\n   [(set_attr \"type\" \"fpspc\")\n    (set_attr \"mode\" \"DF\")"}]}