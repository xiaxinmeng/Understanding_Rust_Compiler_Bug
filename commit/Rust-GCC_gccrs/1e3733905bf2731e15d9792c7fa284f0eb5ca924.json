{"sha": "1e3733905bf2731e15d9792c7fa284f0eb5ca924", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWUzNzMzOTA1YmYyNzMxZTE1ZDk3OTJjN2ZhMjg0ZjBlYjVjYTkyNA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2012-05-07T08:48:44Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2012-05-07T08:48:44Z"}, "message": "tree-ssa-loop-prefetch.c (determine_loop_nest_reuse): Return whether we failed to compute data dependences.\n\n2012-05-07  Richard Guenther  <rguenther@suse.de>\n\n\t* tree-ssa-loop-prefetch.c (determine_loop_nest_reuse): Return\n\twhether we failed to compute data dependences.\n\t(loop_prefetch_arrays): Fail if we failed.\n\nFrom-SVN: r187227", "tree": {"sha": "1cf80fdb678240c3bfe2c2d0fef301b27d208b02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1cf80fdb678240c3bfe2c2d0fef301b27d208b02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e3733905bf2731e15d9792c7fa284f0eb5ca924", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e3733905bf2731e15d9792c7fa284f0eb5ca924", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e3733905bf2731e15d9792c7fa284f0eb5ca924", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e3733905bf2731e15d9792c7fa284f0eb5ca924/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e3a2ec56bc0b746311ed9a705eeef1f59e3e5a16", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3a2ec56bc0b746311ed9a705eeef1f59e3e5a16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3a2ec56bc0b746311ed9a705eeef1f59e3e5a16"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "63179624942e982bc6e1bae92ed7394a2c5bead1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e3733905bf2731e15d9792c7fa284f0eb5ca924/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e3733905bf2731e15d9792c7fa284f0eb5ca924/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1e3733905bf2731e15d9792c7fa284f0eb5ca924", "patch": "@@ -1,3 +1,9 @@\n+2012-05-07  Richard Guenther  <rguenther@suse.de>\n+\n+\t* tree-ssa-loop-prefetch.c (determine_loop_nest_reuse): Return\n+\twhether we failed to compute data dependences.\n+\t(loop_prefetch_arrays): Fail if we failed.\n+\n 2012-05-07  Uros Bizjak  <ubizjak@gmail.com>\n \t    Paolo Bonzini  <bonzini@gnu.org>\n "}, {"sha": "00f30a1f31b4d631b4ce3a2c660ddfd7c323401e", "filename": "gcc/tree-ssa-loop-prefetch.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e3733905bf2731e15d9792c7fa284f0eb5ca924/gcc%2Ftree-ssa-loop-prefetch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e3733905bf2731e15d9792c7fa284f0eb5ca924/gcc%2Ftree-ssa-loop-prefetch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-prefetch.c?ref=1e3733905bf2731e15d9792c7fa284f0eb5ca924", "patch": "@@ -1495,9 +1495,9 @@ self_reuse_distance (data_reference_p dr, unsigned *loop_sizes, unsigned n,\n \n /* Determines the distance till the first reuse of each reference in REFS\n    in the loop nest of LOOP.  NO_OTHER_REFS is true if there are no other\n-   memory references in the loop.  */\n+   memory references in the loop.  Return false if the analysis fails.  */\n \n-static void\n+static bool\n determine_loop_nest_reuse (struct loop *loop, struct mem_ref_group *refs,\n \t\t\t   bool no_other_refs)\n {\n@@ -1515,7 +1515,7 @@ determine_loop_nest_reuse (struct loop *loop, struct mem_ref_group *refs,\n   ddr_p dep;\n \n   if (loop->inner)\n-    return;\n+    return true;\n \n   /* Find the outermost loop of the loop nest of loop (we require that\n      there are no sibling loops inside the nest).  */\n@@ -1585,7 +1585,8 @@ determine_loop_nest_reuse (struct loop *loop, struct mem_ref_group *refs,\n \tref->independent_p = true;\n     }\n \n-  compute_all_dependences (datarefs, &dependences, vloops, true);\n+  if (!compute_all_dependences (datarefs, &dependences, vloops, true))\n+    return false;\n \n   FOR_EACH_VEC_ELT (ddr_p, dependences, i, dep)\n     {\n@@ -1664,6 +1665,8 @@ determine_loop_nest_reuse (struct loop *loop, struct mem_ref_group *refs,\n \t  fprintf (dump_file, \" ref %p distance %u\\n\",\n \t\t   (void *) ref, ref->reuse_distance);\n     }\n+\n+  return true;\n }\n \n /* Determine whether or not the trip count to ahead ratio is too small based\n@@ -1826,7 +1829,8 @@ loop_prefetch_arrays (struct loop *loop)\n   if (nothing_to_prefetch_p (refs))\n     goto fail;\n \n-  determine_loop_nest_reuse (loop, refs, no_other_refs);\n+  if (!determine_loop_nest_reuse (loop, refs, no_other_refs))\n+    goto fail;\n \n   /* Step 3: determine unroll factor.  */\n   unroll_factor = determine_unroll_factor (loop, refs, ninsns, &desc,"}]}