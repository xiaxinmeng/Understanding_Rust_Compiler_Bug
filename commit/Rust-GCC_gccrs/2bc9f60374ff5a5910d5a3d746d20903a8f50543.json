{"sha": "2bc9f60374ff5a5910d5a3d746d20903a8f50543", "node_id": "C_kwDOANBUbNoAKDJiYzlmNjAzNzRmZjVhNTkxMGQ1YTNkNzQ2ZDIwOTAzYThmNTA1NDM", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2023-04-11T06:47:24Z"}, "committer": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2023-04-11T07:36:25Z"}, "message": "Placate clang-format, 'gcc/rust/rust-lang.cc:grs_langhook_type_for_mode'\n\nYesterday's commit 3757e8d71794cece4a5c9d08245b7ad111044853\n\"Merge commit '6baa95c9c5b3fea96fd22d03d961db4e4cf48d88' into HEAD [#2112]\"\nbrought in the #1713 change from GCC upstream master branch that broke the\nrules (via code copied verbatim from elsehwhere in GCC).\n\n\tgcc/rust/\n\t* rust-lang.cc (grs_langhook_type_for_mode): Placate clang-format.", "tree": {"sha": "748111fecab7377f66b2306d75b0fccd49492a9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/748111fecab7377f66b2306d75b0fccd49492a9d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2bc9f60374ff5a5910d5a3d746d20903a8f50543", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bc9f60374ff5a5910d5a3d746d20903a8f50543", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2bc9f60374ff5a5910d5a3d746d20903a8f50543", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bc9f60374ff5a5910d5a3d746d20903a8f50543/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3757e8d71794cece4a5c9d08245b7ad111044853", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3757e8d71794cece4a5c9d08245b7ad111044853", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3757e8d71794cece4a5c9d08245b7ad111044853"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "f3532298aecc815fd242bcf8330beb25c6fa7946", "filename": "gcc/rust/rust-lang.cc", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bc9f60374ff5a5910d5a3d746d20903a8f50543/gcc%2Frust%2Frust-lang.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bc9f60374ff5a5910d5a3d746d20903a8f50543/gcc%2Frust%2Frust-lang.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Frust-lang.cc?ref=2bc9f60374ff5a5910d5a3d746d20903a8f50543", "patch": "@@ -236,16 +236,16 @@ grs_langhook_type_for_mode (machine_mode mode, int unsignedp)\n   /* See (a) <https://github.com/Rust-GCC/gccrs/issues/1713>\n      \"Test failure on msp430-elfbare target\", and\n      (b) <https://gcc.gnu.org/PR46805>\n-     \"ICE: SIGSEGV in optab_for_tree_code (optabs.c:407) with -O -fno-tree-scev-cprop -ftree-vectorize\"\n+     \"ICE: SIGSEGV in optab_for_tree_code (optabs.c:407) with -O\n+     -fno-tree-scev-cprop -ftree-vectorize\"\n      -- we have to support \"random\" modes/types here.\n      TODO Clean all this up (either locally, or preferably per PR46805:\n-     \"Ideally we'd never use lang_hooks.types.type_for_mode (or _for_size) in the\n-     middle-end but had a pure middle-end based implementation\".  */\n-  for (size_t i = 0; i < NUM_INT_N_ENTS; i ++)\n-    if (int_n_enabled_p[i]\n-\t&& mode == int_n_data[i].m)\n+     \"Ideally we'd never use lang_hooks.types.type_for_mode (or _for_size) in\n+     the middle-end but had a pure middle-end based implementation\".  */\n+  for (size_t i = 0; i < NUM_INT_N_ENTS; i++)\n+    if (int_n_enabled_p[i] && mode == int_n_data[i].m)\n       return (unsignedp ? int_n_trees[i].unsigned_type\n-\t      : int_n_trees[i].signed_type);\n+\t\t\t: int_n_trees[i].signed_type);\n \n   /* gcc_unreachable */\n   return NULL;"}]}