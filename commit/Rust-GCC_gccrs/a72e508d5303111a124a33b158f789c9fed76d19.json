{"sha": "a72e508d5303111a124a33b158f789c9fed76d19", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTcyZTUwOGQ1MzAzMTExYTEyNGEzM2IxNThmNzg5YzlmZWQ3NmQxOQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-06-19T20:52:51Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-06-19T20:52:51Z"}, "message": "Initial revision\n\nFrom-SVN: r10011", "tree": {"sha": "3dabbc83b3c220d83b0fb012167bfda4119eefde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3dabbc83b3c220d83b0fb012167bfda4119eefde"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a72e508d5303111a124a33b158f789c9fed76d19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a72e508d5303111a124a33b158f789c9fed76d19", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a72e508d5303111a124a33b158f789c9fed76d19", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a72e508d5303111a124a33b158f789c9fed76d19/comments", "author": null, "committer": null, "parents": [{"sha": "0887bd4b9a63058079f577fa0471a78fbc971fd2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0887bd4b9a63058079f577fa0471a78fbc971fd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0887bd4b9a63058079f577fa0471a78fbc971fd2"}], "stats": {"total": 73, "additions": 73, "deletions": 0}, "files": [{"sha": "1b5ace18bf2dd1f68734fa1cf8d66de2c6354306", "filename": "gcc/config/winnt/spawnv.c", "status": "added", "additions": 73, "deletions": 0, "changes": 73, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a72e508d5303111a124a33b158f789c9fed76d19/gcc%2Fconfig%2Fwinnt%2Fspawnv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a72e508d5303111a124a33b158f789c9fed76d19/gcc%2Fconfig%2Fwinnt%2Fspawnv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fwinnt%2Fspawnv.c?ref=a72e508d5303111a124a33b158f789c9fed76d19", "patch": "@@ -0,0 +1,73 @@\n+/* This is a kludge to get around the Microsoft C spawn functions' propensity\n+   to remove the outermost set of double quotes from all arguements.  */\n+\n+\n+#define index(s,c) strchr((s),(c))\n+\n+extern char *xmalloc ();\n+\n+const char * const *\n+fix_argv (argv)\n+  char **argv;\n+{\n+  static char sh_chars[] = \"\\\"\";\n+\n+  int i, len;\n+  char *new_argv;\n+  char *p, *ap;\n+\n+  for (i=1; argv[i]; i++)\n+    {\n+\n+      len = strlen (argv[i]);\n+      new_argv = xmalloc (2*len+3);\n+      ap = new_argv;\n+      *ap++ = '\"';\n+\n+      for (p = argv[i]; *p != '\\0'; ++p)\n+        {\n+          if (index (sh_chars, *p) != 0)\n+            *ap++ = '\\\\';\n+          *ap++ = *p;\n+        }\n+      *ap++ = '\"';\n+      *ap = '\\0';\n+      argv[i] = new_argv;\n+    }\n+\n+    return (const char * const *) argv;\n+}\n+\n+int spawnv (mode, cmdname, argv)\n+  int mode;\n+  const char *cmdname;\n+  char **argv;\n+{\n+  _spawnv (mode, cmdname, fix_argv (argv));\n+}\n+\n+int spawnvp (mode, cmdname, argv)\n+  int mode;\n+  const char *cmdname;\n+  char **argv;\n+{\n+  _spawnvp (mode, cmdname, fix_argv (argv));\n+}\n+\n+int spawnve (mode, cmdname, argv, envp)\n+  int mode;\n+  const char *cmdname;\n+  char **argv;\n+  const char *const *envp;\n+{\n+  _spawnve (mode, cmdname, fix_argv (argv), envp);\n+}\n+\n+int spawnvpe (mode, cmdname, argv, envp)\n+  int mode;\n+  const char *cmdname;\n+  char **argv;\n+  const char *const *envp;\n+{\n+  _spawnvpe (mode, cmdname, fix_argv (argv), envp);\n+}"}]}