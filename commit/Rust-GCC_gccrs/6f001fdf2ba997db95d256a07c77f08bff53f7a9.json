{"sha": "6f001fdf2ba997db95d256a07c77f08bff53f7a9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmYwMDFmZGYyYmE5OTdkYjk1ZDI1NmEwN2M3N2YwOGJmZjUzZjdhOQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2002-05-23T05:14:02Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-05-23T05:14:02Z"}, "message": "varasm.c (default_section_type_flags): Check for VAR_DECL before using DECL_THREAD_LOCAL.\n\n        * varasm.c (default_section_type_flags): Check for VAR_DECL\n        before using DECL_THREAD_LOCAL.\n\n        * decl.c (obscure_complex_init): Check for VAR_DECL\n        before using DECL_THREAD_LOCAL.\n\nFrom-SVN: r53761", "tree": {"sha": "a95c355c9b7d6dc672c09986b98412c015285a30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a95c355c9b7d6dc672c09986b98412c015285a30"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f001fdf2ba997db95d256a07c77f08bff53f7a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f001fdf2ba997db95d256a07c77f08bff53f7a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f001fdf2ba997db95d256a07c77f08bff53f7a9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f001fdf2ba997db95d256a07c77f08bff53f7a9/comments", "author": null, "committer": null, "parents": [{"sha": "a70b54fd5610476c8d0e0b78c10af9f495dd42e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a70b54fd5610476c8d0e0b78c10af9f495dd42e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a70b54fd5610476c8d0e0b78c10af9f495dd42e2"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "7225f3915d0d952a30c67c654d74fc63e17e44d8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f001fdf2ba997db95d256a07c77f08bff53f7a9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f001fdf2ba997db95d256a07c77f08bff53f7a9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6f001fdf2ba997db95d256a07c77f08bff53f7a9", "patch": "@@ -1,3 +1,8 @@\n+2002-05-22  Richard Henderson  <rth@redhat.com>\n+\n+\t* varasm.c (default_section_type_flags): Check for VAR_DECL\n+\tbefore using DECL_THREAD_LOCAL.\n+\n 2002-05-22  David Edelsohn  <edelsohn@gnu.org>\n \n \t* config/rs6000/aix43.h (LINK_SPEC): Add PE initializer."}, {"sha": "346add8059c8fd4847894550935d79ba7e75a473", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f001fdf2ba997db95d256a07c77f08bff53f7a9/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f001fdf2ba997db95d256a07c77f08bff53f7a9/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6f001fdf2ba997db95d256a07c77f08bff53f7a9", "patch": "@@ -1,3 +1,8 @@\n+2002-05-22  Richard Henderson  <rth@redhat.com>\n+\n+\t* decl.c (obscure_complex_init): Check for VAR_DECL\n+\tbefore using DECL_THREAD_LOCAL.\n+\n 2002-05-22  Richard Henderson  <rth@redhat.com>\n \n \t* decl.c (check_tag_decl): Handle RID_THREAD."}, {"sha": "dbaf68548c13e57f55c4a1762cc3535d279a5698", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f001fdf2ba997db95d256a07c77f08bff53f7a9/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f001fdf2ba997db95d256a07c77f08bff53f7a9/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=6f001fdf2ba997db95d256a07c77f08bff53f7a9", "patch": "@@ -7581,7 +7581,7 @@ static tree\n obscure_complex_init (decl, init)\n      tree decl, init;\n {\n-  if (DECL_THREAD_LOCAL (decl))\n+  if (TREE_CODE (decl) == VAR_DECL && DECL_THREAD_LOCAL (decl))\n     {\n       error (\"run-time initialization of thread-local storage\");\n       return NULL_TREE;"}, {"sha": "a055bbf0010a73955d8a80f5ca5d35d71c02ef3c", "filename": "gcc/varasm.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f001fdf2ba997db95d256a07c77f08bff53f7a9/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f001fdf2ba997db95d256a07c77f08bff53f7a9/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=6f001fdf2ba997db95d256a07c77f08bff53f7a9", "patch": "@@ -5105,7 +5105,7 @@ default_section_type_flags (decl, name, reloc)\n   if (decl && DECL_ONE_ONLY (decl))\n     flags |= SECTION_LINKONCE;\n \n-  if (decl && DECL_THREAD_LOCAL (decl))\n+  if (decl && TREE_CODE (decl) == VAR_DECL && DECL_THREAD_LOCAL (decl))\n     flags |= SECTION_TLS | SECTION_WRITE;\n \n   if (strcmp (name, \".bss\") == 0"}]}