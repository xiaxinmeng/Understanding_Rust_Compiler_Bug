{"sha": "613a6fca75156aadc2e79d78a23e547d39762c1e", "node_id": "C_kwDOANBUbNoAKDYxM2E2ZmNhNzUxNTZhYWRjMmU3OWQ3OGEyM2U1NDdkMzk3NjJjMWU", "commit": {"author": {"name": "Indu Bhagat", "email": "indu.bhagat@oracle.com", "date": "2022-04-14T17:00:25Z"}, "committer": {"name": "Indu Bhagat", "email": "indu.bhagat@oracle.com", "date": "2022-04-14T17:00:25Z"}, "message": "ctfc: get rid of the static variable in ctf_list_add_ctf_vars ()\n\n2022-04-14  Indu Bhagat  <indu.bhagat@oracle.com>\n\ngcc/ChangeLog:\n\n\t* ctfc.h (struct ctf_container): Introduce a new member.\n\t* ctfout.cc (ctf_list_add_ctf_vars): Use it instead of static\n\tvariable.", "tree": {"sha": "7746f8b711c23e0682e84f9f59c47fa67587c979", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7746f8b711c23e0682e84f9f59c47fa67587c979"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/613a6fca75156aadc2e79d78a23e547d39762c1e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/613a6fca75156aadc2e79d78a23e547d39762c1e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/613a6fca75156aadc2e79d78a23e547d39762c1e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/613a6fca75156aadc2e79d78a23e547d39762c1e/comments", "author": {"login": "ibhagatgnu", "id": 51812649, "node_id": "MDQ6VXNlcjUxODEyNjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/51812649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibhagatgnu", "html_url": "https://github.com/ibhagatgnu", "followers_url": "https://api.github.com/users/ibhagatgnu/followers", "following_url": "https://api.github.com/users/ibhagatgnu/following{/other_user}", "gists_url": "https://api.github.com/users/ibhagatgnu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibhagatgnu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibhagatgnu/subscriptions", "organizations_url": "https://api.github.com/users/ibhagatgnu/orgs", "repos_url": "https://api.github.com/users/ibhagatgnu/repos", "events_url": "https://api.github.com/users/ibhagatgnu/events{/privacy}", "received_events_url": "https://api.github.com/users/ibhagatgnu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibhagatgnu", "id": 51812649, "node_id": "MDQ6VXNlcjUxODEyNjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/51812649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibhagatgnu", "html_url": "https://github.com/ibhagatgnu", "followers_url": "https://api.github.com/users/ibhagatgnu/followers", "following_url": "https://api.github.com/users/ibhagatgnu/following{/other_user}", "gists_url": "https://api.github.com/users/ibhagatgnu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibhagatgnu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibhagatgnu/subscriptions", "organizations_url": "https://api.github.com/users/ibhagatgnu/orgs", "repos_url": "https://api.github.com/users/ibhagatgnu/repos", "events_url": "https://api.github.com/users/ibhagatgnu/events{/privacy}", "received_events_url": "https://api.github.com/users/ibhagatgnu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3fc22eedb033cbff1bf5a70c6a032d3c5ce2d867", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fc22eedb033cbff1bf5a70c6a032d3c5ce2d867", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fc22eedb033cbff1bf5a70c6a032d3c5ce2d867"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "4ce756c728a74b807c331f941435e96c37b04b6a", "filename": "gcc/ctfc.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/613a6fca75156aadc2e79d78a23e547d39762c1e/gcc%2Fctfc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/613a6fca75156aadc2e79d78a23e547d39762c1e/gcc%2Fctfc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fctfc.h?ref=613a6fca75156aadc2e79d78a23e547d39762c1e", "patch": "@@ -301,6 +301,8 @@ typedef struct GTY (()) ctf_container\n   /* List of pre-processed CTF Variables.  CTF requires that the variables\n      appear in the sorted order of their names.  */\n   ctf_dvdef_t ** GTY ((length (\"0\"))) ctfc_vars_list;\n+  /* Count of pre-processed CTF Variables in the list.  */\n+  uint64_t ctfc_vars_list_count;\n   /* List of pre-processed CTF types.  CTF requires that a shared type must\n      appear before the type that uses it.  For the compiler, this means types\n      are emitted in sorted order of their type IDs.  */"}, {"sha": "28a873b2027d64a9004ee8865c78113431f64f47", "filename": "gcc/ctfout.cc", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/613a6fca75156aadc2e79d78a23e547d39762c1e/gcc%2Fctfout.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/613a6fca75156aadc2e79d78a23e547d39762c1e/gcc%2Fctfout.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fctfout.cc?ref=613a6fca75156aadc2e79d78a23e547d39762c1e", "patch": "@@ -173,9 +173,7 @@ ctf_calc_num_vbytes (ctf_dtdef_ref ctftype)\n static void\n ctf_list_add_ctf_vars (ctf_container_ref ctfc, ctf_dvdef_ref var)\n {\n-  /* FIXME - static may not fly with multiple CUs.  */\n-  static int num_vars_added = 0;\n-  ctfc->ctfc_vars_list[num_vars_added++] = var;\n+  ctfc->ctfc_vars_list[ctfc->ctfc_vars_list_count++] = var;\n }\n \n /* Initialize the various sections and labels for CTF output.  */"}]}