{"sha": "60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjBiYzJiNGI5Y2Y2MmJkOWI3Mjk0YTgwZjJlNDJiZWI1NjlmYjdjMg==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2002-10-24T08:51:00Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2002-10-24T08:51:00Z"}, "message": "config.gcc (mips64vr-*-elf*, [...]): Add MIPS_MARCH_CONTROLS_SOFT_FLOAT=1 to $tm_defines.\n\n\t* config.gcc (mips64vr-*-elf*, mips64vrel-*-elf*): Add\n\tMIPS_MARCH_CONTROLS_SOFT_FLOAT=1 to $tm_defines.\n\t* config/mips/mips.c (MIPS_MARCH_CONTROLS_SOFT_FLOAT): Default to 0.\n\t(override_options): Base default setting of MASK_SOFT_FLOAT on -march\n\tif MIPS_MARCH_CONTROLS_SOFT_FLOAT.\n\nFrom-SVN: r58488", "tree": {"sha": "01b9064b4e53d27aac5f3816822404cff70c5a47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/01b9064b4e53d27aac5f3816822404cff70c5a47"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2/comments", "author": null, "committer": null, "parents": [{"sha": "5be5c8d4634ab72e1cd5f1bcbe85d7f5871f7de0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5be5c8d4634ab72e1cd5f1bcbe85d7f5871f7de0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5be5c8d4634ab72e1cd5f1bcbe85d7f5871f7de0"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "e485a49eda4fb8a67cfaf1fba118fb70fdcf869a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2", "patch": "@@ -1,3 +1,11 @@\n+2002-10-24  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config.gcc (mips64vr-*-elf*, mips64vrel-*-elf*): Add\n+\tMIPS_MARCH_CONTROLS_SOFT_FLOAT=1 to $tm_defines.\n+\t* config/mips/mips.c (MIPS_MARCH_CONTROLS_SOFT_FLOAT): Default to 0.\n+\t(override_options): Base default setting of MASK_SOFT_FLOAT on -march\n+\tif MIPS_MARCH_CONTROLS_SOFT_FLOAT.\n+\n 2002-10-24  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* optabs.c (expand_binop): Don't reuse the shift target in the"}, {"sha": "bf946599475a783caf8c9cfd191aee8d82970b90", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2", "patch": "@@ -1859,7 +1859,7 @@ mips64-*-elf* | mips64el-*-elf*)\n \t;;\n mips64vr-*-elf* | mips64vrel-*-elf*)\n         tm_file=\"mips/vr.h ${tm_file} mips/elf64.h\"\n-        tm_defines=\"MIPS_ABI_DEFAULT=ABI_O64\"\n+        tm_defines=\"MIPS_ABI_DEFAULT=ABI_O64 MIPS_MARCH_CONTROLS_SOFT_FLOAT=1\"\n         tmake_file=mips/t-vr\n         ;;\n mips64orion-*-elf* | mips64orionel-*-elf*)"}, {"sha": "dafa9207cad70dd83da0bdfc9598ddf5e4a63221", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2", "patch": "@@ -626,6 +626,11 @@ const struct mips_cpu_info mips_cpu_info_table[] = {\n   { 0, 0, 0 }\n };\n \f\n+/* Nonzero if -march should decide the default value of MASK_SOFT_FLOAT.  */\n+#ifndef MIPS_MARCH_CONTROLS_SOFT_FLOAT\n+#define MIPS_MARCH_CONTROLS_SOFT_FLOAT 0\n+#endif\n+\f\n /* Initialize the GCC target structure.  */\n #undef TARGET_ASM_ALIGNED_HI_OP\n #define TARGET_ASM_ALIGNED_HI_OP \"\\t.half\\t\"\n@@ -5220,6 +5225,24 @@ override_options ()\n \ttarget_flags &= ~MASK_LONG64;\n     }\n \n+  if (MIPS_MARCH_CONTROLS_SOFT_FLOAT\n+      && (target_flags_explicit & MASK_SOFT_FLOAT) == 0)\n+    {\n+      /* For some configurations, it is useful to have -march control\n+\t the default setting of MASK_SOFT_FLOAT.  */\n+      switch ((int) mips_arch)\n+\t{\n+\tcase PROCESSOR_R4100:\n+\tcase PROCESSOR_R4120:\n+\t  target_flags |= MASK_SOFT_FLOAT;\n+\t  break;\n+\n+\tdefault:\n+\t  target_flags &= ~MASK_SOFT_FLOAT;\n+\t  break;\n+\t}\n+    }\n+\n   if (mips_abi != ABI_32 && mips_abi != ABI_O64)\n     flag_pcc_struct_return = 0;\n "}]}