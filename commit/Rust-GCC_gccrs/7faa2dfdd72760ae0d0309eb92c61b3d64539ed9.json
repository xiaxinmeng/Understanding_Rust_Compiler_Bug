{"sha": "7faa2dfdd72760ae0d0309eb92c61b3d64539ed9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2ZhYTJkZmRkNzI3NjBhZTBkMDMwOWViOTJjNjFiM2Q2NDUzOWVkOQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2014-10-01T20:51:34Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2014-10-01T20:51:34Z"}, "message": "re PR debug/63342 (ICE in loc_list_from_tree, at dwarf2out.c:14698)\n\n\tPR debug/63342\n\t* dwarf2out.c (loc_list_from_tree): Handle MEM_REF with non-zero\n\toffset, TARGET_MEM_REF and SSA_NAME.\n\n\t* gcc.dg/pr63342.c: New test.\n\nFrom-SVN: r215782", "tree": {"sha": "fc1ae9cc60eeb1d72880fec0459ed9447de257b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc1ae9cc60eeb1d72880fec0459ed9447de257b2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "af27dfc447163c122c2442d04d50383f1e4e3ca1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af27dfc447163c122c2442d04d50383f1e4e3ca1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af27dfc447163c122c2442d04d50383f1e4e3ca1"}], "stats": {"total": 44, "additions": 42, "deletions": 2}, "files": [{"sha": "6a59825c0640337620f51760fcbe4fac258144fa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7faa2dfdd72760ae0d0309eb92c61b3d64539ed9", "patch": "@@ -1,5 +1,9 @@\n 2014-10-01  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR debug/63342\n+\t* dwarf2out.c (loc_list_from_tree): Handle MEM_REF with non-zero\n+\toffset, TARGET_MEM_REF and SSA_NAME.\n+\n \t* config/i386/i386.c (expand_vec_perm_palignr): Handle\n \t256-bit vectors for TARGET_AVX2.\n "}, {"sha": "a64038c41a346f3a4c322f863c32f4c240d7222c", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=7faa2dfdd72760ae0d0309eb92c61b3d64539ed9", "patch": "@@ -14416,15 +14416,21 @@ loc_list_from_tree (tree loc, int want_address)\n       break;\n \n     case MEM_REF:\n-      /* ??? FIXME.  */\n       if (!integer_zerop (TREE_OPERAND (loc, 1)))\n-\treturn 0;\n+\t{\n+\t  have_address = 1;\n+\t  goto do_plus;\n+\t}\n       /* Fallthru.  */\n     case INDIRECT_REF:\n       list_ret = loc_list_from_tree (TREE_OPERAND (loc, 0), 0);\n       have_address = 1;\n       break;\n \n+    case TARGET_MEM_REF:\n+    case SSA_NAME:\n+      return NULL;\n+\n     case COMPOUND_EXPR:\n       return loc_list_from_tree (TREE_OPERAND (loc, 1), want_address);\n \n@@ -14587,6 +14593,7 @@ loc_list_from_tree (tree loc, int want_address)\n \n     case POINTER_PLUS_EXPR:\n     case PLUS_EXPR:\n+    do_plus:\n       if (tree_fits_shwi_p (TREE_OPERAND (loc, 1)))\n \t{\n \t  list_ret = loc_list_from_tree (TREE_OPERAND (loc, 0), 0);"}, {"sha": "9936e6192ecb4f6000a396663369efe8e90406b1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7faa2dfdd72760ae0d0309eb92c61b3d64539ed9", "patch": "@@ -1,5 +1,8 @@\n 2014-10-01  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR debug/63342\n+\t* gcc.dg/pr63342.c: New test.\n+\n \tPR c++/63306\n \t* g++.dg/ipa/pr63306.C: New test.\n "}, {"sha": "499d508c13f0c934caa9e4f0b36a32e1213ec2d5", "filename": "gcc/testsuite/gcc.dg/pr63342.c", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9/gcc%2Ftestsuite%2Fgcc.dg%2Fpr63342.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7faa2dfdd72760ae0d0309eb92c61b3d64539ed9/gcc%2Ftestsuite%2Fgcc.dg%2Fpr63342.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr63342.c?ref=7faa2dfdd72760ae0d0309eb92c61b3d64539ed9", "patch": "@@ -0,0 +1,26 @@\n+/* PR debug/63342 */\n+/* { dg-do compile } */\n+/* { dg-options \"-g -O2\" } */\n+/* { dg-additional-options \"-fpic\" { target fpic } } */\n+\n+static __thread double u[9], v[9];\n+\n+void\n+foo (double **p, double **q)\n+{\n+  *p = u;\n+  *q = v;\n+}\n+\n+double\n+bar (double x)\n+{\n+  int i;\n+  double s = 0.0;\n+  for (i = 0; i < 9; i++)\n+    {\n+      double a = x + v[i];\n+      s += u[i] * a * a;\n+    }\n+  return s;\n+}"}]}