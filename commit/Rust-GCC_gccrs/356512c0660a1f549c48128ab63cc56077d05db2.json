{"sha": "356512c0660a1f549c48128ab63cc56077d05db2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzU2NTEyYzA2NjBhMWY1NDljNDgxMjhhYjYzY2M1NjA3N2QwNWRiMg==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2017-08-07T11:47:22Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2017-08-07T11:47:22Z"}, "message": "i386: Set priority to P_AES for Westmere\n\nThe difference between Nehalem and Westmere is AES.  We should set\npriority to P_AES for Westmere, not P_PROC_SSE4_2 which is for Nehalem.\nOtherwise, we will pick Nehalem implementation on Westmere.  Tested on\nWestmere.\n\n\tPR target/81743\n\t* config/i386/i386.c (get_builtin_code_for_version): Set priority\n\tto P_AES for Westmere.\n\nFrom-SVN: r250915", "tree": {"sha": "43c3854469f87c2a612ec2a2039830532e291265", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/43c3854469f87c2a612ec2a2039830532e291265"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/356512c0660a1f549c48128ab63cc56077d05db2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/356512c0660a1f549c48128ab63cc56077d05db2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/356512c0660a1f549c48128ab63cc56077d05db2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/356512c0660a1f549c48128ab63cc56077d05db2/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c8f34527b1c941f81e41df66e5d7cc2aedb453df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8f34527b1c941f81e41df66e5d7cc2aedb453df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8f34527b1c941f81e41df66e5d7cc2aedb453df"}], "stats": {"total": 23, "additions": 17, "deletions": 6}, "files": [{"sha": "a78b1a742f4a00e6e91586e8aa12f5aca124439c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/356512c0660a1f549c48128ab63cc56077d05db2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/356512c0660a1f549c48128ab63cc56077d05db2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=356512c0660a1f549c48128ab63cc56077d05db2", "patch": "@@ -1,3 +1,9 @@\n+2017-08-07  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/81743\n+\t* config/i386/i386.c (get_builtin_code_for_version): Set priority\n+\tto P_AES for Westmere.\n+\n 2017-08-07  Jonathan Yong  <10walls@gmail.com>\n \n \t* config/i386/mingw.opt (fset-stack-executable): Removed."}, {"sha": "c0b6015991d2781eb9741e16fe3f804d620735fb", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/356512c0660a1f549c48128ab63cc56077d05db2/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/356512c0660a1f549c48128ab63cc56077d05db2/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=356512c0660a1f549c48128ab63cc56077d05db2", "patch": "@@ -33417,13 +33417,18 @@ get_builtin_code_for_version (tree decl, tree *predicate_list)\n \t      break;\n \t    case PROCESSOR_NEHALEM:\n \t      if (new_target->x_ix86_isa_flags & OPTION_MASK_ISA_AES)\n-\t\targ_str = \"westmere\";\n+\t\t{\n+\t\t  arg_str = \"westmere\";\n+\t\t  priority = P_AES;\n+\t\t}\n \t      else\n-\t\t/* We translate \"arch=corei7\" and \"arch=nehalem\" to\n-\t\t   \"corei7\" so that it will be mapped to M_INTEL_COREI7\n-\t\t   as cpu type to cover all M_INTEL_COREI7_XXXs.  */\n-\t\targ_str = \"corei7\";\n-\t      priority = P_PROC_SSE4_2;\n+\t\t{\n+\t\t  /* We translate \"arch=corei7\" and \"arch=nehalem\" to\n+\t\t     \"corei7\" so that it will be mapped to M_INTEL_COREI7\n+\t\t     as cpu type to cover all M_INTEL_COREI7_XXXs.  */\n+\t\t  arg_str = \"corei7\";\n+\t\t  priority = P_PROC_SSE4_2;\n+\t\t}\n \t      break;\n \t    case PROCESSOR_SANDYBRIDGE:\n \t      if (new_target->x_ix86_isa_flags & OPTION_MASK_ISA_F16C)"}]}