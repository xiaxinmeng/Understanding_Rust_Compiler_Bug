{"sha": "8589115b9cf39923208629a049f406b887c0cd3b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODU4OTExNWI5Y2YzOTkyMzIwODYyOWEwNDlmNDA2Yjg4N2MwY2QzYg==", "commit": {"author": {"name": "Dave Korn", "email": "dave.korn.cygwin@gmail.com", "date": "2009-12-30T23:20:55Z"}, "committer": {"name": "Dave Korn", "email": "davek@gcc.gnu.org", "date": "2009-12-30T23:20:55Z"}, "message": "re PR lto/42531 (FAIL: gcc.c-torture/compile/20011119-1.c)\n\n\tPR lto/42531\n\t* lto-streamer-out.c (produce_asm): Skip any leading asterisk when\n\tusing DECL_ASSEMBLER_NAME to generate a section name.\n\t(copy_function): Likewise.\n\nFrom-SVN: r155528", "tree": {"sha": "fd8521d5f3456865a1dddcc8da023acb3c52f855", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fd8521d5f3456865a1dddcc8da023acb3c52f855"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8589115b9cf39923208629a049f406b887c0cd3b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8589115b9cf39923208629a049f406b887c0cd3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8589115b9cf39923208629a049f406b887c0cd3b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8589115b9cf39923208629a049f406b887c0cd3b/comments", "author": {"login": "davek-cygwin", "id": 530057, "node_id": "MDQ6VXNlcjUzMDA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/530057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davek-cygwin", "html_url": "https://github.com/davek-cygwin", "followers_url": "https://api.github.com/users/davek-cygwin/followers", "following_url": "https://api.github.com/users/davek-cygwin/following{/other_user}", "gists_url": "https://api.github.com/users/davek-cygwin/gists{/gist_id}", "starred_url": "https://api.github.com/users/davek-cygwin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davek-cygwin/subscriptions", "organizations_url": "https://api.github.com/users/davek-cygwin/orgs", "repos_url": "https://api.github.com/users/davek-cygwin/repos", "events_url": "https://api.github.com/users/davek-cygwin/events{/privacy}", "received_events_url": "https://api.github.com/users/davek-cygwin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "331fc6d84dc38acba2f660d84260f395a8e6cf29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/331fc6d84dc38acba2f660d84260f395a8e6cf29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/331fc6d84dc38acba2f660d84260f395a8e6cf29"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "7a9eab0d7055700a6dbc2250aee9072f7974093f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8589115b9cf39923208629a049f406b887c0cd3b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8589115b9cf39923208629a049f406b887c0cd3b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8589115b9cf39923208629a049f406b887c0cd3b", "patch": "@@ -1,3 +1,10 @@\n+2009-12-30  Dave Korn  <dave.korn.cygwin@gmail.com>\n+\n+\tPR lto/42531\n+\t* lto-streamer-out.c (produce_asm): Skip any leading asterisk when\n+\tusing DECL_ASSEMBLER_NAME to generate a section name.\n+\t(copy_function): Likewise.\n+\n 2009-12-30  Andreas Schwab  <schwab@linux-m68k.org>\n \n \tPR target/42516"}, {"sha": "1f9c2e05bb036271618679fd034b4e2d9756450e", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8589115b9cf39923208629a049f406b887c0cd3b/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8589115b9cf39923208629a049f406b887c0cd3b/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=8589115b9cf39923208629a049f406b887c0cd3b", "patch": "@@ -1784,6 +1784,8 @@ produce_asm (struct output_block *ob, tree fn)\n   if (section_type == LTO_section_function_body)\n     {\n       const char *name = IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (fn));\n+      if (name[0] == '*')\n+\tname++;\n       section_name = lto_get_section_name (section_type, name);\n     }\n   else\n@@ -2007,11 +2009,16 @@ copy_function (struct cgraph_node *node)\n   const char *data;\n   size_t len;\n   const char *name = IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (function));\n-  char *section_name =\n-    lto_get_section_name (LTO_section_function_body, name);\n+  char *section_name;\n   size_t i, j;\n   struct lto_in_decl_state *in_state;\n-  struct lto_out_decl_state *out_state = lto_get_out_decl_state ();\n+  struct lto_out_decl_state *out_state;\n+\n+  if (name[0] == '*')\n+    name++;\n+  section_name =\n+    lto_get_section_name (LTO_section_function_body, name);\n+  out_state = lto_get_out_decl_state ();\n \n   lto_begin_section (section_name, !flag_wpa);\n   free (section_name);"}]}