{"sha": "ad2e7dd004513e4877bf837f4113815ada04c7f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWQyZTdkZDAwNDUxM2U0ODc3YmY4MzdmNDExMzgxNWFkYTA0YzdmMA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-07-26T23:45:11Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-07-26T23:45:11Z"}, "message": "(expand_expr, case ARRAY_REF): Don't fold L\"foo\"[2].\n\nFrom-SVN: r7797", "tree": {"sha": "797513b44652024533be4b703d8e923b03306bbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/797513b44652024533be4b703d8e923b03306bbf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad2e7dd004513e4877bf837f4113815ada04c7f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad2e7dd004513e4877bf837f4113815ada04c7f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad2e7dd004513e4877bf837f4113815ada04c7f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad2e7dd004513e4877bf837f4113815ada04c7f0/comments", "author": null, "committer": null, "parents": [{"sha": "ee7204ee5524237c31037d427422137a349cb253", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee7204ee5524237c31037d427422137a349cb253", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee7204ee5524237c31037d427422137a349cb253"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "62eb5b830fb85c307ededd5bc262c5b76818b6b5", "filename": "gcc/expr.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad2e7dd004513e4877bf837f4113815ada04c7f0/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad2e7dd004513e4877bf837f4113815ada04c7f0/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=ad2e7dd004513e4877bf837f4113815ada04c7f0", "patch": "@@ -4340,13 +4340,16 @@ expand_expr (exp, target, tmode, modifier)\n \t  }\n \n \t/* Fold an expression like: \"foo\"[2].\n-\t   This is not done in fold so it won't happen inside &.  */\n+\t   This is not done in fold so it won't happen inside &.\n+\t   Don't fold if this is for wide characters since it's too\n+\t   difficult to do correctly and this is a very rare case.  */\n \n \tif (TREE_CODE (array) == STRING_CST\n \t    && TREE_CODE (index) == INTEGER_CST\n \t    && !TREE_INT_CST_HIGH (index)\n \t    && (i = TREE_INT_CST_LOW (index)) < TREE_STRING_LENGTH (array)\n-\t    && GET_MODE_CLASS (mode) == MODE_INT)\n+\t    && GET_MODE_CLASS (mode) == MODE_INT\n+\t    && GET_MODE_SIZE (mode) == 1)\n \t  return GEN_INT (TREE_STRING_POINTER (array)[i]);\n \n \t/* If this is a constant index into a constant array,"}]}