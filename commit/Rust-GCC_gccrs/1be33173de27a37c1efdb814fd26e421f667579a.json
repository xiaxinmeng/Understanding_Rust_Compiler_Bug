{"sha": "1be33173de27a37c1efdb814fd26e421f667579a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWJlMzMxNzNkZTI3YTM3YzFlZmRiODE0ZmQyNmU0MjFmNjY3NTc5YQ==", "commit": {"author": {"name": "Prathamesh Kulkarni", "email": "prathamesh.kulkarni@linaro.org", "date": "2017-02-14T09:21:01Z"}, "committer": {"name": "Prathamesh Kulkarni", "email": "prathamesh3492@gcc.gnu.org", "date": "2017-02-14T09:21:01Z"}, "message": "gimple-pretty-print.c (dump_unary_rhs): Adjust dump format for ABS_EXPR for gimple dump.\n\n2017-02-14  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n\n\t* gimple-pretty-print.c (dump_unary_rhs): Adjust dump format for\n\tABS_EXPR for gimple dump.\n\nc/\n\t* gimpler-parser.c (c_parser_gimple_statement): Handle ABS_EXPR.\n\t(c_parser_gimple_unary_expression): Likewise.\n\ntestsuite/\n\t* gcc.dg/gimplefe-25.c: New test.\n\nFrom-SVN: r245422", "tree": {"sha": "213d4e9207ad6056ec9b8c60499b0721b7840878", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/213d4e9207ad6056ec9b8c60499b0721b7840878"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1be33173de27a37c1efdb814fd26e421f667579a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1be33173de27a37c1efdb814fd26e421f667579a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1be33173de27a37c1efdb814fd26e421f667579a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1be33173de27a37c1efdb814fd26e421f667579a/comments", "author": null, "committer": null, "parents": [{"sha": "6a8b140878bc20952391e854529721ea1e6dd546", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a8b140878bc20952391e854529721ea1e6dd546", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a8b140878bc20952391e854529721ea1e6dd546"}], "stats": {"total": 61, "additions": 57, "deletions": 4}, "files": [{"sha": "4a0d7134c2885a44bdc5fc69752af1e6271a394d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1be33173de27a37c1efdb814fd26e421f667579a", "patch": "@@ -1,3 +1,8 @@\n+2017-02-14  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\t* gimple-pretty-print.c (dump_unary_rhs): Adjust dump format for\n+\tABS_EXPR for gimple dump.\n+\n 2017-02-14  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/79462"}, {"sha": "3e585b0e4ca9c81975c6a877da488c7466c55392", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=1be33173de27a37c1efdb814fd26e421f667579a", "patch": "@@ -1,3 +1,8 @@\n+2017-02-14  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\t* gimpler-parser.c (c_parser_gimple_statement): Handle ABS_EXPR.\n+\t(c_parser_gimple_unary_expression): Likewise.\n+\n 2017-02-13  Jakub Jelinek  <jakub@redhat.com>\n \n \t* c-parser.c (c_parser_oacc_declare): Add missing space in"}, {"sha": "d95987796e0ef55a5470a7615d60e364b73a7e1b", "filename": "gcc/c/gimple-parser.c", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2Fc%2Fgimple-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2Fc%2Fgimple-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fgimple-parser.c?ref=1be33173de27a37c1efdb814fd26e421f667579a", "patch": "@@ -325,6 +325,13 @@ c_parser_gimple_statement (c_parser *parser, gimple_seq *seq)\n   /* Unary expression.  */\n   switch (c_parser_peek_token (parser)->type)\n     {\n+    case CPP_NAME:\n+      {\n+\ttree id = c_parser_peek_token (parser)->value;\n+\tif (strcmp (IDENTIFIER_POINTER (id), \"__ABS\") == 0)\n+\t  goto build_unary_expr;\n+\tbreak;\n+      }\n     case CPP_KEYWORD:\n       if (c_parser_peek_token (parser)->keyword != RID_REALPART\n \t  && c_parser_peek_token (parser)->keyword != RID_IMAGPART)\n@@ -336,6 +343,7 @@ c_parser_gimple_statement (c_parser *parser, gimple_seq *seq)\n     case CPP_COMPL:\n     case CPP_NOT:\n     case CPP_MULT: /* pointer deref */\n+    build_unary_expr:\n       rhs = c_parser_gimple_unary_expression (parser);\n       if (rhs.value != error_mark_node)\n \t{\n@@ -536,7 +544,7 @@ c_parser_gimple_binary_expression (c_parser *parser)\n      unary-operator gimple-postfix-expression\n \n    unary-operator: one of\n-     & * + - ~\n+     & * + - ~ abs_expr\n */\n \n static c_expr\n@@ -600,6 +608,18 @@ c_parser_gimple_unary_expression (c_parser *parser)\n \tdefault:\n \t  return c_parser_gimple_postfix_expression (parser);\n \t}\n+    case CPP_NAME:\n+\t{\n+\t  tree id = c_parser_peek_token (parser)->value;\n+\t  if (strcmp (IDENTIFIER_POINTER (id), \"__ABS\") == 0)\n+\t    {\n+\t      c_parser_consume_token (parser);\n+\t      op = c_parser_gimple_postfix_expression (parser);\n+\t      return parser_build_unary_op (op_loc, ABS_EXPR, op);\n+\t    }\n+\t  else\n+\t    return c_parser_gimple_postfix_expression (parser);\n+\t}\n     default:\n       return c_parser_gimple_postfix_expression (parser);\n     }"}, {"sha": "0033e97e80fac933933279872e692d8041721b21", "filename": "gcc/gimple-pretty-print.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2Fgimple-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2Fgimple-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-pretty-print.c?ref=1be33173de27a37c1efdb814fd26e421f667579a", "patch": "@@ -323,9 +323,17 @@ dump_unary_rhs (pretty_printer *buffer, gassign *gs, int spc, int flags)\n       break;\n \n     case ABS_EXPR:\n-      pp_string (buffer, \"ABS_EXPR <\");\n-      dump_generic_node (buffer, rhs, spc, flags, false);\n-      pp_greater (buffer);\n+      if (flags & TDF_GIMPLE)\n+\t{\n+\t  pp_string (buffer, \"__ABS \");\n+\t  dump_generic_node (buffer, rhs, spc, flags, false);\n+\t}\n+      else\n+\t{\n+\t  pp_string (buffer, \"ABS_EXPR <\");\n+\t  dump_generic_node (buffer, rhs, spc, flags, false);\n+\t  pp_greater (buffer);\n+\t}\n       break;\n \n     default:"}, {"sha": "cc10fd4c8386311ee89406aa92542dd9dc5fa417", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1be33173de27a37c1efdb814fd26e421f667579a", "patch": "@@ -1,3 +1,7 @@\n+2017-02-14  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\t* gcc.dg/gimplefe-25.c: New test.\n+\n 2017-02-14  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/79408"}, {"sha": "d8c44a74013e6a7c9d34befe48eea35596ef20e7", "filename": "gcc/testsuite/gcc.dg/gimplefe-25.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2Ftestsuite%2Fgcc.dg%2Fgimplefe-25.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1be33173de27a37c1efdb814fd26e421f667579a/gcc%2Ftestsuite%2Fgcc.dg%2Fgimplefe-25.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgimplefe-25.c?ref=1be33173de27a37c1efdb814fd26e421f667579a", "patch": "@@ -0,0 +1,11 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O -fgimple -fdump-tree-ssa-gimple\" } */\n+\n+int __GIMPLE() f(int a)\n+{\n+  int t0;\n+  t0_1 = __ABS a;\n+  return t0_1;\n+}\n+\n+/* { dg-final { scan-tree-dump \"__ABS a\" \"ssa\" } } */"}]}