{"sha": "b7a4467dcdf2022c51a892223fcc24aec3689b9f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjdhNDQ2N2RjZGYyMDIyYzUxYTg5MjIyM2ZjYzI0YWVjMzY4OWI5Zg==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1993-01-01T17:20:36Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1993-01-01T17:20:36Z"}, "message": "pa.md (movqi, [...]): Fix attributes which involve fp<->gr copies to match current reality.\n\n        * pa.md (movqi, movhi, movsi, movdi, movsf, movdf): Fix attributes\n        which involve fp<->gr copies to match current reality.\n        (indexed loads): These should have \"load\" attributes, not \"move\".\n\nFrom-SVN: r3043", "tree": {"sha": "e6953e21de7df6742c5bb718a06a4982cc69e6d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e6953e21de7df6742c5bb718a06a4982cc69e6d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7a4467dcdf2022c51a892223fcc24aec3689b9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7a4467dcdf2022c51a892223fcc24aec3689b9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7a4467dcdf2022c51a892223fcc24aec3689b9f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7a4467dcdf2022c51a892223fcc24aec3689b9f/comments", "author": null, "committer": null, "parents": [{"sha": "c228001d20d13f429c9e485df25f3dcb29897078", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c228001d20d13f429c9e485df25f3dcb29897078", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c228001d20d13f429c9e485df25f3dcb29897078"}], "stats": {"total": 26, "additions": 15, "deletions": 11}, "files": [{"sha": "5ccc83dc5354dfb230e82c0fdbea99f16d1a1ecd", "filename": "gcc/config/pa/pa.md", "status": "modified", "additions": 15, "deletions": 11, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7a4467dcdf2022c51a892223fcc24aec3689b9f/gcc%2Fconfig%2Fpa%2Fpa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7a4467dcdf2022c51a892223fcc24aec3689b9f/gcc%2Fconfig%2Fpa%2Fpa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.md?ref=b7a4467dcdf2022c51a892223fcc24aec3689b9f", "patch": "@@ -754,7 +754,7 @@\n    fstws %1,-16(30)\\;ldw -16(30),%0\n    stw %1,-16(30)\\;fldws -16(30),%0\n    fcpy,sgl %1,%0\"\n-  [(set_attr \"type\" \"move,load,store,move,move,fpalu\")\n+  [(set_attr \"type\" \"move,load,store,load,fpload,fpalu\")\n    (set_attr \"length\" \"1,1,1,2,2,1\")])\n \n ;; For pic\n@@ -906,7 +906,7 @@\n    fstws %1,-16(30)\\;ldw -16(30),%0\n    stw %1,-16(30)\\;fldws -16(30),%0\n    fcpy,sgl %1,%0\"\n-  [(set_attr \"type\" \"move,load,store,move,move,fpalu\")\n+  [(set_attr \"type\" \"move,load,store,load,fpload,fpalu\")\n    (set_attr \"length\" \"1,1,1,2,2,1\")])\n \n (define_insn \"\"\n@@ -967,7 +967,7 @@\n    fstws %1,-16(30)\\;ldw -16(30),%0\n    stw %1,-16(30)\\;fldws -16(30),%0\n    fcpy,sgl %1,%0\"\n-  [(set_attr \"type\" \"move,load,store,move,move,fpalu\")\n+  [(set_attr \"type\" \"move,load,store,load,fpload,fpalu\")\n    (set_attr \"length\" \"1,1,1,2,2,1\")])\n \n (define_insn \"\"\n@@ -998,7 +998,7 @@\n \t\t\t (match_operand:SI 2 \"register_operand\" \"r\"))))]\n   \"\"\n   \"ldwx,s %1(0,%2),%0\"\n-  [(set_attr \"type\" \"move\")\n+  [(set_attr \"type\" \"load\")\n    (set_attr \"length\" \"1\")])\n \n ; this will never match\n@@ -1011,7 +1011,7 @@\n ;\t\t (match_dup 1)))]\n ;  \"\"\n ;  \"ldwx,sm %2(0,%1),%0\"\n-;  [(set_attr \"type\" \"move\")\n+;  [(set_attr \"type\" \"load\")\n ;   (set_attr \"length\" \"1\")])\n \n (define_insn \"\"\n@@ -1021,7 +1021,7 @@\n \t\t\t (match_operand:SI 1 \"register_operand\" \"r\"))))]\n   \"\"\n   \"ldhx,s %2(0,%1),%0\"\n-  [(set_attr \"type\" \"move\")\n+  [(set_attr \"type\" \"load\")\n    (set_attr \"length\" \"1\")])\n \n ; this will never match\n@@ -1034,7 +1034,7 @@\n ;\t\t (match_dup 1)))]\n ;  \"\"\n ;  \"ldhx,sm %2(0,%1),%0\"\n-;  [(set_attr \"type\" \"move\")\n+;  [(set_attr \"type\" \"load\")\n ;   (set_attr \"length\" \"1\")])\n \n ;; The definition of this insn does not really explain what it does,\n@@ -1135,7 +1135,7 @@\n     return output_fp_move_double (operands);\n   return output_move_double (operands);\n }\"\n-  [(set_attr \"type\" \"fpalu,move,fpstore,store,fpload,load,multi,multi\")\n+  [(set_attr \"type\" \"fpalu,move,fpstore,store,fpload,load,fpload,load\")\n    (set_attr \"length\" \"1,2,1,2,1,2,3,3\")])\n \n (define_expand \"movdi\"\n@@ -1246,8 +1246,12 @@\n     return output_fp_move_double (operands);\n   return output_move_double (operands);\n }\"\n-  [(set_attr \"type\" \"move,store,load,misc,multi,fpalu,multi\")\n-   (set_attr \"length\" \"2,3,3,3,3,2,3\")])\n+;; Use move in the last type..  This case happens often with xmpyu\n+;; and in nearly all cases we only access the data from the first \n+;; of the two loads generated, and that can't stall on a data conflict\n+;; be cause of the second load.\n+  [(set_attr \"type\" \"move,store,load,misc,fpload,fpalu,move\")\n+   (set_attr \"length\" \"2,3,3,3,3,1,3\")])\n \n (define_insn \"\"\n   [(set (match_operand:DI 0 \"register_operand\" \"=r,r\")\n@@ -1293,7 +1297,7 @@\n    ldw%M1 %1,%0\n    fstws%F0 %r1,%0\n    stw%M0 %r1,%0\"\n-  [(set_attr \"type\" \"fpalu,move,multi,multi,fpload,load,fpstore,store\")\n+  [(set_attr \"type\" \"fpalu,move,load,fpload,fpload,load,fpstore,store\")\n    (set_attr \"length\" \"1,1,2,2,1,1,1,1\")])\n \n \f"}]}