{"sha": "d9aed5f1ccffc019ddf980e349caa3d092755cb4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDlhZWQ1ZjFjY2ZmYzAxOWRkZjk4MGUzNDljYWEzZDA5Mjc1NWNiNA==", "commit": {"author": {"name": "Mark Eggleston", "email": "markeggleston@gcc.gnu.org", "date": "2020-06-11T05:42:36Z"}, "committer": {"name": "Mark Eggleston", "email": "markeggleston@gcc.gnu.org", "date": "2020-06-22T12:14:44Z"}, "message": "Fortran  : ICE in gfc_check_reshape PR95585\n\nIssue an error where an array is used before its definition\ninstead of an ICE.\n\n2020-06-22  Steven G. Kargl  <kargl@gcc.gnu.org>\n\ngcc/fortran/\n\n\tPR fortran/95585\n\t* check.c (gfc_check_reshape): Add check for a value when\n\tthe symbol has an attribute flavor FL_PARAMETER.\n\n2020-06-22  Mark Eggleston  <markeggleston@gcc.gnu.org>\n\ngcc/testsuite/\n\n\tPR fortran/95585\n\t* gfortran.dg/pr95585.f90: New test.", "tree": {"sha": "fcaa4f455cee93994ec87e813056fccbcfdabd3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fcaa4f455cee93994ec87e813056fccbcfdabd3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9aed5f1ccffc019ddf980e349caa3d092755cb4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9aed5f1ccffc019ddf980e349caa3d092755cb4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9aed5f1ccffc019ddf980e349caa3d092755cb4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9aed5f1ccffc019ddf980e349caa3d092755cb4/comments", "author": null, "committer": null, "parents": [{"sha": "d57bf2315e024ada3393ad967e8f632121383c9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d57bf2315e024ada3393ad967e8f632121383c9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d57bf2315e024ada3393ad967e8f632121383c9c"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "de9a45fe4f939ca676db9ddecdc969adde3333f5", "filename": "gcc/fortran/check.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9aed5f1ccffc019ddf980e349caa3d092755cb4/gcc%2Ffortran%2Fcheck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9aed5f1ccffc019ddf980e349caa3d092755cb4/gcc%2Ffortran%2Fcheck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fcheck.c?ref=d9aed5f1ccffc019ddf980e349caa3d092755cb4", "patch": "@@ -4742,7 +4742,8 @@ gfc_check_reshape (gfc_expr *source, gfc_expr *shape,\n \t   && shape->ref->u.ar.as->lower[0]->ts.type == BT_INTEGER\n \t   && shape->ref->u.ar.as->upper[0]->expr_type == EXPR_CONSTANT\n \t   && shape->ref->u.ar.as->upper[0]->ts.type == BT_INTEGER\n-\t   && shape->symtree->n.sym->attr.flavor == FL_PARAMETER)\n+\t   && shape->symtree->n.sym->attr.flavor == FL_PARAMETER\n+\t   && shape->symtree->n.sym->value)\n     {\n       int i, extent;\n       gfc_expr *e, *v;"}, {"sha": "b0e6cdc5bea23e575db411d3eb49cf5fd9cf4963", "filename": "gcc/testsuite/gfortran.dg/pr95585.f90", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9aed5f1ccffc019ddf980e349caa3d092755cb4/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95585.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9aed5f1ccffc019ddf980e349caa3d092755cb4/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95585.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95585.f90?ref=d9aed5f1ccffc019ddf980e349caa3d092755cb4", "patch": "@@ -0,0 +1,6 @@\n+! { dg-do compile }\n+\n+program test\n+  integer, parameter :: a(2) = reshape([1, 2], a) ! { dg-error \"before its definition\" }\n+end program\n+"}]}