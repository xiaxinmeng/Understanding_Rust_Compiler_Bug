{"sha": "3899a0b221ee070c9c80ea5e95067e62ced273d6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzg5OWEwYjIyMWVlMDcwYzljODBlYTVlOTUwNjdlNjJjZWQyNzNkNg==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2009-11-25T05:18:35Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2009-11-25T05:18:35Z"}, "message": "graphite-sese-to-poly.c (pdr_add_data_dimensions): Do not infer loop upper bounds for 1-element arrays at end of structures.\n\n2009-10-20  Sebastian Pop  <sebastian.pop@amd.com>\n\n\t* graphite-sese-to-poly.c (pdr_add_data_dimensions): Do not infer\n\tloop upper bounds for 1-element arrays at end of structures.\n\t* tree-flow.h (array_at_struct_end_p): Declared.\n\t* tree-ssa-loop-niter.c (array_at_struct_end_p): Not static anymore.\n\nFrom-SVN: r154612", "tree": {"sha": "4cd9ad61791620b1a14ae44b6ab0a261d941f2ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4cd9ad61791620b1a14ae44b6ab0a261d941f2ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3899a0b221ee070c9c80ea5e95067e62ced273d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3899a0b221ee070c9c80ea5e95067e62ced273d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3899a0b221ee070c9c80ea5e95067e62ced273d6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3899a0b221ee070c9c80ea5e95067e62ced273d6/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e34e583538b1d9b828fa1415cae187f80576fc7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e34e583538b1d9b828fa1415cae187f80576fc7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e34e583538b1d9b828fa1415cae187f80576fc7f"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "05bd2f106a25f5fc0e44e413b256262e3071844a", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3899a0b221ee070c9c80ea5e95067e62ced273d6/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3899a0b221ee070c9c80ea5e95067e62ced273d6/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=3899a0b221ee070c9c80ea5e95067e62ced273d6", "patch": "@@ -1,3 +1,10 @@\n+2009-10-20  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* graphite-sese-to-poly.c (pdr_add_data_dimensions): Do not infer\n+\tloop upper bounds for 1-element arrays at end of structures.\n+\t* tree-flow.h (array_at_struct_end_p): Declared.\n+\t* tree-ssa-loop-niter.c (array_at_struct_end_p): Not static anymore.\n+\n 2009-10-20  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* g++.dg/graphite/pr41305.C: New."}, {"sha": "b2931d15f497015fc37686e0580c0b7529eea201", "filename": "gcc/graphite-sese-to-poly.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3899a0b221ee070c9c80ea5e95067e62ced273d6/gcc%2Fgraphite-sese-to-poly.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3899a0b221ee070c9c80ea5e95067e62ced273d6/gcc%2Fgraphite-sese-to-poly.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-sese-to-poly.c?ref=3899a0b221ee070c9c80ea5e95067e62ced273d6", "patch": "@@ -1728,10 +1728,12 @@ pdr_add_data_dimensions (ppl_Polyhedron_t accesses, data_reference_p dr,\n \n       high = array_ref_up_bound (ref);\n \n-      /* high - subscript >= 0\n-\t XXX: 1-element arrays at end of structures may extend over their\n-\t declared size.  */\n-      if (high && host_integerp (high, 0))\n+      /* high - subscript >= 0 */\n+      if (high && host_integerp (high, 0)\n+\t  /* 1-element arrays at end of structures may extend over\n+\t     their declared size.  */\n+\t  && !(array_at_struct_end_p (ref)\n+\t       && operand_equal_p (low, high, 0)))\n \t{\n \t  ppl_new_Linear_Expression_with_dimension (&expr, accessp_nb_dims);\n \t  ppl_set_coef (expr, subscript, -1);"}, {"sha": "96e4aa91281b4e584966e17134f53e70b4dbeae9", "filename": "gcc/tree-flow.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3899a0b221ee070c9c80ea5e95067e62ced273d6/gcc%2Ftree-flow.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3899a0b221ee070c9c80ea5e95067e62ced273d6/gcc%2Ftree-flow.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-flow.h?ref=3899a0b221ee070c9c80ea5e95067e62ced273d6", "patch": "@@ -728,6 +728,7 @@ tree find_loop_niter (struct loop *, edge *);\n tree loop_niter_by_eval (struct loop *, edge);\n tree find_loop_niter_by_eval (struct loop *, edge *);\n void estimate_numbers_of_iterations (void);\n+bool array_at_struct_end_p (tree);\n bool scev_probably_wraps_p (tree, tree, gimple, struct loop *, bool);\n bool convert_affine_scev (struct loop *, tree, tree *, tree *, gimple, bool);\n "}, {"sha": "d7222104eb5c3b2a7e6497e002460e8e5904b688", "filename": "gcc/tree-ssa-loop-niter.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3899a0b221ee070c9c80ea5e95067e62ced273d6/gcc%2Ftree-ssa-loop-niter.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3899a0b221ee070c9c80ea5e95067e62ced273d6/gcc%2Ftree-ssa-loop-niter.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-niter.c?ref=3899a0b221ee070c9c80ea5e95067e62ced273d6", "patch": "@@ -2612,7 +2612,7 @@ record_nonwrapping_iv (struct loop *loop, tree base, tree step, gimple stmt,\n    allocated structure.  If this is the case, the array may be allocated larger\n    than its upper bound implies.  */\n \n-static bool\n+bool\n array_at_struct_end_p (tree ref)\n {\n   tree base = get_base_address (ref);"}]}