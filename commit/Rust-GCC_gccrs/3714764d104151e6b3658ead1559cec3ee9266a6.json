{"sha": "3714764d104151e6b3658ead1559cec3ee9266a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzcxNDc2NGQxMDQxNTFlNmIzNjU4ZWFkMTU1OWNlYzNlZTkyNjZhNg==", "commit": {"author": {"name": "Maxim Kuvyrkov", "email": "maxim@codesourcery.com", "date": "2010-05-27T12:08:51Z"}, "committer": {"name": "Maxim Kuvyrkov", "email": "mkuvyrkov@gcc.gnu.org", "date": "2010-05-27T12:08:51Z"}, "message": "gthr-posix.h (pthread_cancel): Don't declare if compiling against Bionic C library.\n\n\t* gthr-posix.h (pthread_cancel): Don't declare if compiling against\n\tBionic C library.\n\t(__gthread_active_p): Check for pthread_create if compiling against\n\tBionic C library.\n\nFrom-SVN: r159919", "tree": {"sha": "1d58884152065faaffe543e6cd938b9edcfa6e2a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1d58884152065faaffe543e6cd938b9edcfa6e2a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3714764d104151e6b3658ead1559cec3ee9266a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3714764d104151e6b3658ead1559cec3ee9266a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3714764d104151e6b3658ead1559cec3ee9266a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3714764d104151e6b3658ead1559cec3ee9266a6/comments", "author": null, "committer": null, "parents": [{"sha": "51b9db927f5dca75792b11cbc91266d6b842a6b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51b9db927f5dca75792b11cbc91266d6b842a6b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51b9db927f5dca75792b11cbc91266d6b842a6b2"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "6d8c2e8df30218206d3655fc1635bc237730705d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3714764d104151e6b3658ead1559cec3ee9266a6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3714764d104151e6b3658ead1559cec3ee9266a6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3714764d104151e6b3658ead1559cec3ee9266a6", "patch": "@@ -1,3 +1,10 @@\n+2010-05-27  Maxim Kuvyrkov  <maxim@codesourcery.com>\n+\n+\t* gthr-posix.h (pthread_cancel): Don't declare if compiling against\n+\tBionic C library.\n+\t(__gthread_active_p): Check for pthread_create if compiling against\n+\tBionic C library.\n+\n 2010-05-27  Maxim Kuvyrkov  <maxim@codesourcery.com>\n \n \tSupport compilation for Android platform.  Reimplement -mandroid."}, {"sha": "a7ce3111802075402ec50e8a0e15a90d13aa408f", "filename": "gcc/gthr-posix.h", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3714764d104151e6b3658ead1559cec3ee9266a6/gcc%2Fgthr-posix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3714764d104151e6b3658ead1559cec3ee9266a6/gcc%2Fgthr-posix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgthr-posix.h?ref=3714764d104151e6b3658ead1559cec3ee9266a6", "patch": "@@ -124,7 +124,9 @@ __gthrw(pthread_join)\n __gthrw(pthread_equal)\n __gthrw(pthread_self)\n __gthrw(pthread_detach)\n+#ifndef __BIONIC__\n __gthrw(pthread_cancel)\n+#endif\n __gthrw(sched_yield)\n \n __gthrw(pthread_mutex_lock)\n@@ -238,7 +240,15 @@ static inline int\n __gthread_active_p (void)\n {\n   static void *const __gthread_active_ptr\n-    = __extension__ (void *) &__gthrw_(pthread_cancel);\n+    = __extension__ (void *) &__gthrw_(\n+/* Android's C library does not provide pthread_cancel, check for\n+   `pthread_create' instead.  */\n+#ifndef __BIONIC__\n+\t\t\t\t       pthread_cancel\n+#else\n+\t\t\t\t       pthread_create\n+#endif\n+\t\t\t\t       );\n   return __gthread_active_ptr != 0;\n }\n "}]}