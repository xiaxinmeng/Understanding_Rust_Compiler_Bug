{"sha": "765000222f8aaac772557a80b56dcc5d217a177a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzY1MDAwMjIyZjhhYWFjNzcyNTU3YTgwYjU2ZGNjNWQyMTdhMTc3YQ==", "commit": {"author": {"name": "Steve Ellcey", "email": "sellcey@mips.com", "date": "2013-07-11T22:25:44Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2013-07-11T22:25:44Z"}, "message": "mips.c (mips_conditional_register_usage): Do not use t[0-7] registers in MIPS16 mode when optimizing for size.\n\n2013-07-11  Steve Ellcey  <sellcey@mips.com>\n\n\t* config/mips/mips.c (mips_conditional_register_usage): Do not\n\tuse t[0-7] registers in MIPS16 mode when optimizing for size.\n\nFrom-SVN: r200914", "tree": {"sha": "9b5fd8f388a92d9dec987efdacc9f5da94cf0073", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b5fd8f388a92d9dec987efdacc9f5da94cf0073"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/765000222f8aaac772557a80b56dcc5d217a177a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/765000222f8aaac772557a80b56dcc5d217a177a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/765000222f8aaac772557a80b56dcc5d217a177a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/765000222f8aaac772557a80b56dcc5d217a177a/comments", "author": null, "committer": null, "parents": [{"sha": "78039734658d68e1acc5d10ad8e14363ac606ba3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78039734658d68e1acc5d10ad8e14363ac606ba3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78039734658d68e1acc5d10ad8e14363ac606ba3"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "1d8c05a480717289cf6de95f25ab57cc07793c84", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/765000222f8aaac772557a80b56dcc5d217a177a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/765000222f8aaac772557a80b56dcc5d217a177a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=765000222f8aaac772557a80b56dcc5d217a177a", "patch": "@@ -1,3 +1,8 @@\n+2013-07-11  Steve Ellcey  <sellcey@mips.com>\n+\n+\t* config/mips/mips.c (mips_conditional_register_usage): Do not\n+\tuse t[0-7] registers in MIPS16 mode when optimizing for size.\n+\n 2013-07-11  Sriraman Tallam  <tmsriram@google.com>\n \n \t* config/i386/i386.c (dispatch_function_versions): Fix array"}, {"sha": "3c7e4391014d0376d70216610d09476195ade80e", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 21, "deletions": 3, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/765000222f8aaac772557a80b56dcc5d217a177a/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/765000222f8aaac772557a80b56dcc5d217a177a/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=765000222f8aaac772557a80b56dcc5d217a177a", "patch": "@@ -17199,10 +17199,17 @@ mips_conditional_register_usage (void)\n     }\n   if (TARGET_MIPS16)\n     {\n-      /* In MIPS16 mode, we permit the $t temporary registers to be used\n-\t for reload.  We prohibit the unused $s registers, since they\n+      /* In MIPS16 mode, we prohibit the unused $s registers, since they\n \t are call-saved, and saving them via a MIPS16 register would\n-\t probably waste more time than just reloading the value.  */\n+\t probably waste more time than just reloading the value.\n+\n+\t We permit the $t temporary registers when optimizing for speed\n+\t but not when optimizing for space because using them results in\n+\t code that is larger (but faster) then not using them.  We do\n+\t allow $24 (t8) because it is used in CMP and CMPI instructions\n+\t and $25 (t9) because it is used as the function call address in\n+\t SVR4 PIC code.  */\n+\n       fixed_regs[18] = call_used_regs[18] = 1;\n       fixed_regs[19] = call_used_regs[19] = 1;\n       fixed_regs[20] = call_used_regs[20] = 1;\n@@ -17212,6 +17219,17 @@ mips_conditional_register_usage (void)\n       fixed_regs[26] = call_used_regs[26] = 1;\n       fixed_regs[27] = call_used_regs[27] = 1;\n       fixed_regs[30] = call_used_regs[30] = 1;\n+      if (optimize_size)\n+\t{\n+\t  fixed_regs[8] = call_used_regs[8] = 1;\n+\t  fixed_regs[9] = call_used_regs[9] = 1;\n+\t  fixed_regs[10] = call_used_regs[10] = 1;\n+\t  fixed_regs[11] = call_used_regs[11] = 1;\n+\t  fixed_regs[12] = call_used_regs[12] = 1;\n+\t  fixed_regs[13] = call_used_regs[13] = 1;\n+\t  fixed_regs[14] = call_used_regs[14] = 1;\n+\t  fixed_regs[15] = call_used_regs[15] = 1;\n+\t}\n \n       /* Do not allow HI and LO to be treated as register operands.\n \t There are no MTHI or MTLO instructions (or any real need"}]}