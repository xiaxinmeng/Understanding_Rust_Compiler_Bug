{"sha": "52c0eaf8773922536cc9794c05e10428e6fe2b25", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTJjMGVhZjg3NzM5MjI1MzZjYzk3OTRjMDVlMTA0MjhlNmZlMmIyNQ==", "commit": {"author": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1994-12-09T23:11:54Z"}, "committer": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1994-12-09T23:11:54Z"}, "message": "rs6000.h (LINK_SPEC): Add %{shared:-bM:SRE}.\n\nFri Dec  9 14:52:41 1994  Jason Merrill  <jason@phydeaux.cygnus.com>\n\n        * rs6000/rs6000.h (LINK_SPEC): Add %{shared:-bM:SRE}.\n        (LINK_LIBGCC_SPECIAL_1): Use LIBGCC_SPEC instead.\n\nFrom-SVN: r8638", "tree": {"sha": "166a4bd87f009f15cd186ecec543aa769ea5f270", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/166a4bd87f009f15cd186ecec543aa769ea5f270"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/52c0eaf8773922536cc9794c05e10428e6fe2b25", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52c0eaf8773922536cc9794c05e10428e6fe2b25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52c0eaf8773922536cc9794c05e10428e6fe2b25", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52c0eaf8773922536cc9794c05e10428e6fe2b25/comments", "author": null, "committer": null, "parents": [{"sha": "13bdb4e26a1afccb96b2b68741cfaf90b1b6c1f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13bdb4e26a1afccb96b2b68741cfaf90b1b6c1f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13bdb4e26a1afccb96b2b68741cfaf90b1b6c1f0"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "5ea8f60b8c80051c9373798ede983b4e8accbe1e", "filename": "gcc/config/rs6000/rs6000.h", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52c0eaf8773922536cc9794c05e10428e6fe2b25/gcc%2Fconfig%2Frs6000%2Frs6000.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52c0eaf8773922536cc9794c05e10428e6fe2b25/gcc%2Fconfig%2Frs6000%2Frs6000.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.h?ref=52c0eaf8773922536cc9794c05e10428e6fe2b25", "patch": "@@ -77,17 +77,22 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n    used by the AIX cc command.  So we use it here.\n \n    -bnodelcsect undoes a poor choice of default relating to multiply-defined\n-   csects.  See AIX documentation for more information about this.  */\n+   csects.  See AIX documentation for more information about this.\n+\n+   -bM:SRE tells the linker that the output file is Shared REusable.  Note\n+   that to actually build a shared library you will also need to specify an\n+   export list with the -Wl,-bE option.  */\n \n #define LINK_SPEC \"-T512 -H512 %{!r:-btextro} -bhalt:4 -bnodelcsect\\\n-   %{static:-bnso -bI:/lib/syscalls.exp} %{g*:-bexport:/usr/lib/libg.exp}\"\n+   %{static:-bnso -bI:/lib/syscalls.exp} %{g*:-bexport:/usr/lib/libg.exp}\\\n+   %{shared:-bM:SRE}\"\n \n /* Profiled library versions are used by linking with special directories.  */\n #define LIB_SPEC \"%{pg:-L/lib/profiled -L/usr/lib/profiled}\\\n    %{p:-L/lib/profiled -L/usr/lib/profiled} %{g*:-lg} -lc\"\n \n /* gcc must do the search itself to find libgcc.a, not use -l.  */\n-#define LINK_LIBGCC_SPECIAL_1\n+#define LIBGCC_SPEC \"%{!shared:libgcc.a%s}\"\n \n /* Don't turn -B into -L if the argument specifies a relative file name.  */\n #define RELATIVE_PREFIX_NOT_LINKDIR"}]}