{"sha": "e9527cfd9665e3cb0887682ccb0d17d040732799", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTk1MjdjZmQ5NjY1ZTNjYjA4ODc2ODJjY2IwZDE3ZDA0MDczMjc5OQ==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2008-08-27T23:54:36Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2008-08-27T23:54:36Z"}, "message": "re PR c/31673 (\"`for' loop initial declaration used outside C99 mode\" is confusing)\n\n2008-08-27  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n\n\tPR c/31673\n\t* c-decl.c (check_for_loop_decls): Improve error message. Give\n\thint.\ntestsuite/\n\t* gcc.dg/c90-fordecl-1.c: Update.\n\nFrom-SVN: r139681", "tree": {"sha": "a771c38af9403eafeab5a23860be3f703a4512d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a771c38af9403eafeab5a23860be3f703a4512d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e9527cfd9665e3cb0887682ccb0d17d040732799", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9527cfd9665e3cb0887682ccb0d17d040732799", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9527cfd9665e3cb0887682ccb0d17d040732799", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9527cfd9665e3cb0887682ccb0d17d040732799/comments", "author": null, "committer": null, "parents": [{"sha": "4ccd12e5aae640a352129fd387657da8e4d0f95b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ccd12e5aae640a352129fd387657da8e4d0f95b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ccd12e5aae640a352129fd387657da8e4d0f95b"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "63b1981daae6da0e6eaee483f45deca259cae5a3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9527cfd9665e3cb0887682ccb0d17d040732799/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9527cfd9665e3cb0887682ccb0d17d040732799/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e9527cfd9665e3cb0887682ccb0d17d040732799", "patch": "@@ -1,3 +1,9 @@\n+2008-08-27  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR c/31673\n+\t* c-decl.c (check_for_loop_decls): Improve error message. Give\n+\thint.\n+\n 2008-08-27  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n \n \tPR c/37186"}, {"sha": "ee04d9aa43b48ee5caedc862ef69859d8ec92c55", "filename": "gcc/c-decl.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9527cfd9665e3cb0887682ccb0d17d040732799/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9527cfd9665e3cb0887682ccb0d17d040732799/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=e9527cfd9665e3cb0887682ccb0d17d040732799", "patch": "@@ -6796,13 +6796,19 @@ check_for_loop_decls (void)\n   tree one_decl = NULL_TREE;\n   int n_decls = 0;\n \n-\n   if (!flag_isoc99)\n     {\n+      static bool hint = true;\n       /* If we get here, declarations have been used in a for loop without\n \t the C99 for loop scope.  This doesn't make much sense, so don't\n \t allow it.  */\n-      error (\"%<for%> loop initial declaration used outside C99 mode\");\n+      error (\"%<for%> loop initial declarations are only allowed in C99 mode\");\n+      if (hint)\n+\t{\n+\t  inform (input_location, \n+\t\t  \"use option -std=c99 or -std=gnu99 to compile your code\");\n+\t  hint = false;\n+\t}\n       return NULL_TREE;\n     }\n   /* C99 subclause 6.8.5 paragraph 3:"}, {"sha": "d5d73d74a0c186282140aa8ce76ba1f4a6547b59", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9527cfd9665e3cb0887682ccb0d17d040732799/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9527cfd9665e3cb0887682ccb0d17d040732799/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e9527cfd9665e3cb0887682ccb0d17d040732799", "patch": "@@ -1,3 +1,8 @@\n+2008-08-27  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR c/31673\n+\t* gcc.dg/c90-fordecl-1.c: Update.\n+\n 2008-08-27  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n \n \tPR c/37186"}, {"sha": "4aa3c5830229fbe819ecd21c9d162d5b952e8c84", "filename": "gcc/testsuite/gcc.dg/c90-fordecl-1.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9527cfd9665e3cb0887682ccb0d17d040732799/gcc%2Ftestsuite%2Fgcc.dg%2Fc90-fordecl-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9527cfd9665e3cb0887682ccb0d17d040732799/gcc%2Ftestsuite%2Fgcc.dg%2Fc90-fordecl-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc90-fordecl-1.c?ref=e9527cfd9665e3cb0887682ccb0d17d040732799", "patch": "@@ -9,5 +9,6 @@ foo (void)\n   int j = 0;\n   for (int i = 1; i <= 10; i++) /* { dg-bogus \"warning\" \"warning in place of error\" } */\n     j += i;\n-  /* { dg-error \"parse|decl\" \"declaration in for loop\" { target *-*-* } 10 } */\n+  /* { dg-error \"'for' loop initial declarations are only allowed in C99 mode\" \"declaration in for loop\" { target *-*-* } 10 } */\n+  /* { dg-message \"note: use option -std=c99 or -std=gnu99 to compile your code\" \"note\" { target *-*-* } 10 }} */\n }"}]}