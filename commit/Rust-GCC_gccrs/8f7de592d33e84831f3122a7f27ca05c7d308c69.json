{"sha": "8f7de592d33e84831f3122a7f27ca05c7d308c69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGY3ZGU1OTJkMzNlODQ4MzFmMzEyMmE3ZjI3Y2EwNWM3ZDMwOGM2OQ==", "commit": {"author": {"name": "Ira Rosen", "email": "ira.rosen@linaro.org", "date": "2011-05-31T12:31:04Z"}, "committer": {"name": "Ira Rosen", "email": "irar@gcc.gnu.org", "date": "2011-05-31T12:31:04Z"}, "message": "re PR tree-optimization/49093 (ICE in vect_enhance_data_refs_alignment() with volatile inside peeled loop)\n\n\n        PR tree-optimization/49093\n        * tree-vect-data-refs.c (vect_analyze_data_refs): Fail for\n        volatile data references.\n\nFrom-SVN: r174477", "tree": {"sha": "c62c699cd03a0617508a60b9be36816b8cff5f73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c62c699cd03a0617508a60b9be36816b8cff5f73"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8f7de592d33e84831f3122a7f27ca05c7d308c69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f7de592d33e84831f3122a7f27ca05c7d308c69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f7de592d33e84831f3122a7f27ca05c7d308c69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f7de592d33e84831f3122a7f27ca05c7d308c69/comments", "author": null, "committer": null, "parents": [{"sha": "8d8a3bda40b0fa5aeb801287f0e2e79affe26c54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d8a3bda40b0fa5aeb801287f0e2e79affe26c54"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "4270d2da80c5955e1db60dec29b3ce8c062f9aca", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f7de592d33e84831f3122a7f27ca05c7d308c69/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f7de592d33e84831f3122a7f27ca05c7d308c69/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8f7de592d33e84831f3122a7f27ca05c7d308c69", "patch": "@@ -1,3 +1,9 @@\n+2011-05-31  Ira Rosen  <ira.rosen@linaro.org>\n+\n+\tPR tree-optimization/49093\n+\t* tree-vect-data-refs.c (vect_analyze_data_refs): Fail for volatile\n+\tdata references.\n+\n 2011-05-31  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR debug/49047"}, {"sha": "612fc174b86f242c75a6b4ec5319d47fb5c6e6fb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f7de592d33e84831f3122a7f27ca05c7d308c69/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f7de592d33e84831f3122a7f27ca05c7d308c69/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8f7de592d33e84831f3122a7f27ca05c7d308c69", "patch": "@@ -1,3 +1,8 @@\n+2011-05-31  Ira Rosen  <ira.rosen@linaro.org>\n+\n+\tPR tree-optimization/49093\n+\t* gcc.dg/vect/pr49093.c: New test.\n+\n 2011-05-31  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR debug/49047"}, {"sha": "b8bded686873f030fc55e9861c9b73859a26dd51", "filename": "gcc/testsuite/gcc.dg/vect/pr49093.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f7de592d33e84831f3122a7f27ca05c7d308c69/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr49093.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f7de592d33e84831f3122a7f27ca05c7d308c69/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr49093.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr49093.c?ref=8f7de592d33e84831f3122a7f27ca05c7d308c69", "patch": "@@ -0,0 +1,22 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O1 -ftree-vectorize -fdump-tree-vect-details -fno-tree-fre\" } */\n+\n+volatile unsigned char g_324[4] = {0, 1, 0, 1};\n+void foo (int);\n+int x, y;\n+void func_81(void)\n+{\n+    int l_466, l_439[7] = {0}, g_97;\n+lbl_473:\n+    if (x) {\n+        for (g_97 = 0; (g_97 < 4); ++g_97) {\n+            if (y)\n+              goto lbl_473;\n+            g_324[g_97];\n+            l_466 = l_439[g_97];\n+        }\n+        foo(l_466);\n+    }\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "5023710f1e583bde3c151d7feb5ef18a704e9218", "filename": "gcc/tree-vect-data-refs.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f7de592d33e84831f3122a7f27ca05c7d308c69/gcc%2Ftree-vect-data-refs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f7de592d33e84831f3122a7f27ca05c7d308c69/gcc%2Ftree-vect-data-refs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-data-refs.c?ref=8f7de592d33e84831f3122a7f27ca05c7d308c69", "patch": "@@ -2584,6 +2584,16 @@ vect_analyze_data_refs (loop_vec_info loop_vinfo,\n             return false;\n         }\n \n+      if (TREE_THIS_VOLATILE (DR_REF (dr)))\n+        {\n+          if (vect_print_dump_info (REPORT_UNVECTORIZED_LOCATIONS))\n+            {\n+              fprintf (vect_dump, \"not vectorized: volatile type \");\n+              print_gimple_stmt (vect_dump, stmt, 0, TDF_SLIM);\n+            }\n+          return false;\n+        }\n+\n       base = unshare_expr (DR_BASE_ADDRESS (dr));\n       offset = unshare_expr (DR_OFFSET (dr));\n       init = unshare_expr (DR_INIT (dr));"}]}