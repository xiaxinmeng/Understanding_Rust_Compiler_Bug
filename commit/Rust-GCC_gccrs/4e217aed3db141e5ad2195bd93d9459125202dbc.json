{"sha": "4e217aed3db141e5ad2195bd93d9459125202dbc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGUyMTdhZWQzZGIxNDFlNWFkMjE5NWJkOTNkOTQ1OTEyNTIwMmRiYw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2000-02-28T11:55:43Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2000-02-28T11:55:43Z"}, "message": "calls.c (expand_call): Attempt to combine stack adjustments with pending stack adjustments.\n\nThu Feb 24 17:17:29 MET 2000 Jan Hubicka  <jh@suse.cz>\n\n\t* calls.c (expand_call): Attempt to combine stack adjustments with\n\tpending stack adjustments.\n\nFrom-SVN: r32230", "tree": {"sha": "ea6dbb8319ab6543e1633fcc2f65ec0b8ab63e0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ea6dbb8319ab6543e1633fcc2f65ec0b8ab63e0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4e217aed3db141e5ad2195bd93d9459125202dbc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e217aed3db141e5ad2195bd93d9459125202dbc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e217aed3db141e5ad2195bd93d9459125202dbc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e217aed3db141e5ad2195bd93d9459125202dbc/comments", "author": null, "committer": null, "parents": [{"sha": "035a6890e978b3ba9e23b8c202c2dbf997f2b673", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/035a6890e978b3ba9e23b8c202c2dbf997f2b673", "html_url": "https://github.com/Rust-GCC/gccrs/commit/035a6890e978b3ba9e23b8c202c2dbf997f2b673"}], "stats": {"total": 23, "additions": 21, "deletions": 2}, "files": [{"sha": "9d36cce74fd7fceeec5f6cb320a6e27d37c5e34a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e217aed3db141e5ad2195bd93d9459125202dbc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e217aed3db141e5ad2195bd93d9459125202dbc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4e217aed3db141e5ad2195bd93d9459125202dbc", "patch": "@@ -1,3 +1,8 @@\n+Mon Feb 28 12:53:57 MET 2000 Jan Hubicka  <jh@suse.cz>\n+\n+\t* calls.c (expand_call): Attempt to combine stack adjustments with\n+\tpending stack adjustments.\n+\n Mon Feb 28 11:34:43 2000  J\"orn Rennecke <amylaar@cygnus.co.uk>\n \n \t* loop.c (reg_in_basic_block_p): Don't abort when falling through"}, {"sha": "dfa52e02bd340657b4d93b41bd9e629ccffac266", "filename": "gcc/calls.c", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e217aed3db141e5ad2195bd93d9459125202dbc/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e217aed3db141e5ad2195bd93d9459125202dbc/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=4e217aed3db141e5ad2195bd93d9459125202dbc", "patch": "@@ -2276,8 +2276,22 @@ expand_call (exp, target, ignore)\n #ifdef PREFERRED_STACK_BOUNDARY\n   /* If we push args individually in reverse order, perform stack alignment\n      before the first push (the last arg).  */\n-  if (argblock == 0)\n-    anti_adjust_stack (GEN_INT (args_size.constant - unadjusted_args_size));\n+  if (args_size.constant != unadjusted_args_size)\n+    {\n+      /* When the stack adjustment is pending,\n+\t we get better code by combining the adjustments.  */\n+      if (pending_stack_adjust && !is_const)\n+\t{\n+\t  args_size.constant = (unadjusted_args_size\n+\t\t\t        + ((pending_stack_adjust + args_size.constant\n+\t\t\t\t    - unadjusted_args_size)\n+\t\t\t           % (preferred_stack_boundary / BITS_PER_UNIT)));\n+\t  pending_stack_adjust -= args_size.constant - unadjusted_args_size;\n+\t  do_pending_stack_adjust ();\n+\t}\n+      else if (argblock == 0)\n+\tanti_adjust_stack (GEN_INT (args_size.constant - unadjusted_args_size));\n+    }\n #endif\n #endif\n "}]}