{"sha": "1dd03b91ccae183b0b313cc0a54953dfc621951a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWRkMDNiOTFjY2FlMTgzYjBiMzEzY2MwYTU0OTUzZGZjNjIxOTUxYQ==", "commit": {"author": {"name": "Andreas Krebbel", "email": "Andreas.Krebbel@de.ibm.com", "date": "2013-05-15T08:57:19Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2013-05-15T08:57:19Z"}, "message": "s390.c (s390_register_move_cost): Don't impose the FPR<->GPR move cost penalty if ldgr/lgdr can be used.\n\n2013-05-15  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\t* config/s390/s390.c (s390_register_move_cost): Don't impose the\n\tFPR<->GPR move cost penalty if ldgr/lgdr can be used.\n\nFrom-SVN: r198923", "tree": {"sha": "9e58bebadb6ecee6dc1e3128e5fe17b234d7195b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9e58bebadb6ecee6dc1e3128e5fe17b234d7195b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1dd03b91ccae183b0b313cc0a54953dfc621951a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dd03b91ccae183b0b313cc0a54953dfc621951a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1dd03b91ccae183b0b313cc0a54953dfc621951a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dd03b91ccae183b0b313cc0a54953dfc621951a/comments", "author": null, "committer": null, "parents": [{"sha": "3b2453a973c7607e64ded18d757c7a4680c07bc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b2453a973c7607e64ded18d757c7a4680c07bc2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b2453a973c7607e64ded18d757c7a4680c07bc2"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "34097805cb4c04eb0a348eee61f8bfe01a61e54e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1dd03b91ccae183b0b313cc0a54953dfc621951a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1dd03b91ccae183b0b313cc0a54953dfc621951a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1dd03b91ccae183b0b313cc0a54953dfc621951a", "patch": "@@ -1,3 +1,8 @@\n+2013-05-15  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\t* config/s390/s390.c (s390_register_move_cost): Don't impose the\n+\tFPR<->GPR move cost penalty if ldgr/lgdr can be used.\n+\n 2013-05-15  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/57275"}, {"sha": "30c34901f8d4f25bd08617380f4591de6206ed6d", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1dd03b91ccae183b0b313cc0a54953dfc621951a/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1dd03b91ccae183b0b313cc0a54953dfc621951a/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=1dd03b91ccae183b0b313cc0a54953dfc621951a", "patch": "@@ -2432,11 +2432,13 @@ static int\n s390_register_move_cost (enum machine_mode mode ATTRIBUTE_UNUSED,\n                          reg_class_t from, reg_class_t to)\n {\n-/* On s390, copy between fprs and gprs is expensive.  */\n-  if ((reg_classes_intersect_p (from, GENERAL_REGS)\n-       && reg_classes_intersect_p (to, FP_REGS))\n-      || (reg_classes_intersect_p (from, FP_REGS)\n-\t  && reg_classes_intersect_p (to, GENERAL_REGS)))\n+  /* On s390, copy between fprs and gprs is expensive as long as no\n+     ldgr/lgdr can be used.  */\n+  if ((!TARGET_Z10 || GET_MODE_SIZE (mode) != 8)\n+      && ((reg_classes_intersect_p (from, GENERAL_REGS)\n+\t   && reg_classes_intersect_p (to, FP_REGS))\n+\t  || (reg_classes_intersect_p (from, FP_REGS)\n+\t      && reg_classes_intersect_p (to, GENERAL_REGS))))\n     return 10;\n \n   return 1;"}]}