{"sha": "8a502a808ec70c87e7a0a4bc7719115859a9dd7a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGE1MDJhODA4ZWM3MGM4N2U3YTBhNGJjNzcxOTExNTg1OWE5ZGQ3YQ==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2017-09-20T05:23:51Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2017-09-20T05:23:51Z"}, "message": "function.c (dump_stack_clash_frame_info): New function.\n\n        * function.c (dump_stack_clash_frame_info): New function.\n        * function.h (dump_stack_clash_frame_info): Prototype.\n        (enum stack_clash_probes): New enum.\n\nFrom-SVN: r252997", "tree": {"sha": "85770f187da62e84fac032a324ab8303032a2c02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/85770f187da62e84fac032a324ab8303032a2c02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8a502a808ec70c87e7a0a4bc7719115859a9dd7a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a502a808ec70c87e7a0a4bc7719115859a9dd7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a502a808ec70c87e7a0a4bc7719115859a9dd7a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a502a808ec70c87e7a0a4bc7719115859a9dd7a/comments", "author": null, "committer": null, "parents": [{"sha": "9c1b56c4e739dc6854f1f93526bf7da6f7268095", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c1b56c4e739dc6854f1f93526bf7da6f7268095", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c1b56c4e739dc6854f1f93526bf7da6f7268095"}], "stats": {"total": 64, "additions": 64, "deletions": 0}, "files": [{"sha": "9783313093768fa5e01007583d178fe48b3ec887", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a502a808ec70c87e7a0a4bc7719115859a9dd7a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a502a808ec70c87e7a0a4bc7719115859a9dd7a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8a502a808ec70c87e7a0a4bc7719115859a9dd7a", "patch": "@@ -1,5 +1,9 @@\n 2017-09-19  Jeff Law  <law@redhat.com>\n \n+        * function.c (dump_stack_clash_frame_info): New function.\n+        * function.h (dump_stack_clash_frame_info): Prototype.\n+        (enum stack_clash_probes): New enum.\n+\n \t* config/alpha/alpha.c (alpha_expand_prologue): Also check\n \tflag_stack_clash_protection.\n \t* config/arm/arm.c (arm_compute_static_chain_stack_bytes): Likewise."}, {"sha": "c03e2ac514270e32da3c16439f6f38f169b40f1f", "filename": "gcc/function.c", "status": "modified", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a502a808ec70c87e7a0a4bc7719115859a9dd7a/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a502a808ec70c87e7a0a4bc7719115859a9dd7a/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=8a502a808ec70c87e7a0a4bc7719115859a9dd7a", "patch": "@@ -5681,6 +5681,58 @@ get_arg_pointer_save_area (void)\n   return ret;\n }\n \f\n+\n+/* If debugging dumps are requested, dump information about how the\n+   target handled -fstack-check=clash for the prologue.\n+\n+   PROBES describes what if any probes were emitted.\n+\n+   RESIDUALS indicates if the prologue had any residual allocation\n+   (i.e. total allocation was not a multiple of PROBE_INTERVAL).  */\n+\n+void\n+dump_stack_clash_frame_info (enum stack_clash_probes probes, bool residuals)\n+{\n+  if (!dump_file)\n+    return;\n+\n+  switch (probes)\n+    {\n+    case NO_PROBE_NO_FRAME:\n+      fprintf (dump_file,\n+\t       \"Stack clash no probe no stack adjustment in prologue.\\n\");\n+      break;\n+    case NO_PROBE_SMALL_FRAME:\n+      fprintf (dump_file,\n+\t       \"Stack clash no probe small stack adjustment in prologue.\\n\");\n+      break;\n+    case PROBE_INLINE:\n+      fprintf (dump_file, \"Stack clash inline probes in prologue.\\n\");\n+      break;\n+    case PROBE_LOOP:\n+      fprintf (dump_file, \"Stack clash probe loop in prologue.\\n\");\n+      break;\n+    }\n+\n+  if (residuals)\n+    fprintf (dump_file, \"Stack clash residual allocation in prologue.\\n\");\n+  else\n+    fprintf (dump_file, \"Stack clash no residual allocation in prologue.\\n\");\n+\n+  if (frame_pointer_needed)\n+    fprintf (dump_file, \"Stack clash frame pointer needed.\\n\");\n+  else\n+    fprintf (dump_file, \"Stack clash no frame pointer needed.\\n\");\n+\n+  if (TREE_THIS_VOLATILE (cfun->decl))\n+    fprintf (dump_file,\n+\t     \"Stack clash noreturn prologue, assuming no implicit\"\n+\t     \" probes in caller.\\n\");\n+  else\n+    fprintf (dump_file,\n+\t     \"Stack clash not noreturn prologue.\\n\");\n+}\n+\n /* Add a list of INSNS to the hash HASHP, possibly allocating HASHP\n    for the first time.  */\n "}, {"sha": "76434cd59a50acf87493d433f88d7dfb4aa72d1e", "filename": "gcc/function.h", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a502a808ec70c87e7a0a4bc7719115859a9dd7a/gcc%2Ffunction.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a502a808ec70c87e7a0a4bc7719115859a9dd7a/gcc%2Ffunction.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.h?ref=8a502a808ec70c87e7a0a4bc7719115859a9dd7a", "patch": "@@ -551,6 +551,14 @@ do {\t\t\t\t\t\t\t\t\\\n   ((TARGET_PTRMEMFUNC_VBIT_LOCATION == ptrmemfunc_vbit_in_pfn)\t     \\\n    ? MAX (FUNCTION_BOUNDARY, 2 * BITS_PER_UNIT) : FUNCTION_BOUNDARY)\n \n+enum stack_clash_probes {\n+  NO_PROBE_NO_FRAME,\n+  NO_PROBE_SMALL_FRAME,\n+  PROBE_INLINE,\n+  PROBE_LOOP\n+};\n+\n+extern void dump_stack_clash_frame_info (enum stack_clash_probes, bool);\n \f\n \n extern void push_function_context (void);"}]}