{"sha": "1562c7987be115311a75b1074c3768a1b006adb6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTU2MmM3OTg3YmUxMTUzMTFhNzViMTA3NGMzNzY4YTFiMDA2YWRiNg==", "commit": {"author": {"name": "Jeff Law", "email": "jeffreyalaw@gmail.com", "date": "2021-07-05T21:23:43Z"}, "committer": {"name": "Jeff Law", "email": "jeffreyalaw@gmail.com", "date": "2021-07-05T21:25:39Z"}, "message": "Remove redundant compare in shift loop on H8\n\ngcc/ChangeLog\n\n\t* config/h8300/shiftrotate.md (shift-by-variable patterns): Update to\n\tgenerate condition code aware RTL directly.", "tree": {"sha": "38c22c67c06f6c7599142b94d866c2af7dba732e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/38c22c67c06f6c7599142b94d866c2af7dba732e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1562c7987be115311a75b1074c3768a1b006adb6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1562c7987be115311a75b1074c3768a1b006adb6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1562c7987be115311a75b1074c3768a1b006adb6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1562c7987be115311a75b1074c3768a1b006adb6/comments", "author": {"login": "JeffreyALaw", "id": 14062506, "node_id": "MDQ6VXNlcjE0MDYyNTA2", "avatar_url": "https://avatars.githubusercontent.com/u/14062506?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JeffreyALaw", "html_url": "https://github.com/JeffreyALaw", "followers_url": "https://api.github.com/users/JeffreyALaw/followers", "following_url": "https://api.github.com/users/JeffreyALaw/following{/other_user}", "gists_url": "https://api.github.com/users/JeffreyALaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/JeffreyALaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JeffreyALaw/subscriptions", "organizations_url": "https://api.github.com/users/JeffreyALaw/orgs", "repos_url": "https://api.github.com/users/JeffreyALaw/repos", "events_url": "https://api.github.com/users/JeffreyALaw/events{/privacy}", "received_events_url": "https://api.github.com/users/JeffreyALaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JeffreyALaw", "id": 14062506, "node_id": "MDQ6VXNlcjE0MDYyNTA2", "avatar_url": "https://avatars.githubusercontent.com/u/14062506?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JeffreyALaw", "html_url": "https://github.com/JeffreyALaw", "followers_url": "https://api.github.com/users/JeffreyALaw/followers", "following_url": "https://api.github.com/users/JeffreyALaw/following{/other_user}", "gists_url": "https://api.github.com/users/JeffreyALaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/JeffreyALaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JeffreyALaw/subscriptions", "organizations_url": "https://api.github.com/users/JeffreyALaw/orgs", "repos_url": "https://api.github.com/users/JeffreyALaw/repos", "events_url": "https://api.github.com/users/JeffreyALaw/events{/privacy}", "received_events_url": "https://api.github.com/users/JeffreyALaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7d6979197274a662da7bdc564314afe8415865c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d6979197274a662da7bdc564314afe8415865c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d6979197274a662da7bdc564314afe8415865c1"}], "stats": {"total": 22, "additions": 16, "deletions": 6}, "files": [{"sha": "485303cb906daf721a54ea0ce414723393838be2", "filename": "gcc/config/h8300/shiftrotate.md", "status": "modified", "additions": 16, "deletions": 6, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1562c7987be115311a75b1074c3768a1b006adb6/gcc%2Fconfig%2Fh8300%2Fshiftrotate.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1562c7987be115311a75b1074c3768a1b006adb6/gcc%2Fconfig%2Fh8300%2Fshiftrotate.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fshiftrotate.md?ref=1562c7987be115311a75b1074c3768a1b006adb6", "patch": "@@ -385,10 +385,15 @@\n    (parallel\n      [(set (match_dup 0)\n \t   (match_op_dup 2 [(match_dup 0) (const_int 1)]))\n-      (clobber (scratch:QI))])\n-   (set (match_dup 1) (plus:QI (match_dup 1) (const_int -1)))\n+      (clobber (reg:CC CC_REG))])\n+   (parallel\n+     [(set (reg:CCZN CC_REG)\n+\t   (compare:CCZN\n+\t     (plus:QI (match_dup 1) (const_int -1))\n+\t     (const_int 0)))\n+      (set (match_dup 1) (plus:QI (match_dup 1) (const_int -1)))])\n    (set (pc)\n-        (if_then_else (ne (match_dup 1) (const_int 0))\n+        (if_then_else (ne (reg:CCZN CC_REG) (const_int 0))\n \t\t      (label_ref (match_dup 4))\n \t\t      (pc)))\n    (match_dup 5)]\n@@ -416,10 +421,15 @@\n    (parallel\n      [(set (match_dup 0)\n \t   (match_op_dup 2 [(match_dup 0) (const_int 1)]))\n-      (clobber (scratch:QI))])\n-   (set (match_dup 3) (plus:QI (match_dup 3) (const_int -1)))\n+      (clobber (reg:CC CC_REG))])\n+   (parallel\n+     [(set (reg:CCZN CC_REG)\n+\t   (compare:CCZN\n+\t     (plus:QI (match_dup 3) (const_int -1))\n+\t     (const_int 0)))\n+      (set (match_dup 3) (plus:QI (match_dup 3) (const_int -1)))])\n    (set (pc)\n-        (if_then_else (ne (match_dup 3) (const_int 0))\n+        (if_then_else (ne (reg:CCZN CC_REG) (const_int 0))\n \t\t      (label_ref (match_dup 4))\n \t\t      (pc)))\n    (match_dup 5)]"}]}