{"sha": "773edaeff24e371cc331b6a22a77c23b20210460", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzczZWRhZWZmMjRlMzcxY2MzMzFiNmEyMmE3N2MyM2IyMDIxMDQ2MA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-04-23T23:27:20Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-04-23T23:27:20Z"}, "message": "(shadow_tag_warned): Let warned have three values, so that a mere warning doesn't prevent a pedwarn.\n\n(shadow_tag_warned): Let warned have three values, so that a mere\nwarning doesn't prevent a pedwarn.  Don't skip the error call at the\nend on accounted of warned.\n\nFrom-SVN: r4203", "tree": {"sha": "93f7d9b296caeac625f75045b0878201a0874cda", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/93f7d9b296caeac625f75045b0878201a0874cda"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/773edaeff24e371cc331b6a22a77c23b20210460", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/773edaeff24e371cc331b6a22a77c23b20210460", "html_url": "https://github.com/Rust-GCC/gccrs/commit/773edaeff24e371cc331b6a22a77c23b20210460", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/773edaeff24e371cc331b6a22a77c23b20210460/comments", "author": null, "committer": null, "parents": [{"sha": "6a5ed5bf13cc6d8267b9fc273291556142834a2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a5ed5bf13cc6d8267b9fc273291556142834a2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a5ed5bf13cc6d8267b9fc273291556142834a2b"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "f62e306559b4ffe673e3aed86be8aa1a7ec97e55", "filename": "gcc/c-decl.c", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/773edaeff24e371cc331b6a22a77c23b20210460/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/773edaeff24e371cc331b6a22a77c23b20210460/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=773edaeff24e371cc331b6a22a77c23b20210460", "patch": "@@ -3097,6 +3097,8 @@ void\n shadow_tag_warned (declspecs, warned)\n      tree declspecs;\n      int warned;\n+     /* 1 => we have done a pedwarn.  2 => we have done a warning, but\n+\tno pedwarn.  */\n {\n   int found_tag = 0;\n   register tree link;\n@@ -3119,7 +3121,8 @@ shadow_tag_warned (declspecs, warned)\n \n \t  if (name == 0)\n \t    {\n-\t      if (!warned && code != ENUMERAL_TYPE) /* Empty unnamed enum OK */\n+\t      if (warned != 1 && code != ENUMERAL_TYPE)\n+\t\t/* Empty unnamed enum OK */\n \t\t{\n \t\t  pedwarn (\"unnamed struct/union that defines no instances\");\n \t\t  warned = 1;\n@@ -3139,15 +3142,18 @@ shadow_tag_warned (declspecs, warned)\n       else\n \t{\n \t  if (!warned)\n-\t    pedwarn (\"useless keyword or type name in empty declaration\");\n-\t  warned = 1;\n+\t    {\n+\t      warning (\"useless keyword or type name in empty declaration\");\n+\t      warned = 2;\n+\t    }\n \t}\n     }\n \n-  if (!warned)\n+  if (found_tag > 1)\n+    error (\"two types specified in one empty declaration\");\n+\n+  if (warned != 1)\n     {\n-      if (found_tag > 1)\n-\terror (\"two types specified in one empty declaration\");\n       if (found_tag == 0)\n \tpedwarn (\"empty declaration\");\n     }"}]}