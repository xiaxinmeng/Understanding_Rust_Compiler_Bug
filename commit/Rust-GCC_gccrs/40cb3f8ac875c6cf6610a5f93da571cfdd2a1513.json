{"sha": "40cb3f8ac875c6cf6610a5f93da571cfdd2a1513", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDBjYjNmOGFjODc1YzZjZjY2MTBhNWY5M2RhNTcxY2ZkZDJhMTUxMw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2020-10-30T13:28:23Z"}, "committer": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2020-10-30T13:28:23Z"}, "message": "Disable TBAA for array descriptors.\n\n\t* trans-types.c: Include alias.h\n\t(gfc_get_array_type_bounds): Set typeless storage.", "tree": {"sha": "1f11e6cc61ded0b7016b5c01a721ce419d094d98", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f11e6cc61ded0b7016b5c01a721ce419d094d98"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/40cb3f8ac875c6cf6610a5f93da571cfdd2a1513", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40cb3f8ac875c6cf6610a5f93da571cfdd2a1513", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40cb3f8ac875c6cf6610a5f93da571cfdd2a1513", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40cb3f8ac875c6cf6610a5f93da571cfdd2a1513/comments", "author": null, "committer": null, "parents": [{"sha": "82ff7e3426ea926d090777173977f8bedd086816", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82ff7e3426ea926d090777173977f8bedd086816", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82ff7e3426ea926d090777173977f8bedd086816"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "b7129dcbe6db8cf2e85203ca573a07725fe20ad7", "filename": "gcc/fortran/trans-types.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40cb3f8ac875c6cf6610a5f93da571cfdd2a1513/gcc%2Ffortran%2Ftrans-types.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40cb3f8ac875c6cf6610a5f93da571cfdd2a1513/gcc%2Ffortran%2Ftrans-types.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-types.c?ref=40cb3f8ac875c6cf6610a5f93da571cfdd2a1513", "patch": "@@ -38,6 +38,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"trans-array.h\"\n #include \"dwarf2out.h\"\t/* For struct array_descr_info.  */\n #include \"attribs.h\"\n+#include \"alias.h\"\n \f\n \n #if (GFC_MAX_DIMENSIONS < 10)\n@@ -1903,6 +1904,10 @@ gfc_get_array_type_bounds (tree etype, int dimen, int codimen, tree * lbound,\n   base_type = gfc_get_array_descriptor_base (dimen, codimen, false);\n   TYPE_CANONICAL (fat_type) = base_type;\n   TYPE_STUB_DECL (fat_type) = TYPE_STUB_DECL (base_type);\n+  /* Arrays of unknown type must alias with all array descriptors.  */\n+  TYPE_TYPELESS_STORAGE (base_type) = 1;\n+  TYPE_TYPELESS_STORAGE (fat_type) = 1;\n+  gcc_checking_assert (!get_alias_set (base_type) && !get_alias_set (fat_type));\n \n   tmp = TYPE_NAME (etype);\n   if (tmp && TREE_CODE (tmp) == TYPE_DECL)"}]}