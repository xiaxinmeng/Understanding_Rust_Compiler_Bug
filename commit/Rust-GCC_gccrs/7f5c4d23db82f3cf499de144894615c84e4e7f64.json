{"sha": "7f5c4d23db82f3cf499de144894615c84e4e7f64", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Y1YzRkMjNkYjgyZjNjZjQ5OWRlMTQ0ODk0NjE1Yzg0ZTRlN2Y2NA==", "commit": {"author": {"name": "Maciej W. Rozycki", "email": "macro@linux-mips.org", "date": "2021-01-08T01:51:13Z"}, "committer": {"name": "Maciej W. Rozycki", "email": "macro@linux-mips.org", "date": "2021-01-09T16:30:50Z"}, "message": "VAX: Remove a duplicate `cc' mode attribute\n\nRemove the `cc' mode attribute that duplicates the implicitly defined\n`mode' attribute.  No change to semantics.\n\n\tgcc/\n\t* config/vax/vax.md (cc): Remove mode attribute.\n\t(subst_<cc>, subst_f<cc>): Rename to...\n\t(subst_<mode>, subst_f<VAXccnz:mode>): ... these respectively.\n\t(*cbranch<VAXint:mode>4_<VAXcc:mode>): Update for `cc' removal.\n\t(*cbranch<VAXfp:mode>4_<VAXccnz:mode>): Likewise.\n\t(*branch_<mode>, *branch_<mode>_reversed): Likewise.", "tree": {"sha": "8967549389dc0d0b9958f2483fcbc4ed92b96c99", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8967549389dc0d0b9958f2483fcbc4ed92b96c99"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f5c4d23db82f3cf499de144894615c84e4e7f64", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f5c4d23db82f3cf499de144894615c84e4e7f64", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f5c4d23db82f3cf499de144894615c84e4e7f64", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f5c4d23db82f3cf499de144894615c84e4e7f64/comments", "author": null, "committer": null, "parents": [{"sha": "c38bbf5eed1061634df192cf56086adc0410e7d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c38bbf5eed1061634df192cf56086adc0410e7d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c38bbf5eed1061634df192cf56086adc0410e7d8"}], "stats": {"total": 13, "additions": 6, "deletions": 7}, "files": [{"sha": "0a2c86cef9a843713e09b24087ab9e8d4e34355c", "filename": "gcc/config/vax/vax.md", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f5c4d23db82f3cf499de144894615c84e4e7f64/gcc%2Fconfig%2Fvax%2Fvax.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f5c4d23db82f3cf499de144894615c84e4e7f64/gcc%2Fconfig%2Fvax%2Fvax.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvax%2Fvax.md?ref=7f5c4d23db82f3cf499de144894615c84e4e7f64", "patch": "@@ -58,7 +58,6 @@\n \n (define_mode_iterator VAXcc [CC CCN CCNZ CCZ])\n (define_mode_iterator VAXccnz [CCN CCNZ CCZ])\n-(define_mode_attr cc [(CC \"cc\") (CCN \"ccn\") (CCNZ \"ccnz\") (CCZ \"ccz\")])\n \n (define_code_iterator any_extract [sign_extract zero_extract])\n \n@@ -67,7 +66,7 @@\n (include \"predicates.md\")\n \n ;; Make instructions that set the N, N+Z, and Z condition codes respectively.\n-(define_subst \"subst_<cc>\"\n+(define_subst \"subst_<mode>\"\n   [(set (match_operand 0 \"\")\n \t(match_operand 1 \"\"))\n    (clobber (reg:CC VAX_PSL_REGNUM))]\n@@ -78,7 +77,7 @@\n    (set (match_dup 0)\n \t(match_dup 1))])\n \n-(define_subst \"subst_f<cc>\"\n+(define_subst \"subst_f<VAXccnz:mode>\"\n   [(set (match_operand:VAXfp 0 \"\")\n \t(match_operand:VAXfp 1 \"\"))\n    (clobber (reg:CC VAX_PSL_REGNUM))]\n@@ -2174,7 +2173,7 @@\n (define_insn_and_split \"*cbranch<VAXint:mode>4_<VAXcc:mode>\"\n   [(set (pc)\n \t(if_then_else\n-\t  (match_operator 0 \"vax_<cc>_comparison_operator\"\n+\t  (match_operator 0 \"vax_<VAXcc:mode>_comparison_operator\"\n \t\t\t  [(match_operand:VAXint 1 \"general_operand\" \"nrmT\")\n \t\t\t   (match_operand:VAXint 2 \"general_operand\" \"nrmT\")])\n \t  (label_ref (match_operand 3 \"\" \"\"))\n@@ -2206,7 +2205,7 @@\n (define_insn_and_split \"*cbranch<VAXfp:mode>4_<VAXccnz:mode>\"\n   [(set (pc)\n \t(if_then_else\n-\t  (match_operator 0 \"vax_<cc>_comparison_operator\"\n+\t  (match_operator 0 \"vax_<VAXccnz:mode>_comparison_operator\"\n \t\t\t  [(match_operand:VAXfp 1 \"general_operand\" \"gF\")\n \t\t\t   (match_operand:VAXfp 2 \"general_operand\" \"gF\")])\n \t  (label_ref (match_operand 3 \"\" \"\"))\n@@ -2226,7 +2225,7 @@\n \n (define_insn \"*branch_<mode>\"\n   [(set (pc)\n-\t(if_then_else (match_operator 0 \"vax_<cc>_comparison_operator\"\n+\t(if_then_else (match_operator 0 \"vax_<mode>_comparison_operator\"\n \t\t\t\t      [(reg:VAXcc VAX_PSL_REGNUM)\n \t\t\t\t       (const_int 0)])\n \t\t      (label_ref (match_operand 1 \"\" \"\"))\n@@ -2237,7 +2236,7 @@\n ;; Recognize reversed jumps.\n (define_insn \"*branch_<mode>_reversed\"\n   [(set (pc)\n-\t(if_then_else (match_operator 0 \"vax_<cc>_comparison_operator\"\n+\t(if_then_else (match_operator 0 \"vax_<mode>_comparison_operator\"\n \t\t\t\t      [(reg:VAXcc VAX_PSL_REGNUM)\n \t\t\t\t       (const_int 0)])\n \t\t      (pc)"}]}