{"sha": "6e32abbfc25930c079b643a85750472d50baac00", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmUzMmFiYmZjMjU5MzBjMDc5YjY0M2E4NTc1MDQ3MmQ1MGJhYWMwMA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-06-12T17:01:02Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-06-12T17:01:02Z"}, "message": "re PR libgcj/6652 (new java.io.File(\"\").getCanonicalFile() throws exception)\n\n\t* java/io/natFilePosix.cc (getCanonicalPath): Treat \"\" like \".\".\n\tFixes PR libgcj/6652.\n\nFrom-SVN: r54558", "tree": {"sha": "c84cab82af76c730cffbb3b575a903dc2a03634d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c84cab82af76c730cffbb3b575a903dc2a03634d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e32abbfc25930c079b643a85750472d50baac00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e32abbfc25930c079b643a85750472d50baac00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e32abbfc25930c079b643a85750472d50baac00", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e32abbfc25930c079b643a85750472d50baac00/comments", "author": null, "committer": null, "parents": [{"sha": "d65cb654adaeecfc8d7533e0fb08ea89a60751a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d65cb654adaeecfc8d7533e0fb08ea89a60751a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d65cb654adaeecfc8d7533e0fb08ea89a60751a2"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "26bd707ec6c81562af587541cde77538fcec05f6", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e32abbfc25930c079b643a85750472d50baac00/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e32abbfc25930c079b643a85750472d50baac00/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=6e32abbfc25930c079b643a85750472d50baac00", "patch": "@@ -1,3 +1,8 @@\n+2002-06-12  Tom Tromey  <tromey@redhat.com>\n+\n+\t* java/io/natFilePosix.cc (getCanonicalPath): Treat \"\" like \".\".\n+\tFixes PR libgcj/6652.\n+\n 2002-06-10  Tom Tromey  <tromey@redhat.com>\n \n \t* java/lang/Class.h (Class::desiredAssertionStatus): Declare."}, {"sha": "f9fe78ef203c212bb562667e90618f816b736484", "filename": "libjava/java/io/natFilePosix.cc", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e32abbfc25930c079b643a85750472d50baac00/libjava%2Fjava%2Fio%2FnatFilePosix.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e32abbfc25930c079b643a85750472d50baac00/libjava%2Fjava%2Fio%2FnatFilePosix.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFilePosix.cc?ref=6e32abbfc25930c079b643a85750472d50baac00", "patch": "@@ -104,9 +104,16 @@ java::io::File::attr (jint query)\n jstring\n java::io::File::getCanonicalPath (void)\n {\n-  char *buf = (char *) __builtin_alloca (JvGetStringUTFLength (path) + 1);\n+  // We use `+2' here because we might need to use `.' for our special\n+  // case.\n+  char *buf = (char *) __builtin_alloca (JvGetStringUTFLength (path) + 2);\n   char buf2[MAXPATHLEN];\n   jsize total = JvGetStringUTFRegion (path, 0, path->length(), buf);\n+\n+  // Special case: treat \"\" the same as \".\".\n+  if (total == 0)\n+    buf[total++] = '.';\n+\n   buf[total] = '\\0';\n \n #ifdef HAVE_REALPATH"}]}