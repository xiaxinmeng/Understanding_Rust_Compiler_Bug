{"sha": "568eecadba8d1e6f1bce10ce0bd27b739c469048", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTY4ZWVjYWRiYThkMWU2ZjFiY2UxMGNlMGJkMjdiNzM5YzQ2OTA0OA==", "commit": {"author": {"name": "Daniel Franke", "email": "dfranke@gcc.gnu.org", "date": "2009-04-11T09:33:11Z"}, "committer": {"name": "Daniel Franke", "email": "dfranke@gcc.gnu.org", "date": "2009-04-11T09:33:11Z"}, "message": "resolve.c (resolve_global_procedure): Enable whole-file checking for procedures that are declared later in the file.\n\ngcc/fortran/:\n2009-04-11  Daniel Franke  <frake.daniel@gmail.com>\n\n        * resolve.c (resolve_global_procedure): Enable whole-file checking for\n        procedures that are declared later in the file.\n\n\ngcc/testsuite:\n2009-04-11  Daniel Franke  <franke.daniel@gmail.com>\n\n        * gfortran.dg/whole_file_5.f90: New.\n        * gfortran.dg/whole_file_6.f90: New.\n\nFrom-SVN: r145953", "tree": {"sha": "763cd45ceff094a3c6a0c824ec42bf738c78d786", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/763cd45ceff094a3c6a0c824ec42bf738c78d786"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/568eecadba8d1e6f1bce10ce0bd27b739c469048", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/568eecadba8d1e6f1bce10ce0bd27b739c469048", "html_url": "https://github.com/Rust-GCC/gccrs/commit/568eecadba8d1e6f1bce10ce0bd27b739c469048", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/568eecadba8d1e6f1bce10ce0bd27b739c469048/comments", "author": null, "committer": null, "parents": [{"sha": "8810712ed9d1a5c2031c640706af1a87acfd3e06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8810712ed9d1a5c2031c640706af1a87acfd3e06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8810712ed9d1a5c2031c640706af1a87acfd3e06"}], "stats": {"total": 49, "additions": 47, "deletions": 2}, "files": [{"sha": "9ecdf7272bdb4a80b904856b9e5f65fb096210b4", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/568eecadba8d1e6f1bce10ce0bd27b739c469048/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/568eecadba8d1e6f1bce10ce0bd27b739c469048/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=568eecadba8d1e6f1bce10ce0bd27b739c469048", "patch": "@@ -1,3 +1,8 @@\n+2009-04-11  Daniel Franke  <frake.daniel@gmail.com>\n+\n+\t* resolve.c (resolve_global_procedure): Enable whole-file checking for\n+\tprocedures that are declared later in the file.\n+\t\n 2009-04-10  Paolo Bonzini  <bonzini@gnu.org>\n \n \tPR middle-end/39701"}, {"sha": "fad067c86784bbd313da34920af22ad82a25fec4", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/568eecadba8d1e6f1bce10ce0bd27b739c469048/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/568eecadba8d1e6f1bce10ce0bd27b739c469048/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=568eecadba8d1e6f1bce10ce0bd27b739c469048", "patch": "@@ -1610,8 +1610,7 @@ resolve_global_procedure (gfc_symbol *sym, locus *where,\n   if (gfc_option.flag_whole_file\n \t&& gsym->type != GSYM_UNKNOWN\n \t&& gsym->ns\n-\t&& gsym->ns->proc_name\n-\t&& gsym->ns->proc_name->formal)\n+\t&& gsym->ns->proc_name)\n     {\n       /* Make sure that translation for the gsymbol occurs before\n \t the procedure currently being resolved.  */"}, {"sha": "108e17d07f1aed3df63e6cb01eb4e9714a780cfa", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/568eecadba8d1e6f1bce10ce0bd27b739c469048/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/568eecadba8d1e6f1bce10ce0bd27b739c469048/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=568eecadba8d1e6f1bce10ce0bd27b739c469048", "patch": "@@ -1,3 +1,8 @@\n+2009-04-11  Daniel Franke  <franke.daniel@gmail.com>\n+\n+\t* gfortran.dg/whole_file_5.f90: New.\n+\t* gfortran.dg/whole_file_6.f90: New.\n+\n 2009-04-11  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/39713"}, {"sha": "a03504663736549adf4a8c4ec069db360f6a9c66", "filename": "gcc/testsuite/gfortran.dg/whole_file_5.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/568eecadba8d1e6f1bce10ce0bd27b739c469048/gcc%2Ftestsuite%2Fgfortran.dg%2Fwhole_file_5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/568eecadba8d1e6f1bce10ce0bd27b739c469048/gcc%2Ftestsuite%2Fgfortran.dg%2Fwhole_file_5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fwhole_file_5.f90?ref=568eecadba8d1e6f1bce10ce0bd27b739c469048", "patch": "@@ -0,0 +1,18 @@\n+! { dg-do \"compile\" }\n+! { dg-options \"-O3 -fwhole-file -fdump-tree-optimized\" }\n+!\n+! Check that inlining of functions declared BEFORE usage works.\n+! If yes, then the dump does not contain a call to F().\n+!\n+\n+INTEGER FUNCTION f()\n+  f = 42\n+END FUNCTION\n+\n+PROGRAM main\n+  INTEGER :: a\n+  a = f()\n+  print *, a\n+END PROGRAM\n+\n+! { dg-final { scan-tree-dump-times \"= f\\(\\)\" 0 \"optimized\" } }"}, {"sha": "cb9e737104c20d36640580864600d516703eb906", "filename": "gcc/testsuite/gfortran.dg/whole_file_6.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/568eecadba8d1e6f1bce10ce0bd27b739c469048/gcc%2Ftestsuite%2Fgfortran.dg%2Fwhole_file_6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/568eecadba8d1e6f1bce10ce0bd27b739c469048/gcc%2Ftestsuite%2Fgfortran.dg%2Fwhole_file_6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fwhole_file_6.f90?ref=568eecadba8d1e6f1bce10ce0bd27b739c469048", "patch": "@@ -0,0 +1,18 @@\n+! { dg-do \"compile\" }\n+! { dg-options \"-O3 -fwhole-file -fdump-tree-optimized\" }\n+!\n+! Check that inlining of functions declared AFTER usage works.\n+! If yes, then the dump does not contain a call to F().\n+!\n+\n+PROGRAM main\n+  INTEGER :: a(3)\n+  a = f()\n+  print *, a\n+END PROGRAM\n+\n+INTEGER FUNCTION f()\n+  f = 42.0\n+END FUNCTION\n+\n+! { dg-final { scan-tree-dump-times \"= f\\(\\)\" 0 \"optimized\" } }"}]}