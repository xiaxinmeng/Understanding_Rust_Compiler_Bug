{"sha": "ce5458c277ba724e6558ba1b78161e70a4a73b76", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2U1NDU4YzI3N2JhNzI0ZTY1NThiYTFiNzgxNjFlNzBhNGE3M2I3Ng==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2015-12-30T22:10:13Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2015-12-30T22:10:13Z"}, "message": "re PR libfortran/68987 (double free or corruption in _gfortran_st_write_done when a write statement to an internal file uses an invalid format and the ERR= specifier appears.)\n\n2015-12-30  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/68987\n\t* gfortran.dg/error_format_2.f90: New test.\n\nFrom-SVN: r232007", "tree": {"sha": "8ae75bef348e501781c5083ab2de1758658fe966", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ae75bef348e501781c5083ab2de1758658fe966"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce5458c277ba724e6558ba1b78161e70a4a73b76", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce5458c277ba724e6558ba1b78161e70a4a73b76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce5458c277ba724e6558ba1b78161e70a4a73b76", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce5458c277ba724e6558ba1b78161e70a4a73b76/comments", "author": null, "committer": null, "parents": [{"sha": "c2cb0f4b9abfb7f177ee454fdb0b6dce247626a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2cb0f4b9abfb7f177ee454fdb0b6dce247626a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2cb0f4b9abfb7f177ee454fdb0b6dce247626a3"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "ba9221cf4c9b395288ac8f968f00e6e579c71099", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce5458c277ba724e6558ba1b78161e70a4a73b76/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce5458c277ba724e6558ba1b78161e70a4a73b76/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ce5458c277ba724e6558ba1b78161e70a4a73b76", "patch": "@@ -1,3 +1,8 @@\n+2015-12-30  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/68987\n+\t* gfortran.dg/error_format_2.f90: New test.\n+\n 2015-12-30  John David Anglin  <danglin@gcc.gnu.org>\n \n \t* gfortran.dg/coarray_40.f90: Revise to use dg-additional-options."}, {"sha": "421da9a0261eba05efafc8489a0b25fc3512387e", "filename": "gcc/testsuite/gfortran.dg/error_format_2.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce5458c277ba724e6558ba1b78161e70a4a73b76/gcc%2Ftestsuite%2Fgfortran.dg%2Ferror_format_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce5458c277ba724e6558ba1b78161e70a4a73b76/gcc%2Ftestsuite%2Fgfortran.dg%2Ferror_format_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ferror_format_2.f90?ref=ce5458c277ba724e6558ba1b78161e70a4a73b76", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do run }\n+! PR68987, this test case failed on a memory double free\n+program foo\n+  call s('(foo)')\n+end program\n+subroutine s(fmt)\n+  character (*) :: fmt\n+  character (1) :: c\n+  integer :: i\n+  write (c, fmt, iostat=i) 42\n+ ! print *, i\n+  if (i==0) call abort()\n+  write (c, fmt, err=100) 42\n+  call abort()\n+100 continue\n+end subroutine"}]}