{"sha": "0aad01985747ab503fd71ccf4767d0069fc3e85a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGFhZDAxOTg1NzQ3YWI1MDNmZDcxY2NmNDc2N2QwMDY5ZmMzZTg1YQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2015-11-07T10:18:38Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2015-11-07T10:18:38Z"}, "message": "Move #undef DEF_BUILTIN* to builtins.def\n\nI was confused at first why tree-core.h was undefining DEF_BUILTIN_CHKP\nbefore defining it, then undefining it again after including builtins.def.\nThis is because builtins.def provides a default definition of\nDEF_BUILTIN_CHKP, but leaves it up to the caller to undefine it where\nnecessary.  Similarly to the previous internal-fn.def patch, it seems\nmore obvious for builtins.def to #undef things unconditionally.\n\nOne argument might have been that keeping preprocessor stuff\nout of the .def files makes it easier for non-cpp parsers.  In practice\nthough we already have #ifs and multiline #defines, so single-line #undefs\nshould be easy in comparison.\n\nTested on x86_64-linux-gnu, aarch64-linux-gnu and arm-linux-gnueabi.\n\ngcc/ada/\n\t* gcc-interface/utils.c: Don't undef DEF_BUILTIN.\n\ngcc/c-family/\n\t* c-common.c: Don't undef DEF_BUILTIN.\n\ngcc/jit/\n\t* jit-builtins.c: Don't undef DEF_BUILTIN.\n\ngcc/lto/\n\t* lto-lang.c: Don't undef DEF_BUILTIN.\n\ngcc/\n\t* builtins.def: #undef DEF_BUILTIN and DEF_BUILTIN_CHKP\n\t* builtins.c, genmatch.c, tree-core.h: Don't undef them here.\n\nFrom-SVN: r229924", "tree": {"sha": "ccf3e9b48b09616d6c7845a4b402ae67fa434d63", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ccf3e9b48b09616d6c7845a4b402ae67fa434d63"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0aad01985747ab503fd71ccf4767d0069fc3e85a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0aad01985747ab503fd71ccf4767d0069fc3e85a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0aad01985747ab503fd71ccf4767d0069fc3e85a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0aad01985747ab503fd71ccf4767d0069fc3e85a/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "46e343b8d225732ae2e81509ca1accf47444f64b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46e343b8d225732ae2e81509ca1accf47444f64b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46e343b8d225732ae2e81509ca1accf47444f64b"}], "stats": {"total": 35, "additions": 24, "deletions": 11}, "files": [{"sha": "6ffc9aa6a89c5cde6773afd7996d783cfae6a818", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -1,3 +1,8 @@\n+2015-11-07  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* builtins.def: #undef DEF_BUILTIN and DEF_BUILTIN_CHKP\n+\t* builtins.c, genmatch.c, tree-core.h: Don't undef them here.\n+\n 2015-11-07  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* internal-fn.def: #undef DEF_INTERNAL_FN at the end."}, {"sha": "22ec245956de1df7621365d167d9cb9d1652cf7b", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -1,3 +1,7 @@\n+2015-11-07  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* gcc-interface/utils.c: Don't undef DEF_BUILTIN.\n+\n 2015-10-29  Andrew MacLeod  <amacleod@redhat.com>\n \n \t* gcc-interface/decl.c: Reorder #include's and remove duplicates."}, {"sha": "3b893b85fa753cbb18486bf0d7821ebd597a2312", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -6040,7 +6040,6 @@ install_builtin_functions (void)\n                    BOTH_P, FALLBACK_P, NONANSI_P,                       \\\n                    built_in_attributes[(int) ATTRS], IMPLICIT);\n #include \"builtins.def\"\n-#undef DEF_BUILTIN\n }\n \n /* ----------------------------------------------------------------------- *"}, {"sha": "ad661c199aa37664899f4b86ae83cb6bf627af5c", "filename": "gcc/builtins.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -78,7 +78,6 @@ const char * built_in_names[(int) END_BUILTINS] =\n {\n #include \"builtins.def\"\n };\n-#undef DEF_BUILTIN\n \n /* Setup an array of builtin_info_type, make sure each element decl is\n    initialized to NULL_TREE.  */"}, {"sha": "ed850df2d01155f311f62a24588ebd90320d9dc0", "filename": "gcc/builtins.def", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fbuiltins.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fbuiltins.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.def?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -945,3 +945,6 @@ DEF_GCC_BUILTIN (BUILT_IN_LINE, \"LINE\", BT_FN_INT, ATTR_NOTHROW_LEAF_LIST)\n \n /* Pointer Bounds Checker builtins.  */\n #include \"chkp-builtins.def\"\n+\n+#undef DEF_BUILTIN_CHKP\n+#undef DEF_BUILTIN"}, {"sha": "7a2781d3c7efafa8fb6388e725b7c8e16abedf2a", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -1,3 +1,7 @@\n+2015-11-07  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* c-common.c: Don't undef DEF_BUILTIN.\n+\n 2015-11-06  David Malcolm  <dmalcolm@redhat.com>\n \n \t* c-common.c (c_cpp_error): Convert parameter from location_t to"}, {"sha": "bdcb5b25401a09d34323c4640894a1b305d7b684", "filename": "gcc/c-family/c-common.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fc-family%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fc-family%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-common.c?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -5735,7 +5735,6 @@ c_define_builtins (tree va_list_ref_type_node, tree va_list_arg_type_node)\n \t\t   BOTH_P, FALLBACK_P, NONANSI_P,                       \\\n \t\t   built_in_attributes[(int) ATTRS], IMPLICIT);\n #include \"builtins.def\"\n-#undef DEF_BUILTIN\n \n   targetm.init_builtins ();\n "}, {"sha": "1eb8c24da7d4e673c877ed46b79e48df45bf3f26", "filename": "gcc/genmatch.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fgenmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fgenmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgenmatch.c?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -229,7 +229,6 @@ enum built_in_function {\n #include \"builtins.def\"\n END_BUILTINS\n };\n-#undef DEF_BUILTIN\n \n /* Return true if CODE represents a commutative tree code.  Otherwise\n    return false.  */\n@@ -4619,7 +4618,6 @@ add_operator (VIEW_CONVERT2, \"VIEW_CONVERT2\", \"tcc_unary\", 1);\n #define DEF_BUILTIN(ENUM, N, C, T, LT, B, F, NA, AT, IM, COND) \\\n   add_builtin (ENUM, # ENUM);\n #include \"builtins.def\"\n-#undef DEF_BUILTIN\n \n   /* Parse ahead!  */\n   parser p (r);"}, {"sha": "5da80441c5ce528e93477723c709571cb51817f9", "filename": "gcc/jit/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fjit%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fjit%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjit%2FChangeLog?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -1,3 +1,7 @@\n+2015-11-07  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* jit-builtins.c: Don't undef DEF_BUILTIN.\n+\n 2015-10-29  Andrew MacLeod  <amacleod@redhat.com>\n \n \t* dummy-frontend.c: Reorder #include's and remove duplicates."}, {"sha": "63ff5affb55f2d09514afdfb8b00dd7cec6e7f94", "filename": "gcc/jit/jit-builtins.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fjit%2Fjit-builtins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Fjit%2Fjit-builtins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjit%2Fjit-builtins.c?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -62,7 +62,6 @@ static const struct builtin_data builtin_data[] =\n {\n #include \"builtins.def\"\n };\n-#undef DEF_BUILTIN\n \n /* Helper function for find_builtin_by_name.  */\n "}, {"sha": "056cab6ffe554d86003d42a59810d674c50f949c", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -1,3 +1,7 @@\n+2015-11-07  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* lto-lang.c: Don't undef DEF_BUILTIN.\n+\n 2015-10-29  Andrew MacLeod  <amacleod@redhat.com>\n \n \t* lto-lang.c: Reorder #include's and remove duplicates."}, {"sha": "4805c2a69b17c88838970e981115e918a7e5486b", "filename": "gcc/lto/lto-lang.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Flto%2Flto-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Flto%2Flto-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto-lang.c?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -731,7 +731,6 @@ lto_define_builtins (tree va_list_ref_type_node ATTRIBUTE_UNUSED,\n \t\t     builtin_types[(int) LIBTYPE], BOTH_P, FALLBACK_P,\t\\\n \t\t     NONANSI_P, built_in_attributes[(int) ATTRS], IMPLICIT);\n #include \"builtins.def\"\n-#undef DEF_BUILTIN\n }\n \n static GTY(()) tree registered_builtin_types;"}, {"sha": "954368f70ff351237185d1ef8bdb03986e5b53d8", "filename": "gcc/tree-core.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Ftree-core.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0aad01985747ab503fd71ccf4767d0069fc3e85a/gcc%2Ftree-core.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-core.h?ref=0aad01985747ab503fd71ccf4767d0069fc3e85a", "patch": "@@ -159,13 +159,10 @@ enum built_in_function {\n \n   BEGIN_CHKP_BUILTINS,\n \n-#undef DEF_BUILTIN\n #define DEF_BUILTIN(ENUM, N, C, T, LT, B, F, NA, AT, IM, COND)\n-#undef DEF_BUILTIN_CHKP\n #define DEF_BUILTIN_CHKP(ENUM, N, C, T, LT, B, F, NA, AT, IM, COND) \\\n   ENUM##_CHKP = ENUM + BEGIN_CHKP_BUILTINS + 1,\n #include \"builtins.def\"\n-#undef DEF_BUILTIN_CHKP\n \n   END_CHKP_BUILTINS = BEGIN_CHKP_BUILTINS * 2 + 1,\n \n@@ -186,7 +183,6 @@ enum built_in_function {\n   /* Upper bound on non-language-specific builtins.  */\n   END_BUILTINS\n };\n-#undef DEF_BUILTIN\n \n /* Tree code classes.  Each tree_code has an associated code class\n    represented by a TREE_CODE_CLASS.  */"}]}