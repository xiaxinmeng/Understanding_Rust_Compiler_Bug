{"sha": "dfb8812683d03f266144dc9a20497ef5cb557c93", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZiODgxMjY4M2QwM2YyNjYxNDRkYzlhMjA0OTdlZjVjYjU1N2M5Mw==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2010-07-06T13:37:58Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-07-06T13:37:58Z"}, "message": "re PR c/44828 (possible integer wrong code bug)\n\n2010-07-06  Richard Guenther  <rguenther@suse.de>\n\n\tPR middle-end/44828\n\t* convert.c (convert_to_integer): Watch out for overflowing\n\tMULT_EXPR as well.\n\n\t* gcc.c-torture/execute/pr44828.c: New testcase.\n\nFrom-SVN: r161869", "tree": {"sha": "416997b33906d5c835be090548d2bc7556824351", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/416997b33906d5c835be090548d2bc7556824351"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dfb8812683d03f266144dc9a20497ef5cb557c93", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfb8812683d03f266144dc9a20497ef5cb557c93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfb8812683d03f266144dc9a20497ef5cb557c93", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfb8812683d03f266144dc9a20497ef5cb557c93/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c5d1f058528f7d400211b010d8a48201611688b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5d1f058528f7d400211b010d8a48201611688b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5d1f058528f7d400211b010d8a48201611688b8"}], "stats": {"total": 42, "additions": 39, "deletions": 3}, "files": [{"sha": "e25324e765de9563285a082c64b666da9af0aa2b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfb8812683d03f266144dc9a20497ef5cb557c93/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfb8812683d03f266144dc9a20497ef5cb557c93/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dfb8812683d03f266144dc9a20497ef5cb557c93", "patch": "@@ -1,3 +1,9 @@\n+2010-07-06  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/44828\n+\t* convert.c (convert_to_integer): Watch out for overflowing\n+\tMULT_EXPR as well.\n+\n 2010-07-05  Jan Hubicka  <jh@suse.cz>\n \n \t* lto-streamer.c (write_symbol_vec): Rename to ..."}, {"sha": "5fe4d5712f61c9d5060774b9a0c46a0de33b46f4", "filename": "gcc/convert.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfb8812683d03f266144dc9a20497ef5cb557c93/gcc%2Fconvert.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfb8812683d03f266144dc9a20497ef5cb557c93/gcc%2Fconvert.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconvert.c?ref=dfb8812683d03f266144dc9a20497ef5cb557c93", "patch": "@@ -768,13 +768,19 @@ convert_to_integer (tree type, tree expr)\n \t\t\t|| ex_form == LSHIFT_EXPR\n \t\t\t/* If we have !flag_wrapv, and either ARG0 or\n \t\t\t   ARG1 is of a signed type, we have to do\n-\t\t\t   PLUS_EXPR or MINUS_EXPR in an unsigned\n-\t\t\t   type.  Otherwise, we would introduce\n+\t\t\t   PLUS_EXPR, MINUS_EXPR or MULT_EXPR in an unsigned\n+\t\t\t   type in case the operation in outprec precision\n+\t\t\t   could overflow.  Otherwise, we would introduce\n \t\t\t   signed-overflow undefinedness.  */\n \t\t\t|| ((!TYPE_OVERFLOW_WRAPS (TREE_TYPE (arg0))\n \t\t\t     || !TYPE_OVERFLOW_WRAPS (TREE_TYPE (arg1)))\n+\t\t\t    && ((TYPE_PRECISION (TREE_TYPE (arg0)) * 2u\n+\t\t\t\t > outprec)\n+\t\t\t\t|| (TYPE_PRECISION (TREE_TYPE (arg1)) * 2u\n+\t\t\t\t    > outprec))\n \t\t\t    && (ex_form == PLUS_EXPR\n-\t\t\t\t|| ex_form == MINUS_EXPR)))\n+\t\t\t\t|| ex_form == MINUS_EXPR\n+\t\t\t\t|| ex_form == MULT_EXPR)))\n \t\t      typex = unsigned_type_for (typex);\n \t\t    else\n \t\t      typex = signed_type_for (typex);"}, {"sha": "d4225d7fb0496553eb6a4f5d5a9dc422bdb19fb4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfb8812683d03f266144dc9a20497ef5cb557c93/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfb8812683d03f266144dc9a20497ef5cb557c93/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dfb8812683d03f266144dc9a20497ef5cb557c93", "patch": "@@ -1,3 +1,8 @@\n+2010-07-06  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/44828\n+\t* gcc.c-torture/execute/pr44828.c: New testcase.\n+\n 2010-07-06  Shujing Zhao  <pearly.zhao@oracle.com>\n \n \t* g++.dg/warn/noeffect2.C: Adjust expected warning."}, {"sha": "e16be2dc7577cefd71b774e37b4bea0faf74bbe7", "filename": "gcc/testsuite/gcc.c-torture/execute/pr44828.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfb8812683d03f266144dc9a20497ef5cb557c93/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr44828.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfb8812683d03f266144dc9a20497ef5cb557c93/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr44828.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr44828.c?ref=dfb8812683d03f266144dc9a20497ef5cb557c93", "patch": "@@ -0,0 +1,19 @@\n+extern void abort (void);\n+\n+static char\n+foo (char si1, char si2)\n+{\n+  return si1 * si2;\n+}\n+\n+int a = 0x105F61CA;\n+\n+int\n+main (void)\n+{\n+  int b = 0x0332F5C8;\n+  if (foo (b, a) > 0)\n+    abort ();\n+  return 0;\n+}\n+"}]}