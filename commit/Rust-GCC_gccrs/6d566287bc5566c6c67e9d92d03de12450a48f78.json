{"sha": "6d566287bc5566c6c67e9d92d03de12450a48f78", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmQ1NjYyODdiYzU1NjZjNmM2N2U5ZDkyZDAzZGUxMjQ1MGE0OGY3OA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2006-02-15T09:41:02Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2006-02-15T09:41:02Z"}, "message": "gnatbind.adb (Scan_Bind_Arg): Replace error by warning on -M and native platforms.\n\n\t* gnatbind.adb (Scan_Bind_Arg): Replace error by warning on -M and\n\tnative platforms.\n\t(Gnatbind): Do not call Exit_Program (E_Success) at the end, so that\n\tfinalization can occur normally.\n\nFrom-SVN: r111074", "tree": {"sha": "921c605ccba93811b8c7c3d497efd18629df3359", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/921c605ccba93811b8c7c3d497efd18629df3359"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6d566287bc5566c6c67e9d92d03de12450a48f78", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d566287bc5566c6c67e9d92d03de12450a48f78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d566287bc5566c6c67e9d92d03de12450a48f78", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d566287bc5566c6c67e9d92d03de12450a48f78/comments", "author": null, "committer": null, "parents": [{"sha": "987b2901fd0d851c7c053d82745967481c399cba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/987b2901fd0d851c7c053d82745967481c399cba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/987b2901fd0d851c7c053d82745967481c399cba"}], "stats": {"total": 24, "additions": 16, "deletions": 8}, "files": [{"sha": "e1dddd984c6e1c5ffa52815a304c1184bb56af30", "filename": "gcc/ada/gnatbind.adb", "status": "modified", "additions": 16, "deletions": 8, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d566287bc5566c6c67e9d92d03de12450a48f78/gcc%2Fada%2Fgnatbind.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d566287bc5566c6c67e9d92d03de12450a48f78/gcc%2Fada%2Fgnatbind.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatbind.adb?ref=6d566287bc5566c6c67e9d92d03de12450a48f78", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -364,13 +364,14 @@ procedure Gnatbind is\n          --  -Mname\n \n          elsif Argv'Length >= 3 and then Argv (2) = 'M' then\n-            if Is_Cross_Compiler then\n-               Opt.Bind_Alternate_Main_Name := True;\n-               Opt.Alternate_Main_Name := new String'(Argv (3 .. Argv'Last));\n-            else\n-               Fail (\"-M option only valid for a cross-compiler\");\n+            if not Is_Cross_Compiler then\n+               Write_Line\n+                 (\"gnatbind: -M not expected to be used on native platforms\");\n             end if;\n \n+            Opt.Bind_Alternate_Main_Name := True;\n+            Opt.Alternate_Main_Name := new String'(Argv (3 .. Argv'Last));\n+\n          --  All other options are single character and are handled by\n          --  Scan_Binder_Switches.\n \n@@ -525,7 +526,9 @@ begin\n       Write_Str (\"GNATBIND \");\n       Write_Str (Gnat_Version_String);\n       Write_Eol;\n-      Write_Str (\"Copyright 1995-2005 Free Software Foundation, Inc.\");\n+      Write_Str (\"Copyright 1995-\" &\n+                 Current_Year &\n+                 \", Free Software Foundation, Inc.\");\n       Write_Eol;\n    end if;\n \n@@ -720,10 +723,15 @@ begin\n \n    if Total_Errors > 0 then\n       Exit_Program (E_Errors);\n+\n    elsif Total_Warnings > 0 then\n       Exit_Program (E_Warnings);\n+\n    else\n-      Exit_Program (E_Success);\n+      --  Do not call Exit_Program (E_Success), so that finalization occurs\n+      --  normally.\n+\n+      null;\n    end if;\n \n end Gnatbind;"}]}