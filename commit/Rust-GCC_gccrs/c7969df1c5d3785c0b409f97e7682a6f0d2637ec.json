{"sha": "c7969df1c5d3785c0b409f97e7682a6f0d2637ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzc5NjlkZjFjNWQzNzg1YzBiNDA5Zjk3ZTc2ODJhNmYwZDI2MzdlYw==", "commit": {"author": {"name": "Jeff Law", "email": "law@torsion.usersys.redhat.com", "date": "2020-06-01T21:14:50Z"}, "committer": {"name": "Jeff Law", "email": "law@torsion.usersys.redhat.com", "date": "2020-06-01T21:18:03Z"}, "message": "Fix 92085-2.c ICE due to having (const_int 0) as the destination of a set.\n\ngcc/\n\t* lower-subreg.c (resolve_simple_move): If simplify_gen_subreg_concatn\n\treturns (const_int 0) for the destination, then emit nothing.", "tree": {"sha": "7353fdd7a1ef0a299246d1a7547af7a7aff24a3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7353fdd7a1ef0a299246d1a7547af7a7aff24a3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7969df1c5d3785c0b409f97e7682a6f0d2637ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7969df1c5d3785c0b409f97e7682a6f0d2637ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7969df1c5d3785c0b409f97e7682a6f0d2637ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7969df1c5d3785c0b409f97e7682a6f0d2637ec/comments", "author": null, "committer": null, "parents": [{"sha": "172f2c42a10fd470c93f1e84575de9766c157591", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/172f2c42a10fd470c93f1e84575de9766c157591", "html_url": "https://github.com/Rust-GCC/gccrs/commit/172f2c42a10fd470c93f1e84575de9766c157591"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "abe7180c686f9de5a2b2d8e57c3568c0a4daa192", "filename": "gcc/lower-subreg.c", "status": "modified", "additions": 15, "deletions": 6, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7969df1c5d3785c0b409f97e7682a6f0d2637ec/gcc%2Flower-subreg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7969df1c5d3785c0b409f97e7682a6f0d2637ec/gcc%2Flower-subreg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flower-subreg.c?ref=c7969df1c5d3785c0b409f97e7682a6f0d2637ec", "patch": "@@ -1087,12 +1087,21 @@ resolve_simple_move (rtx set, rtx_insn *insn)\n \temit_clobber (dest);\n \n       for (i = 0; i < words; ++i)\n-\temit_move_insn (simplify_gen_subreg_concatn (word_mode, dest,\n-\t\t\t\t\t\t     dest_mode,\n-\t\t\t\t\t\t     i * UNITS_PER_WORD),\n-\t\t\tsimplify_gen_subreg_concatn (word_mode, src,\n-\t\t\t\t\t\t     orig_mode,\n-\t\t\t\t\t\t     i * UNITS_PER_WORD));\n+\t{\n+\t  rtx t = simplify_gen_subreg_concatn (word_mode, dest,\n+\t\t\t\t\t       dest_mode,\n+\t\t\t\t\t       i * UNITS_PER_WORD);\n+\t  /* simplify_gen_subreg_concatn can return (const_int 0) for\n+\t     some sub-objects of paradoxical subregs.  As a source operand,\n+\t     that's fine.  As a destination it must be avoided.  Those are\n+\t     supposed to be don't care bits, so we can just drop that store\n+\t     on the floor.  */\n+\t  if (t != CONST0_RTX (word_mode))\n+\t    emit_move_insn (t,\n+\t\t\t    simplify_gen_subreg_concatn (word_mode, src,\n+\t\t\t\t\t\t\t orig_mode,\n+\t\t\t\t\t\t\t i * UNITS_PER_WORD));\n+\t}\n     }\n \n   if (real_dest != NULL_RTX)"}]}