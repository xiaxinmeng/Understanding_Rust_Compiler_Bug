{"sha": "4b7a3ab82f1951b1ab808065cec829fecb27e206", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGI3YTNhYjgyZjE5NTFiMWFiODA4MDY1Y2VjODI5ZmVjYjI3ZTIwNg==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2019-05-10T21:41:19Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2019-05-10T21:41:19Z"}, "message": "PR libstdc++/90397 fix std::variant friend declarations\n\nClang diagnoses the inconsistent noexcept-specifier on the friend\ndeclaration of __get. Add it, and also on __get_storage.\n\n\tPR libstdc++/90397\n\t* include/std/variant (_Variant_storage<false, Types...>::_M_storage())\n\t(_Variant_storage<true, Types...>::_M_reset()))\n\t(_Variant_storage<true, Types...>::_M_storage())): Add noexcept.\n\t(__get_storage): Likewise.\n\t(variant): Add noexcept to friend declarations for __get and\n\t__get_storage.\n\nFrom-SVN: r271079", "tree": {"sha": "5b3730dd47e3684e8a955de2d3d5bce29b81492e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5b3730dd47e3684e8a955de2d3d5bce29b81492e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4b7a3ab82f1951b1ab808065cec829fecb27e206", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b7a3ab82f1951b1ab808065cec829fecb27e206", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b7a3ab82f1951b1ab808065cec829fecb27e206", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b7a3ab82f1951b1ab808065cec829fecb27e206/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7fb65a875956bac7095c17c545f2bfa131209f50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7fb65a875956bac7095c17c545f2bfa131209f50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7fb65a875956bac7095c17c545f2bfa131209f50"}], "stats": {"total": 22, "additions": 16, "deletions": 6}, "files": [{"sha": "1cc29702bd29ed7287f37b96f6672b69e9d94a48", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b7a3ab82f1951b1ab808065cec829fecb27e206/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b7a3ab82f1951b1ab808065cec829fecb27e206/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=4b7a3ab82f1951b1ab808065cec829fecb27e206", "patch": "@@ -1,5 +1,13 @@\n 2019-05-10  Jonathan Wakely  <jwakely@redhat.com>\n \n+\tPR libstdc++/90397\n+\t* include/std/variant (_Variant_storage<false, Types...>::_M_storage())\n+\t(_Variant_storage<true, Types...>::_M_reset()))\n+\t(_Variant_storage<true, Types...>::_M_storage())): Add noexcept.\n+\t(__get_storage): Likewise.\n+\t(variant): Add noexcept to friend declarations for __get and\n+\t__get_storage.\n+\n \tPR libstdc++/90388\n \t* include/bits/unique_ptr.h (default_delete, default_delete<T[]>):\n \tUse _Require for constraints."}, {"sha": "d539df125bfff997bc942a6f616e13b59b465c7e", "filename": "libstdc++-v3/include/std/variant", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b7a3ab82f1951b1ab808065cec829fecb27e206/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fvariant", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b7a3ab82f1951b1ab808065cec829fecb27e206/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fvariant", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fvariant?ref=4b7a3ab82f1951b1ab808065cec829fecb27e206", "patch": "@@ -402,7 +402,7 @@ namespace __variant\n       { _M_reset(); }\n \n       void*\n-      _M_storage() const\n+      _M_storage() const noexcept\n       {\n \treturn const_cast<void*>(static_cast<const void*>(\n \t    std::addressof(_M_u)));\n@@ -432,11 +432,11 @@ namespace __variant\n \t_M_index(_Np)\n \t{ }\n \n-      void _M_reset()\n+      void _M_reset() noexcept\n       { _M_index = variant_npos; }\n \n       void*\n-      _M_storage() const\n+      _M_storage() const noexcept\n       {\n \treturn const_cast<void*>(static_cast<const void*>(\n \t    std::addressof(_M_u)));\n@@ -760,7 +760,7 @@ namespace __variant\n \n   // Returns the raw storage for __v.\n   template<typename _Variant>\n-    void* __get_storage(_Variant&& __v)\n+    void* __get_storage(_Variant&& __v) noexcept\n     { return __v._M_storage(); }\n \n   template <typename _Maybe_variant_cookie, typename _Variant>\n@@ -1556,10 +1556,12 @@ namespace __variant\n #endif\n \n       template<size_t _Np, typename _Vp>\n-\tfriend constexpr decltype(auto) __detail::__variant::__get(_Vp&& __v);\n+\tfriend constexpr decltype(auto)\n+\t__detail::__variant::__get(_Vp&& __v) noexcept;\n \n       template<typename _Vp>\n-\tfriend void* __detail::__variant::__get_storage(_Vp&& __v);\n+\tfriend void*\n+\t__detail::__variant::__get_storage(_Vp&& __v) noexcept;\n \n #define _VARIANT_RELATION_FUNCTION_TEMPLATE(__OP) \\\n       template<typename... _Tp> \\"}]}