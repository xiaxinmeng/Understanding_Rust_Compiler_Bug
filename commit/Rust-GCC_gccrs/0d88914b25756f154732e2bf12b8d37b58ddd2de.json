{"sha": "0d88914b25756f154732e2bf12b8d37b58ddd2de", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGQ4ODkxNGIyNTc1NmYxNTQ3MzJlMmJmMTJiOGQzN2I1OGRkZDJkZQ==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernd.schmidt@analog.com", "date": "2005-11-16T13:20:06Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2005-11-16T13:20:06Z"}, "message": "crti.s (__init, __fini): Use appropriate prologue if __PIC__ is defined.\n\n\t* config/bfin/crti.s (__init, __fini): Use appropriate prologue if\n\t__PIC__ is defined.\n\t* config/bfin/crtn.s: Change epilogues to match.\n\t* config/bfin/t-bfin-elf (EXTRA_MULTILIB_PARTS): Define.\n\t* config/bfin/bfin.h (TARGET_CPU_CPP_BUILTINS): If flag_pic, define\n\t__PIC__ and __pic__.\n\nFrom-SVN: r107083", "tree": {"sha": "5234c6d769e7112a6c52e85b575489334593043a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5234c6d769e7112a6c52e85b575489334593043a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0d88914b25756f154732e2bf12b8d37b58ddd2de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d88914b25756f154732e2bf12b8d37b58ddd2de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d88914b25756f154732e2bf12b8d37b58ddd2de", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d88914b25756f154732e2bf12b8d37b58ddd2de/comments", "author": null, "committer": null, "parents": [{"sha": "b381d30b050fc2564453690d5dde1cfb6964f366", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b381d30b050fc2564453690d5dde1cfb6964f366", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b381d30b050fc2564453690d5dde1cfb6964f366"}], "stats": {"total": 39, "additions": 36, "deletions": 3}, "files": [{"sha": "dc84b221de79972deb7610234292ee9e45334bdf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d88914b25756f154732e2bf12b8d37b58ddd2de/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d88914b25756f154732e2bf12b8d37b58ddd2de/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0d88914b25756f154732e2bf12b8d37b58ddd2de", "patch": "@@ -1,3 +1,12 @@\n+2005-11-16  Bernd Schmidt  <bernd.schmidt@analog.com>\n+\n+\t* config/bfin/crti.s (__init, __fini): Use appropriate prologue if\n+\t__PIC__ is defined.\n+\t* config/bfin/crtn.s: Change epilogues to match.\n+\t* config/bfin/t-bfin-elf (EXTRA_MULTILIB_PARTS): Define.\n+\t* config/bfin/bfin.h (TARGET_CPU_CPP_BUILTINS): If flag_pic, define\n+\t__PIC__ and __pic__.\n+\n 2005-11-16  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n \n \tPR 24357"}, {"sha": "be4e565c37eb0f63a325d620afa1e8319a56c320", "filename": "gcc/config/bfin/bfin.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d88914b25756f154732e2bf12b8d37b58ddd2de/gcc%2Fconfig%2Fbfin%2Fbfin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d88914b25756f154732e2bf12b8d37b58ddd2de/gcc%2Fconfig%2Fbfin%2Fbfin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fbfin.h?ref=0d88914b25756f154732e2bf12b8d37b58ddd2de", "patch": "@@ -41,6 +41,11 @@ extern int target_flags;\n     {                                           \\\n       builtin_define (\"bfin\");                  \\\n       builtin_define (\"BFIN\");                  \\\n+      if (flag_pic)\t\t\t\t\\\n+\t{\t\t\t\t\t\\\n+\t  builtin_define (\"__PIC__\");\t\t\\\n+\t  builtin_define (\"__pic__\");\t\t\\\n+\t}\t\t\t\t\t\\\n     }                                           \\\n   while (0)\n #endif"}, {"sha": "84a98597c23b44b59923e5478cd5d39ff36b8130", "filename": "gcc/config/bfin/crti.s", "status": "modified", "additions": 14, "deletions": 3, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d88914b25756f154732e2bf12b8d37b58ddd2de/gcc%2Fconfig%2Fbfin%2Fcrti.s", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d88914b25756f154732e2bf12b8d37b58ddd2de/gcc%2Fconfig%2Fbfin%2Fcrti.s", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fcrti.s?ref=0d88914b25756f154732e2bf12b8d37b58ddd2de", "patch": "@@ -38,10 +38,21 @@ Boston, MA 02110-1301, USA.  */\n \t.globl  __init\n \t.type   __init,@function\n __init:\n-\tLINK 0;\n-\n+#if defined __PIC__\n+\t[--SP] = P5;\n+#endif\n+\tLINK 12;\n+#if defined __PIC__\n+\tP5 = [P5 + _current_shared_library_p5_offset_]\n+#endif\t\n \t.section .fini\n \t.globl  __fini\n \t.type   __fini,@function\n __fini:\n-\tLINK 0; \n+#if defined __PIC__\n+\t[--SP] = P5; \n+#endif\n+\tLINK 12; \n+#if defined __PIC__\n+\tP5 = [P5 + _current_shared_library_p5_offset_]\n+#endif\t"}, {"sha": "69421fcfa582f762cb4a7bfafcf495d25dfd3077", "filename": "gcc/config/bfin/crtn.s", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d88914b25756f154732e2bf12b8d37b58ddd2de/gcc%2Fconfig%2Fbfin%2Fcrtn.s", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d88914b25756f154732e2bf12b8d37b58ddd2de/gcc%2Fconfig%2Fbfin%2Fcrtn.s", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fcrtn.s?ref=0d88914b25756f154732e2bf12b8d37b58ddd2de", "patch": "@@ -36,8 +36,14 @@ Boston, MA 02110-1301, USA.  */\n \n \t.section .init\n \tunlink; \n+#if defined __PIC__\n+\tP5 = [SP++];\n+#endif\n \trts;\n \n \t.section .fini\n \tunlink;\n+#if defined __PIC__\n+\tP5 = [SP++];\n+#endif\n \trts;"}, {"sha": "aab2a1b7b5ae2cdd926d1af15eaaee0d41bae6ec", "filename": "gcc/config/bfin/t-bfin-elf", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d88914b25756f154732e2bf12b8d37b58ddd2de/gcc%2Fconfig%2Fbfin%2Ft-bfin-elf", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d88914b25756f154732e2bf12b8d37b58ddd2de/gcc%2Fconfig%2Fbfin%2Ft-bfin-elf", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Ft-bfin-elf?ref=0d88914b25756f154732e2bf12b8d37b58ddd2de", "patch": "@@ -32,3 +32,5 @@ $(T)crti.o: $(srcdir)/config/bfin/crti.s $(GCC_PASSES)\n $(T)crtn.o: $(srcdir)/config/bfin/crtn.s $(GCC_PASSES)\n \t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(MULTILIB_CFLAGS) $(INCLUDES) \\\n \t-c -o $(T)crtn.o -x assembler-with-cpp $(srcdir)/config/bfin/crtn.s\n+\n+EXTRA_MULTILIB_PARTS= crtbegin.o crtend.o crti.o crtn.o"}]}