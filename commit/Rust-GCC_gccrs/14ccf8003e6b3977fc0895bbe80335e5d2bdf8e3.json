{"sha": "14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTRjY2Y4MDAzZTZiMzk3N2ZjMDg5NWJiZTgwMzM1ZTVkMmJkZjhlMw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2008-03-13T21:10:07Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2008-03-13T21:10:07Z"}, "message": "re PR preprocessor/35322 (ICE with incomplete macro)\n\ngcc/testsuite\n\tPR libcpp/35322:\n\t* gcc.dg/cpp/pr35322.c: New file.\nlibcpp\n\tPR libcpp/35322:\n\t* directives.c (destringize_and_run): Set pfile->directive.\n\nFrom-SVN: r133195", "tree": {"sha": "5f5d1ece2626b71732e651e128c1cd46bd507234", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5f5d1ece2626b71732e651e128c1cd46bd507234"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3/comments", "author": null, "committer": null, "parents": [{"sha": "ca8bfb99cd460bb819a8e711f1cdcaf058106daf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca8bfb99cd460bb819a8e711f1cdcaf058106daf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca8bfb99cd460bb819a8e711f1cdcaf058106daf"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "862a43edcfb10e5ce03426ab10a4f10fe9593b10", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3", "patch": "@@ -1,3 +1,8 @@\n+2008-03-13  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR libcpp/35322:\n+\t* gcc.dg/cpp/pr35322.c: New file.\n+\n 2008-03-13  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* gcc.dg/vect/vect-align-2.c: Remove dg-do run directive."}, {"sha": "916b4cc55c3924051ab062637a2a5cffd8cd8bd8", "filename": "gcc/testsuite/gcc.dg/cpp/pr35322.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr35322.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr35322.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr35322.c?ref=14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3", "patch": "@@ -0,0 +1,4 @@\n+/* Test case for PR 35322 -- _Pragma ICE.  */\n+\n+/* { dg-do preprocess } */\n+_Pragma(\"GCC dependency\")"}, {"sha": "8e8dfe4626f8771f49d427fa5144ebe5f1215944", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3", "patch": "@@ -1,3 +1,8 @@\n+2008-03-13  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR libcpp/35322:\n+\t* directives.c (destringize_and_run): Set pfile->directive.\n+\n 2008-03-06  Markus Milleder  <markus.milleder@generali.at>\n \n \tPR preprocessor/35458"}, {"sha": "249a2324ee7d5ba23f3e0d4f617f4a88380f6968", "filename": "libcpp/directives.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3/libcpp%2Fdirectives.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3/libcpp%2Fdirectives.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fdirectives.c?ref=14ccf8003e6b3977fc0895bbe80335e5d2bdf8e3", "patch": "@@ -1507,6 +1507,7 @@ destringize_and_run (cpp_reader *pfile, const cpp_string *in)\n   tokenrun *saved_cur_run;\n   cpp_token *toks;\n   int count;\n+  const struct directive *save_directive;\n \n   dest = result = (char *) alloca (in->len - 1);\n   src = in->text + 1 + (in->text[0] == 'L');\n@@ -1547,8 +1548,11 @@ destringize_and_run (cpp_reader *pfile, const cpp_string *in)\n \n   start_directive (pfile);\n   _cpp_clean_line (pfile);\n+  save_directive = pfile->directive;\n+  pfile->directive = &dtable[T_PRAGMA];\n   do_pragma (pfile);\n   end_directive (pfile, 1);\n+  pfile->directive = save_directive;\n \n   /* We always insert at least one token, the directive result.  It'll\n      either be a CPP_PADDING or a CPP_PRAGMA.  In the later case, we "}]}