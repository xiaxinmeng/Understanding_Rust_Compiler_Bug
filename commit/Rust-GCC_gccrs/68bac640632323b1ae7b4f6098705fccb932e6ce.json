{"sha": "68bac640632323b1ae7b4f6098705fccb932e6ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjhiYWM2NDA2MzIzMjNiMWFlN2I0ZjYwOTg3MDVmY2NiOTMyZTZjZQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2015-08-15T13:23:30Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-08-15T13:23:30Z"}, "message": "cp-demangle.c (d_abi_tags): Preserve di->last_name across any ABI tags.\n\n\t* cp-demangle.c (d_abi_tags): Preserve di->last_name across any\n\tABI tags.\n\nFrom-SVN: r226910", "tree": {"sha": "765da68c0ebf64403ce8807bb37bdaf5736ee295", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/765da68c0ebf64403ce8807bb37bdaf5736ee295"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/68bac640632323b1ae7b4f6098705fccb932e6ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68bac640632323b1ae7b4f6098705fccb932e6ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68bac640632323b1ae7b4f6098705fccb932e6ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68bac640632323b1ae7b4f6098705fccb932e6ce/comments", "author": null, "committer": null, "parents": [{"sha": "60349f15cce1213fc4f3e36209332eb69dd24e95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60349f15cce1213fc4f3e36209332eb69dd24e95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60349f15cce1213fc4f3e36209332eb69dd24e95"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "8fdf6d2d83cc3e31aa6332725e32d61a56f80ceb", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68bac640632323b1ae7b4f6098705fccb932e6ce/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68bac640632323b1ae7b4f6098705fccb932e6ce/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=68bac640632323b1ae7b4f6098705fccb932e6ce", "patch": "@@ -1,3 +1,8 @@\n+2015-08-15  Ian Lance Taylor  <iant@google.com>\n+\n+\t* cp-demangle.c (d_abi_tags): Preserve di->last_name across any\n+\tABI tags.\n+\n 2015-08-11  Iain Buclaw  <ibuclaw@gdcproject.org>\n \n \t* d-demangle.c (dlang_parse_real): Remove call to strtod."}, {"sha": "c587895086d3cbc2fef7d03fb9ba3c005eda2cb9", "filename": "libiberty/cp-demangle.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68bac640632323b1ae7b4f6098705fccb932e6ce/libiberty%2Fcp-demangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68bac640632323b1ae7b4f6098705fccb932e6ce/libiberty%2Fcp-demangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fcp-demangle.c?ref=68bac640632323b1ae7b4f6098705fccb932e6ce", "patch": "@@ -1306,7 +1306,12 @@ d_encoding (struct d_info *di, int top_level)\n static struct demangle_component *\n d_abi_tags (struct d_info *di, struct demangle_component *dc)\n {\n+  struct demangle_component *hold_last_name;\n   char peek;\n+\n+  /* Preserve the last name, so the ABI tag doesn't clobber it.  */\n+  hold_last_name = di->last_name;\n+\n   while (peek = d_peek_char (di),\n \t peek == 'B')\n     {\n@@ -1315,6 +1320,9 @@ d_abi_tags (struct d_info *di, struct demangle_component *dc)\n       tag = d_source_name (di);\n       dc = d_make_comp (di, DEMANGLE_COMPONENT_TAGGED_NAME, dc, tag);\n     }\n+\n+  di->last_name = hold_last_name;\n+\n   return dc;\n }\n "}, {"sha": "5200cb34d19f421682ec57bf4af5be2903c56fdf", "filename": "libiberty/testsuite/demangle-expected", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68bac640632323b1ae7b4f6098705fccb932e6ce/libiberty%2Ftestsuite%2Fdemangle-expected", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68bac640632323b1ae7b4f6098705fccb932e6ce/libiberty%2Ftestsuite%2Fdemangle-expected", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Ftestsuite%2Fdemangle-expected?ref=68bac640632323b1ae7b4f6098705fccb932e6ce", "patch": "@@ -4389,3 +4389,9 @@ f(std::string[abi:foo], std::string[abi:foo])\n --format=gnu-v3\n _Z18IndirectExternCallIPU7stdcallU7regparmILi3EEFviiEiEvT_T0_S3_\n void IndirectExternCall<void ( regparm<3> stdcall*)(int, int), int>(void ( regparm<3> stdcall*)(int, int), int, void ( regparm<3> stdcall*)(int, int))\n+# \n+# ABI tags used to confuse the constructor name calculation.\n+--format=gnu-v3 --no-params\n+_ZNSt8ios_base7failureB5cxx11C1EPKcRKSt10error_code\n+std::ios_base::failure[abi:cxx11]::failure(char const*, std::error_code const&)\n+std::ios_base::failure[abi:cxx11]::failure"}]}