{"sha": "aa1826e2c4728c1ec3215b4770e0fe29b1500dac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWExODI2ZTJjNDcyOGMxZWMzMjE1YjQ3NzBlMGZlMjliMTUwMGRhYw==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2001-04-20T16:06:06Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2001-04-20T16:06:06Z"}, "message": "tree.c (cp_tree_equal): Adjust final switch formatting.\n\ncp:\n\t* tree.c (cp_tree_equal): Adjust final switch formatting. Add\n\t't' case.\ntestsuite:\n\t* g++.old-deja/g++.pt/typename28.C: New test.\n\nFrom-SVN: r41462", "tree": {"sha": "75cb508620c3c8f8c3a2093c2de7c74b85375ce5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/75cb508620c3c8f8c3a2093c2de7c74b85375ce5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aa1826e2c4728c1ec3215b4770e0fe29b1500dac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa1826e2c4728c1ec3215b4770e0fe29b1500dac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa1826e2c4728c1ec3215b4770e0fe29b1500dac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa1826e2c4728c1ec3215b4770e0fe29b1500dac/comments", "author": null, "committer": null, "parents": [{"sha": "06d9f09f53cd3d0c1164986a9c5ff3a37e59dec4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06d9f09f53cd3d0c1164986a9c5ff3a37e59dec4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06d9f09f53cd3d0c1164986a9c5ff3a37e59dec4"}], "stats": {"total": 60, "additions": 51, "deletions": 9}, "files": [{"sha": "8e86dbd154ed39686065efda37cc2904cf43c052", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa1826e2c4728c1ec3215b4770e0fe29b1500dac/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa1826e2c4728c1ec3215b4770e0fe29b1500dac/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=aa1826e2c4728c1ec3215b4770e0fe29b1500dac", "patch": "@@ -1,3 +1,8 @@\n+2001-04-20  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* tree.c (cp_tree_equal): Adjust final switch formatting. Add\n+\t't' case.\n+\n 2001-04-20  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* class.c (dfs_unshared_virtual_bases): Add ATTRIBUTE_UNUSED."}, {"sha": "43c493ecc2bf2cfa36798c76f2cdf056b71ce916", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 15, "deletions": 9, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa1826e2c4728c1ec3215b4770e0fe29b1500dac/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa1826e2c4728c1ec3215b4770e0fe29b1500dac/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=aa1826e2c4728c1ec3215b4770e0fe29b1500dac", "patch": "@@ -2008,21 +2008,27 @@ cp_tree_equal (t1, t2)\n \n   switch (TREE_CODE_CLASS (code1))\n     {\n-      int i;\n     case '1':\n     case '2':\n     case '<':\n     case 'e':\n     case 'r':\n     case 's':\n-      cmp = 1;\n-      for (i = 0; i < TREE_CODE_LENGTH (code1); ++i)\n-\t{\n-\t  cmp = cp_tree_equal (TREE_OPERAND (t1, i), TREE_OPERAND (t2, i));\n-\t  if (cmp <= 0)\n-\t    return cmp;\n-\t}\n-      return cmp;\n+      {\n+\tint i;\n+\t\n+\tcmp = 1;\n+\tfor (i = 0; i < TREE_CODE_LENGTH (code1); ++i)\n+\t  {\n+\t    cmp = cp_tree_equal (TREE_OPERAND (t1, i), TREE_OPERAND (t2, i));\n+\t    if (cmp <= 0)\n+\t      return cmp;\n+\t  }\n+\treturn cmp;\n+      }\n+    \n+      case 't':\n+\treturn same_type_p (t1, t2) ? 1 : 0;\n     }\n \n   return -1;"}, {"sha": "f2c3d70e037d20475ff9471b45a9bef0f0003942", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa1826e2c4728c1ec3215b4770e0fe29b1500dac/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa1826e2c4728c1ec3215b4770e0fe29b1500dac/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=aa1826e2c4728c1ec3215b4770e0fe29b1500dac", "patch": "@@ -1,3 +1,7 @@\n+2001-04-20  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* g++.old-deja/g++.pt/typename28.C: New test.\n+\n 2001-04-20  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* g++.old-deja/g++.abi/empty2.C: New test."}, {"sha": "a538c4d946f8ed104b7abfe90e5e9e491456cb36", "filename": "gcc/testsuite/g++.old-deja/g++.pt/typename28.C", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa1826e2c4728c1ec3215b4770e0fe29b1500dac/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ftypename28.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa1826e2c4728c1ec3215b4770e0fe29b1500dac/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ftypename28.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ftypename28.C?ref=aa1826e2c4728c1ec3215b4770e0fe29b1500dac", "patch": "@@ -0,0 +1,27 @@\n+// Build don't link:\n+//\n+// Origin: Jens.Maurer@gmx.net\n+// Copyright (C) 2001 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 11 Apr 2001 <nathan@codesourcery.com>\n+\n+// Bug 1844. We can meet types in cp_tree_equal via a template-id-expr.\n+\n+typedef int *Ptr;\n+\n+template<class T> struct B\n+{\n+  typedef typename T::template X<T> type;\n+  typedef typename T::template X<Ptr> type2;\n+  typedef typename T::template X<int *> type3;\n+  \n+  void foo (type);\n+  void baz (type2);\n+  \n+};\n+\n+template<class T> void B<T>::foo (type)\n+{\n+}\n+template<class T> void B<T>::baz (type3)\n+{\n+}"}]}