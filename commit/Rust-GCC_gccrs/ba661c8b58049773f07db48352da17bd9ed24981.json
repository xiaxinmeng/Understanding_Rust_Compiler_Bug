{"sha": "ba661c8b58049773f07db48352da17bd9ed24981", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmE2NjFjOGI1ODA0OTc3M2YwN2RiNDgzNTJkYTE3YmQ5ZWQyNDk4MQ==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-07-07T04:47:24Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2006-07-07T04:47:24Z"}, "message": "re PR fortran/28237 (print call())\n\n2006-07-07  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/28237\n\tPR fortran/23420\n\t* io.c (resolve_tag): Any integer that is not an assigned\n\tvariable is an error.\n\n2006-07-07  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/28237\n\tPR fortran/23420\n\t* gfortran.dg/print_fmt_5.f90: New test.\n\nFrom-SVN: r115246", "tree": {"sha": "2130c295ba64a01610afb8dab316d0cc47520ac1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2130c295ba64a01610afb8dab316d0cc47520ac1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba661c8b58049773f07db48352da17bd9ed24981", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba661c8b58049773f07db48352da17bd9ed24981", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba661c8b58049773f07db48352da17bd9ed24981", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba661c8b58049773f07db48352da17bd9ed24981/comments", "author": null, "committer": null, "parents": [{"sha": "9e33de052d8bd5dfdceb0e495857eb0c8fd06ed3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e33de052d8bd5dfdceb0e495857eb0c8fd06ed3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e33de052d8bd5dfdceb0e495857eb0c8fd06ed3"}], "stats": {"total": 65, "additions": 65, "deletions": 0}, "files": [{"sha": "f8d99302298001707924b7ed5469224403c514aa", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba661c8b58049773f07db48352da17bd9ed24981/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba661c8b58049773f07db48352da17bd9ed24981/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ba661c8b58049773f07db48352da17bd9ed24981", "patch": "@@ -1,3 +1,10 @@\n+2006-07-07  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/28237\n+\tPR fortran/23420\n+\t* io.c (resolve_tag): Any integer that is not an assigned\n+\tvariable is an error.\n+\n 2006-07-06  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n \n \tPR fortran/28129"}, {"sha": "725e2da66551749a0037c9a2c6ed72917e1d42be", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba661c8b58049773f07db48352da17bd9ed24981/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba661c8b58049773f07db48352da17bd9ed24981/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=ba661c8b58049773f07db48352da17bd9ed24981", "patch": "@@ -1063,6 +1063,13 @@ resolve_tag (const io_tag * tag, gfc_expr * e)\n \t\t  return FAILURE;\n \t\t}\n \t    }\n+\t  else if (e->ts.type == BT_INTEGER)\n+\t    {\n+\t      gfc_error (\"scalar '%s' FORMAT tag at %L is not an ASSIGNED \"\n+\t\t\t \"variable\", gfc_basic_typename (e->ts.type), &e->where);\n+\t      return FAILURE;\n+\t    }\n+\n \t  return SUCCESS;\n \t}\n       else"}, {"sha": "095a51ced6d978a1b4c66f834a785a1adf21d584", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba661c8b58049773f07db48352da17bd9ed24981/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba661c8b58049773f07db48352da17bd9ed24981/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ba661c8b58049773f07db48352da17bd9ed24981", "patch": "@@ -1,3 +1,9 @@\n+2006-07-07  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/28237\n+\tPR fortran/23420\n+\t* gfortran.dg/print_fmt_5.f90: New test.\n+\n 2006-07-06  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n \n \tPR fortran/28129"}, {"sha": "fb37d753971040ced3cd950709fd725074114bcf", "filename": "gcc/testsuite/gfortran.dg/print_fmt_5.f90", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba661c8b58049773f07db48352da17bd9ed24981/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba661c8b58049773f07db48352da17bd9ed24981/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_5.f90?ref=ba661c8b58049773f07db48352da17bd9ed24981", "patch": "@@ -0,0 +1,45 @@\n+! { dg-do compile }\n+! print_fmt_5.f90\n+! Test of fix for PR28237 and the last bit of PR23420.  See\n+! below for the description of the problem.\n+!\n+program r\n+  character(12) :: for = '(i5)', left = '(i', right = ')'\n+  integer :: i, j\n+  integer :: h(4) &\n+    = (/1h(, 1hi, 1h5, 1h)/)! { dg-warning \"HOLLERITH|Hollerith\" }\n+  namelist /mynml/ i\n+  i = fact ()\n+!\n+! All these are \"legal\" things to do; note however the warnings\n+! for extensions or obsolete features!\n+!\n+  print *, fact()\n+  print 100, fact()\n+  print '(i5)', fact()\n+  print mynml      ! { dg-warning \"is an extension\" }\n+  do i = 1, 5\n+    print trim(left)//char(iachar('0') + i)//trim(right), i\n+  end do\n+  assign 100 to i  ! { dg-warning \"ASSIGN statement\" }\n+  print i, fact()  ! { dg-warning \"ASSIGNED variable\" }\n+  print h, fact () ! { dg-warning \"Non-character in FORMAT\" }\n+!\n+! These are not and caused a segfault in trans-io:560\n+!\n+! PR28237\n+  print fact()     ! { dg-error \"not an ASSIGNED variable\" }\n+! original PR23420\n+  print precision(1.2_8) ! { dg-error \"type default CHARACTER\" }\n+! PR23420 points 4 and 5\n+  print j + j      ! { dg-error \"not an ASSIGNED variable\" }\n+! An extension of the above, encountered in writing the fix\n+  write (*, fact())! { dg-error \"not an ASSIGNED variable\" }\n+ 100 format (i5)\n+contains\n+  function fact()\n+    integer :: fact\n+    fact = 1\n+  end function fact\n+end\n+"}]}