{"sha": "c1b7d95a28e677514ac76d5a06f565d5ce03d600", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzFiN2Q5NWEyOGU2Nzc1MTRhYzc2ZDVhMDZmNTY1ZDVjZTAzZDYwMA==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2005-11-28T03:57:05Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2005-11-28T03:57:05Z"}, "message": "invoke.texi (powerpc msdata-data): Static data doesn't go in small data sections.\n\n\t* doc/invoke.texi (powerpc msdata-data): Static data doesn't go in\n\tsmall data sections.\n\t* config/rs6000/rs6000.c (rs6000_elf_in_small_data_p): Make global.\n\t* config/rs6000/rs6000-protos.h: (rs6000_elf_in_small_data_p): Declare.\n\t* config/rs6000/sysv4.h (ASM_OUTPUT_ALIGNED_LOCAL): Rename to..\n\t(ASM_OUTPUT_ALIGNED_DECL_LOCAL): ..this, adding extra parm.  Don't\n\toutput locals to sbss if !rs6000_elf_in_small_data_p.\n\t(ASM_OUTPUT_ALIGNED_BSS): Adjust for above.\n\nFrom-SVN: r107592", "tree": {"sha": "3515decec7ad63fba6dd25e7d8ccc9614454cd01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3515decec7ad63fba6dd25e7d8ccc9614454cd01"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c1b7d95a28e677514ac76d5a06f565d5ce03d600", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1b7d95a28e677514ac76d5a06f565d5ce03d600", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1b7d95a28e677514ac76d5a06f565d5ce03d600", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1b7d95a28e677514ac76d5a06f565d5ce03d600/comments", "author": null, "committer": null, "parents": [{"sha": "bf00cc0f1bcec18d171b241839ba13889c180e6f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf00cc0f1bcec18d171b241839ba13889c180e6f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf00cc0f1bcec18d171b241839ba13889c180e6f"}], "stats": {"total": 25, "additions": 17, "deletions": 8}, "files": [{"sha": "a80979ea5e96eb767083a081b8c2a53b750406a8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1b7d95a28e677514ac76d5a06f565d5ce03d600/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1b7d95a28e677514ac76d5a06f565d5ce03d600/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c1b7d95a28e677514ac76d5a06f565d5ce03d600", "patch": "@@ -1,3 +1,14 @@\n+2005-11-28  Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* doc/invoke.texi (powerpc msdata-data): Static data doesn't go in\n+\tsmall data sections.\n+\t* config/rs6000/rs6000.c (rs6000_elf_in_small_data_p): Make global.\n+\t* config/rs6000/rs6000-protos.h: (rs6000_elf_in_small_data_p): Declare.\n+\t* config/rs6000/sysv4.h (ASM_OUTPUT_ALIGNED_LOCAL): Rename to..\n+\t(ASM_OUTPUT_ALIGNED_DECL_LOCAL): ..this, adding extra parm.  Don't\n+\toutput locals to sbss if !rs6000_elf_in_small_data_p.\n+\t(ASM_OUTPUT_ALIGNED_BSS): Adjust for above.\n+\n 2005-11-28  Alan Modra  <amodra@bigpond.net.au>\n \n \tPR target/24997"}, {"sha": "65cb79d7cbfdef43c9153af5657ee8e9bfc6a4f3", "filename": "gcc/config/rs6000/rs6000-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1b7d95a28e677514ac76d5a06f565d5ce03d600/gcc%2Fconfig%2Frs6000%2Frs6000-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1b7d95a28e677514ac76d5a06f565d5ce03d600/gcc%2Fconfig%2Frs6000%2Frs6000-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-protos.h?ref=c1b7d95a28e677514ac76d5a06f565d5ce03d600", "patch": "@@ -123,6 +123,7 @@ extern rtx rs6000_libcall_value (enum machine_mode);\n extern rtx rs6000_va_arg (tree, tree);\n extern int function_ok_for_sibcall (tree);\n extern void rs6000_elf_declare_function_name (FILE *, const char *, tree);\n+extern bool rs6000_elf_in_small_data_p (tree);\n #ifdef ARGS_SIZE_RTX\n /* expr.h defines ARGS_SIZE_RTX and `enum direction' */\n extern enum direction function_arg_padding (enum machine_mode, tree);"}, {"sha": "8d5cd99b01ed25752e236d4fd034b564f7dba609", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1b7d95a28e677514ac76d5a06f565d5ce03d600/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1b7d95a28e677514ac76d5a06f565d5ce03d600/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=c1b7d95a28e677514ac76d5a06f565d5ce03d600", "patch": "@@ -615,7 +615,6 @@ static void rs6000_elf_select_rtx_section (enum machine_mode, rtx,\n \t\t\t\t\t   unsigned HOST_WIDE_INT);\n static void rs6000_elf_encode_section_info (tree, rtx, int)\n      ATTRIBUTE_UNUSED;\n-static bool rs6000_elf_in_small_data_p (tree);\n #endif\n #if TARGET_XCOFF\n static void rs6000_xcoff_asm_globalize_label (FILE *, const char *);\n@@ -17437,7 +17436,7 @@ rs6000_elf_encode_section_info (tree decl, rtx rtl, int first)\n     }\n }\n \n-static bool\n+bool\n rs6000_elf_in_small_data_p (tree decl)\n {\n   if (rs6000_sdata == SDATA_NONE)"}, {"sha": "30777762e482377fa6d03748373f946e137baec2", "filename": "gcc/config/rs6000/sysv4.h", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1b7d95a28e677514ac76d5a06f565d5ce03d600/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1b7d95a28e677514ac76d5a06f565d5ce03d600/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fsysv4.h?ref=c1b7d95a28e677514ac76d5a06f565d5ce03d600", "patch": "@@ -550,12 +550,10 @@ extern int rs6000_pic_labelno;\n \n #define\tLCOMM_ASM_OP\t\"\\t.lcomm\\t\"\n \n-/* Override elfos.h definition.  */\n-#undef\tASM_OUTPUT_ALIGNED_LOCAL\n-#define\tASM_OUTPUT_ALIGNED_LOCAL(FILE, NAME, SIZE, ALIGN)\t\t\\\n+/* Describe how to emit uninitialized local items.  */\n+#define\tASM_OUTPUT_ALIGNED_DECL_LOCAL(FILE, DECL, NAME, SIZE, ALIGN)\t\\\n do {\t\t\t\t\t\t\t\t\t\\\n-  if (rs6000_sdata != SDATA_NONE && (SIZE) > 0\t\t\t\t\\\n-      && (SIZE) <= g_switch_value)\t\t\t\t\t\\\n+  if ((DECL) && rs6000_elf_in_small_data_p (DECL))\t\t\t\\\n     {\t\t\t\t\t\t\t\t\t\\\n       sbss_section ();\t\t\t\t\t\t\t\\\n       ASM_OUTPUT_ALIGN (FILE, exact_log2 (ALIGN / BITS_PER_UNIT));\t\\\n@@ -577,7 +575,7 @@ do {\t\t\t\t\t\t\t\t\t\\\n /* Describe how to emit uninitialized external linkage items.  */\n #define\tASM_OUTPUT_ALIGNED_BSS(FILE, DECL, NAME, SIZE, ALIGN)\t\t\\\n do {\t\t\t\t\t\t\t\t\t\\\n-  ASM_OUTPUT_ALIGNED_LOCAL (FILE, NAME, SIZE, ALIGN);\t\t\t\\\n+  ASM_OUTPUT_ALIGNED_DECL_LOCAL (FILE, DECL, NAME, SIZE, ALIGN);\t\\\n } while (0)\n \n #ifdef HAVE_GAS_MAX_SKIP_P2ALIGN"}]}