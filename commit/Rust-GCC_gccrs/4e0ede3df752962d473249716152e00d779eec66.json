{"sha": "4e0ede3df752962d473249716152e00d779eec66", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGUwZWRlM2RmNzUyOTYyZDQ3MzI0OTcxNjE1MmUwMGQ3NzllZWM2Ng==", "commit": {"author": {"name": "Thomas Quinot", "email": "quinot@adacore.com", "date": "2008-03-26T07:34:57Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-03-26T07:34:57Z"}, "message": "re PR ada/33688 (Ada package Gnat.Sockets missing constant for IP_PKTINFO (patch))\n\n2008-03-26  Thomas Quinot  <quinot@adacore.com>\n\nPR ada/33688\n\n\t* g-socket.ads, g-socket.adb (Options, Set_Socket_Option,\n\tGet_Socket_Option): Add support for Receive_Packet_Info.\n\n\t* g-soccon.ads, g-soccon-tru64.ads, g-soccon-aix.ads,\n\tg-soccon-irix.ads, g-soccon-hpux.ads, g-soccon-solaris.ads,\n\tg-soccon-vms.ads, g-soccon-mingw.ads, g-soccon-freebsd.ads,\n\tg-soccon-hpux-ia64.ads, g-soccon-solaris-64.ads, g-soccon-darwin.ads,\n\tg-soccon-lynxos.ads, g-soccon-linux-64.ads, g-soccon-linux-x86.ads: Add\n\tnew constants SO_REUSEPORT and IP_PKTINFO\n\nFrom-SVN: r133545", "tree": {"sha": "468353a8f7fe1902433ae7f2395131578ba89eea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/468353a8f7fe1902433ae7f2395131578ba89eea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4e0ede3df752962d473249716152e00d779eec66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e0ede3df752962d473249716152e00d779eec66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e0ede3df752962d473249716152e00d779eec66", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e0ede3df752962d473249716152e00d779eec66/comments", "author": null, "committer": null, "parents": [{"sha": "939759fcc993f08e734ed2942a64a8f406335b07", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/939759fcc993f08e734ed2942a64a8f406335b07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/939759fcc993f08e734ed2942a64a8f406335b07"}], "stats": {"total": 159, "additions": 97, "deletions": 62}, "files": [{"sha": "b1f6376082dd69030951fee8b0f96960eb37d493", "filename": "gcc/ada/g-soccon-aix.ads", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-aix.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-aix.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-aix.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=           1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=           4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=         512; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=           8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=         128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=          32; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=          11; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=          12; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=          13; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=          -1; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "b48c4df65ed88dc40f1c5865b33793a51694e871", "filename": "gcc/ada/g-soccon-darwin.ads", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-darwin.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-darwin.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-darwin.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -35,7 +35,7 @@\n --  by the GNAT.Sockets package (g-socket.ads). This package should not be\n --  directly with'ed by an applications program.\n \n---  This is the version for powerpc-apple-darwin8.8.0\n+--  This is the version for powerpc-apple-darwin8.9.0\n --  This file is generated automatically, do not modify it by hand! Instead,\n --  make changes to gen-soccon.c and re-run it on each target.\n \n@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=           1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=           4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=         512; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=           8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=         128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=          32; --  Can send broadcast msgs\n@@ -182,7 +183,7 @@ package GNAT.Sockets.Constants is\n    -- Properties of supported interfaces --\n    ----------------------------------------\n \n-   Need_Netdb_Buffer  : constant :=           1; --  Need buffer for Netdb ops\n+   Need_Netdb_Buffer  : constant :=           0; --  Need buffer for Netdb ops\n \n    ----------------------\n    -- Additional flags --"}, {"sha": "c07fc1852d6ae3da774cb1d1d6f9b20157f296f8", "filename": "gcc/ada/g-soccon-freebsd.ads", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-freebsd.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-freebsd.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-freebsd.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -35,7 +35,7 @@\n --  by the GNAT.Sockets package (g-socket.ads). This package should not be\n --  directly with'ed by an applications program.\n \n---  This is the version for i386-unknown-freebsd6.1\n+--  This is the version for i386-unknown-freebsd6.2\n --  This file is generated automatically, do not modify it by hand! Instead,\n --  make changes to gen-soccon.c and re-run it on each target.\n \n@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=           1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=           4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=         512; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=           8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=         128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=          32; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=          11; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=          12; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=          13; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=          -1; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "3caa99cc0ade17450ea3e55d5da737d2b19e8d90", "filename": "gcc/ada/g-soccon-hpux-ia64.ads", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-hpux-ia64.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-hpux-ia64.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-hpux-ia64.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=           1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=           4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=         512; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=           8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=         128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=          32; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=           4; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=           5; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=           6; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=          -1; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "9be66ad4f0809901e4f1aecaeabf034829aaff28", "filename": "gcc/ada/g-soccon-hpux.ads", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-hpux.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-hpux.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-hpux.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=           1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=           4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=         512; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=           8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=         128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=          32; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=           4; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=           5; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=           6; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=          -1; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "1f367548705e6ae9247605f670f7306b98d955e9", "filename": "gcc/ada/g-soccon-irix.ads", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-irix.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-irix.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-irix.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=           1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=           4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=         512; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=           8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=         128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=          32; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=          22; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=          23; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=          24; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=          -1; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "0cbafed9fe086ef194a7c3eed9a9a4a3b607f882", "filename": "gcc/ada/g-soccon-linux-64.ads", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-linux-64.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-linux-64.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-linux-64.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -35,7 +35,7 @@\n --  by the GNAT.Sockets package (g-socket.ads). This package should not be\n --  directly with'ed by an applications program.\n \n---  This is the version for ia64-hp-linux-gnu\n+--  This is the version for x86_64-pc-linux-gnu\n --  This file is generated automatically, do not modify it by hand! Instead,\n --  make changes to gen-soccon.c and re-run it on each target.\n \n@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=            1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=            2; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=           -1; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=            9; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=           13; --  Defer close to flush data\n    SO_BROADCAST       : constant :=            6; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=           34; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=           35; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=           36; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=            8; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "ca1418f3fca4b1dd507a60c1fd30ee14cf9abfa7", "filename": "gcc/ada/g-soccon-linux-x86.ads", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-linux-x86.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-linux-x86.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-linux-x86.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=            1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=            2; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=           -1; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=            9; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=           13; --  Defer close to flush data\n    SO_BROADCAST       : constant :=            6; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=           34; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=           35; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=           36; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=            8; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "f93e88e53ff6cf2af5681b37c15d9efe6797dac0", "filename": "gcc/ada/g-soccon-lynxos.ads", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-lynxos.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-lynxos.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-lynxos.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=          1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=          4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=        512; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=          8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=        128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=         32; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=         11; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=         12; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=         13; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=         -1; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "dc39f810e2f2ff16466427d8b0687e9372579efd", "filename": "gcc/ada/g-soccon-mingw.ads", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-mingw.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-mingw.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-mingw.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=           1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=           4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=          -1; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=           8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=         128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=          32; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=          11; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=          12; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=          13; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=          19; --  Get datagram info\n \n    -------------------\n    -- System limits --\n@@ -184,13 +186,6 @@ package GNAT.Sockets.Constants is\n \n    Need_Netdb_Buffer  : constant :=           0; --  Need buffer for Netdb ops\n \n-   ----------------------\n-   -- Additional flags --\n-   ----------------------\n-\n-   Thread_Blocking_IO : constant Boolean := True;\n-   --  Set False for contexts where socket i/o are process blocking\n-\n    ------------------------------\n    -- MinGW-specific constants --\n    ------------------------------\n@@ -203,4 +198,11 @@ package GNAT.Sockets.Constants is\n    WSANOTINITIALISED  : constant :=       10093; --  Winsock not intialized\n    WSAEDISCON         : constant :=       10101; --  Disconnected\n \n+   ----------------------\n+   -- Additional flags --\n+   ----------------------\n+\n+   Thread_Blocking_IO : constant Boolean := True;\n+   --  Set False for contexts where socket i/o are process blocking\n+\n end GNAT.Sockets.Constants;"}, {"sha": "5f57e176cb38bb9bb15f709ef107e2e107814777", "filename": "gcc/ada/g-soccon-solaris-64.ads", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-solaris-64.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-solaris-64.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-solaris-64.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -35,7 +35,7 @@\n --  by the GNAT.Sockets package (g-socket.ads). This package should not be\n --  directly with'ed by an applications program.\n \n---  This is the version for sparc-sun-solaris2.8/64\n+--  This is the version for sparc64-sun-solaris2.8\n --  This file is generated automatically, do not modify it by hand! Instead,\n --  make changes to gen-soccon.c and re-run it on each target.\n \n@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=           1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=           4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=          -1; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=           8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=         128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=          32; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=          18; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=          19; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=          20; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=          -1; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "4b433bf5792089d5ffb1453aa8002c7753a8706b", "filename": "gcc/ada/g-soccon-solaris.ads", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-solaris.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-solaris.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-solaris.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=           1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=           4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=          -1; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=           8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=         128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=          32; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=          18; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=          19; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=          20; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=          -1; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "8e16fbe7e390362d53aa0044e9edfb29f1d0be68", "filename": "gcc/ada/g-soccon-tru64.ads", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-tru64.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-tru64.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-tru64.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=           1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=           4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=         512; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=           8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=         128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=          32; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=          11; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=          12; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=          13; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=          -1; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "44b8523a36a9db2290cc79c370ce0ee4f160d5d1", "filename": "gcc/ada/g-soccon-vms.ads", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-vms.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon-vms.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-vms.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -149,6 +149,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=           1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=           4; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=         512; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=           8; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=         128; --  Defer close to flush data\n    SO_BROADCAST       : constant :=          32; --  Can send broadcast msgs\n@@ -162,6 +163,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=          11; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=          12; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=          13; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=          -1; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "b57711d976e41dc981204cf5e47a6c5dd31e37a8", "filename": "gcc/ada/g-soccon.ads", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-soccon.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -156,6 +156,7 @@ package GNAT.Sockets.Constants is\n \n    TCP_NODELAY        : constant :=            1; --  Do not coalesce packets\n    SO_REUSEADDR       : constant :=            2; --  Bind reuse local address\n+   SO_REUSEPORT       : constant :=           -1; --  Bind reuse port number\n    SO_KEEPALIVE       : constant :=            9; --  Enable keep-alive msgs\n    SO_LINGER          : constant :=           13; --  Defer close to flush data\n    SO_BROADCAST       : constant :=            6; --  Can send broadcast msgs\n@@ -169,6 +170,7 @@ package GNAT.Sockets.Constants is\n    IP_MULTICAST_LOOP  : constant :=           34; --  Set/get mcast loopback\n    IP_ADD_MEMBERSHIP  : constant :=           35; --  Join a multicast group\n    IP_DROP_MEMBERSHIP : constant :=           36; --  Leave a multicast group\n+   IP_PKTINFO         : constant :=            8; --  Get datagram info\n \n    -------------------\n    -- System limits --"}, {"sha": "e491eed89ac457273967b97fa26b658a966d2744", "filename": "gcc/ada/g-socket.adb", "status": "modified", "additions": 32, "deletions": 28, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-socket.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-socket.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socket.adb?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---                     Copyright (C) 2001-2007, AdaCore                     --\n+--                     Copyright (C) 2001-2008, AdaCore                     --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -87,21 +87,24 @@ package body GNAT.Sockets is\n                  N_Bytes_To_Read => Constants.FIONREAD);\n \n    Options : constant array (Option_Name) of C.int :=\n-               (Keep_Alive      => Constants.SO_KEEPALIVE,\n-                Reuse_Address   => Constants.SO_REUSEADDR,\n-                Broadcast       => Constants.SO_BROADCAST,\n-                Send_Buffer     => Constants.SO_SNDBUF,\n-                Receive_Buffer  => Constants.SO_RCVBUF,\n-                Linger          => Constants.SO_LINGER,\n-                Error           => Constants.SO_ERROR,\n-                No_Delay        => Constants.TCP_NODELAY,\n-                Add_Membership  => Constants.IP_ADD_MEMBERSHIP,\n-                Drop_Membership => Constants.IP_DROP_MEMBERSHIP,\n-                Multicast_If    => Constants.IP_MULTICAST_IF,\n-                Multicast_TTL   => Constants.IP_MULTICAST_TTL,\n-                Multicast_Loop  => Constants.IP_MULTICAST_LOOP,\n-                Send_Timeout    => Constants.SO_SNDTIMEO,\n-                Receive_Timeout => Constants.SO_RCVTIMEO);\n+               (Keep_Alive          => Constants.SO_KEEPALIVE,\n+                Reuse_Address       => Constants.SO_REUSEADDR,\n+                Broadcast           => Constants.SO_BROADCAST,\n+                Send_Buffer         => Constants.SO_SNDBUF,\n+                Receive_Buffer      => Constants.SO_RCVBUF,\n+                Linger              => Constants.SO_LINGER,\n+                Error               => Constants.SO_ERROR,\n+                No_Delay            => Constants.TCP_NODELAY,\n+                Add_Membership      => Constants.IP_ADD_MEMBERSHIP,\n+                Drop_Membership     => Constants.IP_DROP_MEMBERSHIP,\n+                Multicast_If        => Constants.IP_MULTICAST_IF,\n+                Multicast_TTL       => Constants.IP_MULTICAST_TTL,\n+                Multicast_Loop      => Constants.IP_MULTICAST_LOOP,\n+                Receive_Packet_Info => Constants.IP_PKTINFO,\n+                Send_Timeout        => Constants.SO_SNDTIMEO,\n+                Receive_Timeout     => Constants.SO_RCVTIMEO);\n+   --  ??? Note: for OpenSolaris, Receive_Packet_Info should be IP_RECVPKTINFO,\n+   --  but for Linux compatibility this constant is the same as IP_PKTINFO.\n \n    Flags : constant array (0 .. 3) of C.int :=\n              (0 => Constants.MSG_OOB,     --  Process_Out_Of_Band_Data\n@@ -865,8 +868,7 @@ package body GNAT.Sockets is\n \n    begin\n       if Safe_Getservbyname (SN, SP, Res'Access, Buf'Address, Buflen) /= 0 then\n-         Ada.Exceptions.Raise_Exception\n-           (Service_Error'Identity, \"Service not found\");\n+         raise Service_Error with \"Service not found\";\n       end if;\n \n       --  Translate from the C format to the API format\n@@ -892,8 +894,7 @@ package body GNAT.Sockets is\n         (C.int (Short_To_Network (C.unsigned_short (Port))), SP,\n          Res'Access, Buf'Address, Buflen) /= 0\n       then\n-         Ada.Exceptions.Raise_Exception\n-           (Service_Error'Identity, \"Service not found\");\n+         raise Service_Error with \"Service not found\";\n       end if;\n \n       --  Translate from the C format to the API format\n@@ -946,8 +947,9 @@ package body GNAT.Sockets is\n \n    begin\n       case Name is\n-         when Multicast_Loop  |\n-              Multicast_TTL   =>\n+         when Multicast_Loop      |\n+              Multicast_TTL       |\n+              Receive_Packet_Info =>\n             Len := V1'Size / 8;\n             Add := V1'Address;\n \n@@ -1015,7 +1017,8 @@ package body GNAT.Sockets is\n          when Multicast_TTL   =>\n             Opt.Time_To_Live := Integer (V1);\n \n-         when Multicast_Loop  =>\n+         when Multicast_Loop      |\n+              Receive_Packet_Info =>\n             Opt.Enabled := (V1 /= 0);\n \n          when Send_Timeout    |\n@@ -1320,9 +1323,9 @@ package body GNAT.Sockets is\n \n    procedure Raise_Host_Error (H_Error : Integer) is\n    begin\n-      Ada.Exceptions.Raise_Exception (Host_Error'Identity,\n+      raise Host_Error with\n         Err_Code_Image (H_Error)\n-        & C.Strings.Value (Host_Error_Messages.Host_Error_Message (H_Error)));\n+        & C.Strings.Value (Host_Error_Messages.Host_Error_Message (H_Error));\n    end Raise_Host_Error;\n \n    ------------------------\n@@ -1332,9 +1335,9 @@ package body GNAT.Sockets is\n    procedure Raise_Socket_Error (Error : Integer) is\n       use type C.Strings.chars_ptr;\n    begin\n-      Ada.Exceptions.Raise_Exception (Socket_Error'Identity,\n+      raise Socket_Error with\n         Err_Code_Image (Error)\n-        & C.Strings.Value (Socket_Error_Message (Error)));\n+        & C.Strings.Value (Socket_Error_Message (Error));\n    end Raise_Socket_Error;\n \n    ----------\n@@ -1795,7 +1798,8 @@ package body GNAT.Sockets is\n             Len := V1'Size / 8;\n             Add := V1'Address;\n \n-         when Multicast_Loop  =>\n+         when Multicast_Loop      |\n+              Receive_Packet_Info =>\n             V1  := C.unsigned_char (Boolean'Pos (Option.Enabled));\n             Len := V1'Size / 8;\n             Add := V1'Address;"}, {"sha": "105f285a8b428112216a0d827ada7ed527899438", "filename": "gcc/ada/g-socket.ads", "status": "modified", "additions": 24, "deletions": 22, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-socket.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e0ede3df752962d473249716152e00d779eec66/gcc%2Fada%2Fg-socket.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socket.ads?ref=4e0ede3df752962d473249716152e00d779eec66", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---                     Copyright (C) 2001-2007, AdaCore                     --\n+--                     Copyright (C) 2001-2008, AdaCore                     --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -623,30 +623,32 @@ package GNAT.Sockets is\n    --  a boolean to enable or disable this option.\n \n    type Option_Name is (\n-     Keep_Alive,       -- Enable sending of keep-alive messages\n-     Reuse_Address,    -- Allow bind to reuse local address\n-     Broadcast,        -- Enable datagram sockets to recv/send broadcasts\n-     Send_Buffer,      -- Set/get the maximum socket send buffer in bytes\n-     Receive_Buffer,   -- Set/get the maximum socket recv buffer in bytes\n-     Linger,           -- Shutdown wait for msg to be sent or timeout occur\n-     Error,            -- Get and clear the pending socket error\n-     No_Delay,         -- Do not delay send to coalesce packets (TCP_NODELAY)\n-     Add_Membership,   -- Join a multicast group\n-     Drop_Membership,  -- Leave a multicast group\n-     Multicast_If,     -- Set default outgoing interface for multicast packets\n-     Multicast_TTL,    -- Indicate the time-to-live of sent multicast packets\n-     Multicast_Loop,   -- Sent multicast packets are looped to local socket\n-     Send_Timeout,     -- Set timeout value for output\n-     Receive_Timeout); -- Set timeout value for input\n+     Keep_Alive,          -- Enable sending of keep-alive messages\n+     Reuse_Address,       -- Allow bind to reuse local address\n+     Broadcast,           -- Enable datagram sockets to recv/send broadcasts\n+     Send_Buffer,         -- Set/get the maximum socket send buffer in bytes\n+     Receive_Buffer,      -- Set/get the maximum socket recv buffer in bytes\n+     Linger,              -- Shutdown wait for msg to be sent or timeout occur\n+     Error,               -- Get and clear the pending socket error\n+     No_Delay,            -- Do not delay send to coalesce data (TCP_NODELAY)\n+     Add_Membership,      -- Join a multicast group\n+     Drop_Membership,     -- Leave a multicast group\n+     Multicast_If,        -- Set default out interface for multicast packets\n+     Multicast_TTL,       -- Set the time-to-live of sent multicast packets\n+     Multicast_Loop,      -- Sent multicast packets are looped to local socket\n+     Receive_Packet_Info, -- Receive low level packet info as ancillary data\n+     Send_Timeout,        -- Set timeout value for output\n+     Receive_Timeout);    -- Set timeout value for input\n \n    type Option_Type (Name : Option_Name := Keep_Alive) is record\n       case Name is\n-         when Keep_Alive      |\n-              Reuse_Address   |\n-              Broadcast       |\n-              Linger          |\n-              No_Delay        |\n-              Multicast_Loop  =>\n+         when Keep_Alive          |\n+              Reuse_Address       |\n+              Broadcast           |\n+              Linger              |\n+              No_Delay            |\n+              Receive_Packet_Info |\n+              Multicast_Loop      =>\n             Enabled : Boolean;\n \n             case Name is"}]}