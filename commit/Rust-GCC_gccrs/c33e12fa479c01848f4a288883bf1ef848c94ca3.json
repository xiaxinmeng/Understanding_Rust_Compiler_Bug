{"sha": "c33e12fa479c01848f4a288883bf1ef848c94ca3", "node_id": "C_kwDOANBUbNoAKGMzM2UxMmZhNDc5YzAxODQ4ZjRhMjg4ODgzYmYxZWY4NDhjOTRjYTM", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2022-09-26T09:10:25Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2022-09-26T09:14:30Z"}, "message": "aarch64: Add -march support for Armv9.1-A, Armv9.2-A, Armv9.3-A\n\nThis is a straightforward patch that allows targeting the architecture revisions mentioned in the subject\nthrough -march. These are already supported in binutils.\n\nBootstrapped and tested on aarch64-none-linux-gnu.\n\ngcc/ChangeLog:\n\n\t* config/aarch64/aarch64-arches.def (armv9.1-a): Define.\n\t(armv9.2-a): Likewise.\n\t(armv9.3-a): Likewise.\n\t* config/aarch64/aarch64.h (AARCH64_FL_V9_1): Likewise.\n\t(AARCH64_FL_V9_2): Likewise.\n\t(AARCH64_FL_V9_3): Likewise.\n\t(AARCH64_FL_FOR_ARCH9_1): Likewise.\n\t(AARCH64_FL_FOR_ARCH9_2): Likewise.\n\t(AARCH64_FL_FOR_ARCH9_3): Likewise.\n\t(AARCH64_ISA_V9_1): Likewise.\n\t(AARCH64_ISA_V9_2): Likewise.\n\t(AARCH64_ISA_V9_3): Likewise.\n\t* doc/invoke.texi (AArch64 Options): Document armv9.1-a, armv9.2-a,\n\tarmv9.3-a values to -march.", "tree": {"sha": "9fd237f7b9b4170fdcf0d90aa80500719ac3a1d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9fd237f7b9b4170fdcf0d90aa80500719ac3a1d9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c33e12fa479c01848f4a288883bf1ef848c94ca3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c33e12fa479c01848f4a288883bf1ef848c94ca3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c33e12fa479c01848f4a288883bf1ef848c94ca3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c33e12fa479c01848f4a288883bf1ef848c94ca3/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a2ae0520895b53ec2c5533c274b47bec33753ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a2ae0520895b53ec2c5533c274b47bec33753ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a2ae0520895b53ec2c5533c274b47bec33753ec"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "6150448dc30efe6ec0a6ed24c81b7907da56aeeb", "filename": "gcc/config/aarch64/aarch64-arches.def", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33e12fa479c01848f4a288883bf1ef848c94ca3/gcc%2Fconfig%2Faarch64%2Faarch64-arches.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33e12fa479c01848f4a288883bf1ef848c94ca3/gcc%2Fconfig%2Faarch64%2Faarch64-arches.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-arches.def?ref=c33e12fa479c01848f4a288883bf1ef848c94ca3", "patch": "@@ -41,5 +41,8 @@ AARCH64_ARCH(\"armv8.7-a\",     generic,       8_7A,      8,  AARCH64_FL_FOR_ARCH8\n AARCH64_ARCH(\"armv8.8-a\",     generic,       8_8A,      8,  AARCH64_FL_FOR_ARCH8_8)\n AARCH64_ARCH(\"armv8-r\",       generic,\t     8R  ,\t8,  AARCH64_FL_FOR_ARCH8_R)\n AARCH64_ARCH(\"armv9-a\",       generic,\t     9A  ,\t9,  AARCH64_FL_FOR_ARCH9)\n+AARCH64_ARCH(\"armv9.1-a\",     generic,       9_1A,      9,  AARCH64_FL_FOR_ARCH9_1)\n+AARCH64_ARCH(\"armv9.2-a\",     generic,       9_2A,      9,  AARCH64_FL_FOR_ARCH9_2)\n+AARCH64_ARCH(\"armv9.3-a\",     generic,       9_3A,      9,  AARCH64_FL_FOR_ARCH9_3)\n \n #undef AARCH64_ARCH"}, {"sha": "f790de1cf46d68c78e2b6bae54ec7a72b4b2a020", "filename": "gcc/config/aarch64/aarch64.h", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33e12fa479c01848f4a288883bf1ef848c94ca3/gcc%2Fconfig%2Faarch64%2Faarch64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33e12fa479c01848f4a288883bf1ef848c94ca3/gcc%2Fconfig%2Faarch64%2Faarch64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.h?ref=c33e12fa479c01848f4a288883bf1ef848c94ca3", "patch": "@@ -239,6 +239,15 @@\n /* Armv8.8-a architecture extensions.  */\n #define AARCH64_FL_V8_8       (1ULL << 45)\n \n+/* Armv9.1-A.  */\n+#define AARCH64_FL_V9_1       (1ULL << 46)\n+\n+/* Armv9.2-A.  */\n+#define AARCH64_FL_V9_2       (1ULL << 47)\n+\n+/* Armv9.3-A.  */\n+#define AARCH64_FL_V9_3       (1ULL << 48)\n+\n /* Has FP and SIMD.  */\n #define AARCH64_FL_FPSIMD     (AARCH64_FL_FP | AARCH64_FL_SIMD)\n \n@@ -273,6 +282,12 @@\n #define AARCH64_FL_FOR_ARCH9       \\\n   (AARCH64_FL_FOR_ARCH8_5 | AARCH64_FL_SVE | AARCH64_FL_SVE2 | AARCH64_FL_V9 \\\n    | AARCH64_FL_F16)\n+#define AARCH64_FL_FOR_ARCH9_1\t\\\n+  (AARCH64_FL_FOR_ARCH9 | AARCH64_FL_FOR_ARCH8_6 | AARCH64_FL_V9_1)\n+#define AARCH64_FL_FOR_ARCH9_2\t\\\n+  (AARCH64_FL_FOR_ARCH9_1 | AARCH64_FL_FOR_ARCH8_7 | AARCH64_FL_V9_2)\n+#define AARCH64_FL_FOR_ARCH9_3\t\\\n+  (AARCH64_FL_FOR_ARCH9_2 | AARCH64_FL_FOR_ARCH8_8 | AARCH64_FL_V9_3)\n \n /* Macros to test ISA flags.  */\n \n@@ -312,6 +327,9 @@\n #define AARCH64_ISA_V8_R\t   (aarch64_isa_flags & AARCH64_FL_V8_R)\n #define AARCH64_ISA_PAUTH\t   (aarch64_isa_flags & AARCH64_FL_PAUTH)\n #define AARCH64_ISA_V9\t\t   (aarch64_isa_flags & AARCH64_FL_V9)\n+#define AARCH64_ISA_V9_1           (aarch64_isa_flags & AARCH64_FL_V9_1)\n+#define AARCH64_ISA_V9_2           (aarch64_isa_flags & AARCH64_FL_V9_2)\n+#define AARCH64_ISA_V9_3           (aarch64_isa_flags & AARCH64_FL_V9_3)\n #define AARCH64_ISA_MOPS\t   (aarch64_isa_flags & AARCH64_FL_MOPS)\n #define AARCH64_ISA_LS64\t   (aarch64_isa_flags & AARCH64_FL_LS64)\n "}, {"sha": "19275c5533613185ae717c33be491ee6a316f436", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c33e12fa479c01848f4a288883bf1ef848c94ca3/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c33e12fa479c01848f4a288883bf1ef848c94ca3/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=c33e12fa479c01848f4a288883bf1ef848c94ca3", "patch": "@@ -19681,6 +19681,9 @@ and the features that they enable by default:\n @item @samp{armv8.7-a} @tab Armv8.7-A @tab @samp{armv8.6-a}, @samp{+ls64}\n @item @samp{armv8.8-a} @tab Armv8.8-a @tab @samp{armv8.7-a}, @samp{+mops}\n @item @samp{armv9-a} @tab Armv9-A @tab @samp{armv8.5-a}, @samp{+sve}, @samp{+sve2}\n+@item @samp{armv9.1-a} @tab Armv9.1-A @tab @samp{armv9-a}, @samp{+bf16}, @samp{+i8mm}\n+@item @samp{armv9.2-a} @tab Armv9.2-A @tab @samp{armv9.1-a}, @samp{+ls64}\n+@item @samp{armv9.3-a} @tab Armv9.3-A @tab @samp{armv9.2-a}, @samp{+mops}\n @item @samp{armv8-r} @tab Armv8-R @tab @samp{armv8-r}\n @end multitable\n "}]}