{"sha": "8b299be64a9f9ba67a33c16f16302e77917afa62", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGIyOTliZTY0YTlmOWJhNjdhMzNjMTZmMTYzMDJlNzc5MTdhZmE2Mg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2012-12-14T20:57:55Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2012-12-14T20:57:55Z"}, "message": "re PR c++/42315 (ICE with invalid array initializer)\n\n\tPR c++/42315\n\t* decl.c (maybe_deduce_size_from_array_init): Don't change the\n\tvariable type.\n\nFrom-SVN: r194509", "tree": {"sha": "b65cfd7d5110c6bb640bc7830d9781948be9bbff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b65cfd7d5110c6bb640bc7830d9781948be9bbff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b299be64a9f9ba67a33c16f16302e77917afa62", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b299be64a9f9ba67a33c16f16302e77917afa62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b299be64a9f9ba67a33c16f16302e77917afa62", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b299be64a9f9ba67a33c16f16302e77917afa62/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5e3b173a79af6dbf3485cb08083e020633cd9f9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e3b173a79af6dbf3485cb08083e020633cd9f9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e3b173a79af6dbf3485cb08083e020633cd9f9f"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "ee9bf7749efd98125ff2c0cd9fbe363552aab46c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b299be64a9f9ba67a33c16f16302e77917afa62/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b299be64a9f9ba67a33c16f16302e77917afa62/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=8b299be64a9f9ba67a33c16f16302e77917afa62", "patch": "@@ -1,3 +1,9 @@\n+2012-12-14  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/42315\n+\t* decl.c (maybe_deduce_size_from_array_init): Don't change the\n+\tvariable type.\n+\n 2012-12-13  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/55652"}, {"sha": "64bd4b5d2c0e770d9ea7d3b11d04aea3dfea60fd", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b299be64a9f9ba67a33c16f16302e77917afa62/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b299be64a9f9ba67a33c16f16302e77917afa62/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=8b299be64a9f9ba67a33c16f16302e77917afa62", "patch": "@@ -4834,14 +4834,12 @@ maybe_deduce_size_from_array_init (tree decl, tree init)\n \t  if (failure == 1)\n \t    {\n \t      error (\"initializer fails to determine size of %qD\", decl);\n-\t      TREE_TYPE (decl) = error_mark_node;\n \t    }\n \t  else if (failure == 2)\n \t    {\n \t      if (do_default)\n \t\t{\n \t\t  error (\"array size missing in %qD\", decl);\n-\t\t  TREE_TYPE (decl) = error_mark_node;\n \t\t}\n \t      /* If a `static' var's size isn't known, make it extern as\n \t\t well as static, so it does not get allocated.  If it's not\n@@ -4853,7 +4851,6 @@ maybe_deduce_size_from_array_init (tree decl, tree init)\n \t  else if (failure == 3)\n \t    {\n \t      error (\"zero-size array %qD\", decl);\n-\t      TREE_TYPE (decl) = error_mark_node;\n \t    }\n \t}\n "}, {"sha": "a02faa2a8d46620a45dab9bf6ce3a8b1ced04159", "filename": "gcc/testsuite/g++.dg/gomp/pr34964.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b299be64a9f9ba67a33c16f16302e77917afa62/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr34964.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b299be64a9f9ba67a33c16f16302e77917afa62/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr34964.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr34964.C?ref=8b299be64a9f9ba67a33c16f16302e77917afa62", "patch": "@@ -2,5 +2,5 @@\n // { dg-do compile }\n // { dg-options \"-fopenmp\" }\n \n-char x[] = 0;\t// { dg-error \"initializer fails to determine size\" }\n+char x[] = 0;\t// { dg-error \"initializer\" }\n #pragma omp threadprivate (x)"}, {"sha": "5438af1d47772cee086ddcbb8d1cf23d3b5c8385", "filename": "gcc/testsuite/g++.dg/init/array21.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b299be64a9f9ba67a33c16f16302e77917afa62/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray21.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b299be64a9f9ba67a33c16f16302e77917afa62/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray21.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray21.C?ref=8b299be64a9f9ba67a33c16f16302e77917afa62", "patch": "@@ -2,6 +2,6 @@\n \n void foo()\n {\n-  const int x[] = 0; // { dg-error \"size\" }\n+  const int x[] = 0; // { dg-error \"initializer\" }\n   ++x;\n }"}, {"sha": "06b27a94a8acab18efad7cc38e8fb2851fb52b99", "filename": "gcc/testsuite/g++.dg/init/array32.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b299be64a9f9ba67a33c16f16302e77917afa62/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray32.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b299be64a9f9ba67a33c16f16302e77917afa62/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray32.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray32.C?ref=8b299be64a9f9ba67a33c16f16302e77917afa62", "patch": "@@ -0,0 +1,7 @@\n+// PR c++/42315\n+\n+extern int x[];\n+\n+int i = x[0];\n+\n+int x[] = 0;\t\t\t// { dg-error \"\" }"}]}