{"sha": "bdc87462e73937f06523adba73e993a0b11d2a47", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmRjODc0NjJlNzM5MzdmMDY1MjNhZGJhNzNlOTkzYTBiMTFkMmE0Nw==", "commit": {"author": {"name": "Torbjorn Granlund", "email": "tege@gnu.org", "date": "1993-10-20T22:10:08Z"}, "committer": {"name": "Torbjorn Granlund", "email": "tege@gnu.org", "date": "1993-10-20T22:10:08Z"}, "message": "(cacheflush): Split into dcacheflush and icacheflush.\n\nRewrite to use space regs correctly.\n\nFrom-SVN: r5837", "tree": {"sha": "6d2bdaa72324ae186b7ca5ff8e70e4bec271c663", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d2bdaa72324ae186b7ca5ff8e70e4bec271c663"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bdc87462e73937f06523adba73e993a0b11d2a47", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdc87462e73937f06523adba73e993a0b11d2a47", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bdc87462e73937f06523adba73e993a0b11d2a47", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdc87462e73937f06523adba73e993a0b11d2a47/comments", "author": null, "committer": null, "parents": [{"sha": "13b457e7e0d79ec4b1897fa270e06a209e3a9802", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13b457e7e0d79ec4b1897fa270e06a209e3a9802", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13b457e7e0d79ec4b1897fa270e06a209e3a9802"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "cb9247eb388b8a47b50a3294df4779412c21b289", "filename": "gcc/config/pa/pa.md", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bdc87462e73937f06523adba73e993a0b11d2a47/gcc%2Fconfig%2Fpa%2Fpa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bdc87462e73937f06523adba73e993a0b11d2a47/gcc%2Fconfig%2Fpa%2Fpa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.md?ref=bdc87462e73937f06523adba73e993a0b11d2a47", "patch": "@@ -3362,10 +3362,22 @@\n ;; This is used by the trampoline code for nested functions.\n ;; So long as the trampoline itself is less than 32 bytes this\n ;; is sufficient.\n-(define_insn \"cacheflush\"\n+\n+(define_insn \"dcacheflush\"\n   [(unspec_volatile [(const_int 1)] 0)\n    (use (mem:SI (match_operand:SI 0 \"register_operand\" \"r\")))\n    (use (mem:SI (match_operand:SI 1 \"register_operand\" \"r\")))]\n   \"\"\n-  \"fdc 0(0,%0)\\;sync\\;fic 0(0,%0)\\;sync\\;fdc 0(0,%1)\\;sync\\;fic 0(0,%1)\\;sync\\;nop\\;nop\\;nop\\;nop\\;nop\\;nop\\;nop\"\n-  [(set_attr \"length\" \"60\")])\n+  \"fdc 0(0,%0)\\;fdc 0(0,%1)\\;sync\"\n+  [(set_attr \"length\" \"12\")])\n+\n+(define_insn \"icacheflush\"\n+  [(unspec_volatile [(const_int 2)] 0)\n+   (use (mem:SI (match_operand:SI 0 \"register_operand\" \"r\")))\n+   (use (mem:SI (match_operand:SI 1 \"register_operand\" \"r\")))\n+   (use (match_operand:SI 2 \"register_operand\" \"r\"))\n+   (clobber (match_operand:SI 3 \"register_operand\" \"=&r\"))\n+   (clobber (match_operand:SI 4 \"register_operand\" \"=&r\"))]\n+  \"\"\n+  \"mfsp %%sr0,%4\\;ldsid (0,%2),%3\\;mtsp %3,%%sr0\\;fic 0(%%sr0,%0)\\;fic 0(%%sr0,%1)\\;sync\\;mtsp %4,%%sr0\\;nop\\;nop\\;nop\\;nop\\;nop\\;nop\"\n+  [(set_attr \"length\" \"52\")])"}]}