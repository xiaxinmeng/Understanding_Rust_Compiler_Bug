{"sha": "5a5cccaa4e00fd06fd8e8bf4e9f731dbda799dd3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWE1Y2NjYWE0ZTAwZmQwNmZkOGU4YmY0ZTlmNzMxZGJkYTc5OWRkMw==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2002-12-30T12:46:13Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2002-12-30T12:46:13Z"}, "message": "re PR c++/9054 (segfault on legal code with option -fdump-translation-unit)\n\n\tPR c++/9054\n\t* class.c (layout_class_type): Set DECL_CONTEXT of type for base.\n\t* dump.c (cp_dump_tree, RECORD_TYPE): Deal with type for base types.\n\nFrom-SVN: r60627", "tree": {"sha": "eda1a7b14bc3ca30755dbcbff392ba3ee7f3c334", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eda1a7b14bc3ca30755dbcbff392ba3ee7f3c334"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5a5cccaa4e00fd06fd8e8bf4e9f731dbda799dd3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a5cccaa4e00fd06fd8e8bf4e9f731dbda799dd3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a5cccaa4e00fd06fd8e8bf4e9f731dbda799dd3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a5cccaa4e00fd06fd8e8bf4e9f731dbda799dd3/comments", "author": null, "committer": null, "parents": [{"sha": "8b5d67e116b5698d541e351859d12e8f0bf03345", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b5d67e116b5698d541e351859d12e8f0bf03345", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b5d67e116b5698d541e351859d12e8f0bf03345"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "85d6d2addd751c3f183ee659a91611d5661377c4", "filename": "gcc/cp/class.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a5cccaa4e00fd06fd8e8bf4e9f731dbda799dd3/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a5cccaa4e00fd06fd8e8bf4e9f731dbda799dd3/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=5a5cccaa4e00fd06fd8e8bf4e9f731dbda799dd3", "patch": "@@ -5161,6 +5161,7 @@ layout_class_type (tree t, tree *virtuals_p)\n \n       /* Record the base version of the type.  */\n       CLASSTYPE_AS_BASE (t) = base_t;\n+      TYPE_CONTEXT (base_t) = t;\n     }\n   else\n     CLASSTYPE_AS_BASE (t) = t;"}, {"sha": "da207d32917f53009783a50180c14b85e5d7ffd7", "filename": "gcc/cp/dump.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a5cccaa4e00fd06fd8e8bf4e9f731dbda799dd3/gcc%2Fcp%2Fdump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a5cccaa4e00fd06fd8e8bf4e9f731dbda799dd3/gcc%2Fcp%2Fdump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdump.c?ref=5a5cccaa4e00fd06fd8e8bf4e9f731dbda799dd3", "patch": "@@ -265,6 +265,14 @@ cp_dump_tree (dump_info, t)\n \t  return 1;\n \t}\n \n+      /* Is it a type used as a base? */\n+      if (TYPE_CONTEXT (t) && TREE_CODE (TYPE_CONTEXT (t)) == TREE_CODE (t)\n+\t  && CLASSTYPE_AS_BASE (TYPE_CONTEXT (t)) == t)\n+\t{\n+\t  dump_child (\"bfld\", TYPE_CONTEXT (t));\n+\t  return 1;\n+\t}\n+      \n       dump_child (\"vfld\", TYPE_VFIELD (t));\n       if (CLASSTYPE_TEMPLATE_SPECIALIZATION(t))\n         dump_string(di, \"spec\");"}]}