{"sha": "670987874d2aa043a454e112291931e32f4ca8cc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjcwOTg3ODc0ZDJhYTA0M2E0NTRlMTEyMjkxOTMxZTMyZjRjYThjYw==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-02-11T22:13:44Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-02-17T07:11:50Z"}, "message": "analyzer: add diagnostics to output of -fdump-analyzer-exploded-graph\n\ngcc/analyzer/ChangeLog:\n\t* diagnostic-manager.h (diagnostic_manager::get_saved_diagnostic):\n\tAdd const overload.\n\t* engine.cc (exploded_node::dump_dot): Dump saved_diagnostics.\n\t* exploded-graph.h (exploded_graph::get_diagnostic_manager): Add\n\tconst overload.", "tree": {"sha": "1f7d1df70864da5dbc1aeca44ea76a3f8d1134fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f7d1df70864da5dbc1aeca44ea76a3f8d1134fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/670987874d2aa043a454e112291931e32f4ca8cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/670987874d2aa043a454e112291931e32f4ca8cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/670987874d2aa043a454e112291931e32f4ca8cc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/670987874d2aa043a454e112291931e32f4ca8cc/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a8532e9927ad6e4bbedbb957b02ca413aedf9098", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8532e9927ad6e4bbedbb957b02ca413aedf9098", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8532e9927ad6e4bbedbb957b02ca413aedf9098"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "9f1e25d1e90d91a6f8580d333939a9a36ce5d9c4", "filename": "gcc/analyzer/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/670987874d2aa043a454e112291931e32f4ca8cc/gcc%2Fanalyzer%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/670987874d2aa043a454e112291931e32f4ca8cc/gcc%2Fanalyzer%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2FChangeLog?ref=670987874d2aa043a454e112291931e32f4ca8cc", "patch": "@@ -1,3 +1,11 @@\n+2020-02-17  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* diagnostic-manager.h (diagnostic_manager::get_saved_diagnostic):\n+\tAdd const overload.\n+\t* engine.cc (exploded_node::dump_dot): Dump saved_diagnostics.\n+\t* exploded-graph.h (exploded_graph::get_diagnostic_manager): Add\n+\tconst overload.\n+\n 2020-02-11  David Malcolm  <dmalcolm@redhat.com>\n \n \tPR analyzer/93288"}, {"sha": "171d2792c00f30c3d4bf2509e80f92ccabb1a167", "filename": "gcc/analyzer/diagnostic-manager.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/670987874d2aa043a454e112291931e32f4ca8cc/gcc%2Fanalyzer%2Fdiagnostic-manager.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/670987874d2aa043a454e112291931e32f4ca8cc/gcc%2Fanalyzer%2Fdiagnostic-manager.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2Fdiagnostic-manager.h?ref=670987874d2aa043a454e112291931e32f4ca8cc", "patch": "@@ -95,6 +95,10 @@ class diagnostic_manager : public log_user\n   {\n     return m_saved_diagnostics[idx];\n   }\n+  const saved_diagnostic *get_saved_diagnostic (unsigned idx) const\n+  {\n+    return m_saved_diagnostics[idx];\n+  }\n \n private:\n   void build_emission_path (const exploded_graph &eg,"}, {"sha": "17507c7c08ea23a200cb5219bcd411e08354458a", "filename": "gcc/analyzer/engine.cc", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/670987874d2aa043a454e112291931e32f4ca8cc/gcc%2Fanalyzer%2Fengine.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/670987874d2aa043a454e112291931e32f4ca8cc/gcc%2Fanalyzer%2Fengine.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2Fengine.cc?ref=670987874d2aa043a454e112291931e32f4ca8cc", "patch": "@@ -854,6 +854,20 @@ exploded_node::dump_dot (graphviz_out *gv, const dump_args_t &args) const\n       }\n   }\n \n+  /* Dump any saved_diagnostics at this enode.  */\n+  {\n+    const diagnostic_manager &dm = args.m_eg.get_diagnostic_manager ();\n+    for (unsigned i = 0; i < dm.get_num_diagnostics (); i++)\n+      {\n+\tconst saved_diagnostic *sd = dm.get_saved_diagnostic (i);\n+\tif (sd->m_enode == this)\n+\t  {\n+\t    pp_printf (pp, \"DIAGNOSTIC: %s\", sd->m_d->get_kind ());\n+\t    pp_newline (pp);\n+\t  }\n+      }\n+  }\n+\n   pp_write_text_as_dot_label_to_stream (pp, /*for_record=*/true);\n \n   pp_string (pp, \"\\\"];\\n\\n\");"}, {"sha": "bb1f3ccff1ad9c535eea1c7366800ae2f8cdb6ff", "filename": "gcc/analyzer/exploded-graph.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/670987874d2aa043a454e112291931e32f4ca8cc/gcc%2Fanalyzer%2Fexploded-graph.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/670987874d2aa043a454e112291931e32f4ca8cc/gcc%2Fanalyzer%2Fexploded-graph.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2Fexploded-graph.h?ref=670987874d2aa043a454e112291931e32f4ca8cc", "patch": "@@ -768,6 +768,10 @@ class exploded_graph : public digraph<eg_traits>\n   {\n     return m_diagnostic_manager;\n   }\n+  const diagnostic_manager &get_diagnostic_manager () const\n+  {\n+    return m_diagnostic_manager;\n+  }\n \n   stats *get_global_stats () { return &m_global_stats; }\n   stats *get_or_create_function_stats (function *fn);"}]}