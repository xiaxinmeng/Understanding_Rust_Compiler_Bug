{"sha": "7551cbc77e43285ce0903106daf4c1e653a8357e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU1MWNiYzc3ZTQzMjg1Y2UwOTAzMTA2ZGFmNGMxZTY1M2E4MzU3ZQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "1998-09-23T10:49:06Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "1998-09-23T10:49:06Z"}, "message": "arm.c (find_barrier): Revert change of Apr 23.\n\n* arm.c (find_barrier): Revert change of Apr 23.  Handle table\njumps as a single entity, taking into account the size of the\ntable.\n\nFrom-SVN: r22558", "tree": {"sha": "477a3cf6234299efd126d347026f8d67e51e3c27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/477a3cf6234299efd126d347026f8d67e51e3c27"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7551cbc77e43285ce0903106daf4c1e653a8357e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7551cbc77e43285ce0903106daf4c1e653a8357e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7551cbc77e43285ce0903106daf4c1e653a8357e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7551cbc77e43285ce0903106daf4c1e653a8357e/comments", "author": null, "committer": null, "parents": [{"sha": "4be70bc7085b5e201cf2a76f9f8721beb4908910", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4be70bc7085b5e201cf2a76f9f8721beb4908910", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4be70bc7085b5e201cf2a76f9f8721beb4908910"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "4390fc74b44fe561668cce5921554df23f27a4b5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7551cbc77e43285ce0903106daf4c1e653a8357e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7551cbc77e43285ce0903106daf4c1e653a8357e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7551cbc77e43285ce0903106daf4c1e653a8357e", "patch": "@@ -1,3 +1,9 @@\n+Wed Sep 23 10:45:44 1998  Richard Earnshaw (rearnsha@arm.com)\n+\n+\t* arm.c (find_barrier): Revert change of Apr 23.  Handle table\n+\tjumps as a single entity, taking into account the size of the\n+\ttable.\n+\n Tue Sep 22 15:13:34 1998  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n \n \t* tree.def (SWITCH_EXPR): New tree node definition."}, {"sha": "69610d6ec08034010bb9ef8db0214288ddbf48c6", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7551cbc77e43285ce0903106daf4c1e653a8357e/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7551cbc77e43285ce0903106daf4c1e653a8357e/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=7551cbc77e43285ce0903106daf4c1e653a8357e", "patch": "@@ -3592,15 +3592,35 @@ find_barrier (from, max_count)\n \n   while (from && count < max_count)\n     {\n+      rtx tmp;\n+\n       if (GET_CODE (from) == BARRIER)\n-\treturn from;\n+\tfound_barrier = from;\n \n       /* Count the length of this insn */\n       if (GET_CODE (from) == INSN\n \t  && GET_CODE (PATTERN (from)) == SET\n \t  && CONSTANT_P (SET_SRC (PATTERN (from)))\n \t  && CONSTANT_POOL_ADDRESS_P (SET_SRC (PATTERN (from))))\n \tcount += 8;\n+      /* Handle table jumps as a single entity.  */\n+      else if (GET_CODE (from) == JUMP_INSN\n+\t       && JUMP_LABEL (from) != 0\n+\t       && ((tmp = next_real_insn (JUMP_LABEL (from)))\n+\t\t   == next_real_insn (from))\n+\t       && tmp != NULL\n+\t       && GET_CODE (tmp) == JUMP_INSN\n+\t       && (GET_CODE (PATTERN (tmp)) == ADDR_VEC\n+\t\t   || GET_CODE (PATTERN (tmp)) == ADDR_DIFF_VEC))\n+\t{\n+\t  int elt = GET_CODE (PATTERN (tmp)) == ADDR_DIFF_VEC ? 1 : 0;\n+\t  count += (get_attr_length (from)\n+\t\t    + GET_MODE_SIZE (SImode) * XVECLEN (PATTERN (tmp), elt));\n+\t  /* Continue after the dispatch table.  */\n+\t  last = from;\n+\t  from = NEXT_INSN (tmp);\n+\t  continue;\n+\t}\n       else\n \tcount += get_attr_length (from);\n "}]}