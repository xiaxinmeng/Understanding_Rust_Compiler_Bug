{"sha": "20aa9a3576b0b2abd1c119dae5b0bb0527c50c51", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjBhYTlhMzU3NmIwYjJhYmQxYzExOWRhZTViMGJiMDUyN2M1MGM1MQ==", "commit": {"author": {"name": "Dave Brolley", "email": "brolley@cygnus.com", "date": "1998-09-14T14:55:10Z"}, "committer": {"name": "Dave Brolley", "email": "brolley@gcc.gnu.org", "date": "1998-09-14T14:55:10Z"}, "message": "typeck.c (build_chill_slice): Always use TYPE_DOMAIN to get the domain type of the array.\n\nMon Sep 14 16:46:36 1998  Dave Brolley  <brolley@cygnus.com>\n\t* typeck.c (build_chill_slice): Always use TYPE_DOMAIN to get the\n\tdomain type of the array.\n\nFrom-SVN: r22420", "tree": {"sha": "ad5efebbaab715dc9f771bb9fb11d0f467ba9c57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad5efebbaab715dc9f771bb9fb11d0f467ba9c57"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/20aa9a3576b0b2abd1c119dae5b0bb0527c50c51", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20aa9a3576b0b2abd1c119dae5b0bb0527c50c51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/20aa9a3576b0b2abd1c119dae5b0bb0527c50c51", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20aa9a3576b0b2abd1c119dae5b0bb0527c50c51/comments", "author": null, "committer": null, "parents": [{"sha": "e12994aba327e7f49ac3fb73405dc8449c9336ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e12994aba327e7f49ac3fb73405dc8449c9336ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e12994aba327e7f49ac3fb73405dc8449c9336ff"}], "stats": {"total": 19, "additions": 8, "deletions": 11}, "files": [{"sha": "9bb6faad3a7915dff16e822155ae3dc3787cbe0d", "filename": "gcc/ch/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/20aa9a3576b0b2abd1c119dae5b0bb0527c50c51/gcc%2Fch%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/20aa9a3576b0b2abd1c119dae5b0bb0527c50c51/gcc%2Fch%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fch%2FChangeLog?ref=20aa9a3576b0b2abd1c119dae5b0bb0527c50c51", "patch": "@@ -1,5 +1,8 @@\n Mon Sep 14 16:46:36 1998  Dave Brolley  <brolley@cygnus.com>\n \n+\t* typeck.c (build_chill_slice): Always use TYPE_DOMAIN to get the\n+\tdomain type of the array.\n+\n \t* expr.c (build_chill_function_call): Remove redundant call to\n  \tchill_convert_to_assignment\n "}, {"sha": "3a7b4642bd56f939e40048b913997606f3e7fbd2", "filename": "gcc/ch/typeck.c", "status": "modified", "additions": 5, "deletions": 11, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/20aa9a3576b0b2abd1c119dae5b0bb0527c50c51/gcc%2Fch%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/20aa9a3576b0b2abd1c119dae5b0bb0527c50c51/gcc%2Fch%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fch%2Ftypeck.c?ref=20aa9a3576b0b2abd1c119dae5b0bb0527c50c51", "patch": "@@ -237,18 +237,12 @@ build_chill_slice (array, min_value, length)\n   if (TREE_CODE (array_type) == ARRAY_TYPE)\n     {\n       tree domain_type = TYPE_DOMAIN (array_type);\n-      tree index_domain\n-\t= TREE_CODE (length) != INTEGER_CST || integer_zerop (length)\n-\t? sizetype\n-\t: domain_type;\n-      tree domain_min = convert (index_domain, TYPE_MIN_VALUE (domain_type));\n-      tree domain_max = fold (build (PLUS_EXPR, index_domain,\n+      tree domain_min = TYPE_MIN_VALUE (domain_type);\n+      tree domain_max = fold (build (PLUS_EXPR, domain_type,\n \t\t\t\t     domain_min,\n-\t\t\t\t     convert (index_domain,\n-\t\t\t\t\t      size_binop (MINUS_EXPR,\n-\t\t\t\t\t\t\t  length,\n-\t\t\t\t\t\t\t  integer_one_node))));\n-      tree index_type = build_chill_range_type (domain_type,\n+\t\t\t\t     size_binop (MINUS_EXPR,\n+\t\t\t\t\t\t length, integer_one_node)));\n+      tree index_type = build_chill_range_type (TYPE_DOMAIN (array_type),\n \t\t\t\t\t\tdomain_min,\n \t\t\t\t\t\tdomain_max);\n "}]}