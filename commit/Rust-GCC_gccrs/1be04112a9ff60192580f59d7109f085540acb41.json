{"sha": "1be04112a9ff60192580f59d7109f085540acb41", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWJlMDQxMTJhOWZmNjAxOTI1ODBmNTlkNzEwOWYwODU1NDBhY2I0MQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-06-10T10:50:44Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-06-10T10:50:44Z"}, "message": "* call.c (build_method_call): Fix thinko.\n\nFrom-SVN: r20413", "tree": {"sha": "087b0fcb7c5f16bf723227ac9823cade5a401396", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/087b0fcb7c5f16bf723227ac9823cade5a401396"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1be04112a9ff60192580f59d7109f085540acb41", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1be04112a9ff60192580f59d7109f085540acb41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1be04112a9ff60192580f59d7109f085540acb41", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1be04112a9ff60192580f59d7109f085540acb41/comments", "author": null, "committer": null, "parents": [{"sha": "07fb7f791dcaef1b7951d7e33e065981719b83d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07fb7f791dcaef1b7951d7e33e065981719b83d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07fb7f791dcaef1b7951d7e33e065981719b83d4"}], "stats": {"total": 21, "additions": 10, "deletions": 11}, "files": [{"sha": "33780b8df08fe193d0f5c8a45cd362e2602561e5", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1be04112a9ff60192580f59d7109f085540acb41/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1be04112a9ff60192580f59d7109f085540acb41/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1be04112a9ff60192580f59d7109f085540acb41", "patch": "@@ -1,7 +1,6 @@\n 1998-06-10  Jason Merrill  <jason@yorick.cygnus.com>\n \n-\t* call.c (build_scoped_method_call): Fix thinko.\n-\t(build_method_call): Likewise.\n+\t* call.c (build_method_call): Fix thinko.\n \n 1998-06-10  Dave Brolley  <brolley@cygnus.com>\n "}, {"sha": "173bdde4d9f99738d06efea9af766d330d0b6e59", "filename": "gcc/cp/call.c", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1be04112a9ff60192580f59d7109f085540acb41/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1be04112a9ff60192580f59d7109f085540acb41/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=1be04112a9ff60192580f59d7109f085540acb41", "patch": "@@ -397,7 +397,7 @@ build_scoped_method_call (exp, basetype, name, parms)\n \t/* OK */;\n       else if (TREE_CODE (tmp) == IDENTIFIER_NODE)\n \t{\n-\t  if (IS_AGGR_TYPE (basetype) && name == constructor_name (basetype))\n+\t  if (IS_AGGR_TYPE (basetype) && tmp == constructor_name (basetype))\n \t    tmp = basetype;\n \t  else\n \t    tmp = get_type_value (tmp);\n@@ -648,21 +648,21 @@ build_method_call (instance, name, parms, basetype_path, flags)\n     {\n       tree tmp;\n \n-      flags |= LOOKUP_DESTRUCTOR;\n-      name = TREE_OPERAND (name, 0);\n+      tmp = name = TREE_OPERAND (name, 0);\n+\n       if (parms)\n \terror (\"destructors take no parameters\");\n       basetype = TREE_TYPE (instance);\n       if (TREE_CODE (basetype) == REFERENCE_TYPE)\n \tbasetype = TREE_TYPE (basetype);\n \n-      if (TREE_CODE (name) == TYPE_DECL)\n-\ttmp = TREE_TYPE (name);\n-      else if (TREE_CODE_CLASS (TREE_CODE (name)) == 't')\n-\ttmp = name;\n-      else if (TREE_CODE (name) == IDENTIFIER_NODE)\n+      if (TREE_CODE (tmp) == TYPE_DECL)\n+\ttmp = TREE_TYPE (tmp);\n+      else if (TREE_CODE_CLASS (TREE_CODE (tmp)) == 't')\n+\t/* OK */;\n+      else if (TREE_CODE (tmp) == IDENTIFIER_NODE)\n \t{\n-\t  if (IS_AGGR_TYPE (basetype) && name == constructor_name (basetype))\n+\t  if (IS_AGGR_TYPE (basetype) && tmp == constructor_name (basetype))\n \t    tmp = basetype;\n \t  else\n \t    tmp = get_type_value (tmp);"}]}