{"sha": "9427422ddacdf1c2914adfb6e8edca87f250fdfc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTQyNzQyMmRkYWNkZjFjMjkxNGFkZmI2ZThlZGNhODdmMjUwZmRmYw==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2019-04-03T16:03:37Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2019-04-03T16:03:37Z"}, "message": "re PR rtl-optimization/81025 (gcc ICE while building glibc for MIPS soft-float multi-lib variant)\n\n        PR rtl-optimization/81025\n        * reorg.c (skip_consecutive_labels): Do not skip past a BARRIER.\n\nFrom-SVN: r270129", "tree": {"sha": "605d02db23777fe46d5df2e782b7896d79402aaf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/605d02db23777fe46d5df2e782b7896d79402aaf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9427422ddacdf1c2914adfb6e8edca87f250fdfc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9427422ddacdf1c2914adfb6e8edca87f250fdfc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9427422ddacdf1c2914adfb6e8edca87f250fdfc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9427422ddacdf1c2914adfb6e8edca87f250fdfc/comments", "author": null, "committer": null, "parents": [{"sha": "c13e978820b82d7066ab29dc6b3c9a6d4848a91f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c13e978820b82d7066ab29dc6b3c9a6d4848a91f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c13e978820b82d7066ab29dc6b3c9a6d4848a91f"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "0d7c206de907d77de330a2fbbbe35f5b0ec61af8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9427422ddacdf1c2914adfb6e8edca87f250fdfc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9427422ddacdf1c2914adfb6e8edca87f250fdfc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9427422ddacdf1c2914adfb6e8edca87f250fdfc", "patch": "@@ -1,3 +1,8 @@\n+2019-04-03  Jeff Law  <law@redhat.com>\n+\n+\tPR rtl-optimization/81025\n+\t* reorg.c (skip_consecutive_labels): Do not skip past a BARRIER.\n+\n 2019-04-03  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/84101"}, {"sha": "81349382b81963f350b504920295a77d4b626150", "filename": "gcc/reorg.c", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9427422ddacdf1c2914adfb6e8edca87f250fdfc/gcc%2Freorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9427422ddacdf1c2914adfb6e8edca87f250fdfc/gcc%2Freorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freorg.c?ref=9427422ddacdf1c2914adfb6e8edca87f250fdfc", "patch": "@@ -137,7 +137,20 @@ skip_consecutive_labels (rtx label_or_return)\n \n   rtx_insn *label = as_a <rtx_insn *> (label_or_return);\n \n-  for (insn = label; insn != 0 && !INSN_P (insn); insn = NEXT_INSN (insn))\n+  /* __builtin_unreachable can create a CODE_LABEL followed by a BARRIER.\n+\n+     Since reaching the CODE_LABEL is undefined behavior, we can return\n+     any code label and we're OK at runtime.\n+\n+     However, if we return a CODE_LABEL which leads to a shrinked wrapped\n+     epilogue, but the path does not have a prologue, then we will trip\n+     a sanity check in the dwarf2 cfi code which wants to verify that\n+     the CFIs are all the same on the traces leading to the epilogue.\n+\n+     So we explicitly disallow looking through BARRIERS here.  */\n+  for (insn = label;\n+       insn != 0 && !INSN_P (insn) && !BARRIER_P (insn);\n+       insn = NEXT_INSN (insn))\n     if (LABEL_P (insn))\n       label = insn;\n "}]}