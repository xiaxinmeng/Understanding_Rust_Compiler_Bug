{"sha": "51090a412a665305192e7a05b96bb753b02f591e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTEwOTBhNDEyYTY2NTMwNTE5MmU3YTA1Yjk2YmI3NTNiMDJmNTkxZQ==", "commit": {"author": {"name": "Gregor Richards", "email": "gregor.richards@uwaterloo.ca", "date": "2015-10-20T18:13:15Z"}, "committer": {"name": "Szabolcs Nagy", "email": "nsz@gcc.gnu.org", "date": "2015-10-20T18:13:15Z"}, "message": "musl support for sh\n\n\t* config/sh/linux.h (MUSL_DYNAMIC_LINKER): Define.\n\t(MUSL_DYNAMIC_LINKER_E, MUSL_DYNAMIC_LINKER_FP): Define.\n\n\nCo-Authored-By: Szabolcs Nagy <szabolcs.nagy@arm.com>\n\nFrom-SVN: r229095", "tree": {"sha": "aca02c99cecfd3cbabbb04c3097ed292e9f673db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aca02c99cecfd3cbabbb04c3097ed292e9f673db"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/51090a412a665305192e7a05b96bb753b02f591e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51090a412a665305192e7a05b96bb753b02f591e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51090a412a665305192e7a05b96bb753b02f591e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51090a412a665305192e7a05b96bb753b02f591e/comments", "author": null, "committer": null, "parents": [{"sha": "abc5231831d8356f563e89ab3f2e93bd98eaac57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abc5231831d8356f563e89ab3f2e93bd98eaac57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abc5231831d8356f563e89ab3f2e93bd98eaac57"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "7321619fda51b53a74963ac93519bca5921600ad", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51090a412a665305192e7a05b96bb753b02f591e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51090a412a665305192e7a05b96bb753b02f591e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=51090a412a665305192e7a05b96bb753b02f591e", "patch": "@@ -1,3 +1,9 @@\n+2015-10-20  Gregor Richards  <gregor.richards@uwaterloo.ca>\n+\t    Szabolcs Nagy  <szabolcs.nagy@arm.com>\n+\n+\t* config/sh/linux.h (MUSL_DYNAMIC_LINKER): Define.\n+\t(MUSL_DYNAMIC_LINKER_E, MUSL_DYNAMIC_LINKER_FP): Define.\n+\n 2015-10-20  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/aarch64/aarch64.c (aarch64_mode_valid_for_sched_fusion_p):"}, {"sha": "61cf777eca4615705270b554621932b4cdb40de0", "filename": "gcc/config/sh/linux.h", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51090a412a665305192e7a05b96bb753b02f591e/gcc%2Fconfig%2Fsh%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51090a412a665305192e7a05b96bb753b02f591e/gcc%2Fconfig%2Fsh%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Flinux.h?ref=51090a412a665305192e7a05b96bb753b02f591e", "patch": "@@ -43,6 +43,27 @@ along with GCC; see the file COPYING3.  If not see\n \n #define TARGET_ASM_FILE_END file_end_indicate_exec_stack\n \n+#if TARGET_ENDIAN_DEFAULT == MASK_LITTLE_ENDIAN\n+#define MUSL_DYNAMIC_LINKER_E \"%{mb:eb}\"\n+#else\n+#define MUSL_DYNAMIC_LINKER_E \"%{!ml:eb}\"\n+#endif\n+\n+#if TARGET_CPU_DEFAULT & (MASK_HARD_SH2A_DOUBLE | MASK_SH4)\n+/* \"-nofpu\" if any nofpu option is specified.  */\n+#define MUSL_DYNAMIC_LINKER_FP \\\n+  \"%{m1|m2|m2a-nofpu|m3|m4-nofpu|m4-100-nofpu|m4-200-nofpu|m4-300-nofpu|\" \\\n+  \"m4-340|m4-400|m4-500|m4al:-nofpu}\"\n+#else\n+/* \"-nofpu\" if none of the hard fpu options are specified.  */\n+#define MUSL_DYNAMIC_LINKER_FP \"%{m2a|m4|m4-100|m4-200|m4-300|m4a:;:-nofpu}\"\n+#endif\n+\n+#undef MUSL_DYNAMIC_LINKER\n+#define MUSL_DYNAMIC_LINKER \\\n+  \"/lib/ld-musl-sh\" MUSL_DYNAMIC_LINKER_E MUSL_DYNAMIC_LINKER_FP \\\n+  \"%{mfdpic:-fdpic}.so.1\"\n+\n #define GLIBC_DYNAMIC_LINKER \"/lib/ld-linux.so.2\"\n \n #undef SUBTARGET_LINK_EMUL_SUFFIX"}]}