{"sha": "4a60c9a20c1581dd0cfd2277ef92cbe7825bf7a4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGE2MGM5YTIwYzE1ODFkZDBjZmQyMjc3ZWY5MmNiZTc4MjViZjdhNA==", "commit": {"author": {"name": "Yannick Moy", "email": "moy@adacore.com", "date": "2018-12-11T11:12:03Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-12-11T11:12:03Z"}, "message": "[Ada] Improve error message when named number passed as global item\n\nWhen a named number is used in Global/Depends contracts as global item,\nthe error message could be confusing to users new to Ada. Now the\nmessage explains that named numbers are not objects.\n\nFor instance on the following illegal code snippet:\n\n     $ gcc -c bad_global.ads\n\n     1. package Bad_Global is\n     2.\n     3.    X : constant := 1;\n     4.    Y : constant := 1.0;\n     5.\n     6.    procedure P with\n     7.      Global => (Input => X,\n                                 |\n        >>> global item must denote object, state or current instance\n            of concurrent type\n        >>> named number \"X\" is not an object\n\n     8.                 In_Out => Y);\n                                  |\n        >>> global item must denote object, state or current instance\n            of concurrent type\n        >>> named number \"Y\" is not an object\n\n     9.\n    10. end Bad_Global;\n\n2018-12-11  Yannick Moy  <moy@adacore.com>\n\ngcc/ada/\n\n\t* sem_prag.adb (Analyze_Global_Item): Refine error message.\n\nFrom-SVN: r267011", "tree": {"sha": "a47e9f3f9e700de5e62f46cef56f38e3dead4c39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a47e9f3f9e700de5e62f46cef56f38e3dead4c39"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a60c9a20c1581dd0cfd2277ef92cbe7825bf7a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a60c9a20c1581dd0cfd2277ef92cbe7825bf7a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a60c9a20c1581dd0cfd2277ef92cbe7825bf7a4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a60c9a20c1581dd0cfd2277ef92cbe7825bf7a4/comments", "author": {"login": "yannickmoy", "id": 859440, "node_id": "MDQ6VXNlcjg1OTQ0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannickmoy", "html_url": "https://github.com/yannickmoy", "followers_url": "https://api.github.com/users/yannickmoy/followers", "following_url": "https://api.github.com/users/yannickmoy/following{/other_user}", "gists_url": "https://api.github.com/users/yannickmoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannickmoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannickmoy/subscriptions", "organizations_url": "https://api.github.com/users/yannickmoy/orgs", "repos_url": "https://api.github.com/users/yannickmoy/repos", "events_url": "https://api.github.com/users/yannickmoy/events{/privacy}", "received_events_url": "https://api.github.com/users/yannickmoy/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e60c10b3b91e9b26115620d57ed6485aedf7d65b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e60c10b3b91e9b26115620d57ed6485aedf7d65b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e60c10b3b91e9b26115620d57ed6485aedf7d65b"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "d38e966d08b2569732dc14955eef069e308f0485", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a60c9a20c1581dd0cfd2277ef92cbe7825bf7a4/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a60c9a20c1581dd0cfd2277ef92cbe7825bf7a4/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=4a60c9a20c1581dd0cfd2277ef92cbe7825bf7a4", "patch": "@@ -1,3 +1,7 @@\n+2018-12-11  Yannick Moy  <moy@adacore.com>\n+\n+\t* sem_prag.adb (Analyze_Global_Item): Refine error message.\n+\n 2018-12-11  Ed Schonberg  <schonberg@adacore.com>\n \n \t* exp_ch7.adb (Check_Unnesting_In_Declarations): Extend"}, {"sha": "4d4b665ffc90cd12971f62b99a4c1070f858a088", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a60c9a20c1581dd0cfd2277ef92cbe7825bf7a4/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a60c9a20c1581dd0cfd2277ef92cbe7825bf7a4/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=4a60c9a20c1581dd0cfd2277ef92cbe7825bf7a4", "patch": "@@ -2282,6 +2282,12 @@ package body Sem_Prag is\n                   SPARK_Msg_N\n                     (\"global item must denote object, state or current \"\n                      & \"instance of concurrent type\", Item);\n+\n+                  if Ekind (Item_Id) in Named_Kind then\n+                     SPARK_Msg_NE\n+                       (\"\\named number & is not an object\", Item, Item);\n+                  end if;\n+\n                   return;\n                end if;\n "}]}