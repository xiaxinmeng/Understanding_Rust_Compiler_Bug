{"sha": "e3b350575018370e7564d9686ede0f804b99637f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTNiMzUwNTc1MDE4MzcwZTc1NjRkOTY4NmVkZTBmODA0Yjk5NjM3Zg==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@google.com", "date": "2012-08-20T14:23:32Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2012-08-20T14:23:32Z"}, "message": "Fix -ftime-report for C++ lookup.\n\nFound this while running -ftime-report on a largish C++ source file.\nWe need to start TV_NAME_LOOKUP conditionally inside poplevel()\nbecause it may be called from another lookup routine that already has\nTV_NAME_LOOKUP going.\n\nTested on x86_64.  Committed to trunk.\n\n2012-08-20  Diego Novillo  <dnovillo@google.com>\n\n\t* decl.c (poplevel): Start TV_NAME_LOOKUP conditionally.\n\nFrom-SVN: r190535", "tree": {"sha": "db19c9388a58aa903a93fa7ea4a50d5c130bd265", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db19c9388a58aa903a93fa7ea4a50d5c130bd265"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e3b350575018370e7564d9686ede0f804b99637f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3b350575018370e7564d9686ede0f804b99637f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3b350575018370e7564d9686ede0f804b99637f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3b350575018370e7564d9686ede0f804b99637f/comments", "author": {"login": "dnovillo", "id": 7295335, "node_id": "MDQ6VXNlcjcyOTUzMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/7295335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnovillo", "html_url": "https://github.com/dnovillo", "followers_url": "https://api.github.com/users/dnovillo/followers", "following_url": "https://api.github.com/users/dnovillo/following{/other_user}", "gists_url": "https://api.github.com/users/dnovillo/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnovillo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnovillo/subscriptions", "organizations_url": "https://api.github.com/users/dnovillo/orgs", "repos_url": "https://api.github.com/users/dnovillo/repos", "events_url": "https://api.github.com/users/dnovillo/events{/privacy}", "received_events_url": "https://api.github.com/users/dnovillo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "eb83633a818fcc4c568d633d7ddbac078d2fc1fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb83633a818fcc4c568d633d7ddbac078d2fc1fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb83633a818fcc4c568d633d7ddbac078d2fc1fe"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "5c4f362f24d5cc61e76fb077a916c3d18d332c98", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3b350575018370e7564d9686ede0f804b99637f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3b350575018370e7564d9686ede0f804b99637f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e3b350575018370e7564d9686ede0f804b99637f", "patch": "@@ -1,3 +1,7 @@\n+2012-08-20  Diego Novillo  <dnovillo@google.com>\n+\n+\t* decl.c (poplevel): Start TV_NAME_LOOKUP conditionally.\n+\n 2012-08-20  Richard Guenther  <rguenther@suse.de>\n \n \t* name-lookup.c (store_binding_p): New predicate, split out from ..."}, {"sha": "0dad597c9aca2dd5a123c6ae20216eb834511c2d", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3b350575018370e7564d9686ede0f804b99637f/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3b350575018370e7564d9686ede0f804b99637f/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=e3b350575018370e7564d9686ede0f804b99637f", "patch": "@@ -552,7 +552,7 @@ poplevel (int keep, int reverse, int functionbody)\n   unsigned ix;\n   cp_label_binding *label_bind;\n \n-  timevar_start (TV_NAME_LOOKUP);\n+  bool subtime = timevar_cond_start (TV_NAME_LOOKUP);\n  restart:\n \n   block = NULL_TREE;\n@@ -818,7 +818,7 @@ poplevel (int keep, int reverse, int functionbody)\n   if (kind == sk_cleanup)\n     goto restart;\n \n-  timevar_stop (TV_NAME_LOOKUP);\n+  timevar_cond_stop (TV_NAME_LOOKUP, subtime);\n   return block;\n }\n "}]}