{"sha": "daccad6dd9fc5fce8e89407c6af6a2244b04352e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGFjY2FkNmRkOWZjNWZjZThlODk0MDdjNmFmNmEyMjQ0YjA0MzUyZQ==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-05-02T22:18:11Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-05-02T22:18:11Z"}, "message": "vms.h (SUBTARGET_OVERRIDE_OPTIONS): For pic code, unset flag_jump_tables.\n\n\t* config/alpha/vms.h (SUBTARGET_OVERRIDE_OPTIONS): For pic code,\n\tunset flag_jump_tables.\n\t* stmt.c (expand_case): Remove special flag_pic case conditional\n\ton ASM_OUTPUT_ADDR_DIFF_ELT not being defined.\n\nFrom-SVN: r187065", "tree": {"sha": "c1d159624825d693c1673e551e37788d6a49f86f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c1d159624825d693c1673e551e37788d6a49f86f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/daccad6dd9fc5fce8e89407c6af6a2244b04352e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/daccad6dd9fc5fce8e89407c6af6a2244b04352e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/daccad6dd9fc5fce8e89407c6af6a2244b04352e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/daccad6dd9fc5fce8e89407c6af6a2244b04352e/comments", "author": null, "committer": null, "parents": [{"sha": "aefa216b7eb3e9b444bf1c81181a336e41d6150b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aefa216b7eb3e9b444bf1c81181a336e41d6150b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aefa216b7eb3e9b444bf1c81181a336e41d6150b"}], "stats": {"total": 22, "additions": 18, "deletions": 4}, "files": [{"sha": "a72cd97dc795bf4449ac381b2473947dd64ba95a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/daccad6dd9fc5fce8e89407c6af6a2244b04352e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/daccad6dd9fc5fce8e89407c6af6a2244b04352e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=daccad6dd9fc5fce8e89407c6af6a2244b04352e", "patch": "@@ -1,3 +1,10 @@\n+2012-05-02  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\t* config/alpha/vms.h (SUBTARGET_OVERRIDE_OPTIONS): For pic code,\n+\tunset flag_jump_tables.\n+\t* stmt.c (expand_case): Remove special flag_pic case conditional\n+\ton ASM_OUTPUT_ADDR_DIFF_ELT not being defined.\n+\n 2012-05-02  Ulrich Weigand  <ulrich.weigand@linaro.org>\n \n \t* common/config/s390/s390-common.c (s390_option_optimization_table):"}, {"sha": "73e45a5f85c18bb273d7db278aff9d2a1de1566a", "filename": "gcc/config/alpha/vms.h", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/daccad6dd9fc5fce8e89407c6af6a2244b04352e/gcc%2Fconfig%2Falpha%2Fvms.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/daccad6dd9fc5fce8e89407c6af6a2244b04352e/gcc%2Fconfig%2Falpha%2Fvms.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Fvms.h?ref=daccad6dd9fc5fce8e89407c6af6a2244b04352e", "patch": "@@ -257,7 +257,15 @@ typedef struct {int num_args; enum avms_arg_type atypes[6];} avms_arg_info;\n #undef ASM_FINAL_SPEC\n \n /* The VMS convention is to always provide minimal debug info\n-   for a traceback unless specifically overridden.  */\n+   for a traceback unless specifically overridden.\n+\n+   Because ASM_OUTPUT_ADDR_DIFF_ELT is not defined for alpha-vms,\n+   jump tables cannot be output for PIC code, because you can't put\n+   an absolute address in a readonly section.  Putting the table in\n+   a writable section is a security hole.  Therefore, we unset the\n+   flag_jump_tables flag, forcing switch statements to be expanded\n+   using decision trees.  There are probably other ways to address\n+   this issue, but using a decision tree is clearly safe.  */\n \n #undef SUBTARGET_OVERRIDE_OPTIONS\n #define SUBTARGET_OVERRIDE_OPTIONS                  \\\n@@ -268,6 +276,8 @@ do {                                                \\\n       write_symbols = VMS_DEBUG;                    \\\n       debug_info_level = DINFO_LEVEL_TERSE;         \\\n     }                                               \\\n+  if (flag_pic)                                     \\\n+    flag_jump_tables = 0;                           \\\n } while (0)\n \n #undef LINK_SPEC"}, {"sha": "dd34890d46215679ccf3ac10f31960da1129a3b1", "filename": "gcc/stmt.c", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/daccad6dd9fc5fce8e89407c6af6a2244b04352e/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/daccad6dd9fc5fce8e89407c6af6a2244b04352e/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=daccad6dd9fc5fce8e89407c6af6a2244b04352e", "patch": "@@ -2198,9 +2198,6 @@ expand_case (gimple stmt)\n \t       /* RANGE may be signed, and really large ranges will show up\n \t\t  as negative numbers.  */\n \t       || compare_tree_int (range, 0) < 0\n-#ifndef ASM_OUTPUT_ADDR_DIFF_ELT\n-\t       || flag_pic\n-#endif\n \t       || !flag_jump_tables\n \t       || TREE_CONSTANT (index_expr)\n \t       /* If neither casesi or tablejump is available, we can"}]}