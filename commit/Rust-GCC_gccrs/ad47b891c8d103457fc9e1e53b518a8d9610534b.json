{"sha": "ad47b891c8d103457fc9e1e53b518a8d9610534b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWQ0N2I4OTFjOGQxMDM0NTdmYzllMWU1M2I1MThhOGQ5NjEwNTM0Yg==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-05-15T09:07:17Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-05-15T09:07:17Z"}, "message": "re PR c++/27315 (ICE with ill-placed expression)\n\n\tPR c++/27315\n\t* pt.c (do_decl_instantiation): Return early on invalid decl.\n\n\t* g++.dg/template/operator6.C: New test.\n\t* g++.dg/template/incomplete3.C: New test.\n\nFrom-SVN: r113778", "tree": {"sha": "434df1be050fd0440ff267586347186783e9f496", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/434df1be050fd0440ff267586347186783e9f496"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad47b891c8d103457fc9e1e53b518a8d9610534b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad47b891c8d103457fc9e1e53b518a8d9610534b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad47b891c8d103457fc9e1e53b518a8d9610534b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad47b891c8d103457fc9e1e53b518a8d9610534b/comments", "author": null, "committer": null, "parents": [{"sha": "7c60008e24503c831098cd8246e5da5b8fcf3537", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c60008e24503c831098cd8246e5da5b8fcf3537", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c60008e24503c831098cd8246e5da5b8fcf3537"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "f34ea88fb99541127f0a8be83b6f9f6cad80ca2c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad47b891c8d103457fc9e1e53b518a8d9610534b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad47b891c8d103457fc9e1e53b518a8d9610534b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ad47b891c8d103457fc9e1e53b518a8d9610534b", "patch": "@@ -1,5 +1,8 @@\n 2006-05-15  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n+\tPR c++/27315\n+\t* pt.c (do_decl_instantiation): Return early on invalid decl.\n+\n \tPR c++/27559\n \t* pt.c (push_template_decl_real): Return error_mark_node instead\n \tof broken decl."}, {"sha": "cf0e7cd4f9a01ebfd0806c7959862e54d16904c4", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad47b891c8d103457fc9e1e53b518a8d9610534b/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad47b891c8d103457fc9e1e53b518a8d9610534b/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=ad47b891c8d103457fc9e1e53b518a8d9610534b", "patch": "@@ -11215,7 +11215,7 @@ do_decl_instantiation (tree decl, tree storage)\n   tree result = NULL_TREE;\n   int extern_p = 0;\n \n-  if (!decl)\n+  if (!decl || decl == error_mark_node)\n     /* An error occurred, for which grokdeclarator has already issued\n        an appropriate message.  */\n     return;"}, {"sha": "df0864627f3f18797f6cf648632f47d48bd0afe0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad47b891c8d103457fc9e1e53b518a8d9610534b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad47b891c8d103457fc9e1e53b518a8d9610534b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ad47b891c8d103457fc9e1e53b518a8d9610534b", "patch": "@@ -1,5 +1,9 @@\n 2006-05-15  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n+\tPR c++/27315\n+\t* g++.dg/template/operator6.C: New test.\n+\t* g++.dg/template/incomplete3.C: New test.\n+\n \tPR c++/27559\n \t* g++.dg/template/new4.C: New test.\n "}, {"sha": "8a20bba74d572ebe71b7c9c5ef0ed76112ad6fd7", "filename": "gcc/testsuite/g++.dg/template/incomplete3.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad47b891c8d103457fc9e1e53b518a8d9610534b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fincomplete3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad47b891c8d103457fc9e1e53b518a8d9610534b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fincomplete3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fincomplete3.C?ref=ad47b891c8d103457fc9e1e53b518a8d9610534b", "patch": "@@ -0,0 +1,5 @@\n+// PR c++/27315\n+// { dg-do compile }\n+\n+struct A;                  // { dg-error \"forward declaration\" }\n+template void A::foo<0>(); // { dg-error \"before|incomplete\" }"}, {"sha": "94a869bccd5fcb3d33d362df76b4e5872a1ead30", "filename": "gcc/testsuite/g++.dg/template/operator6.C", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad47b891c8d103457fc9e1e53b518a8d9610534b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foperator6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad47b891c8d103457fc9e1e53b518a8d9610534b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foperator6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foperator6.C?ref=ad47b891c8d103457fc9e1e53b518a8d9610534b", "patch": "@@ -0,0 +1,4 @@\n+// PR c++/27315\n+// { dg-do compile }\n+\n+template void operator+; // { dg-error \"non-function\" }"}]}