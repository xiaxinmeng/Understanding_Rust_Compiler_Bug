{"sha": "af3cdd3433e0bc60f4e6ebee1ee699bb19485cce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWYzY2RkMzQzM2UwYmM2MGY0ZTZlYmVlMWVlNjk5YmIxOTQ4NWNjZQ==", "commit": {"author": {"name": "Ilya Enkovich", "email": "enkovich.gnu@gmail.com", "date": "2016-03-04T13:49:54Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2016-03-04T13:49:54Z"}, "message": "tree-vect-patterns.c (search_type_for_mask): Handle comparison of booleans.\n\ngcc/\n\n\t* tree-vect-patterns.c (search_type_for_mask): Handle\n\tcomparison of booleans.\n\ngcc/testsuite/\n\n\t* gcc.dg/pr70026.c: New test.\n\nFrom-SVN: r233966", "tree": {"sha": "38f0d831d9046ff5a804a681c6e7d0dc1ae4b7a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/38f0d831d9046ff5a804a681c6e7d0dc1ae4b7a8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce/comments", "author": null, "committer": null, "parents": [{"sha": "7ff6ca3899e0cae8460f7dc30770002559bc0553", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ff6ca3899e0cae8460f7dc30770002559bc0553", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ff6ca3899e0cae8460f7dc30770002559bc0553"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "551044c1c07ebbb43c359fec73afee83178f0cc9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=af3cdd3433e0bc60f4e6ebee1ee699bb19485cce", "patch": "@@ -1,3 +1,9 @@\n+2016-03-04  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\t* tree-vect-patterns.c (search_type_for_mask): Handle\n+\tcomparison of booleans.\n+\n+\n 2016-03-04  Jakub Jelinek  <jakub@redhat.com>\n \n \t* doc/extend.texi (__builtin_alloca, __builtin_alloca_with_align):"}, {"sha": "5faeb8617beccde8c2ba6bcec6a518d8d8b1f577", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=af3cdd3433e0bc60f4e6ebee1ee699bb19485cce", "patch": "@@ -1,3 +1,7 @@\n+2016-03-04  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\t* gcc.dg/pr70026.c: New test.\n+\n 2016-03-04  Marek Polacek  <polacek@redhat.com>\n \n \tPR c/69798"}, {"sha": "32f59e2d34f3cbb2a0a88ed8021d82c67091c88b", "filename": "gcc/testsuite/gcc.dg/pr70026.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce/gcc%2Ftestsuite%2Fgcc.dg%2Fpr70026.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce/gcc%2Ftestsuite%2Fgcc.dg%2Fpr70026.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr70026.c?ref=af3cdd3433e0bc60f4e6ebee1ee699bb19485cce", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O3\" } */\n+\n+unsigned int a[64], b[64], c[64], d[64], e[64];\n+\n+void\n+foo ()\n+{\n+  int i;\n+  for (i = 0; i < 64; i++)\n+    {\n+      d[i] = a[i];\n+      e[i] = ((b[i] < e[i]) != !c[i]) && !a[i];\n+    }\n+}"}, {"sha": "0ee5bbe8f4637a43d953d03f26f7f055c8fca8aa", "filename": "gcc/tree-vect-patterns.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce/gcc%2Ftree-vect-patterns.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af3cdd3433e0bc60f4e6ebee1ee699bb19485cce/gcc%2Ftree-vect-patterns.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-patterns.c?ref=af3cdd3433e0bc60f4e6ebee1ee699bb19485cce", "patch": "@@ -3220,6 +3220,15 @@ search_type_for_mask (tree var, vec_info *vinfo)\n \t{\n \t  tree comp_vectype, mask_type;\n \n+\t  if (TREE_CODE (TREE_TYPE (rhs1)) == BOOLEAN_TYPE)\n+\t    {\n+\t      res = search_type_for_mask (rhs1, vinfo);\n+\t      res2 = search_type_for_mask (gimple_assign_rhs2 (def_stmt), vinfo);\n+\t      if (!res || (res2 && TYPE_PRECISION (res) > TYPE_PRECISION (res2)))\n+\t\tres = res2;\n+\t      break;\n+\t    }\n+\n \t  comp_vectype = get_vectype_for_scalar_type (TREE_TYPE (rhs1));\n \t  if (comp_vectype == NULL_TREE)\n \t    return NULL_TREE;"}]}