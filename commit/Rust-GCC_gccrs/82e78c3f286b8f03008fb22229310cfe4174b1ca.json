{"sha": "82e78c3f286b8f03008fb22229310cfe4174b1ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODJlNzhjM2YyODZiOGYwMzAwOGZiMjIyMjkzMTBjZmU0MTc0YjFjYQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2015-08-22T17:44:46Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2015-08-22T17:44:46Z"}, "message": "re PR c++/63693 (ICE in resolve_typename_type)\n\n/cp\n2015-08-22  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/63693\n\t* pt.c (resolve_typename_type): Use CLASSTYPE_PRIMARY_TEMPLATE_TYPE\n\tonly on class types.\n\n/testsuite\n2015-08-22  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/63693\n\t* g++.dg/cpp0x/decltype63.C: New.\n\nFrom-SVN: r227098", "tree": {"sha": "c8ea43d8552009f1ae662f8f4aaf98e41323b43b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c8ea43d8552009f1ae662f8f4aaf98e41323b43b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/82e78c3f286b8f03008fb22229310cfe4174b1ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82e78c3f286b8f03008fb22229310cfe4174b1ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82e78c3f286b8f03008fb22229310cfe4174b1ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82e78c3f286b8f03008fb22229310cfe4174b1ca/comments", "author": null, "committer": null, "parents": [{"sha": "2e969ce55137fdf615207106ceabcaa462ef74a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e969ce55137fdf615207106ceabcaa462ef74a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e969ce55137fdf615207106ceabcaa462ef74a2"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "b5a3398c8dcf1c0c5e710d69620fa0ab398cce8a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82e78c3f286b8f03008fb22229310cfe4174b1ca/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82e78c3f286b8f03008fb22229310cfe4174b1ca/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=82e78c3f286b8f03008fb22229310cfe4174b1ca", "patch": "@@ -1,3 +1,9 @@\n+2015-08-22  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/63693\n+\t* pt.c (resolve_typename_type): Use CLASSTYPE_PRIMARY_TEMPLATE_TYPE\n+\tonly on class types.\n+\n 2015-08-21  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/67240"}, {"sha": "fb7b9d21056b3c0212ccb1efef63bc92d7e26774", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82e78c3f286b8f03008fb22229310cfe4174b1ca/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82e78c3f286b8f03008fb22229310cfe4174b1ca/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=82e78c3f286b8f03008fb22229310cfe4174b1ca", "patch": "@@ -22673,7 +22673,8 @@ resolve_typename_type (tree type, bool only_current_p)\n     return type;\n   /* If SCOPE isn't the template itself, it will not have a valid\n      TYPE_FIELDS list.  */\n-  if (same_type_p (scope, CLASSTYPE_PRIMARY_TEMPLATE_TYPE (scope)))\n+  if (CLASS_TYPE_P (scope)\n+      && same_type_p (scope, CLASSTYPE_PRIMARY_TEMPLATE_TYPE (scope)))\n     /* scope is either the template itself or a compatible instantiation\n        like X<T>, so look up the name in the original template.  */\n     scope = CLASSTYPE_PRIMARY_TEMPLATE_TYPE (scope);"}, {"sha": "aad7edceca487a2aaa5614093b143e639d42f96f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82e78c3f286b8f03008fb22229310cfe4174b1ca/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82e78c3f286b8f03008fb22229310cfe4174b1ca/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=82e78c3f286b8f03008fb22229310cfe4174b1ca", "patch": "@@ -1,3 +1,8 @@\n+2015-08-22  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/63693\n+\t* g++.dg/cpp0x/decltype63.C: New.\n+\n 2015-08-22  Nathan Sidwell  <nathan@acm.org>\n \n \t* c-c++-common/Wsizeof-pointer-memaccess1.c: Require alloca."}, {"sha": "60dfec47a415afbde36d030d33a25ac73f12b1b9", "filename": "gcc/testsuite/g++.dg/cpp0x/decltype63.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82e78c3f286b8f03008fb22229310cfe4174b1ca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype63.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82e78c3f286b8f03008fb22229310cfe4174b1ca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype63.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype63.C?ref=82e78c3f286b8f03008fb22229310cfe4174b1ca", "patch": "@@ -0,0 +1,7 @@\n+// PR c++/63693\n+// { dg-do compile { target c++11 } }\n+\n+template<typename T>\n+class C{\n+ T t;\n+ decltype(t)::a::  // { dg-error \"expected\" }"}]}