{"sha": "a53bf42c31fe143b6f3079154a772ea1c8b921b0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTUzYmY0MmMzMWZlMTQzYjZmMzA3OTE1NGE3NzJlYTFjOGI5MjFiMA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-08-31T09:11:43Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-08-31T09:11:43Z"}, "message": "re PR c++/33212 (Broken diagnostic: 'trait_expr' not supported by dump_expr)\n\n/cp\n2007-08-31  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/33212\n\t* parser.c (cp_parser_trait_expr): Check rerurn value of\n\tcp_parser_type_id.\n\n/testsuite\n2007-08-31  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/33212\n\t* g++.dg/ext/is_class_error.C: New.\n\nFrom-SVN: r127962", "tree": {"sha": "f93427a75147858d4e3281b56ca249a51e316ffa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f93427a75147858d4e3281b56ca249a51e316ffa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a53bf42c31fe143b6f3079154a772ea1c8b921b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a53bf42c31fe143b6f3079154a772ea1c8b921b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a53bf42c31fe143b6f3079154a772ea1c8b921b0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a53bf42c31fe143b6f3079154a772ea1c8b921b0/comments", "author": null, "committer": null, "parents": [{"sha": "22d2aa96f8da11d7710962b298a8036e0fe44720", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22d2aa96f8da11d7710962b298a8036e0fe44720", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22d2aa96f8da11d7710962b298a8036e0fe44720"}], "stats": {"total": 63, "additions": 43, "deletions": 20}, "files": [{"sha": "9c7adc9ea9669604fa5cc9acdba158946b0bd613", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a53bf42c31fe143b6f3079154a772ea1c8b921b0/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a53bf42c31fe143b6f3079154a772ea1c8b921b0/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a53bf42c31fe143b6f3079154a772ea1c8b921b0", "patch": "@@ -1,3 +1,9 @@\n+2007-08-31  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/33212\n+\t* parser.c (cp_parser_trait_expr): Check rerurn value of\n+\tcp_parser_type_id.\n+\n 2007-08-30  Ollie Wild  <aaw@google.com>\n \n \t* cvt.c (cp_convert_to_pointer): Remove force parameter. Call"}, {"sha": "92f443064c18fce507a5b8437df1b1413728cd01", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a53bf42c31fe143b6f3079154a772ea1c8b921b0/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a53bf42c31fe143b6f3079154a772ea1c8b921b0/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=a53bf42c31fe143b6f3079154a772ea1c8b921b0", "patch": "@@ -6502,6 +6502,9 @@ cp_parser_trait_expr (cp_parser* parser, enum rid keyword)\n \n   type1 = cp_parser_type_id (parser);\n \n+  if (type1 == error_mark_node)\n+    return error_mark_node;\n+\n   /* Build a trivial decl-specifier-seq.  */\n   clear_decl_specs (&decl_specs);\n   decl_specs.type = type1;\n@@ -6516,6 +6519,9 @@ cp_parser_trait_expr (cp_parser* parser, enum rid keyword)\n  \n       type2 = cp_parser_type_id (parser);\n \n+      if (type2 == error_mark_node)\n+\treturn error_mark_node;\n+\n       /* Build a trivial decl-specifier-seq.  */\n       clear_decl_specs (&decl_specs);\n       decl_specs.type = type2;\n@@ -6527,8 +6533,8 @@ cp_parser_trait_expr (cp_parser* parser, enum rid keyword)\n \n   cp_parser_require (parser, CPP_CLOSE_PAREN, \"`)'\");\n \n-  /* Complete the trait expr, which may mean either processing the\n-     static assert now or saving it for template instantiation.  */\n+  /* Complete the trait expression, which may mean either processing\n+     the trait expr now or saving it for template instantiation.  */\n   return finish_trait_expr (kind, type1, type2);\n }\n "}, {"sha": "f2d371404d6e9a545b22a231440c594163449004", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 23, "deletions": 18, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a53bf42c31fe143b6f3079154a772ea1c8b921b0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a53bf42c31fe143b6f3079154a772ea1c8b921b0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a53bf42c31fe143b6f3079154a772ea1c8b921b0", "patch": "@@ -1,28 +1,33 @@\n+2007-08-31  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/33212\n+\t* g++.dg/ext/is_class_error.C: New.\n+\n 2007-08-31  Olivier Hainque  <hainque@adacore.com>\n \n \t* gnat.dg/test_oalign.adb, oalign[12].ads: New test.\n \t\n 2007-08-31  David Edelsohn  <edelsohn@gnu.org>\n             Revital Eres  <eres@il.ibm.com>\n \n-        * gcc.target/powerpc/paired-1.c: New test.\n-        * gcc.target/powerpc/paired-2.c: New test.\n-        * gcc.target/powerpc/paired-3.c: New test.\n-        * gcc.target/powerpc/paired-4.c: New test.\n-        * gcc.target/powerpc/paired-5.c: New test.\n-        * gcc.target/powerpc/paired-6.c: New test.\n-        * gcc.target/powerpc/paired-7.c: New test.\n-        * gcc.target/powerpc/ppc-paired.c: New test.\n-\n-2007-08-30  Ollie Wild  <aaw@google.com>\n-\n-\tg++.dg/conversion/ptrmem2.C: New test.\n-\tg++.dg/conversion/ptrmem3.C: New test.\n-\tg++.dg/conversion/ptrmem4.C: New test.\n-\tg++.dg/conversion/ptrmem5.C: New test.\n-\tg++.dg/conversion/ptrmem6.C: New test.\n-\tg++.dg/conversion/ptrmem7.C: New test.\n-\tg++.dg/conversion/ptrmem8.C: New test.\n+\t* gcc.target/powerpc/paired-1.c: New test.\n+\t* gcc.target/powerpc/paired-2.c: New test.\n+\t* gcc.target/powerpc/paired-3.c: New test.\n+\t* gcc.target/powerpc/paired-4.c: New test.\n+\t* gcc.target/powerpc/paired-5.c: New test.\n+\t* gcc.target/powerpc/paired-6.c: New test.\n+\t* gcc.target/powerpc/paired-7.c: New test.\n+\t* gcc.target/powerpc/ppc-paired.c: New test.\n+\n+2007-08-31  Ollie Wild  <aaw@google.com>\n+\n+\t* g++.dg/conversion/ptrmem2.C: New test.\n+\t* g++.dg/conversion/ptrmem3.C: New test.\n+\t* g++.dg/conversion/ptrmem4.C: New test.\n+\t* g++.dg/conversion/ptrmem5.C: New test.\n+\t* g++.dg/conversion/ptrmem6.C: New test.\n+\t* g++.dg/conversion/ptrmem7.C: New test.\n+\t* g++.dg/conversion/ptrmem8.C: New test.\n \n 2007-08-31  Paul Thomas  <pault@gcc.gnu.org>\n "}, {"sha": "d037ec72b7b8552bd4ba2a8d18ce2fd133c39b2b", "filename": "gcc/testsuite/g++.dg/ext/is_class_error.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a53bf42c31fe143b6f3079154a772ea1c8b921b0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fis_class_error.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a53bf42c31fe143b6f3079154a772ea1c8b921b0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fis_class_error.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fis_class_error.C?ref=a53bf42c31fe143b6f3079154a772ea1c8b921b0", "patch": "@@ -0,0 +1,6 @@\n+// PR c++/33212\n+\n+template<int> void foo()\n+{\n+  __is_class((int); // { dg-error \"type-specifier|primary-expression\" }\n+}"}]}