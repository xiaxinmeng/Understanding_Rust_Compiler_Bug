{"sha": "4cd2eefc85eb5c4aba46213126b794393cf5a909", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGNkMmVlZmM4NWViNWM0YWJhNDYyMTMxMjZiNzk0MzkzY2Y1YTkwOQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-02-21T08:08:40Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-02-21T08:08:40Z"}, "message": "re PR tree-optimization/61441 (ARM aarch64 fails to quiet signaling NaN)\n\n\tPR tree-optimization/61441\n\t* simplify-rtx.c (simplify_const_unary_operation): For\n\t-fsignaling-nans and sNaN operand, return NULL_RTX rather than\n\tthe sNaN unmodified.\n\nFrom-SVN: r245620", "tree": {"sha": "0edb8a91f4a9ca357511c61e59f64a0e2399acce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0edb8a91f4a9ca357511c61e59f64a0e2399acce"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4cd2eefc85eb5c4aba46213126b794393cf5a909", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cd2eefc85eb5c4aba46213126b794393cf5a909", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4cd2eefc85eb5c4aba46213126b794393cf5a909", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cd2eefc85eb5c4aba46213126b794393cf5a909/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "db03bf50fce59cfce72bfaf7593acd651336f213", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db03bf50fce59cfce72bfaf7593acd651336f213", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db03bf50fce59cfce72bfaf7593acd651336f213"}], "stats": {"total": 26, "additions": 18, "deletions": 8}, "files": [{"sha": "26a3864ad090380bfbe7e015e8fed209989b8052", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cd2eefc85eb5c4aba46213126b794393cf5a909/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cd2eefc85eb5c4aba46213126b794393cf5a909/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4cd2eefc85eb5c4aba46213126b794393cf5a909", "patch": "@@ -1,3 +1,10 @@\n+2017-02-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/61441\n+\t* simplify-rtx.c (simplify_const_unary_operation): For\n+\t-fsignaling-nans and sNaN operand, return NULL_RTX rather than\n+\tthe sNaN unmodified.\n+\n 2017-02-20  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n \t* Makefile.in (BUILD_SYSTEM_HEADER_DIR): New make variabe."}, {"sha": "fb04cd002ac86e6cd94ad1e42bbd968affeaa4fe", "filename": "gcc/simplify-rtx.c", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cd2eefc85eb5c4aba46213126b794393cf5a909/gcc%2Fsimplify-rtx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cd2eefc85eb5c4aba46213126b794393cf5a909/gcc%2Fsimplify-rtx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.c?ref=4cd2eefc85eb5c4aba46213126b794393cf5a909", "patch": "@@ -1889,23 +1889,26 @@ simplify_const_unary_operation (enum rtx_code code, machine_mode mode,\n \tcase FLOAT_TRUNCATE:\n \t  /* Don't perform the operation if flag_signaling_nans is on\n \t     and the operand is a signaling NaN.  */\n-\t  if (!(HONOR_SNANS (mode) && REAL_VALUE_ISSIGNALING_NAN (d)))\n-\t    d = real_value_truncate (mode, d);\n+\t  if (HONOR_SNANS (mode) && REAL_VALUE_ISSIGNALING_NAN (d))\n+\t    return NULL_RTX;\n+\t  d = real_value_truncate (mode, d);\n \t  break;\n \tcase FLOAT_EXTEND:\n-\t  /* All this does is change the mode, unless changing\n-\t     mode class.  */\n \t  /* Don't perform the operation if flag_signaling_nans is on\n \t     and the operand is a signaling NaN.  */\n-\t  if (GET_MODE_CLASS (mode) != GET_MODE_CLASS (GET_MODE (op))\n-\t      && !(HONOR_SNANS (mode) && REAL_VALUE_ISSIGNALING_NAN (d)))\n+\t  if (HONOR_SNANS (mode) && REAL_VALUE_ISSIGNALING_NAN (d))\n+\t    return NULL_RTX;\n+\t  /* All this does is change the mode, unless changing\n+\t     mode class.  */\n+\t  if (GET_MODE_CLASS (mode) != GET_MODE_CLASS (GET_MODE (op)))\n \t    real_convert (&d, mode, &d);\n \t  break;\n \tcase FIX:\n \t  /* Don't perform the operation if flag_signaling_nans is on\n \t     and the operand is a signaling NaN.  */\n-\t  if (!(HONOR_SNANS (mode) && REAL_VALUE_ISSIGNALING_NAN (d)))\n-\t    real_arithmetic (&d, FIX_TRUNC_EXPR, &d, NULL);\n+\t  if (HONOR_SNANS (mode) && REAL_VALUE_ISSIGNALING_NAN (d))\n+\t    return NULL_RTX;\n+\t  real_arithmetic (&d, FIX_TRUNC_EXPR, &d, NULL);\n \t  break;\n \tcase NOT:\n \t  {"}]}