{"sha": "4afd7f6cc6480b94d169a6f7ec8b8a4ba77900aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGFmZDdmNmNjNjQ4MGI5NGQxNjlhNmY3ZWM4YjhhNGJhNzc5MDBhYQ==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2004-07-26T19:24:55Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2004-07-26T19:24:55Z"}, "message": "g++spec.c (LIBSTDCXX_PROFILE): Default to LIBSTDCXX.\n\n\t* g++spec.c (LIBSTDCXX_PROFILE): Default to LIBSTDCXX.\n\t(lang_specific_driver): If the C++ or math library options don't\n\tstart with '-l', don't count them as added libraries.\n\nFrom-SVN: r85201", "tree": {"sha": "fc3d4528a3fabd42ccd7df7a292bffb8b965dfd1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc3d4528a3fabd42ccd7df7a292bffb8b965dfd1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4afd7f6cc6480b94d169a6f7ec8b8a4ba77900aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4afd7f6cc6480b94d169a6f7ec8b8a4ba77900aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4afd7f6cc6480b94d169a6f7ec8b8a4ba77900aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4afd7f6cc6480b94d169a6f7ec8b8a4ba77900aa/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "261139ce148f4599580f18e434fe4a7216fdde3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/261139ce148f4599580f18e434fe4a7216fdde3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/261139ce148f4599580f18e434fe4a7216fdde3e"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "329b12e5c7be1607e5e8f47cc02d20366b0e41e7", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4afd7f6cc6480b94d169a6f7ec8b8a4ba77900aa/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4afd7f6cc6480b94d169a6f7ec8b8a4ba77900aa/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=4afd7f6cc6480b94d169a6f7ec8b8a4ba77900aa", "patch": "@@ -1,3 +1,9 @@\n+2004-07-26  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* g++spec.c (LIBSTDCXX_PROFILE): Default to LIBSTDCXX.\n+\t(lang_specific_driver): If the C++ or math library options don't\n+\tstart with '-l', don't count them as added libraries.\n+\n 2004-07-26  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* decl.c (xref_basetypes): Adjust base access vector creation."}, {"sha": "286134b0e9724a6678c1e56c9f3193c10749f5eb", "filename": "gcc/cp/g++spec.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4afd7f6cc6480b94d169a6f7ec8b8a4ba77900aa/gcc%2Fcp%2Fg%2B%2Bspec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4afd7f6cc6480b94d169a6f7ec8b8a4ba77900aa/gcc%2Fcp%2Fg%2B%2Bspec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fg%2B%2Bspec.c?ref=4afd7f6cc6480b94d169a6f7ec8b8a4ba77900aa", "patch": "@@ -43,7 +43,7 @@ Boston, MA 02111-1307, USA.  */\n #define LIBSTDCXX \"-lstdc++\"\n #endif\n #ifndef LIBSTDCXX_PROFILE\n-#define LIBSTDCXX_PROFILE \"-lstdc++\"\n+#define LIBSTDCXX_PROFILE LIBSTDCXX\n #endif\n \n void\n@@ -297,15 +297,19 @@ lang_specific_driver (int *in_argc, const char *const **in_argv,\n   /* Add `-lstdc++' if we haven't already done so.  */\n   if (library > 0)\n     {\n-      arglist[j++] = saw_profile_flag ? LIBSTDCXX_PROFILE : LIBSTDCXX;\n-      added_libraries++;\n+      arglist[j] = saw_profile_flag ? LIBSTDCXX_PROFILE : LIBSTDCXX;\n+      if (arglist[j][0] != '-' || arglist[j][1] == 'l')\n+\tadded_libraries++;\n+      j++;\n     }\n   if (saw_math)\n     arglist[j++] = saw_math;\n   else if (library > 0 && need_math)\n     {\n-      arglist[j++] = saw_profile_flag ? MATH_LIBRARY_PROFILE : MATH_LIBRARY;\n-      added_libraries++;\n+      arglist[j] = saw_profile_flag ? MATH_LIBRARY_PROFILE : MATH_LIBRARY;\n+      if (arglist[j][0] != '-' || arglist[j][1] == 'l')\n+\tadded_libraries++;\n+      j++;\n     }\n   if (saw_libc)\n     arglist[j++] = saw_libc;"}]}