{"sha": "173cd57124237f03cadd0d26dafd1bf7bcc8229f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTczY2Q1NzEyNDIzN2YwM2NhZGQwZDI2ZGFmZDFiZjdiY2M4MjI5Zg==", "commit": {"author": {"name": "Josef Zlomek", "email": "zlomekj@suse.cz", "date": "2004-02-24T21:45:20Z"}, "committer": {"name": "Josef Zlomek", "email": "zlomek@gcc.gnu.org", "date": "2004-02-24T21:45:20Z"}, "message": "rtlanal.c (replace_label): Fix replacing labels in constant pool.\n\n\tPR/14240\n\t* rtlanal.c (replace_label): Fix replacing labels in constant pool.\n\nFrom-SVN: r78392", "tree": {"sha": "7ed30748887e4fadc3caa84aa43799433bee1ae3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7ed30748887e4fadc3caa84aa43799433bee1ae3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/173cd57124237f03cadd0d26dafd1bf7bcc8229f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/173cd57124237f03cadd0d26dafd1bf7bcc8229f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/173cd57124237f03cadd0d26dafd1bf7bcc8229f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/173cd57124237f03cadd0d26dafd1bf7bcc8229f/comments", "author": null, "committer": null, "parents": [{"sha": "b79cef06831df186cbc34802210ec3f8c71c65e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b79cef06831df186cbc34802210ec3f8c71c65e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b79cef06831df186cbc34802210ec3f8c71c65e8"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "0cdd56bed6bcb0febd3aaee673ec740af5161f4c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/173cd57124237f03cadd0d26dafd1bf7bcc8229f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/173cd57124237f03cadd0d26dafd1bf7bcc8229f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=173cd57124237f03cadd0d26dafd1bf7bcc8229f", "patch": "@@ -1,3 +1,8 @@\n+2004-02-24  Josef Zlomek  <zlomekj@suse.cz>\n+\n+\tPR/14240\n+\t* rtlanal.c (replace_label): Fix replacing labels in constant pool.\n+\n 2004-02-24  Geoffrey Keating  <geoffk@apple.com>\n \n \t* config/darwin.h (TARGET_HAS_F_SETLKW): Define."}, {"sha": "0ec52dad726c6a1aeed5b73dd49584beeb15aa29", "filename": "gcc/rtlanal.c", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/173cd57124237f03cadd0d26dafd1bf7bcc8229f/gcc%2Frtlanal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/173cd57124237f03cadd0d26dafd1bf7bcc8229f/gcc%2Frtlanal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtlanal.c?ref=173cd57124237f03cadd0d26dafd1bf7bcc8229f", "patch": "@@ -2715,20 +2715,17 @@ int\n replace_label (rtx *x, void *data)\n {\n   rtx l = *x;\n-  rtx tmp;\n   rtx old_label = ((replace_label_data *) data)->r1;\n   rtx new_label = ((replace_label_data *) data)->r2;\n   bool update_label_nuses = ((replace_label_data *) data)->update_label_nuses;\n \n   if (l == NULL_RTX)\n     return 0;\n \n-  if (GET_CODE (l) == MEM\n-      && (tmp = XEXP (l, 0)) != NULL_RTX\n-      && GET_CODE (tmp) == SYMBOL_REF\n-      && CONSTANT_POOL_ADDRESS_P (tmp))\n+  if (GET_CODE (l) == SYMBOL_REF\n+      && CONSTANT_POOL_ADDRESS_P (l))\n     {\n-      rtx c = get_pool_constant (tmp);\n+      rtx c = get_pool_constant (l);\n       if (rtx_referenced_p (old_label, c))\n \t{\n \t  rtx new_c, new_l;\n@@ -2744,7 +2741,7 @@ replace_label (rtx *x, void *data)\n \n \t  /* Add the new constant NEW_C to constant pool and replace\n \t     the old reference to constant by new reference.  */\n-\t  new_l = force_const_mem (get_pool_mode (tmp), new_c);\n+\t  new_l = XEXP (force_const_mem (get_pool_mode (l), new_c), 0);\n \t  *x = replace_rtx (l, l, new_l);\n \t}\n       return 0;"}]}