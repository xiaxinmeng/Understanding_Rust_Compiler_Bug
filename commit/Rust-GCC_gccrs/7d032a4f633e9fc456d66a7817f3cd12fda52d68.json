{"sha": "7d032a4f633e9fc456d66a7817f3cd12fda52d68", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2QwMzJhNGY2MzNlOWZjNDU2ZDY2YTc4MTdmM2NkMTJmZGE1MmQ2OA==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@TechFak.Uni-Bielefeld.DE", "date": "1999-05-07T11:09:31Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "1999-05-07T11:09:31Z"}, "message": "fix memory leak in run_compiles\n\nFrom-SVN: r26822", "tree": {"sha": "82faa2640a545bb5015b16e379b4f2f7dba0752b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82faa2640a545bb5015b16e379b4f2f7dba0752b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d032a4f633e9fc456d66a7817f3cd12fda52d68", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d032a4f633e9fc456d66a7817f3cd12fda52d68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d032a4f633e9fc456d66a7817f3cd12fda52d68", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d032a4f633e9fc456d66a7817f3cd12fda52d68/comments", "author": null, "committer": null, "parents": [{"sha": "f2fee5bef0b07099eac93e56e834b79c967ba2e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2fee5bef0b07099eac93e56e834b79c967ba2e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2fee5bef0b07099eac93e56e834b79c967ba2e9"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "27aa655566990ad1c75126901261bf636e8018c1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d032a4f633e9fc456d66a7817f3cd12fda52d68/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d032a4f633e9fc456d66a7817f3cd12fda52d68/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7d032a4f633e9fc456d66a7817f3cd12fda52d68", "patch": "@@ -16,6 +16,7 @@ Fri May  7 14:19:31 1999  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n \t(sig_handler): Add debug code.\n \t* fixinc/server.c (run_shell): Don't \\-escape cd, it breaks the\n \tUltrix V4.3 /bin/sh.\n+\t* fixinc/fixincl.c (run_compiles): fix memory leak\n \n Thu May  6 20:34:00 1999  Mark Mitchell  <mark@codesourcery.com>\n "}, {"sha": "0b1fcb2b37933e4d3e30a53e06f9676208e8145d", "filename": "gcc/fixinc/fixincl.c", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d032a4f633e9fc456d66a7817f3cd12fda52d68/gcc%2Ffixinc%2Ffixincl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d032a4f633e9fc456d66a7817f3cd12fda52d68/gcc%2Ffixinc%2Ffixincl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixincl.c?ref=7d032a4f633e9fc456d66a7817f3cd12fda52d68", "patch": "@@ -634,12 +634,17 @@ run_compiles ()\n           /*  Run the script.\n               The result will start either with 's' or 'r'.  */\n \n-          pz = run_shell (file_name_buf);\n-          if (*pz == 's')\n-            {\n-              p_fixd->fd_flags |= FD_SKIP_TEST;\n-              continue;\n-            }\n+          {\n+            int skip;\n+            pz = run_shell (file_name_buf);\n+            skip = (*pz == 's');\n+            free ( (void*)pz );\n+            if (skip)\n+              {\n+                p_fixd->fd_flags |= FD_SKIP_TEST;\n+                continue;\n+              }\n+           }\n         }\n \n       /* FOR every test for the fixup, ...  */"}]}