{"sha": "225f9c8805fb1ba68a877383095f38a9563526ee", "node_id": "C_kwDOANBUbNoAKDIyNWY5Yzg4MDVmYjFiYTY4YTg3NzM4MzA5NWYzOGE5NTYzNTI2ZWU", "commit": {"author": {"name": "Kewen Lin", "email": "linkw@linux.ibm.com", "date": "2022-10-28T03:30:16Z"}, "committer": {"name": "Kewen Lin", "email": "linkw@linux.ibm.com", "date": "2022-10-28T03:30:16Z"}, "message": "testsuite: Adjust vect-bitfield-read-* with vect_shift and vect_long_long [PR107240]\n\nThe test cases vect-bitfield-read-* requires vector shift\ntarget support, they need one explicit vect_shift effective\ntarget requirement checking.  Besides, the vectype for struct\nin test cases vect-bitfield-read-{2,4} is vector of long long,\nwe need to check effective target vect_long_long for them.\nThis patch can help to fix all remaining vect-bitfield-{read,\nwrite}-* test failures on powerpc.\n\n\tPR testsuite/107240\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.dg/vect/vect-bitfield-read-1.c: Add effective target checking\n\tvect_shift.\n\t* gcc.dg/vect/vect-bitfield-read-3.c: Likewise.\n\t* gcc.dg/vect/vect-bitfield-read-5.c: Likewise.\n\t* gcc.dg/vect/vect-bitfield-read-6.c: Likewise.\n\t* gcc.dg/vect/vect-bitfield-read-7.c: Likewise.\n\t* gcc.dg/vect/vect-bitfield-read-2.c: Add effective target checking\n\tvect_shift and replace vect_int with vect_long_long.\n\t* gcc.dg/vect/vect-bitfield-read-4.c: Likewise.", "tree": {"sha": "e732c0aa49ab41d4755a81f7fa1339f4d4adf4ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e732c0aa49ab41d4755a81f7fa1339f4d4adf4ef"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/225f9c8805fb1ba68a877383095f38a9563526ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/225f9c8805fb1ba68a877383095f38a9563526ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/225f9c8805fb1ba68a877383095f38a9563526ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/225f9c8805fb1ba68a877383095f38a9563526ee/comments", "author": {"login": "jedilyn", "id": 38515402, "node_id": "MDQ6VXNlcjM4NTE1NDAy", "avatar_url": "https://avatars.githubusercontent.com/u/38515402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedilyn", "html_url": "https://github.com/jedilyn", "followers_url": "https://api.github.com/users/jedilyn/followers", "following_url": "https://api.github.com/users/jedilyn/following{/other_user}", "gists_url": "https://api.github.com/users/jedilyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedilyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedilyn/subscriptions", "organizations_url": "https://api.github.com/users/jedilyn/orgs", "repos_url": "https://api.github.com/users/jedilyn/repos", "events_url": "https://api.github.com/users/jedilyn/events{/privacy}", "received_events_url": "https://api.github.com/users/jedilyn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jedilyn", "id": 38515402, "node_id": "MDQ6VXNlcjM4NTE1NDAy", "avatar_url": "https://avatars.githubusercontent.com/u/38515402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedilyn", "html_url": "https://github.com/jedilyn", "followers_url": "https://api.github.com/users/jedilyn/followers", "following_url": "https://api.github.com/users/jedilyn/following{/other_user}", "gists_url": "https://api.github.com/users/jedilyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedilyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedilyn/subscriptions", "organizations_url": "https://api.github.com/users/jedilyn/orgs", "repos_url": "https://api.github.com/users/jedilyn/repos", "events_url": "https://api.github.com/users/jedilyn/events{/privacy}", "received_events_url": "https://api.github.com/users/jedilyn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e0997c14af5e8bc4d26e28549cbce99364a1601f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0997c14af5e8bc4d26e28549cbce99364a1601f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0997c14af5e8bc4d26e28549cbce99364a1601f"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "42e50d9f0c8c8ba0debd7281a0d5102444ebd0b9", "filename": "gcc/testsuite/gcc.dg/vect/vect-bitfield-read-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-1.c?ref=225f9c8805fb1ba68a877383095f38a9563526ee", "patch": "@@ -1,4 +1,5 @@\n /* { dg-require-effective-target vect_int } */\n+/* { dg-require-effective-target vect_shift } */\n \n #include <stdarg.h>\n #include \"tree-vect.h\""}, {"sha": "a9aeefcd72c0f8d1bdaae48c78acd8dafd9f319f", "filename": "gcc/testsuite/gcc.dg/vect/vect-bitfield-read-2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-2.c?ref=225f9c8805fb1ba68a877383095f38a9563526ee", "patch": "@@ -1,4 +1,5 @@\n-/* { dg-require-effective-target vect_int } */\n+/* { dg-require-effective-target vect_shift } */\n+/* { dg-require-effective-target vect_long_long } */\n \n #include <stdarg.h>\n #include \"tree-vect.h\""}, {"sha": "c7d0fd26bad5a561139e5f963b21faca0c34e06c", "filename": "gcc/testsuite/gcc.dg/vect/vect-bitfield-read-3.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-3.c?ref=225f9c8805fb1ba68a877383095f38a9563526ee", "patch": "@@ -1,4 +1,5 @@\n /* { dg-require-effective-target vect_int } */\n+/* { dg-require-effective-target vect_shift } */\n \n #include <stdarg.h>\n #include \"tree-vect.h\""}, {"sha": "6a3ed8c0c6fa9633e06a0986ac2b6dc95a71a36e", "filename": "gcc/testsuite/gcc.dg/vect/vect-bitfield-read-4.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-4.c?ref=225f9c8805fb1ba68a877383095f38a9563526ee", "patch": "@@ -1,4 +1,5 @@\n-/* { dg-require-effective-target vect_int } */\n+/* { dg-require-effective-target vect_shift } */\n+/* { dg-require-effective-target vect_long_long } */\n \n #include <stdarg.h>\n #include \"tree-vect.h\""}, {"sha": "b2889df8a0a68809b6b049fc40740bead3c33c05", "filename": "gcc/testsuite/gcc.dg/vect/vect-bitfield-read-5.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-5.c?ref=225f9c8805fb1ba68a877383095f38a9563526ee", "patch": "@@ -1,4 +1,5 @@\n /* { dg-require-effective-target vect_int } */\n+/* { dg-require-effective-target vect_shift } */\n \n #include <stdarg.h>\n #include \"tree-vect.h\""}, {"sha": "2445f531be2591874b9803f24004d1f335d90dc4", "filename": "gcc/testsuite/gcc.dg/vect/vect-bitfield-read-6.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-6.c?ref=225f9c8805fb1ba68a877383095f38a9563526ee", "patch": "@@ -1,4 +1,5 @@\n /* { dg-require-effective-target vect_int } */\n+/* { dg-require-effective-target vect_shift } */\n \n #include <stdarg.h>\n #include \"tree-vect.h\""}, {"sha": "4b1ec8a6dab7922dda9dd0b3e41a6904e5f11759", "filename": "gcc/testsuite/gcc.dg/vect/vect-bitfield-read-7.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/225f9c8805fb1ba68a877383095f38a9563526ee/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-bitfield-read-7.c?ref=225f9c8805fb1ba68a877383095f38a9563526ee", "patch": "@@ -1,4 +1,5 @@\n /* { dg-require-effective-target vect_int } */\n+/* { dg-require-effective-target vect_shift } */\n \n #include <stdarg.h>\n #include \"tree-vect.h\""}]}