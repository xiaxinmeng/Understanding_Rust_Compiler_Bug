{"sha": "b123101753e46abe3f00b79acdda85d89c59e40a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjEyMzEwMTc1M2U0NmFiZTNmMDBiNzlhY2RkYTg1ZDg5YzU5ZTQwYQ==", "commit": {"author": {"name": "Olga Rodimina", "email": "rodimina@redhat.com", "date": "2004-01-15T22:00:01Z"}, "committer": {"name": "Olga Rodimina", "email": "rodimina@gcc.gnu.org", "date": "2004-01-15T22:00:01Z"}, "message": "GdkGraphics2D.java: Implemented rendering hints related methods.\n\n\n\t* gnu/java/awt/peer/gtk/GdkGraphics2D.java:\n\tImplemented rendering hints related methods.\n\t(getDefaultHints): New helper method. Returns\n\tdefault rendering hints.\n\t(walkPath): changed to normalize path if\n\tthe KEY_STROKE_CONTROL key is in \"normalize\" mode.\n\t(draw3DRect): changed coordinates of rectangle by +0.5\n\tif in \"normalize\" mode.\n\nFrom-SVN: r75943", "tree": {"sha": "04fa9293eb9db598a3269d891542aa1b07c18d6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/04fa9293eb9db598a3269d891542aa1b07c18d6b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b123101753e46abe3f00b79acdda85d89c59e40a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b123101753e46abe3f00b79acdda85d89c59e40a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b123101753e46abe3f00b79acdda85d89c59e40a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b123101753e46abe3f00b79acdda85d89c59e40a/comments", "author": null, "committer": null, "parents": [{"sha": "340f64941090aa6ed74fe8a44be62c05cc7aa29e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/340f64941090aa6ed74fe8a44be62c05cc7aa29e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/340f64941090aa6ed74fe8a44be62c05cc7aa29e"}], "stats": {"total": 76, "additions": 71, "deletions": 5}, "files": [{"sha": "edae83ee673a7303f132f3268948595f4c7e8092", "filename": "libjava/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b123101753e46abe3f00b79acdda85d89c59e40a/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b123101753e46abe3f00b79acdda85d89c59e40a/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=b123101753e46abe3f00b79acdda85d89c59e40a", "patch": "@@ -1,3 +1,14 @@\n+2004-01-15  Olga Rodimina <rodimina@redhat.com>\n+\n+\t* gnu/java/awt/peer/gtk/GdkGraphics2D.java:\n+\tImplemented rendering hints related methods.\n+\t(getDefaultHints): New helper method. Returns\n+\tdefault rendering hints.\n+\t(walkPath): changed to normalize path if\n+\tthe KEY_STROKE_CONTROL key is in \"normalize\" mode.\n+\t(draw3DRect): changed coordinates of rectangle by +0.5\n+\tif in \"normalize\" mode.\n+\n 2004-01-15  Tom Tromey  <tromey@redhat.com>\n \n \t* Makefile.in: Rebuilt."}, {"sha": "fbdf4d9bcd11da5ef22f5ebf6fc7b16cdb2e6908", "filename": "libjava/gnu/java/awt/peer/gtk/GdkGraphics2D.java", "status": "modified", "additions": 60, "deletions": 5, "changes": 65, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b123101753e46abe3f00b79acdda85d89c59e40a/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGdkGraphics2D.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b123101753e46abe3f00b79acdda85d89c59e40a/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGdkGraphics2D.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGdkGraphics2D.java?ref=b123101753e46abe3f00b79acdda85d89c59e40a", "patch": "@@ -44,6 +44,8 @@\n import java.awt.color.*;\n import java.awt.image.*;\n import java.awt.image.renderable.*;\n+import java.util.HashMap;\n+import java.util.Map;\n \n import java.text.AttributedCharacterIterator;\n import java.util.Map;\n@@ -81,6 +83,7 @@ public class GdkGraphics2D extends Graphics2D\n   private AffineTransform transform;\n   private GtkComponentPeer component;\n   private Font font;  \n+  private RenderingHints hints;\n \n   private Stack stateStack;\n   \n@@ -108,6 +111,7 @@ public Graphics create (int x, int y, int width, int height)\n   {\n     paint = g.paint;\n     stroke = g.stroke;\n+    hints = g.hints;\n \n     if (g.fg.getAlpha() != -1)\n       fg = new Color (g.fg.getRed (), g.fg.getGreen (), \n@@ -154,6 +158,7 @@ public Graphics create (int x, int y, int width, int height)\n     setFont (new Font(\"SansSerif\", Font.PLAIN, 12));\n     setTransform (new AffineTransform ());\n     setStroke (new BasicStroke ());\n+    setRenderingHints (new HashMap ());\n \n     stateStack = new Stack();\n   }\n@@ -169,6 +174,7 @@ public Graphics create (int x, int y, int width, int height)\n     setFont (new Font(\"SansSerif\", Font.PLAIN, 12));\n     setTransform (new AffineTransform ());\n     setStroke (new BasicStroke ());\n+    setRenderingHints (new HashMap ());\n \n     stateStack = new Stack ();\n   }\n@@ -335,6 +341,29 @@ private void walkPath(PathIterator p)\n   }\n \n \n+  private Map getDefaultHints()\n+  {\n+    HashMap defaultHints = new HashMap ();\n+    \n+    defaultHints.put (RenderingHints.KEY_TEXT_ANTIALIASING, \n+                      RenderingHints.VALUE_TEXT_ANTIALIAS_DEFAULT);\n+\t\t      \n+    defaultHints.put (RenderingHints.KEY_STROKE_CONTROL, \n+                      RenderingHints.VALUE_STROKE_DEFAULT);    \n+\t\t      \n+    defaultHints.put (RenderingHints.KEY_FRACTIONALMETRICS, \n+                      RenderingHints.VALUE_FRACTIONALMETRICS_OFF);    \n+\t\t      \n+    defaultHints.put (RenderingHints.KEY_ANTIALIASING, \n+                      RenderingHints.VALUE_ANTIALIAS_OFF);    \n+\t\t      \n+    defaultHints.put (RenderingHints.KEY_RENDERING,  \n+                      RenderingHints.VALUE_RENDER_DEFAULT);\n+    \n+    return defaultHints;\n+    \n+  }\n+\n   //////////////////////////////////////////////////\n   ////// Implementation of Graphics2D Methods //////\n   //////////////////////////////////////////////////\n@@ -351,6 +380,14 @@ public void draw (Shape s)\n \n     stateSave ();\n     cairoNewPath ();\n+\n+    boolean normalize;\n+    normalize = hints.containsValue (RenderingHints.VALUE_STROKE_NORMALIZE)\n+                || hints.containsValue (RenderingHints.VALUE_STROKE_DEFAULT);\n+\n+    if (normalize)\n+      translate (0.5,0.5);      \n+    \n     if (s instanceof Rectangle2D)\n       {\n         Rectangle2D r = (Rectangle2D)s;\n@@ -359,6 +396,10 @@ public void draw (Shape s)\n     else      \n       walkPath (s.getPathIterator (null));\n     cairoStroke ();\n+    \n+    if (normalize)\n+      translate (-0.5,-0.5);\n+      \n     stateRestore ();\n   }\n \n@@ -640,6 +681,19 @@ public void draw3DRect(int x, int y, int width,\n     stateSave ();\n     \n     cairoNewPath ();\n+    \n+    boolean normalize;\n+    normalize = hints.containsValue (RenderingHints.VALUE_STROKE_NORMALIZE)\n+                || hints.containsValue (RenderingHints.VALUE_STROKE_DEFAULT);\n+\t\t\n+    if (normalize) \n+      {\n+    \tx1 += 0.5;\n+\ty1 += 0.5; \n+\tx2 += 0.5;\n+\ty2 += 0.5; \n+      }\n+    \n     setColor (light);\n     cairoMoveTo (x1, y1);\n     cairoLineTo (x2, y1);\n@@ -1006,27 +1060,28 @@ public void setComposite(Composite comp)\n   public void setRenderingHint(RenderingHints.Key hintKey,\n                                Object hintValue)\n   {\n-    throw new java.lang.UnsupportedOperationException ();\n+    hints.put (hintKey, hintValue);    \n   }\n \n   public Object getRenderingHint(RenderingHints.Key hintKey)\n   {\n-    throw new java.lang.UnsupportedOperationException ();\n+    return hints.get (hintKey);\n   }\n   \n   public void setRenderingHints(Map hints)\n   {\n-    throw new java.lang.UnsupportedOperationException ();\n+    this.hints = new RenderingHints (getDefaultHints ());\n+    this.hints.add (new RenderingHints (hints));\n   }\n \n   public void addRenderingHints(Map hints)\n   {\n-    throw new java.lang.UnsupportedOperationException ();\n+    this.hints.add (new RenderingHints (hints));\n   }\n \n   public RenderingHints getRenderingHints()\n   {\n-    throw new java.lang.UnsupportedOperationException ();\n+    return hints;\n   }\n \n   public Composite getComposite()"}]}