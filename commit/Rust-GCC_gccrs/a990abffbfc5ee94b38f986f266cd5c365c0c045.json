{"sha": "a990abffbfc5ee94b38f986f266cd5c365c0c045", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTk5MGFiZmZiZmM1ZWU5NGIzOGY5ODZmMjY2Y2Q1YzM2NWMwYzA0NQ==", "commit": {"author": {"name": "Adam Nemet", "email": "anemet@caviumnetworks.com", "date": "2008-11-18T02:08:24Z"}, "committer": {"name": "Adam Nemet", "email": "nemet@gcc.gnu.org", "date": "2008-11-18T02:08:24Z"}, "message": "expmed.c (extract_bit_field_1): Also use a temporary and convert_extracted_bit_field when...\n\n\t* expmed.c (extract_bit_field_1): Also use a temporary and\n\tconvert_extracted_bit_field when the conversion from ext_mode to\n\tthe target mode requires explicit truncation.\n\ntestsuite/\n\t* gcc.c-torture/execute/20081117-1.c: New test.\n\nFrom-SVN: r141960", "tree": {"sha": "5a743df1e9e72a72b5cbac89bebae2c44dd3bd74", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a743df1e9e72a72b5cbac89bebae2c44dd3bd74"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a990abffbfc5ee94b38f986f266cd5c365c0c045", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a990abffbfc5ee94b38f986f266cd5c365c0c045", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a990abffbfc5ee94b38f986f266cd5c365c0c045", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a990abffbfc5ee94b38f986f266cd5c365c0c045/comments", "author": null, "committer": null, "parents": [{"sha": "da8f5862ce62b97b095d833ea31a82f3848f79fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da8f5862ce62b97b095d833ea31a82f3848f79fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da8f5862ce62b97b095d833ea31a82f3848f79fa"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "da96cb50c607b18fa558b8368888f7ccb1efd573", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a990abffbfc5ee94b38f986f266cd5c365c0c045/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a990abffbfc5ee94b38f986f266cd5c365c0c045/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a990abffbfc5ee94b38f986f266cd5c365c0c045", "patch": "@@ -1,3 +1,9 @@\n+2008-11-17  Adam Nemet  <anemet@caviumnetworks.com>\n+\n+\t* expmed.c (extract_bit_field_1): Also use a temporary and\n+\tconvert_extracted_bit_field when the conversion from ext_mode to\n+\tthe target mode requires explicit truncation.\n+\n 2008-11-17  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* config/mips/mips.h (REG_ALLOC_ORDER): Put accumulators first."}, {"sha": "70a0d18bcb52afb7a1408532cea52bca2a7cf762", "filename": "gcc/expmed.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a990abffbfc5ee94b38f986f266cd5c365c0c045/gcc%2Fexpmed.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a990abffbfc5ee94b38f986f266cd5c365c0c045/gcc%2Fexpmed.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpmed.c?ref=a990abffbfc5ee94b38f986f266cd5c365c0c045", "patch": "@@ -1533,7 +1533,13 @@ extract_bit_field_1 (rtx str_rtx, unsigned HOST_WIDE_INT bitsize,\n \n       if (GET_MODE (xtarget) != ext_mode)\n \t{\n-\t  if (REG_P (xtarget))\n+\t  /* Don't use LHS paradoxical subreg if explicit truncation is needed\n+\t     between the mode of the extraction (word_mode) and the target\n+\t     mode.  Instead, create a temporary and use convert_move to set\n+\t     the target.  */\n+\t  if (REG_P (xtarget)\n+\t      && TRULY_NOOP_TRUNCATION (GET_MODE_BITSIZE (GET_MODE (xtarget)),\n+\t\t\t\t\tGET_MODE_BITSIZE (ext_mode)))\n \t    {\n \t      xtarget = gen_lowpart (ext_mode, xtarget);\n \t      if (GET_MODE_SIZE (ext_mode)"}, {"sha": "0af6cad0a3d0776efbe07c698a644f48bfba3661", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a990abffbfc5ee94b38f986f266cd5c365c0c045/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a990abffbfc5ee94b38f986f266cd5c365c0c045/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a990abffbfc5ee94b38f986f266cd5c365c0c045", "patch": "@@ -1,3 +1,7 @@\n+2008-11-17  Adam Nemet  <anemet@caviumnetworks.com>\n+\n+\t* gcc.c-torture/execute/20081117-1.c: New test.\n+\n 2008-11-17  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* gcc.target/mips/dspr2-MULT.c: Just check for $ac1 and $ac2."}, {"sha": "bff7464cbaea911ef36f127055b46961c44913a0", "filename": "gcc/testsuite/gcc.c-torture/execute/20081117-1.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a990abffbfc5ee94b38f986f266cd5c365c0c045/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20081117-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a990abffbfc5ee94b38f986f266cd5c365c0c045/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20081117-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20081117-1.c?ref=a990abffbfc5ee94b38f986f266cd5c365c0c045", "patch": "@@ -0,0 +1,24 @@\n+extern void abort (void);\n+\n+struct s\n+{\n+  unsigned long long a:16;\n+  unsigned long long b:32;\n+  unsigned long long c:16;\n+};\n+\n+__attribute__ ((noinline)) unsigned\n+f (struct s s, unsigned i)\n+{\n+  return s.b == i;\n+}\n+\n+struct s s = { 1, 0x87654321u, 2};\n+\n+int\n+main ()\n+{\n+  if (!f (s, 0x87654321u))\n+    abort ();\n+  return 0;\n+}"}]}