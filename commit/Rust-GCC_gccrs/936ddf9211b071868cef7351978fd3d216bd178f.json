{"sha": "936ddf9211b071868cef7351978fd3d216bd178f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTM2ZGRmOTIxMWIwNzE4NjhjZWY3MzUxOTc4ZmQzZDIxNmJkMTc4Zg==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2014-07-31T10:11:44Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2014-07-31T10:11:44Z"}, "message": "lto-streamer.h (struct output_block): Remove global.\n\n2014-07-31  Richard Biener  <rguenther@suse.de>\n\n\t* lto-streamer.h (struct output_block): Remove global.\n\t(struct data_in): Remove labels, num_named_labels and\n\tnum_unnamed_labels.\n\t* lto-streamer-in.c (lto_data_in_delete): Do not free labels.\n\t* lto-streamer-out.c (produce_asm_for_decls): Do not set global.\n\nFrom-SVN: r213340", "tree": {"sha": "889edf57fbec3f64a09d140098f9ff5114ffc90f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/889edf57fbec3f64a09d140098f9ff5114ffc90f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/936ddf9211b071868cef7351978fd3d216bd178f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/936ddf9211b071868cef7351978fd3d216bd178f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/936ddf9211b071868cef7351978fd3d216bd178f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/936ddf9211b071868cef7351978fd3d216bd178f/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9d827cd5792155202a12d13b04c36abc1b29189d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d827cd5792155202a12d13b04c36abc1b29189d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d827cd5792155202a12d13b04c36abc1b29189d"}], "stats": {"total": 23, "additions": 8, "deletions": 15}, "files": [{"sha": "5b24fcd823de4f37a7a4f972513729f321851b08", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/936ddf9211b071868cef7351978fd3d216bd178f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/936ddf9211b071868cef7351978fd3d216bd178f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=936ddf9211b071868cef7351978fd3d216bd178f", "patch": "@@ -1,3 +1,11 @@\n+2014-07-31  Richard Biener  <rguenther@suse.de>\n+\n+\t* lto-streamer.h (struct output_block): Remove global.\n+\t(struct data_in): Remove labels, num_named_labels and\n+\tnum_unnamed_labels.\n+\t* lto-streamer-in.c (lto_data_in_delete): Do not free labels.\n+\t* lto-streamer-out.c (produce_asm_for_decls): Do not set global.\n+\n 2014-07-31  Marc Glisse  <marc.glisse@inria.fr>\n \n \tPR c++/60517"}, {"sha": "698f92620dbf1d3493d60587f533c50f715b2a8d", "filename": "gcc/lto-streamer-in.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/936ddf9211b071868cef7351978fd3d216bd178f/gcc%2Flto-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/936ddf9211b071868cef7351978fd3d216bd178f/gcc%2Flto-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-in.c?ref=936ddf9211b071868cef7351978fd3d216bd178f", "patch": "@@ -1427,6 +1427,5 @@ lto_data_in_delete (struct data_in *data_in)\n {\n   data_in->globals_resolution.release ();\n   streamer_tree_cache_delete (data_in->reader_cache);\n-  free (data_in->labels);\n   free (data_in);\n }"}, {"sha": "2a32958a0237ccfa873cc5f68b0a74d10c1a2d0d", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/936ddf9211b071868cef7351978fd3d216bd178f/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/936ddf9211b071868cef7351978fd3d216bd178f/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=936ddf9211b071868cef7351978fd3d216bd178f", "patch": "@@ -2632,7 +2632,6 @@ produce_asm_for_decls (void)\n   int32_t num_decl_states;\n \n   ob = create_output_block (LTO_section_decls);\n-  ob->global = true;\n \n   memset (&header, 0, sizeof (struct lto_decl_header));\n "}, {"sha": "eef86a88aa33701b59f929973f3e0f5052c940a5", "filename": "gcc/lto-streamer.h", "status": "modified", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/936ddf9211b071868cef7351978fd3d216bd178f/gcc%2Flto-streamer.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/936ddf9211b071868cef7351978fd3d216bd178f/gcc%2Flto-streamer.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer.h?ref=936ddf9211b071868cef7351978fd3d216bd178f", "patch": "@@ -696,9 +696,6 @@ struct output_block\n   int current_line;\n   int current_col;\n \n-  /* True if writing globals and types.  */\n-  bool global;\n-\n   /* Cache of nodes written in this section.  */\n   struct streamer_tree_cache_d *writer_cache;\n \n@@ -714,22 +711,12 @@ struct data_in\n   /* The global decls and types.  */\n   struct lto_file_decl_data *file_data;\n \n-  /* All of the labels.  */\n-  tree *labels;\n-\n   /* The string table.  */\n   const char *strings;\n \n   /* The length of the string table.  */\n   unsigned int strings_len;\n \n-  /* Number of named labels.  Used to find the index of unnamed labels\n-     since they share space with the named labels.  */\n-  unsigned int num_named_labels;\n-\n-  /* Number of unnamed labels.  */\n-  unsigned int num_unnamed_labels;\n-\n   /* Maps each reference number to the resolution done by the linker. */\n   vec<ld_plugin_symbol_resolution_t> globals_resolution;\n "}]}