{"sha": "2a2592a10c13c53fc1fbac0bfe9e661201dab53f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmEyNTkyYTEwYzEzYzUzZmMxZmJhYzBiZmU5ZTY2MTIwMWRhYjUzZg==", "commit": {"author": {"name": "William Schmidt", "email": "wschmidt@gcc.gnu.org", "date": "2019-10-01T14:27:44Z"}, "committer": {"name": "William Schmidt", "email": "wschmidt@gcc.gnu.org", "date": "2019-10-01T14:27:44Z"}, "message": "rs6000-p8swap.c (rtx_is_swappable_p): Don't swap vpmsumd.\n\n[gcc]\n\n2019-10-01  Bill Schmidt  <wschmidt@linux.ibm.com>\n\n\t* config/rs6000/rs6000-p8swap.c (rtx_is_swappable_p): Don't swap\n\tvpmsumd.\n\n[gcc/testsuite]\n\n2019-10-01  Bill Schmidt  <wschmdit@linux.ibm.com>\n\n\t* gcc.target/powerpc/pr91275.c: New.\n\nFrom-SVN: r276410", "tree": {"sha": "8ee246f7c9beeccd64f43fc54ffed031269263ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ee246f7c9beeccd64f43fc54ffed031269263ce"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2a2592a10c13c53fc1fbac0bfe9e661201dab53f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a2592a10c13c53fc1fbac0bfe9e661201dab53f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a2592a10c13c53fc1fbac0bfe9e661201dab53f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a2592a10c13c53fc1fbac0bfe9e661201dab53f/comments", "author": null, "committer": null, "parents": [{"sha": "a1bfb5b16b4b55ae875d346a7b462a18316ad959", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1bfb5b16b4b55ae875d346a7b462a18316ad959", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1bfb5b16b4b55ae875d346a7b462a18316ad959"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "b671ae61e4677c0508aca5f871351ea970a78e8f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a2592a10c13c53fc1fbac0bfe9e661201dab53f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a2592a10c13c53fc1fbac0bfe9e661201dab53f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2a2592a10c13c53fc1fbac0bfe9e661201dab53f", "patch": "@@ -1,3 +1,8 @@\n+2019-10-01  Bill Schmidt  <wschmidt@linux.ibm.com>\n+\n+\t* config/rs6000/rs6000-p8swap.c (rtx_is_swappable_p): Don't swap\n+\tvpmsumd.\n+\n 2019-10-01  Ilya Leoshkevich  <iii@linux.ibm.com>\n \n \tPR target/77918"}, {"sha": "d30e5dec980fb888b993c7c01cdf6e79bcf767a2", "filename": "gcc/config/rs6000/rs6000-p8swap.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a2592a10c13c53fc1fbac0bfe9e661201dab53f/gcc%2Fconfig%2Frs6000%2Frs6000-p8swap.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a2592a10c13c53fc1fbac0bfe9e661201dab53f/gcc%2Fconfig%2Frs6000%2Frs6000-p8swap.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-p8swap.c?ref=2a2592a10c13c53fc1fbac0bfe9e661201dab53f", "patch": "@@ -791,6 +791,11 @@ rtx_is_swappable_p (rtx op, unsigned int *special)\n \t  case UNSPEC_REDUC_PLUS:\n \t  case UNSPEC_REDUC:\n \t    return 1;\n+\t  case UNSPEC_VPMSUM:\n+\t    /* vpmsumd is not swappable, but vpmsum[bhw] are.  */\n+\t    if (GET_MODE (op) == V2DImode)\n+\t      return 0;\n+\t    break;\n \t  }\n       }\n "}, {"sha": "995e1cb59f58b2f5e81ca0d047269d4bfb568d70", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a2592a10c13c53fc1fbac0bfe9e661201dab53f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a2592a10c13c53fc1fbac0bfe9e661201dab53f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2a2592a10c13c53fc1fbac0bfe9e661201dab53f", "patch": "@@ -1,3 +1,7 @@\n+2019-10-01  Bill Schmidt  <wschmdit@linux.ibm.com>\n+\n+\t* gcc.target/powerpc/pr91275.c: New.\n+\n 2019-10-01  Alexandre Oliva <oliva@adacore.com>\n \n \t* gcc.dg/torture/pr41094.c: Introduce intermediate variable."}, {"sha": "b23d75be29b450d9675ada0eb0d12e2968f0931c", "filename": "gcc/testsuite/gcc.target/powerpc/pr91275.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a2592a10c13c53fc1fbac0bfe9e661201dab53f/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr91275.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a2592a10c13c53fc1fbac0bfe9e661201dab53f/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr91275.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr91275.c?ref=2a2592a10c13c53fc1fbac0bfe9e661201dab53f", "patch": "@@ -0,0 +1,21 @@\n+/* Test that we generate vpmsumd correctly without a swap error.  */\n+\n+/* { dg-do run { target { p8vector_hw } } } */\n+/* { dg-options \"-O2 -std=gnu11\" } */\n+\n+#include <altivec.h>\n+\n+int main() {\n+\n+  const unsigned long long r0l = 0x8e7dfceac070e3a0;\n+  vector unsigned long long r0 = (vector unsigned long long) {r0l, 0}, v;\n+  const vector unsigned long long pd\n+    = (vector unsigned long) {0xc2LLU << 56, 0};\n+\n+  v = __builtin_crypto_vpmsumd ((vector unsigned long long) {r0[0], 0}, pd);\n+\n+  if (v[0] != 0x4000000000000000 || v[1] != 0x65bd7ab605a4a8ff)\n+    __builtin_abort ();\n+\n+  return 0;\n+}"}]}