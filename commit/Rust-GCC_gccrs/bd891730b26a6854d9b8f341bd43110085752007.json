{"sha": "bd891730b26a6854d9b8f341bd43110085752007", "node_id": "C_kwDOANBUbNoAKGJkODkxNzMwYjI2YTY4NTRkOWI4ZjM0MWJkNDMxMTAwODU3NTIwMDc", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-10-27T08:40:58Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-10-28T07:16:24Z"}, "message": "lto-dump: modernize a bit\n\ngcc/lto/ChangeLog:\n\n\t* lto-dump.cc (dump_list): Remove trailing return.\n\t(dump_symbol): Likewise.\n\t(dump_body): Filter name based on mangled name.\n\t(dump_tool_help): Use GIMPLE wording.\n\t(lto_main): Update wording.", "tree": {"sha": "d382387d7ea36645bec875dd5d732a4ac52ea42c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d382387d7ea36645bec875dd5d732a4ac52ea42c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd891730b26a6854d9b8f341bd43110085752007", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd891730b26a6854d9b8f341bd43110085752007", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd891730b26a6854d9b8f341bd43110085752007", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd891730b26a6854d9b8f341bd43110085752007/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0c112651f665be9948086f25f99d4e88c94716bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c112651f665be9948086f25f99d4e88c94716bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c112651f665be9948086f25f99d4e88c94716bd"}], "stats": {"total": 19, "additions": 7, "deletions": 12}, "files": [{"sha": "5c4dbf5d2977514ba20a928b3ec1ac0064c2f20b", "filename": "gcc/lto/lto-dump.cc", "status": "modified", "additions": 7, "deletions": 12, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd891730b26a6854d9b8f341bd43110085752007/gcc%2Flto%2Flto-dump.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd891730b26a6854d9b8f341bd43110085752007/gcc%2Flto%2Flto-dump.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto-dump.cc?ref=bd891730b26a6854d9b8f341bd43110085752007", "patch": "@@ -227,7 +227,6 @@ void dump_list (void)\n {\n   dump_list_functions ();\n   dump_list_variables ();\n-  return;\n }\n \n /* Dump specific variables and functions used in IL.  */\n@@ -243,7 +242,6 @@ void dump_symbol ()\n \t  printf (\"\\n\");\n \t}\n     }\n-  return;\n }\n \n /* Dump specific gimple body of specified function.  */\n@@ -259,19 +257,17 @@ void dump_body ()\n     return;\n   }\n   cgraph_node *cnode;\n-  FOR_EACH_FUNCTION (cnode)\n-    if (cnode->definition\n-\t&& !cnode->alias\n-\t&& !strcmp (cnode->name (), flag_dump_body))\n+  FOR_EACH_DEFINED_FUNCTION (cnode)\n+    if (!cnode->alias\n+\t&& !strcmp (cnode->asm_name (), flag_dump_body))\n       {\n-\tprintf (\"Gimple Body of Function: %s\\n\", cnode->name ());\n+\tprintf (\"GIMPLE body of function: %s\\n\\n\", cnode->asm_name ());\n \tcnode->get_untransformed_body ();\n \tdebug_function (cnode->decl, flags);\n \tflag = 1;\n       }\n   if (!flag)\n     error_at (input_location, \"Function not found.\");\n-  return;\n }\n \n /* List of command line options for dumping.  */\n@@ -292,13 +288,12 @@ void dump_tool_help ()\n     \"  -callgraph                Dump the callgraph in graphviz format.\\n\"\n     \"  -type-stats               Dump statistics of tree types.\\n\"\n     \"  -tree-stats               Dump statistics of trees.\\n\"\n-    \"  -gimple-stats             Dump statistics of gimple statements.\\n\"\n-    \"  -dump-body=               Dump the specific gimple body.\\n\"\n+    \"  -gimple-stats             Dump statistics of GIMPLE statements.\\n\"\n+    \"  -dump-body=               Dump the specific GIMPLE body.\\n\"\n     \"  -dump-level=              Deciding the optimization level of body.\\n\"\n     \"  -help                     Display the dump tool help.\\n\";\n \n   fputs (msg, stdout);\n-  return;\n }\n \n unsigned int\n@@ -365,7 +360,7 @@ lto_main (void)\n \t\t    \"%<--enable-gather-detailed-mem-stats%>.\");\n       else\n \t{\n-\t  printf (\"Tree Statistics\\n\");\n+\t  printf (\"Tree statistics\\n\");\n \t  dump_tree_statistics ();\n \t}\n     }"}]}