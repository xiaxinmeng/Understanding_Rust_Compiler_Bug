{"sha": "0865674700a1a95a3af07f6e2d197589033d5803", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDg2NTY3NDcwMGExYTk1YTNhZjA3ZjZlMmQxOTc1ODkwMzNkNTgwMw==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2004-12-14T16:34:08Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2004-12-14T16:34:08Z"}, "message": "transfer.c (us_read): Use memcpy/memset instead of assignment to fill unaligned buffer.\n\n\t* libgfortran/io/transfer.c (us_read): Use memcpy/memset\n\tinstead of assignment to fill unaligned buffer.\n\t(us_write): Ditto.\n\t(next_record_w): Ditto.\n\nFrom-SVN: r92143", "tree": {"sha": "3c213ca52a962036fb35fd4927257e6f48391718", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3c213ca52a962036fb35fd4927257e6f48391718"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0865674700a1a95a3af07f6e2d197589033d5803", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0865674700a1a95a3af07f6e2d197589033d5803", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0865674700a1a95a3af07f6e2d197589033d5803", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0865674700a1a95a3af07f6e2d197589033d5803/comments", "author": null, "committer": null, "parents": [{"sha": "0cc1b87903e803bb92122b569a350ab1a2b0ff8a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cc1b87903e803bb92122b569a350ab1a2b0ff8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0cc1b87903e803bb92122b569a350ab1a2b0ff8a"}], "stats": {"total": 25, "additions": 17, "deletions": 8}, "files": [{"sha": "a4d2e44d2b1084fb4659cd17db47a13f66682303", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0865674700a1a95a3af07f6e2d197589033d5803/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0865674700a1a95a3af07f6e2d197589033d5803/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=0865674700a1a95a3af07f6e2d197589033d5803", "patch": "@@ -1,3 +1,10 @@\n+2004-12-14  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* libgfortran/io/transfer.c (us_read): Use memcpy/memset\n+\tinstead of assignment to fill unaligned buffer.\n+\t(us_write): Ditto.\n+\t(next_record_w): Ditto.\n+\n 2004-12-05  Steven G. Kargl  <kargls@comcast.net>\n \n \tPR libfortran/18966"}, {"sha": "c3daa21bfacf9666f20c05507f18c6dad7222096", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0865674700a1a95a3af07f6e2d197589033d5803/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0865674700a1a95a3af07f6e2d197589033d5803/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=0865674700a1a95a3af07f6e2d197589033d5803", "patch": "@@ -827,19 +827,21 @@ transfer_complex (void *p, int kind)\n static void\n us_read (void)\n {\n-  gfc_offset *p;\n+  char *p;\n   int n;\n+  gfc_offset i;\n \n   n = sizeof (gfc_offset);\n-  p = (gfc_offset *) salloc_r (current_unit->s, &n);\n+  p = salloc_r (current_unit->s, &n);\n \n   if (p == NULL || n != sizeof (gfc_offset))\n     {\n       generate_error (ERROR_BAD_US, NULL);\n       return;\n     }\n \n-  current_unit->bytes_left = *p;\n+  memcpy (&i, p, sizeof (gfc_offset));\n+  current_unit->bytes_left = i;\n }\n \n \n@@ -849,19 +851,19 @@ us_read (void)\n static void\n us_write (void)\n {\n-  gfc_offset *p;\n+  char *p;\n   int length;\n \n   length = sizeof (gfc_offset);\n-  p = (gfc_offset *) salloc_w (current_unit->s, &length);\n+  p = salloc_w (current_unit->s, &length);\n \n   if (p == NULL)\n     {\n       generate_error (ERROR_OS, NULL);\n       return;\n     }\n \n-  *p = 0;\t\t\t/* Bogus value for now.  */\n+  memset (p, '\\0', sizeof (gfc_offset));\t/* Bogus value for now.  */\n   if (sfree (current_unit->s) == FAILURE)\n     generate_error (ERROR_OS, NULL);\n \n@@ -1285,7 +1287,7 @@ next_record_w (int done)\n       if (p == NULL)\n \tgoto io_error;\n \n-      *((gfc_offset *) p) = m;\n+      memcpy (p, &m, sizeof (gfc_offset));\n       if (sfree (current_unit->s) == FAILURE)\n \tgoto io_error;\n \n@@ -1296,7 +1298,7 @@ next_record_w (int done)\n       if (p == NULL)\n \tgenerate_error (ERROR_OS, NULL);\n \n-      *((gfc_offset *) p) = m;\n+      memcpy (p, &m, sizeof (gfc_offset));\n       if (sfree (current_unit->s) == FAILURE)\n \tgoto io_error;\n "}]}