{"sha": "dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGNjNThiMDhhMGM4OTFlZTlkZGZkMWIwYmVhNDMyOGNiNjAxMWJhYg==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2005-04-11T23:30:44Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2005-04-11T23:30:44Z"}, "message": "t-slibgcc-darwin: Don't put shared libraries in directories other than $(slibdir).\n\n\t* config/t-slibgcc-darwin: Don't put shared libraries in\n\tdirectories other than $(slibdir).\n\t* config/rs6000/darwin.h: Find -m64 libgcc under the name the\n\tOS uses for it.\n\nFrom-SVN: r97991", "tree": {"sha": "9f3b3bd1f70b243279b98bece16d1cb628dabeb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f3b3bd1f70b243279b98bece16d1cb628dabeb9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f8d66d34f711e94a48b1eb28ab0fa25c6e1404c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8d66d34f711e94a48b1eb28ab0fa25c6e1404c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8d66d34f711e94a48b1eb28ab0fa25c6e1404c9"}], "stats": {"total": 52, "additions": 36, "deletions": 16}, "files": [{"sha": "a43ccf4981a084c01e62306235c5a23bd45b7d13", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab", "patch": "@@ -1,3 +1,10 @@\n+2005-04-11  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* config/t-slibgcc-darwin: Don't put shared libraries in\n+\tdirectories other than $(slibdir).\n+\t* config/rs6000/darwin.h: Find -m64 libgcc under the name the\n+\tOS uses for it.\n+\n 2005-04-11  Diego Novillo  <dnovillo@redhat.com>\n \n \tPR tree-optimization/20933"}, {"sha": "aa673812a3633ded6afb4731e7699e90925d65c8", "filename": "gcc/config/rs6000/darwin.h", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab/gcc%2Fconfig%2Frs6000%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab/gcc%2Fconfig%2Frs6000%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fdarwin.h?ref=dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab", "patch": "@@ -397,6 +397,14 @@ extern const char *darwin_one_byte_bool;\n #undef REGISTER_TARGET_PRAGMAS\n #define REGISTER_TARGET_PRAGMAS DARWIN_REGISTER_TARGET_PRAGMAS\n \n+/* Just like config/darwin.h's REAL_LIBGCC_SPEC, but use -lgcc_s_ppc64 for\n+   -m64.  */\n+#undef REAL_LIBGCC_SPEC\n+#define REAL_LIBGCC_SPEC\t\t\t\t\t\t\\\n+   \"%{static|static-libgcc:-lgcc -lgcc_eh;\t\t\t\t\\\n+      :%{shared-libgcc|Zdynamiclib:%{m64:-lgcc_s_ppc64;:-lgcc_s} -lgcc;\t\\\n+         :-lgcc -lgcc_eh}}\"\n+\n #ifdef IN_LIBGCC2\n #include <stdbool.h>\n #endif"}, {"sha": "fb96fde1e0a7a91bceb2cc7f08ad44ff56e1d68a", "filename": "gcc/config/t-slibgcc-darwin", "status": "modified", "additions": 21, "deletions": 16, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab/gcc%2Fconfig%2Ft-slibgcc-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab/gcc%2Fconfig%2Ft-slibgcc-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-darwin?ref=dcc58b08a0c891ee9ddfd1b0bea4328cb6011bab", "patch": "@@ -3,35 +3,40 @@ SHLIB_MINOR = 1\n SHLIB_REVISION = 0\n SHLIB_VERSTRING = -compatibility_version $(SHLIB_MINOR) -current_version $(SHLIB_MINOR).$(SHLIB_REVISION)\n SHLIB_EXT = .dylib\n-SHLIB_SOLINK = @shlib_base_name@.dylib\n-SHLIB_SONAME = @shlib_base_name@.$(SHLIB_MINOR).$(SHLIB_REVISION).dylib\n+SHLIB_SUFFIX = `if test @multilib_dir@ != . ; then echo _@multilib_dir@ ; fi`\n+SHLIB_SOLINK = @shlib_base_name@$(SHLIB_SUFFIX)$(SHLIB_EXT)\n+SHLIB_SONAME = @shlib_base_name@$(SHLIB_SUFFIX).$(SHLIB_MINOR).$(SHLIB_REVISION)$(SHLIB_EXT)\n SHLIB_MAP = @shlib_map_file@\n SHLIB_OBJS = @shlib_objs@\n SHLIB_DIR = @multilib_dir@\n-SHLIB_SLIBDIR_QUAL = @shlib_slibdir_qual@\n+\n+# Darwin only searches in /usr/lib for shared libraries, not in subdirectories,\n+# so the libgcc variants have different names not different locations.\n \n SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -dynamiclib -nodefaultlibs \\\n-\t-Wl,-install_name,$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SONAME) \\\n-\t-Wl,-flat_namespace -o $(SHLIB_DIR)/$(SHLIB_SONAME).tmp \\\n+\t-Wl,-install_name,$(slibdir)/$(SHLIB_SONAME) \\\n+\t-Wl,-flat_namespace -o $(SHLIB_SONAME).tmp \\\n \t-Wl,-exported_symbols_list,$(SHLIB_MAP) \\\n \t$(SHLIB_VERSTRING) \\\n \t@multilib_flags@ $(SHLIB_OBJS) -lc && \\\n-\trm -f $(SHLIB_DIR)/$(SHLIB_SOLINK) && \\\n-\tif [ -f $(SHLIB_DIR)/$(SHLIB_SONAME) ]; then \\\n-\t  mv -f $(SHLIB_DIR)/$(SHLIB_SONAME) \\\n-\t\t$(SHLIB_DIR)/$(SHLIB_SONAME).backup; \\\n+\trm -f $(SHLIB_SOLINK) $(SHLIB_DIR)/$(SHLIB_SOLINK) && \\\n+\tif [ -f $(SHLIB_SONAME) ]; then \\\n+\t  mv -f $(SHLIB_SONAME) $(SHLIB_SONAME).backup; \\\n \telse true; fi && \\\n-\tmv $(SHLIB_DIR)/$(SHLIB_SONAME).tmp $(SHLIB_DIR)/$(SHLIB_SONAME) && \\\n-\t$(LN_S) $(SHLIB_SONAME) $(SHLIB_DIR)/$(SHLIB_SOLINK)\n+\tmv $(SHLIB_SONAME).tmp $(SHLIB_SONAME) && \\\n+\t$(LN_S) $(SHLIB_SONAME) $(SHLIB_SOLINK) && \\\n+\tif [ $(SHLIB_DIR) != . ] ; then \\\n+\t  $(LN_S) `pwd`/$(SHLIB_SONAME) $(SHLIB_DIR)/$(SHLIB_SOLINK) ; \\\n+\telse true; fi\n # $(slibdir) double quoted to protect it from expansion while building\n # libgcc.mk.  We want this delayed until actual install time.\n SHLIB_INSTALL = \\\n-\t$$(mkinstalldirs) $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL); \\\n-\t$(INSTALL_DATA) $(SHLIB_DIR)/$(SHLIB_SONAME) \\\n-\t  $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SONAME); \\\n-\trm -f $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SOLINK); \\\n+\t$$(mkinstalldirs) $$(DESTDIR)$$(slibdir); \\\n+\t$(INSTALL_DATA) $(SHLIB_SONAME) \\\n+\t  $$(DESTDIR)$$(slibdir)/$(SHLIB_SONAME); \\\n+\trm -f $$(DESTDIR)$$(slibdir)/$(SHLIB_SOLINK); \\\n \t$(LN_S) $(SHLIB_SONAME) \\\n-\t  $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SOLINK)\n+\t  $$(DESTDIR)$$(slibdir)/$(SHLIB_SOLINK)\n SHLIB_MKMAP = $(srcdir)/mkmap-flat.awk\n SHLIB_MKMAP_OPTS = -v leading_underscore=1\n SHLIB_MAPFILES = $(srcdir)/libgcc-std.ver"}]}