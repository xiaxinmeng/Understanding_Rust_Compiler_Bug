{"sha": "2ed9e5272e6952e34d5c23242136e37b9f65c630", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmVkOWU1MjcyZTY5NTJlMzRkNWMyMzI0MjEzNmUzN2I5ZjY1YzYzMA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-08-06T17:51:45Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-08-06T17:51:45Z"}, "message": "symbian.h (CC1_SPEC): Avoid passing duplicate options to the compiler.\n\n\t* config/arm/symbian.h (CC1_SPEC): Avoid passing duplicate options\n\tto the compiler.  Use -fshort-wchar by default.\n\n\t* gcc.dg/symbian4.c: Expect a 2-byte wchar_t, not a 4-byte\n\twchar_t.\n\t* gcc.dg/symbian5.c: Test -fno-short-wchar.\n\nFrom-SVN: r85648", "tree": {"sha": "07e882143d1fcb2ff08cb3045152f8878714e664", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/07e882143d1fcb2ff08cb3045152f8878714e664"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2ed9e5272e6952e34d5c23242136e37b9f65c630", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ed9e5272e6952e34d5c23242136e37b9f65c630", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ed9e5272e6952e34d5c23242136e37b9f65c630", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ed9e5272e6952e34d5c23242136e37b9f65c630/comments", "author": null, "committer": null, "parents": [{"sha": "12183e0fbcace8903ebcbec1ef38aa25f000764b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12183e0fbcace8903ebcbec1ef38aa25f000764b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12183e0fbcace8903ebcbec1ef38aa25f000764b"}], "stats": {"total": 37, "additions": 33, "deletions": 4}, "files": [{"sha": "a55a3d92921322ed9b91fe956a866ee3d5eb9774", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ed9e5272e6952e34d5c23242136e37b9f65c630/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ed9e5272e6952e34d5c23242136e37b9f65c630/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2ed9e5272e6952e34d5c23242136e37b9f65c630", "patch": "@@ -1,3 +1,8 @@\n+2004-08-06  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* config/arm/symbian.h (CC1_SPEC): Avoid passing duplicate options\n+\tto the compiler.  Use -fshort-wchar by default.\n+\n 2004-08-06  Pat Haugen  <pthaugen@us.ibm.com>\n \n \t* params.def (PARAM_MIN_CROSSJUMP_INSNS): New."}, {"sha": "c03b428e692a612aefc130b7110f65bcaf818415", "filename": "gcc/config/arm/symbian.h", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ed9e5272e6952e34d5c23242136e37b9f65c630/gcc%2Fconfig%2Farm%2Fsymbian.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ed9e5272e6952e34d5c23242136e37b9f65c630/gcc%2Fconfig%2Farm%2Fsymbian.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fsymbian.h?ref=2ed9e5272e6952e34d5c23242136e37b9f65c630", "patch": "@@ -34,8 +34,18 @@\n \n    Make all symbols hidden by default.  Symbian OS expects that all\n    exported symbols will be explicitly marked with\n-   \"__declspec(dllexport)\".  */\n-#define CC1_SPEC \"-fno-builtin -fvisibility=hidden -fno-short-enums\"\n+   \"__declspec(dllexport)\".  \n+\n+   Enumeration types use 4 bytes, even if the enumerals are small,\n+   unless explicitly overridden.\n+\n+   The wchar_t type is a 2-byte type, unless explicitly\n+   overridden.  */\n+#define CC1_SPEC\t\t\t\t\t\t\\\n+  \"%{!fbuiltin:%{!fno-builtin:-fno-builtin}} \"\t\t\t\\\n+  \"%{!fvisibility=*:-fvisibility=hidden} \"\t\t\t\\\n+  \"%{!fshort-enums:%{!fno-short-enums:-fno-short-enums}} \"\t\\\n+  \"%{!fshort-wchar:%{!fno-short-wchar:-fshort-wchar}} \"\n #define CC1PLUS_SPEC CC1_SPEC\n \n /* Symbian OS does not use crt0.o, unlike the generic unknown-elf"}, {"sha": "63ca7a78c50c575ef716240b3c622b90892bc694", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ed9e5272e6952e34d5c23242136e37b9f65c630/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ed9e5272e6952e34d5c23242136e37b9f65c630/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2ed9e5272e6952e34d5c23242136e37b9f65c630", "patch": "@@ -1,3 +1,9 @@\n+2004-08-06  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* gcc.dg/symbian4.c: Expect a 2-byte wchar_t, not a 4-byte\n+\twchar_t.\n+\t* gcc.dg/symbian5.c: Test -fno-short-wchar.\n+\n 2004-08-06  Paul Brook  <paul@codesourcery.com>\n \n \t* gfortran.dg/ret_array_1.f90: New test."}, {"sha": "aede7f5c66c6014693aa6665ce1d0cca5e3bba47", "filename": "gcc/testsuite/gcc.dg/symbian4.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ed9e5272e6952e34d5c23242136e37b9f65c630/gcc%2Ftestsuite%2Fgcc.dg%2Fsymbian4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ed9e5272e6952e34d5c23242136e37b9f65c630/gcc%2Ftestsuite%2Fgcc.dg%2Fsymbian4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fsymbian4.c?ref=2ed9e5272e6952e34d5c23242136e37b9f65c630", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile { target arm*-*-symbianelf* } } */\n-/* Check that wchar_t is a 4-byte type.  */\n+/* Check that wchar_t is a 2-byte type.  */\n \n extern int i[sizeof (L'a')];\n-int i[4];\n+int i[2];"}, {"sha": "0bde6b0cba3ca92f158a57b72d4dbc96ab3ed8db", "filename": "gcc/testsuite/gcc.dg/symbian5.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ed9e5272e6952e34d5c23242136e37b9f65c630/gcc%2Ftestsuite%2Fgcc.dg%2Fsymbian5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ed9e5272e6952e34d5c23242136e37b9f65c630/gcc%2Ftestsuite%2Fgcc.dg%2Fsymbian5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fsymbian5.c?ref=2ed9e5272e6952e34d5c23242136e37b9f65c630", "patch": "@@ -0,0 +1,8 @@\n+/* { dg-do compile { target arm*-*-symbianelf* } } */\n+/* { dg-options \"-fno-short-wchar\" } */\n+/* Check that wchar_t is a 4-byte type when -fno-short-wchar is\n+   used.  */\n+\n+extern int i[sizeof (L'a')];\n+int i[4];\n+"}]}