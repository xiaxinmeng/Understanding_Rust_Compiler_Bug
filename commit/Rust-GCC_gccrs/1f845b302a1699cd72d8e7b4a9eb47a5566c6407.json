{"sha": "1f845b302a1699cd72d8e7b4a9eb47a5566c6407", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWY4NDViMzAyYTE2OTljZDcyZDhlN2I0YTllYjQ3YTU1NjZjNjQwNw==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2003-09-06T18:37:57Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2003-09-06T18:37:57Z"}, "message": "re PR c++/11794 (using declaration inside nested class seems ignored)\n\ncp:\n\tPR c++/11794\n\t* class.c (pushclass): Push dependent using decls for nested\n\tclasses of templates too.\ntestsuite:\n\tPR c++/11794\n\t* g++.dg/parse/using3.C: New test.\n\nFrom-SVN: r71143", "tree": {"sha": "487f31809f60bfa0aec17b50894739717ee2b336", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/487f31809f60bfa0aec17b50894739717ee2b336"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f845b302a1699cd72d8e7b4a9eb47a5566c6407", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f845b302a1699cd72d8e7b4a9eb47a5566c6407", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f845b302a1699cd72d8e7b4a9eb47a5566c6407", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f845b302a1699cd72d8e7b4a9eb47a5566c6407/comments", "author": null, "committer": null, "parents": [{"sha": "082124f5c101ed67e20640ec82293f512668455b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/082124f5c101ed67e20640ec82293f512668455b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/082124f5c101ed67e20640ec82293f512668455b"}], "stats": {"total": 37, "additions": 35, "deletions": 2}, "files": [{"sha": "0e657be9407db4fa0b532c83ffc03148e9199dd7", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f845b302a1699cd72d8e7b4a9eb47a5566c6407/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f845b302a1699cd72d8e7b4a9eb47a5566c6407/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1f845b302a1699cd72d8e7b4a9eb47a5566c6407", "patch": "@@ -1,3 +1,9 @@\n+2003-09-06  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR c++/11794\n+\t* class.c (pushclass): Push dependent using decls for nested\n+\tclasses of templates too.\n+\n 2003-09-06  Roger Sayle  <roger@eyesopen.com>\n \n \tPR c++/11409"}, {"sha": "d17ff5ad0b72d8d6e49e25d150fa3500c45654a2", "filename": "gcc/cp/class.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f845b302a1699cd72d8e7b4a9eb47a5566c6407/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f845b302a1699cd72d8e7b4a9eb47a5566c6407/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=1f845b302a1699cd72d8e7b4a9eb47a5566c6407", "patch": "@@ -5466,9 +5466,9 @@ pushclass (tree type)\n   if (type != previous_class_type || current_class_depth > 1)\n     {\n       push_class_decls (type);\n-      if (CLASSTYPE_IS_TEMPLATE (type))\n+      if (CLASSTYPE_TEMPLATE_INFO (type) && !CLASSTYPE_USE_TEMPLATE (type))\n \t{\n-\t  /* If we are entering the scope of a template (not a\n+\t  /* If we are entering the scope of a template declaration (not a\n \t     specialization), we need to push all the using decls with\n \t     dependent scope too.  */\n \t  tree fields;"}, {"sha": "331c00d8cbcb1c0b91a7eb4800aef982e3f155f6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f845b302a1699cd72d8e7b4a9eb47a5566c6407/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f845b302a1699cd72d8e7b4a9eb47a5566c6407/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1f845b302a1699cd72d8e7b4a9eb47a5566c6407", "patch": "@@ -1,3 +1,8 @@\n+2003-09-06  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR c++/11794\n+\t* g++.dg/parse/using3.C: New test.\n+\n 2003-09-06  Roger Sayle  <roger@eyesopen.com>\n \n \tPR c++/11409"}, {"sha": "c266b68eaf707edfc9fde23574b627da779ec455", "filename": "gcc/testsuite/g++.dg/parse/using3.C", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f845b302a1699cd72d8e7b4a9eb47a5566c6407/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fusing3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f845b302a1699cd72d8e7b4a9eb47a5566c6407/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fusing3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fusing3.C?ref=1f845b302a1699cd72d8e7b4a9eb47a5566c6407", "patch": "@@ -0,0 +1,22 @@\n+// { dg-do compile }\n+\n+// Copyright (C) 2003 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 6 Sep 2003 <nathan@codesourcery.com>\n+// Origin: stefaandr@hotmail.com\n+\n+// PR c++/11794. Using decl in nested classes of a template class\n+\n+template <typename T> struct a\n+{\n+  struct a1: T\n+  {\n+    using T::aa;\n+    \n+    a1() { aa = 5; }\n+  };\n+};\n+struct b { int aa; };\n+template <> struct a<int>::a1 { a1 () {} };\n+\n+a<b>::a1 a_b;\n+a<int>::a1 a_i;"}]}