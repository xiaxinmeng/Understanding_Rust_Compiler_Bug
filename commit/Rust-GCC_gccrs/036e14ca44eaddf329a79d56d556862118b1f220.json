{"sha": "036e14ca44eaddf329a79d56d556862118b1f220", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDM2ZTE0Y2E0NGVhZGRmMzI5YTc5ZDU2ZDU1Njg2MjExOGIxZjIyMA==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-06-09T17:39:28Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-06-09T17:41:30Z"}, "message": "d: TypeInfo error when using slice copy on Structs (PR100964)\n\nKnown limitation: does not work for struct with postblit or dtor.\n\nReviewed-on: https://github.com/dlang/dmd/pull/12648\n\ngcc/d/ChangeLog:\n\n\tPR d/100964\n\t* dmd/MERGE: Merge upstream dmd 4a4e46a6f.", "tree": {"sha": "340314f335f96d8c259988675ca1e36245928fc9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/340314f335f96d8c259988675ca1e36245928fc9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/036e14ca44eaddf329a79d56d556862118b1f220", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/036e14ca44eaddf329a79d56d556862118b1f220", "html_url": "https://github.com/Rust-GCC/gccrs/commit/036e14ca44eaddf329a79d56d556862118b1f220", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/036e14ca44eaddf329a79d56d556862118b1f220/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "04fea2d66bd680beb1a204e62f2f459307000813", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04fea2d66bd680beb1a204e62f2f459307000813", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04fea2d66bd680beb1a204e62f2f459307000813"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "a617f285eac7e075ec9a61586ebd1d9a3b35d6a0", "filename": "gcc/d/dmd/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/036e14ca44eaddf329a79d56d556862118b1f220/gcc%2Fd%2Fdmd%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/036e14ca44eaddf329a79d56d556862118b1f220/gcc%2Fd%2Fdmd%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fdmd%2FMERGE?ref=036e14ca44eaddf329a79d56d556862118b1f220", "patch": "@@ -1,4 +1,4 @@\n-f3fdeb578f8cc6d9426d47d2fa144d2078f9ab29\n+4a4e46a6f304a667e0c05d4455706ec2056ffddc\n \n The first line of this file holds the git revision number of the last\n merge done from the dlang/dmd repository."}, {"sha": "88f13e9669bcfe3c0f23076a07d9afded8c1f695", "filename": "gcc/d/dmd/expression.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/036e14ca44eaddf329a79d56d556862118b1f220/gcc%2Fd%2Fdmd%2Fexpression.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/036e14ca44eaddf329a79d56d556862118b1f220/gcc%2Fd%2Fdmd%2Fexpression.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fdmd%2Fexpression.c?ref=036e14ca44eaddf329a79d56d556862118b1f220", "patch": "@@ -1044,8 +1044,11 @@ bool Expression::checkPostblit(Scope *sc, Type *t)\n     t = t->baseElemOf();\n     if (t->ty == Tstruct)\n     {\n-        // Bugzilla 11395: Require TypeInfo generation for array concatenation\n-        semanticTypeInfo(sc, t);\n+        if (global.params.useTypeInfo)\n+        {\n+            // Bugzilla 11395: Require TypeInfo generation for array concatenation\n+            semanticTypeInfo(sc, t);\n+        }\n \n         StructDeclaration *sd = ((TypeStruct *)t)->sym;\n         if (sd->postblit)"}, {"sha": "3f48b042bde5515a66803ab90168e7d078c6f2c5", "filename": "gcc/testsuite/gdc.test/compilable/betterCarray.d", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/036e14ca44eaddf329a79d56d556862118b1f220/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FbetterCarray.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/036e14ca44eaddf329a79d56d556862118b1f220/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FbetterCarray.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgdc.test%2Fcompilable%2FbetterCarray.d?ref=036e14ca44eaddf329a79d56d556862118b1f220", "patch": "@@ -15,3 +15,13 @@ int foo(int[] a, int i)\n {\n     return a[i];\n }\n+\n+/**********************************************/\n+// https://issues.dlang.org/show_bug.cgi?id=19234\n+void issue19234()\n+{\n+    static struct A {}\n+    A[10] a;\n+    A[10] b;\n+    b[] = a[];\n+}"}]}