{"sha": "74a9301d6128c0c7a4a8570545b9db40505c93f2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzRhOTMwMWQ2MTI4YzBjN2E0YTg1NzA1NDViOWRiNDA1MDVjOTNmMg==", "commit": {"author": {"name": "Vladimir Mezentsev", "email": "vladimir.mezentsev@oracle.com", "date": "2018-03-15T08:55:04Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2018-03-15T08:55:04Z"}, "message": "re PR target/68256 (Defining TARGET_USE_CONSTANT_BLOCKS_P causes go bootstrap failure on aarch64.)\n\n2018-03-15  Vladimir Mezentsev  <vladimir.mezentsev@oracle.com>\n\n        PR target/68256\n        * varasm.c (hash_section): Return an unchangeble hash value\n        * config/aarch64/aarch64.c (aarch64_use_blocks_for_constant_p):\n        Return !aarch64_can_use_per_function_literal_pools_p ().\n\nFrom-SVN: r258553", "tree": {"sha": "69ad9ba092b6aca3614cfeace9ebfe66457417df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/69ad9ba092b6aca3614cfeace9ebfe66457417df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/74a9301d6128c0c7a4a8570545b9db40505c93f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74a9301d6128c0c7a4a8570545b9db40505c93f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74a9301d6128c0c7a4a8570545b9db40505c93f2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74a9301d6128c0c7a4a8570545b9db40505c93f2/comments", "author": null, "committer": null, "parents": [{"sha": "fa7dde7ea2e02096ab3e727b8de930c2d6678f87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa7dde7ea2e02096ab3e727b8de930c2d6678f87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa7dde7ea2e02096ab3e727b8de930c2d6678f87"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "0d6855d9ec5b94a829bd5d8dd56d025eda74b48f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74a9301d6128c0c7a4a8570545b9db40505c93f2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74a9301d6128c0c7a4a8570545b9db40505c93f2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=74a9301d6128c0c7a4a8570545b9db40505c93f2", "patch": "@@ -1,3 +1,10 @@\n+2018-03-15  Vladimir Mezentsev  <vladimir.mezentsev@oracle.com>\n+\n+\tPR target/68256\n+\t* varasm.c (hash_section): Return an unchangeble hash value\n+\t* config/aarch64/aarch64.c (aarch64_use_blocks_for_constant_p):\n+\tReturn !aarch64_can_use_per_function_literal_pools_p ().\n+\n 2018-03-15  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/84860"}, {"sha": "4b5183b602b8786307deb8e3d8056323028b50a2", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74a9301d6128c0c7a4a8570545b9db40505c93f2/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74a9301d6128c0c7a4a8570545b9db40505c93f2/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=74a9301d6128c0c7a4a8570545b9db40505c93f2", "patch": "@@ -7733,11 +7733,9 @@ aarch64_can_use_per_function_literal_pools_p (void)\n static bool\n aarch64_use_blocks_for_constant_p (machine_mode, const_rtx)\n {\n-  /* Fixme:: In an ideal world this would work similar\n-     to the logic in aarch64_select_rtx_section but this\n-     breaks bootstrap in gcc go.  For now we workaround\n-     this by returning false here.  */\n-  return false;\n+  /* We can't use blocks for constants when we're using a per-function\n+     constant pool.  */\n+  return !aarch64_can_use_per_function_literal_pools_p ();\n }\n \n /* Select appropriate section for constants depending"}, {"sha": "2b5c70c8e570be8f1302faf7315093cdb282f5c7", "filename": "gcc/varasm.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74a9301d6128c0c7a4a8570545b9db40505c93f2/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74a9301d6128c0c7a4a8570545b9db40505c93f2/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=74a9301d6128c0c7a4a8570545b9db40505c93f2", "patch": "@@ -225,7 +225,7 @@ hash_section (section *sect)\n {\n   if (sect->common.flags & SECTION_NAMED)\n     return htab_hash_string (sect->named.name);\n-  return sect->common.flags;\n+  return sect->common.flags & ~SECTION_DECLARED;\n }\n \n /* Helper routines for maintaining object_block_htab.  */"}]}