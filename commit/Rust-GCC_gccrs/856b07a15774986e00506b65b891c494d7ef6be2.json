{"sha": "856b07a15774986e00506b65b891c494d7ef6be2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODU2YjA3YTE1Nzc0OTg2ZTAwNTA2YjY1Yjg5MWM0OTRkN2VmNmJlMg==", "commit": {"author": {"name": "Stan Cox", "email": "coxs@gnu.org", "date": "1997-01-31T21:10:10Z"}, "committer": {"name": "Stan Cox", "email": "coxs@gnu.org", "date": "1997-01-31T21:10:10Z"}, "message": "(pentiumpro_cost): Added new cost structure for pentiumpro.\n\nFrom-SVN: r13571", "tree": {"sha": "1fcd1f207b230ea3d7419ea77eac3315ebc259b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1fcd1f207b230ea3d7419ea77eac3315ebc259b1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/856b07a15774986e00506b65b891c494d7ef6be2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/856b07a15774986e00506b65b891c494d7ef6be2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/856b07a15774986e00506b65b891c494d7ef6be2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/856b07a15774986e00506b65b891c494d7ef6be2/comments", "author": null, "committer": null, "parents": [{"sha": "36cf4bcf8646fb1413e6ed61f9f76b23274df643", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36cf4bcf8646fb1413e6ed61f9f76b23274df643", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36cf4bcf8646fb1413e6ed61f9f76b23274df643"}], "stats": {"total": 21, "additions": 16, "deletions": 5}, "files": [{"sha": "85b422fdc227625aef9693f649751e7cabd8a28e", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 16, "deletions": 5, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/856b07a15774986e00506b65b891c494d7ef6be2/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/856b07a15774986e00506b65b891c494d7ef6be2/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=856b07a15774986e00506b65b891c494d7ef6be2", "patch": "@@ -80,13 +80,23 @@ struct processor_costs i486_cost = {\t/* 486 specific costs */\n struct processor_costs pentium_cost = {\n   1,\t\t\t\t\t/* cost of an add instruction */\n   1,\t\t\t\t\t/* cost of a lea instruction */\n-  3,\t\t\t\t\t/* variable shift costs */\n+  4,\t\t\t\t\t/* variable shift costs */\n   1,\t\t\t\t\t/* constant shift costs */\n-  12,\t\t\t\t\t/* cost of starting a multiply */\n-  1,\t\t\t\t\t/* cost of multiply per each bit set */\n+  11,\t\t\t\t\t/* cost of starting a multiply */\n+  0,\t\t\t\t\t/* cost of multiply per each bit set */\n   25\t\t\t\t\t/* cost of a divide/mod */\n };\n \n+struct processor_costs pentiumpro_cost = {\n+  1,\t\t\t\t\t/* cost of an add instruction */\n+  1,\t\t\t\t\t/* cost of a lea instruction */\n+  3,\t\t\t\t\t/* variable shift costs */\n+  1,\t\t\t\t\t/* constant shift costs */\n+  4,\t\t\t\t\t/* cost of starting a multiply */\n+  0,\t\t\t\t\t/* cost of multiply per each bit set */\n+  17\t\t\t\t\t/* cost of a divide/mod */\n+};\n+\n struct processor_costs *ix86_cost = &pentium_cost;\n \n #define AT_BP(mode) (gen_rtx (MEM, (mode), frame_pointer_rtx))\n@@ -182,8 +192,8 @@ override_options ()\n \t   {PROCESSOR_I486_STRING, PROCESSOR_I486, &i486_cost, 0, 0},\n \t   {PROCESSOR_I586_STRING, PROCESSOR_PENTIUM, &pentium_cost, 0, 0},\n \t   {PROCESSOR_PENTIUM_STRING, PROCESSOR_PENTIUM, &pentium_cost, 0, 0},\n-\t   {PROCESSOR_I686_STRING, PROCESSOR_PENTIUMPRO, &pentium_cost, 0, 0},\n-\t   {PROCESSOR_PENTIUMPRO_STRING, PROCESSOR_PENTIUMPRO, &pentium_cost, 0, 0}};\n+\t   {PROCESSOR_I686_STRING, PROCESSOR_PENTIUMPRO, &pentiumpro_cost, 0, 0},\n+\t   {PROCESSOR_PENTIUMPRO_STRING, PROCESSOR_PENTIUMPRO, &pentiumpro_cost, 0, 0}};\n \n   int ptt_size = sizeof (processor_target_table) / sizeof (struct ptt);\n \n@@ -246,6 +256,7 @@ override_options ()\n     if (! strcmp (ix86_cpu_string, processor_target_table[j].name))\n       {\n \tix86_cpu = processor_target_table[j].processor;\n+\tix86_cost = processor_target_table[j].cost;\n \tif (i > j && (int)ix86_arch >= (int)PROCESSOR_PENTIUMPRO)\n \t  error (\"-mcpu=%s does not support -march=%s\", ix86_cpu_string, ix86_arch_string);\n "}]}