{"sha": "302359da8665c7293042fdd1f2f4207c1ffc453d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzAyMzU5ZGE4NjY1YzcyOTMwNDJmZGQxZjJmNDIwN2MxZmZjNDUzZA==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2002-07-31T08:55:57Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2002-07-31T08:55:57Z"}, "message": "crtn.asm: Don't use __mips16 to determine the return-address offset.\n\n\t* config/mips/crtn.asm: Don't use __mips16 to determine the\n\treturn-address offset.  Define RA to a suitable temporary\n\tregister for the return address.\n\nFrom-SVN: r55903", "tree": {"sha": "f656347de36eddfa0f4267e90c1335be4eb3069d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f656347de36eddfa0f4267e90c1335be4eb3069d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/302359da8665c7293042fdd1f2f4207c1ffc453d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/302359da8665c7293042fdd1f2f4207c1ffc453d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/302359da8665c7293042fdd1f2f4207c1ffc453d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/302359da8665c7293042fdd1f2f4207c1ffc453d/comments", "author": null, "committer": null, "parents": [{"sha": "ead0c1d554e1292d5da0c2cc81e8999e0fd91a78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ead0c1d554e1292d5da0c2cc81e8999e0fd91a78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ead0c1d554e1292d5da0c2cc81e8999e0fd91a78"}], "stats": {"total": 40, "additions": 18, "deletions": 22}, "files": [{"sha": "ff553ab4207c7fc5a0a51a84c6e2bf298770d3c1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/302359da8665c7293042fdd1f2f4207c1ffc453d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/302359da8665c7293042fdd1f2f4207c1ffc453d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=302359da8665c7293042fdd1f2f4207c1ffc453d", "patch": "@@ -1,3 +1,9 @@\n+2002-07-31  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config/mips/crtn.asm: Don't use __mips16 to determine the\n+\treturn-address offset.  Define RA to a suitable temporary\n+\tregister for the return address.\n+\n 2002-07-31  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/mips/mips.md (eh_set_lr_si, eh_set_lr_di): Change"}, {"sha": "5d41d3d7ecb84f409640915b5a9305e278b55f4f", "filename": "gcc/config/mips/crtn.asm", "status": "modified", "additions": 12, "deletions": 22, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/302359da8665c7293042fdd1f2f4207c1ffc453d/gcc%2Fconfig%2Fmips%2Fcrtn.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/302359da8665c7293042fdd1f2f4207c1ffc453d/gcc%2Fconfig%2Fmips%2Fcrtn.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fcrtn.asm?ref=302359da8665c7293042fdd1f2f4207c1ffc453d", "patch": "@@ -1,39 +1,29 @@\n /* 4 slots for argument spill area.  1 for cpreturn, 1 for stack.\n    Return spill offset of 40 and 20.  Aligned to 16 bytes for n32.  */\n \n-\t.section .init,\"ax\",@progbits\n #ifdef\t__mips16\n-/* The mips16 uses $7 for a return address. We use that here too.  */\n-\tlw\t$7,20($sp)\n-\taddu\t$sp,$sp,32\n-\n-\tj\t$7\n+#define RA $7\n #else\n+#define RA $31\n+#endif\n+\n+\t.section .init,\"ax\",@progbits\n #ifdef __mips64\n-\tld      $31,40($sp)\n+\tld      RA,40($sp)\n \tdaddu\t$sp,$sp,48\n #else\n-\tlw\t$31,20($sp)\n+\tlw\tRA,20($sp)\n \taddu\t$sp,$sp,32\n #endif\n-\tj\t$31\n-\n-#endif\n+\tj\tRA\n \n \t.section .fini,\"ax\",@progbits\n-#ifdef\t__mips16\n-/* The mips16 uses $7 for a return address. We use that here too.  */\n-\tlw\t$7,20($sp)\n-\taddu\t$sp,$sp,32\n-\n-\tj\t$7\n-#else\n #ifdef\t__mips64\n-\tld\t$31,40($sp)\n+\tld\tRA,40($sp)\n \tdaddu\t$sp,$sp,48\n #else\n-\tlw\t$31,20($sp)\n+\tlw\tRA,20($sp)\n \taddu\t$sp,$sp,32\n #endif\n-\tj\t$31\n-#endif\n+\tj\tRA\n+"}]}