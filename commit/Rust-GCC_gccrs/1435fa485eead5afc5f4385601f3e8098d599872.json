{"sha": "1435fa485eead5afc5f4385601f3e8098d599872", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQzNWZhNDg1ZWVhZDVhZmM1ZjQzODU2MDFmM2U4MDk4ZDU5OTg3Mg==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2014-07-17T20:17:21Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2014-07-17T20:17:21Z"}, "message": "p5600.md: Add missing cpu tests.\n\ngcc/\n\t* config/mips/p5600.md: Add missing cpu tests.\n\nFrom-SVN: r212765", "tree": {"sha": "8256a268b69454433b98a81960d93d93f74456fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8256a268b69454433b98a81960d93d93f74456fd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1435fa485eead5afc5f4385601f3e8098d599872", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1435fa485eead5afc5f4385601f3e8098d599872", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1435fa485eead5afc5f4385601f3e8098d599872", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1435fa485eead5afc5f4385601f3e8098d599872/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "13caea3d9daddb31f9df71d291940e1fb1d755de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13caea3d9daddb31f9df71d291940e1fb1d755de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13caea3d9daddb31f9df71d291940e1fb1d755de"}], "stats": {"total": 94, "additions": 64, "deletions": 30}, "files": [{"sha": "85d72c48c843bbc39b0a4ea5c7beaee9881e2598", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1435fa485eead5afc5f4385601f3e8098d599872/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1435fa485eead5afc5f4385601f3e8098d599872/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1435fa485eead5afc5f4385601f3e8098d599872", "patch": "@@ -1,3 +1,7 @@\n+2014-07-17  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\t* config/mips/p5600.md: Add missing cpu tests.\n+\n 2014-07-17  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/aarch64/arm_neon.h (vfma_f64): New intrinsic."}, {"sha": "d0b1424178141ea6705b19bb7cc366a79b02b692", "filename": "gcc/config/mips/p5600.md", "status": "modified", "additions": 60, "deletions": 30, "changes": 90, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1435fa485eead5afc5f4385601f3e8098d599872/gcc%2Fconfig%2Fmips%2Fp5600.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1435fa485eead5afc5f4385601f3e8098d599872/gcc%2Fconfig%2Fmips%2Fp5600.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fp5600.md?ref=1435fa485eead5afc5f4385601f3e8098d599872", "patch": "@@ -47,52 +47,62 @@\n \n ;; fadd, fsub\n (define_insn_reservation \"p5600_fpu_fadd\" 4\n-  (eq_attr \"type\" \"fadd,fabs,fneg\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"fadd,fabs,fneg\"))\n   \"p5600_fpu_long, p5600_fpu_apu\")\n \n ;; fabs, fneg, fcmp\n (define_insn_reservation \"p5600_fpu_fabs\" 2\n-  (eq_attr \"type\" \"fabs,fneg,fcmp,fmove\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"fabs,fneg,fcmp,fmove\"))\n   \"p5600_fpu_short, p5600_fpu_apu\")\n \n ;; fload\n (define_insn_reservation \"p5600_fpu_fload\" 8\n-  (eq_attr \"type\" \"fpload,fpidxload\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"fpload,fpidxload\"))\n   \"p5600_fpu_long, p5600_fpu_apu\")\n \n ;; fstore\n (define_insn_reservation \"p5600_fpu_fstore\" 1\n-  (eq_attr \"type\" \"fpstore,fpidxstore\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"fpstore,fpidxstore\"))\n   \"p5600_fpu_short, p5600_fpu_apu\")\n \n ;; fmadd\n (define_insn_reservation \"p5600_fpu_fmadd\" 9\n-  (eq_attr \"type\" \"fmadd\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"fmadd\"))\n   \"p5600_fpu_long, p5600_fpu_apu\")\n \n ;; fmul\n (define_insn_reservation \"p5600_fpu_fmul\" 5\n-  (eq_attr \"type\" \"fmul\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"fmul\"))\n   \"p5600_fpu_long, p5600_fpu_apu\")\n \n ;; fdiv, fsqrt\n (define_insn_reservation \"p5600_fpu_div\" 17\n-  (eq_attr \"type\" \"fdiv,frdiv,fsqrt,frsqrt\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"fdiv,frdiv,fsqrt,frsqrt\"))\n   \"p5600_fpu_long, p5600_fpu_apu*17\")\n \n ;; fcvt\n (define_insn_reservation \"p5600_fpu_fcvt\" 4\n-  (eq_attr \"type\" \"fcvt\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"fcvt\"))\n   \"p5600_fpu_long, p5600_fpu_apu\")\n \n ;; mtc\n (define_insn_reservation \"p5600_fpu_fmtc\" 7\n-  (eq_attr \"type\" \"mtc\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"mtc\"))\n   \"p5600_fpu_short, p5600_fpu_store\")\n \n ;; mfc\n (define_insn_reservation \"p5600_fpu_fmfc\" 4\n-  (eq_attr \"type\" \"mfc\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"mfc\"))\n   \"p5600_fpu_short, p5600_fpu_store\")\n \n ;; madd/msub feeding into the add source\n@@ -105,100 +115,120 @@\n \n ;; and\n (define_insn_reservation \"p5600_int_and\" 1\n-  (eq_attr \"move_type\" \"logical\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"move_type\" \"logical\"))\n   \"p5600_alq_alu\")\n \n ;; lui\n (define_insn_reservation \"p5600_int_lui\" 1\n-  (eq_attr \"move_type\" \"const\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"move_type\" \"const\"))\n   \"p5600_alq_alu\")\n \n ;; Load lb, lbu, lh, lhu, lq, lw, lw_i2f, lwxs\n (define_insn_reservation \"p5600_int_load\" 4\n-  (eq_attr \"move_type\" \"load\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"move_type\" \"load\"))\n   \"p5600_agq_ldsta\")\n \n ;; store\n (define_insn_reservation \"p5600_int_store\" 3\n-  (eq_attr \"move_type\" \"store\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"move_type\" \"store\"))\n   \"p5600_agq_ldsta\")\n \n ;; andi, sll, srl, seb, seh\n (define_insn_reservation \"p5600_int_arith_1\" 1\n-  (eq_attr \"move_type\" \"andi,sll0,signext\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"move_type\" \"andi,sll0,signext\"))\n   \"p5600_agq_al2 | p5600_alq_alu\")\n \n ;; addi, addiu, ori, xori, add, addu\n (define_insn_reservation \"p5600_int_arith_2\" 1\n-  (eq_attr \"alu_type\" \"add,or,xor\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"alu_type\" \"add,or,xor\"))\n   \"p5600_agq_al2 | p5600_alq_alu\")\n \n ;; nor, sub\n (define_insn_reservation \"p5600_int_arith_3\" 1\n-  (eq_attr \"alu_type\" \"nor,sub\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"alu_type\" \"nor,sub\"))\n   \"p5600_alq_alu\")\n \n ;; srl, sra, rotr, slt, sllv, srlv\n (define_insn_reservation \"p5600_int_arith_4\" 1\n-  (eq_attr \"type\" \"shift,slt,move\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"shift,slt,move\"))\n   \"p5600_agq_al2 | p5600_alq_alu\")\n \n ;; nop\n (define_insn_reservation \"p5600_int_nop\" 0\n-  (eq_attr \"type\" \"nop\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"nop\"))\n   \"p5600_agq_al2\")\n \n ;; clo, clz\n (define_insn_reservation \"p5600_int_countbits\" 1\n-  (eq_attr \"type\" \"clz\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"clz\"))\n   \"p5600_agq_al2\")\n \n ;; Conditional moves\n (define_insn_reservation \"p5600_int_condmove\" 1\n-  (eq_attr \"type\" \"condmove\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"condmove\"))\n   \"p5600_agq_al2\")\n \n ;; madd, msub\n (define_insn_reservation \"p5600_dsp_mac\" 5\n-  (eq_attr \"type\" \"imadd\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"imadd\"))\n   \"p5600_agq_al2\")\n \n ;; mfhi/lo\n (define_insn_reservation \"p5600_dsp_mfhilo\" 1\n-  (eq_attr \"type\" \"mfhi,mflo\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"mfhi,mflo\"))\n   \"p5600_agq_al2\")\n \n ;; mthi/lo\n (define_insn_reservation \"p5600_dsp_mthilo\" 5\n-  (eq_attr \"type\" \"mthi,mtlo\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"mthi,mtlo\"))\n   \"p5600_agq_al2\")\n \n ;; mult, multu, mul\n (define_insn_reservation \"p5600_dsp_mult\" 5\n-  (eq_attr \"type\" \"imul3,imul\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"imul3,imul\"))\n   \"p5600_agq_al2\")\n \n ;; branch and jump\n (define_insn_reservation \"p5600_int_branch\" 1\n-  (eq_attr \"type\" \"branch,jump\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"branch,jump\"))\n   \"p5600_agq_ctistd\")\n \n ;; prefetch\n (define_insn_reservation \"p5600_int_prefetch\" 3\n-  (eq_attr \"type\" \"prefetch,prefetchx\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"prefetch,prefetchx\"))\n   \"p5600_agq_ldsta\")\n \n ;; divide\n (define_insn_reservation \"p5600_int_div\" 8\n-  (eq_attr \"type\" \"idiv\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"idiv\"))\n   \"p5600_agq_al2+p5600_gpdiv*8\")\n \n ;; arith\n (define_insn_reservation \"p5600_int_arith_5\" 2\n-  (eq_attr \"type\" \"arith\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"type\" \"arith\"))\n   \"p5600_agq_al2\")\n \n ;; call\n (define_insn_reservation \"p5600_int_call\" 2\n-  (eq_attr \"jal\" \"indirect,direct\")\n+  (and (eq_attr \"cpu\" \"p5600\")\n+       (eq_attr \"jal\" \"indirect,direct\"))\n   \"p5600_agq_ctistd\")"}]}