{"sha": "563cc649beaf11d707c422e5f4e9e5cdacb818c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTYzY2M2NDliZWFmMTFkNzA3YzQyMmU1ZjRlOWU1Y2RhY2I4MThjMw==", "commit": {"author": {"name": "Richard Henderson", "email": "richard.henderson@linaro.org", "date": "2018-10-31T10:00:45Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2018-10-31T10:00:45Z"}, "message": "aarch64: Force TImode values into even registers\n\nThe LSE CASP instruction requires values to be placed in even\nregister pairs.  A solution involving two additional register\nclasses was rejected in favor of the much simpler solution of\nsimply requiring all TImode values to be aligned.\n\n\t* config/aarch64/aarch64.c (aarch64_hard_regno_mode_ok): Force\n\t16-byte modes held in GP registers to use an even regno.\n\nFrom-SVN: r265661", "tree": {"sha": "a4713d9eebef54bd572c5cbdd5238258187f98b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a4713d9eebef54bd572c5cbdd5238258187f98b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/563cc649beaf11d707c422e5f4e9e5cdacb818c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/563cc649beaf11d707c422e5f4e9e5cdacb818c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/563cc649beaf11d707c422e5f4e9e5cdacb818c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/563cc649beaf11d707c422e5f4e9e5cdacb818c3/comments", "author": {"login": "rth7680", "id": 2529319, "node_id": "MDQ6VXNlcjI1MjkzMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2529319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth7680", "html_url": "https://github.com/rth7680", "followers_url": "https://api.github.com/users/rth7680/followers", "following_url": "https://api.github.com/users/rth7680/following{/other_user}", "gists_url": "https://api.github.com/users/rth7680/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth7680/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth7680/subscriptions", "organizations_url": "https://api.github.com/users/rth7680/orgs", "repos_url": "https://api.github.com/users/rth7680/repos", "events_url": "https://api.github.com/users/rth7680/events{/privacy}", "received_events_url": "https://api.github.com/users/rth7680/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7803ec5ee2a547043fb6708a08ddb1361ba91202", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7803ec5ee2a547043fb6708a08ddb1361ba91202", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7803ec5ee2a547043fb6708a08ddb1361ba91202"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "1587a51b4b69e3b1a0ddb1862757db0f1e3f3d98", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/563cc649beaf11d707c422e5f4e9e5cdacb818c3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/563cc649beaf11d707c422e5f4e9e5cdacb818c3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=563cc649beaf11d707c422e5f4e9e5cdacb818c3", "patch": "@@ -1,5 +1,8 @@\n 2018-10-31  Richard Henderson  <richard.henderson@linaro.org>\n \n+\t* config/aarch64/aarch64.c (aarch64_hard_regno_mode_ok): Force\n+\t16-byte modes held in GP registers to use an even regno.\n+\n \t* config/aarch64/aarch64.c (aarch64_emit_bic): Remove.\n \t(aarch64_atomic_ldop_supported_p): Remove.\n \t(aarch64_gen_atomic_ldop): Remove."}, {"sha": "9813a9ded8f66e06d2da48bb064d4ad85d6bf6ce", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/563cc649beaf11d707c422e5f4e9e5cdacb818c3/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/563cc649beaf11d707c422e5f4e9e5cdacb818c3/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=563cc649beaf11d707c422e5f4e9e5cdacb818c3", "patch": "@@ -1452,10 +1452,14 @@ aarch64_hard_regno_mode_ok (unsigned regno, machine_mode mode)\n   if (regno == FRAME_POINTER_REGNUM || regno == ARG_POINTER_REGNUM)\n     return mode == Pmode;\n \n-  if (GP_REGNUM_P (regno) && known_le (GET_MODE_SIZE (mode), 16))\n-    return true;\n-\n-  if (FP_REGNUM_P (regno))\n+  if (GP_REGNUM_P (regno))\n+    {\n+      if (known_le (GET_MODE_SIZE (mode), 8))\n+\treturn true;\n+      else if (known_le (GET_MODE_SIZE (mode), 16))\n+\treturn (regno & 1) == 0;\n+    }\n+  else if (FP_REGNUM_P (regno))\n     {\n       if (vec_flags & VEC_STRUCT)\n \treturn end_hard_regno (mode, regno) - 1 <= V31_REGNUM;"}]}