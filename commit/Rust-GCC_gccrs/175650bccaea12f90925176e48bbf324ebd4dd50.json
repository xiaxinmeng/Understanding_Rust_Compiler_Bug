{"sha": "175650bccaea12f90925176e48bbf324ebd4dd50", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTc1NjUwYmNjYWVhMTJmOTA5MjUxNzZlNDhiYmYzMjRlYmQ0ZGQ1MA==", "commit": {"author": {"name": "Olivier Hainque", "email": "hainque@adacore.com", "date": "2015-09-13T17:10:54Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2015-09-13T17:10:54Z"}, "message": "config.gcc (visium-*-*): Enable --with-cpu option, accept gr5 and gr6 as possible values, defaulting to gr5.\n\n\t* config.gcc (visium-*-*): Enable --with-cpu option, accept gr5 and\n\tgr6 as possible values, defaulting to gr5.  Set target_cpu_default2.\n\t* config/visium/visium.h (OPTION_DEFAULT_SPECS): Define.\n\t(TARGET_CPU_gr5): Likewise.\n\t(TARGET_CPU_gr6): Likewise.\n\t(MULTILIB_DEFAULTS): Likewise.\n\t* config/visium/t-visium (MULTILIB_OPTIONS): Request distinct variants\n\tfor mcpu=gr5 and mcpu=gr6.\n\t(MULTILIB_DIRNAMES): Adjust accordingly.\n\nFrom-SVN: r227728", "tree": {"sha": "74a32b9cfbe24c55e72b0f457a818cbf2837e6f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74a32b9cfbe24c55e72b0f457a818cbf2837e6f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/175650bccaea12f90925176e48bbf324ebd4dd50", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/175650bccaea12f90925176e48bbf324ebd4dd50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/175650bccaea12f90925176e48bbf324ebd4dd50", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/175650bccaea12f90925176e48bbf324ebd4dd50/comments", "author": {"login": "hainque", "id": 18735142, "node_id": "MDQ6VXNlcjE4NzM1MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/18735142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hainque", "html_url": "https://github.com/hainque", "followers_url": "https://api.github.com/users/hainque/followers", "following_url": "https://api.github.com/users/hainque/following{/other_user}", "gists_url": "https://api.github.com/users/hainque/gists{/gist_id}", "starred_url": "https://api.github.com/users/hainque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hainque/subscriptions", "organizations_url": "https://api.github.com/users/hainque/orgs", "repos_url": "https://api.github.com/users/hainque/repos", "events_url": "https://api.github.com/users/hainque/events{/privacy}", "received_events_url": "https://api.github.com/users/hainque/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "61baec412d978857ae8c34e7e41c532fbeb9921a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61baec412d978857ae8c34e7e41c532fbeb9921a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61baec412d978857ae8c34e7e41c532fbeb9921a"}], "stats": {"total": 63, "additions": 55, "deletions": 8}, "files": [{"sha": "5a8fa311d8a7d16b15c56e8f12c30c3c5eb934f9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 19, "deletions": 6, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/175650bccaea12f90925176e48bbf324ebd4dd50/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/175650bccaea12f90925176e48bbf324ebd4dd50/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=175650bccaea12f90925176e48bbf324ebd4dd50", "patch": "@@ -1,3 +1,16 @@\n+2015-09-13  Olivier Hainque  <hainque@adacore.com>\n+\t    Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* config.gcc (visium-*-*): Enable --with-cpu option, accept gr5 and\n+\tgr6 as possible values, defaulting to gr5.  Set target_cpu_default2.\n+\t* config/visium/visium.h (OPTION_DEFAULT_SPECS): Define.\n+\t(TARGET_CPU_gr5): Likewise.\n+\t(TARGET_CPU_gr6): Likewise.\n+\t(MULTILIB_DEFAULTS): Likewise.\n+\t* config/visium/t-visium (MULTILIB_OPTIONS): Request distinct variants\n+\tfor mcpu=gr5 and mcpu=gr6.\n+\t(MULTILIB_DIRNAMES): Adjust accordingly.\n+\n 2015-09-13  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n \n \t* tree-ssa-loop-im.c (mem_ref_loc_p): Remove typedef.\n@@ -158,12 +171,12 @@\n \t(get_addr_from_local_cache): Likewise.\n \t(drop_overlapping_mem_locs): Likewise.\n \t(val_reset): Likewise.\n-\t\t\t(struct variable_union_info): Likewise.\n-\t\t\t\t\t\t\t\t(variable_union): Likewise.\n-\t\t\t\t\t\t\t(find_loc_in_1pdv): Likewise.\n-\t\t(insert_into_intersection): Likewise.\n-\t\t\t(intersect_loc_chains): Likewise.\n-\t\t\t(canonicalize_loc_order_check): Likewise.\n+\t(struct variable_union_info): Likewise.\n+\t(variable_union): Likewise.\n+\t(find_loc_in_1pdv): Likewise.\n+\t(insert_into_intersection): Likewise.\n+\t(intersect_loc_chains): Likewise.\n+\t(canonicalize_loc_order_check): Likewise.\n \t(canonicalize_values_mark): Likewise.\n \t(canonicalize_values_star): Likewise.\n \t(canonicalize_vars_star): Likewise."}, {"sha": "75807f59277462b8900845a57d9222b83481f905", "filename": "gcc/config.gcc", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/175650bccaea12f90925176e48bbf324ebd4dd50/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/175650bccaea12f90925176e48bbf324ebd4dd50/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=175650bccaea12f90925176e48bbf324ebd4dd50", "patch": "@@ -3346,6 +3346,9 @@ if test x$with_cpu = x ; then\n \t  ;;\n       esac\n       ;;\n+    visium-*-*)\n+      with_cpu=gr5\n+      ;;\n   esac\n \n   # Avoid overriding --with-cpu-32 and --with-cpu-64 values.\n@@ -4295,6 +4298,16 @@ case \"${target}\" in\n \t\t\t;;\n \t\tesac\n \t\t;;\n+\tvisium-*-*)\n+\t\tsupported_defaults=\"cpu\"\n+\t\tcase $with_cpu in\n+\t\t  \"\" | gr5 | gr6)\n+\t\t\t;;\n+\t\t  *)    echo \"Unknown cpu used in --with-cpu=$with_cpu\" 1>&2\n+\t\t\texit 1\n+\t\t\t;;\n+\t\tesac\n+\t\t;;\n esac\n \n # Set some miscellaneous flags for particular targets.\n@@ -4449,6 +4462,9 @@ case ${target} in\n \t\t\t;;\n \t\tesac\n \t\t;;\n+\tvisium-*-*)\n+\t\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n+\t\t;;\n esac\n \n t="}, {"sha": "46234f05b78b06997e3104be216b946c903370a8", "filename": "gcc/config/visium/t-visium", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/175650bccaea12f90925176e48bbf324ebd4dd50/gcc%2Fconfig%2Fvisium%2Ft-visium", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/175650bccaea12f90925176e48bbf324ebd4dd50/gcc%2Fconfig%2Fvisium%2Ft-visium", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvisium%2Ft-visium?ref=175650bccaea12f90925176e48bbf324ebd4dd50", "patch": "@@ -17,5 +17,7 @@\n # along with GCC; see the file COPYING3.  If not see\n # <http://www.gnu.org/licenses/>.\n \n-MULTILIB_OPTIONS = mcpu=gr6\n-MULTILIB_DIRNAMES = gr6\n+# The compiler defaults to -mcpu=gr5 but this may be overridden via --with-cpu\n+# at configure time so the -mcpu setting must be symmetrical.\n+MULTILIB_OPTIONS = mcpu=gr5/mcpu=gr6\n+MULTILIB_DIRNAMES = gr5 gr6"}, {"sha": "c5b65b4be3470b7fe232c5f3a55916b036fd34e4", "filename": "gcc/config/visium/visium.h", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/175650bccaea12f90925176e48bbf324ebd4dd50/gcc%2Fconfig%2Fvisium%2Fvisium.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/175650bccaea12f90925176e48bbf324ebd4dd50/gcc%2Fconfig%2Fvisium%2Fvisium.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvisium%2Fvisium.h?ref=175650bccaea12f90925176e48bbf324ebd4dd50", "patch": "@@ -1727,3 +1727,19 @@ extern int visium_indent_opcode;\n \tvisium_indent_opcode = 0;\t\\\n       }\t\t\t\t\t\\\n   } while (0)\n+\n+/* Configure-time default values for common options.  */\n+#define OPTION_DEFAULT_SPECS { \"cpu\", \"%{!mcpu=*:-mcpu=%(VALUE)}\" }\n+\n+/* Values of TARGET_CPU_DEFAULT specified via --with-cpu.  */\n+#define TARGET_CPU_gr5\t0\n+#define TARGET_CPU_gr6\t1\n+\n+/* Default -mcpu multilib for above values.  */\n+#if TARGET_CPU_DEFAULT == TARGET_CPU_gr5\n+#define MULTILIB_DEFAULTS { \"mcpu=gr5\" }\n+#elif TARGET_CPU_DEFAULT == TARGET_CPU_gr6\n+#define MULTILIB_DEFAULTS { \"mcpu=gr6\" }\n+#else\n+#error Unrecognized value in TARGET_CPU_DEFAULT\n+#endif"}]}