{"sha": "98ee5fc4773c6c7d7d58085d0443a0634b9af809", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OThlZTVmYzQ3NzNjNmM3ZDdkNTgwODVkMDQ0M2EwNjM0YjlhZjgwOQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-10-05T09:16:23Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-10-05T09:16:23Z"}, "message": "[multiple changes]\n\n2010-10-05  Vincent Celier  <celier@adacore.com>\n\n\t* make.adb (Check): When compiling with -gnatc, recompile if the ALI\n\tfile has not been generated for the current source, for example if it\n\thas been generated for the spec, but we are compiling the body.\n\n2010-10-05  Bob Duff  <duff@adacore.com>\n\n\t* xgnatugn.adb: Remove unused procedure.\n\nFrom-SVN: r164967", "tree": {"sha": "ffe56e4eccf09211e50b9cad5464ccea1237b0b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ffe56e4eccf09211e50b9cad5464ccea1237b0b6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/98ee5fc4773c6c7d7d58085d0443a0634b9af809", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98ee5fc4773c6c7d7d58085d0443a0634b9af809", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98ee5fc4773c6c7d7d58085d0443a0634b9af809", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98ee5fc4773c6c7d7d58085d0443a0634b9af809/comments", "author": null, "committer": null, "parents": [{"sha": "de9535785cfc08047ca4f572049ab4dd4e6447f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de9535785cfc08047ca4f572049ab4dd4e6447f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de9535785cfc08047ca4f572049ab4dd4e6447f3"}], "stats": {"total": 42, "additions": 36, "deletions": 6}, "files": [{"sha": "4c5c8c8c705ab67e02f1ca2a8c9407d96184fa5d", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98ee5fc4773c6c7d7d58085d0443a0634b9af809/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98ee5fc4773c6c7d7d58085d0443a0634b9af809/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=98ee5fc4773c6c7d7d58085d0443a0634b9af809", "patch": "@@ -1,3 +1,13 @@\n+2010-10-05  Vincent Celier  <celier@adacore.com>\n+\n+\t* make.adb (Check): When compiling with -gnatc, recompile if the ALI\n+\tfile has not been generated for the current source, for example if it\n+\thas been generated for the spec, but we are compiling the body.\n+\n+2010-10-05  Bob Duff  <duff@adacore.com>\n+\n+\t* xgnatugn.adb: Remove unused procedure.\n+\n 2010-10-04  Vincent Celier  <celier@adacore.com>\n \n \t* a-direct.adb (Copy_File): Interpret the Form parameter and call"}, {"sha": "2c2489c6a37a870f52b94058c55e1069363cb811", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98ee5fc4773c6c7d7d58085d0443a0634b9af809/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98ee5fc4773c6c7d7d58085d0443a0634b9af809/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=98ee5fc4773c6c7d7d58085d0443a0634b9af809", "patch": "@@ -1658,6 +1658,32 @@ package body Make is\n             return;\n          end if;\n \n+         --  When compiling with -gnatc, don't take ALI file into account if\n+         --  it has not been generated for the current source, for example if\n+         --  it has been generated for the spec, but we are compiling the body.\n+\n+         if Operating_Mode = Check_Semantics then\n+            declare\n+               File_Name : constant String := Get_Name_String (Source_File);\n+               OK        : Boolean := False;\n+\n+            begin\n+               for U in ALIs.Table (ALI).First_Unit ..\n+                 ALIs.Table (ALI).Last_Unit\n+               loop\n+                  OK := Get_Name_String (Units.Table (U).Sfile) = File_Name;\n+                  exit when OK;\n+               end loop;\n+\n+               if not OK then\n+                  Verbose_Msg\n+                    (Full_Lib_File, \"not generated for the same source\");\n+                  ALI := No_ALI_Id;\n+                  return;\n+               end if;\n+            end;\n+         end if;\n+\n          --  Check for matching compiler switches if needed\n \n          if Check_Switches then"}, {"sha": "ab168170f0cf2f2736c565cc9fdaa00a628f3982", "filename": "gcc/ada/xgnatugn.adb", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98ee5fc4773c6c7d7d58085d0443a0634b9af809/gcc%2Fada%2Fxgnatugn.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98ee5fc4773c6c7d7d58085d0443a0634b9af809/gcc%2Fada%2Fxgnatugn.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fxgnatugn.adb?ref=98ee5fc4773c6c7d7d58085d0443a0634b9af809", "patch": "@@ -127,7 +127,6 @@ procedure Xgnatugn is\n    --  line-oriented checks (length, character set, trailing spaces).\n \n    procedure Put_Line (F : Sfile; S : String);\n-   procedure Put_Line (F : Sfile; S : VString);\n    --  Local version of Put_Line ensures Unix style line endings\n \n    Number_Of_Warnings : Natural := 0;\n@@ -369,11 +368,6 @@ procedure Xgnatugn is\n       Character'Write (Stream (F), ASCII.LF);\n    end Put_Line;\n \n-   procedure Put_Line (F : Sfile; S : VString) is\n-   begin\n-      Put_Line (F, To_String (S));\n-   end Put_Line;\n-\n    -----------\n    -- Error --\n    -----------"}]}