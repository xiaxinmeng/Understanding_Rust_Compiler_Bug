{"sha": "ce6f08888905bb217b9a4cff8a0704e240ec5c46", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2U2ZjA4ODg4OTA1YmIyMTdiOWE0Y2ZmOGEwNzA0ZTI0MGVjNWM0Ng==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2018-09-26T11:58:18Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2018-09-26T11:58:18Z"}, "message": "[PR 87347] Prevent segfaults if TYPE_ARG_TYPES is NULL\n\n2018-09-26  Martin Jambor  <mjambor@suse.cz>\n\n\tPR c/87347\n\tc/\n\t* c-parser.c (warn_for_abs): Bail out if TYPE_ARG_TYPES is NULL.  Fix\n        comment.\n\n\ttestsuite/\n\t* gcc.dg/pr87347.c: New test.\n\nFrom-SVN: r264640", "tree": {"sha": "27fced792fd811917cce17da29add793504cfcf5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27fced792fd811917cce17da29add793504cfcf5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce6f08888905bb217b9a4cff8a0704e240ec5c46", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce6f08888905bb217b9a4cff8a0704e240ec5c46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce6f08888905bb217b9a4cff8a0704e240ec5c46", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce6f08888905bb217b9a4cff8a0704e240ec5c46/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6fe0c58b9fe04b112586fe0ffecc18a24b313c50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fe0c58b9fe04b112586fe0ffecc18a24b313c50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fe0c58b9fe04b112586fe0ffecc18a24b313c50"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "1ea87b95a52375b660e8de3fe5c67f6825c56d5b", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6f08888905bb217b9a4cff8a0704e240ec5c46/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6f08888905bb217b9a4cff8a0704e240ec5c46/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=ce6f08888905bb217b9a4cff8a0704e240ec5c46", "patch": "@@ -1,3 +1,9 @@\n+2018-09-26  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR c/87347\n+\t* c-parser.c (warn_for_abs): Bail out if TYPE_ARG_TYPES is NULL.  Fix\n+        comment.\n+\n 2018-09-17  David Malcolm  <dmalcolm@redhat.com>\n \n \t* c-objc-common.c (range_label_for_type_mismatch::get_text):"}, {"sha": "1f173fc10e229e477cbd5f75ba02e6fd169b6435", "filename": "gcc/c/c-parser.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6f08888905bb217b9a4cff8a0704e240ec5c46/gcc%2Fc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6f08888905bb217b9a4cff8a0704e240ec5c46/gcc%2Fc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-parser.c?ref=ce6f08888905bb217b9a4cff8a0704e240ec5c46", "patch": "@@ -9102,8 +9102,8 @@ sizeof_ptr_memacc_comptypes (tree type1, tree type2)\n }\n \n /* Warn for patterns where abs-like function appears to be used incorrectly,\n-   gracely ignore any non-abs-like function.  The warning location should be\n-   LOC.  FNDECL is the declaration of called function, it must be a\n+   gracefully ignore any non-abs-like function.  The warning location should\n+   be LOC.  FNDECL is the declaration of called function, it must be a\n    BUILT_IN_NORMAL function.  ARG is the first and only argument of the\n    call.  */\n \n@@ -9223,6 +9223,9 @@ warn_for_abs (location_t loc, tree fndecl, tree arg)\n       return;\n     }\n \n+  if (!TYPE_ARG_TYPES (TREE_TYPE (fndecl)))\n+    return;\n+\n   tree ftype = TREE_VALUE (TYPE_ARG_TYPES (TREE_TYPE (fndecl)));\n   if (TREE_CODE (atype) == COMPLEX_TYPE)\n     {"}, {"sha": "49df3a1398b263ebadc5d71ab839e4365a1be320", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6f08888905bb217b9a4cff8a0704e240ec5c46/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6f08888905bb217b9a4cff8a0704e240ec5c46/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ce6f08888905bb217b9a4cff8a0704e240ec5c46", "patch": "@@ -1,3 +1,8 @@\n+2018-09-26  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR c/87347\n+\t* gcc.dg/pr87347.c: New test.\n+\n 2018-09-26  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/71131"}, {"sha": "d0bdf2a9fecff723fe60cc3112abe0ded1b20244", "filename": "gcc/testsuite/gcc.dg/pr87347.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce6f08888905bb217b9a4cff8a0704e240ec5c46/gcc%2Ftestsuite%2Fgcc.dg%2Fpr87347.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce6f08888905bb217b9a4cff8a0704e240ec5c46/gcc%2Ftestsuite%2Fgcc.dg%2Fpr87347.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr87347.c?ref=ce6f08888905bb217b9a4cff8a0704e240ec5c46", "patch": "@@ -0,0 +1,6 @@\n+/* {dg-do compile} */\n+/* { dg-options \"-Wabsolute-value\" } */\n+\n+int a;\n+int abs();\n+void b() { abs(a); }"}]}