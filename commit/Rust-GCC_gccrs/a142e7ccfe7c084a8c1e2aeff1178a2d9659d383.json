{"sha": "a142e7ccfe7c084a8c1e2aeff1178a2d9659d383", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTE0MmU3Y2NmZTdjMDg0YThjMWUyYWVmZjExNzhhMmQ5NjU5ZDM4Mw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-05-09T15:44:43Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-05-09T15:44:43Z"}, "message": "(__objc_send_initialize): Call superclass if object does not implement\n+initialize.\n\nFrom-SVN: r9597", "tree": {"sha": "0f85d0d9412c12fe24b5c8c105652ab9c20965e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f85d0d9412c12fe24b5c8c105652ab9c20965e8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a142e7ccfe7c084a8c1e2aeff1178a2d9659d383", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a142e7ccfe7c084a8c1e2aeff1178a2d9659d383", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a142e7ccfe7c084a8c1e2aeff1178a2d9659d383", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a142e7ccfe7c084a8c1e2aeff1178a2d9659d383/comments", "author": null, "committer": null, "parents": [{"sha": "fa1b14518ae876a297be40bfa169e8f70df7aa2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa1b14518ae876a297be40bfa169e8f70df7aa2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa1b14518ae876a297be40bfa169e8f70df7aa2c"}], "stats": {"total": 36, "additions": 21, "deletions": 15}, "files": [{"sha": "9f52c8d7f23b040e3822d56228dda2502bb4c314", "filename": "gcc/objc/sendmsg.c", "status": "modified", "additions": 21, "deletions": 15, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a142e7ccfe7c084a8c1e2aeff1178a2d9659d383/gcc%2Fobjc%2Fsendmsg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a142e7ccfe7c084a8c1e2aeff1178a2d9659d383/gcc%2Fobjc%2Fsendmsg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fsendmsg.c?ref=a142e7ccfe7c084a8c1e2aeff1178a2d9659d383", "patch": "@@ -236,28 +236,34 @@ static void __objc_send_initialize(Class class)\n \t__objc_send_initialize(class->super_class);\n \n       {\n-\tMethodList_t method_list = class->class_pointer->methods;\n-\tSEL op = sel_register_name (\"initialize\");\n+\tSEL \top = sel_register_name (\"initialize\");\n+\tClass\ttmpclass = class;\n+\tIMP\timp = 0;\n \n-\t/* If not found then we'll search the list.  */\n-\twhile (method_list)\n-\t  {\n+\twhile (!imp && tmpclass) {\n+\t  MethodList_t method_list = tmpclass->class_pointer->methods;\n+\n+\t  while(!imp && method_list) {\n \t    int i;\n+\t    Method_t method;\n \n-\t    /* Search the method list.  */\n-\t    for (i = 0; i < method_list->method_count; ++i)\n-\t      {\n-\t\tMethod_t method = &method_list->method_list[i];\n-\t\t\n-\t\t\n-\t\tif (method->method_name->sel_id == op->sel_id)\n-\t\t  (*method->method_imp)((id) class, op);\n+\t    for (i=0;i<method_list->method_count;i++) {\n+\t      method = &(method_list->method_list[i]);\n+\t      if (method->method_name->sel_id == op->sel_id) {\n+\t        imp = method->method_imp;\n+\t        break;\n \t      }\n+\t    }\n \n-\t    /* The method wasn't found.  Follow the link to the next list of\n-\t       methods.  */\n \t    method_list = method_list->method_next;\n+\n \t  }\n+\n+\t  tmpclass = tmpclass->super_class;\n+\t}\n+\tif (imp)\n+\t    (*imp)((id)class, op);\n+\t\t\n       }\n     }\n }  "}]}