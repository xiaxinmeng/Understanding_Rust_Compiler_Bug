{"sha": "5128f8d0d99008d4f069bbaef9ee4372fe5da7ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTEyOGY4ZDBkOTkwMDhkNGYwNjliYmFlZjllZTQzNzJmZTVkYTdjZQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@golang.org", "date": "2020-12-16T05:52:23Z"}, "committer": {"name": "Ian Lance Taylor", "email": "iant@golang.org", "date": "2020-12-18T23:56:20Z"}, "message": "compiler: check for floating-point exponent overflow\n\nAdjust mksysinfo and mkrsysinfo to strip out floating-point max numbers,\nas they can trigger this error.\n\nReviewed-on: https://go-review.googlesource.com/c/gofrontend/+/278476", "tree": {"sha": "a350c80e42f75a90a6ae1196c99486b14df5c1f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a350c80e42f75a90a6ae1196c99486b14df5c1f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/comments", "author": {"login": "ianlancetaylor", "id": 3194333, "node_id": "MDQ6VXNlcjMxOTQzMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/3194333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianlancetaylor", "html_url": "https://github.com/ianlancetaylor", "followers_url": "https://api.github.com/users/ianlancetaylor/followers", "following_url": "https://api.github.com/users/ianlancetaylor/following{/other_user}", "gists_url": "https://api.github.com/users/ianlancetaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianlancetaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianlancetaylor/subscriptions", "organizations_url": "https://api.github.com/users/ianlancetaylor/orgs", "repos_url": "https://api.github.com/users/ianlancetaylor/repos", "events_url": "https://api.github.com/users/ianlancetaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/ianlancetaylor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ianlancetaylor", "id": 3194333, "node_id": "MDQ6VXNlcjMxOTQzMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/3194333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianlancetaylor", "html_url": "https://github.com/ianlancetaylor", "followers_url": "https://api.github.com/users/ianlancetaylor/followers", "following_url": "https://api.github.com/users/ianlancetaylor/following{/other_user}", "gists_url": "https://api.github.com/users/ianlancetaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianlancetaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianlancetaylor/subscriptions", "organizations_url": "https://api.github.com/users/ianlancetaylor/orgs", "repos_url": "https://api.github.com/users/ianlancetaylor/repos", "events_url": "https://api.github.com/users/ianlancetaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/ianlancetaylor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0e9f2b2dc8df91be27acc383c63f0feae28fa229", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e9f2b2dc8df91be27acc383c63f0feae28fa229", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e9f2b2dc8df91be27acc383c63f0feae28fa229"}], "stats": {"total": 34, "additions": 22, "deletions": 12}, "files": [{"sha": "40242cc6a3f3037f990588fe7ad20ede9e6f432f", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=5128f8d0d99008d4f069bbaef9ee4372fe5da7ce", "patch": "@@ -1,4 +1,4 @@\n-526037336231593939a517b7c0b2892d413adb40\n+1317de50147304a226b3ec5c4d81376470c358e5\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "0baf4e4e24b0b0213c085b2bc9b5a4292ca36895", "filename": "gcc/go/gofrontend/lex.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/gcc%2Fgo%2Fgofrontend%2Flex.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/gcc%2Fgo%2Fgofrontend%2Flex.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Flex.cc?ref=5128f8d0d99008d4f069bbaef9ee4372fe5da7ce", "patch": "@@ -1316,9 +1316,13 @@ Lex::gather_number()\n \t}\n     }\n \n+  mpfr_clear_overflow();\n   mpfr_t val;\n   int r = mpfr_init_set_str(val, num.c_str(), base, MPFR_RNDN);\n   go_assert(r == 0);\n+  if (mpfr_overflow_p())\n+    go_error_at(this->location(),\n+\t\t\"floating-point exponent too large to represent\");\n \n   bool is_imaginary = *p == 'i';\n   if (is_imaginary)"}, {"sha": "b5f933bfea1153c37c28ee3b4c5f897f18b36f06", "filename": "gcc/testsuite/go.test/test/fixedbugs/issue11326b.go", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/gcc%2Ftestsuite%2Fgo.test%2Ftest%2Ffixedbugs%2Fissue11326b.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/gcc%2Ftestsuite%2Fgo.test%2Ftest%2Ffixedbugs%2Fissue11326b.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgo.test%2Ftest%2Ffixedbugs%2Fissue11326b.go?ref=5128f8d0d99008d4f069bbaef9ee4372fe5da7ce", "patch": "@@ -1,5 +1,9 @@\n // run\n \n+// Does not work with gccgo, which uses a smaller (but still permitted)\n+// exponent size.\n+// +build !gccgo\n+\n // Copyright 2015 The Go Authors. All rights reserved.\n // Use of this source code is governed by a BSD-style\n // license that can be found in the LICENSE file."}, {"sha": "9069412ffa6234d14fa96fe75230ea27f783d82a", "filename": "gcc/testsuite/go.test/test/fixedbugs/issue13471.go", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/gcc%2Ftestsuite%2Fgo.test%2Ftest%2Ffixedbugs%2Fissue13471.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/gcc%2Ftestsuite%2Fgo.test%2Ftest%2Ffixedbugs%2Fissue13471.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgo.test%2Ftest%2Ffixedbugs%2Fissue13471.go?ref=5128f8d0d99008d4f069bbaef9ee4372fe5da7ce", "patch": "@@ -9,17 +9,17 @@\n package main\n \n func main() {\n-\tconst _ int64 = 1e646456992 // ERROR \"integer too large|floating-point constant truncated to integer\"\n-\tconst _ int32 = 1e64645699  // ERROR \"integer too large|floating-point constant truncated to integer\"\n-\tconst _ int16 = 1e6464569   // ERROR \"integer too large|floating-point constant truncated to integer\"\n-\tconst _ int8 = 1e646456     // ERROR \"integer too large|floating-point constant truncated to integer\"\n-\tconst _ int = 1e64645       // ERROR \"integer too large|floating-point constant truncated to integer\"\n+\tconst _ int64 = 1e646456992 // ERROR \"integer too large|floating-point constant truncated to integer|exponent too large\"\n+\tconst _ int32 = 1e64645699  // ERROR \"integer too large|floating-point constant truncated to integer|exponent too large\"\n+\tconst _ int16 = 1e6464569   // ERROR \"integer too large|floating-point constant truncated to integer|exponent too large\"\n+\tconst _ int8 = 1e646456     // ERROR \"integer too large|floating-point constant truncated to integer|exponent too large\"\n+\tconst _ int = 1e64645       // ERROR \"integer too large|floating-point constant truncated to integer|exponent too large\"\n \n-\tconst _ uint64 = 1e646456992 // ERROR \"integer too large|floating-point constant truncated to integer\"\n-\tconst _ uint32 = 1e64645699  // ERROR \"integer too large|floating-point constant truncated to integer\"\n-\tconst _ uint16 = 1e6464569   // ERROR \"integer too large|floating-point constant truncated to integer\"\n-\tconst _ uint8 = 1e646456     // ERROR \"integer too large|floating-point constant truncated to integer\"\n-\tconst _ uint = 1e64645       // ERROR \"integer too large|floating-point constant truncated to integer\"\n+\tconst _ uint64 = 1e646456992 // ERROR \"integer too large|floating-point constant truncated to integer|exponent too large\"\n+\tconst _ uint32 = 1e64645699  // ERROR \"integer too large|floating-point constant truncated to integer|exponent too large\"\n+\tconst _ uint16 = 1e6464569   // ERROR \"integer too large|floating-point constant truncated to integer|exponent too large\"\n+\tconst _ uint8 = 1e646456     // ERROR \"integer too large|floating-point constant truncated to integer|exponent too large\"\n+\tconst _ uint = 1e64645       // ERROR \"integer too large|floating-point constant truncated to integer|exponent too large\"\n \n-\tconst _ rune = 1e64645 // ERROR \"integer too large|floating-point constant truncated to integer\"\n+\tconst _ rune = 1e64645 // ERROR \"integer too large|floating-point constant truncated to integer|exponent too large\"\n }"}, {"sha": "e016ca4dc597ee7c72d245d549b59177469de254", "filename": "libgo/mkrsysinfo.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/libgo%2Fmkrsysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/libgo%2Fmkrsysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmkrsysinfo.sh?ref=5128f8d0d99008d4f069bbaef9ee4372fe5da7ce", "patch": "@@ -26,6 +26,7 @@ grep -v '^// ' gen-sysinfo.go | \\\n   grep -v '^type _*locale[_ ]' | \\\n   grep -v 'in6_addr' | \\\n   grep -v 'sockaddr_in6' | \\\n+  egrep -v '^const _*FLT(64|128)_(NORM_)?MAX' | \\\n   sed -e 's/\\([^a-zA-Z0-9_]\\)_timeval\\([^a-zA-Z0-9_]\\)/\\1timeval\\2/g' \\\n       -e 's/\\([^a-zA-Z0-9_]\\)_timespec_t\\([^a-zA-Z0-9_]\\)/\\1timespec\\2/g' \\\n       -e 's/\\([^a-zA-Z0-9_]\\)_timespec\\([^a-zA-Z0-9_]\\)/\\1timespec\\2/g' \\"}, {"sha": "24d4ce2df6bdbef105c3193d93f83e2cdc9c12f6", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5128f8d0d99008d4f069bbaef9ee4372fe5da7ce/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=5128f8d0d99008d4f069bbaef9ee4372fe5da7ce", "patch": "@@ -38,6 +38,7 @@ grep -v '^// ' gen-sysinfo.go | \\\n   grep -v '^type _*locale[_ ]' | \\\n   grep -v 'in6_addr' | \\\n   grep -v 'sockaddr_in6' | \\\n+  egrep -v '^const _*FLT(64|128)_(NORM_)?MAX' | \\\n   sed -e 's/\\([^a-zA-Z0-9_]\\)_timeval\\([^a-zA-Z0-9_]\\)/\\1Timeval\\2/g' \\\n       -e 's/\\([^a-zA-Z0-9_]\\)_timespec_t\\([^a-zA-Z0-9_]\\)/\\1Timespec\\2/g' \\\n       -e 's/\\([^a-zA-Z0-9_]\\)_timespec\\([^a-zA-Z0-9_]\\)/\\1Timespec\\2/g' \\"}]}