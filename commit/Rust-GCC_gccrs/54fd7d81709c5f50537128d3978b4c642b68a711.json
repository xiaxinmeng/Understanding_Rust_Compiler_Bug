{"sha": "54fd7d81709c5f50537128d3978b4c642b68a711", "node_id": "C_kwDOANBUbNoAKDU0ZmQ3ZDgxNzA5YzVmNTA1MzcxMjhkMzk3OGI0YzY0MmI2OGE3MTE", "commit": {"author": {"name": "Arsen Arsenovi\u0107", "email": "arsen@aarsen.me", "date": "2022-09-28T19:30:11Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-10-03T14:43:49Z"}, "message": "libstdc++: Re-enable std::hash<std::bitset> in freestanding [PR103626]\n\nPR libstdc++/103626 - _GLIBCXX_HOSTED should respect -ffreestanding\n\nlibstdc++-v3/ChangeLog:\n\n\tPR libstdc++/103626\n\t* include/std/bitset [!_GLIBCXX_HOSTED]: Re-enable std::hash.\n\t* testsuite/20_util/bitset/cons/constexpr_c++23.cc: Require ET\n\thosted.\n\t* testsuite/20_util/bitset/ext/constexpr.cc: Likewise.", "tree": {"sha": "69f9f30d6cf6710979c5259dcadc1550e276a109", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/69f9f30d6cf6710979c5259dcadc1550e276a109"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54fd7d81709c5f50537128d3978b4c642b68a711", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54fd7d81709c5f50537128d3978b4c642b68a711", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54fd7d81709c5f50537128d3978b4c642b68a711", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54fd7d81709c5f50537128d3978b4c642b68a711/comments", "author": {"login": "ArsenArsen", "id": 7805050, "node_id": "MDQ6VXNlcjc4MDUwNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7805050?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArsenArsen", "html_url": "https://github.com/ArsenArsen", "followers_url": "https://api.github.com/users/ArsenArsen/followers", "following_url": "https://api.github.com/users/ArsenArsen/following{/other_user}", "gists_url": "https://api.github.com/users/ArsenArsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArsenArsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArsenArsen/subscriptions", "organizations_url": "https://api.github.com/users/ArsenArsen/orgs", "repos_url": "https://api.github.com/users/ArsenArsen/repos", "events_url": "https://api.github.com/users/ArsenArsen/events{/privacy}", "received_events_url": "https://api.github.com/users/ArsenArsen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "25ebfdb774c0e8cc6c55e02644ee2cb157ce29d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25ebfdb774c0e8cc6c55e02644ee2cb157ce29d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/25ebfdb774c0e8cc6c55e02644ee2cb157ce29d7"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "10fb05a1b9027e49e0d925f2ca4623bad836768c", "filename": "libstdc++-v3/include/std/bitset", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54fd7d81709c5f50537128d3978b4c642b68a711/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54fd7d81709c5f50537128d3978b4c642b68a711/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset?ref=54fd7d81709c5f50537128d3978b4c642b68a711", "patch": "@@ -52,9 +52,10 @@\n # include <string>\n # include <iosfwd>\n # include <bits/cxxabi_forced.h>\n-# if __cplusplus >= 201103L\n-#  include <bits/functional_hash.h>\n-# endif\n+#endif\n+\n+#if __cplusplus >= 201103L\n+# include <bits/functional_hash.h>\n #endif\n \n #define _GLIBCXX_BITSET_BITS_PER_WORD  (__CHAR_BIT__ * __SIZEOF_LONG__)\n@@ -1664,7 +1665,7 @@ _GLIBCXX_END_NAMESPACE_CONTAINER\n #undef _GLIBCXX_BITSET_BITS_PER_WORD\n #undef _GLIBCXX_BITSET_BITS_PER_ULL\n \n-#if __cplusplus >= 201103L && _GLIBCXX_HOSTED\n+#if __cplusplus >= 201103L\n \n namespace std _GLIBCXX_VISIBILITY(default)\n {"}, {"sha": "d308c2b2f10d08eaa151fd48a208c572dcd09db8", "filename": "libstdc++-v3/testsuite/20_util/bitset/cons/constexpr_c++23.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54fd7d81709c5f50537128d3978b4c642b68a711/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbitset%2Fcons%2Fconstexpr_c%2B%2B23.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54fd7d81709c5f50537128d3978b4c642b68a711/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbitset%2Fcons%2Fconstexpr_c%2B%2B23.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbitset%2Fcons%2Fconstexpr_c%2B%2B23.cc?ref=54fd7d81709c5f50537128d3978b4c642b68a711", "patch": "@@ -1,5 +1,7 @@\n // { dg-options \"-std=gnu++23\" }\n // { dg-do compile { target c++23 } }\n+// This test relies on std::string.\n+// { dg-require-effective-target hosted }\n \n #include <bitset>\n "}, {"sha": "4bacefad14ad7f6d7688700b55053adfe06684eb", "filename": "libstdc++-v3/testsuite/20_util/bitset/ext/constexpr.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54fd7d81709c5f50537128d3978b4c642b68a711/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbitset%2Fext%2Fconstexpr.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54fd7d81709c5f50537128d3978b4c642b68a711/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbitset%2Fext%2Fconstexpr.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbitset%2Fext%2Fconstexpr.cc?ref=54fd7d81709c5f50537128d3978b4c642b68a711", "patch": "@@ -1,5 +1,7 @@\n // { dg-options \"-std=gnu++23\" }\n // { dg-do compile { target c++23 } }\n+// This test relies on std::string.\n+// { dg-require-effective-target hosted }\n \n #include <bitset>\n #include <testsuite_hooks.h>"}]}