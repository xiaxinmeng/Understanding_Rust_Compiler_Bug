{"sha": "9c349a39eb5b2466b60a0be488a0c55bbf7915b2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWMzNDlhMzllYjViMjQ2NmI2MGEwYmU0ODhhMGM1NWJiZjc5MTViMg==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@gmail.com", "date": "2008-03-26T03:19:58Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2008-03-26T03:19:58Z"}, "message": "re PR objc/29197 (ICE after error with array type with undefined variable)\n\n2008-03-25  Andrew Pinski  <pinskia@gmail.com>\n\n        PR objc/29197\n        * objc-act.c (encode_type): Handle when type is error_mark_node.\n        (objc_push_parm): Handle when the type of parm is error_mark_node.\n\n2008-03-25  Andrew Pinski  <pinskia@gmail.com>\n\n        PR objc/29197\n        * objc.dg/method-20.m: New testcase.\n\nFrom-SVN: r133540", "tree": {"sha": "f670c74040d2bd7c9bc34b8ce4221f2debfbe61a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f670c74040d2bd7c9bc34b8ce4221f2debfbe61a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c349a39eb5b2466b60a0be488a0c55bbf7915b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c349a39eb5b2466b60a0be488a0c55bbf7915b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c349a39eb5b2466b60a0be488a0c55bbf7915b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c349a39eb5b2466b60a0be488a0c55bbf7915b2/comments", "author": {"login": "pinskia", "id": 8496799, "node_id": "MDQ6VXNlcjg0OTY3OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8496799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pinskia", "html_url": "https://github.com/pinskia", "followers_url": "https://api.github.com/users/pinskia/followers", "following_url": "https://api.github.com/users/pinskia/following{/other_user}", "gists_url": "https://api.github.com/users/pinskia/gists{/gist_id}", "starred_url": "https://api.github.com/users/pinskia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pinskia/subscriptions", "organizations_url": "https://api.github.com/users/pinskia/orgs", "repos_url": "https://api.github.com/users/pinskia/repos", "events_url": "https://api.github.com/users/pinskia/events{/privacy}", "received_events_url": "https://api.github.com/users/pinskia/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0f9c821f73c3aa06933f94c4974b42db9a049da8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f9c821f73c3aa06933f94c4974b42db9a049da8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f9c821f73c3aa06933f94c4974b42db9a049da8"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "7584ed19d96cb58325985d119374c66310c81fea", "filename": "gcc/objc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c349a39eb5b2466b60a0be488a0c55bbf7915b2/gcc%2Fobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c349a39eb5b2466b60a0be488a0c55bbf7915b2/gcc%2Fobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2FChangeLog?ref=9c349a39eb5b2466b60a0be488a0c55bbf7915b2", "patch": "@@ -1,3 +1,9 @@\n+2008-03-25  Andrew Pinski  <pinskia@gmail.com>\n+\n+\tPR objc/29197\n+\t* objc-act.c (encode_type): Handle when type is error_mark_node.\n+\t(objc_push_parm): Handle when the type of parm is error_mark_node.\n+\n 2008-03-25  Tom Tromey  <tromey@redhat.com>\n \n \t* Make-lang.in (objc_OBJS): New variable."}, {"sha": "48bf974fb3631f63bd6631bc9d97fe3de8a8aec1", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c349a39eb5b2466b60a0be488a0c55bbf7915b2/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c349a39eb5b2466b60a0be488a0c55bbf7915b2/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=9c349a39eb5b2466b60a0be488a0c55bbf7915b2", "patch": "@@ -8075,6 +8075,9 @@ encode_type (tree type, int curtype, int format)\n   enum tree_code code = TREE_CODE (type);\n   char c;\n \n+  if (type == error_mark_node)\n+    return;\n+\n   if (TYPE_READONLY (type))\n     obstack_1grow (&util_obstack, 'r');\n \n@@ -8231,6 +8234,13 @@ static void\n objc_push_parm (tree parm)\n {\n   bool relayout_needed = false;\n+\n+  if (TREE_TYPE (parm) == error_mark_node)\n+    {\n+      objc_parmlist = chainon (objc_parmlist, parm);\n+      return;\n+    }\n+\n   /* Decay arrays and functions into pointers.  */\n   if (TREE_CODE (TREE_TYPE (parm)) == ARRAY_TYPE)\n     {"}, {"sha": "8ba4e6e9dcc8974a6d8dfd1e1e30602ca129333b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c349a39eb5b2466b60a0be488a0c55bbf7915b2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c349a39eb5b2466b60a0be488a0c55bbf7915b2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9c349a39eb5b2466b60a0be488a0c55bbf7915b2", "patch": "@@ -1,3 +1,8 @@\n+2008-03-25  Andrew Pinski  <pinskia@gmail.com>\n+\n+\tPR objc/29197\n+\t* objc.dg/method-20.m: New testcase.\n+\t\n 2008-03-25  Richard Sandiford  <rsandifo@nildram.co.uk>\n \n \tPR rtl-optimization/35232"}, {"sha": "653e047281d4d1ed9eeb40f46f1d508487d74d8b", "filename": "gcc/testsuite/objc.dg/method-20.m", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c349a39eb5b2466b60a0be488a0c55bbf7915b2/gcc%2Ftestsuite%2Fobjc.dg%2Fmethod-20.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c349a39eb5b2466b60a0be488a0c55bbf7915b2/gcc%2Ftestsuite%2Fobjc.dg%2Fmethod-20.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fmethod-20.m?ref=9c349a39eb5b2466b60a0be488a0c55bbf7915b2", "patch": "@@ -0,0 +1,8 @@\n+/* { dg-do compile }  */\n+\n+/* We used to crash after we found the type for int[m] was declared as invalid. */\n+/* PR objc/29197 */\n+\n+@ implementation NGActiveSocket\n++ (void) socketPair:(int[m]) _pair {} /* { dg-error \"\" } */\n+@end"}]}