{"sha": "60674b3f8aca8f2b41580ce06b44117a9e6ab52e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjA2NzRiM2Y4YWNhOGYyYjQxNTgwY2UwNmI0NDExN2E5ZTZhYjUyZQ==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2019-09-28T19:14:47Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2019-09-28T19:14:47Z"}, "message": "re PR libfortran/91593 (Implicit enum conversions in libgfortran/io/transfer.c)\n\n2019-09-28  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libfortran/91593\n\t* io/io.h: Add gcc_unreachable().\n\t* io/transfer.c (file_mode, current_mode,\n\tformatted_transfer_scalar_read, formatted_transfer_scalar_write,\n\tpre_position, next_record_r, next_record_w): Add and use\n\tFORMATTED_UNSPECIFIED to enumeration.\n\nFrom-SVN: r276255", "tree": {"sha": "0c715004b955c23b1d7be4dc5affc53b79b740b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c715004b955c23b1d7be4dc5affc53b79b740b6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/60674b3f8aca8f2b41580ce06b44117a9e6ab52e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60674b3f8aca8f2b41580ce06b44117a9e6ab52e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60674b3f8aca8f2b41580ce06b44117a9e6ab52e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60674b3f8aca8f2b41580ce06b44117a9e6ab52e/comments", "author": null, "committer": null, "parents": [{"sha": "4c59710186081ed4b2d34ccda1190d43454543db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c59710186081ed4b2d34ccda1190d43454543db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c59710186081ed4b2d34ccda1190d43454543db"}], "stats": {"total": 33, "additions": 25, "deletions": 8}, "files": [{"sha": "e2c65075aa89b0eb19467eb1f2439bce2253eb1c", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60674b3f8aca8f2b41580ce06b44117a9e6ab52e/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60674b3f8aca8f2b41580ce06b44117a9e6ab52e/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=60674b3f8aca8f2b41580ce06b44117a9e6ab52e", "patch": "@@ -1,3 +1,12 @@\n+2019-09-28  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libfortran/91593\n+\t* io/io.h: Add gcc_unreachable().\n+\t* io/transfer.c (file_mode, current_mode,\n+\tformatted_transfer_scalar_read, formatted_transfer_scalar_write,\n+\tpre_position, next_record_r, next_record_w): Add and use\n+\tFORMATTED_UNSPECIFIED to enumeration.\n+\t\n 2019-09-27  Maciej W. Rozycki  <macro@wdc.com>\n \n \t* configure: Regenerate."}, {"sha": "bcd6dde9a5b83d4d87ad147a6b74ec42fe245e6d", "filename": "libgfortran/io/io.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60674b3f8aca8f2b41580ce06b44117a9e6ab52e/libgfortran%2Fio%2Fio.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60674b3f8aca8f2b41580ce06b44117a9e6ab52e/libgfortran%2Fio%2Fio.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Fio.h?ref=60674b3f8aca8f2b41580ce06b44117a9e6ab52e", "patch": "@@ -32,6 +32,7 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n \n #include <gthr.h>\n \n+#define gcc_unreachable() __builtin_unreachable ()\n \n /* POSIX 2008 specifies that the extended locale stuff is found in\n    locale.h, but some systems have them in xlocale.h.  */"}, {"sha": "4c5e210ce5a0c6d3e1bdead52550d34dd64cf6fa", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 15, "deletions": 8, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60674b3f8aca8f2b41580ce06b44117a9e6ab52e/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60674b3f8aca8f2b41580ce06b44117a9e6ab52e/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=60674b3f8aca8f2b41580ce06b44117a9e6ab52e", "patch": "@@ -193,7 +193,8 @@ static const st_option async_opt[] = {\n \n typedef enum\n { FORMATTED_SEQUENTIAL, UNFORMATTED_SEQUENTIAL,\n-  FORMATTED_DIRECT, UNFORMATTED_DIRECT, FORMATTED_STREAM, UNFORMATTED_STREAM\n+  FORMATTED_DIRECT, UNFORMATTED_DIRECT, FORMATTED_STREAM,\n+  UNFORMATTED_STREAM, FORMATTED_UNSPECIFIED\n }\n file_mode;\n \n@@ -203,7 +204,7 @@ current_mode (st_parameter_dt *dtp)\n {\n   file_mode m;\n \n-  m = FORM_UNSPECIFIED;\n+  m = FORMATTED_UNSPECIFIED;\n \n   if (dtp->u.p.current_unit->flags.access == ACCESS_DIRECT)\n     {\n@@ -1727,17 +1728,17 @@ formatted_transfer_scalar_read (st_parameter_dt *dtp, bt type, void *p, int kind\n \n \tcase FMT_S:\n \t  consume_data_flag = 0;\n-\t  dtp->u.p.sign_status = SIGN_S;\n+\t  dtp->u.p.sign_status = SIGN_PROCDEFINED;\n \t  break;\n \n \tcase FMT_SS:\n \t  consume_data_flag = 0;\n-\t  dtp->u.p.sign_status = SIGN_SS;\n+\t  dtp->u.p.sign_status = SIGN_SUPPRESS;\n \t  break;\n \n \tcase FMT_SP:\n \t  consume_data_flag = 0;\n-\t  dtp->u.p.sign_status = SIGN_SP;\n+\t  dtp->u.p.sign_status = SIGN_PLUS;\n \t  break;\n \n \tcase FMT_BN:\n@@ -2186,17 +2187,17 @@ formatted_transfer_scalar_write (st_parameter_dt *dtp, bt type, void *p, int kin\n \n \tcase FMT_S:\n \t  consume_data_flag = 0;\n-\t  dtp->u.p.sign_status = SIGN_S;\n+\t  dtp->u.p.sign_status = SIGN_PROCDEFINED;\n \t  break;\n \n \tcase FMT_SS:\n \t  consume_data_flag = 0;\n-\t  dtp->u.p.sign_status = SIGN_SS;\n+\t  dtp->u.p.sign_status = SIGN_SUPPRESS;\n \t  break;\n \n \tcase FMT_SP:\n \t  consume_data_flag = 0;\n-\t  dtp->u.p.sign_status = SIGN_SP;\n+\t  dtp->u.p.sign_status = SIGN_PLUS;\n \t  break;\n \n \tcase FMT_BN:\n@@ -2766,6 +2767,8 @@ pre_position (st_parameter_dt *dtp)\n     case UNFORMATTED_DIRECT:\n       dtp->u.p.current_unit->bytes_left = dtp->u.p.current_unit->recl;\n       break;\n+    case FORMATTED_UNSPECIFIED:\n+      gcc_unreachable ();\n     }\n \n   dtp->u.p.current_unit->current_record = 1;\n@@ -3637,6 +3640,8 @@ next_record_r (st_parameter_dt *dtp, int done)\n \t  while (p != '\\n');\n \t}\n       break;\n+    case FORMATTED_UNSPECIFIED:\n+      gcc_unreachable ();\n     }\n }\n \n@@ -4002,6 +4007,8 @@ next_record_w (st_parameter_dt *dtp, int done)\n \t}\n \n       break;\n+    case FORMATTED_UNSPECIFIED:\n+      gcc_unreachable ();\n \n     io_error:\n       generate_error (&dtp->common, LIBERROR_OS, NULL);"}]}