{"sha": "bff4226f5a01da2f93d4e096a1c9317a553438a3", "node_id": "C_kwDOANBUbNoAKGJmZjQyMjZmNWEwMWRhMmY5M2Q0ZTA5NmExYzkzMTdhNTUzNDM4YTM", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-01-03T16:16:26Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-01-11T22:49:48Z"}, "message": "libquadmath: Use -mno-gnu-attribute in libquadmath\n\nTesting found that we also need libquadmath to be built with\n-mno-gnu-attribute, otherwise -mabi=ieeelongdouble programs don't link.\n\n2022-01-03  Jakub Jelinek  <jakub@redhat.com>\n\n\t* configure.ac: Set XCFLAGS to -mno-gnu-attribute on\n\tpowerpc64le*-linux*.\n\t* configure: Regenerated.", "tree": {"sha": "500e97e590aa0d41558a0e3b3d25e2fe4d34e3e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/500e97e590aa0d41558a0e3b3d25e2fe4d34e3e8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bff4226f5a01da2f93d4e096a1c9317a553438a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bff4226f5a01da2f93d4e096a1c9317a553438a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bff4226f5a01da2f93d4e096a1c9317a553438a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bff4226f5a01da2f93d4e096a1c9317a553438a3/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a8fea8cd861d9484eb825a11264812bfe193f8ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8fea8cd861d9484eb825a11264812bfe193f8ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8fea8cd861d9484eb825a11264812bfe193f8ee"}], "stats": {"total": 37, "additions": 37, "deletions": 0}, "files": [{"sha": "b3ee64f9c7de77e33af54d96d5d32f03dcd3a76b", "filename": "libquadmath/configure", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bff4226f5a01da2f93d4e096a1c9317a553438a3/libquadmath%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bff4226f5a01da2f93d4e096a1c9317a553438a3/libquadmath%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libquadmath%2Fconfigure?ref=bff4226f5a01da2f93d4e096a1c9317a553438a3", "patch": "@@ -13096,6 +13096,30 @@ fi\n \n XCFLAGS=\"$XCFLAGS $CET_FLAGS\"\n \n+case x$target in\n+  xpowerpc64le*-linux*)\n+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#if __SIZEOF_LONG_DOUBLE__ != 16\n+                         #error long double is double\n+                         #endif\n+int\n+main ()\n+{\n+(void) 0;\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_cpp \"$LINENO\"; then :\n+  XCFLAGS=\"$XCFLAGS -mno-gnu-attribute\"\n+fi\n+rm -f conftest.err conftest.i conftest.$ac_ext\n+    ;;\n+  *)\n+    ;;\n+esac\n+\n \n cat >confcache <<\\_ACEOF\n # This file is a shell script that caches the results of configure"}, {"sha": "eec4084a45f62226671197bd5c6949002a599fa2", "filename": "libquadmath/configure.ac", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bff4226f5a01da2f93d4e096a1c9317a553438a3/libquadmath%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bff4226f5a01da2f93d4e096a1c9317a553438a3/libquadmath%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libquadmath%2Fconfigure.ac?ref=bff4226f5a01da2f93d4e096a1c9317a553438a3", "patch": "@@ -352,6 +352,19 @@ fi\n # Add CET specific flags if CET is enabled\n GCC_CET_FLAGS(CET_FLAGS)\n XCFLAGS=\"$XCFLAGS $CET_FLAGS\"\n+\n+case x$target in\n+  xpowerpc64le*-linux*)\n+    AC_PREPROC_IFELSE(\n+      [AC_LANG_PROGRAM([[#if __SIZEOF_LONG_DOUBLE__ != 16\n+                         #error long double is double\n+                         #endif]],\n+                       [[(void) 0;]])],\n+      [XCFLAGS=\"$XCFLAGS -mno-gnu-attribute\"])\n+    ;;\n+  *)\n+    ;;\n+esac\n AC_SUBST(XCFLAGS)\n \n AC_CACHE_SAVE"}]}