{"sha": "8e974c0eba3197a920a9cdfba1243f2cb8963b03", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGU5NzRjMGViYTMxOTdhOTIwYTljZGZiYTEyNDNmMmNiODk2M2IwMw==", "commit": {"author": {"name": "Per Bothner", "email": "pbothner@apple.com", "date": "2003-11-01T03:19:59Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "2003-11-01T03:19:59Z"}, "message": "c-opts.c (finish_options): Change to returns boolean - false iff the call to cpp_find_main_file fails.\n\n\n\t* c-opts.c (finish_options):  Change to returns boolean - false iff\n\tthe call to cpp_find_main_file fails.\n\t(c_common_init):  Skip preprocess_file if finish_options failed.\n\t(c_common_parse_file):  Break if finish_options failed.\n\nFrom-SVN: r73170", "tree": {"sha": "41415caad9e50c09c36657a0aef8906cbc763069", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/41415caad9e50c09c36657a0aef8906cbc763069"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8e974c0eba3197a920a9cdfba1243f2cb8963b03", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e974c0eba3197a920a9cdfba1243f2cb8963b03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e974c0eba3197a920a9cdfba1243f2cb8963b03", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e974c0eba3197a920a9cdfba1243f2cb8963b03/comments", "author": null, "committer": null, "parents": [{"sha": "e31f8eda092b52f32ef920253f92396a51ed0292", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e31f8eda092b52f32ef920253f92396a51ed0292", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e31f8eda092b52f32ef920253f92396a51ed0292"}], "stats": {"total": 24, "additions": 17, "deletions": 7}, "files": [{"sha": "6f9247fcdc667eed2425ee402c3b6a701a08858f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e974c0eba3197a920a9cdfba1243f2cb8963b03/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e974c0eba3197a920a9cdfba1243f2cb8963b03/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8e974c0eba3197a920a9cdfba1243f2cb8963b03", "patch": "@@ -1,3 +1,10 @@\n+2003-10-31  Per Bothner  <pbothner@apple.com>\n+\n+\t* c-opts.c (finish_options):  Change to returns boolean - false iff\n+\tthe call to cpp_find_main_file fails.\n+\t(c_common_init):  Skip preprocess_file if finish_options failed.\n+\t(c_common_parse_file):  Break if finish_options failed.\n+\n 2003-10-31  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \t* aclocal.m4: Blacklist ultrix* for mmap file."}, {"sha": "4473eaf49d33e84280bee3aa8be746c505099ea0", "filename": "gcc/c-opts.c", "status": "modified", "additions": 10, "deletions": 7, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e974c0eba3197a920a9cdfba1243f2cb8963b03/gcc%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e974c0eba3197a920a9cdfba1243f2cb8963b03/gcc%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-opts.c?ref=8e974c0eba3197a920a9cdfba1243f2cb8963b03", "patch": "@@ -108,7 +108,7 @@ static void sanitize_cpp_opts (void);\n static void add_prefixed_path (const char *, size_t);\n static void push_command_line_include (void);\n static void cb_file_change (cpp_reader *, const struct line_map *);\n-static void finish_options (const char *);\n+static bool finish_options (const char *);\n \n #ifndef STDC_0_IN_SYSTEM_HEADERS\n #define STDC_0_IN_SYSTEM_HEADERS 0\n@@ -1183,8 +1183,8 @@ c_common_init (void)\n \n   if (flag_preprocess_only)\n     {\n-      finish_options (in_fnames[0]);\n-      preprocess_file (parse_in);\n+      if (finish_options (in_fnames[0]))\n+\tpreprocess_file (parse_in);\n       return false;\n     }\n \n@@ -1220,7 +1220,8 @@ c_common_parse_file (int set_yydebug ATTRIBUTE_UNUSED)\n \t  cpp_undef_all (parse_in);\n \t}\n \n-      finish_options(in_fnames[file_index]);\n+      if (! finish_options(in_fnames[file_index]))\n+\tbreak;\n       if (file_index == 0)\n \tpch_init();\n       c_parse_file ();\n@@ -1387,8 +1388,8 @@ add_prefixed_path (const char *suffix, size_t chain)\n \n /* Handle -D, -U, -A, -imacros, and the first -include.  \n    TIF is the input file to which we will return after processing all\n-   the includes.  */\n-static void\n+   the includes.  Returns true on success.  */\n+static bool\n finish_options (const char *tif)\n {\n   if (!cpp_opts->preprocessed)\n@@ -1441,8 +1442,10 @@ finish_options (const char *tif)\n \n   include_cursor = 0;\n   this_input_filename = tif;\n-  cpp_find_main_file (parse_in, this_input_filename);\n+  if (! cpp_find_main_file (parse_in, this_input_filename))\n+    return false;\n   push_command_line_include ();\n+  return true;\n }\n \n /* Give CPP the next file given by -include, if any.  */"}]}