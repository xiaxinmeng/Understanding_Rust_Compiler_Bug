{"sha": "349c31669777d87db0e7ec437d8b5bd5499d74d6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzQ5YzMxNjY5Nzc3ZDg3ZGIwZTdlYzQzN2Q4YjViZDU0OTlkNzRkNg==", "commit": {"author": {"name": "Olivier Hainque", "email": "hainque@adacore.com", "date": "2008-05-14T13:20:43Z"}, "committer": {"name": "Olivier Hainque", "email": "hainque@gcc.gnu.org", "date": "2008-05-14T13:20:43Z"}, "message": "configure.ac: Add support for a \"gcc_subdir\" variable in config-lang.in...\n\n        * configure.ac: Add support for a \"gcc_subdir\" variable in\n        config-lang.in, to denote a subdirectory where the language/GCC\n        integration files are to be found.\n        * configure: Regenerate.\n\n\nCo-Authored-By: Nicolas Roche <roche@adacore.com>\n\nFrom-SVN: r135292", "tree": {"sha": "e8c6bad41b7e63e9d5e0a98b197fe43dc839d529", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e8c6bad41b7e63e9d5e0a98b197fe43dc839d529"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/349c31669777d87db0e7ec437d8b5bd5499d74d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/349c31669777d87db0e7ec437d8b5bd5499d74d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/349c31669777d87db0e7ec437d8b5bd5499d74d6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/349c31669777d87db0e7ec437d8b5bd5499d74d6/comments", "author": {"login": "hainque", "id": 18735142, "node_id": "MDQ6VXNlcjE4NzM1MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/18735142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hainque", "html_url": "https://github.com/hainque", "followers_url": "https://api.github.com/users/hainque/followers", "following_url": "https://api.github.com/users/hainque/following{/other_user}", "gists_url": "https://api.github.com/users/hainque/gists{/gist_id}", "starred_url": "https://api.github.com/users/hainque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hainque/subscriptions", "organizations_url": "https://api.github.com/users/hainque/orgs", "repos_url": "https://api.github.com/users/hainque/repos", "events_url": "https://api.github.com/users/hainque/events{/privacy}", "received_events_url": "https://api.github.com/users/hainque/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d9cdfe6a7f8c14ddd9f68399f6cf7bc93d3a2b32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9cdfe6a7f8c14ddd9f68399f6cf7bc93d3a2b32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9cdfe6a7f8c14ddd9f68399f6cf7bc93d3a2b32"}], "stats": {"total": 94, "additions": 72, "deletions": 22}, "files": [{"sha": "1f8a441be5ae087aaff45b439e07a3242bfa1438", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/349c31669777d87db0e7ec437d8b5bd5499d74d6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/349c31669777d87db0e7ec437d8b5bd5499d74d6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=349c31669777d87db0e7ec437d8b5bd5499d74d6", "patch": "@@ -1,3 +1,11 @@\n+2008-05-14  Olivier Hainque  <hainque@adacore.com>\n+\t    Nicolas Roche  <roche@adacore.com>\n+\n+\t* configure.ac: Add support for a \"gcc_subdir\" variable in\n+\tconfig-lang.in, to denote a subdirectory where the language/GCC\n+\tintegration files are to be found.\n+\t* configure: Regenerate.\n+\n 2008-05-14  Ira Rosen  <irar@il.ibm.com>\n \n \tPR tree-optimization/36098"}, {"sha": "9f8cf5f19b9e65ceec3b955cde505f7b259fcef7", "filename": "gcc/configure", "status": "modified", "additions": 32, "deletions": 11, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/349c31669777d87db0e7ec437d8b5bd5499d74d6/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/349c31669777d87db0e7ec437d8b5bd5499d74d6/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=349c31669777d87db0e7ec437d8b5bd5499d74d6", "patch": "@@ -23548,11 +23548,32 @@ do\n         fi\n         subdir=\"`echo $lang | sed -e 's,^.*/\\([^/]*\\)/config-lang.in$,\\1,'`\"\n         subdirs=\"$subdirs $subdir\"\n+\n+\t# $gcc_subdir is where the gcc integration files are to be found\n+\t# for a language, both for internal compiler purposes (compiler\n+\t# sources implementing front-end to GCC tree converters), and for\n+\t# build infrastructure purposes (Make-lang.in, etc.)\n+\t#\n+\t# This will be <subdir> (relative to $srcdir) if a line like\n+\t# gcc_subdir=\"<subdir>\" or gcc_subdir=<subdir>\n+\t# is found in <langdir>/config-lang.in, and will remain <langdir>\n+\t# otherwise.\n+\t#\n+\t# Except for the language alias (fetched above), the regular\n+\t# \"config-lang.in\" contents are always retrieved from $gcc_subdir,\n+\t# so a <langdir>/config-lang.in setting gcc_subdir typically sets\n+\t# only this and the language alias.\n+\n+        gcc_subdir=`sed -n -e 's,^gcc_subdir=['\"'\"'\"'\"]\\(.*\\)[\"'\"'\"'\"'].*$,\\1,p' -e 's,^gcc_subdir=\\([^   ]*\\).*$,\\1,p' $lang`\n+        if [ \"$gcc_subdir\" = \"\" ]; then\n+           gcc_subdir=\"$subdir\"\n+        fi\n+\n         case \",$enable_languages,\" in\n         *,$lang_alias,*)\n             all_selected_languages=\"$all_selected_languages $lang_alias\"\n-\t    if test -f $srcdir/$subdir/lang-specs.h; then\n-\t        lang_specs_files=\"$lang_specs_files $srcdir/$subdir/lang-specs.h\"\n+            if test -f $srcdir/$gcc_subdir/lang-specs.h; then\n+                lang_specs_files=\"$lang_specs_files $srcdir/$gcc_subdir/lang-specs.h\"\n \t    fi\n \t    ;;\n         esac\n@@ -23563,10 +23584,10 @@ do\n \toutputs=\n \tgtfiles=\n \tsubdir_requires=\n-\t. ${srcdir}/$subdir/config-lang.in\n+\t. ${srcdir}/$gcc_subdir/config-lang.in\n \tif test \"x$language\" = x\n \tthen\n-\t\techo \"${srcdir}/$subdir/config-lang.in doesn't set \\$language.\" 1>&2\n+\t\techo \"${srcdir}/$gcc_subdir/config-lang.in doesn't set \\$language.\" 1>&2\n \t\texit 1\n \tfi\n \n@@ -23583,15 +23604,15 @@ do\n \tesac\n \t$ok || continue\n \n-\tall_lang_makefrags=\"$all_lang_makefrags \\$(srcdir)/$subdir/Make-lang.in\"\n-\tif test -f $srcdir/$subdir/lang.opt; then\n-\t    lang_opt_files=\"$lang_opt_files $srcdir/$subdir/lang.opt\"\n+\tall_lang_makefrags=\"$all_lang_makefrags \\$(srcdir)/$gcc_subdir/Make-lang.in\"\n+\tif test -f $srcdir/$gcc_subdir/lang.opt; then\n+\t    lang_opt_files=\"$lang_opt_files $srcdir/$gcc_subdir/lang.opt\"\n \tfi\n-\tif test -f $srcdir/$subdir/$subdir-tree.def; then\n-\t    lang_tree_files=\"$lang_tree_files $srcdir/$subdir/$subdir-tree.def\"\n+\tif test -f $srcdir/$gcc_subdir/$subdir-tree.def; then\n+\t    lang_tree_files=\"$lang_tree_files $srcdir/$gcc_subdir/$subdir-tree.def\"\n \tfi\n-\tif test -f ${srcdir}/$subdir/Makefile.in\n-\t\tthen all_lang_makefiles=\"$subdir/Makefile\"\n+\tif test -f ${srcdir}/$gcc_subdir/Makefile.in\n+\t\tthen all_lang_makefiles=\"$gcc_subdir/Makefile\"\n \tfi\n \tall_languages=\"$all_languages $language\"\n \tall_compilers=\"$all_compilers $compilers\""}, {"sha": "001ff503aafea90d569ef2403f5222eaa7818953", "filename": "gcc/configure.ac", "status": "modified", "additions": 32, "deletions": 11, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/349c31669777d87db0e7ec437d8b5bd5499d74d6/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/349c31669777d87db0e7ec437d8b5bd5499d74d6/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=349c31669777d87db0e7ec437d8b5bd5499d74d6", "patch": "@@ -3581,11 +3581,32 @@ changequote(,)dnl\n         fi\n         subdir=\"`echo $lang | sed -e 's,^.*/\\([^/]*\\)/config-lang.in$,\\1,'`\"\n         subdirs=\"$subdirs $subdir\"\n+\n+\t# $gcc_subdir is where the gcc integration files are to be found\n+\t# for a language, both for internal compiler purposes (compiler\n+\t# sources implementing front-end to GCC tree converters), and for\n+\t# build infrastructure purposes (Make-lang.in, etc.)\n+\t#\n+\t# This will be <subdir> (relative to $srcdir) if a line like \n+\t# gcc_subdir=\"<subdir>\" or gcc_subdir=<subdir>\n+\t# is found in <langdir>/config-lang.in, and will remain <langdir>\n+\t# otherwise.\n+\t#\n+\t# Except for the language alias (fetched above), the regular\n+\t# \"config-lang.in\" contents are always retrieved from $gcc_subdir,\n+\t# so a <langdir>/config-lang.in setting gcc_subdir typically sets\n+\t# only this and the language alias.\n+\n+        gcc_subdir=`sed -n -e 's,^gcc_subdir=['\"'\"'\"'\"]\\(.*\\)[\"'\"'\"'\"'].*$,\\1,p' -e 's,^gcc_subdir=\\([^   ]*\\).*$,\\1,p' $lang`\n+        if [ \"$gcc_subdir\" = \"\" ]; then\n+           gcc_subdir=\"$subdir\"\n+        fi\n+\n         case \",$enable_languages,\" in\n         *,$lang_alias,*)\n             all_selected_languages=\"$all_selected_languages $lang_alias\"\n-\t    if test -f $srcdir/$subdir/lang-specs.h; then\n-\t        lang_specs_files=\"$lang_specs_files $srcdir/$subdir/lang-specs.h\"\n+            if test -f $srcdir/$gcc_subdir/lang-specs.h; then\n+                lang_specs_files=\"$lang_specs_files $srcdir/$gcc_subdir/lang-specs.h\"\n \t    fi\n \t    ;;\n         esac\n@@ -3597,10 +3618,10 @@ changequote([,])dnl\n \toutputs=\n \tgtfiles=\n \tsubdir_requires=\n-\t. ${srcdir}/$subdir/config-lang.in\n+\t. ${srcdir}/$gcc_subdir/config-lang.in\n \tif test \"x$language\" = x\n \tthen\n-\t\techo \"${srcdir}/$subdir/config-lang.in doesn't set \\$language.\" 1>&2\n+\t\techo \"${srcdir}/$gcc_subdir/config-lang.in doesn't set \\$language.\" 1>&2\n \t\texit 1\n \tfi\n \n@@ -3617,15 +3638,15 @@ changequote([,])dnl\n \tesac\n \t$ok || continue\n \n-\tall_lang_makefrags=\"$all_lang_makefrags \\$(srcdir)/$subdir/Make-lang.in\"\n-\tif test -f $srcdir/$subdir/lang.opt; then\n-\t    lang_opt_files=\"$lang_opt_files $srcdir/$subdir/lang.opt\"\n+\tall_lang_makefrags=\"$all_lang_makefrags \\$(srcdir)/$gcc_subdir/Make-lang.in\"\n+\tif test -f $srcdir/$gcc_subdir/lang.opt; then\n+\t    lang_opt_files=\"$lang_opt_files $srcdir/$gcc_subdir/lang.opt\"\n \tfi\n-\tif test -f $srcdir/$subdir/$subdir-tree.def; then\n-\t    lang_tree_files=\"$lang_tree_files $srcdir/$subdir/$subdir-tree.def\"\n+\tif test -f $srcdir/$gcc_subdir/$subdir-tree.def; then\n+\t    lang_tree_files=\"$lang_tree_files $srcdir/$gcc_subdir/$subdir-tree.def\"\n \tfi\n-\tif test -f ${srcdir}/$subdir/Makefile.in\n-\t\tthen all_lang_makefiles=\"$subdir/Makefile\"\n+\tif test -f ${srcdir}/$gcc_subdir/Makefile.in\n+\t\tthen all_lang_makefiles=\"$gcc_subdir/Makefile\"\n \tfi\n \tall_languages=\"$all_languages $language\"\n \tall_compilers=\"$all_compilers $compilers\""}]}