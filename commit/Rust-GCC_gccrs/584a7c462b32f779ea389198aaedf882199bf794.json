{"sha": "584a7c462b32f779ea389198aaedf882199bf794", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTg0YTdjNDYyYjMyZjc3OWVhMzg5MTk4YWFlZGY4ODIxOTliZjc5NA==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2015-08-22T12:44:51Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2015-08-22T12:44:51Z"}, "message": "Fix column location in c_lex_with_flags errors\n\ngcc/testsuite/ChangeLog:\n\n2015-08-22  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\t* gcc.dg/cpp/multiline-2.c: Add column numbers.\n\t* gcc.dg/dollar.c: Likewise.\n\t* gcc.dg/pragma-message.c: Likewise.\n\t* g++.dg/cpp1y/digit-sep-neg.C: Likewise.\n\t* c-c++-common/raw-string-14.c: Likewise.\n\ngcc/c-family/ChangeLog:\n\n2015-08-22  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\t* c-lex.c (c_lex_with_flags): Use explicit locations.\n\nFrom-SVN: r227096", "tree": {"sha": "7104e87e5951946b0658465d43cc82de97a9436a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7104e87e5951946b0658465d43cc82de97a9436a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/584a7c462b32f779ea389198aaedf882199bf794", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/584a7c462b32f779ea389198aaedf882199bf794", "html_url": "https://github.com/Rust-GCC/gccrs/commit/584a7c462b32f779ea389198aaedf882199bf794", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/584a7c462b32f779ea389198aaedf882199bf794/comments", "author": null, "committer": null, "parents": [{"sha": "ed9fa8d2a37d72d00e76f63968fad2f2819a3219", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed9fa8d2a37d72d00e76f63968fad2f2819a3219", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed9fa8d2a37d72d00e76f63968fad2f2819a3219"}], "stats": {"total": 36, "additions": 24, "deletions": 12}, "files": [{"sha": "2a5758aac59d5505aeacd55d4bc542cc1eb9c711", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=584a7c462b32f779ea389198aaedf882199bf794", "patch": "@@ -1,3 +1,7 @@\n+2015-08-22  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\t* c-lex.c (c_lex_with_flags): Use explicit locations.\n+\n 2015-08-18  Trevor Saunders  <tbsaunde@tbsaunde.org>\n \n \t* c-ada-spec.h, c-common.c, c-common.h, c-format.c, c-format.h,"}, {"sha": "55ceb20a01f61b525cb23acdd1e95063b3633667", "filename": "gcc/c-family/c-lex.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Fc-family%2Fc-lex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Fc-family%2Fc-lex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-lex.c?ref=584a7c462b32f779ea389198aaedf882199bf794", "patch": "@@ -523,11 +523,11 @@ c_lex_with_flags (tree *value, location_t *loc, unsigned char *cpp_flags,\n \tcppchar_t c = tok->val.str.text[0];\n \n \tif (c == '\"' || c == '\\'')\n-\t  error (\"missing terminating %c character\", (int) c);\n+\t  error_at (*loc, \"missing terminating %c character\", (int) c);\n \telse if (ISGRAPH (c))\n-\t  error (\"stray %qc in program\", (int) c);\n+\t  error_at (*loc, \"stray %qc in program\", (int) c);\n \telse\n-\t  error (\"stray %<\\\\%o%> in program\", (int) c);\n+\t  error_at (*loc, \"stray %<\\\\%o%> in program\", (int) c);\n       }\n       goto retry;\n "}, {"sha": "ba2444dd24f18cb84df89ecee4be0305328c6c32", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=584a7c462b32f779ea389198aaedf882199bf794", "patch": "@@ -1,3 +1,11 @@\n+2015-08-22  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\t* gcc.dg/cpp/multiline-2.c: Add column numbers.\n+\t* gcc.dg/dollar.c: Likewise.\n+\t* gcc.dg/pragma-message.c: Likewise.\n+\t* g++.dg/cpp1y/digit-sep-neg.C: Likewise.\n+\t* c-c++-common/raw-string-14.c: Likewise.\n+\n 2015-08-21  Patrick Palka  <ppalka@gcc.gnu.org>\n \n \t* g++.old-deja/g++.jason/overload.C: Adjust to preserve original"}, {"sha": "2253ffea3cc79185400f4bc42e12f2d31110d526", "filename": "gcc/testsuite/c-c++-common/raw-string-14.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fraw-string-14.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fraw-string-14.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fraw-string-14.c?ref=584a7c462b32f779ea389198aaedf882199bf794", "patch": "@@ -12,7 +12,7 @@ const void *s1 = R\"??/\n \t// { dg-error \"invalid new-line\" \"invalid\" { target *-*-* } 10 }\n \t// { dg-error \"stray\" \"stray\" { target *-*-* } 10 }\n \t// { dg-warning \"missing terminating\" \"missing\" { target *-*-* } 10 }\n-\t// { dg-error \"missing terminating\" \"missing\" { target *-*-* } 10 }\n+\t// { dg-error \"19:missing terminating\" \"missing\" { target *-*-* } 10 }\n const void *s2 = R\"abcdefghijklmn??/(a)abcdefghijklmn???\";\n \t// { dg-error \"raw string delimiter longer\" \"longer\" { target *-*-* } 16 }\n \t// { dg-error \"stray\" \"stray\" { target *-*-* } 16 }"}, {"sha": "833fab7c50b9c7576070b2c8639170d50b2e10b2", "filename": "gcc/testsuite/g++.dg/cpp1y/digit-sep-neg.C", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fdigit-sep-neg.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fdigit-sep-neg.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fdigit-sep-neg.C?ref=584a7c462b32f779ea389198aaedf882199bf794", "patch": "@@ -10,18 +10,18 @@ main()\n   i = 0004''000'000; // { dg-error \"adjacent digit separators\" }\n   i = 0B1'0'0'0'0'0'0'0'0'0'0'0'0'0'0'0'0'0'0'0'0; // OK\n   i = 0b'0001'0000'0000'0000'0000'0000; // { dg-error \"digit separator after base indicator\" }\n-  i = 0b0001'0000'0000'0000'0000'0000'; // { dg-error \"missing terminating\" }\n+  i = 0b0001'0000'0000'0000'0000'0000'; // { dg-error \"38:missing terminating\" }\n   unsigned u = 0b0001'0000'0000'0000'0000'0000'U; // { dg-error \"digit separator outside digit sequence\" }\n \n   double d = 0.0;\n   d = 1'.602'176'565e-19; // { dg-error \"digit separator adjacent to decimal point\" }\n   d = 1.'602'176'565e-19; // { dg-error \"digit separator adjacent to decimal point\" }\n   d = 1.602''176'565e-19; // { dg-error \"adjacent digit separators\" }\n   d = 1.602'176'565'e-19; // { dg-error \"digit separator adjacent to exponent\" }\n-  d = 1.602'176'565e'-19; // { dg-error \"missing terminating\" }\n+  d = 1.602'176'565e'-19; // { dg-error \"21:missing terminating\" }\n   d = 1.602'176'565e-'19; // { dg-error \"digit separator adjacent to exponent\" }\n   d = 1.602'176'565e-1'9; // OK\n-  d = 1.602'176'565e-19'; // { dg-error \"missing terminating\" }\n+  d = 1.602'176'565e-19'; // { dg-error \"24:missing terminating\" }\n   float f = 1.602'176'565e-19'F; // { dg-error \"digit separator outside digit sequence\" }\n }\n "}, {"sha": "2841e00fb3b343744808188fe455a08a51d07203", "filename": "gcc/testsuite/gcc.dg/cpp/multiline-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fmultiline-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fmultiline-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fmultiline-2.c?ref=584a7c462b32f779ea389198aaedf882199bf794", "patch": "@@ -9,6 +9,6 @@ const char *p = \"line 1\n \"\n \"\";\t\t\t      /* The compiler front end sees this.  */\n \n-/* { dg-error \"missing term\" \"multiline strings\" { target *-*-* } 8 } */\n+/* { dg-error \"17:missing term\" \"multiline strings\" { target *-*-* } 8 } */\n /* { dg-error \"missing term\" \"multiline strings\" { target *-*-* } 9 } */\n "}, {"sha": "e69c4e2ec83456226807c6affa37b3bfe64f5ed4", "filename": "gcc/testsuite/gcc.dg/dollar.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2Fgcc.dg%2Fdollar.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2Fgcc.dg%2Fdollar.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdollar.c?ref=584a7c462b32f779ea389198aaedf882199bf794", "patch": "@@ -6,4 +6,4 @@\n /* Test that -fno-dollars-in-identifiers is honoured.\n    Neil Booth, 17 May 2003.  */\n \n-int foobar$;\t/* { dg-error \"stray '\\\\$'\" } */\n+int foobar$;\t/* { dg-error \"11:stray '\\\\$'\" } */"}, {"sha": "d4d1009fdef9b215d937fac94d499fb72c794ed3", "filename": "gcc/testsuite/gcc.dg/pragma-message.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2Fgcc.dg%2Fpragma-message.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/584a7c462b32f779ea389198aaedf882199bf794/gcc%2Ftestsuite%2Fgcc.dg%2Fpragma-message.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpragma-message.c?ref=584a7c462b32f779ea389198aaedf882199bf794", "patch": "@@ -16,13 +16,13 @@\n    matching dg-message), dejagnu will report these as excess errors.  */\n \n #pragma message \"\n-/* { dg-error \"missing terminating\" \"\" { target *-*-* } 18 } */\n+/* { dg-error \"17:missing terminating\" \"\" { target *-*-* } 18 } */\n /* { dg-warning \"expected a string\" \"\" { target *-*-* } 18 } */\n #pragma message \"Bad 1\n-/* { dg-error \"missing terminating\" \"\" { target *-*-* } 21 } */\n+/* { dg-error \"17:missing terminating\" \"\" { target *-*-* } 21 } */\n /* { dg-warning \"expected a string\" \"\" { target *-*-* } 21 } */\n #pragma message (\"Bad 2\n-/* { dg-error \"missing terminating\" \"\" { target *-*-* } 24 } */\n+/* { dg-error \"18:missing terminating\" \"\" { target *-*-* } 24 } */\n /* { dg-warning \"expected a string\" \"\" { target *-*-* } 24 } */\n #pragma message (\"Bad 3\"\n /* { dg-warning \"malformed '#pragma message\" \"\" { target *-*-* } 27 } */"}]}