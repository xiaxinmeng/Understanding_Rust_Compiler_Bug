{"sha": "26afdb8e8dab800437c906fe117f8a952afccf6d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjZhZmRiOGU4ZGFiODAwNDM3YzkwNmZlMTE3ZjhhOTUyYWZjY2Y2ZA==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-05-20T21:10:36Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-05-20T21:10:36Z"}, "message": "[_ANSI_H_]: Handle __need_size_t and __need_wchar-t.\n\nFrom-SVN: r4520", "tree": {"sha": "922311800ef40110ddec0cfc019aa6f0599fa735", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/922311800ef40110ddec0cfc019aa6f0599fa735"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/26afdb8e8dab800437c906fe117f8a952afccf6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26afdb8e8dab800437c906fe117f8a952afccf6d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26afdb8e8dab800437c906fe117f8a952afccf6d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26afdb8e8dab800437c906fe117f8a952afccf6d/comments", "author": null, "committer": null, "parents": [{"sha": "d7c768e7bdaaf607a4b6a4d331472245086a49bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7c768e7bdaaf607a4b6a4d331472245086a49bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7c768e7bdaaf607a4b6a4d331472245086a49bb"}], "stats": {"total": 21, "additions": 13, "deletions": 8}, "files": [{"sha": "72276db528ce8fc3956ea780ea1ef113611df722", "filename": "gcc/ginclude/stddef.h", "status": "modified", "additions": 13, "deletions": 8, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26afdb8e8dab800437c906fe117f8a952afccf6d/gcc%2Fginclude%2Fstddef.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26afdb8e8dab800437c906fe117f8a952afccf6d/gcc%2Fginclude%2Fstddef.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fginclude%2Fstddef.h?ref=26afdb8e8dab800437c906fe117f8a952afccf6d", "patch": "@@ -35,9 +35,14 @@\n #ifndef _WCHAR_T_\n #define _WCHAR_T\n #endif\n+/* Undef _FOO_T_ if we are supposed to define foo_t.  */\n+#if ! defined (__need_wchar_t) && ! defined (__need_size_t)\n #undef _PTRDIFF_T_\n-#ifndef __need_ptrdiff_t\n+#endif\n+#if ! defined (__need_wchar_t) && ! defined (__need_ptrdiff_t)\n #undef _SIZE_T_\n+#endif\n+#if ! defined (__need_size_t) && ! defined (__need_ptrdiff_t)\n #undef _WCHAR_T_\n #endif\n #endif /* _ANSI_H_ */\n@@ -174,18 +179,18 @@ typedef __WCHAR_TYPE__ wchar_t;\n #endif /* _STDDEF_H or __need_wchar_t.  */\n \n /*  In 4.3bsd-net2, leave these undefined to indicate that size_t, etc.\n-    are already defined.  We need not worry about the case of wanting just\n-    one of these types, not on 4.3bsd-net2, because only the GNU libc\n-    header files do that.  */\n+    are already defined.  */\n #ifdef _ANSI_H_\n+#ifdef _GCC_PTRDIFF_T_\n #undef _PTRDIFF_T_\n-#ifdef _STDDEF_H /* This is a kludge.\n-\t\t    _STDDEF_H is defined when we are using the whole file,\n-\t\t    undefined when obstack.h wants just ptrdiff_t.  */\n+#endif\n+#ifdef _GCC_SIZE_T_\n #undef _SIZE_T_\n-#undef _WCHAR_T_\n #endif\n+#ifdef _GCC_WCHAR_T_\n+#undef _WCHAR_T_\n #endif\n+#endif /* _ANSI_H_ */\n \n #endif /* __sys_stdtypes_h */\n "}]}