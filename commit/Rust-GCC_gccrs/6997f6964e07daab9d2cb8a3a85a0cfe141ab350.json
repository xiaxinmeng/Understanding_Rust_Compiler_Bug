{"sha": "6997f6964e07daab9d2cb8a3a85a0cfe141ab350", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Njk5N2Y2OTY0ZTA3ZGFhYjlkMmNiOGEzYTg1YTBjZmUxNDFhYjM1MA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-07T22:26:39Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-07T22:26:39Z"}, "message": "Don't crash on erroneous result variable.\n\nFixes issue 1320.\n\nFrom-SVN: r167573", "tree": {"sha": "66e313b0a30a25798a97445014f8ae86500b83ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/66e313b0a30a25798a97445014f8ae86500b83ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6997f6964e07daab9d2cb8a3a85a0cfe141ab350", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6997f6964e07daab9d2cb8a3a85a0cfe141ab350", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6997f6964e07daab9d2cb8a3a85a0cfe141ab350", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6997f6964e07daab9d2cb8a3a85a0cfe141ab350/comments", "author": null, "committer": null, "parents": [{"sha": "c658f0ceef83bd7858aceb21cd72a12079bec1aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c658f0ceef83bd7858aceb21cd72a12079bec1aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c658f0ceef83bd7858aceb21cd72a12079bec1aa"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "09f0d7cbd8cac744c12c93f9db8471a5b6873eaa", "filename": "gcc/go/gofrontend/gogo-tree.cc", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6997f6964e07daab9d2cb8a3a85a0cfe141ab350/gcc%2Fgo%2Fgofrontend%2Fgogo-tree.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6997f6964e07daab9d2cb8a3a85a0cfe141ab350/gcc%2Fgo%2Fgofrontend%2Fgogo-tree.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo-tree.cc?ref=6997f6964e07daab9d2cb8a3a85a0cfe141ab350", "patch": "@@ -1550,14 +1550,18 @@ Function::build_tree(Gogo* gogo, Named_object* named_function)\n       else if ((*p)->is_result_variable())\n \t{\n \t  tree var_decl = (*p)->get_tree(gogo, named_function);\n-\t  if ((*p)->result_var_value()->is_in_heap())\n+\t  if (var_decl != error_mark_node\n+\t      && (*p)->result_var_value()->is_in_heap())\n \t    {\n \t      gcc_assert(TREE_CODE(var_decl) == INDIRECT_REF);\n \t      var_decl = TREE_OPERAND(var_decl, 0);\n \t    }\n-\t  gcc_assert(TREE_CODE(var_decl) == VAR_DECL);\n-\t  DECL_CHAIN(var_decl) = declare_vars;\n-\t  declare_vars = var_decl;\n+\t  if (var_decl != error_mark_node)\n+\t    {\n+\t      gcc_assert(TREE_CODE(var_decl) == VAR_DECL);\n+\t      DECL_CHAIN(var_decl) = declare_vars;\n+\t      declare_vars = var_decl;\n+\t    }\n \t}\n     }\n   *pp = NULL_TREE;"}]}