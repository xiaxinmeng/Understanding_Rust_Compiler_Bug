{"sha": "edc6659c97c4a747123b1150b372dc8e7a83a824", "node_id": "C_kwDOANBUbNoAKGVkYzY2NTljOTdjNGE3NDcxMjNiMTE1MGIzNzJkYzhlN2E4M2E4MjQ", "commit": {"author": {"name": "Jiufu Guo", "email": "guojiufu@linux.ibm.com", "date": "2023-04-12T02:12:58Z"}, "committer": {"name": "Jiufu Guo", "email": "guojiufu@linux.ibm.com", "date": "2023-04-14T03:09:38Z"}, "message": "testsuite: filter out warning noise for CWE-1341 test\n\nThe case file-CWE-1341-example.c checkes [CWE-1341](`double-fclose`).\nWhile on some systems, besides [CWE-1341], a message of [CWE-415] is\nalso reported. On those systems, attribute `malloc` may be attached on\nfopen:\n```\n# 258 \"/usr/include/stdio.h\" 3 4\nextern FILE *fopen (const char *__restrict __filename,\n      const char *__restrict __modes)\n  __attribute__ ((__malloc__)) __attribute__ ((__malloc__ (fclose, 1))) ;\n\nor say: __attribute_malloc__ __attr_dealloc_fclose __wur;\n```\n\nSee (PR analyzer/108722) for future fix in the analyzer.\nThis workaround patch adds -Wno-analyzer-double-free to this case.\n\ngcc/testsuite/ChangeLog:\n\n\tPR analyzer/108722\n\t* gcc.dg/analyzer/file-CWE-1341-example.c: Update.", "tree": {"sha": "4a4750e63db6230a7f0637d4208e8ca82d24ea0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4a4750e63db6230a7f0637d4208e8ca82d24ea0e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/edc6659c97c4a747123b1150b372dc8e7a83a824", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edc6659c97c4a747123b1150b372dc8e7a83a824", "html_url": "https://github.com/Rust-GCC/gccrs/commit/edc6659c97c4a747123b1150b372dc8e7a83a824", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edc6659c97c4a747123b1150b372dc8e7a83a824/comments", "author": null, "committer": null, "parents": [{"sha": "48d0244b60507fe85f1489cce483a7e6b46662c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48d0244b60507fe85f1489cce483a7e6b46662c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48d0244b60507fe85f1489cce483a7e6b46662c9"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "9d125dfefe5f74943ab7660e219cfddd7a1f3c29", "filename": "gcc/testsuite/gcc.dg/analyzer/file-CWE-1341-example.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/edc6659c97c4a747123b1150b372dc8e7a83a824/gcc%2Ftestsuite%2Fgcc.dg%2Fanalyzer%2Ffile-CWE-1341-example.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/edc6659c97c4a747123b1150b372dc8e7a83a824/gcc%2Ftestsuite%2Fgcc.dg%2Fanalyzer%2Ffile-CWE-1341-example.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fanalyzer%2Ffile-CWE-1341-example.c?ref=edc6659c97c4a747123b1150b372dc8e7a83a824", "patch": "@@ -19,6 +19,9 @@\n \n    IN NO EVENT SHALL THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS OR IS SPONSORED BY (IF ANY), THE MITRE CORPORATION, ITS BOARD OF TRUSTEES, OFFICERS, AGENTS, AND EMPLOYEES BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE INFORMATION OR THE USE OR OTHER DEALINGS IN THE CWE.  */\n \n+/* Checks double-fclose only, suppress CWE-415. (PR analyzer/108722).  */\n+/* { dg-additional-options -Wno-analyzer-double-free } */\n+\n #include <stdio.h>\n #include <stdlib.h>\n #include <string.h>"}]}