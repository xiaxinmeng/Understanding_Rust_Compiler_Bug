{"sha": "4d885a639e4a72665b95fa895032d2600418d390", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGQ4ODVhNjM5ZTRhNzI2NjViOTVmYTg5NTAzMmQyNjAwNDE4ZDM5MA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2014-10-23T08:25:55Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2014-10-23T08:25:55Z"}, "message": "fold-const.c (fold_binary_loc): Preserve side-effects of X - X when simplifying to 0.\n\n2014-10-22  Richard Biener  <rguenther@suse.de>\n\n\t* fold-const.c (fold_binary_loc): Preserve side-effects of\n\tX - X when simplifying to 0.\n\t* stor-layout.c (finish_bitfield_representative): Strip\n\tside-effects of evaluating the difference of two DECL_FIELD_OFFSET.\n\nFrom-SVN: r216575", "tree": {"sha": "004e2ca23be9197e0f29a83864df1f382bc5f99b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/004e2ca23be9197e0f29a83864df1f382bc5f99b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4d885a639e4a72665b95fa895032d2600418d390", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d885a639e4a72665b95fa895032d2600418d390", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d885a639e4a72665b95fa895032d2600418d390", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d885a639e4a72665b95fa895032d2600418d390/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a15d2ea8adf0aeb4e02872b0fb55b513035de2d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a15d2ea8adf0aeb4e02872b0fb55b513035de2d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a15d2ea8adf0aeb4e02872b0fb55b513035de2d6"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "fa3a9cce7bf1333d626e99e0aad39fc948a2cadd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d885a639e4a72665b95fa895032d2600418d390/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d885a639e4a72665b95fa895032d2600418d390/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4d885a639e4a72665b95fa895032d2600418d390", "patch": "@@ -1,3 +1,10 @@\n+2014-10-23  Richard Biener  <rguenther@suse.de>\n+\n+\t* fold-const.c (fold_binary_loc): Preserve side-effects of\n+\tX - X when simplifying to 0.\n+\t* stor-layout.c (finish_bitfield_representative): Strip\n+\tside-effects of evaluating the difference of two DECL_FIELD_OFFSET.\n+\n 2014-10-22  Richard Biener  <rguenther@suse.de>\n \t    Tobias Burnus <burnus@net-b.de>\n "}, {"sha": "d70658c32d516f65b28fa1d028a5cca6ef32b0c8", "filename": "gcc/fold-const.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d885a639e4a72665b95fa895032d2600418d390/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d885a639e4a72665b95fa895032d2600418d390/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=4d885a639e4a72665b95fa895032d2600418d390", "patch": "@@ -10749,7 +10749,7 @@ fold_binary_loc (location_t loc,\n \n       if ((!FLOAT_TYPE_P (type) || !HONOR_NANS (TYPE_MODE (type)))\n \t  && operand_equal_p (arg0, arg1, 0))\n-\treturn build_zero_cst (type);\n+\treturn omit_one_operand_loc (loc, type, build_zero_cst (type), arg0);\n \n       /* A - B -> A + (-B) if B is easily negatable.  */\n       if (negate_expr_p (arg1)"}, {"sha": "9f0064bb861701ae53292bc6e4418932fd4908cb", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d885a639e4a72665b95fa895032d2600418d390/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d885a639e4a72665b95fa895032d2600418d390/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=4d885a639e4a72665b95fa895032d2600418d390", "patch": "@@ -1860,6 +1860,8 @@ finish_bitfield_representative (tree repr, tree field)\n \n   size = size_diffop (DECL_FIELD_OFFSET (field),\n \t\t      DECL_FIELD_OFFSET (repr));\n+  while (TREE_CODE (size) == COMPOUND_EXPR)\n+    size = TREE_OPERAND (size, 1);\n   gcc_assert (tree_fits_uhwi_p (size));\n   bitsize = (tree_to_uhwi (size) * BITS_PER_UNIT\n \t     + tree_to_uhwi (DECL_FIELD_BIT_OFFSET (field))"}]}