{"sha": "15fb0dbeb707ea75243d97eab9270b51bf446c94", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTVmYjBkYmViNzA3ZWE3NTI0M2Q5N2VhYjkyNzBiNTFiZjQ0NmM5NA==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2004-11-08T17:55:54Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2004-11-08T17:55:54Z"}, "message": "streambuf_iterator.h (class istreambuf_iterator): Consistently use _M_c to cache the current char...\n\n2004-11-08  Paolo Carlini  <pcarlini@suse.de>\n\n\t* include/bits/streambuf_iterator.h (class istreambuf_iterator):\n\tConsistently use _M_c to cache the current char, i.e., not only\n\twhen operator++(int) is involved; change _M_c to mutable.\n\t(_M_get()): Always save the return value of _M_sbuf->sgetc() into\n\t_M_c.\n\t* testsuite/22_locale/time_get/get_monthname/char/1.cc: Fix\n\t(long standing) typo.\n\t* testsuite/22_locale/time_get/get_monthname/wchar_t/1.cc: Likewise.\n\t* testsuite/22_locale/time_get/get_weekday/char/1.cc: Likewise.\n\t* testsuite/22_locale/time_get/get_weekday/wchar_t/1.cc: Likewise.\n\nFrom-SVN: r90275", "tree": {"sha": "c23e50eaf3aa77026b82b22399caa173f4232326", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c23e50eaf3aa77026b82b22399caa173f4232326"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/15fb0dbeb707ea75243d97eab9270b51bf446c94", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15fb0dbeb707ea75243d97eab9270b51bf446c94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15fb0dbeb707ea75243d97eab9270b51bf446c94", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15fb0dbeb707ea75243d97eab9270b51bf446c94/comments", "author": null, "committer": null, "parents": [{"sha": "7bff66a715c67c1c3206a08ecdd19bb04d2bd475", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bff66a715c67c1c3206a08ecdd19bb04d2bd475", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7bff66a715c67c1c3206a08ecdd19bb04d2bd475"}], "stats": {"total": 30, "additions": 22, "deletions": 8}, "files": [{"sha": "86a8dcfd5266092a9355c3cfa835f5f408d3b25a", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=15fb0dbeb707ea75243d97eab9270b51bf446c94", "patch": "@@ -1,3 +1,16 @@\n+2004-11-08  Paolo Carlini  <pcarlini@suse.de>\n+\n+\t* include/bits/streambuf_iterator.h (class istreambuf_iterator):\n+\tConsistently use _M_c to cache the current char, i.e., not only\n+\twhen operator++(int) is involved; change _M_c to mutable.\n+\t(_M_get()): Always save the return value of _M_sbuf->sgetc() into\n+\t_M_c.\n+\t* testsuite/22_locale/time_get/get_monthname/char/1.cc: Fix\n+\t(long standing) typo.\n+\t* testsuite/22_locale/time_get/get_monthname/wchar_t/1.cc: Likewise.\n+\t* testsuite/22_locale/time_get/get_weekday/char/1.cc: Likewise.\n+\t* testsuite/22_locale/time_get/get_weekday/wchar_t/1.cc: Likewise.\n+\n 2004-11-08  Paolo Carlini  <pcarlini@suse.de>\n \n \t* include/bits/istream.tcc (getline(char_type*, streamsize,"}, {"sha": "f378862ed14cdbd0392687658311ac15b0534c5f", "filename": "libstdc++-v3/include/bits/streambuf_iterator.h", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstreambuf_iterator.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstreambuf_iterator.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstreambuf_iterator.h?ref=15fb0dbeb707ea75243d97eab9270b51bf446c94", "patch": "@@ -72,7 +72,7 @@ namespace std\n       // NB: This implementation assumes the \"end of stream\" value\n       // is EOF, or -1.\n       mutable streambuf_type*\t_M_sbuf;\n-      int_type\t\t\t_M_c;\n+      mutable int_type\t\t_M_c;\n \n     public:\n       ///  Construct end of input stream iterator.\n@@ -157,10 +157,11 @@ namespace std\n \tint_type __ret = __eof;\n \tif (_M_sbuf)\n \t  {\n-\t    if (!traits_type::eq_int_type(_M_c, __eof))\n+\t    if (!traits_type::eq_int_type(_M_c, __eof)\n+\t\t|| !traits_type::eq_int_type((_M_c = _M_sbuf->sgetc()),\n+\t\t\t\t\t     __eof))\n \t      __ret = _M_c;\n-\t    else if (traits_type::eq_int_type((__ret = _M_sbuf->sgetc()),\n-\t\t\t\t\t      __eof))\n+\t    else\n \t      _M_sbuf = 0;\n \t  }\n \treturn __ret;"}, {"sha": "b96007b22c9855da4a280fcfc52e80d54e0acc06", "filename": "libstdc++-v3/testsuite/22_locale/time_get/get_monthname/char/1.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_monthname%2Fchar%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_monthname%2Fchar%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_monthname%2Fchar%2F1.cc?ref=15fb0dbeb707ea75243d97eab9270b51bf446c94", "patch": "@@ -102,7 +102,7 @@ void test01()\n   tim_get.get_monthname(is_it06, end, iss, errorstate, &time06);\n   VERIFY( time06.tm_mon == 4 );\n   VERIFY( errorstate == ios_base::failbit );\n-  VERIFY( *is_it05 == 'l');\n+  VERIFY( *is_it06 == 'l');\n }\n \n int main()"}, {"sha": "9eb219f3cd99b90deff46e626a279bb01276160a", "filename": "libstdc++-v3/testsuite/22_locale/time_get/get_monthname/wchar_t/1.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_monthname%2Fwchar_t%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_monthname%2Fwchar_t%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_monthname%2Fwchar_t%2F1.cc?ref=15fb0dbeb707ea75243d97eab9270b51bf446c94", "patch": "@@ -102,7 +102,7 @@ void test01()\n   tim_get.get_monthname(is_it06, end, iss, errorstate, &time06);\n   VERIFY( time06.tm_mon == 4 );\n   VERIFY( errorstate == ios_base::failbit );\n-  VERIFY( *is_it05 == L'l' );\n+  VERIFY( *is_it06 == L'l' );\n }\n \n int main()"}, {"sha": "1d6da0a8ab1ff0ec425311543d90c59b9d38f251", "filename": "libstdc++-v3/testsuite/22_locale/time_get/get_weekday/char/1.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_weekday%2Fchar%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_weekday%2Fchar%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_weekday%2Fchar%2F1.cc?ref=15fb0dbeb707ea75243d97eab9270b51bf446c94", "patch": "@@ -106,7 +106,7 @@ void test01()\n   tim_get.get_weekday(is_it06, end, iss, errorstate, &time06);\n   VERIFY( time06.tm_wday == 4 );\n   VERIFY( errorstate == ios_base::failbit );\n-  VERIFY( *is_it05 == 'u');\n+  VERIFY( *is_it06 == 'u');\n }\n \n int main()"}, {"sha": "1852b9b39ee8cf95ce87ee871553f57ea8608133", "filename": "libstdc++-v3/testsuite/22_locale/time_get/get_weekday/wchar_t/1.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_weekday%2Fwchar_t%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15fb0dbeb707ea75243d97eab9270b51bf446c94/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_weekday%2Fwchar_t%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F22_locale%2Ftime_get%2Fget_weekday%2Fwchar_t%2F1.cc?ref=15fb0dbeb707ea75243d97eab9270b51bf446c94", "patch": "@@ -106,7 +106,7 @@ void test01()\n   tim_get.get_weekday(is_it06, end, iss, errorstate, &time06);\n   VERIFY( time06.tm_wday == 4 );\n   VERIFY( errorstate == ios_base::failbit );\n-  VERIFY( *is_it05 == L'u' );\n+  VERIFY( *is_it06 == L'u' );\n }\n \n int main()"}]}