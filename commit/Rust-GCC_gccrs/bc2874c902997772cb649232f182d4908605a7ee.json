{"sha": "bc2874c902997772cb649232f182d4908605a7ee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmMyODc0YzkwMjk5Nzc3MmNiNjQ5MjMyZjE4MmQ0OTA4NjA1YTdlZQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-04-06T05:29:30Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-04-06T05:29:30Z"}, "message": "re GNATS gcj/140 (gcj permits assignment to array length)\n\n\tFix for PR gcj/140:\n\t* parse.y (check_final_assignment): Recognize assignments to the\n\t`length' field of an array when generating class files.\n\nFrom-SVN: r32960", "tree": {"sha": "8562ab0fc47554522b3e62608f787262ecf77eae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8562ab0fc47554522b3e62608f787262ecf77eae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc2874c902997772cb649232f182d4908605a7ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc2874c902997772cb649232f182d4908605a7ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc2874c902997772cb649232f182d4908605a7ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc2874c902997772cb649232f182d4908605a7ee/comments", "author": null, "committer": null, "parents": [{"sha": "16d53b6439684014a67dd9086e8e75e26f6ee4ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16d53b6439684014a67dd9086e8e75e26f6ee4ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16d53b6439684014a67dd9086e8e75e26f6ee4ec"}], "stats": {"total": 34, "additions": 26, "deletions": 8}, "files": [{"sha": "8123c230f75853ec3131ca8521a371da90d39180", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc2874c902997772cb649232f182d4908605a7ee/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc2874c902997772cb649232f182d4908605a7ee/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=bc2874c902997772cb649232f182d4908605a7ee", "patch": "@@ -1,3 +1,9 @@\n+2000-04-05  Tom Tromey  <tromey@cygnus.com>\n+\n+\tFix for PR gcj/140:\n+\t* parse.y (check_final_assignment): Recognize assignments to the\n+\t`length' field of an array when generating class files.\n+\n 2000-04-05  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n \n \t* class.c (decl_hash): Prototype removed."}, {"sha": "f65e21fccf13d23ee66464445a08361e0ce6586d", "filename": "gcc/java/parse.c", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc2874c902997772cb649232f182d4908605a7ee/gcc%2Fjava%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc2874c902997772cb649232f182d4908605a7ee/gcc%2Fjava%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.c?ref=bc2874c902997772cb649232f182d4908605a7ee", "patch": "@@ -14053,10 +14053,16 @@ check_final_assignment (lvalue, wfl)\n       && JDECL_P (TREE_OPERAND (lvalue, 1)))\n     lvalue = TREE_OPERAND (lvalue, 1);\n \n-  if (TREE_CODE (lvalue) == FIELD_DECL\n-      && FIELD_FINAL (lvalue)\n-      && !DECL_CLINIT_P (current_function_decl)\n-      && !DECL_FINIT_P (current_function_decl))\n+  /* When generating class files, references to the `length' field\n+     look a bit different.  */\n+  if ((flag_emit_class_files\n+       && TREE_CODE (lvalue) == COMPONENT_REF\n+       && TYPE_ARRAY_P (TREE_TYPE (TREE_OPERAND (lvalue, 0)))\n+       && FIELD_FINAL (TREE_OPERAND (lvalue, 1)))\n+      || (TREE_CODE (lvalue) == FIELD_DECL\n+\t  && FIELD_FINAL (lvalue)\n+\t  && !DECL_CLINIT_P (current_function_decl)\n+\t  && !DECL_FINIT_P (current_function_decl)))\n     {\n       parse_error_context \n         (wfl, \"Can't assign a value to the final variable `%s'\","}, {"sha": "17e74c2dd598a49087324e2e4ac40ec4eb076136", "filename": "gcc/java/parse.y", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc2874c902997772cb649232f182d4908605a7ee/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc2874c902997772cb649232f182d4908605a7ee/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=bc2874c902997772cb649232f182d4908605a7ee", "patch": "@@ -11421,10 +11421,16 @@ check_final_assignment (lvalue, wfl)\n       && JDECL_P (TREE_OPERAND (lvalue, 1)))\n     lvalue = TREE_OPERAND (lvalue, 1);\n \n-  if (TREE_CODE (lvalue) == FIELD_DECL\n-      && FIELD_FINAL (lvalue)\n-      && !DECL_CLINIT_P (current_function_decl)\n-      && !DECL_FINIT_P (current_function_decl))\n+  /* When generating class files, references to the `length' field\n+     look a bit different.  */\n+  if ((flag_emit_class_files\n+       && TREE_CODE (lvalue) == COMPONENT_REF\n+       && TYPE_ARRAY_P (TREE_TYPE (TREE_OPERAND (lvalue, 0)))\n+       && FIELD_FINAL (TREE_OPERAND (lvalue, 1)))\n+      || (TREE_CODE (lvalue) == FIELD_DECL\n+\t  && FIELD_FINAL (lvalue)\n+\t  && !DECL_CLINIT_P (current_function_decl)\n+\t  && !DECL_FINIT_P (current_function_decl)))\n     {\n       parse_error_context \n         (wfl, \"Can't assign a value to the final variable `%s'\","}]}