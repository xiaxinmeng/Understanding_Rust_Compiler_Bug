{"sha": "8b377b71b9b3a186a4451f5edf39972f641697f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGIzNzdiNzFiOWIzYTE4NmE0NDUxZjVlZGYzOTk3MmY2NDE2OTdmOQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-01-13T07:56:48Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-01-13T07:56:48Z"}, "message": "(CPP_SPEC, LIB_SPEC, LINK_SPEC): Add -compat-bsd conditionals.\n\nFrom-SVN: r3218", "tree": {"sha": "8c3552b7a70db71867f48669887226275d796bff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c3552b7a70db71867f48669887226275d796bff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b377b71b9b3a186a4451f5edf39972f641697f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b377b71b9b3a186a4451f5edf39972f641697f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b377b71b9b3a186a4451f5edf39972f641697f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b377b71b9b3a186a4451f5edf39972f641697f9/comments", "author": null, "committer": null, "parents": [{"sha": "aa66bd06e4a00ff07013e53d34b6ea53e4738564", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa66bd06e4a00ff07013e53d34b6ea53e4738564", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa66bd06e4a00ff07013e53d34b6ea53e4738564"}], "stats": {"total": 48, "additions": 32, "deletions": 16}, "files": [{"sha": "90abc4cf6f8754fa1f38bdffe2fc9a7e4babc599", "filename": "gcc/config/sparc/sol2.h", "status": "modified", "additions": 32, "deletions": 16, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b377b71b9b3a186a4451f5edf39972f641697f9/gcc%2Fconfig%2Fsparc%2Fsol2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b377b71b9b3a186a4451f5edf39972f641697f9/gcc%2Fconfig%2Fsparc%2Fsol2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsol2.h?ref=8b377b71b9b3a186a4451f5edf39972f641697f9", "patch": "@@ -26,6 +26,11 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n #define CPP_PREDEFINES \\\n  \"-Dsun -Dsparc -Dunix -D__svr4__ -Asystem(unix) -Acpu(sparc) -Amachine(sparc)\"\n \n+#undef CPP_SPEC\n+#define CPP_SPEC \"\\\n+   %{compat-bsd:-iwithprefix ucbinclude -idirafter /usr/ucbinclude}\\\n+   %{msparclite:-D__sparclite__} %{mv8:-D__sparc_v8__}\"\n+\n /* The sun bundled assembler doesn't accept -Yd, (and neither does gas).\n    It's safe to pass -s always, even if -g is not used. */\n #undef ASM_SPEC\n@@ -158,7 +163,7 @@ do {\t\t\t\t\t\t\t\t\t\\\n #undef MD_STARTFILE_PREFIX\n #define MD_STARTFILE_PREFIX \"/opt/SUNWspro/SC2.0/\"\n \n-#undef\tSTARTFILE_SPEC\n+#undef STARTFILE_SPEC\n #define STARTFILE_SPEC \"%{!shared: \\\n \t\t\t %{!symbolic: \\\n \t\t\t  %{pg:crt1.o%s}%{!pg:%{p:mcrt1.o%s}%{!p:crt1.o%s}} \\\n@@ -170,25 +175,36 @@ do {\t\t\t\t\t\t\t\t\t\\\n \t\t\t   %{!traditional:/usr/ccs/lib/values-Xa.o%s}}}} \\\n \t\t\t  crtbegin.o%s\"\n \n-#undef\tLIB_SPEC\n+/* ??? Note: in order for -compat-bsd to work fully,\n+   we must somehow arrange to fixincludes /usr/ucbinclude\n+   and put the result in $(libsubdir)/ucbinclude.  */\n+\n+#undef LIB_SPEC\n #define LIB_SPEC \\\n-  \"%{!shared:%{!symbolic:-lc}} \\\n-  crtend.o%s \\\n-  %{!shared:%{!symbolic:%{pg:crtn.o%s}%{!pg:crtn.o%s}}}\"\n+  \"%{compat-bsd:-lucb -lsocket -lnsl -lelf -laio} \\\n+   %{!shared:%{!symbolic:-lc}} \\\n+   crtend.o%s \\\n+   %{!shared:%{!symbolic:%{pg:crtn.o%s}%{!pg:crtn.o%s}}}\"\n \n /* This should be the same as in svr4.h, except with -R added.  */\n #undef LINK_SPEC\n-#define LINK_SPEC \"%{h*} %{V} %{v:%{!V:-V}} \\\n-\t\t   %{b} %{Wl,*:%*} \\\n-\t\t   %{static:-dn -Bstatic} \\\n-\t\t   %{shared:-G -dy} \\\n-\t\t   %{symbolic:-Bsymbolic -G -dy} \\\n-\t\t   %{G:-G} \\\n-\t\t   %{YP,*} \\\n-\t\t   %{R*} \\\n-\t\t   %{!YP,*:%{p:-Y P,/usr/ccs/lib/libp:/usr/lib/libp:/usr/ccs/lib:/usr/lib} \\\n-\t\t    %{!p:-Y P,/usr/ccs/lib:/usr/lib}} \\\n-\t\t   %{Qy:} %{!Qn:-Qy}\"\n+#define LINK_SPEC \\\n+  \"%{h*} %{V} %{v:%{!V:-V}} \\\n+   %{b} %{Wl,*:%*} \\\n+   %{static:-dn -Bstatic} \\\n+   %{shared:-G -dy} \\\n+   %{symbolic:-Bsymbolic -G -dy} \\\n+   %{G:-G} \\\n+   %{YP,*} \\\n+   %{R*} \\\n+   %{compat-bsd: \\\n+     %{!YP,*:%{p:-Y P,/usr/ucblib:/usr/ccs/lib/libp:/usr/lib/libp:/usr/ccs/lib:/usr/lib} \\\n+       %{!p:-Y P,/usr/ucblib:/usr/ccs/lib:/usr/lib}} \\\n+     -R /usr/ucblib} \\\n+   %{!compat-bsd: \\\n+     %{!YP,*:%{p:-Y P,/usr/ccs/lib/libp:/usr/lib/libp:/usr/ccs/lib:/usr/lib} \\\n+       %{!p:-Y P,/usr/ccs/lib:/usr/lib}}} \\\n+   %{Qy:} %{!Qn:-Qy}\"\n \n /* This defines which switch letters take arguments.\n    It is as in svr4.h but with -R added.  */"}]}