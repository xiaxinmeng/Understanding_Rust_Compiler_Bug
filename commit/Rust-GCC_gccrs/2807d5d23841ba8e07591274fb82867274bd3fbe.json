{"sha": "2807d5d23841ba8e07591274fb82867274bd3fbe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjgwN2Q1ZDIzODQxYmE4ZTA3NTkxMjc0ZmI4Mjg2NzI3NGJkM2ZiZQ==", "commit": {"author": {"name": "Adam Butcher", "email": "adam@jessamine.co.uk", "date": "2014-02-21T07:47:55Z"}, "committer": {"name": "Adam Butcher", "email": "abutcher@gcc.gnu.org", "date": "2014-02-21T07:47:55Z"}, "message": "Fix PR c++/60052 and PR c++/60053.\n\n\tPR c++/60052\n\tPR c++/60053\n\t* parser.c (cp_parser_parameter_declaration_list): Correctly reset\n\timplicit_template_scope upon leaving an out-of-line generic member\n\tfunction definition.\n\n\tPR c++/60052\n\tPR c++/60053\n\t* g++.dg/cpp1y/pr60052.C: New testcase.\n\t* g++.dg/cpp1y/pr60053.C: New testcase.\n\nFrom-SVN: r207980", "tree": {"sha": "60d53f80a20ab90add4fcf4cdf2b8396b7bc5df3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/60d53f80a20ab90add4fcf4cdf2b8396b7bc5df3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2807d5d23841ba8e07591274fb82867274bd3fbe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2807d5d23841ba8e07591274fb82867274bd3fbe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2807d5d23841ba8e07591274fb82867274bd3fbe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2807d5d23841ba8e07591274fb82867274bd3fbe/comments", "author": {"login": "abutcher-gh", "id": 10379705, "node_id": "MDQ6VXNlcjEwMzc5NzA1", "avatar_url": "https://avatars.githubusercontent.com/u/10379705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abutcher-gh", "html_url": "https://github.com/abutcher-gh", "followers_url": "https://api.github.com/users/abutcher-gh/followers", "following_url": "https://api.github.com/users/abutcher-gh/following{/other_user}", "gists_url": "https://api.github.com/users/abutcher-gh/gists{/gist_id}", "starred_url": "https://api.github.com/users/abutcher-gh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abutcher-gh/subscriptions", "organizations_url": "https://api.github.com/users/abutcher-gh/orgs", "repos_url": "https://api.github.com/users/abutcher-gh/repos", "events_url": "https://api.github.com/users/abutcher-gh/events{/privacy}", "received_events_url": "https://api.github.com/users/abutcher-gh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "76a4b7ad2d7d071458a4cb4d8515c14b9abf0d19", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76a4b7ad2d7d071458a4cb4d8515c14b9abf0d19", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76a4b7ad2d7d071458a4cb4d8515c14b9abf0d19"}], "stats": {"total": 61, "additions": 58, "deletions": 3}, "files": [{"sha": "7d4af6d7e49867d191a1c9693b435c9e378982fd", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2807d5d23841ba8e07591274fb82867274bd3fbe/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2807d5d23841ba8e07591274fb82867274bd3fbe/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=2807d5d23841ba8e07591274fb82867274bd3fbe", "patch": "@@ -1,3 +1,11 @@\n+2014-02-21  Adam Butcher  <adam@jessamine.co.uk>\n+\n+\tPR c++/60052\n+\tPR c++/60053\n+\t* parser.c (cp_parser_parameter_declaration_list): Correctly reset\n+\timplicit_template_scope upon leaving an out-of-line generic member\n+\tfunction definition.\n+\n 2014-02-20  Kai Tietz  <ktietz@redhat.com>\n \n \tPR c++/58873"}, {"sha": "1e4e3df532bfce83bf6e14c960f75bebcc0934a4", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2807d5d23841ba8e07591274fb82867274bd3fbe/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2807d5d23841ba8e07591274fb82867274bd3fbe/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=2807d5d23841ba8e07591274fb82867274bd3fbe", "patch": "@@ -18372,11 +18372,21 @@ cp_parser_parameter_declaration_list (cp_parser* parser, bool *is_error)\n   parser->in_unbraced_linkage_specification_p\n     = saved_in_unbraced_linkage_specification_p;\n \n+  /* Reset implicit_template_scope if we are about to leave the function\n+     parameter list that introduced it.  Note that for out-of-line member\n+     definitions, there will be one or more class scopes before we get to\n+     the template parameter scope.  */\n+\n   if (cp_binding_level *its = parser->implicit_template_scope)\n-    if (current_binding_level->level_chain == its)\n+    if (cp_binding_level *maybe_its = current_binding_level->level_chain)\n       {\n-\tparser->implicit_template_parms = 0;\n-\tparser->implicit_template_scope = 0;\n+\twhile (maybe_its->kind == sk_class)\n+\t  maybe_its = maybe_its->level_chain;\n+\tif (maybe_its == its)\n+\t  {\n+\t    parser->implicit_template_parms = 0;\n+\t    parser->implicit_template_scope = 0;\n+\t  }\n       }\n \n   return parameters;"}, {"sha": "df82431eda83107547340f1b6613bae3cd466250", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2807d5d23841ba8e07591274fb82867274bd3fbe/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2807d5d23841ba8e07591274fb82867274bd3fbe/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2807d5d23841ba8e07591274fb82867274bd3fbe", "patch": "@@ -1,3 +1,10 @@\n+2014-02-21  Adam Butcher  <adam@jessamine.co.uk>\n+\n+\tPR c++/60052\n+\tPR c++/60053\n+\t* g++.dg/cpp1y/pr60052.C: New testcase.\n+\t* g++.dg/cpp1y/pr60053.C: New testcase.\n+\n 2014-02-21  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/60286"}, {"sha": "191e5acfacd53d719a8718b6dcd5692d57bc05a6", "filename": "gcc/testsuite/g++.dg/cpp1y/pr60052.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2807d5d23841ba8e07591274fb82867274bd3fbe/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr60052.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2807d5d23841ba8e07591274fb82867274bd3fbe/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr60052.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr60052.C?ref=2807d5d23841ba8e07591274fb82867274bd3fbe", "patch": "@@ -0,0 +1,15 @@\n+// PR c++/60052\n+// { dg-do compile }\n+// { dg-options \"-std=c++1y\" }\n+\n+struct A\n+{\n+  void foo(auto);\n+};\n+\n+void A::foo(auto) {}\n+\n+struct B\n+{\n+  void bar(auto);\n+};"}, {"sha": "345a9b81fb1b90144de68033f830a00ea46e1a63", "filename": "gcc/testsuite/g++.dg/cpp1y/pr60053.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2807d5d23841ba8e07591274fb82867274bd3fbe/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr60053.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2807d5d23841ba8e07591274fb82867274bd3fbe/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr60053.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr60053.C?ref=2807d5d23841ba8e07591274fb82867274bd3fbe", "patch": "@@ -0,0 +1,15 @@\n+// PR c++/60053\n+// { dg-do compile }\n+// { dg-options \"-std=c++1y\" }\n+\n+struct A\n+{\n+  void foo(auto);\n+};\n+\n+void A::foo(auto) {}\n+\n+template<typename> struct B\n+{\n+  template<typename T> void bar(auto);\n+};"}]}