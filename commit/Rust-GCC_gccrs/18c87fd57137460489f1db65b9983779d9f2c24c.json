{"sha": "18c87fd57137460489f1db65b9983779d9f2c24c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MThjODdmZDU3MTM3NDYwNDg5ZjFkYjY1Yjk5ODM3NzlkOWYyYzI0Yw==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2008-10-19T12:51:06Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2008-10-19T12:51:06Z"}, "message": "re PR fortran/37723 (wrong result for left-right hand side array overlap and (possibly) negative strides)\n\n2008-10-19  Paul Thomas  <pault@gcc.gnu.org>\n\n        PR fortran/37723\n        * dependency.c (gfc_dep_resolver ): If we find equal array\n\telement references, go on to the next reference.\n\n2008-10-19  Paul Thomas  <pault@gcc.gnu.org>\n\n        PR fortran/37723\n        * gfortran.dg/dependency_22.f90: New test.\n\nFrom-SVN: r141221", "tree": {"sha": "e8a02b5d2c8cd96f8b9725922ae6db6ec89ed79d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e8a02b5d2c8cd96f8b9725922ae6db6ec89ed79d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/18c87fd57137460489f1db65b9983779d9f2c24c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18c87fd57137460489f1db65b9983779d9f2c24c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18c87fd57137460489f1db65b9983779d9f2c24c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18c87fd57137460489f1db65b9983779d9f2c24c/comments", "author": null, "committer": null, "parents": [{"sha": "884f855cf924b4d883c4cfa9e449618dc23b8bca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/884f855cf924b4d883c4cfa9e449618dc23b8bca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/884f855cf924b4d883c4cfa9e449618dc23b8bca"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "4c350199bb430cf298571918e2166c2d67ca6fef", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18c87fd57137460489f1db65b9983779d9f2c24c/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18c87fd57137460489f1db65b9983779d9f2c24c/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=18c87fd57137460489f1db65b9983779d9f2c24c", "patch": "@@ -1,3 +1,9 @@\n+2008-10-19  Paul Thomas  <pault@gcc.gnu.org>\n+\n+        PR fortran/37723\n+        * dependency.c (gfc_dep_resolver ): If we find equal array\n+\telement references, go on to the next reference.\n+\n 2008-10-16  Daniel Kraft  <d@domob.eu>\n \n \t* resolve.c (resolve_elemental_actual): Handle calls to intrinsic"}, {"sha": "44187fe81536498a90517d6907f70a43dd5db48e", "filename": "gcc/fortran/dependency.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18c87fd57137460489f1db65b9983779d9f2c24c/gcc%2Ffortran%2Fdependency.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18c87fd57137460489f1db65b9983779d9f2c24c/gcc%2Ffortran%2Fdependency.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdependency.c?ref=18c87fd57137460489f1db65b9983779d9f2c24c", "patch": "@@ -1252,6 +1252,14 @@ gfc_dep_resolver (gfc_ref *lref, gfc_ref *rref)\n \t      if (this_dep > fin_dep)\n \t\tfin_dep = this_dep;\n \t    }\n+\n+\t  /* If this is an equal element, we have to keep going until we find\n+\t     the \"real\" array reference.  */\n+\t  if (lref->u.ar.type == AR_ELEMENT\n+\t\t&& rref->u.ar.type == AR_ELEMENT\n+\t\t&& fin_dep == GFC_DEP_EQUAL)\n+\t    break;\n+\n \t  /* Exactly matching and forward overlapping ranges don't cause a\n \t     dependency.  */\n \t  if (fin_dep < GFC_DEP_OVERLAP)"}, {"sha": "0d2ef196bff31c4fd7550a37ed1b5e4f0e61052b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18c87fd57137460489f1db65b9983779d9f2c24c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18c87fd57137460489f1db65b9983779d9f2c24c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=18c87fd57137460489f1db65b9983779d9f2c24c", "patch": "@@ -1,3 +1,8 @@\n+2008-10-19  Paul Thomas  <pault@gcc.gnu.org>\n+\n+        PR fortran/37723\n+        * gfortran.dg/dependency_22.f90: New test.\n+\n 2008-10-18  Danny Smith  <dannysmith@users.sourceforge.net>\n \n \t* gcc.dg/dll-2.c: Revert 2008-08-09 change (R138893): Change"}, {"sha": "bedf702767d89ce44bb9918950029e731769cfc3", "filename": "gcc/testsuite/gfortran.dg/dependency_22.f90", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18c87fd57137460489f1db65b9983779d9f2c24c/gcc%2Ftestsuite%2Fgfortran.dg%2Fdependency_22.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18c87fd57137460489f1db65b9983779d9f2c24c/gcc%2Ftestsuite%2Fgfortran.dg%2Fdependency_22.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdependency_22.f90?ref=18c87fd57137460489f1db65b9983779d9f2c24c", "patch": "@@ -0,0 +1,28 @@\n+! { dg-do run }\n+!\n+! Test the fix for PR37723 in which the array element reference masked the dependency\n+! by inhibiting the test.\n+!\n+! Contributed by Dick Hendrickson <dick.hendrickson@gmail.com>\n+!\n+      program try_cg0071\n+      type seq\n+          integer ia(10)\n+      end type\n+      TYPE(SEQ) UDA1R\n+      type(seq) uda(1)\n+\n+      do j1 = 1,10\n+        uda1r%ia(j1) = j1\n+      enddo\n+\n+      uda = uda1r\n+      UDA(1)%IA(1:9) = UDA(1)%IA(9:1:-1)+1\n+\n+      DO J1 = 1,9\n+         if (UDA1R%IA(10-J1)+1 /=  Uda(1)%IA(J1)) call abort()\n+      ENDDO\n+\n+      end\n+\n+"}]}