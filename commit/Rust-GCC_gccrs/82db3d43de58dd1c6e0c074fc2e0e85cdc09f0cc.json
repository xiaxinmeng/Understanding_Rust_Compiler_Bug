{"sha": "82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODJkYjNkNDNkZTU4ZGQxYzZlMGMwNzRmYzJlMGU4NWNkYzA5ZjBjYw==", "commit": {"author": {"name": "Ira Rosen", "email": "irar@il.ibm.com", "date": "2012-01-12T14:41:44Z"}, "committer": {"name": "Ira Rosen", "email": "irar@gcc.gnu.org", "date": "2012-01-12T14:41:44Z"}, "message": "re PR tree-optimization/51799 (Compiler ICE in vect_is_simple_use_1)\n\n\n        PR tree-optimization/51799\n        * tree-vect-patterns.c (vect_recog_over_widening_pattern): Check\n        that the last operation is a type demotion.\n\nFrom-SVN: r183126", "tree": {"sha": "3467c5cd21b186bcb2ee3ad3559793fbeb64f44e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3467c5cd21b186bcb2ee3ad3559793fbeb64f44e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc/comments", "author": {"login": "irar2", "id": 16818592, "node_id": "MDQ6VXNlcjE2ODE4NTky", "avatar_url": "https://avatars.githubusercontent.com/u/16818592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/irar2", "html_url": "https://github.com/irar2", "followers_url": "https://api.github.com/users/irar2/followers", "following_url": "https://api.github.com/users/irar2/following{/other_user}", "gists_url": "https://api.github.com/users/irar2/gists{/gist_id}", "starred_url": "https://api.github.com/users/irar2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/irar2/subscriptions", "organizations_url": "https://api.github.com/users/irar2/orgs", "repos_url": "https://api.github.com/users/irar2/repos", "events_url": "https://api.github.com/users/irar2/events{/privacy}", "received_events_url": "https://api.github.com/users/irar2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "869eea243d175a1c6b6ac152795c28ae986512d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/869eea243d175a1c6b6ac152795c28ae986512d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/869eea243d175a1c6b6ac152795c28ae986512d3"}], "stats": {"total": 44, "additions": 38, "deletions": 6}, "files": [{"sha": "c0898c56d942c438a171e5eea1d146e026da5f3c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc", "patch": "@@ -1,3 +1,9 @@\n+2012-01-12  Ira Rosen  <irar@il.ibm.com>\n+\n+\tPR tree-optimization/51799\n+\t* tree-vect-patterns.c (vect_recog_over_widening_pattern): Check\n+\tthat the last operation is a type demotion.\n+\n 2012-01-12  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.md (*zero_extendsidi2_rex64): Correct movl template."}, {"sha": "56f28ee354b88233071d7e16706df02f7194594e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc", "patch": "@@ -1,3 +1,10 @@\n+2012-01-12  Ira Rosen  <irar@il.ibm.com>\n+\n+\tPR tree-optimization/51799\n+\t* gcc.dg/vect/pr51799.c: New test.\n+\t* gcc.dg/vect/vect-widen-shift-u8.c: Expect two widening shift\n+\tpatterns.\n+\n 2012-01-12  Dominique d'Humieres  <dominiq@lps.ens.fr>\n \t    Tobias Burnus  <burnus@net-b.de>\n "}, {"sha": "7d95e363dd2ec77137c6b92d568915a89edf98a1", "filename": "gcc/testsuite/gcc.dg/vect/pr51799.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr51799.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr51799.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr51799.c?ref=82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile } */\n+\n+typedef signed char int8_t;\n+typedef unsigned char uint8_t;\n+typedef signed short int16_t;\n+typedef unsigned long uint32_t;\n+void\n+f0a (uint32_t * __restrict__ result, int8_t * __restrict__ arg1,\n+     uint32_t * __restrict__ arg4, int8_t temp_6)\n+{\n+  int idx;\n+  for (idx = 0; idx < 416; idx += 1)\n+    {\n+      result[idx] = (uint8_t)(((arg1[idx] << 7) + arg4[idx]) * temp_6);\n+    }\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "49d5a88a663e16b82819235ebde9f369387155bc", "filename": "gcc/testsuite/gcc.dg/vect/vect-widen-shift-u8.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-widen-shift-u8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-widen-shift-u8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-widen-shift-u8.c?ref=82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc", "patch": "@@ -59,7 +59,6 @@ int main (void)\n   return 0;\n }\n \n-/* { dg-final { scan-tree-dump-times \"vect_recog_widen_shift_pattern: detected\" 1 \"vect\" { target vect_widen_shift } } } */\n+/* { dg-final { scan-tree-dump-times \"vect_recog_widen_shift_pattern: detected\" 2 \"vect\" { target vect_widen_shift } } } */\n /* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" } } */\n /* { dg-final { cleanup-tree-dump \"vect\" } } */\n-"}, {"sha": "34ac2e5329f691d66dc839582eabf31806ae3861", "filename": "gcc/tree-vect-patterns.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc/gcc%2Ftree-vect-patterns.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc/gcc%2Ftree-vect-patterns.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-patterns.c?ref=82db3d43de58dd1c6e0c074fc2e0e85cdc09f0cc", "patch": "@@ -1186,13 +1186,15 @@ vect_recog_over_widening_pattern (VEC (gimple, heap) **stmts,\n     {\n       use_lhs = gimple_assign_lhs (use_stmt);\n       use_type = TREE_TYPE (use_lhs);\n-      /* Support only type promotion or signedess change.  Check that USE_TYPE\n-\t is not bigger than the original type.  */\n+      /* Support only type demotion or signedess change.  */\n       if (!INTEGRAL_TYPE_P (use_type)\n-          || TYPE_PRECISION (new_type) > TYPE_PRECISION (use_type)\n-\t  || TYPE_PRECISION (type) < TYPE_PRECISION (use_type))\n+\t  || TYPE_PRECISION (type) <= TYPE_PRECISION (use_type))\n         return NULL;\n \n+      /* Check that NEW_TYPE is not bigger than the conversion result.  */\n+      if (TYPE_PRECISION (new_type) > TYPE_PRECISION (use_type))\n+\treturn NULL;\n+\n       if (TYPE_UNSIGNED (new_type) != TYPE_UNSIGNED (use_type)\n           || TYPE_PRECISION (new_type) != TYPE_PRECISION (use_type))\n         {"}]}