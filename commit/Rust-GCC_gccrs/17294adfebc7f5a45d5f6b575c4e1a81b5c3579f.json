{"sha": "17294adfebc7f5a45d5f6b575c4e1a81b5c3579f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTcyOTRhZGZlYmM3ZjVhNDVkNWY2YjU3NWM0ZTFhODFiNWMzNTc5Zg==", "commit": {"author": {"name": "Fred Fish", "email": "fnf@ninemoons.com", "date": "1998-06-27T22:36:57Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-06-27T22:36:57Z"}, "message": "g++spec.c (NEED_MATH_LIBRARY): Define to 1 if not already defined.\n\n        * g++spec.c (NEED_MATH_LIBRARY): Define to 1 if not already defined.\n        (lang_specific_driver): Initialize need_math with NEED_MATH_LIBRARY.\n        (lang_specific_driver): Only add -lm automatically if need_math is\n        nonzero.\n\nFrom-SVN: r20765", "tree": {"sha": "b7d04df23bad4021cace194371d2f102a50bb727", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b7d04df23bad4021cace194371d2f102a50bb727"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/17294adfebc7f5a45d5f6b575c4e1a81b5c3579f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17294adfebc7f5a45d5f6b575c4e1a81b5c3579f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17294adfebc7f5a45d5f6b575c4e1a81b5c3579f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17294adfebc7f5a45d5f6b575c4e1a81b5c3579f/comments", "author": null, "committer": null, "parents": [{"sha": "b5f3e74739bc6c4832ce3dee3ce199eb97d149a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5f3e74739bc6c4832ce3dee3ce199eb97d149a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5f3e74739bc6c4832ce3dee3ce199eb97d149a9"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "ff6b55ab3bf8fd7894a4bb8863e8913e5ef38f47", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17294adfebc7f5a45d5f6b575c4e1a81b5c3579f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17294adfebc7f5a45d5f6b575c4e1a81b5c3579f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=17294adfebc7f5a45d5f6b575c4e1a81b5c3579f", "patch": "@@ -1,3 +1,10 @@\n+Sat Jun 27 23:34:18 1998  Fred Fish  <fnf@ninemoons.com>\n+\n+\t* g++spec.c (NEED_MATH_LIBRARY): Define to 1 if not already defined.\n+\t(lang_specific_driver): Initialize need_math with NEED_MATH_LIBRARY.\n+\t(lang_specific_driver): Only add -lm automatically if need_math is\n+\tnonzero.\n+\n Sat Jun 27 12:22:56 1998  Jeffrey A Law  (law@cygnus.com)\n \n         * Make-lang.in (g++): Depend on mkstemp.o.  Link in mkstemp.o"}, {"sha": "542ca06f889c93b52b0a0b49a900b948adecb025", "filename": "gcc/cp/g++spec.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17294adfebc7f5a45d5f6b575c4e1a81b5c3579f/gcc%2Fcp%2Fg%2B%2Bspec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17294adfebc7f5a45d5f6b575c4e1a81b5c3579f/gcc%2Fcp%2Fg%2B%2Bspec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fg%2B%2Bspec.c?ref=17294adfebc7f5a45d5f6b575c4e1a81b5c3579f", "patch": "@@ -34,6 +34,9 @@ Boston, MA 02111-1307, USA.  */\n #ifndef MATH_LIBRARY\n #define MATH_LIBRARY \"-lm\"\n #endif\n+#ifndef NEED_MATH_LIBRARY\n+#define NEED_MATH_LIBRARY 1\t/* Default is pass MATH_LIBRARY to linker */\n+#endif\n \n extern char *xmalloc PROTO((size_t));\n \n@@ -81,7 +84,7 @@ lang_specific_driver (fn, in_argc, in_argv, in_added_libraries)\n   int *args;\n \n   /* By default, we throw on the math library.  */\n-  int need_math = 1;\n+  int need_math = NEED_MATH_LIBRARY;\n \n   /* The total number of arguments with the new stuff.  */\n   int argc;\n@@ -241,7 +244,7 @@ lang_specific_driver (fn, in_argc, in_argv, in_added_libraries)\n     }\n   if (saw_math)\n     arglist[j++] = saw_math;\n-  else if (library)\n+  else if (library && need_math)\n     {\n       arglist[j++] = MATH_LIBRARY;\n       added_libraries++;"}]}