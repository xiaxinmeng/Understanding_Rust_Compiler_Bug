{"sha": "384aa890255dc01ba6d6529b127975c2c9a49a3c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzg0YWE4OTAyNTVkYzAxYmE2ZDY1MjliMTI3OTc1YzJjOWE0OWEzYw==", "commit": {"author": {"name": "Mark Eggleston", "email": "markeggleston@gcc.gnu.org", "date": "2020-06-10T15:18:23Z"}, "committer": {"name": "Mark Eggleston", "email": "markeggleston@gcc.gnu.org", "date": "2020-06-23T06:07:23Z"}, "message": "Fortran  :  ICE in gfc_validate_kind PR95586\n\nReport syntax error for invalid letter-spec in IMPLICIT statements\nfor derived types and not an ICE.\n\nOriginal patch by Steve Kargl.  Added test cases based on those\nprovided by G. Steinmetz  in the PR.\n\n2020-06-23  Steven G. Kargl  <kargl@gcc.gnu.org>\n\ngcc/fortran/\n\n\tPR fortran/95586\n\t* decl.c (gfc_match_implicit): Only perform else branch if\n\tthe type spect is not BT_DERIVED.\n\n2020-06-23  Mark Eggleston  <markeggleston@gcc.gnu.org>\n\ngcc/testsuite/\n\n\tPR fortran/95586\n\t* gfortran.dg/pr95586_1.f90: New test.\n\t* gfortran.dg/pr95586_2.f90: New test.", "tree": {"sha": "533d6e749548418072eda32d10ec068def4d593d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/533d6e749548418072eda32d10ec068def4d593d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/384aa890255dc01ba6d6529b127975c2c9a49a3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/384aa890255dc01ba6d6529b127975c2c9a49a3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/384aa890255dc01ba6d6529b127975c2c9a49a3c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/384aa890255dc01ba6d6529b127975c2c9a49a3c/comments", "author": null, "committer": null, "parents": [{"sha": "605a8f3bbcfbc5c2d677f9eb0585db8ad15a730d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/605a8f3bbcfbc5c2d677f9eb0585db8ad15a730d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/605a8f3bbcfbc5c2d677f9eb0585db8ad15a730d"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "c27cfacf2e4ec10d98a300d6ec38e1cdb79de068", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/384aa890255dc01ba6d6529b127975c2c9a49a3c/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/384aa890255dc01ba6d6529b127975c2c9a49a3c/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=384aa890255dc01ba6d6529b127975c2c9a49a3c", "patch": "@@ -4827,7 +4827,7 @@ gfc_match_implicit (void)\n       /* Last chance -- check <TYPE> <SELECTOR> (<RANGE>).  */\n       if (ts.type == BT_CHARACTER)\n \tm = gfc_match_char_spec (&ts);\n-      else\n+      else if (ts.type != BT_DERIVED)\n \t{\n \t  m = gfc_match_kind_spec (&ts, false);\n \t  if (m == MATCH_NO)"}, {"sha": "009eb3e88f0167afb9295812a15b8196b693fc87", "filename": "gcc/testsuite/gfortran.dg/pr95586_1.f90", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/384aa890255dc01ba6d6529b127975c2c9a49a3c/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95586_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/384aa890255dc01ba6d6529b127975c2c9a49a3c/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95586_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95586_1.f90?ref=384aa890255dc01ba6d6529b127975c2c9a49a3c", "patch": "@@ -0,0 +1,9 @@\n+! { dg-do compile }\n+!\n+\n+program test\n+  implicit type(t) (1)  ! { dg-error \"Syntax error\" }\n+  type t\n+  end type\n+end program\n+"}, {"sha": "81ea6e9fa56b4161b021babc4eb5930e3c9d5331", "filename": "gcc/testsuite/gfortran.dg/pr95586_2.f90", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/384aa890255dc01ba6d6529b127975c2c9a49a3c/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95586_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/384aa890255dc01ba6d6529b127975c2c9a49a3c/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95586_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95586_2.f90?ref=384aa890255dc01ba6d6529b127975c2c9a49a3c", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+!\n+\n+program test\n+  integer, parameter :: n1 = 1\n+  implicit type(t) (n1)  ! { dg-error \"Syntax error\" }\n+  type t\n+  end type\n+end program\n+\n+"}]}