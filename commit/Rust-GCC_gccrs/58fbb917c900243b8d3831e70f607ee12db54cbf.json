{"sha": "58fbb917c900243b8d3831e70f607ee12db54cbf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NThmYmI5MTdjOTAwMjQzYjhkMzgzMWU3MGY2MDdlZTEyZGI1NGNiZg==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2007-08-18T08:34:42Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2007-08-18T08:34:42Z"}, "message": "re PR fortran/32875 (Not Implemented: complex character array constructor)\n\n2007-08-18  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/32875\n\t* trans-array.c\t(get_array_ctor_strlen): Set the character\n\tlength of a zero length array to zero.\n\n2007-08-18  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/32875\n\t* gfortran.dg/array_constructor_18.f90: New test.\n\nFrom-SVN: r127608", "tree": {"sha": "b72ad2f3086f63d2bd98f124757c97fdf7373a63", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b72ad2f3086f63d2bd98f124757c97fdf7373a63"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/58fbb917c900243b8d3831e70f607ee12db54cbf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58fbb917c900243b8d3831e70f607ee12db54cbf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58fbb917c900243b8d3831e70f607ee12db54cbf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58fbb917c900243b8d3831e70f607ee12db54cbf/comments", "author": null, "committer": null, "parents": [{"sha": "94cf78d30d6631658b1b90cfca1ae6d60ae7b91f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94cf78d30d6631658b1b90cfca1ae6d60ae7b91f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94cf78d30d6631658b1b90cfca1ae6d60ae7b91f"}], "stats": {"total": 37, "additions": 37, "deletions": 0}, "files": [{"sha": "4103e254993a84f19b86f4a70f23bb6b0f1e7e1a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58fbb917c900243b8d3831e70f607ee12db54cbf/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58fbb917c900243b8d3831e70f607ee12db54cbf/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=58fbb917c900243b8d3831e70f607ee12db54cbf", "patch": "@@ -1,3 +1,9 @@\n+2007-08-18  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/32875\n+\t* trans-array.c\t(get_array_ctor_strlen): Set the character\n+\tlength of a zero length array to zero.\n+\n 2007-08-16  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/33072"}, {"sha": "f6b4751fb7c9d0c14fcb022fdfd15a076108046b", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58fbb917c900243b8d3831e70f607ee12db54cbf/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58fbb917c900243b8d3831e70f607ee12db54cbf/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=58fbb917c900243b8d3831e70f607ee12db54cbf", "patch": "@@ -1421,6 +1421,13 @@ get_array_ctor_strlen (stmtblock_t *block, gfc_constructor * c, tree * len)\n   bool is_const;\n   \n   is_const = TRUE;\n+\n+  if (c == NULL)\n+    {\n+      *len = build_int_cstu (gfc_charlen_type_node, 0);\n+      return is_const;\n+    }\n+\n   for (; c; c = c->next)\n     {\n       switch (c->expr->expr_type)"}, {"sha": "3c01d60051507c80d35e79973c812897d4eeff47", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58fbb917c900243b8d3831e70f607ee12db54cbf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58fbb917c900243b8d3831e70f607ee12db54cbf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=58fbb917c900243b8d3831e70f607ee12db54cbf", "patch": "@@ -1,3 +1,8 @@\n+2007-08-18  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/32875\n+\t* gfortran.dg/array_constructor_18.f90: New test.\n+\n 2007-08-17  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n \tPR c++/28989"}, {"sha": "246f448063cb586c64489d0e685d9e02428fd15b", "filename": "gcc/testsuite/gfortran.dg/array_constructor_18.f90", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58fbb917c900243b8d3831e70f607ee12db54cbf/gcc%2Ftestsuite%2Fgfortran.dg%2Farray_constructor_18.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58fbb917c900243b8d3831e70f607ee12db54cbf/gcc%2Ftestsuite%2Fgfortran.dg%2Farray_constructor_18.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Farray_constructor_18.f90?ref=58fbb917c900243b8d3831e70f607ee12db54cbf", "patch": "@@ -0,0 +1,19 @@\n+! { dg-do compile }\n+! Tests the fix for PR32875, in which the character length for the\n+! array constructor would get lost in simplification and would lead\n+! the error 'Not Implemented: complex character array constructor'.\n+!\n+! Contributed by Joost VandeVondele <jv244@cam.ac.uk>\n+!\n+  call foo ((/(S1(i),i=1,3,-1)/))\n+CONTAINS\n+  FUNCTION S1(i)\n+    CHARACTER(LEN=1) :: S1\n+    INTEGER :: I\n+    S1=\"123456789\"(i:i)\n+  END FUNCTION S1\n+  subroutine foo (chr)\n+    character(1) :: chr(:)\n+    print *, chr\n+  end subroutine\n+END"}]}