{"sha": "49382b6cf985a8a8b586ff04ee035e824be6a048", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDkzODJiNmNmOTg1YThhOGI1ODZmZjA0ZWUwMzVlODI0YmU2YTA0OA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2004-10-31T09:17:40Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2004-10-31T09:17:40Z"}, "message": "re PR middle-end/17526 (libcpp is miscompiled with -fno-pcc-struct-return -O2)\n\n        PR middle-end/17526\n        * tree-gimple.c (is_gimple_mem_rhs): Also require a val for\n        aggregate types that are not BLKmode.\n\nFrom-SVN: r89915", "tree": {"sha": "2d12083f41fcd0c8a8b307416d7a1abbc45f3c68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2d12083f41fcd0c8a8b307416d7a1abbc45f3c68"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/49382b6cf985a8a8b586ff04ee035e824be6a048", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49382b6cf985a8a8b586ff04ee035e824be6a048", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49382b6cf985a8a8b586ff04ee035e824be6a048", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49382b6cf985a8a8b586ff04ee035e824be6a048/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "16b34ad6620d4c6c692bdc5c739ba4241987d346", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16b34ad6620d4c6c692bdc5c739ba4241987d346", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16b34ad6620d4c6c692bdc5c739ba4241987d346"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "50f6cb269b1966073191584c43566e4cab1fc130", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49382b6cf985a8a8b586ff04ee035e824be6a048/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49382b6cf985a8a8b586ff04ee035e824be6a048/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=49382b6cf985a8a8b586ff04ee035e824be6a048", "patch": "@@ -1,3 +1,9 @@\n+2004-10-31  Jason Merrill  <jason@redhat.com>\n+\n+\tPR middle-end/17526\n+\t* tree-gimple.c (is_gimple_mem_rhs): Also require a val for\n+\taggregate types that are not BLKmode.\n+\n 2004-10-30  Ziemowit Laski  <zlaski@apple.com>\n \n \t* c-common.h (objc_lookup_ivar): Add second parameter to"}, {"sha": "4a31c0ee98cf67d5dd13c237b2c8dacb1213befc", "filename": "gcc/tree-gimple.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49382b6cf985a8a8b586ff04ee035e824be6a048/gcc%2Ftree-gimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49382b6cf985a8a8b586ff04ee035e824be6a048/gcc%2Ftree-gimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-gimple.c?ref=49382b6cf985a8a8b586ff04ee035e824be6a048", "patch": "@@ -111,9 +111,12 @@ is_gimple_reg_rhs (tree t)\n bool\n is_gimple_mem_rhs (tree t)\n {\n-  /* If we're dealing with a renamable type, either source or dest\n-     must be a renamed variable.  */\n-  if (is_gimple_reg_type (TREE_TYPE (t)))\n+  /* If we're dealing with a renamable type, either source or dest must be\n+     a renamed variable.  Also force a temporary if the type doesn't need\n+     to be stored in memory, since it's cheap and prevents erroneous\n+     tailcalls (PR 17526).  */\n+  if (is_gimple_reg_type (TREE_TYPE (t))\n+      || TYPE_MODE (TREE_TYPE (t)) != BLKmode)\n     return is_gimple_val (t);\n   else\n     return is_gimple_formal_tmp_rhs (t);"}]}