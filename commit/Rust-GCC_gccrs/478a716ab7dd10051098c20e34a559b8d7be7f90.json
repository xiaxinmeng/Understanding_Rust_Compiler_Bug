{"sha": "478a716ab7dd10051098c20e34a559b8d7be7f90", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDc4YTcxNmFiN2RkMTAwNTEwOThjMjBlMzRhNTU5YjhkN2JlN2Y5MA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2009-10-12T21:04:35Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2009-10-12T21:04:35Z"}, "message": "re PR c++/37875 ([c++0x] misinterpreted closing angle bracket in decltype operand)\n\n\tPR c++/37875\n\t* parser.c (cp_parser_decltype): Set greater_than_is_operator_p.\n\nFrom-SVN: r152686", "tree": {"sha": "09f93fa7f8eb55dca6be8e81e88acaa1a4766a8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/09f93fa7f8eb55dca6be8e81e88acaa1a4766a8f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/478a716ab7dd10051098c20e34a559b8d7be7f90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/478a716ab7dd10051098c20e34a559b8d7be7f90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/478a716ab7dd10051098c20e34a559b8d7be7f90", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/478a716ab7dd10051098c20e34a559b8d7be7f90/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "23f392e0191bc5d193c1cdbacc92fa4814078eb1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23f392e0191bc5d193c1cdbacc92fa4814078eb1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23f392e0191bc5d193c1cdbacc92fa4814078eb1"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "7765c73b9de63261061e805de7eda831a63bf8de", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/478a716ab7dd10051098c20e34a559b8d7be7f90/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/478a716ab7dd10051098c20e34a559b8d7be7f90/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=478a716ab7dd10051098c20e34a559b8d7be7f90", "patch": "@@ -1,5 +1,8 @@\n 2009-10-12  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/37875\n+\t* parser.c (cp_parser_decltype): Set greater_than_is_operator_p.\n+\n \tPR c++/37766\n \t* pt.c (type_unification_real): Call convert_template_argument\n \tfor function default template arguments."}, {"sha": "5e37343294b5ec50b5a208906f10dcd3802680f8", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/478a716ab7dd10051098c20e34a559b8d7be7f90/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/478a716ab7dd10051098c20e34a559b8d7be7f90/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=478a716ab7dd10051098c20e34a559b8d7be7f90", "patch": "@@ -9541,12 +9541,25 @@ cp_parser_decltype (cp_parser *parser)\n     cp_parser_parse_definitely (parser);\n   else\n     {\n+      bool saved_greater_than_is_operator_p;\n+\n       /* Abort our attempt to parse an id-expression or member access\n          expression.  */\n       cp_parser_abort_tentative_parse (parser);\n \n+      /* Within a parenthesized expression, a `>' token is always\n+\t the greater-than operator.  */\n+      saved_greater_than_is_operator_p\n+\t= parser->greater_than_is_operator_p;\n+      parser->greater_than_is_operator_p = true;\n+\n       /* Parse a full expression.  */\n       expr = cp_parser_expression (parser, /*cast_p=*/false, NULL);\n+\n+      /* The `>' token might be the end of a template-id or\n+\t template-parameter-list now.  */\n+      parser->greater_than_is_operator_p\n+\t= saved_greater_than_is_operator_p;\n     }\n \n   /* Go back to evaluating expressions.  */"}, {"sha": "32b2ea4f8b40e92a24da2e45ebf5d4a7e52b0620", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/478a716ab7dd10051098c20e34a559b8d7be7f90/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/478a716ab7dd10051098c20e34a559b8d7be7f90/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=478a716ab7dd10051098c20e34a559b8d7be7f90", "patch": "@@ -1,5 +1,8 @@\n 2009-10-12  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/37875\n+\t* g++.dg/cpp0x/decltype18.C: New.\n+\n \tPR c++/37766\n \t* g++.dg/cpp0x/fntmpdefarg1.C: New.\n "}, {"sha": "0d44586e9d2621bfda90128c826c9f0a4cb3f875", "filename": "gcc/testsuite/g++.dg/cpp0x/decltype18.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/478a716ab7dd10051098c20e34a559b8d7be7f90/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype18.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/478a716ab7dd10051098c20e34a559b8d7be7f90/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype18.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype18.C?ref=478a716ab7dd10051098c20e34a559b8d7be7f90", "patch": "@@ -0,0 +1,5 @@\n+// PR c++/37875\n+// { dg-options \"-std=c++0x\" }\n+\n+template <typename> struct X {};\n+X<decltype(1 > 2)> x;"}]}