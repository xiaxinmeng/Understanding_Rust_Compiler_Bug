{"sha": "22b139e167cdd083f3e38280e1db5880d05a130b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjJiMTM5ZTE2N2NkZDA4M2YzZTM4MjgwZTFkYjU4ODBkMDVhMTMwYg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-08-25T14:44:46Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-08-25T14:44:46Z"}, "message": "trans-decl.c (gfc_build_intrinsic_function_decls): Set TREE_NOTHROW on fndecls that can't throw.\n\n\t* trans-decl.c (gfc_build_intrinsic_function_decls): Set\n\tTREE_NOTHROW on fndecls that can't throw.  Set\n\tTREE_READONLY on gfor_fndecl_math_ishftc{4,8,16}.\n\t(gfc_build_builtin_function_decls): Set TREE_NOTHROW on\n\tgfor_fndecl_associated.\n\nFrom-SVN: r163548", "tree": {"sha": "15c29ea9bc1dcd5feb2f024cd1ab96941a4a1986", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/15c29ea9bc1dcd5feb2f024cd1ab96941a4a1986"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/22b139e167cdd083f3e38280e1db5880d05a130b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22b139e167cdd083f3e38280e1db5880d05a130b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22b139e167cdd083f3e38280e1db5880d05a130b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22b139e167cdd083f3e38280e1db5880d05a130b/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0cdf7b49f10deeba7d5ba2ab3cedd4625718efef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cdf7b49f10deeba7d5ba2ab3cedd4625718efef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0cdf7b49f10deeba7d5ba2ab3cedd4625718efef"}], "stats": {"total": 48, "additions": 47, "deletions": 1}, "files": [{"sha": "58eaf1556167b0d30231acbe6b5da3d854edff99", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b139e167cdd083f3e38280e1db5880d05a130b/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b139e167cdd083f3e38280e1db5880d05a130b/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=22b139e167cdd083f3e38280e1db5880d05a130b", "patch": "@@ -1,3 +1,11 @@\n+2010-08-25  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* trans-decl.c (gfc_build_intrinsic_function_decls): Set\n+\tTREE_NOTHROW on fndecls that can't throw.  Set\n+\tTREE_READONLY on gfor_fndecl_math_ishftc{4,8,16}.\n+\t(gfc_build_builtin_function_decls): Set TREE_NOTHROW on\n+\tgfor_fndecl_associated.\n+\n 2010-08-23  Mikael Morin  <mikael@gcc.gnu.org>\n \n \tPR fortran/45380"}, {"sha": "5a73b4cd97e7b10ba8f11bc9f15514adbfd50481", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 39, "deletions": 1, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b139e167cdd083f3e38280e1db5880d05a130b/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b139e167cdd083f3e38280e1db5880d05a130b/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=22b139e167cdd083f3e38280e1db5880d05a130b", "patch": "@@ -2444,35 +2444,41 @@ gfc_build_intrinsic_function_decls (void)\n \tinteger_type_node, 4, gfc_charlen_type_node, pchar1_type_node,\n \tgfc_charlen_type_node, pchar1_type_node);\n   DECL_PURE_P (gfor_fndecl_compare_string) = 1;\n+  TREE_NOTHROW (gfor_fndecl_compare_string) = 1;\n \n   gfor_fndecl_concat_string = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"concat_string\")), \"..W.R.R\",\n \tvoid_type_node, 6, gfc_charlen_type_node, pchar1_type_node,\n \tgfc_charlen_type_node, pchar1_type_node,\n \tgfc_charlen_type_node, pchar1_type_node);\n+  TREE_NOTHROW (gfor_fndecl_concat_string) = 1;\n \n   gfor_fndecl_string_len_trim = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_len_trim\")), \"..R\",\n \tgfc_charlen_type_node, 2, gfc_charlen_type_node, pchar1_type_node);\n   DECL_PURE_P (gfor_fndecl_string_len_trim) = 1;\n+  TREE_NOTHROW (gfor_fndecl_string_len_trim) = 1;\n \n   gfor_fndecl_string_index = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_index\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar1_type_node,\n \tgfc_charlen_type_node, pchar1_type_node, gfc_logical4_type_node);\n   DECL_PURE_P (gfor_fndecl_string_index) = 1;\n+  TREE_NOTHROW (gfor_fndecl_string_index) = 1;\n \n   gfor_fndecl_string_scan = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_scan\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar1_type_node,\n \tgfc_charlen_type_node, pchar1_type_node, gfc_logical4_type_node);\n   DECL_PURE_P (gfor_fndecl_string_scan) = 1;\n+  TREE_NOTHROW (gfor_fndecl_string_scan) = 1;\n \n   gfor_fndecl_string_verify = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_verify\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar1_type_node,\n \tgfc_charlen_type_node, pchar1_type_node, gfc_logical4_type_node);\n   DECL_PURE_P (gfor_fndecl_string_verify) = 1;\n+  TREE_NOTHROW (gfor_fndecl_string_verify) = 1;\n \n   gfor_fndecl_string_trim = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_trim\")), \".Ww.R\",\n@@ -2490,52 +2496,61 @@ gfc_build_intrinsic_function_decls (void)\n \tget_identifier (PREFIX(\"adjustl\")), \".W.R\",\n \tvoid_type_node, 3, pchar1_type_node, gfc_charlen_type_node,\n \tpchar1_type_node);\n+  TREE_NOTHROW (gfor_fndecl_adjustl) = 1;\n \n   gfor_fndecl_adjustr = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"adjustr\")), \".W.R\",\n \tvoid_type_node, 3, pchar1_type_node, gfc_charlen_type_node,\n \tpchar1_type_node);\n+  TREE_NOTHROW (gfor_fndecl_adjustr) = 1;\n \n   gfor_fndecl_select_string =  gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"select_string\")), \".R.R.\",\n \tinteger_type_node, 4, pvoid_type_node, integer_type_node,\n \tpchar1_type_node, gfc_charlen_type_node);\n   DECL_PURE_P (gfor_fndecl_select_string) = 1;\n+  TREE_NOTHROW (gfor_fndecl_select_string) = 1;\n \n   gfor_fndecl_compare_string_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"compare_string_char4\")), \"..R.R\",\n \tinteger_type_node, 4, gfc_charlen_type_node, pchar4_type_node,\n \tgfc_charlen_type_node, pchar4_type_node);\n   DECL_PURE_P (gfor_fndecl_compare_string_char4) = 1;\n+  TREE_NOTHROW (gfor_fndecl_compare_string_char4) = 1;\n \n   gfor_fndecl_concat_string_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"concat_string_char4\")), \"..W.R.R\",\n \tvoid_type_node, 6, gfc_charlen_type_node, pchar4_type_node,\n \tgfc_charlen_type_node, pchar4_type_node, gfc_charlen_type_node,\n \tpchar4_type_node);\n+  TREE_NOTHROW (gfor_fndecl_concat_string_char4) = 1;\n \n   gfor_fndecl_string_len_trim_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_len_trim_char4\")), \"..R\",\n \tgfc_charlen_type_node, 2, gfc_charlen_type_node, pchar4_type_node);\n   DECL_PURE_P (gfor_fndecl_string_len_trim_char4) = 1;\n+  TREE_NOTHROW (gfor_fndecl_string_len_trim_char4) = 1;\n \n   gfor_fndecl_string_index_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_index_char4\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar4_type_node,\n \tgfc_charlen_type_node, pchar4_type_node, gfc_logical4_type_node);\n   DECL_PURE_P (gfor_fndecl_string_index_char4) = 1;\n+  TREE_NOTHROW (gfor_fndecl_string_index_char4) = 1;\n \n   gfor_fndecl_string_scan_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_scan_char4\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar4_type_node,\n \tgfc_charlen_type_node, pchar4_type_node, gfc_logical4_type_node);\n   DECL_PURE_P (gfor_fndecl_string_scan_char4) = 1;\n+  TREE_NOTHROW (gfor_fndecl_string_scan_char4) = 1;\n \n   gfor_fndecl_string_verify_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_verify_char4\")), \"..R.R.\",\n \tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar4_type_node,\n \tgfc_charlen_type_node, pchar4_type_node, gfc_logical4_type_node);\n   DECL_PURE_P (gfor_fndecl_string_verify_char4) = 1;\n+  TREE_NOTHROW (gfor_fndecl_string_verify_char4) = 1;\n \n   gfor_fndecl_string_trim_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"string_trim_char4\")), \".Ww.R\",\n@@ -2553,17 +2568,20 @@ gfc_build_intrinsic_function_decls (void)\n \tget_identifier (PREFIX(\"adjustl_char4\")), \".W.R\",\n \tvoid_type_node, 3, pchar4_type_node, gfc_charlen_type_node,\n \tpchar4_type_node);\n+  TREE_NOTHROW (gfor_fndecl_adjustl_char4) = 1;\n \n   gfor_fndecl_adjustr_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"adjustr_char4\")), \".W.R\",\n \tvoid_type_node, 3, pchar4_type_node, gfc_charlen_type_node,\n \tpchar4_type_node);\n+  TREE_NOTHROW (gfor_fndecl_adjustr_char4) = 1;\n \n   gfor_fndecl_select_string_char4 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"select_string_char4\")), \".R.R.\",\n \tinteger_type_node, 4, pvoid_type_node, integer_type_node,\n \tpvoid_type_node, gfc_charlen_type_node);\n   DECL_PURE_P (gfor_fndecl_select_string_char4) = 1;\n+  TREE_NOTHROW (gfor_fndecl_select_string_char4) = 1;\n \n \n   /* Conversion between character kinds.  */\n@@ -2598,17 +2616,20 @@ gfc_build_intrinsic_function_decls (void)\n \tget_identifier (PREFIX(\"selected_char_kind\")), \"..R\",\n \tgfc_int4_type_node, 2, gfc_charlen_type_node, pchar_type_node);\n   DECL_PURE_P (gfor_fndecl_sc_kind) = 1;\n+  TREE_NOTHROW (gfor_fndecl_sc_kind) = 1;\n \n   gfor_fndecl_si_kind = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"selected_int_kind\")), \".R\",\n \tgfc_int4_type_node, 1, pvoid_type_node);\n   DECL_PURE_P (gfor_fndecl_si_kind) = 1;\n+  TREE_NOTHROW (gfor_fndecl_si_kind) = 1;\n \n   gfor_fndecl_sr_kind = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"selected_real_kind2008\")), \".RR\",\n \tgfc_int4_type_node, 3, pvoid_type_node, pvoid_type_node,\n \tpvoid_type_node);\n   DECL_PURE_P (gfor_fndecl_sr_kind) = 1;\n+  TREE_NOTHROW (gfor_fndecl_sr_kind) = 1;\n \n   /* Power functions.  */\n   {\n@@ -2635,6 +2656,7 @@ gfc_build_intrinsic_function_decls (void)\n \t\t  gfc_build_library_function_decl (get_identifier (name),\n \t\t    jtype, 2, jtype, itype);\n \t\tTREE_READONLY (gfor_fndecl_math_powi[jkind][ikind].integer) = 1;\n+\t\tTREE_NOTHROW (gfor_fndecl_math_powi[jkind][ikind].integer) = 1;\n \t      }\n \t  }\n \n@@ -2649,6 +2671,7 @@ gfc_build_intrinsic_function_decls (void)\n \t\t  gfc_build_library_function_decl (get_identifier (name),\n \t\t    rtype, 2, rtype, itype);\n \t\tTREE_READONLY (gfor_fndecl_math_powi[rkind][ikind].real) = 1;\n+\t\tTREE_NOTHROW (gfor_fndecl_math_powi[rkind][ikind].real) = 1;\n \t      }\n \n \t    ctype = gfc_get_complex_type (rkinds[rkind]);\n@@ -2660,6 +2683,7 @@ gfc_build_intrinsic_function_decls (void)\n \t\t  gfc_build_library_function_decl (get_identifier (name),\n \t\t    ctype, 2,ctype, itype);\n \t\tTREE_READONLY (gfor_fndecl_math_powi[rkind][ikind].cmplx) = 1;\n+\t\tTREE_NOTHROW (gfor_fndecl_math_powi[rkind][ikind].cmplx) = 1;\n \t      }\n \t  }\n       }\n@@ -2671,17 +2695,25 @@ gfc_build_intrinsic_function_decls (void)\n \tget_identifier (PREFIX(\"ishftc4\")),\n \tgfc_int4_type_node, 3, gfc_int4_type_node, gfc_int4_type_node,\n \tgfc_int4_type_node);\n+  TREE_READONLY (gfor_fndecl_math_ishftc4) = 1;\n+  TREE_NOTHROW (gfor_fndecl_math_ishftc4) = 1;\n \t\n   gfor_fndecl_math_ishftc8 = gfc_build_library_function_decl (\n \tget_identifier (PREFIX(\"ishftc8\")),\n \tgfc_int8_type_node, 3, gfc_int8_type_node, gfc_int4_type_node,\n \tgfc_int4_type_node);\n+  TREE_READONLY (gfor_fndecl_math_ishftc8) = 1;\n+  TREE_NOTHROW (gfor_fndecl_math_ishftc8) = 1;\n \n   if (gfc_int16_type_node)\n-    gfor_fndecl_math_ishftc16 = gfc_build_library_function_decl (\n+    {\n+      gfor_fndecl_math_ishftc16 = gfc_build_library_function_decl (\n \tget_identifier (PREFIX(\"ishftc16\")),\n \tgfc_int16_type_node, 3, gfc_int16_type_node, gfc_int4_type_node,\n \tgfc_int4_type_node);\n+      TREE_READONLY (gfor_fndecl_math_ishftc16) = 1;\n+      TREE_NOTHROW (gfor_fndecl_math_ishftc16) = 1;\n+    }\n \n   /* BLAS functions.  */\n   {\n@@ -2731,14 +2763,17 @@ gfc_build_intrinsic_function_decls (void)\n \tget_identifier (PREFIX(\"size0\")), \".R\",\n \tgfc_array_index_type, 1, pvoid_type_node);\n   DECL_PURE_P (gfor_fndecl_size0) = 1;\n+  TREE_NOTHROW (gfor_fndecl_size0) = 1;\n \n   gfor_fndecl_size1 = gfc_build_library_function_decl_with_spec (\n \tget_identifier (PREFIX(\"size1\")), \".R\",\n \tgfc_array_index_type, 2, pvoid_type_node, gfc_array_index_type);\n   DECL_PURE_P (gfor_fndecl_size1) = 1;\n+  TREE_NOTHROW (gfor_fndecl_size1) = 1;\n \n   gfor_fndecl_iargc = gfc_build_library_function_decl (\n \tget_identifier (PREFIX (\"iargc\")), gfc_int4_type_node, 0);\n+  TREE_NOTHROW (gfor_fndecl_iargc) = 1;\n \n   if (gfc_type_for_size (128, true))\n     {\n@@ -2747,10 +2782,12 @@ gfc_build_intrinsic_function_decls (void)\n       gfor_fndecl_clz128 = gfc_build_library_function_decl (\n \tget_identifier (PREFIX (\"clz128\")), integer_type_node, 1, uint128);\n       TREE_READONLY (gfor_fndecl_clz128) = 1;\n+      TREE_NOTHROW (gfor_fndecl_clz128) = 1;\n \n       gfor_fndecl_ctz128 = gfc_build_library_function_decl (\n \tget_identifier (PREFIX (\"ctz128\")), integer_type_node, 1, uint128);\n       TREE_READONLY (gfor_fndecl_ctz128) = 1;\n+      TREE_NOTHROW (gfor_fndecl_ctz128) = 1;\n     }\n }\n \n@@ -2860,6 +2897,7 @@ gfc_build_builtin_function_decls (void)\n \tget_identifier (PREFIX(\"associated\")), \".RR\",\n \tinteger_type_node, 2, ppvoid_type_node, ppvoid_type_node);\n   DECL_PURE_P (gfor_fndecl_associated) = 1;\n+  TREE_NOTHROW (gfor_fndecl_associated) = 1;\n \n   gfc_build_intrinsic_function_decls ();\n   gfc_build_intrinsic_lib_fndecls ();"}]}