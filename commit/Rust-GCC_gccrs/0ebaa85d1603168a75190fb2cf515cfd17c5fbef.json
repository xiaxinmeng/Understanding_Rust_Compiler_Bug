{"sha": "0ebaa85d1603168a75190fb2cf515cfd17c5fbef", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGViYWE4NWQxNjAzMTY4YTc1MTkwZmIyY2Y1MTVjZmQxN2M1ZmJlZg==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1997-05-02T19:29:41Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1997-05-02T19:29:41Z"}, "message": "m32r.h (LIT_NAME_P): New macro.\n\n\t* m32r/m32r.h (LIT_NAME_P): New macro.\n\t(SMALL_NAME_P): Use it.\n\t(ASM_OUTPUT_ALIGNED_COMMON): Don't output to scommon if -msdata=none.\n\nFrom-SVN: r14012", "tree": {"sha": "99f7dc24ae96e12aa7b29c146abb448a5607b295", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/99f7dc24ae96e12aa7b29c146abb448a5607b295"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ebaa85d1603168a75190fb2cf515cfd17c5fbef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ebaa85d1603168a75190fb2cf515cfd17c5fbef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ebaa85d1603168a75190fb2cf515cfd17c5fbef", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ebaa85d1603168a75190fb2cf515cfd17c5fbef/comments", "author": null, "committer": null, "parents": [{"sha": "189e03e322d6db5a1a36ce1cfdc8f76338520edf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/189e03e322d6db5a1a36ce1cfdc8f76338520edf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/189e03e322d6db5a1a36ce1cfdc8f76338520edf"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "09d1c6a967e78a926c5abc1692d552bd37baa720", "filename": "gcc/config/m32r/m32r.h", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ebaa85d1603168a75190fb2cf515cfd17c5fbef/gcc%2Fconfig%2Fm32r%2Fm32r.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ebaa85d1603168a75190fb2cf515cfd17c5fbef/gcc%2Fconfig%2Fm32r%2Fm32r.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32r%2Fm32r.h?ref=0ebaa85d1603168a75190fb2cf515cfd17c5fbef", "patch": "@@ -1417,9 +1417,11 @@ extern void m32r_select_section ();\n \n #define SDATA_NAME_P(NAME) (*(NAME) == SDATA_FLAG_CHAR)\n /*#define SMALL_NAME_P(NAME) (*(NAME) == SMALL_FLAG_CHAR)*/\n-#define SMALL_NAME_P(NAME) (! ENCODED_NAME_P (NAME))\n+#define SMALL_NAME_P(NAME) (! ENCODED_NAME_P (NAME) && ! LIT_NAME_P (NAME))\n #define MEDIUM_NAME_P(NAME) (*(NAME) == MEDIUM_FLAG_CHAR)\n #define LARGE_NAME_P(NAME) (*(NAME) == LARGE_FLAG_CHAR)\n+/* For string literals, etc.  */\n+#define LIT_NAME_P(NAME) ((NAME)[0] == '*' && (NAME)[1] == '.')\n \n #define ENCODED_NAME_P(SYMBOL_NAME) \\\n (SDATA_NAME_P (SYMBOL_NAME) \\\n@@ -1433,7 +1435,7 @@ extern void m32r_encode_section_info ();\n /* Decode SYM_NAME and store the real name part in VAR, sans\n    the characters that encode section info.  Define this macro if\n    ENCODE_SECTION_INFO alters the symbol's name string.  */\n-/* Note that we have to handle symbols like \"#*start\".  */\n+/* Note that we have to handle symbols like \"%*start\".  */\n #define STRIP_NAME_ENCODING(VAR, SYMBOL_NAME) \\\n do {\t\t\t\t\t\t\t\\\n   (VAR) = (SYMBOL_NAME) + ENCODED_NAME_P (SYMBOL_NAME);\t\\\n@@ -1696,7 +1698,8 @@ do { if ((LOG) != 0) fprintf (FILE, \"\\t.balign %d\\n\", 1 << (LOG)); } while (0)\n #undef ASM_OUTPUT_ALIGNED_COMMON\n #define ASM_OUTPUT_ALIGNED_COMMON(FILE, NAME, SIZE, ALIGN) \\\n do {\t\t\t\t\t\t\t\t\t\\\n-  if ((SIZE) > 0 && (SIZE) <= g_switch_value)\t\t\t\t\\\n+  if (! TARGET_SDATA_NONE\t\t\t\t\t\t\\\n+      && (SIZE) > 0 && (SIZE) <= g_switch_value)\t\t\t\\\n     fprintf ((FILE), \"\\t%s\\t\", SCOMMON_ASM_OP);\t\t\t\t\\\n   else\t\t\t\t\t\t\t\t\t\\\n     fprintf ((FILE), \"\\t%s\\t\", COMMON_ASM_OP);\t\t\t\t\\"}]}