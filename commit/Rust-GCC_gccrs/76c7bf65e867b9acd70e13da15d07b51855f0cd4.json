{"sha": "76c7bf65e867b9acd70e13da15d07b51855f0cd4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzZjN2JmNjVlODY3YjlhY2Q3MGUxM2RhMTVkMDdiNTE4NTVmMGNkNA==", "commit": {"author": {"name": "Marc Glisse", "email": "marc.glisse@inria.fr", "date": "2013-07-09T15:55:49Z"}, "committer": {"name": "Marc Glisse", "email": "glisse@gcc.gnu.org", "date": "2013-07-09T15:55:49Z"}, "message": "re PR c++/53000 (Conditional operator does not behave as standardized)\n\n2013-07-09  Marc Glisse  <marc.glisse@inria.fr>\n\n\tPR c++/53000\ngcc/cp/\n\t* call.c (build_conditional_expr_1): Preserve xvalues.\n\ngcc/testsuite/\n\t* g++.dg/cpp0x/decltype17.C: Adjust.\n\nFrom-SVN: r200821", "tree": {"sha": "f3540adac81c02d11b3ff83bf0b6e332e01c1195", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f3540adac81c02d11b3ff83bf0b6e332e01c1195"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76c7bf65e867b9acd70e13da15d07b51855f0cd4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76c7bf65e867b9acd70e13da15d07b51855f0cd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76c7bf65e867b9acd70e13da15d07b51855f0cd4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76c7bf65e867b9acd70e13da15d07b51855f0cd4/comments", "author": {"login": "mglisse", "id": 10097863, "node_id": "MDQ6VXNlcjEwMDk3ODYz", "avatar_url": "https://avatars.githubusercontent.com/u/10097863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mglisse", "html_url": "https://github.com/mglisse", "followers_url": "https://api.github.com/users/mglisse/followers", "following_url": "https://api.github.com/users/mglisse/following{/other_user}", "gists_url": "https://api.github.com/users/mglisse/gists{/gist_id}", "starred_url": "https://api.github.com/users/mglisse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mglisse/subscriptions", "organizations_url": "https://api.github.com/users/mglisse/orgs", "repos_url": "https://api.github.com/users/mglisse/repos", "events_url": "https://api.github.com/users/mglisse/events{/privacy}", "received_events_url": "https://api.github.com/users/mglisse/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b3ebe3d0e004af8b8569ff847bb636b53163fce6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3ebe3d0e004af8b8569ff847bb636b53163fce6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3ebe3d0e004af8b8569ff847bb636b53163fce6"}], "stats": {"total": 21, "additions": 16, "deletions": 5}, "files": [{"sha": "6a04e58fcd3b2ebb1c63c56a4f16cda981676f61", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76c7bf65e867b9acd70e13da15d07b51855f0cd4/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76c7bf65e867b9acd70e13da15d07b51855f0cd4/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=76c7bf65e867b9acd70e13da15d07b51855f0cd4", "patch": "@@ -1,3 +1,8 @@\n+2013-07-09  Marc Glisse  <marc.glisse@inria.fr>\n+\n+\tPR c++/53000\n+\t* call.c (build_conditional_expr_1): Preserve xvalues.\n+\n 2013-07-09  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/51786"}, {"sha": "78899aba1a600e35e8603b70f56a928ef334b70c", "filename": "gcc/cp/call.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76c7bf65e867b9acd70e13da15d07b51855f0cd4/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76c7bf65e867b9acd70e13da15d07b51855f0cd4/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=76c7bf65e867b9acd70e13da15d07b51855f0cd4", "patch": "@@ -4641,10 +4641,11 @@ build_conditional_expr_1 (location_t loc, tree arg1, tree arg2, tree arg3,\n \n   /* [expr.cond]\n \n-     If the second and third operands are lvalues and have the same\n-     type, the result is of that type and is an lvalue.  */\n-  if (real_lvalue_p (arg2)\n-      && real_lvalue_p (arg3)\n+     If the second and third operands are glvalues of the same value\n+     category and have the same type, the result is of that type and\n+     value category.  */\n+  if (((real_lvalue_p (arg2) && real_lvalue_p (arg3))\n+       || (xvalue_p (arg2) && xvalue_p (arg3)))\n       && same_type_p (arg2_type, arg3_type))\n     {\n       result_type = arg2_type;"}, {"sha": "573d78a2726c4808349f744a9bb9792496649520", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76c7bf65e867b9acd70e13da15d07b51855f0cd4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76c7bf65e867b9acd70e13da15d07b51855f0cd4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=76c7bf65e867b9acd70e13da15d07b51855f0cd4", "patch": "@@ -1,3 +1,8 @@\n+2013-07-09  Marc Glisse  <marc.glisse@inria.fr>\n+\n+\tPR c++/53000\n+\t* g++.dg/cpp0x/decltype17.C: Adjust.\n+\n 2013-07-09  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/51786"}, {"sha": "7f36ff01e50023f70bdf946ca22a57a251451229", "filename": "gcc/testsuite/g++.dg/cpp0x/decltype17.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76c7bf65e867b9acd70e13da15d07b51855f0cd4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype17.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76c7bf65e867b9acd70e13da15d07b51855f0cd4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype17.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype17.C?ref=76c7bf65e867b9acd70e13da15d07b51855f0cd4", "patch": "@@ -24,6 +24,6 @@ int main()\n     return 1;\n   if (strcmp (typeid(g).name(), \"FRivE\") != 0)\n     return 2;\n-  if (strcmp (typeid(h).name(), \"FivE\") != 0)\n+  if (strcmp (typeid(h).name(), \"FOivE\") != 0)\n     return 3;\n }"}]}