{"sha": "6ac8b2b1875676cf49c653fd7c01b6460a7ebf97", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmFjOGIyYjE4NzU2NzZjZjQ5YzY1M2ZkN2MwMWI2NDYwYTdlYmY5Nw==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@mckinlay.net.nz", "date": "2003-10-28T22:45:57Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2003-10-28T22:45:57Z"}, "message": "natClass.cc (_Jv_LayoutVTableMethods): Always assign a vtable slot for final methods.\n\n\t* java/lang/natClass.cc (_Jv_LayoutVTableMethods): Always assign a\n\tvtable slot for final methods. Add FIXME comment.\n\nFrom-SVN: r73023", "tree": {"sha": "01346d3d88fd9797848818d1d1f451003338ed3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/01346d3d88fd9797848818d1d1f451003338ed3d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ac8b2b1875676cf49c653fd7c01b6460a7ebf97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ac8b2b1875676cf49c653fd7c01b6460a7ebf97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ac8b2b1875676cf49c653fd7c01b6460a7ebf97", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ac8b2b1875676cf49c653fd7c01b6460a7ebf97/comments", "author": null, "committer": null, "parents": [{"sha": "e2d0915cc9b500b89fa38572d23bdd69338fdbc7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2d0915cc9b500b89fa38572d23bdd69338fdbc7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2d0915cc9b500b89fa38572d23bdd69338fdbc7"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "ee48557e0b0fb8e603e770cbb1a93e78d5bcaae6", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ac8b2b1875676cf49c653fd7c01b6460a7ebf97/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ac8b2b1875676cf49c653fd7c01b6460a7ebf97/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=6ac8b2b1875676cf49c653fd7c01b6460a7ebf97", "patch": "@@ -1,3 +1,8 @@\n+2003-10-28  Bryce McKinlay  <bryce@mckinlay.net.nz>\n+\n+\t* java/lang/natClass.cc (_Jv_LayoutVTableMethods): Always assign a\n+\tvtable slot for final methods. Add FIXME comment.\n+\n 2003-10-28  David S. Miller  <davem@redhat.com>\n \n \t* sysdep/sparc/locks.h (__cas_start_atomic): %g0 --> %%g0."}, {"sha": "155d1b997df3cfe9f01283e188d612dc707ea9d6", "filename": "libjava/java/lang/natClass.cc", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ac8b2b1875676cf49c653fd7c01b6460a7ebf97/libjava%2Fjava%2Flang%2FnatClass.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ac8b2b1875676cf49c653fd7c01b6460a7ebf97/libjava%2Fjava%2Flang%2FnatClass.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClass.cc?ref=6ac8b2b1875676cf49c653fd7c01b6460a7ebf97", "patch": "@@ -1835,6 +1835,12 @@ _Jv_LayoutVTableMethods (jclass klass)\n       if (! _Jv_isVirtualMethod (meth))\n \tcontinue;\n \n+      // FIXME: Must check that we don't override:\n+      // - Package-private method where superclass is in different package.\n+      // - Final or less-accessible declaration in superclass (check binary \n+      //   spec, do we allocate new vtable entry or put throw node in vtable?)\n+      // - Static or private method in superclass.\n+\n       if (superclass != NULL)\n \t{\n \t  super_meth = _Jv_LookupDeclaredMethod (superclass, meth->name, \n@@ -1843,8 +1849,7 @@ _Jv_LayoutVTableMethods (jclass klass)\n \n       if (super_meth)\n         meth->index = super_meth->index;\n-      else if (! (meth->accflags & java::lang::reflect::Modifier::FINAL)\n-\t       && ! (klass->accflags & java::lang::reflect::Modifier::FINAL))\n+      else\n \tmeth->index = index++;\n     }\n "}]}