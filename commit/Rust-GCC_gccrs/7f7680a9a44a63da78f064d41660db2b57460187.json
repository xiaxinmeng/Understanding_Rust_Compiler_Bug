{"sha": "7f7680a9a44a63da78f064d41660db2b57460187", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Y3NjgwYTlhNDRhNjNkYTc4ZjA2NGQ0MTY2MGRiMmI1NzQ2MDE4Nw==", "commit": {"author": {"name": "Michael Hayes", "email": "m.hayes@elec.canterbury.ac.nz", "date": "2000-01-13T10:43:35Z"}, "committer": {"name": "Michael Hayes", "email": "m.hayes@gcc.gnu.org", "date": "2000-01-13T10:43:35Z"}, "message": "stor-layout.c (layout_type): Use FORCE_STRUCT_BLK.\n\n\t* stor-layout.c (layout_type): Use FORCE_STRUCT_BLK.\n\t* tm.texi (FORCE_STRUCT_BLK): Document.\n\t* config/c4x/c4x.h (FORCE_STRUCT_BLK): New macro.\n\nFrom-SVN: r31385", "tree": {"sha": "174b996c97c3d482dba85461cbd36b0c82d92621", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/174b996c97c3d482dba85461cbd36b0c82d92621"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f7680a9a44a63da78f064d41660db2b57460187", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f7680a9a44a63da78f064d41660db2b57460187", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f7680a9a44a63da78f064d41660db2b57460187", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f7680a9a44a63da78f064d41660db2b57460187/comments", "author": null, "committer": null, "parents": [{"sha": "8f496bc2d55cbb3725c964b79af0f86eb1876a63", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f496bc2d55cbb3725c964b79af0f86eb1876a63", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f496bc2d55cbb3725c964b79af0f86eb1876a63"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "cc95cab01bc72adb424c3ab46ef7a843c78b65c4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f7680a9a44a63da78f064d41660db2b57460187/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f7680a9a44a63da78f064d41660db2b57460187/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7f7680a9a44a63da78f064d41660db2b57460187", "patch": "@@ -1,3 +1,9 @@\n+2000-01-13  Michael Hayes  <m.hayes@elec.canterbury.ac.nz>\n+\n+\t* stor-layout.c (layout_type): Use FORCE_STRUCT_BLK.\n+\t* tm.texi (FORCE_STRUCT_BLK): Document.\n+\t* config/c4x/c4x.h (FORCE_STRUCT_BLK): New macro.\n+\n Wed Jan 12 23:12:47 2000  Hans-Peter Nilsson  <hp@axis.com>\n \n \t* config/ns32k/ns32k.md: Revert Jan 9 change."}, {"sha": "470d657801049f7eca6d4364ff2ed1b8c9989e27", "filename": "gcc/config/c4x/c4x.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f7680a9a44a63da78f064d41660db2b57460187/gcc%2Fconfig%2Fc4x%2Fc4x.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f7680a9a44a63da78f064d41660db2b57460187/gcc%2Fconfig%2Fc4x%2Fc4x.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fc4x%2Fc4x.h?ref=7f7680a9a44a63da78f064d41660db2b57460187", "patch": "@@ -352,6 +352,10 @@ extern const char *c4x_rpts_cycles_string, *c4x_cpu_version_string;\n #define TARGET_FLOAT_FORMAT\tC4X_FLOAT_FORMAT\n #define MAX_FIXED_MODE_SIZE\t64 /* HImode.  */\n \n+/* If a structure has a floating point field then force structure\n+   to have BLKMODE.  */\n+#define STRUCT_FORCE_BLK(FIELD) (TREE_CODE (TREE_TYPE (FIELD)) == REAL_TYPE)\n+\n /* Number of bits in the high and low parts of a two stage\n    load of an immediate constant.  */\n #define BITS_PER_HIGH 16"}, {"sha": "455152f88a304cefb9ad78fa8fa3cc5b82bb7311", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f7680a9a44a63da78f064d41660db2b57460187/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f7680a9a44a63da78f064d41660db2b57460187/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=7f7680a9a44a63da78f064d41660db2b57460187", "patch": "@@ -1057,6 +1057,13 @@ layout_type (type)\n \t\t register instead of forcing it to live in the stack.  */\n \t      if (simple_cst_equal (TYPE_SIZE (type), DECL_SIZE (field)))\n \t\tmode = DECL_MODE (field);\n+\n+#ifdef STRUCT_FORCE_BLK\n+\t      /* With some targets, eg. c4x, it is sub-optimal\n+\t\t to access an aligned BLKmode structure as a scalar.  */\n+\t      if (mode == VOIDmode && STRUCT_FORCE_BLK (field))\n+\t\t  goto record_lose;\n+#endif /* STRUCT_FORCE_BLK  */\n \t    }\n \n \t  if (mode != VOIDmode)"}, {"sha": "dac44ae8ff8635510c685459b810854c2ccecbe1", "filename": "gcc/tm.texi", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f7680a9a44a63da78f064d41660db2b57460187/gcc%2Ftm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f7680a9a44a63da78f064d41660db2b57460187/gcc%2Ftm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftm.texi?ref=7f7680a9a44a63da78f064d41660db2b57460187", "patch": "@@ -413,6 +413,15 @@ if any, in all upper-case letters.  For example, it might be @samp{GCC}\n or @samp{BINUTILS}.  If the package is part of the a vendor-supplied\n operating system, code the component name as @samp{0}.\n \n+@findex STRUCT_FORCE_BLK\n+@item STRUCT_FORCE_BLK (@var{field})\n+Return 1 if a structure containing @var{field} should be accessed using\n+@code{BLKMODE}.\n+\n+Normally, this is not needed.  See the file @file{c4x.h} for an example\n+of how to use this macro to prevent a structure having a floating point\n+field from being accessed in an integer mode.\n+\n \n For example, here is the definition used for VAX/VMS:\n "}]}