{"sha": "67aca9dfae0e68af581a7e43332d49a9fdf498c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjdhY2E5ZGZhZTBlNjhhZjU4MWE3ZTQzMzMyZDQ5YTlmZGY0OThjNQ==", "commit": {"author": {"name": "Paulo Matos", "email": "pmatos@broadcom.com", "date": "2013-11-30T11:13:07Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2013-11-30T11:13:07Z"}, "message": "combine.c (reg_nonzero_bits_for_combine): Apply mask transformation as applied to nonzero_sign_valid when...\n\n\t* combine.c (reg_nonzero_bits_for_combine): Apply mask transformation\n\tas applied to nonzero_sign_valid when last_set_mode has less precision\n\tthan mode.\n\nCo-Authored-By: Eric Botcazou <ebotcazou@adacore.com>\n\nFrom-SVN: r205550", "tree": {"sha": "6bc23f98d78296461a08329d8739d6513cb9b8a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6bc23f98d78296461a08329d8739d6513cb9b8a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67aca9dfae0e68af581a7e43332d49a9fdf498c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67aca9dfae0e68af581a7e43332d49a9fdf498c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67aca9dfae0e68af581a7e43332d49a9fdf498c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67aca9dfae0e68af581a7e43332d49a9fdf498c5/comments", "author": null, "committer": null, "parents": [{"sha": "483b0aa49b3fc3f981f5bf33a88d100783ee2ed9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/483b0aa49b3fc3f981f5bf33a88d100783ee2ed9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/483b0aa49b3fc3f981f5bf33a88d100783ee2ed9"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "ca7b3e85641eebd7a879f05f774d895a695d2298", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67aca9dfae0e68af581a7e43332d49a9fdf498c5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67aca9dfae0e68af581a7e43332d49a9fdf498c5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=67aca9dfae0e68af581a7e43332d49a9fdf498c5", "patch": "@@ -1,3 +1,10 @@\n+2013-11-30  Paulo Matos  <pmatos@broadcom.com>\n+\t    Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* combine.c (reg_nonzero_bits_for_combine): Apply mask transformation\n+\tas applied to nonzero_sign_valid when last_set_mode has less precision\n+\tthan mode.\n+\n 2013-11-30  Tobias Burnus  <burnus@net-b.de>\n \n \tPR sanitizer/59275"}, {"sha": "25cf273f8080e52a7a477026801462c5112c00cd", "filename": "gcc/combine.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67aca9dfae0e68af581a7e43332d49a9fdf498c5/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67aca9dfae0e68af581a7e43332d49a9fdf498c5/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=67aca9dfae0e68af581a7e43332d49a9fdf498c5", "patch": "@@ -9472,7 +9472,13 @@ reg_nonzero_bits_for_combine (const_rtx x, enum machine_mode mode,\n \t\t  (DF_LR_IN (ENTRY_BLOCK_PTR_FOR_FN (cfun)->next_bb),\n \t\t   REGNO (x)))))\n     {\n-      *nonzero &= rsp->last_set_nonzero_bits;\n+      unsigned HOST_WIDE_INT mask = rsp->last_set_nonzero_bits;\n+\n+      if (GET_MODE_PRECISION (rsp->last_set_mode) < GET_MODE_PRECISION (mode))\n+\t/* We don't know anything about the upper bits.  */\n+\tmask |= GET_MODE_MASK (mode) ^ GET_MODE_MASK (rsp->last_set_mode);\n+\n+      *nonzero &= mask;\n       return NULL;\n     }\n \n@@ -9505,6 +9511,7 @@ reg_nonzero_bits_for_combine (const_rtx x, enum machine_mode mode,\n       if (GET_MODE_PRECISION (GET_MODE (x)) < GET_MODE_PRECISION (mode))\n \t/* We don't know anything about the upper bits.  */\n \tmask |= GET_MODE_MASK (mode) ^ GET_MODE_MASK (GET_MODE (x));\n+\n       *nonzero &= mask;\n     }\n "}]}