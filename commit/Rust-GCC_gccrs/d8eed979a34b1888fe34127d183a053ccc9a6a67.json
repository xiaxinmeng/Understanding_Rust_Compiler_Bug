{"sha": "d8eed979a34b1888fe34127d183a053ccc9a6a67", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDhlZWQ5NzlhMzRiMTg4OGZlMzQxMjdkMTgzYTA1M2NjYzlhNmE2Nw==", "commit": {"author": {"name": "Michael Hayes", "email": "m.hayes@elec.canterbury.ac.nz", "date": "2003-03-15T02:44:29Z"}, "committer": {"name": "Michael Hayes", "email": "m.hayes@gcc.gnu.org", "date": "2003-03-15T02:44:29Z"}, "message": "re PR rtl-optimization/9387 (jump threading bug)\n\n\tPR optimization/9387\n\t* function.c (thread_prologue_and_epilogue_insns): Use redirect_jump\n\tfor conditional returns.\n\nFrom-SVN: r64390", "tree": {"sha": "9969c224172f9573e7cd998f797e895995e04841", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9969c224172f9573e7cd998f797e895995e04841"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8eed979a34b1888fe34127d183a053ccc9a6a67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8eed979a34b1888fe34127d183a053ccc9a6a67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8eed979a34b1888fe34127d183a053ccc9a6a67", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8eed979a34b1888fe34127d183a053ccc9a6a67/comments", "author": null, "committer": null, "parents": [{"sha": "af75fb675d7e451df34a1114b236e2291ee5f638", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af75fb675d7e451df34a1114b236e2291ee5f638", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af75fb675d7e451df34a1114b236e2291ee5f638"}], "stats": {"total": 19, "additions": 7, "deletions": 12}, "files": [{"sha": "206fffc9567b678c141254fe0c6a1766c6b80539", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8eed979a34b1888fe34127d183a053ccc9a6a67/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8eed979a34b1888fe34127d183a053ccc9a6a67/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d8eed979a34b1888fe34127d183a053ccc9a6a67", "patch": "@@ -1,3 +1,9 @@\n+2003-03-15  Michael Hayes  <m.hayes@elec.canterbury.ac.nz>\n+\n+\tPR optimization/9387\n+\t* function.c (thread_prologue_and_epilogue_insns): Use redirect_jump\n+\tfor conditional returns.\n+\n 2003-03-14  Jason Merrill  <jason@redhat.com>\n \n \tPR optimization/6871"}, {"sha": "26fc9ecca76993dba38750cce82cf54b64fb378b", "filename": "gcc/function.c", "status": "modified", "additions": 1, "deletions": 12, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8eed979a34b1888fe34127d183a053ccc9a6a67/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8eed979a34b1888fe34127d183a053ccc9a6a67/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=d8eed979a34b1888fe34127d183a053ccc9a6a67", "patch": "@@ -7601,19 +7601,8 @@ thread_prologue_and_epilogue_insns (f)\n \t\t that with a conditional return instruction.  */\n \t      else if (condjump_p (jump))\n \t\t{\n-\t\t  rtx ret, *loc;\n-\n-\t\t  ret = SET_SRC (PATTERN (jump));\n-\t\t  if (GET_CODE (XEXP (ret, 1)) == LABEL_REF)\n-\t\t    loc = &XEXP (ret, 1);\n-\t\t  else\n-\t\t    loc = &XEXP (ret, 2);\n-\t\t  ret = gen_rtx_RETURN (VOIDmode);\n-\n-\t\t  if (! validate_change (jump, loc, ret, 0))\n+\t\t  if (! redirect_jump (jump, 0, 1))\n \t\t    continue;\n-\t\t  if (JUMP_LABEL (jump))\n-\t\t    LABEL_NUSES (JUMP_LABEL (jump))--;\n \n \t\t  /* If this block has only one successor, it both jumps\n \t\t     and falls through to the fallthru block, so we can't"}]}