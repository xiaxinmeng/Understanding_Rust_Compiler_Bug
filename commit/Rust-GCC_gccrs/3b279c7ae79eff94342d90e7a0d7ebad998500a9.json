{"sha": "3b279c7ae79eff94342d90e7a0d7ebad998500a9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2IyNzljN2FlNzllZmY5NDM0MmQ5MGU3YTBkN2ViYWQ5OTg1MDBhOQ==", "commit": {"author": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2006-11-13T00:41:53Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2006-11-13T00:41:53Z"}, "message": "re PR rtl-optimization/29797 (Miscompiles bit test / set in OpenOffice)\n\n2006-11-12  Michael Matz  <matz@suse.de>\n\t    Roger Sayle  <roger@eyesopen.com>\n\n\tPR rtl-optimization/29797\n\t* ifcvt.c (noce_try_bitop): Correct calculation of bitnum on\n\tBITS_BIG_ENDIAN targets.\n\n\t* gcc.c-torture/execute/pr29797-1.c: New test case.\n\nFrom-SVN: r118740", "tree": {"sha": "7188af743013997d2c1de69de33b6cec208746a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7188af743013997d2c1de69de33b6cec208746a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b279c7ae79eff94342d90e7a0d7ebad998500a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b279c7ae79eff94342d90e7a0d7ebad998500a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b279c7ae79eff94342d90e7a0d7ebad998500a9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b279c7ae79eff94342d90e7a0d7ebad998500a9/comments", "author": null, "committer": null, "parents": [{"sha": "d3a6450e36495c1cdcc5294619c999477202cd9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3a6450e36495c1cdcc5294619c999477202cd9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3a6450e36495c1cdcc5294619c999477202cd9d"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "bf326de9eea956846ed734d8d6ad4d94a623a817", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b279c7ae79eff94342d90e7a0d7ebad998500a9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b279c7ae79eff94342d90e7a0d7ebad998500a9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3b279c7ae79eff94342d90e7a0d7ebad998500a9", "patch": "@@ -1,3 +1,10 @@\n+2006-11-12  Michael Matz  <matz@suse.de>\n+\t    Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR rtl-optimization/29797\n+\t* ifcvt.c (noce_try_bitop): Correct calculation of bitnum on\n+\tBITS_BIG_ENDIAN targets.\n+\n 2006-11-12  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* builtins.c (fold_builtin_cosh): New."}, {"sha": "f2226c402aabe398c6f011f80c225a90c367a6f2", "filename": "gcc/ifcvt.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b279c7ae79eff94342d90e7a0d7ebad998500a9/gcc%2Fifcvt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b279c7ae79eff94342d90e7a0d7ebad998500a9/gcc%2Fifcvt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fifcvt.c?ref=3b279c7ae79eff94342d90e7a0d7ebad998500a9", "patch": "@@ -1943,7 +1943,9 @@ noce_try_bitop (struct noce_if_info *if_info)\n \treturn FALSE;\n       bitnum = INTVAL (XEXP (cond, 2));\n       mode = GET_MODE (x);\n-      if (bitnum >= HOST_BITS_PER_WIDE_INT)\n+      if (BITS_BIG_ENDIAN)\n+\tbitnum = GET_MODE_BITSIZE (mode) - 1 - bitnum;\n+      if (bitnum < 0 || bitnum >= HOST_BITS_PER_WIDE_INT)\n \treturn FALSE;\n     }\n   else"}, {"sha": "4566f8855b437c729afe405e568d52b70735e874", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b279c7ae79eff94342d90e7a0d7ebad998500a9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b279c7ae79eff94342d90e7a0d7ebad998500a9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3b279c7ae79eff94342d90e7a0d7ebad998500a9", "patch": "@@ -1,3 +1,8 @@\n+2006-11-12  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR rtl-optimization/29797\n+\t* gcc.c-torture/execute/pr29797-1.c: New test case.\n+\n 2006-11-12  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* gcc.dg/torture/builtin-symmetric-1.c: Add more cases."}, {"sha": "9bcc2a9c59bee8b5bccd4c830ac624bc7b71d343", "filename": "gcc/testsuite/gcc.c-torture/execute/pr29797-1.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b279c7ae79eff94342d90e7a0d7ebad998500a9/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr29797-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b279c7ae79eff94342d90e7a0d7ebad998500a9/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr29797-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr29797-1.c?ref=3b279c7ae79eff94342d90e7a0d7ebad998500a9", "patch": "@@ -0,0 +1,14 @@\n+extern void abort(void);\n+\n+unsigned int bar(void) { return 32768; }\n+\n+int main()\n+{\n+  unsigned int nStyle = bar ();\n+  if (nStyle & 32768)\n+    nStyle |= 65536;\n+  if (nStyle != (32768 | 65536))\n+    abort ();\n+  return 0;\n+}\n+"}]}