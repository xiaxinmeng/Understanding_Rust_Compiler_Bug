{"sha": "8d34ffb4e8ed5300d0276b55f573add6db2517e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQzNGZmYjRlOGVkNTMwMGQwMjc2YjU1ZjU3M2FkZDZkYjI1MTdlOA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2021-09-03T09:18:01Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2021-09-03T09:19:23Z"}, "message": "Improve compatibility of -fdump-ada-spec with warnings\n\nThis makes sure that the style and warning settings used in the\nC/C++ bindings generated by -fdump-ada-spec do not leak into the\nunits that use them.\n\ngcc/c-family/\n\t* c-ada-spec.c (dump_ads): Generate pragmas to disable style checks\n\tand -gnatwu warning for the package specification.", "tree": {"sha": "6eef28190e3a3879ebcdcb7bac9cefc6c1fd3de0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6eef28190e3a3879ebcdcb7bac9cefc6c1fd3de0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d34ffb4e8ed5300d0276b55f573add6db2517e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d34ffb4e8ed5300d0276b55f573add6db2517e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d34ffb4e8ed5300d0276b55f573add6db2517e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d34ffb4e8ed5300d0276b55f573add6db2517e8/comments", "author": null, "committer": null, "parents": [{"sha": "090f0d78f194e3cda23fe904016db77ea36c38fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/090f0d78f194e3cda23fe904016db77ea36c38fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/090f0d78f194e3cda23fe904016db77ea36c38fa"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "b197d551c4379a78a00daa9922f13b6d01687839", "filename": "gcc/c-family/c-ada-spec.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d34ffb4e8ed5300d0276b55f573add6db2517e8/gcc%2Fc-family%2Fc-ada-spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d34ffb4e8ed5300d0276b55f573add6db2517e8/gcc%2Fc-family%2Fc-ada-spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ada-spec.c?ref=8d34ffb4e8ed5300d0276b55f573add6db2517e8", "patch": "@@ -3440,19 +3440,23 @@ dump_ads (const char *source_file,\n       dump_ada_nodes (&pp, source_file);\n \n       /* We require Ada 2012 syntax, so generate corresponding pragma.  */\n-      fputs (\"pragma Ada_2012;\\n\", f);\n+      fputs (\"pragma Ada_2012;\\n\\n\", f);\n \n       /* Disable style checks and warnings on unused entities since this file\n \t is auto-generated and always has a with clause for Interfaces.C.  */\n-      fputs (\"pragma Style_Checks (Off);\\npragma Warnings (\\\"U\\\");\\n\\n\", f);\n+      fputs (\"pragma Style_Checks (Off);\\n\", f);\n+      fputs (\"pragma Warnings (Off, \\\"-gnatwu\\\");\\n\\n\", f);\n \n       /* Dump withs.  */\n       dump_ada_withs (f);\n \n       fprintf (f, \"\\npackage %s is\\n\\n\", pkg_name);\n       pp_write_text_to_stream (&pp);\n       /* ??? need to free pp */\n-      fprintf (f, \"end %s;\\n\", pkg_name);\n+      fprintf (f, \"end %s;\\n\\n\", pkg_name);\n+\n+      fputs (\"pragma Style_Checks (On);\\n\", f);\n+      fputs (\"pragma Warnings (On, \\\"-gnatwu\\\");\\n\", f);\n       fclose (f);\n     }\n "}]}