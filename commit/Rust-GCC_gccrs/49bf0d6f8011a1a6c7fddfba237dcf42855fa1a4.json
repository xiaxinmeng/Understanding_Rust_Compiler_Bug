{"sha": "49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDliZjBkNmY4MDExYTFhNmM3ZmRkZmJhMjM3ZGNmNDI4NTVmYTFhNA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchell@usa.net", "date": "1998-03-26T10:32:04Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-03-26T10:32:04Z"}, "message": "pt.c (convert_nontype_argument): STRIP_NOPS where appropriate.\n\nThu Mar 26 10:25:52 1998  Mark Mitchell  <mmitchell@usa.net>\n\t* pt.c (convert_nontype_argument): STRIP_NOPS where appropriate.\n\nFrom-SVN: r18841", "tree": {"sha": "5aa5decc690022faa268537bc6d97e6765299177", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5aa5decc690022faa268537bc6d97e6765299177"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4/comments", "author": null, "committer": null, "parents": [{"sha": "00459c3ad18896794b3f5939123e6f48b2a4579f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00459c3ad18896794b3f5939123e6f48b2a4579f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00459c3ad18896794b3f5939123e6f48b2a4579f"}], "stats": {"total": 38, "additions": 36, "deletions": 2}, "files": [{"sha": "6ca4d8d8f4d552797582e647ac551622ba1c9dd8", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4", "patch": "@@ -1,3 +1,7 @@\n+Thu Mar 26 10:25:52 1998  Mark Mitchell  <mmitchell@usa.net>\n+\n+\t* pt.c (convert_nontype_argument): STRIP_NOPS where appropriate.\n+\n Thu Mar 26 10:24:05 1998  Mark Mitchell  <mmitchell@usa.net>\n \n \t* call.c (build_object_call): Complain about ambiguous operator(),"}, {"sha": "3c72a449b5fb0aeede26b87aa9071566a88ceafb", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4", "patch": "@@ -1861,8 +1861,10 @@ convert_nontype_argument (type, expr)\n \t   || expr_type == unknown_type_node)\n     {\n       tree referent;\n+      tree e = expr;\n+      STRIP_NOPS (e);\n \n-      if (TREE_CODE (expr) != ADDR_EXPR)\n+      if (TREE_CODE (e) != ADDR_EXPR)\n \t{\n \tbad_argument:\n \t  cp_error (\"`%E' is not a valid template argument\", expr);\n@@ -1874,7 +1876,7 @@ convert_nontype_argument (type, expr)\n \t  return NULL_TREE;\n \t}\n \n-      referent = TREE_OPERAND (expr, 0);\n+      referent = TREE_OPERAND (e, 0);\n       STRIP_NOPS (referent);\n       \n       if (TREE_CODE (referent) == STRING_CST)"}, {"sha": "d6f339453ad9ade6a45aa97346dd19b34108549d", "filename": "gcc/testsuite/g++.old-deja/g++.pt/nontype3.C", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fnontype3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fnontype3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fnontype3.C?ref=49bf0d6f8011a1a6c7fddfba237dcf42855fa1a4", "patch": "@@ -0,0 +1,28 @@\n+// Build don't link:\n+\n+enum E { e };\n+\n+template <const E* ep>\n+struct S1\n+{\n+  static char* s;\n+};\n+\n+template <int D>\n+struct S2 {};\n+\n+template <>\n+struct S2<1>\n+{\n+  static E es[1];\n+};\n+\n+struct S3\n+{\n+  typedef S1<S2<1>::es> S3_Type;\n+};\n+\n+E S2<1>::es[1] = {e};\n+\n+template <>\n+char* S1<S2<1>::es>::s = \"abc\";"}]}