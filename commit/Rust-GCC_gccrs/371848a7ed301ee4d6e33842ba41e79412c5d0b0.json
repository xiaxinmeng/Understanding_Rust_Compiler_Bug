{"sha": "371848a7ed301ee4d6e33842ba41e79412c5d0b0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzcxODQ4YTdlZDMwMWVlNGQ2ZTMzODQyYmE0MWU3OTQxMmM1ZDBiMA==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2021-09-16T12:04:06Z"}, "committer": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2021-09-16T15:06:47Z"}, "message": "cgraph: Do not warn about caller count mismatches of removed functions\n\nTo verify other changes in the patch series, I have been searching for\n\"Invalid sum of caller counts\" string in symtab dump but found that\nthere are false warnings about functions which have their body removed\nbecause they are now unreachable.  Those are of course invalid and so\nthis patches avoids checking such cgraph_nodes.\n\ngcc/ChangeLog:\n\n2021-08-20  Martin Jambor  <mjambor@suse.cz>\n\n\t* cgraph.c (cgraph_node::dump): Do not check caller count sums if\n\tthe body has been removed.  Remove trailing whitespace.", "tree": {"sha": "52f74423660dd67c5d061db50d6db4a304a0fda0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52f74423660dd67c5d061db50d6db4a304a0fda0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/371848a7ed301ee4d6e33842ba41e79412c5d0b0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE5elVTFt/d09Vsoczv2PBvD+kNUAFAmFDXYcACgkQv2PBvD+k\nNUBUaQ//csAcoMPqDhDcyBjkhIfl73zjDlYY0DzwHlNXxjYAMJNpcAg1LLwO29X5\nV9rZ1xfhnD2fO6vpVNdXHCARsJwie8tFVQcyqQmnTs1j+zLcWvUKN0K+NC698D0S\nNuXyCwh8hA0Ur0tZh7EJ8OuWUzvC+LcPWM1F3/QVhKCblErN8A874p6shp3DiZv/\n2QkvcUTh110S+N5G7YEjjIXCs/OO7gpOyhwKVTOTYOgB7sdIzVAWJgANTgm+Dm5a\nzJA0uDiQKDgwyuERizSj5VTh/TIAtEIOT4+fVM/kVtQPVrs3pKWvdBaOFW5rw+yb\nZy0m4/RyLIhTAH44T6qW97ZG/ptH0+6j6fg3z2YOnm7ZPboDn1varo5GZVJ5k+bD\nXPTQ26mVeDe40VHcKmOHRRb/5SwlaOuC+oeN56qen3erwkCoTuN2n8njqYN6hSBr\nTBIKKoB7nlWIFqQTdqMGbP+RlqpseiARfAJzPl4gVgTB+VVv60iSC/FDaIGZ8yLW\ngFaj2vkbDZSfeHy2NhbrlN6k4tucTbjxj4gX8L932lXYQuiy6YPxFg5QEReuci6W\nyWHAt6Ex5vWJqWECyDwte5Ku5cvsFVd4nY7H/FawvbPmfKRP2xOZs5opCZ5S5vJE\nonkNKaZ2qbg2+6C7IVgQjo87hYEF4E6rsREO6aV0uSNHUwb+US0=\n=k6nX\n-----END PGP SIGNATURE-----", "payload": "tree 52f74423660dd67c5d061db50d6db4a304a0fda0\nparent ab08859e37ef822c839bc33ec097091f17ebfe76\nauthor Martin Jambor <mjambor@suse.cz> 1631793846 +0200\ncommitter Martin Jambor <mjambor@suse.cz> 1631804807 +0200\n\ncgraph: Do not warn about caller count mismatches of removed functions\n\nTo verify other changes in the patch series, I have been searching for\n\"Invalid sum of caller counts\" string in symtab dump but found that\nthere are false warnings about functions which have their body removed\nbecause they are now unreachable.  Those are of course invalid and so\nthis patches avoids checking such cgraph_nodes.\n\ngcc/ChangeLog:\n\n2021-08-20  Martin Jambor  <mjambor@suse.cz>\n\n\t* cgraph.c (cgraph_node::dump): Do not check caller count sums if\n\tthe body has been removed.  Remove trailing whitespace.\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/371848a7ed301ee4d6e33842ba41e79412c5d0b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/371848a7ed301ee4d6e33842ba41e79412c5d0b0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/371848a7ed301ee4d6e33842ba41e79412c5d0b0/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ab08859e37ef822c839bc33ec097091f17ebfe76", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab08859e37ef822c839bc33ec097091f17ebfe76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab08859e37ef822c839bc33ec097091f17ebfe76"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "de0786537814690bf7e841500be532e96f62132a", "filename": "gcc/cgraph.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/371848a7ed301ee4d6e33842ba41e79412c5d0b0/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/371848a7ed301ee4d6e33842ba41e79412c5d0b0/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=371848a7ed301ee4d6e33842ba41e79412c5d0b0", "patch": "@@ -2236,7 +2236,7 @@ cgraph_node::dump (FILE *f)\n     }\n   fprintf (f, \"\\n\");\n \n-  if (count.ipa ().initialized_p ())\n+  if (!body_removed && count.ipa ().initialized_p ())\n     {\n       bool ok = true;\n       bool min = false;\n@@ -2245,7 +2245,7 @@ cgraph_node::dump (FILE *f)\n       FOR_EACH_ALIAS (this, ref)\n \tif (dyn_cast <cgraph_node *> (ref->referring)->count.initialized_p ())\n \t  sum += dyn_cast <cgraph_node *> (ref->referring)->count.ipa ();\n-  \n+\n       if (inlined_to\n \t  || (symtab->state < EXPANSION\n \t      && ultimate_alias_target () == this && only_called_directly_p ()))"}]}