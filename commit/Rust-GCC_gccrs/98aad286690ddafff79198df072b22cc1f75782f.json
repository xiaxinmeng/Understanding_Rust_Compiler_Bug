{"sha": "98aad286690ddafff79198df072b22cc1f75782f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OThhYWQyODY2OTBkZGFmZmY3OTE5OGRmMDcyYjIyY2MxZjc1NzgyZg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-02-11T22:35:51Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-02-11T22:35:51Z"}, "message": "(expand_builtin): If the builtin was called as __builtin_whatever,\n\npretend we're optimizing.\n\nFrom-SVN: r6529", "tree": {"sha": "13d95512d92818e39716a3ed3064d46cdfe6cb2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/13d95512d92818e39716a3ed3064d46cdfe6cb2b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/98aad286690ddafff79198df072b22cc1f75782f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98aad286690ddafff79198df072b22cc1f75782f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98aad286690ddafff79198df072b22cc1f75782f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98aad286690ddafff79198df072b22cc1f75782f/comments", "author": null, "committer": null, "parents": [{"sha": "dc9036088b25b9df5d960f9b608b670181b7dccb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc9036088b25b9df5d960f9b608b670181b7dccb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc9036088b25b9df5d960f9b608b670181b7dccb"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "c4356ae17f9f147a927336cd4f7e1715a98bf643", "filename": "gcc/expr.c", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98aad286690ddafff79198df072b22cc1f75782f/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98aad286690ddafff79198df072b22cc1f75782f/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=98aad286690ddafff79198df072b22cc1f75782f", "patch": "@@ -6639,6 +6639,9 @@ c_strlen (src)\n    SUBTARGET may be used as the target for computing one of EXP's operands.\n    IGNORE is nonzero if the value is to be ignored.  */\n \n+#define CALLED_AS_BUILT_IN(NODE) \\\n+   (!strncmp (IDENTIFIER_POINTER (DECL_NAME (NODE)), \"__builtin_\", 10))\n+\n static rtx\n expand_builtin (exp, target, subtarget, mode, ignore)\n      tree exp;\n@@ -7110,7 +7113,7 @@ expand_builtin (exp, target, subtarget, mode, ignore)\n \n     case BUILT_IN_FFS:\n       /* If not optimizing, call the library function.  */\n-      if (!optimize)\n+      if (!optimize && ! CALLED_AS_BUILT_IN (fndecl))\n \tbreak;\n \n       if (arglist == 0\n@@ -7130,7 +7133,7 @@ expand_builtin (exp, target, subtarget, mode, ignore)\n \n     case BUILT_IN_STRLEN:\n       /* If not optimizing, call the library function.  */\n-      if (!optimize)\n+      if (!optimize && ! CALLED_AS_BUILT_IN (fndecl))\n \tbreak;\n \n       if (arglist == 0\n@@ -7212,7 +7215,7 @@ expand_builtin (exp, target, subtarget, mode, ignore)\n \n     case BUILT_IN_STRCPY:\n       /* If not optimizing, call the library function.  */\n-      if (!optimize)\n+      if (!optimize && ! CALLED_AS_BUILT_IN (fndecl))\n \tbreak;\n \n       if (arglist == 0\n@@ -7236,7 +7239,7 @@ expand_builtin (exp, target, subtarget, mode, ignore)\n       /* Drops in.  */\n     case BUILT_IN_MEMCPY:\n       /* If not optimizing, call the library function.  */\n-      if (!optimize)\n+      if (!optimize && ! CALLED_AS_BUILT_IN (fndecl))\n \tbreak;\n \n       if (arglist == 0\n@@ -7290,7 +7293,7 @@ expand_builtin (exp, target, subtarget, mode, ignore)\n #ifdef HAVE_cmpstrsi\n     case BUILT_IN_STRCMP:\n       /* If not optimizing, call the library function.  */\n-      if (!optimize)\n+      if (!optimize && ! CALLED_AS_BUILT_IN (fndecl))\n \tbreak;\n \n       if (arglist == 0\n@@ -7343,7 +7346,7 @@ expand_builtin (exp, target, subtarget, mode, ignore)\n       /* Drops in.  */\n     case BUILT_IN_MEMCMP:\n       /* If not optimizing, call the library function.  */\n-      if (!optimize)\n+      if (!optimize && ! CALLED_AS_BUILT_IN (fndecl))\n \tbreak;\n \n       if (arglist == 0"}]}