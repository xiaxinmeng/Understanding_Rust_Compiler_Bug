{"sha": "622075181d70d9dd3b0b0546447a167ac0ead6ba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjIyMDc1MTgxZDcwZDlkZDNiMGIwNTQ2NDQ3YTE2N2FjMGVhZDZiYQ==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2018-05-23T19:06:36Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2018-05-23T19:06:36Z"}, "message": "range-for8.C: New test.\n\n\t* g++.dg/cpp2a/range-for8.C: New test.\n\t* g++.dg/cpp2a/range-for9.C: New test.\n\t* g++.dg/cpp2a/range-for10.C: New test.\n\nFrom-SVN: r260625", "tree": {"sha": "f64f93cf0416fc936f3284c4b58fe994d7906386", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f64f93cf0416fc936f3284c4b58fe994d7906386"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/622075181d70d9dd3b0b0546447a167ac0ead6ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/622075181d70d9dd3b0b0546447a167ac0ead6ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/622075181d70d9dd3b0b0546447a167ac0ead6ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/622075181d70d9dd3b0b0546447a167ac0ead6ba/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "89453706e0032f9a9c2107631873d9dad38dc14c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89453706e0032f9a9c2107631873d9dad38dc14c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89453706e0032f9a9c2107631873d9dad38dc14c"}], "stats": {"total": 97, "additions": 97, "deletions": 0}, "files": [{"sha": "01bc8b1c9b4e86c53a90a492d0ed23b7fb8cc1f4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/622075181d70d9dd3b0b0546447a167ac0ead6ba/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/622075181d70d9dd3b0b0546447a167ac0ead6ba/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=622075181d70d9dd3b0b0546447a167ac0ead6ba", "patch": "@@ -1,3 +1,9 @@\n+2018-05-23  Marek Polacek  <polacek@redhat.com>\n+\n+\t* g++.dg/cpp2a/range-for8.C: New test.\n+\t* g++.dg/cpp2a/range-for9.C: New test.\n+\t* g++.dg/cpp2a/range-for10.C: New test.\n+\n 2017-05-23  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* lib/target-supports.exp (check_effective_target_be): New."}, {"sha": "a0d0e6d085e7d04cddeff17984107c98eac3619a", "filename": "gcc/testsuite/g++.dg/cpp2a/range-for10.C", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/622075181d70d9dd3b0b0546447a167ac0ead6ba/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Frange-for10.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/622075181d70d9dd3b0b0546447a167ac0ead6ba/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Frange-for10.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Frange-for10.C?ref=622075181d70d9dd3b0b0546447a167ac0ead6ba", "patch": "@@ -0,0 +1,24 @@\n+// P0614R1\n+// { dg-do run }\n+// { dg-options \"-std=c++2a\" }\n+\n+struct A { int i; long long j; } a[64];\n+\n+int\n+main ()\n+{\n+  A b = { 1, 2 };\n+  for (auto & [ u, v ] : a)\n+    {\n+      u = 2;\n+      v = 3;\n+    }\n+\n+  for (auto [x, y] = b; auto [ u, v ] : a)\n+    if (y + u != x + v)\n+      __builtin_abort ();\n+\n+  for (auto [x, y] = b; auto & [ u, v ] : a)\n+    if (y + u != x + v)\n+      __builtin_abort ();\n+}"}, {"sha": "204a63204ca2c7f3469cf79e9b700a18496c021c", "filename": "gcc/testsuite/g++.dg/cpp2a/range-for8.C", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/622075181d70d9dd3b0b0546447a167ac0ead6ba/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Frange-for8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/622075181d70d9dd3b0b0546447a167ac0ead6ba/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Frange-for8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Frange-for8.C?ref=622075181d70d9dd3b0b0546447a167ac0ead6ba", "patch": "@@ -0,0 +1,37 @@\n+// P0614R1\n+// { dg-do run }\n+// { dg-options \"-std=c++2a\" }\n+\n+struct A { int i; long long j; } a[64];\n+\n+int\n+main ()\n+{\n+  for (int i = 0; auto &x : a)\n+    {\n+      x.i = i;\n+      x.j = 2 * i++;\n+    }\n+  for (auto & [ x, y ] : a)\n+    {\n+      x += 2;\n+      y += 3;\n+    }\n+  for (int i = 0; const auto [ u, v ] : a)\n+    {\n+      if (u != i + 2 || v != 2 * i++ + 3)\n+        __builtin_abort ();\n+    }\n+  for (int i = 0; auto [ x, y ] : a)\n+    {\n+      x += 4;\n+      y += 5;\n+      if (x != i + 6 || y != 2 * i++ + 8)\n+        __builtin_abort ();\n+    }\n+  for (int i = 0; const auto x : a)\n+    {\n+      if (x.i != i + 2 || x.j != 2 * i++ + 3)\n+        __builtin_abort ();\n+    }\n+}"}, {"sha": "74d71b67213fac802eaca7ebd2679e8cd2274f49", "filename": "gcc/testsuite/g++.dg/cpp2a/range-for9.C", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/622075181d70d9dd3b0b0546447a167ac0ead6ba/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Frange-for9.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/622075181d70d9dd3b0b0546447a167ac0ead6ba/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Frange-for9.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Frange-for9.C?ref=622075181d70d9dd3b0b0546447a167ac0ead6ba", "patch": "@@ -0,0 +1,30 @@\n+// P0614R1\n+// { dg-do run }\n+// { dg-options \"-std=c++2a\" }\n+\n+struct A { int i, j; };\n+\n+int\n+main ()\n+{\n+  A a = { .i = 2, .j = 3 };\n+  int arr[] = { 1, 1, 1 };\n+\n+  for (auto & [ x, y ] = a; auto z : arr)\n+    if (x + z != 3 || y + z != 4)\n+      __builtin_abort ();\n+\n+  for (int d = 1; auto &z : arr)\n+    z += d;\n+\n+  for (const auto [ x, y ] = a; auto z : arr)\n+    if (x + z != 4 || y + z != 5)\n+      __builtin_abort ();\n+\n+  for (int d = 1; auto &z : arr)\n+    z += d;\n+\n+  for (auto [ x, y ] = a; auto z : arr)\n+    if (x + z != 5 || y + z != 6)\n+      __builtin_abort ();\n+}"}]}