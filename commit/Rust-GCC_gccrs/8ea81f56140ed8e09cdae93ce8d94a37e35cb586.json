{"sha": "8ea81f56140ed8e09cdae93ce8d94a37e35cb586", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGVhODFmNTYxNDBlZDhlMDljZGFlOTNjZThkOTRhMzdlMzVjYjU4Ng==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-01-05T16:46:56Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-01-05T16:46:56Z"}, "message": "Don't link cc1 etc. against libcody.a\n\nRichi complained on IRC that cc1 is linked against libcody.a.\nFrom my understanding, it is just the cc1plus and cc1objplus binaries\nthat need it, so this patch links only those against it.\n\n> this is already part of my Solaris libcody patch\n\nThe following updated patch are the incremental changes between what Rainer\nhas committed and what I've posted.\n\n2021-01-05  Jakub Jelinek  <jakub@redhat.com>\n\ngcc/cp/\n\t* Make-lang.in (cc1plus-checksum, cc1plus$(exeext): Add\n\t$(CODYLIB) after $(BACKEND).\ngcc/objcp/\n\t* Make-lang.in (cc1objplus-checksum, cc1objplus$(exeext): Add\n\t$(CODYLIB) after $(BACKEND).", "tree": {"sha": "1a165695923b2f5a5ab1de9cbfe55f7510f3d286", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1a165695923b2f5a5ab1de9cbfe55f7510f3d286"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8ea81f56140ed8e09cdae93ce8d94a37e35cb586", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ea81f56140ed8e09cdae93ce8d94a37e35cb586", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ea81f56140ed8e09cdae93ce8d94a37e35cb586", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ea81f56140ed8e09cdae93ce8d94a37e35cb586/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "33a63257701c8d94ee375e32ff1837c989d8ded6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33a63257701c8d94ee375e32ff1837c989d8ded6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33a63257701c8d94ee375e32ff1837c989d8ded6"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "62295fb0dfee1ae1890e36754316cc08876d7376", "filename": "gcc/cp/Make-lang.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ea81f56140ed8e09cdae93ce8d94a37e35cb586/gcc%2Fcp%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ea81f56140ed8e09cdae93ce8d94a37e35cb586/gcc%2Fcp%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FMake-lang.in?ref=8ea81f56140ed8e09cdae93ce8d94a37e35cb586", "patch": "@@ -121,17 +121,17 @@ cp-warn = $(STRICT_WARN)\n # re-use the checksum from the prev-final stage so it passes\n # the bootstrap comparison and allows comparing of the cc1 binary\n cc1plus-checksum.c : build/genchecksum$(build_exeext) checksum-options \\\n-\t$(CXX_OBJS) $(BACKEND) $(LIBDEPS) \n+\t$(CXX_OBJS) $(BACKEND) $(CODYLIB) $(LIBDEPS) \n \tif [ -f ../stage_final ] \\\n \t   && cmp -s ../stage_current ../stage_final; then \\\n \t   cp ../prev-gcc/cc1plus-checksum.c cc1plus-checksum.c; \\\n \telse \\\n-\t  build/genchecksum$(build_exeext) $(CXX_OBJS) $(BACKEND) $(LIBDEPS) \\\n+\t  build/genchecksum$(build_exeext) $(CXX_OBJS) $(BACKEND) $(CODYLIB) $(LIBDEPS) \\\n                      checksum-options > cc1plus-checksum.c.tmp &&\t   \\\n \t  $(srcdir)/../move-if-change cc1plus-checksum.c.tmp cc1plus-checksum.c; \\\n \tfi\n \n-cc1plus$(exeext): $(CXX_OBJS) cc1plus-checksum.o $(BACKEND) $(LIBDEPS) $(c++.prev)\n+cc1plus$(exeext): $(CXX_OBJS) cc1plus-checksum.o $(BACKEND) $(CODYLIB) $(LIBDEPS) $(c++.prev)\n \t@$(call LINK_PROGRESS,$(INDEX.c++),start)\n \t+$(LLINKER) $(ALL_LINKERFLAGS) $(LDFLAGS) -o $@ \\\n \t      $(CXX_OBJS) cc1plus-checksum.o $(BACKEND) $(CODYLIB) $(NETLIBS) \\"}, {"sha": "dfa4d230eacc6ce67bebc8b152f1120bbbc3b9b8", "filename": "gcc/objcp/Make-lang.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ea81f56140ed8e09cdae93ce8d94a37e35cb586/gcc%2Fobjcp%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ea81f56140ed8e09cdae93ce8d94a37e35cb586/gcc%2Fobjcp%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjcp%2FMake-lang.in?ref=8ea81f56140ed8e09cdae93ce8d94a37e35cb586", "patch": "@@ -61,14 +61,14 @@ OBJCXX_OBJS = objcp/objcp-act.o objcp/objcp-lang.o objcp/objcp-decl.o \\\n obj-c++_OBJS = $(OBJCXX_OBJS) cc1objplus-checksum.o\n \n cc1objplus-checksum.c : build/genchecksum$(build_exeext) checksum-options \\\n-\t$(OBJCXX_OBJS) $(BACKEND) $(LIBDEPS)\n-\tbuild/genchecksum$(build_exeext) $(OBJCXX_OBJS) $(BACKEND) \\\n+\t$(OBJCXX_OBJS) $(BACKEND) $(CODYLIB) $(LIBDEPS)\n+\tbuild/genchecksum$(build_exeext) $(OBJCXX_OBJS) $(BACKEND) $(CODYLIB) \\\n \t\t$(LIBDEPS) checksum-options > cc1objplus-checksum.c.tmp && \\\n \t$(srcdir)/../move-if-change cc1objplus-checksum.c.tmp \\\n \tcc1objplus-checksum.c\n \n cc1objplus$(exeext): $(OBJCXX_OBJS) cc1objplus-checksum.o $(BACKEND) \\\n-\t\t     $(LIBDEPS) $(obj-c++.prev)\n+\t\t     $(CODYLIB) $(LIBDEPS) $(obj-c++.prev)\n \t@$(call LINK_PROGRESS,$(INDEX.obj-c++),start)\n \t+$(LLINKER) $(ALL_LINKERFLAGS) $(LDFLAGS) -o $@ \\\n \t\t$(OBJCXX_OBJS) cc1objplus-checksum.o $(BACKEND) \\"}]}