{"sha": "9b0834f68353d52e4d5000a599e5169b79c0c343", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWIwODM0ZjY4MzUzZDUyZTRkNTAwMGE1OTllNTE2OWI3OWMwYzM0Mw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2014-07-20T15:21:57Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-07-20T15:21:57Z"}, "message": "go-test.exp (go-gc-tests): Support multiple files in one package for compiledir tests.\n\n\t* go.test/go-test.exp (go-gc-tests): Support multiple files in one\n\tpackage for compiledir tests.\n\nFrom-SVN: r212872", "tree": {"sha": "d689d9567a43444fc58a07d00e9b09a5f7a1f875", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d689d9567a43444fc58a07d00e9b09a5f7a1f875"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9b0834f68353d52e4d5000a599e5169b79c0c343", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b0834f68353d52e4d5000a599e5169b79c0c343", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b0834f68353d52e4d5000a599e5169b79c0c343", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b0834f68353d52e4d5000a599e5169b79c0c343/comments", "author": null, "committer": null, "parents": [{"sha": "16c6dcc57b81334bdfc99b994686f42369e33094", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16c6dcc57b81334bdfc99b994686f42369e33094", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16c6dcc57b81334bdfc99b994686f42369e33094"}], "stats": {"total": 23, "additions": 16, "deletions": 7}, "files": [{"sha": "37772647ca1990582edbd9ada3da68a29b0a3961", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b0834f68353d52e4d5000a599e5169b79c0c343/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b0834f68353d52e4d5000a599e5169b79c0c343/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9b0834f68353d52e4d5000a599e5169b79c0c343", "patch": "@@ -1,3 +1,8 @@\n+2014-07-20  Ian Lance Taylor  <iant@google.com>\n+\n+\t* go.test/go-test.exp (go-gc-tests): Support multiple files in one\n+\tpackage for compiledir tests.\n+\n 2014-07-20  Marek Polacek  <polacek@redhat.com>\n \n \tPR c/61852"}, {"sha": "eed0d68e4c703b832bb003f1628b2fc0fe060e97", "filename": "gcc/testsuite/go.test/go-test.exp", "status": "modified", "additions": 11, "deletions": 7, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b0834f68353d52e4d5000a599e5169b79c0c343/gcc%2Ftestsuite%2Fgo.test%2Fgo-test.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b0834f68353d52e4d5000a599e5169b79c0c343/gcc%2Ftestsuite%2Fgo.test%2Fgo-test.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgo.test%2Fgo-test.exp?ref=9b0834f68353d52e4d5000a599e5169b79c0c343", "patch": "@@ -651,13 +651,17 @@ proc go-gc-tests { } {\n \t    set runtests \"go-test.exp\"\n \t    set dg-do-what-default \"assemble\"\n \t    set dir \"[file rootname $test].dir\"\n-\t    set del {}\n-\t    foreach f [lsort [glob \"$dir/*.go\"]] {\n-\t\tdg-test -keep-output $f \"-O\" \"-w $DEFAULT_GOCFLAGS\"\n-\t\tlappend del \"[file rootname [file tail $f]].o\"\n-\t    }\n-\t    foreach f $del {\n-\t\tfile delete $f\n+\t    set files [lsort [glob \"$dir/*.go\"]]\n+\t    set packages [go-find-packages $test $name $files]\n+\t    if { [llength $packages] > 0 } {\n+\t\tset del [list]\n+\t\tforeach p $packages {\n+\t\t    dg-test -keep-output [lindex $p 1] \"[lrange $p 2 end] -O\" \"-w $DEFAULT_GOCFLAGS\"\n+\t\t    lappend del \"[file rootname [file tail [lindex $p 1]]].o\"\n+\t\t}\n+\t\tforeach f $del {\n+\t\t    file delete $f\n+\t\t}\n \t    }\n \t    set runtests $hold_runtests\n \t} elseif { $test_line == \"// rundir\" } {"}]}