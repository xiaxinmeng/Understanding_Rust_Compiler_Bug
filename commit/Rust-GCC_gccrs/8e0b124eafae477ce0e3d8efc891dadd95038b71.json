{"sha": "8e0b124eafae477ce0e3d8efc891dadd95038b71", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGUwYjEyNGVhZmFlNDc3Y2UwZTNkOGVmYzg5MWRhZGQ5NTAzOGI3MQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-02-14T18:34:25Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2001-02-14T18:34:25Z"}, "message": "jump.c (jump_optimize_1): When we delete a conditional jump preceeding a non-conditional jump to...\n\n* jump.c (jump_optimize_1): When we delete a conditional jump\npreceeding a non-conditional jump to effectively the same place,\nmake sure that the combined jump skips any clobber insns between\nthe two labels.\n\nCo-Authored-By: DJ Delorie <dj@redhat.com>\n\nFrom-SVN: r39686", "tree": {"sha": "94760e35379c8c6c0c88a32dbc7d989737bb1970", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/94760e35379c8c6c0c88a32dbc7d989737bb1970"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8e0b124eafae477ce0e3d8efc891dadd95038b71", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e0b124eafae477ce0e3d8efc891dadd95038b71", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e0b124eafae477ce0e3d8efc891dadd95038b71", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e0b124eafae477ce0e3d8efc891dadd95038b71/comments", "author": null, "committer": null, "parents": [{"sha": "7161c1a582aef9f05caeb12189391a9c04aadda9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7161c1a582aef9f05caeb12189391a9c04aadda9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7161c1a582aef9f05caeb12189391a9c04aadda9"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "a97e22abc243d224a9299447a4eb28e17e5651f1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e0b124eafae477ce0e3d8efc891dadd95038b71/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e0b124eafae477ce0e3d8efc891dadd95038b71/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8e0b124eafae477ce0e3d8efc891dadd95038b71", "patch": "@@ -1,3 +1,11 @@\n+2001-02-14  Richard Henderson  <rth@redhat.com>\n+\t    DJ Delorie  <dj@redhat.com>\n+\n+\t* jump.c (jump_optimize_1): When we delete a conditional jump\n+\tpreceeding a non-conditional jump to effectively the same place,\n+\tmake sure that the combined jump skips any clobber insns between\n+\tthe two labels.\n+\n 2001-02-14  Jeffrey Oldham  <oldham@codesourcery.com>\n \n \t* gcc.c (do_spec_1): Fix off-by-one error for '%M' case."}, {"sha": "121375395bdfd047d0614143069e7e18db4c3de1", "filename": "gcc/jump.c", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e0b124eafae477ce0e3d8efc891dadd95038b71/gcc%2Fjump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e0b124eafae477ce0e3d8efc891dadd95038b71/gcc%2Fjump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjump.c?ref=8e0b124eafae477ce0e3d8efc891dadd95038b71", "patch": "@@ -420,6 +420,28 @@ jump_optimize_1 (f, cross_jump, noop_moves, after_regscan,\n \n \t      if (temp2 == temp)\n \t\t{\n+\t\t  /* Ensure that we jump to the later of the two labels.  \n+\t\t     Consider:\n+\n+\t\t\tif (test) goto L2;\n+\t\t\tgoto L1;\n+\t\t\t...\n+\t\t      L1:\n+\t\t\t(clobber return-reg)\n+\t\t      L2:\n+\t\t\t(use return-reg)\n+\n+\t\t     If we leave the goto L1, we'll incorrectly leave\n+\t\t     return-reg dead for TEST true.  */\n+\n+\t\t  temp2 = next_active_insn (JUMP_LABEL (insn));\n+\t\t  if (!temp2)\n+\t\t    temp2 = get_last_insn ();\n+\t\t  if (GET_CODE (temp2) != CODE_LABEL)\n+\t\t    temp2 = prev_label (temp2);\n+\t\t  if (temp2 != JUMP_LABEL (temp))\n+\t\t    redirect_jump (temp, temp2, 1);\n+\n \t\t  delete_jump (insn);\n \t\t  changed = 1;\n \t\t  continue;"}]}