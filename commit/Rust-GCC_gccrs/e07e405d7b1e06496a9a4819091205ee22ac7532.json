{"sha": "e07e405d7b1e06496a9a4819091205ee22ac7532", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTA3ZTQwNWQ3YjFlMDY0OTZhOWE0ODE5MDkxMjA1ZWUyMmFjNzUzMg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2007-06-01T22:47:02Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2007-06-01T22:47:02Z"}, "message": "tree-vrp.c (compare_name_with_value): Always set used_strict_overflow if we get a result from the variable itself.\n\n./:\t* tree-vrp.c (compare_name_with_value): Always set\n\tused_strict_overflow if we get a result from the variable itself.\ntestsuite/:\n\t* gcc.dg/Wstrict-overflow-17.c: New test.\n\nFrom-SVN: r125269", "tree": {"sha": "103f55ccc2020c73fac60b1aac6912c7db6c30af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/103f55ccc2020c73fac60b1aac6912c7db6c30af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e07e405d7b1e06496a9a4819091205ee22ac7532", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e07e405d7b1e06496a9a4819091205ee22ac7532", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e07e405d7b1e06496a9a4819091205ee22ac7532", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e07e405d7b1e06496a9a4819091205ee22ac7532/comments", "author": null, "committer": null, "parents": [{"sha": "069a73f9a47f57f264b2b1efad950ec33c1b23aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/069a73f9a47f57f264b2b1efad950ec33c1b23aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/069a73f9a47f57f264b2b1efad950ec33c1b23aa"}], "stats": {"total": 33, "additions": 31, "deletions": 2}, "files": [{"sha": "87d2444b48bd56c54ac2ee73738634557973a87e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e07e405d7b1e06496a9a4819091205ee22ac7532/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e07e405d7b1e06496a9a4819091205ee22ac7532/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e07e405d7b1e06496a9a4819091205ee22ac7532", "patch": "@@ -1,3 +1,8 @@\n+2007-06-01  Ian Lance Taylor  <iant@google.com>\n+\n+\t* tree-vrp.c (compare_name_with_value): Always set\n+\tused_strict_overflow if we get a result from the variable itself.\n+\n 2007-06-01  Ian Lance Taylor  <iant@google.com>\n \n \tPR rtl-optimization/31455"}, {"sha": "6d4256893a192cc083c0838987b245231b660cea", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e07e405d7b1e06496a9a4819091205ee22ac7532/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e07e405d7b1e06496a9a4819091205ee22ac7532/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e07e405d7b1e06496a9a4819091205ee22ac7532", "patch": "@@ -1,3 +1,7 @@\n+2007-06-01  Ian Lance Taylor  <iant@google.com>\n+\n+\t* gcc.dg/Wstrict-overflow-17.c: New test.\n+\n 2007-06-01  Kazu Hirata  <kazu@codesourcery.com>\n \n \t* gcc.dg/builtin-return-1.c (g): New."}, {"sha": "5625bc2a7f3c74a01a8d6f960c96bf5c151acc88", "filename": "gcc/testsuite/gcc.dg/Wstrict-overflow-17.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e07e405d7b1e06496a9a4819091205ee22ac7532/gcc%2Ftestsuite%2Fgcc.dg%2FWstrict-overflow-17.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e07e405d7b1e06496a9a4819091205ee22ac7532/gcc%2Ftestsuite%2Fgcc.dg%2FWstrict-overflow-17.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWstrict-overflow-17.c?ref=e07e405d7b1e06496a9a4819091205ee22ac7532", "patch": "@@ -0,0 +1,20 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fstrict-overflow -O2 -Wstrict-overflow\" } */\n+\n+/* This erroneously gave an overflow warning.  */\n+\n+extern void bar (char);\n+void\n+foo (char *s)\n+{\n+  int len, i;\n+\n+  for (len = 1; len < 5000; ++len)\n+    {\n+      for (i = 0; i < len; ++i)\n+\t{\n+\t  if (s[i] != '\\0')\n+\t    bar (s[i]);\n+\t}\n+    }\n+}"}, {"sha": "e0a55a86eac83e2634e519c7851f7087542f4cdd", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e07e405d7b1e06496a9a4819091205ee22ac7532/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e07e405d7b1e06496a9a4819091205ee22ac7532/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=e07e405d7b1e06496a9a4819091205ee22ac7532", "patch": "@@ -4676,8 +4676,8 @@ compare_name_with_value (enum tree_code comp, tree var, tree val,\n   equiv_vr = get_vr_for_comparison (SSA_NAME_VERSION (var));\n   sop = false;\n   retval = compare_range_with_value (comp, &equiv_vr, val, &sop);\n-  if (sop)\n-    used_strict_overflow = 1;\n+  if (retval)\n+    used_strict_overflow = sop ? 1 : 0;\n \n   /* If the equiv set is empty we have done all work we need to do.  */\n   if (e == NULL)"}]}