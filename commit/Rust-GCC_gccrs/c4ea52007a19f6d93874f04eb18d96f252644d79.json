{"sha": "c4ea52007a19f6d93874f04eb18d96f252644d79", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzRlYTUyMDA3YTE5ZjZkOTM4NzRmMDRlYjE4ZDk2ZjI1MjY0NGQ3OQ==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2009-11-27T22:34:40Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2009-11-27T22:34:40Z"}, "message": "re PR middle-end/42006 (Termination problem with -O2 and -O3)\n\n2009-11-27  Martin Jambor  <mjambor@suse.cz>\n\n\tPR middle-end/42006\n\t* tree-sra.c (get_replaced_param_substitute): Call create_tmp_var\n\tinstead of create_tmp_var.  Set DECL_GIMPLE_REG_P to one manually\n\tfor vector and complex types.\n\t(get_adjustment_for_base): Describe return value in the comment.\n\n\t* testsuite/gcc.c-torture/execute/pr42006.c: New test.\n\nFrom-SVN: r154715", "tree": {"sha": "608ae5b538719e40f3eb16c507e1d54eb8afc0ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/608ae5b538719e40f3eb16c507e1d54eb8afc0ce"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c4ea52007a19f6d93874f04eb18d96f252644d79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4ea52007a19f6d93874f04eb18d96f252644d79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4ea52007a19f6d93874f04eb18d96f252644d79", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4ea52007a19f6d93874f04eb18d96f252644d79/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ba96438334721b0d48bf9a1413a6c0963ddbd30f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba96438334721b0d48bf9a1413a6c0963ddbd30f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba96438334721b0d48bf9a1413a6c0963ddbd30f"}], "stats": {"total": 54, "additions": 52, "deletions": 2}, "files": [{"sha": "02faa0051b7aae528ef62485ff120588a3b89f6e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4ea52007a19f6d93874f04eb18d96f252644d79/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4ea52007a19f6d93874f04eb18d96f252644d79/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c4ea52007a19f6d93874f04eb18d96f252644d79", "patch": "@@ -1,3 +1,11 @@\n+2009-11-27  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR middle-end/42006\n+\t* tree-sra.c (get_replaced_param_substitute): Call create_tmp_var\n+\tinstead of create_tmp_var.  Set DECL_GIMPLE_REG_P to one manually\n+\tfor vector and complex types.\n+\t(get_adjustment_for_base): Describe return value in the comment.\n+\n 2009-11-27  Nick Clifton  <nickc@redhat.com>\n \n \t* longlong.h (count_leading_zeros): Define macro for stormy16"}, {"sha": "e938d3cbecf819f1aebdb19a71fb219f83ed9c37", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4ea52007a19f6d93874f04eb18d96f252644d79/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4ea52007a19f6d93874f04eb18d96f252644d79/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c4ea52007a19f6d93874f04eb18d96f252644d79", "patch": "@@ -1,3 +1,8 @@\n+2009-11-27  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR middle-end/42006\n+\t* gcc.c-torture/execute/pr42006.c: New test.\n+\n 2009-11-27  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/38656"}, {"sha": "f40fc179659185ac1cfacf6d86da470c4018f2ae", "filename": "gcc/testsuite/gcc.c-torture/execute/pr42006.c", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4ea52007a19f6d93874f04eb18d96f252644d79/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr42006.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4ea52007a19f6d93874f04eb18d96f252644d79/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr42006.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr42006.c?ref=c4ea52007a19f6d93874f04eb18d96f252644d79", "patch": "@@ -0,0 +1,33 @@\n+extern void abort (void);\n+\n+static unsigned int\n+my_add(unsigned int si1, unsigned int si2)\n+{\n+  return (si1 > (50-si2)) ? si1 : (si1 + si2);\n+}\n+\n+static unsigned int\n+my_shift(unsigned int left, unsigned int right)\n+{\n+  return  (right > 100) ? left : (left >> right);\n+}\n+\n+static int func_4(unsigned int p_6)\n+{\n+  int count = 0;\n+  for (p_6 = 1; p_6 < 3; p_6 = my_add(p_6, 1))\n+    {\n+      if (count++ > 1)\n+\tabort ();\n+\n+      if (my_shift(p_6, p_6))\n+\treturn 0;\n+    }\n+  return 0;\n+}\n+\n+int main(void)\n+{\n+  func_4(0);\n+  return 0;\n+}"}, {"sha": "34c0d3de89308e17e8a68bc5c2fadf2cc9c77bc1", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4ea52007a19f6d93874f04eb18d96f252644d79/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4ea52007a19f6d93874f04eb18d96f252644d79/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=c4ea52007a19f6d93874f04eb18d96f252644d79", "patch": "@@ -3478,7 +3478,10 @@ get_replaced_param_substitute (struct ipa_parm_adjustment *adj)\n     {\n       char *pretty_name = make_fancy_name (adj->base);\n \n-      repl = make_rename_temp (TREE_TYPE (adj->base), \"ISR\");\n+      repl = create_tmp_var (TREE_TYPE (adj->base), \"ISR\");\n+      if (TREE_CODE (TREE_TYPE (repl)) == COMPLEX_TYPE\n+\t  || TREE_CODE (TREE_TYPE (repl)) == VECTOR_TYPE)\n+\tDECL_GIMPLE_REG_P (repl) = 1;\n       DECL_NAME (repl) = get_identifier (pretty_name);\n       obstack_free (&name_obstack, pretty_name);\n \n@@ -3516,7 +3519,8 @@ get_adjustment_for_base (ipa_parm_adjustment_vec adjustments, tree base)\n /* Callback for scan_function.  If the statement STMT defines an SSA_NAME of a\n    parameter which is to be removed because its value is not used, replace the\n    SSA_NAME with a one relating to a created VAR_DECL and replace all of its\n-   uses too.  DATA is a pointer to an adjustments vector.  */\n+   uses too and return true (update_stmt is then issued for the statement by\n+   the caller).  DATA is a pointer to an adjustments vector.  */\n \n static bool\n replace_removed_params_ssa_names (gimple stmt, void *data)"}]}