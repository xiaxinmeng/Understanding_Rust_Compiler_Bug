{"sha": "df45fc34aa658555c252eee36a059d753d859610", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGY0NWZjMzRhYTY1ODU1NWMyNTJlZWUzNmEwNTlkNzUzZDg1OTYxMA==", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2011-07-24T23:22:41Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@gcc.gnu.org", "date": "2011-07-24T23:22:41Z"}, "message": "configure.ac (demangler_in_ld): Default to yes.\n\n2011-07-24  Sandra Loosemore  <sandra@codesourcery.com>\n\n\tgcc/\n\t* configure.ac (demangler_in_ld): Default to yes.\n\t* configure: Regenerated.\n\t* collect2.c (main): When HAVE_LD_DEMANGLE is defined, don't\n\tmess with COLLECT_NO_DEMANGLE, and just pass --demangle and\n\t--no-demangle options straight through to ld.  When\n\tHAVE_LD_DEMANGLE is not defined, set COLLECT_NO_DEMANGLE in a\n\tway that has the intended effect on Windows.\n\nFrom-SVN: r176720", "tree": {"sha": "ff68b0982803322915f57a7bfc275d261083dd9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff68b0982803322915f57a7bfc275d261083dd9d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df45fc34aa658555c252eee36a059d753d859610", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df45fc34aa658555c252eee36a059d753d859610", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df45fc34aa658555c252eee36a059d753d859610", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df45fc34aa658555c252eee36a059d753d859610/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "73645647f97029a05b08bdb5077d5da1592e088e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73645647f97029a05b08bdb5077d5da1592e088e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73645647f97029a05b08bdb5077d5da1592e088e"}], "stats": {"total": 32, "additions": 19, "deletions": 13}, "files": [{"sha": "207b097c6c86e0972d44621ac1aaa097b8b67cdd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df45fc34aa658555c252eee36a059d753d859610/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df45fc34aa658555c252eee36a059d753d859610/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=df45fc34aa658555c252eee36a059d753d859610", "patch": "@@ -1,3 +1,13 @@\n+2011-07-24  Sandra Loosemore  <sandra@codesourcery.com>\n+\n+\t* configure.ac (demangler_in_ld): Default to yes.\n+\t* configure: Regenerated.\n+\t* collect2.c (main): When HAVE_LD_DEMANGLE is defined, don't\n+\tmess with COLLECT_NO_DEMANGLE, and just pass --demangle and\n+\t--no-demangle options straight through to ld.  When\n+\tHAVE_LD_DEMANGLE is not defined, set COLLECT_NO_DEMANGLE in a\n+\tway that has the intended effect on Windows.\n+\n 2011-07-23  Richard Henderson  <rth@redhat.com>\n \n \t* dwarf2cfi.c: Include basic-block.h."}, {"sha": "cd0fad792e28cb2c5fc60de94c398c1ae2714419", "filename": "gcc/collect2.c", "status": "modified", "additions": 7, "deletions": 11, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df45fc34aa658555c252eee36a059d753d859610/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df45fc34aa658555c252eee36a059d753d859610/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=df45fc34aa658555c252eee36a059d753d859610", "patch": "@@ -1112,10 +1112,12 @@ main (int argc, char **argv)\n \n   num_c_args = argc + 9;\n \n+#ifndef HAVE_LD_DEMANGLE\n   no_demangle = !! getenv (\"COLLECT_NO_DEMANGLE\");\n \n   /* Suppress demangling by the real linker, which may be broken.  */\n-  putenv (xstrdup (\"COLLECT_NO_DEMANGLE=\"));\n+  putenv (xstrdup (\"COLLECT_NO_DEMANGLE=1\"));\n+#endif\n \n #if defined (COLLECT2_HOST_INITIALIZATION)\n   /* Perform system dependent initialization, if necessary.  */\n@@ -1405,12 +1407,6 @@ main (int argc, char **argv)\n   /* After the first file, put in the c++ rt0.  */\n \n   first_file = 1;\n-#ifdef HAVE_LD_DEMANGLE\n-  if (!demangle_flag && !no_demangle)\n-    demangle_flag = \"--demangle\";\n-  if (demangle_flag)\n-    *ld1++ = *ld2++ = demangle_flag;\n-#endif\n   while ((arg = *++argv) != (char *) 0)\n     {\n       *ld1++ = *ld2++ = arg;\n@@ -1514,16 +1510,16 @@ main (int argc, char **argv)\n \t    case '-':\n \t      if (strcmp (arg, \"--no-demangle\") == 0)\n \t\t{\n-\t\t  demangle_flag = arg;\n+#ifndef HAVE_LD_DEMANGLE\n \t\t  no_demangle = 1;\n \t\t  ld1--;\n \t\t  ld2--;\n+#endif\n \t\t}\n \t      else if (strncmp (arg, \"--demangle\", 10) == 0)\n \t\t{\n-\t\t  demangle_flag = arg;\n-\t\t  no_demangle = 0;\n #ifndef HAVE_LD_DEMANGLE\n+\t\t  no_demangle = 0;\n \t\t  if (arg[10] == '=')\n \t\t    {\n \t\t      enum demangling_styles style\n@@ -1533,9 +1529,9 @@ main (int argc, char **argv)\n \t\t      else\n \t\t\tcurrent_demangling_style = style;\n \t\t    }\n-#endif\n \t\t  ld1--;\n \t\t  ld2--;\n+#endif\n \t\t}\n \t      else if (strncmp (arg, \"--sysroot=\", 10) == 0)\n \t\ttarget_system_root = arg + 10;"}, {"sha": "1a4c1b70448740aaeacc673092b24b48eb6a6ce6", "filename": "gcc/configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df45fc34aa658555c252eee36a059d753d859610/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df45fc34aa658555c252eee36a059d753d859610/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=df45fc34aa658555c252eee36a059d753d859610", "patch": "@@ -3413,7 +3413,7 @@ fi\n if test \"${with_demangler_in_ld+set}\" = set; then :\n   withval=$with_demangler_in_ld; demangler_in_ld=\"$with_demangler_in_ld\"\n else\n-  demangler_in_ld=no\n+  demangler_in_ld=yes\n fi\n \n "}, {"sha": "9d7bb66be20babaa43b289a27fe8bbdf471b8914", "filename": "gcc/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df45fc34aa658555c252eee36a059d753d859610/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df45fc34aa658555c252eee36a059d753d859610/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=df45fc34aa658555c252eee36a059d753d859610", "patch": "@@ -222,7 +222,7 @@ fi\n AC_ARG_WITH(demangler-in-ld,\n [AS_HELP_STRING([--with-demangler-in-ld], [try to use demangler in GNU ld])],\n demangler_in_ld=\"$with_demangler_in_ld\",\n-demangler_in_ld=no)\n+demangler_in_ld=yes)\n \n # ----------------------\n # Find default assembler"}]}