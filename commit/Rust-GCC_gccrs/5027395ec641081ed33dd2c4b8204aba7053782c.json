{"sha": "5027395ec641081ed33dd2c4b8204aba7053782c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTAyNzM5NWVjNjQxMDgxZWQzM2RkMmM0YjgyMDRhYmE3MDUzNzgyYw==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2016-01-06T20:19:04Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2016-01-06T20:19:04Z"}, "message": "re PR target/69140 (stack alignment + O1 breaks with Microsoft ABI)\n\n\tPR target/69140\n\t* config/i386/i386.c (ix86_expand_prologue): Declare fs.sp_valid\n\tdepending on frame_pointer_needed before remaining integer and SSE\n\tregisters are saved.\n\ntestsuite/ChangeLog:\n\n\tPR target/69140\n\t* gcc.target/i386/pr69140.c: New test\n\nFrom-SVN: r232111", "tree": {"sha": "56f596dbabca08e4f85f1296550c7a7c0d76ab1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56f596dbabca08e4f85f1296550c7a7c0d76ab1c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5027395ec641081ed33dd2c4b8204aba7053782c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5027395ec641081ed33dd2c4b8204aba7053782c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5027395ec641081ed33dd2c4b8204aba7053782c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5027395ec641081ed33dd2c4b8204aba7053782c/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7443cf13054da143f0ec0ae12786c8853cfe31e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7443cf13054da143f0ec0ae12786c8853cfe31e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7443cf13054da143f0ec0ae12786c8853cfe31e4"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "c807433b0927c21b4e9602150cc41fa141bd015e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5027395ec641081ed33dd2c4b8204aba7053782c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5027395ec641081ed33dd2c4b8204aba7053782c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5027395ec641081ed33dd2c4b8204aba7053782c", "patch": "@@ -1,3 +1,10 @@\n+2016-01-06  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/69140\n+\t* config/i386/i386.c (ix86_expand_prologue): Declare fs.sp_valid\n+\tdepending on frame_pointer_needed before remaining integer and SSE\n+\tregisters are saved.\n+\n 2015-01-06  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \t* config/rs6000/vsx.md (*p9_vecload_<mode>): Replace VSX_M"}, {"sha": "9c3fa70b752cd87a6e49b6facc8f0b2a2a281dbf", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5027395ec641081ed33dd2c4b8204aba7053782c/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5027395ec641081ed33dd2c4b8204aba7053782c/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=5027395ec641081ed33dd2c4b8204aba7053782c", "patch": "@@ -13065,6 +13065,8 @@ ix86_expand_prologue (void)\n       m->fs.fp_valid = true;\n     }\n \n+  m->fs.sp_valid = !frame_pointer_needed;\n+\n   if (!int_registers_saved)\n     ix86_emit_save_regs_using_mov (frame.reg_save_offset);\n   if (!sse_registers_saved)"}, {"sha": "5ca10b3d0064420347f0bbe15d60b142533e794a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5027395ec641081ed33dd2c4b8204aba7053782c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5027395ec641081ed33dd2c4b8204aba7053782c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5027395ec641081ed33dd2c4b8204aba7053782c", "patch": "@@ -1,3 +1,8 @@\n+2016-01-06  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/69140\n+\t* gcc.target/i386/pr69140.c: New test\n+\n 2016-01-06  David Malcolm  <dmalcolm@redhat.com>\n \n \t* gcc.dg/bad-dereference.c: New test case."}, {"sha": "2c345dd75bc5f928e82c8cdb8e8a3fc237455f47", "filename": "gcc/testsuite/gcc.target/i386/pr69140.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5027395ec641081ed33dd2c4b8204aba7053782c/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr69140.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5027395ec641081ed33dd2c4b8204aba7053782c/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr69140.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr69140.c?ref=5027395ec641081ed33dd2c4b8204aba7053782c", "patch": "@@ -0,0 +1,24 @@\n+/* { dg-do compile { target lp64 } } */\n+/* { dg-options \"-O2 -mincoming-stack-boundary=3\" } */\n+\n+typedef struct {\n+  unsigned int buf[4];\n+  unsigned char in[64];\n+} MD4_CTX;\n+\n+static void\n+MD4Transform (unsigned int buf[4], const unsigned int in[16])\n+{\n+  unsigned int a, b, c, d;\n+  (b) += ((((c)) & ((d))) | ((~(c)) & ((a)))) + (in[7]);\n+  (a) += ((((b)) & ((c))) | ((~(b)) & ((d)))) + (in[8]);\n+  (d) += ((((a)) & ((b))) | ((~(a)) & ((c)))) + (in[9]);\n+  buf[3] += d;\n+}\n+\n+void __attribute__((ms_abi))\n+MD4Update (MD4_CTX *ctx, const unsigned char *buf)\n+{\n+  MD4Transform( ctx->buf, (unsigned int *)ctx->in);\n+  MD4Transform( ctx->buf, (unsigned int *)ctx->in);\n+}"}]}