{"sha": "a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTJjNjdhOGQ3YTFiMjhjYWZiNDVkYjAzNGM1NWNmZTk2Y2YzZWU5Yw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2019-05-21T23:11:26Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2019-05-21T23:11:26Z"}, "message": "parser.c (cp_parser_template_declaration_after_parameters): Use DECL_SOURCE_LOCATION in literal operator template errors.\n\n/cp\n2019-05-21  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* parser.c (cp_parser_template_declaration_after_parameters): Use\n\tDECL_SOURCE_LOCATION in literal operator template errors.\n\n/testsuite\n2019-05-21  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* g++.dg/cpp0x/udlit-tmpl-arg-neg2.C: Check locations too.\n\t* g++.dg/cpp0x/udlit-tmpl-parms-neg.C: Likewise.\n\nFrom-SVN: r271492", "tree": {"sha": "67b341e705318232e7328c817c590d3a52c30db3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/67b341e705318232e7328c817c590d3a52c30db3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c/comments", "author": null, "committer": null, "parents": [{"sha": "cdb42a36a1ebe89a30389a3847bd8937e4b997e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdb42a36a1ebe89a30389a3847bd8937e4b997e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cdb42a36a1ebe89a30389a3847bd8937e4b997e5"}], "stats": {"total": 33, "additions": 20, "deletions": 13}, "files": [{"sha": "970f7e89b380640c18b57dc07538eae4730d60ec", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c", "patch": "@@ -1,3 +1,8 @@\n+2019-05-21  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* parser.c (cp_parser_template_declaration_after_parameters): Use\n+\tDECL_SOURCE_LOCATION in literal operator template errors.\n+\n 2019-05-21  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/67184"}, {"sha": "1440fdb0d184a2c63e283faedb9ea327adb7c23d", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c", "patch": "@@ -27895,14 +27895,16 @@ cp_parser_template_declaration_after_parameters (cp_parser* parser,\n       if (!ok)\n \t{\n \t  if (cxx_dialect > cxx17)\n-\t    error (\"literal operator template %qD has invalid parameter list;\"\n-\t\t   \" expected non-type template parameter pack %<<char...>%> \"\n-\t\t   \"or single non-type parameter of class type\",\n-\t\t   decl);\n+\t    error_at (DECL_SOURCE_LOCATION (decl), \"literal operator \"\n+\t\t      \"template %qD has invalid parameter list; expected \"\n+\t\t      \"non-type template parameter pack %<<char...>%> or \"\n+\t\t      \"single non-type parameter of class type\",\n+\t\t      decl);\n \t  else\n-\t    error (\"literal operator template %qD has invalid parameter list;\"\n-\t\t   \" expected non-type template parameter pack %<<char...>%>\",\n-\t\t   decl);\n+\t    error_at (DECL_SOURCE_LOCATION (decl), \"literal operator \"\n+\t\t      \"template %qD has invalid parameter list; expected \"\n+\t\t      \"non-type template parameter pack %<<char...>%>\",\n+\t\t      decl);\n \t}\n     }\n "}, {"sha": "3f20d152affde06d645f06c01ffadb8d247c7ffc", "filename": "gcc/testsuite/g++.dg/cpp0x/decltype-pr66548.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype-pr66548.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype-pr66548.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype-pr66548.C?ref=a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c", "patch": "@@ -11,7 +11,7 @@ struct Meow {};\n \n void f ()\n {\n-  decltype (Meow.purr ()) d;   // { dg-error \"expected primary-expression\" \"pr89875\" { xfail c++98_only } }\n+  decltype (Meow.purr ()) d;   // { dg-error \"expected primary-expression\" }\n   (void)&d;\n }\n "}, {"sha": "f2db95d3eaddc812fd25e77c4a38175e1983019c", "filename": "gcc/testsuite/g++.dg/cpp0x/udlit-tmpl-arg-neg2.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-tmpl-arg-neg2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-tmpl-arg-neg2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-tmpl-arg-neg2.C?ref=a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c", "patch": "@@ -2,6 +2,6 @@\n // { dg-do compile { target c++11 } }\n \n template <T, T... U>\t\t// { dg-error \"'T' has not been declared\" }\n-int operator\"\" _foo ();\t\t// { dg-error \"has invalid parameter list\" }\n+int operator\"\" _foo ();\t\t// { dg-error \"5:literal operator template .int operator\\\"\\\"_foo\\\\(\\\\). has invalid parameter list\" }\n template <T... U>\t\t// { dg-error \"'T' has not been declared\" }\n-int operator\"\" _bar ();\t\t// { dg-error \"has invalid parameter list\" }\n+int operator\"\" _bar ();\t\t// { dg-error \"5:literal operator template .int operator\\\"\\\"_bar\\\\(\\\\). has invalid parameter list\" }"}, {"sha": "167d871a0055fadb41fa6775daae366dd3d4c7a4", "filename": "gcc/testsuite/g++.dg/cpp0x/udlit-tmpl-parms-neg.C", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-tmpl-parms-neg.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-tmpl-parms-neg.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-tmpl-parms-neg.C?ref=a2c67a8d7a1b28cafb45db034c55cfe96cf3ee9c", "patch": "@@ -3,10 +3,10 @@\n class Foo { };\n \n template<wchar_t...>\n-  Foo operator\"\" _Foo(); // { dg-error \"literal operator template|has invalid parameter list\" }\n+  Foo operator\"\" _Foo(); // { dg-error \"7:literal operator template .Foo operator\\\"\\\"_Foo\\\\(\\\\). has invalid parameter list\" }\n \n template<char>\n-  Foo operator\"\" _Bar(); // { dg-error \"literal operator template|has invalid parameter list\" }\n+  Foo operator\"\" _Bar(); // { dg-error \"7:literal operator template .Foo operator\\\"\\\"_Bar\\\\(\\\\). has invalid parameter list\" }\n \n template<typename... Type>\n-  Foo operator\"\" _Bar(); // { dg-error \"literal operator template|has invalid parameter list\" }\n+  Foo operator\"\" _Bar(); // { dg-error \"7:literal operator template .Foo operator\\\"\\\"_Bar\\\\(\\\\). has invalid parameter list\" }"}]}