{"sha": "4bf3289bd8cff84abfd38b4d4b78edf187f4a256", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGJmMzI4OWJkOGNmZjg0YWJmZDM4YjRkNGI3OGVkZjE4N2Y0YTI1Ng==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2007-10-07T21:36:09Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2007-10-07T21:36:09Z"}, "message": "re PR libfortran/33683 (calculating lgamma instead of gamma)\n\n2007-10-07  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR libfortran/33683\n\t* mathbuiltins.def (GAMMA):  Change function name to\n\t\"tgamma\" instad of \"gamma\".\n\n2007-10-07  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR libfortran/33683\n\t* gfortran.dg/gamma_5.f90:  New test case\n\nFrom-SVN: r129116", "tree": {"sha": "26ffeef73c65d0bc34b9aa827a332404fe3efbc1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/26ffeef73c65d0bc34b9aa827a332404fe3efbc1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4bf3289bd8cff84abfd38b4d4b78edf187f4a256", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bf3289bd8cff84abfd38b4d4b78edf187f4a256", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4bf3289bd8cff84abfd38b4d4b78edf187f4a256", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bf3289bd8cff84abfd38b4d4b78edf187f4a256/comments", "author": null, "committer": null, "parents": [{"sha": "cbc9503d788ea852d7821d1baf6711ee619492ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbc9503d788ea852d7821d1baf6711ee619492ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbc9503d788ea852d7821d1baf6711ee619492ee"}], "stats": {"total": 55, "additions": 54, "deletions": 1}, "files": [{"sha": "0f5758a135bd4069b3ba362fb691d5cfa173bed4", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bf3289bd8cff84abfd38b4d4b78edf187f4a256/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bf3289bd8cff84abfd38b4d4b78edf187f4a256/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=4bf3289bd8cff84abfd38b4d4b78edf187f4a256", "patch": "@@ -1,3 +1,9 @@\n+2007-10-07  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR libfortran/33683\n+\t* mathbuiltins.def (GAMMA):  Change function name to\n+\t\"tgamma\" instad of \"gamma\".\n+\n 2007-10-07  Tobias Schl\ufffdter  <tobi@gcc.gnu.org>\n \n \tPR fortran/20851"}, {"sha": "37758e1adfa8a3c68129e24284510e343809a04f", "filename": "gcc/fortran/mathbuiltins.def", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bf3289bd8cff84abfd38b4d4b78edf187f4a256/gcc%2Ffortran%2Fmathbuiltins.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bf3289bd8cff84abfd38b4d4b78edf187f4a256/gcc%2Ffortran%2Fmathbuiltins.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmathbuiltins.def?ref=4bf3289bd8cff84abfd38b4d4b78edf187f4a256", "patch": "@@ -30,5 +30,5 @@ DEFINE_MATH_BUILTIN   (Y1,    \"y1\",     0)\n DEFINE_MATH_BUILTIN   (YN,    \"yn\",     2)\n DEFINE_MATH_BUILTIN   (ERF,   \"erf\",    0)\n DEFINE_MATH_BUILTIN   (ERFC,  \"erfc\",   0)\n-DEFINE_MATH_BUILTIN   (GAMMA, \"gamma\",  0)\n+DEFINE_MATH_BUILTIN   (GAMMA, \"tgamma\", 0)\n DEFINE_MATH_BUILTIN   (LGAMMA,\"lgamma\", 0)"}, {"sha": "3997ac380baa47674eadf73f06cee82ecd7314b4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bf3289bd8cff84abfd38b4d4b78edf187f4a256/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bf3289bd8cff84abfd38b4d4b78edf187f4a256/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4bf3289bd8cff84abfd38b4d4b78edf187f4a256", "patch": "@@ -1,3 +1,8 @@\n+2007-10-07  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR libfortran/33683\n+\t* gfortran.dg/gamma_5.f90:  New test case\n+\n 2007-10-07  Tobias Schl\ufffdter  <tobi@gcc.gnu.org>\n \n \tPR fortran/20851"}, {"sha": "6945cfdc1c777695782b51e4e3cbd5b38ed0dfbf", "filename": "gcc/testsuite/gfortran.dg/gamma_5.f90", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4bf3289bd8cff84abfd38b4d4b78edf187f4a256/gcc%2Ftestsuite%2Fgfortran.dg%2Fgamma_5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4bf3289bd8cff84abfd38b4d4b78edf187f4a256/gcc%2Ftestsuite%2Fgfortran.dg%2Fgamma_5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgamma_5.f90?ref=4bf3289bd8cff84abfd38b4d4b78edf187f4a256", "patch": "@@ -0,0 +1,42 @@\n+! { dg-do run }\n+! PR 33683 - we used to pick up the wrong gamma function\n+! from the library on some systems.\n+program main\n+  implicit none\n+  integer, parameter :: n_max = 20\n+  double precision, dimension(0:n_max) :: c\n+  double precision :: pi\n+  integer :: n\n+  double precision :: td, xd\n+  real :: ts,xs\n+\n+  pi = 4 * atan(1.d0)\n+  c(0) = 1.\n+  do n=1, n_max\n+     c(n) = (2*n-1)*c(n-1)*0.5d0\n+  end do\n+\n+  do n=1, n_max\n+     xs = n + 0.5\n+     xd = n + 0.5d0\n+     td = c(n)*sqrt(pi)\n+     ts = c(n)*sqrt(pi)\n+     if (abs(gamma(xs)-ts)/ts > 2e-6) call abort\n+     if (abs(gamma(xd)-td)/td > 5e-14) call abort\n+  end do\n+  call tst_s(2.3, gamma(2.3))\n+  call tst_s(3.7, gamma(3.7))\n+  call tst_s(5.5, gamma(5.5))\n+  call tst_d(4.2d0, gamma(4.2d0))\n+  call tst_d(8.1d0, gamma(8.1d0))\n+contains\n+  subroutine tst_s(a, b)\n+    real :: a, b\n+    if (abs(gamma(a) - b)/b > 1e-6) call abort\n+  end subroutine tst_s\n+\n+  subroutine tst_d(a, b)\n+    double precision :: a,b\n+    if (abs(gamma(a) - b)/b > 5e-14) call abort\n+  end subroutine tst_d\n+end program main"}]}