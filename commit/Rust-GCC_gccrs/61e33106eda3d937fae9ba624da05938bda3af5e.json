{"sha": "61e33106eda3d937fae9ba624da05938bda3af5e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjFlMzMxMDZlZGEzZDkzN2ZhZTliYTYyNGRhMDU5MzhiZGEzYWY1ZQ==", "commit": {"author": {"name": "Yannick Moy", "email": "moy@adacore.com", "date": "2019-08-21T08:31:07Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-08-21T08:31:07Z"}, "message": "[Ada] More precise propagation of Size attribute in generic instances\n\nGNATprove analyzer for SPARK code depends on the frontend to accurately\npropagate the known value of Size attribute. This was not done for\nformal type parameters in generic instantiations. Now fixed.\n\nThere is no impact on compilation.\n\n2019-08-21  Yannick Moy  <moy@adacore.com>\n\ngcc/ada/\n\n\t* sem_ch3.adb (Analyze_Subtype_Declaration): Inherit RM_Size\n\tfield for formal type parameters in generic instantiations.\n\nFrom-SVN: r274788", "tree": {"sha": "53e8ec52d8bb6004662a1607e9cc6ef38059269e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/53e8ec52d8bb6004662a1607e9cc6ef38059269e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/61e33106eda3d937fae9ba624da05938bda3af5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61e33106eda3d937fae9ba624da05938bda3af5e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61e33106eda3d937fae9ba624da05938bda3af5e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61e33106eda3d937fae9ba624da05938bda3af5e/comments", "author": {"login": "yannickmoy", "id": 859440, "node_id": "MDQ6VXNlcjg1OTQ0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannickmoy", "html_url": "https://github.com/yannickmoy", "followers_url": "https://api.github.com/users/yannickmoy/followers", "following_url": "https://api.github.com/users/yannickmoy/following{/other_user}", "gists_url": "https://api.github.com/users/yannickmoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannickmoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannickmoy/subscriptions", "organizations_url": "https://api.github.com/users/yannickmoy/orgs", "repos_url": "https://api.github.com/users/yannickmoy/repos", "events_url": "https://api.github.com/users/yannickmoy/events{/privacy}", "received_events_url": "https://api.github.com/users/yannickmoy/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e9934e8c79c4eafbb231ed53b3a6e1c6632a1a15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9934e8c79c4eafbb231ed53b3a6e1c6632a1a15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9934e8c79c4eafbb231ed53b3a6e1c6632a1a15"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "abe3524816d00dae0804a09cb52ecaeab4a7d470", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61e33106eda3d937fae9ba624da05938bda3af5e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61e33106eda3d937fae9ba624da05938bda3af5e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=61e33106eda3d937fae9ba624da05938bda3af5e", "patch": "@@ -1,3 +1,8 @@\n+2019-08-21  Yannick Moy  <moy@adacore.com>\n+\n+\t* sem_ch3.adb (Analyze_Subtype_Declaration): Inherit RM_Size\n+\tfield for formal type parameters in generic instantiations.\n+\n 2019-08-21  Yannick Moy  <moy@adacore.com>\n \n \t* sem_spark.adb: Update references to the SPARK RM."}, {"sha": "edde68921cf2446a80401f8b41a45ff30b75f9cf", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61e33106eda3d937fae9ba624da05938bda3af5e/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61e33106eda3d937fae9ba624da05938bda3af5e/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=61e33106eda3d937fae9ba624da05938bda3af5e", "patch": "@@ -5555,6 +5555,14 @@ package body Sem_Ch3 is\n             =>\n                Set_Ekind                (Id, E_Record_Subtype);\n \n+               --  Subtype declarations introduced for formal type parameters\n+               --  in generic instantiations should inherit the Size value of\n+               --  the type they rename.\n+\n+               if Present (Generic_Parent_Type (N)) then\n+                  Set_RM_Size           (Id, RM_Size (T));\n+               end if;\n+\n                if Ekind (T) = E_Record_Subtype\n                  and then Present (Cloned_Subtype (T))\n                then"}]}