{"sha": "66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjZkY2I3NDdlOGJhMWYwZWQ2ZTBkNDllZDNkODQyYjNlMDkxNjA5ZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2019-02-28T07:17:49Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-02-28T07:17:49Z"}, "message": "re PR c/89525 (inform messages from -Wbuiltin-declaration-mismatch even with -w)\n\n\tPR c/89525\n\t* c-typeck.c (convert_arguments): Call inform_declaration only if\n\tthe previous warning_at call returned true.\n\n\t* gcc.dg/pr89525.c: New test.\n\nFrom-SVN: r269274", "tree": {"sha": "f9e4f0bf17c9733435280d2b609d2b9ca4dca8f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f9e4f0bf17c9733435280d2b609d2b9ca4dca8f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c2df3c99d5cafbb9774fc6e944fbd64aa17c03bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2df3c99d5cafbb9774fc6e944fbd64aa17c03bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2df3c99d5cafbb9774fc6e944fbd64aa17c03bb"}], "stats": {"total": 38, "additions": 28, "deletions": 10}, "files": [{"sha": "ec60ed3b81a55225cfdd3cb989c1758de47a699e", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d", "patch": "@@ -1,3 +1,9 @@\n+2019-02-28  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/89525\n+\t* c-typeck.c (convert_arguments): Call inform_declaration only if\n+\tthe previous warning_at call returned true.\n+\n 2019-02-22  Thomas Schwinge  <thomas@codesourcery.com>\n \n \t* c-parser.c (c_parser_oacc_shape_clause): Add loc formal"}, {"sha": "2de4d0f85fdf47698034d4bbe83d38d31cf332a0", "filename": "gcc/c/c-typeck.c", "status": "modified", "additions": 8, "deletions": 10, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d/gcc%2Fc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d/gcc%2Fc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-typeck.c?ref=66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d", "patch": "@@ -3509,12 +3509,10 @@ convert_arguments (location_t loc, vec<location_t> arg_loc, tree typelist,\n \n       if (builtin_type == void_type_node)\n \t{\n-\t  warning_at (loc, OPT_Wbuiltin_declaration_mismatch,\n-\t\t      \"too many arguments to built-in function %qE \"\n-\t\t      \"expecting %d\",\n-\t\t      function, parmnum);\n-\n-\t  inform_declaration (fundecl);\n+\t  if (warning_at (loc, OPT_Wbuiltin_declaration_mismatch,\n+\t\t\t  \"too many arguments to built-in function %qE \"\n+\t\t\t  \"expecting %d\", function, parmnum))\n+\t    inform_declaration (fundecl);\n \t  builtin_typetail = NULL_TREE;\n \t}\n \n@@ -3651,10 +3649,10 @@ convert_arguments (location_t loc, vec<location_t> arg_loc, tree typelist,\n       for (tree t = builtin_typetail; t; t = TREE_CHAIN (t))\n \t++nargs;\n \n-      warning_at (loc, OPT_Wbuiltin_declaration_mismatch,\n-\t\t  \"too few arguments to built-in function %qE expecting %u\",\n-\t\t  function, nargs - 1);\n-      inform_declaration (fundecl);\n+      if (warning_at (loc, OPT_Wbuiltin_declaration_mismatch,\n+\t\t      \"too few arguments to built-in function %qE \"\n+\t\t      \"expecting %u\", function, nargs - 1))\n+\tinform_declaration (fundecl);\n     }\n \n   return error_args ? -1 : (int) parmnum;"}, {"sha": "c711829816ec2fb9f63036f6443f961956d06b65", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d", "patch": "@@ -1,5 +1,8 @@\n 2019-02-28  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c/89525\n+\t* gcc.dg/pr89525.c: New test.\n+\n \tPR c/89520\n \t* gcc.dg/pr89520-1.c: New test.\n \t* gcc.dg/pr89520-2.c: New test."}, {"sha": "099e174875cc626e71cb8560eb874a0107a91fc4", "filename": "gcc/testsuite/gcc.dg/pr89525.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89525.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89525.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89525.c?ref=66dcb747e8ba1f0ed6e0d49ed3d842b3e091609d", "patch": "@@ -0,0 +1,11 @@\n+/* PR c/89525 */\n+/* { dg-do compile } */\n+/* { dg-options \"-w\" } */\n+\n+double sqrt ();\t/* { dg-bogus \"declared here\" } */\n+\n+void\n+foo (void)\n+{\n+  sqrt ();\n+}"}]}