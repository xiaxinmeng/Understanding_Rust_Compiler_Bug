{"sha": "a747170836486ab3bbe8d16ec5f0c26566a0a0ff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTc0NzE3MDgzNjQ4NmFiM2JiZThkMTZlYzVmMGMyNjU2NmEwYTBmZg==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2007-05-12T08:00:12Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-05-12T08:00:12Z"}, "message": "configure.ac (gcc_gxx_include_dir): Use $(libsubdir_to_prefix).\n\ngcc/\n\t* configure.ac (gcc_gxx_include_dir): Use $(libsubdir_to_prefix).\n\t(gcc_tooldir): Likewise.\n\t* configure: Regenerate.\n\t* Makefile.in (libsubdir_to_prefix): New variable, based on the\n\told configure.ac gcc_tooldir setting.\n\t(prefix_to_exec_prefix): New variable.\n\t(DRIVER_DEFINES): Use $(libsubdir_to_prefix)$(prefix_to_exec_prefix)\n\trather than $(unlibsubdir)/../ to derive TOOLDIR_BASE_PREFIX.\n\nFrom-SVN: r124634", "tree": {"sha": "133456234c1cdb8e1855c392ad57492bb7b95d86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/133456234c1cdb8e1855c392ad57492bb7b95d86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a747170836486ab3bbe8d16ec5f0c26566a0a0ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a747170836486ab3bbe8d16ec5f0c26566a0a0ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a747170836486ab3bbe8d16ec5f0c26566a0a0ff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a747170836486ab3bbe8d16ec5f0c26566a0a0ff/comments", "author": null, "committer": null, "parents": [{"sha": "eb77cddf4276f2ae7c6745cd7cf82dd49327dc4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb77cddf4276f2ae7c6745cd7cf82dd49327dc4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb77cddf4276f2ae7c6745cd7cf82dd49327dc4f"}], "stats": {"total": 121, "additions": 46, "deletions": 75}, "files": [{"sha": "01ce517bccad7f833819fcc15cdcac3693591a22", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a747170836486ab3bbe8d16ec5f0c26566a0a0ff/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a747170836486ab3bbe8d16ec5f0c26566a0a0ff/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a747170836486ab3bbe8d16ec5f0c26566a0a0ff", "patch": "@@ -1,3 +1,14 @@\n+2007-05-12  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* configure.ac (gcc_gxx_include_dir): Use $(libsubdir_to_prefix).\n+\t(gcc_tooldir): Likewise.\n+\t* configure: Regenerate.\n+\t* Makefile.in (libsubdir_to_prefix): New variable, based on the\n+\told configure.ac gcc_tooldir setting.\n+\t(prefix_to_exec_prefix): New variable.\n+\t(DRIVER_DEFINES): Use $(libsubdir_to_prefix)$(prefix_to_exec_prefix)\n+\trather than $(unlibsubdir)/../ to derive TOOLDIR_BASE_PREFIX.\n+\n 2007-05-11  Silvius Rus  <rus@google.com>\n \n \t* Makefile.in (OBJS-common): Add tree-ssa-alias-warnings.o."}, {"sha": "ce039a29fb4828a342569c623f80a128147a6467", "filename": "gcc/Makefile.in", "status": "modified", "additions": 31, "deletions": 1, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a747170836486ab3bbe8d16ec5f0c26566a0a0ff/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a747170836486ab3bbe8d16ec5f0c26566a0a0ff/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=a747170836486ab3bbe8d16ec5f0c26566a0a0ff", "patch": "@@ -461,6 +461,36 @@ libexecdir = @libexecdir@\n libsubdir = $(libdir)/gcc/$(target_noncanonical)/$(version)\n # Directory in which the compiler finds executables\n libexecsubdir = $(libexecdir)/gcc/$(target_noncanonical)/$(version)\n+# $(prefix), expressed as a path relative to $(libsubdir).\n+#\n+# An explanation of the sed strings:\n+#  -e 's|^$(prefix)||'   matches and eliminates 'prefix' from 'exec_prefix'\n+#  -e 's|/$$||'          match a trailing forward slash and eliminates it\n+#  -e 's|^[^/]|/|'       forces the string to start with a forward slash (*)\n+#  -e 's|/[^/]*|../|g'   replaces each occurrence of /<directory> with ../\n+#\n+# (*) Note this pattern overwrites the first character of the string\n+# with a forward slash if one is not already present.  This is not a\n+# problem because the exact names of the sub-directories concerned is\n+# unimportant, just the number of them matters.\n+#\n+# The practical upshot of these patterns is like this:\n+#\n+#  prefix     exec_prefix        result\n+#  ------     -----------        ------\n+#   /foo        /foo/bar          ../\n+#   /foo/       /foo/bar          ../\n+#   /foo        /foo/bar/         ../\n+#   /foo/       /foo/bar/         ../\n+#   /foo        /foo/bar/ugg      ../../\n+libsubdir_to_prefix = \\\n+  $(unlibsubdir)/`echo \"$(libdir)\" | \\\n+    sed -e 's|^$(prefix)||' -e 's|/$$||' -e 's|^[^/]|/|' \\\n+        -e 's|/[^/]*|../|g'`\n+# $(exec_prefix), expressed as a path relative to $(prefix).\n+prefix_to_exec_prefix = \\\n+  `echo \"$(exec_prefix)\" | \\\n+   sed -e 's|^$(prefix)||' -e 's|^/||' -e '/./s|$$|/|'`\n # Used to produce a relative $(gcc_tooldir) in gcc.o\n unlibsubdir = ../../..\n # Directory in which to find other cross-compilation tools and headers.\n@@ -1778,7 +1808,7 @@ DRIVER_DEFINES = \\\n   -DDEFAULT_TARGET_VERSION=\\\"$(version)\\\" \\\n   -DDEFAULT_TARGET_MACHINE=\\\"$(target_noncanonical)\\\" \\\n   -DSTANDARD_BINDIR_PREFIX=\\\"$(bindir)/\\\" \\\n-  -DTOOLDIR_BASE_PREFIX=\\\"$(unlibsubdir)/../\\\" \\\n+  -DTOOLDIR_BASE_PREFIX=\\\"$(libsubdir_to_prefix)$(prefix_to_exec_prefix)\\\" \\\n   @TARGET_SYSTEM_ROOT_DEFINE@ \\\n   $(VALGRIND_DRIVER_DEFINES) \\\n   `test \"X$${SHLIB_LINK}\" = \"X\" || test \"@enable_shared@\" != \"yes\" || echo \"-DENABLE_SHARED_LIBGCC\"` \\"}, {"sha": "f920639666938b15172f5b4d8c6216410d7e7255", "filename": "gcc/configure", "status": "modified", "additions": 2, "deletions": 35, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a747170836486ab3bbe8d16ec5f0c26566a0a0ff/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a747170836486ab3bbe8d16ec5f0c26566a0a0ff/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=a747170836486ab3bbe8d16ec5f0c26566a0a0ff", "patch": "@@ -1688,7 +1688,7 @@ if test x${gcc_gxx_include_dir} = x; then\n     if test x$host != x$target; then\n        libstdcxx_incdir=\"$target_alias/$libstdcxx_incdir\"\n     fi\n-    gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(unlibsubdir)/..\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/[^/]*|/..|g'\\`/$libstdcxx_incdir\"\n+    gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(libsubdir_to_prefix)$libstdcxx_incdir\"\n   fi\n fi\n \n@@ -16835,40 +16835,7 @@ if test \"x$subdirs\" != x; then\n fi\n echo \"source ${srcdir}/gdbinit.in\" >> .gdbinit\n \n-# If $(exec_prefix) exists and is not the same as $(prefix), then compute an\n-# absolute path for gcc_tooldir based on inserting the number of up-directory\n-# movements required to get from $(exec_prefix) to $(prefix) into the basic\n-# $(libsubdir)/@(unlibsubdir) based path.\n-# Don't set gcc_tooldir to tooldir since that's only passed in by the toplevel\n-# make and thus we'd get different behavior depending on where we built the\n-# sources.\n-if test x$exec_prefix = xNONE -o x$exec_prefix = x$prefix; then\n-    gcc_tooldir='$(libsubdir)/$(unlibsubdir)/../$(target_noncanonical)'\n-else\n-# An explanation of the sed strings:\n-#  -e 's|^\\$(prefix)||'   matches and eliminates 'prefix' from 'exec_prefix'\n-#  -e 's|/$||'            match a trailing forward slash and eliminates it\n-#  -e 's|^[^/]|/|'        forces the string to start with a forward slash (*)\n-#  -e 's|/[^/]*|../|g'    replaces each occurrence of /<directory> with ../\n-#\n-# (*) Note this pattern overwrites the first character of the string\n-# with a forward slash if one is not already present.  This is not a\n-# problem because the exact names of the sub-directories concerned is\n-# unimportant, just the number of them matters.\n-#\n-# The practical upshot of these patterns is like this:\n-#\n-#  prefix     exec_prefix        result\n-#  ------     -----------        ------\n-#   /foo        /foo/bar          ../\n-#   /foo/       /foo/bar          ../\n-#   /foo        /foo/bar/         ../\n-#   /foo/       /foo/bar/         ../\n-#   /foo        /foo/bar/ugg      ../../\n-#\n-    dollar='$$'\n-    gcc_tooldir=\"\\$(libsubdir)/\\$(unlibsubdir)/\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/\\$(dollar)||' -e 's|^[^/]|/|' -e 's|/[^/]*|../|g'\\`\\$(target_noncanonical)\"\n-fi\n+gcc_tooldir='$(libsubdir)/$(libsubdir_to_prefix)$(target_noncanonical)'\n \n \n "}, {"sha": "f5e9c3ee8f27207cc87aad01bbac3d388428c643", "filename": "gcc/configure.ac", "status": "modified", "additions": 2, "deletions": 39, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a747170836486ab3bbe8d16ec5f0c26566a0a0ff/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a747170836486ab3bbe8d16ec5f0c26566a0a0ff/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=a747170836486ab3bbe8d16ec5f0c26566a0a0ff", "patch": "@@ -141,9 +141,7 @@ if test x${gcc_gxx_include_dir} = x; then\n     if test x$host != x$target; then\n        libstdcxx_incdir=\"$target_alias/$libstdcxx_incdir\"\n     fi\n-changequote(<<, >>)dnl\n-    gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(unlibsubdir)/..\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/[^/]*|/..|g'\\`/$libstdcxx_incdir\"\n-changequote([, ])dnl\n+    gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(libsubdir_to_prefix)$libstdcxx_incdir\"\n   fi\n fi\n \n@@ -3681,42 +3679,7 @@ if test \"x$subdirs\" != x; then\n fi\n echo \"source ${srcdir}/gdbinit.in\" >> .gdbinit\n \n-# If $(exec_prefix) exists and is not the same as $(prefix), then compute an\n-# absolute path for gcc_tooldir based on inserting the number of up-directory\n-# movements required to get from $(exec_prefix) to $(prefix) into the basic\n-# $(libsubdir)/@(unlibsubdir) based path.\n-# Don't set gcc_tooldir to tooldir since that's only passed in by the toplevel\n-# make and thus we'd get different behavior depending on where we built the\n-# sources.\n-if test x$exec_prefix = xNONE -o x$exec_prefix = x$prefix; then\n-    gcc_tooldir='$(libsubdir)/$(unlibsubdir)/../$(target_noncanonical)'\n-else\n-changequote(<<, >>)dnl\n-# An explanation of the sed strings:\n-#  -e 's|^\\$(prefix)||'   matches and eliminates 'prefix' from 'exec_prefix'\n-#  -e 's|/$||'            match a trailing forward slash and eliminates it\n-#  -e 's|^[^/]|/|'        forces the string to start with a forward slash (*)\n-#  -e 's|/[^/]*|../|g'    replaces each occurrence of /<directory> with ../\n-#\n-# (*) Note this pattern overwrites the first character of the string\n-# with a forward slash if one is not already present.  This is not a\n-# problem because the exact names of the sub-directories concerned is\n-# unimportant, just the number of them matters.\n-#\n-# The practical upshot of these patterns is like this:\n-#\n-#  prefix     exec_prefix        result\n-#  ------     -----------        ------\n-#   /foo        /foo/bar          ../\n-#   /foo/       /foo/bar          ../\n-#   /foo        /foo/bar/         ../\n-#   /foo/       /foo/bar/         ../\n-#   /foo        /foo/bar/ugg      ../../\n-#\n-    dollar='$$'\n-    gcc_tooldir=\"\\$(libsubdir)/\\$(unlibsubdir)/\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/\\$(dollar)||' -e 's|^[^/]|/|' -e 's|/[^/]*|../|g'\\`\\$(target_noncanonical)\"\n-changequote([, ])dnl\n-fi\n+gcc_tooldir='$(libsubdir)/$(libsubdir_to_prefix)$(target_noncanonical)'\n AC_SUBST(gcc_tooldir)\n AC_SUBST(dollar)\n "}]}