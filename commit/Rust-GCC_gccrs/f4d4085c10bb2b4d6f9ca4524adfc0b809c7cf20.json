{"sha": "f4d4085c10bb2b4d6f9ca4524adfc0b809c7cf20", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjRkNDA4NWMxMGJiMmI0ZDZmOWNhNDUyNGFkZmMwYjgwOWM3Y2YyMA==", "commit": {"author": {"name": "Bernhard Fischer", "email": "aldot@gcc.gnu.org", "date": "2006-11-05T14:57:24Z"}, "committer": {"name": "Bernhard Reutner-Fischer", "email": "aldot@gcc.gnu.org", "date": "2006-11-05T14:57:24Z"}, "message": "re PR fortran/21061 (gfortran ignores -Werror)\n\n2006-11-05  Bernhard Fischer  <aldot@gcc.gnu.org>\n\n        PR fortran/21061\n        * error.c (gfc_warning): If warnings_are_errors then treat\n        warnings as errors with respect to the exit code.\n        (gfc_notify_std): Ditto.\n        (gfc_warning_now): Ditto.\n\nFrom-SVN: r118501", "tree": {"sha": "a64dcfdd3cf6ab9e0f100febf122fcb3b2bfb5e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a64dcfdd3cf6ab9e0f100febf122fcb3b2bfb5e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f4d4085c10bb2b4d6f9ca4524adfc0b809c7cf20", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4d4085c10bb2b4d6f9ca4524adfc0b809c7cf20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4d4085c10bb2b4d6f9ca4524adfc0b809c7cf20", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4d4085c10bb2b4d6f9ca4524adfc0b809c7cf20/comments", "author": null, "committer": null, "parents": [{"sha": "7945be3f1907da2c7cbf5737d1c85f51ee55ef68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7945be3f1907da2c7cbf5737d1c85f51ee55ef68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7945be3f1907da2c7cbf5737d1c85f51ee55ef68"}], "stats": {"total": 24, "additions": 20, "deletions": 4}, "files": [{"sha": "7947f4a65d413ce221999b3467faa8d9f168aa69", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4d4085c10bb2b4d6f9ca4524adfc0b809c7cf20/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4d4085c10bb2b4d6f9ca4524adfc0b809c7cf20/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=f4d4085c10bb2b4d6f9ca4524adfc0b809c7cf20", "patch": "@@ -1,3 +1,11 @@\n+2006-11-05  Bernhard Fischer  <aldot@gcc.gnu.org>\n+\n+\tPR fortran/21061\n+\t* error.c (gfc_warning): If warnings_are_errors then treat\n+\twarnings as errors with respect to the exit code.\n+\t(gfc_notify_std): Ditto.\n+\t(gfc_warning_now): Ditto.\n+\n 2006-11-05  Francois-Xavier Coudert  <fxcoudert@gcc.gnu,org>\n \t    Paul Thomas  <pault@gcc.gnu.org>\n "}, {"sha": "dc4a6cf1fbc2dfc17acf1b8a0abd2d46016b68c0", "filename": "gcc/fortran/error.c", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4d4085c10bb2b4d6f9ca4524adfc0b809c7cf20/gcc%2Ffortran%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4d4085c10bb2b4d6f9ca4524adfc0b809c7cf20/gcc%2Ffortran%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ferror.c?ref=f4d4085c10bb2b4d6f9ca4524adfc0b809c7cf20", "patch": "@@ -476,7 +476,12 @@ gfc_warning (const char *nocmsgid, ...)\n \n   va_start (argp, nocmsgid);\n   if (buffer_flag == 0)\n+  {\n     warnings++;\n+    if (warnings_are_errors)\n+      errors++;\n+  }\n+\n   error_print (_(\"Warning:\"), _(nocmsgid), argp);\n   va_end (argp);\n \n@@ -519,14 +524,15 @@ gfc_notify_std (int std, const char *nocmsgid, ...)\n \n   if (gfc_suppress_error)\n     return warning ? SUCCESS : FAILURE;\n-  \n-  cur_error_buffer = warning ? &warning_buffer : &error_buffer;\n+\n+  cur_error_buffer = (warning && !warnings_are_errors)\n+    ? &warning_buffer : &error_buffer;\n   cur_error_buffer->flag = 1;\n   cur_error_buffer->index = 0;\n \n   if (buffer_flag == 0)\n     {\n-      if (warning)\n+      if (warning && !warnings_are_errors)\n \twarnings++;\n       else\n \terrors++;\n@@ -539,7 +545,7 @@ gfc_notify_std (int std, const char *nocmsgid, ...)\n   va_end (argp);\n \n   error_char ('\\0');\n-  return warning ? SUCCESS : FAILURE;\n+  return (warning && !warnings_are_errors) ? SUCCESS : FAILURE;\n }\n \n \n@@ -557,6 +563,8 @@ gfc_warning_now (const char *nocmsgid, ...)\n   i = buffer_flag;\n   buffer_flag = 0;\n   warnings++;\n+  if (warnings_are_errors)\n+    errors++;\n \n   va_start (argp, nocmsgid);\n   error_print (_(\"Warning:\"), _(nocmsgid), argp);"}]}