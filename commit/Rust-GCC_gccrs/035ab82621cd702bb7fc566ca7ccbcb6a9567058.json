{"sha": "035ab82621cd702bb7fc566ca7ccbcb6a9567058", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDM1YWI4MjYyMWNkNzAyYmI3ZmM1NjZjYTdjY2JjYjZhOTU2NzA1OA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2017-05-19T08:23:37Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2017-05-19T08:23:37Z"}, "message": "re PR middle-end/80764 (ICE at -O3 in both 32-bit and 64-bit modes on x86_64-linux-gnu (internal compiler error: in verify_loop_structure, at cfgloop.c:1644))\n\n2017-05-19  Richard Biener  <rguenther@suse.de>\n\n\tPR middle-end/80764\n\t* cfgexpand.c (expand_gimple_cond): Fix loop fixup.\n\n\t* gcc.dg/torture/pr80764.c: New testcase.\n\nFrom-SVN: r248261", "tree": {"sha": "ac85c22d0871839024511e1895e6d1ca0b09ab10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ac85c22d0871839024511e1895e6d1ca0b09ab10"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/035ab82621cd702bb7fc566ca7ccbcb6a9567058", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/035ab82621cd702bb7fc566ca7ccbcb6a9567058", "html_url": "https://github.com/Rust-GCC/gccrs/commit/035ab82621cd702bb7fc566ca7ccbcb6a9567058", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/035ab82621cd702bb7fc566ca7ccbcb6a9567058/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f0da130005c12d8544a7c9898a9001e4b7f11ee2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0da130005c12d8544a7c9898a9001e4b7f11ee2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0da130005c12d8544a7c9898a9001e4b7f11ee2"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "aae3fdded7efc5dc77aa089913308133c66bf085", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/035ab82621cd702bb7fc566ca7ccbcb6a9567058/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/035ab82621cd702bb7fc566ca7ccbcb6a9567058/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=035ab82621cd702bb7fc566ca7ccbcb6a9567058", "patch": "@@ -1,3 +1,8 @@\n+2017-05-19  Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/80764\n+\t* cfgexpand.c (expand_gimple_cond): Fix loop fixup.\n+\n 2017-05-18  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* config/rs6000/rs6000.c (struct machine_function): Add field"}, {"sha": "9965310353e6d9d93612d999fcf3d4c4bd1d530e", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/035ab82621cd702bb7fc566ca7ccbcb6a9567058/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/035ab82621cd702bb7fc566ca7ccbcb6a9567058/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=035ab82621cd702bb7fc566ca7ccbcb6a9567058", "patch": "@@ -2503,7 +2503,10 @@ expand_gimple_cond (basic_block bb, gcond *stmt)\n   false_edge->flags |= EDGE_FALLTHRU;\n   new_bb->count = false_edge->count;\n   new_bb->frequency = EDGE_FREQUENCY (false_edge);\n-  add_bb_to_loop (new_bb, bb->loop_father);\n+  add_bb_to_loop (new_bb, dest->loop_father);\n+  if (bb->loop_father->latch == bb\n+      && bb->loop_father->header == dest)\n+    bb->loop_father->latch = new_bb;\n   new_edge = make_edge (new_bb, dest, 0);\n   new_edge->probability = REG_BR_PROB_BASE;\n   new_edge->count = new_bb->count;"}, {"sha": "29a19ccbf2a2df79d7eaaa371986b4956941d793", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/035ab82621cd702bb7fc566ca7ccbcb6a9567058/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/035ab82621cd702bb7fc566ca7ccbcb6a9567058/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=035ab82621cd702bb7fc566ca7ccbcb6a9567058", "patch": "@@ -1,3 +1,8 @@\n+2017-05-19  Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/80764\n+\t* gcc.dg/torture/pr80764.c: New testcase.\n+\n 2017-05-18  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR target/80510"}, {"sha": "bc6d8e87ac3e6c0f1bac8ee18750b5d483fc365a", "filename": "gcc/testsuite/gcc.dg/torture/pr80764.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/035ab82621cd702bb7fc566ca7ccbcb6a9567058/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr80764.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/035ab82621cd702bb7fc566ca7ccbcb6a9567058/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr80764.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr80764.c?ref=035ab82621cd702bb7fc566ca7ccbcb6a9567058", "patch": "@@ -0,0 +1,14 @@\n+/* { dg-do compile } */\n+\n+int b, d, f, h;\n+char e;\n+int fn1();\n+int main() { return fn1(); }\n+int fn1(int p1) {\n+    for (; d;)\n+      for (; e < 3;) {\n+\t  for (; h;)\n+\t    b = fn1(0);\n+\t  return f;\n+      }\n+}"}]}