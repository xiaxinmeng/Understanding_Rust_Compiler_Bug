{"sha": "41dc91a89030fbf30192a18e542dceb3bb9dc28b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDFkYzkxYTg5MDMwZmJmMzAxOTJhMThlNTQyZGNlYjNiYjlkYzI4Yg==", "commit": {"author": {"name": "Simon Baldwin", "email": "simonb@google.com", "date": "2007-03-01T19:13:02Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2007-03-01T19:13:02Z"}, "message": "re PR c++/23689 (Malformed typedef silently ignored)\n\ncp/:\n\tPR c++/23689\n\t* decl.c (check_tag_decl): Added new warning for typedef ignored\n\twhen it precedes an otherwise valid non-typedef declaration.\ntestsuite/:\n\tPR c++/23689\n\t* warn/ignored_typedef.C: New.\n\t* init/ctor8.C: Added dg-warning to consume ignored typedef\n\twarning. \n\t* template/typedef2.C: Ditto.  Moved dg-error onto its own line\n\tand added an explicit line number.\n\nFrom-SVN: r122434", "tree": {"sha": "a63a6cf92c9f582524d032791a81a2a6da9d7ca7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a63a6cf92c9f582524d032791a81a2a6da9d7ca7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/41dc91a89030fbf30192a18e542dceb3bb9dc28b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41dc91a89030fbf30192a18e542dceb3bb9dc28b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41dc91a89030fbf30192a18e542dceb3bb9dc28b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41dc91a89030fbf30192a18e542dceb3bb9dc28b/comments", "author": null, "committer": null, "parents": [{"sha": "ceca734e8f8b368ab4087ce3970118775735f593", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ceca734e8f8b368ab4087ce3970118775735f593", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ceca734e8f8b368ab4087ce3970118775735f593"}], "stats": {"total": 46, "additions": 42, "deletions": 4}, "files": [{"sha": "9e2ea733e5a4c095ed4015572eb855a8abfcc8cc", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=41dc91a89030fbf30192a18e542dceb3bb9dc28b", "patch": "@@ -1,3 +1,9 @@\n+2007-03-01  Simon Baldwin <simonb@google.com>\n+\n+\tPR c++/23689\n+\t* decl.c (check_tag_decl): Added new warning for typedef ignored\n+\twhen it precedes an otherwise valid non-typedef declaration.\n+\n 2007-02-28  Sandra Loosemore  <sandra@codesourcery.com>\n \n \t* typeck.c (build_function_call): Store converted arguments"}, {"sha": "749cee33589a7a0d5128a82f50fecc57b4f5a9a6", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=41dc91a89030fbf30192a18e542dceb3bb9dc28b", "patch": "@@ -3694,6 +3694,8 @@ check_tag_decl (cp_decl_specifier_seq *declspecs)\n \t       || declspecs->specs[(int)ds_thread])\n \terror (\"qualifiers can only be specified for objects \"\n \t       \"and functions\");\n+      else if (saw_typedef)\n+\twarning (0, \"%<typedef%> was ignored in this declaration\");\n     }\n \n   return declared_type;"}, {"sha": "1f432cf5b33c24ed7d661d9a26276bc34fb0fa3e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=41dc91a89030fbf30192a18e542dceb3bb9dc28b", "patch": "@@ -1,3 +1,12 @@\n+2007-03-01  Simon Baldwin <simonb@google.com>\n+\n+\tPR c++/23689\n+\t* warn/ignored_typedef.C: New.\n+\t* init/ctor8.C: Added dg-warning to consume ignored typedef\n+\twarning. \n+\t* template/typedef2.C: Ditto.  Moved dg-error onto its own line\n+\tand added an explicit line number.\n+\n 2007-02-28  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/30364"}, {"sha": "beb92ef8519887d5c726027f91b6b80051d9ca12", "filename": "gcc/testsuite/g++.dg/init/ctor8.C", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fctor8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fctor8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fctor8.C?ref=41dc91a89030fbf30192a18e542dceb3bb9dc28b", "patch": "@@ -2,10 +2,8 @@\n \n typedef struct S { // { dg-error \"reference\" }\n   int &r; \n-};\n+}; // { dg-warning \"'typedef' was ignored\" }\n \n S f () {\n   return S (); // { dg-error \"synthesized\" }\n }\n-\n-"}, {"sha": "cfe0f3f75bf66b496b0206be9efa4d7bd2a7933c", "filename": "gcc/testsuite/g++.dg/template/typedef2.C", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypedef2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypedef2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypedef2.C?ref=41dc91a89030fbf30192a18e542dceb3bb9dc28b", "patch": "@@ -1,3 +1,4 @@\n // PR c++/18155\n \n-template<int> typedef struct A; // { dg-error \"\" }\n+template<int> typedef struct A; // { dg-warning \"'typedef' was ignored\" }\n+                                // { dg-error \"\" \"\" { target *-*-* } 3 }"}, {"sha": "74586a81f5b65e7aaab779fad228807ab337962d", "filename": "gcc/testsuite/g++.dg/warn/ignored_typedef.C", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fignored_typedef.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41dc91a89030fbf30192a18e542dceb3bb9dc28b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fignored_typedef.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fignored_typedef.C?ref=41dc91a89030fbf30192a18e542dceb3bb9dc28b", "patch": "@@ -0,0 +1,22 @@\n+// PR c++/23689\n+// Test that malformed typedef's produce a compiler warning.\n+\n+typedef char valid_0;\n+typedef int valid_1;\n+typedef long valid_2;\n+typedef float valid_3;\n+typedef double valid_4;\n+typedef unsigned valid_5;\n+typedef int *valid_6;\n+typedef struct valid_7 {} valid_8;\n+typedef struct {} valid_9;\n+typedef int temp_0; typedef temp_0 valid_10;\n+struct temp_1 {}; typedef temp_1 valid_11;\n+union temp_2 {}; typedef temp_2 valid_12;\n+typedef void (*valid_13) (int); \n+\n+typedef struct invalid_0 {};  // { dg-warning \"'typedef' was ignored\" }\n+typedef class invalid_1 {};  // { dg-warning \"'typedef' was ignored\" }\n+typedef enum invalid_2 { INVALID_2 };  // { dg-warning \"'typedef' was ignored\" }\n+typedef enum { INVALID_3 };  // { dg-warning \"'typedef' was ignored\" }\n+typedef union invalid_4 {};  // { dg-warning \"'typedef' was ignored\" }"}]}