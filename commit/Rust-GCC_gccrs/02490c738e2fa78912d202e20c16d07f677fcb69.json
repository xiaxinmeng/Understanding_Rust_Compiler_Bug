{"sha": "02490c738e2fa78912d202e20c16d07f677fcb69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDI0OTBjNzM4ZTJmYTc4OTEyZDIwMmUyMGMxNmQwN2Y2NzdmY2I2OQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-10T05:31:33Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-10T05:31:33Z"}, "message": "Move alloca handling before bytecode construction so that VAX C won't need two different values for LIBS.\n\nMove alloca handling before bytecode construction\nso that VAX C won't need two different values for LIBS.  Eliminate a\ncomment about make-like functionality that referred to a capability\nwhich has not been implemented.\n\nFrom-SVN: r5706", "tree": {"sha": "ed3d914440f8cc71365368d0d05847abad6f065f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed3d914440f8cc71365368d0d05847abad6f065f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02490c738e2fa78912d202e20c16d07f677fcb69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02490c738e2fa78912d202e20c16d07f677fcb69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02490c738e2fa78912d202e20c16d07f677fcb69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02490c738e2fa78912d202e20c16d07f677fcb69/comments", "author": null, "committer": null, "parents": [{"sha": "4b723aceca48f4f15b911c0989a6629c2f632960", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b723aceca48f4f15b911c0989a6629c2f632960", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b723aceca48f4f15b911c0989a6629c2f632960"}], "stats": {"total": 34, "additions": 13, "deletions": 21}, "files": [{"sha": "edbec28581e6d7fd106678cd2ce41aed6b4d5a7d", "filename": "gcc/make-cc1.com", "status": "modified", "additions": 13, "deletions": 21, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02490c738e2fa78912d202e20c16d07f677fcb69/gcc%2Fmake-cc1.com", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02490c738e2fa78912d202e20c16d07f677fcb69/gcc%2Fmake-cc1.com", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmake-cc1.com?ref=02490c738e2fa78912d202e20c16d07f677fcb69", "patch": "@@ -150,6 +150,18 @@ $ if DO_DEBUG.eq.1 then LDFLAGS :='LDFLAGS'/debug\n $!\n $if DO_LINK.eq.1 then goto compile_cc1\n $!\n+$! Build alloca if necessary (in 'LIBS for use with VAXC)\n+$!\n+$ if f$locate(\"alloca.obj\",f$edit(LIBS,\"lowercase\")).ge.f$length(LIBS) then -\n+\tgoto skip_alloca\n+$ if f$search(\"alloca.obj\").nes.\"\" then -  !does .obj exist? is it up to date?\n+    if f$cvtime(f$file_attributes(\"alloca.obj\",\"RDT\")).gts.-\n+       f$cvtime(f$file_attributes(\"alloca.c\",\"RDT\")) then  goto skip_alloca\n+$set verify\n+$ 'CC 'CFLAGS /define=\"STACK_DIRECTION=(-1)\" alloca.c\n+$!'f$verify(0)\n+$skip_alloca:\n+$!\n $if DO_BC.eq.1 \n $\tTHEN \n $\tcall compile bi_all.opt \"\"\n@@ -170,18 +182,6 @@ $!\n $if DO_INDEPENDENT.eq.1 \n $\tTHEN \n $!\n-$! Build alloca if necessary (in 'LIBS for use with VAXC)\n-$!\n-$ if f$locate(\"alloca.obj\",f$edit(LIBS,\"lowercase\")).ge.f$length(LIBS) then -\n-\tgoto skip_alloca\n-$ if f$search(\"alloca.obj\").nes.\"\" then -  !does .obj exist? is it up to date?\n-    if f$cvtime(f$file_attributes(\"alloca.obj\",\"RDT\")).gts.-\n-       f$cvtime(f$file_attributes(\"alloca.c\",\"RDT\")) then  goto skip_alloca\n-$set verify\n-$ 'CC 'CFLAGS /define=\"STACK_DIRECTION=(-1)\" alloca.c\n-$!'f$verify(0)\n-$skip_alloca:\n-$!\n $! First build a couple of header files from the machine description\n $! These are used by many of the source modules, so we build them now.\n $!\n@@ -359,10 +359,6 @@ $! name of the insn-* file to generate.  The second argument contains a\n $! list of any other object modules which must be linked to the gen*.c\n $! program.\n $!\n-$! If a previous version of insn-* exists, it is compared to the new one,\n-$! and if it has not changed, then the new one is discarded.  This is\n-$! done so that make like programs do not get thrown off.\n-$!\n $generate:\n $subroutine\n $if f$extract(0,5,p1).nes.\"INSN-\"\n@@ -385,13 +381,9 @@ $endsubroutine\n $!\n $! This subroutine generates the bc-* files.  The first argument is the\n $! name of the bc-* file to generate.  The second argument contains a \n-$! list of any other object modules which must be linked to the gen*.c\n+$! list of any other object modules which must be linked to the bi*.c\n $! program.\n $!\n-$! If a previous version of bc-* exists, it is compared to the new one,\n-$! and if it has not changed, then the new one is discarded.  This is\n-$! done so that make like programs do not get thrown off.\n-$!\n $bc_generate:\n $subroutine\n $if f$extract(0,3,p1).nes.\"BC-\""}]}