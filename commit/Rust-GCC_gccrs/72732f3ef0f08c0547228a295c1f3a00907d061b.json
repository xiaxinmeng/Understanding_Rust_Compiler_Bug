{"sha": "72732f3ef0f08c0547228a295c1f3a00907d061b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzI3MzJmM2VmMGYwOGMwNTQ3MjI4YTI5NWMxZjNhMDA5MDdkMDYxYg==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-07-07T19:53:36Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-07-07T19:53:36Z"}, "message": "symtab.c: Include calls.h\n\n\n\t* symtab.c: Include calls.h\n\t(symtab_nonoverwritable_alias_1): Check sanity of the local\n\talias.\n\nFrom-SVN: r212337", "tree": {"sha": "ef51f4e4b972b0a3c0c64d2b10245d76bee936cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ef51f4e4b972b0a3c0c64d2b10245d76bee936cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72732f3ef0f08c0547228a295c1f3a00907d061b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72732f3ef0f08c0547228a295c1f3a00907d061b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72732f3ef0f08c0547228a295c1f3a00907d061b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72732f3ef0f08c0547228a295c1f3a00907d061b/comments", "author": null, "committer": null, "parents": [{"sha": "3ca588d3e21439abfa36302defba9aaae83f9860", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ca588d3e21439abfa36302defba9aaae83f9860", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ca588d3e21439abfa36302defba9aaae83f9860"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "1e06ded53b3d1f534dcf986193d3ec5c57d33e1f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72732f3ef0f08c0547228a295c1f3a00907d061b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72732f3ef0f08c0547228a295c1f3a00907d061b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=72732f3ef0f08c0547228a295c1f3a00907d061b", "patch": "@@ -1,3 +1,9 @@\n+2014-07-07  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* symtab.c: Include calls.h\n+\t(symtab_nonoverwritable_alias_1): Check sanity of the local\n+\talias.\n+\n 2014-07-07  Maciej W. Rozycki  <macro@codesourcery.com>\n \n \t* config/rs6000/rs6000.c (output_vec_const_move): Handle"}, {"sha": "deb317d1fb399f5f169f4c58e9b49f1a2d2ffa0b", "filename": "gcc/symtab.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72732f3ef0f08c0547228a295c1f3a00907d061b/gcc%2Fsymtab.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72732f3ef0f08c0547228a295c1f3a00907d061b/gcc%2Fsymtab.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsymtab.c?ref=72732f3ef0f08c0547228a295c1f3a00907d061b", "patch": "@@ -43,6 +43,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"lto-streamer.h\"\n #include \"output.h\"\n #include \"ipa-utils.h\"\n+#include \"calls.h\"\n \n static const char *ipa_ref_use_name[] = {\"read\",\"write\",\"addr\",\"alias\"};\n \n@@ -1727,6 +1728,19 @@ symtab_nonoverwritable_alias_1 (symtab_node *node, void *data)\n {\n   if (decl_binds_to_current_def_p (node->decl))\n     {\n+      symtab_node *fn = symtab_alias_ultimate_target (node);\n+\n+      /* Ensure that the alias is well formed this may not be the case\n+\t of user defined aliases and currently it is not always the case\n+\t of C++ same body aliases (that is a bug).  */\n+      if (TREE_TYPE (node->decl) != TREE_TYPE (fn->decl)\n+\t  || DECL_CONTEXT (node->decl) != DECL_CONTEXT (fn->decl)\n+\t  || (TREE_CODE (node->decl) == FUNCTION_DECL\n+\t      && flags_from_decl_or_type (node->decl)\n+\t\t != flags_from_decl_or_type (fn->decl))\n+\t  || DECL_ATTRIBUTES (node->decl) != DECL_ATTRIBUTES (fn->decl))\n+\treturn false;\n+\n       *(symtab_node **)data = node;\n       return true;\n     }"}]}