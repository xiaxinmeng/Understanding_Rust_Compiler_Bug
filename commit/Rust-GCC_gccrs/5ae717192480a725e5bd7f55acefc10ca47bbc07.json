{"sha": "5ae717192480a725e5bd7f55acefc10ca47bbc07", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWFlNzE3MTkyNDgwYTcyNWU1YmQ3ZjU1YWNlZmMxMGNhNDdiYmMwNw==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2004-11-09T14:59:49Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-11-09T14:59:49Z"}, "message": "tree-phinodes.c (phi_reverse): New.\n\n\t* tree-phinodes.c (phi_reverse): New.\n\t* tree-cfg.c (tree_make_forwarder_block, tree_duplicate_bb):\n\tUse it.\n\t* tree-flow.h: Add a prototype for phi_reverse.\n\nFrom-SVN: r90344", "tree": {"sha": "8c76c150e9f39fa9475275c99247a8e8042e0b7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c76c150e9f39fa9475275c99247a8e8042e0b7f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ae717192480a725e5bd7f55acefc10ca47bbc07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ae717192480a725e5bd7f55acefc10ca47bbc07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ae717192480a725e5bd7f55acefc10ca47bbc07", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ae717192480a725e5bd7f55acefc10ca47bbc07/comments", "author": null, "committer": null, "parents": [{"sha": "6571838f58d19afb32c2b8e4b03d2855373dd0e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6571838f58d19afb32c2b8e4b03d2855373dd0e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6571838f58d19afb32c2b8e4b03d2855373dd0e5"}], "stats": {"total": 36, "additions": 26, "deletions": 10}, "files": [{"sha": "d9cd2213d10a68d4942419388b0b67d1a2c7c291", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ae717192480a725e5bd7f55acefc10ca47bbc07/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ae717192480a725e5bd7f55acefc10ca47bbc07/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5ae717192480a725e5bd7f55acefc10ca47bbc07", "patch": "@@ -1,3 +1,10 @@\n+2004-11-09  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* tree-phinodes.c (phi_reverse): New.\n+\t* tree-cfg.c (tree_make_forwarder_block, tree_duplicate_bb):\n+\tUse it.\n+\t* tree-flow.h: Add a prototype for phi_reverse.\n+\n 2004-11-09  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* tree-ssa-loop-ivopts.c: Fix a comment typo."}, {"sha": "8da78c8ff0d92ae0374fea49b38d9a58b0f94ea5", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 3, "deletions": 10, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ae717192480a725e5bd7f55acefc10ca47bbc07/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ae717192480a725e5bd7f55acefc10ca47bbc07/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=5ae717192480a725e5bd7f55acefc10ca47bbc07", "patch": "@@ -3655,7 +3655,7 @@ tree_make_forwarder_block (edge fallthru)\n   edge e;\n   edge_iterator ei;\n   basic_block dummy, bb;\n-  tree phi, new_phi, var, prev, next;\n+  tree phi, new_phi, var;\n \n   dummy = fallthru->src;\n   bb = fallthru->dest;\n@@ -3675,14 +3675,7 @@ tree_make_forwarder_block (edge fallthru)\n     }\n \n   /* Ensure that the PHI node chain is in the same order.  */\n-  prev = NULL;\n-  for (phi = phi_nodes (bb); phi; phi = next)\n-    {\n-      next = PHI_CHAIN (phi);\n-      PHI_CHAIN (phi) = prev;\n-      prev = phi;\n-    }\n-  set_phi_nodes (bb, prev);\n+  set_phi_nodes (bb, phi_reverse (phi_nodes (bb)));\n \n   /* Add the arguments we have stored on edges.  */\n   FOR_EACH_EDGE (e, ei, bb->preds)\n@@ -4281,7 +4274,7 @@ tree_duplicate_bb (basic_block bb)\n       mark_for_rewrite (PHI_RESULT (phi));\n       create_phi_node (PHI_RESULT (phi), new_bb);\n     }\n-  set_phi_nodes (new_bb, nreverse (phi_nodes (new_bb)));\n+  set_phi_nodes (new_bb, phi_reverse (phi_nodes (new_bb)));\n \n   bsi_tgt = bsi_start (new_bb);\n   for (bsi = bsi_start (bb); !bsi_end_p (bsi); bsi_next (&bsi))"}, {"sha": "354f02c0024712ae16950c8213b4e680ee67703f", "filename": "gcc/tree-flow.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ae717192480a725e5bd7f55acefc10ca47bbc07/gcc%2Ftree-flow.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ae717192480a725e5bd7f55acefc10ca47bbc07/gcc%2Ftree-flow.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-flow.h?ref=5ae717192480a725e5bd7f55acefc10ca47bbc07", "patch": "@@ -516,6 +516,7 @@ extern void remove_phi_arg (tree, basic_block);\n extern void remove_phi_arg_num (tree, int);\n extern void remove_phi_node (tree, tree, basic_block);\n extern void remove_all_phi_nodes_for (bitmap);\n+extern tree phi_reverse (tree);\n extern void dump_dfa_stats (FILE *);\n extern void debug_dfa_stats (void);\n extern void debug_referenced_vars (void);"}, {"sha": "a38a57273be2f4801a7373d081f37ae57195b873", "filename": "gcc/tree-phinodes.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ae717192480a725e5bd7f55acefc10ca47bbc07/gcc%2Ftree-phinodes.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ae717192480a725e5bd7f55acefc10ca47bbc07/gcc%2Ftree-phinodes.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-phinodes.c?ref=5ae717192480a725e5bd7f55acefc10ca47bbc07", "patch": "@@ -491,6 +491,21 @@ remove_all_phi_nodes_for (bitmap vars)\n     }\n }\n \n+/* Reverse the order of PHI nodes in the chain PHI.\n+   Return the new head of the chain (old last PHI node).  */\n+\n+tree\n+phi_reverse (tree phi)\n+{\n+  tree prev = NULL_TREE, next;\n+  for (; phi; phi = next)\n+    {\n+      next = PHI_CHAIN (phi);\n+      PHI_CHAIN (phi) = prev;\n+      prev = phi;\n+    }\n+  return prev;\n+}\n \n #include \"gt-tree-phinodes.h\"\n "}]}