{"sha": "79ddec0279508bee9a68b640a9633d874b06ac4a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzlkZGVjMDI3OTUwOGJlZTlhNjhiNjQwYTk2MzNkODc0YjA2YWM0YQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-10-17T22:17:26Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-10-17T22:17:26Z"}, "message": "gimple-low.c (lower_stmt): If the call is noreturn, remove a subsequent GOTO or RETURN statement.\n\n\t* gimple-low.c (lower_stmt) <GIMPLE_CALL>: If the call is noreturn,\n\tremove a subsequent GOTO or RETURN statement.\n\nFrom-SVN: r152959", "tree": {"sha": "81ce085b12daef47f014b038c52ac8126ff9fa54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81ce085b12daef47f014b038c52ac8126ff9fa54"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/79ddec0279508bee9a68b640a9633d874b06ac4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79ddec0279508bee9a68b640a9633d874b06ac4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79ddec0279508bee9a68b640a9633d874b06ac4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79ddec0279508bee9a68b640a9633d874b06ac4a/comments", "author": null, "committer": null, "parents": [{"sha": "7e90b362e1d82c1e87c4ca010195cab28ddb5f57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e90b362e1d82c1e87c4ca010195cab28ddb5f57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e90b362e1d82c1e87c4ca010195cab28ddb5f57"}], "stats": {"total": 49, "additions": 47, "deletions": 2}, "files": [{"sha": "c05cc6d82c7eaffad111521d712bf11b017c2d51", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79ddec0279508bee9a68b640a9633d874b06ac4a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79ddec0279508bee9a68b640a9633d874b06ac4a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=79ddec0279508bee9a68b640a9633d874b06ac4a", "patch": "@@ -1,10 +1,15 @@\n+2009-10-17  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gimple-low.c (lower_stmt) <GIMPLE_CALL>: If the call is noreturn,\n+\tremove a subsequent GOTO or RETURN statement.\n+\n 2009-10-17  Andy Hutchinson  <hutchinsonandy@aim.com>\n \n \t* config/avr.md (*movqi): Add zero as equally preferable constraint\n \tas general register.\n-\t(*movhi): Ditto. \n+\t(*movhi): Ditto.\n \n-\t2009-10-17  Eric Botcazou  <ebotcazou@adacore.com>\n+2009-10-17  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* print-tree.c (print_node): Fix string for DECL_STRUCT_FUNCTION.\n "}, {"sha": "39c735197a7cf30098102ee8f91486fe4dd8e464", "filename": "gcc/gimple-low.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79ddec0279508bee9a68b640a9633d874b06ac4a/gcc%2Fgimple-low.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79ddec0279508bee9a68b640a9633d874b06ac4a/gcc%2Fgimple-low.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-low.c?ref=79ddec0279508bee9a68b640a9633d874b06ac4a", "patch": "@@ -387,6 +387,19 @@ lower_stmt (gimple_stmt_iterator *gsi, struct lower_data *data)\n \t    lower_builtin_setjmp (gsi);\n \t    return;\n \t  }\n+\n+\t/* After a noreturn call, remove a subsequent GOTO or RETURN that might\n+\t   have been mechanically added; this will prevent the EH lowering pass\n+\t   from adding useless edges and thus complicating the initial CFG.  */\n+\tif (decl && (flags_from_decl_or_type (decl) & ECF_NORETURN))\n+\t  {\n+\t    gsi_next (gsi);\n+\t    if (!gsi_end_p (*gsi)\n+\t\t&& (gimple_code (gsi_stmt (*gsi)) == GIMPLE_GOTO\n+\t\t    || gimple_code (gsi_stmt (*gsi)) == GIMPLE_RETURN))\n+\t      gsi_remove (gsi, false);\n+\t    return;\n+\t  }\n       }\n       break;\n "}, {"sha": "62f8075d157b8b3f1ed81b8046879d1f293d8db7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79ddec0279508bee9a68b640a9633d874b06ac4a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79ddec0279508bee9a68b640a9633d874b06ac4a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=79ddec0279508bee9a68b640a9633d874b06ac4a", "patch": "@@ -1,3 +1,7 @@\n+2009-10-17  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/noreturn1.ad[sb]: New test.\n+\n 2009-10-17  Janus Weil  <janus@gcc.gnu.org>\n \t    Paul Thomas  <pault@gcc.gnu.org>\n "}, {"sha": "83eafe7f36478cfb4af67dd25f684d6cab466339", "filename": "gcc/testsuite/gnat.dg/noreturn1.adb", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79ddec0279508bee9a68b640a9633d874b06ac4a/gcc%2Ftestsuite%2Fgnat.dg%2Fnoreturn1.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79ddec0279508bee9a68b640a9633d874b06ac4a/gcc%2Ftestsuite%2Fgnat.dg%2Fnoreturn1.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fnoreturn1.adb?ref=79ddec0279508bee9a68b640a9633d874b06ac4a", "patch": "@@ -0,0 +1,15 @@\n+-- { dg-compile }\n+\n+package body Noreturn1 is\n+\n+   procedure Error (E : in Exception_Occurrence) is\n+      Occurrence_Message : constant String := Exception_Message (E);\n+   begin\n+      if Occurrence_Message = \"$\" then\n+         raise Program_Error;\n+      else\n+         raise Constraint_Error;\n+      end if;\n+   end;\n+\n+end Noreturn1;"}, {"sha": "c63e43999077d05a1df12ec3c66b72a4ec5b7d5e", "filename": "gcc/testsuite/gnat.dg/noreturn1.ads", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79ddec0279508bee9a68b640a9633d874b06ac4a/gcc%2Ftestsuite%2Fgnat.dg%2Fnoreturn1.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79ddec0279508bee9a68b640a9633d874b06ac4a/gcc%2Ftestsuite%2Fgnat.dg%2Fnoreturn1.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fnoreturn1.ads?ref=79ddec0279508bee9a68b640a9633d874b06ac4a", "patch": "@@ -0,0 +1,8 @@\n+with Ada.Exceptions; use Ada.Exceptions;\n+\n+package Noreturn1 is\n+\n+   procedure Error (E : in Exception_Occurrence);\n+   pragma No_Return (Error);\n+\n+end Noreturn1;"}]}