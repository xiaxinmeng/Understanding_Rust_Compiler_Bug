{"sha": "b310a51d35b01c9ce4e617e357ade93d87cd1c90", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjMxMGE1MWQzNWIwMWM5Y2U0ZTYxN2UzNTdhZGU5M2Q4N2NkMWM5MA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-03-16T21:11:02Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-03-16T21:11:02Z"}, "message": "(FUNCTION_PROLOGUE, HAVE_probe, gen_probe): Deleted.\n\n(ENCODE_SECTION_INFO, VALID_MACHINE_DECL_ATTRIBUTE): New macro.\n\nFrom-SVN: r9190", "tree": {"sha": "13e5d1ec505ca76fd30db1565f071f02eead01e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/13e5d1ec505ca76fd30db1565f071f02eead01e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b310a51d35b01c9ce4e617e357ade93d87cd1c90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b310a51d35b01c9ce4e617e357ade93d87cd1c90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b310a51d35b01c9ce4e617e357ade93d87cd1c90", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b310a51d35b01c9ce4e617e357ade93d87cd1c90/comments", "author": null, "committer": null, "parents": [{"sha": "8af24e2633f70c6e4b4d5a201fe61b7b305d62f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8af24e2633f70c6e4b4d5a201fe61b7b305d62f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8af24e2633f70c6e4b4d5a201fe61b7b305d62f1"}], "stats": {"total": 50, "additions": 43, "deletions": 7}, "files": [{"sha": "636ccb999bdabc5e7298e2bbcf14b9dd69c320c0", "filename": "gcc/config/i386/win-nt.h", "status": "modified", "additions": 43, "deletions": 7, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b310a51d35b01c9ce4e617e357ade93d87cd1c90/gcc%2Fconfig%2Fi386%2Fwin-nt.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b310a51d35b01c9ce4e617e357ade93d87cd1c90/gcc%2Fconfig%2Fi386%2Fwin-nt.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwin-nt.h?ref=b310a51d35b01c9ce4e617e357ade93d87cd1c90", "patch": "@@ -65,11 +65,6 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA. */\n          0 \\\n   )\n \n-#undef FUNCTION_PROLOGUE\n-#define FUNCTION_PROLOGUE(FILE,SIZE) \\\n-  winnt_function_prologue (FILE, SIZE)\n-\n-\n #ifdef CPP_PREDEFINES\n #undef CPP_PREDEFINES\n #endif\n@@ -132,8 +127,49 @@ dtor_section ()\t\t\t\t\t\t\t\\\n     fprintf (FILE, \"\\n\");\t\t\t\\\n   } while (0)\n \n-#define HAVE_probe 1\n-#define gen_probe() gen_rtx(ASM_INPUT, VOIDmode, \"call __stkchk\\n\")\n+/* Define this macro if references to a symbol must be treated\n+   differently depending on something about the variable or\n+   function named by the symbol (such as what section it is in).\n+\n+   On i386, if using PIC, mark a SYMBOL_REF for a non-global symbol\n+   so that we may access it directly in the GOT.  */\n+\n+   On i386 running Windows NT, modify the assembler name with a suffix \n+   consisting of an atsign (@) followed by string of digits that represents\n+   the number of bytes of arguments passed to the function, if it has the \n+   attribute STDCALL. */\n+\n+#ifdef ENCODE_SECTION_INFO\n+#undef ENCODE_SECTION_INFO\n+#define ENCODE_SECTION_INFO(DECL) \t\t\t\t\t\\\n+do\t\t\t\t\t\t\t\t\t\\\n+  {\t\t\t\t\t\t\t\t\t\\\n+    if (flag_pic)\t\t\t\t\t\t\t\\\n+      {\t\t\t\t\t\t\t\t\t\\\n+\trtx rtl = (TREE_CODE_CLASS (TREE_CODE (DECL)) != 'd'\t\t\\\n+\t\t   ? TREE_CST_RTL (DECL) : DECL_RTL (DECL));\t\t\\\n+\tSYMBOL_REF_FLAG (XEXP (rtl, 0))\t\t\t\t\t\\\n+\t  = (TREE_CODE_CLASS (TREE_CODE (DECL)) != 'd'\t\t\t\\\n+\t     || ! TREE_PUBLIC (DECL));\t\t\t\t\t\\\n+      }\t\t\t\t\t\t\t\t\t\\\n+    if (TREE_CODE (DECL) == FUNCTION_DECL) \t\t\t\t\\\n+      if (chain_member_value (get_identifier (\"stdcall\"), \t\t\\\n+                             DECL_MACHINE_ATTRIBUTES (DECL))) \t\t\\\n+        XEXP (DECL_RTL (DECL), 0) = \t\t\t\t\t\\\n+          gen_rtx (SYMBOL_REF, Pmode, gen_stdcall_suffix (DECL)); \t\\\n+  }\t\t\t\t\t\t\t\t\t\\\n+while (0)\n+#endif\n+\n+/* Value is 1 if the declaration has either of the attributes: CDECL or\n+   STDCALL and 0 otherwise */\n+\n+#define VALID_MACHINE_DECL_ATTRIBUTE(decl,attr,name) \\\n+  ((TREE_CODE(decl) == FUNCTION_DECL) \\\n+   || (TREE_CODE(decl) == FIELD_DECL) \\\n+   || (TREE_CODE(decl) == TYPE_DECL)) \\\n+  && ((get_identifier(\"stdcall\") == name) \\\n+   || (get_identifier(\"cdecl\") == name))\n \n #include \"winnt/winnt.h\"\n "}]}