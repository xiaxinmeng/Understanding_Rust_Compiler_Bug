{"sha": "a10d70babdbb3018f3ad9824b2158779844a7999", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTEwZDcwYmFiZGJiMzAxOGYzYWQ5ODI0YjIxNTg3Nzk4NDRhNzk5OQ==", "commit": {"author": {"name": "Pat Haugen", "email": "pthaugen@us.ibm.com", "date": "2005-03-25T20:08:30Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2005-03-25T20:08:30Z"}, "message": "re PR tree-optimization/20470 (Branching sequence generated for ABS(x-y))\n\n2005-03-25  Pat Haugen  <pthaugen@us.ibm.com>\n\n        PR tree-optimization/20470\n        * fold-const.c (fold_cond_expr_with_comparison): Recognize/fold\n        ABS(x-y).\n\nFrom-SVN: r97062", "tree": {"sha": "8bfacbc21662a474c461c0e46f944418c5db96b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8bfacbc21662a474c461c0e46f944418c5db96b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a10d70babdbb3018f3ad9824b2158779844a7999", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a10d70babdbb3018f3ad9824b2158779844a7999", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a10d70babdbb3018f3ad9824b2158779844a7999", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a10d70babdbb3018f3ad9824b2158779844a7999/comments", "author": null, "committer": null, "parents": [{"sha": "d5bdce497f4c22d109e3f5f213c575d2c6001785", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5bdce497f4c22d109e3f5f213c575d2c6001785", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5bdce497f4c22d109e3f5f213c575d2c6001785"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "71e4822bf089a54852554ca2cfafd889783c7f97", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a10d70babdbb3018f3ad9824b2158779844a7999/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a10d70babdbb3018f3ad9824b2158779844a7999/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a10d70babdbb3018f3ad9824b2158779844a7999", "patch": "@@ -1,3 +1,9 @@\n+2005-03-25  Pat Haugen  <pthaugen@us.ibm.com>\n+\n+\tPR tree-optimization/20470\n+\t* fold-const.c (fold_cond_expr_with_comparison): Recognize/fold\n+\tABS(x-y).\n+\n 2005-03-25  Mike Stump  <mrs@apple.com>\n \n \t* config/darwin.h (ASM_OUTPUT_ALIGNED_DECL_LOCAL): Don't allow 0"}, {"sha": "4ac921b3a55b4353247470ae25fc5b4e4c92285a", "filename": "gcc/fold-const.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a10d70babdbb3018f3ad9824b2158779844a7999/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a10d70babdbb3018f3ad9824b2158779844a7999/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=a10d70babdbb3018f3ad9824b2158779844a7999", "patch": "@@ -4187,8 +4187,16 @@ fold_cond_expr_with_comparison (tree type, tree arg0, tree arg1, tree arg2)\n   if ((FLOAT_TYPE_P (TREE_TYPE (arg01))\n        ? real_zerop (arg01)\n        : integer_zerop (arg01))\n-      && TREE_CODE (arg2) == NEGATE_EXPR\n-      && operand_equal_p (TREE_OPERAND (arg2, 0), arg1, 0))\n+      && ((TREE_CODE (arg2) == NEGATE_EXPR\n+\t   && operand_equal_p (TREE_OPERAND (arg2, 0), arg1, 0))\n+\t     /* In the case that A is of the form X-Y, '-A' (arg2) may\n+\t        have already been folded to Y-X, check for that. */\n+\t  || (TREE_CODE (arg1) == MINUS_EXPR\n+\t      && TREE_CODE (arg2) == MINUS_EXPR\n+\t      && operand_equal_p (TREE_OPERAND (arg1, 0),\n+\t\t\t\t  TREE_OPERAND (arg2, 1), 0)\n+\t      && operand_equal_p (TREE_OPERAND (arg1, 1),\n+\t\t\t\t  TREE_OPERAND (arg2, 0), 0))))\n     switch (comp_code)\n       {\n       case EQ_EXPR:"}]}