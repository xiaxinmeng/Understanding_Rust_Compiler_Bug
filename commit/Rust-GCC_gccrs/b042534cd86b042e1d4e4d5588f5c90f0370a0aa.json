{"sha": "b042534cd86b042e1d4e4d5588f5c90f0370a0aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjA0MjUzNGNkODZiMDQyZTFkNGU0ZDU1ODhmNWM5MGYwMzcwYTBhYQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2010-05-27T18:39:56Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2010-05-27T18:39:56Z"}, "message": "print-tree.c (debug_vec_tree): New fn.\n\n\t* print-tree.c (debug_vec_tree): New fn.\n\t(print_vec_tree): New fn.\n\t* tree.h: Declare them.\n\t* gdbinit.in (ptv): New command.\n\n\t* print-tree.c (print_node) [TREE_VEC]: Print elements normally.\n\n\t* gdbinit.in (pdd): New command.\n\nFrom-SVN: r159941", "tree": {"sha": "68bf32ee537f2e31766ddc4d8d716ea60c1f5c50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68bf32ee537f2e31766ddc4d8d716ea60c1f5c50"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b042534cd86b042e1d4e4d5588f5c90f0370a0aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b042534cd86b042e1d4e4d5588f5c90f0370a0aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b042534cd86b042e1d4e4d5588f5c90f0370a0aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b042534cd86b042e1d4e4d5588f5c90f0370a0aa/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fb9c3174c9771bd3dd658dd25205f1d1486778f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb9c3174c9771bd3dd658dd25205f1d1486778f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb9c3174c9771bd3dd658dd25205f1d1486778f7"}], "stats": {"total": 70, "additions": 68, "deletions": 2}, "files": [{"sha": "c2306ea5c08bc813242b3b3bafbd998ddcd4a656", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b042534cd86b042e1d4e4d5588f5c90f0370a0aa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b042534cd86b042e1d4e4d5588f5c90f0370a0aa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b042534cd86b042e1d4e4d5588f5c90f0370a0aa", "patch": "@@ -1,3 +1,14 @@\n+2010-05-27  Jason Merrill  <jason@redhat.com>\n+\n+\t* print-tree.c (debug_vec_tree): New fn.\n+\t(print_vec_tree): New fn.\n+\t* tree.h: Declare them.\n+\t* gdbinit.in (pvt): New command.\n+\n+\t* print-tree.c (print_node) [TREE_VEC]: Print elements normally.\n+\n+\t* gdbinit.in (pdd): New command.\n+\n 2010-05-27  Jan Hubicka  <jh@suse.cz>\n \n \t* ipa-inline.c (cgraph_estimate_size_after_inlining): Make inline."}, {"sha": "e2375b280c8db6637d2b60efa05e41e5c65deffb", "filename": "gcc/gdbinit.in", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b042534cd86b042e1d4e4d5588f5c90f0370a0aa/gcc%2Fgdbinit.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b042534cd86b042e1d4e4d5588f5c90f0370a0aa/gcc%2Fgdbinit.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgdbinit.in?ref=b042534cd86b042e1d4e4d5588f5c90f0370a0aa", "patch": "@@ -122,6 +122,22 @@ document ptn\n Print the name of the type-node that is $.\n end\n \n+define pvt\n+set debug_vec_tree ($)\n+end\n+\n+document pvt\n+Print the VEC(tree) that is in $.\n+end\n+\n+define pdd\n+set debug_dwarf_die ($)\n+end\n+\n+document pdd\n+Print the dw_die_ref that is in $.\n+end\n+\n define prc\n output (enum rtx_code) $.code\n echo \\ ("}, {"sha": "0c2318851be0e9fdf03f06782c0b460d02d84292", "filename": "gcc/print-tree.c", "status": "modified", "additions": 39, "deletions": 2, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b042534cd86b042e1d4e4d5588f5c90f0370a0aa/gcc%2Fprint-tree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b042534cd86b042e1d4e4d5588f5c90f0370a0aa/gcc%2Fprint-tree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-tree.c?ref=b042534cd86b042e1d4e4d5588f5c90f0370a0aa", "patch": "@@ -60,6 +60,20 @@ debug_tree (tree node)\n   putc ('\\n', stderr);\n }\n \n+/* Print the vector of trees VEC on standard error, for debugging.\n+   Most nodes referred to by this one are printed recursively\n+   down to a depth of six.  */\n+\n+void\n+debug_vec_tree (VEC(tree,gc) *vec)\n+{\n+  table = XCNEWVEC (struct bucket *, HASH_SIZE);\n+  print_vec_tree (stderr, \"\", vec, 0);\n+  free (table);\n+  table = 0;\n+  putc ('\\n', stderr);\n+}\n+\n /* Print PREFIX and ADDR to FILE.  */\n void\n dump_addr (FILE *file, const char *prefix, const void *addr)\n@@ -860,8 +874,7 @@ print_node (FILE *file, const char *prefix, tree node, int indent)\n \t      {\n \t\tchar temp[10];\n \t\tsprintf (temp, \"elt %d\", i);\n-\t\tindent_to (file, indent + 4);\n-\t\tprint_node_brief (file, temp, TREE_VEC_ELT (node, i), 0);\n+\t\tprint_node (file, temp, TREE_VEC_ELT (node, i), indent + 4);\n \t      }\n \t  break;\n \n@@ -979,3 +992,27 @@ print_node (FILE *file, const char *prefix, tree node, int indent)\n \n   fprintf (file, \">\");\n }\n+\n+/* Print the tree vector VEC in full on file FILE, preceded by PREFIX,\n+   starting in column INDENT.  */\n+\n+void\n+print_vec_tree (FILE *file, const char *prefix, VEC(tree,gc) *vec, int indent)\n+{\n+  tree elt;\n+  unsigned ix;\n+\n+  /* Indent to the specified column, since this is the long form.  */\n+  indent_to (file, indent);\n+\n+  /* Print the slot this node is in, and its code, and address.  */\n+  fprintf (file, \"%s <VEC\", prefix);\n+  dump_addr (file, \" \", vec);\n+\n+  for (ix = 0; VEC_iterate (tree, vec, ix, elt); ++ix)\n+    {\n+      char temp[10];\n+      sprintf (temp, \"elt %d\", ix);\n+      print_node (file, temp, elt, indent + 4);\n+    }\n+}"}, {"sha": "5acadb499cb2a3d345e921c340c214b00ae56177", "filename": "gcc/tree.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b042534cd86b042e1d4e4d5588f5c90f0370a0aa/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b042534cd86b042e1d4e4d5588f5c90f0370a0aa/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=b042534cd86b042e1d4e4d5588f5c90f0370a0aa", "patch": "@@ -5120,9 +5120,11 @@ extern void print_rtl (FILE *, const_rtx);\n \n /* In print-tree.c */\n extern void debug_tree (tree);\n+extern void debug_vec_tree (VEC(tree,gc) *);\n #ifdef BUFSIZ\n extern void dump_addr (FILE*, const char *, const void *);\n extern void print_node (FILE *, const char *, tree, int);\n+extern void print_vec_tree (FILE *, const char *, VEC(tree,gc) *, int);\n extern void print_node_brief (FILE *, const char *, const_tree, int);\n extern void indent_to (FILE *, int);\n #endif"}]}