{"sha": "86710a8bf2b766e47127566f9e5839997f8ea531", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODY3MTBhOGJmMmI3NjZlNDcxMjc1NjZmOWU1ODM5OTk3ZjhlYTUzMQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-11-04T18:43:00Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-11-04T18:43:00Z"}, "message": "re PR target/46234 (ICE in expand_expr_real_2 for va-arg-XXX tescases)\n\n\tPR target/46234\n\t* config/rs6000/rs6000.c (rs6000_va_start): Use build_simple_mem_ref\n\tinstead of build_va_arg_indirect_ref.\n\t* config/spu/spu.c (spu_va_start): Likewise.\n\t* config/s390/s390.c (s390_va_start): Likewise.\n\nFrom-SVN: r166323", "tree": {"sha": "e3deb063a356674c7c69f37516f5bae272e942a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e3deb063a356674c7c69f37516f5bae272e942a4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/86710a8bf2b766e47127566f9e5839997f8ea531", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86710a8bf2b766e47127566f9e5839997f8ea531", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86710a8bf2b766e47127566f9e5839997f8ea531", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86710a8bf2b766e47127566f9e5839997f8ea531/comments", "author": null, "committer": null, "parents": [{"sha": "4aa8fe39a16b0e8463aa953a0e0983517fc2b90f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4aa8fe39a16b0e8463aa953a0e0983517fc2b90f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4aa8fe39a16b0e8463aa953a0e0983517fc2b90f"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "7351294329bb4752cd2dd5605a48e6ce8a83e7aa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86710a8bf2b766e47127566f9e5839997f8ea531/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86710a8bf2b766e47127566f9e5839997f8ea531/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=86710a8bf2b766e47127566f9e5839997f8ea531", "patch": "@@ -1,7 +1,15 @@\n+2010-11-04  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/46234\n+\t* config/rs6000/rs6000.c (rs6000_va_start): Use build_simple_mem_ref\n+\tinstead of build_va_arg_indirect_ref.\n+\t* config/spu/spu.c (spu_va_start): Likewise.\n+\t* config/s390/s390.c (s390_va_start): Likewise.\n+\n 2010-11-03  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR middle-end/46292\n-\t* lower-suberg.c (simplify_subreg_concatn): For VOIDmode elements,\n+\t* lower-subreg.c (simplify_subreg_concatn): For VOIDmode elements,\n \tif the innermode is not vector mode, determine the mode of a subreg\n \tby using mode_for_size of inner_size.\n "}, {"sha": "30146645973b8b9026cc6c1d75b4a99486ba5f52", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86710a8bf2b766e47127566f9e5839997f8ea531/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86710a8bf2b766e47127566f9e5839997f8ea531/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=86710a8bf2b766e47127566f9e5839997f8ea531", "patch": "@@ -9252,7 +9252,7 @@ rs6000_va_start (tree valist, rtx nextarg)\n   f_ovf = DECL_CHAIN (f_res);\n   f_sav = DECL_CHAIN (f_ovf);\n \n-  valist = build_va_arg_indirect_ref (valist);\n+  valist = build_simple_mem_ref (valist);\n   gpr = build3 (COMPONENT_REF, TREE_TYPE (f_gpr), valist, f_gpr, NULL_TREE);\n   fpr = build3 (COMPONENT_REF, TREE_TYPE (f_fpr), unshare_expr (valist),\n \t\tf_fpr, NULL_TREE);"}, {"sha": "105cf6de618b19fc19136eb106ced964cd05bd0d", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86710a8bf2b766e47127566f9e5839997f8ea531/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86710a8bf2b766e47127566f9e5839997f8ea531/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=86710a8bf2b766e47127566f9e5839997f8ea531", "patch": "@@ -8719,7 +8719,7 @@ s390_va_start (tree valist, rtx nextarg ATTRIBUTE_UNUSED)\n   f_ovf = DECL_CHAIN (f_fpr);\n   f_sav = DECL_CHAIN (f_ovf);\n \n-  valist = build_va_arg_indirect_ref (valist);\n+  valist = build_simple_mem_ref (valist);\n   gpr = build3 (COMPONENT_REF, TREE_TYPE (f_gpr), valist, f_gpr, NULL_TREE);\n   fpr = build3 (COMPONENT_REF, TREE_TYPE (f_fpr), valist, f_fpr, NULL_TREE);\n   ovf = build3 (COMPONENT_REF, TREE_TYPE (f_ovf), valist, f_ovf, NULL_TREE);"}, {"sha": "a9a5d40f26b0710c7e2df3324b0cd1ece029916e", "filename": "gcc/config/spu/spu.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86710a8bf2b766e47127566f9e5839997f8ea531/gcc%2Fconfig%2Fspu%2Fspu.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86710a8bf2b766e47127566f9e5839997f8ea531/gcc%2Fconfig%2Fspu%2Fspu.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.c?ref=86710a8bf2b766e47127566f9e5839997f8ea531", "patch": "@@ -4154,7 +4154,7 @@ spu_va_start (tree valist, rtx nextarg)\n   f_args = TYPE_FIELDS (TREE_TYPE (va_list_type_node));\n   f_skip = DECL_CHAIN (f_args);\n \n-  valist = build_va_arg_indirect_ref (valist);\n+  valist = build_simple_mem_ref (valist);\n   args =\n     build3 (COMPONENT_REF, TREE_TYPE (f_args), valist, f_args, NULL_TREE);\n   skip ="}]}