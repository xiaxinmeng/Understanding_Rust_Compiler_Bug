{"sha": "35241f18b209ba7ed97281f5e24c3359bb86b2b7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzUyNDFmMThiMjA5YmE3ZWQ5NzI4MWY1ZTI0YzMzNTliYjg2YjJiNw==", "commit": {"author": {"name": "Chris Demetriou", "email": "cgd@sibyte.com", "date": "2000-10-25T18:07:29Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-10-25T18:07:29Z"}, "message": "configure.in: Invoke AC_PROG_CPP unconditionally before conditional feature tests.\n\n2000-10-24  Chris Demetriou  <cgd@sibyte.com>\n\n\t* configure.in: Invoke AC_PROG_CPP unconditionally before\n\tconditional feature tests.\n\nFrom-SVN: r37058", "tree": {"sha": "44ed039a6bd1036a0c8dc9255f3737c221669f5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/44ed039a6bd1036a0c8dc9255f3737c221669f5c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/35241f18b209ba7ed97281f5e24c3359bb86b2b7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35241f18b209ba7ed97281f5e24c3359bb86b2b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35241f18b209ba7ed97281f5e24c3359bb86b2b7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35241f18b209ba7ed97281f5e24c3359bb86b2b7/comments", "author": null, "committer": null, "parents": [{"sha": "a697c5f7538a00d29981b4e13967ca7668bfe77c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a697c5f7538a00d29981b4e13967ca7668bfe77c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a697c5f7538a00d29981b4e13967ca7668bfe77c"}], "stats": {"total": 223, "additions": 122, "deletions": 101}, "files": [{"sha": "3d05082cd86a02119329d1cfbddb75b089d70529", "filename": "zlib/ChangeLog.gcj", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35241f18b209ba7ed97281f5e24c3359bb86b2b7/zlib%2FChangeLog.gcj", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35241f18b209ba7ed97281f5e24c3359bb86b2b7/zlib%2FChangeLog.gcj", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2FChangeLog.gcj?ref=35241f18b209ba7ed97281f5e24c3359bb86b2b7", "patch": "@@ -1,3 +1,8 @@\n+2000-10-24  Chris Demetriou  <cgd@sibyte.com>\n+\n+\t* configure.in: Invoke AC_PROG_CPP unconditionally before\n+\tconditional feature tests.\n+\n 2000-10-10  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* configure.in (zlib_basedir): Cope with empty with_target_subdir"}, {"sha": "a453e8845517f5f25d53c5d24bfea9de58402e61", "filename": "zlib/configure", "status": "modified", "additions": 114, "deletions": 101, "changes": 215, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35241f18b209ba7ed97281f5e24c3359bb86b2b7/zlib%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35241f18b209ba7ed97281f5e24c3359bb86b2b7/zlib%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2Fconfigure?ref=35241f18b209ba7ed97281f5e24c3359bb86b2b7", "patch": "@@ -50,6 +50,7 @@ program_suffix=NONE\n program_transform_name=s,x,x,\n silent=\n site=\n+sitefile=\n srcdir=\n target=NONE\n verbose=\n@@ -164,6 +165,7 @@ Configuration:\n   --help                  print this message\n   --no-create             do not create output files\n   --quiet, --silent       do not print \\`checking...' messages\n+  --site-file=FILE        use FILE as the site file\n   --version               print the version of autoconf that created configure\n Directory and file names:\n   --prefix=PREFIX         install architecture-independent files in PREFIX\n@@ -334,6 +336,11 @@ EOF\n   -site=* | --site=* | --sit=*)\n     site=\"$ac_optarg\" ;;\n \n+  -site-file | --site-file | --site-fil | --site-fi | --site-f)\n+    ac_prev=sitefile ;;\n+  -site-file=* | --site-file=* | --site-fil=* | --site-fi=* | --site-f=*)\n+    sitefile=\"$ac_optarg\" ;;\n+\n   -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)\n     ac_prev=srcdir ;;\n   -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)\n@@ -499,12 +506,16 @@ fi\n srcdir=`echo \"${srcdir}\" | sed 's%\\([^/]\\)/*$%\\1%'`\n \n # Prefer explicitly selected file to automatically selected ones.\n-if test -z \"$CONFIG_SITE\"; then\n-  if test \"x$prefix\" != xNONE; then\n-    CONFIG_SITE=\"$prefix/share/config.site $prefix/etc/config.site\"\n-  else\n-    CONFIG_SITE=\"$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site\"\n+if test -z \"$sitefile\"; then\n+  if test -z \"$CONFIG_SITE\"; then\n+    if test \"x$prefix\" != xNONE; then\n+      CONFIG_SITE=\"$prefix/share/config.site $prefix/etc/config.site\"\n+    else\n+      CONFIG_SITE=\"$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site\"\n+    fi\n   fi\n+else\n+  CONFIG_SITE=\"$sitefile\"\n fi\n for ac_site_file in $CONFIG_SITE; do\n   if test -r \"$ac_site_file\"; then\n@@ -590,7 +601,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:594: checking host system type\" >&5\n+echo \"configure:605: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -611,7 +622,7 @@ host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:615: checking target system type\" >&5\n+echo \"configure:626: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -629,7 +640,7 @@ target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:633: checking build system type\" >&5\n+echo \"configure:644: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -663,7 +674,7 @@ test \"$host_alias\" != \"$target_alias\" &&\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:667: checking for a BSD compatible install\" >&5\n+echo \"configure:678: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -716,7 +727,7 @@ test -z \"$INSTALL_SCRIPT\" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'\n test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n echo $ac_n \"checking whether build environment is sane\"\"... $ac_c\" 1>&6\n-echo \"configure:720: checking whether build environment is sane\" >&5\n+echo \"configure:731: checking whether build environment is sane\" >&5\n # Just in case\n sleep 1\n echo timestamp > conftestfile\n@@ -773,7 +784,7 @@ test \"$program_suffix\" != NONE &&\n test \"$program_transform_name\" = \"\" && program_transform_name=\"s,x,x,\"\n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:777: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:788: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -819,7 +830,7 @@ EOF\n \n missing_dir=`cd $ac_aux_dir && pwd`\n echo $ac_n \"checking for working aclocal\"\"... $ac_c\" 1>&6\n-echo \"configure:823: checking for working aclocal\" >&5\n+echo \"configure:834: checking for working aclocal\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -832,7 +843,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoconf\"\"... $ac_c\" 1>&6\n-echo \"configure:836: checking for working autoconf\" >&5\n+echo \"configure:847: checking for working autoconf\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -845,7 +856,7 @@ else\n fi\n \n echo $ac_n \"checking for working automake\"\"... $ac_c\" 1>&6\n-echo \"configure:849: checking for working automake\" >&5\n+echo \"configure:860: checking for working automake\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -858,7 +869,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoheader\"\"... $ac_c\" 1>&6\n-echo \"configure:862: checking for working autoheader\" >&5\n+echo \"configure:873: checking for working autoheader\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -871,7 +882,7 @@ else\n fi\n \n echo $ac_n \"checking for working makeinfo\"\"... $ac_c\" 1>&6\n-echo \"configure:875: checking for working makeinfo\" >&5\n+echo \"configure:886: checking for working makeinfo\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -886,7 +897,7 @@ fi\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:890: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:901: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -978,7 +989,7 @@ fi\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:982: checking for $ac_word\" >&5\n+echo \"configure:993: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1008,7 +1019,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1012: checking for $ac_word\" >&5\n+echo \"configure:1023: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1057,7 +1068,7 @@ fi\n fi\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:1061: checking whether we are using GNU C\" >&5\n+echo \"configure:1072: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1066,7 +1077,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1070: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1081: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1081,7 +1092,7 @@ if test $ac_cv_prog_gcc = yes; then\n   ac_save_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\n   echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1085: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:1096: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1117,12 +1128,12 @@ fi\n # the result.\n if false; then\n   echo $ac_n \"checking for Cygwin environment\"\"... $ac_c\" 1>&6\n-echo \"configure:1121: checking for Cygwin environment\" >&5\n+echo \"configure:1132: checking for Cygwin environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_cygwin'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1126 \"configure\"\n+#line 1137 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n@@ -1133,7 +1144,7 @@ int main() {\n return __CYGWIN__;\n ; return 0; }\n EOF\n-if { (eval echo configure:1137: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1148: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_cygwin=yes\n else\n@@ -1150,19 +1161,19 @@ echo \"$ac_t\"\"$ac_cv_cygwin\" 1>&6\n CYGWIN=\n test \"$ac_cv_cygwin\" = yes && CYGWIN=yes\n echo $ac_n \"checking for mingw32 environment\"\"... $ac_c\" 1>&6\n-echo \"configure:1154: checking for mingw32 environment\" >&5\n+echo \"configure:1165: checking for mingw32 environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_mingw32'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1159 \"configure\"\n+#line 1170 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n return __MINGW32__;\n ; return 0; }\n EOF\n-if { (eval echo configure:1166: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1177: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_mingw32=yes\n else\n@@ -1181,7 +1192,7 @@ test \"$ac_cv_mingw32\" = yes && MINGW32=yes\n \n \n echo $ac_n \"checking for executable suffix\"\"... $ac_c\" 1>&6\n-echo \"configure:1185: checking for executable suffix\" >&5\n+echo \"configure:1196: checking for executable suffix\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_exeext'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1191,10 +1202,10 @@ else\n   rm -f conftest*\n   echo 'int main () { return 0; }' > conftest.$ac_ext\n   ac_cv_exeext=\n-  if { (eval echo configure:1195: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n+  if { (eval echo configure:1206: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n     for file in conftest.*; do\n       case $file in\n-      *.c | *.o | *.obj) ;;\n+      *.c | *.o | *.obj | *.ilk | *.pdb) ;;\n       *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;\n       esac\n     done\n@@ -1284,7 +1295,7 @@ fi\n # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1288: checking for $ac_word\" >&5\n+echo \"configure:1299: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1323,7 +1334,7 @@ ac_prog=ld\n if test \"$ac_cv_prog_gcc\" = yes; then\n   # Check if gcc -print-prog-name=ld gives a path.\n   echo $ac_n \"checking for ld used by GCC\"\"... $ac_c\" 1>&6\n-echo \"configure:1327: checking for ld used by GCC\" >&5\n+echo \"configure:1338: checking for ld used by GCC\" >&5\n   ac_prog=`($CC -print-prog-name=ld) 2>&5`\n   case \"$ac_prog\" in\n     # Accept absolute paths.\n@@ -1347,10 +1358,10 @@ echo \"configure:1327: checking for ld used by GCC\" >&5\n   esac\n elif test \"$with_gnu_ld\" = yes; then\n   echo $ac_n \"checking for GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1351: checking for GNU ld\" >&5\n+echo \"configure:1362: checking for GNU ld\" >&5\n else\n   echo $ac_n \"checking for non-GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1354: checking for non-GNU ld\" >&5\n+echo \"configure:1365: checking for non-GNU ld\" >&5\n fi\n if eval \"test \\\"`echo '$''{'ac_cv_path_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1386,7 +1397,7 @@ fi\n test -z \"$LD\" && { echo \"configure: error: no acceptable ld found in \\$PATH\" 1>&2; exit 1; }\n \n echo $ac_n \"checking if the linker ($LD) is GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1390: checking if the linker ($LD) is GNU ld\" >&5\n+echo \"configure:1401: checking if the linker ($LD) is GNU ld\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gnu_ld'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1402,7 +1413,7 @@ echo \"$ac_t\"\"$ac_cv_prog_gnu_ld\" 1>&6\n \n \n echo $ac_n \"checking for BSD-compatible nm\"\"... $ac_c\" 1>&6\n-echo \"configure:1406: checking for BSD-compatible nm\" >&5\n+echo \"configure:1417: checking for BSD-compatible nm\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1440,7 +1451,7 @@ echo \"$ac_t\"\"$NM\" 1>&6\n \n # Check for command to grab the raw symbol name followed by C symbol from nm.\n echo $ac_n \"checking command to parse $NM output\"\"... $ac_c\" 1>&6\n-echo \"configure:1444: checking command to parse $NM output\" >&5\n+echo \"configure:1455: checking command to parse $NM output\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sys_global_symbol_pipe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1503,11 +1514,11 @@ void nm_test_func(){}\n int main(){nm_test_var='a';nm_test_func;return 0;}\n EOF\n \n-  if { (eval echo configure:1507: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  if { (eval echo configure:1518: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n     # Now try to grab the symbols.\n     ac_nlist=conftest.nm\n   \n-    if { (eval echo configure:1511: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n+    if { (eval echo configure:1522: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n \n       # Try sorting and uniquifying the output.\n       if sort \"$ac_nlist\" | uniq > \"$ac_nlist\"T; then\n@@ -1559,7 +1570,7 @@ EOF\n \t  ac_save_CFLAGS=\"$CFLAGS\"\n \t  LIBS=\"conftestm.$ac_objext\"\n \t  CFLAGS=\"$CFLAGS$no_builtin_flag\"\n-\t  if { (eval echo configure:1563: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+\t  if { (eval echo configure:1574: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n \t    ac_pipe_works=yes\n \t  else\n \t    echo \"configure: failed program was:\" >&5\n@@ -1605,7 +1616,7 @@ fi\n echo \"$ac_t\"\"$ac_result\" 1>&6\n \n echo $ac_n \"checking for _ prefix in compiled symbols\"\"... $ac_c\" 1>&6\n-echo \"configure:1609: checking for _ prefix in compiled symbols\" >&5\n+echo \"configure:1620: checking for _ prefix in compiled symbols\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sys_symbol_underscore'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1614,10 +1625,10 @@ cat > conftest.$ac_ext <<EOF\n void nm_test_func(){}\n int main(){nm_test_func;return 0;}\n EOF\n-if { (eval echo configure:1618: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1629: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   # Now try to grab the symbols.\n   ac_nlist=conftest.nm\n-  if { (eval echo configure:1621: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n+  if { (eval echo configure:1632: \\\"$NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist\\\") 1>&5; (eval $NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) 2>&5; } && test -s \"$ac_nlist\"; then\n     # See whether the symbols have a leading underscore.\n     if egrep '^. _nm_test_func' \"$ac_nlist\" >/dev/null; then\n       ac_cv_sys_symbol_underscore=yes\n@@ -1643,7 +1654,7 @@ echo \"$ac_t\"\"$ac_cv_sys_symbol_underscore\" 1>&6\n USE_SYMBOL_UNDERSCORE=${ac_cv_sys_symbol_underscore=no}\n \n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:1647: checking whether ln -s works\" >&5\n+echo \"configure:1658: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1685,8 +1696,8 @@ test \"$ac_cv_prog_gnu_ld\" = yes && libtool_flags=\"$libtool_flags --with-gnu-ld\"\n case \"$host\" in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 1689 \"configure\"' > conftest.$ac_ext\n-  if { (eval echo configure:1690: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  echo '#line 1700 \"configure\"' > conftest.$ac_ext\n+  if { (eval echo configure:1701: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n     case \"`/usr/bin/file conftest.o`\" in\n     *32-bit*)\n       LD=\"${LD-ld} -32\"\n@@ -1707,19 +1718,19 @@ case \"$host\" in\n   SAVE_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\"$CFLAGS -belf\"\n   echo $ac_n \"checking whether the C compiler needs -belf\"\"... $ac_c\" 1>&6\n-echo \"configure:1711: checking whether the C compiler needs -belf\" >&5\n+echo \"configure:1722: checking whether the C compiler needs -belf\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1716 \"configure\"\n+#line 1727 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1723: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1734: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   lt_cv_cc_needs_belf=yes\n else\n@@ -1742,7 +1753,7 @@ echo \"$ac_t\"\"$lt_cv_cc_needs_belf\" 1>&6\n   # Extract the first word of \"${ac_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1746: checking for $ac_word\" >&5\n+echo \"configure:1757: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1774,7 +1785,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1778: checking for $ac_word\" >&5\n+echo \"configure:1789: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1809,7 +1820,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1813: checking for $ac_word\" >&5\n+echo \"configure:1824: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1841,7 +1852,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1845: checking for $ac_word\" >&5\n+echo \"configure:1856: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1979,28 +1990,10 @@ else\n fi\n \n \n-\n-if test -n \"$with_cross_host\"; then\n-   # We are being configured with a cross compiler.  AC_REPLACE_FUNCS\n-   # may not work correctly, because the compiler may not be able to\n-   # link executables.\n-\n-   # We assume newlib.  This lets us hard-code the functions we know\n-   # we'll have.\n-   cat >> confdefs.h <<\\EOF\n-#define HAVE_MEMCPY 1\n-EOF\n-\n-   cat >> confdefs.h <<\\EOF\n-#define HAVE_STRERROR 1\n-EOF\n-\n-\n-   # We ignore --with-system-zlib in this case.\n-   target_all=libzgcj.la\n-else\n-   echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:2004: checking how to run the C preprocessor\" >&5\n+# Find CPP now so that any conditional tests below won't do it and\n+# thereby make the resulting definitions conditional.\n+echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n+echo \"configure:1997: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -2015,13 +2008,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 2019 \"configure\"\n+#line 2012 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2025: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2018: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2032,13 +2025,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2036 \"configure\"\n+#line 2029 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2042: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2035: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2049,13 +2042,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2053 \"configure\"\n+#line 2046 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2059: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2052: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2079,21 +2072,41 @@ else\n fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n-for ac_hdr in unistd.h\n+\n+if test -n \"$with_cross_host\"; then\n+   # We are being configured with a cross compiler.  AC_REPLACE_FUNCS\n+   # may not work correctly, because the compiler may not be able to\n+   # link executables.\n+\n+   # We assume newlib.  This lets us hard-code the functions we know\n+   # we'll have.\n+   cat >> confdefs.h <<\\EOF\n+#define HAVE_MEMCPY 1\n+EOF\n+\n+   cat >> confdefs.h <<\\EOF\n+#define HAVE_STRERROR 1\n+EOF\n+\n+\n+   # We ignore --with-system-zlib in this case.\n+   target_all=libzgcj.la\n+else\n+   for ac_hdr in unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:2087: checking for $ac_hdr\" >&5\n+echo \"configure:2100: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2092 \"configure\"\n+#line 2105 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2097: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2110: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2122,12 +2135,12 @@ done\n for ac_func in getpagesize\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2126: checking for $ac_func\" >&5\n+echo \"configure:2139: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2131 \"configure\"\n+#line 2144 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2150,7 +2163,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2154: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2167: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2175,15 +2188,15 @@ fi\n done\n \n echo $ac_n \"checking for working mmap\"\"... $ac_c\" 1>&6\n-echo \"configure:2179: checking for working mmap\" >&5\n+echo \"configure:2192: checking for working mmap\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_mmap_fixed_mapped=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2187 \"configure\"\n+#line 2200 \"configure\"\n #include \"confdefs.h\"\n \n /* Thanks to Mike Haertel and Jim Avera for this test.\n@@ -2323,7 +2336,7 @@ main()\n }\n \n EOF\n-if { (eval echo configure:2327: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2340: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_mmap_fixed_mapped=yes\n else\n@@ -2348,12 +2361,12 @@ fi\n    for ac_func in memcpy strerror\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2352: checking for $ac_func\" >&5\n+echo \"configure:2365: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2357 \"configure\"\n+#line 2370 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2376,7 +2389,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2380: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2393: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2403,15 +2416,15 @@ done\n \n    if test \"$with_system_zlib\" = yes; then\n       echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n-echo \"configure:2407: checking for deflate in -lz\" >&5\n+echo \"configure:2420: checking for deflate in -lz\" >&5\n ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lz  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 2415 \"configure\"\n+#line 2428 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -2422,7 +2435,7 @@ int main() {\n deflate()\n ; return 0; }\n EOF\n-if { (eval echo configure:2426: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2439: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -2454,17 +2467,17 @@ for ac_hdr in unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:2458: checking for $ac_hdr\" >&5\n+echo \"configure:2471: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2463 \"configure\"\n+#line 2476 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2468: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2481: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*"}, {"sha": "2edccc3b4947b1473e4f057d345d674178bd7a2e", "filename": "zlib/configure.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35241f18b209ba7ed97281f5e24c3359bb86b2b7/zlib%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35241f18b209ba7ed97281f5e24c3359bb86b2b7/zlib%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/zlib%2Fconfigure.in?ref=35241f18b209ba7ed97281f5e24c3359bb86b2b7", "patch": "@@ -62,6 +62,9 @@ else\n fi\n AC_SUBST(COMPPATH)\n \n+# Find CPP now so that any conditional tests below won't do it and\n+# thereby make the resulting definitions conditional.\n+AC_PROG_CPP\n \n if test -n \"$with_cross_host\"; then\n    # We are being configured with a cross compiler.  AC_REPLACE_FUNCS"}]}