{"sha": "c481ae7f87680898692a97c0d7c617c806d21cdb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQ4MWFlN2Y4NzY4MDg5ODY5MmE5N2MwZDdjNjE3YzgwNmQyMWNkYg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2011-11-12T13:19:55Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2011-11-12T13:19:55Z"}, "message": "re PR bootstrap/50822 (Solaris/SPARC bootstrap failure with Sun as: invalid assembler for ios_init.cc)\n\n\n\tPR bootstrap/50822\n\t* cgraphunit.c (output_weakrefs): Output really only weakrefs.\n\nFrom-SVN: r181311", "tree": {"sha": "b8c48adf0bf2382db417e0ef34ed0c7fc94b8c56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b8c48adf0bf2382db417e0ef34ed0c7fc94b8c56"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c481ae7f87680898692a97c0d7c617c806d21cdb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c481ae7f87680898692a97c0d7c617c806d21cdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c481ae7f87680898692a97c0d7c617c806d21cdb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c481ae7f87680898692a97c0d7c617c806d21cdb/comments", "author": null, "committer": null, "parents": [{"sha": "bcf83e0029b35aa624bc63a15454fbdb32844422", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bcf83e0029b35aa624bc63a15454fbdb32844422", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bcf83e0029b35aa624bc63a15454fbdb32844422"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "f64897845c0acd84e939a9145fd5d600ae2ff242", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c481ae7f87680898692a97c0d7c617c806d21cdb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c481ae7f87680898692a97c0d7c617c806d21cdb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c481ae7f87680898692a97c0d7c617c806d21cdb", "patch": "@@ -1,3 +1,8 @@\n+2011-11-12  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR bootstrap/50822\n+\t* cgraphunit.c (output_weakrefs): Output really only weakrefs.\n+\n 2011-11-12  Nathan Sidwell  <nathan@acm.org>\n \n \t* gcov.c (struct name_map): New."}, {"sha": "40bcf8fc9ef964a6f9bd14de7cced2b220a87ff1", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c481ae7f87680898692a97c0d7c617c806d21cdb/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c481ae7f87680898692a97c0d7c617c806d21cdb/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=c481ae7f87680898692a97c0d7c617c806d21cdb", "patch": "@@ -2101,13 +2101,15 @@ output_weakrefs (void)\n   struct varpool_node *vnode;\n   for (node = cgraph_nodes; node; node = node->next)\n     if (node->alias && DECL_EXTERNAL (node->decl)\n-        && !TREE_ASM_WRITTEN (node->decl))\n+        && !TREE_ASM_WRITTEN (node->decl)\n+\t&& lookup_attribute (\"weakref\", DECL_ATTRIBUTES (node->decl)))\n       assemble_alias (node->decl,\n \t\t      node->thunk.alias ? DECL_ASSEMBLER_NAME (node->thunk.alias)\n \t\t      : get_alias_symbol (node->decl));\n   for (vnode = varpool_nodes; vnode; vnode = vnode->next)\n     if (vnode->alias && DECL_EXTERNAL (vnode->decl)\n-        && !TREE_ASM_WRITTEN (vnode->decl))\n+        && !TREE_ASM_WRITTEN (vnode->decl)\n+\t&& lookup_attribute (\"weakref\", DECL_ATTRIBUTES (vnode->decl)))\n       assemble_alias (vnode->decl,\n \t\t      vnode->alias_of ? DECL_ASSEMBLER_NAME (vnode->alias_of)\n \t\t      : get_alias_symbol (vnode->decl));"}]}