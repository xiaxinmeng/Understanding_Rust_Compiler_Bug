{"sha": "06ff274feb26fd569fd167225d29479f5b974c45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDZmZjI3NGZlYjI2ZmQ1NjlmZDE2NzIyNWQyOTQ3OWY1Yjk3NGM0NQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2018-09-24T17:42:45Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2018-09-24T17:42:45Z"}, "message": "re PR c++/85070 (ICE on C++ code: in lazily_declare_fn, at cp/method.c:2409)\n\n/cp\n2018-09-24  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/85070\n\t* method.c (lazily_declare_fn): During error-recovery add_method\n\tmay return false.\n\n/testsuite\n2018-09-24  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/85070\n\t* g++.dg/cpp0x/pr85070.C: New.\n\nFrom-SVN: r264541", "tree": {"sha": "b00ec4a1722b9036f2fcb7b7283cb8dd95bb7f3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b00ec4a1722b9036f2fcb7b7283cb8dd95bb7f3d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/06ff274feb26fd569fd167225d29479f5b974c45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06ff274feb26fd569fd167225d29479f5b974c45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06ff274feb26fd569fd167225d29479f5b974c45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06ff274feb26fd569fd167225d29479f5b974c45/comments", "author": null, "committer": null, "parents": [{"sha": "708c728d4fe7a5e169833729b8c57d08258ce15d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/708c728d4fe7a5e169833729b8c57d08258ce15d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/708c728d4fe7a5e169833729b8c57d08258ce15d"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "6d4e93b3a24bf21b332bfaddd44bfd950aa1cf9a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06ff274feb26fd569fd167225d29479f5b974c45/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06ff274feb26fd569fd167225d29479f5b974c45/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=06ff274feb26fd569fd167225d29479f5b974c45", "patch": "@@ -1,3 +1,9 @@\n+2018-09-24  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/85070\n+\t* method.c (lazily_declare_fn): During error-recovery add_method\n+\tmay return false.\n+\n 2018-09-21  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/87372 - __func__ constexpr evaluation."}, {"sha": "5379b4d3d0944b3a6703b0ed43acefed5c58d53d", "filename": "gcc/cp/method.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06ff274feb26fd569fd167225d29479f5b974c45/gcc%2Fcp%2Fmethod.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06ff274feb26fd569fd167225d29479f5b974c45/gcc%2Fcp%2Fmethod.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmethod.c?ref=06ff274feb26fd569fd167225d29479f5b974c45", "patch": "@@ -2421,7 +2421,7 @@ lazily_declare_fn (special_function_kind sfk, tree type)\n \n   /* Add it to the class  */\n   bool added = add_method (type, fn, false);\n-  gcc_assert (added);\n+  gcc_assert (added || errorcount);\n \n   /* Add it to TYPE_FIELDS.  */\n   if (sfk == sfk_destructor"}, {"sha": "224317927cec944c201ef249ca223260a0937eda", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06ff274feb26fd569fd167225d29479f5b974c45/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06ff274feb26fd569fd167225d29479f5b974c45/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=06ff274feb26fd569fd167225d29479f5b974c45", "patch": "@@ -1,3 +1,8 @@\n+2018-09-24  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/85070\n+\t* g++.dg/cpp0x/pr85070.C: New.\n+\n 2018-09-24  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/82699"}, {"sha": "c1c5b23fd81f06dab8d1078ab835c63eb9a643c3", "filename": "gcc/testsuite/g++.dg/cpp0x/pr85070.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06ff274feb26fd569fd167225d29479f5b974c45/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr85070.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06ff274feb26fd569fd167225d29479f5b974c45/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr85070.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr85070.C?ref=06ff274feb26fd569fd167225d29479f5b974c45", "patch": "@@ -0,0 +1,13 @@\n+// { dg-do compile { target c++11 } }\n+\n+struct A;\n+\n+struct B\n+{\n+  constexpr A & operator= (const A &);  // { dg-warning \"used\" \"\" { target c++14_only } }\n+};\n+\n+struct A : B  // { dg-error \"cannot be overloaded\" \"\" { target c++14_only } }\n+{\n+  using B::operator=;\n+} a { a = a };"}]}