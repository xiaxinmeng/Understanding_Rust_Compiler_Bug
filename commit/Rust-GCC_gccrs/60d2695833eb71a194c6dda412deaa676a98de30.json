{"sha": "60d2695833eb71a194c6dda412deaa676a98de30", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjBkMjY5NTgzM2ViNzFhMTk0YzZkZGE0MTJkZWFhNjc2YTk4ZGUzMA==", "commit": {"author": {"name": "Paolo Bonzini", "email": "bonzini@gnu.org", "date": "2008-03-27T09:46:19Z"}, "committer": {"name": "Paolo Bonzini", "email": "bonzini@gcc.gnu.org", "date": "2008-03-27T09:46:19Z"}, "message": "extensions.m4: New.\n\nconfig:\n2008-03-27  Paolo Bonzini  <bonzini@gnu.org>\n\n\t* extensions.m4: New.\n\ngcc:\n2008-03-27  Paolo Bonzini  <bonzini@gnu.org>\n\n\t* configure.ac: Replace custom __GNU_SOURCE test with\n\tAC_USE_SYSTEM_EXTENSIONS.  Move it earlier.\n\t* aclocal.m4: Regenerate.\n\t* configure: Regenerate.\n\t* config.in: Regenerate.\n\nFrom-SVN: r133635", "tree": {"sha": "734204d9b6817a2ec9a938bd0eb3536db216b649", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/734204d9b6817a2ec9a938bd0eb3536db216b649"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/60d2695833eb71a194c6dda412deaa676a98de30", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60d2695833eb71a194c6dda412deaa676a98de30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60d2695833eb71a194c6dda412deaa676a98de30", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60d2695833eb71a194c6dda412deaa676a98de30/comments", "author": {"login": "bonzini", "id": 42082, "node_id": "MDQ6VXNlcjQyMDgy", "avatar_url": "https://avatars.githubusercontent.com/u/42082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bonzini", "html_url": "https://github.com/bonzini", "followers_url": "https://api.github.com/users/bonzini/followers", "following_url": "https://api.github.com/users/bonzini/following{/other_user}", "gists_url": "https://api.github.com/users/bonzini/gists{/gist_id}", "starred_url": "https://api.github.com/users/bonzini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bonzini/subscriptions", "organizations_url": "https://api.github.com/users/bonzini/orgs", "repos_url": "https://api.github.com/users/bonzini/repos", "events_url": "https://api.github.com/users/bonzini/events{/privacy}", "received_events_url": "https://api.github.com/users/bonzini/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "639223bd89bc69c1e363cfc569e9903d2a76ed4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/639223bd89bc69c1e363cfc569e9903d2a76ed4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/639223bd89bc69c1e363cfc569e9903d2a76ed4f"}], "stats": {"total": 984, "additions": 753, "deletions": 231}, "files": [{"sha": "9152d8acdab997a041c5e628d583d5797a27a29a", "filename": "config/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60d2695833eb71a194c6dda412deaa676a98de30/config%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60d2695833eb71a194c6dda412deaa676a98de30/config%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2FChangeLog?ref=60d2695833eb71a194c6dda412deaa676a98de30", "patch": "@@ -1,3 +1,7 @@\n+2008-03-27  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\t* extensions.m4: New.\n+\n 2008-03-27  Paolo Bonzini  <bonzini@gnu.org>\n \n \t* mh-armpic: Remove."}, {"sha": "8ae4a675e2bfcfd11fca292f31a74f901877fdec", "filename": "config/extensions.m4", "status": "added", "additions": 76, "deletions": 0, "changes": 76, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60d2695833eb71a194c6dda412deaa676a98de30/config%2Fextensions.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60d2695833eb71a194c6dda412deaa676a98de30/config%2Fextensions.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Fextensions.m4?ref=60d2695833eb71a194c6dda412deaa676a98de30", "patch": "@@ -0,0 +1,76 @@\n+# serial 5  -*- Autoconf -*-\n+# Enable extensions on systems that normally disable them.\n+\n+# Copyright (C) 2003, 2006, 2007 Free Software Foundation, Inc.\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# This definition of AC_USE_SYSTEM_EXTENSIONS is stolen from CVS\n+# Autoconf.  Perhaps we can remove this once we can assume Autoconf\n+# 2.62 or later everywhere, but since CVS Autoconf mutates rapidly\n+# enough in this area it's likely we'll need to redefine\n+# AC_USE_SYSTEM_EXTENSIONS for quite some time.\n+\n+# AC_USE_SYSTEM_EXTENSIONS\n+# ------------------------\n+# Enable extensions on systems that normally disable them,\n+# typically due to standards-conformance issues.\n+# Remember that #undef in AH_VERBATIM gets replaced with #define by\n+# AC_DEFINE.  The goal here is to define all known feature-enabling\n+# macros, then, if reports of conflicts are made, disable macros that\n+# cause problems on some platforms (such as __EXTENSIONS__).\n+AC_DEFUN([AC_USE_SYSTEM_EXTENSIONS],\n+[AC_BEFORE([$0], [AC_COMPILE_IFELSE])dnl\n+AC_BEFORE([$0], [AC_RUN_IFELSE])dnl\n+\n+  AC_CHECK_HEADER([minix/config.h], [MINIX=yes], [MINIX=])\n+  if test \"$MINIX\" = yes; then\n+    AC_DEFINE([_POSIX_SOURCE], [1],\n+      [Define to 1 if you need to in order for `stat' and other\n+       things to work.])\n+    AC_DEFINE([_POSIX_1_SOURCE], [2],\n+      [Define to 2 if the system does not provide POSIX.1 features\n+       except with this defined.])\n+    AC_DEFINE([_MINIX], [1],\n+      [Define to 1 if on MINIX.])\n+  fi\n+\n+  AH_VERBATIM([__EXTENSIONS__],\n+[/* Enable extensions on AIX 3, Interix.  */\n+#ifndef _ALL_SOURCE\n+# undef _ALL_SOURCE\n+#endif\n+/* Enable GNU extensions on systems that have them.  */\n+#ifndef _GNU_SOURCE\n+# undef _GNU_SOURCE\n+#endif\n+/* Enable threading extensions on Solaris.  */\n+#ifndef _POSIX_PTHREAD_SEMANTICS\n+# undef _POSIX_PTHREAD_SEMANTICS\n+#endif\n+/* Enable extensions on HP NonStop.  */\n+#ifndef _TANDEM_SOURCE\n+# undef _TANDEM_SOURCE\n+#endif\n+/* Enable general extensions on Solaris.  */\n+#ifndef __EXTENSIONS__\n+# undef __EXTENSIONS__\n+#endif\n+])\n+  AC_CACHE_CHECK([whether it is safe to define __EXTENSIONS__],\n+    [ac_cv_safe_to_define___extensions__],\n+    [AC_COMPILE_IFELSE(\n+       [AC_LANG_PROGRAM([\n+#\t  define __EXTENSIONS__ 1\n+\t  AC_INCLUDES_DEFAULT])],\n+       [ac_cv_safe_to_define___extensions__=yes],\n+       [ac_cv_safe_to_define___extensions__=no])])\n+  test $ac_cv_safe_to_define___extensions__ = yes &&\n+    AC_DEFINE([__EXTENSIONS__])\n+  AC_DEFINE([_ALL_SOURCE])\n+  AC_DEFINE([_GNU_SOURCE])\n+  AC_DEFINE([_POSIX_PTHREAD_SEMANTICS])\n+  AC_DEFINE([_TANDEM_SOURCE])\n+])# AC_USE_SYSTEM_EXTENSIONS\n+"}, {"sha": "c9c46a5258ab3d137f318173b3aea8be2f56cbc8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60d2695833eb71a194c6dda412deaa676a98de30/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60d2695833eb71a194c6dda412deaa676a98de30/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=60d2695833eb71a194c6dda412deaa676a98de30", "patch": "@@ -1,3 +1,11 @@\n+2008-03-27  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\t* configure.ac: Replace custom __GNU_SOURCE test with\n+\tAC_USE_SYSTEM_EXTENSIONS.  Move it earlier.\n+\t* aclocal.m4: Regenerate.\n+\t* configure: Regenerate.\n+\t* config.in: Regenerate.\n+\n 2008-03-27  Richard Guenther  <rguenther@suse.de>\n \n \t* fold-const.c (target.h): Include."}, {"sha": "dcece6fcfac32f782f449f87dd681ae61e7f4b4f", "filename": "gcc/aclocal.m4", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60d2695833eb71a194c6dda412deaa676a98de30/gcc%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60d2695833eb71a194c6dda412deaa676a98de30/gcc%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Faclocal.m4?ref=60d2695833eb71a194c6dda412deaa676a98de30", "patch": "@@ -95,6 +95,7 @@ fi\n m4_include([../config/acx.m4])\n m4_include([../config/codeset.m4])\n m4_include([../config/depstand.m4])\n+m4_include([../config/extensions.m4])\n m4_include([../config/gettext-sister.m4])\n m4_include([../config/iconv.m4])\n m4_include([../config/lcmessage.m4])"}, {"sha": "3c02951378a00801b3949c68db8df8a1bc8c423b", "filename": "gcc/config.in", "status": "modified", "additions": 43, "deletions": 8, "changes": 51, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60d2695833eb71a194c6dda412deaa676a98de30/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60d2695833eb71a194c6dda412deaa676a98de30/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=60d2695833eb71a194c6dda412deaa676a98de30", "patch": "@@ -1369,37 +1369,37 @@\n #endif\n \n \n-/* The size of `int', as computed by sizeof. */\n+/* The size of a `int', as computed by sizeof. */\n #ifndef USED_FOR_TARGET\n #undef SIZEOF_INT\n #endif\n \n \n-/* The size of `long', as computed by sizeof. */\n+/* The size of a `long', as computed by sizeof. */\n #ifndef USED_FOR_TARGET\n #undef SIZEOF_LONG\n #endif\n \n \n-/* The size of `long long', as computed by sizeof. */\n+/* The size of a `long long', as computed by sizeof. */\n #ifndef USED_FOR_TARGET\n #undef SIZEOF_LONG_LONG\n #endif\n \n \n-/* The size of `short', as computed by sizeof. */\n+/* The size of a `short', as computed by sizeof. */\n #ifndef USED_FOR_TARGET\n #undef SIZEOF_SHORT\n #endif\n \n \n-/* The size of `void *', as computed by sizeof. */\n+/* The size of a `void *', as computed by sizeof. */\n #ifndef USED_FOR_TARGET\n #undef SIZEOF_VOID_P\n #endif\n \n \n-/* The size of `__int64', as computed by sizeof. */\n+/* The size of a `__int64', as computed by sizeof. */\n #ifndef USED_FOR_TARGET\n #undef SIZEOF___INT64\n #endif\n@@ -1464,9 +1464,44 @@\n #endif\n \n \n-/* Always define this when using the GNU C Library */\n+/* Define to 1 if on MINIX. */\n #ifndef USED_FOR_TARGET\n-#undef _GNU_SOURCE\n+#undef _MINIX\n+#endif\n+\n+\n+/* Define to 2 if the system does not provide POSIX.1 features except with\n+   this defined. */\n+#ifndef USED_FOR_TARGET\n+#undef _POSIX_1_SOURCE\n+#endif\n+\n+\n+/* Define to 1 if you need to in order for `stat' and other things to work. */\n+#ifndef USED_FOR_TARGET\n+#undef _POSIX_SOURCE\n+#endif\n+\n+\n+/* Enable extensions on AIX 3, Interix.  */\n+#ifndef _ALL_SOURCE\n+# undef _ALL_SOURCE\n+#endif\n+/* Enable GNU extensions on systems that have them.  */\n+#ifndef _GNU_SOURCE\n+# undef _GNU_SOURCE\n+#endif\n+/* Enable threading extensions on Solaris.  */\n+#ifndef _POSIX_PTHREAD_SEMANTICS\n+# undef _POSIX_PTHREAD_SEMANTICS\n+#endif\n+/* Enable extensions on HP NonStop.  */\n+#ifndef _TANDEM_SOURCE\n+# undef _TANDEM_SOURCE\n+#endif\n+/* Enable general extensions on Solaris.  */\n+#ifndef __EXTENSIONS__\n+# undef __EXTENSIONS__\n #endif\n \n "}, {"sha": "f14366c98adc9fd98aeeb1d1b7b6d25e8e8da810", "filename": "gcc/configure", "status": "modified", "additions": 620, "deletions": 209, "changes": 829, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60d2695833eb71a194c6dda412deaa676a98de30/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60d2695833eb71a194c6dda412deaa676a98de30/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=60d2695833eb71a194c6dda412deaa676a98de30", "patch": "@@ -2929,6 +2929,7 @@ esac\n # Check C compiler features\n # -------------------------\n \n+\n ac_ext=c\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n@@ -3164,25 +3165,44 @@ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $\n ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n \n-echo \"$as_me:$LINENO: checking for inline\" >&5\n-echo $ECHO_N \"checking for inline... $ECHO_C\" >&6\n-if test \"${ac_cv_c_inline+set}\" = set; then\n+echo \"$as_me:$LINENO: checking for egrep\" >&5\n+echo $ECHO_N \"checking for egrep... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_egrep+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if echo a | (grep -E '(a|b)') >/dev/null 2>&1\n+    then ac_cv_prog_egrep='grep -E'\n+    else ac_cv_prog_egrep='egrep'\n+    fi\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_prog_egrep\" >&5\n+echo \"${ECHO_T}$ac_cv_prog_egrep\" >&6\n+ EGREP=$ac_cv_prog_egrep\n+\n+\n+echo \"$as_me:$LINENO: checking for ANSI C header files\" >&5\n+echo $ECHO_N \"checking for ANSI C header files... $ECHO_C\" >&6\n+if test \"${ac_cv_header_stdc+set}\" = set; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n-  ac_cv_c_inline=no\n-for ac_kw in inline __inline__ __inline; do\n   cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n-#ifndef __cplusplus\n-typedef int foo_t;\n-static $ac_kw foo_t static_foo () {return 0; }\n-$ac_kw foo_t foo () {return 0; }\n-#endif\n+#include <stdlib.h>\n+#include <stdarg.h>\n+#include <string.h>\n+#include <float.h>\n+\n+int\n+main ()\n+{\n \n+  ;\n+  return 0;\n+}\n _ACEOF\n rm -f conftest.$ac_objext\n if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n@@ -3206,56 +3226,366 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   ac_status=$?\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); }; }; then\n-  ac_cv_c_inline=$ac_kw; break\n+  ac_cv_header_stdc=yes\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n+ac_cv_header_stdc=no\n fi\n rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-done\n \n+if test $ac_cv_header_stdc = yes; then\n+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <string.h>\n+\n+_ACEOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  $EGREP \"memchr\" >/dev/null 2>&1; then\n+  :\n+else\n+  ac_cv_header_stdc=no\n fi\n-echo \"$as_me:$LINENO: result: $ac_cv_c_inline\" >&5\n-echo \"${ECHO_T}$ac_cv_c_inline\" >&6\n+rm -f conftest*\n \n+fi\n \n-case $ac_cv_c_inline in\n-  inline | yes) ;;\n-  *)\n-    case $ac_cv_c_inline in\n-      no) ac_val=;;\n-      *) ac_val=$ac_cv_c_inline;;\n-    esac\n-    cat >>confdefs.h <<_ACEOF\n-#ifndef __cplusplus\n-#define inline $ac_val\n+if test $ac_cv_header_stdc = yes; then\n+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <stdlib.h>\n+\n+_ACEOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  $EGREP \"free\" >/dev/null 2>&1; then\n+  :\n+else\n+  ac_cv_header_stdc=no\n+fi\n+rm -f conftest*\n+\n+fi\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.\n+  if test \"$cross_compiling\" = yes; then\n+  :\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <ctype.h>\n+#if ((' ' & 0x0FF) == 0x020)\n+# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n+# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))\n+#else\n+# define ISLOWER(c) \\\n+\t\t   (('a' <= (c) && (c) <= 'i') \\\n+\t\t     || ('j' <= (c) && (c) <= 'r') \\\n+\t\t     || ('s' <= (c) && (c) <= 'z'))\n+# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))\n #endif\n+\n+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))\n+int\n+main ()\n+{\n+  int i;\n+  for (i = 0; i < 256; i++)\n+    if (XOR (islower (i), ISLOWER (i))\n+\t|| toupper (i) != TOUPPER (i))\n+      exit(2);\n+  exit (0);\n+}\n _ACEOF\n-    ;;\n-esac\n+rm -f conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  :\n+else\n+  echo \"$as_me: program exited with status $ac_status\" >&5\n+echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n \n+( exit $ac_status )\n+ac_cv_header_stdc=no\n+fi\n+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n+fi\n+fi\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_header_stdc\" >&5\n+echo \"${ECHO_T}$ac_cv_header_stdc\" >&6\n+if test $ac_cv_header_stdc = yes; then\n \n-# sizeof(char) is 1 by definition.\n+cat >>confdefs.h <<\\_ACEOF\n+#define STDC_HEADERS 1\n+_ACEOF\n \n-echo \"$as_me:$LINENO: checking for egrep\" >&5\n-echo $ECHO_N \"checking for egrep... $ECHO_C\" >&6\n-if test \"${ac_cv_prog_egrep+set}\" = set; then\n+fi\n+\n+# On IRIX 5.3, sys/types and inttypes.h are conflicting.\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \\\n+\t\t  inttypes.h stdint.h unistd.h\n+do\n+as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n+echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n+echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n-  if echo a | (grep -E '(a|b)') >/dev/null 2>&1\n-    then ac_cv_prog_egrep='grep -E'\n-    else ac_cv_prog_egrep='egrep'\n-    fi\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+$ac_includes_default\n+\n+#include <$ac_header>\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  eval \"$as_ac_Header=yes\"\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+eval \"$as_ac_Header=no\"\n fi\n-echo \"$as_me:$LINENO: result: $ac_cv_prog_egrep\" >&5\n-echo \"${ECHO_T}$ac_cv_prog_egrep\" >&6\n- EGREP=$ac_cv_prog_egrep\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n+if test `eval echo '${'$as_ac_Header'}'` = yes; then\n+  cat >>confdefs.h <<_ACEOF\n+#define `echo \"HAVE_$ac_header\" | $as_tr_cpp` 1\n+_ACEOF\n \n+fi\n \n-echo \"$as_me:$LINENO: checking for ANSI C header files\" >&5\n-echo $ECHO_N \"checking for ANSI C header files... $ECHO_C\" >&6\n-if test \"${ac_cv_header_stdc+set}\" = set; then\n+done\n+\n+\n+\n+  if test \"${ac_cv_header_minix_config_h+set}\" = set; then\n+  echo \"$as_me:$LINENO: checking for minix/config.h\" >&5\n+echo $ECHO_N \"checking for minix/config.h... $ECHO_C\" >&6\n+if test \"${ac_cv_header_minix_config_h+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_header_minix_config_h\" >&5\n+echo \"${ECHO_T}$ac_cv_header_minix_config_h\" >&6\n+else\n+  # Is the header compilable?\n+echo \"$as_me:$LINENO: checking minix/config.h usability\" >&5\n+echo $ECHO_N \"checking minix/config.h usability... $ECHO_C\" >&6\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+$ac_includes_default\n+#include <minix/config.h>\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_header_compiler=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_header_compiler=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+echo \"$as_me:$LINENO: result: $ac_header_compiler\" >&5\n+echo \"${ECHO_T}$ac_header_compiler\" >&6\n+\n+# Is the header present?\n+echo \"$as_me:$LINENO: checking minix/config.h presence\" >&5\n+echo $ECHO_N \"checking minix/config.h presence... $ECHO_C\" >&6\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <minix/config.h>\n+_ACEOF\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n+else\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n+  ac_header_preproc=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+  ac_header_preproc=no\n+fi\n+rm -f conftest.err conftest.$ac_ext\n+echo \"$as_me:$LINENO: result: $ac_header_preproc\" >&5\n+echo \"${ECHO_T}$ac_header_preproc\" >&6\n+\n+# So?  What about this header?\n+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in\n+  yes:no: )\n+    { echo \"$as_me:$LINENO: WARNING: minix/config.h: accepted by the compiler, rejected by the preprocessor!\" >&5\n+echo \"$as_me: WARNING: minix/config.h: accepted by the compiler, rejected by the preprocessor!\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: minix/config.h: proceeding with the compiler's result\" >&5\n+echo \"$as_me: WARNING: minix/config.h: proceeding with the compiler's result\" >&2;}\n+    ac_header_preproc=yes\n+    ;;\n+  no:yes:* )\n+    { echo \"$as_me:$LINENO: WARNING: minix/config.h: present but cannot be compiled\" >&5\n+echo \"$as_me: WARNING: minix/config.h: present but cannot be compiled\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: minix/config.h:     check for missing prerequisite headers?\" >&5\n+echo \"$as_me: WARNING: minix/config.h:     check for missing prerequisite headers?\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: minix/config.h: see the Autoconf documentation\" >&5\n+echo \"$as_me: WARNING: minix/config.h: see the Autoconf documentation\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: minix/config.h:     section \\\"Present But Cannot Be Compiled\\\"\" >&5\n+echo \"$as_me: WARNING: minix/config.h:     section \\\"Present But Cannot Be Compiled\\\"\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: minix/config.h: proceeding with the preprocessor's result\" >&5\n+echo \"$as_me: WARNING: minix/config.h: proceeding with the preprocessor's result\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: minix/config.h: in the future, the compiler will take precedence\" >&5\n+echo \"$as_me: WARNING: minix/config.h: in the future, the compiler will take precedence\" >&2;}\n+    (\n+      cat <<\\_ASBOX\n+## ------------------------------------------ ##\n+## Report this to the AC_PACKAGE_NAME lists.  ##\n+## ------------------------------------------ ##\n+_ASBOX\n+    ) |\n+      sed \"s/^/$as_me: WARNING:     /\" >&2\n+    ;;\n+esac\n+echo \"$as_me:$LINENO: checking for minix/config.h\" >&5\n+echo $ECHO_N \"checking for minix/config.h... $ECHO_C\" >&6\n+if test \"${ac_cv_header_minix_config_h+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  ac_cv_header_minix_config_h=$ac_header_preproc\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_header_minix_config_h\" >&5\n+echo \"${ECHO_T}$ac_cv_header_minix_config_h\" >&6\n+\n+fi\n+if test $ac_cv_header_minix_config_h = yes; then\n+  MINIX=yes\n+else\n+  MINIX=\n+fi\n+\n+\n+  if test \"$MINIX\" = yes; then\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define _POSIX_SOURCE 1\n+_ACEOF\n+\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define _POSIX_1_SOURCE 2\n+_ACEOF\n+\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define _MINIX 1\n+_ACEOF\n+\n+  fi\n+\n+\n+\n+  echo \"$as_me:$LINENO: checking whether it is safe to define __EXTENSIONS__\" >&5\n+echo $ECHO_N \"checking whether it is safe to define __EXTENSIONS__... $ECHO_C\" >&6\n+if test \"${ac_cv_safe_to_define___extensions__+set}\" = set; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n   cat >conftest.$ac_ext <<_ACEOF\n@@ -3264,11 +3594,9 @@ _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n-#include <stdlib.h>\n-#include <stdarg.h>\n-#include <string.h>\n-#include <float.h>\n \n+#\t  define __EXTENSIONS__ 1\n+\t  $ac_includes_default\n int\n main ()\n {\n@@ -3299,154 +3627,292 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   ac_status=$?\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); }; }; then\n-  ac_cv_header_stdc=yes\n+  ac_cv_safe_to_define___extensions__=yes\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-ac_cv_header_stdc=no\n+ac_cv_safe_to_define___extensions__=no\n fi\n rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_safe_to_define___extensions__\" >&5\n+echo \"${ECHO_T}$ac_cv_safe_to_define___extensions__\" >&6\n+  test $ac_cv_safe_to_define___extensions__ = yes &&\n+    cat >>confdefs.h <<\\_ACEOF\n+#define __EXTENSIONS__ 1\n+_ACEOF\n \n-if test $ac_cv_header_stdc = yes; then\n-  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n+  cat >>confdefs.h <<\\_ACEOF\n+#define _ALL_SOURCE 1\n+_ACEOF\n+\n+  cat >>confdefs.h <<\\_ACEOF\n+#define _GNU_SOURCE 1\n+_ACEOF\n+\n+  cat >>confdefs.h <<\\_ACEOF\n+#define _POSIX_PTHREAD_SEMANTICS 1\n+_ACEOF\n+\n+  cat >>confdefs.h <<\\_ACEOF\n+#define _TANDEM_SOURCE 1\n+_ACEOF\n+\n+\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+echo \"$as_me:$LINENO: checking how to run the C preprocessor\" >&5\n+echo $ECHO_N \"checking how to run the C preprocessor... $ECHO_C\" >&6\n+# On Suns, sometimes $CPP names a directory.\n+if test -n \"$CPP\" && test -d \"$CPP\"; then\n+  CPP=\n+fi\n+if test -z \"$CPP\"; then\n+  if test \"${ac_cv_prog_CPP+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+      # Double quotes because CPP needs to be expanded\n+    for CPP in \"$CC -E\" \"$CC -E -traditional-cpp\" \"/lib/cpp\"\n+    do\n+      ac_preproc_ok=false\n+for ac_c_preproc_warn_flag in '' yes\n+do\n+  # Use a header file that comes with gcc, so configuring glibc\n+  # with a fresh cross-compiler works.\n+  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n+  # <limits.h> exists even on freestanding compilers.\n+  # On the NeXT, cc -E runs the code through the compiler's parser,\n+  # not just through cpp. \"Syntax error\" is here to catch this case.\n   cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n-#include <string.h>\n-\n+#ifdef __STDC__\n+# include <limits.h>\n+#else\n+# include <assert.h>\n+#endif\n+\t\t     Syntax error\n _ACEOF\n-if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n-  $EGREP \"memchr\" >/dev/null 2>&1; then\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n+else\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n   :\n else\n-  ac_cv_header_stdc=no\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+  # Broken: fails on valid input.\n+continue\n fi\n-rm -f conftest*\n+rm -f conftest.err conftest.$ac_ext\n+\n+  # OK, works on sane cases.  Now check whether non-existent headers\n+  # can be detected and how.\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <ac_nonexistent.h>\n+_ACEOF\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n+else\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n+  # Broken: success on invalid input.\n+continue\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n \n+  # Passes both tests.\n+ac_preproc_ok=:\n+break\n fi\n+rm -f conftest.err conftest.$ac_ext\n \n-if test $ac_cv_header_stdc = yes; then\n-  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n+done\n+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n+rm -f conftest.err conftest.$ac_ext\n+if $ac_preproc_ok; then\n+  break\n+fi\n+\n+    done\n+    ac_cv_prog_CPP=$CPP\n+\n+fi\n+  CPP=$ac_cv_prog_CPP\n+else\n+  ac_cv_prog_CPP=$CPP\n+fi\n+echo \"$as_me:$LINENO: result: $CPP\" >&5\n+echo \"${ECHO_T}$CPP\" >&6\n+ac_preproc_ok=false\n+for ac_c_preproc_warn_flag in '' yes\n+do\n+  # Use a header file that comes with gcc, so configuring glibc\n+  # with a fresh cross-compiler works.\n+  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n+  # <limits.h> exists even on freestanding compilers.\n+  # On the NeXT, cc -E runs the code through the compiler's parser,\n+  # not just through cpp. \"Syntax error\" is here to catch this case.\n   cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n-#include <stdlib.h>\n-\n+#ifdef __STDC__\n+# include <limits.h>\n+#else\n+# include <assert.h>\n+#endif\n+\t\t     Syntax error\n _ACEOF\n-if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n-  $EGREP \"free\" >/dev/null 2>&1; then\n-  :\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n else\n-  ac_cv_header_stdc=no\n+  ac_cpp_err=yes\n fi\n-rm -f conftest*\n+if test -z \"$ac_cpp_err\"; then\n+  :\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n \n+  # Broken: fails on valid input.\n+continue\n fi\n+rm -f conftest.err conftest.$ac_ext\n \n-if test $ac_cv_header_stdc = yes; then\n-  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.\n-  if test \"$cross_compiling\" = yes; then\n-  :\n-else\n+  # OK, works on sane cases.  Now check whether non-existent headers\n+  # can be detected and how.\n   cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n-#include <ctype.h>\n-#if ((' ' & 0x0FF) == 0x020)\n-# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n-# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))\n-#else\n-# define ISLOWER(c) \\\n-\t\t   (('a' <= (c) && (c) <= 'i') \\\n-\t\t     || ('j' <= (c) && (c) <= 'r') \\\n-\t\t     || ('s' <= (c) && (c) <= 'z'))\n-# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))\n-#endif\n-\n-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))\n-int\n-main ()\n-{\n-  int i;\n-  for (i = 0; i < 256; i++)\n-    if (XOR (islower (i), ISLOWER (i))\n-\t|| toupper (i) != TOUPPER (i))\n-      exit(2);\n-  exit (0);\n-}\n+#include <ac_nonexistent.h>\n _ACEOF\n-rm -f conftest$ac_exeext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n-  (eval $ac_link) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n   ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  :\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n else\n-  echo \"$as_me: program exited with status $ac_status\" >&5\n-echo \"$as_me: failed program was:\" >&5\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n+  # Broken: success on invalid input.\n+continue\n+else\n+  echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-( exit $ac_status )\n-ac_cv_header_stdc=no\n-fi\n-rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n-fi\n-fi\n+  # Passes both tests.\n+ac_preproc_ok=:\n+break\n fi\n-echo \"$as_me:$LINENO: result: $ac_cv_header_stdc\" >&5\n-echo \"${ECHO_T}$ac_cv_header_stdc\" >&6\n-if test $ac_cv_header_stdc = yes; then\n-\n-cat >>confdefs.h <<\\_ACEOF\n-#define STDC_HEADERS 1\n-_ACEOF\n+rm -f conftest.err conftest.$ac_ext\n \n+done\n+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n+rm -f conftest.err conftest.$ac_ext\n+if $ac_preproc_ok; then\n+  :\n+else\n+  { { echo \"$as_me:$LINENO: error: C preprocessor \\\"$CPP\\\" fails sanity check\n+See \\`config.log' for more details.\" >&5\n+echo \"$as_me: error: C preprocessor \\\"$CPP\\\" fails sanity check\n+See \\`config.log' for more details.\" >&2;}\n+   { (exit 1); exit 1; }; }\n fi\n \n-# On IRIX 5.3, sys/types and inttypes.h are conflicting.\n-\n-\n-\n-\n-\n-\n-\n-\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n-for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \\\n-\t\t  inttypes.h stdint.h unistd.h\n-do\n-as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n-echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n-echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n-if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n+echo \"$as_me:$LINENO: checking for inline\" >&5\n+echo $ECHO_N \"checking for inline... $ECHO_C\" >&6\n+if test \"${ac_cv_c_inline+set}\" = set; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n+  ac_cv_c_inline=no\n+for ac_kw in inline __inline__ __inline; do\n   cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n-$ac_includes_default\n+#ifndef __cplusplus\n+typedef int foo_t;\n+static $ac_kw foo_t static_foo () {return 0; }\n+$ac_kw foo_t foo () {return 0; }\n+#endif\n \n-#include <$ac_header>\n _ACEOF\n rm -f conftest.$ac_objext\n if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n@@ -3470,27 +3936,37 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   ac_status=$?\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); }; }; then\n-  eval \"$as_ac_Header=yes\"\n+  ac_cv_c_inline=$ac_kw; break\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-eval \"$as_ac_Header=no\"\n fi\n rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-fi\n-echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n-echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n-if test `eval echo '${'$as_ac_Header'}'` = yes; then\n-  cat >>confdefs.h <<_ACEOF\n-#define `echo \"HAVE_$ac_header\" | $as_tr_cpp` 1\n-_ACEOF\n+done\n \n fi\n+echo \"$as_me:$LINENO: result: $ac_cv_c_inline\" >&5\n+echo \"${ECHO_T}$ac_cv_c_inline\" >&6\n \n-done\n+\n+case $ac_cv_c_inline in\n+  inline | yes) ;;\n+  *)\n+    case $ac_cv_c_inline in\n+      no) ac_val=;;\n+      *) ac_val=$ac_cv_c_inline;;\n+    esac\n+    cat >>confdefs.h <<_ACEOF\n+#ifndef __cplusplus\n+#define inline $ac_val\n+#endif\n+_ACEOF\n+    ;;\n+esac\n \n \n+# sizeof(char) is 1 by definition.\n echo \"$as_me:$LINENO: checking for void *\" >&5\n echo $ECHO_N \"checking for void *... $ECHO_C\" >&6\n if test \"${ac_cv_type_void_p+set}\" = set; then\n@@ -7934,71 +8410,6 @@ fi\n # Checks for C headers\n # --------------------\n \n-echo \"$as_me:$LINENO: checking for GNU C library\" >&5\n-echo $ECHO_N \"checking for GNU C library... $ECHO_C\" >&6\n-if test \"${gcc_cv_glibc+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-#include <features.h>\n-int\n-main ()\n-{\n-\n-#if ! (defined __GLIBC__ || defined __GNU_LIBRARY__)\n-#error Not a GNU C library system\n-#endif\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  gcc_cv_glibc=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-gcc_cv_glibc=no\n-fi\n-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-fi\n-\n-echo \"$as_me:$LINENO: result: $gcc_cv_glibc\" >&5\n-echo \"${ECHO_T}$gcc_cv_glibc\" >&6\n-if test $gcc_cv_glibc = yes; then\n-\n-cat >>confdefs.h <<\\_ACEOF\n-#define _GNU_SOURCE 1\n-_ACEOF\n-\n-fi\n-\n # Need to reject headers which give warnings, so that the -Werror bootstrap\n # works later. *sigh*  This needs to come before all header checks.\n "}, {"sha": "10e6a9eca586b750890e0ea1ad95b6c315778885", "filename": "gcc/configure.ac", "status": "modified", "additions": 1, "deletions": 14, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60d2695833eb71a194c6dda412deaa676a98de30/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60d2695833eb71a194c6dda412deaa676a98de30/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=60d2695833eb71a194c6dda412deaa676a98de30", "patch": "@@ -297,6 +297,7 @@ AC_SUBST(CFLAGS)\n # Check C compiler features\n # -------------------------\n \n+AC_USE_SYSTEM_EXTENSIONS\n AC_PROG_CPP\n AC_C_INLINE\n \n@@ -896,20 +897,6 @@ fi\n # Checks for C headers\n # --------------------\n \n-AC_MSG_CHECKING(for GNU C library)\n-AC_CACHE_VAL(gcc_cv_glibc,\n-[AC_COMPILE_IFELSE([AC_LANG_PROGRAM(\n-  [[#include <features.h>]], [[\n-#if ! (defined __GLIBC__ || defined __GNU_LIBRARY__)\n-#error Not a GNU C library system\n-#endif]])],\n-  [gcc_cv_glibc=yes],\n-  [gcc_cv_glibc=no])])\n-AC_MSG_RESULT($gcc_cv_glibc)\n-if test $gcc_cv_glibc = yes; then\n-  AC_DEFINE(_GNU_SOURCE, 1, [Always define this when using the GNU C Library])\n-fi\n-\n # Need to reject headers which give warnings, so that the -Werror bootstrap\n # works later. *sigh*  This needs to come before all header checks.\n AC_PROG_CPP_WERROR"}]}