{"sha": "a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNiZjMyNGM0Njc0Y2E4YTJkMDlmNzM5YzQ4YmUyY2M1OWYxYTc4OQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2003-12-18T21:03:24Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2003-12-18T21:03:24Z"}, "message": "c-decl.c (check_bitfield_type_and_width): Remove enum special case suppression of pedwarn.\n\n        * c-decl.c (check_bitfield_type_and_width): Remove enum special\n        case suppression of pedwarn.\n        * system.h (ENUM_BITFIELD): Use __extension__.\n        (CHAR_BITFIELD): Likewise.\ncp/\n        * cp-tree.h (struct lang_type_header): Remove __extension__.\ntestsuite/\n        * gcc.dg/bitfld-1.c: Expect warnings for enum bitfields.\n\nFrom-SVN: r74797", "tree": {"sha": "9f486df3f0bb1ce1e6783a9fb57d4d7c914edbb4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f486df3f0bb1ce1e6783a9fb57d4d7c914edbb4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/comments", "author": null, "committer": null, "parents": [{"sha": "28e4696cc1310b069757e21a12c5d1bb7f46e724", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28e4696cc1310b069757e21a12c5d1bb7f46e724", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28e4696cc1310b069757e21a12c5d1bb7f46e724"}], "stats": {"total": 29, "additions": 21, "deletions": 8}, "files": [{"sha": "39b799c6c592435854d649ee1c0d135789d79d56", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "patch": "@@ -1,3 +1,10 @@\n+2003-12-18  Richard Henderson  <rth@redhat.com>\n+\n+\t* c-decl.c (check_bitfield_type_and_width): Remove enum special\n+\tcase suppression of pedwarn.\n+\t* system.h (ENUM_BITFIELD): Use __extension__.\n+\t(CHAR_BITFIELD): Likewise.\n+\n 2003-12-18  Ulrich Weigand  <uweigand@de.ibm.com>\n \t    Mark Dettinger  <dettinge@de.ibm.com>\n "}, {"sha": "4bf9727b2ada6bc3701b150f63067562c72ddec0", "filename": "gcc/c-decl.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "patch": "@@ -3268,10 +3268,7 @@ check_bitfield_type_and_width (tree *type, tree *width, const char *orig_name)\n   if (pedantic\n       && type_mv != integer_type_node\n       && type_mv != unsigned_type_node\n-      && type_mv != boolean_type_node\n-      /* Accept an enum that's equivalent to int or unsigned int.  */\n-      && (TREE_CODE (*type) != ENUMERAL_TYPE\n-\t  || TYPE_PRECISION (*type) != TYPE_PRECISION (integer_type_node)))\n+      && type_mv != boolean_type_node)\n     pedwarn (\"type of bit-field `%s' is a GCC extension\", name);\n \n   if (type_mv == boolean_type_node)"}, {"sha": "ab064baa71db2a89d1e4296b3c1cad5f3ec2573f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "patch": "@@ -1,3 +1,7 @@\n+2003-12-18  Richard Henderson  <rth@redhat.com>\n+\n+\t* cp-tree.h (struct lang_type_header): Remove __extension__.\n+\n 2003-12-18  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/12253"}, {"sha": "bf923b088404d2e6aa1b40130ed7e31d0975939a", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "patch": "@@ -1017,7 +1017,7 @@ enum languages { lang_c, lang_cplusplus, lang_java };\n /* This is a few header flags for 'struct lang_type'.  Actually,\n    all but the first are used only for lang_type_class; they\n    are put in this structure to save space.  */\n-__extension__ struct lang_type_header GTY(())\n+struct lang_type_header GTY(())\n {\n   CHAR_BITFIELD is_lang_type_class : 1;\n "}, {"sha": "f8295f16bc73daf056050e0ad96c1a2eff406c29", "filename": "gcc/system.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "patch": "@@ -490,8 +490,8 @@ extern int snprintf (char *, size_t, const char *, ...);\n    FIXME: provide a complete autoconf test for buggy enum bitfields.  */\n \n #if (GCC_VERSION > 2000)\n-#define ENUM_BITFIELD(TYPE) enum TYPE\n-#define CHAR_BITFIELD unsigned char\n+#define ENUM_BITFIELD(TYPE) __extension__ enum TYPE\n+#define CHAR_BITFIELD __extension__ unsigned char\n #else\n #define ENUM_BITFIELD(TYPE) unsigned int\n #define CHAR_BITFIELD unsigned int"}, {"sha": "16703ba5529f004c0fc6fbd812d27f0379648aa8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "patch": "@@ -1,3 +1,7 @@\n+2003-12-18  Richard Henderson  <rth@redhat.com>\n+\n+\t* gcc.dg/bitfld-1.c: Expect warnings for enum bitfields.\n+\n 2003-12-18  Steven Bosscher  <steven@gcc.gnu.org>\n \t    Dan Kegel <dank@kegel.com>\n "}, {"sha": "37acb6efac2aa8aef9d1d5c70e276c3420abc375", "filename": "gcc/testsuite/gcc.dg/bitfld-1.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Ftestsuite%2Fgcc.dg%2Fbitfld-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3bf324c4674ca8a2d09f739c48be2cc59f1a789/gcc%2Ftestsuite%2Fgcc.dg%2Fbitfld-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbitfld-1.c?ref=a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "patch": "@@ -25,6 +25,7 @@ struct bf1\n   unsigned long g: 5;\t\t/* { dg-warning \"GCC extension|ISO C\" } */\n   ui h: 5;\n   enum foo i: 2;\t\t/* { dg-error \"narrower\" } */\n-  enum foo j: 3;\n+    /* { dg-warning \"GCC extension|ISO C\" \"extension\" { target *-*-* } 27 } */\n+  enum foo j: 3;\t\t/* { dg-warning \"GCC extension|ISO C\" } */\n   unsigned int k: 256;\t\t/* { dg-error \"exceeds its type\" } */\n };"}]}