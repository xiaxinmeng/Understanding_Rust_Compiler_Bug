{"sha": "1e39313ac00c633263dfd11e06b782c9d988cad8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWUzOTMxM2FjMDBjNjMzMjYzZGZkMTFlMDZiNzgyYzlkOTg4Y2FkOA==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2017-11-16T22:23:30Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2017-11-16T22:23:30Z"}, "message": "Add -std=c18 etc. option aliases.\n\nISO C17 won't go to ballot until December, meaning publication of the\nstandard won't be until 2018, leaving ambiguity as to whether people\nwill end up referring to the standard as C17, as it's currently known\nand which corresponds to the __STDC_VERSION__ value, or C18 based on\nthe publication date.\n\nIn case people end up referring to this standard as C18, this patch\nadds corresponding option aliases -std=c18, -std=iso9899:2018,\n-std=gnu18 so people can use those names based on publication date if\nthey wish.  The \"expected to be\" explanations in help texts and the\nmanual can be removed as and when the standard is published, hopefully\nbefore GCC 8 is out.\n\nBootstrapped with no regressions on x86_64-pc-linux-gnu.\n\ngcc:\n\t* doc/invoke.texi (-std=c17): Refer to 2018 expected publication\n\tdate of C17.\n\t(-std=c18, -std=iso9899:2018, -std=gnu18): Document option\n\taliases.\n\ngcc/c-family:\n\t* c.opt (-std=c17, std=gnu17, -std=iso9899:2017): Refer to 2018\n\texpected publication date of C17.\n\t(-std=c18, -std=gnu18, -std=iso9899:2018): New option aliases.\n\ngcc/testsuite:\n\t* gcc.dg/c18-version-1.c, gcc.dg/c18-version-2.c: New tests.\n\nFrom-SVN: r254847", "tree": {"sha": "fb24110c6c1d839a3552ced475422f5d12218223", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb24110c6c1d839a3552ced475422f5d12218223"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e39313ac00c633263dfd11e06b782c9d988cad8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e39313ac00c633263dfd11e06b782c9d988cad8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e39313ac00c633263dfd11e06b782c9d988cad8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e39313ac00c633263dfd11e06b782c9d988cad8/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "727bd12ea30debe9c17958508858960d5fa3d2b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/727bd12ea30debe9c17958508858960d5fa3d2b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/727bd12ea30debe9c17958508858960d5fa3d2b9"}], "stats": {"total": 59, "additions": 55, "deletions": 4}, "files": [{"sha": "4e7f0af54faa19070cbd703d0d657f4ab38f0778", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1e39313ac00c633263dfd11e06b782c9d988cad8", "patch": "@@ -1,3 +1,10 @@\n+2017-11-16  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* doc/invoke.texi (-std=c17): Refer to 2018 expected publication\n+\tdate of C17.\n+\t(-std=c18, -std=iso9899:2018, -std=gnu18): Document option\n+\taliases.\n+\n 2017-11-16  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR bootstrap/82856"}, {"sha": "990cd6163bc2dc385125b519f364eb575ba9344b", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=1e39313ac00c633263dfd11e06b782c9d988cad8", "patch": "@@ -1,3 +1,9 @@\n+2017-11-16  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* c.opt (-std=c17, std=gnu17, -std=iso9899:2017): Refer to 2018\n+\texpected publication date of C17.\n+\t(-std=c18, -std=gnu18, -std=iso9899:2018): New option aliases.\n+\n 2017-11-15  Joseph Myers  <joseph@codesourcery.com>\n \n \tPR c/81156"}, {"sha": "d857dfc379295f699f68038a7208cdd1f458473b", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=1e39313ac00c633263dfd11e06b782c9d988cad8", "patch": "@@ -1950,7 +1950,11 @@ Deprecated in favor of -std=c11.\n \n std=c17\n C ObjC\n-Conform to the ISO 2017 C standard.\n+Conform to the ISO 2017 C standard (expected to be published in 2018).\n+\n+std=c18\n+C ObjC Alias(std=c17)\n+Conform to the ISO 2017 C standard (expected to be published in 2018).\n \n std=c89\n C ObjC Alias(std=c90)\n@@ -2016,7 +2020,11 @@ Deprecated in favor of -std=gnu11.\n \n std=gnu17\n C ObjC\n-Conform to the ISO 2017 C standard with GNU extensions.\n+Conform to the ISO 2017 C standard (expected to be published in 2018) with GNU extensions.\n+\n+std=gnu18\n+C ObjC Alias(std=gnu17)\n+Conform to the ISO 2017 C standard (expected to be published in 2018) with GNU extensions.\n \n std=gnu89\n C ObjC Alias(std=gnu90)\n@@ -2056,7 +2064,11 @@ Conform to the ISO 2011 C standard.\n \n std=iso9899:2017\n C ObjC Alias(std=c17)\n-Conform to the ISO 2017 C standard.\n+Conform to the ISO 2017 C standard (expected to be published in 2018).\n+\n+std=iso9899:2018\n+C ObjC Alias(std=c17)\n+Conform to the ISO 2017 C standard (expected to be published in 2018).\n \n traditional\n Driver"}, {"sha": "1e2b869885bed3070d80042ac0730b9e62f64025", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=1e39313ac00c633263dfd11e06b782c9d988cad8", "patch": "@@ -1832,8 +1832,11 @@ Annexes F and G) and the optional Annexes K (Bounds-checking\n interfaces) and L (Analyzability).  The name @samp{c1x} is deprecated.\n \n @item c17\n+@itemx c18\n @itemx iso9899:2017\n-ISO C17, the 2017 revision of the ISO C standard.  This standard is\n+@itemx iso9899:2018\n+ISO C17, the 2017 revision of the ISO C standard (expected to be\n+published in 2018).  This standard is\n same as C11 except for corrections of defects (all of which are also\n applied with @option{-std=c11}) and a new value of\n @code{__STDC_VERSION__}, and so is supported to the same extent as C11.\n@@ -1852,6 +1855,7 @@ GNU dialect of ISO C11.\n The name @samp{gnu1x} is deprecated.\n \n @item gnu17\n+@itemx gnu18\n GNU dialect of ISO C17.  This is the default for C code.\n \n @item c++98"}, {"sha": "f9221894efd569a161d156edaf45bd7730bf0364", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1e39313ac00c633263dfd11e06b782c9d988cad8", "patch": "@@ -1,3 +1,7 @@\n+2017-11-16  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* gcc.dg/c18-version-1.c, gcc.dg/c18-version-2.c: New tests.\n+\n 2017-11-15  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \t* gcc.target/powerpc/bfp/bfp.exp: Look for *.c files, not *.c*"}, {"sha": "9acd02461a6b181e74169aab14869b2abbf04408", "filename": "gcc/testsuite/gcc.dg/c18-version-1.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Ftestsuite%2Fgcc.dg%2Fc18-version-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Ftestsuite%2Fgcc.dg%2Fc18-version-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc18-version-1.c?ref=1e39313ac00c633263dfd11e06b782c9d988cad8", "patch": "@@ -0,0 +1,9 @@\n+/* Test __STDC_VERSION__ for C17.  Test -std=c18.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-std=c18 -pedantic-errors\" } */\n+\n+#if __STDC_VERSION__ == 201710L\n+int i;\n+#else\n+#error \"Bad __STDC_VERSION__.\"\n+#endif"}, {"sha": "8786402bb64a09b9e510864ae87dec26e1ab52cf", "filename": "gcc/testsuite/gcc.dg/c18-version-2.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Ftestsuite%2Fgcc.dg%2Fc18-version-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e39313ac00c633263dfd11e06b782c9d988cad8/gcc%2Ftestsuite%2Fgcc.dg%2Fc18-version-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc18-version-2.c?ref=1e39313ac00c633263dfd11e06b782c9d988cad8", "patch": "@@ -0,0 +1,9 @@\n+/* Test __STDC_VERSION__ for C17.  Test -std=iso9899:2018.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-std=iso9899:2018 -pedantic-errors\" } */\n+\n+#if __STDC_VERSION__ == 201710L\n+int i;\n+#else\n+#error \"Bad __STDC_VERSION__.\"\n+#endif"}]}