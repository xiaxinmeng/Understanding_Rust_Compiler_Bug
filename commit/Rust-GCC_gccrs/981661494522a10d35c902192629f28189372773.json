{"sha": "981661494522a10d35c902192629f28189372773", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTgxNjYxNDk0NTIyYTEwZDM1YzkwMjE5MjYyOWYyODE4OTM3Mjc3Mw==", "commit": {"author": {"name": "James Van Artsdalen", "email": "jrv@gnu.org", "date": "1992-10-12T21:38:15Z"}, "committer": {"name": "James Van Artsdalen", "email": "jrv@gnu.org", "date": "1992-10-12T21:38:15Z"}, "message": "(cmpstrM patterns): Compare strings of unsigned chars, not strings of\nsigned chars.\n\nFrom-SVN: r2414", "tree": {"sha": "3fdced49c46528634c15f68de2680323902d6e4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3fdced49c46528634c15f68de2680323902d6e4f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/981661494522a10d35c902192629f28189372773", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/981661494522a10d35c902192629f28189372773", "html_url": "https://github.com/Rust-GCC/gccrs/commit/981661494522a10d35c902192629f28189372773", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/981661494522a10d35c902192629f28189372773/comments", "author": null, "committer": null, "parents": [{"sha": "b329456eff9087db32b6dd24e8300ef59821f07c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b329456eff9087db32b6dd24e8300ef59821f07c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b329456eff9087db32b6dd24e8300ef59821f07c"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "f7dd53fe4e70fac4f8afca2e8314722c9142f943", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/981661494522a10d35c902192629f28189372773/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/981661494522a10d35c902192629f28189372773/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=981661494522a10d35c902192629f28189372773", "patch": "@@ -3976,7 +3976,7 @@\n }\")\n \n (define_expand \"cmpstrsi\"\n-  [(parallel [(set (match_operand:QI 0 \"general_operand\" \"\")\n+  [(parallel [(set (match_operand:SI 0 \"general_operand\" \"\")\n \t\t   (compare:CC (match_operand:BLK 1 \"general_operand\" \"\")\n \t\t\t       (match_operand:BLK 2 \"general_operand\" \"\")))\n \t      (use (match_operand:SI 3 \"general_operand\" \"\"))\n@@ -4013,7 +4013,7 @@\n ;; code to handle zero-length compares.\n \n (define_insn \"\"\n-  [(set (match_operand:QI 0 \"general_operand\" \"=&q\")\n+  [(set (match_operand:SI 0 \"general_operand\" \"=&r\")\n \t(compare:CC (mem:BLK (match_operand:SI 1 \"address_operand\" \"S\"))\n \t\t    (mem:BLK (match_operand:SI 2 \"address_operand\" \"D\"))))\n    (use (match_operand:SI 3 \"register_operand\" \"c\"))\n@@ -4024,12 +4024,12 @@\n   \"\"\n   \"*\n {\n-  rtx xops[3], label;\n+  rtx xops[4], label;\n \n   label = gen_label_rtx ();\n \n   output_asm_insn (\\\"cld\\\", operands);\n-  output_asm_insn (AS2 (xor%B0,%0,%0), operands);\n+  output_asm_insn (AS2 (xor%L0,%0,%0), operands);\n   output_asm_insn (\\\"repz\\;cmps%B2\\\", operands);\n   output_asm_insn (\\\"je %l0\\\", &label);\n \n@@ -4038,9 +4038,12 @@\n \t\t     gen_rtx (PLUS, SImode, operands[1], constm1_rtx));\n   xops[2] = gen_rtx (MEM, QImode,\n \t\t     gen_rtx (PLUS, SImode, operands[2], constm1_rtx));\n+  xops[3] = operands[3];\n \n-  output_asm_insn (AS2 (mov%B0,%1,%b0), xops);\n-  output_asm_insn (AS2 (sub%B0,%2,%b0), xops);\n+  output_asm_insn (AS2 (movz%B1%L0,%1,%0), xops);\n+  output_asm_insn (AS2 (movz%B2%L3,%2,%3), xops);\n+\n+  output_asm_insn (AS2 (sub%L0,%3,%0), xops);\n   ASM_OUTPUT_INTERNAL_LABEL (asm_out_file, \\\"L\\\", CODE_LABEL_NUMBER (label));\n   RET;\n }\")\n@@ -4059,6 +4062,8 @@\n {\n   rtx xops[2];\n \n+  cc_status.flags |= CC_NOT_SIGNED;\n+\n   xops[0] = gen_rtx (REG, QImode, 0);\n   xops[1] = CONST0_RTX (QImode);\n "}]}