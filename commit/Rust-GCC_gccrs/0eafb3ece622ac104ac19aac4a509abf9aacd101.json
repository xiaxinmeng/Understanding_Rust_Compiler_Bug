{"sha": "0eafb3ece622ac104ac19aac4a509abf9aacd101", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGVhZmIzZWNlNjIyYWMxMDRhYzE5YWFjNGE1MDlhYmY5YWFjZDEwMQ==", "commit": {"author": {"name": "Ben Elliston", "email": "bje@au.ibm.com", "date": "2006-03-01T05:14:24Z"}, "committer": {"name": "Ben Elliston", "email": "bje@gcc.gnu.org", "date": "2006-03-01T05:14:24Z"}, "message": "mklibgcc.in: Add logic to handle $DFP_ENABLE and $DFP_CFLAGS.\n\n\t* mklibgcc.in: Add logic to handle $DFP_ENABLE and $DFP_CFLAGS.\n\tCompile dfp-bit.c from the source directory using -DWIDTH and\n\t$DFP_CFLAGS to control the compilation of that file, rather than\n\tgenerating width-specific versions in the build directory.\n\t* Makefile.in (libgcc.mk): Pass down DFP_ENABLE and DFP_CFLAGS.\n\t(LIBGCC_DEPS): Replace $(D32PBIT) et al with config/dfp-bit.[hc].\n\nFrom-SVN: r111595", "tree": {"sha": "047409cff5d91e3067293c640a1c75cb2a4f67b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/047409cff5d91e3067293c640a1c75cb2a4f67b3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0eafb3ece622ac104ac19aac4a509abf9aacd101", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0eafb3ece622ac104ac19aac4a509abf9aacd101", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0eafb3ece622ac104ac19aac4a509abf9aacd101", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0eafb3ece622ac104ac19aac4a509abf9aacd101/comments", "author": null, "committer": null, "parents": [{"sha": "cccb0908dd2ce9d5fc01c35169e00b35b30d47bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cccb0908dd2ce9d5fc01c35169e00b35b30d47bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cccb0908dd2ce9d5fc01c35169e00b35b30d47bd"}], "stats": {"total": 32, "additions": 27, "deletions": 5}, "files": [{"sha": "7d842969b56009405c15be19029c1e9d5551ccc7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0eafb3ece622ac104ac19aac4a509abf9aacd101/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0eafb3ece622ac104ac19aac4a509abf9aacd101/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0eafb3ece622ac104ac19aac4a509abf9aacd101", "patch": "@@ -1,3 +1,12 @@\n+2006-03-01  Ben Elliston  <bje@au.ibm.com>\n+\n+\t* mklibgcc.in: Add logic to handle $DFP_ENABLE and $DFP_CFLAGS.\n+\tCompile dfp-bit.c from the source directory using -DWIDTH and\n+\t$DFP_CFLAGS to control the compilation of that file, rather than\n+\tgenerating width-specific versions in the build directory.\n+\t* Makefile.in (libgcc.mk): Pass down DFP_ENABLE and DFP_CFLAGS.\n+\t(LIBGCC_DEPS): Replace $(D32PBIT) et al with config/dfp-bit.[hc].\n+\n 2006-02-28  Zack Weinberg  <zackw@panix.com>\n \n \t* doc/md.texi: Avoid use of @headitem so that makeinfo <4.7"}, {"sha": "d92e3dc20159088c69f82802d42d60ec42c5f916", "filename": "gcc/Makefile.in", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0eafb3ece622ac104ac19aac4a509abf9aacd101/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0eafb3ece622ac104ac19aac4a509abf9aacd101/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=0eafb3ece622ac104ac19aac4a509abf9aacd101", "patch": "@@ -1415,6 +1415,8 @@ libgcc.mk: config.status Makefile mklibgcc $(LIB2ADD) $(LIB2ADD_ST) specs \\\n \tDPBIT_FUNCS='$(DPBIT_FUNCS)' \\\n \tTPBIT='$(TPBIT)' \\\n \tTPBIT_FUNCS='$(TPBIT_FUNCS)' \\\n+\tDFP_ENABLE='$(DFP_ENABLE)' \\\n+\tDFP_CFLAGS='$(DFP_CFLAGS)' \\\n \tD32PBIT='$(D32PBIT)' \\\n \tD32PBIT_FUNCS='$(D32PBIT_FUNCS)' \\\n \tD64PBIT='$(D64PBIT)' \\\n@@ -1443,7 +1445,7 @@ LIBGCC_DEPS = $(GCC_PASSES) $(LANGUAGES) stmp-int-hdrs $(STMP_FIXPROTO) \\\n \tlibgcc.mk $(srcdir)/libgcc2.c $(srcdir)/libgcov.c $(TCONFIG_H) \\\n \t$(MACHMODE_H) longlong.h gbl-ctors.h config.status $(srcdir)/libgcc2.h \\\n \ttsystem.h $(FPBIT) $(DPBIT) $(TPBIT) $(LIB2ADD) \\\n-\t$(D32PBIT) $(D64PBIT) $(D128PBIT) \\\n+\tconfig/dfp-bit.h config/dfp-bit.c \\\n \t$(LIB2ADD_ST) $(LIB2ADDEH) $(LIB2ADDEHDEP) $(EXTRA_PARTS) \\\n \t$(srcdir)/config/$(LIB1ASMSRC) \\\n \t$(srcdir)/gcov-io.h $(srcdir)/gcov-io.c gcov-iov.h"}, {"sha": "8f67d4b0476bd7e8510c1203ba5e1dc8c602daf3", "filename": "gcc/mklibgcc.in", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0eafb3ece622ac104ac19aac4a509abf9aacd101/gcc%2Fmklibgcc.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0eafb3ece622ac104ac19aac4a509abf9aacd101/gcc%2Fmklibgcc.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmklibgcc.in?ref=0eafb3ece622ac104ac19aac4a509abf9aacd101", "patch": "@@ -25,6 +25,8 @@\n # FPBIT\n # FPBIT_FUNCS\n # LIB2_DIVMOD_FUNCS\n+# DFP_ENABLE\n+# DFP_CFLAGS\n # DPBIT\n # DPBIT_FUNCS\n # TPBIT\n@@ -368,6 +370,11 @@ for ml in $MULTILIBS; do\n   done\n \n   if [ \"@enable_decimal_float@\" = \"yes\" -a -z \"$libgcc_so\" ]; then\n+    # If $DFP_ENABLE is set, then we want all data type sizes.\n+    if [ \"$DFP_ENABLE\" ] ; then\n+\tD32PBIT=1; D64PBIT=1; D128PBIT=1\n+    fi\n+\n     # Bring in the DFP support code if D32PBIT, D64PBIT or D128PBIT are set.\n     if [ -n \"$D32PBIT\" -o -n \"$D64PBIT\" -o -n \"$D128PBIT\" ] ; then\n       dec_filenames=\"decContext decNumber decRound decLibrary decUtility\"\n@@ -396,14 +403,18 @@ for ml in $MULTILIBS; do\n       dpfuncs_var=\"${dpbit_var}_FUNCS\"\n       eval dpbit=\\$$dpbit_var\n       eval dpfuncs=\\$$dpfuncs_var\n+      case \"$dpbit_var\" in\n+\t  D32PBIT)  dpwidth=32 ;;\n+\t  D64PBIT)  dpwidth=64 ;;\n+\t  D128PBIT) dpwidth=128 ;;\n+      esac\n \n       if [ \"$dpbit\" ]; then\n         for name in $dpfuncs; do\n           out=\"libgcc/${dir}/${name}${objext}\"\n-\t  echo $out: $dpbit $fpbit_c_dep\n-\t  echo \"\t$gcc_compile\" -DFINE_GRAINED_LIBRARIES $flags -DL$name \\\n-\t    -c $dpbit -o $out\n-\n+\t  echo $out: config/dfp-bit.c $fpbit_c_dep\n+\t  echo \"\t$gcc_compile\" -DFINE_GRAINED_LIBRARIES $flags -DL$name -DWIDTH=$dpwidth \\\n+\t      $DFP_CFLAGS -c $\\(srcdir\\)/config/dfp-bit.c -o $out\n \t  echo $libgcc_a: $out\n         done\n       fi"}]}