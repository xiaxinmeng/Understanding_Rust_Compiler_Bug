{"sha": "99f8a411dc763471dcd73cef8b42663e3c64c3f8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTlmOGE0MTFkYzc2MzQ3MWRjZDczY2VmOGI0MjY2M2UzYzY0YzNmOA==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "dvorakz@suse.cz", "date": "2006-11-21T01:08:40Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2006-11-21T01:08:40Z"}, "message": "cfgloopmanip.c (add_loop, [...]): Do not set level of the loop.\n\n\t* cfgloopmanip.c (add_loop, duplicate_loop): Do not set level\n\tof the loop.\n\t* cfgloop.c (flow_loop_level_compute, flow_loops_level_compute):\n\tRemoved.\n\t(flow_loop_dump): Do not dump loop level.\n\t(flow_loops_find): Do not call flow_loops_level_compute.\n\t* cfgloop.h (struct loop): Remove level field.\n\nFrom-SVN: r119040", "tree": {"sha": "62f9209bb475165a417f48acb5220a1a6c098b40", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/62f9209bb475165a417f48acb5220a1a6c098b40"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/99f8a411dc763471dcd73cef8b42663e3c64c3f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99f8a411dc763471dcd73cef8b42663e3c64c3f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99f8a411dc763471dcd73cef8b42663e3c64c3f8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99f8a411dc763471dcd73cef8b42663e3c64c3f8/comments", "author": null, "committer": null, "parents": [{"sha": "ca83d38556d2c0ac60a369d42258fc0a39df86bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca83d38556d2c0ac60a369d42258fc0a39df86bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca83d38556d2c0ac60a369d42258fc0a39df86bf"}], "stats": {"total": 70, "additions": 13, "deletions": 57}, "files": [{"sha": "7f99e2255a7ebfbbf949a6979febbf083459c66c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99f8a411dc763471dcd73cef8b42663e3c64c3f8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99f8a411dc763471dcd73cef8b42663e3c64c3f8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=99f8a411dc763471dcd73cef8b42663e3c64c3f8", "patch": "@@ -1,3 +1,13 @@\n+2006-11-21  Zdenek Dvorak <dvorakz@suse.cz>\n+\n+\t* cfgloopmanip.c (add_loop, duplicate_loop): Do not set level\n+\tof the loop.\n+\t* cfgloop.c (flow_loop_level_compute, flow_loops_level_compute):\n+\tRemoved.\n+\t(flow_loop_dump): Do not dump loop level.\n+\t(flow_loops_find): Do not call flow_loops_level_compute.\n+\t* cfgloop.h (struct loop): Remove level field.\n+\n 2006-11-21  Zdenek Dvorak <dvorakz@suse.cz>\n \n \t* tree-ssa-loop-im.c (schedule_sm, determine_lsm_ref,"}, {"sha": "e00e6a62ea46907ea3b965bdc20c2a80a54037b1", "filename": "gcc/cfgloop.c", "status": "modified", "additions": 2, "deletions": 48, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99f8a411dc763471dcd73cef8b42663e3c64c3f8/gcc%2Fcfgloop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99f8a411dc763471dcd73cef8b42663e3c64c3f8/gcc%2Fcfgloop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgloop.c?ref=99f8a411dc763471dcd73cef8b42663e3c64c3f8", "patch": "@@ -41,8 +41,6 @@ Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA\n #define LATCH_EDGE(E) (*(int *) (E)->aux)\n \n static void flow_loops_cfg_dump (const struct loops *, FILE *);\n-static int flow_loop_level_compute (struct loop *);\n-static void flow_loops_level_compute (struct loops *);\n static void establish_preds (struct loop *);\n static void canonicalize_loop_headers (void);\n static bool glb_enum_p (basic_block, void *);\n@@ -110,9 +108,8 @@ flow_loop_dump (const struct loop *loop, FILE *file,\n \n   fprintf (file, \";;  header %d, latch %d\\n\",\n \t   loop->header->index, loop->latch->index);\n-  fprintf (file, \";;  depth %d, level %d, outer %ld\\n\",\n-\t   loop->depth, loop->level,\n-\t   (long) (loop->outer ? loop->outer->num : -1));\n+  fprintf (file, \";;  depth %d, outer %ld\\n\",\n+\t   loop->depth, (long) (loop->outer ? loop->outer->num : -1));\n \n   fprintf (file, \";;  nodes:\");\n   bbs = get_loop_body (loop);\n@@ -355,45 +352,6 @@ flow_loop_tree_node_remove (struct loop *loop)\n   loop->pred = NULL;\n }\n \n-/* Helper function to compute loop nesting depth and enclosed loop level\n-   for the natural loop specified by LOOP.  Returns the loop level.  */\n-\n-static int\n-flow_loop_level_compute (struct loop *loop)\n-{\n-  struct loop *inner;\n-  int level = 1;\n-\n-  if (! loop)\n-    return 0;\n-\n-  /* Traverse loop tree assigning depth and computing level as the\n-     maximum level of all the inner loops of this loop.  The loop\n-     level is equivalent to the height of the loop in the loop tree\n-     and corresponds to the number of enclosed loop levels (including\n-     itself).  */\n-  for (inner = loop->inner; inner; inner = inner->next)\n-    {\n-      int ilevel = flow_loop_level_compute (inner) + 1;\n-\n-      if (ilevel > level)\n-\tlevel = ilevel;\n-    }\n-\n-  loop->level = level;\n-  return level;\n-}\n-\n-/* Compute the loop nesting depth and enclosed loop level for the loop\n-   hierarchy tree specified by LOOPS.  Return the maximum enclosed loop\n-   level.  */\n-\n-static void\n-flow_loops_level_compute (struct loops *loops)\n-{\n-  flow_loop_level_compute (loops->tree_root);\n-}\n-\n /* A callback to update latch and header info for basic block JUMP created\n    by redirecting an edge.  */\n \n@@ -707,10 +665,6 @@ flow_loops_find (struct loops *loops)\n \t  loop->num_nodes = flow_loop_nodes_find (loop->header, loop);\n \t}\n \n-      /* Assign the loop nesting depth and enclosed loop level for each\n-\t loop.  */\n-      flow_loops_level_compute (loops);\n-\n       loops->num = num_loops;\n       initialize_loops_parallel_p (loops);\n "}, {"sha": "0874f54f832ebb759442a5bd03c4d7187c6eeca0", "filename": "gcc/cfgloop.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99f8a411dc763471dcd73cef8b42663e3c64c3f8/gcc%2Fcfgloop.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99f8a411dc763471dcd73cef8b42663e3c64c3f8/gcc%2Fcfgloop.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgloop.h?ref=99f8a411dc763471dcd73cef8b42663e3c64c3f8", "patch": "@@ -104,10 +104,6 @@ struct loop\n   /* Superloops of the loop.  */\n   struct loop **pred;\n \n-  /* The height of the loop (enclosed loop levels) within the loop\n-     hierarchy tree.  */\n-  int level;\n-\n   /* The outer (parent) loop or NULL if outermost loop.  */\n   struct loop *outer;\n "}, {"sha": "028db02afe32385f12c4c4664df04617d9c787db", "filename": "gcc/cfgloopmanip.c", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99f8a411dc763471dcd73cef8b42663e3c64c3f8/gcc%2Fcfgloopmanip.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99f8a411dc763471dcd73cef8b42663e3c64c3f8/gcc%2Fcfgloopmanip.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgloopmanip.c?ref=99f8a411dc763471dcd73cef8b42663e3c64c3f8", "patch": "@@ -379,7 +379,6 @@ add_loop (struct loops *loops, struct loop *loop, struct loop *outer)\n   /* Add it to loop structure.  */\n   place_new_loop (loops, loop);\n   flow_loop_tree_node_add (outer, loop);\n-  loop->level = 1;\n \n   /* Find its nodes.  */\n   bbs = XCNEWVEC (basic_block, n_basic_blocks);\n@@ -653,10 +652,7 @@ duplicate_loop (struct loops *loops, struct loop *loop, struct loop *target)\n   cloop = XCNEW (struct loop);\n   place_new_loop (loops, cloop);\n \n-  /* Initialize copied loop.  */\n-  cloop->level = loop->level;\n-\n-  /* Set it as copy of loop.  */\n+  /* Mark the new loop as copy of LOOP.  */\n   loop->copy = cloop;\n \n   /* Add it to target.  */"}]}