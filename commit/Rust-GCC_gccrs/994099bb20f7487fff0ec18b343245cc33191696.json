{"sha": "994099bb20f7487fff0ec18b343245cc33191696", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTk0MDk5YmIyMGY3NDg3ZmZmMGVjMThiMzQzMjQ1Y2MzMzE5MTY5Ng==", "commit": {"author": {"name": "David S. Miller", "email": "davem@pierdol.cobaltmicro.com", "date": "1998-08-22T00:11:24Z"}, "committer": {"name": "David S. Miller", "email": "davem@gcc.gnu.org", "date": "1998-08-22T00:11:24Z"}, "message": "sparc.md (TFmode splits): Handle destination registers being referenced in the address correctly.\n\n\t* config/sparc/sparc.md (TFmode splits): Handle destination\n\tregisters being referenced in the address correctly.\n\nFrom-SVN: r21901", "tree": {"sha": "fc4876e2233b0960b9ca3a698aa3735aaf83b426", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc4876e2233b0960b9ca3a698aa3735aaf83b426"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/994099bb20f7487fff0ec18b343245cc33191696", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/994099bb20f7487fff0ec18b343245cc33191696", "html_url": "https://github.com/Rust-GCC/gccrs/commit/994099bb20f7487fff0ec18b343245cc33191696", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/994099bb20f7487fff0ec18b343245cc33191696/comments", "author": null, "committer": null, "parents": [{"sha": "a00c936aaa8321a03b82ce0e394c8ebab4c6c9a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a00c936aaa8321a03b82ce0e394c8ebab4c6c9a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a00c936aaa8321a03b82ce0e394c8ebab4c6c9a4"}], "stats": {"total": 23, "additions": 21, "deletions": 2}, "files": [{"sha": "319d3145150a44cd27821ae89ab4b6c63d9b8393", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/994099bb20f7487fff0ec18b343245cc33191696/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/994099bb20f7487fff0ec18b343245cc33191696/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=994099bb20f7487fff0ec18b343245cc33191696", "patch": "@@ -1,3 +1,8 @@\n+Fri Aug 21 23:07:46 1998  David S. Miller  <davem@pierdol.cobaltmicro.com>\n+\n+\t* config/sparc/sparc.md (TFmode splits): Handle destination\n+\tregisters being referenced in the address correctly.\n+\n Fri Aug 21 19:31:31 1998  Alexandre Petit-Bianco <apbianco@cygnus.com>\n \n \t* tree.def (LABELED_BLOCK_EXPR, EXIT_BLOCK_EXPR): New tree nodes."}, {"sha": "9796ec794de5a50ddb63e629074cbd65bdd6cfda", "filename": "gcc/config/sparc/sparc.md", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/994099bb20f7487fff0ec18b343245cc33191696/gcc%2Fconfig%2Fsparc%2Fsparc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/994099bb20f7487fff0ec18b343245cc33191696/gcc%2Fconfig%2Fsparc%2Fsparc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.md?ref=994099bb20f7487fff0ec18b343245cc33191696", "patch": "@@ -3333,12 +3333,26 @@\n   rtx word1 = change_address (operands[1], DFmode,\n \t\t\t      plus_constant_for_output (XEXP (word0, 0), 8));\n   rtx dest1, dest2;\n+  int self_reference = reg_mentioned_p (operands[0],\n+                                        XEXP (XEXP (word1, 0), 0));\n \n   /* Ugly, but gen_highpart will crap out here for 32-bit targets.  */\n   dest1 = gen_rtx_SUBREG (DFmode, operands[0], WORDS_BIG_ENDIAN == 0);\n   dest2 = gen_rtx_SUBREG (DFmode, operands[0], WORDS_BIG_ENDIAN != 0);\n-  emit_insn (gen_movdf (dest1, word0));\n-  emit_insn (gen_movdf (dest2, word1));\n+\n+  /* Now output, ordering such that we don't clobber any registers\n+     mentioned in the address.  */\n+  if (self_reference != 0\n+      && WORDS_BIG_ENDIAN)\n+    {\n+      emit_insn (gen_movdf (dest2, word1));\n+      emit_insn (gen_movdf (dest1, word0));\n+    }\n+  else\n+   {\n+      emit_insn (gen_movdf (dest1, word0));\n+      emit_insn (gen_movdf (dest2, word1));\n+   }\n   DONE;\n }\")\n "}]}