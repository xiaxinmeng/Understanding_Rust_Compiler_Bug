{"sha": "6e8313feb2d60bb750f3e22198b3d80431db4db7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmU4MzEzZmViMmQ2MGJiNzUwZjNlMjIxOThiM2Q4MDQzMWRiNGRiNw==", "commit": {"author": {"name": "Andreas Schwab", "email": "schwab@suse.de", "date": "1999-09-27T08:43:01Z"}, "committer": {"name": "Andreas Schwab", "email": "schwab@gcc.gnu.org", "date": "1999-09-27T08:43:01Z"}, "message": "m68k.c (output_function_prologue, [...]): Use current_function_uses_pic_offset_table instead of regs_ever_live to decide...\n\n\t* config/m68k/m68k.c (output_function_prologue,\n\toutput_function_epilogue): Use\n\tcurrent_function_uses_pic_offset_table instead of regs_ever_live\n\tto decide whether to save/restore pic register.\n\t(legitimize_pic_address): Don't modify regs_ever_live any more.\n\nFrom-SVN: r29676", "tree": {"sha": "49acde22b5ed4fb7e42086dfc07c72d6bbe239ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/49acde22b5ed4fb7e42086dfc07c72d6bbe239ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e8313feb2d60bb750f3e22198b3d80431db4db7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e8313feb2d60bb750f3e22198b3d80431db4db7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e8313feb2d60bb750f3e22198b3d80431db4db7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e8313feb2d60bb750f3e22198b3d80431db4db7/comments", "author": {"login": "andreas-schwab", "id": 2175493, "node_id": "MDQ6VXNlcjIxNzU0OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2175493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreas-schwab", "html_url": "https://github.com/andreas-schwab", "followers_url": "https://api.github.com/users/andreas-schwab/followers", "following_url": "https://api.github.com/users/andreas-schwab/following{/other_user}", "gists_url": "https://api.github.com/users/andreas-schwab/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreas-schwab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreas-schwab/subscriptions", "organizations_url": "https://api.github.com/users/andreas-schwab/orgs", "repos_url": "https://api.github.com/users/andreas-schwab/repos", "events_url": "https://api.github.com/users/andreas-schwab/events{/privacy}", "received_events_url": "https://api.github.com/users/andreas-schwab/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cc52a736ffecf1a30d8b891c0e0292012e0d06b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc52a736ffecf1a30d8b891c0e0292012e0d06b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc52a736ffecf1a30d8b891c0e0292012e0d06b3"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "61efaa5c5f9f6fc98424da88e8da9e82e7d27d58", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e8313feb2d60bb750f3e22198b3d80431db4db7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e8313feb2d60bb750f3e22198b3d80431db4db7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6e8313feb2d60bb750f3e22198b3d80431db4db7", "patch": "@@ -1,3 +1,11 @@\n+Mon Sep 27 10:28:48 1999  Andreas Schwab  <schwab@suse.de>\n+\n+\t* config/m68k/m68k.c (output_function_prologue,\n+\toutput_function_epilogue): Use\n+\tcurrent_function_uses_pic_offset_table instead of regs_ever_live\n+\tto decide whether to save/restore pic register.\n+\t(legitimize_pic_address): Don't modify regs_ever_live any more.\n+\n Sun Sep 26 16:36:52 1999  Robert Lipe  (robertlipe@usa.net)\n \n \t* config/i386/dgux.h (SELECT_RTX_SECTION): Provide dummy argument"}, {"sha": "c2cc4ee47df46a22a792664893c0721e2e963df0", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e8313feb2d60bb750f3e22198b3d80431db4db7/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e8313feb2d60bb750f3e22198b3d80431db4db7/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=6e8313feb2d60bb750f3e22198b3d80431db4db7", "patch": "@@ -356,7 +356,7 @@ output_function_prologue (stream, size)\n       mask &= ~ (1 << (15 - FRAME_POINTER_REGNUM));\n       num_saved_regs--;\n     }\n-  if (flag_pic && regs_ever_live[PIC_OFFSET_TABLE_REGNUM])\n+  if (flag_pic && current_function_uses_pic_offset_table)\n     {\n       mask |= 1 << (15 - PIC_OFFSET_TABLE_REGNUM);\n       num_saved_regs++;\n@@ -568,7 +568,7 @@ output_function_epilogue (stream, size)\n         nregs++;\n \tmask |= 1 << regno;\n       }\n-  if (flag_pic && regs_ever_live[PIC_OFFSET_TABLE_REGNUM])\n+  if (flag_pic && current_function_uses_pic_offset_table)\n     {\n       nregs++;\n       mask |= 1 << PIC_OFFSET_TABLE_REGNUM;\n@@ -1334,8 +1334,6 @@ legitimize_pic_address (orig, mode, reg)\n \t\t\t     gen_rtx_PLUS (Pmode,\n \t\t\t\t\t   pic_offset_table_rtx, orig));\n       current_function_uses_pic_offset_table = 1;\n-      if (reload_in_progress)\n-\tregs_ever_live[PIC_OFFSET_TABLE_REGNUM] = 1;\n       RTX_UNCHANGING_P (pic_ref) = 1;\n       emit_move_insn (reg, pic_ref);\n       return reg;"}]}