{"sha": "e6fb44d8789be4734b6d9141ec26dfc57701523e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTZmYjQ0ZDg3ODliZTQ3MzRiNmQ5MTQxZWMyNmRmYzU3NzAxNTIzZQ==", "commit": {"author": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2014-10-05T18:44:46Z"}, "committer": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2014-10-05T18:44:46Z"}, "message": "re PR libstdc++/63456 (unordered_map incorrectly frees _M_single_bucket. Patch Included)\n\n2014-10-05  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n\n\tPR libstdc++/63456\n\t* include/bits/hashtable.h (_M_uses_single_bucket(__bucket_type*)): Test\n\tthe parameter.\n\t* testsuite/23_containers/unordered_set/63456.cc: New.\n\nFrom-SVN: r215905", "tree": {"sha": "19e0bfce6a8d6d907725b604c746450b22c995ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19e0bfce6a8d6d907725b604c746450b22c995ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e6fb44d8789be4734b6d9141ec26dfc57701523e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6fb44d8789be4734b6d9141ec26dfc57701523e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e6fb44d8789be4734b6d9141ec26dfc57701523e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6fb44d8789be4734b6d9141ec26dfc57701523e/comments", "author": null, "committer": null, "parents": [{"sha": "29c43c83ef425cbfd173df483b03b596ddf36570", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29c43c83ef425cbfd173df483b03b596ddf36570", "html_url": "https://github.com/Rust-GCC/gccrs/commit/29c43c83ef425cbfd173df483b03b596ddf36570"}], "stats": {"total": 43, "additions": 42, "deletions": 1}, "files": [{"sha": "1cc81da8aaee78ed85b6825dc25d9e4d4d27cb0d", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6fb44d8789be4734b6d9141ec26dfc57701523e/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6fb44d8789be4734b6d9141ec26dfc57701523e/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=e6fb44d8789be4734b6d9141ec26dfc57701523e", "patch": "@@ -1,3 +1,10 @@\n+2014-10-05  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n+\n+\tPR libstdc++/63456\n+\t* include/bits/hashtable.h (_M_uses_single_bucket(__bucket_type*)): Test\n+\tthe parameter.\n+\t* testsuite/23_containers/unordered_set/63456.cc: New.\n+\n 2014-10-03  Jonathan Wakely  <jwakely@redhat.com>\n \n \tPR libstdc++/63449"}, {"sha": "f35e7eadd1e3078d3ea1c2e8aed3d5276ebb92d9", "filename": "libstdc++-v3/include/bits/hashtable.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6fb44d8789be4734b6d9141ec26dfc57701523e/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fhashtable.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6fb44d8789be4734b6d9141ec26dfc57701523e/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fhashtable.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fhashtable.h?ref=e6fb44d8789be4734b6d9141ec26dfc57701523e", "patch": "@@ -326,7 +326,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n       bool\n       _M_uses_single_bucket(__bucket_type* __bkts) const\n-      { return __builtin_expect(_M_buckets == &_M_single_bucket, false); }\n+      { return __builtin_expect(__bkts == &_M_single_bucket, false); }\n \n       bool\n       _M_uses_single_bucket() const"}, {"sha": "eba363c00f6b05a046cc5d78610f3811ecfaf506", "filename": "libstdc++-v3/testsuite/23_containers/unordered_set/63456.cc", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6fb44d8789be4734b6d9141ec26dfc57701523e/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Funordered_set%2F63456.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6fb44d8789be4734b6d9141ec26dfc57701523e/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Funordered_set%2F63456.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Funordered_set%2F63456.cc?ref=e6fb44d8789be4734b6d9141ec26dfc57701523e", "patch": "@@ -0,0 +1,34 @@\n+// Copyright (C) 2014 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+// { dg-options \"-std=gnu++11\" }\n+\n+#include <unordered_set>\n+\n+void test01()\n+{\n+  std::unordered_set<int> s1, s2;\n+  s2.insert(2);\n+\n+  s1 = s2;\n+}\n+\n+int main()\n+{\n+  test01();\n+  return 0;\n+}"}]}