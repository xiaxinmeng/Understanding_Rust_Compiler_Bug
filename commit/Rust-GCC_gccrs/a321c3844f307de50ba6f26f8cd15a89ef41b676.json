{"sha": "a321c3844f307de50ba6f26f8cd15a89ef41b676", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTMyMWMzODQ0ZjMwN2RlNTBiYTZmMjZmOGNkMTVhODllZjQxYjY3Ng==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-10-13T18:29:36Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-10-13T18:29:36Z"}, "message": "tinfo2.cc (fast_compare): Remove.\n\n\t* tinfo2.cc (fast_compare): Remove.\n\t(before): Just use strcmp.\n\t* tinfo.cc (operator==): Just use strcmp.\n\t* decl.c (grokfndecl): Don't check for linkage in `extern \"C\"'\n\tdeclarations.\n\nFrom-SVN: r23057", "tree": {"sha": "e9dedc1e6bd521e1491bdf14f5b3da5541a261c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9dedc1e6bd521e1491bdf14f5b3da5541a261c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a321c3844f307de50ba6f26f8cd15a89ef41b676", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a321c3844f307de50ba6f26f8cd15a89ef41b676", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a321c3844f307de50ba6f26f8cd15a89ef41b676", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a321c3844f307de50ba6f26f8cd15a89ef41b676/comments", "author": null, "committer": null, "parents": [{"sha": "619aeb96118a16f7eced72de3d4606d04f8ddb3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/619aeb96118a16f7eced72de3d4606d04f8ddb3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/619aeb96118a16f7eced72de3d4606d04f8ddb3a"}], "stats": {"total": 32, "additions": 17, "deletions": 15}, "files": [{"sha": "053fb4b6ae60dbc9c79f526e6f38f63e569ccf86", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a321c3844f307de50ba6f26f8cd15a89ef41b676/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a321c3844f307de50ba6f26f8cd15a89ef41b676/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a321c3844f307de50ba6f26f8cd15a89ef41b676", "patch": "@@ -1,3 +1,14 @@\n+1998-10-13  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* tinfo2.cc (fast_compare): Remove.\n+\t(before): Just use strcmp.\n+\t* tinfo.cc (operator==): Just use strcmp.\n+\n+1998-10-13  Klaus-Georg Adams  <Klaus-Georg.Adams@chemie.uni-karlsruhe.de>\n+\n+\t* decl.c (grokfndecl): Don't check for linkage in `extern \"C\"'\n+\tdeclarations.\n+\n 1998-10-13  Mark Mitchell  <mark@markmitchell.com>\n \n \t* cp-tree.h (specializations_of_same_template_p): Remove."}, {"sha": "91569d07b27c728c4ed14f0f77220503d7632c40", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a321c3844f307de50ba6f26f8cd15a89ef41b676/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a321c3844f307de50ba6f26f8cd15a89ef41b676/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=a321c3844f307de50ba6f26f8cd15a89ef41b676", "patch": "@@ -8024,7 +8024,8 @@ grokfndecl (ctype, type, declarator, orig_declarator, virtualp, flags, quals,\n       t = no_linkage_check (TREE_TYPE (decl));\n       if (t)\n \t{\n-\t  if (ANON_AGGRNAME_P (TYPE_IDENTIFIER (t)))\n+\t  if (ANON_AGGRNAME_P (TYPE_IDENTIFIER (t))\n+\t      && DECL_LANGUAGE (decl) != lang_c)\n \t    cp_pedwarn (\"non-local function `%#D' uses anonymous type\", decl);\n \t  else\n \t    cp_pedwarn (\"non-local function `%#D' uses local type `%T'\","}, {"sha": "23750ac93103013e29b221f3c633807ed5e94ad0", "filename": "gcc/cp/tinfo.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a321c3844f307de50ba6f26f8cd15a89ef41b676/gcc%2Fcp%2Ftinfo.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a321c3844f307de50ba6f26f8cd15a89ef41b676/gcc%2Fcp%2Ftinfo.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftinfo.cc?ref=a321c3844f307de50ba6f26f8cd15a89ef41b676", "patch": "@@ -28,6 +28,7 @@\n #pragma implementation \"typeinfo\"\n \n #include <stddef.h>\n+#include <string.h>\n #include \"tinfo.h\"\n #include \"new\"\t\t\t// for placement new\n \n@@ -43,7 +44,7 @@ std::type_info::\n bool type_info::\n operator== (const type_info& arg) const\n {\n-  return (&arg == this) || (fast_compare (name (), arg.name ()) == 0);\n+  return (&arg == this) || (strcmp (name (), arg.name ()) == 0);\n }\n \n extern \"C\" void"}, {"sha": "e4d78fd949a0d57674529a3918edb64460eb3af7", "filename": "gcc/cp/tinfo2.cc", "status": "modified", "additions": 2, "deletions": 13, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a321c3844f307de50ba6f26f8cd15a89ef41b676/gcc%2Fcp%2Ftinfo2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a321c3844f307de50ba6f26f8cd15a89ef41b676/gcc%2Fcp%2Ftinfo2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftinfo2.cc?ref=a321c3844f307de50ba6f26f8cd15a89ef41b676", "patch": "@@ -26,27 +26,16 @@\n // the executable file might be covered by the GNU General Public License.\n \n #include <stddef.h>\n+#include <string.h>\n #include \"tinfo.h\"\n #include \"new\"\t\t\t// for placement new\n \n using std::type_info;\n-// service function for comparing types by name.\n-\n-static inline int\n-fast_compare (const char *n1, const char *n2) {\n-  int c;\n-  if (n1 == n2) return 0;\n-  if (n1 == 0) return *n2;\n-  else if (n2 == 0) return *n1;\n-\n-  c = (int)*n1++ - (int)*n2++;\n-  return c == 0 ? strcmp (n1, n2) : c;\n-};\n \n bool\n type_info::before (const type_info &arg) const\n {\n-  return fast_compare (name (), arg.name ()) < 0;\n+  return strcmp (name (), arg.name ()) < 0;\n }\n \n // type info for pointer type."}]}