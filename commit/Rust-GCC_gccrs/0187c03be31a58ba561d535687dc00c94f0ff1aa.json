{"sha": "0187c03be31a58ba561d535687dc00c94f0ff1aa", "node_id": "C_kwDOANBUbNoAKDAxODdjMDNiZTMxYTU4YmE1NjFkNTM1Njg3ZGMwMGM5NGYwZmYxYWE", "commit": {"author": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2021-10-30T15:00:49Z"}, "committer": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2021-11-01T13:14:42Z"}, "message": "Don't register nonsensical relations.\n\n\tgcc/\n\tPR tree-optimization/103003\n\t* value-relation.cc (dom_oracle::register_relation): If the 2\n\tssa names are the same, don't register any relation.\n\n\tgcc/testsuite/\n\t* gcc.dg/pr103003.c: New.", "tree": {"sha": "84413251c8082743556d779ae4f50704371fdb5d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/84413251c8082743556d779ae4f50704371fdb5d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0187c03be31a58ba561d535687dc00c94f0ff1aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0187c03be31a58ba561d535687dc00c94f0ff1aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0187c03be31a58ba561d535687dc00c94f0ff1aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0187c03be31a58ba561d535687dc00c94f0ff1aa/comments", "author": null, "committer": null, "parents": [{"sha": "14d31404053c1818044882f8682a20de1526b266", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14d31404053c1818044882f8682a20de1526b266", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14d31404053c1818044882f8682a20de1526b266"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "d3d65f8b6a64924aa8287739ace706fbe5fb7d7a", "filename": "gcc/testsuite/gcc.dg/pr103003.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0187c03be31a58ba561d535687dc00c94f0ff1aa/gcc%2Ftestsuite%2Fgcc.dg%2Fpr103003.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0187c03be31a58ba561d535687dc00c94f0ff1aa/gcc%2Ftestsuite%2Fgcc.dg%2Fpr103003.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr103003.c?ref=0187c03be31a58ba561d535687dc00c94f0ff1aa", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+typedef char int8_t;\n+int8_t c_4, uli_5;\n+unsigned short us_6;\n+void func_1() {\n+  int uli_9;\n+  short ptr_16ptr_11 = &uli_9; /* { dg-warning \"initialization of*\" } */\n+  for (; us_6 <= 6;)\n+    if ((us_6 *= uli_9) < (uli_5 || 0) ?: ((c_4 = us_6) >= us_6) - uli_5)\n+      uli_9 = 9;\n+}"}, {"sha": "f1e46d38de1ab422c029e720211fd444e972d984", "filename": "gcc/value-relation.cc", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0187c03be31a58ba561d535687dc00c94f0ff1aa/gcc%2Fvalue-relation.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0187c03be31a58ba561d535687dc00c94f0ff1aa/gcc%2Fvalue-relation.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvalue-relation.cc?ref=0187c03be31a58ba561d535687dc00c94f0ff1aa", "patch": "@@ -877,7 +877,13 @@ relation_oracle::register_edge (edge e, relation_kind k, tree op1, tree op2)\n void\n dom_oracle::register_relation (basic_block bb, relation_kind k, tree op1,\n \t\t\t       tree op2)\n-{  // Equivalencies are handled by the equivalence oracle.\n+{\n+  // If the 2 ssa_names are the same, do nothing.  An equivalence is implied,\n+  // and no other relation makes sense.\n+  if (op1 == op2)\n+    return;\n+\n+  // Equivalencies are handled by the equivalence oracle.\n   if (k == EQ_EXPR)\n     equiv_oracle::register_relation (bb, k, op1, op2);\n   else"}]}