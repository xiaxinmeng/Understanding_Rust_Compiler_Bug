{"sha": "a9a32e564de826c3526f1a0626f8115588a5452b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTlhMzJlNTY0ZGU4MjZjMzUyNmYxYTA2MjZmODExNTU4OGE1NDUyYg==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2019-01-06T16:44:51Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2019-01-06T16:44:51Z"}, "message": "opts.c (enable_fdo_optimizations): Enable version-loops-for-strides...\n\n\n\t* opts.c (enable_fdo_optimizations): Enable\n\tversion-loops-for-strides, loop-interchange, unrol-and-jam\n\tand tree-loop-distribution.\n\t* invoke.texi: Document newly enabled options.\n\nFrom-SVN: r267611", "tree": {"sha": "b3fb7c96f754c1d1b86df30fb3935ea9a0a6afb7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b3fb7c96f754c1d1b86df30fb3935ea9a0a6afb7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9a32e564de826c3526f1a0626f8115588a5452b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9a32e564de826c3526f1a0626f8115588a5452b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9a32e564de826c3526f1a0626f8115588a5452b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9a32e564de826c3526f1a0626f8115588a5452b/comments", "author": null, "committer": null, "parents": [{"sha": "13b1afe4defcc3eeaa50fe10eb2f2768e95696ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13b1afe4defcc3eeaa50fe10eb2f2768e95696ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13b1afe4defcc3eeaa50fe10eb2f2768e95696ec"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "0ec2e3463ba4ee03b87548699ea00c19924ba4c3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9a32e564de826c3526f1a0626f8115588a5452b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9a32e564de826c3526f1a0626f8115588a5452b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a9a32e564de826c3526f1a0626f8115588a5452b", "patch": "@@ -1,3 +1,10 @@\n+2019-01-05  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* opts.c (enable_fdo_optimizations): Enable\n+\tversion-loops-for-strides, loop-interchange, unrol-and-jam\n+\tand tree-loop-distribution.\n+\t* invoke.texi: Document newly enabled options.\n+\n 2019-01-05  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* doc/invoke.texi (max-inline-insns-small): New parameters."}, {"sha": "59a74afed8327b5437f89121af16565df59ccfae", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9a32e564de826c3526f1a0626f8115588a5452b/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9a32e564de826c3526f1a0626f8115588a5452b/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=a9a32e564de826c3526f1a0626f8115588a5452b", "patch": "@@ -9499,6 +9499,8 @@ DO I = 1, N\n    D(I) = E(I) * F\n ENDDO\n @end smallexample\n+This flag is enabled by default at @option{-O3}.\n+It is also enabled by @option{-fprofile-use} and @option{-fauto-profile}.\n \n @item -ftree-loop-distribute-patterns\n @opindex ftree-loop-distribute-patterns\n@@ -9524,6 +9526,8 @@ DO I = 1, N\n ENDDO\n @end smallexample\n and the initialization loop is transformed into a call to memset zero.\n+This flag is enabled by default at @option{-O3}.\n+It is also enabled by @option{-fprofile-use} and @option{-fauto-profile}.\n \n @item -floop-interchange\n @opindex floop-interchange\n@@ -9544,12 +9548,14 @@ for (int i = 0; i < N; i++)\n       c[i][j] = c[i][j] + a[i][k]*b[k][j];\n @end smallexample\n This flag is enabled by default at @option{-O3}.\n+It is also enabled by @option{-fprofile-use} and @option{-fauto-profile}.\n \n @item -floop-unroll-and-jam\n @opindex floop-unroll-and-jam\n Apply unroll and jam transformations on feasible loops.  In a loop\n nest this unrolls the outer loop by some factor and fuses the resulting\n multiple inner loops.  This flag is enabled by default at @option{-O3}.\n+It is also enabled by @option{-fprofile-use} and @option{-fauto-profile}.\n \n @item -ftree-loop-im\n @opindex ftree-loop-im\n@@ -10804,6 +10810,8 @@ else\n \n This is particularly useful for assumed-shape arrays in Fortran where\n (for example) it allows better vectorization assuming contiguous accesses.\n+This flag is enabled by default at @option{-O3}.\n+It is also enabled by @option{-fprofile-use} and @option{-fauto-profile}.\n \n @item -ffunction-sections\n @itemx -fdata-sections"}, {"sha": "79b7279c024c295ada3fd1f67b269617816b5b81", "filename": "gcc/opts.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9a32e564de826c3526f1a0626f8115588a5452b/gcc%2Fopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9a32e564de826c3526f1a0626f8115588a5452b/gcc%2Fopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts.c?ref=a9a32e564de826c3526f1a0626f8115588a5452b", "patch": "@@ -1708,10 +1708,18 @@ enable_fdo_optimizations (struct gcc_options *opts,\n     opts->x_flag_tree_loop_vectorize = value;\n   if (!opts_set->x_flag_tree_slp_vectorize)\n     opts->x_flag_tree_slp_vectorize = value;\n+  if (!opts_set->x_flag_version_loops_for_strides)\n+    opts->x_flag_version_loops_for_strides = value;\n   if (!opts_set->x_flag_vect_cost_model)\n     opts->x_flag_vect_cost_model = VECT_COST_MODEL_DYNAMIC;\n   if (!opts_set->x_flag_tree_loop_distribute_patterns)\n     opts->x_flag_tree_loop_distribute_patterns = value;\n+  if (!opts_set->x_flag_loop_interchange)\n+    opts->x_flag_loop_interchange = value;\n+  if (!opts_set->x_flag_unroll_jam)\n+    opts->x_flag_unroll_jam = value;\n+  if (!opts_set->x_flag_tree_loop_distribution)\n+    opts->x_flag_tree_loop_distribution = value;\n }\n \n /* -f{,no-}sanitize{,-recover}= suboptions.  */"}]}