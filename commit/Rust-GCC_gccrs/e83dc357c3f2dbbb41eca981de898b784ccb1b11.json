{"sha": "e83dc357c3f2dbbb41eca981de898b784ccb1b11", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTgzZGMzNTdjM2YyZGJiYjQxZWNhOTgxZGU4OThiNzg0Y2NiMWIxMQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-05-18T17:49:41Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-05-18T17:49:41Z"}, "message": "(safe_read): If MAX_READ_LEN is defined, limit incremental read\nattempts to that amount.\n\nFrom-SVN: r14093", "tree": {"sha": "a356b63a14463b2f7724655abdfa746f312c9e60", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a356b63a14463b2f7724655abdfa746f312c9e60"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e83dc357c3f2dbbb41eca981de898b784ccb1b11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e83dc357c3f2dbbb41eca981de898b784ccb1b11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e83dc357c3f2dbbb41eca981de898b784ccb1b11", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e83dc357c3f2dbbb41eca981de898b784ccb1b11/comments", "author": null, "committer": null, "parents": [{"sha": "9b7311fe5f93590710bd0b586412867a2edea26b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b7311fe5f93590710bd0b586412867a2edea26b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b7311fe5f93590710bd0b586412867a2edea26b"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "50ef8caae34fda34167e0bddafa4ab7d544650b9", "filename": "gcc/cpplib.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e83dc357c3f2dbbb41eca981de898b784ccb1b11/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e83dc357c3f2dbbb41eca981de898b784ccb1b11/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=e83dc357c3f2dbbb41eca981de898b784ccb1b11", "patch": "@@ -7197,7 +7197,8 @@ file_size_and_mode (fd, mode_pointer, size_pointer)\n }\n \n /* Read LEN bytes at PTR from descriptor DESC, for file FILENAME,\n-   retrying if necessary.  Return a negative value if an error occurs,\n+   retrying if necessary.  If MAX_READ_LEN is defined, read at most\n+   that bytes at a time.  Return a negative value if an error occurs,\n    otherwise return the actual number of bytes read,\n    which must be LEN unless end-of-file was reached.  */\n \n@@ -7207,9 +7208,16 @@ safe_read (desc, ptr, len)\n      char *ptr;\n      int len;\n {\n-  int left = len;\n+  int left, rcount, nchars;\n+\n+  left = len;\n   while (left > 0) {\n-    int nchars = read (desc, ptr, left);\n+    rcount = left;\n+#ifdef MAX_READ_LEN\n+    if (rcount > MAX_READ_LEN)\n+      rcount = MAX_READ_LEN;\n+#endif\n+    nchars = read (desc, ptr, rcount);\n     if (nchars < 0)\n       {\n #ifdef EINTR"}]}