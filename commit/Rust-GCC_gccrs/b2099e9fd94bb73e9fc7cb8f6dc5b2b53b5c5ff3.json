{"sha": "b2099e9fd94bb73e9fc7cb8f6dc5b2b53b5c5ff3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjIwOTllOWZkOTRiYjczZTlmYzdjYjhmNmRjNWIyYjUzYjVjNWZmMw==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-11-13T19:11:02Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-11-16T11:54:22Z"}, "message": "libstdc++: Fix error shown during Solaris build\n\nCurrently this is shown when building libstdc++ on Solaris:\n\n-lrt: open: No such file or directory\n\nThe error comes from the make_sunver.pl script which tries to open each\nof its arguments. The arguments are passed by this make rule:\n\n\tperl ${glibcxx_srcdir}/scripts/make_exports.pl \\\n\t  libstdc++-symbols.ver \\\n\t  $(libstdc___la_OBJECTS:%.lo=.libs/%.o) \\\n\t `echo $(libstdc___la_LIBADD) | \\\n\t    sed 's,/\\([^/.]*\\)\\.la,/.libs/\\1.a,g'` \\\n\t > $@ || (rm -f $@ ; exit 1)\n\nThe $(libstdc___la_LIBADD) variable includes $(GLIBCXX_LIBS) which\ncontains -lrt on Solaris.\n\nThis patch adds another sed script to filter -l arguments from the echo\ncommand. In order to reliably match ' -l[^ ]* ' the echo arguments are\nquoted and a space added before and after them. This might be overkill\njust to remove -lrt from the start of the string, but should be robust\nin case other -l arguments are added to $(GLIBCXX_LIBS), or in case the\n$(libstdc___la_LIBADD) libraries are reordered.\n\nlibstdc++-v3/ChangeLog:\n\n\t* src/Makefile.am (libstdc++-symbols.ver-sun): Remove -lrt from\n\targuments passed to make_sunver.pl script.\n\t* src/Makefile.in: Regenerate.", "tree": {"sha": "fba240fc2b258a943a0a328fbeeade3a99287508", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fba240fc2b258a943a0a328fbeeade3a99287508"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b2099e9fd94bb73e9fc7cb8f6dc5b2b53b5c5ff3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2099e9fd94bb73e9fc7cb8f6dc5b2b53b5c5ff3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2099e9fd94bb73e9fc7cb8f6dc5b2b53b5c5ff3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2099e9fd94bb73e9fc7cb8f6dc5b2b53b5c5ff3/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "82e44f5ce8c1b4f9732aa4c460bdf2e5138a8af4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82e44f5ce8c1b4f9732aa4c460bdf2e5138a8af4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82e44f5ce8c1b4f9732aa4c460bdf2e5138a8af4"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "21b6db7fb1c3accf9dfccab3db5a7577264e0ce6", "filename": "libstdc++-v3/src/Makefile.am", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2099e9fd94bb73e9fc7cb8f6dc5b2b53b5c5ff3/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2099e9fd94bb73e9fc7cb8f6dc5b2b53b5c5ff3/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2FMakefile.am?ref=b2099e9fd94bb73e9fc7cb8f6dc5b2b53b5c5ff3", "patch": "@@ -269,8 +269,8 @@ libstdc++-symbols.ver-sun : libstdc++-symbols.ver \\\n \tperl $(toplevel_srcdir)/contrib/make_sunver.pl \\\n \t  libstdc++-symbols.ver \\\n \t  $(libstdc___la_OBJECTS:%.lo=.libs/%.o) \\\n-\t `echo $(libstdc___la_LIBADD) | \\\n-\t    sed 's,/\\([^/.]*\\)\\.la,/.libs/\\1.a,g'` \\\n+\t `echo ' $(libstdc___la_LIBADD) ' | \\\n+\t    sed -e 's,/\\([^/.]*\\)\\.la,/.libs/\\1.a,g' -e 's/ -l[^ ]* / /'` \\\n \t > $@ || (rm -f $@ ; exit 1)\n endif\n if ENABLE_SYMVERS_DARWIN"}, {"sha": "e7ccdaeceab11e8e7b6d189b6f6ad579dfbadd0f", "filename": "libstdc++-v3/src/Makefile.in", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2099e9fd94bb73e9fc7cb8f6dc5b2b53b5c5ff3/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2099e9fd94bb73e9fc7cb8f6dc5b2b53b5c5ff3/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in?ref=b2099e9fd94bb73e9fc7cb8f6dc5b2b53b5c5ff3", "patch": "@@ -1022,8 +1022,8 @@ compatibility-condvar.o: compatibility-condvar.cc\n @ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@\tperl $(toplevel_srcdir)/contrib/make_sunver.pl \\\n @ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@\t  libstdc++-symbols.ver \\\n @ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@\t  $(libstdc___la_OBJECTS:%.lo=.libs/%.o) \\\n-@ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@\t `echo $(libstdc___la_LIBADD) | \\\n-@ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@\t    sed 's,/\\([^/.]*\\)\\.la,/.libs/\\1.a,g'` \\\n+@ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@\t `echo ' $(libstdc___la_LIBADD) ' | \\\n+@ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@\t    sed -e 's,/\\([^/.]*\\)\\.la,/.libs/\\1.a,g' -e 's/ -l[^ ]* / /'` \\\n @ENABLE_SYMVERS_SUN_TRUE@@ENABLE_SYMVERS_TRUE@\t > $@ || (rm -f $@ ; exit 1)\n @ENABLE_SYMVERS_DARWIN_TRUE@@ENABLE_SYMVERS_TRUE@libstdc++-symbols.explist : libstdc++-symbols.ver \\\n @ENABLE_SYMVERS_DARWIN_TRUE@@ENABLE_SYMVERS_TRUE@\t\t${glibcxx_srcdir}/scripts/make_exports.pl \\"}]}