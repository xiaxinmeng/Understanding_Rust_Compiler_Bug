{"sha": "f55b94653531277c15fbda2a69b5fa61dccbd589", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjU1Yjk0NjUzNTMxMjc3YzE1ZmJkYTJhNjliNWZhNjFkY2NiZDU4OQ==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2005-11-02T23:06:26Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2005-11-02T23:06:26Z"}, "message": "re PR target/24600 (unrecognizable instruction)\n\nChangeLog:\n\n\tPR target/24600\n\t* loop.c (loop_givs_rescan): Use force_operand to expand\n\tcomplex GIVs.\n\ntestsuite/ChangeLog:\n\n\tPR target/24600\n\t* gcc.dg/pr24600.c: New test.\n\nFrom-SVN: r106404", "tree": {"sha": "676c9dc6ae244c11a41cdeb64a78997e9e74f62b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/676c9dc6ae244c11a41cdeb64a78997e9e74f62b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f55b94653531277c15fbda2a69b5fa61dccbd589", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f55b94653531277c15fbda2a69b5fa61dccbd589", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f55b94653531277c15fbda2a69b5fa61dccbd589", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f55b94653531277c15fbda2a69b5fa61dccbd589/comments", "author": null, "committer": null, "parents": [{"sha": "3532623302b910ef78cc8eb024d59224e3ada4e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3532623302b910ef78cc8eb024d59224e3ada4e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3532623302b910ef78cc8eb024d59224e3ada4e5"}], "stats": {"total": 40, "additions": 37, "deletions": 3}, "files": [{"sha": "e590fffa0b21578ad4fedf16d9ed27743e724a04", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f55b94653531277c15fbda2a69b5fa61dccbd589/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f55b94653531277c15fbda2a69b5fa61dccbd589/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f55b94653531277c15fbda2a69b5fa61dccbd589", "patch": "@@ -1,3 +1,9 @@\n+2005-11-02  Ulrich Weigand  <uweigand@de.ibm.com>\n+\n+\tPR target/24600\n+\t* loop.c (loop_givs_rescan): Use force_operand to expand\n+\tcomplex GIVs.\n+\n 2005-11-02  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \tPR 22429"}, {"sha": "6df63026ab833a88b3542239997b512037d65c18", "filename": "gcc/loop.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f55b94653531277c15fbda2a69b5fa61dccbd589/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f55b94653531277c15fbda2a69b5fa61dccbd589/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=f55b94653531277c15fbda2a69b5fa61dccbd589", "patch": "@@ -5497,9 +5497,16 @@ loop_givs_rescan (struct loop *loop, struct iv_class *bl, rtx *reg_map)\n \t  /* Not replaceable; emit an insn to set the original\n \t     giv reg from the reduced giv.  */\n \t  else if (REG_P (*v->location))\n-\t    loop_insn_emit_before (loop, 0, v->insn,\n-\t\t\t\t   gen_move_insn (*v->location,\n-\t\t\t\t\t\t  v->new_reg));\n+\t    {\n+\t      rtx tem;\n+\t      start_sequence ();\n+\t      tem = force_operand (v->new_reg, *v->location);\n+\t      if (tem != *v->location)\n+\t\temit_move_insn (*v->location, tem);\n+\t      tem = get_insns ();\n+\t      end_sequence ();\n+\t      loop_insn_emit_before (loop, 0, v->insn, tem);\n+\t    }\n \t  else if (GET_CODE (*v->location) == PLUS\n \t\t   && REG_P (XEXP (*v->location, 0))\n \t\t   && CONSTANT_P (XEXP (*v->location, 1)))"}, {"sha": "b0e73c3b9c7812c21739c0b56ce99963f11d2bfd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f55b94653531277c15fbda2a69b5fa61dccbd589/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f55b94653531277c15fbda2a69b5fa61dccbd589/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f55b94653531277c15fbda2a69b5fa61dccbd589", "patch": "@@ -1,3 +1,8 @@\n+2005-11-02  Ulrich Weigand  <uweigand@de.ibm.com>\n+\n+\tPR target/24600\n+\t* gcc.dg/pr24600.c: New test.\n+\n 2005-11-02  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/19253"}, {"sha": "62bb7cad60012cebb8729bbb8f8567d79e7c4f97", "filename": "gcc/testsuite/gcc.dg/pr24600.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f55b94653531277c15fbda2a69b5fa61dccbd589/gcc%2Ftestsuite%2Fgcc.dg%2Fpr24600.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f55b94653531277c15fbda2a69b5fa61dccbd589/gcc%2Ftestsuite%2Fgcc.dg%2Fpr24600.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr24600.c?ref=f55b94653531277c15fbda2a69b5fa61dccbd589", "patch": "@@ -0,0 +1,16 @@\n+/* This used to ICE on s390 due to a old-loop bug.  */\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+char *strcpy (char *dest, const char *src);\n+\n+void test (char *Line, int len)\n+{\n+  int z;\n+\n+  for (z = 1; z <= len; z++)\n+    if (Line[z - 1])\n+      strcpy (Line + z + 1, Line);\n+}\n+"}]}