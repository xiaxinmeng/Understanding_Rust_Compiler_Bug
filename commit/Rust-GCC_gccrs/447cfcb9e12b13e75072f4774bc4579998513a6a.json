{"sha": "447cfcb9e12b13e75072f4774bc4579998513a6a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQ3Y2ZjYjllMTJiMTNlNzUwNzJmNDc3NGJjNDU3OTk5ODUxM2E2YQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-09-20T21:26:06Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-09-20T21:26:06Z"}, "message": "cp-tree.h (finish_stmt_expr): Change prototype.\n\n\t* cp-tree.h (finish_stmt_expr): Change prototype.\n\t* expr.c (cplus_expand_expr): Adjust call accordingly.\n\t* init.c (finish_init_stmts): Likewise.\n\t* parse.y (primary): Likewise.\n\t* pt.c (tsubst_copy): Likewise.\n\t* semantics.c (finish_stmt_expr): Don't take two parameters.\n\tDon't remove generated BLOCKs from the block-tree.\n\nFrom-SVN: r29533", "tree": {"sha": "6e40d5372fb2d68b923e86b1e69f592b51bfac53", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6e40d5372fb2d68b923e86b1e69f592b51bfac53"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/447cfcb9e12b13e75072f4774bc4579998513a6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/447cfcb9e12b13e75072f4774bc4579998513a6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/447cfcb9e12b13e75072f4774bc4579998513a6a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/447cfcb9e12b13e75072f4774bc4579998513a6a/comments", "author": null, "committer": null, "parents": [{"sha": "ea003f6d7c5c6c58661582cd6d040202a176e888", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea003f6d7c5c6c58661582cd6d040202a176e888", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea003f6d7c5c6c58661582cd6d040202a176e888"}], "stats": {"total": 38, "additions": 27, "deletions": 11}, "files": [{"sha": "624e01cba31c4ee33422e001034f331114fb66d2", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=447cfcb9e12b13e75072f4774bc4579998513a6a", "patch": "@@ -1,5 +1,13 @@\n 1999-09-20  Mark Mitchell  <mark@codesourcery.com>\n \n+\t* cp-tree.h (finish_stmt_expr): Change prototype.\n+\t* expr.c (cplus_expand_expr): Adjust call accordingly.\n+\t* init.c (finish_init_stmts): Likewise.\n+\t* parse.y (primary): Likewise.\n+\t* pt.c (tsubst_copy): Likewise.\n+\t* semantics.c (finish_stmt_expr): Don't take two parameters.\n+\tDon't remove generated BLOCKs from the block-tree.\n+\n \tRemove support for assigning to `this'.\n \t* NEWS: Note that fact.\n \t* class.c (build_vbase_path): Don't check flag_this_is_variable."}, {"sha": "8744b7fdc17ce2d51f92cd9132eec8c39dc15bc1", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=447cfcb9e12b13e75072f4774bc4579998513a6a", "patch": "@@ -3674,7 +3674,7 @@ extern void finish_label_decl                   PROTO((tree));\n extern void finish_subobject                    PROTO((tree));\n extern tree finish_parenthesized_expr           PROTO((tree));\n extern tree begin_stmt_expr                     PROTO((void));\n-extern tree finish_stmt_expr                    PROTO((tree, tree));\n+extern tree finish_stmt_expr                    PROTO((tree));\n extern tree finish_call_expr                    PROTO((tree, tree, int));\n extern tree finish_increment_expr               PROTO((tree, enum tree_code));\n extern tree finish_this_expr                    PROTO((void));"}, {"sha": "0eb5de4d03efb9b100c8cc1454b3a0603f230eef", "filename": "gcc/cp/expr.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fexpr.c?ref=447cfcb9e12b13e75072f4774bc4579998513a6a", "patch": "@@ -245,8 +245,8 @@ cplus_expand_expr (exp, target, tmode, modifier)\n     case STMT_EXPR:\n       {\n \ttree rtl_expr = begin_stmt_expr ();\n-\ttree block = expand_stmt (STMT_EXPR_STMT (exp));\n-\tfinish_stmt_expr (rtl_expr, block);\n+\texpand_stmt (STMT_EXPR_STMT (exp));\n+\tfinish_stmt_expr (rtl_expr);\n \treturn expand_expr (rtl_expr, target, tmode, modifier);\n       }\n       break;"}, {"sha": "c98324ee036988667a884eb7cf8bd7a79199bd7e", "filename": "gcc/cp/init.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=447cfcb9e12b13e75072f4774bc4579998513a6a", "patch": "@@ -990,10 +990,8 @@ finish_init_stmts (stmt_expr, compound_stmt)\n      tree compound_stmt;\n {\n   pop_momentary ();\n-  stmt_expr \n-    = finish_stmt_expr (stmt_expr,\n-\t\t\tfinish_compound_stmt (/*has_no_scope=*/1, \n-\t\t\t\t\t      compound_stmt));\n+  finish_compound_stmt (/*has_no_scope=*/1, compound_stmt);\n+  stmt_expr = finish_stmt_expr (stmt_expr);\n \n   /* To avoid spurious warnings about unused values, we set \n      TREE_USED.  */"}, {"sha": "c3892eda90fa7bf3070b1d8522116a50bfbefabf", "filename": "gcc/cp/parse.y", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparse.y?ref=447cfcb9e12b13e75072f4774bc4579998513a6a", "patch": "@@ -1446,7 +1446,7 @@ primary:\n \t\t  $<ttype>$ = begin_stmt_expr (); \n \t\t}\n \t  compstmt ')'\n-               { $$ = finish_stmt_expr ($<ttype>2, $3); }\n+               { $$ = finish_stmt_expr ($<ttype>2); }\n         /* Koenig lookup support\n            We could store lastiddecl in $1 to avoid another lookup,\n            but that would result in many additional reduce/reduce conflicts. */"}, {"sha": "3fca3d87e6db441bc36e7d2b615761f0552b9cbf", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=447cfcb9e12b13e75072f4774bc4579998513a6a", "patch": "@@ -7085,9 +7085,9 @@ tsubst_copy (t, args, complain, in_decl)\n       if (!processing_template_decl)\n \t{\n \t  tree rtl_expr = begin_stmt_expr ();\n-\t  tree block = tsubst_expr (STMT_EXPR_STMT (t), args,\n-\t\t\t\t    complain, in_decl);\n-\t  return finish_stmt_expr (rtl_expr, block);\n+\t  tsubst_expr (STMT_EXPR_STMT (t), args,\n+\t\t       complain, in_decl);\n+\t  return finish_stmt_expr (rtl_expr);\n \t}\n       \n       return t;"}, {"sha": "db73cd7e5e7d481a6c59526c0ed118618d296908", "filename": "gcc/testsuite/g++.old-deja/g++.other/stmtexpr1.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fstmtexpr1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/447cfcb9e12b13e75072f4774bc4579998513a6a/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fstmtexpr1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fstmtexpr1.C?ref=447cfcb9e12b13e75072f4774bc4579998513a6a", "patch": "@@ -0,0 +1,10 @@\n+// Build don't link:\n+// Special g++ Options: -O\n+// Origin: Thomas Kunert <kunert@physik.tu-dresden.de>\n+\n+#include <ctype.h>\n+ \n+bool  f( char c )\n+{\n+    return tolower( c );\n+}"}]}