{"sha": "a7d840c7b53f775fda89ded048a2d8a7423dfcfa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTdkODQwYzdiNTNmNzc1ZmRhODlkZWQwNDhhMmQ4YTc0MjNkZmNmYQ==", "commit": {"author": {"name": "Bernardo Innocenti", "email": "bernie@gcc.gnu.org", "date": "2004-06-16T22:10:39Z"}, "committer": {"name": "Bernardo Innocenti", "email": "bernie@gcc.gnu.org", "date": "2004-06-16T22:10:39Z"}, "message": "re PR target/13292 (-msoft-float seems to corrupt builtin defines)\n\n\tPR target/13292\n\t* config/m68k/m68k.h (TARGET_SWITCHES): Don't remove MASK_68040_ONLY\n\ton -msoft-float.\n\t(TARGET_FLT_EVAL_METHOD): Don't advertise extended precision for\n\t68040 and soft-float.\n\t* config/m68k/m68k.md (truncdfsf2): Explicitly require TARGET_68881\n\tin the TARGET_68040_ONLY case.\n\nFrom-SVN: r83268", "tree": {"sha": "7c22568d1595db45362859217fa9b32f2f006ede", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7c22568d1595db45362859217fa9b32f2f006ede"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a7d840c7b53f775fda89ded048a2d8a7423dfcfa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7d840c7b53f775fda89ded048a2d8a7423dfcfa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7d840c7b53f775fda89ded048a2d8a7423dfcfa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7d840c7b53f775fda89ded048a2d8a7423dfcfa/comments", "author": null, "committer": null, "parents": [{"sha": "18cf0da278ff255a2f60a1ed2bef3cece298ab05", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18cf0da278ff255a2f60a1ed2bef3cece298ab05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18cf0da278ff255a2f60a1ed2bef3cece298ab05"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "e013ceb39bf5cb669f1e51535dc99a0343b1f02d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7d840c7b53f775fda89ded048a2d8a7423dfcfa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7d840c7b53f775fda89ded048a2d8a7423dfcfa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a7d840c7b53f775fda89ded048a2d8a7423dfcfa", "patch": "@@ -1,4 +1,14 @@\n-2004-06-15  Peter Barada  <peter@the-baradas.com>\n+2004-06-16  Bernardo Innocenti  <bernie@develer.com>\n+\n+\tPR target/13292\n+\t* config/m68k/m68k.h (TARGET_SWITCHES): Don't remove MASK_68040_ONLY\n+\ton -msoft-float.\n+\t(TARGET_FLT_EVAL_METHOD): Don't advertise extended precision for\n+\t68040 and soft-float.\n+\t* config/m68k/m68k.md (truncdfsf2): Explicitly require TARGET_68881\n+\tin the TARGET_68040_ONLY case.\n+\n+2004-06-16 Peter Barada  <peter@the-baradas.com>\n \n \t* config/m68k/m68k.md (movsi_cfv4): New pattern to allow mov3q.\n \t(movsi_cf): Make named, don't match TARGET_CFV4."}, {"sha": "17a69dddc330d7d51e7aea7cfd30c4d76b7b3ecb", "filename": "gcc/config/m68k/m68k.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7d840c7b53f775fda89ded048a2d8a7423dfcfa/gcc%2Fconfig%2Fm68k%2Fm68k.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7d840c7b53f775fda89ded048a2d8a7423dfcfa/gcc%2Fconfig%2Fm68k%2Fm68k.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.h?ref=a7d840c7b53f775fda89ded048a2d8a7423dfcfa", "patch": "@@ -257,7 +257,7 @@ extern int target_flags;\n     { \"noshort\", - MASK_SHORT,\t\t\t\t\t\t\\\n       N_(\"Consider type `int' to be 32 bits wide\") },\t\t\t\\\n     { \"68881\", MASK_68881, \"\" },\t\t\t\t\t\\\n-    { \"soft-float\", - (MASK_68040_ONLY|MASK_68881),\t\t\t\\\n+    { \"soft-float\", - MASK_68881,\t\t\t\t\t\\\n       N_(\"Generate code with library calls for floating point\") },\t\\\n     { \"68020-40\", -(MASK_ALL_CF_BITS|MASK_68060|MASK_68040_ONLY),\t\\\n       N_(\"Generate code for a 68040, without any new instructions\") },\t\\\n@@ -355,7 +355,7 @@ extern int target_flags;\n /* target machine storage layout */\n \n #define LONG_DOUBLE_TYPE_SIZE 96\n-#define TARGET_FLT_EVAL_METHOD (TARGET_68040_ONLY ? 0 : 2)\n+#define TARGET_FLT_EVAL_METHOD ((TARGET_68040_ONLY || ! TARGET_68881) ? 0 : 2)\n \n #define BITS_BIG_ENDIAN 1\n #define BYTES_BIG_ENDIAN 1"}, {"sha": "fa3a39524c1964ae5346f6521038afc594ffb48c", "filename": "gcc/config/m68k/m68k.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7d840c7b53f775fda89ded048a2d8a7423dfcfa/gcc%2Fconfig%2Fm68k%2Fm68k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7d840c7b53f775fda89ded048a2d8a7423dfcfa/gcc%2Fconfig%2Fm68k%2Fm68k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.md?ref=a7d840c7b53f775fda89ded048a2d8a7423dfcfa", "patch": "@@ -1548,7 +1548,7 @@\n   [(set (match_operand:SF 0 \"nonimmediate_operand\" \"=f\")\n \t(float_truncate:SF\n \t  (match_operand:DF 1 \"general_operand\" \"fmG\")))]\n-  \"TARGET_68040_ONLY\"\n+  \"TARGET_68881 && TARGET_68040_ONLY\"\n {\n   if (FP_REG_P (operands[1]))\n     return \"f%$move%.x %1,%0\";"}]}