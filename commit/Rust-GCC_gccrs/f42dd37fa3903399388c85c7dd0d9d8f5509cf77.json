{"sha": "f42dd37fa3903399388c85c7dd0d9d8f5509cf77", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQyZGQzN2ZhMzkwMzM5OTM4OGM4NWM3ZGQwZDlkOGY1NTA5Y2Y3Nw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2015-05-25T21:30:39Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2015-05-25T21:30:39Z"}, "message": "utils.c (maybe_pad_type): Do not apply adjustment to original size for elementary types before issuing...\n\n\t* gcc-interface/utils.c (maybe_pad_type): Do not apply adjustment to\n\toriginal size for elementary types before issuing the size warning.\n\nFrom-SVN: r223657", "tree": {"sha": "502fa6bce201997d26c34ad7d2c94b174b22136e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/502fa6bce201997d26c34ad7d2c94b174b22136e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f42dd37fa3903399388c85c7dd0d9d8f5509cf77", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f42dd37fa3903399388c85c7dd0d9d8f5509cf77", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f42dd37fa3903399388c85c7dd0d9d8f5509cf77", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f42dd37fa3903399388c85c7dd0d9d8f5509cf77/comments", "author": null, "committer": null, "parents": [{"sha": "1366ba411aced82547671901bf20655b40e3dded", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1366ba411aced82547671901bf20655b40e3dded", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1366ba411aced82547671901bf20655b40e3dded"}], "stats": {"total": 33, "additions": 31, "deletions": 2}, "files": [{"sha": "f75ecf0a37aaf5e76d8c153ad30e090f8805a896", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f42dd37fa3903399388c85c7dd0d9d8f5509cf77/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f42dd37fa3903399388c85c7dd0d9d8f5509cf77/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=f42dd37fa3903399388c85c7dd0d9d8f5509cf77", "patch": "@@ -1,5 +1,15 @@\n 2015-05-25  Eric Botcazou  <ebotcazou@adacore.com>\n \n+\t* gcc-interface/utils.c (maybe_pad_type): Do not apply adjustment to\n+\toriginal size for elementary types before issuing the size warning.\n+\n+2015-05-25  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* get_targ.adb (C_Get_Float_Words_BE): Adjust import name.\n+\t(C_Get_Words_BE): Likewise.\n+\t(C_Get_Bytes_BE): Likewise.\n+\t(C_Get_Bits_BE): Likewise.\n+\t(Width_From_Size): Remove superfluous space.\n \t* gcc-interface/targtyps.c (get_float_words_be): Rename into...\n \t(get_target_float_words_be): ...this.\n \t(get_words_be): Rename into..."}, {"sha": "291e82420ab301fb5e15a697579261f31e2f89ba", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f42dd37fa3903399388c85c7dd0d9d8f5509cf77/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f42dd37fa3903399388c85c7dd0d9d8f5509cf77/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=f42dd37fa3903399388c85c7dd0d9d8f5509cf77", "patch": "@@ -1426,7 +1426,7 @@ maybe_pad_type (tree type, tree size, unsigned int align,\n   if (CONTAINS_PLACEHOLDER_P (orig_size))\n     orig_size = max_size (orig_size, true);\n \n-  if (align)\n+  if (align && AGGREGATE_TYPE_P (type))\n     orig_size = round_up (orig_size, align);\n \n   if (!operand_equal_p (size, orig_size, 0)"}, {"sha": "aeb7308fbeba50a3813bcc1b40331e7fd0f4ceae", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f42dd37fa3903399388c85c7dd0d9d8f5509cf77/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f42dd37fa3903399388c85c7dd0d9d8f5509cf77/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f42dd37fa3903399388c85c7dd0d9d8f5509cf77", "patch": "@@ -1,3 +1,8 @@\n+2015-05-25  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/warn11.adb: New test.\n+\t* gnat.dg/specs/alignment2.ads: Add dg-warning directive.\n+\n 2015-05-25  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/vfa1_1.adb: New test."}, {"sha": "0b6c14f1b7d4e04f0baebe3f1ab566f2c76fe380", "filename": "gcc/testsuite/gnat.dg/specs/alignment2.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f42dd37fa3903399388c85c7dd0d9d8f5509cf77/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Falignment2.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f42dd37fa3903399388c85c7dd0d9d8f5509cf77/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Falignment2.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Falignment2.ads?ref=f42dd37fa3903399388c85c7dd0d9d8f5509cf77", "patch": "@@ -43,7 +43,7 @@ package Alignment2 is\n \n   -- OK, big size\n   type I3 is new Integer_32;\n-  for I3'Size use 32 * 8;\n+  for I3'Size use 32 * 8; -- { dg-warning \"unused\" }\n   for I3'Alignment use 32;\n \n end Alignment2;"}, {"sha": "ff24d7c336c3f912460320c337592ac5a60e2182", "filename": "gcc/testsuite/gnat.dg/warn11.adb", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f42dd37fa3903399388c85c7dd0d9d8f5509cf77/gcc%2Ftestsuite%2Fgnat.dg%2Fwarn11.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f42dd37fa3903399388c85c7dd0d9d8f5509cf77/gcc%2Ftestsuite%2Fgnat.dg%2Fwarn11.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fwarn11.adb?ref=f42dd37fa3903399388c85c7dd0d9d8f5509cf77", "patch": "@@ -0,0 +1,14 @@\n+with Ada.Text_IO; use Ada.Text_IO;\n+\n+procedure Warn11 is\n+\n+   type My_Integer is new Integer range 1 .. 10;\n+   for My_Integer'Size use 65;  -- { dg-warning \"unused\" }\n+\n+   type My_Integer2 is new Integer range 1 .. 10;\n+   for My_Integer2'Size use 129;  -- { dg-warning \"unused\" }\n+\n+begin\n+   Put_Line (\"MB'Size is \" & Natural'Image (My_Integer'Size));\n+   Put_Line (\"MB'Size is \" & Natural'Image (My_Integer2'Size));\n+end;"}]}