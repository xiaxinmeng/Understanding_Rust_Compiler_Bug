{"sha": "c3f8384f9474f4f354226523e33a47bc6a1e6c57", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzNmODM4NGY5NDc0ZjRmMzU0MjI2NTIzZTMzYTQ3YmM2YTFlNmM1Nw==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@linux.vnet.ibm.com", "date": "2012-04-12T17:10:27Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "2012-04-12T17:10:27Z"}, "message": "re PR target/52775 (Change default for using FCFID instruction)\n\n[gcc]\n2012-04-11  Michael Meissner  <meissner@linux.vnet.ibm.com>\n\n\tPR target/52775\n\t* config/rs6000/rs6000.h (TARGET_FCFID): Add TARGET_PPC_GPOPT to\n\tthe list of options to enable the FCFID instruction.\n\t(TARGET_EXTRA_BUILTINS): Adjust comment.\n\n[gcc/testsuite]\n2012-04-11  Michael Meissner  <meissner@linux.vnet.ibm.com>\n\n\tPR target/52775\n\t* gcc.target/powerpc/pr52775.c: New file.\n\nFrom-SVN: r186387", "tree": {"sha": "8d6d7cd42ac0a12aa489087bddd411ffea98c1c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8d6d7cd42ac0a12aa489087bddd411ffea98c1c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c3f8384f9474f4f354226523e33a47bc6a1e6c57", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3f8384f9474f4f354226523e33a47bc6a1e6c57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3f8384f9474f4f354226523e33a47bc6a1e6c57", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3f8384f9474f4f354226523e33a47bc6a1e6c57/comments", "author": null, "committer": null, "parents": [{"sha": "a6f8851e3efa0157bf28631e2d296430b4dbc472", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6f8851e3efa0157bf28631e2d296430b4dbc472", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6f8851e3efa0157bf28631e2d296430b4dbc472"}], "stats": {"total": 39, "additions": 34, "deletions": 5}, "files": [{"sha": "fb291e74c4c1ed19267ff272fcc4714ac4c0302d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3f8384f9474f4f354226523e33a47bc6a1e6c57/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3f8384f9474f4f354226523e33a47bc6a1e6c57/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c3f8384f9474f4f354226523e33a47bc6a1e6c57", "patch": "@@ -1,3 +1,10 @@\n+2012-04-12  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\n+\tPR target/52775\n+\t* config/rs6000/rs6000.h (TARGET_FCFID): Add TARGET_PPC_GPOPT to\n+\tthe list of options to enable the FCFID instruction.\n+\t(TARGET_EXTRA_BUILTINS): Adjust comment.\n+\n 2012-04-12  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \tPR tree-optimization/18589"}, {"sha": "63cbdc8f382da793d977b564d4d668777e180273", "filename": "gcc/config/rs6000/rs6000.h", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3f8384f9474f4f354226523e33a47bc6a1e6c57/gcc%2Fconfig%2Frs6000%2Frs6000.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3f8384f9474f4f354226523e33a47bc6a1e6c57/gcc%2Fconfig%2Frs6000%2Frs6000.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.h?ref=c3f8384f9474f4f354226523e33a47bc6a1e6c57", "patch": "@@ -467,10 +467,11 @@ extern int rs6000_vector_align[];\n /* ISA 2.01 allowed FCFID to be done in 32-bit, previously it was 64-bit only.\n    Enable 32-bit fcfid's on any of the switches for newer ISA machines or\n    XILINX.  */\n-#define TARGET_FCFID\t(TARGET_POWERPC64 \\\n-\t\t\t || TARGET_POPCNTB\t/* ISA 2.02 */ \\\n-\t\t\t || TARGET_CMPB\t\t/* ISA 2.05 */ \\\n-\t\t\t || TARGET_POPCNTD\t/* ISA 2.06 */ \\\n+#define TARGET_FCFID\t(TARGET_POWERPC64\t\t\t\t\\\n+\t\t\t || TARGET_PPC_GPOPT\t/* 970/power4 */\t\\\n+\t\t\t || TARGET_POPCNTB\t/* ISA 2.02 */\t\t\\\n+\t\t\t || TARGET_CMPB\t\t/* ISA 2.05 */\t\t\\\n+\t\t\t || TARGET_POPCNTD\t/* ISA 2.06 */\t\t\\\n \t\t\t || TARGET_XILINX_FPU)\n \n #define TARGET_FCTIDZ\tTARGET_FCFID\n@@ -492,7 +493,7 @@ extern int rs6000_vector_align[];\n \n #define TARGET_EXTRA_BUILTINS\t(!TARGET_SPE && !TARGET_PAIRED_FLOAT\t \\\n \t\t\t\t && ((TARGET_POWERPC64\t\t\t \\\n-\t\t\t\t      || TARGET_PPC_GPOPT /* 970 */\t \\\n+\t\t\t\t      || TARGET_PPC_GPOPT /* 970/power4 */ \\\n \t\t\t\t      || TARGET_POPCNTB\t  /* ISA 2.02 */ \\\n \t\t\t\t      || TARGET_CMPB\t  /* ISA 2.05 */ \\\n \t\t\t\t      || TARGET_POPCNTD\t  /* ISA 2.06 */ \\"}, {"sha": "7a5f47f013f3569c744609581bbc03e55ec25ec5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3f8384f9474f4f354226523e33a47bc6a1e6c57/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3f8384f9474f4f354226523e33a47bc6a1e6c57/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c3f8384f9474f4f354226523e33a47bc6a1e6c57", "patch": "@@ -1,3 +1,8 @@\n+2012-04-12  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\n+\tPR target/52775\n+\t* gcc.target/powerpc/pr52775.c: New file.\n+\n 2012-04-12  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \tPR tree-optimization/18589"}, {"sha": "4027819ee6329b094a1f9ffb4370cbeff7bf8fb5", "filename": "gcc/testsuite/gcc.target/powerpc/pr52775.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3f8384f9474f4f354226523e33a47bc6a1e6c57/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr52775.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3f8384f9474f4f354226523e33a47bc6a1e6c57/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr52775.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr52775.c?ref=c3f8384f9474f4f354226523e33a47bc6a1e6c57", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do compile { target { powerpc*-*-* && ilp32 } } } */\n+/* { dg-skip-if \"\" { powerpc*-*-darwin* } { \"*\" } { \"\" } } */\n+/* { dg-options \"-O1 -mcpu=power4\" } */\n+/* { dg-final { scan-assembler-times \"fcfid\" 2 } } */\n+\n+double\n+int_to_double (int *p)\n+{\n+  return (double)*p;\n+}\n+\n+double\n+long_long_to_double (long long *p)\n+{\n+  return (double)*p;\n+}"}]}