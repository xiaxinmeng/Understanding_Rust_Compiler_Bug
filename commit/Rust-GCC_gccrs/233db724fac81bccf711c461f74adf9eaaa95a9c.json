{"sha": "233db724fac81bccf711c461f74adf9eaaa95a9c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjMzZGI3MjRmYWM4MWJjY2Y3MTFjNDYxZjc0YWRmOWVhYWE5NWE5Yw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2010-11-20T22:01:48Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-11-20T22:01:48Z"}, "message": "re PR target/31100 (ASM_OUTPUT_ALIGN_WITH_NOP wrong with GNU as)\n\n\tPR target/31100\n\t* config/sparc/sparc.h (ASM_OUTPUT_ALIGN_WITH_NOP): Move to...\n\t* config/sparc/sol2.h (ASM_OUTPUT_ALIGN_WITH_NOP): ...here.\n\t* config/sparc/sol2-gas.h (ASM_OUTPUT_ALIGN_WITH_NOP): Undefine.\n\nFrom-SVN: r166986", "tree": {"sha": "4d44974d8442f69dfeaa736694f572d742d99fcd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d44974d8442f69dfeaa736694f572d742d99fcd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/233db724fac81bccf711c461f74adf9eaaa95a9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/233db724fac81bccf711c461f74adf9eaaa95a9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/233db724fac81bccf711c461f74adf9eaaa95a9c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/233db724fac81bccf711c461f74adf9eaaa95a9c/comments", "author": null, "committer": null, "parents": [{"sha": "430c6cebe1f5acbbc209c12717cfe085c759f73e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/430c6cebe1f5acbbc209c12717cfe085c759f73e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/430c6cebe1f5acbbc209c12717cfe085c759f73e"}], "stats": {"total": 59, "additions": 52, "deletions": 7}, "files": [{"sha": "6e122603a5d4990f04065651dec53764bd528a2a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=233db724fac81bccf711c461f74adf9eaaa95a9c", "patch": "@@ -1,3 +1,10 @@\n+2010-11-20  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR target/31100\n+\t* config/sparc/sparc.h (ASM_OUTPUT_ALIGN_WITH_NOP): Move to...\n+\t* config/sparc/sol2.h (ASM_OUTPUT_ALIGN_WITH_NOP): ...here.\n+\t* config/sparc/sol2-gas.h (ASM_OUTPUT_ALIGN_WITH_NOP): Undefine.\n+\n 2010-11-20  Jan Hubicka  <jh@suse.cz>\n \n \t* cgraph.c (ld_plugin_symbol_resolution_names): New."}, {"sha": "4bc2cb470aeb2b53e907f9b24d0feb1f131b9d9d", "filename": "gcc/config/sparc/sol2-gas.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2Fconfig%2Fsparc%2Fsol2-gas.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2Fconfig%2Fsparc%2Fsol2-gas.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsol2-gas.h?ref=233db724fac81bccf711c461f74adf9eaaa95a9c", "patch": "@@ -23,6 +23,9 @@ a copy of the GCC Runtime Library Exception along with this program;\n see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n <http://www.gnu.org/licenses/>.  */\n \n+/* Undefine this as the filler pattern doesn't work with GNU as.  */\n+#undef ASM_OUTPUT_ALIGN_WITH_NOP\n+\n /* Undefine this so that BNSYM/ENSYM pairs are emitted by STABS+.  */\n #undef NO_DBX_BNSYM_ENSYM\n "}, {"sha": "11286626ecc7589468beb462927239905b61d12d", "filename": "gcc/config/sparc/sol2.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2Fconfig%2Fsparc%2Fsol2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2Fconfig%2Fsparc%2Fsol2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsol2.h?ref=233db724fac81bccf711c461f74adf9eaaa95a9c", "patch": "@@ -177,6 +177,13 @@ along with GCC; see the file COPYING3.  If not see\n     }\t\t\t\t\t\t\t\t\\\n   while (0)\n \n+/* This is how to output an assembler line that says to advance\n+   the location counter to a multiple of 2**LOG bytes using the\n+   NOP instruction as padding.  */\n+#define ASM_OUTPUT_ALIGN_WITH_NOP(FILE,LOG)   \\\n+  if ((LOG) != 0)                             \\\n+    fprintf (FILE, \"\\t.align %d,0x1000000\\n\", (1<<(LOG)))\n+\n /* Use Solaris ELF section syntax.  */\n #undef TARGET_ASM_NAMED_SECTION\n #define TARGET_ASM_NAMED_SECTION sparc_solaris_elf_asm_named_section"}, {"sha": "ccf5f73439612a7dcef4d14fa1b5c5555f03d90c", "filename": "gcc/config/sparc/sparc.h", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2Fconfig%2Fsparc%2Fsparc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2Fconfig%2Fsparc%2Fsparc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.h?ref=233db724fac81bccf711c461f74adf9eaaa95a9c", "patch": "@@ -2013,13 +2013,6 @@ do {\t\t\t\t\t\t\t\t\t\\\n   if ((LOG) != 0)\t\t\t\\\n     fprintf (FILE, \"\\t.align %d\\n\", (1<<(LOG)))\n \n-/* This is how to output an assembler line that says to advance\n-   the location counter to a multiple of 2**LOG bytes using the\n-   \"nop\" instruction as padding.  */\n-#define ASM_OUTPUT_ALIGN_WITH_NOP(FILE,LOG)   \\\n-  if ((LOG) != 0)                             \\\n-    fprintf (FILE, \"\\t.align %d,0x1000000\\n\", (1<<(LOG)))\n-\n #define ASM_OUTPUT_SKIP(FILE,SIZE)  \\\n   fprintf (FILE, \"\\t.skip \"HOST_WIDE_INT_PRINT_UNSIGNED\"\\n\", (SIZE))\n "}, {"sha": "1d6a14ad0177451f6449ad31ab8b93514ac564e2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=233db724fac81bccf711c461f74adf9eaaa95a9c", "patch": "@@ -1,3 +1,7 @@\n+2010-11-20  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc.target/sparc/sparc-align-1.c: New test.\n+\n 2010-11-20  Nathan Froyd  <froydnj@codesourcery.com>\n \n \tPR c++/16189"}, {"sha": "14c915e1e12458c976aa2683c8cbd7bd35f62422", "filename": "gcc/testsuite/gcc.target/sparc/sparc-align-1.c", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2Ftestsuite%2Fgcc.target%2Fsparc%2Fsparc-align-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/233db724fac81bccf711c461f74adf9eaaa95a9c/gcc%2Ftestsuite%2Fgcc.target%2Fsparc%2Fsparc-align-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fsparc%2Fsparc-align-1.c?ref=233db724fac81bccf711c461f74adf9eaaa95a9c", "patch": "@@ -0,0 +1,31 @@\n+/* PR target/31100 */\n+/* Reported by Erwin Unruh <Erwin.Unruh@fujitsu-siemens.com> */\n+\n+/* { dg-do run } */\n+/* { dg-options \"-falign-labels=16\" } */\n+\n+extern void abort(void);\n+\n+int f(int i)\n+{\n+  int res;\n+\n+  switch (i)\n+    {\n+    case 5:\n+      res = i - i;\n+      break;\n+    default:\n+      res = i * 2;\n+      break;\n+    }\n+\n+  return res;\n+}\n+\n+int main(void)\n+{\n+  if (f(2) != 4)\n+    abort ();\n+  return 0;\n+}"}]}