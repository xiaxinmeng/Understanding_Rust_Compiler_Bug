{"sha": "dfb331d6941fa829b0f060e79568875991e3eb70", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZiMzMxZDY5NDFmYTgyOWIwZjA2MGU3OTU2ODg3NTk5MWUzZWI3MA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-11-12T19:22:21Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-11-12T19:22:21Z"}, "message": "(negsi2): Change into define_expand.\n\n(negsi2_internal): Rename from old negsi2, changed condition to !TARGET_5200.\n(negsi2_5200): New insn.\n(one_cmplsi2): Change into define_expand.\n(one_cmplsi2_internal): Rename from old one_cmplsi2, changed\ncondition to !TARGET_5200.\n(one_cmplsi2_5200): New insn.\n(negdi2_5200): Corrected constraints.\n(one_cmpldi2): Changed condition to !TARGET_5200.\n\nFrom-SVN: r13136", "tree": {"sha": "8966e186227411b0d58d7430cd9325619f67b640", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8966e186227411b0d58d7430cd9325619f67b640"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dfb331d6941fa829b0f060e79568875991e3eb70", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfb331d6941fa829b0f060e79568875991e3eb70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfb331d6941fa829b0f060e79568875991e3eb70", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfb331d6941fa829b0f060e79568875991e3eb70/comments", "author": null, "committer": null, "parents": [{"sha": "720283f2ebd1517cce58eb73f41701c2e4bc7fad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/720283f2ebd1517cce58eb73f41701c2e4bc7fad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/720283f2ebd1517cce58eb73f41701c2e4bc7fad"}], "stats": {"total": 59, "additions": 46, "deletions": 13}, "files": [{"sha": "b9b3bff39ba633311fa331199b371c47877f0ec8", "filename": "gcc/config/m68k/m68k.md", "status": "modified", "additions": 46, "deletions": 13, "changes": 59, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfb331d6941fa829b0f060e79568875991e3eb70/gcc%2Fconfig%2Fm68k%2Fm68k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfb331d6941fa829b0f060e79568875991e3eb70/gcc%2Fconfig%2Fm68k%2Fm68k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.md?ref=dfb331d6941fa829b0f060e79568875991e3eb70", "patch": "@@ -3712,24 +3712,38 @@\n } \")\n \n (define_insn \"negdi2_5200\"\n-  [(set (match_operand:DI 0 \"general_operand\" \"=<,do\")\n-\t(neg:DI (match_operand:DI 1 \"general_operand\" \"0,0\")))]\n+  [(set (match_operand:DI 0 \"general_operand\" \"=d\")\n+\t(neg:DI (match_operand:DI 1 \"general_operand\" \"0\")))]\n   \"TARGET_5200\"\n   \"*\n {\n-  if (which_alternative == 0)\n-    return \\\"neg%.l %0\\;negx%.l %0\\\";\n-  if (GET_CODE (operands[0]) == REG)\n-    operands[1] = gen_rtx (REG, SImode, REGNO (operands[0]) + 1);\n-  else\n-    operands[1] = adj_offsettable_operand (operands[0], 4);\n+  operands[1] = gen_rtx (REG, SImode, REGNO (operands[0]) + 1);\n   return \\\"neg%.l %1\\;negx%.l %0\\\";\n } \")\n \n-(define_insn \"negsi2\"\n+(define_expand \"negsi2\"\n+  [(set (match_operand:SI 0 \"general_operand\" \"\")\n+\t(neg:SI (match_operand:SI 1 \"general_operand\" \"\")))]\n+  \"\"\n+  \"\n+{\n+  if (TARGET_5200)\n+    emit_insn (gen_negsi2_5200 (operands[0], operands[1]));\n+  else\n+    emit_insn (gen_negsi2_internal (operands[0], operands[1]));\n+  DONE;\n+}\")\n+\n+(define_insn \"negsi2_internal\"\n   [(set (match_operand:SI 0 \"general_operand\" \"=dm\")\n \t(neg:SI (match_operand:SI 1 \"general_operand\" \"0\")))]\n-  \"\"\n+  \"!TARGET_5200\"\n+  \"neg%.l %0\")\n+\n+(define_insn \"negsi2_5200\"\n+  [(set (match_operand:SI 0 \"general_operand\" \"=d\")\n+\t(neg:SI (match_operand:SI 1 \"general_operand\" \"0\")))]\n+  \"TARGET_5200\"\n   \"neg%.l %0\")\n \n (define_insn \"neghi2\"\n@@ -3993,7 +4007,7 @@\n (define_insn \"one_cmpldi2\"\n   [(set (match_operand:DI 0 \"general_operand\" \"=dm\")\n \t(not:DI (match_operand:DI 1 \"general_operand\" \"0\")))]\n-  \"\"\n+  \"!TARGET_5200\"\n   \"*\n {\n   CC_STATUS_INIT;\n@@ -4007,10 +4021,29 @@\n   return \\\"not%.l %1\\;not%.l %0\\\";\n }\")\n \n-(define_insn \"one_cmplsi2\"\n+(define_expand \"one_cmplsi2\"\n+  [(set (match_operand:SI 0 \"general_operand\" \"\")\n+\t(not:SI (match_operand:SI 1 \"general_operand\" \"\")))]\n+  \"\"\n+  \"\n+{\n+  if (TARGET_5200)\n+    emit_insn (gen_one_cmplsi2_5200 (operands[0], operands[1]));\n+  else\n+    emit_insn (gen_one_cmplsi2_internal (operands[0], operands[1]));\n+  DONE;\n+}\")\n+\n+(define_insn \"one_cmplsi2_internal\"\n   [(set (match_operand:SI 0 \"general_operand\" \"=dm\")\n \t(not:SI (match_operand:SI 1 \"general_operand\" \"0\")))]\n-  \"\"\n+  \"!TARGET_5200\"\n+  \"not%.l %0\")\n+\n+(define_insn \"one_cmplsi2_5200\"\n+  [(set (match_operand:SI 0 \"general_operand\" \"=d\")\n+\t(not:SI (match_operand:SI 1 \"general_operand\" \"0\")))]\n+  \"TARGET_5200\"\n   \"not%.l %0\")\n \n (define_insn \"one_cmplhi2\""}]}