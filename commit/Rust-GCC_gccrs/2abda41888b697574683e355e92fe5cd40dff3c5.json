{"sha": "2abda41888b697574683e355e92fe5cd40dff3c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmFiZGE0MTg4OGI2OTc1NzQ2ODNlMzU1ZTkyZmU1Y2Q0MGRmZjNjNQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2000-03-08T10:26:06Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2000-03-08T10:26:06Z"}, "message": "typeck.c (convert_for_assignment): Don't look at array initializer.\n\n\t* typeck.c (convert_for_assignment): Don't look at array\n\tinitializer.\n\t* call.c (convert_like_real): Likewise.\n\nFrom-SVN: r32415", "tree": {"sha": "8c8d2f64d47a8c4211dc28aa077aa9b9b7d8514d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c8d2f64d47a8c4211dc28aa077aa9b9b7d8514d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2abda41888b697574683e355e92fe5cd40dff3c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2abda41888b697574683e355e92fe5cd40dff3c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2abda41888b697574683e355e92fe5cd40dff3c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2abda41888b697574683e355e92fe5cd40dff3c5/comments", "author": null, "committer": null, "parents": [{"sha": "1c08915645ab308eba6fb8a0ebd577539e3910b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c08915645ab308eba6fb8a0ebd577539e3910b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c08915645ab308eba6fb8a0ebd577539e3910b3"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "948ea7dab59f2b3844bf4b4973b0c3ecb73c87c6", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abda41888b697574683e355e92fe5cd40dff3c5/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abda41888b697574683e355e92fe5cd40dff3c5/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=2abda41888b697574683e355e92fe5cd40dff3c5", "patch": "@@ -1,3 +1,9 @@\n+2000-03-08  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* typeck.c (convert_for_assignment): Don't look at array\n+\tinitializer.\n+\t* call.c (convert_like_real): Likewise.\t\n+\n 2000-03-07  Jason Merrill  <jason@casey.cygnus.com>\n \n \tAdd initial support for '\\uNNNN' specifier."}, {"sha": "6e3eabd1d31281657b91e9be8830b821cae90980", "filename": "gcc/cp/call.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abda41888b697574683e355e92fe5cd40dff3c5/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abda41888b697574683e355e92fe5cd40dff3c5/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=2abda41888b697574683e355e92fe5cd40dff3c5", "patch": "@@ -3683,10 +3683,11 @@ convert_like_real (convs, expr, fn, argnum, inner)\n   if (expr == error_mark_node)\n     return error_mark_node;\n \n-  /* Convert a constant variable to its underlying value, unless we\n+  /* Convert a non-array constant variable to its underlying value, unless we\n      are about to bind it to a reference, in which case we need to\n      leave it as an lvalue.  */\n-  if (TREE_READONLY_DECL_P (expr) && TREE_CODE (convs) != REF_BIND)\n+  if (TREE_READONLY_DECL_P (expr) && TREE_CODE (convs) != REF_BIND\n+      && TREE_CODE (TREE_TYPE (expr)) != ARRAY_TYPE)\n     expr = decl_constant_value (expr);\n \n   switch (TREE_CODE (convs))"}, {"sha": "071d2eef18f434e3537bea7e38ca72a5aad16adc", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abda41888b697574683e355e92fe5cd40dff3c5/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abda41888b697574683e355e92fe5cd40dff3c5/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=2abda41888b697574683e355e92fe5cd40dff3c5", "patch": "@@ -6523,7 +6523,7 @@ convert_for_assignment (type, rhs, errtype, fndecl, parmnum)\n   /* Simplify the RHS if possible.  */\n   if (TREE_CODE (rhs) == CONST_DECL)\n     rhs = DECL_INITIAL (rhs);\n-  else if (TREE_READONLY_DECL_P (rhs))\n+  else if (TREE_READONLY_DECL_P (rhs) && coder != ARRAY_TYPE)\n     rhs = decl_constant_value (rhs);\n \n   /* [expr.ass]"}]}