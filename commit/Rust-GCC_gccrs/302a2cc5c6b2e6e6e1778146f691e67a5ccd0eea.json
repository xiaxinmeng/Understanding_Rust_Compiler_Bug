{"sha": "302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzAyYTJjYzVjNmIyZTZlNmUxNzc4MTQ2ZjY5MWU2N2E1Y2NkMGVlYQ==", "commit": {"author": {"name": "Joseph Myers", "email": "jsm@polyomino.org.uk", "date": "2004-09-29T20:27:26Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2004-09-29T20:27:26Z"}, "message": "re PR c/7425 (deprecated attribute doesn't merge with multiple declarations)\n\n\tPR c/7425\n\t* c-decl.c (merge_decls): Merge TREE_DEPRECATED.\n\ncp:\n\t* decl.c (duplicate_decls): Merge TREE_DEPRECATED.\n\ntestsuite:\n\t* gcc.dg/deprecated-3.c, g++.dg/warn/deprecated-2.C: New tests.\n\nFrom-SVN: r88303", "tree": {"sha": "4d6af7bfab6a91d602bda4e9a23e6b7fcfeac89c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d6af7bfab6a91d602bda4e9a23e6b7fcfeac89c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "08272b85285330a9b36c2766ea91468d609aff35", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08272b85285330a9b36c2766ea91468d609aff35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08272b85285330a9b36c2766ea91468d609aff35"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "cf4671908c08bc1786c00ef2f4fd67bc4ac29553", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea", "patch": "@@ -1,3 +1,8 @@\n+2004-09-29  Joseph S. Myers  <jsm@polyomino.org.uk>\n+\n+\tPR c/7425\n+\t* c-decl.c (merge_decls): Merge TREE_DEPRECATED.\n+\n 2004-09-29  Eric Christopher  <echristo@redhat.com>\n \n \t* fold-const.c (tree_swap_operands_p): Remove duplicated code."}, {"sha": "38a13fd201ccc855e5a4d8dc85cbc817a95e069a", "filename": "gcc/c-decl.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea", "patch": "@@ -1586,6 +1586,10 @@ merge_decls (tree newdecl, tree olddecl, tree newtype, tree oldtype)\n \tmake_var_volatile (newdecl);\n     }\n \n+  /* Merge deprecatedness.  */\n+  if (TREE_DEPRECATED (newdecl))\n+    TREE_DEPRECATED (olddecl) = 1;\n+\n   /* Keep source location of definition rather than declaration.  */\n   if (DECL_INITIAL (newdecl) == 0 && DECL_INITIAL (olddecl) != 0)\n     DECL_SOURCE_LOCATION (newdecl) = DECL_SOURCE_LOCATION (olddecl);"}, {"sha": "fa42fad9a439ff213ea6e209b8734ea4ab65ff0c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea", "patch": "@@ -1,3 +1,7 @@\n+2004-09-29  Joseph S. Myers  <jsm@polyomino.org.uk>\n+\n+\t* decl.c (duplicate_decls): Merge TREE_DEPRECATED.\n+\n 2004-09-29  Jason Merrill  <jason@redhat.com>\n \n \tPR tree-optimization/17697"}, {"sha": "c27d041378b819ef3cefc1c1a46906954f7861ce", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea", "patch": "@@ -1722,6 +1722,10 @@ duplicate_decls (tree newdecl, tree olddecl)\n       if (TREE_NOTHROW (newdecl))\n \tTREE_NOTHROW (olddecl) = 1;\n \n+      /* Merge deprecatedness.  */\n+      if (TREE_DEPRECATED (newdecl))\n+\tTREE_DEPRECATED (olddecl) = 1;\n+\n       /* Merge the initialization information.  */\n       if (DECL_INITIAL (newdecl) == NULL_TREE\n \t  && DECL_INITIAL (olddecl) != NULL_TREE)"}, {"sha": "13e29d9a153e8749f404418d51a1284acf020d18", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea", "patch": "@@ -1,3 +1,8 @@\n+2004-09-29  Joseph S. Myers  <jsm@polyomino.org.uk>\n+\n+\tPR c/7425\n+\t* gcc.dg/deprecated-3.c, g++.dg/warn/deprecated-2.C: New tests.\n+\n 2004-09-29  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc.c-torture/execute/stdarg-1.c: New test."}, {"sha": "afddc8f0bbd27e17d6d11d00e552c49d73a8249b", "filename": "gcc/testsuite/g++.dg/warn/deprecated-2.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fdeprecated-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fdeprecated-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fdeprecated-2.C?ref=302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea", "patch": "@@ -0,0 +1,11 @@\n+/* Test __attribute__((deprecated)).  Test merging with multiple\n+   declarations.  Bug 7425 (C++ version).  */\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+\n+void func(void);\n+void func(void) __attribute__((deprecated));\n+\n+void f(void) {\n+  func(); /* { dg-warning \"'func' is deprecated\" } */\n+}"}, {"sha": "2c35bb314e59c3047c4b1f94bd9c618dd8068a50", "filename": "gcc/testsuite/gcc.dg/deprecated-3.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Ftestsuite%2Fgcc.dg%2Fdeprecated-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea/gcc%2Ftestsuite%2Fgcc.dg%2Fdeprecated-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdeprecated-3.c?ref=302a2cc5c6b2e6e6e1778146f691e67a5ccd0eea", "patch": "@@ -0,0 +1,11 @@\n+/* Test __attribute__((deprecated)).  Test merging with multiple\n+   declarations.  Bug 7425.  */\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+\n+void func(void);\n+void func(void) __attribute__((deprecated));\n+\n+void f(void) {\n+  func(); /* { dg-warning \"'func' is deprecated\" } */\n+}"}]}