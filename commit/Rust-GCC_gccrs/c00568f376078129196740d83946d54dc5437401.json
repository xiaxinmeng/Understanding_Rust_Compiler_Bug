{"sha": "c00568f376078129196740d83946d54dc5437401", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzAwNTY4ZjM3NjA3ODEyOTE5Njc0MGQ4Mzk0NmQ1NGRjNTQzNzQwMQ==", "commit": {"author": {"name": "Gustavo Romero", "email": "gromero@linux.ibm.com", "date": "2020-04-15T13:14:45Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2020-04-15T13:14:45Z"}, "message": "selftest: Work around GCC 4.2 PR33916 bug by optimizing the ctor [PR89494]\n\nGCC 4.2 due to PR33916 miscompiles temp_dump_context ctor, because it doesn't\nzero initialize the whole dump_context temporary on which it runs the static\nget method and during destruction of the temporary an uninitialized pointer\nis deleted.\n\nMore recent GCC versions properly zero initialize it and ideally optimize away\nthe construction/destruction of the temporary, as it isn't used for anything,\nbut there is no reason to create the temporary, static member functions can\nbe called without an associated object.\n\n2020-04-15  Gustavo Romero  <gromero@linux.ibm.com>\n\n\tPR bootstrap/89494\n\t* dumpfile.c (selftest::temp_dump_context::temp_dump_context):\n\tDon't construct a dump_context temporary to call static method.", "tree": {"sha": "9db39f1ab7db4c770ab338ccc8548d9a2f07149e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9db39f1ab7db4c770ab338ccc8548d9a2f07149e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c00568f376078129196740d83946d54dc5437401", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c00568f376078129196740d83946d54dc5437401", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c00568f376078129196740d83946d54dc5437401", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c00568f376078129196740d83946d54dc5437401/comments", "author": null, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8a4436d89bfa0f731a48bf28d521f4b1b91014d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a4436d89bfa0f731a48bf28d521f4b1b91014d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a4436d89bfa0f731a48bf28d521f4b1b91014d7"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "6148a8276c9a9677c167aedde5df0562fc8de161", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c00568f376078129196740d83946d54dc5437401/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c00568f376078129196740d83946d54dc5437401/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c00568f376078129196740d83946d54dc5437401", "patch": "@@ -1,3 +1,9 @@\n+2020-04-15  Gustavo Romero  <gromero@linux.ibm.com>\n+\n+\tPR bootstrap/89494\n+\t* dumpfile.c (selftest::temp_dump_context::temp_dump_context):\n+\tDon't construct a dump_context temporary to call static method.\n+\n 2020-04-15  Andrea Corallo  <andrea.corallo@arm.com>\n \n \t* config/aarch64/falkor-tag-collision-avoidance.c"}, {"sha": "e392ecf307c4ad9814016ea90dfc7bad40ac5d2c", "filename": "gcc/dumpfile.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c00568f376078129196740d83946d54dc5437401/gcc%2Fdumpfile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c00568f376078129196740d83946d54dc5437401/gcc%2Fdumpfile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdumpfile.c?ref=c00568f376078129196740d83946d54dc5437401", "patch": "@@ -2076,7 +2076,7 @@ temp_dump_context::temp_dump_context (bool forcibly_enable_optinfo,\n \t\t\t\t      bool forcibly_enable_dumping,\n \t\t\t\t      dump_flags_t test_pp_flags)\n : m_context (),\n-  m_saved (&dump_context ().get ())\n+  m_saved (&dump_context::get ())\n {\n   dump_context::s_current = &m_context;\n   if (forcibly_enable_optinfo)"}]}