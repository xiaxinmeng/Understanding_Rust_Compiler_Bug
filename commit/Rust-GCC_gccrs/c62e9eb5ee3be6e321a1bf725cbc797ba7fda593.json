{"sha": "c62e9eb5ee3be6e321a1bf725cbc797ba7fda593", "node_id": "C_kwDOANBUbNoAKGM2MmU5ZWI1ZWUzYmU2ZTMyMWExYmY3MjVjYmM3OTdiYTdmZGE1OTM", "commit": {"author": {"name": "Arthur Cohen", "email": "arthur.cohen@embecosm.com", "date": "2022-03-11T13:19:56Z"}, "committer": {"name": "Arthur Cohen", "email": "arthur.cohen@embecosm.com", "date": "2022-03-11T13:19:56Z"}, "message": "builtin-macros: Add more documentation for defining builtins", "tree": {"sha": "8ec3199309d6906885453407274f8b0142a3d796", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ec3199309d6906885453407274f8b0142a3d796"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c62e9eb5ee3be6e321a1bf725cbc797ba7fda593", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c62e9eb5ee3be6e321a1bf725cbc797ba7fda593", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c62e9eb5ee3be6e321a1bf725cbc797ba7fda593", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c62e9eb5ee3be6e321a1bf725cbc797ba7fda593/comments", "author": {"login": "CohenArthur", "id": 43524065, "node_id": "MDQ6VXNlcjQzNTI0MDY1", "avatar_url": "https://avatars.githubusercontent.com/u/43524065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CohenArthur", "html_url": "https://github.com/CohenArthur", "followers_url": "https://api.github.com/users/CohenArthur/followers", "following_url": "https://api.github.com/users/CohenArthur/following{/other_user}", "gists_url": "https://api.github.com/users/CohenArthur/gists{/gist_id}", "starred_url": "https://api.github.com/users/CohenArthur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CohenArthur/subscriptions", "organizations_url": "https://api.github.com/users/CohenArthur/orgs", "repos_url": "https://api.github.com/users/CohenArthur/repos", "events_url": "https://api.github.com/users/CohenArthur/events{/privacy}", "received_events_url": "https://api.github.com/users/CohenArthur/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CohenArthur", "id": 43524065, "node_id": "MDQ6VXNlcjQzNTI0MDY1", "avatar_url": "https://avatars.githubusercontent.com/u/43524065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CohenArthur", "html_url": "https://github.com/CohenArthur", "followers_url": "https://api.github.com/users/CohenArthur/followers", "following_url": "https://api.github.com/users/CohenArthur/following{/other_user}", "gists_url": "https://api.github.com/users/CohenArthur/gists{/gist_id}", "starred_url": "https://api.github.com/users/CohenArthur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CohenArthur/subscriptions", "organizations_url": "https://api.github.com/users/CohenArthur/orgs", "repos_url": "https://api.github.com/users/CohenArthur/repos", "events_url": "https://api.github.com/users/CohenArthur/events{/privacy}", "received_events_url": "https://api.github.com/users/CohenArthur/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e64e6636ef823ac97ad889b71bb792fbe510580", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e64e6636ef823ac97ad889b71bb792fbe510580", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e64e6636ef823ac97ad889b71bb792fbe510580"}], "stats": {"total": 37, "additions": 37, "deletions": 0}, "files": [{"sha": "37923cfc819066d41ddfd65e9b526a6fd67fab1c", "filename": "gcc/rust/expand/rust-macro-builtins.h", "status": "modified", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c62e9eb5ee3be6e321a1bf725cbc797ba7fda593/gcc%2Frust%2Fexpand%2Frust-macro-builtins.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c62e9eb5ee3be6e321a1bf725cbc797ba7fda593/gcc%2Frust%2Fexpand%2Frust-macro-builtins.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fexpand%2Frust-macro-builtins.h?ref=c62e9eb5ee3be6e321a1bf725cbc797ba7fda593", "patch": "@@ -22,6 +22,43 @@\n #include \"rust-ast.h\"\n #include \"rust-location.h\"\n \n+/**\n+ * This class provides a list of builtin macros implemented by the compiler.\n+ * The functions defined are called \"builtin transcribers\" in that they replace\n+ * the transcribing part of a macro definition.\n+ *\n+ * Like regular macro transcribers, they are responsible for building and\n+ * returning an AST fragment: basically a vector of AST nodes put together.\n+ *\n+ * Unlike regular declarative macros where each match arm has its own associated\n+ * transcriber, builtin transcribers are responsible for handling all match arms\n+ * of the macro. This means that you should take extra care when implementing a\n+ * builtin containing multiple match arms: You will probably need to do some\n+ * lookahead in order to determine which match arm the user intended to use.\n+ *\n+ * An example of this is the `assert!()` macro:\n+ *\n+ * ```\n+ *  macro_rules! assert {\n+ *\t($cond:expr $(,)?) => {{ ... }};\n+ *\t($cond : expr, $ ($arg : tt) +) = > {{ ... }};\n+ * }\n+ * ```\n+ *\n+ * If more tokens exist beyond the optional comma, they need to be handled as\n+ * a token-tree for a custom panic message.\n+ *\n+ * These builtin macros with empty transcribers are defined in the standard\n+ * library. They are marked with a special attribute, `#[rustc_builtin_macro]`.\n+ * When this attribute is present on a macro definition, the compiler should\n+ * look for an associated transcriber in the mappings. Meaning that you must\n+ * remember to insert your transcriber in the `builtin_macros` map of the\n+ *`Mappings`.\n+ *\n+ * This map is built as a static variable in the `insert_macro_def()` method\n+ * of the `Mappings` class.\n+ */\n+\n namespace Rust {\n class MacroBuiltin\n {"}]}