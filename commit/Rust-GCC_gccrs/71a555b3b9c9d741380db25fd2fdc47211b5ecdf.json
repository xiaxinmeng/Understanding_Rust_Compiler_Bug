{"sha": "71a555b3b9c9d741380db25fd2fdc47211b5ecdf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzFhNTU1YjNiOWM5ZDc0MTM4MGRiMjVmZDJmZGM0NzIxMWI1ZWNkZg==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2008-05-28T13:05:35Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-05-28T13:05:35Z"}, "message": "gnat_rm.texi: Add note on Old giving warning when applied to constant\n\n2008-05-28  Robert Dewar  <dewar@adacore.com>\n\n\t* gnat_rm.texi: Add note on Old giving warning when applied to constant\n\n\t* sem_attr.adb (Analyze_Attribute, case Old): Give warning if prefix is\n\ta constant\n\nFrom-SVN: r136078", "tree": {"sha": "fb31690627a5834458cdbda545cabae658c2046f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb31690627a5834458cdbda545cabae658c2046f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/71a555b3b9c9d741380db25fd2fdc47211b5ecdf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71a555b3b9c9d741380db25fd2fdc47211b5ecdf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71a555b3b9c9d741380db25fd2fdc47211b5ecdf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71a555b3b9c9d741380db25fd2fdc47211b5ecdf/comments", "author": null, "committer": null, "parents": [{"sha": "6765b310618f5ce2cdd780f06b3653ecff8e355c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6765b310618f5ce2cdd780f06b3653ecff8e355c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6765b310618f5ce2cdd780f06b3653ecff8e355c"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "69baaa202c227d2365deda178bfd7baf7b125da7", "filename": "gcc/ada/gnat_rm.texi", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71a555b3b9c9d741380db25fd2fdc47211b5ecdf/gcc%2Fada%2Fgnat_rm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71a555b3b9c9d741380db25fd2fdc47211b5ecdf/gcc%2Fada%2Fgnat_rm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_rm.texi?ref=71a555b3b9c9d741380db25fd2fdc47211b5ecdf", "patch": "@@ -5803,6 +5803,10 @@ package body Old_Pkg is\n end Old_Pkg;\n @end smallexample\n \n+@noindent\n+Note that it is allowed to apply 'Old to a constant entity, but this will\n+result in a warning, since the old and new values will always be the same.\n+\n @node Passed_By_Reference\n @unnumberedsec Passed_By_Reference\n @cindex Parameters, when passed by reference"}, {"sha": "14f9102d369e2b00a0593c1bbc3101acf42b8900", "filename": "gcc/ada/sem_attr.adb", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71a555b3b9c9d741380db25fd2fdc47211b5ecdf/gcc%2Fada%2Fsem_attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71a555b3b9c9d741380db25fd2fdc47211b5ecdf/gcc%2Fada%2Fsem_attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_attr.adb?ref=71a555b3b9c9d741380db25fd2fdc47211b5ecdf", "patch": "@@ -3501,6 +3501,13 @@ package body Sem_Attr is\n             Error_Attr (\"attribute % cannot apply to limited objects\", P);\n          end if;\n \n+         if Is_Entity_Name (P)\n+           and then Is_Constant_Object (Entity (P))\n+         then\n+            Error_Msg_N\n+              (\"?attribute Old applied to constant has no effect\", P);\n+         end if;\n+\n          --  Check that the expression does not refer to local entities\n \n          Check_Local : declare"}]}