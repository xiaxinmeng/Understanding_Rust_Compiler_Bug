{"sha": "b86ba8a3efa78849fb43c627aa61764b642e14d1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjg2YmE4YTNlZmE3ODg0OWZiNDNjNjI3YWE2MTc2NGI2NDJlMTRkMQ==", "commit": {"author": {"name": "Andrea Tarani", "email": "andrea.tarani@gilbarco.com", "date": "2005-02-24T01:51:30Z"}, "committer": {"name": "Bernardo Innocenti", "email": "bernie@gcc.gnu.org", "date": "2005-02-24T01:51:30Z"}, "message": "m68k.c (m68k_save_reg): Also save A5 for non-leaf functions when -mid-shared-library is being used.\n\n\t* config/m68k/m68k.c (m68k_save_reg): Also save A5 for non-leaf\n\tfunctions when -mid-shared-library is being used.\n\nFrom-SVN: r95487", "tree": {"sha": "e7e17b5ea8ccac9d9725917baa317cd3ef175156", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7e17b5ea8ccac9d9725917baa317cd3ef175156"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b86ba8a3efa78849fb43c627aa61764b642e14d1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b86ba8a3efa78849fb43c627aa61764b642e14d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b86ba8a3efa78849fb43c627aa61764b642e14d1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b86ba8a3efa78849fb43c627aa61764b642e14d1/comments", "author": null, "committer": null, "parents": [{"sha": "0179f2c63218bf1d5d17ef1a7a0698d542f69864", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0179f2c63218bf1d5d17ef1a7a0698d542f69864", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0179f2c63218bf1d5d17ef1a7a0698d542f69864"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "d2321110ade039ce52b7ddf31079308faa03a70d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b86ba8a3efa78849fb43c627aa61764b642e14d1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b86ba8a3efa78849fb43c627aa61764b642e14d1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b86ba8a3efa78849fb43c627aa61764b642e14d1", "patch": "@@ -1,3 +1,8 @@\n+2005-02-24  Andrea Tarani  <andrea.tarani@gilbarco.com>\n+\n+\t* config/m68k/m68k.c (m68k_save_reg): Also save A5 for non-leaf\n+\tfunctions when -mid-shared-library is being used.\n+\n 2005-02-23  Daniel Jacobowitz  <dan@codesourcery.com>\n \n \t* doc/tm.texi (LINK_LIBGCC_SPECIAL): Remove."}, {"sha": "e3ac6fada8578960326f9137a022e071a72d5383", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b86ba8a3efa78849fb43c627aa61764b642e14d1/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b86ba8a3efa78849fb43c627aa61764b642e14d1/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=b86ba8a3efa78849fb43c627aa61764b642e14d1", "patch": "@@ -371,9 +371,13 @@ m68k_initial_elimination_offset (int from, int to)\n static bool\n m68k_save_reg (unsigned int regno, bool interrupt_handler)\n {\n-  if (flag_pic && current_function_uses_pic_offset_table\n-      && regno == PIC_OFFSET_TABLE_REGNUM)\n-    return true;\n+  if (flag_pic && regno == PIC_OFFSET_TABLE_REGNUM)\n+    {\n+      if (current_function_uses_pic_offset_table)\n+\treturn true;\n+      if (!current_function_is_leaf && TARGET_ID_SHARED_LIBRARY)\n+\treturn true;\n+    }\n \n   if (current_function_calls_eh_return)\n     {"}]}