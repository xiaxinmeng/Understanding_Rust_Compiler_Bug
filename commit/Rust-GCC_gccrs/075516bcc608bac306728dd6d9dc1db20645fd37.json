{"sha": "075516bcc608bac306728dd6d9dc1db20645fd37", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDc1NTE2YmNjNjA4YmFjMzA2NzI4ZGQ2ZDlkYzFkYjIwNjQ1ZmQzNw==", "commit": {"author": {"name": "Per Bothner", "email": "per@bothner.com", "date": "2001-05-21T21:37:36Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "2001-05-21T21:37:36Z"}, "message": "jcf-parse.c (read_class): If class is from .class or .zip file and it's already been read...\n\n\n\t* jcf-parse.c (read_class):  If class is from .class or .zip file\n\tand it's already been read, don't push/pop parser context.\n\nFrom-SVN: r42407", "tree": {"sha": "e7282074e60548e4c280100cd1c5a737b9b3efb5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7282074e60548e4c280100cd1c5a737b9b3efb5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/075516bcc608bac306728dd6d9dc1db20645fd37", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/075516bcc608bac306728dd6d9dc1db20645fd37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/075516bcc608bac306728dd6d9dc1db20645fd37", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/075516bcc608bac306728dd6d9dc1db20645fd37/comments", "author": {"login": "PerBothner", "id": 10293361, "node_id": "MDQ6VXNlcjEwMjkzMzYx", "avatar_url": "https://avatars.githubusercontent.com/u/10293361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PerBothner", "html_url": "https://github.com/PerBothner", "followers_url": "https://api.github.com/users/PerBothner/followers", "following_url": "https://api.github.com/users/PerBothner/following{/other_user}", "gists_url": "https://api.github.com/users/PerBothner/gists{/gist_id}", "starred_url": "https://api.github.com/users/PerBothner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PerBothner/subscriptions", "organizations_url": "https://api.github.com/users/PerBothner/orgs", "repos_url": "https://api.github.com/users/PerBothner/repos", "events_url": "https://api.github.com/users/PerBothner/events{/privacy}", "received_events_url": "https://api.github.com/users/PerBothner/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4694cec254258d31576e9a1623ebeb1c777765cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4694cec254258d31576e9a1623ebeb1c777765cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4694cec254258d31576e9a1623ebeb1c777765cb"}], "stats": {"total": 29, "additions": 19, "deletions": 10}, "files": [{"sha": "7b4c0e54ed05c696cb2be417c2196219beb50252", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/075516bcc608bac306728dd6d9dc1db20645fd37/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/075516bcc608bac306728dd6d9dc1db20645fd37/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=075516bcc608bac306728dd6d9dc1db20645fd37", "patch": "@@ -1,3 +1,8 @@\n+2001-05-21  Per Bothner  <per@bothner.com>\n+\n+\t* jcf-parse.c (read_class):  If class is from .class or .zip file\n+\tand it's already been read, don't push/pop parser context.\n+\n 2001-05-18  Per Bothner  <per@bothner.com>\n \n \t* jvspec.c (lang_specific_pre_link):  Re-arrange the linker"}, {"sha": "6127d9d64aca8d46a29ff0a4cf934361b242c89d", "filename": "gcc/java/jcf-parse.c", "status": "modified", "additions": 14, "deletions": 10, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/075516bcc608bac306728dd6d9dc1db20645fd37/gcc%2Fjava%2Fjcf-parse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/075516bcc608bac306728dd6d9dc1db20645fd37/gcc%2Fjava%2Fjcf-parse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-parse.c?ref=075516bcc608bac306728dd6d9dc1db20645fd37", "patch": "@@ -558,7 +558,6 @@ read_class (name)\n   tree save_current_class = current_class;\n   const char *save_input_filename = input_filename;\n   JCF *save_current_jcf = current_jcf;\n-  int generate;\n \n   if ((icv = IDENTIFIER_CLASS_VALUE (name)) != NULL_TREE)\n     {\n@@ -579,14 +578,15 @@ read_class (name)\n \n   current_jcf = jcf;\n \n-  java_parser_context_save_global ();\n-  java_push_parser_context ();\n   if (current_jcf->java_source)\n     {\n       const char *filename = current_jcf->filename;\n       tree file;\n       FILE *finput;\n+      int generate;\n \n+      java_parser_context_save_global ();\n+      java_push_parser_context ();\n       BUILD_FILENAME_IDENTIFIER_NODE (file, filename);\n       generate = IS_A_COMMAND_LINE_FILENAME_P (file);\n       if (wfl_operator == NULL_TREE)\n@@ -605,24 +605,28 @@ read_class (name)\n \t    fatal_io_error (\"can't close %s\", input_filename);\n \t}\n       JCF_FINISH (current_jcf);\n+      java_pop_parser_context (generate);\n+      java_parser_context_restore_global ();\n     }\n   else\n     {\n-      input_filename = current_jcf->filename;\n-      current_class = class;\n       if (class == NULL_TREE || ! CLASS_PARSED_P (class))\n \t{\n+\t  java_parser_context_save_global ();\n+\t  java_push_parser_context ();\n+\t  current_class = class;\n+\t  input_filename = current_jcf->filename;\n \t  if (JCF_SEEN_IN_ZIP (current_jcf))\n \t    read_zip_member(current_jcf,\n \t\t\t    current_jcf->zipd, current_jcf->zipd->zipf);\n \t  jcf_parse (current_jcf);\n+\t  class = current_class;\n+\t  java_pop_parser_context (0);\n+\t  java_parser_context_restore_global ();\n \t}\n-      layout_class (current_class);\n-      load_inner_classes (current_class);\n-      generate = 0;\n+      layout_class (class);\n+      load_inner_classes (class);\n     }\n-  java_pop_parser_context (generate);\n-  java_parser_context_restore_global ();\n \n   current_class = save_current_class;\n   input_filename = save_input_filename;"}]}