{"sha": "892e7fa695536ae398afc23664ee30df3f59a5d3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODkyZTdmYTY5NTUzNmFlMzk4YWZjMjM2NjRlZTMwZGYzZjU5YTVkMw==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2014-05-23T16:41:20Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@gcc.gnu.org", "date": "2014-05-23T16:41:20Z"}, "message": "rs6000: Make all shift instructions one type\n\nThis uses the attributes \"var_shift\" and \"dot\" to specify the differences:\n\n\tvar_shift_rotate    -> shift var_shift=yes\n\tdelayed_compare     -> shift var_shift=no  dot=yes\n\tvar_delayed_compare -> shift var_shift=yes dot=yes\n\nFrom-SVN: r210870", "tree": {"sha": "9b3fa581539d8e25c226995953241901f465231f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b3fa581539d8e25c226995953241901f465231f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/892e7fa695536ae398afc23664ee30df3f59a5d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/892e7fa695536ae398afc23664ee30df3f59a5d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/892e7fa695536ae398afc23664ee30df3f59a5d3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/892e7fa695536ae398afc23664ee30df3f59a5d3/comments", "author": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "441e02a5c44543f0afba3549b9939e54bafcff11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/441e02a5c44543f0afba3549b9939e54bafcff11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/441e02a5c44543f0afba3549b9939e54bafcff11"}], "stats": {"total": 645, "additions": 453, "deletions": 192}, "files": [{"sha": "dba8ed8f1684dedb73f7b3315055c6086393e036", "filename": "gcc/ChangeLog", "status": "modified", "additions": 65, "deletions": 0, "changes": 65, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -1,3 +1,68 @@\n+2014-05-23  Segher Boessenkool  <segher@kernel.crashing.org>\n+\n+\t* config/rs6000/rs6000.md (type): Delete \"var_shift_rotate\",\n+\t\"delayed_compare\", \"var_delayed_compare\".\n+\t(var_shift): New attribute.\n+\t(cell_micro): Adjust.\n+\t(*andsi3_internal2_mc, *andsi3_internal3_mc, *andsi3_internal4,\n+\t*andsi3_internal5_mc, *extzvsi_internal1, *extzvsi_internal2,\n+\trotlsi3, *rotlsi3_64, *rotlsi3_internal2, *rotlsi3_internal3,\n+\t*rotlsi3_internal4, *rotlsi3_internal5, *rotlsi3_internal6,\n+\t*rotlsi3_internal8le, *rotlsi3_internal8be, *rotlsi3_internal9le,\n+\t*rotlsi3_internal9be, *rotlsi3_internal10le, *rotlsi3_internal10be,\n+\t*rotlsi3_internal11le, *rotlsi3_internal11be, *rotlsi3_internal12le,\n+\t*rotlsi3_internal12be, ashlsi3, *ashlsi3_64, lshrsi3, *lshrsi3_64,\n+\t*lshiftrt_internal2le, *lshiftrt_internal2be, *lshiftrt_internal3le,\n+\t*lshiftrt_internal3be, *lshiftrt_internal5le, *lshiftrt_internal5be,\n+\t*lshiftrt_internal5le, *lshiftrt_internal5be, ashrsi3, *ashrsi3_64,\n+\trotldi3, *rotldi3_internal2, *rotldi3_internal3, *rotldi3_internal4,\n+\t*rotldi3_internal5, *rotldi3_internal6, *rotldi3_internal7le,\n+\t*rotldi3_internal7be, *rotldi3_internal8le, *rotldi3_internal8be,\n+\t*rotldi3_internal9le, *rotldi3_internal9be, *rotldi3_internal10le,\n+\t*rotldi3_internal10be, *rotldi3_internal11le, *rotldi3_internal11be,\n+\t*rotldi3_internal12le, *rotldi3_internal12be, *rotldi3_internal13le,\n+\t*rotldi3_internal13be, *rotldi3_internal14le, *rotldi3_internal14be,\n+\t*rotldi3_internal15le, *rotldi3_internal15be, *ashldi3_internal1,\n+\t*ashldi3_internal2, *ashldi3_internal3, *lshrdi3_internal1,\n+\t*lshrdi3_internal2, *lshrdi3_internal3, *ashrdi3_internal1,\n+\t*ashrdi3_internal2, *ashrdi3_internal3, *anddi3_internal2_mc,\n+\t*anddi3_internal3_mc, as well as 11 anonymous define_insns): Adjust.\n+\t* config/rs6000/rs6000.c (rs6000_adjust_cost, is_cracked_insn,\n+\tinsn_must_be_first_in_group, insn_must_be_last_in_group): Adjust.\n+\n+\t* config/rs6000/40x.md (ppc403-integer, ppc403-compare): Adjust.\n+\t* config/rs6000/440.md (ppc440-integer): Adjust.\n+\t* config/rs6000/476.md (ppc476-simple-integer, ppc476-compare):\n+\tAdjust.\n+\t* config/rs6000/601.md (ppc601-integer, ppc601-compare): Adjust.\n+\t* config/rs6000/603.md (ppc603-integer, ppc603-compare): Adjust.\n+\t* config/rs6000/6xx.md (ppc604-integer, ppc604-compare): Adjust.\n+\t* config/rs6000/7450.md (ppc7450-integer, ppc7450-compare):\n+\tAdjust.\n+\t* config/rs6000/7xx.md (ppc750-integer, ppc750-compare): Adjust.\n+\t* config/rs6000/8540.md (ppc8540_su): Adjust.\n+\t* config/rs6000/cell.md (cell-integer, cell-fast-cmp,\n+\tcell-cmp-microcoded): Adjust.\n+\t* config/rs6000/e300c2c3.md (ppce300c3_cmp): Adjust.\n+\t* config/rs6000/e500mc.md (e500mc_su): Adjust.\n+\t* config/rs6000/e500mc64.md (e500mc64_su, e500mc64_su2,\n+\te500mc64_delayed): Adjust.\n+\t* config/rs6000/e5500.md (e5500_sfx, e5500_delayed): Adjust.\n+\t* config/rs6000/e6500.md (e6500_sfx, e6500_delayed): Adjust.\n+\t* config/rs6000/mpc.md (mpccore-integer, mpccore-compare): Adjust.\n+\t* config/rs6000/power4.md (power4-integer, power4-compare):\n+\tAdjust.\n+\t* config/rs6000/power5.md (power5-integer, power5-compare):\n+\tAdjust.\n+\t* config/rs6000/power6.md (power6-shift, power6-var-rotate,\n+\tpower6-delayed-compare, power6-var-delayed-compare): Adjust.\n+\t* config/rs6000/power7.md (power7-integer, power7-compare):\n+\tAdjust.\n+\t* config/rs6000/power8.md (power8-1cyc, power8-compare): Adjust.\n+\tAdjust comment.\n+\t* config/rs6000/rs64.md (rs64a-integer, rs64a-compare): Adjust.\n+\t* config/rs6000/titan.md (titan_fxu_shift_and_rotate): Adjust.\n+\n 2014-05-23  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* config/rs6000/rs6000.md (type): Delete \"idiv\", \"ldiv\".  Add"}, {"sha": "30ac01df0512081463695ee3cea0d5cd606672d9", "filename": "gcc/config/rs6000/40x.md", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F40x.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F40x.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F40x.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -36,8 +36,9 @@\n   \"iu_40x\")\n \n (define_insn_reservation \"ppc403-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n-                        var_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc403,ppc405\"))\n   \"iu_40x\")\n \n@@ -52,8 +53,9 @@\n   \"iu_40x,iu_40x,iu_40x\")\n \n (define_insn_reservation \"ppc403-compare\" 3\n-  (and (eq_attr \"type\" \"cmp,fast_compare,compare,delayed_compare,\\\n-                        var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc403,ppc405\"))\n   \"iu_40x,nothing,bpu_40x\")\n "}, {"sha": "3a36ffb38cd0ff8f246ae3cc88cb7a063113cc93", "filename": "gcc/config/rs6000/440.md", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F440.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F440.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F440.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -53,8 +53,7 @@\n   \"ppc440_issue,ppc440_l_pipe\")\n \n (define_insn_reservation \"ppc440-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,\\\n-                        trap,var_shift_rotate,cntlz,exts,isel\")\n+  (and (eq_attr \"type\" \"integer,insert,shift,trap,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppc440\"))\n   \"ppc440_issue,ppc440_i_pipe|ppc440_j_pipe\")\n "}, {"sha": "41cd247b591d3a9c9b28a890e376bb434a053a1c", "filename": "gcc/config/rs6000/476.md", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F476.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F476.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F476.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -63,7 +63,9 @@\n    ppc476_lj_pipe\")\n \n (define_insn_reservation \"ppc476-simple-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,var_shift_rotate,exts,shift\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,exts\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc476\"))\n   \"ppc476_issue,\\\n    ppc476_i_pipe|ppc476_lj_pipe\")\n@@ -75,8 +77,10 @@\n    ppc476_i_pipe\")\n \n (define_insn_reservation \"ppc476-compare\" 4\n-  (and (eq_attr \"type\" \"compare,delayed_compare,fast_compare,mfcr,mfcrf,\\\n-                        mtcr,mfjmpr,mtjmpr,var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"compare,fast_compare,mfcr,mfcrf,\\\n+                             mtcr,mfjmpr,mtjmpr\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc476\"))\n   \"ppc476_issue,\\\n    ppc476_i_pipe\")"}, {"sha": "f6eca7dc2e00b1270652976bbae2dc513ee84b1a", "filename": "gcc/config/rs6000/601.md", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F601.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F601.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F601.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -45,8 +45,9 @@\n   \"iu_ppc601+fpu_ppc601\")\n \n (define_insn_reservation \"ppc601-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,\\\n-                        trap,var_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc601\"))\n   \"iu_ppc601\")\n \n@@ -73,8 +74,9 @@\n ; compare executes on integer unit, but feeds insns which\n ; execute on the branch unit.\n (define_insn_reservation \"ppc601-compare\" 3\n-  (and (eq_attr \"type\" \"cmp,compare,delayed_compare,\\\n-                        var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc601\"))\n   \"iu_ppc601,nothing,bpu_ppc601\")\n "}, {"sha": "f64f4287c1b9f05191202e1d7a1cbd914ba827ad", "filename": "gcc/config/rs6000/603.md", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F603.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F603.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F603.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -58,8 +58,9 @@\n   \"lsu_603\")\n \n (define_insn_reservation \"ppc603-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n-                        var_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc603\"))\n   \"iu_603\")\n \n@@ -92,8 +93,9 @@\n   \"iu_603*37\")\n \n (define_insn_reservation \"ppc603-compare\" 3\n-  (and (eq_attr \"type\" \"cmp,fast_compare,compare,delayed_compare,\\\n-                        var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc603\"))\n   \"iu_603,nothing,bpu_603\")\n "}, {"sha": "6d4ccb7c0d8225c80914cd5e15c713d2d70b97ab", "filename": "gcc/config/rs6000/6xx.md", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F6xx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F6xx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F6xx.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -73,8 +73,9 @@\n   \"lsu_6xx\")\n   \n (define_insn_reservation \"ppc604-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n-                        var_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc604,ppc604e,ppc620,ppc630\"))\n   \"iu1_6xx|iu2_6xx\")\n \n@@ -146,8 +147,9 @@\n   \"mciu_6xx*36\")\n \n (define_insn_reservation \"ppc604-compare\" 3\n-  (and (eq_attr \"type\" \"cmp,fast_compare,compare,delayed_compare,\\\n-                        var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc604,ppc604e,ppc620,ppc630\"))\n   \"(iu1_6xx|iu2_6xx)\")\n "}, {"sha": "39815e96d76b22ea73ff1267130cfd544d52c1cc", "filename": "gcc/config/rs6000/7450.md", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F7450.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F7450.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F7450.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -73,8 +73,9 @@\n   \"ppc7450_du,lsu_7450\")\n \n (define_insn_reservation \"ppc7450-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,\\\n-                        trap,var_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc7450\"))\n   \"ppc7450_du,iu1_7450|iu2_7450|iu3_7450\")\n \n@@ -107,8 +108,9 @@\n   \"ppc7450_du,mciu_7450*23\")\n \n (define_insn_reservation \"ppc7450-compare\" 2\n-  (and (eq_attr \"type\" \"cmp,fast_compare,compare,delayed_compare,\\\n-                        var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc7450\"))\n   \"ppc7450_du,(iu1_7450|iu2_7450|iu3_7450)\")\n "}, {"sha": "f9a9fb88e59189937225f5b55303ce80f240b6b4", "filename": "gcc/config/rs6000/7xx.md", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F7xx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F7xx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F7xx.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -61,8 +61,9 @@\n   \"ppc750_du,lsu_7xx\")\n \n (define_insn_reservation \"ppc750-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,\\\n-                        trap,var_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"ppc750,ppc7400\"))\n   \"ppc750_du,iu1_7xx|iu2_7xx\")\n \n@@ -100,8 +101,9 @@\n   \"ppc750_du,iu1_7xx*19\")\n \n (define_insn_reservation \"ppc750-compare\" 2\n-  (and (eq_attr \"type\" \"cmp,fast_compare,compare,delayed_compare,\\\n-                        var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc750,ppc7400\"))\n   \"ppc750_du,(iu1_7xx|iu2_7xx)\")\n "}, {"sha": "fccddfe9a4e7fbf433c49dcfa400ddeefc3284cb", "filename": "gcc/config/rs6000/8540.md", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F8540.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2F8540.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F8540.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -84,9 +84,8 @@\n \n ;; Simple SU insns\n (define_insn_reservation \"ppc8540_su\" 1\n-  (and (eq_attr \"type\" \"integer,insert,cmp,compare,\\\n-                        delayed_compare,var_delayed_compare,fast_compare,\\\n-                        shift,trap,var_shift_rotate,cntlz,exts,isel\")\n+  (and (eq_attr \"type\" \"integer,insert,cmp,compare,fast_compare,\\\n+                        shift,trap,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppc8540,ppc8548\"))\n   \"ppc8540_decode,ppc8540_issue+ppc8540_su_stage0+ppc8540_retire\")\n "}, {"sha": "923524d72339b31fae416f6fe6cde12219ab968a", "filename": "gcc/config/rs6000/cell.md", "status": "modified", "additions": 13, "deletions": 10, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fcell.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fcell.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fcell.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -166,8 +166,9 @@\n \n ;; Integer latency is 2 cycles\n (define_insn_reservation \"cell-integer\" 2\n-  (and (ior (eq_attr \"type\" \"integer,shift,trap,\\\n-\t\t\t     var_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,trap,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\"))\n \t    (and (eq_attr \"type\" \"insert\")\n \t\t (eq_attr \"size\" \"64\")))\n        (eq_attr \"cpu\" \"cell\"))\n@@ -200,17 +201,19 @@\n \n ;; add, addo, sub, subo, alter cr0, rldcli, rlwinm \n (define_insn_reservation \"cell-fast-cmp\" 2\n-  (and (and (eq_attr \"type\" \"fast_compare,delayed_compare,compare,\\\n-\t\t\t    var_delayed_compare\")\n-            (eq_attr \"cpu\" \"cell\"))\n-        (eq_attr \"cell_micro\" \"not\"))\n+  (and (ior (eq_attr \"type\" \"fast_compare,compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n+       (eq_attr \"cpu\" \"cell\")\n+       (eq_attr \"cell_micro\" \"not\"))\n   \"slot01,fxu_cell\")\n \n (define_insn_reservation \"cell-cmp-microcoded\" 9\n-  (and (and (eq_attr \"type\" \"fast_compare,delayed_compare,compare,\\\n-\t\t\t    var_delayed_compare\")\n-            (eq_attr \"cpu\" \"cell\"))\n-        (eq_attr \"cell_micro\" \"always\"))\n+  (and (ior (eq_attr \"type\" \"fast_compare,compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n+       (eq_attr \"cpu\" \"cell\")\n+       (eq_attr \"cell_micro\" \"always\"))\n   \"slot0+slot1,fxu_cell,fxu_cell*7\")\n \n ;; mulld"}, {"sha": "26a449d4a05b37a34258d5a737576ac2e302c1b5", "filename": "gcc/config/rs6000/e300c2c3.md", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -83,7 +83,9 @@\n \n ;; Compares can be executed either one of the IU or SRU\n (define_insn_reservation \"ppce300c3_cmp\" 1\n-  (and (eq_attr \"type\" \"cmp,compare,delayed_compare,fast_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,compare,fast_compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (ior (eq_attr \"cpu\" \"ppce300c2\") (eq_attr \"cpu\" \"ppce300c3\")))\n   \"ppce300c3_decode,ppce300c3_issue+(ppce300c3_iu_stage0|ppce300c3_sru_stage0) \\\n         +ppce300c3_retire\")"}, {"sha": "834e0d2ff69a89a8c2cff06038f7843a71c205ae", "filename": "gcc/config/rs6000/e500mc.md", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fe500mc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fe500mc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe500mc.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -70,9 +70,8 @@\n \n ;; Simple SU insns.\n (define_insn_reservation \"e500mc_su\" 1\n-  (and (eq_attr \"type\" \"integer,insert,cmp,compare,\\\n-                        delayed_compare,var_delayed_compare,fast_compare,\\\n-                        shift,trap,var_shift_rotate,cntlz,exts,isel\")\n+  (and (eq_attr \"type\" \"integer,insert,cmp,compare,fast_compare,\\\n+                        shift,trap,cntlz,exts,isel\")\n        (eq_attr \"cpu\" \"ppce500mc\"))\n   \"e500mc_decode,e500mc_issue+e500mc_su_stage0+e500mc_retire\")\n "}, {"sha": "026d016223c89180b6550b81c7f58e76037ba2eb", "filename": "gcc/config/rs6000/e500mc64.md", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fe500mc64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fe500mc64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe500mc64.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -69,18 +69,24 @@\n \n ;; Simple SU insns.\n (define_insn_reservation \"e500mc64_su\" 1\n-  (and (eq_attr \"type\" \"integer,insert,delayed_compare,\\\n-\tshift,cntlz,exts\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,cntlz,exts\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")\n+\t\t (eq_attr \"var_shift\" \"no\")))\n        (eq_attr \"cpu\" \"ppce500mc64\"))\n   \"e500mc64_decode,e500mc64_issue+e500mc64_su_stage0+e500mc64_retire\")\n \n (define_insn_reservation \"e500mc64_su2\" 2\n-  (and (eq_attr \"type\" \"cmp,compare,delayed_compare,fast_compare,trap\")\n+  (and (ior (eq_attr \"type\" \"cmp,compare,fast_compare,trap\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")\n+\t\t (eq_attr \"var_shift\" \"no\")))\n        (eq_attr \"cpu\" \"ppce500mc64\"))\n   \"e500mc64_decode,e500mc64_issue+e500mc64_su_stage0,e500mc64_retire\")\n \n (define_insn_reservation \"e500mc64_delayed\" 2\n-  (and (eq_attr \"type\" \"var_shift_rotate,var_delayed_compare\")\n+  (and (eq_attr \"type\" \"shift\")\n+       (eq_attr \"var_shift\" \"yes\")\n        (eq_attr \"cpu\" \"ppce500mc64\"))\n   \"e500mc64_decode,e500mc64_issue+e500mc64_su_stage0,e500mc64_retire\")\n "}, {"sha": "edd0ef5006859f768ec69186ebc9c9e0e931fc1c", "filename": "gcc/config/rs6000/e5500.md", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fe5500.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fe5500.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe5500.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -56,8 +56,9 @@\n \n ;; SFX.\n (define_insn_reservation \"e5500_sfx\" 1\n-  (and (eq_attr \"type\" \"integer,insert,delayed_compare,\\\n-\tshift,cntlz,exts\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,cntlz,exts\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"var_shift\" \"no\")))\n        (eq_attr \"cpu\" \"ppce5500\"))\n   \"e5500_decode,e5500_sfx\")\n \n@@ -67,7 +68,8 @@\n   \"e5500_decode,e5500_sfx\")\n \n (define_insn_reservation \"e5500_delayed\" 2\n-  (and (eq_attr \"type\" \"var_shift_rotate,var_delayed_compare\")\n+  (and (eq_attr \"type\" \"shift\")\n+       (eq_attr \"var_shift\" \"yes\")\n        (eq_attr \"cpu\" \"ppce5500\"))\n   \"e5500_decode,e5500_sfx*2\")\n "}, {"sha": "609d5641a3786cd33c04f50e7e3242f8ac6eed3d", "filename": "gcc/config/rs6000/e6500.md", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fe6500.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fe6500.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe6500.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -59,8 +59,9 @@\n \n ;; SFX.\n (define_insn_reservation \"e6500_sfx\" 1\n-  (and (eq_attr \"type\" \"integer,insert,delayed_compare,\\\n-\tshift,cntlz,exts\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,cntlz,exts\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"var_shift\" \"no\")))\n        (eq_attr \"cpu\" \"ppce6500\"))\n   \"e6500_decode,e6500_sfx\")\n \n@@ -70,7 +71,8 @@\n   \"e6500_decode,e6500_sfx\")\n \n (define_insn_reservation \"e6500_delayed\" 2\n-  (and (eq_attr \"type\" \"var_shift_rotate,var_delayed_compare\")\n+  (and (eq_attr \"type\" \"shift\")\n+       (eq_attr \"var_shift\" \"yes\")\n        (eq_attr \"cpu\" \"ppce6500\"))\n   \"e6500_decode,e6500_sfx*2\")\n "}, {"sha": "f83c752eef78836176b279f433e709394b42f95f", "filename": "gcc/config/rs6000/mpc.md", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fmpc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fmpc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fmpc.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -41,8 +41,9 @@\n   \"lsu_mpc\")\n \n (define_insn_reservation \"mpccore-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n-                        var_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"mpccore\"))\n   \"iu_mpc\")\n \n@@ -68,8 +69,9 @@\n   \"mciu_mpc*6\")\n \n (define_insn_reservation \"mpccore-compare\" 3\n-  (and (eq_attr \"type\" \"cmp,fast_compare,compare,delayed_compare,\\\n-                        var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"mpccore\"))\n   \"iu_mpc,nothing,bpu_mpc\")\n "}, {"sha": "6a1c108843e60fda99e51e9e0c820a7be5b0c6b7", "filename": "gcc/config/rs6000/power4.md", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fpower4.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fpower4.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower4.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -210,8 +210,9 @@\n \n ; Integer latency is 2 cycles\n (define_insn_reservation \"power4-integer\" 2\n-  (and (ior (eq_attr \"type\" \"integer,shift,trap,\\\n-\t\t\t     var_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,trap,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\"))\n \t    (and (eq_attr \"type\" \"insert\")\n \t\t (eq_attr \"size\" \"64\")))\n        (eq_attr \"cpu\" \"power4\"))\n@@ -254,7 +255,9 @@\n   \"iq_power4\")\n \n (define_insn_reservation \"power4-compare\" 2\n-  (and (eq_attr \"type\" \"compare,delayed_compare,var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"power4\"))\n   \"(du1_power4+du2_power4|du2_power4+du3_power4|du3_power4+du4_power4),\\\n    ((iu1_power4,iu2_power4)\\"}, {"sha": "4ebb6cf28d3bd121b4fbd9dd27647ea4aa568f67", "filename": "gcc/config/rs6000/power5.md", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fpower5.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fpower5.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower5.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -166,8 +166,9 @@\n \n ; Integer latency is 2 cycles\n (define_insn_reservation \"power5-integer\" 2\n-  (and (ior (eq_attr \"type\" \"integer,shift,trap,\\\n-\t\t\t    var_shift_rotate,cntlz,exts,isel,popcnt\")\n+  (and (ior (eq_attr \"type\" \"integer,trap,cntlz,exts,isel,popcnt\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\"))\n \t    (and (eq_attr \"type\" \"insert\")\n \t\t (eq_attr \"size\" \"64\")))\n        (eq_attr \"cpu\" \"power5\"))\n@@ -207,7 +208,9 @@\n   \"iq_power5\")\n \n (define_insn_reservation \"power5-compare\" 2\n-  (and (eq_attr \"type\" \"compare,delayed_compare,var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"power5\"))\n   \"du1_power5+du2_power5,iu1_power5,iu2_power5\")\n "}, {"sha": "b659645a76dfad571327970e94df9ce310b1a5c3", "filename": "gcc/config/rs6000/power6.md", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fpower6.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fpower6.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower6.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -238,6 +238,8 @@\n \n (define_insn_reservation \"power6-shift\" 1\n   (and (eq_attr \"type\" \"shift\")\n+       (eq_attr \"var_shift\" \"no\")\n+       (eq_attr \"dot\" \"no\")\n        (eq_attr \"cpu\" \"power6\"))\n   \"FXU_power6\")\n \n@@ -287,7 +289,9 @@\n   \"store_data_bypass_p\")\n \n (define_insn_reservation \"power6-var-rotate\" 4\n-  (and (eq_attr \"type\" \"var_shift_rotate\")\n+  (and (eq_attr \"type\" \"shift\")\n+       (eq_attr \"var_shift\" \"yes\")\n+       (eq_attr \"dot\" \"no\")\n        (eq_attr \"cpu\" \"power6\"))\n   \"FXU_power6\")\n \n@@ -349,12 +353,16 @@\n   \"store_data_bypass_p\")\n \n (define_insn_reservation \"power6-delayed-compare\" 2 ; N/A\n-  (and (eq_attr \"type\" \"delayed_compare\")\n+  (and (eq_attr \"type\" \"shift\")\n+       (eq_attr \"var_shift\" \"no\")\n+       (eq_attr \"dot\" \"yes\")\n        (eq_attr \"cpu\" \"power6\"))\n   \"FXU_power6\")\n \n (define_insn_reservation \"power6-var-delayed-compare\" 4\n-  (and (eq_attr \"type\" \"var_delayed_compare\")\n+  (and (eq_attr \"type\" \"shift\")\n+       (eq_attr \"var_shift\" \"yes\")\n+       (eq_attr \"dot\" \"yes\")\n        (eq_attr \"cpu\" \"power6\"))\n   \"FXU_power6\")\n "}, {"sha": "f4bd0b8c23fc1fd1f0c0d76bdacaec940d8fc7e0", "filename": "gcc/config/rs6000/power7.md", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fpower7.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fpower7.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower7.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -174,8 +174,9 @@\n \n ; FX Unit\n (define_insn_reservation \"power7-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n-                        var_shift_rotate,exts,isel,popcnt\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,trap,exts,isel,popcnt\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"power7\"))\n   \"DU_power7,FXU_power7\")\n \n@@ -200,7 +201,9 @@\n   \"DU_power7,FXU_power7\")\n \n (define_insn_reservation \"power7-compare\" 2\n-  (and (eq_attr \"type\" \"compare,delayed_compare,var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"power7\"))\n   \"DU2F_power7,FXU_power7,FXU_power7\")\n "}, {"sha": "2d50d4a69c72f5489330400a2a5cc648078179a8", "filename": "gcc/config/rs6000/power8.md", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fpower8.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Fpower8.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower8.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -168,8 +168,9 @@\n \n ; FX Unit\n (define_insn_reservation \"power8-1cyc\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n-                        var_shift_rotate,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,trap,exts,isel\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"power8\"))\n   \"DU_any_power8,FXU_power8\")\n \n@@ -211,10 +212,11 @@\n   \"DU_any_power8,FXU_power8\")\n \n ; compare : rldicl./exts./etc\n-; delayed_compare : rlwinm./slwi./etc\n-; var_delayed_compare : rlwnm./slw./etc\n+; shift with dot : rlwinm./slwi./rlwnm./slw./etc\n (define_insn_reservation \"power8-compare\" 2\n-  (and (eq_attr \"type\" \"compare,delayed_compare,var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"power8\"))\n   \"DU_cracked_power8,FXU_power8,FXU_power8\")\n "}, {"sha": "53a22deeb8fec36bc248a18e5cac7e0b54616618", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 36, "deletions": 21, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -26188,7 +26188,6 @@ rs6000_adjust_cost (rtx insn, rtx link, rtx dep_insn, int cost)\n                 {\n                 case TYPE_CMP:\n                 case TYPE_COMPARE:\n-                case TYPE_DELAYED_COMPARE:\n                 case TYPE_FPCOMPARE:\n                 case TYPE_CR_LOGICAL:\n                 case TYPE_DELAYED_CR:\n@@ -26198,6 +26197,12 @@ rs6000_adjust_cost (rtx insn, rtx link, rtx dep_insn, int cost)\n \t\t    return cost + 2;\n \t\t  else\n \t\t    break;\n+                case TYPE_SHIFT:\n+\t\t  if (get_attr_dot (dep_insn) == DOT_YES\n+\t\t      && get_attr_var_shift (dep_insn) == VAR_SHIFT_NO)\n+\t\t    return cost + 2;\n+\t\t  else\n+\t\t    break;\n \t\tdefault:\n \t\t  break;\n \t\t}\n@@ -26228,18 +26233,17 @@ rs6000_adjust_cost (rtx insn, rtx link, rtx dep_insn, int cost)\n                                == SIGN_EXTEND_YES ? 6 : 4;\n                       break;\n                     }\n-                  case TYPE_VAR_SHIFT_ROTATE:\n-                  case TYPE_VAR_DELAYED_COMPARE:\n+                  case TYPE_SHIFT:\n                     {\n                       if (! store_data_bypass_p (dep_insn, insn))\n-                        return 6;\n+                        return get_attr_var_shift (dep_insn) == VAR_SHIFT_YES ?\n+                               6 : 3;\n                       break;\n \t\t    }\n                   case TYPE_INTEGER:\n                   case TYPE_COMPARE:\n                   case TYPE_FAST_COMPARE:\n                   case TYPE_EXTS:\n-                  case TYPE_SHIFT:\n                   case TYPE_INSERT:\n                     {\n                       if (! store_data_bypass_p (dep_insn, insn))\n@@ -26292,18 +26296,17 @@ rs6000_adjust_cost (rtx insn, rtx link, rtx dep_insn, int cost)\n                                == SIGN_EXTEND_YES ? 6 : 4;\n                       break;\n                     }\n-                  case TYPE_VAR_SHIFT_ROTATE:\n-                  case TYPE_VAR_DELAYED_COMPARE:\n+                  case TYPE_SHIFT:\n                     {\n                       if (set_to_load_agen (dep_insn, insn))\n-                        return 6;\n+                        return get_attr_var_shift (dep_insn) == VAR_SHIFT_YES ?\n+                               6 : 3;\n                       break;\n-                    }\n+\t\t    }\n                   case TYPE_INTEGER:\n                   case TYPE_COMPARE:\n                   case TYPE_FAST_COMPARE:\n                   case TYPE_EXTS:\n-                  case TYPE_SHIFT:\n                   case TYPE_INSERT:\n                     {\n                       if (set_to_load_agen (dep_insn, insn))\n@@ -26477,7 +26480,10 @@ is_cracked_insn (rtx insn)\n \t  || ((type == TYPE_FPLOAD || type == TYPE_FPSTORE)\n \t      && get_attr_update (insn) == UPDATE_YES)\n \t  || type == TYPE_DELAYED_CR\n-\t  || type == TYPE_COMPARE || type == TYPE_DELAYED_COMPARE\n+\t  || type == TYPE_COMPARE\n+\t  || (type == TYPE_SHIFT\n+\t      && get_attr_dot (insn) == DOT_YES\n+\t      && get_attr_var_shift (insn) == VAR_SHIFT_NO)\n \t  || (type == TYPE_MUL\n \t      && get_attr_dot (insn) == DOT_YES)\n \t  || type == TYPE_DIV\n@@ -27307,12 +27313,9 @@ insn_must_be_first_in_group (rtx insn)\n         {\n         case TYPE_EXTS:\n         case TYPE_CNTLZ:\n-        case TYPE_SHIFT:\n-        case TYPE_VAR_SHIFT_ROTATE:\n         case TYPE_TRAP:\n         case TYPE_MUL:\n         case TYPE_INSERT:\n-        case TYPE_DELAYED_COMPARE:\n         case TYPE_FPCOMPARE:\n         case TYPE_MFCR:\n         case TYPE_MTCR:\n@@ -27323,6 +27326,12 @@ insn_must_be_first_in_group (rtx insn)\n         case TYPE_LOAD_L:\n         case TYPE_STORE_C:\n           return true;\n+        case TYPE_SHIFT:\n+          if (get_attr_dot (insn) == DOT_NO\n+              || get_attr_var_shift (insn) == VAR_SHIFT_NO)\n+            return true;\n+          else\n+            break;\n         case TYPE_DIV:\n           if (get_attr_size (insn) == SIZE_32)\n             return true;\n@@ -27351,15 +27360,14 @@ insn_must_be_first_in_group (rtx insn)\n         case TYPE_MTCR:\n         case TYPE_DIV:\n         case TYPE_COMPARE:\n-        case TYPE_DELAYED_COMPARE:\n-        case TYPE_VAR_DELAYED_COMPARE:\n         case TYPE_ISYNC:\n         case TYPE_LOAD_L:\n         case TYPE_STORE_C:\n         case TYPE_MFJMPR:\n         case TYPE_MTJMPR:\n           return true;\n         case TYPE_MUL:\n+        case TYPE_SHIFT:\n           if (get_attr_dot (insn) == DOT_YES)\n             return true;\n           else\n@@ -27392,8 +27400,6 @@ insn_must_be_first_in_group (rtx insn)\n         case TYPE_MFCRF:\n         case TYPE_MTCR:\n         case TYPE_COMPARE:\n-        case TYPE_DELAYED_COMPARE:\n-        case TYPE_VAR_DELAYED_COMPARE:\n         case TYPE_SYNC:\n         case TYPE_ISYNC:\n         case TYPE_LOAD_L:\n@@ -27402,6 +27408,12 @@ insn_must_be_first_in_group (rtx insn)\n         case TYPE_MFJMPR:\n         case TYPE_MTJMPR:\n           return true;\n+        case TYPE_SHIFT:\n+        case TYPE_MUL:\n+          if (get_attr_dot (insn) == DOT_YES)\n+            return true;\n+          else\n+            break;\n         case TYPE_LOAD:\n           if (get_attr_sign_extend (insn) == SIGN_EXTEND_YES\n               || get_attr_update (insn) == UPDATE_YES)\n@@ -27454,11 +27466,8 @@ insn_must_be_last_in_group (rtx insn)\n       {\n       case TYPE_EXTS:\n       case TYPE_CNTLZ:\n-      case TYPE_SHIFT:\n-      case TYPE_VAR_SHIFT_ROTATE:\n       case TYPE_TRAP:\n       case TYPE_MUL:\n-      case TYPE_DELAYED_COMPARE:\n       case TYPE_FPCOMPARE:\n       case TYPE_MFCR:\n       case TYPE_MTCR:\n@@ -27469,6 +27478,12 @@ insn_must_be_last_in_group (rtx insn)\n       case TYPE_LOAD_L:\n       case TYPE_STORE_C:\n         return true;\n+      case TYPE_SHIFT:\n+        if (get_attr_dot (insn) == DOT_NO\n+            || get_attr_var_shift (insn) == VAR_SHIFT_NO)\n+          return true;\n+        else\n+          break;\n       case TYPE_DIV:\n         if (get_attr_size (insn) == SIZE_32)\n           return true;"}, {"sha": "c8709473f6dde2e2b604bfefd48c913fbb22ad70", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 219, "deletions": 89, "changes": 308, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -159,13 +159,13 @@\n ;; computations.\n (define_attr \"type\"\n   \"integer,two,three,\n-   shift,var_shift_rotate,insert,\n+   shift,insert,\n    mul,halfmul,div,\n    exts,cntlz,popcnt,isel,\n    load,store,fpload,fpstore,vecload,vecstore,\n    cmp,\n    branch,jmpreg,mfjmpr,mtjmpr,trap,isync,sync,load_l,store_c,\n-   compare,fast_compare,delayed_compare,var_delayed_compare,\n+   compare,fast_compare,\n    cr_logical,delayed_cr,mfcr,mfcrf,mtcr,\n    fpcompare,fp,fpsimple,dmul,sdiv,ddiv,ssqrt,dsqrt,\n    brinc,\n@@ -205,6 +205,10 @@\n \t\t(const_string \"yes\")\n \t\t(const_string \"no\")))\n \n+;; Is this instruction using a shift amount from a register?\n+;; This is used for shift insns.\n+(define_attr \"var_shift\" \"no,yes\" (const_string \"no\"))\n+\n ;; Define floating point instruction sub-types for use with Xfpu.md\n (define_attr \"fp_type\" \"fp_default,fp_addsub_s,fp_addsub_d,fp_mul_s,fp_mul_d,fp_div_s,fp_div_d,fp_maddsub_s,fp_maddsub_d,fp_sqrt_s,fp_sqrt_d\" (const_string \"fp_default\"))\n \n@@ -236,11 +240,13 @@\n ;; If this instruction is microcoded on the CELL processor\n ; The default for load extended, the recorded instructions and rotate/shifts by a variable is always microcoded\n (define_attr \"cell_micro\" \"not,conditional,always\"\n-  (if_then_else (ior (eq_attr \"type\" \"compare,delayed_compare,var_shift_rotate,var_delayed_compare\")\n-\t\t     (and (eq_attr \"type\" \"mul\")\n+  (if_then_else (ior (eq_attr \"type\" \"compare\")\n+\t\t     (and (eq_attr \"type\" \"shift,mul\")\n \t\t\t  (eq_attr \"dot\" \"yes\"))\n \t\t     (and (eq_attr \"type\" \"load\")\n-\t\t\t  (eq_attr \"sign_extend\" \"yes\")))\n+\t\t\t  (eq_attr \"sign_extend\" \"yes\"))\n+\t\t     (and (eq_attr \"type\" \"shift\")\n+\t\t\t  (eq_attr \"var_shift\" \"yes\")))\n \t\t(const_string \"always\")\n \t\t(const_string \"not\")))\n \n@@ -2936,8 +2942,9 @@\n    #\n    #\n    #\"\n-  [(set_attr \"type\" \"fast_compare,fast_compare,fast_compare,delayed_compare,\\\n+  [(set_attr \"type\" \"fast_compare,fast_compare,fast_compare,shift,\\\n \t\t     compare,compare,compare,compare\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,4,4,8,8,8,8\")])\n \n (define_insn \"*andsi3_internal3_mc\"\n@@ -2957,8 +2964,9 @@\n    #\n    #\n    #\"\n-  [(set_attr \"type\" \"compare,fast_compare,fast_compare,delayed_compare,compare,\\\n+  [(set_attr \"type\" \"compare,fast_compare,fast_compare,shift,compare,\\\n \t\t     compare,compare,compare\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"8,4,4,4,8,8,8,8\")])\n \n (define_split\n@@ -3017,8 +3025,9 @@\n    #\n    #\n    #\"\n-  [(set_attr \"type\" \"fast_compare,fast_compare,fast_compare,delayed_compare,\\\n+  [(set_attr \"type\" \"fast_compare,fast_compare,fast_compare,shift,\\\n \t\t     compare,compare,compare,compare\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,4,4,8,8,8,8\")])\n \n (define_insn \"*andsi3_internal5_mc\"\n@@ -3040,8 +3049,9 @@\n    #\n    #\n    #\"\n-  [(set_attr \"type\" \"compare,fast_compare,fast_compare,delayed_compare,compare,\\\n+  [(set_attr \"type\" \"compare,fast_compare,fast_compare,shift,compare,\\\n \t\t     compare,compare,compare\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"8,4,4,4,8,8,8,8\")])\n \n (define_split\n@@ -3675,7 +3685,8 @@\n     operands[3] = GEN_INT (start + size);\n   return \\\"rlwinm. %4,%1,%3,%s2,31\\\";\n }\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -3726,7 +3737,8 @@\n     operands[3] = GEN_INT (start + size);\n   return \\\"rlwinm. %0,%1,%3,%s2,31\\\";\n }\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -3817,7 +3829,8 @@\n   \"@\n    rlwnm %0,%1,%2,0xffffffff\n    rlwinm %0,%1,%h2,0xffffffff\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotlsi3_64\"\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r,r\")\n@@ -3828,7 +3841,8 @@\n   \"@\n    rlwnm %0,%1,%2,0xffffffff\n    rlwinm %0,%1,%h2,0xffffffff\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotlsi3_internal2\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -3842,7 +3856,9 @@\n    rlwinm. %3,%1,%h2,0xffffffff\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -3872,7 +3888,9 @@\n    rlwinm. %0,%1,%h2,0xffffffff\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -3899,7 +3917,8 @@\n   \"@\n    rlwnm %0,%1,%2,%m3,%M3\n    rlwinm %0,%1,%h2,%m3,%M3\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotlsi3_internal5\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -3915,7 +3934,9 @@\n    rlwinm. %4,%1,%h2,%m3,%M3\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -3951,7 +3972,9 @@\n    rlwinm. %0,%1,%h2,%m3,%M3\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -4011,7 +4034,9 @@\n    rlwinm. %3,%1,%h2,0xff\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_insn \"*rotlsi3_internal8be\"\n@@ -4028,7 +4053,9 @@\n    rlwinm. %3,%1,%h2,0xff\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -4082,7 +4109,9 @@\n    rlwinm. %0,%1,%h2,0xff\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_insn \"*rotlsi3_internal9be\"\n@@ -4100,7 +4129,9 @@\n    rlwinm. %0,%1,%h2,0xff\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -4147,7 +4178,8 @@\n   \"@\n    rlwnm %0,%1,%2,0xffff\n    rlwinm %0,%1,%h2,0xffff\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotlsi3_internal10be\"\n   [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r,r\")\n@@ -4159,7 +4191,8 @@\n   \"@\n    rlwnm %0,%1,%2,0xffff\n    rlwinm %0,%1,%h2,0xffff\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotlsi3_internal11le\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -4175,7 +4208,9 @@\n    rlwinm. %3,%1,%h2,0xffff\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_insn \"*rotlsi3_internal11be\"\n@@ -4192,7 +4227,9 @@\n    rlwinm. %3,%1,%h2,0xffff\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -4246,7 +4283,9 @@\n    rlwinm. %0,%1,%h2,0xffff\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_insn \"*rotlsi3_internal12be\"\n@@ -4264,7 +4303,9 @@\n    rlwinm. %0,%1,%h2,0xffff\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -4309,7 +4350,8 @@\n   \"@\n    slw %0,%1,%2\n    slwi %0,%1,%h2\"\n-  [(set_attr \"type\" \"var_shift_rotate,shift\")])\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*ashlsi3_64\"\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r,r\")\n@@ -4320,7 +4362,8 @@\n   \"@\n    slw %0,%1,%2\n    slwi %0,%1,%h2\"\n-  [(set_attr \"type\" \"var_shift_rotate,shift\")])\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -4334,7 +4377,9 @@\n    slwi. %3,%1,%h2\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -4364,7 +4409,9 @@\n    slwi. %0,%1,%h2\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -4402,7 +4449,8 @@\n   \"@\n    rlwinm. %4,%1,%h2,%m3,%M3\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -4435,7 +4483,8 @@\n   \"@\n    rlwinm. %0,%1,%h2,%m3,%M3\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -4464,7 +4513,8 @@\n   mr %0,%1\n   srw %0,%1,%2\n   srwi %0,%1,%h2\"\n-  [(set_attr \"type\" \"integer,var_shift_rotate,shift\")])\n+  [(set_attr \"type\" \"integer,shift,shift\")\n+   (set_attr \"var_shift\" \"no,yes,no\")])\n \n (define_insn \"*lshrsi3_64\"\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r,r\")\n@@ -4475,7 +4525,8 @@\n   \"@\n   srw %0,%1,%2\n   srwi %0,%1,%h2\"\n-  [(set_attr \"type\" \"var_shift_rotate,shift\")])\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,x,?y,?y,?y\")\n@@ -4491,7 +4542,9 @@\n    #\n    #\n    #\"\n-  [(set_attr \"type\" \"fast_compare,var_delayed_compare,delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"fast_compare,shift,shift,shift,shift,shift\")\n+   (set_attr \"var_shift\" \"no,yes,no,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,4,8,8,8\")])\n \n (define_split\n@@ -4523,7 +4576,9 @@\n    #\n    #\n    #\"\n-  [(set_attr \"type\" \"fast_compare,var_delayed_compare,delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"fast_compare,shift,shift,shift,shift,shift\")\n+   (set_attr \"var_shift\" \"no,yes,no,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,4,8,8,8\")])\n \n (define_split\n@@ -4561,7 +4616,8 @@\n   \"@\n    rlwinm. %4,%1,%s2,%m3,%M3\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -4594,7 +4650,8 @@\n   \"@\n    rlwinm. %0,%1,%s2,%m3,%M3\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -4645,7 +4702,8 @@\n   \"@\n    rlwinm. %3,%1,%s2,0xff\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_insn \"*lshiftrt_internal2be\"\n@@ -4661,7 +4719,8 @@\n   \"@\n    rlwinm. %3,%1,%s2,0xff\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -4716,7 +4775,8 @@\n   \"@\n    rlwinm. %0,%1,%s2,0xff\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_insn \"*lshiftrt_internal3be\"\n@@ -4733,7 +4793,8 @@\n   \"@\n    rlwinm. %0,%1,%s2,0xff\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -4803,7 +4864,8 @@\n   \"@\n    rlwinm. %3,%1,%s2,0xffff\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_insn \"*lshiftrt_internal5be\"\n@@ -4819,7 +4881,8 @@\n   \"@\n    rlwinm. %3,%1,%s2,0xffff\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -4874,7 +4937,8 @@\n   \"@\n    rlwinm. %0,%1,%s2,0xffff\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_insn \"*lshiftrt_internal5be\"\n@@ -4891,7 +4955,8 @@\n   \"@\n    rlwinm. %0,%1,%s2,0xffff\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,8\")])\n \n (define_split\n@@ -4938,7 +5003,8 @@\n   \"@\n    sraw %0,%1,%2\n    srawi %0,%1,%h2\"\n-  [(set_attr \"type\" \"var_shift_rotate,shift\")])\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*ashrsi3_64\"\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r,r\")\n@@ -4949,7 +5015,8 @@\n   \"@\n    sraw %0,%1,%2\n    srawi %0,%1,%h2\"\n-  [(set_attr \"type\" \"var_shift_rotate,shift\")])\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -4963,7 +5030,9 @@\n    srawi. %3,%1,%h2\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -4993,7 +5062,9 @@\n    srawi. %0,%1,%h2\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \f\n ;; Builtins to replace a division to generate FRE reciprocal estimate\n@@ -6877,7 +6948,8 @@\n   \"@\n    rldcl %0,%1,%2,0\n    rldicl %0,%1,%H2,0\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotldi3_internal2\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -6891,7 +6963,9 @@\n    rldicl. %3,%1,%H2,0\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -6921,7 +6995,9 @@\n    rldicl. %0,%1,%H2,0\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -6948,7 +7024,8 @@\n   \"@\n    rldc%B3 %0,%1,%2,%S3\n    rldic%B3 %0,%1,%H2,%S3\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotldi3_internal5\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -6964,7 +7041,9 @@\n    rldic%B3. %4,%1,%H2,%S3\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7000,7 +7079,9 @@\n    rldic%B3. %0,%1,%H2,%S3\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7030,7 +7111,8 @@\n   \"@\n    rldcl %0,%1,%2,56\n    rldicl %0,%1,%H2,56\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotldi3_internal7be\"\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r,r\")\n@@ -7042,7 +7124,8 @@\n   \"@\n    rldcl %0,%1,%2,56\n    rldicl %0,%1,%H2,56\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotldi3_internal8le\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -7058,7 +7141,9 @@\n    rldicl. %3,%1,%H2,56\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_insn \"*rotldi3_internal8be\"\n@@ -7075,7 +7160,9 @@\n    rldicl. %3,%1,%H2,56\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7129,7 +7216,9 @@\n    rldicl. %0,%1,%H2,56\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_insn \"*rotldi3_internal9be\"\n@@ -7147,7 +7236,9 @@\n    rldicl. %0,%1,%H2,56\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7194,7 +7285,8 @@\n   \"@\n    rldcl %0,%1,%2,48\n    rldicl %0,%1,%H2,48\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotldi3_internal10be\"\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r,r\")\n@@ -7206,7 +7298,8 @@\n   \"@\n    rldcl %0,%1,%2,48\n    rldicl %0,%1,%H2,48\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotldi3_internal11le\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -7222,7 +7315,9 @@\n    rldicl. %3,%1,%H2,48\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_insn \"*rotldi3_internal11be\"\n@@ -7239,7 +7334,9 @@\n    rldicl. %3,%1,%H2,48\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7293,7 +7390,9 @@\n    rldicl. %0,%1,%H2,48\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_insn \"*rotldi3_internal12be\"\n@@ -7311,7 +7410,9 @@\n    rldicl. %0,%1,%H2,48\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7358,7 +7459,8 @@\n   \"@\n    rldcl %0,%1,%2,32\n    rldicl %0,%1,%H2,32\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotldi3_internal13be\"\n   [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r,r\")\n@@ -7370,7 +7472,8 @@\n   \"@\n    rldcl %0,%1,%2,32\n    rldicl %0,%1,%H2,32\"\n-  [(set_attr \"type\" \"var_shift_rotate,integer\")])\n+  [(set_attr \"type\" \"shift,integer\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*rotldi3_internal14le\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -7386,7 +7489,9 @@\n    rldicl. %3,%1,%H2,32\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_insn \"*rotldi3_internal14be\"\n@@ -7403,7 +7508,9 @@\n    rldicl. %3,%1,%H2,32\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7457,7 +7564,9 @@\n    rldicl. %0,%1,%H2,32\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_insn \"*rotldi3_internal15be\"\n@@ -7475,7 +7584,9 @@\n    rldicl. %0,%1,%H2,32\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7527,7 +7638,8 @@\n   \"@\n    sld %0,%1,%2\n    sldi %0,%1,%H2\"\n-  [(set_attr \"type\" \"var_shift_rotate,shift\")])\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*ashldi3_internal2\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -7541,7 +7653,9 @@\n    sldi. %3,%1,%H2\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7571,7 +7685,9 @@\n    sldi. %0,%1,%H2\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7756,7 +7872,8 @@\n   \"@\n    srd %0,%1,%2\n    srdi %0,%1,%H2\"\n-  [(set_attr \"type\" \"var_shift_rotate,shift\")])\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*lshrdi3_internal2\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -7770,7 +7887,9 @@\n    srdi. %3,%1,%H2\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7800,7 +7919,9 @@\n    srdi. %0,%1,%H2\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7844,7 +7965,8 @@\n   \"@\n    srad %0,%1,%2\n    sradi %0,%1,%H2\"\n-  [(set_attr \"type\" \"var_shift_rotate,shift\")])\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no\")])\n \n (define_insn \"*ashrdi3_internal2\"\n   [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,?y,?y\")\n@@ -7858,7 +7980,9 @@\n    sradi. %3,%1,%H2\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7888,7 +8012,9 @@\n    sradi. %0,%1,%H2\n    #\n    #\"\n-  [(set_attr \"type\" \"var_delayed_compare,delayed_compare,var_delayed_compare,delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"var_shift\" \"yes,no,yes,no\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,8,8\")])\n \n (define_split\n@@ -7995,9 +8121,10 @@\n    #\n    #\n    #\"\n-  [(set_attr \"type\" \"fast_compare,compare,delayed_compare,fast_compare,\\\n+  [(set_attr \"type\" \"fast_compare,compare,shift,fast_compare,\\\n \t\t     fast_compare,compare,compare,compare,compare,compare,\\\n \t\t     compare,compare\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,4,4,4,8,8,8,8,8,8,12\")])\n \n (define_split\n@@ -8048,9 +8175,10 @@\n    #\n    #\n    #\"\n-  [(set_attr \"type\" \"fast_compare,compare,delayed_compare,fast_compare,\\\n+  [(set_attr \"type\" \"fast_compare,compare,shift,fast_compare,\\\n \t\t     fast_compare,compare,compare,compare,compare,compare,\\\n \t\t     compare,compare\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"4,4,4,4,4,8,8,8,8,8,8,12\")])\n \n (define_split\n@@ -13068,7 +13196,8 @@\n   \"@\n    mfcr %3%Q2\\;rlwinm. %3,%3,%J1,1\n    #\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"8,16\")])\n \n (define_split\n@@ -13149,7 +13278,8 @@\n \n   return \\\"mfcr %4%Q2\\;rlwinm. %4,%4,%5,%6,%6\\\";\n }\"\n-  [(set_attr \"type\" \"delayed_compare\")\n+  [(set_attr \"type\" \"shift\")\n+   (set_attr \"dot\" \"yes\")\n    (set_attr \"length\" \"8,16\")])\n \n (define_split"}, {"sha": "82ace4a7b1c9579645bf7352da3c23518f8f5e93", "filename": "gcc/config/rs6000/rs64.md", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Frs64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Frs64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs64.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -46,8 +46,9 @@\n   \"lsu_rs64\")\n \n (define_insn_reservation \"rs64a-integer\" 1\n-  (and (eq_attr \"type\" \"integer,insert,shift,trap,\\\n-                        var_shift_rotate,cntlz,exts,isel\")\n+  (and (ior (eq_attr \"type\" \"integer,insert,trap,cntlz,exts,isel\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"rs64a\"))\n   \"iu_rs64\")\n \n@@ -98,8 +99,9 @@\n   \"mciu_rs64*66\")\n \n (define_insn_reservation \"rs64a-compare\" 3\n-  (and (eq_attr \"type\" \"cmp,fast_compare,compare,\\\n-                delayed_compare,var_delayed_compare\")\n+  (and (ior (eq_attr \"type\" \"cmp,fast_compare,compare\")\n+\t    (and (eq_attr \"type\" \"shift\")\n+\t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"rs64a\"))\n   \"iu_rs64,nothing,bpu_rs64\")\n "}, {"sha": "7443d7cf5968c5d2af21460c3130846a062e3805", "filename": "gcc/config/rs6000/titan.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Ftitan.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/892e7fa695536ae398afc23664ee30df3f59a5d3/gcc%2Fconfig%2Frs6000%2Ftitan.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ftitan.md?ref=892e7fa695536ae398afc23664ee30df3f59a5d3", "patch": "@@ -51,7 +51,7 @@\n (define_bypass 2 \"titan_mulhw\" \"titan_mulhw\")\n \n (define_insn_reservation \"titan_fxu_shift_and_rotate\" 2\n-  (and (eq_attr \"type\" \"insert,shift,var_shift_rotate,cntlz\")\n+  (and (eq_attr \"type\" \"insert,shift,cntlz\")\n        (eq_attr \"cpu\" \"titan\"))\n   \"titan_issue,titan_fxu_sh,nothing*2,titan_fxu_wb\")\n "}]}