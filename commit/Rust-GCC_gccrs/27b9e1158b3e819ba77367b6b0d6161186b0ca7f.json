{"sha": "27b9e1158b3e819ba77367b6b0d6161186b0ca7f", "node_id": "C_kwDOANBUbNoAKDI3YjllMTE1OGIzZTgxOWJhNzczNjdiNmIwZDYxNjExODZiMGNhN2Y", "commit": {"author": {"name": "Lulu Cheng", "email": "chenglulu@loongson.cn", "date": "2022-09-27T07:28:43Z"}, "committer": {"name": "Lulu Cheng", "email": "chenglulu@loongson.cn", "date": "2022-10-31T09:35:02Z"}, "message": "Libvtv: Add loongarch support.\n\nThe loongarch64 specification permits page sizes of 4KiB, 16KiB and 64KiB,\nbut only 16KiB pages are supported for now.\n\nCo-Authored-By: qijingwen <qijingwen@loongson.cn>\n\ninclude/ChangeLog:\n\n\t* vtv-change-permission.h (defined): Determines whether the macro\n\t__loongarch_lp64 is defined\n\t(VTV_PAGE_SIZE): Set VTV_PAGE_SIZE to 16KiB for loongarch64.\n\nlibvtv/ChangeLog:\n\n\t* configure.tgt: Add loongarch support.", "tree": {"sha": "0ad03dc4fa91023fa41a3f5249a28dde7cfdc0e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ad03dc4fa91023fa41a3f5249a28dde7cfdc0e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/27b9e1158b3e819ba77367b6b0d6161186b0ca7f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27b9e1158b3e819ba77367b6b0d6161186b0ca7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27b9e1158b3e819ba77367b6b0d6161186b0ca7f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27b9e1158b3e819ba77367b6b0d6161186b0ca7f/comments", "author": {"login": "chenglulu326", "id": 88083425, "node_id": "MDQ6VXNlcjg4MDgzNDI1", "avatar_url": "https://avatars.githubusercontent.com/u/88083425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenglulu326", "html_url": "https://github.com/chenglulu326", "followers_url": "https://api.github.com/users/chenglulu326/followers", "following_url": "https://api.github.com/users/chenglulu326/following{/other_user}", "gists_url": "https://api.github.com/users/chenglulu326/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenglulu326/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenglulu326/subscriptions", "organizations_url": "https://api.github.com/users/chenglulu326/orgs", "repos_url": "https://api.github.com/users/chenglulu326/repos", "events_url": "https://api.github.com/users/chenglulu326/events{/privacy}", "received_events_url": "https://api.github.com/users/chenglulu326/received_events", "type": "User", "site_admin": false}, "committer": {"login": "chenglulu326", "id": 88083425, "node_id": "MDQ6VXNlcjg4MDgzNDI1", "avatar_url": "https://avatars.githubusercontent.com/u/88083425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenglulu326", "html_url": "https://github.com/chenglulu326", "followers_url": "https://api.github.com/users/chenglulu326/followers", "following_url": "https://api.github.com/users/chenglulu326/following{/other_user}", "gists_url": "https://api.github.com/users/chenglulu326/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenglulu326/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenglulu326/subscriptions", "organizations_url": "https://api.github.com/users/chenglulu326/orgs", "repos_url": "https://api.github.com/users/chenglulu326/repos", "events_url": "https://api.github.com/users/chenglulu326/events{/privacy}", "received_events_url": "https://api.github.com/users/chenglulu326/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "259a11555c90783e53c046c310080407ee54a31e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/259a11555c90783e53c046c310080407ee54a31e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/259a11555c90783e53c046c310080407ee54a31e"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "e7b9294a081b046c49eb2a0af21f042cc2b782b5", "filename": "include/vtv-change-permission.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27b9e1158b3e819ba77367b6b0d6161186b0ca7f/include%2Fvtv-change-permission.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27b9e1158b3e819ba77367b6b0d6161186b0ca7f/include%2Fvtv-change-permission.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2Fvtv-change-permission.h?ref=27b9e1158b3e819ba77367b6b0d6161186b0ca7f", "patch": "@@ -48,6 +48,10 @@ extern void __VLTChangePermission (int);\n #else \n #if defined(__sun__) && defined(__svr4__) && defined(__sparc__)\n #define VTV_PAGE_SIZE 8192\n+#elif defined(__loongarch_lp64)\n+/* The page size is configurable by the kernel to be 4, 16 or 64 KiB.\n+   For now, only the default page size of 16KiB is supported.  */\n+#define VTV_PAGE_SIZE 16384\n #else\n #define VTV_PAGE_SIZE 4096\n #endif"}, {"sha": "6cdd1e97ab1123ee4ae1dbc632532fce3fcf94c9", "filename": "libvtv/configure.tgt", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27b9e1158b3e819ba77367b6b0d6161186b0ca7f/libvtv%2Fconfigure.tgt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27b9e1158b3e819ba77367b6b0d6161186b0ca7f/libvtv%2Fconfigure.tgt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libvtv%2Fconfigure.tgt?ref=27b9e1158b3e819ba77367b6b0d6161186b0ca7f", "patch": "@@ -50,6 +50,9 @@ case \"${target}\" in\n \t;;\n   x86_64-*-darwin[1]* | i?86-*-darwin[1]*)\n \t;;\n+  loongarch*-*-linux*)\n+\tVTV_SUPPORTED=yes\n+\t;;\n   *)\n \t;;\n esac"}]}