{"sha": "e5952538c4196ee92064db9cbff88e1ca2eeb5ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTU5NTI1MzhjNDE5NmVlOTIwNjRkYjljYmZmODhlMWNhMmVlYjVjZQ==", "commit": {"author": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1994-07-29T19:03:37Z"}, "committer": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1994-07-29T19:03:37Z"}, "message": "(DO_GLOBAL_CTORS_BODY): Reverse order of execution\n        of constuctor lists.\n\nFrom-SVN: r7818", "tree": {"sha": "ff09d4aec59c8c85b0a8490344f534acaa2bfdc9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff09d4aec59c8c85b0a8490344f534acaa2bfdc9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e5952538c4196ee92064db9cbff88e1ca2eeb5ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e5952538c4196ee92064db9cbff88e1ca2eeb5ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e5952538c4196ee92064db9cbff88e1ca2eeb5ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e5952538c4196ee92064db9cbff88e1ca2eeb5ce/comments", "author": null, "committer": null, "parents": [{"sha": "566b213ab1d920957c39fd8e4ba5b78f517a68fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/566b213ab1d920957c39fd8e4ba5b78f517a68fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/566b213ab1d920957c39fd8e4ba5b78f517a68fa"}], "stats": {"total": 19, "additions": 12, "deletions": 7}, "files": [{"sha": "dd5cbc5a092dfd7a9e6a111c906bd10f4977c4e1", "filename": "gcc/config/svr3.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e5952538c4196ee92064db9cbff88e1ca2eeb5ce/gcc%2Fconfig%2Fsvr3.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e5952538c4196ee92064db9cbff88e1ca2eeb5ce/gcc%2Fconfig%2Fsvr3.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsvr3.h?ref=e5952538c4196ee92064db9cbff88e1ca2eeb5ce", "patch": "@@ -221,7 +221,7 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.\n /* CTOR_LIST_BEGIN and CTOR_LIST_END are machine-dependent\n    because they push on the stack.  */\n \n-#ifdef STACK_GROWS_DOWNWARD\n+#ifndef STACK_GROWS_DOWNWARD\n \n /* Constructor list on stack is in reverse order.  Go to the end of the\n    list and go backwards to call constructors in the right order.  */"}, {"sha": "32ff0333991dc29b499a0d6d4e75fed07503f70f", "filename": "gcc/gbl-ctors.h", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e5952538c4196ee92064db9cbff88e1ca2eeb5ce/gcc%2Fgbl-ctors.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e5952538c4196ee92064db9cbff88e1ca2eeb5ce/gcc%2Fgbl-ctors.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgbl-ctors.h?ref=e5952538c4196ee92064db9cbff88e1ca2eeb5ce", "patch": "@@ -63,18 +63,23 @@ extern void __do_global_dtors ();\n    we define it once here as a macro to avoid various instances getting\n    out-of-sync with one another.  */\n \n-/* The first word may or may not contain the number of pointers in the table.\n+/* Some systems place the number of pointers\n+   in the first word of the table.\n+   On other systems, that word is -1.\n    In all cases, the table is null-terminated.\n-   We ignore the first word and scan up to the null.  */\n+   If the length is not recorded, count up to the null.  */\n \n /* Some systems use a different strategy for finding the ctors.\n    For example, svr3.  */\n #ifndef DO_GLOBAL_CTORS_BODY\n #define DO_GLOBAL_CTORS_BODY\t\t\t\t\t\t\\\n do {\t\t\t\t\t\t\t\t\t\\\n-  func_ptr *p;\t\t\t\t\t\t\t\t\\\n-  for (p = __CTOR_LIST__ + 1; *p; )\t\t\t\t\t\\\n-    (*p++) ();\t\t\t\t\t\t\t\t\\\n-} while (0)\n+  unsigned nptrs = (unsigned HOST_WIDE_INT) __CTOR_LIST__[0];\t\t\\\n+  unsigned i;\t\t\t\t\t\t\t\t\\\n+  if (nptrs == -1)\t\t\t\t\t\t\t\\\n+    for (nptrs = 0; __CTOR_LIST__[nptrs + 1] != 0; nptrs++);\t\t\\\n+  for (i = nptrs; i >= 1; i--)\t\t\t\t\t\t\\\n+    __CTOR_LIST__[i] ();\t\t\t\t\t\t\\\n+} while (0) \n #endif\n "}]}