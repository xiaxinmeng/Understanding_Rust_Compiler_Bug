{"sha": "2b564b9c4528d947ffbe4cd0d9dea44c1f6b2328", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmI1NjRiOWM0NTI4ZDk0N2ZmYmU0Y2QwZDlkZWE0NGMxZjZiMjMyOA==", "commit": {"author": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2015-09-12T13:51:40Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2015-09-12T13:51:40Z"}, "message": "pa.c (pa_output_move_double): Enhance to handle HIGH CONSTANT_P operands.\n\n\t* config/pa/pa.c (pa_output_move_double): Enhance to handle HIGH\n\tCONSTANT_P operands.\n\nFrom-SVN: r227706", "tree": {"sha": "106bf29836a236a3dce12654d7cafb79e61a0f62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/106bf29836a236a3dce12654d7cafb79e61a0f62"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b564b9c4528d947ffbe4cd0d9dea44c1f6b2328", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b564b9c4528d947ffbe4cd0d9dea44c1f6b2328", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b564b9c4528d947ffbe4cd0d9dea44c1f6b2328", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b564b9c4528d947ffbe4cd0d9dea44c1f6b2328/comments", "author": null, "committer": null, "parents": [{"sha": "76b88c5fc9930734f4d3496b9100862f62311ce5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76b88c5fc9930734f4d3496b9100862f62311ce5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76b88c5fc9930734f4d3496b9100862f62311ce5"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "c49902d0e59ca07dfa7e4e66f4de5ff10bec4434", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b564b9c4528d947ffbe4cd0d9dea44c1f6b2328/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b564b9c4528d947ffbe4cd0d9dea44c1f6b2328/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2b564b9c4528d947ffbe4cd0d9dea44c1f6b2328", "patch": "@@ -1,3 +1,8 @@\n+2015-09-12  John David Anglin  <danglin@gcc.gnu.org>\n+\n+\t* config/pa/pa.c (pa_output_move_double): Enhance to handle HIGH\n+\tCONSTANT_P operands.\n+\n 2015-09-11  David S. Miller  <davem@davemloft.net>\n \n \t* config/sparc/constraints.md: Make \"U\" constraint a real register"}, {"sha": "e16e58d14ef3e72cd6f4086c99f341a459e99433", "filename": "gcc/config/pa/pa.c", "status": "modified", "additions": 14, "deletions": 3, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b564b9c4528d947ffbe4cd0d9dea44c1f6b2328/gcc%2Fconfig%2Fpa%2Fpa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b564b9c4528d947ffbe4cd0d9dea44c1f6b2328/gcc%2Fconfig%2Fpa%2Fpa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.c?ref=2b564b9c4528d947ffbe4cd0d9dea44c1f6b2328", "patch": "@@ -2464,6 +2464,7 @@ pa_output_move_double (rtx *operands)\n   enum { REGOP, OFFSOP, MEMOP, CNSTOP, RNDOP } optype0, optype1;\n   rtx latehalf[2];\n   rtx addreg0 = 0, addreg1 = 0;\n+  int highonly = 0;\n \n   /* First classify both operands.  */\n \n@@ -2674,7 +2675,14 @@ pa_output_move_double (rtx *operands)\n   else if (optype1 == OFFSOP)\n     latehalf[1] = adjust_address_nv (operands[1], SImode, 4);\n   else if (optype1 == CNSTOP)\n-    split_double (operands[1], &operands[1], &latehalf[1]);\n+    {\n+      if (GET_CODE (operands[1]) == HIGH)\n+\t{\n+\t  operands[1] = XEXP (operands[1], 0);\n+\t  highonly = 1;\n+\t}\n+      split_double (operands[1], &operands[1], &latehalf[1]);\n+    }\n   else\n     latehalf[1] = operands[1];\n \n@@ -2727,8 +2735,11 @@ pa_output_move_double (rtx *operands)\n   if (addreg1)\n     output_asm_insn (\"ldo 4(%0),%0\", &addreg1);\n \n-  /* Do that word.  */\n-  output_asm_insn (pa_singlemove_string (latehalf), latehalf);\n+  /* Do high-numbered word.  */\n+  if (highonly)\n+    output_asm_insn (\"ldil L'%1,%0\", latehalf);\n+  else\n+    output_asm_insn (pa_singlemove_string (latehalf), latehalf);\n \n   /* Undo the adds we just did.  */\n   if (addreg0)"}]}