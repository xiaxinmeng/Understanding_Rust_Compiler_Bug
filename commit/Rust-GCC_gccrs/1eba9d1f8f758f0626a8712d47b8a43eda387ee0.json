{"sha": "1eba9d1f8f758f0626a8712d47b8a43eda387ee0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWViYTlkMWY4Zjc1OGYwNjI2YTg3MTJkNDdiOGE0M2VkYTM4N2VlMA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2001-02-13T18:44:51Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2001-02-13T18:44:51Z"}, "message": "re PR libgcj/1351 (_Jv_select -vs- Thread.interrupt)\n\n\tFix for PR libgcj/1351:\n\t* posix.cc (_Jv_select): Throw InterruptedIOException if thread is\n\tinterrupted.\n\tInclude Thread.h and InterruptedIOException.h.\n\nFrom-SVN: r39639", "tree": {"sha": "e18a712ae4b86630ebac23b1b4cb7d026ee4526a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e18a712ae4b86630ebac23b1b4cb7d026ee4526a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1eba9d1f8f758f0626a8712d47b8a43eda387ee0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1eba9d1f8f758f0626a8712d47b8a43eda387ee0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1eba9d1f8f758f0626a8712d47b8a43eda387ee0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1eba9d1f8f758f0626a8712d47b8a43eda387ee0/comments", "author": null, "committer": null, "parents": [{"sha": "f4483e8502f0fa703045992a8bfbe9187a3206e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4483e8502f0fa703045992a8bfbe9187a3206e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4483e8502f0fa703045992a8bfbe9187a3206e5"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "9201d268ffeeaad3ac36f45d38a234d110d3d033", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1eba9d1f8f758f0626a8712d47b8a43eda387ee0/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1eba9d1f8f758f0626a8712d47b8a43eda387ee0/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=1eba9d1f8f758f0626a8712d47b8a43eda387ee0", "patch": "@@ -1,3 +1,10 @@\n+2001-02-13  Tom Tromey  <tromey@redhat.com>\n+\n+\tFix for PR libgcj/1351:\n+\t* posix.cc (_Jv_select): Throw InterruptedIOException if thread is\n+\tinterrupted.\n+\tInclude Thread.h and InterruptedIOException.h.\n+\n 2001-02-13  Bryce McKinlay  <bryce@albatross.co.nz>\n \n \t* java/io/BlockDataException.java: Removed."}, {"sha": "1f5b037f704b0b07d53cab9e24834e498b826b87", "filename": "libjava/posix.cc", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1eba9d1f8f758f0626a8712d47b8a43eda387ee0/libjava%2Fposix.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1eba9d1f8f758f0626a8712d47b8a43eda387ee0/libjava%2Fposix.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fposix.cc?ref=1eba9d1f8f758f0626a8712d47b8a43eda387ee0", "patch": "@@ -1,6 +1,6 @@\n // posix.cc -- Helper functions for POSIX-flavored OSs.\n \n-/* Copyright (C) 2000  Free Software Foundation\n+/* Copyright (C) 2000, 2001  Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -14,6 +14,10 @@ details.  */\n \n #include <errno.h>\n \n+#include <jvm.h>\n+#include <java/lang/Thread.h>\n+#include <java/io/InterruptedIOException.h>\n+\n #if defined (ECOS)\n extern \"C\" unsigned long long _clock (void);\n #endif\n@@ -76,6 +80,10 @@ _Jv_select (int n, fd_set *readfds, fd_set  *writefds,\n       if (r != -1 || errno != EINTR)\n \treturn r;\n \n+      // Here we know we got EINTR.\n+      if (java::lang::Thread::interrupted ())\n+\tthrow new java::io::InterruptedIOException (JvNewStringLatin1 (\"select interrupted\"));\n+\n       struct timeval after;\n       if (timeout)\n \t{"}]}