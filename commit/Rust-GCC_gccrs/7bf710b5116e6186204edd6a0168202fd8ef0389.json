{"sha": "7bf710b5116e6186204edd6a0168202fd8ef0389", "node_id": "C_kwDOANBUbNoAKDdiZjcxMGI1MTE2ZTYxODYyMDRlZGQ2YTAxNjgyMDJmZDhlZjAzODk", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-12-13T13:09:57Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-12-13T13:14:51Z"}, "message": "libstdc++: Add support for '?' in linker script globs\n\nThe scripts/make_exports.pl script used for darwin only replaces '*'\nwildcards in globs, it doesn't handle '?'. This means the recent changes\nto std::__timepunct exports broke darwin.\n\nRather than use mangled names in the linker script, this adds support\nfor '?' to the perl script.\n\nThis also removes some unnecessary escaping of the replacement strings\nin s// substitutions.\n\nlibstdc++-v3/ChangeLog:\n\n\t* scripts/make_exports.pl: Replace '?' with '.' when turning\n\ta glob into a regex.", "tree": {"sha": "ede938bd171b2fe3a0c9858fdcd7ac070b271969", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ede938bd171b2fe3a0c9858fdcd7ac070b271969"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7bf710b5116e6186204edd6a0168202fd8ef0389", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bf710b5116e6186204edd6a0168202fd8ef0389", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7bf710b5116e6186204edd6a0168202fd8ef0389", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bf710b5116e6186204edd6a0168202fd8ef0389/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "494ebfa7c9aacaeb6ec1fccc47a0e49f31eb2bb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/494ebfa7c9aacaeb6ec1fccc47a0e49f31eb2bb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/494ebfa7c9aacaeb6ec1fccc47a0e49f31eb2bb8"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "7f4670f8a91234c711341883158a51112ad29dbc", "filename": "libstdc++-v3/scripts/make_exports.pl", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7bf710b5116e6186204edd6a0168202fd8ef0389/libstdc%2B%2B-v3%2Fscripts%2Fmake_exports.pl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7bf710b5116e6186204edd6a0168202fd8ef0389/libstdc%2B%2B-v3%2Fscripts%2Fmake_exports.pl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fscripts%2Fmake_exports.pl?ref=7bf710b5116e6186204edd6a0168202fd8ef0389", "patch": "@@ -52,11 +52,13 @@\n \tnext;\n     }\n     # Catch globs.  Note that '{}' is not allowed in globs by this script,\n-    # so only '*' and '[]' are available.\n+    # so only '*' and '?' and '[]' are available.\n     if (/^[ \\t]*([^ \\t;{}#]+);?[ \\t]*$/) {\n \tmy $ptn = $1;\n \t# Turn the glob into a regex by replacing '*' with '.*'.\n-\t$ptn =~ s/\\*/\\.\\*/g;\n+\t$ptn =~ s/\\*/.*/g;\n+\t# And replacing '?' with '.'.\n+\t$ptn =~ s/\\?/./g;\n \tpush @$glob,$ptn;\n \tnext;\n     }"}]}