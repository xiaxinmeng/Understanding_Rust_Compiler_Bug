{"sha": "98c26210e2a36a4b379e4a711d34dda92f076acf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OThjMjYyMTBlMmEzNmE0YjM3OWU0YTcxMWQzNGRkYTkyZjA3NmFjZg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2018-02-26T15:00:44Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2018-02-26T15:00:44Z"}, "message": "re PR c++/84533 (ICE with duplicate enum value)\n\n/cp\n2018-02-26  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/84533\n\t* decl.c (redeclaration_error_message): Don't try to use\n\tDECL_DECLARED_CONSTEXPR_P on CONST_DECLs.\n\n/testsuite\n2018-02-26  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/84533\n\t* g++.dg/cpp1z/pr84533.C: New.\n\nFrom-SVN: r257991", "tree": {"sha": "4d857ed72fe7ec3595c20f82f6804fbd151b82de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d857ed72fe7ec3595c20f82f6804fbd151b82de"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/98c26210e2a36a4b379e4a711d34dda92f076acf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98c26210e2a36a4b379e4a711d34dda92f076acf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98c26210e2a36a4b379e4a711d34dda92f076acf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98c26210e2a36a4b379e4a711d34dda92f076acf/comments", "author": null, "committer": null, "parents": [{"sha": "856c79ea8d01c8094a6db7cb80de53303bed3e08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/856c79ea8d01c8094a6db7cb80de53303bed3e08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/856c79ea8d01c8094a6db7cb80de53303bed3e08"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "97559ede22335fef0c87be1a0aa5671e0793f68d", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98c26210e2a36a4b379e4a711d34dda92f076acf/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98c26210e2a36a4b379e4a711d34dda92f076acf/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=98c26210e2a36a4b379e4a711d34dda92f076acf", "patch": "@@ -1,3 +1,9 @@\n+2018-02-26  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/84533\n+\t* decl.c (redeclaration_error_message): Don't try to use\n+\tDECL_DECLARED_CONSTEXPR_P on CONST_DECLs.\n+\n 2018-02-26  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* lambda.c (build_capture_proxy): Define static."}, {"sha": "cf917731f0ca65dadb6fd68aa187bf0d109452f0", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98c26210e2a36a4b379e4a711d34dda92f076acf/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98c26210e2a36a4b379e4a711d34dda92f076acf/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=98c26210e2a36a4b379e4a711d34dda92f076acf", "patch": "@@ -2919,6 +2919,7 @@ redeclaration_error_message (tree newdecl, tree olddecl)\n \t specifier is declaration rather than definition (and\n \t deprecated).  */\n       if (cxx_dialect >= cxx17\n+\t  && VAR_P (olddecl)\n \t  && DECL_CLASS_SCOPE_P (olddecl)\n \t  && DECL_DECLARED_CONSTEXPR_P (olddecl)\n \t  && !DECL_INITIAL (newdecl))"}, {"sha": "d53ab4d3c8f2f99e476f667909a867790cb7a3d3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98c26210e2a36a4b379e4a711d34dda92f076acf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98c26210e2a36a4b379e4a711d34dda92f076acf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=98c26210e2a36a4b379e4a711d34dda92f076acf", "patch": "@@ -1,3 +1,8 @@\n+2018-02-26  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/84533\n+\t* g++.dg/cpp1z/pr84533.C: New.\n+\n 2018-02-26  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/84537"}, {"sha": "0a71fe1b7de766ca5bb8c1b57fda072a5c76fa4e", "filename": "gcc/testsuite/g++.dg/cpp1z/pr84533.C", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98c26210e2a36a4b379e4a711d34dda92f076acf/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fpr84533.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98c26210e2a36a4b379e4a711d34dda92f076acf/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fpr84533.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fpr84533.C?ref=98c26210e2a36a4b379e4a711d34dda92f076acf", "patch": "@@ -0,0 +1,3 @@\n+// { dg-options \"-std=c++17\" }\n+\n+enum E { e, e };  // { dg-error \"redefinition\" }"}]}