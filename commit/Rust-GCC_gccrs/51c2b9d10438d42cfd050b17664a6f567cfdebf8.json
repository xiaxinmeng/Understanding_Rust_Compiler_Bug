{"sha": "51c2b9d10438d42cfd050b17664a6f567cfdebf8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTFjMmI5ZDEwNDM4ZDQyY2ZkMDUwYjE3NjY0YTZmNTY3Y2ZkZWJmOA==", "commit": {"author": {"name": "Torbjorn Granlund", "email": "tege@gnu.org", "date": "1992-07-02T19:43:41Z"}, "committer": {"name": "Torbjorn Granlund", "email": "tege@gnu.org", "date": "1992-07-02T19:43:41Z"}, "message": "*** empty log message ***\n\nFrom-SVN: r1389", "tree": {"sha": "0286c3a06bdc8fea08231850d14362161f652275", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0286c3a06bdc8fea08231850d14362161f652275"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/51c2b9d10438d42cfd050b17664a6f567cfdebf8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51c2b9d10438d42cfd050b17664a6f567cfdebf8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51c2b9d10438d42cfd050b17664a6f567cfdebf8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51c2b9d10438d42cfd050b17664a6f567cfdebf8/comments", "author": null, "committer": null, "parents": [{"sha": "7910b11b95325ef74dd1251be623c80b8b4bc17d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7910b11b95325ef74dd1251be623c80b8b4bc17d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7910b11b95325ef74dd1251be623c80b8b4bc17d"}], "stats": {"total": 63, "additions": 60, "deletions": 3}, "files": [{"sha": "6f672481c9a5af17306dae17844c0291a1312704", "filename": "gcc/config/pa/pa.md", "status": "modified", "additions": 60, "deletions": 3, "changes": 63, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51c2b9d10438d42cfd050b17664a6f567cfdebf8/gcc%2Fconfig%2Fpa%2Fpa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51c2b9d10438d42cfd050b17664a6f567cfdebf8/gcc%2Fconfig%2Fpa%2Fpa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.md?ref=51c2b9d10438d42cfd050b17664a6f567cfdebf8", "patch": "@@ -761,6 +761,47 @@\n   [(set_attr \"type\" \"move\")\n    (set_attr \"length\" \"1\")])\n \n+(define_insn \"\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n+\t(match_operand:SI 1 \"zdepi_operand\" \"n\"))]\n+  \"\"\n+  \"*\n+{\n+  unsigned long x = INTVAL (operands[1]);\n+  int i;\n+\n+  for (i = 0; i < 32; i++)\n+    {\n+      if ((x & 1) != 0)\n+        break;\n+      x >>= 1;\n+    }\n+\n+  if ((x & 0x10) == 0)\n+    {\n+      operands[1] = gen_rtx (CONST_INT, VOIDmode, x);\n+      operands[2] = gen_rtx (CONST_INT, VOIDmode, 31 - i);\n+      operands[3] = gen_rtx (CONST_INT, VOIDmode, 32 - i < 4 ? 32 - i : 4);\n+    }\n+  else\n+    {\n+      operands[1] = gen_rtx (CONST_INT, VOIDmode, (x & 0xf) - 0x10);\n+      operands[2] = gen_rtx (CONST_INT, VOIDmode, 31 - i);\n+\n+      x >>= 5;\n+      for (i = 0; i < 32; i++)\n+\t{\n+\t  if ((x & 1) == 0)\n+\t    break;\n+\t  x >>= 1;\n+\t}\n+\n+      operands[3] = gen_rtx (CONST_INT, VOIDmode, i + 5);\n+    }\n+\n+  return \\\"zdepi %1,%2,%3,%0\\\";\n+}\")\n+\n (define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=a,?*r\")\n \t(plus:SI (match_operand:SI 1 \"register_operand\" \"r,r\")\n@@ -2159,12 +2200,28 @@\n   \"extrs %1,%3+%2-1,%2,%0\")\n \n (define_insn \"insv\"\n-  [(set (zero_extract:SI (match_operand:SI 0 \"register_operand\" \"+r\")\n+  [(set (zero_extract:SI (match_operand:SI 0 \"register_operand\" \"+r,r\")\n \t\t\t (match_operand:SI 1 \"uint5_operand\" \"\")\n \t\t\t (match_operand:SI 2 \"uint5_operand\" \"\"))\n-\t(match_operand:SI 3 \"register_operand\" \"r\"))]\n+\t(match_operand:SI 3 \"arith5_operand\" \"r,L\"))]\n   \"\"\n-  \"dep %3,%2+%1-1,%1,%0\")\n+  \"@\n+   dep %3,%2+%1-1,%1,%0\n+   depi %3,%2+%1-1,%1,%0\")\n+\n+;; Optimize insertion of const_int values of type 1...1xxxx.\n+(define_insn \"\"\n+  [(set (zero_extract:SI (match_operand:SI 0 \"register_operand\" \"+r\")\n+\t\t\t (match_operand:SI 1 \"uint5_operand\" \"\")\n+\t\t\t (match_operand:SI 2 \"uint5_operand\" \"\"))\n+\t(match_operand:SI 3 \"const_int_operand\" \"\"))]\n+  \"(INTVAL (operands[3]) & 0x10) != 0 &&\n+   (~INTVAL (operands[3]) & (1L << INTVAL (operands[1])) - 1 & ~0xf) == 0\"\n+  \"*\n+{\n+  operands[3] = gen_rtx (CONST_INT, VOIDmode, (INTVAL (operands[3]) & 0xf) - 0x10);\n+  return \\\"depi %3,%2+%1-1,%1,%0\\\";\n+}\")\n \n ;; This insn is used for some loop tests, typically loops reversed when\n ;; strength reduction is used.  It is actually created when the instruction"}]}