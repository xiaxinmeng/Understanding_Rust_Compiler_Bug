{"sha": "9641fab348e41e7f9d05553fe9c778ce91c86332", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTY0MWZhYjM0OGU0MWU3ZjlkMDU1NTNmZTljNzc4Y2U5MWM4NjMzMg==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2015-02-08T20:08:21Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2015-02-08T20:08:21Z"}, "message": "re PR ipa/63566 (i686 bootstrap fails: ICE RTL flag check: INSN_UID used with unexpected rtx code 'set' in INSN_UID, at rtl.h:1326)\n\n\tPR ipa/63566 \n\t* cgraphunit.c (cgraph_node::analyze): Be sure target of thunk is\n\taliases before trying to expand it.\n\t(cgraph_node::expand_thunk): Fix formating.\n\nFrom-SVN: r220518", "tree": {"sha": "f74e46cf83945e5d96a8c78c3d8cb1fd5c4fe28e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f74e46cf83945e5d96a8c78c3d8cb1fd5c4fe28e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9641fab348e41e7f9d05553fe9c778ce91c86332", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9641fab348e41e7f9d05553fe9c778ce91c86332", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9641fab348e41e7f9d05553fe9c778ce91c86332", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9641fab348e41e7f9d05553fe9c778ce91c86332/comments", "author": null, "committer": null, "parents": [{"sha": "91480ff35011b73b2debcea1d88090d9165473aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91480ff35011b73b2debcea1d88090d9165473aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91480ff35011b73b2debcea1d88090d9165473aa"}], "stats": {"total": 28, "additions": 24, "deletions": 4}, "files": [{"sha": "7122413fc0e6355405ba6849a23f3215c628781e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9641fab348e41e7f9d05553fe9c778ce91c86332/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9641fab348e41e7f9d05553fe9c778ce91c86332/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9641fab348e41e7f9d05553fe9c778ce91c86332", "patch": "@@ -1,3 +1,10 @@\n+2015-02-08  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/63566 \n+\t* cgraphunit.c (cgraph_node::analyze): Be sure target of thunk is\n+\taliases before trying to expand it.\n+\t(cgraph_node::expand_thunk): Fix formating.\n+\n 2015-02-07  Sandra Loosemore  <sandra@codesourcery.com>\n \n \t* doc/extend.texi (Function Attributes [naked]): Copy-edit."}, {"sha": "8280fc4a1a3c3168a620608e879fa2a4dd0bff56", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 17, "deletions": 4, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9641fab348e41e7f9d05553fe9c778ce91c86332/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9641fab348e41e7f9d05553fe9c778ce91c86332/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=9641fab348e41e7f9d05553fe9c778ce91c86332", "patch": "@@ -580,8 +580,19 @@ cgraph_node::analyze (void)\n \n   if (thunk.thunk_p)\n     {\n-      create_edge (cgraph_node::get (thunk.alias),\n-\t\t   NULL, 0, CGRAPH_FREQ_BASE);\n+      cgraph_node *t = cgraph_node::get (thunk.alias);\n+\n+      create_edge (t, NULL, 0, CGRAPH_FREQ_BASE);\n+      /* Target code in expand_thunk may need the thunk's target\n+\t to be analyzed, so recurse here.  */\n+      if (!t->analyzed)\n+\tt->analyze ();\n+      if (t->alias)\n+\t{\n+\t  t = t->get_alias_target ();\n+\t  if (!t->analyzed)\n+\t    t->analyze ();\n+\t}\n       if (!expand_thunk (false, false))\n \t{\n \t  thunk.alias = NULL;\n@@ -1515,7 +1526,8 @@ cgraph_node::expand_thunk (bool output_asm_thunks, bool force_gimple_thunk)\n       current_function_decl = thunk_fndecl;\n \n       /* Ensure thunks are emitted in their correct sections.  */\n-      resolve_unique_section (thunk_fndecl, 0, flag_function_sections);\n+      resolve_unique_section (thunk_fndecl, 0,\n+\t\t\t      flag_function_sections);\n \n       DECL_RESULT (thunk_fndecl)\n \t= build_decl (DECL_SOURCE_LOCATION (thunk_fndecl),\n@@ -1568,7 +1580,8 @@ cgraph_node::expand_thunk (bool output_asm_thunks, bool force_gimple_thunk)\n       current_function_decl = thunk_fndecl;\n \n       /* Ensure thunks are emitted in their correct sections.  */\n-      resolve_unique_section (thunk_fndecl, 0, flag_function_sections);\n+      resolve_unique_section (thunk_fndecl, 0,\n+\t\t\t      flag_function_sections);\n \n       DECL_IGNORED_P (thunk_fndecl) = 1;\n       bitmap_obstack_initialize (NULL);"}]}