{"sha": "67c6769bc0e8bf7571040d56cc882a03420f5508", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjdjNjc2OWJjMGU4YmY3NTcxMDQwZDU2Y2M4ODJhMDM0MjBmNTUwOA==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2017-11-05T09:58:27Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2017-11-05T09:58:27Z"}, "message": "Remove semicolon after do {} while (0) in DEF_SANITIZER_BUILTIN\n\n2017-11-05  Tom de Vries  <tom@codesourcery.com>\n\n\tPR other/82784\n\t* asan.c (DEF_SANITIZER_BUILTIN_1): Factor out of ...\n\t(DEF_SANITIZER_BUILTIN): ... here.\n\t(initialize_sanitizer_builtins): Use DEF_SANITIZER_BUILTIN_1 instead of\n\tDEF_SANITIZER_BUILTIN in if stmt.  Add missing semicolon.\n\nFrom-SVN: r254425", "tree": {"sha": "f2ecdb94d2985907ea6cfca28e5b296791ce1816", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f2ecdb94d2985907ea6cfca28e5b296791ce1816"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67c6769bc0e8bf7571040d56cc882a03420f5508", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67c6769bc0e8bf7571040d56cc882a03420f5508", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67c6769bc0e8bf7571040d56cc882a03420f5508", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67c6769bc0e8bf7571040d56cc882a03420f5508/comments", "author": null, "committer": null, "parents": [{"sha": "c830c7d5c738a21dc6d8021ce28955590361264e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c830c7d5c738a21dc6d8021ce28955590361264e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c830c7d5c738a21dc6d8021ce28955590361264e"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "e6e298a1cbdbf0dc5ecbf1252d9aa3d211d8fa78", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67c6769bc0e8bf7571040d56cc882a03420f5508/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67c6769bc0e8bf7571040d56cc882a03420f5508/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=67c6769bc0e8bf7571040d56cc882a03420f5508", "patch": "@@ -1,3 +1,11 @@\n+2017-11-05  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR other/82784\n+\t* asan.c (DEF_SANITIZER_BUILTIN_1): Factor out of ...\n+\t(DEF_SANITIZER_BUILTIN): ... here.\n+\t(initialize_sanitizer_builtins): Use DEF_SANITIZER_BUILTIN_1 instead of\n+\tDEF_SANITIZER_BUILTIN in if stmt.  Add missing semicolon.\n+\n 2017-11-05  Tom de Vries  <tom@codesourcery.com>\n \n \tPR other/82784"}, {"sha": "ca5fceed9fcafcb4d11fb7196f999750f03da7af", "filename": "gcc/asan.c", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67c6769bc0e8bf7571040d56cc882a03420f5508/gcc%2Fasan.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67c6769bc0e8bf7571040d56cc882a03420f5508/gcc%2Fasan.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fasan.c?ref=67c6769bc0e8bf7571040d56cc882a03420f5508", "patch": "@@ -2805,14 +2805,17 @@ initialize_sanitizer_builtins (void)\n #define ATTR_PURE_NOTHROW_LEAF_LIST ECF_PURE | ATTR_NOTHROW_LEAF_LIST\n #undef DEF_BUILTIN_STUB\n #define DEF_BUILTIN_STUB(ENUM, NAME)\n-#undef DEF_SANITIZER_BUILTIN\n-#define DEF_SANITIZER_BUILTIN(ENUM, NAME, TYPE, ATTRS) \\\n+#undef DEF_SANITIZER_BUILTIN_1\n+#define DEF_SANITIZER_BUILTIN_1(ENUM, NAME, TYPE, ATTRS)\t\t\\\n   do {\t\t\t\t\t\t\t\t\t\\\n     decl = add_builtin_function (\"__builtin_\" NAME, TYPE, ENUM,\t\t\\\n \t\t\t\t BUILT_IN_NORMAL, NAME, NULL_TREE);\t\\\n     set_call_expr_flags (decl, ATTRS);\t\t\t\t\t\\\n     set_builtin_decl (ENUM, decl, true);\t\t\t\t\\\n-  } while (0);\n+  } while (0)\n+#undef DEF_SANITIZER_BUILTIN\n+#define DEF_SANITIZER_BUILTIN(ENUM, NAME, TYPE, ATTRS)\t\\\n+  DEF_SANITIZER_BUILTIN_1 (ENUM, NAME, TYPE, ATTRS);\n \n #include \"sanitizer.def\"\n \n@@ -2821,10 +2824,11 @@ initialize_sanitizer_builtins (void)\n      DEF_SANITIZER_BUILTIN here only as a convenience macro.  */\n   if ((flag_sanitize & SANITIZE_OBJECT_SIZE)\n       && !builtin_decl_implicit_p (BUILT_IN_OBJECT_SIZE))\n-    DEF_SANITIZER_BUILTIN (BUILT_IN_OBJECT_SIZE, \"object_size\",\n-\t\t\t   BT_FN_SIZE_CONST_PTR_INT,\n-\t\t\t   ATTR_PURE_NOTHROW_LEAF_LIST)\n+    DEF_SANITIZER_BUILTIN_1 (BUILT_IN_OBJECT_SIZE, \"object_size\",\n+\t\t\t     BT_FN_SIZE_CONST_PTR_INT,\n+\t\t\t     ATTR_PURE_NOTHROW_LEAF_LIST);\n \n+#undef DEF_SANITIZER_BUILTIN_1\n #undef DEF_SANITIZER_BUILTIN\n #undef DEF_BUILTIN_STUB\n }"}]}