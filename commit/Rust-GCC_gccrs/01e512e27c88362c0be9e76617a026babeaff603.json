{"sha": "01e512e27c88362c0be9e76617a026babeaff603", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDFlNTEyZTI3Yzg4MzYyYzBiZTllNzY2MTdhMDI2YmFiZWFmZjYwMw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-11-25T18:00:47Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-11-25T18:00:47Z"}, "message": "re PR middle-end/46637 (SIGSEGV in if_then_else_cond - too deep recursion)\n\n\tPR middle-end/46637\n\t* combine.c (try_combine): When substing i2dest for i2src, pass\n\t1 as last argument even if\n\ti0_feeds_i1_n && i1_feeds_i2_n && i0dest_in_i0src.\n\n\t* gcc.c-torture/compile/pr46637.c: New test.\n\nFrom-SVN: r167148", "tree": {"sha": "c6ab0e183d73e53aef30128acd6690f703e71220", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c6ab0e183d73e53aef30128acd6690f703e71220"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/01e512e27c88362c0be9e76617a026babeaff603", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01e512e27c88362c0be9e76617a026babeaff603", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01e512e27c88362c0be9e76617a026babeaff603", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01e512e27c88362c0be9e76617a026babeaff603/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "27f2c348e9664b741a9fec6d577efc450001130d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27f2c348e9664b741a9fec6d577efc450001130d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27f2c348e9664b741a9fec6d577efc450001130d"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "d67f49993e3e220916154afa46c7976e24bf6aba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01e512e27c88362c0be9e76617a026babeaff603/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01e512e27c88362c0be9e76617a026babeaff603/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=01e512e27c88362c0be9e76617a026babeaff603", "patch": "@@ -1,3 +1,10 @@\n+2010-11-25  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/46637\n+\t* combine.c (try_combine): When substing i2dest for i2src, pass\n+\t1 as last argument even if\n+\ti0_feeds_i1_n && i1_feeds_i2_n && i0dest_in_i0src.\n+\n 2010-11-25  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR middle-end/46647"}, {"sha": "a8ce701efb008203aae30aa8232f5e706570ee5e", "filename": "gcc/combine.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01e512e27c88362c0be9e76617a026babeaff603/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01e512e27c88362c0be9e76617a026babeaff603/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=01e512e27c88362c0be9e76617a026babeaff603", "patch": "@@ -3096,10 +3096,12 @@ try_combine (rtx i3, rtx i2, rtx i1, rtx i0, int *new_direct_jump_p)\n       /* If I1 feeds into I2 and I1DEST is in I1SRC, we need to make a unique\n \t copy of I2SRC each time we substitute it, in order to avoid creating\n \t self-referential RTL when we will be substituting I1SRC for I1DEST\n-\t later.  Likewise if I0 feeds into I2 and I0DEST is in I0SRC.  */\n+\t later.  Likewise if I0 feeds into I2, either directly or indirectly\n+\t through I1, and I0DEST is in I0SRC.  */\n       newpat = subst (PATTERN (i3), i2dest, i2src, 0,\n \t\t      (i1_feeds_i2_n && i1dest_in_i1src)\n-\t\t      || (i0_feeds_i2_n && i0dest_in_i0src));\n+\t\t      || ((i0_feeds_i2_n || (i0_feeds_i1_n && i1_feeds_i2_n))\n+\t\t\t  && i0dest_in_i0src));\n       substed_i2 = 1;\n \n       /* Record whether I2's body now appears within I3's body.  */"}, {"sha": "b19b812e5aa394e1c33fc2b803c765fdc59ce35a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01e512e27c88362c0be9e76617a026babeaff603/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01e512e27c88362c0be9e76617a026babeaff603/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=01e512e27c88362c0be9e76617a026babeaff603", "patch": "@@ -1,3 +1,8 @@\n+2010-11-25  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/46637\n+\t* gcc.c-torture/compile/pr46637.c: New test.\n+\n 2010-11-25  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* gfortran.dg/pr46519-1.f: Add -mtune=generic."}, {"sha": "c765949e8ad61a871f43e992f62a4ce794742222", "filename": "gcc/testsuite/gcc.c-torture/compile/pr46637.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01e512e27c88362c0be9e76617a026babeaff603/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr46637.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01e512e27c88362c0be9e76617a026babeaff603/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr46637.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr46637.c?ref=01e512e27c88362c0be9e76617a026babeaff603", "patch": "@@ -0,0 +1,11 @@\n+/* PR middle-end/46637 */\n+\n+struct S { int s[5]; } *p;\n+\n+void\n+foo (long x)\n+{\n+  long a = x == 1 ? 4L : 1L;\n+  asm (\"\" : \"+m\" (p->s[a]));\n+  p->s[0]++;\n+}"}]}