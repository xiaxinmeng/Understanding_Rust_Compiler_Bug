{"sha": "537fc532be12254466f5d19fbaf40dc5016d6f81", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTM3ZmM1MzJiZTEyMjU0NDY2ZjVkMTlmYmFmNDBkYzUwMTZkNmY4MQ==", "commit": {"author": {"name": "Neil Booth", "email": "neil@daikokuya.demon.co.uk", "date": "2002-06-02T21:00:50Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2002-06-02T21:00:50Z"}, "message": "elf.h: Use TARGET_OS_CPP_BUILTINS rather than SUBTARGET_SPEC.\n\nconfig/h8300:\n\t* elf.h: Use TARGET_OS_CPP_BUILTINS rather than\n\tSUBTARGET_SPEC.\n\t* rtems.h: Similarly.\n\t* h8300.h (CPP_PREDEFINES, CPP_SPEC, SUBTARGET_CPP_SPEC,\n\tEXTRA_SPECS, SUBTARGET_EXTRA_SPECS): Remove.\n\t(TARGET_CPU_CPP_BUILTINS): Use.\n\nFrom-SVN: r54187", "tree": {"sha": "a5885cafe21ad61fbb546134bbde6d487591d94c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5885cafe21ad61fbb546134bbde6d487591d94c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/537fc532be12254466f5d19fbaf40dc5016d6f81", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/537fc532be12254466f5d19fbaf40dc5016d6f81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/537fc532be12254466f5d19fbaf40dc5016d6f81", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/537fc532be12254466f5d19fbaf40dc5016d6f81/comments", "author": null, "committer": null, "parents": [{"sha": "ab7803738d10fe9619297816fb7a92936b30dc3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab7803738d10fe9619297816fb7a92936b30dc3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab7803738d10fe9619297816fb7a92936b30dc3c"}], "stats": {"total": 78, "additions": 52, "deletions": 26}, "files": [{"sha": "f931d52e98d35ad54e7bb6fd7fca587d7ceaf800", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/537fc532be12254466f5d19fbaf40dc5016d6f81/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/537fc532be12254466f5d19fbaf40dc5016d6f81/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=537fc532be12254466f5d19fbaf40dc5016d6f81", "patch": "@@ -1,3 +1,13 @@\n+2002-06-02  Neil Booth  <neil@daikokuya.demon.co.uk>\n+\n+config/h8300:\n+\t* elf.h: Use TARGET_OS_CPP_BUILTINS rather than\n+\tSUBTARGET_SPEC.\n+\t* rtems.h: Similarly.\n+\t* h8300.h (CPP_PREDEFINES, CPP_SPEC, SUBTARGET_CPP_SPEC,\n+\tEXTRA_SPECS, SUBTARGET_EXTRA_SPECS): Remove.\n+\t(TARGET_CPU_CPP_BUILTINS): Use.\n+\n 2002-06-02  Richard Henderson  <rth@redhat.com>\n \n \t* alias.c: Include target.h."}, {"sha": "81e320c061d750928a91f031df525980b8a990f4", "filename": "gcc/config/h8300/elf.h", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/537fc532be12254466f5d19fbaf40dc5016d6f81/gcc%2Fconfig%2Fh8300%2Felf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/537fc532be12254466f5d19fbaf40dc5016d6f81/gcc%2Fconfig%2Fh8300%2Felf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Felf.h?ref=537fc532be12254466f5d19fbaf40dc5016d6f81", "patch": "@@ -1,5 +1,8 @@\n-#undef SUBTARGET_CPP_SPEC\n-#define SUBTARGET_CPP_SPEC \"-D__ELF__\"\n+/* Target OS preprocessor built-ins.  */\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+    do {\t\t\t\t\t\\\n+\tbuiltin_define (\"__ELF__\");\t\t\\\n+    } while (0)\n \n /* Undefine some macros defined in h8300 that conflict with elfos.h .  */\n #undef SDB_DEBUGGING_INFO"}, {"sha": "78bd8d33ec4f904bb7d334a018fdf666caf07479", "filename": "gcc/config/h8300/h8300.h", "status": "modified", "additions": 30, "deletions": 20, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/537fc532be12254466f5d19fbaf40dc5016d6f81/gcc%2Fconfig%2Fh8300%2Fh8300.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/537fc532be12254466f5d19fbaf40dc5016d6f81/gcc%2Fconfig%2Fh8300%2Fh8300.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.h?ref=537fc532be12254466f5d19fbaf40dc5016d6f81", "patch": "@@ -37,31 +37,41 @@ extern int cpu_type;\n extern const char *h8_push_op, *h8_pop_op, *h8_mov_op;\n extern const char * const *h8_reg_names;\n \n-/* Names to predefine in the preprocessor for this target machine.  */\n-\n-#define CPP_PREDEFINES \\\n-\"-D__LONG_MAX__=2147483647L -D__LONG_LONG_MAX__=2147483647L\"\n-\n-#define CPP_SPEC \\\n-  \"%{!mh:%{!ms:-D__H8300__}} %{mh:-D__H8300H__} %{ms:-D__H8300S__} \\\n-   %{!mh:%{!ms:-Acpu=h8300 -Amachine=h8300}} \\\n-   %{mh:-Acpu=h8300h -Amachine=h8300h} \\\n-   %{ms:-Acpu=h8300s -Amachine=h8300s} \\\n-   %{!mint32:-D__INT_MAX__=32767} %{mint32:-D__INT_MAX__=2147483647} \\\n-   %(subtarget_cpp_spec)\"\n-\n-#define SUBTARGET_CPP_SPEC \"\"\n+/* Target CPU builtins.  */\n+#define TARGET_CPU_CPP_BUILTINS()\t\t\t\\\n+  do\t\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\\\n+      if (TARGET_H8300H)\t\t\t\t\\\n+        {\t\t\t\t\t\t\\\n+\t  builtin_define (\"__H8300H__\");\t\t\\\n+\t  builtin_assert (\"cpu=h8300h\");\t\t\\\n+\t  builtin_assert (\"machine=h8300h\");\t\t\\\n+\t}\t\t\t\t\t\t\\\n+      else if (TARGET_H8300S)\t\t\t\t\\\n+        {\t\t\t\t\t\t\\\n+\t  builtin_define (\"__H8300S__\");\t\t\\\n+\t  builtin_assert (\"cpu=h8300s\");\t\t\\\n+\t  builtin_assert (\"machine=h8300s\");\t\t\\\n+\t}\t\t\t\t\t\t\\\n+      else\t\t\t\t\t\t\\\n+        {\t\t\t\t\t\t\\\n+\t  builtin_define (\"__H8300__\");\t\t\t\\\n+\t  builtin_assert (\"cpu=h8300\");\t\t\t\\\n+\t  builtin_assert (\"machine=h8300\");\t\t\\\n+\t}\t\t\t\t\t\t\\\n+      if (TARGET_INT32)\t\t\t\t\t\\\n+\tbuiltin_define (\"__INT_MAX__=2147483647\");\t\\\n+      else\t\t\t\t\t\t\\\n+\tbuiltin_define (\"__INT_MAX__=32767\");\t\t\\\n+      builtin_define (\"__LONG_MAX__=2147483647L\");\t\\\n+      builtin_define (\"__LONG_LONG_MAX__=2147483647L\");\t\\\n+    }\t\t\t\t\t\t\t\\\n+  while (0)\n \n #define LINK_SPEC \"%{mh:-m h8300h} %{ms:-m h8300s}\"\n \n #define LIB_SPEC \"%{mrelax:-relax} %{g:-lg} %{!p:%{!pg:-lc}}%{p:-lc_p}%{pg:-lc_p}\"\n \n-#define EXTRA_SPECS\t\t\t\t\t\t\\\n-  { \"subtarget_cpp_spec\", SUBTARGET_CPP_SPEC },\t\\\n-  SUBTARGET_EXTRA_SPECS\n-\n-#define SUBTARGET_EXTRA_SPECS\n-\n /* Print subsidiary information on the compiler version in use.  */\n \n #define TARGET_VERSION fprintf (stderr, \" (Hitachi H8/300)\");"}, {"sha": "6b487cd1b7b34c6048c011bd8e4aa3ac459e3024", "filename": "gcc/config/h8300/rtems.h", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/537fc532be12254466f5d19fbaf40dc5016d6f81/gcc%2Fconfig%2Fh8300%2Frtems.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/537fc532be12254466f5d19fbaf40dc5016d6f81/gcc%2Fconfig%2Fh8300%2Frtems.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Frtems.h?ref=537fc532be12254466f5d19fbaf40dc5016d6f81", "patch": "@@ -19,7 +19,10 @@ along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n-#undef CPP_PREDEFINES\n-#define CPP_PREDEFINES \"-Dh8300 \\\n-  -D__LONG_MAX__=2147483647L -D__LONG_LONG_MAX__=2147483647L \\\n-  -D__rtems__ -Asystem=rtems\"\n+/* Target OS preprocessor built-ins.  */\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+    do {\t\t\t\t\t\\\n+\tbuiltin_define_std (\"h8300\");\t\t\\\n+\tbuiltin_define (\"__rtems__\");\t\t\\\n+\tbuiltin_assert (\"system=rtems\");\t\\\n+    } while (0)"}]}