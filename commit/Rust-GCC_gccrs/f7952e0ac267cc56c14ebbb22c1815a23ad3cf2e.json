{"sha": "f7952e0ac267cc56c14ebbb22c1815a23ad3cf2e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjc5NTJlMGFjMjY3Y2M1NmMxNGViYmIyMmMxODE1YTIzYWQzY2YyZQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2005-09-18T17:11:11Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2005-09-18T17:11:11Z"}, "message": "varasm.c (output_constant): Do not abort on conversions to union types between different sizes.\n\n\t* varasm.c (output_constant): Do not abort on conversions to union\n\ttypes between different sizes.\n\nFrom-SVN: r104404", "tree": {"sha": "bd858064ac0c391fa4c072dc6b97e1ee2e7cc8db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bd858064ac0c391fa4c072dc6b97e1ee2e7cc8db"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f7952e0ac267cc56c14ebbb22c1815a23ad3cf2e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7952e0ac267cc56c14ebbb22c1815a23ad3cf2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7952e0ac267cc56c14ebbb22c1815a23ad3cf2e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7952e0ac267cc56c14ebbb22c1815a23ad3cf2e/comments", "author": null, "committer": null, "parents": [{"sha": "30bf3b40e6ecbfcdd67518a7cf8b8bf9b2fb18c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30bf3b40e6ecbfcdd67518a7cf8b8bf9b2fb18c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30bf3b40e6ecbfcdd67518a7cf8b8bf9b2fb18c1"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "ffe4d2b97a43e9cadf9536b45d02d592492d9d57", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7952e0ac267cc56c14ebbb22c1815a23ad3cf2e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7952e0ac267cc56c14ebbb22c1815a23ad3cf2e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f7952e0ac267cc56c14ebbb22c1815a23ad3cf2e", "patch": "@@ -1,3 +1,8 @@\n+2005-09-18  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* varasm.c (output_constant): Do not abort on conversions to union\n+\ttypes between different sizes.\n+\n 2005-09-18  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/23944"}, {"sha": "91d2ea0c8179a738962c49b5f491f27fc3a12dfa", "filename": "gcc/varasm.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7952e0ac267cc56c14ebbb22c1815a23ad3cf2e/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7952e0ac267cc56c14ebbb22c1815a23ad3cf2e/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=f7952e0ac267cc56c14ebbb22c1815a23ad3cf2e", "patch": "@@ -3881,8 +3881,11 @@ output_constant (tree exp, unsigned HOST_WIDE_INT size, unsigned int align)\n       HOST_WIDE_INT op_size = int_size_in_bytes (TREE_TYPE (TREE_OPERAND (exp, 0)));\n \n       /* Make sure eliminating the conversion is really a no-op, except with\n-\t VIEW_CONVERT_EXPR to allow for wild Ada unchecked conversions.  */\n-      if (type_size != op_size && TREE_CODE (exp) != VIEW_CONVERT_EXPR)\n+\t VIEW_CONVERT_EXPRs to allow for wild Ada unchecked conversions and\n+\t union types to allow for Ada unchecked unions.  */\n+      if (type_size != op_size\n+\t  && TREE_CODE (exp) != VIEW_CONVERT_EXPR\n+\t  && TREE_CODE (TREE_TYPE (exp)) != UNION_TYPE)\n \tinternal_error (\"no-op convert from %wd to %wd bytes in initializer\",\n \t\t\top_size, type_size);\n "}]}