{"sha": "8a866b8296874b5f6f3371bb368c8191c828d98f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGE4NjZiODI5Njg3NGI1ZjZmMzM3MWJiMzY4YzgxOTFjODI4ZDk4Zg==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2017-10-26T20:09:24Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2017-10-26T20:09:24Z"}, "message": "Fix unsharing of GIMPLE_OMP_{SINGLE,TARGET,TEAMS} in gimple_copy\n\n2017-10-26  Tom de Vries  <tom@codesourcery.com>\n\n\tPR tree-optimization/82707\n\t* gimple.c (gimple_copy): Fix unsharing of\n\tGIMPLE_OMP_{SINGLE,TARGET,TEAMS}.\n\nFrom-SVN: r254120", "tree": {"sha": "00351b7712e085fcaf83085385a67c81479e527b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00351b7712e085fcaf83085385a67c81479e527b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8a866b8296874b5f6f3371bb368c8191c828d98f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a866b8296874b5f6f3371bb368c8191c828d98f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a866b8296874b5f6f3371bb368c8191c828d98f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a866b8296874b5f6f3371bb368c8191c828d98f/comments", "author": null, "committer": null, "parents": [{"sha": "7e23f4a6f80994e305f35f6de6f79966becaa92d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e23f4a6f80994e305f35f6de6f79966becaa92d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e23f4a6f80994e305f35f6de6f79966becaa92d"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "791f3c169ce0bc6fe64f77538e09574385710e55", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a866b8296874b5f6f3371bb368c8191c828d98f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a866b8296874b5f6f3371bb368c8191c828d98f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8a866b8296874b5f6f3371bb368c8191c828d98f", "patch": "@@ -1,3 +1,9 @@\n+2017-10-26  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR tree-optimization/82707\n+\t* gimple.c (gimple_copy): Fix unsharing of\n+\tGIMPLE_OMP_{SINGLE,TARGET,TEAMS}.\n+\n 2017-10-26  Olga Makhotina  <olga.makhotina@intel.com>\n \n \t* config/i386/avx512fintrin.h (_mm512_cmpeq_pd_mask,"}, {"sha": "37f2248f224de3f93535fb38d8a35332ed5c606f", "filename": "gcc/gimple.c", "status": "modified", "additions": 25, "deletions": 1, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a866b8296874b5f6f3371bb368c8191c828d98f/gcc%2Fgimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a866b8296874b5f6f3371bb368c8191c828d98f/gcc%2Fgimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple.c?ref=8a866b8296874b5f6f3371bb368c8191c828d98f", "patch": "@@ -1840,11 +1840,35 @@ gimple_copy (gimple *stmt)\n \t  gimple_omp_sections_set_clauses (copy, t);\n \t  t = unshare_expr (gimple_omp_sections_control (stmt));\n \t  gimple_omp_sections_set_control (copy, t);\n-\t  /* FALLTHRU  */\n+\t  goto copy_omp_body;\n \n \tcase GIMPLE_OMP_SINGLE:\n+\t  {\n+\t    gomp_single *omp_single_copy = as_a <gomp_single *> (copy);\n+\t    t = unshare_expr (gimple_omp_single_clauses (stmt));\n+\t    gimple_omp_single_set_clauses (omp_single_copy, t);\n+\t  }\n+\t  goto copy_omp_body;\n+\n \tcase GIMPLE_OMP_TARGET:\n+\t  {\n+\t    gomp_target *omp_target_stmt = as_a <gomp_target *> (stmt);\n+\t    gomp_target *omp_target_copy = as_a <gomp_target *> (copy);\n+\t    t = unshare_expr (gimple_omp_target_clauses (omp_target_stmt));\n+\t    gimple_omp_target_set_clauses (omp_target_copy, t);\n+\t    t = unshare_expr (gimple_omp_target_data_arg (omp_target_stmt));\n+\t    gimple_omp_target_set_data_arg (omp_target_copy, t);\n+\t  }\n+\t  goto copy_omp_body;\n+\n \tcase GIMPLE_OMP_TEAMS:\n+\t  {\n+\t    gomp_teams *omp_teams_copy = as_a <gomp_teams *> (copy);\n+\t    t = unshare_expr (gimple_omp_teams_clauses (stmt));\n+\t    gimple_omp_teams_set_clauses (omp_teams_copy, t);\n+\t  }\n+\t  /* FALLTHRU  */\n+\n \tcase GIMPLE_OMP_SECTION:\n \tcase GIMPLE_OMP_MASTER:\n \tcase GIMPLE_OMP_TASKGROUP:"}]}