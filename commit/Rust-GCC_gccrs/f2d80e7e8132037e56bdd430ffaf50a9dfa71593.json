{"sha": "f2d80e7e8132037e56bdd430ffaf50a9dfa71593", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjJkODBlN2U4MTMyMDM3ZTU2YmRkNDMwZmZhZjUwYTlkZmE3MTU5Mw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-04-16T20:39:12Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-04-16T20:39:12Z"}, "message": "re PR middle-end/8866 (Bug in switch statement code generation -- missing label)\n\n\tPR middle-end/8866\n\t* cfgtrl.c (try_redirect_by_replacing_jump): Do not delete\n\tjumptables.\n\n\tPR middle-end/8866\n\t* libjava.lang/PR8866.java: New test.\n\nFrom-SVN: r65698", "tree": {"sha": "545acfb6d943c6885a63e73a9b1b8a6b921f7172", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/545acfb6d943c6885a63e73a9b1b8a6b921f7172"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f2d80e7e8132037e56bdd430ffaf50a9dfa71593", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2d80e7e8132037e56bdd430ffaf50a9dfa71593", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2d80e7e8132037e56bdd430ffaf50a9dfa71593", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2d80e7e8132037e56bdd430ffaf50a9dfa71593/comments", "author": null, "committer": null, "parents": [{"sha": "1cdbd6309a9c08a9bbb6cb79ffea4ac10228fe74", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cdbd6309a9c08a9bbb6cb79ffea4ac10228fe74", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1cdbd6309a9c08a9bbb6cb79ffea4ac10228fe74"}], "stats": {"total": 44, "additions": 36, "deletions": 8}, "files": [{"sha": "f95d7026759dc805e81470ac41174013b8da721d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2d80e7e8132037e56bdd430ffaf50a9dfa71593/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2d80e7e8132037e56bdd430ffaf50a9dfa71593/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f2d80e7e8132037e56bdd430ffaf50a9dfa71593", "patch": "@@ -1,3 +1,9 @@\n+2003-04-16  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR middle-end/8866\n+\t* cfgtrl.c (try_redirect_by_replacing_jump): Do not delete\n+\tjumptables.\n+\n 2003-04-16  Richard Henderson  <rth@redhat.com>\n \n \t* config/ia64/ia64.c (sdata_symbolic_operand): Use"}, {"sha": "394632c8cc4ad003055bd506efceb3bc5b575e65", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2d80e7e8132037e56bdd430ffaf50a9dfa71593/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2d80e7e8132037e56bdd430ffaf50a9dfa71593/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=f2d80e7e8132037e56bdd430ffaf50a9dfa71593", "patch": "@@ -731,7 +731,7 @@ try_redirect_by_replacing_jump (e, target)\n   else\n     {\n       rtx target_label = block_label (target);\n-      rtx barrier, label, table;\n+      rtx barrier;\n \n       emit_jump_insn_after (gen_jump (target_label), insn);\n       JUMP_LABEL (src->end) = target_label;\n@@ -740,15 +740,10 @@ try_redirect_by_replacing_jump (e, target)\n \tfprintf (rtl_dump_file, \"Replacing insn %i by jump %i\\n\",\n \t\t INSN_UID (insn), INSN_UID (src->end));\n \n-\n+      /* Remove the original jump.  If INSN is a tablejump, the jump\n+\t table will be removed later, if it is no longer needed.  */\n       delete_insn_chain (kill_from, insn);\n \n-      /* Recognize a tablejump that we are converting to a\n-\t simple jump and remove its associated CODE_LABEL\n-\t and ADDR_VEC or ADDR_DIFF_VEC.  */\n-      if (tablejump_p (insn, &label, &table))\n-\tdelete_insn_chain (label, table);\n-\n       barrier = next_nonnote_insn (src->end);\n       if (!barrier || GET_CODE (barrier) != BARRIER)\n \temit_barrier_after (src->end);"}, {"sha": "96b3930d8607550502498ab023f3c0489450a47b", "filename": "libjava/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2d80e7e8132037e56bdd430ffaf50a9dfa71593/libjava%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2d80e7e8132037e56bdd430ffaf50a9dfa71593/libjava%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FChangeLog?ref=f2d80e7e8132037e56bdd430ffaf50a9dfa71593", "patch": "@@ -1,3 +1,8 @@\n+2003-04-16  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR middle-end/8866\n+\t* libjava.lang/PR8866.java: New test.\n+\n 2003-04-16  Andrew Haley  <aph@redhat.com>\n \n \t* libjava.lang/Throw_2.java (main): Make a successful test produce"}, {"sha": "fa620667445582f10dc72e908d95030eb89824b5", "filename": "libjava/testsuite/libjava.lang/PR8866.java", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2d80e7e8132037e56bdd430ffaf50a9dfa71593/libjava%2Ftestsuite%2Flibjava.lang%2FPR8866.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2d80e7e8132037e56bdd430ffaf50a9dfa71593/libjava%2Ftestsuite%2Flibjava.lang%2FPR8866.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.lang%2FPR8866.java?ref=f2d80e7e8132037e56bdd430ffaf50a9dfa71593", "patch": "@@ -0,0 +1,22 @@\n+public class PR8866\n+{\n+  public static void main (String args[])\n+    {\n+      String attTypeString = \"\";\n+\n+      switch (args.length) {\n+      case 1:\n+          attTypeString = \"string\";\n+      case 4:\n+          attTypeString = \"ID\";;\n+      case 5:\n+          attTypeString = \"IDREF\";;\n+      case 6:\n+          attTypeString = \"NMTOKEN\";;\n+      case 7:\n+          attTypeString = \"NOTATION\";;\n+      default:\n+          ;\n+      }\n+    }\n+}"}]}