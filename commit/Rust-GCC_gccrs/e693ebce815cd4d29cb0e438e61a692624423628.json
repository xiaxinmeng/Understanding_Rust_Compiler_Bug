{"sha": "e693ebce815cd4d29cb0e438e61a692624423628", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTY5M2ViY2U4MTVjZDRkMjljYjBlNDM4ZTYxYTY5MjYyNDQyMzYyOA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2018-04-30T11:40:47Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2018-04-30T11:40:47Z"}, "message": "* lto-partition.c (lto_balanced_map): Fix sanity check.\n\nFrom-SVN: r259759", "tree": {"sha": "cf2145964c7693bb2a90ae1a98e8d0385f54ea2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf2145964c7693bb2a90ae1a98e8d0385f54ea2c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e693ebce815cd4d29cb0e438e61a692624423628", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e693ebce815cd4d29cb0e438e61a692624423628", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e693ebce815cd4d29cb0e438e61a692624423628", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e693ebce815cd4d29cb0e438e61a692624423628/comments", "author": null, "committer": null, "parents": [{"sha": "af1682fc3aaff288f7ac95cf5585971cef15f0ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af1682fc3aaff288f7ac95cf5585971cef15f0ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af1682fc3aaff288f7ac95cf5585971cef15f0ab"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "d54ef50a84be6d67a7d1bc54d87b566d68cc95d2", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e693ebce815cd4d29cb0e438e61a692624423628/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e693ebce815cd4d29cb0e438e61a692624423628/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=e693ebce815cd4d29cb0e438e61a692624423628", "patch": "@@ -1,3 +1,7 @@\n+2018-04-20  Jan Hubicka  <jh@suse.cz>\n+\n+\t* lto-partition.c (lto_balanced_map): Fix sanity check.\n+\n 2018-04-19  Jan Hubicka  <jh@suse.cz>\n \n \t* lto-partition.c: Include sreal.h"}, {"sha": "3efebe73babfb129c9f914e6396453eef71b39e7", "filename": "gcc/lto/lto-partition.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e693ebce815cd4d29cb0e438e61a692624423628/gcc%2Flto%2Flto-partition.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e693ebce815cd4d29cb0e438e61a692624423628/gcc%2Flto%2Flto-partition.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto-partition.c?ref=e693ebce815cd4d29cb0e438e61a692624423628", "patch": "@@ -809,7 +809,7 @@ lto_balanced_map (int n_lto_partitions, int max_partition_size)\n     next_nodes.safe_push (noreorder[noreorder_pos++]);\n   /* For one partition the cost of boundary should be 0 unless we added final\n      symbols here (these are not accounted) or we have accounting bug.  */\n-  gcc_assert (next_nodes.length () || npartitions != 1 || !best_cost);\n+  gcc_assert (next_nodes.length () || npartitions != 1 || !best_cost || best_cost == -1);\n   add_sorted_nodes (next_nodes, partition);\n \n   free (order);"}]}