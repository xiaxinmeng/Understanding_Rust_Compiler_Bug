{"sha": "c365eb26e87eab31f55b760fe4220b68fb952b72", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzM2NWViMjZlODdlYWIzMWY1NWI3NjBmZTQyMjBiNjhmYjk1MmI3Mg==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2019-07-05T07:03:20Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-07-05T07:03:20Z"}, "message": "[Ada] Fix position of subprogram body generated for static predicate\n\n2019-07-05  Ed Schonberg  <schonberg@adacore.com>\n\ngcc/ada/\n\n\t* sem_ch13.adb (Build_Predicate_Functions): If a subtype that\n\tcarries a static predicate aspect is frozen immediately after\n\tits declaration, ensure that the generated function body created\n\tfor predicate checking is inserted after the corresponding\n\tsubprogram declaration, which is created at the point the\n\tdeclaration is elaborated.\n\nFrom-SVN: r273122", "tree": {"sha": "98a60ccbff6e973252d405c7435ac3c2f93304ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/98a60ccbff6e973252d405c7435ac3c2f93304ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c365eb26e87eab31f55b760fe4220b68fb952b72", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c365eb26e87eab31f55b760fe4220b68fb952b72", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c365eb26e87eab31f55b760fe4220b68fb952b72", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c365eb26e87eab31f55b760fe4220b68fb952b72/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9880061b346330e7c986016bdec75f38659f8793", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9880061b346330e7c986016bdec75f38659f8793", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9880061b346330e7c986016bdec75f38659f8793"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "c5dcd03907911a889eea8ff7081aebfed523b0e2", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c365eb26e87eab31f55b760fe4220b68fb952b72/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c365eb26e87eab31f55b760fe4220b68fb952b72/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c365eb26e87eab31f55b760fe4220b68fb952b72", "patch": "@@ -1,3 +1,12 @@\n+2019-07-05  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch13.adb (Build_Predicate_Functions): If a subtype that\n+\tcarries a static predicate aspect is frozen immediately after\n+\tits declaration, ensure that the generated function body created\n+\tfor predicate checking is inserted after the corresponding\n+\tsubprogram declaration, which is created at the point the\n+\tdeclaration is elaborated.\n+\n 2019-07-05  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* exp_ch7.adb (Cleanup_Record): Use the underlying type when"}, {"sha": "4c743666b234df5d62c565924b19420210b19c0d", "filename": "gcc/ada/sem_ch13.adb", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c365eb26e87eab31f55b760fe4220b68fb952b72/gcc%2Fada%2Fsem_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c365eb26e87eab31f55b760fe4220b68fb952b72/gcc%2Fada%2Fsem_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch13.adb?ref=c365eb26e87eab31f55b760fe4220b68fb952b72", "patch": "@@ -8902,9 +8902,15 @@ package body Sem_Ch13 is\n                         Expression => Expr))));\n \n             --  The declaration has been analyzed when created, and placed\n-            --  after type declaration. Insert body itself after freeze node.\n+            --  after type declaration. Insert body itself after freeze node,\n+            --  unless subprogram declaration is already there, in which case\n+            --  body better be placed afterwards.\n \n-            Insert_After_And_Analyze (N, FBody);\n+            if FDecl = Next (N) then\n+               Insert_After_And_Analyze (FDecl, FBody);\n+            else\n+               Insert_After_And_Analyze (N, FBody);\n+            end if;\n \n             --  The defining identifier of a quantified expression carries the\n             --  scope in which the type appears, but when unnesting we need"}]}