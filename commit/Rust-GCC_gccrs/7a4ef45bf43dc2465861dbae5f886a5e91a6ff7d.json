{"sha": "7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2E0ZWY0NWJmNDNkYzI0NjU4NjFkYmFlNWY4ODZhNWU5MWE2ZmY3ZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2005-09-20T14:37:44Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2005-09-20T14:37:44Z"}, "message": "re PR fortran/23663 (rejects entry point as a value)\n\n\tPR fortran/23663\n\t* primary.c (match_actual_arg): Handle ENTRY the same way\n\tas FUNCTION.\n\n\t* gfortran.fortran-torture/execute/entry_11.f90: New test.\n\nFrom-SVN: r104453", "tree": {"sha": "5897589d18f623c3acb4629af2c2b8c0d5992b32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5897589d18f623c3acb4629af2c2b8c0d5992b32"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "416f403e615016c974f87ca41b23bf298dfed08f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/416f403e615016c974f87ca41b23bf298dfed08f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/416f403e615016c974f87ca41b23bf298dfed08f"}], "stats": {"total": 51, "additions": 47, "deletions": 4}, "files": [{"sha": "4b8183cdab928f33c9ff1420aa3c5c40be6bc805", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d", "patch": "@@ -1,3 +1,9 @@\n+2005-09-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR fortran/23663\n+\t* primary.c (match_actual_arg): Handle ENTRY the same way\n+\tas FUNCTION.\n+\n 2005-09-18  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n \n \t* Make-lang.in: Make check-fortran alias for check-gfortran."}, {"sha": "76eed6b623a067439cff2baad352acada3276882", "filename": "gcc/fortran/primary.c", "status": "modified", "additions": 20, "deletions": 4, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d/gcc%2Ffortran%2Fprimary.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d/gcc%2Ffortran%2Fprimary.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fprimary.c?ref=7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d", "patch": "@@ -1324,11 +1324,27 @@ match_actual_arg (gfc_expr ** result)\n \n \t  /* If the symbol is a function with itself as the result and\n \t     is being defined, then we have a variable.  */\n-\t  if (sym->result == sym\n-\t      && (gfc_current_ns->proc_name == sym\n+\t  if (sym->attr.function && sym->result == sym)\n+\t    {\n+\t      if (gfc_current_ns->proc_name == sym\n \t\t  || (gfc_current_ns->parent != NULL\n-\t\t      && gfc_current_ns->parent->proc_name == sym)))\n-\t    break;\n+\t\t      && gfc_current_ns->parent->proc_name == sym))\n+\t\tbreak;\n+\n+\t      if (sym->attr.entry\n+\t\t  && (sym->ns == gfc_current_ns\n+\t\t      || sym->ns == gfc_current_ns->parent))\n+\t\t{\n+\t\t  gfc_entry_list *el = NULL;\n+\n+\t\t  for (el = sym->ns->entries; el; el = el->next)\n+\t\t    if (sym == el->sym)\n+\t\t      break;\n+\n+\t\t  if (el)\n+\t\t    break;\n+\t\t}\n+\t    }\n \t}\n \n       e = gfc_get_expr ();\t/* Leave it unknown for now */"}, {"sha": "eddca508c69aeeca100cc92466bf625676b53843", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d", "patch": "@@ -1,3 +1,8 @@\n+2005-09-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR fortran/23663\n+\t* gfortran.fortran-torture/execute/entry_11.f90: New test.\n+\n 2005-09-20  Dorit Nuzman  <dorit@il.ibm.com>\n \n \t* gcc.dg/vect/vect-40.c: Remove pointers to \"aligned types\"."}, {"sha": "916891fdeb9919e0e3e940343bf5f0bf00774bf7", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/entry_11.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fentry_11.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fentry_11.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fentry_11.f90?ref=7a4ef45bf43dc2465861dbae5f886a5e91a6ff7d", "patch": "@@ -0,0 +1,16 @@\n+! PR fortran/23663\n+      function i (n)\n+      i = n\n+      i = max (i, 6)\n+      return\n+      entry j (n)\n+      j = n\n+      j = max (j, 3)\n+      end\n+\n+      program entrytest\n+      if (i (8).ne.8) call abort\n+      if (i (4).ne.6) call abort\n+      if (j (0).ne.3) call abort\n+      if (j (7).ne.7) call abort\n+      end"}]}