{"sha": "2628709d5a63f2aab529662edbfa0f6d07d7e056", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjYyODcwOWQ1YTYzZjJhYWI1Mjk2NjJlZGJmYTBmNmQwN2Q3ZTA1Ng==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-02-09T00:21:44Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-02-09T00:21:44Z"}, "message": "Append \"#include <stdlib.h>\" to assert.h if it uses exit or abort.\n\nFrom-SVN: r6507", "tree": {"sha": "d260159d08862ef437540130f006ba8dbe49a09e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d260159d08862ef437540130f006ba8dbe49a09e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2628709d5a63f2aab529662edbfa0f6d07d7e056", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2628709d5a63f2aab529662edbfa0f6d07d7e056", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2628709d5a63f2aab529662edbfa0f6d07d7e056", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2628709d5a63f2aab529662edbfa0f6d07d7e056/comments", "author": null, "committer": null, "parents": [{"sha": "442e881d89e931d7aa1f6794e6814d6eab08a26f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/442e881d89e931d7aa1f6794e6814d6eab08a26f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/442e881d89e931d7aa1f6794e6814d6eab08a26f"}], "stats": {"total": 32, "additions": 22, "deletions": 10}, "files": [{"sha": "67241eaead122cfcc26e33ccb3e06650606e8fb1", "filename": "gcc/fixproto", "status": "modified", "additions": 22, "deletions": 10, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2628709d5a63f2aab529662edbfa0f6d07d7e056/gcc%2Ffixproto", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2628709d5a63f2aab529662edbfa0f6d07d7e056/gcc%2Ffixproto", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixproto?ref=2628709d5a63f2aab529662edbfa0f6d07d7e056", "patch": "@@ -4,7 +4,7 @@\n #\tfixproto TARGET-DIR SOURCE-DIR-ALL SOURCE-DIR-STD\n #\n # COPYRIGHT\n-#\tCopyright (C) 1993 Free Software Foundation, Inc.\n+#\tCopyright (C) 1993, 1994 Free Software Foundation, Inc.\n #\tThis file is part of GNU CC.\n #\n #\tGNU CC is free software; you can redistribute it and/or modify\n@@ -329,15 +329,27 @@ for code in ALL STD ; do\n       rm -f fixtmp.c fixtmp.i\n     done\n     # check for broken assert.h that needs stdio.h\n-    if test -f $abs_source_dir/assert.h -a \\! -f $abs_target_dir/assert.h \\\n-      && grep 'stderr' $abs_source_dir/assert.h >/dev/null\n-    then\n-      if grep 'include.*stdio.h' $abs_source_dir/assert.h >/dev/null\n-      then true\n-      else\n-\techo 'Fixing broken assert.h (needs stdio.h)'\n-\tcat $abs_source_dir/assert.h >$abs_target_dir/assert.h\n-\techo '#include <stdio.h>' >>$abs_target_dir/assert.h\n+    if test -f $abs_source_dir/assert.h -a \\! -f $abs_target_dir/assert.h; then\n+      if grep 'stderr' $abs_source_dir/assert.h >/dev/null ; then\n+\tif grep 'include.*stdio.h' $abs_source_dir/assert.h >/dev/null ; then\n+\t  true\n+\telse\n+\t  echo 'Fixing broken assert.h (needs stdio.h)'\n+\t  cat $abs_source_dir/assert.h >$abs_target_dir/assert.h\n+\t  echo '#include <stdio.h>' >>$abs_target_dir/assert.h\n+\tfi\n+      fi\n+      if grep 'exit *(' $abs_source_dir/assert.h >/dev/null || \n+\t grep 'abort *(' $abs_source_dir/assert.h >/dev/null ; then\n+\tif grep 'include.*stdlib.h' $abs_source_dir/assert.h >/dev/null ; then\n+\t  true\n+\telse\n+\t  echo 'Fixing broken assert.h (needs stdlib.h)'\n+\t  if test ! -f $abs_target_dir/assert.h ; then\n+\t    cat $abs_source_dir/assert.h >$abs_target_dir/assert.h\n+\t  fi\n+\t  echo '#include <stdlib.h>' >>$abs_target_dir/assert.h\n+\tfi\n       fi\n     fi\n     done_dirs=\"$done_dir $rel_source_dir\""}]}