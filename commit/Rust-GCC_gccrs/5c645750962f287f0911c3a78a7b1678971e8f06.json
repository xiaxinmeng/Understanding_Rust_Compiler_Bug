{"sha": "5c645750962f287f0911c3a78a7b1678971e8f06", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWM2NDU3NTA5NjJmMjg3ZjA5MTFjM2E3OGE3YjE2Nzg5NzFlOGYwNg==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely.gcc@gmail.com", "date": "2009-05-16T10:09:02Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2009-05-16T10:09:02Z"}, "message": "mutex: Move std::lock_error to ...\n\n2009-05-13  Jonathan Wakely  <jwakely.gcc@gmail.com>\n\n\t* include/std/mutex: Move std::lock_error to ...\n\t* src/compatibility.cc: Here.\n\t* src/mutex.cc: Likewise.\n\t* testsuite/30_threads/headers/mutex/types_std_c++0x.cc: Add checks\n\tfor lock types and remove std::lock_error check.\n\nFrom-SVN: r147609", "tree": {"sha": "8b09386ab47b551663c80bdae40a4012984450ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b09386ab47b551663c80bdae40a4012984450ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5c645750962f287f0911c3a78a7b1678971e8f06", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c645750962f287f0911c3a78a7b1678971e8f06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c645750962f287f0911c3a78a7b1678971e8f06", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c645750962f287f0911c3a78a7b1678971e8f06/comments", "author": null, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "40a8f07a47f1192d06e895ce1a4d0fc91a723743", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40a8f07a47f1192d06e895ce1a4d0fc91a723743", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40a8f07a47f1192d06e895ce1a4d0fc91a723743"}], "stats": {"total": 44, "additions": 27, "deletions": 17}, "files": [{"sha": "ea4b25603592d1f80d571377e461ca002c6bf8c6", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c645750962f287f0911c3a78a7b1678971e8f06/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c645750962f287f0911c3a78a7b1678971e8f06/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=5c645750962f287f0911c3a78a7b1678971e8f06", "patch": "@@ -1,3 +1,11 @@\n+2009-05-13  Jonathan Wakely  <jwakely.gcc@gmail.com>\n+\n+\t* include/std/mutex: Move std::lock_error to ...\n+\t* src/compatibility.cc: Here.\n+\t* src/mutex.cc: Likewise.\n+\t* testsuite/30_threads/headers/mutex/types_std_c++0x.cc: Add checks\n+\tfor lock types and remove std::lock_error check.\n+\n 2009-05-15  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* testsuite/21_strings/basic_string/40160.cc: Remove spurious"}, {"sha": "f313ccb9b4071be680b5ff0dd734524ea0df7120", "filename": "libstdc++-v3/include/std/mutex", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c645750962f287f0911c3a78a7b1678971e8f06/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmutex", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c645750962f287f0911c3a78a7b1678971e8f06/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmutex", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmutex?ref=5c645750962f287f0911c3a78a7b1678971e8f06", "patch": "@@ -386,18 +386,6 @@ namespace std\n   extern const try_to_lock_t\ttry_to_lock;\n   extern const adopt_lock_t\tadopt_lock;\n \n-  /** \n-   *  @brief Thrown to indicate errors with lock operations.\n-   *\n-   *  @ingroup exceptions\n-   */\n-  class lock_error : public exception\n-  {\n-  public:\n-    virtual const char*\n-    _GLIBCXX_CONST what() const throw();\n-  };\n-\n   /// @brief  Scoped lock idiom.\n   // Acquire the mutex here with a constructor call, then release with\n   // the destructor call in accordance with RAII style."}, {"sha": "6b3c19b31e419baedc4f5600691d6e3858aee684", "filename": "libstdc++-v3/src/compatibility.cc", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c645750962f287f0911c3a78a7b1678971e8f06/libstdc%2B%2B-v3%2Fsrc%2Fcompatibility.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c645750962f287f0911c3a78a7b1678971e8f06/libstdc%2B%2B-v3%2Fsrc%2Fcompatibility.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fcompatibility.cc?ref=5c645750962f287f0911c3a78a7b1678971e8f06", "patch": "@@ -513,6 +513,23 @@ extern __attribute__((used, weak)) const void * const _ZTIPKe[4]\n       (void *) _ZTSPKe, (void *) 1L, (void *) _ZTIe };\n #endif // _GLIBCXX_LONG_DOUBLE_COMPAT\n \n+// gcc-4.4.0\n+// <mutex> exported std::lock_error\n+#if defined(_GLIBCXX_HAS_GTHREADS) && defined(_GLIBCXX_USE_C99_STDINT_TR1)\n+namespace std\n+{\n+  class lock_error : public exception\n+  {\n+  public:\n+    virtual const char*\n+    _GLIBCXX_CONST what() const throw();\n+  };\n+\n+  const char*\n+  lock_error::what() const throw()\n+  { return \"std::lock_error\"; }\n+}\n+#endif\n \n \n #ifdef _GLIBCXX_SYMVER_DARWIN"}, {"sha": "74a82c8aa821502ff34698d4e80449321546e18f", "filename": "libstdc++-v3/src/mutex.cc", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c645750962f287f0911c3a78a7b1678971e8f06/libstdc%2B%2B-v3%2Fsrc%2Fmutex.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c645750962f287f0911c3a78a7b1678971e8f06/libstdc%2B%2B-v3%2Fsrc%2Fmutex.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fmutex.cc?ref=5c645750962f287f0911c3a78a7b1678971e8f06", "patch": "@@ -43,10 +43,6 @@ namespace std\n   const try_to_lock_t try_to_lock = try_to_lock_t();\n   const adopt_lock_t adopt_lock = adopt_lock_t();\n \n-  const char*\n-  lock_error::what() const throw()\n-  { return \"std::lock_error\"; }\n-\n #ifdef _GLIBCXX_HAVE_TLS\n   __thread void* __once_callable;\n   __thread void (*__once_call)();"}, {"sha": "604569b2641d5567c4acbbcc86e2d839603ecf8b", "filename": "libstdc++-v3/testsuite/30_threads/headers/mutex/types_std_c++0x.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c645750962f287f0911c3a78a7b1678971e8f06/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fheaders%2Fmutex%2Ftypes_std_c%2B%2B0x.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c645750962f287f0911c3a78a7b1678971e8f06/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fheaders%2Fmutex%2Ftypes_std_c%2B%2B0x.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fheaders%2Fmutex%2Ftypes_std_c%2B%2B0x.cc?ref=5c645750962f287f0911c3a78a7b1678971e8f06", "patch": "@@ -35,7 +35,8 @@ void test01()\n   using std::try_to_lock;\n   using std::adopt_lock;\n \n-  typedef std::lock_error error_t;\n+  typedef std::lock_guard<mutext_t> lock_t;\n+  typedef std::unique_lock<rmutext_t> ulock_t;\n \n   typedef std::once_flag once_t;\n }"}]}