{"sha": "3eaa60442ff2727dab5f81465771461f91de8e8b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2VhYTYwNDQyZmYyNzI3ZGFiNWY4MTQ2NTc3MTQ2MWY5MWRlOGU4Yg==", "commit": {"author": {"name": "Franz Sirl", "email": "Franz.Sirl-kernel@lauterbach.com", "date": "2003-02-25T23:13:42Z"}, "committer": {"name": "Franz Sirl", "email": "sirl@gcc.gnu.org", "date": "2003-02-25T23:13:42Z"}, "message": "re PR target/9732 ([ppc32] Wrong code with -O2 -fPIC)\n\n\t2003-02-25  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>\n\n\tPR target/9732\n\t* gcc.dg/20030225-1.c: New test.\n\nFrom-SVN: r63424", "tree": {"sha": "511e5b52a74ce60d687b07e970d556c917203e86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/511e5b52a74ce60d687b07e970d556c917203e86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3eaa60442ff2727dab5f81465771461f91de8e8b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3eaa60442ff2727dab5f81465771461f91de8e8b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3eaa60442ff2727dab5f81465771461f91de8e8b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3eaa60442ff2727dab5f81465771461f91de8e8b/comments", "author": {"login": "jinkama-san", "id": 1462162, "node_id": "MDQ6VXNlcjE0NjIxNjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1462162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jinkama-san", "html_url": "https://github.com/jinkama-san", "followers_url": "https://api.github.com/users/jinkama-san/followers", "following_url": "https://api.github.com/users/jinkama-san/following{/other_user}", "gists_url": "https://api.github.com/users/jinkama-san/gists{/gist_id}", "starred_url": "https://api.github.com/users/jinkama-san/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jinkama-san/subscriptions", "organizations_url": "https://api.github.com/users/jinkama-san/orgs", "repos_url": "https://api.github.com/users/jinkama-san/repos", "events_url": "https://api.github.com/users/jinkama-san/events{/privacy}", "received_events_url": "https://api.github.com/users/jinkama-san/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "14f00213a7d7b42f836200e3f9650677caabff15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14f00213a7d7b42f836200e3f9650677caabff15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14f00213a7d7b42f836200e3f9650677caabff15"}], "stats": {"total": 108, "additions": 108, "deletions": 0}, "files": [{"sha": "e13423d1ef4e352a2e8df07b7555d4706859d07e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3eaa60442ff2727dab5f81465771461f91de8e8b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3eaa60442ff2727dab5f81465771461f91de8e8b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3eaa60442ff2727dab5f81465771461f91de8e8b", "patch": "@@ -1,3 +1,8 @@\n+2003-02-25  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>\n+\n+\tPR target/9732\n+\t* gcc.dg/20030225-1.c: New test.\n+\n 2003-02-24  Mark Mitchell  <mark@codesourcery.com>\n \n \t* README: Remove out-of-date information."}, {"sha": "7c30898b4ea0f9c27ac712c9c753485ea59ffcda", "filename": "gcc/testsuite/gcc.dg/20030225-1.c", "status": "added", "additions": 103, "deletions": 0, "changes": 103, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3eaa60442ff2727dab5f81465771461f91de8e8b/gcc%2Ftestsuite%2Fgcc.dg%2F20030225-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3eaa60442ff2727dab5f81465771461f91de8e8b/gcc%2Ftestsuite%2Fgcc.dg%2F20030225-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20030225-1.c?ref=3eaa60442ff2727dab5f81465771461f91de8e8b", "patch": "@@ -0,0 +1,103 @@\n+/* PR target/9732\n+   This testcase segfaulted on PPC because PIC_OFFSET_TABLE_REGNUM was no\n+   fixed register.\n+   Distilled from the xvid sources by Guillaume Morin <guillaume@morinfr.org>\n+   and Benjamin Herrenschmidt <benh@kernel.crashing.org>.  */\n+/* { dg-do run } */\n+/* { dg-options \"-O2 -fPIC\" } */\n+/* { dg-warning \"not supported\" \"PIC unsupported\" { target cris-*-elf* mmix-*-* } 0 } */\n+\n+\n+extern void exit (int);\n+\n+#define W1 2841\t\t\t\t\t/* 2048*sqrt(2)*cos(1*pi/16) */\n+#define W2 2676\t\t\t\t\t/* 2048*sqrt(2)*cos(2*pi/16) */\n+#define W3 2408\t\t\t\t\t/* 2048*sqrt(2)*cos(3*pi/16) */\n+#define W5 1609\t\t\t\t\t/* 2048*sqrt(2)*cos(5*pi/16) */\n+#define W6 1108\t\t\t\t\t/* 2048*sqrt(2)*cos(6*pi/16) */\n+#define W7 565\t\t\t\t\t/* 2048*sqrt(2)*cos(7*pi/16) */\n+\n+\n+/* private data */\n+static short iclip[1024];\t\t/* clipping table */\n+static short *iclp;\n+\n+void\n+idct_int32(short *const block)\n+{\n+  static short *blk;\n+  static long i;\n+  static long X0, X1, X2, X3, X4, X5, X6, X7, X8;\n+\n+  for (i = 0; i < 8; i++)\t\t/* idct columns */\n+    {\n+      blk = block + i;\n+      /* shortcut  */\n+      if (! ((X1 = (blk[8 * 4] << 8)) | (X2 = blk[8 * 6])\n+\t     | (X3 = blk[8 * 2]) | (X4 = blk[8 * 1]) | (X5 = blk[8 * 7])\n+\t     | (X6 = blk[8 * 5]) | (X7 = blk[8 * 3])))\n+\t{\n+\t  blk[8 * 0] = blk[8 * 1] = blk[8 * 2] = \n+\t    blk[8 * 3] = blk[8 * 4] =\n+\t    blk[8 * 5] = blk[8 * 6] = blk[8 * 7] =\n+\t    iclp[(blk[8 * 0] + 32) >> 6];\n+\t  continue;\n+\t}\n+      X0 = (blk[8 * 0] << 8) + 8192;\n+\n+      /* first stage  */\n+      X8 = W7 * (X4 + X5) + 4;\n+      X4 = (X8 + (W1 - W7) * X4) >> 3;\n+      X5 = (X8 - (W1 + W7) * X5) >> 3;\n+      X8 = W3 * (X6 + X7) + 4;\n+      X6 = (X8 - (W3 - W5) * X6) >> 3;\n+      X7 = (X8 - (W3 + W5) * X7) >> 3;\n+\n+      /* second stage  */\n+      X8 = X0 + X1;\n+      X0 -= X1;\n+      X1 = W6 * (X3 + X2) + 4;\n+      X2 = (X1 - (W2 + W6) * X2) >> 3;\n+      X3 = (X1 + (W2 - W6) * X3) >> 3;\n+      X1 = X4 + X6;\n+      X4 -= X6;\n+      X6 = X5 + X7;\n+      X5 -= X7;\n+\n+      /* third stage  */\n+      X7 = X8 + X3;\n+      X8 -= X3;\n+      X3 = X0 + X2;\n+      X0 -= X2;\n+      X2 = (181 * (X4 + X5) + 128) >> 8;\n+      X4 = (181 * (X4 - X5) + 128) >> 8;\n+\n+      /* fourth stage  */\n+      blk[8 * 0] = iclp[(X7 + X1) >> 14];\n+      blk[8 * 1] = iclp[(X3 + X2) >> 14];\n+      blk[8 * 2] = iclp[(X0 + X4) >> 14];\n+      blk[8 * 3] = iclp[(X8 + X6) >> 14];\n+      blk[8 * 4] = iclp[(X8 - X6) >> 14];\n+      blk[8 * 5] = iclp[(X0 - X4) >> 14];\n+      blk[8 * 6] = iclp[(X3 - X2) >> 14];\n+      blk[8 * 7] = iclp[(X7 - X1) >> 14];\n+    }\n+}\t\t\t\t\t\t\t\t/* end function idct_int32(block) */\n+\n+\n+int main(void) {\n+  int i;\n+  unsigned short tab[64];\n+\n+  for (i = 0 ; i < 64 ; ++i) \n+    {  \n+      tab[i] = (1+(int) (65535)*8000/(2147483647+1.0));\n+    }\n+  \n+  iclp = iclip + 512;\n+  for (i = -512; i < 512; i++)\n+    iclp[i] = (i < -256) ? -256 : ((i > 255) ? 255 : i);\n+\n+  idct_int32((short *) tab);\n+  exit (0);\n+}"}]}