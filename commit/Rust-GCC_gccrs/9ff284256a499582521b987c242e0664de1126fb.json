{"sha": "9ff284256a499582521b987c242e0664de1126fb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWZmMjg0MjU2YTQ5OTU4MjUyMWI5ODdjMjQyZTA2NjRkZTExMjZmYg==", "commit": {"author": {"name": "Thomas Fitzsimmons", "email": "fitzsim@redhat.com", "date": "2005-09-08T21:26:25Z"}, "committer": {"name": "Thomas Fitzsimmons", "email": "fitzsim@gcc.gnu.org", "date": "2005-09-08T21:26:25Z"}, "message": "re PR libgcj/23761 (java.library.path doesn't affect module loading path)\n\n2005-09-08  Thomas Fitzsimmons  <fitzsim@redhat.com>\n\n\tPR libgcj/23761\n\t* include/java-props.h (_Jv_Module_Load_Path): Declare variable.\n\t* java/lang/natRuntime.cc (init): Call lt_dlsetsearchpath after\n\tlt_dlinit.\n\t* gnu/classpath/natSystemProperties.cc (_Jv_Module_Load_Path):\n\tDefine variable.\n\t(_Jv_SetDLLSearchPath): Do not call lt_dlsetsearchpath.  Set\n\t_Jv_Module_Load_Path.\n\nFrom-SVN: r104044", "tree": {"sha": "23efeaa3b51fe2f4b34adcdfb70e455d8e516974", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/23efeaa3b51fe2f4b34adcdfb70e455d8e516974"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ff284256a499582521b987c242e0664de1126fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ff284256a499582521b987c242e0664de1126fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ff284256a499582521b987c242e0664de1126fb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ff284256a499582521b987c242e0664de1126fb/comments", "author": null, "committer": null, "parents": [{"sha": "e014df900da32a8b5f828ea42ffbeb91f0564682", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e014df900da32a8b5f828ea42ffbeb91f0564682", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e014df900da32a8b5f828ea42ffbeb91f0564682"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "832028e6119453f52963d6acf6327335b29c4615", "filename": "libjava/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ff284256a499582521b987c242e0664de1126fb/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ff284256a499582521b987c242e0664de1126fb/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=9ff284256a499582521b987c242e0664de1126fb", "patch": "@@ -1,3 +1,14 @@\n+2005-09-08  Thomas Fitzsimmons  <fitzsim@redhat.com>\n+\n+\tPR libgcj/23761\n+\t* include/java-props.h (_Jv_Module_Load_Path): Declare variable.\n+\t* java/lang/natRuntime.cc (init): Call lt_dlsetsearchpath after\n+\tlt_dlinit.\n+\t* gnu/classpath/natSystemProperties.cc (_Jv_Module_Load_Path):\n+\tDefine variable.\n+\t(_Jv_SetDLLSearchPath): Do not call lt_dlsetsearchpath.  Set\n+\t_Jv_Module_Load_Path.\n+\n 2005-09-06  Tom Tromey  <tromey@redhat.com>\n \n \tPR libgcj/23739:"}, {"sha": "7e00595c6d7199d237626febff1190e50caba4b1", "filename": "libjava/gnu/classpath/natSystemProperties.cc", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ff284256a499582521b987c242e0664de1126fb/libjava%2Fgnu%2Fclasspath%2FnatSystemProperties.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ff284256a499582521b987c242e0664de1126fb/libjava%2Fgnu%2Fclasspath%2FnatSystemProperties.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fclasspath%2FnatSystemProperties.cc?ref=9ff284256a499582521b987c242e0664de1126fb", "patch": "@@ -38,13 +38,15 @@ details.  */\n #include <java/lang/String.h>\n #include <jni.h>\n \n+char *_Jv_Module_Load_Path = NULL;\n+\n #ifdef USE_LTDL\n #include <ltdl.h>\n \n void\n _Jv_SetDLLSearchPath (const char *path)\n {\n-  lt_dlsetsearchpath (path);\n+  _Jv_Module_Load_Path = strdup (path);\n }\n \n #else"}, {"sha": "f552e1b54f435a43d748ad05e97add51bc97288c", "filename": "libjava/include/java-props.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ff284256a499582521b987c242e0664de1126fb/libjava%2Finclude%2Fjava-props.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ff284256a499582521b987c242e0664de1126fb/libjava%2Finclude%2Fjava-props.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fjava-props.h?ref=9ff284256a499582521b987c242e0664de1126fb", "patch": "@@ -26,5 +26,8 @@ extern int _Jv_Properties_Count;\n // Properties taken from the user's environment.\n extern property_pair *_Jv_Environment_Properties;\n \n+// Module load path.\n+extern char *_Jv_Module_Load_Path;\n+\n #endif\n "}, {"sha": "300dc573247accb2131f6cf32dc116fef9ef76a7", "filename": "libjava/java/lang/natRuntime.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ff284256a499582521b987c242e0664de1126fb/libjava%2Fjava%2Flang%2FnatRuntime.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ff284256a499582521b987c242e0664de1126fb/libjava%2Fjava%2Flang%2FnatRuntime.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatRuntime.cc?ref=9ff284256a499582521b987c242e0664de1126fb", "patch": "@@ -242,6 +242,8 @@ java::lang::Runtime::init (void)\n {\n #ifdef USE_LTDL\n   lt_dlinit ();\n+  // Set module load path.\n+  lt_dlsetsearchpath (_Jv_Module_Load_Path);\n   // Make sure self is opened.\n   lt_dlopen (NULL);\n #endif"}]}