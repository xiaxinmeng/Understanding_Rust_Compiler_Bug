{"sha": "2041a23a2ed58c7115bc8a942ee40efda0b72324", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjA0MWEyM2EyZWQ1OGM3MTE1YmM4YTk0MmVlNDBlZmRhMGI3MjMyNA==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2017-11-12T16:07:30Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2017-11-12T16:07:30Z"}, "message": "[riscv] Wrap ASM_OUTPUT_LABELREF in do {} while (0)\n\n2017-11-12  Tom de Vries  <tom@codesourcery.com>\n\n\t* config/riscv/riscv.h (ASM_OUTPUT_LABELREF): Wrap in do {} while (0).\n\nFrom-SVN: r254666", "tree": {"sha": "fcf4b7c09ffcb1d1963f2aab8e9cf726c9b1f8e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fcf4b7c09ffcb1d1963f2aab8e9cf726c9b1f8e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2041a23a2ed58c7115bc8a942ee40efda0b72324", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2041a23a2ed58c7115bc8a942ee40efda0b72324", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2041a23a2ed58c7115bc8a942ee40efda0b72324", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2041a23a2ed58c7115bc8a942ee40efda0b72324/comments", "author": null, "committer": null, "parents": [{"sha": "180b5580343dca1d8c70b060aaf3206f533e03d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/180b5580343dca1d8c70b060aaf3206f533e03d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/180b5580343dca1d8c70b060aaf3206f533e03d8"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "d888379966d5d39a923a37b71526b843e1cc304e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2041a23a2ed58c7115bc8a942ee40efda0b72324/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2041a23a2ed58c7115bc8a942ee40efda0b72324/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2041a23a2ed58c7115bc8a942ee40efda0b72324", "patch": "@@ -1,3 +1,7 @@\n+2017-11-12  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* config/riscv/riscv.h (ASM_OUTPUT_LABELREF): Wrap in do {} while (0).\n+\n 2017-11-12  Tom de Vries  <tom@codesourcery.com>\n \n \t* config/elfos.h (ASM_OUTPUT_ASCII): Remove semicolon after macro body."}, {"sha": "fe09e84e8953d24ba4d34217041cd798a0aa3057", "filename": "gcc/config/riscv/riscv.h", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2041a23a2ed58c7115bc8a942ee40efda0b72324/gcc%2Fconfig%2Friscv%2Friscv.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2041a23a2ed58c7115bc8a942ee40efda0b72324/gcc%2Fconfig%2Friscv%2Friscv.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Friscv.h?ref=2041a23a2ed58c7115bc8a942ee40efda0b72324", "patch": "@@ -585,12 +585,15 @@ typedef struct {\n /* This handles the magic '..CURRENT_FUNCTION' symbol, which means\n    'the start of the function that this code is output in'.  */\n \n-#define ASM_OUTPUT_LABELREF(FILE,NAME)  \\\n-  if (strcmp (NAME, \"..CURRENT_FUNCTION\") == 0)\t\t\t\t\\\n-    asm_fprintf ((FILE), \"%U%s\",\t\t\t\t\t\\\n-\t\t XSTR (XEXP (DECL_RTL (current_function_decl), 0), 0));\t\\\n-  else\t\t\t\t\t\t\t\t\t\\\n-    asm_fprintf ((FILE), \"%U%s\", (NAME))\n+#define ASM_OUTPUT_LABELREF(FILE,NAME)\t\t\t\t\t\\\n+  do {\t\t\t\t\t\t\t\t\t\\\n+    if (strcmp (NAME, \"..CURRENT_FUNCTION\") == 0)\t\t\t\\\n+      asm_fprintf ((FILE), \"%U%s\",\t\t\t\t\t\\\n+\t\t   XSTR (XEXP (DECL_RTL (current_function_decl),\t\\\n+\t\t\t       0), 0));\t\t\t\t\t\\\n+    else\t\t\t\t\t\t\t\t\\\n+      asm_fprintf ((FILE), \"%U%s\", (NAME));\t\t\t\t\\\n+  } while (0)\n \n #define JUMP_TABLES_IN_TEXT_SECTION 0\n #define CASE_VECTOR_MODE SImode"}]}