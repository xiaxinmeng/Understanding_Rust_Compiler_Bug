{"sha": "04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDRmNzdkMGYzYjE5NGFkYTRlODlhM2JmOGRmM2I1NWJmMzcwZmJmYQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2006-05-08T21:42:17Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2006-05-08T21:42:17Z"}, "message": "re PR middle-end/25962 (Pointer (null) check after the use in cgraph.c)\n\n\n\tPR middle-end/25962\n\t* cgraphunit.c (decide_is_function_needed): When not optimizing even\n\tunused static functions are needed.\n\n\t* gcc.dg/pr25962.c: New.\n\nFrom-SVN: r113633", "tree": {"sha": "20192039e8e9228577157ac0f0ac0de5b704563c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/20192039e8e9228577157ac0f0ac0de5b704563c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa/comments", "author": null, "committer": null, "parents": [{"sha": "857e57535196dbb690cf80afadbfda9756417a4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/857e57535196dbb690cf80afadbfda9756417a4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/857e57535196dbb690cf80afadbfda9756417a4b"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "e685cdb37529b63502f0b7d5e4c8756bb7afa124", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa", "patch": "@@ -1,3 +1,9 @@\n+2006-05-08  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/25962\n+\t* cgraphunit.c (decide_is_function_needed): When not optimizing even\n+\tunused static functions are needed.\n+\n 2006-05-08  Roger Sayle  <roger@eyesopen.com>\n \n \tPR target/27158"}, {"sha": "351f5f0caedc10898cc69acd24df122c29bc9145", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa", "patch": "@@ -216,8 +216,12 @@ decide_is_function_needed (struct cgraph_node *node, tree decl)\n     return true;\n \n   /* Externally visible functions must be output.  The exception is\n-     COMDAT functions that must be output only when they are needed.  */\n-  if ((TREE_PUBLIC (decl) && !flag_whole_program)\n+     COMDAT functions that must be output only when they are needed. \n+\n+     When not optimizing, also output the static functions. (see\n+     PR25962)\n+     */\n+  if (((TREE_PUBLIC (decl) || !optimize) && !flag_whole_program)\n       && !DECL_COMDAT (decl) && !DECL_EXTERNAL (decl))\n     return true;\n "}, {"sha": "bd2076bb0edbc9ebcdfd7aad418e2ab87ec47927", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa", "patch": "@@ -1,3 +1,8 @@\n+2006-05-08  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/25962\n+\t* gcc.dg/pr25962.c: New.\n+\n 2006-05-08  Roger Sayle  <roger@eyesopen.com>\n \n \tPR target/27158"}, {"sha": "20ac00e0ed6ae2d5c985bc1b38b22e069dfc6e84", "filename": "gcc/testsuite/gcc.dg/pr25962.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa/gcc%2Ftestsuite%2Fgcc.dg%2Fpr25962.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa/gcc%2Ftestsuite%2Fgcc.dg%2Fpr25962.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr25962.c?ref=04f77d0f3b194ada4e89a3bf8df3b55bf370fbfa", "patch": "@@ -0,0 +1,6 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O0\" } */\n+/* { dg-final { scan-assembler \"debug_hook\" } } */\n+static int debug_hook()\n+{\n+}"}]}