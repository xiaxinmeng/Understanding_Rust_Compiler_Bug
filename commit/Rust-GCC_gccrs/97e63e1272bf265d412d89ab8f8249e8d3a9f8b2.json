{"sha": "97e63e1272bf265d412d89ab8f8249e8d3a9f8b2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTdlNjNlMTI3MmJmMjY1ZDQxMmQ4OWFiOGY4MjQ5ZThkM2E5ZjhiMg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2017-09-13T18:18:48Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2017-09-13T18:18:48Z"}, "message": "re PR c++/61362 (g++ (Ubuntu 4.8.2-19ubuntu1) 4.8.2 does not compile lambda with template)\n\n2017-09-13  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/61362\n\t* g++.dg/cpp0x/lambda/lambda-ice19.C: New.\n\t* g++.dg/cpp0x/lambda/lambda-ice20.C: Likewise.\n\nFrom-SVN: r252724", "tree": {"sha": "8ba1c127cb4b36dcd7db937ea3865f289165de32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8ba1c127cb4b36dcd7db937ea3865f289165de32"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/97e63e1272bf265d412d89ab8f8249e8d3a9f8b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97e63e1272bf265d412d89ab8f8249e8d3a9f8b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97e63e1272bf265d412d89ab8f8249e8d3a9f8b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97e63e1272bf265d412d89ab8f8249e8d3a9f8b2/comments", "author": null, "committer": null, "parents": [{"sha": "bce5091aa995e9faea7c6eb5b11b288bd66bcd98", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bce5091aa995e9faea7c6eb5b11b288bd66bcd98", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bce5091aa995e9faea7c6eb5b11b288bd66bcd98"}], "stats": {"total": 46, "additions": 46, "deletions": 0}, "files": [{"sha": "71e2b36360453e6ed9746617085509e62f3b7bc6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97e63e1272bf265d412d89ab8f8249e8d3a9f8b2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97e63e1272bf265d412d89ab8f8249e8d3a9f8b2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=97e63e1272bf265d412d89ab8f8249e8d3a9f8b2", "patch": "@@ -1,3 +1,9 @@\n+2017-09-13  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/61362\n+\t* g++.dg/cpp0x/lambda/lambda-ice19.C: New.\n+\t* g++.dg/cpp0x/lambda/lambda-ice20.C: Likewise.\n+\n 2017-09-13  Steve Ellcey  <sellcey@cavium.com>\n \n \tPR tree-optimization/80925"}, {"sha": "9fb43cdb8b6873024675e9659489498b01c8ca15", "filename": "gcc/testsuite/g++.dg/cpp0x/lambda/lambda-ice19.C", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97e63e1272bf265d412d89ab8f8249e8d3a9f8b2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice19.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97e63e1272bf265d412d89ab8f8249e8d3a9f8b2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice19.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice19.C?ref=97e63e1272bf265d412d89ab8f8249e8d3a9f8b2", "patch": "@@ -0,0 +1,29 @@\n+// PR c++/61362\n+// { dg-do compile { target c++11 } }\n+\n+struct function {\n+  template<class F>\n+  function(F){}\n+\n+  void operator()(...) {}\n+};\n+\n+struct Node {\n+  unsigned length;\n+};\n+\n+template<typename N>\n+class C {\n+public:\n+  unsigned longest = 0;\n+  function f = [this](N node) {\n+    if(node->length > this->longest) this->longest = node->length;\n+  };\n+};\n+\n+int main() {\n+  Node n;\n+  n.length = 5;\n+  C<Node*> c;\n+  c.f(&n);\n+}"}, {"sha": "ae1b61b1d2ced88b6f207f187f39e54bc6658d18", "filename": "gcc/testsuite/g++.dg/cpp0x/lambda/lambda-ice20.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97e63e1272bf265d412d89ab8f8249e8d3a9f8b2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice20.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97e63e1272bf265d412d89ab8f8249e8d3a9f8b2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice20.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice20.C?ref=97e63e1272bf265d412d89ab8f8249e8d3a9f8b2", "patch": "@@ -0,0 +1,11 @@\n+// PR c++/61362\n+// { dg-do compile { target c++11 } }\n+\n+template <typename>\n+struct S {\n+  int f{[this](){return 42;}()};\n+};\n+\n+int main(){\n+  return S<int>{}.f; // should be 42\n+}"}]}