{"sha": "de001ec7773be17f0fc44e3d7a6e64b8fee40581", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGUwMDFlYzc3NzNiZTE3ZjBmYzQ0ZTNkN2E2ZTY0YjhmZWU0MDU4MQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-06-13T17:24:45Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-06-13T17:24:45Z"}, "message": "compiler: include global variable preinit blocks in ast dumps\n    \n    Dump out the blocks corresponding to variable pre-inits when\n    -fgo-dump-ast is in effect. Each preinit block is prefixed with a\n    comment indicating the variable it is initializing.\n    \n    Reviewed-on: https://go-review.googlesource.com/118636\n\nFrom-SVN: r261555", "tree": {"sha": "d34012e01ff8cb2aa66f6d24404f42d5f4e4c6c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d34012e01ff8cb2aa66f6d24404f42d5f4e4c6c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/de001ec7773be17f0fc44e3d7a6e64b8fee40581", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de001ec7773be17f0fc44e3d7a6e64b8fee40581", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de001ec7773be17f0fc44e3d7a6e64b8fee40581", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de001ec7773be17f0fc44e3d7a6e64b8fee40581/comments", "author": null, "committer": null, "parents": [{"sha": "1cc56f079e60fc60df904e443784ad6e7081300c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cc56f079e60fc60df904e443784ad6e7081300c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1cc56f079e60fc60df904e443784ad6e7081300c"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "f656fa3130ec3d792b4fce5a78c66ba1914918d8", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de001ec7773be17f0fc44e3d7a6e64b8fee40581/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de001ec7773be17f0fc44e3d7a6e64b8fee40581/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=de001ec7773be17f0fc44e3d7a6e64b8fee40581", "patch": "@@ -1,4 +1,4 @@\n-6743db0ed81e313acf66c00a4ed0e2dcaaca2c9f\n+1f07926263b6d14edb6abd6a00e6385190d30d0e\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "1fbc890f53ee8f0fdbfc52c165a040772a557682", "filename": "gcc/go/gofrontend/ast-dump.cc", "status": "modified", "additions": 25, "deletions": 1, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de001ec7773be17f0fc44e3d7a6e64b8fee40581/gcc%2Fgo%2Fgofrontend%2Fast-dump.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de001ec7773be17f0fc44e3d7a6e64b8fee40581/gcc%2Fgo%2Fgofrontend%2Fast-dump.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fast-dump.cc?ref=de001ec7773be17f0fc44e3d7a6e64b8fee40581", "patch": "@@ -29,7 +29,7 @@ class Ast_dump_traverse_blocks_and_functions : public Traverse\n {\n  public:\n   Ast_dump_traverse_blocks_and_functions(Ast_dump_context* ast_dump_context)\n-      : Traverse(traverse_blocks | traverse_functions),\n+      : Traverse(traverse_blocks | traverse_functions | traverse_variables),\n       ast_dump_context_(ast_dump_context)\n   { }\n \n@@ -40,6 +40,9 @@ class Ast_dump_traverse_blocks_and_functions : public Traverse\n   int\n   function(Named_object*);\n \n+  int\n+  variable(Named_object*);\n+\n  private:\n   Ast_dump_context* ast_dump_context_;\n };\n@@ -150,6 +153,27 @@ Ast_dump_traverse_blocks_and_functions::function(Named_object* no)\n   return TRAVERSE_CONTINUE;\n }\n \n+// Dump variable preinits\n+\n+int\n+Ast_dump_traverse_blocks_and_functions::variable(Named_object* no)\n+{\n+  if (!no->is_variable())\n+    return TRAVERSE_CONTINUE;\n+\n+  Variable* var = no->var_value();\n+  if (var->has_pre_init())\n+    {\n+      this->ast_dump_context_->ostream() << \"// preinit block for var \"\n+                                         << no->message_name() << \"\\n\";\n+      var->preinit()->traverse(this);\n+    }\n+\n+  return TRAVERSE_CONTINUE;\n+}\n+\n+\n+\n // Class Ast_dump_context.\n \n Ast_dump_context::Ast_dump_context(std::ostream* out /* = NULL */,"}]}