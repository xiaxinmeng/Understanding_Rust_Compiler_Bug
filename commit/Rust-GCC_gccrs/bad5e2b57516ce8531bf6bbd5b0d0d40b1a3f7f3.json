{"sha": "bad5e2b57516ce8531bf6bbd5b0d0d40b1a3f7f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmFkNWUyYjU3NTE2Y2U4NTMxYmY2YmJkNWIwZDBkNDBiMWEzZjdmMw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2008-06-19T17:48:14Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2008-06-19T17:48:14Z"}, "message": "tree-optimize.c (execute_early_local_optimizations): Set cgraph_state only at first invocation.\n\n\n\t* tree-optimize.c (execute_early_local_optimizations): Set\n\tcgraph_state only at first invocation.\n\nFrom-SVN: r136958", "tree": {"sha": "fd4ad357e824025e7c4b4e847e0e68e03bbfd48b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fd4ad357e824025e7c4b4e847e0e68e03bbfd48b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bad5e2b57516ce8531bf6bbd5b0d0d40b1a3f7f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bad5e2b57516ce8531bf6bbd5b0d0d40b1a3f7f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bad5e2b57516ce8531bf6bbd5b0d0d40b1a3f7f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bad5e2b57516ce8531bf6bbd5b0d0d40b1a3f7f3/comments", "author": null, "committer": null, "parents": [{"sha": "f1469150c623fec479a4cc9849afa4650df7ffcd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1469150c623fec479a4cc9849afa4650df7ffcd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1469150c623fec479a4cc9849afa4650df7ffcd"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "d5c60c03cf5306dffe15224c689b914300ffebd4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bad5e2b57516ce8531bf6bbd5b0d0d40b1a3f7f3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bad5e2b57516ce8531bf6bbd5b0d0d40b1a3f7f3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bad5e2b57516ce8531bf6bbd5b0d0d40b1a3f7f3", "patch": "@@ -1,3 +1,8 @@\n+2008-06-19  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree-optimize.c (execute_early_local_optimizations): Set\n+\tcgraph_state only at first invocation.\n+\n 2008-06-19  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* system.h (-Wc++-compat): Activate as a warning, no an error."}, {"sha": "35feaa1be5ba6b37d94927c5271d738d725ff6d3", "filename": "gcc/tree-optimize.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bad5e2b57516ce8531bf6bbd5b0d0d40b1a3f7f3/gcc%2Ftree-optimize.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bad5e2b57516ce8531bf6bbd5b0d0d40b1a3f7f3/gcc%2Ftree-optimize.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-optimize.c?ref=bad5e2b57516ce8531bf6bbd5b0d0d40b1a3f7f3", "patch": "@@ -111,7 +111,11 @@ struct simple_ipa_opt_pass pass_early_local_passes =\n static unsigned int\n execute_early_local_optimizations (void)\n {\n-  if (flag_unit_at_a_time)\n+  /* First time we start with early optimization we need to advance\n+     cgraph state so newly inserted functions are also early optimized.\n+     However we execute early local optimizations for lately inserted\n+     functions, in that case don't reset cgraph state back to IPA_SSA.  */\n+  if (flag_unit_at_a_time && cgraph_state < CGRAPH_STATE_IPA_SSA)\n     cgraph_state = CGRAPH_STATE_IPA_SSA;\n   return 0;\n }"}]}