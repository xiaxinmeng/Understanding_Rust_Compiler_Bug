{"sha": "823f0809e616d4de3347dce1dec5f5a897f841ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODIzZjA4MDllNjE2ZDRkZTMzNDdkY2UxZGVjNWY1YTg5N2Y4NDFhZA==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@redhat.com", "date": "2004-09-17T21:30:23Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2004-09-17T21:30:23Z"}, "message": "re PR tree-optimization/17319 (-fno-tree-dce cause ICE)\n\n\n\tPR tree-optimization/17319\n\t* tree-ssa-alias.c (compute_points_to_and_addr_escape): Also\n\texamine pointers on the LHS of an assignment.\n\t(collect_points_to_info_r): Handle RETURN_EXPR.\n\ntestsuite/ChangeLog\n\n\tPR tree-optimization/17319\n\t* gcc.dg/pr17319.c: New test.\n\nFrom-SVN: r87673", "tree": {"sha": "6785cb84202c00e716d03fe97bfca3a1951193dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6785cb84202c00e716d03fe97bfca3a1951193dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/823f0809e616d4de3347dce1dec5f5a897f841ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/823f0809e616d4de3347dce1dec5f5a897f841ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/823f0809e616d4de3347dce1dec5f5a897f841ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/823f0809e616d4de3347dce1dec5f5a897f841ad/comments", "author": null, "committer": null, "parents": [{"sha": "b5fefcf63de2696b73921ba0aeb12c46b085e34b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5fefcf63de2696b73921ba0aeb12c46b085e34b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5fefcf63de2696b73921ba0aeb12c46b085e34b"}], "stats": {"total": 33, "additions": 33, "deletions": 0}, "files": [{"sha": "ad206dea5da1d298e04ce1666d6da87ac20677e6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/823f0809e616d4de3347dce1dec5f5a897f841ad/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/823f0809e616d4de3347dce1dec5f5a897f841ad/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=823f0809e616d4de3347dce1dec5f5a897f841ad", "patch": "@@ -1,3 +1,10 @@\n+2004-09-17  Diego Novillo  <dnovillo@redhat.com>\n+\n+\tPR tree-optimization/17319\n+\t* tree-ssa-alias.c (compute_points_to_and_addr_escape): Also\n+\texamine pointers on the LHS of an assignment.\n+\t(collect_points_to_info_r): Handle RETURN_EXPR.\n+\n 2004-09-17 Jeff Law  <law@redhat.com>\n \n \t* tree-ssa-dom.c (const_and_copies_stack): New."}, {"sha": "815bbbf7995266d2e07a91cc6a631105fad07ea3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/823f0809e616d4de3347dce1dec5f5a897f841ad/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/823f0809e616d4de3347dce1dec5f5a897f841ad/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=823f0809e616d4de3347dce1dec5f5a897f841ad", "patch": "@@ -1,3 +1,8 @@\n+2004-09-17  Diego Novillo  <dnovillo@redhat.com>\n+\n+\tPR tree-optimization/17319\n+\t* gcc.dg/pr17319.c: New test.\n+\n 2004-09-17  Devang Patel  <dpatel@apple.com>\n \n \t* gcc.dg/20040813-1.c: New test."}, {"sha": "5d39e4c5707addc2c8ce276fbe5067eeeb2efdd5", "filename": "gcc/testsuite/gcc.dg/pr17319.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/823f0809e616d4de3347dce1dec5f5a897f841ad/gcc%2Ftestsuite%2Fgcc.dg%2Fpr17319.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/823f0809e616d4de3347dce1dec5f5a897f841ad/gcc%2Ftestsuite%2Fgcc.dg%2Fpr17319.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr17319.c?ref=823f0809e616d4de3347dce1dec5f5a897f841ad", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fno-tree-dce\" } */\n+\n+typedef unsigned long long HARD_REG_ELT_TYPE;\n+typedef HARD_REG_ELT_TYPE HARD_REG_SET[2];\n+static HARD_REG_SET newpat_used_regs;\n+int try_combine (void)\n+{\n+ HARD_REG_ELT_TYPE *scan_tp_ = newpat_used_regs;\n+ scan_tp_[0] = 0;\n+ scan_tp_[1] = 0;\n+}"}, {"sha": "2fe4069c3c046796c9518d99cfd682d9cec2a926", "filename": "gcc/tree-ssa-alias.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/823f0809e616d4de3347dce1dec5f5a897f841ad/gcc%2Ftree-ssa-alias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/823f0809e616d4de3347dce1dec5f5a897f841ad/gcc%2Ftree-ssa-alias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-alias.c?ref=823f0809e616d4de3347dce1dec5f5a897f841ad", "patch": "@@ -694,6 +694,9 @@ compute_points_to_and_addr_escape (struct alias_info *ai)\n \t      bitmap_set_bit (ai->written_vars, ann->uid);\n \t      if (may_be_aliased (var))\n \t\t(VARRAY_UINT (ai->num_references, ann->uid))++;\n+\n+\t      if (POINTER_TYPE_P (TREE_TYPE (op)))\n+\t\tcollect_points_to_info_for (ai, op);\n \t    }\n \n \t  /* Mark variables in V_MAY_DEF operands as being written to.  */\n@@ -1831,6 +1834,12 @@ collect_points_to_info_r (tree var, tree stmt, void *data)\n \n   switch (TREE_CODE (stmt))\n     {\n+    case RETURN_EXPR:\n+      if (TREE_CODE (TREE_OPERAND (stmt, 0)) != MODIFY_EXPR)\n+\tabort ();\n+      stmt = TREE_OPERAND (stmt, 0);\n+      /* FALLTHRU  */\n+\n     case MODIFY_EXPR:\n       {\n \ttree rhs = TREE_OPERAND (stmt, 1);"}]}