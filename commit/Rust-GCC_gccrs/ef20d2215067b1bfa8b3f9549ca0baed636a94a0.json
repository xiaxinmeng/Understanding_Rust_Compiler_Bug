{"sha": "ef20d2215067b1bfa8b3f9549ca0baed636a94a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWYyMGQyMjE1MDY3YjFiZmE4YjNmOTU0OWNhMGJhZWQ2MzZhOTRhMA==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2019-09-18T09:43:10Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2019-09-18T09:43:10Z"}, "message": "Two more POLY_INT cases for dwarf2out.c\n\nloc_list_for_tree_1 and add_const_value_attribute currently ICE\non POLY_INTs.  loc_list_for_tree_1 can do something sensible but\nadd_const_value_attribute has to punt, since the constant there\nneeds to be a link-time rather than load-time or run-time constant.\n\nThis is tested by later SVE patches.\n\n2019-09-18  Richard Sandiford  <richard.sandiford@arm.com>\n\ngcc/\n\t* dwarf2out.c (loc_list_from_tree_1): Handle POLY_INT_CST.\n\t(add_const_value_attribute): Handle CONST_POLY_INT.\n\nFrom-SVN: r275868", "tree": {"sha": "ed65787f11e75aca1c753424fe2a530e0190385f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed65787f11e75aca1c753424fe2a530e0190385f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef20d2215067b1bfa8b3f9549ca0baed636a94a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef20d2215067b1bfa8b3f9549ca0baed636a94a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef20d2215067b1bfa8b3f9549ca0baed636a94a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef20d2215067b1bfa8b3f9549ca0baed636a94a0/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a95b474a088187218bd4e73c1c34566e3c3fc83d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a95b474a088187218bd4e73c1c34566e3c3fc83d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a95b474a088187218bd4e73c1c34566e3c3fc83d"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "7f8425ba0f90314ea995341ea848a6ff63d91605", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef20d2215067b1bfa8b3f9549ca0baed636a94a0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef20d2215067b1bfa8b3f9549ca0baed636a94a0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ef20d2215067b1bfa8b3f9549ca0baed636a94a0", "patch": "@@ -1,3 +1,8 @@\n+2019-09-18  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* dwarf2out.c (loc_list_from_tree_1): Handle POLY_INT_CST.\n+\t(add_const_value_attribute): Handle CONST_POLY_INT.\n+\n 2019-09-18  Martin Liska  <mliska@suse.cz>\n \n \t* dbgcnt.def (store_merging): New counter."}, {"sha": "cec25fa5fa2b80edfc4afa46afc2ed862a83a6da", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef20d2215067b1bfa8b3f9549ca0baed636a94a0/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef20d2215067b1bfa8b3f9549ca0baed636a94a0/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=ef20d2215067b1bfa8b3f9549ca0baed636a94a0", "patch": "@@ -18568,6 +18568,24 @@ loc_list_from_tree_1 (tree loc, int want_address,\n \t}\n       break;\n \n+    case POLY_INT_CST:\n+      {\n+\tif (want_address)\n+\t  {\n+\t    expansion_failed (loc, NULL_RTX,\n+\t\t\t      \"constant address with a runtime component\");\n+\t    return 0;\n+\t  }\n+\tpoly_int64 value;\n+\tif (!poly_int_tree_p (loc, &value))\n+\t  {\n+\t    expansion_failed (loc, NULL_RTX, \"constant too big\");\n+\t    return 0;\n+\t  }\n+\tret = int_loc_descriptor (value);\n+      }\n+      break;\n+\n     case CONSTRUCTOR:\n     case REAL_CST:\n     case STRING_CST:\n@@ -19684,6 +19702,7 @@ add_const_value_attribute (dw_die_ref die, rtx rtl)\n     case MINUS:\n     case SIGN_EXTEND:\n     case ZERO_EXTEND:\n+    case CONST_POLY_INT:\n       return false;\n \n     case MEM:"}]}