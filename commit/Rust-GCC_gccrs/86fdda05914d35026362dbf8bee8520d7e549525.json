{"sha": "86fdda05914d35026362dbf8bee8520d7e549525", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODZmZGRhMDU5MTRkMzUwMjYzNjJkYmY4YmVlODUyMGQ3ZTU0OTUyNQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2017-06-06T11:30:54Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2017-06-06T11:30:54Z"}, "message": "re PR bootstrap/80978 (LTO/PGO bootstrap broken by r248863)\n\n\n\tPR bootstrap/80978\n\t* tree-cfg.c (execute_fixup_cfg): Fix condition on when to rescale\n\tprofile.\n\nFrom-SVN: r248915", "tree": {"sha": "86f1d163af120b271b2aa90c1062335d826fa2f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/86f1d163af120b271b2aa90c1062335d826fa2f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/86fdda05914d35026362dbf8bee8520d7e549525", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86fdda05914d35026362dbf8bee8520d7e549525", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86fdda05914d35026362dbf8bee8520d7e549525", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86fdda05914d35026362dbf8bee8520d7e549525/comments", "author": null, "committer": null, "parents": [{"sha": "d2537732ca4c5545bac24d68df55dffc703bf4f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2537732ca4c5545bac24d68df55dffc703bf4f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2537732ca4c5545bac24d68df55dffc703bf4f6"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "1e0542e82231a65f59ac6ebe1f4db8688e03d897", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86fdda05914d35026362dbf8bee8520d7e549525/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86fdda05914d35026362dbf8bee8520d7e549525/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=86fdda05914d35026362dbf8bee8520d7e549525", "patch": "@@ -1,3 +1,9 @@\n+2017-06-06  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR bootstrap/80978\n+\t* tree-cfg.c (execute_fixup_cfg): Fix condition on when to rescale\n+\tprofile.\n+\n 2017-06-06  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* shrink-wrap.c (handle_simple_exit): Update profile."}, {"sha": "c84e99d09454a9a068e8ad40e14c684fe13f733e", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86fdda05914d35026362dbf8bee8520d7e549525/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86fdda05914d35026362dbf8bee8520d7e549525/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=86fdda05914d35026362dbf8bee8520d7e549525", "patch": "@@ -9077,7 +9077,9 @@ execute_fixup_cfg (void)\n   cgraph_node *node = cgraph_node::get (current_function_decl);\n   profile_count num = node->count;\n   profile_count den = ENTRY_BLOCK_PTR_FOR_FN (cfun)->count;\n-  bool scale = num.initialized_p () && den.initialized_p () && !(num == den);\n+  bool scale = num.initialized_p ()\n+\t       && (den > 0 || num == profile_count::zero ())\n+\t       && !(num == den);\n \n   if (scale)\n     {"}]}