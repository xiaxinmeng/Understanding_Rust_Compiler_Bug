{"sha": "67dc1785a5a3fd0a439df2b45db5b7f69b3a0ffb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjdkYzE3ODVhNWEzZmQwYTQzOWRmMmI0NWRiNWI3ZjY5YjNhMGZmYg==", "commit": {"author": {"name": "Ben Elliston", "email": "bje@au.ibm.com", "date": "2005-11-21T02:21:37Z"}, "committer": {"name": "Ben Elliston", "email": "bje@gcc.gnu.org", "date": "2005-11-21T02:21:37Z"}, "message": "Import from Autoconf sources:\n\n\t2005-09-06  Paul Eggert  <eggert@cs.ucla.edu>\n\t* config/move-if-change: Don't output \"$2 is unchanged\";\n\tsuggested by Ben Elliston.  Handle weird characters correctly.\n\nFrom-SVN: r107275", "tree": {"sha": "b5e844fc0b9032ce349931ca28826923d934aa62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5e844fc0b9032ce349931ca28826923d934aa62"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67dc1785a5a3fd0a439df2b45db5b7f69b3a0ffb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67dc1785a5a3fd0a439df2b45db5b7f69b3a0ffb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67dc1785a5a3fd0a439df2b45db5b7f69b3a0ffb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67dc1785a5a3fd0a439df2b45db5b7f69b3a0ffb/comments", "author": null, "committer": null, "parents": [{"sha": "7cf3d079762588156f447a45a888fdb544ade528", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cf3d079762588156f447a45a888fdb544ade528", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cf3d079762588156f447a45a888fdb544ade528"}], "stats": {"total": 52, "additions": 25, "deletions": 27}, "files": [{"sha": "4edfc1aa9683a121aee905ee378b25bf806602f8", "filename": "ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67dc1785a5a3fd0a439df2b45db5b7f69b3a0ffb/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67dc1785a5a3fd0a439df2b45db5b7f69b3a0ffb/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=67dc1785a5a3fd0a439df2b45db5b7f69b3a0ffb", "patch": "@@ -1,3 +1,11 @@\n+2005-11-21  Ben Elliston  <bje@au.ibm.com>\n+\n+\tImport from Autoconf sources:\n+\n+\t2005-09-06  Paul Eggert  <eggert@cs.ucla.edu>\n+\t* config/move-if-change: Don't output \"$2 is unchanged\";\n+\tsuggested by Ben Elliston.  Handle weird characters correctly.\n+\n 2005-11-18  Andreas Tobler  <a.tobler@schweiz.ch>\n \n \t* ltcf-c.sh (whole_archive_flag_spec): Remove '-all_load $convenience'"}, {"sha": "ff74a556d2d716f54d83511968988333bfc61f80", "filename": "move-if-change", "status": "modified", "additions": 17, "deletions": 27, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67dc1785a5a3fd0a439df2b45db5b7f69b3a0ffb/move-if-change", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67dc1785a5a3fd0a439df2b45db5b7f69b3a0ffb/move-if-change", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/move-if-change?ref=67dc1785a5a3fd0a439df2b45db5b7f69b3a0ffb", "patch": "@@ -1,32 +1,22 @@\n #!/bin/sh\n+# Like mv $1 $2, but if the files are the same, just delete $1.\n+# Status is zero if successful, nonzero otherwise.\n \n-# Copyright (C) 1996 Free Software Foundation, Inc.\n-#\n-# This program is free software; you can redistribute it and/or modify\n-# it under the terms of the GNU General Public License as published by\n-# the Free Software Foundation; either version 2 of the License, or\n-# (at your option) any later version.\n-#\n-# This program is distributed in the hope that it will be useful,\n-# but WITHOUT ANY WARRANTY; without even the implied warranty of\n-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-# GNU General Public License for more details.\n-#\n-# You should have received a copy of the GNU General Public License\n-# along with this program; if not, write to the Free Software\n-# Foundation, 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.\n+usage=\"$0: usage: $0 SOURCE DEST\"\n \n-if\n-test -r $2\n-then\n-if\n-cmp $1 $2 > /dev/null\n-then\n-echo $2 is unchanged\n-rm -f $1\n-else\n-mv -f $1 $2\n-fi\n+case $# in\n+2) ;;\n+*) echo \"$usage\" >&2; exit 1;;\n+esac\n+\n+for arg in \"$1\" \"$2\"; do\n+  case $arg in\n+   -*) echo \"$usage\" >&2; exit 1;;\n+  esac\n+done\n+\n+if test -r \"$2\" && cmp -s \"$1\" \"$2\"; then\n+  rm -f \"$1\"\n else\n-mv -f $1 $2\n+  mv -f \"$1\" \"$2\"\n fi"}]}