{"sha": "124906f908a85c2eded9af01cb3e8dbbc1e0f81a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTI0OTA2ZjkwOGE4NWMyZWRlZDlhZjAxY2IzZThkYmJjMWUwZjgxYQ==", "commit": {"author": {"name": "Alexandre Petit-Bianco", "email": "apbianco@cygnus.com", "date": "2000-03-22T22:48:04Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2000-03-22T22:48:04Z"}, "message": "jcf-write.c (generate_bytecode_insns): TRY_FINALLY_EXPR...\n\nMon Mar 20 08:58:51 2000  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n\n\t* jcf-write.c (generate_bytecode_insns): TRY_FINALLY_EXPR:\n\tproperly initialize `finished_label.' Don't emit gotos for empty\n\ttry statements.\n\n(Minor fix: http://gcc.gnu.org/ml/gcc-patches/2000-03/msg00762.html)\n\nFrom-SVN: r32690", "tree": {"sha": "7ff9d69ae677363a7ddaa8ec0ed1b04d4fdbdd72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7ff9d69ae677363a7ddaa8ec0ed1b04d4fdbdd72"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/124906f908a85c2eded9af01cb3e8dbbc1e0f81a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/124906f908a85c2eded9af01cb3e8dbbc1e0f81a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/124906f908a85c2eded9af01cb3e8dbbc1e0f81a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/124906f908a85c2eded9af01cb3e8dbbc1e0f81a/comments", "author": null, "committer": null, "parents": [{"sha": "3c9d63596fc5b0245704c8f66715c5d03dc4c91a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c9d63596fc5b0245704c8f66715c5d03dc4c91a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c9d63596fc5b0245704c8f66715c5d03dc4c91a"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "6a2a09b22c08a5072ee933ab51d74c75eaca21b6", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/124906f908a85c2eded9af01cb3e8dbbc1e0f81a/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/124906f908a85c2eded9af01cb3e8dbbc1e0f81a/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=124906f908a85c2eded9af01cb3e8dbbc1e0f81a", "patch": "@@ -1,3 +1,9 @@\n+Mon Mar 20 08:58:51 2000  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n+\n+\t* jcf-write.c (generate_bytecode_insns): TRY_FINALLY_EXPR:\n+\tproperly initialize `finished_label.' Don't emit gotos for empty\n+\ttry statements.\n+\n 2000-03-19  Martin v. L\ufffdwis  <loewis@informatik.hu-berlin.de>\n \n \t* except.c (emit_handlers): Clear catch_clauses_last."}, {"sha": "0b510a0aa23649189bdfd473400bf28d139a0176", "filename": "gcc/java/jcf-write.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/124906f908a85c2eded9af01cb3e8dbbc1e0f81a/gcc%2Fjava%2Fjcf-write.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/124906f908a85c2eded9af01cb3e8dbbc1e0f81a/gcc%2Fjava%2Fjcf-write.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-write.c?ref=124906f908a85c2eded9af01cb3e8dbbc1e0f81a", "patch": "@@ -2317,8 +2317,9 @@ generate_bytecode_insns (exp, target, state)\n \ttree finally = TREE_OPERAND (exp, 1);\n \ttree return_link, exception_decl;\n \n-\tfinished_label = finally_label = start_label = NULL;\n+\tfinally_label = start_label = NULL;\n \treturn_link = exception_decl = NULL_TREE;\n+\tfinished_label = gen_jcf_label (state);\n \n \t/* If the finally clause happens to be empty, set a flag so we\n            remember to just skip it. */\n@@ -2333,7 +2334,6 @@ generate_bytecode_insns (exp, target, state)\n \t    exception_type = build_pointer_type (throwable_type_node);\n \t    exception_decl = build_decl (VAR_DECL, NULL_TREE, exception_type);\n \n-\t    finished_label = gen_jcf_label (state);\n \t    finally_label = gen_jcf_label (state);\n \t    start_label = get_jcf_label_here (state);\n \t    finally_label->pc = PENDING_CLEANUP_PC;\n@@ -2352,7 +2352,8 @@ generate_bytecode_insns (exp, target, state)\n \t    emit_jsr (finally_label, state);\n \t  }\n \n-\tif (CAN_COMPLETE_NORMALLY (try_block))\n+\tif (CAN_COMPLETE_NORMALLY (try_block)\n+\t    && BLOCK_EXPR_BODY (try_block) != empty_stmt_node)\n \t  emit_goto (finished_label, state);\n \n \t/* Handle exceptions. */"}]}