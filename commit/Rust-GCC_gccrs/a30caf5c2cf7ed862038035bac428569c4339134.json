{"sha": "a30caf5c2cf7ed862038035bac428569c4339134", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTMwY2FmNWMyY2Y3ZWQ4NjIwMzgwMzViYWM0Mjg1NjljNDMzOTEzNA==", "commit": {"author": {"name": "Denis Chertykov", "email": "denisc@overta.ru", "date": "2000-01-05T07:01:00Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2000-01-05T07:01:00Z"}, "message": "final.c (shorten_branches): Correctly compute length of asms without operands.\n\n        * final.c (shorten_branches): Correctly compute length of\n        asms without operands.\n\nFrom-SVN: r31230", "tree": {"sha": "3808c07fac746d06695c717362ecbee1319dc5a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3808c07fac746d06695c717362ecbee1319dc5a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a30caf5c2cf7ed862038035bac428569c4339134", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a30caf5c2cf7ed862038035bac428569c4339134", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a30caf5c2cf7ed862038035bac428569c4339134", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a30caf5c2cf7ed862038035bac428569c4339134/comments", "author": null, "committer": null, "parents": [{"sha": "dd1bd863187095f63709320f6a30d97fe0ee40ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd1bd863187095f63709320f6a30d97fe0ee40ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd1bd863187095f63709320f6a30d97fe0ee40ab"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "7ab5d706ea079f0200809bf1c0b0adad3bfd8627", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a30caf5c2cf7ed862038035bac428569c4339134/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a30caf5c2cf7ed862038035bac428569c4339134/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a30caf5c2cf7ed862038035bac428569c4339134", "patch": "@@ -1,3 +1,8 @@\n+Tue Jan  4 23:59:26 2000  Denis Chertykov <denisc@overta.ru>\n+\n+\t* final.c (shorten_branches): Correctly compute length of\n+\tasms without operands.\n+ \n Tue Jan  4 22:55:41 2000  Steve Chamberlain <sac@pobox.com>\n \n \t* configure.in: Add pj target."}, {"sha": "1c648da34a47c199aba958c87aafb497eb5d24b6", "filename": "gcc/final.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a30caf5c2cf7ed862038035bac428569c4339134/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a30caf5c2cf7ed862038035bac428569c4339134/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=a30caf5c2cf7ed862038035bac428569c4339134", "patch": "@@ -1,5 +1,5 @@\n /* Convert RTL to assembler code and output it, for GNU compiler.\n-   Copyright (C) 1987, 88, 89, 92-98, 1999 Free Software Foundation, Inc.\n+   Copyright (C) 1987, 88, 89, 92-99, 2000 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -1282,7 +1282,7 @@ shorten_branches (first)\n \t\t\t\t * GET_MODE_SIZE (GET_MODE (body)));\n \t  /* Alignment is handled by ADDR_VEC_ALIGN.  */\n \t}\n-      else if (asm_noperands (body) >= 0)\n+      else if (GET_CODE (body) == ASM_INPUT || asm_noperands (body) >= 0)\n \tinsn_lengths[uid] = asm_insn_count (body) * insn_default_length (insn);\n       else if (GET_CODE (body) == SEQUENCE)\n \t{\n@@ -1302,7 +1302,8 @@ shorten_branches (first)\n \t      int inner_uid = INSN_UID (inner_insn);\n \t      int inner_length;\n \n-\t      if (asm_noperands (PATTERN (XVECEXP (body, 0, i))) >= 0)\n+\t      if (GET_CODE (body) == ASM_INPUT\n+\t\t  || asm_noperands (PATTERN (XVECEXP (body, 0, i))) >= 0)\n \t\tinner_length = (asm_insn_count (PATTERN (inner_insn))\n \t\t\t\t* insn_default_length (inner_insn));\n \t      else"}]}