{"sha": "50603eedf716e6c8be93ba1ae203a2607bd6d63b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTA2MDNlZWRmNzE2ZTZjOGJlOTNiYTFhZTIwM2EyNjA3YmQ2ZDYzYg==", "commit": {"author": {"name": "Paul Brook", "email": "paul@codesourcery.com", "date": "2006-11-02T20:18:42Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2006-11-02T20:18:42Z"}, "message": "arm.c (arm_elf_asm_constructor): Remove ATTRIBUTE_UNUSED from priority argument.\n\n2006-11-02  Paul Brook  <paul@codesourcery.com>\n\n\tgcc/\n\t* config/arm/arm.c (arm_elf_asm_constructor): Remove ATTRIBUTE_UNUSED\n\tfrom priority argument.  Use different section for non-default\n\tpriority.\n\t* config/arm/elf.h: Remove definition of SUPPORTS_INIT_PRIORITY.\n\nFrom-SVN: r118425", "tree": {"sha": "0d36cc25780d6f6657a271379c304a86136a93f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0d36cc25780d6f6657a271379c304a86136a93f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50603eedf716e6c8be93ba1ae203a2607bd6d63b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50603eedf716e6c8be93ba1ae203a2607bd6d63b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50603eedf716e6c8be93ba1ae203a2607bd6d63b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50603eedf716e6c8be93ba1ae203a2607bd6d63b/comments", "author": null, "committer": null, "parents": [{"sha": "88852cb5127cf6c6a4c165dfb2d935972d203b79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88852cb5127cf6c6a4c165dfb2d935972d203b79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88852cb5127cf6c6a4c165dfb2d935972d203b79"}], "stats": {"total": 25, "additions": 21, "deletions": 4}, "files": [{"sha": "a88142b2b5277ef0f1fba02db6f4e951312042b4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50603eedf716e6c8be93ba1ae203a2607bd6d63b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50603eedf716e6c8be93ba1ae203a2607bd6d63b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=50603eedf716e6c8be93ba1ae203a2607bd6d63b", "patch": "@@ -1,3 +1,11 @@\n+2006-11-02  Paul Brook  <paul@codesourcery.com>\n+\n+\tgcc/\n+\t* config/arm/arm.c (arm_elf_asm_constructor): Remove ATTRIBUTE_UNUSED\n+\tfrom priority argument.  Use different section for non-default\n+\tpriority.\n+\t* config/arm/elf.h: Remove definition of SUPPORTS_INIT_PRIORITY.\n+\n 2006-11-02  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR other/29639"}, {"sha": "7c82fcf403636986aae949df6134c1fd273b0d3e", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50603eedf716e6c8be93ba1ae203a2607bd6d63b/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50603eedf716e6c8be93ba1ae203a2607bd6d63b/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=50603eedf716e6c8be93ba1ae203a2607bd6d63b", "patch": "@@ -11349,16 +11349,27 @@ arm_assemble_integer (rtx x, unsigned int size, int aligned_p)\n /* Add a function to the list of static constructors.  */\n \n static void\n-arm_elf_asm_constructor (rtx symbol, int priority ATTRIBUTE_UNUSED)\n+arm_elf_asm_constructor (rtx symbol, int priority)\n {\n+  section *s;\n+\n   if (!TARGET_AAPCS_BASED)\n     {\n       default_named_section_asm_out_constructor (symbol, priority);\n       return;\n     }\n \n   /* Put these in the .init_array section, using a special relocation.  */\n-  switch_to_section (ctors_section);\n+  if (priority != DEFAULT_INIT_PRIORITY)\n+    {\n+      char buf[18];\n+      sprintf (buf, \".init_array.%.5u\", priority);\n+      s = get_section (buf, SECTION_WRITE, NULL_TREE);\n+    }\n+  else\n+    s = ctors_section;\n+\n+  switch_to_section (s);\n   assemble_align (POINTER_SIZE);\n   fputs (\"\\t.word\\t\", asm_out_file);\n   output_addr_const (asm_out_file, symbol);"}, {"sha": "03e57db8bf9117f70b6a45d77979ca754b534ce8", "filename": "gcc/config/arm/elf.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50603eedf716e6c8be93ba1ae203a2607bd6d63b/gcc%2Fconfig%2Farm%2Felf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50603eedf716e6c8be93ba1ae203a2607bd6d63b/gcc%2Fconfig%2Farm%2Felf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Felf.h?ref=50603eedf716e6c8be93ba1ae203a2607bd6d63b", "patch": "@@ -149,5 +149,3 @@\n     }\t\t\t\t\t\t\t\\\n   while (0)\n \n-/* The EABI doesn't provide a way of implementing init_priority.  */\n-#define SUPPORTS_INIT_PRIORITY (!TARGET_AAPCS_BASED)"}]}