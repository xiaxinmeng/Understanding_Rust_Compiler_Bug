{"sha": "3b6616ddc44fe5f8e10457a1bc830e01d38ca5d7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2I2NjE2ZGRjNDRmZTVmOGUxMDQ1N2ExYmM4MzBlMDFkMzhjYTVkNw==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb@suse.de", "date": "2005-02-10T22:57:30Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2005-02-10T22:57:30Z"}, "message": "re PR tree-optimization/17549 (10% increase in codesize with C code compared to GCC 3.3)\n\n\tPR tree-optimization/17549\n\t* tree-outof-ssa.c (find_replaceable_in_bb): Do not allow\n\tTER to replace a DEF with its expression if the DEF and the\n\trhs of the expression we replace into have the same root\n\tvariable.\n\nFrom-SVN: r94853", "tree": {"sha": "8a75234439f297ec9f0bab12690742aba6a15db7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a75234439f297ec9f0bab12690742aba6a15db7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b6616ddc44fe5f8e10457a1bc830e01d38ca5d7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b6616ddc44fe5f8e10457a1bc830e01d38ca5d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b6616ddc44fe5f8e10457a1bc830e01d38ca5d7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b6616ddc44fe5f8e10457a1bc830e01d38ca5d7/comments", "author": null, "committer": null, "parents": [{"sha": "a0c5992a2084f23d36187430a733673e2601705e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0c5992a2084f23d36187430a733673e2601705e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a0c5992a2084f23d36187430a733673e2601705e"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "d86daf413ab1d21b5c9324c9e5fb762d263d3446", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b6616ddc44fe5f8e10457a1bc830e01d38ca5d7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b6616ddc44fe5f8e10457a1bc830e01d38ca5d7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3b6616ddc44fe5f8e10457a1bc830e01d38ca5d7", "patch": "@@ -1,3 +1,11 @@\n+2005-02-10  Steven Bosscher  <stevenb@suse.de>\n+\n+\tPR tree-optimization/17549\n+\t* tree-outof-ssa.c (find_replaceable_in_bb): Do not allow\n+\tTER to replace a DEF with its expression if the DEF and the\n+\trhs of the expression we replace into have the same root\n+\tvariable.\n+\n 2005-02-10  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/mips/mips.md: Fix the placement of the match_scratch in the"}, {"sha": "c6aa812bc1754d004496e7d33658a9d31b78c535", "filename": "gcc/tree-outof-ssa.c", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b6616ddc44fe5f8e10457a1bc830e01d38ca5d7/gcc%2Ftree-outof-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b6616ddc44fe5f8e10457a1bc830e01d38ca5d7/gcc%2Ftree-outof-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-outof-ssa.c?ref=3b6616ddc44fe5f8e10457a1bc830e01d38ca5d7", "patch": "@@ -1659,8 +1659,23 @@ find_replaceable_in_bb (temp_expr_table_p tab, basic_block bb)\n \t{\n \t  if (tab->version_info[SSA_NAME_VERSION (def)])\n \t    {\n-\t      /* Mark expression as replaceable unless stmt is volatile.  */\n-\t      if (!ann->has_volatile_ops)\n+\t      bool same_root_var = false;\n+\t      tree def2;\n+\t      ssa_op_iter iter2;\n+\n+\t      /* See if the root variables are the same.  If they are, we\n+\t\t do not want to do the replacement to avoid problems with\n+\t\t code size, see PR tree-optimization/17549.  */\n+\t      FOR_EACH_SSA_TREE_OPERAND (def2, stmt, iter2, SSA_OP_DEF)\n+\t\tif (SSA_NAME_VAR (def) == SSA_NAME_VAR (def2))\n+\t\t  {\n+\t\t    same_root_var = true;\n+\t\t    break;\n+\t\t  }\n+\n+\t      /* Mark expression as replaceable unless stmt is volatile\n+\t\t or DEF sets the same root variable as STMT.  */\n+\t      if (!ann->has_volatile_ops && !same_root_var)\n \t\tmark_replaceable (tab, def);\n \t      else\n \t\tfinish_expr (tab, SSA_NAME_VERSION (def), false);"}]}