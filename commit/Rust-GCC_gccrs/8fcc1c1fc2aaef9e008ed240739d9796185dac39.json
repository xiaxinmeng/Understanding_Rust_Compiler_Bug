{"sha": "8fcc1c1fc2aaef9e008ed240739d9796185dac39", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGZjYzFjMWZjMmFhZWY5ZTAwOGVkMjQwNzM5ZDk3OTYxODVkYWMzOQ==", "commit": {"author": {"name": "Tejas Belagod", "email": "tejas.belagod@arm.com", "date": "2013-11-22T15:31:57Z"}, "committer": {"name": "Tejas Belagod", "email": "belagod@gcc.gnu.org", "date": "2013-11-22T15:31:57Z"}, "message": "aarch64-simd.md (vec_pack_trunc_<mode>, [...]): Swap source ops for big-endian.\n\n2013-11-22  Tejas Belagod  <tejas.belagod@arm.com>\n\ngcc/\n\t* config/aarch64/aarch64-simd.md (vec_pack_trunc_<mode>,\n\tvec_pack_trunc_v2df, vec_pack_trunc_df): Swap source ops for big-endian.\n\nFrom-SVN: r205268", "tree": {"sha": "0d5e3f094d95e5916a34428d9de9ac07b98b0b16", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0d5e3f094d95e5916a34428d9de9ac07b98b0b16"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8fcc1c1fc2aaef9e008ed240739d9796185dac39", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fcc1c1fc2aaef9e008ed240739d9796185dac39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8fcc1c1fc2aaef9e008ed240739d9796185dac39", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fcc1c1fc2aaef9e008ed240739d9796185dac39/comments", "author": {"login": "tejas-belagod-arm", "id": 92718852, "node_id": "U_kgDOBYbHBA", "avatar_url": "https://avatars.githubusercontent.com/u/92718852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tejas-belagod-arm", "html_url": "https://github.com/tejas-belagod-arm", "followers_url": "https://api.github.com/users/tejas-belagod-arm/followers", "following_url": "https://api.github.com/users/tejas-belagod-arm/following{/other_user}", "gists_url": "https://api.github.com/users/tejas-belagod-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/tejas-belagod-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tejas-belagod-arm/subscriptions", "organizations_url": "https://api.github.com/users/tejas-belagod-arm/orgs", "repos_url": "https://api.github.com/users/tejas-belagod-arm/repos", "events_url": "https://api.github.com/users/tejas-belagod-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/tejas-belagod-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e58bf20adf7d275f6241f5e335c7342fecffb94c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e58bf20adf7d275f6241f5e335c7342fecffb94c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e58bf20adf7d275f6241f5e335c7342fecffb94c"}], "stats": {"total": 32, "additions": 25, "deletions": 7}, "files": [{"sha": "958f61b0b57bb7c3f37d5ed00de791ac5a12b45a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8fcc1c1fc2aaef9e008ed240739d9796185dac39/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8fcc1c1fc2aaef9e008ed240739d9796185dac39/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8fcc1c1fc2aaef9e008ed240739d9796185dac39", "patch": "@@ -1,3 +1,8 @@\n+2013-11-22  Tejas Belagod  <tejas.belagod@arm.com>\n+\n+\t* config/aarch64/aarch64-simd.md (vec_pack_trunc_<mode>,\n+\tvec_pack_trunc_v2df, vec_pack_trunc_df): Swap source ops for big-endian.\n+\n 2013-11-22  Tejas Belagod  <tejas.belagod@arm.com>\n \n \t* config/aarch64/aarch64-simd.md (aarch64_simd_vec_set<mode>): Adjust"}, {"sha": "bfd524c7c65852b06113ca10062fc041d0315406", "filename": "gcc/config/aarch64/aarch64-simd.md", "status": "modified", "additions": 20, "deletions": 7, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8fcc1c1fc2aaef9e008ed240739d9796185dac39/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8fcc1c1fc2aaef9e008ed240739d9796185dac39/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md?ref=8fcc1c1fc2aaef9e008ed240739d9796185dac39", "patch": "@@ -916,9 +916,11 @@\n  \"TARGET_SIMD\"\n {\n   rtx tempreg = gen_reg_rtx (<VDBL>mode);\n+  int lo = BYTES_BIG_ENDIAN ? 2 : 1;\n+  int hi = BYTES_BIG_ENDIAN ? 1 : 2;\n \n-  emit_insn (gen_move_lo_quad_<Vdbl> (tempreg, operands[1]));\n-  emit_insn (gen_move_hi_quad_<Vdbl> (tempreg, operands[2]));\n+  emit_insn (gen_move_lo_quad_<Vdbl> (tempreg, operands[lo]));\n+  emit_insn (gen_move_hi_quad_<Vdbl> (tempreg, operands[hi]));\n   emit_insn (gen_aarch64_simd_vec_pack_trunc_<Vdbl> (operands[0], tempreg));\n   DONE;\n })\n@@ -931,7 +933,12 @@\n \t (truncate:<VNARROWQ> (match_operand:VQN 1 \"register_operand\" \"w\"))\n \t (truncate:<VNARROWQ> (match_operand:VQN 2 \"register_operand\" \"w\"))))]\n  \"TARGET_SIMD\"\n- \"xtn\\\\t%0.<Vntype>, %1.<Vtype>\\;xtn2\\\\t%0.<V2ntype>, %2.<Vtype>\"\n+ {\n+   if (BYTES_BIG_ENDIAN)\n+     return \"xtn\\\\t%0.<Vntype>, %2.<Vtype>\\;xtn2\\\\t%0.<V2ntype>, %1.<Vtype>\";\n+   else\n+     return \"xtn\\\\t%0.<Vntype>, %1.<Vtype>\\;xtn2\\\\t%0.<V2ntype>, %2.<Vtype>\";\n+ }\n   [(set_attr \"type\" \"multiple\")\n    (set_attr \"length\" \"8\")]\n )\n@@ -1469,9 +1476,12 @@\n   \"TARGET_SIMD\"\n   {\n     rtx tmp = gen_reg_rtx (V2SFmode);\n-    emit_insn (gen_aarch64_float_truncate_lo_v2sf (tmp, operands[1]));\n+    int lo = BYTES_BIG_ENDIAN ? 2 : 1;\n+    int hi = BYTES_BIG_ENDIAN ? 1 : 2;\n+\n+    emit_insn (gen_aarch64_float_truncate_lo_v2sf (tmp, operands[lo]));\n     emit_insn (gen_aarch64_float_truncate_hi_v4sf (operands[0],\n-\t\t\t\t\t\t   tmp, operands[2]));\n+\t\t\t\t\t\t   tmp, operands[hi]));\n     DONE;\n   }\n )\n@@ -1487,8 +1497,11 @@\n   \"TARGET_SIMD\"\n   {\n     rtx tmp = gen_reg_rtx (V2SFmode);\n-    emit_insn (gen_move_lo_quad_v2df (tmp, operands[1]));\n-    emit_insn (gen_move_hi_quad_v2df (tmp, operands[2]));\n+    int lo = BYTES_BIG_ENDIAN ? 2 : 1;\n+    int hi = BYTES_BIG_ENDIAN ? 1 : 2;\n+\n+    emit_insn (gen_move_lo_quad_v2df (tmp, operands[lo]));\n+    emit_insn (gen_move_hi_quad_v2df (tmp, operands[hi]));\n     emit_insn (gen_aarch64_float_truncate_lo_v2sf (operands[0], tmp));\n     DONE;\n   }"}]}