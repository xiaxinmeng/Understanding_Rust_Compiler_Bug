{"sha": "76d4accffd19a094761bf25b2d66435ce6642105", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzZkNGFjY2ZmZDE5YTA5NDc2MWJmMjViMmQ2NjQzNWNlNjY0MjEwNQ==", "commit": {"author": {"name": "Jim Wilson", "email": "jimw@sifive.com", "date": "2019-03-29T21:51:58Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2019-03-29T21:51:58Z"}, "message": "RISC-V: Fix __riscv_compressed regression.\n\nThis was accidentally broken by the patch adding ELF attribute support.\nThe __riscv_compressed predefined macro is not being defined when the\ntarget supports the C extension.  The fix adds testcases to verify that\nall of the predefined macros are correct for various option combinations.\n\n\tgcc/\n\t* common/config/riscv/riscv-common.c (riscv_parse_arch_string):\n\tClear MASK_RVC and then set if C subset supported.\n\n\tgcc/testsuite/\n\t* gcc.target/riscv/predef-1.c: New.\n\t* gcc.target/riscv/predef-2.c: New.\n\t* gcc.target/riscv/predef-3.c: New.\n\t* gcc.target/riscv/predef-4.c: New.\n\t* gcc.target/riscv/predef-5.c: New.\n\t* gcc.target/riscv/predef-6.c: New.\n\t* gcc.target/riscv/predef-7.c: New.\n\t* gcc.target/riscv/predef-8.c: New.\n\nFrom-SVN: r270026", "tree": {"sha": "25679b323cfe11e1cf4d4467072deab3944f32be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/25679b323cfe11e1cf4d4467072deab3944f32be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76d4accffd19a094761bf25b2d66435ce6642105", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76d4accffd19a094761bf25b2d66435ce6642105", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76d4accffd19a094761bf25b2d66435ce6642105", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76d4accffd19a094761bf25b2d66435ce6642105/comments", "author": null, "committer": null, "parents": [{"sha": "54ae50ac4532b2a0d72cc03639b8179b500ec043", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54ae50ac4532b2a0d72cc03639b8179b500ec043", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54ae50ac4532b2a0d72cc03639b8179b500ec043"}], "stats": {"total": 548, "additions": 548, "deletions": 0}, "files": [{"sha": "a9b1ee79632b8506e04620ac5d503b90ea114413", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=76d4accffd19a094761bf25b2d66435ce6642105", "patch": "@@ -1,3 +1,8 @@\n+2019-03-29  Jim Wilson  <jimw@sifive.com>\n+\n+\t* common/config/riscv/riscv-common.c (riscv_parse_arch_string):\n+\tClear MASK_RVC and then set if C subset supported.\n+\n 2019-03-29  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/89872"}, {"sha": "9452bd3a0ce566cdda37aaac699c46933e52d51d", "filename": "gcc/common/config/riscv/riscv-common.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Fcommon%2Fconfig%2Friscv%2Friscv-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Fcommon%2Fconfig%2Friscv%2Friscv-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon%2Fconfig%2Friscv%2Friscv-common.c?ref=76d4accffd19a094761bf25b2d66435ce6642105", "patch": "@@ -564,6 +564,10 @@ riscv_parse_arch_string (const char *isa, int *flags, location_t loc)\n   if (subset_list->lookup (\"d\"))\n     *flags |= MASK_DOUBLE_FLOAT;\n \n+  *flags &= ~MASK_RVC;\n+  if (subset_list->lookup (\"c\"))\n+    *flags |= MASK_RVC;\n+\n   if (current_subset_list)\n     delete current_subset_list;\n "}, {"sha": "f5f5bbf24f364cb96ccb23ef9b6fb18cc2b91a12", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=76d4accffd19a094761bf25b2d66435ce6642105", "patch": "@@ -1,3 +1,14 @@\n+2019-03-29  Jim Wilson  <jimw@sifive.com>\n+\n+\t* gcc.target/riscv/predef-1.c: New.\n+\t* gcc.target/riscv/predef-2.c: New.\n+\t* gcc.target/riscv/predef-3.c: New.\n+\t* gcc.target/riscv/predef-4.c: New.\n+\t* gcc.target/riscv/predef-5.c: New.\n+\t* gcc.target/riscv/predef-6.c: New.\n+\t* gcc.target/riscv/predef-7.c: New.\n+\t* gcc.target/riscv/predef-8.c: New.\n+\n 2019-03-29  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/89865"}, {"sha": "70f121f15fafb2005b8367718b9de79f1f5f5633", "filename": "gcc/testsuite/gcc.target/riscv/predef-1.c", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-1.c?ref=76d4accffd19a094761bf25b2d66435ce6642105", "patch": "@@ -0,0 +1,66 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=rv32i -mabi=ilp32 -mcmodel=medlow\" } */\n+\n+int main () {\n+#if !defined(__riscv)\n+#error \"__riscv\"\n+#endif\n+\n+#if defined(__riscv_compressed)\n+#error \"__riscv_compressed\"\n+#endif\n+\n+#if defined(__riscv_32e)\n+#error \"__riscv_32e\"\n+#endif\n+\n+#if defined(__riscv_atomic)\n+#error \"__riscv_atomic\"\n+#endif\n+\n+#if defined(__riscv_mul)\n+#error \"__riscv_mul\"\n+#endif\n+#if defined(__riscv_div)\n+#error \"__riscv_div\"\n+#endif\n+#if defined(__riscv_muldiv)\n+#error \"__riscv_muldiv\"\n+#endif\n+\n+#if __riscv_xlen != 32\n+#error \"__riscv_xlen\"\n+#endif\n+\n+#if defined(__riscv_fdiv)\n+#error \"__riscv_fdiv\"\n+#endif\n+#if defined(__riscv_fsqrt)\n+#error \"__riscv_fsqrt\"\n+#endif\n+\n+#if defined(__riscv_abi_rve)\n+#error \"__riscv_abi_rve\"\n+#endif\n+#if !defined(__riscv_float_abi_soft)\n+#error \"__riscv_float_abi_soft\"\n+#endif\n+#if defined(__riscv_float_abi_single)\n+#error \"__riscv_float_abi_single\"\n+#endif\n+#if defined(__riscv_float_abi_double)\n+#error \"__riscv_float_abi_double\"\n+#endif\n+\n+#if !defined(__riscv_cmodel_medlow)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if defined(__riscv_cmodel_medany)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if defined(__riscv_cmodel_pic)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+\n+  return 0;\n+}"}, {"sha": "6f3c8c3864ddba3ce281602f69df299458caf1b1", "filename": "gcc/testsuite/gcc.target/riscv/predef-2.c", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-2.c?ref=76d4accffd19a094761bf25b2d66435ce6642105", "patch": "@@ -0,0 +1,66 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=rv32imaf -mabi=ilp32f -mcmodel=medany\" } */\n+\n+int main () {\n+#if !defined(__riscv)\n+#error \"__riscv\"\n+#endif\n+\n+#if defined(__riscv_compressed)\n+#error \"__riscv_compressed\"\n+#endif\n+\n+#if defined(__riscv_32e)\n+#error \"__riscv_32e\"\n+#endif\n+\n+#if !defined(__riscv_atomic)\n+#error \"__riscv_atomic\"\n+#endif\n+\n+#if !defined(__riscv_mul)\n+#error \"__riscv_mul\"\n+#endif\n+#if !defined(__riscv_div)\n+#error \"__riscv_div\"\n+#endif\n+#if !defined(__riscv_muldiv)\n+#error \"__riscv_muldiv\"\n+#endif\n+\n+#if __riscv_xlen != 32\n+#error \"__riscv_xlen\"\n+#endif\n+\n+#if !defined(__riscv_fdiv)\n+#error \"__riscv_fdiv\"\n+#endif\n+#if !defined(__riscv_fsqrt)\n+#error \"__riscv_fsqrt\"\n+#endif\n+\n+#if defined(__riscv_abi_rve)\n+#error \"__riscv_abi_rve\"\n+#endif\n+#if defined(__riscv_float_abi_soft)\n+#error \"__riscv_float_abi_soft\"\n+#endif\n+#if !defined(__riscv_float_abi_single)\n+#error \"__riscv_float_abi_single\"\n+#endif\n+#if defined(__riscv_float_abi_double)\n+#error \"__riscv_float_abi_double\"\n+#endif\n+\n+#if defined(__riscv_cmodel_medlow)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if !defined(__riscv_cmodel_medany)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if defined(__riscv_cmodel_pic)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+\n+  return 0;\n+}"}, {"sha": "6f4f2e219941d42fc096df746b943dfc057bcfe7", "filename": "gcc/testsuite/gcc.target/riscv/predef-3.c", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-3.c?ref=76d4accffd19a094761bf25b2d66435ce6642105", "patch": "@@ -0,0 +1,66 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=rv32imafdc -mabi=ilp32d -fpic\" } */\n+\n+int main () {\n+#if !defined(__riscv)\n+#error \"__riscv\"\n+#endif\n+\n+#if !defined(__riscv_compressed)\n+#error \"__riscv_compressed\"\n+#endif\n+\n+#if defined(__riscv_32e)\n+#error \"__riscv_32e\"\n+#endif\n+\n+#if !defined(__riscv_atomic)\n+#error \"__riscv_atomic\"\n+#endif\n+\n+#if !defined(__riscv_mul)\n+#error \"__riscv_mul\"\n+#endif\n+#if !defined(__riscv_div)\n+#error \"__riscv_div\"\n+#endif\n+#if !defined(__riscv_muldiv)\n+#error \"__riscv_muldiv\"\n+#endif\n+\n+#if __riscv_xlen != 32\n+#error \"__riscv_xlen\"\n+#endif\n+\n+#if !defined(__riscv_fdiv)\n+#error \"__riscv_fdiv\"\n+#endif\n+#if !defined(__riscv_fsqrt)\n+#error \"__riscv_fsqrt\"\n+#endif\n+\n+#if defined(__riscv_abi_rve)\n+#error \"__riscv_abi_rve\"\n+#endif\n+#if defined(__riscv_float_abi_soft)\n+#error \"__riscv_float_abi_soft\"\n+#endif\n+#if defined(__riscv_float_abi_single)\n+#error \"__riscv_float_abi_single\"\n+#endif\n+#if !defined(__riscv_float_abi_double)\n+#error \"__riscv_float_abi_double\"\n+#endif\n+\n+#if defined(__riscv_cmodel_medlow)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if defined(__riscv_cmodel_medany)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if !defined(__riscv_cmodel_pic)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+\n+  return 0;\n+}"}, {"sha": "822f61782c3273f236688a60b8b5f0140dffd692", "filename": "gcc/testsuite/gcc.target/riscv/predef-4.c", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-4.c?ref=76d4accffd19a094761bf25b2d66435ce6642105", "patch": "@@ -0,0 +1,66 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=rv64ia -mabi=lp64 -mcmodel=medlow\" } */\n+\n+int main () {\n+#if !defined(__riscv)\n+#error \"__riscv\"\n+#endif\n+\n+#if defined(__riscv_compressed)\n+#error \"__riscv_compressed\"\n+#endif\n+\n+#if defined(__riscv_32e)\n+#error \"__riscv_32e\"\n+#endif\n+\n+#if !defined(__riscv_atomic)\n+#error \"__riscv_atomic\"\n+#endif\n+\n+#if defined(__riscv_mul)\n+#error \"__riscv_mul\"\n+#endif\n+#if defined(__riscv_div)\n+#error \"__riscv_div\"\n+#endif\n+#if defined(__riscv_muldiv)\n+#error \"__riscv_muldiv\"\n+#endif\n+\n+#if __riscv_xlen != 64\n+#error \"__riscv_xlen\"\n+#endif\n+\n+#if defined(__riscv_fdiv)\n+#error \"__riscv_fdiv\"\n+#endif\n+#if defined(__riscv_fsqrt)\n+#error \"__riscv_fsqrt\"\n+#endif\n+\n+#if defined(__riscv_abi_rve)\n+#error \"__riscv_abi_rve\"\n+#endif\n+#if !defined(__riscv_float_abi_soft)\n+#error \"__riscv_float_abi_soft\"\n+#endif\n+#if defined(__riscv_float_abi_single)\n+#error \"__riscv_float_abi_single\"\n+#endif\n+#if defined(__riscv_float_abi_double)\n+#error \"__riscv_float_abi_double\"\n+#endif\n+\n+#if !defined(__riscv_cmodel_medlow)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if defined(__riscv_cmodel_medany)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if defined(__riscv_cmodel_pic)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+\n+  return 0;\n+}"}, {"sha": "6649049099d80409d62deb012fbe6e4d9e0c2777", "filename": "gcc/testsuite/gcc.target/riscv/predef-5.c", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-5.c?ref=76d4accffd19a094761bf25b2d66435ce6642105", "patch": "@@ -0,0 +1,66 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=rv64imf -mabi=lp64f -mcmodel=medany\" } */\n+\n+int main () {\n+#if !defined(__riscv)\n+#error \"__riscv\"\n+#endif\n+\n+#if defined(__riscv_compressed)\n+#error \"__riscv_compressed\"\n+#endif\n+\n+#if defined(__riscv_32e)\n+#error \"__riscv_32e\"\n+#endif\n+\n+#if defined(__riscv_atomic)\n+#error \"__riscv_atomic\"\n+#endif\n+\n+#if !defined(__riscv_mul)\n+#error \"__riscv_mul\"\n+#endif\n+#if !defined(__riscv_div)\n+#error \"__riscv_div\"\n+#endif\n+#if !defined(__riscv_muldiv)\n+#error \"__riscv_muldiv\"\n+#endif\n+\n+#if __riscv_xlen != 64\n+#error \"__riscv_xlen\"\n+#endif\n+\n+#if !defined(__riscv_fdiv)\n+#error \"__riscv_fdiv\"\n+#endif\n+#if !defined(__riscv_fsqrt)\n+#error \"__riscv_fsqrt\"\n+#endif\n+\n+#if defined(__riscv_abi_rve)\n+#error \"__riscv_abi_rve\"\n+#endif\n+#if defined(__riscv_float_abi_soft)\n+#error \"__riscv_float_abi_soft\"\n+#endif\n+#if !defined(__riscv_float_abi_single)\n+#error \"__riscv_float_abi_single\"\n+#endif\n+#if defined(__riscv_float_abi_double)\n+#error \"__riscv_float_abi_double\"\n+#endif\n+\n+#if defined(__riscv_cmodel_medlow)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if !defined(__riscv_cmodel_medany)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if defined(__riscv_cmodel_pic)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+\n+  return 0;\n+}"}, {"sha": "ee4e02bcb63ea82caf6986a5c57c9bb5918c2137", "filename": "gcc/testsuite/gcc.target/riscv/predef-6.c", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-6.c?ref=76d4accffd19a094761bf25b2d66435ce6642105", "patch": "@@ -0,0 +1,66 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=rv64gc -mabi=lp64d -fpic\" } */\n+\n+int main () {\n+#if !defined(__riscv)\n+#error \"__riscv\"\n+#endif\n+\n+#if !defined(__riscv_compressed)\n+#error \"__riscv_compressed\"\n+#endif\n+\n+#if defined(__riscv_32e)\n+#error \"__riscv_32e\"\n+#endif\n+\n+#if !defined(__riscv_atomic)\n+#error \"__riscv_atomic\"\n+#endif\n+\n+#if !defined(__riscv_mul)\n+#error \"__riscv_mul\"\n+#endif\n+#if !defined(__riscv_div)\n+#error \"__riscv_div\"\n+#endif\n+#if !defined(__riscv_muldiv)\n+#error \"__riscv_muldiv\"\n+#endif\n+\n+#if __riscv_xlen != 64\n+#error \"__riscv_xlen\"\n+#endif\n+\n+#if !defined(__riscv_fdiv)\n+#error \"__riscv_fdiv\"\n+#endif\n+#if !defined(__riscv_fsqrt)\n+#error \"__riscv_fsqrt\"\n+#endif\n+\n+#if defined(__riscv_abi_rve)\n+#error \"__riscv_abi_rve\"\n+#endif\n+#if defined(__riscv_float_abi_soft)\n+#error \"__riscv_float_abi_soft\"\n+#endif\n+#if defined(__riscv_float_abi_single)\n+#error \"__riscv_float_abi_single\"\n+#endif\n+#if !defined(__riscv_float_abi_double)\n+#error \"__riscv_float_abi_double\"\n+#endif\n+\n+#if defined(__riscv_cmodel_medlow)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if defined(__riscv_cmodel_medany)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if !defined(__riscv_cmodel_pic)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+\n+  return 0;\n+}"}, {"sha": "0358f325c5d83a1a330f7186c796fac5f26762c1", "filename": "gcc/testsuite/gcc.target/riscv/predef-7.c", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-7.c?ref=76d4accffd19a094761bf25b2d66435ce6642105", "patch": "@@ -0,0 +1,66 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=rv32em -mabi=ilp32e -mno-div -mcmodel=medlow\" } */\n+\n+int main () {\n+#if !defined(__riscv)\n+#error \"__riscv\"\n+#endif\n+\n+#if defined(__riscv_compressed)\n+#error \"__riscv_compressed\"\n+#endif\n+\n+#if !defined(__riscv_32e)\n+#error \"__riscv_32e\"\n+#endif\n+\n+#if defined(__riscv_atomic)\n+#error \"__riscv_atomic\"\n+#endif\n+\n+#if !defined(__riscv_mul)\n+#error \"__riscv_mul\"\n+#endif\n+#if defined(__riscv_div)\n+#error \"__riscv_div\"\n+#endif\n+#if defined(__riscv_muldiv)\n+#error \"__riscv_muldiv\"\n+#endif\n+\n+#if __riscv_xlen != 32\n+#error \"__riscv_xlen\"\n+#endif\n+\n+#if defined(__riscv_fdiv)\n+#error \"__riscv_fdiv\"\n+#endif\n+#if defined(__riscv_fsqrt)\n+#error \"__riscv_fsqrt\"\n+#endif\n+\n+#if !defined(__riscv_abi_rve)\n+#error \"__riscv_abi_rve\"\n+#endif\n+#if !defined(__riscv_float_abi_soft)\n+#error \"__riscv_float_abi_soft\"\n+#endif\n+#if defined(__riscv_float_abi_single)\n+#error \"__riscv_float_abi_single\"\n+#endif\n+#if defined(__riscv_float_abi_double)\n+#error \"__riscv_float_abi_double\"\n+#endif\n+\n+#if !defined(__riscv_cmodel_medlow)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if defined(__riscv_cmodel_medany)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if defined(__riscv_cmodel_pic)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+\n+  return 0;\n+}"}, {"sha": "41cd9feab03f4de41d53343ae58d864c0e65ad40", "filename": "gcc/testsuite/gcc.target/riscv/predef-8.c", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76d4accffd19a094761bf25b2d66435ce6642105/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Friscv%2Fpredef-8.c?ref=76d4accffd19a094761bf25b2d66435ce6642105", "patch": "@@ -0,0 +1,66 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=rv32if -mabi=ilp32f -mno-fdiv -mcmodel=medany\" } */\n+\n+int main () {\n+#if !defined(__riscv)\n+#error \"__riscv\"\n+#endif\n+\n+#if defined(__riscv_compressed)\n+#error \"__riscv_compressed\"\n+#endif\n+\n+#if defined(__riscv_32e)\n+#error \"__riscv_32e\"\n+#endif\n+\n+#if defined(__riscv_atomic)\n+#error \"__riscv_atomic\"\n+#endif\n+\n+#if defined(__riscv_mul)\n+#error \"__riscv_mul\"\n+#endif\n+#if defined(__riscv_div)\n+#error \"__riscv_div\"\n+#endif\n+#if defined(__riscv_muldiv)\n+#error \"__riscv_muldiv\"\n+#endif\n+\n+#if __riscv_xlen != 32\n+#error \"__riscv_xlen\"\n+#endif\n+\n+#if defined(__riscv_fdiv)\n+#error \"__riscv_fdiv\"\n+#endif\n+#if defined(__riscv_fsqrt)\n+#error \"__riscv_fsqrt\"\n+#endif\n+\n+#if defined(__riscv_abi_rve)\n+#error \"__riscv_abi_rve\"\n+#endif\n+#if defined(__riscv_float_abi_soft)\n+#error \"__riscv_float_abi_soft\"\n+#endif\n+#if !defined(__riscv_float_abi_single)\n+#error \"__riscv_float_abi_single\"\n+#endif\n+#if defined(__riscv_float_abi_double)\n+#error \"__riscv_float_abi_double\"\n+#endif\n+\n+#if defined(__riscv_cmodel_medlow)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if !defined(__riscv_cmodel_medany)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+#if defined(__riscv_cmodel_pic)\n+#error \"__riscv_cmodel_medlow\"\n+#endif\n+\n+  return 0;\n+}"}]}