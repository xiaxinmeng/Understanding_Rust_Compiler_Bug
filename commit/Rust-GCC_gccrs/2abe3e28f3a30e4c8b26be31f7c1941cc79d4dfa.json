{"sha": "2abe3e28f3a30e4c8b26be31f7c1941cc79d4dfa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmFiZTNlMjhmM2EzMGU0YzhiMjZiZTMxZjdjMTk0MWNjNzlkNGRmYQ==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2003-04-07T20:09:14Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@gcc.gnu.org", "date": "2003-04-07T20:09:14Z"}, "message": "rs6000.c (rs6000_common_init_builtins): Rename all V2SI_type_node to opaque_V2SI_type_node.\n\n2003-04-07  Aldy Hernandez  <aldyh@redhat.com>\n\n        * config/rs6000/rs6000.c (rs6000_common_init_builtins): Rename all\n        V2SI_type_node to opaque_V2SI_type_node.  Rename all\n        V2SF_type_node to opaque_V2SF_type_node.\n        (rs6000_init_builtins): Define opaque_V2SI_type_node and\n        opaque_V2SF_type_node.\n        (is_ev64_opaque_type): The types opaque_V2SI_type_node and\n        opaque_V2SF_type_node are opaque types.\n\nFrom-SVN: r65340", "tree": {"sha": "489b77bf3926022e08e1dc728283d10bc53d8a75", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/489b77bf3926022e08e1dc728283d10bc53d8a75"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2abe3e28f3a30e4c8b26be31f7c1941cc79d4dfa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2abe3e28f3a30e4c8b26be31f7c1941cc79d4dfa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2abe3e28f3a30e4c8b26be31f7c1941cc79d4dfa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2abe3e28f3a30e4c8b26be31f7c1941cc79d4dfa/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9a318d3046dac48e1b3ecc33cfa7ba09193ca3cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a318d3046dac48e1b3ecc33cfa7ba09193ca3cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a318d3046dac48e1b3ecc33cfa7ba09193ca3cc"}], "stats": {"total": 73, "additions": 50, "deletions": 23}, "files": [{"sha": "3e6259be6fcb8d8a9400c77e25d939e758b21cb4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abe3e28f3a30e4c8b26be31f7c1941cc79d4dfa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abe3e28f3a30e4c8b26be31f7c1941cc79d4dfa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2abe3e28f3a30e4c8b26be31f7c1941cc79d4dfa", "patch": "@@ -1,3 +1,13 @@\n+2003-04-07  Aldy Hernandez  <aldyh@redhat.com>\n+\n+        * config/rs6000/rs6000.c (rs6000_common_init_builtins): Rename all\n+        V2SI_type_node to opaque_V2SI_type_node.  Rename all\n+        V2SF_type_node to opaque_V2SF_type_node.\n+        (rs6000_init_builtins): Define opaque_V2SI_type_node and\n+        opaque_V2SF_type_node.\n+        (is_ev64_opaque_type): The types opaque_V2SI_type_node and\n+        opaque_V2SF_type_node are opaque types.\n+\n 2003-04-07  J\"orn Rennecke <joern.rennecke@superh.com>\n \n \t* gcse.c (replace_store_insn): Use single_set."}, {"sha": "02092400ce6a72b23c249cbe7fa47240a2e8fdaf", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 40, "deletions": 23, "changes": 63, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2abe3e28f3a30e4c8b26be31f7c1941cc79d4dfa/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2abe3e28f3a30e4c8b26be31f7c1941cc79d4dfa/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=2abe3e28f3a30e4c8b26be31f7c1941cc79d4dfa", "patch": "@@ -147,6 +147,12 @@ const char *rs6000_debug_name;\n int rs6000_debug_stack;\t\t/* debug stack applications */\n int rs6000_debug_arg;\t\t/* debug argument handling */\n \n+/* A copy of V2SI_type_node to be used as an opaque type.  */\n+static GTY(()) tree opaque_V2SI_type_node;\n+\n+/* Same, but for V2SF.  */\n+static GTY(()) tree opaque_V2SF_type_node;\n+\n const char *rs6000_traceback_name;\n static enum {\n   traceback_default = 0,\n@@ -5431,7 +5437,11 @@ static void\n rs6000_init_builtins ()\n {\n   if (TARGET_SPE)\n-    spe_init_builtins ();\n+    {\n+      opaque_V2SI_type_node = copy_node (V2SI_type_node);\n+      opaque_V2SF_type_node = copy_node (V2SF_type_node);\n+      spe_init_builtins ();\n+    }\n   if (TARGET_ALTIVEC)\n     altivec_init_builtins ();\n   if (TARGET_ALTIVEC || TARGET_SPE)\n@@ -5910,43 +5920,48 @@ rs6000_common_init_builtins ()\n     = build_function_type_list (V4SF_type_node, V4SF_type_node, NULL_TREE);\n \n   tree v2si_ftype_v2si_v2si\n-    = build_function_type_list (V2SI_type_node,\n-\t\t\t\tV2SI_type_node, V2SI_type_node, NULL_TREE);\n+    = build_function_type_list (opaque_V2SI_type_node,\n+\t\t\t\topaque_V2SI_type_node,\n+\t\t\t\topaque_V2SI_type_node, NULL_TREE);\n \n   tree v2sf_ftype_v2sf_v2sf\n-    = build_function_type_list (V2SF_type_node,\n-\t\t\t\tV2SF_type_node, V2SF_type_node, NULL_TREE);\n+    = build_function_type_list (opaque_V2SF_type_node,\n+\t\t\t\topaque_V2SF_type_node,\n+\t\t\t\topaque_V2SF_type_node, NULL_TREE);\n \n   tree v2si_ftype_int_int\n-    = build_function_type_list (V2SI_type_node,\n+    = build_function_type_list (opaque_V2SI_type_node,\n \t\t\t\tinteger_type_node, integer_type_node,\n \t\t\t\tNULL_TREE);\n \n   tree v2si_ftype_v2si\n-    = build_function_type_list (V2SI_type_node, V2SI_type_node, NULL_TREE);\n+    = build_function_type_list (opaque_V2SI_type_node,\n+\t\t\t\topaque_V2SI_type_node, NULL_TREE);\n \n   tree v2sf_ftype_v2sf\n-    = build_function_type_list (V2SF_type_node,\n-\t\t\t\tV2SF_type_node, NULL_TREE);\n+    = build_function_type_list (opaque_V2SF_type_node,\n+\t\t\t\topaque_V2SF_type_node, NULL_TREE);\n   \n   tree v2sf_ftype_v2si\n-    = build_function_type_list (V2SF_type_node,\n-\t\t\t\tV2SI_type_node, NULL_TREE);\n+    = build_function_type_list (opaque_V2SF_type_node,\n+\t\t\t\topaque_V2SI_type_node, NULL_TREE);\n \n   tree v2si_ftype_v2sf\n-    = build_function_type_list (V2SI_type_node,\n-\t\t\t\tV2SF_type_node, NULL_TREE);\n+    = build_function_type_list (opaque_V2SI_type_node,\n+\t\t\t\topaque_V2SF_type_node, NULL_TREE);\n \n   tree v2si_ftype_v2si_char\n-    = build_function_type_list (V2SI_type_node,\n-\t\t\t\tV2SI_type_node, char_type_node, NULL_TREE);\n+    = build_function_type_list (opaque_V2SI_type_node,\n+\t\t\t\topaque_V2SI_type_node,\n+\t\t\t\tchar_type_node, NULL_TREE);\n \n   tree v2si_ftype_int_char\n-    = build_function_type_list (V2SI_type_node,\n+    = build_function_type_list (opaque_V2SI_type_node,\n \t\t\t\tinteger_type_node, char_type_node, NULL_TREE);\n \n   tree v2si_ftype_char\n-    = build_function_type_list (V2SI_type_node, char_type_node, NULL_TREE);\n+    = build_function_type_list (opaque_V2SI_type_node,\n+\t\t\t\tchar_type_node, NULL_TREE);\n \n   tree int_ftype_int_int\n     = build_function_type_list (integer_type_node,\n@@ -13933,12 +13948,14 @@ is_ev64_opaque_type (type)\n      tree type;\n {\n   return (TARGET_SPE\n-\t  && TREE_CODE (type) == VECTOR_TYPE\n-\t  && TYPE_NAME (type)\n-\t  && TREE_CODE (TYPE_NAME (type)) == TYPE_DECL\n-\t  && DECL_NAME (TYPE_NAME (type))\n-\t  && strcmp (IDENTIFIER_POINTER (DECL_NAME (TYPE_NAME (type))),\n-\t\t     \"__ev64_opaque__\") == 0);\n+\t  && (type == opaque_V2SI_type_node\n+\t      || type == opaque_V2SF_type_node\n+\t      || (TREE_CODE (type) == VECTOR_TYPE\n+\t\t  && TYPE_NAME (type)\n+\t\t  && TREE_CODE (TYPE_NAME (type)) == TYPE_DECL\n+\t\t  && DECL_NAME (TYPE_NAME (type))\n+\t\t  && strcmp (IDENTIFIER_POINTER (DECL_NAME (TYPE_NAME (type))),\n+\t\t\t     \"__ev64_opaque__\") == 0)));\n }\n \n static rtx"}]}