{"sha": "d370518679f55fa676afe6010301945b9ccc7053", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDM3MDUxODY3OWY1NWZhNjc2YWZlNjAxMDMwMTk0NWI5Y2NjNzA1Mw==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2011-12-13T16:08:14Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2011-12-13T16:08:14Z"}, "message": "re PR middle-end/50628 (gfortran.fortran-torture/execute/entry_4.f90 fails)\n\n2011-12-13  Martin Jambor  <mjambor@suse.cz>\n\n\tPR middle-end/50628\n\t* tree-sra.c (propagate_subaccesses_across_link): Do not propagate\n\tsub-accesses of scalar accesses.\n\nFrom-SVN: r182289", "tree": {"sha": "8b65d455f3dae2ce04e2319a34c93258fc6395fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b65d455f3dae2ce04e2319a34c93258fc6395fc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d370518679f55fa676afe6010301945b9ccc7053", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d370518679f55fa676afe6010301945b9ccc7053", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d370518679f55fa676afe6010301945b9ccc7053", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d370518679f55fa676afe6010301945b9ccc7053/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0318fc774964ac07f2bc1c9672cfa75b5355501b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0318fc774964ac07f2bc1c9672cfa75b5355501b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0318fc774964ac07f2bc1c9672cfa75b5355501b"}], "stats": {"total": 34, "additions": 21, "deletions": 13}, "files": [{"sha": "a9022e0b7b4be8e64a475d6df76c9d60574c00f1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d370518679f55fa676afe6010301945b9ccc7053/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d370518679f55fa676afe6010301945b9ccc7053/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d370518679f55fa676afe6010301945b9ccc7053", "patch": "@@ -1,3 +1,9 @@\n+2011-12-13  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR middle-end/50628\n+\t* tree-sra.c (propagate_subaccesses_across_link): Do not propagate\n+\tsub-accesses of scalar accesses.\n+\n 2011-12-13  Martin Jambor  <mjambor@suse.cz>\n \n \tPR tree-optimization/51362"}, {"sha": "84cbc84621493b091b28b91972598f5c2c886498", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 15, "deletions": 13, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d370518679f55fa676afe6010301945b9ccc7053/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d370518679f55fa676afe6010301945b9ccc7053/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=d370518679f55fa676afe6010301945b9ccc7053", "patch": "@@ -2266,21 +2266,23 @@ propagate_subaccesses_across_link (struct access *lacc, struct access *racc)\n       || racc->grp_unscalarizable_region)\n     return false;\n \n-  if (!lacc->first_child && !racc->first_child\n-      && is_gimple_reg_type (racc->type))\n+  if (is_gimple_reg_type (racc->type))\n     {\n-      tree t = lacc->base;\n-\n-      lacc->type = racc->type;\n-      if (build_user_friendly_ref_for_offset (&t, TREE_TYPE (t), lacc->offset,\n-\t\t\t\t\t      racc->type))\n-\tlacc->expr = t;\n-      else\n+      if (!lacc->first_child && !racc->first_child)\n \t{\n-\t  lacc->expr = build_ref_for_model (EXPR_LOCATION (lacc->base),\n-\t\t\t\t\t    lacc->base, lacc->offset,\n-\t\t\t\t\t    racc, NULL, false);\n-\t  lacc->grp_no_warning = true;\n+\t  tree t = lacc->base;\n+\n+\t  lacc->type = racc->type;\n+\t  if (build_user_friendly_ref_for_offset (&t, TREE_TYPE (t),\n+\t\t\t\t\t\t  lacc->offset, racc->type))\n+\t    lacc->expr = t;\n+\t  else\n+\t    {\n+\t      lacc->expr = build_ref_for_model (EXPR_LOCATION (lacc->base),\n+\t\t\t\t\t\tlacc->base, lacc->offset,\n+\t\t\t\t\t\tracc, NULL, false);\n+\t      lacc->grp_no_warning = true;\n+\t    }\n \t}\n       return false;\n     }"}]}