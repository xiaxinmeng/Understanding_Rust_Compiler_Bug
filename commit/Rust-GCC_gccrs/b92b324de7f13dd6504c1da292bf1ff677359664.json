{"sha": "b92b324de7f13dd6504c1da292bf1ff677359664", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjkyYjMyNGRlN2YxM2RkNjUwNGMxZGEyOTJiZjFmZjY3NzM1OTY2NA==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2001-12-26T18:02:17Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2001-12-26T18:02:17Z"}, "message": "rs6000.md (indirect_jump): Prefer CTR over LR.\n\n        * rs6000.md (indirect_jump): Prefer CTR over LR.\n        * xcoff.h (ASM_DECLARE_FUNCTION_NAME): Handle weak function.\n\nFrom-SVN: r48315", "tree": {"sha": "7d77c2756ec909b4c688bd37ea98eac7622af089", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7d77c2756ec909b4c688bd37ea98eac7622af089"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b92b324de7f13dd6504c1da292bf1ff677359664", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b92b324de7f13dd6504c1da292bf1ff677359664", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b92b324de7f13dd6504c1da292bf1ff677359664", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b92b324de7f13dd6504c1da292bf1ff677359664/comments", "author": null, "committer": null, "parents": [{"sha": "682bb080931180f79b553d3d57308c9a6e925633", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/682bb080931180f79b553d3d57308c9a6e925633", "html_url": "https://github.com/Rust-GCC/gccrs/commit/682bb080931180f79b553d3d57308c9a6e925633"}], "stats": {"total": 32, "additions": 25, "deletions": 7}, "files": [{"sha": "0a7b1138bb0deb1d957c51cedea1aa29f5a79deb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b92b324de7f13dd6504c1da292bf1ff677359664/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b92b324de7f13dd6504c1da292bf1ff677359664/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b92b324de7f13dd6504c1da292bf1ff677359664", "patch": "@@ -1,3 +1,8 @@\n+2001-12-26  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* rs6000.md (indirect_jump): Prefer CTR over LR.\n+\t* xcoff.h (ASM_DECLARE_FUNCTION_NAME): Handle weak function.\n+\n Tue Dec 25 12:04:47 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* dwarf2out.c: Reformatting and minor code rearrangement."}, {"sha": "bf41db8775090319ab5cd74759f15740f99af520", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b92b324de7f13dd6504c1da292bf1ff677359664/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b92b324de7f13dd6504c1da292bf1ff677359664/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=b92b324de7f13dd6504c1da292bf1ff677359664", "patch": "@@ -13030,15 +13030,19 @@\n }\")\n \n (define_insn \"indirect_jumpsi\"\n-  [(set (pc) (match_operand:SI 0 \"register_operand\" \"cl\"))]\n+  [(set (pc) (match_operand:SI 0 \"register_operand\" \"c,*l\"))]\n   \"TARGET_32BIT\"\n-  \"b%T0\"\n+  \"@\n+   bctr\n+   {br|blr}\"\n   [(set_attr \"type\" \"jmpreg\")])\n \n (define_insn \"indirect_jumpdi\"\n-  [(set (pc) (match_operand:DI 0 \"register_operand\" \"cl\"))]\n+  [(set (pc) (match_operand:DI 0 \"register_operand\" \"c,*l\"))]\n   \"TARGET_64BIT\"\n-  \"b%T0\"\n+  \"@\n+   bctr\n+   blr\"\n   [(set_attr \"type\" \"jmpreg\")])\n \n ;; Table jump for switch statements:"}, {"sha": "e60f3fe8282532cfebab6447179f9dfcb15c133a", "filename": "gcc/config/rs6000/xcoff.h", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b92b324de7f13dd6504c1da292bf1ff677359664/gcc%2Fconfig%2Frs6000%2Fxcoff.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b92b324de7f13dd6504c1da292bf1ff677359664/gcc%2Fconfig%2Frs6000%2Fxcoff.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fxcoff.h?ref=b92b324de7f13dd6504c1da292bf1ff677359664", "patch": "@@ -345,9 +345,18 @@ toc_section ()\t\t\t\t\t\t\\\n     SYMBOL_REF_FLAG (sym_ref) = 1;\t\t\t\t\\\n   if (TREE_PUBLIC (DECL))\t\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\\\n-      fputs (\"\\t.globl .\", FILE);\t\t\t\t\\\n-      RS6000_OUTPUT_BASENAME (FILE, NAME);\t\t\t\\\n-      putc ('\\n', FILE);\t\t\t\t\t\\\n+      if (RS6000_WEAK && DECL_WEAK (decl))\t\t\t\\\n+\t{\t\t\t\t\t\t\t\\\n+\t  fputs (\"\\t.weak .\", FILE);\t\t\t\t\\\n+\t  RS6000_OUTPUT_BASENAME (FILE, NAME);\t\t\t\\\n+\t  putc ('\\n', FILE);\t\t\t\t\t\\\n+\t}\t\t\t\t\t\t\t\\\n+      else\t\t\t\t\t\t\t\\\n+\t{\t\t\t\t\t\t\t\\\n+\t  fputs (\"\\t.globl .\", FILE);\t\t\t\t\\\n+\t  RS6000_OUTPUT_BASENAME (FILE, NAME);\t\t\t\\\n+\t  putc ('\\n', FILE);\t\t\t\t\t\\\n+\t}\t\t\t\t\t\t\t\\\n     }\t\t\t\t\t\t\t\t\\\n   else\t\t\t\t\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\\"}]}