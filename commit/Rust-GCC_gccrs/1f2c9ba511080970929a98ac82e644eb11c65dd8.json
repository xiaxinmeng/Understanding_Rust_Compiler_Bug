{"sha": "1f2c9ba511080970929a98ac82e644eb11c65dd8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWYyYzliYTUxMTA4MDk3MDkyOWE5OGFjODJlNjQ0ZWIxMWM2NWRkOA==", "commit": {"author": {"name": "Andrew Pinski", "email": "apinski@apple.com", "date": "2004-06-15T20:52:00Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2004-06-15T20:52:00Z"}, "message": "re PR c++/14639 ([non-unit-at-a-time] Incorrect emission of unused compiler-generated destructor)\n\n\n2004-06-12  Andrew Pinski  <apinski@apple.com>\n\n        PR c++/14639\n        Revert:\n        2004-06-02  Andrew Pinski  <pinskia@physics.uc.edu>\n\n                * cp-tree.h: Fix typo.\n\n                * cp-tree.h: Include cgraph.h\n                (DECL_NEEDED_P): Use cgraph_*node on the decl instead of\n                TREE_SYMBOL_REFERENCED on the DECL_ASSEMBLER_NAME of the decl.\n\nFrom-SVN: r83199", "tree": {"sha": "5e31b4103474eccfa9bc7b6397977e205039d62a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5e31b4103474eccfa9bc7b6397977e205039d62a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f2c9ba511080970929a98ac82e644eb11c65dd8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f2c9ba511080970929a98ac82e644eb11c65dd8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f2c9ba511080970929a98ac82e644eb11c65dd8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f2c9ba511080970929a98ac82e644eb11c65dd8/comments", "author": null, "committer": null, "parents": [{"sha": "eae29fe1dcd76ead474050e5849a6e36ae1f8b29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eae29fe1dcd76ead474050e5849a6e36ae1f8b29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eae29fe1dcd76ead474050e5849a6e36ae1f8b29"}], "stats": {"total": 19, "additions": 14, "deletions": 5}, "files": [{"sha": "5e2c20b8408489dbf0387f35bf9ce99cd1d6d32f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f2c9ba511080970929a98ac82e644eb11c65dd8/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f2c9ba511080970929a98ac82e644eb11c65dd8/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1f2c9ba511080970929a98ac82e644eb11c65dd8", "patch": "@@ -1,3 +1,15 @@\n+2004-06-12  Andrew Pinski  <apinski@apple.com>\n+\n+\tPR c++/14639\n+\tRevert:\n+\t2004-06-02  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\t\t* cp-tree.h: Fix typo.\n+\n+\t\t* cp-tree.h: Include cgraph.h\n+\t\t(DECL_NEEDED_P): Use cgraph_*node on the decl instead of \n+\t\tTREE_SYMBOL_REFERENCED on the DECL_ASSEMBLER_NAME of the decl.\n+\n 2004-06-12  Jason Merrill  <jason@redhat.com>\n \n \tPR tree-optimization/14107"}, {"sha": "320098b773cb34ae9b5e80559d294dc36f31f3e3", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f2c9ba511080970929a98ac82e644eb11c65dd8/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f2c9ba511080970929a98ac82e644eb11c65dd8/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=1f2c9ba511080970929a98ac82e644eb11c65dd8", "patch": "@@ -28,7 +28,6 @@ Boston, MA 02111-1307, USA.  */\n #include \"hashtab.h\"\n #include \"splay-tree.h\"\n #include \"varray.h\"\n-#include \"cgraph.h\"\n \n #include \"c-common.h\"\n #include \"name-lookup.h\"\n@@ -1709,10 +1708,8 @@ struct lang_decl GTY(())\n    not something is comdat until end-of-file.  */\n #define DECL_NEEDED_P(DECL)\t\t\t\t\t\\\n   ((at_eof && TREE_PUBLIC (DECL) && !DECL_COMDAT (DECL))\t\\\n-   || (DECL_P (DECL)\t\t\t\t\t\t\\\n-       && (TREE_CODE (DECL) == FUNCTION_DECL\t\t\t\\\n-\t   ? cgraph_node (DECL)->needed \t\t\t\\\n-\t   : cgraph_varpool_node (DECL)->needed))\t\t\\\n+   || (DECL_ASSEMBLER_NAME_SET_P (DECL)\t\t\t\t\\\n+       && TREE_SYMBOL_REFERENCED (DECL_ASSEMBLER_NAME (DECL)))\t\\\n    || (((flag_syntax_only || flag_unit_at_a_time) && TREE_USED (DECL))))\n \n /* For a FUNCTION_DECL or a VAR_DECL, the language linkage for the"}]}