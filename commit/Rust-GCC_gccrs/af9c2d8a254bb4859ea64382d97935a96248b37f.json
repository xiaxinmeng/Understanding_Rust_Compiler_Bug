{"sha": "af9c2d8a254bb4859ea64382d97935a96248b37f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWY5YzJkOGEyNTRiYjQ4NTllYTY0MzgyZDk3OTM1YTk2MjQ4YjM3Zg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchell@usa.net", "date": "1998-03-10T07:32:11Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchell@gcc.gnu.org", "date": "1998-03-10T07:32:11Z"}, "message": "decl2.c (import_export_decl): Mark tinfo functions for cv-qualified versions of class types as...\n\nTue Mar 10 07:32:36 1998  Mark Mitchell  <mmitchell@usa.net>\n\t* decl2.c (import_export_decl): Mark tinfo functions for\n\tcv-qualified versions of class types as DECL_NOT_REALLY_EXTERN.\n\nFrom-SVN: r18456", "tree": {"sha": "e1f20ae56c09c412b991c58c3b106e0ab9f65262", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e1f20ae56c09c412b991c58c3b106e0ab9f65262"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/af9c2d8a254bb4859ea64382d97935a96248b37f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af9c2d8a254bb4859ea64382d97935a96248b37f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af9c2d8a254bb4859ea64382d97935a96248b37f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af9c2d8a254bb4859ea64382d97935a96248b37f/comments", "author": null, "committer": null, "parents": [{"sha": "a438d567a561730b1c3645e2469e5478569cc32d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a438d567a561730b1c3645e2469e5478569cc32d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a438d567a561730b1c3645e2469e5478569cc32d"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "c2a62c9be378b02a4f75c96effcf796b429578cf", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af9c2d8a254bb4859ea64382d97935a96248b37f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af9c2d8a254bb4859ea64382d97935a96248b37f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=af9c2d8a254bb4859ea64382d97935a96248b37f", "patch": "@@ -1,3 +1,8 @@\n+Tue Mar 10 07:32:36 1998  Mark Mitchell  <mmitchell@usa.net>\n+\n+\t* decl2.c (import_export_decl): Mark tinfo functions for\n+\tcv-qualified versions of class types as DECL_NOT_REALLY_EXTERN.\n+\n Fri Mar  6 23:27:35 1998  Jeffrey A Law  (law@cygnus.com)\n \n \t* method.c: Fix typo."}, {"sha": "2d8ecb96469b6c90bbb6beb5258d022af9255c14", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af9c2d8a254bb4859ea64382d97935a96248b37f/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af9c2d8a254bb4859ea64382d97935a96248b37f/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=af9c2d8a254bb4859ea64382d97935a96248b37f", "patch": "@@ -2702,9 +2702,16 @@ import_export_decl (decl)\n       if (IS_AGGR_TYPE (ctype) && CLASSTYPE_INTERFACE_KNOWN (ctype)\n \t  && TYPE_VIRTUAL_P (ctype))\n \t{\n+\t  /* If the type is a cv-qualified variant of a type, then we\n+\t     must emit the tinfo function in this translation unit\n+\t     since it will not be emitted when the vtable for the type\n+\t     is output (which is when the unqualified version is\n+\t     generated).  */\n \t  DECL_NOT_REALLY_EXTERN (decl)\n-\t    = ! (CLASSTYPE_INTERFACE_ONLY (ctype)\n-\t\t || (DECL_THIS_INLINE (decl) && ! flag_implement_inlines));\n+\t    = TYPE_READONLY (ctype) \n+\t    || TYPE_VOLATILE (ctype)\n+\t    || ! (CLASSTYPE_INTERFACE_ONLY (ctype)\n+\t\t  || (DECL_THIS_INLINE (decl) && ! flag_implement_inlines));\n \n \t  /* For WIN32 we also want to put explicit instantiations in\n \t     linkonce sections.  */"}]}