{"sha": "525ce91010c1606b6d8cb0155ef23321bb556aad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTI1Y2U5MTAxMGMxNjA2YjZkOGNiMDE1NWVmMjMzMjFiYjU1NmFhZA==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2015-11-02T19:47:03Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2015-11-02T19:47:03Z"}, "message": "libcpp: Improvements to description of source_location in line-map.h\n\nlibcpp/ChangeLog:\n\t* include/line-map.h (source_location): In the table in the\n\tdescriptive comment, show UNKNOWN_LOCATION, BUILTINS_LOCATION,\n\tLINE_MAP_MAX_LOCATION_WITH_COLS, LINE_MAP_MAX_SOURCE_LOCATION.\n\tAdd notes about ad-hoc values.\n\nFrom-SVN: r229673", "tree": {"sha": "db9b37e922843db6316a583629c8e361352b1328", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db9b37e922843db6316a583629c8e361352b1328"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/525ce91010c1606b6d8cb0155ef23321bb556aad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/525ce91010c1606b6d8cb0155ef23321bb556aad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/525ce91010c1606b6d8cb0155ef23321bb556aad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/525ce91010c1606b6d8cb0155ef23321bb556aad/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5c1a2e639a26f1582318ac6f547a8819ea7c6034", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c1a2e639a26f1582318ac6f547a8819ea7c6034", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c1a2e639a26f1582318ac6f547a8819ea7c6034"}], "stats": {"total": 30, "additions": 25, "deletions": 5}, "files": [{"sha": "295124e2480077fbf3eb127940977c5ce9eb26b6", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/525ce91010c1606b6d8cb0155ef23321bb556aad/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/525ce91010c1606b6d8cb0155ef23321bb556aad/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=525ce91010c1606b6d8cb0155ef23321bb556aad", "patch": "@@ -1,3 +1,10 @@\n+2015-11-02  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* include/line-map.h (source_location): In the table in the\n+\tdescriptive comment, show UNKNOWN_LOCATION, BUILTINS_LOCATION,\n+\tLINE_MAP_MAX_LOCATION_WITH_COLS, LINE_MAP_MAX_SOURCE_LOCATION.\n+\tAdd notes about ad-hoc values.\n+\n 2015-10-21  Mikhail Maltsev  <maltsevm@gmail.com>\n \n \t* include/line-map.h: Use CHECKING_P instead of ENABLE_CHECKING."}, {"sha": "e5867edf4e837e9fe013a177b5a0d707364c827d", "filename": "libcpp/include/line-map.h", "status": "modified", "additions": 18, "deletions": 5, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/525ce91010c1606b6d8cb0155ef23321bb556aad/libcpp%2Finclude%2Fline-map.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/525ce91010c1606b6d8cb0155ef23321bb556aad/libcpp%2Finclude%2Fline-map.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Finclude%2Fline-map.h?ref=525ce91010c1606b6d8cb0155ef23321bb556aad", "patch": "@@ -59,8 +59,10 @@ typedef unsigned int linenum_type;\n \n   Actual     | Value                         | Meaning\n   -----------+-------------------------------+-------------------------------\n-  0x00000000 |                               | Reserved for use by libcpp\n-  0x00000001 | RESERVED_LOCATION_COUNT - 1   | Reserved for use by libcpp\n+  0x00000000 | UNKNOWN_LOCATION (gcc/input.h)| Unknown/invalid location.\n+  -----------+-------------------------------+-------------------------------\n+  0x00000001 | BUILTINS_LOCATION             | The location for declarations\n+             |   (gcc/input.h)               | in \"<built-in>\"\n   -----------+-------------------------------+-------------------------------\n   0x00000002 | RESERVED_LOCATION_COUNT       | The first location to be\n              | (also                         | handed out, and the\n@@ -94,6 +96,16 @@ typedef unsigned int linenum_type;\n              |\n              |                    (unallocated integers)\n              |\n+  0x60000000 | LINE_MAP_MAX_LOCATION_WITH_COLS\n+             |   Beyond this point, ordinary linemaps have 0 bits per column:\n+             |   each increment of the value corresponds to a new source line.\n+             |\n+  0x70000000 | LINE_MAP_MAX_SOURCE_LOCATION\n+             |   Beyond the point, we give up on ordinary maps; attempts to\n+             |   create locations in them lead to UNKNOWN_LOCATION (0).\n+             |\n+             |                    (unallocated integers)\n+             |\n              |                   Macro maps grow this way\n              |                   ^^^^^^^^^^^^^^^^^^^^^^^^\n              |                               |\n@@ -107,10 +119,11 @@ typedef unsigned int linenum_type;\n              | macromap[1]->start_location   | Start of macro map 1\n   -----------+-------------------------------+-------------------------------\n              | macromap[0]->start_location   | Start of macro map 0\n-  0x7fffffff | MAX_SOURCE_LOCATION           |\n+  0x7fffffff | MAX_SOURCE_LOCATION           | Also used as a mask for\n+             |                               | accessing the ad-hoc data table\n   -----------+-------------------------------+-------------------------------\n-  0x80000000 | Start of ad-hoc values        |\n-  ...        |                               |\n+  0x80000000 | Start of ad-hoc values; the lower 31 bits are used as an index\n+  ...        | into the line_table->location_adhoc_data_map.data array.\n   0xffffffff | UINT_MAX                      |\n   -----------+-------------------------------+-------------------------------\n "}]}