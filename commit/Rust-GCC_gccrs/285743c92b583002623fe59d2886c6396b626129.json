{"sha": "285743c92b583002623fe59d2886c6396b626129", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjg1NzQzYzkyYjU4MzAwMjYyM2ZlNTlkMjg4NmM2Mzk2YjYyNjEyOQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2008-11-11T14:31:48Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-11-11T14:31:48Z"}, "message": "re PR libstdc++/37986 (std::tr1::variate_generator does not conform to TR1.)\n\n2008-11-11  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR libstdc++/37986\n\t* include/tr1_impl/random (struct _Adaptor): Use remove_pointer\n\tand remove_reference on _Engine.\n\t* testsuite/tr1/5_numerical_facilities/random/variate_generator/\n\t37986.cc: New.\n\nFrom-SVN: r141769", "tree": {"sha": "b7c694e9ccacabf5608f31068bac74421dac5444", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b7c694e9ccacabf5608f31068bac74421dac5444"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/285743c92b583002623fe59d2886c6396b626129", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/285743c92b583002623fe59d2886c6396b626129", "html_url": "https://github.com/Rust-GCC/gccrs/commit/285743c92b583002623fe59d2886c6396b626129", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/285743c92b583002623fe59d2886c6396b626129/comments", "author": null, "committer": null, "parents": [{"sha": "9b77c3a2ba972d17193b405e15c864d9451b4fdd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b77c3a2ba972d17193b405e15c864d9451b4fdd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b77c3a2ba972d17193b405e15c864d9451b4fdd"}], "stats": {"total": 58, "additions": 57, "deletions": 1}, "files": [{"sha": "191d27c743c85d7ce0806df8e539381f1b894f75", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/285743c92b583002623fe59d2886c6396b626129/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/285743c92b583002623fe59d2886c6396b626129/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=285743c92b583002623fe59d2886c6396b626129", "patch": "@@ -1,3 +1,11 @@\n+2008-11-11  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR libstdc++/37986\n+\t* include/tr1_impl/random (struct _Adaptor): Use remove_pointer\n+\tand remove_reference on _Engine.\n+\t* testsuite/tr1/5_numerical_facilities/random/variate_generator/\n+\t37986.cc: New.\n+\n 2008-11-11  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* testsuite/ext/ext_pointer/1_neg.cc: Adjust dg-error line numbers."}, {"sha": "9e30eb32795487e8670211b47ec34aab5ebb1929", "filename": "libstdc++-v3/include/tr1_impl/random", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/285743c92b583002623fe59d2886c6396b626129/libstdc%2B%2B-v3%2Finclude%2Ftr1_impl%2Frandom", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/285743c92b583002623fe59d2886c6396b626129/libstdc%2B%2B-v3%2Finclude%2Ftr1_impl%2Frandom", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Ftr1_impl%2Frandom?ref=285743c92b583002623fe59d2886c6396b626129", "patch": "@@ -79,7 +79,10 @@ _GLIBCXX_BEGIN_NAMESPACE_TR1\n     template<typename _Engine, typename _Distribution>\n       struct _Adaptor\n       { \n-\ttypedef typename _Engine::result_type        _Engine_result_type;\n+\ttypedef typename remove_reference<\n+\t  typename remove_pointer<_Engine>::type>::type _BEngine;\n+\n+\ttypedef typename _BEngine::result_type       _Engine_result_type;\n \ttypedef typename _Distribution::input_type   result_type;\n \n       public:"}, {"sha": "50ca3b96ea32ade24dca4a107d6cc10dbb733ca1", "filename": "libstdc++-v3/testsuite/tr1/5_numerical_facilities/random/variate_generator/37986.cc", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/285743c92b583002623fe59d2886c6396b626129/libstdc%2B%2B-v3%2Ftestsuite%2Ftr1%2F5_numerical_facilities%2Frandom%2Fvariate_generator%2F37986.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/285743c92b583002623fe59d2886c6396b626129/libstdc%2B%2B-v3%2Ftestsuite%2Ftr1%2F5_numerical_facilities%2Frandom%2Fvariate_generator%2F37986.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Ftr1%2F5_numerical_facilities%2Frandom%2Fvariate_generator%2F37986.cc?ref=285743c92b583002623fe59d2886c6396b626129", "patch": "@@ -0,0 +1,45 @@\n+// { dg-do compile }\n+//\n+// Copyright (C) 2008 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 2, or (at your option)\n+// any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+//\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING.  If not, write to the Free\n+// Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,\n+// USA.\n+\n+// 5.1.3 class template variate_generator\n+\n+#include <tr1/random>\n+\n+// libtsdc++/37986\n+void test01()\n+{\n+  std::tr1::mt19937 mt;\n+  std::tr1::uniform_real<double> dist;\n+\n+  std::tr1::variate_generator<\n+    std::tr1::mt19937,\n+    std::tr1::uniform_real<double>\n+    > g1(mt, dist);\n+\n+  std::tr1::variate_generator<\n+    std::tr1::mt19937&,\n+    std::tr1::uniform_real<double>\n+    > g2(mt, dist);\n+\n+  std::tr1::variate_generator<\n+    std::tr1::mt19937*,\n+    std::tr1::uniform_real<double>\n+    > g3(&mt, dist);\n+}"}]}