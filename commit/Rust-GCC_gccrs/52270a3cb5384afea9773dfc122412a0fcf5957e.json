{"sha": "52270a3cb5384afea9773dfc122412a0fcf5957e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTIyNzBhM2NiNTM4NGFmZWE5NzczZGZjMTIyNDEyYTBmY2Y1OTU3ZQ==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@redhat.com", "date": "2005-08-19T18:08:55Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2005-08-19T18:08:55Z"}, "message": "re PR tree-optimization/23476 (ICE in VRP, remove_range_assertions)\n\n\n\tPR 23476\n\t* tree-cfgcleanup.c (cleanup_control_expr_graph): Fold the\n\tconditional expression before testing its value.\n\n\tPR 23476\n\t* gcc.c-torture/compile/pr23476.c: New test.\n\nFrom-SVN: r103290", "tree": {"sha": "e021dbfc4fa5df69c8229745ea8e626e837dee2f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e021dbfc4fa5df69c8229745ea8e626e837dee2f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/52270a3cb5384afea9773dfc122412a0fcf5957e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52270a3cb5384afea9773dfc122412a0fcf5957e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52270a3cb5384afea9773dfc122412a0fcf5957e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52270a3cb5384afea9773dfc122412a0fcf5957e/comments", "author": null, "committer": null, "parents": [{"sha": "5c1c631ecfcaa838d1c0d38680b4070ab0372122", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c1c631ecfcaa838d1c0d38680b4070ab0372122", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c1c631ecfcaa838d1c0d38680b4070ab0372122"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "f19ee5c5b6c8d402789647c7ab18442af870df17", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52270a3cb5384afea9773dfc122412a0fcf5957e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52270a3cb5384afea9773dfc122412a0fcf5957e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=52270a3cb5384afea9773dfc122412a0fcf5957e", "patch": "@@ -1,3 +1,9 @@\n+2005-08-19  Diego Novillo  <dnovillo@redhat.com>\n+\n+\tPR 23476\n+\t* tree-cfgcleanup.c (cleanup_control_expr_graph): Fold the\n+\tconditional expression before testing its value.\n+\n 2005-08-19  Diego Novillo  <dnovillo@redhat.com>\n \n \t* doc/invoke.texi: Fix documentation for -ftree-dominator-opts."}, {"sha": "5abaa13028bf215e0960646b815e0ddb24ab3d41", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52270a3cb5384afea9773dfc122412a0fcf5957e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52270a3cb5384afea9773dfc122412a0fcf5957e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=52270a3cb5384afea9773dfc122412a0fcf5957e", "patch": "@@ -1,3 +1,8 @@\n+2005-08-19  Diego Novillo  <dnovillo@redhat.com>\n+\n+\tPR 23476\n+\t* gcc.c-torture/compile/pr23476.c: New test.\n+\n 2005-08-19  Devang Patel  <dpatel@apple.com>\n \n \tPR tree-optimization/23048"}, {"sha": "9cccde6e9b2e9d4394aefcaa617a39516d734662", "filename": "gcc/testsuite/gcc.c-torture/compile/pr23476.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52270a3cb5384afea9773dfc122412a0fcf5957e/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr23476.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52270a3cb5384afea9773dfc122412a0fcf5957e/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr23476.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr23476.c?ref=52270a3cb5384afea9773dfc122412a0fcf5957e", "patch": "@@ -0,0 +1,14 @@\n+int h(int);\n+int t;\n+static inline int f(const int i)\n+{\n+  int tt = i;\n+  _Bool a = i < t;\n+  if (a)\n+    return h(t);\n+  return 9;\n+}\n+int g(void)\n+{\n+  return f(0x7FFFFFFF);\n+}"}, {"sha": "0f8bfc5ec1b5d757c684e0cb229a0bd03b3e2bc8", "filename": "gcc/tree-cfgcleanup.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52270a3cb5384afea9773dfc122412a0fcf5957e/gcc%2Ftree-cfgcleanup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52270a3cb5384afea9773dfc122412a0fcf5957e/gcc%2Ftree-cfgcleanup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfgcleanup.c?ref=52270a3cb5384afea9773dfc122412a0fcf5957e", "patch": "@@ -81,11 +81,11 @@ cleanup_control_expr_graph (basic_block bb, block_stmt_iterator bsi)\n       switch (TREE_CODE (expr))\n \t{\n \tcase COND_EXPR:\n-\t  val = COND_EXPR_COND (expr);\n+\t  val = fold (COND_EXPR_COND (expr));\n \t  break;\n \n \tcase SWITCH_EXPR:\n-\t  val = SWITCH_COND (expr);\n+\t  val = fold (SWITCH_COND (expr));\n \t  if (TREE_CODE (val) != INTEGER_CST)\n \t    return false;\n \t  break;"}]}