{"sha": "e4c34f6a4306b4cad5f91fd98b53f3dd5290779c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTRjMzRmNmE0MzA2YjRjYWQ1ZjkxZmQ5OGI1M2YzZGQ1MjkwNzc5Yw==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@albatross.co.nz", "date": "2001-03-23T05:18:16Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2001-03-23T05:18:16Z"}, "message": "re PR libgcj/1736 ([irix 6.5] Cannot create libgcj - Arg list too long)\n\n\tFix for PR libgcj/1736. Thanks to Robert Boehne and Alexandre Oliva\n\tfor libtool hacking.\n\t* Makefile.am (libgcj.la): New explicit rule. Echo the list of objects\n\tto a temporary file, then invoke libtool with the -objectlist\n\tparamater.\n\t(libgcjx.la): Likewise.\n\t* Makefile.in: Rebuilt.\n\nFrom-SVN: r40775", "tree": {"sha": "1eef88ab95342e68a01221f1cad00ac7e0eaf2f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1eef88ab95342e68a01221f1cad00ac7e0eaf2f3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e4c34f6a4306b4cad5f91fd98b53f3dd5290779c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4c34f6a4306b4cad5f91fd98b53f3dd5290779c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4c34f6a4306b4cad5f91fd98b53f3dd5290779c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4c34f6a4306b4cad5f91fd98b53f3dd5290779c/comments", "author": null, "committer": null, "parents": [{"sha": "f2a29271d5c70dd6706e17362facc196a4ca4a1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2a29271d5c70dd6706e17362facc196a4ca4a1b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2a29271d5c70dd6706e17362facc196a4ca4a1b"}], "stats": {"total": 110, "additions": 60, "deletions": 50}, "files": [{"sha": "0847094e7bd49f3b97d45f027af326b537c1f88e", "filename": "libjava/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4c34f6a4306b4cad5f91fd98b53f3dd5290779c/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4c34f6a4306b4cad5f91fd98b53f3dd5290779c/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=e4c34f6a4306b4cad5f91fd98b53f3dd5290779c", "patch": "@@ -1,3 +1,13 @@\n+2001-03-23  Bryce McKinlay  <bryce@albatross.co.nz>\n+\n+\tFix for PR libgcj/1736. Thanks to Robert Boehne and Alexandre Oliva\n+\tfor libtool hacking.\n+\t* Makefile.am (libgcj.la): New explicit rule. Echo the list of objects\n+\tto a temporary file, then invoke libtool with the -objectlist \n+\tparamater.\n+\t(libgcjx.la): Likewise.\n+\t* Makefile.in: Rebuilt.\n+\n 2001-03-22  Joerg Brunsmann <joerg_brunsmann@yahoo.de>\n \n \t* javax/naming/Context.java (SECURITY_CREDENTIALS): Fix typo."}, {"sha": "3b69121e8c3a0e068212434968d541866564cd03", "filename": "libjava/Makefile.am", "status": "modified", "additions": 16, "deletions": 3, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4c34f6a4306b4cad5f91fd98b53f3dd5290779c/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4c34f6a4306b4cad5f91fd98b53f3dd5290779c/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=e4c34f6a4306b4cad5f91fd98b53f3dd5290779c", "patch": "@@ -142,12 +142,12 @@ EXTRA_libgcj_la_SOURCES = boehm.cc nogc.cc posix-threads.cc no-threads.cc \\\n libgcj_la_DEPENDENCIES = libgcj.jar $(javao_files) \\\n \t$(c_files) $(GCOBJS) $(THREADOBJS) $(LIBLTDL)\n \n+libgcj_la_LIBADD = $(javao_files) $(c_files) $(GCOBJS) \\\n+\t$(THREADOBJS) $(libffi_files)\n # Include THREADLIBS here to ensure that the correct version of\n # certain linuxthread functions get linked:\n-libgcj_la_LIBADD = $(javao_files) $(c_files) $(GCOBJS) \\\n-\t$(THREADOBJS) $(THREADLIBS) $(libffi_files) $(LIBLTDL)\n libgcj_la_LDFLAGS = -L$(here)/../libstdc++-v3/libsupc++ -lsupc++ \\\n-\t-rpath $(toolexeclibdir) \\\n+\t-rpath $(toolexeclibdir) $(THREADLIBS) $(LIBLTDL) \\\n ## The mysterious backslash is consumed by make.\n \t-version-info `grep -v '^\\#' $(srcdir)/libtool-version`\n libgcj_la_LINK = $(LIBLINK)\n@@ -262,6 +262,19 @@ $(c_files): java/lang/fdlibm.h java/lang/ieeefp.h java/lang/mprec.h\n $(javao_files) $(x_javao_files): %.lo: %.java\n \t$(GCJCOMPILE) -o $@ $<\n \n+## Pass the list of object files to libtool in a temporary file to \n+## avoid tripping platform command line length limits.\n+libgcj.la: $(libgcj_la_OBJECTS) $(libgcj_la_DEPENDENCIES)\n+\t@echo $(libgcj_la_OBJECTS) > libgcj.objectlist;\n+\t@echo $(libgcj_la_LIBADD) >> libgcj.objectlist;\n+\t$(libgcj_la_LINK) -objectlist libgcj.objectlist -rpath $(toolexeclibdir) $(libgcj_la_LDFLAGS) $(LIBS)\n+\n+libgcjx.la: $(libgcjx_la_OBJECTS) $(libgcjx_la_DEPENDENCIES)\n+\t@echo $(libgcjx_la_OBJECTS) > libgcjx.objectlist;\n+\t@echo $(libgcjx_la_LIBADD) >> libgcjx.objectlist;\n+\t$(libgcjx_la_LINK) -objectlist libgcjx.objectlist -rpath $(toolexeclibdir) $(libgcjx_la_LDFLAGS) $(LIBS)\n+\n+\n ## ################################################################\n \n ##"}, {"sha": "de5f24ab09e3b82d483f308c28f5c3c86d580e5d", "filename": "libjava/Makefile.in", "status": "modified", "additions": 34, "deletions": 47, "changes": 81, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4c34f6a4306b4cad5f91fd98b53f3dd5290779c/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4c34f6a4306b4cad5f91fd98b53f3dd5290779c/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=e4c34f6a4306b4cad5f91fd98b53f3dd5290779c", "patch": "@@ -119,43 +119,29 @@ here = @here@\n libgcj_basedir = @libgcj_basedir@\n \n AUTOMAKE_OPTIONS = foreign no-installinfo\n-@TESTSUBDIR_TRUE@SUBDIRS = \\\n-@TESTSUBDIR_TRUE@$(DIRLTDL) testsuite gcj include\n-@TESTSUBDIR_FALSE@SUBDIRS = \\\n-@TESTSUBDIR_FALSE@$(DIRLTDL) gcj include\n-@USE_LIBDIR_TRUE@toolexeclibdir = \\\n-@USE_LIBDIR_TRUE@$(libdir)$(MULTISUBDIR)\n-@USE_LIBDIR_FALSE@toolexeclibdir = \\\n-@USE_LIBDIR_FALSE@$(toolexecdir)/lib$(MULTISUBDIR)\n-@USE_LIBDIR_FALSE@toolexecdir = \\\n-@USE_LIBDIR_FALSE@$(exec_prefix)/$(target_alias)\n-@XLIB_AWT_TRUE@cond_x_ltlibrary = \\\n-@XLIB_AWT_TRUE@libgcjx.la\n-@XLIB_AWT_FALSE@cond_x_ltlibrary = \\\n+@TESTSUBDIR_TRUE@SUBDIRS = @TESTSUBDIR_TRUE@$(DIRLTDL) testsuite gcj include\n+@TESTSUBDIR_FALSE@SUBDIRS = @TESTSUBDIR_FALSE@$(DIRLTDL) gcj include\n+@USE_LIBDIR_TRUE@toolexeclibdir = @USE_LIBDIR_TRUE@$(libdir)$(MULTISUBDIR)\n+@USE_LIBDIR_FALSE@toolexeclibdir = @USE_LIBDIR_FALSE@$(toolexecdir)/lib$(MULTISUBDIR)\n+@USE_LIBDIR_FALSE@toolexecdir = @USE_LIBDIR_FALSE@$(exec_prefix)/$(target_alias)\n+@XLIB_AWT_TRUE@cond_x_ltlibrary = @XLIB_AWT_TRUE@libgcjx.la\n+@XLIB_AWT_FALSE@cond_x_ltlibrary = \n \n toolexeclib_LTLIBRARIES = libgcj.la $(cond_x_ltlibrary)\n toolexeclib_DATA = libgcj.spec\n data_DATA = libgcj.jar\n \n-@NEEDS_DATA_START_TRUE@toolexeclib_LIBRARIES = \\\n-@NEEDS_DATA_START_TRUE@libgcjdata.a\n-@NEEDS_DATA_START_TRUE@libgcjdata_a_SOURCES = \\\n-@NEEDS_DATA_START_TRUE@libgcjdata.c\n+@NEEDS_DATA_START_TRUE@toolexeclib_LIBRARIES = @NEEDS_DATA_START_TRUE@libgcjdata.a\n+@NEEDS_DATA_START_TRUE@libgcjdata_a_SOURCES = @NEEDS_DATA_START_TRUE@libgcjdata.c\n \n-@NATIVE_TRUE@bin_PROGRAMS = \\\n-@NATIVE_TRUE@jv-convert gij\n+@NATIVE_TRUE@bin_PROGRAMS = @NATIVE_TRUE@jv-convert gij\n \n bin_SCRIPTS = addr2name.awk\n-@CANADIAN_TRUE@@NULL_TARGET_TRUE@ZIP = \\\n-@CANADIAN_TRUE@@NULL_TARGET_TRUE@$(MULTIBUILDTOP)../$(COMPPATH)/fastjar/fastjar$(EXEEXT)\n-@CANADIAN_TRUE@@NULL_TARGET_FALSE@ZIP = \\\n-@CANADIAN_TRUE@@NULL_TARGET_FALSE@fastjar\n-@CANADIAN_FALSE@ZIP = \\\n-@CANADIAN_FALSE@$(MULTIBUILDTOP)../$(COMPPATH)/fastjar/fastjar$(EXEEXT)\n-@CANADIAN_TRUE@GCJH = \\\n-@CANADIAN_TRUE@gcjh\n-@CANADIAN_FALSE@GCJH = \\\n-@CANADIAN_FALSE@$(MULTIBUILDTOP)../$(COMPPATH)/gcc/gcjh$(EXEEXT)\n+@CANADIAN_TRUE@@NULL_TARGET_TRUE@ZIP = @CANADIAN_TRUE@@NULL_TARGET_TRUE@$(MULTIBUILDTOP)../$(COMPPATH)/fastjar/fastjar$(EXEEXT)\n+@CANADIAN_TRUE@@NULL_TARGET_FALSE@ZIP = @CANADIAN_TRUE@@NULL_TARGET_FALSE@fastjar\n+@CANADIAN_FALSE@ZIP = @CANADIAN_FALSE@$(MULTIBUILDTOP)../$(COMPPATH)/fastjar/fastjar$(EXEEXT)\n+@CANADIAN_TRUE@GCJH = @CANADIAN_TRUE@gcjh\n+@CANADIAN_FALSE@GCJH = @CANADIAN_FALSE@$(MULTIBUILDTOP)../$(COMPPATH)/gcc/gcjh$(EXEEXT)\n \n GCJ_WITH_FLAGS = $(GCJ) --encoding=UTF-8\n \n@@ -174,10 +160,8 @@ AM_CXXFLAGS = -fno-rtti -fvtable-thunks -fasynchronous-exceptions \\\n \t-fdollars-in-identifiers \\\n \t@LIBGCJ_CXXFLAGS@ @EXCEPTIONSPEC@ @X_CFLAGS@ $(WARNINGS) -D_GNU_SOURCE\n \n-@USING_GCC_TRUE@AM_CFLAGS = \\\n-@USING_GCC_TRUE@@LIBGCJ_CFLAGS@ $(WARNINGS)\n-@USING_GCC_FALSE@AM_CFLAGS = \\\n-@USING_GCC_FALSE@@LIBGCJ_CFLAGS@\n+@USING_GCC_TRUE@AM_CFLAGS = @USING_GCC_TRUE@@LIBGCJ_CFLAGS@ $(WARNINGS)\n+@USING_GCC_FALSE@AM_CFLAGS = @USING_GCC_FALSE@@LIBGCJ_CFLAGS@\n \n JCFLAGS = -g\n JC1FLAGS = @LIBGCJ_JAVAFLAGS@ $(GCJFLAGS)\n@@ -210,13 +194,13 @@ libgcj_la_DEPENDENCIES = libgcj.jar $(javao_files) \\\n \t$(c_files) $(GCOBJS) $(THREADOBJS) $(LIBLTDL)\n \n \n-# Include THREADLIBS here to ensure that the correct version of\n-# certain linuxthread functions get linked:\n libgcj_la_LIBADD = $(javao_files) $(c_files) $(GCOBJS) \\\n-\t$(THREADOBJS) $(THREADLIBS) $(libffi_files) $(LIBLTDL)\n+\t$(THREADOBJS) $(libffi_files)\n \n+# Include THREADLIBS here to ensure that the correct version of\n+# certain linuxthread functions get linked:\n libgcj_la_LDFLAGS = -L$(here)/../libstdc++-v3/libsupc++ -lsupc++ \\\n-\t-rpath $(toolexeclibdir) \\\n+\t-rpath $(toolexeclibdir) $(THREADLIBS) $(LIBLTDL) \\\n \t-version-info `grep -v '^\\#' $(srcdir)/libtool-version`\n \n libgcj_la_LINK = $(LIBLINK)\n@@ -249,8 +233,7 @@ extra_headers = java/lang/Object.h java/lang/Class.h\n \n NM = nm\n \n-@NATIVE_TRUE@@MAINTAINER_MODE_TRUE@noinst_PROGRAMS = \\\n-@NATIVE_TRUE@@MAINTAINER_MODE_TRUE@gen-from-JIS\n+@NATIVE_TRUE@@MAINTAINER_MODE_TRUE@noinst_PROGRAMS = @NATIVE_TRUE@@MAINTAINER_MODE_TRUE@gen-from-JIS\n \n CONVERT_DIR = gnu/gcj/convert\n \n@@ -1215,7 +1198,7 @@ libgcj-test.spec.in libgcj.spec.in\n \n DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)\n \n-TAR = tar\n+TAR = gtar\n GZIP_ENV = --best\n DIST_SUBDIRS =  @DIRLTDL@ testsuite gcj include @DIRLTDL@ gcj include\n DEP_FILES =  .deps/$(srcdir)/$(CONVERT_DIR)/gen-from-JIS.P \\\n@@ -1869,12 +1852,6 @@ uninstall-toolexeclibLTLIBRARIES:\n \t  $(LIBTOOL)  --mode=uninstall rm -f $(DESTDIR)$(toolexeclibdir)/$$p; \\\n \tdone\n \n-libgcj.la: $(libgcj_la_OBJECTS) $(libgcj_la_DEPENDENCIES)\n-\t$(libgcj_la_LINK) -rpath $(toolexeclibdir) $(libgcj_la_LDFLAGS) $(libgcj_la_OBJECTS) $(libgcj_la_LIBADD) $(LIBS)\n-\n-libgcjx.la: $(libgcjx_la_OBJECTS) $(libgcjx_la_DEPENDENCIES)\n-\t$(libgcjx_la_LINK) -rpath $(toolexeclibdir) $(libgcjx_la_LDFLAGS) $(libgcjx_la_OBJECTS) $(libgcjx_la_LIBADD) $(LIBS)\n-\n mostlyclean-binPROGRAMS:\n \n clean-binPROGRAMS:\n@@ -2119,7 +2096,7 @@ distdir: $(DISTFILES)\n \t@for file in $(DISTFILES); do \\\n \t  d=$(srcdir); \\\n \t  if test -d $$d/$$file; then \\\n-\t    cp -pr $$/$$file $(distdir)/$$file; \\\n+\t    cp -pr $$d/$$file $(distdir)/$$file; \\\n \t  else \\\n \t    test -f $(distdir)/$$file \\\n \t    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \\\n@@ -2369,6 +2346,16 @@ $(c_files): java/lang/fdlibm.h java/lang/ieeefp.h java/lang/mprec.h\n $(javao_files) $(x_javao_files): %.lo: %.java\n \t$(GCJCOMPILE) -o $@ $<\n \n+libgcj.la: $(libgcj_la_OBJECTS) $(libgcj_la_DEPENDENCIES)\n+\t@echo $(libgcj_la_OBJECTS) > libgcj.objectlist;\n+\t@echo $(libgcj_la_LIBADD) >> libgcj.objectlist;\n+\t$(libgcj_la_LINK) -objectlist libgcj.objectlist -rpath $(toolexeclibdir) $(libgcj_la_LDFLAGS) $(LIBS)\n+\n+libgcjx.la: $(libgcjx_la_OBJECTS) $(libgcjx_la_DEPENDENCIES)\n+\t@echo $(libgcjx_la_OBJECTS) > libgcjx.objectlist;\n+\t@echo $(libgcjx_la_LIBADD) >> libgcjx.objectlist;\n+\t$(libgcjx_la_LINK) -objectlist libgcjx.objectlist -rpath $(toolexeclibdir) $(libgcjx_la_LDFLAGS) $(LIBS)\n+\n .class.h:\n \t$(GCJH) -classpath $(top_builddir) $(basename $<)\n "}]}