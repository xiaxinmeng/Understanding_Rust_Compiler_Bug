{"sha": "51a641fdb2ae830bce646ad72ab9919a269fb9d3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTFhNjQxZmRiMmFlODMwYmNlNjQ2YWQ3MmFiOTkxOWEyNjlmYjlkMw==", "commit": {"author": {"name": "Jie Zhang", "email": "jie.zhang@analog.com", "date": "2005-11-11T17:58:31Z"}, "committer": {"name": "Jie Zhang", "email": "jiez@gcc.gnu.org", "date": "2005-11-11T17:58:31Z"}, "message": "bfin.c (bfin_expand_strmov): Correctly move the trailing bytes when align is 2.\n\n\t* config/bfin/bfin.c (bfin_expand_strmov): Correctly move the trailing\n\tbytes when align is 2.\n\t* config/bfin/bfin.md (rep_movsi, rep_movhi): Make LSETUP be followed\n\tby the first instruction of the loop.\n\nFrom-SVN: r106790", "tree": {"sha": "f972ce37060ef73ff75360d3018bddbb42111196", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f972ce37060ef73ff75360d3018bddbb42111196"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/51a641fdb2ae830bce646ad72ab9919a269fb9d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51a641fdb2ae830bce646ad72ab9919a269fb9d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51a641fdb2ae830bce646ad72ab9919a269fb9d3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51a641fdb2ae830bce646ad72ab9919a269fb9d3/comments", "author": {"login": "jiez-adi", "id": 103514486, "node_id": "U_kgDOBiuBdg", "avatar_url": "https://avatars.githubusercontent.com/u/103514486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiez-adi", "html_url": "https://github.com/jiez-adi", "followers_url": "https://api.github.com/users/jiez-adi/followers", "following_url": "https://api.github.com/users/jiez-adi/following{/other_user}", "gists_url": "https://api.github.com/users/jiez-adi/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiez-adi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiez-adi/subscriptions", "organizations_url": "https://api.github.com/users/jiez-adi/orgs", "repos_url": "https://api.github.com/users/jiez-adi/repos", "events_url": "https://api.github.com/users/jiez-adi/events{/privacy}", "received_events_url": "https://api.github.com/users/jiez-adi/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "47b266bdfe8929e17037c7672ed6a30aac50d37e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47b266bdfe8929e17037c7672ed6a30aac50d37e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47b266bdfe8929e17037c7672ed6a30aac50d37e"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "425bc1ae521b882d16afba96ab43c46b5ed2b2b4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51a641fdb2ae830bce646ad72ab9919a269fb9d3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51a641fdb2ae830bce646ad72ab9919a269fb9d3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=51a641fdb2ae830bce646ad72ab9919a269fb9d3", "patch": "@@ -1,3 +1,10 @@\n+2005-11-11  Jie Zhang  <jie.zhang@analog.com>\n+\n+\t* config/bfin/bfin.c (bfin_expand_strmov): Correctly move the trailing\n+\tbytes when align is 2.\n+\t* config/bfin/bfin.md (rep_movsi, rep_movhi): Make LSETUP be followed\n+\tby the first instruction of the loop.\n+\n 2005-11-11  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/24686"}, {"sha": "f1a82683aa18ea7a4958e89e8a8ce3207ce45157", "filename": "gcc/config/bfin/bfin.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51a641fdb2ae830bce646ad72ab9919a269fb9d3/gcc%2Fconfig%2Fbfin%2Fbfin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51a641fdb2ae830bce646ad72ab9919a269fb9d3/gcc%2Fconfig%2Fbfin%2Fbfin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fbfin.c?ref=51a641fdb2ae830bce646ad72ab9919a269fb9d3", "patch": "@@ -2475,6 +2475,11 @@ bfin_expand_strmov (rtx dst, rtx src, rtx count_exp, rtx align_exp)\n \n \t      emit_insn (gen_rep_movsi (destreg, srcreg, countreg, destreg, srcreg));\n \t    }\n+\t  if (count & 2)\n+\t    {\n+\t      single_move_for_strmov (dst, src, HImode, offset);\n+\t      offset += 2;\n+\t    }\n \t}\n       else\n \t{\n@@ -2491,11 +2496,6 @@ bfin_expand_strmov (rtx dst, rtx src, rtx count_exp, rtx align_exp)\n \t      emit_insn (gen_rep_movhi (destreg, srcreg, countreg, destreg, srcreg));\n \t    }\n \t}\n-      if (count & 2)\n-\t{\n-\t  single_move_for_strmov (dst, src, HImode, offset);\n-\t  offset += 2;\n-\t}\n       if (count & 1)\n \t{\n \t  single_move_for_strmov (dst, src, QImode, offset);"}, {"sha": "363a1e9fb7f375b04caf2946120f0449467058b0", "filename": "gcc/config/bfin/bfin.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51a641fdb2ae830bce646ad72ab9919a269fb9d3/gcc%2Fconfig%2Fbfin%2Fbfin.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51a641fdb2ae830bce646ad72ab9919a269fb9d3/gcc%2Fconfig%2Fbfin%2Fbfin.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fbfin.md?ref=51a641fdb2ae830bce646ad72ab9919a269fb9d3", "patch": "@@ -1458,7 +1458,7 @@\n    (use (match_dup 2))\n    (clobber (match_scratch:HI 5 \"=&d\"))]\n   \"\"\n-  \"lsetup (1f, 1f) LC1 = %2; %5 = [%4++]; 1: MNOP || [%3++] = %5 || %5 = [%4++]; [%3++] = %5;\"\n+  \"%5 = [%4++]; lsetup (1f, 1f) LC1 = %2; 1: MNOP || [%3++] = %5 || %5 = [%4++]; [%3++] = %5;\"\n   [(set_attr \"type\" \"misc\")\n    (set_attr \"length\" \"16\")])\n \n@@ -1477,7 +1477,7 @@\n    (use (match_dup 2))\n    (clobber (match_scratch:HI 5 \"=&d\"))]\n   \"\"\n-  \"lsetup (1f, 1f) LC1 = %2; %h5 = W[%4++]; 1: MNOP || W [%3++] = %5 || %h5 = W [%4++]; W [%3++] = %5;\"\n+  \"%h5 = W[%4++]; lsetup (1f, 1f) LC1 = %2; 1: MNOP || W [%3++] = %5 || %h5 = W [%4++]; W [%3++] = %5;\"\n   [(set_attr \"type\" \"misc\")\n    (set_attr \"length\" \"16\")])\n "}]}