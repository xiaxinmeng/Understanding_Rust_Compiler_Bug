{"sha": "d723358d0167b16e3fdffe71e4e5267e3ce01a5f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDcyMzM1OGQwMTY3YjE2ZTNmZGZmZTcxZTRlNTI2N2UzY2UwMWE1Zg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2014-02-21T21:57:49Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2014-02-21T21:57:49Z"}, "message": "re PR c++/60108 ([C++11] ICE in use_thunk, at cp/method.c:340)\n\n\tPR c++/60108\n\t* semantics.c (expand_or_defer_fn_1): Check DECL_DEFAULTED_FN.\n\nFrom-SVN: r208030", "tree": {"sha": "4798be7b7948323d5b1d823e6da7148a2dfa189a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4798be7b7948323d5b1d823e6da7148a2dfa189a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d723358d0167b16e3fdffe71e4e5267e3ce01a5f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d723358d0167b16e3fdffe71e4e5267e3ce01a5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d723358d0167b16e3fdffe71e4e5267e3ce01a5f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d723358d0167b16e3fdffe71e4e5267e3ce01a5f/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c754ffcc4c79086eb49f534db5d353a8041a9c12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c754ffcc4c79086eb49f534db5d353a8041a9c12", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c754ffcc4c79086eb49f534db5d353a8041a9c12"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "53f6c2101e06ff541226d9f42368d3fab39436f2", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d723358d0167b16e3fdffe71e4e5267e3ce01a5f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d723358d0167b16e3fdffe71e4e5267e3ce01a5f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d723358d0167b16e3fdffe71e4e5267e3ce01a5f", "patch": "@@ -1,5 +1,8 @@\n 2014-02-21  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/60108\n+\t* semantics.c (expand_or_defer_fn_1): Check DECL_DEFAULTED_FN.\n+\n \tPR c++/60185\n \t* parser.c (cp_parser_default_argument): Clear\n \tcurrent_class_ptr/current_class_ref like tsubst_default_argument."}, {"sha": "85d6807cd2e20513ac1aac05e32e894120f82136", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d723358d0167b16e3fdffe71e4e5267e3ce01a5f/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d723358d0167b16e3fdffe71e4e5267e3ce01a5f/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=d723358d0167b16e3fdffe71e4e5267e3ce01a5f", "patch": "@@ -3986,7 +3986,7 @@ expand_or_defer_fn_1 (tree fn)\n \t     linkage of all functions, and as that causes writes to\n \t     the data mapped in from the PCH file, it's advantageous\n \t     to mark the functions at this point.  */\n-\t  if (!DECL_IMPLICIT_INSTANTIATION (fn))\n+\t  if (!DECL_IMPLICIT_INSTANTIATION (fn) || DECL_DEFAULTED_FN (fn))\n \t    {\n \t      /* This function must have external linkage, as\n \t\t otherwise DECL_INTERFACE_KNOWN would have been"}, {"sha": "727afc5ca55b2dbd9191908de05b7d4ffe1023f0", "filename": "gcc/testsuite/g++.dg/cpp0x/defaulted48.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d723358d0167b16e3fdffe71e4e5267e3ce01a5f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdefaulted48.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d723358d0167b16e3fdffe71e4e5267e3ce01a5f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdefaulted48.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdefaulted48.C?ref=d723358d0167b16e3fdffe71e4e5267e3ce01a5f", "patch": "@@ -0,0 +1,17 @@\n+// PR c++/60108\n+// { dg-require-effective-target c++11 }\n+\n+template<int> struct A\n+{\n+  virtual ~A();\n+};\n+\n+template<typename> struct B : A<0>, A<1>\n+{\n+  ~B() = default;\n+};\n+\n+struct C : B<bool>\n+{\n+  C() {}\n+};"}]}