{"sha": "d67ffa886d642c7a08441023971a3c5099b58d4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDY3ZmZhODg2ZDY0MmM3YTA4NDQxMDIzOTcxYTNjNTA5OWI1OGQ0ZQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-04-20T09:07:12Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-04-20T09:07:12Z"}, "message": "[multiple changes]\n\n2016-04-20  Vincent Celier  <celier@adacore.com>\n\n\t* clean.adb (Gnatclean): Fail if project file specified and\n\tgprclean is not available.\n\t* gnatname.adb: Fail is -P is used and gprname is not available.\n\t* make.adb (Initialize): Fail if project file specified and\n\tgprbuild is not available.\n\n2016-04-20  Bob Duff  <duff@adacore.com>\n\n\t* sem_ch5.adb (Analyze_Iterator_Specification): Do not use secondary\n\tstack when possible.\n\nFrom-SVN: r235241", "tree": {"sha": "a3fa5694f90550001fe14a24b2606648a2f5dce2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3fa5694f90550001fe14a24b2606648a2f5dce2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d67ffa886d642c7a08441023971a3c5099b58d4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d67ffa886d642c7a08441023971a3c5099b58d4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d67ffa886d642c7a08441023971a3c5099b58d4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d67ffa886d642c7a08441023971a3c5099b58d4e/comments", "author": null, "committer": null, "parents": [{"sha": "93e90bf474fd9410af5127417d542c2f80466ca4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93e90bf474fd9410af5127417d542c2f80466ca4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93e90bf474fd9410af5127417d542c2f80466ca4"}], "stats": {"total": 49, "additions": 30, "deletions": 19}, "files": [{"sha": "fd077b3b01f72b04a8dd931daf83318597c52691", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d67ffa886d642c7a08441023971a3c5099b58d4e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d67ffa886d642c7a08441023971a3c5099b58d4e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=d67ffa886d642c7a08441023971a3c5099b58d4e", "patch": "@@ -1,3 +1,16 @@\n+2016-04-20  Vincent Celier  <celier@adacore.com>\n+\n+\t* clean.adb (Gnatclean): Fail if project file specified and\n+\tgprclean is not available.\n+\t* gnatname.adb: Fail is -P is used and gprname is not available.\n+\t* make.adb (Initialize): Fail if project file specified and\n+\tgprbuild is not available.\n+\n+2016-04-20  Bob Duff  <duff@adacore.com>\n+\n+\t* sem_ch5.adb (Analyze_Iterator_Specification): Do not use secondary\n+\tstack when possible.\n+\n 2016-04-20  Gary Dismukes  <dismukes@adacore.com>\n \n \t* par_sco.adb, sem_util.adb, sem_ch13.adb: Minor typo corrections and"}, {"sha": "814f47107b3216efcb586926378767e7e7ec7bdd", "filename": "gcc/ada/clean.adb", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d67ffa886d642c7a08441023971a3c5099b58d4e/gcc%2Fada%2Fclean.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d67ffa886d642c7a08441023971a3c5099b58d4e/gcc%2Fada%2Fclean.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fclean.adb?ref=d67ffa886d642c7a08441023971a3c5099b58d4e", "patch": "@@ -1386,9 +1386,8 @@ package body Clean is\n          --  Warn about 'gnatclean -P'\n \n          if Project_File_Name /= null then\n-            Put_Line\n-              (\"warning: gnatclean -P is obsolete and will not be available \"\n-               & \"in the next release; use gprclean instead.\");\n+            Fail\n+              (\"project files are no longer supported; use gprclean instead.\");\n          end if;\n \n          --  A project file was specified by a -P switch"}, {"sha": "bd0c861204531bf6f22a19e73a966354455c0d47", "filename": "gcc/ada/gnatname.adb", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d67ffa886d642c7a08441023971a3c5099b58d4e/gcc%2Fada%2Fgnatname.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d67ffa886d642c7a08441023971a3c5099b58d4e/gcc%2Fada%2Fgnatname.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatname.adb?ref=d67ffa886d642c7a08441023971a3c5099b58d4e", "patch": "@@ -659,9 +659,7 @@ begin\n    --  gprname did not succeed.\n \n    if Create_Project then\n-      Write_Line\n-        (\"warning: gnatname -P is obsolete and will not be available in the \"\n-         & \"next release; use gprname instead\");\n+      Fail (\"project files are no longer supported; use gprname instead\");\n    end if;\n \n    --  If no Ada or foreign pattern was specified, print the usage and return"}, {"sha": "fb70e378a2121892009833c50e3cfdb4062899a9", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d67ffa886d642c7a08441023971a3c5099b58d4e/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d67ffa886d642c7a08441023971a3c5099b58d4e/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=d67ffa886d642c7a08441023971a3c5099b58d4e", "patch": "@@ -6509,9 +6509,8 @@ package body Make is\n       --  Warn about 'gnatmake -P'\n \n       if Project_File_Name /= null then\n-         Write_Line\n-           (\"warning: gnatmake -P is obsolete and will not be available \"\n-            & \"in the next release; use gprbuild instead\");\n+         Make_Failed\n+           (\"project files are no longer supported; use gprbuild instead\");\n       end if;\n \n       --  If --subdirs= is specified, but not -P, this is equivalent to -D,"}, {"sha": "2309ada48a2126500e6e65c287a357292ea2cc0c", "filename": "gcc/ada/sem_ch5.adb", "status": "modified", "additions": 12, "deletions": 10, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d67ffa886d642c7a08441023971a3c5099b58d4e/gcc%2Fada%2Fsem_ch5.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d67ffa886d642c7a08441023971a3c5099b58d4e/gcc%2Fada%2Fsem_ch5.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch5.adb?ref=d67ffa886d642c7a08441023971a3c5099b58d4e", "patch": "@@ -1753,14 +1753,6 @@ package body Sem_Ch5 is\n    ------------------------------------\n \n    procedure Analyze_Iterator_Specification (N : Node_Id) is\n-      Loc       : constant Source_Ptr := Sloc (N);\n-      Def_Id    : constant Node_Id    := Defining_Identifier (N);\n-      Subt      : constant Node_Id    := Subtype_Indication (N);\n-      Iter_Name : constant Node_Id    := Name (N);\n-\n-      Typ : Entity_Id;\n-      Bas : Entity_Id;\n-\n       procedure Check_Reverse_Iteration (Typ : Entity_Id);\n       --  For an iteration over a container, if the loop carries the Reverse\n       --  indicator, verify that the container type has an Iterate aspect that\n@@ -1822,6 +1814,16 @@ package body Sem_Ch5 is\n          return Etype (Ent);\n       end Get_Cursor_Type;\n \n+      --  Local variables\n+\n+      Def_Id    : constant Node_Id    := Defining_Identifier (N);\n+      Iter_Name : constant Node_Id    := Name (N);\n+      Loc       : constant Source_Ptr := Sloc (N);\n+      Subt      : constant Node_Id    := Subtype_Indication (N);\n+\n+      Bas : Entity_Id;\n+      Typ : Entity_Id;\n+\n    --   Start of processing for Analyze_iterator_Specification\n \n    begin\n@@ -1925,7 +1927,7 @@ package body Sem_Ch5 is\n \n         --  Do not perform this expansion in SPARK mode, since the formal\n         --  verification directly deals with the source form of the iterator.\n-        --  Ditto for ASIS and when expansion is disabled,, where the temporary\n+        --  Ditto for ASIS and when expansion is disabled, where the temporary\n         --  may hide the transformation of a selected component into a prefixed\n         --  function call, and references need to see the original expression.\n \n@@ -2001,7 +2003,7 @@ package body Sem_Ch5 is\n             --  to it. It has no effect on the generated code if no actions\n             --  are added to it (see Wrap_Transient_Declaration).\n \n-            if Expander_Active then\n+            if not Is_Array_Type (Typ) and then Expander_Active then\n                Establish_Transient_Scope (Name (Decl), Sec_Stack => True);\n             end if;\n "}]}