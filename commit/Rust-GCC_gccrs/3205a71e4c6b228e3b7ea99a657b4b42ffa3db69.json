{"sha": "3205a71e4c6b228e3b7ea99a657b4b42ffa3db69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzIwNWE3MWU0YzZiMjI4ZTNiN2VhOTlhNjU3YjRiNDJmZmEzZGI2OQ==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2004-03-04T05:49:06Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2004-03-04T05:49:06Z"}, "message": "re PR c/13728 (Duplicate parameter names not detected)\n\n\tPR 13728\n\t* c-decl.c (diagnose_mismatched_decls): Issue an error for two\n\tparameters with the same name, unless one is a forward decl.\n\tDo not issue a redundant-redeclaration warning for forward\n\tdecls of parameters.\n\t* gcc.dg/decl-4.c: New testcase.\n\nFrom-SVN: r78888", "tree": {"sha": "53b0c86b0cf1541d9e8b95a2eb630d9d8c0f69fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/53b0c86b0cf1541d9e8b95a2eb630d9d8c0f69fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69/comments", "author": null, "committer": null, "parents": [{"sha": "e8d8a0344bb901cfa7e19c4f7f85bed9f38dd1f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8d8a0344bb901cfa7e19c4f7f85bed9f38dd1f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8d8a0344bb901cfa7e19c4f7f85bed9f38dd1f8"}], "stats": {"total": 126, "additions": 81, "deletions": 45}, "files": [{"sha": "f1dd35f5dc74140d2d0cbf3ec4566991f818f394", "filename": "gcc/ChangeLog", "status": "modified", "additions": 23, "deletions": 15, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3205a71e4c6b228e3b7ea99a657b4b42ffa3db69", "patch": "@@ -1,3 +1,11 @@\n+2004-03-03  Zack Weinberg  <zack@codesourcery.com>\n+\n+\tPR 13728\n+\t* c-decl.c (diagnose_mismatched_decls): Issue an error for two\n+\tparameters with the same name, unless one is a forward decl.\n+\tDo not issue a redundant-redeclaration warning for forward\n+\tdecls of parameters.\n+\n 2004-03-04  David Edelsohn  <edelsohn@gnu.org>\n \n \t* doc/install.texi (*-ibm-aix*): Document use of Bash to speed up\n@@ -94,7 +102,7 @@\n 2004-03-03  Stuart Hastings  <stuart@apple.com>\n \n \t* gcc/config.gcc: Arrange for Darwin/x86 to build libgcc_eh.a.\n-\t\n+\n 2004-03-03  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \t* config/sparc/sparc.c (noov_compare64_op): Fix typo.\n@@ -389,10 +397,10 @@\n \n 2004-03-02  Richard Henderson  <rth@redhat.com>\n \n-        PR middle-end/11767\n-        * coverage.c (coverage_counter_ref): Set MEM_NOTRAP_P.\n-        * optabs.c (prepare_cmp_insn): Force trapping memories to registers\n-        before the compare, if flag_non_call_exceptions.\n+\tPR middle-end/11767\n+\t* coverage.c (coverage_counter_ref): Set MEM_NOTRAP_P.\n+\t* optabs.c (prepare_cmp_insn): Force trapping memories to registers\n+\tbefore the compare, if flag_non_call_exceptions.\n \n 2004-03-02  Richard Henderson  <rth@redhat.com>\n \n@@ -873,7 +881,7 @@\n \tenable_rtl_dump_file): Declare.\n \n 2004-02-27  Eric Botcazou  <ebotcazou@act-europe.fr>\n-            Roger Sayle  <roger@eyesopen.com>\n+\t    Roger Sayle  <roger@eyesopen.com>\n \n \t* fold-const.c (fold): Revert 2004-02-25 change.  Use the original\n \toperands to build a tree with swapped operands.\n@@ -1084,11 +1092,11 @@\n \n 2004-02-24  Aldy Hernandez  <aldyh@redhat.com>\n \n-        * config/rs6000/spe.md (spe_fix_truncsfsi2): Delete.\n-        (spe_fixuns_truncsfsi2): Delete.\n+\t* config/rs6000/spe.md (spe_fix_truncsfsi2): Delete.\n+\t(spe_fixuns_truncsfsi2): Delete.\n \n-        * config/rs6000/rs6000.md (fix_truncsfsi2): Delete.\n-        (fixuns_truncsfsi2): Delete.\n+\t* config/rs6000/rs6000.md (fix_truncsfsi2): Delete.\n+\t(fixuns_truncsfsi2): Delete.\n \n 2004-02-24  Josef Zlomek  <zlomekj@suse.cz>\n \n@@ -1578,7 +1586,7 @@\n \n \t* config/i386/i386.c: Rename pni to sse3.\n \t* config/i386/i386.h: Likewise.\n-        * config/i386/i386.md: Likewise.\n+\t* config/i386/i386.md: Likewise.\n \t* config/i386/pmmintrin.h: Likewise.\n \t* doc/extend.texi: Likewise.\n \t* doc/invoke.texi: Likewise.\n@@ -1628,7 +1636,7 @@\n \t(movdf_softfloat64):  Ditto.\n \n 2004-02-23  Fariborz Jahanian <fjahanian@apple.com>\n-        * config/rs6000/rs6000.c (function_arg): call to\n+\t* config/rs6000/rs6000.c (function_arg): call to\n \trs6000_mixed_function_arg for DFmode moved to allow\n \tnormal DFmode incoming register assignment.\n \n@@ -1668,7 +1676,7 @@\n \tTARGET_DEFAULT_SHORT_ENUMS.  Update the description.\n \n 2004-02-23  Eric Botcazou  <ebotcazou@libertysurf.fr>\n-            Falk Hueffner  <falk@debian.org>\n+\t    Falk Hueffner  <falk@debian.org>\n \n \tPR c/14188\n \t* builtins.c (expand_builtin_va_arg): Emit an informative message\n@@ -1810,7 +1818,7 @@\n \n 2004-02-20  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n-        PR c++/12007\n+\tPR c++/12007\n \t* dbxout.c (dbxout_parms): Check that DECL_RTL and DECL_INCOMING_RTL\n \tare set for parameters before outputing debugging information.\n \n@@ -1860,7 +1868,7 @@\n 2004-02-20  Matt Kraai  <kraai@alumni.cmu.edu>\n \n \t* doc/install.texi (Building the Ada compiler): Remove\n-        example.\n+\texample.\n \n 2004-02-20  James E Wilson  <wilson@specifixinc.com>\n "}, {"sha": "5a4a28fdcd5d43c9515d87407053e0cec1c8d9f7", "filename": "gcc/c-decl.c", "status": "modified", "additions": 18, "deletions": 5, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=3205a71e4c6b228e3b7ea99a657b4b42ffa3db69", "patch": "@@ -1211,8 +1211,18 @@ diagnose_mismatched_decls (tree newdecl, tree olddecl,\n \t    }\n \t}\n     }\n-  else /* VAR_DECL */\n+  else /* PARM_DECL, VAR_DECL */\n     {\n+      /* Redeclaration of a PARM_DECL is invalid unless this is the\n+\t real position of a forward-declared parameter (GCC extension).  */\n+      if (TREE_CODE (newdecl) == PARM_DECL\n+\t  && (!TREE_ASM_WRITTEN (olddecl) || TREE_ASM_WRITTEN (newdecl)))\n+\t{\n+\t  error (\"%Jredefinition of parameter '%D'\", newdecl, newdecl);\n+\t  locate_old_decl (olddecl, error);\n+\t  return false;\n+\t}\n+\n       /* These bits are only type qualifiers when applied to objects.  */\n       if (TREE_THIS_VOLATILE (newdecl) != TREE_THIS_VOLATILE (olddecl))\n \t{\n@@ -1241,10 +1251,13 @@ diagnose_mismatched_decls (tree newdecl, tree olddecl,\n       && warn_redundant_decls\n       /* Don't warn about a function declaration followed by a\n \t definition.  */\n-    && !(TREE_CODE (newdecl) == FUNCTION_DECL\n-\t && DECL_INITIAL (newdecl) && !DECL_INITIAL (olddecl))\n-    /* Don't warn about an extern followed by a definition.  */\n-    && !(DECL_EXTERNAL (olddecl) && !DECL_EXTERNAL (newdecl)))\n+      && !(TREE_CODE (newdecl) == FUNCTION_DECL\n+\t   && DECL_INITIAL (newdecl) && !DECL_INITIAL (olddecl))\n+      /* Don't warn about an extern followed by a definition.  */\n+      && !(DECL_EXTERNAL (olddecl) && !DECL_EXTERNAL (newdecl))\n+      /* Don't warn about forward parameter decls.  */\n+      && !(TREE_CODE (newdecl) == PARM_DECL\n+\t   && TREE_ASM_WRITTEN (olddecl) && !TREE_ASM_WRITTEN (newdecl)))\n     {\n       warning (\"%Jredundant redeclaration of '%D'\", newdecl, newdecl);\n       warned = true;"}, {"sha": "b0edee4d54a3238879ed42e01f957221cdb33fff", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 30, "deletions": 25, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3205a71e4c6b228e3b7ea99a657b4b42ffa3db69", "patch": "@@ -1,3 +1,8 @@\n+2004-03-03  Zack Weinberg  <zack@codesourcery.com>\n+\n+\tPR 13728\n+\t* gcc.dg/decl-4.c: New testcase.\n+\n 2004-03-03  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* gcc.dg/torture/builtin-explog-1.c (PREC): Make it the same\n@@ -23,7 +28,7 @@\n \n \tPR c++/14360\n \t* g++.old-deja/g++.ns/koenig5.C: Remove some error markers.\n-\t\n+\n \tPR c++/14361\n \t* g++.dg/parse/defarg7.C: New test.\n \n@@ -92,8 +97,8 @@\n \n 2004-02-26  Richard Henderson  <rth@redhat.com>\n \n-        * g++.dg/ext/attrib10.C: Mark for warning.\n-        * gcc.dg/attr-alias-1.c: New.\n+\t* g++.dg/ext/attrib10.C: Mark for warning.\n+\t* gcc.dg/attr-alias-1.c: New.\n \n 2004-02-26  Richard Henderson  <rth@redhat.com>\n \n@@ -105,28 +110,28 @@\n \t* lib/target-supports.exp (check-iconv-available): New function.\n \t* lib/gcc-dg.exp (dg-require-iconv): New function.\n \tUse above.\n-        * gcc.dg/charset: New directory.\n-        * gcc.dg/charset/charset.exp: New file.\n-        * gcc.dg/charset/asm1.c: Ditto.\n-        * gcc.dg/charset/asm2.c: Ditto.\n-        * gcc.dg/charset/asm3.c: Ditto.\n-        * gcc.dg/charset/asm4.c: Ditto.\n-        * gcc.dg/charset/asm5.c: Ditto.\n-        * gcc.dg/charset/attribute1.c: Ditto.\n-        * gcc.dg/charset/attribute2.c: Ditto.\n-        * gcc.dg/charset/string1.c: Ditto.\n-        * g++.dg/charset: New directory.\n-        * g++.dg/dg.exp: Add here. Special options.\n-        * g++.dg/charset/charset.exp: New file.\n-        * g++.dg/charset/asm1.c: Ditto.\n-        * g++.dg/charset/asm2.c: Ditto.\n-        * g++.dg/charset/asm3.c: Ditto.\n-        * g++.dg/charset/asm4.c: Ditto.\n-        * g++.dg/charset/attribute1.c: Ditto.\n-        * g++.dg/charset/attribute2.c: Ditto.\n-        * g++.dg/charset/extern1.cc: Ditto.\n-        * g++.dg/charset/extern2.cc: Ditto.\n-        * g++.dg/charset/string1.c: Ditto.\n+\t* gcc.dg/charset: New directory.\n+\t* gcc.dg/charset/charset.exp: New file.\n+\t* gcc.dg/charset/asm1.c: Ditto.\n+\t* gcc.dg/charset/asm2.c: Ditto.\n+\t* gcc.dg/charset/asm3.c: Ditto.\n+\t* gcc.dg/charset/asm4.c: Ditto.\n+\t* gcc.dg/charset/asm5.c: Ditto.\n+\t* gcc.dg/charset/attribute1.c: Ditto.\n+\t* gcc.dg/charset/attribute2.c: Ditto.\n+\t* gcc.dg/charset/string1.c: Ditto.\n+\t* g++.dg/charset: New directory.\n+\t* g++.dg/dg.exp: Add here. Special options.\n+\t* g++.dg/charset/charset.exp: New file.\n+\t* g++.dg/charset/asm1.c: Ditto.\n+\t* g++.dg/charset/asm2.c: Ditto.\n+\t* g++.dg/charset/asm3.c: Ditto.\n+\t* g++.dg/charset/asm4.c: Ditto.\n+\t* g++.dg/charset/attribute1.c: Ditto.\n+\t* g++.dg/charset/attribute2.c: Ditto.\n+\t* g++.dg/charset/extern1.cc: Ditto.\n+\t* g++.dg/charset/extern2.cc: Ditto.\n+\t* g++.dg/charset/string1.c: Ditto.\n \n 2004-02-26  Mark Mitchell  <mark@codesourcery.com>\n "}, {"sha": "acc7e77e2eabcc410c4a701feba1ec13160997b6", "filename": "gcc/testsuite/gcc.dg/decl-4.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69/gcc%2Ftestsuite%2Fgcc.dg%2Fdecl-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3205a71e4c6b228e3b7ea99a657b4b42ffa3db69/gcc%2Ftestsuite%2Fgcc.dg%2Fdecl-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdecl-4.c?ref=3205a71e4c6b228e3b7ea99a657b4b42ffa3db69", "patch": "@@ -0,0 +1,10 @@\n+/* Redeclaration of parameters is an error.  PR 13728.  */\n+/* { dg-do compile } */\n+\n+void f (int fred,\t/* { dg-error \"previous definition\" \"\" } */\n+\tint fred);\t/* { dg-error \"redefinition of parameter\" \"\" } */\n+\n+void f2 (int fred,\t/* { dg-error \"previous definition\" \"\" } */\n+\t int fred)\t/* { dg-error \"redefinition of parameter\" \"\" } */\n+{\n+}"}]}