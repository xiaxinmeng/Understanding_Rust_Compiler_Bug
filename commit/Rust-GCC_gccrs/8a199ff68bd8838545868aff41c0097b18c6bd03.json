{"sha": "8a199ff68bd8838545868aff41c0097b18c6bd03", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGExOTlmZjY4YmQ4ODM4NTQ1ODY4YWZmNDFjMDA5N2IxOGM2YmQwMw==", "commit": {"author": {"name": "Phil Edwards", "email": "pme@gcc.gnu.org", "date": "2003-07-20T09:40:28Z"}, "committer": {"name": "Phil Edwards", "email": "pme@gcc.gnu.org", "date": "2003-07-20T09:40:28Z"}, "message": "install-sh: Update to newer upstream versions (associated with aclocal 1.7).\n\n2003-07-20  Phil Edwards  <pme@gcc.gnu.org>\n\n\t* install-sh:  Update to newer upstream versions (associated with\n\taclocal 1.7).\n\t* mkinstalldirs:  Likewise.\n\t* missing:  Likewise, plus $1Help2man -> $1 typo fix.\n\nFrom-SVN: r69608", "tree": {"sha": "b3fb0059e13ac878884f3f2d3d46030d19f7831c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b3fb0059e13ac878884f3f2d3d46030d19f7831c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8a199ff68bd8838545868aff41c0097b18c6bd03", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a199ff68bd8838545868aff41c0097b18c6bd03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a199ff68bd8838545868aff41c0097b18c6bd03", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a199ff68bd8838545868aff41c0097b18c6bd03/comments", "author": null, "committer": null, "parents": [{"sha": "d38b3a8d94ae2bba14e95697f63b473f6816957d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d38b3a8d94ae2bba14e95697f63b473f6816957d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d38b3a8d94ae2bba14e95697f63b473f6816957d"}], "stats": {"total": 455, "additions": 363, "deletions": 92}, "files": [{"sha": "92d2b319a5e6eb3f3f05dbccb8d323c5b34ed51c", "filename": "ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a199ff68bd8838545868aff41c0097b18c6bd03/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a199ff68bd8838545868aff41c0097b18c6bd03/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=8a199ff68bd8838545868aff41c0097b18c6bd03", "patch": "@@ -1,3 +1,10 @@\n+2003-07-20  Phil Edwards  <pme@gcc.gnu.org>\n+\n+\t* install-sh:  Update to newer upstream versions (associated with\n+\taclocal 1.7).\n+\t* mkinstalldirs:  Likewise.\n+\t* missing:  Likewise, plus $1Help2man -> $1 typo fix.\n+\n 2003-07-16  Andrew Pinski  <pinskia@gcc.gnu.org>\n \n \t* MAINTAINERS: Move self from Bug database only accounts"}, {"sha": "0ec27bcd488da5cad6ead13d70accbdbc40d31ef", "filename": "install-sh", "status": "modified", "additions": 106, "deletions": 63, "changes": 169, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a199ff68bd8838545868aff41c0097b18c6bd03/install-sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a199ff68bd8838545868aff41c0097b18c6bd03/install-sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/install-sh?ref=8a199ff68bd8838545868aff41c0097b18c6bd03", "patch": "@@ -1,19 +1,37 @@\n #!/bin/sh\n #\n # install - install a program, script, or datafile\n-# This comes from X11R5 (mit/util/scripts/install.sh).\n #\n-# Copyright 1991 by the Massachusetts Institute of Technology\n+# This originates from X11R5 (mit/util/scripts/install.sh), which was\n+# later released in X11R6 (xc/config/util/install.sh) with the\n+# following copyright and license.\n #\n-# Permission to use, copy, modify, distribute, and sell this software and its\n-# documentation for any purpose is hereby granted without fee, provided that\n-# the above copyright notice appear in all copies and that both that\n-# copyright notice and this permission notice appear in supporting\n-# documentation, and that the name of M.I.T. not be used in advertising or\n-# publicity pertaining to distribution of the software without specific,\n-# written prior permission.  M.I.T. makes no representations about the\n-# suitability of this software for any purpose.  It is provided \"as is\"\n-# without express or implied warranty.\n+# Copyright (C) 1994 X Consortium\n+#\n+# Permission is hereby granted, free of charge, to any person obtaining a copy\n+# of this software and associated documentation files (the \"Software\"), to\n+# deal in the Software without restriction, including without limitation the\n+# rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n+# sell copies of the Software, and to permit persons to whom the Software is\n+# furnished to do so, subject to the following conditions:\n+#\n+# The above copyright notice and this permission notice shall be included in\n+# all copies or substantial portions of the Software.\n+#\n+# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n+# X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN\n+# AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNEC-\n+# TION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n+#\n+# Except as contained in this notice, the name of the X Consortium shall not\n+# be used in advertising or otherwise to promote the sale, use or other deal-\n+# ings in this Software without prior written authorization from the X Consor-\n+# tium.\n+#\n+#\n+# FSF changes to this file are in the public domain.\n #\n # Calling this script install-sh is preferred over install.sh, to prevent\n # `make' implicit rules from creating a file called install from it\n@@ -56,7 +74,7 @@ dir_arg=\"\"\n \n while [ x\"$1\" != x ]; do\n     case $1 in\n-\t-c) instcmd=\"$cpprog\"\n+\t-c) instcmd=$cpprog\n \t    shift\n \t    continue;;\n \n@@ -79,7 +97,7 @@ while [ x\"$1\" != x ]; do\n \t    shift\n \t    continue;;\n \n-\t-s) stripcmd=\"$stripprog\"\n+\t-s) stripcmd=$stripprog\n \t    shift\n \t    continue;;\n \n@@ -106,146 +124,171 @@ done\n \n if [ x\"$src\" = x ]\n then\n-\techo \"install:\tno input file specified\"\n+\techo \"$0: no input file specified\" >&2\n \texit 1\n else\n-\ttrue\n+\t:\n fi\n \n if [ x\"$dir_arg\" != x ]; then\n \tdst=$src\n \tsrc=\"\"\n-\t\n-\tif [ -d $dst ]; then\n+\n+\tif [ -d \"$dst\" ]; then\n \t\tinstcmd=:\n \t\tchmodcmd=\"\"\n \telse\n-\t\tinstcmd=mkdir\n+\t\tinstcmd=$mkdirprog\n \tfi\n else\n \n # Waiting for this to be detected by the \"$instcmd $src $dsttmp\" command\n-# might cause directories to be created, which would be especially bad \n+# might cause directories to be created, which would be especially bad\n # if $src (and thus $dsttmp) contains '*'.\n \n-\tif [ -f $src -o -d $src ]\n+\tif [ -f \"$src\" ] || [ -d \"$src\" ]\n \tthen\n-\t\ttrue\n+\t\t:\n \telse\n-\t\techo \"install:  $src does not exist\"\n+\t\techo \"$0: $src does not exist\" >&2\n \t\texit 1\n \tfi\n-\t\n+\n \tif [ x\"$dst\" = x ]\n \tthen\n-\t\techo \"install:\tno destination specified\"\n+\t\techo \"$0: no destination specified\" >&2\n \t\texit 1\n \telse\n-\t\ttrue\n+\t\t:\n \tfi\n \n # If destination is a directory, append the input filename; if your system\n # does not like double slashes in filenames, you may need to add some logic\n \n-\tif [ -d $dst ]\n+\tif [ -d \"$dst\" ]\n \tthen\n-\t\tdst=\"$dst\"/`basename $src`\n+\t\tdst=$dst/`basename \"$src\"`\n \telse\n-\t\ttrue\n+\t\t:\n \tfi\n fi\n \n ## this sed command emulates the dirname command\n-dstdir=`echo $dst | sed -e 's,[^/]*$,,;s,/$,,;s,^$,.,'`\n+dstdir=`echo \"$dst\" | sed -e 's,[^/]*$,,;s,/$,,;s,^$,.,'`\n \n # Make sure that the destination directory exists.\n #  this part is taken from Noah Friedman's mkinstalldirs script\n \n # Skip lots of stat calls in the usual case.\n if [ ! -d \"$dstdir\" ]; then\n-defaultIFS='\t\n-'\n-IFS=\"${IFS-${defaultIFS}}\"\n+defaultIFS='\n+\t'\n+IFS=\"${IFS-$defaultIFS}\"\n \n-oIFS=\"${IFS}\"\n+oIFS=$IFS\n # Some sh's can't handle IFS=/ for some reason.\n IFS='%'\n-set - `echo ${dstdir} | sed -e 's@/@%@g' -e 's@^%@/@'`\n-IFS=\"${oIFS}\"\n+set - `echo \"$dstdir\" | sed -e 's@/@%@g' -e 's@^%@/@'`\n+IFS=$oIFS\n \n pathcomp=''\n \n while [ $# -ne 0 ] ; do\n-\tpathcomp=\"${pathcomp}${1}\"\n+\tpathcomp=$pathcomp$1\n \tshift\n \n-\tif [ ! -d \"${pathcomp}\" ] ;\n+\tif [ ! -d \"$pathcomp\" ] ;\n         then\n-\t\t$mkdirprog \"${pathcomp}\"\n+\t\t$mkdirprog \"$pathcomp\"\n \telse\n-\t\ttrue\n+\t\t:\n \tfi\n \n-\tpathcomp=\"${pathcomp}/\"\n+\tpathcomp=$pathcomp/\n done\n fi\n \n if [ x\"$dir_arg\" != x ]\n then\n-\t$doit $instcmd $dst &&\n+\t$doit $instcmd \"$dst\" &&\n \n-\tif [ x\"$chowncmd\" != x ]; then $doit $chowncmd $dst; else true ; fi &&\n-\tif [ x\"$chgrpcmd\" != x ]; then $doit $chgrpcmd $dst; else true ; fi &&\n-\tif [ x\"$stripcmd\" != x ]; then $doit $stripcmd $dst; else true ; fi &&\n-\tif [ x\"$chmodcmd\" != x ]; then $doit $chmodcmd $dst; else true ; fi\n+\tif [ x\"$chowncmd\" != x ]; then $doit $chowncmd \"$dst\"; else : ; fi &&\n+\tif [ x\"$chgrpcmd\" != x ]; then $doit $chgrpcmd \"$dst\"; else : ; fi &&\n+\tif [ x\"$stripcmd\" != x ]; then $doit $stripcmd \"$dst\"; else : ; fi &&\n+\tif [ x\"$chmodcmd\" != x ]; then $doit $chmodcmd \"$dst\"; else : ; fi\n else\n \n # If we're going to rename the final executable, determine the name now.\n \n-\tif [ x\"$transformarg\" = x ] \n+\tif [ x\"$transformarg\" = x ]\n \tthen\n-\t\tdstfile=`basename $dst`\n+\t\tdstfile=`basename \"$dst\"`\n \telse\n-\t\tdstfile=`basename $dst $transformbasename | \n+\t\tdstfile=`basename \"$dst\" $transformbasename |\n \t\t\tsed $transformarg`$transformbasename\n \tfi\n \n # don't allow the sed command to completely eliminate the filename\n \n-\tif [ x\"$dstfile\" = x ] \n+\tif [ x\"$dstfile\" = x ]\n \tthen\n-\t\tdstfile=`basename $dst`\n+\t\tdstfile=`basename \"$dst\"`\n \telse\n-\t\ttrue\n+\t\t:\n \tfi\n \n-# Make a temp file name in the proper directory.\n+# Make a couple of temp file names in the proper directory.\n \n-\tdsttmp=$dstdir/_inst.$$_\n+\tdsttmp=$dstdir/#inst.$$#\n+\trmtmp=$dstdir/#rm.$$#\n \n-# Move or copy the file name to the temp name\n+# Trap to clean up temp files at exit.\n \n-\t$doit $instcmd $src $dsttmp &&\n+\ttrap 'status=$?; rm -f \"$dsttmp\" \"$rmtmp\" && exit $status' 0\n+\ttrap '(exit $?); exit' 1 2 13 15\n \n-\ttrap \"rm -f ${dsttmp}\" 0 &&\n+# Move or copy the file name to the temp name\n+\n+\t$doit $instcmd \"$src\" \"$dsttmp\" &&\n \n # and set any options; do chmod last to preserve setuid bits\n \n # If any of these fail, we abort the whole thing.  If we want to\n # ignore errors from any of these, just make sure not to ignore\n # errors from the above \"$doit $instcmd $src $dsttmp\" command.\n \n-\tif [ x\"$chowncmd\" != x ]; then $doit $chowncmd $dsttmp; else true;fi &&\n-\tif [ x\"$chgrpcmd\" != x ]; then $doit $chgrpcmd $dsttmp; else true;fi &&\n-\tif [ x\"$stripcmd\" != x ]; then $doit $stripcmd $dsttmp; else true;fi &&\n-\tif [ x\"$chmodcmd\" != x ]; then $doit $chmodcmd $dsttmp; else true;fi &&\n+\tif [ x\"$chowncmd\" != x ]; then $doit $chowncmd \"$dsttmp\"; else :;fi &&\n+\tif [ x\"$chgrpcmd\" != x ]; then $doit $chgrpcmd \"$dsttmp\"; else :;fi &&\n+\tif [ x\"$stripcmd\" != x ]; then $doit $stripcmd \"$dsttmp\"; else :;fi &&\n+\tif [ x\"$chmodcmd\" != x ]; then $doit $chmodcmd \"$dsttmp\"; else :;fi &&\n+\n+# Now remove or move aside any old file at destination location.  We try this\n+# two ways since rm can't unlink itself on some systems and the destination\n+# file might be busy for other reasons.  In this case, the final cleanup\n+# might fail but the new file should still install successfully.\n+\n+{\n+\tif [ -f \"$dstdir/$dstfile\" ]\n+\tthen\n+\t\t$doit $rmcmd -f \"$dstdir/$dstfile\" 2>/dev/null ||\n+\t\t$doit $mvcmd -f \"$dstdir/$dstfile\" \"$rmtmp\" 2>/dev/null ||\n+\t\t{\n+\t\t  echo \"$0: cannot unlink or rename $dstdir/$dstfile\" >&2\n+\t\t  (exit 1); exit\n+\t\t}\n+\telse\n+\t\t:\n+\tfi\n+} &&\n \n # Now rename the file to the real destination.\n \n-\t$doit $rmcmd -f $dstdir/$dstfile &&\n-\t$doit $mvcmd $dsttmp $dstdir/$dstfile \n+\t$doit $mvcmd \"$dsttmp\" \"$dstdir/$dstfile\"\n \n fi &&\n \n+# The final little trick to \"correctly\" pass the exit status to the exit trap.\n \n-exit 0\n+{\n+\t(exit 0); exit\n+}"}, {"sha": "25c96676defa4b1144c31e2879cf784ff9b4de24", "filename": "missing", "status": "modified", "additions": 156, "deletions": 10, "changes": 166, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a199ff68bd8838545868aff41c0097b18c6bd03/missing", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a199ff68bd8838545868aff41c0097b18c6bd03/missing", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/missing?ref=8a199ff68bd8838545868aff41c0097b18c6bd03", "patch": "@@ -1,7 +1,7 @@\n #! /bin/sh\n # Common stub for a few missing GNU programs while installing.\n-# Copyright (C) 1996, 1997 Free Software Foundation, Inc.\n-# Franc,ois Pinard <pinard@iro.umontreal.ca>, 1996.\n+# Copyright (C) 1996, 1997, 1999, 2000, 2002 Free Software Foundation, Inc.\n+# Originally by Fran,cois Pinard <pinard@iro.umontreal.ca>, 1996.\n \n # This program is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -18,11 +18,37 @@\n # Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n # 02111-1307, USA.\n \n+# As a special exception to the GNU General Public License, if you\n+# distribute this file as part of a program that contains a\n+# configuration script generated by Autoconf, you may include it under\n+# the same distribution terms that you use for the rest of that program.\n+\n if test $# -eq 0; then\n   echo 1>&2 \"Try \\`$0 --help' for more information\"\n   exit 1\n fi\n \n+run=:\n+\n+# In the cases where this matters, `missing' is being run in the\n+# srcdir already.\n+if test -f configure.ac; then\n+  configure_ac=configure.ac\n+else\n+  configure_ac=configure.in\n+fi\n+\n+case \"$1\" in\n+--run)\n+  # Try to run requested program, and just exit if it succeeds.\n+  run=\n+  shift\n+  \"$@\" && exit 0\n+  ;;\n+esac\n+\n+# If it does not exist, or fails to run (possibly an outdated version),\n+# try to emulate it.\n case \"$1\" in\n \n   -h|--h|--he|--hel|--help)\n@@ -35,6 +61,7 @@ error status if there is no known handling for PROGRAM.\n Options:\n   -h, --help      display this help and exit\n   -v, --version   output version information and exit\n+  --run           try to run the given command, and emulate it if it fails\n \n Supported PROGRAM values:\n   aclocal      touch file \\`aclocal.m4'\n@@ -43,13 +70,15 @@ Supported PROGRAM values:\n   automake     touch all \\`Makefile.in' files\n   bison        create \\`y.tab.[ch]', if possible, from existing .[ch]\n   flex         create \\`lex.yy.c', if possible, from existing .c\n+  help2man     touch the output file\n   lex          create \\`lex.yy.c', if possible, from existing .c\n   makeinfo     touch the output file\n+  tar          try tar, gnutar, gtar, then tar without non-portable flags\n   yacc         create \\`y.tab.[ch]', if possible, from existing .[ch]\"\n     ;;\n \n   -v|--v|--ve|--ver|--vers|--versi|--versio|--version)\n-    echo \"missing - GNU libit 0.0\"\n+    echo \"missing 0.4 - GNU automake\"\n     ;;\n \n   -*)\n@@ -58,31 +87,46 @@ Supported PROGRAM values:\n     exit 1\n     ;;\n \n-  aclocal)\n+  aclocal*)\n+    if test -z \"$run\" && ($1 --version) > /dev/null 2>&1; then\n+       # We have it, but it failed.\n+       exit 1\n+    fi\n+\n     echo 1>&2 \"\\\n WARNING: \\`$1' is missing on your system.  You should only need it if\n-         you modified \\`acinclude.m4' or \\`configure.in'.  You might want\n+         you modified \\`acinclude.m4' or \\`${configure_ac}'.  You might want\n          to install the \\`Automake' and \\`Perl' packages.  Grab them from\n          any GNU archive site.\"\n     touch aclocal.m4\n     ;;\n \n   autoconf)\n+    if test -z \"$run\" && ($1 --version) > /dev/null 2>&1; then\n+       # We have it, but it failed.\n+       exit 1\n+    fi\n+\n     echo 1>&2 \"\\\n WARNING: \\`$1' is missing on your system.  You should only need it if\n-         you modified \\`configure.in'.  You might want to install the\n+         you modified \\`${configure_ac}'.  You might want to install the\n          \\`Autoconf' and \\`GNU m4' packages.  Grab them from any GNU\n          archive site.\"\n     touch configure\n     ;;\n \n   autoheader)\n+    if test -z \"$run\" && ($1 --version) > /dev/null 2>&1; then\n+       # We have it, but it failed.\n+       exit 1\n+    fi\n+\n     echo 1>&2 \"\\\n WARNING: \\`$1' is missing on your system.  You should only need it if\n-         you modified \\`acconfig.h' or \\`configure.in'.  You might want\n+         you modified \\`acconfig.h' or \\`${configure_ac}'.  You might want\n          to install the \\`Autoconf' and \\`GNU m4' packages.  Grab them\n          from any GNU archive site.\"\n-    files=`sed -n 's/^[ ]*A[CM]_CONFIG_HEADER(\\([^)]*\\)).*/\\1/p' configure.in`\n+    files=`sed -n 's/^[ ]*A[CM]_CONFIG_HEADER(\\([^)]*\\)).*/\\1/p' ${configure_ac}`\n     test -z \"$files\" && files=\"config.h\"\n     touch_files=\n     for f in $files; do\n@@ -95,17 +139,50 @@ WARNING: \\`$1' is missing on your system.  You should only need it if\n     touch $touch_files\n     ;;\n \n-  automake)\n+  automake*)\n+    if test -z \"$run\" && ($1 --version) > /dev/null 2>&1; then\n+       # We have it, but it failed.\n+       exit 1\n+    fi\n+\n     echo 1>&2 \"\\\n WARNING: \\`$1' is missing on your system.  You should only need it if\n-         you modified \\`Makefile.am', \\`acinclude.m4' or \\`configure.in'.\n+         you modified \\`Makefile.am', \\`acinclude.m4' or \\`${configure_ac}'.\n          You might want to install the \\`Automake' and \\`Perl' packages.\n          Grab them from any GNU archive site.\"\n     find . -type f -name Makefile.am -print |\n \t   sed 's/\\.am$/.in/' |\n \t   while read f; do touch \"$f\"; done\n     ;;\n \n+  autom4te)\n+    if test -z \"$run\" && ($1 --version) > /dev/null 2>&1; then\n+       # We have it, but it failed.\n+       exit 1\n+    fi\n+\n+    echo 1>&2 \"\\\n+WARNING: \\`$1' is needed, and you do not seem to have it handy on your\n+         system.  You might have modified some files without having the\n+         proper tools for further handling them.\n+         You can get \\`$1' as part of \\`Autoconf' from any GNU\n+         archive site.\"\n+\n+    file=`echo \"$*\" | sed -n 's/.*--output[ =]*\\([^ ]*\\).*/\\1/p'`\n+    test -z \"$file\" && file=`echo \"$*\" | sed -n 's/.*-o[ ]*\\([^ ]*\\).*/\\1/p'`\n+    if test -f \"$file\"; then\n+\ttouch $file\n+    else\n+\ttest -z \"$file\" || exec >$file\n+\techo \"#! /bin/sh\"\n+\techo \"# Created by GNU Automake missing as a replacement of\"\n+\techo \"#  $ $@\"\n+\techo \"exit 0\"\n+\tchmod +x $file\n+\texit 1\n+    fi\n+    ;;\n+\n   bison|yacc)\n     echo 1>&2 \"\\\n WARNING: \\`$1' is missing on your system.  You should only need it if\n@@ -159,7 +236,37 @@ WARNING: \\`$1' is missing on your system.  You should only need it if\n     fi\n     ;;\n \n+  help2man)\n+    if test -z \"$run\" && ($1 --version) > /dev/null 2>&1; then\n+       # We have it, but it failed.\n+       exit 1\n+    fi\n+\n+    echo 1>&2 \"\\\n+WARNING: \\`$1' is missing on your system.  You should only need it if\n+\t you modified a dependency of a manual page.  You may need the\n+\t \\`Help2man' package in order for those modifications to take\n+\t effect.  You can get \\`Help2man' from any GNU archive site.\"\n+\n+    file=`echo \"$*\" | sed -n 's/.*-o \\([^ ]*\\).*/\\1/p'`\n+    if test -z \"$file\"; then\n+\tfile=`echo \"$*\" | sed -n 's/.*--output=\\([^ ]*\\).*/\\1/p'`\n+    fi\n+    if [ -f \"$file\" ]; then\n+\ttouch $file\n+    else\n+\ttest -z \"$file\" || exec >$file\n+\techo \".ab help2man is required to generate this page\"\n+\texit 1\n+    fi\n+    ;;\n+\n   makeinfo)\n+    if test -z \"$run\" && (makeinfo --version) > /dev/null 2>&1; then\n+       # We have makeinfo, but it failed.\n+       exit 1\n+    fi\n+\n     echo 1>&2 \"\\\n WARNING: \\`$1' is missing on your system.  You should only need it if\n          you modified a \\`.texi' or \\`.texinfo' file, or any other file\n@@ -175,6 +282,45 @@ WARNING: \\`$1' is missing on your system.  You should only need it if\n     touch $file\n     ;;\n \n+  tar)\n+    shift\n+    if test -n \"$run\"; then\n+      echo 1>&2 \"ERROR: \\`tar' requires --run\"\n+      exit 1\n+    fi\n+\n+    # We have already tried tar in the generic part.\n+    # Look for gnutar/gtar before invocation to avoid ugly error\n+    # messages.\n+    if (gnutar --version > /dev/null 2>&1); then\n+       gnutar \"$@\" && exit 0\n+    fi\n+    if (gtar --version > /dev/null 2>&1); then\n+       gtar \"$@\" && exit 0\n+    fi\n+    firstarg=\"$1\"\n+    if shift; then\n+\tcase \"$firstarg\" in\n+\t*o*)\n+\t    firstarg=`echo \"$firstarg\" | sed s/o//`\n+\t    tar \"$firstarg\" \"$@\" && exit 0\n+\t    ;;\n+\tesac\n+\tcase \"$firstarg\" in\n+\t*h*)\n+\t    firstarg=`echo \"$firstarg\" | sed s/h//`\n+\t    tar \"$firstarg\" \"$@\" && exit 0\n+\t    ;;\n+\tesac\n+    fi\n+\n+    echo 1>&2 \"\\\n+WARNING: I can't seem to be able to run \\`tar' with the given arguments.\n+         You may want to install GNU tar or Free paxutils, or check the\n+         command line arguments.\"\n+    exit 1\n+    ;;\n+\n   *)\n     echo 1>&2 \"\\\n WARNING: \\`$1' is needed, and you do not seem to have it handy on your"}, {"sha": "d2d5f21b611235316317197d3a32c2dff5897a6f", "filename": "mkinstalldirs", "status": "modified", "additions": 94, "deletions": 19, "changes": 113, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a199ff68bd8838545868aff41c0097b18c6bd03/mkinstalldirs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a199ff68bd8838545868aff41c0097b18c6bd03/mkinstalldirs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/mkinstalldirs?ref=8a199ff68bd8838545868aff41c0097b18c6bd03", "patch": "@@ -2,35 +2,110 @@\n # mkinstalldirs --- make directory hierarchy\n # Author: Noah Friedman <friedman@prep.ai.mit.edu>\n # Created: 1993-05-16\n-# Last modified: 1994-03-25\n # Public domain\n \n errstatus=0\n+dirmode=\"\"\n \n-for file in ${1+\"$@\"} ; do \n-   set fnord `echo \":$file\" | sed -ne 's/^:\\//#/;s/^://;s/\\// /g;s/^#/\\//;p'`\n-   shift\n+usage=\"\\\n+Usage: mkinstalldirs [-h] [--help] [-m mode] dir ...\"\n \n-   pathcomp=\n-   for d in ${1+\"$@\"} ; do\n-     pathcomp=\"$pathcomp$d\"\n-     case \"$pathcomp\" in\n-       -* ) pathcomp=./$pathcomp ;;\n-     esac\n+# process command line arguments\n+while test $# -gt 0 ; do\n+  case $1 in\n+    -h | --help | --h*)         # -h for help\n+      echo \"$usage\" 1>&2\n+      exit 0\n+      ;;\n+    -m)                         # -m PERM arg\n+      shift\n+      test $# -eq 0 && { echo \"$usage\" 1>&2; exit 1; }\n+      dirmode=$1\n+      shift\n+      ;;\n+    --)                         # stop option processing\n+      shift\n+      break\n+      ;;\n+    -*)                         # unknown option\n+      echo \"$usage\" 1>&2\n+      exit 1\n+      ;;\n+    *)                          # first non-opt arg\n+      break\n+      ;;\n+  esac\n+done\n+\n+for file\n+do\n+  if test -d \"$file\"; then\n+    shift\n+  else\n+    break\n+  fi\n+done\n+\n+case $# in\n+  0) exit 0 ;;\n+esac\n+\n+case $dirmode in\n+  '')\n+    if mkdir -p -- . 2>/dev/null; then\n+      echo \"mkdir -p -- $*\"\n+      exec mkdir -p -- \"$@\"\n+    fi\n+    ;;\n+  *)\n+    if mkdir -m \"$dirmode\" -p -- . 2>/dev/null; then\n+      echo \"mkdir -m $dirmode -p -- $*\"\n+      exec mkdir -m \"$dirmode\" -p -- \"$@\"\n+    fi\n+    ;;\n+esac\n+\n+for file\n+do\n+  set fnord `echo \":$file\" | sed -ne 's/^:\\//#/;s/^://;s/\\// /g;s/^#/\\//;p'`\n+  shift\n+\n+  pathcomp=\n+  for d\n+  do\n+    pathcomp=\"$pathcomp$d\"\n+    case $pathcomp in\n+      -*) pathcomp=./$pathcomp ;;\n+    esac\n+\n+    if test ! -d \"$pathcomp\"; then\n+      echo \"mkdir $pathcomp\"\n+\n+      mkdir \"$pathcomp\" || lasterr=$?\n \n-     if test ! -d \"$pathcomp\"; then\n-        echo \"mkdir $pathcomp\" 1>&2\n-        mkdir \"$pathcomp\" > /dev/null 2>&1 || lasterr=$?\n-     fi\n+      if test ! -d \"$pathcomp\"; then\n+  \terrstatus=$lasterr\n+      else\n+  \tif test ! -z \"$dirmode\"; then\n+\t  echo \"chmod $dirmode $pathcomp\"\n+    \t  lasterr=\"\"\n+  \t  chmod \"$dirmode\" \"$pathcomp\" || lasterr=$?\n \n-     if test ! -d \"$pathcomp\"; then\n-\terrstatus=$lasterr\n-     fi\n+  \t  if test ! -z \"$lasterr\"; then\n+  \t    errstatus=$lasterr\n+  \t  fi\n+  \tfi\n+      fi\n+    fi\n \n-     pathcomp=\"$pathcomp/\"\n-   done\n+    pathcomp=\"$pathcomp/\"\n+  done\n done\n \n exit $errstatus\n \n+# Local Variables:\n+# mode: shell-script\n+# sh-indentation: 2\n+# End:\n # mkinstalldirs ends here"}]}