{"sha": "905319d95e57f935e3f7fab102901334ee0afa02", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTA1MzE5ZDk1ZTU3ZjkzNWUzZjdmYWIxMDI5MDEzMzRlZTBhZmEwMg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2008-08-12T19:38:02Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-08-12T19:38:02Z"}, "message": "re PR c++/37087 (Segfault on compiling template defined in wrong namespace.)\n\n/cp\n2008-08-12  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/37087\n\t* parser.c (cp_parser_class_head): Early return error_mark_node in\n\tcase of global qualification of class name or qualified name that\n\tdoes not name a class.\n\n/testsuite\n2008-08-12  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/37087\n\t* g++.dg/template/crash80.C: New.\n\t* g++.old-deja/g++.other/decl5.C: Adjust.\n\nFrom-SVN: r139034", "tree": {"sha": "f5ba16fa5d24529bdc3f1e9c02895e3b3e7ea501", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f5ba16fa5d24529bdc3f1e9c02895e3b3e7ea501"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/905319d95e57f935e3f7fab102901334ee0afa02", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/905319d95e57f935e3f7fab102901334ee0afa02", "html_url": "https://github.com/Rust-GCC/gccrs/commit/905319d95e57f935e3f7fab102901334ee0afa02", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/905319d95e57f935e3f7fab102901334ee0afa02/comments", "author": null, "committer": null, "parents": [{"sha": "4d2b059d5e51c6cd6cca3cc775268039657d3317", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d2b059d5e51c6cd6cca3cc775268039657d3317", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d2b059d5e51c6cd6cca3cc775268039657d3317"}], "stats": {"total": 40, "additions": 34, "deletions": 6}, "files": [{"sha": "00b3613802d29ff469a3ebb01524a11c8983f94e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/905319d95e57f935e3f7fab102901334ee0afa02/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/905319d95e57f935e3f7fab102901334ee0afa02/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=905319d95e57f935e3f7fab102901334ee0afa02", "patch": "@@ -1,3 +1,10 @@\n+2008-08-12  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/37087\n+\t* parser.c (cp_parser_class_head): Early return error_mark_node in\n+\tcase of global qualification of class name or qualified name that\n+\tdoes not name a class.\n+\n 2008-08-09  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n \n \tPR c++/12242"}, {"sha": "fd4e1bbbe7b7d5a1888943feaa7f082f696d1f4b", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/905319d95e57f935e3f7fab102901334ee0afa02/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/905319d95e57f935e3f7fab102901334ee0afa02/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=905319d95e57f935e3f7fab102901334ee0afa02", "patch": "@@ -14981,11 +14981,17 @@ cp_parser_class_head (cp_parser* parser,\n   cp_parser_commit_to_tentative_parse (parser);\n   /* Issue the error about the overly-qualified name now.  */\n   if (qualified_p)\n-    cp_parser_error (parser,\n-\t\t     \"global qualification of class name is invalid\");\n+    {\n+      cp_parser_error (parser,\n+\t\t       \"global qualification of class name is invalid\");\n+      return error_mark_node;\n+    }\n   else if (invalid_nested_name_p)\n-    cp_parser_error (parser,\n-\t\t     \"qualified name does not name a class\");\n+    {\n+      cp_parser_error (parser,\n+\t\t       \"qualified name does not name a class\");\n+      return error_mark_node;\n+    }\n   else if (nested_name_specifier)\n     {\n       tree scope;"}, {"sha": "8399de6d97909341b3205bf8120883503531e598", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/905319d95e57f935e3f7fab102901334ee0afa02/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/905319d95e57f935e3f7fab102901334ee0afa02/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=905319d95e57f935e3f7fab102901334ee0afa02", "patch": "@@ -1,3 +1,9 @@\n+2008-08-12  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/37087\n+\t* g++.dg/template/crash80.C: New.\n+\t* g++.old-deja/g++.other/decl5.C: Adjust.\n+\n 2008-08-12  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/37014"}, {"sha": "ed462ac9d19e488632e712de39f63780e07cf1b7", "filename": "gcc/testsuite/g++.dg/template/crash80.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/905319d95e57f935e3f7fab102901334ee0afa02/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash80.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/905319d95e57f935e3f7fab102901334ee0afa02/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash80.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash80.C?ref=905319d95e57f935e3f7fab102901334ee0afa02", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/37087\n+\n+namespace a {\n+  template <typename T> class Foo;\n+}\n+\n+namespace b {\n+  template <> class ::a::Foo<double> {}; // { dg-error \"error: global qualification of class name is invalid\" }\n+}"}, {"sha": "62a18e5822f7f374fd7aa51fe07b08a09b251d08", "filename": "gcc/testsuite/g++.old-deja/g++.other/decl5.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/905319d95e57f935e3f7fab102901334ee0afa02/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fdecl5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/905319d95e57f935e3f7fab102901334ee0afa02/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fdecl5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fdecl5.C?ref=905319d95e57f935e3f7fab102901334ee0afa02", "patch": "@@ -16,7 +16,7 @@ struct A {\n   int m;\n   };\n   struct Z;\n-  expand me;\n+  expand me;          // { dg-error \"\" } not name a type\n   void foo(struct A::e);\n   void foo(struct A::z);  // { dg-warning \"\" } extra qualification\n };\n@@ -71,7 +71,7 @@ namespace NMS\n   };\n }\n \n-NMS::D thing;\n+NMS::D thing;         // { dg-error \"\" } not name a type\n void NMS::fn()\n {\n   i = 3;"}]}