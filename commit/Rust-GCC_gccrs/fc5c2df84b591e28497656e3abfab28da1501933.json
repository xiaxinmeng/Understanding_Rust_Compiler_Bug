{"sha": "fc5c2df84b591e28497656e3abfab28da1501933", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmM1YzJkZjg0YjU5MWUyODQ5NzY1NmUzYWJmYWIyOGRhMTUwMTkzMw==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-11-30T23:10:14Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-11-30T23:10:14Z"}, "message": "(regexp.h): Don't add a getrnge declaration if a conflicting\ndeclaration is already present.\n\nFrom-SVN: r2823", "tree": {"sha": "6197405d2be8daf64bf321d1ce047f995afbe7e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6197405d2be8daf64bf321d1ce047f995afbe7e5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fc5c2df84b591e28497656e3abfab28da1501933", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc5c2df84b591e28497656e3abfab28da1501933", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc5c2df84b591e28497656e3abfab28da1501933", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc5c2df84b591e28497656e3abfab28da1501933/comments", "author": null, "committer": null, "parents": [{"sha": "30c08fcc6b8b6823b156b1b4b23420b8b2715152", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30c08fcc6b8b6823b156b1b4b23420b8b2715152", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30c08fcc6b8b6823b156b1b4b23420b8b2715152"}], "stats": {"total": 30, "additions": 19, "deletions": 11}, "files": [{"sha": "b96b3def03f42165624f38703ea40908c80778cd", "filename": "gcc/fixinc.svr4", "status": "modified", "additions": 19, "deletions": 11, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc5c2df84b591e28497656e3abfab28da1501933/gcc%2Ffixinc.svr4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc5c2df84b591e28497656e3abfab28da1501933/gcc%2Ffixinc.svr4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc.svr4?ref=fc5c2df84b591e28497656e3abfab28da1501933", "patch": "@@ -467,6 +467,10 @@ fi\n \n # Add a `static' declaration of `getrnge' into <regexp.h>.\n \n+# Don't do this if there is already a `static void getrnge' declaration\n+# present, since this would cause a redeclaration error.  Solaris 2.x has\n+# such a declaration.\n+\n file=regexp.h\n base=`basename $file`\n if [ -r ${LIB}/$file ]; then\n@@ -480,22 +484,26 @@ else\n fi\n if [ \\! -z \"$file_to_fix\" ]; then\n   echo Checking $file_to_fix\n-  cp $file_to_fix /tmp/$base\n-  chmod +w /tmp/$base\n-  ex /tmp/$base <<EOF\n-  /^static int[ \t]*size;/c\n+  if grep \"static void getrnge\" $file_to_fix > /dev/null; then\n+    true\n+  else\n+    cp $file_to_fix /tmp/$base\n+    chmod +w /tmp/$base\n+    ex /tmp/$base <<EOF\n+    /^static int[ \t]*size;/c\n static int\tsize ;\n \n static int getrnge ();\n .\n-  wq\n+    wq\n EOF\n-  if cmp $file_to_fix /tmp/$base >/dev/null 2>&1; then \\\n-    echo No change needed in $file_to_fix\n-  else\n-    echo Fixed $file_to_fix\n-    rm -f ${LIB}/$file\n-    cp /tmp/$base ${LIB}/$file\n+    if cmp $file_to_fix /tmp/$base >/dev/null 2>&1; then \\\n+      No change needed in $file_to_fix\n+    else\n+      echo Fixed $file_to_fix\n+      rm -f ${LIB}/$file\n+      cp /tmp/$base ${LIB}/$file\n+    fi\n   fi\n   rm -f /tmp/$base\n fi"}]}