{"sha": "040f69ebaac3cb2fe8b26ff736d5885db4f16f6b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDQwZjY5ZWJhYWMzY2IyZmU4YjI2ZmY3MzZkNTg4NWRiNGYxNmY2Yg==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel1@de.ibm.com", "date": "2007-03-29T06:57:42Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2007-03-29T06:57:42Z"}, "message": "regmove.c (optimize_reg_copy_1): Don't perform DEST->SRC repair action if SRC->DEST replacement failed anyway.\n\n2007-03-29  Andreas Krebbel  <krebbel1@de.ibm.com>\n\n\t* regmove.c (optimize_reg_copy_1): Don't perform DEST->SRC repair action if\n\tSRC->DEST replacement failed anyway.\n\nFrom-SVN: r123323", "tree": {"sha": "a9b8896101a46f709414a0439dbbf005f2610a95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a9b8896101a46f709414a0439dbbf005f2610a95"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/040f69ebaac3cb2fe8b26ff736d5885db4f16f6b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/040f69ebaac3cb2fe8b26ff736d5885db4f16f6b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/040f69ebaac3cb2fe8b26ff736d5885db4f16f6b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/040f69ebaac3cb2fe8b26ff736d5885db4f16f6b/comments", "author": null, "committer": null, "parents": [{"sha": "4beb5c4bd1e60a4bd7549795b39aa7ea16302b3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4beb5c4bd1e60a4bd7549795b39aa7ea16302b3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4beb5c4bd1e60a4bd7549795b39aa7ea16302b3d"}], "stats": {"total": 21, "additions": 13, "deletions": 8}, "files": [{"sha": "c06e792f4bdbc44043e6b31eac72d193517eed55", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/040f69ebaac3cb2fe8b26ff736d5885db4f16f6b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/040f69ebaac3cb2fe8b26ff736d5885db4f16f6b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=040f69ebaac3cb2fe8b26ff736d5885db4f16f6b", "patch": "@@ -1,3 +1,8 @@\n+2007-03-29  Andreas Krebbel  <krebbel1@de.ibm.com>\n+\n+\t* regmove.c (optimize_reg_copy_1): Don't perform DEST->SRC repair action if\n+\tSRC->DEST replacement failed anyway.\n+\n 2007-03-28  Mike Stump  <mrs@apple.com>\n \n \t* config/darwin9.h (ASM_OUTPUT_ALIGNED_COMMON): Add."}, {"sha": "06272e5e770625840a1fbd88c3e9e2e3050af9ef", "filename": "gcc/regmove.c", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/040f69ebaac3cb2fe8b26ff736d5885db4f16f6b/gcc%2Fregmove.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/040f69ebaac3cb2fe8b26ff736d5885db4f16f6b/gcc%2Fregmove.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregmove.c?ref=040f69ebaac3cb2fe8b26ff736d5885db4f16f6b", "patch": "@@ -471,15 +471,15 @@ optimize_reg_copy_1 (rtx insn, rtx dest, rtx src)\n \t\t  if (sregno < FIRST_PSEUDO_REGISTER\n \t\t      && reg_mentioned_p (dest, PATTERN (q)))\n \t\t    failed = 1;\n+\t\t  \n+\t\t  /* Attempt to replace all uses.  */\n+\t\t  else if (!validate_replace_rtx (src, dest, q))\n+\t\t    failed = 1;\n \n-\t\t  /* Replace all uses and make sure that the register\n-\t\t     isn't still present.  */\n-\t\t  else if (validate_replace_rtx (src, dest, q)\n-\t\t\t   && (sregno >= FIRST_PSEUDO_REGISTER\n-\t\t\t       || ! reg_overlap_mentioned_p (src,\n-\t\t\t\t\t\t\t     PATTERN (q))))\n-\t\t    ;\n-\t\t  else\n+\t\t  /* If this succeeded, but some part of the register\n+\t\t     is still present, undo the replacement.  */\n+\t\t  else if (sregno < FIRST_PSEUDO_REGISTER\n+\t\t\t   && reg_overlap_mentioned_p (src, PATTERN (q)))\n \t\t    {\n \t\t      validate_replace_rtx (dest, src, q);\n \t\t      failed = 1;"}]}