{"sha": "4e1e6a0137ad9da85b63821fb4f2dd70201e018d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGUxZTZhMDEzN2FkOWRhODViNjM4MjFmYjRmMmRkNzAyMDFlMDE4ZA==", "commit": {"author": {"name": "Gabriel Dos Reis", "email": "gdr@codesourcery.com", "date": "2000-08-20T14:57:16Z"}, "committer": {"name": "Gabriel Dos Reis", "email": "gdr@gcc.gnu.org", "date": "2000-08-20T14:57:16Z"}, "message": "c-lang.c: #include diagnostic.h\n\n\t* c-lang.c: #include diagnostic.h\n\t(c_tree_printer): New function.\n\t(lang_init): Initialize lang_printer.\n\n\t* Makefile.in (c-lang.o): Depends on diagnostic.h\n\nFrom-SVN: r35818", "tree": {"sha": "ed84b0db002b04b3aa9b37dbea15b13937de9dab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed84b0db002b04b3aa9b37dbea15b13937de9dab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4e1e6a0137ad9da85b63821fb4f2dd70201e018d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e1e6a0137ad9da85b63821fb4f2dd70201e018d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e1e6a0137ad9da85b63821fb4f2dd70201e018d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e1e6a0137ad9da85b63821fb4f2dd70201e018d/comments", "author": null, "committer": null, "parents": [{"sha": "e2840263c7138632298aae686b2acbcf91fb9e77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2840263c7138632298aae686b2acbcf91fb9e77", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2840263c7138632298aae686b2acbcf91fb9e77"}], "stats": {"total": 50, "additions": 49, "deletions": 1}, "files": [{"sha": "3a3bc0aa1413b6b86f59d83f0fdf863268f631c9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e1e6a0137ad9da85b63821fb4f2dd70201e018d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e1e6a0137ad9da85b63821fb4f2dd70201e018d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4e1e6a0137ad9da85b63821fb4f2dd70201e018d", "patch": "@@ -1,3 +1,11 @@\n+2000-08-20  Gabriel Dos Reis  <gdr@codesourcery.com>\n+\n+\t* c-lang.c: #include diagnostic.h\n+\t(c_tree_printer): New function.\n+\t(lang_init): Initialize lang_printer.\n+\n+\t* Makefile.in (c-lang.o): Depends on diagnostic.h\n+\n 2000-08-20  Gabriel Dos Reis  <gdr@codesourcery.com>\n \n \t* c-errors.c (pedwarn_c99): Adjust call to report_diagnostic."}, {"sha": "a4ed78b3a717c81305feb24aee042e56c9539001", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e1e6a0137ad9da85b63821fb4f2dd70201e018d/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e1e6a0137ad9da85b63821fb4f2dd70201e018d/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=4e1e6a0137ad9da85b63821fb4f2dd70201e018d", "patch": "@@ -1102,7 +1102,7 @@ c-decl.o : c-decl.c $(CONFIG_H) system.h $(TREE_H) $(RTL_H) c-tree.h \\\n c-typeck.o : c-typeck.c $(CONFIG_H) system.h $(TREE_H) c-tree.h c-common.h \\\n     flags.h intl.h output.h $(EXPR_H) $(RTL_H) toplev.h\n c-lang.o : c-lang.c $(CONFIG_H) system.h $(TREE_H) c-tree.h c-common.h \\\n-    $(GGC_H)  c-lex.h toplev.h output.h function.h\n+    $(GGC_H)  c-lex.h toplev.h diagnostic.h output.h function.h\n c-lex.o : c-lex.c $(CONFIG_H) system.h $(TREE_H) $(RTL_H) c-lex.h c-tree.h \\\n     c-common.h $(srcdir)/c-parse.h $(srcdir)/c-gperf.h c-pragma.h input.h \\\n     intl.h flags.h toplev.h output.h mbchar.h $(GGC_H)"}, {"sha": "ab28b0d44cedfdbfe160b2a68f1eaf1688eee4c7", "filename": "gcc/c-lang.c", "status": "modified", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e1e6a0137ad9da85b63821fb4f2dd70201e018d/gcc%2Fc-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e1e6a0137ad9da85b63821fb4f2dd70201e018d/gcc%2Fc-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-lang.c?ref=4e1e6a0137ad9da85b63821fb4f2dd70201e018d", "patch": "@@ -28,10 +28,13 @@ Boston, MA 02111-1307, USA.  */\n #include \"c-tree.h\"\n #include \"c-lex.h\"\n #include \"toplev.h\"\n+#include \"diagnostic.h\"\n #include \"output.h\"\n #include \"flags.h\"\n #include \"ggc.h\"\n \n+static int c_tree_printer PARAMS ((output_buffer *));\n+\n #if USE_CPPLIB\n #include \"cpplib.h\"\n extern char *yy_cur;\n@@ -92,6 +95,8 @@ lang_init ()\n   restore_lang_status = &pop_c_function_context;\n   mark_lang_status = &mark_c_function_context;\n \n+  lang_printer = c_tree_printer;\n+\n   c_parse_init ();\n }\n \n@@ -240,3 +245,38 @@ finish_file ()\n     }\n #endif\n }\n+\n+/* Called during diagnostic message formatting process to print a\n+   source-level entity onto BUFFER.  The meaning of the format specifiers\n+   is as follows:\n+   %D: a general decl,\n+   %F: a function declaration,\n+   %T: a type.\n+\n+   These format specifiers form a subset of the format specifiers set used\n+   by the C++ front-end.\n+   Please notice when called, the `%' part was already skipped by the\n+   diagnostic machinery.  */\n+static int\n+c_tree_printer (buffer)\n+     output_buffer *buffer;\n+{\n+  tree t = va_arg (output_buffer_format_args (buffer), tree);\n+\n+  switch (*output_buffer_text_cursor (buffer))\n+    {\n+    case 'D':\n+    case 'F':\n+    case 'T':\n+      {\n+        const char *n = DECL_NAME (t)\n+          ? (*decl_printable_name) (t, 2)\n+          : \"({anonymous})\";\n+        output_add_string (buffer, n);\n+      }\n+      return 1;\n+\n+    default:\n+      return 0;\n+    }\n+}"}]}