{"sha": "039f9e35a67df1b09fafecebf28c37eb379ee41f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDM5ZjllMzVhNjdkZjFiMDlmYWZlY2ViZjI4YzM3ZWIzNzllZTQxZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2006-10-16T09:51:14Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2006-10-16T09:51:14Z"}, "message": "basic_string.tcc (_Rep::_S_create): Call _M_set_sharable() for backwards compatibility.\n\n\t* include/bits/basic_string.tcc (_Rep::_S_create): Call\n\t_M_set_sharable() for backwards compatibility.\n\nFrom-SVN: r117777", "tree": {"sha": "22129bfacf61f0b81eb55300b82b6c1575083d37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/22129bfacf61f0b81eb55300b82b6c1575083d37"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/039f9e35a67df1b09fafecebf28c37eb379ee41f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/039f9e35a67df1b09fafecebf28c37eb379ee41f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/039f9e35a67df1b09fafecebf28c37eb379ee41f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/039f9e35a67df1b09fafecebf28c37eb379ee41f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d7aa4788df0b2d415453a61329bead6ac4b2f763", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7aa4788df0b2d415453a61329bead6ac4b2f763", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7aa4788df0b2d415453a61329bead6ac4b2f763"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "0aed5e0f8a7423f8cb8175fb96030bab9a1cd3ce", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/039f9e35a67df1b09fafecebf28c37eb379ee41f/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/039f9e35a67df1b09fafecebf28c37eb379ee41f/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=039f9e35a67df1b09fafecebf28c37eb379ee41f", "patch": "@@ -1,3 +1,8 @@\n+2006-10-16  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* include/bits/basic_string.tcc (_Rep::_S_create): Call\n+\t_M_set_sharable() for backwards compatibility.\n+\n 2006-10-15  Paolo Carlini  <pcarlini@suse.de>\n \n \t* include/bits/istream.tcc (getline(basic_istream<>&,"}, {"sha": "fadf9b34ea138c880a1ac80c6134b559bc97059c", "filename": "libstdc++-v3/include/bits/basic_string.tcc", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/039f9e35a67df1b09fafecebf28c37eb379ee41f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/039f9e35a67df1b09fafecebf28c37eb379ee41f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc?ref=039f9e35a67df1b09fafecebf28c37eb379ee41f", "patch": "@@ -588,6 +588,14 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n       void* __place = _Raw_bytes_alloc(__alloc).allocate(__size);\n       _Rep *__p = new (__place) _Rep;\n       __p->_M_capacity = __capacity;\n+      // ABI compatibility - 3.4.x set in _S_create both\n+      // _M_refcount and _M_length.  All callers of _S_create\n+      // in basic_string.tcc then set just _M_length.\n+      // In 4.0.x and later both _M_refcount and _M_length\n+      // are initialized in the callers, unfortunately we can\n+      // have 3.4.x compiled code with _S_create callers inlined\n+      // calling 4.0.x+ _S_create.\n+      __p->_M_set_sharable();\n       return __p;\n     }\n "}]}