{"sha": "46044dd988812b122ba11b1d517f936eaeec4a52", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDYwNDRkZDk4ODgxMmIxMjJiYTExYjFkNTE3ZjkzNmVhZWVjNGE1Mg==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2010-05-10T14:02:43Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2010-05-10T14:02:43Z"}, "message": "Nullify regno_allocno_map of the removed allocno.\n\ngcc/\n\n2010-05-10  H.J. Lu<hongjiu.lu@intel.com>\n\t    Vladimir Makarov<vmakarov@redhat.com>\n\n\tPR rtl-optimization/44012\n\t* ira-build.c (remove_unnecessary_allocnos): Nullify\n\tregno_allocno_map of the removed allocno.\n\ngcc/testsuite/\n\n2010-05-10  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR rtl-optimization/44012\n\t* gcc.dg/pr44012.c: New.\n\nFrom-SVN: r159223", "tree": {"sha": "2fda4aa4952632a4263d4074b76f5bf5b41f4506", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2fda4aa4952632a4263d4074b76f5bf5b41f4506"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46044dd988812b122ba11b1d517f936eaeec4a52", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46044dd988812b122ba11b1d517f936eaeec4a52", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46044dd988812b122ba11b1d517f936eaeec4a52", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46044dd988812b122ba11b1d517f936eaeec4a52/comments", "author": null, "committer": null, "parents": [{"sha": "6aaf13579feca751fe5dfffcca429b80a8170233", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6aaf13579feca751fe5dfffcca429b80a8170233", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6aaf13579feca751fe5dfffcca429b80a8170233"}], "stats": {"total": 74, "additions": 74, "deletions": 0}, "files": [{"sha": "86156f70d83eea1c4107f2b988303697427f2077", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46044dd988812b122ba11b1d517f936eaeec4a52/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46044dd988812b122ba11b1d517f936eaeec4a52/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=46044dd988812b122ba11b1d517f936eaeec4a52", "patch": "@@ -1,3 +1,10 @@\n+2010-05-10  H.J. Lu<hongjiu.lu@intel.com>\n+\t    Vladimir Makarov<vmakarov@redhat.com>\n+\n+\tPR rtl-optimization/44012\n+\t* ira-build.c (remove_unnecessary_allocnos): Nullify\n+\tregno_allocno_map of the removed allocno.\n+\n 2010-05-10  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* configure.ac (gcc_cv_ld_eh_gc_sections): Redirect objdump errors"}, {"sha": "c879efa9db2efd83a8b5269c1183753177414a46", "filename": "gcc/ira-build.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46044dd988812b122ba11b1d517f936eaeec4a52/gcc%2Fira-build.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46044dd988812b122ba11b1d517f936eaeec4a52/gcc%2Fira-build.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira-build.c?ref=46044dd988812b122ba11b1d517f936eaeec4a52", "patch": "@@ -1978,6 +1978,10 @@ remove_unnecessary_allocnos (void)\n \t\t  merged_p = true;\n \t\t  ALLOCNO_LIVE_RANGES (a) = NULL;\n \t\t  propagate_some_info_from_allocno (parent_a, a);\n+\t\t  /* Remove it from the corresponding regno allocno\n+\t\t     map to avoid info propagation of subsequent\n+\t\t     allocno into this already removed allocno.  */\n+\t\t  a_node->regno_allocno_map[regno] = NULL;\n \t\t  finish_allocno (a);\n \t\t}\n \t    }"}, {"sha": "3208c84b39689c4ab5bc5814f4dfd2052f9dbb5d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46044dd988812b122ba11b1d517f936eaeec4a52/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46044dd988812b122ba11b1d517f936eaeec4a52/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=46044dd988812b122ba11b1d517f936eaeec4a52", "patch": "@@ -1,3 +1,8 @@\n+2010-05-10  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR rtl-optimization/44012\n+\t* gcc.dg/pr44012.c: New.\n+\n 2010-05-10  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* lib/lto.exp (lto_prune_vis_warns): Renamed to lto_prune_warns."}, {"sha": "bd255ba08fb528fc9053e99625f31a3130fc693d", "filename": "gcc/testsuite/gcc.dg/pr44012.c", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46044dd988812b122ba11b1d517f936eaeec4a52/gcc%2Ftestsuite%2Fgcc.dg%2Fpr44012.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46044dd988812b122ba11b1d517f936eaeec4a52/gcc%2Ftestsuite%2Fgcc.dg%2Fpr44012.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr44012.c?ref=46044dd988812b122ba11b1d517f936eaeec4a52", "patch": "@@ -0,0 +1,58 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O -fgcse\" } */\n+\n+extern void fe ();\n+\n+extern int i;\n+\n+static inline void\n+FX (void (*f) ())\n+{\n+  fe ();\n+  (*f) ();\n+}\n+\n+static inline void\n+f4 ()\n+{\n+  for (;;)\n+    switch (i)\n+      {\n+      case 306:\n+      FX (&fe);\n+      break;\n+      default:\n+      return;\n+      }\n+}\n+\n+static inline void\n+f3 ()\n+{\n+  f4 ();\n+  for (;;)\n+    switch (i)\n+      {\n+      case 267:\n+      FX (&f4);\n+      break;\n+      default:\n+      return;\n+      }\n+}\n+\n+static inline void\n+f2 ()\n+{\n+  f3 ();\n+  while (i)\n+    FX (&f3);\n+}\n+\n+void\n+f1 ()\n+{\n+  f2 ();\n+  while (1)\n+    FX (&f2);\n+}"}]}