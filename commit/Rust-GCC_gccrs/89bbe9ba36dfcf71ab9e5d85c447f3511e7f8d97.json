{"sha": "89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODliYmU5YmEzNmRmY2Y3MWFiOWU1ZDg1YzQ0N2YzNTExZTdmOGQ5Nw==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2015-12-03T04:13:33Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2015-12-03T04:13:33Z"}, "message": "re PR c++/68184 (Exception from a virtual function does not get caught)\n\n\n\tPR ipa/68184\n\t* g++.dg/torture/pr68184.C: New testcase.\n\t* cgraphunit.c (cgraph_node::analyze): Set can_throw_external.\n\nFrom-SVN: r231217", "tree": {"sha": "9674e64e768786b317980cd760a40e8197f495dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9674e64e768786b317980cd760a40e8197f495dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97/comments", "author": null, "committer": null, "parents": [{"sha": "eaa728e3a23192ecce0a3b9c731f47e778cd9592", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eaa728e3a23192ecce0a3b9c731f47e778cd9592", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eaa728e3a23192ecce0a3b9c731f47e778cd9592"}], "stats": {"total": 42, "additions": 42, "deletions": 0}, "files": [{"sha": "1d96d7b61cfbd1d4d56be467aca541f629d79e5e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97", "patch": "@@ -1,3 +1,8 @@\n+2015-12-02  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/68184\n+\t* cgraphunit.c (cgraph_node::analyze): Set can_throw_external.\n+\n 2015-12-02  Aditya Kumar  <aditya.k7@samsung.com>\n \t    Sebastian Pop  <s.pop@samsung.com>\n "}, {"sha": "4ab64147e88c9435e39d822f8f9f1f62863ca826", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97", "patch": "@@ -575,6 +575,7 @@ cgraph_node::analyze (void)\n       cgraph_node *t = cgraph_node::get (thunk.alias);\n \n       create_edge (t, NULL, 0, CGRAPH_FREQ_BASE);\n+      callees->can_throw_external = !TREE_NOTHROW (t->decl);\n       /* Target code in expand_thunk may need the thunk's target\n \t to be analyzed, so recurse here.  */\n       if (!t->analyzed)"}, {"sha": "2e9f6b817c6cd5ac4dddae34a97387fc2ed0fc97", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97", "patch": "@@ -1,3 +1,8 @@\n+2015-12-02  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/68184\n+\t* g++.dg/torture/pr68184.C: New testcase.\n+\n 2015-12-03  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR preprocessor/57580"}, {"sha": "d0c7c84910ce502230f0ab69d9f94e4c94369e64", "filename": "gcc/testsuite/g++.dg/torture/pr68184.C", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr68184.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr68184.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr68184.C?ref=89bbe9ba36dfcf71ab9e5d85c447f3511e7f8d97", "patch": "@@ -0,0 +1,31 @@\n+// { dg-do run }\n+namespace {\n+struct IFoo { virtual void foo() = 0; };\n+struct IBar { virtual void bar() = 0; };\n+\n+struct FooBar : private IBar, private IFoo\n+{\n+    void call_foo()\n+    {\n+        try\n+        {\n+            static_cast<IFoo*>(this)->foo();\n+        }\n+        catch( ... ) {}\n+    }\n+    void foo() { throw 1; }\n+    void bar()  {}\n+};\n+\n+void test()\n+{\n+    FooBar foobar;\n+    foobar.call_foo();\n+}\n+}\n+int main()\n+{\n+    test();\n+    return 0;\n+}\n+"}]}