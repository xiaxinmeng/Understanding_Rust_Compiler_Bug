{"sha": "a95cd5a0d46e37922e5a0c5eb4cd4d22bc21da29", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTk1Y2Q1YTBkNDZlMzc5MjJlNWEwYzVlYjRjZDRkMjJiYzIxZGEyOQ==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2004-04-22T15:46:09Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2004-04-22T15:46:09Z"}, "message": "resource.c (write_resource_constructor): Guard call to possibly NULL targetm.asm_out.constructor with...\n\n\n\t* resource.c (write_resource_constructor): Guard call to possibly\n\tNULL targetm.asm_out.constructor with targetm.have_ctors_dtors.\n\nFrom-SVN: r81012", "tree": {"sha": "079e6b175cebb3f77c5cc337cb86c43f7c946aad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/079e6b175cebb3f77c5cc337cb86c43f7c946aad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a95cd5a0d46e37922e5a0c5eb4cd4d22bc21da29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a95cd5a0d46e37922e5a0c5eb4cd4d22bc21da29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a95cd5a0d46e37922e5a0c5eb4cd4d22bc21da29", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a95cd5a0d46e37922e5a0c5eb4cd4d22bc21da29/comments", "author": null, "committer": null, "parents": [{"sha": "b10e5b3a5e750c7f6a7a0c4550d9b573252a56aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b10e5b3a5e750c7f6a7a0c4550d9b573252a56aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b10e5b3a5e750c7f6a7a0c4550d9b573252a56aa"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "17e6794d31c02d8974a6de1f919cca1ce823882b", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a95cd5a0d46e37922e5a0c5eb4cd4d22bc21da29/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a95cd5a0d46e37922e5a0c5eb4cd4d22bc21da29/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=a95cd5a0d46e37922e5a0c5eb4cd4d22bc21da29", "patch": "@@ -1,3 +1,8 @@\n+2004-04-22  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* resource.c (write_resource_constructor): Guard call to possibly\n+\tNULL targetm.asm_out.constructor with targetm.have_ctors_dtors.\n+\n 2004-04-19  Bryce McKinlay  <mckinlay@redhat.com>\n \n \t* class.c (make_class_data): Add new field aux_info."}, {"sha": "bc2860dfd1f6561e3dfc8370655f59cd975cf8ac", "filename": "gcc/java/resource.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a95cd5a0d46e37922e5a0c5eb4cd4d22bc21da29/gcc%2Fjava%2Fresource.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a95cd5a0d46e37922e5a0c5eb4cd4d22bc21da29/gcc%2Fjava%2Fresource.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fresource.c?ref=a95cd5a0d46e37922e5a0c5eb4cd4d22bc21da29", "patch": "@@ -129,6 +129,9 @@ write_resource_constructor (void)\n      to scan the object file to find its ctor/dtor routine.  */\n   TREE_PUBLIC (init_decl) = ! targetm.have_ctors_dtors;\n \n+  /* Suppress spurious warnings.  */\n+  TREE_USED (init_decl) = 1;\n+\n   pushlevel (0);\n   make_decl_rtl (init_decl, NULL);\n   init_function_start (init_decl);\n@@ -156,8 +159,9 @@ write_resource_constructor (void)\n     flag_inline_functions = saved_flag;\n   }\n   current_function_decl = NULL_TREE;\n-  (* targetm.asm_out.constructor) (XEXP (DECL_RTL (init_decl), 0),\n-\t\t\t\t   DEFAULT_INIT_PRIORITY);\n+  if (targetm.have_ctors_dtors)\n+    targetm.asm_out.constructor (XEXP (DECL_RTL (init_decl), 0),\n+\t\t\t\t DEFAULT_INIT_PRIORITY);\n   input_location = saved_loc;\n }\n "}]}