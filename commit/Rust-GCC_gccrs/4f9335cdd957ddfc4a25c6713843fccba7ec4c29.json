{"sha": "4f9335cdd957ddfc4a25c6713843fccba7ec4c29", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGY5MzM1Y2RkOTU3ZGRmYzRhMjVjNjcxMzg0M2ZjY2JhN2VjNGMyOQ==", "commit": {"author": {"name": "Laurent Guerby", "email": "guerby@acm.org", "date": "2003-05-01T14:14:35Z"}, "committer": {"name": "Laurent Guerby", "email": "guerby@gcc.gnu.org", "date": "2003-05-01T14:14:35Z"}, "message": "re PR ada/10546 (GCC 3.3, Ada tasking not working on Red Hat Linux 9)\n\n2003-05-01  Laurent Guerby <guerby@acm.org>\n\n        PR ada/10546\n        * 5iosinte.ads: Increase pthread_cond_t size to match recent\n        LinuxThread and NPTL version, merge from ACT.\n\nFrom-SVN: r66327", "tree": {"sha": "b792a098d789a4cbe74a5da219744f120728a339", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b792a098d789a4cbe74a5da219744f120728a339"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4f9335cdd957ddfc4a25c6713843fccba7ec4c29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f9335cdd957ddfc4a25c6713843fccba7ec4c29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f9335cdd957ddfc4a25c6713843fccba7ec4c29", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f9335cdd957ddfc4a25c6713843fccba7ec4c29/comments", "author": null, "committer": null, "parents": [{"sha": "3b895f8ed663edc2bfab43aec24e3e8ac3cf2c9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b895f8ed663edc2bfab43aec24e3e8ac3cf2c9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b895f8ed663edc2bfab43aec24e3e8ac3cf2c9f"}], "stats": {"total": 39, "additions": 22, "deletions": 17}, "files": [{"sha": "e112c8cdaf5f2daf7d9cfa90fe449f56606206bc", "filename": "gcc/ada/5iosinte.ads", "status": "modified", "additions": 16, "deletions": 17, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f9335cdd957ddfc4a25c6713843fccba7ec4c29/gcc%2Fada%2F5iosinte.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f9335cdd957ddfc4a25c6713843fccba7ec4c29/gcc%2Fada%2F5iosinte.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2F5iosinte.ads?ref=4f9335cdd957ddfc4a25c6713843fccba7ec4c29", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  S p e c                                 --\n --                                                                          --\n---          Copyright (C) 1991-2001 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1992-2003 Free Software Foundation, Inc.          --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -27,7 +27,7 @@\n -- covered by the  GNU Public License.                                      --\n --                                                                          --\n -- GNARL was developed by the GNARL team at Florida State University.       --\n--- Extensive contributions were provided by Ada Core Technologies Inc.      --\n+-- Extensive contributions were provided by Ada Core Technologies, Inc.     --\n --                                                                          --\n ------------------------------------------------------------------------------\n \n@@ -234,6 +234,11 @@ package System.OS_Interface is\n       tz : System.Address := System.Null_Address) return int;\n    pragma Import (C, gettimeofday, \"gettimeofday\");\n \n+   function sysconf (name : int) return long;\n+   pragma Import (C, sysconf);\n+\n+   SC_CLK_TCK : constant := 2;\n+\n    -------------------------\n    -- Priority Scheduling --\n    -------------------------\n@@ -443,11 +448,8 @@ package System.OS_Interface is\n \n private\n \n-   type sigset_t is array (0 .. 31) of unsigned_long;\n+   type sigset_t is array (0 .. 127) of unsigned_char;\n    pragma Convention (C, sigset_t);\n-   for sigset_t'Size use 1024;\n-   --  This is for GNU libc version 2 but should be backward compatible with\n-   --  other libc where sigset_t is smaller.\n \n    type pid_t is new int;\n \n@@ -476,7 +478,7 @@ private\n       stackaddr     : System.Address;\n       stacksize     : size_t;\n    end record;\n-   pragma Convention (C_Pass_By_Copy, pthread_attr_t);\n+   pragma Convention (C, pthread_attr_t);\n \n    type pthread_condattr_t is record\n       dummy : int;\n@@ -490,25 +492,22 @@ private\n \n    type pthread_t is new unsigned_long;\n \n-   type struct_pthread_queue is record\n-      head : System.Address;\n-      tail : System.Address;\n+   type struct_pthread_fast_lock is record\n+      status   : long;\n+      spinlock : int;\n    end record;\n-   pragma Convention (C, struct_pthread_queue);\n+   pragma Convention (C, struct_pthread_fast_lock);\n \n    type pthread_mutex_t is record\n-      m_spinlock : int;\n+      m_reserved : int;\n       m_count    : int;\n       m_owner    : System.Address;\n       m_kind     : int;\n-      m_waiting  : struct_pthread_queue;\n+      m_lock     : struct_pthread_fast_lock;\n    end record;\n    pragma Convention (C, pthread_mutex_t);\n \n-   type pthread_cond_t is record\n-      c_spinlock : int;\n-      c_waiting  : struct_pthread_queue;\n-   end record;\n+   type pthread_cond_t is array (0 .. 47) of unsigned_char;\n    pragma Convention (C, pthread_cond_t);\n \n    type pthread_key_t is new unsigned;"}, {"sha": "e3347edab91aef79d2423a20128e9f4a14bd28ec", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f9335cdd957ddfc4a25c6713843fccba7ec4c29/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f9335cdd957ddfc4a25c6713843fccba7ec4c29/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=4f9335cdd957ddfc4a25c6713843fccba7ec4c29", "patch": "@@ -1,3 +1,9 @@\n+2003-05-01  Laurent Guerby <guerby@acm.org>\n+\n+        PR ada/10546 \n+        * 5iosinte.ads: Increase pthread_cond_t size to match recent\n+        LinuxThread and NPTL version, merge from ACT.\n+\t\n 2003-04-28  Zack Weinberg  <zack@codesourcery.com>\n \n \t* utils.c (convert): No need to clear TREE_CST_RTL."}]}