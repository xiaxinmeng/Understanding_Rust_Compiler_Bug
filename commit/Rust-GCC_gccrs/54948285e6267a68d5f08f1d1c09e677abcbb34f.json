{"sha": "54948285e6267a68d5f08f1d1c09e677abcbb34f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ5NDgyODVlNjI2N2E2OGQ1ZjA4ZjFkMWMwOWU2NzdhYmNiYjM0Zg==", "commit": {"author": {"name": "Javier Miranda", "email": "miranda@adacore.com", "date": "2019-07-01T13:34:45Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-07-01T13:34:45Z"}, "message": "[Ada] Disable expansion of 'Min/'Max of floating point types\n\n2019-07-01  Javier Miranda  <miranda@adacore.com>\n\ngcc/ada/\n\n\t* exp_attr.adb (Expand_Min_Max_Attribute): Disable expansion of\n\t'Min/'Max on integer, enumeration, fixed point and floating\n\tpoint types since the CCG backend now provides in file\n\tstandard.h routines to support it.\n\nFrom-SVN: r272858", "tree": {"sha": "cc05ab7a4786e390dff2c74c97780e2428473836", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc05ab7a4786e390dff2c74c97780e2428473836"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54948285e6267a68d5f08f1d1c09e677abcbb34f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54948285e6267a68d5f08f1d1c09e677abcbb34f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54948285e6267a68d5f08f1d1c09e677abcbb34f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54948285e6267a68d5f08f1d1c09e677abcbb34f/comments", "author": {"login": "miranda-adacore", "id": 54413934, "node_id": "MDQ6VXNlcjU0NDEzOTM0", "avatar_url": "https://avatars.githubusercontent.com/u/54413934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miranda-adacore", "html_url": "https://github.com/miranda-adacore", "followers_url": "https://api.github.com/users/miranda-adacore/followers", "following_url": "https://api.github.com/users/miranda-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/miranda-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/miranda-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miranda-adacore/subscriptions", "organizations_url": "https://api.github.com/users/miranda-adacore/orgs", "repos_url": "https://api.github.com/users/miranda-adacore/repos", "events_url": "https://api.github.com/users/miranda-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/miranda-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5a428808e775ed9f52d9ae738b366acdbd361c19", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a428808e775ed9f52d9ae738b366acdbd361c19", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a428808e775ed9f52d9ae738b366acdbd361c19"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "7bb2605bf63153ddd8341c49f97f8b824c102282", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54948285e6267a68d5f08f1d1c09e677abcbb34f/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54948285e6267a68d5f08f1d1c09e677abcbb34f/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=54948285e6267a68d5f08f1d1c09e677abcbb34f", "patch": "@@ -1,3 +1,10 @@\n+2019-07-01  Javier Miranda  <miranda@adacore.com>\n+\n+\t* exp_attr.adb (Expand_Min_Max_Attribute): Disable expansion of\n+\t'Min/'Max on integer, enumeration, fixed point and floating\n+\tpoint types since the CCG backend now provides in file\n+\tstandard.h routines to support it.\n+\n 2019-07-01  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* impunit.adb: Add GNAT.Graphs to list Non_Imp_File_Names_95."}, {"sha": "7d3a6c4458607a9018f9c98cd7896967a4838724", "filename": "gcc/ada/exp_attr.adb", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54948285e6267a68d5f08f1d1c09e677abcbb34f/gcc%2Fada%2Fexp_attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54948285e6267a68d5f08f1d1c09e677abcbb34f/gcc%2Fada%2Fexp_attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_attr.adb?ref=54948285e6267a68d5f08f1d1c09e677abcbb34f", "patch": "@@ -1694,9 +1694,15 @@ package body Exp_Attr is\n \n       Check_Restriction (No_Implicit_Conditionals, N);\n \n-      --  In Modify_Tree_For_C mode, we rewrite as an if expression\n-\n-      if Modify_Tree_For_C then\n+      --  In Modify_Tree_For_C mode, we rewrite as an if expression (unless it\n+      --  is supported).\n+\n+      if Modify_Tree_For_C\n+        and then not Is_Integer_Type (Etype (N))\n+        and then not Is_Enumeration_Type (Etype (N))\n+        and then not Is_Fixed_Point_Type (Etype (N))\n+        and then not Is_Floating_Point_Type (Etype (N))\n+      then\n          declare\n             Loc   : constant Source_Ptr := Sloc (N);\n             Typ   : constant Entity_Id  := Etype (N);"}]}