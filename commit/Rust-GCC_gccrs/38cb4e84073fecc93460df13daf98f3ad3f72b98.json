{"sha": "38cb4e84073fecc93460df13daf98f3ad3f72b98", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzhjYjRlODQwNzNmZWNjOTM0NjBkZjEzZGFmOThmM2FkM2Y3MmI5OA==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@waitaki.otago.ac.nz", "date": "2002-03-18T11:08:21Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2002-03-18T11:08:21Z"}, "message": "jartool.c (expand_options): Handle tar-style argument list with a leading \"-\".\n\n\t* jartool.c (expand_options): Handle tar-style argument list with a\n\tleading \"-\".\n\nFrom-SVN: r50957", "tree": {"sha": "5911e9488f7f5b2436c0574a9a22f3f60753340f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5911e9488f7f5b2436c0574a9a22f3f60753340f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38cb4e84073fecc93460df13daf98f3ad3f72b98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38cb4e84073fecc93460df13daf98f3ad3f72b98", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38cb4e84073fecc93460df13daf98f3ad3f72b98", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38cb4e84073fecc93460df13daf98f3ad3f72b98/comments", "author": null, "committer": null, "parents": [{"sha": "f07beda95a1c3de83d8d453116e1585ce27bdd3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f07beda95a1c3de83d8d453116e1585ce27bdd3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f07beda95a1c3de83d8d453116e1585ce27bdd3e"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "25859629281e710767053d5ad2663ec2d36e71b8", "filename": "fastjar/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38cb4e84073fecc93460df13daf98f3ad3f72b98/fastjar%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38cb4e84073fecc93460df13daf98f3ad3f72b98/fastjar%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FChangeLog?ref=38cb4e84073fecc93460df13daf98f3ad3f72b98", "patch": "@@ -1,3 +1,8 @@\n+2002-03-18  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n+\n+\t* jartool.c (expand_options): Handle tar-style argument list with a\n+\tleading \"-\".\n+\n 2002-02-23  Anthony Green  <green@redhat.com>\n \n \t* jartool.c (main): Fix handling of -C."}, {"sha": "2436606d5026e970d8508a33e9a5c2458797c082", "filename": "fastjar/jartool.c", "status": "modified", "additions": 14, "deletions": 3, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38cb4e84073fecc93460df13daf98f3ad3f72b98/fastjar%2Fjartool.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38cb4e84073fecc93460df13daf98f3ad3f72b98/fastjar%2Fjartool.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fjartool.c?ref=38cb4e84073fecc93460df13daf98f3ad3f72b98", "patch": "@@ -1938,24 +1938,34 @@ expand_options (int *argcp, char ***argvp)\n   int argc = *argcp;\n   char **argv = *argvp;\n \n-  if (argc > 1 && argv[1][0] != '-')\n+  /* Accept arguments with a leading \"-\" (eg \"-cvf\"), but don't do expansion \n+     if a long argument (like \"--help\") is detected. */\n+  if (argc > 1 && argv[1][1] != '-')\n     {\n       char buf[3];\n       char **new_argv;\n       int new_argc;\n+      int args_to_expand;\n       char *p;\n       char **in, **out;\n \n       buf[0] = '-';\n       buf[2] = '\\0';\n \n-      new_argc = argc - 1 + strlen (argv[1]);\n+      args_to_expand = strlen (argv[1]);\n+      if (argv[1][0] == '-')\n+        --args_to_expand;\n+        \n+      new_argc = argc - 1 + args_to_expand;\n       new_argv = (char **) malloc (new_argc * sizeof (char *));\n       in = argv;\n       out = new_argv;\n \n       *out++ = *in++;\n-      for (p = *in++; *p; ++p)\n+      p = *in++;\n+      if (*p == '-')\n+        p++;\n+      while (*p != '\\0')\n \t{\n \t  char *opt;\n \t  buf[1] = *p;\n@@ -1974,6 +1984,7 @@ expand_options (int *argcp, char ***argvp)\n \t\t  usage(argv[0]);\n \t\t}\n \t    }\n+\t  ++p;\n \t}\n \n       /* Copy remaining options.  */"}]}