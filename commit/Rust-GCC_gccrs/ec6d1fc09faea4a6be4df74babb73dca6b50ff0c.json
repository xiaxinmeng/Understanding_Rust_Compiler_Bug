{"sha": "ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "node_id": "C_kwDOANBUbNoAKGVjNmQxZmMwOWZhZWE0YTZiZTRkZjc0YmFiYjczZGNhNmI1MGZmMGM", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2022-12-30T19:46:13Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2023-01-04T14:54:41Z"}, "message": "modula-2: Fix registration of modules via constructors [PR108183].\n\nThis reworks the mechanism used for module registration to use init-\ntime constructors.  The order of registration is not important, the\nactual initialization dependency tree will be computed early in the\nexecution (all that matters is that we have registered before that).\n\nThis fixes a potential issue in which the external name known to the\nm2 system is of the form _M2_XXXXXX_ctor() but the C++ code was\nproducing a static variable instance with the same name.\n\nSigned-off-by: Iain Sandoe <iain@sandoe.co.uk>\n\n\tPR modula2/108183\n\ngcc/m2/ChangeLog:\n\n\t* gm2-libs-ch/UnixArgs.cc (_M2_UnixArgs_ctor): Rework to use\n\tan extern \"C\" function with 'constructor' attribute.\n\t* gm2-libs-ch/dtoa.cc (_M2_dtoa_ctor): Likewise.\n\t* gm2-libs-ch/ldtoa.cc (_M2_ldtoa_ctor): Likewise.\n\nlibgm2/ChangeLog:\n\n\t* libm2cor/KeyBoardLEDs.cc (_M2_KeyBoardLEDs_ctor): Rework to use\n\tan extern \"C\" function with 'constructor' attribute.\n\t* libm2iso/ErrnoCategory.cc (_M2_ErrnoCategory_ctor): Likewise.\n\t* libm2iso/RTco.cc (_M2_RTco_ctor): Likewise.\n\t* libm2pim/Selective.cc (_M2_Selective_ctor): Likewise.\n\t* libm2pim/SysExceptions.cc (_M2_SysExceptions_ctor): Likewise.\n\t* libm2pim/UnixArgs.cc (_M2_UnixArgs_ctor): Likewise.\n\t* libm2pim/cgetopt.cc (_M2_cgetopt_ctor): Likewise.\n\t* libm2pim/dtoa.cc (_M2_dtoa_ctor): Likewise.\n\t* libm2pim/errno.cc (_M2_errno_ctor): Likewise.\n\t* libm2pim/ldtoa.cc (_M2_ldtoa_ctor): Likewise.\n\t* libm2pim/sckt.cc (_M2_sckt_ctor): Likewise.\n\t* libm2pim/termios.cc (_M2_termios_ctor): Likewise.\n\t* libm2pim/wrapc.c: Add a new line to the file end.", "tree": {"sha": "e486111f56a402f9f556cc2ac148bb481dd01416", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e486111f56a402f9f556cc2ac148bb481dd01416"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "751c2d9a46f786381a90d5c8c49947fa0d9b7ee5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/751c2d9a46f786381a90d5c8c49947fa0d9b7ee5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/751c2d9a46f786381a90d5c8c49947fa0d9b7ee5"}], "stats": {"total": 76, "additions": 31, "deletions": 45}, "files": [{"sha": "4bb3769644c272b124b73d586f64461c74d5c396", "filename": "gcc/m2/gm2-libs-ch/UnixArgs.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/gcc%2Fm2%2Fgm2-libs-ch%2FUnixArgs.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/gcc%2Fm2%2Fgm2-libs-ch%2FUnixArgs.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fgm2-libs-ch%2FUnixArgs.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -82,9 +82,8 @@ _M2_UnixArgs_dep (void)\n {\n }\n \n-struct _M2_UnixArgs_ctor { _M2_UnixArgs_ctor (); } _M2_UnixArgs_ctor;\n-\n-_M2_UnixArgs_ctor::_M2_UnixArgs_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_UnixArgs_ctor (void)\n {\n   M2RTS_RegisterModule (\"UnixArgs\", _M2_UnixArgs_init, _M2_UnixArgs_finish,\n \t\t\t_M2_UnixArgs_dep);"}, {"sha": "111fc4b67dc2107baca6de7f737ba578a6c86ceb", "filename": "gcc/m2/gm2-libs-ch/dtoa.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/gcc%2Fm2%2Fgm2-libs-ch%2Fdtoa.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/gcc%2Fm2%2Fgm2-libs-ch%2Fdtoa.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fgm2-libs-ch%2Fdtoa.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -189,9 +189,8 @@ _M2_dtoa_dep (void)\n #ifdef __cplusplus\n }\n \n-struct _M2_dtoa_ctor { _M2_dtoa_ctor (); } _M2_dtoa_ctor;\n-\n-_M2_dtoa_ctor::_M2_dtoa_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_dtoa_ctor (void)\n {\n   M2RTS_RegisterModule (\"dtoa\", _M2_dtoa_init, _M2_dtoa_finish,\n \t\t\t_M2_dtoa_dep);"}, {"sha": "8d9e648fddfa82c0e07191be48040800118ca2f8", "filename": "gcc/m2/gm2-libs-ch/ldtoa.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/gcc%2Fm2%2Fgm2-libs-ch%2Fldtoa.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/gcc%2Fm2%2Fgm2-libs-ch%2Fldtoa.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fgm2-libs-ch%2Fldtoa.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -118,9 +118,8 @@ _M2_ldtoa_dep (void)\n #   ifdef __cplusplus\n }\n \n-struct _M2_ldtoa_ctor { _M2_ldtoa_ctor (); } _M2_ldtoa_ctor;\n-\n-_M2_ldtoa_ctor::_M2_ldtoa_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_ldtoa_ctor (void)\n {\n   M2RTS_RegisterModule (\"ldtoa\", _M2_ldtoa_init, _M2_ldtoa_finish,\n \t\t\t_M2_ldtoa_dep);"}, {"sha": "bd0a4506a93d58311814c67c5516ef3638104631", "filename": "libgm2/libm2cor/KeyBoardLEDs.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2cor%2FKeyBoardLEDs.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2cor%2FKeyBoardLEDs.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2cor%2FKeyBoardLEDs.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -148,9 +148,8 @@ _M2_KeyBoardLEDs_dep (void)\n {\n }\n \n-struct _M2_KeyBoardLEDs_ctor { _M2_KeyBoardLEDs_ctor (); } _M2_KeyBoardLEDs_ctor;\n-\n-_M2_KeyBoardLEDs_ctor::_M2_KeyBoardLEDs_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+ _M2_KeyBoardLEDs_ctor (void)\n {\n   M2RTS_RegisterModule (\"KeyBoardLEDs\", _M2_KeyBoardLEDs_init, _M2_KeyBoardLEDs_finish,\n \t\t\t_M2_KeyBoardLEDs_dep);"}, {"sha": "2db26393f4a10b047fa7887aaf25fde126b4c79f", "filename": "libgm2/libm2iso/ErrnoCategory.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2iso%2FErrnoCategory.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2iso%2FErrnoCategory.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2iso%2FErrnoCategory.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -171,9 +171,8 @@ _M2_ErrnoCategory_dep (void)\n {\n }\n \n-struct _M2_ErrnoCategory_ctor { _M2_ErrnoCategory_ctor (); } _M2_ErrnoCategory_ctor;\n-\n-_M2_ErrnoCategory_ctor::_M2_ErrnoCategory_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_ErrnoCategory_ctor (void)\n {\n   M2RTS_RegisterModule (\"ErrnoCategory\", _M2_ErrnoCategory_init, _M2_ErrnoCategory_fini,\n \t\t\t_M2_ErrnoCategory_dep);"}, {"sha": "b6e46653530f3a216ad1ab580a7ba73a3553139b", "filename": "libgm2/libm2iso/RTco.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2iso%2FRTco.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2iso%2FRTco.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2iso%2FRTco.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -459,9 +459,8 @@ RTco_init (void)\n   return 0;\n }\n \n-struct _M2_RTco_ctor { _M2_RTco_ctor (); } _M2_RTco_ctor;\n-\n-_M2_RTco_ctor::_M2_RTco_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_RTco_ctor (void)\n {\n   M2RTS_RegisterModule (\"RTco\", _M2_RTco_init, _M2_RTco_fini,\n \t\t\t_M2_RTco_dep);"}, {"sha": "3c6b85533620710d033f8b3b9f2f03b058c32e16", "filename": "libgm2/libm2pim/Selective.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2FSelective.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2FSelective.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2FSelective.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -310,9 +310,8 @@ _M2_Selective_dep (void)\n {\n }\n \n-struct _M2_Selective_ctor { _M2_Selective_ctor (); } _M2_Selective_ctor;\n-\n-_M2_Selective_ctor::_M2_Selective_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_Selective_ctor (void)\n {\n   M2RTS_RegisterModule (\"Selective\", _M2_Selective_init, _M2_Selective_fini,\n \t\t\t_M2_Selective_dep);"}, {"sha": "2c37c7af87ef5bb3f350f5addc9fc84c0c492d80", "filename": "libgm2/libm2pim/SysExceptions.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2FSysExceptions.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2FSysExceptions.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2FSysExceptions.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -250,9 +250,8 @@ _M2_SysExceptions_dep (void)\n {\n }\n \n-struct _M2_SysExceptions_ctor { _M2_SysExceptions_ctor (); } _M2_SysExceptions_ctor;\n-\n-_M2_SysExceptions_ctor::_M2_SysExceptions_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_SysExceptions_ctor (void)\n {\n   M2RTS_RegisterModule (\"SysExceptions\", _M2_SysExceptions_init, _M2_SysExceptions_fini,\n \t\t\t_M2_SysExceptions_dep);"}, {"sha": "944a3cde72f59556d3df007aa3cc378cd683bbb3", "filename": "libgm2/libm2pim/UnixArgs.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2FUnixArgs.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2FUnixArgs.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2FUnixArgs.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -82,9 +82,8 @@ _M2_UnixArgs_dep (void)\n {\n }\n \n-struct _M2_UnixArgs_ctor { _M2_UnixArgs_ctor (); } _M2_UnixArgs_ctor;\n-\n-_M2_UnixArgs_ctor::_M2_UnixArgs_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_UnixArgs_ctor (void)\n {\n   M2RTS_RegisterModule (\"UnixArgs\", _M2_UnixArgs_init, _M2_UnixArgs_fini,\n \t\t\t_M2_UnixArgs_dep);"}, {"sha": "4e8ac9e166058999c287b5e14389384e3aec789f", "filename": "libgm2/libm2pim/cgetopt.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Fcgetopt.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Fcgetopt.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2Fcgetopt.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -149,9 +149,8 @@ _M2_cgetopt_dep (void)\n {\n }\n \n-struct _M2_cgetopt_ctor { _M2_cgetopt_ctor (); } _M2_cgetopt_ctor;\n-\n-_M2_cgetopt_ctor::_M2_cgetopt_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_cgetopt_ctor (void)\n {\n   M2RTS_RegisterModule (\"cgetopt\", _M2_cgetopt_init, _M2_cgetopt_fini,\n \t\t\t_M2_cgetopt_dep);"}, {"sha": "95d24d456f9e450050e3f15df1397fc37259b45c", "filename": "libgm2/libm2pim/dtoa.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Fdtoa.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Fdtoa.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2Fdtoa.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -255,9 +255,8 @@ _M2_dtoa_dep (void)\n {\n }\n \n-struct _M2_dtoa_ctor { _M2_dtoa_ctor (); } _M2_dtoa_ctor;\n-\n-_M2_dtoa_ctor::_M2_dtoa_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_dtoa_ctor (void)\n {\n   M2RTS_RegisterModule (\"dtoa\", _M2_dtoa_init, _M2_dtoa_fini,\n \t\t\t_M2_dtoa_dep);"}, {"sha": "296ab0b4c1112b18ca0120efd8e613279c080c42", "filename": "libgm2/libm2pim/errno.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Ferrno.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Ferrno.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2Ferrno.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -61,9 +61,8 @@ _M2_errno_dep (void)\n {\n }\n \n-struct _M2_errno_ctor { _M2_errno_ctor (); } _M2_errno_ctor;\n-\n-_M2_errno_ctor::_M2_errno_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_errno_ctor (void)\n {\n   M2RTS_RegisterModule (\"errno\", _M2_errno_init, _M2_errno_fini,\n \t\t\t_M2_errno_dep);"}, {"sha": "8b449830d709c44336cac960b4609577a34397ae", "filename": "libgm2/libm2pim/ldtoa.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Fldtoa.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Fldtoa.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2Fldtoa.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -180,9 +180,8 @@ _M2_ldtoa_dep (void)\n {\n }\n \n-struct _M2_ldtoa_ctor { _M2_ldtoa_ctor (); } _M2_ldtoa_ctor;\n-\n-_M2_ldtoa_ctor::_M2_ldtoa_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_ldtoa_ctor (void)\n {\n   M2RTS_RegisterModule (\"ldtoa\", _M2_ldtoa_init, _M2_ldtoa_fini,\n \t\t\t_M2_ldtoa_dep);"}, {"sha": "585ed14aff0ddc976b70888b1fa25820fc3f216d", "filename": "libgm2/libm2pim/sckt.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Fsckt.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Fsckt.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2Fsckt.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -421,9 +421,8 @@ _M2_sckt_dep (void)\n {\n }\n \n-struct _M2_sckt_ctor { _M2_sckt_ctor (); } _M2_sckt_ctor;\n-\n-_M2_sckt_ctor::_M2_sckt_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_sckt_ctor (void)\n {\n   M2RTS_RegisterModule (\"sckt\", _M2_sckt_init, _M2_sckt_finish,\n \t\t\t_M2_sckt_dep);"}, {"sha": "55818d2963e708510796fc72504dcc71f9c08b54", "filename": "libgm2/libm2pim/termios.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Ftermios.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Ftermios.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2Ftermios.cc?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -1978,9 +1978,8 @@ _M2_termios_dep (void)\n {\n }\n \n-struct _M2_termios_ctor { _M2_termios_ctor (); } _M2_termios_ctor;\n-\n-_M2_termios_ctor::_M2_termios_ctor (void)\n+extern \"C\" void __attribute__((__constructor__))\n+_M2_termios_ctor (void)\n {\n   M2RTS_RegisterModule (\"termios\", _M2_termios_init, _M2_termios_fini,\n \t\t\t_M2_termios_dep);"}, {"sha": "8e35949a87f04f30474efbcb861f33cca0f07b75", "filename": "libgm2/libm2pim/wrapc.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Fwrapc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec6d1fc09faea4a6be4df74babb73dca6b50ff0c/libgm2%2Flibm2pim%2Fwrapc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgm2%2Flibm2pim%2Fwrapc.c?ref=ec6d1fc09faea4a6be4df74babb73dca6b50ff0c", "patch": "@@ -294,3 +294,4 @@ void\n _M2_wrapc_ctor ()\n {\n }\n+"}]}