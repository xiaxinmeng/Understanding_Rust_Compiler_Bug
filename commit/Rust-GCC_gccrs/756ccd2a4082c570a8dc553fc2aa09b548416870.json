{"sha": "756ccd2a4082c570a8dc553fc2aa09b548416870", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU2Y2NkMmE0MDgyYzU3MGE4ZGM1NTNmYzJhYTA5YjU0ODQxNjg3MA==", "commit": {"author": {"name": "Danny Smith", "email": "dannysmith@users.sourceforge.net", "date": "2006-09-20T23:27:05Z"}, "committer": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2006-09-20T23:27:05Z"}, "message": "re PR target/27650 (internal compiler error while compiling Gecode)\n\n\tPR target/27650\n\t* class.c (check_for_override): Remove dllimport from virtual\n\tmethods.\n\nFrom-SVN: r117096", "tree": {"sha": "074e7c0e511e2707eeadd787851db0351973d428", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/074e7c0e511e2707eeadd787851db0351973d428"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/756ccd2a4082c570a8dc553fc2aa09b548416870", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/756ccd2a4082c570a8dc553fc2aa09b548416870", "html_url": "https://github.com/Rust-GCC/gccrs/commit/756ccd2a4082c570a8dc553fc2aa09b548416870", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/756ccd2a4082c570a8dc553fc2aa09b548416870/comments", "author": null, "committer": null, "parents": [{"sha": "1bded8e1a0abebabf1f2d6323ec859b10641b45b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bded8e1a0abebabf1f2d6323ec859b10641b45b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bded8e1a0abebabf1f2d6323ec859b10641b45b"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "fed109fe50e6821f6a8462b7c009febd2c241deb", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/756ccd2a4082c570a8dc553fc2aa09b548416870/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/756ccd2a4082c570a8dc553fc2aa09b548416870/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=756ccd2a4082c570a8dc553fc2aa09b548416870", "patch": "@@ -1,3 +1,9 @@\n+2006-09-20  Danny Smith  <dannysmith@users.sourceforge.net>\n+\n+\tPR target/27650\n+\t* class.c (check_for_override): Remove dllimport from virtual\n+\tmethods.\n+\n 2006-09-18  Steven Bosscher  <steven@gcc.gnu.org>\n \n \tPR c++/29087"}, {"sha": "fa11606f2d1c4427bd178e41a2f50c60fe7f0de8", "filename": "gcc/cp/class.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/756ccd2a4082c570a8dc553fc2aa09b548416870/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/756ccd2a4082c570a8dc553fc2aa09b548416870/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=756ccd2a4082c570a8dc553fc2aa09b548416870", "patch": "@@ -2342,6 +2342,16 @@ check_for_override (tree decl, tree ctype)\n       if (!DECL_VINDEX (decl))\n \tDECL_VINDEX (decl) = error_mark_node;\n       IDENTIFIER_VIRTUAL_P (DECL_NAME (decl)) = 1;\n+      if (DECL_DLLIMPORT_P (decl))\n+\t{\n+\t  /* When we handled the dllimport attribute we may not have known\n+\t     that this function is virtual   We can't use dllimport\n+\t     semantics for a virtual method because we need to initialize\n+\t     the vtable entry with a constant address.  */\n+\t  DECL_DLLIMPORT_P (decl) = 0;\n+\t  DECL_ATTRIBUTES (decl)\n+\t    = remove_attribute (\"dllimport\", DECL_ATTRIBUTES (decl));\n+\t}\n     }\n }\n "}]}