{"sha": "a29aa02e798ba731d43363495f158f0dea351160", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTI5YWEwMmU3OThiYTczMWQ0MzM2MzQ5NWYxNThmMGRlYTM1MTE2MA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-05-05T21:48:52Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-05-05T21:48:52Z"}, "message": "compiler: Use backend interface for type info expressions.\n\nFrom-SVN: r210084", "tree": {"sha": "ad4c255ccba58a2d216f6d7d461f8f76090d60fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad4c255ccba58a2d216f6d7d461f8f76090d60fa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a29aa02e798ba731d43363495f158f0dea351160", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a29aa02e798ba731d43363495f158f0dea351160", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a29aa02e798ba731d43363495f158f0dea351160", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a29aa02e798ba731d43363495f158f0dea351160/comments", "author": null, "committer": null, "parents": [{"sha": "c2ac23fe235cd1be19476d11b6942f1d0e1c7dac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2ac23fe235cd1be19476d11b6942f1d0e1c7dac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2ac23fe235cd1be19476d11b6942f1d0e1c7dac"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "ec59354f7fe0fc27a0589e7a3cd09d7ce6e51273", "filename": "gcc/go/gofrontend/expressions.cc", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a29aa02e798ba731d43363495f158f0dea351160/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a29aa02e798ba731d43363495f158f0dea351160/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc?ref=a29aa02e798ba731d43363495f158f0dea351160", "patch": "@@ -14095,9 +14095,13 @@ Type_info_expression::do_get_tree(Translate_context* context)\n     default:\n       go_unreachable();\n     }\n-  tree val_type_tree = type_to_tree(this->type()->get_backend(gogo));\n-  go_assert(val_type_tree != error_mark_node);\n-  return build_int_cstu(val_type_tree, val);\n+  mpz_t cst;\n+  mpz_init_set_ui(cst, val);\n+  Btype* int_btype = this->type()->get_backend(gogo);\n+  Bexpression* ret =\n+    gogo->backend()->integer_constant_expression(int_btype, cst);\n+  mpz_clear(cst);\n+  return expr_to_tree(ret);\n }\n \n // Dump ast representation for a type info expression."}]}