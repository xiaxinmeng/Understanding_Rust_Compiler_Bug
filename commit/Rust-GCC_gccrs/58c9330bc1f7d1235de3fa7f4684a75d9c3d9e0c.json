{"sha": "58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NThjOTMzMGJjMWY3ZDEyMzVkZTNmYTdmNDY4NGE3NWQ5YzNkOWUwYw==", "commit": {"author": {"name": "Matthew Fortune", "email": "matthew.fortune@imgtec.com", "date": "2014-12-19T20:18:08Z"}, "committer": {"name": "Matthew Fortune", "email": "mpf@gcc.gnu.org", "date": "2014-12-19T20:18:08Z"}, "message": "MIPSR6: mips-img-elf mips-img-linux-gnu triplets and vendor updates\n\ngcc/\n\n\t* config.gcc: Support mips*-img-linux* and mips*-img-elf*.\n\t* config/mips/mti-linux.h: Support mips32r6 as being the default arch.\n\t* config/mips/t-img-elf: New.\n\t* config/mips/t-img-linux: New.\n\ngcc/testsuite/\n\n\t* gcc.target/mips/pr37362.c: Skip for mips-img-elf.\n\nFrom-SVN: r218975", "tree": {"sha": "441ef3911d247f7c9a52d8cd4fc6d0602c7e9b15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/441ef3911d247f7c9a52d8cd4fc6d0602c7e9b15"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/comments", "author": {"login": "mfortune", "id": 10220247, "node_id": "MDQ6VXNlcjEwMjIwMjQ3", "avatar_url": "https://avatars.githubusercontent.com/u/10220247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mfortune", "html_url": "https://github.com/mfortune", "followers_url": "https://api.github.com/users/mfortune/followers", "following_url": "https://api.github.com/users/mfortune/following{/other_user}", "gists_url": "https://api.github.com/users/mfortune/gists{/gist_id}", "starred_url": "https://api.github.com/users/mfortune/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mfortune/subscriptions", "organizations_url": "https://api.github.com/users/mfortune/orgs", "repos_url": "https://api.github.com/users/mfortune/repos", "events_url": "https://api.github.com/users/mfortune/events{/privacy}", "received_events_url": "https://api.github.com/users/mfortune/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "943cf9cf629016365473adf17f42df2a61792394", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/943cf9cf629016365473adf17f42df2a61792394", "html_url": "https://github.com/Rust-GCC/gccrs/commit/943cf9cf629016365473adf17f42df2a61792394"}], "stats": {"total": 103, "additions": 101, "deletions": 2}, "files": [{"sha": "05374e1cbf9bdfc1735603f69cfd8fc35875bc90", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c", "patch": "@@ -1,3 +1,10 @@\n+2014-12-19  Matthew Fortune  <matthew.fortune@imgtec.com>\n+\n+\t* config.gcc: Support mips*-img-linux* and mips*-img-elf*.\n+\t* config/mips/mti-linux.h: Support mips32r6 as being the default arch.\n+\t* config/mips/t-img-elf: New.\n+\t* config/mips/t-img-linux: New.\n+\n 2014-12-19  Matthew Fortune  <matthew.fortune@imgtec.com>\n \n \t* config.gcc: Add mipsisa64r6 and mipsisa32r6 cpu support."}, {"sha": "c5d9ff83f2a8671696e780195ff709f6b04560fc", "filename": "gcc/config.gcc", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c", "patch": "@@ -1961,6 +1961,14 @@ mips*-*-netbsd*)\t\t\t# NetBSD/mips, either endian.\n \ttm_file=\"elfos.h ${tm_file} mips/elf.h netbsd.h netbsd-elf.h mips/netbsd.h\"\n \textra_options=\"${extra_options} netbsd.opt netbsd-elf.opt\"\n \t;;\n+mips*-img-linux*)\n+\ttm_file=\"dbxelf.h elfos.h gnu-user.h linux.h linux-android.h glibc-stdint.h ${tm_file} mips/gnu-user.h mips/linux.h mips/linux-common.h mips/mti-linux.h\"\n+\textra_options=\"${extra_options} linux-android.opt\"\n+\ttmake_file=\"${tmake_file} mips/t-img-linux\"\n+\ttm_defines=\"${tm_defines} MIPS_ISA_DEFAULT=37 MIPS_ABI_DEFAULT=ABI_32\"\n+\tgnu_ld=yes\n+\tgas=yes\n+\t;;\n mips*-mti-linux*)\n \ttm_file=\"dbxelf.h elfos.h gnu-user.h linux.h linux-android.h glibc-stdint.h ${tm_file} mips/gnu-user.h mips/linux.h mips/linux-common.h mips/mti-linux.h\"\n \textra_options=\"${extra_options} linux-android.opt\"\n@@ -2021,6 +2029,11 @@ mips*-mti-elf*)\n \ttmake_file=\"mips/t-mti-elf\"\n \ttm_defines=\"${tm_defines} MIPS_ISA_DEFAULT=33 MIPS_ABI_DEFAULT=ABI_32\"\n \t;;\n+mips*-img-elf*)\n+\ttm_file=\"elfos.h newlib-stdint.h ${tm_file} mips/elf.h mips/n32-elf.h mips/sde.h mips/mti-elf.h\"\n+\ttmake_file=\"mips/t-img-elf\"\n+\ttm_defines=\"${tm_defines} MIPS_ISA_DEFAULT=37 MIPS_ABI_DEFAULT=ABI_32\"\n+\t;;\n mips*-sde-elf*)\n \ttm_file=\"elfos.h newlib-stdint.h ${tm_file} mips/elf.h mips/n32-elf.h mips/sde.h\"\n \ttmake_file=\"mips/t-sde\""}, {"sha": "5761ab749c4333ae3f6299160f3f6ebb78f4434c", "filename": "gcc/config/mips/mti-linux.h", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Fconfig%2Fmips%2Fmti-linux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Fconfig%2Fmips%2Fmti-linux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmti-linux.h?ref=58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c", "patch": "@@ -19,8 +19,15 @@ along with GCC; see the file COPYING3.  If not see\n \n /* This target is a multilib target, specify the sysroot paths.  */\n #undef SYSROOT_SUFFIX_SPEC\n+#if MIPS_ISA_DEFAULT == 33 /* mips32r2 is the default */\n #define SYSROOT_SUFFIX_SPEC \\\n-    \"%{mips32:/mips32}%{mips64:/mips64}%{mips64r2:/mips64r2}%{mips16:/mips16}%{mmicromips:/micromips}%{mabi=64:/64}%{mel|EL:/el}%{msoft-float:/sof}%{mnan=2008:/nan2008}\"\n+    \"%{mips32:/mips32}%{mips64:/mips64}%{mips64r2:/mips64r2}%{mips32r6:/mips32r6}%{mips64r6:/mips64r6}%{mips16:/mips16}%{mmicromips:/micromips}%{mabi=64:/64}%{mel|EL:/el}%{msoft-float:/sof}%{!mips32r6:%{!mips64r6:%{mnan=2008:/nan2008}}}\"\n+#elif MIPS_ISA_DEFAULT == 37 /* mips32r6 is the default */\n+#define SYSROOT_SUFFIX_SPEC \\\n+    \"%{mips32:/mips32}%{mips64:/mips64}%{mips32r2:/mips32r2}%{mips64r2:/mips64r2}%{mips64r6:/mips64r6}%{mips16:/mips16}%{mmicromips:/micromips}%{mabi=64:/64}%{mel|EL:/el}%{msoft-float:/sof}%{!mips32r6:%{!mips64r6:%{mnan=2008:/nan2008}}}\"\n+#else /* Unexpected default ISA.  */\n+#error No SYSROOT_SUFFIX_SPEC exists for this default ISA\n+#endif\n \n #undef DRIVER_SELF_SPECS\n #define DRIVER_SELF_SPECS\t\t\t\t\t\t\\"}, {"sha": "cc5dabbc075691e1383b3bf71a0574f4137247fc", "filename": "gcc/config/mips/t-img-elf", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Fconfig%2Fmips%2Ft-img-elf", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Fconfig%2Fmips%2Ft-img-elf", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-img-elf?ref=58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c", "patch": "@@ -0,0 +1,38 @@\n+# Copyright (C) 2014 Free Software Foundation, Inc.\n+#\n+# This file is part of GCC.\n+#\n+# GCC is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3, or (at your option)\n+# any later version.\n+#\n+# GCC is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+# The default build is mips32r6, hard-float big-endian.\n+# A multilib for mips32r6+LE\n+# A multilib for mips64r6\n+# A multilib for mips64r6+LE\n+# A multilib for mips32r6+LE+singlefloat+shortdouble\n+\n+MULTILIB_OPTIONS = mips64r6 mabi=64 EL msoft-float/msingle-float fshort-double\n+MULTILIB_DIRNAMES = mips64r6 64 el sof sgl short\n+MULTILIB_MATCHES = EL=mel EB=meb\n+\n+# Don't build 64r6 with single-float\n+MULTILIB_EXCEPTIONS += mips64r6/*msingle-float*\n+MULTILIB_EXCEPTIONS += mips64r6/*fshort-double*\n+\n+MULTILIB_EXCEPTIONS += mabi=64*\n+MULTILIB_EXCEPTIONS += msingle-float*\n+MULTILIB_EXCEPTIONS += *msingle-float\n+MULTILIB_EXCEPTIONS += fshort-double\n+MULTILIB_EXCEPTIONS += EL/fshort-double\n+MULTILIB_EXCEPTIONS += *msoft-float/fshort-double"}, {"sha": "5dbfbe45ef72e78ec349c0c2a4664a7751346c66", "filename": "gcc/config/mips/t-img-linux", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Fconfig%2Fmips%2Ft-img-linux", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Fconfig%2Fmips%2Ft-img-linux", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-img-linux?ref=58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c", "patch": "@@ -0,0 +1,30 @@\n+# Copyright (C) 2014 Free Software Foundation, Inc.\n+#\n+# This file is part of GCC.\n+#\n+# GCC is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3, or (at your option)\n+# any later version.\n+#\n+# GCC is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+# The default build is mips32r6, hard-float big-endian.  Add mips64r6,\n+# 64-bit ABI and little-endian variations.\n+\n+MULTILIB_OPTIONS = mips64r6 mabi=64 EL\n+MULTILIB_DIRNAMES = mips64r6 64 el\n+MULTILIB_MATCHES = EL=mel EB=meb\n+\n+# The 64 bit ABI is not supported on the mips32r6 architecture.\n+# Because mips32r6 is the default we can't use that flag to trigger\n+# the exception so we check for mabi=64 with no specific mips\n+# architecture flag instead.\n+MULTILIB_EXCEPTIONS += mabi=64*"}, {"sha": "d00b5d772f57a1a2c0e281cc5516f4eafc772dea", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c", "patch": "@@ -1,3 +1,7 @@\n+2014-12-19  Matthew Fortune  <matthew.fortune@imgtec.com>\n+\n+\t* gcc.target/mips/pr37362.c: Skip for mips-img-elf.\n+\n 2014-12-19  Matthew Fortune  <matthew.fortune@imgtec.com>\n \t    Steve Ellcey  <sellcey@imgtec.com>\n "}, {"sha": "2ad4e8dbc17e969d914d6f15def7a5f2e18c7646", "filename": "gcc/testsuite/gcc.target/mips/pr37362.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fpr37362.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fpr37362.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fpr37362.c?ref=58c9330bc1f7d1235de3fa7f4684a75d9c3d9e0c", "patch": "@@ -1,5 +1,5 @@\n /* mips*-sde-elf doesn't have 128-bit long doubles.  */\n-/* { dg-do compile { target { ! { mips*-sde-elf mips*-mti-elf } } } } */\n+/* { dg-do compile { target { ! { mips*-sde-elf mips*-mti-elf mips*-img-elf } } } } */\n /* { dg-options \"-march=mips64r2 -mabi=n32\" } */\n \n typedef float TFtype __attribute__((mode(TF)));"}]}