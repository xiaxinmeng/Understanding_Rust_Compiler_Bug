{"sha": "f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQ4NzU4ZTRlZTQ0MGE4ODY2NDg1ZmFkN2M2M2Y0ZjJmMmUxZGJiMA==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2003-05-21T22:00:58Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2003-05-21T22:00:58Z"}, "message": "re PR target/6428 ([hppa*-hp-hpux] gmon.out is not generated when application to be profiled is linked with shared libgcc)\n\n\tPR target/6428\n\t* pa-hpux10.h (LINK_SPEC, LIB_SPEC): Move -L options for profiling\n\tdirectories from LIB_SPEC to LINK_SPEC.  Emit warning if `-p' or `-pg'\n\toption is used without `-static'.\n\t* pa-hpux11.h (LINK_SPEC, LIB_SPEC): Likewise.\n\t* pa64-hpux.h (LINK_SPEC, LIB_SPEC): Likewise.\n\t* g++.old-deja/g++.law/profile1.C (dg-options): Add -static to options\n\tfor hppa*-hp-hpux*.\n\t* gcc.dg/20021014-1.c (dg-options): Likewise.\n\t* gcc.dg/nest.c (dg-options): Likewise.\n\nFrom-SVN: r67068", "tree": {"sha": "fa47d879a76304b6366e8da00594921f81626821", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fa47d879a76304b6366e8da00594921f81626821"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/comments", "author": null, "committer": null, "parents": [{"sha": "7a29f483cf7f68eedb4ac1f308b083bf3300cf56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a29f483cf7f68eedb4ac1f308b083bf3300cf56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a29f483cf7f68eedb4ac1f308b083bf3300cf56"}], "stats": {"total": 96, "additions": 76, "deletions": 20}, "files": [{"sha": "cc049d36f20a6faa6f249275cbe1853f276df660", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "patch": "@@ -1,3 +1,12 @@\n+2003-05-21  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\tPR target/6428\n+\t* pa-hpux10.h (LINK_SPEC, LIB_SPEC): Move -L options for profiling\n+\tdirectories from LIB_SPEC to LINK_SPEC.  Emit warning if `-p' or `-pg'\n+\toption is used without `-static'.\n+\t* pa-hpux11.h (LINK_SPEC, LIB_SPEC): Likewise.\n+\t* pa64-hpux.h (LINK_SPEC, LIB_SPEC): Likewise.\n+\n 2003-05-21  Bob Wilson  <bob.wilson@acm.org>\n \n \t* config/xtensa/xtensa.h (MASK_SERIALIZE_VOLATILE,"}, {"sha": "1c895983ef1f90c3f8131e0547d9da31e2797381", "filename": "gcc/config/pa/pa-hpux10.h", "status": "modified", "additions": 20, "deletions": 7, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Fconfig%2Fpa%2Fpa-hpux10.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Fconfig%2Fpa%2Fpa-hpux10.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa-hpux10.h?ref=f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "patch": "@@ -69,12 +69,27 @@ Boston, MA 02111-1307, USA.  */\n /* We can debug dynamically linked executables on hpux9; we also want\n    dereferencing of a NULL pointer to cause a SEGV.  */\n #undef LINK_SPEC\n-#if ((TARGET_DEFAULT | TARGET_CPU_DEFAULT) &  MASK_PA_11)\n+#if ((TARGET_DEFAULT | TARGET_CPU_DEFAULT) & MASK_PA_11)\n #define LINK_SPEC \\\n-  \"%{!mpa-risc-1-0:%{!shared:-L/lib/pa1.1 -L/usr/lib/pa1.1 }} -z %{mlinker-opt:-O} %{!shared:-u main} %{static:-a archive} %{shared:-b}\"\n+  \"%{!mpa-risc-1-0:%{!shared:-L/lib/pa1.1 -L/usr/lib/pa1.1 }}\\\n+   %{!shared:%{p:-L/lib/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   %{!shared:%{pg:-L/lib/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   -z %{mlinker-opt:-O} %{!shared:-u main}\\\n+   %{static:-a archive} %{shared:-b}\"\n #else\n #define LINK_SPEC \\\n-  \"-z %{mlinker-opt:-O} %{!shared:-u main} %{static:-a archive} %{shared:-b}\"\n+  \"%{!shared:%{p:-L/lib/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   %{!shared:%{pg:-L/lib/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   -z %{mlinker-opt:-O} %{!shared:-u main}\\\n+   %{static:-a archive} %{shared:-b}\"\n #endif\n \n /* Like the default, except no -lg.  */\n@@ -84,10 +99,8 @@ Boston, MA 02111-1307, USA.  */\n      %{!p:%{!pg:\\\n        %{!threads:-lc %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}\\\n        %{threads:-lcma -lc_r}}}\\\n-     %{p: -L/lib/libp/ -lc\\\n-       %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}\\\n-     %{pg: -L/lib/libp/ -lc\\\n-       %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\"\n+     %{p:%{!pg:-lc %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\\\n+     %{pg:-lc %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\"\n \n #undef THREAD_MODEL_SPEC\n #define THREAD_MODEL_SPEC \"%{!threads:single}%{threads:dce}\""}, {"sha": "a1dbf20a454483ec8ae57e519d3c81e86a2a28cd", "filename": "gcc/config/pa/pa-hpux11.h", "status": "modified", "additions": 18, "deletions": 8, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h?ref=f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "patch": "@@ -70,14 +70,26 @@ Boston, MA 02111-1307, USA.  */\n /* We can debug dynamically linked executables on hpux11; we also\n    want dereferencing of a NULL pointer to cause a SEGV.  */\n #undef LINK_SPEC\n-#if ((TARGET_DEFAULT | TARGET_CPU_DEFAULT) & 1)\n+#if ((TARGET_DEFAULT | TARGET_CPU_DEFAULT) & MASK_PA_11)\n #define LINK_SPEC \\\n-  \"%{!mpa-risc-1-0:%{!shared:-L/lib/pa1.1 -L/usr/lib/pa1.1 }} -z\\\n-   %{mlinker-opt:-O} %{!shared:-u main -u __gcc_plt_call}\\\n+  \"%{!mpa-risc-1-0:%{!shared:-L/lib/pa1.1 -L/usr/lib/pa1.1 }}\\\n+   %{!shared:%{p:-L/lib/libp -L/usr/lib/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   %{!shared:%{pg:-L/lib/libp -L/usr/lib/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   -z %{mlinker-opt:-O} %{!shared:-u main -u __gcc_plt_call}\\\n    %{static:-a archive} %{shared:-b}\"\n #else\n #define LINK_SPEC \\\n-  \"-z %{mlinker-opt:-O} %{!shared:-u main -u __gcc_plt_call}\\\n+  \"%{!shared:%{p:-L/lib/libp -L/usr/lib/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   %{!shared:%{pg:-L/lib/libp -L/usr/lib/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   -z %{mlinker-opt:-O} %{!shared:-u main -u __gcc_plt_call}\\\n    %{static:-a archive} %{shared:-b}\"\n #endif\n \n@@ -88,10 +100,8 @@ Boston, MA 02111-1307, USA.  */\n      %{!p:%{!pg:\\\n        %{!threads:-lc %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}\\\n        %{threads:-lcma -lc_r}}}\\\n-     %{p: -L/lib/libp/ -lc\\\n-       %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}\\\n-     %{pg: -L/lib/libp/ -lc\\\n-       %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\"\n+     %{p:%{!pg:-lc %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\\\n+     %{pg:-lc %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\"\n \n /* Under hpux11, the normal location of the `ld' and `as' programs is the\n    /usr/ccs/bin directory.  */"}, {"sha": "9a00a218cb31f06606e977cdab2ab3f7be54d030", "filename": "gcc/config/pa/pa64-hpux.h", "status": "modified", "additions": 19, "deletions": 5, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Fconfig%2Fpa%2Fpa64-hpux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Fconfig%2Fpa%2Fpa64-hpux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa64-hpux.h?ref=f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "patch": "@@ -37,20 +37,34 @@ Boston, MA 02111-1307, USA.  */\n #undef LINK_SPEC\n #if ((TARGET_DEFAULT | TARGET_CPU_DEFAULT) & MASK_GNU_LD)\n #define LINK_SPEC \\\n-  \"%{mhp-ld:+Accept TypeMismatch} -E %{mlinker-opt:-O} %{!shared:-u main} %{static:-a archive} %{shared:%{mhp-ld:-b}%{!mhp-ld:-shared}}\"\n+  \"%{!shared:%{p:-L/lib/pa20_64/libp -L/usr/lib/pa20_64/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   %{!shared:%{pg:-L/lib/pa20_64/libp -L/usr/lib/pa20_64/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   %{mhp-ld:+Accept TypeMismatch} -E %{mlinker-opt:-O} %{!shared:-u main}\\\n+   %{static:-a archive} %{shared:%{mhp-ld:-b}%{!mhp-ld:-shared}}\"\n #else\n #define LINK_SPEC \\\n-  \"%{!mgnu-ld:+Accept TypeMismatch} -E %{mlinker-opt:-O} %{!shared:-u main} %{static:-a archive} %{shared:%{mgnu-ld:-shared}%{!mgnu-ld:-b}}\"\n+  \"%{!shared:%{p:-L/lib/pa20_64/libp -L/usr/lib/pa20_64/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   %{!shared:%{pg:-L/lib/pa20_64/libp -L/usr/lib/pa20_64/libp %{!static:\\\n+     %nWarning: consider linking with `-static' as system libraries with\\n\\\n+     %n  profiling support are only provided in archive format}}}\\\n+   %{!mgnu-ld:+Accept TypeMismatch} -E %{mlinker-opt:-O} %{!shared:-u main}\\\n+   %{static:-a archive} %{shared:%{mgnu-ld:-shared}%{!mgnu-ld:-b}}\"\n #endif\n \n /* Like the default, except no -lg.  */\n #undef LIB_SPEC\n #define LIB_SPEC \\\n   \"%{!shared:\\\n      %{!p:%{!pg: -lc %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\\\n-     %{pg: -L/usr/lib/pa20_64/libp/ -lgprof -lc\\\n-       %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}\\\n-     %{p: -L/usr/lib/pa20_64/libp/ -lprof -lc\\\n+     %{p:%{!pg:-lprof -lc\\\n+       %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\\\n+     %{pg:-lgprof -lc\\\n        %{static:%{!nolibdld:-a shared -ldld -a archive -lc}}}}\\\n    /usr/lib/pa20_64/milli.a\"\n "}, {"sha": "0184524095cc7946a5bef9cb922f5cd995bd968a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "patch": "@@ -1,3 +1,10 @@\n+2003-05-21  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\t* g++.old-deja/g++.law/profile1.C (dg-options): Add -static to options\n+\tfor hppa*-hp-hpux*.\n+\t* gcc.dg/20021014-1.c (dg-options): Likewise.\n+\t* gcc.dg/nest.c (dg-options): Likewise.\n+\n 2003-05-21  Danny Smith  <dannysmith@users.sourceforge.net>\n \n \tPR c++/9738"}, {"sha": "24a79b438a6a3fe91b1e97f19bf2a1be67a81c7f", "filename": "gcc/testsuite/g++.old-deja/g++.law/profile1.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.law%2Fprofile1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.law%2Fprofile1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.law%2Fprofile1.C?ref=f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "patch": "@@ -1,5 +1,6 @@\n // { dg-do run { xfail m68k-motorola-sysv m88k-motorola-sysv3 mips*-*-* i[3456]86-*-sco3.2v5* } }\n // { dg-options \"-pg\" }\n+// { dg-options \"-pg -static\" { target hppa*-*-hpux* } }\n // GROUPS passed profiling\n #include <stdio.h>\n main()"}, {"sha": "69e2eaaba197b123e5d2ab7fa8500c4b7c35fd88", "filename": "gcc/testsuite/gcc.dg/20021014-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Ftestsuite%2Fgcc.dg%2F20021014-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Ftestsuite%2Fgcc.dg%2F20021014-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20021014-1.c?ref=f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do run } */\n /* { dg-options \"-O2 -p\" } */\n+/* { dg-options \"-O2 -p -static\" { target hppa*-*-hpux* } } */\n /* { dg-error \"profiler\" \"No profiler support\" { target mmix-*-* xstormy16-*-* } 0 } */\n /* { dg-error \"\" \"consider using `-pg' instead of `-p' with gprof(1)\" { target *-*-freebsd* } 0 } */\n /* Support for -p on solaris2 relies on mcrt1.o which comes with the"}, {"sha": "adb9f0dca8203fe75844c34aa461e98bda3e65b8", "filename": "gcc/testsuite/gcc.dg/nest.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Ftestsuite%2Fgcc.dg%2Fnest.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f48758e4ee440a8866485fad7c63f4f2f2e1dbb0/gcc%2Ftestsuite%2Fgcc.dg%2Fnest.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fnest.c?ref=f48758e4ee440a8866485fad7c63f4f2f2e1dbb0", "patch": "@@ -1,6 +1,7 @@\n /* PR 5967, PR 7114 */\n /* { dg-do run } */\n /* { dg-options \"-O2 -pg\" } */\n+/* { dg-options \"-O2 -pg -static\" { target hppa*-*-hpux* } } */\n /* { dg-error \"profiler\" \"No profiler support\" { target mmix-*-* xstormy16-*-* } 0 } */\n /* Support for -pg on irix relies on gcrt1.o which doesn't exist yet.\n    See: http://gcc.gnu.org/ml/gcc/2002-10/msg00169.html */"}]}