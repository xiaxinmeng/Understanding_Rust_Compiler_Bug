{"sha": "fd6b2a6d3e5054e023b85c67e88910a4406d0935", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQ2YjJhNmQzZTUwNTRlMDIzYjg1YzY3ZTg4OTEwYTQ0MDZkMDkzNQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-04-18T04:42:33Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-04-18T04:42:33Z"}, "message": "(cmpsi): Use `cmpq' for small immediate values.\n\n(addsi3): Use `loada' for `reg1 = reg2  + immed'.\n\nFrom-SVN: r4182", "tree": {"sha": "0c60a1f4da800b493671b6fcaebdcb048db72b02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c60a1f4da800b493671b6fcaebdcb048db72b02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd6b2a6d3e5054e023b85c67e88910a4406d0935", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd6b2a6d3e5054e023b85c67e88910a4406d0935", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd6b2a6d3e5054e023b85c67e88910a4406d0935", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd6b2a6d3e5054e023b85c67e88910a4406d0935/comments", "author": null, "committer": null, "parents": [{"sha": "a3404926b09df8cc0da6e98ff27691f527c24851", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3404926b09df8cc0da6e98ff27691f527c24851", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3404926b09df8cc0da6e98ff27691f527c24851"}], "stats": {"total": 34, "additions": 20, "deletions": 14}, "files": [{"sha": "24aa2588cdf6fde17ba740348a2add9ef093df9d", "filename": "gcc/config/clipper/clipper.md", "status": "modified", "additions": 20, "deletions": 14, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd6b2a6d3e5054e023b85c67e88910a4406d0935/gcc%2Fconfig%2Fclipper%2Fclipper.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd6b2a6d3e5054e023b85c67e88910a4406d0935/gcc%2Fconfig%2Fclipper%2Fclipper.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fclipper%2Fclipper.md?ref=fd6b2a6d3e5054e023b85c67e88910a4406d0935", "patch": "@@ -83,13 +83,26 @@\n   \"\"\n   \"*\n {\n+  int val;\n+\n   if (which_alternative == 0)\n     return \\\"cmpw   %1,%0\\\";\n \n   if (which_alternative == 1)\n-    return \\\"cmpi   %1,%0\\\";\n+    {\n+      val = INTVAL (operands[1]);\n+      if (0 <= val && val < 16)\n+\treturn \\\"cmpq   %1,%0\\\";\n+      return \\\"cmpi   %1,%0\\\";\n+    }\n \n   cc_status.flags |= CC_REVERSED;\t/* immediate must be first */\n+\n+  val = INTVAL (operands[0]);\n+\n+  if (0 <= val && val < 16)\n+    return \\\"cmpq   %0,%1\\\";\n+\n   return \\\"cmpi   %0,%1\\\";\n }\")\n \n@@ -688,12 +701,16 @@\n (define_insn \"addsi3\"\n   [(set (match_operand:SI 0 \"int_reg_operand\" \"=r,r,r\")\n \t(plus:SI (match_operand:SI 1 \"int_reg_operand\" \"%0,r,r\")\n-\t\t (match_operand:SI 2 \"nonmemory_operand\" \"rn,0,r\")))]\n+\t\t (match_operand:SI 2 \"nonmemory_operand\" \"rn,0,rn\")))]\n   \"\"\n   \"*\n {\n   if (which_alternative == 2)\t\t/* 3 address version */\n-    return \\\"loada  [%2](%1),%0\\\";\n+    {\n+      if (GET_CODE (operands[2]) == CONST_INT)\n+\treturn \\\"loada  %a2(%1),%0\\\";\n+      return \\\"loada  [%2](%1),%0\\\";\n+    }\n \t\t\t\t\t/* 2 address version */\n   if (GET_CODE (operands[2]) == CONST_INT)\n     {\n@@ -1377,14 +1394,3 @@\n ;; These patters are jump_insns that do not allow output reloads and clipper\n ;; can only decrement and test registers.\n ;;\n-\n-\f\n-;;- Local variables:\n-;;- mode:c\n-;;- comment-start: \";;- \"\n-;;- eval: (set-syntax-table (copy-sequence (syntax-table)))\n-;;- eval: (modify-syntax-entry ?[ \"(]\")\n-;;- eval: (modify-syntax-entry ?] \")[\")\n-;;- eval: (modify-syntax-entry ?{ \"(}\")\n-;;- eval: (modify-syntax-entry ?} \"){\")\n-;;- End:"}]}