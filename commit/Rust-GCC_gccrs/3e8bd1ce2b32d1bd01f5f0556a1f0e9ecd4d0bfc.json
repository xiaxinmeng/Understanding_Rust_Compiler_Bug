{"sha": "3e8bd1ce2b32d1bd01f5f0556a1f0e9ecd4d0bfc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2U4YmQxY2UyYjMyZDFiZDAxZjVmMDU1NmExZjBlOWVjZDRkMGJmYw==", "commit": {"author": {"name": "Steve Chamberlain", "email": "sac@gnu.org", "date": "1994-12-07T01:52:01Z"}, "committer": {"name": "Steve Chamberlain", "email": "sac@gnu.org", "date": "1994-12-07T01:52:01Z"}, "message": "*** empty log message ***\n\nFrom-SVN: r8620", "tree": {"sha": "afcbf6f7bfb38d3c2ddc9499948a7dcd7502a915", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/afcbf6f7bfb38d3c2ddc9499948a7dcd7502a915"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3e8bd1ce2b32d1bd01f5f0556a1f0e9ecd4d0bfc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e8bd1ce2b32d1bd01f5f0556a1f0e9ecd4d0bfc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e8bd1ce2b32d1bd01f5f0556a1f0e9ecd4d0bfc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e8bd1ce2b32d1bd01f5f0556a1f0e9ecd4d0bfc/comments", "author": null, "committer": null, "parents": [{"sha": "732149f9d5d8a5b6d760f17399134de2c17e84ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/732149f9d5d8a5b6d760f17399134de2c17e84ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/732149f9d5d8a5b6d760f17399134de2c17e84ad"}], "stats": {"total": 34, "additions": 23, "deletions": 11}, "files": [{"sha": "d514746dd45a03a75addffc56e9fca5c73ce48b6", "filename": "gcc/config/sh/sh.md", "status": "modified", "additions": 23, "deletions": 11, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e8bd1ce2b32d1bd01f5f0556a1f0e9ecd4d0bfc/gcc%2Fconfig%2Fsh%2Fsh.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e8bd1ce2b32d1bd01f5f0556a1f0e9ecd4d0bfc/gcc%2Fconfig%2Fsh%2Fsh.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.md?ref=3e8bd1ce2b32d1bd01f5f0556a1f0e9ecd4d0bfc", "patch": "@@ -616,7 +616,6 @@\n ;; shift left\n \n \n-\n (define_insn \"ashlsi3_k\"\n   [(set (match_operand:SI 0 \"arith_reg_operand\" \"=r,r\")\n \t(ashift:SI (match_operand:SI 1 \"arith_reg_operand\" \"0,0\")\n@@ -681,21 +680,33 @@\n \n (define_insn \"ashrsi2_16\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n-\t\t\t  (ashiftrt:SI (match_operand:SI 1 \"register_operand\" \"0\")\n-\t\t\t\t       (const_int 16)))\n-\t     (clobber (reg:SI 18))]\n+        (ashiftrt:SI (match_operand:SI 1 \"register_operand\" \"r\")\n+                     (const_int 16)))]\n   \"\"\n-  \"shlr16\t%0\\;exts.w\t%0,%0\"\n+  \"swap.w\t%1,%0\\;exts.w\t%0,%0\"\n   [(set_attr \"length\" \"4\")])\n \n-\n (define_insn \"ashrsi2_31\"\n-  [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n-\t(ashiftrt:SI (match_operand:SI 1 \"register_operand\" \"0\")\n-\t\t     (const_int 31)))]\n+  [(set (match_operand:SI 0 \"register_operand\" \"=r,r\")\n+        (ashiftrt:SI (match_operand:SI 1 \"register_operand\" \"0,!r\")\n+                     (const_int 31)))\n+   (clobber (reg:SI 18))]\n   \"\"\n-  \"shal\t%0\\;subc\t%0,%0\"\n-  [(set_attr \"length\" \"4\")])\n+  \"*\n+{\n+  if (which_alternative == 1)\n+    {\n+      if (dead_or_set_p (insn, operands[1]))\n+        return \\\"shll\t%1\\;subc\t%0,%0\\\";\n+      else\n+        return \\\"mov\t%1,%0\\;shll\t%0\\;subc\t%0,%0\\\";\n+    }\n+  return \\\"shll\t%0\\;subc\t%0,%0\\\";\n+}\"\n+  [(set_attr \"length\" \"4,6\")])\n+\n+\n+\n \n \n (define_insn \"ashrsi3_n\"\n@@ -1945,3 +1956,4 @@\n \t\n \t\n \t\n+\t\n\\ No newline at end of file"}]}