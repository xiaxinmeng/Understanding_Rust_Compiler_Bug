{"sha": "ae4c4d53b46fb246534cc9de41d230610b50d99a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWU0YzRkNTNiNDZmYjI0NjUzNGNjOWRlNDFkMjMwNjEwYjUwZDk5YQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-07-04T10:43:01Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-07-04T10:43:01Z"}, "message": "[multiple changes]\n\n2016-07-04  Olivier Hainque  <hainque@adacore.com>\n\n\t* g-sercom-mingw.adb (Set): Fix port configuration for the\n\tnon-blocking + null-timeout case, request of immediate return.\n\n2016-07-04  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch6.adb (Is_Non_Overriding_Operation): Add guard to test\n\tof generic parent type when operation is a parameterless function\n\tthat may dispatch on result.\n\nFrom-SVN: r237970", "tree": {"sha": "1a22b6fe19378d9cc9e5ce07092406bd0b7ab155", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1a22b6fe19378d9cc9e5ce07092406bd0b7ab155"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ae4c4d53b46fb246534cc9de41d230610b50d99a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae4c4d53b46fb246534cc9de41d230610b50d99a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae4c4d53b46fb246534cc9de41d230610b50d99a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae4c4d53b46fb246534cc9de41d230610b50d99a/comments", "author": null, "committer": null, "parents": [{"sha": "c70cf4f8eb5bf8623e0f89eef6aabf308ef04c1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c70cf4f8eb5bf8623e0f89eef6aabf308ef04c1b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c70cf4f8eb5bf8623e0f89eef6aabf308ef04c1b"}], "stats": {"total": 37, "additions": 34, "deletions": 3}, "files": [{"sha": "55e56f78bbc5e10c08bf65837d2cc2c78afa6e0b", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae4c4d53b46fb246534cc9de41d230610b50d99a/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae4c4d53b46fb246534cc9de41d230610b50d99a/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=ae4c4d53b46fb246534cc9de41d230610b50d99a", "patch": "@@ -1,3 +1,14 @@\n+2016-07-04  Olivier Hainque  <hainque@adacore.com>\n+\n+\t* g-sercom-mingw.adb (Set): Fix port configuration for the\n+\tnon-blocking + null-timeout case, request of immediate return.\n+\n+2016-07-04  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch6.adb (Is_Non_Overriding_Operation): Add guard to test\n+\tof generic parent type when operation is a parameterless function\n+\tthat may dispatch on result.\n+\n 2016-07-04  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* freeze.adb, ghost.adb, sem_ch13.adb: Minor reformatting."}, {"sha": "ec3beaa2b0325c240472740689d3d81318846055", "filename": "gcc/ada/g-sercom-mingw.adb", "status": "modified", "additions": 18, "deletions": 2, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae4c4d53b46fb246534cc9de41d230610b50d99a/gcc%2Fada%2Fg-sercom-mingw.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae4c4d53b46fb246534cc9de41d230610b50d99a/gcc%2Fada%2Fg-sercom-mingw.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-sercom-mingw.adb?ref=ae4c4d53b46fb246534cc9de41d230610b50d99a", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---                    Copyright (C) 2007-2013, AdaCore                      --\n+--                    Copyright (C) 2007-2016, AdaCore                      --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -248,11 +248,27 @@ package body GNAT.Serial_Communications is\n          Raise_Error (\"cannot set comm state\");\n       end if;\n \n-      --  Set the timeout status\n+      --  Set the timeout status, to honor our spec with respect to\n+      --  read timeouts. Always disconnect write timeouts.\n \n       if Block then\n+\n+         --  Blocking reads - no timeout at all\n+\n          Com_Time_Out := (others => 0);\n+      elsif Timeout = 0.0 then\n+\n+         --  Non-blocking reads and null timeout - immediate return\n+         --  with what we have - set ReadIntervalTimeout to MAXDWORD.\n+\n+         Com_Time_Out :=\n+           (ReadIntervalTimeout => DWORD'Last,\n+            others              => 0);\n       else\n+\n+         --  Non-blocking reads with timeout - set total read timeout\n+         --  accordingly\n+\n          Com_Time_Out :=\n            (ReadTotalTimeoutConstant => DWORD (1000 * Timeout),\n             others                   => 0);"}, {"sha": "0b5f7a3ba29728618eabb63d12f4ec0027b4f299", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae4c4d53b46fb246534cc9de41d230610b50d99a/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae4c4d53b46fb246534cc9de41d230610b50d99a/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=ae4c4d53b46fb246534cc9de41d230610b50d99a", "patch": "@@ -9077,6 +9077,8 @@ package body Sem_Ch6 is\n          --  tested.\n \n          Formal := First_Formal (Prev_E);\n+         F_Typ  := Empty;\n+\n          while Present (Formal) loop\n             F_Typ := Base_Type (Etype (Formal));\n \n@@ -9090,6 +9092,8 @@ package body Sem_Ch6 is\n             Next_Formal (Formal);\n          end loop;\n \n+         --  If the function dispatches on result check the result type.\n+\n          if No (G_Typ) and then Ekind (Prev_E) = E_Function then\n             G_Typ := Get_Generic_Parent_Type (Base_Type (Etype (Prev_E)));\n          end if;\n@@ -9168,7 +9172,7 @@ package body Sem_Ch6 is\n                --  private part of the instance. Emit a warning now, which will\n                --  make the subsequent error message easier to understand.\n \n-               if not Is_Abstract_Type (F_Typ)\n+               if Present (F_Typ) and then not Is_Abstract_Type (F_Typ)\n                  and then Is_Abstract_Subprogram (Prev_E)\n                  and then In_Private_Part (Current_Scope)\n                then"}]}