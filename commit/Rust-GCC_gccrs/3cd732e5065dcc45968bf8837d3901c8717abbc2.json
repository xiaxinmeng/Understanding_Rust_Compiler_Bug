{"sha": "3cd732e5065dcc45968bf8837d3901c8717abbc2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2NkNzMyZTUwNjVkY2M0NTk2OGJmODgzN2QzOTAxYzg3MTdhYmJjMg==", "commit": {"author": {"name": "Max Filippov", "email": "jcmvbkbc@gmail.com", "date": "2018-11-05T23:58:13Z"}, "committer": {"name": "Max Filippov", "email": "jcmvbkbc@gcc.gnu.org", "date": "2018-11-05T23:58:13Z"}, "message": "gcc: xtensa: don't force PIC for uclinux target\n\nxtensa-uclinux uses bFLT executable file format that cannot relocate\nfields representing offsets from data to code. C++ objects built as PIC\nuse offsets to encode FDE structures. As a result C++ exception handling\ndoesn't work correctly on xtensa-uclinux. Don't use PIC by default on\nxtensa-uclinux.\n\ngcc/\n2018-11-05  Max Filippov  <jcmvbkbc@gmail.com>\n\n\t* config/xtensa/uclinux.h (XTENSA_ALWAYS_PIC): Change to 0.\n\nFrom-SVN: r265823", "tree": {"sha": "eac8eded62391353a1ae59a57abcc398509033b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eac8eded62391353a1ae59a57abcc398509033b2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3cd732e5065dcc45968bf8837d3901c8717abbc2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3cd732e5065dcc45968bf8837d3901c8717abbc2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3cd732e5065dcc45968bf8837d3901c8717abbc2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3cd732e5065dcc45968bf8837d3901c8717abbc2/comments", "author": {"login": "jcmvbkbc", "id": 166731, "node_id": "MDQ6VXNlcjE2NjczMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/166731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcmvbkbc", "html_url": "https://github.com/jcmvbkbc", "followers_url": "https://api.github.com/users/jcmvbkbc/followers", "following_url": "https://api.github.com/users/jcmvbkbc/following{/other_user}", "gists_url": "https://api.github.com/users/jcmvbkbc/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcmvbkbc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcmvbkbc/subscriptions", "organizations_url": "https://api.github.com/users/jcmvbkbc/orgs", "repos_url": "https://api.github.com/users/jcmvbkbc/repos", "events_url": "https://api.github.com/users/jcmvbkbc/events{/privacy}", "received_events_url": "https://api.github.com/users/jcmvbkbc/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4239f144ce50c94f2c6cc232028f167b6ebfd506", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4239f144ce50c94f2c6cc232028f167b6ebfd506", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4239f144ce50c94f2c6cc232028f167b6ebfd506"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "c5988a3ca73adf15dfa7ad6096a25dabf9e1adcb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3cd732e5065dcc45968bf8837d3901c8717abbc2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3cd732e5065dcc45968bf8837d3901c8717abbc2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3cd732e5065dcc45968bf8837d3901c8717abbc2", "patch": "@@ -1,3 +1,7 @@\n+2018-11-05  Max Filippov  <jcmvbkbc@gmail.com>\n+\n+\t* config/xtensa/uclinux.h (XTENSA_ALWAYS_PIC): Change to 0.\n+\n 2018-11-05  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \tPR rtl-optimization/87871"}, {"sha": "c7743df9d97c2f51b76a1c449938ef6c2bbf370f", "filename": "gcc/config/xtensa/uclinux.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3cd732e5065dcc45968bf8837d3901c8717abbc2/gcc%2Fconfig%2Fxtensa%2Fuclinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3cd732e5065dcc45968bf8837d3901c8717abbc2/gcc%2Fconfig%2Fxtensa%2Fuclinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fuclinux.h?ref=3cd732e5065dcc45968bf8837d3901c8717abbc2", "patch": "@@ -59,8 +59,8 @@ along with GCC; see the file COPYING3.  If not see\n #undef LOCAL_LABEL_PREFIX\n #define LOCAL_LABEL_PREFIX\t\".\"\n \n-/* Always enable \"-fpic\" for Xtensa Linux.  */\n-#define XTENSA_ALWAYS_PIC 1\n+/* Don't enable \"-fpic\" for Xtensa uclinux.  */\n+#define XTENSA_ALWAYS_PIC 0\n \n #undef TARGET_LIBC_HAS_FUNCTION\n #define TARGET_LIBC_HAS_FUNCTION no_c99_libc_has_function"}]}