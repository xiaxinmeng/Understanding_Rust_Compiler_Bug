{"sha": "25139006e58a7ca7b708a742af8170f399d7db63", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjUxMzkwMDZlNThhN2NhN2I3MDhhNzQyYWY4MTcwZjM5OWQ3ZGI2Mw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2017-10-04T20:58:52Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2017-10-04T20:58:52Z"}, "message": "re PR c++/78131 (Inconsistent evaluation for `constexpr` lambdas in templates between `static_assert`, `if constexpr(\u2026)` and `constexpr` variables)\n\n2017-10-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/78131\n\t* g++.dg/cpp1z/constexpr-lambda17.C: New.\n\nFrom-SVN: r253431", "tree": {"sha": "00c891e9b0f79b7660f277448b1aff51e08ef298", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00c891e9b0f79b7660f277448b1aff51e08ef298"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/25139006e58a7ca7b708a742af8170f399d7db63", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25139006e58a7ca7b708a742af8170f399d7db63", "html_url": "https://github.com/Rust-GCC/gccrs/commit/25139006e58a7ca7b708a742af8170f399d7db63", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25139006e58a7ca7b708a742af8170f399d7db63/comments", "author": null, "committer": null, "parents": [{"sha": "968e56bf7f0a064fdc234a6b13246b02724a6d4a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/968e56bf7f0a064fdc234a6b13246b02724a6d4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/968e56bf7f0a064fdc234a6b13246b02724a6d4a"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "b1e3edcb828a25c491e11277e7866b0ec067c2e7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25139006e58a7ca7b708a742af8170f399d7db63/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25139006e58a7ca7b708a742af8170f399d7db63/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=25139006e58a7ca7b708a742af8170f399d7db63", "patch": "@@ -1,3 +1,8 @@\n+2017-10-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/78131\n+\t* g++.dg/cpp1z/constexpr-lambda17.C: New.\n+\n 2017-10-04  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/78018"}, {"sha": "44bd2b83f945e9c0900279e8e385715599bbe7f4", "filename": "gcc/testsuite/g++.dg/cpp1z/constexpr-lambda17.C", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25139006e58a7ca7b708a742af8170f399d7db63/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fconstexpr-lambda17.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25139006e58a7ca7b708a742af8170f399d7db63/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fconstexpr-lambda17.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fconstexpr-lambda17.C?ref=25139006e58a7ca7b708a742af8170f399d7db63", "patch": "@@ -0,0 +1,30 @@\n+// PR c++/78131\n+// { dg-options -std=c++17 }\n+\n+template <typename TF>\n+constexpr auto f(TF)\n+{\n+    return [](auto...) constexpr { return true; };\n+}   \n+\n+// Compiles and works as intended.\n+template <typename T0>\n+void ok_0(T0)\n+{\n+    static_assert(f([](auto x) -> decltype(x){})(T0{}));\n+}\n+\n+// Compiles and works as intended.\n+template <typename T0>\n+void ok_1(T0)\n+{\n+    constexpr auto a = f([](auto x) -> decltype(x){})(T0{});\n+    if constexpr(a) { }\n+}\n+\n+// Compile-time error!\n+template <typename T0>\n+void fail_0(T0)\n+{\n+    if constexpr(f([](auto x) -> decltype(x){})(T0{})) { } \n+}"}]}