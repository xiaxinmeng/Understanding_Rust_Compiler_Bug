{"sha": "5ceb809d01f8acc5b646d531d7ef13834ca645c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWNlYjgwOWQwMWY4YWNjNWI2NDZkNTMxZDdlZjEzODM0Y2E2NDVjOQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2012-03-07T20:20:00Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2012-03-07T20:20:00Z"}, "message": "re PR c++/52521 ([C++11] user defined literals and order of declaration)\n\n\tPR c++/52521\n\t* mangle.c (write_literal_operator_name): The length comes after the\n\toperator prefix.\n\nFrom-SVN: r185079", "tree": {"sha": "951d392577a440fd678d013213b95974d18e53c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/951d392577a440fd678d013213b95974d18e53c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ceb809d01f8acc5b646d531d7ef13834ca645c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ceb809d01f8acc5b646d531d7ef13834ca645c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ceb809d01f8acc5b646d531d7ef13834ca645c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ceb809d01f8acc5b646d531d7ef13834ca645c9/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "12fc7dea655f07d4be1e5cbf9ddb570e9966d965", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12fc7dea655f07d4be1e5cbf9ddb570e9966d965", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12fc7dea655f07d4be1e5cbf9ddb570e9966d965"}], "stats": {"total": 29, "additions": 23, "deletions": 6}, "files": [{"sha": "69677aea99ad4abd8dd7a01512f1ff0584575804", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ceb809d01f8acc5b646d531d7ef13834ca645c9/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ceb809d01f8acc5b646d531d7ef13834ca645c9/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5ceb809d01f8acc5b646d531d7ef13834ca645c9", "patch": "@@ -1,3 +1,9 @@\n+2012-03-07  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/52521\n+\t* mangle.c (write_literal_operator_name): The length comes after the\n+\toperator prefix.\n+\n 2012-03-05  Jakub Jelinek  <jakub@redhat.com>\n \n \t* pt.c (local_specializations): Change from htab_t into"}, {"sha": "5d6beb5d5782674a62f03fc8b36334478f3e9cf4", "filename": "gcc/cp/mangle.c", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ceb809d01f8acc5b646d531d7ef13834ca645c9/gcc%2Fcp%2Fmangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ceb809d01f8acc5b646d531d7ef13834ca645c9/gcc%2Fcp%2Fmangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmangle.c?ref=5ceb809d01f8acc5b646d531d7ef13834ca645c9", "patch": "@@ -1292,18 +1292,16 @@ write_source_name (tree identifier)\n }\n \n /* Write a user-defined literal operator.\n+          ::= li <source-name>    # \"\" <source-name>\n    IDENTIFIER is an LITERAL_IDENTIFIER_NODE.  */\n \n static void\n write_literal_operator_name (tree identifier)\n {\n   const char* suffix = UDLIT_OP_SUFFIX (identifier);\n-  char* buffer = XNEWVEC (char, strlen (UDLIT_OP_MANGLED_PREFIX)\n-\t\t\t      + strlen (suffix) + 10);\n-  sprintf (buffer, UDLIT_OP_MANGLED_FORMAT, suffix);\n-\n-  write_unsigned_number (strlen (buffer));\n-  write_identifier (buffer);\n+  write_identifier (UDLIT_OP_MANGLED_PREFIX);\n+  write_unsigned_number (strlen (suffix));\n+  write_identifier (suffix);\n }\n \n /* Encode 0 as _, and 1+ as n-1_.  */"}, {"sha": "83b7c664adc04c118f2e702b009e2d58b4785304", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ceb809d01f8acc5b646d531d7ef13834ca645c9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ceb809d01f8acc5b646d531d7ef13834ca645c9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5ceb809d01f8acc5b646d531d7ef13834ca645c9", "patch": "@@ -1,3 +1,8 @@\n+2012-03-07  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/52521\n+\t* g++.dg/cpp0x/udlit-mangle.C: New.\n+\n 2012-03-06  Pat Haugen <pthaugen@us.ibm.com>\n \n \t* gcc.dg/torture/va-arg-25.c: Fix typo for powerpc64-*-* check."}, {"sha": "6de31b65ea71f023084fdc5f6392b41d9589c652", "filename": "gcc/testsuite/g++.dg/cpp0x/udlit-mangle.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ceb809d01f8acc5b646d531d7ef13834ca645c9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-mangle.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ceb809d01f8acc5b646d531d7ef13834ca645c9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-mangle.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-mangle.C?ref=5ceb809d01f8acc5b646d531d7ef13834ca645c9", "patch": "@@ -0,0 +1,8 @@\n+// PR c++/52521\n+// { dg-options -std=c++0x }\n+// { dg-final { scan-assembler \"_Zli2_wPKc\" } }\n+\n+int operator \"\" _w(const char*);\n+int main() {\n+  123_w;\n+}"}]}