{"sha": "f3368a9098c3aa67ef422208978bf8df6353bc5a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjMzNjhhOTA5OGMzYWE2N2VmNDIyMjA4OTc4YmY4ZGY2MzUzYmM1YQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2001-12-29T17:12:55Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2001-12-29T17:12:55Z"}, "message": "re PR c++/5125 (both g++ 3.0.1 and 2.95.3 crash with internal error when trying compile template method with parameter pointer to method)\n\ncp:\n\tPR c++/5125\n\t* pt.c (push_template_decl_real): Make sure DECL has\n\tDECL_LANG_SPECIFIC.\ntestsuite:\n\t* g++.dg/template/crash1.C: New test.\n\nFrom-SVN: r48370", "tree": {"sha": "354ae308751707a6a244e6e77df4cf138834626a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/354ae308751707a6a244e6e77df4cf138834626a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f3368a9098c3aa67ef422208978bf8df6353bc5a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3368a9098c3aa67ef422208978bf8df6353bc5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3368a9098c3aa67ef422208978bf8df6353bc5a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3368a9098c3aa67ef422208978bf8df6353bc5a/comments", "author": null, "committer": null, "parents": [{"sha": "03c9c274624a94356dffd1cd62ff9669a8a1039a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03c9c274624a94356dffd1cd62ff9669a8a1039a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03c9c274624a94356dffd1cd62ff9669a8a1039a"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "b9101957bfc82c84d70349463614211dfe991a57", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3368a9098c3aa67ef422208978bf8df6353bc5a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3368a9098c3aa67ef422208978bf8df6353bc5a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f3368a9098c3aa67ef422208978bf8df6353bc5a", "patch": "@@ -1,3 +1,9 @@\n+2001-12-29  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR c++/5125\n+\t* pt.c (push_template_decl_real): Make sure DECL has\n+\tDECL_LANG_SPECIFIC.\n+\n 2001-12-29  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/335"}, {"sha": "de24a05f6198fe6204ec3371c65eb0ceaee5fd88", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3368a9098c3aa67ef422208978bf8df6353bc5a/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3368a9098c3aa67ef422208978bf8df6353bc5a/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=f3368a9098c3aa67ef422208978bf8df6353bc5a", "patch": "@@ -2627,7 +2627,7 @@ push_template_decl_real (decl, is_friend)\n \t      return decl;\n \t    }\n \t}\n-      else if (! DECL_TEMPLATE_INFO (decl))\n+      else if (!DECL_LANG_SPECIFIC (decl) || !DECL_TEMPLATE_INFO (decl))\n \t{\n \t  error (\"template definition of non-template `%#D'\", decl);\n \t  return decl;"}, {"sha": "91fd37d2756e1dc87b26f06389ffd66ab37bd8aa", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3368a9098c3aa67ef422208978bf8df6353bc5a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3368a9098c3aa67ef422208978bf8df6353bc5a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f3368a9098c3aa67ef422208978bf8df6353bc5a", "patch": "@@ -1,3 +1,7 @@\n+2001-12-29  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* g++.dg/template/crash1.C: New test.\n+\n 2001-12-29  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* g++.dg/other/const1.C: New test."}, {"sha": "27e89641ac75d29b2033917a776b567b71141ab6", "filename": "gcc/testsuite/g++.dg/template/crash1.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3368a9098c3aa67ef422208978bf8df6353bc5a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3368a9098c3aa67ef422208978bf8df6353bc5a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash1.C?ref=f3368a9098c3aa67ef422208978bf8df6353bc5a", "patch": "@@ -0,0 +1,17 @@\n+// { dg-do compile }\n+\n+// Copyright (C) 2001 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 29 Dec 2001 <nathan@nathan@codesourcery.com>\n+\n+// PR 5125. ICE\n+\n+class S\n+{\n+  public:\n+  template <class I> void Foo(int (*f)(S& o) ); // { dg-error \"candidate\" \"\" }\n+};\n+\n+template <class I>\n+void S::Foo(int (*f)(TYPO&o) )\n+{ // { dg-error \"template definition of non-template|prototype\" \"\" }\n+}"}]}