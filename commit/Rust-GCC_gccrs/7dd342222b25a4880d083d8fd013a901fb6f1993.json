{"sha": "7dd342222b25a4880d083d8fd013a901fb6f1993", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2RkMzQyMjIyYjI1YTQ4ODBkMDgzZDhmZDAxM2E5MDFmYjZmMTk5Mw==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2017-12-20T20:36:22Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2017-12-20T20:36:22Z"}, "message": "re PR fortran/83436 (Internal file cannot be accessed by UNFORMATTED data transfer when reading from /dev/urandom)\n\n2017-12-20  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/83436\n\t* gfortran.dg/internal_readwrite_4.f90: New test.\n\nFrom-SVN: r255902", "tree": {"sha": "2cef2e5e09c3938fd255864b725da8da835db8dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2cef2e5e09c3938fd255864b725da8da835db8dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7dd342222b25a4880d083d8fd013a901fb6f1993", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dd342222b25a4880d083d8fd013a901fb6f1993", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dd342222b25a4880d083d8fd013a901fb6f1993", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dd342222b25a4880d083d8fd013a901fb6f1993/comments", "author": null, "committer": null, "parents": [{"sha": "442db27632e461ace26b61e968dfd8e7ab085e38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/442db27632e461ace26b61e968dfd8e7ab085e38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/442db27632e461ace26b61e968dfd8e7ab085e38"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "9f564ade9ce43e758c5e0bf7def70968cb62469a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd342222b25a4880d083d8fd013a901fb6f1993/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd342222b25a4880d083d8fd013a901fb6f1993/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7dd342222b25a4880d083d8fd013a901fb6f1993", "patch": "@@ -1,3 +1,8 @@\n+2017-12-20  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/83436\n+\t* gfortran.dg/internal_readwrite_4.f90: New test.\n+\n 2017-12-20  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR ipa/83506"}, {"sha": "cd2e684a45600f37f45453db166d20a3b46797f0", "filename": "gcc/testsuite/gfortran.dg/internal_readwrite_4.f90", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd342222b25a4880d083d8fd013a901fb6f1993/gcc%2Ftestsuite%2Fgfortran.dg%2Finternal_readwrite_4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd342222b25a4880d083d8fd013a901fb6f1993/gcc%2Ftestsuite%2Fgfortran.dg%2Finternal_readwrite_4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finternal_readwrite_4.f90?ref=7dd342222b25a4880d083d8fd013a901fb6f1993", "patch": "@@ -0,0 +1,30 @@\n+! { dg-do  run }\n+! PR 83436 - this used to cause an error.\n+! Original test case by Daan van Vugt.\n+module mod_random_seed\n+  implicit none\n+contains\n+  !> Read an int from /dev/urandom\n+  subroutine read_urandom_int(seed, ierr)\n+    implicit none\n+    integer, intent(out) :: seed\n+    integer, intent(out) :: ierr\n+    integer :: un\n+    character(len=80) :: restart_file\n+    write(restart_file,'(A,A)') 'jorek', '_restart.h5'\n+\n+    open(newunit=un, file=\"/dev/urandom\", access=\"stream\", &\n+        form=\"unformatted\", action=\"read\", status=\"old\", iostat=ierr)\n+    if (ierr == 0) then\n+       read(un) seed\n+       close(un)\n+    end if\n+  end subroutine read_urandom_int\n+end module mod_random_seed\n+\n+program test_random_seed\n+  use mod_random_seed\n+  implicit none\n+  integer :: seed, ierr\n+  call read_urandom_int(seed, ierr)\n+end program test_random_seed"}]}