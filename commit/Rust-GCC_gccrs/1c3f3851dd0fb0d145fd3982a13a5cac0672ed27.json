{"sha": "1c3f3851dd0fb0d145fd3982a13a5cac0672ed27", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWMzZjM4NTFkZDBmYjBkMTQ1ZmQzOTgyYTEzYTVjYWMwNjcyZWQyNw==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2015-04-24T14:18:57Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2015-04-24T14:18:57Z"}, "message": "Replace g++.dg/pr65802.C with gcc.dg/pr65802.c\n\n2015-04-24  Tom de Vries  <tom@codesourcery.com>\n\n\tPR tree-optimization/65802\n\t* g++.dg/pr65802.C: Move to ...\n\t* gcc.dg/pr65802.c: ... here.  Add -fexceptions to dg-options. Include\n\tstdarg.h.  Rewrite for C.\n\t(fn1): Use va_list and va_arg.  Make variable args function.  Add use of\n\tva_start and va_end.  Remove unnecessary inline asm.\n\nFrom-SVN: r222413", "tree": {"sha": "46ab957b576a1d4e3eb457806da86e3822e4e2fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/46ab957b576a1d4e3eb457806da86e3822e4e2fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1c3f3851dd0fb0d145fd3982a13a5cac0672ed27", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c3f3851dd0fb0d145fd3982a13a5cac0672ed27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c3f3851dd0fb0d145fd3982a13a5cac0672ed27", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c3f3851dd0fb0d145fd3982a13a5cac0672ed27/comments", "author": null, "committer": null, "parents": [{"sha": "97afef00ba922009a05cff1293c1ff3f35093ad6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97afef00ba922009a05cff1293c1ff3f35093ad6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97afef00ba922009a05cff1293c1ff3f35093ad6"}], "stats": {"total": 66, "additions": 37, "deletions": 29}, "files": [{"sha": "3e2b154236b896e3d63aa0ce080391662a807b59", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c3f3851dd0fb0d145fd3982a13a5cac0672ed27/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c3f3851dd0fb0d145fd3982a13a5cac0672ed27/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1c3f3851dd0fb0d145fd3982a13a5cac0672ed27", "patch": "@@ -1,3 +1,12 @@\n+2015-04-24  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR tree-optimization/65802\n+\t* g++.dg/pr65802.C: Move to ...\n+\t* gcc.dg/pr65802.c: ... here.  Add -fexceptions to dg-options. Include\n+\tstdarg.h.  Rewrite for C.\n+\t(fn1): Use va_list and va_arg.  Make variable args function.  Add use of\n+\tva_start and va_end.  Remove unnecessary inline asm.\n+\n 2015-04-24  Uros Bizjak  <ubizjak@gmail.com>\n \t    Wei Mi  <wmi@google.com>\n "}, {"sha": "26e5317aeb186de79a0d892bf8e5309076ef5d7e", "filename": "gcc/testsuite/g++.dg/pr65802.C", "status": "removed", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97afef00ba922009a05cff1293c1ff3f35093ad6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr65802.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97afef00ba922009a05cff1293c1ff3f35093ad6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr65802.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr65802.C?ref=97afef00ba922009a05cff1293c1ff3f35093ad6", "patch": "@@ -1,29 +0,0 @@\n-// { dg-do compile }\n-// { dg-options \"-O0\" }\n-\n-typedef int tf ();\n-\n-struct S\n-{\n-  tf m_fn1;\n-} a;\n-\n-void\n-fn1 ()\n-{\n-  try\n-    {\n-      __builtin_va_list c;\n-      {\n-\tint *d = __builtin_va_arg (c, int *);\n-\tint **e = &d;\n-\t__asm__(\"\" : \"=d\"(e));\n-\ta.m_fn1 ();\n-      }\n-      a.m_fn1 ();\n-    }\n-  catch (...)\n-    {\n-\n-    }\n-}"}, {"sha": "fcec234dc0b84aba380b7f194257a7fbc6c48b48", "filename": "gcc/testsuite/gcc.dg/pr65802.c", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c3f3851dd0fb0d145fd3982a13a5cac0672ed27/gcc%2Ftestsuite%2Fgcc.dg%2Fpr65802.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c3f3851dd0fb0d145fd3982a13a5cac0672ed27/gcc%2Ftestsuite%2Fgcc.dg%2Fpr65802.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr65802.c?ref=1c3f3851dd0fb0d145fd3982a13a5cac0672ed27", "patch": "@@ -0,0 +1,28 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O0 -fexceptions\" } */\n+\n+#include <stdarg.h>\n+\n+struct S\n+{\n+  int (*m_fn1) (void);\n+} a;\n+\n+void\n+fn1 (int d, ...)\n+{\n+  va_list c;\n+  va_start (c, d);\n+\n+  {\n+    int *d = va_arg (c, int *);\n+\n+    int **e = &d;\n+\n+    a.m_fn1 ();\n+  }\n+\n+  a.m_fn1 ();\n+\n+  va_end (c);\n+}"}]}