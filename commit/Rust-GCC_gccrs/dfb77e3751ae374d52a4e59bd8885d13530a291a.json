{"sha": "dfb77e3751ae374d52a4e59bd8885d13530a291a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZiNzdlMzc1MWFlMzc0ZDUyYTRlNTliZDg4ODVkMTM1MzBhMjkxYQ==", "commit": {"author": {"name": "Kelley Cook", "email": "kcook@gcc.gnu.org", "date": "2004-09-23T00:29:07Z"}, "committer": {"name": "R. Kelley Cook", "email": "kcook@gcc.gnu.org", "date": "2004-09-23T00:29:07Z"}, "message": "aclocal.m4: Add in gettext's m4 includes.\n\n2004-09-22  Kelley Cook  <kcook@gcc.gnu.org>\n\n\t* aclocal.m4: Add in gettext's m4 includes.\n\t(AC_ICONV, AC_LCMESSAGES, GCC_PATH_PROG): Remove.\n\t* configure.ac: Add in check for iconv.m4\n\t* configure: Regenerate.\n\nFrom-SVN: r87908", "tree": {"sha": "00d10ff52f93edf6a4540f8d64e714848225935e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00d10ff52f93edf6a4540f8d64e714848225935e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dfb77e3751ae374d52a4e59bd8885d13530a291a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfb77e3751ae374d52a4e59bd8885d13530a291a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfb77e3751ae374d52a4e59bd8885d13530a291a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfb77e3751ae374d52a4e59bd8885d13530a291a/comments", "author": null, "committer": null, "parents": [{"sha": "20ac2c8c4efc625583036a878e779981c52db43d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20ac2c8c4efc625583036a878e779981c52db43d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/20ac2c8c4efc625583036a878e779981c52db43d"}], "stats": {"total": 819, "additions": 600, "deletions": 219}, "files": [{"sha": "8222534738c1e327b15bc21791a60a96efb7bf6d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfb77e3751ae374d52a4e59bd8885d13530a291a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfb77e3751ae374d52a4e59bd8885d13530a291a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dfb77e3751ae374d52a4e59bd8885d13530a291a", "patch": "@@ -1,3 +1,10 @@\n+2004-09-22  Kelley Cook  <kcook@gcc.gnu.org>\n+\n+\t* aclocal.m4: Add in gettext's m4 includes.\n+\t(AC_ICONV, AC_LCMESSAGES, GCC_PATH_PROG): Remove.\n+\t* configure.ac: Add in check for iconv.m4\n+\t* configure: Regenerate.\n+\t\n 2004-09-22  Kelley Cook  <kcook@gcc.gnu.org>\n \n \t* aclocal.m4: Update for rename of gettext-sister.m4."}, {"sha": "6298451c79d0be6131ad3a97bdc139c66e34df4e", "filename": "gcc/aclocal.m4", "status": "modified", "additions": 9, "deletions": 153, "changes": 162, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfb77e3751ae374d52a4e59bd8885d13530a291a/gcc%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfb77e3751ae374d52a4e59bd8885d13530a291a/gcc%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Faclocal.m4?ref=dfb77e3751ae374d52a4e59bd8885d13530a291a", "patch": "@@ -1,7 +1,12 @@\n-sinclude(../config/acx.m4)\n-sinclude(../config/accross.m4)\n-sinclude(../config/gettext-sister.m4)\n-sinclude(../config/progtest.m4)\n+m4_include(../config/accross.m4)\n+m4_include(../config/acx.m4)\n+m4_include(../config/gettext-sister.m4)\n+m4_include(../config/iconv.m4)\n+m4_include(../config/lcmessage.m4)\n+m4_include(../config/lib-ld.m4)\n+m4_include(../config/lib-link.m4)\n+m4_include(../config/lib-prefix.m4)\n+m4_include(../config/progtest.m4)\n \n dnl See whether we need a declaration for a function.\n dnl The result is highly dependent on the INCLUDES passed in, so make sure\n@@ -223,49 +228,6 @@ test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n AC_SUBST(INSTALL_DATA)dnl\n ])\n \n-dnl GCC_PATH_PROG(VARIABLE, PROG-TO-CHECK-FOR [, VALUE-IF-NOT-FOUND [, PATH]])\n-dnl like AC_PATH_PROG but use other cache variables\n-AC_DEFUN([GCC_PATH_PROG],\n-[# Extract the first word of \"$2\", so it can be a program name with args.\n-set dummy $2; ac_word=[$]2\n-AC_MSG_CHECKING([for $ac_word])\n-AC_CACHE_VAL(gcc_cv_path_$1,\n-[case \"[$]$1\" in\n-  /*)\n-  gcc_cv_path_$1=\"[$]$1\" # Let the user override the test with a path.\n-  ;;\n-  ?:/*)\t\t\t \n-  gcc_cv_path_$1=\"[$]$1\" # Let the user override the test with a dos path.\n-  ;;\n-  *)\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n-dnl $ac_dummy forces splitting on constant user-supplied paths.\n-dnl POSIX.2 word splitting is done only on the output of word expansions,\n-dnl not every word.  This closes a longstanding sh security hole.\n-  ac_dummy=\"ifelse([$4], , $PATH, [$4])\"\n-  for ac_dir in $ac_dummy; do \n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f $ac_dir/$ac_word; then\n-      gcc_cv_path_$1=\"$ac_dir/$ac_word\"\n-      break\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-dnl If no 3rd arg is given, leave the cache variable unset,\n-dnl so GCC_PATH_PROGS will keep looking.\n-ifelse([$3], , , [  test -z \"[$]gcc_cv_path_$1\" && gcc_cv_path_$1=\"$3\"\n-])dnl\n-  ;;\n-esac])dnl\n-$1=\"$gcc_cv_path_$1\"\n-if test -n \"[$]$1\"; then\n-  AC_MSG_RESULT([$]$1)\n-else\n-  AC_MSG_RESULT(no)\n-fi\n-AC_SUBST($1)dnl\n-])\n-\n # mmap(2) blacklisting.  Some platforms provide the mmap library routine\n # but don't support all of the features we need from it.\n AC_DEFUN([gcc_AC_FUNC_MMAP_BLACKLIST],\n@@ -465,79 +427,6 @@ AC_CACHE_CHECK(for __int64, ac_cv_c___int64,\n   fi\n ])\n \n-#serial AM2\n-\n-dnl From Bruno Haible.\n-\n-AC_DEFUN([AM_ICONV],\n-[\n-  dnl Some systems have iconv in libc, some have it in libiconv (OSF/1 and\n-  dnl those with the standalone portable GNU libiconv installed).\n-\n-  am_cv_lib_iconv_ldpath=\n-  AC_ARG_WITH([libiconv-prefix],\n-[  --with-libiconv-prefix=DIR  search for libiconv in DIR/include and DIR/lib], [\n-    for dir in `echo \"$withval\" | tr : ' '`; do\n-      if test -d $dir/include; then CPPFLAGS=\"$CPPFLAGS -I$dir/include\"; fi\n-      if test -d $dir/lib; then am_cv_lib_iconv_ldpath=\"-L$dir/lib\"; fi\n-    done\n-   ])\n-\n-  AC_CHECK_HEADERS([iconv.h])\n-\n-  AC_CACHE_CHECK(for iconv, am_cv_func_iconv, [\n-    am_cv_func_iconv=\"no, consider installing GNU libiconv\"\n-    am_cv_lib_iconv=no\n-    AC_TRY_LINK([#include <stdlib.h>\n-#include <iconv.h>],\n-      [iconv_t cd = iconv_open(\"\",\"\");\n-       iconv(cd,NULL,NULL,NULL,NULL);\n-       iconv_close(cd);],\n-      am_cv_func_iconv=yes)\n-    if test \"$am_cv_func_iconv\" != yes; then\n-      am_save_LIBS=\"$LIBS\"\n-      LIBS=\"$LIBS $am_cv_libiconv_ldpath -liconv\"\n-      AC_TRY_LINK([#include <stdlib.h>\n-#include <iconv.h>],\n-        [iconv_t cd = iconv_open(\"\",\"\");\n-         iconv(cd,NULL,NULL,NULL,NULL);\n-         iconv_close(cd);],\n-        am_cv_lib_iconv=yes\n-        am_cv_func_iconv=yes)\n-      LIBS=\"$am_save_LIBS\"\n-    fi\n-  ])\n-  if test \"$am_cv_func_iconv\" = yes; then\n-    AC_DEFINE(HAVE_ICONV, 1, [Define if you have the iconv() function.])\n-    AC_MSG_CHECKING([for iconv declaration])\n-    AC_CACHE_VAL(am_cv_proto_iconv, [\n-      AC_TRY_COMPILE([\n-#include <stdlib.h>\n-#include <iconv.h>\n-extern\n-#ifdef __cplusplus\n-\"C\"\n-#endif\n-#if defined(__STDC__) || defined(__cplusplus)\n-size_t iconv (iconv_t cd, char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);\n-#else\n-size_t iconv();\n-#endif\n-], [], am_cv_proto_iconv_arg1=\"\", am_cv_proto_iconv_arg1=\"const\")\n-      am_cv_proto_iconv=\"extern size_t iconv (iconv_t cd, $am_cv_proto_iconv_arg1 char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);\"])\n-    am_cv_proto_iconv=`echo \"[$]am_cv_proto_iconv\" | tr -s ' ' | sed -e 's/( /(/'`\n-    AC_MSG_RESULT([$]{ac_t:-\n-         }[$]am_cv_proto_iconv)\n-    AC_DEFINE_UNQUOTED(ICONV_CONST, $am_cv_proto_iconv_arg1,\n-      [Define as const if the declaration of iconv() needs const.])\n-  fi\n-  LIBICONV=\n-  if test \"$am_cv_lib_iconv\" = yes; then\n-    LIBICONV=\"$am_cv_lib_iconv_ldpath -liconv\"\n-  fi\n-  AC_SUBST(LIBICONV)\n-])\n-\n AC_DEFUN([gcc_AC_INITFINI_ARRAY],\n [AC_ARG_ENABLE(initfini-array,\n \t[  --enable-initfini-array\tuse .init_array/.fini_array sections],\n@@ -644,39 +533,6 @@ if test $[$2] = yes; then\n   $7\n fi])])\n \n-# lcmessage.m4 serial 3 (gettext-0.11.3)\n-dnl Copyright (C) 1995-2002 Free Software Foundation, Inc.\n-dnl This file is free software, distributed under the terms of the GNU\n-dnl General Public License.  As a special exception to the GNU General\n-dnl Public License, this file may be distributed as part of a program\n-dnl that contains a configuration script generated by Autoconf, under\n-dnl the same distribution terms as the rest of that program.\n-dnl\n-dnl This file can can be used in projects which are not available under\n-dnl the GNU General Public License or the GNU Library General Public\n-dnl License but which still want to provide support for the GNU gettext\n-dnl functionality.\n-dnl Please note that the actual code of the GNU gettext library is covered\n-dnl by the GNU Library General Public License, and the rest of the GNU\n-dnl gettext package package is covered by the GNU General Public License.\n-dnl They are *not* in the public domain.\n-\n-dnl Authors:\n-dnl   Ulrich Drepper <drepper@cygnus.com>, 1995.\n-\n-# Check whether LC_MESSAGES is available in <locale.h>.\n-\n-AC_DEFUN([AM_LC_MESSAGES],\n-[\n-  AC_CACHE_CHECK([for LC_MESSAGES], am_cv_val_LC_MESSAGES,\n-    [AC_TRY_LINK([#include <locale.h>], [return LC_MESSAGES],\n-       am_cv_val_LC_MESSAGES=yes, am_cv_val_LC_MESSAGES=no)])\n-  if test $am_cv_val_LC_MESSAGES = yes; then\n-    AC_DEFINE(HAVE_LC_MESSAGES, 1,\n-      [Define if your <locale.h> file defines LC_MESSAGES.])\n-  fi\n-])\n-\n # AM_PROG_CC_C_O\n # --------------\n # Like AC_PROG_CC_C_O, but changed for automake."}, {"sha": "ed36fdd17ddb7c70a1222fc7100894de22b6ccdd", "filename": "gcc/configure", "status": "modified", "additions": 583, "deletions": 65, "changes": 648, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfb77e3751ae374d52a4e59bd8885d13530a291a/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfb77e3751ae374d52a4e59bd8885d13530a291a/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=dfb77e3751ae374d52a4e59bd8885d13530a291a", "patch": "@@ -309,7 +309,7 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP EGREP strict1_warn warn_cflags WERROR nocommon_flag TREEBROWSER valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN_S LN RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON NM AR stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file PACKAGE VERSION USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS CROSS ALL SYSTEM_HEADER_DIR inhibit_libc CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 libgcc_visibility GGC zlibdir zlibinc MAINT gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir gcc_version gcc_version_full gcc_version_trigger host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure symbolic_link thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines c_target_objs cxx_target_objs target_cpu_default GMPLIBS GMPINC LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP EGREP strict1_warn warn_cflags WERROR nocommon_flag TREEBROWSER valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN_S LN RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON NM AR stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LTLIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file PACKAGE VERSION USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS CROSS ALL SYSTEM_HEADER_DIR inhibit_libc CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 libgcc_visibility GGC zlibdir zlibinc MAINT gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir gcc_version gcc_version_full gcc_version_trigger host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure symbolic_link thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines c_target_objs cxx_target_objs target_cpu_default GMPLIBS GMPINC LIBOBJS LTLIBOBJS'\n ac_subst_files='language_hooks'\n \n # Initialize some variables set by options.\n@@ -886,6 +886,7 @@ Optional Features:\n   --disable-shared        don't provide a shared libgcc\n   --enable-intermodule    build the compiler in one step\n   --enable-languages=LIST specify which front-ends to build\n+  --disable-rpath         do not hardcode runtime library paths\n   --enable-initfini-array\tuse .init_array/.fini_array sections\n   --enable-sjlj-exceptions\n                           arrange to use setjmp/longjmp exception handling\n@@ -920,7 +921,9 @@ Optional Packages:\n   --with-stabs            arrange to use stabs instead of host debug format\n   --with-dwarf2           force the default debug format to be DWARF 2\n   --with-sysroot=DIR Search for usr/lib, usr/include, et al, within DIR.\n-  --with-libiconv-prefix=DIR  search for libiconv in DIR/include and DIR/lib\n+  --with-gnu-ld           assume the C compiler uses GNU ld default=no\n+  --with-libiconv-prefix[=DIR]  search for libiconv in DIR/include and DIR/lib\n+  --without-libiconv-prefix     don't search for libiconv in includedir and libdir\n   --with-system-libunwind use installed libunwind\n   --with-gc={page,zone}   choose the garbage collection mechanism to use\n                           with the compiler\n@@ -7364,7 +7367,7 @@ if test \"${gcc_cv_prog_makeinfo_modern+set}\" = set; then\n else\n     ac_prog_version=`$MAKEINFO --version 2>&1 |\n                    sed -n 's/^.*GNU texinfo.* \\([0-9][0-9.]*\\).*$/\\1/p'`\n-  echo \"configure:7367: version of makeinfo is $ac_prog_version\" >&5\n+  echo \"configure:7370: version of makeinfo is $ac_prog_version\" >&5\n   case $ac_prog_version in\n     '')     gcc_cv_prog_makeinfo_modern=no;;\n     4.[2-9]*)\n@@ -8042,7 +8045,8 @@ fi\n \n \n \n-for ac_header in limits.h stddef.h string.h strings.h stdlib.h time.h \\\n+\n+for ac_header in limits.h stddef.h string.h strings.h stdlib.h time.h iconv.h \\\n \t\t fcntl.h unistd.h sys/file.h sys/time.h sys/mman.h \\\n \t\t sys/resource.h sys/param.h sys/times.h sys/stat.h \\\n \t\t direct.h malloc.h langinfo.h ldfcn.h locale.h wchar.h\n@@ -10177,73 +10181,576 @@ fi\n \n \n \n-\n-  am_cv_lib_iconv_ldpath=\n-\n-# Check whether --with-libiconv-prefix or --without-libiconv-prefix was given.\n-if test \"${with_libiconv_prefix+set}\" = set; then\n-  withval=\"$with_libiconv_prefix\"\n-\n-    for dir in `echo \"$withval\" | tr : ' '`; do\n-      if test -d $dir/include; then CPPFLAGS=\"$CPPFLAGS -I$dir/include\"; fi\n-      if test -d $dir/lib; then am_cv_lib_iconv_ldpath=\"-L$dir/lib\"; fi\n-    done\n-\n-fi;\n+      if test \"X$prefix\" = \"XNONE\"; then\n+    acl_final_prefix=\"$ac_default_prefix\"\n+  else\n+    acl_final_prefix=\"$prefix\"\n+  fi\n+  if test \"X$exec_prefix\" = \"XNONE\"; then\n+    acl_final_exec_prefix='${prefix}'\n+  else\n+    acl_final_exec_prefix=\"$exec_prefix\"\n+  fi\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  eval acl_final_exec_prefix=\\\"$acl_final_exec_prefix\\\"\n+  prefix=\"$acl_save_prefix\"\n \n \n-for ac_header in iconv.h\n-do\n-as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n-echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n-echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n-if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+# Check whether --with-gnu-ld or --without-gnu-ld was given.\n+if test \"${with_gnu_ld+set}\" = set; then\n+  withval=\"$with_gnu_ld\"\n+  test \"$withval\" = no || with_gnu_ld=yes\n else\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-#include <$ac_header>\n-_ACEOF\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } >/dev/null; then\n-  if test -s conftest.err; then\n-    ac_cpp_err=$ac_c_preproc_warn_flag\n-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  with_gnu_ld=no\n+fi;\n+# Prepare PATH_SEPARATOR.\n+# The user is always right.\n+if test \"${PATH_SEPARATOR+set}\" != set; then\n+  echo \"#! /bin/sh\" >conf$$.sh\n+  echo  \"exit 0\"   >>conf$$.sh\n+  chmod +x conf$$.sh\n+  if (PATH=\"/nonexistent;.\"; conf$$.sh) >/dev/null 2>&1; then\n+    PATH_SEPARATOR=';'\n   else\n-    ac_cpp_err=\n+    PATH_SEPARATOR=:\n   fi\n+  rm -f conf$$.sh\n+fi\n+ac_prog=ld\n+if test \"$GCC\" = yes; then\n+  # Check if gcc -print-prog-name=ld gives a path.\n+  echo \"$as_me:$LINENO: checking for ld used by GCC\" >&5\n+echo $ECHO_N \"checking for ld used by GCC... $ECHO_C\" >&6\n+  case $host in\n+  *-*-mingw*)\n+    # gcc leaves a trailing carriage return which upsets mingw\n+    ac_prog=`($CC -print-prog-name=ld) 2>&5 | tr -d '\\015'` ;;\n+  *)\n+    ac_prog=`($CC -print-prog-name=ld) 2>&5` ;;\n+  esac\n+  case $ac_prog in\n+    # Accept absolute paths.\n+    [\\\\/]* | [A-Za-z]:[\\\\/]*)\n+      re_direlt='/[^/][^/]*/\\.\\./'\n+      # Canonicalize the path of ld\n+      ac_prog=`echo $ac_prog| sed 's%\\\\\\\\%/%g'`\n+      while echo $ac_prog | grep \"$re_direlt\" > /dev/null 2>&1; do\n+\tac_prog=`echo $ac_prog| sed \"s%$re_direlt%/%\"`\n+      done\n+      test -z \"$LD\" && LD=\"$ac_prog\"\n+      ;;\n+  \"\")\n+    # If it fails, then pretend we aren't using GCC.\n+    ac_prog=ld\n+    ;;\n+  *)\n+    # If it is relative, then search for the first ld in PATH.\n+    with_gnu_ld=unknown\n+    ;;\n+  esac\n+elif test \"$with_gnu_ld\" = yes; then\n+  echo \"$as_me:$LINENO: checking for GNU ld\" >&5\n+echo $ECHO_N \"checking for GNU ld... $ECHO_C\" >&6\n else\n-  ac_cpp_err=yes\n+  echo \"$as_me:$LINENO: checking for non-GNU ld\" >&5\n+echo $ECHO_N \"checking for non-GNU ld... $ECHO_C\" >&6\n fi\n-if test -z \"$ac_cpp_err\"; then\n-  eval \"$as_ac_Header=yes\"\n+if test \"${acl_cv_path_LD+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-  eval \"$as_ac_Header=no\"\n+  if test -z \"$LD\"; then\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n+  for ac_dir in $PATH; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f \"$ac_dir/$ac_prog\" || test -f \"$ac_dir/$ac_prog$ac_exeext\"; then\n+      acl_cv_path_LD=\"$ac_dir/$ac_prog\"\n+      # Check to see if the program is GNU ld.  I'd rather use --version,\n+      # but apparently some GNU ld's only accept -v.\n+      # Break only if it was the GNU/non-GNU ld that we prefer.\n+      if \"$acl_cv_path_LD\" -v 2>&1 < /dev/null | egrep '(GNU|with BFD)' > /dev/null; then\n+\ttest \"$with_gnu_ld\" != no && break\n+      else\n+\ttest \"$with_gnu_ld\" != yes && break\n+      fi\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+else\n+  acl_cv_path_LD=\"$LD\" # Let the user override the test with a path.\n fi\n-rm -f conftest.err conftest.$ac_ext\n fi\n-echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n-echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n-if test `eval echo '${'$as_ac_Header'}'` = yes; then\n-  cat >>confdefs.h <<_ACEOF\n-#define `echo \"HAVE_$ac_header\" | $as_tr_cpp` 1\n-_ACEOF\n \n+LD=\"$acl_cv_path_LD\"\n+if test -n \"$LD\"; then\n+  echo \"$as_me:$LINENO: result: $LD\" >&5\n+echo \"${ECHO_T}$LD\" >&6\n+else\n+  echo \"$as_me:$LINENO: result: no\" >&5\n+echo \"${ECHO_T}no\" >&6\n fi\n-done\n+test -z \"$LD\" && { { echo \"$as_me:$LINENO: error: no acceptable ld found in \\$PATH\" >&5\n+echo \"$as_me: error: no acceptable ld found in \\$PATH\" >&2;}\n+   { (exit 1); exit 1; }; }\n+echo \"$as_me:$LINENO: checking if the linker ($LD) is GNU ld\" >&5\n+echo $ECHO_N \"checking if the linker ($LD) is GNU ld... $ECHO_C\" >&6\n+if test \"${acl_cv_prog_gnu_ld+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  # I'd rather use --version here, but apparently some GNU ld's only accept -v.\n+if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then\n+  acl_cv_prog_gnu_ld=yes\n+else\n+  acl_cv_prog_gnu_ld=no\n+fi\n+fi\n+echo \"$as_me:$LINENO: result: $acl_cv_prog_gnu_ld\" >&5\n+echo \"${ECHO_T}$acl_cv_prog_gnu_ld\" >&6\n+with_gnu_ld=$acl_cv_prog_gnu_ld\n+\n+\n+\n+                                                echo \"$as_me:$LINENO: checking for shared library run path origin\" >&5\n+echo $ECHO_N \"checking for shared library run path origin... $ECHO_C\" >&6\n+if test \"${acl_cv_rpath+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+\n+    CC=\"$CC\" GCC=\"$GCC\" LDFLAGS=\"$LDFLAGS\" LD=\"$LD\" with_gnu_ld=\"$with_gnu_ld\" \\\n+    ${CONFIG_SHELL-/bin/sh} \"$ac_aux_dir/config.rpath\" \"$host\" > conftest.sh\n+    . ./conftest.sh\n+    rm -f ./conftest.sh\n+    acl_cv_rpath=done\n+\n+fi\n+echo \"$as_me:$LINENO: result: $acl_cv_rpath\" >&5\n+echo \"${ECHO_T}$acl_cv_rpath\" >&6\n+  wl=\"$acl_cv_wl\"\n+  libext=\"$acl_cv_libext\"\n+  shlibext=\"$acl_cv_shlibext\"\n+  hardcode_libdir_flag_spec=\"$acl_cv_hardcode_libdir_flag_spec\"\n+  hardcode_libdir_separator=\"$acl_cv_hardcode_libdir_separator\"\n+  hardcode_direct=\"$acl_cv_hardcode_direct\"\n+  hardcode_minus_L=\"$acl_cv_hardcode_minus_L\"\n+    # Check whether --enable-rpath or --disable-rpath was given.\n+if test \"${enable_rpath+set}\" = set; then\n+  enableval=\"$enable_rpath\"\n+  :\n+else\n+  enable_rpath=yes\n+fi;\n+\n+\n+\n+\n+\n+\n+\n+    use_additional=yes\n+\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  acl_save_exec_prefix=\"$exec_prefix\"\n+  exec_prefix=\"$acl_final_exec_prefix\"\n+\n+    eval additional_includedir=\\\"$includedir\\\"\n+    eval additional_libdir=\\\"$libdir\\\"\n+\n+  exec_prefix=\"$acl_save_exec_prefix\"\n+  prefix=\"$acl_save_prefix\"\n+\n+\n+# Check whether --with-libiconv-prefix or --without-libiconv-prefix was given.\n+if test \"${with_libiconv_prefix+set}\" = set; then\n+  withval=\"$with_libiconv_prefix\"\n+\n+    if test \"X$withval\" = \"Xno\"; then\n+      use_additional=no\n+    else\n+      if test \"X$withval\" = \"X\"; then\n+\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  acl_save_exec_prefix=\"$exec_prefix\"\n+  exec_prefix=\"$acl_final_exec_prefix\"\n+\n+          eval additional_includedir=\\\"$includedir\\\"\n+          eval additional_libdir=\\\"$libdir\\\"\n+\n+  exec_prefix=\"$acl_save_exec_prefix\"\n+  prefix=\"$acl_save_prefix\"\n+\n+      else\n+        additional_includedir=\"$withval/include\"\n+        additional_libdir=\"$withval/lib\"\n+      fi\n+    fi\n+\n+fi;\n+      LIBICONV=\n+  LTLIBICONV=\n+  INCICONV=\n+  rpathdirs=\n+  ltrpathdirs=\n+  names_already_handled=\n+  names_next_round='iconv '\n+  while test -n \"$names_next_round\"; do\n+    names_this_round=\"$names_next_round\"\n+    names_next_round=\n+    for name in $names_this_round; do\n+      already_handled=\n+      for n in $names_already_handled; do\n+        if test \"$n\" = \"$name\"; then\n+          already_handled=yes\n+          break\n+        fi\n+      done\n+      if test -z \"$already_handled\"; then\n+        names_already_handled=\"$names_already_handled $name\"\n+                        uppername=`echo \"$name\" | sed -e 'y|abcdefghijklmnopqrstuvwxyz./-|ABCDEFGHIJKLMNOPQRSTUVWXYZ___|'`\n+        eval value=\\\"\\$HAVE_LIB$uppername\\\"\n+        if test -n \"$value\"; then\n+          if test \"$value\" = yes; then\n+            eval value=\\\"\\$LIB$uppername\\\"\n+            test -z \"$value\" || LIBICONV=\"${LIBICONV}${LIBICONV:+ }$value\"\n+            eval value=\\\"\\$LTLIB$uppername\\\"\n+            test -z \"$value\" || LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }$value\"\n+          else\n+                                    :\n+          fi\n+        else\n+                              found_dir=\n+          found_la=\n+          found_so=\n+          found_a=\n+          if test $use_additional = yes; then\n+            if test -n \"$shlibext\" && test -f \"$additional_libdir/lib$name.$shlibext\"; then\n+              found_dir=\"$additional_libdir\"\n+              found_so=\"$additional_libdir/lib$name.$shlibext\"\n+              if test -f \"$additional_libdir/lib$name.la\"; then\n+                found_la=\"$additional_libdir/lib$name.la\"\n+              fi\n+            else\n+              if test -f \"$additional_libdir/lib$name.$libext\"; then\n+                found_dir=\"$additional_libdir\"\n+                found_a=\"$additional_libdir/lib$name.$libext\"\n+                if test -f \"$additional_libdir/lib$name.la\"; then\n+                  found_la=\"$additional_libdir/lib$name.la\"\n+                fi\n+              fi\n+            fi\n+          fi\n+          if test \"X$found_dir\" = \"X\"; then\n+            for x in $LDFLAGS $LTLIBICONV; do\n+\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  acl_save_exec_prefix=\"$exec_prefix\"\n+  exec_prefix=\"$acl_final_exec_prefix\"\n+  eval x=\\\"$x\\\"\n+  exec_prefix=\"$acl_save_exec_prefix\"\n+  prefix=\"$acl_save_prefix\"\n+\n+              case \"$x\" in\n+                -L*)\n+                  dir=`echo \"X$x\" | sed -e 's/^X-L//'`\n+                  if test -n \"$shlibext\" && test -f \"$dir/lib$name.$shlibext\"; then\n+                    found_dir=\"$dir\"\n+                    found_so=\"$dir/lib$name.$shlibext\"\n+                    if test -f \"$dir/lib$name.la\"; then\n+                      found_la=\"$dir/lib$name.la\"\n+                    fi\n+                  else\n+                    if test -f \"$dir/lib$name.$libext\"; then\n+                      found_dir=\"$dir\"\n+                      found_a=\"$dir/lib$name.$libext\"\n+                      if test -f \"$dir/lib$name.la\"; then\n+                        found_la=\"$dir/lib$name.la\"\n+                      fi\n+                    fi\n+                  fi\n+                  ;;\n+              esac\n+              if test \"X$found_dir\" != \"X\"; then\n+                break\n+              fi\n+            done\n+          fi\n+          if test \"X$found_dir\" != \"X\"; then\n+                        LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }-L$found_dir -l$name\"\n+            if test \"X$found_so\" != \"X\"; then\n+                                                        if test \"$enable_rpath\" = no || test \"X$found_dir\" = \"X/usr/lib\"; then\n+                                LIBICONV=\"${LIBICONV}${LIBICONV:+ }$found_so\"\n+              else\n+                                                                                haveit=\n+                for x in $ltrpathdirs; do\n+                  if test \"X$x\" = \"X$found_dir\"; then\n+                    haveit=yes\n+                    break\n+                  fi\n+                done\n+                if test -z \"$haveit\"; then\n+                  ltrpathdirs=\"$ltrpathdirs $found_dir\"\n+                fi\n+                                if test \"$hardcode_direct\" = yes; then\n+                                                      LIBICONV=\"${LIBICONV}${LIBICONV:+ }$found_so\"\n+                else\n+                  if test -n \"$hardcode_libdir_flag_spec\" && test \"$hardcode_minus_L\" = no; then\n+                                                            LIBICONV=\"${LIBICONV}${LIBICONV:+ }$found_so\"\n+                                                            haveit=\n+                    for x in $rpathdirs; do\n+                      if test \"X$x\" = \"X$found_dir\"; then\n+                        haveit=yes\n+                        break\n+                      fi\n+                    done\n+                    if test -z \"$haveit\"; then\n+                      rpathdirs=\"$rpathdirs $found_dir\"\n+                    fi\n+                  else\n+                                                                                haveit=\n+                    for x in $LDFLAGS $LIBICONV; do\n+\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  acl_save_exec_prefix=\"$exec_prefix\"\n+  exec_prefix=\"$acl_final_exec_prefix\"\n+  eval x=\\\"$x\\\"\n+  exec_prefix=\"$acl_save_exec_prefix\"\n+  prefix=\"$acl_save_prefix\"\n+\n+                      if test \"X$x\" = \"X-L$found_dir\"; then\n+                        haveit=yes\n+                        break\n+                      fi\n+                    done\n+                    if test -z \"$haveit\"; then\n+                      LIBICONV=\"${LIBICONV}${LIBICONV:+ }-L$found_dir\"\n+                    fi\n+                    if test \"$hardcode_minus_L\" != no; then\n+                                                                                        LIBICONV=\"${LIBICONV}${LIBICONV:+ }$found_so\"\n+                    else\n+                                                                                                                                                                                LIBICONV=\"${LIBICONV}${LIBICONV:+ }-l$name\"\n+                    fi\n+                  fi\n+                fi\n+              fi\n+            else\n+              if test \"X$found_a\" != \"X\"; then\n+                                LIBICONV=\"${LIBICONV}${LIBICONV:+ }$found_a\"\n+              else\n+                                                LIBICONV=\"${LIBICONV}${LIBICONV:+ }-L$found_dir -l$name\"\n+              fi\n+            fi\n+                        additional_includedir=\n+            case \"$found_dir\" in\n+              */lib | */lib/)\n+                basedir=`echo \"X$found_dir\" | sed -e 's,^X,,' -e 's,/lib/*$,,'`\n+                additional_includedir=\"$basedir/include\"\n+                ;;\n+            esac\n+            if test \"X$additional_includedir\" != \"X\"; then\n+                                                                                                                if test \"X$additional_includedir\" != \"X/usr/include\"; then\n+                haveit=\n+                if test \"X$additional_includedir\" = \"X/usr/local/include\"; then\n+                  if test -n \"$GCC\"; then\n+                    case $host_os in\n+                      linux*) haveit=yes;;\n+                    esac\n+                  fi\n+                fi\n+                if test -z \"$haveit\"; then\n+                  for x in $CPPFLAGS $INCICONV; do\n+\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  acl_save_exec_prefix=\"$exec_prefix\"\n+  exec_prefix=\"$acl_final_exec_prefix\"\n+  eval x=\\\"$x\\\"\n+  exec_prefix=\"$acl_save_exec_prefix\"\n+  prefix=\"$acl_save_prefix\"\n+\n+                    if test \"X$x\" = \"X-I$additional_includedir\"; then\n+                      haveit=yes\n+                      break\n+                    fi\n+                  done\n+                  if test -z \"$haveit\"; then\n+                    if test -d \"$additional_includedir\"; then\n+                                            INCICONV=\"${INCICONV}${INCICONV:+ }-I$additional_includedir\"\n+                    fi\n+                  fi\n+                fi\n+              fi\n+            fi\n+                        if test -n \"$found_la\"; then\n+                                                        save_libdir=\"$libdir\"\n+              case \"$found_la\" in\n+                */* | *\\\\*) . \"$found_la\" ;;\n+                *) . \"./$found_la\" ;;\n+              esac\n+              libdir=\"$save_libdir\"\n+                            for dep in $dependency_libs; do\n+                case \"$dep\" in\n+                  -L*)\n+                    additional_libdir=`echo \"X$dep\" | sed -e 's/^X-L//'`\n+                                                                                                                                                                if test \"X$additional_libdir\" != \"X/usr/lib\"; then\n+                      haveit=\n+                      if test \"X$additional_libdir\" = \"X/usr/local/lib\"; then\n+                        if test -n \"$GCC\"; then\n+                          case $host_os in\n+                            linux*) haveit=yes;;\n+                          esac\n+                        fi\n+                      fi\n+                      if test -z \"$haveit\"; then\n+                        haveit=\n+                        for x in $LDFLAGS $LIBICONV; do\n+\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  acl_save_exec_prefix=\"$exec_prefix\"\n+  exec_prefix=\"$acl_final_exec_prefix\"\n+  eval x=\\\"$x\\\"\n+  exec_prefix=\"$acl_save_exec_prefix\"\n+  prefix=\"$acl_save_prefix\"\n+\n+                          if test \"X$x\" = \"X-L$additional_libdir\"; then\n+                            haveit=yes\n+                            break\n+                          fi\n+                        done\n+                        if test -z \"$haveit\"; then\n+                          if test -d \"$additional_libdir\"; then\n+                                                        LIBICONV=\"${LIBICONV}${LIBICONV:+ }-L$additional_libdir\"\n+                          fi\n+                        fi\n+                        haveit=\n+                        for x in $LDFLAGS $LTLIBICONV; do\n+\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  acl_save_exec_prefix=\"$exec_prefix\"\n+  exec_prefix=\"$acl_final_exec_prefix\"\n+  eval x=\\\"$x\\\"\n+  exec_prefix=\"$acl_save_exec_prefix\"\n+  prefix=\"$acl_save_prefix\"\n+\n+                          if test \"X$x\" = \"X-L$additional_libdir\"; then\n+                            haveit=yes\n+                            break\n+                          fi\n+                        done\n+                        if test -z \"$haveit\"; then\n+                          if test -d \"$additional_libdir\"; then\n+                                                        LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }-L$additional_libdir\"\n+                          fi\n+                        fi\n+                      fi\n+                    fi\n+                    ;;\n+                  -R*)\n+                    dir=`echo \"X$dep\" | sed -e 's/^X-R//'`\n+                    if test \"$enable_rpath\" != no; then\n+                                                                  haveit=\n+                      for x in $rpathdirs; do\n+                        if test \"X$x\" = \"X$dir\"; then\n+                          haveit=yes\n+                          break\n+                        fi\n+                      done\n+                      if test -z \"$haveit\"; then\n+                        rpathdirs=\"$rpathdirs $dir\"\n+                      fi\n+                                                                  haveit=\n+                      for x in $ltrpathdirs; do\n+                        if test \"X$x\" = \"X$dir\"; then\n+                          haveit=yes\n+                          break\n+                        fi\n+                      done\n+                      if test -z \"$haveit\"; then\n+                        ltrpathdirs=\"$ltrpathdirs $dir\"\n+                      fi\n+                    fi\n+                    ;;\n+                  -l*)\n+                                        names_next_round=\"$names_next_round \"`echo \"X$dep\" | sed -e 's/^X-l//'`\n+                    ;;\n+                  *.la)\n+                                                                                names_next_round=\"$names_next_round \"`echo \"X$dep\" | sed -e 's,^X.*/,,' -e 's,^lib,,' -e 's,\\.la$,,'`\n+                    ;;\n+                  *)\n+                                        LIBICONV=\"${LIBICONV}${LIBICONV:+ }$dep\"\n+                    LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }$dep\"\n+                    ;;\n+                esac\n+              done\n+            fi\n+          else\n+                                                            LIBICONV=\"${LIBICONV}${LIBICONV:+ }-l$name\"\n+            LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }-l$name\"\n+          fi\n+        fi\n+      fi\n+    done\n+  done\n+  if test \"X$rpathdirs\" != \"X\"; then\n+    if test -n \"$hardcode_libdir_separator\"; then\n+                        alldirs=\n+      for found_dir in $rpathdirs; do\n+        alldirs=\"${alldirs}${alldirs:+$hardcode_libdir_separator}$found_dir\"\n+      done\n+            acl_save_libdir=\"$libdir\"\n+      libdir=\"$alldirs\"\n+      eval flag=\\\"$hardcode_libdir_flag_spec\\\"\n+      libdir=\"$acl_save_libdir\"\n+      LIBICONV=\"${LIBICONV}${LIBICONV:+ }$flag\"\n+    else\n+            for found_dir in $rpathdirs; do\n+        acl_save_libdir=\"$libdir\"\n+        libdir=\"$found_dir\"\n+        eval flag=\\\"$hardcode_libdir_flag_spec\\\"\n+        libdir=\"$acl_save_libdir\"\n+        LIBICONV=\"${LIBICONV}${LIBICONV:+ }$flag\"\n+      done\n+    fi\n+  fi\n+  if test \"X$ltrpathdirs\" != \"X\"; then\n+            for found_dir in $ltrpathdirs; do\n+      LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }-R$found_dir\"\n+    done\n+  fi\n+\n+\n+\n+\n+\n+\n+\n+          am_save_CPPFLAGS=\"$CPPFLAGS\"\n+\n+  for element in $INCICONV; do\n+    haveit=\n+    for x in $CPPFLAGS; do\n+\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  acl_save_exec_prefix=\"$exec_prefix\"\n+  exec_prefix=\"$acl_final_exec_prefix\"\n+  eval x=\\\"$x\\\"\n+  exec_prefix=\"$acl_save_exec_prefix\"\n+  prefix=\"$acl_save_prefix\"\n+\n+      if test \"X$x\" = \"X$element\"; then\n+        haveit=yes\n+        break\n+      fi\n+    done\n+    if test -z \"$haveit\"; then\n+      CPPFLAGS=\"${CPPFLAGS}${CPPFLAGS:+ }$element\"\n+    fi\n+  done\n \n \n   echo \"$as_me:$LINENO: checking for iconv\" >&5\n@@ -10304,7 +10811,7 @@ rm -f conftest.err conftest.$ac_objext \\\n       conftest$ac_exeext conftest.$ac_ext\n     if test \"$am_cv_func_iconv\" != yes; then\n       am_save_LIBS=\"$LIBS\"\n-      LIBS=\"$LIBS $am_cv_libiconv_ldpath -liconv\"\n+      LIBS=\"$LIBS $LIBICONV\"\n       cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n@@ -10366,6 +10873,21 @@ cat >>confdefs.h <<\\_ACEOF\n #define HAVE_ICONV 1\n _ACEOF\n \n+  fi\n+  if test \"$am_cv_lib_iconv\" = yes; then\n+    echo \"$as_me:$LINENO: checking how to link with libiconv\" >&5\n+echo $ECHO_N \"checking how to link with libiconv... $ECHO_C\" >&6\n+    echo \"$as_me:$LINENO: result: $LIBICONV\" >&5\n+echo \"${ECHO_T}$LIBICONV\" >&6\n+  else\n+            CPPFLAGS=\"$am_save_CPPFLAGS\"\n+    LIBICONV=\n+    LTLIBICONV=\n+  fi\n+\n+\n+\n+  if test \"$am_cv_func_iconv\" = yes; then\n     echo \"$as_me:$LINENO: checking for iconv declaration\" >&5\n echo $ECHO_N \"checking for iconv declaration... $ECHO_C\" >&6\n     if test \"${am_cv_proto_iconv+set}\" = set; then\n@@ -10443,11 +10965,6 @@ cat >>confdefs.h <<_ACEOF\n _ACEOF\n \n   fi\n-  LIBICONV=\n-  if test \"$am_cv_lib_iconv\" = yes; then\n-    LIBICONV=\"$am_cv_lib_iconv_ldpath -liconv\"\n-  fi\n-\n \n # Until we have in-tree GNU iconv:\n LIBICONV_DEP=\n@@ -15360,6 +15877,7 @@ s,@GNAT_LIBEXC@,$GNAT_LIBEXC,;t t\n s,@LDEXP_LIB@,$LDEXP_LIB,;t t\n s,@TARGET_GETGROUPS_T@,$TARGET_GETGROUPS_T,;t t\n s,@LIBICONV@,$LIBICONV,;t t\n+s,@LTLIBICONV@,$LTLIBICONV,;t t\n s,@LIBICONV_DEP@,$LIBICONV_DEP,;t t\n s,@manext@,$manext,;t t\n s,@objext@,$objext,;t t"}, {"sha": "b7952cf631d47b047f1ec1617f9b204ce50172fa", "filename": "gcc/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfb77e3751ae374d52a4e59bd8885d13530a291a/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfb77e3751ae374d52a4e59bd8885d13530a291a/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=dfb77e3751ae374d52a4e59bd8885d13530a291a", "patch": "@@ -863,7 +863,7 @@ AC_HEADER_STDC\n AC_HEADER_TIME\n ACX_HEADER_STRING\n AC_HEADER_SYS_WAIT\n-AC_CHECK_HEADERS(limits.h stddef.h string.h strings.h stdlib.h time.h \\\n+AC_CHECK_HEADERS(limits.h stddef.h string.h strings.h stdlib.h time.h iconv.h \\\n \t\t fcntl.h unistd.h sys/file.h sys/time.h sys/mman.h \\\n \t\t sys/resource.h sys/param.h sys/times.h sys/stat.h \\\n \t\t direct.h malloc.h langinfo.h ldfcn.h locale.h wchar.h)"}]}