{"sha": "b3f332c6b47788bc4b3ecffd2236f6b1333755bd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNmMzMyYzZiNDc3ODhiYzRiM2VjZmZkMjIzNmY2YjEzMzM3NTViZA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-12-14T01:30:35Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-12-14T01:30:35Z"}, "message": "re PR middle-end/17930 (-mfpmath=sse creates illegal code (movapd with misaligned argument))\n\n        PR middle-end/17930\n        * passes.c (rest_of_clean_state): Fix computation of\n        preferred_incoming_stack_boundary.\n\nFrom-SVN: r92116", "tree": {"sha": "caa0a198e00cf31abb11cfb9a486833a34269f1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/caa0a198e00cf31abb11cfb9a486833a34269f1b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3f332c6b47788bc4b3ecffd2236f6b1333755bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3f332c6b47788bc4b3ecffd2236f6b1333755bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3f332c6b47788bc4b3ecffd2236f6b1333755bd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3f332c6b47788bc4b3ecffd2236f6b1333755bd/comments", "author": null, "committer": null, "parents": [{"sha": "648cdd5e967907edea5aa34fff07deb14f9a1ef9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/648cdd5e967907edea5aa34fff07deb14f9a1ef9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/648cdd5e967907edea5aa34fff07deb14f9a1ef9"}], "stats": {"total": 43, "additions": 41, "deletions": 2}, "files": [{"sha": "de26071771aaa79a68bc6335a26e80b4b8600f0f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3f332c6b47788bc4b3ecffd2236f6b1333755bd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3f332c6b47788bc4b3ecffd2236f6b1333755bd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b3f332c6b47788bc4b3ecffd2236f6b1333755bd", "patch": "@@ -1,3 +1,9 @@\n+2004-12-13  Richard Henderson  <rth@redhat.com>\n+\n+\tPR middle-end/17930\n+        * passes.c (rest_of_clean_state): Fix computation of\n+        preferred_incoming_stack_boundary.\n+\n 2004-12-13  Wolfgang Bangerth <bangerth@dealii.org>\n \n \t* reload.h: Remove struct needs and its only use."}, {"sha": "5e808e9230803ef6b86595ae108df958c6d6e31a", "filename": "gcc/passes.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3f332c6b47788bc4b3ecffd2236f6b1333755bd/gcc%2Fpasses.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3f332c6b47788bc4b3ecffd2236f6b1333755bd/gcc%2Fpasses.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.c?ref=b3f332c6b47788bc4b3ecffd2236f6b1333755bd", "patch": "@@ -1503,8 +1503,7 @@ rest_of_clean_state (void)\n   if (targetm.binds_local_p (current_function_decl))\n     {\n       int pref = cfun->preferred_stack_boundary;\n-      if (cfun->recursive_call_emit\n-          && cfun->stack_alignment_needed > cfun->preferred_stack_boundary)\n+      if (cfun->stack_alignment_needed > cfun->preferred_stack_boundary)\n \tpref = cfun->stack_alignment_needed;\n       cgraph_rtl_info (current_function_decl)->preferred_incoming_stack_boundary\n         = pref;"}, {"sha": "ae557f3d80591c28df4ae0c1d6ef6760488b23b3", "filename": "gcc/testsuite/gcc.dg/i386-sse-10.c", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3f332c6b47788bc4b3ecffd2236f6b1333755bd/gcc%2Ftestsuite%2Fgcc.dg%2Fi386-sse-10.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3f332c6b47788bc4b3ecffd2236f6b1333755bd/gcc%2Ftestsuite%2Fgcc.dg%2Fi386-sse-10.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fi386-sse-10.c?ref=b3f332c6b47788bc4b3ecffd2236f6b1333755bd", "patch": "@@ -0,0 +1,34 @@\n+/* PR 17930 */\n+/* { dg-do run { target i?86-*-* x86_64-*-* } } */\n+/* { dg-options \"-O1 -msse2 -mfpmode=sse -mno-accumulate-outgoing-args\" } */\n+\n+#include \"i386-cpuid.h\"\n+\n+typedef _Complex double complex_16;\n+\n+void NOINLINE\n+test (complex_16 a[5][5])\n+{\n+  int i, j, k;\n+  complex_16 x;\n+\n+  for (j = 0; j < 5; j++)\n+    for (i = 0; i < 5; i++)\n+      {\n+        for (k = 0; k < j - 1; ++k)\n+\t  x = a[k][i] * ~a[k][j];\n+\ta[j][i] = x;\n+      }\n+}\n+\n+int main()\n+{\n+  static complex_16 work[5][5];\n+  unsigned long cpu_facilities;\n+\n+  cpu_facilities = i386_cpuid ();\n+  if (cpu_facilities & bit_SSE2)\n+    test (work); \n+\n+  return 0;\n+}"}]}