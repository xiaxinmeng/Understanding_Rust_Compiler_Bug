{"sha": "c6aecf3bee303042c654da91ea56a36766c16ebf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzZhZWNmM2JlZTMwMzA0MmM2NTRkYTkxZWE1NmEzNjc2NmMxNmViZg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-06T09:41:04Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-06T09:41:04Z"}, "message": "s-fileio.adb (Open): When file open operation fails...\n\n2008-08-06  Thomas Quinot  <quinot@adacore.com>\n\n\t* s-fileio.adb (Open): When file open operation fails, raise Name_Error\n\tonly when the operating system reports a non-existing file or directory\n\t(ENOENT), otherwise raise Name_Error.\n\nFrom-SVN: r138786", "tree": {"sha": "ab863f320e4c16e67c92f3433536eab8625244ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab863f320e4c16e67c92f3433536eab8625244ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c6aecf3bee303042c654da91ea56a36766c16ebf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6aecf3bee303042c654da91ea56a36766c16ebf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6aecf3bee303042c654da91ea56a36766c16ebf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6aecf3bee303042c654da91ea56a36766c16ebf/comments", "author": null, "committer": null, "parents": [{"sha": "49f7fe608b9df9033b0c4978074d3df380a0a178", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49f7fe608b9df9033b0c4978074d3df380a0a178", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49f7fe608b9df9033b0c4978074d3df380a0a178"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "468a3ef665f3202a73b02eacd3d8ed3a25530300", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6aecf3bee303042c654da91ea56a36766c16ebf/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6aecf3bee303042c654da91ea56a36766c16ebf/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c6aecf3bee303042c654da91ea56a36766c16ebf", "patch": "@@ -1,3 +1,22 @@\n+2008-08-06  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* sem_res.adb: Minor reformatting\n+\n+\t* s-fileio.adb (Open): When file open operation fails, raise Name_Error\n+\tonly when the operating system reports a non-existing file or directory\n+\t(ENOENT), otherwise raise Name_Error.\n+\n+\t* exp_ch11.adb: Minor reformatting\n+\n+2008-08-06  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch3.adb (Access_Subprogram_Declaration): If the return type is\n+\tincomplete, add the access_to_subprogram type to the list of private\n+\tdependents only if the incomplete type will be completed in the current\n+\tscope.\n+\t(Build_Discriminant_Constraints): If the type of the discriminant is\n+\taccess_to_variable, reject a constraint that is access_to_constant.\n+\n 2008-08-06  Thomas Quinot  <quinot@adacore.com>\n \n \t* g-socket-dummy.adb, g-socket-dummy.ads, g-sothco-dummy.adb,"}, {"sha": "79b718eadceb5c524b16cf0f1a3ddee2797786af", "filename": "gcc/ada/s-fileio.adb", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6aecf3bee303042c654da91ea56a36766c16ebf/gcc%2Fada%2Fs-fileio.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6aecf3bee303042c654da91ea56a36766c16ebf/gcc%2Fada%2Fs-fileio.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-fileio.adb?ref=c6aecf3bee303042c654da91ea56a36766c16ebf", "patch": "@@ -33,10 +33,13 @@\n \n with Ada.Finalization;            use Ada.Finalization;\n with Ada.IO_Exceptions;           use Ada.IO_Exceptions;\n+with Interfaces.C;\n with Interfaces.C_Streams;        use Interfaces.C_Streams;\n \n with System.CRTL;\n with System.Case_Util;            use System.Case_Util;\n+with System.OS_Constants;\n+with System.OS_Lib;\n with System.Soft_Links;\n \n with Ada.Unchecked_Deallocation;\n@@ -47,6 +50,7 @@ package body System.File_IO is\n \n    package SSL renames System.Soft_Links;\n \n+   use type Interfaces.C.int;\n    use type System.CRTL.size_t;\n \n    ----------------------\n@@ -984,7 +988,11 @@ package body System.File_IO is\n             Stream := fopen (Namestr'Address, Fopstr'Address, Encoding);\n \n             if Stream = NULL_Stream then\n-               if not Tempfile and then file_exists (Namestr'Address) = 0 then\n+               --  Raise Name_Error if trying to open a non-existent file.\n+               --  Otherwise raise Use_Error. Should we raise Device_Error for\n+               --  ENOSPC???\n+\n+               if System.OS_Lib.Errno = System.OS_Constants.ENOENT then\n                   raise Name_Error;\n                else\n                   raise Use_Error;"}]}