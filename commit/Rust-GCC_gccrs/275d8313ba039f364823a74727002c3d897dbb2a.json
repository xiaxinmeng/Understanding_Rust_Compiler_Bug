{"sha": "275d8313ba039f364823a74727002c3d897dbb2a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjc1ZDgzMTNiYTAzOWYzNjQ4MjNhNzQ3MjcwMDJjM2Q4OTdkYmIyYQ==", "commit": {"author": {"name": "Hristian Kirtchev", "email": "kirtchev@adacore.com", "date": "2013-10-17T14:00:46Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2013-10-17T14:00:46Z"}, "message": "exp_util.adb, [...] (Entity_Of): Moved to Sem_Util.\n\n2013-10-17  Hristian Kirtchev  <kirtchev@adacore.com>\n\n\t* exp_util.adb, exp_util.ads (Entity_Of): Moved to Sem_Util.\n\t* sem_prag.adb (Analyze_Global_In_Decl_List): Mark a null\n\titem list as being analyzed.\n\t(Analyze_Global_List): Mark a\n\tnull global list and multiple global items as being analyzed.\n\t(Analyze_Input_Item): Check the unit that defines the input\n\tvariable or state, not the reference to it.\n\t* sem_util.ads, sem_util.adb (Entity_Of): Moved from Exp_Util. Ensure\n\tthat the input has an entity.\n\nFrom-SVN: r203764", "tree": {"sha": "52fd5b0e30aa03f790606a602eb60aea70209bbc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52fd5b0e30aa03f790606a602eb60aea70209bbc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/275d8313ba039f364823a74727002c3d897dbb2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/275d8313ba039f364823a74727002c3d897dbb2a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/275d8313ba039f364823a74727002c3d897dbb2a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/275d8313ba039f364823a74727002c3d897dbb2a/comments", "author": {"login": "kirtchev-adacore", "id": 60669983, "node_id": "MDQ6VXNlcjYwNjY5OTgz", "avatar_url": "https://avatars.githubusercontent.com/u/60669983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kirtchev-adacore", "html_url": "https://github.com/kirtchev-adacore", "followers_url": "https://api.github.com/users/kirtchev-adacore/followers", "following_url": "https://api.github.com/users/kirtchev-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/kirtchev-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/kirtchev-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kirtchev-adacore/subscriptions", "organizations_url": "https://api.github.com/users/kirtchev-adacore/orgs", "repos_url": "https://api.github.com/users/kirtchev-adacore/repos", "events_url": "https://api.github.com/users/kirtchev-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/kirtchev-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "064f4527c45595301de59346f8bf3e200a93f966", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/064f4527c45595301de59346f8bf3e200a93f966", "html_url": "https://github.com/Rust-GCC/gccrs/commit/064f4527c45595301de59346f8bf3e200a93f966"}], "stats": {"total": 95, "additions": 54, "deletions": 41}, "files": [{"sha": "f3222709d5196cfe5a147af30251afb6ed4ec5ca", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=275d8313ba039f364823a74727002c3d897dbb2a", "patch": "@@ -1,3 +1,15 @@\n+2013-10-17  Hristian Kirtchev  <kirtchev@adacore.com>\n+\n+\t* exp_util.adb, exp_util.ads (Entity_Of): Moved to Sem_Util.\n+\t* sem_prag.adb (Analyze_Global_In_Decl_List): Mark a null\n+\titem list as being analyzed.\n+\t(Analyze_Global_List): Mark a\n+\tnull global list and multiple global items as being analyzed.\n+\t(Analyze_Input_Item): Check the unit that defines the input\n+\tvariable or state, not the reference to it.\n+\t* sem_util.ads, sem_util.adb (Entity_Of): Moved from Exp_Util. Ensure\n+\tthat the input has an entity.\n+\n 2013-10-17  Thomas Quinot  <quinot@adacore.com>\n \n \t* exp_util.adb (Get_Current_Value_Condition,"}, {"sha": "a14b1bc1e19b456b6977dfe0ebbc34fb545a5210", "filename": "gcc/ada/exp_util.adb", "status": "modified", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2Fexp_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2Fexp_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_util.adb?ref=275d8313ba039f364823a74727002c3d897dbb2a", "patch": "@@ -1771,35 +1771,6 @@ package body Exp_Util is\n       end if;\n    end Ensure_Defined;\n \n-   ---------------\n-   -- Entity_Of --\n-   ---------------\n-\n-   function Entity_Of (N : Node_Id) return Entity_Id is\n-      Id : Entity_Id;\n-\n-   begin\n-      Id := Empty;\n-\n-      if Is_Entity_Name (N) then\n-         Id := Entity (N);\n-\n-         --  Follow a possible chain of renamings to reach the root renamed\n-         --  object.\n-\n-         while Present (Renamed_Object (Id)) loop\n-            if Is_Entity_Name (Renamed_Object (Id)) then\n-               Id := Entity (Renamed_Object (Id));\n-            else\n-               Id := Empty;\n-               exit;\n-            end if;\n-         end loop;\n-      end if;\n-\n-      return Id;\n-   end Entity_Of;\n-\n    --------------------\n    -- Entry_Names_OK --\n    --------------------"}, {"sha": "bf72220f8269fb7a308b9b4d0d113cfe6bbda4d1", "filename": "gcc/ada/exp_util.ads", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2Fexp_util.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2Fexp_util.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_util.ads?ref=275d8313ba039f364823a74727002c3d897dbb2a", "patch": "@@ -349,10 +349,6 @@ package Exp_Util is\n    --  used to ensure that an Itype is properly defined outside a conditional\n    --  construct when it is referenced in more than one branch.\n \n-   function Entity_Of (N : Node_Id) return Entity_Id;\n-   --  Return the entity of N or Empty. If N is a renaming, return the entity\n-   --  of the root renamed object.\n-\n    function Entry_Names_OK return Boolean;\n    --  Determine whether it is appropriate to dynamically allocate strings\n    --  which represent entry [family member] names. These strings are created"}, {"sha": "507d84ffa5133e048a480c7e06b804f11e6a4bb5", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=275d8313ba039f364823a74727002c3d897dbb2a", "patch": "@@ -1856,7 +1856,7 @@ package body Sem_Prag is\n \n       begin\n          if Nkind (List) = N_Null then\n-            null;\n+            Set_Analyzed (List);\n \n          --  Single global item declaration\n \n@@ -1869,6 +1869,7 @@ package body Sem_Prag is\n          --  Simple global list or moded global list declaration\n \n          elsif Nkind (List) = N_Aggregate then\n+            Set_Analyzed (List);\n \n             --  The declaration of a simple global list appear as a collection\n             --  of expressions.\n@@ -1985,7 +1986,7 @@ package body Sem_Prag is\n       --  There is nothing to be done for a null global list\n \n       if Nkind (Items) = N_Null then\n-         null;\n+         Set_Analyzed (Items);\n \n       --  Analyze the various forms of global lists and items. Note that some\n       --  of these may be malformed in which case the analysis emits error\n@@ -2365,7 +2366,7 @@ package body Sem_Prag is\n                      --  The input cannot denote states or variables declared\n                      --  within the related package.\n \n-                     if In_Same_Code_Unit (Item, Input) then\n+                     if In_Same_Code_Unit (Item, Input_Id) then\n                         Error_Msg_Name_1 := Chars (Pack_Id);\n                         Error_Msg_NE\n                           (\"input item & cannot denote a visible variable or \"\n@@ -11125,6 +11126,11 @@ package body Sem_Prag is\n             GNAT_Pragma;\n             Check_Arg_Count (1);\n \n+            --  The pragma is analyzed at the end of the declarative part which\n+            --  contains the related subprogram. Reset the analyzed flag.\n+\n+            Set_Analyzed (N, False);\n+\n             --  Ensure the proper placement of the pragma. Contract_Cases must\n             --  be associated with a subprogram declaration or a body that acts\n             --  as a spec.\n@@ -11140,11 +11146,6 @@ package body Sem_Prag is\n                return;\n             end if;\n \n-            --  The pragma is analyzed at the end of the declarative part which\n-            --  contains the related subprogram. Reset the analyzed flag.\n-\n-            Set_Analyzed (N, False);\n-\n             --  When the pragma appears on a subprogram body, perform the full\n             --  analysis now.\n "}, {"sha": "08acd702caf32e67903a54f971c4185ed6f7fa26", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=275d8313ba039f364823a74727002c3d897dbb2a", "patch": "@@ -4982,6 +4982,35 @@ package body Sem_Util is\n       end if;\n    end Enter_Name;\n \n+   ---------------\n+   -- Entity_Of --\n+   ---------------\n+\n+   function Entity_Of (N : Node_Id) return Entity_Id is\n+      Id : Entity_Id;\n+\n+   begin\n+      Id := Empty;\n+\n+      if Is_Entity_Name (N) then\n+         Id := Entity (N);\n+\n+         --  Follow a possible chain of renamings to reach the root renamed\n+         --  object.\n+\n+         while Present (Id) and then Present (Renamed_Object (Id)) loop\n+            if Is_Entity_Name (Renamed_Object (Id)) then\n+               Id := Entity (Renamed_Object (Id));\n+            else\n+               Id := Empty;\n+               exit;\n+            end if;\n+         end loop;\n+      end if;\n+\n+      return Id;\n+   end Entity_Of;\n+\n    --------------------------\n    -- Explain_Limited_Type --\n    --------------------------"}, {"sha": "8227ee2735ba9871bb5b42ecbc41519b5a4c9dc8", "filename": "gcc/ada/sem_util.ads", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2Fsem_util.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/275d8313ba039f364823a74727002c3d897dbb2a/gcc%2Fada%2Fsem_util.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.ads?ref=275d8313ba039f364823a74727002c3d897dbb2a", "patch": "@@ -481,6 +481,10 @@ package Sem_Util is\n    --  Note: Enter_Name is not used for overloadable entities, instead these\n    --  are entered using Sem_Ch6.Enter_Overloadable_Entity.\n \n+   function Entity_Of (N : Node_Id) return Entity_Id;\n+   --  Return the entity of N or Empty. If N is a renaming, return the entity\n+   --  of the root renamed object.\n+\n    procedure Explain_Limited_Type (T : Entity_Id; N : Node_Id);\n    --  This procedure is called after issuing a message complaining about an\n    --  inappropriate use of limited type T. If useful, it adds additional"}]}