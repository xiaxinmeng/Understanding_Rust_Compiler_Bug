{"sha": "eb9ec0d45db94e95fc5f0302100c7918c1e54f7b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWI5ZWMwZDQ1ZGI5NGU5NWZjNWYwMzAyMTAwYzc5MThjMWU1NGY3Yg==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@TechFak.Uni-Bielefeld.DE", "date": "2003-09-24T13:07:25Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2003-09-24T13:07:25Z"}, "message": "* class.c (build_utf8_ref): Test for HAVE_GAS_SHF_MERGE value.\n\nFrom-SVN: r71733", "tree": {"sha": "1161d74636c9bd8bf6af80ab9859d26a28685a2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1161d74636c9bd8bf6af80ab9859d26a28685a2e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eb9ec0d45db94e95fc5f0302100c7918c1e54f7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb9ec0d45db94e95fc5f0302100c7918c1e54f7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb9ec0d45db94e95fc5f0302100c7918c1e54f7b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb9ec0d45db94e95fc5f0302100c7918c1e54f7b/comments", "author": null, "committer": null, "parents": [{"sha": "ff42324ea35dd2b82cc5f81e22f2765cda531d04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff42324ea35dd2b82cc5f81e22f2765cda531d04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff42324ea35dd2b82cc5f81e22f2765cda531d04"}], "stats": {"total": 39, "additions": 22, "deletions": 17}, "files": [{"sha": "9d2cc8ca71e2caf15ed52ee36d96572a1c06543f", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9ec0d45db94e95fc5f0302100c7918c1e54f7b/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9ec0d45db94e95fc5f0302100c7918c1e54f7b/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=eb9ec0d45db94e95fc5f0302100c7918c1e54f7b", "patch": "@@ -1,3 +1,7 @@\n+2003-09-24  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n+\n+\t* class.c (build_utf8_ref): Test for HAVE_GAS_SHF_MERGE value.\n+\n 2003-09-23  Roger Sayle  <roger@eyesopen.com>\n \n \t* jcf-write.c (generate_bytecode_insns): Optimize binary operations"}, {"sha": "552a4f458620f4bd86e17341b521f6dbde32c763", "filename": "gcc/java/class.c", "status": "modified", "additions": 18, "deletions": 17, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb9ec0d45db94e95fc5f0302100c7918c1e54f7b/gcc%2Fjava%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb9ec0d45db94e95fc5f0302100c7918c1e54f7b/gcc%2Fjava%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fclass.c?ref=eb9ec0d45db94e95fc5f0302100c7918c1e54f7b", "patch": "@@ -779,23 +779,24 @@ build_utf8_ref (tree name)\n   TREE_READONLY (decl) = 1;\n   TREE_THIS_VOLATILE (decl) = 0;\n   DECL_INITIAL (decl) = cinit;\n-#ifdef HAVE_GAS_SHF_MERGE\n-  {\n-    int decl_size;\n-    /* Ensure decl_size is a multiple of utf8const_type's alignment. */\n-    decl_size = (name_len + 5 + TYPE_ALIGN_UNIT (utf8const_type) - 1)\n-\t         & ~(TYPE_ALIGN_UNIT (utf8const_type) - 1);\n-    if (flag_merge_constants && decl_size < 256)\n-      {\n-        char buf[32];\n-        int flags = (SECTION_OVERRIDE\n-        \t   | SECTION_MERGE | (SECTION_ENTSIZE & decl_size));\n-        sprintf (buf, \".rodata.jutf8.%d\", decl_size);\n-        named_section_flags (buf, flags);\n-        DECL_SECTION_NAME (decl) = build_string (strlen (buf), buf);\n-      }\n-  }\n-#endif\n+\n+  if (HAVE_GAS_SHF_MERGE)\n+    {\n+      int decl_size;\n+      /* Ensure decl_size is a multiple of utf8const_type's alignment. */\n+      decl_size = (name_len + 5 + TYPE_ALIGN_UNIT (utf8const_type) - 1)\n+\t& ~(TYPE_ALIGN_UNIT (utf8const_type) - 1);\n+      if (flag_merge_constants && decl_size < 256)\n+\t{\n+\t  char buf[32];\n+\t  int flags = (SECTION_OVERRIDE\n+\t\t       | SECTION_MERGE | (SECTION_ENTSIZE & decl_size));\n+\t  sprintf (buf, \".rodata.jutf8.%d\", decl_size);\n+\t  named_section_flags (buf, flags);\n+\t  DECL_SECTION_NAME (decl) = build_string (strlen (buf), buf);\n+\t}\n+    }\n+\n   TREE_CHAIN (decl) = utf8_decl_list;\n   layout_decl (decl, 0);\n   pushdecl (decl);"}]}