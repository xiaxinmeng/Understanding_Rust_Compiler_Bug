{"sha": "8322308e9322093511a2cadb464f468fd9c1513a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODMyMjMwOGU5MzIyMDkzNTExYTJjYWRiNDY0ZjQ2OGZkOWMxNTEzYQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1994-05-26T16:23:31Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1994-05-26T16:23:31Z"}, "message": "Protect __P in math.h and floatingpoint.h.\n\nFrom-SVN: r7350", "tree": {"sha": "178a2de63d69372ffd8c4f2d0a3851489e1ece3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/178a2de63d69372ffd8c4f2d0a3851489e1ece3d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8322308e9322093511a2cadb464f468fd9c1513a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8322308e9322093511a2cadb464f468fd9c1513a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8322308e9322093511a2cadb464f468fd9c1513a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8322308e9322093511a2cadb464f468fd9c1513a/comments", "author": null, "committer": null, "parents": [{"sha": "7831ef177bd85529c59eac7b91681a95266bba37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7831ef177bd85529c59eac7b91681a95266bba37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7831ef177bd85529c59eac7b91681a95266bba37"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "7dbf671f9626e8172a018d46b0ec95db664637f0", "filename": "gcc/fixinc.svr4", "status": "modified", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8322308e9322093511a2cadb464f468fd9c1513a/gcc%2Ffixinc.svr4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8322308e9322093511a2cadb464f468fd9c1513a/gcc%2Ffixinc.svr4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc.svr4?ref=8322308e9322093511a2cadb464f468fd9c1513a", "patch": "@@ -1379,6 +1379,38 @@ if [ \\! -z \"$file_to_fix\" ]; then\n   rm -f /tmp/$base\n fi\n \n+# Solaris math.h and floatingpoint.h define __P without protection,\n+# which conflicts with the fixproto definition.  The fixproto\n+# definition and the Solaris definition are used the same way.\n+for file in math.h floatingpoint.h; do\n+  base=`basename $file`\n+  if [ -r ${LIB}/$file ]; then\n+    file_to_fix=${LIB}/$file\n+  else\n+    if [ -r ${INPUT}/$file ]; then\n+      file_to_fix=${INPUT}/$file\n+    else\n+      file_to_fix=\"\"\n+    fi\n+  fi\n+  if [ \\! -z \"$file_to_fix\" ]; then\n+    echo Checking $file_to_fix\n+    sed -e '/^#define[ \t]*__P/i\\\n+#ifndef __P'\\\n+        -e '/^#define[ \t]*__P/a\\\n+#endif' $file_to_fix > /tmp/$base\n+    if cmp $file_to_fix /tmp/$base >/dev/null 2>&1; then \\\n+      true\n+    else\n+      echo Fixed $file_to_fix\n+      rm -f ${LIB}/$file\n+      cp /tmp/$base ${LIB}/$file\n+      chmod a+r ${LIB}/$file\n+    fi\n+   rm -f /tmp/$base\n+  fi\n+done\n+\n echo 'Removing unneeded directories:'\n cd $LIB\n files=`find . -type d -print | sort -r`"}]}