{"sha": "744f6f0984e3b00f2dc1d451087543526e1cc672", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzQ0ZjZmMDk4NGUzYjAwZjJkYzFkNDUxMDg3NTQzNTI2ZTFjYzY3Mg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2003-06-06T14:30:31Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2003-06-06T14:30:31Z"}, "message": "mklibgcc.in: Propagate .note.GNU-stack section if needed into the .hidden assembly stubs.\n\n\t* mklibgcc.in: Propagate .note.GNU-stack section if needed into\n\tthe .hidden assembly stubs.\n\nFrom-SVN: r67545", "tree": {"sha": "dd8fdb23b5b03f3557d1a5c079442eababab293a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dd8fdb23b5b03f3557d1a5c079442eababab293a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/744f6f0984e3b00f2dc1d451087543526e1cc672", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/744f6f0984e3b00f2dc1d451087543526e1cc672", "html_url": "https://github.com/Rust-GCC/gccrs/commit/744f6f0984e3b00f2dc1d451087543526e1cc672", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/744f6f0984e3b00f2dc1d451087543526e1cc672/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c220e3a948cc132c6177d0563b2e8c119231bef9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c220e3a948cc132c6177d0563b2e8c119231bef9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c220e3a948cc132c6177d0563b2e8c119231bef9"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "4fb4d6017e640e6fb82e7c5d30c0df8bd1a2e19f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/744f6f0984e3b00f2dc1d451087543526e1cc672/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/744f6f0984e3b00f2dc1d451087543526e1cc672/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=744f6f0984e3b00f2dc1d451087543526e1cc672", "patch": "@@ -1,3 +1,8 @@\n+2003-06-06  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* mklibgcc.in: Propagate .note.GNU-stack section if needed into\n+\tthe .hidden assembly stubs.\n+\n 2003-06-06  H.J. Lu <hongjiu.lu@intel.com>\n \n \t* config.gcc (extra_headers): Add emmintrin.h for i[34567]86-*-*"}, {"sha": "6fcabfca9216b44e66c29852ac25245c5c17b618", "filename": "gcc/mklibgcc.in", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/744f6f0984e3b00f2dc1d451087543526e1cc672/gcc%2Fmklibgcc.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/744f6f0984e3b00f2dc1d451087543526e1cc672/gcc%2Fmklibgcc.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmklibgcc.in?ref=744f6f0984e3b00f2dc1d451087543526e1cc672", "patch": "@@ -339,11 +339,15 @@ EOF\n   if [ \"@libgcc_visibility@\" = yes -a \"$SHLIB_LINK\" ]; then\n     libgcc_a_objs=\n     echo \"\"\n+    echo \"libgcc/${dir}/stacknote.s: stmp-dirs\"\n+    echo '\t@( echo | $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) '${flags}' -S -o - -xc - | grep .note.GNU-stack || : ) > $@.tmp'\n+    echo '\t@mv -f $@.tmp $@'\n+    echo \"\"\n     for o in $libgcc_objs $libgcc_st_objs; do\n       # .oS objects will have all non-local symbol definitions .hidden\n       oS=`echo ${o} | sed s~${objext}'$~.oS~g'`\n-      echo \"${oS}: stmp-dirs ${o}\"\n-      echo '\t$(NM_FOR_TARGET) '${SHLIB_NM_FLAGS} ${o}' | $(AWK) '\\''NF == 3 { print \"\\t.hidden\", $$3 }'\\'' | $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) '${flags}' -r -nostdinc -nostdlib -o $@ '${o}' -xassembler -'\n+      echo \"${oS}: stmp-dirs libgcc/${dir}/stacknote.s ${o}\"\n+      echo '\t( $(NM_FOR_TARGET) '${SHLIB_NM_FLAGS} ${o}' | $(AWK) '\\''NF == 3 { print \"\\t.hidden\", $$3 }'\\''; cat libgcc/${dir}/stacknote.s ) | $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) '${flags}' -r -nostdinc -nostdlib -o $@ '${o}' -xassembler -'\n       libgcc_a_objs=\"${libgcc_a_objs} ${oS}\"\n     done\n   fi\n@@ -430,6 +434,7 @@ echo '\t  if [ -d $(stage)/$$dir ]; then true; else '$mkinstalldirs' $(stage)/$$d\n echo '\tdone'\n echo '\t-for dir in '\"${dirs}\"'; do \\'\n echo '\t  mv $$dir/*'\"${objext}\"' $(stage)/$$dir; \\'\n+echo '\t  test ! -f $$dir/stacknote.s || mv $$dir/stacknote.s $(stage)/$$dir; \\'\n echo '\t  test ! -f $$dir/libgcc.a || mv $$dir/lib* $(stage)/$$dir; \\'\n echo '\tdone'\n "}]}