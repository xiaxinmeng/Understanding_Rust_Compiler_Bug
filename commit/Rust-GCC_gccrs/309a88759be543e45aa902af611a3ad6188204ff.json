{"sha": "309a88759be543e45aa902af611a3ad6188204ff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzA5YTg4NzU5YmU1NDNlNDVhYTkwMmFmNjExYTNhZDYxODgyMDRmZg==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1996-08-28T22:07:28Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1996-08-28T22:07:28Z"}, "message": "(print_single_switch): Ultrix fprintf returns 0 on success.\n\nFrom-SVN: r12676", "tree": {"sha": "5ec155cb701c86eec55230d71d6d5523d941ea71", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ec155cb701c86eec55230d71d6d5523d941ea71"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/309a88759be543e45aa902af611a3ad6188204ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/309a88759be543e45aa902af611a3ad6188204ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/309a88759be543e45aa902af611a3ad6188204ff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/309a88759be543e45aa902af611a3ad6188204ff/comments", "author": null, "committer": null, "parents": [{"sha": "ff482cef956efbb0ef3131e61f15a11fa53cdcc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff482cef956efbb0ef3131e61f15a11fa53cdcc3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff482cef956efbb0ef3131e61f15a11fa53cdcc3"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "bd4b3bdf86305963fa311cf7c3d906217524ab17", "filename": "gcc/toplev.c", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/309a88759be543e45aa902af611a3ad6188204ff/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/309a88759be543e45aa902af611a3ad6188204ff/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=309a88759be543e45aa902af611a3ad6188204ff", "patch": "@@ -4120,25 +4120,32 @@ print_version (file, indent)\n }\n \n /* Print an option value and return the adjusted position in the line.\n-   ??? We don't handle error returns from fprintf (disk full).  */\n+   ??? We don't handle error returns from fprintf (disk full); presumably\n+   other code will catch a disk full though.  */\n \n int\n print_single_switch (file, pos, max, indent, sep, term, type, name)\n      FILE *file;\n      int pos, max;\n      char *indent, *sep, *term, *type, *name;\n {\n+  /* The ultrix fprintf returns 0 on success, so compute the result we want\n+     here since we need it for the following test.  */\n+  int len = strlen (sep) + strlen (type) + strlen (name);\n+\n   if (pos != 0\n-      && pos + strlen (sep) + strlen (type) + strlen (name) > max)\n+      && pos + len > max)\n     {\n       fprintf (file, \"%s\", term);\n       pos = 0;\n     }\n   if (pos == 0)\n     {\n-      pos = fprintf (file, \"%s\", indent);\n+      fprintf (file, \"%s\", indent);\n+      pos = strlen (indent);\n     }\n-  pos += fprintf (file, \"%s%s%s\", sep, type, name);\n+  fprintf (file, \"%s%s%s\", sep, type, name);\n+  pos += len;\n   return pos;\n }\n      "}]}