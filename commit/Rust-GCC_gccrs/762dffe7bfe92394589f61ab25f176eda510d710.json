{"sha": "762dffe7bfe92394589f61ab25f176eda510d710", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzYyZGZmZTdiZmU5MjM5NDU4OWY2MWFiMjVmMTc2ZWRhNTEwZDcxMA==", "commit": {"author": {"name": "Doug Rupp", "email": "rupp@adacore.com", "date": "2008-08-04T09:16:54Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-04T09:16:54Z"}, "message": "utils2.c (fill_vms_descriptor): Use long_integer for comparison.\n\n2008-08-04  Doug Rupp  <rupp@adacore.com>\n\n\t* utils2.c (fill_vms_descriptor): Use long_integer for comparison.\n\tCall add_stmt_with_node to set locus.\n\nFrom-SVN: r138589", "tree": {"sha": "7a6f521f7346b250d58f1f0f085c091402126576", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7a6f521f7346b250d58f1f0f085c091402126576"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/762dffe7bfe92394589f61ab25f176eda510d710", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/762dffe7bfe92394589f61ab25f176eda510d710", "html_url": "https://github.com/Rust-GCC/gccrs/commit/762dffe7bfe92394589f61ab25f176eda510d710", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/762dffe7bfe92394589f61ab25f176eda510d710/comments", "author": {"login": "Cementitious", "id": 115579865, "node_id": "U_kgDOBuOb2Q", "avatar_url": "https://avatars.githubusercontent.com/u/115579865?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cementitious", "html_url": "https://github.com/Cementitious", "followers_url": "https://api.github.com/users/Cementitious/followers", "following_url": "https://api.github.com/users/Cementitious/following{/other_user}", "gists_url": "https://api.github.com/users/Cementitious/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cementitious/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cementitious/subscriptions", "organizations_url": "https://api.github.com/users/Cementitious/orgs", "repos_url": "https://api.github.com/users/Cementitious/repos", "events_url": "https://api.github.com/users/Cementitious/events{/privacy}", "received_events_url": "https://api.github.com/users/Cementitious/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bdc33a55e85d7a895f88f70fb41b258955afd8e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdc33a55e85d7a895f88f70fb41b258955afd8e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bdc33a55e85d7a895f88f70fb41b258955afd8e0"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "44c78f49e3d221a9fa49d9187f7c98171de18e29", "filename": "gcc/ada/gcc-interface/utils2.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/762dffe7bfe92394589f61ab25f176eda510d710/gcc%2Fada%2Fgcc-interface%2Futils2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/762dffe7bfe92394589f61ab25f176eda510d710/gcc%2Fada%2Fgcc-interface%2Futils2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils2.c?ref=762dffe7bfe92394589f61ab25f176eda510d710", "patch": "@@ -2173,6 +2173,7 @@ fill_vms_descriptor (tree expr, Entity_Id gnat_formal)\n   int do_range_check =\n       strcmp (\"MBO\",\n \t      IDENTIFIER_POINTER (DECL_NAME (TYPE_FIELDS (record_type))));\n+  tree malloc64low = build_int_cstu (long_integer_type_node, 0x80000000);\n \n   expr = maybe_unconstrained_array (expr);\n   gnat_mark_addressable (expr);\n@@ -2189,14 +2190,14 @@ fill_vms_descriptor (tree expr, Entity_Id gnat_formal)\n           strcmp (IDENTIFIER_POINTER (DECL_NAME (field)), \"POINTER\") == 0)\n         {\n           tree t = build3 (COND_EXPR, void_type_node,\n-\t\t\t   build_binary_op (LT_EXPR, integer_type_node,\n-\t\t\t\t\t    convert (integer_type_node,\n+\t\t\t   build_binary_op (GE_EXPR, long_integer_type_node,\n+\t\t\t\t\t    convert (long_integer_type_node,\n \t\t\t\t\t\t     conexpr), \n-\t\t\t\t\t    integer_zero_node),\n+\t\t\t\t\t    malloc64low),\n \t\t\t   build_call_raise (CE_Range_Check_Failed, Empty,\n \t\t\t\t\t     N_Raise_Constraint_Error),\n \t\t\t   NULL_TREE);\n-          add_stmt (t);\n+\t  add_stmt_with_node (t, gnat_formal);\n         }\n       const_list = tree_cons (field, conexpr, const_list);\n     }"}]}