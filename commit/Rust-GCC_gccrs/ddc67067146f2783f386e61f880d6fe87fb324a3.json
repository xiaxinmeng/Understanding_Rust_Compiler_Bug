{"sha": "ddc67067146f2783f386e61f880d6fe87fb324a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGRjNjcwNjcxNDZmMjc4M2YzODZlNjFmODgwZDZmZTg3ZmIzMjRhMw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-03-16T20:13:36Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-03-16T20:13:36Z"}, "message": "re PR rtl-optimization/9016 (Failure to consistently constant fold \"constant\" C++ objects)\n\n\tPR optimization/9016\n\t* config/i386/i386.c (ix86_expand_move): Force more CONST_DOUBLEs\n\tinto the constant pool.\n\nFrom-SVN: r64445", "tree": {"sha": "749a89537d94783cb3c07d61be72ff1f7ad7f747", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/749a89537d94783cb3c07d61be72ff1f7ad7f747"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ddc67067146f2783f386e61f880d6fe87fb324a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ddc67067146f2783f386e61f880d6fe87fb324a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ddc67067146f2783f386e61f880d6fe87fb324a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ddc67067146f2783f386e61f880d6fe87fb324a3/comments", "author": null, "committer": null, "parents": [{"sha": "0a71919d5257d2e9097d79d00d840f4ecfd746c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a71919d5257d2e9097d79d00d840f4ecfd746c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0a71919d5257d2e9097d79d00d840f4ecfd746c4"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "9fee3589340c91fafa38f4804306ba524d56e104", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ddc67067146f2783f386e61f880d6fe87fb324a3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ddc67067146f2783f386e61f880d6fe87fb324a3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ddc67067146f2783f386e61f880d6fe87fb324a3", "patch": "@@ -1,3 +1,9 @@\n+2003-03-14  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR optimization/9016\n+\t* config/i386/i386.c (ix86_expand_move): Force more CONST_DOUBLEs\n+\tinto the constant pool.\n+\n 2003-03-16  Falk Hueffner  <falk.hueffner@student.uni-tuebingen.de>\n \n \tPR target/9164"}, {"sha": "2dddfb7f87730e8062497068ee2e4d6b8736b715", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ddc67067146f2783f386e61f880d6fe87fb324a3/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ddc67067146f2783f386e61f880d6fe87fb324a3/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=ddc67067146f2783f386e61f880d6fe87fb324a3", "patch": "@@ -8373,9 +8373,17 @@ ix86_expand_move (mode, operands)\n \n \t  if (strict)\n \t    ;\n-\t  else if (GET_CODE (op1) == CONST_DOUBLE\n-\t\t   && register_operand (op0, mode))\n-\t    op1 = validize_mem (force_const_mem (mode, op1));\n+\t  else if (GET_CODE (op1) == CONST_DOUBLE)\n+\t    {\n+\t      op1 = validize_mem (force_const_mem (mode, op1));\n+\t      if (!register_operand (op0, mode))\n+\t\t{\n+\t\t  rtx temp = gen_reg_rtx (mode);\n+\t\t  emit_insn (gen_rtx_SET (VOIDmode, temp, op1));\n+\t\t  emit_move_insn (op0, temp);\n+\t\t  return;\n+\t\t}\n+\t    }\n \t}\n     }\n "}]}