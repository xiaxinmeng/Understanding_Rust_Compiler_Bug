{"sha": "f6f9ac315906dae8fbe36861f6f12b03a1795b07", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjZmOWFjMzE1OTA2ZGFlOGZiZTM2ODYxZjZmMTJiMDNhMTc5NWIwNw==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2008-05-15T15:55:32Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2008-05-15T15:55:32Z"}, "message": "Forgot ChangeLog of part1 pr25561.\n\nFrom-SVN: r135374", "tree": {"sha": "225a499991abe21edec4d95f5deb820b300ebf17", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/225a499991abe21edec4d95f5deb820b300ebf17"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f6f9ac315906dae8fbe36861f6f12b03a1795b07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6f9ac315906dae8fbe36861f6f12b03a1795b07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6f9ac315906dae8fbe36861f6f12b03a1795b07", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6f9ac315906dae8fbe36861f6f12b03a1795b07/comments", "author": null, "committer": null, "parents": [{"sha": "15877a88eb5c78571ebc0f718e8ff2bf32c5cc5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15877a88eb5c78571ebc0f718e8ff2bf32c5cc5e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15877a88eb5c78571ebc0f718e8ff2bf32c5cc5e"}], "stats": {"total": 67, "additions": 67, "deletions": 0}, "files": [{"sha": "c363ecfd17126c61aa71e65e9d9623aec48b369a", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 67, "deletions": 0, "changes": 67, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6f9ac315906dae8fbe36861f6f12b03a1795b07/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6f9ac315906dae8fbe36861f6f12b03a1795b07/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=f6f9ac315906dae8fbe36861f6f12b03a1795b07", "patch": "@@ -1,3 +1,70 @@\n+2008-05-15  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR libfortran/25561\n+\t* Makefile.am: Add fbuf.c to gfor_io_src.\n+\t* Makefile.in: Regenerate.\n+\t* io/io.h (read_block): Remove.\n+\t(struct stream): Remove alloc_r_at function pointer.\n+\t(salloc_r): Remove.\n+\t(salloc_r_at): Remove.\n+\t(salloc_w_at): Remove.\n+\t(salloc_w): Remove offset argument.\n+\t(struct fbuf): New struct for format buffer.\n+\t(struct gfc_unit): Add fbuf.\n+\t(read_block_form): New prototype.\n+\t(fbuf_init): Likewise.\n+\t(fbuf_destroy): Likewise.\n+\t(fbuf_reset): Likewise.\n+\t(fbuf_alloc): Likewise.\n+\t(fbuf_flush): Likewise.\n+\t(fbuf_seek): Likewise.\n+\t* io/file_pos.c (formatted_backspace): Change to use sread.\n+\t(unformatted_backspace): Likewise.\n+\t(st_backspace): Flush format buffer.\n+\t(st_rewind): Likewise.\n+\t* io/list_read.c (next_char): Likewise.\n+\t(nml_query): Tidying, flush format buffer.\n+\t* io/open.c (new_unit): Init format buffer.\n+\t* io/read.c (read_l): Change to use read_block_form.\n+\t(read_a): Likewise.\n+\t(read_decimal): Likewise.\n+\t(read_radix): Likewise.\n+\t(read_f): Likewise.\n+\t(read_x): Empty reads also for stream I/O.\n+\t* io/transfer.c (read_sf): Change to use sread.\n+\t(read_block): Rename to read_block_form, change prototype, use sread.\n+\t(read_block_direct): Don't seek stream files.\n+\t(write_block): Change to use fbuf if external file, don't seek stream\n+\tfiles.\n+\t(write_buf): Don't seek stream files.\n+\t(formatted_transfer_scalar): Use fbuf for external files.\n+\t(us_read): Change to use sread.\n+\t(pre_position): Do nothing for stream I/O.\n+\t(data_transfer_init): Flush fbuf when switching from write to read, if\n+\tPOS is specified, seek stream file to correct offset.\n+\t(skip_record): Change to use sread.\n+\t(min_off): New function.\n+\t(next_record_r): Change to use sread.\n+\t(next_record_w): Change to use sset/sseek, flush fbuf.\n+\t(finalize_transfer): Flush fbuf.\n+\t* io/unit.c (init_units): Init fbuf for stdout, stderr.\n+\t(close_unit_1): Destroy fbuf.\n+\t(finish_last_advance_record): Flush fbuf, no need to seek.\n+\t* io/unix.c (fd_alloc_r_at): Remove unused where argument.\n+\t(fd_alloc_w_at): Likewise.\n+\t(fd_read): Remove third argument to fd_alloc_r_at.\n+\t(fd_write): Remove third argument to fd_alloc_w_at.\n+\t(fd_sset): Likewise.\n+\t(fd_open): Don't set alloc_r_at.\n+\t(mem_alloc_r_at): Remove unused where argument.\n+\t(mem_alloc_w_at): Likewise.\n+\t(mem_read): Don't incorrectly return previous errno, remove unused\n+\tthird argument to alloc function.\n+\t(mem_write): Likewise.\n+\t(mem_set): Likewise.\n+\t(open_internal): Don't set alloc_r_at pointer.\n+\t* io/fbuf.c: New file.\n+\n 2008-05-14  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n \n \t* libgfortran.h (gfc_char4_t): New type."}]}