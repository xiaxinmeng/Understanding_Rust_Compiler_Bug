{"sha": "13d923cc90c7964d5629013c843036fdb50e4301", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTNkOTIzY2M5MGM3OTY0ZDU2MjkwMTNjODQzMDM2ZmRiNTBlNDMwMQ==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2010-06-23T05:40:52Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-06-23T05:40:52Z"}, "message": "sem_ch6.adb, [...]: Minor reformatting.\n\n2010-06-23  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_ch6.adb, exp_ch4.adb, s-rannum.ads, sem.adb, sem_ch12.adb: Minor\n\treformatting.  Add comments.\n\t* errout.adb (Finalize): Properly adjust warning count when deleting\n\tcontinuations.\n\nFrom-SVN: r161242", "tree": {"sha": "707960cc6dc9aa2e390412ed39c3fcd799ec7755", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/707960cc6dc9aa2e390412ed39c3fcd799ec7755"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/13d923cc90c7964d5629013c843036fdb50e4301", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13d923cc90c7964d5629013c843036fdb50e4301", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13d923cc90c7964d5629013c843036fdb50e4301", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13d923cc90c7964d5629013c843036fdb50e4301/comments", "author": null, "committer": null, "parents": [{"sha": "8d66b22ae2007253b34f76dc8c0fe34eb0fb5380", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d66b22ae2007253b34f76dc8c0fe34eb0fb5380", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d66b22ae2007253b34f76dc8c0fe34eb0fb5380"}], "stats": {"total": 61, "additions": 43, "deletions": 18}, "files": [{"sha": "b16e44a412b8f265995cd8c2f1819cb46c66ca59", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=13d923cc90c7964d5629013c843036fdb50e4301", "patch": "@@ -1,3 +1,10 @@\n+2010-06-23  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_ch6.adb, exp_ch4.adb, s-rannum.ads, sem.adb, sem_ch12.adb: Minor\n+\treformatting.  Add comments.\n+\t* errout.adb (Finalize): Properly adjust warning count when deleting\n+\tcontinuations.\n+\n 2010-06-22  Robert Dewar  <dewar@adacore.com>\n \n \t* errout.adb (Finalize): Set Prev pointers."}, {"sha": "e307ce7e44d83e8c7c14f6c99ac1ba14cc0abc27", "filename": "gcc/ada/errout.adb", "status": "modified", "additions": 20, "deletions": 4, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Ferrout.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Ferrout.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferrout.adb?ref=13d923cc90c7964d5629013c843036fdb50e4301", "patch": "@@ -1215,6 +1215,23 @@ package body Errout is\n       Nxt : Error_Msg_Id;\n       F   : Error_Msg_Id;\n \n+      procedure Delete_Warning (E : Error_Msg_Id);\n+      --  Delete a message if not already deleted and adjust warning count\n+\n+      --------------------\n+      -- Delete_Warning --\n+      --------------------\n+\n+      procedure Delete_Warning (E : Error_Msg_Id) is\n+      begin\n+         if not Errors.Table (E).Deleted then\n+            Errors.Table (E).Deleted := True;\n+            Warnings_Detected := Warnings_Detected - 1;\n+         end if;\n+      end Delete_Warning;\n+\n+   --  Start of message for Finalize\n+\n    begin\n       --  Set Prev pointers\n \n@@ -1252,15 +1269,14 @@ package body Errout is\n            and then Warning_Specifically_Suppressed\n                       (Errors.Table (Cur).Sptr, Errors.Table (Cur).Text)\n          then\n-            Errors.Table (Cur).Deleted := True;\n-            Warnings_Detected := Warnings_Detected - 1;\n+            Delete_Warning (Cur);\n \n             --  If this is a continuation, delete previous messages\n \n             F := Cur;\n             while Errors.Table (F).Msg_Cont loop\n                F := Errors.Table (F).Prev;\n-               Errors.Table (F).Deleted := True;\n+               Delete_Warning (F);\n             end loop;\n \n             --  Delete any following continuations\n@@ -1270,7 +1286,7 @@ package body Errout is\n                F := Errors.Table (F).Next;\n                exit when F = No_Error_Msg;\n                exit when not Errors.Table (F).Msg_Cont;\n-               Errors.Table (F).Deleted := True;\n+               Delete_Warning (F);\n             end loop;\n          end if;\n "}, {"sha": "43477cb51d2e2c3a77ae5fdbe49d34641a169f7f", "filename": "gcc/ada/exp_ch4.adb", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Fexp_ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Fexp_ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch4.adb?ref=13d923cc90c7964d5629013c843036fdb50e4301", "patch": "@@ -3155,9 +3155,10 @@ package body Exp_Ch4 is\n             declare\n                Decl    : Node_Id;\n                Outer_S : Entity_Id;\n-               S       : Entity_Id := Current_Scope;\n+               S       : Entity_Id;\n \n             begin\n+               S := Current_Scope;\n                while Present (S) and then S /= Standard_Standard loop\n                   if Ekind (S) = E_Function then\n                      Outer_S := Scope (S);\n@@ -4369,7 +4370,6 @@ package body Exp_Ch4 is\n    --  Start of processing for Expand_N_In\n \n    begin\n-\n       if Present (Alternatives (N)) then\n          Remove_Side_Effects (Lop);\n          Expand_Set_Membership;\n@@ -7658,6 +7658,7 @@ package body Exp_Ch4 is\n       procedure Make_Temporary_For_Slice is\n          Decl : Node_Id;\n          Ent  : constant Entity_Id := Make_Temporary (Loc, 'T', N);\n+\n       begin\n          Decl :=\n            Make_Object_Declaration (Loc,\n@@ -7793,7 +7794,6 @@ package body Exp_Ch4 is\n          Cons : List_Id;\n \n       begin\n-\n          --  Nothing else to do if no change of representation\n \n          if Same_Representation (Operand_Type, Target_Type) then\n@@ -8727,7 +8727,6 @@ package body Exp_Ch4 is\n \n    procedure Expand_N_Unchecked_Expression (N : Node_Id) is\n       Exp : constant Node_Id := Expression (N);\n-\n    begin\n       Set_Assignment_OK (Exp, Assignment_OK (N) or else Assignment_OK (Exp));\n       Rewrite (N, Exp);\n@@ -8751,6 +8750,7 @@ package body Exp_Ch4 is\n       --  an Assignment_OK indication which must be propagated to the operand.\n \n       if Operand_Type = Target_Type then\n+\n          --  Code duplicates Expand_N_Unchecked_Expression above, factor???\n \n          if Assignment_OK (N) then"}, {"sha": "0d2a7e9dee72251f49346b6c00d441ef5eadb5ab", "filename": "gcc/ada/s-rannum.ads", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Fs-rannum.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Fs-rannum.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-rannum.ads?ref=13d923cc90c7964d5629013c843036fdb50e4301", "patch": "@@ -141,10 +141,13 @@ private\n    type Generator is limited record\n       Writable  : Writable_Access (Generator'Access);\n       --  This self reference allows functions to modify Generator arguments\n-      S         : State := (others => 0);\n+\n+      S : State := (others => 0);\n       --  The shift register, a circular buffer\n-      I         : Integer := N;\n+\n+      I : Integer := N;\n       --  Current starting position in shift register S (N means uninitialized)\n+      --  We should avoid using the identifier I here ???\n    end record;\n \n end System.Random_Numbers;"}, {"sha": "e2c1e3c474b3eb429bfe394f9509c4c8b8658797", "filename": "gcc/ada/sem.adb", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Fsem.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Fsem.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem.adb?ref=13d923cc90c7964d5629013c843036fdb50e4301", "patch": "@@ -1727,15 +1727,12 @@ package body Sem is\n       ----------------------------\n \n       procedure Do_Unit_And_Dependents (CU : Node_Id; Item : Node_Id) is\n-         Unit_Num : constant Unit_Number_Type :=\n-           Get_Cunit_Unit_Number (CU);\n+         Unit_Num  : constant Unit_Number_Type := Get_Cunit_Unit_Number (CU);\n          Child     : Node_Id;\n          Parent_CU : Node_Id;\n \n          procedure Do_Withed_Units is new Walk_Withs (Do_Withed_Unit);\n \n-      --  Start of processing for Do_Unit_And_Dependents\n-\n       begin\n          if not Seen (Unit_Num) then\n \n@@ -1749,7 +1746,6 @@ package body Sem is\n             if not Nkind_In (Item, N_Package_Body, N_Subprogram_Body)\n               or else Acts_As_Spec (CU)\n             then\n-\n                if CU = Cunit (Main_Unit)\n                    and then not Do_Main\n                then"}, {"sha": "ea596845e2657154af8e43dfdf23cd3747ce59dd", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=13d923cc90c7964d5629013c843036fdb50e4301", "patch": "@@ -10396,7 +10396,7 @@ package body Sem_Ch12 is\n    procedure Mark_Context (Inst_Decl : Node_Id; Gen_Decl : Node_Id) is\n       Inst_CU : constant Unit_Number_Type := Get_Code_Unit   (Inst_Decl);\n       Gen_CU  : constant Unit_Number_Type := Get_Source_Unit (Gen_Decl);\n-      Inst    : Entity_Id := Cunit_Entity (Inst_CU);\n+      Inst    : Entity_Id;\n       Clause  : Node_Id;\n \n    begin\n@@ -10420,11 +10420,12 @@ package body Sem_Ch12 is\n       --  If the with-clause for the generic unit was not found, it must\n       --  appear in some ancestor of the current unit.\n \n+      Inst := Cunit_Entity (Inst_CU);\n       while Is_Child_Unit (Inst) loop\n          Inst := Scope (Inst);\n+\n          Clause :=\n            First (Context_Items (Parent (Unit_Declaration_Node (Inst))));\n-\n          while Present (Clause) loop\n             if Nkind (Clause) = N_With_Clause\n               and then  Library_Unit (Clause) = Cunit (Gen_CU)"}, {"sha": "df74d5b969ec3b680cdcb08a091f6e27465f91b4", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d923cc90c7964d5629013c843036fdb50e4301/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=13d923cc90c7964d5629013c843036fdb50e4301", "patch": "@@ -110,7 +110,8 @@ package body Sem_Ch6 is\n    --  outer homographs.\n \n    procedure Analyze_Subprogram_Body_Helper (N : Node_Id);\n-   --  Does all the real work of Analyze_Subprogram_Body\n+   --  Does all the real work of Analyze_Subprogram_Body. This is split out so\n+   --  that we can use RETURN but not skip the debug output at the end.\n \n    procedure Analyze_Generic_Subprogram_Body (N : Node_Id; Gen_Id : Entity_Id);\n    --  Analyze a generic subprogram body. N is the body to be analyzed, and\n@@ -978,6 +979,7 @@ package body Sem_Ch6 is\n       if Style_Check then\n          Style.Check_Identifier (Body_Id, Gen_Id);\n       end if;\n+\n       End_Generic;\n    end Analyze_Generic_Subprogram_Body;\n "}]}