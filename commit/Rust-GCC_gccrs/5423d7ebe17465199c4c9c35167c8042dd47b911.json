{"sha": "5423d7ebe17465199c4c9c35167c8042dd47b911", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQyM2Q3ZWJlMTc0NjUxOTljNGM5YzM1MTY3YzgwNDJkZDQ3YjkxMQ==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2004-12-07T14:41:12Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2004-12-07T14:41:12Z"}, "message": "name-lookup.c (leave_scope): We only need to update class_binding_level when leaving a class scope.\n\n\n\t* name-lookup.c (leave_scope): We only need to update\n\tclass_binding_level when leaving a class scope.\n\nFrom-SVN: r91807", "tree": {"sha": "08743b308347d01799cfe54f96f7b0b77b686d4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08743b308347d01799cfe54f96f7b0b77b686d4c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5423d7ebe17465199c4c9c35167c8042dd47b911", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5423d7ebe17465199c4c9c35167c8042dd47b911", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5423d7ebe17465199c4c9c35167c8042dd47b911", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5423d7ebe17465199c4c9c35167c8042dd47b911/comments", "author": null, "committer": null, "parents": [{"sha": "5f679db991eb87c35817657879a35cfe7c62a6fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f679db991eb87c35817657879a35cfe7c62a6fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f679db991eb87c35817657879a35cfe7c62a6fd"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "dd41800eb078ee01263058c490bba1c44dca2c51", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5423d7ebe17465199c4c9c35167c8042dd47b911/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5423d7ebe17465199c4c9c35167c8042dd47b911/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5423d7ebe17465199c4c9c35167c8042dd47b911", "patch": "@@ -1,3 +1,8 @@\n+2004-12-07  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* name-lookup.c (leave_scope): We only need to update\n+\tclass_binding_level when leaving a class scope.\n+\n 2004-12-06  Ziemowit Laski  <zlaski@apple.com>\n \n \t* cp-tree.h (struct lang_type_class): Add 'objc_protocols' field."}, {"sha": "cfd3890cea730ec0cb3c68f3b4c675f9c964e21e", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5423d7ebe17465199c4c9c35167c8042dd47b911/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5423d7ebe17465199c4c9c35167c8042dd47b911/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=5423d7ebe17465199c4c9c35167c8042dd47b911", "patch": "@@ -1329,11 +1329,16 @@ leave_scope (void)\n \n   /* Find the innermost enclosing class scope, and reset\n      CLASS_BINDING_LEVEL appropriately.  */\n-  for (scope = current_binding_level;\n-       scope && scope->kind != sk_class;\n-       scope = scope->level_chain)\n-    ;\n-  class_binding_level = scope && scope->kind == sk_class ? scope : NULL;\n+  if (scope->kind == sk_class)\n+    {\n+      class_binding_level = NULL;\n+      for (scope = current_binding_level; scope; scope = scope->level_chain)\n+\tif (scope->kind == sk_class)\n+\t  {\n+\t    class_binding_level = scope;\n+\t    break;\n+\t  }\n+    }\n \n   return current_binding_level;\n }"}]}