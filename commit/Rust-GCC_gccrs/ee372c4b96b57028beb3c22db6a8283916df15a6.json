{"sha": "ee372c4b96b57028beb3c22db6a8283916df15a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWUzNzJjNGI5NmI1NzAyOGJlYjNjMjJkYjZhODI4MzkxNmRmMTVhNg==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2009-06-21T19:10:30Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2009-06-21T19:10:30Z"}, "message": "dump-noaddr.x (dump_compare): Use --dumpbase to put dump files in a subdirectory.\n\n\t* gcc.c-torture/unsorted/dump-noaddr.x (dump_compare): Use --dumpbase\n\tto put dump files in a subdirectory.\n\t* gcc/testsuite/lib/gcc-dg.exp (cleanup-saved-temps): Also remove\n\t\".o\" temporary files.\n\nFrom-SVN: r148768", "tree": {"sha": "cba3b676cdd4432a18f067245fdacc21553bd1c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cba3b676cdd4432a18f067245fdacc21553bd1c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee372c4b96b57028beb3c22db6a8283916df15a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee372c4b96b57028beb3c22db6a8283916df15a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee372c4b96b57028beb3c22db6a8283916df15a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee372c4b96b57028beb3c22db6a8283916df15a6/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9b63f28250377b90a744fe57ff482df9c6ee70ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b63f28250377b90a744fe57ff482df9c6ee70ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b63f28250377b90a744fe57ff482df9c6ee70ed"}], "stats": {"total": 32, "additions": 15, "deletions": 17}, "files": [{"sha": "4bc83d270f9d047d3d3d62929e3c996a40be6890", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee372c4b96b57028beb3c22db6a8283916df15a6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee372c4b96b57028beb3c22db6a8283916df15a6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ee372c4b96b57028beb3c22db6a8283916df15a6", "patch": "@@ -1,3 +1,10 @@\n+2009-06-21  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* gcc.c-torture/unsorted/dump-noaddr.x (dump_compare): Use --dumpbase\n+\tto put dump files in a subdirectory.\n+\t* gcc/testsuite/lib/gcc-dg.exp (cleanup-saved-temps): Also remove\n+\t\".o\" temporary files.\n+\n 2009-06-21  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/39850"}, {"sha": "1655b382885260090254531a5c791fd15ad45ec4", "filename": "gcc/testsuite/gcc.c-torture/unsorted/dump-noaddr.x", "status": "modified", "additions": 6, "deletions": 15, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee372c4b96b57028beb3c22db6a8283916df15a6/gcc%2Ftestsuite%2Fgcc.c-torture%2Funsorted%2Fdump-noaddr.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee372c4b96b57028beb3c22db6a8283916df15a6/gcc%2Ftestsuite%2Fgcc.c-torture%2Funsorted%2Fdump-noaddr.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Funsorted%2Fdump-noaddr.x?ref=ee372c4b96b57028beb3c22db6a8283916df15a6", "patch": "@@ -2,28 +2,19 @@\n proc dump_compare { src options } {\n     global srcdir subdir\n     global tmpdir\n-    \n-    exec echo $src\n-    \n+\n     global torture_with_loops\n     set option_list $torture_with_loops\n-    set dumpbase dump-noaddr\n-    # ??? passing -dumpbase to the gcc driver doesn't work, since it will pass\n-    # another -dumpbase option to override it.\n+    set dumpbase dump-noaddr.c\n+\n     # loop through all the options\n     foreach option $option_list {\n-#\tc-torture-compile ${dumpbase}_1 \"$option $options -DMASK=1 -x c -da -fdump-tree-all\"\n-#\tc-torture-compile ${dumpbase}_2 \"$option $options -DMASK=2 -x c -da -fdump-tree-all\"\n-#\tc-torture-compile ${dumpbase}_3 \"$option $options -DMASK=3 -x c -da -fdump-tree-all\"\n \tfile delete -force dump1\n-\tfile delete -force dump2\n \tfile mkdir dump1\n+\tc-torture-compile $src \"$option $options --dumpbase=dump1/$dumpbase -DMASK=1 -x c --param ggc-min-heapsize=1 -fdump-rtl-all -fdump-tree-all -fdump-noaddr\"\n+\tfile delete -force dump2\n \tfile mkdir dump2\n-\tcd dump1\n-\tc-torture-compile $src \"$option $options -DMASK=1 -x c --param ggc-min-heapsize=1 -da -fdump-tree-all -fdump-noaddr\"\n-\tcd ../dump2\n-\tc-torture-compile $src \"$option $options -DMASK=2 -x c -da -fdump-tree-all -fdump-noaddr\"\n-\tcd ..\n+\tc-torture-compile $src \"$option $options --dumpbase=dump2/$dumpbase -DMASK=2 -x c -fdump-rtl-all -fdump-tree-all -fdump-noaddr\"\n \tforeach dump1 [lsort [glob -nocomplain dump1/*]] {\n \t    regsub dump1/ $dump1 dump2/ dump2\n \t    set dumptail \"gcc.c-torture/unsorted/[file tail $dump1]\""}, {"sha": "7e684171be9266c4880c58f655bacef944cd139d", "filename": "gcc/testsuite/lib/gcc-dg.exp", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee372c4b96b57028beb3c22db6a8283916df15a6/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee372c4b96b57028beb3c22db6a8283916df15a6/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fgcc-dg.exp?ref=ee372c4b96b57028beb3c22db6a8283916df15a6", "patch": "@@ -460,15 +460,15 @@ proc cleanup-dump { suffix } {\n \n # Remove files kept by --save-temps for the current test.\n #\n-# Currently this is only .i, .ii and .s files, but more can be added\n+# Currently this is only .i, .ii, .s and .o files, but more can be added\n # if there are tests generating them.\n # ARGS is a list of suffixes to NOT delete.\n proc cleanup-saved-temps { args } {\n     global additional_sources\n     set suffixes {}\n \n     # add the to-be-kept suffixes\n-    foreach suffix {\".ii\" \".i\" \".s\"} {\n+    foreach suffix {\".ii\" \".i\" \".s\" \".o\"} {\n \tif {[lsearch $args $suffix] < 0} {\n \t    lappend suffixes $suffix\n \t}"}]}