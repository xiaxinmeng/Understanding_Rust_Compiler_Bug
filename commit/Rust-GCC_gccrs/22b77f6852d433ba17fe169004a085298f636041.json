{"sha": "22b77f6852d433ba17fe169004a085298f636041", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjJiNzdmNjg1MmQ0MzNiYTE3ZmUxNjkwMDRhMDg1Mjk4ZjYzNjA0MQ==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2010-10-05T10:22:52Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-10-05T10:22:52Z"}, "message": "prj-util.adb, [...]: Minor reformatting.\n\n2010-10-05  Robert Dewar  <dewar@adacore.com>\n\n\t* prj-util.adb, prj-util.ads, prj.ads, s-vxwext-rtp.adb, sem_ch4.adb,\n\tsem_ch7.adb, sem_res.adb, sem_type.adb: Minor reformatting.\n\tMinor code reorganization (use Nkind_In).\n\nFrom-SVN: r164981", "tree": {"sha": "cce67c725ab63ebdc3917a1ca41ada906796082a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cce67c725ab63ebdc3917a1ca41ada906796082a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/22b77f6852d433ba17fe169004a085298f636041", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22b77f6852d433ba17fe169004a085298f636041", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22b77f6852d433ba17fe169004a085298f636041", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22b77f6852d433ba17fe169004a085298f636041/comments", "author": null, "committer": null, "parents": [{"sha": "f2282a5810af33a473724e8e450033b6019b6778", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2282a5810af33a473724e8e450033b6019b6778", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2282a5810af33a473724e8e450033b6019b6778"}], "stats": {"total": 112, "additions": 65, "deletions": 47}, "files": [{"sha": "787adbd0087f9fb0ebc57ab8121d9820fd69e5c6", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=22b77f6852d433ba17fe169004a085298f636041", "patch": "@@ -1,3 +1,9 @@\n+2010-10-05  Robert Dewar  <dewar@adacore.com>\n+\n+\t* prj-util.adb, prj-util.ads, prj.ads, s-vxwext-rtp.adb, sem_ch4.adb,\n+\tsem_ch7.adb, sem_res.adb, sem_type.adb: Minor reformatting.\n+\tMinor code reorganization (use Nkind_In).\n+\n 2010-10-05  Ed Schonberg  <schonberg@adacore.com>\n \n \t* sem_ch10.adb (Analyze_Task_Body_Stub): Diagnose duplicate stub for"}, {"sha": "494b04c482ef060d8c060f26cad8adc45b65e9ca", "filename": "gcc/ada/prj-util.adb", "status": "modified", "additions": 25, "deletions": 12, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fprj-util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fprj-util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-util.adb?ref=22b77f6852d433ba17fe169004a085298f636041", "patch": "@@ -476,13 +476,13 @@ package body Prj.Util is\n    ----------------\n \n    procedure Initialize\n-     (Iter : out Source_Info_Iterator; For_Project : Name_Id)\n+     (Iter        : out Source_Info_Iterator;\n+      For_Project : Name_Id)\n    is\n       Ind : constant Natural := Source_Info_Project_HTable.Get (For_Project);\n    begin\n       if Ind = 0 then\n          Iter := (No_Source_Info, 0);\n-\n       else\n          Iter := Source_Info_Table.Table (Ind);\n       end if;\n@@ -1049,9 +1049,10 @@ package body Prj.Util is\n    ----------------------------\n \n    procedure Write_Source_Info_File (Tree : Project_Tree_Ref) is\n-      Iter : Source_Iterator := For_Each_Source (Tree);\n+      Iter   : Source_Iterator := For_Each_Source (Tree);\n       Source : Prj.Source_Id;\n       File   : Text_File;\n+\n    begin\n       if Opt.Verbose_Mode then\n          Write_Line (\"Writing new source info file \" &\n@@ -1073,41 +1074,53 @@ package body Prj.Util is\n          if not Source.Locally_Removed and then\n            Source.Replaced_By = No_Source\n          then\n-            --  project name\n+            --  Project name\n+\n             Put_Line (File, Get_Name_String (Source.Project.Name));\n-            --  language name\n+\n+            --  Language name\n+\n             Put_Line (File, Get_Name_String (Source.Language.Name));\n-            --  kind\n+\n+            --  Kind\n+\n             Put_Line (File, Source.Kind'Img);\n-            --  display path name\n+\n+            --  Display path name\n+\n             Put_Line (File, Get_Name_String (Source.Path.Display_Name));\n \n             --  Optional lines:\n \n-            --  path name (P=)\n+            --  Path name (P=)\n+\n             if Source.Path.Name /= Source.Path.Display_Name then\n                Put (File, \"P=\");\n                Put_Line (File, Get_Name_String (Source.Path.Name));\n             end if;\n \n-            --  unit name (U=)\n+            --  Unit name (U=)\n+\n             if Source.Unit /= No_Unit_Index then\n                Put (File, \"U=\");\n                Put_Line (File, Get_Name_String (Source.Unit.Name));\n             end if;\n \n-            --  multi-source index (I=)\n+            --  Multi-source index (I=)\n+\n             if Source.Index /= 0 then\n                Put (File, \"I=\");\n                Put_Line (File, Source.Index'Img);\n             end if;\n \n-            --  naming exception (\"N=T\");\n+            --  Naming exception (\"N=T\");\n+\n             if Source.Naming_Exception then\n                Put_Line (File, \"N=T\");\n             end if;\n \n-            --  empty line to indicate end of info on this source\n+            --  Empty line to indicate end of info on this source\n+\n             Put_Line (File, \"\");\n          end if;\n "}, {"sha": "508d7d999b1322d6a6cc2f876f556a65b6ca2cdd", "filename": "gcc/ada/prj-util.ads", "status": "modified", "additions": 11, "deletions": 12, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fprj-util.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fprj-util.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-util.ads?ref=22b77f6852d433ba17fe169004a085298f636041", "patch": "@@ -104,7 +104,7 @@ package Prj.Util is\n       In_Tree                 : Project_Tree_Ref;\n       Force_Lower_Case_Index  : Boolean := False;\n       Allow_Wildcards         : Boolean := False) return Variable_Value;\n-   --  In a specific package,\n+   --  In a specific package:\n    --   - if there exists an array Attribute_Or_Array_Name with an index Name,\n    --     returns the corresponding component (depending on the attribute, the\n    --     index may or may not be case sensitive, see previous function),\n@@ -134,8 +134,8 @@ package Prj.Util is\n      (Name        : Name_Id;\n       In_Packages : Package_Id;\n       In_Tree     : Project_Tree_Ref) return Package_Id;\n-   --  Returns a specified package in a package list. Returns No_Package if\n-   --  In_Packages is null or if Name is not the name of a package in\n+   --  Returns a specified package in a package list. Returns No_Package\n+   --  if In_Packages is null or if Name is not the name of a package in\n    --  Package_List. The caller must ensure that Name is in lower case.\n \n    function Value_Of\n@@ -150,9 +150,9 @@ package Prj.Util is\n      (S          : String;\n       Max_Length : Positive;\n       Separator  : Character);\n-   --  Output string S using Output.Write_Str. If S is too long to fit in\n-   --  one line of Max_Length, cut it in several lines, using Separator as\n-   --  the last character of each line, if possible.\n+   --  Output string S using Output.Write_Str. If S is too long to fit in one\n+   --  line of Max_Length, cut it in several lines, using Separator as the last\n+   --  character of each line, if possible.\n \n    type Text_File is limited private;\n    --  Represents a text file (default is invalid text file)\n@@ -198,10 +198,9 @@ package Prj.Util is\n    --  the new file.\n \n    procedure Read_Source_Info_File (Tree : Project_Tree_Ref);\n-   --  Check if there is a source info file specified for the project Tree and\n-   --  if there is one, attempt to read it. If the file exists and is\n-   --  successfully read, set the flag Source_Info_File_Exists to True for\n-   --  the tree.\n+   --  Check if there is a source info file specified for the project Tree. If\n+   --  so, attempt to read it. If the file exists and is successfully read, set\n+   --  the flag Source_Info_File_Exists to True for the tree.\n \n    type Source_Info_Data is record\n       Project             : Name_Id;\n@@ -222,7 +221,8 @@ package Prj.Util is\n    --  Iterator to get the sources for a single project\n \n    procedure Initialize\n-     (Iter : out Source_Info_Iterator; For_Project : Name_Id);\n+     (Iter        : out Source_Info_Iterator;\n+      For_Project : Name_Id);\n    --  Initiaize Iter for the project\n \n    function Source_Info_Of (Iter : Source_Info_Iterator) return Source_Info;\n@@ -234,7 +234,6 @@ package Prj.Util is\n    --  Advance the iterator to the next source in the project\n \n private\n-\n    type Text_File_Data is record\n       FD                  : File_Descriptor := Invalid_FD;\n       Out_File            : Boolean := False;"}, {"sha": "76a2e326dade5d4c80aa707eccfcfa609db6f932", "filename": "gcc/ada/prj.ads", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fprj.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fprj.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.ads?ref=22b77f6852d433ba17fe169004a085298f636041", "patch": "@@ -292,17 +292,16 @@ package Prj is\n \n    Makefile_Dependency_Suffix : constant String := \".d\";\n    ALI_Dependency_Suffix      : constant String := \".ali\";\n-\n    Switches_Dependency_Suffix : constant String := \".cswi\";\n \n-   Binder_Exchange_Suffix     : constant String := \".bexch\";\n+   Binder_Exchange_Suffix : constant String := \".bexch\";\n    --  Suffix for binder exchange files\n \n-   Library_Exchange_Suffix     : constant String := \".lexch\";\n+   Library_Exchange_Suffix : constant String := \".lexch\";\n    --  Suffix for library exchange files\n \n    type Name_List_Index is new Nat;\n-   No_Name_List            : constant Name_List_Index := 0;\n+   No_Name_List : constant Name_List_Index := 0;\n \n    type Name_Node is record\n       Name : Name_Id         := No_Name;\n@@ -1348,19 +1347,19 @@ package Prj is\n          Packages          : Package_Table.Instance;\n          Projects          : Project_List;\n \n-         Units_HT          : Units_Htable.Instance;\n+         Units_HT : Units_Htable.Instance;\n          --  Unit name to Unit_Index (and from there so Source_Id)\n \n-         Source_Paths_HT   : Source_Paths_Htable.Instance;\n+         Source_Paths_HT : Source_Paths_Htable.Instance;\n          --  Full path to Source_Id\n \n-         Source_Info_File_Name   : String_Access := null;\n+         Source_Info_File_Name : String_Access := null;\n          --  The name of the source info file, if specified by the builder\n \n          Source_Info_File_Exists : Boolean := False;\n          --  True when a source info file has been successfully read\n \n-         Private_Part      : Private_Project_Tree_Data;\n+         Private_Part : Private_Project_Tree_Data;\n       end record;\n    --  Data for a project tree\n "}, {"sha": "b27238c918bf7a244625e7c8b8fb7be64b3b9596", "filename": "gcc/ada/s-vxwext-rtp.adb", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fs-vxwext-rtp.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fs-vxwext-rtp.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-vxwext-rtp.adb?ref=22b77f6852d433ba17fe169004a085298f636041", "patch": "@@ -60,7 +60,8 @@ package body System.VxWorks.Ext is\n    function Interrupt_Connect\n      (Vector    : Interrupt_Vector;\n       Handler   : Interrupt_Handler;\n-      Parameter : System.Address := System.Null_Address) return int is\n+      Parameter : System.Address := System.Null_Address) return int\n+   is\n       pragma Unreferenced (Vector, Handler, Parameter);\n    begin\n       return ERROR;\n@@ -82,7 +83,8 @@ package body System.VxWorks.Ext is\n    --------------------------------\n \n    function Interrupt_Number_To_Vector\n-     (intNum : int) return Interrupt_Vector is\n+     (intNum : int) return Interrupt_Vector\n+   is\n       pragma Unreferenced (intNum);\n    begin\n       return 0;"}, {"sha": "813a2977bf8edd49173b08999e6d9104bd3f99c8", "filename": "gcc/ada/sem_ch4.adb", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fsem_ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fsem_ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch4.adb?ref=22b77f6852d433ba17fe169004a085298f636041", "patch": "@@ -6103,9 +6103,10 @@ package body Sem_Ch4 is\n             if Is_Discrete_Type (Entity (Actual)) then\n                Rewrite (N,\n                  Make_Slice (Loc,\n-                   Prefix => Make_Function_Call (Loc,\n-                     Name => Relocate_Node (Name (N))),\n-                Discrete_Range =>\n+                   Prefix =>\n+                     Make_Function_Call (Loc,\n+                       Name => Relocate_Node (Name (N))),\n+                   Discrete_Range =>\n                      New_Occurrence_Of (Entity (Actual), Sloc (Actual))));\n \n                Analyze (N);"}, {"sha": "bd0d130b19e91c1d54e4dc2930b5f40045a25419", "filename": "gcc/ada/sem_ch7.adb", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fsem_ch7.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fsem_ch7.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch7.adb?ref=22b77f6852d433ba17fe169004a085298f636041", "patch": "@@ -487,8 +487,7 @@ package body Sem_Ch7 is\n \n             function Has_Referencer\n               (L     : List_Id;\n-               Outer : Boolean)\n-               return  Boolean;\n+               Outer : Boolean) return  Boolean;\n             --  Traverse the given list of declarations in reverse order.\n             --  Return True if a referencer is present. Return False if none is\n             --  found. The Outer parameter is True for the outer level call and\n@@ -509,10 +508,10 @@ package body Sem_Ch7 is\n \n             function Has_Referencer\n               (L     : List_Id;\n-               Outer : Boolean)\n-               return  Boolean\n+               Outer : Boolean) return  Boolean\n             is\n                Has_Referencer_Except_For_Subprograms : Boolean := False;\n+\n                D : Node_Id;\n                E : Entity_Id;\n                K : Node_Kind;\n@@ -532,7 +531,6 @@ package body Sem_Ch7 is\n                   V : Node_Id;\n \n                begin\n-\n                   --  Check name of procedure or function calls\n \n                   if Nkind_In (N, N_Procedure_Call_Statement, N_Function_Call)\n@@ -566,12 +564,13 @@ package body Sem_Ch7 is\n                   end if;\n \n                   return OK;\n-\n                end Check_Subprogram_Ref;\n \n                function Check_Subprogram_Refs is\n                  new Traverse_Func (Check_Subprogram_Ref);\n \n+            --  Start of processing for Has_Referencer\n+\n             begin\n                if No (L) then\n                   return False;"}, {"sha": "a37216671956f797c1b464ccfc3174094c80b721", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=22b77f6852d433ba17fe169004a085298f636041", "patch": "@@ -1011,8 +1011,8 @@ package body Sem_Res is\n          It  : Interp;\n \n       begin\n-         --  if the context is an attribute reference that can apply to\n-         --  functions, this is never a parameterless call. (RM 4.1.4 (6))\n+         --  If the context is an attribute reference that can apply to\n+         --  functions, this is never a parameterless call (RM 4.1.4 (6)).\n \n          if Nkind (Parent (N)) = N_Attribute_Reference\n             and then (Attribute_Name (Parent (N)) = Name_Address"}, {"sha": "ed6c25206c9991de4c27a3f3aa01b52d07ca832e", "filename": "gcc/ada/sem_type.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fsem_type.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22b77f6852d433ba17fe169004a085298f636041/gcc%2Fada%2Fsem_type.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_type.adb?ref=22b77f6852d433ba17fe169004a085298f636041", "patch": "@@ -480,8 +480,7 @@ package body Sem_Type is\n          then\n             Add_Entry (Entity (N), Etype (N));\n \n-         elsif (Nkind (N) = N_Function_Call\n-                 or else Nkind (N) = N_Procedure_Call_Statement)\n+         elsif Nkind_In (N, N_Function_Call, N_Procedure_Call_Statement)\n            and then Is_Entity_Name (Name (N))\n          then\n             Add_Entry (Entity (Name (N)), Etype (N));"}]}