{"sha": "786298dc13355be8942ad82002d4c675e7255299", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzg2Mjk4ZGMxMzM1NWJlODk0MmFkODIwMDJkNGM2NzVlNzI1NTI5OQ==", "commit": {"author": {"name": "Wilco Dijkstra", "email": "wdijkstr@arm.com", "date": "2016-01-19T14:10:49Z"}, "committer": {"name": "Jiong Wang", "email": "jiwang@gcc.gnu.org", "date": "2016-01-19T14:10:49Z"}, "message": "[PATCH 3/4] Add support for rtx costing of CCMP on AArch64\n\n    2015-01-19  Wilco Dijkstra  <wdijkstr@arm.com>\n\n    gcc/\n        * /config/aarch64/aarch64.c (aarch64_if_then_else_costs):\n        Add support for CCMP costing.\n\nFrom-SVN: r232564", "tree": {"sha": "9f09294a664da4ef9168cf89218105e733e7cbcc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f09294a664da4ef9168cf89218105e733e7cbcc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/786298dc13355be8942ad82002d4c675e7255299", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/786298dc13355be8942ad82002d4c675e7255299", "html_url": "https://github.com/Rust-GCC/gccrs/commit/786298dc13355be8942ad82002d4c675e7255299", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/786298dc13355be8942ad82002d4c675e7255299/comments", "author": null, "committer": null, "parents": [{"sha": "786e3c064c93b9283ff6a1a990d3caeb993b7ec4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/786e3c064c93b9283ff6a1a990d3caeb993b7ec4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/786e3c064c93b9283ff6a1a990d3caeb993b7ec4"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "a9cc4e462e520b8300cca2939c07a63151422f49", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/786298dc13355be8942ad82002d4c675e7255299/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/786298dc13355be8942ad82002d4c675e7255299/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=786298dc13355be8942ad82002d4c675e7255299", "patch": "@@ -1,5 +1,10 @@\n 2016-01-19  Wilco Dijkstra  <wdijkstr@arm.com>\n \n+\t* /config/aarch64/aarch64.c (aarch64_if_then_else_costs):\n+\tAdd support for CCMP costing.\n+\n+2015-01-19  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n \t* ccmp.c (ccmp_candidate_p): Remove integer-only restriction.\n \t* config/aarch64/aarch64.md (fccmp<mode>): New pattern.\n \t(fccmpe<mode>): Likewise."}, {"sha": "03bc1b97c2bed85006938f924175e48ad41e780f", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/786298dc13355be8942ad82002d4c675e7255299/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/786298dc13355be8942ad82002d4c675e7255299/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=786298dc13355be8942ad82002d4c675e7255299", "patch": "@@ -6004,6 +6004,26 @@ aarch64_if_then_else_costs (rtx op0, rtx op1, rtx op2, int *cost, bool speed)\n     }\n   else if (GET_MODE_CLASS (GET_MODE (inner)) == MODE_CC)\n     {\n+      /* CCMP.  */\n+      if ((GET_CODE (op1) == COMPARE) && CONST_INT_P (op2))\n+\t{\n+\t  /* Increase cost of CCMP reg, 0, imm, CC to prefer CMP reg, 0.  */\n+\t  if (XEXP (op1, 1) == const0_rtx)\n+\t    *cost += 1;\n+\t  if (speed)\n+\t    {\n+\t      machine_mode mode = GET_MODE (XEXP (op1, 0));\n+\t      const struct cpu_cost_table *extra_cost\n+\t\t= aarch64_tune_params.insn_extra_cost;\n+\n+\t      if (GET_MODE_CLASS (mode) == MODE_INT)\n+\t\t*cost += extra_cost->alu.arith;\n+\t      else\n+\t\t*cost += extra_cost->fp[mode == DFmode].compare;\n+\t    }\n+\t  return true;\n+\t}\n+\n       /* It's a conditional operation based on the status flags,\n \t so it must be some flavor of CSEL.  */\n "}]}