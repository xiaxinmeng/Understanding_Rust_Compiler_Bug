{"sha": "9a97e40ae1202ee33bd14c477652ef60fdd606ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWE5N2U0MGFlMTIwMmVlMzNiZDE0YzQ3NzY1MmVmNjBmZGQ2MDZhZA==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@unitus.it", "date": "2003-03-07T22:20:18Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2003-03-07T22:20:18Z"}, "message": "fstream.tcc (_M_convert_to_external): Set __elen to zero if codecvt::out eventually fails.\n\n2003-03-07  Paolo Carlini  <pcarlini@unitus.it>\n\n\t* include/bits/fstream.tcc (_M_convert_to_external):\n\tSet __elen to zero if codecvt::out eventually fails.\n\nFrom-SVN: r63954", "tree": {"sha": "16ea0f0da923684d2157d6141b8ae278bcf86f87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/16ea0f0da923684d2157d6141b8ae278bcf86f87"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9a97e40ae1202ee33bd14c477652ef60fdd606ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a97e40ae1202ee33bd14c477652ef60fdd606ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a97e40ae1202ee33bd14c477652ef60fdd606ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a97e40ae1202ee33bd14c477652ef60fdd606ad/comments", "author": null, "committer": null, "parents": [{"sha": "1deba98bd23b18dbaf4da0e42ee3d5d6c48fe758", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1deba98bd23b18dbaf4da0e42ee3d5d6c48fe758", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1deba98bd23b18dbaf4da0e42ee3d5d6c48fe758"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "6359e773a9cc334d53d3244f0ae0eb0dcf8e3b61", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a97e40ae1202ee33bd14c477652ef60fdd606ad/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a97e40ae1202ee33bd14c477652ef60fdd606ad/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=9a97e40ae1202ee33bd14c477652ef60fdd606ad", "patch": "@@ -1,3 +1,8 @@\n+2003-03-07  Paolo Carlini  <pcarlini@unitus.it>\n+\n+\t* include/bits/fstream.tcc (_M_convert_to_external):\n+\tSet __elen to zero if codecvt::out eventually fails.\n+\n 2003-03-07  Paolo Carlini  <pcarlini@unitus.it>\n \n \tPR libstdc++/9182"}, {"sha": "568c08c47292f2becc48baede6014b48940430b8", "filename": "libstdc++-v3/include/bits/fstream.tcc", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a97e40ae1202ee33bd14c477652ef60fdd606ad/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffstream.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a97e40ae1202ee33bd14c477652ef60fdd606ad/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffstream.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffstream.tcc?ref=9a97e40ae1202ee33bd14c477652ef60fdd606ad", "patch": "@@ -320,8 +320,13 @@ namespace std\n \t\t\t      __iend, __buf, __buf + __blen, __bend);\n \t      if (__r != codecvt_base::error)\n \t\t__rlen = __bend - __buf;\n-\t      else \n-\t\t__rlen = 0;\n+\t      else\n+\t\t{\n+\t\t  __rlen = 0;\n+\t\t  // Signal to the caller (_M_really_overflow) that\n+\t\t  // codecvt::out eventually failed.\n+\t\t  __elen = 0;\t\t  \n+\t\t}\n \t      if (__rlen)\n \t\t{\n \t\t  __elen += _M_file.xsputn(__buf, __rlen);"}]}