{"sha": "c13029bc889e0b441f14a3c39d2146df84ed9e89", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzEzMDI5YmM4ODllMGI0NDFmMTRhM2MzOWQyMTQ2ZGY4NGVkOWU4OQ==", "commit": {"author": {"name": "Dennis Glatting", "email": "dennisg@gnu.org", "date": "1991-11-20T23:29:20Z"}, "committer": {"name": "Dennis Glatting", "email": "dennisg@gnu.org", "date": "1991-11-20T23:29:20Z"}, "message": "converted hashValue() to a inline.\n\nFrom-SVN: r64", "tree": {"sha": "a86c31c3f496c6bfc5f326542f2f08e71109d113", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a86c31c3f496c6bfc5f326542f2f08e71109d113"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c13029bc889e0b441f14a3c39d2146df84ed9e89", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c13029bc889e0b441f14a3c39d2146df84ed9e89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c13029bc889e0b441f14a3c39d2146df84ed9e89", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c13029bc889e0b441f14a3c39d2146df84ed9e89/comments", "author": null, "committer": null, "parents": [{"sha": "b1fc2c61e2524d0560d26659b7672a5a81f9862b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1fc2c61e2524d0560d26659b7672a5a81f9862b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b1fc2c61e2524d0560d26659b7672a5a81f9862b"}], "stats": {"total": 39, "additions": 22, "deletions": 17}, "files": [{"sha": "5f8b883787fbce437fc37320b968f011944bfcdd", "filename": "gcc/objc/hash.c", "status": "modified", "additions": 22, "deletions": 17, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c13029bc889e0b441f14a3c39d2146df84ed9e89/gcc%2Fobjc%2Fhash.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c13029bc889e0b441f14a3c39d2146df84ed9e89/gcc%2Fobjc%2Fhash.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fhash.c?ref=c13029bc889e0b441f14a3c39d2146df84ed9e89", "patch": "@@ -16,10 +16,17 @@\n  * along with this program; if not, write to the Free Software\n  * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.\n  * \n-  $Header: /usr/user/dennis_glatting/ObjC/c-runtime/lib/RCS/hash.c,v 0.3 1991/11/07 23:23:40 dennisg Exp dennisg $\n+  $Header: /usr/user/dennis_glatting/ObjC/c-runtime/lib/RCS/hash.c,v 0.4 1991/11/19 12:34:41 dennisg Exp dennisg $\n   $Author: dennisg $\n-  $Date: 1991/11/07 23:23:40 $\n+  $Date: 1991/11/19 12:34:41 $\n   $Log: hash.c,v $\n+ * Revision 0.4  1991/11/19  12:34:41  dennisg\n+ * bug in hash_delete().  It was using void* to obtain nodes to\n+ * pass to hash_remove().  The value passed to hash_removed() is a\n+ * entry from the node structure rather than the node itself.  Using\n+ * void* removed compiler checking.\n+ * Modified to implement cache expansion.\n+ *\n  * Revision 0.3  1991/11/07  23:23:40  dennisg\n  * implemented hash table expansion as suggested by rms.\n  *\n@@ -52,8 +59,19 @@\n #define\tEXPANSION(cache) \\\n \t(((cache)->sizeOfHash * 175 ) / 100 )\n \n-                                                /* Local forward decl. */\n-  u_int hashValue( Cache_t, void* );\n+\n+static inline u_int hashValue( Cache_t theCache, void* aKey ) {\n+\n+  u_int hash = 0;\n+  int   i;\n+  \n+  \n+  assert( theCache->numberOfMaskBits );\n+  for( i = 0; i < ( sizeof( aKey ) * 8 ); i += theCache->numberOfMaskBits )\n+    hash ^= (( u_int )aKey ) >> i ;\n+\n+  return ( hash & theCache->mask ) % theCache->sizeOfHash;\n+}\n \n \n Cache_t hash_new( u_int sizeOfHash ) {\n@@ -299,16 +317,3 @@ CacheNode_t hash_next( Cache_t theCache, CacheNode_t aCacheNode ) {\n }\n \n \n-u_int hashValue( Cache_t theCache, void* aKey ) {\n-\n-  u_int hash = 0;\n-  int   i;\n-  \n-  \n-  assert( theCache->numberOfMaskBits );\n-  for( i = 0; i < ( sizeof( aKey ) * 8 ); i += theCache->numberOfMaskBits )\n-    hash ^= (( u_int )aKey ) >> i ;\n-\n-  return ( hash & theCache->mask ) % theCache->sizeOfHash;\n-}\n-"}]}