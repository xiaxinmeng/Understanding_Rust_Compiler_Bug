{"sha": "197b2bf341b95bf0c33f82c759654cb1db63d19e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTk3YjJiZjM0MWI5NWJmMGMzM2Y4MmM3NTk2NTRjYjFkYjYzZDE5ZQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1996-02-10T00:05:30Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1996-02-10T00:05:30Z"}, "message": "(probe+2, probe+4): New conditional move patterns.\n\n(movsicc): Don't truncate comparison if it is DImode.\n\nFrom-SVN: r11191", "tree": {"sha": "0931a70ed8583b9653a5801704025eda31f40913", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0931a70ed8583b9653a5801704025eda31f40913"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/197b2bf341b95bf0c33f82c759654cb1db63d19e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/197b2bf341b95bf0c33f82c759654cb1db63d19e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/197b2bf341b95bf0c33f82c759654cb1db63d19e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/197b2bf341b95bf0c33f82c759654cb1db63d19e/comments", "author": null, "committer": null, "parents": [{"sha": "2ae0f82c69d39ceb76014746b43e9297c1bc2b6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ae0f82c69d39ceb76014746b43e9297c1bc2b6d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ae0f82c69d39ceb76014746b43e9297c1bc2b6d"}], "stats": {"total": 39, "additions": 32, "deletions": 7}, "files": [{"sha": "ead8cdc34f91422bd7e1e20acfe9605fa91c147f", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 32, "deletions": 7, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/197b2bf341b95bf0c33f82c759654cb1db63d19e/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/197b2bf341b95bf0c33f82c759654cb1db63d19e/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=197b2bf341b95bf0c33f82c759654cb1db63d19e", "patch": "@@ -6477,6 +6477,21 @@ move\\\\t%0,%z4\\\\n\\\\\n   [(set_attr \"type\" \"move\")\n    (set_attr \"mode\" \"SI\")])\n \n+(define_insn \"\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=d,d\")\n+\t(if_then_else:SI\n+\t (match_operator 4 \"equality_op\"\n+\t\t\t [(match_operand:DI 1 \"register_operand\" \"d,d\")\n+\t\t\t  (const_int 0)])\n+\t (match_operand:SI 2 \"reg_or_0_operand\" \"dJ,0\")\n+\t (match_operand:SI 3 \"reg_or_0_operand\" \"0,dJ\")))]\n+  \"mips_isa >= 4\"\n+  \"@\n+    mov%B4\\\\t%0,%z2,%1\n+    mov%b4\\\\t%0,%z3,%1\"\n+  [(set_attr \"type\" \"move\")\n+   (set_attr \"mode\" \"SI\")])\n+\n (define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=d,d\")\n \t(if_then_else:SI\n@@ -6490,6 +6505,21 @@ move\\\\t%0,%z4\\\\n\\\\\n   [(set_attr \"type\" \"move\")\n    (set_attr \"mode\" \"SI\")])\n \n+(define_insn \"\"\n+  [(set (match_operand:DI 0 \"register_operand\" \"=d,d\")\n+\t(if_then_else:DI\n+\t (match_operator 4 \"equality_op\"\n+\t\t\t [(match_operand:SI 1 \"register_operand\" \"d,d\")\n+\t\t\t  (const_int 0)])\n+\t (match_operand:DI 2 \"reg_or_0_operand\" \"dJ,0\")\n+\t (match_operand:DI 3 \"reg_or_0_operand\" \"0,dJ\")))]\n+  \"mips_isa >= 4\"\n+  \"@\n+    mov%B4\\\\t%0,%z2,%1\n+    mov%b4\\\\t%0,%z3,%1\"\n+  [(set_attr \"type\" \"move\")\n+   (set_attr \"mode\" \"DI\")])\n+\n (define_insn \"\"\n   [(set (match_operand:DI 0 \"register_operand\" \"=d,d\")\n \t(if_then_else:DI\n@@ -6661,13 +6691,8 @@ move\\\\t%0,%z4\\\\n\\\\\n       operands[4] = gen_rtx (REG, CC_FPmode, FPSW_REGNUM);\n     }\n \n-  if (mode == DImode)\n-    operands[5] = gen_rtx (move_code, VOIDmode,\n-\t\t\t   gen_lowpart (SImode, operands[4]),\n-\t\t\t   CONST0_RTX (SImode));\n-  else\n-    operands[5] = gen_rtx (move_code, VOIDmode, operands[4],\n-\t\t\t   CONST0_RTX (SImode));\n+  operands[5] = gen_rtx (move_code, VOIDmode, operands[4],\n+\t\t\t CONST0_RTX (SImode));\n }\")\n \n ;; ??? Need movdicc, movsfcc, and movdfcc patterns.  They should be"}]}