{"sha": "53fdf0be639dbf77f048327f84f3eb1e17972d50", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTNmZGYwYmU2MzlkYmY3N2YwNDgzMjdmODRmM2ViMWUxNzk3MmQ1MA==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@wolery.cumb.org", "date": "2000-07-19T20:37:26Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-07-19T20:37:26Z"}, "message": "tradcpp.c (rescan): Do not recognize directives when the # is indented.\n\n\t* tradcpp.c (rescan): Do not recognize directives when the #\n\tis indented.\n\n\t* gcc.dg/cpp/tr-direct.c: New test.\n\nFrom-SVN: r35139", "tree": {"sha": "04680f86f8f4f50dd092058debe0d45d07bd72f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/04680f86f8f4f50dd092058debe0d45d07bd72f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/53fdf0be639dbf77f048327f84f3eb1e17972d50", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53fdf0be639dbf77f048327f84f3eb1e17972d50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53fdf0be639dbf77f048327f84f3eb1e17972d50", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53fdf0be639dbf77f048327f84f3eb1e17972d50/comments", "author": null, "committer": null, "parents": [{"sha": "0fab9d0a5db8322d0a2711fb2228a99f6e317df3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fab9d0a5db8322d0a2711fb2228a99f6e317df3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0fab9d0a5db8322d0a2711fb2228a99f6e317df3"}], "stats": {"total": 45, "additions": 21, "deletions": 24}, "files": [{"sha": "fb8c21b5aab40f35b4423ac97596577f31816dcc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53fdf0be639dbf77f048327f84f3eb1e17972d50/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53fdf0be639dbf77f048327f84f3eb1e17972d50/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=53fdf0be639dbf77f048327f84f3eb1e17972d50", "patch": "@@ -1,3 +1,8 @@\n+2000-07-19  Zack Weinberg  <zack@wolery.cumb.org>\n+\n+\t* tradcpp.c (rescan): Do not recognize directives when the #\n+\tis indented.\n+\n 2000-07-19  Zack Weinberg  <zack@wolery.cumb.org>\n \n \tImplement C++ named operators."}, {"sha": "c9d7cf394c45cb8d8afee06c6cc6aa6b96385b1f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53fdf0be639dbf77f048327f84f3eb1e17972d50/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53fdf0be639dbf77f048327f84f3eb1e17972d50/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=53fdf0be639dbf77f048327f84f3eb1e17972d50", "patch": "@@ -1,5 +1,7 @@\n 2000-07-19  Zack Weinberg  <zack@wolery.cumb.org>\n \n+\t* gcc.dg/cpp/tr-direct.c: New test.\n+\n \t* gcc.dg/cpp/directiv.c, gcc.dg/cpp/macsyntx.c,\n \tgcc.dg/cpp/undef1.c: Tweak error regexps.\n "}, {"sha": "309ec4911574dfe65784d9870ebbe112ab2eb8e4", "filename": "gcc/testsuite/gcc.dg/cpp/tr-direct.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53fdf0be639dbf77f048327f84f3eb1e17972d50/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Ftr-direct.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53fdf0be639dbf77f048327f84f3eb1e17972d50/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Ftr-direct.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Ftr-direct.c?ref=53fdf0be639dbf77f048327f84f3eb1e17972d50", "patch": "@@ -0,0 +1,11 @@\n+/* Test for some basic aspects of -traditional directive processing.  */\n+\n+/* { dg-do preprocess } */\n+/* { dg-options -traditional } */\n+\n+/* There is no #error directive.  */\n+\n+#error bad\t/* { dg-bogus \"bad\" } */\n+\n+/* Directives with their #s indented are not recognized.  */\n+ #if 0\t/* { dg-bogus \"unterminated\" } */"}, {"sha": "d48510ce7ac7de9418ce1a6519bcba91a0e42ebc", "filename": "gcc/tradcpp.c", "status": "modified", "additions": 3, "deletions": 24, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53fdf0be639dbf77f048327f84f3eb1e17972d50/gcc%2Ftradcpp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53fdf0be639dbf77f048327f84f3eb1e17972d50/gcc%2Ftradcpp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftradcpp.c?ref=53fdf0be639dbf77f048327f84f3eb1e17972d50", "patch": "@@ -1187,32 +1187,11 @@ do { ip = &instack[indepth];\t\t\\\n       if (ident_length)\n \tgoto specialchar;\n \n-      /* # keyword: a # must be first nonblank char on the line */\n+      /* # keyword: a # must be the first char on the line */\n       if (beg_of_line == 0)\n \tgoto randomchar;\n-      {\n-\tU_CHAR *bp;\n-\n-\t/* Scan from start of line, skipping whitespace, comments\n-\t   and backslash-newlines, and see if we reach this #.\n-\t   If not, this # is not special.  */\n-\tbp = beg_of_line;\n-\twhile (1) {\n-\t  if (is_hor_space[*bp])\n-\t    bp++;\n-\t  else if (*bp == '\\\\' && bp[1] == '\\n')\n-\t    bp += 2;\n-\t  else if (*bp == '/' && (newline_fix (bp + 1), bp[1]) == '*') {\n-\t    bp += 2;\n-\t    while (!(*bp == '*' && (newline_fix (bp + 1), bp[1]) == '/'))\n-\t      bp++;\n-\t    bp += 1;\n-\t  }\n-\t  else break;\n-\t}\n-\tif (bp + 1 != ibp)\n-\t  goto randomchar;\n-      }\n+      if (beg_of_line + 1 != ibp)\n+\tgoto randomchar;\n \n       /* This # can start a directive.  */\n "}]}