{"sha": "bd182be84e9c8ae8485ac7c392fa0b6678969e3c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmQxODJiZTg0ZTljOGFlODQ4NWFjN2MzOTJmYTBiNjY3ODk2OWUzYw==", "commit": {"author": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2005-02-25T07:13:25Z"}, "committer": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2005-02-25T07:13:25Z"}, "message": "re PR rtl-optimization/20117 (duplicated labels in PIC)\n\n\tPR rtl-optimization/20117\n\t* bb-reorder.c (duplicate_computed_gotos): Don't duplicate\n\tthe block including noncopyable insn.\n\nFrom-SVN: r95533", "tree": {"sha": "39c9ee1d5ea2b7c1775d477f89697282ae1cd77f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/39c9ee1d5ea2b7c1775d477f89697282ae1cd77f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd182be84e9c8ae8485ac7c392fa0b6678969e3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd182be84e9c8ae8485ac7c392fa0b6678969e3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd182be84e9c8ae8485ac7c392fa0b6678969e3c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd182be84e9c8ae8485ac7c392fa0b6678969e3c/comments", "author": null, "committer": null, "parents": [{"sha": "2b5936fd6163727b4be123ac730457a2d752aa77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b5936fd6163727b4be123ac730457a2d752aa77", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b5936fd6163727b4be123ac730457a2d752aa77"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "a41808c2e48a45db6731a389309758421f53a033", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd182be84e9c8ae8485ac7c392fa0b6678969e3c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd182be84e9c8ae8485ac7c392fa0b6678969e3c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bd182be84e9c8ae8485ac7c392fa0b6678969e3c", "patch": "@@ -1,3 +1,9 @@\n+2005-02-25  Kaz Kojima  <kkojima@gcc.gnu.org>\n+\n+\tPR rtl-optimization/20117\n+\t* bb-reorder.c (duplicate_computed_gotos): Don't duplicate\n+\tthe block including noncopyable insn.\n+\n 2005-02-24  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* cse.c (delete_trivially_dead_insns): Speed up by minimizing"}, {"sha": "44a501161ab5d95da7b84fe32b507d694de140d9", "filename": "gcc/bb-reorder.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd182be84e9c8ae8485ac7c392fa0b6678969e3c/gcc%2Fbb-reorder.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd182be84e9c8ae8485ac7c392fa0b6678969e3c/gcc%2Fbb-reorder.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbb-reorder.c?ref=bd182be84e9c8ae8485ac7c392fa0b6678969e3c", "patch": "@@ -2050,7 +2050,17 @@ duplicate_computed_gotos (void)\n \t  FOR_BB_INSNS (bb, insn)\n \t    {\n \t      if (INSN_P (insn))\n-\t        size += get_attr_length (insn);\n+\t\t{\n+\t\t  /* If the insn isn't copyable, don't duplicate\n+\t\t     the block.  */\n+\t\t  if (targetm.cannot_copy_insn_p\n+\t\t      && targetm.cannot_copy_insn_p (insn))\n+\t\t    {\n+\t\t      size = max_size + 1;\n+\t\t      break;\n+\t\t    }\n+\t\t  size += get_attr_length (insn);\n+\t\t}\n \t      if (size > max_size)\n \t\tbreak;\n \t    }"}]}