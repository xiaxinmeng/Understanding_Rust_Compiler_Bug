{"sha": "d6272e453df01a14b586a1ca45fcb90aed2817c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDYyNzJlNDUzZGYwMWExNGI1ODZhMWNhNDVmY2I5MGFlZDI4MTdjOQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-06-16T20:27:18Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-06-16T20:27:18Z"}, "message": "(check_format): Don't crash if cur_type is an error_mark.\n\nHandle identifier_node as the TYPE_NAME.\n\nFrom-SVN: r4682", "tree": {"sha": "239ffe6e71997aecef170d15c01d3cb242e806b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/239ffe6e71997aecef170d15c01d3cb242e806b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d6272e453df01a14b586a1ca45fcb90aed2817c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6272e453df01a14b586a1ca45fcb90aed2817c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6272e453df01a14b586a1ca45fcb90aed2817c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6272e453df01a14b586a1ca45fcb90aed2817c9/comments", "author": null, "committer": null, "parents": [{"sha": "4ab08223d10ad425c2c984e9f1560fef7cf24eed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ab08223d10ad425c2c984e9f1560fef7cf24eed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ab08223d10ad425c2c984e9f1560fef7cf24eed"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "a10fb0abcc3fcd31289dad802e8e9f7ae5ab08cc", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d6272e453df01a14b586a1ca45fcb90aed2817c9/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d6272e453df01a14b586a1ca45fcb90aed2817c9/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=d6272e453df01a14b586a1ca45fcb90aed2817c9", "patch": "@@ -1794,12 +1794,18 @@ check_format (info, params)\n   \n \t  this = IDENTIFIER_POINTER (DECL_NAME (TYPE_NAME (wanted_type)));\n \t  that = 0;\n-\t  if (TYPE_NAME (cur_type) != 0\n+\t  if (TREE_CODE (cur_type) != ERROR_MARK\n+\t      && TYPE_NAME (cur_type) != 0\n \t      && TREE_CODE (cur_type) != INTEGER_TYPE\n \t      && !(TREE_CODE (cur_type) == POINTER_TYPE\n-\t\t   && TREE_CODE (TREE_TYPE (cur_type)) == INTEGER_TYPE)\n-\t      && DECL_NAME (TYPE_NAME (cur_type)) != 0)\n-\t    that = IDENTIFIER_POINTER (DECL_NAME (TYPE_NAME (cur_type)));\n+\t\t   && TREE_CODE (TREE_TYPE (cur_type)) == INTEGER_TYPE))\n+\t    {\n+\t      if (TREE_CODE (TYPE_NAME (cur_type)) == TYPE_DECL\n+\t\t  && DECL_NAME (TYPE_NAME (cur_type)) != 0)\n+\t\tthat = IDENTIFIER_POINTER (DECL_NAME (TYPE_NAME (cur_type)));\n+\t      else\n+\t\tthat = IDENTIFIER_POINTER (TYPE_NAME (cur_type));\n+\t    }\n \n \t  /* A nameless type can't possibly match what the format wants.\n \t     So there will be a warning for it."}]}