{"sha": "488d268728bf701ac76a1392eaed202c80be3843", "node_id": "C_kwDOANBUbNoAKDQ4OGQyNjg3MjhiZjcwMWFjNzZhMTM5MmVhZWQyMDJjODBiZTM4NDM", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-04-06T14:11:15Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-05-06T13:43:39Z"}, "message": "libstdc++: Do not use #include inside push visibility scope [PR99871]\n\nlibstdc++-v3/ChangeLog:\n\n\tPR libstdc++/99871\n\t* include/bits/specfun.h: Use visibility attribute on namespace,\n\tinstead of pragma push/pop.\n\t* libsupc++/compare: Likewise.\n\t* libsupc++/exception: Likewise.\n\t* libsupc++/exception.h: Likewise.\n\t* libsupc++/exception_ptr.h: Likewise.\n\t* libsupc++/initializer_list: Likewise.\n\t* libsupc++/nested_exception.h: Likewise.", "tree": {"sha": "f82e0eaf6647f2978dd74c0486c0a6e3fc386f2a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f82e0eaf6647f2978dd74c0486c0a6e3fc386f2a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/488d268728bf701ac76a1392eaed202c80be3843", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/488d268728bf701ac76a1392eaed202c80be3843", "html_url": "https://github.com/Rust-GCC/gccrs/commit/488d268728bf701ac76a1392eaed202c80be3843", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/488d268728bf701ac76a1392eaed202c80be3843/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e03a0a4d73a478928b26213363fa5dbb9fc8695f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e03a0a4d73a478928b26213363fa5dbb9fc8695f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e03a0a4d73a478928b26213363fa5dbb9fc8695f"}], "stats": {"total": 44, "additions": 7, "deletions": 37}, "files": [{"sha": "a12b04b3ea73990bb92cff6b51dd07646c829b8c", "filename": "libstdc++-v3/include/bits/specfun.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fspecfun.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fspecfun.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fspecfun.h?ref=488d268728bf701ac76a1392eaed202c80be3843", "patch": "@@ -30,8 +30,6 @@\n #ifndef _GLIBCXX_BITS_SPECFUN_H\n #define _GLIBCXX_BITS_SPECFUN_H 1\n \n-#pragma GCC visibility push(default)\n-\n #include <bits/c++config.h>\n \n #define __STDCPP_MATH_SPEC_FUNCS__ 201003L\n@@ -1385,6 +1383,4 @@ _GLIBCXX_END_NAMESPACE_VERSION\n } // namespace __gnu_cxx\n #endif // __STRICT_ANSI__\n \n-#pragma GCC visibility pop\n-\n #endif // _GLIBCXX_BITS_SPECFUN_H"}, {"sha": "066867e9ce179c624406baa968318889ff6d6037", "filename": "libstdc++-v3/libsupc++/compare", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fcompare", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fcompare", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fcompare?ref=488d268728bf701ac76a1392eaed202c80be3843", "patch": "@@ -34,15 +34,13 @@\n \n #if __cplusplus > 201703L && __cpp_impl_three_way_comparison >= 201907L\n \n-#pragma GCC visibility push(default)\n-\n #include <concepts>\n \n #if __cpp_lib_concepts\n # define __cpp_lib_three_way_comparison 201907L\n #endif\n \n-namespace std\n+namespace std _GLIBCXX_VISIBILITY(default)\n {\n   // [cmp.categories], comparison category types\n \n@@ -1239,8 +1237,6 @@ namespace std\n #endif // concepts\n } // namespace std\n \n-#pragma GCC visibility pop\n-\n #endif // C++20\n \n #endif // _COMPARE"}, {"sha": "24c91292a1601d8fc9bc29a737219615a48ffec7", "filename": "libstdc++-v3/libsupc++/exception", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception?ref=488d268728bf701ac76a1392eaed202c80be3843", "patch": "@@ -32,14 +32,12 @@\n \n #pragma GCC system_header\n \n-#pragma GCC visibility push(default)\n-\n #include <bits/c++config.h>\n #include <bits/exception.h>\n \n extern \"C++\" {\n \n-namespace std\n+namespace std _GLIBCXX_VISIBILITY(default)\n {\n   /** @addtogroup exceptions\n    *  @{\n@@ -135,7 +133,7 @@ namespace std\n   /// @} group exceptions\n } // namespace std\n \n-namespace __gnu_cxx\n+namespace __gnu_cxx _GLIBCXX_VISIBILITY(default)\n {\n _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n@@ -162,8 +160,6 @@ _GLIBCXX_END_NAMESPACE_VERSION\n \n } // extern \"C++\"\n \n-#pragma GCC visibility pop\n-\n #if (__cplusplus >= 201103L)\n #include <bits/exception_ptr.h>\n #include <bits/nested_exception.h>"}, {"sha": "1df02bddc1b8ca0c5481409a153f80525e3a17aa", "filename": "libstdc++-v3/libsupc++/exception.h", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception.h?ref=488d268728bf701ac76a1392eaed202c80be3843", "patch": "@@ -33,13 +33,11 @@\n \n #pragma GCC system_header\n \n-#pragma GCC visibility push(default)\n-\n #include <bits/c++config.h>\n \n extern \"C++\" {\n \n-namespace std\n+namespace std _GLIBCXX_VISIBILITY(default)\n {\n   /**\n    * @defgroup exceptions Exceptions\n@@ -82,6 +80,4 @@ namespace std\n \n }\n \n-#pragma GCC visibility pop\n-\n #endif"}, {"sha": "21c53f686ba950f879486f5becf48ccfc7c15444", "filename": "libstdc++-v3/libsupc++/exception_ptr.h", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception_ptr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception_ptr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception_ptr.h?ref=488d268728bf701ac76a1392eaed202c80be3843", "patch": "@@ -31,8 +31,6 @@\n #ifndef _EXCEPTION_PTR_H\n #define _EXCEPTION_PTR_H\n \n-#pragma GCC visibility push(default)\n-\n #include <bits/c++config.h>\n #include <bits/exception_defines.h>\n #include <bits/cxxabi_init_exception.h>\n@@ -51,7 +49,7 @@\n \n extern \"C++\" {\n \n-namespace std \n+namespace std _GLIBCXX_VISIBILITY(default)\n {\n   class type_info;\n \n@@ -283,6 +281,4 @@ namespace std\n \n } // extern \"C++\"\n \n-#pragma GCC visibility pop\n-\n #endif"}, {"sha": "efa1f164cde4829500678a8b88f8fa6cf0d34050", "filename": "libstdc++-v3/libsupc++/initializer_list", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Finitializer_list", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Finitializer_list", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Finitializer_list?ref=488d268728bf701ac76a1392eaed202c80be3843", "patch": "@@ -36,11 +36,9 @@\n # include <bits/c++0x_warning.h>\n #else // C++0x\n \n-#pragma GCC visibility push(default)\n-\n #include <bits/c++config.h>\n \n-namespace std\n+namespace std _GLIBCXX_VISIBILITY(default)\n {\n   /// initializer_list\n   template<class _E>\n@@ -102,8 +100,6 @@ namespace std\n     { return __ils.end(); }\n }\n \n-#pragma GCC visibility pop\n-\n #endif // C++11\n \n #endif // _INITIALIZER_LIST"}, {"sha": "002a54e9fefd1013f54069b81e6a1cd249505af0", "filename": "libstdc++-v3/libsupc++/nested_exception.h", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnested_exception.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/488d268728bf701ac76a1392eaed202c80be3843/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnested_exception.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnested_exception.h?ref=488d268728bf701ac76a1392eaed202c80be3843", "patch": "@@ -30,18 +30,15 @@\n #ifndef _GLIBCXX_NESTED_EXCEPTION_H\n #define _GLIBCXX_NESTED_EXCEPTION_H 1\n \n-#pragma GCC visibility push(default)\n-\n #if __cplusplus < 201103L\n # include <bits/c++0x_warning.h>\n #else\n \n-#include <bits/c++config.h>\n #include <bits/move.h>\n \n extern \"C++\" {\n \n-namespace std\n+namespace std _GLIBCXX_VISIBILITY(default)\n {\n   /**\n    * @addtogroup exceptions\n@@ -165,7 +162,4 @@ namespace std\n } // extern \"C++\"\n \n #endif // C++11\n-\n-#pragma GCC visibility pop\n-\n #endif // _GLIBCXX_NESTED_EXCEPTION_H"}]}