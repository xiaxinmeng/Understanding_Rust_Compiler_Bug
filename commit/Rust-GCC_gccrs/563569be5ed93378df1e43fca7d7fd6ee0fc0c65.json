{"sha": "563569be5ed93378df1e43fca7d7fd6ee0fc0c65", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTYzNTY5YmU1ZWQ5MzM3OGRmMWU0M2ZjYTdkN2ZkNmVlMGZjMGM2NQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2008-03-08T10:57:28Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2008-03-08T10:57:28Z"}, "message": "trans.c (Loop_Statement_to_gnu): Set the SLOC of the loop label from that of the front-end's end label.\n\n\t* trans.c (Loop_Statement_to_gnu): Set the SLOC of the loop label\n\tfrom that of the front-end's end label.\n\t(gnat_gimplify_stmt) <LOOP_STMT>: Set the SLOC of the backward goto\n\tfrom that of the loop label.\n\nFrom-SVN: r133026", "tree": {"sha": "abd33221dbce3f7a60d776cd308ac4b7bbb35798", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/abd33221dbce3f7a60d776cd308ac4b7bbb35798"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/563569be5ed93378df1e43fca7d7fd6ee0fc0c65", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/563569be5ed93378df1e43fca7d7fd6ee0fc0c65", "html_url": "https://github.com/Rust-GCC/gccrs/commit/563569be5ed93378df1e43fca7d7fd6ee0fc0c65", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/563569be5ed93378df1e43fca7d7fd6ee0fc0c65/comments", "author": null, "committer": null, "parents": [{"sha": "2725b75c3397530b2fdb9fc9e8123eb95c5ae748", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2725b75c3397530b2fdb9fc9e8123eb95c5ae748", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2725b75c3397530b2fdb9fc9e8123eb95c5ae748"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "4d6f170f31735fe031e9cdc53a6f602934e47889", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/563569be5ed93378df1e43fca7d7fd6ee0fc0c65/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/563569be5ed93378df1e43fca7d7fd6ee0fc0c65/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=563569be5ed93378df1e43fca7d7fd6ee0fc0c65", "patch": "@@ -1,3 +1,10 @@\n+2008-03-08  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* trans.c (Loop_Statement_to_gnu): Set the SLOC of the loop label\n+\tfrom that of the front-end's end label.\n+\t(gnat_gimplify_stmt) <LOOP_STMT>: Set the SLOC of the backward goto\n+\tfrom that of the loop label.\n+\n 2008-03-07  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* decl.c (gnat_to_gnu_entity) <E_Modular_Integer_Subtype>: Add"}, {"sha": "5cb02976627f78c9dc1f6909f466b1c4a958b065", "filename": "gcc/ada/trans.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/563569be5ed93378df1e43fca7d7fd6ee0fc0c65/gcc%2Fada%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/563569be5ed93378df1e43fca7d7fd6ee0fc0c65/gcc%2Fada%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftrans.c?ref=563569be5ed93378df1e43fca7d7fd6ee0fc0c65", "patch": "@@ -1584,6 +1584,8 @@ Loop_Statement_to_gnu (Node_Id gnat_node)\n   TREE_SIDE_EFFECTS (gnu_loop_stmt) = 1;\n   LOOP_STMT_LABEL (gnu_loop_stmt) = create_artificial_label ();\n   set_expr_location_from_node (gnu_loop_stmt, gnat_node);\n+  Sloc_to_locus (Sloc (End_Label (gnat_node)),\n+\t\t &DECL_SOURCE_LOCATION (LOOP_STMT_LABEL (gnu_loop_stmt)));\n \n   /* Save the end label of this LOOP_STMT in a stack so that the corresponding\n      N_Exit_Statement can find it.  */\n@@ -5334,6 +5336,7 @@ gnat_gimplify_stmt (tree *stmt_p)\n       {\n \ttree gnu_start_label = create_artificial_label ();\n \ttree gnu_end_label = LOOP_STMT_LABEL (stmt);\n+\ttree t;\n \n \t/* Set to emit the statements of the loop.  */\n \t*stmt_p = NULL_TREE;\n@@ -5370,9 +5373,10 @@ gnat_gimplify_stmt (tree *stmt_p)\n \tif (LOOP_STMT_UPDATE (stmt))\n \t  append_to_statement_list (LOOP_STMT_UPDATE (stmt), stmt_p);\n \n-\tappend_to_statement_list (build1 (GOTO_EXPR, void_type_node,\n-\t\t\t\t\t  gnu_start_label),\n-\t\t\t\t  stmt_p);\n+\tt = build1 (GOTO_EXPR, void_type_node, gnu_start_label);\n+\tset_expr_location (t, DECL_SOURCE_LOCATION (gnu_end_label));\n+\tappend_to_statement_list (t, stmt_p);\n+\n \tappend_to_statement_list (build1 (LABEL_EXPR, void_type_node,\n \t\t\t\t\t  gnu_end_label),\n \t\t\t\t  stmt_p);"}]}