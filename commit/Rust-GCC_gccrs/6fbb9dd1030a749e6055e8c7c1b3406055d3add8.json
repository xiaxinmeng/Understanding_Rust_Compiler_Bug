{"sha": "6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmZiYjlkZDEwMzBhNzQ5ZTYwNTVlOGM3YzFiMzQwNjA1NWQzYWRkOA==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@st.com", "date": "2019-09-17T12:35:21Z"}, "committer": {"name": "Christophe Lyon", "email": "clyon@gcc.gnu.org", "date": "2019-09-17T12:35:21Z"}, "message": "[ARM/FDPIC v6 20/24] [ARM][testsuite] FDPIC: Skip tests using architectures unsupported by FDPIC\n\nSince FDPIC currently supports arm and thumb-2 modes only, these tests\nfail because they enforce an architecture version that doesn't match\nthese restrictions.\n\nThis patch introduces new values for the arm_arch effective-target\n(v4t_thumb, v5t_thumb, v5te_thumb, v6_thumb, v6k_thumb, v6z_thumb) as\nneeded, and adds them to the relevant tests.  In addition, it adds\nv4t_arm, v5t_arm, v5te_arm, v6_arm, v6k_arm and v6z_arm to avoid\nskipping some tests when GCC is configured to generate Thumb code by\ndefault.\n\nIt also adds the corresponding non-thumb effective-target to the tests\nthat were missing it.\n\nThe existing v4t, v5t, v5te, v6 v6k and v6z effective-targets now force\n-mfloat-abi=softfp since these thumb-1 targets do not support\nhard-float anyway.\n\nFinally, the patch removes the special case to detect the presence of\n-marm in the flags, since it makes atomic_loaddi tests unsupported:\nsince the flags in question also include -march, the combination is\nsupported, while -marm alone is not if GCC is configured to target an\nM-profile CPU.\n\n2019-19-17  Christophe Lyon  <christophe.lyon@st.com>\n\n\t* lib/target-supports.exp\n\t(check_effective_target_arm_arch_FUNC_ok): Add v4t_arm, v4t_thumb,\n\tv5t_arm, v5t_thumb, v5te_arm, v5te_thumb, v6_arm, v6_thumb,\n\tv6k_arm, v6k_thumb, v6z_arm, v6z_thumb.\n\tAdd -mfloat-abi=softfp to v4t, v5t, v5te, v6, v6k, v6z.\n\tRemove early exit for -marm.\n\t* gcc.target/arm/armv6-unaligned-load-ice.c: Add arm_arch\n\teffective-target.\n\t* gcc.target/arm/attr-unaligned-load-ice.c: Likewise.\n\t* gcc.target/arm/ftest-armv4-arm.c: Likewise.\n\t* gcc.target/arm/ftest-armv4t-arm.c: Likewise.\n\t* gcc.target/arm/ftest-armv4t-thumb.c: Likewise.\n\t* gcc.target/arm/ftest-armv5t-arm.c: Likewise.\n\t* gcc.target/arm/ftest-armv5t-thumb.c: Likewise.\n\t* gcc.target/arm/ftest-armv5te-arm.c: Likewise.\n\t* gcc.target/arm/ftest-armv5te-thumb.c: Likewise.\n\t* gcc.target/arm/ftest-armv6-arm.c: Likewise.\n\t* gcc.target/arm/ftest-armv6-thumb.c: Likewise.\n\t* gcc.target/arm/ftest-armv6k-arm.c: Likewise.\n\t* gcc.target/arm/ftest-armv6k-thumb.c: Likewise.\n\t* gcc.target/arm/ftest-armv6m-thumb.c: Likewise.\n\t* gcc.target/arm/ftest-armv6t2-arm.c: Likewise.\n\t* gcc.target/arm/ftest-armv6t2-thumb.c: Likewise.\n\t* gcc.target/arm/ftest-armv6z-arm.c: Likewise.\n\t* gcc.target/arm/ftest-armv6z-thumb.c: Likewise.\n\t* gcc.target/arm/g2.c: Likewise.\n\t* gcc.target/arm/macro_defs1.c: Likewise.\n\t* gcc.target/arm/pr59858.c: Likewise.\n\t* gcc.target/arm/pr65647-2.c: Likewise.\n\t* gcc.target/arm/pr79058.c: Likewise.\n\t* gcc.target/arm/pr83712.c: Likewise.\n\t* gcc.target/arm/pragma_arch_switch_2.c: Likewise.\n\t* gcc.target/arm/scd42-1.c: Likewise.\n\t* gcc.target/arm/scd42-2.c: Likewise.\n\t* gcc.target/arm/scd42-3.c: Likewise.\n\t* gcc.c-torture/compile/pr82096.c: Fix arm_arch effective-target.\n\t* gcc.target/arm/attr_arm-err.c: Likewise.\n\t* gcc.target/arm/di-longlong64-sync-withldrexd.c: Likewise.\n\nFrom-SVN: r275803", "tree": {"sha": "b7569000252c22a3e70dbfc997f50821ed8be0ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b7569000252c22a3e70dbfc997f50821ed8be0ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/comments", "author": null, "committer": null, "parents": [{"sha": "351e7c3b5fbd45bde3efb601f7fee9a31c4f2063", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/351e7c3b5fbd45bde3efb601f7fee9a31c4f2063", "html_url": "https://github.com/Rust-GCC/gccrs/commit/351e7c3b5fbd45bde3efb601f7fee9a31c4f2063"}], "stats": {"total": 104, "additions": 90, "deletions": 14}, "files": [{"sha": "918cd4bb70fdaeaf6ad52715ca74d561784291e0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,3 +1,44 @@\n+2019-19-17  Christophe Lyon  <christophe.lyon@st.com>\n+\n+\t* lib/target-supports.exp\n+\t(check_effective_target_arm_arch_FUNC_ok): Add v4t_arm, v4t_thumb,\n+\tv5t_arm, v5t_thumb, v5te_arm, v5te_thumb, v6_arm, v6_thumb,\n+\tv6k_arm, v6k_thumb, v6z_arm, v6z_thumb.\n+\tAdd -mfloat-abi=softfp to v4t, v5t, v5te, v6, v6k, v6z.\n+\tRemove early exit for -marm.\n+\t* gcc.target/arm/armv6-unaligned-load-ice.c: Add arm_arch\n+\teffective-target.\n+\t* gcc.target/arm/attr-unaligned-load-ice.c: Likewise.\n+\t* gcc.target/arm/ftest-armv4-arm.c: Likewise.\n+\t* gcc.target/arm/ftest-armv4t-arm.c: Likewise.\n+\t* gcc.target/arm/ftest-armv4t-thumb.c: Likewise.\n+\t* gcc.target/arm/ftest-armv5t-arm.c: Likewise.\n+\t* gcc.target/arm/ftest-armv5t-thumb.c: Likewise.\n+\t* gcc.target/arm/ftest-armv5te-arm.c: Likewise.\n+\t* gcc.target/arm/ftest-armv5te-thumb.c: Likewise.\n+\t* gcc.target/arm/ftest-armv6-arm.c: Likewise.\n+\t* gcc.target/arm/ftest-armv6-thumb.c: Likewise.\n+\t* gcc.target/arm/ftest-armv6k-arm.c: Likewise.\n+\t* gcc.target/arm/ftest-armv6k-thumb.c: Likewise.\n+\t* gcc.target/arm/ftest-armv6m-thumb.c: Likewise.\n+\t* gcc.target/arm/ftest-armv6t2-arm.c: Likewise.\n+\t* gcc.target/arm/ftest-armv6t2-thumb.c: Likewise.\n+\t* gcc.target/arm/ftest-armv6z-arm.c: Likewise.\n+\t* gcc.target/arm/ftest-armv6z-thumb.c: Likewise.\n+\t* gcc.target/arm/g2.c: Likewise.\n+\t* gcc.target/arm/macro_defs1.c: Likewise.\n+\t* gcc.target/arm/pr59858.c: Likewise.\n+\t* gcc.target/arm/pr65647-2.c: Likewise.\n+\t* gcc.target/arm/pr79058.c: Likewise.\n+\t* gcc.target/arm/pr83712.c: Likewise.\n+\t* gcc.target/arm/pragma_arch_switch_2.c: Likewise.\n+\t* gcc.target/arm/scd42-1.c: Likewise.\n+\t* gcc.target/arm/scd42-2.c: Likewise.\n+\t* gcc.target/arm/scd42-3.c: Likewise.\n+\t* gcc.c-torture/compile/pr82096.c: Fix arm_arch effective-target.\n+\t* gcc.target/arm/attr_arm-err.c: Likewise.\n+\t* gcc.target/arm/di-longlong64-sync-withldrexd.c: Likewise.\n+\n 2019-09-17  Feng Xue  <fxue@os.amperecomputing.com>\n \n \tPR ipa/91089"}, {"sha": "4e695cd7e2e8b9abe7bb6ffb31f6629f1d9db324", "filename": "gcc/testsuite/gcc.c-torture/compile/pr82096.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr82096.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr82096.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr82096.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-require-effective-target arm_arch_v5t_ok { target arm*-*-* } } */\n+/* { dg-require-effective-target arm_arch_v5t_thumb_ok { target arm*-*-* } } */\n /* { dg-skip-if \"Do not combine float-abi values\" { arm*-*-* } { \"-mfloat-abi=*\" } { \"-mfloat-abi=soft\" } } */\n /* { dg-additional-options \"-march=armv5t -mthumb -mfloat-abi=soft\" { target arm*-*-* } } */\n "}, {"sha": "886a0129f85dff3fcafe2a7462ac81c0b2ad13df", "filename": "gcc/testsuite/gcc.target/arm/armv6-unaligned-load-ice.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Farmv6-unaligned-load-ice.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Farmv6-unaligned-load-ice.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Farmv6-unaligned-load-ice.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6k\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-marm\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v6k_thumb_ok } */\n /* { dg-options \"-mthumb -Os -mfloat-abi=softfp\" } */\n /* { dg-add-options arm_arch_v6k } */\n "}, {"sha": "2eeb5220545c2d0b8c19516ab29ffd15e9f0a868", "filename": "gcc/testsuite/gcc.target/arm/attr-unaligned-load-ice.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr-unaligned-load-ice.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr-unaligned-load-ice.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr-unaligned-load-ice.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -2,6 +2,7 @@\n    Verify that unaligned_access is correctly with attribute target.  */\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6\" } } */\n+/* { dg-require-effective-target arm_arch_v6_ok } */\n /* { dg-options \"-Os -mfloat-abi=softfp -mtp=soft\" } */\n /* { dg-add-options arm_arch_v6 } */\n "}, {"sha": "67d572ab2f30f76cb44da9bb281f7c684d23283a", "filename": "gcc/testsuite/gcc.target/arm/attr_arm-err.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr_arm-err.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr_arm-err.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr_arm-err.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,7 +1,7 @@\n /* Check that attribute target arm is rejected for M profile.  */\n /* { dg-do compile } */\n-/* { dg-require-effective-target arm_arm_ok } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6-m\" } } */\n+/* { dg-require-effective-target arm_arch_v6m_ok } */\n /* { dg-add-options arm_arch_v6m } */\n \n int __attribute__((target(\"arm\")))"}, {"sha": "befb7ecd90611be9806c587a56186dbad44dc415", "filename": "gcc/testsuite/gcc.target/arm/di-longlong64-sync-withldrexd.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fdi-longlong64-sync-withldrexd.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fdi-longlong64-sync-withldrexd.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fdi-longlong64-sync-withldrexd.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,7 +1,6 @@\n /* { dg-do compile } */\n-/* { dg-require-effective-target arm_arm_ok } */\n /* { dg-options \"-marm -std=gnu99\" } */\n-/* { dg-require-effective-target arm_arch_v6k_ok } */\n+/* { dg-require-effective-target arm_arch_v6k_arm_ok } */\n /* { dg-add-options arm_arch_v6k } */\n /* { dg-message \"note: '__sync_fetch_and_nand' changed semantics in GCC 4.4\" \"fetch_and_nand\" { target *-*-* } 0 } */\n /* { dg-message \"note: '__sync_nand_and_fetch' changed semantics in GCC 4.4\" \"nand_and_fetch\" { target *-*-* } 0 } */"}, {"sha": "447a8ec16ae684a08b3c1370063b3ebeb755deec", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv4-arm.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv4-arm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv4-arm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv4-arm.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv4\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-mthumb\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v4_ok } */\n /* { dg-options \"-marm\" } */\n /* { dg-add-options arm_arch_v4 } */\n "}, {"sha": "28fd2f79ddb79580c9d97418dfb51c4ef32ffa42", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv4t-arm.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv4t-arm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv4t-arm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv4t-arm.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv4t\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-mthumb\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v4t_arm_ok } */\n /* { dg-options \"-marm\" } */\n /* { dg-add-options arm_arch_v4t } */\n "}, {"sha": "78878f7d6ec2a539885c263717a64eda54b64b4e", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv4t-thumb.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv4t-thumb.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv4t-thumb.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv4t-thumb.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv4t\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-marm\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v4t_thumb_ok } */\n /* { dg-options \"-mthumb\" } */\n /* { dg-add-options arm_arch_v4t } */\n "}, {"sha": "81912992037bd60c564b5f185600e89bec0fd4bc", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv5t-arm.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5t-arm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5t-arm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5t-arm.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv5t\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-mthumb\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v5t_arm_ok } */\n /* { dg-options \"-marm\" } */\n /* { dg-add-options arm_arch_v5t } */\n "}, {"sha": "b25d17db159367aa2a1f24280528c0b5be4aa447", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv5t-thumb.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5t-thumb.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5t-thumb.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5t-thumb.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv5t\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-marm\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v5t_thumb_ok } */\n /* { dg-options \"-mthumb\" } */\n /* { dg-add-options arm_arch_v5t } */\n "}, {"sha": "e0c0d5cf8d92e1121612e9e322820c6b52ecb048", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv5te-arm.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5te-arm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5te-arm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5te-arm.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv5te\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-mthumb\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v5te_arm_ok } */\n /* { dg-options \"-marm\" } */\n /* { dg-add-options arm_arch_v5te } */\n "}, {"sha": "27a64a2227b207679d3c07f09109047716e43af5", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv5te-thumb.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5te-thumb.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5te-thumb.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv5te-thumb.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv5te\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-marm\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v5te_thumb_ok } */\n /* { dg-options \"-mthumb\" } */\n /* { dg-add-options arm_arch_v5te } */\n "}, {"sha": "5d447c3c18f9c7b5a3d0ba5c801e99fd3668b655", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv6-arm.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6-arm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6-arm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6-arm.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-mthumb\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v6_arm_ok } */\n /* { dg-options \"-marm\" } */\n /* { dg-add-options arm_arch_v6 } */\n "}, {"sha": "15a6d75ccd26bdcb25f56ac1a81268954f7ee705", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv6-thumb.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6-thumb.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6-thumb.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6-thumb.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-marm\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v6_thumb_ok } */\n /* { dg-options \"-mthumb\" } */\n /* { dg-add-options arm_arch_v6 } */\n "}, {"sha": "0656e8f254989837d946b6e3d3179eafb06295bb", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv6k-arm.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6k-arm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6k-arm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6k-arm.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6k\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-mthumb\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v6k_arm_ok } */\n /* { dg-options \"-marm\" } */\n /* { dg-add-options arm_arch_v6k } */\n "}, {"sha": "b3b6ecf1b195209df79d45e3f121eee40fa5b5f8", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv6k-thumb.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6k-thumb.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6k-thumb.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6k-thumb.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6k\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-marm\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v6k_thumb_ok } */\n /* { dg-options \"-mthumb\" } */\n /* { dg-add-options arm_arch_v6k } */\n "}, {"sha": "27f71be8d8a5f53af746093be8b7a81895d2cc6d", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv6m-thumb.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6m-thumb.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6m-thumb.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6m-thumb.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6-m\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-marm\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v6m_ok } */\n /* { dg-options \"-mthumb\" } */\n /* { dg-add-options arm_arch_v6m } */\n "}, {"sha": "259d2b50df268770f0b21213733ccd95f686bcdc", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv6t2-arm.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6t2-arm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6t2-arm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6t2-arm.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6t2\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-mthumb\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v6t2_ok } */\n /* { dg-options \"-marm\" } */\n /* { dg-add-options arm_arch_v6t2 } */\n "}, {"sha": "e624ec549c1eaac573a88ecb8f873a413466fb42", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv6t2-thumb.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6t2-thumb.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6t2-thumb.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6t2-thumb.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6t2\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-marm\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v6t2_ok } */\n /* { dg-options \"-mthumb\" } */\n /* { dg-add-options arm_arch_v6t2 } */\n "}, {"sha": "6e3a9664be762e1c4030c512d1143a68848b1498", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv6z-arm.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6z-arm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6z-arm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6z-arm.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6z\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-mthumb\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v6z_arm_ok } */\n /* { dg-options \"-marm\" } */\n /* { dg-add-options arm_arch_v6z } */\n "}, {"sha": "23a4fcd7da2e438ae1118133a54c41f9caf6e916", "filename": "gcc/testsuite/gcc.target/arm/ftest-armv6z-thumb.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6z-thumb.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6z-thumb.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fftest-armv6z-thumb.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6z\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-marm\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v6z_thumb_ok } */\n /* { dg-options \"-mthumb\" } */\n /* { dg-add-options arm_arch_v6z } */\n "}, {"sha": "ca5e3ccff662c643a0fdb3302d2fc268fb88a917", "filename": "gcc/testsuite/gcc.target/arm/g2.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fg2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fg2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fg2.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -4,6 +4,7 @@\n /* { dg-skip-if \"Test is specific to the Xscale\" { arm*-*-* } { \"-march=*\" } { \"-march=xscale\" } } */\n /* { dg-skip-if \"Test is specific to the Xscale\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=xscale\" } } */\n /* { dg-skip-if \"Test is specific to ARM mode\" { arm*-*-* } { \"-mthumb\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v5te_arm_ok } */\n /* { dg-require-effective-target arm32 } */\n \n /* Brett Gaines' test case. */"}, {"sha": "655ba9334f383d646f14bdfee098c1701a40a0a7", "filename": "gcc/testsuite/gcc.target/arm/macro_defs1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmacro_defs1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmacro_defs1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmacro_defs1.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-march=*\" } { \"-march=armv6-m\" } } */\n /* { dg-skip-if \"avoid conflicting multilib options\" { *-*-* } { \"-marm\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v6m_ok } */\n /* { dg-options \"-march=armv6-m -mthumb\" } */\n \n #ifdef __ARM_NEON_FP"}, {"sha": "bcfd5d553e4458c47763948b6319f23a382e7eda", "filename": "gcc/testsuite/gcc.target/arm/pr59858.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr59858.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr59858.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr59858.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-options \"-march=armv5te -fno-builtin -mfloat-abi=soft -mthumb -fno-stack-protector -Os -fno-tree-loop-optimize -fno-tree-dominator-opts -fPIC -w\" } */\n /* { dg-skip-if \"Incompatible command line options: -mfloat-abi=soft -mfloat-abi=hard\" { *-*-* } { \"-mfloat-abi=hard\" } { \"\" } } */\n+/* { dg-require-effective-target arm_arch_v5te_thumb_ok } */\n \n typedef enum {\n  REG_ENOSYS = -1,"}, {"sha": "e3978e512eaa80257c9ed4fb6b27897d882d4d6d", "filename": "gcc/testsuite/gcc.target/arm/pr65647-2.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr65647-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr65647-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr65647-2.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do compile } */\n+/* { dg-require-effective-target arm_arch_v6_arm_ok } */\n /* { dg-options \"-O3 -marm -march=armv6 -std=c99\" } */\n \n typedef struct {"}, {"sha": "7d078ac2ce194131be33d37a54d8c575893b872a", "filename": "gcc/testsuite/gcc.target/arm/pr79058.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr79058.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr79058.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr79058.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile } */\n /* { dg-require-effective-target arm_arm_ok } */\n+/* { dg-require-effective-target arm_arch_v4_ok } */\n /* { dg-skip-if \"do not override -mcpu\" { *-*-* } { \"-mcpu=*\" } { \"-mcpu=arm7tdmi\" } } */\n /* { dg-options \"-Os -mbig-endian -marm -mcpu=arm7tdmi\" } */\n "}, {"sha": "4902ec9d0409100493b82addc60b87839a8258c4", "filename": "gcc/testsuite/gcc.target/arm/pr83712.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr83712.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr83712.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr83712.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do compile } */\n+/* { dg-require-effective-target arm_arch_v5t_thumb_ok } */\n /* { dg-options \"-mfloat-abi=softfp -mthumb -march=armv5t -O2\" }  */\n #pragma GCC optimize (\"-O2\")\n "}, {"sha": "5080d2c7a91f659bd3876d955f3376531fb97500", "filename": "gcc/testsuite/gcc.target/arm/pragma_arch_switch_2.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpragma_arch_switch_2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpragma_arch_switch_2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpragma_arch_switch_2.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -2,6 +2,7 @@\n /* { dg-skip-if \"instruction not valid on thumb\" { *-*-* } { \"-mthumb\" } { \"\" } } */\n /* { dg-do assemble } */\n /* { dg-require-effective-target arm_arm_ok } */\n+/* { dg-require-effective-target arm_arch_v5te_arm_ok } */\n /* { dg-additional-options \"-Wall -O2 -march=armv5te -std=gnu99 -marm\" } */\n \n #pragma GCC target (\"arch=armv6\")"}, {"sha": "2b8fc0b2bd7fe4856a425ed57bd7e60b11448562", "filename": "gcc/testsuite/gcc.target/arm/scd42-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fscd42-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fscd42-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fscd42-1.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -3,6 +3,7 @@\n /* { dg-skip-if \"Test is specific to Xscale\" { arm*-*-* } { \"-march=*\" } { \"-march=xscale\" } } */\n /* { dg-skip-if \"Test is specific to Xscale\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=xscale\" } } */\n /* { dg-skip-if \"do not override -mfloat-abi\" { *-*-* } { \"-mfloat-abi=*\" } { \"-mfloat-abi=softfp\" } } */\n+/* { dg-require-effective-target arm_arch_v5te_ok } */\n /* { dg-options \"-mcpu=xscale -O -mfloat-abi=softfp\" } */\n \n unsigned load1(void) __attribute__ ((naked));"}, {"sha": "3c9768d22d9c7eb91b9a25d64aac2d344111851a", "filename": "gcc/testsuite/gcc.target/arm/scd42-2.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fscd42-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fscd42-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fscd42-2.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -4,6 +4,7 @@\n /* { dg-skip-if \"Test is specific to the Xscale\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=xscale\" } } */\n /* { dg-skip-if \"Test is specific to ARM mode\" { arm*-*-* } { \"-mthumb\" } { \"\" } } */\n /* { dg-require-effective-target arm32 } */\n+/* { dg-require-effective-target arm_arch_v5te_arm_ok } */\n /* { dg-options \"-mcpu=xscale -O -marm\" } */\n \n unsigned load2(void) __attribute__ ((naked));"}, {"sha": "0afd1214bcbd1ee0d7e350ba5e0e2a6349858fd4", "filename": "gcc/testsuite/gcc.target/arm/scd42-3.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fscd42-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fscd42-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fscd42-3.c?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -3,6 +3,7 @@\n /* { dg-skip-if \"Test is specific to Xscale\" { arm*-*-* } { \"-march=*\" } { \"-march=xscale\" } } */\n /* { dg-skip-if \"Test is specific to Xscale\" { arm*-*-* } { \"-mcpu=*\" } { \"-mcpu=xscale\" } } */\n /* { dg-skip-if \"do not override -mfloat-abi\" { *-*-* } { \"-mfloat-abi=*\" } { \"-mfloat-abi=softfp\" } } */\n+/* { dg-require-effective-target arm_arch_v5te_ok } */\n /* { dg-options \"-mcpu=xscale -O -mfloat-abi=softfp\" } */\n \n unsigned load4(void) __attribute__ ((naked));"}, {"sha": "414bf80003b9192806f79afed9393f9ef4750a7d", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 18, "deletions": 10, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fbb9dd1030a749e6055e8c7c1b3406055d3add8/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=6fbb9dd1030a749e6055e8c7c1b3406055d3add8", "patch": "@@ -4188,13 +4188,25 @@ proc check_effective_target_arm_fp16_hw { } {\n #\t /* { dg-require-effective-target arm_arch_v5t_multilib } */\n foreach { armfunc armflag armdefs } {\n \tv4 \"-march=armv4 -marm\" __ARM_ARCH_4__\n-\tv4t \"-march=armv4t\" __ARM_ARCH_4T__\n-\tv5t \"-march=armv5t\" __ARM_ARCH_5T__\n-\tv5te \"-march=armv5te\" __ARM_ARCH_5TE__\n-\tv6 \"-march=armv6\" __ARM_ARCH_6__\n-\tv6k \"-march=armv6k\" __ARM_ARCH_6K__\n+\tv4t \"-march=armv4t -mfloat-abi=softfp\" __ARM_ARCH_4T__\n+\tv4t_arm \"-march=armv4t -marm\" __ARM_ARCH_4T__\n+\tv4t_thumb \"-march=armv4t -mthumb -mfloat-abi=softfp\" __ARM_ARCH_4T__\n+\tv5t \"-march=armv5t -mfloat-abi=softfp\" __ARM_ARCH_5T__\n+\tv5t_arm \"-march=armv5t -marm\" __ARM_ARCH_5T__\n+\tv5t_thumb \"-march=armv5t -mthumb -mfloat-abi=softfp\" __ARM_ARCH_5T__\n+\tv5te \"-march=armv5te -mfloat-abi=softfp\" __ARM_ARCH_5TE__\n+\tv5te_arm \"-march=armv5te -marm\" __ARM_ARCH_5TE__\n+\tv5te_thumb \"-march=armv5te -mthumb -mfloat-abi=softfp\" __ARM_ARCH_5TE__\n+\tv6 \"-march=armv6 -mfloat-abi=softfp\" __ARM_ARCH_6__\n+\tv6_arm \"-march=armv6 -marm\" __ARM_ARCH_6__\n+\tv6_thumb \"-march=armv6 -mthumb -mfloat-abi=softfp\" __ARM_ARCH_6__\n+\tv6k \"-march=armv6k -mfloat-abi=softfp\" __ARM_ARCH_6K__\n+\tv6k_arm \"-march=armv6k -marm\" __ARM_ARCH_6K__\n+\tv6k_thumb \"-march=armv6k -mthumb -mfloat-abi=softfp\" __ARM_ARCH_6K__\n \tv6t2 \"-march=armv6t2\" __ARM_ARCH_6T2__\n-\tv6z \"-march=armv6z\" __ARM_ARCH_6Z__\n+\tv6z \"-march=armv6z -mfloat-abi=softfp\" __ARM_ARCH_6Z__\n+\tv6z_arm \"-march=armv6z -marm\" __ARM_ARCH_6Z__\n+\tv6z_thumb \"-march=armv6z -mthumb -mfloat-abi=softfp\" __ARM_ARCH_6Z__\n \tv6m \"-march=armv6-m -mthumb -mfloat-abi=soft\" __ARM_ARCH_6M__\n \tv7a \"-march=armv7-a\" __ARM_ARCH_7A__\n \tv7r \"-march=armv7-r\" __ARM_ARCH_7R__\n@@ -4211,10 +4223,6 @@ foreach { armfunc armflag armdefs } {\n \tv8r \"-march=armv8-r\" __ARM_ARCH_8R__ } {\n     eval [string map [list FUNC $armfunc FLAG $armflag DEFS $armdefs ] {\n \tproc check_effective_target_arm_arch_FUNC_ok { } {\n-\t    if { [ string match \"*-marm*\" \"FLAG\" ] &&\n-\t\t![check_effective_target_arm_arm_ok] } {\n-\t\treturn 0\n-\t    }\n \t    return [check_no_compiler_messages arm_arch_FUNC_ok assembly {\n \t\t#if !(DEFS)\n \t\t#error !(DEFS)"}]}