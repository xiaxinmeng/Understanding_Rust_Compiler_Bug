{"sha": "6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmNjZDJlY2UyZjUyMzJlNmZhMmQ2ZWJiNDIyN2NhMDNhZjc3Yjg3Yg==", "commit": {"author": {"name": "Bill Schmidt", "email": "wschmidt@linux.vnet.ibm.com", "date": "2017-08-17T19:31:54Z"}, "committer": {"name": "William Schmidt", "email": "wschmidt@gcc.gnu.org", "date": "2017-08-17T19:31:54Z"}, "message": "altivec.md (UNSPEC_VMRGOW_DIRECT): New constant.\n\n2017-08-17  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n\n\t* config/rs6000/altivec.md (UNSPEC_VMRGOW_DIRECT): New constant.\n\t(p8_vmrgew_v4sf_direct): Generalize to p8_vmrgew_<mode>_direct.\n\t(p8_vmrgow_<mode>_direct): New define_insn.\n\t* config/rs6000/rs6000.c (altivec_expand_vec_perm_const): Properly\n\thandle endianness for vmrgew and vmrgow permute patterns.\n\nFrom-SVN: r251161", "tree": {"sha": "7c9f8893512944206b3e4ddcdf5c5fa38e9bed83", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7c9f8893512944206b3e4ddcdf5c5fa38e9bed83"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b/comments", "author": {"login": "wschmidt-ibm", "id": 5520937, "node_id": "MDQ6VXNlcjU1MjA5Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/5520937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wschmidt-ibm", "html_url": "https://github.com/wschmidt-ibm", "followers_url": "https://api.github.com/users/wschmidt-ibm/followers", "following_url": "https://api.github.com/users/wschmidt-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/wschmidt-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/wschmidt-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wschmidt-ibm/subscriptions", "organizations_url": "https://api.github.com/users/wschmidt-ibm/orgs", "repos_url": "https://api.github.com/users/wschmidt-ibm/repos", "events_url": "https://api.github.com/users/wschmidt-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/wschmidt-ibm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1f81b32145ae52bda71b76a2fd9f6827e0b7ffea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f81b32145ae52bda71b76a2fd9f6827e0b7ffea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f81b32145ae52bda71b76a2fd9f6827e0b7ffea"}], "stats": {"total": 34, "additions": 28, "deletions": 6}, "files": [{"sha": "17b49295d4edb8998e3d4dd6bbb2a4e35eb0ce65", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b", "patch": "@@ -1,3 +1,11 @@\n+2017-08-17  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+\n+\t* config/rs6000/altivec.md (UNSPEC_VMRGOW_DIRECT): New constant.\n+\t(p8_vmrgew_v4sf_direct): Generalize to p8_vmrgew_<mode>_direct.\n+\t(p8_vmrgow_<mode>_direct): New define_insn.\n+\t* config/rs6000/rs6000.c (altivec_expand_vec_perm_const): Properly\n+\thandle endianness for vmrgew and vmrgow permute patterns.\n+\n 2017-08-17  Peter Bergner  <bergner@vnet.ibm.com>\n \n \t* config/rs6000/altivec.md (VParity): Remove TARGET_VSX_TIMODE."}, {"sha": "c9dddda1b4c30de00a1d86e2710d10da3b2e6da5", "filename": "gcc/config/rs6000/altivec.md", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b/gcc%2Fconfig%2Frs6000%2Faltivec.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b/gcc%2Fconfig%2Frs6000%2Faltivec.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faltivec.md?ref=6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b", "patch": "@@ -148,6 +148,7 @@\n    UNSPEC_VMRGL_DIRECT\n    UNSPEC_VSPLT_DIRECT\n    UNSPEC_VMRGEW_DIRECT\n+   UNSPEC_VMRGOW_DIRECT\n    UNSPEC_VSUMSWS_DIRECT\n    UNSPEC_VADDCUQ\n    UNSPEC_VADDEUQM\n@@ -1357,15 +1358,24 @@\n }\n   [(set_attr \"type\" \"vecperm\")])\n \n-(define_insn \"p8_vmrgew_v4sf_direct\"\n-  [(set (match_operand:V4SF 0 \"register_operand\" \"=v\")\n-\t(unspec:V4SF [(match_operand:V4SF 1 \"register_operand\" \"v\")\n-\t\t      (match_operand:V4SF 2 \"register_operand\" \"v\")]\n+(define_insn \"p8_vmrgew_<mode>_direct\"\n+  [(set (match_operand:VSX_W 0 \"register_operand\" \"=v\")\n+\t(unspec:VSX_W [(match_operand:VSX_W 1 \"register_operand\" \"v\")\n+\t\t       (match_operand:VSX_W 2 \"register_operand\" \"v\")]\n \t\t     UNSPEC_VMRGEW_DIRECT))]\n   \"TARGET_P8_VECTOR\"\n   \"vmrgew %0,%1,%2\"\n   [(set_attr \"type\" \"vecperm\")])\n \n+(define_insn \"p8_vmrgow_<mode>_direct\"\n+  [(set (match_operand:VSX_W 0 \"register_operand\" \"=v\")\n+\t(unspec:VSX_W [(match_operand:VSX_W 1 \"register_operand\" \"v\")\n+\t\t       (match_operand:VSX_W 2 \"register_operand\" \"v\")]\n+\t\t     UNSPEC_VMRGOW_DIRECT))]\n+  \"TARGET_P8_VECTOR\"\n+  \"vmrgow %0,%1,%2\"\n+  [(set_attr \"type\" \"vecperm\")])\n+\n (define_expand \"vec_widen_umult_even_v16qi\"\n   [(use (match_operand:V8HI 0 \"register_operand\" \"\"))\n    (use (match_operand:V16QI 1 \"register_operand\" \"\"))"}, {"sha": "b31b1ab460fa898ee0e2db724ae3527159bc1cbb", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=6ccd2ece2f5232e6fa2d6ebb4227ca03af77b87b", "patch": "@@ -35282,9 +35282,13 @@ altivec_expand_vec_perm_const (rtx operands[4])\n       (BYTES_BIG_ENDIAN ? CODE_FOR_altivec_vmrglw_direct\n        : CODE_FOR_altivec_vmrghw_direct),\n       {  8,  9, 10, 11, 24, 25, 26, 27, 12, 13, 14, 15, 28, 29, 30, 31 } },\n-    { OPTION_MASK_P8_VECTOR, CODE_FOR_p8_vmrgew_v4si,\n+    { OPTION_MASK_P8_VECTOR,\n+      (BYTES_BIG_ENDIAN ? CODE_FOR_p8_vmrgew_v4sf_direct\n+       : CODE_FOR_p8_vmrgow_v4sf_direct),\n       {  0,  1,  2,  3, 16, 17, 18, 19,  8,  9, 10, 11, 24, 25, 26, 27 } },\n-    { OPTION_MASK_P8_VECTOR, CODE_FOR_p8_vmrgow,\n+    { OPTION_MASK_P8_VECTOR,\n+      (BYTES_BIG_ENDIAN ? CODE_FOR_p8_vmrgow_v4sf_direct\n+       : CODE_FOR_p8_vmrgew_v4sf_direct),\n       {  4,  5,  6,  7, 20, 21, 22, 23, 12, 13, 14, 15, 28, 29, 30, 31 } }\n   };\n "}]}