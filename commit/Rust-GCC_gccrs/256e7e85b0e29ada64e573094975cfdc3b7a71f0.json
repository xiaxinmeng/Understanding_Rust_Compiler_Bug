{"sha": "256e7e85b0e29ada64e573094975cfdc3b7a71f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjU2ZTdlODViMGUyOWFkYTY0ZTU3MzA5NDk3NWNmZGMzYjdhNzFmMA==", "commit": {"author": {"name": "Angela Marie Thomas", "email": "angela@cygnus.com", "date": "2001-05-18T05:37:43Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2001-05-18T05:37:43Z"}, "message": "libstdc++-v3-dg.exp (libstdc++-v3-dg-test): Set output_file based on the name of the testcase.\n\n\n2001-05-18  Angela Marie Thomas <angela@cygnus.com>\n\n        * testsuite/lib/libstdc++-v3-dg.exp (libstdc++-v3-dg-test):  Set\n        output_file based on the name of the testcase.\n\n2001-05-18  Angela Marie Thomas <angela@cygnus.com>\n\n        * testsuite/lib/libstdc++-v3-dg.exp (libstdc++-v3-init):  Build\n        gluefile and use it if needs_status_wrapper is set.\n\nFrom-SVN: r42240", "tree": {"sha": "895b0d7bb4f98b4e3b9e1eeb859f2c6e67605a2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/895b0d7bb4f98b4e3b9e1eeb859f2c6e67605a2d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/256e7e85b0e29ada64e573094975cfdc3b7a71f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/256e7e85b0e29ada64e573094975cfdc3b7a71f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/256e7e85b0e29ada64e573094975cfdc3b7a71f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/256e7e85b0e29ada64e573094975cfdc3b7a71f0/comments", "author": null, "committer": null, "parents": [{"sha": "9c233cb328c39e0b54f7c2c9285512bcff7494d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c233cb328c39e0b54f7c2c9285512bcff7494d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c233cb328c39e0b54f7c2c9285512bcff7494d3"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "22e0793c23d1df31e4445d59f2f185a70b5980df", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/256e7e85b0e29ada64e573094975cfdc3b7a71f0/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/256e7e85b0e29ada64e573094975cfdc3b7a71f0/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=256e7e85b0e29ada64e573094975cfdc3b7a71f0", "patch": "@@ -1,3 +1,13 @@\n+2001-05-18  Angela Marie Thomas <angela@cygnus.com>\n+\n+        * testsuite/lib/libstdc++-v3-dg.exp (libstdc++-v3-dg-test):  Set\n+        output_file based on the name of the testcase.\n+\n+2001-05-18  Angela Marie Thomas <angela@cygnus.com>\n+\n+        * testsuite/lib/libstdc++-v3-dg.exp (libstdc++-v3-init):  Build\n+        gluefile and use it if needs_status_wrapper is set.\n+\n 2001-05-18  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* configure.target (ATOMICITYH): Use cpu/generic code on earlier"}, {"sha": "978ab0128852c5d6c8df3468427b257af3ad13ad", "filename": "libstdc++-v3/testsuite/lib/libstdc++-v3-dg.exp", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/256e7e85b0e29ada64e573094975cfdc3b7a71f0/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B-v3-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/256e7e85b0e29ada64e573094975cfdc3b7a71f0/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B-v3-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B-v3-dg.exp?ref=256e7e85b0e29ada64e573094975cfdc3b7a71f0", "patch": "@@ -26,6 +26,8 @@ proc libstdc++-v3-init { args } {\n     global cxx\n     global includes\n     global cxxflags\n+    global objdir\n+    global gluefile wrap_flags\n \n     set blddir   [lookfor_file $outdir libstdc++-v3]\n     set cxx \t [exec sh ${blddir}/testsuite_flags --build-cxx]\n@@ -43,6 +45,18 @@ proc libstdc++-v3-init { args } {\n     foreach txt [glob -nocomplain \"$srcdir/*/*.txt\"] {\n \tfile copy -force $txt $outdir\n     }\n+\n+    if { [target_info needs_status_wrapper]!=\"\" && ![info exists gluefile] } {\n+      set gluefile ${objdir}/testglue.o;\n+      set result [build_wrapper $gluefile];\n+      if { $result != \"\" } {\n+          set gluefile [lindex $result 0];\n+          set wrap_flags [lindex $result 1];\n+      } else {\n+          unset gluefile\n+      }\n+    }\n+\n }\n \n proc libstdc++-v3-dg-test { prog do_what extra_tool_flags } {\n@@ -63,14 +77,14 @@ proc libstdc++-v3-dg-test { prog do_what extra_tool_flags } {\n \t}\n \t\"link\" {\n \t    set compile_type \"executable\"\n-\t    set output_file \"a.out\"\n+\t    set output_file \"./[file rootname [file tail $prog]]\"\n \t}\n \t\"run\" {\n \t    set compile_type \"executable\"\n \t    # FIXME: \"./\" is to cope with \".\" not being in $PATH.\n \t    # Should this be handled elsewhere?\n \t    # YES.\n-\t    set output_file \"./a.out\"\n+\t    set output_file \"./[file rootname [file tail $prog]]\"\n \t    # This is the only place where we care if an executable was\n \t    # created or not.  If it was, dg.exp will try to run it.\n \t    remote_file build delete $output_file;"}]}