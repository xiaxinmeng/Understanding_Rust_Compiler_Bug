{"sha": "cd93179bd4b7aaa62111c9d9d5bf83770bdcd0c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Q5MzE3OWJkNGI3YWFhNjIxMTFjOWQ5ZDViZjgzNzcwYmRjZDBjOQ==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1993-10-13T14:57:48Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1993-10-13T14:57:48Z"}, "message": "Define ASM_OUTPUT_ADDR_DIFF_ELT; save some cycles in profiling.\n\nFrom-SVN: r5770", "tree": {"sha": "b2ee840540c85d4993696609ffc7b796eb231030", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b2ee840540c85d4993696609ffc7b796eb231030"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cd93179bd4b7aaa62111c9d9d5bf83770bdcd0c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd93179bd4b7aaa62111c9d9d5bf83770bdcd0c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd93179bd4b7aaa62111c9d9d5bf83770bdcd0c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd93179bd4b7aaa62111c9d9d5bf83770bdcd0c9/comments", "author": null, "committer": null, "parents": [{"sha": "eb5ad42ab31f67d1434271023648a2401380ff01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb5ad42ab31f67d1434271023648a2401380ff01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb5ad42ab31f67d1434271023648a2401380ff01"}], "stats": {"total": 20, "additions": 12, "deletions": 8}, "files": [{"sha": "2b94588085e78402b28c79faf1d136f7370a1809", "filename": "gcc/config/i386/osfrose.h", "status": "modified", "additions": 12, "deletions": 8, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd93179bd4b7aaa62111c9d9d5bf83770bdcd0c9/gcc%2Fconfig%2Fi386%2Fosfrose.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd93179bd4b7aaa62111c9d9d5bf83770bdcd0c9/gcc%2Fconfig%2Fi386%2Fosfrose.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fosfrose.h?ref=cd93179bd4b7aaa62111c9d9d5bf83770bdcd0c9", "patch": "@@ -200,8 +200,7 @@ do\t\t\t\t\t\t\t\t\t\\\n \t    fprintf (FILE, \"\\tmovl $%sP%d,%%edx\\n\", lprefix, labelno);\t\\\n \t    fprintf (FILE, \"\\tmovl %s%s,%%eax\\n\", prefix,\t\t\\\n \t\t     XSTR (symref, 0));\t\t\t\t\t\\\n-\t    fprintf (FILE, \"\\tmovl (%%eax),%%eax\\n\");\t\t\t\\\n-\t    fprintf (FILE, \"\\tcall *%%eax\\n\");\t\t\t\t\\\n+\t    fprintf (FILE, \"\\tcall *(%%eax)\\n\");\t\t\t\\\n \t  }\t\t\t\t\t\t\t\t\\\n \t\t\t\t\t\t\t\t\t\\\n \telse\t\t\t\t\t\t\t\t\\\n@@ -216,8 +215,7 @@ do\t\t\t\t\t\t\t\t\t\\\n \t\t     lprefix, labelno);\t\t\t\t\t\\\n \t    fprintf (FILE, \"\\tmovl %s_mcount_ptr@GOT(%%eax),%%eax\\n\",\t\\\n \t\t     prefix);\t\t\t\t\t\t\\\n-\t    fprintf (FILE, \"\\tmovl (%%eax),%%eax\\n\");\t\t\t\\\n-\t    fprintf (FILE, \"\\tcall *%%eax\\n\");\t\t\t\t\\\n+\t    fprintf (FILE, \"\\tcall *(%%eax)\\n\");\t\t\t\\\n \t  }\t\t\t\t\t\t\t\t\\\n       }\t\t\t\t\t\t\t\t\t\\\n \t\t\t\t\t\t\t\t\t\\\n@@ -271,8 +269,7 @@ do\t\t\t\t\t\t\t\t\t\\\n \t    HALF_PIC_EXTERNAL (\"mcount\");\t\t\t\t\\\n \t    symdef = HALF_PIC_PTR (gen_rtx (SYMBOL_REF, Pmode, \"mcount\")); \\\n \t    fprintf (FILE, \"\\tmovl $%sP%d,%%edx\\n\", lprefix, labelno);\t\\\n-\t    fprintf (FILE, \"\\tmovl %s%s,%%eax\\n\", prefix, XSTR (symdef, 0)); \\\n-\t    fprintf (FILE, \"\\tcall *%%eax\\n\");\t\t\t\t\\\n+\t    fprintf (FILE, \"\\tcall *%s%s\\n\", prefix, XSTR (symdef, 0));\t\\\n \t  }\t\t\t\t\t\t\t\t\\\n \t\t\t\t\t\t\t\t\t\\\n \telse if (TARGET_MCOUNT)\t\t\t\t\t\t\\\n@@ -288,8 +285,7 @@ do\t\t\t\t\t\t\t\t\t\\\n \t    fprintf (FILE, \"\\tleal $%sP%d@GOTOFF(%%ebx),%%edx\\n\",\t\\\n \t\t     lprefix, labelno);\t\t\t\t\t\\\n \t    fprintf (FILE, \"\\tmovl _mcount_ptr@GOT(%%eax),%%eax\\n\");\t\\\n-\t    fprintf (FILE, \"\\tmovl (%%eax),%%eax\\n\");\t\t\t\\\n-\t    fprintf (FILE, \"\\tcall *%%eax\\n\");\t\t\t\t\\\n+\t    fprintf (FILE, \"\\tcall *(%%eax)\\n\");\t\t\t\\\n \t    fprintf (FILE, \"\\tpopl %%eax\\n\");\t\t\t\t\\\n \t  }\t\t\t\t\t\t\t\t\\\n \t\t\t\t\t\t\t\t\t\\\n@@ -424,6 +420,14 @@ while (0)\n #define ASM_OUTPUT_LABELREF(FILE,NAME)\t\t\t\t\t\\\n   fprintf (FILE, \"%s%s\", (TARGET_UNDERSCORES) ? \"_\" : \"\", NAME)\n \n+/* This is how to output an element of a case-vector that is relative.\n+   This is only used for PIC code.  See comments by the `casesi' insn in\n+   i386.md for an explanation of the expression this outputs. */\n+\n+#undef ASM_OUTPUT_ADDR_DIFF_ELT\n+#define ASM_OUTPUT_ADDR_DIFF_ELT(FILE, VALUE, REL) \\\n+  fprintf (FILE, \"\\t.long _GLOBAL_OFFSET_TABLE_+[.-%s%d]\\n\", LPREFIX, VALUE)\n+\n /* A C expression to output text to align the location counter in the\n    way that is desirable at a point in the code that is reached only\n    by jumping."}]}