{"sha": "d5e33619bf7766bcd1419da6d32780199db8df86", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDVlMzM2MTliZjc3NjZiY2QxNDE5ZGE2ZDMyNzgwMTk5ZGI4ZGY4Ng==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2018-10-31T12:58:45Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2018-10-31T12:58:45Z"}, "message": "More testing for std::pair layout change\n\n\t* testsuite/20_util/pair/87822.cc: Test deeper nesting.\n\nFrom-SVN: r265680", "tree": {"sha": "3ac38f11e94ba8e66d04c275f3c60048dd01544d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ac38f11e94ba8e66d04c275f3c60048dd01544d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d5e33619bf7766bcd1419da6d32780199db8df86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5e33619bf7766bcd1419da6d32780199db8df86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5e33619bf7766bcd1419da6d32780199db8df86", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5e33619bf7766bcd1419da6d32780199db8df86/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8e82c473f504c32c840daf09a347795b62b46fa3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e82c473f504c32c840daf09a347795b62b46fa3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e82c473f504c32c840daf09a347795b62b46fa3"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "9fb18de67d78bba53913ab79aabe97febd26ff45", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5e33619bf7766bcd1419da6d32780199db8df86/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5e33619bf7766bcd1419da6d32780199db8df86/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=d5e33619bf7766bcd1419da6d32780199db8df86", "patch": "@@ -1,5 +1,7 @@\n 2018-10-31  Jonathan Wakely  <jwakely@redhat.com>\n \n+\t* testsuite/20_util/pair/87822.cc: Test deeper nesting.\n+\n \tPR libstdc++/87822\n \t* include/bits/stl_pair.h (__pair_base): Change to class template.\n \t(pair): Make base class type depend on template parameters."}, {"sha": "523d583f08a84afbb4d569d63b98af57c7c957e5", "filename": "libstdc++-v3/testsuite/20_util/pair/87822.cc", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5e33619bf7766bcd1419da6d32780199db8df86/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fpair%2F87822.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5e33619bf7766bcd1419da6d32780199db8df86/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fpair%2F87822.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fpair%2F87822.cc?ref=d5e33619bf7766bcd1419da6d32780199db8df86", "patch": "@@ -26,6 +26,7 @@ test01()\n   static_assert(sizeof(p) == (3 * sizeof(int)), \"PR libstdc++/87822\");\n #endif\n   VERIFY( (void*)&p == (void*)&p.first );\n+  VERIFY( (void*)&p == (void*)&p.first.first );\n }\n \n struct empty { };\n@@ -40,8 +41,24 @@ test02()\n   VERIFY( (void*)&p == (void*)&p.first );\n }\n \n+void\n+test03()\n+{\n+  typedef std::pair<int, int> int_pair;\n+  typedef std::pair<int_pair, int_pair> int_pair_pair;\n+  std::pair<int_pair_pair, int_pair_pair> p;\n+#if __cplusplus >= 201103L\n+  static_assert(sizeof(int_pair_pair) == (2 * sizeof(int_pair)), \"nested\");\n+  static_assert(sizeof(p) == (2 * sizeof(int_pair_pair)), \"nested again\");\n+#endif\n+  VERIFY( (void*)&p == (void*)&p.first );\n+  VERIFY( (void*)&p == (void*)&p.first.first );\n+  VERIFY( (void*)&p == (void*)&p.first.first.first );\n+}\n+\n int main()\n {\n   test01();\n   test02();\n+  test03();\n }"}]}