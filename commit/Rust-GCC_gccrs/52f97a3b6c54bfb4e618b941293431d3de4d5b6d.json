{"sha": "52f97a3b6c54bfb4e618b941293431d3de4d5b6d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTJmOTdhM2I2YzU0YmZiNGU2MThiOTQxMjkzNDMxZDNkZTRkNWI2ZA==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@redhat.com", "date": "2003-06-10T14:45:44Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2003-06-10T14:45:44Z"}, "message": "Improve support for arm-wince-pe target:\n\n\t* config.gcc: Add arm-wince-pe target.\n\t* config/arm/pe.h (MULTILIB_DEFAULTS): Define.\n        Add comment about default apcs26 support.\n\t* config/arm/t-pe (MULTILIB_OPTIONS): Add an -mapcs-32\n\tmultilib.\n        (MULTILIB_DIRNAMES): Add 'apcs32'.\n\t* config/arm/t-wince-pe: New makefile fragment.\n\t* config/arm/wince-pe.h: New file.  Overrides a few definitions\n\tin arm/pe.h\n\nFrom-SVN: r67705", "tree": {"sha": "652e1204cc12205f2dbc513c2a5202c4a8834383", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/652e1204cc12205f2dbc513c2a5202c4a8834383"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/52f97a3b6c54bfb4e618b941293431d3de4d5b6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52f97a3b6c54bfb4e618b941293431d3de4d5b6d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52f97a3b6c54bfb4e618b941293431d3de4d5b6d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/comments", "author": {"login": "nickclifton", "id": 31441682, "node_id": "MDQ6VXNlcjMxNDQxNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickclifton", "html_url": "https://github.com/nickclifton", "followers_url": "https://api.github.com/users/nickclifton/followers", "following_url": "https://api.github.com/users/nickclifton/following{/other_user}", "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions", "organizations_url": "https://api.github.com/users/nickclifton/orgs", "repos_url": "https://api.github.com/users/nickclifton/repos", "events_url": "https://api.github.com/users/nickclifton/events{/privacy}", "received_events_url": "https://api.github.com/users/nickclifton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "01b759aaf01f2c0f9fc93ebba7b369eaee7d80eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01b759aaf01f2c0f9fc93ebba7b369eaee7d80eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01b759aaf01f2c0f9fc93ebba7b369eaee7d80eb"}], "stats": {"total": 98, "additions": 95, "deletions": 3}, "files": [{"sha": "971ca02a9e5070b6b3dc73592dfc4743594f8a6f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=52f97a3b6c54bfb4e618b941293431d3de4d5b6d", "patch": "@@ -1,3 +1,15 @@\n+2003-06-10  Nick Clifton  <nickc@redhat.com>\n+\n+\t* config.gcc: Add arm-wince-pe target.\n+\t* config/arm/pe.h (MULTILIB_DEFAULTS): Define.\n+        Add comment about default apcs26 support.\n+\t* config/arm/t-pe (MULTILIB_OPTIONS): Add an -mapcs-32\n+\tmultilib.\n+        (MULTILIB_DIRNAMES): Add 'apcs32'.\n+\t* config/arm/t-wince-pe: New makefile fragment.\n+\t* config/arm/wince-pe.h: New file.  Overrides a few definitions\n+\tin arm/pe.h\n+\n 2003-06-10  Roger Sayle  <roger@eyesopen.com>\n \n \t* builtins.c (fold_builtin): Optimize cos(-x) as cos(x)."}, {"sha": "d2abc8b6bd4a9a85379077fe383d5a86302a61a5", "filename": "gcc/config.gcc", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=52f97a3b6c54bfb4e618b941293431d3de4d5b6d", "patch": "@@ -695,6 +695,11 @@ arm*-*-elf | ep9312-*-elf)\n \ttm_file=\"dbxelf.h elfos.h arm/unknown-elf.h arm/elf.h arm/aout.h arm/arm.h\"\n \ttmake_file=arm/t-arm-elf\n \t;;\n+arm*-wince-pe*)\n+\ttm_file=\"arm/semi.h arm/aout.h arm/arm.h arm/coff.h arm/pe.h arm/wince-pe.h\"\n+\ttmake_file=arm/t-wince-pe\n+\textra_objs=\"pe.o\"\n+\t;;\n arm-*-pe*)\n \ttm_file=\"arm/semi.h arm/aout.h arm/arm.h arm/coff.h arm/pe.h\"\n \ttmake_file=arm/t-pe"}, {"sha": "a8ca0d475436732c47689d94084676d0c392b040", "filename": "gcc/config/arm/pe.h", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2Fconfig%2Farm%2Fpe.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2Fconfig%2Farm%2Fpe.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fpe.h?ref=52f97a3b6c54bfb4e618b941293431d3de4d5b6d", "patch": "@@ -65,9 +65,18 @@\n   N_(\"Ignore dllimport attribute for functions\") },\t\t\\\n { \"no-nop-fun-dllimport\",\t- TARGET_FLAG_NOP_FUN, \"\" },\n \n+/* Defaulting to APCS-26 support is a legacy issue.   It has been done\n+   that way for a long time, so changing it will probably break some\n+   people's worlds.  Support for APCS-32 is now enabled as a multilib,\n+   and at some point in the future APCS-32 may become the default.\n+   Possibly when chips that support APCS-26 are no longer made.  */\n+\n #undef  TARGET_DEFAULT\n #define TARGET_DEFAULT\t(ARM_FLAG_SOFT_FLOAT | TARGET_FLAG_NOP_FUN)\n \n+#undef  MULTILIB_DEFAULTS\n+#define MULTILIB_DEFAULTS \\\n+  { \"marm\", \"mlittle-endian\", \"msoft-float\", \"mapcs-26\", \"mno-thumb-interwork\" }  \n \f\n #undef  WCHAR_TYPE\n #define WCHAR_TYPE \t\"short unsigned int\"\n@@ -92,7 +101,7 @@\n #define SUPPORTS_ONE_ONLY 1\n \n /* Switch into a generic section.  */\n-#undef TARGET_ASM_NAMED_SECTION\n+#undef  TARGET_ASM_NAMED_SECTION\n #define TARGET_ASM_NAMED_SECTION  default_pe_asm_named_section\n \f\n /* This outputs a lot of .req's to define alias for various registers."}, {"sha": "4c20b31797350e342ead88dff80a38116f9478d5", "filename": "gcc/config/arm/t-pe", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2Fconfig%2Farm%2Ft-pe", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2Fconfig%2Farm%2Ft-pe", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Ft-pe?ref=52f97a3b6c54bfb4e618b941293431d3de4d5b6d", "patch": "@@ -24,8 +24,8 @@ pe.o: $(srcdir)/config/arm/pe.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) \\\n   $(RTL_H) output.h flags.h $(TREE_H) expr.h toplev.h $(TM_P_H)\n \t$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) $(srcdir)/config/arm/pe.c\n \n-MULTILIB_OPTIONS = mhard-float mthumb\n-MULTILIB_DIRNAMES = fpu thumb\n+MULTILIB_OPTIONS = mhard-float mthumb mapcs-32\n+MULTILIB_DIRNAMES = fpu thumb apcs32\n \n LIBGCC = stmp-multilib\n INSTALL_LIBGCC = install-multilib"}, {"sha": "9537a7f75eda96145fbd5cc9bfdd52a13cea22e2", "filename": "gcc/config/arm/t-wince-pe", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2Fconfig%2Farm%2Ft-wince-pe", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2Fconfig%2Farm%2Ft-wince-pe", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Ft-wince-pe?ref=52f97a3b6c54bfb4e618b941293431d3de4d5b6d", "patch": "@@ -0,0 +1,37 @@\n+LIB1ASMSRC = arm/lib1funcs.asm\n+LIB1ASMFUNCS = _udivsi3 _divsi3 _umodsi3 _modsi3 _dvmd_tls _call_via_rX _interwork_call_via_rX\n+\n+# We want fine grained libraries, so use the new code to build the\n+# floating point emulation libraries.\n+FPBIT = fp-bit.c\n+DPBIT = dp-bit.c\n+\n+fp-bit.c: $(srcdir)/config/fp-bit.c\n+\techo '#define FLOAT' > fp-bit.c\n+\techo '#ifndef __ARMEB__' >> fp-bit.c\n+\techo '#define FLOAT_BIT_ORDER_MISMATCH' >> fp-bit.c\n+\techo '#endif' >> fp-bit.c\n+\tcat $(srcdir)/config/fp-bit.c >> fp-bit.c\n+\n+dp-bit.c: $(srcdir)/config/fp-bit.c\n+\techo '#ifndef __ARMEB__' > dp-bit.c\n+\techo '#define FLOAT_BIT_ORDER_MISMATCH' >> dp-bit.c\n+\techo '#define FLOAT_WORD_ORDER_MISMATCH' >> dp-bit.c\n+\techo '#endif' >> dp-bit.c\n+\tcat $(srcdir)/config/fp-bit.c >> dp-bit.c\n+\n+pe.o: $(srcdir)/config/arm/pe.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) \\\n+  $(RTL_H) output.h flags.h $(TREE_H) expr.h toplev.h $(TM_P_H)\n+\t$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) $(srcdir)/config/arm/pe.c\n+\n+MULTILIB_OPTIONS = mhard-float mapcs-26\n+MULTILIB_DIRNAMES = fpu apcs26\n+# Note - Thumb multilib omitted because Thumb apcs32 support for\n+# arm-wince-pe target does not appear to be working in binutils\n+# yet... \n+# MULTILIB_OPTIONS += thumb\n+# MULTILIB_DIRNAMES += thumb\n+\n+LIBGCC = stmp-multilib\n+INSTALL_LIBGCC = install-multilib\n+TARGET_LIBGCC2_CFLAGS = -Dinhibit_libc"}, {"sha": "feed1337c903bfd7c3521e6a8a3edf6494bd4d45", "filename": "gcc/config/arm/wince-pe.h", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2Fconfig%2Farm%2Fwince-pe.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52f97a3b6c54bfb4e618b941293431d3de4d5b6d/gcc%2Fconfig%2Farm%2Fwince-pe.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fwince-pe.h?ref=52f97a3b6c54bfb4e618b941293431d3de4d5b6d", "patch": "@@ -0,0 +1,29 @@\n+/* Definitions of target machine for GNU compiler, for ARM with WINCE-PE obj format.\n+   Copyright (C) 2003 Free Software Foundation, Inc.\n+   Contributed by Nick Clifton <nickc@redhat.com>\n+   \n+   This file is part of GCC.\n+\n+   GCC is free software; you can redistribute it and/or modify it\n+   under the terms of the GNU General Public License as published\n+   by the Free Software Foundation; either version 2, or (at your\n+   option) any later version.\n+\n+   GCC is distributed in the hope that it will be useful, but WITHOUT\n+   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n+   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n+   License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with GCC; see the file COPYING.  If not, write to\n+   the Free Software Foundation, 59 Temple Place - Suite 330,\n+   Boston, MA 02111-1307, USA.  */\n+\n+/* Override arm/pe.h's default apcs26 support.  */\n+\n+#undef  TARGET_DEFAULT\n+#define TARGET_DEFAULT\t(ARM_FLAG_APCS_32 | ARM_FLAG_SOFT_FLOAT | TARGET_FLAG_NOP_FUN)\n+\n+#undef  MULTILIB_DEFAULTS\n+#define MULTILIB_DEFAULTS \\\n+  { \"marm\", \"mlittle-endian\", \"msoft-float\", \"mapcs-32\", \"mno-thumb-interwork\" }  "}]}