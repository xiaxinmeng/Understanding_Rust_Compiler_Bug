{"sha": "d8b962d80e8388a84aec13593b8b169446c547cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDhiOTYyZDgwZTgzODhhODRhZWMxMzU5M2I4YjE2OTQ0NmM1NDdjYg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-02T10:14:09Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-02T10:14:09Z"}, "message": "[multiple changes]\n\n2011-08-02  Robert Dewar  <dewar@adacore.com>\n\n\t* einfo.adb (Is_Base_Type): Improve efficiency by using a flag table\n\t(Base_Type): Now uses improved Is_Base_Type function\n\t* einfo.ads (Base_Type): Inline this function\n\n2011-08-02  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_prag.adb (Analyze_Pragma): Defend against infinite recursion\n\t(Analyze_Aspect_Specifications): Fix Sloc values for constructed pragmas\n\n2011-08-02  Arnaud Charlet  <charlet@adacore.com>\n\n\t* gcc-interface/Make-lang.in: Update dependencies.\n\t* gcc-interface/Makefile.in: Use s-inmapop-vxworks.adb for all VxWorks\n\ttargets.\n\n2011-08-02  Yannick Moy  <moy@adacore.com>\n\n\t* par-ch3.adb (P_Delta_Constraint): issue an error in formal mode on\n\tnon-simple expression used in delta constraint\n\t(P_Index_Or_Discriminant_Constraint): issue an error in formal mode on\n\tindex constraint which is not a subtype mark\n\t* par.adb: With and use Restrict\n\t* sem_ch3.adb (Analyze_Component_Declaration): issue an error in formal\n\tmode on component type which is not a subtype mark and default\n\texpression on component\n\t(Analyze_Subtype_Declaration): issue an error in formal mode on subtype\n\tof string which does not have a lower index bound equal to 1\n\t(Array_Type_Declaration): issue an error in formal mode on index or\n\tcomponent type which is not a subtype mark, and on aliased keyword on\n\tcomponent\n\t(Derived_Type_Declaration): issue an error in formal mode on interface,\n\tlimited or abstract type\n\t(Record_Type_Declaration): issue an error in formal mode on interface\n\t(Record_Type_Definition): issue an error in formal mode on tagged types\n\tand type extensions not declared in the specification of a library unit\n\tpackage; on null non-tagged record; on variant part\n\n2011-08-02  Vincent Celier  <celier@adacore.com>\n\n\t* prj-nmsc.adb (Check_Library_Attributes): Do not report Library_Dir\n\tnot declared for qualified library project when Library_Name is not\n\tdeclared, but Library_Dir is.\n\n2011-08-02  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_ch13.adb (Analyze_Aspect_Specification): Fix slocs on generated\n\tpragmas (affects aspects [Component_]Default_Value\n\t(Check_Aspect_At_Freeze_Point): For Component_Default_Value, use\n\tcomponent type for the resolution\n\nFrom-SVN: r177123", "tree": {"sha": "36460c0e6a9af89bf4c30fcf1ece854d4e7f43aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/36460c0e6a9af89bf4c30fcf1ece854d4e7f43aa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8b962d80e8388a84aec13593b8b169446c547cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8b962d80e8388a84aec13593b8b169446c547cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8b962d80e8388a84aec13593b8b169446c547cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8b962d80e8388a84aec13593b8b169446c547cb/comments", "author": null, "committer": null, "parents": [{"sha": "f96b2d8594d3ae2352d7f8356336b1411ba14e3b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f96b2d8594d3ae2352d7f8356336b1411ba14e3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f96b2d8594d3ae2352d7f8356336b1411ba14e3b"}], "stats": {"total": 594, "additions": 386, "deletions": 208}, "files": [{"sha": "ffee3e4e57960fdc17c151f00144519df37de768", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=d8b962d80e8388a84aec13593b8b169446c547cb", "patch": "@@ -1,3 +1,55 @@\n+2011-08-02  Robert Dewar  <dewar@adacore.com>\n+\n+\t* einfo.adb (Is_Base_Type): Improve efficiency by using a flag table\n+\t(Base_Type): Now uses improved Is_Base_Type function\n+\t* einfo.ads (Base_Type): Inline this function\n+\n+2011-08-02  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_prag.adb (Analyze_Pragma): Defend against infinite recursion\n+\t(Analyze_Aspect_Specifications): Fix Sloc values for constructed pragmas\n+\n+2011-08-02  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* gcc-interface/Make-lang.in: Update dependencies.\n+\t* gcc-interface/Makefile.in: Use s-inmapop-vxworks.adb for all VxWorks\n+\ttargets.\n+\n+2011-08-02  Yannick Moy  <moy@adacore.com>\n+\n+\t* par-ch3.adb (P_Delta_Constraint): issue an error in formal mode on\n+\tnon-simple expression used in delta constraint\n+\t(P_Index_Or_Discriminant_Constraint): issue an error in formal mode on\n+\tindex constraint which is not a subtype mark\n+\t* par.adb: With and use Restrict\n+\t* sem_ch3.adb (Analyze_Component_Declaration): issue an error in formal\n+\tmode on component type which is not a subtype mark and default\n+\texpression on component\n+\t(Analyze_Subtype_Declaration): issue an error in formal mode on subtype\n+\tof string which does not have a lower index bound equal to 1\n+\t(Array_Type_Declaration): issue an error in formal mode on index or\n+\tcomponent type which is not a subtype mark, and on aliased keyword on\n+\tcomponent\n+\t(Derived_Type_Declaration): issue an error in formal mode on interface,\n+\tlimited or abstract type\n+\t(Record_Type_Declaration): issue an error in formal mode on interface\n+\t(Record_Type_Definition): issue an error in formal mode on tagged types\n+\tand type extensions not declared in the specification of a library unit\n+\tpackage; on null non-tagged record; on variant part\n+\n+2011-08-02  Vincent Celier  <celier@adacore.com>\n+\n+\t* prj-nmsc.adb (Check_Library_Attributes): Do not report Library_Dir\n+\tnot declared for qualified library project when Library_Name is not\n+\tdeclared, but Library_Dir is.\n+\n+2011-08-02  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_ch13.adb (Analyze_Aspect_Specification): Fix slocs on generated\n+\tpragmas (affects aspects [Component_]Default_Value\n+\t(Check_Aspect_At_Freeze_Point): For Component_Default_Value, use\n+\tcomponent type for the resolution\n+\n 2011-08-02  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* einfo.adb (Base_Type): Tune implementation for speed."}, {"sha": "c66b35a5764644f91cd204f754ae145f4f791b7b", "filename": "gcc/ada/einfo.adb", "status": "modified", "additions": 28, "deletions": 35, "changes": 63, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Feinfo.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Feinfo.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.adb?ref=d8b962d80e8388a84aec13593b8b169446c547cb", "patch": "@@ -5608,43 +5608,13 @@ package body Einfo is\n    ---------------\n \n    function Base_Type (Id : E) return E is\n-      Is_Base_Type : Boolean;\n    begin\n-      --  Implementation note: this function shows up high in the profile.\n-      --  We use a fully static case construct so as to make it easier for\n-      --  the compiler to build a static table out of it, instead of using\n-      --  a less efficient jump table.\n-\n-      case Ekind (Id) is\n-         when E_Enumeration_Subtype          |\n-              E_Incomplete_Type              |\n-              E_Signed_Integer_Subtype       |\n-              E_Modular_Integer_Subtype      |\n-              E_Floating_Point_Subtype       |\n-              E_Ordinary_Fixed_Point_Subtype |\n-              E_Decimal_Fixed_Point_Subtype  |\n-              E_Array_Subtype                |\n-              E_String_Subtype               |\n-              E_Record_Subtype               |\n-              E_Private_Subtype              |\n-              E_Record_Subtype_With_Private  |\n-              E_Limited_Private_Subtype      |\n-              E_Access_Subtype               |\n-              E_Protected_Subtype            |\n-              E_Task_Subtype                 |\n-              E_String_Literal_Subtype       |\n-              E_Class_Wide_Subtype           =>\n-            Is_Base_Type := False;\n-\n-         when others =>\n-            Is_Base_Type := True;\n-      end case;\n-\n-      if Is_Base_Type then\n+      if Is_Base_Type (Id) then\n          return Id;\n+      else\n+         pragma Assert (Is_Type (Id));\n+         return Etype (Id);\n       end if;\n-\n-      return Etype (Id);\n    end Base_Type;\n \n    -------------------------\n@@ -6206,9 +6176,32 @@ package body Einfo is\n    -- Is_Base_Type --\n    ------------------\n \n+   --  Global flag table allowing rapid computation of this function\n+\n+   Entity_Is_Base_Type : constant array (Entity_Kind) of Boolean :=\n+                           (E_Enumeration_Subtype          |\n+                            E_Incomplete_Type              |\n+                            E_Signed_Integer_Subtype       |\n+                            E_Modular_Integer_Subtype      |\n+                            E_Floating_Point_Subtype       |\n+                            E_Ordinary_Fixed_Point_Subtype |\n+                            E_Decimal_Fixed_Point_Subtype  |\n+                            E_Array_Subtype                |\n+                            E_String_Subtype               |\n+                            E_Record_Subtype               |\n+                            E_Private_Subtype              |\n+                            E_Record_Subtype_With_Private  |\n+                            E_Limited_Private_Subtype      |\n+                            E_Access_Subtype               |\n+                            E_Protected_Subtype            |\n+                            E_Task_Subtype                 |\n+                            E_String_Literal_Subtype       |\n+                            E_Class_Wide_Subtype           => False,\n+                            others                         => True);\n+\n    function Is_Base_Type (Id : E) return Boolean is\n    begin\n-      return Id = Base_Type (Id);\n+      return Entity_Is_Base_Type (Ekind (Id));\n    end Is_Base_Type;\n \n    ---------------------"}, {"sha": "a69ba1ac1ce8136200ccb431482f68831583c92b", "filename": "gcc/ada/einfo.ads", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Feinfo.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Feinfo.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.ads?ref=d8b962d80e8388a84aec13593b8b169446c547cb", "patch": "@@ -8010,6 +8010,7 @@ package Einfo is\n    --  things here which are small, but not of the canonical attribute\n    --  access/set format that can be handled by xeinfo.\n \n+   pragma Inline (Base_Type);\n    pragma Inline (Is_Base_Type);\n    pragma Inline (Is_Package_Or_Generic_Package);\n    pragma Inline (Is_Volatile);"}, {"sha": "7e43d966f9852b87dd510de1595264bcea75b3f6", "filename": "gcc/ada/gcc-interface/Make-lang.in", "status": "modified", "additions": 149, "deletions": 146, "changes": 295, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMake-lang.in?ref=d8b962d80e8388a84aec13593b8b169446c547cb", "patch": "@@ -1514,22 +1514,22 @@ ada/cstand.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/g-htable.ads ada/hostparm.ads ada/interfac.ads ada/layout.ads \\\n    ada/lib.ads ada/lib-xref.ads ada/namet.ads ada/namet.adb ada/nlists.ads \\\n    ada/nlists.adb ada/nmake.ads ada/nmake.adb ada/opt.ads ada/output.ads \\\n-   ada/rident.ads ada/rtsfind.ads ada/scans.ads ada/scn.ads ada/scng.ads \\\n-   ada/scng.adb ada/sem.ads ada/sem_attr.ads ada/sem_aux.ads \\\n-   ada/sem_ch8.ads ada/sem_disp.ads ada/sem_eval.ads ada/sem_mech.ads \\\n-   ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads ada/sem_util.adb \\\n-   ada/sinfo.ads ada/sinfo.adb ada/sinput.ads ada/sinput.adb \\\n-   ada/snames.ads ada/stand.ads ada/stringt.ads ada/style.ads \\\n-   ada/styleg.ads ada/styleg.adb ada/stylesw.ads ada/system.ads \\\n-   ada/s-crc32.ads ada/s-crc32.adb ada/s-exctab.ads ada/s-htable.ads \\\n-   ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads \\\n-   ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads \\\n-   ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads \\\n-   ada/s-traent.ads ada/s-unstyp.ads ada/s-utf_32.ads ada/s-wchcon.ads \\\n-   ada/table.ads ada/table.adb ada/targparm.ads ada/tbuild.ads \\\n-   ada/tree_io.ads ada/ttypes.ads ada/types.ads ada/uintp.ads \\\n-   ada/uintp.adb ada/uname.ads ada/unchconv.ads ada/unchdeal.ads \\\n-   ada/urealp.ads ada/urealp.adb ada/widechar.ads \n+   ada/restrict.ads ada/rident.ads ada/rtsfind.ads ada/scans.ads \\\n+   ada/scn.ads ada/scng.ads ada/scng.adb ada/sem.ads ada/sem_attr.ads \\\n+   ada/sem_aux.ads ada/sem_ch8.ads ada/sem_disp.ads ada/sem_eval.ads \\\n+   ada/sem_mech.ads ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads \\\n+   ada/sem_util.adb ada/sinfo.ads ada/sinfo.adb ada/sinput.ads \\\n+   ada/sinput.adb ada/snames.ads ada/stand.ads ada/stringt.ads \\\n+   ada/style.ads ada/styleg.ads ada/styleg.adb ada/stylesw.ads \\\n+   ada/system.ads ada/s-crc32.ads ada/s-crc32.adb ada/s-exctab.ads \\\n+   ada/s-htable.ads ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads \\\n+   ada/s-parame.ads ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads \\\n+   ada/s-stache.ads ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb \\\n+   ada/s-string.ads ada/s-traent.ads ada/s-unstyp.ads ada/s-utf_32.ads \\\n+   ada/s-wchcon.ads ada/table.ads ada/table.adb ada/targparm.ads \\\n+   ada/tbuild.ads ada/tree_io.ads ada/ttypes.ads ada/types.ads \\\n+   ada/uintp.ads ada/uintp.adb ada/uname.ads ada/unchconv.ads \\\n+   ada/unchdeal.ads ada/urealp.ads ada/urealp.adb ada/widechar.ads \n \n ada/debug.o : ada/debug.ads ada/debug.adb ada/system.ads \n \n@@ -1638,22 +1638,23 @@ ada/exp_aggr.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/nlists.ads ada/nlists.adb ada/nmake.ads ada/nmake.adb ada/opt.ads \\\n    ada/output.ads ada/restrict.ads ada/restrict.adb ada/rident.ads \\\n    ada/rtsfind.ads ada/rtsfind.adb ada/scans.ads ada/sem.ads \\\n-   ada/sem_attr.ads ada/sem_aux.ads ada/sem_cat.ads ada/sem_ch3.ads \\\n-   ada/sem_ch6.ads ada/sem_ch7.ads ada/sem_ch8.ads ada/sem_disp.ads \\\n-   ada/sem_dist.ads ada/sem_eval.ads ada/sem_eval.adb ada/sem_prag.ads \\\n-   ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads ada/sem_util.adb \\\n-   ada/sem_warn.ads ada/sinfo.ads ada/sinfo.adb ada/sinput.ads \\\n-   ada/snames.ads ada/sprint.ads ada/stand.ads ada/stringt.ads \\\n-   ada/stringt.adb ada/style.ads ada/styleg.ads ada/styleg.adb \\\n-   ada/stylesw.ads ada/system.ads ada/s-exctab.ads ada/s-exctab.adb \\\n-   ada/s-htable.ads ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads \\\n-   ada/s-parame.ads ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads \\\n-   ada/s-stache.ads ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb \\\n-   ada/s-string.ads ada/s-traent.ads ada/s-unstyp.ads ada/s-wchcon.ads \\\n-   ada/table.ads ada/table.adb ada/targparm.ads ada/tbuild.ads \\\n-   ada/tbuild.adb ada/tree_io.ads ada/ttypes.ads ada/types.ads \\\n-   ada/uintp.ads ada/uintp.adb ada/uname.ads ada/unchconv.ads \\\n-   ada/unchdeal.ads ada/urealp.ads ada/validsw.ads ada/widechar.ads \n+   ada/sem_aggr.ads ada/sem_attr.ads ada/sem_aux.ads ada/sem_cat.ads \\\n+   ada/sem_ch3.ads ada/sem_ch6.ads ada/sem_ch7.ads ada/sem_ch8.ads \\\n+   ada/sem_disp.ads ada/sem_dist.ads ada/sem_eval.ads ada/sem_eval.adb \\\n+   ada/sem_prag.ads ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads \\\n+   ada/sem_util.adb ada/sem_warn.ads ada/sinfo.ads ada/sinfo.adb \\\n+   ada/sinput.ads ada/snames.ads ada/sprint.ads ada/stand.ads \\\n+   ada/stringt.ads ada/stringt.adb ada/style.ads ada/styleg.ads \\\n+   ada/styleg.adb ada/stylesw.ads ada/system.ads ada/s-exctab.ads \\\n+   ada/s-exctab.adb ada/s-htable.ads ada/s-imenne.ads ada/s-memory.ads \\\n+   ada/s-os_lib.ads ada/s-parame.ads ada/s-rident.ads ada/s-secsta.ads \\\n+   ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads ada/s-stoele.ads \\\n+   ada/s-stoele.adb ada/s-string.ads ada/s-traent.ads ada/s-unstyp.ads \\\n+   ada/s-wchcon.ads ada/table.ads ada/table.adb ada/targparm.ads \\\n+   ada/tbuild.ads ada/tbuild.adb ada/tree_io.ads ada/ttypes.ads \\\n+   ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n+   ada/unchconv.ads ada/unchdeal.ads ada/urealp.ads ada/validsw.ads \\\n+   ada/widechar.ads \n \n ada/exp_atag.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/a-uncdea.ads ada/alloc.ads ada/aspects.ads ada/atree.ads \\\n@@ -2023,22 +2024,22 @@ ada/exp_code.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/interfac.ads ada/lib.ads ada/lib.adb ada/lib-list.adb \\\n    ada/lib-sort.adb ada/lib-xref.ads ada/namet.ads ada/namet.adb \\\n    ada/nlists.ads ada/nlists.adb ada/nmake.ads ada/nmake.adb ada/opt.ads \\\n-   ada/output.ads ada/rident.ads ada/rtsfind.ads ada/scans.ads ada/sem.ads \\\n-   ada/sem_attr.ads ada/sem_aux.ads ada/sem_cat.ads ada/sem_ch6.ads \\\n-   ada/sem_ch8.ads ada/sem_disp.ads ada/sem_eval.ads ada/sem_eval.adb \\\n-   ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads ada/sem_util.adb \\\n-   ada/sem_warn.ads ada/sinfo.ads ada/sinfo.adb ada/sinput.ads \\\n-   ada/snames.ads ada/stand.ads ada/stringt.ads ada/stringt.adb \\\n-   ada/style.ads ada/styleg.ads ada/styleg.adb ada/stylesw.ads \\\n-   ada/system.ads ada/s-carun8.ads ada/s-exctab.ads ada/s-htable.ads \\\n-   ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads \\\n-   ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads \\\n-   ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads \\\n-   ada/s-traent.ads ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads \\\n-   ada/table.adb ada/targparm.ads ada/tbuild.ads ada/tree_io.ads \\\n-   ada/ttypes.ads ada/types.ads ada/types.adb ada/uintp.ads ada/uintp.adb \\\n-   ada/uname.ads ada/unchconv.ads ada/unchdeal.ads ada/urealp.ads \\\n-   ada/widechar.ads \n+   ada/output.ads ada/restrict.ads ada/rident.ads ada/rtsfind.ads \\\n+   ada/scans.ads ada/sem.ads ada/sem_attr.ads ada/sem_aux.ads \\\n+   ada/sem_cat.ads ada/sem_ch6.ads ada/sem_ch8.ads ada/sem_disp.ads \\\n+   ada/sem_eval.ads ada/sem_eval.adb ada/sem_res.ads ada/sem_type.ads \\\n+   ada/sem_util.ads ada/sem_util.adb ada/sem_warn.ads ada/sinfo.ads \\\n+   ada/sinfo.adb ada/sinput.ads ada/snames.ads ada/stand.ads \\\n+   ada/stringt.ads ada/stringt.adb ada/style.ads ada/styleg.ads \\\n+   ada/styleg.adb ada/stylesw.ads ada/system.ads ada/s-carun8.ads \\\n+   ada/s-exctab.ads ada/s-htable.ads ada/s-imenne.ads ada/s-memory.ads \\\n+   ada/s-os_lib.ads ada/s-parame.ads ada/s-rident.ads ada/s-secsta.ads \\\n+   ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads ada/s-stoele.ads \\\n+   ada/s-stoele.adb ada/s-string.ads ada/s-traent.ads ada/s-unstyp.ads \\\n+   ada/s-wchcon.ads ada/table.ads ada/table.adb ada/targparm.ads \\\n+   ada/tbuild.ads ada/tree_io.ads ada/ttypes.ads ada/types.ads \\\n+   ada/types.adb ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n+   ada/unchconv.ads ada/unchdeal.ads ada/urealp.ads ada/widechar.ads \n \n ada/exp_dbug.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/a-uncdea.ads ada/alloc.ads ada/aspects.ads ada/atree.ads \\\n@@ -2123,20 +2124,20 @@ ada/exp_fixd.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/gnat.ads ada/g-htable.ads ada/hostparm.ads ada/interfac.ads \\\n    ada/lib.ads ada/lib-xref.ads ada/namet.ads ada/namet.adb ada/nlists.ads \\\n    ada/nlists.adb ada/nmake.ads ada/nmake.adb ada/opt.ads ada/output.ads \\\n-   ada/rident.ads ada/rtsfind.ads ada/scans.ads ada/sem.ads \\\n-   ada/sem_attr.ads ada/sem_aux.ads ada/sem_cat.ads ada/sem_ch6.ads \\\n-   ada/sem_ch8.ads ada/sem_disp.ads ada/sem_eval.ads ada/sem_eval.adb \\\n-   ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads ada/sem_util.adb \\\n-   ada/sem_warn.ads ada/sinfo.ads ada/sinfo.adb ada/sinput.ads \\\n-   ada/snames.ads ada/stand.ads ada/stringt.ads ada/stringt.adb \\\n-   ada/style.ads ada/styleg.ads ada/styleg.adb ada/stylesw.ads \\\n-   ada/system.ads ada/s-exctab.ads ada/s-htable.ads ada/s-imenne.ads \\\n-   ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads ada/s-rident.ads \\\n-   ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads \\\n-   ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads ada/s-traent.ads \\\n-   ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads ada/table.adb \\\n-   ada/targparm.ads ada/tbuild.ads ada/tree_io.ads ada/ttypes.ads \\\n-   ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n+   ada/restrict.ads ada/rident.ads ada/rtsfind.ads ada/scans.ads \\\n+   ada/sem.ads ada/sem_attr.ads ada/sem_aux.ads ada/sem_cat.ads \\\n+   ada/sem_ch6.ads ada/sem_ch8.ads ada/sem_disp.ads ada/sem_eval.ads \\\n+   ada/sem_eval.adb ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads \\\n+   ada/sem_util.adb ada/sem_warn.ads ada/sinfo.ads ada/sinfo.adb \\\n+   ada/sinput.ads ada/snames.ads ada/stand.ads ada/stringt.ads \\\n+   ada/stringt.adb ada/style.ads ada/styleg.ads ada/styleg.adb \\\n+   ada/stylesw.ads ada/system.ads ada/s-exctab.ads ada/s-htable.ads \\\n+   ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads \\\n+   ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads \\\n+   ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads \\\n+   ada/s-traent.ads ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads \\\n+   ada/table.adb ada/targparm.ads ada/tbuild.ads ada/tree_io.ads \\\n+   ada/ttypes.ads ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n    ada/unchconv.ads ada/unchdeal.ads ada/urealp.ads ada/urealp.adb \\\n    ada/widechar.ads \n \n@@ -2409,25 +2410,24 @@ ada/freeze.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/atree.adb ada/casing.ads ada/checks.ads ada/csets.ads ada/debug.ads \\\n    ada/debug_a.ads ada/einfo.ads ada/einfo.adb ada/elists.ads \\\n    ada/elists.adb ada/err_vars.ads ada/errout.ads ada/erroutc.ads \\\n-   ada/eval_fat.ads ada/exp_aggr.ads ada/exp_ch11.ads ada/exp_ch3.ads \\\n-   ada/exp_ch6.ads ada/exp_ch7.ads ada/exp_disp.ads ada/exp_pakd.ads \\\n-   ada/exp_tss.ads ada/exp_util.ads ada/exp_util.adb ada/expander.ads \\\n-   ada/fname.ads ada/freeze.ads ada/freeze.adb ada/get_targ.ads \\\n-   ada/gnat.ads ada/g-hesorg.ads ada/g-htable.ads ada/hostparm.ads \\\n-   ada/inline.ads ada/interfac.ads ada/itypes.ads ada/layout.ads \\\n-   ada/lib.ads ada/lib.adb ada/lib-list.adb ada/lib-sort.adb \\\n-   ada/lib-xref.ads ada/namet.ads ada/namet.adb ada/nlists.ads \\\n-   ada/nlists.adb ada/nmake.ads ada/nmake.adb ada/opt.ads ada/output.ads \\\n-   ada/restrict.ads ada/rident.ads ada/rtsfind.ads ada/scans.ads \\\n-   ada/sem.ads ada/sem_aggr.ads ada/sem_attr.ads ada/sem_aux.ads \\\n-   ada/sem_cat.ads ada/sem_ch13.ads ada/sem_ch4.ads ada/sem_ch6.ads \\\n-   ada/sem_ch7.ads ada/sem_ch8.ads ada/sem_disp.ads ada/sem_dist.ads \\\n-   ada/sem_elab.ads ada/sem_elim.ads ada/sem_eval.ads ada/sem_eval.adb \\\n-   ada/sem_intr.ads ada/sem_mech.ads ada/sem_prag.ads ada/sem_res.ads \\\n-   ada/sem_res.adb ada/sem_type.ads ada/sem_util.ads ada/sem_util.adb \\\n-   ada/sem_warn.ads ada/sinfo.ads ada/sinfo.adb ada/sinfo-cn.ads \\\n-   ada/sinput.ads ada/snames.ads ada/stand.ads ada/stringt.ads \\\n-   ada/stringt.adb ada/style.ads ada/styleg.ads ada/styleg.adb \\\n+   ada/exp_aggr.ads ada/exp_ch11.ads ada/exp_ch3.ads ada/exp_ch6.ads \\\n+   ada/exp_ch7.ads ada/exp_disp.ads ada/exp_pakd.ads ada/exp_tss.ads \\\n+   ada/exp_util.ads ada/exp_util.adb ada/expander.ads ada/fname.ads \\\n+   ada/freeze.ads ada/freeze.adb ada/get_targ.ads ada/gnat.ads \\\n+   ada/g-hesorg.ads ada/g-htable.ads ada/hostparm.ads ada/inline.ads \\\n+   ada/interfac.ads ada/itypes.ads ada/layout.ads ada/lib.ads ada/lib.adb \\\n+   ada/lib-list.adb ada/lib-sort.adb ada/lib-xref.ads ada/namet.ads \\\n+   ada/namet.adb ada/nlists.ads ada/nlists.adb ada/nmake.ads ada/nmake.adb \\\n+   ada/opt.ads ada/output.ads ada/restrict.ads ada/rident.ads \\\n+   ada/rtsfind.ads ada/scans.ads ada/sem.ads ada/sem_aggr.ads \\\n+   ada/sem_attr.ads ada/sem_aux.ads ada/sem_cat.ads ada/sem_ch13.ads \\\n+   ada/sem_ch4.ads ada/sem_ch6.ads ada/sem_ch7.ads ada/sem_ch8.ads \\\n+   ada/sem_disp.ads ada/sem_dist.ads ada/sem_elab.ads ada/sem_elim.ads \\\n+   ada/sem_eval.ads ada/sem_intr.ads ada/sem_mech.ads ada/sem_prag.ads \\\n+   ada/sem_res.ads ada/sem_res.adb ada/sem_type.ads ada/sem_util.ads \\\n+   ada/sem_util.adb ada/sem_warn.ads ada/sinfo.ads ada/sinfo.adb \\\n+   ada/sinfo-cn.ads ada/sinput.ads ada/snames.ads ada/stand.ads \\\n+   ada/stringt.ads ada/style.ads ada/styleg.ads ada/styleg.adb \\\n    ada/stylesw.ads ada/system.ads ada/s-exctab.ads ada/s-exctab.adb \\\n    ada/s-htable.ads ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads \\\n    ada/s-parame.ads ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads \\\n@@ -2817,12 +2817,12 @@ ada/nmake.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/urealp.ads \n \n ada/opt.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads ada/a-uncdea.ads \\\n-   ada/debug.ads ada/gnatvsn.ads ada/hostparm.ads ada/opt.ads ada/opt.adb \\\n-   ada/system.ads ada/s-exctab.ads ada/s-os_lib.ads ada/s-parame.ads \\\n-   ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads \\\n-   ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads ada/s-traent.ads \\\n-   ada/s-unstyp.ads ada/s-wchcon.ads ada/tree_io.ads ada/types.ads \\\n-   ada/unchconv.ads ada/unchdeal.ads \n+   ada/gnatvsn.ads ada/hostparm.ads ada/opt.ads ada/opt.adb ada/system.ads \\\n+   ada/s-exctab.ads ada/s-os_lib.ads ada/s-parame.ads ada/s-secsta.ads \\\n+   ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads ada/s-stoele.ads \\\n+   ada/s-stoele.adb ada/s-string.ads ada/s-traent.ads ada/s-unstyp.ads \\\n+   ada/s-wchcon.ads ada/tree_io.ads ada/types.ads ada/unchconv.ads \\\n+   ada/unchdeal.ads \n \n ada/osint-b.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/a-uncdea.ads ada/alloc.ads ada/debug.ads ada/hostparm.ads \\\n@@ -3356,19 +3356,20 @@ ada/sem_cat.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/g-htable.ads ada/hostparm.ads ada/interfac.ads ada/lib.ads \\\n    ada/lib.adb ada/lib-list.adb ada/lib-sort.adb ada/lib-xref.ads \\\n    ada/namet.ads ada/namet.adb ada/nlists.ads ada/nlists.adb ada/nmake.ads \\\n-   ada/opt.ads ada/output.ads ada/rident.ads ada/rtsfind.ads ada/scans.ads \\\n-   ada/sem.ads ada/sem_attr.ads ada/sem_aux.ads ada/sem_cat.ads \\\n-   ada/sem_cat.adb ada/sem_ch8.ads ada/sem_disp.ads ada/sem_eval.ads \\\n-   ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads ada/sem_util.adb \\\n-   ada/sinfo.ads ada/sinfo.adb ada/sinput.ads ada/snames.ads ada/stand.ads \\\n-   ada/stringt.ads ada/style.ads ada/styleg.ads ada/styleg.adb \\\n-   ada/stylesw.ads ada/system.ads ada/s-exctab.ads ada/s-htable.ads \\\n-   ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads \\\n-   ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads \\\n-   ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads \\\n-   ada/s-traent.ads ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads \\\n-   ada/table.adb ada/targparm.ads ada/tbuild.ads ada/tree_io.ads \\\n-   ada/ttypes.ads ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n+   ada/opt.ads ada/output.ads ada/restrict.ads ada/rident.ads \\\n+   ada/rtsfind.ads ada/scans.ads ada/sem.ads ada/sem_attr.ads \\\n+   ada/sem_aux.ads ada/sem_cat.ads ada/sem_cat.adb ada/sem_ch8.ads \\\n+   ada/sem_disp.ads ada/sem_eval.ads ada/sem_res.ads ada/sem_type.ads \\\n+   ada/sem_util.ads ada/sem_util.adb ada/sinfo.ads ada/sinfo.adb \\\n+   ada/sinput.ads ada/snames.ads ada/stand.ads ada/stringt.ads \\\n+   ada/style.ads ada/styleg.ads ada/styleg.adb ada/stylesw.ads \\\n+   ada/system.ads ada/s-exctab.ads ada/s-htable.ads ada/s-imenne.ads \\\n+   ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads ada/s-rident.ads \\\n+   ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads \\\n+   ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads ada/s-traent.ads \\\n+   ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads ada/table.adb \\\n+   ada/targparm.ads ada/tbuild.ads ada/tree_io.ads ada/ttypes.ads \\\n+   ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n    ada/unchconv.ads ada/unchdeal.ads ada/urealp.ads ada/widechar.ads \n \n ada/sem_ch10.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n@@ -3646,23 +3647,23 @@ ada/sem_ch7.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/inline.ads ada/interfac.ads ada/lib.ads ada/lib.adb \\\n    ada/lib-list.adb ada/lib-sort.adb ada/lib-xref.ads ada/namet.ads \\\n    ada/namet.adb ada/nlists.ads ada/nlists.adb ada/nmake.ads ada/nmake.adb \\\n-   ada/opt.ads ada/output.ads ada/rident.ads ada/rtsfind.ads ada/scans.ads \\\n-   ada/sem.ads ada/sem_attr.ads ada/sem_aux.ads ada/sem_cat.ads \\\n-   ada/sem_ch10.ads ada/sem_ch12.ads ada/sem_ch13.ads ada/sem_ch3.ads \\\n-   ada/sem_ch6.ads ada/sem_ch7.ads ada/sem_ch7.adb ada/sem_ch8.ads \\\n-   ada/sem_disp.ads ada/sem_eval.ads ada/sem_res.ads ada/sem_type.ads \\\n-   ada/sem_util.ads ada/sem_util.adb ada/sem_warn.ads ada/sinfo.ads \\\n-   ada/sinfo.adb ada/sinput.ads ada/sinput.adb ada/snames.ads \\\n-   ada/snames.adb ada/stand.ads ada/stringt.ads ada/style.ads \\\n-   ada/styleg.ads ada/styleg.adb ada/stylesw.ads ada/system.ads \\\n-   ada/s-exctab.ads ada/s-htable.ads ada/s-imenne.ads ada/s-memory.ads \\\n-   ada/s-os_lib.ads ada/s-parame.ads ada/s-rident.ads ada/s-secsta.ads \\\n-   ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads ada/s-stoele.ads \\\n-   ada/s-stoele.adb ada/s-string.ads ada/s-traent.ads ada/s-unstyp.ads \\\n-   ada/s-wchcon.ads ada/table.ads ada/table.adb ada/targparm.ads \\\n-   ada/tbuild.ads ada/tree_io.ads ada/ttypes.ads ada/types.ads \\\n-   ada/uintp.ads ada/uintp.adb ada/uname.ads ada/unchconv.ads \\\n-   ada/unchdeal.ads ada/urealp.ads ada/widechar.ads \n+   ada/opt.ads ada/output.ads ada/restrict.ads ada/rident.ads \\\n+   ada/rtsfind.ads ada/scans.ads ada/sem.ads ada/sem_attr.ads \\\n+   ada/sem_aux.ads ada/sem_cat.ads ada/sem_ch10.ads ada/sem_ch12.ads \\\n+   ada/sem_ch13.ads ada/sem_ch3.ads ada/sem_ch6.ads ada/sem_ch7.ads \\\n+   ada/sem_ch7.adb ada/sem_ch8.ads ada/sem_disp.ads ada/sem_eval.ads \\\n+   ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads ada/sem_util.adb \\\n+   ada/sem_warn.ads ada/sinfo.ads ada/sinfo.adb ada/sinput.ads \\\n+   ada/sinput.adb ada/snames.ads ada/snames.adb ada/stand.ads \\\n+   ada/stringt.ads ada/style.ads ada/styleg.ads ada/styleg.adb \\\n+   ada/stylesw.ads ada/system.ads ada/s-exctab.ads ada/s-htable.ads \\\n+   ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads \\\n+   ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads \\\n+   ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads \\\n+   ada/s-traent.ads ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads \\\n+   ada/table.adb ada/targparm.ads ada/tbuild.ads ada/tree_io.ads \\\n+   ada/ttypes.ads ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n+   ada/unchconv.ads ada/unchdeal.ads ada/urealp.ads ada/widechar.ads \n \n ada/sem_ch8.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/a-uncdea.ads ada/alloc.ads ada/aspects.ads ada/atree.ads \\\n@@ -4002,20 +4003,21 @@ ada/sem_type.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/g-htable.ads ada/hostparm.ads ada/inline.ads ada/interfac.ads \\\n    ada/lib.ads ada/lib.adb ada/lib-list.adb ada/lib-sort.adb \\\n    ada/lib-xref.ads ada/namet.ads ada/namet.adb ada/nlists.ads \\\n-   ada/nlists.adb ada/nmake.ads ada/opt.ads ada/output.ads ada/rident.ads \\\n-   ada/rtsfind.ads ada/scans.ads ada/sem.ads ada/sem_attr.ads \\\n-   ada/sem_aux.ads ada/sem_ch12.ads ada/sem_ch6.ads ada/sem_ch8.ads \\\n-   ada/sem_disp.ads ada/sem_dist.ads ada/sem_eval.ads ada/sem_res.ads \\\n-   ada/sem_type.ads ada/sem_type.adb ada/sem_util.ads ada/sem_util.adb \\\n-   ada/sinfo.ads ada/sinfo.adb ada/sinput.ads ada/snames.ads ada/stand.ads \\\n-   ada/stringt.ads ada/style.ads ada/styleg.ads ada/styleg.adb \\\n-   ada/stylesw.ads ada/system.ads ada/s-exctab.ads ada/s-htable.ads \\\n-   ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads \\\n-   ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads \\\n-   ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads \\\n-   ada/s-traent.ads ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads \\\n-   ada/table.adb ada/targparm.ads ada/tbuild.ads ada/tree_io.ads \\\n-   ada/ttypes.ads ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n+   ada/nlists.adb ada/nmake.ads ada/opt.ads ada/output.ads \\\n+   ada/restrict.ads ada/rident.ads ada/rtsfind.ads ada/scans.ads \\\n+   ada/sem.ads ada/sem_attr.ads ada/sem_aux.ads ada/sem_ch12.ads \\\n+   ada/sem_ch6.ads ada/sem_ch8.ads ada/sem_disp.ads ada/sem_dist.ads \\\n+   ada/sem_eval.ads ada/sem_res.ads ada/sem_type.ads ada/sem_type.adb \\\n+   ada/sem_util.ads ada/sem_util.adb ada/sinfo.ads ada/sinfo.adb \\\n+   ada/sinput.ads ada/snames.ads ada/stand.ads ada/stringt.ads \\\n+   ada/style.ads ada/styleg.ads ada/styleg.adb ada/stylesw.ads \\\n+   ada/system.ads ada/s-exctab.ads ada/s-htable.ads ada/s-imenne.ads \\\n+   ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads ada/s-rident.ads \\\n+   ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads \\\n+   ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads ada/s-traent.ads \\\n+   ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads ada/table.adb \\\n+   ada/targparm.ads ada/tbuild.ads ada/tree_io.ads ada/ttypes.ads \\\n+   ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n    ada/unchconv.ads ada/unchdeal.ads ada/urealp.ads ada/widechar.ads \n \n ada/sem_util.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n@@ -4072,21 +4074,22 @@ ada/sem_warn.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/g-htable.ads ada/hostparm.ads ada/interfac.ads ada/lib.ads \\\n    ada/lib.adb ada/lib-list.adb ada/lib-sort.adb ada/lib-xref.ads \\\n    ada/namet.ads ada/namet.adb ada/nlists.ads ada/nlists.adb ada/nmake.ads \\\n-   ada/opt.ads ada/output.ads ada/par_sco.ads ada/rident.ads \\\n-   ada/rtsfind.ads ada/scans.ads ada/sem.ads ada/sem_attr.ads \\\n-   ada/sem_aux.ads ada/sem_ch8.ads ada/sem_disp.ads ada/sem_eval.ads \\\n-   ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads ada/sem_util.adb \\\n-   ada/sem_warn.ads ada/sem_warn.adb ada/sinfo.ads ada/sinfo.adb \\\n-   ada/sinput.ads ada/sinput.adb ada/snames.ads ada/stand.ads \\\n-   ada/stringt.ads ada/style.ads ada/styleg.ads ada/styleg.adb \\\n-   ada/stylesw.ads ada/system.ads ada/s-exctab.ads ada/s-htable.ads \\\n-   ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads \\\n-   ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads \\\n-   ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads \\\n-   ada/s-traent.ads ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads \\\n-   ada/table.adb ada/targparm.ads ada/tbuild.ads ada/tree_io.ads \\\n-   ada/ttypes.ads ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n-   ada/unchconv.ads ada/unchdeal.ads ada/urealp.ads ada/widechar.ads \n+   ada/opt.ads ada/output.ads ada/par_sco.ads ada/restrict.ads \\\n+   ada/rident.ads ada/rtsfind.ads ada/scans.ads ada/sem.ads \\\n+   ada/sem_attr.ads ada/sem_aux.ads ada/sem_ch8.ads ada/sem_disp.ads \\\n+   ada/sem_eval.ads ada/sem_res.ads ada/sem_type.ads ada/sem_util.ads \\\n+   ada/sem_util.adb ada/sem_warn.ads ada/sem_warn.adb ada/sinfo.ads \\\n+   ada/sinfo.adb ada/sinput.ads ada/sinput.adb ada/snames.ads \\\n+   ada/stand.ads ada/stringt.ads ada/style.ads ada/styleg.ads \\\n+   ada/styleg.adb ada/stylesw.ads ada/system.ads ada/s-exctab.ads \\\n+   ada/s-htable.ads ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads \\\n+   ada/s-parame.ads ada/s-rident.ads ada/s-secsta.ads ada/s-soflin.ads \\\n+   ada/s-stache.ads ada/s-stalib.ads ada/s-stoele.ads ada/s-stoele.adb \\\n+   ada/s-string.ads ada/s-traent.ads ada/s-unstyp.ads ada/s-wchcon.ads \\\n+   ada/table.ads ada/table.adb ada/targparm.ads ada/tbuild.ads \\\n+   ada/tree_io.ads ada/ttypes.ads ada/types.ads ada/uintp.ads \\\n+   ada/uintp.adb ada/uname.ads ada/unchconv.ads ada/unchdeal.ads \\\n+   ada/urealp.ads ada/widechar.ads \n \n ada/sinfo-cn.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/a-uncdea.ads ada/alloc.ads ada/aspects.ads ada/atree.ads \\"}, {"sha": "ffe3f126d38a908826a82760061738dd7a33684d", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=d8b962d80e8388a84aec13593b8b169446c547cb", "patch": "@@ -423,7 +423,7 @@ ifeq ($(strip $(filter-out m68k% wrs vx%,$(targ))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-intnam.ads<a-intnam-vxworks.ads \\\n   a-numaux.ads<a-numaux-vxworks.ads \\\n-  s-inmaop.adb<s-inmaop-posix.adb \\\n+  s-inmaop.adb<s-inmaop-vxworks.adb \\\n   s-interr.adb<s-interr-hwint.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\\n@@ -468,7 +468,7 @@ ifeq ($(strip $(filter-out powerpc% wrs vxworks,$(targ))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-intnam.ads<a-intnam-vxworks.ads \\\n   a-numaux.ads<a-numaux-vxworks.ads \\\n-  s-inmaop.adb<s-inmaop-posix.adb \\\n+  s-inmaop.adb<s-inmaop-vxworks.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\\n   s-osinte.ads<s-osinte-vxworks.ads \\\n@@ -564,7 +564,7 @@ ifeq ($(strip $(filter-out powerpc% wrs vxworksae,$(targ))),)\n   a-numaux.ads<a-numaux-vxworks.ads \\\n   g-io.adb<g-io-vxworks-ppc-cert.adb \\\n   g-io.ads<g-io-vxworks-ppc-cert.ads \\\n-  s-inmaop.adb<s-inmaop-posix.adb \\\n+  s-inmaop.adb<s-inmaop-vxworks.adb \\\n   s-interr.adb<s-interr-hwint.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\\n@@ -625,7 +625,7 @@ ifeq ($(strip $(filter-out powerpc% wrs vxworksmils,$(targ))),)\n   a-numaux.ads<a-numaux-vxworks.ads \\\n   g-io.adb<g-io-vxworks-ppc-cert.adb \\\n   g-io.ads<g-io-vxworks-ppc-cert.ads \\\n-  s-inmaop.adb<s-inmaop-posix.adb \\\n+  s-inmaop.adb<s-inmaop-vxworks.adb \\\n   s-interr.adb<s-interr-hwint.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\\n@@ -682,7 +682,7 @@ ifeq ($(strip $(filter-out %86 wrs vxworksae vxworksmils,$(targ))),)\n   g-bytswa.adb<g-bytswa-x86.adb \\\n   g-io.adb<g-io-vxworks-ppc-cert.adb \\\n   g-io.ads<g-io-vxworks-ppc-cert.ads \\\n-  s-inmaop.adb<s-inmaop-posix.adb \\\n+  s-inmaop.adb<s-inmaop-vxworks.adb \\\n   s-interr.adb<s-interr-hwint.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\\n@@ -737,7 +737,7 @@ ifeq ($(strip $(filter-out sparc% wrs vx%,$(targ))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-intnam.ads<a-intnam-vxworks.ads \\\n   a-numaux.ads<a-numaux-vxworks.ads \\\n-  s-inmaop.adb<s-inmaop-posix.adb \\\n+  s-inmaop.adb<s-inmaop-vxworks.adb \\\n   s-interr.adb<s-interr-hwint.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\\n@@ -777,7 +777,7 @@ ifeq ($(strip $(filter-out %86 wrs vxworks,$(targ))),)\n   i-vxwork.ads<i-vxwork-x86.ads \\\n   s-osinte.adb<s-osinte-vxworks.adb \\\n   s-osinte.ads<s-osinte-vxworks.ads \\\n-  s-inmaop.adb<s-inmaop-posix.adb \\\n+  s-inmaop.adb<s-inmaop-vxworks.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\\n   a-numaux.adb<a-numaux-x86.adb \\\n@@ -867,7 +867,7 @@ ifeq ($(strip $(filter-out arm% coff wrs vx%,$(targ))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-intnam.ads<a-intnam-vxworks.ads \\\n   a-numaux.ads<a-numaux-vxworks.ads \\\n-  s-inmaop.adb<s-inmaop-posix.adb \\\n+  s-inmaop.adb<s-inmaop-vxworks.adb \\\n   s-interr.adb<s-interr-hwint.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\\n@@ -905,7 +905,7 @@ ifeq ($(strip $(filter-out mips% wrs vx%,$(targ))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-intnam.ads<a-intnam-vxworks.ads \\\n   a-numaux.ads<a-numaux-vxworks.ads \\\n-  s-inmaop.adb<s-inmaop-posix.adb \\\n+  s-inmaop.adb<s-inmaop-vxworks.adb \\\n   s-interr.adb<s-interr-hwint.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\"}, {"sha": "32d9aa7cc9c55a3a10c54473efcd3c38b41f1cef", "filename": "gcc/ada/par-ch3.adb", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fpar-ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fpar-ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch3.adb?ref=d8b962d80e8388a84aec13593b8b169446c547cb", "patch": "@@ -2528,6 +2528,7 @@ package body Ch3 is\n    --  Note: this is an obsolescent feature in Ada 95 (I.3)\n \n    --  Note: in Ada 83, the EXPRESSION must be a SIMPLE_EXPRESSION\n+   --  (also true in formal modes).\n \n    --  The caller has checked that the initial token is DELTA\n \n@@ -2542,6 +2543,12 @@ package body Ch3 is\n       Scan; -- past DELTA\n       Expr_Node := P_Expression;\n       Check_Simple_Expression_In_Ada_83 (Expr_Node);\n+\n+      if Expr_Form = EF_Non_Simple then\n+         Check_Formal_Restriction\n+           (\"this expression must be parenthesized\", Expr_Node);\n+      end if;\n+\n       Set_Delta_Expression (Constraint_Node, Expr_Node);\n \n       if Token = Tok_Range then\n@@ -3069,6 +3076,12 @@ package body Ch3 is\n \n          Expr_Node := P_Expression_Or_Range_Attribute;\n \n+         if Expr_Form /= EF_Simple_Name\n+           and then Formal_Verification_Mode\n+         then\n+            Error_Msg_SC (\"|~~subtype mark required\");\n+         end if;\n+\n          if Expr_Form = EF_Range_Attr then\n             Append (Expr_Node, Constr_List);\n "}, {"sha": "3b0309fbeb6060bd876f7b3a316de8abf4f408b4", "filename": "gcc/ada/par.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fpar.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fpar.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar.adb?ref=d8b962d80e8388a84aec13593b8b169446c547cb", "patch": "@@ -38,6 +38,7 @@ with Nmake;    use Nmake;\n with Opt;      use Opt;\n with Output;   use Output;\n with Par_SCO;  use Par_SCO;\n+with Restrict; use Restrict;\n with Scans;    use Scans;\n with Scn;      use Scn;\n with Sinput;   use Sinput;"}, {"sha": "27abe8b7bbf2f6401f507fd1bce3e1268dd13bae", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=d8b962d80e8388a84aec13593b8b169446c547cb", "patch": "@@ -3915,17 +3915,23 @@ package body Prj.Nmsc is\n \n             when Library =>\n                if not Project.Library then\n-                  if Project.Library_Dir = No_Path_Information then\n+                  if Project.Library_Name = No_Name then\n                      Error_Msg\n                        (Data.Flags,\n-                        \"\\attribute Library_Dir not declared\",\n+                        \"attribute Library_Name not declared\",\n                         Project.Location, Project);\n-                  end if;\n \n-                  if Project.Library_Name = No_Name then\n+                     if not Library_Directory_Present then\n+                        Error_Msg\n+                          (Data.Flags,\n+                           \"\\attribute Library_Dir not declared\",\n+                           Project.Location, Project);\n+                     end if;\n+\n+                  elsif Project.Library_Dir = No_Path_Information then\n                      Error_Msg\n                        (Data.Flags,\n-                        \"\\attribute Library_Name not declared\",\n+                        \"attribute Library_Dir not declared\",\n                         Project.Location, Project);\n                   end if;\n                end if;"}, {"sha": "06ed3480729c79080a076f8ef9c99340b5c042ac", "filename": "gcc/ada/sem_ch13.adb", "status": "modified", "additions": 10, "deletions": 7, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fsem_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fsem_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch13.adb?ref=d8b962d80e8388a84aec13593b8b169446c547cb", "patch": "@@ -993,7 +993,7 @@ package body Sem_Ch13 is\n                   Aitem :=\n                     Make_Pragma (Loc,\n                       Pragma_Argument_Associations => New_List (\n-                        New_Occurrence_Of (E, Eloc),\n+                        New_Occurrence_Of (E, Loc),\n                         Relocate_Node (Expr)),\n                       Pragma_Identifier            =>\n                         Make_Identifier (Sloc (Id), Chars (Id)));\n@@ -1016,7 +1016,7 @@ package body Sem_Ch13 is\n                   Aitem :=\n                     Make_Pragma (Loc,\n                       Pragma_Argument_Associations => New_List (\n-                        New_Occurrence_Of (E, Eloc),\n+                        New_Occurrence_Of (E, Loc),\n                         Relocate_Node (Expr)),\n                       Pragma_Identifier            =>\n                         Make_Identifier (Sloc (Id), Chars (Id)));\n@@ -1038,7 +1038,7 @@ package body Sem_Ch13 is\n                     Make_Pragma (Loc,\n                       Pragma_Argument_Associations => New_List (\n                         Relocate_Node (Expr),\n-                        New_Occurrence_Of (E, Eloc)),\n+                        New_Occurrence_Of (E, Loc)),\n                       Pragma_Identifier            =>\n                         Make_Identifier (Sloc (Id), Chars (Id)),\n                       Class_Present                => Class_Present (Aspect));\n@@ -5239,13 +5239,16 @@ package body Sem_Ch13 is\n          when Boolean_Aspects =>\n             raise Program_Error;\n \n-         --  Default_Value and Default_Component_Value are resolved with\n-         --  the entity, which is the type in question.\n+         --  Default_Value is resolved with the type entity in question\n \n-         when Aspect_Default_Component_Value |\n-              Aspect_Default_Value           =>\n+         when Aspect_Default_Value =>\n             T := Entity (ASN);\n \n+         --  Default_Component_Value is resolved with the component type\n+\n+         when Aspect_Default_Component_Value =>\n+            T := Component_Type (Entity (ASN));\n+\n          --  Aspects corresponding to attribute definition clauses\n \n          when Aspect_Address =>"}, {"sha": "82bd372e8e633676b6ae0f79e264ac2559b09e37", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 102, "deletions": 6, "changes": 108, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=d8b962d80e8388a84aec13593b8b169446c547cb", "patch": "@@ -1773,13 +1773,19 @@ package body Sem_Ch3 is\n          end if;\n       end Is_Known_Limited;\n \n+      Typ : constant Node_Id := Subtype_Indication (Component_Definition (N));\n+\n    --  Start of processing for Analyze_Component_Declaration\n \n    begin\n       Generate_Definition (Id);\n       Enter_Name (Id);\n \n-      if Present (Subtype_Indication (Component_Definition (N))) then\n+      if Present (Typ) then\n+         if Nkind (Typ) /= N_Identifier then\n+            Check_Formal_Restriction (\"subtype mark required\", Typ);\n+         end if;\n+\n          T := Find_Type_Of_Object\n                 (Subtype_Indication (Component_Definition (N)), N);\n \n@@ -1833,6 +1839,7 @@ package body Sem_Ch3 is\n       --  package Sem).\n \n       if Present (E) then\n+         Check_Formal_Restriction (\"default expression is not allowed\", E);\n          Preanalyze_Spec_Expression (E, T);\n          Check_Initialization (T, E);\n \n@@ -3998,6 +4005,36 @@ package body Sem_Ch3 is\n            (\"subtype of Boolean cannot have constraint\", N);\n       end if;\n \n+      --  Subtype of String shall have a lower index bound equal to 1 in SPARK\n+      --  or ALFA.\n+\n+      if Base_Type (T) = Standard_String\n+        and then Nkind (Subtype_Indication (N)) = N_Subtype_Indication\n+      then\n+         declare\n+            Cstr   : constant Node_Id := Constraint (Subtype_Indication (N));\n+            Drange : Node_Id;\n+            Low    : Node_Id;\n+         begin\n+            if Nkind (Cstr) = N_Index_Or_Discriminant_Constraint\n+              and then List_Length (Constraints (Cstr)) = 1\n+            then\n+               Drange := First (Constraints (Cstr));\n+\n+               if Nkind (Drange) = N_Range then\n+                  Low := Low_Bound (Drange);\n+\n+                  if Is_OK_Static_Expression (Low)\n+                    and then Expr_Value (Low) /= 1\n+                  then\n+                     Check_Formal_Restriction\n+                       (\"subtype of String must have 1 as lower bound\", N);\n+                  end if;\n+               end if;\n+            end if;\n+         end;\n+      end if;\n+\n       --  In the case where there is no constraint given in the subtype\n       --  indication, Process_Subtype just returns the Subtype_Mark, so its\n       --  semantic attributes must be established here.\n@@ -4503,6 +4540,7 @@ package body Sem_Ch3 is\n \n    procedure Array_Type_Declaration (T : in out Entity_Id; Def : Node_Id) is\n       Component_Def : constant Node_Id := Component_Definition (Def);\n+      Component_Typ : constant Node_Id := Subtype_Indication (Component_Def);\n       Element_Type  : Entity_Id;\n       Implicit_Base : Entity_Id;\n       Index         : Node_Id;\n@@ -4530,6 +4568,10 @@ package body Sem_Ch3 is\n \n       Nb_Index := 1;\n       while Present (Index) loop\n+         if Nkind (Index) /= N_Identifier then\n+            Check_Formal_Restriction (\"subtype mark required\", Index);\n+         end if;\n+\n          Analyze (Index);\n \n          --  Add a subtype declaration for each index of private array type\n@@ -4600,10 +4642,12 @@ package body Sem_Ch3 is\n \n       --  Process subtype indication if one is present\n \n-      if Present (Subtype_Indication (Component_Def)) then\n-         Element_Type :=\n-           Process_Subtype\n-             (Subtype_Indication (Component_Def), P, Related_Id, 'C');\n+      if Present (Component_Typ) then\n+         if Nkind (Component_Typ) /= N_Identifier then\n+            Check_Formal_Restriction (\"subtype mark required\", Component_Typ);\n+         end if;\n+\n+         Element_Type := Process_Subtype (Component_Typ, P, Related_Id, 'C');\n \n       --  Ada 2005 (AI-230): Access Definition case\n \n@@ -4711,6 +4755,8 @@ package body Sem_Ch3 is\n       Set_Packed_Array_Type (T, Empty);\n \n       if Aliased_Present (Component_Definition (Def)) then\n+         Check_Formal_Restriction\n+           (\"aliased is not allowed\", Component_Definition (Def));\n          Set_Has_Aliased_Components (Etype (T));\n       end if;\n \n@@ -13832,6 +13878,8 @@ package body Sem_Ch3 is\n       --  parent is also an interface.\n \n       if Interface_Present (Def) then\n+         Check_Formal_Restriction (\"interface is not allowed\", Def);\n+\n          if not Is_Interface (Parent_Type) then\n             Diagnose_Interface (Indic, Parent_Type);\n \n@@ -18789,6 +18837,14 @@ package body Sem_Ch3 is\n       if Ada_Version < Ada_2005\n         or else not Interface_Present (Def)\n       then\n+         if Limited_Present (Def) then\n+            Check_Formal_Restriction (\"limited is not allowed\", N);\n+         end if;\n+\n+         if Abstract_Present (Def) then\n+            Check_Formal_Restriction (\"abstract is not allowed\", N);\n+         end if;\n+\n          --  The flag Is_Tagged_Type might have already been set by\n          --  Find_Type_Name if it detected an error for declaration T. This\n          --  arises in the case of private tagged types where the full view\n@@ -18808,6 +18864,8 @@ package body Sem_Ch3 is\n                                       or else Abstract_Present (Def));\n \n       else\n+         Check_Formal_Restriction (\"interface is not allowed\", N);\n+\n          Is_Tagged := True;\n          Analyze_Interface_Declaration (T, Def);\n \n@@ -18946,6 +19004,41 @@ package body Sem_Ch3 is\n          T := Prev_T;\n       end if;\n \n+      --  In SPARK or ALFA, tagged types and type extensions may only be\n+      --  declared in the specification of library unit packages.\n+\n+      if Present (Def) and then Is_Tagged_Type (T) then\n+         declare\n+            Typ  : Node_Id;\n+            Ctxt : Node_Id;\n+         begin\n+            if Nkind (Parent (Def)) = N_Full_Type_Declaration then\n+               Typ := Parent (Def);\n+            else\n+               pragma Assert\n+                 (Nkind (Parent (Def)) = N_Derived_Type_Definition);\n+               Typ := Parent (Parent (Def));\n+            end if;\n+\n+            Ctxt := Parent (Typ);\n+\n+            if Nkind (Ctxt) = N_Package_Body\n+              and then Nkind (Parent (Ctxt)) = N_Compilation_Unit\n+            then\n+               Check_Formal_Restriction\n+                 (\"type should be defined in package specification\", Typ);\n+            elsif Nkind (Ctxt) /= N_Package_Specification\n+              or else\n+                Nkind (Parent (Parent (Ctxt))) /= N_Compilation_Unit\n+            then\n+               Check_Formal_Restriction\n+                 (\"type should be defined in library unit package\", Typ);\n+            else\n+               null;\n+            end if;\n+         end;\n+      end if;\n+\n       Final_Storage_Only := not Is_Controlled (T);\n \n       --  Ada 2005: check whether an explicit Limited is present in a derived\n@@ -18968,12 +19061,15 @@ package body Sem_Ch3 is\n         or else No (Component_List (Def))\n         or else Null_Present (Component_List (Def))\n       then\n-         null;\n+         if not Is_Tagged_Type (T) then\n+            Check_Formal_Restriction (\"non-tagged record cannot be null\", Def);\n+         end if;\n \n       else\n          Analyze_Declarations (Component_Items (Component_List (Def)));\n \n          if Present (Variant_Part (Component_List (Def))) then\n+            Check_Formal_Restriction (\"variant part is not allowed\", Def);\n             Analyze (Variant_Part (Component_List (Def)));\n          end if;\n       end if;"}, {"sha": "51e7f5fbda2bc60f99f9705bff7b012b4e5d2d62", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b962d80e8388a84aec13593b8b169446c547cb/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=d8b962d80e8388a84aec13593b8b169446c547cb", "patch": "@@ -5656,6 +5656,16 @@ package body Sem_Prag is\n    --  Start of processing for Analyze_Pragma\n \n    begin\n+      --  The following code is a defense against recursion. Not clear that\n+      --  this can happen legitimately, but perhaps some error situations\n+      --  can cause it, and we did see this recursion during testing.\n+\n+      if Analyzed (N) then\n+         return;\n+      else\n+         Set_Analyzed (N, True);\n+      end if;\n+\n       --  Deal with unrecognized pragma\n \n       if not Is_Pragma_Name (Pname) then"}]}