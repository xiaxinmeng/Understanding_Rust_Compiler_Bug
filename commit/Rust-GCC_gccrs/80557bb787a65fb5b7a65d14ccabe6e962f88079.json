{"sha": "80557bb787a65fb5b7a65d14ccabe6e962f88079", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODA1NTdiYjc4N2E2NWZiNWI3YTY1ZDE0Y2NhYmU2ZTk2MmY4ODA3OQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2016-11-17T21:44:05Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2016-11-17T21:44:05Z"}, "message": "re PR c++/55080 (-pedantic produces error: floating-point literal cannot appear in a constant-expression)\n\n/cp\n2016-11-17  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/55080\n\t* parser.c (cp_parser_non_integral_constant_expression): Issue a\n\tpedwarn instead of an error for case NIC_FLOAT.\n\n/testsuite\n2016-11-17  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/55080\n\t* g++.dg/parse/pr55080.C: New.\n\nFrom-SVN: r242565", "tree": {"sha": "4a94aa82d8e23bef51b7cc23fea6e0a4a94fd601", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4a94aa82d8e23bef51b7cc23fea6e0a4a94fd601"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/80557bb787a65fb5b7a65d14ccabe6e962f88079", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80557bb787a65fb5b7a65d14ccabe6e962f88079", "html_url": "https://github.com/Rust-GCC/gccrs/commit/80557bb787a65fb5b7a65d14ccabe6e962f88079", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80557bb787a65fb5b7a65d14ccabe6e962f88079/comments", "author": null, "committer": null, "parents": [{"sha": "c80620fcfa577f25449c727758627f47224cfaf9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c80620fcfa577f25449c727758627f47224cfaf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c80620fcfa577f25449c727758627f47224cfaf9"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "3178c1f1c4d06784545715fbafd9b77427c4eb2c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80557bb787a65fb5b7a65d14ccabe6e962f88079/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80557bb787a65fb5b7a65d14ccabe6e962f88079/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=80557bb787a65fb5b7a65d14ccabe6e962f88079", "patch": "@@ -1,3 +1,9 @@\n+2016-11-17  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/55080\n+\t* parser.c (cp_parser_non_integral_constant_expression): Issue a\n+\tpedwarn instead of an error for case NIC_FLOAT.\n+\n 2016-11-17  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/78124 - list-initialization and inherited ctor"}, {"sha": "9da4b30f656c3c2258e545966b3606c84623a3ce", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80557bb787a65fb5b7a65d14ccabe6e962f88079/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80557bb787a65fb5b7a65d14ccabe6e962f88079/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=80557bb787a65fb5b7a65d14ccabe6e962f88079", "patch": "@@ -3028,8 +3028,9 @@ cp_parser_non_integral_constant_expression (cp_parser  *parser,\n \t  switch (thing)\n \t    {\n   \t      case NIC_FLOAT:\n-\t\terror (\"floating-point literal \"\n-\t\t       \"cannot appear in a constant-expression\");\n+\t\tpedwarn (input_location, OPT_Wpedantic,\n+\t\t\t \"ISO C++ forbids using a floating-point literal \"\n+\t\t\t \"in a constant-expression\");\n \t\treturn true;\n \t      case NIC_CAST:\n \t\terror (\"a cast to a type other than an integral or \""}, {"sha": "ed6b9a72bac7da7597876897d4cb2f8b159b421b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80557bb787a65fb5b7a65d14ccabe6e962f88079/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80557bb787a65fb5b7a65d14ccabe6e962f88079/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=80557bb787a65fb5b7a65d14ccabe6e962f88079", "patch": "@@ -1,3 +1,8 @@\n+2016-11-17  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/55080\n+\t* g++.dg/parse/pr55080.C: New.\n+\n 2016-11-17  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR target/78101"}, {"sha": "b66395a11d95421d6ba1d49a4349e26bce27c266", "filename": "gcc/testsuite/g++.dg/parse/pr55080.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80557bb787a65fb5b7a65d14ccabe6e962f88079/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fpr55080.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80557bb787a65fb5b7a65d14ccabe6e962f88079/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fpr55080.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fpr55080.C?ref=80557bb787a65fb5b7a65d14ccabe6e962f88079", "patch": "@@ -0,0 +1,6 @@\n+// PR c++/55080\n+// { dg-options \"-std=c++98 -pedantic\" }\n+\n+class B {\n+ static const int c = 3.1415926; // { dg-warning \"constant-expression\" }\n+};"}]}