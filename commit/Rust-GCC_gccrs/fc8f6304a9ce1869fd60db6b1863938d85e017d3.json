{"sha": "fc8f6304a9ce1869fd60db6b1863938d85e017d3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmM4ZjYzMDRhOWNlMTg2OWZkNjBkYjZiMTg2MzkzOGQ4NWUwMTdkMw==", "commit": {"author": {"name": "Pat Haugen", "email": "pthaugen@us.ibm.com", "date": "2017-03-10T14:32:42Z"}, "committer": {"name": "Pat Haugen", "email": "pthaugen@gcc.gnu.org", "date": "2017-03-10T14:32:42Z"}, "message": "re PR target/79907 (ICE in extract_constrain_insn, at recog.c:2213 on ppc64le)\n\n\tPR target/79907\n\t* config/rs6000/rs6000.c (rs6000_init_hard_regno_mode_ok): Test\n\tTARGET_UPPER_REGS_DI when setting 'wi' constraint regclass.\n\t* gcc.target/powerpc/pr79907.c: New.\n\nFrom-SVN: r246029", "tree": {"sha": "eac3379adb3dff38c660ead8c6c74a16b7115cf3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eac3379adb3dff38c660ead8c6c74a16b7115cf3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fc8f6304a9ce1869fd60db6b1863938d85e017d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc8f6304a9ce1869fd60db6b1863938d85e017d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc8f6304a9ce1869fd60db6b1863938d85e017d3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc8f6304a9ce1869fd60db6b1863938d85e017d3/comments", "author": null, "committer": null, "parents": [{"sha": "8823ce3f54a875c2523264ddf3342bc54cdf10eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8823ce3f54a875c2523264ddf3342bc54cdf10eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8823ce3f54a875c2523264ddf3342bc54cdf10eb"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "34c6f2914219d27cda352156a3b0ecdce19001bd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc8f6304a9ce1869fd60db6b1863938d85e017d3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc8f6304a9ce1869fd60db6b1863938d85e017d3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fc8f6304a9ce1869fd60db6b1863938d85e017d3", "patch": "@@ -1,3 +1,9 @@\n+2017-03-10  Pat Haugen  <pthaugen@us.ibm.com>\n+\n+\tPR target/79907\n+\t* config/rs6000/rs6000.c (rs6000_init_hard_regno_mode_ok): Test\n+\tTARGET_UPPER_REGS_DI when setting 'wi' constraint regclass.\n+\n 2017-03-10  Martin Liska  <mliska@suse.cz>\n \n         PR target/65705"}, {"sha": "c6ba091baed9c1d87f34df7d5fca9b0aa937f23c", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc8f6304a9ce1869fd60db6b1863938d85e017d3/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc8f6304a9ce1869fd60db6b1863938d85e017d3/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=fc8f6304a9ce1869fd60db6b1863938d85e017d3", "patch": "@@ -3182,7 +3182,7 @@ rs6000_init_hard_regno_mode_ok (bool global_init_p)\n       else\n \trs6000_constraints[RS6000_CONSTRAINT_ws] = FLOAT_REGS;\n \n-      if (TARGET_UPPER_REGS_DF)\t\t\t\t\t/* DImode  */\n+      if (TARGET_UPPER_REGS_DI)\t\t\t\t\t/* DImode  */\n \trs6000_constraints[RS6000_CONSTRAINT_wi] = VSX_REGS;\n       else\n \trs6000_constraints[RS6000_CONSTRAINT_wi] = FLOAT_REGS;"}, {"sha": "ef5609cd76942e3c9180b0565e6ed8136b93a2b5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc8f6304a9ce1869fd60db6b1863938d85e017d3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc8f6304a9ce1869fd60db6b1863938d85e017d3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fc8f6304a9ce1869fd60db6b1863938d85e017d3", "patch": "@@ -1,3 +1,8 @@\n+2017-03-10  Pat Haugen  <pthaugen@us.ibm.com>\n+\n+\tPR target/79907\n+\t* gcc.target/powerpc/pr79907.c: New.\n+\n 2017-03-10  Olivier Hainque  <hainque@adacore.com>\n \n \t* gnat.dg/opt64.adb: New test."}, {"sha": "c0e669b3264687dd4431a39c184ac01197f57bac", "filename": "gcc/testsuite/gcc.target/powerpc/pr79907.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc8f6304a9ce1869fd60db6b1863938d85e017d3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr79907.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc8f6304a9ce1869fd60db6b1863938d85e017d3/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr79907.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr79907.c?ref=fc8f6304a9ce1869fd60db6b1863938d85e017d3", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile { target { powerpc*-*-* } } } */\n+/* { dg-require-effective-target powerpc_p8vector_ok } */\n+/* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power8\" } } */\n+/* { dg-options \"-mcpu=power8 -O3 -mno-upper-regs-df\" } */\n+\n+int foo (short a[], int x)\n+{\n+  unsigned int i;\n+  for (i = 0; i < 1000; i++)\n+    {\n+      x = a[i];\n+      a[i] = (x <= 0 ? 0 : x);\n+    }\n+  return x;\n+}"}]}