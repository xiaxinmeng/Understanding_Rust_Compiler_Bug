{"sha": "0539cb2c6f944ae4434f4033a12d42eabebf543d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDUzOWNiMmM2Zjk0NGFlNDQzNGY0MDMzYTEyZDQyZWFiZWJmNTQzZA==", "commit": {"author": {"name": "Ralf Wildenhues", "email": "Ralf.Wildenhues@gmx.de", "date": "2009-08-22T11:47:16Z"}, "committer": {"name": "Ralf Wildenhues", "email": "rwild@gcc.gnu.org", "date": "2009-08-22T11:47:16Z"}, "message": "Update automake-provided files in the toplevel.\n\n/:\n\t* compile: Sync from Automake 1.11.\n\t* depcomp: Likewise.\n\t* install-sh: Likewise.\n\t* missing: Likewise.\n\t* mkinstalldirs: Likewise.\n\t* ylwrap: Likewise.\n\nFrom-SVN: r151012", "tree": {"sha": "5c33e4ebc8c45d5ec85ad2801289652a0de8cca0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c33e4ebc8c45d5ec85ad2801289652a0de8cca0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0539cb2c6f944ae4434f4033a12d42eabebf543d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0539cb2c6f944ae4434f4033a12d42eabebf543d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0539cb2c6f944ae4434f4033a12d42eabebf543d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0539cb2c6f944ae4434f4033a12d42eabebf543d/comments", "author": null, "committer": null, "parents": [{"sha": "92532234eb8c5a8aa7f21b7d7ccdbcc6ca62c64a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92532234eb8c5a8aa7f21b7d7ccdbcc6ca62c64a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92532234eb8c5a8aa7f21b7d7ccdbcc6ca62c64a"}], "stats": {"total": 849, "additions": 576, "deletions": 273}, "files": [{"sha": "db828aaf9ab5ac57243d22f0e68a5f1927d0cfce", "filename": "ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0539cb2c6f944ae4434f4033a12d42eabebf543d/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0539cb2c6f944ae4434f4033a12d42eabebf543d/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=0539cb2c6f944ae4434f4033a12d42eabebf543d", "patch": "@@ -1,3 +1,12 @@\n+2009-08-22  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n+\n+\t* compile: Sync from Automake 1.11.\n+\t* depcomp: Likewise.\n+\t* install-sh: Likewise.\n+\t* missing: Likewise.\n+\t* mkinstalldirs: Likewise.\n+\t* ylwrap: Likewise.\n+\n 2009-08-20  Dave Korn  <dave.korn.cygwin@gmail.com>\n \n \t* ltmain.sh (func_normal_abspath): New function."}, {"sha": "ec64c6220266fb75d8c6b6e0e32492f5983f3472", "filename": "compile", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0539cb2c6f944ae4434f4033a12d42eabebf543d/compile", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0539cb2c6f944ae4434f4033a12d42eabebf543d/compile", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/compile?ref=0539cb2c6f944ae4434f4033a12d42eabebf543d", "patch": "@@ -1,9 +1,10 @@\n #! /bin/sh\n # Wrapper for compilers which do not understand `-c -o'.\n \n-scriptversion=2005-05-14.22\n+scriptversion=2009-04-28.21; # UTC\n \n-# Copyright (C) 1999, 2000, 2003, 2004, 2005 Free Software Foundation, Inc.\n+# Copyright (C) 1999, 2000, 2003, 2004, 2005, 2009  Free Software\n+# Foundation, Inc.\n # Written by Tom Tromey <tromey@cygnus.com>.\n #\n # This program is free software; you can redistribute it and/or modify\n@@ -17,8 +18,7 @@ scriptversion=2005-05-14.22\n # GNU General Public License for more details.\n #\n # You should have received a copy of the GNU General Public License\n-# along with this program; if not, write to the Free Software\n-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n # As a special exception to the GNU General Public License, if you\n # distribute this file as part of a program that contains a\n@@ -103,13 +103,13 @@ if test -z \"$ofile\" || test -z \"$cfile\"; then\n fi\n \n # Name of file we expect compiler to create.\n-cofile=`echo \"$cfile\" | sed -e 's|^.*/||' -e 's/\\.c$/.o/'`\n+cofile=`echo \"$cfile\" | sed 's|^.*[\\\\/]||; s|^[a-zA-Z]:||; s/\\.c$/.o/'`\n \n # Create the lock directory.\n-# Note: use `[/.-]' here to ensure that we don't use the same name\n+# Note: use `[/\\\\:.-]' here to ensure that we don't use the same name\n # that we are using for the .o file.  Also, base the name on the expected\n # object file name, since that is what matters with a parallel build.\n-lockdir=`echo \"$cofile\" | sed -e 's|[/.-]|_|g'`.d\n+lockdir=`echo \"$cofile\" | sed -e 's|[/\\\\:.-]|_|g'`.d\n while true; do\n   if mkdir \"$lockdir\" >/dev/null 2>&1; then\n     break\n@@ -138,5 +138,6 @@ exit $ret\n # eval: (add-hook 'write-file-hooks 'time-stamp)\n # time-stamp-start: \"scriptversion=\"\n # time-stamp-format: \"%:y-%02m-%02d.%02H\"\n-# time-stamp-end: \"$\"\n+# time-stamp-time-zone: \"UTC\"\n+# time-stamp-end: \"; # UTC\"\n # End:"}, {"sha": "df8eea7e4ce8862105fcd7929b20bdb45488048b", "filename": "depcomp", "status": "modified", "additions": 126, "deletions": 49, "changes": 175, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0539cb2c6f944ae4434f4033a12d42eabebf543d/depcomp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0539cb2c6f944ae4434f4033a12d42eabebf543d/depcomp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/depcomp?ref=0539cb2c6f944ae4434f4033a12d42eabebf543d", "patch": "@@ -1,9 +1,10 @@\n #! /bin/sh\n # depcomp - compile a program generating dependencies as side-effects\n \n-scriptversion=2005-05-16.16\n+scriptversion=2009-04-28.21; # UTC\n \n-# Copyright (C) 1999, 2000, 2003, 2004, 2005 Free Software Foundation, Inc.\n+# Copyright (C) 1999, 2000, 2003, 2004, 2005, 2006, 2007, 2009 Free\n+# Software Foundation, Inc.\n \n # This program is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -16,9 +17,7 @@ scriptversion=2005-05-16.16\n # GNU General Public License for more details.\n \n # You should have received a copy of the GNU General Public License\n-# along with this program; if not, write to the Free Software\n-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA\n-# 02110-1301, USA.\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n # As a special exception to the GNU General Public License, if you\n # distribute this file as part of a program that contains a\n@@ -86,12 +85,34 @@ if test \"$depmode\" = dashXmstdout; then\n    depmode=dashmstdout\n fi\n \n+cygpath_u=\"cygpath -u -f -\"\n+if test \"$depmode\" = msvcmsys; then\n+   # This is just like msvisualcpp but w/o cygpath translation.\n+   # Just convert the backslash-escaped backslashes to single forward\n+   # slashes to satisfy depend.m4\n+   cygpath_u=\"sed s,\\\\\\\\\\\\\\\\,/,g\"\n+   depmode=msvisualcpp\n+fi\n+\n case \"$depmode\" in\n gcc3)\n ## gcc 3 implements dependency tracking that does exactly what\n ## we want.  Yay!  Note: for some reason libtool 1.4 doesn't like\n ## it if -MD -MP comes after the -MF stuff.  Hmm.\n-  \"$@\" -MT \"$object\" -MD -MP -MF \"$tmpdepfile\"\n+## Unfortunately, FreeBSD c89 acceptance of flags depends upon\n+## the command line argument order; so add the flags where they\n+## appear in depend2.am.  Note that the slowdown incurred here\n+## affects only configure: in makefiles, %FASTDEP% shortcuts this.\n+  for arg\n+  do\n+    case $arg in\n+    -c) set fnord \"$@\" -MT \"$object\" -MD -MP -MF \"$tmpdepfile\" \"$arg\" ;;\n+    *)  set fnord \"$@\" \"$arg\" ;;\n+    esac\n+    shift # fnord\n+    shift # $arg\n+  done\n+  \"$@\"\n   stat=$?\n   if test $stat -eq 0; then :\n   else\n@@ -178,14 +199,14 @@ sgi)\n ' < \"$tmpdepfile\" \\\n     | sed -e 's/^.*\\.o://' -e 's/#.*$//' -e '/^$/ d' | \\\n     tr '\n-' ' ' >> $depfile\n-    echo >> $depfile\n+' ' ' >> \"$depfile\"\n+    echo >> \"$depfile\"\n \n     # The second pass generates a dummy entry for each header file.\n     tr ' ' '\n ' < \"$tmpdepfile\" \\\n    | sed -e 's/^.*\\.o://' -e 's/#.*$//' -e '/^$/ d' -e 's/$/:/' \\\n-   >> $depfile\n+   >> \"$depfile\"\n   else\n     # The sourcefile does not contain any dependencies, so just\n     # store a dummy comment line, to avoid errors with the Makefile\n@@ -201,34 +222,39 @@ aix)\n   # current directory.  Also, the AIX compiler puts `$object:' at the\n   # start of each line; $object doesn't have directory information.\n   # Version 6 uses the directory in both cases.\n-  stripped=`echo \"$object\" | sed 's/\\(.*\\)\\..*$/\\1/'`\n-  tmpdepfile=\"$stripped.u\"\n+  dir=`echo \"$object\" | sed -e 's|/[^/]*$|/|'`\n+  test \"x$dir\" = \"x$object\" && dir=\n+  base=`echo \"$object\" | sed -e 's|^.*/||' -e 's/\\.o$//' -e 's/\\.lo$//'`\n   if test \"$libtool\" = yes; then\n+    tmpdepfile1=$dir$base.u\n+    tmpdepfile2=$base.u\n+    tmpdepfile3=$dir.libs/$base.u\n     \"$@\" -Wc,-M\n   else\n+    tmpdepfile1=$dir$base.u\n+    tmpdepfile2=$dir$base.u\n+    tmpdepfile3=$dir$base.u\n     \"$@\" -M\n   fi\n   stat=$?\n \n-  if test -f \"$tmpdepfile\"; then :\n-  else\n-    stripped=`echo \"$stripped\" | sed 's,^.*/,,'`\n-    tmpdepfile=\"$stripped.u\"\n-  fi\n-\n   if test $stat -eq 0; then :\n   else\n-    rm -f \"$tmpdepfile\"\n+    rm -f \"$tmpdepfile1\" \"$tmpdepfile2\" \"$tmpdepfile3\"\n     exit $stat\n   fi\n \n+  for tmpdepfile in \"$tmpdepfile1\" \"$tmpdepfile2\" \"$tmpdepfile3\"\n+  do\n+    test -f \"$tmpdepfile\" && break\n+  done\n   if test -f \"$tmpdepfile\"; then\n-    outname=\"$stripped.o\"\n     # Each line is of the form `foo.o: dependent.h'.\n     # Do two passes, one to just change these to\n     # `$object: dependent.h' and one to simply `dependent.h:'.\n-    sed -e \"s,^$outname:,$object :,\" < \"$tmpdepfile\" > \"$depfile\"\n-    sed -e \"s,^$outname: \\(.*\\)$,\\1:,\" < \"$tmpdepfile\" >> \"$depfile\"\n+    sed -e \"s,^.*\\.[a-z]*:,$object:,\" < \"$tmpdepfile\" > \"$depfile\"\n+    # That's a tab and a space in the [].\n+    sed -e 's,^.*\\.[a-z]*:[\t ]*,,' -e 's,$,:,' < \"$tmpdepfile\" >> \"$depfile\"\n   else\n     # The sourcefile does not contain any dependencies, so just\n     # store a dummy comment line, to avoid errors with the Makefile\n@@ -276,27 +302,49 @@ icc)\n   rm -f \"$tmpdepfile\"\n   ;;\n \n-ia64hp)\n-  # The \"hp\" stanza above does not work with HP's ia64 compilers,\n-  # which have integrated preprocessors.  The correct option to use\n-  # with these is +Maked; it writes dependencies to a file named\n+hp2)\n+  # The \"hp\" stanza above does not work with aCC (C++) and HP's ia64\n+  # compilers, which have integrated preprocessors.  The correct option\n+  # to use with these is +Maked; it writes dependencies to a file named\n   # 'foo.d', which lands next to the object file, wherever that\n   # happens to be.\n-  tmpdepfile=`echo \"$object\" | sed -e 's/\\.o$/.d/'`\n-  \"$@\" +Maked\n+  # Much of this is similar to the tru64 case; see comments there.\n+  dir=`echo \"$object\" | sed -e 's|/[^/]*$|/|'`\n+  test \"x$dir\" = \"x$object\" && dir=\n+  base=`echo \"$object\" | sed -e 's|^.*/||' -e 's/\\.o$//' -e 's/\\.lo$//'`\n+  if test \"$libtool\" = yes; then\n+    tmpdepfile1=$dir$base.d\n+    tmpdepfile2=$dir.libs/$base.d\n+    \"$@\" -Wc,+Maked\n+  else\n+    tmpdepfile1=$dir$base.d\n+    tmpdepfile2=$dir$base.d\n+    \"$@\" +Maked\n+  fi\n   stat=$?\n   if test $stat -eq 0; then :\n   else\n-     rm -f \"$tmpdepfile\"\n+     rm -f \"$tmpdepfile1\" \"$tmpdepfile2\"\n      exit $stat\n   fi\n-  rm -f \"$depfile\"\n \n-  # The object file name is correct already.\n-  cat \"$tmpdepfile\" > \"$depfile\"\n-  # Add `dependent.h:' lines.\n-  sed -ne '2,${; s/^ //; s/ \\\\*$//; s/$/:/; p; }' \"$tmpdepfile\" >> \"$depfile\"\n-  rm -f \"$tmpdepfile\"\n+  for tmpdepfile in \"$tmpdepfile1\" \"$tmpdepfile2\"\n+  do\n+    test -f \"$tmpdepfile\" && break\n+  done\n+  if test -f \"$tmpdepfile\"; then\n+    sed -e \"s,^.*\\.[a-z]*:,$object:,\" \"$tmpdepfile\" > \"$depfile\"\n+    # Add `dependent.h:' lines.\n+    sed -ne '2,${\n+\t       s/^ *//\n+\t       s/ \\\\*$//\n+\t       s/$/:/\n+\t       p\n+\t     }' \"$tmpdepfile\" >> \"$depfile\"\n+  else\n+    echo \"#dummy\" > \"$depfile\"\n+  fi\n+  rm -f \"$tmpdepfile\" \"$tmpdepfile2\"\n   ;;\n \n tru64)\n@@ -311,13 +359,13 @@ tru64)\n \n    if test \"$libtool\" = yes; then\n       # With Tru64 cc, shared objects can also be used to make a\n-      # static library.  This mecanism is used in libtool 1.4 series to\n+      # static library.  This mechanism is used in libtool 1.4 series to\n       # handle both shared and static libraries in a single compilation.\n       # With libtool 1.4, dependencies were output in $dir.libs/$base.lo.d.\n       #\n       # With libtool 1.5 this exception was removed, and libtool now\n       # generates 2 separate objects for the 2 libraries.  These two\n-      # compilations output dependencies in in $dir.libs/$base.o.d and\n+      # compilations output dependencies in $dir.libs/$base.o.d and\n       # in $dir$base.o.d.  We have to check for both files, because\n       # one of the two compilations can be disabled.  We should prefer\n       # $dir$base.o.d over $dir.libs/$base.o.d because the latter is\n@@ -368,7 +416,7 @@ dashmstdout)\n \n   # Remove the call to Libtool.\n   if test \"$libtool\" = yes; then\n-    while test $1 != '--mode=compile'; do\n+    while test \"X$1\" != 'X--mode=compile'; do\n       shift\n     done\n     shift\n@@ -419,32 +467,39 @@ makedepend)\n   \"$@\" || exit $?\n   # Remove any Libtool call\n   if test \"$libtool\" = yes; then\n-    while test $1 != '--mode=compile'; do\n+    while test \"X$1\" != 'X--mode=compile'; do\n       shift\n     done\n     shift\n   fi\n   # X makedepend\n   shift\n-  cleared=no\n-  for arg in \"$@\"; do\n+  cleared=no eat=no\n+  for arg\n+  do\n     case $cleared in\n     no)\n       set \"\"; shift\n       cleared=yes ;;\n     esac\n+    if test $eat = yes; then\n+      eat=no\n+      continue\n+    fi\n     case \"$arg\" in\n     -D*|-I*)\n       set fnord \"$@\" \"$arg\"; shift ;;\n     # Strip any option that makedepend may not understand.  Remove\n     # the object too, otherwise makedepend will parse it as a source file.\n+    -arch)\n+      eat=yes ;;\n     -*|$object)\n       ;;\n     *)\n       set fnord \"$@\" \"$arg\"; shift ;;\n     esac\n   done\n-  obj_suffix=\"`echo $object | sed 's/^.*\\././'`\"\n+  obj_suffix=`echo \"$object\" | sed 's/^.*\\././'`\n   touch \"$tmpdepfile\"\n   ${MAKEDEPEND-makedepend} -o\"$obj_suffix\" -f\"$tmpdepfile\" \"$@\"\n   rm -f \"$depfile\"\n@@ -464,7 +519,7 @@ cpp)\n \n   # Remove the call to Libtool.\n   if test \"$libtool\" = yes; then\n-    while test $1 != '--mode=compile'; do\n+    while test \"X$1\" != 'X--mode=compile'; do\n       shift\n     done\n     shift\n@@ -502,13 +557,27 @@ cpp)\n \n msvisualcpp)\n   # Important note: in order to support this mode, a compiler *must*\n-  # always write the preprocessed file to stdout, regardless of -o,\n-  # because we must use -o when running libtool.\n+  # always write the preprocessed file to stdout.\n   \"$@\" || exit $?\n+\n+  # Remove the call to Libtool.\n+  if test \"$libtool\" = yes; then\n+    while test \"X$1\" != 'X--mode=compile'; do\n+      shift\n+    done\n+    shift\n+  fi\n+\n   IFS=\" \"\n   for arg\n   do\n     case \"$arg\" in\n+    -o)\n+      shift\n+      ;;\n+    $object)\n+      shift\n+      ;;\n     \"-Gm\"|\"/Gm\"|\"-Gi\"|\"/Gi\"|\"-ZI\"|\"/ZI\")\n \tset fnord \"$@\"\n \tshift\n@@ -521,16 +590,23 @@ msvisualcpp)\n \t;;\n     esac\n   done\n-  \"$@\" -E |\n-  sed -n '/^#line [0-9][0-9]* \"\\([^\"]*\\)\"/ s::echo \"`cygpath -u \\\\\"\\1\\\\\"`\":p' | sort | uniq > \"$tmpdepfile\"\n+  \"$@\" -E 2>/dev/null |\n+  sed -n '/^#line [0-9][0-9]* \"\\([^\"]*\\)\"/ s::\\1:p' | $cygpath_u | sort -u > \"$tmpdepfile\"\n   rm -f \"$depfile\"\n   echo \"$object : \\\\\" > \"$depfile\"\n-  . \"$tmpdepfile\" | sed 's% %\\\\ %g' | sed -n '/^\\(.*\\)$/ s::\t\\1 \\\\:p' >> \"$depfile\"\n+  sed < \"$tmpdepfile\" -n -e 's% %\\\\ %g' -e '/^\\(.*\\)$/ s::\t\\1 \\\\:p' >> \"$depfile\"\n   echo \"\t\" >> \"$depfile\"\n-  . \"$tmpdepfile\" | sed 's% %\\\\ %g' | sed -n '/^\\(.*\\)$/ s::\\1\\::p' >> \"$depfile\"\n+  sed < \"$tmpdepfile\" -n -e 's% %\\\\ %g' -e '/^\\(.*\\)$/ s::\\1\\::p' >> \"$depfile\"\n   rm -f \"$tmpdepfile\"\n   ;;\n \n+msvcmsys)\n+  # This case exists only to let depend.m4 do its work.  It works by\n+  # looking at the text of this script.  This case will never be run,\n+  # since it is checked for above.\n+  exit 1\n+  ;;\n+\n none)\n   exec \"$@\"\n   ;;\n@@ -549,5 +625,6 @@ exit 0\n # eval: (add-hook 'write-file-hooks 'time-stamp)\n # time-stamp-start: \"scriptversion=\"\n # time-stamp-format: \"%:y-%02m-%02d.%02H\"\n-# time-stamp-end: \"$\"\n+# time-stamp-time-zone: \"UTC\"\n+# time-stamp-end: \"; # UTC\"\n # End:"}, {"sha": "6781b987bdbcbc23efe6bbe1654a1e3637b9af07", "filename": "install-sh", "status": "modified", "additions": 357, "deletions": 160, "changes": 517, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0539cb2c6f944ae4434f4033a12d42eabebf543d/install-sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0539cb2c6f944ae4434f4033a12d42eabebf543d/install-sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/install-sh?ref=0539cb2c6f944ae4434f4033a12d42eabebf543d", "patch": "@@ -1,7 +1,7 @@\n #!/bin/sh\n # install - install a program, script, or datafile\n \n-scriptversion=2005-05-14.22\n+scriptversion=2009-04-28.21; # UTC\n \n # This originates from X11R5 (mit/util/scripts/install.sh), which was\n # later released in X11R6 (xc/config/util/install.sh) with the\n@@ -39,38 +39,68 @@ scriptversion=2005-05-14.22\n # when there is no Makefile.\n #\n # This script is compatible with the BSD install script, but was written\n-# from scratch.  It can only install one file at a time, a restriction\n-# shared with many OS's install programs.\n+# from scratch.\n+\n+nl='\n+'\n+IFS=\" \"\"\t$nl\"\n \n # set DOITPROG to echo to test this script\n \n # Don't use :- since 4.3BSD and earlier shells don't like it.\n-doit=\"${DOITPROG-}\"\n+doit=${DOITPROG-}\n+if test -z \"$doit\"; then\n+  doit_exec=exec\n+else\n+  doit_exec=$doit\n+fi\n \n-# put in absolute paths if you don't have them in your path; or use env. vars.\n+# Put in absolute file names if you don't have them in your path;\n+# or use environment vars.\n+\n+chgrpprog=${CHGRPPROG-chgrp}\n+chmodprog=${CHMODPROG-chmod}\n+chownprog=${CHOWNPROG-chown}\n+cmpprog=${CMPPROG-cmp}\n+cpprog=${CPPROG-cp}\n+mkdirprog=${MKDIRPROG-mkdir}\n+mvprog=${MVPROG-mv}\n+rmprog=${RMPROG-rm}\n+stripprog=${STRIPPROG-strip}\n+\n+posix_glob='?'\n+initialize_posix_glob='\n+  test \"$posix_glob\" != \"?\" || {\n+    if (set -f) 2>/dev/null; then\n+      posix_glob=\n+    else\n+      posix_glob=:\n+    fi\n+  }\n+'\n \n-mvprog=\"${MVPROG-mv}\"\n-cpprog=\"${CPPROG-cp}\"\n-chmodprog=\"${CHMODPROG-chmod}\"\n-chownprog=\"${CHOWNPROG-chown}\"\n-chgrpprog=\"${CHGRPPROG-chgrp}\"\n-stripprog=\"${STRIPPROG-strip}\"\n-rmprog=\"${RMPROG-rm}\"\n-mkdirprog=\"${MKDIRPROG-mkdir}\"\n+posix_mkdir=\n+\n+# Desired mode of installed file.\n+mode=0755\n \n-chmodcmd=\"$chmodprog 0755\"\n-chowncmd=\n chgrpcmd=\n-stripcmd=\n+chmodcmd=$chmodprog\n+chowncmd=\n+mvcmd=$mvprog\n rmcmd=\"$rmprog -f\"\n-mvcmd=\"$mvprog\"\n+stripcmd=\n+\n src=\n dst=\n dir_arg=\n-dstarg=\n+dst_arg=\n+\n+copy_on_change=false\n no_target_directory=\n \n-usage=\"Usage: $0 [OPTION]... [-T] SRCFILE DSTFILE\n+usage=\"\\\n+Usage: $0 [OPTION]... [-T] SRCFILE DSTFILE\n    or: $0 [OPTION]... SRCFILES... DIRECTORY\n    or: $0 [OPTION]... -t DIRECTORY SRCFILES...\n    or: $0 [OPTION]... -d DIRECTORIES...\n@@ -80,81 +110,86 @@ In the 2nd and 3rd, copy all SRCFILES to DIRECTORY.\n In the 4th, create DIRECTORIES.\n \n Options:\n--c         (ignored)\n--d         create directories instead of installing files.\n--g GROUP   $chgrpprog installed files to GROUP.\n--m MODE    $chmodprog installed files to MODE.\n--o USER    $chownprog installed files to USER.\n--s         $stripprog installed files.\n--t DIRECTORY  install into DIRECTORY.\n--T         report an error if DSTFILE is a directory.\n---help     display this help and exit.\n---version  display version info and exit.\n+     --help     display this help and exit.\n+     --version  display version info and exit.\n+\n+  -c            (ignored)\n+  -C            install only if different (preserve the last data modification time)\n+  -d            create directories instead of installing files.\n+  -g GROUP      $chgrpprog installed files to GROUP.\n+  -m MODE       $chmodprog installed files to MODE.\n+  -o USER       $chownprog installed files to USER.\n+  -s            $stripprog installed files.\n+  -t DIRECTORY  install into DIRECTORY.\n+  -T            report an error if DSTFILE is a directory.\n \n Environment variables override the default commands:\n-  CHGRPPROG CHMODPROG CHOWNPROG CPPROG MKDIRPROG MVPROG RMPROG STRIPPROG\n+  CHGRPPROG CHMODPROG CHOWNPROG CMPPROG CPPROG MKDIRPROG MVPROG\n+  RMPROG STRIPPROG\n \"\n \n-while test -n \"$1\"; do\n+while test $# -ne 0; do\n   case $1 in\n-    -c) shift\n-        continue;;\n+    -c) ;;\n+\n+    -C) copy_on_change=true;;\n \n-    -d) dir_arg=true\n-        shift\n-        continue;;\n+    -d) dir_arg=true;;\n \n     -g) chgrpcmd=\"$chgrpprog $2\"\n-        shift\n-        shift\n-        continue;;\n+\tshift;;\n \n     --help) echo \"$usage\"; exit $?;;\n \n-    -m) chmodcmd=\"$chmodprog $2\"\n-        shift\n-        shift\n-        continue;;\n+    -m) mode=$2\n+\tcase $mode in\n+\t  *' '* | *'\t'* | *'\n+'*\t  | *'*'* | *'?'* | *'['*)\n+\t    echo \"$0: invalid mode: $mode\" >&2\n+\t    exit 1;;\n+\tesac\n+\tshift;;\n \n     -o) chowncmd=\"$chownprog $2\"\n-        shift\n-        shift\n-        continue;;\n+\tshift;;\n \n-    -s) stripcmd=$stripprog\n-        shift\n-        continue;;\n+    -s) stripcmd=$stripprog;;\n \n-    -t) dstarg=$2\n-\tshift\n-\tshift\n-\tcontinue;;\n+    -t) dst_arg=$2\n+\tshift;;\n \n-    -T) no_target_directory=true\n-\tshift\n-\tcontinue;;\n+    -T) no_target_directory=true;;\n \n     --version) echo \"$0 $scriptversion\"; exit $?;;\n \n-    *)  # When -d is used, all remaining arguments are directories to create.\n-\t# When -t is used, the destination is already specified.\n-\ttest -n \"$dir_arg$dstarg\" && break\n-        # Otherwise, the last argument is the destination.  Remove it from $@.\n-\tfor arg\n-\tdo\n-          if test -n \"$dstarg\"; then\n-\t    # $@ is not empty: it contains at least $arg.\n-\t    set fnord \"$@\" \"$dstarg\"\n-\t    shift # fnord\n-\t  fi\n-\t  shift # arg\n-\t  dstarg=$arg\n-\tdone\n+    --)\tshift\n \tbreak;;\n+\n+    -*)\techo \"$0: invalid option: $1\" >&2\n+\texit 1;;\n+\n+    *)  break;;\n   esac\n+  shift\n done\n \n-if test -z \"$1\"; then\n+if test $# -ne 0 && test -z \"$dir_arg$dst_arg\"; then\n+  # When -d is used, all remaining arguments are directories to create.\n+  # When -t is used, the destination is already specified.\n+  # Otherwise, the last argument is the destination.  Remove it from $@.\n+  for arg\n+  do\n+    if test -n \"$dst_arg\"; then\n+      # $@ is not empty: it contains at least $arg.\n+      set fnord \"$@\" \"$dst_arg\"\n+      shift # fnord\n+    fi\n+    shift # arg\n+    dst_arg=$arg\n+  done\n+fi\n+\n+if test $# -eq 0; then\n   if test -z \"$dir_arg\"; then\n     echo \"$0: no input file specified.\" >&2\n     exit 1\n@@ -164,24 +199,47 @@ if test -z \"$1\"; then\n   exit 0\n fi\n \n+if test -z \"$dir_arg\"; then\n+  trap '(exit $?); exit' 1 2 13 15\n+\n+  # Set umask so as not to create temps with too-generous modes.\n+  # However, 'strip' requires both read and write access to temps.\n+  case $mode in\n+    # Optimize common cases.\n+    *644) cp_umask=133;;\n+    *755) cp_umask=22;;\n+\n+    *[0-7])\n+      if test -z \"$stripcmd\"; then\n+\tu_plus_rw=\n+      else\n+\tu_plus_rw='% 200'\n+      fi\n+      cp_umask=`expr '(' 777 - $mode % 1000 ')' $u_plus_rw`;;\n+    *)\n+      if test -z \"$stripcmd\"; then\n+\tu_plus_rw=\n+      else\n+\tu_plus_rw=,u+rw\n+      fi\n+      cp_umask=$mode$u_plus_rw;;\n+  esac\n+fi\n+\n for src\n do\n   # Protect names starting with `-'.\n   case $src in\n-    -*) src=./$src ;;\n+    -*) src=./$src;;\n   esac\n \n   if test -n \"$dir_arg\"; then\n     dst=$src\n-    src=\n-\n-    if test -d \"$dst\"; then\n-      mkdircmd=:\n-      chmodcmd=\n-    else\n-      mkdircmd=$mkdirprog\n-    fi\n+    dstdir=$dst\n+    test -d \"$dstdir\"\n+    dstdir_status=$?\n   else\n+\n     # Waiting for this to be detected by the \"$cpprog $src $dsttmp\" command\n     # might cause directories to be created, which would be especially bad\n     # if $src (and thus $dsttmp) contains '*'.\n@@ -190,134 +248,273 @@ do\n       exit 1\n     fi\n \n-    if test -z \"$dstarg\"; then\n+    if test -z \"$dst_arg\"; then\n       echo \"$0: no destination specified.\" >&2\n       exit 1\n     fi\n \n-    dst=$dstarg\n+    dst=$dst_arg\n     # Protect names starting with `-'.\n     case $dst in\n-      -*) dst=./$dst ;;\n+      -*) dst=./$dst;;\n     esac\n \n     # If destination is a directory, append the input filename; won't work\n     # if double slashes aren't ignored.\n     if test -d \"$dst\"; then\n       if test -n \"$no_target_directory\"; then\n-\techo \"$0: $dstarg: Is a directory\" >&2\n+\techo \"$0: $dst_arg: Is a directory\" >&2\n \texit 1\n       fi\n-      dst=$dst/`basename \"$src\"`\n+      dstdir=$dst\n+      dst=$dstdir/`basename \"$src\"`\n+      dstdir_status=0\n+    else\n+      # Prefer dirname, but fall back on a substitute if dirname fails.\n+      dstdir=`\n+\t(dirname \"$dst\") 2>/dev/null ||\n+\texpr X\"$dst\" : 'X\\(.*[^/]\\)//*[^/][^/]*/*$' \\| \\\n+\t     X\"$dst\" : 'X\\(//\\)[^/]' \\| \\\n+\t     X\"$dst\" : 'X\\(//\\)$' \\| \\\n+\t     X\"$dst\" : 'X\\(/\\)' \\| . 2>/dev/null ||\n+\techo X\"$dst\" |\n+\t    sed '/^X\\(.*[^/]\\)\\/\\/*[^/][^/]*\\/*$/{\n+\t\t   s//\\1/\n+\t\t   q\n+\t\t }\n+\t\t /^X\\(\\/\\/\\)[^/].*/{\n+\t\t   s//\\1/\n+\t\t   q\n+\t\t }\n+\t\t /^X\\(\\/\\/\\)$/{\n+\t\t   s//\\1/\n+\t\t   q\n+\t\t }\n+\t\t /^X\\(\\/\\).*/{\n+\t\t   s//\\1/\n+\t\t   q\n+\t\t }\n+\t\t s/.*/./; q'\n+      `\n+\n+      test -d \"$dstdir\"\n+      dstdir_status=$?\n     fi\n   fi\n \n-  # This sed command emulates the dirname command.\n-  dstdir=`echo \"$dst\" | sed -e 's,/*$,,;s,[^/]*$,,;s,/*$,,;s,^$,.,'`\n+  obsolete_mkdir_used=false\n+\n+  if test $dstdir_status != 0; then\n+    case $posix_mkdir in\n+      '')\n+\t# Create intermediate dirs using mode 755 as modified by the umask.\n+\t# This is like FreeBSD 'install' as of 1997-10-28.\n+\tumask=`umask`\n+\tcase $stripcmd.$umask in\n+\t  # Optimize common cases.\n+\t  *[2367][2367]) mkdir_umask=$umask;;\n+\t  .*0[02][02] | .[02][02] | .[02]) mkdir_umask=22;;\n+\n+\t  *[0-7])\n+\t    mkdir_umask=`expr $umask + 22 \\\n+\t      - $umask % 100 % 40 + $umask % 20 \\\n+\t      - $umask % 10 % 4 + $umask % 2\n+\t    `;;\n+\t  *) mkdir_umask=$umask,go-w;;\n+\tesac\n+\n+\t# With -d, create the new directory with the user-specified mode.\n+\t# Otherwise, rely on $mkdir_umask.\n+\tif test -n \"$dir_arg\"; then\n+\t  mkdir_mode=-m$mode\n+\telse\n+\t  mkdir_mode=\n+\tfi\n+\n+\tposix_mkdir=false\n+\tcase $umask in\n+\t  *[123567][0-7][0-7])\n+\t    # POSIX mkdir -p sets u+wx bits regardless of umask, which\n+\t    # is incompatible with FreeBSD 'install' when (umask & 300) != 0.\n+\t    ;;\n+\t  *)\n+\t    tmpdir=${TMPDIR-/tmp}/ins$RANDOM-$$\n+\t    trap 'ret=$?; rmdir \"$tmpdir/d\" \"$tmpdir\" 2>/dev/null; exit $ret' 0\n+\n+\t    if (umask $mkdir_umask &&\n+\t\texec $mkdirprog $mkdir_mode -p -- \"$tmpdir/d\") >/dev/null 2>&1\n+\t    then\n+\t      if test -z \"$dir_arg\" || {\n+\t\t   # Check for POSIX incompatibilities with -m.\n+\t\t   # HP-UX 11.23 and IRIX 6.5 mkdir -m -p sets group- or\n+\t\t   # other-writeable bit of parent directory when it shouldn't.\n+\t\t   # FreeBSD 6.1 mkdir -m -p sets mode of existing directory.\n+\t\t   ls_ld_tmpdir=`ls -ld \"$tmpdir\"`\n+\t\t   case $ls_ld_tmpdir in\n+\t\t     d????-?r-*) different_mode=700;;\n+\t\t     d????-?--*) different_mode=755;;\n+\t\t     *) false;;\n+\t\t   esac &&\n+\t\t   $mkdirprog -m$different_mode -p -- \"$tmpdir\" && {\n+\t\t     ls_ld_tmpdir_1=`ls -ld \"$tmpdir\"`\n+\t\t     test \"$ls_ld_tmpdir\" = \"$ls_ld_tmpdir_1\"\n+\t\t   }\n+\t\t }\n+\t      then posix_mkdir=:\n+\t      fi\n+\t      rmdir \"$tmpdir/d\" \"$tmpdir\"\n+\t    else\n+\t      # Remove any dirs left behind by ancient mkdir implementations.\n+\t      rmdir ./$mkdir_mode ./-p ./-- 2>/dev/null\n+\t    fi\n+\t    trap '' 0;;\n+\tesac;;\n+    esac\n \n-  # Make sure that the destination directory exists.\n+    if\n+      $posix_mkdir && (\n+\tumask $mkdir_umask &&\n+\t$doit_exec $mkdirprog $mkdir_mode -p -- \"$dstdir\"\n+      )\n+    then :\n+    else\n \n-  # Skip lots of stat calls in the usual case.\n-  if test ! -d \"$dstdir\"; then\n-    defaultIFS='\n-\t '\n-    IFS=\"${IFS-$defaultIFS}\"\n+      # The umask is ridiculous, or mkdir does not conform to POSIX,\n+      # or it failed possibly due to a race condition.  Create the\n+      # directory the slow way, step by step, checking for races as we go.\n \n-    oIFS=$IFS\n-    # Some sh's can't handle IFS=/ for some reason.\n-    IFS='%'\n-    set x `echo \"$dstdir\" | sed -e 's@/@%@g' -e 's@^%@/@'`\n-    shift\n-    IFS=$oIFS\n+      case $dstdir in\n+\t/*) prefix='/';;\n+\t-*) prefix='./';;\n+\t*)  prefix='';;\n+      esac\n \n-    pathcomp=\n+      eval \"$initialize_posix_glob\"\n \n-    while test $# -ne 0 ; do\n-      pathcomp=$pathcomp$1\n+      oIFS=$IFS\n+      IFS=/\n+      $posix_glob set -f\n+      set fnord $dstdir\n       shift\n-      if test ! -d \"$pathcomp\"; then\n-        $mkdirprog \"$pathcomp\"\n-\t# mkdir can fail with a `File exist' error in case several\n-\t# install-sh are creating the directory concurrently.  This\n-\t# is OK.\n-\ttest -d \"$pathcomp\" || exit\n+      $posix_glob set +f\n+      IFS=$oIFS\n+\n+      prefixes=\n+\n+      for d\n+      do\n+\ttest -z \"$d\" && continue\n+\n+\tprefix=$prefix$d\n+\tif test -d \"$prefix\"; then\n+\t  prefixes=\n+\telse\n+\t  if $posix_mkdir; then\n+\t    (umask=$mkdir_umask &&\n+\t     $doit_exec $mkdirprog $mkdir_mode -p -- \"$dstdir\") && break\n+\t    # Don't fail if two instances are running concurrently.\n+\t    test -d \"$prefix\" || exit 1\n+\t  else\n+\t    case $prefix in\n+\t      *\\'*) qprefix=`echo \"$prefix\" | sed \"s/'/'\\\\\\\\\\\\\\\\''/g\"`;;\n+\t      *) qprefix=$prefix;;\n+\t    esac\n+\t    prefixes=\"$prefixes '$qprefix'\"\n+\t  fi\n+\tfi\n+\tprefix=$prefix/\n+      done\n+\n+      if test -n \"$prefixes\"; then\n+\t# Don't fail if two instances are running concurrently.\n+\t(umask $mkdir_umask &&\n+\t eval \"\\$doit_exec \\$mkdirprog $prefixes\") ||\n+\t  test -d \"$dstdir\" || exit 1\n+\tobsolete_mkdir_used=true\n       fi\n-      pathcomp=$pathcomp/\n-    done\n+    fi\n   fi\n \n   if test -n \"$dir_arg\"; then\n-    $doit $mkdircmd \"$dst\" \\\n-      && { test -z \"$chowncmd\" || $doit $chowncmd \"$dst\"; } \\\n-      && { test -z \"$chgrpcmd\" || $doit $chgrpcmd \"$dst\"; } \\\n-      && { test -z \"$stripcmd\" || $doit $stripcmd \"$dst\"; } \\\n-      && { test -z \"$chmodcmd\" || $doit $chmodcmd \"$dst\"; }\n-\n+    { test -z \"$chowncmd\" || $doit $chowncmd \"$dst\"; } &&\n+    { test -z \"$chgrpcmd\" || $doit $chgrpcmd \"$dst\"; } &&\n+    { test \"$obsolete_mkdir_used$chowncmd$chgrpcmd\" = false ||\n+      test -z \"$chmodcmd\" || $doit $chmodcmd $mode \"$dst\"; } || exit 1\n   else\n-    dstfile=`basename \"$dst\"`\n \n     # Make a couple of temp file names in the proper directory.\n     dsttmp=$dstdir/_inst.$$_\n     rmtmp=$dstdir/_rm.$$_\n \n     # Trap to clean up those temp files at exit.\n     trap 'ret=$?; rm -f \"$dsttmp\" \"$rmtmp\" && exit $ret' 0\n-    trap '(exit $?); exit' 1 2 13 15\n \n     # Copy the file name to the temp name.\n-    $doit $cpprog \"$src\" \"$dsttmp\" &&\n+    (umask $cp_umask && $doit_exec $cpprog \"$src\" \"$dsttmp\") &&\n \n     # and set any options; do chmod last to preserve setuid bits.\n     #\n     # If any of these fail, we abort the whole thing.  If we want to\n     # ignore errors from any of these, just make sure not to ignore\n     # errors from the above \"$doit $cpprog $src $dsttmp\" command.\n     #\n-    { test -z \"$chowncmd\" || $doit $chowncmd \"$dsttmp\"; } \\\n-      && { test -z \"$chgrpcmd\" || $doit $chgrpcmd \"$dsttmp\"; } \\\n-      && { test -z \"$stripcmd\" || $doit $stripcmd \"$dsttmp\"; } \\\n-      && { test -z \"$chmodcmd\" || $doit $chmodcmd \"$dsttmp\"; } &&\n-\n-    # Now rename the file to the real destination.\n-    { $doit $mvcmd -f \"$dsttmp\" \"$dstdir/$dstfile\" 2>/dev/null \\\n-      || {\n-\t   # The rename failed, perhaps because mv can't rename something else\n-\t   # to itself, or perhaps because mv is so ancient that it does not\n-\t   # support -f.\n-\n-\t   # Now remove or move aside any old file at destination location.\n-\t   # We try this two ways since rm can't unlink itself on some\n-\t   # systems and the destination file might be busy for other\n-\t   # reasons.  In this case, the final cleanup might fail but the new\n-\t   # file should still install successfully.\n-\t   {\n-\t     if test -f \"$dstdir/$dstfile\"; then\n-\t       $doit $rmcmd -f \"$dstdir/$dstfile\" 2>/dev/null \\\n-\t       || $doit $mvcmd -f \"$dstdir/$dstfile\" \"$rmtmp\" 2>/dev/null \\\n-\t       || {\n-\t\t echo \"$0: cannot unlink or rename $dstdir/$dstfile\" >&2\n-\t\t (exit 1); exit 1\n-\t       }\n-\t     else\n-\t       :\n-\t     fi\n-\t   } &&\n-\n-\t   # Now rename the file to the real destination.\n-\t   $doit $mvcmd \"$dsttmp\" \"$dstdir/$dstfile\"\n-\t }\n-    }\n-  fi || { (exit 1); exit 1; }\n+    { test -z \"$chowncmd\" || $doit $chowncmd \"$dsttmp\"; } &&\n+    { test -z \"$chgrpcmd\" || $doit $chgrpcmd \"$dsttmp\"; } &&\n+    { test -z \"$stripcmd\" || $doit $stripcmd \"$dsttmp\"; } &&\n+    { test -z \"$chmodcmd\" || $doit $chmodcmd $mode \"$dsttmp\"; } &&\n+\n+    # If -C, don't bother to copy if it wouldn't change the file.\n+    if $copy_on_change &&\n+       old=`LC_ALL=C ls -dlL \"$dst\"\t2>/dev/null` &&\n+       new=`LC_ALL=C ls -dlL \"$dsttmp\"\t2>/dev/null` &&\n+\n+       eval \"$initialize_posix_glob\" &&\n+       $posix_glob set -f &&\n+       set X $old && old=:$2:$4:$5:$6 &&\n+       set X $new && new=:$2:$4:$5:$6 &&\n+       $posix_glob set +f &&\n+\n+       test \"$old\" = \"$new\" &&\n+       $cmpprog \"$dst\" \"$dsttmp\" >/dev/null 2>&1\n+    then\n+      rm -f \"$dsttmp\"\n+    else\n+      # Rename the file to the real destination.\n+      $doit $mvcmd -f \"$dsttmp\" \"$dst\" 2>/dev/null ||\n+\n+      # The rename failed, perhaps because mv can't rename something else\n+      # to itself, or perhaps because mv is so ancient that it does not\n+      # support -f.\n+      {\n+\t# Now remove or move aside any old file at destination location.\n+\t# We try this two ways since rm can't unlink itself on some\n+\t# systems and the destination file might be busy for other\n+\t# reasons.  In this case, the final cleanup might fail but the new\n+\t# file should still install successfully.\n+\t{\n+\t  test ! -f \"$dst\" ||\n+\t  $doit $rmcmd -f \"$dst\" 2>/dev/null ||\n+\t  { $doit $mvcmd -f \"$dst\" \"$rmtmp\" 2>/dev/null &&\n+\t    { $doit $rmcmd -f \"$rmtmp\" 2>/dev/null; :; }\n+\t  } ||\n+\t  { echo \"$0: cannot unlink or rename $dst\" >&2\n+\t    (exit 1); exit 1\n+\t  }\n+\t} &&\n+\n+\t# Now rename the file to the real destination.\n+\t$doit $mvcmd \"$dsttmp\" \"$dst\"\n+      }\n+    fi || exit 1\n+\n+    trap '' 0\n+  fi\n done\n \n-# The final little trick to \"correctly\" pass the exit status to the exit trap.\n-{\n-  (exit 0); exit 0\n-}\n-\n # Local variables:\n # eval: (add-hook 'write-file-hooks 'time-stamp)\n # time-stamp-start: \"scriptversion=\"\n # time-stamp-format: \"%:y-%02m-%02d.%02H\"\n-# time-stamp-end: \"$\"\n+# time-stamp-time-zone: \"UTC\"\n+# time-stamp-end: \"; # UTC\"\n # End:"}, {"sha": "28055d2ae6f2a2c584afcd769d7881e11f62ecd9", "filename": "missing", "status": "modified", "additions": 60, "deletions": 44, "changes": 104, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0539cb2c6f944ae4434f4033a12d42eabebf543d/missing", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0539cb2c6f944ae4434f4033a12d42eabebf543d/missing", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/missing?ref=0539cb2c6f944ae4434f4033a12d42eabebf543d", "patch": "@@ -1,10 +1,10 @@\n #! /bin/sh\n # Common stub for a few missing GNU programs while installing.\n \n-scriptversion=2005-06-08.21\n+scriptversion=2009-04-28.21; # UTC\n \n-# Copyright (C) 1996, 1997, 1999, 2000, 2002, 2003, 2004, 2005\n-#   Free Software Foundation, Inc.\n+# Copyright (C) 1996, 1997, 1999, 2000, 2002, 2003, 2004, 2005, 2006,\n+# 2008, 2009 Free Software Foundation, Inc.\n # Originally by Fran,cois Pinard <pinard@iro.umontreal.ca>, 1996.\n \n # This program is free software; you can redistribute it and/or modify\n@@ -18,9 +18,7 @@ scriptversion=2005-06-08.21\n # GNU General Public License for more details.\n \n # You should have received a copy of the GNU General Public License\n-# along with this program; if not, write to the Free Software\n-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA\n-# 02110-1301, USA.\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n # As a special exception to the GNU General Public License, if you\n # distribute this file as part of a program that contains a\n@@ -33,6 +31,8 @@ if test $# -eq 0; then\n fi\n \n run=:\n+sed_output='s/.* --output[ =]\\([^ ]*\\).*/\\1/p'\n+sed_minuso='s/.* -o \\([^ ]*\\).*/\\1/p'\n \n # In the cases where this matters, `missing' is being run in the\n # srcdir already.\n@@ -44,7 +44,7 @@ fi\n \n msg=\"missing on your system\"\n \n-case \"$1\" in\n+case $1 in\n --run)\n   # Try to run requested program, and just exit if it succeeds.\n   run=\n@@ -77,6 +77,7 @@ Supported PROGRAM values:\n   aclocal      touch file \\`aclocal.m4'\n   autoconf     touch file \\`configure'\n   autoheader   touch file \\`config.h.in'\n+  autom4te     touch the output file, or create a stub one\n   automake     touch all \\`Makefile.in' files\n   bison        create \\`y.tab.[ch]', if possible, from existing .[ch]\n   flex         create \\`lex.yy.c', if possible, from existing .c\n@@ -86,6 +87,9 @@ Supported PROGRAM values:\n   tar          try tar, gnutar, gtar, then tar without non-portable flags\n   yacc         create \\`y.tab.[ch]', if possible, from existing .[ch]\n \n+Version suffixes to PROGRAM as well as the prefixes \\`gnu-', \\`gnu', and\n+\\`g' are ignored when checking the name.\n+\n Send bug reports to <bug-automake@gnu.org>.\"\n     exit $?\n     ;;\n@@ -103,15 +107,22 @@ Send bug reports to <bug-automake@gnu.org>.\"\n \n esac\n \n+# normalize program name to check for.\n+program=`echo \"$1\" | sed '\n+  s/^gnu-//; t\n+  s/^gnu//; t\n+  s/^g//; t'`\n+\n # Now exit if we have it, but it failed.  Also exit now if we\n # don't have it and --version was passed (most likely to detect\n-# the program).\n-case \"$1\" in\n-  lex|yacc)\n+# the program).  This is about non-GNU programs, so use $1 not\n+# $program.\n+case $1 in\n+  lex*|yacc*)\n     # Not GNU programs, they don't have --version.\n     ;;\n \n-  tar)\n+  tar*)\n     if test -n \"$run\"; then\n        echo 1>&2 \"ERROR: \\`tar' requires --run\"\n        exit 1\n@@ -135,7 +146,7 @@ esac\n \n # If it does not exist, or fails to run (possibly an outdated version),\n # try to emulate it.\n-case \"$1\" in\n+case $program in\n   aclocal*)\n     echo 1>&2 \"\\\n WARNING: \\`$1' is $msg.  You should only need it if\n@@ -145,7 +156,7 @@ WARNING: \\`$1' is $msg.  You should only need it if\n     touch aclocal.m4\n     ;;\n \n-  autoconf)\n+  autoconf*)\n     echo 1>&2 \"\\\n WARNING: \\`$1' is $msg.  You should only need it if\n          you modified \\`${configure_ac}'.  You might want to install the\n@@ -154,7 +165,7 @@ WARNING: \\`$1' is $msg.  You should only need it if\n     touch configure\n     ;;\n \n-  autoheader)\n+  autoheader*)\n     echo 1>&2 \"\\\n WARNING: \\`$1' is $msg.  You should only need it if\n          you modified \\`acconfig.h' or \\`${configure_ac}'.  You might want\n@@ -164,7 +175,7 @@ WARNING: \\`$1' is $msg.  You should only need it if\n     test -z \"$files\" && files=\"config.h\"\n     touch_files=\n     for f in $files; do\n-      case \"$f\" in\n+      case $f in\n       *:*) touch_files=\"$touch_files \"`echo \"$f\" |\n \t\t\t\t       sed -e 's/^[^:]*://' -e 's/:.*//'`;;\n       *) touch_files=\"$touch_files $f.in\";;\n@@ -184,16 +195,16 @@ WARNING: \\`$1' is $msg.  You should only need it if\n \t   while read f; do touch \"$f\"; done\n     ;;\n \n-  autom4te)\n+  autom4te*)\n     echo 1>&2 \"\\\n WARNING: \\`$1' is needed, but is $msg.\n          You might have modified some files without having the\n          proper tools for further handling them.\n          You can get \\`$1' as part of \\`Autoconf' from any GNU\n          archive site.\"\n \n-    file=`echo \"$*\" | sed -n 's/.*--output[ =]*\\([^ ]*\\).*/\\1/p'`\n-    test -z \"$file\" && file=`echo \"$*\" | sed -n 's/.*-o[ ]*\\([^ ]*\\).*/\\1/p'`\n+    file=`echo \"$*\" | sed -n \"$sed_output\"`\n+    test -z \"$file\" && file=`echo \"$*\" | sed -n \"$sed_minuso\"`\n     if test -f \"$file\"; then\n \ttouch $file\n     else\n@@ -207,80 +218,78 @@ WARNING: \\`$1' is needed, but is $msg.\n     fi\n     ;;\n \n-  bison|yacc)\n+  bison*|yacc*)\n     echo 1>&2 \"\\\n WARNING: \\`$1' $msg.  You should only need it if\n          you modified a \\`.y' file.  You may need the \\`Bison' package\n          in order for those modifications to take effect.  You can get\n          \\`Bison' from any GNU archive site.\"\n     rm -f y.tab.c y.tab.h\n-    if [ $# -ne 1 ]; then\n+    if test $# -ne 1; then\n         eval LASTARG=\"\\${$#}\"\n-\tcase \"$LASTARG\" in\n+\tcase $LASTARG in\n \t*.y)\n \t    SRCFILE=`echo \"$LASTARG\" | sed 's/y$/c/'`\n-\t    if [ -f \"$SRCFILE\" ]; then\n+\t    if test -f \"$SRCFILE\"; then\n \t         cp \"$SRCFILE\" y.tab.c\n \t    fi\n \t    SRCFILE=`echo \"$LASTARG\" | sed 's/y$/h/'`\n-\t    if [ -f \"$SRCFILE\" ]; then\n+\t    if test -f \"$SRCFILE\"; then\n \t         cp \"$SRCFILE\" y.tab.h\n \t    fi\n \t  ;;\n \tesac\n     fi\n-    if [ ! -f y.tab.h ]; then\n+    if test ! -f y.tab.h; then\n \techo >y.tab.h\n     fi\n-    if [ ! -f y.tab.c ]; then\n+    if test ! -f y.tab.c; then\n \techo 'main() { return 0; }' >y.tab.c\n     fi\n     ;;\n \n-  lex|flex)\n+  lex*|flex*)\n     echo 1>&2 \"\\\n WARNING: \\`$1' is $msg.  You should only need it if\n          you modified a \\`.l' file.  You may need the \\`Flex' package\n          in order for those modifications to take effect.  You can get\n          \\`Flex' from any GNU archive site.\"\n     rm -f lex.yy.c\n-    if [ $# -ne 1 ]; then\n+    if test $# -ne 1; then\n         eval LASTARG=\"\\${$#}\"\n-\tcase \"$LASTARG\" in\n+\tcase $LASTARG in\n \t*.l)\n \t    SRCFILE=`echo \"$LASTARG\" | sed 's/l$/c/'`\n-\t    if [ -f \"$SRCFILE\" ]; then\n+\t    if test -f \"$SRCFILE\"; then\n \t         cp \"$SRCFILE\" lex.yy.c\n \t    fi\n \t  ;;\n \tesac\n     fi\n-    if [ ! -f lex.yy.c ]; then\n+    if test ! -f lex.yy.c; then\n \techo 'main() { return 0; }' >lex.yy.c\n     fi\n     ;;\n \n-  help2man)\n+  help2man*)\n     echo 1>&2 \"\\\n WARNING: \\`$1' is $msg.  You should only need it if\n \t you modified a dependency of a manual page.  You may need the\n \t \\`Help2man' package in order for those modifications to take\n \t effect.  You can get \\`Help2man' from any GNU archive site.\"\n \n-    file=`echo \"$*\" | sed -n 's/.*-o \\([^ ]*\\).*/\\1/p'`\n-    if test -z \"$file\"; then\n-\tfile=`echo \"$*\" | sed -n 's/.*--output=\\([^ ]*\\).*/\\1/p'`\n-    fi\n-    if [ -f \"$file\" ]; then\n+    file=`echo \"$*\" | sed -n \"$sed_output\"`\n+    test -z \"$file\" && file=`echo \"$*\" | sed -n \"$sed_minuso\"`\n+    if test -f \"$file\"; then\n \ttouch $file\n     else\n \ttest -z \"$file\" || exec >$file\n \techo \".ab help2man is required to generate this page\"\n-\texit 1\n+\texit $?\n     fi\n     ;;\n \n-  makeinfo)\n+  makeinfo*)\n     echo 1>&2 \"\\\n WARNING: \\`$1' is $msg.  You should only need it if\n          you modified a \\`.texi' or \\`.texinfo' file, or any other file\n@@ -289,11 +298,17 @@ WARNING: \\`$1' is $msg.  You should only need it if\n          DU, IRIX).  You might want to install the \\`Texinfo' package or\n          the \\`GNU make' package.  Grab either from any GNU archive site.\"\n     # The file to touch is that specified with -o ...\n-    file=`echo \"$*\" | sed -n 's/.*-o \\([^ ]*\\).*/\\1/p'`\n+    file=`echo \"$*\" | sed -n \"$sed_output\"`\n+    test -z \"$file\" && file=`echo \"$*\" | sed -n \"$sed_minuso\"`\n     if test -z \"$file\"; then\n       # ... or it is the one specified with @setfilename ...\n       infile=`echo \"$*\" | sed 's/.* \\([^ ]*\\) *$/\\1/'`\n-      file=`sed -n '/^@setfilename/ { s/.* \\([^ ]*\\) *$/\\1/; p; q; }' $infile`\n+      file=`sed -n '\n+\t/^@setfilename/{\n+\t  s/.* \\([^ ]*\\) *$/\\1/\n+\t  p\n+\t  q\n+\t}' $infile`\n       # ... or it is derived from the source name (dir/f.texi becomes f.info)\n       test -z \"$file\" && file=`echo \"$infile\" | sed 's,.*/,,;s,.[^.]*$,,'`.info\n     fi\n@@ -303,7 +318,7 @@ WARNING: \\`$1' is $msg.  You should only need it if\n     touch $file\n     ;;\n \n-  tar)\n+  tar*)\n     shift\n \n     # We have already tried tar in the generic part.\n@@ -317,13 +332,13 @@ WARNING: \\`$1' is $msg.  You should only need it if\n     fi\n     firstarg=\"$1\"\n     if shift; then\n-\tcase \"$firstarg\" in\n+\tcase $firstarg in\n \t*o*)\n \t    firstarg=`echo \"$firstarg\" | sed s/o//`\n \t    tar \"$firstarg\" \"$@\" && exit 0\n \t    ;;\n \tesac\n-\tcase \"$firstarg\" in\n+\tcase $firstarg in\n \t*h*)\n \t    firstarg=`echo \"$firstarg\" | sed s/h//`\n \t    tar \"$firstarg\" \"$@\" && exit 0\n@@ -356,5 +371,6 @@ exit 0\n # eval: (add-hook 'write-file-hooks 'time-stamp)\n # time-stamp-start: \"scriptversion=\"\n # time-stamp-format: \"%:y-%02m-%02d.%02H\"\n-# time-stamp-end: \"$\"\n+# time-stamp-time-zone: \"UTC\"\n+# time-stamp-end: \"; # UTC\"\n # End:"}, {"sha": "4191a45dbd72ecd24c25b45a53e94ea0a4b5baf7", "filename": "mkinstalldirs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0539cb2c6f944ae4434f4033a12d42eabebf543d/mkinstalldirs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0539cb2c6f944ae4434f4033a12d42eabebf543d/mkinstalldirs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/mkinstalldirs?ref=0539cb2c6f944ae4434f4033a12d42eabebf543d", "patch": "@@ -1,7 +1,7 @@\n #! /bin/sh\n # mkinstalldirs --- make directory hierarchy\n \n-scriptversion=2005-06-29.22\n+scriptversion=2009-04-28.21; # UTC\n \n # Original author: Noah Friedman <friedman@prep.ai.mit.edu>\n # Created: 1993-05-16\n@@ -11,6 +11,9 @@ scriptversion=2005-06-29.22\n # bugs to <bug-automake@gnu.org> or send patches to\n # <automake-patches@gnu.org>.\n \n+nl='\n+'\n+IFS=\" \"\"\t$nl\"\n errstatus=0\n dirmode=\n \n@@ -154,5 +157,6 @@ exit $errstatus\n # eval: (add-hook 'write-file-hooks 'time-stamp)\n # time-stamp-start: \"scriptversion=\"\n # time-stamp-format: \"%:y-%02m-%02d.%02H\"\n-# time-stamp-end: \"$\"\n+# time-stamp-time-zone: \"UTC\"\n+# time-stamp-end: \"; # UTC\"\n # End:"}, {"sha": "84d563405e6e29a64a4ffdb07da262e2e5628dba", "filename": "ylwrap", "status": "modified", "additions": 9, "deletions": 10, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0539cb2c6f944ae4434f4033a12d42eabebf543d/ylwrap", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0539cb2c6f944ae4434f4033a12d42eabebf543d/ylwrap", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ylwrap?ref=0539cb2c6f944ae4434f4033a12d42eabebf543d", "patch": "@@ -1,10 +1,10 @@\n #! /bin/sh\n # ylwrap - wrapper for lex/yacc invocations.\n \n-scriptversion=2005-05-14.22\n+scriptversion=2009-04-28.21; # UTC\n \n-# Copyright (C) 1996, 1997, 1998, 1999, 2001, 2002, 2003, 2004, 2005\n-#   Free Software Foundation, Inc.\n+# Copyright (C) 1996, 1997, 1998, 1999, 2001, 2002, 2003, 2004, 2005,\n+# 2007, 2009 Free Software Foundation, Inc.\n #\n # Written by Tom Tromey <tromey@cygnus.com>.\n #\n@@ -19,9 +19,7 @@ scriptversion=2005-05-14.22\n # GNU General Public License for more details.\n #\n # You should have received a copy of the GNU General Public License\n-# along with this program; if not, write to the Free Software\n-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA\n-# 02110-1301, USA.\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n # As a special exception to the GNU General Public License, if you\n # distribute this file as part of a program that contains a\n@@ -101,14 +99,14 @@ esac\n # FIXME: add hostname here for parallel makes that run commands on\n # other machines.  But that might take us over the 14-char limit.\n dirname=ylwrap$$\n-trap \"cd `pwd`; rm -rf $dirname > /dev/null 2>&1\" 1 2 3 15\n+trap \"cd '`pwd`'; rm -rf $dirname > /dev/null 2>&1\" 1 2 3 15\n mkdir $dirname || exit 1\n \n cd $dirname\n \n case $# in\n-  0) $prog \"$input\" ;;\n-  *) $prog \"$@\" \"$input\" ;;\n+  0) \"$prog\" \"$input\" ;;\n+  *) \"$prog\" \"$@\" \"$input\" ;;\n esac\n ret=$?\n \n@@ -219,5 +217,6 @@ exit $ret\n # eval: (add-hook 'write-file-hooks 'time-stamp)\n # time-stamp-start: \"scriptversion=\"\n # time-stamp-format: \"%:y-%02m-%02d.%02H\"\n-# time-stamp-end: \"$\"\n+# time-stamp-time-zone: \"UTC\"\n+# time-stamp-end: \"; # UTC\"\n # End:"}]}