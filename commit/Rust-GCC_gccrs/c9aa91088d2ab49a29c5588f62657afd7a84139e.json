{"sha": "c9aa91088d2ab49a29c5588f62657afd7a84139e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzlhYTkxMDg4ZDJhYjQ5YTI5YzU1ODhmNjI2NTdhZmQ3YTg0MTM5ZQ==", "commit": {"author": {"name": "Joern Rennecke", "email": "joern.rennecke@riscy-ip.com", "date": "2018-12-20T23:00:00Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2018-12-20T23:00:00Z"}, "message": "tree-vect-data-refs.c (vect_enhance_data_refs_alignment): Don't do versioning for data accesses with misaligned step.\n\n2018-12-20  Joern Rennecke  <joern.rennecke@riscy-ip.com>\n\n        * tree-vect-data-refs.c (vect_enhance_data_refs_alignment): Don't do\n        versioning for data accesses with misaligned step.\n\nFrom-SVN: r267314", "tree": {"sha": "ddba17356d49092121f0d9478c63e3e3263eb63e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ddba17356d49092121f0d9478c63e3e3263eb63e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9aa91088d2ab49a29c5588f62657afd7a84139e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9aa91088d2ab49a29c5588f62657afd7a84139e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9aa91088d2ab49a29c5588f62657afd7a84139e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9aa91088d2ab49a29c5588f62657afd7a84139e/comments", "author": null, "committer": null, "parents": [{"sha": "da77eace90fd99b38cd89ce281033d86ebfda434", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da77eace90fd99b38cd89ce281033d86ebfda434", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da77eace90fd99b38cd89ce281033d86ebfda434"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "2c12ca2ae262a8189af125bd837812306b4b5d14", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9aa91088d2ab49a29c5588f62657afd7a84139e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9aa91088d2ab49a29c5588f62657afd7a84139e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c9aa91088d2ab49a29c5588f62657afd7a84139e", "patch": "@@ -1,3 +1,8 @@\n+2018-12-20  Joern Rennecke  <joern.rennecke@riscy-ip.com>\n+\n+\t* tree-vect-data-refs.c (vect_enhance_data_refs_alignment): Don't do\n+\tversioning for data accesses with misaligned step.\n+\n 2018-12-20  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR c/51628"}, {"sha": "6cd2c30ef4b06e202fcc1fc0d58407c7faa4cea6", "filename": "gcc/tree-vect-data-refs.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9aa91088d2ab49a29c5588f62657afd7a84139e/gcc%2Ftree-vect-data-refs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9aa91088d2ab49a29c5588f62657afd7a84139e/gcc%2Ftree-vect-data-refs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-data-refs.c?ref=c9aa91088d2ab49a29c5588f62657afd7a84139e", "patch": "@@ -2160,6 +2160,20 @@ vect_enhance_data_refs_alignment (loop_vec_info loop_vinfo)\n \t\t  break;\n \t\t}\n \n+\t      /* Forcing alignment in the first iteration is no good if\n+\t\t we don't keep it across iterations.  For now, just disable\n+\t\t versioning in this case.\n+\t\t ?? We could actually unroll the loop to archive the required\n+\t\t overall step alignemnt, and forcing the alignment could be\n+\t\t done by doing some iterations of the non-vectorized loop.  */\n+\t      if (!multiple_p (LOOP_VINFO_VECT_FACTOR (loop_vinfo)\n+\t\t\t       * DR_STEP_ALIGNMENT (dr),\n+\t\t\t       DR_TARGET_ALIGNMENT (dr)))\n+\t\t{\n+\t\t  do_versioning = false;\n+\t\t  break;\n+\t\t}\n+\n               /* The rightmost bits of an aligned address must be zeros.\n                  Construct the mask needed for this test.  For example,\n                  GET_MODE_SIZE for the vector mode V4SI is 16 bytes so the"}]}