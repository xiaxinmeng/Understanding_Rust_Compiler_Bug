{"sha": "e7e785dfec360573c2e8a700ef570a22359410c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTdlNzg1ZGZlYzM2MDU3M2MyZThhNzAwZWY1NzBhMjIzNTk0MTBjNQ==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2020-05-17T11:56:55Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2020-05-17T11:56:55Z"}, "message": "Revert previous patch:\n\n\t2020-05-17  Aldy Hernandez  <aldyh@redhat.com>\n\n\t* tree-vrp.c (operand_less_p): Move to...\n\t* vr-values.c (operand_less_p): ...here.\n\t* tree-vrp.h (operand_less_p): Remove.", "tree": {"sha": "d86a6c6a2208226e607e9f69170ec5e1d7e25ad9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d86a6c6a2208226e607e9f69170ec5e1d7e25ad9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e7e785dfec360573c2e8a700ef570a22359410c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7e785dfec360573c2e8a700ef570a22359410c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7e785dfec360573c2e8a700ef570a22359410c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7e785dfec360573c2e8a700ef570a22359410c5/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8bfc81876f9325891a52d036a9c454d0c81b3033", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bfc81876f9325891a52d036a9c454d0c81b3033", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bfc81876f9325891a52d036a9c454d0c81b3033"}], "stats": {"total": 62, "additions": 36, "deletions": 26}, "files": [{"sha": "60ff1ffceef3ac66f3b7d3951269e44e626b2351", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7e785dfec360573c2e8a700ef570a22359410c5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7e785dfec360573c2e8a700ef570a22359410c5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e7e785dfec360573c2e8a700ef570a22359410c5", "patch": "@@ -1,3 +1,12 @@\n+2020-05-17  Aldy Hernandez  <aldyh@redhat.com>\n+\n+\tRevert:\n+\t2020-05-17  Aldy Hernandez  <aldyh@redhat.com>\n+\n+\t* tree-vrp.c (operand_less_p): Move to...\n+\t* vr-values.c (operand_less_p): ...here.\n+\t* tree-vrp.h (operand_less_p): Remove.\n+\n 2020-05-17  Aldy Hernandez  <aldyh@redhat.com>\n \n \t* tree-vrp.c (operand_less_p): Move to..."}, {"sha": "4b5df543c00ebaa845a3e0a864dc96c01eb026d1", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7e785dfec360573c2e8a700ef570a22359410c5/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7e785dfec360573c2e8a700ef570a22359410c5/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=e7e785dfec360573c2e8a700ef570a22359410c5", "patch": "@@ -685,6 +685,32 @@ build_symbolic_expr (tree type, tree sym, bool neg, tree inv)\n   return build2 (pointer_p ? POINTER_PLUS_EXPR : PLUS_EXPR, type, t, inv);\n }\n \n+/* Return\n+   1 if VAL < VAL2\n+   0 if !(VAL < VAL2)\n+   -2 if those are incomparable.  */\n+int\n+operand_less_p (tree val, tree val2)\n+{\n+  /* LT is folded faster than GE and others.  Inline the common case.  */\n+  if (TREE_CODE (val) == INTEGER_CST && TREE_CODE (val2) == INTEGER_CST)\n+    return tree_int_cst_lt (val, val2);\n+  else if (TREE_CODE (val) == SSA_NAME && TREE_CODE (val2) == SSA_NAME)\n+    return val == val2 ? 0 : -2;\n+  else\n+    {\n+      int cmp = compare_values (val, val2);\n+      if (cmp == -1)\n+\treturn 1;\n+      else if (cmp == 0 || cmp == 1)\n+\treturn 0;\n+      else\n+\treturn -2;\n+    }\n+\n+  return 0;\n+}\n+\n /* Compare two values VAL1 and VAL2.  Return\n \n    \t-2 if VAL1 and VAL2 cannot be compared at compile-time,"}, {"sha": "aa8201f73593b26880a3f70991c25b1bd862c058", "filename": "gcc/tree-vrp.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7e785dfec360573c2e8a700ef570a22359410c5/gcc%2Ftree-vrp.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7e785dfec360573c2e8a700ef570a22359410c5/gcc%2Ftree-vrp.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.h?ref=e7e785dfec360573c2e8a700ef570a22359410c5", "patch": "@@ -116,6 +116,7 @@ extern bool range_int_cst_p (const value_range *);\n \n extern int compare_values (tree, tree);\n extern int compare_values_warnv (tree, tree, bool *);\n+extern int operand_less_p (tree, tree);\n \n void range_fold_unary_expr (value_range *, enum tree_code, tree type,\n \t\t\t    const value_range *, tree op0_type);"}, {"sha": "2e3a0788710a049b5a58a4ce928212b37649d339", "filename": "gcc/vr-values.c", "status": "modified", "additions": 0, "deletions": 26, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7e785dfec360573c2e8a700ef570a22359410c5/gcc%2Fvr-values.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7e785dfec360573c2e8a700ef570a22359410c5/gcc%2Fvr-values.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvr-values.c?ref=e7e785dfec360573c2e8a700ef570a22359410c5", "patch": "@@ -1104,32 +1104,6 @@ vr_values::check_for_binary_op_overflow (enum tree_code subcode, tree type,\n   return true;\n }\n \n-/* Return\n-   1 if VAL < VAL2\n-   0 if !(VAL < VAL2)\n-   -2 if those are incomparable.  */\n-static int\n-operand_less_p (tree val, tree val2)\n-{\n-  /* LT is folded faster than GE and others.  Inline the common case.  */\n-  if (TREE_CODE (val) == INTEGER_CST && TREE_CODE (val2) == INTEGER_CST)\n-    return tree_int_cst_lt (val, val2);\n-  else if (TREE_CODE (val) == SSA_NAME && TREE_CODE (val2) == SSA_NAME)\n-    return val == val2 ? 0 : -2;\n-  else\n-    {\n-      int cmp = compare_values (val, val2);\n-      if (cmp == -1)\n-\treturn 1;\n-      else if (cmp == 0 || cmp == 1)\n-\treturn 0;\n-      else\n-\treturn -2;\n-    }\n-\n-  return 0;\n-}\n-\n /* Try to derive a nonnegative or nonzero range out of STMT relying\n    primarily on generic routines in fold in conjunction with range data.\n    Store the result in *VR */"}]}