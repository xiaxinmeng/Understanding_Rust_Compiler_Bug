{"sha": "87c2399d8985816fef6925e743eb16c074d5bc7a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODdjMjM5OWQ4OTg1ODE2ZmVmNjkyNWU3NDNlYjE2YzA3NGQ1YmM3YQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-08-20T20:15:19Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-08-20T20:15:19Z"}, "message": "config.gcc (arm*-*-symbianelf*): Add t-symbian Makefile fragment.\n\n\t* config.gcc (arm*-*-symbianelf*): Add t-symbian Makefile\n\tfragment.\n\t* config/arm/bpabi.h (RENAME_LIBRARY_SET): Fix typo.\n\t(SUBTARGET_EXTRA_ASM_SPEC): Pass -meabi=3 to the assembler.\n\t* config/arm/symbian.h (SUBTARGET_CPU_DEFAULT): Assume ARMV5\n\tarchitecture.\n\t(SUBTARGET_ASM_FLOAT_SPEC): Default to -mfpu=vfp for hard-float\n\tconfigurations.\n\t* config/arm/t-symbian: New file.\n\nFrom-SVN: r86338", "tree": {"sha": "e7757c8802d1e5b9a35203b3d0939b8de7752be2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7757c8802d1e5b9a35203b3d0939b8de7752be2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/87c2399d8985816fef6925e743eb16c074d5bc7a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87c2399d8985816fef6925e743eb16c074d5bc7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87c2399d8985816fef6925e743eb16c074d5bc7a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87c2399d8985816fef6925e743eb16c074d5bc7a/comments", "author": null, "committer": null, "parents": [{"sha": "d2294baa8bc194e9b4ba45eb0e5b06e50b15ca99", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2294baa8bc194e9b4ba45eb0e5b06e50b15ca99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2294baa8bc194e9b4ba45eb0e5b06e50b15ca99"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "0eacb5d8bf8cd77fc92a4722c811478fd41c1be5", "filename": "gcc/config.gcc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87c2399d8985816fef6925e743eb16c074d5bc7a/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87c2399d8985816fef6925e743eb16c074d5bc7a/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=87c2399d8985816fef6925e743eb16c074d5bc7a", "patch": "@@ -658,13 +658,14 @@ arm*-*-eabi* | arm*-*-symbianelf* )\n \t# TImode.\n \tneed_64bit_hwint=yes\n \ttm_file=\"dbxelf.h elfos.h arm/unknown-elf.h arm/elf.h arm/bpabi.h\"\n+\ttmake_file=\"t-slibgcc-elf-ver arm/t-arm arm/t-arm-elf arm/t-bpabi\"\n \tcase ${target} in\n \tarm*-*-symbianelf*)\n \t  tm_file=\"${tm_file} arm/symbian.h\"\n+\t  tmake_file=\"${tmake_file} arm/t-symbian\"\n \t  ;;\n \tesac\n \ttm_file=\"${tm_file} arm/aout.h arm/arm.h\"\n-\ttmake_file=\"t-slibgcc-elf-ver arm/t-arm arm/t-arm-elf arm/t-bpabi\"\n \t;;\n arm*-*-rtems*)\n \ttm_file=\"dbxelf.h elfos.h arm/unknown-elf.h arm/elf.h arm/aout.h arm/arm.h arm/rtems-elf.h rtems.h\""}, {"sha": "4831dfb61bc5203d312efdc05c0152e37b04ffa7", "filename": "gcc/config/arm/bpabi.h", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87c2399d8985816fef6925e743eb16c074d5bc7a/gcc%2Fconfig%2Farm%2Fbpabi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87c2399d8985816fef6925e743eb16c074d5bc7a/gcc%2Fconfig%2Farm%2Fbpabi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fbpabi.h?ref=87c2399d8985816fef6925e743eb16c074d5bc7a", "patch": "@@ -36,13 +36,17 @@\n /* The BPABI integer comparision routines return { -1, 0, 1 }.  */\n #define TARGET_LIB_INT_CMP_BIASED !TARGET_BPABI\n \n+/* Tell the assembler to build BPABI binaries.  */\n+#undef SUBTARGET_EXTRA_ASM_SPEC\n+#define SUBTARGET_EXTRA_ASM_SPEC \"-meabi=3\"\n+\n /* The generic link spec in elf.h does not support shared libraries.  */\n #undef LINK_SPEC\n #define LINK_SPEC \"%{mbig-endian:-EB} %{mlittle-endian:-EL} \"\t\t\\\n   \"%{static:-Bstatic} %{shared:-shared} %{symbolic:-Bsymbolic} \"\t\\\n   \"-X\"\n \n-#if defined (__thumb__) && !defined (__THUMB_INTERWORD) \n+#if defined (__thumb__) && !defined (__THUMB_INTERWORK) \n #define RENAME_LIBRARY_SET \".thumb_set\"\n #else\n #define RENAME_LIBRARY_SET \".set\""}, {"sha": "d048652fe01bf48bc978d07e41e58ec729fc65f5", "filename": "gcc/config/arm/symbian.h", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87c2399d8985816fef6925e743eb16c074d5bc7a/gcc%2Fconfig%2Farm%2Fsymbian.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87c2399d8985816fef6925e743eb16c074d5bc7a/gcc%2Fconfig%2Farm%2Fsymbian.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fsymbian.h?ref=87c2399d8985816fef6925e743eb16c074d5bc7a", "patch": "@@ -52,3 +52,16 @@\n \n /* Support the \"dllimport\" attribute.  */\n #define TARGET_DLLIMPORT_DECL_ATTRIBUTES 1\n+\n+/* Symbian OS assumes ARM V5 or above.  Since -march=armv5 is\n+   equivalent to making the ARM 10TDMI core the default, we can set\n+   SUBTARGET_CPU_DEFAULT and get an equivalent effect.  */\n+#undef SUBTARGET_CPU_DEFAULT\n+#define SUBTARGET_CPU_DEFAULT TARGET_CPU_arm10tdmi\n+\n+/* The assembler should assume the VFP FPU format when the hard-float\n+   ABI is in use.  */\n+#undef SUBTARGET_ASM_FLOAT_SPEC\n+#define SUBTARGET_ASM_FLOAT_SPEC \\\n+  \"%{!mfpu=*:%{mfloat-abi=hard:-mfpu=vfp}}\"\n+  "}]}