{"sha": "7783daa76cdf6a2a71775b41269b07039b0247a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzc4M2RhYTc2Y2RmNmEyYTcxNzc1YjQxMjY5YjA3MDM5YjAyNDdhMw==", "commit": {"author": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2013-11-06T13:11:14Z"}, "committer": {"name": "Andrew Macleod", "email": "amacleod@gcc.gnu.org", "date": "2013-11-06T13:11:14Z"}, "message": "gimple.h (block_in_transaction): Move to basic-block.h and rename.\n\n\n\t* gimple.h (block_in_transaction): Move to basic-block.h and rename.\n\t(gimple_in_transaction): Use bb_in_transaction.\n\t* basic-block.h (bb_in_transaction): Relocate here and rename.\n\t* tree-ssa-loop-im.c (execute_sm): Use bb_in_transaction.\n\nFrom-SVN: r204455", "tree": {"sha": "412636d3b3527f6788001a096f9c0362869817f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/412636d3b3527f6788001a096f9c0362869817f5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7783daa76cdf6a2a71775b41269b07039b0247a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7783daa76cdf6a2a71775b41269b07039b0247a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7783daa76cdf6a2a71775b41269b07039b0247a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7783daa76cdf6a2a71775b41269b07039b0247a3/comments", "author": null, "committer": null, "parents": [{"sha": "3f5c390ddd57a9407fce9b7a471d01972e916367", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f5c390ddd57a9407fce9b7a471d01972e916367", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f5c390ddd57a9407fce9b7a471d01972e916367"}], "stats": {"total": 27, "additions": 17, "deletions": 10}, "files": [{"sha": "7465c4ae37215513c28dbbd05795769f55c30a19", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7783daa76cdf6a2a71775b41269b07039b0247a3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7783daa76cdf6a2a71775b41269b07039b0247a3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7783daa76cdf6a2a71775b41269b07039b0247a3", "patch": "@@ -1,3 +1,10 @@\n+2013-11-06  Andrew MacLeod  <amacleod@redhat.com>\n+\n+\t* gimple.h (block_in_transaction): Move to basic-block.h and rename.\n+\t(gimple_in_transaction): Use bb_in_transaction.\n+\t* basic-block.h (bb_in_transaction): Relocate here and rename.\n+\t* tree-ssa-loop-im.c (execute_sm): Use bb_in_transaction.\n+\n 2013-11-06  Richard Biener  <rguenther@suse.de>\n \n \t* tree.c (drop_tree_overflow): New function."}, {"sha": "9c28f14afa4f6df4a7cd0ee093485e1a411b519a", "filename": "gcc/basic-block.h", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7783daa76cdf6a2a71775b41269b07039b0247a3/gcc%2Fbasic-block.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7783daa76cdf6a2a71775b41269b07039b0247a3/gcc%2Fbasic-block.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbasic-block.h?ref=7783daa76cdf6a2a71775b41269b07039b0247a3", "patch": "@@ -897,6 +897,14 @@ struct loop *get_loop_copy (struct loop *);\n \n #include \"cfghooks.h\"\n \n+/* Return true if BB is in a transaction.  */\n+\n+static inline bool\n+bb_in_transaction (basic_block bb)\n+{\n+  return bb->flags & BB_IN_TRANSACTION;\n+}\n+\n /* Return true when one of the predecessor edges of BB is marked with EDGE_EH.  */\n static inline bool\n bb_has_eh_pred (basic_block bb)"}, {"sha": "33e790c18da5881d3bf431117f934465d38ebd06", "filename": "gcc/gimple.h", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7783daa76cdf6a2a71775b41269b07039b0247a3/gcc%2Fgimple.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7783daa76cdf6a2a71775b41269b07039b0247a3/gcc%2Fgimple.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple.h?ref=7783daa76cdf6a2a71775b41269b07039b0247a3", "patch": "@@ -1564,20 +1564,12 @@ gimple_set_has_volatile_ops (gimple stmt, bool volatilep)\n     stmt->gsbase.has_volatile_ops = (unsigned) volatilep;\n }\n \n-/* Return true if BB is in a transaction.  */\n-\n-static inline bool\n-block_in_transaction (basic_block bb)\n-{\n-  return flag_tm && bb->flags & BB_IN_TRANSACTION;\n-}\n-\n /* Return true if STMT is in a transaction.  */\n \n static inline bool\n gimple_in_transaction (gimple stmt)\n {\n-  return block_in_transaction (gimple_bb (stmt));\n+  return bb_in_transaction (gimple_bb (stmt));\n }\n \n /* Return true if statement STMT may access memory.  */"}, {"sha": "339e7f267a210710b96d4ba7c3d11db5ae310c42", "filename": "gcc/tree-ssa-loop-im.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7783daa76cdf6a2a71775b41269b07039b0247a3/gcc%2Ftree-ssa-loop-im.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7783daa76cdf6a2a71775b41269b07039b0247a3/gcc%2Ftree-ssa-loop-im.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-im.c?ref=7783daa76cdf6a2a71775b41269b07039b0247a3", "patch": "@@ -1948,7 +1948,7 @@ execute_sm (struct loop *loop, vec<edge> exits, mem_ref_p ref)\n   fmt_data.orig_loop = loop;\n   for_each_index (&ref->mem.ref, force_move_till, &fmt_data);\n \n-  if (block_in_transaction (loop_preheader_edge (loop)->src)\n+  if (bb_in_transaction (loop_preheader_edge (loop)->src)\n       || !PARAM_VALUE (PARAM_ALLOW_STORE_DATA_RACES))\n     multi_threaded_model_p = true;\n "}]}