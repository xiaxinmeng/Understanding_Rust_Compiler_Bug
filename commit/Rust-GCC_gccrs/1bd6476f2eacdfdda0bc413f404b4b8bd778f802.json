{"sha": "1bd6476f2eacdfdda0bc413f404b4b8bd778f802", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWJkNjQ3NmYyZWFjZGZkZGEwYmM0MTNmNDA0YjRiOGJkNzc4ZjgwMg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2002-03-25T00:44:36Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-03-25T00:44:36Z"}, "message": "varasm.c (asm_emit_uninitialised): Revert 2002-03-14 change.\n\n        * varasm.c (asm_emit_uninitialised): Revert 2002-03-14 change.\n        Do resolve_unique_section before shared data clause.\n\n        * gcc.dg/weak-1.c: Use -fno-common.\n\nFrom-SVN: r51289", "tree": {"sha": "61b54425504cd2bf292d5344c0e75c018c7580ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61b54425504cd2bf292d5344c0e75c018c7580ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1bd6476f2eacdfdda0bc413f404b4b8bd778f802", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bd6476f2eacdfdda0bc413f404b4b8bd778f802", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bd6476f2eacdfdda0bc413f404b4b8bd778f802", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bd6476f2eacdfdda0bc413f404b4b8bd778f802/comments", "author": null, "committer": null, "parents": [{"sha": "479e51f6ed45ba2ba5715404b3025d5d3fc96ddd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/479e51f6ed45ba2ba5715404b3025d5d3fc96ddd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/479e51f6ed45ba2ba5715404b3025d5d3fc96ddd"}], "stats": {"total": 26, "additions": 14, "deletions": 12}, "files": [{"sha": "7ac7150c19dc417834f86eede85f6e1a02290147", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bd6476f2eacdfdda0bc413f404b4b8bd778f802/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bd6476f2eacdfdda0bc413f404b4b8bd778f802/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1bd6476f2eacdfdda0bc413f404b4b8bd778f802", "patch": "@@ -1,3 +1,8 @@\n+2002-03-24  Richard Henderson  <rth@redhat.com>\n+\n+\t* varasm.c (asm_emit_uninitialised): Revert 2002-03-14 change.\n+\tDo resolve_unique_section before shared data clause.\n+\n 2002-03-24  Richard Henderson  <rth@redhat.com>\n \n \t* config/alpha/elf.h (STARTFILE_SPEC): Use crtbeginT with -static."}, {"sha": "528a2dc3a11d6a28bb8d7263bf1dacea46183cf5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bd6476f2eacdfdda0bc413f404b4b8bd778f802/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bd6476f2eacdfdda0bc413f404b4b8bd778f802/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1bd6476f2eacdfdda0bc413f404b4b8bd778f802", "patch": "@@ -1,3 +1,7 @@\n+2002-03-24  Richard Henderson  <rth@redhat.com>\n+\n+\t* gcc.dg/weak-1.c: Use -fno-common.\n+\n 2002-03-25  David Billinghurst  <David.Billinghurst@riotinto.com>\n \n \t* g77.dg/f77-edit-apostrophe-out.f: New test"}, {"sha": "2e736f8f186936c4ecffb5f6c5ed533b35087c47", "filename": "gcc/testsuite/gcc.dg/weak-1.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bd6476f2eacdfdda0bc413f404b4b8bd778f802/gcc%2Ftestsuite%2Fgcc.dg%2Fweak-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bd6476f2eacdfdda0bc413f404b4b8bd778f802/gcc%2Ftestsuite%2Fgcc.dg%2Fweak-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fweak-1.c?ref=1bd6476f2eacdfdda0bc413f404b4b8bd778f802", "patch": "@@ -1,4 +1,6 @@\n /* { dg-do compile } */\n+/* { dg-options \"-fno-common\" } */\n+\n /* COFF does not support weak, and dg doesn't support UNSUPPORTED.  */\n /* { dg-do compile { xfail *-*-coff i?86-pc-cygwin } } */\n "}, {"sha": "ad0ef708abf7b02abb030432b1ecc9dbacf47c1e", "filename": "gcc/varasm.c", "status": "modified", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bd6476f2eacdfdda0bc413f404b4b8bd778f802/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bd6476f2eacdfdda0bc413f404b4b8bd778f802/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=1bd6476f2eacdfdda0bc413f404b4b8bd778f802", "patch": "@@ -1395,16 +1395,9 @@ asm_emit_uninitialised (decl, name, size, rounded)\n \tdestination = asm_dest_common;\n     }\n \n-  switch (destination)\n-    {\n-    case asm_dest_common:\n-      if (! DECL_WEAK (decl))\n-\tbreak;\n-    case asm_dest_bss:\n-      globalize_decl (decl);\n-    default:\n-      break;\n-    }\n+  if (destination == asm_dest_bss)\n+    globalize_decl (decl);\n+  resolve_unique_section (decl, 0);\n \n   if (flag_shared_data)\n     {\n@@ -1430,8 +1423,6 @@ asm_emit_uninitialised (decl, name, size, rounded)\n \t}\n     }\n \n-  resolve_unique_section (decl, 0);\n-\n   switch (destination)\n     {\n #ifdef ASM_EMIT_BSS"}]}