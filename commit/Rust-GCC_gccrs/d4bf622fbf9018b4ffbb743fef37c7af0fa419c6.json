{"sha": "d4bf622fbf9018b4ffbb743fef37c7af0fa419c6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDRiZjYyMmZiZjkwMThiNGZmYmI3NDNmZWYzN2M3YWYwZmE0MTljNg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2017-01-13T10:13:41Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2017-01-13T10:13:41Z"}, "message": "[multiple changes]\n\n2017-01-13  Gary Dismukes  <dismukes@adacore.com>\n\n\t* exp_util.adb: Minor reformatting.\n\n2017-01-13  Yannick Moy  <moy@adacore.com>\n\n\t* exp_spark.adb: Code cleanup.\n\t* sem_ch9.adb (Analyze_Delay_Until): Resolve\n\texpression so that calls are identified as such inside delay\n\tuntil.\n\nFrom-SVN: r244405", "tree": {"sha": "7bda468665216a3f3c8b3f01d195de5fb8d0bf3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7bda468665216a3f3c8b3f01d195de5fb8d0bf3a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6/comments", "author": null, "committer": null, "parents": [{"sha": "53a5377aac21ee96adacdcbc9fdf0535d4f1fb7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53a5377aac21ee96adacdcbc9fdf0535d4f1fb7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53a5377aac21ee96adacdcbc9fdf0535d4f1fb7b"}], "stats": {"total": 51, "additions": 27, "deletions": 24}, "files": [{"sha": "ea4f6bc12cf9ddef0d4d8cb8cdefc0f0583d223b", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=d4bf622fbf9018b4ffbb743fef37c7af0fa419c6", "patch": "@@ -1,3 +1,14 @@\n+2017-01-13  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* exp_util.adb: Minor reformatting.\n+\n+2017-01-13  Yannick Moy  <moy@adacore.com>\n+\n+\t* exp_spark.adb: Code cleanup.\n+\t* sem_ch9.adb (Analyze_Delay_Until): Resolve\n+\texpression so that calls are identified as such inside delay\n+\tuntil.\n+\n 2017-01-13  Ed Schonberg  <schonberg@adacore.com>\n \n \t* exp_util.adb (Insert_Actions): Handle Iterated_Component_Association."}, {"sha": "6b355aa99c093bd0a015125f069df88b2095101d", "filename": "gcc/ada/exp_spark.adb", "status": "modified", "additions": 12, "deletions": 20, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6/gcc%2Fada%2Fexp_spark.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6/gcc%2Fada%2Fexp_spark.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_spark.adb?ref=d4bf622fbf9018b4ffbb743fef37c7af0fa419c6", "patch": "@@ -124,36 +124,28 @@ package body Exp_SPARK is\n       Aname   : constant Name_Id      := Attribute_Name (N);\n       Attr_Id : constant Attribute_Id := Get_Attribute_Id (Aname);\n       Loc     : constant Source_Ptr   := Sloc (N);\n-\n-      Call : Node_Id;\n-      Expr : Node_Id;\n+      Typ     : constant Entity_Id    := Etype (N);\n+      Expr    : Node_Id;\n \n    begin\n       if Attr_Id = Attribute_To_Address then\n \n-         --  Extract argument to later reanalyze it in the new context\n+         --  Extract and convert argument to expected type for call\n \n-         Expr := First (Expressions (N));\n-         Nlists.Remove (Expr);\n-         Set_Etype    (Expr, Empty);\n-         Set_Analyzed (Expr, False);\n+         Expr :=\n+           Make_Type_Conversion (Loc,\n+             Subtype_Mark =>\n+               New_Occurrence_Of (RTE (RE_Integer_Address), Loc),\n+             Expression   => Relocate_Node (First (Expressions (N))));\n \n-         --  Create the call and insert it in the tree\n+         --  Replace attribute reference with call\n \n-         Call :=\n+         Rewrite (N,\n            Make_Function_Call (Loc,\n              Name                   =>\n                New_Occurrence_Of (RTE (RE_To_Address), Loc),\n-             Parameter_Associations => New_List (\n-               Expr));\n-\n-         Set_Etype (Call, Etype (N));\n-         Rewrite (N, Call);\n-\n-         --  Reanalyze argument and call in the new context\n-\n-         Analyze_And_Resolve (Expr, Rtsfind.RTE (Rtsfind.RE_Integer_Address));\n-         Analyze_And_Resolve (N, Etype (N));\n+             Parameter_Associations => New_List (Expr)));\n+         Analyze_And_Resolve (N, Typ);\n       end if;\n    end Expand_SPARK_Attribute_Reference;\n "}, {"sha": "e8654bc09547d9fa6ad4103d2408b614ff44fdde", "filename": "gcc/ada/exp_util.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6/gcc%2Fada%2Fexp_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6/gcc%2Fada%2Fexp_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_util.adb?ref=d4bf622fbf9018b4ffbb743fef37c7af0fa419c6", "patch": "@@ -5709,10 +5709,10 @@ package body Exp_Util is\n             --  an association that will generate a loop, its Loop_Actions\n             --  attribute is already initialized (see exp_aggr.adb).\n \n-            --  The list of loop_actions can in turn generate additional ones,\n+            --  The list of Loop_Actions can in turn generate additional ones,\n             --  that are inserted before the associated node. If the associated\n             --  node is outside the aggregate, the new actions are collected\n-            --  at the end of the loop actions, to respect the order in which\n+            --  at the end of the Loop_Actions, to respect the order in which\n             --  they are to be elaborated.\n \n             when N_Component_Association\n@@ -5731,7 +5731,7 @@ package body Exp_Util is\n \n                      begin\n                         --  Check whether these actions were generated by a\n-                        --  declaration that is part of the loop_ actions for\n+                        --  declaration that is part of the Loop_Actions for\n                         --  the component_association.\n \n                         Decl := Assoc_Node;"}, {"sha": "1c81454974345dc6d345ec9b9669ff23d93b0953", "filename": "gcc/ada/sem_ch9.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6/gcc%2Fada%2Fsem_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4bf622fbf9018b4ffbb743fef37c7af0fa419c6/gcc%2Fada%2Fsem_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch9.adb?ref=d4bf622fbf9018b4ffbb743fef37c7af0fa419c6", "patch": "@@ -1171,7 +1171,7 @@ package body Sem_Ch9 is\n       Check_SPARK_05_Restriction (\"delay statement is not allowed\", N);\n       Check_Restriction (No_Delay, N);\n       Check_Potentially_Blocking_Operation (N);\n-      Analyze (E);\n+      Analyze_And_Resolve (E);\n       Typ := First_Subtype (Etype (E));\n \n       if not Is_RTE (Typ, RO_CA_Time) and then"}]}