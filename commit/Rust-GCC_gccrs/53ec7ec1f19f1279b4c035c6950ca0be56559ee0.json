{"sha": "53ec7ec1f19f1279b4c035c6950ca0be56559ee0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTNlYzdlYzFmMTlmMTI3OWI0YzAzNWM2OTUwY2EwYmU1NjU1OWVlMA==", "commit": {"author": {"name": "Jerry Quinn", "email": "jlquinn@optonline.net", "date": "2003-03-06T18:10:26Z"}, "committer": {"name": "Jerry Quinn", "email": "jlquinn@gcc.gnu.org", "date": "2003-03-06T18:10:26Z"}, "message": "ios.cc (ios_base::_M_init): Remove _M_word_size.\n\n2003-03-06  Jerry Quinn  <jlquinn@optonline.net>\n\n\t* src/ios.cc (ios_base::_M_init): Remove _M_word_size.\n\t(ios_base::ios_base): Set _M_word, _M_word_size.\n\t(ios_base::~ios_base): Remove redundant test.\n\t* testsuite/27_io/ios_base_storage.cc (test03): New.\n\nFrom-SVN: r63896", "tree": {"sha": "8dac2f3c78af236d7bc21a8954c55ad3f22e7531", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8dac2f3c78af236d7bc21a8954c55ad3f22e7531"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/53ec7ec1f19f1279b4c035c6950ca0be56559ee0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53ec7ec1f19f1279b4c035c6950ca0be56559ee0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53ec7ec1f19f1279b4c035c6950ca0be56559ee0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53ec7ec1f19f1279b4c035c6950ca0be56559ee0/comments", "author": {"login": "jlquinn", "id": 826841, "node_id": "MDQ6VXNlcjgyNjg0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/826841?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlquinn", "html_url": "https://github.com/jlquinn", "followers_url": "https://api.github.com/users/jlquinn/followers", "following_url": "https://api.github.com/users/jlquinn/following{/other_user}", "gists_url": "https://api.github.com/users/jlquinn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlquinn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlquinn/subscriptions", "organizations_url": "https://api.github.com/users/jlquinn/orgs", "repos_url": "https://api.github.com/users/jlquinn/repos", "events_url": "https://api.github.com/users/jlquinn/events{/privacy}", "received_events_url": "https://api.github.com/users/jlquinn/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2085604548a23235008474c755b9ac37a413de4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2085604548a23235008474c755b9ac37a413de4d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2085604548a23235008474c755b9ac37a413de4d"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "965a33302df7730ecb4d16b3feb23461e7d2f96c", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53ec7ec1f19f1279b4c035c6950ca0be56559ee0/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53ec7ec1f19f1279b4c035c6950ca0be56559ee0/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=53ec7ec1f19f1279b4c035c6950ca0be56559ee0", "patch": "@@ -1,3 +1,10 @@\n+2003-03-06  Jerry Quinn  <jlquinn@optonline.net>\n+\n+\t* src/ios.cc (ios_base::_M_init): Remove _M_word_size.\n+\t(ios_base::ios_base): Set _M_word, _M_word_size.\n+\t(ios_base::~ios_base): Remove redundant test.\n+\t* testsuite/27_io/ios_base_storage.cc (test03): New.\n+\n 2003-03-04  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* src/strstream.cc, include/bits/basic_string.tcc: Remove"}, {"sha": "f068a2993619cea8fb3ae5329f87e51c8dd27494", "filename": "libstdc++-v3/src/ios.cc", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53ec7ec1f19f1279b4c035c6950ca0be56559ee0/libstdc%2B%2B-v3%2Fsrc%2Fios.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53ec7ec1f19f1279b4c035c6950ca0be56559ee0/libstdc%2B%2B-v3%2Fsrc%2Fios.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fios.cc?ref=53ec7ec1f19f1279b4c035c6950ca0be56559ee0", "patch": "@@ -288,7 +288,6 @@ namespace std\n     _M_width = 0;\n     _M_flags = skipws | dec;\n     _M_callbacks = 0;\n-    _M_word_size = 0;\n     _M_ios_locale = locale();\n   }  \n   \n@@ -302,7 +301,8 @@ namespace std\n     return __old;\n   }\n \n-  ios_base::ios_base() : _M_callbacks(0), _M_word(0), _M_locale_cache(0)\n+  ios_base::ios_base() : _M_callbacks(0), _M_word(_M_local_word),\n+\t\t\t _M_word_size(_S_local_word_size), _M_locale_cache(0)\n   {\n     // Do nothing: basic_ios::init() does it.  \n     // NB: _M_callbacks and _M_word must be zero for non-initialized\n@@ -314,7 +314,7 @@ namespace std\n   {\n     _M_call_callbacks(erase_event);\n     _M_dispose_callbacks();\n-    if (_M_word && _M_word != _M_local_word) \n+    if (_M_word != _M_local_word) \n       {\n \tdelete [] _M_word;\n \t_M_word = 0;"}, {"sha": "6af52c0a8c076ec512b7ef6011dcc1ef89cbf486", "filename": "libstdc++-v3/testsuite/27_io/ios_base_storage.cc", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53ec7ec1f19f1279b4c035c6950ca0be56559ee0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fios_base_storage.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53ec7ec1f19f1279b4c035c6950ca0be56559ee0/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fios_base_storage.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fios_base_storage.cc?ref=53ec7ec1f19f1279b4c035c6950ca0be56559ee0", "patch": "@@ -91,10 +91,25 @@ void test02()\n   VERIFY( l == 0 );\n }\n \n+class derived : public std::ios_base\n+{\n+public:\n+  derived() {}\n+};\n+\n+void test03()\n+{\n+  derived d;\n+\n+  d.pword(0) = &d;\n+  d.iword(0) = 1;\n+}\n+\n int main(void)\n {\n   __gnu_cxx_test::set_memory_limits();\n   test01();\n   test02();\n+  test03();\n   return 0;\n }"}]}