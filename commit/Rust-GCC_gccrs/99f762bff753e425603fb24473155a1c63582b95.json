{"sha": "99f762bff753e425603fb24473155a1c63582b95", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTlmNzYyYmZmNzUzZTQyNTYwM2ZiMjQ0NzMxNTVhMWM2MzU4MmI5NQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-04-26T18:06:52Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-04-26T18:06:52Z"}, "message": "(truncdiqi2+[456]): Add patterns to simplify ZERO_EXTEND\nof a TRUNCATE.\n\nFrom-SVN: r9478", "tree": {"sha": "9f84dbc7c1297bc71d95266a2fe960f5df7ab386", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f84dbc7c1297bc71d95266a2fe960f5df7ab386"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/99f762bff753e425603fb24473155a1c63582b95", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99f762bff753e425603fb24473155a1c63582b95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99f762bff753e425603fb24473155a1c63582b95", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99f762bff753e425603fb24473155a1c63582b95/comments", "author": null, "committer": null, "parents": [{"sha": "6ac342776accd452ebff3e1484731d0da2f8fd84", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ac342776accd452ebff3e1484731d0da2f8fd84", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ac342776accd452ebff3e1484731d0da2f8fd84"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "775013eec3257f76d3ab323a2f8e0938b835f7e5", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99f762bff753e425603fb24473155a1c63582b95/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99f762bff753e425603fb24473155a1c63582b95/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=99f762bff753e425603fb24473155a1c63582b95", "patch": "@@ -2113,6 +2113,38 @@ move\\\\t%0,%z4\\\\n\\\\\n   [(set_attr \"type\"\t\"darith\")\n    (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"2\")])\n+\n+;; Combiner patterns to optimize truncate/zero_extend combinations.\n+\n+(define_insn \"\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=d\")\n+\t(zero_extend:SI (truncate:HI\n+\t\t\t (match_operand:DI 1 \"register_operand\" \"d\"))))]\n+  \"TARGET_64BIT\"\n+  \"andi\\\\t%0,%1,0xffff\"\n+  [(set_attr \"type\"\t\"darith\")\n+   (set_attr \"mode\"\t\"SI\")\n+   (set_attr \"length\"\t\"1\")])\n+\n+(define_insn \"\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=d\")\n+\t(zero_extend:SI (truncate:QI\n+\t\t\t (match_operand:DI 1 \"register_operand\" \"d\"))))]\n+  \"TARGET_64BIT\"\n+  \"andi\\\\t%0,%1,0xff\"\n+  [(set_attr \"type\"\t\"darith\")\n+   (set_attr \"mode\"\t\"SI\")\n+   (set_attr \"length\"\t\"1\")])\n+\n+(define_insn \"\"\n+  [(set (match_operand:HI 0 \"register_operand\" \"=d\")\n+\t(zero_extend:HI (truncate:QI\n+\t\t\t (match_operand:DI 1 \"register_operand\" \"d\"))))]\n+  \"TARGET_64BIT\"\n+  \"andi\\\\t%0,%1,0xff\"\n+  [(set_attr \"type\"\t\"darith\")\n+   (set_attr \"mode\"\t\"HI\")\n+   (set_attr \"length\"\t\"1\")])\n \f\n ;;\n ;;  ...................."}]}