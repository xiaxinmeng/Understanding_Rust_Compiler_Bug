{"sha": "4888636ee7db5e1702b7716f9e07f3d5c0e69c23", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDg4ODYzNmVlN2RiNWUxNzAyYjc3MTZmOWUwN2YzZDVjMGU2OWMyMw==", "commit": {"author": {"name": "Ganesh Gopalasubramanian", "email": "gganesh@gcc.gnu.org", "date": "2012-11-16T07:18:37Z"}, "committer": {"name": "Ganesh Gopalasubramanian", "email": "gganesh@gcc.gnu.org", "date": "2012-11-16T07:18:37Z"}, "message": "AMD bdver3 enablement\n\nFrom-SVN: r193549", "tree": {"sha": "d55473198f7e916d42d5a8d2087d0d5e538b3439", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d55473198f7e916d42d5a8d2087d0d5e538b3439"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4888636ee7db5e1702b7716f9e07f3d5c0e69c23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4888636ee7db5e1702b7716f9e07f3d5c0e69c23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4888636ee7db5e1702b7716f9e07f3d5c0e69c23", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4888636ee7db5e1702b7716f9e07f3d5c0e69c23/comments", "author": null, "committer": null, "parents": [{"sha": "eb2f2b44dd5787351f9fef5703b6cb8163c3c7ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb2f2b44dd5787351f9fef5703b6cb8163c3c7ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb2f2b44dd5787351f9fef5703b6cb8163c3c7ce"}], "stats": {"total": 746, "additions": 746, "deletions": 0}, "files": [{"sha": "cab8fa77a02b8931790617cad136831b2d69e63a", "filename": "gcc/config/i386/bdver3.md", "status": "added", "additions": 746, "deletions": 0, "changes": 746, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4888636ee7db5e1702b7716f9e07f3d5c0e69c23/gcc%2Fconfig%2Fi386%2Fbdver3.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4888636ee7db5e1702b7716f9e07f3d5c0e69c23/gcc%2Fconfig%2Fi386%2Fbdver3.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fbdver3.md?ref=4888636ee7db5e1702b7716f9e07f3d5c0e69c23", "patch": "@@ -0,0 +1,746 @@\n+;; Copyright (C) 2012, Free Software Foundation, Inc.\n+;;\n+;; This file is part of GCC.\n+;;\n+;; GCC is free software; you can redistribute it and/or modify\n+;; it under the terms of the GNU General Public License as published by\n+;; the Free Software Foundation; either version 3, or (at your option)\n+;; any later version.\n+;;\n+;; GCC is distributed in the hope that it will be useful,\n+;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n+;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+;; GNU General Public License for more details.\n+;;\n+;; You should have received a copy of the GNU General Public License\n+;; along with GCC; see the file COPYING3.  If not see\n+;; <http://www.gnu.org/licenses/>.\n+;;\n+;; AMD bdver3 Scheduling\n+;;\n+;; The bdver3 contains three pipelined FP units and two integer units.\n+;; Fetching and decoding logic is different from previous fam15 processors.\n+;; Fetching is done every two cycles rather than every cycle and\n+;; two decode units are available. The decode units therefore decode\n+;; four instructions in two cycles.\n+;;\n+;; The load/store queue unit is not attached to the schedulers but\n+;; communicates with all the execution units separately instead.\n+;;\n+;; bdver3 belong to fam15 processors. We use the same insn attribute\n+;; that was used for bdver1 decoding scheme.\n+\n+(define_automaton \"bdver3,bdver3_ieu,bdver3_load,bdver3_fp,bdver3_agu\")\n+\n+(define_cpu_unit \"bdver3-decode0\" \"bdver3\")\n+(define_cpu_unit \"bdver3-decode1\" \"bdver3\")\n+(define_cpu_unit \"bdver3-decodev\" \"bdver3\")\n+\n+;; Double decoded instructions take two cycles whereas\n+;; direct instructions take one cycle.\n+;; Therefore four direct instructions can be decoded by\n+;; two decoders in two cycles.\n+;; Vectorpath instructions are single issue instructions.\n+;; So, we have separate unit for vector instructions.\n+(exclusion_set \"bdver3-decodev\" \"bdver3-decode0,bdver3-decode1\")\n+\n+(define_reservation \"bdver3-vector\" \"bdver3-decodev\")\n+(define_reservation \"bdver3-direct\" \"(bdver3-decode0|bdver3-decode1)\")\n+;; Double instructions take two cycles to decode.\n+(define_reservation \"bdver3-double\" \"(bdver3-decode0|bdver3-decode1)*2\")\n+\n+(define_cpu_unit \"bdver3-ieu0\" \"bdver3_ieu\")\n+(define_cpu_unit \"bdver3-ieu1\" \"bdver3_ieu\")\n+(define_reservation \"bdver3-ieu\" \"(bdver3-ieu0|bdver3-ieu1)\")\n+\n+(define_cpu_unit \"bdver3-agu0\" \"bdver3_agu\")\n+(define_cpu_unit \"bdver3-agu1\" \"bdver3_agu\")\n+(define_reservation \"bdver3-agu\" \"(bdver3-agu0|bdver3-agu1)\")\n+\n+(define_cpu_unit \"bdver3-load0\" \"bdver3_load\")\n+(define_cpu_unit \"bdver3-load1\" \"bdver3_load\")\n+(define_reservation \"bdver3-load\" \"bdver3-agu,\n+\t\t\t\t   (bdver3-load0|bdver3-load1),nothing\")\n+;; 128bit SSE instructions issue two loads at once.\n+(define_reservation \"bdver3-load2\" \"bdver3-agu,\n+\t\t\t\t   (bdver3-load0+bdver3-load1),nothing\")\n+\n+(define_reservation \"bdver3-store\" \"(bdver3-load0 | bdver3-load1)\")\n+;; 128bit SSE instructions issue two stores at once.\n+(define_reservation \"bdver3-store2\" \"(bdver3-load0+bdver3-load1)\")\n+\n+;; vectorpath (microcoded) instructions are single issue instructions.\n+;; So, they occupy all the integer units.\n+(define_reservation \"bdver3-ivector\" \"bdver3-ieu0+bdver3-ieu1+\n+                                      bdver3-agu0+bdver3-agu1+\n+                                      bdver3-load0+bdver3-load1\")\n+\n+(define_reservation \"bdver3-fpsched\" \"nothing,nothing,nothing\")\n+\n+;; The floating point loads.\n+(define_reservation \"bdver3-fpload\" \"(bdver3-fpsched + bdver3-load)\")\n+(define_reservation \"bdver3-fpload2\" \"(bdver3-fpsched + bdver3-load2)\")\n+\n+;; Three FP units.\n+(define_cpu_unit \"bdver3-ffma0\" \"bdver3_fp\")\n+(define_cpu_unit \"bdver3-ffma1\" \"bdver3_fp\")\n+(define_cpu_unit \"bdver3-fpsto\" \"bdver3_fp\")\n+\n+(define_reservation \"bdver3-fvector\" \"bdver3-ffma0+bdver3-ffma1+\n+                                      bdver3-fpsto+bdver3-load0+\n+                                      bdver3-load1\")\n+\n+(define_reservation \"bdver3-ffma\"     \"(bdver3-ffma0 | bdver3-ffma1)\")\n+(define_reservation \"bdver3-fcvt\"     \"bdver3-ffma0\")\n+(define_reservation \"bdver3-fmma\"     \"bdver3-ffma0\")\n+(define_reservation \"bdver3-fxbar\"    \"bdver3-ffma1\")\n+(define_reservation \"bdver3-fmal\"     \"(bdver3-ffma0 | bdver3-fpsto)\")\n+(define_reservation \"bdver3-fsto\"     \"bdver3-fpsto\")\n+(define_reservation \"bdver3-fpshuf\"    \"bdver3-fpsto\")\n+\n+;; Jump instructions are executed in the branch unit completely transparent to us.\n+(define_insn_reservation \"bdver3_call\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"call,callv\"))\n+\t\t\t \"bdver3-double,(bdver3-agu | bdver3-ieu),nothing\")\n+;; PUSH mem is double path.\n+(define_insn_reservation \"bdver3_push\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"push\"))\n+\t\t\t \"bdver3-direct,bdver3-ieu,bdver3-store\")\n+;; POP r16/mem are double path.\n+(define_insn_reservation \"bdver3_pop\" 1\n+                         (and (eq_attr \"cpu\" \"bdver3\")\n+                              (eq_attr \"type\" \"pop\"))\n+                         \"bdver3-direct,bdver3-ivector\")\n+;; LEAVE no latency info so far, assume same with amdfam10.\n+(define_insn_reservation \"bdver3_leave\" 3\n+                         (and (eq_attr \"cpu\" \"bdver3\")\n+                              (eq_attr \"type\" \"leave\"))\n+                         \"bdver3-vector,bdver3-ivector\")\n+;; LEA executes in AGU unit with 1 cycle latency on BDVER3.\n+(define_insn_reservation \"bdver3_lea\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"lea\"))\n+\t\t\t \"bdver3-direct,bdver3-ieu\")\n+;; MUL executes in special multiplier unit attached to IEU1.\n+(define_insn_reservation \"bdver3_imul_DI\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"imul\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"DI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none,unknown\"))))\n+\t\t\t \"bdver3-direct,bdver3-ieu1\")\n+(define_insn_reservation \"bdver3_imul\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"imul\")\n+\t\t\t\t   (eq_attr \"memory\" \"none,unknown\")))\n+\t\t\t \"bdver3-direct,bdver3-ieu1\")\n+(define_insn_reservation \"bdver3_imul_mem_DI\" 10\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"imul\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"DI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load,both\"))))\n+\t\t\t \"bdver3-direct,bdver3-load,bdver3-ieu1\")\n+(define_insn_reservation \"bdver3_imul_mem\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"imul\")\n+\t\t\t\t   (eq_attr \"memory\" \"load,both\")))\n+\t\t\t \"bdver3-direct,bdver3-load,bdver3-ieu1\")\n+\n+(define_insn_reservation \"bdver3_str\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"str\")\n+\t\t\t\t   (eq_attr \"memory\" \"load,both,store\")))\n+\t\t\t \"bdver3-vector,bdver3-load,bdver3-ivector\")\n+\n+;; Integer instructions.\n+(define_insn_reservation \"bdver3_idirect\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"bdver1_decode\" \"direct\")\n+\t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none,unknown\"))))\n+\t\t\t \"bdver3-direct,(bdver3-ieu|bdver3-agu)\")\n+(define_insn_reservation \"bdver3_ivector\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"bdver1_decode\" \"vector\")\n+\t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none,unknown\"))))\n+\t\t\t \"bdver3-vector,bdver3-ivector\")\n+(define_insn_reservation \"bdver3_idirect_loadmov\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"imov\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-direct,bdver3-load\")\n+(define_insn_reservation \"bdver3_idirect_load\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"bdver1_decode\" \"direct\")\n+\t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-direct,bdver3-load,bdver3-ieu\")\n+(define_insn_reservation \"bdver3_idirect_movstore\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"imov\")\n+\t\t\t\t   (eq_attr \"memory\" \"store\")))\n+\t\t\t \"bdver3-direct,bdver3-ieu,bdver3-store\")\n+(define_insn_reservation \"bdver3_idirect_both\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"bdver1_decode\" \"direct\")\n+\t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n+\t\t\t\t\t(eq_attr \"memory\" \"both\"))))\n+\t\t\t \"bdver3-direct,bdver3-load,\n+\t\t\t  bdver3-ieu,bdver3-store,\n+\t\t\t  bdver3-store\")\n+(define_insn_reservation \"bdver3_idirect_store\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"bdver1_decode\" \"direct\")\n+\t\t\t\t   (and (eq_attr \"unit\" \"integer,unknown\")\n+\t\t\t\t\t(eq_attr \"memory\" \"store\"))))\n+\t\t\t \"bdver3-direct,(bdver3-ieu+bdver3-agu),\n+\t\t\t  bdver3-store\")\n+;; BDVER3 floating point units.\n+(define_insn_reservation \"bdver3_fldxf\" 13\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"fmov\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"load\")\n+\t\t\t\t\t(eq_attr \"mode\" \"XF\"))))\n+\t\t\t \"bdver3-vector,bdver3-fpload2,bdver3-fvector*9\")\n+(define_insn_reservation \"bdver3_fld\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"fmov\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_fstxf\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"fmov\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"store,both\")\n+\t\t\t\t\t(eq_attr \"mode\" \"XF\"))))\n+\t\t\t \"bdver3-vector,(bdver3-fpsched+bdver3-agu),(bdver3-store2+(bdver3-fvector*6))\")\n+(define_insn_reservation \"bdver3_fst\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"fmov\")\n+\t\t\t\t   (eq_attr \"memory\" \"store,both\")))\n+\t\t\t \"bdver3-double,(bdver3-fpsched),(bdver3-fsto+bdver3-store)\")\n+(define_insn_reservation \"bdver3_fist\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"fistp,fisttp\"))\n+\t\t\t \"bdver3-double,(bdver3-fpsched),(bdver3-fsto+bdver3-store)\")\n+(define_insn_reservation \"bdver3_fmov_bdver3\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"fmov\"))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_fadd_load\" 10\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"fop\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_fadd\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"fop\"))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_fmul_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"fmul\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-double,bdver3-fpload,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_fmul\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"fmul\"))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_fsgn\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"fsgn\"))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_fdiv_load\" 42\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"fdiv\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_fdiv\" 42\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"fdiv\"))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_fpspc_load\" 143\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"fpspc\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-vector,bdver3-fpload,bdver3-fvector\")\n+(define_insn_reservation \"bdver3_fcmov_load\" 17\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"fcmov\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-vector,bdver3-fpload,bdver3-fvector\")\n+(define_insn_reservation \"bdver3_fcmov\" 15\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"fcmov\"))\n+\t\t\t \"bdver3-vector,bdver3-fpsched,bdver3-fvector\")\n+(define_insn_reservation \"bdver3_fcomi_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"fcmp\")\n+\t\t\t\t   (and (eq_attr \"bdver1_decode\" \"double\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-double,bdver3-fpload,(bdver3-ffma | bdver3-fsto)\")\n+(define_insn_reservation \"bdver3_fcomi\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"bdver1_decode\" \"double\")\n+\t\t\t\t   (eq_attr \"type\" \"fcmp\")))\n+\t\t\t \"bdver3-double,bdver3-fpsched,(bdver3-ffma | bdver3-fsto)\")\n+(define_insn_reservation \"bdver3_fcom_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"fcmp\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_fcom\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"fcmp\"))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_fxch\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"fxch\"))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-ffma\")\n+\n+;; SSE loads.\n+(define_insn_reservation \"bdver3_ssevector_avx128_unaligned_load\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"prefix\" \"vex\")\n+\t\t\t\t\t(and (eq_attr \"movu\" \"1\")\n+\t\t\t\t\t     (and (eq_attr \"mode\" \"V4SF,V2DF\")\n+\t\t\t\t\t\t  (eq_attr \"memory\" \"load\"))))))\n+\t\t\t \"bdver3-direct,bdver3-fpload\")\n+(define_insn_reservation \"bdver3_ssevector_avx256_unaligned_load\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"movu\" \"1\")\n+\t\t\t\t        (and (eq_attr \"mode\" \"V8SF,V4DF\")\n+\t\t\t\t             (eq_attr \"memory\" \"load\")))))\n+\t\t\t \"bdver3-double,bdver3-fpload\")\n+(define_insn_reservation \"bdver3_ssevector_sse128_unaligned_load\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"movu\" \"1\")\n+\t\t\t\t        (and (eq_attr \"mode\" \"V4SF,V2DF\")\n+\t\t\t\t             (eq_attr \"memory\" \"load\")))))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-fmal\")\n+(define_insn_reservation \"bdver3_ssevector_avx128_load\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"prefix\" \"vex\")\n+\t\t\t\t        (and (eq_attr \"mode\" \"V4SF,V2DF,TI\")\n+\t\t\t\t             (eq_attr \"memory\" \"load\")))))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-fmal\")\n+(define_insn_reservation \"bdver3_ssevector_avx256_load\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,OI\")\n+\t\t\t\t        (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-double,bdver3-fpload,bdver3-fmal\")\n+(define_insn_reservation \"bdver3_ssevector_sse128_load\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4SF,V2DF,TI\")\n+\t\t\t\t        (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpload\")\n+(define_insn_reservation \"bdver3_ssescalar_movq_load\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"DI\")\n+\t\t\t\t        (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-fmal\")\n+(define_insn_reservation \"bdver3_ssescalar_vmovss_load\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"prefix\" \"vex\")\n+\t\t\t\t        (and (eq_attr \"mode\" \"SF\")\n+\t\t\t\t             (eq_attr \"memory\" \"load\")))))\n+\t\t\t \"bdver3-direct,bdver3-fpload\")\n+(define_insn_reservation \"bdver3_ssescalar_sse128_load\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SF,DF\")\n+\t\t\t\t        (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpload, bdver3-ffma\")\n+(define_insn_reservation \"bdver3_mmxsse_load\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"mmxmov,ssemov\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-direct,bdver3-fpload, bdver3-fmal\")\n+\n+;; SSE stores.\n+(define_insn_reservation \"bdver3_sse_store_avx256\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,OI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"store,both\"))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,((bdver3-fsto+bdver3-store)*2)\")\n+(define_insn_reservation \"bdver3_sse_store\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4SF,V2DF,TI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"store,both\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,((bdver3-fsto+bdver3-store)*2)\")\n+(define_insn_reservation \"bdver3_mmxsse_store_short\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"mmxmov,ssemov\")\n+\t\t\t\t   (eq_attr \"memory\" \"store,both\")))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,(bdver3-fsto+bdver3-store)\")\n+\n+;; Register moves.\n+(define_insn_reservation \"bdver3_ssevector_avx256\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF,OI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,bdver3-fmal\")\n+(define_insn_reservation \"bdver3_movss_movsd\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemov\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SF,DF\")\n+                                        (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_mmxssemov\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"mmxmov,ssemov\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-fmal\")\n+;; SSE logs.\n+(define_insn_reservation \"bdver3_sselog_load_256\" 7\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"sselog,sselog1\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-double,bdver3-fpload,bdver3-fmal\")\n+(define_insn_reservation \"bdver3_sselog_256\" 3\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"sselog,sselog1\")\n+                                   (eq_attr \"mode\" \"V8SF\")))\n+\t\t\t \"bdver3-double,bdver3-fpsched,bdver3-fmal\")\n+(define_insn_reservation \"bdver3_sselog_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"sselog,sselog1\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-fxbar\")\n+(define_insn_reservation \"bdver3_sselog\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"sselog,sselog1\"))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-fxbar\")\n+\n+;; SSE Shuffles\n+(define_insn_reservation \"bdver3_sseshuf_load_256\" 7\n+                         (and (eq_attr \"cpu\" \"bdver3\")\n+                              (and (eq_attr \"type\" \"sseshuf,sseshuf1\")\n+                                   (and (eq_attr \"mode\" \"V8SF\")\n+                                   (eq_attr \"memory\" \"load\"))))\n+                         \"bdver3-double,bdver3-fpload,bdver3-fpshuf\")\n+(define_insn_reservation \"bdver3_sseshuf_load\" 6\n+                         (and (eq_attr \"cpu\" \"bdver3\")\n+                              (and (eq_attr \"type\" \"sseshuf,sseshuf1\")\n+                                   (eq_attr \"memory\" \"load\")))\n+                         \"bdver3-direct,bdver3-fpload,bdver3-fpshuf\")\n+\n+(define_insn_reservation \"bdver3_sseshuf_256\" 3\n+                         (and (eq_attr \"cpu\" \"bdver3\")\n+                              (and (eq_attr \"type\" \"sseshuf\")\n+                                   (eq_attr \"mode\" \"V8SF\")))\n+                         \"bdver3-double,bdver3-fpsched,bdver3-fpshuf\")\n+(define_insn_reservation \"bdver3_sseshuf\" 2\n+                         (and (eq_attr \"cpu\" \"bdver3\")\n+                              (eq_attr \"type\" \"sseshuf,sseshuf1\"))\n+                         \"bdver3-direct,bdver3-fpsched,bdver3-fpshuf\")\n+\n+;; PCMP actually executes in FMAL.\n+(define_insn_reservation \"bdver3_ssecmp_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecmp\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_ssecmp\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"ssecmp\"))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_ssecomi_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecomi\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-double,bdver3-fpload,(bdver3-ffma | bdver3-fsto)\")\n+(define_insn_reservation \"bdver3_ssecomi\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (eq_attr \"type\" \"ssecomi\"))\n+\t\t\t \"bdver3-double,bdver3-fpsched,(bdver3-ffma | bdver3-fsto)\")\n+\n+;; Conversions behaves very irregularly and the scheduling is critical here.\n+;; Take each instruction separately.\n+\n+;; 256 bit conversion.\n+(define_insn_reservation \"bdver3_vcvtX2Y_avx256_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"load\")\n+\t\t\t\t\t(ior (ior (match_operand:V4DF 0 \"register_operand\")\n+\t\t\t\t\t          (ior (match_operand:V8SF 0 \"register_operand\")\n+\t\t\t\t\t\t       (match_operand:V8SI 0 \"register_operand\")))\n+\t\t\t\t\t     (ior (match_operand:V4DF 1 \"nonimmediate_operand\")\n+\t\t\t\t\t\t  (ior (match_operand:V8SF 1 \"nonimmediate_operand\")\n+\t\t\t\t\t\t       (match_operand:V8SI 1 \"nonimmediate_operand\")))))))\n+\t\t\t \"bdver3-vector,bdver3-fpload,bdver3-fvector\")\n+(define_insn_reservation \"bdver3_vcvtX2Y_avx256\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"none\")\n+\t\t\t\t\t(ior (ior (match_operand:V4DF 0 \"register_operand\")\n+\t\t\t\t\t          (ior (match_operand:V8SF 0 \"register_operand\")\n+\t\t\t\t\t\t       (match_operand:V8SI 0 \"register_operand\")))\n+\t\t\t\t\t     (ior (match_operand:V4DF 1 \"nonimmediate_operand\")\n+\t\t\t\t\t\t  (ior (match_operand:V8SF 1 \"nonimmediate_operand\")\n+\t\t\t\t\t\t       (match_operand:V8SI 1 \"nonimmediate_operand\")))))))\n+\t\t\t \"bdver3-vector,bdver3-fpsched,bdver3-fvector\")\n+;; CVTSS2SD, CVTSD2SS.\n+(define_insn_reservation \"bdver3_ssecvt_cvtss2sd_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SF,DF\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-fcvt\")\n+(define_insn_reservation \"bdver3_ssecvt_cvtss2sd\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SF,DF\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-fcvt\")\n+;; CVTSI2SD, CVTSI2SS, CVTSI2SDQ, CVTSI2SSQ.\n+(define_insn_reservation \"bdver3_sseicvt_cvtsi2sd_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"sseicvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SF,DF\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-fcvt\")\n+(define_insn_reservation \"bdver3_sseicvt_cvtsi2sd\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"sseicvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SF,DF\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,(nothing | bdver3-fcvt)\")\n+;; CVTPD2PS.\n+(define_insn_reservation \"bdver3_ssecvt_cvtpd2ps_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"load\")\n+                                        (and (match_operand:V4SF 0 \"register_operand\")\n+\t\t\t\t\t     (match_operand:V2DF 1 \"nonimmediate_operand\")))))\n+\t\t\t \"bdver3-double,bdver3-fpload,(bdver3-fxbar | bdver3-fcvt)\")\n+(define_insn_reservation \"bdver3_ssecvt_cvtpd2ps\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"none\")\n+                                        (and (match_operand:V4SF 0 \"register_operand\")\n+\t\t\t\t\t     (match_operand:V2DF 1 \"nonimmediate_operand\")))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,(bdver3-fxbar | bdver3-fcvt)\")\n+;; CVTPI2PS, CVTDQ2PS.\n+(define_insn_reservation \"bdver3_ssecvt_cvtdq2ps_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"load\")\n+                                        (and (match_operand:V4SF 0 \"register_operand\")\n+\t\t\t\t\t     (ior (match_operand:V2SI 1 \"nonimmediate_operand\")\n+\t\t\t\t\t          (match_operand:V4SI 1 \"nonimmediate_operand\"))))))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-fcvt\")\n+(define_insn_reservation \"bdver3_ssecvt_cvtdq2ps\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"none\")\n+                                        (and (match_operand:V4SF 0 \"register_operand\")\n+\t\t\t\t\t     (ior (match_operand:V2SI 1 \"nonimmediate_operand\")\n+\t\t\t\t\t          (match_operand:V4SI 1 \"nonimmediate_operand\"))))))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-fcvt\")\n+;; CVTDQ2PD.\n+(define_insn_reservation \"bdver3_ssecvt_cvtdq2pd_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"load\")\n+                                        (and (match_operand:V2DF 0 \"register_operand\")\n+\t\t\t\t\t     (match_operand:V4SI 1 \"nonimmediate_operand\")))))\n+\t\t\t \"bdver3-double,bdver3-fpload,(bdver3-fxbar | bdver3-fcvt)\")\n+(define_insn_reservation \"bdver3_ssecvt_cvtdq2pd\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"none\")\n+                                        (and (match_operand:V2DF 0 \"register_operand\")\n+\t\t\t\t\t     (match_operand:V4SI 1 \"nonimmediate_operand\")))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,(bdver3-fxbar | bdver3-fcvt)\")\n+;; CVTPS2PD, CVTPI2PD.\n+(define_insn_reservation \"bdver3_ssecvt_cvtps2pd_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"load\")\n+                                        (and (match_operand:V2DF 0 \"register_operand\")\n+\t\t\t\t\t     (ior (match_operand:V2SI 1 \"nonimmediate_operand\")\n+\t\t\t\t\t          (match_operand:V4SF 1 \"nonimmediate_operand\"))))))\n+\t\t\t \"bdver3-double,bdver3-fpload,(bdver3-fxbar | bdver3-fcvt)\")\n+(define_insn_reservation \"bdver3_ssecvt_cvtps2pd\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"load\")\n+                                        (and (match_operand:V2DF 0 \"register_operand\")\n+\t\t\t\t\t     (ior (match_operand:V2SI 1 \"nonimmediate_operand\")\n+\t\t\t\t\t          (match_operand:V4SF 1 \"nonimmediate_operand\"))))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,(bdver3-fxbar | bdver3-fcvt)\")\n+;; CVTSD2SI, CVTSD2SIQ, CVTSS2SI, CVTSS2SIQ, CVTTSD2SI, CVTTSD2SIQ, CVTTSS2SI, CVTTSS2SIQ.\n+(define_insn_reservation \"bdver3_ssecvt_cvtsX2si_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"sseicvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SI,DI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-double,bdver3-fpload,(bdver3-fcvt | bdver3-fsto)\")\n+(define_insn_reservation \"bdver3_ssecvt_cvtsX2si\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"sseicvt\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SI,DI\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,(bdver3-fcvt | bdver3-fsto)\")\n+;; CVTPD2PI, CVTTPD2PI.\n+(define_insn_reservation \"bdver3_ssecvt_cvtpd2pi_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"load\")\n+\t\t\t\t        (and (match_operand:V2DF 1 \"nonimmediate_operand\")\n+\t\t\t\t\t     (match_operand:V2SI 0 \"register_operand\")))))\n+\t\t\t \"bdver3-double,bdver3-fpload,(bdver3-fcvt | bdver3-fxbar)\")\n+(define_insn_reservation \"bdver3_ssecvt_cvtpd2pi\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"none\")\n+\t\t\t\t        (and (match_operand:V2DF 1 \"nonimmediate_operand\")\n+\t\t\t\t\t     (match_operand:V2SI 0 \"register_operand\")))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,(bdver3-fcvt | bdver3-fxbar)\")\n+;; CVTPD2DQ, CVTTPD2DQ.\n+(define_insn_reservation \"bdver3_ssecvt_cvtpd2dq_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"load\")\n+\t\t\t\t        (and (match_operand:V2DF 1 \"nonimmediate_operand\")\n+\t\t\t\t\t     (match_operand:V4SI 0 \"register_operand\")))))\n+\t\t\t \"bdver3-double,bdver3-fpload,(bdver3-fcvt | bdver3-fxbar)\")\n+(define_insn_reservation \"bdver3_ssecvt_cvtpd2dq\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"none\")\n+\t\t\t\t        (and (match_operand:V2DF 1 \"nonimmediate_operand\")\n+\t\t\t\t\t     (match_operand:V4SI 0 \"register_operand\")))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,(bdver3-fcvt | bdver3-fxbar)\")\n+;; CVTPS2PI, CVTTPS2PI, CVTPS2DQ, CVTTPS2DQ.\n+(define_insn_reservation \"bdver3_ssecvt_cvtps2pi_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+                                   (and (eq_attr \"memory\" \"load\")\n+\t\t\t\t        (and (match_operand:V4SF 1 \"nonimmediate_operand\")\n+\t\t\t\t             (ior (match_operand: V2SI 0 \"register_operand\")\n+\t\t\t\t\t\t  (match_operand: V4SI 0 \"register_operand\"))))))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-fcvt\")\n+(define_insn_reservation \"bdver3_ssecvt_cvtps2pi\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssecvt\")\n+\t\t\t\t   (and (eq_attr \"memory\" \"none\")\n+\t\t\t\t        (and (match_operand:V4SF 1 \"nonimmediate_operand\")\n+\t\t\t\t             (ior (match_operand: V2SI 0 \"register_operand\")\n+\t\t\t\t\t\t  (match_operand: V4SI 0 \"register_operand\"))))))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-fcvt\")\n+\n+;; SSE MUL, ADD, and MULADD.\n+(define_insn_reservation \"bdver3_ssemuladd_load_256\" 11\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemul,sseadd,sseadd1,ssemuladd\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-double,bdver3-fpload,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_ssemuladd_256\" 7\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemul,sseadd,sseadd1,ssemuladd\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF,V4DF\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_ssemuladd_load\" 10\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemul,sseadd,sseadd1,ssemuladd\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_ssemuladd\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssemul,sseadd,sseadd1,ssemuladd\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-ffma\")\n+(define_insn_reservation \"bdver3_sseimul_load\" 8\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"sseimul\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-fmma\")\n+(define_insn_reservation \"bdver3_sseimul\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"sseimul\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-fmma\")\n+(define_insn_reservation \"bdver3_sseiadd_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"sseiadd\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"bdver3-direct,bdver3-fpload,bdver3-fmal\")\n+(define_insn_reservation \"bdver3_sseiadd\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"sseiadd\")\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,bdver3-fmal\")\n+\n+;; SSE DIV: no throughput information (assume same as amdfam10).\n+(define_insn_reservation \"bdver3_ssediv_double_load_256\" 27\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4DF\")\n+\t\t\t\t        (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-double,bdver3-fpload,(bdver3-ffma0*17 | bdver3-ffma1*17)\")\n+(define_insn_reservation \"bdver3_ssediv_double_256\" 27\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V4DF\")\n+\t\t\t\t        (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,(bdver3-ffma0*17 | bdver3-ffma1*17)\")\n+(define_insn_reservation \"bdver3_ssediv_single_load_256\" 27\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF\")\n+\t\t\t\t        (eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-double,bdver3-fpload,(bdver3-ffma0*17 | bdver3-ffma1*17)\")\n+(define_insn_reservation \"bdver3_ssediv_single_256\" 24\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"V8SF\")\n+\t\t\t\t        (eq_attr \"memory\" \"none\"))))\n+\t\t\t \"bdver3-double,bdver3-fpsched,(bdver3-ffma0*17 | bdver3-ffma1*17)\")\n+(define_insn_reservation \"bdver3_ssediv_double_load\" 27\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"DF,V2DF\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpload,(bdver3-ffma0*17 | bdver3-ffma1*17)\")\n+(define_insn_reservation \"bdver3_ssediv_double\" 27\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"DF,V2DF\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,(bdver3-ffma0*17 | bdver3-ffma1*17)\")\n+(define_insn_reservation \"bdver3_ssediv_single_load\" 27 \n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SF,V4SF\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpload,(bdver3-ffma0*17 | bdver3-ffma1*17)\")\n+(define_insn_reservation \"bdver3_ssediv_single\" 24\n+\t\t\t (and (eq_attr \"cpu\" \"bdver3\")\n+\t\t\t      (and (eq_attr \"type\" \"ssediv\")\n+\t\t\t\t   (and (eq_attr \"mode\" \"SF,V4SF\")\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n+\t\t\t \"bdver3-direct,bdver3-fpsched,(bdver3-ffma0*17 | bdver3-ffma1*17)\")\n+\n+(define_insn_reservation \"bdver3_sseins\" 3\n+                         (and (eq_attr \"cpu\" \"bdver3\")\n+                              (and (eq_attr \"type\" \"sseins\")\n+                                   (eq_attr \"mode\" \"TI\")))\n+                         \"bdver3-direct,bdver3-fpsched,bdver3-fxbar\")\n+"}]}