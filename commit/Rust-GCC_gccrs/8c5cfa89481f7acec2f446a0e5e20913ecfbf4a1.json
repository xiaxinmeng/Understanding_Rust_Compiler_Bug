{"sha": "8c5cfa89481f7acec2f446a0e5e20913ecfbf4a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGM1Y2ZhODk0ODFmN2FjZWMyZjQ0NmEwZTVlMjA5MTNlY2ZiZjRhMQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2010-04-01T12:33:35Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2010-04-01T12:33:35Z"}, "message": "install.texi (Prerequisites): Document libelf usability on IRIX 5/6 and Solaris 2.\n\n\t* doc/install.texi (Prerequisites): Document libelf usability on\n\tIRIX 5/6 and Solaris 2.\n\t(Specific, i?86-*-solaris2.10): No 64-bit default configuration.\n\tUpdate GNU as, GNU ld requirements.\n\t(Specific, *-*-solaris2*): Document Solaris 7 obsoletion, removal.\n\tDocument Sun Studio compiler download.\n\tUpdate and simplify as, ld recommendations.\n\t(Specific, *-*-solaris2.7): Note obsoletion, removal.\n\nFrom-SVN: r157904", "tree": {"sha": "842c35c992e177f2b4c5e5f9cb81a9b3b92b041d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/842c35c992e177f2b4c5e5f9cb81a9b3b92b041d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c5cfa89481f7acec2f446a0e5e20913ecfbf4a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c5cfa89481f7acec2f446a0e5e20913ecfbf4a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c5cfa89481f7acec2f446a0e5e20913ecfbf4a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c5cfa89481f7acec2f446a0e5e20913ecfbf4a1/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ddcc3550c2cd71719a349ce04362ec53f41f57f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ddcc3550c2cd71719a349ce04362ec53f41f57f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ddcc3550c2cd71719a349ce04362ec53f41f57f7"}], "stats": {"total": 107, "additions": 73, "deletions": 34}, "files": [{"sha": "ffae3397de06c9192c4300b452aac031f3c3339b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c5cfa89481f7acec2f446a0e5e20913ecfbf4a1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c5cfa89481f7acec2f446a0e5e20913ecfbf4a1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8c5cfa89481f7acec2f446a0e5e20913ecfbf4a1", "patch": "@@ -1,3 +1,14 @@\n+2010-04-01  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* doc/install.texi (Prerequisites): Document libelf usability on\n+\tIRIX 5/6 and Solaris 2.\n+\t(Specific, i?86-*-solaris2.10): No 64-bit default configuration.\n+\tUpdate GNU as, GNU ld requirements.\n+\t(Specific, *-*-solaris2*): Document Solaris 7 obsoletion, removal.\n+\tDocument Sun Studio compiler download.\n+\tUpdate and simplify as, ld recommendations.\n+\t(Specific, *-*-solaris2.7): Note obsoletion, removal.\n+\n 2010-04-01  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* config.guess (i[34567]86-*-solaris2*): Default with_arch_32,"}, {"sha": "06571a3168e7c0c9610617856b65295a298ec9fa", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 62, "deletions": 34, "changes": 96, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c5cfa89481f7acec2f446a0e5e20913ecfbf4a1/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c5cfa89481f7acec2f446a0e5e20913ecfbf4a1/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=8c5cfa89481f7acec2f446a0e5e20913ecfbf4a1", "patch": "@@ -359,7 +359,9 @@ Necessary to build libgcj, the GCJ runtime.\n \n Necessary to build link-time optimization (LTO) support.  It can be\n downloaded from @uref{http://www.mr511.de/software/libelf-0.8.12.tar.gz},\n-though it is commonly available in several systems.\n+though it is commonly available in several systems.  The versions in\n+IRIX 5 and 6 don't work since they lack @file{gelf.h}.  The version in\n+recent releases of Solaris 11 does work, previous ones don't yet.\n \n The @option{--with-libelf} configure option should be used if libelf is\n not installed in your default library search patch.\n@@ -3463,12 +3465,30 @@ found on @uref{http://www.bitwizard.nl/sig11/,,www.bitwizard.nl}.\n @end html\n @heading @anchor{ix86-x-solaris210}i?86-*-solaris2.10\n Use this for Solaris 10 or later on x86 and x86-64 systems.  This\n-configuration is supported by GCC 4.0 and later versions only.\n-\n-It is recommended that you configure GCC to use the GNU assembler in\n-@file{/usr/sfw/bin/gas} but the Sun linker, using the options\n-@option{--with-gnu-as --with-as=/usr/sfw/bin/gas --without-gnu-ld\n---with-ld=/usr/ccs/bin/ld}.\n+configuration is supported by GCC 4.0 and later versions only.  Unlike\n+@samp{sparcv9-sun-solaris2*}, there is no corresponding 64-bit\n+configuration like @samp{amd64-*-solaris2*} or @samp{x86_64-*-solaris2*}.\n+@c FIXME: will there ever be?\n+\n+It is recommended that you configure GCC to use the GNU assembler, in\n+@file{/usr/sfw/bin/gas}.  The versions included in Solaris 10, from GNU\n+binutils 2.15, and Solaris 11, from GNU binutils 2.19, work fine,\n+although the latest (as of 2010-04-01) version, from GNU binutils\n+2.20.1, is known to work, too.  Recent versions of the Sun assembler in\n+@file{/usr/ccs/bin/as} work almost as well, though.\n+@c FIXME: as patch requirements?\n+\n+For linking, the Sun linker, is preferred.  If you want to use the GNU\n+linker instead, which is available in @file{/usr/sfw/bin/gld}, note that\n+due to a packaging bug the version in Solaris 10, from GNU binutils\n+2.15, cannot be used, while the version in Solaris 11, from GNU binutils\n+2.19, works, as does the latest version, from GNU binutils 2.20.1.\n+\n+To use GNU @command{as}, configure with the options\n+@option{--with-gnu-as --with-as=/usr/sfw/bin/gas}.  It may be necessary\n+to configure with @option{--without-gnu-ld --with-ld=/usr/ccs/bin/ld} to\n+guarantee use of Sun @command{ld}.\n+@c FIXME: why --without-gnu-ld --with-ld?\n \n @html\n <hr />\n@@ -4063,22 +4083,29 @@ supported as cross-compilation target only.\n @c alone is too unspecific and must be avoided.\n @heading @anchor{x-x-solaris2}*-*-solaris2*\n \n-Sun does not ship a C compiler with Solaris 2.  To bootstrap and install\n-GCC you first have to install a pre-built compiler, see the\n+Support for Solaris 7 has been obsoleted in GCC 4.5, but can still be\n+enabled by configuring with @option{--enable-obsolete}.  Support will be\n+removed in GCC 4.6.\n+\n+Sun does not ship a C compiler with Solaris 2, though you can download\n+the Sun Studio compilers for free from\n+@uref{http://developers.sun.com/sunstudio/downloads/}.  Alternatively,\n+you can install a pre-built GCC to bootstrap and install GCC.  See the\n @uref{binaries.html,,binaries page} for details.\n \n The Solaris 2 @command{/bin/sh} will often fail to configure\n-@file{libstdc++-v3}, @file{boehm-gc} or @file{libjava}.  We therefore\n+@samp{libstdc++-v3}, @samp{boehm-gc} or @samp{libjava}.  We therefore\n recommend using the following initial sequence of commands\n \n @smallexample\n    % CONFIG_SHELL=/bin/ksh\n    % export CONFIG_SHELL\n @end smallexample\n \n+@noindent\n and proceed as described in @uref{configure.html,,the configure instructions}.\n In addition we strongly recommend specifying an absolute path to invoke\n-@var{srcdir}/configure.\n+@command{@var{srcdir}/configure}.\n \n Solaris 2 comes with a number of optional OS packages.  Some of these\n are needed to use GCC fully, namely @code{SUNWarc},\n@@ -4101,28 +4128,21 @@ The build process works more smoothly with the legacy Sun tools so, if you\n have @file{/usr/xpg4/bin} in your @env{PATH}, we recommend that you place\n @file{/usr/bin} before @file{/usr/xpg4/bin} for the duration of the build.\n \n-We recommend the use of GNU binutils 2.14 or later, or the vendor tools\n-(Sun @command{as}, Sun @command{ld}).  Note that your mileage may vary\n+We recommend the use of the vendor tools (Sun @command{as}, Sun\n+@command{ld}), or eventually GNU @command{as}.  The GNU @command{as}\n+versions included in Solaris 10, from GNU binutils 2.15, and Solaris 11,\n+from GNU binutils 2.19, are known to work.  They can be found in\n+@file{/usr/sfw/bin/gas}.  Current versions of GNU binutils (2.20.1 as of\n+2010-04-01) are known work either.  Note that your mileage may vary\n if you use a combination of the GNU tools and the Sun tools: while the\n combination GNU @command{as} + Sun @command{ld} should reasonably work,\n the reverse combination Sun @command{as} + GNU @command{ld} is known to\n cause memory corruption at runtime in some cases for C++ programs.\n-\n-The stock GNU binutils 2.15 release is broken on this platform because of a\n-single bug.  It has been fixed on the 2.15 branch in the CVS repository.\n-You can obtain a working version by checking out the binutils-2_15-branch\n-from the CVS repository or applying the patch\n-@uref{http://sourceware.org/ml/binutils-cvs/2004-09/msg00036.html} to the\n-release.\n-\n-We recommend the use of GNU binutils 2.16 or later in conjunction with GCC\n-4.x, or the vendor tools (Sun @command{as}, Sun @command{ld}).  However,\n-for Solaris 10 and above, an additional patch is required in order for the\n-GNU linker to be able to cope with a new flavor of shared libraries.  You\n-can obtain a working version by checking out the binutils-2_16-branch from\n-the CVS repository or applying the patch\n-@uref{http://sourceware.org/ml/binutils-cvs/2005-07/msg00122.html} to the\n-release.\n+@c FIXME: still?\n+GNU @command{ld} usually works either, though the version included in\n+Solaris 10 cannot be used due to several bugs.  Again, the current\n+version (2.20.1) is known to work, but generally lacks platform specific\n+features, so better stay with Sun @command{ld}.\n \n Sun bug 4296832 turns up when compiling X11 headers with GCC 2.95 or\n newer: @command{g++} will complain that types are missing.  These headers\n@@ -4153,7 +4173,7 @@ SPARC, 117172-11 or newer for Intel) that address this problem.\n @end html\n @heading @anchor{sparc-sun-solaris2}sparc-sun-solaris2*\n \n-When GCC is configured to use binutils 2.14 or later the binaries\n+When GCC is configured to use GNU binutils 2.14 or later, the binaries\n produced are smaller than the ones produced using Sun's native tools;\n this difference is quite significant for binaries containing debugging\n information.\n@@ -4183,7 +4203,7 @@ and 5.5 (Sun ONE Studio 8) of the Sun compiler, which causes a bootstrap\n failure in form of a miscompilation of the stage1 compiler by the Sun\n compiler.  This is Sun bug 4974440.  This is fixed with patch 112760-07.\n \n-GCC 3.4 changed the default debugging format from STABS to DWARF-2 for\n+GCC 3.4 changed the default debugging format from Stabs to DWARF-2 for\n 32-bit code on Solaris 7 and later.  If you use the Sun assembler, this\n change apparently runs afoul of Sun bug 4910101 (which is referenced as\n an x86-only problem by Sun, probably because they do not use DWARF-2).\n@@ -4196,13 +4216,14 @@ ld: warning: relocation error: R_SPARC_UA32: @dots{}\n   .debug_info cannot be processed at runtime: relocation ignored.\n @end smallexample\n \n+@noindent\n To work around this problem, compile with @option{-gstabs+} instead of\n plain @option{-g}.\n \n When configuring the GNU Multiple Precision Library (GMP) or the MPFR\n library on a Solaris 7 or later system, the canonical target triplet\n must be specified as the @command{build} parameter on the configure\n-line.  This triplet can be obtained by invoking ./config.guess in\n+line.  This triplet can be obtained by invoking @command{./config.guess} in\n the toplevel source directory of GCC (and not that of GMP or MPFR).\n For example on a Solaris 7 system:\n \n@@ -4215,6 +4236,9 @@ For example on a Solaris 7 system:\n @end html\n @heading @anchor{sparc-sun-solaris27}sparc-sun-solaris2.7\n \n+@emph{Note} that this configuration has been obsoleted in GCC 4.5, and will be\n+removed in GCC 4.6.\n+\n Sun patch 107058-01 (1999-01-13) for Solaris 7/SPARC triggers a bug in\n the dynamic linker.  This problem (Sun bug 4210064) affects GCC 2.8\n and later, including all EGCS releases.  Sun formerly recommended\n@@ -4252,13 +4276,14 @@ the Solaris 7 Recommended Patch Cluster.\n \n GCC 3.3 triggers a bug in version 5.0 Alpha 03/27/98 of the Sun assembler,\n which causes a bootstrap failure when linking the 64-bit shared version of\n-libgcc.  A typical error message is:\n+@samp{libgcc}.  A typical error message is:\n \n @smallexample\n ld: fatal: relocation error: R_SPARC_32: file libgcc/sparcv9/_muldi3.o:\n   symbol <unknown>:  offset 0xffffffff7ec133e7 is non-aligned.\n @end smallexample\n \n+@noindent\n This bug has been fixed in the final 5.0 version of the assembler.\n \n A similar problem was reported for version Sun WorkShop 6 99/08/18 of the\n@@ -4270,6 +4295,7 @@ ld: fatal: relocation error: R_SPARC_DISP32:\n     symbol <unknown>: offset 0xfccd33ad is non-aligned\n @end smallexample\n \n+@noindent\n This bug has been fixed in more recent revisions of the assembler.\n \n @html\n@@ -4285,6 +4311,7 @@ ld: fatal: relocation error: R_SPARC_TLS_LE_HIX22: file /var/tmp//ccamPA1v.o:\n   symbol <unknown>: bad symbol type SECT: symbol type must be TLS\n @end smallexample\n \n+@noindent\n This bug is fixed in Sun patch 118683-03 or later.\n \n @html\n@@ -4318,6 +4345,7 @@ step in order to bootstrap this target with the Sun compiler:\n    % CC=\"cc -xarch=v9 -xildoff\" @var{srcdir}/configure [@var{options}] [@var{target}]\n @end smallexample\n \n+@noindent\n @option{-xarch=v9} specifies the SPARC-V9 architecture to the Sun toolchain\n and @option{-xildoff} turns off the incremental linker.\n \n@@ -4326,7 +4354,7 @@ and @option{-xildoff} turns off the incremental linker.\n @end html\n @heading @anchor{sparcv9-x-solaris2}sparcv9-*-solaris2*\n \n-This is a synonym for sparc64-*-solaris2*.\n+This is a synonym for @samp{sparc64-*-solaris2*}.\n \n @html\n <hr />"}]}