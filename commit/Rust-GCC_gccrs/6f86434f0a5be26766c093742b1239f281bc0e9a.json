{"sha": "6f86434f0a5be26766c093742b1239f281bc0e9a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmY4NjQzNGYwYTViZTI2NzY2YzA5Mzc0MmIxMjM5ZjI4MWJjMGU5YQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2018-06-08T12:37:03Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2018-06-08T12:37:03Z"}, "message": "Replace some ::get_create with ::get in IPA inline.\n\n2018-06-08  Martin Liska  <mliska@suse.cz>\n\n\t* ipa-inline-analysis.c (simple_edge_hints): Use ::get method.\n\t* ipa-inline.h (estimate_edge_growth): Likewise.\n\nFrom-SVN: r261321", "tree": {"sha": "6cc14e32799b1dda5efacede64cd48eb31986e0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6cc14e32799b1dda5efacede64cd48eb31986e0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f86434f0a5be26766c093742b1239f281bc0e9a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f86434f0a5be26766c093742b1239f281bc0e9a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f86434f0a5be26766c093742b1239f281bc0e9a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f86434f0a5be26766c093742b1239f281bc0e9a/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4325656f9fddc1c3802ac27795a77cec3ede27a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4325656f9fddc1c3802ac27795a77cec3ede27a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4325656f9fddc1c3802ac27795a77cec3ede27a4"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "38ffb41c649e193b67bdff244998ba551f821281", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f86434f0a5be26766c093742b1239f281bc0e9a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f86434f0a5be26766c093742b1239f281bc0e9a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6f86434f0a5be26766c093742b1239f281bc0e9a", "patch": "@@ -1,3 +1,8 @@\n+2018-06-08  Martin Liska  <mliska@suse.cz>\n+\n+\t* ipa-inline-analysis.c (simple_edge_hints): Use ::get method.\n+\t* ipa-inline.h (estimate_edge_growth): Likewise.\n+\n 2018-06-08  Martin Liska  <mliska@suse.cz>\n \n \t* cgraph.c (function_version_hasher::hash): Use"}, {"sha": "c781d368a8a5d57950e71d4374d677c50af17244", "filename": "gcc/ipa-inline-analysis.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f86434f0a5be26766c093742b1239f281bc0e9a/gcc%2Fipa-inline-analysis.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f86434f0a5be26766c093742b1239f281bc0e9a/gcc%2Fipa-inline-analysis.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline-analysis.c?ref=6f86434f0a5be26766c093742b1239f281bc0e9a", "patch": "@@ -96,10 +96,10 @@ simple_edge_hints (struct cgraph_edge *edge)\n   struct cgraph_node *to = (edge->caller->global.inlined_to\n \t\t\t    ? edge->caller->global.inlined_to : edge->caller);\n   struct cgraph_node *callee = edge->callee->ultimate_alias_target ();\n-  if (ipa_fn_summaries->get_create (to)->scc_no\n-      && ipa_fn_summaries->get (to)->scc_no\n-\t == ipa_fn_summaries->get_create (callee)->scc_no\n-      && !edge->recursive_p ())\n+  int to_scc_no = ipa_fn_summaries->get (to)->scc_no;\n+  int callee_scc_no = ipa_fn_summaries->get (callee)->scc_no;\n+\n+  if (to_scc_no && to_scc_no  == callee_scc_no && !edge->recursive_p ())\n     hints |= INLINE_HINT_same_scc;\n \n   if (callee->lto_file_data && edge->caller->lto_file_data"}, {"sha": "02d6da06f6d9e1bb1fcfaaabd372da419495115b", "filename": "gcc/ipa-inline.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f86434f0a5be26766c093742b1239f281bc0e9a/gcc%2Fipa-inline.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f86434f0a5be26766c093742b1239f281bc0e9a/gcc%2Fipa-inline.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline.h?ref=6f86434f0a5be26766c093742b1239f281bc0e9a", "patch": "@@ -81,7 +81,7 @@ estimate_edge_size (struct cgraph_edge *edge)\n static inline int\n estimate_edge_growth (struct cgraph_edge *edge)\n {\n-  ipa_call_summary *s = ipa_call_summaries->get_create (edge);\n+  ipa_call_summary *s = ipa_call_summaries->get (edge);\n   gcc_checking_assert (s->call_stmt_size || !edge->callee->analyzed);\n   return (estimate_edge_size (edge) - s->call_stmt_size);\n }"}]}