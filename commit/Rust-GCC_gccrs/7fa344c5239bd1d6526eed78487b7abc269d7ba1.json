{"sha": "7fa344c5239bd1d6526eed78487b7abc269d7ba1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2ZhMzQ0YzUyMzliZDFkNjUyNmVlZDc4NDg3YjdhYmMyNjlkN2JhMQ==", "commit": {"author": {"name": "Thomas Preud'homme", "email": "thomas.preudhomme@linaro.org", "date": "2018-12-21T11:49:04Z"}, "committer": {"name": "Thomas Preud'homme", "email": "thopre01@gcc.gnu.org", "date": "2018-12-21T11:49:04Z"}, "message": "[ARM] Fix size-optimization-ieee testcase failure\n\nOn some version of dejagnu, options in RUNTESTFLAGS are appended to the\ncommand-line and thus any -mfloat-abi=softfp or -mfloat-abi=hard in\nthere overwrite the -mfloat-abi=soft in the dg-options for\nsize-optimization-ieee-* tests. Test is still run though because\narm_soft_ok returns true if -mfloat-abi=soft is accepted, even if the\nfile is not compiled for softfloat due to a later -mfloat-abi on the\ncommand line.\n\nThis patch adds a dg-skip-if to those tests to ensure they are not run\nin softfp or hard mode.\n\n2018-12-21  Thomas Preud'homme  <thomas.preudhomme@linaro.org>\n\n    gcc/testsuite/\n    * gcc.target/arm/size-optimization-ieee-1.c: Skip if passing\n    -mfloat-abi=softfp or -mfloat-abi=hard.\n    * gcc.target/arm/size-optimization-ieee-2.c: Likewise.\n    * gcc.target/arm/size-optimization-ieee-3.c: Likewise.\n\nFrom-SVN: r267323", "tree": {"sha": "355c47142ef27f121d189243b1c5001955eb1896", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/355c47142ef27f121d189243b1c5001955eb1896"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7fa344c5239bd1d6526eed78487b7abc269d7ba1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7fa344c5239bd1d6526eed78487b7abc269d7ba1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7fa344c5239bd1d6526eed78487b7abc269d7ba1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7fa344c5239bd1d6526eed78487b7abc269d7ba1/comments", "author": {"login": "tpreudhomme-linaro", "id": 43454833, "node_id": "MDQ6VXNlcjQzNDU0ODMz", "avatar_url": "https://avatars.githubusercontent.com/u/43454833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tpreudhomme-linaro", "html_url": "https://github.com/tpreudhomme-linaro", "followers_url": "https://api.github.com/users/tpreudhomme-linaro/followers", "following_url": "https://api.github.com/users/tpreudhomme-linaro/following{/other_user}", "gists_url": "https://api.github.com/users/tpreudhomme-linaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tpreudhomme-linaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tpreudhomme-linaro/subscriptions", "organizations_url": "https://api.github.com/users/tpreudhomme-linaro/orgs", "repos_url": "https://api.github.com/users/tpreudhomme-linaro/repos", "events_url": "https://api.github.com/users/tpreudhomme-linaro/events{/privacy}", "received_events_url": "https://api.github.com/users/tpreudhomme-linaro/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d6b612a76f77e7c9ae7712df9312bbcf4a92f048", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6b612a76f77e7c9ae7712df9312bbcf4a92f048", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6b612a76f77e7c9ae7712df9312bbcf4a92f048"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "1569e7aaa0f9eaaa498b126aba0a818820cccc24", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7fa344c5239bd1d6526eed78487b7abc269d7ba1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7fa344c5239bd1d6526eed78487b7abc269d7ba1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7fa344c5239bd1d6526eed78487b7abc269d7ba1", "patch": "@@ -1,3 +1,10 @@\n+2018-12-21  Thomas Preud'homme  <thomas.preudhomme@linaro.org>\n+\n+\t* gcc.target/arm/size-optimization-ieee-1.c: Skip if passing\n+\t-mfloat-abi=softfp or -mfloat-abi=hard.\n+\t* gcc.target/arm/size-optimization-ieee-2.c: Likewise.\n+\t* gcc.target/arm/size-optimization-ieee-3.c: Likewise.\n+\n 2018-12-21  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/88547"}, {"sha": "61475eb4c679f0abb349c4caee603310dc1176d6", "filename": "gcc/testsuite/gcc.target/arm/size-optimization-ieee-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7fa344c5239bd1d6526eed78487b7abc269d7ba1/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsize-optimization-ieee-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7fa344c5239bd1d6526eed78487b7abc269d7ba1/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsize-optimization-ieee-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsize-optimization-ieee-1.c?ref=7fa344c5239bd1d6526eed78487b7abc269d7ba1", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do link { target arm_soft_ok } } */\n+/* { dg-skip-if \"Feature is -mfloat-abi=soft only\" { *-*-* } { \"-mfloat-abi=*\" } { \"-mfloat-abi=soft\" } } */\n /* { dg-options \"-mfloat-abi=soft\" } */\n \n int"}, {"sha": "b4699271ceacc91029bef6852165c521c47b2688", "filename": "gcc/testsuite/gcc.target/arm/size-optimization-ieee-2.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7fa344c5239bd1d6526eed78487b7abc269d7ba1/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsize-optimization-ieee-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7fa344c5239bd1d6526eed78487b7abc269d7ba1/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsize-optimization-ieee-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsize-optimization-ieee-2.c?ref=7fa344c5239bd1d6526eed78487b7abc269d7ba1", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do link { target arm_soft_ok } } */\n+/* { dg-skip-if \"Feature is -mfloat-abi=soft only\" { *-*-* } { \"-mfloat-abi=*\" } { \"-mfloat-abi=soft\" } } */\n /* { dg-options \"-mfloat-abi=soft\" } */\n \n int"}, {"sha": "34b1ebe7afd6032b2aae447c49bff35e9b5d846b", "filename": "gcc/testsuite/gcc.target/arm/size-optimization-ieee-3.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7fa344c5239bd1d6526eed78487b7abc269d7ba1/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsize-optimization-ieee-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7fa344c5239bd1d6526eed78487b7abc269d7ba1/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsize-optimization-ieee-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsize-optimization-ieee-3.c?ref=7fa344c5239bd1d6526eed78487b7abc269d7ba1", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do link { target arm_soft_ok } } */\n+/* { dg-skip-if \"Feature is -mfloat-abi=soft only\" { *-*-* } { \"-mfloat-abi=*\" } { \"-mfloat-abi=soft\" } } */\n /* { dg-options \"-mfloat-abi=soft\" } */\n \n int"}]}