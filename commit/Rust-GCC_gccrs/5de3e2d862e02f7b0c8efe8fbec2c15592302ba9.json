{"sha": "5de3e2d862e02f7b0c8efe8fbec2c15592302ba9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWRlM2UyZDg2MmUwMmY3YjBjOGVmZThmYmVjMmMxNTU5MjMwMmJhOQ==", "commit": {"author": {"name": "Bernd Edlinger", "email": "bernd.edlinger@hotmail.de", "date": "2016-11-03T12:52:19Z"}, "committer": {"name": "Bernd Edlinger", "email": "edlinger@gcc.gnu.org", "date": "2016-11-03T12:52:19Z"}, "message": "re PR libgcc/78067 (libgcc2 calls count_leading_zero with 0)\n\n2016-11-03  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n        PR libgcc/78067\n        * libgcc2.c (__floatdisf, __floatdidf): Avoid undefined results from\n        count_leading_zeros.\n\ntestsuite:\n2016-11-03  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n        PR libgcc/78067\n        * gcc.dg/torture/fp-int-convert.h: Add more conversion tests.\n\nFrom-SVN: r241817", "tree": {"sha": "bbb121d397d87880f925bad35ace530d7cf2d7fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bbb121d397d87880f925bad35ace530d7cf2d7fd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9/comments", "author": {"login": "bernd-edlinger", "id": 17638929, "node_id": "MDQ6VXNlcjE3NjM4OTI5", "avatar_url": "https://avatars.githubusercontent.com/u/17638929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bernd-edlinger", "html_url": "https://github.com/bernd-edlinger", "followers_url": "https://api.github.com/users/bernd-edlinger/followers", "following_url": "https://api.github.com/users/bernd-edlinger/following{/other_user}", "gists_url": "https://api.github.com/users/bernd-edlinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/bernd-edlinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bernd-edlinger/subscriptions", "organizations_url": "https://api.github.com/users/bernd-edlinger/orgs", "repos_url": "https://api.github.com/users/bernd-edlinger/repos", "events_url": "https://api.github.com/users/bernd-edlinger/events{/privacy}", "received_events_url": "https://api.github.com/users/bernd-edlinger/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4098e9b907f82950130ed6820be9236727be7371", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4098e9b907f82950130ed6820be9236727be7371", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4098e9b907f82950130ed6820be9236727be7371"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "5f59bd839620a1adb5750e34dd33f4935588ba5d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5de3e2d862e02f7b0c8efe8fbec2c15592302ba9", "patch": "@@ -1,3 +1,8 @@\n+2016-11-03  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\tPR libgcc/78067\n+\t* gcc.dg/torture/fp-int-convert.h: Add more conversion tests.\n+\n 2016-11-03  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>\n \n \t* gcc.c-torture/execute/pr78170.c: Require int32plus."}, {"sha": "bbe96668d0bc18e87465160432f2e970a54d0fdc", "filename": "gcc/testsuite/gcc.dg/torture/fp-int-convert.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert.h?ref=5de3e2d862e02f7b0c8efe8fbec2c15592302ba9", "patch": "@@ -53,6 +53,8 @@ do {\t\t\t\t\t\t\t\t\\\n   TEST_I_F_VAL (U, F, HVAL1U (P, U), P_OK (P, U));\t\t\\\n   TEST_I_F_VAL (U, F, HVAL1U (P, U) + 1, P_OK (P, U));\t\t\\\n   TEST_I_F_VAL (U, F, HVAL1U (P, U) - 1, P_OK (P, U));\t\t\\\n+  TEST_I_F_VAL (I, F, WVAL0S (I), 1);\t\t\t\t\\\n+  TEST_I_F_VAL (I, F, -WVAL0S (I), 1);\t\t\t\t\\\n } while (0)\n \n #define P_OK(P, T) ((P) >= sizeof(T) * CHAR_BIT)\n@@ -74,6 +76,7 @@ do {\t\t\t\t\t\t\t\t\\\n \t\t\t ? (S)1\t\t\t\t\t\t \\\n \t\t\t : (((S)1 << (sizeof(S) * CHAR_BIT - 2))\t \\\n \t\t\t    + ((S)3 << (sizeof(S) * CHAR_BIT - 2 - P))))\n+#define WVAL0S(S) (S)((S)1 << (sizeof(S) * CHAR_BIT / 2 - 1))\n \n #define TEST_I_F_VAL(IT, FT, VAL, PREC_OK)\t\t\\\n do {\t\t\t\t\t\t\t\\"}, {"sha": "e81444c841c0ef283e68c4d100bad89ffb2a62c6", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=5de3e2d862e02f7b0c8efe8fbec2c15592302ba9", "patch": "@@ -1,3 +1,9 @@\n+2016-11-03  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\tPR libgcc/78067\n+\t* libgcc2.c (__floatdisf, __floatdidf): Avoid undefined results from\n+\tcount_leading_zeros.\n+\n 2016-11-02  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* Makefile.in (LIB2_DIVMOD_FUNCS): Add _divmoddi4."}, {"sha": "97b9237ea2b9558d230b9caf209fe088189a9391", "filename": "libgcc/libgcc2.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9/libgcc%2Flibgcc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5de3e2d862e02f7b0c8efe8fbec2c15592302ba9/libgcc%2Flibgcc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcc2.c?ref=5de3e2d862e02f7b0c8efe8fbec2c15592302ba9", "patch": "@@ -1674,6 +1674,11 @@ FUNC (DWtype u)\n     hi = -(UWtype) hi;\n \n   UWtype count, shift;\n+#if !defined (COUNT_LEADING_ZEROS_0) || COUNT_LEADING_ZEROS_0 != W_TYPE_SIZE\n+  if (hi == 0)\n+    count = W_TYPE_SIZE;\n+  else\n+#endif\n   count_leading_zeros (count, hi);\n \n   /* No leading bits means u == minimum.  */"}]}