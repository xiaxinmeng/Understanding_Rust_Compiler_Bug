{"sha": "77da08b08ea7e8b12f38605dacfc73a84be1bd82", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdkYTA4YjA4ZWE3ZThiMTJmMzg2MDVkYWNmYzczYTg0YmUxYmQ4Mg==", "commit": {"author": {"name": "Adam Megacz", "email": "adam@xwt.org", "date": "2002-02-25T04:10:53Z"}, "committer": {"name": "Adam Megacz", "email": "megacz@gcc.gnu.org", "date": "2002-02-25T04:10:53Z"}, "message": "natPlainDatagramSocketImpl.cc: Updated #includes for Win32...\n\n2002-02-24  Adam Megacz  <adam@xwt.org>\n\n\t* java/net/natPlainDatagramSocketImpl.cc: Updated #includes\n\tfor Win32, changed #ifdefs to check WIN32 instead of the\n\t(now-obsolete) USE_WINSOCK, and removed support for socket\n\ttimeouts on Win32 pending further discussion.\n\nFrom-SVN: r50017", "tree": {"sha": "989b673ea75dda663fb23ee26698118ebf8593ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/989b673ea75dda663fb23ee26698118ebf8593ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77da08b08ea7e8b12f38605dacfc73a84be1bd82", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77da08b08ea7e8b12f38605dacfc73a84be1bd82", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77da08b08ea7e8b12f38605dacfc73a84be1bd82", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77da08b08ea7e8b12f38605dacfc73a84be1bd82/comments", "author": null, "committer": null, "parents": [{"sha": "3e0e6811b6c5753e726d4eb75063f16bc902d2d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e0e6811b6c5753e726d4eb75063f16bc902d2d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e0e6811b6c5753e726d4eb75063f16bc902d2d6"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "9e7044b6648b56fccd0118f49b229ed78b1fd029", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77da08b08ea7e8b12f38605dacfc73a84be1bd82/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77da08b08ea7e8b12f38605dacfc73a84be1bd82/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=77da08b08ea7e8b12f38605dacfc73a84be1bd82", "patch": "@@ -1,3 +1,10 @@\n+2002-02-24  Adam Megacz  <adam@xwt.org>\n+\n+\t* java/net/natPlainDatagramSocketImpl.cc: Updated #includes\n+\tfor Win32, changed #ifdefs to check WIN32 instead of the\n+\t(now-obsolete) USE_WINSOCK, and removed support for socket\n+\ttimeouts on Win32 pending further discussion.\n+\n 2002-02-24  Adam Megacz  <adam@xwt.org>\n \n \t* win32-threads.cc (_Jv_ThreadInitData): _Jv_Malloc instead of new"}, {"sha": "d582a532722825127d5a7be5eaf8173a1173b03a", "filename": "libjava/java/net/natPlainDatagramSocketImpl.cc", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77da08b08ea7e8b12f38605dacfc73a84be1bd82/libjava%2Fjava%2Fnet%2FnatPlainDatagramSocketImpl.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77da08b08ea7e8b12f38605dacfc73a84be1bd82/libjava%2Fjava%2Fnet%2FnatPlainDatagramSocketImpl.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FnatPlainDatagramSocketImpl.cc?ref=77da08b08ea7e8b12f38605dacfc73a84be1bd82", "patch": "@@ -8,16 +8,15 @@ details.  */\n \n #include <config.h>\n \n-#ifdef USE_WINSOCK\n-#include <windows.h>\n-#include <winsock.h>\n+#include<platform.h>\n+\n+make #ifdef WIN32\n #include <errno.h>\n #include <string.h>\n #ifndef ENOPROTOOPT\n #define ENOPROTOOPT 109\n #endif\n-#else /* USE_WINSOCK */\n-#include \"posix.h\"\n+#else /* WIN32 */\n #ifdef HAVE_SYS_SOCKET_H\n #include <sys/socket.h>\n #endif\n@@ -29,7 +28,7 @@ details.  */\n #endif\n #include <errno.h>\n #include <string.h>\n-#endif /* USE_WINSOCK */\n+#endif /* WIN32 */\n \n #if HAVE_BSTRING_H\n // Needed for bzero, implicitly used by FD_ZERO on IRIX 5.2 \n@@ -328,6 +327,8 @@ java::net::PlainDatagramSocketImpl::receive (java::net::DatagramPacket *p)\n   jbyte *dbytes = elements (p->getData());\n   ssize_t retlen = 0;\n \n+// FIXME: implement timeout support for Win32\n+#ifndef WIN32\n   // Do timeouts via select since SO_RCVTIMEO is not always available.\n   if (timeout > 0)\n     {\n@@ -343,6 +344,7 @@ java::net::PlainDatagramSocketImpl::receive (java::net::DatagramPacket *p)\n       else if (retval == 0)\n \tthrow new java::io::InterruptedIOException ();\n     }\n+#endif /* WIN32 */\n \n   retlen =\n     ::recvfrom (fnum, (char *) dbytes, p->getLength(), 0, (sockaddr*) &u,"}]}