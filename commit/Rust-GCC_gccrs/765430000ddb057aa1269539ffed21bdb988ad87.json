{"sha": "765430000ddb057aa1269539ffed21bdb988ad87", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzY1NDMwMDAwZGRiMDU3YWExMjY5NTM5ZmZlZDIxYmRiOTg4YWQ4Nw==", "commit": {"author": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@users.sourceforge.net", "date": "2001-10-27T14:05:34Z"}, "committer": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@gcc.gnu.org", "date": "2001-10-27T14:05:34Z"}, "message": "* decl2.c (validate_nonmember_using_decl): Handle NAMESPACE_DECL.\n\nFrom-SVN: r46565", "tree": {"sha": "4e90340eaf363251d63f8d9fa396d392a8b52ab5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e90340eaf363251d63f8d9fa396d392a8b52ab5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/765430000ddb057aa1269539ffed21bdb988ad87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/765430000ddb057aa1269539ffed21bdb988ad87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/765430000ddb057aa1269539ffed21bdb988ad87", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/765430000ddb057aa1269539ffed21bdb988ad87/comments", "author": null, "committer": null, "parents": [{"sha": "7dddfb65cf6a30894855f54f7eeb7850879d7813", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dddfb65cf6a30894855f54f7eeb7850879d7813", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dddfb65cf6a30894855f54f7eeb7850879d7813"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "848411d5815965500867e275a3be563e2fbdc9a2", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/765430000ddb057aa1269539ffed21bdb988ad87/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/765430000ddb057aa1269539ffed21bdb988ad87/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=765430000ddb057aa1269539ffed21bdb988ad87", "patch": "@@ -1,3 +1,7 @@\n+2001-10-27  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\t* decl2.c (validate_nonmember_using_decl): Handle NAMESPACE_DECL.\n+\n 2001-10-25  Zack Weinberg  <zack@codesourcery.com>\n \n \t* cp-lang.c: Redefine LANG_HOOKS_CLEAR_BINDING_STACK to"}, {"sha": "e215cd6e9a5898208a32b6b9c101d12fe7e5be54", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/765430000ddb057aa1269539ffed21bdb988ad87/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/765430000ddb057aa1269539ffed21bdb988ad87/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=765430000ddb057aa1269539ffed21bdb988ad87", "patch": "@@ -4877,6 +4877,11 @@ validate_nonmember_using_decl (decl, scope, name)\n       *scope = global_namespace;\n       *name = decl;\n     }\n+  else if (TREE_CODE (decl) == NAMESPACE_DECL)\n+    {\n+      cp_error (\"namespace `%D' not allowed in using-declaration\", decl);\n+      return NULL_TREE;\n+    }\n   else\n     my_friendly_abort (382);\n   if (DECL_P (*name))"}, {"sha": "92f134eaf84b719f8ed5c819ae77527161ac7f85", "filename": "gcc/testsuite/g++.dg/lookup/using2.C", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/765430000ddb057aa1269539ffed21bdb988ad87/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/765430000ddb057aa1269539ffed21bdb988ad87/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing2.C?ref=765430000ddb057aa1269539ffed21bdb988ad87", "patch": "@@ -25,6 +25,8 @@ namespace N\n   template<int> void f() {}\n }\n \n+using N;             // { dg-error \"parse error\" \"\" }\n+using ::N;           // { dg-error \"using-declaration\" \"\" }\n using N::f< 0 >;     // { dg-error \"using-declaration\" \"\" }\n \n struct  A {"}]}