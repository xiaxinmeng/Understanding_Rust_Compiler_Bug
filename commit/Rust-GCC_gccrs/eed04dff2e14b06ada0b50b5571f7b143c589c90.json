{"sha": "eed04dff2e14b06ada0b50b5571f7b143c589c90", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWVkMDRkZmYyZTE0YjA2YWRhMGI1MGI1NTcxZjdiMTQzYzU4OWM5MA==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1996-05-20T16:44:05Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1996-05-20T16:44:05Z"}, "message": "reorg.c (relax_delay_slots): Call update_block before redirecting a branch past a redundant insn.\n\n\t* reorg.c (relax_delay_slots): Call update_block before\n\tredirecting a branch past a redundant insn.\n\nFrom-SVN: r12060", "tree": {"sha": "1e8bcfc31111a0cba816c5ba13059a7fd0138c5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e8bcfc31111a0cba816c5ba13059a7fd0138c5b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eed04dff2e14b06ada0b50b5571f7b143c589c90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eed04dff2e14b06ada0b50b5571f7b143c589c90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eed04dff2e14b06ada0b50b5571f7b143c589c90", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eed04dff2e14b06ada0b50b5571f7b143c589c90/comments", "author": null, "committer": null, "parents": [{"sha": "da3c5e3c8d8d6eaef928f0d1265442886b255c61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da3c5e3c8d8d6eaef928f0d1265442886b255c61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da3c5e3c8d8d6eaef928f0d1265442886b255c61"}], "stats": {"total": 19, "additions": 14, "deletions": 5}, "files": [{"sha": "ab303363a972eed2dbc1be47cb5c9a7ad831087d", "filename": "gcc/reorg.c", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eed04dff2e14b06ada0b50b5571f7b143c589c90/gcc%2Freorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eed04dff2e14b06ada0b50b5571f7b143c589c90/gcc%2Freorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freorg.c?ref=eed04dff2e14b06ada0b50b5571f7b143c589c90", "patch": "@@ -4066,11 +4066,20 @@ relax_delay_slots (first)\n \t  if (trial && GET_CODE (PATTERN (trial)) != SEQUENCE\n \t      && redundant_insn (trial, insn, 0))\n \t    {\n-\t      trial = next_active_insn (trial);\n-\t      if (trial == 0)\n-\t\ttarget_label = find_end_label ();\n-\t      else\n-\t\ttarget_label = get_label_before (trial);\n+\t      rtx tmp;\n+\n+\t      /* Figure out where to emit the special USE insn so we don't\n+\t\t later incorrectly compute register live/death info.  */\n+\t      tmp = next_active_insn (trial);\n+\t      if (tmp == 0)\n+\t\ttmp = find_end_label ();\n+\n+\t      /* Insert the special USE insn and update dataflow info.  */\n+              update_block (trial, tmp);\n+\n+\t      /* Now emit a label before the special USE insn, and\n+\t\t redirect our jump to the new label.  */ \n+\t      target_label = get_label_before (PREV_INSN (tmp));\n \t      reorg_redirect_jump (delay_insn, target_label);\n \t      next = insn;\n \t      continue;"}]}