{"sha": "cb1a4876a0e724ca3962ec14dce9e7819fa72ea5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2IxYTQ4NzZhMGU3MjRjYTM5NjJlYzE0ZGNlOWU3ODE5ZmE3MmVhNQ==", "commit": {"author": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2020-11-18T13:11:27Z"}, "committer": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2020-11-18T13:11:27Z"}, "message": "testsuite/libgomp.c/usleep.h: Use sleep-loop also for GCN\n\nAs typically configured, newlib's libc.a does not build 'posix' and,\nhence, usleep is not available. Thus, use the same fallback as for nvptx.\n\nlibgomp/\n\t* testsuite/libgomp.c/usleep.h (fallback_usleep): Renamed from\n\tnvptx_usleep; use also for device={arch(gcn)}.", "tree": {"sha": "28ec312fcdb23f99bcfb0dc7e3d517ba0be26025", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/28ec312fcdb23f99bcfb0dc7e3d517ba0be26025"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb1a4876a0e724ca3962ec14dce9e7819fa72ea5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb1a4876a0e724ca3962ec14dce9e7819fa72ea5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb1a4876a0e724ca3962ec14dce9e7819fa72ea5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb1a4876a0e724ca3962ec14dce9e7819fa72ea5/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ba97b532604815333848ee30e069dde6e36ce4c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba97b532604815333848ee30e069dde6e36ce4c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba97b532604815333848ee30e069dde6e36ce4c9"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "669b41cee01adc9e3fdc26d698121756321429e4", "filename": "libgomp/testsuite/libgomp.c/usleep.h", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb1a4876a0e724ca3962ec14dce9e7819fa72ea5/libgomp%2Ftestsuite%2Flibgomp.c%2Fusleep.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb1a4876a0e724ca3962ec14dce9e7819fa72ea5/libgomp%2Ftestsuite%2Flibgomp.c%2Fusleep.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fusleep.h?ref=cb1a4876a0e724ca3962ec14dce9e7819fa72ea5", "patch": "@@ -1,7 +1,7 @@\n #include <unistd.h>\n \n int\n-nvptx_usleep (useconds_t d)\n+fallback_usleep (useconds_t d)\n {\n   /* This function serves as a replacement for usleep in\n      this test case.  It does not even attempt to be functionally\n@@ -13,12 +13,13 @@ nvptx_usleep (useconds_t d)\n   return 0;\n }\n \n-#pragma omp declare variant (nvptx_usleep) match(construct={target},device={arch(nvptx)})\n+#pragma omp declare variant (fallback_usleep) match(construct={target},device={arch(nvptx)})\n+#pragma omp declare variant (fallback_usleep) match(construct={target},device={arch(gcn)})\n #pragma omp declare variant (usleep) match(user={condition(1)})\n int\n tgt_usleep (useconds_t d)\n {\n   return 0;\n }\n \n-#pragma omp declare target to (nvptx_usleep, tgt_usleep)\n+#pragma omp declare target to (fallback_usleep, tgt_usleep)"}]}