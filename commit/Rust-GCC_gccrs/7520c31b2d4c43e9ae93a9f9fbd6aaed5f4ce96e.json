{"sha": "7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzUyMGMzMWIyZDRjNDNlOWFlOTNhOWY5ZmJkNmFhZWQ1ZjRjZTk2ZQ==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1998-09-05T12:10:25Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-09-05T12:10:25Z"}, "message": "pexecute.c: Updates from gcc.\n\n        * pexecute.c: Updates from gcc.  Copy in gcc has been removed.  This\n        is the canonical copy.  Define ISSPACE if !IN_GCC.\n        * alloca.c, vfprintf.c, choose-temp.c, mkstemp.c, getopt.c: Similarly.\n        * getopt1.c: Similarly.\n        * Makefile.in: Build mkstemp.o\n\nFrom-SVN: r22257", "tree": {"sha": "e28c61cb45af96c4847681a77dd4bae6e20c5511", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e28c61cb45af96c4847681a77dd4bae6e20c5511"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e/comments", "author": null, "committer": null, "parents": [{"sha": "8cfa53208592a081d687b393f9e3420b48e30454", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cfa53208592a081d687b393f9e3420b48e30454", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8cfa53208592a081d687b393f9e3420b48e30454"}], "stats": {"total": 126, "additions": 69, "deletions": 57}, "files": [{"sha": "9399d6ee7a0c3d47ae03abcfa9a842cc9b74f5b5", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e", "patch": "@@ -2,7 +2,8 @@ Sat Sep  5 03:24:49 1998  Jeffrey A Law  (law@cygnus.com)\n \n \t* pexecute.c: Updates from gcc.  Copy in gcc has been removed.  This\n \tis the canonical copy.  Define ISSPACE if !IN_GCC.\n-\t* alloca.c, vfprintf.c, choose-temp.c, mkstemp.c: Similarly.\n+\t* alloca.c, vfprintf.c, choose-temp.c, mkstemp.c, getopt.c: Similarly.\n+\t* getopt1.c: Similarly.\n \t* Makefile.in: Build mkstemp.o\n \n Wed Aug 19 14:05:01 1998  Mumit Khan  <khan@xraylith.wisc.edu>"}, {"sha": "920727114151683d8663aa49a7e3e5a76ad1ce40", "filename": "libiberty/getopt.c", "status": "modified", "additions": 62, "deletions": 52, "changes": 114, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e/libiberty%2Fgetopt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e/libiberty%2Fgetopt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fgetopt.c?ref=7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e", "patch": "@@ -1,13 +1,13 @@\n /* Getopt for GNU.\n    NOTE: getopt is now part of the C library, so if you don't know what\n-   \"Keep this file name-space clean\" means, talk to roland@gnu.ai.mit.edu\n+   \"Keep this file name-space clean\" means, talk to drepper@gnu.org\n    before changing it!\n \n-   Copyright (C) 1987, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97\n+   Copyright (C) 1987, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98\n    \tFree Software Foundation, Inc.\n \n    NOTE: The canonical source of this file is maintained with the GNU C Library.\n-   Bugs can be reported to bug-glibc@prep.ai.mit.edu.\n+   Bugs can be reported to bug-glibc@gnu.org.\n \n    This program is free software; you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by the\n@@ -27,19 +27,19 @@\n /* This tells Alpha OSF/1 not to define a getopt prototype in <stdio.h>.\n    Ditto for AIX 3.2 and <stdlib.h>.  */\n #ifndef _NO_PROTO\n-#define _NO_PROTO\n+# define _NO_PROTO\n #endif\n \n #ifdef HAVE_CONFIG_H\n-#include <config.h>\n+# include <config.h>\n #endif\n \n-#if !defined (__STDC__) || !__STDC__\n+#if !defined __STDC__ || !__STDC__\n /* This is a separate conditional since some stdc systems\n    reject `defined (const)'.  */\n-#ifndef const\n-#define const\n-#endif\n+# ifndef const\n+#  define const\n+# endif\n #endif\n \n #include <stdio.h>\n@@ -53,11 +53,11 @@\n    it is simpler to just do this in the source for each such file.  */\n \n #define GETOPT_INTERFACE_VERSION 2\n-#if !defined (_LIBC) && defined (__GLIBC__) && __GLIBC__ >= 2\n-#include <gnu-versions.h>\n-#if _GNU_GETOPT_INTERFACE_VERSION == GETOPT_INTERFACE_VERSION\n-#define ELIDE_CODE\n-#endif\n+#if !defined _LIBC && defined __GLIBC__ && __GLIBC__ >= 2\n+# include <gnu-versions.h>\n+# if _GNU_GETOPT_INTERFACE_VERSION == GETOPT_INTERFACE_VERSION\n+#  define ELIDE_CODE\n+# endif\n #endif\n \n #ifndef ELIDE_CODE\n@@ -68,26 +68,26 @@\n #ifdef\t__GNU_LIBRARY__\n /* Don't include stdlib.h for non-GNU C libraries because some of them\n    contain conflicting prototypes for getopt.  */\n-#include <stdlib.h>\n-#include <unistd.h>\n+# include <stdlib.h>\n+# include <unistd.h>\n #endif\t/* GNU C library.  */\n \n #ifdef VMS\n-#include <unixlib.h>\n-#if HAVE_STRING_H - 0\n-#include <string.h>\n-#endif\n+# include <unixlib.h>\n+# if HAVE_STRING_H - 0\n+#  include <string.h>\n+# endif\n #endif\n \n #ifndef _\n /* This is for other GNU distributions with internationalized messages.\n    When compiling libc, the _ macro is predefined.  */\n-#ifdef HAVE_LIBINTL_H\n-# include <libintl.h>\n-# define _(msgid)\tgettext (msgid)\n-#else\n-# define _(msgid)\t(msgid)\n-#endif\n+# ifdef HAVE_LIBINTL_H\n+#  include <libintl.h>\n+#  define _(msgid)\tgettext (msgid)\n+# else\n+#  define _(msgid)\t(msgid)\n+# endif\n #endif\n \n /* This version of `getopt' appears to the caller like standard Unix `getopt'\n@@ -197,14 +197,22 @@ static char *posixly_correct;\n    because there are many ways it can cause trouble.\n    On some systems, it contains special magic macros that don't work\n    in GCC.  */\n-#include <string.h>\n-#define\tmy_index\tstrchr\n+# include <string.h>\n+# define my_index\tstrchr\n #else\n \n+# if HAVE_STRING_H\n+#  include <string.h>\n+# else\n+#  include <strings.h>\n+# endif\n+\n /* Avoid depending on library functions or files\n    whose names are inconsistent.  */\n \n-char *getenv ();\n+#ifndef getenv\n+extern char *getenv ();\n+#endif\n \n static char *\n my_index (str, chr)\n@@ -225,11 +233,11 @@ my_index (str, chr)\n #ifdef __GNUC__\n /* Note that Motorola Delta 68k R3V7 comes with GCC but not stddef.h.\n    That was relevant to code that was here before.  */\n-#if !defined (__STDC__) || !__STDC__\n+# if (!defined __STDC__ || !__STDC__) && !defined strlen\n /* gcc with -traditional declares the built-in strlen to return int,\n    and has done so at least since version 2.4.5. -- rms.  */\n extern int strlen (const char *);\n-#endif /* not __STDC__ */\n+# endif /* not __STDC__ */\n #endif /* __GNUC__ */\n \n #endif /* not __GNU_LIBRARY__ */\n@@ -292,7 +300,7 @@ text_set_element (__libc_subinit, store_args_and_env);\n    `first_nonopt' and `last_nonopt' are relocated so that they describe\n    the new indices of the non-options in ARGV after they are moved.  */\n \n-#if defined (__STDC__) && __STDC__\n+#if defined __STDC__ && __STDC__\n static void exchange (char **);\n #endif\n \n@@ -378,7 +386,7 @@ exchange (argv)\n \n /* Initialize the internal data when the first call is made.  */\n \n-#if defined (__STDC__) && __STDC__\n+#if defined __STDC__ && __STDC__\n static const char *_getopt_initialize (int, char *const *, const char *);\n #endif\n static const char *\n@@ -527,11 +535,11 @@ _getopt_internal (argc, argv, optstring, longopts, longind, long_only)\n      from the shell indicating it is not an option.  The later information\n      is only used when the used in the GNU libc.  */\n #ifdef _LIBC\n-#define NONOPTION_P (argv[optind][0] != '-' || argv[optind][1] == '\\0'\t      \\\n-\t\t     || (optind < nonoption_flags_len\t\t\t      \\\n-\t\t\t && __getopt_nonoption_flags[optind] == '1'))\n+# define NONOPTION_P (argv[optind][0] != '-' || argv[optind][1] == '\\0'\t      \\\n+\t\t      || (optind < nonoption_flags_len\t\t\t      \\\n+\t\t\t  && __getopt_nonoption_flags[optind] == '1'))\n #else\n-#define NONOPTION_P (argv[optind][0] != '-' || argv[optind][1] == '\\0')\n+# define NONOPTION_P (argv[optind][0] != '-' || argv[optind][1] == '\\0')\n #endif\n \n   if (nextchar == NULL || *nextchar == '\\0')\n@@ -690,21 +698,23 @@ _getopt_internal (argc, argv, optstring, longopts, longind, long_only)\n \t      else\n \t\t{\n \t\t  if (opterr)\n-\t\t   if (argv[optind - 1][1] == '-')\n-\t\t    /* --option */\n-\t\t    fprintf (stderr,\n-\t\t     _(\"%s: option `--%s' doesn't allow an argument\\n\"),\n-\t\t     argv[0], pfound->name);\n-\t\t   else\n-\t\t    /* +option or -option */\n-\t\t    fprintf (stderr,\n-\t\t     _(\"%s: option `%c%s' doesn't allow an argument\\n\"),\n-\t\t     argv[0], argv[optind - 1][0], pfound->name);\n-\n-\t\t  nextchar += strlen (nextchar);\n-\n-\t\t  optopt = pfound->val;\n-\t\t  return '?';\n+\t\t    {\n+\t\t      if (argv[optind - 1][1] == '-')\n+\t\t\t/* --option */\n+\t\t\tfprintf (stderr,\n+\t\t\t\t _(\"%s: option `--%s' doesn't allow an argument\\n\"),\n+\t\t\t\t argv[0], pfound->name);\n+\t\t      else\n+\t\t\t/* +option or -option */\n+\t\t\tfprintf (stderr,\n+\t\t\t\t _(\"%s: option `%c%s' doesn't allow an argument\\n\"),\n+\t\t\t\t argv[0], argv[optind - 1][0], pfound->name);\n+\n+\t\t      nextchar += strlen (nextchar);\n+\n+\t\t      optopt = pfound->val;\n+\t\t      return '?';\n+\t\t    }\n \t\t}\n \t    }\n \t  else if (pfound->has_arg == 1)"}, {"sha": "ff257374c335af5847a1a611e1e2cda2ff3caaca", "filename": "libiberty/getopt1.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e/libiberty%2Fgetopt1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e/libiberty%2Fgetopt1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fgetopt1.c?ref=7520c31b2d4c43e9ae93a9f9fbd6aaed5f4ce96e", "patch": "@@ -1,8 +1,9 @@\n /* getopt_long and getopt_long_only entry points for GNU getopt.\n-   Copyright (C) 1987,88,89,90,91,92,93,94,96,97 Free Software Foundation, Inc.\n+   Copyright (C) 1987,88,89,90,91,92,93,94,96,97,98\n+     Free Software Foundation, Inc.\n \n    NOTE: The canonical source of this file is maintained with the GNU C Library.\n-   Bugs can be reported to bug-glibc@prep.ai.mit.edu.\n+   Bugs can be reported to bug-glibc@gnu.org.\n \n    This program is free software; you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by the\n@@ -25,7 +26,7 @@\n \n #include \"getopt.h\"\n \n-#if !defined (__STDC__) || !__STDC__\n+#if !defined __STDC__ || !__STDC__\n /* This is a separate conditional since some stdc systems\n    reject `defined (const)'.  */\n #ifndef const\n@@ -44,7 +45,7 @@\n    it is simpler to just do this in the source for each such file.  */\n \n #define GETOPT_INTERFACE_VERSION 2\n-#if !defined (_LIBC) && defined (__GLIBC__) && __GLIBC__ >= 2\n+#if !defined _LIBC && defined __GLIBC__ && __GLIBC__ >= 2\n #include <gnu-versions.h>\n #if _GNU_GETOPT_INTERFACE_VERSION == GETOPT_INTERFACE_VERSION\n #define ELIDE_CODE"}]}