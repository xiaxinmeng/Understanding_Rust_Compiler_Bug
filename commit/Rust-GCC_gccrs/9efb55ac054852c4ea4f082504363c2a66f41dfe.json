{"sha": "9efb55ac054852c4ea4f082504363c2a66f41dfe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWVmYjU1YWMwNTQ4NTJjNGVhNGYwODI1MDQzNjNjMmE2NmY0MWRmZQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2017-10-17T19:36:49Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2017-10-17T19:36:49Z"}, "message": "re PR c++/71368 ([concepts] ICE on constrained compound requirement)\n\n2017-10-17  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/71368\n\t* g++.dg/concepts/pr71368.C: New.\n\nFrom-SVN: r253826", "tree": {"sha": "1f6d418e4f4ce3be0e3d3a39f47169db49a53988", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f6d418e4f4ce3be0e3d3a39f47169db49a53988"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9efb55ac054852c4ea4f082504363c2a66f41dfe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9efb55ac054852c4ea4f082504363c2a66f41dfe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9efb55ac054852c4ea4f082504363c2a66f41dfe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9efb55ac054852c4ea4f082504363c2a66f41dfe/comments", "author": null, "committer": null, "parents": [{"sha": "8240d00373f62c8c36fc4be2c91178d8c3431f38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8240d00373f62c8c36fc4be2c91178d8c3431f38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8240d00373f62c8c36fc4be2c91178d8c3431f38"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "3da50bfe4f102395a38201c184987aacb4ef0ba8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9efb55ac054852c4ea4f082504363c2a66f41dfe/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9efb55ac054852c4ea4f082504363c2a66f41dfe/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9efb55ac054852c4ea4f082504363c2a66f41dfe", "patch": "@@ -1,3 +1,8 @@\n+2017-10-17  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/71368\n+\t* g++.dg/concepts/pr71368.C: New.\n+\n 2017-10-17  Nathan Sidwell  <nathan@acm.org>\n \n \tPR c++/82560"}, {"sha": "f0e0a9563667a57d70f3c3bcd62a3bfecfec3baa", "filename": "gcc/testsuite/g++.dg/concepts/pr71368.C", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9efb55ac054852c4ea4f082504363c2a66f41dfe/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fpr71368.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9efb55ac054852c4ea4f082504363c2a66f41dfe/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fpr71368.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fpr71368.C?ref=9efb55ac054852c4ea4f082504363c2a66f41dfe", "patch": "@@ -0,0 +1,25 @@\n+// { dg-options \"-std=c++17 -fconcepts\" }\n+\n+struct inner;\n+\n+template<typename X> concept bool CompoundReq = requires {\n+    // fine with concrete type in trailing type, i.e. inner& instead of X&\n+    { X::inner_member() } -> X&;\n+};\n+\n+template<typename X> concept bool Concept = requires {\n+    { X::outer_member() } -> CompoundReq;\n+};\n+\n+struct inner { static inner& inner_member(); };\n+struct outer { static inner outer_member(); };\n+\n+int main()\n+{\n+    // fine\n+    static_assert( CompoundReq<inner> );\n+    static_assert( CompoundReq<decltype( outer::outer_member() )> );\n+\n+    // ICE\n+    static_assert( Concept<outer> );\n+}"}]}