{"sha": "8ce4afa36d051920c2a67e54340e2a72fa33cbdd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGNlNGFmYTM2ZDA1MTkyMGMyYTY3ZTU0MzQwZTJhNzJmYTMzY2JkZA==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2007-09-11T10:18:35Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-09-11T10:18:35Z"}, "message": "mips.c (mips_set_mips16_mode): Use separate anchor settings for MIPS16.\n\ngcc/\n\t* config/mips/mips.c (mips_set_mips16_mode): Use separate anchor\n\tsettings for MIPS16.\n\t(mips_use_anchors_for_symbol_p): Use default_use_anchors_for_symbol_p.\n\nFrom-SVN: r128366", "tree": {"sha": "7597f6eb43b213f7263a7e3405791ddc23ea04f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7597f6eb43b213f7263a7e3405791ddc23ea04f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8ce4afa36d051920c2a67e54340e2a72fa33cbdd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ce4afa36d051920c2a67e54340e2a72fa33cbdd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ce4afa36d051920c2a67e54340e2a72fa33cbdd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ce4afa36d051920c2a67e54340e2a72fa33cbdd/comments", "author": null, "committer": null, "parents": [{"sha": "206c2d7add4a9bc3955e455bbe2c23a90422fcf8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/206c2d7add4a9bc3955e455bbe2c23a90422fcf8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/206c2d7add4a9bc3955e455bbe2c23a90422fcf8"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "1c9a5d01144d551db4529085f26f6a893e8eea50", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ce4afa36d051920c2a67e54340e2a72fa33cbdd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ce4afa36d051920c2a67e54340e2a72fa33cbdd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8ce4afa36d051920c2a67e54340e2a72fa33cbdd", "patch": "@@ -1,3 +1,9 @@\n+2007-09-11  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* config/mips/mips.c (mips_set_mips16_mode): Use separate anchor\n+\tsettings for MIPS16.\n+\t(mips_use_anchors_for_symbol_p): Use default_use_anchors_for_symbol_p.\n+\n 2007-09-11  Richard Sandiford  <richard@codesourcery.com>\n \n \t* config/mips/mips.c (mips_symbol_insns_1): Allow LEAs of"}, {"sha": "289f46e18bc4d1eceb7921feafbdda07682cf162", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ce4afa36d051920c2a67e54340e2a72fa33cbdd/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ce4afa36d051920c2a67e54340e2a72fa33cbdd/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=8ce4afa36d051920c2a67e54340e2a72fa33cbdd", "patch": "@@ -5655,6 +5655,14 @@ mips_set_mips16_mode (int mips16_p)\n       /* Silently disable DSP extensions.  */\n       target_flags &= ~MASK_DSP;\n       target_flags &= ~MASK_DSPR2;\n+\n+      /* Experiments suggest we get the best overall results from using\n+\t the range of an unextended lw or sw.  Code that makes heavy use\n+\t of byte or short accesses can do better with ranges of 0...31\n+\t and 0...63 respectively, but most code is sensitive to the range\n+\t of lw and sw instead.  */\n+      targetm.min_anchor_offset = 0;\n+      targetm.max_anchor_offset = 127;\n     }\n   else \n     {\n@@ -5676,6 +5684,9 @@ mips_set_mips16_mode (int mips16_p)\n \t  if (align_functions == 0)\n \t    align_functions = 8;\n \t}\n+\n+      targetm.min_anchor_offset = TARGET_MIN_ANCHOR_OFFSET;\n+      targetm.max_anchor_offset = TARGET_MAX_ANCHOR_OFFSET;\n     }\n \n   /* (Re)initialize mips target internals for new ISA.  */\n@@ -8920,7 +8931,7 @@ mips_use_anchors_for_symbol_p (const_rtx symbol)\n       return false;\n \n     default:\n-      return true;\n+      return default_use_anchors_for_symbol_p (symbol);\n     }\n }\n \f"}]}