{"sha": "2850beb940a4a05e901fe608cf7d45dc8efbb49e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjg1MGJlYjk0MGE0YTA1ZTkwMWZlNjA4Y2Y3ZDQ1ZGM4ZWZiYjQ5ZQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-07-25T00:01:04Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-07-25T00:01:04Z"}, "message": "syscall:  Add ioctl consts from if_tun.h\n    \n    During the gccgo build define constants from\n    some header files are processed by mksysinfo.sh and\n    added to syscall.go.  In some cases the constants\n    are based on macros which are not processed\n    correctly by mksysinfo.sh.  This adds the support\n    to generate the correct values for the TUN* constants\n    from linux/if_tun.h.\n    \n    Fixes golang/go#11707\n    \n    Reviewed-on: https://go-review.googlesource.com/12491\n\nFrom-SVN: r226196", "tree": {"sha": "2bf6b3de2603347489d6e17a4adf5d230d6252c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2bf6b3de2603347489d6e17a4adf5d230d6252c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2850beb940a4a05e901fe608cf7d45dc8efbb49e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2850beb940a4a05e901fe608cf7d45dc8efbb49e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2850beb940a4a05e901fe608cf7d45dc8efbb49e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2850beb940a4a05e901fe608cf7d45dc8efbb49e/comments", "author": null, "committer": null, "parents": [{"sha": "120536c753c841519ccf7170db5ee40c015219fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/120536c753c841519ccf7170db5ee40c015219fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/120536c753c841519ccf7170db5ee40c015219fc"}], "stats": {"total": 189, "additions": 188, "deletions": 1}, "files": [{"sha": "663ad8087b9a57d20b760b34f6f6c416ff738c4a", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2850beb940a4a05e901fe608cf7d45dc8efbb49e/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2850beb940a4a05e901fe608cf7d45dc8efbb49e/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=2850beb940a4a05e901fe608cf7d45dc8efbb49e", "patch": "@@ -1,4 +1,4 @@\n-e4a5e2b2a9dc556685db09421a95871f195f768b\n+3aa95d96181dc4525b1b8ec189f9104afa6d7609\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "029098ffaafed408f1392b4b2bc209a11ea23b0f", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 187, "deletions": 0, "changes": 187, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2850beb940a4a05e901fe608cf7d45dc8efbb49e/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2850beb940a4a05e901fe608cf7d45dc8efbb49e/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=2850beb940a4a05e901fe608cf7d45dc8efbb49e", "patch": "@@ -201,6 +201,67 @@ enum {\n #ifdef TCSETS\n   TCSETS_val = TCSETS,\n #endif\n+#ifdef TUNSETIFF\n+  TUNSETIFF_val = TUNSETIFF,\n+#endif\n+#ifdef TUNSETNOCSUM\n+  TUNSETNOCSUM_val = TUNSETNOCSUM,\n+#endif\n+#ifdef TUNSETDEBUG\n+  TUNSETDEBUG_val = TUNSETDEBUG,\n+#endif\n+#ifdef TUNSETPERSIST\n+  TUNSETPERSIST_val = TUNSETPERSIST,\n+#endif\n+#ifdef TUNSETOWNER\n+  TUNSETOWNER_val = TUNSETOWNER,\n+#endif\n+#ifdef TUNSETLINK\n+  TUNSETLINK_val = TUNSETLINK,\n+#endif\n+#ifdef TUNSETGROUP\n+  TUNSETGROUP_val = TUNSETGROUP,\n+#endif\n+#ifdef TUNGETFEATURES\n+  TUNGETFEATURES_val = TUNGETFEATURES,\n+#endif\n+#ifdef TUNSETOFFLOAD\n+  TUNSETOFFLOAD_val = TUNSETOFFLOAD,\n+#endif\n+#ifdef TUNSETTXFILTER\n+  TUNSETTXFILTER_val = TUNSETTXFILTER,\n+#endif\n+#ifdef TUNGETIFF\n+  TUNGETIFF_val = TUNGETIFF,\n+#endif\n+#ifdef TUNGETSNDBUF\n+  TUNGETSNDBUF_val = TUNGETSNDBUF,\n+#endif\n+#ifdef TUNSETSNDBUF\n+  TUNSETSNDBUF_val = TUNSETSNDBUF,\n+#endif\n+#ifdef TUNATTACHFILTER\n+  TUNATTACHFILTER_val = TUNATTACHFILTER,\n+#endif\n+#ifdef TUNDETACHFILTER\n+  TUNDETACHFILTER_val = TUNDETACHFILTER,\n+#endif\n+#ifdef TUNGETVNETHDRSZ\n+  TUNGETVNETHDRSZ_val = TUNGETVNETHDRSZ,\n+#endif\n+#ifdef TUNSETVNETHDRSZ\n+  TUNSETVNETHDRSZ_val = TUNSETVNETHDRSZ,\n+#endif\n+#ifdef TUNSETQUEUE\n+  TUNSETQUEUE_val = TUNSETQUEUE,\n+#endif\n+#ifdef TUNSETIFINDEX\n+  TUNSETIFINDEX_val = TUNSETIFINDEX,\n+#endif\n+#ifdef TUNGETFILTER\n+  TUNGETFILTER_val = TUNGETFILTER,\n+#endif\n+\n };\n EOF\n \n@@ -830,6 +891,9 @@ grep '^type _passwd ' gen-sysinfo.go | \\\n grep '^const _TIOC' gen-sysinfo.go | \\\n     grep -v '_val =' | \\\n     sed -e 's/^\\(const \\)_\\(TIOC[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+grep '^const _TUNSET' gen-sysinfo.go | \\\n+    grep -v '_val =' | \\\n+    sed -e 's/^\\(const \\)_\\(TUNSET[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n # We need TIOCGWINSZ.\n if ! grep '^const TIOCGWINSZ' ${OUT} >/dev/null 2>&1; then\n   if grep '^const _TIOCGWINSZ_val' ${OUT} >/dev/null 2>&1; then\n@@ -872,6 +936,129 @@ if ! grep '^const TIOCSIG' ${OUT} >/dev/null 2>&1; then\n   fi\n fi\n \n+if ! grep '^const TUNSETNOCSUM' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETNOCSUM_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETNOCSUM = _TUNSETNOCSUM_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNSETDEBUG' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETDEBUG_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETDEBUG = _TUNSETDEBUG_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNSETIFF' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETIFF_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETIFF = _TUNSETIFF_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNSETPERSIST' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETPERSIST_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETPERSIST = _TUNSETPERSIST_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNSETOWNER' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETOWNER_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETOWNER = _TUNSETOWNER_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNSETLINK' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETLINK_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETLINK = _TUNSETLINK_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNSETGROUP' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETGROUP_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETGROUP = _TUNSETGROUP_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNGETFEATURES' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNGETFEATURES_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNGETFEATURES = _TUNGETFEATURES_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNSETOFFLOAD' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETOFFLOAD_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETOFFLOAD = _TUNSETOFFLOAD_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNSETTXFILTER' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETTXFILTER_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETTXFILTER = _TUNSETTXFILTER_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNGETIFF' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNGETIFF_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNGETIFF = _TUNGETIFF_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNGETSNDBUF' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNGETSNDBUF_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNGETSNDBUF = _TUNGETSNDBUF_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNSETSNDBUF' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETSNDBUF_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETSNDBUF = _TUNSETSNDBUF_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNATTACHFILTER' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNATTACHFILTER_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNATTACHFILTER = _TUNATTACHFILTER_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNDETACHFILTER' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNDETACHFILTER_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNDETACHFILTER = _TUNDETACHFILTER_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNGETVNETHDRSZ'${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNGETVNETHDRSZ_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNGETVNETHDRSZ = _TUNGETVNETHDRSZ_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNSETVNETHDRSZ'${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETVNETHDRSZ_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETVNETHDRSZ = _TUNSETVNETHDRSZ_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNSETQUEUE'${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETQUEUE_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETQUEUE = _TUNSETQUEUE_val' >> ${OUT}\n+  fi\n+fi\n+\n+\n+if ! grep '^const TUNSETIFINDEX' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNSETIFINDEX_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNSETIFINDEX = _TUNSETIFINDEX_val' >> ${OUT}\n+  fi\n+fi\n+\n+if ! grep '^const TUNGETFILTER' ${OUT} >/dev/null 2>&1; then\n+  if grep '^const _TUNGETFILTER_val' ${OUT} >/dev/null 2>&1; then\n+    echo 'const TUNGETFILTER = _TUNGETFILTER_val' >> ${OUT}\n+  fi\n+fi\n+\n+\n+\n # The ioctl flags for terminal control\n grep '^const _TC[GS]ET' gen-sysinfo.go | grep -v _val | \\\n     sed -e 's/^\\(const \\)_\\(TC[GS]ET[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}"}]}