{"sha": "b07ff75d63e1bfb4560d2843554629c2eaf6ae19", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjA3ZmY3NWQ2M2UxYmZiNDU2MGQyODQzNTU0NjI5YzJlYWY2YWUxOQ==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1993-09-24T19:53:15Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1993-09-24T19:53:15Z"}, "message": "reorg.c: (mark_referenced_resource): if frame_pointer_needed...\n\n* reorg.c: (mark_referenced_resource): if frame_pointer_needed,\nHARD_FRAME_POINTER_REGNUM is also a referenced resource.\n(mark_target_live_regs): value in HARD_FRAME_POINTER_REGNUM is not\ncall-clobbered.\n(dbr_schedule): HARD_FRAME_POINTER_REGNUM should be valid at the\nend of a function.\n\nFrom-SVN: r5464", "tree": {"sha": "fab378085690690c7f0958788888f42480be5c26", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fab378085690690c7f0958788888f42480be5c26"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b07ff75d63e1bfb4560d2843554629c2eaf6ae19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b07ff75d63e1bfb4560d2843554629c2eaf6ae19", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b07ff75d63e1bfb4560d2843554629c2eaf6ae19", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b07ff75d63e1bfb4560d2843554629c2eaf6ae19/comments", "author": null, "committer": null, "parents": [{"sha": "3ec2ea3e1d3d4a816f5ebcde55519611f87ac91f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ec2ea3e1d3d4a816f5ebcde55519611f87ac91f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ec2ea3e1d3d4a816f5ebcde55519611f87ac91f"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "284c5fcd9cb6fcf1b898392c01387b3b8a489851", "filename": "gcc/reorg.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b07ff75d63e1bfb4560d2843554629c2eaf6ae19/gcc%2Freorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b07ff75d63e1bfb4560d2843554629c2eaf6ae19/gcc%2Freorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freorg.c?ref=b07ff75d63e1bfb4560d2843554629c2eaf6ae19", "patch": "@@ -390,7 +390,12 @@ mark_referenced_resources (x, res, include_delayed_effects)\n \t  res->memory = 1;\n \t  SET_HARD_REG_BIT (res->regs, STACK_POINTER_REGNUM);\n \t  if (frame_pointer_needed)\n-\t    SET_HARD_REG_BIT (res->regs, FRAME_POINTER_REGNUM);\n+\t    {\n+\t      SET_HARD_REG_BIT (res->regs, FRAME_POINTER_REGNUM);\n+#if FRAME_POINTER_REGNUM != HARD_FRAME_POINTER_REGNUM\n+\t      SET_HARD_REG_BIT (res->regs, HARD_FRAME_POINTER_REGNUM);\n+#endif\n+\t    }\n \n \t  for (i = 0; i < FIRST_PSEUDO_REGISTER; i++)\n \t    if (global_regs[i])\n@@ -2445,6 +2450,9 @@ mark_target_live_regs (target, res)\n \t\tif (call_used_regs[i]\n \t\t    && i != STACK_POINTER_REGNUM && i != FRAME_POINTER_REGNUM\n \t\t    && i != ARG_POINTER_REGNUM\n+#if HARD_FRAME_POINTER_REGNUM != FRAME_POINTER_REGNUM\n+\t\t    && i != HARD_FRAME_POINTER_REGNUM\n+#endif\n #if ARG_POINTER_REGNUM != FRAME_POINTER_REGNUM\n \t\t    && ! (i == ARG_POINTER_REGNUM && fixed_regs[i])\n #endif\n@@ -4067,6 +4075,9 @@ dbr_schedule (first, file)\n   if (frame_pointer_needed)\n     {\n       SET_HARD_REG_BIT (end_of_function_needs.regs, FRAME_POINTER_REGNUM);\n+#if HARD_FRAME_POINTER_REGNUM != FRAME_POINTER_REGNUM\n+      SET_HARD_REG_BIT (end_of_function_needs.regs, HARD_FRAME_POINTER_REGNUM);\n+#endif\n #ifdef EXIT_IGNORE_STACK\n       if (! EXIT_IGNORE_STACK)\n #endif"}]}