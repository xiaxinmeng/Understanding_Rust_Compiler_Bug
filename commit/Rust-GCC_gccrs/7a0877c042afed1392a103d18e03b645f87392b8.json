{"sha": "7a0877c042afed1392a103d18e03b645f87392b8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2EwODc3YzA0MmFmZWQxMzkyYTEwM2QxOGUwM2I2NDVmODczOTJiOA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2019-05-27T10:16:04Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2019-05-27T10:16:04Z"}, "message": "trans.c (Call_to_gnu): Use the unpadded type when putting back an intermediate conversion the type of...\n\n\t* gcc-interface/trans.c (Call_to_gnu): Use the unpadded type when\n\tputting back an intermediate conversion the type of the actuals.\n\nFrom-SVN: r271647", "tree": {"sha": "4ee2c5b6225793008e1e34479c83371ff40749a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4ee2c5b6225793008e1e34479c83371ff40749a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7a0877c042afed1392a103d18e03b645f87392b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a0877c042afed1392a103d18e03b645f87392b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a0877c042afed1392a103d18e03b645f87392b8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a0877c042afed1392a103d18e03b645f87392b8/comments", "author": null, "committer": null, "parents": [{"sha": "73cd514ab5ac3d73f0a9e8fcf72fad1a859e5022", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73cd514ab5ac3d73f0a9e8fcf72fad1a859e5022", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73cd514ab5ac3d73f0a9e8fcf72fad1a859e5022"}], "stats": {"total": 41, "additions": 40, "deletions": 1}, "files": [{"sha": "607b9550bd5a9c5bcfea3be0bc070ad0f335bcb6", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a0877c042afed1392a103d18e03b645f87392b8/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a0877c042afed1392a103d18e03b645f87392b8/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=7a0877c042afed1392a103d18e03b645f87392b8", "patch": "@@ -1,3 +1,8 @@\n+2019-05-27  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/trans.c (Call_to_gnu): Use the unpadded type when\n+\tputting back an intermediate conversion the type of the actuals.\n+\n 2019-05-27  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/trans.c (gnat_to_gnu) <Shift operations>: Convert the"}, {"sha": "e41703b6601e776adf9f2a578b254bb3d3689201", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a0877c042afed1392a103d18e03b645f87392b8/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a0877c042afed1392a103d18e03b645f87392b8/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=7a0877c042afed1392a103d18e03b645f87392b8", "patch": "@@ -5355,7 +5355,7 @@ Call_to_gnu (Node_Id gnat_node, tree *gnu_result_type_p, tree gnu_target,\n \t since the parent is a procedure call, so put it back here.  Note that\n \t we might have a dummy type here if the actual is the dereference of a\n \t pointer to it, but that's OK if the formal is passed by reference.  */\n-      tree gnu_actual_type = gnat_to_gnu_type (Etype (gnat_actual));\n+      tree gnu_actual_type = get_unpadded_type (Etype (gnat_actual));\n       if (TYPE_IS_DUMMY_P (gnu_actual_type))\n \tgcc_assert (is_true_formal_parm && DECL_BY_REF_P (gnu_formal));\n       else if (suppress_type_conversion"}, {"sha": "7f64d13f965a9ea870667c4b1ad8432110716006", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a0877c042afed1392a103d18e03b645f87392b8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a0877c042afed1392a103d18e03b645f87392b8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7a0877c042afed1392a103d18e03b645f87392b8", "patch": "@@ -1,3 +1,7 @@\n+2019-05-27  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/unchecked_convert13.adb: New test.\n+\n 2019-05-27  Richard Biener  <rguenther@suse.de>\n \n \tPR testsuite/90615"}, {"sha": "6297e276e0f88af34f0eee42c8e2a5582b034c11", "filename": "gcc/testsuite/gnat.dg/unchecked_convert13.adb", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a0877c042afed1392a103d18e03b645f87392b8/gcc%2Ftestsuite%2Fgnat.dg%2Funchecked_convert13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a0877c042afed1392a103d18e03b645f87392b8/gcc%2Ftestsuite%2Fgnat.dg%2Funchecked_convert13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Funchecked_convert13.adb?ref=7a0877c042afed1392a103d18e03b645f87392b8", "patch": "@@ -0,0 +1,30 @@\n+-- { dg-do compile }\n+\n+with Ada.Unchecked_Conversion;\n+\n+procedure Unchecked_Convert13 is\n+\n+  type B16_T is mod 2 ** 16;\n+  for B16_T'Size use 16;\n+  for B16_T'Alignment use 1;\n+\n+  type Rec_T is record\n+    A : Short_Integer;\n+  end record;\n+  for Rec_T use record\n+    A at 0 range 0 .. 15;\n+  end record;\n+  for Rec_T'Size use 16;\n+\n+  Rec : constant Rec_T := (A => 0);\n+\n+  function Rec_To_B16 is new Ada.Unchecked_Conversion (Rec_T, B16_T);\n+\n+  procedure Nested (B16 : B16_T) is\n+  begin\n+    null;\n+  end;\n+\n+begin\n+  Nested (Rec_To_B16 (Rec));\n+end;"}]}