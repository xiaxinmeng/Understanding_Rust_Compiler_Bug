{"sha": "a3eaca15d90a87cec6f1ba4d380679b69bf43423", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNlYWNhMTVkOTBhODdjZWM2ZjFiYTRkMzgwNjc5YjY5YmY0MzQyMw==", "commit": {"author": {"name": "Neil Booth", "email": "neil@cat.daikokuya.demon.co.uk", "date": "2001-05-12T17:58:41Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2001-05-12T17:58:41Z"}, "message": "c-parse.in (bison parser, [...]): Remove uses of doing_objc_thang.\n\n\t* c-parse.in (bison parser, init_reswords): Remove uses of\n\tdoing_objc_thang.\n\t* c-tree.h (doing_objc_thang): Remove.\n\nFrom-SVN: r42000", "tree": {"sha": "a2c5b5a4524c65caabdb4ad6a3bd00fad2a681c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a2c5b5a4524c65caabdb4ad6a3bd00fad2a681c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3eaca15d90a87cec6f1ba4d380679b69bf43423", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3eaca15d90a87cec6f1ba4d380679b69bf43423", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3eaca15d90a87cec6f1ba4d380679b69bf43423", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3eaca15d90a87cec6f1ba4d380679b69bf43423/comments", "author": null, "committer": null, "parents": [{"sha": "c66ce1f5b7295de1c4d43b3fdb702cf038084e7c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c66ce1f5b7295de1c4d43b3fdb702cf038084e7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c66ce1f5b7295de1c4d43b3fdb702cf038084e7c"}], "stats": {"total": 47, "additions": 21, "deletions": 26}, "files": [{"sha": "8ea9949d9f722978a8363042f861999e516c411d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3eaca15d90a87cec6f1ba4d380679b69bf43423/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3eaca15d90a87cec6f1ba4d380679b69bf43423/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a3eaca15d90a87cec6f1ba4d380679b69bf43423", "patch": "@@ -1,3 +1,9 @@\n+2001-05-12  Neil Booth  <neil@cat.daikokuya.demon.co.uk>\n+\n+\t* c-parse.in (bison parser, init_reswords): Remove uses of\n+\tdoing_objc_thang.\n+\t* c-tree.h (doing_objc_thang): Remove.\n+\n 2001-05-12  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* cpplex.c (_cpp_lex_token): Ensure we warn at most once"}, {"sha": "ab2073e8dfff01ab60177556889cec7185c346cc", "filename": "gcc/c-parse.in", "status": "modified", "additions": 15, "deletions": 21, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3eaca15d90a87cec6f1ba4d380679b69bf43423/gcc%2Fc-parse.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3eaca15d90a87cec6f1ba4d380679b69bf43423/gcc%2Fc-parse.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parse.in?ref=a3eaca15d90a87cec6f1ba4d380679b69bf43423", "patch": "@@ -701,32 +701,22 @@ primary:\n \t| primary '.' identifier\n \t\t{\n ifobjc\n-                  if (doing_objc_thang)\n-                    {\n-\t\t      if (is_public ($1, $3))\n-\t\t\t$$ = build_component_ref ($1, $3);\n-\t\t      else\n-\t\t\t$$ = error_mark_node;\n-\t\t    }\n-                  else\n+\t\t    if (!is_public ($1, $3))\n+\t\t      $$ = error_mark_node;\n+\t\t    else\n end ifobjc\n-\t\t    $$ = build_component_ref ($1, $3);\n+\t\t      $$ = build_component_ref ($1, $3);\n \t\t}\n \t| primary POINTSAT identifier\n \t\t{\n                   tree expr = build_indirect_ref ($1, \"->\");\n \n ifobjc\n-                  if (doing_objc_thang)\n-                    {\n-\t\t      if (is_public (expr, $3))\n-\t\t\t$$ = build_component_ref (expr, $3);\n-\t\t      else\n+\t\t      if (!is_public (expr, $3))\n \t\t\t$$ = error_mark_node;\n-\t\t    }\n-                  else\n+\t\t      else\n end ifobjc\n-                    $$ = build_component_ref (expr, $3);\n+\t\t\t$$ = build_component_ref (expr, $3);\n \t\t}\n \t| primary PLUSPLUS\n \t\t{ $$ = build_unary_op (POSTINCREMENT_EXPR, $1, 0); }\n@@ -3592,10 +3582,12 @@ init_reswords ()\n {\n   unsigned int i;\n   tree id;\n-  int mask = ((doing_objc_thang ? 0 : D_OBJC)\n-\t      | (flag_isoc99 ? 0 : D_C89)\n+  int mask = (flag_isoc99 ? 0 : D_C89)\n \t      | (flag_traditional ? D_TRAD : 0)\n-\t      | (flag_no_asm ? (flag_isoc99 ? D_EXT : D_EXT|D_EXT89) : 0));\n+\t      | (flag_no_asm ? (flag_isoc99 ? D_EXT : D_EXT|D_EXT89) : 0);\n+\n+  if (c_language != clk_objective_c)\n+     mask |= D_OBJC;\n \n   /* It is not necessary to register ridpointers as a GC root, because\n      all the trees it points to are permanently interned in the\n@@ -3715,7 +3707,8 @@ yylexname ()\n       if (TREE_CODE (decl) == TYPE_DECL)\n \treturn TYPENAME;\n     }\n-  else if (doing_objc_thang)\n+ifobjc\n+  else\n     {\n       tree objc_interface_decl = is_class_name (yylval.ttype);\n \n@@ -3725,6 +3718,7 @@ yylexname ()\n \t  return CLASSNAME;\n \t}\n     }\n+end ifobjc\n \n   return IDENTIFIER;\n }"}, {"sha": "c34bd9c201b5d3b1b2353af1563b4abfd0fab1a4", "filename": "gcc/c-tree.h", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3eaca15d90a87cec6f1ba4d380679b69bf43423/gcc%2Fc-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3eaca15d90a87cec6f1ba4d380679b69bf43423/gcc%2Fc-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-tree.h?ref=a3eaca15d90a87cec6f1ba4d380679b69bf43423", "patch": "@@ -359,11 +359,6 @@ extern int system_header_p;\n /* Warn about implicit declarations.  1 = warning, 2 = error.  */\n extern int mesg_implicit_function_declaration;\n \n-/* Nonzero enables objc features.  */\n-\n-#define doing_objc_thang \\\n-  (c_language == clk_objective_c)\n-\n /* In c-decl.c */\n extern void finish_incomplete_decl PARAMS ((tree));\n "}]}