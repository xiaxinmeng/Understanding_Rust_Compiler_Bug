{"sha": "22a4778a0d558eeeedb14db4e811e36483675983", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjJhNDc3OGEwZDU1OGVlZWVkYjE0ZGI0ZTgxMWUzNjQ4MzY3NTk4Mw==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2010-07-05T17:22:52Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2010-07-05T17:22:52Z"}, "message": "configure.ac (ANONVERSCRIPT): Handle sun style.\n\n\t* configure.ac (ANONVERSCRIPT): Handle sun style.\n\tDefine ANONVERSCRIPT_GNU, ANONVERSCRIPT_SUN automake conditionals.\n\t* configure: Regenerate.\n\n\t* Makefile.am [ANONVERSCRIPT]: Protect GNU section with\n\tANONVERSCRIPT_GNU.\n\tIntroduce per-library $(lib)_la_version_arg, $(lib)_la_version_dep\n\tvariables.\n\t[ANONVERSCRIPT_GNU] (version_arg): Default ld arg for version map.\n\t(version_dep): Likewise for dependency.\n\tUse them to set the per-library variables.\n\t[!ANONVERSCRIPT]: Provide them vor the unversioned case.\n\t[ANONVERSCRIPT_SUN]: Handle Sun symbol versioning.\n\t(libgcj_la_DEPENDENCIES): Unconditionally use\n\t$(libgcj_la_version_dep).\n\t(libgcj_la_LINK): Add $(libgcj_la_version_arg).\n\t(libgcj_noncore_la_DEPENDENCIES): Unconditionally use\n\t$(libgcj_la_version_dep).\n\t(libgcj_tools_la_LIBADD): Move -lm ...\n\t(libgcj_tools_la_LDFLAGS): ... here.\n\t(libgcj_tools_la_DEPENDENCIES): Add\n\t$(libgcj_tools_la_version_dep).\n\t(libgcj_tools_la_LINK): Add $(libgcj_tools_la_version_arg).\n\t(lib_gnu_awt_xlib_la_DEPENDENCIES): Add\n\t$(lib_gnu_awt_xlib_la_version_dep).\n\t(lib_gnu_awt_xlib_la_LINK): Add\n\t$(lib_gnu_awt_xlib_la_version_arg).\n\t(libgcj_bc_la_DEPENDENCIES): Add $(libgcj_bc_la_version_dep).\n\t(libgcj_bc_la_LINK): $(libgcj_bc_la_version_arg).\n\t[ANONVERSCRIPT && ANONVERSCRIPT_SUN] (%.ver-sun): New pattern rule.\n\t* Makefile.in: Regenerate.\n\n\t* libgcj.ver: Reformat.\n\nFrom-SVN: r161843", "tree": {"sha": "33fb639d327468fa17d35f0500155d56bc25a8a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/33fb639d327468fa17d35f0500155d56bc25a8a4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/22a4778a0d558eeeedb14db4e811e36483675983", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22a4778a0d558eeeedb14db4e811e36483675983", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22a4778a0d558eeeedb14db4e811e36483675983", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22a4778a0d558eeeedb14db4e811e36483675983/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6d28b933700949abc20728a4a8a931c4679ae329", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d28b933700949abc20728a4a8a931c4679ae329", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d28b933700949abc20728a4a8a931c4679ae329"}], "stats": {"total": 393, "additions": 310, "deletions": 83}, "files": [{"sha": "5cb9b57a696fd6edefcfeb6936563776310980fa", "filename": "libjava/ChangeLog", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=22a4778a0d558eeeedb14db4e811e36483675983", "patch": "@@ -1,3 +1,39 @@\n+2010-07-05  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* configure.ac (ANONVERSCRIPT): Handle sun style.\n+\tDefine ANONVERSCRIPT_GNU, ANONVERSCRIPT_SUN automake conditionals.\n+\t* configure: Regenerate.\n+\n+\t* Makefile.am [ANONVERSCRIPT]: Protect GNU section with\n+\tANONVERSCRIPT_GNU.\n+\tIntroduce per-library $(lib)_la_version_arg, $(lib)_la_version_dep\n+\tvariables.\n+\t[ANONVERSCRIPT_GNU] (version_arg): Default ld arg for version map.\n+\t(version_dep): Likewise for dependency.\n+\tUse them to set the per-library variables.\n+\t[!ANONVERSCRIPT]: Provide them vor the unversioned case.\n+\t[ANONVERSCRIPT_SUN]: Handle Sun symbol versioning.\n+\t(libgcj_la_DEPENDENCIES): Unconditionally use\n+\t$(libgcj_la_version_dep).\n+\t(libgcj_la_LINK): Add $(libgcj_la_version_arg).\n+\t(libgcj_noncore_la_DEPENDENCIES): Unconditionally use\n+\t$(libgcj_la_version_dep).\n+\t(libgcj_tools_la_LIBADD): Move -lm ...\n+\t(libgcj_tools_la_LDFLAGS): ... here.\n+\t(libgcj_tools_la_DEPENDENCIES): Add\n+\t$(libgcj_tools_la_version_dep).\n+\t(libgcj_tools_la_LINK): Add $(libgcj_tools_la_version_arg).\n+\t(lib_gnu_awt_xlib_la_DEPENDENCIES): Add\n+\t$(lib_gnu_awt_xlib_la_version_dep).\n+\t(lib_gnu_awt_xlib_la_LINK): Add\n+\t$(lib_gnu_awt_xlib_la_version_arg).\n+\t(libgcj_bc_la_DEPENDENCIES): Add $(libgcj_bc_la_version_dep).\n+\t(libgcj_bc_la_LINK): $(libgcj_bc_la_version_arg).\n+\t[ANONVERSCRIPT && ANONVERSCRIPT_SUN] (%.ver-sun): New pattern rule.\n+\t* Makefile.in: Regenerate.\n+\n+\t* libgcj.ver: Reformat.\n+\n 2010-06-10  Peter O'Gorman  <peter@pogma.com>\n \n \t* configure.ac: Set SYSTEMSPEC so that -allow_stack_execute is not"}, {"sha": "7bcb5564213d2ab782a53e2214d523b523cffa7b", "filename": "libjava/Makefile.am", "status": "modified", "additions": 74, "deletions": 17, "changes": 91, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=22a4778a0d558eeeedb14db4e811e36483675983", "patch": "@@ -291,7 +291,45 @@ extra_ldflags_libjava = @extra_ldflags_libjava@\n extra_ldflags = @extra_ldflags@\n \n if ANONVERSCRIPT\n-extra_ldflags_libjava += -Wl,--version-script=$(srcdir)/libgcj.ver\n+if ANONVERSCRIPT_GNU\n+version_arg = -Wl,--version-script=$(srcdir)/libgcj.ver\n+libgcj_la_version_arg = $(version_arg)\n+libgcj_tools_la_version_arg = $(version_arg)\n+lib_gnu_awt_xlib_la_version_arg = $(version_arg)\n+libgcj_bc_la_version_arg = $(version_arg)\n+\n+version_dep = $(srcdir)/libgcj.ver\n+libgcj_la_version_dep = $(version_dep)\n+libgcj_tools_la_version_dep = $(version_dep)\n+lib_gnu_awt_xlib_la_version_dep = $(version_dep)\n+libgcj_bc_la_version_dep = $(version_dep)\n+endif\n+if ANONVERSCRIPT_SUN\n+libgcj_la_version_arg = -Wl,-M,libgcj.ver-sun\n+libgcj_tools_la_version_arg = -Wl,-M,libgcj_tools.ver-sun\n+lib_gnu_awt_xlib_la_version_arg = -Wl,-M,lib_gnu_awt_xlib.ver-sun\n+libgcj_bc_la_version_arg = -Wl,-M,libgcj_bc.ver-sun\n+\n+libgcj_la_version_dep = libgcj.ver-sun\n+libgcj_tools_la_version_dep = libgcj_tools.ver-sun\n+lib_gnu_awt_xlib_la_version_dep = lib_gnu_awt_xlib.ver-sun\n+libgcj_bc_la_version_dep = libgcj_bc.ver-sun\n+\n+# The pattern rule necessary to build the *.ver-sun mapfiles is at the end\n+# of the file, see below.\n+endif\n+else\n+version_arg =\n+libgcj_la_version_arg = $(version_arg)\n+libgcj_tools_la_version_arg = $(version_arg)\n+lib_gnu_awt_xlib_la_version_arg = $(version_arg)\n+libgcj_bc_la_version_arg = $(version_arg)\n+\n+version_dep =\n+libgcj_la_version_dep = $(version_dep)\n+libgcj_tools_la_version_dep = $(version_dep)\n+lib_gnu_awt_xlib_la_version_dep = $(version_dep)\n+libgcj_bc_la_version_dep = $(version_dep)\n endif\n \n LTLDFLAGS = $(shell $(top_srcdir)/../libtool-ldflags $(LDFLAGS))\n@@ -463,11 +501,9 @@ libgcj_la_DEPENDENCIES = libgcj-$(gcc_version).jar \\\n \tjava/process-$(PLATFORM).lo \\\n \t$(ALL_PACKAGE_SOURCE_FILES_LO) \\\n \t$(LIBLTDL) $(libgcj_la_LIBADD) \\\n-\t$(LIBJAVA_CORE_EXTRA)\n-if ANONVERSCRIPT\n-libgcj_la_DEPENDENCIES += $(srcdir)/libgcj.ver\n-endif\n-libgcj_la_LINK = $(LIBLINK) $(libgcj_la_LDFLAGS)\n+\t$(LIBJAVA_CORE_EXTRA) \\\n+\t$(libgcj_la_version_dep)\n+libgcj_la_LINK = $(LIBLINK) $(libgcj_la_LDFLAGS) $(libgcj_la_version_arg)\n \n ## A hack to make sure the various gcj-related macros, like\n ## LTGCJCOMPILE, are defined by automake.  This is never actually\n@@ -490,10 +526,7 @@ libgcj_noncore_la_SOURCES =\n libgcj_noncore_la_LDFLAGS = $(libgcj_la_LDFLAGS)\n libgcj_noncore_la_LIBADD = $(libgcj_noncore_la_LIBADD_SUBOBJECTS) libgcj.la\n libgcj_noncore_la_DEPENDENCIES = libgcj-$(gcc_version).jar $(LIBLTDL) \\\n-\t\t$(libgcj_noncore_la_LIBADD) libgcj.la\n-if ANONVERSCRIPT\n-libgcj_noncore_la_DEPENDENCIES += $(srcdir)/libgcj.ver\n-endif\n+\t\t$(libgcj_noncore_la_LIBADD) libgcj.la $(libgcj_la_version_dep)\n libgcj_noncore_la_LINK = $(libgcj_la_LINK)\n \n endif\t# BUILD_SUBLIBS\n@@ -509,13 +542,15 @@ libgcj_tools_la_GCJFLAGS = $(AM_GCJFLAGS) -findirect-dispatch \\\n  -fsource-filename=$(here)/classpath/tools/all-classes.lst\n libgcj_tools_la_LDFLAGS = -rpath $(toolexeclibdir) \\\n  -version-info `grep -v '^\\#' $(srcdir)/libtool-version` \\\n- $(LIBGCJ_LD_SYMBOLIC_FUNCTIONS) $(LIBJAVA_LDFLAGS_NOUNDEF)\n-libgcj_tools_la_LIBADD = libgcj.la -lm\n-libgcj_tools_la_DEPENDENCIES = libgcj.la libgcj.spec\n+ $(LIBGCJ_LD_SYMBOLIC_FUNCTIONS) $(LIBJAVA_LDFLAGS_NOUNDEF) -lm\n+libgcj_tools_la_LIBADD = libgcj.la\n+libgcj_tools_la_DEPENDENCIES = libgcj.la libgcj.spec \\\n+ $(libgcj_tools_la_version_dep)\n if BUILD_SUBLIBS\n libgcj_tools_la_DEPENDENCIES += libgcj-noncore.la\n endif\n-libgcj_tools_la_LINK = $(LIBLINK) $(libgcj_tools_la_LDFLAGS)\n+libgcj_tools_la_LINK = $(LIBLINK) $(libgcj_tools_la_LDFLAGS) \\\n+ $(libgcj_tools_la_version_arg)\n \n ## libjvm.so\n libjvm_la_SOURCES = jni-libjvm.cc\n@@ -543,6 +578,7 @@ lib_gnu_awt_xlib_la_SOURCES = $(xlib_nat_source_files)\n lib_gnu_awt_xlib_la_LIBADD = gnu/awt/xlib.lo gnu/gcj/xlib.lo\n lib_gnu_awt_xlib_la_DEPENDENCIES = libgcj-$(gcc_version).jar \\\n \tlibgcj.la libgcj.spec \\\n+\t$(lib_gnu_awt_xlib_la_version_dep) \\\n \t$(lib_gnu_awt_xlib_la_LIBADD)\n if BUILD_SUBLIBS\n lib_gnu_awt_xlib_la_DEPENDENCIES += libgcj-noncore.la\n@@ -558,7 +594,8 @@ lib_gnu_awt_xlib_la_LDFLAGS = ../libstdc++-v3/src/libstdc++.la \\\n \t@X_PRE_LIBS@ @X_LIBS@ -lX11 @X_EXTRA_LIBS@ \\\n         -rpath $(toolexeclibdir) $(LIBJAVA_LDFLAGS_NOUNDEF) \\\n         -version-info `grep -v '^\\#' $(srcdir)/libtool-version` $(LIBGCJ_LD_SYMBOLIC)\n-lib_gnu_awt_xlib_la_LINK = $(LIBLINK) $(lib_gnu_awt_xlib_la_LDFLAGS)\n+lib_gnu_awt_xlib_la_LINK = $(LIBLINK) $(lib_gnu_awt_xlib_la_LDFLAGS) \\\n+\t$(lib_gnu_awt_xlib_la_version_arg)\n \n ## Support for libgcj_bc: dummy shared library.\n ##\n@@ -567,8 +604,9 @@ lib_gnu_awt_xlib_la_LINK = $(LIBLINK) $(lib_gnu_awt_xlib_la_LDFLAGS)\n libgcj_bc_la_SOURCES = libgcj_bc.c\n libgcj_bc_la_LDFLAGS = -rpath $(toolexeclibdir) -no-static -version-info 1:0:0 \\\n \t$(LIBGCJ_LD_SYMBOLIC_FUNCTIONS) $(LIBJAVA_LDFLAGS_NOUNDEF)\n-libgcj_bc_la_DEPENDENCIES = libgcj.la\n-libgcj_bc_la_LINK = $(LIBLINK) $(libgcj_bc_la_LDFLAGS)\n+libgcj_bc_la_DEPENDENCIES = libgcj.la $(libgcj_bc_la_version_dep)\n+libgcj_bc_la_LINK = $(LIBLINK) $(libgcj_bc_la_LDFLAGS) \\\n+\t$(libgcj_bc_la_version_arg)\n ## This is specific to Linux/{Free,Net,Open}BSD/Hurd and perhaps few others.\n ## USE_LIBGCJ_BC shouldn't be set on other targets.\n libgcj_bc_dummy_LINK = $(CC) -L$(here)/.libs $(CFLAGS) $(LDFLAGS) -shared \\\n@@ -1574,3 +1612,22 @@ distclean-multi:\n \t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=distclean multi-clean\n maintainer-clean-multi:\n \t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=maintainer-clean multi-clean\n+\n+if ANONVERSCRIPT\n+if ANONVERSCRIPT_SUN\n+# This must be at the end of the Makefile, otherwise .SECONDEXPANSION\n+# causes expansion of filenames with $ in their names, which breaks the build.\n+# .SECONDEXPANSION is necessary to allow the use of automatic variables ($@\n+# in this case) in the requisites of pattern rules.\n+.SECONDEXPANSION:\n+\n+%.ver-sun : $(srcdir)/libgcj.ver \\\n+\t\t$(top_srcdir)/../contrib/make_sunver.pl \\\n+\t\t$$($$(basename $$@)_la_OBJECTS) $$($$(basename $$@)_la_LIBADD)\n+\tperl $(top_srcdir)/../contrib/make_sunver.pl \\\n+\t  $(srcdir)/libgcj.ver \\\n+\t `echo $($(basename $@)_la_OBJECTS) $($(basename $@)_la_LIBADD) | \\\n+\t    sed 's,\\([^/ \t]*\\)\\.l\\([ao]\\),.libs/\\1.\\2,g'` \\\n+\t > $@ || (rm -f $@ ; exit 1)\n+endif\n+endif"}, {"sha": "acf4faefd5c8d2fa03dec3749feccf51577a09ae", "filename": "libjava/Makefile.in", "status": "modified", "additions": 109, "deletions": 54, "changes": 163, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=22a4778a0d558eeeedb14db4e811e36483675983", "patch": "@@ -49,22 +49,19 @@ target_triplet = @target@\n @INSTALL_BINARIES_FALSE@@NATIVE_TRUE@am__append_7 = $(bin_programs)\n @INSTALL_AOT_RPM_TRUE@am__append_8 = contrib/aot-compile-rpm\n @BUILD_ECJ1_TRUE@libexecsub_PROGRAMS = ecjx$(EXEEXT)\n-@ANONVERSCRIPT_TRUE@am__append_9 = -Wl,--version-script=$(srcdir)/libgcj.ver\n-@USING_GCC_TRUE@am__append_10 = $(WARNINGS)\n-@BUILD_SUBLIBS_TRUE@am__append_11 = libgcj-noncore.la\n-@USING_BOEHMGC_TRUE@am__append_12 = boehm.cc\n-@USING_NOGC_TRUE@am__append_13 = nogc.cc\n-@USING_POSIX_PLATFORM_TRUE@am__append_14 = posix.cc\n-@USING_WIN32_PLATFORM_TRUE@am__append_15 = win32.cc\n-@USING_DARWIN_CRT_TRUE@am__append_16 = darwin.cc\n-@USING_POSIX_THREADS_TRUE@am__append_17 = posix-threads.cc\n-@USING_WIN32_THREADS_TRUE@am__append_18 = win32-threads.cc\n-@USING_NO_THREADS_TRUE@am__append_19 = no-threads.cc\n-@ANONVERSCRIPT_TRUE@am__append_20 = $(srcdir)/libgcj.ver\n-@ANONVERSCRIPT_TRUE@@BUILD_SUBLIBS_TRUE@am__append_21 = $(srcdir)/libgcj.ver\n-@BUILD_SUBLIBS_TRUE@am__append_22 = libgcj-noncore.la\n-@BUILD_SUBLIBS_TRUE@am__append_23 = libgcj-noncore.la\n-@BUILD_SUBLIBS_TRUE@am__append_24 = libgcj-noncore.la\n+@USING_GCC_TRUE@am__append_9 = $(WARNINGS)\n+@BUILD_SUBLIBS_TRUE@am__append_10 = libgcj-noncore.la\n+@USING_BOEHMGC_TRUE@am__append_11 = boehm.cc\n+@USING_NOGC_TRUE@am__append_12 = nogc.cc\n+@USING_POSIX_PLATFORM_TRUE@am__append_13 = posix.cc\n+@USING_WIN32_PLATFORM_TRUE@am__append_14 = win32.cc\n+@USING_DARWIN_CRT_TRUE@am__append_15 = darwin.cc\n+@USING_POSIX_THREADS_TRUE@am__append_16 = posix-threads.cc\n+@USING_WIN32_THREADS_TRUE@am__append_17 = win32-threads.cc\n+@USING_NO_THREADS_TRUE@am__append_18 = no-threads.cc\n+@BUILD_SUBLIBS_TRUE@am__append_19 = libgcj-noncore.la\n+@BUILD_SUBLIBS_TRUE@am__append_20 = libgcj-noncore.la\n+@BUILD_SUBLIBS_TRUE@am__append_21 = libgcj-noncore.la\n DIST_COMMON = $(srcdir)/sources.am NEWS README ChangeLog THANKS \\\n \t$(srcdir)/Makefile.in $(srcdir)/Makefile.am \\\n \t$(top_srcdir)/configure $(am__configure_deps) \\\n@@ -80,14 +77,14 @@ DIST_COMMON = $(srcdir)/sources.am NEWS README ChangeLog THANKS \\\n \t$(top_srcdir)/gnu/java/nio/natVMPipe${PLATFORM}.cc \\\n \t$(top_srcdir)/gnu/java/nio/natVMSelector${PLATFORM}.cc \\\n \t$(srcdir)/../depcomp\n-@MAINTAINER_MODE_TRUE@@NATIVE_TRUE@am__append_25 = gen-from-JIS\n-@BUILD_SUBLIBS_TRUE@am__append_26 = libgcj-noncore.la\n-@BUILD_SUBLIBS_TRUE@am__append_27 = libgcj-noncore.la\n-@BUILD_SUBLIBS_TRUE@am__append_28 = libgcj-noncore.la\n-@BUILD_SUBLIBS_TRUE@@NATIVE_TRUE@am__append_29 = libgcj-noncore.la\n-@NATIVE_TRUE@@USE_LIBGCJ_BC_TRUE@am__append_30 = libgcj_bc.la\n-@NATIVE_TRUE@@USE_LIBGCJ_BC_FALSE@am__append_31 = libgcj.la\n-@XLIB_AWT_TRUE@am__append_32 = $(xlib_nat_headers)\n+@MAINTAINER_MODE_TRUE@@NATIVE_TRUE@am__append_22 = gen-from-JIS\n+@BUILD_SUBLIBS_TRUE@am__append_23 = libgcj-noncore.la\n+@BUILD_SUBLIBS_TRUE@am__append_24 = libgcj-noncore.la\n+@BUILD_SUBLIBS_TRUE@am__append_25 = libgcj-noncore.la\n+@BUILD_SUBLIBS_TRUE@@NATIVE_TRUE@am__append_26 = libgcj-noncore.la\n+@NATIVE_TRUE@@USE_LIBGCJ_BC_TRUE@am__append_27 = libgcj_bc.la\n+@NATIVE_TRUE@@USE_LIBGCJ_BC_FALSE@am__append_28 = libgcj.la\n+@XLIB_AWT_TRUE@am__append_29 = $(xlib_nat_headers)\n subdir = .\n ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n am__aclocal_m4_deps = $(top_srcdir)/libltdl/acinclude.m4 \\\n@@ -704,7 +701,7 @@ docdir = @docdir@\n dvidir = @dvidir@\n exec_prefix = @exec_prefix@\n extra_ldflags = @extra_ldflags@\n-extra_ldflags_libjava = @extra_ldflags_libjava@ $(am__append_9)\n+extra_ldflags_libjava = @extra_ldflags_libjava@\n gcc_suffix = @gcc_suffix@\n gcjsubdir = @gcjsubdir@\n gxx_include_dir = @gxx_include_dir@\n@@ -952,6 +949,37 @@ db_pathtail = $(gcjsubdir)/$(db_name)\n bin_SCRIPTS = contrib/rebuild-gcj-db contrib/aot-compile \\\n \t$(am__append_8)\n GCJ_WITH_FLAGS = $(GCJ) --encoding=UTF-8 -Wno-deprecated\n+\n+# The pattern rule necessary to build the *.ver-sun mapfiles is at the end\n+# of the file, see below.\n+@ANONVERSCRIPT_FALSE@version_arg = \n+@ANONVERSCRIPT_GNU_TRUE@@ANONVERSCRIPT_TRUE@version_arg = -Wl,--version-script=$(srcdir)/libgcj.ver\n+@ANONVERSCRIPT_FALSE@libgcj_la_version_arg = $(version_arg)\n+@ANONVERSCRIPT_GNU_TRUE@@ANONVERSCRIPT_TRUE@libgcj_la_version_arg = $(version_arg)\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@libgcj_la_version_arg = -Wl,-M,libgcj.ver-sun\n+@ANONVERSCRIPT_FALSE@libgcj_tools_la_version_arg = $(version_arg)\n+@ANONVERSCRIPT_GNU_TRUE@@ANONVERSCRIPT_TRUE@libgcj_tools_la_version_arg = $(version_arg)\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@libgcj_tools_la_version_arg = -Wl,-M,libgcj_tools.ver-sun\n+@ANONVERSCRIPT_FALSE@lib_gnu_awt_xlib_la_version_arg = $(version_arg)\n+@ANONVERSCRIPT_GNU_TRUE@@ANONVERSCRIPT_TRUE@lib_gnu_awt_xlib_la_version_arg = $(version_arg)\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@lib_gnu_awt_xlib_la_version_arg = -Wl,-M,lib_gnu_awt_xlib.ver-sun\n+@ANONVERSCRIPT_FALSE@libgcj_bc_la_version_arg = $(version_arg)\n+@ANONVERSCRIPT_GNU_TRUE@@ANONVERSCRIPT_TRUE@libgcj_bc_la_version_arg = $(version_arg)\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@libgcj_bc_la_version_arg = -Wl,-M,libgcj_bc.ver-sun\n+@ANONVERSCRIPT_FALSE@version_dep = \n+@ANONVERSCRIPT_GNU_TRUE@@ANONVERSCRIPT_TRUE@version_dep = $(srcdir)/libgcj.ver\n+@ANONVERSCRIPT_FALSE@libgcj_la_version_dep = $(version_dep)\n+@ANONVERSCRIPT_GNU_TRUE@@ANONVERSCRIPT_TRUE@libgcj_la_version_dep = $(version_dep)\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@libgcj_la_version_dep = libgcj.ver-sun\n+@ANONVERSCRIPT_FALSE@libgcj_tools_la_version_dep = $(version_dep)\n+@ANONVERSCRIPT_GNU_TRUE@@ANONVERSCRIPT_TRUE@libgcj_tools_la_version_dep = $(version_dep)\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@libgcj_tools_la_version_dep = libgcj_tools.ver-sun\n+@ANONVERSCRIPT_FALSE@lib_gnu_awt_xlib_la_version_dep = $(version_dep)\n+@ANONVERSCRIPT_GNU_TRUE@@ANONVERSCRIPT_TRUE@lib_gnu_awt_xlib_la_version_dep = $(version_dep)\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@lib_gnu_awt_xlib_la_version_dep = lib_gnu_awt_xlib.ver-sun\n+@ANONVERSCRIPT_FALSE@libgcj_bc_la_version_dep = $(version_dep)\n+@ANONVERSCRIPT_GNU_TRUE@@ANONVERSCRIPT_TRUE@libgcj_bc_la_version_dep = $(version_dep)\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@libgcj_bc_la_version_dep = libgcj_bc.ver-sun\n LTLDFLAGS = $(shell $(top_srcdir)/../libtool-ldflags $(LDFLAGS))\n GCJLINK = $(LIBTOOL) --tag=GCJ $(LIBTOOLFLAGS) --mode=link $(GCJ) -L$(here) \\\n \t  $(JC1FLAGS) $(LTLDFLAGS) -o $@\n@@ -992,7 +1020,7 @@ AM_GCJFLAGS = \\\n \t--encoding=UTF-8 \\\n \t-Wno-deprecated -fbootstrap-classes\n \n-AM_CFLAGS = @LIBGCJ_CFLAGS@ $(am__append_10)\n+AM_CFLAGS = @LIBGCJ_CFLAGS@ $(am__append_9)\n @SUPPRESS_LIBGCJ_BC_FALSE@LIBGCJ_BC_FLAGS = -findirect-dispatch -fno-indirect-classes\n @SUPPRESS_LIBGCJ_BC_TRUE@LIBGCJ_BC_FLAGS = \n @BUILD_LIBGCJ_REDUCED_REFLECTION_FALSE@LIBGCJ_REDUCED_REFLECTION_FLAGS = \n@@ -1010,7 +1038,7 @@ AM_CPPFLAGS = -I$(top_srcdir) \\\n \n BOOTCLASSPATH = $(srcdir)/classpath/lib\n libgij_la_SOURCES = gij.cc\n-libgij_la_DEPENDENCIES = libgcj.la libgcj.spec $(am__append_11)\n+libgij_la_DEPENDENCIES = libgcj.la libgcj.spec $(am__append_10)\n libgij_la_LIBADD = -L$(here)/.libs libgcj.la\n libgij_la_LDFLAGS = -rpath $(toolexeclibdir) $(LIBJAVA_LDFLAGS_NOUNDEF) \\\n         -version-info `grep -v '^\\#' $(srcdir)/libtool-version` $(LIBGCJ_LD_SYMBOLIC)\n@@ -1020,9 +1048,9 @@ libgij_la_LINK = $(CXXLINK) $(libgij_la_LDFLAGS)\n @INTERPRETER_TRUE@libgcj_interpret_source_files = jvmti.cc interpret.cc\n libgcj_la_SOURCES = prims.cc jni.cc exception.cc stacktrace.cc link.cc \\\n \tdefineclass.cc verify.cc $(libgcj_interpret_source_files) \\\n-\t$(nat_source_files) $(am__append_12) $(am__append_13) \\\n-\t$(am__append_14) $(am__append_15) $(am__append_16) \\\n-\t$(am__append_17) $(am__append_18) $(am__append_19)\n+\t$(nat_source_files) $(am__append_11) $(am__append_12) \\\n+\t$(am__append_13) $(am__append_14) $(am__append_15) \\\n+\t$(am__append_16) $(am__append_17) $(am__append_18)\n nat_files = $(nat_source_files:.cc=.lo)\n xlib_nat_files = $(xlib_nat_source_files:.cc=.lo)\n \n@@ -1041,20 +1069,24 @@ libgcj_la_LIBADD = \\\n \t$(libgcj_la_LIBADD_SUBOBJECTS) \\\n \t$(LIBFFI) $(ZLIBS) $(GCLIBS)\n \n-libgcj_la_DEPENDENCIES = libgcj-$(gcc_version).jar java/lang/Object.lo \\\n-\tjava/lang/Class.lo java/process-$(PLATFORM).lo \\\n-\t$(ALL_PACKAGE_SOURCE_FILES_LO) $(LIBLTDL) $(libgcj_la_LIBADD) \\\n-\t$(LIBJAVA_CORE_EXTRA) $(am__append_20)\n-libgcj_la_LINK = $(LIBLINK) $(libgcj_la_LDFLAGS)\n+libgcj_la_DEPENDENCIES = libgcj-$(gcc_version).jar \\\n+\tjava/lang/Object.lo \\\n+\tjava/lang/Class.lo \\\n+\tjava/process-$(PLATFORM).lo \\\n+\t$(ALL_PACKAGE_SOURCE_FILES_LO) \\\n+\t$(LIBLTDL) $(libgcj_la_LIBADD) \\\n+\t$(LIBJAVA_CORE_EXTRA) \\\n+\t$(libgcj_la_version_dep)\n+\n+libgcj_la_LINK = $(LIBLINK) $(libgcj_la_LDFLAGS) $(libgcj_la_version_arg)\n EXTRA_libgcj_la_SOURCES = java/lang/Object.java\n @BUILD_SUBLIBS_TRUE@DLL_VERSION = `expr \\`grep -v '^\\#' $(srcdir)/libtool-version | sed -e 's/\\(.*\\):\\(.*\\):.*/\\1 + \\2/'\\``\n @BUILD_SUBLIBS_TRUE@libgcj_noncore_la_SOURCES = \n @BUILD_SUBLIBS_TRUE@libgcj_noncore_la_LDFLAGS = $(libgcj_la_LDFLAGS)\n @BUILD_SUBLIBS_TRUE@libgcj_noncore_la_LIBADD = $(libgcj_noncore_la_LIBADD_SUBOBJECTS) libgcj.la\n-@BUILD_SUBLIBS_TRUE@libgcj_noncore_la_DEPENDENCIES =  \\\n-@BUILD_SUBLIBS_TRUE@\tlibgcj-$(gcc_version).jar $(LIBLTDL) \\\n-@BUILD_SUBLIBS_TRUE@\t$(libgcj_noncore_la_LIBADD) libgcj.la \\\n-@BUILD_SUBLIBS_TRUE@\t$(am__append_21)\n+@BUILD_SUBLIBS_TRUE@libgcj_noncore_la_DEPENDENCIES = libgcj-$(gcc_version).jar $(LIBLTDL) \\\n+@BUILD_SUBLIBS_TRUE@\t\t$(libgcj_noncore_la_LIBADD) libgcj.la $(libgcj_la_version_dep)\n+\n @BUILD_SUBLIBS_TRUE@libgcj_noncore_la_LINK = $(libgcj_la_LINK)\n \n # We compile libgcj_tools with -findirect-dispatch so that they can\n@@ -1069,13 +1101,16 @@ libgcj_tools_la_GCJFLAGS = $(AM_GCJFLAGS) -findirect-dispatch \\\n \n libgcj_tools_la_LDFLAGS = -rpath $(toolexeclibdir) \\\n  -version-info `grep -v '^\\#' $(srcdir)/libtool-version` \\\n- $(LIBGCJ_LD_SYMBOLIC_FUNCTIONS) $(LIBJAVA_LDFLAGS_NOUNDEF)\n+ $(LIBGCJ_LD_SYMBOLIC_FUNCTIONS) $(LIBJAVA_LDFLAGS_NOUNDEF) -lm\n+\n+libgcj_tools_la_LIBADD = libgcj.la\n+libgcj_tools_la_DEPENDENCIES = libgcj.la libgcj.spec \\\n+\t$(libgcj_tools_la_version_dep) $(am__append_19)\n+libgcj_tools_la_LINK = $(LIBLINK) $(libgcj_tools_la_LDFLAGS) \\\n+ $(libgcj_tools_la_version_arg)\n \n-libgcj_tools_la_LIBADD = libgcj.la -lm\n-libgcj_tools_la_DEPENDENCIES = libgcj.la libgcj.spec $(am__append_22)\n-libgcj_tools_la_LINK = $(LIBLINK) $(libgcj_tools_la_LDFLAGS)\n libjvm_la_SOURCES = jni-libjvm.cc\n-libjvm_la_DEPENDENCIES = libgcj.la libgcj.spec $(am__append_23)\n+libjvm_la_DEPENDENCIES = libgcj.la libgcj.spec $(am__append_20)\n libjvm_la_LIBADD = -L$(here)/.libs libgcj.la\n libjvm_la_LDFLAGS = -avoid-version $(LIBGCJ_LD_SYMBOLIC) \\\n  $(LIBJAVA_LDFLAGS_NOUNDEF)\n@@ -1084,7 +1119,8 @@ libjvm_la_LINK = $(CXXLINK) $(libjvm_la_LDFLAGS)\n lib_gnu_awt_xlib_la_SOURCES = $(xlib_nat_source_files)\n lib_gnu_awt_xlib_la_LIBADD = gnu/awt/xlib.lo gnu/gcj/xlib.lo\n lib_gnu_awt_xlib_la_DEPENDENCIES = libgcj-$(gcc_version).jar libgcj.la \\\n-\tlibgcj.spec $(lib_gnu_awt_xlib_la_LIBADD) $(am__append_24)\n+\tlibgcj.spec $(lib_gnu_awt_xlib_la_version_dep) \\\n+\t$(lib_gnu_awt_xlib_la_LIBADD) $(am__append_21)\n lib_gnu_awt_xlib_la_CPPFLAGS = \\\n \t$(AM_CPPFLAGS) \\\n \t-I../libstdc++-v3/include \\\n@@ -1096,13 +1132,17 @@ lib_gnu_awt_xlib_la_LDFLAGS = ../libstdc++-v3/src/libstdc++.la \\\n         -rpath $(toolexeclibdir) $(LIBJAVA_LDFLAGS_NOUNDEF) \\\n         -version-info `grep -v '^\\#' $(srcdir)/libtool-version` $(LIBGCJ_LD_SYMBOLIC)\n \n-lib_gnu_awt_xlib_la_LINK = $(LIBLINK) $(lib_gnu_awt_xlib_la_LDFLAGS)\n+lib_gnu_awt_xlib_la_LINK = $(LIBLINK) $(lib_gnu_awt_xlib_la_LDFLAGS) \\\n+\t$(lib_gnu_awt_xlib_la_version_arg)\n+\n libgcj_bc_la_SOURCES = libgcj_bc.c\n libgcj_bc_la_LDFLAGS = -rpath $(toolexeclibdir) -no-static -version-info 1:0:0 \\\n \t$(LIBGCJ_LD_SYMBOLIC_FUNCTIONS) $(LIBJAVA_LDFLAGS_NOUNDEF)\n \n-libgcj_bc_la_DEPENDENCIES = libgcj.la\n-libgcj_bc_la_LINK = $(LIBLINK) $(libgcj_bc_la_LDFLAGS)\n+libgcj_bc_la_DEPENDENCIES = libgcj.la $(libgcj_bc_la_version_dep)\n+libgcj_bc_la_LINK = $(LIBLINK) $(libgcj_bc_la_LDFLAGS) \\\n+\t$(libgcj_bc_la_version_arg)\n+\n libgcj_bc_dummy_LINK = $(CC) -L$(here)/.libs $(CFLAGS) $(LDFLAGS) -shared \\\n \t-fPIC -nostdlib\n \n@@ -8362,7 +8402,7 @@ jv_convert_LDFLAGS = --main=gnu.gcj.convert.Convert \\\n \n jv_convert_LINK = $(GCJLINK) $(jv_convert_LDFLAGS)\n jv_convert_LDADD = -L$(here)/.libs libgcj.la\n-jv_convert_DEPENDENCIES = libgcj.la libgcj.spec $(am__append_26)\n+jv_convert_DEPENDENCIES = libgcj.la libgcj.spec $(am__append_23)\n gcj_dbtool_SOURCES = \\\n gnu/gcj/tools/gcj_dbtool/natMain.cc\n \n@@ -8372,15 +8412,15 @@ gcj_dbtool_LDFLAGS = --main=gnu.gcj.tools.gcj_dbtool.Main \\\n gcj_dbtool_LINK = $(GCJLINK) $(gcj_dbtool_LDFLAGS)\n gcj_dbtool_LDADD = gnu/gcj/tools/gcj_dbtool.lo -L$(here)/.libs libgcj.la\n gcj_dbtool_DEPENDENCIES = gnu/gcj/tools/gcj_dbtool.lo libgcj.la \\\n-\tlibgcj.spec $(am__append_27)\n+\tlibgcj.spec $(am__append_24)\n gc_analyze_SOURCES = \n gc_analyze_LDFLAGS = --main=gnu.gcj.tools.gc_analyze.MemoryAnalyze \\\n         -rpath $(toolexeclibdir) -shared-libgcc $(THREADLDFLAGS) $(extra_ldflags)\n \n gc_analyze_LINK = $(GCJLINK) $(gc_analyze_LDFLAGS)\n gc_analyze_LDADD = -L$(here)/.libs libgcj-tools.la libgcj.la\n gc_analyze_DEPENDENCIES = libgcj-tools.la libgcj.la libgcj.spec \\\n-\t$(am__append_28)\n+\t$(am__append_25)\n gij_SOURCES = \n gij_LDFLAGS = -rpath $(dbexecdir) -rpath $(toolexeclibdir) \\\n \t-shared-libgcc $(THREADLDFLAGS) $(extra_ldflags)\n@@ -8399,10 +8439,10 @@ ECJX_BASE_FLAGS = -findirect-dispatch \\\n @NATIVE_FALSE@ecjx_LDFLAGS = $(ECJX_BASE_FLAGS) $(ECJ_BUILD_JAR)\n @NATIVE_FALSE@ecjx_LDADD = \n @NATIVE_TRUE@ecjx_LDADD = -L$(here)/.libs $(extra_ldflags) \\\n-@NATIVE_TRUE@\t$(am__append_31)\n+@NATIVE_TRUE@\t$(am__append_28)\n @NATIVE_FALSE@ecjx_DEPENDENCIES = \n @NATIVE_TRUE@ecjx_DEPENDENCIES = libgcj.la libgcj.spec \\\n-@NATIVE_TRUE@\t$(am__append_29) $(am__append_30)\n+@NATIVE_TRUE@\t$(am__append_26) $(am__append_27)\n gappletviewer_SOURCES = \n gappletviewer_LDFLAGS = --main=gnu.classpath.tools.appletviewer.Main \\\n \t-rpath $(toolexeclibdir) -shared-libgcc $(THREADLDFLAGS) $(extra_ldflags)\n@@ -8619,7 +8659,7 @@ gnu/gcj/xlib/natXImage.cc \\\n gnu/gcj/xlib/natXUnmapEvent.cc\n \n sourcesdir = $(jardir)\n-headers_to_make = $(nat_headers) $(am__append_32)\n+headers_to_make = $(nat_headers) $(am__append_29)\n \n # Work around what appears to be a GNU make bug handling MAKEFLAGS\n # values defined in terms of make variables, as is the case for CC and\n@@ -12681,6 +12721,21 @@ distclean-multi:\n maintainer-clean-multi:\n \t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=maintainer-clean multi-clean\n \n+# This must be at the end of the Makefile, otherwise .SECONDEXPANSION\n+# causes expansion of filenames with $ in their names, which breaks the build.\n+# .SECONDEXPANSION is necessary to allow the use of automatic variables ($@\n+# in this case) in the requisites of pattern rules.\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@.SECONDEXPANSION:\n+\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@%.ver-sun : $(srcdir)/libgcj.ver \\\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@\t\t$(top_srcdir)/../contrib/make_sunver.pl \\\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@\t\t$$($$(basename $$@)_la_OBJECTS) $$($$(basename $$@)_la_LIBADD)\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@\tperl $(top_srcdir)/../contrib/make_sunver.pl \\\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@\t  $(srcdir)/libgcj.ver \\\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@\t `echo $($(basename $@)_la_OBJECTS) $($(basename $@)_la_LIBADD) | \\\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@\t    sed 's,\\([^/ \t]*\\)\\.l\\([ao]\\),.libs/\\1.\\2,g'` \\\n+@ANONVERSCRIPT_SUN_TRUE@@ANONVERSCRIPT_TRUE@\t > $@ || (rm -f $@ ; exit 1)\n+\n # Tell versions [3.59,3.63) of GNU make to not export all variables.\n # Otherwise a system limit (for SysV at least) may be exceeded.\n .NOEXPORT:"}, {"sha": "c83dfca3ad256ccfa1f5992f33148f0b96156251", "filename": "libjava/configure", "status": "modified", "additions": 65, "deletions": 7, "changes": 72, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=22a4778a0d558eeeedb14db4e811e36483675983", "patch": "@@ -632,6 +632,10 @@ python_mod_dir\n here\n LD_FINISH_STATIC_SPEC\n LD_START_STATIC_SPEC\n+ANONVERSCRIPT_SUN_FALSE\n+ANONVERSCRIPT_SUN_TRUE\n+ANONVERSCRIPT_GNU_FALSE\n+ANONVERSCRIPT_GNU_TRUE\n ANONVERSCRIPT_FALSE\n ANONVERSCRIPT_TRUE\n SYSDEP_SOURCES\n@@ -13345,7 +13349,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 13348 \"configure\"\n+#line 13352 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -13451,7 +13455,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 13454 \"configure\"\n+#line 13458 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -19430,7 +19434,7 @@ if test \"${enable_sjlj_exceptions+set}\" = set; then :\n   enableval=$enable_sjlj_exceptions; :\n else\n   cat > conftest.$ac_ext << EOF\n-#line 19433 \"configure\"\n+#line 19437 \"configure\"\n struct S { ~S(); };\n void bar();\n void foo()\n@@ -24380,7 +24384,7 @@ rm -f core conftest.err conftest.$ac_objext \\\n \tCFLAGS=\"$chktls_save_CFLAGS\"\n \tif test \"X$thread_CFLAGS\" != Xfailed; then\n \t  CFLAGS=\"$thread_CFLAGS $chktls_save_CFLAGS\"\n-\t  if test \"$cross_compiling\" = yes; then :\n+ \t  \t  \t  \t  \t  \t  if test \"$cross_compiling\" = yes; then :\n   { { $as_echo \"$as_me:${as_lineno-$LINENO}: error: in \\`$ac_pwd':\" >&5\n $as_echo \"$as_me: error: in \\`$ac_pwd':\" >&2;}\n as_fn_error \"cannot run test program while cross compiling\n@@ -24488,7 +24492,8 @@ if test \"${libjava_cv_anon_version_script+set}\" = set; then :\n else\n   save_CFLAGS=\"$CFLAGS\"; save_LDFLAGS=\"$LDFLAGS\"\n    libjava_cv_anon_version_script=no\n-   CFLAGS=\"$CFLAGS -fPIC\"; LDFLAGS=\"$LDFLAGS -shared -Wl,--version-script,conftest.map\"\n+   CFLAGS=\"$CFLAGS -fPIC\";\n+   LDFLAGS=\"$LDFLAGS -shared -Wl,--version-script,conftest.map\"\n    echo '{ global: globalsymb*; local: *; };' > conftest.map\n    if test x$gcc_no_link = xyes; then\n   as_fn_error \"Link tests are not allowed after GCC_NO_EXECUTABLES.\" \"$LINENO\" 5\n@@ -24505,23 +24510,68 @@ main ()\n }\n _ACEOF\n if ac_fn_c_try_link \"$LINENO\"; then :\n-  libjava_cv_anon_version_script=yes\n+  libjava_cv_anon_version_script=gnu\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n+   if test x$libjava_cv_anon_version_script = xno; then\n+     case \"$target_os\" in\n+       solaris2*)\n+         LDFLAGS=\"$save_LDFLAGS\"\n+         LDFLAGS=\"$LDFLAGS -shared -Wl,-M,conftest.map\"\n+         # Sun ld doesn't understand wildcards here.\n+         echo '{ global: globalsymbol; local: *; };' > conftest.map\n+         if test x$gcc_no_link = xyes; then\n+  as_fn_error \"Link tests are not allowed after GCC_NO_EXECUTABLES.\" \"$LINENO\" 5\n+fi\n+cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+void globalsymbol (void) {} void localsymbol (void) {}\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_link \"$LINENO\"; then :\n+  libjava_cv_anon_version_script=sun\n+fi\n+rm -f core conftest.err conftest.$ac_objext \\\n+    conftest$ac_exeext conftest.$ac_ext\n+         ;;\n+     esac\n+   fi\n    CFLAGS=\"$save_CFLAGS\"; LDFLAGS=\"$save_LDFLAGS\"\n \n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $libjava_cv_anon_version_script\" >&5\n $as_echo \"$libjava_cv_anon_version_script\" >&6; }\n- if test \"$libjava_cv_anon_version_script\" = yes; then\n+ if test \"$libjava_cv_anon_version_script\" != no; then\n   ANONVERSCRIPT_TRUE=\n   ANONVERSCRIPT_FALSE='#'\n else\n   ANONVERSCRIPT_TRUE='#'\n   ANONVERSCRIPT_FALSE=\n fi\n \n+ if test \"$libjava_cv_anon_version_script\" = gnu; then\n+  ANONVERSCRIPT_GNU_TRUE=\n+  ANONVERSCRIPT_GNU_FALSE='#'\n+else\n+  ANONVERSCRIPT_GNU_TRUE='#'\n+  ANONVERSCRIPT_GNU_FALSE=\n+fi\n+\n+ if test \"$libjava_cv_anon_version_script\" = sun; then\n+  ANONVERSCRIPT_SUN_TRUE=\n+  ANONVERSCRIPT_SUN_FALSE='#'\n+else\n+  ANONVERSCRIPT_SUN_TRUE='#'\n+  ANONVERSCRIPT_SUN_FALSE=\n+fi\n+\n \n # Check if linker supports static linking on a per library basis\n LD_START_STATIC_SPEC=\n@@ -25061,6 +25111,14 @@ if test -z \"${ANONVERSCRIPT_TRUE}\" && test -z \"${ANONVERSCRIPT_FALSE}\"; then\n   as_fn_error \"conditional \\\"ANONVERSCRIPT\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5\n fi\n+if test -z \"${ANONVERSCRIPT_GNU_TRUE}\" && test -z \"${ANONVERSCRIPT_GNU_FALSE}\"; then\n+  as_fn_error \"conditional \\\"ANONVERSCRIPT_GNU\\\" was never defined.\n+Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5\n+fi\n+if test -z \"${ANONVERSCRIPT_SUN_TRUE}\" && test -z \"${ANONVERSCRIPT_SUN_FALSE}\"; then\n+  as_fn_error \"conditional \\\"ANONVERSCRIPT_SUN\\\" was never defined.\n+Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5\n+fi\n if test -z \"${INSTALL_AOT_RPM_TRUE}\" && test -z \"${INSTALL_AOT_RPM_FALSE}\"; then\n   as_fn_error \"conditional \\\"INSTALL_AOT_RPM\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5"}, {"sha": "7155a5bd31491e6f10a1fd19a4d1f33b4b91aea8", "filename": "libjava/configure.ac", "status": "modified", "additions": 18, "deletions": 3, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.ac?ref=22a4778a0d558eeeedb14db4e811e36483675983", "patch": "@@ -1767,13 +1767,28 @@ AC_CACHE_CHECK([whether ld supports anonymous version scripts],\n   [libjava_cv_anon_version_script],\n   [save_CFLAGS=\"$CFLAGS\"; save_LDFLAGS=\"$LDFLAGS\"\n    libjava_cv_anon_version_script=no\n-   CFLAGS=\"$CFLAGS -fPIC\"; LDFLAGS=\"$LDFLAGS -shared -Wl,--version-script,conftest.map\"\n+   CFLAGS=\"$CFLAGS -fPIC\";\n+   LDFLAGS=\"$LDFLAGS -shared -Wl,--version-script,conftest.map\"\n    echo '{ global: globalsymb*; local: *; };' > conftest.map\n    AC_TRY_LINK(void globalsymbol (void) {} void localsymbol (void) {},,\n-\t       [libjava_cv_anon_version_script=yes], [])\n+\t       [libjava_cv_anon_version_script=gnu], [])\n+   if test x$libjava_cv_anon_version_script = xno; then\n+     case \"$target_os\" in\n+       solaris2*)\n+         LDFLAGS=\"$save_LDFLAGS\"\n+         LDFLAGS=\"$LDFLAGS -shared -Wl,-M,conftest.map\"\n+         # Sun ld doesn't understand wildcards here.\n+         echo '{ global: globalsymbol; local: *; };' > conftest.map\n+         AC_TRY_LINK(void globalsymbol (void) {} void localsymbol (void) {},,\n+\t \t     [libjava_cv_anon_version_script=sun], [])\n+         ;;\n+     esac\n+   fi\n    CFLAGS=\"$save_CFLAGS\"; LDFLAGS=\"$save_LDFLAGS\"\n   ])\n-AM_CONDITIONAL(ANONVERSCRIPT, test \"$libjava_cv_anon_version_script\" = yes)\n+AM_CONDITIONAL(ANONVERSCRIPT, test \"$libjava_cv_anon_version_script\" != no)\n+AM_CONDITIONAL(ANONVERSCRIPT_GNU, test \"$libjava_cv_anon_version_script\" = gnu)\n+AM_CONDITIONAL(ANONVERSCRIPT_SUN, test \"$libjava_cv_anon_version_script\" = sun)\n \n # Check if linker supports static linking on a per library basis\n LD_START_STATIC_SPEC="}, {"sha": "4e90d9d1f8ed3057899e6abe61cabe4757694d18", "filename": "libjava/libgcj.ver", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2Flibgcj.ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22a4778a0d558eeeedb14db4e811e36483675983/libjava%2Flibgcj.ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibgcj.ver?ref=22a4778a0d558eeeedb14db4e811e36483675983", "patch": "@@ -2,6 +2,12 @@\n # symbols in libgcj.so.\n \n {\n-  global: Jv*; _Jv_*; __gcj_personality_v0; __gcj_personality_sj0; _Z*;\n-  local: *;\n+  global:\n+    Jv*;\n+    _Jv_*;\n+    __gcj_personality_v0;\n+    __gcj_personality_sj0;\n+    _Z*;\n+  local:\n+    *;\n };"}]}