{"sha": "5f3641d0c430523d839298a6876f907523811485", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWYzNjQxZDBjNDMwNTIzZDgzOTI5OGE2ODc2ZjkwNzUyMzgxMTQ4NQ==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-02-19T12:14:54Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-02-19T12:46:57Z"}, "message": "libstdc++: uninitialized_construct_using_allocator should use construct_at (LWG 3321)\n\n\t* include/std/memory (uninitialized_construct_using_allocator): Use\n\tstd::construct_at (LWG 3321).", "tree": {"sha": "09c44623d9495b917c167f5a4fb534d0794801c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/09c44623d9495b917c167f5a4fb534d0794801c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5f3641d0c430523d839298a6876f907523811485", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f3641d0c430523d839298a6876f907523811485", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f3641d0c430523d839298a6876f907523811485", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f3641d0c430523d839298a6876f907523811485/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "020a03eec7054adb10396067fab69d0ace00aada", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/020a03eec7054adb10396067fab69d0ace00aada", "html_url": "https://github.com/Rust-GCC/gccrs/commit/020a03eec7054adb10396067fab69d0ace00aada"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "5408a89c7fbd324f5cc0e0e047a89564544c7d94", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f3641d0c430523d839298a6876f907523811485/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f3641d0c430523d839298a6876f907523811485/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=5f3641d0c430523d839298a6876f907523811485", "patch": "@@ -1,5 +1,8 @@\n 2020-02-19  Jonathan Wakely  <jwakely@redhat.com>\n \n+\t* include/std/memory (uninitialized_construct_using_allocator): Use\n+\tstd::construct_at (LWG 3321).\n+\n \t* include/std/memory_resource (polymorphic_allocator::allocate_bytes)\n \t(polymorphic_allocator::allocate_object)\n \t(polymorphic_allocator::new_object): Add nodiscard attribute (LWG3304)."}, {"sha": "aaee6e42c1a1470162f9cd48ddefd2b651bd9b6d", "filename": "libstdc++-v3/include/std/memory", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f3641d0c430523d839298a6876f907523811485/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmemory", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f3641d0c430523d839298a6876f907523811485/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmemory", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmemory?ref=5f3641d0c430523d839298a6876f907523811485", "patch": "@@ -387,9 +387,10 @@ get_pointer_safety() noexcept { return pointer_safety::relaxed; }\n     uninitialized_construct_using_allocator(_Tp* __p, const _Alloc& __a,\n \t\t\t\t\t    _Args&&... __args)\n     {\n-      void* __vp = const_cast<void*>(static_cast<const volatile void*>(__p));\n-      return ::new(__vp) _Tp(std::make_obj_using_allocator<_Tp>(__a,\n-\t    std::forward<_Args>(__args)...));\n+      return std::apply([&](auto&&... __xs) {\n+\treturn std::construct_at(__p, std::forward<decltype(__xs)>(__xs)...);\n+      }, std::uses_allocator_construction_args<_Tp>(__a,\n+\tstd::forward<_Args>(__args)...));\n     }\n // @}\n "}]}