{"sha": "046845defcda6dc1cc579be0a2ccf9931df3e6bb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDQ2ODQ1ZGVmY2RhNmRjMWNjNTc5YmUwYTJjY2Y5OTMxZGYzZTZiYg==", "commit": {"author": {"name": "Joern Rennecke", "email": "amylaar@spamcop.net", "date": "2010-11-12T20:07:34Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2010-11-12T20:07:34Z"}, "message": "re PR target/46438 (xtensa-elf --enable-werror-always build fails)\n\n\tPR target/46438\n\t* config/xtensa/xtensa.c (xtensa_expand_nonlocal_goto): Use LCT_NORMAL.\n\t(xtensa_setup_frame_addresses, xtensa_trampoline_init): Likewise.\n\t(xtensa_function_arg_1): De-constify cum.\n\t(xtensa_expand_prologue): Use add_reg_note.\n\nFrom-SVN: r166672", "tree": {"sha": "9cdab79fc5a6b8a0f1a0a73875e6ee409e7783e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9cdab79fc5a6b8a0f1a0a73875e6ee409e7783e5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/046845defcda6dc1cc579be0a2ccf9931df3e6bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/046845defcda6dc1cc579be0a2ccf9931df3e6bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/046845defcda6dc1cc579be0a2ccf9931df3e6bb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/046845defcda6dc1cc579be0a2ccf9931df3e6bb/comments", "author": null, "committer": null, "parents": [{"sha": "1c71ec08728fedc4fa35217bf91487d70d8956d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c71ec08728fedc4fa35217bf91487d70d8956d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c71ec08728fedc4fa35217bf91487d70d8956d4"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "0b7f92aae1b21ab4cb052821d2ae1caea9ed6631", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/046845defcda6dc1cc579be0a2ccf9931df3e6bb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/046845defcda6dc1cc579be0a2ccf9931df3e6bb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=046845defcda6dc1cc579be0a2ccf9931df3e6bb", "patch": "@@ -1,3 +1,11 @@\n+2010-11-12  Joern Rennecke  <amylaar@spamcop.net>\n+\n+\tPR target/46438\n+\t* config/xtensa/xtensa.c (xtensa_expand_nonlocal_goto): Use LCT_NORMAL.\n+\t(xtensa_setup_frame_addresses, xtensa_trampoline_init): Likewise.\n+\t(xtensa_function_arg_1): De-constify cum.\n+\t(xtensa_expand_prologue): Use add_reg_note.\n+\n 2010-11-12  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* function.c (expand_function_end): Set the locator of the prologue on"}, {"sha": "4abe2aede35bfa952bc993f67a55d8fd4123f452", "filename": "gcc/config/xtensa/xtensa.c", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/046845defcda6dc1cc579be0a2ccf9931df3e6bb/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/046845defcda6dc1cc579be0a2ccf9931df3e6bb/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.c?ref=046845defcda6dc1cc579be0a2ccf9931df3e6bb", "patch": "@@ -1305,7 +1305,7 @@ xtensa_expand_nonlocal_goto (rtx *operands)\n     containing_fp = force_reg (Pmode, containing_fp);\n \n   emit_library_call (gen_rtx_SYMBOL_REF (Pmode, \"__xtensa_nonlocal_goto\"),\n-\t\t     0, VOIDmode, 2,\n+\t\t     LCT_NORMAL, VOIDmode, 2,\n \t\t     containing_fp, Pmode,\n \t\t     goto_handler, Pmode);\n }\n@@ -1583,7 +1583,7 @@ xtensa_setup_frame_addresses (void)\n \n   emit_library_call\n     (gen_rtx_SYMBOL_REF (Pmode, \"__xtensa_libgcc_window_spill\"),\n-     0, VOIDmode, 0);\n+     LCT_NORMAL, VOIDmode, 0);\n }\n \n \n@@ -2043,7 +2043,7 @@ xtensa_function_arg_advance (CUMULATIVE_ARGS *cum, enum machine_mode mode,\n    if this is an incoming argument to the current function.  */\n \n static rtx\n-xtensa_function_arg_1 (const CUMULATIVE_ARGS *cum, enum machine_mode mode,\n+xtensa_function_arg_1 (CUMULATIVE_ARGS *cum, enum machine_mode mode,\n \t\t       const_tree type, bool incoming_p)\n {\n   int regbase, words, max;\n@@ -2637,8 +2637,7 @@ xtensa_expand_prologue (void)\n \t\t\t\t     : stack_pointer_rtx),\n \t\t\t  plus_constant (stack_pointer_rtx, -total_size));\n   RTX_FRAME_RELATED_P (insn) = 1;\n-  REG_NOTES (insn) = gen_rtx_EXPR_LIST (REG_FRAME_RELATED_EXPR,\n-\t\t\t\t\tnote_rtx, REG_NOTES (insn));\n+  add_reg_note (insn, REG_FRAME_RELATED_EXPR, note_rtx);\n }\n \n \n@@ -3590,7 +3589,7 @@ xtensa_trampoline_init (rtx m_tramp, tree fndecl, rtx chain)\n   emit_move_insn (adjust_address (m_tramp, SImode, chain_off), chain);\n   emit_move_insn (adjust_address (m_tramp, SImode, func_off), func);\n   emit_library_call (gen_rtx_SYMBOL_REF (Pmode, \"__xtensa_sync_caches\"),\n-\t\t     0, VOIDmode, 1, XEXP (m_tramp, 0), Pmode);\n+\t\t     LCT_NORMAL, VOIDmode, 1, XEXP (m_tramp, 0), Pmode);\n }\n \n "}]}