{"sha": "704fc8502fc5ac926349d11d4b6622493e4492fb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzA0ZmM4NTAyZmM1YWM5MjYzNDlkMTFkNGI2NjIyNDkzZTQ0OTJmYg==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2012-10-19T17:14:46Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2012-10-19T17:14:46Z"}, "message": "re PR fortran/54224 (Warn for unused internal procedures)\n\n2012-10-19  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/54224\n\t* trans-expr.c (conv_function_val): Set TREE_USED.\n\n2012-10-19  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/54224\n\t* gfortran.dg/warn_unused_function.f90: New.\n\nFrom-SVN: r192620", "tree": {"sha": "c07300db3169cc18303ae3ed5a83783bfaa9eeb6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c07300db3169cc18303ae3ed5a83783bfaa9eeb6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/704fc8502fc5ac926349d11d4b6622493e4492fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/704fc8502fc5ac926349d11d4b6622493e4492fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/704fc8502fc5ac926349d11d4b6622493e4492fb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/704fc8502fc5ac926349d11d4b6622493e4492fb/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "af89bd042ddf9fff34ad79c16123a4cbf814b003", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af89bd042ddf9fff34ad79c16123a4cbf814b003", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af89bd042ddf9fff34ad79c16123a4cbf814b003"}], "stats": {"total": 33, "additions": 33, "deletions": 0}, "files": [{"sha": "04304b1220fe453db5dc299cee52d540f2f57127", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/704fc8502fc5ac926349d11d4b6622493e4492fb/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/704fc8502fc5ac926349d11d4b6622493e4492fb/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=704fc8502fc5ac926349d11d4b6622493e4492fb", "patch": "@@ -1,3 +1,8 @@\n+2012-10-19  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/54224\n+\t* trans-expr.c (conv_function_val): Set TREE_USED.\n+\n 2012-10-18  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/54884"}, {"sha": "b4f9f260326ee7b74531804ef627c90567fe34c1", "filename": "gcc/fortran/trans-expr.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/704fc8502fc5ac926349d11d4b6622493e4492fb/gcc%2Ffortran%2Ftrans-expr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/704fc8502fc5ac926349d11d4b6622493e4492fb/gcc%2Ffortran%2Ftrans-expr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-expr.c?ref=704fc8502fc5ac926349d11d4b6622493e4492fb", "patch": "@@ -2674,6 +2674,8 @@ conv_function_val (gfc_se * se, gfc_symbol * sym, gfc_expr * expr)\n       if (!sym->backend_decl)\n \tsym->backend_decl = gfc_get_extern_function_decl (sym);\n \n+      TREE_USED (sym->backend_decl) = 1;\n+\n       tmp = sym->backend_decl;\n \n       if (sym->attr.cray_pointee)"}, {"sha": "adb5542de5b4664e08c03be792da239fa10bab1b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/704fc8502fc5ac926349d11d4b6622493e4492fb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/704fc8502fc5ac926349d11d4b6622493e4492fb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=704fc8502fc5ac926349d11d4b6622493e4492fb", "patch": "@@ -1,3 +1,8 @@\n+2012-10-19  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/54224\n+\t* gfortran.dg/warn_unused_function.f90: New.\n+\n 2012-10-19  Greta Yorsh  <Greta.Yorsh@arm.com>\n \n \t* lib/target-supports.exp (check_effective_target_arm_prefer_ldrd_strd):"}, {"sha": "4d0ed9abc920804d2a0a1c9a6a59f635bef9f892", "filename": "gcc/testsuite/gfortran.dg/warn_unused_function.f90", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/704fc8502fc5ac926349d11d4b6622493e4492fb/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarn_unused_function.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/704fc8502fc5ac926349d11d4b6622493e4492fb/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarn_unused_function.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarn_unused_function.f90?ref=704fc8502fc5ac926349d11d4b6622493e4492fb", "patch": "@@ -0,0 +1,21 @@\n+! { dg-do compile }\n+! { dg-options \"-Wunused-function\" }\n+!\n+! PR 54224: [4.8 Regression] Bogus -Wunused-function warning with static function\n+!\n+! Contributed by Tobias Burnus <burnus@gcc.gnu.org>\n+\n+module mod_say_hello\n+    private :: hello_integer\n+contains\n+    subroutine say_hello()\n+        call hello_integer(123)\n+    end subroutine\n+\n+    subroutine hello_integer( a )\n+        integer, intent(in) ::  a\n+        print *, \"Hello \", a, \"!\"\n+    end subroutine\n+end module\n+\n+! { dg-final { cleanup-modules \"mod_say_hello\" } }"}]}