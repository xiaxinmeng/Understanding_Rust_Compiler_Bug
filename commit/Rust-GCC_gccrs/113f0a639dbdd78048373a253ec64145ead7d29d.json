{"sha": "113f0a639dbdd78048373a253ec64145ead7d29d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTEzZjBhNjM5ZGJkZDc4MDQ4MzczYTI1M2VjNjQxNDVlYWQ3ZDI5ZA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-02-26T15:19:44Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-02-26T15:19:44Z"}, "message": "libstdc++ Two simplifications for lexicographical_compare\n\n\t* include/bits/ranges_algo.h (__lexicographical_compare_fn): Declare\n\tvariables in smaller scope and avoid calling ranges::distance when we\n\tknow they are pointers. Remove statically-unreachable use of\n\t__builtin_unreachable().\n\t* include/bits/stl_algobase.h (__lexicographical_compare::__lc):\n\tDefine inline.", "tree": {"sha": "9aef310f7e7e4d1c7b6c58925926538e190b4e5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9aef310f7e7e4d1c7b6c58925926538e190b4e5b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/113f0a639dbdd78048373a253ec64145ead7d29d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/113f0a639dbdd78048373a253ec64145ead7d29d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/113f0a639dbdd78048373a253ec64145ead7d29d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/113f0a639dbdd78048373a253ec64145ead7d29d/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8017d95c7f55b98bcee1caf0216fdfd7fd613849", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8017d95c7f55b98bcee1caf0216fdfd7fd613849", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8017d95c7f55b98bcee1caf0216fdfd7fd613849"}], "stats": {"total": 38, "additions": 19, "deletions": 19}, "files": [{"sha": "d545526d93a6f004c72ed4935212b7944930552e", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/113f0a639dbdd78048373a253ec64145ead7d29d/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/113f0a639dbdd78048373a253ec64145ead7d29d/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=113f0a639dbdd78048373a253ec64145ead7d29d", "patch": "@@ -1,5 +1,12 @@\n 2020-02-26  Jonathan Wakely  <jwakely@redhat.com>\n \n+\t* include/bits/ranges_algo.h (__lexicographical_compare_fn): Declare\n+\tvariables in smaller scope and avoid calling ranges::distance when we\n+\tknow they are pointers. Remove statically-unreachable use of\n+\t__builtin_unreachable().\n+\t* include/bits/stl_algobase.h (__lexicographical_compare::__lc):\n+\tDefine inline.\n+\n \t* include/std/ranges (__detail::__maybe_empty_t): Define new helper\n \talias.\n \t(__detail::__maybe_const_t): Likewise."}, {"sha": "05c0851d41158b7603a5fdde1d41b476cd9f0b6b", "filename": "libstdc++-v3/include/bits/ranges_algo.h", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/113f0a639dbdd78048373a253ec64145ead7d29d/libstdc%2B%2B-v3%2Finclude%2Fbits%2Franges_algo.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/113f0a639dbdd78048373a253ec64145ead7d29d/libstdc%2B%2B-v3%2Finclude%2Fbits%2Franges_algo.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Franges_algo.h?ref=113f0a639dbdd78048373a253ec64145ead7d29d", "patch": "@@ -3464,9 +3464,6 @@ namespace ranges\n \t\t && sized_sentinel_for<_Sent2, _Iter2>);\n \t    if constexpr (__sized_iters)\n \t      {\n-\t\tauto __d1 = ranges::distance(__first1, __last1);\n-\t\tauto __d2 = ranges::distance(__first2, __last2);\n-\n \t\tusing _ValueType1 = iter_value_t<_Iter1>;\n \t\tusing _ValueType2 = iter_value_t<_Iter2>;\n \t\tconstexpr bool __use_memcmp\n@@ -3480,6 +3477,9 @@ namespace ranges\n \t\t     && is_same_v<_Proj2, identity>);\n \t\tif constexpr (__use_memcmp)\n \t\t  {\n+\t\t    const auto __d1 = __last1 - __first1;\n+\t\t    const auto __d2 = __last2 - __first2;\n+\n \t\t    if (const auto __len = std::min(__d1, __d2))\n \t\t      {\n \t\t\tconst auto __c\n@@ -3498,10 +3498,8 @@ namespace ranges\n \t\t\t    if (__c < 0)\n \t\t\t      return false;\n \t\t\t  }\n-\t\t\telse\n-\t\t\t  __builtin_unreachable();\n \t\t      }\n-\t\t    return (__last1 - __first1 < __last2 - __first2);\n+\t\t    return __d1 < __d2;\n \t\t  }\n \t      }\n "}, {"sha": "e4f7fa417eda09e7d0500d8d267758a9a06a45cf", "filename": "libstdc++-v3/include/bits/stl_algobase.h", "status": "modified", "additions": 8, "deletions": 13, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/113f0a639dbdd78048373a253ec64145ead7d29d/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algobase.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/113f0a639dbdd78048373a253ec64145ead7d29d/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algobase.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algobase.h?ref=113f0a639dbdd78048373a253ec64145ead7d29d", "patch": "@@ -1254,21 +1254,16 @@ _GLIBCXX_END_NAMESPACE_CONTAINER\n     {\n       template<typename _II1, typename _II2>\n \t_GLIBCXX20_CONSTEXPR\n-\tstatic bool __lc(_II1, _II1, _II2, _II2);\n+\tstatic bool\n+\t__lc(_II1 __first1, _II1 __last1, _II2 __first2, _II2 __last2)\n+\t{\n+\t  using __gnu_cxx::__ops::__iter_less_iter;\n+\t  return std::__lexicographical_compare_impl(__first1, __last1,\n+\t\t\t\t\t\t     __first2, __last2,\n+\t\t\t\t\t\t     __iter_less_iter());\n+\t}\n     };\n \n-  template<bool _BoolType>\n-    template<typename _II1, typename _II2>\n-      _GLIBCXX20_CONSTEXPR\n-      bool\n-      __lexicographical_compare<_BoolType>::\n-      __lc(_II1 __first1, _II1 __last1, _II2 __first2, _II2 __last2)\n-      {\n-\treturn std::__lexicographical_compare_impl(__first1, __last1,\n-\t\t\t\t\t\t   __first2, __last2,\n-\t\t\t\t\t__gnu_cxx::__ops::__iter_less_iter());\n-      }\n-\n   template<>\n     struct __lexicographical_compare<true>\n     {"}]}