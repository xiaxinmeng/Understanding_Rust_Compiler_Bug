{"sha": "4424eb914843237918e03cab5ba71225e470954c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQyNGViOTE0ODQzMjM3OTE4ZTAzY2FiNWJhNzEyMjVlNDcwOTU0Yw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2005-04-21T00:06:34Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2005-04-21T00:06:34Z"}, "message": "Avoid emitting bogus debug info that confuses gdb.\n\nPR c++/20805\n* dwarf2out.c (gen_variable_die): Don't emit a specification if this\nis another declaration.\n\nFrom-SVN: r98473", "tree": {"sha": "c24b827b097f8525a893e678dcf6a8f39be24cca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c24b827b097f8525a893e678dcf6a8f39be24cca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4424eb914843237918e03cab5ba71225e470954c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4424eb914843237918e03cab5ba71225e470954c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4424eb914843237918e03cab5ba71225e470954c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4424eb914843237918e03cab5ba71225e470954c/comments", "author": null, "committer": null, "parents": [{"sha": "78ecf64c1bfd2104ce836b7ce029f3aebd66ead8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78ecf64c1bfd2104ce836b7ce029f3aebd66ead8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78ecf64c1bfd2104ce836b7ce029f3aebd66ead8"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "c32c545477f423ac028d88a60cb2015df9ab5b87", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4424eb914843237918e03cab5ba71225e470954c/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4424eb914843237918e03cab5ba71225e470954c/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=4424eb914843237918e03cab5ba71225e470954c", "patch": "@@ -11615,8 +11615,13 @@ gen_variable_die (tree decl, dw_die_ref context_die)\n      copy decls and set the DECL_ABSTRACT flag on them instead of\n      sharing them.\n \n-     ??? Duplicated blocks have been rewritten to use .debug_ranges.  */\n-  else if (old_die && TREE_STATIC (decl)\n+     ??? Duplicated blocks have been rewritten to use .debug_ranges.\n+\n+     ??? The declare_in_namespace support causes us to get two DIEs for one\n+     variable, both of which are declarations.  We want to avoid considering\n+     one to be a specification, so we must test that this DIE is not a\n+     declaration.  */\n+  else if (old_die && TREE_STATIC (decl) && ! declaration\n \t   && get_AT_flag (old_die, DW_AT_declaration) == 1)\n     {\n       /* This is a definition of a C++ class level static.  */"}]}