{"sha": "5145eda8f01658086322f1b52e6d9d3285c3744e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTE0NWVkYThmMDE2NTgwODYzMjJmMWI1MmU2ZDlkMzI4NWMzNzQ0ZQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-11-04T07:03:33Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-11-04T07:03:33Z"}, "message": "(immed_real_const_1, immed_double_const):\n\nDon't push on const_double_chain in nested function.\n\nFrom-SVN: r2688", "tree": {"sha": "c0573dd98dc03ac372565a94c6927fddd842fecb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c0573dd98dc03ac372565a94c6927fddd842fecb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5145eda8f01658086322f1b52e6d9d3285c3744e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5145eda8f01658086322f1b52e6d9d3285c3744e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5145eda8f01658086322f1b52e6d9d3285c3744e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5145eda8f01658086322f1b52e6d9d3285c3744e/comments", "author": null, "committer": null, "parents": [{"sha": "8f54a09b29d5a56da5a452ec1117731841de2a8a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f54a09b29d5a56da5a452ec1117731841de2a8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f54a09b29d5a56da5a452ec1117731841de2a8a"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "228833c58d15a390a90c2a63d5f90f99db052cfb", "filename": "gcc/varasm.c", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5145eda8f01658086322f1b52e6d9d3285c3744e/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5145eda8f01658086322f1b52e6d9d3285c3744e/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=5145eda8f01658086322f1b52e6d9d3285c3744e", "patch": "@@ -1324,8 +1324,13 @@ immed_double_const (i0, i1, mode)\n   if (in_current_obstack)\n     rtl_in_current_obstack ();\n \n-  CONST_DOUBLE_CHAIN (r) = const_double_chain;\n-  const_double_chain = r;\n+  /* Don't touch const_double_chain in nested function;\n+     see force_const_mem.  */\n+  if (outer_function_chain != 0)\n+    {\n+      CONST_DOUBLE_CHAIN (r) = const_double_chain;\n+      const_double_chain = r;\n+    }\n \n   /* Store const0_rtx in mem-slot since this CONST_DOUBLE is on the chain.\n      Actual use of mem-slot is only through force_const_mem.  */\n@@ -1390,8 +1395,13 @@ immed_real_const_1 (d, mode)\n   if (in_current_obstack)\n     rtl_in_current_obstack ();\n \n-  CONST_DOUBLE_CHAIN (r) = const_double_chain;\n-  const_double_chain = r;\n+  /* Don't touch const_double_chain in nested function;\n+     see force_const_mem.  */\n+  if (outer_function_change != 0)\n+    {\n+      CONST_DOUBLE_CHAIN (r) = const_double_chain;\n+      const_double_chain = r;\n+    }\n \n   /* Store const0_rtx in CONST_DOUBLE_MEM since this CONST_DOUBLE is on the\n      chain, but has not been allocated memory.  Actual use of CONST_DOUBLE_MEM"}]}