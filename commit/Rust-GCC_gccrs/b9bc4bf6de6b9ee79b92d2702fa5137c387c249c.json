{"sha": "b9bc4bf6de6b9ee79b92d2702fa5137c387c249c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjliYzRiZjZkZTZiOWVlNzliOTJkMjcwMmZhNTEzN2MzODdjMjQ5Yw==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2001-09-18T13:39:40Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2001-09-18T13:39:40Z"}, "message": "* objalloc.h (OBJALLOC_ALIGN): Define using offsetof.\n\nFrom-SVN: r45677", "tree": {"sha": "76b22daab5767c28829e58824fe43224587f6130", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76b22daab5767c28829e58824fe43224587f6130"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b9bc4bf6de6b9ee79b92d2702fa5137c387c249c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9bc4bf6de6b9ee79b92d2702fa5137c387c249c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9bc4bf6de6b9ee79b92d2702fa5137c387c249c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9bc4bf6de6b9ee79b92d2702fa5137c387c249c/comments", "author": null, "committer": null, "parents": [{"sha": "d71ebc326b4ae6bdec7bce1402cf69e64202b1b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d71ebc326b4ae6bdec7bce1402cf69e64202b1b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d71ebc326b4ae6bdec7bce1402cf69e64202b1b2"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "2a69d82cd689ccd027902fe022e3901c584fdf96", "filename": "include/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9bc4bf6de6b9ee79b92d2702fa5137c387c249c/include%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9bc4bf6de6b9ee79b92d2702fa5137c387c249c/include%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2FChangeLog?ref=b9bc4bf6de6b9ee79b92d2702fa5137c387c249c", "patch": "@@ -1,3 +1,7 @@\n+2001-09-18  Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* objalloc.h (OBJALLOC_ALIGN): Define using offsetof.\n+\n 2001-09-17  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* libiberty.h (concat_length, concat_copy, concat_copy2,"}, {"sha": "c7106478dca49064d8a0e96595a8b6cdb11524b9", "filename": "include/objalloc.h", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9bc4bf6de6b9ee79b92d2702fa5137c387c249c/include%2Fobjalloc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9bc4bf6de6b9ee79b92d2702fa5137c387c249c/include%2Fobjalloc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2Fobjalloc.h?ref=b9bc4bf6de6b9ee79b92d2702fa5137c387c249c", "patch": "@@ -1,5 +1,5 @@\n /* objalloc.h -- routines to allocate memory for objects\n-   Copyright 1997 Free Software Foundation, Inc.\n+   Copyright 1997, 2001 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Cygnus Solutions.\n \n This program is free software; you can redistribute it and/or modify it\n@@ -56,12 +56,11 @@ struct objalloc_align { char x; double d; };\n #ifndef offsetof\n #include <stddef.h>\n #endif\n-#define OBJALLOC_ALIGN \\\n-  ((ptrdiff_t) ((char *) &((struct objalloc_align *) 0)->d - (char *) 0))\n-#else\n-#define OBJALLOC_ALIGN \\\n-  ((long) ((char *) &((struct objalloc_align *) 0)->d - (char *) 0))\n #endif\n+#ifndef offsetof\n+#define offsetof(TYPE, MEMBER) ((unsigned long) &((TYPE *)0)->MEMBER)\n+#endif\n+#define OBJALLOC_ALIGN offsetof (struct objalloc_align, d)\n \n /* Create an objalloc structure.  Returns NULL if malloc fails.  */\n "}]}