{"sha": "a8d89c45f8731686842f888f52494107bc410007", "node_id": "C_kwDOANBUbNoAKGE4ZDg5YzQ1Zjg3MzE2ODY4NDJmODg4ZjUyNDk0MTA3YmM0MTAwMDc", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2022-01-04T16:43:22Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-01-11T13:24:47Z"}, "message": "[Ada] Reuse Make_Temporary where possible\n\ngcc/ada/\n\n\t* exp_ch7.adb (Set_Block_Elab_Proc, Unnest_Block, Unnest_Loop,\n\tUnnest_Statement_List): Simplify with Make_Temporary.\n\t* exp_put_image.adb (Build_Image_Call): Likewise.\n\t* inline.adb (Generate_Subprogram_Body): Likewise.\n\t* sem_ch13.adb (Build_Predicate_Functions): Likewise.\n\t* sem_util.adb (New_Copy_Separate_List): Likewise.", "tree": {"sha": "9ce56f4aaac750032abfca752bc48fd39a4df9af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9ce56f4aaac750032abfca752bc48fd39a4df9af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a8d89c45f8731686842f888f52494107bc410007", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8d89c45f8731686842f888f52494107bc410007", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8d89c45f8731686842f888f52494107bc410007", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8d89c45f8731686842f888f52494107bc410007/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f5eb70c2276e94991b453ec07f50e00c5e7dbd36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5eb70c2276e94991b453ec07f50e00c5e7dbd36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5eb70c2276e94991b453ec07f50e00c5e7dbd36"}], "stats": {"total": 27, "additions": 9, "deletions": 18}, "files": [{"sha": "57b381c960a6cbcb9c704267e6ad75d7354a45b0", "filename": "gcc/ada/exp_ch7.adb", "status": "modified", "additions": 4, "deletions": 11, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8d89c45f8731686842f888f52494107bc410007/gcc%2Fada%2Fexp_ch7.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8d89c45f8731686842f888f52494107bc410007/gcc%2Fada%2Fexp_ch7.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch7.adb?ref=a8d89c45f8731686842f888f52494107bc410007", "patch": "@@ -4737,8 +4737,7 @@ package body Exp_Ch7 is\n       procedure Set_Block_Elab_Proc is\n       begin\n          if No (Block_Elab_Proc) then\n-            Block_Elab_Proc :=\n-              Make_Defining_Identifier (Loc, Chars => New_Internal_Name ('I'));\n+            Block_Elab_Proc := Make_Temporary (Loc, 'I');\n          end if;\n       end Set_Block_Elab_Proc;\n \n@@ -9964,9 +9963,7 @@ package body Exp_Ch7 is\n       Local_Scop := Entity (Identifier (Decl));\n       Ent := First_Entity (Local_Scop);\n \n-      Local_Proc :=\n-        Make_Defining_Identifier (Loc,\n-          Chars => New_Internal_Name ('P'));\n+      Local_Proc := Make_Temporary (Loc, 'P');\n \n       Local_Body :=\n         Make_Subprogram_Body (Loc,\n@@ -10114,9 +10111,7 @@ package body Exp_Ch7 is\n       Local_Scop := Entity (Identifier (Loop_Stmt));\n       Ent := First_Entity (Local_Scop);\n \n-      Local_Proc :=\n-        Make_Defining_Identifier (Loc,\n-          Chars => New_Internal_Name ('P'));\n+      Local_Proc := Make_Temporary (Loc, 'P');\n \n       Local_Body :=\n         Make_Subprogram_Body (Loc,\n@@ -10170,9 +10165,7 @@ package body Exp_Ch7 is\n       New_Stmts  : constant List_Id := Empty_List;\n \n    begin\n-      Local_Proc :=\n-        Make_Defining_Identifier (Loc,\n-          Chars => New_Internal_Name ('P'));\n+      Local_Proc := Make_Temporary (Loc, 'P');\n \n       Local_Body :=\n         Make_Subprogram_Body (Loc,"}, {"sha": "50e0569a80177572ba8864103c889a19453e8aa3", "filename": "gcc/ada/exp_put_image.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8d89c45f8731686842f888f52494107bc410007/gcc%2Fada%2Fexp_put_image.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8d89c45f8731686842f888f52494107bc410007/gcc%2Fada%2Fexp_put_image.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_put_image.adb?ref=a8d89c45f8731686842f888f52494107bc410007", "patch": "@@ -1072,7 +1072,7 @@ package body Exp_Put_Image is\n       Loc : constant Source_Ptr := Sloc (N);\n       U_Type : constant Entity_Id := Underlying_Type (Entity (Prefix (N)));\n       Sink_Entity : constant Entity_Id :=\n-        Make_Defining_Identifier (Loc, Chars => New_Internal_Name ('S'));\n+        Make_Temporary (Loc, 'S');\n       Sink_Decl : constant Node_Id :=\n         Make_Object_Declaration (Loc,\n           Defining_Identifier => Sink_Entity,\n@@ -1090,7 +1090,7 @@ package body Exp_Put_Image is\n             New_Occurrence_Of (Sink_Entity, Loc),\n             Image_Prefix));\n       Result_Entity : constant Entity_Id :=\n-        Make_Defining_Identifier (Loc, Chars => New_Internal_Name ('R'));\n+        Make_Temporary (Loc, 'R');\n       Result_Decl : constant Node_Id :=\n         Make_Object_Declaration (Loc,\n           Defining_Identifier => Result_Entity,"}, {"sha": "da67fd2296b4ddeb3bfbe93ff2e915fff5271ca5", "filename": "gcc/ada/inline.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8d89c45f8731686842f888f52494107bc410007/gcc%2Fada%2Finline.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8d89c45f8731686842f888f52494107bc410007/gcc%2Fada%2Finline.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Finline.adb?ref=a8d89c45f8731686842f888f52494107bc410007", "patch": "@@ -2189,7 +2189,7 @@ package body Inline is\n             --  conflicts when the non-inlined body N is analyzed.\n \n             Set_Defining_Unit_Name (Specification (Body_To_Inline),\n-               Make_Defining_Identifier (Sloc (N), New_Internal_Name ('P')));\n+               Make_Temporary (Sloc (N), 'P'));\n             Set_Corresponding_Spec (Body_To_Inline, Empty);\n          end Generate_Subprogram_Body;\n "}, {"sha": "78415e666f4d8a7dad97ce0af27722fe21a14bad", "filename": "gcc/ada/sem_ch13.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8d89c45f8731686842f888f52494107bc410007/gcc%2Fada%2Fsem_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8d89c45f8731686842f888f52494107bc410007/gcc%2Fada%2Fsem_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch13.adb?ref=a8d89c45f8731686842f888f52494107bc410007", "patch": "@@ -10666,8 +10666,7 @@ package body Sem_Ch13 is\n                --  what happens if a return appears within a return.\n \n                BTemp :=\n-                 Make_Defining_Identifier (Loc,\n-                   Chars => New_Internal_Name ('B'));\n+                 Make_Temporary (Loc, 'B');\n \n                FBody :=\n                  Make_Subprogram_Body (Loc,"}, {"sha": "3c55dda5a85666d52d2087e10b54470d6b5f6854", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8d89c45f8731686842f888f52494107bc410007/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8d89c45f8731686842f888f52494107bc410007/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=a8d89c45f8731686842f888f52494107bc410007", "patch": "@@ -23435,8 +23435,7 @@ package body Sem_Util is\n             Elmt := First_Elmt (Decls);\n             while Present (Elmt) loop\n                Decl  := Node (Elmt);\n-               New_E := Make_Defining_Identifier (Sloc (Decl),\n-                          New_Internal_Name ('P'));\n+               New_E := Make_Temporary (Sloc (Decl), 'P');\n \n                if Nkind (Decl) = N_Expression_Function then\n                   Decl := Specification (Decl);"}]}