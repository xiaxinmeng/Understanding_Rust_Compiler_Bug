{"sha": "e3822b0aae8c0756929e31c61330e941b17c8eb2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTM4MjJiMGFhZThjMDc1NjkyOWUzMWM2MTMzMGU5NDFiMTdjOGViMg==", "commit": {"author": {"name": "Yannick Moy", "email": "moy@adacore.com", "date": "2018-05-21T14:50:59Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-05-21T14:50:59Z"}, "message": "[Ada] Spurious error in inlining for GNATprove on prefix call notation\n\nDuring the special inlining done in GNATprove mode, a call in prefix\nnotation leads to a spurious error. Now fixed.\n\n2018-05-21  Yannick Moy  <moy@adacore.com>\n\ngcc/ada/\n\n\t* sem_ch6.adb (Analyze_Procedure_Call): Refine test to recognize prefix\n\tcall notation in inlined call in GNATprove mode.\n\nFrom-SVN: r260454", "tree": {"sha": "b570a649c5151a1ba44a8bdbc8e464a1079c4fa1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b570a649c5151a1ba44a8bdbc8e464a1079c4fa1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e3822b0aae8c0756929e31c61330e941b17c8eb2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3822b0aae8c0756929e31c61330e941b17c8eb2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3822b0aae8c0756929e31c61330e941b17c8eb2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3822b0aae8c0756929e31c61330e941b17c8eb2/comments", "author": {"login": "yannickmoy", "id": 859440, "node_id": "MDQ6VXNlcjg1OTQ0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannickmoy", "html_url": "https://github.com/yannickmoy", "followers_url": "https://api.github.com/users/yannickmoy/followers", "following_url": "https://api.github.com/users/yannickmoy/following{/other_user}", "gists_url": "https://api.github.com/users/yannickmoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannickmoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannickmoy/subscriptions", "organizations_url": "https://api.github.com/users/yannickmoy/orgs", "repos_url": "https://api.github.com/users/yannickmoy/repos", "events_url": "https://api.github.com/users/yannickmoy/events{/privacy}", "received_events_url": "https://api.github.com/users/yannickmoy/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bcc093dc813c77d15a8d99ce063a45fa01c7ed73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bcc093dc813c77d15a8d99ce063a45fa01c7ed73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bcc093dc813c77d15a8d99ce063a45fa01c7ed73"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "f7f92af4377542e54e1acd3a69e2802454e51fe1", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3822b0aae8c0756929e31c61330e941b17c8eb2/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3822b0aae8c0756929e31c61330e941b17c8eb2/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=e3822b0aae8c0756929e31c61330e941b17c8eb2", "patch": "@@ -1,3 +1,8 @@\n+2018-04-04  Yannick Moy  <moy@adacore.com>\n+\n+\t* sem_ch6.adb (Analyze_Procedure_Call): Refine test to recognize prefix\n+\tcall notation in inlined call in GNATprove mode.\n+\n 2018-05-21  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* einfo.adb (Is_External_State): An abstract state is also external"}, {"sha": "e33492057eafb230af49a415b0b1a0052d7f7b3d", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3822b0aae8c0756929e31c61330e941b17c8eb2/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3822b0aae8c0756929e31c61330e941b17c8eb2/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=e3822b0aae8c0756929e31c61330e941b17c8eb2", "patch": "@@ -1933,7 +1933,9 @@ package body Sem_Ch6 is\n             begin\n                if Is_Tagged_Type (Typ)\n                  and then Present (First_Formal (Subp))\n-                 and then Etype (First_Formal (Subp)) = Typ\n+                 and then (Etype (First_Formal (Subp)) = Typ\n+                             or else\n+                           Class_Wide_Type (Etype (First_Formal (Subp))) = Typ)\n                  and then Try_Object_Operation (P)\n                then\n                   return;"}]}