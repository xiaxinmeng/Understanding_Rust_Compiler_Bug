{"sha": "30228b6181ada932f357f43fc502fa3c4dc06ee9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzAyMjhiNjE4MWFkYTkzMmYzNTdmNDNmYzUwMmZhM2M0ZGMwNmVlOQ==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2011-08-17T09:14:18Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2011-08-17T09:14:18Z"}, "message": "re PR fortran/50070 (Segmentation fault at size_binop_loc in fold-const.c)\n\n2011-08-17  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/50070\n\t* resolve.c (resolve_fl_variable): Reject non-constant character lengths\n\tin COMMON variables.\n\n\n2011-08-17  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/50070\n\t* gfortran.dg/common_13.f90: New.\n\nFrom-SVN: r177825", "tree": {"sha": "30d0a73d9cfc0c2d6079fc219127b33049960cf9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/30d0a73d9cfc0c2d6079fc219127b33049960cf9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/30228b6181ada932f357f43fc502fa3c4dc06ee9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30228b6181ada932f357f43fc502fa3c4dc06ee9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30228b6181ada932f357f43fc502fa3c4dc06ee9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30228b6181ada932f357f43fc502fa3c4dc06ee9/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0de8f67e3f86fdadc9a2a6c785bf734f7eecf656", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0de8f67e3f86fdadc9a2a6c785bf734f7eecf656", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0de8f67e3f86fdadc9a2a6c785bf734f7eecf656"}], "stats": {"total": 47, "additions": 38, "deletions": 9}, "files": [{"sha": "d7f4b6d37d5007df04eb5d689b7f89deb7c3eca4", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30228b6181ada932f357f43fc502fa3c4dc06ee9/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30228b6181ada932f357f43fc502fa3c4dc06ee9/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=30228b6181ada932f357f43fc502fa3c4dc06ee9", "patch": "@@ -1,3 +1,9 @@\n+2011-08-17  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/50070\n+\t* resolve.c (resolve_fl_variable): Reject non-constant character lengths\n+\tin COMMON variables.\n+\n 2011-08-16  Tobias Burnus  <burnus@net-b.de>\n \t    Dominique Dhumieres  <dominiq@lps.ens.fr>\n "}, {"sha": "7557ab8891d6e9bd76ae29d9c2358147ed7e8c55", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 16, "deletions": 9, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30228b6181ada932f357f43fc502fa3c4dc06ee9/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30228b6181ada932f357f43fc502fa3c4dc06ee9/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=30228b6181ada932f357f43fc502fa3c4dc06ee9", "patch": "@@ -10169,15 +10169,22 @@ resolve_fl_variable (gfc_symbol *sym, int mp_flag)\n \n       if (!gfc_is_constant_expr (e)\n \t  && !(e->expr_type == EXPR_VARIABLE\n-\t       && e->symtree->n.sym->attr.flavor == FL_PARAMETER)\n-\t  && sym->ns->proc_name\n-\t  && (sym->ns->proc_name->attr.flavor == FL_MODULE\n-\t      || sym->ns->proc_name->attr.is_main_program)\n-\t  && !sym->attr.use_assoc)\n-\t{\n-\t  gfc_error (\"'%s' at %L must have constant character length \"\n-\t\t     \"in this context\", sym->name, &sym->declared_at);\n-\t  return FAILURE;\n+\t       && e->symtree->n.sym->attr.flavor == FL_PARAMETER))\n+\t{\n+\t  if (!sym->attr.use_assoc && sym->ns->proc_name\n+\t      && (sym->ns->proc_name->attr.flavor == FL_MODULE\n+\t\t  || sym->ns->proc_name->attr.is_main_program))\n+\t    {\n+\t      gfc_error (\"'%s' at %L must have constant character length \"\n+\t\t\t\"in this context\", sym->name, &sym->declared_at);\n+\t      return FAILURE;\n+\t    }\n+\t  if (sym->attr.in_common)\n+\t    {\n+\t      gfc_error (\"COMMON variable '%s' at %L must have constant \"\n+\t\t\t \"character length\", sym->name, &sym->declared_at);\n+\t      return FAILURE;\n+\t    }\n \t}\n     }\n "}, {"sha": "1d070a8b433c0c42f31ece7b417e3224eff2d396", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30228b6181ada932f357f43fc502fa3c4dc06ee9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30228b6181ada932f357f43fc502fa3c4dc06ee9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=30228b6181ada932f357f43fc502fa3c4dc06ee9", "patch": "@@ -1,3 +1,8 @@\n+2011-08-17  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/50070\n+\t* gfortran.dg/common_13.f90: New.\n+\n 2011-08-16  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/50086"}, {"sha": "07c78f1a73cb3e5e27932f7dd729d765a146164f", "filename": "gcc/testsuite/gfortran.dg/common_13.f90", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30228b6181ada932f357f43fc502fa3c4dc06ee9/gcc%2Ftestsuite%2Fgfortran.dg%2Fcommon_13.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30228b6181ada932f357f43fc502fa3c4dc06ee9/gcc%2Ftestsuite%2Fgfortran.dg%2Fcommon_13.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcommon_13.f90?ref=30228b6181ada932f357f43fc502fa3c4dc06ee9", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+!\n+! PR 50070: Segmentation fault at size_binop_loc in fold-const.c\n+!\n+! Contributed by Vittorio Zecca <zeccav@gmail.com>\n+\n+subroutine sub\n+  common n,z             ! { dg-error \"must have constant character length\" }\n+  integer :: n\n+  character(len=n) :: z\n+end"}]}