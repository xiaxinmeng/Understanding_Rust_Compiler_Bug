{"sha": "741f28399312449ab64e61c0cc3564de2a98dd63", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzQxZjI4Mzk5MzEyNDQ5YWI2NGU2MWMwY2MzNTY0ZGUyYTk4ZGQ2Mw==", "commit": {"author": {"name": "Andrew MacLeod", "email": "amacleod@cygnus.com", "date": "1998-06-16T12:36:14Z"}, "committer": {"name": "Andrew Macleod", "email": "amacleod@gcc.gnu.org", "date": "1998-06-16T12:36:14Z"}, "message": "decl.c (grokvardecl): Don't build external assembler names for TYPENAMEs in other namespaces as there...\n\n1998-06-16  Andrew MacLeod  <amacleod@cygnus.com>\n\t* decl.c (grokvardecl): Don't build external assembler names for\n\tTYPENAMEs in other namespaces as there is no declarator.\n\t* error.c (cp_file_of, cp_line_of): Don't extract file or line number\n\tinfo from DECL_CONTEXT if it is NULL.\n\nFrom-SVN: r20524", "tree": {"sha": "e0e3f9d3a47e23326ab99cbd617d3095ac001e55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e0e3f9d3a47e23326ab99cbd617d3095ac001e55"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/741f28399312449ab64e61c0cc3564de2a98dd63", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/741f28399312449ab64e61c0cc3564de2a98dd63", "html_url": "https://github.com/Rust-GCC/gccrs/commit/741f28399312449ab64e61c0cc3564de2a98dd63", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/741f28399312449ab64e61c0cc3564de2a98dd63/comments", "author": null, "committer": null, "parents": [{"sha": "6f6074ea6f56b6b887939a2f9925a0b456ebcbba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f6074ea6f56b6b887939a2f9925a0b456ebcbba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f6074ea6f56b6b887939a2f9925a0b456ebcbba"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "3372b1933775094bab37c24bb8d284e8567bae56", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/741f28399312449ab64e61c0cc3564de2a98dd63/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/741f28399312449ab64e61c0cc3564de2a98dd63/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=741f28399312449ab64e61c0cc3564de2a98dd63", "patch": "@@ -1,3 +1,10 @@\n+1998-06-16  Andrew MacLeod  <amacleod@cygnus.com>\n+\n+\t* decl.c (grokvardecl): Don't build external assembler names for \n+\tTYPENAMEs in other namespaces as there is no declarator.\n+\t* error.c (cp_file_of, cp_line_of): Don't extract file or line number\n+\tinfo from DECL_CONTEXT if it is NULL.\n+\n 1998-06-16  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* call.c (check_dtor_name): Split out."}, {"sha": "674d668471bf4dbbf15a743234a51c0bcd025d5a", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/741f28399312449ab64e61c0cc3564de2a98dd63/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/741f28399312449ab64e61c0cc3564de2a98dd63/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=741f28399312449ab64e61c0cc3564de2a98dd63", "patch": "@@ -7848,7 +7848,7 @@ grokvardecl (type, declarator, specbits_in, initialized, constp, in_namespace)\n     {\n       tree context = in_namespace ? in_namespace : current_namespace;\n       decl = build_decl (VAR_DECL, declarator, complete_type (type));\n-      if (context != global_namespace)\n+      if (context != global_namespace && declarator)\n \tDECL_ASSEMBLER_NAME (decl) =  build_static_name (context,\n \t\t\t\t\t\t\t declarator);\n     }"}, {"sha": "d4dc054c970c8acee55c6393bac223bcd484966a", "filename": "gcc/cp/error.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/741f28399312449ab64e61c0cc3564de2a98dd63/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/741f28399312449ab64e61c0cc3564de2a98dd63/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=741f28399312449ab64e61c0cc3564de2a98dd63", "patch": "@@ -1811,7 +1811,7 @@ char *\n cp_file_of (t)\n      tree t;\n {\n-  if (TREE_CODE (t) == PARM_DECL)\n+  if (TREE_CODE (t) == PARM_DECL && DECL_CONTEXT (t))\n     return DECL_SOURCE_FILE (DECL_CONTEXT (t));\n   else if (TREE_CODE_CLASS (TREE_CODE (t)) == 't')\n     return DECL_SOURCE_FILE (TYPE_MAIN_DECL (t));\n@@ -1824,7 +1824,7 @@ cp_line_of (t)\n      tree t;\n {\n   int line = 0;\n-  if (TREE_CODE (t) == PARM_DECL)\n+  if (TREE_CODE (t) == PARM_DECL && DECL_CONTEXT (t))\n     line = DECL_SOURCE_LINE (DECL_CONTEXT (t));\n   if (TREE_CODE (t) == TYPE_DECL && DECL_ARTIFICIAL (t))\n     t = TREE_TYPE (t);"}]}