{"sha": "59739e3ce9aa176d4b11da01a0075f8244108557", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTk3MzllM2NlOWFhMTc2ZDRiMTFkYTAxYTAwNzVmODI0NDEwODU1Nw==", "commit": {"author": {"name": "Manfred Hollstein", "email": "manfred@s-direktnet.de", "date": "1998-01-27T22:23:50Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-01-27T22:23:50Z"}, "message": "configure (package_makefile_rules_frag): New variable, which names a file with generic rules, ...\n\n        * configure (package_makefile_rules_frag): New variable, which names\n        a file with generic rules, ...\n        Change comment to mention we now have FIVE parts.\n        * configure: Undo last change.\n\nFrom-SVN: r17522", "tree": {"sha": "b460b0f9f13a574fe6883c161936e0b335a7aa7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b460b0f9f13a574fe6883c161936e0b335a7aa7e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/59739e3ce9aa176d4b11da01a0075f8244108557", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59739e3ce9aa176d4b11da01a0075f8244108557", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59739e3ce9aa176d4b11da01a0075f8244108557", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59739e3ce9aa176d4b11da01a0075f8244108557/comments", "author": null, "committer": null, "parents": [{"sha": "4c46bad0388ebc3d55c7c9c07254cf17afcc3f84", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c46bad0388ebc3d55c7c9c07254cf17afcc3f84", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c46bad0388ebc3d55c7c9c07254cf17afcc3f84"}], "stats": {"total": 55, "additions": 39, "deletions": 16}, "files": [{"sha": "41cf6b55ab93edaedea1a71a1b3b04934056d948", "filename": "ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59739e3ce9aa176d4b11da01a0075f8244108557/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59739e3ce9aa176d4b11da01a0075f8244108557/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=59739e3ce9aa176d4b11da01a0075f8244108557", "patch": "@@ -1,3 +1,10 @@\n+Tue Jan 27 23:25:06 1998  Manfred Hollstein  <manfred@s-direktnet.de>\n+\n+\t* configure (package_makefile_rules_frag): New variable, which names\n+\ta file with generic rules, ...\n+\tChange comment to mention we now have FIVE parts.\n+\t* configure: Undo last change.\n+\n Tue Jan 27 23:15:55 1998  Lassi A. Tuura  <lat@iki.fi>\n \n \t* config.guess: More accurate determination of HP processor types."}, {"sha": "c821cf6091def059a5ddfb04f824d5068831749b", "filename": "configure", "status": "modified", "additions": 32, "deletions": 16, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59739e3ce9aa176d4b11da01a0075f8244108557/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59739e3ce9aa176d4b11da01a0075f8244108557/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=59739e3ce9aa176d4b11da01a0075f8244108557", "patch": "@@ -62,6 +62,7 @@ moveifchange=\n norecursion=\n other_options=\n package_makefile_frag=\n+package_makefile_rules_frag=\n prefix=/usr/local\n progname=\n program_prefix=\n@@ -81,7 +82,7 @@ subdirs=\n target_alias=NOTARGET\n target_makefile_frag=\n undefs=NOUNDEFS\n-version=\"$Revision: 1.7 $\"\n+version=\"$Revision: 1.22 $\"\n x11=default\n \n ### we might need to use some other shell than /bin/sh for running subshells\n@@ -1038,24 +1039,43 @@ EOF\n         # been somewhat optimized and is perhaps a bit twisty.\n \n         # code is order so as to try to sed the smallest input files we know.\n+        # so do these separately because I don't trust the order of sed -e expressions.\n \n-        # the four makefile fragments MUST end up in the resulting Makefile in this order: \n-        # package, target, host, and site.  so do these separately because I don't trust the\n-        #  order of sed -e expressions.\n+        # the five makefile fragments MUST end up in the resulting Makefile in this order: \n+        # package macros, target, host, site, and package rules.\n \n         if [ -f ${srcdir}/${subdir}/${Makefile_in} ] ; then\n \n+            # Conditionalize the makefile for this package from \"Makefile.in\" (or whatever it's called) into Makefile.tem.\n+            rm -f ${subdir}/${Makefile}.tem\n+            case \"${package_makefile_rules_frag}\" in\n+              \"\") cp ${srcdir}/${subdir}/${Makefile_in} ${subdir}/Makefile.tem ;;\n+              *)\n+                      if [ ! -f ${package_makefile_rules_frag} ] ; then\n+                              package_makefile_rules_frag=${srcdir}/${package_makefile_rules_frag}\n+                      fi\n+                      if [ -f ${package_makefile_rules_frag} ] ; then\n+                              sed -e \"/^####/  r ${package_makefile_rules_frag}\" ${srcdir}/${subdir}/${Makefile_in} > ${Makefile}.tem\n+                      else\n+                              echo '***' Expected package makefile rules fragment \\\"${package_makefile_rules_frag}\\\" 1>&2\n+                              echo '***' is missing in ${PWD=`pwd`}. 1>&2\n+                              cp ${srcdir}/${subdir}/${Makefile_in} ${subdir}/Makefile.tem\n+                      fi\n+            esac\n+            # working copy now in ${Makefile}.tem\n+\n             # Conditionalize for this site.\n             rm -f ${Makefile}\n-            case \"${site}\" in\n-              \"\") cp ${srcdir}/${subdir}/${Makefile_in} ${Makefile} ;;\n+              case \"${site}\" in\n+              \"\") mv ${subdir}/Makefile.tem ${Makefile} ;;\n               *)\n                       site_makefile_frag=${srcdir}/config/ms-${site}\n \n                       if [ -f ${site_makefile_frag} ] ; then\n-                              sed -e \"/^####/  r ${site_makefile_frag}\" ${srcdir}/${subdir}/${Makefile_in} > ${Makefile}\n+                              sed -e \"/^####/  r ${site_makefile_frag}\" ${subdir}/Makefile.tem \\\n+                                      > ${Makefile}\n                       else\n-                              cp ${srcdir}/${subdir}/${Makefile_in} ${Makefile}\n+                              mv ${subdir}/Makefile.tem ${Makefile}\n                               site_makefile_frag=\n                       fi\n                       ;;\n@@ -1098,26 +1118,22 @@ EOF\n             esac\n             # working copy now in ${Makefile}\n \n-            # Conditionalize the makefile for this package from \"Makefile.in\" (or whatever it's called) into Makefile.tem.\n-            rm -f ${subdir}/${Makefile}.tem\n+            # Emit the default values of this package's macros.\n+            rm -f ${subdir}/Makefile.tem\n             case \"${package_makefile_frag}\" in\n               \"\") mv ${Makefile} ${subdir}/Makefile.tem ;;\n               *)\n                       if [ ! -f ${package_makefile_frag} ] ; then\n                               package_makefile_frag=${srcdir}/${package_makefile_frag}\n                       fi\n                       if [ -f ${package_makefile_frag} ] ; then\n-                              sed -e \"/^####/  r ${package_makefile_frag}\" ${Makefile} > ${subdir}/${Makefile}.tem\n+                              sed -e \"/^####/  r ${package_makefile_frag}\" ${Makefile} > ${subdir}/Makefile.tem\n                       else\n-                              echo '***' Expected package makefile fragment \\\"${package_makefile_frag}\\\" 1>&2\n+                              echo '***' Expected package makefile fragment \\\"${package_makefile_rules_frag}\\\" 1>&2\n                               echo '***' is missing in ${PWD=`pwd`}. 1>&2\n                               mv ${Makefile} ${subdir}/Makefile.tem\n                       fi\n             esac\n-            # real copy now in ${subdir}/${Makefile}.tem\n-\n-            mv ${subdir}/${Makefile}.tem ${subdir}/Makefile.tem 2>/dev/null\n-\n             # real copy now in ${subdir}/Makefile.tem\n \n             # prepend warning about editting, and a bunch of variables."}]}