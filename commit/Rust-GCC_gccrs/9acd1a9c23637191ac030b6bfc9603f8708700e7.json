{"sha": "9acd1a9c23637191ac030b6bfc9603f8708700e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWFjZDFhOWMyMzYzNzE5MWFjMDMwYjZiZmM5NjAzZjg3MDg3MDBlNw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-10-12T13:00:52Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-10-12T13:00:52Z"}, "message": "[multiple changes]\n\n2010-10-12  Arnaud Charlet  <charlet@adacore.com>\n\n\t* g-comlin.adb (Foreach_Switch): Make this procedure generic to avoid\n\tusing 'Access.\n\n2010-10-12  Emmanuel Briot  <briot@adacore.com>\n\n\t* switch-m.adb: Allow building even in -gnat05 mode.\n\nFrom-SVN: r165374", "tree": {"sha": "eaf125c5c98ee1a483625493df6914a7e4af4939", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eaf125c5c98ee1a483625493df6914a7e4af4939"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9acd1a9c23637191ac030b6bfc9603f8708700e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9acd1a9c23637191ac030b6bfc9603f8708700e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9acd1a9c23637191ac030b6bfc9603f8708700e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9acd1a9c23637191ac030b6bfc9603f8708700e7/comments", "author": null, "committer": null, "parents": [{"sha": "f16e8df93c40e3d88487edfba355d69fdb2400db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f16e8df93c40e3d88487edfba355d69fdb2400db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f16e8df93c40e3d88487edfba355d69fdb2400db"}], "stats": {"total": 30, "additions": 24, "deletions": 6}, "files": [{"sha": "0e356709c9732f05c87c49d707c44e2b72a1c133", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9acd1a9c23637191ac030b6bfc9603f8708700e7/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9acd1a9c23637191ac030b6bfc9603f8708700e7/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=9acd1a9c23637191ac030b6bfc9603f8708700e7", "patch": "@@ -1,3 +1,12 @@\n+2010-10-12  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* g-comlin.adb (Foreach_Switch): Make this procedure generic to avoid\n+\tusing 'Access.\n+\n+2010-10-12  Emmanuel Briot  <briot@adacore.com>\n+\n+\t* switch-m.adb: Allow building even in -gnat05 mode.\n+\n 2010-10-12  Robert Dewar  <dewar@adacore.com>\n \n \t* debug.adb: Add comment."}, {"sha": "3c2dbce90a3e0102c71202b89102d4ba9492a3f5", "filename": "gcc/ada/g-comlin.adb", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9acd1a9c23637191ac030b6bfc9603f8708700e7/gcc%2Fada%2Fg-comlin.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9acd1a9c23637191ac030b6bfc9603f8708700e7/gcc%2Fada%2Fg-comlin.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-comlin.adb?ref=9acd1a9c23637191ac030b6bfc9603f8708700e7", "patch": "@@ -194,9 +194,10 @@ package body GNAT.Command_Line is\n    --  Return True if the characters starting at Index in Type_Str are\n    --  equivalent to Substring.\n \n+   generic\n+      with function Callback (S : String; Index : Integer) return Boolean;\n    procedure Foreach_Switch\n      (Config   : Command_Line_Configuration;\n-      Callback : access function (S : String; Index : Integer) return Boolean;\n       Section  : String);\n    --  Iterate over all switches defined in Config, for a specific section.\n    --  Index is set to the index in Config.Switches\n@@ -1400,7 +1401,6 @@ package body GNAT.Command_Line is\n \n    procedure Foreach_Switch\n      (Config   : Command_Line_Configuration;\n-      Callback : access function (S : String; Index : Integer) return Boolean;\n       Section  : String)\n    is\n    begin\n@@ -1457,10 +1457,12 @@ package body GNAT.Command_Line is\n       Tmp : Boolean;\n       pragma Unreferenced (Tmp);\n \n+      procedure Foreach is new Foreach_Switch (Add_Switch);\n+\n    --  Start of processing for Get_Switches\n \n    begin\n-      Foreach_Switch (Config, Add_Switch'Access, Section => Section);\n+      Foreach (Config, Section => Section);\n \n       --  Adding relevant aliases\n \n@@ -1816,14 +1818,16 @@ package body GNAT.Command_Line is\n             return True;\n          end Analyze_Simple_Switch;\n \n+         procedure Foreach is new Foreach_Switch (Analyze_Simple_Switch);\n+\n       --  Start of processing for Group_Analysis\n \n       begin\n          Idx := Group'First;\n          while Idx <= Group'Last loop\n             Found := False;\n \n-            Foreach_Switch (Config, Analyze_Simple_Switch'Access, Section);\n+            Foreach (Config, Section);\n \n             if not Found then\n                For_Each_Simple_Switch\n@@ -1945,13 +1949,16 @@ package body GNAT.Command_Line is\n          return True;\n       end Starts_With;\n \n+      procedure Foreach_In_Config is new Foreach_Switch (Is_In_Config);\n+      procedure Foreach_Starts_With is new Foreach_Switch (Starts_With);\n+\n    --  Start of processing for For_Each_Simple_Switch\n \n    begin\n       --  First determine if the switch corresponds to one belonging to the\n       --  configuration. If so, run callback and exit.\n \n-      Foreach_Switch (Config, Is_In_Config'Access, Section);\n+      Foreach_In_Config (Config, Section);\n \n       if Found_In_Config then\n          return;\n@@ -2024,7 +2031,7 @@ package body GNAT.Command_Line is\n         and then Config.Switches /= null\n       then\n          Found_In_Config := False;\n-         Foreach_Switch (Config, Starts_With'Access, Section);\n+         Foreach_Starts_With (Config, Section);\n          if Found_In_Config then\n             return;\n          end if;"}, {"sha": "6a67a0579e5df81dfa3b627f0a198faac87ab919", "filename": "gcc/ada/switch-m.adb", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9acd1a9c23637191ac030b6bfc9603f8708700e7/gcc%2Fada%2Fswitch-m.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9acd1a9c23637191ac030b6bfc9603f8708700e7/gcc%2Fada%2Fswitch-m.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch-m.adb?ref=9acd1a9c23637191ac030b6bfc9603f8708700e7", "patch": "@@ -31,7 +31,9 @@ with Prj;      use Prj;\n with Prj.Env;  use Prj.Env;\n with Table;\n \n+pragma Warnings (Off, \"*is an Ada 2012 unit\");\n with System.Multiprocessors; use System.Multiprocessors;\n+pragma Warnings (On, \"*is an Ada 2012 unit\");\n \n package body Switch.M is\n "}]}