{"sha": "14d9aa9fc01a369cdde5ed8d17760f09974e01cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTRkOWFhOWZjMDFhMzY5Y2RkZTVlZDhkMTc3NjBmMDk5NzRlMDFjZg==", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2014-09-09T11:22:52Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2014-09-09T11:22:52Z"}, "message": "[3/7] Convert FP mnemonics to UAL | mul+add patterns\n\n\t* config/arm/vfp.md (*mulsf3_vfp): Use UAL assembly syntax.\n\t(*muldf3_vfp): Likewise.\n\t(*mulsf3negsf_vfp): Likewise.\n\t(*muldf3negdf_vfp): Likewise.\n\t(*mulsf3addsf_vfp): Likewise.\n\t(*muldf3adddf_vfp): Likewise.\n\t(*mulsf3subsf_vfp): Likewise.\n\t(*muldf3subdf_vfp): Likewise.\n\t(*mulsf3negsfaddsf_vfp): Likewise.\n\t(*fmuldf3negdfadddf_vfp): Likewise.\n\t(*mulsf3negsfsubsf_vfp): Likewise.\n\t(*muldf3negdfsubdf_vfp): Likewise.\n\n\t* gcc.target/arm/vfp-1.c: Updated expected assembly.\n\nFrom-SVN: r215052", "tree": {"sha": "3ea0241d17a24758a4c29af223eb0ef17e3ddf5d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ea0241d17a24758a4c29af223eb0ef17e3ddf5d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/14d9aa9fc01a369cdde5ed8d17760f09974e01cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14d9aa9fc01a369cdde5ed8d17760f09974e01cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14d9aa9fc01a369cdde5ed8d17760f09974e01cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14d9aa9fc01a369cdde5ed8d17760f09974e01cf/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "436c249d4410d7a0fe6be16d7cedf0826856ded8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/436c249d4410d7a0fe6be16d7cedf0826856ded8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/436c249d4410d7a0fe6be16d7cedf0826856ded8"}], "stats": {"total": 67, "additions": 43, "deletions": 24}, "files": [{"sha": "cbc9afd658239f9d8e6ed14fab72dbd89f29fb49", "filename": "gcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14d9aa9fc01a369cdde5ed8d17760f09974e01cf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14d9aa9fc01a369cdde5ed8d17760f09974e01cf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=14d9aa9fc01a369cdde5ed8d17760f09974e01cf", "patch": "@@ -1,3 +1,18 @@\n+2014-09-09  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+\t* config/arm/vfp.md (*mulsf3_vfp): Use UAL assembly syntax.\n+\t(*muldf3_vfp): Likewise.\n+\t(*mulsf3negsf_vfp): Likewise.\n+\t(*muldf3negdf_vfp): Likewise.\n+\t(*mulsf3addsf_vfp): Likewise.\n+\t(*muldf3adddf_vfp): Likewise.\n+\t(*mulsf3subsf_vfp): Likewise.\n+\t(*muldf3subdf_vfp): Likewise.\n+\t(*mulsf3negsfaddsf_vfp): Likewise.\n+\t(*fmuldf3negdfadddf_vfp): Likewise.\n+\t(*mulsf3negsfsubsf_vfp): Likewise.\n+\t(*muldf3negdfsubdf_vfp): Likewise.\n+\n 2014-09-09  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/arm/vfp.md (*abssf2_vfp): Use UAL assembly syntax."}, {"sha": "d165d7cf9683e44535f218c78b66abb776dc6351", "filename": "gcc/config/arm/vfp.md", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14d9aa9fc01a369cdde5ed8d17760f09974e01cf/gcc%2Fconfig%2Farm%2Fvfp.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14d9aa9fc01a369cdde5ed8d17760f09974e01cf/gcc%2Fconfig%2Farm%2Fvfp.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fvfp.md?ref=14d9aa9fc01a369cdde5ed8d17760f09974e01cf", "patch": "@@ -749,7 +749,7 @@\n \t(mult:SF (match_operand:SF 1 \"s_register_operand\" \"t\")\n \t\t (match_operand:SF 2 \"s_register_operand\" \"t\")))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n-  \"fmuls%?\\\\t%0, %1, %2\"\n+  \"vmul%?.f32\\\\t%0, %1, %2\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmuls\")]\n@@ -760,7 +760,7 @@\n \t(mult:DF (match_operand:DF 1 \"s_register_operand\" \"w\")\n \t\t (match_operand:DF 2 \"s_register_operand\" \"w\")))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP_DOUBLE\"\n-  \"fmuld%?\\\\t%P0, %P1, %P2\"\n+  \"vmul%?.f64\\\\t%P0, %P1, %P2\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmuld\")]\n@@ -771,7 +771,7 @@\n \t(mult:SF (neg:SF (match_operand:SF 1 \"s_register_operand\" \"t\"))\n \t\t (match_operand:SF\t   2 \"s_register_operand\" \"t\")))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n-  \"fnmuls%?\\\\t%0, %1, %2\"\n+  \"vnmul%?.f32\\\\t%0, %1, %2\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmuls\")]\n@@ -782,7 +782,7 @@\n \t(mult:DF (neg:DF (match_operand:DF 1 \"s_register_operand\" \"w\"))\n \t\t (match_operand:DF\t   2 \"s_register_operand\" \"w\")))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP_DOUBLE\"\n-  \"fnmuld%?\\\\t%P0, %P1, %P2\"\n+  \"vnmul%?.f64\\\\t%P0, %P1, %P2\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmuld\")]\n@@ -798,7 +798,7 @@\n \t\t\t  (match_operand:SF 3 \"s_register_operand\" \"t\"))\n \t\t (match_operand:SF\t    1 \"s_register_operand\" \"0\")))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n-  \"fmacs%?\\\\t%0, %2, %3\"\n+  \"vmla%?.f32\\\\t%0, %2, %3\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmacs\")]\n@@ -810,7 +810,7 @@\n \t\t\t  (match_operand:DF 3 \"s_register_operand\" \"w\"))\n \t\t (match_operand:DF\t    1 \"s_register_operand\" \"0\")))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP_DOUBLE\"\n-  \"fmacd%?\\\\t%P0, %P2, %P3\"\n+  \"vmla%?.f64\\\\t%P0, %P2, %P3\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmacd\")]\n@@ -823,7 +823,7 @@\n \t\t\t   (match_operand:SF 3 \"s_register_operand\" \"t\"))\n \t\t  (match_operand:SF\t     1 \"s_register_operand\" \"0\")))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n-  \"fmscs%?\\\\t%0, %2, %3\"\n+  \"vnmls%?.f32\\\\t%0, %2, %3\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmacs\")]\n@@ -835,7 +835,7 @@\n \t\t\t   (match_operand:DF 3 \"s_register_operand\" \"w\"))\n \t\t  (match_operand:DF\t     1 \"s_register_operand\" \"0\")))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP_DOUBLE\"\n-  \"fmscd%?\\\\t%P0, %P2, %P3\"\n+  \"vnmls%?.f64\\\\t%P0, %P2, %P3\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmacd\")]\n@@ -848,7 +848,7 @@\n \t\t  (mult:SF (match_operand:SF 2 \"s_register_operand\" \"t\")\n \t\t\t   (match_operand:SF 3 \"s_register_operand\" \"t\"))))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n-  \"fnmacs%?\\\\t%0, %2, %3\"\n+  \"vmls%?.f32\\\\t%0, %2, %3\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmacs\")]\n@@ -860,7 +860,7 @@\n \t\t  (mult:DF (match_operand:DF 2 \"s_register_operand\" \"w\")\n \t\t\t   (match_operand:DF 3 \"s_register_operand\" \"w\"))))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP_DOUBLE\"\n-  \"fnmacd%?\\\\t%P0, %P2, %P3\"\n+  \"vmls%?.f64\\\\t%P0, %P2, %P3\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmacd\")]\n@@ -875,7 +875,7 @@\n \t\t    (match_operand:SF\t      3 \"s_register_operand\" \"t\"))\n \t\t  (match_operand:SF\t      1 \"s_register_operand\" \"0\")))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n-  \"fnmscs%?\\\\t%0, %2, %3\"\n+  \"vnmla%?.f32\\\\t%0, %2, %3\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmacs\")]\n@@ -888,7 +888,7 @@\n \t\t    (match_operand:DF\t      3 \"s_register_operand\" \"w\"))\n \t\t  (match_operand:DF\t      1 \"s_register_operand\" \"0\")))]\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP_DOUBLE\"\n-  \"fnmscd%?\\\\t%P0, %P2, %P3\"\n+  \"vnmla%?.f64\\\\t%P0, %P2, %P3\"\n   [(set_attr \"predicable\" \"yes\")\n    (set_attr \"predicable_short_it\" \"no\")\n    (set_attr \"type\" \"fmacd\")]"}, {"sha": "eb6b1f80a39bed8ced2d1e3b2a86f604b024aa96", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14d9aa9fc01a369cdde5ed8d17760f09974e01cf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14d9aa9fc01a369cdde5ed8d17760f09974e01cf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=14d9aa9fc01a369cdde5ed8d17760f09974e01cf", "patch": "@@ -2,6 +2,10 @@\n \n \t* gcc.target/arm/vfp-1.c: Updated expected assembly.\n \n+2014-09-09  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+\t* gcc.target/arm/vfp-1.c: Updated expected assembly.\n+\n 2014-09-09  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* gcc.target/arm/pr51835.c: Update expected assembly."}, {"sha": "43495aece848257e9ef0770945fab7b8411c2eb2", "filename": "gcc/testsuite/gcc.target/arm/vfp-1.c", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14d9aa9fc01a369cdde5ed8d17760f09974e01cf/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fvfp-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14d9aa9fc01a369cdde5ed8d17760f09974e01cf/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fvfp-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fvfp-1.c?ref=14d9aa9fc01a369cdde5ed8d17760f09974e01cf", "patch": "@@ -26,22 +26,22 @@ void test_sf() {\n   /* { dg-final { scan-assembler \"vdiv.f32\" } } */\n   f1 = f2 / f3;\n   /* mulsf3_vfp */\n-  /* { dg-final { scan-assembler \"fmuls\" } } */\n+  /* { dg-final { scan-assembler \"vmul.f32\" } } */\n   f1 = f2 * f3;\n   /* mulsf3negsf_vfp */\n-  /* { dg-final { scan-assembler \"fnmuls\" } } */\n+  /* { dg-final { scan-assembler \"vnmul.f32\" } } */\n   f1 = -f2 * f3;\n   /* mulsf3addsf_vfp */\n-  /* { dg-final { scan-assembler \"fmacs\" } } */\n+  /* { dg-final { scan-assembler \"vmla.f32\" } } */\n   f1 = f2 * f3 + f1;\n   /* mulsf3subsf_vfp */\n-  /* { dg-final { scan-assembler \"fmscs\" } } */\n+  /* { dg-final { scan-assembler \"vnmls.f32\" } } */\n   f1 = f2 * f3 - f1;\n   /* mulsf3negsfaddsf_vfp */\n-  /* { dg-final { scan-assembler \"fnmacs\" } } */\n+  /* { dg-final { scan-assembler \"vmls.f32\" } } */\n   f1 = f2 - f3 * f1;\n   /* mulsf3negsfsubsf_vfp */\n-  /* { dg-final { scan-assembler \"fnmscs\" } } */\n+  /* { dg-final { scan-assembler \"vnmla.f32\" } } */\n   f1 = -f2 * f3 - f1;\n   /* sqrtsf2_vfp */\n   /* { dg-final { scan-assembler \"fsqrts\" } } */\n@@ -67,22 +67,22 @@ void test_df() {\n   /* { dg-final { scan-assembler \"vdiv.f64\" } } */\n   d1 = d2 / d3;\n   /* muldf3_vfp */\n-  /* { dg-final { scan-assembler \"fmuld\" } } */\n+  /* { dg-final { scan-assembler \"vmul.f64\" } } */\n   d1 = d2 * d3;\n   /* muldf3negdf_vfp */\n-  /* { dg-final { scan-assembler \"fnmuld\" } } */\n+  /* { dg-final { scan-assembler \"vnmul.f64\" } } */\n   d1 = -d2 * d3;\n   /* muldf3adddf_vfp */\n-  /* { dg-final { scan-assembler \"fmacd\" } } */\n+  /* { dg-final { scan-assembler \"vmla.f64\" } } */\n   d1 = d2 * d3 + d1;\n   /* muldf3subdf_vfp */\n-  /* { dg-final { scan-assembler \"fmscd\" } } */\n+  /* { dg-final { scan-assembler \"vnmls.f64\" } } */\n   d1 = d2 * d3 - d1;\n   /* muldf3negdfadddf_vfp */\n-  /* { dg-final { scan-assembler \"fnmacd\" } } */\n+  /* { dg-final { scan-assembler \"vmls.f64\" } } */\n   d1 = d2 - d3 * d1;\n   /* muldf3negdfsubdf_vfp */\n-  /* { dg-final { scan-assembler \"fnmscd\" } } */\n+  /* { dg-final { scan-assembler \"vnmla.f64\" } } */\n   d1 = -d2 * d3 - d1;\n   /* sqrtdf2_vfp */\n   /* { dg-final { scan-assembler \"fsqrtd\" } } */"}]}