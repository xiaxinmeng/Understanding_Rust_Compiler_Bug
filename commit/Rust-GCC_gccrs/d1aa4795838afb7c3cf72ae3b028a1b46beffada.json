{"sha": "d1aa4795838afb7c3cf72ae3b028a1b46beffada", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFhYTQ3OTU4MzhhZmI3YzNjZjcyYWUzYjAyOGExYjQ2YmVmZmFkYQ==", "commit": {"author": {"name": "Guilhem Lavaux", "email": "guilhem@kaffe.org", "date": "2003-10-02T19:29:31Z"}, "committer": {"name": "Michael Koch", "email": "mkoch@gcc.gnu.org", "date": "2003-10-02T19:29:31Z"}, "message": "2003-10-02  Guilhem Lavaux  <guilhem@kaffe.org>\n\n\t* java/net/InetSocketAddress.java\n\t(InetSocketAddress): Made exception more clear.\n\t(equals): Handle case when addr is null.\n\t(toString): Likewise.\n\t* java/net/NetworkInterface.java\n\t(static): Load native library.\n\t(getNetworkInterfaces): Rewritten.\n\nFrom-SVN: r72047", "tree": {"sha": "d51e251f25711621421f1103be493176e4e06337", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d51e251f25711621421f1103be493176e4e06337"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1aa4795838afb7c3cf72ae3b028a1b46beffada", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1aa4795838afb7c3cf72ae3b028a1b46beffada", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1aa4795838afb7c3cf72ae3b028a1b46beffada", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1aa4795838afb7c3cf72ae3b028a1b46beffada/comments", "author": null, "committer": null, "parents": [{"sha": "bca48dc625ffcb7778a73b42adfe9071800a9e43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bca48dc625ffcb7778a73b42adfe9071800a9e43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bca48dc625ffcb7778a73b42adfe9071800a9e43"}], "stats": {"total": 51, "additions": 38, "deletions": 13}, "files": [{"sha": "ce16a0a2029ede583b9d1d0c4baafb6754227e36", "filename": "libjava/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1aa4795838afb7c3cf72ae3b028a1b46beffada/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1aa4795838afb7c3cf72ae3b028a1b46beffada/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=d1aa4795838afb7c3cf72ae3b028a1b46beffada", "patch": "@@ -1,3 +1,13 @@\n+2003-10-02  Guilhem Lavaux  <guilhem@kaffe.org>\n+\n+\t* java/net/InetSocketAddress.java\n+\t(InetSocketAddress): Made exception more clear.\n+\t(equals): Handle case when addr is null.\n+\t(toString): Likewise.\n+\t* java/net/NetworkInterface.java\n+\t(static): Load native library.\n+\t(getNetworkInterfaces): Rewritten.\n+\n 2003-10-02  Thomas Fitzsimmons  <fitzsim@redhat.com>\n \n \t* gnu/java/awt/peer/gtk/GtkComponentPeer.java (insets): New"}, {"sha": "3f6eb09456bf0155a9602407c7e51770a701342b", "filename": "libjava/java/net/InetSocketAddress.java", "status": "modified", "additions": 15, "deletions": 7, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1aa4795838afb7c3cf72ae3b028a1b46beffada/libjava%2Fjava%2Fnet%2FInetSocketAddress.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1aa4795838afb7c3cf72ae3b028a1b46beffada/libjava%2Fjava%2Fnet%2FInetSocketAddress.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FInetSocketAddress.java?ref=d1aa4795838afb7c3cf72ae3b028a1b46beffada", "patch": "@@ -68,7 +68,7 @@ public InetSocketAddress(InetAddress addr, int port)\n     throws IllegalArgumentException\n   {\n     if (port < 0 || port > 65535)\n-      throw new IllegalArgumentException();\n+      throw new IllegalArgumentException (\"Bad port number: \" + port);\n \n     if (addr == null)\n       addr = InetAddress.ANY_IF;\n@@ -102,9 +102,11 @@ public InetSocketAddress(int port)\n   public InetSocketAddress(String hostname, int port)\n     throws IllegalArgumentException\n   {\n-    if (port < 0 || port > 65535\n-\t|| hostname == null)\n-      throw new IllegalArgumentException();\n+    if (hostname == null)\n+      throw new IllegalArgumentException (\"Null host name value\");\n+    \n+    if (port < 0 || port > 65535)\n+      throw new IllegalArgumentException (\"Bad port number: \" + port);\n \n     this.port = port;\n     this.hostname = hostname;\n@@ -130,8 +132,14 @@ public final boolean equals (Object obj)\n \n     if (obj instanceof InetSocketAddress)\n       {\n-        InetSocketAddress a = (InetSocketAddress) obj;\n-        return addr.equals(a.addr) && a.port == port;\n+        InetSocketAddress sa = (InetSocketAddress) obj;\n+\t\n+        if (addr == null && sa.addr != null)\n+          return false;\n+        else if (addr == null && sa.addr == null)\n+          return hostname.equals (sa.hostname) && sa.port == port;\n+        else\n+          return addr.equals (sa.addr) && sa.port == port;\n       }\n     \n     return false;\n@@ -183,6 +191,6 @@ public final boolean isUnresolved()\n    */\n   public String toString()\n   {\n-    return addr + \":\" + port;\n+    return (addr == null ? hostname : addr.getHostName()) + \":\" + port;\n   }\n }"}, {"sha": "f6d37489836460624652f07cf263f0ca22c21370", "filename": "libjava/java/net/NetworkInterface.java", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1aa4795838afb7c3cf72ae3b028a1b46beffada/libjava%2Fjava%2Fnet%2FNetworkInterface.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1aa4795838afb7c3cf72ae3b028a1b46beffada/libjava%2Fjava%2Fnet%2FNetworkInterface.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FNetworkInterface.java?ref=d1aa4795838afb7c3cf72ae3b028a1b46beffada", "patch": "@@ -37,6 +37,7 @@\n \n package java.net;\n \n+import gnu.classpath.Configuration;\n import java.util.Enumeration;\n import java.util.Vector;\n \n@@ -52,6 +53,14 @@\n  */\n public final class NetworkInterface\n {\n+  static\n+  {\n+    if (Configuration.INIT_LOAD_LIBRARY)\n+      {\n+\tSystem.loadLibrary (\"javanet\");\n+      }\n+  }\n+\n   private String name;\n   \n   private Vector inetAddresses;\n@@ -185,14 +194,12 @@ public static NetworkInterface getByInetAddress (InetAddress addr)\n   public static Enumeration getNetworkInterfaces ()\n     throws SocketException\n   {\n-    Vector networkInterfaces = getRealNetworkInterfaces ();\n-\n-    Enumeration tmp = networkInterfaces.elements ();\n+    Vector networkInterfaces = getRealNetworkInterfaces();\n \n-    if (tmp.hasMoreElements ())\n-      return tmp;\n+    if (networkInterfaces.isEmpty())\n+      return null;\n \n-    return null;\n+    return networkInterfaces.elements();\n   }\n \n   /**"}]}