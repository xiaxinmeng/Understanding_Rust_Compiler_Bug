{"sha": "131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTMxYzlhZmZiZGU2ZWQ2OGQyYzQyYTBiZWE4ODM5ZTFiYThhOWY3ZQ==", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2021-05-19T10:05:31Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2021-07-07T16:23:13Z"}, "message": "[Ada] Replace low-level membership tests with Is_Private_Type\n\ngcc/ada/\n\n\t* exp_ch3.adb, exp_ch6.adb, sem_ch6.adb: Replace Ekind\n\tmembership test in Private_Kind with a call to Is_Private_Type.", "tree": {"sha": "99d3d7c60cdb771a20a2d313d7e3e843cea10e95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/99d3d7c60cdb771a20a2d313d7e3e843cea10e95"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "19456797d1d0aa059b9892698f0f979fa29d824c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19456797d1d0aa059b9892698f0f979fa29d824c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19456797d1d0aa059b9892698f0f979fa29d824c"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "ad82e568609720610de25e538e441a8b7081bb12", "filename": "gcc/ada/exp_ch3.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e/gcc%2Fada%2Fexp_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e/gcc%2Fada%2Fexp_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch3.adb?ref=131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e", "patch": "@@ -6000,7 +6000,7 @@ package body Exp_Ch3 is\n       --  The parent type is private then we need to inherit any TSS operations\n       --  from the full view.\n \n-      if Ekind (Par_Id) in Private_Kind\n+      if Is_Private_Type (Par_Id)\n         and then Present (Full_View (Par_Id))\n       then\n          Par_Id := Base_Type (Full_View (Par_Id));\n@@ -6036,7 +6036,7 @@ package body Exp_Ch3 is\n             --  If the derived type itself is private with a full view, then\n             --  associate the full view with the inherited TSS_Elist as well.\n \n-            if Ekind (B_Id) in Private_Kind\n+            if Is_Private_Type (B_Id)\n               and then Present (Full_View (B_Id))\n             then\n                Ensure_Freeze_Node (Base_Type (Full_View (B_Id)));"}, {"sha": "dbae760667187744592d2cf9fdb9f24792c02e7d", "filename": "gcc/ada/exp_ch6.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e/gcc%2Fada%2Fexp_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e/gcc%2Fada%2Fexp_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch6.adb?ref=131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e", "patch": "@@ -3761,7 +3761,7 @@ package body Exp_Ch6 is\n          --  because the object has underlying discriminants with defaults.\n \n          if Present (Extra_Constrained (Formal)) then\n-            if Ekind (Etype (Prev)) in Private_Kind\n+            if Is_Private_Type (Etype (Prev))\n               and then not Has_Discriminants (Base_Type (Etype (Prev)))\n             then\n                Add_Extra_Actual"}, {"sha": "b0db7fe0939f7ea11ac729d9813cb6fa489e3f60", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=131c9affbde6ed68d2c42a0bea8839e1ba8a9f7e", "patch": "@@ -8901,7 +8901,7 @@ package body Sem_Ch6 is\n             end if;\n \n             if not Has_Discriminants (Formal_Type)\n-              and then Ekind (Formal_Type) in Private_Kind\n+              and then Is_Private_Type (Formal_Type)\n               and then Present (Underlying_Type (Formal_Type))\n             then\n                Formal_Type := Underlying_Type (Formal_Type);\n@@ -11253,7 +11253,7 @@ package body Sem_Ch6 is\n             --  If the entity is a private type, then it must be declared in a\n             --  visible part.\n \n-            if Ekind (T) in Private_Kind then\n+            if Is_Private_Type (T) then\n                return True;\n \n             elsif Is_Type (T) and then Has_Private_Declaration (T) then"}]}