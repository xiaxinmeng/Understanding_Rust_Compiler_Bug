{"sha": "94a198aa8e1912693dd8999d298865db6d4971ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTRhMTk4YWE4ZTE5MTI2OTNkZDg5OTlkMjk4ODY1ZGI2ZDQ5NzFjZQ==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2007-06-06T10:49:42Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-06-06T10:49:42Z"}, "message": "stylesw.ads, [...] (Set_GNAT_Style_Check): New procedure\n\n2007-04-20  Robert Dewar  <dewar@adacore.com>\n\n\t* stylesw.ads, stylesw.adb (Set_GNAT_Style_Check): New procedure\n\t(Set_Style_Check_Options): Recognize new -gnatyg style switch\n\n\t* switch-c.adb (Scan_Front_End_Switches, case -gnatg): Set\n\tWarn_On_Non_Local_Exception to False, to turn off warnings for\n\tNo_Exception_Propagation in ZFP runtime.\n\t(Scan_Front_End_Switches): Fix handling of --RTS switch for non GCC\n\tback-ends.\n\t(Scan_Front_End_Switches): For 'g', call Set_GNAT_Style_Checks\n\nFrom-SVN: r125469", "tree": {"sha": "c2ec4cdeaf3fc8092e453c3306491d7cc670b4e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2ec4cdeaf3fc8092e453c3306491d7cc670b4e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/94a198aa8e1912693dd8999d298865db6d4971ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94a198aa8e1912693dd8999d298865db6d4971ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94a198aa8e1912693dd8999d298865db6d4971ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94a198aa8e1912693dd8999d298865db6d4971ce/comments", "author": null, "committer": null, "parents": [{"sha": "c2a49ce6276acab7961cc99b9692f77181721ecd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2a49ce6276acab7961cc99b9692f77181721ecd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2a49ce6276acab7961cc99b9692f77181721ecd"}], "stats": {"total": 43, "additions": 31, "deletions": 12}, "files": [{"sha": "08a2ef7e3fb20947c6a98cfb515b42e77bf42996", "filename": "gcc/ada/stylesw.adb", "status": "modified", "additions": 16, "deletions": 3, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94a198aa8e1912693dd8999d298865db6d4971ce/gcc%2Fada%2Fstylesw.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94a198aa8e1912693dd8999d298865db6d4971ce/gcc%2Fada%2Fstylesw.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fstylesw.adb?ref=94a198aa8e1912693dd8999d298865db6d4971ce", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -160,6 +160,16 @@ package body Stylesw is\n       Set_Style_Check_Options (\"3aAbcefhiklmnprst\");\n    end Set_Default_Style_Check_Options;\n \n+   ----------------------------------\n+   -- Set_GNAT_Style_Check_Options --\n+   ----------------------------------\n+\n+   procedure Set_GNAT_Style_Check_Options is\n+   begin\n+      Reset_Style_Check_Options;\n+      Set_Style_Check_Options (\"3aAbcdefhiklmnprstux\");\n+   end Set_GNAT_Style_Check_Options;\n+\n    -----------------------------\n    -- Set_Style_Check_Options --\n    -----------------------------\n@@ -250,6 +260,9 @@ package body Stylesw is\n             when 'f' =>\n                Style_Check_Form_Feeds            := True;\n \n+            when 'g' =>\n+               Set_GNAT_Style_Check_Options;\n+\n             when 'h' =>\n                Style_Check_Horizontal_Tabs       := True;\n \n@@ -360,8 +373,8 @@ package body Stylesw is\n \n             when others =>\n                Err_Col := Err_Col - 1;\n-               Style_Msg_Buf (1 .. 21) := \"invalid style switch:\";\n-               Style_Msg_Len := 22;\n+               Style_Msg_Buf (1 .. 22) := \"invalid style switch: \";\n+               Style_Msg_Len := 23;\n                Style_Msg_Buf (Style_Msg_Len) := C;\n                OK := False;\n                return;"}, {"sha": "284b59dd1b8d634f27ea50d001d37a906536bd8a", "filename": "gcc/ada/stylesw.ads", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94a198aa8e1912693dd8999d298865db6d4971ce/gcc%2Fada%2Fstylesw.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94a198aa8e1912693dd8999d298865db6d4971ce/gcc%2Fada%2Fstylesw.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fstylesw.ads?ref=94a198aa8e1912693dd8999d298865db6d4971ce", "patch": "@@ -264,6 +264,10 @@ package Stylesw is\n    --  This procedure is called to set the default style checking options\n    --  in response to a -gnaty switch with no suboptions.\n \n+   procedure Set_GNAT_Style_Check_Options;\n+   --  This procedure is called to set the default style checking options\n+   --  for GNAT units (as set by -gnatg or -gnatyg).\n+\n    Style_Msg_Buf : String (1 .. 80);\n    Style_Msg_Len : Natural;\n    --  Used to return"}, {"sha": "57fd313f4ea3fd26cd808989cd5f4fda7caa7d12", "filename": "gcc/ada/switch-c.adb", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94a198aa8e1912693dd8999d298865db6d4971ce/gcc%2Fada%2Fswitch-c.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94a198aa8e1912693dd8999d298865db6d4971ce/gcc%2Fada%2Fswitch-c.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch-c.adb?ref=94a198aa8e1912693dd8999d298865db6d4971ce", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -33,7 +33,7 @@ with Validsw;  use Validsw;\n with Sem_Warn; use Sem_Warn;\n with Stylesw;  use Stylesw;\n \n-with GNAT.OS_Lib; use GNAT.OS_Lib;\n+with System.OS_Lib; use System.OS_Lib;\n \n with System.WCh_Con; use System.WCh_Con;\n \n@@ -110,11 +110,13 @@ package body Switch.C is\n                Add_Src_Search_Dir (Switch_Chars (Ptr .. Max));\n             end if;\n \n-         --  Processing of the --RTS switch. --RTS has been modified by\n-         --  gcc and is now of the form -fRTS.\n+         --  Processing of the --RTS switch. --RTS may have been modified by\n+         --  gcc into -fRTS (for GCC targets).\n \n          elsif Ptr + 3 <= Max\n-           and then Switch_Chars (Ptr .. Ptr + 3) = \"fRTS\"\n+           and then (Switch_Chars (Ptr .. Ptr + 3) = \"fRTS\"\n+                       or else\n+                     Switch_Chars (Ptr .. Ptr + 3) = \"-RTS\")\n          then\n             Ptr := Ptr + 1;\n \n@@ -127,8 +129,7 @@ package body Switch.C is\n                --  it is not the first time, the same path has been specified.\n \n                if RTS_Specified = null then\n-                  RTS_Specified :=\n-                    new String'(Switch_Chars (Ptr + 4 .. Max));\n+                  RTS_Specified := new String'(Switch_Chars (Ptr + 4 .. Max));\n \n                elsif\n                  RTS_Specified.all /= Switch_Chars (Ptr + 4 .. Max)\n@@ -469,7 +470,7 @@ package body Switch.C is\n                Ada_Version := Ada_05;\n                Ada_Version_Explicit := Ada_Version;\n \n-               --  Set default warnings for -gnatg (same set as -gnatwa)\n+               --  Set default warnings for -gnatg\n \n                Check_Unreferenced           := True;\n                Check_Unreferenced_Formals   := True;\n@@ -483,12 +484,13 @@ package body Switch.C is\n                Warn_On_Export_Import        := True;\n                Warn_On_Modified_Unread      := True;\n                Warn_On_No_Value_Assigned    := True;\n+               Warn_On_Non_Local_Exception  := False;\n                Warn_On_Obsolescent_Feature  := True;\n                Warn_On_Redundant_Constructs := True;\n                Warn_On_Unchecked_Conversion := True;\n                Warn_On_Unrecognized_Pragma  := True;\n \n-               Set_Style_Check_Options (\"3aAbcdefhiklmnprstux\");\n+               Set_GNAT_Style_Check_Options;\n \n             --  Processing for G switch\n "}]}