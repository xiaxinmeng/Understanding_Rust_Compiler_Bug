{"sha": "966a140df68bf3e2d378fb9b68a8afb7d80b34d6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTY2YTE0MGRmNjhiZjNlMmQzNzhmYjliNjhhOGFmYjdkODBiMzRkNg==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2018-02-12T18:32:18Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2018-02-12T18:32:18Z"}, "message": "cse.c (try_back_substitute_reg): Move any REG_ARGS_SIZE note when successfully back substituting a reg.\n\n\t* cse.c (try_back_substitute_reg): Move any REG_ARGS_SIZE note when\n\tsuccessfully back substituting a reg.\n\n\t* gcc.c-torture/compile/reg-args-size.c: New test.\n\nFrom-SVN: r257598", "tree": {"sha": "e89189e2c2395ff1659a47d1c39d4c44e3aea9be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e89189e2c2395ff1659a47d1c39d4c44e3aea9be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/966a140df68bf3e2d378fb9b68a8afb7d80b34d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/966a140df68bf3e2d378fb9b68a8afb7d80b34d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/966a140df68bf3e2d378fb9b68a8afb7d80b34d6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/966a140df68bf3e2d378fb9b68a8afb7d80b34d6/comments", "author": null, "committer": null, "parents": [{"sha": "fa2faaa80708b671806849a40bcabff3eb5a1a1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa2faaa80708b671806849a40bcabff3eb5a1a1e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa2faaa80708b671806849a40bcabff3eb5a1a1e"}], "stats": {"total": 54, "additions": 54, "deletions": 0}, "files": [{"sha": "d5913d0a7db58324d714fc24f7f8e7485283f4f4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/966a140df68bf3e2d378fb9b68a8afb7d80b34d6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/966a140df68bf3e2d378fb9b68a8afb7d80b34d6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=966a140df68bf3e2d378fb9b68a8afb7d80b34d6", "patch": "@@ -1,3 +1,8 @@\n+2018-02-12  Jeff Law  <law@redhat.com>\n+\n+\t* cse.c (try_back_substitute_reg): Move any REG_ARGS_SIZE note when\n+\tsuccessfully back substituting a reg.\n+\n 2018-02-12  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/84037"}, {"sha": "a73a771041a71460cb1728c2b7037cff606e3d01", "filename": "gcc/cse.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/966a140df68bf3e2d378fb9b68a8afb7d80b34d6/gcc%2Fcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/966a140df68bf3e2d378fb9b68a8afb7d80b34d6/gcc%2Fcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcse.c?ref=966a140df68bf3e2d378fb9b68a8afb7d80b34d6", "patch": "@@ -4256,6 +4256,15 @@ try_back_substitute_reg (rtx set, rtx_insn *insn)\n \t\t  && (reg_mentioned_p (dest, XEXP (note, 0))\n \t\t      || rtx_equal_p (src, XEXP (note, 0))))\n \t\tremove_note (insn, note);\n+\n+\t      /* If INSN has a REG_ARGS_SIZE note, move it to PREV.  */\n+\t      note = find_reg_note (insn, REG_ARGS_SIZE, NULL_RTX);\n+\t      if (note != 0)\n+\t\t{\n+\t\t  remove_note (insn, note);\n+\t\t  gcc_assert (!find_reg_note (prev, REG_ARGS_SIZE, NULL_RTX));\n+\t\t  set_unique_reg_note (prev, REG_ARGS_SIZE, XEXP (note, 0));\n+\t\t}\n \t    }\n \t}\n     }"}, {"sha": "8f22a65c7bb7b098b18a58d83fb266f69216fc84", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/966a140df68bf3e2d378fb9b68a8afb7d80b34d6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/966a140df68bf3e2d378fb9b68a8afb7d80b34d6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=966a140df68bf3e2d378fb9b68a8afb7d80b34d6", "patch": "@@ -1,3 +1,7 @@\n+2018-02-12  Jeff Law  <law@redhat.com>\n+\n+\t* gcc.c-torture/compile/reg-args-size.c: New test.\n+\n 2018-02-12  Carl Love  <cel@us.ibm.com>\n \n \t* gcc.target/powerpc/builtins-4-runnable.c (main): Move int128 and"}, {"sha": "0ca0b9f034b2e7e177c3fafb09f719d58a77bf41", "filename": "gcc/testsuite/gcc.c-torture/compile/regs-arg-size.c", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/966a140df68bf3e2d378fb9b68a8afb7d80b34d6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fregs-arg-size.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/966a140df68bf3e2d378fb9b68a8afb7d80b34d6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fregs-arg-size.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fregs-arg-size.c?ref=966a140df68bf3e2d378fb9b68a8afb7d80b34d6", "patch": "@@ -0,0 +1,36 @@\n+int foo;\n+typedef long unsigned int size_t;\n+typedef short unsigned int wchar_t;\n+struct tm\n+{\n+  int tm_mday;\n+  int tm_mon;\n+  int tm_year;\n+};\n+size_t\n+__strftime (wchar_t * s, size_t maxsize, const wchar_t * format, const struct tm *tim_p)\n+{\n+  size_t count = 0;\n+  int len = 0;\n+  size_t i, ctloclen;\n+  unsigned long width;\n+  {\n+    if (foo)\n+      {\n+\t{\n+\t  wchar_t *fmt = L\"%s%.*d\";\n+\t  len = swprintf (&s[count], maxsize, fmt, \"-\", width, 0);\n+\t}\n+\tif ((count) >= maxsize)\n+\t  return 0;\n+      }\n+    else\n+      {\n+\tlen =\n+\t  swprintf (&s[count], maxsize - count, L\"%.2d/%.2d/%.2d\", 42, 99, 0);\n+\tif ((count) >= maxsize)\n+\t  return 0;\n+\n+      }\n+  }\n+}"}]}