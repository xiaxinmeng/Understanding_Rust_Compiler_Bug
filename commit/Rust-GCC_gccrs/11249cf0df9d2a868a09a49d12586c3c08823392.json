{"sha": "11249cf0df9d2a868a09a49d12586c3c08823392", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTEyNDljZjBkZjlkMmE4NjhhMDlhNDlkMTI1ODZjM2MwODgyMzM5Mg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-04-09T16:05:47Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-04-09T16:05:47Z"}, "message": "decl.c (make_typename_type): Complain if we don't find a type when trying to make a typename type for a...\n\n\t* decl.c (make_typename_type): Complain if we don't find a type\n\twhen trying to make a typename type for a non-template type.\n\nFrom-SVN: r26317", "tree": {"sha": "c67c2500bcdadcacde0c09a6727dffd0b3a1b068", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c67c2500bcdadcacde0c09a6727dffd0b3a1b068"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/11249cf0df9d2a868a09a49d12586c3c08823392", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11249cf0df9d2a868a09a49d12586c3c08823392", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11249cf0df9d2a868a09a49d12586c3c08823392", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11249cf0df9d2a868a09a49d12586c3c08823392/comments", "author": null, "committer": null, "parents": [{"sha": "92c7ee702fc7b9e239a412325621e88c6cbd23f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92c7ee702fc7b9e239a412325621e88c6cbd23f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92c7ee702fc7b9e239a412325621e88c6cbd23f1"}], "stats": {"total": 49, "additions": 49, "deletions": 0}, "files": [{"sha": "6c64951ac7f140c9f452f52d43685361fbea691b", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11249cf0df9d2a868a09a49d12586c3c08823392/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11249cf0df9d2a868a09a49d12586c3c08823392/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=11249cf0df9d2a868a09a49d12586c3c08823392", "patch": "@@ -1,3 +1,8 @@\n+1999-04-09  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* decl.c (make_typename_type): Complain if we don't find a type\n+\twhen trying to make a typename type for a non-template type.\n+\t\n 1999-04-09  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* decl.c (start_decl): Pass attributes to grokdeclarator."}, {"sha": "1ee61fc7c530cbcbeeadbf0779816650df8c3dd0", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11249cf0df9d2a868a09a49d12586c3c08823392/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11249cf0df9d2a868a09a49d12586c3c08823392/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=11249cf0df9d2a868a09a49d12586c3c08823392", "patch": "@@ -5373,6 +5373,15 @@ make_typename_type (context, name)\n \t    return TREE_TYPE (t);\n \t}\n     }\n+\n+  /* If the CONTEXT is not a template type, then either the field is\n+     there now or its never going to be.  */\n+  if (!uses_template_parms (context) && !t)\n+    {\n+      cp_error (\"no type named `%#T' in `%#T'\", name, context);\n+      return error_mark_node;\n+    }\n+    \n   \n   return build_typename_type (context, name, fullname,  NULL_TREE);\n }"}, {"sha": "b5281c32b6121195f5e1baaf66ebd55d0edbed20", "filename": "gcc/testsuite/g++.old-deja/g++.pt/crash36.C", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11249cf0df9d2a868a09a49d12586c3c08823392/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash36.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11249cf0df9d2a868a09a49d12586c3c08823392/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash36.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash36.C?ref=11249cf0df9d2a868a09a49d12586c3c08823392", "patch": "@@ -0,0 +1,35 @@\n+// Build don't link:\n+// Origin: Andreas Kloeckner <ak@ixion.net>\n+\n+template<class Iterator> struct iterator_traits {\n+  typedef typename Iterator::iterator_category \n+  iterator_category; // ERROR - no type iterator_category\n+};\n+\n+template<class Category>\n+struct iterator {\n+  typedef Category  iterator_category;\n+};\n+\n+\n+template <class Iterator>\n+struct reverse_iterator : public\n+iterator<typename iterator_traits<Iterator>::iterator_category> {\n+  protected:\n+  Iterator current;\n+  \n+};\n+class tag { };\n+\n+template <class T>\n+struct list {\n+  template <class Item>\n+  struct list_iterator {\n+  };\n+  \n+  reverse_iterator<list_iterator<T> > rbegin()\n+    { return reverse_iterator<list_iterator<T> > // ERROR - no type\n+\t(list_iterator<T>(Head->next())); } // ERROR - instantiated here\n+};\n+\n+template class list<int>; // ERROR - instantiated from here"}]}