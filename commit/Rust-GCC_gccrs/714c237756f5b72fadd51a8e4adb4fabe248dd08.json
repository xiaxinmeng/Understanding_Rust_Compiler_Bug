{"sha": "714c237756f5b72fadd51a8e4adb4fabe248dd08", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE0YzIzNzc1NmY1YjcyZmFkZDUxYThlNGFkYjRmYWJlMjQ4ZGQwOA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2016-09-16T21:39:05Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2016-09-16T21:39:05Z"}, "message": "recog.c (rest_of_handle_split_after_reload): Delete.\n\n\t* recog.c (rest_of_handle_split_after_reload): Delete.\n\t(pass_split_after_reload::gate): New method.\n\t(pass_split_after_reload::execute): Call split_all_insns directly.\n\nFrom-SVN: r240203", "tree": {"sha": "1b43fbcf8ff6dcb6c44299d0cc60422c3246fc29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b43fbcf8ff6dcb6c44299d0cc60422c3246fc29"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/714c237756f5b72fadd51a8e4adb4fabe248dd08", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/714c237756f5b72fadd51a8e4adb4fabe248dd08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/714c237756f5b72fadd51a8e4adb4fabe248dd08", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/714c237756f5b72fadd51a8e4adb4fabe248dd08/comments", "author": null, "committer": null, "parents": [{"sha": "6e395fcb44dafbdbae218d396f32693b886d212a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e395fcb44dafbdbae218d396f32693b886d212a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e395fcb44dafbdbae218d396f32693b886d212a"}], "stats": {"total": 33, "additions": 21, "deletions": 12}, "files": [{"sha": "daa2619b95b5c24741824fbeb16a9c0f68f563c8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/714c237756f5b72fadd51a8e4adb4fabe248dd08/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/714c237756f5b72fadd51a8e4adb4fabe248dd08/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=714c237756f5b72fadd51a8e4adb4fabe248dd08", "patch": "@@ -1,3 +1,9 @@\n+2016-09-16  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* recog.c (rest_of_handle_split_after_reload): Delete.\n+\t(pass_split_after_reload::gate): New method.\n+\t(pass_split_after_reload::execute): Call split_all_insns directly.\n+\n 2016-09-16  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* doc/extend.texi (Integer Overflow Builtins): Fix type of out"}, {"sha": "6a95d7f9402dd8055cad01e5553d21b2bd307705", "filename": "gcc/recog.c", "status": "modified", "additions": 15, "deletions": 12, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/714c237756f5b72fadd51a8e4adb4fabe248dd08/gcc%2Frecog.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/714c237756f5b72fadd51a8e4adb4fabe248dd08/gcc%2Frecog.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frecog.c?ref=714c237756f5b72fadd51a8e4adb4fabe248dd08", "patch": "@@ -3901,17 +3901,6 @@ make_pass_split_all_insns (gcc::context *ctxt)\n   return new pass_split_all_insns (ctxt);\n }\n \n-static unsigned int\n-rest_of_handle_split_after_reload (void)\n-{\n-  /* If optimizing, then go ahead and split insns now.  */\n-#ifndef STACK_REGS\n-  if (optimize > 0)\n-#endif\n-    split_all_insns ();\n-  return 0;\n-}\n-\n namespace {\n \n const pass_data pass_data_split_after_reload =\n@@ -3935,9 +3924,23 @@ class pass_split_after_reload : public rtl_opt_pass\n   {}\n \n   /* opt_pass methods: */\n+  virtual bool gate (function *)\n+    {\n+      /* If optimizing, then go ahead and split insns now.  */\n+      if (optimize > 0)\n+\treturn true;\n+\n+#ifdef STACK_REGS\n+      return true;\n+#else\n+      return false;\n+#endif\n+    }\n+\n   virtual unsigned int execute (function *)\n     {\n-      return rest_of_handle_split_after_reload ();\n+      split_all_insns ();\n+      return 0;\n     }\n \n }; // class pass_split_after_reload"}]}