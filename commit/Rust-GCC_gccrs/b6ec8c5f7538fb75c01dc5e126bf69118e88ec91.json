{"sha": "b6ec8c5f7538fb75c01dc5e126bf69118e88ec91", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjZlYzhjNWY3NTM4ZmI3NWMwMWRjNWUxMjZiZjY5MTE4ZTg4ZWM5MQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-12-21T17:50:57Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-12-21T17:50:57Z"}, "message": "(expand_expr_stmt): If want values for statements, convert function to\naddress-of-function.\n\nFrom-SVN: r8679", "tree": {"sha": "99f84544d0e3578340d98d6050d1a1fb5b80ddeb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/99f84544d0e3578340d98d6050d1a1fb5b80ddeb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b6ec8c5f7538fb75c01dc5e126bf69118e88ec91", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6ec8c5f7538fb75c01dc5e126bf69118e88ec91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b6ec8c5f7538fb75c01dc5e126bf69118e88ec91", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6ec8c5f7538fb75c01dc5e126bf69118e88ec91/comments", "author": null, "committer": null, "parents": [{"sha": "e24b00c81a1fe3e5031393e337b679aec706432c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e24b00c81a1fe3e5031393e337b679aec706432c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e24b00c81a1fe3e5031393e337b679aec706432c"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "4d3ed87e4f0a820ffb023dc23dddf35db0f666ee", "filename": "gcc/stmt.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b6ec8c5f7538fb75c01dc5e126bf69118e88ec91/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b6ec8c5f7538fb75c01dc5e126bf69118e88ec91/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=b6ec8c5f7538fb75c01dc5e126bf69118e88ec91", "patch": "@@ -1621,6 +1621,12 @@ expand_expr_stmt (exp)\n       else if (warn_unused)\n \twarn_if_unused_value (exp);\n     }\n+\n+  /* If EXP is of function type and we are expanding statements for\n+     value, convert it to pointer-to-function.  */\n+  if (expr_stmts_for_value && TREE_CODE (TREE_TYPE (exp)) == FUNCTION_TYPE)\n+    exp = build1 (ADDR_EXPR, build_pointer_type (TREE_TYPE (exp)), exp);\n+\n   last_expr_type = TREE_TYPE (exp);\n   if (! flag_syntax_only)\n     last_expr_value = expand_expr (exp,"}]}