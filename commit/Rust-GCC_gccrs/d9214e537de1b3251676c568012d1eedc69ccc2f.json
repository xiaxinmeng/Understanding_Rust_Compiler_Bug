{"sha": "d9214e537de1b3251676c568012d1eedc69ccc2f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDkyMTRlNTM3ZGUxYjMyNTE2NzZjNTY4MDEyZDFlZWRjNjljY2MyZg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-05-20T20:03:15Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-05-20T20:03:15Z"}, "message": "sched-deps.c (sched_analyze_insn): Force volatile memory reads to be output before a branch.\n\n        * sched-deps.c (sched_analyze_insn): Force volatile memory reads\n        to be output before a branch.\n\nFrom-SVN: r42358", "tree": {"sha": "ef588464921b3bbf64f226e7bea4390a4d198e50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ef588464921b3bbf64f226e7bea4390a4d198e50"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9214e537de1b3251676c568012d1eedc69ccc2f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9214e537de1b3251676c568012d1eedc69ccc2f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9214e537de1b3251676c568012d1eedc69ccc2f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9214e537de1b3251676c568012d1eedc69ccc2f/comments", "author": null, "committer": null, "parents": [{"sha": "b161c5059b749a24d085a924260b7fe0a8cc9ee9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b161c5059b749a24d085a924260b7fe0a8cc9ee9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b161c5059b749a24d085a924260b7fe0a8cc9ee9"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "1ed2011415b429e74d1478a24217657bcf2a7d98", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9214e537de1b3251676c568012d1eedc69ccc2f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9214e537de1b3251676c568012d1eedc69ccc2f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d9214e537de1b3251676c568012d1eedc69ccc2f", "patch": "@@ -1,3 +1,8 @@\n+2001-05-20  Richard Henderson  <rth@redhat.com>\n+\n+\t* sched-deps.c (sched_analyze_insn): Force volatile memory reads\n+\tto be output before a branch.\n+\n 2001-05-20  Richard Henderson  <rth@redhat.com>\n \n \t* Makefile.in (dwarf2asm.o): Depend on $(TREE_H)."}, {"sha": "d303e7a86df9a00a9186e08703fb2acc8c8bb8bc", "filename": "gcc/sched-deps.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9214e537de1b3251676c568012d1eedc69ccc2f/gcc%2Fsched-deps.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9214e537de1b3251676c568012d1eedc69ccc2f/gcc%2Fsched-deps.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched-deps.c?ref=d9214e537de1b3251676c568012d1eedc69ccc2f", "patch": "@@ -1044,12 +1044,25 @@ sched_analyze_insn (deps, x, insn, loop_notes)\n \n \t  CLEAR_REG_SET (&tmp);\n \n+\t  /* All memory writes and volatile reads must happen before the\n+\t     jump.  Non-volatile reads must happen before the jump iff\n+\t     the result is needed by the above register used mask.  */\n+\n \t  pending = deps->pending_write_insns;\n \t  pending_mem = deps->pending_write_mems;\n \t  while (pending)\n \t    {\n \t      add_dependence (insn, XEXP (pending, 0), REG_DEP_OUTPUT);\n+\t      pending = XEXP (pending, 1);\n+\t      pending_mem = XEXP (pending_mem, 1);\n+\t    }\n \n+\t  pending = deps->pending_read_insns;\n+\t  pending_mem = deps->pending_read_mems;\n+\t  while (pending)\n+\t    {\n+\t      if (MEM_VOLATILE_P (XEXP (pending_mem, 0)))\n+\t\tadd_dependence (insn, XEXP (pending, 0), REG_DEP_OUTPUT);\n \t      pending = XEXP (pending, 1);\n \t      pending_mem = XEXP (pending_mem, 1);\n \t    }"}]}