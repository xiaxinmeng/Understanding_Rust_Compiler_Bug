{"sha": "917dd9bf1ed64884ca58a5496349d8a61be8e510", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTE3ZGQ5YmYxZWQ2NDg4NGNhNThhNTQ5NjM0OWQ4YTYxYmU4ZTUxMA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-07-12T09:35:00Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-07-12T09:35:00Z"}, "message": "lto.c (read_cgraph_and_symbols): Do not push DECL_INIT_IO timevar\n\n\n\t* lto.c (read_cgraph_and_symbols): Do not push DECL_INIT_IO\n\ttimevar\n\t(materialize_cgraph): Do not push GIMPLE_IN timevar.\n\n\t* timevar.def (TV_IPA_LTO_DECL_INIT_IO): Remove.\n\t(TV_IPA_LTO_CTORS_IN, TV_IPA_LTO_CTORS_OUT): New timevar.\n\t* cgraph.c (cgraph_get_body): Push GIMPLE_IN timevar.\n\t(varpool_get_constructor): Push CTORS_IN timevar.\n\t* lto-streamer-out.c (lto_output): Push TV_IPA_LTO_CTORS_OUT\n\ttimevar.\n\nFrom-SVN: r212479", "tree": {"sha": "31e81f54a4a391d2291ddfcd3672273db2494f18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/31e81f54a4a391d2291ddfcd3672273db2494f18"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/917dd9bf1ed64884ca58a5496349d8a61be8e510", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/917dd9bf1ed64884ca58a5496349d8a61be8e510", "html_url": "https://github.com/Rust-GCC/gccrs/commit/917dd9bf1ed64884ca58a5496349d8a61be8e510", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/917dd9bf1ed64884ca58a5496349d8a61be8e510/comments", "author": null, "committer": null, "parents": [{"sha": "e0770e2aced38ba70227383838166c522940db6e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0770e2aced38ba70227383838166c522940db6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0770e2aced38ba70227383838166c522940db6e"}], "stats": {"total": 35, "additions": 27, "deletions": 8}, "files": [{"sha": "4545ca26173b47e4dd8613664a8efba04da041d0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=917dd9bf1ed64884ca58a5496349d8a61be8e510", "patch": "@@ -1,3 +1,12 @@\n+2014-07-12  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* timevar.def (TV_IPA_LTO_DECL_INIT_IO): Remove.\n+\t(TV_IPA_LTO_CTORS_IN, TV_IPA_LTO_CTORS_OUT): New timevar.\n+\t* cgraph.c (cgraph_get_body): Push GIMPLE_IN timevar.\n+\t(varpool_get_constructor): Push CTORS_IN timevar.\n+\t* lto-streamer-out.c (lto_output): Push TV_IPA_LTO_CTORS_OUT\n+\ttimevar.\n+\n 2014-07-12  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386-builtin-types.def: Add USHORT_FTYPE_VOID."}, {"sha": "14e3b3dcdfd7e41f7177e63b9421c20d7a516633", "filename": "gcc/cgraph.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=917dd9bf1ed64884ca58a5496349d8a61be8e510", "patch": "@@ -3053,6 +3053,8 @@ cgraph_get_body (struct cgraph_node *node)\n \n   gcc_assert (in_lto_p);\n \n+  timevar_push (TV_IPA_LTO_GIMPLE_IN);\n+\n   file_data = node->lto_file_data;\n   name = IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (decl));\n \n@@ -3076,6 +3078,9 @@ cgraph_get_body (struct cgraph_node *node)\n   lto_free_section_data (file_data, LTO_section_function_body, name,\n \t\t\t data, len);\n   lto_free_function_in_decl_state_for_node (node);\n+\n+  timevar_pop (TV_IPA_LTO_GIMPLE_IN);\n+\n   return true;\n }\n "}, {"sha": "ccb85b615d9bc12711a5c4c2e05aa74fe9d4a103", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=917dd9bf1ed64884ca58a5496349d8a61be8e510", "patch": "@@ -2115,6 +2115,7 @@ lto_output (void)\n \t      && lto_symtab_encoder_encode_initializer_p (encoder, node)\n \t      && !node->alias)\n \t    {\n+\t      timevar_push (TV_IPA_LTO_CTORS_OUT);\n #ifdef ENABLE_CHECKING\n \t      gcc_assert (!bitmap_bit_p (output, DECL_UID (node->decl)));\n \t      bitmap_set_bit (output, DECL_UID (node->decl));\n@@ -2129,6 +2130,7 @@ lto_output (void)\n \t      gcc_assert (lto_get_out_decl_state () == decl_state);\n \t      lto_pop_out_decl_state ();\n \t      lto_record_function_out_decl_state (node->decl, decl_state);\n+\t      timevar_pop (TV_IPA_LTO_CTORS_OUT);\n \t    }\n \t}\n     }"}, {"sha": "194acba87c992754a814a6ef0fa25572836b761d", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=917dd9bf1ed64884ca58a5496349d8a61be8e510", "patch": "@@ -1,3 +1,9 @@\n+2014-07-12  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* lto.c (read_cgraph_and_symbols): Do not push DECL_INIT_IO\n+\ttimevar\n+\t(materialize_cgraph): Do not push GIMPLE_IN timevar.\n+\n 2014-07-11  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* lto-partition.c (add_references_to_partition): Use "}, {"sha": "dc30884d334a3550cca471147b333055ec3b1d6a", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=917dd9bf1ed64884ca58a5496349d8a61be8e510", "patch": "@@ -3094,12 +3094,9 @@ read_cgraph_and_symbols (unsigned nfiles, const char **fnames)\n \n   timevar_pop (TV_IPA_LTO_CGRAPH_MERGE);\n \n-  timevar_push (TV_IPA_LTO_DECL_INIT_IO);\n-\n   /* Indicate that the cgraph is built and ready.  */\n   cgraph_function_flags_ready = true;\n \n-  timevar_pop (TV_IPA_LTO_DECL_INIT_IO);\n   ggc_free (all_file_decl_data);\n   all_file_decl_data = NULL;\n }\n@@ -3117,9 +3114,6 @@ materialize_cgraph (void)\n     fprintf (stderr,\n \t     flag_wpa ? \"Materializing decls:\" : \"Reading function bodies:\");\n \n-  /* Now that we have input the cgraph, we need to clear all of the aux\n-     nodes and read the functions if we are not running in WPA mode.  */\n-  timevar_push (TV_IPA_LTO_GIMPLE_IN);\n \n   FOR_EACH_FUNCTION (node)\n     {\n@@ -3130,7 +3124,6 @@ materialize_cgraph (void)\n \t}\n     }\n \n-  timevar_pop (TV_IPA_LTO_GIMPLE_IN);\n \n   /* Start the appropriate timer depending on the mode that we are\n      operating in.  */"}, {"sha": "a04d05c6ae45c3c5d12b5748ce9e19793d8dbf43", "filename": "gcc/timevar.def", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Ftimevar.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Ftimevar.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftimevar.def?ref=917dd9bf1ed64884ca58a5496349d8a61be8e510", "patch": "@@ -77,7 +77,8 @@ DEFTIMEVAR (TV_IPA_LTO_GIMPLE_IN     , \"ipa lto gimple in\")\n DEFTIMEVAR (TV_IPA_LTO_GIMPLE_OUT    , \"ipa lto gimple out\")\n DEFTIMEVAR (TV_IPA_LTO_DECL_IN       , \"ipa lto decl in\")\n DEFTIMEVAR (TV_IPA_LTO_DECL_OUT      , \"ipa lto decl out\")\n-DEFTIMEVAR (TV_IPA_LTO_DECL_INIT_IO  , \"ipa lto decl init I/O\")\n+DEFTIMEVAR (TV_IPA_LTO_CTORS_IN      , \"ipa lto constructors in\")\n+DEFTIMEVAR (TV_IPA_LTO_CTORS_OUT     , \"ipa lto constructors out\")\n DEFTIMEVAR (TV_IPA_LTO_CGRAPH_IO     , \"ipa lto cgraph I/O\")\n DEFTIMEVAR (TV_IPA_LTO_DECL_MERGE    , \"ipa lto decl merge\")\n DEFTIMEVAR (TV_IPA_LTO_CGRAPH_MERGE  , \"ipa lto cgraph merge\")"}, {"sha": "b98fc1b44f4255db608b30de4fd36db8eec114fa", "filename": "gcc/varpool.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Fvarpool.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/917dd9bf1ed64884ca58a5496349d8a61be8e510/gcc%2Fvarpool.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarpool.c?ref=917dd9bf1ed64884ca58a5496349d8a61be8e510", "patch": "@@ -268,6 +268,8 @@ varpool_get_constructor (struct varpool_node *node)\n       || !in_lto_p)\n     return DECL_INITIAL (node->decl);\n \n+  timevar_push (TV_IPA_LTO_CTORS_IN);\n+\n   file_data = node->lto_file_data;\n   name = IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (decl));\n \n@@ -286,6 +288,7 @@ varpool_get_constructor (struct varpool_node *node)\n   lto_free_section_data (file_data, LTO_section_function_body, name,\n \t\t\t data, len);\n   lto_free_function_in_decl_state_for_node (node);\n+  timevar_pop (TV_IPA_LTO_CTORS_IN);\n   return DECL_INITIAL (node->decl);\n }\n "}]}