{"sha": "aad2919faeeb4582f3b0dd3299f19e40c863950a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWFkMjkxOWZhZWViNDU4MmYzYjBkZDMyOTlmMTllNDBjODYzOTUwYQ==", "commit": {"author": {"name": "Denis Chertykov", "email": "denisc@overta.ru", "date": "2000-04-21T21:00:09Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2000-04-21T21:00:09Z"}, "message": "reload.c (find_equiv_reg): Checks all valueno and regno regs as a call-clobbered regs.\n\n        * reload.c (find_equiv_reg): Checks all valueno and regno regs\n        as a call-clobbered regs.\n\nFrom-SVN: r33320", "tree": {"sha": "7da6d45e941b2f15fb6a1e2b07bec9d557863d23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7da6d45e941b2f15fb6a1e2b07bec9d557863d23"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aad2919faeeb4582f3b0dd3299f19e40c863950a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aad2919faeeb4582f3b0dd3299f19e40c863950a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aad2919faeeb4582f3b0dd3299f19e40c863950a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aad2919faeeb4582f3b0dd3299f19e40c863950a/comments", "author": null, "committer": null, "parents": [{"sha": "7f6e0fe6f740608da3702edb676ec323b7264bef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f6e0fe6f740608da3702edb676ec323b7264bef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f6e0fe6f740608da3702edb676ec323b7264bef"}], "stats": {"total": 32, "additions": 22, "deletions": 10}, "files": [{"sha": "008a523701a2a4030fc673d1f27edd978dee1b14", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad2919faeeb4582f3b0dd3299f19e40c863950a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad2919faeeb4582f3b0dd3299f19e40c863950a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aad2919faeeb4582f3b0dd3299f19e40c863950a", "patch": "@@ -1,3 +1,8 @@\n+Fri Apr 21 14:58:29 2000  Denis Chertykov  <denisc@overta.ru>\n+\n+\t* reload.c (find_equiv_reg): Checks all valueno and regno regs\n+\tas a call-clobbered regs.\n+\n Fri Apr 21 13:30:26 2000  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* rtl.c: Use NOTE_INSN_REPEATED_LINE_NUMBER and NOTE_INSN_RANGE_BEG."}, {"sha": "80df0e46236a1422b8ba48a0cdc44fef6bda47c2", "filename": "gcc/reload.c", "status": "modified", "additions": 17, "deletions": 10, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad2919faeeb4582f3b0dd3299f19e40c863950a/gcc%2Freload.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad2919faeeb4582f3b0dd3299f19e40c863950a/gcc%2Freload.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload.c?ref=aad2919faeeb4582f3b0dd3299f19e40c863950a", "patch": "@@ -6160,16 +6160,23 @@ find_equiv_reg (goal, insn, class, other, reload_reg_p, goalreg, mode)\n \n       /* Don't trust the conversion past a function call\n \t if either of the two is in a call-clobbered register, or memory.  */\n-      if (GET_CODE (p) == CALL_INSN\n-\t  && ((regno >= 0 && regno < FIRST_PSEUDO_REGISTER\n-\t       && call_used_regs[regno])\n-\t      ||\n-\t      (valueno >= 0 && valueno < FIRST_PSEUDO_REGISTER\n-\t       && call_used_regs[valueno])\n-\t      ||\n-\t      goal_mem\n-\t      || need_stable_sp))\n-\treturn 0;\n+      if (GET_CODE (p) == CALL_INSN)\n+\t{\n+\t  int i;\n+\t  \n+\t  if (goal_mem || need_stable_sp)\n+\t    return 0;\n+\t  \n+\t  if (regno >= 0 && regno < FIRST_PSEUDO_REGISTER)\n+\t    for (i = 0; i < nregs; ++i)\n+\t      if (call_used_regs[regno + i])\n+\t\treturn 0;\n+\n+\t  if (valueno >= 0 && valueno < FIRST_PSEUDO_REGISTER)\n+\t    for (i = 0; i < valuenregs; ++i)\n+\t      if (call_used_regs[valueno + i])\n+\t\treturn 0;\n+\t}\n \n #ifdef NON_SAVING_SETJMP\n       if (NON_SAVING_SETJMP && GET_CODE (p) == NOTE"}]}