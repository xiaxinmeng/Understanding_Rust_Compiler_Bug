{"sha": "bceb30e77bd19db8debc5182b75018c169acd6ff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmNlYjMwZTc3YmQxOWRiOGRlYmM1MTgyYjc1MDE4YzE2OWFjZDZmZg==", "commit": {"author": {"name": "Manfred Hollstein", "email": "manfred@s-direktnet.de", "date": "1998-07-06T23:52:21Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-07-06T23:52:21Z"}, "message": "libgcc2.c (L_exit): Provide a fake for atexit on systems which define ON_EXIT but not HAVE_ATEXIT.\n\n        * libgcc2.c (L_exit): Provide a fake for atexit on systems which\n        define ON_EXIT but not HAVE_ATEXIT.\n\nFrom-SVN: r20982", "tree": {"sha": "04953528c7d82c663d828dd50f34222e08e85a12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/04953528c7d82c663d828dd50f34222e08e85a12"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bceb30e77bd19db8debc5182b75018c169acd6ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bceb30e77bd19db8debc5182b75018c169acd6ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bceb30e77bd19db8debc5182b75018c169acd6ff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bceb30e77bd19db8debc5182b75018c169acd6ff/comments", "author": null, "committer": null, "parents": [{"sha": "7edf1e0416c6576886c7f2ae0736f3357d802da7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7edf1e0416c6576886c7f2ae0736f3357d802da7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7edf1e0416c6576886c7f2ae0736f3357d802da7"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "01affd1bcabc7c5b657525d41e4d7f0ec29390c2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bceb30e77bd19db8debc5182b75018c169acd6ff/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bceb30e77bd19db8debc5182b75018c169acd6ff/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bceb30e77bd19db8debc5182b75018c169acd6ff", "patch": "@@ -1,3 +1,8 @@\n+Tue Jul  7 00:50:17 1998  Manfred Hollstein   (manfred@s-direktnet.de)\n+\n+        * libgcc2.c (L_exit): Provide a fake for atexit on systems which\n+        define ON_EXIT but not HAVE_ATEXIT.\n+\n Tue Jul  7 00:44:35 1998  Franz Sirl <Franz.Sirl-kernel@lauterbach.com>\n \n \t* m68k.md (zero_extend QI to HI): Correctly handle TARGET_5200."}, {"sha": "7c26e6bc94673f06bc644e3d618fe2ff8a33ec4d", "filename": "gcc/libgcc2.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bceb30e77bd19db8debc5182b75018c169acd6ff/gcc%2Flibgcc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bceb30e77bd19db8debc5182b75018c169acd6ff/gcc%2Flibgcc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.c?ref=bceb30e77bd19db8debc5182b75018c169acd6ff", "patch": "@@ -3003,9 +3003,17 @@ exit (int status)\n   _exit (status);\n }\n \n-#else\n+#else /* ON_EXIT defined */\n int _exit_dummy_decl = 0;\t/* prevent compiler & linker warnings */\n-#endif\n+\n+# ifndef HAVE_ATEXIT\n+/* Provide a fake for atexit() using ON_EXIT.  */\n+int atexit (func_ptr func)\n+{\n+  return ON_EXIT (func, NULL);\n+}\n+# endif /* HAVE_ATEXIT */\n+#endif /* ON_EXIT defined */\n \n #endif /* L_exit */\n \f"}]}