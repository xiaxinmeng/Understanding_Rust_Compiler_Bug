{"sha": "f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjU2YWY1ZjljMjBjYThjZjRlZTkxNmJiZmMwNmQ4YzE1ODQ4NjhjYg==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2021-05-10T12:51:45Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2021-05-10T12:55:11Z"}, "message": "arm: MVE: Cleanup vcmpne/vcmpeq builtins\n\nAfter the previous patch, we no longer need to emit the unsigned\nvariants of vcmpneq/vcmpeqq. This patch removes them as well as the\ncorresponding iterator entries.\n\n2021-05-10  Christophe Lyon  <christophe.lyon@linaro.org>\n\n\tgcc/\n\t* config/arm/arm_mve_builtins.def (vcmpneq_u): Remove.\n\t(vcmpneq_n_u): Likewise.\n\t(vcmpeqq_u,): Likewise.\n\t(vcmpeqq_n_u): Likewise.\n\t* config/arm/iterators.md (supf): Remove VCMPNEQ_U, VCMPEQQ_U,\n\tVCMPEQQ_N_U and VCMPNEQ_N_U.\n\t* config/arm/mve.md (mve_vcmpneq): Remove <supf> iteration.\n\t(mve_vcmpeqq_n): Likewise.\n\t(mve_vcmpeqq): Likewise.\n\t(mve_vcmpneq_n): Likewise.", "tree": {"sha": "b1b21658f8b31cfad225542252e49a67f3349c43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b1b21658f8b31cfad225542252e49a67f3349c43"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb/comments", "author": null, "committer": null, "parents": [{"sha": "d1cee151e10e3099dba332d10f1f5c28ac05fb73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1cee151e10e3099dba332d10f1f5c28ac05fb73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1cee151e10e3099dba332d10f1f5c28ac05fb73"}], "stats": {"total": 35, "additions": 15, "deletions": 20}, "files": [{"sha": "ee34fd1607c7746526b0fb52808bb71322c0e043", "filename": "gcc/config/arm/arm_mve_builtins.def", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb/gcc%2Fconfig%2Farm%2Farm_mve_builtins.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb/gcc%2Fconfig%2Farm%2Farm_mve_builtins.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm_mve_builtins.def?ref=f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb", "patch": "@@ -90,7 +90,6 @@ VAR3 (BINOP_NONE_NONE_IMM, vshrq_n_s, v16qi, v8hi, v4si)\n VAR1 (BINOP_NONE_NONE_UNONE, vaddlvq_p_s, v4si)\n VAR1 (BINOP_UNONE_UNONE_UNONE, vaddlvq_p_u, v4si)\n VAR3 (BINOP_UNONE_NONE_NONE, vcmpneq_s, v16qi, v8hi, v4si)\n-VAR3 (BINOP_UNONE_UNONE_UNONE, vcmpneq_u, v16qi, v8hi, v4si)\n VAR3 (BINOP_NONE_NONE_NONE, vshlq_s, v16qi, v8hi, v4si)\n VAR3 (BINOP_UNONE_UNONE_NONE, vshlq_u, v16qi, v8hi, v4si)\n VAR3 (BINOP_UNONE_UNONE_UNONE, vsubq_u, v16qi, v8hi, v4si)\n@@ -118,11 +117,8 @@ VAR3 (BINOP_UNONE_UNONE_UNONE, vhsubq_n_u, v16qi, v8hi, v4si)\n VAR3 (BINOP_UNONE_UNONE_UNONE, vhaddq_u, v16qi, v8hi, v4si)\n VAR3 (BINOP_UNONE_UNONE_UNONE, vhaddq_n_u, v16qi, v8hi, v4si)\n VAR3 (BINOP_UNONE_UNONE_UNONE, veorq_u, v16qi, v8hi, v4si)\n-VAR3 (BINOP_UNONE_UNONE_UNONE, vcmpneq_n_u, v16qi, v8hi, v4si)\n VAR3 (BINOP_UNONE_UNONE_UNONE, vcmphiq_u, v16qi, v8hi, v4si)\n VAR3 (BINOP_UNONE_UNONE_UNONE, vcmphiq_n_u, v16qi, v8hi, v4si)\n-VAR3 (BINOP_UNONE_UNONE_UNONE, vcmpeqq_u, v16qi, v8hi, v4si)\n-VAR3 (BINOP_UNONE_UNONE_UNONE, vcmpeqq_n_u, v16qi, v8hi, v4si)\n VAR3 (BINOP_UNONE_UNONE_UNONE, vcmpcsq_u, v16qi, v8hi, v4si)\n VAR3 (BINOP_UNONE_UNONE_UNONE, vcmpcsq_n_u, v16qi, v8hi, v4si)\n VAR3 (BINOP_UNONE_UNONE_UNONE, vbicq_u, v16qi, v8hi, v4si)"}, {"sha": "0aba93f5522812ca837eda9e5cbf48e169cf39e3", "filename": "gcc/config/arm/iterators.md", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb/gcc%2Fconfig%2Farm%2Fiterators.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb/gcc%2Fconfig%2Farm%2Fiterators.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fiterators.md?ref=f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb", "patch": "@@ -1279,13 +1279,12 @@\n \t\t       (VCREATEQ_U \"u\") (VCREATEQ_S \"s\") (VSHRQ_N_S \"s\")\n \t\t       (VSHRQ_N_U \"u\") (VCVTQ_N_FROM_F_S \"s\") (VSHLQ_U \"u\")\n \t\t       (VCVTQ_N_FROM_F_U \"u\") (VADDLVQ_P_S \"s\") (VSHLQ_S \"s\")\n-\t\t       (VADDLVQ_P_U \"u\") (VCMPNEQ_U \"u\") (VCMPNEQ_S \"s\")\n+\t\t       (VADDLVQ_P_U \"u\") (VCMPNEQ_S \"s\")\n \t\t       (VABDQ_M_S \"s\") (VABDQ_M_U \"u\") (VABDQ_S \"s\")\n \t\t       (VABDQ_U \"u\") (VADDQ_N_S \"s\") (VADDQ_N_U \"u\")\n \t\t       (VADDVQ_P_S \"s\")\t(VADDVQ_P_U \"u\") (VBRSRQ_N_S \"s\")\n-\t\t       (VBRSRQ_N_U \"u\") (VCMPEQQ_S \"s\") (VCMPEQQ_U \"u\")\n-\t\t       (VCMPEQQ_N_S \"s\") (VCMPEQQ_N_U \"u\") (VCMPNEQ_N_S \"s\")\n-\t\t       (VCMPNEQ_N_U \"u\")\n+\t\t       (VBRSRQ_N_U \"u\") (VCMPEQQ_S \"s\")\n+\t\t       (VCMPEQQ_N_S \"s\") (VCMPNEQ_N_S \"s\")\n \t\t       (VHADDQ_N_S \"s\") (VHADDQ_N_U \"u\") (VHADDQ_S \"s\")\n \t\t       (VHADDQ_U \"u\") (VHSUBQ_N_S \"s\")\t(VHSUBQ_N_U \"u\")\n \t\t       (VHSUBQ_S \"s\") (VMAXQ_S \"s\") (VMAXQ_U \"u\") (VHSUBQ_U \"u\")\n@@ -1541,16 +1540,16 @@\n (define_int_iterator VSHRQ_N [VSHRQ_N_S VSHRQ_N_U])\n (define_int_iterator VCVTQ_N_FROM_F [VCVTQ_N_FROM_F_S VCVTQ_N_FROM_F_U])\n (define_int_iterator VADDLVQ_P [VADDLVQ_P_S VADDLVQ_P_U])\n-(define_int_iterator VCMPNEQ [VCMPNEQ_U VCMPNEQ_S])\n+(define_int_iterator VCMPNEQ [VCMPNEQ_S])\n (define_int_iterator VSHLQ [VSHLQ_S VSHLQ_U])\n (define_int_iterator VABDQ [VABDQ_S VABDQ_U])\n (define_int_iterator VADDQ_N [VADDQ_N_S VADDQ_N_U])\n (define_int_iterator VADDVAQ [VADDVAQ_S VADDVAQ_U])\n (define_int_iterator VADDVQ_P [VADDVQ_P_U VADDVQ_P_S])\n (define_int_iterator VBRSRQ_N [VBRSRQ_N_U VBRSRQ_N_S])\n-(define_int_iterator VCMPEQQ [VCMPEQQ_U VCMPEQQ_S])\n-(define_int_iterator VCMPEQQ_N [VCMPEQQ_N_S VCMPEQQ_N_U])\n-(define_int_iterator VCMPNEQ_N [VCMPNEQ_N_U VCMPNEQ_N_S])\n+(define_int_iterator VCMPEQQ [VCMPEQQ_S])\n+(define_int_iterator VCMPEQQ_N [VCMPEQQ_N_S])\n+(define_int_iterator VCMPNEQ_N [VCMPNEQ_N_S])\n (define_int_iterator VHADDQ [VHADDQ_S VHADDQ_U])\n (define_int_iterator VHADDQ_N [VHADDQ_N_U VHADDQ_N_S])\n (define_int_iterator VHSUBQ [VHSUBQ_S VHSUBQ_U])"}, {"sha": "9712bc087c9bf558c2b89ba694c920ba53d381b3", "filename": "gcc/config/arm/mve.md", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb/gcc%2Fconfig%2Farm%2Fmve.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb/gcc%2Fconfig%2Farm%2Fmve.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fmve.md?ref=f56af5f9c20ca8cf4ee916bbfc06d8c1584868cb", "patch": "@@ -811,9 +811,9 @@\n    (set_attr \"length\"\"8\")])\n \n ;;\n-;; [vcmpneq_u, vcmpneq_s])\n+;; [vcmpneq_s])\n ;;\n-(define_insn \"mve_vcmpneq_<supf><mode>\"\n+(define_insn \"mve_vcmpneq_s<mode>\"\n   [\n    (set (match_operand:HI 0 \"vpr_register_operand\" \"=Up\")\n \t(unspec:HI [(match_operand:MVE_2 1 \"s_register_operand\" \"w\")\n@@ -1010,9 +1010,9 @@\n ])\n \n ;;\n-;; [vcmpeqq_n_s, vcmpeqq_n_u])\n+;; [vcmpeqq_n_s])\n ;;\n-(define_insn \"mve_vcmpeqq_n_<supf><mode>\"\n+(define_insn \"mve_vcmpeqq_n_s<mode>\"\n   [\n    (set (match_operand:HI 0 \"vpr_register_operand\" \"=Up\")\n \t(unspec:HI [(match_operand:MVE_2 1 \"s_register_operand\" \"w\")\n@@ -1025,9 +1025,9 @@\n ])\n \n ;;\n-;; [vcmpeqq_u, vcmpeqq_s])\n+;; [vcmpeqq_s])\n ;;\n-(define_insn \"mve_vcmpeqq_<supf><mode>\"\n+(define_insn \"mve_vcmpeqq_s<mode>\"\n   [\n    (set (match_operand:HI 0 \"vpr_register_operand\" \"=Up\")\n \t(unspec:HI [(match_operand:MVE_2 1 \"s_register_operand\" \"w\")\n@@ -1190,9 +1190,9 @@\n ])\n \n ;;\n-;; [vcmpneq_n_u, vcmpneq_n_s])\n+;; [vcmpneq_n_s])\n ;;\n-(define_insn \"mve_vcmpneq_n_<supf><mode>\"\n+(define_insn \"mve_vcmpneq_n_s<mode>\"\n   [\n    (set (match_operand:HI 0 \"vpr_register_operand\" \"=Up\")\n \t(unspec:HI [(match_operand:MVE_2 1 \"s_register_operand\" \"w\")"}]}