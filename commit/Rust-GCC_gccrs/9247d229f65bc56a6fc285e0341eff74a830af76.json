{"sha": "9247d229f65bc56a6fc285e0341eff74a830af76", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTI0N2QyMjlmNjViYzU2YTZmYzI4NWUwMzQxZWZmNzRhODMwYWY3Ng==", "commit": {"author": {"name": "Thomas Fitzsimmons", "email": "fitzsim@gcc.gnu.org", "date": "2005-05-03T23:53:27Z"}, "committer": {"name": "Thomas Fitzsimmons", "email": "fitzsim@gcc.gnu.org", "date": "2005-05-03T23:53:27Z"}, "message": "2005-05-03  Thomas Fitzsimmons  <fitzsim@redhat.com>\n\n        * jni/gtk-peer/gnu_java_awt_peer_gtk_GtkToolkit.c\n        (init_glib_threads): Check if threading system is already\n        initialized.\n\nFrom-SVN: r99196", "tree": {"sha": "a10fd01b9f72f7f247874cf6a02f8ec3e7752463", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a10fd01b9f72f7f247874cf6a02f8ec3e7752463"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9247d229f65bc56a6fc285e0341eff74a830af76", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9247d229f65bc56a6fc285e0341eff74a830af76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9247d229f65bc56a6fc285e0341eff74a830af76", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9247d229f65bc56a6fc285e0341eff74a830af76/comments", "author": null, "committer": null, "parents": [{"sha": "f525d7a75ffa9e02d094828e91b2c8af49272e61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f525d7a75ffa9e02d094828e91b2c8af49272e61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f525d7a75ffa9e02d094828e91b2c8af49272e61"}], "stats": {"total": 25, "additions": 22, "deletions": 3}, "files": [{"sha": "298d2880267aa813b1028518b38b68b254367b86", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9247d229f65bc56a6fc285e0341eff74a830af76/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9247d229f65bc56a6fc285e0341eff74a830af76/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=9247d229f65bc56a6fc285e0341eff74a830af76", "patch": "@@ -1,3 +1,9 @@\n+2005-05-03  Thomas Fitzsimmons  <fitzsim@redhat.com>\n+\n+\t* jni/gtk-peer/gnu_java_awt_peer_gtk_GtkToolkit.c\n+\t(init_glib_threads): Check if threading system is already\n+\tinitialized.\n+\n 2005-05-03  Andrew Overholt  <overholt@redhat.com>\n \n \tPR libgcj/21372:\n@@ -136,6 +142,7 @@\n \t* gnu/java/net/protocol/file/Connection.java\n \t(lineSeparator): Initialize with SystemProperties.getProperty().\n \n+>>>>>>> 1.3571\n 2005-04-27  Chris Burdess  <dog@gnu.org>\n \n \t* gnu/java/net/protocol/file/Connection.java: Return correct content"}, {"sha": "bb31233e35c523fe76426bcf28ef2a394f61cdc1", "filename": "libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkToolkit.c", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9247d229f65bc56a6fc285e0341eff74a830af76/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkToolkit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9247d229f65bc56a6fc285e0341eff74a830af76/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkToolkit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkToolkit.c?ref=9247d229f65bc56a6fc285e0341eff74a830af76", "patch": "@@ -275,10 +275,22 @@ init_glib_threads(JNIEnv *env, jint portableNativeSync)\n     }\n   \n   (*env)->GetJavaVM( env, &the_vm );\n-  if (portableNativeSync)\n-    g_thread_init ( &portable_native_sync_jni_functions );\n+  if (!g_thread_supported ())\n+    {\n+      if (portableNativeSync)\n+        g_thread_init ( &portable_native_sync_jni_functions );\n+      else\n+        g_thread_init ( NULL );\n+    }\n   else\n-    g_thread_init ( NULL );\n+    {\n+      /* Warn if portable native sync is desired but the threading\n+         system is already initialized.  In that case we can't\n+         override the threading implementation with our portable\n+         native sync functions. */\n+      if (portableNativeSync)\n+        g_printerr (\"peer warning: portable native sync disabled.\\n\");\n+    }\n \n   /* Debugging progress message; uncomment if needed: */\n   /*   printf(\"called gthread init\\n\"); */"}]}