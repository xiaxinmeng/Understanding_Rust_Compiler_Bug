{"sha": "4aaf33718f09daf1cd2864b3db07faa2e44642ff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGFhZjMzNzE4ZjA5ZGFmMWNkMjg2NGIzZGIwN2ZhYTJlNDQ2NDJmZg==", "commit": {"author": {"name": "Kito Cheng", "email": "kito.cheng@sifive.com", "date": "2020-12-06T03:39:22Z"}, "committer": {"name": "Kito Cheng", "email": "kito.cheng@sifive.com", "date": "2020-12-08T07:38:02Z"}, "message": "PR target/98152: Checking python is available before using\n\nWe'll try to canonicalize the arch string for --with-arch,\nand the script is written in python, however it will turns out\nGCC require python to build for RISC-V port, it's not expect as\nthe GCC requirement.\n\nSo this patch is made this as optional, detect python and only use it\nwhen it available, it won't break any functionality with out doing\ncanonicalization, just might build one more redundant multi-lib.\n\ngcc/ChangeLog:\n\n\tPR target/98152\n\t* config.gcc (riscv*-*-*): Checking python, python3 or python2\n\tis available, and skip doing with_arch canonicalize if no python\n\tavailable.", "tree": {"sha": "48727807cadd81d912d54fcd85b73c49451b2e96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/48727807cadd81d912d54fcd85b73c49451b2e96"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4aaf33718f09daf1cd2864b3db07faa2e44642ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4aaf33718f09daf1cd2864b3db07faa2e44642ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4aaf33718f09daf1cd2864b3db07faa2e44642ff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4aaf33718f09daf1cd2864b3db07faa2e44642ff/comments", "author": {"login": "kito-cheng", "id": 2723185, "node_id": "MDQ6VXNlcjI3MjMxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/2723185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kito-cheng", "html_url": "https://github.com/kito-cheng", "followers_url": "https://api.github.com/users/kito-cheng/followers", "following_url": "https://api.github.com/users/kito-cheng/following{/other_user}", "gists_url": "https://api.github.com/users/kito-cheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/kito-cheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kito-cheng/subscriptions", "organizations_url": "https://api.github.com/users/kito-cheng/orgs", "repos_url": "https://api.github.com/users/kito-cheng/repos", "events_url": "https://api.github.com/users/kito-cheng/events{/privacy}", "received_events_url": "https://api.github.com/users/kito-cheng/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kito-cheng", "id": 2723185, "node_id": "MDQ6VXNlcjI3MjMxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/2723185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kito-cheng", "html_url": "https://github.com/kito-cheng", "followers_url": "https://api.github.com/users/kito-cheng/followers", "following_url": "https://api.github.com/users/kito-cheng/following{/other_user}", "gists_url": "https://api.github.com/users/kito-cheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/kito-cheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kito-cheng/subscriptions", "organizations_url": "https://api.github.com/users/kito-cheng/orgs", "repos_url": "https://api.github.com/users/kito-cheng/repos", "events_url": "https://api.github.com/users/kito-cheng/events{/privacy}", "received_events_url": "https://api.github.com/users/kito-cheng/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9121f8084162ff6193a5e941cab1429e4180997a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9121f8084162ff6193a5e941cab1429e4180997a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9121f8084162ff6193a5e941cab1429e4180997a"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "3650b46734a02f53fc7f47ca23e25ab53f9b22cd", "filename": "gcc/config.gcc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4aaf33718f09daf1cd2864b3db07faa2e44642ff/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4aaf33718f09daf1cd2864b3db07faa2e44642ff/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=4aaf33718f09daf1cd2864b3db07faa2e44642ff", "patch": "@@ -4623,7 +4623,10 @@ case \"${target}\" in\n \t\t\texit 1\n \t\t\t;;\n \t\tesac\n-\t\twith_arch=`${srcdir}/config/riscv/arch-canonicalize ${with_arch}`\n+\t\tPYTHON=`which python || which python3 || which python2`\n+\t\tif test \"x${PYTHON}\" != x; then\n+\t\t\twith_arch=`${PYTHON} ${srcdir}/config/riscv/arch-canonicalize ${with_arch}`\n+\t\tfi\n \t\ttm_defines=\"${tm_defines} TARGET_RISCV_DEFAULT_ARCH=${with_arch}\"\n \n \t\t# Make sure --with-abi is valid.  If it was not specified,"}]}