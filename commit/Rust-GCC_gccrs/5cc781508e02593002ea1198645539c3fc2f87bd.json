{"sha": "5cc781508e02593002ea1198645539c3fc2f87bd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWNjNzgxNTA4ZTAyNTkzMDAyZWExMTk4NjQ1NTM5YzNmYzJmODdiZA==", "commit": {"author": {"name": "Aaron W. LaFramboise", "email": "aaronavay62@aaronwl.com", "date": "2004-11-03T03:00:00Z"}, "committer": {"name": "Aaron W. LaFramboise", "email": "aaronwl@gcc.gnu.org", "date": "2004-11-03T03:00:00Z"}, "message": "* config/os/bsd/darwin/os_defines.h\n\t(_GLIBCXX_WEAK_DEFINITION): Define.\n\t* include/bits/c++config (_GLIBCXX_WEAK_DEFINITION): Define.\n\t* libsupc++/del_op.cc (operator delete(void *)): Use\n\t_GLIBCXX_WEAK_DEFINITION.\n\t* libsupc++/del_opnt.cc\n\t(operator delete(void *, const std::nothrow_t&)): Same.\n\t* libsupc++/del_opv.cc (operator delete[](void *)): Same.\n\t* libsupc++/del_opvnt.cc\n\t(operator delete[](void *, const std::nothrow_t&)): Same.\n\t* libsupc++/new_op.cc (operator new(std::size_t)): Same.\n\t* libsupc++/new_opnt.cc\n\t(operator new(std::size_t, const std::nothrow_t&)): Same\n\t* libsupc++/new_opv.cc (operator new[](std::size_t)): Same.\n\t* libsupc++/new_opvnt.cc\n\t(operator new[](std::size_t, const std::nothrow_t&)): Same.\n\nFrom-SVN: r90017", "tree": {"sha": "945daee19b8d2dc68c77292206dc48448497a2f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/945daee19b8d2dc68c77292206dc48448497a2f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5cc781508e02593002ea1198645539c3fc2f87bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cc781508e02593002ea1198645539c3fc2f87bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cc781508e02593002ea1198645539c3fc2f87bd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cc781508e02593002ea1198645539c3fc2f87bd/comments", "author": null, "committer": null, "parents": [{"sha": "71bd71860a61dbdbe2ff60a1a46a978baf0497ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71bd71860a61dbdbe2ff60a1a46a978baf0497ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71bd71860a61dbdbe2ff60a1a46a978baf0497ac"}], "stats": {"total": 48, "additions": 40, "deletions": 8}, "files": [{"sha": "cb3ab699f21fb2efb10c29b242622205f0cccf6b", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=5cc781508e02593002ea1198645539c3fc2f87bd", "patch": "@@ -1,3 +1,22 @@\n+2004-11-03  Aaron W. LaFramboise  <aaronavay62@aaronwl.com>\n+\n+\t* config/os/bsd/darwin/os_defines.h\n+\t(_GLIBCXX_WEAK_DEFINITION): Define.\n+\t* include/bits/c++config (_GLIBCXX_WEAK_DEFINITION): Define.\n+\t* libsupc++/del_op.cc (operator delete(void *)): Use\n+\t_GLIBCXX_WEAK_DEFINITION.\n+\t* libsupc++/del_opnt.cc\n+\t(operator delete(void *, const std::nothrow_t&)): Same.\n+\t* libsupc++/del_opv.cc (operator delete[](void *)): Same.\n+\t* libsupc++/del_opvnt.cc\n+\t(operator delete[](void *, const std::nothrow_t&)): Same.\n+\t* libsupc++/new_op.cc (operator new(std::size_t)): Same.\n+\t* libsupc++/new_opnt.cc\n+\t(operator new(std::size_t, const std::nothrow_t&)): Same\n+\t* libsupc++/new_opv.cc (operator new[](std::size_t)): Same.\n+\t* libsupc++/new_opvnt.cc\n+\t(operator new[](std::size_t, const std::nothrow_t&)): Same.\n+\n 2004-11-02  Paolo Carlini  <pcarlini@suse.de>\n \n \t* include/bits/locale_facets.tcc (num_get<>::_M_extract_int):"}, {"sha": "07fb55b61259d3945d5e576c269c3f43e5065439", "filename": "libstdc++-v3/config/os/bsd/darwin/os_defines.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Fconfig%2Fos%2Fbsd%2Fdarwin%2Fos_defines.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Fconfig%2Fos%2Fbsd%2Fdarwin%2Fos_defines.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fos%2Fbsd%2Fdarwin%2Fos_defines.h?ref=5cc781508e02593002ea1198645539c3fc2f87bd", "patch": "@@ -38,4 +38,10 @@\n    links to, so there's no need for weak-ness for that.  */\n #define _GLIBCXX_GTHREAD_USE_WEAK 0\n \n+// On Darwin, in order to enable overriding of operator new and delete,\n+// GCC makes the definition of these functions weak, relies on the\n+// loader to implement weak semantics properly, and uses\n+// -flat_namespace to work around the way that it doesn't.\n+#define _GLIBCXX_WEAK_DEFINITION __attribute__ ((weak))\n+\n #endif"}, {"sha": "064280b67564f8ce38e7ae38de7db989b8d7b833", "filename": "libstdc++-v3/include/bits/c++config", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fc%2B%2Bconfig", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fc%2B%2Bconfig", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fc%2B%2Bconfig?ref=5cc781508e02593002ea1198645539c3fc2f87bd", "patch": "@@ -51,6 +51,13 @@\n # define _GLIBCXX_EXTERN_TEMPLATE 1\n #endif\n \n+// Certain function definitions that are meant to be overridable\n+// from user code are decorated with this macro.  For some targets,\n+// this macro causes these definitions to be weak.\n+#ifndef _GLIBCXX_WEAK_DEFINITION\n+#define _GLIBCXX_WEAK_DEFINITION\n+#endif\n+\n // Debug mode support. Debug mode basic_string is not allowed to be\n // associated with std, because of locale and exception link\n // dependence."}, {"sha": "388f50863b12b996eaa436423743fbb40d9ff179", "filename": "libstdc++-v3/libsupc++/del_op.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_op.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_op.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_op.cc?ref=5cc781508e02593002ea1198645539c3fc2f87bd", "patch": "@@ -39,7 +39,7 @@ using std::free;\n extern \"C\" void free(void *);\n #endif\n \n-__attribute__((weak)) void\n+_GLIBCXX_WEAK_DEFINITION void\n operator delete (void *ptr) throw ()\n {\n   if (ptr)"}, {"sha": "76b7d69e002638203ab02ae342207c4e182480c8", "filename": "libstdc++-v3/libsupc++/del_opnt.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_opnt.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_opnt.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_opnt.cc?ref=5cc781508e02593002ea1198645539c3fc2f87bd", "patch": "@@ -32,7 +32,7 @@\n \n extern \"C\" void free (void *);\n \n-__attribute__((weak)) void\n+_GLIBCXX_WEAK_DEFINITION void\n operator delete (void *ptr, const std::nothrow_t&) throw ()\n {\n   if (ptr)"}, {"sha": "94cdfde32ca3e32b83b9b7d0b7a29841d14ee31b", "filename": "libstdc++-v3/libsupc++/del_opv.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_opv.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_opv.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_opv.cc?ref=5cc781508e02593002ea1198645539c3fc2f87bd", "patch": "@@ -30,7 +30,7 @@\n \n #include \"new\"\n \n-__attribute__((weak)) void\n+_GLIBCXX_WEAK_DEFINITION void\n operator delete[] (void *ptr) throw ()\n {\n   ::operator delete (ptr);"}, {"sha": "180b08f63d4650d8e380a7b5d9894feb7b6c61f2", "filename": "libstdc++-v3/libsupc++/del_opvnt.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_opvnt.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_opvnt.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fdel_opvnt.cc?ref=5cc781508e02593002ea1198645539c3fc2f87bd", "patch": "@@ -30,7 +30,7 @@\n \n #include \"new\"\n \n-__attribute__((weak)) void\n+_GLIBCXX_WEAK_DEFINITION void\n operator delete[] (void *ptr, const std::nothrow_t&) throw ()\n {\n   ::operator delete (ptr);"}, {"sha": "0ebec1cd36f7fe6e5953633a0fe486266fa5b258", "filename": "libstdc++-v3/libsupc++/new_op.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_op.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_op.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_op.cc?ref=5cc781508e02593002ea1198645539c3fc2f87bd", "patch": "@@ -43,7 +43,7 @@ extern \"C\" void *malloc (std::size_t);\n \n extern new_handler __new_handler;\n \n-__attribute__((weak)) void *\n+_GLIBCXX_WEAK_DEFINITION void *\n operator new (std::size_t sz) throw (std::bad_alloc)\n {\n   void *p;"}, {"sha": "1b29c1a5f12cada9b1cf08ee81b24b6231d26ed1", "filename": "libstdc++-v3/libsupc++/new_opnt.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_opnt.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_opnt.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_opnt.cc?ref=5cc781508e02593002ea1198645539c3fc2f87bd", "patch": "@@ -36,7 +36,7 @@ using std::bad_alloc;\n extern \"C\" void *malloc (std::size_t);\n extern new_handler __new_handler;\n \n-__attribute__((weak)) void *\n+_GLIBCXX_WEAK_DEFINITION void *\n operator new (std::size_t sz, const std::nothrow_t&) throw()\n {\n   void *p;"}, {"sha": "9fa7d19ecc49b54526637260736b948302717bcf", "filename": "libstdc++-v3/libsupc++/new_opv.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_opv.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_opv.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_opv.cc?ref=5cc781508e02593002ea1198645539c3fc2f87bd", "patch": "@@ -30,7 +30,7 @@\n \n #include \"new\"\n \n-__attribute__((weak)) void *\n+_GLIBCXX_WEAK_DEFINITION void *\n operator new[] (std::size_t sz) throw (std::bad_alloc)\n {\n   return ::operator new(sz);"}, {"sha": "79b8cdc1077ce6aa1759a2e63caf53cda728d74a", "filename": "libstdc++-v3/libsupc++/new_opvnt.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_opvnt.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cc781508e02593002ea1198645539c3fc2f87bd/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_opvnt.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fnew_opvnt.cc?ref=5cc781508e02593002ea1198645539c3fc2f87bd", "patch": "@@ -30,7 +30,7 @@\n \n #include \"new\"\n \n-__attribute__((weak)) void *\n+_GLIBCXX_WEAK_DEFINITION void *\n operator new[] (std::size_t sz, const std::nothrow_t& nothrow) throw()\n {\n   return ::operator new(sz, nothrow);"}]}