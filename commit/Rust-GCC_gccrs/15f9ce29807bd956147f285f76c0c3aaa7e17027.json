{"sha": "15f9ce29807bd956147f285f76c0c3aaa7e17027", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTVmOWNlMjk4MDdiZDk1NjE0N2YyODVmNzZjMGMzYWFhN2UxNzAyNw==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobias.schlueter@physik.uni-muenchen.de", "date": "2005-06-21T20:48:20Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2005-06-21T20:48:20Z"}, "message": "namelist_use_1.msg\n\nCo-Authored-By: Paul Thomas <pault@gcc.gnu.org>\n\nFrom-SVN: r101233", "tree": {"sha": "408b055ad1a05d0a0b549c4c0ff9a1749c71a4e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/408b055ad1a05d0a0b549c4c0ff9a1749c71a4e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/15f9ce29807bd956147f285f76c0c3aaa7e17027", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15f9ce29807bd956147f285f76c0c3aaa7e17027", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15f9ce29807bd956147f285f76c0c3aaa7e17027", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15f9ce29807bd956147f285f76c0c3aaa7e17027/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2735e93e53bb4cf96a8f245b40bf29fefe946163", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2735e93e53bb4cf96a8f245b40bf29fefe946163", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2735e93e53bb4cf96a8f245b40bf29fefe946163"}], "stats": {"total": 60, "additions": 60, "deletions": 0}, "files": [{"sha": "4ebd01d8e44ede821110620d55aef01cd36c923d", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15f9ce29807bd956147f285f76c0c3aaa7e17027/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15f9ce29807bd956147f285f76c0c3aaa7e17027/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=15f9ce29807bd956147f285f76c0c3aaa7e17027", "patch": "@@ -1,3 +1,13 @@\n+2005-06-21  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n+\t    Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/22010\n+\tPort from g95.\n+\t* module.c (mio_namelist): New function. Correct to set\n+\tnamelist_tail and to give error on renaming namelist by use\n+\tassociation.\n+\t(mio_symbol): Call mio_namelist.\n+\n 2005-06-19  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n \n \t* gfortran.h: Add flag_backslash compile-time option."}, {"sha": "b7e3d488e9a5afaecbc59861695875884c86e4b8", "filename": "gcc/fortran/module.c", "status": "modified", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15f9ce29807bd956147f285f76c0c3aaa7e17027/gcc%2Ffortran%2Fmodule.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15f9ce29807bd956147f285f76c0c3aaa7e17027/gcc%2Ffortran%2Fmodule.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmodule.c?ref=15f9ce29807bd956147f285f76c0c3aaa7e17027", "patch": "@@ -2564,6 +2564,55 @@ mio_expr (gfc_expr ** ep)\n }\n \n \n+/* Read and write namelists */\n+\n+static void\n+mio_namelist (gfc_symbol * sym)\n+{\n+  gfc_namelist *n, *m;\n+  const char *check_name;\n+\n+  mio_lparen ();\n+\n+  if (iomode == IO_OUTPUT)\n+    {\n+      for (n = sym->namelist; n; n = n->next)\n+\tmio_symbol_ref (&n->sym);\n+    }\n+  else\n+    {\n+      /* This departure from the standard is flagged as an error.\n+\t It does, in fact, work correctly. TODO: Allow it\n+\t conditionally?  */\n+      if (sym->attr.flavor == FL_NAMELIST)\n+\t{\n+\t  check_name = find_use_name (sym->name);\n+\t  if (check_name && strcmp (check_name, sym->name) != 0)\n+\t    gfc_error(\"Namelist %s cannot be renamed by USE\"\n+\t\t      \" association to %s.\",\n+\t\t      sym->name, check_name);\n+\t}\n+\n+      m = NULL;\n+      while (peek_atom () != ATOM_RPAREN)\n+\t{\n+\t  n = gfc_get_namelist ();\n+\t  mio_symbol_ref (&n->sym);\n+\n+\t  if (sym->namelist == NULL)\n+\t    sym->namelist = n;\n+\t  else\n+\t    m->next = n;\n+\n+\t  m = n;\n+\t}\n+      sym->namelist_tail = m;\n+    }\n+\n+  mio_rparen ();\n+}\n+\n+\n /* Save/restore lists of gfc_interface stuctures.  When loading an\n    interface, we are really appending to the existing list of\n    interfaces.  Checking for duplicate and ambiguous interfaces has to\n@@ -2724,6 +2773,7 @@ mio_symbol (gfc_symbol * sym)\n     sym->component_access =\n       MIO_NAME(gfc_access) (sym->component_access, access_types);\n \n+  mio_namelist (sym);\n   mio_rparen ();\n }\n "}]}