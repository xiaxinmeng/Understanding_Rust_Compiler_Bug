{"sha": "7f0f108309a881fe9e84a9c0b9a6f13b24a7886e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2YwZjEwODMwOWE4ODFmZTllODRhOWMwYjlhNmYxM2IyNGE3ODg2ZQ==", "commit": {"author": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2020-02-24T22:01:29Z"}, "committer": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2020-02-25T17:39:51Z"}, "message": "libstdc++: LWG 3292 iota_view is under-constrained\n\nlibstdc++-v3/ChangeLog:\n\n\tLWG 3292 iota_view is under-constrained\n\t* include/std/ranges (iota_view): Require that _Winc models semiregular\n\t  as per LWG 3292.\n\t* testsuite/std/ranges/iota/lwg3292_neg.cc: New test.", "tree": {"sha": "81ec9a34cbbe164d368075904c8e1e90a0c3e6a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81ec9a34cbbe164d368075904c8e1e90a0c3e6a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f0f108309a881fe9e84a9c0b9a6f13b24a7886e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f0f108309a881fe9e84a9c0b9a6f13b24a7886e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f0f108309a881fe9e84a9c0b9a6f13b24a7886e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f0f108309a881fe9e84a9c0b9a6f13b24a7886e/comments", "author": null, "committer": null, "parents": [{"sha": "eb7ba6c36b8a17c79936abe26245e4bc66bb8859", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb7ba6c36b8a17c79936abe26245e4bc66bb8859", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb7ba6c36b8a17c79936abe26245e4bc66bb8859"}], "stats": {"total": 48, "additions": 48, "deletions": 0}, "files": [{"sha": "046d50de6d1755984e6d9a6520814ab7a254be31", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f0f108309a881fe9e84a9c0b9a6f13b24a7886e/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f0f108309a881fe9e84a9c0b9a6f13b24a7886e/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=7f0f108309a881fe9e84a9c0b9a6f13b24a7886e", "patch": "@@ -1,3 +1,10 @@\n+2020-02-25  Patrick Palka  <ppalka@redhat.com>\n+\n+\tLWG 3292 iota_view is under-constrained\n+\t* include/std/ranges (iota_view): Require that _Winc models semiregular\n+\t  as per LWG 3292.\n+\t* testsuite/std/ranges/iota/lwg3292_neg.cc: New test.\n+\n 2020-02-25  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* include/bits/ranges_algobase.h (__copy_or_move): Do not use memmove"}, {"sha": "ab8fbaca38f6c36058bcaaf4c7ded1111a6c0422", "filename": "libstdc++-v3/include/std/ranges", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f0f108309a881fe9e84a9c0b9a6f13b24a7886e/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f0f108309a881fe9e84a9c0b9a6f13b24a7886e/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges?ref=7f0f108309a881fe9e84a9c0b9a6f13b24a7886e", "patch": "@@ -615,6 +615,7 @@ namespace ranges\n   template<weakly_incrementable _Winc,\n \t   semiregular _Bound = unreachable_sentinel_t>\n     requires std::__detail::__weakly_eq_cmp_with<_Winc, _Bound>\n+      && semiregular<_Winc>\n     class iota_view : public view_interface<iota_view<_Winc, _Bound>>\n     {\n     private:"}, {"sha": "80c392729b335ae38633182d44a897851c44fbdc", "filename": "libstdc++-v3/testsuite/std/ranges/iota/lwg3292_neg.cc", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f0f108309a881fe9e84a9c0b9a6f13b24a7886e/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fiota%2Flwg3292_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f0f108309a881fe9e84a9c0b9a6f13b24a7886e/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fiota%2Flwg3292_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fiota%2Flwg3292_neg.cc?ref=7f0f108309a881fe9e84a9c0b9a6f13b24a7886e", "patch": "@@ -0,0 +1,40 @@\n+// Copyright (C) 2020 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+// { dg-options \"-std=gnu++2a\" }\n+// { dg-do compile { target c++2a } }\n+\n+#include <sstream>\n+#include <ranges>\n+\n+namespace ranges = std::ranges;\n+namespace views = std::views;\n+\n+void\n+test01()\n+{\n+  std::istringstream s(\"1 2 3 4 5\");\n+  auto v = ranges::istream_view<int>(s);\n+  auto i = v.begin();\n+  static_assert(!std::semiregular<decltype(i)>);\n+  auto o = views::iota(std::move(i));\n+  static_assert(false); // { dg-error \"\" }\n+}\n+\n+// { dg-prune-output \"no match\" }\n+// { dg-prune-output \"deduction failed\" }\n+// { dg-prune-output \"constraint failure\" }"}]}