{"sha": "8f984534270f7ce4c0c3403929d3b56494eed110", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGY5ODQ1MzQyNzBmN2NlNGMwYzM0MDM5MjlkM2I1NjQ5NGVlZDExMA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-03-30T15:43:59Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-03-30T15:43:59Z"}, "message": "tree-dfa.c (renumber_gimple_stmt_uids): Also number PHIs.\n\n2011-03-30  Richard Guenther  <rguenther@suse.de>\n\n\t* tree-dfa.c (renumber_gimple_stmt_uids): Also number PHIs.\n\t* lto-streamer-out.c (output_function): Do not use\n\trenumber_gimple_stmt_uids.\n\t* lto-streamer-in.c (input_function): Likewise.\n\nFrom-SVN: r171734", "tree": {"sha": "123be862ce33afbae14b31a01f85460d40b297f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/123be862ce33afbae14b31a01f85460d40b297f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8f984534270f7ce4c0c3403929d3b56494eed110", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f984534270f7ce4c0c3403929d3b56494eed110", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f984534270f7ce4c0c3403929d3b56494eed110", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f984534270f7ce4c0c3403929d3b56494eed110/comments", "author": null, "committer": null, "parents": [{"sha": "4f431835313bc7d2c13508e8ed7b465e4c5ad8c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f431835313bc7d2c13508e8ed7b465e4c5ad8c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f431835313bc7d2c13508e8ed7b465e4c5ad8c8"}], "stats": {"total": 31, "additions": 28, "deletions": 3}, "files": [{"sha": "70f0b0a80200099a9de71ef45322ae28765dfe89", "filename": "gcc/lto-streamer-in.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f984534270f7ce4c0c3403929d3b56494eed110/gcc%2Flto-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f984534270f7ce4c0c3403929d3b56494eed110/gcc%2Flto-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-in.c?ref=8f984534270f7ce4c0c3403929d3b56494eed110", "patch": "@@ -1287,7 +1287,16 @@ input_function (tree fn_decl, struct data_in *data_in,\n \n   /* Fix up the call statements that are mentioned in the callgraph\n      edges.  */\n-  renumber_gimple_stmt_uids ();\n+  set_gimple_stmt_max_uid (cfun, 0);\n+  FOR_ALL_BB (bb)\n+    {\n+      gimple_stmt_iterator gsi;\n+      for (gsi = gsi_start_bb (bb); !gsi_end_p (gsi); gsi_next (&gsi))\n+\t{\n+\t  gimple stmt = gsi_stmt (gsi);\n+\t  gimple_set_uid (stmt, inc_gimple_stmt_max_uid (cfun));\n+\t}\n+    }\n   stmts = (gimple *) xcalloc (gimple_stmt_max_uid (fn), sizeof (gimple));\n   FOR_ALL_BB (bb)\n     {"}, {"sha": "d740d03b7385c8a52a199d0654827211e3b0779e", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f984534270f7ce4c0c3403929d3b56494eed110/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f984534270f7ce4c0c3403929d3b56494eed110/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=8f984534270f7ce4c0c3403929d3b56494eed110", "patch": "@@ -1981,8 +1981,19 @@ output_function (struct cgraph_node *node)\n   /* We will renumber the statements.  The code that does this uses\n      the same ordering that we use for serializing them so we can use\n      the same code on the other end and not have to write out the\n-     statement numbers.  */\n-  renumber_gimple_stmt_uids ();\n+     statement numbers.  We do not assign UIDs to PHIs here because\n+     virtual PHIs get re-computed on-the-fly which would make numbers\n+     inconsistent.  */\n+  set_gimple_stmt_max_uid (cfun, 0);\n+  FOR_ALL_BB (bb)\n+    {\n+      gimple_stmt_iterator gsi;\n+      for (gsi = gsi_start_bb (bb); !gsi_end_p (gsi); gsi_next (&gsi))\n+\t{\n+\t  gimple stmt = gsi_stmt (gsi);\n+\t  gimple_set_uid (stmt, inc_gimple_stmt_max_uid (cfun));\n+\t}\n+    }\n \n   /* Output the code for the function.  */\n   FOR_ALL_BB_FN (bb, fn)"}, {"sha": "70e3c1d35cdfc7dd0cccda6f5af5216f12af6622", "filename": "gcc/tree-dfa.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f984534270f7ce4c0c3403929d3b56494eed110/gcc%2Ftree-dfa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f984534270f7ce4c0c3403929d3b56494eed110/gcc%2Ftree-dfa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-dfa.c?ref=8f984534270f7ce4c0c3403929d3b56494eed110", "patch": "@@ -151,6 +151,11 @@ renumber_gimple_stmt_uids (void)\n   FOR_ALL_BB (bb)\n     {\n       gimple_stmt_iterator bsi;\n+      for (bsi = gsi_start_phis (bb); !gsi_end_p (bsi); gsi_next (&bsi))\n+\t{\n+\t  gimple stmt = gsi_stmt (bsi);\n+\t  gimple_set_uid (stmt, inc_gimple_stmt_max_uid (cfun));\n+\t}\n       for (bsi = gsi_start_bb (bb); !gsi_end_p (bsi); gsi_next (&bsi))\n \t{\n \t  gimple stmt = gsi_stmt (bsi);"}]}