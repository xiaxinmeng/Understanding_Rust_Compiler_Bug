{"sha": "e162e288ecf5a5eb16bd6c0cb432afa233e1e10b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTE2MmUyODhlY2Y1YTVlYjE2YmQ2YzBjYjQzMmFmYTIzM2UxZTEwYg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-08-21T05:29:30Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-08-21T05:29:30Z"}, "message": "mksysinfo: Fix syscall.F_GETLK and friends for 32-bit x86.\n\nFrom-SVN: r190554", "tree": {"sha": "10f9c14d152864cb89dcfac9fdc51411ce3050d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/10f9c14d152864cb89dcfac9fdc51411ce3050d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e162e288ecf5a5eb16bd6c0cb432afa233e1e10b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e162e288ecf5a5eb16bd6c0cb432afa233e1e10b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e162e288ecf5a5eb16bd6c0cb432afa233e1e10b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e162e288ecf5a5eb16bd6c0cb432afa233e1e10b/comments", "author": null, "committer": null, "parents": [{"sha": "bb51debe06ed605988ea0a49a417ace62de47725", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb51debe06ed605988ea0a49a417ace62de47725", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb51debe06ed605988ea0a49a417ace62de47725"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "315d60cc39d881c8f4aafdfe448b4dbd81647124", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e162e288ecf5a5eb16bd6c0cb432afa233e1e10b/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e162e288ecf5a5eb16bd6c0cb432afa233e1e10b/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=e162e288ecf5a5eb16bd6c0cb432afa233e1e10b", "patch": "@@ -211,6 +211,16 @@ if ! grep '^const O_CLOEXEC' ${OUT} >/dev/null 2>&1; then\n   echo \"const O_CLOEXEC = 0\" >> ${OUT}\n fi\n \n+# These flags can be lost on i386 GNU/Linux when using\n+# -D_FILE_OFFSET_BITS=64, because we see \"#define F_SETLK F_SETLK64\"\n+# before we see the definition of F_SETLK64.\n+for flag in F_GETLK F_SETLK F_SETLKW; do\n+  if ! grep \"^const ${flag} \" ${OUT} >/dev/null 2>&1 \\\n+      && grep \"^const ${flag}64 \" ${OUT} >/dev/null 2>&1; then\n+    echo \"const ${flag} = ${flag}64\" >> ${OUT}\n+  fi\n+done\n+\n # The signal numbers.\n grep '^const _SIG[^_]' gen-sysinfo.go | \\\n   grep -v '^const _SIGEV_' | \\"}]}