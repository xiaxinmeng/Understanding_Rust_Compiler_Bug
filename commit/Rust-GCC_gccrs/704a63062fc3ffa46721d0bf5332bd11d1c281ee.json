{"sha": "704a63062fc3ffa46721d0bf5332bd11d1c281ee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzA0YTYzMDYyZmMzZmZhNDY3MjFkMGJmNTMzMmJkMTFkMWMyODFlZQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1997-08-27T23:02:19Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-08-27T23:02:19Z"}, "message": "Patch from Richard Henderson to fix alpha-linux support.\n\n\t* alpha/elf.h (LINK_SPEC): Conditionalize on USE_GNULIBC_1.\n\t* config.guess: Recognize alpha-linux-gnulibc1.\n\t* configure.in (alpha-*-linux-gnulibc1): New target.\n\t(alpha-*-linux-gnu*): Don't build crtbegin/end.\n\nFrom-SVN: r14974", "tree": {"sha": "c337bb8714a610481bba532beabda27a93984978", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c337bb8714a610481bba532beabda27a93984978"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/704a63062fc3ffa46721d0bf5332bd11d1c281ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/704a63062fc3ffa46721d0bf5332bd11d1c281ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/704a63062fc3ffa46721d0bf5332bd11d1c281ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/704a63062fc3ffa46721d0bf5332bd11d1c281ee/comments", "author": null, "committer": null, "parents": [{"sha": "f345de42fc8437a8742aa40cf865de357b21e37f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f345de42fc8437a8742aa40cf865de357b21e37f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f345de42fc8437a8742aa40cf865de357b21e37f"}], "stats": {"total": 46, "additions": 40, "deletions": 6}, "files": [{"sha": "281d6fa6ce3cac5f81d65690472a73c3f746beba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/704a63062fc3ffa46721d0bf5332bd11d1c281ee/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/704a63062fc3ffa46721d0bf5332bd11d1c281ee/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=704a63062fc3ffa46721d0bf5332bd11d1c281ee", "patch": "@@ -1,3 +1,10 @@\n+Wed Aug 27 15:49:12 1997  Richard Henderson  <rth@cygnus.com>\n+\n+\t* alpha/elf.h (LINK_SPEC): Conditionalize on USE_GNULIBC_1.\n+\t* config.guess: Recognize alpha-linux-gnulibc1.\n+\t* configure.in (alpha-*-linux-gnulibc1): New target.\n+\t(alpha-*-linux-gnu*): Don't build crtbegin/end.\n+\n Wed Aug 27 11:52:58 1997  Jim Wilson  <wilson@cygnus.com>\n \n \t* m68k.md (iorsi3_internal): Readd ! TARGET_5200 check lost in"}, {"sha": "1448103304ddd12d774d4d372c4bd9617f0f3237", "filename": "gcc/config.guess", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/704a63062fc3ffa46721d0bf5332bd11d1c281ee/gcc%2Fconfig.guess", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/704a63062fc3ffa46721d0bf5332bd11d1c281ee/gcc%2Fconfig.guess", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.guess?ref=704a63062fc3ffa46721d0bf5332bd11d1c281ee", "patch": "@@ -506,6 +506,7 @@ EOF\n \t\tret \\$31,(\\$26),1\n \t\t.end main\n EOF\n+\t\tLIBC=\"\"\n \t\t${CC-cc} dummy.s -o dummy 2>/dev/null\n \t\tif test \"$?\" = 0 ; then\n \t\t\t./dummy\n@@ -516,10 +517,16 @@ EOF\n \t\t\t2)\t\n \t\t\t\t\tUNAME_MACHINE=\"alphaev56\"\n \t\t\t\t;;\t\n-\t\tesac\t\n-\t  fi\t\n-\t  rm -f dummy.s dummy\n-\t  echo ${UNAME_MACHINE}-unknown-linux-gnu ; exit 0\n+\t\t\tesac\t\n+\n+\t\t\tobjdump --private-headers dummy | \\\n+\t\t\t  grep ld.so.1 > /dev/null\n+\t\t\tif test \"$?\" = 0 ; then\n+\t\t\t\tLIBC=\"libc1\"\n+\t\t\tfi\n+\t\tfi\t\n+\t\trm -f dummy.s dummy\n+\t\techo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC} ; exit 0\n \telif test \"${UNAME_MACHINE}\" = \"mips\" ; then\n \t  cat >dummy.c <<EOF\n main(argc, argv)"}, {"sha": "63c9f1ba8643e1351229f9b08d0a76271cf5a130", "filename": "gcc/config/alpha/elf.h", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/704a63062fc3ffa46721d0bf5332bd11d1c281ee/gcc%2Fconfig%2Falpha%2Felf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/704a63062fc3ffa46721d0bf5332bd11d1c281ee/gcc%2Fconfig%2Falpha%2Felf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Felf.h?ref=704a63062fc3ffa46721d0bf5332bd11d1c281ee", "patch": "@@ -39,13 +39,23 @@ Currently only Linux uses this. */\n -Asystem(linux) -Acpu(alpha) -Amachine(alpha) -D__ELF__\"\n \n #undef LINK_SPEC\n+#ifdef USE_GNULIBC_1\n+#define LINK_SPEC \"-m elf64alpha -G 8 %{O*:-O3} %{!O*:-O1}\t\\\n+  %{shared:-shared}\t\t\t\t\t\t\\\n+  %{!shared:\t\t\t\t\t\t\t\\\n+    %{!static:\t\t\t\t\t\t\t\\\n+      %{rdynamic:-export-dynamic}\t\t\t\t\\\n+      %{!dynamic-linker:-dynamic-linker /lib/ld.so.1}}\t\t\\\n+    %{static:-static}}\"\n+#else\n #define LINK_SPEC \"-m elf64alpha -G 8 %{O*:-O3} %{!O*:-O1}\t\\\n   %{shared:-shared}\t\t\t\t\t\t\\\n   %{!shared:\t\t\t\t\t\t\t\\\n     %{!static:\t\t\t\t\t\t\t\\\n       %{rdynamic:-export-dynamic}\t\t\t\t\\\n       %{!dynamic-linker:-dynamic-linker /lib/ld-linux.so.2}}\t\\\n     %{static:-static}}\"\n+#endif\n \n /* Output at beginning of assembler file.  */\n "}, {"sha": "c99c7be48f5e03bdb5438ec10ab91a25e45aaf22", "filename": "gcc/configure.in", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/704a63062fc3ffa46721d0bf5332bd11d1c281ee/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/704a63062fc3ffa46721d0bf5332bd11d1c281ee/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=704a63062fc3ffa46721d0bf5332bd11d1c281ee", "patch": "@@ -273,15 +273,25 @@ for machine in $build $host $target; do\n \t\tfixincludes=Makefile.in\n \t\tgas=yes gnu_ld=yes\n \t\t;;\n+\talpha*-*-linux-gnulibc1*)\n+\t\ttm_file=\"${tm_file} alpha/linux.h alpha/elf.h\"\n+\t\txm_file=\"${xm_file} alpha/xm-linux.h\"\n+\t\ttarget_cpu_default=\"MASK_GAS\"\n+\t\ttmake_file=\"t-linux t-linux-gnulibc1 alpha/t-linux\"\n+\t\txmake_file=none\n+\t\tfixincludes=Makefile.in\n+\t\tgas=yes gnu_ld=yes\n+ \t\tif [[ x$enable_threads = xyes ]]; then\n+ \t\t\tthread_file='posix'\n+ \t\tfi\n+\t\t;;\n \talpha*-*-linux-gnu*)\n \t\ttm_file=\"${tm_file} alpha/linux.h alpha/elf.h\"\n \t\txm_file=\"${xm_file} alpha/xm-linux.h\"\n \t\ttarget_cpu_default=\"MASK_GAS\"\n-\t\tgas=no\n \t\ttmake_file=\"t-linux alpha/t-linux\"\n \t\txmake_file=none\n \t\tfixincludes=Makefile.in\n-\t\textra_parts=\"crtbegin.o crtbeginS.o crtend.o crtendS.o\"\n \t\tgas=yes gnu_ld=yes\n  \t\tif [[ x$enable_threads = xyes ]]; then\n  \t\t\tthread_file='posix'"}]}