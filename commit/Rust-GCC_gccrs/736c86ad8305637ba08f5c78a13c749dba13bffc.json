{"sha": "736c86ad8305637ba08f5c78a13c749dba13bffc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzM2Yzg2YWQ4MzA1NjM3YmEwOGY1Yzc4YTEzYzc0OWRiYTEzYmZmYw==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@redhat.com", "date": "2005-02-25T21:12:34Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2005-02-25T21:12:34Z"}, "message": "re PR tree-optimization/20204 (miscompilation of asm-declared registers)\n\n\n\tPR tree-optimization/20204\n\t* tree-into-ssa.c (insert_phi_nodes_for): Do not use\n\tREWRITE_THIS_STMT markers on PHI nodes.\n\t(rewrite_initialize_block): Likewise.\n\n\ntestsuite/ChangeLog\n\n\tPR tree-optimization/20204\n\t* testsuite/gcc.dg/pr20204.c: New test.\n\nFrom-SVN: r95547", "tree": {"sha": "be437caafd0dbf5b5caf2ef3531ec09c179ee715", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be437caafd0dbf5b5caf2ef3531ec09c179ee715"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/736c86ad8305637ba08f5c78a13c749dba13bffc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/736c86ad8305637ba08f5c78a13c749dba13bffc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/736c86ad8305637ba08f5c78a13c749dba13bffc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/736c86ad8305637ba08f5c78a13c749dba13bffc/comments", "author": null, "committer": null, "parents": [{"sha": "3bf4da728f7ccdea3600cb6ab1465cd0d5e43fe5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bf4da728f7ccdea3600cb6ab1465cd0d5e43fe5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3bf4da728f7ccdea3600cb6ab1465cd0d5e43fe5"}], "stats": {"total": 52, "additions": 47, "deletions": 5}, "files": [{"sha": "b45dc87babf4bf89af498a79763d6d16d82430c4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/736c86ad8305637ba08f5c78a13c749dba13bffc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/736c86ad8305637ba08f5c78a13c749dba13bffc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=736c86ad8305637ba08f5c78a13c749dba13bffc", "patch": "@@ -1,3 +1,10 @@\n+2005-02-25  Diego Novillo  <dnovillo@redhat.com>\n+\n+\tPR tree-optimization/20204\n+\t* tree-into-ssa.c (insert_phi_nodes_for): Do not use\n+\tREWRITE_THIS_STMT markers on PHI nodes.\n+\t(rewrite_initialize_block): Likewise.\n+\n 2005-02-25  Mark Mitchell  <mark@codesourcery.com>\n \n \t* version.c (version_string): Update to 4.1."}, {"sha": "52104138021f87c123f412f31b273e1fe889079d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/736c86ad8305637ba08f5c78a13c749dba13bffc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/736c86ad8305637ba08f5c78a13c749dba13bffc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=736c86ad8305637ba08f5c78a13c749dba13bffc", "patch": "@@ -1,3 +1,8 @@\n+2005-02-25  Diego Novillo  <dnovillo@redhat.com>\n+\n+\tPR tree-optimization/20204\n+\t* testsuite/gcc.dg/pr20204.c: New test.\n+\n 2005-02-24  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/20196"}, {"sha": "ad85af5baa3cd17c6ebb4bae69092fe3cea5775c", "filename": "gcc/testsuite/gcc.dg/pr20204.c", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/736c86ad8305637ba08f5c78a13c749dba13bffc/gcc%2Ftestsuite%2Fgcc.dg%2Fpr20204.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/736c86ad8305637ba08f5c78a13c749dba13bffc/gcc%2Ftestsuite%2Fgcc.dg%2Fpr20204.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr20204.c?ref=736c86ad8305637ba08f5c78a13c749dba13bffc", "patch": "@@ -0,0 +1,34 @@\n+/* { dg-do run { target i?86-*-* } } */\n+/* { dg-options \"-O2\" } */\n+\n+void *x (void *pdst, const void *psrc, unsigned int pn)\n+{\n+  register void *return_dst = pdst;\n+  register unsigned char *dst = pdst;\n+  register unsigned const char *src = psrc;\n+  register int n __asm__ (\"ebx\") = pn;\n+\n+  if (src < dst && dst < src + n)\n+    {\n+      src += n;\n+      dst += n;\n+      while (n--)\n+        *--dst = *--src;\n+      return return_dst;\n+    }\n+\n+  while (n >= 16) n--;\n+\n+  return return_dst;\n+}\n+extern void abort ();\n+extern void exit (int);\n+char xx[30] = \"abc\";\n+int main (void)\n+{\n+  char yy[30] = \"aab\";\n+\n+  if (x (xx + 1, xx, 2) != xx + 1 || memcmp (xx, yy, sizeof (yy)) != 0)\n+    abort ();\n+  exit (0);\n+}"}, {"sha": "271c1ff89381c40ec9d3c844fb0c0ea46dbae2e4", "filename": "gcc/tree-into-ssa.c", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/736c86ad8305637ba08f5c78a13c749dba13bffc/gcc%2Ftree-into-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/736c86ad8305637ba08f5c78a13c749dba13bffc/gcc%2Ftree-into-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-into-ssa.c?ref=736c86ad8305637ba08f5c78a13c749dba13bffc", "patch": "@@ -591,9 +591,6 @@ insert_phi_nodes_for (tree var, bitmap phi_insertion_points)\n \t  FOR_EACH_EDGE (e, ei, bb->preds)\n \t    add_phi_arg (phi, var, e);\n \t}\n-\n-      /* Mark this PHI node as interesting for the rename process.  */\n-      REWRITE_THIS_STMT (phi) = 1;\n     }\n }\n \n@@ -745,8 +742,7 @@ rewrite_initialize_block (struct dom_walk_data *walk_data ATTRIBUTE_UNUSED,\n   for (phi = phi_nodes (bb); phi; phi = PHI_CHAIN (phi))\n     {\n       tree result = PHI_RESULT (phi);\n-      if (REWRITE_THIS_STMT (phi))\n-\tregister_new_def (result, &block_defs_stack);\n+      register_new_def (result, &block_defs_stack);\n     }\n }\n "}]}