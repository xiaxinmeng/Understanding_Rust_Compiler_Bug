{"sha": "faae4ae73f955ae9049f540fc7199e583a1d781e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmFhZTRhZTczZjk1NWFlOTA0OWY1NDBmYzcxOTllNTgzYTFkNzgxZQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2008-09-18T20:27:36Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2008-09-18T20:27:36Z"}, "message": "re PR target/37394 (Segfault in ia64_variable_issue with -O -fschedule-insns2)\n\ngcc/\n\n2008-09-18  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR target/37394\n\t* config/ia64/ia64.c (ia64_optimization_options): Move\n\tchecking and setting flag_schedule_insns_after_reload and\n\tia64_flag_schedule_insns2 back to ...\n\t(ia64_override_options): Here.\n\ngcc/testsuite/\n\n2008-09-18  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR target/37394\n\t* g++.dg/other/pr37394.C: New.\n\nFrom-SVN: r140475", "tree": {"sha": "e53849279f75848fa5fc0e980eb1299b57e6c9d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e53849279f75848fa5fc0e980eb1299b57e6c9d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/faae4ae73f955ae9049f540fc7199e583a1d781e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/faae4ae73f955ae9049f540fc7199e583a1d781e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/faae4ae73f955ae9049f540fc7199e583a1d781e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/faae4ae73f955ae9049f540fc7199e583a1d781e/comments", "author": null, "committer": null, "parents": [{"sha": "334e912a93187986aa51b980b30b50b42fa109c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/334e912a93187986aa51b980b30b50b42fa109c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/334e912a93187986aa51b980b30b50b42fa109c5"}], "stats": {"total": 43, "additions": 32, "deletions": 11}, "files": [{"sha": "37170cca50a74821164f958038dfae3e4942ee07", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/faae4ae73f955ae9049f540fc7199e583a1d781e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/faae4ae73f955ae9049f540fc7199e583a1d781e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=faae4ae73f955ae9049f540fc7199e583a1d781e", "patch": "@@ -1,3 +1,11 @@\n+2008-09-18  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/37394\n+\t* config/ia64/ia64.c (ia64_optimization_options): Move\n+\tchecking and setting flag_schedule_insns_after_reload and\n+\tia64_flag_schedule_insns2 back to ...\n+\t(ia64_override_options): Here.\n+\n 2008-09-18  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n \tPR rtl-opt/37451"}, {"sha": "81767bbf7c5b6d4cea1976914518cac571425526", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/faae4ae73f955ae9049f540fc7199e583a1d781e/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/faae4ae73f955ae9049f540fc7199e583a1d781e/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=faae4ae73f955ae9049f540fc7199e583a1d781e", "patch": "@@ -5233,6 +5233,9 @@ ia64_override_options (void)\n       TARGET_INLINE_SQRT = INL_MAX_THR;\n     }\n \n+  ia64_flag_schedule_insns2 = flag_schedule_insns_after_reload;\n+  flag_schedule_insns_after_reload = 0;\n+\n   ia64_section_threshold = g_switch_set ? g_switch_value : IA64_DEFAULT_GVALUE;\n \n   init_machine_status = ia64_init_machine_status;\n@@ -9922,13 +9925,6 @@ void\n ia64_optimization_options (int level ATTRIBUTE_UNUSED,\n                            int size ATTRIBUTE_UNUSED)\n {\n-  /* Disable the second machine independent scheduling pass and use one for the\n-     IA-64.  This needs to be here instead of in OVERRIDE_OPTIONS because this\n-     is done whenever the optimization is changed via #pragma GCC optimize or\n-     attribute((optimize(...))).  */\n-  ia64_flag_schedule_insns2 = flag_schedule_insns_after_reload;\n-  flag_schedule_insns_after_reload = 0;\n-\n   /* Let the scheduler form additional regions.  */\n   set_param_value (\"max-sched-extend-regions-iters\", 2);\n "}, {"sha": "66f16b1e2d0df0145787cb0d0c49cc82b35ed5cd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/faae4ae73f955ae9049f540fc7199e583a1d781e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/faae4ae73f955ae9049f540fc7199e583a1d781e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=faae4ae73f955ae9049f540fc7199e583a1d781e", "patch": "@@ -1,10 +1,15 @@\n+2008-09-18  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/37394\n+\t* g++.dg/other/pr37394.C: New.\n+\n 2008-09-18  Paul Thomas  <pault@gcc.gnu.org>\n \n-       PR fortran/35945\n-       * gfortran.dg/host_assoc_types_2.f90: New test.\n+\tPR fortran/35945\n+\t* gfortran.dg/host_assoc_types_2.f90: New test.\n \n-       PR fortran/36700\n-       * gfortran.dg/host_assoc_call_2.f90: New test.\n+\tPR fortran/36700\n+\t* gfortran.dg/host_assoc_call_2.f90: New test.\n \n 2008-09-18  DJ Delorie  <dj@redhat.com>\n "}, {"sha": "7b5772e8efbf22737d27dd496be73160b29c4e85", "filename": "gcc/testsuite/g++.dg/other/pr37394.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/faae4ae73f955ae9049f540fc7199e583a1d781e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr37394.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/faae4ae73f955ae9049f540fc7199e583a1d781e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr37394.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr37394.C?ref=faae4ae73f955ae9049f540fc7199e583a1d781e", "patch": "@@ -0,0 +1,12 @@\n+// Origin: Martin Michlmayr <tbm@cyrius.com>\n+// { dg-do compile { target ia64-*-* } }\n+// { dg-options \"-O -fschedule-insns2\" }\n+\n+struct _Words\n+{\n+  void *_M_pword;\n+  _Words ():\n+   _M_pword (0)\n+  {\n+  }\n+} _M_word_zero;"}]}