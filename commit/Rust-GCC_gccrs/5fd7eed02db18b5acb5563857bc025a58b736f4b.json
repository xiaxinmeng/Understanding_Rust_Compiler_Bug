{"sha": "5fd7eed02db18b5acb5563857bc025a58b736f4b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWZkN2VlZDAyZGIxOGI1YWNiNTU2Mzg1N2JjMDI1YTU4YjczNmY0Yg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-07-28T18:01:25Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-07-28T18:01:25Z"}, "message": "(shift_operand): New function.\n\nFrom-SVN: r5027", "tree": {"sha": "945350097588db6224ae1bd3baed6ad956fe99f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/945350097588db6224ae1bd3baed6ad956fe99f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5fd7eed02db18b5acb5563857bc025a58b736f4b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5fd7eed02db18b5acb5563857bc025a58b736f4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5fd7eed02db18b5acb5563857bc025a58b736f4b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5fd7eed02db18b5acb5563857bc025a58b736f4b/comments", "author": null, "committer": null, "parents": [{"sha": "42d93ca6b2075b50914ac89960d0af0c2db81387", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42d93ca6b2075b50914ac89960d0af0c2db81387", "html_url": "https://github.com/Rust-GCC/gccrs/commit/42d93ca6b2075b50914ac89960d0af0c2db81387"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "ae0c45e2d339ad7b401a60417019ee40e4697f09", "filename": "gcc/config/sparc/sparc.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5fd7eed02db18b5acb5563857bc025a58b736f4b/gcc%2Fconfig%2Fsparc%2Fsparc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5fd7eed02db18b5acb5563857bc025a58b736f4b/gcc%2Fconfig%2Fsparc%2Fsparc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.c?ref=5fd7eed02db18b5acb5563857bc025a58b736f4b", "patch": "@@ -432,6 +432,19 @@ arith_double_operand (op, mode)\n \t      && (unsigned) (INTVAL (op) + 0x1000) < 0x2000));\n }\n \n+/* Return true if OP is a register, or is a CONST_INT that can fit in a 5\n+   bit unsigned immediate field.  This is an acceptable SImode operand for\n+   the count field of shift instructions.  */\n+\n+int\n+shift_operand (op, mode)\n+     rtx op;\n+     enum machine_mode mode;\n+{\n+  return (register_operand (op, mode)\n+\t  || (GET_CODE (op) == CONST_INT && (unsigned) (INTVAL (op)) < 32));\n+}\n+\n /* Return truth value of whether OP is a integer which fits the\n    range constraining immediate operands in most three-address insns,\n    which have a 13 bit immediate field.  */"}, {"sha": "65357a9dbeea9501e046a211574d776795153ada", "filename": "gcc/config/sparc/sparc.md", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5fd7eed02db18b5acb5563857bc025a58b736f4b/gcc%2Fconfig%2Fsparc%2Fsparc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5fd7eed02db18b5acb5563857bc025a58b736f4b/gcc%2Fconfig%2Fsparc%2Fsparc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.md?ref=5fd7eed02db18b5acb5563857bc025a58b736f4b", "patch": "@@ -2538,21 +2538,21 @@\n (define_insn \"ashlsi3\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n \t(ashift:SI (match_operand:SI 1 \"register_operand\" \"r\")\n-\t\t   (match_operand:SI 2 \"arith_operand\" \"rI\")))]\n+\t\t   (match_operand:SI 2 \"shift_operand\" \"rI\")))]\n   \"\"\n   \"sll %1,%2,%0\")\n \n (define_insn \"ashrsi3\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n \t(ashiftrt:SI (match_operand:SI 1 \"register_operand\" \"r\")\n-\t\t     (match_operand:SI 2 \"arith_operand\" \"rI\")))]\n+\t\t     (match_operand:SI 2 \"shift_operand\" \"rI\")))]\n   \"\"\n   \"sra %1,%2,%0\")\n \n (define_insn \"lshrsi3\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n \t(lshiftrt:SI (match_operand:SI 1 \"register_operand\" \"r\")\n-\t\t     (match_operand:SI 2 \"arith_operand\" \"rI\")))]\n+\t\t     (match_operand:SI 2 \"shift_operand\" \"rI\")))]\n   \"\"\n   \"srl %1,%2,%0\")\n \f"}]}