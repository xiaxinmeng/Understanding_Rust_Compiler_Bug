{"sha": "adef5d4f4eee1394c862cafc4cb33395af68bc4a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWRlZjVkNGY0ZWVlMTM5NGM4NjJjYWZjNGNiMzMzOTVhZjY4YmM0YQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2019-06-25T11:50:12Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2019-06-25T11:50:12Z"}, "message": "Remove dead code in df-scan.c (PR tree-optimization/90978).\n\n2019-06-25  Martin Liska  <mliska@suse.cz>\n\n\tPR tree-optimization/90978\n\t* df-scan.c (df_update_entry_block_defs): Remove dead else\n\tbranch.\n\t(df_update_exit_block_uses): Likewise.\n\nFrom-SVN: r272651", "tree": {"sha": "02f6fcfba0eb88baeda1d4aed30c03e59b05b6bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/02f6fcfba0eb88baeda1d4aed30c03e59b05b6bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/adef5d4f4eee1394c862cafc4cb33395af68bc4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adef5d4f4eee1394c862cafc4cb33395af68bc4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adef5d4f4eee1394c862cafc4cb33395af68bc4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adef5d4f4eee1394c862cafc4cb33395af68bc4a/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e5ce4cbc72adbfc8284ed6998b7d36c9f50c1ef6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e5ce4cbc72adbfc8284ed6998b7d36c9f50c1ef6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e5ce4cbc72adbfc8284ed6998b7d36c9f50c1ef6"}], "stats": {"total": 51, "additions": 19, "deletions": 32}, "files": [{"sha": "231bfe710358500f3dbcb20ccb7aa342f3e1aa6b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adef5d4f4eee1394c862cafc4cb33395af68bc4a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adef5d4f4eee1394c862cafc4cb33395af68bc4a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=adef5d4f4eee1394c862cafc4cb33395af68bc4a", "patch": "@@ -1,3 +1,10 @@\n+2019-06-25  Martin Liska  <mliska@suse.cz>\n+\n+\tPR tree-optimization/90978\n+\t* df-scan.c (df_update_entry_block_defs): Remove dead else\n+\tbranch.\n+\t(df_update_exit_block_uses): Likewise.\n+\n 2019-06-25  Kwok Cheung Yeung  <kcy@codesourcery.com>\n             Andrew Stubbs  <ams@codesourcery.com>\n "}, {"sha": "2eea149e4585593d76cc49c9525761313fab6cdb", "filename": "gcc/df-scan.c", "status": "modified", "additions": 12, "deletions": 32, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adef5d4f4eee1394c862cafc4cb33395af68bc4a/gcc%2Fdf-scan.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adef5d4f4eee1394c862cafc4cb33395af68bc4a/gcc%2Fdf-scan.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdf-scan.c?ref=adef5d4f4eee1394c862cafc4cb33395af68bc4a", "patch": "@@ -3601,23 +3601,13 @@ df_update_entry_block_defs (void)\n \n   auto_bitmap refs (&df_bitmap_obstack);\n   df_get_entry_block_def_set (refs);\n-  if (df->entry_block_defs)\n+  gcc_assert (df->entry_block_defs);\n+  if (!bitmap_equal_p (df->entry_block_defs, refs))\n     {\n-      if (!bitmap_equal_p (df->entry_block_defs, refs))\n-\t{\n-\t  struct df_scan_bb_info *bb_info = df_scan_get_bb_info (ENTRY_BLOCK);\n-\t  df_ref_chain_delete_du_chain (bb_info->artificial_defs);\n-\t  df_ref_chain_delete (bb_info->artificial_defs);\n-\t  bb_info->artificial_defs = NULL;\n-\t  changed = true;\n-\t}\n-    }\n-  else\n-    {\n-      struct df_scan_problem_data *problem_data\n-\t= (struct df_scan_problem_data *) df_scan->problem_data;\n-\tgcc_unreachable ();\n-      df->entry_block_defs = BITMAP_ALLOC (&problem_data->reg_bitmaps);\n+      struct df_scan_bb_info *bb_info = df_scan_get_bb_info (ENTRY_BLOCK);\n+      df_ref_chain_delete_du_chain (bb_info->artificial_defs);\n+      df_ref_chain_delete (bb_info->artificial_defs);\n+      bb_info->artificial_defs = NULL;\n       changed = true;\n     }\n \n@@ -3775,23 +3765,13 @@ df_update_exit_block_uses (void)\n \n   auto_bitmap refs (&df_bitmap_obstack);\n   df_get_exit_block_use_set (refs);\n-  if (df->exit_block_uses)\n+  gcc_assert (df->exit_block_uses);\n+  if (!bitmap_equal_p (df->exit_block_uses, refs))\n     {\n-      if (!bitmap_equal_p (df->exit_block_uses, refs))\n-\t{\n-\t  struct df_scan_bb_info *bb_info = df_scan_get_bb_info (EXIT_BLOCK);\n-\t  df_ref_chain_delete_du_chain (bb_info->artificial_uses);\n-\t  df_ref_chain_delete (bb_info->artificial_uses);\n-\t  bb_info->artificial_uses = NULL;\n-\t  changed = true;\n-\t}\n-    }\n-  else\n-    {\n-      struct df_scan_problem_data *problem_data\n-\t= (struct df_scan_problem_data *) df_scan->problem_data;\n-\tgcc_unreachable ();\n-      df->exit_block_uses = BITMAP_ALLOC (&problem_data->reg_bitmaps);\n+      struct df_scan_bb_info *bb_info = df_scan_get_bb_info (EXIT_BLOCK);\n+      df_ref_chain_delete_du_chain (bb_info->artificial_uses);\n+      df_ref_chain_delete (bb_info->artificial_uses);\n+      bb_info->artificial_uses = NULL;\n       changed = true;\n     }\n "}]}