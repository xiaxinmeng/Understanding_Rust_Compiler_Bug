{"sha": "87d33b419bb6dc40816527b553478d482adf69ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODdkMzNiNDE5YmI2ZGM0MDgxNjUyN2I1NTM0NzhkNDgyYWRmNjllYw==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2005-05-31T18:31:55Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2005-05-31T18:31:55Z"}, "message": "PR libstdc++/20534 (contd)\n\n2005-05-31  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR libstdc++/20534 (contd)\n\t* include/debug/macros.h: Add _GLIBCXX_DEBUG_ABORT, using\n\t__gnu_debug::__fancy_abort.\n\t* src/debug.cc: Define the latter.\n\t* include/debug/debug.h: Use _GLIBCXX_DEBUG_ABORT instead of\n\tassert.\n\t* config/linker-map.gnu (__gnu_debug::__fancy_abort): Add.\n\nFrom-SVN: r100405", "tree": {"sha": "07fb37b8945139d4509207d3e5627f874b25c841", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/07fb37b8945139d4509207d3e5627f874b25c841"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/87d33b419bb6dc40816527b553478d482adf69ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87d33b419bb6dc40816527b553478d482adf69ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87d33b419bb6dc40816527b553478d482adf69ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87d33b419bb6dc40816527b553478d482adf69ec/comments", "author": null, "committer": null, "parents": [{"sha": "8bd46447b3669450cb22678ae1b226d3c3aba576", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bd46447b3669450cb22678ae1b226d3c3aba576", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bd46447b3669450cb22678ae1b226d3c3aba576"}], "stats": {"total": 41, "additions": 33, "deletions": 8}, "files": [{"sha": "4660ce9693e8c7956b8f53ac40ae65b782129e88", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87d33b419bb6dc40816527b553478d482adf69ec/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87d33b419bb6dc40816527b553478d482adf69ec/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=87d33b419bb6dc40816527b553478d482adf69ec", "patch": "@@ -1,3 +1,13 @@\n+2005-05-31  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR libstdc++/20534 (contd)\n+\t* include/debug/macros.h: Add _GLIBCXX_DEBUG_ABORT, using\n+\t__gnu_debug::__fancy_abort.\n+\t* src/debug.cc: Define the latter.\n+\t* include/debug/debug.h: Use _GLIBCXX_DEBUG_ABORT instead of\n+\tassert.\n+\t* config/linker-map.gnu (__gnu_debug::__fancy_abort): Add.\n+\n 2005-05-30  Paolo Carlini  <pcarlini@suse.de>\n \n \t* include/std/std_complex.h (log(const complex<_Tp>&)): When"}, {"sha": "a9d20abe21e798d3a6efceaaedc83f6ea922a27a", "filename": "libstdc++-v3/config/linker-map.gnu", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87d33b419bb6dc40816527b553478d482adf69ec/libstdc%2B%2B-v3%2Fconfig%2Flinker-map.gnu", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87d33b419bb6dc40816527b553478d482adf69ec/libstdc%2B%2B-v3%2Fconfig%2Flinker-map.gnu", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Flinker-map.gnu?ref=87d33b419bb6dc40816527b553478d482adf69ec", "patch": "@@ -310,6 +310,7 @@ GLIBCXX_3.4.5 {\n     _ZNSt8ios_base17_M_call_callbacksENS_5eventE;\n     _ZNSt8ios_base20_M_dispose_callbacksEv;\n     _ZNSt6locale5facet13_S_get_c_nameEv;\n+    _ZN11__gnu_debug13__fancy_abortEPKciS1_S1_;\n \n } GLIBCXX_3.4.4;\n "}, {"sha": "7cd08cdeca03276e0ba5d68c33a69784468941e6", "filename": "libstdc++-v3/include/debug/debug.h", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87d33b419bb6dc40816527b553478d482adf69ec/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fdebug.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87d33b419bb6dc40816527b553478d482adf69ec/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fdebug.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fdebug.h?ref=87d33b419bb6dc40816527b553478d482adf69ec", "patch": "@@ -41,15 +41,10 @@\n \n #ifdef _GLIBCXX_DEBUG\n #  include <debug/macros.h>\n-\n-// The debug mode requires assert functionality, but keep this include\n-// conditionalized, so that non-debug use doesn't mandate exposure to the\n-// assert macro.\n-#  include <cassert> \n-#  define _GLIBCXX_DEBUG_ASSERT(_Condition) assert(_Condition)\n+#  define _GLIBCXX_DEBUG_ASSERT(_Condition) _GLIBCXX_DEBUG_ABORT(_Condition)\n \n #  ifdef _GLIBCXX_DEBUG_PEDANTIC\n-#    define _GLIBCXX_DEBUG_PEDASSERT(_Condition) assert(_Condition)\n+#    define _GLIBCXX_DEBUG_PEDASSERT(_Condition) _GLIBCXX_DEBUG_ABORT(_Condition)\n #  else\n #    define _GLIBCXX_DEBUG_PEDASSERT(_Condition)\n #  endif"}, {"sha": "3fe60c9df9a7efa62b2ebb80be68ad65af0267ca", "filename": "libstdc++-v3/include/debug/macros.h", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87d33b419bb6dc40816527b553478d482adf69ec/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fmacros.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87d33b419bb6dc40816527b553478d482adf69ec/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fmacros.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fmacros.h?ref=87d33b419bb6dc40816527b553478d482adf69ec", "patch": "@@ -40,7 +40,17 @@\n  * the user error and where the error is reported.\n  *\n  */\n-#define _GLIBCXX_DEBUG_VERIFY(_Condition,_ErrorMessage)\t\t\\\n+namespace __gnu_debug\n+{ void __fancy_abort(const char*, int, const char*, const char*); }\n+#define _GLIBCXX_DEBUG_ABORT(_Condition)                                \\\n+  do {                                                                  \\\n+    if (! (_Condition))                                                 \\\n+      ::__gnu_debug::__fancy_abort(__FILE__, __LINE__,                  \\\n+\t\t\t\t   __PRETTY_FUNCTION__,                 \\\n+\t\t\t\t   #_Condition);                        \\\n+  } while (false)\n+\n+#define _GLIBCXX_DEBUG_VERIFY(_Condition,_ErrorMessage)\t\t        \\\n   do {\t\t\t\t\t\t\t\t\t\\\n     if (! (_Condition))\t\t\t\t\t\t\t\\\n       ::__gnu_debug::_Error_formatter::_M_at(__FILE__, __LINE__)\t\\"}, {"sha": "621a1c9672742060b3b8cb78b9b0c473efc01c54", "filename": "libstdc++-v3/src/debug.cc", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87d33b419bb6dc40816527b553478d482adf69ec/libstdc%2B%2B-v3%2Fsrc%2Fdebug.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87d33b419bb6dc40816527b553478d482adf69ec/libstdc%2B%2B-v3%2Fsrc%2Fdebug.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fdebug.cc?ref=87d33b419bb6dc40816527b553478d482adf69ec", "patch": "@@ -48,6 +48,15 @@ namespace __gnu_internal\n \n namespace __gnu_debug\n {\n+  void\n+  __fancy_abort(const char* __file, int __line, const char* __function,\n+\t\tconst char* __condition)\n+  {\n+    printf(\"%s:%d: %s: Assertion '%s' failed.\\n\", __file, __line,\n+\t   __function, __condition);\n+    abort();\n+  }\n+\n   const char* _S_debug_messages[] = \n   {\n     \"function requires a valid iterator range [%1.name;, %2.name;)\","}]}