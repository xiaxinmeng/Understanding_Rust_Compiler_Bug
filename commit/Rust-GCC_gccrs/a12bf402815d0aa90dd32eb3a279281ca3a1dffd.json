{"sha": "a12bf402815d0aa90dd32eb3a279281ca3a1dffd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTEyYmY0MDI4MTVkMGFhOTBkZDMyZWIzYTI3OTI4MWNhM2ExZGZmZA==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2012-03-15T09:57:29Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2012-03-15T09:57:29Z"}, "message": "re PR c++/44783 (implement -ftemplate-backtrace-limit=)\n\n/c-family\n2012-03-15  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\tPR c++/44783\n\t* c.opt (ftemplate-backtrace-limit) Add.\n\n/cp\n2012-03-15  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\tPR c++/44783\n\t* error.c (print_instantiation_partial_context): Use\n\ttemplate_backtrace_limit.\n\n/doc\n2012-03-15  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\tPR c++/44783\n\t* doc/invoke.texi [C++ Language Options]: Document\n\t-ftemplate-backtrace-limit.\n\nFrom-SVN: r185424", "tree": {"sha": "70731acae4b8c0682512aff60d80deeae2d69531", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/70731acae4b8c0682512aff60d80deeae2d69531"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a12bf402815d0aa90dd32eb3a279281ca3a1dffd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a12bf402815d0aa90dd32eb3a279281ca3a1dffd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a12bf402815d0aa90dd32eb3a279281ca3a1dffd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/comments", "author": null, "committer": null, "parents": [{"sha": "1f163ef7ac70375b21ab891ec543a2bca7205dda", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f163ef7ac70375b21ab891ec543a2bca7205dda", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f163ef7ac70375b21ab891ec543a2bca7205dda"}], "stats": {"total": 59, "additions": 49, "deletions": 10}, "files": [{"sha": "fcd2c2e1202f0e441f38eece817e6106c12a601b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a12bf402815d0aa90dd32eb3a279281ca3a1dffd", "patch": "@@ -1,3 +1,9 @@\n+2012-03-15  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\tPR c++/44783\n+\t* doc/invoke.texi [C++ Language Options]: Document\n+\t-ftemplate-backtrace-limit.\n+\n 2012-03-15  Tristan Gingold  <gingold@adacore.com>\n \n \t* c-parser.c (c_parser_parameter_declaration): Handle #pragma"}, {"sha": "274eacdc73d3c17ccb3d90279445b142727adfd7", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=a12bf402815d0aa90dd32eb3a279281ca3a1dffd", "patch": "@@ -1,3 +1,8 @@\n+2012-03-15  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\tPR c++/44783\n+\t* c.opt (ftemplate-backtrace-limit) Add.\n+\n 2012-03-12  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* c-cppbuiltin.c (c_cpp_builtins): Remove #pragma extern_prefix"}, {"sha": "a14514adf2e5902ee1044a842e538d463d12c01b", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=a12bf402815d0aa90dd32eb3a279281ca3a1dffd", "patch": "@@ -1035,6 +1035,10 @@ ftabstop=\n C ObjC C++ ObjC++ Joined RejectNegative UInteger\n -ftabstop=<number>\tDistance between tab stops for column reporting\n \n+ftemplate-backtrace-limit=\n+C++ ObjC++ Joined RejectNegative UInteger Var(template_backtrace_limit) Init(10)\n+Set the maximum number of template instantiation notes for a single warning or error\n+\n ftemplate-depth-\n C++ ObjC++ Joined RejectNegative Undocumented Alias(ftemplate-depth=)\n "}, {"sha": "f4f46fec4a0f81572961591e4108b32239f5c841", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a12bf402815d0aa90dd32eb3a279281ca3a1dffd", "patch": "@@ -1,3 +1,9 @@\n+2012-03-15  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\tPR c++/44783\n+\t* error.c (print_instantiation_partial_context): Use\n+\ttemplate_backtrace_limit.\n+\n 2012-03-14  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* Make-lang.in (doc/g++.1): Remove IRIX 6.5 reference.\n@@ -13,10 +19,10 @@\n \n \tPR c++/51641\n \t* cp-tree.h (template_type_parameter_p): Declare new function.\n-    \t(parameter_of_template_p): Remove\n-    \t* pt.c (template_type_parameter_p): Define new function.\n     \t(parameter_of_template_p): Remove.\n-    \t* name-lookup.c (binding_to_template_parms_of_scope_p): Don't rely\n+\t* pt.c (template_type_parameter_p): Define new function.\n+    \t(parameter_of_template_p): Remove.\n+\t* name-lookup.c (binding_to_template_parms_of_scope_p): Don't rely\n     \ton parameter_of_template_p anymore.  Compare the level of the\n     \ttemplate parameter to the depth of the template.\n "}, {"sha": "ee8f0e082a5d54273dc40952828b3270c9887e0b", "filename": "gcc/cp/error.c", "status": "modified", "additions": 18, "deletions": 6, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=a12bf402815d0aa90dd32eb3a279281ca3a1dffd", "patch": "@@ -3076,10 +3076,20 @@ print_instantiation_partial_context (diagnostic_context *context,\n \n   t = t0;\n \n-  if (n_total >= 12) \n+  if (template_backtrace_limit\n+      && n_total > template_backtrace_limit) \n     {\n-      int skip = n_total - 10;\n-      for (n = 0; n < 5; n++)\n+      int skip = n_total - template_backtrace_limit;\n+      int head = template_backtrace_limit / 2;\n+\n+      /* Avoid skipping just 1.  If so, skip 2.  */\n+      if (skip == 1)\n+       {\n+         skip = 2;\n+         head = (template_backtrace_limit - 1) / 2;\n+       }\n+     \n+      for (n = 0; n < head; n++)\n \t{\n \t  gcc_assert (t != NULL);\n \t  if (loc != t->locus)\n@@ -3088,17 +3098,19 @@ print_instantiation_partial_context (diagnostic_context *context,\n \t  loc = t->locus;\n \t  t = t->next;\n \t}\n-      if (t != NULL && skip > 1)\n+      if (t != NULL && skip > 0)\n \t{\n \t  expanded_location xloc;\n \t  xloc = expand_location (loc);\n \t  if (context->show_column)\n \t    pp_verbatim (context->printer,\n-\t\t\t _(\"%s:%d:%d:   [ skipping %d instantiation contexts ]\\n\"),\n+\t\t\t _(\"%s:%d:%d:   [ skipping %d instantiation contexts, \"\n+\t\t\t   \"use -ftemplate-backtrace-limit=0 to disable ]\\n\"),\n \t\t\t xloc.file, xloc.line, xloc.column, skip);\n \t  else\n \t    pp_verbatim (context->printer,\n-\t\t\t _(\"%s:%d:   [ skipping %d instantiation contexts ]\\n\"),\n+\t\t\t _(\"%s:%d:   [ skipping %d instantiation contexts, \"\n+\t\t\t   \"use -ftemplate-backtrace-limit=0 to disable ]\\n\"),\n \t\t\t xloc.file, xloc.line, skip);\n \t  \n \t  do {"}, {"sha": "8571a8bca8910d6a9aa7a43fa53b1ca4cb9ff3da", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a12bf402815d0aa90dd32eb3a279281ca3a1dffd/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=a12bf402815d0aa90dd32eb3a279281ca3a1dffd", "patch": "@@ -192,7 +192,8 @@ in the following sections.\n -fno-nonansi-builtins  -fnothrow-opt  -fno-operator-names @gol\n -fno-optional-diags  -fpermissive @gol\n -fno-pretty-templates @gol\n--frepo  -fno-rtti  -fstats  -ftemplate-depth=@var{n} @gol\n+-frepo  -fno-rtti  -fstats  -ftemplate-backtrace-limit=@var{n} @gol\n+-ftemplate-depth=@var{n} @gol\n -fno-threadsafe-statics -fuse-cxa-atexit  -fno-weak  -nostdinc++ @gol\n -fno-default-inline  -fvisibility-inlines-hidden @gol\n -fvisibility-ms-compat @gol\n@@ -2124,6 +2125,11 @@ represented in the minimum number of bits needed to represent all the\n enumerators).  This assumption may not be valid if the program uses a\n cast to convert an arbitrary integer value to the enumerated type.\n \n+@item -ftemplate-backtrace-limit=@var{n}\n+@opindex ftemplate-backtrace-limit\n+Set the maximum number of template instantiation notes for a single\n+warning or error to @var{n}.  The default value is 10.\n+\n @item -ftemplate-depth=@var{n}\n @opindex ftemplate-depth\n Set the maximum instantiation depth for template classes to @var{n}."}]}