{"sha": "c8bd326c4794fc26b4385a5736dd72a721fd5983", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzhiZDMyNmM0Nzk0ZmMyNmI0Mzg1YTU3MzZkZDcyYTcyMWZkNTk4Mw==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2018-03-03T13:34:10Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2018-03-03T13:34:10Z"}, "message": "re PR fortran/80965 (ICE with class argument and -O2 optimization)\n\n2018-03-03  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/80965\n\t* resolve.c (build_loc_call): Change symtree name from 'loc' to\n\t'_loc'.\n\n2018-03-03  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/80965\n\t* gfortran.dg/select_type_41.f90: New test.\n\nFrom-SVN: r258195", "tree": {"sha": "162df838a7d1637e64157fbcc18a337e9fe5539a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/162df838a7d1637e64157fbcc18a337e9fe5539a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c8bd326c4794fc26b4385a5736dd72a721fd5983", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8bd326c4794fc26b4385a5736dd72a721fd5983", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8bd326c4794fc26b4385a5736dd72a721fd5983", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8bd326c4794fc26b4385a5736dd72a721fd5983/comments", "author": null, "committer": null, "parents": [{"sha": "129c8d7e332a4d051f0e9d6f936b131198a3f7a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/129c8d7e332a4d051f0e9d6f936b131198a3f7a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/129c8d7e332a4d051f0e9d6f936b131198a3f7a9"}], "stats": {"total": 43, "additions": 42, "deletions": 1}, "files": [{"sha": "5c99760e4c510194e69ce44142786247e606e1a5", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8bd326c4794fc26b4385a5736dd72a721fd5983/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8bd326c4794fc26b4385a5736dd72a721fd5983/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c8bd326c4794fc26b4385a5736dd72a721fd5983", "patch": "@@ -1,3 +1,9 @@\n+2018-03-03  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/80965\n+\t* resolve.c (build_loc_call): Change symtree name from 'loc' to\n+\t'_loc'.\n+\n 2018-03-01  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/84219"}, {"sha": "6e20184e648f7327ccf488fd1048f8dd7052b3e4", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8bd326c4794fc26b4385a5736dd72a721fd5983/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8bd326c4794fc26b4385a5736dd72a721fd5983/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=c8bd326c4794fc26b4385a5736dd72a721fd5983", "patch": "@@ -8712,7 +8712,7 @@ build_loc_call (gfc_expr *sym_expr)\n   gfc_expr *loc_call;\n   loc_call = gfc_get_expr ();\n   loc_call->expr_type = EXPR_FUNCTION;\n-  gfc_get_sym_tree (\"loc\", gfc_current_ns, &loc_call->symtree, false);\n+  gfc_get_sym_tree (\"_loc\", gfc_current_ns, &loc_call->symtree, false);\n   loc_call->symtree->n.sym->attr.flavor = FL_PROCEDURE;\n   loc_call->symtree->n.sym->attr.intrinsic = 1;\n   loc_call->symtree->n.sym->result = loc_call->symtree->n.sym;"}, {"sha": "a867711183bc1f3a66e58f80b5cb22b2cedf879a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8bd326c4794fc26b4385a5736dd72a721fd5983/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8bd326c4794fc26b4385a5736dd72a721fd5983/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c8bd326c4794fc26b4385a5736dd72a721fd5983", "patch": "@@ -1,3 +1,8 @@\n+2018-03-03  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/80965\n+\t* gfortran.dg/select_type_41.f90: New test.\n+\n 2018-03-02  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/61135"}, {"sha": "eebb87922bd43e4210b4232feb5ea0eb9bf23eda", "filename": "gcc/testsuite/gfortran.dg/select_type_41.f90", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8bd326c4794fc26b4385a5736dd72a721fd5983/gcc%2Ftestsuite%2Fgfortran.dg%2Fselect_type_41.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8bd326c4794fc26b4385a5736dd72a721fd5983/gcc%2Ftestsuite%2Fgfortran.dg%2Fselect_type_41.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fselect_type_41.f90?ref=c8bd326c4794fc26b4385a5736dd72a721fd5983", "patch": "@@ -0,0 +1,30 @@\n+! { dg-do compile }\n+! { dg-options \"-O2\" }\n+!\n+! Tests the fix for PR80965 in which the use of the name 'loc'\n+! for the dummy argument of 'xyz' caused an ICE. If the module\n+! was used, the error \"DUMMY attribute conflicts with INTRINSIC\n+! attribute in \u2018loc\u2019 at (1)\" was emitted. Note that although 'loc'\n+! is a GNU extension and so can be over-ridden, this is not very\n+! good practice.\n+!\n+! Contributed by David Sagan  <david.sagan@gmail.com>\n+!\n+module mode3_mod\n+contains\n+  subroutine xyz (loc)\n+    implicit none\n+    class(*) :: loc\n+    real x(6)\n+    integer ix_use\n+    select type (loc)\n+      type is (integer)\n+        x = 0\n+        print *, \"integer\"\n+      type is (real)\n+        ix_use = 0\n+        print *, \"real\"\n+    end select\n+  end subroutine xyz\n+end module mode3_mod\n+"}]}