{"sha": "c6d5d1acc4760fbeca782550c88b0746022f8612", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzZkNWQxYWNjNDc2MGZiZWNhNzgyNTUwYzg4YjA3NDYwMjJmODYxMg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-02T06:51:46Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-02T06:51:46Z"}, "message": "[multiple changes]\n\n2011-09-02  Vincent Celier  <celier@adacore.com>\n\n\t* prj-nmsc.adb: (Find_Sources): When the list of sources is\n\texplicitly declared in an extending project, do not warn if a source\n\tfor an inherited naming exception is not found.\n\n2011-09-02  Gary Dismukes  <dismukes@adacore.com>\n\n\t* exp_ch6.adb: (Is_Build_In_Place_Function_Call): Return False if\n\texpansion is inactive.\n\n2011-09-02  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_util.adb (Note_Possible_Modification): If the entity\n\tbeing modified is the renaming generated for an Ada2012 iterator\n\telement, the enclosing container or array is modified as well.\n\nFrom-SVN: r178433", "tree": {"sha": "5f52155666ac64c15da79d81a2a07bb35d2150ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5f52155666ac64c15da79d81a2a07bb35d2150ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c6d5d1acc4760fbeca782550c88b0746022f8612", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6d5d1acc4760fbeca782550c88b0746022f8612", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6d5d1acc4760fbeca782550c88b0746022f8612", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6d5d1acc4760fbeca782550c88b0746022f8612/comments", "author": null, "committer": null, "parents": [{"sha": "2ba1a7c7e8de1443bc460914dc247b63c9014ac6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ba1a7c7e8de1443bc460914dc247b63c9014ac6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ba1a7c7e8de1443bc460914dc247b63c9014ac6"}], "stats": {"total": 55, "additions": 49, "deletions": 6}, "files": [{"sha": "f53ca65182bda3c7c0a5aff98383a1355a23f99c", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6d5d1acc4760fbeca782550c88b0746022f8612/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6d5d1acc4760fbeca782550c88b0746022f8612/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c6d5d1acc4760fbeca782550c88b0746022f8612", "patch": "@@ -1,3 +1,20 @@\n+2011-09-02  Vincent Celier  <celier@adacore.com>\n+\n+\t* prj-nmsc.adb: (Find_Sources): When the list of sources is\n+\texplicitly declared in an extending project, do not warn if a source\n+\tfor an inherited naming exception is not found.\n+\n+2011-09-02  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* exp_ch6.adb: (Is_Build_In_Place_Function_Call): Return False if\n+\texpansion is inactive.\n+\n+2011-09-02  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_util.adb (Note_Possible_Modification): If the entity\n+\tbeing modified is the renaming generated for an Ada2012 iterator\n+\telement, the enclosing container or array is modified as well.\n+\n 2011-09-02  Jose Ruiz  <ruiz@adacore.com>\n \n \t* s-taprop-linux.adb (Initialize_Lock, Initialize_TCB,"}, {"sha": "757464221251647405b285a74a2240574fe26511", "filename": "gcc/ada/exp_ch6.adb", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6d5d1acc4760fbeca782550c88b0746022f8612/gcc%2Fada%2Fexp_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6d5d1acc4760fbeca782550c88b0746022f8612/gcc%2Fada%2Fexp_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch6.adb?ref=c6d5d1acc4760fbeca782550c88b0746022f8612", "patch": "@@ -6779,6 +6779,18 @@ package body Exp_Ch6 is\n       Function_Id : Entity_Id;\n \n    begin\n+      --  Return False when the expander is inactive, since awareness of\n+      --  build-in-place treatment is only relevant during expansion. Note that\n+      --  Is_Build_In_Place_Function, which is called as part of this function,\n+      --  is also conditioned this way, but we need to check here as well to\n+      --  avoid blowing up on processing protected calls when expansion is\n+      --  disabled (such as with -gnatc) since those would trip over the raise\n+      --  of Program_Error below.\n+\n+      if not Expander_Active then\n+         return False;\n+      end if;\n+\n       --  Step past qualification or unchecked conversion (the latter can occur\n       --  in cases of calls to 'Input).\n "}, {"sha": "bc356221080c31333bd7d5357ef9e5ae50cec7ff", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6d5d1acc4760fbeca782550c88b0746022f8612/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6d5d1acc4760fbeca782550c88b0746022f8612/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=c6d5d1acc4760fbeca782550c88b0746022f8612", "patch": "@@ -6352,12 +6352,14 @@ package body Prj.Nmsc is\n                            No_Name_Location);\n                         Remove_Source (Data.Tree, Source, No_Source);\n \n-                        Error_Msg_Name_1 := Name_Id (Source.File);\n-                        Error_Msg\n-                          (Data.Flags,\n-                           \"? unknown source file %%\",\n-                           NL.Location,\n-                           Project.Project);\n+                        if Source.Naming_Exception = Yes then\n+                           Error_Msg_Name_1 := Name_Id (Source.File);\n+                           Error_Msg\n+                             (Data.Flags,\n+                              \"? unknown source file %%\",\n+                              NL.Location,\n+                              Project.Project);\n+                        end if;\n \n                         Again := True;\n                         exit Source_Loop;"}, {"sha": "cdc37c03b7726b911ff5a9ccc895b4b7a47678a7", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6d5d1acc4760fbeca782550c88b0746022f8612/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6d5d1acc4760fbeca782550c88b0746022f8612/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=c6d5d1acc4760fbeca782550c88b0746022f8612", "patch": "@@ -10711,6 +10711,18 @@ package body Sem_Util is\n                then\n                   Exp := Renamed_Object (Ent);\n                   goto Continue;\n+\n+               --  The expression may be the renaming of a subcomponent of an\n+               --  array or container. The assignment to the subcomponent is\n+               --  a modification of the container.\n+\n+               elsif Comes_From_Source (Original_Node (Exp))\n+                 and then\n+                   Nkind_In (Original_Node (Exp),\n+                     N_Selected_Component, N_Indexed_Component)\n+               then\n+                  Exp := Prefix (Original_Node (Exp));\n+                  goto Continue;\n                end if;\n \n                --  Generate a reference only if the assignment comes from"}]}