{"sha": "982216be8cdc37d13e47d74f794fc70c7cf30c2f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTgyMjE2YmU4Y2RjMzdkMTNlNDdkNzRmNzk0ZmM3MGM3Y2YzMGMyZg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2002-10-17T22:35:49Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2002-10-17T22:35:49Z"}, "message": "re PR c++/7584 (Erroneous ambiguous base error on using declaration)\n\n\tPR c++/7584\n\t* class.c (handle_using_decl): Allow the declaration used to be\n\tfrom an ambiguous base.\n\n\tPR c++/7584\n\t* g++.dg/inherit/using3.C: New test.\n\nFrom-SVN: r58262", "tree": {"sha": "5cdba7989d8cddde4acdc126e1fbda9376d48428", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5cdba7989d8cddde4acdc126e1fbda9376d48428"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/982216be8cdc37d13e47d74f794fc70c7cf30c2f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/982216be8cdc37d13e47d74f794fc70c7cf30c2f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/982216be8cdc37d13e47d74f794fc70c7cf30c2f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/982216be8cdc37d13e47d74f794fc70c7cf30c2f/comments", "author": null, "committer": null, "parents": [{"sha": "2d05cd9641e0746ad5c6824e458acd014ecdf849", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d05cd9641e0746ad5c6824e458acd014ecdf849", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d05cd9641e0746ad5c6824e458acd014ecdf849"}], "stats": {"total": 35, "additions": 33, "deletions": 2}, "files": [{"sha": "b6836eef407e720b75782ed679cb86e3ad51e49f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/982216be8cdc37d13e47d74f794fc70c7cf30c2f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/982216be8cdc37d13e47d74f794fc70c7cf30c2f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=982216be8cdc37d13e47d74f794fc70c7cf30c2f", "patch": "@@ -1,5 +1,9 @@\n 2002-10-17  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/7584\n+\t* class.c (handle_using_decl): Allow the declaration used to be\n+\tfrom an ambiguous base.\n+\n \t* pt.c (convert_template_argument): Revert this change:\n \t\t2002-10-16  Mark Mitchell  <mark@codesourcery.com>\n \t\t* pt.c (convert_template_argument): Do not fold non-type"}, {"sha": "90d7ef2c92180b9e99c70c2dcdd77b8dea7e722f", "filename": "gcc/cp/class.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/982216be8cdc37d13e47d74f794fc70c7cf30c2f/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/982216be8cdc37d13e47d74f794fc70c7cf30c2f/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=982216be8cdc37d13e47d74f794fc70c7cf30c2f", "patch": "@@ -1155,9 +1155,12 @@ handle_using_decl (using_decl, t)\n   tree flist = NULL_TREE;\n   tree old_value;\n \n-  binfo = binfo_or_else (ctype, t);\n+  binfo = lookup_base (t, ctype, ba_any, NULL);\n   if (! binfo)\n-    return;\n+    {\n+      error_not_base_type (t, ctype);\n+      return;\n+    }\n   \n   if (constructor_name_p (name, ctype))\n     {"}, {"sha": "89befc5692b12f229b580d42d2f6f4cc0c569e8b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/982216be8cdc37d13e47d74f794fc70c7cf30c2f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/982216be8cdc37d13e47d74f794fc70c7cf30c2f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=982216be8cdc37d13e47d74f794fc70c7cf30c2f", "patch": "@@ -1,3 +1,8 @@\n+2002-10-17  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/7584\n+\t* g++.dg/inherit/using3.C: New test.\n+\n Thu Oct 17 19:12:58 CEST 2002  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc.dg/20021017-2.c: New test."}, {"sha": "d2acf80099a49a9cf9fadd9837681b0ffce3d981", "filename": "gcc/testsuite/g++.dg/inherit/using3.C", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/982216be8cdc37d13e47d74f794fc70c7cf30c2f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finherit%2Fusing3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/982216be8cdc37d13e47d74f794fc70c7cf30c2f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finherit%2Fusing3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finherit%2Fusing3.C?ref=982216be8cdc37d13e47d74f794fc70c7cf30c2f", "patch": "@@ -0,0 +1,19 @@\n+class A\n+{\n+public:\n+    typedef int T;\n+    int a;\n+};\n+\n+class B : virtual private A\n+{\n+};\n+\n+class C : virtual private A, public B\n+{\n+public:\n+    using A::a;\n+    using A::T;\n+};\n+\n+C::T x;"}]}