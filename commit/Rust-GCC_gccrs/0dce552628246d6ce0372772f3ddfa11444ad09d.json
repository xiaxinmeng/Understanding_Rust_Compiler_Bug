{"sha": "0dce552628246d6ce0372772f3ddfa11444ad09d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGRjZTU1MjYyODI0NmQ2Y2UwMzcyNzcyZjNkZGZhMTE0NDRhZDA5ZA==", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2018-09-18T13:32:12Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2018-09-18T13:32:12Z"}, "message": "[AArch64][committed] Fix gcc.target/aarch64/spellcheck_1.c and spellcheck_4.c\n\nThese two tests started failing after commit r264335 that adjusted the cutoff point at which the diagnostic suggestions machinery decides a suggestion is meaningful.\nFor these tests it means we no longer suggest anything as an alternative to \"armv8-a-typo\" as an \"arch=\" pargma value. We do still list the valid options, we just don't prefer one particular value over the others.\n\nWhen I first wrote this test it wasn't with a particular architecture suggestion in mind, but rather to test that the suggestion machinery is being sanely invoked.\nSo this patch changes the dg-message check to treat the \"did you mean...?\" hunk as optional (in case the heuristics in the suggestions machinery change again).\n\nWith this patch the two tests PASS again on aarch64. \n\n    * gcc.target/aarch64/spellcheck_1.c:\n    Make architecture suggestion optional.\n    * gcc.target/aarch64/spellcheck_4.c:\n    Likewise.\n\nFrom-SVN: r264390", "tree": {"sha": "1e90a16db4646092e59fbe154565978e085d5208", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e90a16db4646092e59fbe154565978e085d5208"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0dce552628246d6ce0372772f3ddfa11444ad09d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0dce552628246d6ce0372772f3ddfa11444ad09d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0dce552628246d6ce0372772f3ddfa11444ad09d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0dce552628246d6ce0372772f3ddfa11444ad09d/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "92cb1fbc2774035b9ce7eaa9ff8c9a3dadbd8827", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92cb1fbc2774035b9ce7eaa9ff8c9a3dadbd8827", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92cb1fbc2774035b9ce7eaa9ff8c9a3dadbd8827"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "6b41c6800d7877978f20bd3ce2ed8cbc534ba26e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0dce552628246d6ce0372772f3ddfa11444ad09d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0dce552628246d6ce0372772f3ddfa11444ad09d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0dce552628246d6ce0372772f3ddfa11444ad09d", "patch": "@@ -1,3 +1,10 @@\n+2018-09-18  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+    * gcc.target/aarch64/spellcheck_1.c:\n+    Make architecture suggestion optional.\n+    * gcc.target/aarch64/spellcheck_4.c:\n+    Likewise.\n+\n 2018-09-18  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* gcc.target/aarch64/combine_bfxil.c: Avoid passing pointers to"}, {"sha": "a0795c1cc532208fcb04ceefa6877deac4a2d749", "filename": "gcc/testsuite/gcc.target/aarch64/spellcheck_1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0dce552628246d6ce0372772f3ddfa11444ad09d/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fspellcheck_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0dce552628246d6ce0372772f3ddfa11444ad09d/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fspellcheck_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fspellcheck_1.c?ref=0dce552628246d6ce0372772f3ddfa11444ad09d", "patch": "@@ -3,7 +3,7 @@\n __attribute__((target (\"arch=armv8-a-typo\"))) void\n foo ()\n {\n-  /* { dg-message \"valid arguments are: \\[^\\n\\r]*; did you mean 'armv8-a'?\"  \"\" { target *-*-* } .-1 } */\n+  /* { dg-message \"valid arguments are: \\[^\\n\\r]*(; did you mean 'armv*'?)?\"  \"\" { target *-*-* } .-1 } */\n   /* { dg-error \"invalid name \\\\(\\\"armv8-a-typo\\\"\\\\) in 'target\\\\(\\\"arch=\\\"\\\\)' pragma or attribute\"  \"\" { target *-*-* } .-2 } */\n   /* { dg-error \"pragma or attribute 'target\\\\(\\\"arch=armv8-a-typo\\\"\\\\)' is not valid\"  \"\" { target *-*-* } .-3 } */\n }"}, {"sha": "37c9d3c4d61607803641a42d24a135d28bf375bb", "filename": "gcc/testsuite/gcc.target/aarch64/spellcheck_4.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0dce552628246d6ce0372772f3ddfa11444ad09d/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fspellcheck_4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0dce552628246d6ce0372772f3ddfa11444ad09d/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fspellcheck_4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fspellcheck_4.c?ref=0dce552628246d6ce0372772f3ddfa11444ad09d", "patch": "@@ -8,4 +8,4 @@ foo ()\n }\n \n /* { dg-error \"unknown value 'armv8-a-typo' for -march\"  \"\" { target *-*-* } 0 } */\n-/* { dg-message \"valid arguments are: \\[^\\n\\r]*; did you mean 'armv8-a'?\"  \"\" { target *-*-* } 0 } */\n+/* { dg-message \"valid arguments are: \\[^\\n\\r]*(; did you mean 'armv*'?)?\"  \"\" { target *-*-* } 0 } */"}]}