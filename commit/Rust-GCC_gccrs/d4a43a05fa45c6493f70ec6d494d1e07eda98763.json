{"sha": "d4a43a05fa45c6493f70ec6d494d1e07eda98763", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDRhNDNhMDVmYTQ1YzY0OTNmNzBlYzZkNDk0ZDFlMDdlZGE5ODc2Mw==", "commit": {"author": {"name": "Daniel Berlin", "email": "dberlin@dberlin.org", "date": "2005-11-06T02:37:29Z"}, "committer": {"name": "Daniel Berlin", "email": "dberlin@gcc.gnu.org", "date": "2005-11-06T02:37:29Z"}, "message": "gcc_release: Always determine revision number from date or tag...\n\n2005-11-05  Daniel Berlin  <dberlin@dberlin.org>\n\n\t* gcc_release:  Always determine revision number from date or tag,\n\tand use that, instead of fragile date based export.\n\tPut back setting of non-local CVSROOT.\n\nFrom-SVN: r106554", "tree": {"sha": "7570a561b51edb8b17b0120cadb2ac895cb46ed7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7570a561b51edb8b17b0120cadb2ac895cb46ed7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4a43a05fa45c6493f70ec6d494d1e07eda98763", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4a43a05fa45c6493f70ec6d494d1e07eda98763", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4a43a05fa45c6493f70ec6d494d1e07eda98763", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4a43a05fa45c6493f70ec6d494d1e07eda98763/comments", "author": {"login": "dberlin", "id": 324715, "node_id": "MDQ6VXNlcjMyNDcxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/324715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dberlin", "html_url": "https://github.com/dberlin", "followers_url": "https://api.github.com/users/dberlin/followers", "following_url": "https://api.github.com/users/dberlin/following{/other_user}", "gists_url": "https://api.github.com/users/dberlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dberlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dberlin/subscriptions", "organizations_url": "https://api.github.com/users/dberlin/orgs", "repos_url": "https://api.github.com/users/dberlin/repos", "events_url": "https://api.github.com/users/dberlin/events{/privacy}", "received_events_url": "https://api.github.com/users/dberlin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "43be1fe4572ca151672de511a828c16c7db30bca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43be1fe4572ca151672de511a828c16c7db30bca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/43be1fe4572ca151672de511a828c16c7db30bca"}], "stats": {"total": 34, "additions": 16, "deletions": 18}, "files": [{"sha": "9a1fa5c08887c8aa41d54024476734ad2cdea0a6", "filename": "maintainer-scripts/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4a43a05fa45c6493f70ec6d494d1e07eda98763/maintainer-scripts%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4a43a05fa45c6493f70ec6d494d1e07eda98763/maintainer-scripts%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2FChangeLog?ref=d4a43a05fa45c6493f70ec6d494d1e07eda98763", "patch": "@@ -1,3 +1,9 @@\n+2005-11-05  Daniel Berlin  <dberlin@dberlin.org>\n+\n+\t* gcc_release:  Always determine revision number from date or tag,\n+\tand use that, instead of fragile date based export.\n+\tPut back setting of non-local CVSROOT.\n+\n 2005-11-05  Daniel Berlin  <dberlin@dberlin.org>\n \n \t* gcc_release: Make tags go in /tags."}, {"sha": "979247f3ca0fcc7e808258d376f62f24c7e91e6e", "filename": "maintainer-scripts/gcc_release", "status": "modified", "additions": 10, "deletions": 18, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4a43a05fa45c6493f70ec6d494d1e07eda98763/maintainer-scripts%2Fgcc_release", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4a43a05fa45c6493f70ec6d494d1e07eda98763/maintainer-scripts%2Fgcc_release", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fgcc_release?ref=d4a43a05fa45c6493f70ec6d494d1e07eda98763", "patch": "@@ -181,40 +181,31 @@ EOF\n       error \"Tag ${TAG} already exists\"\n     fi\n     ${SVN} -m \"Tagging source as ${TAG}\" cp \"${SVNROOT}/${SVNBRANCH}\" \"${SVNROOT}/${TAG}\" || \\\n-    #  error \"Could not tag sources\"\n-    #EXPORTTAG=\"${SVNBRANCH}\"\n+      error \"Could not tag sources\"\n   else\n     if [ ${SVNBRANCH} != \"/trunk\" ]; then\n       EXPORTTAG=\"/branches/${SVNBRANCH}\"\n       # It does not work to use both \"-r\" and \"-D\" with\n       # \"cvs export\" so EXPORTDATE is not set here.\n+      SVNREV=`${SVN} info \"${SVNROOT}/${EXPORTTAG}\"|grep \"Revision:\"|awk '{print $2}'`\n     else\n-      # HEAD is the default branch, no need to specify it.\n       EXPORTTAG=\"\"\n       EXPORTDATE=\"-D{`date --iso-8601=minutes`}\"\n+      SVNREV=`${SVN} info ${EXPORTDATE} \"${SVNROOT}/trunk\"|grep \"Revision:\"|awk '{print $2}'`\n     fi\n   fi\n \n   # Export the current sources.\n-  inform \"Retrieving sources (svn export ${EXPORTTAG} ${EXPORTDATE} gcc)\"\n-\n-  if [ -z \"${EXPORTTAG}\" ]; then\n-    ${SVN} -q export ${EXPORTDATE} \"${SVNROOT}/trunk\" \"`basename ${SOURCE_DIRECTORY}`\" ||\\\n-      error \"Could not retrieve sources\"\n-    SVNREV = `${SVN} info ${EXPORTDATE} \"${SVNROOT}/trunk\"|grep \"Revision:\"|awk '{print $2}'`\n-  elif [ -z \"${EXPORTDATE}\" ]; then\n-    ${SVN} -q export \"${SVNROOT}/${EXPORTTAG}\" \"`basename ${SOURCE_DIRECTORY}`/\" ||\\\n-      error \"Could not retrieve sources\"\n-    SVNREV = `${SVN} info \"${SVNROOT}/${EXPORTTAG}\"|grep \"Revision:\"|awk '{print $2}'`\n-  else\n-    error \"Cannot specify -r and -D at the same time\"\n-  fi\n+  inform \"Retrieving sources (svn export -r ${SVNREV} ${SVNROOT}/${SVNBRANCH}/gcc)\"\n+\n+  ${SVN} -q export -r${SVNREV} \"${SVNROOT}/${SVNBRANCH}\" \"`basename ${SOURCE_DIRECTORY}`\" ||\\\n+    error \"Could not retrieve sources\"\n \n   # Run gcc_update on them to set up the timestamps nicely, and (re)write\n   # the LAST_UPDATED file containing the CVS tag/date used.\n   changedir \"gcc-${RELEASE}\"\n   contrib/gcc_update --touch\n-  echo \"Obtained from SVN: ${EXPORTTAG} ${EXPORTDATE}\" > LAST_UPDATED\n+  echo \"Obtained from SVN: Revision ${SVNREV}\" > LAST_UPDATED\n \n   # Obtain some documentation files from the wwwdocs module.\n   inform \"Retrieving HTML documentation\"\n@@ -758,7 +749,8 @@ TESTSUITE_DIRS=`adjust_dirs ${TESTSUITE_DIRS}`\n \n # Set up SVNROOT.\n if [ $LOCAL -eq 0 ]; then\n-    SVNROOT=\"svn://${SVN_USERNAME}@${SVN_SERVER}${SVN_REPOSITORY}\"\n+    SVNROOT=\"svn+ssh://${SVN_USERNAME}@${SVN_SERVER}${SVN_REPOSITORY}\"\n+    CVSROOT=\":ext:${SVN_USERNAME}@gcc.gnu.org/cvs/gcc\"\n else\n     SVNROOT=\"file:///svn/gcc\"\n     CVSROOT=\"/cvs/gcc\""}]}