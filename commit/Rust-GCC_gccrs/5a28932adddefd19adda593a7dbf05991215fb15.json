{"sha": "5a28932adddefd19adda593a7dbf05991215fb15", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWEyODkzMmFkZGRlZmQxOWFkZGE1OTNhN2RiZjA1OTkxMjE1ZmIxNQ==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2015-01-27T00:17:56Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2015-01-27T00:17:56Z"}, "message": "update_web_docs_svn: support the JIT documentation\n\nmaintainer-scripts/ChangeLog:\n\t* update_web_docs_svn: Don't delete gcc/jit/docs or\n\tgcc/jit/jit-common.h, gcc/jit/notes.txt. Special case the\n\tbuilding of the JIT docs (using sphinx-build).  Special case\n\tcopying them up.\n\nFrom-SVN: r220149", "tree": {"sha": "ca0aa50a11ad00ea7134f625d9961e7136990d56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca0aa50a11ad00ea7134f625d9961e7136990d56"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5a28932adddefd19adda593a7dbf05991215fb15", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a28932adddefd19adda593a7dbf05991215fb15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a28932adddefd19adda593a7dbf05991215fb15", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a28932adddefd19adda593a7dbf05991215fb15/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e24439197f6d45d4622c9223d1fc11cbfb85f0ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e24439197f6d45d4622c9223d1fc11cbfb85f0ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e24439197f6d45d4622c9223d1fc11cbfb85f0ed"}], "stats": {"total": 37, "additions": 37, "deletions": 0}, "files": [{"sha": "dab5bafdfd20892ba29225fefc5b91e7e0300ee3", "filename": "maintainer-scripts/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a28932adddefd19adda593a7dbf05991215fb15/maintainer-scripts%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a28932adddefd19adda593a7dbf05991215fb15/maintainer-scripts%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2FChangeLog?ref=5a28932adddefd19adda593a7dbf05991215fb15", "patch": "@@ -1,3 +1,10 @@\n+2015-01-26  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* update_web_docs_svn: Don't delete gcc/jit/docs or\n+\tgcc/jit/jit-common.h, gcc/jit/notes.txt. Special case the\n+\tbuilding of the JIT docs (using sphinx-build).  Special case\n+\tcopying them up.\n+\n 2014-08-14  Richard Biener  <rguenther@suse.de>\n \n \t* crontab: Change trunk snapshots from 4.10 to 5."}, {"sha": "ac3bae6451fcc03785ea829ae5cb0761f447a983", "filename": "maintainer-scripts/update_web_docs_svn", "status": "modified", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a28932adddefd19adda593a7dbf05991215fb15/maintainer-scripts%2Fupdate_web_docs_svn", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a28932adddefd19adda593a7dbf05991215fb15/maintainer-scripts%2Fupdate_web_docs_svn", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fupdate_web_docs_svn?ref=5a28932adddefd19adda593a7dbf05991215fb15", "patch": "@@ -111,11 +111,18 @@ fi\n # generator programs with the installed library, not the new one and\n # (b) to avoid packaging all the sources instead of only documentation\n # sources.\n+# Note that we have to preserve gcc/jit/docs since the jit docs are\n+# not .texi files (Makefile, .rst and .png), and the jit docs use\n+# include directives to pull in content from jit/jit-common.h and\n+# jit/notes.txt, so we have to preserve those also.\n find gcc -type f \\( -name '*.texi' \\\n   -o -path gcc/gcc/doc/install.texi2html \\\n   -o -path gcc/gcc/doc/include/texinfo.tex \\\n   -o -path gcc/gcc/BASE-VER \\\n   -o -path gcc/gcc/DEV-PHASE \\\n+  -o -path \"gcc/gcc/jit/docs/*\" \\\n+  -o -path \"gcc/gcc/jit/jit-common.h\" \\\n+  -o -path \"gcc/gcc/jit/notes.txt\" \\\n   -o -print0 \\) | xargs -0 rm -f\n \n # Build a tarball of the sources.\n@@ -158,6 +165,16 @@ for file in $MANUALS; do\n   fi\n done\n \n+# The jit is a special-case, using sphinx rather than texinfo.\n+# The jit Makefile uses \"sphinx-build\".  This is packaged in\n+# Fedora and EPEL 6 within \"python-sphinx\", and in openSUSE\n+# within \"python-Sphinx\".\n+pushd gcc/gcc/jit/docs\n+make html\n+popd\n+cp -a gcc/gcc/jit/docs/_build/html jit\n+mkdir -p $DOCSDIR/jit\n+\n # Work around makeinfo generated file names and references with\n # \"_002d\" instead of \"-\".\n find . -name '*.html' | while read f; do\n@@ -204,6 +221,19 @@ for file in */*.html *.ps *.pdf *.tar; do\n   fi\n done\n \n+# Again, the jit is a special case, with nested subdirectories\n+# below \"jit\", and with some non-HTML files (.png images from us,\n+# plus .css and .js supplied by sphinx).\n+find jit \\\n+    -name \"*.html\" -o -name \"*.png\" \\\n+    -o -name \"*.css\" -o -name \"*.js\" |\n+  while read file ; do\n+    # Note that $file here will contain path fragments beginning\n+    # with \"jit/\", e.g. \"jit/cp/topics/functions.html\"\n+    mkdir -p $(dirname $DOCSDIR/$file)\n+    cp $file $DOCSDIR/$file\n+  done\n+\n cd $DOCSDIR\n \n # Finally, generate the installation documentation"}]}