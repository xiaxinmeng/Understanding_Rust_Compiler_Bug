{"sha": "d3b35d7584ef28d51bdf2a2fed49ba18c924fb81", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDNiMzVkNzU4NGVmMjhkNTFiZGYyYTJmZWQ0OWJhMThjOTI0ZmI4MQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-05-28T23:03:12Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-05-28T23:03:12Z"}, "message": "(expand_end_case): Have INDEX_TYPE track conversions done to\nINDEX_EXPR.\n\nFrom-SVN: r7381", "tree": {"sha": "97e19bdcc458407bbcd6831a0818af1b20673521", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97e19bdcc458407bbcd6831a0818af1b20673521"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d3b35d7584ef28d51bdf2a2fed49ba18c924fb81", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3b35d7584ef28d51bdf2a2fed49ba18c924fb81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3b35d7584ef28d51bdf2a2fed49ba18c924fb81", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3b35d7584ef28d51bdf2a2fed49ba18c924fb81/comments", "author": null, "committer": null, "parents": [{"sha": "7d558bfe5f65554ad87d913129c8d3989f1d117d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d558bfe5f65554ad87d913129c8d3989f1d117d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d558bfe5f65554ad87d913129c8d3989f1d117d"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "f62cb63245f4ea4f11c559a9fb898ac45cba7462", "filename": "gcc/stmt.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3b35d7584ef28d51bdf2a2fed49ba18c924fb81/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3b35d7584ef28d51bdf2a2fed49ba18c924fb81/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=d3b35d7584ef28d51bdf2a2fed49ba18c924fb81", "patch": "@@ -4462,8 +4462,12 @@ expand_end_case (orig_index)\n \t      else\n \t\t{\n \t\t  if (TYPE_MODE (index_type) != index_mode)\n-\t\t    index_expr = convert (type_for_size (index_bits, 0),\n-\t\t\t\t\t  index_expr);\n+\t\t    {\n+\t\t      index_expr = convert (type_for_size (index_bits, 0),\n+\t\t\t\t\t    index_expr);\n+\t\t      index_type = TREE_TYPE (index_expr);\n+\t\t    }\n+\n \t\t  index = expand_expr (index_expr, NULL_RTX, VOIDmode, 0);\n \t\t}\n \t      emit_queue ();\n@@ -4500,6 +4504,7 @@ expand_end_case (orig_index)\n \t      index_expr = convert (thiscase->data.case_stmt.nominal_type,\n \t\t\t\t    fold (build (MINUS_EXPR, index_type,\n \t\t\t\t\t\t index_expr, minval)));\n+\t      index_type = TREE_TYPE (index_expr);\n \t      index = expand_expr (index_expr, NULL_RTX, VOIDmode, 0);\n \t      emit_queue ();\n \t      index = protect_from_queue (index, 0);"}]}