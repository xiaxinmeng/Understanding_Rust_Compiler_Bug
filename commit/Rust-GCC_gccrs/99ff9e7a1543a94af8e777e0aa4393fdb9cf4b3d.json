{"sha": "99ff9e7a1543a94af8e777e0aa4393fdb9cf4b3d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTlmZjllN2ExNTQzYTk0YWY4ZTc3N2UwYWE0MzkzZmRiOWNmNGIzZA==", "commit": {"author": {"name": "Ben Elliston", "email": "bje@au.ibm.com", "date": "2005-03-04T05:15:52Z"}, "committer": {"name": "Ben Elliston", "email": "bje@gcc.gnu.org", "date": "2005-03-04T05:15:52Z"}, "message": "* gcc.misc-tests/options.exp: New test.\n\nFrom-SVN: r95879", "tree": {"sha": "0c4a5b3eda6d506ad70dc0c2dcba7438fc3d3226", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c4a5b3eda6d506ad70dc0c2dcba7438fc3d3226"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/99ff9e7a1543a94af8e777e0aa4393fdb9cf4b3d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99ff9e7a1543a94af8e777e0aa4393fdb9cf4b3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99ff9e7a1543a94af8e777e0aa4393fdb9cf4b3d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99ff9e7a1543a94af8e777e0aa4393fdb9cf4b3d/comments", "author": null, "committer": null, "parents": [{"sha": "ee4c708e37964f3d70176da58996305e90eded76", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee4c708e37964f3d70176da58996305e90eded76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee4c708e37964f3d70176da58996305e90eded76"}], "stats": {"total": 52, "additions": 52, "deletions": 0}, "files": [{"sha": "adc463c7b13dd99885186987c2da30bd5af39b62", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99ff9e7a1543a94af8e777e0aa4393fdb9cf4b3d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99ff9e7a1543a94af8e777e0aa4393fdb9cf4b3d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=99ff9e7a1543a94af8e777e0aa4393fdb9cf4b3d", "patch": "@@ -1,3 +1,7 @@\n+2005-03-04  Ben Elliston  <bje@au.ibm.com>\n+\n+\t* gcc.misc-tests/options.exp: New test.\n+\n 2005-03-03  James A. Morrison  <phython@gcc.gnu.org>\n \n \t* gcc.dg/pr15784-4.c: New test."}, {"sha": "9a0f9e4ae91f9eba39f1e588837966a4f4af0839", "filename": "gcc/testsuite/gcc.misc-tests/options.exp", "status": "added", "additions": 48, "deletions": 0, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99ff9e7a1543a94af8e777e0aa4393fdb9cf4b3d/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99ff9e7a1543a94af8e777e0aa4393fdb9cf4b3d/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp?ref=99ff9e7a1543a94af8e777e0aa4393fdb9cf4b3d", "patch": "@@ -0,0 +1,48 @@\n+# Copyright (C) 2005 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2 of the License, or\n+# (at your option) any later version.\n+# \n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+# \n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  \n+\n+# Run the LANGUAGE compiler with GCC_OPTIONS and inspect the compiler,\n+# assembler and linker output (from gcc -v) to make sure that they\n+# match the patterns COMPILER_PATTERN, AS_PATTERN and LD_PATTERN,\n+# respectively.\n+\n+proc check_for_options {language gcc_options compiler_pattern as_pattern ld_pattern} {\n+    set test \"compiler driver $gcc_options option(s)\"\n+    set gcc_options \"\\{additional_flags=$gcc_options -v\\}\"\n+    set src \"-x$language /dev/null\"\n+\n+    switch \"$language\" {\n+\t\"c\" { set compiler cc1 }\n+\tdefault { error \"unknown language\" }\n+    }\n+    set gcc_output [gcc_target_compile $src /dev/null executable $gcc_options]\n+\n+    if {![regexp -- \"/$compiler -quiet.*$compiler_pattern\" $gcc_output]} {\n+\tfail \"$test (compiler options)\"\n+\treturn\n+    }\n+    if {![regexp -- \" *as .*$as_pattern\" $gcc_output]} {\n+\tfail \"$test (assembler options)\"\n+\treturn\n+    }\n+    if {![regexp -- \"/collect2 .*$ld_pattern\" $gcc_output]} {\n+\tfail \"$test (linker options)\"\n+\treturn\n+    }\n+    pass $test\n+}\n+\n+check_for_options c {--coverage} {-fprofile-arcs -ftest-coverage} {} {-lgcov}"}]}