{"sha": "e278e62f91d955ce808fcf4d05826c7b2779888f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTI3OGU2MmY5MWQ5NTVjZTgwOGZjZjRkMDU4MjZjN2IyNzc5ODg4Zg==", "commit": {"author": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2019-12-20T12:42:50Z"}, "committer": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2019-12-20T12:42:50Z"}, "message": "libstdc++: Fix pretty printers script and tests\n\n\t* python/libstdcxx/v6/printers.py (lookup_node_type): Remove redundant\n\tcall to lookup_node_type.\n\t* testsuite/libstdc++-prettyprinters/80276.cc: Define\n\t_GLIBCXX_USE_CXX11_ABI to 0.\n\t* testsuite/libstdc++-prettyprinters/91997.cc: Use regexp-test to check\n\t'a' content.\n\nFrom-SVN: r279640", "tree": {"sha": "cf87d9f050ec9a1a9cd4da2a7c101ef611a7c4ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf87d9f050ec9a1a9cd4da2a7c101ef611a7c4ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e278e62f91d955ce808fcf4d05826c7b2779888f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e278e62f91d955ce808fcf4d05826c7b2779888f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e278e62f91d955ce808fcf4d05826c7b2779888f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e278e62f91d955ce808fcf4d05826c7b2779888f/comments", "author": null, "committer": null, "parents": [{"sha": "95d27703bc8777efe9cdf2a1d8cac7a08b1f7168", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95d27703bc8777efe9cdf2a1d8cac7a08b1f7168", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95d27703bc8777efe9cdf2a1d8cac7a08b1f7168"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "82b2bbfed3b6cd647d4a7d1e400a345b1018fa46", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e278e62f91d955ce808fcf4d05826c7b2779888f/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e278e62f91d955ce808fcf4d05826c7b2779888f/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=e278e62f91d955ce808fcf4d05826c7b2779888f", "patch": "@@ -1,3 +1,12 @@\n+2019-12-20  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n+\n+\t* python/libstdcxx/v6/printers.py (lookup_node_type): Remove redundant\n+\tcall to lookup_node_type.\n+\t* testsuite/libstdc++-prettyprinters/80276.cc: Define\n+\t_GLIBCXX_USE_CXX11_ABI to 0.\n+\t* testsuite/libstdc++-prettyprinters/91997.cc: Use regexp-test to check\n+\t'a' content.\n+\n 2019-12-20  Jerome Lambourg  <lambourg@adacore.com>\n \n \t* acinclude.m4 (_GLIBCXX_USE_PTHREAD_RWLOCK_T): Checks that _PTHREADS"}, {"sha": "c98ec8fee8a622dc33859ea90434ec309a4455f4", "filename": "libstdc++-v3/python/libstdcxx/v6/printers.py", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e278e62f91d955ce808fcf4d05826c7b2779888f/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fprinters.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e278e62f91d955ce808fcf4d05826c7b2779888f/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fprinters.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fprinters.py?ref=e278e62f91d955ce808fcf4d05826c7b2779888f", "patch": "@@ -146,7 +146,6 @@ def lookup_node_type(nodename, containertype):\n             if is_member_of_namespace(containertype, 'std::__cxx1998',\n                                       'std::__debug', '__gnu_debug'):\n                 nodename = nodename.replace('::', '::__cxx1998::', 1)\n-                return lookup_templ_spec(nodename, valtype)\n                 try:\n                     return lookup_templ_spec(nodename, valtype)\n                 except gdb.error:"}, {"sha": "272adb86e0ccf34726bcbe0fac866b8e35c8c01c", "filename": "libstdc++-v3/testsuite/libstdc++-prettyprinters/80276.cc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e278e62f91d955ce808fcf4d05826c7b2779888f/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2F80276.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e278e62f91d955ce808fcf4d05826c7b2779888f/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2F80276.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2F80276.cc?ref=e278e62f91d955ce808fcf4d05826c7b2779888f", "patch": "@@ -18,6 +18,9 @@\n // with this library; see the file COPYING3.  If not see\n // <http://www.gnu.org/licenses/>.\n \n+// Type printers only recognize the old std::string for now.\n+#define _GLIBCXX_USE_CXX11_ABI 0\n+\n #include <iostream>\n #include <list>\n #include <memory>"}, {"sha": "059ac9aa97fa281159ab418f6fd0a6c9e920f236", "filename": "libstdc++-v3/testsuite/libstdc++-prettyprinters/91997.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e278e62f91d955ce808fcf4d05826c7b2779888f/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2F91997.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e278e62f91d955ce808fcf4d05826c7b2779888f/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2F91997.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2F91997.cc?ref=e278e62f91d955ce808fcf4d05826c7b2779888f", "patch": "@@ -41,7 +41,7 @@ int main()\n   // { dg-final { note-test mit {{first = 1, second = 2}} } }\n \n   std::any a = m;\n-  // { dg-final { note-test a {std::any containing std::map with 1 element = {[1] = 2}} } }\n+  // { dg-final { regexp-test a {std::any containing std::(__debug::)?map with 1 element = {\\[1\\] = 2}} } }\n \n   std::set<int> s{1, 2};\n   auto sit = s.begin();"}]}