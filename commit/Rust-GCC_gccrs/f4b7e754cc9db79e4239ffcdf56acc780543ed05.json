{"sha": "f4b7e754cc9db79e4239ffcdf56acc780543ed05", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjRiN2U3NTRjYzlkYjc5ZTQyMzlmZmNkZjU2YWNjNzgwNTQzZWQwNQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2019-01-28T23:49:51Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-01-28T23:49:51Z"}, "message": "re PR c/89045 (ICE in get_parm_info, at c/c-decl.c:7518)\n\n\tPR c/89045\n\t* c-decl.c (build_compound_literal): Don't pushdecl if in parameter\n\tscope.\n\n\t* gcc.dg/pr89045.c: New test.\n\nFrom-SVN: r268349", "tree": {"sha": "2230d81244efcbf0397363b53d23ae0ee1f2725c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2230d81244efcbf0397363b53d23ae0ee1f2725c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f4b7e754cc9db79e4239ffcdf56acc780543ed05", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4b7e754cc9db79e4239ffcdf56acc780543ed05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4b7e754cc9db79e4239ffcdf56acc780543ed05", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4b7e754cc9db79e4239ffcdf56acc780543ed05/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6a335b9669b174c14a7811e967d199f2418e5f61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a335b9669b174c14a7811e967d199f2418e5f61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a335b9669b174c14a7811e967d199f2418e5f61"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "dcb3f2136d996220f872dd74ce92d0c7e7f2c90e", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4b7e754cc9db79e4239ffcdf56acc780543ed05/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4b7e754cc9db79e4239ffcdf56acc780543ed05/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=f4b7e754cc9db79e4239ffcdf56acc780543ed05", "patch": "@@ -1,5 +1,9 @@\n 2019-01-29  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c/89045\n+\t* c-decl.c (build_compound_literal): Don't pushdecl if in parameter\n+\tscope.\n+\n \tPR c/86125\n \t* c-decl.c (last_fileptr_type): Remove.\n \t(last_structptr_types): New variable."}, {"sha": "02a93231130f059b001571f7fbc74c75149a3868", "filename": "gcc/c/c-decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4b7e754cc9db79e4239ffcdf56acc780543ed05/gcc%2Fc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4b7e754cc9db79e4239ffcdf56acc780543ed05/gcc%2Fc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-decl.c?ref=f4b7e754cc9db79e4239ffcdf56acc780543ed05", "patch": "@@ -5528,7 +5528,7 @@ build_compound_literal (location_t loc, tree type, tree init, bool non_const,\n       pushdecl (decl);\n       rest_of_decl_compilation (decl, 1, 0);\n     }\n-  else if (current_function_decl)\n+  else if (current_function_decl && !current_scope->parm_flag)\n     pushdecl (decl);\n \n   if (non_const)"}, {"sha": "9798783152e588b21460053367d2ae21baa17c63", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4b7e754cc9db79e4239ffcdf56acc780543ed05/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4b7e754cc9db79e4239ffcdf56acc780543ed05/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f4b7e754cc9db79e4239ffcdf56acc780543ed05", "patch": "@@ -1,5 +1,8 @@\n 2019-01-29  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c/89045\n+\t* gcc.dg/pr89045.c: New test.\n+\n \tPR c/86125\n \t* gcc.dg/Wbuiltin-declaration-mismatch-7.c: Guard testcase for\n \tlp64, ilp32 and llp64 only."}, {"sha": "d8ba65b62ed33d9d0e5eede2ad98207894e5658b", "filename": "gcc/testsuite/gcc.dg/pr89045.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4b7e754cc9db79e4239ffcdf56acc780543ed05/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89045.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4b7e754cc9db79e4239ffcdf56acc780543ed05/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89045.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89045.c?ref=f4b7e754cc9db79e4239ffcdf56acc780543ed05", "patch": "@@ -0,0 +1,15 @@\n+/* PR c/89045 */\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+\n+int\n+foo (int x)\n+{\n+  int v[(int){ x }];\n+  v[0] = 0;\n+  int bar (int p[(int){ x }])\n+  {\n+    return p[0];\n+  }\n+  return bar (v);\n+}"}]}