{"sha": "fb85f9d05f09a3e122d702f85b8af306a3999357", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmI4NWY5ZDA1ZjA5YTNlMTIyZDcwMmY4NWI4YWYzMDZhMzk5OTM1Nw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-01-04T20:03:59Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-01-04T20:03:59Z"}, "message": "dwarf2out.c (output_loc_list): Don't throw away 64K+ location descriptions for -gdwarf-5 and emit them as...\n\n\t* dwarf2out.c (output_loc_list): Don't throw away 64K+ location\n\tdescriptions for -gdwarf-5 and emit them as uleb128 instead of\n\t2-byte data.\n\nFrom-SVN: r244069", "tree": {"sha": "90f35d4f1a343de8289b7d95299fc67845dbb79c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/90f35d4f1a343de8289b7d95299fc67845dbb79c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fb85f9d05f09a3e122d702f85b8af306a3999357", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb85f9d05f09a3e122d702f85b8af306a3999357", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb85f9d05f09a3e122d702f85b8af306a3999357", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb85f9d05f09a3e122d702f85b8af306a3999357/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "598bd6878aedc11ddffc0cc3908bfdaf86e212e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/598bd6878aedc11ddffc0cc3908bfdaf86e212e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/598bd6878aedc11ddffc0cc3908bfdaf86e212e8"}], "stats": {"total": 19, "additions": 14, "deletions": 5}, "files": [{"sha": "242bf697bc457f47912f0b20841ffede230793a8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb85f9d05f09a3e122d702f85b8af306a3999357/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb85f9d05f09a3e122d702f85b8af306a3999357/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fb85f9d05f09a3e122d702f85b8af306a3999357", "patch": "@@ -1,3 +1,9 @@\n+2017-01-04  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* dwarf2out.c (output_loc_list): Don't throw away 64K+ location\n+\tdescriptions for -gdwarf-5 and emit them as uleb128 instead of\n+\t2-byte data.\n+\n 2017-01-04  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n \n \tPR target/78056"}, {"sha": "8abeb7abf657d93544a8d00be8700ef8b3d80181", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb85f9d05f09a3e122d702f85b8af306a3999357/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb85f9d05f09a3e122d702f85b8af306a3999357/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=fb85f9d05f09a3e122d702f85b8af306a3999357", "patch": "@@ -9586,7 +9586,7 @@ output_loc_list (dw_loc_list_ref list_head)\n \t perhaps put it into DW_TAG_dwarf_procedure and refer to that\n \t in the expression, but >= 64KB expressions for a single value\n \t in a single range are unlikely very useful.  */\n-      if (size > 0xffff)\n+      if (dwarf_version < 5 && size > 0xffff)\n \tcontinue;\n       if (dwarf_version >= 5)\n \t{\n@@ -9638,8 +9638,6 @@ output_loc_list (dw_loc_list_ref list_head)\n \t\t      if (strcmp (curr2->begin, curr2->end) == 0\n \t\t\t  && !curr2->force)\n \t\t\tcontinue;\n-\t\t      if ((unsigned long) size_of_locs (curr2->expr) > 0xffff)\n-\t\t\tcontinue;\n \t\t      break;\n \t\t    }\n \t\t  if (curr2 == NULL || curr->section != curr2->section)\n@@ -9740,8 +9738,13 @@ output_loc_list (dw_loc_list_ref list_head)\n \t}\n \n       /* Output the block length for this list of location operations.  */\n-      gcc_assert (size <= 0xffff);\n-      dw2_asm_output_data (2, size, \"%s\", \"Location expression size\");\n+      if (dwarf_version >= 5)\n+\tdw2_asm_output_data_uleb128 (size, \"Location expression size\");\n+      else\n+\t{\n+\t  gcc_assert (size <= 0xffff);\n+\t  dw2_asm_output_data (2, size, \"Location expression size\");\n+\t}\n \n       output_loc_sequence (curr->expr, -1);\n     }"}]}