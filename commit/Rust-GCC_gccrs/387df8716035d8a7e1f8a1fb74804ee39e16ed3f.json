{"sha": "387df8716035d8a7e1f8a1fb74804ee39e16ed3f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzg3ZGY4NzE2MDM1ZDhhN2UxZjhhMWZiNzQ4MDRlZTM5ZTE2ZWQzZg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2012-05-18T11:44:52Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2012-05-18T11:44:52Z"}, "message": "cgraphunit.c (varpool_finalize_decl): Allow external decls.\n\n\n\t* cgraphunit.c (varpool_finalize_decl): Allow external decls.\n\t(mark_functions_to_output): Fix sanity check.\n\t* ipa.c (function_and_variable_visibility): Remove TREE_STATIC\n\tcheck.\n\nFrom-SVN: r187651", "tree": {"sha": "df9585f0f8a48e34eed5f8e1df8f0b7924da5802", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/df9585f0f8a48e34eed5f8e1df8f0b7924da5802"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/387df8716035d8a7e1f8a1fb74804ee39e16ed3f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/387df8716035d8a7e1f8a1fb74804ee39e16ed3f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/387df8716035d8a7e1f8a1fb74804ee39e16ed3f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/387df8716035d8a7e1f8a1fb74804ee39e16ed3f/comments", "author": null, "committer": null, "parents": [{"sha": "f9a21e134266e384f0bb40378621b64994b27daa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9a21e134266e384f0bb40378621b64994b27daa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9a21e134266e384f0bb40378621b64994b27daa"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "57d6fed09183bf5f8c32d6e101d7768cb609d340", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/387df8716035d8a7e1f8a1fb74804ee39e16ed3f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/387df8716035d8a7e1f8a1fb74804ee39e16ed3f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=387df8716035d8a7e1f8a1fb74804ee39e16ed3f", "patch": "@@ -1,3 +1,10 @@\n+2012-05-18  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cgraphunit.c (varpool_finalize_decl): Allow external decls.\n+\t(mark_functions_to_output): Fix sanity check.\n+\t* ipa.c (function_and_variable_visibility): Remove TREE_STATIC\n+\tcheck.\n+\n 2012-05-18  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-flow.h (mark_symbols_for_renaming): Remove."}, {"sha": "7dae2c8e820b69a012399725270a92de8d5d3ad6", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/387df8716035d8a7e1f8a1fb74804ee39e16ed3f/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/387df8716035d8a7e1f8a1fb74804ee39e16ed3f/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=387df8716035d8a7e1f8a1fb74804ee39e16ed3f", "patch": "@@ -819,7 +819,7 @@ varpool_finalize_decl (tree decl)\n {\n   struct varpool_node *node = varpool_node (decl);\n \n-  gcc_assert (TREE_STATIC (decl));\n+  gcc_assert (TREE_STATIC (decl) || DECL_EXTERNAL (decl));\n \n   if (node->finalized)\n     return;\n@@ -1156,6 +1156,7 @@ mark_functions_to_output (void)\n \t\t have analyzed node pointing to it.  */\n \t      && !node->symbol.in_other_partition\n \t      && !node->alias\n+\t      && !node->clones\n \t      && !DECL_EXTERNAL (decl))\n \t    {\n \t      dump_cgraph_node (stderr, node);"}, {"sha": "43c2f60fa2aca65711ce9ef422d1a0c65a39a83b", "filename": "gcc/ipa.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/387df8716035d8a7e1f8a1fb74804ee39e16ed3f/gcc%2Fipa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/387df8716035d8a7e1f8a1fb74804ee39e16ed3f/gcc%2Fipa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa.c?ref=387df8716035d8a7e1f8a1fb74804ee39e16ed3f", "patch": "@@ -915,7 +915,6 @@ function_and_variable_visibility (bool whole_program)\n \t    symtab_dissolve_same_comdat_group_list ((symtab_node) vnode);\n \t  vnode->symbol.resolution = LDPR_PREVAILING_DEF_IRONLY;\n \t}\n-     gcc_assert (TREE_STATIC (vnode->symbol.decl));\n     }\n   pointer_set_destroy (aliased_nodes);\n   pointer_set_destroy (aliased_vnodes);"}]}