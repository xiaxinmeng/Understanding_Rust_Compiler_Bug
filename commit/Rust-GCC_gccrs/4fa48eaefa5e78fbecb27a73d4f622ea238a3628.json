{"sha": "4fa48eaefa5e78fbecb27a73d4f622ea238a3628", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGZhNDhlYWVmYTVlNzhmYmVjYjI3YTczZDRmNjIyZWEyMzhhMzYyOA==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "2000-04-12T23:47:06Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-04-12T23:47:06Z"}, "message": "Jeffrey A Law  (law@cygnus.com)\n\n        * function.c (purge_addressof): Unshare any shared rtl created by\n        purge_addressof and its children.\n\nFrom-SVN: r33133", "tree": {"sha": "3e9531941b584cf074efa635b43ce94f684623ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e9531941b584cf074efa635b43ce94f684623ba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4fa48eaefa5e78fbecb27a73d4f622ea238a3628", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4fa48eaefa5e78fbecb27a73d4f622ea238a3628", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4fa48eaefa5e78fbecb27a73d4f622ea238a3628", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4fa48eaefa5e78fbecb27a73d4f622ea238a3628/comments", "author": null, "committer": null, "parents": [{"sha": "aea0083a2d142590d6468a02a03c0f5c43e75973", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aea0083a2d142590d6468a02a03c0f5c43e75973", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aea0083a2d142590d6468a02a03c0f5c43e75973"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "6131937a3c6ee42637b14b04415226a7afa9c8d1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4fa48eaefa5e78fbecb27a73d4f622ea238a3628/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4fa48eaefa5e78fbecb27a73d4f622ea238a3628/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4fa48eaefa5e78fbecb27a73d4f622ea238a3628", "patch": "@@ -1,3 +1,8 @@\n+2000-04-12  Jeffrey A Law  (law@cygnus.com)\n+\n+\t* function.c (purge_addressof): Unshare any shared rtl created by\n+\tpurge_addressof and its children.\n+\n 2000-04-12  Mark Mitchell  <mark@codesourcery.com>\n \n \t* function.c (aggregate_value_p): VOID_TYPE nodes are never"}, {"sha": "4b6f5ff17539f220f889bd06e020de821cd531b9", "filename": "gcc/function.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4fa48eaefa5e78fbecb27a73d4f622ea238a3628/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4fa48eaefa5e78fbecb27a73d4f622ea238a3628/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=4fa48eaefa5e78fbecb27a73d4f622ea238a3628", "patch": "@@ -3330,6 +3330,20 @@ purge_addressof (insns)\n   hash_table_free (&ht);\n   purge_bitfield_addressof_replacements = 0;\n   purge_addressof_replacements = 0;\n+\n+  /* REGs are shared.  purge_addressof will destructively replace a REG\n+     with a MEM, which creates shared MEMs.\n+\n+     Unfortunately, the children of put_reg_into_stack assume that MEMs\n+     referring to the same stack slot are shared (fixup_var_refs and\n+     the associated hash table code).\n+\n+     So, we have to do another unsharing pass after we have flushed any\n+     REGs that had their address taken into the stack.\n+\n+     It may be worth tracking whether or not we converted any REGs into\n+     MEMs to avoid this overhead when it is not needed.  */\n+  unshare_all_rtl_again (get_insns ());\n }\n \f\n /* Pass through the INSNS of function FNDECL and convert virtual register"}]}