{"sha": "b7b08dcde44e819d6d57bbd27e6c825907be0b39", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjdiMDhkY2RlNDRlODE5ZDZkNTdiYmQyN2U2YzgyNTkwN2JlMGIzOQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-01-02T08:33:03Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-01-02T08:33:03Z"}, "message": "(REAL_LD_NAME): New variable.\n\n(collect2.o): Don't need STANDARD_STARTFILE_PREFIX, etc.\n(install-cross-tools): Use REAL_LD_NAME instead of `ld' when linking\nfiles from tooldir to libsubdir.\n\nFrom-SVN: r3053", "tree": {"sha": "767a49f77174f20f95cbd280750f97bd43db7c76", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/767a49f77174f20f95cbd280750f97bd43db7c76"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7b08dcde44e819d6d57bbd27e6c825907be0b39", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7b08dcde44e819d6d57bbd27e6c825907be0b39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7b08dcde44e819d6d57bbd27e6c825907be0b39", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7b08dcde44e819d6d57bbd27e6c825907be0b39/comments", "author": null, "committer": null, "parents": [{"sha": "bb59f9a64b74aecc029b22f77662fa11b75da682", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb59f9a64b74aecc029b22f77662fa11b75da682", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb59f9a64b74aecc029b22f77662fa11b75da682"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "03ef85ff29874a353c314ded63c6a651e3ee6739", "filename": "gcc/Makefile.in", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7b08dcde44e819d6d57bbd27e6c825907be0b39/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7b08dcde44e819d6d57bbd27e6c825907be0b39/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=b7b08dcde44e819d6d57bbd27e6c825907be0b39", "patch": "@@ -233,6 +233,11 @@ GCC_PASSES=xgcc cc1 cpp $(EXTRA_PASSES)\n # to link anything.\n GCC_PARTS=$(GCC_PASSES) libgcc.a $(EXTRA_PROGRAMS) $(USE_COLLECT2) $(EXTRA_PARTS)\n \n+# Name of `ld' to link into the binary directory for a cross-compiler.\n+# If we are using collect2, this will be `gld', since `ld' is collect2.\n+# Otherwise it is `ld'.\n+REAL_LD_NAME=`if [ x$(USE_COLLECT2) = xld ]; then echo \"gld\"; else echo \"ld\"; fi` \n+\n # Directory to link to, when using the target `maketest'.\n DIR = ../gcc\n \n@@ -781,12 +786,9 @@ collect2 : collect2.o version.o $(LIBDEPS)\n \t$(CC) $(ALL_CFLAGS) $(LDFLAGS) -o collect2 collect2.o version.o $(LIBS)\n \n collect2.o : collect2.c $(CONFIG_H) gstab.h\n-\t$(CC) $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \\\n-  -DSTANDARD_STARTFILE_PREFIX=\\\"$(libdir)/\\\" \\\n-  -DSTANDARD_BIN_PREFIX=\\\"$(bindir)/\\\" \\\n-  -DSTANDARD_EXEC_PREFIX=\\\"$(libdir)/gcc-lib/\\\" \\\n-  -DDEFAULT_TARGET_MACHINE=\\\"$(target)\\\" \\\n-  -c `echo $(srcdir)/collect2.c | sed 's,^\\./,,'`\n+\t$(CC) $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES)  \\\n+\t-DTARGET_MACHINE=\\\"$(target)\\\" \\\n+\t-c `echo $(srcdir)/collect2.c | sed 's,^\\./,,'`\n \n # Objectionable C language specific files.\n \n@@ -1385,7 +1387,7 @@ install-cross-tools: install-dir\n \tthen \\\n \t  if [ -d $(tooldir)/. ] ; \\\n \t  then \\\n-\t    for file in as ld ar nm ranlib; do \\\n+\t    for file in as $(REAL_LD_NAME) ar nm ranlib; do \\\n \t      if [ -f $(libsubdir)/$$file ] ; \\\n \t      then true; \\\n \t      else  \\"}]}