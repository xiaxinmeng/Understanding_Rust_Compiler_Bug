{"sha": "3712281f9d5275e4b0e388ad78f62df874298726", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzcxMjI4MWY5ZDUyNzVlNGIwZTM4OGFkNzhmNjJkZjg3NDI5ODcyNg==", "commit": {"author": {"name": "Bob Wilson", "email": "bob.wilson@acm.org", "date": "2004-01-23T22:12:34Z"}, "committer": {"name": "Bob Wilson", "email": "bwilson@gcc.gnu.org", "date": "2004-01-23T22:12:34Z"}, "message": "xtensa.c (xtensa_va_arg): Handle complex values as separate real and imaginary parts.\n\n\t* config/xtensa/xtensa.c (xtensa_va_arg): Handle complex values as\n\tseparate real and imaginary parts.\n\t* config/xtensa/xtensa.h (SPLIT_COMPLEX_ARGS): Define.\n\nFrom-SVN: r76459", "tree": {"sha": "8453d3009e4c41314b56ad71dbad9c7dd5e9c957", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8453d3009e4c41314b56ad71dbad9c7dd5e9c957"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3712281f9d5275e4b0e388ad78f62df874298726", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3712281f9d5275e4b0e388ad78f62df874298726", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3712281f9d5275e4b0e388ad78f62df874298726", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3712281f9d5275e4b0e388ad78f62df874298726/comments", "author": null, "committer": null, "parents": [{"sha": "99e5c00bc49cd444ed102642f44b2d00afdb668f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99e5c00bc49cd444ed102642f44b2d00afdb668f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99e5c00bc49cd444ed102642f44b2d00afdb668f"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "54ba106b372b6825850de5094e5a2dba21961cac", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3712281f9d5275e4b0e388ad78f62df874298726/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3712281f9d5275e4b0e388ad78f62df874298726/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3712281f9d5275e4b0e388ad78f62df874298726", "patch": "@@ -1,3 +1,9 @@\n+2004-01-23  Bob Wilson  <bob.wilson@acm.org>\n+\n+\t* config/xtensa/xtensa.c (xtensa_va_arg): Handle complex values as\n+\tseparate real and imaginary parts.\n+\t* config/xtensa/xtensa.h (SPLIT_COMPLEX_ARGS): Define.\n+\n 2004-01-23  Hartmut Penner <hpenner@de.ibm.com>\n \n \tPR target/13674"}, {"sha": "0debc3ee615d2e078f7eb74ce69424f2e014e566", "filename": "gcc/config/xtensa/xtensa.c", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3712281f9d5275e4b0e388ad78f62df874298726/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3712281f9d5275e4b0e388ad78f62df874298726/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.c?ref=3712281f9d5275e4b0e388ad78f62df874298726", "patch": "@@ -2447,6 +2447,25 @@ xtensa_va_arg (tree valist, tree type)\n   rtx array, orig_ndx, r, addr, size, va_size;\n   rtx lab_false, lab_over, lab_false2;\n \n+  /* Handle complex values as separate real and imaginary parts.  */\n+  if (TREE_CODE (type) == COMPLEX_TYPE)\n+    {\n+      rtx real_part, imag_part, concat_val, local_copy;\n+\n+      real_part = xtensa_va_arg (valist, TREE_TYPE (type));\n+      imag_part = xtensa_va_arg (valist, TREE_TYPE (type));\n+\n+      /* Make a copy of the value in case the parts are not contiguous.  */\n+      real_part = gen_rtx_MEM (TYPE_MODE (TREE_TYPE (type)), real_part);\n+      imag_part = gen_rtx_MEM (TYPE_MODE (TREE_TYPE (type)), imag_part);\n+      concat_val = gen_rtx_CONCAT (TYPE_MODE (type), real_part, imag_part);\n+\n+      local_copy = assign_temp (type, 0, 1, 0);\n+      emit_move_insn (local_copy, concat_val);\n+\n+      return XEXP (local_copy, 0);\n+    }\n+\n   f_stk = TYPE_FIELDS (va_list_type_node);\n   f_reg = TREE_CHAIN (f_stk);\n   f_ndx = TREE_CHAIN (f_reg);"}, {"sha": "88d1ba85189132527d4803806201a77256366167", "filename": "gcc/config/xtensa/xtensa.h", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3712281f9d5275e4b0e388ad78f62df874298726/gcc%2Fconfig%2Fxtensa%2Fxtensa.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3712281f9d5275e4b0e388ad78f62df874298726/gcc%2Fconfig%2Fxtensa%2Fxtensa.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.h?ref=3712281f9d5275e4b0e388ad78f62df874298726", "patch": "@@ -806,7 +806,6 @@ typedef struct xtensa_args {\n       ? PARM_BOUNDARY\t\t\t\t\t\t\t\\\n       : GET_MODE_ALIGNMENT (MODE)))\n \n-\n /* Nonzero if we do not know how to pass TYPE solely in registers.\n    We cannot do so in the following cases:\n \n@@ -823,6 +822,9 @@ typedef struct xtensa_args {\n    && (TREE_CODE (TYPE_SIZE (TYPE)) != INTEGER_CST\t\t\t\\\n        || TREE_ADDRESSABLE (TYPE)))\n \n+/* Pass complex arguments independently.  */\n+#define SPLIT_COMPLEX_ARGS 1\n+\n /* Profiling Xtensa code is typically done with the built-in profiling\n    feature of Tensilica's instruction set simulator, which does not\n    require any compiler support.  Profiling code on a real (i.e.,"}]}