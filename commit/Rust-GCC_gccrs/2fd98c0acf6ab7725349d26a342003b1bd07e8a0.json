{"sha": "2fd98c0acf6ab7725349d26a342003b1bd07e8a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmZkOThjMGFjZjZhYjc3MjUzNDlkMjZhMzQyMDAzYjFiZDA3ZThhMA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2015-07-03T12:25:10Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2015-07-03T12:25:10Z"}, "message": "Add IA MCU support to x86intrin.h\n\nx86intrin.h has useful intrinsics for instructions for IA MCU.  This\npatch adds __iamcu__ check to x86intrin.h and ia32intrin.h.\n\ngcc/\n\n\tPR target/66746.\n\t* config/i386/ia32intrin.h (__crc32b): Don't define if __iamcu__\n\tis defined.\n\t(__crc32w): Likewise.\n\t(__crc32d): Likewise.\n\t(__rdpmc): Likewise.\n\t(__rdtscp): Likewise.\n\t(_rdpmc): Likewise.\n\t(_rdtscp): Likewise.\n\t* config/i386/x86intrin.h: Only include ia32intrin.h if __iamcu__\n\tis defined.\n\ngcc/testsuite/\n\n\tPR target/66746.\n\t* gcc.target/i386/pr66746.c: New file.\n\nFrom-SVN: r225376", "tree": {"sha": "147a61707a10286355e9bdd23ff95d246142337c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/147a61707a10286355e9bdd23ff95d246142337c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2fd98c0acf6ab7725349d26a342003b1bd07e8a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fd98c0acf6ab7725349d26a342003b1bd07e8a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2fd98c0acf6ab7725349d26a342003b1bd07e8a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fd98c0acf6ab7725349d26a342003b1bd07e8a0/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "07cdc2b892ca3969fd5d8c6a281cf77f559cea43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07cdc2b892ca3969fd5d8c6a281cf77f559cea43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07cdc2b892ca3969fd5d8c6a281cf77f559cea43"}], "stats": {"total": 40, "additions": 39, "deletions": 1}, "files": [{"sha": "0335921e20eac1d722b05fb84fb8d8e3724d454f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fd98c0acf6ab7725349d26a342003b1bd07e8a0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fd98c0acf6ab7725349d26a342003b1bd07e8a0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2fd98c0acf6ab7725349d26a342003b1bd07e8a0", "patch": "@@ -1,3 +1,17 @@\n+2015-07-03  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/66746.\n+\t* config/i386/ia32intrin.h (__crc32b): Don't define if __iamcu__\n+\tis defined.\n+\t(__crc32w): Likewise.\n+\t(__crc32d): Likewise.\n+\t(__rdpmc): Likewise.\n+\t(__rdtscp): Likewise.\n+\t(_rdpmc): Likewise.\n+\t(_rdtscp): Likewise.\n+\t* config/i386/x86intrin.h: Only include ia32intrin.h if __iamcu__\n+\tis defined.\n+\n 2015-07-03  Richard Biener  <rguenther@suse.de>\n \n \t* fold-const.c (fold_mathfn_compare): Remove."}, {"sha": "b8d1c315dd435e3f50212963031bc9e30710d9dc", "filename": "gcc/config/i386/ia32intrin.h", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fd98c0acf6ab7725349d26a342003b1bd07e8a0/gcc%2Fconfig%2Fi386%2Fia32intrin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fd98c0acf6ab7725349d26a342003b1bd07e8a0/gcc%2Fconfig%2Fi386%2Fia32intrin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fia32intrin.h?ref=2fd98c0acf6ab7725349d26a342003b1bd07e8a0", "patch": "@@ -49,6 +49,8 @@ __bswapd (int __X)\n   return __builtin_bswap32 (__X);\n }\n \n+#ifndef __iamcu__\n+\n #ifndef __SSE4_2__\n #pragma GCC push_options\n #pragma GCC target(\"sse4.2\")\n@@ -82,6 +84,8 @@ __crc32d (unsigned int __C, unsigned int __V)\n #pragma GCC pop_options\n #endif /* __DISABLE_SSE4_2__ */\n \n+#endif /* __iamcu__ */\n+\n /* 32bit popcnt */\n extern __inline int\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n@@ -90,6 +94,8 @@ __popcntd (unsigned int __X)\n   return __builtin_popcount (__X);\n }\n \n+#ifndef __iamcu__\n+\n /* rdpmc */\n extern __inline unsigned long long\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n@@ -98,6 +104,8 @@ __rdpmc (int __S)\n   return __builtin_ia32_rdpmc (__S);\n }\n \n+#endif /* __iamcu__ */\n+\n /* rdtsc */\n extern __inline unsigned long long\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n@@ -106,6 +114,8 @@ __rdtsc (void)\n   return __builtin_ia32_rdtsc ();\n }\n \n+#ifndef __iamcu__\n+\n /* rdtscp */\n extern __inline unsigned long long\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n@@ -114,6 +124,8 @@ __rdtscp (unsigned int *__A)\n   return __builtin_ia32_rdtscp (__A);\n }\n \n+#endif /* __iamcu__ */\n+\n /* 8bit rol */\n extern __inline unsigned char\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n@@ -290,9 +302,11 @@ __writeeflags (unsigned int X)\n #define _bit_scan_reverse(a)\t__bsrd(a)\n #define _bswap(a)\t\t__bswapd(a)\n #define _popcnt32(a)\t\t__popcntd(a)\n+#ifndef __iamcu__\n #define _rdpmc(a)\t\t__rdpmc(a)\n-#define _rdtsc()\t\t__rdtsc()\n #define _rdtscp(a)\t\t__rdtscp(a)\n+#endif /* __iamcu__ */\n+#define _rdtsc()\t\t__rdtsc()\n #define _rotwl(a,b)\t\t__rolw((a), (b))\n #define _rotwr(a,b)\t\t__rorw((a), (b))\n #define _rotl(a,b)\t\t__rold((a), (b))"}, {"sha": "be0a1a14a0871eadd8ee4474cc357248fef5e9cd", "filename": "gcc/config/i386/x86intrin.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fd98c0acf6ab7725349d26a342003b1bd07e8a0/gcc%2Fconfig%2Fi386%2Fx86intrin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fd98c0acf6ab7725349d26a342003b1bd07e8a0/gcc%2Fconfig%2Fi386%2Fx86intrin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fx86intrin.h?ref=2fd98c0acf6ab7725349d26a342003b1bd07e8a0", "patch": "@@ -26,6 +26,8 @@\n \n #include <ia32intrin.h>\n \n+#ifndef __iamcu__\n+\n #include <mmintrin.h>\n \n #include <xmmintrin.h>\n@@ -86,4 +88,7 @@\n #include <xsavecintrin.h>\n \n #include <mwaitxintrin.h>\n+\n+#endif /* __iamcu__ */\n+\n #endif /* _X86INTRIN_H_INCLUDED */"}, {"sha": "05344971c993d9cf7a7b1188c53dfc303debaf9a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fd98c0acf6ab7725349d26a342003b1bd07e8a0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fd98c0acf6ab7725349d26a342003b1bd07e8a0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2fd98c0acf6ab7725349d26a342003b1bd07e8a0", "patch": "@@ -1,3 +1,8 @@\n+2015-07-03  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/66746.\n+\t* gcc.target/i386/pr66746.c: New file.\n+\n 2015-07-03  Christophe Lyon  <christophe.lyon@linaro.org>\n \n \t* gcc.target/aarch64/advsimd-intrinsics/vget_lane.c: New testcase."}]}