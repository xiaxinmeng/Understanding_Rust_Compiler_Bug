{"sha": "b2433fcde0f08059731043f5af3d1ad687a1fbba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjI0MzNmY2RlMGYwODA1OTczMTA0M2Y1YWYzZDFhZDY4N2ExZmJiYQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-04-22T18:47:52Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-04-22T18:47:52Z"}, "message": "* flow.c (mark_used_reg): Hack around rs6000 eliminable pic reg.\n\nFrom-SVN: r33342", "tree": {"sha": "224a74aedf2a76f794c1e8b618fa2c83f7f84084", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/224a74aedf2a76f794c1e8b618fa2c83f7f84084"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b2433fcde0f08059731043f5af3d1ad687a1fbba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2433fcde0f08059731043f5af3d1ad687a1fbba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2433fcde0f08059731043f5af3d1ad687a1fbba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2433fcde0f08059731043f5af3d1ad687a1fbba/comments", "author": null, "committer": null, "parents": [{"sha": "6f81b1ade69b0a968ba6fe5ea1e633cb75a11db4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f81b1ade69b0a968ba6fe5ea1e633cb75a11db4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f81b1ade69b0a968ba6fe5ea1e633cb75a11db4"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "7b3844a862e44c870b5e14ff5b39eeb3fabff0c7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2433fcde0f08059731043f5af3d1ad687a1fbba/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2433fcde0f08059731043f5af3d1ad687a1fbba/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b2433fcde0f08059731043f5af3d1ad687a1fbba", "patch": "@@ -1,3 +1,7 @@\n+2000-04-22  Richard Henderson  <rth@cygnus.com>\n+\n+\t* flow.c (mark_used_reg): Hack around rs6000 eliminable pic reg.\n+\n 2000-04-22  Richard Henderson  <rth@cygnus.com>\n \n \t* diagnostic.c (init_output_buffer): Don't initialize format_args."}, {"sha": "24ae92c9b05aaa91ffd5ad972b1ce69f43c939d3", "filename": "gcc/flow.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2433fcde0f08059731043f5af3d1ad687a1fbba/gcc%2Fflow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2433fcde0f08059731043f5af3d1ad687a1fbba/gcc%2Fflow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflow.c?ref=b2433fcde0f08059731043f5af3d1ad687a1fbba", "patch": "@@ -4473,12 +4473,15 @@ mark_used_reg (pbi, reg, cond, insn)\n \t     be eliminated, reload will set it live at that point.\n \n \t     Otherwise, record that this function uses this register.  */\n+\t  /* ??? The PPC backend tries to \"eliminate\" on the pic\n+\t     register to itself.  This should be fixed.  In the mean\n+\t     time, hack around it.  */\n \n-\t  if (! TEST_HARD_REG_BIT (elim_reg_set, regno))\n+\t  if (! (TEST_HARD_REG_BIT (elim_reg_set, regno)\n+\t         && (regno == FRAME_POINTER_REGNUM\n+\t\t     || regno == ARG_POINTER_REGNUM)))\n \t    {\n \t      int n = HARD_REGNO_NREGS (regno, GET_MODE (reg));\n-\t      if (n == 0)\n-\t\tn = 1;\n \t      do\n \t\tregs_ever_live[regno + --n] = 1;\n \t      while (n > 0);"}]}