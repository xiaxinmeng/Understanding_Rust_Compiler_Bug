{"sha": "bf4066870d1a42226e711c1e941f14733f648f6d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmY0MDY2ODcwZDFhNDIyMjZlNzExYzFlOTQxZjE0NzMzZjY0OGY2ZA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2009-06-10T02:01:06Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2009-06-10T02:01:06Z"}, "message": "system.h (HAVE_DESIGNATED_INITIALIZERS): Don't define if compiling with C++.\n\n\t* system.h (HAVE_DESIGNATED_INITIALIZERS): Don't define if\n\tcompiling with C++.\n\t* optabs.c (optab_table): Only use designated initializers if\n\tHAVE_DESIGNATED_INITIALIZERS is defined.\n\t(convert_optab_table): Likewise.\n\t(init_optabs): Always call init_insn_codes if\n\tHAVE_DESIGNATED_INITIALIZERS is not defined.\n\nFrom-SVN: r148336", "tree": {"sha": "db7cab5db121bc9f4ea32f384356de3085b43d24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db7cab5db121bc9f4ea32f384356de3085b43d24"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf4066870d1a42226e711c1e941f14733f648f6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf4066870d1a42226e711c1e941f14733f648f6d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf4066870d1a42226e711c1e941f14733f648f6d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf4066870d1a42226e711c1e941f14733f648f6d/comments", "author": null, "committer": null, "parents": [{"sha": "780ca5bf715142256f55d6bda4a282c9a3529d33", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/780ca5bf715142256f55d6bda4a282c9a3529d33", "html_url": "https://github.com/Rust-GCC/gccrs/commit/780ca5bf715142256f55d6bda4a282c9a3529d33"}], "stats": {"total": 19, "additions": 15, "deletions": 4}, "files": [{"sha": "cb6507a63b543927e975bc3d80dee31df8fc91e5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf4066870d1a42226e711c1e941f14733f648f6d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf4066870d1a42226e711c1e941f14733f648f6d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bf4066870d1a42226e711c1e941f14733f648f6d", "patch": "@@ -1,3 +1,13 @@\n+2009-06-09  Ian Lance Taylor  <iant@google.com>\n+\n+\t* system.h (HAVE_DESIGNATED_INITIALIZERS): Don't define if\n+\tcompiling with C++.\n+\t* optabs.c (optab_table): Only use designated initializers if\n+\tHAVE_DESIGNATED_INITIALIZERS is defined.\n+\t(convert_optab_table): Likewise.\n+\t(init_optabs): Always call init_insn_codes if\n+\tHAVE_DESIGNATED_INITIALIZERS is not defined.\n+\n 2009-06-09  Ian Lance Taylor  <iant@google.com>\n \n \t* targhooks.c (default_builtin_vectorized_function): Change fn"}, {"sha": "257edd9e648f6755d0fbe6bb6d248ede55520327", "filename": "gcc/optabs.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf4066870d1a42226e711c1e941f14733f648f6d/gcc%2Foptabs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf4066870d1a42226e711c1e941f14733f648f6d/gcc%2Foptabs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptabs.c?ref=bf4066870d1a42226e711c1e941f14733f648f6d", "patch": "@@ -54,7 +54,7 @@ along with GCC; see the file COPYING3.  If not see\n \n    See expr.h for documentation of these optabs.  */\n \n-#if GCC_VERSION >= 4000\n+#if GCC_VERSION >= 4000 && HAVE_DESIGNATED_INITIALIZERS\n __extension__ struct optab_d optab_table[OTI_MAX]\n   = { [0 ... OTI_MAX - 1].handlers[0 ... NUM_MACHINE_MODES - 1].insn_code\n       = CODE_FOR_nothing };\n@@ -66,7 +66,7 @@ struct optab_d optab_table[OTI_MAX];\n rtx libfunc_table[LTI_MAX];\n \n /* Tables of patterns for converting one mode to another.  */\n-#if GCC_VERSION >= 4000\n+#if GCC_VERSION >= 4000 && HAVE_DESIGNATED_INITIALIZERS\n __extension__ struct convert_optab_d convert_optab_table[COI_MAX]\n   = { [0 ... COI_MAX - 1].handlers[0 ... NUM_MACHINE_MODES - 1]\n \t[0 ... NUM_MACHINE_MODES - 1].insn_code\n@@ -6153,7 +6153,7 @@ init_optabs (void)\n       vcondu_gen_code[i] = CODE_FOR_nothing;\n     }\n \n-#if GCC_VERSION >= 4000\n+#if GCC_VERSION >= 4000 && HAVE_DESIGNATED_INITIALIZERS\n   /* We statically initialize the insn_codes with CODE_FOR_nothing.  */\n   if (reinit)\n     init_insn_codes ();"}, {"sha": "51d9c995c3cf86783d6d22ccdc58264e36e6e678", "filename": "gcc/system.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf4066870d1a42226e711c1e941f14733f648f6d/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf4066870d1a42226e711c1e941f14733f648f6d/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=bf4066870d1a42226e711c1e941f14733f648f6d", "patch": "@@ -452,7 +452,8 @@ extern int vsnprintf(char *, size_t, const char *, va_list);\n /* 1 if we have C99 designated initializers.  */\n #if !defined(HAVE_DESIGNATED_INITIALIZERS)\n #define HAVE_DESIGNATED_INITIALIZERS \\\n-  ((GCC_VERSION >= 2007) || (__STDC_VERSION__ >= 199901L))\n+  (((GCC_VERSION >= 2007) || (__STDC_VERSION__ >= 199901L)) \\\n+   && !defined(__cplusplus))\n #endif\n \n #if HAVE_SYS_STAT_H"}]}