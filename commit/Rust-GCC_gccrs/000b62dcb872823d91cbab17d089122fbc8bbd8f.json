{"sha": "000b62dcb872823d91cbab17d089122fbc8bbd8f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDAwYjYyZGNiODcyODIzZDkxY2JhYjE3ZDA4OTEyMmZiYzhiYmQ4Zg==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2005-05-02T16:57:53Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2005-05-02T16:57:53Z"}, "message": "tree-ssa-sink.c (nearest_common_dominator_of_uses): Factor out common code.\n\n\t* tree-ssa-sink.c (nearest_common_dominator_of_uses): Factor\n\tout common code.\n\nFrom-SVN: r99105", "tree": {"sha": "12e7611ab866dff0663a67068c1f598cb5547c16", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/12e7611ab866dff0663a67068c1f598cb5547c16"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/000b62dcb872823d91cbab17d089122fbc8bbd8f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/000b62dcb872823d91cbab17d089122fbc8bbd8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/000b62dcb872823d91cbab17d089122fbc8bbd8f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/000b62dcb872823d91cbab17d089122fbc8bbd8f/comments", "author": null, "committer": null, "parents": [{"sha": "075a0d547539e2229af09e58ee3917544dcf1bcc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/075a0d547539e2229af09e58ee3917544dcf1bcc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/075a0d547539e2229af09e58ee3917544dcf1bcc"}], "stats": {"total": 25, "additions": 11, "deletions": 14}, "files": [{"sha": "641754b9cda62bb0566c33ee777513d2a114b16f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/000b62dcb872823d91cbab17d089122fbc8bbd8f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/000b62dcb872823d91cbab17d089122fbc8bbd8f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=000b62dcb872823d91cbab17d089122fbc8bbd8f", "patch": "@@ -5,6 +5,9 @@\n \tUse VEC instead of VARRAY.\n \t(equiv_free): New.\n \n+\t* tree-ssa-sink.c (nearest_common_dominator_of_uses): Factor\n+\tout common code.\n+\n 2005-05-02  Paolo Bonzini  <bonzini@gnu.org>\n \n         * c-common.c (resolve_overloaded_builtin): Forward to target"}, {"sha": "8041686f1edf1ae58b2fd1e331539c698d82ae89", "filename": "gcc/tree-ssa-sink.c", "status": "modified", "additions": 8, "deletions": 14, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/000b62dcb872823d91cbab17d089122fbc8bbd8f/gcc%2Ftree-ssa-sink.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/000b62dcb872823d91cbab17d089122fbc8bbd8f/gcc%2Ftree-ssa-sink.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sink.c?ref=000b62dcb872823d91cbab17d089122fbc8bbd8f", "patch": "@@ -238,31 +238,25 @@ nearest_common_dominator_of_uses (tree stmt)\n         {\n \t  tree usestmt = USE_STMT (use_p);\n \t  basic_block useblock;\n+\n \t  if (TREE_CODE (usestmt) == PHI_NODE)\n \t    {\n \t      int idx = PHI_ARG_INDEX_FROM_USE (use_p);\n \n \t      useblock = PHI_ARG_EDGE (usestmt, idx)->src;\n-\t      /* Short circuit. Nothing dominates the entry block.  */\n-\t      if (useblock == ENTRY_BLOCK_PTR)\n-\t\t{\n-\t\t  BITMAP_FREE (blocks);\n-\t\t  return NULL;\n-\t\t}\n-\t      bitmap_set_bit (blocks, useblock->index);\n \t    }\n \t  else\n \t    {\n \t      useblock = bb_for_stmt (usestmt);\n+\t    }\n \n-\t      /* Short circuit. Nothing dominates the entry block.  */\n-\t      if (useblock == ENTRY_BLOCK_PTR)\n-\t\t{\n-\t\t  BITMAP_FREE (blocks);\n-\t\t  return NULL;\n-\t\t}\n-\t      bitmap_set_bit (blocks, useblock->index);\n+\t  /* Short circuit. Nothing dominates the entry block.  */\n+\t  if (useblock == ENTRY_BLOCK_PTR)\n+\t    {\n+\t      BITMAP_FREE (blocks);\n+\t      return NULL;\n \t    }\n+\t  bitmap_set_bit (blocks, useblock->index);\n \t}\n     }\n   commondom = BASIC_BLOCK (bitmap_first_set_bit (blocks));"}]}