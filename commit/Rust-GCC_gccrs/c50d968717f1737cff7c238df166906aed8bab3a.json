{"sha": "c50d968717f1737cff7c238df166906aed8bab3a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzUwZDk2ODcxN2YxNzM3Y2ZmN2MyMzhkZjE2NjkwNmFlZDhiYWIzYQ==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2009-08-25T05:22:14Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2009-08-25T05:22:14Z"}, "message": "re PR fortran/41162 (416.gamess in SPEC CPU 2006 failed to build)\n\n2009-08-24  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/41162\n\t* io.c (check_format): Fix to not error on slash after P. Fix some\n\terror loci.\n\nFrom-SVN: r151074", "tree": {"sha": "c64b5a0c557c6649b2e91acea6d6ab1955ed2f5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c64b5a0c557c6649b2e91acea6d6ab1955ed2f5e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c50d968717f1737cff7c238df166906aed8bab3a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c50d968717f1737cff7c238df166906aed8bab3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c50d968717f1737cff7c238df166906aed8bab3a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c50d968717f1737cff7c238df166906aed8bab3a/comments", "author": null, "committer": null, "parents": [{"sha": "4551438c75836ee380e2bf840f2646fda23e3743", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4551438c75836ee380e2bf840f2646fda23e3743", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4551438c75836ee380e2bf840f2646fda23e3743"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "15881c94ca0d083890233ef5d285bc4503598d2a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c50d968717f1737cff7c238df166906aed8bab3a/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c50d968717f1737cff7c238df166906aed8bab3a/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c50d968717f1737cff7c238df166906aed8bab3a", "patch": "@@ -1,3 +1,9 @@\n+2009-08-24  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/41162\n+\t* io.c (check_format): Fix to not error on slash after P. Fix some\n+\terror loci.\n+\t\n 2009-08-24  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR fortran/41154"}, {"sha": "a0a4356de39e0a5c339fc1bdb69fcb5a4ee5e6ed", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c50d968717f1737cff7c238df166906aed8bab3a/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c50d968717f1737cff7c238df166906aed8bab3a/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=c50d968717f1737cff7c238df166906aed8bab3a", "patch": "@@ -694,7 +694,7 @@ check_format (bool is_input)\n \tgoto fail;\n       if (gfc_option.allow_std < GFC_STD_F2003 && t != FMT_COMMA\n \t  && t != FMT_F && t != FMT_E && t != FMT_EN && t != FMT_ES\n-\t  && t != FMT_D && t != FMT_G && t != FMT_RPAREN)\n+\t  && t != FMT_D && t != FMT_G && t != FMT_RPAREN && t != FMT_SLASH)\n \t{\n \t  error = _(\"Comma required after P descriptor\");\n \t  goto syntax;\n@@ -708,7 +708,7 @@ check_format (bool is_input)\n \t\tgoto fail;\n \t    }\n           if (t != FMT_F && t != FMT_E && t != FMT_EN && t != FMT_ES && t != FMT_D\n-\t      && t != FMT_G && t != FMT_RPAREN)\n+\t      && t != FMT_G && t != FMT_RPAREN && t != FMT_SLASH)\n \t    {\n \t      error = _(\"Comma required after P descriptor\");\n \t      goto syntax;\n@@ -839,6 +839,9 @@ check_format (bool is_input)\n \t    gfc_warning (\"Period required in format \"\n \t\t\t \"specifier %s at %L\", token_to_string (t),\n \t\t\t  &format_locus);\n+\t  /* If we go to finished, we need to unwind this\n+\t     before the next round.  */\n+\t  format_locus.nextc -= format_string_pos;\n \t  saved_token = u;\n \t  break;\n \t}\n@@ -1009,6 +1012,10 @@ check_format (bool is_input)\n       if (gfc_notify_std (GFC_STD_GNU, \"Extension: Missing comma at %L\",\n \t  &format_locus) == FAILURE)\n \treturn FAILURE;\n+      /* If we do not actually return a failure, we need to unwind this\n+         before the next round.  */\n+      if (mode != MODE_FORMAT)\n+\tformat_locus.nextc -= format_string_pos;\n       goto format_item_1;\n     }\n \n@@ -1068,6 +1075,10 @@ check_format (bool is_input)\n       if (gfc_notify_std (GFC_STD_GNU, \"Extension: Missing comma at %L\",\n \t  &format_locus) == FAILURE)\n \treturn FAILURE;\n+      /* If we do not actually return a failure, we need to unwind this\n+         before the next round.  */\n+      if (mode != MODE_FORMAT)\n+\tformat_locus.nextc -= format_string_pos;\n       saved_token = t;\n       break;\n     }"}]}