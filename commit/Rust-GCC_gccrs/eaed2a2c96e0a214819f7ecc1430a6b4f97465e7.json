{"sha": "eaed2a2c96e0a214819f7ecc1430a6b4f97465e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWFlZDJhMmM5NmUwYTIxNDgxOWY3ZWNjMTQzMGE2YjRmOTc0NjVlNw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-03-24T12:26:10Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-03-24T12:26:10Z"}, "message": "[multiple changes]\n\n2015-03-24  Gary Dismukes  <dismukes@adacore.com>\n\n\t* sem_ch3.adb: Minor typo fix (missing paren).\n\n2015-03-24  Robert Dewar  <dewar@adacore.com>\n\n\t* sinfo.ads: Update comment.\n\n2015-03-24  Robert Dewar  <dewar@adacore.com>\n\n\t* exp_attr.adb: Add entry for typ'Deref.\n\t* sem_attr.adb (Deref): New GNAT attribute.\n\t* sem_attr.ads: Add entry for new GNAT attribute Deref.\n\t* snames.ads-tmpl: Add entries for new attribute Deref.\n\nFrom-SVN: r221630", "tree": {"sha": "1b0c9f34ca5c58ccd219dd2fba8876fd436ebd64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b0c9f34ca5c58ccd219dd2fba8876fd436ebd64"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/comments", "author": null, "committer": null, "parents": [{"sha": "5f6061af2d05babf0c0053d51592a0612d23a196", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f6061af2d05babf0c0053d51592a0612d23a196", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f6061af2d05babf0c0053d51592a0612d23a196"}], "stats": {"total": 54, "additions": 48, "deletions": 6}, "files": [{"sha": "ca430dc9da3cb3aa4d549b1101ec7fd12d6c46de", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=eaed2a2c96e0a214819f7ecc1430a6b4f97465e7", "patch": "@@ -1,3 +1,18 @@\n+2015-03-24  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* sem_ch3.adb: Minor typo fix (missing paren).\n+\n+2015-03-24  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sinfo.ads: Update comment.\n+\n+2015-03-24  Robert Dewar  <dewar@adacore.com>\n+\n+\t* exp_attr.adb: Add entry for typ'Deref.\n+\t* sem_attr.adb (Deref): New GNAT attribute.\n+\t* sem_attr.ads: Add entry for new GNAT attribute Deref.\n+\t* snames.ads-tmpl: Add entries for new attribute Deref.\n+\n 2015-03-24  Ed Schonberg  <schonberg@adacore.com>\n \n \t* sem_ch13.adb (Rep_Item_Too_Early): allow pragma Convention"}, {"sha": "d80364634b09035cc45712acb7a3b8ca58d0753a", "filename": "gcc/ada/exp_attr.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fexp_attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fexp_attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_attr.adb?ref=eaed2a2c96e0a214819f7ecc1430a6b4f97465e7", "patch": "@@ -7103,6 +7103,7 @@ package body Exp_Attr is\n       when Attribute_Bit_Order                    |\n            Attribute_Code_Address                 |\n            Attribute_Definite                     |\n+           Attribute_Deref                        |\n            Attribute_Null_Parameter               |\n            Attribute_Passed_By_Reference          |\n            Attribute_Pool_Address                 |"}, {"sha": "68901b1adf5b716f783484a4fc31bd43c0040f7a", "filename": "gcc/ada/sem_attr.adb", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fsem_attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fsem_attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_attr.adb?ref=eaed2a2c96e0a214819f7ecc1430a6b4f97465e7", "patch": "@@ -3540,6 +3540,16 @@ package body Sem_Attr is\n          Check_Floating_Point_Type_0;\n          Set_Etype (N, Standard_Boolean);\n \n+      -----------\n+      -- Deref --\n+      -----------\n+\n+      when Attribute_Deref =>\n+         Check_Type;\n+         Check_E1;\n+         Resolve (E1, RTE (RE_Address));\n+         Set_Etype (N, P_Type);\n+\n       ---------------------\n       -- Descriptor_Size --\n       ---------------------\n@@ -9642,6 +9652,7 @@ package body Sem_Attr is\n            Attribute_Count                        |\n            Attribute_Default_Bit_Order            |\n            Attribute_Default_Scalar_Storage_Order |\n+           Attribute_Deref                        |\n            Attribute_Elaborated                   |\n            Attribute_Elab_Body                    |\n            Attribute_Elab_Spec                    |"}, {"sha": "c1e592844fabf02f127616b0706235e95ab6b51f", "filename": "gcc/ada/sem_attr.ads", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fsem_attr.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fsem_attr.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_attr.ads?ref=eaed2a2c96e0a214819f7ecc1430a6b4f97465e7", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2014, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2015, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -42,9 +42,9 @@ package Sem_Attr is\n    -- Implementation Dependent Attributes --\n    -----------------------------------------\n \n-   --  This section describes the implementation dependent attributes\n-   --  provided in GNAT, as well as constructing an array of flags\n-   --  indicating which attributes these are.\n+   --  This section describes the implementation dependent attributes provided\n+   --  in GNAT, as well as constructing an array of flags indicating which\n+   --  attributes these are.\n \n    Attribute_Impl_Def : Attribute_Class_Array := Attribute_Class_Array'(\n \n@@ -152,6 +152,17 @@ package Sem_Attr is\n       --  Default_Scalar_Storage_Order, or equal to Default_Bit_Order if\n       --  unspecified) as a System.Bit_Order value. This is a static attribute.\n \n+      -----------\n+      -- Deref --\n+      -----------\n+\n+      Attribute_Deref => True,\n+      --  typ'Deref (expr) is valid only if expr is of type System'Address.\n+      --  The result is an object of type typ that is obtained by treating the\n+      --  address as an access-to-typ value that points to the result. It is\n+      --  basically equivalent to (atyp!expr).all where atyp is an access type\n+      --  for the type.\n+\n       ---------------\n       -- Elab_Body --\n       ---------------"}, {"sha": "64761f8a61b45cd1205c6fa9869a72910ca9d9f3", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=eaed2a2c96e0a214819f7ecc1430a6b4f97465e7", "patch": "@@ -3161,7 +3161,7 @@ package body Sem_Ch3 is\n            and then No (Corresponding_Generic_Association (Parent (Obj_Id)))\n \n            --  Don't give this for internally generated entities (such as the\n-           --  FIRST and LAST temporaries generated for bounds.\n+           --  FIRST and LAST temporaries generated for bounds).\n \n            and then Comes_From_Source (Obj_Id)\n          then"}, {"sha": "c2a8bf6fbc33d04f56aa1337bcf6393335db053b", "filename": "gcc/ada/sinfo.ads", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fsinfo.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fsinfo.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsinfo.ads?ref=eaed2a2c96e0a214819f7ecc1430a6b4f97465e7", "patch": "@@ -827,7 +827,9 @@ package Sinfo is\n    --    setting tag values, etc. N_Object_Declaration nodes also have this\n    --    flag defined. Here it is used to indicate that an initialization\n    --    expression is valid, even where it would normally not be allowed\n-   --    (e.g. where the type involved is limited).\n+   --    (e.g. where the type involved is limited). It is also used to stop\n+   --    a Force_Evaluation call for an unchecked conversion, but this usage\n+   --    is unclear and not documented ???\n \n    --  Associated_Node (Node4-Sem)\n    --    Present in nodes that can denote an entity: identifiers, character"}, {"sha": "cd9d7f118b642529d42010422ee4a89660ad67ba", "filename": "gcc/ada/snames.ads-tmpl", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fsnames.ads-tmpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaed2a2c96e0a214819f7ecc1430a6b4f97465e7/gcc%2Fada%2Fsnames.ads-tmpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.ads-tmpl?ref=eaed2a2c96e0a214819f7ecc1430a6b4f97465e7", "patch": "@@ -845,6 +845,7 @@ package Snames is\n    Name_Definite                       : constant Name_Id := N + $;\n    Name_Delta                          : constant Name_Id := N + $;\n    Name_Denorm                         : constant Name_Id := N + $;\n+   Name_Deref                          : constant Name_Id := N + $; -- GNAT\n    Name_Descriptor_Size                : constant Name_Id := N + $;\n    Name_Digits                         : constant Name_Id := N + $;\n    Name_Elaborated                     : constant Name_Id := N + $; -- GNAT\n@@ -1476,6 +1477,7 @@ package Snames is\n       Attribute_Definite,\n       Attribute_Delta,\n       Attribute_Denorm,\n+      Attribute_Deref,\n       Attribute_Descriptor_Size,\n       Attribute_Digits,\n       Attribute_Elaborated,"}]}