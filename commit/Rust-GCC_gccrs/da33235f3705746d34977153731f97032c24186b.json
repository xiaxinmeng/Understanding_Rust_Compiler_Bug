{"sha": "da33235f3705746d34977153731f97032c24186b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGEzMzIzNWYzNzA1NzQ2ZDM0OTc3MTUzNzMxZjk3MDMyYzI0MTg2Yg==", "commit": {"author": {"name": "Ilya Enkovich", "email": "enkovich.gnu@gmail.com", "date": "2015-12-11T09:43:52Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2015-12-11T09:43:52Z"}, "message": "i386.c (ix86_get_mask_mode): Use scalar modes for 32 and 16 byte boolean vectors when possible.\n\ngcc/\n\n\t* config/i386/i386.c (ix86_get_mask_mode): Use scalar\n\tmodes for 32 and 16 byte boolean vectors when possible.\n\ngcc/testsuite/\n\n\t* gcc.dg/vect/vect-32-chars.c: New test.\n\nFrom-SVN: r231553", "tree": {"sha": "ad916805b06b8afdced15765ec76da912a156ecd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad916805b06b8afdced15765ec76da912a156ecd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da33235f3705746d34977153731f97032c24186b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da33235f3705746d34977153731f97032c24186b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da33235f3705746d34977153731f97032c24186b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da33235f3705746d34977153731f97032c24186b/comments", "author": null, "committer": null, "parents": [{"sha": "5d59ed6332df25f0ae59660dc127a4106bc1b7db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d59ed6332df25f0ae59660dc127a4106bc1b7db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d59ed6332df25f0ae59660dc127a4106bc1b7db"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "bc3f17201d0298892ecc255327f0869db283ea28", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da33235f3705746d34977153731f97032c24186b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da33235f3705746d34977153731f97032c24186b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=da33235f3705746d34977153731f97032c24186b", "patch": "@@ -1,3 +1,8 @@\n+2015-12-11  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\t* config/i386/i386.c (ix86_get_mask_mode): Use scalar\n+\tmodes for 32 and 16 byte boolean vectors when possible.\n+\n 2015-12-11  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \tPR rtl-optimization/67778"}, {"sha": "e565c0bc643a13ba65f2c53843dc2486c519994e", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da33235f3705746d34977153731f97032c24186b/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da33235f3705746d34977153731f97032c24186b/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=da33235f3705746d34977153731f97032c24186b", "patch": "@@ -53533,7 +53533,8 @@ ix86_get_mask_mode (unsigned nunits, unsigned vector_size)\n   unsigned elem_size = vector_size / nunits;\n \n   /* Scalar mask case.  */\n-  if (TARGET_AVX512F && vector_size == 64)\n+  if ((TARGET_AVX512F && vector_size == 64)\n+      || (TARGET_AVX512VL && (vector_size == 32 || vector_size == 16)))\n     {\n       if (elem_size == 4 || elem_size == 8 || TARGET_AVX512BW)\n \treturn smallest_mode_for_size (nunits, MODE_INT);"}, {"sha": "9550dc22ecd0c09af2ac2020f25f8fdbbf750bac", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da33235f3705746d34977153731f97032c24186b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da33235f3705746d34977153731f97032c24186b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=da33235f3705746d34977153731f97032c24186b", "patch": "@@ -1,3 +1,7 @@\n+2015-12-11  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\t* gcc.dg/vect/vect-32-chars.c: New test.\n+\n 2015-12-11  Jan Hubicka  <hubicka@ucw.cz>\n \n \tPR ipa/61886"}, {"sha": "0af5d2d19b453220969c25200e3059a49cd25477", "filename": "gcc/testsuite/gcc.dg/vect/vect-32-chars.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da33235f3705746d34977153731f97032c24186b/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-32-chars.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da33235f3705746d34977153731f97032c24186b/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-32-chars.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-32-chars.c?ref=da33235f3705746d34977153731f97032c24186b", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-mavx512bw -mavx512vl\" { target { i?86-*-* x86_64-*-* } } } */\n+\n+char a[32];\n+char b[32];\n+char c[32];\n+\n+void test()\n+{\n+  int i = 0;\n+  for (i = 0; i < 32; i++)\n+    if (b[i] > 0)\n+      a[i] = c[i];\n+}\n+\n+/* { dg-final { scan-tree-dump \"vectorized 1 loops\" \"vect\" { target { i?86-*-* x86_64-*-* } } } } */"}]}