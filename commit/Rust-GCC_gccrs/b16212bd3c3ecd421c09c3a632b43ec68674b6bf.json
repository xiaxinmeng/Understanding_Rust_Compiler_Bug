{"sha": "b16212bd3c3ecd421c09c3a632b43ec68674b6bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjE2MjEyYmQzYzNlY2Q0MjFjMDljM2E2MzJiNDNlYzY4Njc0YjZiZg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2012-04-11T11:27:50Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2012-04-11T11:27:50Z"}, "message": "re PR libstdc++/52931 (std::hash shouldn't be defined for unknown types)\n\n2012-04-11  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR libstdc++/52931\n\t* include/bits/functional_hash.h (struct hash): Remove definition.\n\t* testsuite/20_util/hash/52931.cc: New.\n\nFrom-SVN: r186310", "tree": {"sha": "45ce3b792680eac55a3a1dfbe1e7257ac5d7704f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45ce3b792680eac55a3a1dfbe1e7257ac5d7704f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b16212bd3c3ecd421c09c3a632b43ec68674b6bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b16212bd3c3ecd421c09c3a632b43ec68674b6bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b16212bd3c3ecd421c09c3a632b43ec68674b6bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b16212bd3c3ecd421c09c3a632b43ec68674b6bf/comments", "author": null, "committer": null, "parents": [{"sha": "32ed5fcc3a447b2c0af09658f3c474d30cff2f00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32ed5fcc3a447b2c0af09658f3c474d30cff2f00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32ed5fcc3a447b2c0af09658f3c474d30cff2f00"}], "stats": {"total": 48, "additions": 41, "deletions": 7}, "files": [{"sha": "de0809829f5be194132f095039b83caba04386ca", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b16212bd3c3ecd421c09c3a632b43ec68674b6bf/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b16212bd3c3ecd421c09c3a632b43ec68674b6bf/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=b16212bd3c3ecd421c09c3a632b43ec68674b6bf", "patch": "@@ -1,3 +1,9 @@\n+2012-04-11  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR libstdc++/52931\n+\t* include/bits/functional_hash.h (struct hash): Remove definition.\n+\t* testsuite/20_util/hash/52931.cc: New.\n+\n 2012-04-11  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR 24985"}, {"sha": "69c186c57950fd50148fbe07d99187ba7aa30b5d", "filename": "libstdc++-v3/include/bits/functional_hash.h", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b16212bd3c3ecd421c09c3a632b43ec68674b6bf/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffunctional_hash.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b16212bd3c3ecd421c09c3a632b43ec68674b6bf/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffunctional_hash.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Ffunctional_hash.h?ref=b16212bd3c3ecd421c09c3a632b43ec68674b6bf", "patch": "@@ -1,6 +1,7 @@\n // functional_hash.h header -*- C++ -*-\n \n-// Copyright (C) 2007, 2008, 2009, 2010, 2011 Free Software Foundation, Inc.\n+// Copyright (C) 2007, 2008, 2009, 2010, 2011, 2012\n+// Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n // software; you can redistribute it and/or modify it under the\n@@ -55,12 +56,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n   /// Primary class template hash.\n   template<typename _Tp>\n-    struct hash : public __hash_base<size_t, _Tp>\n-    {\n-      static_assert(sizeof(_Tp) < 0,\n-\t\t    \"std::hash is not specialized for this type\");\n-      size_t operator()(const _Tp&) const noexcept;\n-    };\n+    struct hash;\n \n   /// Partial specializations for pointer types.\n   template<typename _Tp>"}, {"sha": "f30a3e7d17aa997c0f88eaf0bfbd2cd3f2c32afb", "filename": "libstdc++-v3/testsuite/20_util/hash/52931.cc", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b16212bd3c3ecd421c09c3a632b43ec68674b6bf/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fhash%2F52931.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b16212bd3c3ecd421c09c3a632b43ec68674b6bf/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fhash%2F52931.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fhash%2F52931.cc?ref=b16212bd3c3ecd421c09c3a632b43ec68674b6bf", "patch": "@@ -0,0 +1,32 @@\n+// { dg-options \"-std=gnu++11\" }\n+// { dg-do compile }\n+\n+// Copyright (C) 2012 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+//\n+// You should have received a copy of the GNU General Public License\n+// along with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+#include <type_traits>\n+#include <functional>\n+\n+class S{}; // No hash specialization\n+\n+template<class T>\n+auto f(int) -> decltype(std::hash<T>(), std::true_type());\n+\n+template<class T>\n+auto f(...) -> decltype(std::false_type());\n+\n+static_assert(!decltype(f<S>(0))::value, \"\");"}]}