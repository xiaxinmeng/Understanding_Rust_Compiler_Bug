{"sha": "272e2587a20cf755e9180937aec2d64a7fc35b84", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjcyZTI1ODdhMjBjZjc1NWU5MTgwOTM3YWVjMmQ2NGE3ZmMzNWI4NA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-08-02T22:27:33Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-08-02T22:27:33Z"}, "message": "(_trampoline): Rework last change; both getpagesize and mprotect are\nin cygwin32.\n\nFrom-SVN: r14636", "tree": {"sha": "e5d9d2681422327142eb3e7b74a186eb6bbc25a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5d9d2681422327142eb3e7b74a186eb6bbc25a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/272e2587a20cf755e9180937aec2d64a7fc35b84", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/272e2587a20cf755e9180937aec2d64a7fc35b84", "html_url": "https://github.com/Rust-GCC/gccrs/commit/272e2587a20cf755e9180937aec2d64a7fc35b84", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/272e2587a20cf755e9180937aec2d64a7fc35b84/comments", "author": null, "committer": null, "parents": [{"sha": "b080c137d7b249435e302fc38b3e3745deace292", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b080c137d7b249435e302fc38b3e3745deace292", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b080c137d7b249435e302fc38b3e3745deace292"}], "stats": {"total": 28, "additions": 15, "deletions": 13}, "files": [{"sha": "eb6a9ba00a093c898cef66b87de565631d634368", "filename": "gcc/libgcc2.c", "status": "modified", "additions": 15, "deletions": 13, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/272e2587a20cf755e9180937aec2d64a7fc35b84/gcc%2Flibgcc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/272e2587a20cf755e9180937aec2d64a7fc35b84/gcc%2Flibgcc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.c?ref=272e2587a20cf755e9180937aec2d64a7fc35b84", "patch": "@@ -2718,9 +2718,7 @@ __clear_cache (char *beg, char *end)\n \n /* Jump to a trampoline, loading the static chain address.  */\n \n-#ifdef WINNT\n-\n-#ifndef __CYGWIN32__\n+#if defined(WINNT) && ! defined(__CYGWIN32__)\n \n long getpagesize()\n {\n@@ -2731,28 +2729,32 @@ long getpagesize()\n #endif\n }\n \n-#endif\n-\n #ifdef i386\n extern int VirtualProtect (char *, int, int, int *) __attribute__((stdcall));\n #endif\n \n-int mprotect(char *addr, int len, int prot)\n+int\n+mprotect (char *addr, int len, int prot)\n {\n   int np, op;\n \n-  if (prot == 7) np = 0x40;\n-  else if (prot == 5) np = 0x20;\n-  else if (prot == 4) np = 0x10;\n-  else if (prot == 3) np = 0x04;\n-  else if (prot == 1) np = 0x02;\n-  else if (prot == 0) np = 0x01;\n+  if (prot == 7)\n+    np = 0x40;\n+  else if (prot == 5)\n+    np = 0x20;\n+  else if (prot == 4)\n+    np = 0x10;\n+  else if (prot == 3)\n+    np = 0x04;\n+  else if (prot == 1)\n+    np = 0x02;\n+  else if (prot == 0)\n+    np = 0x01;\n \n   if (VirtualProtect (addr, len, np, &op))\n     return 0;\n   else\n     return -1;\n-    \n }\n \n #endif"}]}