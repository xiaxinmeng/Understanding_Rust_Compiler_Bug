{"sha": "62321ab477e2bdc3450b14662b9a7d3b9d3c9d1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjIzMjFhYjQ3N2UyYmRjMzQ1MGIxNDY2MmI5YTdkM2I5ZDNjOWQxZg==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2020-06-23T08:46:52Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-04-06T17:43:31Z"}, "message": "d: Use Array::find to get index of element\n\ngcc/d/ChangeLog:\n\n\t* d-codegen.cc (build_frame_type): Use Array::find to get index of\n\telement.", "tree": {"sha": "81deb163d08a0648a21a624d79ed696d1d163f43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81deb163d08a0648a21a624d79ed696d1d163f43"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62321ab477e2bdc3450b14662b9a7d3b9d3c9d1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62321ab477e2bdc3450b14662b9a7d3b9d3c9d1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62321ab477e2bdc3450b14662b9a7d3b9d3c9d1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62321ab477e2bdc3450b14662b9a7d3b9d3c9d1f/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4993d0265ef8ff1a75dfb86cd6da95ccc7fa6328", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4993d0265ef8ff1a75dfb86cd6da95ccc7fa6328", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4993d0265ef8ff1a75dfb86cd6da95ccc7fa6328"}], "stats": {"total": 28, "additions": 10, "deletions": 18}, "files": [{"sha": "5fa1acd92406ee3ec450903184ec19ac639c90d4", "filename": "gcc/d/d-codegen.cc", "status": "modified", "additions": 10, "deletions": 18, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62321ab477e2bdc3450b14662b9a7d3b9d3c9d1f/gcc%2Fd%2Fd-codegen.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62321ab477e2bdc3450b14662b9a7d3b9d3c9d1f/gcc%2Fd%2Fd-codegen.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fd-codegen.cc?ref=62321ab477e2bdc3450b14662b9a7d3b9d3c9d1f", "patch": "@@ -2507,31 +2507,23 @@ build_frame_type (tree ffi, FuncDeclaration *fd)\n \t    {\n \t      VarDeclaration *v = (*fd->parameters)[i];\n \t      /* Remove if already in closureVars so can push to front.  */\n-\t      for (size_t j = i; j < fd->closureVars.length; j++)\n-\t\t{\n-\t\t  Dsymbol *s = fd->closureVars[j];\n-\t\t  if (s == v)\n-\t\t    {\n-\t\t      fd->closureVars.remove (j);\n-\t\t      break;\n-\t\t    }\n-\t\t}\n+\t      size_t j = fd->closureVars.find (v);\n+\n+\t      if (j < fd->closureVars.length)\n+\t\tfd->closureVars.remove (j);\n+\n \t      fd->closureVars.insert (i, v);\n \t    }\n \t}\n \n       /* Also add hidden `this' to outer context.  */\n       if (fd->vthis)\n \t{\n-\t  for (size_t i = 0; i < fd->closureVars.length; i++)\n-\t    {\n-\t      Dsymbol *s = fd->closureVars[i];\n-\t      if (s == fd->vthis)\n-\t\t{\n-\t\t  fd->closureVars.remove (i);\n-\t\t  break;\n-\t\t}\n-\t    }\n+\t  size_t i = fd->closureVars.find (fd->vthis);\n+\n+\t  if (i < fd->closureVars.length)\n+\t    fd->closureVars.remove (i);\n+\n \t  fd->closureVars.insert (0, fd->vthis);\n \t}\n     }"}]}