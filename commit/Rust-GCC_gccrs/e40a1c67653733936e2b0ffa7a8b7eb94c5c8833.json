{"sha": "e40a1c67653733936e2b0ffa7a8b7eb94c5c8833", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTQwYTFjNjc2NTM3MzM5MzZlMmIwZmZhN2E4YjdlYjk0YzVjODgzMw==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@casey.cygnus.com", "date": "2000-02-04T23:46:13Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2000-02-04T23:46:13Z"}, "message": "dwarf2out.c (add_abstract_origin_attribute): Don't call gen_abstract_function on our context if we're a nested function.\n\n        * dwarf2out.c (add_abstract_origin_attribute): Don't call\n        gen_abstract_function on our context if we're a nested function.\n\nFrom-SVN: r31798", "tree": {"sha": "75c68bf0fdf7acda40550012ae30cd3a5d140ec5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/75c68bf0fdf7acda40550012ae30cd3a5d140ec5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e40a1c67653733936e2b0ffa7a8b7eb94c5c8833", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e40a1c67653733936e2b0ffa7a8b7eb94c5c8833", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e40a1c67653733936e2b0ffa7a8b7eb94c5c8833", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e40a1c67653733936e2b0ffa7a8b7eb94c5c8833/comments", "author": null, "committer": null, "parents": [{"sha": "a5fa648417fbb86cb06802f99ad1ed436fde4cd3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5fa648417fbb86cb06802f99ad1ed436fde4cd3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5fa648417fbb86cb06802f99ad1ed436fde4cd3"}], "stats": {"total": 23, "additions": 17, "deletions": 6}, "files": [{"sha": "f13535e63dd113595b97d6b22fbf464387048efc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e40a1c67653733936e2b0ffa7a8b7eb94c5c8833/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e40a1c67653733936e2b0ffa7a8b7eb94c5c8833/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e40a1c67653733936e2b0ffa7a8b7eb94c5c8833", "patch": "@@ -1,3 +1,8 @@\n+2000-02-04  Jason Merrill  <jason@casey.cygnus.com>\n+\n+\t* dwarf2out.c (add_abstract_origin_attribute): Don't call\n+\tgen_abstract_function on our context if we're a nested function.\n+\n 2000-02-05  Michael Hayes  <m.hayes@elec.canterbury.ac.nz>\n \n \t* config/c4x/c4x.md (fixuns_truncqfqi2): Rewrite."}, {"sha": "fdc644876b03b65cb55a82a8648278a8b712df5b", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e40a1c67653733936e2b0ffa7a8b7eb94c5c8833/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e40a1c67653733936e2b0ffa7a8b7eb94c5c8833/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=e40a1c67653733936e2b0ffa7a8b7eb94c5c8833", "patch": "@@ -7374,12 +7374,18 @@ add_abstract_origin_attribute (die, origin)\n {\n   dw_die_ref origin_die = NULL;\n \n-  /* We may have gotten separated from the block for the inlined\n-     function, if we're in an exception handler or some such; make\n-     sure that the abstract function has been written out.  */\n-  tree fn = decl_function_context (origin);\n-  if (fn)\n-    gen_abstract_function (fn);\n+  if (die->die_tag != DW_TAG_subprogram)\n+    {\n+      /* We may have gotten separated from the block for the inlined\n+\t function, if we're in an exception handler or some such; make\n+\t sure that the abstract function has been written out.\n+\n+         Doing this for nested functions is wrong, however; functions are\n+\t distinct units, and our context might not even be inline.  */\n+      tree fn = decl_function_context (origin);\n+      if (fn)\n+\tgen_abstract_function (fn);\n+    }\n \n   if (TREE_CODE_CLASS (TREE_CODE (origin)) == 'd')\n     origin_die = lookup_decl_die (origin);"}]}