{"sha": "032618223ba81a0f01b4b20241c0b0a9859db29b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDMyNjE4MjIzYmE4MWEwZjAxYjRiMjAyNDFjMGIwYTk4NTlkYjI5Yg==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2004-09-14T07:20:05Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2004-09-14T07:20:05Z"}, "message": "Makefile.in (STAGE1_CHECKING): New variable.\n\n\t* Makefile.in (STAGE1_CHECKING): New variable.\n\t(stage1_build): Use it.\n\t* tree-ssa.c (verify_ssa): Preserve state of dominance\n\tinformation.\n\nFrom-SVN: r87484", "tree": {"sha": "9fffc8412b276e164132372d4c10b493382dba34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9fffc8412b276e164132372d4c10b493382dba34"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/032618223ba81a0f01b4b20241c0b0a9859db29b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/032618223ba81a0f01b4b20241c0b0a9859db29b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/032618223ba81a0f01b4b20241c0b0a9859db29b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/032618223ba81a0f01b4b20241c0b0a9859db29b/comments", "author": null, "committer": null, "parents": [{"sha": "a52eb3bc7c904e73e3cbd53c0439b970143064cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a52eb3bc7c904e73e3cbd53c0439b970143064cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a52eb3bc7c904e73e3cbd53c0439b970143064cc"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "4d1a58898a1b70c2d3cad13c050b6e12bef9c47b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/032618223ba81a0f01b4b20241c0b0a9859db29b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/032618223ba81a0f01b4b20241c0b0a9859db29b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=032618223ba81a0f01b4b20241c0b0a9859db29b", "patch": "@@ -1,3 +1,10 @@\n+2004-09-14  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* Makefile.in (STAGE1_CHECKING): New variable.\n+\t(stage1_build): Use it.\n+\t* tree-ssa.c (verify_ssa): Preserve state of dominance\n+\tinformation.\n+\n 2004-09-14  Uros Bizjak  <uros@kss-loka.si>\n \n \t* config/i386/i386.c (output_fp_compare): Add generation"}, {"sha": "63cee0193023cf2d629b5428f7d69629daf8c1bb", "filename": "gcc/Makefile.in", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/032618223ba81a0f01b4b20241c0b0a9859db29b/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/032618223ba81a0f01b4b20241c0b0a9859db29b/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=032618223ba81a0f01b4b20241c0b0a9859db29b", "patch": "@@ -134,6 +134,7 @@ BOOT_LANGUAGES = c @all_boot_languages@\n # or BOOT_CFLAGS\n # STAGE1_CFLAGS is set by configure on some targets or passed from toplevel\n # and sets the CFLAGS passed to stage1 of a bootstrap compilation.\n+# STAGE1_CHECKING enables checking for the stage1 compiler\n # BOOT_CFLAGS is the value of CFLAGS to pass to the stage2, stage3 and stage4\n # bootstrap compilations.\n # XCFLAGS is used for most compilations but not when using the GCC just built.\n@@ -142,6 +143,7 @@ XCFLAGS =\n TCFLAGS =\n CFLAGS = -g\n STAGE1_CFLAGS = -g @stage1_cflags@\n+STAGE1_CHECKING = -DENABLE_CHECKING -DENABLE_ASSERT_CHECKING\n BOOT_CFLAGS = -g -O2\n \n # Flags to determine code coverage. When coverage is disabled, this will\n@@ -3633,11 +3635,12 @@ STAGEFEEDBACK_FLAGS_TO_PASS = \\\n # only thing useful for building stage2. STAGE1_CFLAGS (via CFLAGS),\n # MAKEINFO and MAKEINFOFLAGS are explicitly passed here to make them\n # overrideable (for a bootstrap build stage1 also builds gcc.info).\n+# The stage1 compiler is always built with checking enabled.\n stage1_build:\n \t$(MAKE) CC=\"$(CC)\" libdir=$(libdir) LANGUAGES=\"$(BOOT_LANGUAGES)\" \\\n-\t\tCFLAGS=\"$(STAGE1_CFLAGS)\" MAKEINFO=\"$(MAKEINFO)\" \\\n-\t\tMAKEINFOFLAGS=\"$(MAKEINFOFLAGS)\" COVERAGE_FLAGS= \\\n-\t\tOBJS-onestep=\"$(OBJS)\"\n+\t\tCFLAGS=\"$(STAGE1_CFLAGS) $(STAGE1_CHECKING)\" \\\n+\t\tMAKEINFO=\"$(MAKEINFO)\" MAKEINFOFLAGS=\"$(MAKEINFOFLAGS)\" \\\n+\t\tCOVERAGE_FLAGS= OBJS-onestep=\"$(OBJS)\"\n \t$(STAMP) stage1_build\n \techo stage1_build > stage_last\n "}, {"sha": "c1efa1a1f4ec4556aa59e47bdf35298b21510965", "filename": "gcc/tree-ssa.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/032618223ba81a0f01b4b20241c0b0a9859db29b/gcc%2Ftree-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/032618223ba81a0f01b4b20241c0b0a9859db29b/gcc%2Ftree-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa.c?ref=032618223ba81a0f01b4b20241c0b0a9859db29b", "patch": "@@ -505,6 +505,7 @@ verify_ssa (void)\n   basic_block *definition_block = xcalloc (num_ssa_names, sizeof (basic_block));\n   ssa_op_iter iter;\n   tree op;\n+  enum dom_state orig_dom_state = dom_computed[CDI_DOMINATORS];\n \n   timevar_push (TV_TREE_SSA_VERIFY);\n \n@@ -605,6 +606,13 @@ verify_ssa (void)\n   verify_alias_info ();\n \n   free (definition_block);\n+  /* Restore the dominance infomation to its prior known state, so\n+     that we do not perturb the compiler's subsequent behaviour.  */\n+  if (orig_dom_state == DOM_NONE)\n+    free_dominance_info (CDI_DOMINATORS);\n+  else\n+    dom_computed[CDI_DOMINATORS] = orig_dom_state;\n+  \n   timevar_pop (TV_TREE_SSA_VERIFY);\n   return;\n "}]}