{"sha": "62298c61227b5a420f278002fe04c6897529ad59", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjIyOThjNjEyMjdiNWE0MjBmMjc4MDAyZmUwNGM2ODk3NTI5YWQ1OQ==", "commit": {"author": {"name": "Tristan Gingold", "email": "gingold@adacore.com", "date": "2009-04-10T12:36:00Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-10T12:36:00Z"}, "message": "Makefile.in, utils.c: Include \"rtl.h\" to avoid compile time warnings.\n\n2009-04-10  Tristan Gingold  <gingold@adacore.com>\n\n\t* gcc-interface/Makefile.in, gcc-interface/utils.c: Include \"rtl.h\" to\n\tavoid compile time warnings.\n\tDo not add gcc/config in include search list while compiling the RTS.\n\tPragma Thread_Local_Storage is available on any target.\n\nFrom-SVN: r145891", "tree": {"sha": "f16754b6d4b7884b4b9ee565f88b3bb7c3dafa90", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f16754b6d4b7884b4b9ee565f88b3bb7c3dafa90"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62298c61227b5a420f278002fe04c6897529ad59", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62298c61227b5a420f278002fe04c6897529ad59", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62298c61227b5a420f278002fe04c6897529ad59", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62298c61227b5a420f278002fe04c6897529ad59/comments", "author": {"login": "gingold-adacore", "id": 16334725, "node_id": "MDQ6VXNlcjE2MzM0NzI1", "avatar_url": "https://avatars.githubusercontent.com/u/16334725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gingold-adacore", "html_url": "https://github.com/gingold-adacore", "followers_url": "https://api.github.com/users/gingold-adacore/followers", "following_url": "https://api.github.com/users/gingold-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/gingold-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/gingold-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gingold-adacore/subscriptions", "organizations_url": "https://api.github.com/users/gingold-adacore/orgs", "repos_url": "https://api.github.com/users/gingold-adacore/repos", "events_url": "https://api.github.com/users/gingold-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/gingold-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3764bb000eb4685cd38ae2eb75c133cb8c87c982", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3764bb000eb4685cd38ae2eb75c133cb8c87c982", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3764bb000eb4685cd38ae2eb75c133cb8c87c982"}], "stats": {"total": 41, "additions": 19, "deletions": 22}, "files": [{"sha": "6126f52896ddb7cc6b11da0cbefa80eff7998ff0", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62298c61227b5a420f278002fe04c6897529ad59/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62298c61227b5a420f278002fe04c6897529ad59/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=62298c61227b5a420f278002fe04c6897529ad59", "patch": "@@ -1,3 +1,10 @@\n+2009-04-10  Tristan Gingold  <gingold@adacore.com>\n+\n+\t* gcc-interface/Makefile.in, gcc-interface/utils.c: Include \"rtl.h\" to\n+\tavoid compile time warnings.\n+\tDo not add gcc/config in include search list while compiling the RTS.\n+\tPragma Thread_Local_Storage is available on any target.\n+\n 2009-04-10  Bob Duff  <duff@adacore.com>\n \n \t* sem.ads, par.adb, sem_ch6.adb, sem_ch8.adb: Minor comment fixes."}, {"sha": "6127636145ac110352a579869e3f7b84245bc088", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 9, "deletions": 17, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62298c61227b5a420f278002fe04c6897529ad59/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62298c61227b5a420f278002fe04c6897529ad59/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=62298c61227b5a420f278002fe04c6897529ad59", "patch": "@@ -238,7 +238,7 @@ INCLUDES = -I- -I. -I.. -I$(srcdir)/ada -I$(srcdir) -I$(srcdir)/config \\\n \n ADA_INCLUDES = -I- -I. -I$(srcdir)/ada\n \n-INCLUDES_FOR_SUBDIR = -I. -I.. -I../.. -I$(fsrcdir)/ada -I$(fsrcdir)/config \\\n+INCLUDES_FOR_SUBDIR = -I. -I.. -I../.. -I$(fsrcdir)/ada \\\n \t-I$(fsrcdir)/../include -I$(fsrcdir)\n ADA_INCLUDES_FOR_SUBDIR = -I. -I$(fsrcdir)/ada\n \n@@ -473,8 +473,9 @@ ifeq ($(strip $(filter-out powerpc% wrs vxworks,$(targ))),)\n \n   ifeq ($(strip $(filter-out rtp,$(THREAD_KIND))),)\n     LIBGNAT_TARGET_PAIRS += \\\n-    s-osinte.adb<s-osinte-vxworks-rtp.adb \\\n-    s-osinte.ads<s-osinte-vxworks6.ads \\\n+    s-osinte.adb<s-osinte-vxworks.adb \\\n+    s-vxwext.ads<s-vxwext-rtp.ads \\\n+    s-vxwext.adb<s-vxwext-rtp.adb \\\n     s-tpopsp.adb<s-tpopsp-vxworks-rtp.adb \\\n     system.ads<system-vxworks-ppc-rtp.ads\n \n@@ -487,12 +488,7 @@ ifeq ($(strip $(filter-out powerpc% wrs vxworks,$(targ))),)\n \n     ifeq ($(strip $(filter-out kernel,$(THREAD_KIND))),)\n       LIBGNAT_TARGET_PAIRS += \\\n-      s-osinte.ads<s-osinte-vxworks6.ads \\\n-      s-osinte.adb<s-osinte-vxworks-kernel.adb\n-    else\n-      LIBGNAT_TARGET_PAIRS += \\\n-      s-osinte.ads<s-osinte-vxworks.ads \\\n-      s-osinte.adb<s-osinte-vxworks.adb\n+      s-vxwext.ads<s-vxwext-kernel.ads\n     endif\n \n     EXTRA_GNATRTL_NONTASKING_OBJS=i-vxwork.o i-vxwoio.o s-vxwexc.o\n@@ -627,8 +623,9 @@ ifeq ($(strip $(filter-out %86 wrs vxworks,$(targ))),)\n \n   ifeq ($(strip $(filter-out rtp,$(THREAD_KIND))),)\n     LIBGNAT_TARGET_PAIRS += \\\n-    s-osinte.adb<s-osinte-vxworks-rtp.adb \\\n-    s-osinte.ads<s-osinte-vxworks6.ads \\\n+    s-osinte.adb<s-osinte-vxworks.adb \\\n+    s-vxwext.ads<s-vxwext-rtp.ads \\\n+    s-vxwext.adb<s-vxwext-rtp.adb \\\n     s-tpopsp.adb<s-tpopsp-vxworks-rtp.adb \\\n     system.ads<system-vxworks-x86-rtp.ads\n \n@@ -641,12 +638,7 @@ ifeq ($(strip $(filter-out %86 wrs vxworks,$(targ))),)\n \n     ifeq ($(strip $(filter-out kernel,$(THREAD_KIND))),)\n       LIBGNAT_TARGET_PAIRS += \\\n-      s-osinte.ads<s-osinte-vxworks6.ads \\\n-      s-osinte.adb<s-osinte-vxworks-kernel.adb\n-    else\n-      LIBGNAT_TARGET_PAIRS += \\\n-      s-osinte.ads<s-osinte-vxworks.ads \\\n-      s-osinte.adb<s-osinte-vxworks.adb\n+      s-vxwext.ads<s-vxwext-kernel.ads\n     endif\n \n     EXTRA_GNATRTL_NONTASKING_OBJS=i-vxwork.o i-vxwoio.o s-vxwexc.o"}, {"sha": "feb2f4a35ec9bbc43639fe0396050cd5e41ba6e8", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62298c61227b5a420f278002fe04c6897529ad59/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62298c61227b5a420f278002fe04c6897529ad59/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=62298c61227b5a420f278002fe04c6897529ad59", "patch": "@@ -48,6 +48,7 @@\n #include \"tree-dump.h\"\n #include \"pointer-set.h\"\n #include \"langhooks.h\"\n+#include \"rtl.h\"\n \n #include \"ada.h\"\n #include \"types.h\"\n@@ -1633,11 +1634,8 @@ process_attributes (tree decl, struct attrib *attr_list)\n \tbreak;\n \n       case ATTR_THREAD_LOCAL_STORAGE:\n-\tif (targetm.have_tls)\n-\t  DECL_TLS_MODEL (decl) = decl_default_tls_model (decl);\n-\telse\n-\t  post_error (\"thread-local storage not supported for this target\",\n-\t\t      attr_list->error_point);\n+\tDECL_TLS_MODEL (decl) = decl_default_tls_model (decl);\n+\tDECL_COMMON (decl) = 0;\n \tbreak;\n       }\n }"}]}