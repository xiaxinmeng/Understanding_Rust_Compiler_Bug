{"sha": "5a626f11f4069f2b9d8f16ca9d8c210a5458cd6c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWE2MjZmMTFmNDA2OWYyYjlkOGYxNmNhOWQ4YzIxMGE1NDU4Y2Q2Yw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-12-15T20:56:58Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-12-15T20:56:58Z"}, "message": "builtins.c (expand_builtin_mathfn): Make sure not to expand the argument more than once.\n\n\t* builtins.c (expand_builtin_mathfn): Make sure not to expand the\n\targument more than once.\n\nFrom-SVN: r30963", "tree": {"sha": "18d9c146d9ba14245e6cb2304f543a4a820ae3f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/18d9c146d9ba14245e6cb2304f543a4a820ae3f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5a626f11f4069f2b9d8f16ca9d8c210a5458cd6c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a626f11f4069f2b9d8f16ca9d8c210a5458cd6c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a626f11f4069f2b9d8f16ca9d8c210a5458cd6c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a626f11f4069f2b9d8f16ca9d8c210a5458cd6c/comments", "author": null, "committer": null, "parents": [{"sha": "4d9af632c473c98fdca77cd26fa0113f93bdb9e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d9af632c473c98fdca77cd26fa0113f93bdb9e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d9af632c473c98fdca77cd26fa0113f93bdb9e6"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "0462e45f374d95744d4ec694d0971fb605b6a0fc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a626f11f4069f2b9d8f16ca9d8c210a5458cd6c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a626f11f4069f2b9d8f16ca9d8c210a5458cd6c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5a626f11f4069f2b9d8f16ca9d8c210a5458cd6c", "patch": "@@ -1,3 +1,8 @@\n+1999-12-15  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* builtins.c (expand_builtin_mathfn): Make sure not to expand the\n+\targument more than once.\n+\n 1999-12-15  Jason Merrill  <jason@casey.cygnus.com>\n \n \t* stmt.c (expand_decl): Expand upper bound of a dynamic array."}, {"sha": "f03a53f864ce19ae8ca817f93aaee2682b6e0321", "filename": "gcc/builtins.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a626f11f4069f2b9d8f16ca9d8c210a5458cd6c/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a626f11f4069f2b9d8f16ca9d8c210a5458cd6c/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=5a626f11f4069f2b9d8f16ca9d8c210a5458cd6c", "patch": "@@ -1182,9 +1182,16 @@ expand_builtin_mathfn (exp, target, subtarget)\n       && TREE_CODE (TREE_VALUE (arglist)) != PARM_DECL)\n     {\n       exp = copy_node (exp);\n-      arglist = copy_node (arglist);\n       TREE_OPERAND (exp, 1) = arglist;\n+      /* Wrap the computation of the argument in a SAVE_EXPR.  That\n+\t way, if we need to expand the argument again (as in the\n+\t flag_errno_math case below where we cannot directly set\n+\t errno), we will not perform side-effects more than once.\n+\t Note that here we're mutating the original EXP as well as the\n+\t copy; that's the right thing to do in case the original EXP\n+\t is expanded later.  */\n       TREE_VALUE (arglist) = save_expr (TREE_VALUE (arglist));\n+      arglist = copy_node (arglist);\n     }\n   op0 = expand_expr (TREE_VALUE (arglist), subtarget, VOIDmode, 0);\n "}]}