{"sha": "8b727104817f1b0c2a03013ed397e99f8673405c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGI3MjcxMDQ4MTdmMWIwYzJhMDMwMTNlZDM5N2U5OWY4NjczNDA1Yw==", "commit": {"author": {"name": "Yannick Moy", "email": "moy@adacore.com", "date": "2019-07-11T08:03:24Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-07-11T08:03:24Z"}, "message": "[Ada] Avoid spurious errors on dimensionality checking in GNATprove\n\nIn the special GNATprove mode of the frontend, automatic inlining is\nperformed, which may lead to spurious errors on dimensionality checking.\nAvoid performing this checking on inlined code, which has already been\nchecked for dimensionality errors.\n\nThere is no impact on compilation.\n\n2019-07-11  Yannick Moy  <moy@adacore.com>\n\ngcc/ada/\n\n\t* sem_res.adb (Resolve_Call): Do not perform dimensionality\n\tchecking on inlined bodies.\n\nFrom-SVN: r273405", "tree": {"sha": "379d8b6a9c0283f4c1cf4dada41c41399f3b9bc4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/379d8b6a9c0283f4c1cf4dada41c41399f3b9bc4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b727104817f1b0c2a03013ed397e99f8673405c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b727104817f1b0c2a03013ed397e99f8673405c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b727104817f1b0c2a03013ed397e99f8673405c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b727104817f1b0c2a03013ed397e99f8673405c/comments", "author": {"login": "yannickmoy", "id": 859440, "node_id": "MDQ6VXNlcjg1OTQ0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannickmoy", "html_url": "https://github.com/yannickmoy", "followers_url": "https://api.github.com/users/yannickmoy/followers", "following_url": "https://api.github.com/users/yannickmoy/following{/other_user}", "gists_url": "https://api.github.com/users/yannickmoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannickmoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannickmoy/subscriptions", "organizations_url": "https://api.github.com/users/yannickmoy/orgs", "repos_url": "https://api.github.com/users/yannickmoy/repos", "events_url": "https://api.github.com/users/yannickmoy/events{/privacy}", "received_events_url": "https://api.github.com/users/yannickmoy/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d99ef225ac0722ab011cd39386fed4e346311edb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d99ef225ac0722ab011cd39386fed4e346311edb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d99ef225ac0722ab011cd39386fed4e346311edb"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "59f20c489e5f2162f6a6d94326fca1a442dd2bfc", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b727104817f1b0c2a03013ed397e99f8673405c/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b727104817f1b0c2a03013ed397e99f8673405c/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=8b727104817f1b0c2a03013ed397e99f8673405c", "patch": "@@ -1,3 +1,8 @@\n+2019-07-11  Yannick Moy  <moy@adacore.com>\n+\n+\t* sem_res.adb (Resolve_Call): Do not perform dimensionality\n+\tchecking on inlined bodies.\n+\n 2019-07-11  Yannick Moy  <moy@adacore.com>\n \n \t* debug.adb: Flip meaning of debug switch -gnatdF."}, {"sha": "4ca74f8543c54d65596679f288e094e0c6d9cab3", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b727104817f1b0c2a03013ed397e99f8673405c/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b727104817f1b0c2a03013ed397e99f8673405c/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=8b727104817f1b0c2a03013ed397e99f8673405c", "patch": "@@ -6949,7 +6949,9 @@ package body Sem_Res is\n       --  Check the dimensions of the actuals in the call. For function calls,\n       --  propagate the dimensions from the returned type to N.\n \n-      Analyze_Dimension_Call (N, Nam);\n+      if not In_Inlined_Body then\n+         Analyze_Dimension_Call (N, Nam);\n+      end if;\n \n       --  All done, evaluate call and deal with elaboration issues\n "}]}