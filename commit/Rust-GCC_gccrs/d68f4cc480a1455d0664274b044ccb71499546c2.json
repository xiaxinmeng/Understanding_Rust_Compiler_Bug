{"sha": "d68f4cc480a1455d0664274b044ccb71499546c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDY4ZjRjYzQ4MGExNDU1ZDA2NjQyNzRiMDQ0Y2NiNzE0OTk1NDZjMg==", "commit": {"author": {"name": "Chris Demetriou", "email": "cgd@broadcom.com", "date": "2003-08-19T18:09:06Z"}, "committer": {"name": "Chris Demetriou", "email": "cgd@gcc.gnu.org", "date": "2003-08-19T18:09:06Z"}, "message": "mips.md: Adjust SI-mode \"trap_if\" instruction to use better predicates and constraints.\n\n2003-08-19  Chris Demetriou  <cgd@broadcom.com>\n\n        * config/mips/mips.md: Adjust SI-mode \"trap_if\" instruction\n        to use better predicates and constraints.  Define new\n        instruction to handle \"trap_if\" with DI-mode arguments.\n        (conditional_trap): FAIL if trap code is not 0.\n\nFrom-SVN: r70570", "tree": {"sha": "f74f77b36ddc49a15fc3dac7a445c224c9dec9f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f74f77b36ddc49a15fc3dac7a445c224c9dec9f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d68f4cc480a1455d0664274b044ccb71499546c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d68f4cc480a1455d0664274b044ccb71499546c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d68f4cc480a1455d0664274b044ccb71499546c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d68f4cc480a1455d0664274b044ccb71499546c2/comments", "author": null, "committer": null, "parents": [{"sha": "86ecdfb60e9fd88c17351cd0cacf57a98f99ee7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86ecdfb60e9fd88c17351cd0cacf57a98f99ee7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86ecdfb60e9fd88c17351cd0cacf57a98f99ee7f"}], "stats": {"total": 28, "additions": 24, "deletions": 4}, "files": [{"sha": "0f48a0d4eaa50546a429e27d364e41905d64f443", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d68f4cc480a1455d0664274b044ccb71499546c2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d68f4cc480a1455d0664274b044ccb71499546c2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d68f4cc480a1455d0664274b044ccb71499546c2", "patch": "@@ -1,3 +1,10 @@\n+2003-08-19  Chris Demetriou  <cgd@broadcom.com>\n+\n+\t* config/mips/mips.md: Adjust SI-mode \"trap_if\" instruction\n+\tto use better predicates and constraints.  Define new\n+\tinstruction to handle \"trap_if\" with DI-mode arguments.\n+\t(conditional_trap): FAIL if trap code is not 0.\n+\n 2003-08-19  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \t* config/i386/i386.c (legitimate_pic_address_disp_p): Change the"}, {"sha": "832140e409e35809370f6d796e5cc2892eee69f6", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 17, "deletions": 4, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d68f4cc480a1455d0664274b044ccb71499546c2/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d68f4cc480a1455d0664274b044ccb71499546c2/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=d68f4cc480a1455d0664274b044ccb71499546c2", "patch": "@@ -640,17 +640,30 @@\n \t    (match_operand 1 \"const_int_operand\" \"\"))]\n   \"ISA_HAS_COND_TRAP\"\n {\n-  mips_gen_conditional_trap (operands);\n-  DONE;\n+  if (operands[1] == const0_rtx)\n+    {\n+      mips_gen_conditional_trap (operands);\n+      DONE;\n+    }\n+  else\n+    FAIL;\n })\n \n (define_insn \"\"\n   [(trap_if (match_operator 0 \"trap_cmp_op\"\n-                            [(match_operand:SI 1 \"reg_or_0_operand\" \"d\")\n-                             (match_operand:SI 2 \"nonmemory_operand\" \"dI\")])\n+                            [(match_operand:SI 1 \"reg_or_0_operand\" \"dJ\")\n+                             (match_operand:SI 2 \"arith_operand\" \"dI\")])\n \t    (const_int 0))]\n   \"ISA_HAS_COND_TRAP\"\n   \"t%C0\\t%z1,%z2\")\n+\n+(define_insn \"\"\n+  [(trap_if (match_operator 0 \"trap_cmp_op\"\n+                            [(match_operand:DI 1 \"reg_or_0_operand\" \"dJ\")\n+                             (match_operand:DI 2 \"arith_operand\" \"dI\")])\n+\t    (const_int 0))]\n+  \"TARGET_64BIT && ISA_HAS_COND_TRAP\"\n+  \"t%C0\\t%z1,%z2\")\n \f\n ;;\n ;;  ...................."}]}