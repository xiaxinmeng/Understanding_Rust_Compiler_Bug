{"sha": "467adc05ba83a0e10c5527e6ee5b69dd30b29c4a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDY3YWRjMDViYTgzYTBlMTBjNTUyN2U2ZWU1YjY5ZGQzMGIyOWM0YQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-05-28T08:36:48Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-05-28T08:36:48Z"}, "message": "Fix check-params-in-docs.py for --help=param.\n\ncontrib/ChangeLog:\n\n\t* check-params-in-docs.py: Update to new format\n\tof help.  Apply flake8 corrections.", "tree": {"sha": "b0f73f6d4d28b4bd6ccbaf9afe4663545d99162f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b0f73f6d4d28b4bd6ccbaf9afe4663545d99162f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/467adc05ba83a0e10c5527e6ee5b69dd30b29c4a", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEE6I4wzqqylQBfXaRhTcGC3A+nN4UFAl7PeEMACgkQTcGC3A+n\nN4VGDQf+L02U2e+wvyJ3l9+aRdjt1ngxvLxCCetQUlqWXiHNdFzUw0WDyMdeNBP4\niOF4/mz7ywwK12o0U6rEVy8AYSH9tPhIFzebPleKH9ktgSASSMWbvBdYeIrjR59f\nZUPuj4kSXlJKW8jNYPguY6wSa3Y1PdlOOwVB4WJhGJ9FuNmMKPPkqliYXfUT1EMl\nx+v9BLqvf74nF2fino/f5RiT7ZBmL8hP3SA9api3bzC5+YRWH63KUIhJk6CZFlV9\n4i90Tbv9WTbaV2bOQJS4SQW1BjkbuHgfyTslams5WQsTc8n/lE6HXu5lrLcXnehb\nWmAuxHrygXOg8xOQT8GY0Zh7aWMlQA==\n=TLre\n-----END PGP SIGNATURE-----", "payload": "tree b0f73f6d4d28b4bd6ccbaf9afe4663545d99162f\nparent eb78da45ab82753b78bf062c6f3e982f68274913\nauthor Martin Liska <mliska@suse.cz> 1590655008 +0200\ncommitter Martin Liska <mliska@suse.cz> 1590655008 +0200\n\nFix check-params-in-docs.py for --help=param.\n\ncontrib/ChangeLog:\n\n\t* check-params-in-docs.py: Update to new format\n\tof help.  Apply flake8 corrections.\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/467adc05ba83a0e10c5527e6ee5b69dd30b29c4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/467adc05ba83a0e10c5527e6ee5b69dd30b29c4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/467adc05ba83a0e10c5527e6ee5b69dd30b29c4a/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eb78da45ab82753b78bf062c6f3e982f68274913", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb78da45ab82753b78bf062c6f3e982f68274913", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb78da45ab82753b78bf062c6f3e982f68274913"}], "stats": {"total": 17, "additions": 10, "deletions": 7}, "files": [{"sha": "dfbfa3d00677fe41efd759ef5423e42d708d3b1f", "filename": "contrib/check-params-in-docs.py", "status": "modified", "additions": 10, "deletions": 7, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/467adc05ba83a0e10c5527e6ee5b69dd30b29c4a/contrib%2Fcheck-params-in-docs.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/467adc05ba83a0e10c5527e6ee5b69dd30b29c4a/contrib%2Fcheck-params-in-docs.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fcheck-params-in-docs.py?ref=467adc05ba83a0e10c5527e6ee5b69dd30b29c4a", "patch": "@@ -22,16 +22,19 @@\n #\n #\n \n-import sys\n-import json\n import argparse\n+from itertools import dropwhile, takewhile\n \n-from itertools import *\n \n def get_param_tuple(line):\n-    line = line.strip()\n+    line = line.strip().replace('--param=', '')\n     i = line.find(' ')\n-    return (line[:i], line[i:].strip())\n+    name = line[:i]\n+    if '=' in name:\n+        name = name[:name.find('=')]\n+    description = line[i:].strip()\n+    return (name, description)\n+\n \n parser = argparse.ArgumentParser()\n parser.add_argument('texi_file')\n@@ -49,8 +52,8 @@ def get_param_tuple(line):\n \n # Find section in .texi manual with parameters\n texi = ([x.strip() for x in open(args.texi_file).readlines()])\n-texi = dropwhile(lambda x: not 'item --param' in x, texi)\n-texi = takewhile(lambda x: not '@node Instrumentation Options' in x, texi)\n+texi = dropwhile(lambda x: 'item --param' not in x, texi)\n+texi = takewhile(lambda x: '@node Instrumentation Options' not in x, texi)\n texi = list(texi)[1:]\n \n token = '@item '"}]}