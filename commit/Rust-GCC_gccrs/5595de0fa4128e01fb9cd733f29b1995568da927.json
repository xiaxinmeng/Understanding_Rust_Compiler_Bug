{"sha": "5595de0fa4128e01fb9cd733f29b1995568da927", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTU5NWRlMGZhNDEyOGUwMWZiOWNkNzMzZjI5YjE5OTU1NjhkYTkyNw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2005-05-15T22:31:35Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-05-15T22:31:35Z"}, "message": "* lib/compat.exp (compat-execute): Do not use regsub unsafely.\n\nFrom-SVN: r99747", "tree": {"sha": "55d010dbf926aa46b6092cd4ca87f38dc99d2712", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/55d010dbf926aa46b6092cd4ca87f38dc99d2712"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5595de0fa4128e01fb9cd733f29b1995568da927", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5595de0fa4128e01fb9cd733f29b1995568da927", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5595de0fa4128e01fb9cd733f29b1995568da927", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5595de0fa4128e01fb9cd733f29b1995568da927/comments", "author": null, "committer": null, "parents": [{"sha": "3b523c85c16e70cf883f533b8092de5780eda396", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b523c85c16e70cf883f533b8092de5780eda396", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b523c85c16e70cf883f533b8092de5780eda396"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "9f9458ebb30f7c54856004d2fd934aa9abc971d6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5595de0fa4128e01fb9cd733f29b1995568da927/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5595de0fa4128e01fb9cd733f29b1995568da927/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5595de0fa4128e01fb9cd733f29b1995568da927", "patch": "@@ -1,3 +1,7 @@\n+2005-05-15  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* lib/compat.exp (compat-execute): Do not use regsub unsafely.\n+\n 2005-05-15  Jerry DeLisle <jvdelisle@verizon.net>\n \n \tPR fortran/17432"}, {"sha": "def6f263931623c18654a2caa892b23f8bf2743b", "filename": "gcc/testsuite/lib/compat.exp", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5595de0fa4128e01fb9cd733f29b1995568da927/gcc%2Ftestsuite%2Flib%2Fcompat.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5595de0fa4128e01fb9cd733f29b1995568da927/gcc%2Ftestsuite%2Flib%2Fcompat.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fcompat.exp?ref=5595de0fa4128e01fb9cd733f29b1995568da927", "patch": "@@ -279,8 +279,17 @@ proc compat-execute { src1 sid use_alt } {\n     regsub \"sid\" \"sid_y_alt.o\" $sid obj3_alt\n \n     # Get the base name of this test, for use in messages.\n-    regsub \"^$srcdir/?\" $src1 \"\" testcase\n-    regsub \"^$tmpdir/?\" $testcase \"tmpdir-\" testcase\n+    set testcase \"$src1\"\n+    # Remove the $srcdir and $tmpdir prefixes from $src1.  (It would\n+    # be possible to use \"regsub\" here, if we were careful to escape\n+    # all regular expression characters in $srcdir and $tmpdir, but\n+    # that would be more complicated that this approach.) \n+    if {[string first \"$srcdir/\" \"$src1\"] == 0} {\n+\tset testcase [string range \"$src1\" [string length \"$srcdir/\"] end]\n+    }\n+    if {[string first \"$tmpdir/\" \"$src1\"] == 0} {\n+\tset testcase [string range \"$src1\" [string length \"$tmpdir/\"] end]\n+    }\n     regsub \"_main.*\" $testcase \"\" testcase\n     # Set up the base name of executable files so they'll be unique.\n     regsub -all \"\\[./\\]\" $testcase \"-\" execbase"}]}