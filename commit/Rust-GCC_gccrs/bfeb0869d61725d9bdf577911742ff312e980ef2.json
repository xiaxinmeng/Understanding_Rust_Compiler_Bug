{"sha": "bfeb0869d61725d9bdf577911742ff312e980ef2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmZlYjA4NjlkNjE3MjVkOWJkZjU3NzkxMTc0MmZmMzEyZTk4MGVmMg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-01-05T09:32:52Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-01-05T09:32:52Z"}, "message": "re PR bootstrap/51648 (Profiledbootstrap failure on x86_64-linux)\n\n\tPR bootstrap/51648\n\t* tree-cfg.c (need_fake_edge_p): Return true also for noreturn\n\tcalls that have any non-fake successor edges.\n\nFrom-SVN: r182902", "tree": {"sha": "c00ce0ab78fd6bd4312f7f6ba8b423d920ac5be6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c00ce0ab78fd6bd4312f7f6ba8b423d920ac5be6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bfeb0869d61725d9bdf577911742ff312e980ef2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfeb0869d61725d9bdf577911742ff312e980ef2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfeb0869d61725d9bdf577911742ff312e980ef2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfeb0869d61725d9bdf577911742ff312e980ef2/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9696698a51c8c0eabf0552d12e56c9dedbdf329a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9696698a51c8c0eabf0552d12e56c9dedbdf329a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9696698a51c8c0eabf0552d12e56c9dedbdf329a"}], "stats": {"total": 30, "additions": 23, "deletions": 7}, "files": [{"sha": "661179e8061b394611d28e860e24f1cc3a276917", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfeb0869d61725d9bdf577911742ff312e980ef2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfeb0869d61725d9bdf577911742ff312e980ef2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bfeb0869d61725d9bdf577911742ff312e980ef2", "patch": "@@ -1,5 +1,9 @@\n 2012-01-05  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR bootstrap/51648\n+\t* tree-cfg.c (need_fake_edge_p): Return true also for noreturn\n+\tcalls that have any non-fake successor edges.\n+\n \tPR debug/51746\n \t* var-tracking.c (add_stores): For COND_EXEC allow oval to be NULL.\n "}, {"sha": "66ea9285e6d80299e5695891097f47aacff9ffa3", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 19, "deletions": 7, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfeb0869d61725d9bdf577911742ff312e980ef2/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfeb0869d61725d9bdf577911742ff312e980ef2/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=bfeb0869d61725d9bdf577911742ff312e980ef2", "patch": "@@ -1,6 +1,6 @@\n /* Control flow functions for trees.\n    Copyright (C) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009,\n-   2010, 2011  Free Software Foundation, Inc.\n+   2010, 2011, 2012  Free Software Foundation, Inc.\n    Contributed by Diego Novillo <dnovillo@redhat.com>\n \n This file is part of GCC.\n@@ -6882,9 +6882,20 @@ need_fake_edge_p (gimple t)\n \t   && DECL_FUNCTION_CODE (fndecl) == BUILT_IN_FORK))\n     return false;\n \n-  if (is_gimple_call (t)\n-      && !(call_flags & ECF_NORETURN))\n-    return true;\n+  if (is_gimple_call (t))\n+    {\n+      edge_iterator ei;\n+      edge e;\n+      basic_block bb;\n+\n+      if (!(call_flags & ECF_NORETURN))\n+\treturn true;\n+\n+      bb = gimple_bb (t);\n+      FOR_EACH_EDGE (e, ei, bb->succs)\n+\tif ((e->flags & EDGE_FAKE) == 0)\n+\t  return true;\n+    }\n \n   if (gimple_code (t) == GIMPLE_ASM\n        && (gimple_asm_volatile_p (t) || gimple_asm_input_p (t)))\n@@ -6895,9 +6906,10 @@ need_fake_edge_p (gimple t)\n \n \n /* Add fake edges to the function exit for any non constant and non\n-   noreturn calls, volatile inline assembly in the bitmap of blocks\n-   specified by BLOCKS or to the whole CFG if BLOCKS is zero.  Return\n-   the number of blocks that were split.\n+   noreturn calls (or noreturn calls with EH/abnormal edges),\n+   volatile inline assembly in the bitmap of blocks specified by BLOCKS\n+   or to the whole CFG if BLOCKS is zero.  Return the number of blocks\n+   that were split.\n \n    The goal is to expose cases in which entering a basic block does\n    not imply that all subsequent instructions must be executed.  */"}]}