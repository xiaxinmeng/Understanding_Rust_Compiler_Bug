{"sha": "4a5d072ad97d7d4fd003efff953a6202afd176a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGE1ZDA3MmFkOTdkN2Q0ZmQwMDNlZmZmOTUzYTYyMDJhZmQxNzZhMA==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-05-19T19:16:10Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-05-19T19:17:09Z"}, "message": "Use commit timestamp in git_update_version.py.\n\n\t* gcc-changelog/git_commit.py: Add param use_commit_ts\n\tfor to_changelog_entries.\n\t* gcc-changelog/git_update_version.py: Se use_commit_ts to True.", "tree": {"sha": "d0ca35c3c88180e16949e85b476f970ebe3d4d3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d0ca35c3c88180e16949e85b476f970ebe3d4d3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a5d072ad97d7d4fd003efff953a6202afd176a0", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEE6I4wzqqylQBfXaRhTcGC3A+nN4UFAl7EMLUACgkQTcGC3A+n\nN4UOdwf/Wo+BHXlvFcALGV2rpxBzEME26DYM9pcHqAdv72WxGzsk5THTIUCHruY+\ns1N2yBEl6vNqOEustMyxTdzjUZvBlxyKkpJhnJ6kuFOMNdGo3i5yNUTW2ZVqcQFk\n5KNOOfMYJgutRvxQLv6fV1nEA1xJs39eiSyFWTfdIQF+y5iME66L2id50RkhTIfZ\nzvsU5shmS7n6HgRdzbZSCL2p/9D4cwg7oi5QV+yGOfO1tqQEP2/CslrWmJBanc5b\n9lP+P43Tzty5DGD5mUa45+iz1ZlLudTz/P/LFrcLmvyNmWXZIdHZ9zfhTBuzogIu\nCM9vI8z0FT5hPkpricM618dxdBByPA==\n=ZF4A\n-----END PGP SIGNATURE-----", "payload": "tree d0ca35c3c88180e16949e85b476f970ebe3d4d3e\nparent c0d8623ce5aa6d92c2e6c62e1bee66272a011f59\nauthor Martin Liska <mliska@suse.cz> 1589915770 +0200\ncommitter Martin Liska <mliska@suse.cz> 1589915829 +0200\n\nUse commit timestamp in git_update_version.py.\n\n\t* gcc-changelog/git_commit.py: Add param use_commit_ts\n\tfor to_changelog_entries.\n\t* gcc-changelog/git_update_version.py: Se use_commit_ts to True.\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a5d072ad97d7d4fd003efff953a6202afd176a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a5d072ad97d7d4fd003efff953a6202afd176a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a5d072ad97d7d4fd003efff953a6202afd176a0/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c0d8623ce5aa6d92c2e6c62e1bee66272a011f59", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0d8623ce5aa6d92c2e6c62e1bee66272a011f59", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0d8623ce5aa6d92c2e6c62e1bee66272a011f59"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "f3de87b43d9f283cf90ef35eda010a601fbc3b62", "filename": "contrib/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a5d072ad97d7d4fd003efff953a6202afd176a0/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a5d072ad97d7d4fd003efff953a6202afd176a0/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=4a5d072ad97d7d4fd003efff953a6202afd176a0", "patch": "@@ -1,3 +1,9 @@\n+2020-05-19  Martin Liska  <mliska@suse.cz>\n+\n+\t* gcc-changelog/git_commit.py: Add param use_commit_ts\n+\tfor to_changelog_entries.\n+\t* gcc-changelog/git_update_version.py: Se use_commit_ts to True.\n+\n 2020-05-19  Martin Liska  <mliska@suse.cz>\n \n \t* mklog.py: Skip GTY for struct names.  Make flake8 happy."}, {"sha": "f6b9c5b15869db3d3c10c78527023c9b7e63e8a1", "filename": "contrib/gcc-changelog/git_commit.py", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a5d072ad97d7d4fd003efff953a6202afd176a0/contrib%2Fgcc-changelog%2Fgit_commit.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a5d072ad97d7d4fd003efff953a6202afd176a0/contrib%2Fgcc-changelog%2Fgit_commit.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fgcc-changelog%2Fgit_commit.py?ref=4a5d072ad97d7d4fd003efff953a6202afd176a0", "patch": "@@ -500,11 +500,11 @@ def check_for_correct_changelog(self):\n                     err = Error(msg % (entry.folder, changelog_location), file)\n                     self.errors.append(err)\n \n-    def to_changelog_entries(self):\n+    def to_changelog_entries(self, use_commit_ts=False):\n         for entry in self.changelog_entries:\n             output = ''\n             timestamp = entry.datetime\n-            if not timestamp:\n+            if not timestamp or use_commit_ts:\n                 timestamp = self.date.strftime('%Y-%m-%d')\n             authors = entry.authors if entry.authors else [self.author]\n             # add Co-Authored-By authors to all ChangeLog entries"}, {"sha": "f38e011df459e7f39c02611ade4ab83df85fa027", "filename": "contrib/gcc-changelog/git_update_version.py", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a5d072ad97d7d4fd003efff953a6202afd176a0/contrib%2Fgcc-changelog%2Fgit_update_version.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a5d072ad97d7d4fd003efff953a6202afd176a0/contrib%2Fgcc-changelog%2Fgit_update_version.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fgcc-changelog%2Fgit_update_version.py?ref=4a5d072ad97d7d4fd003efff953a6202afd176a0", "patch": "@@ -38,7 +38,7 @@ def prepend_to_changelog_files(repo, folder, git_commit):\n             print(error)\n         # TODO: add error message\n         return\n-    for entry, output in git_commit.to_changelog_entries():\n+    for entry, output in git_commit.to_changelog_entries(use_commit_ts=True):\n         # TODO\n         full_path = os.path.join(folder, entry, 'ChangeLog.test')\n         print('writting to %s' % full_path)"}]}