{"sha": "47934dc4c277725c3615794a8409158cdae117e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDc5MzRkYzRjMjc3NzI1YzM2MTU3OTRhODQwOTE1OGNkYWUxMTdlNw==", "commit": {"author": {"name": "James Greenhalgh", "email": "james.greenhalgh@arm.com", "date": "2013-04-29T11:08:30Z"}, "committer": {"name": "James Greenhalgh", "email": "jgreenhalgh@gcc.gnu.org", "date": "2013-04-29T11:08:30Z"}, "message": "[AArch64] fcvt instructions - arm_neon.h changes.\n\ngcc/\n\t* config/aarch64/arm_neon.h\n\t(vcvt<sd>_f<32,64>_s<32,64>): Rewrite in C.\n\t(vcvt<q>_f<32,64>_s<32,64>): Rewrite using builtins.\n\t(vcvt_<high_>_f<32,64>_f<32,64>): Likewise.\n\t(vcvt<qsd>_<su><32,64>_f<32,64>): Likewise.\n\t(vcvta<qsd>_<su><32,64>_f<32,64>): Likewise.\n\t(vcvtm<qsd>_<su><32,64>_f<32,64>): Likewise.\n\t(vcvtn<qsd>_<su><32,64>_f<32,64>): Likewise.\n\t(vcvtp<qsd>_<su><32,64>_f<32,64>): Likewise.\n\ngcc/testsuite/\n\t* gcc.target/aarch64/vect-vcvt.c: New.\n\nFrom-SVN: r198404", "tree": {"sha": "d497071882da060b8e4f98809114905eda849c8a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d497071882da060b8e4f98809114905eda849c8a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/47934dc4c277725c3615794a8409158cdae117e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47934dc4c277725c3615794a8409158cdae117e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47934dc4c277725c3615794a8409158cdae117e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47934dc4c277725c3615794a8409158cdae117e7/comments", "author": {"login": "jgreenhalgh-arm", "id": 6104025, "node_id": "MDQ6VXNlcjYxMDQwMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6104025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgreenhalgh-arm", "html_url": "https://github.com/jgreenhalgh-arm", "followers_url": "https://api.github.com/users/jgreenhalgh-arm/followers", "following_url": "https://api.github.com/users/jgreenhalgh-arm/following{/other_user}", "gists_url": "https://api.github.com/users/jgreenhalgh-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgreenhalgh-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgreenhalgh-arm/subscriptions", "organizations_url": "https://api.github.com/users/jgreenhalgh-arm/orgs", "repos_url": "https://api.github.com/users/jgreenhalgh-arm/repos", "events_url": "https://api.github.com/users/jgreenhalgh-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/jgreenhalgh-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "384be29f47a3fe1c5fd962b44abe1215983c3df3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/384be29f47a3fe1c5fd962b44abe1215983c3df3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/384be29f47a3fe1c5fd962b44abe1215983c3df3"}], "stats": {"total": 4761, "additions": 2307, "deletions": 2454}, "files": [{"sha": "dc763cc8dfa4fa1fec648a77b2e9748979ea7840", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47934dc4c277725c3615794a8409158cdae117e7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47934dc4c277725c3615794a8409158cdae117e7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=47934dc4c277725c3615794a8409158cdae117e7", "patch": "@@ -1,3 +1,15 @@\n+2013-04-29  James Greenhalgh  <james.greenhalgh@arm.com>\n+\n+\t* config/aarch64/arm_neon.h\n+\t(vcvt<sd>_f<32,64>_s<32,64>): Rewrite in C.\n+\t(vcvt<q>_f<32,64>_s<32,64>): Rewrite using builtins.\n+\t(vcvt_<high_>_f<32,64>_f<32,64>): Likewise.\n+\t(vcvt<qsd>_<su><32,64>_f<32,64>): Likewise.\n+\t(vcvta<qsd>_<su><32,64>_f<32,64>): Likewise.\n+\t(vcvtm<qsd>_<su><32,64>_f<32,64>): Likewise.\n+\t(vcvtn<qsd>_<su><32,64>_f<32,64>): Likewise.\n+\t(vcvtp<qsd>_<su><32,64>_f<32,64>): Likewise.\n+\n 2013-04-29  James Greenhalgh  <james.greenhalgh@arm.com>\n \n \t* config/aarch64/aarch64-simd.md"}, {"sha": "7d37744691789bd80f1c632fc62d31e04d89156e", "filename": "gcc/config/aarch64/arm_neon.h", "status": "modified", "additions": 2159, "deletions": 2454, "changes": 4613, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47934dc4c277725c3615794a8409158cdae117e7/gcc%2Fconfig%2Faarch64%2Farm_neon.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47934dc4c277725c3615794a8409158cdae117e7/gcc%2Fconfig%2Faarch64%2Farm_neon.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Farm_neon.h?ref=47934dc4c277725c3615794a8409158cdae117e7"}, {"sha": "d035aa529891fc7ae303092539a53b3f86a0df9c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47934dc4c277725c3615794a8409158cdae117e7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47934dc4c277725c3615794a8409158cdae117e7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=47934dc4c277725c3615794a8409158cdae117e7", "patch": "@@ -1,3 +1,7 @@\n+2013-04-29  James Greenhalgh  <james.greenhalgh@arm.com>\n+\n+\t* gcc.target/aarch64/vect-vcvt.c: New.\n+\n 2013-04-29  James Greenhalgh  <james.greenhalgh@arm.com>\n \n \t* gcc.target/aarch64/vect-vrnd.c: New."}, {"sha": "6066d7d25cc679c66e042f16f237765e097d74a5", "filename": "gcc/testsuite/gcc.target/aarch64/vect-vcvt.c", "status": "added", "additions": 132, "deletions": 0, "changes": 132, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47934dc4c277725c3615794a8409158cdae117e7/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fvect-vcvt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47934dc4c277725c3615794a8409158cdae117e7/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fvect-vcvt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fvect-vcvt.c?ref=47934dc4c277725c3615794a8409158cdae117e7", "patch": "@@ -0,0 +1,132 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O3 --save-temps -ffast-math\" } */\n+\n+#include <arm_neon.h>\n+\n+extern void abort (void);\n+extern double fabs (double);\n+\n+#define NUM_TESTS 8\n+#define DELTA 0.000001\n+\n+float input_f32[] = {0.1f, -0.1f, 0.4f, 10.3f,\n+\t\t     200.0f, -800.0f, -13.0f, -0.5f};\n+double input_f64[] = {0.1, -0.1, 0.4, 10.3,\n+\t\t      200.0, -800.0, -13.0, -0.5};\n+\n+#define TEST(SUFFIX, Q, WIDTH, LANES, S, U, D)\t\t     \t\t\\\n+int\t\t\t\t\t\t\t\t\t\\\n+test_vcvt##SUFFIX##_##S##WIDTH##_f##WIDTH##x##LANES##_t (void)\t\t\\\n+{\t\t\t\t\t\t\t\t\t\\\n+  int ret = 1;\t\t\t\t\t\t\t\t\\\n+  int i = 0;\t\t\t\t\t\t\t\t\\\n+  int nlanes = LANES;\t\t\t\t\t\t\t\\\n+  U##int##WIDTH##_t expected_out[NUM_TESTS];\t\t\t\t\\\n+  U##int##WIDTH##_t actual_out[NUM_TESTS];\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+  for (i = 0; i < NUM_TESTS; i++)\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      expected_out[i]\t\t\t\t\t\t\t\\\n+\t= vcvt##SUFFIX##D##_##S##WIDTH##_f##WIDTH (input_f##WIDTH[i]);\t\\\n+      /* Don't vectorize this.  */\t\t\t\t\t\\\n+      asm volatile (\"\" : : : \"memory\");\t\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+  for (i = 0; i < NUM_TESTS; i+=nlanes)\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      U##int##WIDTH##x##LANES##_t out =\t\t\t\t\t\\\n+\tvcvt##SUFFIX##Q##_##S##WIDTH##_f##WIDTH\t\t\t\t\\\n+\t\t(vld1##Q##_f##WIDTH (input_f##WIDTH + i));\t\t\\\n+      vst1##Q##_##S##WIDTH (actual_out + i, out);\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+  for (i = 0; i < NUM_TESTS; i++)\t\t\t\t\t\\\n+    ret &= fabs (expected_out[i] - actual_out[i]) < DELTA;\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+  return ret;\t\t\t\t\t\t\t\t\\\n+}\t\t\t\t\t\t\t\t\t\\\n+\n+\n+#define BUILD_VARIANTS(SUFFIX)\t\t\t\\\n+TEST (SUFFIX,  , 32, 2, s, ,s)\t\t\t\\\n+TEST (SUFFIX, q, 32, 4, s, ,s)\t\t\t\\\n+TEST (SUFFIX, q, 64, 2, s, ,d)\t\t\t\\\n+TEST (SUFFIX,  , 32, 2, u,u,s)\t\t\t\\\n+TEST (SUFFIX, q, 32, 4, u,u,s)\t\t\t\\\n+TEST (SUFFIX, q, 64, 2, u,u,d)\t\t\t\\\n+\n+BUILD_VARIANTS ( )\n+/* { dg-final { scan-assembler \"fcvtzs\\\\tw\\[0-9\\]+, s\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtzs\\\\tx\\[0-9\\]+, d\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtzs\\\\tv\\[0-9\\]+\\.2s, v\\[0-9\\]+\\.2s\" } } */\n+/* { dg-final { scan-assembler \"fcvtzs\\\\tv\\[0-9\\]+\\.4s, v\\[0-9\\]+\\.4s\" } } */\n+/* { dg-final { scan-assembler \"fcvtzs\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d\" } } */\n+/* { dg-final { scan-assembler \"fcvtzu\\\\tw\\[0-9\\]+, s\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtzu\\\\tx\\[0-9\\]+, d\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtzu\\\\tv\\[0-9\\]+\\.2s, v\\[0-9\\]+\\.2s\" } } */\n+/* { dg-final { scan-assembler \"fcvtzu\\\\tv\\[0-9\\]+\\.4s, v\\[0-9\\]+\\.4s\" } } */\n+/* { dg-final { scan-assembler \"fcvtzu\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d\" } } */\n+BUILD_VARIANTS (a)\n+/* { dg-final { scan-assembler \"fcvtas\\\\tw\\[0-9\\]+, s\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtas\\\\tx\\[0-9\\]+, d\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtas\\\\tv\\[0-9\\]+\\.2s, v\\[0-9\\]+\\.2s\" } } */\n+/* { dg-final { scan-assembler \"fcvtas\\\\tv\\[0-9\\]+\\.4s, v\\[0-9\\]+\\.4s\" } } */\n+/* { dg-final { scan-assembler \"fcvtas\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d\" } } */\n+/* { dg-final { scan-assembler \"fcvtau\\\\tw\\[0-9\\]+, s\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtau\\\\tx\\[0-9\\]+, d\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtau\\\\tv\\[0-9\\]+\\.2s, v\\[0-9\\]+\\.2s\" } } */\n+/* { dg-final { scan-assembler \"fcvtau\\\\tv\\[0-9\\]+\\.4s, v\\[0-9\\]+\\.4s\" } } */\n+/* { dg-final { scan-assembler \"fcvtau\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d\" } } */\n+BUILD_VARIANTS (m)\n+/* { dg-final { scan-assembler \"fcvtms\\\\tw\\[0-9\\]+, s\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtms\\\\tx\\[0-9\\]+, d\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtms\\\\tv\\[0-9\\]+\\.2s, v\\[0-9\\]+\\.2s\" } } */\n+/* { dg-final { scan-assembler \"fcvtms\\\\tv\\[0-9\\]+\\.4s, v\\[0-9\\]+\\.4s\" } } */\n+/* { dg-final { scan-assembler \"fcvtms\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d\" } } */\n+/* { dg-final { scan-assembler \"fcvtmu\\\\tw\\[0-9\\]+, s\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtmu\\\\tx\\[0-9\\]+, d\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtmu\\\\tv\\[0-9\\]+\\.2s, v\\[0-9\\]+\\.2s\" } } */\n+/* { dg-final { scan-assembler \"fcvtmu\\\\tv\\[0-9\\]+\\.4s, v\\[0-9\\]+\\.4s\" } } */\n+/* { dg-final { scan-assembler \"fcvtmu\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d\" } } */\n+BUILD_VARIANTS (n)\n+/* { dg-final { scan-assembler \"fcvtns\\\\tw\\[0-9\\]+, s\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtns\\\\tx\\[0-9\\]+, d\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtns\\\\tv\\[0-9\\]+\\.2s, v\\[0-9\\]+\\.2s\" } } */\n+/* { dg-final { scan-assembler \"fcvtns\\\\tv\\[0-9\\]+\\.4s, v\\[0-9\\]+\\.4s\" } } */\n+/* { dg-final { scan-assembler \"fcvtns\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d\" } } */\n+/* { dg-final { scan-assembler \"fcvtnu\\\\tw\\[0-9\\]+, s\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtnu\\\\tx\\[0-9\\]+, d\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtnu\\\\tv\\[0-9\\]+\\.2s, v\\[0-9\\]+\\.2s\" } } */\n+/* { dg-final { scan-assembler \"fcvtnu\\\\tv\\[0-9\\]+\\.4s, v\\[0-9\\]+\\.4s\" } } */\n+/* { dg-final { scan-assembler \"fcvtnu\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d\" } } */\n+BUILD_VARIANTS (p)\n+/* { dg-final { scan-assembler \"fcvtps\\\\tw\\[0-9\\]+, s\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtps\\\\tx\\[0-9\\]+, d\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtps\\\\tv\\[0-9\\]+\\.2s, v\\[0-9\\]+\\.2s\" } } */\n+/* { dg-final { scan-assembler \"fcvtps\\\\tv\\[0-9\\]+\\.4s, v\\[0-9\\]+\\.4s\" } } */\n+/* { dg-final { scan-assembler \"fcvtps\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d\" } } */\n+/* { dg-final { scan-assembler \"fcvtpu\\\\tw\\[0-9\\]+, s\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtpu\\\\tx\\[0-9\\]+, d\\[0-9\\]+\" } } */\n+/* { dg-final { scan-assembler \"fcvtpu\\\\tv\\[0-9\\]+\\.2s, v\\[0-9\\]+\\.2s\" } } */\n+/* { dg-final { scan-assembler \"fcvtpu\\\\tv\\[0-9\\]+\\.4s, v\\[0-9\\]+\\.4s\" } } */\n+/* { dg-final { scan-assembler \"fcvtpu\\\\tv\\[0-9\\]+\\.2d, v\\[0-9\\]+\\.2d\" } } */\n+\n+#undef TEST\n+#define TEST(SUFFIX, Q, WIDTH, LANES, S, U, D)\t\t     \t\t\\\n+{\t\t\t\t\t\t\t\t\t\\\n+  if (!test_vcvt##SUFFIX##_##S##WIDTH##_f##WIDTH##x##LANES##_t ())\t\\\n+    abort ();\t\t\t\t\t\t\t\t\\\n+}\n+\n+int\n+main (int argc, char **argv)\n+{\n+  BUILD_VARIANTS ( )\n+  BUILD_VARIANTS (a)\n+  BUILD_VARIANTS (m)\n+  BUILD_VARIANTS (n)\n+  BUILD_VARIANTS (p)\n+  return 0;\n+}\n+\n+/* { dg-final { cleanup-saved-temps } } */"}]}