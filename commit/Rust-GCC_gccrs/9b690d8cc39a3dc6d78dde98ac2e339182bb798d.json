{"sha": "9b690d8cc39a3dc6d78dde98ac2e339182bb798d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWI2OTBkOGNjMzlhM2RjNmQ3OGRkZTk4YWMyZTMzOTE4MmJiNzk4ZA==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2011-01-20T20:04:25Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2011-01-20T20:04:25Z"}, "message": "PR libstdc++/36104 part three\n\n2011-01-20  Benjamin Kosnik  <bkoz@redhat.com>\n\n\tPR libstdc++/36104 part three\n\t* src/hashtable_c++0x.cc: Adjust namespace macros.\n\t* testsuite/util/testsuite_rvalref.h: Don't forward declare hash.\n\t* config/abi/pre/gnu-versioned-namespace.ver: Update.\n\nFrom-SVN: r169063", "tree": {"sha": "e15df2961e3042199f2b8c132a0935254907f314", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e15df2961e3042199f2b8c132a0935254907f314"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9b690d8cc39a3dc6d78dde98ac2e339182bb798d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b690d8cc39a3dc6d78dde98ac2e339182bb798d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b690d8cc39a3dc6d78dde98ac2e339182bb798d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b690d8cc39a3dc6d78dde98ac2e339182bb798d/comments", "author": null, "committer": null, "parents": [{"sha": "191e7a3000dae4cde90123c0228138217abbad4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/191e7a3000dae4cde90123c0228138217abbad4d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/191e7a3000dae4cde90123c0228138217abbad4d"}], "stats": {"total": 132, "additions": 106, "deletions": 26}, "files": [{"sha": "5de3330bc79185531ee3dd43347b00c47e55b713", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b690d8cc39a3dc6d78dde98ac2e339182bb798d/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b690d8cc39a3dc6d78dde98ac2e339182bb798d/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=9b690d8cc39a3dc6d78dde98ac2e339182bb798d", "patch": "@@ -1,3 +1,10 @@\n+2011-01-20  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\tPR libstdc++/36104 part three\n+\t* src/hashtable_c++0x.cc: Adjust namespace macros.\n+\t* testsuite/util/testsuite_rvalref.h: Don't forward declare hash.\n+\t* config/abi/pre/gnu-versioned-namespace.ver: Update.\n+\n 2011-01-20  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* include/ext/pb_ds/detail/resize_policy/"}, {"sha": "dfb1345b0ce41108d14c4c5ade985c2279315ca3", "filename": "libstdc++-v3/config/abi/pre/gnu-versioned-namespace.ver", "status": "modified", "additions": 86, "deletions": 19, "changes": 105, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b690d8cc39a3dc6d78dde98ac2e339182bb798d/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu-versioned-namespace.ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b690d8cc39a3dc6d78dde98ac2e339182bb798d/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu-versioned-namespace.ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu-versioned-namespace.ver?ref=9b690d8cc39a3dc6d78dde98ac2e339182bb798d", "patch": "@@ -1,6 +1,7 @@\n ## Linker script for GNU namespace versioning.\n ##\n-## Copyright (C) 2002, 2003, 2004, 2005, 2007, 2009 Free Software Foundation, Inc.\n+## Copyright (C) 2002, 2003, 2004, 2005, 2007, 2009, 2011\n+## Free Software Foundation, Inc.\n ##\n ## This file is part of the libstdc++ version 3 distribution.\n ##\n@@ -19,7 +20,7 @@\n ## with this library; see the file COPYING3.  If not see\n ## <http://www.gnu.org/licenses/>.\n \n-GLIBCXX_3.7 {\n+GLIBCXX_5.0 {\n \n   global:\n \n@@ -30,6 +31,15 @@ GLIBCXX_3.7 {\n       std::*\n     };\n \n+    # locale\n+    _ZNSt2_69has_facetINS_*;\n+\n+    # hash \n+    _ZNSt2_68__detail12__prime_listE;\n+\n+    # thread/mutex/condition_variable/future\n+    __once_proxy;\n+\n     # operator new(size_t)\n     _Znw[jm];\n     # operator new(size_t, std::nothrow_t const&)\n@@ -87,7 +97,12 @@ GLIBCXX_3.7 {\n     _ZN9__gnu_cxx2_69free_list6_M_getE[jm];\n     _ZN9__gnu_cxx2_69free_list8_M_clearEv;\n \n+    # __gnu_cxx::stdio_sync_filebuf\n+    _ZTVN9__gnu_cxx2_618stdio_sync_filebufI[cw]St2_611char_traitsI[cw]EEE;\n+    _ZN9__gnu_cxx2_618stdio_sync_filebufI[cw]NSt2_611char_traitsI[cw]EEE[5-9]*;\n+\n     # debug mode\n+# xxx cxx1998?\n     _ZN10__gnu_norm15_List_node_base4hook*;\n     _ZN10__gnu_norm15_List_node_base4swap*;\n     _ZN10__gnu_norm15_List_node_base6unhookEv;\n@@ -106,8 +121,8 @@ GLIBCXX_3.7 {\n     _ZN11__gnu_debug19_Safe_sequence_base22_M_revalidate_singularEv;\n     _ZN11__gnu_debug19_Safe_sequence_base7_M_swapERS0_;\n \n-    _ZN11__gnu_debug19_Safe_iterator_base9_M_attachEPNS_19_Safe_sequence_baseEb;\n-    _ZN11__gnu_debug19_Safe_iterator_base16_M_attach_singleEPNS_19_Safe_sequence_baseEb;\n+    _ZN11__gnu_debug19_Safe_iterator_base9_M_attach*;\n+    _ZN11__gnu_debug19_Safe_iterator_base16_M_attach_single*;\n     _ZN11__gnu_debug19_Safe_iterator_base9_M_detachEv;\n     _ZN11__gnu_debug19_Safe_iterator_base16_M_detach_singleEv;\n     _ZN11__gnu_debug19_Safe_iterator_base12_M_get_mutexEv;\n@@ -127,7 +142,7 @@ GLIBCXX_3.7 {\n \n \n # Symbols in the support library (libsupc++) have their own tag.\n-CXXABI_1.7 {\n+CXXABI_2.0 {\n \n   global:\n     __cxa_allocate_exception;\n@@ -165,6 +180,41 @@ CXXABI_1.7 {\n     __gxx_personality_sj0;\n     __dynamic_cast;\n \n+    # std::exception_ptr\n+    _ZNSt15__exception_ptr13exception_ptrC1Ev;\n+    _ZNSt15__exception_ptr13exception_ptrC2Ev;\n+    _ZNSt15__exception_ptr13exception_ptrC1ERKS0_;\n+    _ZNSt15__exception_ptr13exception_ptrC2ERKS0_;\n+    _ZNSt15__exception_ptr13exception_ptrC1EMS0_FvvE;\n+    _ZNSt15__exception_ptr13exception_ptrC2EMS0_FvvE;\n+    _ZNSt15__exception_ptr13exception_ptrD1Ev;\n+    _ZNSt15__exception_ptr13exception_ptrD2Ev;\n+    _ZNSt15__exception_ptr13exception_ptraSERKS0_;\n+    _ZNKSt15__exception_ptr13exception_ptrcvMS0_FvvEEv;\n+    _ZNKSt15__exception_ptr13exception_ptrntEv;\n+    _ZNKSt15__exception_ptr13exception_ptr20__cxa_exception_typeEv;\n+    _ZNSt15__exception_ptr13exception_ptr4swapERS0_;\n+    _ZNSt15__exception_ptreqERKNS_13exception_ptrES2_;\n+    _ZNSt15__exception_ptrneERKNS_13exception_ptrES2_;\n+\n+    _ZSt17current_exceptionv;\n+    _ZSt17rethrow_exceptionNSt15__exception_ptr13exception_ptrE;\n+\n+    # std::bad_function_call.\n+    _ZNSt17bad_function_callD*;\n+    _ZTISt17bad_function_call;\n+    _ZTSSt17bad_function_call;\n+    _ZTVSt17bad_function_call;\n+\n+    # Default function.\n+    _ZSt11_Hash_bytesPKv*;\n+\n+    # FNV hash.\n+    _ZSt15_Fnv_hash_bytesPKv*;\n+\n+    # __gnu_cxx::_verbose_terminate_handler()\n+    _ZN9__gnu_cxx2_627__verbose_terminate_handlerEv;\n+\n     # *_type_info classes, ctor and dtor\n     _ZN10__cxxabiv117__array_type_info*;\n     _ZN10__cxxabiv117__class_type_info*;\n@@ -186,18 +236,6 @@ CXXABI_1.7 {\n     _ZNK10__cxxabiv120__si_class_type_info*;\n     _ZNK10__cxxabiv121__vmi_class_type_info*;\n \n-    # virtual table\n-    _ZTVN10__cxxabiv117__array_type_infoE;\n-    _ZTVN10__cxxabiv117__class_type_infoE;\n-    _ZTVN10__cxxabiv116__enum_type_infoE;\n-    _ZTVN10__cxxabiv120__function_type_infoE;\n-    _ZTVN10__cxxabiv123__fundamental_type_infoE;\n-    _ZTVN10__cxxabiv117__pbase_type_infoE;\n-    _ZTVN10__cxxabiv129__pointer_to_member_type_infoE;\n-    _ZTVN10__cxxabiv119__pointer_type_infoE;\n-    _ZTVN10__cxxabiv120__si_class_type_infoE;\n-    _ZTVN10__cxxabiv121__vmi_class_type_infoE;\n-\n     # typeinfo structure\n     _ZTI[a-z];\n     _ZTIP[a-z];\n@@ -214,6 +252,8 @@ CXXABI_1.7 {\n     _ZTIN10__cxxabiv121__vmi_class_type_infoE;\n     _ZTIN10__cxxabiv115__forced_unwindE;\n     _ZTIN10__cxxabiv119__foreign_exceptionE;\n+    _ZTIN10__cxxabiv115__forced_unwindE;\n+    _ZTIN10__cxxabiv119__foreign_exceptionE;\n \n     # typeinfo name\n     _ZTS[a-z];\n@@ -230,8 +270,35 @@ CXXABI_1.7 {\n     _ZTSN10__cxxabiv120__si_class_type_infoE;\n     _ZTSN10__cxxabiv121__vmi_class_type_infoE;\n \n-    # __gnu_cxx::_verbose_terminate_handler()\n-    _ZN9__gnu_cxx2_627__verbose_terminate_handlerEv;\n+    # typeinfo for char16_t and char32_t\n+    _ZTIDs;\n+    _ZTIPDs;\n+    _ZTIPKDs;\n+    _ZTIDi;\n+    _ZTIPDi;\n+    _ZTIPKDi;\n+\n+    # typeinfo for decimal floating point types\n+    _ZTID[fde];\n+    _ZTIPD[fde];\n+    _ZTIPKD[fde];\n+\n+    # typeinfo for decltype(nullptr)\n+    _ZTIDn;\n+    _ZTIPDn;\n+    _ZTIPKDn;\n+\n+    # virtual table\n+    _ZTVN10__cxxabiv117__array_type_infoE;\n+    _ZTVN10__cxxabiv117__class_type_infoE;\n+    _ZTVN10__cxxabiv116__enum_type_infoE;\n+    _ZTVN10__cxxabiv120__function_type_infoE;\n+    _ZTVN10__cxxabiv123__fundamental_type_infoE;\n+    _ZTVN10__cxxabiv117__pbase_type_infoE;\n+    _ZTVN10__cxxabiv129__pointer_to_member_type_infoE;\n+    _ZTVN10__cxxabiv119__pointer_type_infoE;\n+    _ZTVN10__cxxabiv120__si_class_type_infoE;\n+    _ZTVN10__cxxabiv121__vmi_class_type_infoE;\n \n   local:\n     *;"}, {"sha": "0b5f79cc6f1dfee0cd9b80664c73b6a1d06b567d", "filename": "libstdc++-v3/src/hashtable_c++0x.cc", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b690d8cc39a3dc6d78dde98ac2e339182bb798d/libstdc%2B%2B-v3%2Fsrc%2Fhashtable_c%2B%2B0x.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b690d8cc39a3dc6d78dde98ac2e339182bb798d/libstdc%2B%2B-v3%2Fsrc%2Fhashtable_c%2B%2B0x.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fhashtable_c%2B%2B0x.cc?ref=9b690d8cc39a3dc6d78dde98ac2e339182bb798d", "patch": "@@ -1,6 +1,6 @@\n // std::__detail definitions -*- C++ -*-\n \n-// Copyright (C) 2007, 2008, 2009, 2010 Free Software Foundation, Inc.\n+// Copyright (C) 2007, 2008, 2009, 2010, 2011 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n // software; you can redistribute it and/or modify it under the\n@@ -22,11 +22,14 @@\n // see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n // <http://www.gnu.org/licenses/>.\n \n+#include <bits/c++config.h>\n+\n #ifndef __GXX_EXPERIMENTAL_CXX0X__\n # error \"hashtable_c++0x.cc must be compiled with -std=gnu++0x\"\n #endif\n \n-namespace std\n-{\n+_GLIBCXX_BEGIN_NAMESPACE(std)\n+\n #include \"hashtable-aux.cc\"\n-}\n+\n+_GLIBCXX_END_NAMESPACE // namespace std"}, {"sha": "acf25da503adbe0d052700a4597d1aec6e7d09d5", "filename": "libstdc++-v3/testsuite/util/testsuite_rvalref.h", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b690d8cc39a3dc6d78dde98ac2e339182bb798d/libstdc%2B%2B-v3%2Ftestsuite%2Futil%2Ftestsuite_rvalref.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b690d8cc39a3dc6d78dde98ac2e339182bb798d/libstdc%2B%2B-v3%2Ftestsuite%2Futil%2Ftestsuite_rvalref.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Futil%2Ftestsuite_rvalref.h?ref=9b690d8cc39a3dc6d78dde98ac2e339182bb798d", "patch": "@@ -1,7 +1,7 @@\n // -*- C++ -*-\n // Testing utilities for the rvalue reference.\n //\n-// Copyright (C) 2005, 2006, 2007, 2008, 2009, 2010\n+// Copyright (C) 2005, 2006, 2007, 2008, 2009, 2010, 2011\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -174,10 +174,12 @@ namespace __gnu_test\n   \n } // namespace __gnu_test\n \n+#ifdef __GXX_EXPERIMENTAL_CXX0X__\n+\n+#include <bits/functional_hash.h>\n+\n namespace std\n {\n-  template<typename _Tp> struct hash;\n-\n   /// std::hash specialization for type_index.\n   template<>\n     struct hash<__gnu_test::rvalstruct>\n@@ -190,5 +192,6 @@ namespace std\n       { return __rvs.val; }\n     };\n }\n+#endif\n \n #endif // _GLIBCXX_TESTSUITE_TR1_H"}]}