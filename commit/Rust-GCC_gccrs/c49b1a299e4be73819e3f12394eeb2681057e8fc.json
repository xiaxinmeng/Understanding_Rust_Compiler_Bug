{"sha": "c49b1a299e4be73819e3f12394eeb2681057e8fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQ5YjFhMjk5ZTRiZTczODE5ZTNmMTIzOTRlZWIyNjgxMDU3ZThmYw==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2011-08-12T16:06:57Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2011-08-12T16:06:57Z"}, "message": "md5.c (md5_read_ctx): Handle mis-aligned resbuf pointer.\n\n2011-08-12  Steve Ellcey  <sje@cup.hp.com>\n\n\t* md5.c (md5_read_ctx): Handle mis-aligned resbuf pointer.\n\nFrom-SVN: r177700", "tree": {"sha": "8fa236a1f2f2f08b6de61f3772bd68a38b31f57f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8fa236a1f2f2f08b6de61f3772bd68a38b31f57f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c49b1a299e4be73819e3f12394eeb2681057e8fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c49b1a299e4be73819e3f12394eeb2681057e8fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c49b1a299e4be73819e3f12394eeb2681057e8fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c49b1a299e4be73819e3f12394eeb2681057e8fc/comments", "author": null, "committer": null, "parents": [{"sha": "e02d979a34621de7e71c821fcf4cfb5cca511e72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e02d979a34621de7e71c821fcf4cfb5cca511e72", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e02d979a34621de7e71c821fcf4cfb5cca511e72"}], "stats": {"total": 20, "additions": 14, "deletions": 6}, "files": [{"sha": "eabc69dc7ff4663b4ac8b8d16ce43dd9a9d40912", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c49b1a299e4be73819e3f12394eeb2681057e8fc/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c49b1a299e4be73819e3f12394eeb2681057e8fc/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=c49b1a299e4be73819e3f12394eeb2681057e8fc", "patch": "@@ -1,3 +1,7 @@\n+2011-08-12  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* md5.c (md5_read_ctx): Handle mis-aligned resbuf pointer.\n+\n 2011-08-06  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* testsuite/test-expandargv.c (writeout_test): Check result of fwrite."}, {"sha": "11920e1b5559a4bedd08ead2c149cbbfc1e024a9", "filename": "libiberty/md5.c", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c49b1a299e4be73819e3f12394eeb2681057e8fc/libiberty%2Fmd5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c49b1a299e4be73819e3f12394eeb2681057e8fc/libiberty%2Fmd5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fmd5.c?ref=c49b1a299e4be73819e3f12394eeb2681057e8fc", "patch": "@@ -76,15 +76,19 @@ md5_init_ctx (struct md5_ctx *ctx)\n /* Put result from CTX in first 16 bytes following RESBUF.  The result\n    must be in little endian byte order.\n \n-   IMPORTANT: On some systems it is required that RESBUF is correctly\n-   aligned for a 32 bits value.  */\n+   IMPORTANT: RESBUF may not be aligned as strongly as MD5_UNIT32 so we\n+   put things in a local (aligned) buffer first, then memcpy into RESBUF.  */\n void *\n md5_read_ctx (const struct md5_ctx *ctx, void *resbuf)\n {\n-  ((md5_uint32 *) resbuf)[0] = SWAP (ctx->A);\n-  ((md5_uint32 *) resbuf)[1] = SWAP (ctx->B);\n-  ((md5_uint32 *) resbuf)[2] = SWAP (ctx->C);\n-  ((md5_uint32 *) resbuf)[3] = SWAP (ctx->D);\n+  md5_uint32 buffer[4];\n+\n+  buffer[0] = SWAP (ctx->A);\n+  buffer[1] = SWAP (ctx->B);\n+  buffer[2] = SWAP (ctx->C);\n+  buffer[3] = SWAP (ctx->D);\n+\n+  memcpy (resbuf, buffer, 16);\n \n   return resbuf;\n }"}]}