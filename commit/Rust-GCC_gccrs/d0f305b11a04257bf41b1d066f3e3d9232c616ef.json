{"sha": "d0f305b11a04257bf41b1d066f3e3d9232c616ef", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDBmMzA1YjExYTA0MjU3YmY0MWIxZDA2NmYzZTNkOTIzMmM2MTZlZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-11-17T11:15:55Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-11-17T11:15:55Z"}, "message": "re PR middle-end/45838 (FAIL: libgomp.c/pr34513.c execution test)\n\n\tPR middle-end/45838\n\t* tree-ssa-alias.c (ref_maybe_used_by_call_p_1,\n\tcall_may_clobber_ref_p_1): Return true for __sync_* and some\n\tOpenMP builtins that act as threading barriers.\n\nCo-Authored-By: Richard Guenther <rguenther@suse.de>\n\nFrom-SVN: r166863", "tree": {"sha": "4a3893b319747d8261802d8a29ec5daed4426e0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4a3893b319747d8261802d8a29ec5daed4426e0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d0f305b11a04257bf41b1d066f3e3d9232c616ef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0f305b11a04257bf41b1d066f3e3d9232c616ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0f305b11a04257bf41b1d066f3e3d9232c616ef", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0f305b11a04257bf41b1d066f3e3d9232c616ef/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5ac60b564faa85e195c3e2d1c0837d93576519e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ac60b564faa85e195c3e2d1c0837d93576519e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ac60b564faa85e195c3e2d1c0837d93576519e2"}], "stats": {"total": 52, "additions": 52, "deletions": 0}, "files": [{"sha": "91ae63ea98bcc189b2e4de42f32b709069f4e97f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0f305b11a04257bf41b1d066f3e3d9232c616ef/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0f305b11a04257bf41b1d066f3e3d9232c616ef/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d0f305b11a04257bf41b1d066f3e3d9232c616ef", "patch": "@@ -1,3 +1,11 @@\n+2010-11-17  Jakub Jelinek  <jakub@redhat.com>\n+\t    Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/45838\n+\t* tree-ssa-alias.c (ref_maybe_used_by_call_p_1,\n+\tcall_may_clobber_ref_p_1): Return true for __sync_* and some\n+\tOpenMP builtins that act as threading barriers.\n+\n 2010-11-17  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/46498"}, {"sha": "b5af01330791422e84ad54d064fe7574e6f25e9f", "filename": "gcc/tree-ssa-alias.c", "status": "modified", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0f305b11a04257bf41b1d066f3e3d9232c616ef/gcc%2Ftree-ssa-alias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0f305b11a04257bf41b1d066f3e3d9232c616ef/gcc%2Ftree-ssa-alias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-alias.c?ref=d0f305b11a04257bf41b1d066f3e3d9232c616ef", "patch": "@@ -1209,6 +1209,28 @@ ref_maybe_used_by_call_p_1 (gimple call, ao_ref *ref)\n \tcase BUILT_IN_SINCOSF:\n \tcase BUILT_IN_SINCOSL:\n \t  return false;\n+\t/* __sync_* builtins and some OpenMP builtins act as threading\n+\t   barriers.  */\n+#undef DEF_SYNC_BUILTIN\n+#define DEF_SYNC_BUILTIN(ENUM, NAME, TYPE, ATTRS) case ENUM:\n+#include \"sync-builtins.def\"\n+#undef DEF_SYNC_BUILTIN\n+\tcase BUILT_IN_GOMP_ATOMIC_START:\n+\tcase BUILT_IN_GOMP_ATOMIC_END:\n+\tcase BUILT_IN_GOMP_BARRIER:\n+\tcase BUILT_IN_GOMP_TASKWAIT:\n+\tcase BUILT_IN_GOMP_CRITICAL_START:\n+\tcase BUILT_IN_GOMP_CRITICAL_END:\n+\tcase BUILT_IN_GOMP_CRITICAL_NAME_START:\n+\tcase BUILT_IN_GOMP_CRITICAL_NAME_END:\n+\tcase BUILT_IN_GOMP_LOOP_END:\n+\tcase BUILT_IN_GOMP_ORDERED_START:\n+\tcase BUILT_IN_GOMP_ORDERED_END:\n+\tcase BUILT_IN_GOMP_PARALLEL_END:\n+\tcase BUILT_IN_GOMP_SECTIONS_END:\n+\tcase BUILT_IN_GOMP_SINGLE_COPY_START:\n+\tcase BUILT_IN_GOMP_SINGLE_COPY_END:\n+\t  return true;\n \n \tdefault:\n \t  /* Fallthru to general call handling.  */;\n@@ -1465,6 +1487,28 @@ call_may_clobber_ref_p_1 (gimple call, ao_ref *ref)\n \t    return (ptr_deref_may_alias_ref_p_1 (sin, ref)\n \t\t    || ptr_deref_may_alias_ref_p_1 (cos, ref));\n \t  }\n+\t/* __sync_* builtins and some OpenMP builtins act as threading\n+\t   barriers.  */\n+#undef DEF_SYNC_BUILTIN\n+#define DEF_SYNC_BUILTIN(ENUM, NAME, TYPE, ATTRS) case ENUM:\n+#include \"sync-builtins.def\"\n+#undef DEF_SYNC_BUILTIN\n+\tcase BUILT_IN_GOMP_ATOMIC_START:\n+\tcase BUILT_IN_GOMP_ATOMIC_END:\n+\tcase BUILT_IN_GOMP_BARRIER:\n+\tcase BUILT_IN_GOMP_TASKWAIT:\n+\tcase BUILT_IN_GOMP_CRITICAL_START:\n+\tcase BUILT_IN_GOMP_CRITICAL_END:\n+\tcase BUILT_IN_GOMP_CRITICAL_NAME_START:\n+\tcase BUILT_IN_GOMP_CRITICAL_NAME_END:\n+\tcase BUILT_IN_GOMP_LOOP_END:\n+\tcase BUILT_IN_GOMP_ORDERED_START:\n+\tcase BUILT_IN_GOMP_ORDERED_END:\n+\tcase BUILT_IN_GOMP_PARALLEL_END:\n+\tcase BUILT_IN_GOMP_SECTIONS_END:\n+\tcase BUILT_IN_GOMP_SINGLE_COPY_START:\n+\tcase BUILT_IN_GOMP_SINGLE_COPY_END:\n+\t  return true;\n \tdefault:\n \t  /* Fallthru to general call handling.  */;\n       }"}]}