{"sha": "d881ff25796f4a9073be87a0542d28779959bf46", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDg4MWZmMjU3OTZmNGE5MDczYmU4N2EwNTQyZDI4Nzc5OTU5YmY0Ng==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2002-10-02T01:16:22Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2002-10-02T01:16:22Z"}, "message": "decl.c (cp_finish_decl): Make sure array types are laid out, even if the array bounds are unknown.\n\n\t* decl.c (cp_finish_decl): Make sure array types are laid out,\n\teven if the array bounds are unknown.\n\nFrom-SVN: r57717", "tree": {"sha": "edecb4ba020525d3b1598619510caa5322fb60c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/edecb4ba020525d3b1598619510caa5322fb60c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d881ff25796f4a9073be87a0542d28779959bf46", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d881ff25796f4a9073be87a0542d28779959bf46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d881ff25796f4a9073be87a0542d28779959bf46", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d881ff25796f4a9073be87a0542d28779959bf46/comments", "author": null, "committer": null, "parents": [{"sha": "db1a6d8676cad798f8473444e82f4461569b68fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db1a6d8676cad798f8473444e82f4461569b68fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db1a6d8676cad798f8473444e82f4461569b68fd"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "e78f0c2b342862970669d7f3ea01e743e04797df", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d881ff25796f4a9073be87a0542d28779959bf46/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d881ff25796f4a9073be87a0542d28779959bf46/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d881ff25796f4a9073be87a0542d28779959bf46", "patch": "@@ -1,10 +1,18 @@\n+2002-10-01  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* decl.c (cp_finish_decl): Make sure array types are laid out,\n+\teven if the array bounds are unknown.\n+\n 2002-10-01  Steve Ellcey  <sje@cup.hp.com>\n \n-\t* cp/class.c (build_vtbl_initializer): Change build_c_cast\n+\t* class.c (build_vtbl_initializer): Change build_c_cast\n \tto build1.\n \n 2002-10-01  Mark Mitchell  <mark@codesourcery.com>\n \n+\t* decl.c (cp_finish_decl): Make sure array types are laid out,\n+\teven if the array bounds are unknown.\n+\n \t* decl.c (cp_finish_decl): Correct check for dynamic\n \tinitialization of thread-local storage.\n "}, {"sha": "7375fde724013c5d795b7d22b7e9f5a85eddf7b6", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d881ff25796f4a9073be87a0542d28779959bf46/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d881ff25796f4a9073be87a0542d28779959bf46/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=d881ff25796f4a9073be87a0542d28779959bf46", "patch": "@@ -8253,6 +8253,12 @@ cp_finish_decl (decl, init, asmspec_tree, flags)\n \t     taken place.  */\n \t  DECL_INITIALIZED_P (decl) = 1;\n \t}\n+      /* If the variable has an array type, lay out the type, even if\n+\t there is no initializer.  It is valid to index through the\n+\t array, and we must get TYPE_ALIGN set correctly on the array\n+\t type.  */\n+      else if (TREE_CODE (type) == ARRAY_TYPE)\n+\tlayout_type (type);\n     }\n \n   /* Add this declaration to the statement-tree.  This needs to happen"}]}