{"sha": "a67ec6ab99c91c593138358b56dcc160aa09a015", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTY3ZWM2YWI5OWM5MWM1OTMxMzgzNThiNTZkY2MxNjBhYTA5YTAxNQ==", "commit": {"author": {"name": "Francois-Xavier Coudert", "email": "coudert@clipper.ens.fr", "date": "2005-11-04T08:29:16Z"}, "committer": {"name": "Fran\u00e7ois-Xavier Coudert", "email": "fxcoudert@gcc.gnu.org", "date": "2005-11-04T08:29:16Z"}, "message": "re PR fortran/18452 (Fortran options induces warning for fortran that needs preprocessing)\n\n\tPR fortran/18452\n\n\t* gcc/fortran/lang-specs.h: Pass -lang-fortran to the preprocessor.\n\n\t* gcc/c.opt: Add a -lang-fortran option.\n\t* gcc/c-opts.c: Add a lang_fortran flag.\n\t(c_common_init_options): Handling the -lang-fortran option.\n\t(c_common_handle_option): Add a case for Fortran options in\n\tpreprocessing. Remove cases for -ffixed-form and\n\t-ffixed-line-length. Add a case for -lang-fortran.\n\nFrom-SVN: r106483", "tree": {"sha": "4d84eda381e6ccb216977e5d703d88994573c9d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d84eda381e6ccb216977e5d703d88994573c9d3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a67ec6ab99c91c593138358b56dcc160aa09a015", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a67ec6ab99c91c593138358b56dcc160aa09a015", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a67ec6ab99c91c593138358b56dcc160aa09a015", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a67ec6ab99c91c593138358b56dcc160aa09a015/comments", "author": null, "committer": {"login": "fxcoudert", "id": 1980544, "node_id": "MDQ6VXNlcjE5ODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1980544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fxcoudert", "html_url": "https://github.com/fxcoudert", "followers_url": "https://api.github.com/users/fxcoudert/followers", "following_url": "https://api.github.com/users/fxcoudert/following{/other_user}", "gists_url": "https://api.github.com/users/fxcoudert/gists{/gist_id}", "starred_url": "https://api.github.com/users/fxcoudert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fxcoudert/subscriptions", "organizations_url": "https://api.github.com/users/fxcoudert/orgs", "repos_url": "https://api.github.com/users/fxcoudert/repos", "events_url": "https://api.github.com/users/fxcoudert/events{/privacy}", "received_events_url": "https://api.github.com/users/fxcoudert/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "553ff21c96f1206b02864c070af7a0e19934c4c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/553ff21c96f1206b02864c070af7a0e19934c4c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/553ff21c96f1206b02864c070af7a0e19934c4c9"}], "stats": {"total": 49, "additions": 40, "deletions": 9}, "files": [{"sha": "fcb4ce4a870c4954dd1d491bc00f6325f2364700", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a67ec6ab99c91c593138358b56dcc160aa09a015/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a67ec6ab99c91c593138358b56dcc160aa09a015/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a67ec6ab99c91c593138358b56dcc160aa09a015", "patch": "@@ -1,3 +1,13 @@\n+2005-11-04  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n+\n+\tPR fortran/18452\n+\t* gcc/c.opt: Add a -lang-fortran option.\n+\t* gcc/c-opts.c: Add a lang_fortran flag.\n+\t(c_common_init_options): Handling the -lang-fortran option.\n+\t(c_common_handle_option): Add a case for Fortran options in\n+\tpreprocessing. Remove cases for -ffixed-form and\n+\t-ffixed-line-length. Add a case for -lang-fortran.\n+\n 2005-11-03  David Edelsohn  <edelsohn@gnu.org>\n \n \t* config/rs6000/rs6000.c: Include params.h"}, {"sha": "62db668b4e12f02f0fd001ad72c54e09667db1b2", "filename": "gcc/c-opts.c", "status": "modified", "additions": 20, "deletions": 7, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a67ec6ab99c91c593138358b56dcc160aa09a015/gcc%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a67ec6ab99c91c593138358b56dcc160aa09a015/gcc%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-opts.c?ref=a67ec6ab99c91c593138358b56dcc160aa09a015", "patch": "@@ -70,6 +70,9 @@ static bool deps_seen;\n /* If -v seen.  */\n static bool verbose;\n \n+/* If -lang-fortran seen.  */\n+static bool lang_fortran = false;\n+\n /* Dependency output file.  */\n static const char *deps_file;\n \n@@ -237,6 +240,15 @@ c_common_init_options (unsigned int argc, const char **argv)\n \t    result |= CL_C | CL_ObjC | CL_CXX | CL_ObjCXX;\n \t    break;\n \t  }\n+\n+#ifdef CL_Fortran\n+      for (i = 1; i < argc; i++)\n+\tif (! strcmp (argv[i], \"-lang-fortran\"))\n+\t{\n+\t    result |= CL_Fortran;\n+\t    break;\n+\t}\n+#endif\n     }\n \n   return result;\n@@ -258,6 +270,10 @@ c_common_handle_option (size_t scode, const char *arg, int value)\n     default:\n       if (cl_options[code].flags & (CL_C | CL_CXX | CL_ObjC | CL_ObjCXX))\n \tbreak;\n+#ifdef CL_Fortran\n+      if (lang_fortran && (cl_options[code].flags & (CL_Fortran)))\n+\tbreak;\n+#endif\n       result = 0;\n       break;\n \n@@ -651,13 +667,6 @@ c_common_handle_option (size_t scode, const char *arg, int value)\n       cpp_opts->extended_identifiers = value;\n       break;\n \n-    case OPT_ffixed_form:\n-    case OPT_ffixed_line_length_:\n-      /* Fortran front end options ignored when preprocessing only.  */\n-      if (!flag_preprocess_only)\n-        result = 0;\n-      break;\n-\n     case OPT_ffor_scope:\n       flag_new_for_scope = value;\n       break;\n@@ -833,6 +842,10 @@ c_common_handle_option (size_t scode, const char *arg, int value)\n       cpp_opts->dollars_in_ident = false;\n       break;\n \n+    case OPT_lang_fortran:\n+      lang_fortran = true;\n+      break;\n+\n     case OPT_lang_objc:\n       cpp_opts->objc = 1;\n       break;"}, {"sha": "3d95ca2aba6e3ec8a2b812544e04f28b7204b4b3", "filename": "gcc/c.opt", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a67ec6ab99c91c593138358b56dcc160aa09a015/gcc%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a67ec6ab99c91c593138358b56dcc160aa09a015/gcc%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc.opt?ref=a67ec6ab99c91c593138358b56dcc160aa09a015", "patch": "@@ -781,6 +781,9 @@ C ObjC C++ ObjC++ Joined Separate\n lang-asm\n C Undocumented\n \n+lang-fortran\n+C Undocumented\n+\n lang-objc\n C ObjC C++ ObjC++ Undocumented\n "}, {"sha": "7e8cb395cf1571a1e3c35c6af4c942796c69aaf5", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a67ec6ab99c91c593138358b56dcc160aa09a015/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a67ec6ab99c91c593138358b56dcc160aa09a015/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=a67ec6ab99c91c593138358b56dcc160aa09a015", "patch": "@@ -1,3 +1,8 @@\n+2005-11-04  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n+\n+\tPR fortran/18452\n+\t* lang-specs.h: Pass -lang-fortran to the preprocessor.\n+\n 2005-11-02  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \tPR fortran/18157"}, {"sha": "688fbc1f276b1b1fb2c28e6374bd77e4b07a2ebb", "filename": "gcc/fortran/lang-specs.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a67ec6ab99c91c593138358b56dcc160aa09a015/gcc%2Ffortran%2Flang-specs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a67ec6ab99c91c593138358b56dcc160aa09a015/gcc%2Ffortran%2Flang-specs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Flang-specs.h?ref=a67ec6ab99c91c593138358b56dcc160aa09a015", "patch": "@@ -11,15 +11,15 @@ This file is licensed under the GPL.  */\n {\".fpp\", \"@f77-cpp-input\", 0, 0, 0},\n {\".FPP\", \"@f77-cpp-input\", 0, 0, 0},\n {\"@f77-cpp-input\",\n-  \"cc1 -E -traditional-cpp -D_LANGUAGE_FORTRAN %(cpp_options) \\\n+  \"cc1 -E -lang-fortran -traditional-cpp -D_LANGUAGE_FORTRAN %(cpp_options) \\\n       %{E|M|MM:%(cpp_debug_options)}\\\n       %{!M:%{!MM:%{!E: -o %|.f |\\n\\\n     f951 %|.f %{!ffree-form:-ffixed-form} %(cc1_options) %{J*} %{I*}\\\n       %{!fsyntax-only:%(invoke_as)}}}}\", 0, 0, 0},\n {\".F90\", \"@f95-cpp-input\", 0, 0, 0},\n {\".F95\", \"@f95-cpp-input\", 0, 0, 0},\n {\"@f95-cpp-input\",\n-  \"cc1 -E -traditional-cpp -D_LANGUAGE_FORTRAN %(cpp_options) \\\n+  \"cc1 -E -lang-fortran -traditional-cpp -D_LANGUAGE_FORTRAN %(cpp_options) \\\n       %{E|M|MM:%(cpp_debug_options)}\\\n       %{!M:%{!MM:%{!E: -o %|.f95 |\\n\\\n     f951 %|.f95 %(cc1_options) %{J*} %{I*}\\"}]}