{"sha": "e73c8e753ce1e1e4909618ed66e69cbe8a3c2cfc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTczYzhlNzUzY2UxZTFlNDkwOTYxOGVkNjZlNjljYmU4YTNjMmNmYw==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2002-01-18T13:25:27Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2002-01-18T13:25:27Z"}, "message": "semantics.c (setup_vtbl_ptr): Always build a CTOR_INITIALIZER if we're in a template.\n\n        * semantics.c (setup_vtbl_ptr): Always build a CTOR_INITIALIZER\n        if we're in a template.\n\nFrom-SVN: r48985", "tree": {"sha": "345f2a7bf6589ade056567f572d7389574dbdb6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/345f2a7bf6589ade056567f572d7389574dbdb6b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e73c8e753ce1e1e4909618ed66e69cbe8a3c2cfc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e73c8e753ce1e1e4909618ed66e69cbe8a3c2cfc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e73c8e753ce1e1e4909618ed66e69cbe8a3c2cfc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e73c8e753ce1e1e4909618ed66e69cbe8a3c2cfc/comments", "author": null, "committer": null, "parents": [{"sha": "cc0723165e7aa03d4f07f542452ca7cbb7912d69", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc0723165e7aa03d4f07f542452ca7cbb7912d69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc0723165e7aa03d4f07f542452ca7cbb7912d69"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "c5f122adbd93122ab2878cb7ee316a320754ca7f", "filename": "gcc/testsuite/g++.dg/template/vtable1.C", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e73c8e753ce1e1e4909618ed66e69cbe8a3c2cfc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvtable1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e73c8e753ce1e1e4909618ed66e69cbe8a3c2cfc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvtable1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fvtable1.C?ref=e73c8e753ce1e1e4909618ed66e69cbe8a3c2cfc", "patch": "@@ -0,0 +1,23 @@\n+// Test that vtables are set up properly for constructors and destructors\n+// of template classes.\n+\n+// { dg-do run }\n+\n+int r;\n+\n+template <class T>\n+struct A {\n+  virtual void f () { }\n+  A() { f (); }\n+  ~A() { f (); }\n+};\n+\n+struct B : public A<int> {\n+  virtual void f () { ++r; }\n+};\n+\n+int main ()\n+{\n+  { B b; }\n+  return r;\n+}"}]}