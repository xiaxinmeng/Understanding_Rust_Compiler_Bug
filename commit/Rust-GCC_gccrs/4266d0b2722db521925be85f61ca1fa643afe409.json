{"sha": "4266d0b2722db521925be85f61ca1fa643afe409", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDI2NmQwYjI3MjJkYjUyMTkyNWJlODVmNjFjYTFmYTY0M2FmZTQwOQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2001-08-16T21:52:14Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2001-08-16T21:52:14Z"}, "message": "jcf-dump.c (main): Updated for change to jcf_path_seal.\n\n\t* jcf-dump.c (main): Updated for change to jcf_path_seal.\n\t* gjavah.c (main): Updated for change to jcf_path_seal.\n\t* lang.c (version_flag): New global.\n\t(java_decode_option): Recognize `-version'.\n\t(java_init): Update for change to jcf_path_seal.\n\t* jcf.h (jcf_path_seal): Added `print' argument.\n\t* jcf-path.c (jcf_path_seal): Added `print' argument.\n\nFrom-SVN: r44946", "tree": {"sha": "f06b613d253e0de5c16d60467024000787675cc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f06b613d253e0de5c16d60467024000787675cc3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4266d0b2722db521925be85f61ca1fa643afe409", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4266d0b2722db521925be85f61ca1fa643afe409", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4266d0b2722db521925be85f61ca1fa643afe409", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4266d0b2722db521925be85f61ca1fa643afe409/comments", "author": null, "committer": null, "parents": [{"sha": "3c0a5af26c795b36e4f3a4bd56f787e8ea86d33e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c0a5af26c795b36e4f3a4bd56f787e8ea86d33e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c0a5af26c795b36e4f3a4bd56f787e8ea86d33e"}], "stats": {"total": 57, "additions": 47, "deletions": 10}, "files": [{"sha": "9be2fce369349c33a11cc1fc070e36e0527ff48f", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=4266d0b2722db521925be85f61ca1fa643afe409", "patch": "@@ -1,3 +1,13 @@\n+2001-08-16  Tom Tromey  <tromey@redhat.com>\n+\n+\t* jcf-dump.c (main): Updated for change to jcf_path_seal.\n+\t* gjavah.c (main): Updated for change to jcf_path_seal.\n+\t* lang.c (version_flag): New global.\n+\t(java_decode_option): Recognize `-version'.\n+\t(java_init): Update for change to jcf_path_seal.\n+\t* jcf.h (jcf_path_seal): Added `print' argument.\n+\t* jcf-path.c (jcf_path_seal): Added `print' argument.\n+\n 2001-08-13  Zack Weinberg  <zackw@panix.com>\n \n \t* Make-lang.in (java/decl.o): Update dependencies."}, {"sha": "47617af5d414e69cd8369454212af9a4c24fab5c", "filename": "gcc/java/gjavah.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2Fgjavah.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2Fgjavah.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fgjavah.c?ref=4266d0b2722db521925be85f61ca1fa643afe409", "patch": "@@ -1,7 +1,7 @@\n /* Program to write C++-suitable header files from a Java(TM) .class\n    file.  This is similar to SUN's javah.\n \n-Copyright (C) 1996, 1998, 1999, 2000 Free Software Foundation, Inc.\n+Copyright (C) 1996, 1998, 1999, 2000, 2001 Free Software Foundation, Inc.\n \n This program is free software; you can redistribute it and/or modify\n it under the terms of the GNU General Public License as published by\n@@ -2171,7 +2171,7 @@ DEFUN(main, (argc, argv),\n       usage ();\n     }\n \n-  jcf_path_seal ();\n+  jcf_path_seal (verbose);\n \n   if (output_file && emit_dependencies)\n     {"}, {"sha": "0f28ce940339cf0d82aa8b5fa6c0dfe8d38c12bf", "filename": "gcc/java/jcf-dump.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2Fjcf-dump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2Fjcf-dump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-dump.c?ref=4266d0b2722db521925be85f61ca1fa643afe409", "patch": "@@ -1,7 +1,7 @@\n /* Program to dump out a Java(TM) .class file.\n    Functionally similar to Sun's javap.\n \n-   Copyright (C) 1996, 1997, 1998, 1999, 2000 Free Software Foundation, Inc.\n+   Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001 Free Software Foundation, Inc.\n \n This program is free software; you can redistribute it and/or modify\n it under the terms of the GNU General Public License as published by\n@@ -902,7 +902,7 @@ DEFUN(main, (argc, argv),\n       usage ();\n     }\n \n-  jcf_path_seal ();\n+  jcf_path_seal (verbose);\n \n   if (flag_print_main)\n     {"}, {"sha": "079cb365411eed6e725f010be328f4f6bc4f80e9", "filename": "gcc/java/jcf-path.c", "status": "modified", "additions": 20, "deletions": 3, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2Fjcf-path.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2Fjcf-path.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-path.c?ref=4266d0b2722db521925be85f61ca1fa643afe409", "patch": "@@ -1,6 +1,6 @@\n /* Handle CLASSPATH, -classpath, and path searching.\n \n-   Copyright (C) 1998, 1999, 2000  Free Software Foundation, Inc.\n+   Copyright (C) 1998, 1999, 2000, 2001  Free Software Foundation, Inc.\n \n This program is free software; you can redistribute it and/or modify\n it under the terms of the GNU General Public License as published by\n@@ -311,9 +311,11 @@ jcf_path_include_arg (path)\n }\n \n /* We `seal' the path by linking everything into one big list.  Then\n-   we provide a way to iterate through the sealed list.  */\n+   we provide a way to iterate through the sealed list.  If PRINT is\n+   true then we print the final class path to stderr.  */\n void\n-jcf_path_seal ()\n+jcf_path_seal (print)\n+     int print;\n {\n   int do_system = 1;\n   struct entry *secondary;\n@@ -351,6 +353,21 @@ jcf_path_seal ()\n     }\n   else\n     free_entry (&sys_dirs);\n+\n+  if (print)\n+    {\n+      struct entry *ent;\n+      fprintf (stderr, \"Class path starts here:\\n\");\n+      for (ent = sealed; ent; ent = ent->next)\n+\t{\n+\t  fprintf (stderr, \"    %s\", ent->name);\n+\t  if ((ent->flags & FLAG_SYSTEM))\n+\t    fprintf (stderr, \" (system)\");\n+\t  if ((ent->flags & FLAG_ZIP))\n+\t    fprintf (stderr, \" (zip)\");\n+\t  fprintf (stderr, \"\\n\");\n+\t}\n+    }\n }\n \n void *"}, {"sha": "1feaaa8bccf04095a9ca8486f2e98a42b10fe5f5", "filename": "gcc/java/jcf.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2Fjcf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2Fjcf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf.h?ref=4266d0b2722db521925be85f61ca1fa643afe409", "patch": "@@ -1,6 +1,6 @@\n /* Utility macros to read Java(TM) .class files and byte codes.\n \n-   Copyright (C) 1996, 1997, 1998, 1999, 2000 Free Software Foundation, Inc.\n+   Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001 Free Software Foundation, Inc.\n \n This program is free software; you can redistribute it and/or modify\n it under the terms of the GNU General Public License as published by\n@@ -273,7 +273,7 @@ extern void jcf_path_init PARAMS ((void));\n extern void jcf_path_classpath_arg PARAMS ((const char *));\n extern void jcf_path_CLASSPATH_arg PARAMS ((const char *));\n extern void jcf_path_include_arg PARAMS ((const char *));\n-extern void jcf_path_seal PARAMS ((void));\n+extern void jcf_path_seal PARAMS ((int));\n extern void *jcf_path_start PARAMS ((void));\n extern void *jcf_path_next PARAMS ((void *));\n extern char *jcf_path_name PARAMS ((void *));"}, {"sha": "dd997a50336a0a6e23ba002325980d2123577857", "filename": "gcc/java/lang.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2Flang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4266d0b2722db521925be85f61ca1fa643afe409/gcc%2Fjava%2Flang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Flang.c?ref=4266d0b2722db521925be85f61ca1fa643afe409", "patch": "@@ -150,6 +150,9 @@ int flag_force_classes_archive_check;\n    be tested alone, use STATIC_CLASS_INITIALIZATION_OPTIMIZATION_P instead.  */\n int flag_optimize_sci = 1;\n \n+/* When non zero, print extra version information.  */\n+static int version_flag = 0;\n+\n /* Table of language-dependent -f options.\n    STRING is the option name.  VARIABLE is the address of the variable.\n    ON_VALUE is the value to store in VARIABLE\n@@ -236,6 +239,13 @@ java_decode_option (argc, argv)\n {\n   char *p = argv[0];\n \n+  if (strcmp (p, \"-version\") == 0)\n+    {\n+      version_flag = 1;\n+      /* We return 0 so that the caller can process this.  */\n+      return 0;\n+    }\n+\n #define CLARG \"-fassume-compiled=\"\n   if (strncmp (p, CLARG, sizeof (CLARG) - 1) == 0)\n     {\n@@ -655,7 +665,7 @@ java_init ()\n #endif\n \n   jcf_path_init ();\n-  jcf_path_seal ();\n+  jcf_path_seal (version_flag);\n \n   decl_printable_name = lang_printable_name;\n   print_error_function = lang_print_error;"}]}