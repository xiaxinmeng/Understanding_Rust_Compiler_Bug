{"sha": "a10ce2f8eda6b4be3ffc432102b558a4cd055fb0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTEwY2UyZjhlZGE2YjRiZTNmZmM0MzIxMDJiNTU4YTRjZDA1NWZiMA==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2005-03-24T23:33:56Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2005-03-24T23:33:56Z"}, "message": "Index: cp/ChangeLog\n2005-03-24  Geoffrey Keating  <geoffk@apple.com>\n\n\t* typeck.c (build_static_cast_1): Allow scalar_cast between\n\tany integral, floating, or enumeration type.\n\nIndex: testsuite/ChangeLog\n2005-03-24  Geoffrey Keating  <geoffk@apple.com>\n\n\t* g++.dg/expr/cast3.C: New.\n\nFrom-SVN: r97019", "tree": {"sha": "00f93404319f492515942791b32145492be80b53", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00f93404319f492515942791b32145492be80b53"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a9f15d8302c4ab9dbe8e7233c9c9cc7699c2d950", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9f15d8302c4ab9dbe8e7233c9c9cc7699c2d950", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9f15d8302c4ab9dbe8e7233c9c9cc7699c2d950"}], "stats": {"total": 47, "additions": 40, "deletions": 7}, "files": [{"sha": "d7697372ecdfd292b94c367fd370242d120ff22c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a10ce2f8eda6b4be3ffc432102b558a4cd055fb0", "patch": "@@ -1,3 +1,8 @@\n+2005-03-24  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* typeck.c (build_static_cast_1): Allow scalar_cast between\n+\tany integral, floating, or enumeration type.\n+\n 2005-03-24  Steven Bosscher  <stevenb@suse.de>\n \n \t* typeck.c (comptypes): First determine if the types are compatible"}, {"sha": "a3bf1c0281f7fd802cb60db0adb805342138fcba", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=a10ce2f8eda6b4be3ffc432102b558a4cd055fb0", "patch": "@@ -4624,13 +4624,15 @@ build_static_cast_1 (tree type, tree expr, bool c_cast_p,\n      promotions, floating point promotion, integral conversions,\n      floating point conversions, floating-integral conversions,\n      pointer conversions, and pointer to member conversions.  */\n-  if ((ARITHMETIC_TYPE_P (type) && ARITHMETIC_TYPE_P (intype))\n-      /* DR 128\n-\n-         A value of integral _or enumeration_ type can be explicitly\n-\t converted to an enumeration type.  */\n-      || (INTEGRAL_OR_ENUMERATION_TYPE_P (type)\n-\t  && INTEGRAL_OR_ENUMERATION_TYPE_P (intype)))\n+  /* DR 128\n+     \n+     A value of integral _or enumeration_ type can be explicitly\n+     converted to an enumeration type.  */\n+  /* The effect of all that is that any conversion between any two\n+     types which are integral, floating, or enumeration types can be\n+     performed.  */\n+  if ((INTEGRAL_TYPE_P (type) || SCALAR_FLOAT_TYPE_P (type))\n+      && (INTEGRAL_TYPE_P (intype) || SCALAR_FLOAT_TYPE_P (intype)))\n     {\n       expr = ocp_convert (type, expr, CONV_C_CAST, LOOKUP_NORMAL);\n "}, {"sha": "0fe028909af150585ffe093b86d650a14cd06ea2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a10ce2f8eda6b4be3ffc432102b558a4cd055fb0", "patch": "@@ -1,3 +1,7 @@\n+2005-03-24  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* g++.dg/expr/cast3.C: New.\n+\n 2005-03-24  David Edelsohn  <edelsohn@gnu.org>\n \n \t* gcc.c-torture/execute/20020720-1.x: XFAIL for all powerpc and"}, {"sha": "2ca56c2698ab61bda68e2bd80290bfed2cf0b18b", "filename": "gcc/testsuite/g++.dg/expr/cast3.C", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fcast3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a10ce2f8eda6b4be3ffc432102b558a4cd055fb0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fcast3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fcast3.C?ref=a10ce2f8eda6b4be3ffc432102b558a4cd055fb0", "patch": "@@ -0,0 +1,22 @@\n+// { dg-do compile }\n+\n+enum MyState\n+{\n+        QUIT = 0,\n+        START,\n+        STOP,\n+        PAUSE\n+};\n+\n+double GetDouble()\n+{\n+        return 1.0;\n+}\n+\n+int main()\n+{\n+        MyState the_state;\n+\n+        the_state = (MyState)GetDouble(); // { dg-bogus \"invalid cast\" }\n+        return 0;\n+}       "}]}