{"sha": "a28dfaafc5afd06419408048b664a843b2739086", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTI4ZGZhYWZjNWFmZDA2NDE5NDA4MDQ4YjY2NGE4NDNiMjczOTA4Ng==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2018-11-13T13:50:18Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2018-11-13T13:50:18Z"}, "message": "re PR tree-optimization/87967 (ICE in slpeel_duplicate_current_defs_from_edges)\n\n2018-11-13  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/87967\n\t* tree-vect-loop.c (vect_transform_loop): Also copy PHIs\n\tfor constants for the scalar loop.\n\n\t* g++.dg/opt/pr87967.C: New testcase.\n\nFrom-SVN: r266070", "tree": {"sha": "6563558266bbba6d4c4a91b662ff78bc96b85921", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6563558266bbba6d4c4a91b662ff78bc96b85921"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a28dfaafc5afd06419408048b664a843b2739086", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a28dfaafc5afd06419408048b664a843b2739086", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a28dfaafc5afd06419408048b664a843b2739086", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a28dfaafc5afd06419408048b664a843b2739086/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a277ca89ac37a0da1f8e6a92fc3b591e2385dd77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a277ca89ac37a0da1f8e6a92fc3b591e2385dd77", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a277ca89ac37a0da1f8e6a92fc3b591e2385dd77"}], "stats": {"total": 63, "additions": 62, "deletions": 1}, "files": [{"sha": "19ccd9cbf1d019948f542a41feac979e9372150d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a28dfaafc5afd06419408048b664a843b2739086/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a28dfaafc5afd06419408048b664a843b2739086/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a28dfaafc5afd06419408048b664a843b2739086", "patch": "@@ -1,3 +1,9 @@\n+2018-11-13  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/87967\n+\t* tree-vect-loop.c (vect_transform_loop): Also copy PHIs\n+\tfor constants for the scalar loop.\n+\n 2018-11-13  Alan Modra  <amodra@gmail.com>\n \n \t* config/rs6000/linux64.h (ASM_OUTPUT_SPECIAL_POOL_ENTRY_P): Exclude"}, {"sha": "41ffd8b310087464f42be78b34a38027cf88835f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a28dfaafc5afd06419408048b664a843b2739086/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a28dfaafc5afd06419408048b664a843b2739086/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a28dfaafc5afd06419408048b664a843b2739086", "patch": "@@ -1,3 +1,8 @@\n+2018-11-13  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/87967\n+\t* g++.dg/opt/pr87967.C: New testcase.\n+\n 2018-11-13  Claudiu Zissulescu  <claziss@synopsys.com>\n \n \t* gcc.target/arc/builtin_eh.c: New test."}, {"sha": "aa28dfc8a4f9c8eb5589033ac344f25853b9c821", "filename": "gcc/testsuite/g++.dg/opt/pr87967.C", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a28dfaafc5afd06419408048b664a843b2739086/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr87967.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a28dfaafc5afd06419408048b664a843b2739086/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr87967.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr87967.C?ref=a28dfaafc5afd06419408048b664a843b2739086", "patch": "@@ -0,0 +1,50 @@\n+// { dg-do compile { target c++11 } }\n+// { dg-options \"-O3\" }\n+\n+void h();\n+template <typename b> struct k { using d = b; };\n+template <typename b, template <typename> class> using e = k<b>;\n+template <typename b, template <typename> class f>\n+using g = typename e<b, f>::d;\n+struct l {\n+  template <typename i> using ab = typename i::j;\n+};\n+struct n : l {\n+  using j = g<char *, ab>;\n+};\n+class o {\n+public:\n+  long r();\n+};\n+char m;\n+char s() {\n+  if (m)\n+    return '0';\n+  return 'A';\n+}\n+class t {\n+public:\n+  typedef char *ad;\n+  ad m_fn2();\n+};\n+void fn3() {\n+  char *a;\n+  t b;\n+  bool p = false;\n+  while (*a) {\n+    h();\n+    o c;\n+    if (*a)\n+      a++;\n+    if (c.r()) {\n+      n::j q;\n+      for (t::ad d = b.m_fn2(), e; d != e; d++) {\n+        char f = *q;\n+        *d = f + s();\n+      }\n+      p = true;\n+    }\n+  }\n+  if (p)\n+    throw;\n+}"}, {"sha": "c4886ec76e66880f0efcb44956ad25248aecfdc7", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a28dfaafc5afd06419408048b664a843b2739086/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a28dfaafc5afd06419408048b664a843b2739086/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=a28dfaafc5afd06419408048b664a843b2739086", "patch": "@@ -8264,7 +8264,7 @@ vect_transform_loop (loop_vec_info loop_vinfo)\n       e = single_exit (LOOP_VINFO_SCALAR_LOOP (loop_vinfo));\n       if (! single_pred_p (e->dest))\n \t{\n-\t  split_loop_exit_edge (e);\n+\t  split_loop_exit_edge (e, true);\n \t  if (dump_enabled_p ())\n \t    dump_printf (MSG_NOTE, \"split exit edge of scalar loop\\n\");\n \t}"}]}