{"sha": "a31dc4e516d2816c6be4c5f7329718223fced1e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTMxZGM0ZTUxNmQyODE2YzZiZTRjNWY3MzI5NzE4MjIzZmNlZDFlMw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2015-07-01T09:08:17Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2015-07-01T09:08:17Z"}, "message": "re PR c++/60365 (multiple noreturn attribute specifiers in a single declaration doesn't result in a diagnostic)\n\n/cp\n2015-07-01  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/60365\n\t* parser.c (cp_parser_check_std_attribute): New.\n\t(cp_parser_std_attribute_list): Call it.\n\n/testsuite\n2015-07-01  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/60365\n\t* g++.dg/cpp0x/gen-attrs-60.C: New.\n\t* g++.dg/cpp1y/attr-deprecated-2.C: Likewise.\n\nFrom-SVN: r225234", "tree": {"sha": "e5175fe43c39b8951c80af2483cba321b1a172da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5175fe43c39b8951c80af2483cba321b1a172da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a31dc4e516d2816c6be4c5f7329718223fced1e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a31dc4e516d2816c6be4c5f7329718223fced1e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a31dc4e516d2816c6be4c5f7329718223fced1e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a31dc4e516d2816c6be4c5f7329718223fced1e3/comments", "author": null, "committer": null, "parents": [{"sha": "d0baaae35172c6cfb7a0c314842bf2cfc62a40f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0baaae35172c6cfb7a0c314842bf2cfc62a40f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0baaae35172c6cfb7a0c314842bf2cfc62a40f2"}], "stats": {"total": 45, "additions": 44, "deletions": 1}, "files": [{"sha": "33fe38e2bbb83ebf8346fb1350989db3ea124253", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a31dc4e516d2816c6be4c5f7329718223fced1e3/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a31dc4e516d2816c6be4c5f7329718223fced1e3/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a31dc4e516d2816c6be4c5f7329718223fced1e3", "patch": "@@ -1,3 +1,9 @@\n+2015-07-01  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/60365\n+\t* parser.c (cp_parser_check_std_attribute): New.\n+\t(cp_parser_std_attribute_list): Call it.\n+\n 2015-07-01  Patrick Palka  <ppalka@gcc.gnu.org>\n \n \tPR c++/66686"}, {"sha": "35191a1cabc5889f31173fea832128ea2fba58ab", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a31dc4e516d2816c6be4c5f7329718223fced1e3/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a31dc4e516d2816c6be4c5f7329718223fced1e3/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=a31dc4e516d2816c6be4c5f7329718223fced1e3", "patch": "@@ -22535,6 +22535,28 @@ cp_parser_std_attribute (cp_parser *parser)\n   return attribute;\n }\n \n+/* Check that the attribute ATTRIBUTE appears at most once in the\n+   attribute-list ATTRIBUTES.  This is enforced for noreturn (7.6.3)\n+   and deprecated (7.6.5).  Note that carries_dependency (7.6.4)\n+   isn't implemented yet in GCC.  */\n+\n+static void\n+cp_parser_check_std_attribute (tree attributes, tree attribute)\n+{\n+  if (attributes)\n+    {\n+      tree name = get_attribute_name (attribute);\n+      if (is_attribute_p (\"noreturn\", name)\n+\t  && lookup_attribute (\"noreturn\", attributes))\n+\terror (\"attribute noreturn can appear at most once \"\n+\t       \"in an attribute-list\");\n+      else if (is_attribute_p (\"deprecated\", name)\n+\t       && lookup_attribute (\"deprecated\", attributes))\n+\terror (\"attribute deprecated can appear at most once \"\n+\t       \"in an attribute-list\");\n+    }\n+}\n+\n /* Parse a list of standard C++-11 attributes.\n \n    attribute-list:\n@@ -22557,6 +22579,7 @@ cp_parser_std_attribute_list (cp_parser *parser)\n \tbreak;\n       if (attribute != NULL_TREE)\n \t{\n+\t  cp_parser_check_std_attribute (attributes, attribute);\n \t  TREE_CHAIN (attribute) = attributes;\n \t  attributes = attribute;\n \t}"}, {"sha": "65ce5f960de9cf3eaad62b18f41918457a2daafe", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a31dc4e516d2816c6be4c5f7329718223fced1e3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a31dc4e516d2816c6be4c5f7329718223fced1e3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a31dc4e516d2816c6be4c5f7329718223fced1e3", "patch": "@@ -1,6 +1,12 @@\n+2015-07-01  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/60365\n+\t* g++.dg/cpp0x/gen-attrs-60.C: New.\n+\t* g++.dg/cpp1y/attr-deprecated-2.C: Likewise.\n+\n 2015-07-01  Jiong Wang  <jiong.wang@arm.com>\n \n-\t* lib/target-supports.exp (check_effective_target_aarch64_small_fpic): New function.\n+\t* lib/target-supports.exp (check_effective_target_aarch64_small_fpic):New function.\n \t* gcc.target/aarch64/pic-small.c: Restrict this test under\n \tcheck_effective_target_aarch64_small_fpic.\n "}, {"sha": "cb0c31ec63f77bf454470f23f429109fabaeb369", "filename": "gcc/testsuite/g++.dg/cpp0x/gen-attrs-60.C", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a31dc4e516d2816c6be4c5f7329718223fced1e3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fgen-attrs-60.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a31dc4e516d2816c6be4c5f7329718223fced1e3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fgen-attrs-60.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fgen-attrs-60.C?ref=a31dc4e516d2816c6be4c5f7329718223fced1e3", "patch": "@@ -0,0 +1,4 @@\n+// PR c++/60365\n+// { dg-do compile { target c++11 } }\n+\n+void func [[noreturn, noreturn]] ();     // { dg-error \"at most once\" }"}, {"sha": "12c75c7ba732d893068495c5d008a9a229866311", "filename": "gcc/testsuite/g++.dg/cpp1y/attr-deprecated-2.C", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a31dc4e516d2816c6be4c5f7329718223fced1e3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a31dc4e516d2816c6be4c5f7329718223fced1e3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated-2.C?ref=a31dc4e516d2816c6be4c5f7329718223fced1e3", "patch": "@@ -0,0 +1,4 @@\n+// PR c++/60365\n+// { dg-do compile { target c++14 } }\n+\n+void func [[deprecated, deprecated]] (); // { dg-error \"at most once\" }"}]}