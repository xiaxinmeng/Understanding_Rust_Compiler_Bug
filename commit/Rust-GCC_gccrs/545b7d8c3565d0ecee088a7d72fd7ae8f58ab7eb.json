{"sha": "545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ1YjdkOGMzNTY1ZDBlY2VlMDg4YTdkNzJmZDdhZThmNThhYjdlYg==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-06-04T23:42:04Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-06-04T23:42:04Z"}, "message": "re PR c++/27601 (ICE (in fold_offsetof_1, at c-common.c:5998) on strange offsetof)\n\n\tPR c++/27601\n\t* c-common.c (fold_offsetof_1): Handle static members.\n\n\t* g++.dg/ext/offsetof1.C: New test.\n\nFrom-SVN: r114369", "tree": {"sha": "2bddd61210982f6d3a1adbfa0506167eda2b2d24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2bddd61210982f6d3a1adbfa0506167eda2b2d24"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb/comments", "author": null, "committer": null, "parents": [{"sha": "0ac11108c422b8daeb62e22c5f04beeb299055dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ac11108c422b8daeb62e22c5f04beeb299055dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ac11108c422b8daeb62e22c5f04beeb299055dc"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "80f588d15beb6bdaa773e94fc33cf1d94718c762", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb", "patch": "@@ -1,3 +1,8 @@\n+2006-06-04  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/27601\n+\t* c-common.c (fold_offsetof_1): Handle static members.\n+\n 2006-06-04 Eric Christopher <echristo@apple.com>\n \n \t* stor-layout.c (start_record_layout): Initialize remaining_in_alignment."}, {"sha": "1fb5a6a4a4b8287009c0ce0f5b1d7ccbf98d6ba5", "filename": "gcc/c-common.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb", "patch": "@@ -5981,6 +5981,10 @@ fold_offsetof_1 (tree expr)\n     case ERROR_MARK:\n       return expr;\n \n+    case VAR_DECL:\n+      error (\"cannot apply %<offsetof%> to static data member %qD\", expr);\n+      return error_mark_node;\n+\n     case INDIRECT_REF:\n       return size_zero_node;\n "}, {"sha": "9b484a9a363ffa6279a8bd0b050c0f2e4bb6f135", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb", "patch": "@@ -1,3 +1,8 @@\n+2006-06-04  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/27601\n+\t* g++.dg/ext/offsetof1.C: New test.\n+\n 2006-06-04 Eric Christopher <echristo@apple.com>\n \n \t* gcc.dg/attr-ms_struct-1.c: New."}, {"sha": "5d6552f78787215971f7fc9a975e689786a5395d", "filename": "gcc/testsuite/g++.dg/ext/offsetof1.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Foffsetof1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Foffsetof1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Foffsetof1.C?ref=545b7d8c3565d0ecee088a7d72fd7ae8f58ab7eb", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/27601\n+// Origin: Patrik H\ufffdgglund  <patrik.hagglund@bredband.net>\n+// { dg-do compile }\n+\n+struct bar {\n+  static int foo;\n+};\n+\n+int a = __builtin_offsetof(bar, foo);  // { dg-error \"static data member\" }"}]}