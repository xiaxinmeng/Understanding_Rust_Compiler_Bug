{"sha": "fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmRmY2I1MzUzY2MyYjA2ZmM4MDIwNWNmY2IzYmM1YmEyNTU1NjI2NA==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-03-26T14:46:24Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-03-26T15:14:32Z"}, "message": "libphobos: Build all modules with -fversion=Shared when configured with --enable-shared\n\nThe libgdruntime_convenience library was built with `-fversion=Shared',\nbut the libphobos part wasn't when creating the static library.\n\nAs there are no issues compiling in Shared code into the static library,\nto avoid mismatches the flag is now always present when --enable-shared\nis turned on.  Libtool's compiler PIC D flag is now the combination of\ncompiler PIC and D Shared flags, and AM_DFLAGS passes `-prefer-pic' to\nlibtool unless --enable-shared is turned off.\n\nlibphobos/ChangeLog:\n\n\t* Makefile.in: Regenerate.\n\t* configure: Regenerate.\n\t* configure.ac: Substitute enable_shared, enable_static, and\n\tphobos_lt_pic_flag.\n\t* libdruntime/Makefile.am (AM_DFLAGS): Replace\n\t  phobos_compiler_pic_flag with phobos_lt_pic_flags, and\n\t  phobos_compiler_shared_flag.\n\t* libdruntime/Makefile.in: Regenerate.\n\t* src/Makefile.am (AM_DFLAGS): Replace phobos_compiler_pic_flag\n\t  with phobos_lt_pic_flag, and phobos_compiler_shared_flag.\n\t* src/Makefile.in: Regenerate.\n\t* testsuite/Makefile.in: Regenerate.\n\t* testsuite/libphobos.druntime_shared/druntime_shared.exp: Remove\n\t-fversion=Shared and -fno-moduleinfo from default extra test flags.\n\t* testsuite/libphobos.phobos_shared/phobos_shared.exp: Likewise.\n\t* testsuite/testsuite_flags.in: Add phobos_compiler_shared_flag to\n\t--gdcflags.", "tree": {"sha": "1ebb7f503eb0a4de98c3da2bdb0c41e76816843d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1ebb7f503eb0a4de98c3da2bdb0c41e76816843d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f5e18db259c8a9790feb1d73bb0348182264f15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f5e18db259c8a9790feb1d73bb0348182264f15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f5e18db259c8a9790feb1d73bb0348182264f15"}], "stats": {"total": 72, "additions": 47, "deletions": 25}, "files": [{"sha": "eab1268886705f35e75541ab8d6b4546d7e09ee7", "filename": "libphobos/Makefile.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2FMakefile.in?ref=fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "patch": "@@ -298,6 +298,8 @@ datadir = @datadir@\n datarootdir = @datarootdir@\n docdir = @docdir@\n dvidir = @dvidir@\n+enable_shared = @enable_shared@\n+enable_static = @enable_static@\n exec_prefix = @exec_prefix@\n gcc_version = @gcc_version@\n gdc_include_dir = @gdc_include_dir@\n@@ -327,6 +329,7 @@ oldincludedir = @oldincludedir@\n pdfdir = @pdfdir@\n phobos_compiler_pic_flag = @phobos_compiler_pic_flag@\n phobos_compiler_shared_flag = @phobos_compiler_shared_flag@\n+phobos_lt_pic_flag = @phobos_lt_pic_flag@\n prefix = @prefix@\n program_transform_name = @program_transform_name@\n psdir = @psdir@"}, {"sha": "59ca64aa1e022d72b9f6f6821cca570da47306e4", "filename": "libphobos/configure", "status": "modified", "additions": 15, "deletions": 9, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fconfigure?ref=fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "patch": "@@ -705,6 +705,9 @@ libphobos_builddir\n get_gcc_base_ver\n phobos_compiler_shared_flag\n phobos_compiler_pic_flag\n+phobos_lt_pic_flag\n+enable_static\n+enable_shared\n OTOOL64\n OTOOL\n LIPO\n@@ -11746,7 +11749,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11749 \"configure\"\n+#line 11752 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11852,7 +11855,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11855 \"configure\"\n+#line 11858 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -13997,8 +14000,14 @@ CFLAGS=$lt_save_CFLAGS\n   GDCFLAGS=$gdc_save_DFLAGS\n \n \n+\n+\n # libtool variables for Phobos shared and position-independent compiles.\n #\n+# Use phobos_lt_pic_flag to designate the automake variable\n+# used to encapsulate the default libtool approach to creating objects\n+# with position-independent code. Default: -prefer-pic.\n+#\n # Use phobos_compiler_shared_flag to designate the compile-time flags for\n # creating shared objects. Default: -fversion=Shared.\n #\n@@ -14010,26 +14019,23 @@ CFLAGS=$lt_save_CFLAGS\n # libtool, and so we make it here.  How it is handled is that in shared\n # compilations the `lt_prog_compiler_pic_D' variable is used to instead\n # ensure that conditional compilation of shared runtime code is compiled in.\n-# The original PIC flags are then used in the compilation of every object.\n-#\n-# Why are objects destined for libgphobos.a compiled with -fPIC?\n-# Because -fPIC is not harmful to use for objects destined for static\n-# libraries. In addition, using -fPIC will allow the use of static\n-# libgphobos.a in the creation of other D shared libraries.\n if test \"$enable_shared\" = yes; then\n+  phobos_lt_pic_flag=\"-prefer-pic\"\n   phobos_compiler_pic_flag=\"$lt_prog_compiler_pic_D\"\n   phobos_compiler_shared_flag=\"-fversion=Shared\"\n else\n+  phobos_lt_pic_flag=\n   phobos_compiler_pic_flag=\n   phobos_compiler_shared_flag=\n fi\n \n \n \n+\n # Override the libtool's pic_flag and pic_mode.\n # Do this step after AM_PROG_LIBTOOL, but before AC_OUTPUT.\n # NB: this impacts --with-pic and --without-pic.\n-lt_prog_compiler_pic_D=\"$phobos_compiler_shared_flag\"\n+lt_prog_compiler_pic_D=\"$phobos_compiler_pic_flag $phobos_compiler_shared_flag\"\n pic_mode='default'\n \n # Determine what GCC version number to use in filesystem paths."}, {"sha": "248d0ebbc19f9f5bc47d7ef6e176ebf38eef0203", "filename": "libphobos/configure.ac", "status": "modified", "additions": 10, "deletions": 7, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fconfigure.ac?ref=fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "patch": "@@ -91,9 +91,15 @@ AC_SUBST(CFLAGS_FOR_BUILD)\n LT_INIT(dlopen)\n AM_PROG_LIBTOOL\n WITH_LOCAL_DRUNTIME([LT_LANG([D])], [])\n+AC_SUBST(enable_shared)\n+AC_SUBST(enable_static)\n \n # libtool variables for Phobos shared and position-independent compiles.\n #\n+# Use phobos_lt_pic_flag to designate the automake variable\n+# used to encapsulate the default libtool approach to creating objects\n+# with position-independent code. Default: -prefer-pic.\n+#\n # Use phobos_compiler_shared_flag to designate the compile-time flags for\n # creating shared objects. Default: -fversion=Shared.\n #\n@@ -105,26 +111,23 @@ WITH_LOCAL_DRUNTIME([LT_LANG([D])], [])\n # libtool, and so we make it here.  How it is handled is that in shared\n # compilations the `lt_prog_compiler_pic_D' variable is used to instead\n # ensure that conditional compilation of shared runtime code is compiled in.\n-# The original PIC flags are then used in the compilation of every object.\n-#\n-# Why are objects destined for libgphobos.a compiled with -fPIC?\n-# Because -fPIC is not harmful to use for objects destined for static\n-# libraries. In addition, using -fPIC will allow the use of static\n-# libgphobos.a in the creation of other D shared libraries.\n if test \"$enable_shared\" = yes; then\n+  phobos_lt_pic_flag=\"-prefer-pic\"\n   phobos_compiler_pic_flag=\"$lt_prog_compiler_pic_D\"\n   phobos_compiler_shared_flag=\"-fversion=Shared\"\n else\n+  phobos_lt_pic_flag=\n   phobos_compiler_pic_flag=\n   phobos_compiler_shared_flag=\n fi\n+AC_SUBST(phobos_lt_pic_flag)\n AC_SUBST(phobos_compiler_pic_flag)\n AC_SUBST(phobos_compiler_shared_flag)\n \n # Override the libtool's pic_flag and pic_mode.\n # Do this step after AM_PROG_LIBTOOL, but before AC_OUTPUT.\n # NB: this impacts --with-pic and --without-pic.\n-lt_prog_compiler_pic_D=\"$phobos_compiler_shared_flag\"\n+lt_prog_compiler_pic_D=\"$phobos_compiler_pic_flag $phobos_compiler_shared_flag\"\n pic_mode='default'\n \n # Determine what GCC version number to use in filesystem paths."}, {"sha": "535ca26e860466078f845c7596cafff6b178e643", "filename": "libphobos/libdruntime/Makefile.am", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Flibdruntime%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Flibdruntime%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2FMakefile.am?ref=fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "patch": "@@ -23,7 +23,7 @@ D_EXTRA_DFLAGS=-nostdinc -I $(srcdir) -I .\n \n # D flags for compilation\n AM_DFLAGS= \\\n-\t$(phobos_compiler_pic_flag) \\\n+\t$(phobos_lt_pic_flag) $(phobos_compiler_shared_flag) \\\n \t$(WARN_DFLAGS) $(CHECKING_DFLAGS) $(CET_DFLAGS)\n \n # Flags for other kinds of sources"}, {"sha": "7960add41d88816f86c42106d6a0f80e8da8255e", "filename": "libphobos/libdruntime/Makefile.in", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Flibdruntime%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Flibdruntime%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2FMakefile.in?ref=fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "patch": "@@ -659,6 +659,8 @@ datadir = @datadir@\n datarootdir = @datarootdir@\n docdir = @docdir@\n dvidir = @dvidir@\n+enable_shared = @enable_shared@\n+enable_static = @enable_static@\n exec_prefix = @exec_prefix@\n gcc_version = @gcc_version@\n gdc_include_dir = @gdc_include_dir@\n@@ -688,6 +690,7 @@ oldincludedir = @oldincludedir@\n pdfdir = @pdfdir@\n phobos_compiler_pic_flag = @phobos_compiler_pic_flag@\n phobos_compiler_shared_flag = @phobos_compiler_shared_flag@\n+phobos_lt_pic_flag = @phobos_lt_pic_flag@\n prefix = @prefix@\n program_transform_name = @program_transform_name@\n psdir = @psdir@\n@@ -720,7 +723,7 @@ D_EXTRA_DFLAGS = -nostdinc -I $(srcdir) -I .\n \n # D flags for compilation\n AM_DFLAGS = \\\n-\t$(phobos_compiler_pic_flag) \\\n+\t$(phobos_lt_pic_flag) $(phobos_compiler_shared_flag) \\\n \t$(WARN_DFLAGS) $(CHECKING_DFLAGS) $(CET_DFLAGS)\n \n "}, {"sha": "0dc2a2625a92f0dbca48f547c22d45bb787522f3", "filename": "libphobos/src/Makefile.am", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Fsrc%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Fsrc%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2FMakefile.am?ref=fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "patch": "@@ -24,7 +24,7 @@ D_EXTRA_DFLAGS=-nostdinc -I $(srcdir) \\\n \n # D flags for compilation\n AM_DFLAGS= \\\n-\t$(phobos_compiler_pic_flag) \\\n+\t$(phobos_lt_pic_flag) $(phobos_compiler_shared_flag) \\\n \t$(WARN_DFLAGS) $(CHECKING_DFLAGS) $(CET_DFLAGS)\n \n # Flags for other kinds of sources"}, {"sha": "33453517153473825c984496af9c33416f2dbb37", "filename": "libphobos/src/Makefile.in", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Fsrc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Fsrc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2FMakefile.in?ref=fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "patch": "@@ -414,6 +414,8 @@ datadir = @datadir@\n datarootdir = @datarootdir@\n docdir = @docdir@\n dvidir = @dvidir@\n+enable_shared = @enable_shared@\n+enable_static = @enable_static@\n exec_prefix = @exec_prefix@\n gcc_version = @gcc_version@\n gdc_include_dir = @gdc_include_dir@\n@@ -443,6 +445,7 @@ oldincludedir = @oldincludedir@\n pdfdir = @pdfdir@\n phobos_compiler_pic_flag = @phobos_compiler_pic_flag@\n phobos_compiler_shared_flag = @phobos_compiler_shared_flag@\n+phobos_lt_pic_flag = @phobos_lt_pic_flag@\n prefix = @prefix@\n program_transform_name = @program_transform_name@\n psdir = @psdir@\n@@ -477,7 +480,7 @@ D_EXTRA_DFLAGS = -nostdinc -I $(srcdir) \\\n \n # D flags for compilation\n AM_DFLAGS = \\\n-\t$(phobos_compiler_pic_flag) \\\n+\t$(phobos_lt_pic_flag) $(phobos_compiler_shared_flag) \\\n \t$(WARN_DFLAGS) $(CHECKING_DFLAGS) $(CET_DFLAGS)\n \n "}, {"sha": "51eb4efc79d8cda50139e0d833ca66dc09fc29da", "filename": "libphobos/testsuite/Makefile.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Ftestsuite%2FMakefile.in?ref=fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "patch": "@@ -242,6 +242,8 @@ datadir = @datadir@\n datarootdir = @datarootdir@\n docdir = @docdir@\n dvidir = @dvidir@\n+enable_shared = @enable_shared@\n+enable_static = @enable_static@\n exec_prefix = @exec_prefix@\n gcc_version = @gcc_version@\n gdc_include_dir = @gdc_include_dir@\n@@ -271,6 +273,7 @@ oldincludedir = @oldincludedir@\n pdfdir = @pdfdir@\n phobos_compiler_pic_flag = @phobos_compiler_pic_flag@\n phobos_compiler_shared_flag = @phobos_compiler_shared_flag@\n+phobos_lt_pic_flag = @phobos_lt_pic_flag@\n prefix = @prefix@\n program_transform_name = @program_transform_name@\n psdir = @psdir@"}, {"sha": "2b2561346dbf4a1b5df0f8a8218afa235b2dc657", "filename": "libphobos/testsuite/libphobos.druntime_shared/druntime_shared.exp", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Ftestsuite%2Flibphobos.druntime_shared%2Fdruntime_shared.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Ftestsuite%2Flibphobos.druntime_shared%2Fdruntime_shared.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Ftestsuite%2Flibphobos.druntime_shared%2Fdruntime_shared.exp?ref=fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "patch": "@@ -34,8 +34,8 @@ dg-init\n # Main loop.\n foreach test $tests {\n     set libphobos_test_name \"$subdir/[dg-trim-dirname $srcdir/../libdruntime $test]\"\n-    dg-runtest $test \"-fversion=Shared -shared-libphobos\" \\\n-\t\"-fmain -fbuilding-libphobos-tests -fno-moduleinfo $version_flags\"\n+    dg-runtest $test \"-shared-libphobos\" \\\n+\t\"-fmain -fbuilding-libphobos-tests $version_flags\"\n     set libphobos_test_name \"\"\n }\n "}, {"sha": "3a847e71e9878e1fe3102a6729c1b0f3107a14c9", "filename": "libphobos/testsuite/libphobos.phobos_shared/phobos_shared.exp", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Ftestsuite%2Flibphobos.phobos_shared%2Fphobos_shared.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Ftestsuite%2Flibphobos.phobos_shared%2Fphobos_shared.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Ftestsuite%2Flibphobos.phobos_shared%2Fphobos_shared.exp?ref=fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "patch": "@@ -45,8 +45,8 @@ dg-init\n # Main loop.\n foreach test $tests {\n     set libphobos_test_name \"$subdir/[dg-trim-dirname $srcdir/../src $test]\"\n-    dg-runtest $test \"-fversion=Shared -shared-libphobos\" \\\n-\t\"-fmain -fbuilding-libphobos-tests -fno-moduleinfo $version_flags\"\n+    dg-runtest $test \"-shared-libphobos\" \\\n+\t\"-fmain -fbuilding-libphobos-tests $version_flags\"\n     set libphobos_test_name \"\"\n }\n "}, {"sha": "bafd5ad4502f4bd810981ea2c33fc7045cb6c153", "filename": "libphobos/testsuite/testsuite_flags.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Ftestsuite%2Ftestsuite_flags.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdfcb5353cc2b06fc80205cfcb3bc5ba25556264/libphobos%2Ftestsuite%2Ftestsuite_flags.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Ftestsuite%2Ftestsuite_flags.in?ref=fdfcb5353cc2b06fc80205cfcb3bc5ba25556264", "patch": "@@ -28,7 +28,8 @@ case ${query} in\n       ;;\n     --gdcflags)\n       GDCFLAGS_default=\"-fmessage-length=0 -fno-show-column\"\n-      GDCFLAGS_config=\"@WARN_DFLAGS@ @GDCFLAGS@ @CET_DFLAGS@ -fno-release -funittest\"\n+      GDCFLAGS_config=\"@WARN_DFLAGS@ @GDCFLAGS@ @CET_DFLAGS@\n+\t\t       @phobos_compiler_shared_flag@ -fno-release -funittest\"\n       echo ${GDCFLAGS_default} ${GDCFLAGS_config}\n       ;;\n     --gdcpaths)"}]}