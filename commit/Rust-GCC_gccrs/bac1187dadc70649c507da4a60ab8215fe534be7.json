{"sha": "bac1187dadc70649c507da4a60ab8215fe534be7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmFjMTE4N2RhZGM3MDY0OWM1MDdkYTRhNjBhYjgyMTVmZTUzNGJlNw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2017-10-02T12:40:26Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2017-10-02T12:40:26Z"}, "message": "re PR c++/79180 (Nested lambda-capture causes segfault for parameter pack)\n\n2017-10-02  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/79180\n\t* g++.dg/cpp0x/lambda/lambda-nested8.C: New.\n\t* g++.dg/torture/pr79180.C: Likewise.\n\n\tPR c++/71386\n\t* g++.dg/cpp1y/lambda-generic-nested1.C: New.\n\nFrom-SVN: r253350", "tree": {"sha": "6d4f7a7065da4abcd194a0a8e653c94a7d01819f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d4f7a7065da4abcd194a0a8e653c94a7d01819f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bac1187dadc70649c507da4a60ab8215fe534be7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bac1187dadc70649c507da4a60ab8215fe534be7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bac1187dadc70649c507da4a60ab8215fe534be7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bac1187dadc70649c507da4a60ab8215fe534be7/comments", "author": null, "committer": null, "parents": [{"sha": "22381c22b4713ccdf504e80d59866b73f7f734fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22381c22b4713ccdf504e80d59866b73f7f734fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22381c22b4713ccdf504e80d59866b73f7f734fe"}], "stats": {"total": 89, "additions": 89, "deletions": 0}, "files": [{"sha": "405a4b0c39d66105e5ab485d742ccc9e414ca47b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bac1187dadc70649c507da4a60ab8215fe534be7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bac1187dadc70649c507da4a60ab8215fe534be7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bac1187dadc70649c507da4a60ab8215fe534be7", "patch": "@@ -1,3 +1,12 @@\n+2017-10-02  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/79180\n+\t* g++.dg/cpp0x/lambda/lambda-nested8.C: New.\n+\t* g++.dg/torture/pr79180.C: Likewise.\n+\n+\tPR c++/71386\n+\t* g++.dg/cpp1y/lambda-generic-nested1.C: New.\n+\n 2017-10-02  Richard Biener  <rguenther@suse.de>\n \n \t* gcc.dg/graphite/graphite.exp: Add -fdump-tree-graphite-details."}, {"sha": "5a6f47c1089a2cb469951785af4441b1e4292ec8", "filename": "gcc/testsuite/g++.dg/cpp0x/lambda/lambda-nested8.C", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bac1187dadc70649c507da4a60ab8215fe534be7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-nested8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bac1187dadc70649c507da4a60ab8215fe534be7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-nested8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-nested8.C?ref=bac1187dadc70649c507da4a60ab8215fe534be7", "patch": "@@ -0,0 +1,23 @@\n+// PR c++/79180\n+// { dg-do run { target c++11 } }\n+\n+void\n+foo (int a)\n+{\n+  if (a != 127)\n+    __builtin_abort ();\n+}\n+\n+template <typename... Args>\n+void\n+bar (Args &&... args)\n+{\n+  [&]() { [&]() { foo (args...); } (); } ();\n+}\n+\n+int\n+main ()\n+{\n+  int x = 127;\n+  bar (x);\n+}"}, {"sha": "4cfd353fa771b407e374231d70b8e1e1a11d4188", "filename": "gcc/testsuite/g++.dg/cpp1y/lambda-generic-nested1.C", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bac1187dadc70649c507da4a60ab8215fe534be7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Flambda-generic-nested1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bac1187dadc70649c507da4a60ab8215fe534be7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Flambda-generic-nested1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Flambda-generic-nested1.C?ref=bac1187dadc70649c507da4a60ab8215fe534be7", "patch": "@@ -0,0 +1,34 @@\n+// PR c++/71386\n+// { dg-do run { target c++14 } }\n+\n+template<class...XS>\n+auto List(XS...xs)\n+{\n+  return [=](auto processList){return processList(xs...);};\n+}\n+\n+auto l1 = List(42);\n+\n+int test (int a)\n+{\n+  if (a != 42)\n+    __builtin_abort ();\n+  return 0;\n+}\n+\n+auto foo = [](auto... xs1)\n+  {\n+    return [=]()\n+    { \n+      return l1([=](auto)\n+      {\n+\treturn test (xs1...);\n+      });\n+    };\n+  };\n+\n+int main()\n+{\n+  auto concat = l1(foo);\n+  concat();\n+}"}, {"sha": "2e3992ccd08c64e9c0b18595eb47e90434ed1f09", "filename": "gcc/testsuite/g++.dg/torture/pr79180.C", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bac1187dadc70649c507da4a60ab8215fe534be7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr79180.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bac1187dadc70649c507da4a60ab8215fe534be7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr79180.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr79180.C?ref=bac1187dadc70649c507da4a60ab8215fe534be7", "patch": "@@ -0,0 +1,23 @@\n+// { dg-do run }\n+// { dg-options \"-Wall -std=c++11\" }\n+\n+void\n+foo (int a)\n+{\n+  if (a != 127)\n+    __builtin_abort ();\n+}\n+\n+template <typename... Args>\n+void\n+bar (Args &&... args)\n+{\n+  [&]() { [&]() { foo (args...); } (); } ();\n+}\n+\n+int\n+main ()\n+{\n+  int x = 127;\n+  bar (x);\n+}"}]}