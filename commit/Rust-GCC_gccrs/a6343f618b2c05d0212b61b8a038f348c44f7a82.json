{"sha": "a6343f618b2c05d0212b61b8a038f348c44f7a82", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTYzNDNmNjE4YjJjMDVkMDIxMmI2MWI4YTAzOGYzNDhjNDRmN2E4Mg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2011-04-28T09:54:04Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2011-04-28T09:54:04Z"}, "message": "re PR c++/48530 ([C++0x][SFINAE] Hard errors with deleted d'tors)\n\n/cp\n2011-04-28  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/48530\n\t* tree.c (build_cplus_new): Check build_target_expr return\n\tvalue for error_mark_node.\n\n/testsuite\n2011-04-28  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/48530\n\t* g++.dg/cpp0x/sfinae18.C: New.\n\nFrom-SVN: r173063", "tree": {"sha": "6035139ba9496a71ae53b141db5c161f7e124aa1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6035139ba9496a71ae53b141db5c161f7e124aa1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6343f618b2c05d0212b61b8a038f348c44f7a82", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6343f618b2c05d0212b61b8a038f348c44f7a82", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6343f618b2c05d0212b61b8a038f348c44f7a82", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6343f618b2c05d0212b61b8a038f348c44f7a82/comments", "author": null, "committer": null, "parents": [{"sha": "83b6b866e6860bb7555d91c1f05f9215f15a60f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83b6b866e6860bb7555d91c1f05f9215f15a60f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83b6b866e6860bb7555d91c1f05f9215f15a60f0"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "163bee3c1a0b002ba6878742dc39a7d34450840b", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6343f618b2c05d0212b61b8a038f348c44f7a82/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6343f618b2c05d0212b61b8a038f348c44f7a82/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a6343f618b2c05d0212b61b8a038f348c44f7a82", "patch": "@@ -1,3 +1,9 @@\n+2011-04-28  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/48530\n+\t* tree.c (build_cplus_new): Check build_target_expr return\n+\tvalue for error_mark_node.\n+\n 2011-04-28  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/48771"}, {"sha": "2eaa1db0b22170bbf258f67ae67dc98237e11265", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6343f618b2c05d0212b61b8a038f348c44f7a82/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6343f618b2c05d0212b61b8a038f348c44f7a82/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=a6343f618b2c05d0212b61b8a038f348c44f7a82", "patch": "@@ -1,6 +1,6 @@\n /* Language-dependent node constructors for parse phase of GNU compiler.\n    Copyright (C) 1987, 1988, 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2007, 2008, 2009, 2010\n+   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2007, 2008, 2009, 2010, 2011\n    Free Software Foundation, Inc.\n    Hacked by Michael Tiemann (tiemann@cygnus.com)\n \n@@ -456,7 +456,9 @@ build_cplus_new (tree type, tree init, tsubst_flags_t complain)\n     return rval;\n \n   rval = build_target_expr (slot, rval, complain);\n-  TARGET_EXPR_IMPLICIT_P (rval) = 1;\n+\n+  if (rval != error_mark_node)\n+    TARGET_EXPR_IMPLICIT_P (rval) = 1;\n \n   return rval;\n }"}, {"sha": "9891d226562bb10f31741929e1a3b4c9c983e725", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6343f618b2c05d0212b61b8a038f348c44f7a82/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6343f618b2c05d0212b61b8a038f348c44f7a82/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a6343f618b2c05d0212b61b8a038f348c44f7a82", "patch": "@@ -1,3 +1,8 @@\n+2011-04-28  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/48530\n+\t* g++.dg/cpp0x/sfinae18.C: New.\n+\n 2011-04-28  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/48771"}, {"sha": "bb54335e6cc846425b3b9269bb521c195498f35e", "filename": "gcc/testsuite/g++.dg/cpp0x/sfinae18.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6343f618b2c05d0212b61b8a038f348c44f7a82/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fsfinae18.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6343f618b2c05d0212b61b8a038f348c44f7a82/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fsfinae18.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fsfinae18.C?ref=a6343f618b2c05d0212b61b8a038f348c44f7a82", "patch": "@@ -0,0 +1,17 @@\n+// PR c++/48530\n+// { dg-options -std=c++0x }\n+\n+template<class T, \n+  class = decltype(T())\n+>\n+char f(int);\n+\n+template<class>\n+char (&f(...))[2];\n+\n+struct DelDtor {\n+  DelDtor() = default;\n+  ~DelDtor() = delete;\n+};\n+\n+static_assert(sizeof(f<DelDtor>(0)) != 1, \"Error\");"}]}