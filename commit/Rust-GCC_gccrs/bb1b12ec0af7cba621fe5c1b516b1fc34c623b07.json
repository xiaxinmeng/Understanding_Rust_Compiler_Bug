{"sha": "bb1b12ec0af7cba621fe5c1b516b1fc34c623b07", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmIxYjEyZWMwYWY3Y2JhNjIxZmU1YzFiNTE2YjFmYzM0YzYyM2IwNw==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2003-10-02T23:06:13Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2003-10-02T23:06:13Z"}, "message": "locale_classes.h (locale::facet::_S_get_c_name): Add.\n\n\n2003-10-02  Benjamin Kosnik  <bkoz@redhat.com>\n\n\t* include/bits/locale_classes.h (locale::facet::_S_get_c_name): Add.\n\t* src/locale.cc: Define.\n\t* src/localename.cc: Use it.\n\t* config/locale/generic/time_members.h: Same.\n\t* config/locale/gnu/messages_members.h: Same.\n\t* config/locale/gnu/time_members.h: Same.\n\nFrom-SVN: r72050", "tree": {"sha": "3e91b10f93d413590759262c22b56e49c5ca436f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e91b10f93d413590759262c22b56e49c5ca436f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/comments", "author": null, "committer": null, "parents": [{"sha": "8dcaff2850b7081696175bf6ae6b5f7021cbea3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dcaff2850b7081696175bf6ae6b5f7021cbea3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dcaff2850b7081696175bf6ae6b5f7021cbea3c"}], "stats": {"total": 39, "additions": 28, "deletions": 11}, "files": [{"sha": "8dd67c22c0d9ab470ce80c225554afbaf50a95c4", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=bb1b12ec0af7cba621fe5c1b516b1fc34c623b07", "patch": "@@ -1,3 +1,12 @@\n+2003-10-02  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\t* include/bits/locale_classes.h (locale::facet::_S_get_c_name): Add.\n+\t* src/locale.cc: Define.\n+\t* src/localename.cc: Use it.\n+\t* config/locale/generic/time_members.h: Same.\n+\t* config/locale/gnu/messages_members.h: Same.\n+\t* config/locale/gnu/time_members.h: Same.\n+\n 2003-10-02  Paolo Carlini  <pcarlini@unitus.it>\n \n \tPR libstdc++/12232"}, {"sha": "9801300ceca4a53e2feed05e38f3622eb1c264c9", "filename": "libstdc++-v3/config/locale/generic/time_members.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgeneric%2Ftime_members.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgeneric%2Ftime_members.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgeneric%2Ftime_members.h?ref=bb1b12ec0af7cba621fe5c1b516b1fc34c623b07", "patch": "@@ -38,15 +38,15 @@\n     __timepunct<_CharT>::__timepunct(size_t __refs) \n     : facet(__refs), _M_data(NULL)\n     { \n-      _M_name_timepunct = _S_c_name;\n+      _M_name_timepunct = _S_get_c_name();\n       _M_initialize_timepunct(); \n     }\n \n   template<typename _CharT>\n     __timepunct<_CharT>::__timepunct(__cache_type* __cache, size_t __refs) \n     : facet(__refs), _M_data(__cache)\n     { \n-      _M_name_timepunct = _S_c_name;\n+      _M_name_timepunct = _S_get_c_name();\n       _M_initialize_timepunct(); \n     }\n \n@@ -64,7 +64,7 @@\n   template<typename _CharT>\n     __timepunct<_CharT>::~__timepunct()\n     { \n-      if (_S_c_name != _M_name_timepunct)\n+      if (_M_name_timepunct != _S_get_c_name())\n \tdelete [] _M_name_timepunct;\n       delete _M_data;\n       _S_destroy_c_locale(_M_c_locale_timepunct); "}, {"sha": "9bb8e50c43800a50ed866498dd8a0f4b10a8b220", "filename": "libstdc++-v3/config/locale/gnu/messages_members.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgnu%2Fmessages_members.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgnu%2Fmessages_members.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgnu%2Fmessages_members.h?ref=bb1b12ec0af7cba621fe5c1b516b1fc34c623b07", "patch": "@@ -39,7 +39,7 @@\n      : facet(__refs)\n      {  \n #if !(__GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2))\n-       _M_name_messages = _S_c_name;\n+       _M_name_messages = _S_get_c_name();\n #endif\n        _M_c_locale_messages = _S_get_c_locale(); \n      }\n@@ -72,7 +72,7 @@\n     messages<_CharT>::~messages()\n     { \n #if !(__GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2))\n-      if (_S_c_name != _M_name_messages)\n+      if (_M_name_messages != _S_get_c_name())\n \tdelete [] _M_name_messages;\n #endif\n       _S_destroy_c_locale(_M_c_locale_messages); \n@@ -100,7 +100,7 @@\n      : messages<_CharT>(__refs) \n      { \n #if !(__GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2))\n-       if (this->_S_c_name != this->_M_name_messages)\n+       if (this->_M_name_messages != locale::facet::_S_get_c_name())\n \t delete [] this->_M_name_messages;\n        char* __tmp = new char[std::strlen(__s) + 1];\n        std::strcpy(__tmp, __s);"}, {"sha": "142ed2bf1146d91ab4d9fa101be85e9379c808fd", "filename": "libstdc++-v3/config/locale/gnu/time_members.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgnu%2Ftime_members.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgnu%2Ftime_members.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgnu%2Ftime_members.h?ref=bb1b12ec0af7cba621fe5c1b516b1fc34c623b07", "patch": "@@ -39,7 +39,7 @@\n     : facet(__refs), _M_data(NULL)\n     { \n #if !(__GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2))\n-      _M_name_timepunct = _S_c_name;\n+      _M_name_timepunct = _S_get_c_name();\n #endif\n       _M_initialize_timepunct(); \n     }\n@@ -49,7 +49,7 @@\n     : facet(__refs), _M_data(__cache)\n     { \n #if !(__GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2))\n-      _M_name_timepunct = _S_c_name;\n+      _M_name_timepunct = _S_get_c_name();\n #endif\n       _M_initialize_timepunct(); \n     }\n@@ -72,7 +72,7 @@\n     __timepunct<_CharT>::~__timepunct()\n     { \n #if !(__GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2))\n-      if (_S_c_name != _M_name_timepunct)\n+      if (_M_name_timepunct != _S_get_c_name())\n \tdelete [] _M_name_timepunct;\n #endif\n       delete _M_data; "}, {"sha": "e8f4e816fc26605ab024b8f45874057dcaf68e1c", "filename": "libstdc++-v3/include/bits/locale_classes.h", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_classes.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_classes.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_classes.h?ref=bb1b12ec0af7cba621fe5c1b516b1fc34c623b07", "patch": "@@ -224,10 +224,14 @@ namespace std\n     static void\n     _S_destroy_c_locale(__c_locale& __cloc);\n \n-    // Returns data from the underlying \"C\" library for the classic locale.\n+    // Returns data from the underlying \"C\" library data for the\n+    // classic locale.\n     static __c_locale\n     _S_get_c_locale();\n \n+    static const char*\n+    _S_get_c_name();\n+\n   private:\n     inline void\n     _M_add_reference() const throw()"}, {"sha": "7c1e8ab5b81d28f4a8d4fabe59d57c47e6a0865a", "filename": "libstdc++-v3/src/locale.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Fsrc%2Flocale.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Fsrc%2Flocale.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Flocale.cc?ref=bb1b12ec0af7cba621fe5c1b516b1fc34c623b07", "patch": "@@ -486,6 +486,10 @@ namespace std\n     return _S_c_locale;\n   }\n \n+  const char*\n+  locale::facet::_S_get_c_name()\n+  { return _S_c_name; }\n+\n   // Definitions for static const data members of time_base.\n   template<> \n     const char*"}, {"sha": "ba90ca4b5c448603384832f489af784a31350546", "filename": "libstdc++-v3/src/localename.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Fsrc%2Flocalename.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb1b12ec0af7cba621fe5c1b516b1fc34c623b07/libstdc%2B%2B-v3%2Fsrc%2Flocalename.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Flocalename.cc?ref=bb1b12ec0af7cba621fe5c1b516b1fc34c623b07", "patch": "@@ -258,7 +258,7 @@ namespace std\n     for (size_t __i = 0; __i < _S_categories_size; ++__i)\n       {\n \t_M_names[__i] = new (&name_c[__i]) char[2];\n-\tstd::strcpy(_M_names[__i], locale::facet::_S_c_name);\n+\tstd::strcpy(_M_names[__i], locale::facet::_S_get_c_name());\n       }\n \n     // This is needed as presently the C++ version of \"C\" locales"}]}