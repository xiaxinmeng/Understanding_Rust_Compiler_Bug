{"sha": "6e456f4cf4deee3e2ccd9849286f59b90644c48b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmU0NTZmNGNmNGRlZWUzZTJjY2Q5ODQ5Mjg2ZjU5YjkwNjQ0YzQ4Yg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-12-12T21:00:36Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-12-12T21:00:36Z"}, "message": "re PR rtl-optimization/51495 (ICE: in force_nonfallthru_and_redirect, at cfgrtl.c:1171 with computed goto)\n\n\tPR rtl-optimization/51495\n\t* function.c (thread_prologue_and_epilogue_insns): Don't add\n\tto bb_tail basic blocks that have EDGE_COMPLEX predecessor edges\n\tfrom basic blocks not needing prologue.\n\n\t* gcc.c-torture/compile/pr51495.c: New test.\n\nFrom-SVN: r182265", "tree": {"sha": "7ed652648dc198102247414a0ec9f76f20b4e4d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7ed652648dc198102247414a0ec9f76f20b4e4d9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e456f4cf4deee3e2ccd9849286f59b90644c48b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e456f4cf4deee3e2ccd9849286f59b90644c48b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e456f4cf4deee3e2ccd9849286f59b90644c48b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e456f4cf4deee3e2ccd9849286f59b90644c48b/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c88388e6745fb65bbc41c1e941c41f02ff27e4b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c88388e6745fb65bbc41c1e941c41f02ff27e4b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c88388e6745fb65bbc41c1e941c41f02ff27e4b7"}], "stats": {"total": 41, "additions": 38, "deletions": 3}, "files": [{"sha": "6a7fedd04394a0c4edf0f8ac25ef79469827111e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e456f4cf4deee3e2ccd9849286f59b90644c48b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e456f4cf4deee3e2ccd9849286f59b90644c48b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6e456f4cf4deee3e2ccd9849286f59b90644c48b", "patch": "@@ -1,5 +1,10 @@\n 2011-12-12  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR rtl-optimization/51495\n+\t* function.c (thread_prologue_and_epilogue_insns): Don't add\n+\tto bb_tail basic blocks that have EDGE_COMPLEX predecessor edges\n+\tfrom basic blocks not needing prologue.\n+\n \tPR tree-optimization/51481\n \t* gimple-fold.c (gimple_fold_call): Call\n \tmaybe_clean_or_replace_eh_stmt.  Avoid optimization if stmt has EH"}, {"sha": "506ec030745bb0fb46016fbac96ebce98c12d647", "filename": "gcc/function.c", "status": "modified", "additions": 16, "deletions": 3, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e456f4cf4deee3e2ccd9849286f59b90644c48b/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e456f4cf4deee3e2ccd9849286f59b90644c48b/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=6e456f4cf4deee3e2ccd9849286f59b90644c48b", "patch": "@@ -5956,9 +5956,22 @@ thread_prologue_and_epilogue_insns (void)\n \t  FOR_EACH_EDGE (e, ei, tmp_bb->preds)\n \t    if (single_succ_p (e->src)\n \t\t&& !bitmap_bit_p (&bb_on_list, e->src->index)\n-\t\t&& can_duplicate_block_p (e->src)\n-\t\t&& bitmap_set_bit (&bb_tail, e->src->index))\n-\t      VEC_quick_push (basic_block, vec, e->src);\n+\t\t&& can_duplicate_block_p (e->src))\n+\t      {\n+\t\tedge pe;\n+\t\tedge_iterator pei;\n+\n+\t\t/* If there is predecessor of e->src which doesn't\n+\t\t   need prologue and the edge is complex,\n+\t\t   we might not be able to redirect the branch\n+\t\t   to a copy of e->src.  */\n+\t\tFOR_EACH_EDGE (pe, pei, e->src->preds)\n+\t\t  if ((pe->flags & EDGE_COMPLEX) != 0\n+\t\t      && !bitmap_bit_p (&bb_flags, pe->src->index))\n+\t\t    break;\n+\t\tif (pe == NULL && bitmap_set_bit (&bb_tail, e->src->index))\n+\t\t  VEC_quick_push (basic_block, vec, e->src);\n+\t      }\n \t}\n \n       /* Now walk backwards from every block that is marked as needing"}, {"sha": "acf3efc7ada11752a0855e82d3fabb443891ce62", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e456f4cf4deee3e2ccd9849286f59b90644c48b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e456f4cf4deee3e2ccd9849286f59b90644c48b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6e456f4cf4deee3e2ccd9849286f59b90644c48b", "patch": "@@ -1,5 +1,8 @@\n 2011-12-12  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR rtl-optimization/51495\n+\t* gcc.c-torture/compile/pr51495.c: New test.\n+\n \tPR tree-optimization/51481\n \t* gcc.dg/pr51481.c: New test.\n "}, {"sha": "34de37b5309e42fcec186700271e46f7a331ad27", "filename": "gcc/testsuite/gcc.c-torture/compile/pr51495.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e456f4cf4deee3e2ccd9849286f59b90644c48b/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr51495.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e456f4cf4deee3e2ccd9849286f59b90644c48b/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr51495.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr51495.c?ref=6e456f4cf4deee3e2ccd9849286f59b90644c48b", "patch": "@@ -0,0 +1,14 @@\n+/* PR rtl-optimization/51495 */\n+\n+void bar (void);\n+\n+int\n+foo (int i)\n+{\n+  static const void *const table[] = { &&begin, &&end };\n+  goto *(table[i]);\n+begin:\n+  bar ();\n+end:\n+  return 0;\n+}"}]}