{"sha": "e43dd89d8061e68695c871f7f6b044012dfcd82b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTQzZGQ4OWQ4MDYxZTY4Njk1Yzg3MWY3ZjZiMDQ0MDEyZGZjZDgyYg==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2003-01-30T15:39:43Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "2003-01-30T15:39:43Z"}, "message": "arm.c (arm_compute_initial_elimination_offset): If optimizing for size...\n\n* arm.c (arm_compute_initial_elimination_offset): If optimizing for\nsize, the link register is always saved if any other register is\nsaved.\n\nFrom-SVN: r62142", "tree": {"sha": "61ef8cef0299e95bee7a24ed0450b1ce1969dde5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61ef8cef0299e95bee7a24ed0450b1ce1969dde5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e43dd89d8061e68695c871f7f6b044012dfcd82b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e43dd89d8061e68695c871f7f6b044012dfcd82b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e43dd89d8061e68695c871f7f6b044012dfcd82b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e43dd89d8061e68695c871f7f6b044012dfcd82b/comments", "author": null, "committer": null, "parents": [{"sha": "87a902e411978db4d5d8bf8eca4f02561d949cbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87a902e411978db4d5d8bf8eca4f02561d949cbf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87a902e411978db4d5d8bf8eca4f02561d949cbf"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "4e7b7e8e17fe1e18dd158eb218fadc02415b59b9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e43dd89d8061e68695c871f7f6b044012dfcd82b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e43dd89d8061e68695c871f7f6b044012dfcd82b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e43dd89d8061e68695c871f7f6b044012dfcd82b", "patch": "@@ -1,3 +1,9 @@\n+2003-01-30  Richard Earnshaw  <rearnsha@arm.com>\n+\n+\t* arm.c (arm_compute_initial_elimination_offset): If optimizing for\n+\tsize, the link register is always saved if any other register is\n+\tsaved.\n+\n 2003-01-30  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/h8300/h8300-protos.h: Update the prototype for"}, {"sha": "3a8d993af461ca00aefc4b7d93c4e701fd545327", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e43dd89d8061e68695c871f7f6b044012dfcd82b/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e43dd89d8061e68695c871f7f6b044012dfcd82b/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=e43dd89d8061e68695c871f7f6b044012dfcd82b", "patch": "@@ -8648,10 +8648,14 @@ arm_compute_initial_elimination_offset (from, to)\n \t  reg_mask = reg_mask & ~ (reg_mask & - reg_mask);\n \t}\n \n-      if (regs_ever_live[LR_REGNUM]\n-\t  /* If a stack frame is going to be created, the LR will\n-\t     be saved as part of that, so we do not need to allow\n-\t     for it here.  */\n+      if ((regs_ever_live[LR_REGNUM]\n+\t   /* If optimizing for size, then we save the link register if\n+\t      any other integer register is saved.  This gives a smaller\n+\t      return sequence.  */\n+\t   || (optimize_size && call_saved_registers > 0))\n+\t  /* But if a stack frame is going to be created, the LR will\n+\t     be saved as part of that, so we do not need to allow for\n+\t     it here.  */\n \t  && ! frame_pointer_needed)\n \tcall_saved_registers += 4;\n "}]}