{"sha": "13a39886940331149173b25d6ebde0850668d8b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTNhMzk4ODY5NDAzMzExNDkxNzNiMjVkNmViZGUwODUwNjY4ZDhiOQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl.tools@gmail.com", "date": "2021-06-08T23:09:24Z"}, "committer": {"name": "H.J. Lu", "email": "hjl.tools@gmail.com", "date": "2021-06-09T12:14:24Z"}, "message": "Always enable DT_INIT_ARRAY/DT_FINI_ARRAY on Linux\n\nDT_INIT_ARRAY/DT_FINI_ARRAY support was added to glibc 2.1 by\n\ncommit fcf70d4114db9ff7923f5dfeb3fea6e2d623e5c2\nAuthor: Ulrich Drepper <drepper@redhat.com>\nDate:   Sat Jul 24 19:45:13 1999 +0000\n\n    Update.\n\n    1999-07-24  Ulrich Drepper  <drepper@cygnus.com>\n\n            * elf/dl-fini.c: Handle DT_FINI_ARRAY.\n            * elf/link.h (struct link_map): Remove l_init_running.  Add l_runcount\n            and l_initcount.\n            * elf/dl-init.c: Handle DT_INIT_ARRAY.\n...\n\nand added to binutils 2.12 by\n\ncommit e9682144c14fc809af72bd6c0b8c69731d38679c\nAuthor: H.J. Lu <hjl.tools@gmail.com>\nDate:   Mon Mar 4 20:40:48 2002 +0000\n\n    2002-03-04  H.J. Lu <hjl@gnu.org>\n\n            * config/obj-elf.c (special_section): Add .init_array,\n            .fini_array and .preinit_array.\n\n            * config/tc-ia64.h (ELF_TC_SPECIAL_SECTIONS): Remove\n            .init_array and .fini_array.\n\ngcc/\n\n\tPR target/100896\n\t* config.gcc (gcc_cv_initfini_array): Set to yes for Linux and\n\tGNU targets.\n\t* doc/install.texi: Require glibc 2.1 and binutils 2.12 for\n\tLinux and GNU targets.", "tree": {"sha": "00c18cc8e6249adf38a49a09564a6ac916cd9cbd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00c18cc8e6249adf38a49a09564a6ac916cd9cbd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/13a39886940331149173b25d6ebde0850668d8b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13a39886940331149173b25d6ebde0850668d8b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13a39886940331149173b25d6ebde0850668d8b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13a39886940331149173b25d6ebde0850668d8b9/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b3fce1bd45f72cc9e55fb7431762e92e30fefcf1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3fce1bd45f72cc9e55fb7431762e92e30fefcf1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3fce1bd45f72cc9e55fb7431762e92e30fefcf1"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "4dc4fe0b65c07a900f59dfa80fa889528fd837c7", "filename": "gcc/config.gcc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13a39886940331149173b25d6ebde0850668d8b9/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13a39886940331149173b25d6ebde0850668d8b9/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=13a39886940331149173b25d6ebde0850668d8b9", "patch": "@@ -848,6 +848,8 @@ case ${target} in\n   tmake_file=\"${tmake_file} t-glibc\"\n   target_has_targetcm=yes\n   target_has_targetdm=yes\n+  # Linux targets always support .init_array.\n+  gcc_cv_initfini_array=yes\n   ;;\n *-*-netbsd*)\n   tm_p_file=\"${tm_p_file} netbsd-protos.h\""}, {"sha": "94b167a3ed3d3e8b50dc86b751c9abcb52c94cb9", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13a39886940331149173b25d6ebde0850668d8b9/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13a39886940331149173b25d6ebde0850668d8b9/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=13a39886940331149173b25d6ebde0850668d8b9", "patch": "@@ -4126,6 +4126,9 @@ supported, so @option{--enable-threads=dce} does not work.\n @end html\n @anchor{x-x-linux-gnu}\n @heading *-*-linux-gnu\n+The @code{.init_array} and @code{.fini_array} sections are enabled\n+unconditionally which requires at least glibc 2.1 and binutils 2.12.\n+\n Versions of libstdc++-v3 starting with 3.2.1 require bug fixes present\n in glibc 2.2.5 and later.  More information is available in the\n libstdc++-v3 documentation."}]}