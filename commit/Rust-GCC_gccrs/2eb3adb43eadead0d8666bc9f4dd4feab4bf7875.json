{"sha": "2eb3adb43eadead0d8666bc9f4dd4feab4bf7875", "node_id": "C_kwDOANBUbNoAKDJlYjNhZGI0M2VhZGVhZDBkODY2NmJjOWY0ZGQ0ZmVhYjRiZjc4NzU", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2022-06-20T15:18:36Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2022-06-20T15:19:40Z"}, "message": "arm: more testsutie fallout for mve move-immediate changes\n\nUnfortunately, there is more fall-out in the testsuite for my changes\nto use MVE move-immediate operations instead of literal pool loads.\nFixed as follows:\n\ngcc/testsuite/ChangeLog:\n\t* gcc.target/arm/simd/mve-vcmp-f32-2.c: Adjust expected output.\n\t* gcc.target/arm/simd/pr100757.c: Likewise.\n\t* gcc.target/arm/simd/pr100757-2.c: Likewise.\n\t* gcc.target/arm/simd/pr100757-3.c: Likewise.\n\t* gcc.target/arm/simd/pr100757-4.c: Likewise.", "tree": {"sha": "c2f050b7352af42a02548e31cff4a0123ec40c02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2f050b7352af42a02548e31cff4a0123ec40c02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875/comments", "author": null, "committer": null, "parents": [{"sha": "a78e5d307c69d4e91cd0e43d84e98be9593e68de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a78e5d307c69d4e91cd0e43d84e98be9593e68de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a78e5d307c69d4e91cd0e43d84e98be9593e68de"}], "stats": {"total": 43, "additions": 29, "deletions": 14}, "files": [{"sha": "2440cef267e26ffe926b73b998186493dbf7fd3c", "filename": "gcc/testsuite/gcc.target/arm/simd/mve-vcmp-f32-2.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fmve-vcmp-f32-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fmve-vcmp-f32-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fmve-vcmp-f32-2.c?ref=2eb3adb43eadead0d8666bc9f4dd4feab4bf7875", "patch": "@@ -28,5 +28,7 @@ FUNC(>=, vcmpge)\n /* { dg-final { scan-assembler-times {\\tvcmp.f32\\tle, q[0-9]+, q[0-9]+\\n} 1 } } */\n /* { dg-final { scan-assembler-times {\\tvcmp.f32\\tgt, q[0-9]+, q[0-9]+\\n} 1 } } */\n /* { dg-final { scan-assembler-times {\\tvcmp.f32\\tge, q[0-9]+, q[0-9]+\\n} 1 } } */\n-/* { dg-final { scan-assembler-times {\\t.word\\t1073741824\\n} 24 } } */ /* Constant 2.0f.  */\n-/* { dg-final { scan-assembler-times {\\t.word\\t1077936128\\n} 24 } } */ /* Constant 3.0f.  */\n+/* { dg-final { scan-assembler-times {\\tvmov\\.f32\\tq[0-7], #2\\.0e\\+0  @ v4sf} 6 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t1073741824\\n} } } */ /* Constant 2.0f.  */\n+/* { dg-final { scan-assembler-times {\\tvmov\\.f32\\tq[0-7], #3\\.0e\\+0  @ v4sf} 6 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t1077936128\\n} } } */ /* Constant 3.0f.  */"}, {"sha": "21426fee370510cc3692e5f9d020d4e873424280", "filename": "gcc/testsuite/gcc.target/arm/simd/pr100757-2.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757-2.c?ref=2eb3adb43eadead0d8666bc9f4dd4feab4bf7875", "patch": "@@ -13,8 +13,11 @@ int fn1(int d) {\n   return c;\n }\n \n-/* { dg-final { scan-assembler-times {\\t.word\\t1073741824\\n} 4 } } */ /* Constant 2.0f.  */\n-/* { dg-final { scan-assembler-times {\\t.word\\t4\\n} 4 } } */ /* Initial value for c.  */\n-/* { dg-final { scan-assembler-times {\\t.word\\t5\\n} 4 } } */ /* Possible value for c.  */\n+/* { dg-final { scan-assembler-times {\\tvmov\\.f32\\tq[0-7], #2\\.0e\\+0  @ v4sf} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t1073741824\\n} } } */\n+/* { dg-final { scan-assembler-times {\\tvmov\\.i32\\tq[0-7], #0x4  @ v4si} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t4\\n} } } */\n+/* { dg-final { scan-assembler-times {\\tvmov\\.i32\\tq[0-7], #0x5  @ v4si} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t5\\n} } } */\n /* { dg-final { scan-assembler-not {\\t.word\\t1\\n} } } */ /* 'true' mask.  */\n /* { dg-final { scan-assembler-not {\\t.word\\t0\\n} } } */ /* 'false' mask.  */"}, {"sha": "1640a447ee5a8d1467b0bdf1064d9114b5bb5e42", "filename": "gcc/testsuite/gcc.target/arm/simd/pr100757-3.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757-3.c?ref=2eb3adb43eadead0d8666bc9f4dd4feab4bf7875", "patch": "@@ -13,8 +13,11 @@ float fn1(int d) {\n   return c;\n }\n \n-/* { dg-final { scan-assembler-times {\\t.word\\t1073741824\\n} 4 } } */ /* Constant 2.0f.  */\n-/* { dg-final { scan-assembler-times {\\t.word\\t1084227584\\n} 4 } } */ /* Initial value for c (4.0).  */\n-/* { dg-final { scan-assembler-times {\\t.word\\t1082130432\\n} 4 } } */ /* Possible value for c (5.0).  */\n+/* { dg-final { scan-assembler-times {\\tvmov\\.f32\\tq[0-7], #2\\.0e\\+0  @ v4sf} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t1073741824\\n} } } */\n+/* { dg-final { scan-assembler-times {\\tvmov\\.f32\\tq[0-7], #4\\.0e\\+0  @ v4sf} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t1084227584\\n} } } */\n+/* { dg-final { scan-assembler-times {\\tvmov\\.f32\\tq[0-7], #5\\.0e\\+0  @ v4sf} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t1082130432\\n} } } */\n /* { dg-final { scan-assembler-not {\\t.word\\t1\\n} } } */ /* 'true' mask.  */\n /* { dg-final { scan-assembler-not {\\t.word\\t0\\n} } } */ /* 'false' mask.  */"}, {"sha": "7431494d62d0fff496f127fe2610df567754c58d", "filename": "gcc/testsuite/gcc.target/arm/simd/pr100757-4.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757-4.c?ref=2eb3adb43eadead0d8666bc9f4dd4feab4bf7875", "patch": "@@ -13,7 +13,11 @@ int fn1(int d) {\n   return c;\n }\n \n-/* { dg-final { scan-assembler-times {\\t.word\\t0\\n} 4 } } */ /* 'false' mask.  */\n+\n+/* { dg-final { scan-assembler-times {\\tvmov\\.i32\\tq[0-7], #0  @ v4si} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t0\\n} } } */ /* 'false' mask.  */\n /* { dg-final { scan-assembler-not {\\t.word\\t1\\n} } } */ /* 'true' mask.  */\n-/* { dg-final { scan-assembler-times {\\t.word\\t2\\n} 4 } } */ /* Initial value for c.  */\n-/* { dg-final { scan-assembler-times {\\t.word\\t3\\n} 4 } } */ /* Possible value for c.  */\n+/* { dg-final { scan-assembler-times {vmov\\.i32\\tq[0-7], #0x2  @ v4si} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t2\\n} } } */ /* Initial value for c.  */\n+/* { dg-final { scan-assembler-times {vmov\\.i32\\tq[0-7], #0x3  @ v4si} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t3\\n} } } */ /* Possible value for c.  */"}, {"sha": "f1ef1bd2aec323816e9f5f177b4a24a577275d46", "filename": "gcc/testsuite/gcc.target/arm/simd/pr100757.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2eb3adb43eadead0d8666bc9f4dd4feab4bf7875/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr100757.c?ref=2eb3adb43eadead0d8666bc9f4dd4feab4bf7875", "patch": "@@ -13,7 +13,10 @@ int fn1(int d) {\n   return c;\n }\n \n-/* { dg-final { scan-assembler-times {\\t.word\\t0\\n} 4 } } */ /* 'false' mask.  */\n+/* { dg-final { scan-assembler-times {\\tvmov\\.i32\\tq[0-7], #0  @ v4si} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t0\\n} } } */ /* 'false' mask.  */\n /* { dg-final { scan-assembler-not {\\t.word\\t1\\n} } } */ /* 'true' mask.  */\n-/* { dg-final { scan-assembler-times {\\t.word\\t2\\n} 4 } } */ /* Initial value for c.  */\n-/* { dg-final { scan-assembler-times {\\t.word\\t3\\n} 4 } } */ /* Possible value for c.  */\n+/* { dg-final { scan-assembler-times {\\tvmov\\.i32\\tq[0-7], #0x2  @ v4si} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t2\\n} } } */ /* Initial value for c.  */\n+/* { dg-final { scan-assembler-times {\\tvmov\\.i32\\tq[0-7], #0x3  @ v4si} 1 } } */\n+/* { dg-final { scan-assembler-not {\\t.word\\t3\\n} } } */ /* Possible value for c.  */"}]}