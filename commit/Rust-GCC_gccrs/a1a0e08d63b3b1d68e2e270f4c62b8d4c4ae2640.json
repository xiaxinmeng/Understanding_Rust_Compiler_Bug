{"sha": "a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTFhMGUwOGQ2M2IzYjFkNjhlMmUyNzBmNGM2MmI4ZDRjNGFlMjY0MA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-10-10T22:54:04Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-10-10T22:54:04Z"}, "message": "re PR middle-end/87574 (ICE in add_data_member_location_attribute at gcc/gcc/dwarf2out.c:19226 since r264943)\n\n\tPR middle-end/87574\n\t* cgraphunit.c (cgraph_node::expand_thunk): Force DECL_IGNORED_P on\n\tthe thunk when expanding to GIMPLE.\n\nFrom-SVN: r265028", "tree": {"sha": "43750fb46850413cd9c01b9ce3f9623a2d05531f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/43750fb46850413cd9c01b9ce3f9623a2d05531f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640/comments", "author": null, "committer": null, "parents": [{"sha": "8e9558f029123e00008d3ef464922128d018f0fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e9558f029123e00008d3ef464922128d018f0fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e9558f029123e00008d3ef464922128d018f0fc"}], "stats": {"total": 49, "additions": 49, "deletions": 0}, "files": [{"sha": "3ee20df669ca46584ce13551e9b57a0a570e714b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640", "patch": "@@ -1,3 +1,9 @@\n+2018-10-10  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR middle-end/87574\n+\t* cgraphunit.c (cgraph_node::expand_thunk): Force DECL_IGNORED_P on\n+\tthe thunk when expanding to GIMPLE.\n+\n 2018-10-10  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n \t* varasm.c (mergeable_string_section): Don't try to move zero-length"}, {"sha": "cb8495417b50a74e914af61581c9843c1100c1f4", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640", "patch": "@@ -1862,6 +1862,12 @@ cgraph_node::expand_thunk (bool output_asm_thunks, bool force_gimple_thunk)\n \t DECL_ARGUMENTS.  In this case force_gimple_thunk is true.  */\n       if (in_lto_p && !force_gimple_thunk)\n \tget_untransformed_body ();\n+\n+      /* We need to force DECL_IGNORED_P when the thunk is created\n+\t after early debug was run.  */\n+      if (force_gimple_thunk)\n+\tDECL_IGNORED_P (thunk_fndecl) = 1;\n+\n       a = DECL_ARGUMENTS (thunk_fndecl);\n \n       current_function_decl = thunk_fndecl;"}, {"sha": "05dab1f46a7a5e548485642a962cdf2d6635fe13", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640", "patch": "@@ -1,3 +1,7 @@\n+2018-10-10  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* g++.dg/other/pr87574.C: New test.\n+\n 2018-10-10  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/87567 - constexpr rejects call to non-constexpr function."}, {"sha": "190e386550566cfb966af1f21d9035f7e761157c", "filename": "gcc/testsuite/g++.dg/other/pr87574.C", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr87574.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr87574.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr87574.C?ref=a1a0e08d63b3b1d68e2e270f4c62b8d4c4ae2640", "patch": "@@ -0,0 +1,33 @@\n+// PR middle-end/87574\n+// Testcase by David Binderman <dcb314@hotmail.com>\n+\n+// { dg-do compile }\n+// { dg-options \"-O2 -g -Wno-return-type\" }\n+\n+class a {\n+public:\n+  virtual ~a();\n+};\n+class c {\n+public:\n+  enum j {};\n+  virtual j d() = 0;\n+};\n+class e : a, c {\n+  j d();\n+};\n+class f;\n+class g {\n+public:\n+  static g *h();\n+  f *i();\n+};\n+class f {\n+public:\n+  template <class b> b *l(int);\n+};\n+c::j e::d() {}\n+void m() {\n+  for (int k;;)\n+    g::h()->i()->l<c>(k)->d();\n+}"}]}