{"sha": "2491bb7d8eff1dbc3d0639a05b8583c7e9e28d55", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQ5MWJiN2Q4ZWZmMWRiYzNkMDYzOWEwNWI4NTgzYzdlOWUyOGQ1NQ==", "commit": {"author": {"name": "Serguei Rybin", "email": "rybin@adacore.com", "date": "2007-04-06T09:23:43Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-04-06T09:23:43Z"}, "message": "lib.ads, lib.adb (Tree_Read): Release the memory occupied by the switches from previously loaded tree\n\n2007-04-06 Serguei Rybin <rybin@adacore.com>\n\n\t* lib.ads, lib.adb (Tree_Read): Release the memory occupied by the\n\tswitches from previously loaded tree\n\nFrom-SVN: r123581", "tree": {"sha": "477ff339ebff2bbb3bb23cf9465b2e5c123e5a62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/477ff339ebff2bbb3bb23cf9465b2e5c123e5a62"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2491bb7d8eff1dbc3d0639a05b8583c7e9e28d55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2491bb7d8eff1dbc3d0639a05b8583c7e9e28d55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2491bb7d8eff1dbc3d0639a05b8583c7e9e28d55", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2491bb7d8eff1dbc3d0639a05b8583c7e9e28d55/comments", "author": null, "committer": null, "parents": [{"sha": "00f74faf0ab88647128d8b8a94a5da867f0cf5a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00f74faf0ab88647128d8b8a94a5da867f0cf5a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00f74faf0ab88647128d8b8a94a5da867f0cf5a6"}], "stats": {"total": 52, "additions": 28, "deletions": 24}, "files": [{"sha": "1a92677b95e47cef69459a1b66b80b0e8b70dcdc", "filename": "gcc/ada/lib.adb", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2491bb7d8eff1dbc3d0639a05b8583c7e9e28d55/gcc%2Fada%2Flib.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2491bb7d8eff1dbc3d0639a05b8583c7e9e28d55/gcc%2Fada%2Flib.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib.adb?ref=2491bb7d8eff1dbc3d0639a05b8583c7e9e28d55", "patch": "@@ -994,7 +994,12 @@ package body Lib is\n    begin\n       Units.Tree_Read;\n \n-      --  Read Compilation_Switches table\n+      --  Read Compilation_Switches table. First release the memory occupied\n+      --  by the previously loaded switches.\n+\n+      for J in Compilation_Switches.First .. Compilation_Switches.Last loop\n+         Free (Compilation_Switches.Table (J));\n+      end loop;\n \n       Tree_Read_Int (N);\n       Compilation_Switches.Set_Last (N);"}, {"sha": "afa7862f79c9fe9d4c326abc264d95727804aec8", "filename": "gcc/ada/lib.ads", "status": "modified", "additions": 22, "deletions": 23, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2491bb7d8eff1dbc3d0639a05b8583c7e9e28d55/gcc%2Fada%2Flib.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2491bb7d8eff1dbc3d0639a05b8583c7e9e28d55/gcc%2Fada%2Flib.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib.ads?ref=2491bb7d8eff1dbc3d0639a05b8583c7e9e28d55", "patch": "@@ -530,28 +530,27 @@ package Lib is\n    --  incremented value.\n \n    procedure Synchronize_Serial_Number;\n-   --  This function increments the Serial_Number field for the current\n-   --  unit but does not return the incremented value. This is used when\n-   --  there is a situation where one path of control increments a serial\n-   --  number (using Increment_Serial_Number), and the other path does not\n-   --  and it is important to keep the serial numbers synchronized in the\n-   --  two cases (e.g. when the references in a package and a client must\n-   --  be kept consistent).\n+   --  This function increments the Serial_Number field for the current unit\n+   --  but does not return the incremented value. This is used when there\n+   --  is a situation where one path of control increments a serial number\n+   --  (using Increment_Serial_Number), and the other path does not and it is\n+   --  important to keep the serial numbers synchronized in the two cases (e.g.\n+   --  when the references in a package and a client must be kept consistent).\n \n    procedure Replace_Linker_Option_String\n      (S            : String_Id;\n       Match_String : String);\n-   --  Replace an existing Linker_Option if the prefix Match_String\n-   --  matches, otherwise call Store_Linker_Option_String.\n+   --  Replace an existing Linker_Option if the prefix Match_String matches,\n+   --  otherwise call Store_Linker_Option_String.\n \n    procedure Store_Compilation_Switch (Switch : String);\n-   --  Called to register a compilation switch, either front-end or\n-   --  back-end, which may influence the generated output file(s).\n+   --  Called to register a compilation switch, either front-end or back-end,\n+   --  which may influence the generated output file(s). Switch is the text of\n+   --  the switch to store (except that -fRTS gets changed back to --RTS).\n \n    procedure Disable_Switch_Storing;\n-   --  Disable the registration of compilation switches with\n-   --  Store_Compilation_Switch. This is used to not register switches added\n-   --  automatically by the gcc driver.\n+   --  Disable registration of switches by Store_Compilation_Switch. Used to\n+   --  avoid registering switches added automatically by the gcc driver.\n \n    procedure Store_Linker_Option_String (S : String_Id);\n    --  This procedure is called to register the string from a pragma\n@@ -584,11 +583,11 @@ package Lib is\n \n    procedure List (File_Names_Only : Boolean := False);\n    --  Lists units in active library (i.e. generates output consisting of a\n-   --  sorted listing of the units represented in File table, with the\n-   --  exception of the main unit). If File_Names_Only is set to True, then\n-   --  the list includes only file names, and no other information. Otherwise\n-   --  the unit name and time stamp are also output. File_Names_Only also\n-   --  restricts the list to exclude any predefined files.\n+   --  sorted listing of the units represented in File table, except for the\n+   --  main unit). If File_Names_Only is set to True, then the list includes\n+   --  only file names, and no other information. Otherwise the unit name and\n+   --  time stamp are also output. File_Names_Only also restricts the list to\n+   --  exclude any predefined files.\n \n    function Generic_Separately_Compiled (E : Entity_Id) return Boolean;\n    --  This is the old version of tbe documentation of this function:\n@@ -615,10 +614,10 @@ package Lib is\n    --  because of the backward compatibility (to keep the ability to use old\n    --  compiler versions to build GNAT) compiling library generics is an\n    --  option. That is, now GNAT compiles a library generic as an ordinary\n-   --  unit, but it also can build an exeutable in case if its library\n-   --  contains some (or all) predefined generics non compiled. See 9628-002\n-   --  for the description of changes to be done to get rid of a special\n-   --  processing of library generic.\n+   --  unit, but it also can build an exeutable in case if its library contains\n+   --  some (or all) predefined generics non compiled. See 9628-002 for the\n+   --  description of changes to be done to get rid of a special processing of\n+   --  library generic.\n    --\n    --  So now this function returns TRUE if a generic MUST be separately\n    --  compiled with the current approach."}]}