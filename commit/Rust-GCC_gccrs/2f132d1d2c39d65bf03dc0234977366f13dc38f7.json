{"sha": "2f132d1d2c39d65bf03dc0234977366f13dc38f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmYxMzJkMWQyYzM5ZDY1YmYwM2RjMDIzNDk3NzM2NmYxM2RjMzhmNw==", "commit": {"author": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2015-04-30T07:13:37Z"}, "committer": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2015-04-30T07:13:37Z"}, "message": "hashtable_policy.h (_Prime_rehash_policy::_S_n_primes): Delete.\n\n2015-04-30  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n\n\t* include/bits/hashtable_policy.h (_Prime_rehash_policy::_S_n_primes):\n\tDelete.\n\t* src/c++11/hashtable_c++0x.cc (_Prime_rehash_policy::_M_next_bkt):\n\tRemove usage of latter and compute size of the prime numbers array\n\tlocally.\n\nFrom-SVN: r222611", "tree": {"sha": "047212af58f6a6cca38d4537f7f3a761703f4e97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/047212af58f6a6cca38d4537f7f3a761703f4e97"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2f132d1d2c39d65bf03dc0234977366f13dc38f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f132d1d2c39d65bf03dc0234977366f13dc38f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f132d1d2c39d65bf03dc0234977366f13dc38f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f132d1d2c39d65bf03dc0234977366f13dc38f7/comments", "author": null, "committer": null, "parents": [{"sha": "2fc3c9a59b046f462fe13232768f5efc023928ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fc3c9a59b046f462fe13232768f5efc023928ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2fc3c9a59b046f462fe13232768f5efc023928ea"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "02b07ac0a9e750e7fa1274dfba5cbcd1ca1ddd44", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f132d1d2c39d65bf03dc0234977366f13dc38f7/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f132d1d2c39d65bf03dc0234977366f13dc38f7/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=2f132d1d2c39d65bf03dc0234977366f13dc38f7", "patch": "@@ -1,3 +1,11 @@\n+2015-04-30  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n+\n+\t* include/bits/hashtable_policy.h (_Prime_rehash_policy::_S_n_primes):\n+\tDelete.\n+\t* src/c++11/hashtable_c++0x.cc (_Prime_rehash_policy::_M_next_bkt):\n+\tRemove usage of latter and compute size of the prime numbers array\n+\tlocally.\n+\n 2015-04-29  Doug Evans  <dje@google.com>\n \n \tPR libstdc++/65839"}, {"sha": "a9ad7dd89f6f3bf8c55a07e407989a09a1d51042", "filename": "libstdc++-v3/include/bits/hashtable_policy.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f132d1d2c39d65bf03dc0234977366f13dc38f7/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fhashtable_policy.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f132d1d2c39d65bf03dc0234977366f13dc38f7/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fhashtable_policy.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fhashtable_policy.h?ref=2f132d1d2c39d65bf03dc0234977366f13dc38f7", "patch": "@@ -495,8 +495,6 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     _M_reset(_State __state)\n     { _M_next_resize = __state; }\n \n-    enum { _S_n_primes = sizeof(unsigned long) != 8 ? 256 : 256 + 48 };\n-\n     static const std::size_t _S_growth_factor = 2;\n \n     float\t\t_M_max_load_factor;"}, {"sha": "69f999f5cd5a39dd676409a2e2bd3d010a759d76", "filename": "libstdc++-v3/src/c++11/hashtable_c++0x.cc", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f132d1d2c39d65bf03dc0234977366f13dc38f7/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B11%2Fhashtable_c%2B%2B0x.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f132d1d2c39d65bf03dc0234977366f13dc38f7/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B11%2Fhashtable_c%2B%2B0x.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B11%2Fhashtable_c%2B%2B0x.cc?ref=2f132d1d2c39d65bf03dc0234977366f13dc38f7", "patch": "@@ -56,8 +56,10 @@ namespace __detail\n \treturn __fast_bkt[__n];\n       }\n \n+    constexpr auto __n_primes\n+      = sizeof(__prime_list) / sizeof(unsigned long) - 1;\n     const unsigned long* __next_bkt =\n-      std::lower_bound(__prime_list + 5, __prime_list + _S_n_primes, __n);\n+      std::lower_bound(__prime_list + 5, __prime_list + __n_primes, __n);\n     _M_next_resize =\n       __builtin_ceil(*__next_bkt * (long double)_M_max_load_factor);\n     return *__next_bkt;"}]}