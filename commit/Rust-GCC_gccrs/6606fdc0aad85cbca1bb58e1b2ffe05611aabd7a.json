{"sha": "6606fdc0aad85cbca1bb58e1b2ffe05611aabd7a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjYwNmZkYzBhYWQ4NWNiY2ExYmI1OGUxYjJmZmUwNTYxMWFhYmQ3YQ==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2020-08-12T09:22:38Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2020-08-12T09:22:38Z"}, "message": "testsuite: Fix gcc.target/arm/stack-protector-1.c for Cortex-M\n\nThe stack-protector-1.c test fails when compiled for Cortex-M:\n- for Cortex-M0/M1, str r0, [sp #-8]! is not supported\n- for Cortex-M3/M4..., the assembler complains that \"use of r13 is\n  deprecated\"\n\nThis patch replaces the str instruction with\n     sub   sp, sp, #8\n     str r0, [sp]\nand removes the check for r13, which is unlikely to leak the canary\nvalue.\n\n2020-08-11  Christophe Lyon  <christophe.lyon@linaro.org>\n\n\tgcc/testsuite/\n\t* gcc.target/arm/stack-protector-1.c: Adapt code to Cortex-M\n\trestrictions.", "tree": {"sha": "57d8f1f82731b5d7d73b230c2482ff3c94765c96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/57d8f1f82731b5d7d73b230c2482ff3c94765c96"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6606fdc0aad85cbca1bb58e1b2ffe05611aabd7a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6606fdc0aad85cbca1bb58e1b2ffe05611aabd7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6606fdc0aad85cbca1bb58e1b2ffe05611aabd7a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6606fdc0aad85cbca1bb58e1b2ffe05611aabd7a/comments", "author": null, "committer": null, "parents": [{"sha": "73d2b6d4a3f0db82b2bfaba6c275412e5830680d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73d2b6d4a3f0db82b2bfaba6c275412e5830680d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73d2b6d4a3f0db82b2bfaba6c275412e5830680d"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "8d28b0a847c20ed2edb0317f23963abcfe23668b", "filename": "gcc/testsuite/gcc.target/arm/stack-protector-1.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6606fdc0aad85cbca1bb58e1b2ffe05611aabd7a/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fstack-protector-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6606fdc0aad85cbca1bb58e1b2ffe05611aabd7a/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fstack-protector-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fstack-protector-1.c?ref=6606fdc0aad85cbca1bb58e1b2ffe05611aabd7a", "patch": "@@ -34,7 +34,8 @@ asm (\n \"\t.type\tmain, %function\\n\"\n \"main:\\n\"\n \"\tbl\tget_ptr\\n\"\n-\"\tstr\tr0, [sp, #-8]!\\n\"\n+\"\tsub\tsp, sp, #8\\n\"\n+\"\tstr\tr0, [sp]\\n\"\n \"\tbl\tf\\n\"\n \"\tstr\tr0, [sp, #4]\\n\"\n \"\tldr     r0, [sp]\\n\"\n@@ -51,7 +52,6 @@ asm (\n \tCHECK (r10)\n \tCHECK (r11)\n \tCHECK (r12)\n-\tCHECK (r13)\n \tCHECK (r14)\n \"\tldr\tr1, [sp, #4]\\n\"\n \tCHECK (r1)"}]}