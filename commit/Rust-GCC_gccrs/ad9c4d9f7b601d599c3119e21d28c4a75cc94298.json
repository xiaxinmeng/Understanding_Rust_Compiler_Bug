{"sha": "ad9c4d9f7b601d599c3119e21d28c4a75cc94298", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWQ5YzRkOWY3YjYwMWQ1OTljMzExOWUyMWQyOGM0YTc1Y2M5NDI5OA==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2003-03-12T20:56:05Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2003-03-12T20:56:05Z"}, "message": "aclocal.m4: Introduce gcc_GAS_VERSION_GTE_IFELSE, _gcc_COMPUTE_GAS_VERSION.\n\n        * aclocal.m4: Introduce gcc_GAS_VERSION_GTE_IFELSE,\n        _gcc_COMPUTE_GAS_VERSION.\n        * configure.in: Use them.\n        * configure: Regenerate.\n\nFrom-SVN: r64263", "tree": {"sha": "eb5c8990d5b8f0d4202f0985c057133b55b6f03a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb5c8990d5b8f0d4202f0985c057133b55b6f03a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad9c4d9f7b601d599c3119e21d28c4a75cc94298", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad9c4d9f7b601d599c3119e21d28c4a75cc94298", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad9c4d9f7b601d599c3119e21d28c4a75cc94298", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad9c4d9f7b601d599c3119e21d28c4a75cc94298/comments", "author": null, "committer": null, "parents": [{"sha": "8d49831d20cea5e4114d5a692e427a875284ad10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d49831d20cea5e4114d5a692e427a875284ad10", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d49831d20cea5e4114d5a692e427a875284ad10"}], "stats": {"total": 566, "additions": 353, "deletions": 213}, "files": [{"sha": "6d4f5d1927c24a71e829eb4e198563ae68dd7323", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad9c4d9f7b601d599c3119e21d28c4a75cc94298/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad9c4d9f7b601d599c3119e21d28c4a75cc94298/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ad9c4d9f7b601d599c3119e21d28c4a75cc94298", "patch": "@@ -1,3 +1,10 @@\n+2003-03-12  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+        * aclocal.m4: Introduce gcc_GAS_VERSION_GTE_IFELSE,\n+        _gcc_COMPUTE_GAS_VERSION.\n+        * configure.in: Use them.\n+        * configure: Regenerate.\n+\n 2003-03-12  Bob Wilson  <bob.wilson@acm.org>\n \n         * config/xtensa/xtensa.md (adddi3): Don't clobber source operand used"}, {"sha": "9b19affc4a3d8732d2c680e7c8d34b36e00c6720", "filename": "gcc/aclocal.m4", "status": "modified", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad9c4d9f7b601d599c3119e21d28c4a75cc94298/gcc%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad9c4d9f7b601d599c3119e21d28c4a75cc94298/gcc%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Faclocal.m4?ref=ad9c4d9f7b601d599c3119e21d28c4a75cc94298", "patch": "@@ -1642,3 +1642,53 @@ if test $enable_initfini_array = yes; then\n   AC_DEFINE(HAVE_INITFINI_ARRAY, 1,\n     [Define .init_array/.fini_array sections are available and working.])\n fi])\n+\n+dnl # _gcc_COMPUTE_GAS_VERSION\n+dnl # Used by gcc_GAS_VERSION_GTE_IFELSE\n+dnl #\n+dnl # WARNING:\n+dnl # gcc_cv_as_gas_srcdir must be defined before this.\n+dnl # This gross requirement will go away eventually.\n+AC_DEFUN([_gcc_COMPUTE_GAS_VERSION],\n+[gcc_cv_as_bfd_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/bfd\n+for f in $gcc_cv_as_bfd_srcdir/configure \\\n+         $gcc_cv_as_gas_srcdir/configure \\\n+         $gcc_cv_as_gas_srcdir/configure.in \\\n+         $gcc_cv_as_gas_srcdir/Makefile.in ; do\n+  gcc_cv_gas_version=`grep '^VERSION=[[0-9]]*\\.[[0-9]]*' $f`\n+  if test x$gcc_cv_gas_version != x; then\n+    break\n+  fi\n+done\n+gcc_cv_gas_major_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=\\([[0-9]]*\\)\"`\n+gcc_cv_gas_minor_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[[0-9]]*\\.\\([[0-9]]*\\)\"`\n+gcc_cv_gas_patch_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[[0-9]]*\\.[[0-9]]*\\.\\([[0-9]]*\\)\"`\n+]) []dnl # _gcc_COMPUTE_GAS_VERSION\n+\n+dnl # gcc_GAS_VERSION_GTE_IFELSE(major, minor, patchlevel,\n+dnl #                     [command_if_true = :], [command_if_false = :])\n+dnl # Check to see if the version of GAS is greater than or\n+dnl # equal to the specified version.\n+dnl #\n+dnl # The first ifelse() shortens the shell code if the patchlevel\n+dnl # is unimportant (the usual case).  The others handle missing\n+dnl # commands.  Note that the tests are structured so that the most\n+dnl # common version number cases are tested first.\n+AC_DEFUN([gcc_GAS_VERSION_GTE_IFELSE],\n+[AC_REQUIRE([_gcc_COMPUTE_GAS_VERSION]) []dnl\n+ifelse([$3],[0],\n+[if test $gcc_cv_gas_major_version -eq $1 \\\n+&& test $gcc_cv_gas_minor_version -ge $2 \\\n+|| test $gcc_cv_gas_major_version -gt $1 ; then\n+],\n+[if test $gcc_cv_gas_major_version -eq $1 \\\n+&& (test $gcc_cv_gas_minor_version -gt $2 \\\n+    || (test $gcc_cv_gas_minor_version -eq $2 \\\n+        && test $gcc_cv_gas_patch_version -ge $3 )) \\\n+|| test $gcc_cv_gas_major_version -gt $1 ; then\n+])\n+ifelse([$4],[],[:],[$4])\n+ifelse([$5],[],[],[else $5])\n+fi\n+]) []dnl # gcc_GAS_VERSION_GTE_IFELSE\n+"}, {"sha": "64ca2e0cec5796062d9ab831cc5ddc7421937496", "filename": "gcc/configure", "status": "modified", "additions": 225, "deletions": 118, "changes": 343, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad9c4d9f7b601d599c3119e21d28c4a75cc94298/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad9c4d9f7b601d599c3119e21d28c4a75cc94298/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=ad9c4d9f7b601d599c3119e21d28c4a75cc94298", "patch": "@@ -7457,7 +7457,6 @@ gcc_cv_as=\n gcc_cv_gas_major_version=\n gcc_cv_gas_minor_version=\n gcc_cv_as_gas_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/gas\n-gcc_cv_as_bfd_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/bfd\n if test -x \"$DEFAULT_ASSEMBLER\"; then\n \tgcc_cv_as=\"$DEFAULT_ASSEMBLER\"\n elif test -x \"$AS\"; then\n@@ -7467,18 +7466,22 @@ elif test -x as$host_exeext; then\n \tgcc_cv_as=./as$host_exeext\n elif test -f $gcc_cv_as_gas_srcdir/configure.in \\\n      && test -f ../gas/Makefile; then\n-\t# Single tree build which includes gas.\n-\tin_tree_gas=yes\n-\tfor f in $gcc_cv_as_bfd_srcdir/configure $gcc_cv_as_gas_srcdir/configure $gcc_cv_as_gas_srcdir/configure.in $gcc_cv_as_gas_srcdir/Makefile.in\n-\tdo\n-\t\tgcc_cv_gas_version=`grep '^VERSION=[0-9]*\\.[0-9]*' $f`\n-\t\tif test x$gcc_cv_gas_version != x; then\n-\t\t\tbreak\n-\t\tfi\n-\tdone\n-\tgcc_cv_gas_major_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=\\([0-9]*\\)\"`\n-\tgcc_cv_gas_minor_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[0-9]*\\.\\([0-9]*\\)\"`\n-\tgcc_cv_gas_patch_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[0-9]*\\.[0-9]*\\.\\([0-9]*\\)\"`\n+  # Single tree build which includes gas.\n+  in_tree_gas=yes\n+  gcc_cv_as_bfd_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/bfd\n+for f in $gcc_cv_as_bfd_srcdir/configure \\\n+         $gcc_cv_as_gas_srcdir/configure \\\n+         $gcc_cv_as_gas_srcdir/configure.in \\\n+         $gcc_cv_as_gas_srcdir/Makefile.in ; do\n+  gcc_cv_gas_version=`grep '^VERSION=[0-9]*\\.[0-9]*' $f`\n+  if test x$gcc_cv_gas_version != x; then\n+    break\n+  fi\n+done\n+gcc_cv_gas_major_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=\\([0-9]*\\)\"`\n+gcc_cv_gas_minor_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[0-9]*\\.\\([0-9]*\\)\"`\n+gcc_cv_gas_patch_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[0-9]*\\.[0-9]*\\.\\([0-9]*\\)\"`\n+\n fi\n \n if test \"x$gcc_cv_as\" = x; then\n@@ -7551,7 +7554,7 @@ esac\n \n # Figure out what linker we will be using.\n echo $ac_n \"checking what linker to use\"\"... $ac_c\" 1>&6\n-echo \"configure:7555: checking what linker to use\" >&5\n+echo \"configure:7558: checking what linker to use\" >&5\n in_tree_ld=no\n gcc_cv_ld=\n gcc_cv_gld_major_version=\n@@ -7650,7 +7653,7 @@ esac\n \n # Figure out what nm we will be using.\n echo $ac_n \"checking what nm to use\"\"... $ac_c\" 1>&6\n-echo \"configure:7654: checking what nm to use\" >&5\n+echo \"configure:7657: checking what nm to use\" >&5\n if test -x nm$host_exeext; then\n \tgcc_cv_nm=./nm$host_exeext\n elif test \"x$program_prefix\" != xNONE; then\n@@ -7662,7 +7665,7 @@ echo \"$ac_t\"\"$gcc_cv_nm\" 1>&6\n \n # Figure out what objdump we will be using.\n echo $ac_n \"checking what objdump to use\"\"... $ac_c\" 1>&6\n-echo \"configure:7666: checking what objdump to use\" >&5\n+echo \"configure:7669: checking what objdump to use\" >&5\n if test -x objdump$host_exeext; then\n \tgcc_cv_objdump=./objdump$host_exeext\n elif test \"x$program_prefix\" != xNONE; then\n@@ -7674,27 +7677,40 @@ echo \"$ac_t\"\"$gcc_cv_objdump\" 1>&6\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:7678: checking assembler alignment features\" >&5\n+echo \"configure:7681: checking assembler alignment features\" >&5\n gcc_cv_as_alignment_features=none\n if test $in_tree_gas = yes; then\n-\t# Gas version 2.6 and later support for .balign and .p2align.\n-\t# bytes to skip when using .p2align.\n-\tif test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 6 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n-\t\tgcc_cv_as_alignment_features=\".balign and .p2align\"\n-\t\tcat >> confdefs.h <<\\EOF\n+  # Gas version 2.6 and later support for .balign and .p2align.\n+   if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 6 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n+    gcc_cv_as_alignment_features=\".balign and .p2align\"\n+    cat >> confdefs.h <<\\EOF\n #define HAVE_GAS_BALIGN_AND_P2ALIGN 1\n EOF\n \n-\tfi\n-\t# Gas version 2.8 and later support specifying the maximum\n-\t# bytes to skip when using .p2align.\n-\tif test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 8 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n-\t\tgcc_cv_as_alignment_features=\".p2align including maximum skip\"\n-\t\tcat >> confdefs.h <<\\EOF\n+  \n+\n+fi\n+\n+  # Gas version 2.8 and later support specifying the maximum\n+  # bytes to skip when using .p2align.\n+   if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 8 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n+    gcc_cv_as_alignment_features=\".p2align including maximum skip\"\n+    cat >> confdefs.h <<\\EOF\n #define HAVE_GAS_MAX_SKIP_P2ALIGN 1\n EOF\n \n-\tfi\n+  \n+\n+fi\n+\n elif test x$gcc_cv_as != x; then\n \t# Check if we have .balign and .p2align\n \techo \".balign  4\" > conftest.s\n@@ -7722,12 +7738,21 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_alignment_features\" 1>&6\n \n echo $ac_n \"checking assembler subsection support\"\"... $ac_c\" 1>&6\n-echo \"configure:7726: checking assembler subsection support\" >&5\n+echo \"configure:7742: checking assembler subsection support\" >&5\n gcc_cv_as_subsections=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n-    gcc_cv_as_subsections=\"working .subsection -1\"\n-  fi\n+   if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 9 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n+      gcc_cv_as_subsections=\"working .subsection -1\"\n+    fi\n+  \n+\n+fi\n+\n elif test x$gcc_cv_as != x; then\n \t# Check if we have .subsection\n \techo \".subsection 1\" > conftest.s\n@@ -7762,12 +7787,19 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_subsections\" 1>&6\n \n echo $ac_n \"checking assembler weak support\"\"... $ac_c\" 1>&6\n-echo \"configure:7766: checking assembler weak support\" >&5\n+echo \"configure:7791: checking assembler weak support\" >&5\n gcc_cv_as_weak=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 2 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n+   if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 2 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n     gcc_cv_as_weak=\"yes\"\n-  fi\n+  \n+\n+fi\n+\n elif test x$gcc_cv_as != x; then\n \t# Check if we have .weak\n \techo \"\t.weak foobar\" > conftest.s\n@@ -7785,18 +7817,23 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_weak\" 1>&6\n \n echo $ac_n \"checking assembler hidden support\"\"... $ac_c\" 1>&6\n-echo \"configure:7789: checking assembler hidden support\" >&5\n+echo \"configure:7821: checking assembler hidden support\" >&5\n gcc_cv_as_hidden=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2\t\\\n-\t  -a \"$gcc_cv_gas_minor_version\" -eq 12\t\\\n-\t  -a \"$gcc_cv_gas_patch_version\" -ge 1\t\\\n-\t  -o \"$gcc_cv_gas_major_version\" -eq 2\t\\\n-\t  -a \"$gcc_cv_gas_minor_version\" -gt 12\t\\\n-\t  -o \"$gcc_cv_gas_major_version\" -gt 2\t\\\n-    && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n-    gcc_cv_as_hidden=\"yes\"\n-  fi\n+   if test $gcc_cv_gas_major_version -eq 2 \\\n+&& (test $gcc_cv_gas_minor_version -gt 12 \\\n+    || (test $gcc_cv_gas_minor_version -eq 12 \\\n+        && test $gcc_cv_gas_patch_version -ge 1 )) \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n+      gcc_cv_as_hidden=\"yes\"\n+    fi\n+  \n+\n+fi\n+\n elif test x$gcc_cv_as != x; then\n \t# Check if we have .hidden\n \techo \"\t.hidden foobar\" > conftest.s\n@@ -7861,12 +7898,21 @@ esac\n \n \n echo $ac_n \"checking assembler leb128 support\"\"... $ac_c\" 1>&6\n-echo \"configure:7865: checking assembler leb128 support\" >&5\n+echo \"configure:7902: checking assembler leb128 support\" >&5\n gcc_cv_as_leb128=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 11 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n-    gcc_cv_as_leb128=\"yes\"\n-  fi\n+   if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 11 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n+      gcc_cv_as_leb128=\"yes\"\n+    fi\n+  \n+\n+fi\n+\n elif test x$gcc_cv_as != x; then\n \t# Check if we have .[us]leb128, and support symbol arithmetic with it.\n \tcat > conftest.s <<EOF\n@@ -7906,12 +7952,21 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_leb128\" 1>&6\n \n echo $ac_n \"checking assembler eh_frame optimization\"\"... $ac_c\" 1>&6\n-echo \"configure:7910: checking assembler eh_frame optimization\" >&5\n+echo \"configure:7956: checking assembler eh_frame optimization\" >&5\n gcc_cv_as_eh_frame=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n-    gcc_cv_as_eh_frame=\"yes\"\n-  fi\n+   if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 12 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n+      gcc_cv_as_eh_frame=\"yes\"\n+    fi\n+  \n+\n+fi\n+\n elif test x$gcc_cv_as != x; then\n \t# Check if this is GAS.\n \tas_ver=`$gcc_cv_as --version < /dev/null 2> /dev/null | head -1`\n@@ -7987,12 +8042,21 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_eh_frame\" 1>&6\n \n echo $ac_n \"checking assembler section merging support\"\"... $ac_c\" 1>&6\n-echo \"configure:7991: checking assembler section merging support\" >&5\n+echo \"configure:8046: checking assembler section merging support\" >&5\n gcc_cv_as_shf_merge=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n-    gcc_cv_as_shf_merge=yes\n-  fi\n+   if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 12 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n+      gcc_cv_as_shf_merge=yes\n+    fi\n+  \n+\n+fi\n+\n elif test x$gcc_cv_as != x; then\n \t# Check if we support SHF_MERGE sections\n \techo '.section .rodata.str, \"aMS\", @progbits, 1' > conftest.s\n@@ -8010,7 +8074,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_shf_merge\" 1>&6\n \n echo $ac_n \"checking assembler thread-local storage support\"\"... $ac_c\" 1>&6\n-echo \"configure:8014: checking assembler thread-local storage support\" >&5\n+echo \"configure:8078: checking assembler thread-local storage support\" >&5\n gcc_cv_as_tls=no\n conftest_s=\n tls_first_major=\n@@ -8127,11 +8191,16 @@ esac\n if test -z \"$tls_first_major\"; then\n   :\n elif test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq \"$tls_first_major\" \\\n-\t  -a \"$gcc_cv_gas_minor_version\" -ge \"$tls_first_minor\" \\\n-\t  -o \"$gcc_cv_gas_major_version\" -gt \"$tls_first_major\"; then\n+   if test $gcc_cv_gas_major_version -eq $tls_first_major \\\n+&& test $gcc_cv_gas_minor_version -ge $tls_first_minor \\\n+|| test $gcc_cv_gas_major_version -gt $tls_first_major ; then\n+\n+\n     gcc_cv_as_tls=yes\n-  fi\n+  \n+\n+fi\n+\n elif test x$gcc_cv_as != x; then\n   echo \"$conftest_s\" > conftest.s\n   if $gcc_cv_as --fatal-warnings -o conftest.o conftest.s > /dev/null 2>&1\n@@ -8152,18 +8221,23 @@ case \"$target\" in\n   # All TARGET_ABI_OSF targets.\n   alpha*-*-osf* | alpha*-*-linux* | alpha*-*-*bsd*)\n     echo $ac_n \"checking assembler supports explicit relocations\"\"... $ac_c\" 1>&6\n-echo \"configure:8156: checking assembler supports explicit relocations\" >&5\n+echo \"configure:8225: checking assembler supports explicit relocations\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_explicit_relocs'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n \tgcc_cv_as_explicit_relocs=unknown\n \tif test $in_tree_gas = yes ; then\n-\t   if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t           -a \"$gcc_cv_gas_minor_version\" -ge 12 \\\n-\t           -o \"$gcc_cv_gas_major_version\" -gt 2; then\n+            if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 12 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n \t      gcc_cv_as_explicit_relocs=yes\n-\t   fi\n+\t   \n+\n+fi\n+\n \telif test x$gcc_cv_as != x; then\n \t    cat > conftest.s << 'EOF'\n \t.set nomacro\n@@ -8200,7 +8274,7 @@ EOF\n     ;;\n   sparc*-*-*)\n     echo $ac_n \"checking assembler .register pseudo-op support\"\"... $ac_c\" 1>&6\n-echo \"configure:8204: checking assembler .register pseudo-op support\" >&5\n+echo \"configure:8278: checking assembler .register pseudo-op support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_register_pseudo_op'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8228,7 +8302,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler supports -relax\"\"... $ac_c\" 1>&6\n-echo \"configure:8232: checking assembler supports -relax\" >&5\n+echo \"configure:8306: checking assembler supports -relax\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_relax_opt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8256,7 +8330,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler and linker support unaligned pc related relocs\"\"... $ac_c\" 1>&6\n-echo \"configure:8260: checking assembler and linker support unaligned pc related relocs\" >&5\n+echo \"configure:8334: checking assembler and linker support unaligned pc related relocs\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_sparc_ua_pcrel'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8283,7 +8357,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler and linker support unaligned pc related relocs against hidden symbols\"\"... $ac_c\" 1>&6\n-echo \"configure:8287: checking assembler and linker support unaligned pc related relocs against hidden symbols\" >&5\n+echo \"configure:8361: checking assembler and linker support unaligned pc related relocs against hidden symbols\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_sparc_ua_pcrel_hidden'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8323,7 +8397,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking for assembler offsetable %lo() support\"\"... $ac_c\" 1>&6\n-echo \"configure:8327: checking for assembler offsetable %lo() support\" >&5\n+echo \"configure:8401: checking for assembler offsetable %lo() support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_offsetable_lo10'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8362,12 +8436,19 @@ EOF\n \n   i[34567]86-*-* | x86_64-*-*)\n     echo $ac_n \"checking assembler instructions\"\"... $ac_c\" 1>&6\n-echo \"configure:8366: checking assembler instructions\" >&5\n+echo \"configure:8440: checking assembler instructions\" >&5\n     gcc_cv_as_instructions=\n     if test $in_tree_gas = yes ; then \n-      if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n+       if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 9 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n \tgcc_cv_as_instructions=\"filds fists\"\n-      fi\n+      \n+\n+fi\n+\n     elif test x$gcc_cv_as != x; then\n \tset \"filds fists\" \"filds mem; fists mem\"\n \twhile test $# -gt 0\n@@ -8389,14 +8470,19 @@ EOF\n     echo \"$ac_t\"\"$gcc_cv_as_instructions\" 1>&6\n \n     echo $ac_n \"checking assembler GOTOFF in data directives\"\"... $ac_c\" 1>&6\n-echo \"configure:8393: checking assembler GOTOFF in data directives\" >&5\n+echo \"configure:8474: checking assembler GOTOFF in data directives\" >&5\n     gcc_cv_as_gotoff_in_data=no\n     if test $in_tree_gas = yes ; then\n-      if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t -a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n-\t -o \"$gcc_cv_gas_major_version\" -gt 2; then\n+       if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 11 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n \tgcc_cv_as_gotoff_in_data=yes\n-      fi\n+      \n+\n+fi\n+\n     elif test x$gcc_cv_as != x; then\n \tcat > conftest.s <<EOF\n \t.text\n@@ -8418,20 +8504,23 @@ EOF\n \n   ia64*-*-*)\n     echo $ac_n \"checking assembler supports ltoffx and ldxmov\"\"... $ac_c\" 1>&6\n-echo \"configure:8422: checking assembler supports ltoffx and ldxmov\" >&5\n+echo \"configure:8508: checking assembler supports ltoffx and ldxmov\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_ltoffx_ldxmov_relocs'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n \tgcc_cv_as_ltoffx_ldxmov_relocs=unknown\n-\tif test x$gcc_cv_gas_major_version != x \\\n-\t\t-a x$gcc_cv_gas_minor_version != x\n-\tthen\n-\t   if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t           -a \"$gcc_cv_gas_minor_version\" -ge 14 \\\n-\t           -o \"$gcc_cv_gas_major_version\" -gt 2; then\n-\t      gcc_cv_as_ltoffx_ldxmov_relocs=yes\n-\t   fi\n+\tif test $in_tree_gas = yes ; then\n+           if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 14 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n+\t    gcc_cv_as_ltoffx_ldxmov_relocs=yes\n+          \n+\n+fi\n+\n \telif test x$gcc_cv_as != x; then\n \t    cat > conftest.s << 'EOF'\n \t.text\n@@ -8460,7 +8549,7 @@ EOF\n esac\n \n echo $ac_n \"checking assembler dwarf2 debug_line support\"\"... $ac_c\" 1>&6\n-echo \"configure:8464: checking assembler dwarf2 debug_line support\" >&5\n+echo \"configure:8553: checking assembler dwarf2 debug_line support\" >&5\n gcc_cv_as_dwarf2_debug_line=no\n # ??? Not all targets support dwarf2 debug_line, even within a version\n # of gas.  Moreover, we need to emit a valid instruction to trigger any\n@@ -8478,13 +8567,19 @@ case \"$target\" in\n     ;;\n   esac\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t-a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n-\t-o \"$gcc_cv_gas_major_version\" -gt 2 \\\n-     && grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n-     && test x\"$insn\" != x ; then\n-    gcc_cv_as_dwarf2_debug_line=\"yes\"\n-  fi\n+   if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 11 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n+        && test x\"$insn\" != x ; then\n+      gcc_cv_as_dwarf2_debug_line=\"yes\"\n+    fi\n+  \n+\n+fi\n+\n elif test x$gcc_cv_as != x -a x\"$insn\" != x ; then\n \techo '\t.file 1 \"conftest.s\"' > conftest.s\n \techo '\t.loc 1 3 0' >> conftest.s\n@@ -8516,16 +8611,22 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_dwarf2_debug_line\" 1>&6\n \n echo $ac_n \"checking assembler --gdwarf2 support\"\"... $ac_c\" 1>&6\n-echo \"configure:8520: checking assembler --gdwarf2 support\" >&5\n+echo \"configure:8615: checking assembler --gdwarf2 support\" >&5\n gcc_cv_as_gdwarf2_flag=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t-a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n-\t-o \"$gcc_cv_gas_major_version\" -gt 2 \\\n-     && grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n-     && test x\"$insn\" != x ; then\n-    gcc_cv_as_gdwarf2_flag=\"yes\"\n-  fi\n+   if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 11 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n+        && test x\"$insn\" != x ; then\n+      gcc_cv_as_gdwarf2_flag=\"yes\"\n+    fi\n+  \n+\n+fi\n+\n elif test x$gcc_cv_as != x -a x\"$insn\" != x ; then\n \techo '' > conftest.s\n \t# ??? This fails with non-gnu grep.\n@@ -8544,16 +8645,22 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_gdwarf2_flag\" 1>&6\n \n echo $ac_n \"checking assembler --gstabs support\"\"... $ac_c\" 1>&6\n-echo \"configure:8548: checking assembler --gstabs support\" >&5\n+echo \"configure:8649: checking assembler --gstabs support\" >&5\n gcc_cv_as_gstabs_flag=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t-a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n-\t-o \"$gcc_cv_gas_major_version\" -gt 2 \\\n-     && grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n-     && test x\"$insn\" != x ; then\n-    gcc_cv_as_gstabs_flag=\"yes\"\n-  fi\n+   if test $gcc_cv_gas_major_version -eq 2 \\\n+&& test $gcc_cv_gas_minor_version -ge 11 \\\n+|| test $gcc_cv_gas_major_version -gt 2 ; then\n+\n+\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n+        && test x\"$insn\" != x ; then\n+      gcc_cv_as_gstabs_flag=\"yes\"\n+    fi\n+  \n+\n+fi\n+\n elif test x$gcc_cv_as != x -a x\"$insn\" != x ; then\n \techo '' > conftest.s\n \t# ??? This fails with non-gnu grep.\n@@ -8571,7 +8678,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_gstabs_flag\" 1>&6\n \n echo $ac_n \"checking linker read-only and read-write section mixing\"\"... $ac_c\" 1>&6\n-echo \"configure:8575: checking linker read-only and read-write section mixing\" >&5\n+echo \"configure:8682: checking linker read-only and read-write section mixing\" >&5\n gcc_cv_ld_ro_rw_mix=unknown\n if test $in_tree_ld = yes ; then\n   if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 10 -o \"$gcc_cv_gld_major_version\" -gt 2 && grep 'EMUL = elf' ../ld/Makefile > /dev/null; then\n@@ -8609,7 +8716,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_ld_ro_rw_mix\" 1>&6\n \n echo $ac_n \"checking linker PT_GNU_EH_FRAME support\"\"... $ac_c\" 1>&6\n-echo \"configure:8613: checking linker PT_GNU_EH_FRAME support\" >&5\n+echo \"configure:8720: checking linker PT_GNU_EH_FRAME support\" >&5\n gcc_cv_ld_eh_frame_hdr=no\n if test $in_tree_ld = yes ; then\n   if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 12 -o \"$gcc_cv_gld_major_version\" -gt 2 && grep 'EMUL = elf' ../ld/Makefile > /dev/null; then\n@@ -8633,7 +8740,7 @@ echo \"$ac_t\"\"$gcc_cv_ld_eh_frame_hdr\" 1>&6\n case \"$target\" in\n   mips*-*-*)\n     echo $ac_n \"checking whether libgloss uses STARTUP directives consistently\"\"... $ac_c\" 1>&6\n-echo \"configure:8637: checking whether libgloss uses STARTUP directives consistently\" >&5\n+echo \"configure:8744: checking whether libgloss uses STARTUP directives consistently\" >&5\n     gcc_cv_mips_libgloss_startup=no\n     gcc_cv_libgloss_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/libgloss\n     if test \"x$exec_prefix\" = xNONE; then\n@@ -8838,7 +8945,7 @@ fi\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:8842: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:8949: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\""}, {"sha": "d8df284547e932c9e5e80fde3c29d6c289cb2ebb", "filename": "gcc/configure.in", "status": "modified", "additions": 71, "deletions": 95, "changes": 166, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad9c4d9f7b601d599c3119e21d28c4a75cc94298/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad9c4d9f7b601d599c3119e21d28c4a75cc94298/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=ad9c4d9f7b601d599c3119e21d28c4a75cc94298", "patch": "@@ -1447,7 +1447,6 @@ gcc_cv_as=\n gcc_cv_gas_major_version=\n gcc_cv_gas_minor_version=\n gcc_cv_as_gas_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/gas\n-gcc_cv_as_bfd_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/bfd\n if test -x \"$DEFAULT_ASSEMBLER\"; then\n \tgcc_cv_as=\"$DEFAULT_ASSEMBLER\"\n elif test -x \"$AS\"; then\n@@ -1457,22 +1456,9 @@ elif test -x as$host_exeext; then\n \tgcc_cv_as=./as$host_exeext\n elif test -f $gcc_cv_as_gas_srcdir/configure.in \\\n      && test -f ../gas/Makefile; then\n-\t# Single tree build which includes gas.\n-\tin_tree_gas=yes\n-\tfor f in $gcc_cv_as_bfd_srcdir/configure $gcc_cv_as_gas_srcdir/configure $gcc_cv_as_gas_srcdir/configure.in $gcc_cv_as_gas_srcdir/Makefile.in\n-\tdo\n-changequote(,)dnl\n-\t\tgcc_cv_gas_version=`grep '^VERSION=[0-9]*\\.[0-9]*' $f`\n-changequote([,])dnl\n-\t\tif test x$gcc_cv_gas_version != x; then\n-\t\t\tbreak\n-\t\tfi\n-\tdone\n-changequote(,)dnl\n-\tgcc_cv_gas_major_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=\\([0-9]*\\)\"`\n-\tgcc_cv_gas_minor_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[0-9]*\\.\\([0-9]*\\)\"`\n-\tgcc_cv_gas_patch_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[0-9]*\\.[0-9]*\\.\\([0-9]*\\)\"`\n-changequote([,])dnl\n+  # Single tree build which includes gas.\n+  in_tree_gas=yes\n+  _gcc_COMPUTE_GAS_VERSION\n fi\n \n if test \"x$gcc_cv_as\" = x; then\n@@ -1671,18 +1657,17 @@ AC_MSG_RESULT($gcc_cv_objdump)\n AC_MSG_CHECKING(assembler alignment features)\n gcc_cv_as_alignment_features=none\n if test $in_tree_gas = yes; then\n-\t# Gas version 2.6 and later support for .balign and .p2align.\n-\t# bytes to skip when using .p2align.\n-\tif test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 6 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n-\t\tgcc_cv_as_alignment_features=\".balign and .p2align\"\n-\t\tAC_DEFINE(HAVE_GAS_BALIGN_AND_P2ALIGN)\n-\tfi\n-\t# Gas version 2.8 and later support specifying the maximum\n-\t# bytes to skip when using .p2align.\n-\tif test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 8 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n-\t\tgcc_cv_as_alignment_features=\".p2align including maximum skip\"\n-\t\tAC_DEFINE(HAVE_GAS_MAX_SKIP_P2ALIGN)\n-\tfi\n+  # Gas version 2.6 and later support for .balign and .p2align.\n+  gcc_GAS_VERSION_GTE_IFELSE(2,6,0,[\n+    gcc_cv_as_alignment_features=\".balign and .p2align\"\n+    AC_DEFINE(HAVE_GAS_BALIGN_AND_P2ALIGN)\n+  ])\n+  # Gas version 2.8 and later support specifying the maximum\n+  # bytes to skip when using .p2align.\n+  gcc_GAS_VERSION_GTE_IFELSE(2,8,0,[\n+    gcc_cv_as_alignment_features=\".p2align including maximum skip\"\n+    AC_DEFINE(HAVE_GAS_MAX_SKIP_P2ALIGN)\n+  ])\n elif test x$gcc_cv_as != x; then\n \t# Check if we have .balign and .p2align\n \techo \".balign  4\" > conftest.s\n@@ -1706,9 +1691,11 @@ AC_MSG_RESULT($gcc_cv_as_alignment_features)\n AC_MSG_CHECKING(assembler subsection support)\n gcc_cv_as_subsections=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n-    gcc_cv_as_subsections=\"working .subsection -1\"\n-  fi\n+  gcc_GAS_VERSION_GTE_IFELSE(2,9,0,[\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n+      gcc_cv_as_subsections=\"working .subsection -1\"\n+    fi\n+  ])\n elif test x$gcc_cv_as != x; then\n \t# Check if we have .subsection\n \techo \".subsection 1\" > conftest.s\n@@ -1744,9 +1731,9 @@ AC_MSG_RESULT($gcc_cv_as_subsections)\n AC_MSG_CHECKING(assembler weak support)\n gcc_cv_as_weak=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 2 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n+  gcc_GAS_VERSION_GTE_IFELSE(2,2,0,[\n     gcc_cv_as_weak=\"yes\"\n-  fi\n+  ])\n elif test x$gcc_cv_as != x; then\n \t# Check if we have .weak\n \techo \"\t.weak foobar\" > conftest.s\n@@ -1763,15 +1750,11 @@ AC_MSG_RESULT($gcc_cv_as_weak)\n AC_MSG_CHECKING(assembler hidden support)\n gcc_cv_as_hidden=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2\t\\\n-\t  -a \"$gcc_cv_gas_minor_version\" -eq 12\t\\\n-\t  -a \"$gcc_cv_gas_patch_version\" -ge 1\t\\\n-\t  -o \"$gcc_cv_gas_major_version\" -eq 2\t\\\n-\t  -a \"$gcc_cv_gas_minor_version\" -gt 12\t\\\n-\t  -o \"$gcc_cv_gas_major_version\" -gt 2\t\\\n-    && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n-    gcc_cv_as_hidden=\"yes\"\n-  fi\n+  gcc_GAS_VERSION_GTE_IFELSE(2,12,1,[\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n+      gcc_cv_as_hidden=\"yes\"\n+    fi\n+  ])\n elif test x$gcc_cv_as != x; then\n \t# Check if we have .hidden\n \techo \"\t.hidden foobar\" > conftest.s\n@@ -1838,9 +1821,11 @@ AC_SUBST(libgcc_visibility)\n AC_MSG_CHECKING(assembler leb128 support)\n gcc_cv_as_leb128=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 11 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n-    gcc_cv_as_leb128=\"yes\"\n-  fi\n+  gcc_GAS_VERSION_GTE_IFELSE(2,11,0,[\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n+      gcc_cv_as_leb128=\"yes\"\n+    fi\n+  ])\n elif test x$gcc_cv_as != x; then\n \t# Check if we have .[us]leb128, and support symbol arithmetic with it.\n \tcat > conftest.s <<EOF\n@@ -1882,9 +1867,11 @@ AC_MSG_RESULT($gcc_cv_as_leb128)\n AC_MSG_CHECKING(assembler eh_frame optimization)\n gcc_cv_as_eh_frame=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n-    gcc_cv_as_eh_frame=\"yes\"\n-  fi\n+  gcc_GAS_VERSION_GTE_IFELSE(2,12,0,[\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n+      gcc_cv_as_eh_frame=\"yes\"\n+    fi\n+  ])\n elif test x$gcc_cv_as != x; then\n \t# Check if this is GAS.\n \tas_ver=`$gcc_cv_as --version < /dev/null 2> /dev/null | head -1`\n@@ -1960,9 +1947,11 @@ AC_MSG_RESULT($gcc_cv_as_eh_frame)\n AC_MSG_CHECKING(assembler section merging support)\n gcc_cv_as_shf_merge=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n-    gcc_cv_as_shf_merge=yes\n-  fi\n+  gcc_GAS_VERSION_GTE_IFELSE(2,12,0,[\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n+      gcc_cv_as_shf_merge=yes\n+    fi\n+  ])\n elif test x$gcc_cv_as != x; then\n \t# Check if we support SHF_MERGE sections\n \techo '.section .rodata.str, \"aMS\", @progbits, 1' > conftest.s\n@@ -2096,11 +2085,9 @@ esac\n if test -z \"$tls_first_major\"; then\n   :\n elif test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq \"$tls_first_major\" \\\n-\t  -a \"$gcc_cv_gas_minor_version\" -ge \"$tls_first_minor\" \\\n-\t  -o \"$gcc_cv_gas_major_version\" -gt \"$tls_first_major\"; then\n+  gcc_GAS_VERSION_GTE_IFELSE($tls_first_major,$tls_first_minor,0,[\n     gcc_cv_as_tls=yes\n-  fi\n+  ])\n elif test x$gcc_cv_as != x; then\n   echo \"$conftest_s\" > conftest.s\n   if $gcc_cv_as --fatal-warnings -o conftest.o conftest.s > /dev/null 2>&1\n@@ -2122,11 +2109,9 @@ case \"$target\" in\n \tgcc_cv_as_explicit_relocs, [\n \tgcc_cv_as_explicit_relocs=unknown\n \tif test $in_tree_gas = yes ; then\n-\t   if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t           -a \"$gcc_cv_gas_minor_version\" -ge 12 \\\n-\t           -o \"$gcc_cv_gas_major_version\" -gt 2; then\n+           gcc_GAS_VERSION_GTE_IFELSE(2,12,0,[\n \t      gcc_cv_as_explicit_relocs=yes\n-\t   fi\n+\t   ])\n \telif test x$gcc_cv_as != x; then\n \t    cat > conftest.s << 'EOF'\n \t.set nomacro\n@@ -2279,9 +2264,9 @@ changequote([,])dnl\n     AC_MSG_CHECKING(assembler instructions)\n     gcc_cv_as_instructions=\n     if test $in_tree_gas = yes ; then \n-      if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n+      gcc_GAS_VERSION_GTE_IFELSE(2,9,0,[\n \tgcc_cv_as_instructions=\"filds fists\"\n-      fi\n+      ])\n     elif test x$gcc_cv_as != x; then\n \tset \"filds fists\" \"filds mem; fists mem\"\n \twhile test $# -gt 0\n@@ -2302,11 +2287,9 @@ changequote([,])dnl\n     AC_MSG_CHECKING(assembler GOTOFF in data directives)\n     gcc_cv_as_gotoff_in_data=no\n     if test $in_tree_gas = yes ; then\n-      if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t -a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n-\t -o \"$gcc_cv_gas_major_version\" -gt 2; then\n+      gcc_GAS_VERSION_GTE_IFELSE(2,11,0,[\n \tgcc_cv_as_gotoff_in_data=yes\n-      fi\n+      ])\n     elif test x$gcc_cv_as != x; then\n \tcat > conftest.s <<EOF\n \t.text\n@@ -2329,14 +2312,10 @@ EOF\n     AC_CACHE_CHECK([assembler supports ltoffx and ldxmov],\n \tgcc_cv_as_ltoffx_ldxmov_relocs, [\n \tgcc_cv_as_ltoffx_ldxmov_relocs=unknown\n-\tif test x$gcc_cv_gas_major_version != x \\\n-\t\t-a x$gcc_cv_gas_minor_version != x\n-\tthen\n-\t   if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t           -a \"$gcc_cv_gas_minor_version\" -ge 14 \\\n-\t           -o \"$gcc_cv_gas_major_version\" -gt 2; then\n-\t      gcc_cv_as_ltoffx_ldxmov_relocs=yes\n-\t   fi\n+\tif test $in_tree_gas = yes ; then\n+          gcc_GAS_VERSION_GTE_IFELSE(2,14,0,[\n+\t    gcc_cv_as_ltoffx_ldxmov_relocs=yes\n+          ])\n \telif test x$gcc_cv_as != x; then\n \t    cat > conftest.s << 'EOF'\n changequote(,)dnl\n@@ -2379,13 +2358,12 @@ case \"$target\" in\n     ;;\n   esac\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t-a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n-\t-o \"$gcc_cv_gas_major_version\" -gt 2 \\\n-     && grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n-     && test x\"$insn\" != x ; then\n-    gcc_cv_as_dwarf2_debug_line=\"yes\"\n-  fi\n+  gcc_GAS_VERSION_GTE_IFELSE(2,11,0,[\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n+        && test x\"$insn\" != x ; then\n+      gcc_cv_as_dwarf2_debug_line=\"yes\"\n+    fi\n+  ])\n elif test x$gcc_cv_as != x -a x\"$insn\" != x ; then\n \techo '\t.file 1 \"conftest.s\"' > conftest.s\n \techo '\t.loc 1 3 0' >> conftest.s\n@@ -2418,13 +2396,12 @@ AC_MSG_RESULT($gcc_cv_as_dwarf2_debug_line)\n AC_MSG_CHECKING(assembler --gdwarf2 support)\n gcc_cv_as_gdwarf2_flag=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t-a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n-\t-o \"$gcc_cv_gas_major_version\" -gt 2 \\\n-     && grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n-     && test x\"$insn\" != x ; then\n-    gcc_cv_as_gdwarf2_flag=\"yes\"\n-  fi\n+  gcc_GAS_VERSION_GTE_IFELSE(2,11,0,[\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n+        && test x\"$insn\" != x ; then\n+      gcc_cv_as_gdwarf2_flag=\"yes\"\n+    fi\n+  ])\n elif test x$gcc_cv_as != x -a x\"$insn\" != x ; then\n \techo '' > conftest.s\n \t# ??? This fails with non-gnu grep.\n@@ -2443,13 +2420,12 @@ AC_MSG_RESULT($gcc_cv_as_gdwarf2_flag)\n AC_MSG_CHECKING(assembler --gstabs support)\n gcc_cv_as_gstabs_flag=no\n if test $in_tree_gas = yes ; then\n-  if test \"$gcc_cv_gas_major_version\" -eq 2 \\\n-\t-a \"$gcc_cv_gas_minor_version\" -ge 11 \\\n-\t-o \"$gcc_cv_gas_major_version\" -gt 2 \\\n-     && grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n-     && test x\"$insn\" != x ; then\n-    gcc_cv_as_gstabs_flag=\"yes\"\n-  fi\n+  gcc_GAS_VERSION_GTE_IFELSE(2,11,0,[\n+    if grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n+        && test x\"$insn\" != x ; then\n+      gcc_cv_as_gstabs_flag=\"yes\"\n+    fi\n+  ])\n elif test x$gcc_cv_as != x -a x\"$insn\" != x ; then\n \techo '' > conftest.s\n \t# ??? This fails with non-gnu grep."}]}