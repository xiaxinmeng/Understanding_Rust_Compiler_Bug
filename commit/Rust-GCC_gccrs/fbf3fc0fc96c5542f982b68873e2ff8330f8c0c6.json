{"sha": "fbf3fc0fc96c5542f982b68873e2ff8330f8c0c6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmJmM2ZjMGZjOTZjNTU0MmY5ODJiNjg4NzNlMmZmODMzMGY4YzBjNg==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2014-08-28T06:22:46Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2014-08-28T06:22:46Z"}, "message": "ddg.c: Include rtl-iter.h.\n\ngcc/\n\t* ddg.c: Include rtl-iter.h.\n\t(mark_mem_use_1): Rename to...\n\t(mark_mem_use): ...deleting old mark_mem_use.  Use FOR_EACH_SUBRTX\n\tinstead of for_each_rtx.\n\t(mem_read_insn_p): Update accordingly.\n\nFrom-SVN: r214632", "tree": {"sha": "a0a43ce42a7cbb6a19cb67420d07965ba0a817a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a0a43ce42a7cbb6a19cb67420d07965ba0a817a8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fbf3fc0fc96c5542f982b68873e2ff8330f8c0c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbf3fc0fc96c5542f982b68873e2ff8330f8c0c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fbf3fc0fc96c5542f982b68873e2ff8330f8c0c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbf3fc0fc96c5542f982b68873e2ff8330f8c0c6/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a9052a408154a465587aaa7ee4d91f63ad81b60b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9052a408154a465587aaa7ee4d91f63ad81b60b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9052a408154a465587aaa7ee4d91f63ad81b60b"}], "stats": {"total": 30, "additions": 18, "deletions": 12}, "files": [{"sha": "89efc15e6b8d60e32c648729012d1823edc26e7f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbf3fc0fc96c5542f982b68873e2ff8330f8c0c6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbf3fc0fc96c5542f982b68873e2ff8330f8c0c6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fbf3fc0fc96c5542f982b68873e2ff8330f8c0c6", "patch": "@@ -1,3 +1,11 @@\n+2014-08-28  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\t* ddg.c: Include rtl-iter.h.\n+\t(mark_mem_use_1): Rename to...\n+\t(mark_mem_use): ...deleting old mark_mem_use.  Use FOR_EACH_SUBRTX\n+\tinstead of for_each_rtx.\n+\t(mem_read_insn_p): Update accordingly.\n+\n 2014-08-28  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* cse.c (change_cc_mode_args): Delete."}, {"sha": "7514c11dc5d3d60d9406af034381cce3ad6f3298", "filename": "gcc/ddg.c", "status": "modified", "additions": 10, "deletions": 12, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbf3fc0fc96c5542f982b68873e2ff8330f8c0c6/gcc%2Fddg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbf3fc0fc96c5542f982b68873e2ff8330f8c0c6/gcc%2Fddg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fddg.c?ref=fbf3fc0fc96c5542f982b68873e2ff8330f8c0c6", "patch": "@@ -41,6 +41,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"expr.h\"\n #include \"bitmap.h\"\n #include \"ddg.h\"\n+#include \"rtl-iter.h\"\n \n #ifdef INSN_SCHEDULING\n \n@@ -62,28 +63,25 @@ static void add_edge_to_ddg (ddg_ptr g, ddg_edge_ptr);\n /* Auxiliary variable for mem_read_insn_p/mem_write_insn_p.  */\n static bool mem_ref_p;\n \n-/* Auxiliary function for mem_read_insn_p.  */\n-static int\n-mark_mem_use (rtx *x, void *data ATTRIBUTE_UNUSED)\n-{\n-  if (MEM_P (*x))\n-    mem_ref_p = true;\n-  return 0;\n-}\n-\n /* Auxiliary function for mem_read_insn_p.  */\n static void\n-mark_mem_use_1 (rtx *x, void *data)\n+mark_mem_use (rtx *x, void *)\n {\n-  for_each_rtx (x, mark_mem_use, data);\n+  subrtx_iterator::array_type array;\n+  FOR_EACH_SUBRTX (iter, array, *x, NONCONST)\n+    if (MEM_P (*x))\n+      {\n+\tmem_ref_p = true;\n+\tbreak;\n+      }\n }\n \n /* Returns nonzero if INSN reads from memory.  */\n static bool\n mem_read_insn_p (rtx_insn *insn)\n {\n   mem_ref_p = false;\n-  note_uses (&PATTERN (insn), mark_mem_use_1, NULL);\n+  note_uses (&PATTERN (insn), mark_mem_use, NULL);\n   return mem_ref_p;\n }\n "}]}