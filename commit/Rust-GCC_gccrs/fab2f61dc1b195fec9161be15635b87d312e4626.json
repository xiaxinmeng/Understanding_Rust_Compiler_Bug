{"sha": "fab2f61dc1b195fec9161be15635b87d312e4626", "node_id": "C_kwDOANBUbNoAKGZhYjJmNjFkYzFiMTk1ZmVjOTE2MWJlMTU2MzViODdkMzEyZTQ2MjY", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-10-12T07:28:10Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-10-12T07:28:10Z"}, "message": "vectorizer: Fix up -fsimd-cost-model= handling\n\n>\t* testsuite/libgomp.c++/scan-10.C: Add option -fvect-cost-model=cheap.\n\nI don't think this is the right thing to do.\nThis just means that at some point between 2013 when -fsimd-cost-model has\nbeen introduced and now -fsimd-cost-model= option at least partially stopped\nworking properly.\nAs documented, -fsimd-cost-model= overrides the -fvect-cost-model= setting\nfor OpenMP simd loops (loop->force_vectorize is true) if specified differently\nfrom default.\nIn tree-vectorizer.h we have:\nstatic inline bool\nunlimited_cost_model (loop_p loop)\n{\n  if (loop != NULL && loop->force_vectorize\n      && flag_simd_cost_model != VECT_COST_MODEL_DEFAULT)\n    return flag_simd_cost_model == VECT_COST_MODEL_UNLIMITED;\n  return (flag_vect_cost_model == VECT_COST_MODEL_UNLIMITED);\n}\nand use it in various places, but we also just use flag_vect_cost_model\nin lots of places (and in one spot use flag_simd_cost_model, not sure if\nwe are sure it is a force_vectorize loop or what).\n\nSo, IMHO we should change the above inline function to\nloop_cost_model and let it return the cost model and then just\nreimplement unlimited_cost_model as\nreturn loop_cost_model (loop) == VECT_COST_MODEL_UNLIMITED;\nand then adjust the direct uses of the flag and revert these changes.\n\n2021-10-12  Jakub Jelinek  <jakub@redhat.com>\n\ngcc/\n\t* tree-vectorizer.h (loop_cost_model): New function.\n\t(unlimited_cost_model): Use it.\n\t* tree-vect-loop.c (vect_analyze_loop_costing): Use loop_cost_model\n\tcall instead of flag_vect_cost_model.\n\t* tree-vect-data-refs.c (vect_enhance_data_refs_alignment): Likewise.\n\t(vect_prune_runtime_alias_test_list): Likewise.  Also use it instead\n\tof flag_simd_cost_model.\ngcc/testsuite/\n\t* gcc.dg/gomp/simd-2.c: Remove option -fvect-cost-model=cheap.\n\t* gcc.dg/gomp/simd-3.c: Likewise.\nlibgomp/\n\t* testsuite/libgomp.c/scan-11.c: Remove option -fvect-cost-model=cheap.\n\t* testsuite/libgomp.c/scan-12.c: Likewise.\n\t* testsuite/libgomp.c/scan-13.c: Likewise.\n\t* testsuite/libgomp.c/scan-14.c: Likewise.\n\t* testsuite/libgomp.c/scan-15.c: Likewise.\n\t* testsuite/libgomp.c/scan-16.c: Likewise.\n\t* testsuite/libgomp.c/scan-17.c: Likewise.\n\t* testsuite/libgomp.c/scan-18.c: Likewise.\n\t* testsuite/libgomp.c/scan-19.c: Likewise.\n\t* testsuite/libgomp.c/scan-20.c: Likewise.\n\t* testsuite/libgomp.c/scan-21.c: Likewise.\n\t* testsuite/libgomp.c/scan-22.c: Likewise.\n\t* testsuite/libgomp.c++/scan-9.C: Likewise.\n\t* testsuite/libgomp.c++/scan-10.C: Likewise.\n\t* testsuite/libgomp.c++/scan-11.C: Likewise.\n\t* testsuite/libgomp.c++/scan-12.C: Likewise.\n\t* testsuite/libgomp.c++/scan-13.C: Likewise.\n\t* testsuite/libgomp.c++/scan-14.C: Likewise.\n\t* testsuite/libgomp.c++/scan-15.C: Likewise.\n\t* testsuite/libgomp.c++/scan-16.C: Likewise.", "tree": {"sha": "6c12bfb3db92b9265cbb18c8d5d73d0c9c646637", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c12bfb3db92b9265cbb18c8d5d73d0c9c646637"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fab2f61dc1b195fec9161be15635b87d312e4626", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fab2f61dc1b195fec9161be15635b87d312e4626", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fab2f61dc1b195fec9161be15635b87d312e4626", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fab2f61dc1b195fec9161be15635b87d312e4626/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "73c535a00bc4dfe9a939cd80facbe79a929cab3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73c535a00bc4dfe9a939cd80facbe79a929cab3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73c535a00bc4dfe9a939cd80facbe79a929cab3e"}], "stats": {"total": 74, "additions": 42, "deletions": 32}, "files": [{"sha": "85acb980f101b88edeecd25b94bf5063f2c5a35e", "filename": "gcc/testsuite/gcc.dg/gomp/simd-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fsimd-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fsimd-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fsimd-2.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" } */\n+/* { dg-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target { i?86-*-* x86_64-*-* } } } */\n /* { dg-additional-options \"-mavx\" { target avx } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[1-9]\\[0-9]* loops in function\" 5 \"vect\" { target i?86-*-* x86_64-*-* aarch64-*-* } } } */"}, {"sha": "86fee8586739abd7d681cffe7859da3e6d77634c", "filename": "gcc/testsuite/gcc.dg/gomp/simd-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fsimd-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fsimd-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fsimd-3.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" } */\n+/* { dg-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target { i?86-*-* x86_64-*-* } } } */\n /* { dg-additional-options \"-mavx\" { target avx } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[1-9]\\[0-9]* loops in function\" 5 \"vect\" { target i?86-*-* x86_64-*-* aarch64-*-* } } } */"}, {"sha": "1e13148190c131019231a4b1752d45587fbe80d0", "filename": "gcc/tree-vect-data-refs.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/gcc%2Ftree-vect-data-refs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/gcc%2Ftree-vect-data-refs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-data-refs.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -2236,7 +2236,7 @@ vect_enhance_data_refs_alignment (loop_vec_info loop_vinfo)\n         {\n           unsigned max_allowed_peel\n \t    = param_vect_max_peeling_for_alignment;\n-\t  if (flag_vect_cost_model <= VECT_COST_MODEL_CHEAP)\n+\t  if (loop_cost_model (loop) <= VECT_COST_MODEL_CHEAP)\n \t    max_allowed_peel = 0;\n           if (max_allowed_peel != (unsigned)-1)\n             {\n@@ -2334,7 +2334,7 @@ vect_enhance_data_refs_alignment (loop_vec_info loop_vinfo)\n   do_versioning\n     = (optimize_loop_nest_for_speed_p (loop)\n        && !loop->inner /* FORNOW */\n-       && flag_vect_cost_model > VECT_COST_MODEL_CHEAP);\n+       && loop_cost_model (loop) > VECT_COST_MODEL_CHEAP);\n \n   if (do_versioning)\n     {\n@@ -3751,7 +3751,9 @@ vect_prune_runtime_alias_test_list (loop_vec_info loop_vinfo)\n   unsigned int count = (comp_alias_ddrs.length ()\n \t\t\t+ check_unequal_addrs.length ());\n \n-  if (count && flag_vect_cost_model == VECT_COST_MODEL_VERY_CHEAP)\n+  if (count\n+      && (loop_cost_model (LOOP_VINFO_LOOP (loop_vinfo))\n+\t  == VECT_COST_MODEL_VERY_CHEAP))\n     return opt_result::failure_at\n       (vect_location, \"would need a runtime alias check\\n\");\n \n@@ -3760,7 +3762,7 @@ vect_prune_runtime_alias_test_list (loop_vec_info loop_vinfo)\n \t\t     \"improved number of alias checks from %d to %d\\n\",\n \t\t     may_alias_ddrs.length (), count);\n   unsigned limit = param_vect_max_version_for_alias_checks;\n-  if (flag_simd_cost_model == VECT_COST_MODEL_CHEAP)\n+  if (loop_cost_model (LOOP_VINFO_LOOP (loop_vinfo)) == VECT_COST_MODEL_CHEAP)\n     limit = param_vect_max_version_for_alias_checks * 6 / 10;\n   if (count > limit)\n     return opt_result::failure_at"}, {"sha": "961c1623f81f2e6f881130797d90acdf574b43ab", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1850,7 +1850,7 @@ vect_analyze_loop_costing (loop_vec_info loop_vinfo)\n \n   /* If using the \"very cheap\" model. reject cases in which we'd keep\n      a copy of the scalar code (even if we might be able to vectorize it).  */\n-  if (flag_vect_cost_model == VECT_COST_MODEL_VERY_CHEAP\n+  if (loop_cost_model (loop) == VECT_COST_MODEL_VERY_CHEAP\n       && (LOOP_VINFO_PEELING_FOR_ALIGNMENT (loop_vinfo)\n \t  || LOOP_VINFO_PEELING_FOR_GAPS (loop_vinfo)\n \t  || LOOP_VINFO_PEELING_FOR_NITER (loop_vinfo)))\n@@ -1922,7 +1922,7 @@ vect_analyze_loop_costing (loop_vec_info loop_vinfo)\n   /* If the vector loop needs multiple iterations to be beneficial then\n      things are probably too close to call, and the conservative thing\n      would be to stick with the scalar code.  */\n-  if (flag_vect_cost_model == VECT_COST_MODEL_VERY_CHEAP\n+  if (loop_cost_model (loop) == VECT_COST_MODEL_VERY_CHEAP\n       && min_profitable_estimate > (int) vect_vf_for_cost (loop_vinfo))\n     {\n       if (dump_enabled_p ())"}, {"sha": "4aa84acff5951637e04a799047a754ae054c82a5", "filename": "gcc/tree-vectorizer.h", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/gcc%2Ftree-vectorizer.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/gcc%2Ftree-vectorizer.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vectorizer.h?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1701,14 +1701,22 @@ get_dr_vinfo_offset (vec_info *vinfo,\n }\n \n \n+/* Return the vect cost model for LOOP.  */\n+static inline enum vect_cost_model\n+loop_cost_model (loop_p loop)\n+{\n+  if (loop != NULL\n+      && loop->force_vectorize\n+      && flag_simd_cost_model != VECT_COST_MODEL_DEFAULT)\n+    return flag_simd_cost_model;\n+  return flag_vect_cost_model;\n+}\n+\n /* Return true if the vect cost model is unlimited.  */\n static inline bool\n unlimited_cost_model (loop_p loop)\n {\n-  if (loop != NULL && loop->force_vectorize\n-      && flag_simd_cost_model != VECT_COST_MODEL_DEFAULT)\n-    return flag_simd_cost_model == VECT_COST_MODEL_UNLIMITED;\n-  return (flag_vect_cost_model == VECT_COST_MODEL_UNLIMITED);\n+  return loop_cost_model (loop) == VECT_COST_MODEL_UNLIMITED;\n }\n \n /* Return true if the loop described by LOOP_VINFO is fully-masked and"}, {"sha": "04b8796a24e339e545ff4ea47586ed44c4cff2ea", "filename": "libgomp/testsuite/libgomp.c++/scan-10.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-10.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-10.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-10.C?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n // { dg-require-effective-target size32plus }\n-// { dg-additional-options \"-O2 -fvect-cost-model=cheap -fopenmp -fdump-tree-vect-details\" }\n+// { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" }\n // { dg-additional-options \"-msse2\" { target sse2_runtime } }\n // { dg-additional-options \"-mavx\" { target avx_runtime } }\n // { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } }"}, {"sha": "9e83effd077612725052b0ef89b6925888eb2119", "filename": "libgomp/testsuite/libgomp.c++/scan-11.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-11.C?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n // { dg-require-effective-target size32plus }\n-// { dg-additional-options \"-O2 -fvect-cost-model=cheap -fopenmp -fdump-tree-vect-details\" }\n+// { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" }\n // { dg-additional-options \"-msse2\" { target sse2_runtime } }\n // { dg-additional-options \"-mavx\" { target avx_runtime } }\n // { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } }"}, {"sha": "ee91157852013803035c7bd2068540fc2d409e95", "filename": "libgomp/testsuite/libgomp.c++/scan-12.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-12.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-12.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-12.C?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n // { dg-require-effective-target size32plus }\n-// { dg-additional-options \"-O2 -fvect-cost-model=cheap -fopenmp -fdump-tree-vect-details\" }\n+// { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" }\n // { dg-additional-options \"-msse2\" { target sse2_runtime } }\n // { dg-additional-options \"-mavx\" { target avx_runtime } }\n // { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } }"}, {"sha": "613045768e7925b5e007bf0d0a4becbd35128179", "filename": "libgomp/testsuite/libgomp.c++/scan-13.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-13.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-13.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-13.C?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n // { dg-require-effective-target size32plus }\n-// { dg-additional-options \"-O2 -fvect-cost-model=cheap -fopenmp -fdump-tree-vect-details\" }\n+// { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" }\n // { dg-additional-options \"-msse2\" { target sse2_runtime } }\n // { dg-additional-options \"-mavx\" { target avx_runtime } }\n // { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } }"}, {"sha": "8ee4354c7fc70e18f9b59374266dbb390f16664d", "filename": "libgomp/testsuite/libgomp.c++/scan-14.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-14.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-14.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-14.C?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n // { dg-require-effective-target size32plus }\n-// { dg-additional-options \"-O2 -fvect-cost-model=cheap -fopenmp -fdump-tree-vect-details\" }\n+// { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" }\n // { dg-additional-options \"-msse2\" { target sse2_runtime } }\n // { dg-additional-options \"-mavx\" { target avx_runtime } }\n // { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } }"}, {"sha": "69550af9d62bed9a1b5815072fc683f93e81d274", "filename": "libgomp/testsuite/libgomp.c++/scan-15.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-15.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-15.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-15.C?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n // { dg-require-effective-target size32plus }\n-// { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" }\n+// { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" }\n // { dg-additional-options \"-msse2\" { target sse2_runtime } }\n // { dg-additional-options \"-mavx\" { target avx_runtime } }\n // { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } }"}, {"sha": "3fb6135c343c29dd1e031ec4f231b438a817e7b1", "filename": "libgomp/testsuite/libgomp.c++/scan-16.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-16.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-16.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-16.C?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n // { dg-require-effective-target size32plus }\n-// { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" }\n+// { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" }\n // { dg-additional-options \"-msse2\" { target sse2_runtime } }\n // { dg-additional-options \"-mavx\" { target avx_runtime } }\n // { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } }"}, {"sha": "cd08f76895b441118d67095a0ac1e1e55ff085d3", "filename": "libgomp/testsuite/libgomp.c++/scan-9.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-9.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-9.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fscan-9.C?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n // { dg-require-effective-target size32plus }\n-// { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" }\n+// { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" }\n // { dg-additional-options \"-msse2\" { target sse2_runtime } }\n // { dg-additional-options \"-mavx\" { target avx_runtime } }\n // { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } }"}, {"sha": "3bc2d3a1d7cc308d550af3677365c387bc853e69", "filename": "libgomp/testsuite/libgomp.c/scan-11.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-11.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-11.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-11.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-require-effective-target size32plus } */\n-/* { dg-additional-options \"-O2 -fvect-cost-model=cheap -fopenmp -fdump-tree-vect-details\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target sse2_runtime } } */\n /* { dg-additional-options \"-mavx\" { target avx_runtime } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } } */"}, {"sha": "f769d17e8ca38a34e9ed3a15be241a4c84c0bb13", "filename": "libgomp/testsuite/libgomp.c/scan-12.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-12.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-12.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-12.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-require-effective-target size32plus } */\n-/* { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target sse2_runtime } } */\n /* { dg-additional-options \"-mavx\" { target avx_runtime } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } } */"}, {"sha": "9cf1623d2627277a84db5acb02ee969457613b99", "filename": "libgomp/testsuite/libgomp.c/scan-13.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-13.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-13.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-13.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-require-effective-target size32plus } */\n-/* { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target sse2_runtime } } */\n /* { dg-additional-options \"-mavx\" { target avx_runtime } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } } */"}, {"sha": "3a20a75b2e931b09f3989515c36fb13581f1386f", "filename": "libgomp/testsuite/libgomp.c/scan-14.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-14.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-14.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-14.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-require-effective-target size32plus } */\n-/* { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target sse2_runtime } } */\n /* { dg-additional-options \"-mavx\" { target avx_runtime } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } } */"}, {"sha": "c0c6dfd3b99c473bf373743ae80da2f3f1405a6b", "filename": "libgomp/testsuite/libgomp.c/scan-15.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-15.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-15.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-15.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-require-effective-target size32plus } */\n-/* { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target sse2_runtime } } */\n /* { dg-additional-options \"-mavx\" { target avx_runtime } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } } */"}, {"sha": "8b816781dd8e9caf0e36a900f564e5e6a365264b", "filename": "libgomp/testsuite/libgomp.c/scan-16.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-16.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-16.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-16.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-require-effective-target size32plus } */\n-/* { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target sse2_runtime } } */\n /* { dg-additional-options \"-mavx\" { target avx_runtime } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } } */"}, {"sha": "57e4390462a0fafe35cf331d64cfb786335a17fc", "filename": "libgomp/testsuite/libgomp.c/scan-17.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-17.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-17.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-17.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-require-effective-target size32plus } */\n-/* { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target sse2_runtime } } */\n /* { dg-additional-options \"-mavx\" { target avx_runtime } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } } */"}, {"sha": "ae467fc7bdb9716692eddb9a71d4017d0cf6c1a8", "filename": "libgomp/testsuite/libgomp.c/scan-18.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-18.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-18.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-18.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-require-effective-target size32plus } */\n-/* { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target sse2_runtime } } */\n /* { dg-additional-options \"-mavx\" { target avx_runtime } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } } */"}, {"sha": "b4205012902aa808dc074981102e0cee66ec6d2a", "filename": "libgomp/testsuite/libgomp.c/scan-19.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-19.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-19.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-19.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-require-effective-target size32plus } */\n-/* { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target sse2_runtime } } */\n /* { dg-additional-options \"-mavx\" { target avx_runtime } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } } */"}, {"sha": "3ef88d78d9d30e551f6f8c11f0b4a088dac1d263", "filename": "libgomp/testsuite/libgomp.c/scan-20.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-20.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-20.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-20.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,5 +1,5 @@\n /* { dg-require-effective-target size32plus } */\n-/* { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details\" } */\n /* { dg-additional-options \"-msse2\" { target sse2_runtime } } */\n /* { dg-additional-options \"-mavx\" { target avx_runtime } } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" { target sse2_runtime } } } */"}, {"sha": "c531961ffe476b57c262022cfd8a0b28bf53467e", "filename": "libgomp/testsuite/libgomp.c/scan-21.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-21.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-21.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-21.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,6 +1,6 @@\n /* { dg-require-effective-target size32plus } */\n /* { dg-require-effective-target avx_runtime } */\n-/* { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details -msse2 -mno-sse3\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details -msse2 -mno-sse3\" } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" } } */\n \n #include \"scan-13.c\""}, {"sha": "96fead7d54dff9bdb4036cedc050d2bea066dad3", "filename": "libgomp/testsuite/libgomp.c/scan-22.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-22.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fab2f61dc1b195fec9161be15635b87d312e4626/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-22.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fscan-22.c?ref=fab2f61dc1b195fec9161be15635b87d312e4626", "patch": "@@ -1,6 +1,6 @@\n /* { dg-require-effective-target size32plus } */\n /* { dg-require-effective-target avx_runtime } */\n-/* { dg-additional-options \"-O2 -fopenmp -fvect-cost-model=cheap -fdump-tree-vect-details -msse2 -mno-sse3\" } */\n+/* { dg-additional-options \"-O2 -fopenmp -fdump-tree-vect-details -msse2 -mno-sse3\" } */\n /* { dg-final { scan-tree-dump-times \"vectorized \\[2-6] loops\" 2 \"vect\" } } */\n \n #include \"scan-17.c\""}]}