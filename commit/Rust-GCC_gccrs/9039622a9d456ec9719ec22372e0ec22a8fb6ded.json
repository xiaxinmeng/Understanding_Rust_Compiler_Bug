{"sha": "9039622a9d456ec9719ec22372e0ec22a8fb6ded", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTAzOTYyMmE5ZDQ1NmVjOTcxOWVjMjIzNzJlMGVjMjJhOGZiNmRlZA==", "commit": {"author": {"name": "Andrey Belevantsev", "email": "abel@gcc.gnu.org", "date": "2014-02-24T05:57:02Z"}, "committer": {"name": "Andrey Belevantsev", "email": "abel@gcc.gnu.org", "date": "2014-02-24T05:57:02Z"}, "message": "re PR rtl-optimization/60268 (ICE: in rank_for_schedule, at haifa-sched.c:2557)\n\ngcc/\n\n2014-02-24  Andrey Belevantsev  <abel@ispras.ru>\n\n    PR rtl-optimization/60268\n    * sched-rgn.c (haifa_find_rgns): Move the nr_regions_initial variable\n    initialization to ...\n    (sched_rgn_init): ... here.\n    (schedule_region): Check for SCHED_PRESSURE_NONE earlier.\n\ntestsuite/\n\n2014-02-24  Andrey Belevantsev  <abel@ispras.ru>\n\n    PR rtl-optimization/60268\n    * gcc.c-torture/compile/pr60268.c: New test.\n\nFrom-SVN: r208066", "tree": {"sha": "4e4b38d31417de3db52142b6f3e4e5a802536d6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e4b38d31417de3db52142b6f3e4e5a802536d6d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9039622a9d456ec9719ec22372e0ec22a8fb6ded", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9039622a9d456ec9719ec22372e0ec22a8fb6ded", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9039622a9d456ec9719ec22372e0ec22a8fb6ded", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9039622a9d456ec9719ec22372e0ec22a8fb6ded/comments", "author": null, "committer": null, "parents": [{"sha": "467d193f936fefd55cfee62e250482388606cfcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/467d193f936fefd55cfee62e250482388606cfcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/467d193f936fefd55cfee62e250482388606cfcb"}], "stats": {"total": 32, "additions": 26, "deletions": 6}, "files": [{"sha": "dd9415b76c7580cd3fd250c589fb42789cf66768", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9039622a9d456ec9719ec22372e0ec22a8fb6ded/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9039622a9d456ec9719ec22372e0ec22a8fb6ded/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9039622a9d456ec9719ec22372e0ec22a8fb6ded", "patch": "@@ -1,6 +1,15 @@\n+2014-02-24  Andrey Belevantsev  <abel@ispras.ru>\n+\n+\tPR rtl-optimization/60268\n+\t* sched-rgn.c (haifa_find_rgns): Move the nr_regions_initial variable\n+\tinitialization to ...\n+\t(sched_rgn_init): ... here.\n+\t(schedule_region): Check for SCHED_PRESSURE_NONE earlier.\n+\n 2014-02-23  David Holsgrove <david.holsgrove@xilinx.com>\n \n-\t* config/microblaze/microblaze.md: Correct ashrsi_reg / lshrsi_reg names\n+\t* config/microblaze/microblaze.md: Correct ashrsi_reg / lshrsi_reg\n+\tnames.\n \n 2014-02-23  Edgar E. Iglesias <edgar.iglesias@xilinx.com>\n "}, {"sha": "dc6fa16a19e4ec03418e9a957c9008e03373e225", "filename": "gcc/sched-rgn.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9039622a9d456ec9719ec22372e0ec22a8fb6ded/gcc%2Fsched-rgn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9039622a9d456ec9719ec22372e0ec22a8fb6ded/gcc%2Fsched-rgn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched-rgn.c?ref=9039622a9d456ec9719ec22372e0ec22a8fb6ded", "patch": "@@ -1067,7 +1067,6 @@ haifa_find_rgns (void)\n \tBLOCK_TO_BB (bb->index) = 0;\n       }\n \n-  nr_regions_initial = nr_regions;\n   free (max_hdr);\n   free (degree);\n   free (stack);\n@@ -2997,10 +2996,10 @@ schedule_region (int rgn)\n \n   /* Do not support register pressure sensitive scheduling for the new regions\n      as we don't update the liveness info for them.  */\n-  if (rgn >= nr_regions_initial)\n+  if (sched_pressure != SCHED_PRESSURE_NONE\n+      && rgn >= nr_regions_initial)\n     {\n-      if (sched_pressure != SCHED_PRESSURE_NONE)\n-\tfree_global_sched_pressure_data ();\n+      free_global_sched_pressure_data ();\n       sched_pressure = SCHED_PRESSURE_NONE;\n     }\n \n@@ -3166,6 +3165,7 @@ sched_rgn_init (bool single_blocks_p)\n \n   RGN_BLOCKS (nr_regions) = (RGN_BLOCKS (nr_regions - 1) +\n \t\t\t     RGN_NR_BLOCKS (nr_regions - 1));\n+  nr_regions_initial = nr_regions;\n }\n \n /* Free data structures for region scheduling.  */"}, {"sha": "e60f3826768357bdab3b7bcf2682fb6ecde2232e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9039622a9d456ec9719ec22372e0ec22a8fb6ded/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9039622a9d456ec9719ec22372e0ec22a8fb6ded/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9039622a9d456ec9719ec22372e0ec22a8fb6ded", "patch": "@@ -1,6 +1,11 @@\n+2014-02-24  Andrey Belevantsev  <abel@ispras.ru>\n+\n+\tPR rtl-optimization/60268\n+\t* gcc.c-torture/compile/pr60268.c: New test.\n+\n 2014-02-23  David Holsgrove <david.holsgrove@xilinx.com>\n \n-\t* gcc/testsuite/gcc.target/microblaze/others/mem_reload.c: New test.\n+\t* gcc.target/microblaze/others/mem_reload.c: New test.\n \n 2014-02-23  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n "}, {"sha": "c3a6f94191401684356ef951a4578ba33ba7b9a2", "filename": "gcc/testsuite/gcc.c-torture/compile/pr60268.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9039622a9d456ec9719ec22372e0ec22a8fb6ded/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr60268.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9039622a9d456ec9719ec22372e0ec22a8fb6ded/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr60268.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr60268.c?ref=9039622a9d456ec9719ec22372e0ec22a8fb6ded", "patch": "@@ -0,0 +1,6 @@\n+/* { dg-options \"-flive-range-shrinkage\" } */\n+void f()\n+{\n+  int i = 0;\n+  void *p = 0;\n+}"}]}