{"sha": "ebcb4bc3047888b1c9a655255c56257ff32dbc0b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWJjYjRiYzMwNDc4ODhiMWM5YTY1NTI1NWM1NjI1N2ZmMzJkYmMwYg==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2011-02-16T20:45:15Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2011-02-16T20:45:15Z"}, "message": "re PR c++/47326 ([C++0x] ICE in tsubst_copy (triggered by dependency of return type on parameter pack size))\n\nPR c++/47326\n\ngcc/cp/\n\n\tPR c++/47326\n\t* pt.c (tsubst_copy)<case SIZEOF_EXPR>: Ensure that even pack\n\texpansion arguments are not evaluated.\n\ngcc/testsuite/\n\n\tPR c++/47326\n\t* g++.dg/cpp0x/variadic106.C: New test.\n\nFrom-SVN: r170222", "tree": {"sha": "038b0cf57a6931a7d0f470c056ac27966a0af411", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/038b0cf57a6931a7d0f470c056ac27966a0af411"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ebcb4bc3047888b1c9a655255c56257ff32dbc0b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebcb4bc3047888b1c9a655255c56257ff32dbc0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ebcb4bc3047888b1c9a655255c56257ff32dbc0b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebcb4bc3047888b1c9a655255c56257ff32dbc0b/comments", "author": null, "committer": null, "parents": [{"sha": "036e0d4f8fa0326a048e59f7fe44ef04150fef05", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/036e0d4f8fa0326a048e59f7fe44ef04150fef05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/036e0d4f8fa0326a048e59f7fe44ef04150fef05"}], "stats": {"total": 46, "additions": 43, "deletions": 3}, "files": [{"sha": "dca96129d9026648356beda79c3f27342610b09a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebcb4bc3047888b1c9a655255c56257ff32dbc0b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebcb4bc3047888b1c9a655255c56257ff32dbc0b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ebcb4bc3047888b1c9a655255c56257ff32dbc0b", "patch": "@@ -1,3 +1,9 @@\n+2011-02-16  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/47326\n+\t* pt.c (tsubst_copy)<case SIZEOF_EXPR>: Ensure that even pack\n+    \texpansion arguments are not evaluated.\n+\n 2011-02-16  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/47704"}, {"sha": "aa956c8f20971a44488f238114e9e22bcd645652", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebcb4bc3047888b1c9a655255c56257ff32dbc0b/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebcb4bc3047888b1c9a655255c56257ff32dbc0b/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=ebcb4bc3047888b1c9a655255c56257ff32dbc0b", "patch": "@@ -11382,11 +11382,18 @@ tsubst_copy (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n     case SIZEOF_EXPR:\n       if (PACK_EXPANSION_P (TREE_OPERAND (t, 0)))\n         {\n-          /* We only want to compute the number of arguments.  */\n-          tree expanded = tsubst_pack_expansion (TREE_OPERAND (t, 0), args,\n-                                                complain, in_decl);\n+\n+          tree expanded;\n \t  int len = 0;\n \n+\t  ++cp_unevaluated_operand;\n+\t  ++c_inhibit_evaluation_warnings;\n+\t  /* We only want to compute the number of arguments.  */\n+\t  expanded = tsubst_pack_expansion (TREE_OPERAND (t, 0), args,\n+\t\t\t\t\t    complain, in_decl);\n+\t  --cp_unevaluated_operand;\n+\t  --c_inhibit_evaluation_warnings;\n+\n \t  if (TREE_CODE (expanded) == TREE_VEC)\n \t    len = TREE_VEC_LENGTH (expanded);\n "}, {"sha": "e11bdf3cee8e2ae6a504c0dd7d1802f3649775f4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebcb4bc3047888b1c9a655255c56257ff32dbc0b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebcb4bc3047888b1c9a655255c56257ff32dbc0b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ebcb4bc3047888b1c9a655255c56257ff32dbc0b", "patch": "@@ -1,3 +1,8 @@\n+2011-02-16  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/47326\n+\t* g++.dg/cpp0x/variadic106.C: New test.\n+\n 2011-02-16  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR libfortran/47757"}, {"sha": "80ec0844fbf4db7ee845b2edda96921f642499a4", "filename": "gcc/testsuite/g++.dg/cpp0x/variadic106.C", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebcb4bc3047888b1c9a655255c56257ff32dbc0b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic106.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebcb4bc3047888b1c9a655255c56257ff32dbc0b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic106.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic106.C?ref=ebcb4bc3047888b1c9a655255c56257ff32dbc0b", "patch": "@@ -0,0 +1,22 @@\n+// Origin: PR c++/47326\n+// { dg-options  \"-std=c++0x\" }\n+// { dg-do compile }\n+\n+template <int _N>\n+struct A\n+{\n+  typedef int value_type;\n+};\n+\n+template <typename... _ARGS>\n+auto\n+f (_ARGS... args) -> typename A<sizeof...(args)>::value_type\n+{\n+  return 12;\n+}\n+\n+int\n+main()\n+{\n+  f(1,2);\n+}"}]}