{"sha": "ff6685064f4ecab0bcb1b89bb88f6ed2ef9b4ef1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmY2Njg1MDY0ZjRlY2FiMGJjYjFiODliYjg4ZjZlZDJlZjliNGVmMQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2001-12-03T02:43:18Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2001-12-03T02:43:18Z"}, "message": "class.c (finish_vtbls): Fill in BINFO_VPTR_FIELD in the immediate binfos for our virtual bases.\n\n        * class.c (finish_vtbls): Fill in BINFO_VPTR_FIELD in the\n        immediate binfos for our virtual bases.\n\nFrom-SVN: r47543", "tree": {"sha": "4081a8ca590385ff68bd8ce3965d595d7ab0a40b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4081a8ca590385ff68bd8ce3965d595d7ab0a40b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff6685064f4ecab0bcb1b89bb88f6ed2ef9b4ef1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff6685064f4ecab0bcb1b89bb88f6ed2ef9b4ef1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff6685064f4ecab0bcb1b89bb88f6ed2ef9b4ef1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff6685064f4ecab0bcb1b89bb88f6ed2ef9b4ef1/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6fa3f289e4fbf8c0cd64e59bb840116f3d8eb72e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fa3f289e4fbf8c0cd64e59bb840116f3d8eb72e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fa3f289e4fbf8c0cd64e59bb840116f3d8eb72e"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "eaa3a9ba4d617d43eaf95c0ce18e3ff60f85c656", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff6685064f4ecab0bcb1b89bb88f6ed2ef9b4ef1/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff6685064f4ecab0bcb1b89bb88f6ed2ef9b4ef1/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ff6685064f4ecab0bcb1b89bb88f6ed2ef9b4ef1", "patch": "@@ -1,3 +1,8 @@\n+2001-12-03  Jason Merrill  <jason@redhat.com>\n+\n+\t* class.c (finish_vtbls): Fill in BINFO_VPTR_FIELD in the\n+\timmediate binfos for our virtual bases.\n+\n 2001-12-02  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* call.c (build_java_interface_fn_ref): Similarly."}, {"sha": "0513c7eed28e3c73ec1961fda6cf43f7ab56312c", "filename": "gcc/cp/class.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff6685064f4ecab0bcb1b89bb88f6ed2ef9b4ef1/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff6685064f4ecab0bcb1b89bb88f6ed2ef9b4ef1/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=ff6685064f4ecab0bcb1b89bb88f6ed2ef9b4ef1", "patch": "@@ -6789,6 +6789,7 @@ finish_vtbls (t)\n {\n   tree list;\n   tree vbase;\n+  int i;\n \n   /* We lay out the primary and secondary vtables in one contiguous\n      vtable.  The primary vtable is first, followed by the non-virtual\n@@ -6813,6 +6814,18 @@ finish_vtbls (t)\n \t\t\t     TYPE_BINFO (t), t, list);\n     }\n \n+  /* Fill in BINFO_VPTR_FIELD in the immediate binfos for our virtual\n+     base classes, for the benefit of the debugging backends.  */\n+  for (i = 0; i < BINFO_N_BASETYPES (TYPE_BINFO (t)); ++i)\n+    {\n+      tree base = BINFO_BASETYPE (TYPE_BINFO (t), i);\n+      if (TREE_VIA_VIRTUAL (base))\n+\t{\n+\t  tree vbase = binfo_for_vbase (BINFO_TYPE (base), t);\n+\t  BINFO_VPTR_FIELD (base) = BINFO_VPTR_FIELD (vbase);\n+\t}\n+    }\n+\n   if (TYPE_BINFO_VTABLE (t))\n     initialize_vtable (TYPE_BINFO (t), TREE_VALUE (list));\n }"}]}