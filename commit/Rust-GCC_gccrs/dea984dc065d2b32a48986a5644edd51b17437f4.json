{"sha": "dea984dc065d2b32a48986a5644edd51b17437f4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGVhOTg0ZGMwNjVkMmIzMmE0ODk4NmE1NjQ0ZWRkNTFiMTc0MzdmNA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@wasabisystems.com", "date": "2004-03-20T20:46:56Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2004-03-20T20:46:56Z"}, "message": "re PR c/12373 (ICE when generating RTX on valid code)\n\n\tPR c/12373\n\t* c-typeck.c (tagged_types_tu_compatible_p): Don't use\n\tDECL_ORIGINAL_TYPE if there isn't one.\n\nFrom-SVN: r79759", "tree": {"sha": "a906616a1827e7e9931e30c263997ce1b19c21d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a906616a1827e7e9931e30c263997ce1b19c21d3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dea984dc065d2b32a48986a5644edd51b17437f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dea984dc065d2b32a48986a5644edd51b17437f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dea984dc065d2b32a48986a5644edd51b17437f4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dea984dc065d2b32a48986a5644edd51b17437f4/comments", "author": null, "committer": null, "parents": [{"sha": "f903e73b80ccb078fb4bb8cfb5c4a44ea901a002", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f903e73b80ccb078fb4bb8cfb5c4a44ea901a002", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f903e73b80ccb078fb4bb8cfb5c4a44ea901a002"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "c0720ce275d75cbf4703b8e3887966944585d768", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea984dc065d2b32a48986a5644edd51b17437f4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea984dc065d2b32a48986a5644edd51b17437f4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dea984dc065d2b32a48986a5644edd51b17437f4", "patch": "@@ -1,3 +1,9 @@\n+2004-03-20  Ian Lance Taylor  <ian@wasabisystems.com>\n+\n+\tPR c/12373\n+\t* c-typeck.c (tagged_types_tu_compatible_p): Don't use\n+\tDECL_ORIGINAL_TYPE if there isn't one.\n+\n 2004-03-20  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* fold-const.c (fold): Replace \"final_type\" with \"type\"."}, {"sha": "1cfc8039244fe0cfcc35226da4dd386168b1d65f", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea984dc065d2b32a48986a5644edd51b17437f4/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea984dc065d2b32a48986a5644edd51b17437f4/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=dea984dc065d2b32a48986a5644edd51b17437f4", "patch": "@@ -674,10 +674,14 @@ tagged_types_tu_compatible_p (tree t1, tree t2, int flags)\n      is harder than it looks because this may be a typedef, so we have\n      to go look at the original type.  It may even be a typedef of a\n      typedef...  */\n-  while (TYPE_NAME (t1) && TREE_CODE (TYPE_NAME (t1)) == TYPE_DECL)\n+  while (TYPE_NAME (t1)\n+\t && TREE_CODE (TYPE_NAME (t1)) == TYPE_DECL\n+\t && DECL_ORIGINAL_TYPE (TYPE_NAME (t1)))\n     t1 = DECL_ORIGINAL_TYPE (TYPE_NAME (t1));\n \n-  while (TYPE_NAME (t2) && TREE_CODE (TYPE_NAME (t2)) == TYPE_DECL)\n+  while (TYPE_NAME (t2)\n+\t && TREE_CODE (TYPE_NAME (t2)) == TYPE_DECL\n+\t && DECL_ORIGINAL_TYPE (TYPE_NAME (t2)))\n     t2 = DECL_ORIGINAL_TYPE (TYPE_NAME (t2));\n \n   /* C90 didn't have the requirement that the two tags be the same.  */"}]}