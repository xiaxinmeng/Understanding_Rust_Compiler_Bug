{"sha": "1a013865bed6ae419945945e418d078bf30f8b89", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWEwMTM4NjViZWQ2YWU0MTk5NDU5NDVlNDE4ZDA3OGJmMzBmOGI4OQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2019-08-06T09:56:44Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2019-08-06T09:56:44Z"}, "message": "decl.c (check_array_designated_initializer): Use cp_expr_loc_or_input_loc in one place.\n\n/cp\n2019-08-06  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* decl.c (check_array_designated_initializer): Use\n\tcp_expr_loc_or_input_loc in one place.\n\n/testsuite\n2019-08-06  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* g++.dg/cpp0x/desig1.C: Check location too.\n\nFrom-SVN: r274141", "tree": {"sha": "d49d84810749b6037828ab51eca6736625de6526", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d49d84810749b6037828ab51eca6736625de6526"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1a013865bed6ae419945945e418d078bf30f8b89", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a013865bed6ae419945945e418d078bf30f8b89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a013865bed6ae419945945e418d078bf30f8b89", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a013865bed6ae419945945e418d078bf30f8b89/comments", "author": null, "committer": null, "parents": [{"sha": "3a961aea3b7de700d68d460a496b1f4a65c5009b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a961aea3b7de700d68d460a496b1f4a65c5009b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a961aea3b7de700d68d460a496b1f4a65c5009b"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "e5419322d6ffdf8a615c5d2f496c9f8227aa10c0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a013865bed6ae419945945e418d078bf30f8b89/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a013865bed6ae419945945e418d078bf30f8b89/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1a013865bed6ae419945945e418d078bf30f8b89", "patch": "@@ -1,3 +1,8 @@\n+2019-08-06  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* decl.c (check_array_designated_initializer): Use\n+\tcp_expr_loc_or_input_loc in one place.\n+\n 2019-08-06  Jakub Jelinek  <jakub@redhat.com>\n \n \t* parser.c (cp_parser_omp_for_loop): For OMP_LOOP, ignore parallel"}, {"sha": "83f086d75aea7c390147c9284c8bdf8a5d2c3b0d", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a013865bed6ae419945945e418d078bf30f8b89/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a013865bed6ae419945945e418d078bf30f8b89/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=1a013865bed6ae419945945e418d078bf30f8b89", "patch": "@@ -5520,8 +5520,9 @@ check_array_designated_initializer (constructor_elt *ce,\n \t    sorry (\"non-trivial designated initializers not supported\");\n \t}\n       else\n-\terror (\"C99 designator %qE is not an integral constant-expression\",\n-\t       ce->index);\n+\terror_at (cp_expr_loc_or_input_loc (ce->index),\n+\t\t  \"C99 designator %qE is not an integral constant-expression\",\n+\t\t  ce->index);\n \n       return false;\n     }"}, {"sha": "2a960051febd34b1addcfba6470f53d3c63b082c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a013865bed6ae419945945e418d078bf30f8b89/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a013865bed6ae419945945e418d078bf30f8b89/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1a013865bed6ae419945945e418d078bf30f8b89", "patch": "@@ -1,3 +1,7 @@\n+2019-08-06  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* g++.dg/cpp0x/desig1.C: Check location too.\n+\n 2019-08-05  Marek Polacek  <polacek@redhat.com>\n \n \tDR 2413 - typename in conversion-function-ids."}, {"sha": "dd9ad5db5a358c46b0dbd61e0a6002bf73cc1849", "filename": "gcc/testsuite/g++.dg/cpp0x/desig1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a013865bed6ae419945945e418d078bf30f8b89/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdesig1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a013865bed6ae419945945e418d078bf30f8b89/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdesig1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdesig1.C?ref=1a013865bed6ae419945945e418d078bf30f8b89", "patch": "@@ -25,5 +25,5 @@ struct C\n   constexpr operator SE() const { return SE::se0; }\n };\n \n-int c[] = { [C()] = 0 }; // { dg-error \"integral constant-expression\" }\n+int c[] = { [C()] = 0 }; // { dg-error \"14:C99 designator .C\\\\\\(\\\\\\). is not an integral constant-expression\" }\n \t\t\t // { dg-warning \"does not allow C99 designated initializers\" \"\" { target *-*-* } .-1 }"}]}