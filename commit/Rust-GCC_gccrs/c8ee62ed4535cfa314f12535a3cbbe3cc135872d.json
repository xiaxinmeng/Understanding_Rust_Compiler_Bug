{"sha": "c8ee62ed4535cfa314f12535a3cbbe3cc135872d", "node_id": "C_kwDOANBUbNoAKGM4ZWU2MmVkNDUzNWNmYTMxNGYxMjUzNWEzY2JiZTNjYzEzNTg3MmQ", "commit": {"author": {"name": "Connor Lane Smith", "email": "cls@lubutu.com", "date": "2021-11-02T18:37:02Z"}, "committer": {"name": "Connor Lane Smith", "email": "cls@lubutu.com", "date": "2021-11-03T14:08:22Z"}, "message": "Replace TupleType::iterate_fields with get_fields\n\nFixes #735\n\nSigned-off-by: Connor Lane Smith <cls@lubutu.com>", "tree": {"sha": "a2e847b9bedd6b3e46550d1b0c370092f28547e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a2e847b9bedd6b3e46550d1b0c370092f28547e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c8ee62ed4535cfa314f12535a3cbbe3cc135872d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8ee62ed4535cfa314f12535a3cbbe3cc135872d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8ee62ed4535cfa314f12535a3cbbe3cc135872d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8ee62ed4535cfa314f12535a3cbbe3cc135872d/comments", "author": {"login": "cls", "id": 519374, "node_id": "MDQ6VXNlcjUxOTM3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/519374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cls", "html_url": "https://github.com/cls", "followers_url": "https://api.github.com/users/cls/followers", "following_url": "https://api.github.com/users/cls/following{/other_user}", "gists_url": "https://api.github.com/users/cls/gists{/gist_id}", "starred_url": "https://api.github.com/users/cls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cls/subscriptions", "organizations_url": "https://api.github.com/users/cls/orgs", "repos_url": "https://api.github.com/users/cls/repos", "events_url": "https://api.github.com/users/cls/events{/privacy}", "received_events_url": "https://api.github.com/users/cls/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cls", "id": 519374, "node_id": "MDQ6VXNlcjUxOTM3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/519374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cls", "html_url": "https://github.com/cls", "followers_url": "https://api.github.com/users/cls/followers", "following_url": "https://api.github.com/users/cls/following{/other_user}", "gists_url": "https://api.github.com/users/cls/gists{/gist_id}", "starred_url": "https://api.github.com/users/cls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cls/subscriptions", "organizations_url": "https://api.github.com/users/cls/orgs", "repos_url": "https://api.github.com/users/cls/repos", "events_url": "https://api.github.com/users/cls/events{/privacy}", "received_events_url": "https://api.github.com/users/cls/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5f0df4812c37fc428b5508e019e9fb7f8a7b77b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f0df4812c37fc428b5508e019e9fb7f8a7b77b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f0df4812c37fc428b5508e019e9fb7f8a7b77b1"}], "stats": {"total": 19, "additions": 6, "deletions": 13}, "files": [{"sha": "b3ceb06665961368548e6bdd9606725f0ffeb94a", "filename": "gcc/rust/typecheck/rust-tyty.cc", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8ee62ed4535cfa314f12535a3cbbe3cc135872d/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8ee62ed4535cfa314f12535a3cbbe3cc135872d/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc?ref=c8ee62ed4535cfa314f12535a3cbbe3cc135872d", "patch": "@@ -788,11 +788,11 @@ std::string\n TupleType::as_string () const\n {\n   std::string fields_buffer;\n-  iterate_fields ([&] (BaseType *field) mutable -> bool {\n-    fields_buffer += field->as_string ();\n-    fields_buffer += \", \";\n-    return true;\n-  });\n+  for (const TyVar &field : get_fields ())\n+    {\n+      fields_buffer += field.get_tyty ()->as_string ();\n+      fields_buffer += \", \";\n+    }\n   return \"(\" + fields_buffer + \")\";\n }\n "}, {"sha": "c26e1934e15d5fe7e91ae3be4c8b2e068ed419e6", "filename": "gcc/rust/typecheck/rust-tyty.h", "status": "modified", "additions": 1, "deletions": 8, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c8ee62ed4535cfa314f12535a3cbbe3cc135872d/gcc%2Frust%2Ftypecheck%2Frust-tyty.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c8ee62ed4535cfa314f12535a3cbbe3cc135872d/gcc%2Frust%2Ftypecheck%2Frust-tyty.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Ftypecheck%2Frust-tyty.h?ref=c8ee62ed4535cfa314f12535a3cbbe3cc135872d", "patch": "@@ -642,14 +642,7 @@ class TupleType : public BaseType\n     return true;\n   }\n \n-  void iterate_fields (std::function<bool (BaseType *)> cb) const\n-  {\n-    for (size_t i = 0; i < num_fields (); i++)\n-      {\n-\tif (!cb (get_field (i)))\n-\t  return;\n-      }\n-  }\n+  const std::vector<TyVar> &get_fields () const { return fields; }\n \n   std::string get_name () const override final { return as_string (); }\n "}]}