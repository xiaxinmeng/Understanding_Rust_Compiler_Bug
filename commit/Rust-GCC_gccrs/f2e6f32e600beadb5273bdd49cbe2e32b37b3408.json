{"sha": "f2e6f32e600beadb5273bdd49cbe2e32b37b3408", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjJlNmYzMmU2MDBiZWFkYjUyNzNiZGQ0OWNiZTJlMzJiMzdiMzQwOA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2011-07-26T14:28:23Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-07-26T14:28:23Z"}, "message": "cp-demangle.c (d_print_init): Initialize pack_index field.\n\n\t* cp-demangle.c (d_print_init): Initialize pack_index field.\n\t(d_print_comp): Check for NULL template argument.\n\t* testsuite/demangle-expected: Add test case.\n\nFrom-SVN: r176791", "tree": {"sha": "9f86d2c5b414f5b66cf20d81c2c01016b551f038", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f86d2c5b414f5b66cf20d81c2c01016b551f038"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f2e6f32e600beadb5273bdd49cbe2e32b37b3408", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2e6f32e600beadb5273bdd49cbe2e32b37b3408", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2e6f32e600beadb5273bdd49cbe2e32b37b3408", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2e6f32e600beadb5273bdd49cbe2e32b37b3408/comments", "author": null, "committer": null, "parents": [{"sha": "9f61fd17476282a3c279b3b70c7cee1e12b265f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f61fd17476282a3c279b3b70c7cee1e12b265f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f61fd17476282a3c279b3b70c7cee1e12b265f5"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "1ceb0ee27876225acb99d41a2ce9d2b9486f3bd0", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2e6f32e600beadb5273bdd49cbe2e32b37b3408/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2e6f32e600beadb5273bdd49cbe2e32b37b3408/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=f2e6f32e600beadb5273bdd49cbe2e32b37b3408", "patch": "@@ -1,3 +1,9 @@\n+2011-07-26  Ian Lance Taylor  <iant@google.com>\n+\n+\t* cp-demangle.c (d_print_init): Initialize pack_index field.\n+\t(d_print_comp): Check for NULL template argument.\n+\t* testsuite/demangle-expected: Add test case.\n+\n 2011-07-22  Gerald Pfeifer  <gerald@pfeifer.com>\n \n \tPR target/49817"}, {"sha": "f41856be6d0f922d1e3c0461163d81baea770175", "filename": "libiberty/cp-demangle.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2e6f32e600beadb5273bdd49cbe2e32b37b3408/libiberty%2Fcp-demangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2e6f32e600beadb5273bdd49cbe2e32b37b3408/libiberty%2Fcp-demangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fcp-demangle.c?ref=f2e6f32e600beadb5273bdd49cbe2e32b37b3408", "patch": "@@ -1,5 +1,5 @@\n /* Demangler for g++ V3 ABI.\n-   Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n+   Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011\n    Free Software Foundation, Inc.\n    Written by Ian Lance Taylor <ian@wasabisystems.com>.\n \n@@ -3306,6 +3306,7 @@ d_print_init (struct d_print_info *dpi, demangle_callbackref callback,\n   dpi->last_char = '\\0';\n   dpi->templates = NULL;\n   dpi->modifiers = NULL;\n+  dpi->pack_index = 0;\n   dpi->flush_count = 0;\n \n   dpi->callback = callback;\n@@ -3893,6 +3894,13 @@ d_print_comp (struct d_print_info *dpi, int options,\n \t    struct demangle_component *a = d_lookup_template_argument (dpi, sub);\n \t    if (a && a->type == DEMANGLE_COMPONENT_TEMPLATE_ARGLIST)\n \t      a = d_index_template_argument (a, dpi->pack_index);\n+\n+\t    if (a == NULL)\n+\t      {\n+\t\td_print_error (dpi);\n+\t\treturn;\n+\t      }\n+\n \t    sub = a;\n \t  }\n "}, {"sha": "d3e709924dc12c9e18197fd2b8a1018415121aba", "filename": "libiberty/testsuite/demangle-expected", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2e6f32e600beadb5273bdd49cbe2e32b37b3408/libiberty%2Ftestsuite%2Fdemangle-expected", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2e6f32e600beadb5273bdd49cbe2e32b37b3408/libiberty%2Ftestsuite%2Fdemangle-expected", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Ftestsuite%2Fdemangle-expected?ref=f2e6f32e600beadb5273bdd49cbe2e32b37b3408", "patch": "@@ -4010,6 +4010,12 @@ K<1, &S::m>::f()\n _ZN1KILi1EXadL_ZN1S1mEEEE1fEv\n K<1, &S::m>::f()\n #\n+# Used to crash -- binutils PR 13030.\n+--format=gnu-v3\n+_ZSt10_ConstructI10CellBorderIS0_EEvPT_DpOT0_\n+_ZSt10_ConstructI10CellBorderIS0_EEvPT_DpOT0_\n+_ZSt10_ConstructI10CellBorderIS0_EEvPT_DpOT0_\n+#\n # Ada (GNAT) tests.\n #\n # Simple test."}]}