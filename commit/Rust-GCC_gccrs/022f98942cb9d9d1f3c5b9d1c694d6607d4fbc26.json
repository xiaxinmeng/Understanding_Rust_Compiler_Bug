{"sha": "022f98942cb9d9d1f3c5b9d1c694d6607d4fbc26", "node_id": "C_kwDOANBUbNoAKDAyMmY5ODk0MmNiOWQ5ZDFmM2M1YjlkMWM2OTRkNjYwN2Q0ZmJjMjY", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2022-07-18T16:56:52Z"}, "committer": {"name": "Marc Poulhi\u00e8s", "email": "poulhies@adacore.com", "date": "2022-09-05T07:21:02Z"}, "message": "[Ada] Cleanup resolution of iterated component association\n\nTune names of local entities.\n\ngcc/ada/\n\n\t* sem_aggr.adb (Resolve_Iterated_Component_Association): Change\n\tgeneric name Ent to a more intuitive Scop; rename Remove_Ref to\n\tRemove_Reference, so it can be instantiated as a traversal routine\n\twith plural name.", "tree": {"sha": "c6a7dd697f5b9cb409d428e5d0b74832464bc00d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c6a7dd697f5b9cb409d428e5d0b74832464bc00d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/022f98942cb9d9d1f3c5b9d1c694d6607d4fbc26", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/022f98942cb9d9d1f3c5b9d1c694d6607d4fbc26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/022f98942cb9d9d1f3c5b9d1c694d6607d4fbc26", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/022f98942cb9d9d1f3c5b9d1c694d6607d4fbc26/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dkm", "id": 87603, "node_id": "MDQ6VXNlcjg3NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/87603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkm", "html_url": "https://github.com/dkm", "followers_url": "https://api.github.com/users/dkm/followers", "following_url": "https://api.github.com/users/dkm/following{/other_user}", "gists_url": "https://api.github.com/users/dkm/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkm/subscriptions", "organizations_url": "https://api.github.com/users/dkm/orgs", "repos_url": "https://api.github.com/users/dkm/repos", "events_url": "https://api.github.com/users/dkm/events{/privacy}", "received_events_url": "https://api.github.com/users/dkm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c23b88c1fc2303d7c5c09334f00d10c5456aa53", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c23b88c1fc2303d7c5c09334f00d10c5456aa53", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c23b88c1fc2303d7c5c09334f00d10c5456aa53"}], "stats": {"total": 22, "additions": 11, "deletions": 11}, "files": [{"sha": "349ec77a382883002fea7ce80e78eb238fbe557c", "filename": "gcc/ada/sem_aggr.adb", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/022f98942cb9d9d1f3c5b9d1c694d6607d4fbc26/gcc%2Fada%2Fsem_aggr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/022f98942cb9d9d1f3c5b9d1c694d6607d4fbc26/gcc%2Fada%2Fsem_aggr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_aggr.adb?ref=022f98942cb9d9d1f3c5b9d1c694d6607d4fbc26", "patch": "@@ -1748,11 +1748,11 @@ package body Sem_Aggr is\n          -- Remove_References --\n          -----------------------\n \n-         function Remove_Ref (N : Node_Id) return Traverse_Result;\n-         --  Remove references to the entity Id after analysis, so it can be\n+         function Remove_Reference (N : Node_Id) return Traverse_Result;\n+         --  Remove reference to the entity Id after analysis, so it can be\n          --  properly reanalyzed after construct is expanded into a loop.\n \n-         function Remove_Ref (N : Node_Id) return Traverse_Result is\n+         function Remove_Reference (N : Node_Id) return Traverse_Result is\n          begin\n             if Nkind (N) = N_Identifier\n                and then Present (Entity (N))\n@@ -1763,15 +1763,15 @@ package body Sem_Aggr is\n             end if;\n             Set_Analyzed (N, False);\n             return OK;\n-         end Remove_Ref;\n+         end Remove_Reference;\n \n-         procedure Remove_References is new Traverse_Proc (Remove_Ref);\n+         procedure Remove_References is new Traverse_Proc (Remove_Reference);\n \n          --  Local variables\n \n          Choice : Node_Id;\n          Dummy  : Boolean;\n-         Ent    : Entity_Id;\n+         Scop   : Entity_Id;\n          Expr   : Node_Id;\n \n       --  Start of processing for Resolve_Iterated_Component_Association\n@@ -1841,10 +1841,10 @@ package body Sem_Aggr is\n          --  visible in the expression for the component, and needed for its\n          --  analysis.\n \n-         Ent := New_Internal_Entity (E_Loop, Current_Scope, Loc, 'L');\n-         Set_Etype  (Ent, Standard_Void_Type);\n-         Set_Parent (Ent, Parent (N));\n-         Push_Scope (Ent);\n+         Scop := New_Internal_Entity (E_Loop, Current_Scope, Loc, 'L');\n+         Set_Etype  (Scop, Standard_Void_Type);\n+         Set_Parent (Scop, Parent (N));\n+         Push_Scope (Scop);\n \n          --  Insert and decorate the index variable in the current scope.\n          --  The expression has to be analyzed once the index variable is\n@@ -1853,7 +1853,7 @@ package body Sem_Aggr is\n          Enter_Name (Id);\n          Set_Etype (Id, Id_Typ);\n          Mutate_Ekind (Id, E_Variable);\n-         Set_Scope (Id, Ent);\n+         Set_Scope (Id, Scop);\n \n          --  Analyze  expression without expansion, to verify legality.\n          --  When generating code, we then remove references to the index"}]}