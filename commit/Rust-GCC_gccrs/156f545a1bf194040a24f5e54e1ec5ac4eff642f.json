{"sha": "156f545a1bf194040a24f5e54e1ec5ac4eff642f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTU2ZjU0NWExYmYxOTQwNDBhMjRmNWU1NGUxZWM1YWM0ZWZmNjQyZg==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2009-07-10T07:27:32Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2009-07-10T07:27:32Z"}, "message": "re PR c/25509 (can't disable __attribute__((warn_unused_result)))\n\n2009-07-10  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\tPR 25509\n\tPR 40614\n\t* c.opt (Wunused-result): New.\n\t* doc/invoke.texi: Document it.\n\t* c-common.c (c_warn_unused_result): Use it.\ntestsuite/\n\t* g++.dg/warn/unused-result1-Werror.c: New.\n\nFrom-SVN: r149458", "tree": {"sha": "cf4b509067e40cd7e3e96f721aebe6f76de83ac9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf4b509067e40cd7e3e96f721aebe6f76de83ac9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/156f545a1bf194040a24f5e54e1ec5ac4eff642f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/156f545a1bf194040a24f5e54e1ec5ac4eff642f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/156f545a1bf194040a24f5e54e1ec5ac4eff642f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/156f545a1bf194040a24f5e54e1ec5ac4eff642f/comments", "author": null, "committer": null, "parents": [{"sha": "5cec9f5974ed8ab0788179b2afd48eb484f39acb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cec9f5974ed8ab0788179b2afd48eb484f39acb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cec9f5974ed8ab0788179b2afd48eb484f39acb"}], "stats": {"total": 43, "additions": 40, "deletions": 3}, "files": [{"sha": "4c95fb363baf70efa863b9da587a3055f6d09dc3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=156f545a1bf194040a24f5e54e1ec5ac4eff642f", "patch": "@@ -1,3 +1,11 @@\n+2009-07-10  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\tPR 25509\n+\tPR 40614\n+\t* c.opt (Wunused-result): New.\n+\t* doc/invoke.texi: Document it.\n+\t* c-common.c (c_warn_unused_result): Use it.\n+\n 2009-07-09  DJ Delorie  <dj@redhat.com>\n \n \t* targhooks.c (default_target_can_inline_p): Rename from"}, {"sha": "20dac6b2ef4250caf14454225e7dc18a3098e3fc", "filename": "gcc/c-common.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=156f545a1bf194040a24f5e54e1ec5ac4eff642f", "patch": "@@ -8266,11 +8266,13 @@ c_warn_unused_result (gimple_seq seq)\n \t      location_t loc = gimple_location (g);\n \n \t      if (fdecl)\n-\t\twarning_at (loc, 0, \"ignoring return value of %qD, \"\n+\t\twarning_at (loc, OPT_Wunused_result, \n+\t\t\t    \"ignoring return value of %qD, \"\n \t\t\t    \"declared with attribute warn_unused_result\",\n \t\t\t    fdecl);\n \t      else\n-\t\twarning_at (loc, 0, \"ignoring return value of function \"\n+\t\twarning_at (loc, OPT_Wunused_result,\n+\t\t\t    \"ignoring return value of function \"\n \t\t\t    \"declared with attribute warn_unused_result\");\n \t    }\n \t  break;"}, {"sha": "5ee9a1348d448a47d9d832def6fad7efa5b6d4df", "filename": "gcc/c.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc.opt?ref=156f545a1bf194040a24f5e54e1ec5ac4eff642f", "patch": "@@ -488,6 +488,10 @@ Wunused-macros\n C ObjC C++ ObjC++ Warning\n Warn about macros defined in the main file that are not used\n \n+Wunused-result\n+C ObjC C++ ObjC++ Var(warn_unused_result) Init(1) Warning\n+Warn if a caller of a function, marked with attribute warn_unused_result, does not use its return value\n+\n Wvariadic-macros\n C ObjC C++ ObjC++ Warning\n Do not warn about using variadic macros when -pedantic"}, {"sha": "cb51dfbaf15a4a6eaf308e689eaa1a93eece5bc7", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=156f545a1bf194040a24f5e54e1ec5ac4eff642f", "patch": "@@ -260,7 +260,7 @@ Objective-C and Objective-C++ Dialects}.\n -Wsystem-headers  -Wtrigraphs  -Wtype-limits  -Wundef  -Wuninitialized @gol\n -Wunknown-pragmas  -Wno-pragmas -Wunreachable-code @gol\n -Wunsuffixed-float-constants  -Wunused  -Wunused-function @gol\n--Wunused-label  -Wunused-parameter  -Wunused-value  -Wunused-variable @gol\n+-Wunused-label  -Wunused-parameter -Wno-unused-result -Wunused-value  -Wunused-variable @gol\n -Wvariadic-macros -Wvla @gol\n -Wvolatile-register-var  -Wwrite-strings}\n \n@@ -3259,6 +3259,13 @@ Warn whenever a function parameter is unused aside from its declaration.\n To suppress this warning use the @samp{unused} attribute\n (@pxref{Variable Attributes}).\n \n+@item -Wno-unused-result\n+@opindex Wunused-result\n+@opindex Wno-unused-result\n+Do not warn if a caller of a function marked with attribute\n+@code{warn_unused_result} (@pxref{Variable Attributes}) does not use\n+its return value. The default is @option{-Wunused-result}.\n+\n @item -Wunused-variable\n @opindex Wunused-variable\n @opindex Wno-unused-variable"}, {"sha": "651afbf6435150d5b881fce31434a6251cf573d8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=156f545a1bf194040a24f5e54e1ec5ac4eff642f", "patch": "@@ -1,3 +1,9 @@\n+2009-07-10  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\tPR 25509\n+\tPR 40614\n+\t* g++.dg/warn/unused-result1-Werror.c: New.\n+\n 2009-07-10  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/39334"}, {"sha": "033d707778c8de92db3449f1b6411e303fd16c5c", "filename": "gcc/testsuite/g++.dg/warn/unused-result1-Werror.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Funused-result1-Werror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/156f545a1bf194040a24f5e54e1ec5ac4eff642f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Funused-result1-Werror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Funused-result1-Werror.c?ref=156f545a1bf194040a24f5e54e1ec5ac4eff642f", "patch": "@@ -0,0 +1,10 @@\n+// PR 40614\n+// { dg-options \"-Werror=unused-result\" }\n+class QByteArray {\n+public:\n+  QByteArray(const QByteArray &);\n+};\n+class QString {\n+  QByteArray toLocal8Bit() const __attribute__ ((warn_unused_result));\n+  void fooWarnHere() const { toLocal8Bit(); } // { dg-error \"ignoring\" }\n+};"}]}