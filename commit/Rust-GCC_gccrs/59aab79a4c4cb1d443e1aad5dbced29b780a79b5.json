{"sha": "59aab79a4c4cb1d443e1aad5dbced29b780a79b5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTlhYWI3OWE0YzRjYjFkNDQzZTFhYWQ1ZGJjZWQyOWI3ODBhNzliNQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2017-09-26T09:33:49Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "2017-09-26T09:33:49Z"}, "message": "[ARM] PR82175 - fix -mcpu=native not working correctly.\n\nThe new option processing machinery relies on %< rules in the specs to\nsuppress options that are rewritten.  Suppression appears to be a two\nphase process where the option is partially suppressed when %< is\nprocessed and then fully suppressed at the end of the string.  Strings\nare separated by commas and there can be multiple strings used to form\nDRIVER_SELF_SPECS.\n\nThe fix in this case is to separate the driver self specs for ARM into\nseparate rules as described; this forces the -m{cpu,tune,arch}=native\noptions to be properly removed before proceeding to the next rule set.\n\n\tPR target/82175\n\t* config/arm/arm.h (DRIVER_SELF_SPECS): Separate sub-rules with commas.\n\nFrom-SVN: r253189", "tree": {"sha": "6c49aebbfda6afb9bb4dabbdacc355c26ff883eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c49aebbfda6afb9bb4dabbdacc355c26ff883eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/59aab79a4c4cb1d443e1aad5dbced29b780a79b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59aab79a4c4cb1d443e1aad5dbced29b780a79b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59aab79a4c4cb1d443e1aad5dbced29b780a79b5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59aab79a4c4cb1d443e1aad5dbced29b780a79b5/comments", "author": null, "committer": null, "parents": [{"sha": "09fdb7014c9b121d4f695b1ce63d13f7e43a45c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09fdb7014c9b121d4f695b1ce63d13f7e43a45c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09fdb7014c9b121d4f695b1ce63d13f7e43a45c8"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "5e7f82dc2c4e4152e428d35b8c416b2435e8a278", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59aab79a4c4cb1d443e1aad5dbced29b780a79b5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59aab79a4c4cb1d443e1aad5dbced29b780a79b5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=59aab79a4c4cb1d443e1aad5dbced29b780a79b5", "patch": "@@ -1,3 +1,8 @@\n+2017-09-26  Richard Earnshaw  <rearnsha@arm.com>\n+\n+\tPR target/82175\n+\t* config/arm/arm.h (DRIVER_SELF_SPECS): Separate sub-rules with commas.\n+\n 2017-09-26  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/82320"}, {"sha": "a3ca800f7a5cb876368480b97d0641f5d02af5d0", "filename": "gcc/config/arm/arm.h", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59aab79a4c4cb1d443e1aad5dbced29b780a79b5/gcc%2Fconfig%2Farm%2Farm.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59aab79a4c4cb1d443e1aad5dbced29b780a79b5/gcc%2Fconfig%2Farm%2Farm.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.h?ref=59aab79a4c4cb1d443e1aad5dbced29b780a79b5", "patch": "@@ -2228,9 +2228,12 @@ const char *arm_be8_option (int argc, const char **argv);\n   \"                     %{mfloat-abi=*: abi %*}\"\t\\\n   \"                     %<march=*) \"\n \n+/* Complete set of specs for the driver.  Commas separate the\n+   individual rules so that any option suppression (%<opt...)is\n+   completed before starting subsequent rules.  */\n #define DRIVER_SELF_SPECS\t\t\t\\\n-  MCPU_MTUNE_NATIVE_SPECS\t\t\t\\\n-  TARGET_MODE_SPECS\t\t\t\t\\\n+  MCPU_MTUNE_NATIVE_SPECS,\t\t\t\\\n+  TARGET_MODE_SPECS,\t\t\t\t\\\n   ARCH_CANONICAL_SPECS\n \n #define TARGET_SUPPORTS_WIDE_INT 1"}]}