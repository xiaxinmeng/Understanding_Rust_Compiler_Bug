{"sha": "c708217135607d42ff3926164f0472ef6aa66719", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzcwODIxNzEzNTYwN2Q0MmZmMzkyNjE2NGYwNDcyZWY2YWE2NjcxOQ==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2016-10-24T19:21:42Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2016-10-24T19:21:42Z"}, "message": "re PR fortran/71895 (ICE in gfc_compare_derived_types, at fortran/interface.c:520)\n\n2016-10-24  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/71895\n\t* interface.c (gfc_compare_derived_types):  Convert gcc_assert()\n\tto a gfc_internal_error() to prevent an ICE.\n\n2016-10-24  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/71895\n\t* gfortran.dg/pr71895.f90: New test.\n\nFrom-SVN: r241493", "tree": {"sha": "baeb490399f923d9e48e32eb7362056a58a73628", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/baeb490399f923d9e48e32eb7362056a58a73628"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c708217135607d42ff3926164f0472ef6aa66719", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c708217135607d42ff3926164f0472ef6aa66719", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c708217135607d42ff3926164f0472ef6aa66719", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c708217135607d42ff3926164f0472ef6aa66719/comments", "author": null, "committer": null, "parents": [{"sha": "0f2a9e37fa5487d7f1b4ea3530c497661a6d7817", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f2a9e37fa5487d7f1b4ea3530c497661a6d7817", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f2a9e37fa5487d7f1b4ea3530c497661a6d7817"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "37578811fc78e745e0b97ba2b1f5e0f68bf8ccce", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c708217135607d42ff3926164f0472ef6aa66719/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c708217135607d42ff3926164f0472ef6aa66719/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c708217135607d42ff3926164f0472ef6aa66719", "patch": "@@ -1,3 +1,9 @@\n+2016-10-24  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/71895\n+\t* interface.c (gfc_compare_derived_types):  Convert gcc_assert()\n+\tto a gfc_internal_error() to prevent an ICE.\n+\n 2016-10-24  Jakub Jelinek  <jakub@redhat.com>\n \n \t* trans-intrinsic.c (gfc_conv_intrinsic_minmax): Use VAR_P (x)"}, {"sha": "b851d5a425bdb4ad10ffb95843e767a8e929f0a3", "filename": "gcc/fortran/interface.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c708217135607d42ff3926164f0472ef6aa66719/gcc%2Ffortran%2Finterface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c708217135607d42ff3926164f0472ef6aa66719/gcc%2Ffortran%2Finterface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finterface.c?ref=c708217135607d42ff3926164f0472ef6aa66719", "patch": "@@ -615,7 +615,8 @@ gfc_compare_derived_types (gfc_symbol *derived1, gfc_symbol *derived2)\n   if (derived1 == derived2)\n     return 1;\n \n-  gcc_assert (derived1 && derived2);\n+  if (!derived1 || !derived2)\n+    gfc_internal_error (\"gfc_compare_derived_types: invalid derived type\");\n \n   /* Compare UNION types specially.  */\n   if (derived1->attr.flavor == FL_UNION || derived2->attr.flavor == FL_UNION)"}, {"sha": "0cc1027b3bb8c7099fda871dcc3d88cf4d2cf8b1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c708217135607d42ff3926164f0472ef6aa66719/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c708217135607d42ff3926164f0472ef6aa66719/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c708217135607d42ff3926164f0472ef6aa66719", "patch": "@@ -1,3 +1,8 @@\n+2016-10-24  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/71895\n+\t* gfortran.dg/pr71895.f90: New test.\n+\n 2016-10-24  Jakub Jelinek  <jakub@redhat.com>\n \n \t* g++.dg/debug/dwarf2/ref-2.C: New test."}, {"sha": "e5d40026d03ae5f2ee0e743020245f4b49bc6206", "filename": "gcc/testsuite/gfortran.dg/pr71895.f90", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c708217135607d42ff3926164f0472ef6aa66719/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr71895.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c708217135607d42ff3926164f0472ef6aa66719/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr71895.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr71895.f90?ref=c708217135607d42ff3926164f0472ef6aa66719", "patch": "@@ -0,0 +1,10 @@\n+! { dg-do compile }\n+program p\n+   type t\n+      integer :: n\n+   end type\n+   type(t) :: x\n+   class(t) :: y        ! { dg-error \"must be dummy, allocatable or pointer\" }\n+   print *, extends_type_of(x, y)\n+   print *, extends_type_of(y, x)\n+end"}]}