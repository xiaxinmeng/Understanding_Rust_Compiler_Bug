{"sha": "10b905f1eab24dd18a023aaa3681a3673866de10", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTBiOTA1ZjFlYWIyNGRkMThhMDIzYWFhMzY4MWEzNjczODY2ZGUxMA==", "commit": {"author": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1999-05-05T21:09:08Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1999-05-05T21:09:08Z"}, "message": "verify.c (verify_jvm_instructions): Better error messages.\n\n\ufffd\n\t* verify.c (verify_jvm_instructions):  Better error messages.\n\nFrom-SVN: r26788", "tree": {"sha": "431f472f687caa87b0bc72d713289ca1b7f49e83", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/431f472f687caa87b0bc72d713289ca1b7f49e83"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/10b905f1eab24dd18a023aaa3681a3673866de10", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10b905f1eab24dd18a023aaa3681a3673866de10", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10b905f1eab24dd18a023aaa3681a3673866de10", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10b905f1eab24dd18a023aaa3681a3673866de10/comments", "author": null, "committer": null, "parents": [{"sha": "0d9d12fc95c381963e61aa7be3041aeabb29a3ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d9d12fc95c381963e61aa7be3041aeabb29a3ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d9d12fc95c381963e61aa7be3041aeabb29a3ac"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "8779bd026747f0b01c7b51f74aa4446e4d905e64", "filename": "gcc/java/verify.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10b905f1eab24dd18a023aaa3681a3673866de10/gcc%2Fjava%2Fverify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10b905f1eab24dd18a023aaa3681a3673866de10/gcc%2Fjava%2Fverify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fverify.c?ref=10b905f1eab24dd18a023aaa3681a3673866de10", "patch": "@@ -750,8 +750,12 @@ verify_jvm_instructions (jcf, byte_ops, length)\n \t      pop_type (field_type);\n \t    if (! is_static)\n \t      {\n+\t\tint clindex = COMPONENT_REF_CLASS_INDEX (&current_jcf->cpool,\n+\t\t\t\t\t\t\tindex);\n+\t\ttree self_type = get_class_constant (current_jcf, clindex);\n \t\t/* Defer actual checking until next pass. */\n-\t\tpop_type (ptr_type_node);\n+\t\tif (pop_type_0 (self_type) == NULL_TREE)\n+\t\t  VERIFICATION_ERROR (\"incorrect type for field reference\");\n \t      }\n \t    if (! is_putting)\n \t      push_type (field_type);\n@@ -1283,6 +1287,7 @@ verify_jvm_instructions (jcf, byte_ops, length)\n   message = \"program counter out of range\";\n   goto verify_error;\n  verify_error:\n-  error (\"verification error at PC=%d: %s\", oldpc, message);\n+  error (\"verification error at PC=%d: %s\", oldpc);\n+  error (message);\n   return 0;\n }"}]}