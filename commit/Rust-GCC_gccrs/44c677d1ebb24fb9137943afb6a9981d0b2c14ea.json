{"sha": "44c677d1ebb24fb9137943afb6a9981d0b2c14ea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDRjNjc3ZDFlYmIyNGZiOTEzNzk0M2FmYjZhOTk4MWQwYjJjMTRlYQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2020-08-30T12:15:45Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2020-08-30T12:15:45Z"}, "message": "x86: Fix up ssse3_pshufbv8qi splitter\n\nThe constant pool size optimization I was testing resulted in various ICEs\nin gcc.target/i386/ testsuite, the problem is that the ssse3_pshufbv8qi\nsplitter emits invalid RTL, in V4SImode 0xf7f7f7f7 CONST_INTs shouldn't\nappear, instead they should have been -0x8080809 (0xf7f7f7f7 sign extended\ninto 64 bits).\n\n2020-08-30  Jakub Jelinek  <jakub@redhat.com>\n\n\t* config/i386/sse.md (ssse3_pshufbv8qi): Use gen_int_mode instead of\n\tGEN_INT, and ix86_build_const_vector instead of gen_rtvec and\n\tgen_rtx_CONT_VECTOR.", "tree": {"sha": "cef34b10a8bfaca6289ab757e588942e93ddd8f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cef34b10a8bfaca6289ab757e588942e93ddd8f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/44c677d1ebb24fb9137943afb6a9981d0b2c14ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44c677d1ebb24fb9137943afb6a9981d0b2c14ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44c677d1ebb24fb9137943afb6a9981d0b2c14ea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44c677d1ebb24fb9137943afb6a9981d0b2c14ea/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "daba4a713e71eee7921df7a8040ea29032c1d0bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/daba4a713e71eee7921df7a8040ea29032c1d0bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/daba4a713e71eee7921df7a8040ea29032c1d0bc"}], "stats": {"total": 7, "additions": 2, "deletions": 5}, "files": [{"sha": "5e26e9c5aa2ed17849fac57edabd331f48a6067e", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44c677d1ebb24fb9137943afb6a9981d0b2c14ea/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44c677d1ebb24fb9137943afb6a9981d0b2c14ea/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=44c677d1ebb24fb9137943afb6a9981d0b2c14ea", "patch": "@@ -16938,11 +16938,8 @@\n \t\t\t\tGET_MODE (operands[2]));\n   operands[4] = lowpart_subreg (V16QImode, operands[3],\n \t\t\t\tGET_MODE (operands[3]));\n-  rtvec par = gen_rtvec (4, GEN_INT (0xf7f7f7f7),\n-\t\t\t GEN_INT (0xf7f7f7f7),\n-\t\t\t GEN_INT (0xf7f7f7f7),\n-\t\t\t GEN_INT (0xf7f7f7f7));\n-  rtx vec_const = gen_rtx_CONST_VECTOR (V4SImode, par);\n+  rtx vec_const = ix86_build_const_vector (V4SImode, true,\n+\t\t\t\t\t   gen_int_mode (0xf7f7f7f7, SImode));\n   operands[5] = force_const_mem (V4SImode, vec_const);\n }\n   [(set_attr \"mmx_isa\" \"native,sse_noavx,avx\")"}]}