{"sha": "530b44094354758d0dea5374188caa6863647114", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTMwYjQ0MDk0MzU0NzU4ZDBkZWE1Mzc0MTg4Y2FhNjg2MzY0NzExNA==", "commit": {"author": {"name": "qing zhao", "email": "qing.zhao@oracle.com", "date": "2020-05-06T17:46:09Z"}, "committer": {"name": "qing zhao", "email": "qing.zhao@oracle.com", "date": "2020-05-06T17:46:09Z"}, "message": "add a new option -flarge-source-files.\n\ngcc/ChangeLog:\n\n\tPR c/94230\n\t* common.opt: Add -flarge-source-files.\n\t* doc/invoke.texi: Document it.\n\t* toplev.c (process_options): set line_table->default_range_bits\n\tto 0 when flag_large_source_files is true.\n\ngcc/c-family/ChangeLog:\n\n\tPR c/94230\n\t* c-indentation.c (get_visual_column): Add a hint to use the new\n\t-flarge-source-files option.\n\ngcc/testsuite/ChangeLog:\n\n\tPR c/94230\n\t* gcc.dg/plugin/location-overflow-test-1.c (fn_1): New message to\n\tprovide hint to use the new -flarge-source-files option.", "tree": {"sha": "f9809668f848e2ade12de9aaa53f3180bcb147c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f9809668f848e2ade12de9aaa53f3180bcb147c3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/530b44094354758d0dea5374188caa6863647114", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/530b44094354758d0dea5374188caa6863647114", "html_url": "https://github.com/Rust-GCC/gccrs/commit/530b44094354758d0dea5374188caa6863647114", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/530b44094354758d0dea5374188caa6863647114/comments", "author": {"login": "qingzhao69", "id": 89154636, "node_id": "MDQ6VXNlcjg5MTU0NjM2", "avatar_url": "https://avatars.githubusercontent.com/u/89154636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qingzhao69", "html_url": "https://github.com/qingzhao69", "followers_url": "https://api.github.com/users/qingzhao69/followers", "following_url": "https://api.github.com/users/qingzhao69/following{/other_user}", "gists_url": "https://api.github.com/users/qingzhao69/gists{/gist_id}", "starred_url": "https://api.github.com/users/qingzhao69/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qingzhao69/subscriptions", "organizations_url": "https://api.github.com/users/qingzhao69/orgs", "repos_url": "https://api.github.com/users/qingzhao69/repos", "events_url": "https://api.github.com/users/qingzhao69/events{/privacy}", "received_events_url": "https://api.github.com/users/qingzhao69/received_events", "type": "User", "site_admin": false}, "committer": {"login": "qingzhao69", "id": 89154636, "node_id": "MDQ6VXNlcjg5MTU0NjM2", "avatar_url": "https://avatars.githubusercontent.com/u/89154636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qingzhao69", "html_url": "https://github.com/qingzhao69", "followers_url": "https://api.github.com/users/qingzhao69/followers", "following_url": "https://api.github.com/users/qingzhao69/following{/other_user}", "gists_url": "https://api.github.com/users/qingzhao69/gists{/gist_id}", "starred_url": "https://api.github.com/users/qingzhao69/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qingzhao69/subscriptions", "organizations_url": "https://api.github.com/users/qingzhao69/orgs", "repos_url": "https://api.github.com/users/qingzhao69/repos", "events_url": "https://api.github.com/users/qingzhao69/events{/privacy}", "received_events_url": "https://api.github.com/users/qingzhao69/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c2879301d3b027a1ba427a5d5c7557decb8a7ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c2879301d3b027a1ba427a5d5c7557decb8a7ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c2879301d3b027a1ba427a5d5c7557decb8a7ab"}], "stats": {"total": 54, "additions": 51, "deletions": 3}, "files": [{"sha": "18800ec605aaf5f66143fdf7f87df25dffdaa75a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/530b44094354758d0dea5374188caa6863647114/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/530b44094354758d0dea5374188caa6863647114/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=530b44094354758d0dea5374188caa6863647114", "patch": "@@ -1,3 +1,11 @@\n+2020-05-06  qing zhao  <qing.zhao@oracle.com>\n+\n+\tPR c/94230\n+\t* common.opt: Add -flarge-source-files.\n+\t* doc/invoke.texi: Document it.\n+\t* toplev.c (process_options): set line_table->default_range_bits\n+\tto 0 when flag_large_source_files is true.\n+\n 2020-05-06  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n \n \tPR target/94913"}, {"sha": "a7faf829bd6ddf96e4b4d9341ddda41faa8aa64f", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/530b44094354758d0dea5374188caa6863647114/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/530b44094354758d0dea5374188caa6863647114/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=530b44094354758d0dea5374188caa6863647114", "patch": "@@ -1,3 +1,9 @@\n+2020-05-06  qing zhao  <qing.zhao@oracle.com>\n+\n+\tPR c/94230\n+\t* c-indentation.c (get_visual_column): Add a hint to use the new\n+\t-flarge-source-files option.\n+\n 2020-05-05  Stefan Schulze Frielinghaus  <stefansf@linux.ibm.com>\n \n \t* c-attribs.c (handle_vector_size_attribute): Add attribute"}, {"sha": "9fba3bcc67cbccad4d8c799102722660c6f94f70", "filename": "gcc/c-family/c-indentation.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/530b44094354758d0dea5374188caa6863647114/gcc%2Fc-family%2Fc-indentation.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/530b44094354758d0dea5374188caa6863647114/gcc%2Fc-family%2Fc-indentation.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-indentation.c?ref=530b44094354758d0dea5374188caa6863647114", "patch": "@@ -67,6 +67,11 @@ get_visual_column (expanded_location exploc, location_t loc,\n \t\t  \"%<-Wmisleading-indentation%> is disabled from this point\"\n \t\t  \" onwards, since column-tracking was disabled due to\"\n \t\t  \" the size of the code/headers\");\n+\t  if (!flag_large_source_files)\n+\t    inform (loc,\n+\t\t    \"adding %<-flarge-source-files%> will allow for more\" \n+\t\t    \" column-tracking support, at the expense of compilation\"\n+\t\t    \" time and memory\");\n \t}\n       return false;\n     }"}, {"sha": "30d05734d167fa6bf9bae8bb4473e3d7495353f6", "filename": "gcc/common.opt", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/530b44094354758d0dea5374188caa6863647114/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/530b44094354758d0dea5374188caa6863647114/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=530b44094354758d0dea5374188caa6863647114", "patch": "@@ -1609,6 +1609,11 @@ fkeep-gc-roots-live\n Common Undocumented Report Var(flag_keep_gc_roots_live) Optimization\n ; Always keep a pointer to a live memory block\n \n+flarge-source-files\n+Common Report Var(flag_large_source_files) Init(0)\n+Improve GCC's ability to track column numbers in large source files,\n+at the expense of slower compilation.\n+\n floop-parallelize-all\n Common Report Var(flag_loop_parallelize_all) Optimization\n Mark all loops as parallel."}, {"sha": "c97318f046591fe4cdf11637b10bec408a5c3dd3", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/530b44094354758d0dea5374188caa6863647114/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/530b44094354758d0dea5374188caa6863647114/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=530b44094354758d0dea5374188caa6863647114", "patch": "@@ -574,8 +574,8 @@ Objective-C and Objective-C++ Dialects}.\n -dD  -dI  -dM  -dN  -dU @gol\n -fdebug-cpp  -fdirectives-only  -fdollars-in-identifiers  @gol\n -fexec-charset=@var{charset}  -fextended-identifiers  @gol\n--finput-charset=@var{charset}  -fmacro-prefix-map=@var{old}=@var{new}  @gol\n--fmax-include-depth=@var{depth} @gol\n+-finput-charset=@var{charset}  -flarge-source-files  @gol\n+-fmacro-prefix-map=@var{old}=@var{new} -fmax-include-depth=@var{depth} @gol\n -fno-canonical-system-headers  -fpch-deps  -fpch-preprocess  @gol\n -fpreprocessed  -ftabstop=@var{width}  -ftrack-macro-expansion  @gol\n -fwide-exec-charset=@var{charset}  -fworking-directory @gol\n@@ -14174,6 +14174,21 @@ This option may be useful in conjunction with the @option{-B} or\n perform additional processing of the program source between\n normal preprocessing and compilation.\n \n+@item -flarge-source-files\n+@opindex flarge-source-files\n+Adjust GCC to expect large source files, at the expense of slower\n+compilation and higher memory usage.\n+\n+Specifically, GCC normally tracks both column numbers and line numbers\n+within source files and it normally prints both of these numbers in\n+diagnostics.  However, once it has processed a certain number of source\n+lines, it stops tracking column numbers and only tracks line numbers.\n+This means that diagnostics for later lines do not include column numbers.\n+It also means that options like @option{-Wmisleading-indentation} cease to work\n+at that point, although the compiler prints a note if this happens.\n+Passing @option{-flarge-source-files} significantly increases the number\n+of source lines that GCC can process before it stops tracking columns.\n+\n @end table\n \n @node Assembler Options"}, {"sha": "6aa437871229d2306eb8658c125a426e5fa3412b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/530b44094354758d0dea5374188caa6863647114/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/530b44094354758d0dea5374188caa6863647114/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=530b44094354758d0dea5374188caa6863647114", "patch": "@@ -1,3 +1,9 @@\n+2020-05-06  qing zhao  <qing.zhao@oracle.com>\n+\n+\tPR c/94230\n+\t* gcc.dg/plugin/location-overflow-test-1.c (fn_1): New message to \n+\tprovide hint to use the new -flarge-source-files option.\n+\n 2020-05-06  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n \n \tPR target/94913"}, {"sha": "a3ac12d3b466a53360982746b0f235739f182f2b", "filename": "gcc/testsuite/gcc.dg/plugin/location-overflow-test-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/530b44094354758d0dea5374188caa6863647114/gcc%2Ftestsuite%2Fgcc.dg%2Fplugin%2Flocation-overflow-test-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/530b44094354758d0dea5374188caa6863647114/gcc%2Ftestsuite%2Fgcc.dg%2Fplugin%2Flocation-overflow-test-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fplugin%2Flocation-overflow-test-1.c?ref=530b44094354758d0dea5374188caa6863647114", "patch": "@@ -13,7 +13,7 @@ int\n fn_1 (int flag)\n {\n   int x = 4, y = 5;\n-  if (flag) x = 3; y = 2; /* { dg-message \"-:disabled from this point\" } */\n+  if (flag) x = 3; y = 2; /* { dg-message \"-:disabled from this point\" \"adding '-flarge-source-files'\" } */\n   return x * y;\n }\n "}, {"sha": "96316fbd23b67a1da30bf6e910237ce99e84bda3", "filename": "gcc/toplev.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/530b44094354758d0dea5374188caa6863647114/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/530b44094354758d0dea5374188caa6863647114/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=530b44094354758d0dea5374188caa6863647114", "patch": "@@ -1854,6 +1854,9 @@ process_options (void)\n     hash_table_sanitize_eq_limit\n       = param_hash_table_verification_limit;\n \n+  if (flag_large_source_files)\n+    line_table->default_range_bits = 0;\n+\n   /* Please don't change global_options after this point, those changes won't\n      be reflected in optimization_{default,current}_node.  */\n }"}]}