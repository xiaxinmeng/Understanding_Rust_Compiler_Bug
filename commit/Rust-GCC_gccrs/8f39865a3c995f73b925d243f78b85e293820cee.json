{"sha": "8f39865a3c995f73b925d243f78b85e293820cee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGYzOTg2NWEzYzk5NWY3M2I5MjVkMjQzZjc4Yjg1ZTI5MzgyMGNlZQ==", "commit": {"author": {"name": "David S. Miller", "email": "davem@redhat.com", "date": "2002-05-04T00:38:36Z"}, "committer": {"name": "David S. Miller", "email": "davem@gcc.gnu.org", "date": "2002-05-04T00:38:36Z"}, "message": "haifa-sched.c (rank_for_schedule): Revert 2002-05-02 change, no longer needed.\n\n2002-05-03  David S. Miller  <davem@redhat.com>\n\n\t* haifa-sched.c (rank_for_schedule): Revert 2002-05-02 change,\n\tno longer needed.\n\nFrom-SVN: r53136", "tree": {"sha": "59d15e751d736780a9e280b8333bbc8cde181def", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/59d15e751d736780a9e280b8333bbc8cde181def"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8f39865a3c995f73b925d243f78b85e293820cee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f39865a3c995f73b925d243f78b85e293820cee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f39865a3c995f73b925d243f78b85e293820cee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f39865a3c995f73b925d243f78b85e293820cee/comments", "author": null, "committer": null, "parents": [{"sha": "b44140e7110c5b425e360bf9c63504d484e40f53", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b44140e7110c5b425e360bf9c63504d484e40f53", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b44140e7110c5b425e360bf9c63504d484e40f53"}], "stats": {"total": 22, "additions": 11, "deletions": 11}, "files": [{"sha": "70f28194df7e1f72328e3e30423e4b6a792c0c90", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f39865a3c995f73b925d243f78b85e293820cee/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f39865a3c995f73b925d243f78b85e293820cee/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8f39865a3c995f73b925d243f78b85e293820cee", "patch": "@@ -1,3 +1,8 @@\n+2002-05-03  David S. Miller  <davem@redhat.com>\n+\n+\t* haifa-sched.c (rank_for_schedule): Revert 2002-05-02 change,\n+\tno longer needed.\n+\n 2002-05-03  Aldy Hernandez  <aldyh@redhat.com>\n \n         * config/rs6000/rs6000.c (altivec_expand_binop_builtin): Error out"}, {"sha": "6b3e3162e084cdac9549022a9e09185dba25d914", "filename": "gcc/haifa-sched.c", "status": "modified", "additions": 6, "deletions": 11, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f39865a3c995f73b925d243f78b85e293820cee/gcc%2Fhaifa-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f39865a3c995f73b925d243f78b85e293820cee/gcc%2Fhaifa-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhaifa-sched.c?ref=8f39865a3c995f73b925d243f78b85e293820cee", "patch": "@@ -852,7 +852,7 @@ rank_for_schedule (x, y)\n {\n   rtx tmp = *(const rtx *) y;\n   rtx tmp2 = *(const rtx *) x;\n-  rtx link, lsi;\n+  rtx link;\n   int tmp_class, tmp2_class, depend_count1, depend_count2;\n   int val, priority_val, weight_val, info_val;\n \n@@ -871,28 +871,23 @@ rank_for_schedule (x, y)\n     return info_val;\n \n   /* Compare insns based on their relation to the last-scheduled-insn.  */\n-  for (lsi = last_scheduled_insn;\n-       lsi && INSN_UID (lsi) >= old_max_uid;\n-       lsi = PREV_INSN (lsi))\n-    continue;\n-\n-  if (lsi)\n+  if (last_scheduled_insn)\n     {\n       /* Classify the instructions into three classes:\n          1) Data dependent on last schedule insn.\n          2) Anti/Output dependent on last scheduled insn.\n          3) Independent of last scheduled insn, or has latency of one.\n          Choose the insn from the highest numbered class if different.  */\n-      link = find_insn_list (tmp, INSN_DEPEND (lsi));\n-      if (link == 0 || insn_cost (lsi, link, tmp) == 1)\n+      link = find_insn_list (tmp, INSN_DEPEND (last_scheduled_insn));\n+      if (link == 0 || insn_cost (last_scheduled_insn, link, tmp) == 1)\n \ttmp_class = 3;\n       else if (REG_NOTE_KIND (link) == 0)\t/* Data dependence.  */\n \ttmp_class = 1;\n       else\n \ttmp_class = 2;\n \n-      link = find_insn_list (tmp2, INSN_DEPEND (lsi));\n-      if (link == 0 || insn_cost (lsi, link, tmp2) == 1)\n+      link = find_insn_list (tmp2, INSN_DEPEND (last_scheduled_insn));\n+      if (link == 0 || insn_cost (last_scheduled_insn, link, tmp2) == 1)\n \ttmp2_class = 3;\n       else if (REG_NOTE_KIND (link) == 0)\t/* Data dependence.  */\n \ttmp2_class = 1;"}]}