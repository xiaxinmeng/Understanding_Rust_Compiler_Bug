{"sha": "c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzA0ZDQwZGFlOGE0OTBlMjhkNGYwN2M0NmU1NzcxOWZiMGE0ZWFmNg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-01-03T11:05:24Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-01-03T11:05:24Z"}, "message": "re PR debug/88644 (Unexpected pub type info eliminated after r246973 (causes pubtypes-*.c to regress).)\n\n\tPR debug/88644\n\t* dwarf2out.c (modified_type_die): If type is equal to sizetype,\n\tchange it to qualified_type.\n\n\t* gcc.dg/debug/dwarf2/pr88644.c: New test.\n\t* gcc.dg/debug/dwarf2/pr80263.c: Remove darwin hack.\n\n2019-01-03  Iain Sandoe  <iain@sandoe.co.uk>\n\n\t* gcc.dg/pubtypes-2.c: Adjust expected pubtypes length.\n\t* gcc.dg/pubtypes-3.c: Likewise.\n\t* gcc.dg/pubtypes-4.c: Likewise.\n\nFrom-SVN: r267550", "tree": {"sha": "fb1fc31d3445b2773c646f450812c1f9d995ef8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb1fc31d3445b2773c646f450812c1f9d995ef8f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/comments", "author": null, "committer": null, "parents": [{"sha": "8ae4d4298d9460344c47687899d927ff3264a343", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ae4d4298d9460344c47687899d927ff3264a343", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ae4d4298d9460344c47687899d927ff3264a343"}], "stats": {"total": 35, "additions": 30, "deletions": 5}, "files": [{"sha": "4eec4b5e9872aa651968d1a8c8757b9592900f84", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "patch": "@@ -1,3 +1,9 @@\n+2019-01-03  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/88644\n+\t* dwarf2out.c (modified_type_die): If type is equal to sizetype,\n+\tchange it to qualified_type.\n+\n 2019-01-03  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* ipa-utils.c (scale_ipa_profile_for_fn): Break out from ..."}, {"sha": "8d9a3849fa4289e246a10a66252667dd4c6e0f75", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "patch": "@@ -13152,6 +13152,8 @@ modified_type_die (tree type, int cv_quals, bool reverse,\n \t       && TYPE_PRECISION (sizetype) == TYPE_PRECISION (size_type_node)\n \t       && TYPE_UNSIGNED (sizetype) == TYPE_UNSIGNED (size_type_node))\n \tqualified_type = size_type_node;\n+      if (type == sizetype)\n+\ttype = qualified_type;\n     }\n \n   /* If we do, then we can just use its DIE, if it exists.  */"}, {"sha": "768c109ce37f09625ba6e458db39775e2cedda75", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "patch": "@@ -1,3 +1,15 @@\n+2019-01-03  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/88644\n+\t* gcc.dg/debug/dwarf2/pr88644.c: New test.\n+\t* gcc.dg/debug/dwarf2/pr80263.c: Remove darwin hack.\n+\n+2019-01-03  Iain Sandoe  <iain@sandoe.co.uk>\n+\n+\t* gcc.dg/pubtypes-2.c: Adjust expected pubtypes length.\n+\t* gcc.dg/pubtypes-3.c: Likewise.\n+\t* gcc.dg/pubtypes-4.c: Likewise.\n+\n 2019-01-03  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/88636"}, {"sha": "57633b4f0ebe4a4d1d11839f35127d2cd176d4d7", "filename": "gcc/testsuite/gcc.dg/debug/dwarf2/pr80263.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fpr80263.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fpr80263.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fpr80263.c?ref=c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "patch": "@@ -1,8 +1,6 @@\n /* PR debug/80263 */\n /* { dg-do compile } */\n /* { dg-options \"-g -dA\" } */\n-/* Darwin emits pubnames/types by default - suppress this for the test. */\n-/* { dg-additional-options \"-gno-pubnames\" { target *-*-darwin* } }  */\n \n char array[1];\n "}, {"sha": "1b166277debb1fb444c67e1ebc9a2e7e1a72c57f", "filename": "gcc/testsuite/gcc.dg/debug/dwarf2/pr88644.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fpr88644.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fpr88644.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fpr88644.c?ref=c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "patch": "@@ -0,0 +1,7 @@\n+/* PR debug/88644 */\n+/* { dg-do compile } */\n+/* { dg-options \"-gdwarf-4 -dA -gpubnames\" } */\n+\n+char array[1];\n+\n+/* { dg-final { scan-assembler-not {\\msizetype} } } */"}, {"sha": "6669f3d3170d14afc74d7434e60875fd92253dec", "filename": "gcc/testsuite/gcc.dg/pubtypes-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2Fgcc.dg%2Fpubtypes-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2Fgcc.dg%2Fpubtypes-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpubtypes-2.c?ref=c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "patch": "@@ -2,7 +2,7 @@\n /* { dg-options \"-O0 -gdwarf-2 -dA\" } */\n /* { dg-skip-if \"Unmatchable assembly\" { mmix-*-* } } */\n /* { dg-final { scan-assembler \"__debug_pubtypes\" } } */\n-/* { dg-final { scan-assembler \"long+\\[ \\t\\]+0x13b+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+Pub Info Length\" } } */\n+/* { dg-final { scan-assembler \"long+\\[ \\t\\]+0x12e+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+Pub Info Length\" } } */\n /* { dg-final { scan-assembler \"used_struct\\\\\\\\0\\\"+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+external name\" } } */\n /* { dg-final { scan-assembler-not \"unused_struct\\\\\\\\0\\\"+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+external name\" } } */\n "}, {"sha": "345e4edaba678574f533bf8bf2b3507ad5d4a418", "filename": "gcc/testsuite/gcc.dg/pubtypes-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2Fgcc.dg%2Fpubtypes-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2Fgcc.dg%2Fpubtypes-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpubtypes-3.c?ref=c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "patch": "@@ -2,7 +2,7 @@\n /* { dg-options \"-O0 -gdwarf-2 -dA\" } */\n /* { dg-skip-if \"Unmatchable assembly\" { mmix-*-* } } */\n /* { dg-final { scan-assembler \"__debug_pubtypes\" } } */\n-/* { dg-final { scan-assembler \"long+\\[ \\t\\]+0x13b+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+Pub Info Length\" } } */\n+/* { dg-final { scan-assembler \"long+\\[ \\t\\]+0x12e+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+Pub Info Length\" } } */\n /* { dg-final { scan-assembler \"used_struct\\\\\\\\0\\\"+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+external name\" } } */\n /* { dg-final { scan-assembler-not \"unused_struct\\\\\\\\0\\\"+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+external name\" } } */\n /* { dg-final { scan-assembler-not \"\\\"list_name_type\\\\\\\\0\\\"+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+external name\" } } */"}, {"sha": "da2f9b02ff435bad0aaaf9a1e215fdcd7e469c17", "filename": "gcc/testsuite/gcc.dg/pubtypes-4.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2Fgcc.dg%2Fpubtypes-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04d40dae8a490e28d4f07c46e57719fb0a4eaf6/gcc%2Ftestsuite%2Fgcc.dg%2Fpubtypes-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpubtypes-4.c?ref=c04d40dae8a490e28d4f07c46e57719fb0a4eaf6", "patch": "@@ -2,7 +2,7 @@\n /* { dg-options \"-O0 -gdwarf-2 -dA\" } */\n /* { dg-skip-if \"Unmatchable assembly\" { mmix-*-* } } */\n /* { dg-final { scan-assembler \"__debug_pubtypes\" } } */\n-/* { dg-final { scan-assembler \"long+\\[ \\t\\]+0x172+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+Pub Info Length\" } } */\n+/* { dg-final { scan-assembler \"long+\\[ \\t\\]+0x165+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+Pub Info Length\" } } */\n /* { dg-final { scan-assembler \"used_struct\\\\\\\\0\\\"+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+external name\" } } */\n /* { dg-final { scan-assembler-not \"unused_struct\\\\\\\\0\\\"+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+external name\" } } */\n /* { dg-final { scan-assembler \"\\\"list_name_type\\\\\\\\0\\\"+\\[ \\t\\]+\\[#;]+\\[ \\t\\]+external name\" } } */"}]}