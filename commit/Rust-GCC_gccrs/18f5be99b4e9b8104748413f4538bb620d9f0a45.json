{"sha": "18f5be99b4e9b8104748413f4538bb620d9f0a45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MThmNWJlOTliNGU5YjgxMDQ3NDg0MTNmNDUzOGJiNjIwZDlmMGE0NQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-02-03T20:01:59Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-02-03T20:01:59Z"}, "message": "re PR c++/13925 (Bug while befriending specializations)\n\n\tPR c++/13925\n\t* decl.c (start_function): Do not call pushdecl for any\n\tinstantiation or specialization of a primary template.\n\n\tPR c++/13925\n\t* g++.dg/template/lookup5.C: New test.\n\nFrom-SVN: r77187", "tree": {"sha": "e5c58099c4f700145cfd88375f09a790ad2b3020", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5c58099c4f700145cfd88375f09a790ad2b3020"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/18f5be99b4e9b8104748413f4538bb620d9f0a45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18f5be99b4e9b8104748413f4538bb620d9f0a45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18f5be99b4e9b8104748413f4538bb620d9f0a45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18f5be99b4e9b8104748413f4538bb620d9f0a45/comments", "author": null, "committer": null, "parents": [{"sha": "4bfb8bbaf6294daa459f1f0d8216796001998afd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bfb8bbaf6294daa459f1f0d8216796001998afd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4bfb8bbaf6294daa459f1f0d8216796001998afd"}], "stats": {"total": 33, "additions": 31, "deletions": 2}, "files": [{"sha": "47fbb965a2e39a37093db296cdb012bcc44f1e55", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18f5be99b4e9b8104748413f4538bb620d9f0a45/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18f5be99b4e9b8104748413f4538bb620d9f0a45/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=18f5be99b4e9b8104748413f4538bb620d9f0a45", "patch": "@@ -1,3 +1,9 @@\n+2004-02-03  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/13925\n+\t* decl.c (start_function): Do not call pushdecl for any\n+\tinstantiation or specialization of a primary template.\n+\n 2004-02-03  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/13950"}, {"sha": "a70a2fa1b82b055ae4a8fbda80e44e2ecb6fcc79", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18f5be99b4e9b8104748413f4538bb620d9f0a45/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18f5be99b4e9b8104748413f4538bb620d9f0a45/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=18f5be99b4e9b8104748413f4538bb620d9f0a45", "patch": "@@ -10272,8 +10272,9 @@ start_function (tree declspecs, tree declarator, tree attrs, int flags)\n   if (!processing_template_decl && !(flags & SF_PRE_PARSED))\n     {\n       /* A specialization is not used to guide overload resolution.  */\n-      if (!DECL_TEMPLATE_SPECIALIZATION (decl1)\n-\t  && ! DECL_FUNCTION_MEMBER_P (decl1))\n+      if (!DECL_FUNCTION_MEMBER_P (decl1)\n+\t  && !(DECL_USE_TEMPLATE (decl1) && \n+\t       PRIMARY_TEMPLATE_P (DECL_TI_TEMPLATE (decl1))))\n \t{\n \t  tree olddecl = pushdecl (decl1);\n "}, {"sha": "f31c5c53007b6187aaafad5b8b991c0829c581c8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18f5be99b4e9b8104748413f4538bb620d9f0a45/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18f5be99b4e9b8104748413f4538bb620d9f0a45/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=18f5be99b4e9b8104748413f4538bb620d9f0a45", "patch": "@@ -1,3 +1,8 @@\n+2004-02-03  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/13925\n+\t* g++.dg/template/lookup5.C: New test.\n+\n 2004-02-03  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/13950"}, {"sha": "022202a7158c3d4e35fc3bc060957714d1a2cc94", "filename": "gcc/testsuite/g++.dg/template/lookup5.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18f5be99b4e9b8104748413f4538bb620d9f0a45/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Flookup5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18f5be99b4e9b8104748413f4538bb620d9f0a45/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Flookup5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Flookup5.C?ref=18f5be99b4e9b8104748413f4538bb620d9f0a45", "patch": "@@ -0,0 +1,17 @@\n+// PR c++/13925\n+\n+namespace N {\n+  template <class T> void f(T);\n+\n+  namespace M {\n+    class A {\n+      friend void f<int>(int);\n+    };\n+  }\n+\n+  template <class T> void f(T) {}\n+  template <> void f<int>(int )\n+  { \n+    f<long>(0);\n+  }\n+}"}]}