{"sha": "b5a54c037a966cd7dd64ccc972e75d678f8dea00", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjVhNTRjMDM3YTk2NmNkN2RkNjRjY2M5NzJlNzVkNjc4ZjhkZWEwMA==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2010-12-20T20:09:24Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2010-12-20T20:09:24Z"}, "message": "linux.h (OPTION_GLIBC): Define differently if SINGLE_LIBC.\n\n\t* config/alpha/linux.h (OPTION_GLIBC): Define differently if\n\tSINGLE_LIBC.\n\t* config/linux.h (OPTION_GLIBC, OPTION_UCLIBC, OPTION_BIONIC):\n\tDefine differently if SINGLE_LIBC.\n\t* config/rs6000/linux.h (OPTION_GLIBC): Define differently if\n\tSINGLE_LIBC.\n\t* config/rs6000/linux64.h (OPTION_GLIBC): Define differently if\n\tSINGLE_LIBC.\n\t* config.gcc (*-*-linux* | frv-*-*linux* | *-*-kfreebsd*-gnu |\n\t*-*-knetbsd*-gnu | *-*-gnu* | *-*-kopensolaris*-gnu): Define\n\tSINGLE_LIBC instead of OPTION_GLIBC.\n\t(*-*-uclinux*): Define DEFAULT_LIBC and SINGLE_LIBC.\n\t(bfin*-uclinux*, moxie-*-uclinux*, m68k-*-uclinux*): Don't define\n\tDEFAULT_LIBC or use linux.opt.\n\nFrom-SVN: r168094", "tree": {"sha": "a6e8e8f100327d1539de9ab12a543692b410a252", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a6e8e8f100327d1539de9ab12a543692b410a252"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b5a54c037a966cd7dd64ccc972e75d678f8dea00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5a54c037a966cd7dd64ccc972e75d678f8dea00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5a54c037a966cd7dd64ccc972e75d678f8dea00", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5a54c037a966cd7dd64ccc972e75d678f8dea00/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5385594074b33ef05ad5eb5a02b902b7be02f529", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5385594074b33ef05ad5eb5a02b902b7be02f529", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5385594074b33ef05ad5eb5a02b902b7be02f529"}], "stats": {"total": 45, "additions": 38, "deletions": 7}, "files": [{"sha": "c12643fb128161b5810275d6c782cddba636696b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b5a54c037a966cd7dd64ccc972e75d678f8dea00", "patch": "@@ -1,3 +1,20 @@\n+2010-12-20  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* config/alpha/linux.h (OPTION_GLIBC): Define differently if\n+\tSINGLE_LIBC.\n+\t* config/linux.h (OPTION_GLIBC, OPTION_UCLIBC, OPTION_BIONIC):\n+\tDefine differently if SINGLE_LIBC.\n+\t* config/rs6000/linux.h (OPTION_GLIBC): Define differently if\n+\tSINGLE_LIBC.\n+\t* config/rs6000/linux64.h (OPTION_GLIBC): Define differently if\n+\tSINGLE_LIBC.\n+\t* config.gcc (*-*-linux* | frv-*-*linux* | *-*-kfreebsd*-gnu |\n+\t*-*-knetbsd*-gnu | *-*-gnu* | *-*-kopensolaris*-gnu): Define\n+\tSINGLE_LIBC instead of OPTION_GLIBC.\n+\t(*-*-uclinux*): Define DEFAULT_LIBC and SINGLE_LIBC.\n+\t(bfin*-uclinux*, moxie-*-uclinux*, m68k-*-uclinux*): Don't define\n+\tDEFAULT_LIBC or use linux.opt.\n+\n 2010-12-20  Richard Henderson  <rth@redhat.com>\n \n \t* config/mn10300/mn10300.c (mn10300_legitimize_pic_address): Generate"}, {"sha": "4db688508f15256ffa77cd9907cb35ce7d3ba536", "filename": "gcc/config.gcc", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=b5a54c037a966cd7dd64ccc972e75d678f8dea00", "patch": "@@ -562,7 +562,7 @@ case ${target} in\n     *linux*)\n       extra_options=\"$extra_options linux.opt\";;\n     *)\n-      tm_defines=\"$tm_defines OPTION_GLIBC=1\";;\n+      tm_defines=\"$tm_defines SINGLE_LIBC\";;\n   esac\n   case $target in\n     *-*-*android*)\n@@ -657,6 +657,7 @@ case ${target} in\n   ;;\n *-*-uclinux*)\n   use_gcc_stdint=wrap\n+  tm_defines=\"$tm_defines DEFAULT_LIBC=LIBC_UCLIBC SINGLE_LIBC\"\n   ;;\n *-*-solaris2*)\n   extra_options=\"${extra_options} sol2.opt\"\n@@ -909,8 +910,6 @@ bfin*-elf*)\n bfin*-uclinux*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h bfin/elf.h linux.h glibc-stdint.h bfin/uclinux.h\"\n \ttmake_file=bfin/t-bfin-uclinux\n-\ttm_defines=\"${tm_defines} DEFAULT_LIBC=LIBC_UCLIBC\"\n-\textra_options=\"${extra_options} linux.opt\"\n \tuse_collect2=no\n \t;;\n bfin*-linux-uclibc*)\n@@ -992,8 +991,6 @@ moxie-*-uclinux*)\n \ttm_file=\"dbxelf.h elfos.h ${tm_file} linux.h glibc-stdint.h moxie/uclinux.h\"\n \textra_parts=\"crti.o crtn.o crtbegin.o crtend.o\"\n \ttmake_file=\"${tmake_file} moxie/t-moxie moxie/t-moxie-softfp soft-fp/t-softfp\"\n-\ttm_defines=\"${tm_defines} DEFAULT_LIBC=LIBC_UCLIBC\"\n-\textra_options=\"${extra_options} linux.opt\"\n \t;;\n moxie-*-rtems*)\n \ttmake_file=\"${tmake_file} moxie/t-moxie moxie/t-moxie-softfp soft-fp/t-softfp t-rtems\"\n@@ -1729,8 +1726,7 @@ m68k-*-uclinux*)\t\t# Motorola m68k/ColdFire running uClinux\n \tdefault_m68k_cpu=68020\n \tdefault_cf_cpu=5206\n \ttm_file=\"${tm_file} dbxelf.h elfos.h linux.h glibc-stdint.h flat.h m68k/linux.h m68k/uclinux.h ./sysroot-suffix.h\"\n- \ttm_defines=\"${tm_defines} MOTOROLA=1 DEFAULT_LIBC=LIBC_UCLIBC\"\n-\textra_options=\"${extra_options} linux.opt\"\n+ \ttm_defines=\"${tm_defines} MOTOROLA=1\"\n \ttmake_file=\"m68k/t-floatlib m68k/t-uclinux m68k/t-mlibs\"\n \t;;\n m68k-*-linux*)\t\t# Motorola m68k's running GNU/Linux"}, {"sha": "a1881c8168bf1251c56343dda4f3b98797305000", "filename": "gcc/config/alpha/linux.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2Fconfig%2Falpha%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2Fconfig%2Falpha%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Flinux.h?ref=b5a54c037a966cd7dd64ccc972e75d678f8dea00", "patch": "@@ -61,7 +61,11 @@ along with GCC; see the file COPYING3.  If not see\n #undef WCHAR_TYPE\n #define WCHAR_TYPE \"int\"\n \n+#ifdef SINGLE_LIBC\n+#define OPTION_GLIBC  (DEFAULT_LIBC == LIBC_GLIBC)\n+#else\n #define OPTION_GLIBC  (linux_libc == LIBC_GLIBC)\n+#endif\n \n /* Determine whether the entire c99 runtime is present in the\n    runtime library.  */"}, {"sha": "d53468e4e2e5b47bf0f126531e5bba92099abb0e", "filename": "gcc/config/linux.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2Fconfig%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2Fconfig%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Flinux.h?ref=b5a54c037a966cd7dd64ccc972e75d678f8dea00", "patch": "@@ -80,9 +80,15 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #define LIB_SPEC LINUX_TARGET_LIB_SPEC\n \n /* C libraries supported on Linux.  */\n+#ifdef SINGLE_LIBC\n+#define OPTION_GLIBC  (DEFAULT_LIBC == LIBC_GLIBC)\n+#define OPTION_UCLIBC (DEFAULT_LIBC == LIBC_UCLIBC)\n+#define OPTION_BIONIC (DEFAULT_LIBC == LIBC_BIONIC)\n+#else\n #define OPTION_GLIBC  (linux_libc == LIBC_GLIBC)\n #define OPTION_UCLIBC (linux_libc == LIBC_UCLIBC)\n #define OPTION_BIONIC (linux_libc == LIBC_BIONIC)\n+#endif\n \n #define LINUX_TARGET_OS_CPP_BUILTINS()\t\t\t\t\\\n     do {\t\t\t\t\t\t\t\\"}, {"sha": "ed1d09ec14d5b58456daefd9a8a8acd1d819d1bf", "filename": "gcc/config/rs6000/linux.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2Fconfig%2Frs6000%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2Fconfig%2Frs6000%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux.h?ref=b5a54c037a966cd7dd64ccc972e75d678f8dea00", "patch": "@@ -27,7 +27,11 @@\n /* We use glibc _mcount for profiling.  */\n #define NO_PROFILE_COUNTERS 1\n \n+#ifdef SINGLE_LIBC\n+#define OPTION_GLIBC  (DEFAULT_LIBC == LIBC_GLIBC)\n+#else\n #define OPTION_GLIBC  (linux_libc == LIBC_GLIBC)\n+#endif\n \n /* glibc has float and long double forms of math functions.  */\n #undef  TARGET_C99_FUNCTIONS"}, {"sha": "06e08a108c61b6353a9327bebf9de1a5d5cac258", "filename": "gcc/config/rs6000/linux64.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2Fconfig%2Frs6000%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5a54c037a966cd7dd64ccc972e75d678f8dea00/gcc%2Fconfig%2Frs6000%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux64.h?ref=b5a54c037a966cd7dd64ccc972e75d678f8dea00", "patch": "@@ -308,7 +308,11 @@ extern int dot_symbols;\n    process.  */\n #define OS_MISSING_POWERPC64 !TARGET_64BIT\n \n+#ifdef SINGLE_LIBC\n+#define OPTION_GLIBC  (DEFAULT_LIBC == LIBC_GLIBC)\n+#else\n #define OPTION_GLIBC  (linux_libc == LIBC_GLIBC)\n+#endif\n \n /* glibc has float and long double forms of math functions.  */\n #undef  TARGET_C99_FUNCTIONS"}]}