{"sha": "b60cb710ba05d240c6f8a7ef0df41976797c82d0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjYwY2I3MTBiYTA1ZDI0MGM2ZjhhN2VmMGRmNDE5NzY3OTdjODJkMA==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel1@de.ibm.com", "date": "2007-05-04T16:23:08Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2007-05-04T16:23:08Z"}, "message": "s390.md (\"fix_trunc<mode>di2\", [...]): Expander removed.\n\n2007-05-04  Andreas Krebbel  <krebbel1@de.ibm.com>\n\n\t* config/s390/s390.md (\"fix_trunc<mode>di2\", \"fix_trunc<mode>si2\"):\n\tExpander removed.\n\t(\"fix_trunc<DSF:mode><GPR:mode>2\"): Expander added.\n\nFrom-SVN: r124433", "tree": {"sha": "256cf723ef6d5c1a5048b32c58cd0c37dfb61dc8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/256cf723ef6d5c1a5048b32c58cd0c37dfb61dc8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b60cb710ba05d240c6f8a7ef0df41976797c82d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b60cb710ba05d240c6f8a7ef0df41976797c82d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b60cb710ba05d240c6f8a7ef0df41976797c82d0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b60cb710ba05d240c6f8a7ef0df41976797c82d0/comments", "author": null, "committer": null, "parents": [{"sha": "b86dee194c4e0c1d27c6a32bc2d7c1a22c1cf982", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b86dee194c4e0c1d27c6a32bc2d7c1a22c1cf982", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b86dee194c4e0c1d27c6a32bc2d7c1a22c1cf982"}], "stats": {"total": 32, "additions": 12, "deletions": 20}, "files": [{"sha": "86cc306e240451ab61388ca969c84589c5f76c43", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b60cb710ba05d240c6f8a7ef0df41976797c82d0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b60cb710ba05d240c6f8a7ef0df41976797c82d0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b60cb710ba05d240c6f8a7ef0df41976797c82d0", "patch": "@@ -1,3 +1,9 @@\n+2007-05-04  Andreas Krebbel  <krebbel1@de.ibm.com>\n+\n+\t* config/s390/s390.md (\"fix_trunc<mode>di2\", \"fix_trunc<mode>si2\"):\n+\tExpander removed.\n+\t(\"fix_trunc<DSF:mode><GPR:mode>2\"): Expander added.\n+\n 2007-05-04  Bob Wilson  <bob.wilson@acm.org>\n \t\n \t* config/xtensa/xtensa.md (adddi3, adddi_carry): Delete."}, {"sha": "c4ce3f46d68e1180ba1b98d4fba0e9347ff26b01", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 6, "deletions": 20, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b60cb710ba05d240c6f8a7ef0df41976797c82d0/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b60cb710ba05d240c6f8a7ef0df41976797c82d0/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=b60cb710ba05d240c6f8a7ef0df41976797c82d0", "patch": "@@ -3269,14 +3269,13 @@\n   DONE;\n })\n \n-(define_expand \"fix_trunc<mode>di2\"\n-  [(set (match_operand:DI 0 \"register_operand\" \"\")\n-        (fix:DI (match_operand:DSF 1 \"nonimmediate_operand\" \"\")))]\n-  \"TARGET_64BIT && TARGET_HARD_FLOAT\"\n+(define_expand \"fix_trunc<DSF:mode><GPR:mode>2\"\n+  [(set (match_operand:GPR 0 \"register_operand\" \"\")\n+        (fix:GPR (match_operand:DSF 1 \"register_operand\" \"\")))]\n+  \"TARGET_HARD_FLOAT\"\n {\n-  operands[1] = force_reg (<MODE>mode, operands[1]);\n-  emit_insn (gen_fix_trunc<mode>di2_bfp (operands[0], operands[1],\n-      GEN_INT (5)));\n+  emit_insn (gen_fix_trunc<DSF:mode><GPR:mode>2_bfp (operands[0], operands[1],\n+             GEN_INT (5)));\n   DONE;\n })\n \n@@ -3331,19 +3330,6 @@\n   \"TARGET_HARD_FLOAT\"\n   \"\")\n \n-;\n-; fix_trunc(df|sf)si2 instruction pattern(s).\n-;\n-\n-(define_expand \"fix_trunc<mode>si2\"\n-  [(set (match_operand:SI 0 \"register_operand\" \"\")\n-        (fix:SI (match_operand:DSF 1 \"nonimmediate_operand\" \"\")))]\n-  \"TARGET_HARD_FLOAT\"\n-{\n-  operands[1] = force_reg (<MODE>mode, operands[1]);\n-  emit_insn (gen_fix_trunc<mode>si2_bfp (operands[0], operands[1], GEN_INT (5)));\n-  DONE;\n-})\n \n ;\n ; float(si|di)(tf|df|sf|td|dd)2 instruction pattern(s)."}]}