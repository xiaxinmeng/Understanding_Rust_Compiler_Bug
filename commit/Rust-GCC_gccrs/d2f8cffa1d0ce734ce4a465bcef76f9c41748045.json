{"sha": "d2f8cffa1d0ce734ce4a465bcef76f9c41748045", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDJmOGNmZmExZDBjZTczNGNlNGE0NjViY2VmNzZmOWM0MTc0ODA0NQ==", "commit": {"author": {"name": "Dave Brolley", "email": "brolley@cygnus.com", "date": "1998-06-23T13:51:33Z"}, "committer": {"name": "Dave Brolley", "email": "brolley@gcc.gnu.org", "date": "1998-06-23T13:51:33Z"}, "message": "cpplib.c (do_line): Typo broke #line directive.\n\nTue Jun 23 16:44:21 1998  Dave Brolley  <brolley@cygnus.com>\n\t* cpplib.c (do_line): Typo broke #line directive.\n\t(cpp_message_from_errno): New function.\n\t(cpp_error_from_errno): Call cpp_message_from_errno.\n\t* cpplib.h (cpp_message_from_errno): New function.\n\nFrom-SVN: r20675", "tree": {"sha": "5b68b5a2978318a19aff6d85edc440433c853add", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5b68b5a2978318a19aff6d85edc440433c853add"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d2f8cffa1d0ce734ce4a465bcef76f9c41748045", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2f8cffa1d0ce734ce4a465bcef76f9c41748045", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2f8cffa1d0ce734ce4a465bcef76f9c41748045", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2f8cffa1d0ce734ce4a465bcef76f9c41748045/comments", "author": null, "committer": null, "parents": [{"sha": "e70eea31dc0e7bb2eaf3c813e6d3a530a14de758", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e70eea31dc0e7bb2eaf3c813e6d3a530a14de758", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e70eea31dc0e7bb2eaf3c813e6d3a530a14de758"}], "stats": {"total": 27, "additions": 22, "deletions": 5}, "files": [{"sha": "928d79116069471095ced8b47caa3b6cea6b9b8c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2f8cffa1d0ce734ce4a465bcef76f9c41748045/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2f8cffa1d0ce734ce4a465bcef76f9c41748045/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d2f8cffa1d0ce734ce4a465bcef76f9c41748045", "patch": "@@ -1,3 +1,10 @@\n+Tue Jun 23 16:44:21 1998  Dave Brolley  <brolley@cygnus.com>\n+\n+\t* cpplib.c (do_line): Typo broke #line directive.\n+\t(cpp_message_from_errno): New function.\n+\t(cpp_error_from_errno): Call cpp_message_from_errno.\n+\t* cpplib.h (cpp_message_from_errno): New function.\n+\n Tue Jun 23 13:38:18 EDT 1998  Andrew MacLeod  <amacleod@cygnus.com>\n \n \t* libgcc2.c (__get_eh_table_version, __get_eh_table_language): New"}, {"sha": "15cbf58ab79be528e8ee950753605765830fb0d4", "filename": "gcc/cpplib.c", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2f8cffa1d0ce734ce4a465bcef76f9c41748045/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2f8cffa1d0ce734ce4a465bcef76f9c41748045/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=d2f8cffa1d0ce734ce4a465bcef76f9c41748045", "patch": "@@ -3752,18 +3752,18 @@ do_line (pfile, keyword, unused1, unused2)\n       }\n       if (*p == '1')\n \tfile_change = enter_file;\n-      else if (*p == 2)\n+      else if (*p == '2')\n \tfile_change = leave_file;\n-      else if (*p == 3)\n+      else if (*p == '3')\n \tip->system_header_p = 1;\n-      else /* if (*p == 4) */\n+      else /* if (*p == '4') */\n \tip->system_header_p = 2;\n \n       CPP_SET_WRITTEN (pfile, num_start);\n       token = get_directive_token (pfile);\n       p = pfile->token_buffer + num_start;\n       if (token == CPP_NUMBER && p[1] == '\\0' && (*p == '3' || *p== '4')) {\n-\tip->system_header_p = *p == 3 ? 1 : 2;\n+\tip->system_header_p = *p == '3' ? 1 : 2;\n \ttoken = get_directive_token (pfile);\n       }\n       if (token != CPP_VSPACE) {\n@@ -7648,6 +7648,15 @@ void\n cpp_error_from_errno (pfile, name)\n      cpp_reader *pfile;\n      const char *name;\n+{\n+  cpp_message_from_errno (pfile, 1, name);\n+}\n+\n+void\n+cpp_message_from_errno (pfile, is_error, name)\n+     cpp_reader *pfile;\n+     int is_error;\n+     const char *name;\n {\n   int e = errno;\n   cpp_buffer *ip = cpp_file_buffer (pfile);\n@@ -7657,7 +7666,7 @@ cpp_error_from_errno (pfile, name)\n   if (ip != NULL)\n     cpp_file_line_for_message (pfile, ip->nominal_fname, ip->lineno, -1);\n \n-  cpp_message (pfile, 1, \"%s: %s\", name, my_strerror (e));\n+  cpp_message (pfile, is_error, \"%s: %s\", name, my_strerror (e), \"\");\n }\n \n void"}, {"sha": "65cb5daff916a2879e8299898e1a6c8d8a6646e5", "filename": "gcc/cpplib.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2f8cffa1d0ce734ce4a465bcef76f9c41748045/gcc%2Fcpplib.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2f8cffa1d0ce734ce4a465bcef76f9c41748045/gcc%2Fcpplib.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.h?ref=d2f8cffa1d0ce734ce4a465bcef76f9c41748045", "patch": "@@ -658,6 +658,7 @@ extern void cpp_pedwarn_with_line PVPROTO ((cpp_reader *, int, int, const char *\n   ATTRIBUTE_PRINTF_4;\n extern void cpp_pedwarn_with_file_and_line PVPROTO ((cpp_reader *, char *, int, const char *, ...))\n   ATTRIBUTE_PRINTF_4;\n+extern void cpp_message_from_errno PROTO ((cpp_reader *, int, const char *));\n extern void cpp_error_from_errno PROTO ((cpp_reader *, const char *));\n extern void cpp_perror_with_name PROTO ((cpp_reader *, const char *));\n extern void v_cpp_message PROTO ((cpp_reader *, int, const char *, va_list));"}]}