{"sha": "e31fc6a53150ed4b22314913c5768dae0895263c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTMxZmM2YTUzMTUwZWQ0YjIyMzE0OTEzYzU3NjhkYWUwODk1MjYzYw==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely.gcc@gmail.com", "date": "2007-09-14T20:17:29Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2007-09-14T20:17:29Z"}, "message": "boost_shared_ptr.h: (__weak_ptr::lock()): Add missing template argument.\n\n2007-09-14  Jonathan Wakely  <jwakely.gcc@gmail.com>\n\n\t* include/tr1_impl/boost_shared_ptr.h: (__weak_ptr::lock()): Add\n\tmissing template argument.\n\t* testsuite/tr1/2_general_utilities/shared_ptr/requirements/\n\texplicit_instantiation/2.cc: New.\n\t* testsuite/tr1/2_general_utilities/weak_ptr/requirements/\n\texplicit_instantiation/2.cc: New.\n\nFrom-SVN: r128503", "tree": {"sha": "261e998f475e3ea876b13cc32723848f889a6403", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/261e998f475e3ea876b13cc32723848f889a6403"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e31fc6a53150ed4b22314913c5768dae0895263c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e31fc6a53150ed4b22314913c5768dae0895263c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e31fc6a53150ed4b22314913c5768dae0895263c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e31fc6a53150ed4b22314913c5768dae0895263c/comments", "author": null, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "21da84bd5e7c0b1f2bdfa28429b066a098307f44", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21da84bd5e7c0b1f2bdfa28429b066a098307f44", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21da84bd5e7c0b1f2bdfa28429b066a098307f44"}], "stats": {"total": 80, "additions": 79, "deletions": 1}, "files": [{"sha": "ef0c0e12e8ad6b08ed5aff64a5c842f89ae0d17c", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e31fc6a53150ed4b22314913c5768dae0895263c/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e31fc6a53150ed4b22314913c5768dae0895263c/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=e31fc6a53150ed4b22314913c5768dae0895263c", "patch": "@@ -1,3 +1,12 @@\n+2007-09-10  Jonathan Wakely  <jwakely.gcc@gmail.com>\n+\n+\t* include/tr1_impl/boost_shared_ptr.h: (__weak_ptr::lock()): Add\n+\tmissing template argument.\n+\t* testsuite/tr1/2_general_utilities/shared_ptr/requirements/\n+\texplicit_instantiation/2.cc: New.\n+\t* testsuite/tr1/2_general_utilities/weak_ptr/requirements/\n+\texplicit_instantiation/2.cc: New.\n+\n 2007-09-14  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* testsuite/17_intro/headers/all_pedantic_errors.cc: New."}, {"sha": "e3d8827b65d5cc0a5573c20ae60f4fa869c52b69", "filename": "libstdc++-v3/include/tr1_impl/boost_shared_ptr.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e31fc6a53150ed4b22314913c5768dae0895263c/libstdc%2B%2B-v3%2Finclude%2Ftr1_impl%2Fboost_shared_ptr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e31fc6a53150ed4b22314913c5768dae0895263c/libstdc%2B%2B-v3%2Finclude%2Ftr1_impl%2Fboost_shared_ptr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Ftr1_impl%2Fboost_shared_ptr.h?ref=e31fc6a53150ed4b22314913c5768dae0895263c", "patch": "@@ -856,7 +856,7 @@ _GLIBCXX_BEGIN_NAMESPACE_TR1\n \t    // Q: How can we get here?\n \t    // A: Another thread may have invalidated r after the\n \t    //    use_count test above.\n-\t    return __shared_ptr<element_type>();\n+\t    return __shared_ptr<element_type, _Lp>();\n \t  }\n \t\n #else"}, {"sha": "0d4839c9871203d8f3750958612929cd0737e212", "filename": "libstdc++-v3/testsuite/tr1/2_general_utilities/shared_ptr/requirements/explicit_instantiation/2.cc", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e31fc6a53150ed4b22314913c5768dae0895263c/libstdc%2B%2B-v3%2Ftestsuite%2Ftr1%2F2_general_utilities%2Fshared_ptr%2Frequirements%2Fexplicit_instantiation%2F2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e31fc6a53150ed4b22314913c5768dae0895263c/libstdc%2B%2B-v3%2Ftestsuite%2Ftr1%2F2_general_utilities%2Fshared_ptr%2Frequirements%2Fexplicit_instantiation%2F2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Ftr1%2F2_general_utilities%2Fshared_ptr%2Frequirements%2Fexplicit_instantiation%2F2.cc?ref=e31fc6a53150ed4b22314913c5768dae0895263c", "patch": "@@ -0,0 +1,34 @@\n+// Copyright (C) 2007 Free Software Foundation\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 2, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING.  If not, write to the Free\n+// Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,\n+// USA.\n+\n+// TR1 2.2.2 Template class shared_ptr [tr.util.smartptr.shared]\n+\n+#include <tr1/memory>\n+#include <testsuite_tr1.h>\n+\n+// { dg-do compile }\n+\n+// Check the _S_single lock policy can be instantiated. For a thread-enabled\n+// library this checks the templates can be instantiated for non-default\n+// lock policy, for a single-threaded lib this is redundant but harmless.\n+using namespace __gnu_test;\n+using std::tr1::__shared_ptr;\n+using std::tr1::_S_single;\n+template class __shared_ptr<int, _S_single>;\n+template class __shared_ptr<ClassType, _S_single>;\n+template class __shared_ptr<IncompleteClass, _S_single>;"}, {"sha": "567f3489c2395ea77509b4d406e97b208d1a4976", "filename": "libstdc++-v3/testsuite/tr1/2_general_utilities/weak_ptr/requirements/explicit_instantiation/2.cc", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e31fc6a53150ed4b22314913c5768dae0895263c/libstdc%2B%2B-v3%2Ftestsuite%2Ftr1%2F2_general_utilities%2Fweak_ptr%2Frequirements%2Fexplicit_instantiation%2F2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e31fc6a53150ed4b22314913c5768dae0895263c/libstdc%2B%2B-v3%2Ftestsuite%2Ftr1%2F2_general_utilities%2Fweak_ptr%2Frequirements%2Fexplicit_instantiation%2F2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Ftr1%2F2_general_utilities%2Fweak_ptr%2Frequirements%2Fexplicit_instantiation%2F2.cc?ref=e31fc6a53150ed4b22314913c5768dae0895263c", "patch": "@@ -0,0 +1,35 @@\n+// Copyright (C) 2007 Free Software Foundation\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 2, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING.  If not, write to the Free\n+// Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,\n+// USA.\n+\n+// TR1 2.2.4 Template class weak_ptr [tr.util.smartptr.weak]\n+\n+#include <tr1/memory>\n+#include <testsuite_tr1.h>\n+\n+// { dg-do compile }\n+\n+// Check the _S_single lock policy can be instantiated. For a thread-enabled\n+// library this checks the templates can be instantiated for non-default\n+// lock policy, for a single-threaded lib this is redundant but harmless.\n+using namespace __gnu_test;\n+using std::tr1::__weak_ptr;\n+using std::tr1::_S_single;\n+template class __weak_ptr<int, _S_single>;\n+template class __weak_ptr<void, _S_single>;\n+template class __weak_ptr<ClassType, _S_single>;\n+template class __weak_ptr<IncompleteClass, _S_single>;"}]}