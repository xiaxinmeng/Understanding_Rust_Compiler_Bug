{"sha": "916ec36d0a3ef3fe44c1657746922a5f18b60326", "node_id": "C_kwDOANBUbNoAKDkxNmVjMzZkMGEzZWYzZmU0NGMxNjU3NzQ2OTIyYTVmMThiNjAzMjY", "commit": {"author": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2021-12-27T15:01:42Z"}, "committer": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2021-12-27T15:01:42Z"}, "message": "c++: Add testcase for SFINAE w/ p[N] and incomplete type [PR101239]\n\nThe r12-6123 fix for SFINAE with p+N and incomplete type also fixed\nthe analogous issue with p[N].\n\n\tPR c++/101239\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/template/sfinae32a.C: New test.", "tree": {"sha": "ac70f29d20a40cf5f28ec81242c8e0d6fdefb6e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ac70f29d20a40cf5f28ec81242c8e0d6fdefb6e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/916ec36d0a3ef3fe44c1657746922a5f18b60326", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/916ec36d0a3ef3fe44c1657746922a5f18b60326", "html_url": "https://github.com/Rust-GCC/gccrs/commit/916ec36d0a3ef3fe44c1657746922a5f18b60326", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/916ec36d0a3ef3fe44c1657746922a5f18b60326/comments", "author": null, "committer": null, "parents": [{"sha": "88cdcb5c18d73bfc9960d774c678f0e8103b8031", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88cdcb5c18d73bfc9960d774c678f0e8103b8031", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88cdcb5c18d73bfc9960d774c678f0e8103b8031"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "e9dbe88be4f8341db40e76b4ddfd0567977ecc9b", "filename": "gcc/testsuite/g++.dg/template/sfinae32a.C", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/916ec36d0a3ef3fe44c1657746922a5f18b60326/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fsfinae32a.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/916ec36d0a3ef3fe44c1657746922a5f18b60326/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fsfinae32a.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fsfinae32a.C?ref=916ec36d0a3ef3fe44c1657746922a5f18b60326", "patch": "@@ -0,0 +1,24 @@\n+// PR c++/101239\n+// { dg-do compile { target c++11 } }\n+\n+template<class T, int N> auto f(T* p) -> decltype(p[N]);\n+template<class T, int N> auto f(T* p) -> decltype(p[-N]);\n+template<class T, int N> auto f(T* p) -> decltype(N[p]);\n+template<class T, int N> void f(T* p);\n+\n+template<class T> auto g(T* p, int n) -> decltype(p[n]);\n+template<class T> auto g(T* p, int n) -> decltype(p[-n]);\n+template<class T> auto g(T* p, int n) -> decltype(n[p]);\n+template<class T> void g(T* p, int n);\n+\n+struct Incomplete;\n+\n+int main() {\n+  f<Incomplete,  0>(nullptr);\n+  f<Incomplete,  1>(nullptr);\n+  f<Incomplete, -1>(nullptr);\n+  f<Incomplete,  7>(nullptr);\n+  f<Incomplete, -7>(nullptr);\n+\n+  g<Incomplete>(nullptr, 0);\n+}"}]}