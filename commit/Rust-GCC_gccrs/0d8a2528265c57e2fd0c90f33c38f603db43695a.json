{"sha": "0d8a2528265c57e2fd0c90f33c38f603db43695a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGQ4YTI1MjgyNjVjNTdlMmZkMGM5MGYzM2MzOGY2MDNkYjQzNjk1YQ==", "commit": {"author": {"name": "Nicola Pero", "email": "nicola.pero@meta-innovation.com", "date": "2011-04-12T16:45:40Z"}, "committer": {"name": "Nicola Pero", "email": "nicola@gcc.gnu.org", "date": "2011-04-12T16:45:40Z"}, "message": "In gcc/: 2011-04-12 Nicola Pero <nicola.pero@meta-innovation.com>\n\nIn gcc/:\n2011-04-12  Nicola Pero  <nicola.pero@meta-innovation.com>\n\n\t* c-parser.c (c_lex_one_token): Rewritten conditional used when\n\tcompiling Objective-C to be more efficient.\n\nIn gcc/objc/:\n2011-04-12  Nicola Pero  <nicola.pero@meta-innovation.com>\n\n\t* objc-act.c (objc_is_class_name, objc_is_id): For efficiency,\n\tavoid calling identifier_global_value() multiple times.\n\nFrom-SVN: r172327", "tree": {"sha": "353154a340a6269c5f793969b1e6158c9f58ba42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/353154a340a6269c5f793969b1e6158c9f58ba42"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0d8a2528265c57e2fd0c90f33c38f603db43695a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d8a2528265c57e2fd0c90f33c38f603db43695a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d8a2528265c57e2fd0c90f33c38f603db43695a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d8a2528265c57e2fd0c90f33c38f603db43695a/comments", "author": {"login": "Nico-31415", "id": 94470564, "node_id": "U_kgDOBaGBpA", "avatar_url": "https://avatars.githubusercontent.com/u/94470564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nico-31415", "html_url": "https://github.com/Nico-31415", "followers_url": "https://api.github.com/users/Nico-31415/followers", "following_url": "https://api.github.com/users/Nico-31415/following{/other_user}", "gists_url": "https://api.github.com/users/Nico-31415/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nico-31415/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nico-31415/subscriptions", "organizations_url": "https://api.github.com/users/Nico-31415/orgs", "repos_url": "https://api.github.com/users/Nico-31415/repos", "events_url": "https://api.github.com/users/Nico-31415/events{/privacy}", "received_events_url": "https://api.github.com/users/Nico-31415/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "06bd234a03462ea2ecd879392a2042584297fb0b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06bd234a03462ea2ecd879392a2042584297fb0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06bd234a03462ea2ecd879392a2042584297fb0b"}], "stats": {"total": 32, "additions": 24, "deletions": 8}, "files": [{"sha": "f640b288cdba8a056d9d42df73f60f35bb64a7c5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d8a2528265c57e2fd0c90f33c38f603db43695a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d8a2528265c57e2fd0c90f33c38f603db43695a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0d8a2528265c57e2fd0c90f33c38f603db43695a", "patch": "@@ -1,3 +1,8 @@\n+2011-04-12  Nicola Pero  <nicola.pero@meta-innovation.com>\n+\n+\t* c-parser.c (c_lex_one_token): Rewritten conditional used when\n+\tcompiling Objective-C to be more efficient.\n+\n 2011-04-12  Axel Freyn  <axel-freyn@gmx.de>\n \n \t* opts-common.c (decode_cmdline_options_to_array): Remove variable"}, {"sha": "7542a58eac622f52d682e4f9eda5aa7fd16c887b", "filename": "gcc/c-parser.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d8a2528265c57e2fd0c90f33c38f603db43695a/gcc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d8a2528265c57e2fd0c90f33c38f603db43695a/gcc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parser.c?ref=0d8a2528265c57e2fd0c90f33c38f603db43695a", "patch": "@@ -334,8 +334,7 @@ c_lex_one_token (c_parser *parser, c_token *token)\n \t       variables and typedefs, and hence are shadowed by local\n \t       declarations.  */\n \t    if (objc_interface_decl\n-\t\t&& (global_bindings_p ()\n-\t\t    || (!objc_force_identifier && !decl)))\n+                && (!objc_force_identifier || global_bindings_p ()))\n \t      {\n \t\ttoken->value = objc_interface_decl;\n \t\ttoken->id_kind = C_ID_CLASSNAME;"}, {"sha": "e9e3be6097f2f759e436805214addaf3cfc5caad", "filename": "gcc/objc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d8a2528265c57e2fd0c90f33c38f603db43695a/gcc%2Fobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d8a2528265c57e2fd0c90f33c38f603db43695a/gcc%2Fobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2FChangeLog?ref=0d8a2528265c57e2fd0c90f33c38f603db43695a", "patch": "@@ -1,3 +1,8 @@\n+2011-04-12  Nicola Pero  <nicola.pero@meta-innovation.com>\n+\n+\t* objc-act.c (objc_is_class_name, objc_is_id): For efficiency,\n+\tavoid calling identifier_global_value() multiple times.\n+\n 2011-04-12  Martin Jambor  <mjambor@suse.cz>\n \n \t* objc-act.c (mark_referenced_methods): Call cgraph_get_create_node"}, {"sha": "dd81fd1a5f511daf91220dcc9c463187e0de089f", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0d8a2528265c57e2fd0c90f33c38f603db43695a/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0d8a2528265c57e2fd0c90f33c38f603db43695a/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=0d8a2528265c57e2fd0c90f33c38f603db43695a", "patch": "@@ -3411,9 +3411,13 @@ objc_is_class_name (tree ident)\n {\n   hash target;\n \n-  if (ident && TREE_CODE (ident) == IDENTIFIER_NODE\n-      && identifier_global_value (ident))\n-    ident = identifier_global_value (ident);\n+  if (ident && TREE_CODE (ident) == IDENTIFIER_NODE)\n+    {\n+      tree t = identifier_global_value (ident);\n+      if (t)\n+\tident = t;\n+    }\n+\n   while (ident && TREE_CODE (ident) == TYPE_DECL && DECL_ORIGINAL_TYPE (ident))\n     ident = OBJC_TYPE_NAME (DECL_ORIGINAL_TYPE (ident));\n \n@@ -3453,9 +3457,12 @@ objc_is_class_name (tree ident)\n tree\n objc_is_id (tree type)\n {\n-  if (type && TREE_CODE (type) == IDENTIFIER_NODE\n-      && identifier_global_value (type))\n-    type = identifier_global_value (type);\n+  if (type && TREE_CODE (type) == IDENTIFIER_NODE)\n+    {\n+      tree t = identifier_global_value (type);\n+      if (t)\n+\ttype = t;\n+    }\n \n   if (type && TREE_CODE (type) == TYPE_DECL)\n     type = TREE_TYPE (type);"}]}