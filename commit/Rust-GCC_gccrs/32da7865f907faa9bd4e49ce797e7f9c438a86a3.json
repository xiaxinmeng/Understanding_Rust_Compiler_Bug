{"sha": "32da7865f907faa9bd4e49ce797e7f9c438a86a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzJkYTc4NjVmOTA3ZmFhOWJkNGU0OWNlNzk3ZTdmOWM0MzhhODZhMw==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2003-12-04T04:31:16Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2003-12-04T04:31:16Z"}, "message": "h8300.c (push): Call gen_push_h8300hs_advanced instead of gen_push_h8300hs.\n\n\t* config/h8300/h8300.c (push): Call gen_push_h8300hs_advanced\n\tinstead of gen_push_h8300hs.\n\t(pop): Call gen_pop_h8300hs_advanced instead of\n\tgen_pop_h8300hs.\n\t* config/h8300/h8300.h (TRAMPOLINE_SIZE): Use Pmode.\n\t* config/h8300/h8300.md (*tablejump_h8300hs_advanced):\n\tTighten the predicate.\n\t(*tablejump_h8300hs_normal): Tighten the predicate.\n\t(push_h8300hs): Change to\n\tpush_h8300hs_advanced.\n\t(pop_h8300hs): Change to pop_h8300hs_advanced.\n\nFrom-SVN: r74267", "tree": {"sha": "2529c92e1a55f6de89e2dba4a4a38ac737d4f561", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2529c92e1a55f6de89e2dba4a4a38ac737d4f561"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/32da7865f907faa9bd4e49ce797e7f9c438a86a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32da7865f907faa9bd4e49ce797e7f9c438a86a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32da7865f907faa9bd4e49ce797e7f9c438a86a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32da7865f907faa9bd4e49ce797e7f9c438a86a3/comments", "author": null, "committer": null, "parents": [{"sha": "ce6e2d9028abad0651b422106ba95e656637f8a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce6e2d9028abad0651b422106ba95e656637f8a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce6e2d9028abad0651b422106ba95e656637f8a9"}], "stats": {"total": 36, "additions": 25, "deletions": 11}, "files": [{"sha": "e6d2e6d40f19d84f7c0f941992a5da66c28be999", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32da7865f907faa9bd4e49ce797e7f9c438a86a3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32da7865f907faa9bd4e49ce797e7f9c438a86a3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=32da7865f907faa9bd4e49ce797e7f9c438a86a3", "patch": "@@ -1,3 +1,17 @@\n+2003-12-03  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/h8300.c (push): Call gen_push_h8300hs_advanced\n+\tinstead of gen_push_h8300hs.\n+\t(pop): Call gen_pop_h8300hs_advanced instead of\n+\tgen_pop_h8300hs.\n+\t* config/h8300/h8300.h (TRAMPOLINE_SIZE): Use Pmode.\n+\t* config/h8300/h8300.md (*tablejump_h8300hs_advanced):\n+\tTighten the predicate.\n+\t(*tablejump_h8300hs_normal): Tighten the predicate.\n+\t(push_h8300hs): Change to\n+\tpush_h8300hs_advanced.\n+\t(pop_h8300hs): Change to pop_h8300hs_advanced.\n+\n 2003-12-03  Eric Christopher  <echristo@redhat.com>\n \n \t* rtl.c: Fix typo."}, {"sha": "ed3cc08c51d927f86be5e386a5f82e53879c8521", "filename": "gcc/config/h8300/h8300.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32da7865f907faa9bd4e49ce797e7f9c438a86a3/gcc%2Fconfig%2Fh8300%2Fh8300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32da7865f907faa9bd4e49ce797e7f9c438a86a3/gcc%2Fconfig%2Fh8300%2Fh8300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.c?ref=32da7865f907faa9bd4e49ce797e7f9c438a86a3", "patch": "@@ -435,7 +435,7 @@ push (int rn)\n   if (TARGET_H8300)\n     x = gen_push_h8300 (reg);\n   else if (!TARGET_NORMAL_MODE)\n-    x = gen_push_h8300hs (reg);\n+    x = gen_push_h8300hs_advanced (reg);\n   else\n     x = gen_push_h8300hs_normal (reg);\n   x = emit_insn (x);\n@@ -453,7 +453,7 @@ pop (int rn)\n   if (TARGET_H8300)\n     x = gen_pop_h8300 (reg);\n   else if (!TARGET_NORMAL_MODE)\n-    x = gen_pop_h8300hs (reg);\n+    x = gen_pop_h8300hs_advanced (reg);\n   else\n     x = gen_pop_h8300hs_normal (reg);\n   x = emit_insn (x);"}, {"sha": "b60fc52af492daf137520ddd1496b5fbe5672152", "filename": "gcc/config/h8300/h8300.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32da7865f907faa9bd4e49ce797e7f9c438a86a3/gcc%2Fconfig%2Fh8300%2Fh8300.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32da7865f907faa9bd4e49ce797e7f9c438a86a3/gcc%2Fconfig%2Fh8300%2Fh8300.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.h?ref=32da7865f907faa9bd4e49ce797e7f9c438a86a3", "patch": "@@ -735,7 +735,7 @@ struct cum_arg\n \n /* Length in units of the trampoline for entering a nested function.  */\n \n-#define TRAMPOLINE_SIZE ((TARGET_H8300 || TARGET_NORMAL_MODE) ? 8 : 12)\n+#define TRAMPOLINE_SIZE ((Pmode == HImode) ? 8 : 12)\n \n /* Emit RTL insns to build a trampoline.\n    FNADDR is an RTX for the address of the function's pure code."}, {"sha": "974330847ec21fb76a024f8694e4ede11ce21adc", "filename": "gcc/config/h8300/h8300.md", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32da7865f907faa9bd4e49ce797e7f9c438a86a3/gcc%2Fconfig%2Fh8300%2Fh8300.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32da7865f907faa9bd4e49ce797e7f9c438a86a3/gcc%2Fconfig%2Fh8300%2Fh8300.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.md?ref=32da7865f907faa9bd4e49ce797e7f9c438a86a3", "patch": "@@ -1763,7 +1763,7 @@\n (define_insn \"*tablejump_h8300hs_advanced\"\n   [(set (pc) (match_operand:SI 0 \"register_operand\" \"r\"))\n    (use (label_ref (match_operand 1 \"\" \"\")))]\n-  \"TARGET_H8300H || TARGET_H8300S\"\n+  \"(TARGET_H8300H || TARGET_H8300S) && !TARGET_NORMAL_MODE\"\n   \"jmp\t@%0\"\n   [(set_attr \"cc\" \"none\")\n    (set_attr \"length\" \"2\")])\n@@ -1792,7 +1792,7 @@\n \n (define_insn \"*indirect_jump_h8300hs_advanced\"\n   [(set (pc) (match_operand:SI 0 \"jump_address_operand\" \"Vr\"))]\n-  \"TARGET_H8300H || TARGET_H8300S\"\n+  \"(TARGET_H8300H || TARGET_H8300S) && !TARGET_NORMAL_MODE\"\n   \"jmp @%0\"\n   [(set_attr \"cc\" \"none\")\n    (set_attr \"length\" \"2\")])\n@@ -1867,16 +1867,16 @@\n   \"TARGET_H8300\"\n   \"\")\n \n-(define_expand \"push_h8300hs\"\n+(define_expand \"push_h8300hs_advanced\"\n   [(set (mem:SI (pre_dec:SI (reg:SI SP_REG)))\n         (match_operand:SI 0 \"register_operand\" \"\"))]\n-  \"TARGET_H8300H && TARGET_H8300S\"\n+  \"TARGET_H8300H && TARGET_H8300S && !TARGET_NORMAL_MODE\"\n   \"\")\n \n (define_expand \"push_h8300hs_normal\"\n   [(set (mem:SI (pre_dec:HI (reg:HI SP_REG)))\n         (match_operand:SI 0 \"register_operand\" \"\"))]\n-  \"TARGET_NORMAL_MODE\"\n+  \"TARGET_H8300H && TARGET_H8300S && TARGET_NORMAL_MODE\"\n   \"\")\n \n (define_expand \"pop_h8300\"\n@@ -1885,16 +1885,16 @@\n   \"TARGET_H8300\"\n   \"\")\n \n-(define_expand \"pop_h8300hs\"\n+(define_expand \"pop_h8300hs_advanced\"\n   [(set (match_operand:SI 0 \"register_operand\" \"\")\n \t(mem:SI (post_inc:SI (reg:SI SP_REG))))]\n-  \"TARGET_H8300H && TARGET_H8300S\"\n+  \"TARGET_H8300H && TARGET_H8300S && !TARGET_NORMAL_MODE\"\n   \"\")\n \n (define_expand \"pop_h8300hs_normal\"\n   [(set (match_operand:SI 0 \"register_operand\" \"\")\n \t(mem:SI (post_inc:HI (reg:HI SP_REG))))]\n-  \"TARGET_NORMAL_MODE\"\n+  \"TARGET_H8300H && TARGET_H8300S && TARGET_NORMAL_MODE\"\n   \"\")\n \n (define_insn \"stm_h8300s_2_advanced\""}]}