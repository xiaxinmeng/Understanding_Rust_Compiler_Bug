{"sha": "55b21c7a644d052ae243adef866d1394fc85a9f1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTViMjFjN2E2NDRkMDUyYWUyNDNhZGVmODY2ZDEzOTRmYzg1YTlmMQ==", "commit": {"author": {"name": "Richard Frith-Macdonald", "email": "rfm@gnu.org", "date": "2011-02-28T13:08:37Z"}, "committer": {"name": "Nicola Pero", "email": "nicola@gcc.gnu.org", "date": "2011-02-28T13:08:37Z"}, "message": "Fixed critical typo in Objective-C runtime garbage collection code\n\nFrom-SVN: r170561", "tree": {"sha": "9b5dfa811dd66d83194bea91dd5b2d2150826f29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b5dfa811dd66d83194bea91dd5b2d2150826f29"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/55b21c7a644d052ae243adef866d1394fc85a9f1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55b21c7a644d052ae243adef866d1394fc85a9f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55b21c7a644d052ae243adef866d1394fc85a9f1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55b21c7a644d052ae243adef866d1394fc85a9f1/comments", "author": {"login": "rfm", "id": 4929621, "node_id": "MDQ6VXNlcjQ5Mjk2MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/4929621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rfm", "html_url": "https://github.com/rfm", "followers_url": "https://api.github.com/users/rfm/followers", "following_url": "https://api.github.com/users/rfm/following{/other_user}", "gists_url": "https://api.github.com/users/rfm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rfm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rfm/subscriptions", "organizations_url": "https://api.github.com/users/rfm/orgs", "repos_url": "https://api.github.com/users/rfm/repos", "events_url": "https://api.github.com/users/rfm/events{/privacy}", "received_events_url": "https://api.github.com/users/rfm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "544a301ed4033323b9512fb71ed8c83506c1f0af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/544a301ed4033323b9512fb71ed8c83506c1f0af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/544a301ed4033323b9512fb71ed8c83506c1f0af"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "a9399e6bea982eb931f995005ca7e4770f632940", "filename": "libobjc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55b21c7a644d052ae243adef866d1394fc85a9f1/libobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55b21c7a644d052ae243adef866d1394fc85a9f1/libobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FChangeLog?ref=55b21c7a644d052ae243adef866d1394fc85a9f1", "patch": "@@ -1,3 +1,9 @@\n+2011-02-28  Richard Frith-Macdonald <rfm@gnu.org>\n+\n+\tPR libobjc/47922\n+\t* gc.c (class_ivar_set_gcinvisible): Use _C_GCINVISIBLE instead of\n+\ta hardcoded \"!\".\n+\n 2011-02-13  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n \t* configure: Regenerate."}, {"sha": "5ea4f8a09158c4a38bf1c5a7ef363774b8c62327", "filename": "libobjc/gc.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55b21c7a644d052ae243adef866d1394fc85a9f1/libobjc%2Fgc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55b21c7a644d052ae243adef866d1394fc85a9f1/libobjc%2Fgc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fgc.c?ref=55b21c7a644d052ae243adef866d1394fc85a9f1", "patch": "@@ -422,11 +422,15 @@ class_ivar_set_gcinvisible (Class class, const char *ivarname,\n \n \t  /* The variable is gc visible so we make it gc_invisible.  */\n \t  new_type = objc_malloc (strlen(ivar->ivar_type) + 2);\n+\n+\t  /* Copy the variable name.  */\n \t  len = (type - ivar->ivar_type);\n \t  memcpy (new_type, ivar->ivar_type, len);\n-\t  new_type[len] = 0;\n-\t  strcat (new_type, \"!\");\n-\t  strcat (new_type, type);\n+\t  /* Add '!'.  */\n+\t  new_type[len++] = _C_GCINVISIBLE;\n+\t  /* Copy the original types.  */\n+\t  strcpy (new_type + len, type);\n+\n \t  ivar->ivar_type = new_type;\n \t}\n "}]}