{"sha": "e82f9ef748f25bbbdc9821efcb287ab1b48dd066", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTgyZjllZjc0OGYyNWJiYmRjOTgyMWVmY2IyODdhYjFiNDhkZDA2Ng==", "commit": {"author": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2015-11-26T01:52:04Z"}, "committer": {"name": "Martin Sebor", "email": "msebor@gcc.gnu.org", "date": "2015-11-26T01:52:04Z"}, "message": "PR c++/67876 - [6 Regression] ICE when compiling Firefox 38\n\ngcc/cp\n\t* pt.c (convert_template_argument): Make sure number of tree\n\toperands is greater than zero before attempting to extract one.\n\ngcc/testsuite/\n\t* g++.dg/pr67876.C: New test.\n\nFrom-SVN: r230924", "tree": {"sha": "159f5ccf0d9ca397f77328c86b6fc299fdcf1484", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/159f5ccf0d9ca397f77328c86b6fc299fdcf1484"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e82f9ef748f25bbbdc9821efcb287ab1b48dd066", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e82f9ef748f25bbbdc9821efcb287ab1b48dd066", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e82f9ef748f25bbbdc9821efcb287ab1b48dd066", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e82f9ef748f25bbbdc9821efcb287ab1b48dd066/comments", "author": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ae026741df1a3f1dfe86ffde544010027a4c08b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae026741df1a3f1dfe86ffde544010027a4c08b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae026741df1a3f1dfe86ffde544010027a4c08b1"}], "stats": {"total": 48, "additions": 46, "deletions": 2}, "files": [{"sha": "82a29a3b0f63b36ba995535ba3540d0ffccb1730", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e82f9ef748f25bbbdc9821efcb287ab1b48dd066/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e82f9ef748f25bbbdc9821efcb287ab1b48dd066/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e82f9ef748f25bbbdc9821efcb287ab1b48dd066", "patch": "@@ -1,3 +1,9 @@\n+2015-11-25  Martin Sebor  <msebor@redhat.com>\n+\n+\tPR c++/67876\n+\t* pt.c (convert_template_argument): Make sure number of tree\n+\toperands is greater than zero before attempting to extract one.\n+\n 2015-11-25  Ryan Burn  <contact@rnburn.com>\n \n \tPR c++/68434\n@@ -369,10 +375,10 @@\n \t(cp_parser_pragma): Adjust omp_declare_simd checking.  Call\n \tcp_ensure_no_oacc_routine.\n \t(cp_parser_pragma): Add OpenACC routine handling.\n-\t\n+\n 2015-11-08  Martin Sebor  <msebor@redhat.com>\n \n-\tPR c++/67942 \n+\tPR c++/67942\n \t* cp/init.c (warn_placement_new_too_small): Convert integer\n \toperand of POINTER_PLUS_EXPR to ssize_t to determine its signed\n \tvalue."}, {"sha": "5befd644c098082468f7d135b572ea029d829c4c", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e82f9ef748f25bbbdc9821efcb287ab1b48dd066/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e82f9ef748f25bbbdc9821efcb287ab1b48dd066/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=e82f9ef748f25bbbdc9821efcb287ab1b48dd066", "patch": "@@ -7234,6 +7234,7 @@ convert_template_argument (tree parm,\n           if (TREE_CODE (TREE_TYPE (inner)) == REFERENCE_TYPE\n               && TREE_CODE (TREE_TYPE (TREE_TYPE (inner))) == FUNCTION_TYPE\n               && TREE_CODE (TREE_TYPE (inner)) == REFERENCE_TYPE\n+              && 0 < TREE_OPERAND_LENGTH (inner)\n               && reject_gcc_builtin (TREE_OPERAND (inner, 0)))\n               return error_mark_node;\n         }"}, {"sha": "9d022fce86be8c1971c5a5239a40e5ba4fa8c5c6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e82f9ef748f25bbbdc9821efcb287ab1b48dd066/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e82f9ef748f25bbbdc9821efcb287ab1b48dd066/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e82f9ef748f25bbbdc9821efcb287ab1b48dd066", "patch": "@@ -1,3 +1,8 @@\n+2015-11-25  Martin Sebor  <msebor@redhat.com>\n+\n+\tPR c++/67876\n+\t* g++.dg/pr67876.C: New test.\n+\n 2015-11-25  Aditya Kumar  <aditya.k7@samsung.com>\n \t    Sebastian Pop  <s.pop@samsung.com>\n "}, {"sha": "5d62b5ae742f4241638d5a82c5e65b4f3186714c", "filename": "gcc/testsuite/g++.dg/pr67876.C", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e82f9ef748f25bbbdc9821efcb287ab1b48dd066/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr67876.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e82f9ef748f25bbbdc9821efcb287ab1b48dd066/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr67876.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr67876.C?ref=e82f9ef748f25bbbdc9821efcb287ab1b48dd066", "patch": "@@ -0,0 +1,32 @@\n+// PR c++/67876 - [6 Regression] ICE when compiling Firefox 38\n+// Caused by a patch for c/66516 - missing diagnostic on taking\n+// the address of a builtin function\n+// { dg-do compile }\n+\n+template <class T, void (&F)(T*)>\n+struct S { };\n+\n+extern void foo (int*);\n+\n+template <class T, void (&F)(T*)>\n+void bar (S<T, F>&s) { }\n+\n+S<int, foo> s;\n+\n+void foobar (S<int, foo> &s) { bar (s); }\n+// PR c++/67876 - [6 Regression] ICE when compiling Firefox 38\n+// Caused by a patch for c/66516 - missing diagnostic on taking\n+// the address of a builtin function\n+// { dg-do compile }\n+\n+template <class T, void (&F)(T*)>\n+struct S { };\n+\n+extern void foo (int*);\n+\n+template <class T, void (&F)(T*)>\n+void bar (S<T, F>&s) { }\n+\n+S<int, foo> s;\n+\n+void foobar (S<int, foo> &s) { bar (s); }"}]}