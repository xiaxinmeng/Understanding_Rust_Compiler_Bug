{"sha": "71713fa639cb04dcfa44d22035c6e056b6393b00", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE3MTNmYTYzOWNiMDRkY2ZhNDRkMjIwMzVjNmUwNTZiNjM5M2IwMA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2015-12-27T13:33:19Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2015-12-27T13:33:19Z"}, "message": "ipa-visibility.c (function_and_variable_visibility): Do not dissolve comdat groups when in LTO mode.\n\n\t* ipa-visibility.c (function_and_variable_visibility): Do not\n\tdissolve comdat groups when in LTO mode.\n\nFrom-SVN: r231965", "tree": {"sha": "c2f9b5e26278bf362e815a91bfb8ed6d1867f1f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2f9b5e26278bf362e815a91bfb8ed6d1867f1f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/71713fa639cb04dcfa44d22035c6e056b6393b00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71713fa639cb04dcfa44d22035c6e056b6393b00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71713fa639cb04dcfa44d22035c6e056b6393b00", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71713fa639cb04dcfa44d22035c6e056b6393b00/comments", "author": null, "committer": null, "parents": [{"sha": "0b98ac42bfacd1e379d6bff5f6c6e7267bf74f84", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b98ac42bfacd1e379d6bff5f6c6e7267bf74f84", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b98ac42bfacd1e379d6bff5f6c6e7267bf74f84"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "663beb7cce0a571ad4be3d8dc89d5c654d8e485d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71713fa639cb04dcfa44d22035c6e056b6393b00/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71713fa639cb04dcfa44d22035c6e056b6393b00/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=71713fa639cb04dcfa44d22035c6e056b6393b00", "patch": "@@ -1,3 +1,8 @@\n+2015-12-25  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* ipa-visibility.c (function_and_variable_visibility): Do not\n+\tdissolve comdat groups when in LTO mode.\n+\n 2015-12-25  Andreas Tobler  <andreast@gcc.gnu.org>\n \n \t* config/rs6000/freebsd64.h: Delete FREEBSD_DYNAMIC_LINKER32/64"}, {"sha": "1f8c2e8db6928e9a28b902a4d189cf12224e4143", "filename": "gcc/ipa-visibility.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71713fa639cb04dcfa44d22035c6e056b6393b00/gcc%2Fipa-visibility.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71713fa639cb04dcfa44d22035c6e056b6393b00/gcc%2Fipa-visibility.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-visibility.c?ref=71713fa639cb04dcfa44d22035c6e056b6393b00", "patch": "@@ -493,8 +493,12 @@ function_and_variable_visibility (bool whole_program)\n         DECL_COMDAT (node->decl) = 0;\n \n       /* For external decls stop tracking same_comdat_group. It doesn't matter\n-\t what comdat group they are in when they won't be emitted in this TU.  */\n-      if (node->same_comdat_group && DECL_EXTERNAL (node->decl))\n+\t what comdat group they are in when they won't be emitted in this TU.\n+\n+\t An exception is LTO where we may end up with both external\n+\t and non-external declarations in the same comdat group in\n+\t the case declarations was not merged.  */\n+      if (node->same_comdat_group && DECL_EXTERNAL (node->decl) && !in_lto_p)\n \t{\n \t  if (flag_checking)\n \t    {"}]}