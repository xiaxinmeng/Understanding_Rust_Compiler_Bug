{"sha": "a03c6ae38806e3ec5e017ff42471d8f6bff70a41", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTAzYzZhZTM4ODA2ZTNlYzVlMDE3ZmY0MjQ3MWQ4ZjZiZmY3MGE0MQ==", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2015-07-14T22:43:46Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@gcc.gnu.org", "date": "2015-07-14T22:43:46Z"}, "message": "tramp.c (MOVHI, ORI, JMP): Conditionalize for __nios2_arch__ level.\n\n2015-07-14  Sandra Loosemore  <sandra@codesourcery.com>\n\t    Cesar Philippidis  <cesar@codesourcery.com>\n\t    Chung-Lin Tang  <cltang@codesourcery.com>\n\n\tlibgcc/\n\t* config/nios2/tramp.c (MOVHI, ORI, JMP): Conditionalize\n\tfor __nios2_arch__ level.\n\nCo-Authored-By: Cesar Philippidis <cesar@codesourcery.com>\nCo-Authored-By: Chung-Lin Tang <cltang@codesourcery.com>\n\nFrom-SVN: r225794", "tree": {"sha": "da6a85144159d95069986041158078fac30ef848", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da6a85144159d95069986041158078fac30ef848"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a03c6ae38806e3ec5e017ff42471d8f6bff70a41", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a03c6ae38806e3ec5e017ff42471d8f6bff70a41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a03c6ae38806e3ec5e017ff42471d8f6bff70a41", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a03c6ae38806e3ec5e017ff42471d8f6bff70a41/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "973590f32087d0b9d5330d9a14a066b18a4ca832", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/973590f32087d0b9d5330d9a14a066b18a4ca832", "html_url": "https://github.com/Rust-GCC/gccrs/commit/973590f32087d0b9d5330d9a14a066b18a4ca832"}], "stats": {"total": 27, "additions": 24, "deletions": 3}, "files": [{"sha": "13b3a9485576987e87793c386bc649f7aa1aca07", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a03c6ae38806e3ec5e017ff42471d8f6bff70a41/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a03c6ae38806e3ec5e017ff42471d8f6bff70a41/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=a03c6ae38806e3ec5e017ff42471d8f6bff70a41", "patch": "@@ -1,3 +1,10 @@\n+2015-07-14  Sandra Loosemore  <sandra@codesourcery.com>\n+\t    Cesar Philippidis  <cesar@codesourcery.com>\n+\t    Chung-Lin Tang  <cltang@codesourcery.com>\n+\n+\t* config/nios2/tramp.c (MOVHI, ORI, JMP): Conditionalize\n+\tfor __nios2_arch__ level.\n+\n 2015-07-13  John Marino  <gnugcc@marino.st>\n \n \t* config/i386/t-dragonfly: New."}, {"sha": "e108c7a990cbcb83ee903c7fa507d77df09ba219", "filename": "libgcc/config/nios2/tramp.c", "status": "modified", "additions": 17, "deletions": 3, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a03c6ae38806e3ec5e017ff42471d8f6bff70a41/libgcc%2Fconfig%2Fnios2%2Ftramp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a03c6ae38806e3ec5e017ff42471d8f6bff70a41/libgcc%2Fconfig%2Fnios2%2Ftramp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fnios2%2Ftramp.c?ref=a03c6ae38806e3ec5e017ff42471d8f6bff70a41", "patch": "@@ -33,13 +33,27 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n \n #define SC_REGNO 12\n \n-#define MOVHI(reg,imm16) \\\n+/* Instruction encodings depend on the ISA level.  */\n+#if __nios2_arch__ == 2\n+#define MOVHI(reg,imm16)\t\t\t\\\n+  (((reg) << 11) | ((imm16) << 16) | 0x34)\n+#define ORI(reg,imm16)\t\t\t\t\t\t\\\n+  (((reg) << 11) | ((reg) << 6) | ((imm16) << 16) | 0x14)\n+#define JMP(reg)\t\t\t\t\\\n+  (((reg) << 6) | (0x0d << 26) | 0x20)\n+\n+#elif __nios2_arch__ == 1\n+#define MOVHI(reg,imm16)\t\t\t\\\n   (((reg) << 22) | ((imm16) << 6) | 0x34)\n-#define ORI(reg,imm16) \\\n+#define ORI(reg,imm16)\t\t\t\t\t\t\\\n   (((reg) << 27) | ((reg) << 22) | ((imm16) << 6) | 0x14)\n-#define JMP(reg) \\\n+#define JMP(reg)\t\t\t\t\\\n   (((reg) << 27) | (0x0d << 11) | 0x3a)\n \n+#else\n+#error \"Unknown Nios II architecture level\"\n+#endif\n+\n void\n __trampoline_setup (unsigned int *addr, void *fnptr, void *chainptr)\n {"}]}