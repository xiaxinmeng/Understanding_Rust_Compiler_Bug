{"sha": "34536f93eb929d873f56f852c53fa9f0dfc290c6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzQ1MzZmOTNlYjkyOWQ4NzNmNTZmODUyYzUzZmE5ZjBkZmMyOTBjNg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-11-09T20:07:35Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-11-09T20:07:35Z"}, "message": "(save_call_clobbered_regs): Ensure any insns we add\nare in the same basic block as the insn we added them for.\n\nFrom-SVN: r2726", "tree": {"sha": "06d7bab74438525a186eec6837d7829c5a3562a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/06d7bab74438525a186eec6837d7829c5a3562a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/34536f93eb929d873f56f852c53fa9f0dfc290c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34536f93eb929d873f56f852c53fa9f0dfc290c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34536f93eb929d873f56f852c53fa9f0dfc290c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34536f93eb929d873f56f852c53fa9f0dfc290c6/comments", "author": null, "committer": null, "parents": [{"sha": "885cde0193d3077ef645f8852f248df4196511ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/885cde0193d3077ef645f8852f248df4196511ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/885cde0193d3077ef645f8852f248df4196511ba"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "f77eda9ae0641111ad739ad88fd1b41f576c7f4e", "filename": "gcc/caller-save.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34536f93eb929d873f56f852c53fa9f0dfc290c6/gcc%2Fcaller-save.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34536f93eb929d873f56f852c53fa9f0dfc290c6/gcc%2Fcaller-save.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcaller-save.c?ref=34536f93eb929d873f56f852c53fa9f0dfc290c6", "patch": "@@ -374,6 +374,7 @@ save_call_clobbered_regs (insn_mode)\n   for (b = 0; b < n_basic_blocks; b++)\n     {\n       regset regs_live = basic_block_live_at_start[b];\n+      rtx prev_block_last = PREV_INSN (basic_block_head[b]);\n       REGSET_ELT_TYPE bit;\n       int offset, i, j;\n       int regno;\n@@ -490,6 +491,9 @@ save_call_clobbered_regs (insn_mode)\n \t\t\t\t  ? insn : NEXT_INSN (insn)), 0,\n \t\t\t\t  regno, insn_mode, MOVE_MAX / UNITS_PER_WORD);\n \n+      /* If we added any insns at the start of the block, update the start\n+\t of the block to point at those insns.  */\n+      basic_block_head[b] = NEXT_INSN (prev_block_last);\n     }\n }\n "}]}