{"sha": "9b24c20cb3af3a917cd7bf804e08ac3ef9defb10", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWIyNGMyMGNiM2FmM2E5MTdjZDdiZjgwNGUwOGFjM2VmOWRlZmIxMA==", "commit": {"author": {"name": "Serge Belyshev", "email": "belyshev@depni.sinp.msu.ru", "date": "2021-07-20T07:12:57Z"}, "committer": {"name": "Serge Belyshev", "email": "belyshev@depni.sinp.msu.ru", "date": "2021-08-20T21:10:21Z"}, "message": "configure: remove gas versions from tls check\n\ngcc/ChangeLog:\n\n\t* configure.ac (thread-local storage support): Remove tls_first_major\n\tand tls_first_minor.  Use \"$conftest_s\" to check support.\n\t* configure: Regenerate.", "tree": {"sha": "6c8f039a7c31cb109cec1cd9da98500be46a6e51", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c8f039a7c31cb109cec1cd9da98500be46a6e51"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9b24c20cb3af3a917cd7bf804e08ac3ef9defb10", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b24c20cb3af3a917cd7bf804e08ac3ef9defb10", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b24c20cb3af3a917cd7bf804e08ac3ef9defb10", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b24c20cb3af3a917cd7bf804e08ac3ef9defb10/comments", "author": {"login": "ssb83", "id": 37732995, "node_id": "MDQ6VXNlcjM3NzMyOTk1", "avatar_url": "https://avatars.githubusercontent.com/u/37732995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssb83", "html_url": "https://github.com/ssb83", "followers_url": "https://api.github.com/users/ssb83/followers", "following_url": "https://api.github.com/users/ssb83/following{/other_user}", "gists_url": "https://api.github.com/users/ssb83/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssb83/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssb83/subscriptions", "organizations_url": "https://api.github.com/users/ssb83/orgs", "repos_url": "https://api.github.com/users/ssb83/repos", "events_url": "https://api.github.com/users/ssb83/events{/privacy}", "received_events_url": "https://api.github.com/users/ssb83/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ssb83", "id": 37732995, "node_id": "MDQ6VXNlcjM3NzMyOTk1", "avatar_url": "https://avatars.githubusercontent.com/u/37732995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssb83", "html_url": "https://github.com/ssb83", "followers_url": "https://api.github.com/users/ssb83/followers", "following_url": "https://api.github.com/users/ssb83/following{/other_user}", "gists_url": "https://api.github.com/users/ssb83/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssb83/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssb83/subscriptions", "organizations_url": "https://api.github.com/users/ssb83/orgs", "repos_url": "https://api.github.com/users/ssb83/repos", "events_url": "https://api.github.com/users/ssb83/events{/privacy}", "received_events_url": "https://api.github.com/users/ssb83/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1918f4b7ac5089eeb97c65954a8bc466e8139691", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1918f4b7ac5089eeb97c65954a8bc466e8139691", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1918f4b7ac5089eeb97c65954a8bc466e8139691"}], "stats": {"total": 116, "additions": 2, "deletions": 114}, "files": [{"sha": "500e3f68215055d201612fb2f61e42de0f7b3654", "filename": "gcc/configure", "status": "modified", "additions": 1, "deletions": 57, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b24c20cb3af3a917cd7bf804e08ac3ef9defb10/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b24c20cb3af3a917cd7bf804e08ac3ef9defb10/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=9b24c20cb3af3a917cd7bf804e08ac3ef9defb10", "patch": "@@ -25191,8 +25191,6 @@ fi\n \n # Thread-local storage - the check is heavily parameterized.\n conftest_s=\n-tls_first_major=\n-tls_first_minor=\n tls_as_opt=\n case \"$target\" in\n   alpha*-*-*)\n@@ -25214,15 +25212,11 @@ foo:\t.long\t25\n \tldah\t$2,foo($29)\t\t\t!tprelhi\n \tlda\t$3,foo($2)\t\t\t!tprello\n \tlda\t$4,foo($29)\t\t\t!tprel'\n-\ttls_first_major=2\n-\ttls_first_minor=13\n \ttls_as_opt=--fatal-warnings\n \t;;\n   arc*-*-*)\n     conftest_s='\n \tadd_s r0,r0, @foo@tpoff'\n-\ttls_first_major=2\n-\ttls_first_minor=23\n \t;;\n   cris-*-*|crisv32-*-*)\n     conftest_s='\n@@ -25231,8 +25225,6 @@ x:      .long   25\n         .text\n \tmove.d x:IE,$r10\n \tnop'\n-\ttls_first_major=2\n-\ttls_first_minor=20\n \ttls_as_opt=--fatal-warnings\n \t;;\n   frv*-*-*)\n@@ -25241,8 +25233,6 @@ x:      .long   25\n x:      .long   25\n         .text\n         call    #gettlsoff(x)'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \t;;\n   hppa*-*-linux*)\n     conftest_s='\n@@ -25269,8 +25259,6 @@ foo:\t.long\t25\n \tmfctl %cr27,%t1\n \taddil LR%foo-$tls_leoff$,%t1\n \tldo RR%foo-$tls_leoff$(%r1),%t2'\n-\ttls_first_major=2\n-\ttls_first_minor=15\n \ttls_as_opt=--fatal-warnings\n \t;;\n   arm*-*-*)\n@@ -25283,8 +25271,6 @@ foo:\t.long\t25\n .word foo(tlsgd)\n .word foo(tlsldm)\n .word foo(tlsldo)'\n-\ttls_first_major=2\n-\ttls_first_minor=17\n \t;;\n   i[34567]86-*-* | x86_64-*-*)\n     case \"$target\" in\n@@ -25298,17 +25284,13 @@ foo:\t.long\t25\n     if test x$on_solaris = xyes && test x$gas_flag = xno; then\n       conftest_s='\n \t.section .tdata,\"awt\",@progbits'\n-      tls_first_major=0\n-      tls_first_minor=0\n       tls_section_flag=t\n \n $as_echo \"#define TLS_SECTION_ASM_FLAG 't'\" >>confdefs.h\n \n     else\n       conftest_s='\n \t.section \".tdata\",\"awT\",@progbits'\n-      tls_first_major=2\n-      tls_first_minor=14\n       tls_section_flag=T\n       tls_as_opt=\"--fatal-warnings\"\n     fi\n@@ -25367,8 +25349,6 @@ foo:\tdata8\t25\n \taddl\tr20 = @tprel(foo#), gp\n \tadds\tr22 = @tprel(foo#), r13\n \tmovl\tr24 = @tprel(foo#)'\n-\ttls_first_major=2\n-\ttls_first_minor=13\n \ttls_as_opt=--fatal-warnings\n \t;;\n   microblaze*-*-*)\n@@ -25379,8 +25359,6 @@ x:\n \t.text\n \taddik r5,r20,x@TLSGD\n \taddik r5,r20,x@TLSLDM'\n-\ttls_first_major=2\n-\ttls_first_minor=20\n \ttls_as_opt='--fatal-warnings'\n \t;;\n   mips*-*-*)\n@@ -25396,8 +25374,6 @@ x:\n \tlw $4, %gottprel(x)($28)\n \tlui $4, %tprel_hi(x)\n \taddiu $4, $4, %tprel_lo(x)'\n-\ttls_first_major=2\n-\ttls_first_minor=16\n \ttls_as_opt='-32 --fatal-warnings'\n \t;;\n   m68k-*-*)\n@@ -25412,15 +25388,11 @@ foo:\n \tmove.l x@TLSLDO(%a5),%a0\n \tmove.l x@TLSIE(%a5),%a0\n \tmove.l x@TLSLE(%a5),%a0'\n-\ttls_first_major=2\n-\ttls_first_minor=19\n \ttls_as_opt='--fatal-warnings'\n \t;;\n   nios2-*-*)\n       conftest_s='\n \t.section \".tdata\",\"awT\",@progbits'\n-\ttls_first_major=2\n-\ttls_first_minor=23\n \ttls_as_opt=\"--fatal-warnings\"\n \t;;\n   aarch64*-*-*)\n@@ -25432,8 +25404,6 @@ foo:\t.long\t25\n \tadd   x0, x0, #:tlsgd_lo12:x\n         bl    __tls_get_addr\n \tnop'\n-\ttls_first_major=2\n-\ttls_first_minor=20\n \ttls_as_opt='--fatal-warnings'\n \t;;\n   or1k*-*-*)\n@@ -25444,8 +25414,6 @@ foo:\t.long\t25\n \tl.movhi\tr3, tpoffha(foo)\n \tl.add\tr3, r3, r10\n \tl.lwz\tr4, tpofflo(foo)(r3)'\n-    tls_first_major=2\n-    tls_first_minor=30\n     tls_as_opt=--fatal-warnings\n     ;;\n   powerpc-ibm-aix*)\n@@ -25463,8 +25431,6 @@ LC..1:\n \t.csect a[TL],4\n a:\n \t.space 4'\n-\ttls_first_major=0\n-\ttls_first_minor=0\n \t;;\n   powerpc64*-*-*)\n     conftest_s='\n@@ -25496,8 +25462,6 @@ x3:\t.space 8\n \tadd 9,9,3\n \tbl .__tls_get_addr\n \tnop'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \ttls_as_opt=\"-a64 --fatal-warnings\"\n \t;;\n   powerpc*-*-*)\n@@ -25522,8 +25486,6 @@ x3:\t.space 4\n \taddi 9,2,x1@tprel\n \taddis 9,2,x2@tprel@ha\n \taddi 9,9,x2@tprel@l'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \ttls_as_opt=\"-a32 --fatal-warnings\"\n \t;;\n   riscv*-*-*)\n@@ -25533,8 +25495,6 @@ x:\t.word 2\n \t.text\n \tla.tls.gd a0,x\n         call __tls_get_addr'\n-\ttls_first_major=2\n-\ttls_first_minor=21\n \ttls_as_opt='--fatal-warnings'\n \t;;\n   s390-*-*)\n@@ -25552,8 +25512,6 @@ foo:\t.long\t25\n \tl\t%r1,0(%r1):tls_load:foo\n \tbas\t%r14,0(%r1,%r13):tls_gdcall:foo\n \tbas\t%r14,0(%r1,%r13):tls_ldcall:foo'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \ttls_as_opt=\"-m31 --fatal-warnings\"\n \t;;\n   s390x-*-*)\n@@ -25570,8 +25528,6 @@ foo:\t.long\t25\n \tlarl\t%r1,foo@INDNTPOFF\n \tbrasl\t%r14,__tls_get_offset@PLT:tls_gdcall:foo\n \tbrasl\t%r14,__tls_get_offset@PLT:tls_ldcall:foo'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \ttls_as_opt=\"-m64 -Aesame --fatal-warnings\"\n \t;;\n   sh-*-* | sh[123456789lbe]*-*-*)\n@@ -25584,8 +25540,6 @@ foo:\t.long\t25\n \t.long\tfoo@DTPOFF\n \t.long\tfoo@GOTTPOFF\n \t.long\tfoo@TPOFF'\n-\ttls_first_major=2\n-\ttls_first_minor=13\n \ttls_as_opt=--fatal-warnings\n \t;;\n   sparc*-*-*)\n@@ -25600,13 +25554,9 @@ foo:\t.long\t25\n     if test x$on_solaris = xyes && test x$gas_flag = xno; then\n       conftest_s='\n \t.section \".tdata\",#alloc,#write,#tls'\n-\ttls_first_major=0\n-\ttls_first_minor=0\n     else\n       conftest_s='\n \t.section \".tdata\",\"awT\",@progbits'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \ttls_as_opt=\"-32 --fatal-warnings\"\n     fi\n     conftest_s=\"$conftest_s\n@@ -25643,8 +25593,6 @@ foo:\t.long\t25\n \taddli\tr0, zero, tls_ie(foo)\n \tauli\tr0, r0, tls_ie_ha16(foo)\n \taddli\tr0, r0, tls_ie_lo16(foo)'\n-\ttls_first_major=2\n-\ttls_first_minor=22\n \ttls_as_opt=\"--fatal-warnings\"\n \t;;\n   tilegx*-*-*)\n@@ -25658,8 +25606,6 @@ foo:\t.long\t25\n \tjal\t   __tls_get_addr\n \tshl16insli r0, zero, hw1_last_tls_ie(foo)\n \tshl16insli r0, r0,   hw0_tls_ie(foo)'\n-\ttls_first_major=2\n-\ttls_first_minor=22\n \ttls_as_opt=\"--fatal-warnings\"\n \t;;\n   xtensa*-*-*)\n@@ -25670,16 +25616,14 @@ foo:\t.long\t25\n \tmovi\ta8, foo@TLSFUNC\n \tmovi\ta10, foo@TLSARG\n \tcallx8.tls a8, foo@TLSCALL'\n-\ttls_first_major=2\n-\ttls_first_minor=19\n \t;;\n esac\n set_have_as_tls=no\n if test \"x$enable_tls\" = xno ; then\n   : # TLS explicitly disabled.\n elif test \"x$enable_tls\" = xyes ; then\n   set_have_as_tls=yes # TLS explicitly enabled.\n-elif test -z \"$tls_first_major\"; then\n+elif test -z \"$conftest_s\"; then\n   : # If we don't have a check, assume no support.\n else\n   { $as_echo \"$as_me:${as_lineno-$LINENO}: checking assembler for thread-local storage support\" >&5"}, {"sha": "c651db7457f9ebc93504925bd78eee2909df1a7d", "filename": "gcc/configure.ac", "status": "modified", "additions": 1, "deletions": 57, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b24c20cb3af3a917cd7bf804e08ac3ef9defb10/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b24c20cb3af3a917cd7bf804e08ac3ef9defb10/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=9b24c20cb3af3a917cd7bf804e08ac3ef9defb10", "patch": "@@ -3653,8 +3653,6 @@ esac], [])\n \n # Thread-local storage - the check is heavily parameterized.\n conftest_s=\n-tls_first_major=\n-tls_first_minor=\n tls_as_opt=\n case \"$target\" in\n changequote(,)dnl\n@@ -3677,15 +3675,11 @@ foo:\t.long\t25\n \tldah\t$2,foo($29)\t\t\t!tprelhi\n \tlda\t$3,foo($2)\t\t\t!tprello\n \tlda\t$4,foo($29)\t\t\t!tprel'\n-\ttls_first_major=2\n-\ttls_first_minor=13\n \ttls_as_opt=--fatal-warnings\n \t;;\n   arc*-*-*)\n     conftest_s='\n \tadd_s r0,r0, @foo@tpoff'\n-\ttls_first_major=2\n-\ttls_first_minor=23\n \t;;\n   cris-*-*|crisv32-*-*)\n     conftest_s='\n@@ -3694,8 +3688,6 @@ x:      .long   25\n         .text\n \tmove.d x:IE,$r10\n \tnop'\n-\ttls_first_major=2\n-\ttls_first_minor=20\n \ttls_as_opt=--fatal-warnings\n \t;;\n   frv*-*-*)\n@@ -3704,8 +3696,6 @@ x:      .long   25\n x:      .long   25\n         .text\n         call    #gettlsoff(x)'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \t;;\n   hppa*-*-linux*)\n     conftest_s='\n@@ -3732,8 +3722,6 @@ foo:\t.long\t25\n \tmfctl %cr27,%t1 \t\t\n \taddil LR%foo-$tls_leoff$,%t1\n \tldo RR%foo-$tls_leoff$(%r1),%t2'\n-\ttls_first_major=2\n-\ttls_first_minor=15\n \ttls_as_opt=--fatal-warnings\n \t;;\n   arm*-*-*)\n@@ -3746,8 +3734,6 @@ foo:\t.long\t25\n .word foo(tlsgd)\n .word foo(tlsldm)\n .word foo(tlsldo)'\n-\ttls_first_major=2\n-\ttls_first_minor=17\n \t;;\n   i[34567]86-*-* | x86_64-*-*)\n     case \"$target\" in\n@@ -3761,8 +3747,6 @@ foo:\t.long\t25\n     if test x$on_solaris = xyes && test x$gas_flag = xno; then\n       conftest_s='\n \t.section .tdata,\"awt\",@progbits'\n-      tls_first_major=0\n-      tls_first_minor=0\n       tls_section_flag=t\n changequote([,])dnl\n       AC_DEFINE(TLS_SECTION_ASM_FLAG, 't',\n@@ -3771,8 +3755,6 @@ changequote(,)dnl\n     else\n       conftest_s='\n \t.section \".tdata\",\"awT\",@progbits'\n-      tls_first_major=2\n-      tls_first_minor=14\n       tls_section_flag=T\n       tls_as_opt=\"--fatal-warnings\"\n     fi\n@@ -3831,8 +3813,6 @@ foo:\tdata8\t25\n \taddl\tr20 = @tprel(foo#), gp\n \tadds\tr22 = @tprel(foo#), r13\n \tmovl\tr24 = @tprel(foo#)'\n-\ttls_first_major=2\n-\ttls_first_minor=13\n \ttls_as_opt=--fatal-warnings\n \t;;\n   microblaze*-*-*)\n@@ -3843,8 +3823,6 @@ x:\n \t.text\n \taddik r5,r20,x@TLSGD\n \taddik r5,r20,x@TLSLDM'\n-\ttls_first_major=2\n-\ttls_first_minor=20\n \ttls_as_opt='--fatal-warnings'\n \t;;\n   mips*-*-*)\n@@ -3860,8 +3838,6 @@ x:\n \tlw $4, %gottprel(x)($28)\n \tlui $4, %tprel_hi(x)\n \taddiu $4, $4, %tprel_lo(x)'\n-\ttls_first_major=2\n-\ttls_first_minor=16\n \ttls_as_opt='-32 --fatal-warnings'\n \t;;\n   m68k-*-*)\n@@ -3876,15 +3852,11 @@ foo:\n \tmove.l x@TLSLDO(%a5),%a0\n \tmove.l x@TLSIE(%a5),%a0\n \tmove.l x@TLSLE(%a5),%a0'\n-\ttls_first_major=2\n-\ttls_first_minor=19\n \ttls_as_opt='--fatal-warnings'\n \t;;\n   nios2-*-*)\n       conftest_s='\n \t.section \".tdata\",\"awT\",@progbits'\n-\ttls_first_major=2\n-\ttls_first_minor=23\n \ttls_as_opt=\"--fatal-warnings\"\n \t;;\n   aarch64*-*-*)\n@@ -3896,8 +3868,6 @@ foo:\t.long\t25\n \tadd   x0, x0, #:tlsgd_lo12:x\n         bl    __tls_get_addr\n \tnop'\n-\ttls_first_major=2\n-\ttls_first_minor=20\n \ttls_as_opt='--fatal-warnings'\n \t;;\n   or1k*-*-*)\n@@ -3908,8 +3878,6 @@ foo:\t.long\t25\n \tl.movhi\tr3, tpoffha(foo)\n \tl.add\tr3, r3, r10\n \tl.lwz\tr4, tpofflo(foo)(r3)'\n-    tls_first_major=2\n-    tls_first_minor=30\n     tls_as_opt=--fatal-warnings\n     ;;\n   powerpc-ibm-aix*)\n@@ -3927,8 +3895,6 @@ LC..1:\n \t.csect a[TL],4\n a:\n \t.space 4'\n-\ttls_first_major=0\n-\ttls_first_minor=0\n \t;;\n   powerpc64*-*-*)\n     conftest_s='\n@@ -3960,8 +3926,6 @@ x3:\t.space 8\n \tadd 9,9,3\n \tbl .__tls_get_addr\n \tnop'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \ttls_as_opt=\"-a64 --fatal-warnings\"\n \t;;\n   powerpc*-*-*)\n@@ -3986,8 +3950,6 @@ x3:\t.space 4\n \taddi 9,2,x1@tprel\n \taddis 9,2,x2@tprel@ha\n \taddi 9,9,x2@tprel@l'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \ttls_as_opt=\"-a32 --fatal-warnings\"\n \t;;\n   riscv*-*-*)\n@@ -3997,8 +3959,6 @@ x:\t.word 2\n \t.text\n \tla.tls.gd a0,x\n         call __tls_get_addr'\n-\ttls_first_major=2\n-\ttls_first_minor=21\n \ttls_as_opt='--fatal-warnings'\n \t;;\n   s390-*-*)\n@@ -4016,8 +3976,6 @@ foo:\t.long\t25\n \tl\t%r1,0(%r1):tls_load:foo\n \tbas\t%r14,0(%r1,%r13):tls_gdcall:foo\n \tbas\t%r14,0(%r1,%r13):tls_ldcall:foo'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \ttls_as_opt=\"-m31 --fatal-warnings\"\n \t;;\n   s390x-*-*)\n@@ -4034,8 +3992,6 @@ foo:\t.long\t25\n \tlarl\t%r1,foo@INDNTPOFF\n \tbrasl\t%r14,__tls_get_offset@PLT:tls_gdcall:foo\n \tbrasl\t%r14,__tls_get_offset@PLT:tls_ldcall:foo'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \ttls_as_opt=\"-m64 -Aesame --fatal-warnings\"\n \t;;\n   sh-*-* | sh[123456789lbe]*-*-*)\n@@ -4048,8 +4004,6 @@ foo:\t.long\t25\n \t.long\tfoo@DTPOFF\n \t.long\tfoo@GOTTPOFF\n \t.long\tfoo@TPOFF'\n-\ttls_first_major=2\n-\ttls_first_minor=13\n \ttls_as_opt=--fatal-warnings\n \t;;\n   sparc*-*-*)\n@@ -4064,13 +4018,9 @@ foo:\t.long\t25\n     if test x$on_solaris = xyes && test x$gas_flag = xno; then\n       conftest_s='\n \t.section \".tdata\",#alloc,#write,#tls'\n-\ttls_first_major=0\n-\ttls_first_minor=0\n     else\n       conftest_s='\n \t.section \".tdata\",\"awT\",@progbits'\n-\ttls_first_major=2\n-\ttls_first_minor=14\n \ttls_as_opt=\"-32 --fatal-warnings\"\n     fi\n     conftest_s=\"$conftest_s\n@@ -4107,8 +4057,6 @@ foo:\t.long\t25\n \taddli\tr0, zero, tls_ie(foo)\n \tauli\tr0, r0, tls_ie_ha16(foo)\n \taddli\tr0, r0, tls_ie_lo16(foo)'\n-\ttls_first_major=2\n-\ttls_first_minor=22\n \ttls_as_opt=\"--fatal-warnings\"\n \t;;\n   tilegx*-*-*)\n@@ -4122,8 +4070,6 @@ foo:\t.long\t25\n \tjal\t   __tls_get_addr\n \tshl16insli r0, zero, hw1_last_tls_ie(foo)\n \tshl16insli r0, r0,   hw0_tls_ie(foo)'\n-\ttls_first_major=2\n-\ttls_first_minor=22\n \ttls_as_opt=\"--fatal-warnings\"\n \t;;\n   xtensa*-*-*)\n@@ -4134,8 +4080,6 @@ foo:\t.long\t25\n \tmovi\ta8, foo@TLSFUNC\n \tmovi\ta10, foo@TLSARG\n \tcallx8.tls a8, foo@TLSCALL'\n-\ttls_first_major=2\n-\ttls_first_minor=19\n \t;;\n changequote([,])dnl\n esac\n@@ -4144,7 +4088,7 @@ if test \"x$enable_tls\" = xno ; then\n   : # TLS explicitly disabled.\n elif test \"x$enable_tls\" = xyes ; then\n   set_have_as_tls=yes # TLS explicitly enabled.\n-elif test -z \"$tls_first_major\"; then\n+elif test -z \"$conftest_s\"; then\n   : # If we don't have a check, assume no support.\n else\n   gcc_GAS_CHECK_FEATURE(thread-local storage support, gcc_cv_as_tls,"}]}