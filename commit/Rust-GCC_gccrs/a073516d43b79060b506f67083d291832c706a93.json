{"sha": "a073516d43b79060b506f67083d291832c706a93", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTA3MzUxNmQ0M2I3OTA2MGI1MDZmNjcwODNkMjkxODMyYzcwNmE5Mw==", "commit": {"author": {"name": "Danny Smith", "email": "dannysmith@users.sourceforge.net", "date": "2006-08-25T00:24:10Z"}, "committer": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2006-08-25T00:24:10Z"}, "message": "re PR driver/28528 (C language extensions override -x in C++ driver)\n\n\tPR driver/28528\n\t* g++spec.c (lang_specific_driver): Always check if we need to\n\tswallow a space-separated  arg to '-x'.\n\t* lang-specs.h: Don't create ouput files for '-xc++-header'\n\tif -fsyntax-only.\n\nFrom-SVN: r116392", "tree": {"sha": "b944faa7ffa62104907fd4354141ca7f2270088c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b944faa7ffa62104907fd4354141ca7f2270088c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a073516d43b79060b506f67083d291832c706a93", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a073516d43b79060b506f67083d291832c706a93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a073516d43b79060b506f67083d291832c706a93", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a073516d43b79060b506f67083d291832c706a93/comments", "author": null, "committer": null, "parents": [{"sha": "df1195dbc5aac289e48e4f0a59b1fa3658ce2bb1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df1195dbc5aac289e48e4f0a59b1fa3658ce2bb1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df1195dbc5aac289e48e4f0a59b1fa3658ce2bb1"}], "stats": {"total": 36, "additions": 22, "deletions": 14}, "files": [{"sha": "c3bb4f32614d2773b6ea422ca474dd49325f472f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a073516d43b79060b506f67083d291832c706a93/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a073516d43b79060b506f67083d291832c706a93/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a073516d43b79060b506f67083d291832c706a93", "patch": "@@ -1,3 +1,11 @@\n+2006-08-24  Danny Smith   <dannysmith@users.sourceforge.net>\n+\n+\tPR driver/28528\n+\t* g++spec.c (lang_specific_driver): Always check if we need to\n+\tswallow a space-separated  arg to '-x'.\n+\t* lang-specs.h: Don't create ouput files for '-xc++-header'\n+\tif -fsyntax-only.\n+\n 2006-08-23  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/27714"}, {"sha": "b58fdcd7fed096843b1a6aa30e2370fe7bf0c9da", "filename": "gcc/cp/g++spec.c", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a073516d43b79060b506f67083d291832c706a93/gcc%2Fcp%2Fg%2B%2Bspec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a073516d43b79060b506f67083d291832c706a93/gcc%2Fcp%2Fg%2B%2Bspec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fg%2B%2Bspec.c?ref=a073516d43b79060b506f67083d291832c706a93", "patch": "@@ -149,19 +149,19 @@ lang_specific_driver (int *in_argc, const char *const **in_argv,\n \t    saw_verbose_flag = 1;\n \t  else if (strncmp (argv[i], \"-x\", 2) == 0)\n \t    {\n-\t      if (library == 0)\n-\t\t{\n-\t\t  const char * arg;\n-\t\t  if (argv[i][2] != '\\0')\n-\t\t    arg = argv[i]+2;\n-\t\t  else if (argv[i+1] != NULL)\n-\t\t    arg = argv[i+1];\n-\t\t  else  /* Error condition, message will be printed later.  */\n-\t\t    arg = \"\";\n-\t\t  if (strcmp (arg, \"c++\") == 0\n-\t\t      || strcmp (arg, \"c++-cpp-output\") == 0)\n-\t\t    library = 1;\n-\t\t}\n+\t      const char * arg;\n+\t      if (argv[i][2] != '\\0')\n+\t\targ = argv[i]+2;\n+\t      else if ((argv[i+1]) != NULL)\n+\t\t/* We need to swallow arg on next loop.  */\n+\t\tquote = arg = argv[i+1];\n+  \t      else  /* Error condition, message will be printed later.  */\n+\t\targ = \"\";\n+\t      if (library == 0\n+\t\t  && (strcmp (arg, \"c++\") == 0\n+\t\t      || strcmp (arg, \"c++-cpp-output\") == 0))\n+\t\tlibrary = 1;\n+\t\t\n \t      saw_speclang = 1;\n \t    }\n \t  /* Arguments that go directly to the linker might be .o files,"}, {"sha": "e16d2f4185c8e421a5b4a51cde0a8f2d698df523", "filename": "gcc/cp/lang-specs.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a073516d43b79060b506f67083d291832c706a93/gcc%2Fcp%2Flang-specs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a073516d43b79060b506f67083d291832c706a93/gcc%2Fcp%2Flang-specs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Flang-specs.h?ref=a073516d43b79060b506f67083d291832c706a93", "patch": "@@ -43,7 +43,7 @@ Boston, MA 02110-1301, USA.  */\n       cc1plus %{save-temps|no-integrated-cpp:-fpreprocessed %{save-temps:%b.ii} %{!save-temps:%g.ii}}\\\n \t      %{!save-temps:%{!no-integrated-cpp:%(cpp_unique_options)}}\\\n \t%(cc1_options) %2 %{+e1*}\\\n-\t-o %g.s %{!o*:--output-pch=%i.gch} %W{o*:--output-pch=%*}%V}}}\",\n+\t%{!fsyntax-only:-o %g.s %{!o*:--output-pch=%i.gch} %W{o*:--output-pch=%*}%V}}}}\",\n      CPLUSPLUS_CPP_SPEC, 0, 0},\n   {\"@c++\",\n     \"%{E|M|MM:cc1plus -E %(cpp_options) %2 %(cpp_debug_options)}\\"}]}