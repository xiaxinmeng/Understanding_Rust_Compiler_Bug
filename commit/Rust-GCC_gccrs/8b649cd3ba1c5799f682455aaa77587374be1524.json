{"sha": "8b649cd3ba1c5799f682455aaa77587374be1524", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGI2NDljZDNiYTFjNTc5OWY2ODI0NTVhYWE3NzU4NzM3NGJlMTUyNA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2016-07-21T19:39:03Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2016-07-21T19:39:03Z"}, "message": "Fix naming, qualification and broken test for propagate_const\n\n\t* include/experimental/propagate_const (propagate_const::__t): Rename\n\tto _M_t and remove comment. Qualify std::move and std::forward.\n\t* testsuite/experimental/propagate_const/cons/default.cc: Fix test.\n\nFrom-SVN: r238611", "tree": {"sha": "97002a670d10a97e8ca8184d3e7deb0af38fd1ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97002a670d10a97e8ca8184d3e7deb0af38fd1ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b649cd3ba1c5799f682455aaa77587374be1524", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b649cd3ba1c5799f682455aaa77587374be1524", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b649cd3ba1c5799f682455aaa77587374be1524", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b649cd3ba1c5799f682455aaa77587374be1524/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "509b778f6cb7c99159ecdf3e4caa28468b2f46e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/509b778f6cb7c99159ecdf3e4caa28468b2f46e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/509b778f6cb7c99159ecdf3e4caa28468b2f46e5"}], "stats": {"total": 35, "additions": 20, "deletions": 15}, "files": [{"sha": "ce7490dd0f50643047fb085f3dffbc5cac5121be", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b649cd3ba1c5799f682455aaa77587374be1524/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b649cd3ba1c5799f682455aaa77587374be1524/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=8b649cd3ba1c5799f682455aaa77587374be1524", "patch": "@@ -1,5 +1,9 @@\n 2016-07-21  Jonathan Wakely  <jwakely@redhat.com>\n \n+\t* include/experimental/propagate_const (propagate_const::__t): Rename\n+\tto _M_t and remove comment. Qualify std::move and std::forward.\n+\t* testsuite/experimental/propagate_const/cons/default.cc: Fix test.\n+\n \t* testsuite/23_containers/vector/zero_sized_allocations.cc:\n \tDefine sized deallocation function.\n \t* testsuite/util/testsuite_new_operators.h:"}, {"sha": "75cd8c0a4bd4ee54eed28a397154900b48d63b9a", "filename": "libstdc++-v3/include/experimental/propagate_const", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b649cd3ba1c5799f682455aaa77587374be1524/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fpropagate_const", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b649cd3ba1c5799f682455aaa77587374be1524/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fpropagate_const", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fpropagate_const?ref=8b649cd3ba1c5799f682455aaa77587374be1524", "patch": "@@ -116,14 +116,14 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t\t\t\t is_convertible<_Up&&, _Tp>>::value, bool\n \t\t\t  >::type=true>\n       constexpr propagate_const(propagate_const<_Up>&& __pu)\n-\t: __t(move(get_underlying(__pu)))\n+\t: _M_t(std::move(get_underlying(__pu)))\n       {}\n       template <typename _Up, typename\n \t\tenable_if<__and_<is_constructible<_Tp, _Up&&>,\n \t\t\t\t __not_<is_convertible<_Up&&, _Tp>>>::value,\n \t\t\t  bool>::type=false>\n       constexpr explicit propagate_const(propagate_const<_Up>&& __pu)\n-\t: __t(move(get_underlying(__pu)))\n+\t: _M_t(std::move(get_underlying(__pu)))\n       {}\n       template <typename _Up, typename\n \t\tenable_if<__and_<is_constructible<_Tp, _Up&&>,\n@@ -132,7 +132,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t\t\t\t\t  typename decay<_Up>::type>>\n \t\t\t\t >::value, bool>::type=true>\n       constexpr propagate_const(_Up&& __u)\n-\t: __t(forward<_Up>(__u))\n+\t: _M_t(std::forward<_Up>(__u))\n       {}\n       template <typename _Up, typename\n \t\tenable_if<__and_<is_constructible<_Tp, _Up&&>,\n@@ -141,7 +141,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t\t\t\t\t  typename decay<_Up>::type>>\n \t\t\t\t >::value, bool>::type=false>\n       constexpr explicit propagate_const(_Up&& __u)\n-\t: __t(forward<_Up>(__u))\n+\t: _M_t(std::forward<_Up>(__u))\n       {}\n \n       // [propagate_const.assignment], assignment\n@@ -152,7 +152,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t\ttypename enable_if<is_convertible<_Up&&, _Tp>::value>::type>\n       constexpr propagate_const& operator=(propagate_const<_Up>&& __pu)\n       {\n-\t__t = move(get_underlying(__pu));\n+\t_M_t = std::move(get_underlying(__pu));\n       }\n \n       template <typename _Up, typename =\n@@ -162,13 +162,13 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t\t\t\t\t  >::value>::type>\n       constexpr propagate_const& operator=(_Up&& __u)\n       {\n-\t__t = forward<_Up>(__u);\n+\t_M_t = std::forward<_Up>(__u);\n       }\n \n       // [propagate_const.const_observers], const observers\n       explicit constexpr operator bool() const\n       {\n-\treturn bool(__t);\n+\treturn bool(_M_t);\n       }\n \n       constexpr const element_type* operator->() const\n@@ -193,7 +193,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n       constexpr const element_type* get() const\n       {\n-\treturn __to_raw_pointer(__t);\n+\treturn __to_raw_pointer(_M_t);\n       }\n \n       // [propagate_const.non_const_observers], non-const observers\n@@ -219,19 +219,19 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n       constexpr element_type* get()\n       {\n-\treturn __to_raw_pointer(__t);\n+\treturn __to_raw_pointer(_M_t);\n       }\n \n       // [propagate_const.modifiers], modifiers\n       constexpr void\n       swap(propagate_const& __pt) noexcept(__is_nothrow_swappable<_Tp>::value)\n       {\n \tusing std::swap;\n-\tswap(__t, get_underlying(__pt));\n+\tswap(_M_t, get_underlying(__pt));\n       }\n \n     private:\n-      _Tp __t; //exposition only\n+      _Tp _M_t;\n     };\n \n   // [propagate_const.relational], relational operators\n@@ -408,14 +408,14 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     constexpr const _Tp&\n     get_underlying(const propagate_const<_Tp>& __pt) noexcept\n     {\n-      return __pt.__t;\n+      return __pt._M_t;\n     }\n \n   template <typename _Tp>\n     constexpr _Tp&\n     get_underlying(propagate_const<_Tp>& __pt) noexcept\n     {\n-      return __pt.__t;\n+      return __pt._M_t;\n     }\n \n   // @} group propagate_const"}, {"sha": "ed597fb2cfa9a65b0fcdfc41bd59db68c73d49ea", "filename": "libstdc++-v3/testsuite/experimental/propagate_const/cons/default.cc", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b649cd3ba1c5799f682455aaa77587374be1524/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fpropagate_const%2Fcons%2Fdefault.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b649cd3ba1c5799f682455aaa77587374be1524/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fpropagate_const%2Fcons%2Fdefault.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Fpropagate_const%2Fcons%2Fdefault.cc?ref=8b649cd3ba1c5799f682455aaa77587374be1524", "patch": "@@ -27,6 +27,7 @@ int main()\n {\n   constexpr propagate_const<int*> test1{};\n   static_assert(!test1.get(), \"\");\n-  propagate_const<int*> test2;\n-  VERIFY(!test2.get());\n+  propagate_const<int*> test2; // wrapped pointer is not initialized\n+  propagate_const<int*> test3{};\n+  VERIFY(!test3.get());\n }"}]}