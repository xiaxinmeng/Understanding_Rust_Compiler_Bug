{"sha": "df7b13598a01b9a09bbe89d672d28dc2525ff21d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGY3YjEzNTk4YTAxYjlhMDliYmU4OWQ2NzJkMjhkYzI1MjVmZjIxZA==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2001-06-09T06:49:13Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2001-06-09T06:49:13Z"}, "message": "acinclude.m4 (GLIBCPP_CHECK_WCHAR_T_SUPPORT): Check for fgetwc, fgetws.\n\n\n2001-06-09  Benjamin Kosnik  <bkoz@redhat.com>\n\n\t* acinclude.m4 (GLIBCPP_CHECK_WCHAR_T_SUPPORT): Check for fgetwc,\n\tfgetws.\n\t* aclocal.m4: Regenerate.\n\t* configure: Regenerate.\n\t* include/c_std/bits/std_cwchar.h: Remove duplicate fgetwc\n\tinjection, guard fgetwc, fgetws.\n\t* include/c_std/bits/std_cstdio.h: Remove superfluous includes.\n\t* include/c_std/bits/std_clocale.h: And here.\n\t* include/c_std/bits/std_cctype.h: And here.\n\t* include/c_std/bits/std_cstdlib.h (strtof): Guard strtof injection.\n\n\t* config/basic_file_stdio.h: Don't include unistd.h.\n\t* config/c_io_stdio.h: Don't use compatibility headers.\n\t* libsupc++/eh_terminate.cc: Qualify abort.\n\t(__terminate): And here.\n\t* libsupc++/eh_catch.cc (__cxa_end_catch): Qualify abort.\n\nFrom-SVN: r43070", "tree": {"sha": "cb7004dc371071fb7172ff76001cb2bec65ca4e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cb7004dc371071fb7172ff76001cb2bec65ca4e4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df7b13598a01b9a09bbe89d672d28dc2525ff21d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df7b13598a01b9a09bbe89d672d28dc2525ff21d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df7b13598a01b9a09bbe89d672d28dc2525ff21d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df7b13598a01b9a09bbe89d672d28dc2525ff21d/comments", "author": null, "committer": null, "parents": [{"sha": "7ae4a70a1ca0cab7592ba523c1f08c9e20f5fc69", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ae4a70a1ca0cab7592ba523c1f08c9e20f5fc69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ae4a70a1ca0cab7592ba523c1f08c9e20f5fc69"}], "stats": {"total": 1505, "additions": 820, "deletions": 685}, "files": [{"sha": "97ab331f899ebe1d2cdcae95b8289d4889c661a5", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -1,3 +1,22 @@\n+2001-06-09  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\t* acinclude.m4 (GLIBCPP_CHECK_WCHAR_T_SUPPORT): Check for fgetwc,\n+\tfgetws.\n+\t* aclocal.m4: Regenerate.\n+\t* configure: Regenerate.\n+\t* include/c_std/bits/std_cwchar.h: Remove duplicate fgetwc\n+\tinjection, guard fgetwc, fgetws.\n+\t* include/c_std/bits/std_cstdio.h: Remove superfluous includes.\n+\t* include/c_std/bits/std_clocale.h: And here.\n+\t* include/c_std/bits/std_cctype.h: And here.\n+\t* include/c_std/bits/std_cstdlib.h (strtof): Guard strtof injection.\n+\n+\t* config/basic_file_stdio.h: Don't include unistd.h.\n+\t* config/c_io_stdio.h: Don't use compatibility headers.\n+\t* libsupc++/eh_terminate.cc: Qualify abort.\n+\t(__terminate): And here.\n+\t* libsupc++/eh_catch.cc (__cxa_end_catch): Qualify abort.\n+\t\n 2001-06-08  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* include/c_std/bits/std_cstdlib.h: Remove _Exit, strtof injections."}, {"sha": "d4d0c05e3e185c9392ca28260dc03406997d346a", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -813,6 +813,9 @@ AC_DEFUN(GLIBCPP_CHECK_WCHAR_T_SUPPORT, [\n     AC_CHECK_FUNCS(wcslen wmemchr wmemcmp wmemcpy wmemmove wmemset \\\n     wcsrtombs mbsrtowcs, ac_wfuncs=yes, ac_wfuncs=no)\n   \n+    dnl Do quick checks for things injected into std:: by the c_std headers.\n+    AC_CHECK_FUNCS(fgetwc, fgetws)\n+\n     AC_MSG_CHECKING([for ISO C99 wchar_t support])\n     if test x\"$has_weof\" = xyes && test x\"$has_wchar_minmax\" = xyes \\\n        && test x\"$ac_wfuncs\" = xyes; then"}, {"sha": "26eabacbc8fb4c4cc5ee5c21b719080d3546d42e", "filename": "libstdc++-v3/aclocal.m4", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Faclocal.m4?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -825,6 +825,9 @@ AC_DEFUN(GLIBCPP_CHECK_WCHAR_T_SUPPORT, [\n     AC_CHECK_FUNCS(wcslen wmemchr wmemcmp wmemcpy wmemmove wmemset \\\n     wcsrtombs mbsrtowcs, ac_wfuncs=yes, ac_wfuncs=no)\n   \n+    dnl Do quick checks for things injected into std:: by the c_std headers.\n+    AC_CHECK_FUNCS(fgetwc, fgetws)\n+\n     AC_MSG_CHECKING([for ISO C99 wchar_t support])\n     if test x\"$has_weof\" = xyes && test x\"$has_wchar_minmax\" = xyes \\\n        && test x\"$ac_wfuncs\" = xyes; then"}, {"sha": "c267376314f49baa15d61418ea006c6327163588", "filename": "libstdc++-v3/config.h.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig.h.in?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -315,6 +315,9 @@\n /* Define if you have the fabsl function.  */\n #undef HAVE_FABSL\n \n+/* Define if you have the fgetwc function.  */\n+#undef HAVE_FGETWC\n+\n /* Define if you have the finite function.  */\n #undef HAVE_FINITE\n "}, {"sha": "565bfea4d40bd2e6ccef729be566a6029de6210e", "filename": "libstdc++-v3/config/basic_file_stdio.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Fconfig%2Fbasic_file_stdio.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Fconfig%2Fbasic_file_stdio.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fbasic_file_stdio.h?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -31,8 +31,6 @@\n // ISO C++ 14882: 27.8  File-based streams\n //\n \n-#include <unistd.h>\n-\n namespace std \n {\n   // Generic definitions for __basic_file"}, {"sha": "f24f6a882317f45fbb355ab53bb46d6d97ec4927", "filename": "libstdc++-v3/config/c_io_stdio.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Fconfig%2Fc_io_stdio.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Fconfig%2Fc_io_stdio.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fc_io_stdio.h?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -32,8 +32,8 @@\n #ifndef _CPP_IO_STDIO_H\n #define _CPP_IO_STDIO_H 1\n \n-#include <stdio.h>\n-#include <stddef.h>\n+#include <cstdio>\n+#include <cstddef>\n #include <bits/gthr.h>\n \n namespace std "}, {"sha": "978e38e6c07043d93e375d50be034739f6c293bb", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 778, "deletions": 666, "changes": 1444, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d"}, {"sha": "ed7817114d5fa48502b95f7814271d341b7f4c71", "filename": "libstdc++-v3/include/c_std/bits/std_cctype.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cctype.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cctype.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cctype.h?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -34,8 +34,6 @@\n #ifndef _CPP_CCTYPE\n #define _CPP_CCTYPE 1\n \n-#include <bits/c++config.h>\n-\n #pragma GCC system_header\n #include_next <ctype.h>\n "}, {"sha": "eace7a0019c464db7ebbdff92dcca2a820d0bb05", "filename": "libstdc++-v3/include/c_std/bits/std_clocale.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_clocale.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_clocale.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_clocale.h?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -34,8 +34,6 @@\n #ifndef _CPP_CLOCALE\n #define _CPP_CLOCALE 1\n \n-#include <bits/c++config.h>\n-\n #pragma GCC system_header\n #include_next <locale.h>\n "}, {"sha": "5f2ccf20b23bff8a03187d95b66d390009b0f3ba", "filename": "libstdc++-v3/include/c_std/bits/std_cstdio.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cstdio.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cstdio.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cstdio.h?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -34,10 +34,6 @@\n #ifndef _CPP_CSTDIO\n #define _CPP_CSTDIO 1\n \n-#include <bits/c++config.h>\n-#include <bits/std_cstdarg.h>\n-#include <bits/std_cstddef.h>\n-\n #pragma GCC system_header\n #include_next <stdio.h>\n "}, {"sha": "f1023c23127c4de34d494a6746bf56f5ec427de7", "filename": "libstdc++-v3/include/c_std/bits/std_cstdlib.h", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cstdlib.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cstdlib.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cstdlib.h?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -44,7 +44,7 @@\n #undef atoi\n #undef atol\n #undef strtod\n-//#undef strtof\n+#undef strtof\n #undef strtol\n #undef strtoul\n #undef rand\n@@ -88,7 +88,9 @@ namespace std\n   using ::atoi;\n   using ::atol;\n   using ::strtod;\n-  //  using ::strtof;\n+#if _GLIBCPP_HAVE_STRTOF\n+  using ::strtof;\n+#endif\n   using ::strtol;\n   using ::strtoul;\n   using ::rand;"}, {"sha": "8ed0d8a53b3db54324fcf1b36f886b7968d36190", "filename": "libstdc++-v3/include/c_std/bits/std_cwchar.h", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cwchar.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cwchar.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fbits%2Fstd_cwchar.h?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -127,9 +127,12 @@ namespace std\n \n   using ::btowc;\n   using ::wctob;\n+#if _GLIBCPP_HAVE_FGETWC\n   using ::fgetwc;\n-  using ::fgetwc;\n+#endif\n+#if _GLIBCPP_HAVE_FGETWS\n   using ::fgetws;\n+#endif\n   using ::fputwc;\n   using ::fputws;\n   using ::fwide;"}, {"sha": "f6879075602d7c926ace216ad280de793faface2", "filename": "libstdc++-v3/libsupc++/eh_catch.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Feh_catch.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Feh_catch.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Feh_catch.cc?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -89,7 +89,7 @@ __cxa_end_catch ()\n     }\n   else if (count < 0)\n     // A bug in the exception handling library or compiler.\n-    abort ();\n+    std::abort ();\n \n   header->handlerCount = count;\n }"}, {"sha": "58a6ea46b3441e2c19e278310f883eb4145978d5", "filename": "libstdc++-v3/libsupc++/eh_terminate.cc", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Feh_terminate.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df7b13598a01b9a09bbe89d672d28dc2525ff21d/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Feh_terminate.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Feh_terminate.cc?ref=df7b13598a01b9a09bbe89d672d28dc2525ff21d", "patch": "@@ -37,17 +37,17 @@\n using namespace __cxxabiv1;\n \n /* The current installed user handlers.  */\n-std::terminate_handler __cxxabiv1::__terminate_handler = abort;\n+std::terminate_handler __cxxabiv1::__terminate_handler = std::abort;\n std::unexpected_handler __cxxabiv1::__unexpected_handler = std::terminate;\n \n void\n __cxxabiv1::__terminate (std::terminate_handler handler)\n {\n   try {\n     handler ();\n-    abort ();\n+    std::abort ();\n   } catch (...) {\n-    abort ();\n+    std::abort ();\n   }\n }\n "}]}