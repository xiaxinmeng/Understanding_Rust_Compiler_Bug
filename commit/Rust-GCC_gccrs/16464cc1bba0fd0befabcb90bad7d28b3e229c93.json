{"sha": "16464cc1bba0fd0befabcb90bad7d28b3e229c93", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTY0NjRjYzFiYmEwZmQwYmVmYWJjYjkwYmFkN2QyOGIzZTIyOWM5Mw==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-05-30T13:33:17Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-05-30T13:33:17Z"}, "message": "re PR c/27718 (ICE with sizeof of incomplete type)\n\n\tPR c/27718\n\t* c-typeck.c (c_expr_sizeof_type): Handle invalid types.\n\n\t* gcc.dg/sizeof-1.c: New test.\n\nFrom-SVN: r114234", "tree": {"sha": "e7c9695a52b0a71525c8ba2bc639cee7578958bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7c9695a52b0a71525c8ba2bc639cee7578958bc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/16464cc1bba0fd0befabcb90bad7d28b3e229c93", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16464cc1bba0fd0befabcb90bad7d28b3e229c93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16464cc1bba0fd0befabcb90bad7d28b3e229c93", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16464cc1bba0fd0befabcb90bad7d28b3e229c93/comments", "author": null, "committer": null, "parents": [{"sha": "d91d2db759502aceabdc93e0fb0f5c02370953aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d91d2db759502aceabdc93e0fb0f5c02370953aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d91d2db759502aceabdc93e0fb0f5c02370953aa"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "c5470be129a08c96fc969595ecfb29a2280958ac", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16464cc1bba0fd0befabcb90bad7d28b3e229c93/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16464cc1bba0fd0befabcb90bad7d28b3e229c93/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=16464cc1bba0fd0befabcb90bad7d28b3e229c93", "patch": "@@ -1,3 +1,8 @@\n+2006-05-30  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c/27718\n+\t* c-typeck.c (c_expr_sizeof_type): Handle invalid types.\n+\n 2006-05-30  Zdenek Dvorak <dvorakz@suse.cz>\n \n \tPR tree-optimization/27779"}, {"sha": "2c5736cf769e505075c1a2aba51675e5463126b4", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16464cc1bba0fd0befabcb90bad7d28b3e229c93/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16464cc1bba0fd0befabcb90bad7d28b3e229c93/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=16464cc1bba0fd0befabcb90bad7d28b3e229c93", "patch": "@@ -2153,7 +2153,8 @@ c_expr_sizeof_type (struct c_type_name *t)\n   type = groktypename (t);\n   ret.value = c_sizeof (type);\n   ret.original_code = ERROR_MARK;\n-  pop_maybe_used (C_TYPE_VARIABLE_SIZE (type));\n+  pop_maybe_used (type != error_mark_node\n+\t\t  ? C_TYPE_VARIABLE_SIZE (type) : false);\n   return ret;\n }\n "}, {"sha": "dc0ec7cf69894f96c2ffb2fa71bcd5ed44e120b9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16464cc1bba0fd0befabcb90bad7d28b3e229c93/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16464cc1bba0fd0befabcb90bad7d28b3e229c93/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=16464cc1bba0fd0befabcb90bad7d28b3e229c93", "patch": "@@ -1,3 +1,8 @@\n+2006-05-30  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c/27718\n+\t* gcc.dg/sizeof-1.c: New test.\n+\n 2006-05-30  Uros Bizjak  <uros@kss-loka.si>\n \n \tPR target/27790"}, {"sha": "9541a4c273ad5de0b701d1aa01dd95efa06bb5ca", "filename": "gcc/testsuite/gcc.dg/sizeof-1.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16464cc1bba0fd0befabcb90bad7d28b3e229c93/gcc%2Ftestsuite%2Fgcc.dg%2Fsizeof-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16464cc1bba0fd0befabcb90bad7d28b3e229c93/gcc%2Ftestsuite%2Fgcc.dg%2Fsizeof-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fsizeof-1.c?ref=16464cc1bba0fd0befabcb90bad7d28b3e229c93", "patch": "@@ -0,0 +1,4 @@\n+/* PR c/27718 */\n+/* { dg-do compile } */\n+\n+int i = sizeof(struct A[]);  /* { dg-error \"incomplete\" } */"}]}