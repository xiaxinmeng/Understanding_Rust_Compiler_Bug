{"sha": "ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWJiM2FmZTJiOThhOWE0YjFjOGNjNWZkMjc0NWExMDM3YzA2ZDgyNw==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-10-22T18:18:59Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-10-22T18:18:59Z"}, "message": "re PR fortran/92174 (runtime error: index 15 out of bounds for type 'gfc_expr *[15])\n\n2019-10-22  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/92174\n\t* decl.c (attr_decl1): Move check for F2018:C822 from here ...\n\t* array.c (gfc_set_array_spec): ... to here.\n\nFrom-SVN: r277297", "tree": {"sha": "4e4e62cda2e1b3490017269ea71f050964e445a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e4e62cda2e1b3490017269ea71f050964e445a5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827/comments", "author": null, "committer": null, "parents": [{"sha": "1ee4c3da8668d913419209d484a7cb5a03e7b1fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ee4c3da8668d913419209d484a7cb5a03e7b1fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ee4c3da8668d913419209d484a7cb5a03e7b1fb"}], "stats": {"total": 29, "additions": 20, "deletions": 9}, "files": [{"sha": "841aa66f378536e9b33706110cff017dcf7af100", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827", "patch": "@@ -1,3 +1,9 @@\n+2019-10-22  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/92174\n+\t* decl.c (attr_decl1): Move check for F2018:C822 from here ...\n+\t* array.c (gfc_set_array_spec): ... to here. \n+\n 2019-10-18  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/69455"}, {"sha": "f0980dd9cefae783c2f807ff7a6e6034392ba6e4", "filename": "gcc/fortran/array.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827/gcc%2Ffortran%2Farray.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827/gcc%2Ffortran%2Farray.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Farray.c?ref=ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827", "patch": "@@ -862,6 +862,10 @@ gfc_set_array_spec (gfc_symbol *sym, gfc_array_spec *as, locus *error_loc)\n \n       sym->as->cotype = as->cotype;\n       sym->as->corank = as->corank;\n+      /* Check F2018:C822.  */\n+      if (sym->as->rank + sym->as->corank > GFC_MAX_DIMENSIONS)\n+\tgoto too_many;\n+\n       for (i = 0; i < as->corank; i++)\n \t{\n \t  sym->as->lower[sym->as->rank + i] = as->lower[i];\n@@ -880,6 +884,10 @@ gfc_set_array_spec (gfc_symbol *sym, gfc_array_spec *as, locus *error_loc)\n       sym->as->cray_pointee = as->cray_pointee;\n       sym->as->cp_was_assumed = as->cp_was_assumed;\n \n+      /* Check F2018:C822.  */\n+      if (sym->as->rank + sym->as->corank > GFC_MAX_DIMENSIONS)\n+\tgoto too_many;\n+\n       for (i = 0; i < sym->as->corank; i++)\n \t{\n \t  sym->as->lower[as->rank + i] = sym->as->lower[i];\n@@ -894,6 +902,12 @@ gfc_set_array_spec (gfc_symbol *sym, gfc_array_spec *as, locus *error_loc)\n \n   free (as);\n   return true;\n+\n+too_many:\n+\n+  gfc_error (\"rank + corank of %qs exceeds %d at %C\", sym->name,\n+\t     GFC_MAX_DIMENSIONS);\n+  return false;\n }\n \n "}, {"sha": "25a3967fac85e46408e3b40008293381b5bf52be", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=ebb3afe2b98a9a4b1c8cc5fd2745a1037c06d827", "patch": "@@ -8524,15 +8524,6 @@ attr_decl1 (void)\n       goto cleanup;\n     }\n \n-  /* Check F2018:C822.  */\n-  if (sym->attr.dimension && sym->attr.codimension\n-      && sym->as && sym->as->rank + sym->as->corank > 15)\n-    {\n-      gfc_error (\"rank + corank of %qs exceeds 15 at %C\", sym->name);\n-      m = MATCH_ERROR;\n-      return m;\n-    }\n-\n   if (sym->attr.cray_pointee && sym->as != NULL)\n     {\n       /* Fix the array spec.  */"}]}