{"sha": "acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWNmZGFkYjQ3YmUzYTBjODRmZDNhM2JiNDM5N2FjOGQzN2ZhYjhiMg==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2011-11-09T07:51:12Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2011-11-09T07:51:12Z"}, "message": "PR debug/51032 - ICE in dbxout_type, at dbxout.c:2372\n\ngcc/cp/\n\n\t* decl2.c (check_member_template): Accept alias templates and ...\n\t* parser.c (cp_parser_alias_declaration): ... use it here.\n\ngcc/testsuite/\n\n\t* g++.dg/cpp0x/alias-decl-debug-0.C: New test.\n\nFrom-SVN: r181193", "tree": {"sha": "493b7b7c7817efe6b540f19cb9ce7d1f9fee0568", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/493b7b7c7817efe6b540f19cb9ce7d1f9fee0568"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2/comments", "author": null, "committer": null, "parents": [{"sha": "f354bf1d8c08e76d572def991c7b658ac9bc15fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f354bf1d8c08e76d572def991c7b658ac9bc15fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f354bf1d8c08e76d572def991c7b658ac9bc15fb"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "6445befedd33d0a2c1f8393052f135ea918f7537", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2", "patch": "@@ -1,3 +1,9 @@\n+2011-11-09  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR debug/51032\n+\t* decl2.c (check_member_template): Accept alias templates and ...\n+    \t* parser.c (cp_parser_alias_declaration): ... use it here.\n+\n 2011-11-08  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/50835"}, {"sha": "4e24755e2a5e2a7b78b8f66db2a4a4b64886dc07", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2", "patch": "@@ -495,6 +495,7 @@ check_member_template (tree tmpl)\n   decl = DECL_TEMPLATE_RESULT (tmpl);\n \n   if (TREE_CODE (decl) == FUNCTION_DECL\n+      || DECL_ALIAS_TEMPLATE_P (tmpl)\n       || (TREE_CODE (decl) == TYPE_DECL\n \t  && MAYBE_CLASS_TYPE_P (TREE_TYPE (decl))))\n     {"}, {"sha": "fde4c6d838f8daad62eb963a74a716deaa2f1e68", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2", "patch": "@@ -14932,6 +14932,7 @@ cp_parser_alias_declaration (cp_parser* parser)\n   location_t id_location;\n   cp_declarator *declarator;\n   cp_decl_specifier_seq decl_specs;\n+  bool member_p;\n \n   /* Look for the `using' keyword.  */\n   cp_parser_require_keyword (parser, RID_USING, RT_USING);\n@@ -14957,7 +14958,8 @@ cp_parser_alias_declaration (cp_parser* parser)\n   declarator = make_id_declarator (NULL_TREE, id, sfk_none);\n   declarator->id_loc = id_location;\n \n-  if (at_class_scope_p ())\n+  member_p = at_class_scope_p ();\n+  if (member_p)\n     decl = grokfield (declarator, &decl_specs, NULL_TREE, false,\n \t\t      NULL_TREE, attributes);\n   else\n@@ -14976,7 +14978,12 @@ cp_parser_alias_declaration (cp_parser* parser)\n   if (DECL_LANG_SPECIFIC (decl)\n       && DECL_TEMPLATE_INFO (decl)\n       && PRIMARY_TEMPLATE_P (DECL_TI_TEMPLATE (decl)))\n-    decl = DECL_TI_TEMPLATE (decl);\n+    {\n+      decl = DECL_TI_TEMPLATE (decl);\n+      if (member_p)\n+\tcheck_member_template (decl);\n+    }\n+\n   return decl;\n }\n "}, {"sha": "4abcf0784a4feff4b710e3dd4e9f7b9c87a2e90c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2", "patch": "@@ -1,3 +1,8 @@\n+2011-11-09  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR debug/51032\n+\t* g++.dg/cpp0x/alias-decl-debug-0.C: New test.\n+\n 2011-11-09  Ira Rosen  <ira.rosen@linaro.org>\n \n \tPR tree-optimization/51015"}, {"sha": "4c00bdd4046966ec5d7cfd78dc812aefe0c12276", "filename": "gcc/testsuite/g++.dg/cpp0x/alias-decl-debug-0.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falias-decl-debug-0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falias-decl-debug-0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falias-decl-debug-0.C?ref=acfdadb47be3a0c84fd3a3bb4397ac8d37fab8b2", "patch": "@@ -0,0 +1,11 @@\n+// Origin: PR c++/51032\n+// { dg-options \"-std=c++0x -gstabs+\" }\n+\n+template <class C>\n+struct A {\n+    template<class U> using B = U*;\n+    int a;\n+};\n+\n+A<int> a;\n+"}]}