{"sha": "7d49f92a42266a582f1c2be94b8ac615240c74ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Q0OWY5MmE0MjI2NmE1ODJmMWMyYmU5NGI4YWM2MTUyNDBjNzRjZQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-03-11T12:21:22Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-03-11T12:21:22Z"}, "message": "(finish_decl): When preserving an initializer, ensure its type is on a\ngood obstack.\n\nFrom-SVN: r6742", "tree": {"sha": "176b32845a60db457933045f44bb718546270c38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/176b32845a60db457933045f44bb718546270c38"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d49f92a42266a582f1c2be94b8ac615240c74ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d49f92a42266a582f1c2be94b8ac615240c74ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d49f92a42266a582f1c2be94b8ac615240c74ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d49f92a42266a582f1c2be94b8ac615240c74ce/comments", "author": null, "committer": null, "parents": [{"sha": "36281332fcb18c598b0616294b48d4a579314813", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36281332fcb18c598b0616294b48d4a579314813", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36281332fcb18c598b0616294b48d4a579314813"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "af0cf1ba2569f304ca61f9ed45da91d2c773455f", "filename": "gcc/c-decl.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d49f92a42266a582f1c2be94b8ac615240c74ce/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d49f92a42266a582f1c2be94b8ac615240c74ce/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=7d49f92a42266a582f1c2be94b8ac615240c74ce", "patch": "@@ -3588,6 +3588,12 @@ finish_decl (decl, init, asmspec_tree)\n \t\t output_constant_def to make its rtl on the permanent\n \t\t obstack.  */\n \t      TREE_PERMANENT (DECL_INITIAL (decl)) = 1;\n+\n+\t      /* The initializer and DECL must have the same (or equivalent\n+\t\t types), but if the initializer is a STRING_CST, its type\n+\t\t might not be on the right obstack, so copy the type\n+\t\t of DECL.  */\n+\t      TREE_TYPE (DECL_INITIAL (decl)) = type;\n \t    }\n \t  else\n \t    DECL_INITIAL (decl) = error_mark_node;"}]}