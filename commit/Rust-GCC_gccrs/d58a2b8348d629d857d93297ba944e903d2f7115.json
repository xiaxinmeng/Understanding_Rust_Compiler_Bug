{"sha": "d58a2b8348d629d857d93297ba944e903d2f7115", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDU4YTJiODM0OGQ2MjlkODU3ZDkzMjk3YmE5NDRlOTAzZDJmNzExNQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2005-04-04T19:11:07Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-04-04T19:11:07Z"}, "message": "re PR c++/20679 (Parse error when accessing attributes of an inner class. Enclosing class is template and have methods with the same name.)\n\n\tPR c++/20679\n\t* parser.c (cp_parser_template_name): Fix thinko.\n\n\tPR c++/20679\n\t* g++.dg/template/overload4.C: New test.\n\nFrom-SVN: r97569", "tree": {"sha": "d56abd9253ed40a96a871f0007e1509795bfc66b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d56abd9253ed40a96a871f0007e1509795bfc66b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d58a2b8348d629d857d93297ba944e903d2f7115", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d58a2b8348d629d857d93297ba944e903d2f7115", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d58a2b8348d629d857d93297ba944e903d2f7115", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d58a2b8348d629d857d93297ba944e903d2f7115/comments", "author": null, "committer": null, "parents": [{"sha": "b89361c670cc86ff43dcf87de2b293c19b8dce35", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b89361c670cc86ff43dcf87de2b293c19b8dce35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b89361c670cc86ff43dcf87de2b293c19b8dce35"}], "stats": {"total": 45, "additions": 37, "deletions": 8}, "files": [{"sha": "ac3c3bcdb99c76fa7288f942fd049654db20035c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d58a2b8348d629d857d93297ba944e903d2f7115/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d58a2b8348d629d857d93297ba944e903d2f7115/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d58a2b8348d629d857d93297ba944e903d2f7115", "patch": "@@ -1,3 +1,8 @@\n+2005-04-04  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/20679\n+\t* parser.c (cp_parser_template_name): Fix thinko.\n+\n 2005-04-04  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/20746"}, {"sha": "cb1623d681e3abc03385c1ae62893a05c0b7d152", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d58a2b8348d629d857d93297ba944e903d2f7115/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d58a2b8348d629d857d93297ba944e903d2f7115/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=d58a2b8348d629d857d93297ba944e903d2f7115", "patch": "@@ -8731,23 +8731,22 @@ cp_parser_template_name (cp_parser* parser,\n     ;\n   else\n     {\n+      tree fn = NULL_TREE;\n+\n       /* The standard does not explicitly indicate whether a name that\n \t names a set of overloaded declarations, some of which are\n \t templates, is a template-name.  However, such a name should\n \t be a template-name; otherwise, there is no way to form a\n \t template-id for the overloaded templates.  */\n       fns = BASELINK_P (decl) ? BASELINK_FUNCTIONS (decl) : decl;\n       if (TREE_CODE (fns) == OVERLOAD)\n-\t{\n-\t  tree fn;\n+\tfor (fn = fns; fn; fn = OVL_NEXT (fn))\n+\t  if (TREE_CODE (OVL_CURRENT (fn)) == TEMPLATE_DECL)\n+\t    break;\n \n-\t  for (fn = fns; fn; fn = OVL_NEXT (fn))\n-\t    if (TREE_CODE (OVL_CURRENT (fn)) == TEMPLATE_DECL)\n-\t      break;\n-\t}\n-      else\n+      if (!fn)\n \t{\n-\t  /* Otherwise, the name does not name a template.  */\n+\t  /* The name does not name a template.  */\n \t  cp_parser_error (parser, \"expected template-name\");\n \t  return error_mark_node;\n \t}"}, {"sha": "cca0e181801c579b875f52a7b0bdecb597c1f161", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d58a2b8348d629d857d93297ba944e903d2f7115/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d58a2b8348d629d857d93297ba944e903d2f7115/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d58a2b8348d629d857d93297ba944e903d2f7115", "patch": "@@ -1,3 +1,8 @@\n+2005-04-04  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/20679\n+\t* g++.dg/template/overload4.C: New test.\n+\n 2005-04-04  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/20746"}, {"sha": "1a294eb3c054991b5f7e1992381bb562c3e2b612", "filename": "gcc/testsuite/g++.dg/template/overload4.C", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d58a2b8348d629d857d93297ba944e903d2f7115/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foverload4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d58a2b8348d629d857d93297ba944e903d2f7115/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foverload4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Foverload4.C?ref=d58a2b8348d629d857d93297ba944e903d2f7115", "patch": "@@ -0,0 +1,20 @@\n+// PR c++/20679\n+\n+template <class T>\n+struct foo\n+{\n+  struct bar\n+  {\n+    int m;\n+  };\n+\n+  void m() const {}\n+  void m() {}\n+  \n+  bool n() const { return b->m < 42; }\n+\n+  bar *b;\n+};\n+\n+\n+"}]}