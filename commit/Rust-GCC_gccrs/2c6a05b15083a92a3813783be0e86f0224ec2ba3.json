{"sha": "2c6a05b15083a92a3813783be0e86f0224ec2ba3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM2YTA1YjE1MDgzYTkyYTM4MTM3ODNiZTBlODZmMDIyNGVjMmJhMw==", "commit": {"author": {"name": "Bin Cheng", "email": "bin.cheng@arm.com", "date": "2016-10-31T09:27:31Z"}, "committer": {"name": "Bin Cheng", "email": "amker@gcc.gnu.org", "date": "2016-10-31T09:27:31Z"}, "message": "tree-vect-data-refs.c (vect_slp_analyze_node_dependences): Skip unnecessary data dependence check after visited store stmt.\n\n\t* tree-vect-data-refs.c (vect_slp_analyze_node_dependences): Skip\n\tunnecessary data dependence check after visited store stmt.\n\nFrom-SVN: r241696", "tree": {"sha": "acaa86f17331a427175b816bc5f885d94970ca0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/acaa86f17331a427175b816bc5f885d94970ca0e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c6a05b15083a92a3813783be0e86f0224ec2ba3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c6a05b15083a92a3813783be0e86f0224ec2ba3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c6a05b15083a92a3813783be0e86f0224ec2ba3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c6a05b15083a92a3813783be0e86f0224ec2ba3/comments", "author": null, "committer": null, "parents": [{"sha": "0b56e9adf84be945617a8026a334dd6f14c1c679", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b56e9adf84be945617a8026a334dd6f14c1c679", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b56e9adf84be945617a8026a334dd6f14c1c679"}], "stats": {"total": 25, "additions": 15, "deletions": 10}, "files": [{"sha": "49698e6af485bf7a0ab7d9a01662d9bad48b335e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c6a05b15083a92a3813783be0e86f0224ec2ba3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c6a05b15083a92a3813783be0e86f0224ec2ba3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2c6a05b15083a92a3813783be0e86f0224ec2ba3", "patch": "@@ -1,3 +1,8 @@\n+2016-10-31  Bin Cheng  <bin.cheng@arm.com>\n+\n+\t* tree-vect-data-refs.c (vect_slp_analyze_node_dependences): Skip\n+\tunnecessary data dependence check after visited store stmt.\n+\n 2016-10-30  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \tPR tree-optimization/71915"}, {"sha": "9346cfeafd25cc068080ecd4768ba7ad7a7e80ac", "filename": "gcc/tree-vect-data-refs.c", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c6a05b15083a92a3813783be0e86f0224ec2ba3/gcc%2Ftree-vect-data-refs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c6a05b15083a92a3813783be0e86f0224ec2ba3/gcc%2Ftree-vect-data-refs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-data-refs.c?ref=2c6a05b15083a92a3813783be0e86f0224ec2ba3", "patch": "@@ -583,6 +583,7 @@ vect_slp_analyze_node_dependences (slp_instance instance, slp_tree node,\n \t  if (!dr_b)\n \t    return false;\n \n+\t  bool dependent = false;\n \t  /* If we run into a store of this same instance (we've just\n \t     marked those) then delay dependence checking until we run\n \t     into the last store because this is where it will have\n@@ -599,22 +600,21 @@ vect_slp_analyze_node_dependences (slp_instance instance, slp_tree node,\n \t\t    = STMT_VINFO_DATA_REF (vinfo_for_stmt (store));\n \t\t  ddr_p ddr = initialize_data_dependence_relation\n \t\t\t\t(dr_a, store_dr, vNULL);\n-\t\t  if (vect_slp_analyze_data_ref_dependence (ddr))\n-\t\t    {\n-\t\t      free_dependence_relation (ddr);\n-\t\t      return false;\n-\t\t    }\n+\t\t  dependent = vect_slp_analyze_data_ref_dependence (ddr);\n \t\t  free_dependence_relation (ddr);\n+\t\t  if (dependent)\n+\t\t    break;\n \t\t}\n \t    }\n-\n-\t  ddr_p ddr = initialize_data_dependence_relation (dr_a, dr_b, vNULL);\n-\t  if (vect_slp_analyze_data_ref_dependence (ddr))\n+\t  else\n \t    {\n+\t      ddr_p ddr = initialize_data_dependence_relation (dr_a,\n+\t\t\t\t\t\t\t       dr_b, vNULL);\n+\t      dependent = vect_slp_analyze_data_ref_dependence (ddr);\n \t      free_dependence_relation (ddr);\n-\t      return false;\n \t    }\n-\t  free_dependence_relation (ddr);\n+\t  if (dependent)\n+\t    return false;\n \t}\n     }\n   return true;"}]}