{"sha": "350fe2829e2012d0e768602102fac31b474b1d2c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzUwZmUyODI5ZTIwMTJkMGU3Njg2MDIxMDJmYWMzMWI0NzRiMWQyYw==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2016-01-22T12:47:26Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2016-01-22T12:47:26Z"}, "message": "Allow _GLIBCXX_HAVE_OBSOLETE_ISINF_ISNAN to be overridden\n\n\tPR libstdc++/69413\n\t* config/os/gnu-linux/os_defines.h: Define\n\t_GLIBCXX_NO_OBSOLETE_ISINF_ISNAN_DYNAMIC.\n\t* include/c_global/cmath (isinf, isnan): Check it.\n\t* doc/xml/manual/internals.xml: Document it.\n\t* doc/html/*: Regenerate.\n\nFrom-SVN: r232726", "tree": {"sha": "1cdffa614a66e190d30b4ff13a87c9cae081fb18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1cdffa614a66e190d30b4ff13a87c9cae081fb18"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/350fe2829e2012d0e768602102fac31b474b1d2c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/350fe2829e2012d0e768602102fac31b474b1d2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/350fe2829e2012d0e768602102fac31b474b1d2c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/350fe2829e2012d0e768602102fac31b474b1d2c/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8126ae1cfd39746a459b077d44d373d0bfe34a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8126ae1cfd39746a459b077d44d373d0bfe34a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8126ae1cfd39746a459b077d44d373d0bfe34a0"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "77ab6b31db105d1fb481a2251c5ce17605aee3c6", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/350fe2829e2012d0e768602102fac31b474b1d2c/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/350fe2829e2012d0e768602102fac31b474b1d2c/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=350fe2829e2012d0e768602102fac31b474b1d2c", "patch": "@@ -1,3 +1,12 @@\n+2016-01-22  Jonathan Wakely  <jwakely@redhat.com>\n+\n+\tPR libstdc++/69413\n+\t* config/os/gnu-linux/os_defines.h: Define\n+\t_GLIBCXX_NO_OBSOLETE_ISINF_ISNAN_DYNAMIC.\n+\t* include/c_global/cmath (isinf, isnan): Check it.\n+\t* doc/xml/manual/internals.xml: Document it.\n+\t* doc/html/*: Regenerate.\n+\n 2016-01-21  Jonathan Wakely  <jwakely@redhat.com>\n \n \tPR libstdc++/69406"}, {"sha": "59b0a622da60ae03ecc978099646490a1c6a29f6", "filename": "libstdc++-v3/config/os/gnu-linux/os_defines.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/350fe2829e2012d0e768602102fac31b474b1d2c/libstdc%2B%2B-v3%2Fconfig%2Fos%2Fgnu-linux%2Fos_defines.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/350fe2829e2012d0e768602102fac31b474b1d2c/libstdc%2B%2B-v3%2Fconfig%2Fos%2Fgnu-linux%2Fos_defines.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fos%2Fgnu-linux%2Fos_defines.h?ref=350fe2829e2012d0e768602102fac31b474b1d2c", "patch": "@@ -45,4 +45,8 @@\n # undef _GLIBCXX_HAVE_GETS\n #endif\n \n+// Glibc 2.23 removed the obsolete isinf and isnan declarations. Check the\n+// version dynamically in case it has changed since libstdc++ was configured.\n+#define _GLIBCXX_NO_OBSOLETE_ISINF_ISNAN_DYNAMIC __GLIBC_PREREQ(2,23)\n+\n #endif"}, {"sha": "4a521dbda488936f15075b1104ce64fd6e279c70", "filename": "libstdc++-v3/doc/html/manual/internals.html", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/350fe2829e2012d0e768602102fac31b474b1d2c/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Finternals.html", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/350fe2829e2012d0e768602102fac31b474b1d2c/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Finternals.html", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Finternals.html?ref=350fe2829e2012d0e768602102fac31b474b1d2c", "patch": "@@ -88,6 +88,13 @@\n to an expression that yields 0 if and only if the system headers\n are exposing proper support for the related set of functions.  If defined,\n it must be 0 while bootstrapping the compiler/rebuilding the library.\n+   </p><p><code class=\"code\">_GLIBCXX_NO_OBSOLETE_ISINF_ISNAN_DYNAMIC</code> may be defined\n+to an expression that yields 0 if and only if the system headers\n+are exposing non-standard <code class=\"code\">isinf(double)</code> and\n+<code class=\"code\">isnan(double)</code> functions in the global namespace. Those functions\n+should be detected automatically by the <code class=\"code\">configure</code> script when\n+libstdc++ is built but if their presence depends on compilation flags or\n+other macros the static configuration can be overridden.\n    </p><p>Finally, you should bracket the entire file in an include-guard, like\n this:\n    </p><pre class=\"programlisting\">"}, {"sha": "09407f86c24ed5aed95172cfb3cd8738e10256a7", "filename": "libstdc++-v3/doc/xml/manual/internals.xml", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/350fe2829e2012d0e768602102fac31b474b1d2c/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Finternals.xml", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/350fe2829e2012d0e768602102fac31b474b1d2c/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Finternals.xml", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Finternals.xml?ref=350fe2829e2012d0e768602102fac31b474b1d2c", "patch": "@@ -132,6 +132,14 @@ the standard.\n to an expression that yields 0 if and only if the system headers\n are exposing proper support for the related set of functions.  If defined,\n it must be 0 while bootstrapping the compiler/rebuilding the library.\n+   </para>\n+   <para><code>_GLIBCXX_NO_OBSOLETE_ISINF_ISNAN_DYNAMIC</code> may be defined\n+to an expression that yields 0 if and only if the system headers\n+are exposing non-standard <code>isinf(double)</code> and\n+<code>isnan(double)</code> functions in the global namespace. Those functions\n+should be detected automatically by the <code>configure</code> script when\n+libstdc++ is built but if their presence depends on compilation flags or\n+other macros the static configuration can be overridden.\n    </para>\n    <para>Finally, you should bracket the entire file in an include-guard, like\n this:"}, {"sha": "eca712e0549aefaa4bf76dbd01651d556c9ad83e", "filename": "libstdc++-v3/include/c_global/cmath", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/350fe2829e2012d0e768602102fac31b474b1d2c/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fcmath", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/350fe2829e2012d0e768602102fac31b474b1d2c/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fcmath", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_global%2Fcmath?ref=350fe2829e2012d0e768602102fac31b474b1d2c", "patch": "@@ -610,7 +610,8 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n   isinf(float __x)\n   { return __builtin_isinf(__x); }\n \n-#ifdef _GLIBCXX_HAVE_OBSOLETE_ISINF_ISNAN\n+#if _GLIBCXX_HAVE_OBSOLETE_ISINF_ISNAN \\\n+  && !_GLIBCXX_NO_OBSOLETE_ISINF_ISNAN_DYNAMIC\n   using ::isinf;\n #else\n   constexpr bool\n@@ -634,7 +635,8 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n   isnan(float __x)\n   { return __builtin_isnan(__x); }\n \n-#ifdef _GLIBCXX_HAVE_OBSOLETE_ISINF_ISNAN\n+#if _GLIBCXX_HAVE_OBSOLETE_ISINF_ISNAN \\\n+  && !_GLIBCXX_NO_OBSOLETE_ISINF_ISNAN_DYNAMIC\n   using ::isnan;\n #else\n   constexpr bool"}]}