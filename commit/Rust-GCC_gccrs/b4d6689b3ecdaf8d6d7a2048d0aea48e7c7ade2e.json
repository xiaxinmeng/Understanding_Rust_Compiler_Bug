{"sha": "b4d6689b3ecdaf8d6d7a2048d0aea48e7c7ade2e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjRkNjY4OWIzZWNkYWY4ZDZkN2EyMDQ4ZDBhZWE0OGU3YzdhZGUyZQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-01-01T22:50:33Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-01-01T22:50:33Z"}, "message": "(ASM_FILE_START): Switch to text section at end.\n\nOutput declaration for .mcount when profiling.\n\nFrom-SVN: r3044", "tree": {"sha": "f2c0f59a5513e0b1f4ee0149ba2aa6775c12aa66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f2c0f59a5513e0b1f4ee0149ba2aa6775c12aa66"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b4d6689b3ecdaf8d6d7a2048d0aea48e7c7ade2e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4d6689b3ecdaf8d6d7a2048d0aea48e7c7ade2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b4d6689b3ecdaf8d6d7a2048d0aea48e7c7ade2e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4d6689b3ecdaf8d6d7a2048d0aea48e7c7ade2e/comments", "author": null, "committer": null, "parents": [{"sha": "b7a4467dcdf2022c51a892223fcc24aec3689b9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7a4467dcdf2022c51a892223fcc24aec3689b9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7a4467dcdf2022c51a892223fcc24aec3689b9f"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "c17ac54222f44b2533f85bae589821fdeadab491", "filename": "gcc/config/rs6000/rs6000.h", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b4d6689b3ecdaf8d6d7a2048d0aea48e7c7ade2e/gcc%2Fconfig%2Frs6000%2Frs6000.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b4d6689b3ecdaf8d6d7a2048d0aea48e7c7ade2e/gcc%2Fconfig%2Frs6000%2Frs6000.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.h?ref=b4d6689b3ecdaf8d6d7a2048d0aea48e7c7ade2e", "patch": "@@ -35,7 +35,8 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n    Don't do this until the fixed IBM assembler is more generally available.\n    When this becomes permanently defined, the ASM_OUTPUT_EXTERNAL,\n    ASM_OUTPUT_EXTERNAL_LIBCALL, and RS6000_OUTPUT_BASENAME macros will no\n-   longer be needed.  */\n+   longer be needed.  Also, the extern declaration of mcount in ASM_FILE_START\n+   will no longer be needed.  */\n \n /* #define ASM_SPEC \"-u\" */\n \n@@ -1319,13 +1320,16 @@ extern int rs6000_trunc_used;\n \n /* Output at beginning of assembler file.\n \n-   On the RS/6000, we want to go into the TOC section so at least one\n-   .toc will be emitted.\n-\n-   Also initialize the section names for the RS/6000 at this point.\n+   Initialize the section names for the RS/6000 at this point.\n \n+   We want to go into the TOC section so at least one .toc will be emitted.\n    Also, in order to output proper .bs/.es pairs, we need at least one static\n-   [RW] section emitted.  */\n+   [RW] section emitted.\n+\n+   We then switch back to text to force the gcc2_compiled. label and the space\n+   allocated after it (when profiling) into the text section.  \n+\n+   Finally, declare mcount when profiling to make the assembler happy.  */\n \n #define ASM_FILE_START(FILE)\t\t\t\t\t\\\n {\t\t\t\t\t\t\t\t\\\n@@ -1339,6 +1343,9 @@ extern int rs6000_trunc_used;\n   toc_section ();\t\t\t\t\t\t\\\n   if (write_symbols != NO_DEBUG)\t\t\t\t\\\n     private_data_section ();\t\t\t\t\t\\\n+  text_section ();\t\t\t\t\t\t\\\n+  if (profile_flag)\t\t\t\t\t\t\\\n+    fprintf (FILE, \"\\t.extern .mcount\\n\");\t\t\t\\\n }\n \n /* Output at end of assembler file."}]}