{"sha": "66b9b71ff8fe3d7ff046ac7a2b94fc52c47f5442", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjZiOWI3MWZmOGZlM2Q3ZmYwNDZhYzdhMmI5NGZjNTJjNDdmNTQ0Mg==", "commit": {"author": {"name": "Michael Tiemann", "email": "tiemann@holodeck.cygnus.com", "date": "1999-08-25T05:28:26Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-08-25T05:28:26Z"}, "message": "loop.c (insert_bct): Replace use of sdiv_optab with asr_optab and delete comment that code should be...\n\n        * loop.c (insert_bct): Replace use of sdiv_optab with asr_optab\n        and delete comment that code should be rewritten.\n\nFrom-SVN: r28839", "tree": {"sha": "6d7d6fa8761c03212297f8ca17bda291c96540e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d7d6fa8761c03212297f8ca17bda291c96540e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/66b9b71ff8fe3d7ff046ac7a2b94fc52c47f5442", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66b9b71ff8fe3d7ff046ac7a2b94fc52c47f5442", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66b9b71ff8fe3d7ff046ac7a2b94fc52c47f5442", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66b9b71ff8fe3d7ff046ac7a2b94fc52c47f5442/comments", "author": null, "committer": null, "parents": [{"sha": "50f71e6f5fbf6780fb1354de88e44f5410e177f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50f71e6f5fbf6780fb1354de88e44f5410e177f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50f71e6f5fbf6780fb1354de88e44f5410e177f2"}], "stats": {"total": 22, "additions": 9, "deletions": 13}, "files": [{"sha": "7dcf4b92ad06cc09abe8a3540b7579f4f410659a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66b9b71ff8fe3d7ff046ac7a2b94fc52c47f5442/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66b9b71ff8fe3d7ff046ac7a2b94fc52c47f5442/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=66b9b71ff8fe3d7ff046ac7a2b94fc52c47f5442", "patch": "@@ -1,3 +1,8 @@\n+Tue Aug 24 23:26:44 1999  Michael Tiemann  <tiemann@holodeck.cygnus.com>\n+\n+\t* loop.c (insert_bct): Replace use of sdiv_optab with asr_optab\n+\tand delete comment that code should be rewritten.\n+\n Tue Aug 24 22:56:35 1999  Jeffrey A Law  (law@cygnus.com)\n \n \t* haifa-sched.c (find_rgns): Mark a block found during the DFS search"}, {"sha": "4d18f5ee65e7f4f752830f90b094657467f2124a", "filename": "gcc/loop.c", "status": "modified", "additions": 4, "deletions": 13, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66b9b71ff8fe3d7ff046ac7a2b94fc52c47f5442/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66b9b71ff8fe3d7ff046ac7a2b94fc52c47f5442/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=66b9b71ff8fe3d7ff046ac7a2b94fc52c47f5442", "patch": "@@ -9235,19 +9235,10 @@ insert_bct (loop_start, loop_end, loop_info)\n \t\t\t\t   NULL_RTX, 0, OPTAB_LIB_WIDEN);\n \n \tif (increment_value_abs != 1)\n-\t  {\n-\t    /* ??? This will generate an expensive divide instruction for\n-\t       most targets.  The original authors apparently expected this\n-\t       to be a shift, since they test for power-of-2 divisors above,\n-\t       but just naively generating a divide instruction will not give \n-\t       a shift.  It happens to work for the PowerPC target because\n-\t       the rs6000.md file has a divide pattern that emits shifts.\n-\t       It will probably not work for any other target.  */\n-\t    iterations_num_reg = expand_binop (loop_var_mode, sdiv_optab,\n-\t\t\t\t\t       temp_reg,\n-\t\t\t\t\t       GEN_INT (increment_value_abs),\n-\t\t\t\t\t       NULL_RTX, 0, OPTAB_LIB_WIDEN);\n-\t  }\n+\t  iterations_num_reg = expand_binop (loop_var_mode, asr_optab,\n+\t\t\t\t\t     temp_reg,\n+\t\t\t\t\t     GEN_INT (exact_log2 (increment_value_abs)),\n+\t\t\t\t\t     NULL_RTX, 0, OPTAB_LIB_WIDEN);\n \telse\n \t  iterations_num_reg = temp_reg;\n       }"}]}