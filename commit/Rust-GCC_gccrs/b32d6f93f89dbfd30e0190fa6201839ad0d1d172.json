{"sha": "b32d6f93f89dbfd30e0190fa6201839ad0d1d172", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjMyZDZmOTNmODlkYmZkMzBlMDE5MGZhNjIwMTgzOWFkMGQxZDE3Mg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2006-03-16T00:08:12Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2006-03-16T00:08:12Z"}, "message": "jcf-write.c (generate_bytecode_insns): Use qualifying type for non-static method calls.\n\ngcc/java\n\t* jcf-write.c (generate_bytecode_insns): Use qualifying type for\n\tnon-static method calls.\nlibjava\n\t* testsuite/libjava.jacks/jacks.xfail: Removed\n\t13.1-runtime-method-5.\n\nFrom-SVN: r112102", "tree": {"sha": "f5f9e86f993986a9fdff0fe28fccaa0e8e0821de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f5f9e86f993986a9fdff0fe28fccaa0e8e0821de"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b32d6f93f89dbfd30e0190fa6201839ad0d1d172", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b32d6f93f89dbfd30e0190fa6201839ad0d1d172", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b32d6f93f89dbfd30e0190fa6201839ad0d1d172", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b32d6f93f89dbfd30e0190fa6201839ad0d1d172/comments", "author": null, "committer": null, "parents": [{"sha": "34a9f549fd2e5f15666cb384a507ef7b2d39e1f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34a9f549fd2e5f15666cb384a507ef7b2d39e1f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34a9f549fd2e5f15666cb384a507ef7b2d39e1f3"}], "stats": {"total": 39, "additions": 29, "deletions": 10}, "files": [{"sha": "5f840751fb426741e9f7bd372a5a1a8dc9539dbd", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b32d6f93f89dbfd30e0190fa6201839ad0d1d172/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b32d6f93f89dbfd30e0190fa6201839ad0d1d172/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=b32d6f93f89dbfd30e0190fa6201839ad0d1d172", "patch": "@@ -1,3 +1,8 @@\n+2006-03-15  Tom Tromey  <tromey@redhat.com>\n+\n+\t* jcf-write.c (generate_bytecode_insns): Use qualifying type for\n+\tnon-static method calls.\n+\n 2006-03-15  David Daney  <ddaney@avtrex.com>\n \n \t* java-tree.h : Moved comment for TYPE_DOT_CLASS adjacent to its"}, {"sha": "aa4d33b141f82fd24d4474677019e818f7bd0faa", "filename": "gcc/java/jcf-write.c", "status": "modified", "additions": 19, "deletions": 9, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b32d6f93f89dbfd30e0190fa6201839ad0d1d172/gcc%2Fjava%2Fjcf-write.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b32d6f93f89dbfd30e0190fa6201839ad0d1d172/gcc%2Fjava%2Fjcf-write.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-write.c?ref=b32d6f93f89dbfd30e0190fa6201839ad0d1d172", "patch": "@@ -1,5 +1,5 @@\n /* Write out a Java(TM) class file.\n-   Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005\n+   Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -2610,26 +2610,36 @@ generate_bytecode_insns (tree exp, int target, struct jcf_partial *state)\n \t    tree context = DECL_CONTEXT (f);\n \t    int index, interface = 0;\n \t    RESERVE (5);\n+\n+\t    /* If the method is not static, use the qualifying type.\n+\t       However, don't use the qualifying type if the method\n+\t       was declared in Object.  */\n+\t    if (! METHOD_STATIC (f)\n+\t\t&& ! DECL_CONSTRUCTOR_P (f)\n+\t\t&& ! METHOD_PRIVATE (f)\n+\t\t&& DECL_CONTEXT (f) != object_type_node)\n+\t      {\n+\t\ttree arg1 = TREE_VALUE (TREE_OPERAND (exp, 1));\n+\t\tcontext = TREE_TYPE (TREE_TYPE (arg1));\n+\t      }\n+\n \t    if (METHOD_STATIC (f))\n \t      OP1 (OPCODE_invokestatic);\n \t    else if (DECL_CONSTRUCTOR_P (f) || CALL_USING_SUPER (exp)\n-\t\t|| METHOD_PRIVATE (f))\n+\t\t     || METHOD_PRIVATE (f))\n \t      OP1 (OPCODE_invokespecial);\n \t    else\n \t      {\n \t\tif (CLASS_INTERFACE (TYPE_NAME (context)))\n-\t\t  {\n-\t\t    tree arg1 = TREE_VALUE (TREE_OPERAND (exp, 1));\n-\t\t    context = TREE_TYPE (TREE_TYPE (arg1));\n-\t\t    if (CLASS_INTERFACE (TYPE_NAME (context)))\n-\t\t      interface = 1;\n-\t\t  }\n+\t\t  interface = 1;\n \t\tif (interface)\n \t\t  OP1 (OPCODE_invokeinterface);\n \t\telse\n \t\t  OP1 (OPCODE_invokevirtual);\n \t      }\n-\t    index = find_methodref_with_class_index (&state->cpool, f, context);\n+\n+\t    index = find_methodref_with_class_index (&state->cpool, f,\n+\t\t\t\t\t\t     context);\n \t    OP2 (index);\n \t    if (interface)\n \t      {"}, {"sha": "f3ff2d68a7924b57808d9b2e7f0a3d049fa8cf20", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b32d6f93f89dbfd30e0190fa6201839ad0d1d172/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b32d6f93f89dbfd30e0190fa6201839ad0d1d172/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=b32d6f93f89dbfd30e0190fa6201839ad0d1d172", "patch": "@@ -1,3 +1,8 @@\n+2006-03-15  Tom Tromey  <tromey@redhat.com>\n+\n+\t* testsuite/libjava.jacks/jacks.xfail: Removed\n+\t13.1-runtime-method-5.\n+\n 2006-03-15  Tom Tromey  <tromey@redhat.com>\n \n \tPR java/26638:"}, {"sha": "081e8ac233a1318897460a7295b528781666a4ce", "filename": "libjava/testsuite/libjava.jacks/jacks.xfail", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b32d6f93f89dbfd30e0190fa6201839ad0d1d172/libjava%2Ftestsuite%2Flibjava.jacks%2Fjacks.xfail", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b32d6f93f89dbfd30e0190fa6201839ad0d1d172/libjava%2Ftestsuite%2Flibjava.jacks%2Fjacks.xfail", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.jacks%2Fjacks.xfail?ref=b32d6f93f89dbfd30e0190fa6201839ad0d1d172", "patch": "@@ -5,7 +5,6 @@\n 13.1-runtime-constant-1\n 13.1-runtime-constant-3\n 13.1-runtime-field-1\n-13.1-runtime-method-5\n 13.1-runtime-method-6\n 13.4.8-constant-runtime-1\n 13.4.8-constant-runtime-2"}]}