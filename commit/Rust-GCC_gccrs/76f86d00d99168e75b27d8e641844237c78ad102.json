{"sha": "76f86d00d99168e75b27d8e641844237c78ad102", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzZmODZkMDBkOTkxNjhlNzViMjdkOGU2NDE4NDQyMzdjNzhhZDEwMg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2011-07-23T00:14:46Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2011-07-23T00:14:46Z"}, "message": "re PR c++/49793 ([C++0x] Narrowing conversion from int/short/char to double)\n\n\tPR c++/49793\n\t* typeck2.c (check_narrowing): Downgrade permerror to pedwarn.\n\tMake conditional on -Wnarrowing.\n\nFrom-SVN: r176665", "tree": {"sha": "ec438265c3481cd0c137ec1444b398d057b6cd01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ec438265c3481cd0c137ec1444b398d057b6cd01"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76f86d00d99168e75b27d8e641844237c78ad102", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76f86d00d99168e75b27d8e641844237c78ad102", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76f86d00d99168e75b27d8e641844237c78ad102", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76f86d00d99168e75b27d8e641844237c78ad102/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "295331a41988c2ecd818ba80f23c790e292fb296", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/295331a41988c2ecd818ba80f23c790e292fb296", "html_url": "https://github.com/Rust-GCC/gccrs/commit/295331a41988c2ecd818ba80f23c790e292fb296"}], "stats": {"total": 34, "additions": 26, "deletions": 8}, "files": [{"sha": "be7317d0eb28998f1c25b3adeede9b960a34a0c3", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=76f86d00d99168e75b27d8e641844237c78ad102", "patch": "@@ -1,5 +1,8 @@\n 2011-07-22  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/49793\n+\t* c.opt (Wnarrowing): New.\n+\n \tPR c++/30112\n \t* c-common.h: Declare c_linkage_bindings.\n \t* c-pragma.c (handle_pragma_redefine_extname): Use it."}, {"sha": "617ea2d89052c6312c0a975ca04297ffa533752b", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=76f86d00d99168e75b27d8e641844237c78ad102", "patch": "@@ -489,6 +489,10 @@ Wmultichar\n C ObjC C++ ObjC++ Warning\n Warn about use of multi-character character constants\n \n+Wnarrowing\n+C ObjC C++ ObjC++ Warning Var(warn_narrowing) Init(1)\n+-Wno-narrowing\t  In C++0x mode, ignore ill-formed narrowing conversions within { }\n+\n Wnested-externs\n C ObjC Var(warn_nested_externs) Warning\n Warn about \\\"extern\\\" declarations not at file scope"}, {"sha": "284224f57c6c06f6bbe75d6108fa2e2cf8423783", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=76f86d00d99168e75b27d8e641844237c78ad102", "patch": "@@ -1,3 +1,9 @@\n+2011-07-22  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/49793\n+\t* typeck2.c (check_narrowing): Downgrade permerror to pedwarn.\n+\tMake conditional on -Wnarrowing.\n+\n 2011-07-22  Ville Voutilainen  <ville.voutilainen@gmail.com>\n \n \tWarn about the use of final/override in non-c++0x mode, and"}, {"sha": "727a88bd363ab64ce5b1869fec2a0bdf00adcfcd", "filename": "gcc/cp/typeck2.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Fcp%2Ftypeck2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Fcp%2Ftypeck2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck2.c?ref=76f86d00d99168e75b27d8e641844237c78ad102", "patch": "@@ -719,7 +719,7 @@ check_narrowing (tree type, tree init)\n   bool ok = true;\n   REAL_VALUE_TYPE d;\n \n-  if (!ARITHMETIC_TYPE_P (type))\n+  if (!warn_narrowing || !ARITHMETIC_TYPE_P (type))\n     return;\n \n   if (BRACE_ENCLOSED_INITIALIZER_P (init)\n@@ -777,8 +777,8 @@ check_narrowing (tree type, tree init)\n     }\n \n   if (!ok)\n-    permerror (input_location, \"narrowing conversion of %qE from %qT \"\n-\t       \"to %qT inside { }\", init, ftype, type);\n+    pedwarn (input_location, OPT_Wnarrowing, \"narrowing conversion of %qE \"\n+\t     \"from %qT to %qT inside { }\", init, ftype, type);\n }\n \n /* Process the initializer INIT for a variable of type TYPE, emitting"}, {"sha": "1d0d08952c5f04d0aedb846232c80dd5e3adb90d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=76f86d00d99168e75b27d8e641844237c78ad102", "patch": "@@ -1,3 +1,8 @@\n+2011-07-22  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/49793\n+\t* g++.dg/cpp0x/initlist55.C: New.\n+\n 2011-07-23  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/49791"}, {"sha": "6ea08d1500394a3e3644f1c7ac6aa76e12b84dff", "filename": "gcc/testsuite/g++.dg/cpp0x/initlist17.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist17.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist17.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist17.C?ref=76f86d00d99168e75b27d8e641844237c78ad102", "patch": "@@ -1,4 +1,4 @@\n-// { dg-options \"-std=c++0x\" }\n+// { dg-options \"-std=c++0x -pedantic-errors\" }\n \n void f(int i);\n "}, {"sha": "a703b45907e37b7738f0dbebc6bd7725385f1691", "filename": "gcc/testsuite/g++.dg/cpp0x/initlist36.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist36.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist36.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist36.C?ref=76f86d00d99168e75b27d8e641844237c78ad102", "patch": "@@ -1,5 +1,5 @@\n // PR c++/44358\n-// { dg-options \"-std=c++0x\" }\n+// { dg-options \"-std=c++0x -pedantic-errors\" }\n \n #include <initializer_list>\n "}, {"sha": "dbd17ecbbe29ba170b976a236b3b88809c623131", "filename": "gcc/testsuite/g++.dg/cpp0x/initlist5.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist5.C?ref=76f86d00d99168e75b27d8e641844237c78ad102", "patch": "@@ -1,5 +1,5 @@\n // Test for narrowing diagnostics\n-// { dg-options \"-std=c++0x\" }\n+// { dg-options \"-std=c++0x -pedantic-errors\" }\n \n #include <initializer_list>\n "}, {"sha": "17c0cfe3f149370b8c3e09812d74769e0d49da20", "filename": "gcc/testsuite/g++.dg/cpp0x/initlist52.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist52.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist52.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist52.C?ref=76f86d00d99168e75b27d8e641844237c78ad102", "patch": "@@ -1,5 +1,5 @@\n // PR c++/45378\n-// { dg-options -std=c++0x }\n+// { dg-options \"-std=c++0x -pedantic-errors\" }\n \n int main()\n {"}, {"sha": "55a0371860fdb3317c0ce0bcbf5cd4e25834cad8", "filename": "gcc/testsuite/g++.dg/cpp0x/initlist7.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76f86d00d99168e75b27d8e641844237c78ad102/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Finitlist7.C?ref=76f86d00d99168e75b27d8e641844237c78ad102", "patch": "@@ -1,5 +1,5 @@\n // PR c++/37932\n-// { dg-options \"-std=c++0x\" }\n+// { dg-options \"-std=c++0x -pedantic-errors\" }\n \n typedef enum { AA=1, BB=2 } my_enum;\n "}]}