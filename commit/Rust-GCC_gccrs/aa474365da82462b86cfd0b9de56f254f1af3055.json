{"sha": "aa474365da82462b86cfd0b9de56f254f1af3055", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWE0NzQzNjVkYTgyNDYyYjg2Y2ZkMGI5ZGU1NmYyNTRmMWFmMzA1NQ==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2011-01-03T23:14:18Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2011-01-03T23:14:18Z"}, "message": "spu.c (asm_file_start): Only reset flag_var_tracking if branch-hint optimization will be performed.\n\n\t* config/spu/spu.c (asm_file_start): Only reset flag_var_tracking\n\tif branch-hint optimization will be performed.\n\nFrom-SVN: r168444", "tree": {"sha": "c34e21a03ea2d8a2ac41c24f3bf86e4bccc439df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c34e21a03ea2d8a2ac41c24f3bf86e4bccc439df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aa474365da82462b86cfd0b9de56f254f1af3055", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa474365da82462b86cfd0b9de56f254f1af3055", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa474365da82462b86cfd0b9de56f254f1af3055", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa474365da82462b86cfd0b9de56f254f1af3055/comments", "author": null, "committer": null, "parents": [{"sha": "4ce99a208b535d4c5e0293657c3792e46a9d5b80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ce99a208b535d4c5e0293657c3792e46a9d5b80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ce99a208b535d4c5e0293657c3792e46a9d5b80"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "261affd6d90801b88321c0d8e614ca7dbf9cff57", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa474365da82462b86cfd0b9de56f254f1af3055/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa474365da82462b86cfd0b9de56f254f1af3055/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aa474365da82462b86cfd0b9de56f254f1af3055", "patch": "@@ -1,3 +1,8 @@\n+2011-01-03  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\t* config/spu/spu.c (asm_file_start): Only reset flag_var_tracking\n+\tif branch-hint optimization will be performed.\n+\n 2011-01-03  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/47148"}, {"sha": "db17570248a589a6b6370794f75812ed66d72767", "filename": "gcc/config/spu/spu.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa474365da82462b86cfd0b9de56f254f1af3055/gcc%2Fconfig%2Fspu%2Fspu.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa474365da82462b86cfd0b9de56f254f1af3055/gcc%2Fconfig%2Fspu%2Fspu.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.c?ref=aa474365da82462b86cfd0b9de56f254f1af3055", "patch": "@@ -7014,9 +7014,17 @@ static void\n asm_file_start (void)\n {\n   /* Variable tracking should be run after all optimizations which\n-     change order of insns.  It also needs a valid CFG. */\n-  spu_flag_var_tracking = flag_var_tracking;\n-  flag_var_tracking = 0;\n+     change order of insns.  It also needs a valid CFG.  Therefore,\n+     *if* we make nontrivial changes in machine-dependent reorg,\n+     run variable tracking after those.  However, if we do not run\n+     our machine-dependent reorg pass, we must still run the normal\n+     variable tracking pass (or else we will ICE in final since\n+     debug insns have not been removed).  */\n+  if (TARGET_BRANCH_HINTS && optimize)\n+    {\n+      spu_flag_var_tracking = flag_var_tracking;\n+      flag_var_tracking = 0;\n+    }\n \n   default_file_start ();\n }"}]}