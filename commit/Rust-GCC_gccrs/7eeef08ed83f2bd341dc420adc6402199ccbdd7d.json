{"sha": "7eeef08ed83f2bd341dc420adc6402199ccbdd7d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2VlZWYwOGVkODNmMmJkMzQxZGM0MjBhZGM2NDAyMTk5Y2NiZGQ3ZA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2008-08-04T18:35:20Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2008-08-04T18:35:20Z"}, "message": "tree-ssa-loop-ivopts.c (add_iv_value_candidates): Also add the candidate with the stripped base if...\n\n2008-08-04  Richard Guenther  <rguenther@suse.de>\n\n\t* tree-ssa-loop-ivopts.c (add_iv_value_candidates): Also add\n\tthe candidate with the stripped base if that base is different\n\tfrom the original base even for offset zero.\n\nFrom-SVN: r138647", "tree": {"sha": "55b52bec69bc8c8d01185d71e8d9fad6eb7e5930", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/55b52bec69bc8c8d01185d71e8d9fad6eb7e5930"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7eeef08ed83f2bd341dc420adc6402199ccbdd7d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7eeef08ed83f2bd341dc420adc6402199ccbdd7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7eeef08ed83f2bd341dc420adc6402199ccbdd7d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7eeef08ed83f2bd341dc420adc6402199ccbdd7d/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8f45dcf8be0e2bc9c91674d89636a1abe3f6bc92", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f45dcf8be0e2bc9c91674d89636a1abe3f6bc92", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f45dcf8be0e2bc9c91674d89636a1abe3f6bc92"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "02ca43300fa1d5c69f3eb211724518c5a87af028", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7eeef08ed83f2bd341dc420adc6402199ccbdd7d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7eeef08ed83f2bd341dc420adc6402199ccbdd7d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7eeef08ed83f2bd341dc420adc6402199ccbdd7d", "patch": "@@ -1,3 +1,9 @@\n+2008-08-04  Richard Guenther  <rguenther@suse.de>\n+\n+\t* tree-ssa-loop-ivopts.c (add_iv_value_candidates): Also add\n+\tthe candidate with the stripped base if that base is different\n+\tfrom the original base even for offset zero.\n+\n 2008-08-04  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/36691"}, {"sha": "1a1e58b1a817717880788f8c5a26b849304f667b", "filename": "gcc/tree-ssa-loop-ivopts.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7eeef08ed83f2bd341dc420adc6402199ccbdd7d/gcc%2Ftree-ssa-loop-ivopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7eeef08ed83f2bd341dc420adc6402199ccbdd7d/gcc%2Ftree-ssa-loop-ivopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-ivopts.c?ref=7eeef08ed83f2bd341dc420adc6402199ccbdd7d", "patch": "@@ -2275,9 +2275,11 @@ add_iv_value_candidates (struct ivopts_data *data,\n   add_candidate (data, build_int_cst (basetype, 0),\n \t\t iv->step, true, use);\n \n-  /* Third, try removing the constant offset.  */\n+  /* Third, try removing the constant offset.  Make sure to even\n+     add a candidate for &a[0] vs. (T *)&a.  */\n   base = strip_offset (iv->base, &offset);\n-  if (offset)\n+  if (offset\n+      || base != iv->base)\n     add_candidate (data, base, iv->step, false, use);\n }\n "}]}