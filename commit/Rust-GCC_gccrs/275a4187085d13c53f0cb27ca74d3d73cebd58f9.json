{"sha": "275a4187085d13c53f0cb27ca74d3d73cebd58f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjc1YTQxODcwODVkMTNjNTNmMGNiMjdjYTc0ZDNkNzNjZWJkNThmOQ==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb@suse.de", "date": "2004-09-17T06:23:54Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2004-09-17T06:23:54Z"}, "message": "re PR rtl-optimization/17513 (ICE: verify_flow_info failed after gcse)\n\n        PR tree-optimization/17513\n\t* cfgexpand.c (construct_init_block): Clear EDGE_EXECUTABLE\n\tfor successors of the entry block.\n\n\t* gcc.dg/20040916-1.c: New test.\n\nFrom-SVN: r87632", "tree": {"sha": "60dcd3daf28a15902b1426d100e008d5cc20b4d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/60dcd3daf28a15902b1426d100e008d5cc20b4d0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/275a4187085d13c53f0cb27ca74d3d73cebd58f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/275a4187085d13c53f0cb27ca74d3d73cebd58f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/275a4187085d13c53f0cb27ca74d3d73cebd58f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/275a4187085d13c53f0cb27ca74d3d73cebd58f9/comments", "author": null, "committer": null, "parents": [{"sha": "b355f2229a07beb1b1b08d1c7e6b7dbac55c8df9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b355f2229a07beb1b1b08d1c7e6b7dbac55c8df9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b355f2229a07beb1b1b08d1c7e6b7dbac55c8df9"}], "stats": {"total": 74, "additions": 70, "deletions": 4}, "files": [{"sha": "21250cf2bf4529b10f09ec8158ce72faaba2d650", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/275a4187085d13c53f0cb27ca74d3d73cebd58f9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/275a4187085d13c53f0cb27ca74d3d73cebd58f9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=275a4187085d13c53f0cb27ca74d3d73cebd58f9", "patch": "@@ -1,3 +1,9 @@\n+2004-09-17  Steven Bosscher  <stevenb@suse.de>\n+\n+        PR tree-optimization/17513\n+\t* cfgexpand.c (construct_init_block): Clear EDGE_EXECUTABLE\n+\tfor successors of the entry block.\n+\n 2004-09-17  Uros Bizjak  <uros@kss-loka.si>\n \n \tPR rtl-optimization/15187"}, {"sha": "bf179fee0b637a0976f78252a3f9aba30a0fe190", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/275a4187085d13c53f0cb27ca74d3d73cebd58f9/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/275a4187085d13c53f0cb27ca74d3d73cebd58f9/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=275a4187085d13c53f0cb27ca74d3d73cebd58f9", "patch": "@@ -1082,11 +1082,21 @@ static basic_block\n construct_init_block (void)\n {\n   basic_block init_block, first_block;\n-  edge e;\n+  edge e = NULL, e2;\n+\n+  for (e2 = ENTRY_BLOCK_PTR->succ; e2; e2 = e2->succ_next)\n+    {\n+      /* Clear EDGE_EXECUTABLE.  This flag is never used in the backend.\n \n-  for (e = ENTRY_BLOCK_PTR->succ; e; e = e->succ_next)\n-    if (e->dest == ENTRY_BLOCK_PTR->next_bb)\n-      break;\n+\t For all other blocks this edge flag is cleared while expanding\n+\t a basic block in expand_gimple_basic_block, but there we never\n+\t looked at the successors of the entry block.\n+\t This caused PR17513.  */\n+      e2->flags &= ~EDGE_EXECUTABLE;\n+\n+      if (e2->dest == ENTRY_BLOCK_PTR->next_bb)\n+\te = e2;\n+    }\n \n   init_block = create_basic_block (NEXT_INSN (get_insns ()),\n \t\t\t\t   get_last_insn (),"}, {"sha": "85bc7ed985b18a6b73899953d8a7a49eb18719d8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/275a4187085d13c53f0cb27ca74d3d73cebd58f9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/275a4187085d13c53f0cb27ca74d3d73cebd58f9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=275a4187085d13c53f0cb27ca74d3d73cebd58f9", "patch": "@@ -1,3 +1,8 @@\n+2004-09-17  Steven Bosscher  <stevenb@suse.de>\n+\n+\tPR tree-optimization/17513\n+\t* gcc.dg/20040916-1.c: New test.\n+\n 2004-09-16  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/17501"}, {"sha": "fbea9e385b73f47ebcf65e4581579e9fcee323e6", "filename": "gcc/testsuite/gcc.dg/20040916-1.c", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/275a4187085d13c53f0cb27ca74d3d73cebd58f9/gcc%2Ftestsuite%2Fgcc.dg%2F20040916-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/275a4187085d13c53f0cb27ca74d3d73cebd58f9/gcc%2Ftestsuite%2Fgcc.dg%2F20040916-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20040916-1.c?ref=275a4187085d13c53f0cb27ca74d3d73cebd58f9", "patch": "@@ -0,0 +1,45 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+/* PR17513 - we hit a bug where EDGE_EXECUTABLE was not cleared on\n+   successors of the entry block.  This lead to a flow verification\n+   error much later in the compilation (after gcse).  */\n+typedef unsigned char uint8; \n+typedef unsigned int uint32; \n+ \n+uint32 marker = 0; \n+uint8 *buff = 0; \n+uint32 bsize = 0; \n+ \n+extern int foo (void); \n+ \n+uint32 \n+bar (void) \n+{ \n+  int len, d; \n+ \n+  for (;;) \n+    { \n+      if (foo () == 0) \n+        return (0); \n+ \n+      switch (marker) \n+        { \n+        case 0xfe: \n+          { \n+            len |= (*buff++); \n+            bsize -= 2; \n+ \n+            while (len > 0) \n+              { \n+                d = *buff++; \n+                len--; \n+              } \n+          } \n+          break; \n+        default: \n+          break; \n+        } \n+    } \n+} \n+"}]}