{"sha": "53cd5d6c50c317a3d2465a1973154aa5da86987a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTNjZDVkNmM1MGMzMTdhM2QyNDY1YTE5NzMxNTRhYTVkYTg2OTg3YQ==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2000-05-06T04:31:16Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2000-05-06T04:31:16Z"}, "message": "xcoffout.c (xcoff_current_include_file, [...]): Constify char *.\n\n        * xcoffout.c (xcoff_current_include_file,\n        xcoff_current_function_file, xcoff_lastfile): Constify char *.\n        (xcoffout_source_file, xcoffout_source_line): Make filename 'const\n        char *'.\n        (xcoffout_declare_function): Make name 'const char *'.\n        (xcoffout_end_epilogue): Make fname 'const char *'\n        * xcoffout.h (xcoff_current_include_file, xcoff_lastfile,\n        xcoffout_declare_function, xcoffout_source_line): Match above.\n\n        * aix43.h (SUBTARGET_OVERRIDE_OPTIONS): -mpowerpc64 without\n        -maix64 is error.\n        * rs6000.c (print_operand): Fix lossage typo.\n        (output_cbranch): Remove \"cr\" decoration for now.\n        * rs6000.h (ASM_OUTPUT_DEF_FROM_DECLS): Make alias 'const char *'.\n\nFrom-SVN: r33720", "tree": {"sha": "62ad42d48030262a517599d08cf827074ae13051", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/62ad42d48030262a517599d08cf827074ae13051"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/53cd5d6c50c317a3d2465a1973154aa5da86987a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53cd5d6c50c317a3d2465a1973154aa5da86987a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53cd5d6c50c317a3d2465a1973154aa5da86987a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53cd5d6c50c317a3d2465a1973154aa5da86987a/comments", "author": null, "committer": null, "parents": [{"sha": "042575e947d4fbc5a41e6fbcb7b1bd352305ceb1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/042575e947d4fbc5a41e6fbcb7b1bd352305ceb1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/042575e947d4fbc5a41e6fbcb7b1bd352305ceb1"}], "stats": {"total": 55, "additions": 38, "deletions": 17}, "files": [{"sha": "1c68b3e8843ae16fecacb4cdc7280d754771d085", "filename": "gcc/ChangeLog", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=53cd5d6c50c317a3d2465a1973154aa5da86987a", "patch": "@@ -1,3 +1,20 @@\n+2000-05-06  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* xcoffout.c (xcoff_current_include_file,\n+\txcoff_current_function_file, xcoff_lastfile): Constify char *.\n+\t(xcoffout_source_file, xcoffout_source_line): Make filename 'const\n+\tchar *'.\n+\t(xcoffout_declare_function): Make name 'const char *'.\n+\t(xcoffout_end_epilogue): Make fname 'const char *'\n+\t* xcoffout.h (xcoff_current_include_file, xcoff_lastfile,\n+\txcoffout_declare_function, xcoffout_source_line): Match above.\n+\n+\t* aix43.h (SUBTARGET_OVERRIDE_OPTIONS): -mpowerpc64 without\n+\t-maix64\tis error.\n+\t* rs6000.c (print_operand): Fix lossage typo.\n+\t(output_cbranch): Remove \"cr\" decoration for now.\n+\t* rs6000.h (ASM_OUTPUT_DEF_FROM_DECLS): Make alias 'const char *'. \n+\n Sat May  6 06:55:32 2000  Denis Chertykov  <denisc@overta.ru>\n \n \t* config/avr/avr.c (out_shift_with_cnt): Bugfix for shift by"}, {"sha": "c6a8d8df953aa6de55ce75852b3c5511c166d3c5", "filename": "gcc/config/rs6000/aix43.h", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2Fconfig%2Frs6000%2Faix43.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2Fconfig%2Frs6000%2Faix43.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faix43.h?ref=53cd5d6c50c317a3d2465a1973154aa5da86987a", "patch": "@@ -53,11 +53,15 @@ do {\t\t\t\t\t\t\t\t\t\\\n       target_flags &= ~NON_POWERPC_MASKS;\t\t\t\t\\\n       warning (\"-maix64 and POWER architecture are incompatible.\");\t\\\n     }\t\t\t\t\t\t\t\t\t\\\n-  if (TARGET_64BIT && ! (target_flags & MASK_POWERPC64))\t\t\\\n+  if (TARGET_64BIT && ! TARGET_POWERPC64)\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\t\\\n       target_flags |= MASK_POWERPC64;\t\t\t\t\t\\\n       warning (\"-maix64 requires PowerPC64 architecture remain enabled.\"); \\\n     }\t\t\t\t\t\t\t\t\t\\\n+  if (TARGET_POWERPC64 && ! TARGET_64BIT)\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      error (\"-maix64 required: 64-bit computation with 32-bit addressing not yet supported.\"); \\\n+    }\t\t\t\t\t\t\t\t\t\\\n } while (0);\n \n #undef ASM_SPEC"}, {"sha": "b3d391384bcbc8d39dbf36ee9ae9e6c87ad16522", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=53cd5d6c50c317a3d2465a1973154aa5da86987a", "patch": "@@ -3491,7 +3491,7 @@ print_operand (file, x, code)\n \t      || (GET_CODE (XEXP (XEXP (x, 0), 0)) != SYMBOL_REF\n \t\t  && GET_CODE (XEXP (XEXP (x, 0), 0)) != LABEL_REF)\n \t      || GET_CODE (XEXP (XEXP (x, 0), 1)) != CONST_INT)\n-\t    output_operand_lossage (\"invalid %%l value\");\n+\t    output_operand_lossage (\"invalid %%K value\");\n \t  print_operand_address (file, XEXP (XEXP (x, 0), 0));\n \t  fputs (\"@l\", file);\n \t  print_operand (file, XEXP (XEXP (x, 0), 1), 0);\n@@ -4073,7 +4073,7 @@ output_cbranch (op, label, reversed, insn)\n   else\n     s += sprintf (s, \"b%s%s \", ccode, pred);\n \n-  s += sprintf (s, \"cr%d\", cc_regno);\n+  s += sprintf (s, \"%d\", cc_regno);\n \n   if (label != NULL)\n     {"}, {"sha": "b0dcbf42ff926f1c41010c9f3d80528833bcc690", "filename": "gcc/config/rs6000/rs6000.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2Fconfig%2Frs6000%2Frs6000.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2Fconfig%2Frs6000%2Frs6000.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.h?ref=53cd5d6c50c317a3d2465a1973154aa5da86987a", "patch": "@@ -2381,7 +2381,7 @@ extern int toc_initialized;\n \n #define ASM_OUTPUT_DEF_FROM_DECLS(FILE,decl,target)\t\\\n do {\t\t\t\t\t\t\t\\\n-  char * alias = XSTR (XEXP (DECL_RTL (decl), 0), 0);\t\\\n+  const char * alias = XSTR (XEXP (DECL_RTL (decl), 0), 0); \\\n   char * name = IDENTIFIER_POINTER (target);\t\t\\\n   if (TREE_CODE (decl) == FUNCTION_DECL\t\t\t\\\n       && DEFAULT_ABI == ABI_AIX)\t\t\t\\"}, {"sha": "e706acc99507ebd3f0c00e2d31d3acac61db1f8f", "filename": "gcc/xcoffout.c", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2Fxcoffout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2Fxcoffout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fxcoffout.c?ref=53cd5d6c50c317a3d2465a1973154aa5da86987a", "patch": "@@ -61,14 +61,14 @@ static int xcoff_inlining = 0;\n \n /* Name of the current include file.  */\n \n-char *xcoff_current_include_file;\n+const char *xcoff_current_include_file;\n \n /* Name of the current function file.  This is the file the `.bf' is\n    emitted from.  In case a line is emitted from a different file,\n    (by including that file of course), then the line number will be\n    absolute.  */\n \n-static char *xcoff_current_function_file;\n+static const char *xcoff_current_function_file;\n \n /* Names of bss and data sections.  These should be unique names for each\n    compilation unit.  */\n@@ -79,7 +79,7 @@ char *xcoff_read_only_section_name;\n \n /* Last source file name mentioned in a NOTE insn.  */\n \n-char *xcoff_lastfile;\n+const char *xcoff_lastfile;\n \f\n /* Macro definitions used below.  */\n \n@@ -329,7 +329,7 @@ stab_to_sclass (stab)\n void\n xcoffout_source_file (file, filename, inline_p)\n      FILE *file;\n-     char *filename;\n+     const char *filename;\n      int inline_p;\n {\n   if (filename\n@@ -354,7 +354,7 @@ xcoffout_source_file (file, filename, inline_p)\n \t}\n       \n       if (!xcoff_lastfile)\n-\tggc_add_string_root (&xcoff_lastfile, 1);\n+\tggc_add_string_root ((char **) &xcoff_lastfile, 1);\n \n       xcoff_lastfile = filename;\n     }\n@@ -366,7 +366,7 @@ xcoffout_source_file (file, filename, inline_p)\n void\n xcoffout_source_line (file, filename, note)\n      FILE *file;\n-     char *filename;\n+     const char *filename;\n      rtx note;\n {\n   xcoffout_source_file (file, filename, RTX_INTEGRATED_P (note));\n@@ -460,9 +460,9 @@ void\n xcoffout_declare_function (file, decl, name)\n      FILE *file;\n      tree decl;\n-     char *name;\n+     const char *name;\n {\n-  char *n = name;\n+  char *n = (char *) name;\n   int i;\n \n   if (*n == '*')\n@@ -537,7 +537,7 @@ xcoffout_end_epilogue (file)\n      aux entry.  So, we emit a label after the last instruction which can\n      be used by the .function pseudo op to calculate the function size.  */\n \n-  char *fname = XSTR (XEXP (DECL_RTL (current_function_decl), 0), 0);\n+  const char *fname = XSTR (XEXP (DECL_RTL (current_function_decl), 0), 0);\n   if (*fname == '*')\n     ++fname;\n   fprintf (file, \"FE..\");"}, {"sha": "ebf9413b5280af5e5440f50627aed75b533f426a", "filename": "gcc/xcoffout.h", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2Fxcoffout.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53cd5d6c50c317a3d2465a1973154aa5da86987a/gcc%2Fxcoffout.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fxcoffout.h?ref=53cd5d6c50c317a3d2465a1973154aa5da86987a", "patch": "@@ -136,7 +136,7 @@ Boston, MA 02111-1307, USA.  */\n \n /* Name of the current include file.  */\n \n-extern char *xcoff_current_include_file;\n+extern const char *xcoff_current_include_file;\n \n /* Names of bss and data sections.  These should be unique names for each\n    compilation unit.  */\n@@ -147,7 +147,7 @@ extern char *xcoff_read_only_section_name;\n \n /* Last source file name mentioned in a NOTE insn.  */\n \n-extern char *xcoff_lastfile;\n+extern const char *xcoff_lastfile;\n \n /* Don't write out path name for main source file.  */\n #define DBX_OUTPUT_MAIN_SOURCE_DIRECTORY(FILE,FILENAME)\n@@ -200,12 +200,12 @@ extern void xcoffout_end_block\t\t\tPARAMS ((FILE *, int, int));\n #ifdef TREE_CODE\n extern void xcoff_output_standard_types\t\tPARAMS ((tree));\n #ifdef BUFSIZ\n-extern void xcoffout_declare_function\t\tPARAMS ((FILE *, tree, char *));\n+extern void xcoffout_declare_function\t\tPARAMS ((FILE *, tree, const char *));\n #endif /* BUFSIZ */\n #endif /* TREE_CODE */\n \n #ifdef RTX_CODE\n #ifdef BUFSIZ\n-extern void xcoffout_source_line\t\tPARAMS ((FILE *, char *, rtx));\n+extern void xcoffout_source_line\t\tPARAMS ((FILE *, const char *, rtx));\n #endif /* BUFSIZ */\n #endif /* RTX_CODE */"}]}