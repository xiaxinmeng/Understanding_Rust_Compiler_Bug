{"sha": "199c387dd1cad65c9ebbfb158e36d4cf005f6838", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTk5YzM4N2RkMWNhZDY1YzllYmJmYjE1OGUzNmQ0Y2YwMDVmNjgzOA==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael.morin@sfr.fr", "date": "2011-10-07T19:43:21Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-10-07T19:43:21Z"}, "message": "trans-array.c (gfc_conv_ss_startstride): Support zero rank loop.\n\n\t* trans-array.c (gfc_conv_ss_startstride): Support zero rank loop.\n\nFrom-SVN: r179682", "tree": {"sha": "8da38ae31ac3b404d187dd6e3cc9101a0ea6e6c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8da38ae31ac3b404d187dd6e3cc9101a0ea6e6c2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/199c387dd1cad65c9ebbfb158e36d4cf005f6838", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/199c387dd1cad65c9ebbfb158e36d4cf005f6838", "html_url": "https://github.com/Rust-GCC/gccrs/commit/199c387dd1cad65c9ebbfb158e36d4cf005f6838", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/199c387dd1cad65c9ebbfb158e36d4cf005f6838/comments", "author": null, "committer": null, "parents": [{"sha": "287b3dd2b2d990bebaa274ba2183b09f8e2aadae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/287b3dd2b2d990bebaa274ba2183b09f8e2aadae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/287b3dd2b2d990bebaa274ba2183b09f8e2aadae"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "8657e59f8a1d853050b191b63ce60c6df2de4436", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/199c387dd1cad65c9ebbfb158e36d4cf005f6838/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/199c387dd1cad65c9ebbfb158e36d4cf005f6838/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=199c387dd1cad65c9ebbfb158e36d4cf005f6838", "patch": "@@ -1,3 +1,7 @@\n+2011-10-07  Mikael Morin  <mikael.morin@sfr.fr>\n+\n+\t* trans-array.c (gfc_conv_ss_startstride): Support zero rank loop.\n+\n 2011-10-07  Mikael Morin  <mikael.morin@sfr.fr>\n \n \t* trans-array.c (gfc_conv_section_startstride): Move code to"}, {"sha": "067fe0b7fa34f4d83db1eb7918628b18f3d4ef5e", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/199c387dd1cad65c9ebbfb158e36d4cf005f6838/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/199c387dd1cad65c9ebbfb158e36d4cf005f6838/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=199c387dd1cad65c9ebbfb158e36d4cf005f6838", "patch": "@@ -3279,8 +3279,7 @@ gfc_conv_ss_startstride (gfc_loopinfo * loop)\n \n   loop->dimen = 0;\n   /* Determine the rank of the loop.  */\n-  for (ss = loop->ss;\n-       ss != gfc_ss_terminator && loop->dimen == 0; ss = ss->loop_chain)\n+  for (ss = loop->ss; ss != gfc_ss_terminator; ss = ss->loop_chain)\n     {\n       switch (ss->type)\n \t{\n@@ -3290,7 +3289,7 @@ gfc_conv_ss_startstride (gfc_loopinfo * loop)\n \tcase GFC_SS_COMPONENT:\n \t  loop->dimen = ss->data.info.dimen;\n \t  loop->codimen = ss->data.info.codimen;\n-\t  break;\n+\t  goto done;\n \n \t/* As usual, lbound and ubound are exceptions!.  */\n \tcase GFC_SS_INTRINSIC:\n@@ -3300,14 +3299,14 @@ gfc_conv_ss_startstride (gfc_loopinfo * loop)\n \t    case GFC_ISYM_UBOUND:\n \t      loop->dimen = ss->data.info.dimen;\n \t      loop->codimen = 0;\n-\t      break;\n+\t      goto done;\n \n \t    case GFC_ISYM_LCOBOUND:\n \t    case GFC_ISYM_UCOBOUND:\n \t    case GFC_ISYM_THIS_IMAGE:\n \t      loop->dimen = ss->data.info.dimen;\n \t      loop->codimen = ss->data.info.codimen;\n-\t      break;\n+\t      goto done;\n \n \t    default:\n \t      break;\n@@ -3320,8 +3319,9 @@ gfc_conv_ss_startstride (gfc_loopinfo * loop)\n \n   /* We should have determined the rank of the expression by now.  If\n      not, that's bad news.  */\n-  gcc_assert (loop->dimen + loop->codimen != 0);\n+  gcc_unreachable ();\n \n+done:\n   /* Loop over all the SS in the chain.  */\n   for (ss = loop->ss; ss != gfc_ss_terminator; ss = ss->loop_chain)\n     {"}]}