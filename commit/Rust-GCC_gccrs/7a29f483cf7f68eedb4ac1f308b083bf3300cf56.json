{"sha": "7a29f483cf7f68eedb4ac1f308b083bf3300cf56", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2EyOWY0ODNjZjdmNjhlZWRiNGFjMWYzMDhiMDgzYmYzMzAwY2Y1Ng==", "commit": {"author": {"name": "Bob Wilson", "email": "bob.wilson@acm.org", "date": "2003-05-21T21:23:03Z"}, "committer": {"name": "Bob Wilson", "email": "bwilson@gcc.gnu.org", "date": "2003-05-21T21:23:03Z"}, "message": "xtensa.h (MASK_SERIALIZE_VOLATILE, [...]): Delete.\n\n        * config/xtensa/xtensa.h (MASK_SERIALIZE_VOLATILE,\n        TARGET_SERIALIZE_VOLATILE): Delete.\n        (MASK_CONST16, MASK_ABS, MASK_ADDX): Renumber flag bits.\n        (TARGET_DEFAULT): Remove MASK_SERIALIZE_VOLATILE.\n        (TARGET_SWITCHES): Remove \"-mserialize-volatile\" and\n        \"-mno-serialize-volatile\".\n        * config/xtensa/xtensa.c (print_operand): Remove checks of\n        TARGET_SERIALIZE_VOLATILE.\n        * config/xtensa/xtensa.md (*lsiu, *ssiu): Likewise.\n        * doc/invoke.texi (Option Summary, Xtensa Options): Remove\n        \"-mserialize-volatile\" and \"-mno-serialize-volatile\" options.\n\nFrom-SVN: r67067", "tree": {"sha": "d59834451d15df6a0be90ba8e64472d5601fd1a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d59834451d15df6a0be90ba8e64472d5601fd1a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7a29f483cf7f68eedb4ac1f308b083bf3300cf56", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a29f483cf7f68eedb4ac1f308b083bf3300cf56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a29f483cf7f68eedb4ac1f308b083bf3300cf56", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a29f483cf7f68eedb4ac1f308b083bf3300cf56/comments", "author": null, "committer": null, "parents": [{"sha": "862fced8b5fca3dbad297e526facb2c735a5f1cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/862fced8b5fca3dbad297e526facb2c735a5f1cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/862fced8b5fca3dbad297e526facb2c735a5f1cb"}], "stats": {"total": 45, "additions": 21, "deletions": 24}, "files": [{"sha": "355cf1822acc952fca756b98d93ef9dacebb145b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a29f483cf7f68eedb4ac1f308b083bf3300cf56/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a29f483cf7f68eedb4ac1f308b083bf3300cf56/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7a29f483cf7f68eedb4ac1f308b083bf3300cf56", "patch": "@@ -1,3 +1,17 @@\n+2003-05-21  Bob Wilson  <bob.wilson@acm.org>\n+\n+\t* config/xtensa/xtensa.h (MASK_SERIALIZE_VOLATILE,\n+\tTARGET_SERIALIZE_VOLATILE): Delete.\n+\t(MASK_CONST16, MASK_ABS, MASK_ADDX): Renumber flag bits.\n+\t(TARGET_DEFAULT): Remove MASK_SERIALIZE_VOLATILE.\n+\t(TARGET_SWITCHES): Remove \"-mserialize-volatile\" and\n+\t\"-mno-serialize-volatile\".\n+\t* config/xtensa/xtensa.c (print_operand): Remove checks of\n+\tTARGET_SERIALIZE_VOLATILE.\n+\t* config/xtensa/xtensa.md (*lsiu, *ssiu): Likewise.\n+\t* doc/invoke.texi (Option Summary, Xtensa Options): Remove\n+\t\"-mserialize-volatile\" and \"-mno-serialize-volatile\" options.\n+\n 2003-05-21  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* c-parse.in (fndef): Set DECL_SOURCE_LINE and FILE earlier."}, {"sha": "18ed9d37f925a015cbada9e4d2c12899f95dc049", "filename": "gcc/config/xtensa/xtensa.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a29f483cf7f68eedb4ac1f308b083bf3300cf56/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a29f483cf7f68eedb4ac1f308b083bf3300cf56/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.c?ref=7a29f483cf7f68eedb4ac1f308b083bf3300cf56", "patch": "@@ -1938,7 +1938,7 @@ print_operand (file, x, letter)\n \t{\n \t  /* For a volatile memory reference, emit a MEMW before the\n \t     load or store.  */\n-\t  if (MEM_VOLATILE_P (x) && TARGET_SERIALIZE_VOLATILE)\n+\t  if (MEM_VOLATILE_P (x))\n \t    fprintf (file, \"memw\\n\\t\");\n \t}\n       else"}, {"sha": "9b7f261e0a46c67d6d0b8112fcfe689ca05562eb", "filename": "gcc/config/xtensa/xtensa.h", "status": "modified", "additions": 4, "deletions": 11, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a29f483cf7f68eedb4ac1f308b083bf3300cf56/gcc%2Fconfig%2Fxtensa%2Fxtensa.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a29f483cf7f68eedb4ac1f308b083bf3300cf56/gcc%2Fconfig%2Fxtensa%2Fxtensa.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.h?ref=7a29f483cf7f68eedb4ac1f308b083bf3300cf56", "patch": "@@ -60,10 +60,9 @@ extern unsigned xtensa_current_frame_size;\n #define MASK_HARD_FLOAT_SQRT\t0x00002000\t/* floating-point sqrt */\n #define MASK_HARD_FLOAT_RSQRT\t0x00004000\t/* floating-point recip sqrt */\n #define MASK_NO_FUSED_MADD\t0x00008000\t/* avoid f-p mul/add */\n-#define MASK_SERIALIZE_VOLATILE 0x00010000\t/* serialize volatile refs */\n-#define MASK_CONST16\t\t0x00020000\t/* use CONST16 instruction */\n-#define MASK_ABS\t\t0x00040000\t/* use ABS instruction */\n-#define MASK_ADDX\t\t0x00080000\t/* use ADDX* and SUBX* */\n+#define MASK_CONST16\t\t0x00010000\t/* use CONST16 instruction */\n+#define MASK_ABS\t\t0x00020000\t/* use ABS instruction */\n+#define MASK_ADDX\t\t0x00040000\t/* use ADDX* and SUBX* */\n \n /* Macros used in the machine description to test the flags.  */\n \n@@ -83,7 +82,6 @@ extern unsigned xtensa_current_frame_size;\n #define TARGET_HARD_FLOAT_SQRT\t(target_flags & MASK_HARD_FLOAT_SQRT)\n #define TARGET_HARD_FLOAT_RSQRT\t(target_flags & MASK_HARD_FLOAT_RSQRT)\n #define TARGET_NO_FUSED_MADD\t(target_flags & MASK_NO_FUSED_MADD)\n-#define TARGET_SERIALIZE_VOLATILE (target_flags & MASK_SERIALIZE_VOLATILE)\n #define TARGET_CONST16\t\t(target_flags & MASK_CONST16)\n #define TARGET_ABS\t\t(target_flags & MASK_ABS)\n #define TARGET_ADDX\t\t(target_flags & MASK_ADDX)\n@@ -108,8 +106,7 @@ extern unsigned xtensa_current_frame_size;\n   (XCHAL_HAVE_FP_DIV\t? MASK_HARD_FLOAT_DIV : 0) |\t\t\t\\\n   (XCHAL_HAVE_FP_RECIP\t? MASK_HARD_FLOAT_RECIP : 0) |\t\t\t\\\n   (XCHAL_HAVE_FP_SQRT\t? MASK_HARD_FLOAT_SQRT : 0) |\t\t\t\\\n-  (XCHAL_HAVE_FP_RSQRT\t? MASK_HARD_FLOAT_RSQRT : 0) |\t\t\t\\\n-  MASK_SERIALIZE_VOLATILE)\n+  (XCHAL_HAVE_FP_RSQRT\t? MASK_HARD_FLOAT_RSQRT : 0))\n \n /* Macro to define tables used to set the flags.  */\n \n@@ -191,10 +188,6 @@ extern unsigned xtensa_current_frame_size;\n     N_(\"Disable fused multiply/add and multiply/subtract FP instructions\")}, \\\n   {\"fused-madd\",\t\t-MASK_NO_FUSED_MADD,\t\t\t\\\n     N_(\"Enable fused multiply/add and multiply/subtract FP instructions\")}, \\\n-  {\"serialize-volatile\",\tMASK_SERIALIZE_VOLATILE,\t\t\\\n-    N_(\"Serialize volatile memory references with MEMW instructions\")},\t\\\n-  {\"no-serialize-volatile\",\t-MASK_SERIALIZE_VOLATILE,\t\t\\\n-    N_(\"Do not serialize volatile memory references with MEMW instructions\")},\\\n   {\"text-section-literals\",\t0,\t\t\t\t\t\\\n     N_(\"Intersperse literal pools with code in the text section\")},\t\\\n   {\"no-text-section-literals\",\t0,\t\t\t\t\t\\"}, {"sha": "40bf5c036bff551153d49e694fcf000715b29bcd", "filename": "gcc/config/xtensa/xtensa.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a29f483cf7f68eedb4ac1f308b083bf3300cf56/gcc%2Fconfig%2Fxtensa%2Fxtensa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a29f483cf7f68eedb4ac1f308b083bf3300cf56/gcc%2Fconfig%2Fxtensa%2Fxtensa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.md?ref=7a29f483cf7f68eedb4ac1f308b083bf3300cf56", "patch": "@@ -1154,7 +1154,7 @@\n   \"TARGET_HARD_FLOAT\"\n   \"*\n {\n-  if (TARGET_SERIALIZE_VOLATILE && volatile_refs_p (PATTERN (insn)))\n+  if (volatile_refs_p (PATTERN (insn)))\n     output_asm_insn (\\\"memw\\\", operands);\n   return \\\"lsiu\\\\t%0, %1, %2\\\";\n }\"\n@@ -1171,7 +1171,7 @@\n   \"TARGET_HARD_FLOAT\"\n   \"*\n {\n-  if (TARGET_SERIALIZE_VOLATILE && volatile_refs_p (PATTERN (insn)))\n+  if (volatile_refs_p (PATTERN (insn)))\n     output_asm_insn (\\\"memw\\\", operands);\n   return \\\"ssiu\\\\t%2, %0, %1\\\";\n }\""}, {"sha": "aa7e5dc4d6f011f55028488064cc3940f8e3c228", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a29f483cf7f68eedb4ac1f308b083bf3300cf56/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a29f483cf7f68eedb4ac1f308b083bf3300cf56/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=7a29f483cf7f68eedb4ac1f308b083bf3300cf56", "patch": "@@ -646,7 +646,6 @@ in the following sections.\n -mbooleans  -mno-booleans @gol\n -mhard-float  -msoft-float @gol\n -mfused-madd  -mno-fused-madd @gol\n--mserialize-volatile  -mno-serialize-volatile @gol\n -mtext-section-literals  -mno-text-section-literals @gol\n -mtarget-align  -mno-target-align @gol\n -mlongcalls  -mno-longcalls}\n@@ -10775,15 +10774,6 @@ add/subtract instructions also ensures that the program output is not\n sensitive to the compiler's ability to combine multiply and add/subtract\n operations.\n \n-@item -mserialize-volatile\n-@itemx -mno-serialize-volatile\n-@opindex mserialize-volatile\n-@opindex mno-serialize-volatile\n-When this option is enabled, GCC inserts @code{MEMW} instructions before\n-@code{volatile} memory references to guarantee sequential consistency.\n-The default is @option{-mserialize-volatile}.  Use\n-@option{-mno-serialize-volatile} to omit the @code{MEMW} instructions.\n-\n @item -mtext-section-literals\n @itemx -mno-text-section-literals\n @opindex mtext-section-literals"}]}