{"sha": "22cbc70726b96dbdc4b5fee428af20843423190a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjJjYmM3MDcyNmI5NmRiZGM0YjVmZWU0MjhhZjIwODQzNDIzMTkwYQ==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2007-03-15T01:25:27Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2007-03-15T01:25:27Z"}, "message": "re PR fortran/31051 ([4.2 Only] gfortran bug with x and t format descriptors.)\n\n2007-03-14  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libgfortran/31051\n\t* io/transfer.c (formatted_transfer_scalar): Adjust position for pending\n\tspaces when in writing mode.  Clean up some formatting.\n\nFrom-SVN: r122940", "tree": {"sha": "9bbc9ec536b7e5d79d91dac13e2a816137da8271", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9bbc9ec536b7e5d79d91dac13e2a816137da8271"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/22cbc70726b96dbdc4b5fee428af20843423190a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22cbc70726b96dbdc4b5fee428af20843423190a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22cbc70726b96dbdc4b5fee428af20843423190a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22cbc70726b96dbdc4b5fee428af20843423190a/comments", "author": null, "committer": null, "parents": [{"sha": "15ce86a7e56acbdda0548863bf2071f92e11f739", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15ce86a7e56acbdda0548863bf2071f92e11f739", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15ce86a7e56acbdda0548863bf2071f92e11f739"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "d793b727b2605f8ccb575c42bd3609c59dbba62f", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22cbc70726b96dbdc4b5fee428af20843423190a/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22cbc70726b96dbdc4b5fee428af20843423190a/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=22cbc70726b96dbdc4b5fee428af20843423190a", "patch": "@@ -1,3 +1,9 @@\n+2007-03-14  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libgfortran/31051\n+\t* io/transfer.c (formatted_transfer_scalar): Adjust position for pending\n+\tspaces when in writing mode.  Clean up some formatting.\n+\n 2007-03-14  Thomas Koenig  <Thomas.Koenig@online.de>\n \n \tPR libfortran/30690"}, {"sha": "2c1558e6b06a2ce30bcc6ec1d4368bd4a48e3532", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22cbc70726b96dbdc4b5fee428af20843423190a/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22cbc70726b96dbdc4b5fee428af20843423190a/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=22cbc70726b96dbdc4b5fee428af20843423190a", "patch": "@@ -1155,7 +1155,7 @@ formatted_transfer_scalar (st_parameter_dt *dtp, bt type, void *p, int len,\n \t/* Format codes that don't transfer data.  */\n \tcase FMT_X:\n \tcase FMT_TR:\n-\t  consume_data_flag = 0 ;\n+\t  consume_data_flag = 0;\n \n \t  pos = bytes_used + f->u.n + dtp->u.p.skips;\n \t  dtp->u.p.skips = f->u.n + dtp->u.p.skips;\n@@ -1171,13 +1171,16 @@ formatted_transfer_scalar (st_parameter_dt *dtp, bt type, void *p, int len,\n \t      write_x (dtp, dtp->u.p.skips, dtp->u.p.pending_spaces);\n \t      dtp->u.p.skips = dtp->u.p.pending_spaces = 0;\n \t    }\n+\n \t  if (dtp->u.p.mode == READING)\n \t    read_x (dtp, f->u.n);\n \n \t  break;\n \n \tcase FMT_TL:\n \tcase FMT_T:\n+\t  consume_data_flag = 0;\n+\n \t  if (f->format == FMT_TL)\n \t    {\n \n@@ -1196,8 +1199,10 @@ formatted_transfer_scalar (st_parameter_dt *dtp, bt type, void *p, int len,\n \t    }\n \t  else /* FMT_T */\n \t    {\n-\t      consume_data_flag = 0;\n-\t      pos = f->u.n - 1;\n+\t      if (dtp->u.p.mode == READING)\n+\t\tpos = f->u.n - 1;\n+\t      else\n+\t\tpos = f->u.n - dtp->u.p.pending_spaces - 1;\n \t    }\n \n \t  /* Standard 10.6.1.1: excessive left tabbing is reset to the"}]}