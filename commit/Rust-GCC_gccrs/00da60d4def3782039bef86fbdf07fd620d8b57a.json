{"sha": "00da60d4def3782039bef86fbdf07fd620d8b57a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDBkYTYwZDRkZWYzNzgyMDM5YmVmODZmYmRmMDdmZDYyMGQ4YjU3YQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2017-10-31T11:55:19Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2017-10-31T11:55:19Z"}, "message": "GCOV: document behavior of -fkeep-{static,inline}-functions (PR gcov-profile/82633).\n\n2017-10-31  Martin Liska  <mliska@suse.cz>\n\n\tPR gcov-profile/82633\n\t* doc/gcov.texi: Document -fkeep-{static,inline}-functions and\n\ttheir interaction with GCOV infrastructure.\n\t* configure.ac: Add -fkeep-{inline,static}-functions to\n\tcoverage_flags.\n\t* configure: Regenerate.\n\nFrom-SVN: r254257", "tree": {"sha": "db0a5d967d87dd9bb161c77101e1244d059673b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db0a5d967d87dd9bb161c77101e1244d059673b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/00da60d4def3782039bef86fbdf07fd620d8b57a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00da60d4def3782039bef86fbdf07fd620d8b57a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00da60d4def3782039bef86fbdf07fd620d8b57a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00da60d4def3782039bef86fbdf07fd620d8b57a/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "00ca3ed28c98be6485017f835e6c4366f35221ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00ca3ed28c98be6485017f835e6c4366f35221ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00ca3ed28c98be6485017f835e6c4366f35221ee"}], "stats": {"total": 24, "additions": 20, "deletions": 4}, "files": [{"sha": "b15dc955dc5d9042d53828684025de7540a59208", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00da60d4def3782039bef86fbdf07fd620d8b57a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00da60d4def3782039bef86fbdf07fd620d8b57a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=00da60d4def3782039bef86fbdf07fd620d8b57a", "patch": "@@ -1,3 +1,12 @@\n+2017-10-31  Martin Liska  <mliska@suse.cz>\n+\n+\tPR gcov-profile/82633\n+\t* doc/gcov.texi: Document -fkeep-{static,inline}-functions and\n+\ttheir interaction with GCOV infrastructure.\n+\t* configure.ac: Add -fkeep-{inline,static}-functions to\n+\tcoverage_flags.\n+\t* configure: Regenerate.\n+\n 2017-10-31  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/82772"}, {"sha": "c6297acf53c3ba50a6af04cb4bdb30d04cfb5d0c", "filename": "gcc/configure", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00da60d4def3782039bef86fbdf07fd620d8b57a/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00da60d4def3782039bef86fbdf07fd620d8b57a/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=00da60d4def3782039bef86fbdf07fd620d8b57a", "patch": "@@ -7321,10 +7321,10 @@ fi\n if test \"${enable_coverage+set}\" = set; then :\n   enableval=$enable_coverage; case \"${enableval}\" in\n   yes|noopt)\n-    coverage_flags=\"-fprofile-arcs -ftest-coverage -frandom-seed=\\$@ -O0\"\n+    coverage_flags=\"-fprofile-arcs -ftest-coverage -frandom-seed=\\$@ -O0 -fkeep-inline-functions -fkeep-static-functions\"\n     ;;\n   opt)\n-    coverage_flags=\"-fprofile-arcs -ftest-coverage -frandom-seed=\\$@ -O2\"\n+    coverage_flags=\"-fprofile-arcs -ftest-coverage -frandom-seed=\\$@ -O2 -fkeep-inline-functions -fkeep-static-functions\"\n     ;;\n   no)\n     # a.k.a. --disable-coverage"}, {"sha": "0ff9dfe24a00c27f569ac4295f65dcdb8b22ae77", "filename": "gcc/configure.ac", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00da60d4def3782039bef86fbdf07fd620d8b57a/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00da60d4def3782039bef86fbdf07fd620d8b57a/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=00da60d4def3782039bef86fbdf07fd620d8b57a", "patch": "@@ -728,10 +728,10 @@ AC_ARG_ENABLE(coverage,\n \t\t default is noopt])],\n [case \"${enableval}\" in\n   yes|noopt)\n-    coverage_flags=\"-fprofile-arcs -ftest-coverage -frandom-seed=\\$@ -O0\"\n+    coverage_flags=\"-fprofile-arcs -ftest-coverage -frandom-seed=\\$@ -O0 -fkeep-inline-functions -fkeep-static-functions\"\n     ;;\n   opt)\n-    coverage_flags=\"-fprofile-arcs -ftest-coverage -frandom-seed=\\$@ -O2\"\n+    coverage_flags=\"-fprofile-arcs -ftest-coverage -frandom-seed=\\$@ -O2 -fkeep-inline-functions -fkeep-static-functions\"\n     ;;\n   no)\n     # a.k.a. --disable-coverage"}, {"sha": "88b8d6d9071181cc35aad458867703a8e61dc6b5", "filename": "gcc/doc/gcov.texi", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00da60d4def3782039bef86fbdf07fd620d8b57a/gcc%2Fdoc%2Fgcov.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00da60d4def3782039bef86fbdf07fd620d8b57a/gcc%2Fdoc%2Fgcov.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fgcov.texi?ref=00da60d4def3782039bef86fbdf07fd620d8b57a", "patch": "@@ -328,6 +328,13 @@ handlers, respectively. Given @samp{-a} option, unexecuted blocks are\n marked @samp{$$$$$} or @samp{%%%%%}, depending on whether a basic block\n is reachable via non-exceptional or exceptional paths.\n \n+Note that GCC can completely remove the bodies of functions that are\n+not needed -- for instance if they are inlined everywhere.  Such functions\n+are marked with @samp{-}, which can be confusing.\n+Use the @option{-fkeep-inline-functions} and @option{-fkeep-static-functions}\n+options to retain these functions and\n+allow gcov to properly show their @var{execution_count}.\n+\n Some lines of information at the start have @var{line_number} of zero.\n These preamble lines are of the form\n "}]}