{"sha": "df2abf546911a295588c230ced8cb59ba5c38477", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGYyYWJmNTQ2OTExYTI5NTU4OGMyMzBjZWQ4Y2I1OWJhNWMzODQ3Nw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2013-09-18T10:21:37Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2013-09-18T10:21:37Z"}, "message": "trans.c (Subprogram_Body_to_gnu): Pop the stack of return variables for subprograms using the CICO mechanism.\n\n\t* gcc-interface/trans.c (Subprogram_Body_to_gnu): Pop the stack of\n\treturn variables for subprograms using the CICO mechanism.\n\nFrom-SVN: r202684", "tree": {"sha": "03e43d00d117ee522778cea89119268f61346556", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03e43d00d117ee522778cea89119268f61346556"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df2abf546911a295588c230ced8cb59ba5c38477", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df2abf546911a295588c230ced8cb59ba5c38477", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df2abf546911a295588c230ced8cb59ba5c38477", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df2abf546911a295588c230ced8cb59ba5c38477/comments", "author": null, "committer": null, "parents": [{"sha": "995a1b4a75aca90837c9a62131eda7b6be9b8c41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/995a1b4a75aca90837c9a62131eda7b6be9b8c41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/995a1b4a75aca90837c9a62131eda7b6be9b8c41"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "44edd7209276bd98b7b74651bd4a28c6318b6050", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2abf546911a295588c230ced8cb59ba5c38477/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2abf546911a295588c230ced8cb59ba5c38477/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=df2abf546911a295588c230ced8cb59ba5c38477", "patch": "@@ -1,3 +1,8 @@\n+2013-09-18  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/trans.c (Subprogram_Body_to_gnu): Pop the stack of\n+\treturn variables for subprograms using the CICO mechanism.\n+\n 2013-09-13  Dominique Dhumieres  <dominiq@lps.ens.fr>\n \n \t* gcc-interface/Makefile.in: Fix darwin Filter to match on $target_os,"}, {"sha": "923189aea4299c6d746f0d36abd10d56b24a74e4", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2abf546911a295588c230ced8cb59ba5c38477/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2abf546911a295588c230ced8cb59ba5c38477/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=df2abf546911a295588c230ced8cb59ba5c38477", "patch": "@@ -3605,6 +3605,8 @@ Subprogram_Body_to_gnu (Node_Id gnat_node)\n     {\n       tree gnu_retval;\n \n+      gnu_return_var_stack->pop ();\n+\n       add_stmt (gnu_result);\n       add_stmt (build1 (LABEL_EXPR, void_type_node,\n \t\t\tgnu_return_label_stack->last ()));"}, {"sha": "3fc11584623e0d958426ea904a737815a49f0209", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2abf546911a295588c230ced8cb59ba5c38477/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2abf546911a295588c230ced8cb59ba5c38477/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=df2abf546911a295588c230ced8cb59ba5c38477", "patch": "@@ -1,3 +1,7 @@\n+2013-09-18  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/in_out_parameter4.adb: New test.\n+\n 2013-09-18  Marek Polacek  <polacek@redhat.com>\n \n \tPR sanitizer/58411"}, {"sha": "4f5cc2181983c99df7209bc7b3c137ac1ef47160", "filename": "gcc/testsuite/gnat.dg/in_out_parameter4.adb", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df2abf546911a295588c230ced8cb59ba5c38477/gcc%2Ftestsuite%2Fgnat.dg%2Fin_out_parameter4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df2abf546911a295588c230ced8cb59ba5c38477/gcc%2Ftestsuite%2Fgnat.dg%2Fin_out_parameter4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fin_out_parameter4.adb?ref=df2abf546911a295588c230ced8cb59ba5c38477", "patch": "@@ -0,0 +1,30 @@\n+-- { dg-do run }\n+-- { dg-options \"-gnat12 -gnatVa\" }\n+\n+procedure In_Out_Parameter4 is\n+\n+   type Enum is (E_Undetermined, E_Down, E_Up);\n+   subtype Status_T is Enum range E_Down .. E_Up;\n+\n+   function Recurse (Val : in out Integer) return Status_T is\n+\n+     Result : Status_T;\n+\n+     procedure Dummy (I : in out Integer) is begin null; end;\n+\n+   begin\n+     if Val > 500 then\n+       Val := Val - 1;\n+       Result := Recurse (Val);\n+       return Result;\n+     else\n+       return E_UP;\n+     end if;\n+   end;\n+\n+   Val : Integer := 501;\n+   S : Status_T;\n+\n+begin\n+   S := Recurse (Val);\n+end;"}]}