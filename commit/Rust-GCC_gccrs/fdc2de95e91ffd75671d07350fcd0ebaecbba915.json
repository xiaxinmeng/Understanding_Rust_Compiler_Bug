{"sha": "fdc2de95e91ffd75671d07350fcd0ebaecbba915", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmRjMmRlOTVlOTFmZmQ3NTY3MWQwNzM1MGZjZDBlYmFlY2JiYTkxNQ==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2011-03-25T16:28:15Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-03-25T16:28:15Z"}, "message": "tree-ssa-copy.c (stmt_may_generate_copy): Copies from constants also generate copies.\n\n2011-03-25  Richard Guenther  <rguenther@suse.de>\n\n\t* tree-ssa-copy.c (stmt_may_generate_copy): Copies from constants\n\talso generate copies.\n\t(fini_copy_prop): Handle constant values properly.\n\nFrom-SVN: r171465", "tree": {"sha": "6c641cdf9034b10c106fafd059cbad19f6710d89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c641cdf9034b10c106fafd059cbad19f6710d89"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fdc2de95e91ffd75671d07350fcd0ebaecbba915", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdc2de95e91ffd75671d07350fcd0ebaecbba915", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fdc2de95e91ffd75671d07350fcd0ebaecbba915", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdc2de95e91ffd75671d07350fcd0ebaecbba915/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "21385db052f28434a7de4dbb5d19c00b6deddc03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21385db052f28434a7de4dbb5d19c00b6deddc03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21385db052f28434a7de4dbb5d19c00b6deddc03"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "588651d7fa0d1e32b6b92f5032822ff0fb484323", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdc2de95e91ffd75671d07350fcd0ebaecbba915/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdc2de95e91ffd75671d07350fcd0ebaecbba915/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fdc2de95e91ffd75671d07350fcd0ebaecbba915", "patch": "@@ -1,3 +1,9 @@\n+2011-03-25  Richard Guenther  <rguenther@suse.de>\n+\n+\t* tree-ssa-copy.c (stmt_may_generate_copy): Copies from constants\n+\talso generate copies.\n+\t(fini_copy_prop): Handle constant values properly.\n+\n 2011-03-25  Jakub Jelinek  <jakub@redhat.com>\n \n \t* dwarf2out.c (mem_loc_descriptor) <case ZERO_EXTRACT>: Compare"}, {"sha": "dbcbf9e5905c4b251f789fb9e88bb39e07dec63b", "filename": "gcc/tree-ssa-copy.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fdc2de95e91ffd75671d07350fcd0ebaecbba915/gcc%2Ftree-ssa-copy.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fdc2de95e91ffd75671d07350fcd0ebaecbba915/gcc%2Ftree-ssa-copy.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-copy.c?ref=fdc2de95e91ffd75671d07350fcd0ebaecbba915", "patch": "@@ -315,8 +315,9 @@ stmt_may_generate_copy (gimple stmt)\n   /* Otherwise, the only statements that generate useful copies are\n      assignments whose RHS is just an SSA name that doesn't flow\n      through abnormal edges.  */\n-  return (gimple_assign_rhs_code (stmt) == SSA_NAME\n-\t  && !SSA_NAME_OCCURS_IN_ABNORMAL_PHI (gimple_assign_rhs1 (stmt)));\n+  return ((gimple_assign_rhs_code (stmt) == SSA_NAME\n+\t   && !SSA_NAME_OCCURS_IN_ABNORMAL_PHI (gimple_assign_rhs1 (stmt)))\n+\t  || is_gimple_min_invariant (gimple_assign_rhs1 (stmt)));\n }\n \n \n@@ -771,6 +772,7 @@ fini_copy_prop (void)\n \t of the representative to the first solution we find if\n \t it doesn't have one already.  */\n       if (copy_of[i].value != var\n+\t  && TREE_CODE (copy_of[i].value) == SSA_NAME\n \t  && POINTER_TYPE_P (TREE_TYPE (var))\n \t  && SSA_NAME_PTR_INFO (var)\n \t  && !SSA_NAME_PTR_INFO (copy_of[i].value))"}]}