{"sha": "dcb6e95174a4475cebc511bf8e63945c81e5a791", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGNiNmU5NTE3NGE0NDc1Y2ViYzUxMWJmOGU2Mzk0NWM4MWU1YTc5MQ==", "commit": {"author": {"name": "Rafael Avila de Espindola", "email": "espindola@google.com", "date": "2009-04-02T16:02:08Z"}, "committer": {"name": "Rafael Espindola", "email": "espindola@gcc.gnu.org", "date": "2009-04-02T16:02:08Z"}, "message": "c-decl.c (merge_decls): Make sure newdecl and olddecl don't share the argument list.\n\n2009-04-02  Rafael Avila de Espindola  <espindola@google.com>\n\n\t* c-decl.c (merge_decls): Make sure newdecl and olddecl don't\n\tshare the argument list.\n\nFrom-SVN: r145456", "tree": {"sha": "4518680eaa0db30a8b3c1170edebd405bdea5944", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4518680eaa0db30a8b3c1170edebd405bdea5944"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dcb6e95174a4475cebc511bf8e63945c81e5a791", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcb6e95174a4475cebc511bf8e63945c81e5a791", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcb6e95174a4475cebc511bf8e63945c81e5a791", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcb6e95174a4475cebc511bf8e63945c81e5a791/comments", "author": null, "committer": null, "parents": [{"sha": "d85478c277ad958170d473a59b1c276a508289bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d85478c277ad958170d473a59b1c276a508289bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d85478c277ad958170d473a59b1c276a508289bb"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "8aed50f1a077eae32cc6610a24c7d25e60e3f9c4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb6e95174a4475cebc511bf8e63945c81e5a791/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb6e95174a4475cebc511bf8e63945c81e5a791/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dcb6e95174a4475cebc511bf8e63945c81e5a791", "patch": "@@ -1,3 +1,8 @@\n+2009-04-02  Rafael Avila de Espindola  <espindola@google.com>\n+\n+\t* c-decl.c (merge_decls): Make sure newdecl and olddecl don't\n+\tshare the argument list.\n+\n 2009-04-02  Rafael Avila de Espindola  <espindola@google.com>\n \n \tMerge"}, {"sha": "76f7fe482f5b977266903d5ba8cf3f2a2b27cb3a", "filename": "gcc/c-decl.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcb6e95174a4475cebc511bf8e63945c81e5a791/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcb6e95174a4475cebc511bf8e63945c81e5a791/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=dcb6e95174a4475cebc511bf8e63945c81e5a791", "patch": "@@ -1853,12 +1853,15 @@ merge_decls (tree newdecl, tree olddecl, tree newtype, tree oldtype)\n       /* Also preserve various other info from the definition.  */\n       if (!new_is_definition)\n \t{\n+\t  tree t;\n \t  DECL_RESULT (newdecl) = DECL_RESULT (olddecl);\n \t  DECL_INITIAL (newdecl) = DECL_INITIAL (olddecl);\n \t  DECL_STRUCT_FUNCTION (newdecl) = DECL_STRUCT_FUNCTION (olddecl);\n \t  DECL_SAVED_TREE (newdecl) = DECL_SAVED_TREE (olddecl);\n \t  gimple_set_body (newdecl, gimple_body (olddecl));\n-\t  DECL_ARGUMENTS (newdecl) = DECL_ARGUMENTS (olddecl);\n+\t  DECL_ARGUMENTS (newdecl) = copy_list (DECL_ARGUMENTS (olddecl));\n+\t  for (t = DECL_ARGUMENTS (newdecl); t ; t = TREE_CHAIN (t))\n+\t    DECL_CONTEXT (t) = newdecl;\n \n \t  /* See if we've got a function to instantiate from.  */\n \t  if (DECL_SAVED_TREE (olddecl))\n@@ -1880,6 +1883,9 @@ merge_decls (tree newdecl, tree olddecl, tree newtype, tree oldtype)\n   {\n     unsigned olddecl_uid = DECL_UID (olddecl);\n     tree olddecl_context = DECL_CONTEXT (olddecl);\n+    tree olddecl_arguments = NULL;\n+    if (TREE_CODE (olddecl) == FUNCTION_DECL)\n+      olddecl_arguments = DECL_ARGUMENTS (olddecl);\n \n     memcpy ((char *) olddecl + sizeof (struct tree_common),\n \t    (char *) newdecl + sizeof (struct tree_common),\n@@ -1910,6 +1916,8 @@ merge_decls (tree newdecl, tree olddecl, tree newtype, tree oldtype)\n       }\n     DECL_UID (olddecl) = olddecl_uid;\n     DECL_CONTEXT (olddecl) = olddecl_context;\n+    if (TREE_CODE (olddecl) == FUNCTION_DECL)\n+      DECL_ARGUMENTS (olddecl) = olddecl_arguments;\n   }\n \n   /* If OLDDECL had its DECL_RTL instantiated, re-invoke make_decl_rtl"}]}