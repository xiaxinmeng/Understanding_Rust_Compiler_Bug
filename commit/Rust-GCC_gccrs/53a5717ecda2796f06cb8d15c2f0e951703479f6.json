{"sha": "53a5717ecda2796f06cb8d15c2f0e951703479f6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTNhNTcxN2VjZGEyNzk2ZjA2Y2I4ZDE1YzJmMGU5NTE3MDM0NzlmNg==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2013-11-28T12:09:10Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2013-11-28T12:09:10Z"}, "message": "re PR debug/59323 (Int. comp. error: in add_AT_specification, at dwarf2out.c:4026)\n\n2013-11-28  Richard Biener  <rguenther@suse.de>\n\n\tPR lto/59323\n\t* lto-streamer-out.c (tree_is_indexable): TYPE_DECLs and\n\tCONST_DECLs in function context are not indexable.\n\n\t* gcc.dg/lto/pr59323_0.c: New testcase.\n\nFrom-SVN: r205481", "tree": {"sha": "b98c3c0e604906c0939a5ddd9eb0dda31e53a307", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b98c3c0e604906c0939a5ddd9eb0dda31e53a307"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/53a5717ecda2796f06cb8d15c2f0e951703479f6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53a5717ecda2796f06cb8d15c2f0e951703479f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53a5717ecda2796f06cb8d15c2f0e951703479f6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53a5717ecda2796f06cb8d15c2f0e951703479f6/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cceeb9a978fefd34dd6c3cc0dfc594e9eef1e14a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cceeb9a978fefd34dd6c3cc0dfc594e9eef1e14a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cceeb9a978fefd34dd6c3cc0dfc594e9eef1e14a"}], "stats": {"total": 54, "additions": 52, "deletions": 2}, "files": [{"sha": "49aad278f56246d4aa5a82468599b43c81613665", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53a5717ecda2796f06cb8d15c2f0e951703479f6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53a5717ecda2796f06cb8d15c2f0e951703479f6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=53a5717ecda2796f06cb8d15c2f0e951703479f6", "patch": "@@ -1,3 +1,9 @@\n+2013-11-28  Richard Biener  <rguenther@suse.de>\n+\n+\tPR lto/59323\n+\t* lto-streamer-out.c (tree_is_indexable): TYPE_DECLs and\n+\tCONST_DECLs in function context are not indexable.\n+\n 2013-11-28  Chung-Ju Wu  <jasonwucj@gmail.com>\n \n \t* config/nds32/nds32.c (nds32_rtx_costs): Adjust MULT cost if it is"}, {"sha": "b4b92c72628e584991be1df5fec04e3d21d75705", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53a5717ecda2796f06cb8d15c2f0e951703479f6/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53a5717ecda2796f06cb8d15c2f0e951703479f6/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=53a5717ecda2796f06cb8d15c2f0e951703479f6", "patch": "@@ -135,8 +135,10 @@ tree_is_indexable (tree t)\n      definition.  */\n   if (TREE_CODE (t) == PARM_DECL || TREE_CODE (t) == RESULT_DECL)\n     return variably_modified_type_p (TREE_TYPE (DECL_CONTEXT (t)), NULL_TREE);\n-  else if (TREE_CODE (t) == VAR_DECL && decl_function_context (t)\n-\t   && !TREE_STATIC (t))\n+  else if (((TREE_CODE (t) == VAR_DECL && !TREE_STATIC (t))\n+\t    || TREE_CODE (t) == TYPE_DECL\n+\t    || TREE_CODE (t) == CONST_DECL)\n+\t   && decl_function_context (t))\n     return false;\n   else if (TREE_CODE (t) == DEBUG_EXPR_DECL)\n     return false;"}, {"sha": "c4f749e721254dd25c307f94bc615f1ac167e3c9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53a5717ecda2796f06cb8d15c2f0e951703479f6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53a5717ecda2796f06cb8d15c2f0e951703479f6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=53a5717ecda2796f06cb8d15c2f0e951703479f6", "patch": "@@ -1,3 +1,8 @@\n+2013-11-28  Richard Biener  <rguenther@suse.de>\n+\n+\tPR lto/59323\n+\t* gcc.dg/lto/pr59323_0.c: New testcase.\n+\n 2013-11-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/57393"}, {"sha": "b5910589158a4c219e4f49c8d778156bd2d9c9bb", "filename": "gcc/testsuite/gcc.dg/lto/pr59323_0.c", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53a5717ecda2796f06cb8d15c2f0e951703479f6/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr59323_0.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53a5717ecda2796f06cb8d15c2f0e951703479f6/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr59323_0.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr59323_0.c?ref=53a5717ecda2796f06cb8d15c2f0e951703479f6", "patch": "@@ -0,0 +1,37 @@\n+/* { dg-lto-do link } */\n+/* { dg-lto-options { { -O2 -g -flto } } } */\n+/* { dg-extra-ld-options { -r -nostdlib } } */\n+\n+extern void bar(void);\n+\n+int main(int argc, char **argv)\n+{\n+  int i;\n+\n+  if (argc == 1) {\n+    enum { X };\n+\n+    bar();\n+\n+    {\n+      enum { X };\n+\n+      asm goto (\"\" : : : : lab);\n+lab:\n+      ;\n+    }\n+  }\n+\n+  {\n+    enum { X };\n+\n+    int foo(void)\n+    {\n+      return argv[0][0];\n+    }\n+\n+    i = foo();\n+  }\n+\n+  return i;\n+}"}]}