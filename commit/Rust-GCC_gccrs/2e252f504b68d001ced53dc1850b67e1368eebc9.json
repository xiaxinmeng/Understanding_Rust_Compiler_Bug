{"sha": "2e252f504b68d001ced53dc1850b67e1368eebc9", "node_id": "C_kwDOANBUbNoAKDJlMjUyZjUwNGI2OGQwMDFjZWQ1M2RjMTg1MGI2N2UxMzY4ZWViYzk", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2022-10-14T10:06:56Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2022-10-14T14:27:40Z"}, "message": "Drop -0.0 in frange::set() for !HONOR_SIGNED_ZEROS.\n\nSimilar to what we do for NANs when !HONOR_NANS and Inf when\nflag_finite_math_only, we can remove -0.0 from the range at creation\ntime.\n\nWe were kinda sorta doing this because there is a bug in\nreal_isdenormal that is causing flush_denormals_to_zero to saturate\n[x, -0.0] to [x, +0.0] when !HONOR_SIGNED_ZEROS.  Fixing this bug\n(upcoming), causes us to leave -0.0 in places where we aren't\nexpecting it (the intersection code).\n\ngcc/ChangeLog:\n\n\t* value-range.cc (frange::set): Drop -0.0 for !HONOR_SIGNED_ZEROS.", "tree": {"sha": "62da6252da6282d3b6de8c539be149bf52a53d7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/62da6252da6282d3b6de8c539be149bf52a53d7d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2e252f504b68d001ced53dc1850b67e1368eebc9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e252f504b68d001ced53dc1850b67e1368eebc9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e252f504b68d001ced53dc1850b67e1368eebc9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e252f504b68d001ced53dc1850b67e1368eebc9/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d6a488f243acfac4bdbbb0eefbee3ae916159cf5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6a488f243acfac4bdbbb0eefbee3ae916159cf5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6a488f243acfac4bdbbb0eefbee3ae916159cf5"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "86550f158b890f5007a449335a2c6cc795a7e38b", "filename": "gcc/value-range.cc", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e252f504b68d001ced53dc1850b67e1368eebc9/gcc%2Fvalue-range.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e252f504b68d001ced53dc1850b67e1368eebc9/gcc%2Fvalue-range.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvalue-range.cc?ref=2e252f504b68d001ced53dc1850b67e1368eebc9", "patch": "@@ -324,6 +324,14 @@ frange::set (tree type,\n       m_neg_nan = false;\n     }\n \n+  if (!HONOR_SIGNED_ZEROS (m_type))\n+    {\n+      if (real_iszero (&m_min, 1))\n+\tm_min.sign = 0;\n+      if (real_iszero (&m_max, 1))\n+\tm_max.sign = 0;\n+    }\n+\n   // For -ffinite-math-only we can drop ranges outside the\n   // representable numbers to min/max for the type.\n   if (flag_finite_math_only)"}]}