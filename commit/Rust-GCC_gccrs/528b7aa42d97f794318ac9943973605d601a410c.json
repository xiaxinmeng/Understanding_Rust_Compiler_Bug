{"sha": "528b7aa42d97f794318ac9943973605d601a410c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTI4YjdhYTQyZDk3Zjc5NDMxOGFjOTk0Mzk3MzYwNWQ2MDFhNDEwYw==", "commit": {"author": {"name": "Douglas B Rupp", "email": "rupp@gnat.com", "date": "2010-06-29T19:05:53Z"}, "committer": {"name": "Douglas Rupp", "email": "rupp@gcc.gnu.org", "date": "2010-06-29T19:05:53Z"}, "message": "vmsdbgout.c (vmsdbgout_begin_epilogue): Declare\n\n\t* vmsdbgout.c (vmsdbgout_begin_epilogue): Declare\n\t(vmsdbgout_type_decl): Declare\n\t(vmsdbg_debug_hooks): Add entry for type_decl and begin_epilogue.\n\t(FUNC_EPILOGUE_LABEL): New macro\n\t(vmsdbgout_begin_epilogue): New function.\n\t(vmsdbgout_type_decl): New function.\n\nFrom-SVN: r161553", "tree": {"sha": "b20aa8edbbf74481338f6f7b21d85123f430831b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b20aa8edbbf74481338f6f7b21d85123f430831b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/528b7aa42d97f794318ac9943973605d601a410c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/528b7aa42d97f794318ac9943973605d601a410c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/528b7aa42d97f794318ac9943973605d601a410c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/528b7aa42d97f794318ac9943973605d601a410c/comments", "author": null, "committer": null, "parents": [{"sha": "cb488ce12e611e2f936c48a420c377a558196f8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb488ce12e611e2f936c48a420c377a558196f8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb488ce12e611e2f936c48a420c377a558196f8f"}], "stats": {"total": 59, "additions": 57, "deletions": 2}, "files": [{"sha": "ea4b468f9da7add670c8b2aa89fa61fa84b6fc4c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/528b7aa42d97f794318ac9943973605d601a410c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/528b7aa42d97f794318ac9943973605d601a410c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=528b7aa42d97f794318ac9943973605d601a410c", "patch": "@@ -1,3 +1,12 @@\n+2010-06-29  Douglas B Rupp  <rupp@gnat.com>\n+\n+\t* vmsdbgout.c (vmsdbgout_begin_epilogue): Declare\n+\t(vmsdbgout_type_decl): Declare\n+\t(vmsdbg_debug_hooks): Add entry for type_decl and begin_epilogue.\n+\t(FUNC_EPILOGUE_LABEL): New macro\n+\t(vmsdbgout_begin_epilogue): New function.\n+\t(vmsdbgout_type_decl): New function.\n+\n 2010-06-29  Douglas B Rupp  <rupp@gnat.com>\n \n \t* vmsdbg.h: Update copyright."}, {"sha": "e6968a523aca774418cd8145e87102d3e2377a78", "filename": "gcc/vmsdbgout.c", "status": "modified", "additions": 48, "deletions": 2, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/528b7aa42d97f794318ac9943973605d601a410c/gcc%2Fvmsdbgout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/528b7aa42d97f794318ac9943973605d601a410c/gcc%2Fvmsdbgout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvmsdbgout.c?ref=528b7aa42d97f794318ac9943973605d601a410c", "patch": "@@ -179,10 +179,12 @@ static void vmsdbgout_source_line (unsigned int, const char *, int, bool);\n static void vmsdbgout_begin_prologue (unsigned int, const char *);\n static void vmsdbgout_end_prologue (unsigned int, const char *);\n static void vmsdbgout_end_function (unsigned int);\n+static void vmsdbgout_begin_epilogue (unsigned int, const char *);\n static void vmsdbgout_end_epilogue (unsigned int, const char *);\n static void vmsdbgout_begin_function (tree);\n static void vmsdbgout_decl (tree);\n static void vmsdbgout_global_decl (tree);\n+static void vmsdbgout_type_decl (tree, int);\n static void vmsdbgout_abstract_function (tree);\n \n /* The debug hooks structure.  */\n@@ -201,13 +203,13 @@ const struct gcc_debug_hooks vmsdbg_debug_hooks\n    vmsdbgout_source_line,\n    vmsdbgout_begin_prologue,\n    vmsdbgout_end_prologue,\n-   debug_nothing_int_charstar,  /* begin_epilogue */\n+   vmsdbgout_begin_epilogue,\n    vmsdbgout_end_epilogue,\n    vmsdbgout_begin_function,\n    vmsdbgout_end_function,\n    vmsdbgout_decl,\n    vmsdbgout_global_decl,\n-   debug_nothing_tree_int,\t  /* type_decl */\n+   vmsdbgout_type_decl,\t\t  /* type_decl */\n    debug_nothing_tree_tree_tree_bool, /* imported_module_or_decl */\n    debug_nothing_tree,\t\t  /* deferred_inline_function */\n    vmsdbgout_abstract_function,\n@@ -285,6 +287,9 @@ static char text_end_label[MAX_ARTIFICIAL_LABEL_BYTES];\n #ifndef FUNC_PROLOG_LABEL\n #define FUNC_PROLOG_LABEL\t\"LVFP\"\n #endif\n+#ifndef FUNC_EPILOG_LABEL\n+#define FUNC_EPILOG_LABEL\t\"LVEB\"\n+#endif\n #ifndef FUNC_END_LABEL\n #define FUNC_END_LABEL\t\t\"LVFE\"\n #endif\n@@ -1188,6 +1193,38 @@ vmsdbgout_end_function (unsigned int line)\n     (*dwarf2_debug_hooks.end_function) (line);\n }\n \n+/* Output a marker (i.e. a label) for the beginning of the epilogue.\n+   This gets called *before* the epilogue code has been generated.  */\n+\n+static void\n+vmsdbgout_begin_epilogue (unsigned int line, const char *file)\n+{\n+  char label[MAX_ARTIFICIAL_LABEL_BYTES];\n+  static int save_current_function_funcdef_no = -1;\n+\n+  if (write_symbols == VMS_AND_DWARF2_DEBUG)\n+    (*dwarf2_debug_hooks.begin_epilogue) (line, file);\n+\n+  if (debug_info_level > DINFO_LEVEL_NONE)\n+    {\n+      if (save_current_function_funcdef_no != current_function_funcdef_no)\n+\t{\n+\t  /* Output a label to mark the endpoint of the code generated for this\n+\t     function.  */\n+\t  ASM_GENERATE_INTERNAL_LABEL (label, FUNC_EPILOG_LABEL,\n+\t\t\t\t       current_function_funcdef_no);\n+\n+\t  ASM_OUTPUT_LABEL (asm_out_file, label);\n+\n+\t  save_current_function_funcdef_no = current_function_funcdef_no;\n+\n+\t  /* VMS PCA expects every PC range to correlate to some line and\n+\t     file.  */\n+\t  vmsdbgout_source_line (line, file, 0, true);\n+\t}\n+    }\n+}\n+\n /* Output a marker (i.e. a label) for the absolute end of the generated code\n    for a function definition.  This gets called *after* the epilogue code has\n    been generated.  */\n@@ -1535,6 +1572,15 @@ vmsdbgout_global_decl (tree decl)\n \n /* Not implemented in VMS Debug.  */\n \n+static void\n+vmsdbgout_type_decl (tree decl, int local)\n+{\n+  if (write_symbols == VMS_AND_DWARF2_DEBUG)\n+    (*dwarf2_debug_hooks.type_decl) (decl, local);\n+}\n+\n+/* Not implemented in VMS Debug.  */\n+\n static void\n vmsdbgout_abstract_function (tree decl)\n {"}]}