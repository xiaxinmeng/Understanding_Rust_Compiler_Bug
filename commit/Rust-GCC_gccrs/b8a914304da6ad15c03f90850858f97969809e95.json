{"sha": "b8a914304da6ad15c03f90850858f97969809e95", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjhhOTE0MzA0ZGE2YWQxNWMwM2Y5MDg1MDg1OGY5Nzk2OTgwOWU5NQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-04-26T23:12:11Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-04-26T23:12:11Z"}, "message": "(fold): Signedness matters for comparisons and right shifts.\n\nFrom-SVN: r4243", "tree": {"sha": "c7b18f0e8e7f545675ce7ef8972dd3da7b9a1ac4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c7b18f0e8e7f545675ce7ef8972dd3da7b9a1ac4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b8a914304da6ad15c03f90850858f97969809e95", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8a914304da6ad15c03f90850858f97969809e95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8a914304da6ad15c03f90850858f97969809e95", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8a914304da6ad15c03f90850858f97969809e95/comments", "author": null, "committer": null, "parents": [{"sha": "3975f288c6896a87d5522912bdf29ec744e48e28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3975f288c6896a87d5522912bdf29ec744e48e28", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3975f288c6896a87d5522912bdf29ec744e48e28"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "5845489d2567a4b46eaacc27dc89fa45875f84a4", "filename": "gcc/fold-const.c", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8a914304da6ad15c03f90850858f97969809e95/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8a914304da6ad15c03f90850858f97969809e95/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=b8a914304da6ad15c03f90850858f97969809e95", "patch": "@@ -3040,8 +3040,17 @@ fold (expr)\n \t  if (op == 0)\n \t    continue;\t\t/* Valid for CALL_EXPR, at least.  */\n \n-\t  /* Strip any conversions that don't change the mode.  */\n-\t  STRIP_NOPS (op);\n+\t  if (kind == '<' || code == RSHIFT_EXPR)\n+\t    {\n+\t      /* Signedness matters here.  Perhaps we can refine this\n+\t\t later.  */\n+\t      STRIP_TYPE_NOPS (op);\n+\t    }\n+\t  else\n+\t    {\n+\t      /* Strip any conversions that don't change the mode.  */\n+\t      STRIP_NOPS (op);\n+\t    }\n \t  \n \t  if (TREE_CODE (op) == COMPLEX_CST)\n \t    subop = TREE_REALPART (op);"}]}