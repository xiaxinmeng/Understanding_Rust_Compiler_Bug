{"sha": "5c84a5ca514398f858020c378c5a26f0593eaee3", "node_id": "C_kwDOANBUbNoAKDVjODRhNWNhNTE0Mzk4Zjg1ODAyMGMzNzhjNWEyNmYwNTkzZWFlZTM", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2022-05-26T08:26:39Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-05-26T08:26:39Z"}, "message": "Merge #1281 #1282\n\n1281: Add testcase to prove bug is fixed r=philberty a=philberty\n\nThis bug was fixed in commit cb4d935508def8b250345ba5205a90ad9e177ab4\r\nwith related PR #1223\r\n\r\nThe issue is that associated types get updated depending on the context\r\nthey are used so we need to monomorphize the types when we can so that we\r\ndon't then throw off the rest of type checking with bogus errors like this.\r\n\r\nFixes #1237\n\n1282: Add build badges for marks build-farm r=philberty a=philberty\n\nFixes #1236\r\n\n\nCo-authored-by: Philip Herron <philip.herron@embecosm.com>", "tree": {"sha": "61d18d4d147814d6bc45b0c259e1e9bec332cebf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61d18d4d147814d6bc45b0c259e1e9bec332cebf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5c84a5ca514398f858020c378c5a26f0593eaee3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJijzm/CRBK7hj4Ov3rIwAAipMIAAAHvfHWkWdYAZJeGZ0GiLMV\nWJhQP5kuckFjvRQou7uuVVqujSXC83ycVggDP7jaMiVakTyJWBlIj2ONwlOBlYFr\nLEvC+UGt+ztoaQ3Qh5OwdriwxJckDyBLCeVSAkJAXkNli/6OGhpCnBOyZkNhLrVj\nmA3cKqzFJjHlJAoSeHwT3Ej6qrlUZIUxEaHDVnJVehSKrkVtjQH/FlVH8NWR78ue\nwRZjlYIOAOtQ8c3iXig8aEKOk+9nd6fVWtkWoI/2EFFQIeFEk/L3KBUTjQg9bOV9\ncAjpayY95uuRO7Xf6fXimZ0lZn/O+5HZsM9eXBJxeJldUbKEoCHXHhuGpPYVVuY=\n=8b7g\n-----END PGP SIGNATURE-----\n", "payload": "tree 61d18d4d147814d6bc45b0c259e1e9bec332cebf\nparent d5c1531cc41ea7fab4d522dafe3ff725a766fb49\nparent 3a95f28788d6a7b1870f6247c5fa1e5af1ff8a61\nparent 56634945fb275bd2b992db473f8d9cd2670a5ed5\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1653553599 +0000\ncommitter GitHub <noreply@github.com> 1653553599 +0000\n\nMerge #1281 #1282\n\n1281: Add testcase to prove bug is fixed r=philberty a=philberty\n\nThis bug was fixed in commit cb4d935508def8b250345ba5205a90ad9e177ab4\r\nwith related PR #1223\r\n\r\nThe issue is that associated types get updated depending on the context\r\nthey are used so we need to monomorphize the types when we can so that we\r\ndon't then throw off the rest of type checking with bogus errors like this.\r\n\r\nFixes #1237\n\n1282: Add build badges for marks build-farm r=philberty a=philberty\n\nFixes #1236\r\n\n\nCo-authored-by: Philip Herron <philip.herron@embecosm.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c84a5ca514398f858020c378c5a26f0593eaee3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c84a5ca514398f858020c378c5a26f0593eaee3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c84a5ca514398f858020c378c5a26f0593eaee3/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d5c1531cc41ea7fab4d522dafe3ff725a766fb49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5c1531cc41ea7fab4d522dafe3ff725a766fb49", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5c1531cc41ea7fab4d522dafe3ff725a766fb49"}, {"sha": "3a95f28788d6a7b1870f6247c5fa1e5af1ff8a61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a95f28788d6a7b1870f6247c5fa1e5af1ff8a61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a95f28788d6a7b1870f6247c5fa1e5af1ff8a61"}, {"sha": "56634945fb275bd2b992db473f8d9cd2670a5ed5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56634945fb275bd2b992db473f8d9cd2670a5ed5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/56634945fb275bd2b992db473f8d9cd2670a5ed5"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "23989bc438a914f1f0955240fa1b52da66d349b8", "filename": "README.md", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c84a5ca514398f858020c378c5a26f0593eaee3/README.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c84a5ca514398f858020c378c5a26f0593eaee3/README.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/README.md?ref=5c84a5ca514398f858020c378c5a26f0593eaee3", "patch": "@@ -18,6 +18,15 @@ Now that the language is stable, it is an excellent time to create alternative c\n the project are keen \u201cRustaceans\u201d with a desire to give back to the Rust community and to learn what GCC is capable\n of when it comes to a modern language.\n \n+## Build Farm Status\n+\n+- [Fedora X86_64](https://builder.sourceware.org/buildbot/#/builders/gccrust-fedora-x86_64) [![Fedora X86-64](https://builder.sourceware.org/buildbot/badges/gccrust-fedora-x86_64.svg)](https://builder.sourceware.org/buildbot/#/builders/gccrust-fedora-x86_64)\n+- [Debian i386](https://builder.sourceware.org/buildbot/#/builders/gccrust-debian-i386) [![Fedora X86-64](https://builder.sourceware.org/buildbot/badges/gccrust-debian-i386.svg)](https://builder.sourceware.org/buildbot/#/builders/gccrust-debian-i386)\n+- [Fedora s390x](https://builder.sourceware.org/buildbot/#/builders/gccrust-fedora-s390x) [![Fedora X86-64](https://builder.sourceware.org/buildbot/badges/gccrust-fedora-s390x.svg)](https://builder.sourceware.org/buildbot/#/builders/gccrust-fedora-s390x)\n+- [Debian ppc64](https://builder.sourceware.org/buildbot/#/builders/gccrust-debian-ppc64) [![Fedora X86-64](https://builder.sourceware.org/buildbot/badges/gccrust-debian-ppc64.svg)](https://builder.sourceware.org/buildbot/#/builders/gccrust-debian-ppc64)\n+- [Fedora ppc64le](https://builder.sourceware.org/buildbot/#/builders/gccrust-fedora-ppc64le) [![Fedora\n+X86-64](https://builder.sourceware.org/buildbot/badges/gccrust-fedora-ppc64le.svg)](https://builder.sourceware.org/buildbot/#/builders/gccrust-fedora-ppc64le)\n+\n ## FAQ\n \n Please find the answers to frequently asked questions over on: https://github.com/Rust-GCC/gccrs/wiki/Frequently-Asked-Questions"}, {"sha": "542be89794982a55617a28aa47fa181ee8452bf7", "filename": "gcc/testsuite/rust/compile/issue-1237.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c84a5ca514398f858020c378c5a26f0593eaee3/gcc%2Ftestsuite%2Frust%2Fcompile%2Fissue-1237.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c84a5ca514398f858020c378c5a26f0593eaee3/gcc%2Ftestsuite%2Frust%2Fcompile%2Fissue-1237.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fcompile%2Fissue-1237.rs?ref=5c84a5ca514398f858020c378c5a26f0593eaee3", "patch": "@@ -0,0 +1,23 @@\n+// { dg-additional-options \"-w\" }\n+mod intrinsics {\n+    extern \"rust-intrinsic\" {\n+        pub fn offset<T>(ptr: *const T, count: isize) -> *const T;\n+    }\n+}\n+\n+impl<T> *const T {\n+    pub unsafe fn offset(self, count: isize) -> *const T {\n+        unsafe { intrinsics::offset(self, count) }\n+    }\n+}\n+\n+impl<T> [T] {\n+    pub unsafe fn get_unchecked(&self, index: usize) -> &T {\n+        unsafe { &*(self as *const [T] as *const T).offset(index as isize) }\n+    }\n+}\n+\n+#[inline]\n+unsafe fn u8to64_le(buf: &[u8], start: usize, len: usize) -> u64 {\n+    (unsafe { *buf.get_unchecked(start) } as u64)\n+}"}]}