{"sha": "b9f065bedac5d0493ca2e8a24d081a6e594cb497", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjlmMDY1YmVkYWM1ZDA0OTNjYTJlOGEyNGQwODFhNmU1OTRjYjQ5Nw==", "commit": {"author": {"name": "Jerry Quinn", "email": "jlquinn@optonline.net", "date": "2004-05-27T20:32:20Z"}, "committer": {"name": "Jerry Quinn", "email": "jlquinn@gcc.gnu.org", "date": "2004-05-27T20:32:20Z"}, "message": "SimpleTimeZone.java: Reverting my last change until I can fix it properly.\n\n2004-05-27  Jerry Quinn  <jlquinn@optonline.net>\n\n\t* java/util/SimpleTimeZone.java: Reverting my last change until I\n\tcan fix it properly.\n\nFrom-SVN: r82340", "tree": {"sha": "31fecbc448955d4fbddb47bab34aa04f2b3f14dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/31fecbc448955d4fbddb47bab34aa04f2b3f14dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b9f065bedac5d0493ca2e8a24d081a6e594cb497", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9f065bedac5d0493ca2e8a24d081a6e594cb497", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9f065bedac5d0493ca2e8a24d081a6e594cb497", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9f065bedac5d0493ca2e8a24d081a6e594cb497/comments", "author": {"login": "jlquinn", "id": 826841, "node_id": "MDQ6VXNlcjgyNjg0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/826841?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlquinn", "html_url": "https://github.com/jlquinn", "followers_url": "https://api.github.com/users/jlquinn/followers", "following_url": "https://api.github.com/users/jlquinn/following{/other_user}", "gists_url": "https://api.github.com/users/jlquinn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlquinn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlquinn/subscriptions", "organizations_url": "https://api.github.com/users/jlquinn/orgs", "repos_url": "https://api.github.com/users/jlquinn/repos", "events_url": "https://api.github.com/users/jlquinn/events{/privacy}", "received_events_url": "https://api.github.com/users/jlquinn/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "13f05fd0df4108bbc4de0c6f40d949c975122ea5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13f05fd0df4108bbc4de0c6f40d949c975122ea5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13f05fd0df4108bbc4de0c6f40d949c975122ea5"}], "stats": {"total": 59, "additions": 23, "deletions": 36}, "files": [{"sha": "a4124d49e0a3fa76d69085a74859365e0e3028bf", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9f065bedac5d0493ca2e8a24d081a6e594cb497/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9f065bedac5d0493ca2e8a24d081a6e594cb497/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=b9f065bedac5d0493ca2e8a24d081a6e594cb497", "patch": "@@ -1,3 +1,8 @@\n+2004-05-27  Jerry Quinn  <jlquinn@optonline.net>\n+\n+\t* java/util/SimpleTimeZone.java: Reverting my last change until I\n+\tcan fix it properly.\n+\n 2004-05-27  Michael Koch  <konqueror@gmx.de>\n \n \t* javax/swing/JPopupMenu.java"}, {"sha": "71f92e88f34a81b80d0370723d441ef85175f936", "filename": "libjava/java/util/SimpleTimeZone.java", "status": "modified", "additions": 18, "deletions": 36, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9f065bedac5d0493ca2e8a24d081a6e594cb497/libjava%2Fjava%2Futil%2FSimpleTimeZone.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9f065bedac5d0493ca2e8a24d081a6e594cb497/libjava%2Fjava%2Futil%2FSimpleTimeZone.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Futil%2FSimpleTimeZone.java?ref=b9f065bedac5d0493ca2e8a24d081a6e594cb497", "patch": "@@ -234,7 +234,7 @@ public class SimpleTimeZone extends TimeZone\n    * @serial\n    * @since JDK1.1.4 \n    */\n-  private int serialVersionOnStream = 2;\n+  private int serialVersionOnStream = 1;\n \n   private static final long serialVersionUID = -403250971215465050L;\n \n@@ -477,7 +477,9 @@ public void setStartRule(int month, int day, int dayOfWeek, int time)\n   {\n     this.startMode = checkRule(month, day, dayOfWeek);\n     this.startMonth = month;\n-    this.startDay = day;\n+    // FIXME: XXX: JDK 1.2 allows negative values and has 2 new variations\n+    // of this method.\n+    this.startDay = Math.abs(day);\n     this.startDayOfWeek = Math.abs(dayOfWeek);\n     if (this.startTimeMode == WALL_TIME || this.startTimeMode == STANDARD_TIME)\n       this.startTime = time;\n@@ -568,7 +570,9 @@ public void setEndRule(int month, int day, int dayOfWeek, int time)\n   {\n     this.endMode = checkRule(month, day, dayOfWeek);\n     this.endMonth = month;\n-    this.endDay = day;\n+    // FIXME: XXX: JDK 1.2 allows negative values and has 2 new variations\n+    // of this method.\n+    this.endDay = Math.abs(day);\n     this.endDayOfWeek = Math.abs(dayOfWeek);\n     if (this.endTimeMode == WALL_TIME)\n       this.endTime = time;\n@@ -656,33 +660,21 @@ public void setEndRule(int month, int day, int time)\n    * <code>offset = cal.get(Calendar.ZONE_OFFSET)\n    * + cal.get(Calendar.DST_OFFSET);</code>\n    *\n-   * This version doesn't suffer this inaccuracy.\n+   * You could also use in\n    *\n-   * The arguments don't follow the approach for setting start and end rules.\n-   * The day must be a positive number and dayOfWeek must be a positive value\n-   * from Calendar.  dayOfWeek is redundant, but must match the other values\n-   * or an inaccurate result may be returned.\n+   * This version doesn't suffer this inaccuracy.\n    *\n    * @param era the era of the given date\n    * @param year the year of the given date\n    * @param month the month of the given date, 0 for January.\n    * @param day the day of month\n-   * @param dayOfWeek the day of week; this must match the other fields.\n+   * @param dayOfWeek the day of week; this must be matching the\n+   * other fields.\n    * @param millis the millis in the day (in local standard time)\n-   * @return the time zone offset in milliseconds.\n-   * @throws IllegalArgumentException if arguments are incorrect.\n-   */\n+   * @return the time zone offset in milliseconds.  */\n   public int getOffset(int era, int year, int month,\n \t\t       int day, int dayOfWeek, int millis)\n   {\n-    int daysInMonth = getDaysInMonth(month, 1);\n-    if (day < 1 || day > daysInMonth)\n-      throw new IllegalArgumentException(\"day out of range\");\n-    if (dayOfWeek < Calendar.SUNDAY || dayOfWeek > Calendar.SATURDAY)\n-      throw new IllegalArgumentException(\"dayOfWeek out of range\");\n-    if (month < Calendar.JANUARY || month > Calendar.DECEMBER)\n-      throw new IllegalArgumentException(\"month out of range\");\n-\n     // This method is called by Calendar, so we mustn't use that class.\n     int daylightSavings = 0;\n     if (useDaylight && era == GregorianCalendar.AD && year >= startYear)\n@@ -793,7 +785,7 @@ else if (month < Calendar.AUGUST)\n   /**\n    * Checks if the date given in calXXXX, is before the change between\n    * dst and standard time.\n-   * @param calYear the year of the date to check (for leap day checking).\n+   * @param calYear the year of the date to check (for leap day cheking).\n    * @param calMonth the month of the date to check.\n    * @param calDay the day of month of the date to check.\n    * @param calDayOfWeek the day of week of the date to check.\n@@ -878,7 +870,7 @@ private boolean isBefore(int calYear,\n       case DOW_LE_DOM_MODE:\n \t// The greatest sunday before or equal December, 12\n \t// is the same as smallest sunday after or equal December, 6.\n-\tday = Math.abs(day) - 6;\n+\tday -= 6;\n \n       case DOW_GE_DOM_MODE:\n \n@@ -939,12 +931,10 @@ public synchronized boolean equals(Object o)\n \t    && startDay == zone.startDay\n \t    && startDayOfWeek == zone.startDayOfWeek\n \t    && startTime == zone.startTime\n-\t    && startTimeMode == zone.startTimeMode\n \t    && endMonth == zone.endMonth\n \t    && endDay == zone.endDay\n \t    && endDayOfWeek == zone.endDayOfWeek\n-\t    && endTime == zone.endTime\n-\t    && endTimeMode == zone.endTimeMode);\n+\t    && endTime == zone.endTime);\n   }\n \n   /**\n@@ -972,12 +962,9 @@ public boolean hasSameRules(TimeZone other)\n \t    && startDay == zone.startDay\n \t    && startDayOfWeek == zone.startDayOfWeek\n \t    && startTime == zone.startTime\n-\t    && startTimeMode == zone.startTimeMode\n \t    && endMonth == zone.endMonth\n \t    && endDay == zone.endDay\n-\t    && endDayOfWeek == zone.endDayOfWeek\n-\t    && endTime == zone.endTime\n-\t    && endTimeMode == zone.endTimeMode);\n+\t    && endDayOfWeek == zone.endDayOfWeek && endTime == zone.endTime);\n   }\n \n   /**\n@@ -1000,14 +987,11 @@ public String toString()\n \t + \",startDay=\" + startDay\n \t + \",startDayOfWeek=\" + startDayOfWeek\n \t + \",startTime=\" + startTime\n-\t + \",startTimeMode=\" + startTimeMode\n \t + \",endMode=\" + endMode\n \t + \",endMonth=\" + endMonth\n \t + \",endDay=\" + endDay\n \t + \",endDayOfWeek=\" + endDayOfWeek\n-\t + \",endTime=\" + endTime\n-\t + \",endTimeMode=\" + endTimeMode\n-\t : \"\") + \"]\";\n+\t + \",endTime=\" + endTime : \"\") + \"]\";\n   }\n \n   /**\n@@ -1024,9 +1008,7 @@ private void readObject(java.io.ObjectInputStream input)\n \tdstSavings = 60 * 60 * 1000;\n \tendMode = DOW_IN_MONTH_MODE;\n \tstartMode = DOW_IN_MONTH_MODE;\n-\tstartTimeMode = WALL_TIME;\n-\tendTimeMode = WALL_TIME;\n-\tserialVersionOnStream = 2;\n+\tserialVersionOnStream = 1;\n       }\n     else\n       {"}]}