{"sha": "ff86345f836c265d6bbb8d1bee5417e6f4c32ac9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmY4NjM0NWY4MzZjMjY1ZDZiYmI4ZDFiZWU1NDE3ZTZmNGMzMmFjOQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2016-02-01T15:40:23Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2016-02-01T15:40:23Z"}, "message": "re PR tree-optimization/69556 (forwprop4/match.pd undoing work from recip)\n\n2016-02-01  Richard Biener  <rguenther@suse.de>\n\n\tPR middle-end/69556\n\t* match.pd: Guard (C1/X)*C2 -> (C1*C2)/X with single_use.\n\n\t* gcc.dg/tree-ssa/recip-8.c: New testcase.\n\nFrom-SVN: r233040", "tree": {"sha": "34d167906d80905ebb683f3569c2ebae20298c70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/34d167906d80905ebb683f3569c2ebae20298c70"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bc369dbd3f4a3290bc6e6e42892e47a90dc34f4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc369dbd3f4a3290bc6e6e42892e47a90dc34f4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc369dbd3f4a3290bc6e6e42892e47a90dc34f4f"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "e17d3c54fb81143cff0d05d27ab1cd309f67d51d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ff86345f836c265d6bbb8d1bee5417e6f4c32ac9", "patch": "@@ -1,3 +1,8 @@\n+2016-02-01  Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/69556\n+\t* match.pd: Guard (C1/X)*C2 -> (C1*C2)/X with single_use.\n+\n 2016-02-01  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/69574"}, {"sha": "491f769c1ddb44aaa2605248a26329df6b9f4b09", "filename": "gcc/match.pd", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9/gcc%2Fmatch.pd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9/gcc%2Fmatch.pd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmatch.pd?ref=ff86345f836c265d6bbb8d1bee5417e6f4c32ac9", "patch": "@@ -445,8 +445,9 @@ DEFINE_INT_AND_FLOAT_ROUND_FN (RINT)\n \n /* Fold (C1/X)*C2 into (C1*C2)/X.  */\n (simplify\n- (mult (rdiv:s REAL_CST@0 @1) REAL_CST@2)\n-  (if (flag_associative_math)\n+ (mult (rdiv@3 REAL_CST@0 @1) REAL_CST@2)\n+  (if (flag_associative_math\n+       && single_use (@3))\n    (with\n     { tree tem = const_binop (MULT_EXPR, type, @0, @2); }\n     (if (tem)"}, {"sha": "bfd6e9f6ce47ab92caa40bf0925019208cf8b229", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ff86345f836c265d6bbb8d1bee5417e6f4c32ac9", "patch": "@@ -1,3 +1,8 @@\n+2016-02-01  Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/69556\n+\t* gcc.dg/tree-ssa/recip-8.c: New testcase.\n+\n 2016-02-01  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/69574"}, {"sha": "f8aecc127c1a3b66fd5dc5f5e69858d69bfc5600", "filename": "gcc/testsuite/gcc.dg/tree-ssa/recip-8.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Frecip-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff86345f836c265d6bbb8d1bee5417e6f4c32ac9/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Frecip-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Frecip-8.c?ref=ff86345f836c265d6bbb8d1bee5417e6f4c32ac9", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -ffast-math -fdump-tree-optimized\" } */\n+\n+double bar (double, double, double, double, double);\n+\n+double\n+foo (double a)\n+{\n+  return bar (1.0/a, 2.0/a, 4.0/a, 8.0/a, 16.0/a);\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"/\" 1 \"optimized\"  } } */"}]}