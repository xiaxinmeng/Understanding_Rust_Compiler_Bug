{"sha": "152ef731950c9b35e6bab40b30d60027bb996254", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTUyZWY3MzE5NTBjOWIzNWU2YmFiNDBiMzBkNjAwMjdiYjk5NjI1NA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-06-28T22:30:04Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-06-28T22:30:04Z"}, "message": "re PR c/71685 (Segmentation fault in gcc when compiling the attached file.)\n\n\tPR c/71685\n\t* c-typeck.c (c_build_qualified_type): Don't clear\n\tC_TYPE_INCOMPLETE_VARS for the main variant.\n\n\t* gcc.dg/pr71685.c: New test.\n\nFrom-SVN: r237830", "tree": {"sha": "9ddf6cd1a227be492c1b734b48f3406bb3928f71", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9ddf6cd1a227be492c1b734b48f3406bb3928f71"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/152ef731950c9b35e6bab40b30d60027bb996254", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/152ef731950c9b35e6bab40b30d60027bb996254", "html_url": "https://github.com/Rust-GCC/gccrs/commit/152ef731950c9b35e6bab40b30d60027bb996254", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/152ef731950c9b35e6bab40b30d60027bb996254/comments", "author": null, "committer": null, "parents": [{"sha": "4378d117ec35f58d5a552eafcb91c91550e6566e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4378d117ec35f58d5a552eafcb91c91550e6566e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4378d117ec35f58d5a552eafcb91c91550e6566e"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "df73934ca94a962a18f1ba8dc35f7a5781fca5e2", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/152ef731950c9b35e6bab40b30d60027bb996254/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/152ef731950c9b35e6bab40b30d60027bb996254/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=152ef731950c9b35e6bab40b30d60027bb996254", "patch": "@@ -1,4 +1,10 @@\n-2016-06-28 Martin Sebor  <msebor@redhat.com>\n+2016-06-29  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/71685\n+\t* c-typeck.c (c_build_qualified_type): Don't clear\n+\tC_TYPE_INCOMPLETE_VARS for the main variant.\n+\n+2016-06-28  Martin Sebor  <msebor@redhat.com>\n \n \tPR c/71552\n \t* c-typeck.c (output_init_element): Diagnose incompatible types"}, {"sha": "56268fcc843dc031ccdd880285ad12e8171d45ba", "filename": "gcc/c/c-typeck.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/152ef731950c9b35e6bab40b30d60027bb996254/gcc%2Fc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/152ef731950c9b35e6bab40b30d60027bb996254/gcc%2Fc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-typeck.c?ref=152ef731950c9b35e6bab40b30d60027bb996254", "patch": "@@ -13676,7 +13676,8 @@ c_build_qualified_type (tree type, int type_quals, tree orig_qual_type,\n \t\t   : build_qualified_type (type, type_quals));\n   /* A variant type does not inherit the list of incomplete vars from the\n      type main variant.  */\n-  if (RECORD_OR_UNION_TYPE_P (var_type))\n+  if (RECORD_OR_UNION_TYPE_P (var_type)\n+      && TYPE_MAIN_VARIANT (var_type) != var_type)\n     C_TYPE_INCOMPLETE_VARS (var_type) = 0;\n   return var_type;\n }"}, {"sha": "171e616d04523cd10dbdb6c806309b36c9c64107", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/152ef731950c9b35e6bab40b30d60027bb996254/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/152ef731950c9b35e6bab40b30d60027bb996254/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=152ef731950c9b35e6bab40b30d60027bb996254", "patch": "@@ -1,4 +1,9 @@\n-2016-06-28 Martin Sebor  <msebor@redhat.com>\n+2016-06-29  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/71685\n+\t* gcc.dg/pr71685.c: New test.\n+\n+2016-06-28  Martin Sebor  <msebor@redhat.com>\n \n \tPR c/71552\n \t* gcc.dg/init-bad-9.c: New test."}, {"sha": "80e5c8f5902adc647e770277dee6d2bba31235d7", "filename": "gcc/testsuite/gcc.dg/pr71685.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/152ef731950c9b35e6bab40b30d60027bb996254/gcc%2Ftestsuite%2Fgcc.dg%2Fpr71685.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/152ef731950c9b35e6bab40b30d60027bb996254/gcc%2Ftestsuite%2Fgcc.dg%2Fpr71685.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr71685.c?ref=152ef731950c9b35e6bab40b30d60027bb996254", "patch": "@@ -0,0 +1,6 @@\n+/* PR c/71685 */\n+/* { dg-do compile } */\n+/* { dg-options \"-std=gnu11\" } */\n+\n+extern struct S v, s;\n+struct S { int t; int p[]; } v = { 4, 0 };"}]}