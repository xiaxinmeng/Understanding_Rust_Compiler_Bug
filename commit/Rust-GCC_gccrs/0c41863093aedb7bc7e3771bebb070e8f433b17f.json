{"sha": "0c41863093aedb7bc7e3771bebb070e8f433b17f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGM0MTg2MzA5M2FlZGI3YmM3ZTM3NzFiZWJiMDcwZThmNDMzYjE3Zg==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2017-06-27T07:16:29Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2017-06-27T07:16:29Z"}, "message": "re PR bootstrap/81216 (bootstrap failed on i386 and powerpc64le)\n\n\tPR bootstrap/81216\n\t* parser.c (cp_parser_already_scoped_statement): Initialize\n\tLOC_AFTER_LABELS.\n\n\t* g++.dg/warn/Wmultistatement-macros-1.C: New test.\n\nFrom-SVN: r249676", "tree": {"sha": "5104d5c854a3bb1c46702edb8128408c1cc1a2bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5104d5c854a3bb1c46702edb8128408c1cc1a2bc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c41863093aedb7bc7e3771bebb070e8f433b17f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c41863093aedb7bc7e3771bebb070e8f433b17f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c41863093aedb7bc7e3771bebb070e8f433b17f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c41863093aedb7bc7e3771bebb070e8f433b17f/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d25c0cc1a537adf0dbbacad88f2f4dc20e9edd26", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d25c0cc1a537adf0dbbacad88f2f4dc20e9edd26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d25c0cc1a537adf0dbbacad88f2f4dc20e9edd26"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "53aadf4ac44cc78c1396cab230722b30bebecc08", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c41863093aedb7bc7e3771bebb070e8f433b17f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c41863093aedb7bc7e3771bebb070e8f433b17f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=0c41863093aedb7bc7e3771bebb070e8f433b17f", "patch": "@@ -1,3 +1,9 @@\n+2017-06-27  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR bootstrap/81216\n+\t* parser.c (cp_parser_already_scoped_statement): Initialize\n+\tLOC_AFTER_LABELS.\n+\n 2017-06-26  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/81215 - deduction failure with variadic TTP."}, {"sha": "573b97a658f57075c499977cb4dda725c06e20d2", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c41863093aedb7bc7e3771bebb070e8f433b17f/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c41863093aedb7bc7e3771bebb070e8f433b17f/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=0c41863093aedb7bc7e3771bebb070e8f433b17f", "patch": "@@ -12438,15 +12438,16 @@ cp_parser_already_scoped_statement (cp_parser* parser, bool *if_p,\n     {\n       token_indent_info body_tinfo\n \t= get_token_indent_info (cp_lexer_peek_token (parser->lexer));\n-      location_t loc_after_labels;\n+      location_t loc_after_labels = UNKNOWN_LOCATION;\n \n       cp_parser_statement (parser, NULL_TREE, false, if_p, NULL,\n \t\t\t   &loc_after_labels);\n       token_indent_info next_tinfo\n \t= get_token_indent_info (cp_lexer_peek_token (parser->lexer));\n       warn_for_misleading_indentation (guard_tinfo, body_tinfo, next_tinfo);\n \n-      if (next_tinfo.type != CPP_SEMICOLON)\n+      if (loc_after_labels != UNKNOWN_LOCATION\n+\t  && next_tinfo.type != CPP_SEMICOLON)\n \twarn_for_multistatement_macros (loc_after_labels, next_tinfo.location,\n \t\t\t\t\tguard_tinfo.location,\n \t\t\t\t\tguard_tinfo.keyword);"}, {"sha": "38e5c7a94348c0c695f2c17770dee0874cbbbbf8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c41863093aedb7bc7e3771bebb070e8f433b17f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c41863093aedb7bc7e3771bebb070e8f433b17f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0c41863093aedb7bc7e3771bebb070e8f433b17f", "patch": "@@ -1,3 +1,8 @@\n+2017-06-27  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR bootstrap/81216\n+\t* g++.dg/warn/Wmultistatement-macros-1.C: New test.\n+\n 2017-06-26  Martin Sebor  <msebor@redhat.com>\n \n \tPR c++/81169"}, {"sha": "afaef9ad42940eb5f8bdf0c446ebc59b78d1dda4", "filename": "gcc/testsuite/g++.dg/warn/Wmultistatement-macros-1.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c41863093aedb7bc7e3771bebb070e8f433b17f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWmultistatement-macros-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c41863093aedb7bc7e3771bebb070e8f433b17f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWmultistatement-macros-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWmultistatement-macros-1.C?ref=0c41863093aedb7bc7e3771bebb070e8f433b17f", "patch": "@@ -0,0 +1,13 @@\n+// PR bootstrap/81216\n+// { dg-options \"-Wmultistatement-macros\" }\n+// { dg-do compile }\n+\n+template <typename A, typename B>\n+static bool\n+equal (A a, A b, B c)\n+{\n+  for (; a != b; ++a, (void)++c)\n+    if (!(*a == *c))\n+      return false;\n+  return true;\n+}"}]}