{"sha": "f8b2ac1ece6a3f082b68d854059648e2a6cb3e43", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjhiMmFjMWVjZTZhM2YwODJiNjhkODU0MDU5NjQ4ZTJhNmNiM2U0Mw==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-03-22T21:47:59Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-03-22T21:47:59Z"}, "message": "Merge in texinfo-3.11.\n\nFrom-SVN: r18767", "tree": {"sha": "87e2b2b74f7d097a6b65a3f5d90b032f669ab723", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/87e2b2b74f7d097a6b65a3f5d90b032f669ab723"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/comments", "author": null, "committer": null, "parents": [{"sha": "8491377bd19a528b1249b3a6ad67277d813720fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8491377bd19a528b1249b3a6ad67277d813720fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8491377bd19a528b1249b3a6ad67277d813720fc"}], "stats": {"total": 11082, "additions": 7413, "deletions": 3669}, "files": [{"sha": "453750c49e43bb91cb179b6af437cf96a918455a", "filename": "texinfo/ChangeLog", "status": "modified", "additions": 890, "deletions": 82, "changes": 972, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/texinfo%2FChangeLog?ref=f8b2ac1ece6a3f082b68d854059648e2a6cb3e43", "patch": "@@ -1,131 +1,939 @@\n-Tue Mar 17 10:33:28 1998  Manfred Hollstein  <manfred@s-direktnet.de>\n+Mon Feb  2 17:17:17 1998  Jason Molenda  (crash@bugshack.cygnus.com)\n \n-\t* Makefile.in (clean, distclean): Add 'info' explicitly.\n+\t* info/termdep.h (TIOCGETC): Don't define if we have termios.h.\n+        From Robert Lipe.\n \n-Tue Mar  3 10:05:46 1998  Jeffrey A Law  (law@cygnus.com)\n+Tue Oct  7 11:14:04 1997  Michael Meissner  <meissner@cygnus.com>\n \n-\t* makeinfo/makeinfo.c (CommandTable): Fix braces in initializer.\n+\t* info/tilde.c (alloca): Don't redefine alloca as __builtin_alloca\n+\tif alloca was already defined.\n \n-Tue Jan 13 21:34:23 1998  H.J. Lu  (hjl@gnu.org)\n+Mon Oct  6 12:46:27 1997  Ian Lance Taylor  <ian@cygnus.com>\n \n-\t* libtxi/Makefile.in (AR_FLAGS): Defined as \"rc\".\n+\t* util/Makefile.am (bin_PROGRAMS): Remove install-info.\n+\t(noinst_PROGRAMS, install_inf_SOURCES): Define.\n+\t(install-exec-local): New target.\n+\t* util/Makefile.in: Rebuild.\n+\t* info/Makefile.in: Rebuild with current automake.\n \n-Tue Dec  2 20:24:40 1997  Bruno Haible  <haible@ilog.fr>\n+Wed Sep  3 12:44:18 1997  Ian Lance Taylor  <ian@cygnus.com>\n \n-\t* makeinfo/makeinfo.c (find_and_load, convert_from_stream):\n-\tZero-terminate the file contents.\n+\t* po/Makefile.in.in: More --enable-maintainer-mode changes.\n \n-Fri Oct 31 09:39:31 1997  Jeffrey A Law  (law@cygnus.com)\n+Thu Aug 28 23:52:29 1997  Ian Lance Taylor  <ian@cygnus.com>\n \n-\t* Makefile.in (install targets): Add a dummy target for sunos make.\n-\t(SUBDIR): Remove 'info'.  It's unneeded.\n+\t* po/Makefile.in.in: Make automatic dependencies only run programs\n+\tif --enable-maintainer-mode.\n \n-Wed Oct 29 22:56:46 1997 Robert Lipe  (robertl@dgii.com)\n+Mon Aug 25 16:50:32 1997  Ian Lance Taylor  <ian@cygnus.com>\n \n-\t* info/termdep.h: If POSIX, #undef TIOCGETC for benefit of systems\n-\tthat provide TIOCETC but not struct tchars.\n+\t* configure.in: Add AM_MAINTAINER_MODE and AM_EXEEXT.\n+\t* Makefile.in, */Makefile.in: Rebuild with automake --cygnus.\n+\t* configure: Rebuild with current autoconf.\n \n-Wed Oct 15 09:49:57 1997  Richard Henderson  <rth@cygnus.com>\n+Wed Feb 12 11:15:16 1997  Michael Meissner  <meissner@cygnus.com>\n+\n+\t* util/texindex.c (main): Make main an int function, not void.\n+\n+Sat Jun 29 18:56:07 1996  Geoffrey Noer  <noer@cygnus.com>\n+\n+\t* configure.in: if ac_cv_c_cross is yes, don't run the\n+\tAC_FUNC_SETVBUF_REVERSED call since it tries to do a run\n+\ttest.  This allows texinfo to build for cygwin32 Canadian\n+\tcrosses/natives\n+\t* configure: regenerate\n+\n+Thu Jul 31 11:57:46 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t*  Version 3.11.\n+\n+\t* info/man.c (reap_children): Declare status as int, not unsigned,\n+\t\tsince that's what POSIX says the arg to wait should be.\n+\n+\t* makeinfo/makeinfo.c (cm_uref, cm_email): Rewrite to do macro\n+ \t\texpansion in the arguments.\n+\n+\t* makeinfo/makeinfo.c (main): setlocale LC_MESSAGES and LC_TIME,\n+\t\tinstead of LC_ALL.\n+\tFrom: Akim Demaille <demaille@inf.enst.fr>.\n+\n+\t* makeinfo/makeinfo.c (cm_today): Let the %d %s %d be translated,\n+\t\tso other languages can change the order of day/month/year.\n+\tFrom: Akim Demaille <demaille@inf.enst.fr>.\n+\n+\t* info/infomap.c: Doc fix.\n+\n+\t* lib/system.h [!O_RDONLY]: Prefer <fcntl.h> to <sys/fcntl.h>.\n+\n+\t* configure.in (AC_CHECK_HEADERS): Check for fcntl.h.\n+\n+\t* doc/Makefile.am (install-data-local): Suggest tex/generic/dvips\n+\t\tfor epsf.tex.\n+\tFrom: Tim Mooney <mooney@dogbert.cc.ndsu.NoDak.edu>.\n+\n+\t* configure.in (TEXMF): Move check to block with other program\n+ \t\tchecks.\n+\n+Wed Jul 30 11:20:37 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (defun_internal): Allow extra text after\n+\t\tmost @def... commands, for tzname[2] in libc.texinfo.\n+\n+\t* info/info.c: Include indices.h.\n+\t* configure.in (AC_CHECK_HEADERS): Test for sys/wait.h, info/man.c\n+ \t\tuses it.\n+\tFrom: Erick Branderhorst <Erick.Branderhorst@asml.nl>.\n+\n+Tue Jul 29 15:55:19 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* configure.in: Version 3.9j.\n+\n+\t* info/terminal.c (output_character_function): Return int (the\n+ \t\targ), not void.\n+\n+\t* info/infomap.c: Don't define term_kP as 'v', since that's undefined.\n+\tFrom: Tom Hageman <tom@basil.icce.rug.nl>.\n+\n+\t* makeinfo/makeinfo.c: Parameterize some messages to avoid\n+ \t\tduplicate translations.\n+\n+\t* info/terminal.c: Only try to declare ospeed, PC, tputs, etc. if\n+\t\twe don't have <ncurses.h/termcap.h> or <termcap.h>.\n+\n+\t* makeinfo/makeinfo.c (cm_email): New function, like cm_uref.\n+\n+Sun Jul 27 17:09:20 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* configure.in: Only check for <ncurses/termcap.h> if we're using\n+\t\t-lncurses.\n+\tFrom: Bo Johansson <bo.johansson@mbox2.swipnet.se>.\n+\n+\t* info/dir.c (new_dir_file_p): Avoid automatic struct\n+\t\tinitialization, SunOS 4 etc. cc can't handle it.\n+\tFrom: \"Kaveh R. Ghazi\" <ghazi@caip.rutgers.edu>.\n+\n+Sat Jul 26 15:08:13 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* Version 3.9i.\n+\n+\t* configure.in: Check for termcap.h and ncurses/termcap.h.\n+\tFrom: bo.johansson@mbox2.swipnet.se.\n+\n+Fri Jul 25 14:09:05 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi: Document new second optional arg to email.\n+\n+\t* info/infodoc.c: Document CTRL-x 0 as the way to get out of help.\n+\n+\t* info/dir.c (maybe_build_dir_node): Really check for the same dir\n+\t\tfile twice, not just by name.\n+\t(new_dir_file_p): New function.\n+\n+\t* util/install-info.c: Tell them about --help in doc strings.\n+\n+Thu Jul 24 14:25:44 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* util/texindex.c (memory_error): Move to avoid incorrect implicit\n+ \t\tdecl.\n+\n+\t* makeinfo/makeinfo.c,\n+\t* makeinfo/multi.c,\n+\t* util/install-info.c,\n+\t* util/texindex.c,\n+\t* info/tilde.c,\n+\t* info/man.c,\n+\t* info/gc.c,\n+\t* info/session.c (info_replace_key_to_typeahead): Remove unused\n+         function,\n+\t* info/nodemenu.c,\n+\t* info/man.c,\n+\t* info/m-x.c,\n+\t* info/footnotes.c\n+\t* info/info.c\n+\t* info/indices.c,\n+\t* info/filesys.c: Parenthesize to avoid -Wall warnings\n+\tremove unused variables,\n+\tmake return types explicit,\n+\tprintf type corrections.\n+\n+\t* lib/system.h: <ctype.h>: Include this.\n+\t* util/texindex.c,\n+\t* makeinfo/makeinfo.c,\n+\t* info/echo-area.c,\n+\t* info/display.c: ctype.h: Included in system.h now.\n+\n+\t* info/echo-area.c: Parenthesize to avoid -Wall warnings.\n+        (ctype.h): #include for isprint.\n+\t(echo_area_stack_depth): Remove unused function.\n+\t* info/display.c: Parenthesize to avoid -Wall warnings.\n+        (ctype.h): #include for isprint.\n+\t* info/dir.c: Parenthesize to avoid -Wall warnings.\n+\t(build_dir_node_internal): Remove declaration of nonexistent function.\n+\tFrom: Erick Branderhorst <Erick.Branderhorst@asml.nl>.\n+\n+\t* configure.in (TEXMF): Call texconfig to discover the default value,\n+\tfor the sake of the warning in doc/Makefile.\n+\tFrom: Tim Mooney <mooney@dogbert.cc.ndsu.NoDak.edu>.\n+\n+\t* doc/Makefile.am (TEXMF): New variable.\n+        (install-data-local): Use it in warning.\n+\tFrom: Tim Mooney <mooney@dogbert.cc.ndsu.NoDak.edu>.\n+\n+\t* info/session.c (initialize_info_session): Only call\n+\tterminal_prep_terminal if clear_screen is true.  Otherwise, failed\n+        --index-searches prep the terminal but do not unprep it.\n+\tFrom: William Edward Webber <wew@yallara.cs.rmit.EDU.AU>.\n+\n+\t* info/nodemenu.c: Doc fix.\n+\n+Mon Jul 21 17:11:09 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi: Comment out @smallbook and @set smallbook so\n+ \t\tpeople at other sites can print it the way they want.\n+\tFrom: Thomas Walter <walter@pctc.chemie.uni-erlangen.de>\n+\n+Sun Jul 20 07:52:25 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* configure.in: 3.9h.\n+\n+\t* doc/Makefile.am (install-info-am, distclean-aminfo): New targets\n+\t\tto avoid assuming info files are in srcdir.\n+\n+\t* lib/system.h (xstrdup): Returns char *, not void *.\n+\n+\t* doc/Makefile.am (.texi.info),\n+\t* doc/Makefile.am (texinfo): Don't run in $(srcdir).\n+\n+\t* util/install-info.c (main): Remove unnecessary decl of strrchr.\n+\n+\t* info/tilde.c: Include info.h (for config.h) before alloca stuff.\n+\n+\t* makeinfo/makeinfo.c (validate_file): Rename `valid' to `valid_p'\n+\t\tto avoid conflict with SunOS 4 header files.\n+\tFrom: \"Kaveh R. Ghazi\" <ghazi@caip.rutgers.edu>.\n+\n+\t* info/session.c (initialize_info_session): Call\n+          terminal_prep_terminal here (before calling terminal_clear_screen).\n+\t(info_session): Instead of here.\n+\tFrom: William Edward Webber <wew@yallara.cs.rmit.EDU.AU>.\n+\n+\t* Makefile.am (EXTRA_DIST): Add README-alpha.\n+\n+Sat Jul 19 13:50:27 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* info/terminal.c: Use `keypad transmit' sequence if it's defined:\n+\t(term_keypad_on, term_keypad_off): New statics.\n+\t(terminal_begin_using_terminal): If term_keypad_on, send it.\n+\t(terminal_end_using_terminal): If term_keypad_off, send it.\n+\t(terminal_initialize_terminal): Look up ks and ke termcap strings.\n+\tFrom: William Edward Webber <wew@yallara.cs.rmit.EDU.AU>.\n+\n+\t* info/infomap.c (initialize_info_keymaps): Initialize hardwired\n+ \t\tcases for arrow keys a la readline.  Found by John Eaton,\n+ \t\tjwe@bevo.che.wisc.edu.\n+\n+\t* makeinfo/makeinfo.c (output_pending_notes): Remove footnote\n+        macro expansion code I #if 0'd out some time ago.  And doc fixes.\n+\n+\t* Applied this patch:\n+\n+Sat Jul 19 16:29:01 1997  Karl Eichwalder  <ke@suse.de>\n+\n+\t* info/info.c (main): setlocale, bindtextdomain, and textdomain.\n+\n+Fri Jul 18 10:02:18 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/Makefile.am (install-data-local),\n+\t* emacs/Makefile.am (install-data-local): Give subdir in warning.\n+\n+\t* configure.in: Version 3.9f.\n+\n+\t* doc/texinfo.texi: Correct \\^ to @^.\n+\tFrom Andreas S.\n+\n+\t* Merged these changes:\n+\n+1997-07-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>\n+\n+\t* info/display.c (display_cursor_at_point): Flush ouput.\n+\n+1997-07-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>\n+\n+\t* info/session.c (remember_window_and_node): Don't crash when the\n+\tcurrent window has no current node.\n+\n+1997-07-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>\n+\n+\t* util/texindex.c (usage): Translate the doc strings.\n+\t* makeinfo/makeinfo.c (cm_today): Translate the month names.\n+\t* info/variables.c (describe_variable): Translate the doc strings.\n+\t* info/nodes.h: Don't translate the strings defining the info format.\n+\n+1997-07-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>\n+\n+\t* makeinfo/makeinfo.c (get_item_function): Remove superfluous call\n+\tto canon_white after get_rest_of_line.\n+\t(cm_end): Likewise.\n+\t(handle_variable): Likewise.\n+\t(cm_item): Likewise.\n+\t(cm_unmacro): Likewise.\n+\n+1997-07-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>\n+\n+\t* info/nodemenu.c (list_visited_nodes): Don't clear the internal\n+\tflag, this and other functions depend on it.  Don't insist on\n+\tdisplaying the menu below the current window.\n+\n+1997-07-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>\n+\n+\t* makeinfo/makeinfo.c (cm_uref): Fix memory leaks.\n+\t(cm_inforef): Likewise.  Handle empty cross reference name.\n+\n+1997-07-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>\n+\n+\t* info/echo-area.c (ea_possible_completions): Check that the\n+\tcurrent window can actually be split.\n+\n+Thu Jul 17 17:19:34 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t\n+\t* emacs/Makefile.am (*clean-lisp): Define, as Automake didn't.\n+\tFrom: Kenneth Stailey <kstailey@disclosure.com>.\n+\n+\t* doc/Makefile.am: Do not distribute info.1.\n+\t* makeinfo/macros: Do not distribute this directory, it's merged\n+\t\tinto the main documentation.\n+\t* doc/makeinfo.texi: Don't distribute this either, it's in the \n+\t\tmain manual.\n+\n+\t* util/install-info.c: Use \\n\\ for multiline string constant.\n+  \t\tFrom: Tim Mooney <mooney@dogbert.cc.ndsu.NoDak.edu>.\n+\n+Wed Jul 16 15:29:50 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi: @set must be after @setfilename, I guess.\n+\tNoted by Erick Branderhorst.\n+\n+\t* Applied this change:\n+\n+Tue Nov 12 22:20:22 1996  John Eaton  <jwe@bevo.che.wisc.edu>\n+\n+\t* makeinfo.c (INDEX_ALIST): Use two indices, read_index and\n+\twrite_index, instead of just one.\n+\t(find_index_offset): If a match is found, return index to the\n+\tcurrent INDEX_ALIST struct, not the index pointing to the list of\n+\tindex entries.\n+\t(translate_index): Return read_index from the matching\n+\tINDEX_ALIST.\n+\t(undefindex): Delete the list of index elements pointed to by\n+\tread_index from the INDEX_ALIST that matches name.\n+\t(defindex): Initialize read_index and write_index.\n+\t(index_add_arg): Add entries to the list pointed to by write_index\n+\tfrom the INDEX_ALIST matching name.\n+\t(index_append): Delete unused function.\n+\t(cm_synindex): Don't merge indcies, just make the write_index for\n+\tredirectee the same as the write_index for redirector.\n+\n+Tue Jul 15 09:32:04 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi: Bump edition number for 2.24.\n+\n+\t* util/Makefile.am (localedir): Define.\n+\n+\t* info/window.h: Rename __window__ to window_struct.\n+\n+\t* info/window.h,\n+\t* info/variables.h,\n+\t* info/search.h,\n+\t* info/man.h,\n+\t* info/info-utils.h,\n+\t* info/gc.h,\n+\t* info/footnotes.h,\n+\t* info/filesys.h,\n+\t* info/echo-area.h,\n+\t* info/display.h: Avoid leading _ in #define for #include protection.\n+\n+\t* makeinfo/makeinfo.c: Version 1.68.\n+\t* info/info.c: Version 2.17.\n+\n+\t* Most all files: Untabify.\n+\n+\t* doc/Makefile.am (texinfo): Add explicit target.\n+\n+\t* emacs/Makefile.am (noinst_LISP): Remove the obsolete\n+\t\tdetexinfo.el (makeinfo --no-headers is better) and\n+\t        texnfo-tex.el (now handled by TeX modes in general).\n+\n+Mon Jul 14 15:21:03 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* util/texi2dvi: Update RCS file from 3.9 distribution.\n+\n+\t* util/Makefile.am (EXTRA_DIST): Add update-info, from\n+ \t\trhawes@dmapub.dma.org\n+\n+Sun Jul 13 17:05:03 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* info/signals.c: Use RETSIGTYPE instead of hardwiring void.\n+\tFrom: \"Jeffery L. JT Vogt\" <lfm@atw.earthreach.com>.\n+\n+\t* info/session.c (info_history_node): Rewrite as\n+  \t      info_kill_node (current_node).\n+        (kill_node, read_nodename_to_kill): New functions from info_kill_node.\n+\t(info_kill_node): Now this just calls them.\n+\n+Fri Jul 11 11:56:58 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi: Fix `Conditionals' xref.\n+\n+Thu Jul 10 17:58:12 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/info.texi: Don't say SPC clears ? screen.\n+\n+Sun Jul  6 16:26:41 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/info-stnd.texi: Document --index-search.\n+\n+\t* info/tilde.c,\n+\t* info/session.c: Remove redundant getenv decl.\n+\n+\t* Installed following change:\n+Tue Nov 12 14:44:00 1996  John W. Eaton  <jwe@bevo.che.wisc.edu>\n+\n+\t* info/info.c (main): Handle new option, --index-search STRING.\n+\t(index_search_p, index_search_string): New static variables, used\n+\tto handle --index-search option.\n+\n+\t* info/session.c (initialize_info_session): New arg,\n+\tclear_screen.  Change all callers.\n+\n+\t* info/indices.h (do_info_index_search, index_intry_exists):\n+\tProvide declarations here.\n+\n+\t* info/indices.c (do_info_index_search): New function, extracted\n+\tfrom info_index_search.\n+\t(info_index_search): Simply call do_info_index_search() with\n+\tsearch_string set to NULL.\n+\t(index_entry_exists): New function.\n+\n+Sat Jul  5 17:17:14 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi: Document @kbdinputstyle.\n+\n+\t* makeinfo/makeinfo.c (kbdinputstyle): New command.\n+\t(cm_no_op_line_arg): New function.\n+\n+\t* info/termdep.h (HAVE_TERMIOS_H) [NeXT]: #undef.  \n+\tFrom: Gregor Hoffleit <flight@mathi.uni-heidelberg.de> et al.\n+\n+Fri Jul  4 14:18:08 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* info/Makefile.am (EXTRA_DIST),\n+\t* util/Makefile.am (EXTRA_DIST),\n+\t* makeinfo/Makefile.am (EXTRA_DIST),\n+\t* lib/Makefile.am (EXTRA_DIST): Include README.\n \n-\t* info/man.c (find_man_formatter): Don't cast getenv(), but provide\n-\ta minimal declaration at top level.\n+\t* doc/texinfo.texi (makeinfo options): Document --paragraph-indent\n+ \t\tvalues more completely.\n+\t* makeinfo/makeinfo.c (set_paragraph_indent): Allow translated\n+ \t\tasis or none, improve doc.\n+ \tFrom ke.\n \n-\t* makeinfo/makeinfo.c: Don't redefine alloca if it is already defined.\n+\t* doc/Makefile.am (dist-info): New empty target so that we do not\n+ \t\tdistribute info files.\n+ \tFrom Erick Branderhorst.\n \n-Tue Oct  7 16:27:34 1997  Manfred Hollstein  <manfred@s-direktnet.de>\n+\t* doc/texinfo.texi (Invoking install-info): Document that the dir\n+\t\tfile is created now if need be.\n+\t* Makefile.am (EXTRA_DIST): No longer need dir.\n+\t* util/install-info.c (ensure_dirfile_exists): New routine.\n+\t(main): Call it before trying to open dirfile for reading.\n \n-\t* aclocal.m4: Substitute INSTALL.\n-\t* configure: Re-built.\n+\t* doc/texinfo.texi: Document install-info --delete a little better.\n+\t* util/install-info.c: Set something_deleted when we delete a\n+ \t\tnormal line.\n+\tBug from: Denis Kosygin <dkosygin@math.Princeton.EDU>.\n \n-Tue Oct  7 10:25:22 1997  Manfred Hollstein  (manfred@lts.sel.alcatel.de)\n+\t* util/install-info.c: If no info dir entry, give warning and exit 0.\n \n-\t* info/man.c (SIGCHLD): Define to SIGCLD if <sys/signal.h>\n-\tfails to provide it.\n+Wed Jul  2 06:35:17 1997  Karl Berry  <karl@cs.umb.edu>\n \n-Wed Sep 17 23:56:11 1997  Jeffrey A Law  (law@cygnus.com)\n+\t* configure.in (ALL_LINGUAS): Add fr.\n \n-\t* util/install-info.c: Only provide an external decl for strrchr\n-\tif HAVE_STRCHR is not defined.\n+\t* makeinfo/makeinfo.h (insertion_type, insertion_type_names): Add\n+\t\tifnot... entries. Alphabetize.\n \n-Mon Sep 15 22:53:01 1997  Jeffrey A Law  (law@cygnus.com)\n+Tue Jul  1 17:21:54 1997  Karl Berry  <karl@cs.umb.edu>\n \n-\t* aclocal.m4: Add replacement for AC_PROG_INSTALL.\n-\t* configure.in: Use EGCS_PROG_INSTALL.\n+\t* makeinfo/makeinfo.c (sort_index): Set defining_line and\n+\t\tinput_filename so errors in index entries are reported at\n+\t\tthe correct location.  From rms.\n \n-Tue Sep  9 23:16:35 1997  H.J. Lu  (hjl@gnu.ai.mit.edu)\n+\t* makeinfo/makeinfo.c (cm_ifnothtml, etc.): Routines for new\n+ \t\tcommands.\n \n-\t* Makefile (all): Remove sub-all.\n-\t(stmp-sub-all): New target. Renamed from sub-all.\n-\t(info, texinfo): Also depend on stmp-sub-all.\n-\t(clean): Also remove stmp*.\n-\t(maintainer-clean): New target. Same as realclean.\n+Sun Jun 29 09:44:01 1997  Karl Berry  <karl@cs.umb.edu>\n \n-Fri Sep  5 09:07:33 1997  Jeffrey A Law  (law@cygnus.com)\n+\t* doc/texinfo.texi: Document new @ifnot... commands, etc.\n+\t* doc/texinfo.texi: Document @image, etc.\n \n-\t* install-sh: Delete duplicate install script.\n+Thu Jun 26 17:57:37 1997  Karl Berry  <karl@cs.umb.edu>\n \n-Tue Sep  2 22:25:34 1997  Jeffrey A Law  (law@cygnus.com)\n+\t* makeinfo/makeinfo.c (cm_image): New routine for new command @image.\n+\t(cm_end): Move to better place, doesn't need its own page.\n+\tDoc fixes.\n \n-\t* Makefile.in (install, install-info, installdirs, uninstall): Make\n-\tthese phony targets.\n+Mon Jun 23 16:54:03 1997  Karl Berry  <karl@cs.umb.edu>\n \n-Tue Sep  2 10:19:48 1997  Richard Henderson  <rth@cygnus.com>\n+\t* Makefile.am (SUBDIRS): Do intl first.\n \n-\t* makeinfo/makeinfo.c: Maybe include <stdlib.h> for malloc et al.\n-\t* util/install-info.c: Include <string*.h>.\n-\t(my_strerror): Use strerror if available.\n+\t* doc/Makefile.am (EXTRA_DIST): Include epsf.tex.\n+\t(install-data-local): Suggest possible installation directory.\n+\t* epsf.tex: New file.\n \n-Tue Aug 26 11:18:52 1997  Jeffrey A Law  (law@cygnus.com)\n+Wed Jun 18 17:51:52 1997  Karl Berry  <karl@cs.umb.edu>\n \n-\t* libtxi/Makefile.in: Add dependencies for memcpy, memmove and strdup.\n+\t* doc/texinfo.texi: Document texinfo.cnf.\n \n-Mon Jul 28 17:26:48 1997  Rob Savoye  <rob@chinadoll.cygnus.com>\n+Sun Jun 15 14:37:58 1997  Karl Berry  <karl@cs.umb.edu>\n \n-\t* aclocal.m4: Add CYGWIN and EXEEXT autoconf macros.\n-        * configure.in: Use CYGWIN and EXEEXT autoconf macro to look for\n-        win32 dependencies.\n-        * configure: Regenerated with autoconf 2.12.\n-        * Makefile.in: Add $(EXEEXT) to all executables.\n-        * makeinfo/Makefile.in: Add $(EXEEXT) to all executables.\n-        * util/Makefile.in: Add $(EXEEXT) to all executables.\n+\t* doc/texinfo.texi (Command List): Various commands missing or\n+\t\terroneous.\n+\tFrom: Karl_Heinz_Marbaise@p69.ks.fido.de.\n \n-Mon May 26 12:44:43 1997  Ian Lance Taylor  <ian@cygnus.com>\n+\t* makeinfo/makeinfo.c: Oops, failed to break out of loop.\n \n-\t* texinfo.tex: Update to newest FSF version (2.201).\n+\t* util/texindex.c: Use <getopt.h> not \"getopt.h\".\n+\n+\t* All source files: Merge gettext changes from Karl E.;\n+\this ChangeLog entries below.\n+\n+Sat Jun 14 17:04:28 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* Makefile.am,\n+\t* makeinfo/Makefile.am: Doc fix.\n+\t* util/Makefile.am (EXTRA_DIST): Add texi2dvi.  From Karl E.\n+\n+Fri Jun 13 17:39:34 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c [WIN32]: Handle read bogosity and c:\\\n+\t\tabsolute paths.\n+\tFrom: Eric Hanchrow <erich@MICROSOFT.com>.\n+\n+\t* configure.in (AC_CHECK_HEADERS): Check for pwd.h.\n+\t* info/tilde.c (pwd.h): Move #include to system.h.\n+\n+\t* makeinfo/makeinfo.c (main): New option -P to prepend to search path.\n+\tFrom: Kenneth Stailey <kstailey@cvs.openbsd.org>.\n+\n+\t* doc/texinfo.texi (Invoking makeinfo),\n+\t* doc/makeinfo.texi: Mention -P.\n+\n+Thu Jun 12 16:25:40 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* info/signals.h (SIGCHLD): #define as SIGCLD if undefined, for sysV68.\n+\tFrom: \"Philippe De Muyter\" <phdm%labauto1@ulb.ac.be>.\n+\n+\t* util/install-info.c (O_RDONLY): Remove this stuff, it's in system.h.\n+ \t(main): Handle existing entry in dir file having .info extension.\n+\tFrom: \"Bradley C. Kuszmaul\" <bradley@GRANITE.SYSTEMSX.CS.YALE.EDU>.\n+\n+\t* makeinfo/makeinfo.c (get_char_len): Don't count 8-bit characters\n+\t\tas two chars in the output.\n+\tFrom: Sung-Hyun Nam <namsh@amuna.rms.lgic.co.kr>.\n+\n+Wed Jun 11 16:36:51 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi (Other Info Directories): Document new trailing\n+ \t\t: in INFOPATH feature.\n+\n+\t* info/info.c (main): Have trailing : in INFOPATH expand to the\n+ \t\tdefault path.\n+\n+Fri Jun  6 13:22:02 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi (uref): New node for new command.\n+\n+Thu Jun  5 18:13:48 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (cm_uref): New function to accept optional\n+\t\tsecond argument.  Call it in command table.\n+\n+Sat Jun 14 10:54:16 1997  Karl Eichwalder  <ke@suse.de>\n+\n+\t* mkinstalldirs: Update from automake-1.1p.\n+\n+\t* configure.in: Touch po/ChangeLog (gettext needs it).\n+\n+Thu Jun 12 08:37:52 1997  Karl Eichwalder  <ke@ke.Central.DE>\n+\n+\t* util/texindex.c: Include system.h, remove config.h.\n+\n+\t* po/POTFILES.in: Fill it.\n+\n+\t* makeinfo/multi.c: Include system.h.\n+\n+\t* info/Makefile.am:\n+\t* makeinfo/Makefile.am:\n+\t* util/Makefile.am:\n+ \t(localedir): Set. \n+\t(INCLUDES): Add intl/ and LOCALEDIR.\n+\t(LDADD): Add @INTLLIBS@.\n+\n+\t* makeinfo/makeinfo.c (main):\n+\t* util/texindex.c (main): \n+\t* util/install-info.c (main):\n+ \tsetlocale, bindtextdomain, and textdomain.\n+\n+\t* lib/system.h: Include locale.h and libintl.h.\n+\n+\t* acconfig.h: Include libintl.h.\n+\t(_, N_): Define.\n+\tAdd ENABLE_NLS, HAVE_CATGETS, HAVE_GETTEXT, HAVE_LC_MESSAGES,\n+\tHAVE_STPCPY for libintl.\n+\tAdd @TOP@ and @BOTTOM@.\n+\n+\t* configure.in (AM_GNU_GETTEXT): Add.\n+\t(AC_OUTPUT): Process Makefiles in intl/ and po/.\n+\t(ALL_LINGUAS): Available languages.\n+\n+\t* Makefile.am (AUTOMAKE_OPTIONS): Now use 1.1p.\n+\n+Wed Jun 11 17:05:37 1997  Karl Eichwalder  <ke@ke.Central.DE>\n+\n+\t* Makefile.am (SUBDIRS): Add intl/ and po/ for NLS.\n+\n+\t* run `gettextize -c' to get the i18n skeleton.\n+\n+Wed Jun  4 17:51:08 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (uref): New command, another alias for @code\n+ \t\tfor now.\n+\n+Wed Jun  4 02:02:33 1997  Miles Bader  <miles@gnu.ai.mit.edu>\n+\n+        * doc/texinfo.texi (email): { and } need @ escapes.\n+\n+Sun Jun  1 16:34:12 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi (itemx): @itemx should always follow @item.\n+\n+\t* makeinfo/makeinfo.c (cm_item): Insert blank line if two\n+\t\tconsecutive @item's.\n+\tFrom: Karl Eichwalder <ke@ke.central.de>.\n+\tAlso various doc fixes.\n+\n+Tue May 27 17:20:44 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi (various): Document @deftypemethod.\t\n+\t(email): @ should have been @@ in the example.\n+\tFrom: Mate Wierdl <mw@wierdlmpc.msci.memphis.edu>\n+\n+Mon May 26 16:56:26 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/multi.c (setup_multitable_parameters): Avoid use of %n\n+\t\tfor sake of m68k-hp-bsd.\n+\tFrom: Derek L Davies <ddavies@world.std.com>.\n+\n+\t* info/terminal.c (terminal_begin_using_terminal,\n+        terminal_end_using_terminal): Call fflush and sleep to handle\n+\tcmdtool/shelltool with scrollbars.  Also ignore\n+ \tSIGWINCH so we do not prematurely exit.  Move call.\n+\t(terminal_prep_terminal): Disable LNEXT (CTRL-V).\n+\tFrom: strube@physik3.gwdg.de (Hans Werner Strube).\n+\n+\t* configure.in (AC_TYPE_SIGNAL): Check this.\n+\n+Sun May 25 16:49:58 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (discard_insertions): Take arg saying\n+ \t\twhether ifinfo/ifset/etc. are ok.\n+        (convert_from_loaded_file): At `finished', call discard_insertions.\n+\t(handle_variable_internal): Complain if we reach eof before the\n+\t\t@end for a false condition.\n+\tFrom: HERBERT@boevm4.vnet.ibm.com.\n+\n+\t* info/Makefile.am (ginfo_SOURCES): Add doc.h.\n+\t* lib/Makefile.am (libtxi_a_SOURCES): Add system.h.\n+\n+Sat May 24 18:08:27 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c: Check that we have macro_expansion_filename\n+ \t\tbefore using strcmp.\n+\n+Thu May 22 17:59:46 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/makeinfo.texi: Minimally document --force.\n+\n+\t* makeinfo/makeinfo.c (--force): New option.\n+\t(-E): Allow stdout via `-'.\n+\t(convert_from_loaded_file): Unlink output files if errors and !force.\n+\n+Tue May 20 17:48:42 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c: Change all strdup calls to xstrdup.\n+\t(xmalloc, xrealloc, memory_error): Remove these functions, they're\n+\t\tin lib.\n+\t(set_paragraph_indent, cm_paragraph_indent): Move to misc page.\n+\t(cm_footnote): Expand macros in the arg for the macro expansion output.\n+\n+Fri May 16 17:26:59 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (cm_macro): Allocate an empty body if the\n+ \t\tmacro was empty.\n+ \t(cm_unmacro): Allocate one more byte for the null.\n+\tFrom: Robert Hoehne <robert.hoehne@Mathematik.TU-Chemnitz.DE>.\n+\n+Sun May 11 17:51:21 1997  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>\n+\n+\t* makeinfo/makeinfo.c (cm_printindex): Fix calculation of the\n+\tlength of an index line.\n+\n+Sun May 11 14:47:42 1997  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* makeinfo/makeinfo.c (main): Don't unconditionally run usage when\n+\t-e specified.\n+\n+Sun May 11 17:47:42 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (init_indices): Free the source for an @synindex.\n+\t(undefindex): Do not go further if the target was already freed.\n+\t(free_index): Do not free the node names, as init_tags already did.\n+\t(cm_synindex, index_add_arg): Improve error message.\n+\t(program_index, function_index, etc.): Remove these unused #defines.\n+\n+Tue May  6 17:53:37 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (init_internals): Do not free current_node,\n+        it already is, at least when multiple input files are specified.\n+\tFrom: Karl Eichwalder <ke@ke.central.de>.\n+\n+Mon May  5 16:14:39 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi: Mention both alignment and non-alignment of\n+ \t\tcontinuation description lines in menus (Arnold).\n+\n+Sun Apr 27 16:12:44 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (apply): Handle body being `\\string'.\n+\tAlso, avoid dereferencing a null pointer when a macro has no named\n+\tparameters.\n+\tFrom: Eli Zaretskii <eliz@is.elta.co.il>.\n+\n+\t* makeinfo/makeinfo.c: Wording changes/fixes in warnings.\n+\n+\t* info/session.c (info_get_input_char): Do not mix stdio with raw I/O.\n+\tFrom: Egil Kvaleberg <egilk@sn.no>.\n+\n+\tFrom Tom Hageman <tom@basil.icce.rug.nl>.  These changes make\n+        arrow keys work:\n+\t* info/infomap.c: Add arrow key bindings.\n+        (keymap_bind_keyseq): New support function.\n+\t(initialize_info_keymaps): Use it.\n+\t(term_ku,term_kd,term_kl,term_kr): Remove explicit declarations;\n+\tuse #include \"terminal.h\" instead.\n+\t* info/session.c (initialize_info_session): Unbuffer stdin.\n+\t(info_get_another_input_char): Fix bug in `ready' logic.\n+\t* info/terminal.h,\n+\t* info/terminal.c (term_kP, term_kN): New variables to hold\n+ \t\tPageUp, PageDown key sequences.\n+\t  (terminal_initialize_terminal): Set them.\n+       \n+\t* util/texindex.c (main),\n+\t* util/install-info.c (main),\n+\t* makeinfo/makeinfo.c (print_version_info),\n+\t* info/info.c (main): Use PACKAGE and VERSION from Automake for\n+ \t\tprinting version number.\n+\n+Sat Apr 26 19:19:46 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (get_until_in_line): Do not expand if\n+\t\texecuting_string.\n+\tAlso, free temporary strings.\n+\tAlso, untabify entire file.\n+\n+\t* doc/texinfo.texi: Many corrections from Arnold.\n+\n+Thu Apr 24 16:31:09 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/multi.c (draw_horizontal_separator): Account for indent\n+ \t\there also.  From Ulrich.\n+\n+Wed Apr 23 15:15:34 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (cm_today): Use time_t instead of long;\n+ \t\teveryone else does.\n+ \t(LOCALTIME_CAST): Remove kludge, we'll always use time_t now.\n+\n+\t* info/Makefile.am (ginfo_SOURCES): Remove general.h, that got\n+ \t\tmerged into system.h.\n+\n+Mon Apr 21 17:13:25 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/multi.c (output_multitable_row): Account for\n+ \tcolumn_indent, both the global one and for each column.\n+\t(setup_multitable_parameters): Account for column_indent in the table\n+\twidth in the columnfrac case, but don't bother with the template\n+ \t\tcase for now.\n+\n+Sun Apr 20 16:32:00 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (output_stream): Remove redundant\n+        definition; it's in makeinfo.h,\n+\tand a vaxstation-ultrix4.3 fails to link because of the two defns.\n+\tFrom: Anders Olofsson <anders@kid025.ericsson.se>.\n+\n+\t* makeinfo/makeinfo.c (expansion): Inhibit appending to the macro\n+ \t\texpansion stream.\n+ \t(get_until_in_line): Possibly expand the text.\n+\tChange caller in get_node_token to do the expansion,\n+\tall other calls to remain the same.\n+\n+\t* makeinfo/makeinfo.c (cm_node): No need to call strlen to check\n+ \t\tfor the empty string.\n+\n+\t* doc/texinfo.texi: Restore missing @c for initial comment.\n+\n+Fri Apr 18 17:41:36 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi: Mention that .info is unnecessary in the info\n+\t\tfile name argument of an xref.\n+\n+\t* doc/texinfo.texi: Mention texi2dvi -t instead of embedding\n+ \t\t@smallbook or @afourpaper in the document source.\n+\n+Sun Apr 13 15:19:08 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* lib/system.h (_GNU_SOURCE): #define.\n+\n+Mon Apr  7 16:30:11 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/info.texi,\n+\t* doc/info-stnd.texi,\n+\t* doc/texinfo.texi: Do not make (dir) the previous ptr from the top node,\n+\tand tell people not to do that in the manual.\n+\tFrom: rmedina@kanojo.ivic.ve (Rodrigo Medina),\n+\tconfirmed by rms.\n+\n+Fri Apr  4 16:30:33 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c: Move error page to top to avoid\n+\tprototypes, and do add prototypes for add_word_args and execute_string,\n+\tso we can use <stdarg.h>.\n+\n+\t* info/makedoc.c,\n+\t* info/nodemenu.c: Use %ld instead of %d for file offsets.\n+\t* makeinfo/makeinfo.c (delete_macro): Decrement macro_list_len.\n+\t(get_macro_args): Decrement line number if see \\n.\n+\t* utils/texindex.c (indexify): Use fputs instead of fprintf\n+\tfor constant string.\n+\tFrom: Eli Zaretskii <eliz@is.elta.co.il>.\n+\n+Thu Apr  3 17:40:52 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* configure.in (AC_CHECK_HEADERS): No need to check for vararg.h\n+\there, AC_FUNC_VPRINTF does it.\n+\t(AC_CHECK_FUNCS): Likewise for vsprintf and vfprintf.\n+\t* makeinfo/makeinfo.c (add_word_args, execute_string): Rewrite\n+\tlike the error functions.\n+\n+Wed Apr  2 17:46:28 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* configure.in: Add AC_FUNC_VPRINTF.\n+\t* makeinfo/makeinfo.c (error, line_error, warning): Rewrite a la\n+        error.c from the *utils to use <stdarg.h> if available.\n+\n+Tue Apr  1 11:48:40 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* doc/texinfo.texi: Tabs are a bad idea.\n+\n+\t* doc/userdoc.texi,\n+\t* doc/info.texi: Untabify.\n+\n+Sun Mar 30 17:36:47 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* makeinfo/makeinfo.c (end_of_sentence_p): New function.\n+\t(add_char): Call it, instead of simply sentence_ender.\n+\t(post_sentence): New macro.\n+\tAlso, remove some #include's now in system.h.\n+\t* lib/system.h [VMS]: #include <perror.h>, from makeinfo.\n+\n+Thu Mar 27 17:41:03 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* info/search.c (skip_node_characters): Do not arbitrarily\n+\tstrip trailing period from end of node name; this is valid.\n+\n+Mon Mar 24 16:44:42 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* configure.in (AC_OUTPUT): Don't need to create stamp-h here,\n+\ttromey says AM_CONFIG_HEADER will do it.\n+\n+\t* info/Makefile.am, util/Makefile.am, makeinfo/Makefile.am (INCLUDES):\n+        Don't need -I.. (for config.h) or -I$(srcdir), says tromey.\n+        Automake includes those already.\n \n Fri Mar 14 15:05:17 1997  Karl Berry  <karl@cs.umb.edu>\n \n+\t* info/Makefile.am: Build as ginfo, install as info,\n+\tto avoid conflict with the standard info target.\n+\n+\t* lib/system.h: New file.\n+\t* makeinfo/makeinfo.c (strerror): Remove declaration,\n+\tinclude system.h, remove other redundant #if stuff.\n+\t* info/general.h: Include system.h instead of doing common stuff.\n+\t* util/install-info.c (my_strerror): Remove this, use strerror,\n+\tinclude system.h.\n+\n \t* info/terminal.c (terminal_prep_terminal): Only use OCRNL and\n \t\tONLCR if they are defined.  Reported by many people.\n \n-Wed Feb 12 11:15:16 1997  Michael Meissner  <meissner@cygnus.com>\n+\t* Installed:\n \n-\t* util/texindex.c (main): Make main an int function, not void.\n+\tSun Dec  1 19:23:54 1996  Karl Eichwalder  <ke@ke.Central.DE>\n \n-Sat Jun 29 18:56:07 1996  Geoffrey Noer  <noer@cygnus.com>\n+\t\t* configure.in (TERMLIBS): Add ncurses.\n \n-\t* configure.in: if ac_cv_c_cross is yes, don't run the\n-\tAC_FUNC_SETVBUF_REVERSED call since it tries to do a run\n-\ttest.  This allows texinfo to build for cygwin32 Canadian\n-\tcrosses/natives\n-\t* configure: regenerate\n+Thu Mar 13 13:59:45 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* lib/Makefile.am (libtxi_a_SOURCES): Add xstrdup.c.\n+\t* info/*.c: Use xstrdup instead of strdup everywhere.\n+\n+\t* info/tilde.c: Do not include clib.h, move stdlib.h include to\n+\t* info/general.h: here.\n+\n+\t* configure.in (AC_CONFIG_HEADER): Use this,\n+\tto avoid hugely long compile line with all the -D's.\n+\t* info/general.h: Include <config.h>.\n+\t\n+\t* emacs/Makefile.am (install, install-data): Do @echo\n+\tto tell the user to compile/install the elisp manually.\n+\t\n+\t* configure.in (AC_REPLACE_FUNCS): Move strerror check to here.\n+\t(AC_CHECK_FUNCS): From here.\n+\n+\t* lib/strerror.c: New file, from enscript (et al.) distribution.\n+\n+Tue Mar 11 16:36:25 1997  Karl Berry  <karl@cs.umb.edu>\n+\n+\t* info/Makefile.am (info_SOURCES): Add doc.c, dribble.c, infodoc.c.\n+\t(LDADD): Add @TERMLIBS@.\n+\n+\t* info/info.h: HANDLE_MAN_PAGES, NAMED_FUNCTIONS: Define these.\n+\n+\t* info/filesys.h: Spurious ! when DEFAULT_INFOPATH is not defined.\n+\n+\t* configure.in (AC_OUTPUT): Do lib first and doc last.\n+\n+\t* info/echo-area.c,\n+\t* info/echo-area.h,\n+\t* info/info.h: Rename echo_area to echo-area.\n+\n+Mon Mar 10 17:59:05 1997  Karl Berry  <karl@cs.umb.edu>\n \n-Wed Jun 26 12:48:10 1996  Jason Molenda  (crash@godzilla.cygnus.co.jp)\n-\n-\t* Makefile.in (bindir, libdir, mandir, infodir): Use autoconf-set \n-\tvalues.\n-\t* configure.in (AC_PREREQ): autoconf 2.5 or higher.\n-\t* configure: Rebuilt.\n-\t* emacs/Makefile.in (bindir, libdir, mandir, infodir): Use\n-\tautoconf-set values.\n-\t* info/Makefile.in (bindir, libdir, mandir, infodir): Use\n-\tautoconf-set values.\n-\t* libtxi/Makefile.in (bindir, libdir, mandir, infodir): Use\n-\tautoconf-set values.\n-\t* makeinfo/Makefile.in (bindir, libdir, mandir, infodir):\n-\tUse autoconf-set values.\n-\t* util/Makefile.in (bindir, libdir, mandir, infodir): Use \n-\tautoconf-set values.\n+\t* */Makefile.am: Write Makefile.am files for Automake.\n+\t* doc: New subdirectory, move all manuals and texinfo.tex there.\n+\t* AUTHORS, THANKS, config.guess, config.sub, mkinstalldirs: New files,\n+\trequired by Automake.\n+\t* lib/xmalloc.c: Move from info/.\n \n Fri Oct  4 07:49:49 1996  Karl Berry  <karl@cs.umb.edu>\n "}, {"sha": "22a110009f883a49432eb2bec93c58fe03c9ad60", "filename": "texinfo/aclocal.m4", "status": "modified", "additions": 501, "deletions": 14, "changes": 515, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/texinfo%2Faclocal.m4?ref=f8b2ac1ece6a3f082b68d854059648e2a6cb3e43", "patch": "@@ -1,17 +1,490 @@\n dnl aclocal.m4 generated automatically by aclocal 1.2\n \n-# Check to see if we're running under Cygwin32, without using\n-# AC_CANONICAL_*.  If so, set output variable CYGWIN32 to \"yes\".\n-# Otherwise set it to \"no\".\n+# Macro to add for using GNU gettext.\n+# Ulrich Drepper <drepper@cygnus.com>, 1995.\n \n-dnl AM_CYGWIN32()\n-AC_DEFUN(AM_CYGWIN32,\n-[AC_CACHE_CHECK(for Cygwin32 environment, am_cv_cygwin32,\n-[AC_TRY_COMPILE(,[int main () { return __CYGWIN32__; }],\n-am_cv_cygwin32=yes, am_cv_cygwin32=no)\n-rm -f conftest*])\n-CYGWIN32=\n-test \"$am_cv_cygwin32\" = yes && CYGWIN32=yes])\n+# serial 2\n+\n+AC_DEFUN(AM_WITH_NLS,\n+  [AC_MSG_CHECKING([whether NLS is requested])\n+    dnl Default is enabled NLS\n+    AC_ARG_ENABLE(nls,\n+      [  --disable-nls           do not use Native Language Support],\n+      USE_NLS=$enableval, USE_NLS=yes)\n+    AC_MSG_RESULT($USE_NLS)\n+    AC_SUBST(USE_NLS)\n+\n+    USE_INCLUDED_LIBINTL=no\n+\n+    dnl If we use NLS figure out what method\n+    if test \"$USE_NLS\" = \"yes\"; then\n+      AC_DEFINE(ENABLE_NLS)\n+      AC_MSG_CHECKING([whether included gettext is requested])\n+      AC_ARG_WITH(included-gettext,\n+        [  --with-included-gettext use the GNU gettext library included here],\n+        nls_cv_force_use_gnu_gettext=$withval,\n+        nls_cv_force_use_gnu_gettext=no)\n+      AC_MSG_RESULT($nls_cv_force_use_gnu_gettext)\n+\n+      nls_cv_use_gnu_gettext=\"$nls_cv_force_use_gnu_gettext\"\n+      if test \"$nls_cv_force_use_gnu_gettext\" != \"yes\"; then\n+        dnl User does not insist on using GNU NLS library.  Figure out what\n+        dnl to use.  If gettext or catgets are available (in this order) we\n+        dnl use this.  Else we have to fall back to GNU NLS library.\n+\tdnl catgets is only used if permitted by option --with-catgets.\n+\tnls_cv_header_intl=\n+\tnls_cv_header_libgt=\n+\tCATOBJEXT=NONE\n+\n+\tAC_CHECK_HEADER(libintl.h,\n+\t  [AC_CACHE_CHECK([for gettext in libc], gt_cv_func_gettext_libc,\n+\t    [AC_TRY_LINK([#include <libintl.h>], [return (int) gettext (\"\")],\n+\t       gt_cv_func_gettext_libc=yes, gt_cv_func_gettext_libc=no)])\n+\n+\t   if test \"$gt_cv_func_gettext_libc\" != \"yes\"; then\n+\t     AC_CHECK_LIB(intl, bindtextdomain,\n+\t       [AC_CACHE_CHECK([for gettext in libintl],\n+\t\t gt_cv_func_gettext_libintl,\n+\t\t [AC_TRY_LINK([], [return (int) gettext (\"\")],\n+\t\t gt_cv_func_gettext_libintl=yes,\n+\t\t gt_cv_func_gettext_libintl=no)])])\n+\t   fi\n+\n+\t   if test \"$gt_cv_func_gettext_libc\" = \"yes\" \\\n+\t      || test \"$gt_cv_func_gettext_libintl\" = \"yes\"; then\n+\t      AC_DEFINE(HAVE_GETTEXT)\n+\t      AM_PATH_PROG_WITH_TEST(MSGFMT, msgfmt,\n+\t\t[test -z \"`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`\"], no)dnl\n+\t      if test \"$MSGFMT\" != \"no\"; then\n+\t\tAC_CHECK_FUNCS(dcgettext)\n+\t\tAC_PATH_PROG(GMSGFMT, gmsgfmt, $MSGFMT)\n+\t\tAM_PATH_PROG_WITH_TEST(XGETTEXT, xgettext,\n+\t\t  [test -z \"`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`\"], :)\n+\t\tAC_TRY_LINK(, [extern int _nl_msg_cat_cntr;\n+\t\t\t       return _nl_msg_cat_cntr],\n+\t\t  [CATOBJEXT=.gmo\n+\t\t   DATADIRNAME=share],\n+\t\t  [CATOBJEXT=.mo\n+\t\t   DATADIRNAME=lib])\n+\t\tINSTOBJEXT=.mo\n+\t      fi\n+\t    fi\n+\t])\n+\n+        if test \"$CATOBJEXT\" = \"NONE\"; then\n+\t  AC_MSG_CHECKING([whether catgets can be used])\n+\t  AC_ARG_WITH(catgets,\n+\t    [  --with-catgets          use catgets functions if available],\n+\t    nls_cv_use_catgets=$withval, nls_cv_use_catgets=no)\n+\t  AC_MSG_RESULT($nls_cv_use_catgets)\n+\n+\t  if test \"$nls_cv_use_catgets\" = \"yes\"; then\n+\t    dnl No gettext in C library.  Try catgets next.\n+\t    AC_CHECK_LIB(i, main)\n+\t    AC_CHECK_FUNC(catgets,\n+\t      [AC_DEFINE(HAVE_CATGETS)\n+\t       INTLOBJS=\"\\$(CATOBJS)\"\n+\t       AC_PATH_PROG(GENCAT, gencat, no)dnl\n+\t       if test \"$GENCAT\" != \"no\"; then\n+\t\t AC_PATH_PROG(GMSGFMT, gmsgfmt, no)\n+\t\t if test \"$GMSGFMT\" = \"no\"; then\n+\t\t   AM_PATH_PROG_WITH_TEST(GMSGFMT, msgfmt,\n+\t\t    [test -z \"`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`\"], no)\n+\t\t fi\n+\t\t AM_PATH_PROG_WITH_TEST(XGETTEXT, xgettext,\n+\t\t   [test -z \"`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`\"], :)\n+\t\t USE_INCLUDED_LIBINTL=yes\n+\t\t CATOBJEXT=.cat\n+\t\t INSTOBJEXT=.cat\n+\t\t DATADIRNAME=lib\n+\t\t INTLDEPS=\"../intl/libintl.a\"\n+\t\t INTLLIBS=$INTLDEPS\n+\t\t LIBS=`echo $LIBS | sed -e 's/-lintl//'`\n+\t\t nls_cv_header_intl=intl/libintl.h\n+\t\t nls_cv_header_libgt=intl/libgettext.h\n+\t       fi])\n+\t  fi\n+        fi\n+\n+        if test \"$CATOBJEXT\" = \"NONE\"; then\n+\t  dnl Neither gettext nor catgets in included in the C library.\n+\t  dnl Fall back on GNU gettext library.\n+\t  nls_cv_use_gnu_gettext=yes\n+        fi\n+      fi\n+\n+      if test \"$nls_cv_use_gnu_gettext\" = \"yes\"; then\n+        dnl Mark actions used to generate GNU NLS library.\n+        INTLOBJS=\"\\$(GETTOBJS)\"\n+        AM_PATH_PROG_WITH_TEST(MSGFMT, msgfmt,\n+\t  [test -z \"`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`\"], msgfmt)\n+        AC_PATH_PROG(GMSGFMT, gmsgfmt, $MSGFMT)\n+        AM_PATH_PROG_WITH_TEST(XGETTEXT, xgettext,\n+\t  [test -z \"`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`\"], :)\n+        AC_SUBST(MSGFMT)\n+\tUSE_INCLUDED_LIBINTL=yes\n+        CATOBJEXT=.gmo\n+        INSTOBJEXT=.mo\n+        DATADIRNAME=share\n+\tINTLDEPS=\"../intl/libintl.a\"\n+\tINTLLIBS=$INTLDEPS\n+\tLIBS=`echo $LIBS | sed -e 's/-lintl//'`\n+        nls_cv_header_intl=intl/libintl.h\n+        nls_cv_header_libgt=intl/libgettext.h\n+      fi\n+\n+      dnl Test whether we really found GNU xgettext.\n+      if test \"$XGETTEXT\" != \":\"; then\n+\tdnl If it is no GNU xgettext we define it as : so that the\n+\tdnl Makefiles still can work.\n+\tif $XGETTEXT --omit-header /dev/null 2> /dev/null; then\n+\t  : ;\n+\telse\n+\t  AC_MSG_RESULT(\n+\t    [found xgettext programs is not GNU xgettext; ignore it])\n+\t  XGETTEXT=\":\"\n+\tfi\n+      fi\n+\n+      # We need to process the po/ directory.\n+      POSUB=po\n+    else\n+      DATADIRNAME=share\n+      nls_cv_header_intl=intl/libintl.h\n+      nls_cv_header_libgt=intl/libgettext.h\n+    fi\n+\n+    # If this is used in GNU gettext we have to set USE_NLS to `yes'\n+    # because some of the sources are only built for this goal.\n+    if test \"$PACKAGE\" = gettext; then\n+      USE_NLS=yes\n+      USE_INCLUDED_LIBINTL=yes\n+    fi\n+\n+    dnl These rules are solely for the distribution goal.  While doing this\n+    dnl we only have to keep exactly one list of the available catalogs\n+    dnl in configure.in.\n+    for lang in $ALL_LINGUAS; do\n+      GMOFILES=\"$GMOFILES $lang.gmo\"\n+      POFILES=\"$POFILES $lang.po\"\n+    done\n+\n+    dnl Make all variables we use known to autoconf.\n+    AC_SUBST(USE_INCLUDED_LIBINTL)\n+    AC_SUBST(CATALOGS)\n+    AC_SUBST(CATOBJEXT)\n+    AC_SUBST(DATADIRNAME)\n+    AC_SUBST(GMOFILES)\n+    AC_SUBST(INSTOBJEXT)\n+    AC_SUBST(INTLDEPS)\n+    AC_SUBST(INTLLIBS)\n+    AC_SUBST(INTLOBJS)\n+    AC_SUBST(POFILES)\n+    AC_SUBST(POSUB)\n+  ])\n+\n+AC_DEFUN(AM_GNU_GETTEXT,\n+  [AC_REQUIRE([AC_PROG_MAKE_SET])dnl\n+   AC_REQUIRE([AC_PROG_CC])dnl\n+   AC_REQUIRE([AC_ISC_POSIX])dnl\n+   AC_REQUIRE([AC_HEADER_STDC])dnl\n+   AC_REQUIRE([AC_C_CONST])dnl\n+   AC_REQUIRE([AC_C_INLINE])dnl\n+   AC_REQUIRE([AC_TYPE_OFF_T])dnl\n+   AC_REQUIRE([AC_TYPE_SIZE_T])dnl\n+   AC_REQUIRE([AC_FUNC_ALLOCA])dnl\n+   AC_REQUIRE([AC_FUNC_MMAP])dnl\n+\n+   AC_CHECK_HEADERS([argz.h limits.h locale.h nl_types.h malloc.h string.h \\\n+unistd.h values.h])\n+   AC_CHECK_FUNCS([getcwd munmap putenv setenv setlocale strchr strcasecmp \\\n+__argz_count __argz_stringify __argz_next])\n+\n+   if test \"${ac_cv_func_stpcpy+set}\" != \"set\"; then\n+     AC_CHECK_FUNCS(stpcpy)\n+   fi\n+   if test \"${ac_cv_func_stpcpy}\" = \"yes\"; then\n+     AC_DEFINE(HAVE_STPCPY)\n+   fi\n+\n+   AM_LC_MESSAGES\n+   AM_WITH_NLS\n+\n+   if test \"x$CATOBJEXT\" != \"x\"; then\n+     if test \"x$ALL_LINGUAS\" = \"x\"; then\n+       LINGUAS=\n+     else\n+       AC_MSG_CHECKING(for catalogs to be installed)\n+       NEW_LINGUAS=\n+       for lang in ${LINGUAS=$ALL_LINGUAS}; do\n+         case \"$ALL_LINGUAS\" in\n+          *$lang*) NEW_LINGUAS=\"$NEW_LINGUAS $lang\" ;;\n+         esac\n+       done\n+       LINGUAS=$NEW_LINGUAS\n+       AC_MSG_RESULT($LINGUAS)\n+     fi\n+\n+     dnl Construct list of names of catalog files to be constructed.\n+     if test -n \"$LINGUAS\"; then\n+       for lang in $LINGUAS; do CATALOGS=\"$CATALOGS $lang$CATOBJEXT\"; done\n+     fi\n+   fi\n+\n+   dnl Determine which catalog format we have (if any is needed)\n+   dnl For now we know about two different formats:\n+   dnl   Linux libc-5 and the normal X/Open format\n+   test -d intl || mkdir intl\n+   if test \"$CATOBJEXT\" = \".cat\"; then\n+     AC_CHECK_HEADER(linux/version.h, msgformat=linux, msgformat=xopen)\n+\n+     dnl Transform the SED scripts while copying because some dumb SEDs\n+     dnl cannot handle comments.\n+     sed -e '/^#/d' $srcdir/intl/$msgformat-msg.sed > intl/po2msg.sed\n+   fi\n+   dnl po2tbl.sed is always needed.\n+   sed -e '/^#.*[^\\\\]$/d' -e '/^#$/d' \\\n+     $srcdir/intl/po2tbl.sed.in > intl/po2tbl.sed\n+\n+   dnl In the intl/Makefile.in we have a special dependency which makes\n+   dnl only sense for gettext.  We comment this out for non-gettext\n+   dnl packages.\n+   if test \"$PACKAGE\" = \"gettext\"; then\n+     GT_NO=\"#NO#\"\n+     GT_YES=\n+   else\n+     GT_NO=\n+     GT_YES=\"#YES#\"\n+   fi\n+   AC_SUBST(GT_NO)\n+   AC_SUBST(GT_YES)\n+\n+   dnl If the AC_CONFIG_AUX_DIR macro for autoconf is used we possibly\n+   dnl find the mkinstalldirs script in another subdir but ($top_srcdir).\n+   dnl Try to locate is.\n+   MKINSTALLDIRS=\n+   if test $ac_aux_dir; then\n+     MKINSTALLDIRS=\"$ac_aux_dir/mkinstalldirs\"\n+   fi\n+   if test -z $MKINSTALLDIRS; then\n+     MKINSTALLDIRS=\"\\$(top_srcdir)/mkinstalldirs\"\n+   fi\n+   AC_SUBST(MKINSTALLDIRS)\n+\n+   dnl *** For now the libtool support in intl/Makefile is not for real.\n+   l=\n+   AC_SUBST(l)\n+\n+   dnl Generate list of files to be processed by xgettext which will\n+   dnl be included in po/Makefile.\n+   test -d po || mkdir po\n+   if test \"x$srcdir\" != \"x.\"; then\n+     if test \"x`echo $srcdir | sed 's@/.*@@'`\" = \"x\"; then\n+       posrcprefix=\"$srcdir/\"\n+     else\n+       posrcprefix=\"../$srcdir/\"\n+     fi\n+   else\n+     posrcprefix=\"../\"\n+   fi\n+   sed -e \"/^#/d\" -e \"/^\\$/d\" -e \"s,.*,\t$posrcprefix& \\\\\\\\,\" -e \"\\$s/\\(.*\\) \\\\\\\\/\\1/\" \\\n+\t< $srcdir/po/POTFILES.in > po/POTFILES\n+  ])\n+\n+# Search path for a program which passes the given test.\n+# Ulrich Drepper <drepper@cygnus.com>, 1996.\n+\n+# serial 1\n+\n+dnl AM_PATH_PROG_WITH_TEST(VARIABLE, PROG-TO-CHECK-FOR,\n+dnl   TEST-PERFORMED-ON-FOUND_PROGRAM [, VALUE-IF-NOT-FOUND [, PATH]])\n+AC_DEFUN(AM_PATH_PROG_WITH_TEST,\n+[# Extract the first word of \"$2\", so it can be a program name with args.\n+set dummy $2; ac_word=[$]2\n+AC_MSG_CHECKING([for $ac_word])\n+AC_CACHE_VAL(ac_cv_path_$1,\n+[case \"[$]$1\" in\n+  /*)\n+  ac_cv_path_$1=\"[$]$1\" # Let the user override the test with a path.\n+  ;;\n+  *)\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  for ac_dir in ifelse([$5], , $PATH, [$5]); do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      if [$3]; then\n+\tac_cv_path_$1=\"$ac_dir/$ac_word\"\n+\tbreak\n+      fi\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+dnl If no 4th arg is given, leave the cache variable unset,\n+dnl so AC_PATH_PROGS will keep looking.\n+ifelse([$4], , , [  test -z \"[$]ac_cv_path_$1\" && ac_cv_path_$1=\"$4\"\n+])dnl\n+  ;;\n+esac])dnl\n+$1=\"$ac_cv_path_$1\"\n+if test -n \"[$]$1\"; then\n+  AC_MSG_RESULT([$]$1)\n+else\n+  AC_MSG_RESULT(no)\n+fi\n+AC_SUBST($1)dnl\n+])\n+\n+# Check whether LC_MESSAGES is available in <locale.h>.\n+# Ulrich Drepper <drepper@cygnus.com>, 1995.\n+\n+# serial 1\n+\n+AC_DEFUN(AM_LC_MESSAGES,\n+  [if test $ac_cv_header_locale_h = yes; then\n+    AC_CACHE_CHECK([for LC_MESSAGES], am_cv_val_LC_MESSAGES,\n+      [AC_TRY_LINK([#include <locale.h>], [return LC_MESSAGES],\n+       am_cv_val_LC_MESSAGES=yes, am_cv_val_LC_MESSAGES=no)])\n+    if test $am_cv_val_LC_MESSAGES = yes; then\n+      AC_DEFINE(HAVE_LC_MESSAGES)\n+    fi\n+  fi])\n+\n+\n+# Like AC_CONFIG_HEADER, but automatically create stamp file.\n+\n+AC_DEFUN(AM_CONFIG_HEADER,\n+[AC_PREREQ([2.12])\n+AC_CONFIG_HEADER([$1])\n+dnl When config.status generates a header, we must update the stamp-h file.\n+dnl This file resides in the same directory as the config header\n+dnl that is generated.  We must strip everything past the first \":\",\n+dnl and everything past the last \"/\".\n+AC_OUTPUT_COMMANDS(changequote(<<,>>)dnl\n+ifelse(patsubst(<<$1>>, <<[^ ]>>, <<>>), <<>>,\n+<<test -z \"<<$>>CONFIG_HEADERS\" || echo timestamp > patsubst(<<$1>>, <<^\\([^:]*/\\)?.*>>, <<\\1>>)stamp-h<<>>dnl>>,\n+<<am_indx=1\n+for am_file in <<$1>>; do\n+  case \" <<$>>CONFIG_HEADERS \" in\n+  *\" <<$>>am_file \"*<<)>>\n+    echo timestamp > `echo <<$>>am_file | sed -e 's%:.*%%' -e 's%[^/]*$%%'`stamp-h$am_indx\n+    ;;\n+  esac\n+  am_indx=`expr \"<<$>>am_indx\" + 1`\n+done<<>>dnl>>)\n+changequote([,]))])\n+\n+# Do all the work for Automake.  This macro actually does too much --\n+# some checks are only needed if your package does certain things.\n+# But this isn't really a big deal.\n+\n+# serial 1\n+\n+dnl Usage:\n+dnl AM_INIT_AUTOMAKE(package,version, [no-define])\n+\n+AC_DEFUN(AM_INIT_AUTOMAKE,\n+[AC_REQUIRE([AM_PROG_INSTALL])\n+PACKAGE=[$1]\n+AC_SUBST(PACKAGE)\n+VERSION=[$2]\n+AC_SUBST(VERSION)\n+dnl test to see if srcdir already configured\n+if test \"`cd $srcdir && pwd`\" != \"`pwd`\" && test -f $srcdir/config.status; then\n+  AC_MSG_ERROR([source directory already configured; run \"make distclean\" there first])\n+fi\n+ifelse([$3],,\n+AC_DEFINE_UNQUOTED(PACKAGE, \"$PACKAGE\")\n+AC_DEFINE_UNQUOTED(VERSION, \"$VERSION\"))\n+AM_SANITY_CHECK\n+AC_ARG_PROGRAM\n+dnl FIXME This is truly gross.\n+missing_dir=`cd $ac_aux_dir && pwd`\n+AM_MISSING_PROG(ACLOCAL, aclocal, $missing_dir)\n+AM_MISSING_PROG(AUTOCONF, autoconf, $missing_dir)\n+AM_MISSING_PROG(AUTOMAKE, automake, $missing_dir)\n+AM_MISSING_PROG(AUTOHEADER, autoheader, $missing_dir)\n+AM_MISSING_PROG(MAKEINFO, makeinfo, $missing_dir)\n+AC_PROG_MAKE_SET])\n+\n+\n+# serial 1\n+\n+AC_DEFUN(AM_PROG_INSTALL,\n+[AC_REQUIRE([AC_PROG_INSTALL])\n+test -z \"$INSTALL_SCRIPT\" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'\n+AC_SUBST(INSTALL_SCRIPT)dnl\n+])\n+\n+#\n+# Check to make sure that the build environment is sane.\n+#\n+\n+AC_DEFUN(AM_SANITY_CHECK,\n+[AC_MSG_CHECKING([whether build environment is sane])\n+# Just in case\n+sleep 1\n+echo timestamp > conftestfile\n+# Do `set' in a subshell so we don't clobber the current shell's\n+# arguments.  Must try -L first in case configure is actually a\n+# symlink; some systems play weird games with the mod time of symlinks\n+# (eg FreeBSD returns the mod time of the symlink's containing\n+# directory).\n+if (\n+   set X `ls -Lt $srcdir/configure conftestfile 2> /dev/null`\n+   if test \"$@\" = \"X\"; then\n+      # -L didn't work.\n+      set X `ls -t $srcdir/configure conftestfile`\n+   fi\n+   test \"[$]2\" = conftestfile\n+   )\n+then\n+   # Ok.\n+   :\n+else\n+   AC_MSG_ERROR([newly created file is older than distributed files!\n+Check your system clock])\n+fi\n+rm -f conftest*\n+AC_MSG_RESULT(yes)])\n+\n+dnl AM_MISSING_PROG(NAME, PROGRAM, DIRECTORY)\n+dnl The program must properly implement --version.\n+AC_DEFUN(AM_MISSING_PROG,\n+[AC_MSG_CHECKING(for working $2)\n+# Run test in a subshell; some versions of sh will print an error if\n+# an executable is not found, even if stderr is redirected.\n+# Redirect stdin to placate older versions of autoconf.  Sigh.\n+if ($2 --version) < /dev/null > /dev/null 2>&1; then\n+   $1=$2\n+   AC_MSG_RESULT(found)\n+else\n+   $1=\"$3/missing $2\"\n+   AC_MSG_RESULT(missing)\n+fi\n+AC_SUBST($1)])\n+\n+# Add --enable-maintainer-mode option to configure.\n+# From Jim Meyering\n+\n+# serial 1\n+\n+AC_DEFUN(AM_MAINTAINER_MODE,\n+[AC_MSG_CHECKING([whether to enable maintainer-specific portions of Makefiles])\n+  dnl maintainer-mode is disabled by default\n+  AC_ARG_ENABLE(maintainer-mode,\n+[  --enable-maintainer-mode enable make rules and dependencies not useful\n+                          (and sometimes confusing) to the casual installer],\n+      USE_MAINTAINER_MODE=$enableval,\n+      USE_MAINTAINER_MODE=no)\n+  AC_MSG_RESULT($USE_MAINTAINER_MODE)\n+  if test $USE_MAINTAINER_MODE = yes; then\n+    MAINT=\n+  else\n+    MAINT='#M#'\n+  fi\n+  AC_SUBST(MAINT)dnl\n+]\n+)\n \n # Check to see if we're running under Win32, without using\n # AC_CANONICAL_*.  If so, set output variable EXEEXT to \".exe\".\n@@ -22,9 +495,9 @@ dnl This knows we add .exe if we're building in the Cygwin32\n dnl environment. But if we're not, then it compiles a test program\n dnl to see if there is a suffix for executables.\n AC_DEFUN(AM_EXEEXT,\n-dnl AC_REQUIRE([AC_PROG_CC])AC_REQUIRE([AM_CYGWIN32])\n+[AC_REQUIRE([AM_CYGWIN32])\n AC_MSG_CHECKING([for executable suffix])\n-[AC_CACHE_VAL(am_cv_exeext,\n+AC_CACHE_VAL(am_cv_exeext,\n [if test \"$CYGWIN32\" = yes; then\n am_cv_exeext=.exe\n else\n@@ -34,7 +507,7 @@ int main() {\n }\n EOF\n ${CC-cc} -o am_c_test $CFLAGS $CPPFLAGS $LDFLAGS am_c_test.c $LIBS 1>&5\n-am_cv_exeext=`ls am_c_test.* | grep -v am_c_test.c | sed -e s/am_c_test//`\n+am_cv_exeext=`echo am_c_test.* | grep -v am_c_test.c | sed -e s/am_c_test//`\n rm -f am_c_test*])\n test x\"${am_cv_exeext}\" = x && am_cv_exeext=no\n fi\n@@ -106,3 +579,17 @@ AC_SUBST(INSTALL_PROGRAM)dnl\n test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n AC_SUBST(INSTALL_DATA)dnl\n ])\n+\n+# Check to see if we're running under Cygwin32, without using\n+# AC_CANONICAL_*.  If so, set output variable CYGWIN32 to \"yes\".\n+# Otherwise set it to \"no\".\n+\n+dnl AM_CYGWIN32()\n+AC_DEFUN(AM_CYGWIN32,\n+[AC_CACHE_CHECK(for Cygwin32 environment, am_cv_cygwin32,\n+[AC_TRY_COMPILE(,[int main () { return __CYGWIN32__; }],\n+am_cv_cygwin32=yes, am_cv_cygwin32=no)\n+rm -f conftest*])\n+CYGWIN32=\n+test \"$am_cv_cygwin32\" = yes && CYGWIN32=yes])\n+"}, {"sha": "1a02a2bd9774f1e3901fe8fd35ccdbbfb0e0d3bb", "filename": "texinfo/configure", "status": "modified", "additions": 2363, "deletions": 231, "changes": 2594, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/texinfo%2Fconfigure?ref=f8b2ac1ece6a3f082b68d854059648e2a6cb3e43"}, {"sha": "ca9fcb1bd93996339e1a778c3918cfe1c6e9c74b", "filename": "texinfo/configure.in", "status": "modified", "additions": 48, "deletions": 11, "changes": 59, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/texinfo%2Fconfigure.in?ref=f8b2ac1ece6a3f082b68d854059648e2a6cb3e43", "patch": "@@ -1,48 +1,85 @@\n dnl Process this file with autoconf to produce a configure script.\n-dnl $Id: configure.in,v 1.2 1997/09/16 05:01:43 law Exp $\n-AC_PREREQ(2.5)\n-AC_INIT(texinfo.texi)\n+dnl $Id: configure.in,v 1.5 1998/03/24 18:05:13 law Exp $\n+dnl\n+AC_INIT(makeinfo/makeinfo.c)\n+AC_PREREQ(2.12)dnl Minimum Autoconf version required.\n+AM_CONFIG_HEADER(config.h)\n+\n+AM_INIT_AUTOMAKE([texinfo], [3.11])\n \n dnl Checks for programs.\n-dnl AC_PROG_GCC_TRADITIONAL\n+AC_PROG_CC\n+AC_PROG_GCC_TRADITIONAL\n EGCS_PROG_INSTALL\n AC_PROG_RANLIB\n \n+# We do this for the sake of a more helpful warning in doc/Makefile.\n+TEXMF='$(datadir)/texmf'\n+AC_CHECK_PROG(TEXCONFIG, texconfig, true, false)\n+$TEXCONFIG && eval `texconfig confall | grep '^TEXMF='`\n+AC_SUBST(TEXMF)\n+\n AC_ISC_POSIX\n AC_MINIX\n \n-AM_CYGWIN32\n+dnl CYGNUS LOCAL: Add AM_MAINTAINER_MODE and AM_EXEEXT\n+AM_MAINTAINER_MODE\n AM_EXEEXT\n \n dnl Checks for libraries.\n # Needed on sysV68 for sigblock, sigsetmask.\n AC_CHECK_LIB(bsd, sigblock)\n \n+# Some GNU/Linux systems (e.g., SuSE 4.3, 1996) don't have curses, but\n+# rather ncurses.  So we check for it.\n TERMLIBS=\n-for termlib in curses ncurses termcap terminfo termlib ; do\n+for termlib in ncurses curses termcap terminfo termlib ; do\n    AC_CHECK_LIB(${termlib}, tputs,\n      [TERMLIBS=\"${TERMLIBS} -l${termlib}\"; break])\n done\n AC_SUBST(TERMLIBS)\n \n dnl Checks for header files.\n AC_HEADER_STDC\n-AC_CHECK_HEADERS(unistd.h termios.h termio.h strings.h string.h varargs.h \\\n-  sys/time.h sys/fcntl.h sys/ttold.h sys/ptem.h sys/file.h)\n+AC_CHECK_HEADERS(fcntl.h pwd.h string.h strings.h termcap.h termio.h \\\n+  termios.h unistd.h \\\n+  sys/fcntl.h sys/file.h sys/ptem.h sys/time.h sys/ttold.h sys/wait.h)\n+\n+dnl Do not use <ncurses/termcap.h> unless we're linking with ncurses.\n+if test \"x$termlib\" = xncurses; then\n+  AC_CHECK_HEADER(ncurses/termcap.h)\n+fi\n \n dnl Checks for typedefs, structures, and compiler characteristics.\n AC_TYPE_OFF_T\n+AC_TYPE_SIGNAL\n AC_C_CONST\n AC_STRUCT_TM\n \n dnl Checks for library functions.\n AC_FUNC_ALLOCA\n+AC_FUNC_VPRINTF\n if test \"$ac_cv_c_cross\" = no; then\n   AC_FUNC_SETVBUF_REVERSED\n fi\n AC_CHECK_FUNCS(setvbuf getcwd memset bzero strchr strcasecmp \\\n-  vfprintf vsprintf strerror sigprocmask sigsetmask)\n+  sigprocmask sigsetmask)\n dnl strcasecmp, strerror, xmalloc, xrealloc, probably others should be added.\n-AC_REPLACE_FUNCS(memcpy memmove strdup)\n+AC_REPLACE_FUNCS(memcpy memmove strdup strerror)\n+\n+dnl Set of available languages and i18n macros.\n+ALL_LINGUAS=\"de fr\"\n+AM_GNU_GETTEXT\n+AC_LINK_FILES($nls_cv_header_libgt, $nls_cv_header_intl)\n \n-AC_OUTPUT(Makefile libtxi/Makefile makeinfo/Makefile info/Makefile util/Makefile emacs/Makefile)\n+AC_OUTPUT([Makefile             \\\n+           doc/Makefile         \\\n+           emacs/Makefile       \\\n+           info/Makefile        \\\n+           intl/Makefile        \\\n+           lib/Makefile         \\\n+           makeinfo/Makefile    \\\n+           po/Makefile.in       \\\n+           util/Makefile        \\\n+           ],\n+          [sed -e \"/POTFILES =/r po/POTFILES\" po/Makefile.in >po/Makefile])"}, {"sha": "d57b0d307199961c636c2b61ef43531d295b327c", "filename": "texinfo/info/man.c", "status": "modified", "additions": 129, "deletions": 138, "changes": 267, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Finfo%2Fman.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Finfo%2Fman.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/texinfo%2Finfo%2Fman.c?ref=f8b2ac1ece6a3f082b68d854059648e2a6cb3e43", "patch": "@@ -1,9 +1,7 @@\n-/*  man.c: How to read and format man files. */\n+/*  man.c: How to read and format man files.\n+    $Id: man.c,v 1.4 1998/03/22 21:47:54 law Exp $\n \n-/* This file is part of GNU Info, a program for reading online documentation\n-   stored in Info format.\n-\n-   Copyright (C) 1995 Free Software Foundation, Inc.\n+   Copyright (C) 1995, 97 Free Software Foundation, Inc.\n \n    This program is free software; you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n@@ -23,16 +21,15 @@\n \n #include \"info.h\"\n #include <sys/ioctl.h>\n-#include <sys/file.h>\n #include \"signals.h\"\n #if defined (HAVE_SYS_TIME_H)\n #include <sys/time.h>\n #endif\n #if defined (HAVE_SYS_WAIT_H)\n #include <sys/wait.h>\n #endif\n-#include \"tilde.h\"\n \n+#include \"tilde.h\"\n #include \"man.h\"\n \n #if !defined (SIGCHLD) && defined (SIGCLD)\n@@ -81,31 +78,31 @@ get_manpage_node (file_buffer, pagename)\n       page = get_manpage_contents (pagename);\n \n       if (page)\n-\t{\n-\t  char header[1024];\n-\t  long oldsize, newsize;\n-\t  int hlen, plen;\n-\n-\t  sprintf (header, \"\\n\\n%c\\n%s %s,  %s %s,  %s (dir)\\n\\n\",\n-\t\t   INFO_COOKIE,\n-\t\t   INFO_FILE_LABEL, file_buffer->filename,\n-\t\t   INFO_NODE_LABEL, pagename,\n-\t\t   INFO_UP_LABEL);\n-\t  oldsize = file_buffer->filesize;\n-\t  hlen = strlen (header);\n-\t  plen = strlen (page);\n-\t  newsize = (oldsize + hlen + plen);\n-\t  file_buffer->contents =\n-\t    (char *)xrealloc (file_buffer->contents, 1 + newsize);\n-\t  memcpy (file_buffer->contents + oldsize, header, hlen);\n-\t  oldsize += hlen;\n-\t  memcpy (file_buffer->contents + oldsize, page, plen);\n-\t  file_buffer->contents[newsize] = '\\0';\n-\t  file_buffer->filesize = newsize;\n-\t  file_buffer->finfo.st_size = newsize;\n-\t  build_tags_and_nodes (file_buffer);\n-\t  free (page);\n-\t}\n+        {\n+          char header[1024];\n+          long oldsize, newsize;\n+          int hlen, plen;\n+\n+          sprintf (header, \"\\n\\n%c\\n%s %s,  %s %s,  %s (dir)\\n\\n\",\n+                   INFO_COOKIE,\n+                   INFO_FILE_LABEL, file_buffer->filename,\n+                   INFO_NODE_LABEL, pagename,\n+                   INFO_UP_LABEL);\n+          oldsize = file_buffer->filesize;\n+          hlen = strlen (header);\n+          plen = strlen (page);\n+          newsize = (oldsize + hlen + plen);\n+          file_buffer->contents =\n+            (char *)xrealloc (file_buffer->contents, 1 + newsize);\n+          memcpy (file_buffer->contents + oldsize, header, hlen);\n+          oldsize += hlen;\n+          memcpy (file_buffer->contents + oldsize, page, plen);\n+          file_buffer->contents[newsize] = '\\0';\n+          file_buffer->filesize = newsize;\n+          file_buffer->finfo.st_size = newsize;\n+          build_tags_and_nodes (file_buffer);\n+          free (page);\n+        }\n \n       node = manpage_node_of_file_buffer (file_buffer, pagename);\n     }\n@@ -116,12 +113,9 @@ get_manpage_node (file_buffer, pagename)\n FILE_BUFFER *\n create_manpage_file_buffer ()\n {\n-  FILE_BUFFER *file_buffer;\n-  struct stat *finfo;\n-\n-  file_buffer = make_file_buffer ();\n-  file_buffer->filename = strdup (MANPAGE_FILE_BUFFER_NAME);\n-  file_buffer->fullpath = strdup (MANPAGE_FILE_BUFFER_NAME);\n+  FILE_BUFFER *file_buffer = make_file_buffer ();\n+  file_buffer->filename = xstrdup (MANPAGE_FILE_BUFFER_NAME);\n+  file_buffer->fullpath = xstrdup (MANPAGE_FILE_BUFFER_NAME);\n   file_buffer->finfo.st_size = 0;\n   file_buffer->filesize = 0;\n   file_buffer->contents = (char *)NULL;\n@@ -143,25 +137,24 @@ executable_file_in_path (filename, path)\n \n   dirname_index = 0;\n \n-  while (temp_dirname = extract_colon_unit (path, &dirname_index))\n+  while ((temp_dirname = extract_colon_unit (path, &dirname_index)))\n     {\n-      register int i;\n       char *temp;\n \n       /* Expand a leading tilde if one is present. */\n       if (*temp_dirname == '~')\n-\t{\n-\t  char *expanded_dirname;\n+        {\n+          char *expanded_dirname;\n \n-\t  expanded_dirname = tilde_expand_word (temp_dirname);\n-\t  free (temp_dirname);\n-\t  temp_dirname = expanded_dirname;\n-\t}\n+          expanded_dirname = tilde_expand_word (temp_dirname);\n+          free (temp_dirname);\n+          temp_dirname = expanded_dirname;\n+        }\n \n       temp = (char *)xmalloc (30 + strlen (temp_dirname) + strlen (filename));\n       strcpy (temp, temp_dirname);\n       if (temp[(strlen (temp)) - 1] != '/')\n-\tstrcat (temp, \"/\");\n+        strcat (temp, \"/\");\n       strcat (temp, filename);\n \n       free (temp_dirname);\n@@ -170,10 +163,10 @@ executable_file_in_path (filename, path)\n \n       /* If we have found a regular executable file, then use it. */\n       if ((statable) && (S_ISREG (finfo.st_mode)) &&\n-\t  (access (temp, X_OK) == 0))\n-\treturn (temp);\n+          (access (temp, X_OK) == 0))\n+        return (temp);\n       else\n-\tfree (temp);\n+        free (temp);\n     }\n   return ((char *)NULL);\n }\n@@ -227,7 +220,7 @@ static void\n reap_children (sig)\n      int sig;\n {\n-  unsigned int status;\n+  int status;\n   wait (&status);\n }\n \n@@ -239,7 +232,6 @@ get_manpage_contents (pagename)\n   int pipes[2];\n   pid_t child;\n   char *formatted_page = (char *)NULL;\n-  char *section = (char *)NULL;\n   int arg_index = 1;\n \n   if (formatter_args[0] == (char *)NULL)\n@@ -271,24 +263,24 @@ get_manpage_contents (pagename)\n   if (child != 0)\n     {\n       /* In the parent, close the writing end of the pipe, and read from\n-\t the exec'd child. */\n+         the exec'd child. */\n       close (pipes[1]);\n       formatted_page = read_from_fd (pipes[0]);\n       close (pipes[0]);\n     }\n   else\n     {\n       /* In the child, close the read end of the pipe, make the write end\n-\t of the pipe be stdout, and execute the man page formatter. */\n+         of the pipe be stdout, and execute the man page formatter. */\n       close (pipes[0]);\n       close (fileno (stderr));\n-      close (fileno (stdin));\t/* Don't print errors. */\n+      close (fileno (stdin));   /* Don't print errors. */\n       dup2 (pipes[1], fileno (stdout));\n \n       execv (formatter_args[0], formatter_args);\n \n       /* If we get here, we couldn't exec, so close out the pipe and\n-\t exit. */\n+         exit. */\n       close (pipes[1]);\n       exit (0);\n     }\n@@ -310,21 +302,21 @@ clean_manpage (manpage)\n \n   newpage = (char *)xmalloc (1 + strlen (manpage));\n \n-  for (i = 0, j = 0; newpage[j] = manpage[i]; i++, j++)\n+  for (i = 0, j = 0; (newpage[j] = manpage[i]); i++, j++)\n     {\n       if (manpage[i] == '\\n')\n-\tnewline_count++;\n+        newline_count++;\n       else\n-\tnewline_count = 0;\n+        newline_count = 0;\n \n       if (newline_count == 3)\n-\t{\n-\t  j--;\n-\t  newline_count--;\n-\t}\n+        {\n+          j--;\n+          newline_count--;\n+        }\n \n       if (manpage[i] == '\\b' || manpage[i] == '\\f')\n-\tj -= 2;\n+        j -= 2;\n     }\n \n   newpage[j++] = '\\0';\n@@ -345,11 +337,11 @@ manpage_node_of_file_buffer (file_buffer, pagename)\n     {\n       register int i;\n \n-      for (i = 0; tag = file_buffer->tags[i]; i++)\n-\t{\n-\t  if (strcasecmp (pagename, tag->nodename) == 0)\n-\t    break;\n-\t}\n+      for (i = 0; (tag = file_buffer->tags[i]); i++)\n+        {\n+          if (strcasecmp (pagename, tag->nodename) == 0)\n+            break;\n+        }\n     }\n \n   if (tag)\n@@ -465,7 +457,7 @@ find_reference_section (node)\n     {\n       position = search_forward (reference_section_starters[i], &frs_binding);\n       if (position != -1)\n-\tbreak;\n+        break;\n     }\n \n   if (position == -1)\n@@ -479,11 +471,11 @@ find_reference_section (node)\n   for (i = frs_binding.start; i < frs_binding.end - 2; i++)\n     {\n       if ((frs_binding.buffer[i] == '\\n') &&\n-\t  (!whitespace (frs_binding.buffer[i + 1])))\n-\t{\n-\t  frs_binding.end = i;\n-\t  break;\n-\t}\n+          (!whitespace (frs_binding.buffer[i + 1])))\n+        {\n+          frs_binding.end = i;\n+          break;\n+        }\n     }\n \n   return (&frs_binding);\n@@ -514,43 +506,43 @@ xrefs_of_manpage (node)\n       register int start, end;\n \n       for (start = position; start > reference_section->start; start--)\n-\tif (whitespace (reference_section->buffer[start]))\n-\t  break;\n+        if (whitespace (reference_section->buffer[start]))\n+          break;\n \n       start++;\n \n       for (end = position; end < reference_section->end; end++)\n-\t{\n-\t  if (whitespace (reference_section->buffer[end]))\n-\t    {\n-\t      end = start;\n-\t      break;\n-\t    }\n-\n-\t  if (reference_section->buffer[end] == ')')\n-\t    {\n-\t      end++;\n-\t      break;\n-\t    }\n-\t}\n+        {\n+          if (whitespace (reference_section->buffer[end]))\n+            {\n+              end = start;\n+              break;\n+            }\n+\n+          if (reference_section->buffer[end] == ')')\n+            {\n+              end++;\n+              break;\n+            }\n+        }\n \n       if (end != start)\n-\t{\n-\t  REFERENCE *entry;\n-\t  int len = end - start;\n-\n-\t  entry = (REFERENCE *)xmalloc (sizeof (REFERENCE));\n-\t  entry->label = (char *)xmalloc (1 + len);\n-\t  strncpy (entry->label, (reference_section->buffer) + start, len);\n-\t  entry->label[len] = '\\0';\n-\t  entry->filename = strdup (node->filename);\n-\t  entry->nodename = strdup (entry->label);\n-\t  entry->start = start;\n-\t  entry->end = end;\n-\n-\t  add_pointer_to_array\n-\t    (entry, refs_index, refs, refs_slots, 10, REFERENCE *);\n-\t}\n+        {\n+          REFERENCE *entry;\n+          int len = end - start;\n+\n+          entry = (REFERENCE *)xmalloc (sizeof (REFERENCE));\n+          entry->label = (char *)xmalloc (1 + len);\n+          strncpy (entry->label, (reference_section->buffer) + start, len);\n+          entry->label[len] = '\\0';\n+          entry->filename = xstrdup (node->filename);\n+          entry->nodename = xstrdup (entry->label);\n+          entry->start = start;\n+          entry->end = end;\n+\n+          add_pointer_to_array\n+            (entry, refs_index, refs, refs_slots, 10, REFERENCE *);\n+        }\n \n       reference_section->start = position + 1;\n     }\n@@ -564,7 +556,6 @@ locate_manpage_xref (node, start, dir)\n      long start;\n      int dir;\n {\n-  register int i, count;\n   REFERENCE **refs;\n   long position = -1;\n \n@@ -579,27 +570,27 @@ locate_manpage_xref (node, start, dir)\n       count = i;\n \n       if (dir > 0)\n-\t{\n-\t  for (i = 0; entry = refs[i]; i++)\n-\t    if (entry->start > start)\n-\t      {\n-\t\tposition = entry->start;\n-\t\tbreak;\n-\t      }\n-\t}\n+        {\n+          for (i = 0; (entry = refs[i]); i++)\n+            if (entry->start > start)\n+              {\n+                position = entry->start;\n+                break;\n+              }\n+        }\n       else\n-\t{\n-\t  for (i = count - 1; i > -1; i--)\n-\t    {\n-\t      entry = refs[i];\n-\n-\t      if (entry->start < start)\n-\t\t{\n-\t\t  position = entry->start;\n-\t\t  break;\n-\t\t}\n-\t    }\n-\t}\n+        {\n+          for (i = count - 1; i > -1; i--)\n+            {\n+              entry = refs[i];\n+\n+              if (entry->start < start)\n+                {\n+                  position = entry->start;\n+                  break;\n+                }\n+            }\n+        }\n \n       info_free_references (refs);\n     }\n@@ -628,20 +619,20 @@ manpage_xrefs_in_binding (node, binding)\n   start = binding->start + (binding->buffer - node->contents);\n   end = binding->end + (binding->buffer - node->contents);\n \n-  for (i = 0; entry = all_refs[i]; i++)\n+  for (i = 0; (entry = all_refs[i]); i++)\n     {\n       if ((entry->start > start) && (entry->end < end))\n-\t{\n-\t  add_pointer_to_array\n-\t    (entry, brefs_index, brefs, brefs_slots, 10, REFERENCE *);\n-\t}\n+        {\n+          add_pointer_to_array\n+            (entry, brefs_index, brefs, brefs_slots, 10, REFERENCE *);\n+        }\n       else\n-\t{\n-\t  maybe_free (entry->label);\n-\t  maybe_free (entry->filename);\n-\t  maybe_free (entry->nodename);\n-\t  free (entry);\n-\t}\n+        {\n+          maybe_free (entry->label);\n+          maybe_free (entry->filename);\n+          maybe_free (entry->nodename);\n+          free (entry);\n+        }\n     }\n \n   free (all_refs);"}, {"sha": "09c03e2f91386e08ee370b7cf4a5c80bbabea5c1", "filename": "texinfo/info/termdep.h", "status": "modified", "additions": 15, "deletions": 34, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Finfo%2Ftermdep.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Finfo%2Ftermdep.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/texinfo%2Finfo%2Ftermdep.h?ref=f8b2ac1ece6a3f082b68d854059648e2a6cb3e43", "patch": "@@ -1,10 +1,10 @@\n /* termdep.h -- System things that terminal.c depends on.\n-   $Id: termdep.h,v 1.2 1997/10/30 05:55:14 law Exp $\n+   $Id: termdep.h,v 1.4 1998/03/24 18:06:50 law Exp $\n \n    This file is part of GNU Info, a program for reading online documentation\n    stored in Info format.\n \n-   Copyright (C) 1993, 96 Free Software Foundation, Inc.\n+   Copyright (C) 1993, 96, 97 Free Software Foundation, Inc.\n \n    This program is free software; you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n@@ -22,33 +22,21 @@\n \n    Written by Brian Fox (bfox@ai.mit.edu). */\n \n-#if !defined (_TERMDEP_H_)\n-#  define _TERMDEP_H_\n+#ifndef INFO_TERMDEP_H\n+#define INFO_TERMDEP_H\n \n-#if defined (HAVE_SYS_FCNTL_H)\n-#  include <sys/fcntl.h>\n-#else\n-#  include <fcntl.h>\n-#endif /* !HAVE_SYS_FCNTL_H */\n-\n-#if defined (HAVE_SYS_FILE_H)\n-#  include <sys/file.h>\n-#endif /* HAVE_SYS_FILE_H */\n-\n-#if defined (HAVE_STRINGS_H)\n-#  include <strings.h>\n-#else\n-#  if defined (HAVE_STRING_H)\n-#    include <string.h>\n-#  endif\n+/* NeXT supplies <termios.h> but it is broken.  Probably Autoconf should\n+   have a separate test, but anyway ... */\n+#ifdef NeXT\n+#undef HAVE_TERMIOS_H\n #endif\n \n-#if defined (HAVE_TERMIOS_H)\n+#ifdef HAVE_TERMIOS_H\n #  include <termios.h>\n-/* \n- * POSIX does not mandate that we have these and it may, in fact, be only\n- * partially implemented \n- */\n+ /*\n+    POSIX does not mandate that we have these and it may, in fact, be only\n+    partially implemented.\n+  */\n #  undef TIOCGETC\n #else\n #  if defined (HAVE_TERMIO_H)\n@@ -67,15 +55,8 @@\n #  endif /* !HAVE_TERMIO_H */\n #endif /* !HAVE_TERMIOS_H */\n \n-#if defined (HAVE_SYS_TTOLD_H)\n+#ifdef HAVE_SYS_TTOLD_H\n #  include <sys/ttold.h>\n #endif /* HAVE_SYS_TTOLD_H */\n \n-#if !defined (HAVE_STRCHR)\n-#  undef strchr\n-#  undef strrchr\n-#  define strchr index\n-#  define strrchr rindex\n-#endif /* !HAVE_STRCHR */\n-\n-#endif /* _TERMDEP_H_ */\n+#endif /* not INFO_TERMDEP_H */"}, {"sha": "9b90e5de9e15e546c5e2df1362a7008bba79e0f6", "filename": "texinfo/info/terminal.c", "status": "modified", "additions": 137, "deletions": 88, "changes": 225, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Finfo%2Fterminal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Finfo%2Fterminal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/texinfo%2Finfo%2Fterminal.c?ref=f8b2ac1ece6a3f082b68d854059648e2a6cb3e43", "patch": "@@ -1,12 +1,8 @@\n-/* terminal.c -- How to handle the physical terminal for Info. */\n+/* terminal.c -- How to handle the physical terminal for Info.\n+   $Id: terminal.c,v 1.4 1998/03/24 18:06:53 law Exp $\n \n-/* This file is part of GNU Info, a program for reading online documentation\n-   stored in Info format.\n-\n-   This file has appeared in prior works by the Free Software Foundation;\n-   thus it carries copyright dates from 1988 through 1993.\n-\n-   Copyright (C) 1988, 89, 90, 91, 92, 93, 96 Free Software Foundation, Inc.\n+   Copyright (C) 1988, 89, 90, 91, 92, 93, 96, 97 Free Software\n+   Foundation, Inc.\n \n    This program is free software; you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n@@ -24,19 +20,33 @@\n \n    Written by Brian Fox (bfox@ai.mit.edu). */\n \n-#include <stdio.h>\n-#include <sys/types.h>\n+#include \"info.h\"\n #include \"terminal.h\"\n #include \"termdep.h\"\n \n-extern void *xmalloc (), *xrealloc ();\n+#include <sys/types.h>\n+#include <signal.h>\n \n /* The Unix termcap interface code. */\n+#ifdef HAVE_NCURSES_TERMCAP_H\n+#include <ncurses/termcap.h>\n+#else\n+#ifdef HAVE_TERMCAP_H\n+#include <termcap.h>\n+#else\n+/* On Solaris2, sys/types.h #includes sys/reg.h, which #defines PC.\n+   Unfortunately, PC is a global variable used by the termcap library. */\n+#undef PC\n \n+/* Termcap requires these variables, whether we access them or not. */\n+char *BC, *UP;\n+char PC;      /* Pad character */\n+short ospeed; /* Terminal output baud rate */\n extern int tgetnum (), tgetflag (), tgetent ();\n extern char *tgetstr (), *tgoto ();\n-extern char *getenv ();\n extern void tputs ();\n+#endif /* not HAVE_TERMCAP_H */\n+#endif /* not HAVE_NCURSES_TERMCAP_H */\n \n /* Function \"hooks\".  If you make one of these point to a function, that\n    function is called when appropriate instead of its namesake.  Your\n@@ -60,20 +70,11 @@ VFunction *terminal_write_chars_hook = (VFunction *)NULL;\n VFunction *terminal_scroll_terminal_hook = (VFunction *)NULL;\n \n /* **************************************************************** */\n-/*\t\t\t\t\t\t\t\t    */\n-/*\t\t\tTerminal and Termcap\t\t\t    */\n-/*\t\t\t\t\t\t\t\t    */\n+/*                                                                  */\n+/*                      Terminal and Termcap                        */\n+/*                                                                  */\n /* **************************************************************** */\n \n-/* On Solaris2, sys/types.h #includes sys/reg.h, which #defines PC.\n-   Unfortunately, PC is a global variable used by the termcap library. */\n-#undef PC\n-\n-/* TERMCAP requires these variables, whether we access them or not. */\n-char PC;\n-char *BC, *UP;\n-short ospeed;\n-\n /* A buffer which holds onto the current terminal description, and a pointer\n    used to float within it. */\n static char *term_buffer = (char *)NULL;\n@@ -84,6 +85,8 @@ static char *term_goto, *term_clreol, *term_cr, *term_clrpag;\n static char *term_begin_use, *term_end_use;\n static char *term_AL, *term_DL, *term_al, *term_dl;\n \n+static char *term_keypad_on, *term_keypad_off;\n+\n /* How to go up a line. */\n static char *term_up;\n \n@@ -108,11 +111,15 @@ static char *term_invbeg;\n /* The string to turn off inverse mode, if this term has one. */\n static char *term_invend;\n \n-static void\n+/* Although I can't find any documentation that says this is supposed to\n+   return its argument, all the code I've looked at (termutils, less)\n+   does so, so fine.  */\n+static int\n output_character_function (c)\n      int c;\n {\n   putc (c, stdout);\n+  return c;\n }\n \n /* Macro to send STRING to the terminal. */\n@@ -122,25 +129,53 @@ output_character_function (c)\n       tputs (string, 1, output_character_function); \\\n      } while (0)\n \n-/* Tell the terminal that we will be doing cursor addressable motion. */\n+/* Tell the terminal that we will be doing cursor addressable motion.  */\n static void\n terminal_begin_using_terminal ()\n {\n+  RETSIGTYPE (*sigsave) ();\n+\n+  if (term_keypad_on)\n+      send_to_terminal (term_keypad_on);\n+  \n+  if (!term_begin_use || !*term_begin_use)\n+    return;\n+\n+  sigsave = signal (SIGWINCH, SIG_IGN); \n   send_to_terminal (term_begin_use);\n+  /* Without this fflush and sleep, running info in a shelltool or\n+     cmdtool (TERM=sun-cmd) with scrollbars loses -- the scrollbars are\n+     not restored properly.\n+     From: strube@physik3.gwdg.de (Hans Werner Strube).  */\n+  fflush (stdout);\n+  sleep (1);\n+  signal (SIGWINCH, sigsave);\n }\n \n-/* Tell the terminal that we will not be doing any more cursor addressable\n-   motion. */\n+/* Tell the terminal that we will not be doing any more cursor\n+   addressable motion. */\n static void\n terminal_end_using_terminal ()\n {\n+  RETSIGTYPE (*sigsave) ();\n+\n+  if (term_keypad_off)\n+      send_to_terminal (term_keypad_off);\n+  \n+  if (!term_end_use || !*term_end_use)\n+    return;\n+\n+  sigsave = signal (SIGWINCH, SIG_IGN);\n   send_to_terminal (term_end_use);\n+  fflush (stdout);\n+  sleep (1);\n+  signal (SIGWINCH, sigsave);\n }\n \f\n /* **************************************************************** */\n-/*\t\t\t\t\t\t\t\t    */\n-/*\t\t     Necessary Terminal Functions\t\t    */\n-/*\t\t\t\t\t\t\t\t    */\n+/*                                                                  */\n+/*                   Necessary Terminal Functions                   */\n+/*                                                                  */\n /* **************************************************************** */\n \n /* The functions and variables on this page implement the user visible\n@@ -169,6 +204,8 @@ char *term_ku = (char *)NULL;\n char *term_kd = (char *)NULL;\n char *term_kr = (char *)NULL;\n char *term_kl = (char *)NULL;\n+char *term_kP = (char *)NULL;   /* page-up */\n+char *term_kN = (char *)NULL;   /* page-down */\n \n /* Move the cursor to the terminal location of X and Y. */\n void\n@@ -180,7 +217,7 @@ terminal_goto_xy (x, y)\n   else\n     {\n       if (term_goto)\n-\ttputs (tgoto (term_goto, x, y), 1, output_character_function);\n+        tputs (tgoto (term_goto, x, y), 1, output_character_function);\n     }\n }\n \n@@ -208,7 +245,7 @@ terminal_write_chars (string, nchars)\n   else\n     {\n       if (nchars)\n-\tfwrite (string, 1, nchars, stdout);\n+        fwrite (string, 1, nchars, stdout);\n     }\n }\n \n@@ -294,9 +331,9 @@ terminal_ring_bell ()\n   else\n     {\n       if (terminal_has_visible_bell_p && terminal_use_visible_bell_p)\n-\tsend_to_terminal (visible_bell);\n+        send_to_terminal (visible_bell);\n       else\n-\tsend_to_terminal (audible_bell);\n+        send_to_terminal (audible_bell);\n     }\n }\n \n@@ -318,7 +355,7 @@ terminal_delete_lines (start, count)\n   else\n     {\n       while (count--)\n-\ttputs (term_dl, lines, output_character_function);\n+        tputs (term_dl, lines, output_character_function);\n     }\n \n   fflush (stdout);\n@@ -343,7 +380,7 @@ terminal_insert_lines (start, count)\n   else\n     {\n       while (count--)\n-\ttputs (term_al, lines, output_character_function);\n+        tputs (term_al, lines, output_character_function);\n     }\n \n   fflush (stdout);\n@@ -369,22 +406,22 @@ terminal_scroll_terminal (start, end, amount)\n   else\n     {\n       /* If we are scrolling down, delete AMOUNT lines at END.  Then insert\n-\t AMOUNT lines at START. */\n+         AMOUNT lines at START. */\n       if (amount > 0)\n-\t{\n-\t  terminal_delete_lines (end, amount);\n-\t  terminal_insert_lines (start, amount);\n-\t}\n+        {\n+          terminal_delete_lines (end, amount);\n+          terminal_insert_lines (start, amount);\n+        }\n \n       /* If we are scrolling up, delete AMOUNT lines before START.  This\n-\t actually does the upwards scroll.  Then, insert AMOUNT lines\n-\t after the already scrolled region (i.e., END - AMOUNT). */\n+         actually does the upwards scroll.  Then, insert AMOUNT lines\n+         after the already scrolled region (i.e., END - AMOUNT). */\n       if (amount < 0)\n-\t{\n-\t  int abs_amount = -amount;\n-\t  terminal_delete_lines (start - abs_amount, abs_amount);\n-\t  terminal_insert_lines (end - abs_amount, abs_amount);\n-\t}\n+        {\n+          int abs_amount = -amount;\n+          terminal_delete_lines (start - abs_amount, abs_amount);\n+          terminal_insert_lines (end - abs_amount, abs_amount);\n+        }\n     }\n }\n \n@@ -414,55 +451,55 @@ terminal_get_screen_size ()\n \n #if defined (TIOCGWINSZ)\n       {\n-\tstruct winsize window_size;\n+        struct winsize window_size;\n \n-\tif (ioctl (fileno (stdout), TIOCGWINSZ, &window_size) == 0)\n-\t  {\n-\t    screenwidth = (int) window_size.ws_col;\n-\t    screenheight = (int) window_size.ws_row;\n-\t  }\n+        if (ioctl (fileno (stdout), TIOCGWINSZ, &window_size) == 0)\n+          {\n+            screenwidth = (int) window_size.ws_col;\n+            screenheight = (int) window_size.ws_row;\n+          }\n       }\n-#endif\t\t\t\t/* TIOCGWINSZ */\n+#endif                          /* TIOCGWINSZ */\n \n       /* Environment variable COLUMNS overrides setting of \"co\". */\n       if (screenwidth <= 0)\n-\t{\n-\t  char *sw = getenv (\"COLUMNS\");\n+        {\n+          char *sw = getenv (\"COLUMNS\");\n \n-\t  if (sw)\n-\t    screenwidth = atoi (sw);\n+          if (sw)\n+            screenwidth = atoi (sw);\n \n-\t  if (screenwidth <= 0)\n-\t    screenwidth = tgetnum (\"co\");\n-\t}\n+          if (screenwidth <= 0)\n+            screenwidth = tgetnum (\"co\");\n+        }\n \n       /* Environment variable LINES overrides setting of \"li\". */\n       if (screenheight <= 0)\n-\t{\n-\t  char *sh = getenv (\"LINES\");\n+        {\n+          char *sh = getenv (\"LINES\");\n \n-\t  if (sh)\n-\t    screenheight = atoi (sh);\n+          if (sh)\n+            screenheight = atoi (sh);\n \n-\t  if (screenheight <= 0)\n-\t    screenheight = tgetnum (\"li\");\n-\t}\n+          if (screenheight <= 0)\n+            screenheight = tgetnum (\"li\");\n+        }\n \n       /* If all else fails, default to 80x24 terminal. */\n       if (screenwidth <= 0)\n-\tscreenwidth = 80;\n+        screenwidth = 80;\n \n       if (screenheight <= 0)\n-\tscreenheight = 24;\n+        screenheight = 24;\n     }\n }\n \n-/* Initialize the terminal which is known as TERMINAL_NAME.  If this terminal\n-   doesn't have cursor addressability, TERMINAL_IS_DUMB_P becomes non-zero.\n-   The variables SCREENHEIGHT and SCREENWIDTH are set to the dimensions that\n-   this terminal actually has.  The variable TERMINAL_HAS_META_P becomes non-\n-   zero if this terminal supports a Meta key.  Finally, the terminal screen is\n-   cleared. */\n+/* Initialize the terminal which is known as TERMINAL_NAME.  If this\n+   terminal doesn't have cursor addressability, `terminal_is_dumb_p'\n+   becomes nonzero.  The variables SCREENHEIGHT and SCREENWIDTH are set\n+   to the dimensions that this terminal actually has.  The variable\n+   TERMINAL_HAS_META_P becomes nonzero if this terminal supports a Meta\n+   key.  Finally, the terminal screen is cleared. */\n void\n terminal_initialize_terminal (terminal_name)\n      char *terminal_name;\n@@ -500,6 +537,7 @@ terminal_initialize_terminal (terminal_name)\n       term_cr = \"\\r\";\n       term_up = term_dn = audible_bell = visible_bell = (char *)NULL;\n       term_ku = term_kd = term_kl = term_kr = (char *)NULL;\n+      term_kP = term_kN = (char *)NULL;\n       return;\n     }\n \n@@ -517,7 +555,7 @@ terminal_initialize_terminal (terminal_name)\n   }\n #else\n   ospeed = B9600;\n-#endif\t\t\t\t/* !TIOCGETP */\n+#endif                          /* !TIOCGETP */\n \n   term_cr = tgetstr (\"cr\", &buffer);\n   term_clreol = tgetstr (\"ce\", &buffer);\n@@ -553,6 +591,9 @@ terminal_initialize_terminal (terminal_name)\n   term_begin_use = tgetstr (\"ti\", &buffer);\n   term_end_use = tgetstr (\"te\", &buffer);\n \n+  term_keypad_on = tgetstr (\"ks\", &buffer);\n+  term_keypad_off = tgetstr (\"ke\", &buffer);\n+\n   /* Check to see if this terminal has a meta key. */\n   terminal_has_meta_p = (tgetflag (\"km\") || tgetflag (\"MT\"));\n   if (terminal_has_meta_p)\n@@ -572,17 +613,18 @@ terminal_initialize_terminal (terminal_name)\n   term_kr = tgetstr (\"kr\", &buffer);\n   term_kl = tgetstr (\"kl\", &buffer);\n \n+  term_kP = tgetstr (\"kP\", &buffer);\n+  term_kN = tgetstr (\"kN\", &buffer);\n+\n   /* If this terminal is not cursor addressable, then it is really dumb. */\n   if (!term_goto)\n     terminal_is_dumb_p = 1;\n-\n-  terminal_begin_using_terminal ();\n }\n \f\n /* **************************************************************** */\n-/*\t\t\t\t\t\t\t\t    */\n-/*\t\t How to Read Characters From the Terminal\t    */\n-/*\t\t\t\t\t\t\t\t    */\n+/*                                                                  */\n+/*               How to Read Characters From the Terminal           */\n+/*                                                                  */\n /* **************************************************************** */\n \n #if defined (TIOCGETC)\n@@ -623,6 +665,8 @@ terminal_prep_terminal ()\n       return;\n     }\n \n+  terminal_begin_using_terminal ();\n+\n   tty = fileno (stdin);\n \n #if defined (HAVE_TERMIOS_H)\n@@ -655,7 +699,12 @@ terminal_prep_terminal ()\n \n   if (ttybuff.c_cc[VQUIT] == '\\177')\n     ttybuff.c_cc[VQUIT] = -1;\n-#endif\n+\n+#ifdef VLNEXT\n+  if (ttybuff.c_cc[VLNEXT] == '\\026')\n+    ttybuff.c_cc[VLNEXT] = -1;\n+#endif /* VLNEXT */\n+#endif /* TERMIOS or TERMIO */\n \n #if defined (HAVE_TERMIOS_H)\n   tcsetattr (tty, TCSANOW, &ttybuff);\n@@ -719,9 +768,9 @@ terminal_prep_terminal ()\n     temp = original_ltchars;\n \n     /* Make the interrupt keys go away.  Just enough to make people happy. */\n-    temp.t_lnextc = -1;\t\t/* C-v. */\n-    temp.t_dsuspc = -1;\t\t/* C-y. */\n-    temp.t_flushc = -1;\t\t/* C-o. */\n+    temp.t_lnextc = -1;         /* C-v. */\n+    temp.t_dsuspc = -1;         /* C-y. */\n+    temp.t_flushc = -1;         /* C-o. */\n     ioctl (tty, TIOCSLTC, &temp);\n   }\n #  endif /* TIOCGLTC */"}, {"sha": "aab04722fafdf2a592d1ac7dbea5cc7e14948295", "filename": "texinfo/makeinfo/makeinfo.c", "status": "modified", "additions": 3212, "deletions": 2972, "changes": 6184, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Fmakeinfo%2Fmakeinfo.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Fmakeinfo%2Fmakeinfo.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/texinfo%2Fmakeinfo%2Fmakeinfo.c?ref=f8b2ac1ece6a3f082b68d854059648e2a6cb3e43"}, {"sha": "6007a3cbd311ad2de7d6736ba21c645911051bbc", "filename": "texinfo/util/install-info.c", "status": "modified", "additions": 118, "deletions": 99, "changes": 217, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Futil%2Finstall-info.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8b2ac1ece6a3f082b68d854059648e2a6cb3e43/texinfo%2Futil%2Finstall-info.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/texinfo%2Futil%2Finstall-info.c?ref=f8b2ac1ece6a3f082b68d854059648e2a6cb3e43", "patch": "@@ -1,56 +1,30 @@\n /* install-info -- create Info directory entry(ies) for an Info file.\n-   Copyright (C) 1996 Free Software Foundation, Inc.\n+   $Id: install-info.c,v 1.5 1998/03/24 18:08:44 law Exp $\n \n-$Id: install-info.c,v 1.3 1997/09/18 05:54:18 law Exp $\n+   Copyright (C) 1996, 97 Free Software Foundation, Inc.\n \n-This program is free software; you can redistribute it and/or modify\n-it under the terms of the GNU General Public License as published by\n-the Free Software Foundation; either version 2 of the License, or\n-(at your option) any later version.\n+   This program is free software; you can redistribute it and/or modify\n+   it under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 2 of the License, or\n+   (at your option) any later version.\n \n-This program is distributed in the hope that it will be useful,\n-but WITHOUT ANY WARRANTY; without even the implied warranty of\n-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-GNU General Public License for more details.\n+   This program is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+   GNU General Public License for more details.\n \n-You should have received a copy of the GNU General Public License\n-along with this program; if not, write to the Free Software\n-Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */\n+   You should have received a copy of the GNU General Public License\n+   along with this program; if not, write to the Free Software\n+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.*/\n \n-#define INSTALL_INFO_VERSION_STRING \"GNU install-info (Texinfo 3.9) 1.2\"\n-\n-#include <stdio.h>\n-#include <errno.h>\n+#include \"system.h\"\n #include <getopt.h>\n-#include <sys/types.h>\n-\n-#if defined (HAVE_STRING_H)\n-#include <string.h>\n-#else\n-#include <strings.h>\n-#endif /* !HAVE_STRING_H */\n-\n-#if !defined (HAVE_STRCHR)\n-char *strrchr ();\n-#endif /* !HAVE_STRCHR */\n-\n-\n-/* Get O_RDONLY.  */\n-#ifdef HAVE_SYS_FCNTL_H\n-#include <sys/fcntl.h>\n-#else\n-#include <fcntl.h>\n-#endif /* !HAVE_SYS_FCNTL_H */\n-#ifdef HAVE_SYS_FILE_H\n-#include <sys/file.h>\n-#endif\n \n /* Name this program was invoked with.  */\n char *progname;\n \n char *readfile ();\n struct line_data *findlines ();\n-char *my_strerror ();\n void fatal ();\n void insert_entry_here ();\n int compare_section_names ();\n@@ -59,9 +33,8 @@ struct spec_entry;\n \f\n /* Data structures.  */\n \n-/* Record info about a single line from a file\n-   as read into core.  */\n \n+/* Record info about a single line from a file as read into core.  */\n struct line_data\n {\n   /* The start of the line.  */\n@@ -78,9 +51,9 @@ struct line_data\n   int delete;\n };\n \n+\n /* This is used for a list of the specified menu section names\n    in which entries should be added.  */\n-\n struct spec_section\n {\n   struct spec_section *next;\n@@ -90,16 +63,16 @@ struct spec_section\n   int missing;\n };\n \n-/* This is used for a list of the entries specified to be added.  */\n \n+/* This is used for a list of the entries specified to be added.  */\n struct spec_entry\n {\n   struct spec_entry *next;\n   char *text;\n };\n-\f\n-/* This is used for a list of nodes found by parsing the dir file.  */\n \n+\n+/* This is used for a list of nodes found by parsing the dir file.  */\n struct node\n {\n   struct node *next;\n@@ -120,9 +93,9 @@ struct node\n   struct menu_section *last_section;\n };\n \n+\n /* This is used for a list of sections found in a node's menu.\n    Each  struct node  has such a list in the  sections  field.  */\n-\n struct menu_section\n {\n   struct menu_section *next;\n@@ -136,20 +109,18 @@ struct menu_section\n /* Memory allocation and string operations.  */\n \n /* Like malloc but get fatal error if memory is exhausted.  */\n-\n void *\n xmalloc (size)\n      unsigned int size;\n {\n   extern void *malloc ();\n   void *result = malloc (size);\n   if (result == NULL)\n-    fatal (\"virtual memory exhausted\", 0);\n+    fatal (_(\"virtual memory exhausted\"), 0);\n   return result;\n }\n \n-/* Like malloc but get fatal error if memory is exhausted.  */\n-\n+/* Like realloc but get fatal error if memory is exhausted.  */\n void *\n xrealloc (obj, size)\n      void *obj;\n@@ -158,12 +129,12 @@ xrealloc (obj, size)\n   extern void *realloc ();\n   void *result = realloc (obj, size);\n   if (result == NULL)\n-    fatal (\"virtual memory exhausted\", 0);\n+    fatal (_(\"virtual memory exhausted\"), 0);\n   return result;\n }\n \n-/* Return a newly-allocated string whose contents concatenate those of s1, s2, s3.  */\n-\n+/* Return a newly-allocated string\n+   whose contents concatenate those of S1, S2, S3.  */\n char *\n concat (s1, s2, s3)\n      char *s1, *s2, *s3;\n@@ -197,7 +168,7 @@ copy_string (string, size)\n \f\n /* Error message functions.  */\n \n-/* Print error message.  `s1' is printf control string, `s2' is arg for it. */\n+/* Print error message.  S1 is printf control string, S2 and S3 args for it. */\n \n /* VARARGS1 */\n void\n@@ -206,17 +177,17 @@ error (s1, s2, s3)\n {\n   fprintf (stderr, \"%s: \", progname);\n   fprintf (stderr, s1, s2, s3);\n-  fprintf (stderr, \"\\n\");\n+  putc ('\\n', stderr);\n }\n \n /* VARARGS1 */\n void\n warning (s1, s2, s3)\n      char *s1, *s2, *s3;\n {\n-  fprintf (stderr, \"%s: Warning: \", progname);\n+  fprintf (stderr, _(\"%s: warning: \"), progname);\n   fprintf (stderr, s1, s2, s3);\n-  fprintf (stderr, \"\\n\");\n+  putc ('\\n', stderr);\n }\n \n /* Print error message and exit.  */\n@@ -235,7 +206,7 @@ void\n pfatal_with_name (name)\n      char *name;\n {\n-  char *s = concat (\"\", my_strerror (errno), \" for %s\");\n+  char *s = concat (\"\", strerror (errno), _(\" for %s\"));\n   fatal (s, name);\n }\n \f\n@@ -304,15 +275,15 @@ extract_menu_file_name (item_text)\n void\n suggest_asking_for_help ()\n {\n-  fprintf (stderr, \"\\tTry `%s --help' for a complete list of options.\\n\",\n+  fprintf (stderr, _(\"\\tTry `%s --help' for a complete list of options.\\n\"),\n            progname);\n   exit (1);\n }\n \n void\n print_help ()\n {\n-  printf (\"%s [OPTION]... [INFO-FILE [DIR-FILE]]\\n\\\n+  printf (_(\"%s [OPTION]... [INFO-FILE [DIR-FILE]]\\n\\\n   Install INFO-FILE in the Info directory file DIR-FILE.\\n\\\n \\n\\\n Options:\\n\\\n@@ -342,27 +313,54 @@ Options:\\n\\\n --version         Display version information and exit.\\n\\\n \\n\\\n Email bug reports to bug-texinfo@prep.ai.mit.edu.\\n\\\n-\", progname);\n+\"), progname);\n }\n-\n-/* Convert an errno value into a string describing the error.\n-   We define this function here rather than using strerror\n-   because not all systems have strerror.  */\n-\n-char *\n-my_strerror (errnum)\n-     int errnum;\n+\f\n+/* If DIRFILE does not exist, create a minimal one (or abort).  If it\n+   already exists, do nothing.  */\n+void\n+ensure_dirfile_exists (dirfile)\n+     char *dirfile;\n {\n-#ifdef HAVE_STRERROR\n-  return strerror(errnum);\n-#else\n-  extern char *sys_errlist[];\n-  extern int sys_nerr;\n-\n-  if (errnum >= 0 && errnum < sys_nerr)\n-    return sys_errlist[errnum];\n-  return (char *) \"Unknown error\";\n-#endif\n+  int desc = open (dirfile, O_RDONLY);\n+  if (desc < 0 && errno == ENOENT)\n+    {\n+      FILE *f;\n+      char *readerr = strerror (errno);\n+      close (desc);\n+      f = fopen (dirfile, \"w\");\n+      if (f)\n+        {\n+          fputs (_(\"This is the file .../info/dir, which contains the\\n\\\n+topmost node of the Info hierarchy, called (dir)Top.\\n\\\n+The first time you invoke Info you start off looking at this node.\\n\\\n+\u001f\\n\\\n+File: dir       Node: Top       This is the top of the INFO tree\\n\\\n+\\n\\\n+  This (the Directory node) gives a menu of major topics.\\n\\\n+  Typing \\\"q\\\" exits, \\\"?\\\" lists all Info commands, \\\"d\\\" returns here,\\n\\\n+  \\\"h\\\" gives a primer for first-timers,\\n\\\n+  \\\"mEmacs<Return>\\\" visits the Emacs manual, etc.\\n\\\n+\\n\\\n+  In Emacs, you can click mouse button 2 on a menu item or cross reference\\n\\\n+  to select it.\\n\\\n+\\n\\\n+* Menu:\\n\\\n+\"), f);\n+          if (fclose (f) < 0)\n+            pfatal_with_name (dirfile);\n+        }\n+      else\n+        {\n+          /* Didn't exist, but couldn't open for writing.  */\n+          fprintf (stderr,\n+                   _(\"%s: could not read (%s) and could not create (%s)\\n\"),\n+                   dirfile, readerr, strerror (errno));\n+          exit (1);\n+        }\n+    }\n+  else\n+    close (desc); /* It already existed, so fine.  */\n }\n \f\n /* This table defines all the long-named options, says whether they\n@@ -384,6 +382,7 @@ struct option longopts[] =\n   { 0 }\n };\n \f\n+int\n main (argc, argv)\n      int argc;\n      char **argv;\n@@ -425,6 +424,15 @@ main (argc, argv)\n \n   progname = argv[0];\n \n+#ifdef HAVE_SETLOCALE\n+  /* Set locale via LC_ALL.  */\n+  setlocale (LC_ALL, \"\");\n+#endif\n+\n+  /* Set the text message domain.  */\n+  bindtextdomain (PACKAGE, LOCALEDIR);\n+  textdomain (PACKAGE);\n+\n   while (1)\n     {\n       int opt = getopt_long (argc, argv, \"i:d:e:s:hHr\", longopts, 0);\n@@ -445,7 +453,7 @@ main (argc, argv)\n         case 'd':\n           if (dirfile)\n             {\n-              fprintf (stderr, \"%s: Specify the Info directory only once.\\n\",\n+              fprintf (stderr, _(\"%s: Specify the Info directory only once.\\n\"),\n                        progname);\n               suggest_asking_for_help ();\n             }\n@@ -455,7 +463,7 @@ main (argc, argv)\n         case 'D':\n           if (dirfile)\n             {\n-              fprintf (stderr, \"%s: Specify the Info directory only once.\\n\",\n+              fprintf (stderr, _(\"%s: Specify the Info directory only once.\\n\"),\n                        progname);\n               suggest_asking_for_help ();\n             }\n@@ -483,7 +491,7 @@ main (argc, argv)\n         case 'i':\n           if (infile)\n             {\n-              fprintf (stderr, \"%s: Specify the Info file only once.\\n\",\n+              fprintf (stderr, _(\"%s: Specify the Info file only once.\\n\"),\n                        progname);\n               suggest_asking_for_help ();\n             }\n@@ -510,12 +518,12 @@ main (argc, argv)\n           break;\n \n         case 'V':\n-          puts (INSTALL_INFO_VERSION_STRING);\n-puts (\"Copyright (C) 1996 Free Software Foundation, Inc.\\n\\\n+          printf (_(\"install-info (GNU %s) %s\\n\"), PACKAGE, VERSION);\n+puts (_(\"Copyright (C) 1996 Free Software Foundation, Inc.\\n\\\n There is NO warranty.  You may redistribute this software\\n\\\n under the terms of the GNU General Public License.\\n\\\n-For more information about these matters, see the files named COPYING.\");\n-              exit (0);\n+For more information about these matters, see the files named COPYING.\"));\n+          exit (0);\n \n         default:\n           suggest_asking_for_help ();\n@@ -530,13 +538,13 @@ For more information about these matters, see the files named COPYING.\");\n       else if (dirfile == 0)\n         dirfile = argv[optind];\n       else\n-        error (\"excess command line argument `%s'\", argv[optind]);\n+        error (_(\"excess command line argument `%s'\"), argv[optind]);\n     }\n \n   if (!infile)\n-    fatal (\"No input file specified\");\n+    fatal (_(\"No input file specified; try --help for more information.\"));\n   if (!dirfile)\n-    fatal (\"No dir file specified\");\n+    fatal (_(\"No dir file specified; try --help for more information.\"));\n \n   /* Read the Info file and parse it into lines.  */\n \n@@ -588,7 +596,7 @@ For more information about these matters, see the files named COPYING.\");\n               && sizeof (\"START-INFO-DIR-ENTRY\") - 1 == input_lines[i].size)\n             {\n               if (start_of_this_entry != 0)\n-                fatal (\"START-INFO-DIR-ENTRY without matching END-INFO-DIR-ENTRY\");\n+                fatal (_(\"START-INFO-DIR-ENTRY without matching END-INFO-DIR-ENTRY\"));\n               start_of_this_entry = input_lines[i + 1].start;\n             }\n           if (!strncmp (\"END-INFO-DIR-ENTRY\", input_lines[i].start,\n@@ -607,18 +615,26 @@ For more information about these matters, see the files named COPYING.\");\n                   start_of_this_entry = 0;\n                 }\n               else\n-                fatal (\"END-INFO-DIR-ENTRY without matching START-INFO-DIR-ENTRY\");\n+                fatal (_(\"END-INFO-DIR-ENTRY without matching START-INFO-DIR-ENTRY\"));\n             }\n         }\n       if (start_of_this_entry != 0)\n-        fatal (\"START-INFO-DIR-ENTRY without matching END-INFO-DIR-ENTRY\");\n+        fatal (_(\"START-INFO-DIR-ENTRY without matching END-INFO-DIR-ENTRY\"));\n     }\n \n   if (!delete_flag)\n     if (entries_to_add == 0)\n-      fatal (\"no info dir entry in `%s'\", infile);\n+      { /* No need to abort here, the original info file may not have\n+           the requisite Texinfo commands.  This is not something an\n+           installer should have to correct (it's a problem for the\n+           maintainer), and there's no need to cause subsequent parts of\n+           `make install' to fail.  */\n+        warning (_(\"no info dir entry in `%s'\"), infile);\n+        exit (0);\n+      }\n \n   /* Now read in the Info dir file.  */\n+  ensure_dirfile_exists (dirfile);\n   dir_data = readfile (dirfile, &dir_size);\n   dir_lines = findlines (dir_data, dir_size, &dir_nlines);\n \n@@ -747,8 +763,12 @@ For more information about these matters, see the files named COPYING.\");\n               if ((dir_lines[i].size\n                    > (p - dir_lines[i].start + infilelen_sans_info))\n                   && !strncmp (p, infile_sans_info, infilelen_sans_info)\n-                  && p[infilelen_sans_info] == ')')\n-                dir_lines[i].delete = 1;\n+                  && (p[infilelen_sans_info] == ')'\n+                      || !strncmp (p + infilelen_sans_info, \".info)\", 6)))\n+                {\n+                  dir_lines[i].delete = 1;\n+                  something_deleted = 1;\n+                }\n             }\n         }\n       /* Treat lines that start with whitespace\n@@ -820,7 +840,7 @@ For more information about these matters, see the files named COPYING.\");\n                                                 dir_lines[i].start,\n                                                 dir_lines[i].size)\n                             && !dir_lines[i].delete)\n-                          fatal (\"menu item `%s' already exists, for file `%s'\",\n+                          fatal (_(\"menu item `%s' already exists, for file `%s'\"),\n                                  extract_menu_item_name (entry->text),\n                                  extract_menu_file_name (dir_lines[i].start));\n                         if (dir_lines[i].start[0] == '*'\n@@ -843,7 +863,7 @@ For more information about these matters, see the files named COPYING.\");\n     }\n \n   if (delete_flag && !something_deleted && !quiet_flag)\n-    warning (\"no entries found for `%s'; nothing deleted\", infile);\n+    warning (_(\"no entries found for `%s'; nothing deleted\"), infile);\n \n   /* Output the old dir file, interpolating the new sections\n      and/or new entries where appropriate.  */\n@@ -941,7 +961,6 @@ readfile (filename, sizep)\n   int nread = 0;\n \n   int desc = open (filename, O_RDONLY);\n-\n   if (desc < 0)\n     pfatal_with_name (filename);\n "}]}