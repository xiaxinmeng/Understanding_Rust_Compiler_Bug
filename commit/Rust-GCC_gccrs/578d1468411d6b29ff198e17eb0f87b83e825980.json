{"sha": "578d1468411d6b29ff198e17eb0f87b83e825980", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTc4ZDE0Njg0MTFkNmIyOWZmMTk4ZTE3ZWIwZjg3YjgzZTgyNTk4MA==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2004-07-11T11:44:09Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2004-07-11T11:44:09Z"}, "message": "s390.c (legitimize_tls_address): Handle constant offsets added to TLS symbol addresses.\n\n\t* config/s390/s390.c (legitimize_tls_address): Handle constant offsets\n\tadded to TLS symbol addresses.\n\nFrom-SVN: r84504", "tree": {"sha": "c77c6721218ac49876c489a783a3500cc21c2fb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c77c6721218ac49876c489a783a3500cc21c2fb8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/578d1468411d6b29ff198e17eb0f87b83e825980", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/578d1468411d6b29ff198e17eb0f87b83e825980", "html_url": "https://github.com/Rust-GCC/gccrs/commit/578d1468411d6b29ff198e17eb0f87b83e825980", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/578d1468411d6b29ff198e17eb0f87b83e825980/comments", "author": null, "committer": null, "parents": [{"sha": "d8be287168bfc03d5766c44d237aaf0047e68752", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8be287168bfc03d5766c44d237aaf0047e68752", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8be287168bfc03d5766c44d237aaf0047e68752"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "147f9ec3895f589fe5db459ae1ae683671d8044e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/578d1468411d6b29ff198e17eb0f87b83e825980/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/578d1468411d6b29ff198e17eb0f87b83e825980/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=578d1468411d6b29ff198e17eb0f87b83e825980", "patch": "@@ -1,3 +1,8 @@\n+2004-07-11  Ulrich Weigand  <uweigand@de.ibm.com>\n+\n+\t* config/s390/s390.c (legitimize_tls_address): Handle constant offsets\n+\tadded to TLS symbol addresses.\n+\n 2004-07-11  Richard Henderson  <rth@redhat.com>\n \n \t* expmed.c (init_expmed): Use stack-local structures for "}, {"sha": "614e714b8a09d3d0451d62bf7bdf9831ac9b6ae6", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/578d1468411d6b29ff198e17eb0f87b83e825980/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/578d1468411d6b29ff198e17eb0f87b83e825980/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=578d1468411d6b29ff198e17eb0f87b83e825980", "patch": "@@ -2913,6 +2913,18 @@ legitimize_tls_address (rtx addr, rtx reg)\n \t}\n     }\n \n+  else if (GET_CODE (addr) == CONST && GET_CODE (XEXP (addr, 0)) == PLUS\n+\t   && GET_CODE (XEXP (XEXP (addr, 0), 1)) == CONST_INT)\n+    {\n+      new = XEXP (XEXP (addr, 0), 0);\n+      if (GET_CODE (new) != SYMBOL_REF)\n+\tnew = gen_rtx_CONST (Pmode, new);\n+\n+      new = legitimize_tls_address (new, reg);\n+      new = plus_constant (new, INTVAL (XEXP (XEXP (addr, 0), 1)));\n+      new = force_operand (new, 0);\n+    }\n+\n   else\n     abort ();  /* for now ... */\n "}]}