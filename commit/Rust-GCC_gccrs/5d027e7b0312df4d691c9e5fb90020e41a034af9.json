{"sha": "5d027e7b0312df4d691c9e5fb90020e41a034af9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWQwMjdlN2IwMzEyZGY0ZDY5MWM5ZTVmYjkwMDIwZTQxYTAzNGFmOQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2003-12-23T09:02:12Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2003-12-23T09:02:12Z"}, "message": "re PR c++/13387 (assignment to base class corrupts subclass)\n\n\tPR c++/13387\n\t* cp-lang.c (cxx_get_alias_set): Correct logic for a base type.\n\nFrom-SVN: r74968", "tree": {"sha": "ae015fce692d5b02e73ddf17575b92ccb278820c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ae015fce692d5b02e73ddf17575b92ccb278820c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5d027e7b0312df4d691c9e5fb90020e41a034af9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d027e7b0312df4d691c9e5fb90020e41a034af9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d027e7b0312df4d691c9e5fb90020e41a034af9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d027e7b0312df4d691c9e5fb90020e41a034af9/comments", "author": null, "committer": null, "parents": [{"sha": "4b8a63d6c27da50c38587c25f6c2211047648d62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b8a63d6c27da50c38587c25f6c2211047648d62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b8a63d6c27da50c38587c25f6c2211047648d62"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "69cbbed94b361d1a459c65a989d295a1ae44ac5b", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d027e7b0312df4d691c9e5fb90020e41a034af9/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d027e7b0312df4d691c9e5fb90020e41a034af9/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5d027e7b0312df4d691c9e5fb90020e41a034af9", "patch": "@@ -1,3 +1,8 @@\n+2003-12-23  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR c++/13387\n+\t* cp-lang.c (cxx_get_alias_set): Correct logic for a base type.\n+\n 2003-12-22  Mark Mitchell  <mark@codesourcery.com>\n \n \t* decl.c (start_function): Do not check"}, {"sha": "94cf4623ee8358f28209cc0644b5a707b7673446", "filename": "gcc/cp/cp-lang.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d027e7b0312df4d691c9e5fb90020e41a034af9/gcc%2Fcp%2Fcp-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d027e7b0312df4d691c9e5fb90020e41a034af9/gcc%2Fcp%2Fcp-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-lang.c?ref=5d027e7b0312df4d691c9e5fb90020e41a034af9", "patch": "@@ -292,11 +292,12 @@ ok_to_generate_alias_set_for_type (tree t)\n static HOST_WIDE_INT\n cxx_get_alias_set (tree t)\n {\n-  if (CLASS_TYPE_P (t) && TYPE_CONTEXT (t) && CLASS_TYPE_P (TYPE_CONTEXT (t))\n+  if (TREE_CODE (t) == RECORD_TYPE\n+      && TYPE_CONTEXT (t) && CLASS_TYPE_P (TYPE_CONTEXT (t))\n       && CLASSTYPE_AS_BASE (TYPE_CONTEXT (t)) == t)\n     /* The base variant of a type must be in the same alias set as the\n        complete type.  */\n-    t = TYPE_CONTEXT (t);\n+    return get_alias_set (TYPE_CONTEXT (t));\n   \n   if (/* It's not yet safe to use alias sets for some classes in C++.  */\n       !ok_to_generate_alias_set_for_type (t)"}]}