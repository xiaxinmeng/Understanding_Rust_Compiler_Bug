{"sha": "4d2df0f4704665c047d84b195a5c1a2ba9b7a28b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGQyZGYwZjQ3MDQ2NjVjMDQ3ZDg0YjE5NWE1YzFhMmJhOWI3YTI4Yg==", "commit": {"author": {"name": "Zhenqiang Chen", "email": "zhenqiang.chen@arm.com", "date": "2014-08-14T04:47:43Z"}, "committer": {"name": "Zhenqiang Chen", "email": "zqchen@gcc.gnu.org", "date": "2014-08-14T04:47:43Z"}, "message": "arm.c (arm_option_override): Set max_insns_skipped to MAX_INSN_PER_IT_BLOCK when optimize_size for THUMB2.\n\nChangeLog:\n2014-08-14  Zhenqiang Chen  <zhenqiang.chen@arm.com>\n\n\t* config/arm/arm.c (arm_option_override): Set max_insns_skipped\n\tto MAX_INSN_PER_IT_BLOCK when optimize_size for THUMB2.\n\ntestsuite/ChangeLog:\n2014-08-14  Zhenqiang Chen  <zhenqiang.chen@arm.com>\n\n\t* gcc.target/arm/max-insns-skipped.c: New test.\n\nFrom-SVN: r213939", "tree": {"sha": "9929a93d5329d82ce44d3538a0525e148fc080a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9929a93d5329d82ce44d3538a0525e148fc080a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b/comments", "author": null, "committer": null, "parents": [{"sha": "0b3a20e31d96b6344daef97cb16540d19723ea0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b3a20e31d96b6344daef97cb16540d19723ea0a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b3a20e31d96b6344daef97cb16540d19723ea0a"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "50b38fb9cacd8ddd81cf7336b4e75637fae4184c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4d2df0f4704665c047d84b195a5c1a2ba9b7a28b", "patch": "@@ -1,3 +1,8 @@\n+2014-08-14  Zhenqiang Chen  <zhenqiang.chen@arm.com>\n+\n+\t* config/arm/arm.c (arm_option_override): Set max_insns_skipped\n+\tto MAX_INSN_PER_IT_BLOCK when optimize_size for THUMB2.\n+\n 2014-08-13  Chen Gang  gang.chen.5i5j@gmail.com\n \n \t* microblaze/microblaze.md: Remove redundant '@' to avoid compiling"}, {"sha": "2f8d3274504c178a52655d75c41f96cdf42efab5", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=4d2df0f4704665c047d84b195a5c1a2ba9b7a28b", "patch": "@@ -2989,6 +2989,10 @@ arm_option_override (void)\n       /* If optimizing for size, bump the number of instructions that we\n          are prepared to conditionally execute (even on a StrongARM).  */\n       max_insns_skipped = 6;\n+\n+      /* For THUMB2, we limit the conditional sequence to one IT block.  */\n+      if (TARGET_THUMB2)\n+\tmax_insns_skipped = MAX_INSN_PER_IT_BLOCK;\n     }\n   else\n     max_insns_skipped = current_tune->max_insns_skipped;"}, {"sha": "ad9cce29706b048fa4bc160ed4336f01903d7822", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4d2df0f4704665c047d84b195a5c1a2ba9b7a28b", "patch": "@@ -1,3 +1,7 @@\n+2014-08-14  Zhenqiang Chen  <zhenqiang.chen@arm.com>\n+\n+\t* gcc.target/arm/max-insns-skipped.c: New test.\n+\n 2014-08-14  Bin Cheng  <bin.cheng@arm.com>\n \n \t* c-c++-common/addrtmp.c: Add bind_pic_locally option."}, {"sha": "0a11554b52b0415b6bac3555c87cb9008d133b44", "filename": "gcc/testsuite/gcc.target/arm/max-insns-skipped.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmax-insns-skipped.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d2df0f4704665c047d84b195a5c1a2ba9b7a28b/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmax-insns-skipped.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmax-insns-skipped.c?ref=4d2df0f4704665c047d84b195a5c1a2ba9b7a28b", "patch": "@@ -0,0 +1,21 @@\n+/* { dg-do assemble { target arm_thumb2 } } */\n+/* { dg-options \" -Os \" } */\n+\n+int t (int a, int b, int c, int d)\n+{\n+  int r;\n+  if (a > 0) {\n+    r = a + b;\n+    r += 0x456;\n+    r *= 0x1234567;\n+    }\n+  else {\n+    r = b - a;\n+    r -= 0x123;\n+    r *= 0x12387;\n+    r += d;\n+   }\n+  return r;\n+}\n+\n+/* { dg-final { object-size text <= 40 } } */"}]}