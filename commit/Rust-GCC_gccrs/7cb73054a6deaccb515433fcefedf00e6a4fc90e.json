{"sha": "7cb73054a6deaccb515433fcefedf00e6a4fc90e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2NiNzMwNTRhNmRlYWNjYjUxNTQzM2ZjZWZlZGYwMGU2YTRmYzkwZQ==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.ch", "date": "2004-07-14T20:45:55Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2004-07-14T20:45:55Z"}, "message": "jacks.exp (gcj_jacks_write): Add deprecation flag to the gcj_setup.\n\n2004-07-14  Andreas Tobler  <a.tobler@schweiz.ch>\n\n\t* testsuite/libjava.jacks/jacks.exp (gcj_jacks_write): Add deprecation\n\tflag to the gcj_setup.\n\t(gcj_jacks_run): Check tclsh version and launch jacks directly with\n\tthe tclsh.\n\t* testsuite/libjava.jacks/jacks.xfail: Update fails to reflect the\n\tdeprecation flag change. 58 XFAILS removed.\n\nFrom-SVN: r84710", "tree": {"sha": "6b3559f9780558b9e884f93d7d8287cf0138840f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6b3559f9780558b9e884f93d7d8287cf0138840f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7cb73054a6deaccb515433fcefedf00e6a4fc90e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cb73054a6deaccb515433fcefedf00e6a4fc90e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cb73054a6deaccb515433fcefedf00e6a4fc90e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cb73054a6deaccb515433fcefedf00e6a4fc90e/comments", "author": null, "committer": null, "parents": [{"sha": "85d91d5b1d0d8e0664f89495c0d1d47366201cc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85d91d5b1d0d8e0664f89495c0d1d47366201cc0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85d91d5b1d0d8e0664f89495c0d1d47366201cc0"}], "stats": {"total": 85, "additions": 24, "deletions": 61}, "files": [{"sha": "2ef5d031be4b2833efe359e13e0c733a6e857622", "filename": "libjava/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cb73054a6deaccb515433fcefedf00e6a4fc90e/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cb73054a6deaccb515433fcefedf00e6a4fc90e/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=7cb73054a6deaccb515433fcefedf00e6a4fc90e", "patch": "@@ -1,3 +1,12 @@\n+2004-07-14  Andreas Tobler  <a.tobler@schweiz.ch>\n+\n+\t* testsuite/libjava.jacks/jacks.exp (gcj_jacks_write): Add deprecation\n+\tflag to the gcj_setup.\n+\t(gcj_jacks_run): Check tclsh version and launch jacks directly with\n+\tthe tclsh.\n+\t* testsuite/libjava.jacks/jacks.xfail: Update fails to reflect the\n+\tdeprecation flag change. 58 XFAILS removed.\n+\n 2004-07-14  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \t* configure.host (DIVIDESPEC) [s390*-*-*]: Set to "}, {"sha": "228e18ff3580f71a50f53e8a81ef67d2d7773f8f", "filename": "libjava/testsuite/libjava.jacks/jacks.exp", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cb73054a6deaccb515433fcefedf00e6a4fc90e/libjava%2Ftestsuite%2Flibjava.jacks%2Fjacks.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cb73054a6deaccb515433fcefedf00e6a4fc90e/libjava%2Ftestsuite%2Flibjava.jacks%2Fjacks.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.jacks%2Fjacks.exp?ref=7cb73054a6deaccb515433fcefedf00e6a4fc90e", "patch": "@@ -35,6 +35,7 @@ proc gcj_jacks_write {filename} {\n   puts $fd \"set JAVA_FLAGS \\\"-mx=64m\\\"\"\n \n   puts $fd \"set JAVAC_ENCODING_FLAG --encoding=\"\n+  puts $fd \"set JAVAC_DEPRECATION_FLAG -Wdeprecated\"\n   puts $fd \"set tcltest::testConstraints(encoding) 1\"\n   puts $fd \"set tcltest::testConstraints(gcj) 1\"\n   puts $fd \"set tcltest::testConstraints(assert) 1\"\n@@ -97,9 +98,20 @@ proc gcj_jacks_run {} {\n   verbose \"Running Jacks...\"\n   # Just ignore error exits from the jacks program.\n   # It will always error exit for us, since don't completely pass.\n-  catch {exec ./jacks gcj} msg\n-\n-  gcj_jacks_parse logging/gcj.log\n+  # At the moment jacks has a hardcoded call to tclsh8.3. To override this,\n+  # we check here on the version and launch the script directly with the\n+  # tclsh$tcl_ver.\n+  set tcl_ver [info tclversion]\n+  if {[package vcompare  $tcl_ver 8.3] >= 0 } {\n+    if {[catch {exec tclsh$tcl_ver jacks gcj} msg]} {\n+\tsend_log \"Couldn't run jacks: $msg\\n\"\n+\treturn\n+    }\n+    gcj_jacks_parse logging/gcj.log\n+  } else {\n+      send_log \"No suitable tclsh found, you need at least version 8.3 or up.\\n\"\n+      return\n+  }\n \n   cd $here\n }"}, {"sha": "f4aa4bb07a00ef808b3bc14ded5591524dac76a3", "filename": "libjava/testsuite/libjava.jacks/jacks.xfail", "status": "modified", "additions": 0, "deletions": 58, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cb73054a6deaccb515433fcefedf00e6a4fc90e/libjava%2Ftestsuite%2Flibjava.jacks%2Fjacks.xfail", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cb73054a6deaccb515433fcefedf00e6a4fc90e/libjava%2Ftestsuite%2Flibjava.jacks%2Fjacks.xfail", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.jacks%2Fjacks.xfail?ref=7cb73054a6deaccb515433fcefedf00e6a4fc90e", "patch": "@@ -446,74 +446,16 @@\n 4.5.4-parameter-3\n 4.5.4-static-1\n 4.5.4-static-5\n-4.7.10-jvms-class-1\n-4.7.10-jvms-class-10\n-4.7.10-jvms-class-11\n-4.7.10-jvms-class-12\n-4.7.10-jvms-class-13\n-4.7.10-jvms-class-14\n-4.7.10-jvms-class-15\n-4.7.10-jvms-class-16\n-4.7.10-jvms-class-17\n 4.7.10-jvms-class-18\n-4.7.10-jvms-class-19\n-4.7.10-jvms-class-2\n-4.7.10-jvms-class-3\n-4.7.10-jvms-class-4\n-4.7.10-jvms-class-5\n 4.7.10-jvms-class-6\n 4.7.10-jvms-class-7\n 4.7.10-jvms-class-8\n-4.7.10-jvms-class-9\n-4.7.10-jvms-constructor-1\n-4.7.10-jvms-constructor-10\n-4.7.10-jvms-constructor-11\n-4.7.10-jvms-constructor-12\n-4.7.10-jvms-constructor-13\n-4.7.10-jvms-constructor-14\n-4.7.10-jvms-constructor-2\n-4.7.10-jvms-constructor-3\n-4.7.10-jvms-constructor-4\n-4.7.10-jvms-constructor-5\n 4.7.10-jvms-constructor-6\n-4.7.10-jvms-constructor-7\n 4.7.10-jvms-constructor-8\n-4.7.10-jvms-constructor-9\n-4.7.10-jvms-field-1\n-4.7.10-jvms-field-10\n-4.7.10-jvms-field-11\n-4.7.10-jvms-field-12\n-4.7.10-jvms-field-13\n-4.7.10-jvms-field-2\n-4.7.10-jvms-field-3\n-4.7.10-jvms-field-4\n-4.7.10-jvms-field-5\n 4.7.10-jvms-field-6\n-4.7.10-jvms-field-7\n 4.7.10-jvms-field-8\n-4.7.10-jvms-field-9\n-4.7.10-jvms-lex-1\n-4.7.10-jvms-lex-10\n-4.7.10-jvms-lex-2\n-4.7.10-jvms-lex-3\n-4.7.10-jvms-lex-4\n-4.7.10-jvms-lex-5\n-4.7.10-jvms-lex-6\n-4.7.10-jvms-lex-7\n-4.7.10-jvms-lex-8\n-4.7.10-jvms-lex-9\n-4.7.10-jvms-method-1\n-4.7.10-jvms-method-10\n-4.7.10-jvms-method-11\n-4.7.10-jvms-method-12\n-4.7.10-jvms-method-2\n-4.7.10-jvms-method-3\n-4.7.10-jvms-method-4\n-4.7.10-jvms-method-5\n 4.7.10-jvms-method-6\n-4.7.10-jvms-method-7\n 4.7.10-jvms-method-8\n-4.7.10-jvms-method-9\n 5.1.2-btd-1\n 5.1.2-btd-3\n 5.1.2-btd-5"}]}