{"sha": "cb1d4dce1537ed3479037e8d0f0bf114d5d27441", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2IxZDRkY2UxNTM3ZWQzNDc5MDM3ZThkMGYwYmYxMTRkNWQyNzQ0MQ==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargls@comcast.net", "date": "2005-06-20T19:17:32Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2005-06-20T19:17:32Z"}, "message": "re PR fortran/21257 ([4.0 only] Duplicate use of construct name)\n\n\tPR fortran/21257\n\t(Ported from g95)\n\t* match.c (gfc_match_label): Detect duplicate labels.\n\nFrom-SVN: r101214", "tree": {"sha": "177fdc29aa2e55a7d1462a1b7a3f424f4da2d8d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/177fdc29aa2e55a7d1462a1b7a3f424f4da2d8d3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb1d4dce1537ed3479037e8d0f0bf114d5d27441", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb1d4dce1537ed3479037e8d0f0bf114d5d27441", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb1d4dce1537ed3479037e8d0f0bf114d5d27441", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb1d4dce1537ed3479037e8d0f0bf114d5d27441/comments", "author": null, "committer": null, "parents": [{"sha": "8c98e9d03d115da3dd1c238e7a24ad643aacf148", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c98e9d03d115da3dd1c238e7a24ad643aacf148", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c98e9d03d115da3dd1c238e7a24ad643aacf148"}], "stats": {"total": 29, "additions": 16, "deletions": 13}, "files": [{"sha": "da57e97dfc92d690ab3cce97f87e7a7da5d0a558", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb1d4dce1537ed3479037e8d0f0bf114d5d27441/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb1d4dce1537ed3479037e8d0f0bf114d5d27441/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=cb1d4dce1537ed3479037e8d0f0bf114d5d27441", "patch": "@@ -1,4 +1,11 @@\n-2005-06-20 Erik Edelmann <erik.edelmann@iki.fi>\n+2005-06-20  Steven G. Kargl  <kargls@comcast.net.\n+\t(port from g95)\n+\n+\tPR fortran/21257\n+\t* match.c (gfc_match_label): Detect duplicate labels.\n+\n+\n+2005-06-20  Erik Edelmann  <erik.edelmann@iki.fi>\n \n \t* intrinsic.c (check_intrinsic_standard): Fix spelling error\n \tin a warning message."}, {"sha": "e8c4661e9920437f2209ce466465d438d8e79fb2", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 8, "deletions": 12, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb1d4dce1537ed3479037e8d0f0bf114d5d27441/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb1d4dce1537ed3479037e8d0f0bf114d5d27441/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=cb1d4dce1537ed3479037e8d0f0bf114d5d27441", "patch": "@@ -250,7 +250,6 @@ match\n gfc_match_label (void)\n {\n   char name[GFC_MAX_SYMBOL_LEN + 1];\n-  gfc_state_data *p;\n   match m;\n \n   gfc_new_block = NULL;\n@@ -265,18 +264,15 @@ gfc_match_label (void)\n       return MATCH_ERROR;\n     }\n \n-  if (gfc_new_block->attr.flavor != FL_LABEL\n-      && gfc_add_flavor (&gfc_new_block->attr, FL_LABEL,\n-\t\t\t gfc_new_block->name, NULL) == FAILURE)\n-    return MATCH_ERROR;\n+  if (gfc_new_block->attr.flavor == FL_LABEL)\n+    {\n+      gfc_error (\"Duplicate construct label '%s' at %C\", name);\n+      return MATCH_ERROR;\n+    }\n \n-  for (p = gfc_state_stack; p; p = p->previous)\n-    if (p->sym == gfc_new_block)\n-      {\n-\tgfc_error (\"Label %s at %C already in use by a parent block\",\n-\t\t   gfc_new_block->name);\n-\treturn MATCH_ERROR;\n-      }\n+  if (gfc_add_flavor (&gfc_new_block->attr, FL_LABEL,\n+\t\t      gfc_new_block->name, NULL) == FAILURE)\n+    return MATCH_ERROR;\n \n   return MATCH_YES;\n }"}]}