{"sha": "c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzRiM2EwYTBiOTU2NmRjZDYzZTRhMzVkZGNhZmE0YjkzMDU1YWE5Ng==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2011-08-19T13:25:51Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2011-08-19T13:25:51Z"}, "message": "c-decl.c (grokdeclarator): Diagnose _Noreturn for non-C1X if pedantic.\n\n\t* c-decl.c (grokdeclarator): Diagnose _Noreturn for non-C1X if\n\tpedantic.\n\t* c-parser.c (c_parser_declspecs): Include _Noreturn in syntax\n\tcomment.\n\t* ginclude/stdnoreturn.h (noreturn): Don't define for C++.\n\ntestsuite:\n\t* gcc.dg/c90-noreturn-1.c, gcc.dg/c99-noreturn-1.c: New tests.\n\nFrom-SVN: r177899", "tree": {"sha": "c6c54b66903cafd5d960e932fa497941dd2ad58a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c6c54b66903cafd5d960e932fa497941dd2ad58a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c26dffff5c573aa7f3935dddc8300a2c8fd660a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c26dffff5c573aa7f3935dddc8300a2c8fd660a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c26dffff5c573aa7f3935dddc8300a2c8fd660a1"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "9a8d24f26b75ce16a37d2de4d511e91ae55b0839", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96", "patch": "@@ -1,3 +1,11 @@\n+2011-08-19  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* c-decl.c (grokdeclarator): Diagnose _Noreturn for non-C1X if\n+\tpedantic.\n+\t* c-parser.c (c_parser_declspecs): Include _Noreturn in syntax\n+\tcomment.\n+\t* ginclude/stdnoreturn.h (noreturn): Don't define for C++.\n+\n 2011-08-19  Joseph Myers  <joseph@codesourcery.com>\n \n \t* opth-gen.awk: Do not declare target save/restore structures and"}, {"sha": "d683d4e36550182f87a1408ba9d01629ef89d7d1", "filename": "gcc/c-decl.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96", "patch": "@@ -5986,7 +5986,18 @@ grokdeclarator (const struct c_declarator *declarator,\n \t      /* Record that the function is declared `inline'.  */\n \t      DECL_DECLARED_INLINE_P (decl) = 1;\n \t    if (declspecs->noreturn_p)\n-\t      TREE_THIS_VOLATILE (decl) = 1;\n+\t      {\n+\t\tif (!flag_isoc1x)\n+\t\t  {\n+\t\t    if (flag_isoc99)\n+\t\t      pedwarn (loc, OPT_pedantic,\n+\t\t\t       \"ISO C99 does not support %<_Noreturn%>\");\n+\t\t    else\n+\t\t      pedwarn (loc, OPT_pedantic,\n+\t\t\t       \"ISO C90 does not support %<_Noreturn%>\");\n+\t\t  }\n+\t\tTREE_THIS_VOLATILE (decl) = 1;\n+\t      }\n \t  }\n       }\n     else"}, {"sha": "8d7bb995beb92606fd5d6b8f0bb82ae15629618f", "filename": "gcc/c-parser.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parser.c?ref=c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96", "patch": "@@ -1905,6 +1905,9 @@ c_parser_static_assert_declaration_no_semi (c_parser *parser)\n    C99 6.7.4:\n    function-specifier:\n      inline\n+     _Noreturn\n+\n+   (_Noreturn is new in C1X.)\n \n    C90 6.5.2, C99 6.7.2:\n    type-specifier:"}, {"sha": "3efbd8a2573e565202420b6199d3c14c1b70f740", "filename": "gcc/ginclude/stdnoreturn.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Fginclude%2Fstdnoreturn.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Fginclude%2Fstdnoreturn.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fginclude%2Fstdnoreturn.h?ref=c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96", "patch": "@@ -26,6 +26,10 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #ifndef _STDNORETURN_H\n #define _STDNORETURN_H\n \n+#ifndef __cplusplus\n+\n #define noreturn _Noreturn\n \n+#endif\n+\n #endif\t/* stdnoreturn.h */"}, {"sha": "23b70e8cdb111ddb21785331ad5099e3457bb30e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96", "patch": "@@ -1,3 +1,7 @@\n+2011-08-19  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* gcc.dg/c90-noreturn-1.c, gcc.dg/c99-noreturn-1.c: New tests.\n+\n 2011-08-19  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* gcc.dg/builtins-67.c: Use dg-add-options c99_runtime."}, {"sha": "87b832e067b00fd81bdf5ffd6d66fe54f66cbce1", "filename": "gcc/testsuite/gcc.dg/c90-noreturn-1.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Ftestsuite%2Fgcc.dg%2Fc90-noreturn-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Ftestsuite%2Fgcc.dg%2Fc90-noreturn-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc90-noreturn-1.c?ref=c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96", "patch": "@@ -0,0 +1,5 @@\n+/* Test _Noreturn not in C90.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-std=iso9899:1990 -pedantic-errors\" } */\n+\n+_Noreturn void f (void); /* { dg-error \"ISO C90 does not support '_Noreturn'\" } */"}, {"sha": "4cbc513595eccf4f678ec1c5dc44c5ff09e167ff", "filename": "gcc/testsuite/gcc.dg/c99-noreturn-1.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-noreturn-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-noreturn-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-noreturn-1.c?ref=c4b3a0a0b9566dcd63e4a35ddcafa4b93055aa96", "patch": "@@ -0,0 +1,5 @@\n+/* Test _Noreturn not in C99.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-std=iso9899:1999 -pedantic-errors\" } */\n+\n+_Noreturn void f (void); /* { dg-error \"ISO C99 does not support '_Noreturn'\" } */"}]}