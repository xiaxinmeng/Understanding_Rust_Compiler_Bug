{"sha": "4c8836c61b19b88ddbfc3502c12dfcd9e87cee71", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGM4ODM2YzYxYjE5Yjg4ZGRiZmMzNTAyYzEyZGZjZDllODdjZWU3MQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2012-01-08T16:32:49Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2012-01-08T16:32:49Z"}, "message": "re PR tree-optimization/51694 (ICE while compiling alliance package)\n\n\tPR tree-optimize/51694\n\t* ipa-cp.c (ipa_get_indirect_edge_target): Add bounds checks.\n\nFrom-SVN: r182993", "tree": {"sha": "a713926c58706e6da15d85a29a262e6f8cb3072d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a713926c58706e6da15d85a29a262e6f8cb3072d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71/comments", "author": null, "committer": null, "parents": [{"sha": "11f30bb0e4bf666229b6b236cd3e4ed1de13283a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11f30bb0e4bf666229b6b236cd3e4ed1de13283a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11f30bb0e4bf666229b6b236cd3e4ed1de13283a"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "a2648d8ea4c9a353476a3ea5912224b7f38f3d6d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4c8836c61b19b88ddbfc3502c12dfcd9e87cee71", "patch": "@@ -1,3 +1,8 @@\n+2012-01-08  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR tree-optimize/51694\n+\t* ipa-cp.c (ipa_get_indirect_edge_target): Add bounds checks.\n+\n 2012-01-08  Jonathan Wakely  <jwakely.gcc@gmail.com>\n \n \t* doc/cpp.texi (Predefined Macros): __STRICT_ANSI__ is defined"}, {"sha": "ae38366c2ca23e2600e007c83ff26851963d210f", "filename": "gcc/ipa-cp.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71/gcc%2Fipa-cp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71/gcc%2Fipa-cp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-cp.c?ref=4c8836c61b19b88ddbfc3502c12dfcd9e87cee71", "patch": "@@ -1112,7 +1112,8 @@ ipa_get_indirect_edge_target (struct cgraph_edge *ie,\n \n   if (!ie->indirect_info->polymorphic)\n     {\n-      tree t = VEC_index (tree, known_vals, param_index);\n+      tree t = (VEC_length (tree, known_vals) > param_index\n+\t        ? VEC_index (tree, known_vals, param_index) : NULL);\n       if (t &&\n \t  TREE_CODE (t) == ADDR_EXPR\n \t  && TREE_CODE (TREE_OPERAND (t, 0)) == FUNCTION_DECL)\n@@ -1126,7 +1127,7 @@ ipa_get_indirect_edge_target (struct cgraph_edge *ie,\n   otr_type = ie->indirect_info->otr_type;\n \n   t = VEC_index (tree, known_vals, param_index);\n-  if (!t && known_binfos)\n+  if (!t && known_binfos && VEC_length (tree, known_binfos) > param_index)\n     t = VEC_index (tree, known_binfos, param_index);\n   if (!t)\n     return NULL_TREE;"}, {"sha": "b8b9b94468d45775dfd5d38501528eed63ff1f80", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4c8836c61b19b88ddbfc3502c12dfcd9e87cee71", "patch": "@@ -1,3 +1,8 @@\n+2012-01-07  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR tree-optimize/51694\n+\t* gcc.c-torture/compile/pr51694.c: new testcase.\n+\n 2012-01-07  Jan Hubicka  <jh@suse.cz>\n \n \tPR tree-optimization/51600"}, {"sha": "579a2434d82b7033477e683674a0ae24d10d9a8c", "filename": "gcc/testsuite/gcc.c-torture/compile/pr51694.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr51694.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c8836c61b19b88ddbfc3502c12dfcd9e87cee71/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr51694.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr51694.c?ref=4c8836c61b19b88ddbfc3502c12dfcd9e87cee71", "patch": "@@ -0,0 +1,14 @@\n+void\n+foo (x, fn)\n+  void (*fn) ();\n+{\n+  int a = baz ((void *) 0, x);\n+  (*fn) (x, 0);\n+}\n+\n+void\n+bar (void)\n+{\n+  void *x = 0;\n+  foo (x);\n+}"}]}