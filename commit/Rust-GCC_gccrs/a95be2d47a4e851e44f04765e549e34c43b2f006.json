{"sha": "a95be2d47a4e851e44f04765e549e34c43b2f006", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTk1YmUyZDQ3YTRlODUxZTQ0ZjA0NzY1ZTU0OWUzNGM0M2IyZjAwNg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-01T13:37:13Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-01T13:37:13Z"}, "message": "[multiple changes]\n\n2011-09-01  Vincent Celier  <celier@adacore.com>\n\n\t* ug_words: Add /MULTI_UNIT_INDEX= -> -gnateI\n\t* vms_data.ads: Add new VMS qualifier equivalent for -gnateInnn\n\n2011-09-01  Nicolas Roche  <roche@adacore.com>\n\n\t* adaint.c (__gnat_tmp_name): Don't use tmpnam function from the system\n\ton VxWorks in kernel mode.\n\nFrom-SVN: r178415", "tree": {"sha": "0cab798504c4c4ee81d319ed963cb6d2ece5bc48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0cab798504c4c4ee81d319ed963cb6d2ece5bc48"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a95be2d47a4e851e44f04765e549e34c43b2f006", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a95be2d47a4e851e44f04765e549e34c43b2f006", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a95be2d47a4e851e44f04765e549e34c43b2f006", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a95be2d47a4e851e44f04765e549e34c43b2f006/comments", "author": null, "committer": null, "parents": [{"sha": "6b81741c0717e0322b61591a655dc83265f84ea8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b81741c0717e0322b61591a655dc83265f84ea8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b81741c0717e0322b61591a655dc83265f84ea8"}], "stats": {"total": 43, "additions": 36, "deletions": 7}, "files": [{"sha": "373f901308f20ac4a5ddb69f64bfaec930dcfa27", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a95be2d47a4e851e44f04765e549e34c43b2f006/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a95be2d47a4e851e44f04765e549e34c43b2f006/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=a95be2d47a4e851e44f04765e549e34c43b2f006", "patch": "@@ -1,3 +1,13 @@\n+2011-09-01  Vincent Celier  <celier@adacore.com>\n+\n+\t* ug_words: Add /MULTI_UNIT_INDEX= -> -gnateI\n+\t* vms_data.ads: Add new VMS qualifier equivalent for -gnateInnn\n+\n+2011-09-01  Nicolas Roche  <roche@adacore.com>\n+\n+\t* adaint.c (__gnat_tmp_name): Don't use tmpnam function from the system\n+\ton VxWorks in kernel mode.\n+\n 2011-09-01  Jose Ruiz  <ruiz@adacore.com>\n \n \t* s-taprop-linux.adb (Create_Task, Set_Task_Affinity): Use the linux"}, {"sha": "adc702a23f969f1c99cef1d3bb7fe91a3a62076e", "filename": "gcc/ada/adaint.c", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a95be2d47a4e851e44f04765e549e34c43b2f006/gcc%2Fada%2Fadaint.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a95be2d47a4e851e44f04765e549e34c43b2f006/gcc%2Fada%2Fadaint.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fadaint.c?ref=a95be2d47a4e851e44f04765e549e34c43b2f006", "patch": "@@ -1240,6 +1240,23 @@ __gnat_tmp_name (char *tmp_filename)\n     sprintf (tmp_filename, \"%s/gnat-XXXXXX\", tmpdir);\n \n   close (mkstemp(tmp_filename));\n+#elif defined (__vxworks) && !(defined (__RTP__) || defined (VTHREADS))\n+  int             index;\n+  char *          pos;\n+  ushort_t        t;\n+  static ushort_t seed = 0; /* used to generate unique name */\n+\n+  /* generate unique name */\n+  strcpy (tmp_filename, \"tmp\");\n+\n+  /* fill up the name buffer from the last position */\n+  index = 5;\n+  pos = tmp_filename + strlen (tmp_filename) + index;\n+  *pos = '\\0';\n+\n+  seed++;\n+  for (t = seed; 0 <= --index; t >>= 3)\n+      *--pos = '0' + (t & 07);\n #else\n   tmpnam (tmp_filename);\n #endif"}, {"sha": "d92b89c0cc85ce13fe492fff5c2e66b0a12e3d2a", "filename": "gcc/ada/ug_words", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a95be2d47a4e851e44f04765e549e34c43b2f006/gcc%2Fada%2Fug_words", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a95be2d47a4e851e44f04765e549e34c43b2f006/gcc%2Fada%2Fug_words", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fug_words?ref=a95be2d47a4e851e44f04765e549e34c43b2f006", "patch": "@@ -63,6 +63,7 @@ gcc -c          ^ GNAT COMPILE\n -gnateD         ^ /SYMBOL_PREPROCESSING\n -gnatef         ^ /FULL_PATH_IN_BRIEF_MESSAGES\n -gnateG         ^ /GENERATE_PROCESSED_SOURCE\n+-gnateI         ^ /MULTI_UNIT_INDEX=\n -gnatem         ^ /MAPPING_FILE\n -gnatep         ^ /DATA_PREPROCESSING\n -gnateP         ^ /CATEGORIZATION_WARNINGS\n@@ -229,3 +230,4 @@ stderr          ^ SYS$ERROR\n -O3             ^ /OPTIMIZE=INLINING\n -H32            ^ /32_MALLOC\n -H64            ^ /64_MALLOC\n+-Wall           ^ /WARNINGS=ALL_GCC"}, {"sha": "1da9855245a9a90271f4d628096a20eba593acf4", "filename": "gcc/ada/vms_data.ads", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a95be2d47a4e851e44f04765e549e34c43b2f006/gcc%2Fada%2Fvms_data.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a95be2d47a4e851e44f04765e549e34c43b2f006/gcc%2Fada%2Fvms_data.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fvms_data.ads?ref=a95be2d47a4e851e44f04765e549e34c43b2f006", "patch": "@@ -1926,6 +1926,12 @@ package VMS_Data is\n    --   When using a project file, GNAT MAKE creates a temporary mapping file\n    --   and communicates it to the compiler using this switch.\n \n+   S_GCC_Multi   : aliased constant S := \"/MULTI_UNIT_INDEX=#\"             &\n+                                            \"-gnateI#\";\n+   --        /MULTI_UNIT_INDEX=nnn\n+   --\n+   --   Specify the index of the unit to compile in a multi-unit source file.\n+\n    S_GCC_Mess    : aliased constant S := \"/MESSAGES_PROJECT_FILE=\"         &\n                                             \"DEFAULT \"                     &\n                                                \"-vP0 \"                     &\n@@ -3391,12 +3397,6 @@ package VMS_Data is\n    --\n    --   Inhibit all warning messages of the GCC back-end.\n \n-   S_GCC_All_Back : aliased constant S := \"/ALL_BACK_END_WARNINGS \"        &\n-                                            \"-Wall\";\n-   --        /ALL_BACK_END_WARNINGS\n-   --\n-   --   Activate all warning messages of the GCC back-end.\n-\n    S_GCC_Wide    : aliased constant S := \"/WIDE_CHARACTER_ENCODING=\"       &\n                                              \"BRACKETS \"                   &\n                                                 \"-gnatWb \"                 &\n@@ -3585,6 +3585,7 @@ package VMS_Data is\n                      S_GCC_Output  'Access,\n                      S_GCC_Machine 'Access,\n                      S_GCC_Mapping 'Access,\n+                     S_GCC_Multi   'Access,\n                      S_GCC_Mess    'Access,\n                      S_GCC_Nesting 'Access,\n                      S_GCC_Noadc   'Access,\n@@ -3627,7 +3628,6 @@ package VMS_Data is\n                      S_GCC_Wide    'Access,\n                      S_GCC_WideX   'Access,\n                      S_GCC_No_Back 'Access,\n-                     S_GCC_All_Back'Access,\n                      S_GCC_Xdebug  'Access,\n                      S_GCC_Lxdebug 'Access,\n                      S_GCC_Xref    'Access);"}]}