{"sha": "8f02357571a858f7ff5ca7734e5344d989a7fd0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGYwMjM1NzU3MWE4NThmN2ZmNWNhNzczNGU1MzQ0ZDk4OWE3ZmQwYw==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-03-20T19:16:00Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-03-27T13:59:25Z"}, "message": "analyzer: improvements to diagnostic-manager.cc logging\n\ngcc/analyzer/ChangeLog:\n\t* diagnostic-manager.cc (dedupe_winners::add): Show the\n\texploded_node index in the log messages.\n\t(diagnostic_manager::emit_saved_diagnostics): Log a summary of\n\tm_saved_diagnostics at entry.", "tree": {"sha": "3ec9c5d7f74a877b328c520bc97bf9d568f207d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ec9c5d7f74a877b328c520bc97bf9d568f207d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8f02357571a858f7ff5ca7734e5344d989a7fd0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f02357571a858f7ff5ca7734e5344d989a7fd0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f02357571a858f7ff5ca7734e5344d989a7fd0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f02357571a858f7ff5ca7734e5344d989a7fd0c/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4d661bb7a2e1fdfd856140f1b86266ca524df9e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d661bb7a2e1fdfd856140f1b86266ca524df9e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d661bb7a2e1fdfd856140f1b86266ca524df9e2"}], "stats": {"total": 32, "additions": 26, "deletions": 6}, "files": [{"sha": "a04b5cc099e7dd8fd397d8811ebb6111c52af80b", "filename": "gcc/analyzer/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f02357571a858f7ff5ca7734e5344d989a7fd0c/gcc%2Fanalyzer%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f02357571a858f7ff5ca7734e5344d989a7fd0c/gcc%2Fanalyzer%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2FChangeLog?ref=8f02357571a858f7ff5ca7734e5344d989a7fd0c", "patch": "@@ -1,3 +1,10 @@\n+2020-03-27  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* diagnostic-manager.cc (dedupe_winners::add): Show the\n+\texploded_node index in the log messages.\n+\t(diagnostic_manager::emit_saved_diagnostics): Log a summary of\n+\tm_saved_diagnostics at entry.\n+\n 2020-03-27  David Malcolm  <dmalcolm@redhat.com>\n \n \t* supergraph.cc (superedge::dump): Add space before description;"}, {"sha": "e27e6269915c64a2f443105aaafca10cd056ae50", "filename": "gcc/analyzer/diagnostic-manager.cc", "status": "modified", "additions": 19, "deletions": 6, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f02357571a858f7ff5ca7734e5344d989a7fd0c/gcc%2Fanalyzer%2Fdiagnostic-manager.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f02357571a858f7ff5ca7734e5344d989a7fd0c/gcc%2Fanalyzer%2Fdiagnostic-manager.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2Fdiagnostic-manager.cc?ref=8f02357571a858f7ff5ca7734e5344d989a7fd0c", "patch": "@@ -358,21 +358,25 @@ class dedupe_winners\n        This could introduce false negatives, as there could be longer\n        feasible paths within the egraph.  */\n     if (logger)\n-      logger->log (\"considering %qs at SN: %i\",\n-\t\t   sd.m_d->get_kind (), sd.m_snode->m_index);\n+      logger->log (\"considering %qs at EN: %i, SN: %i\",\n+\t\t   sd.m_d->get_kind (), sd.m_enode->m_index,\n+\t\t   sd.m_snode->m_index);\n+\n     if (!dc->get_path ().feasible_p (logger))\n       {\n \tif (logger)\n-\t  logger->log (\"rejecting %qs at SN: %i\"\n+\t  logger->log (\"rejecting %qs at EN: %i, SN: %i\"\n \t\t       \" due to infeasible path\",\n-\t\t       sd.m_d->get_kind (), sd.m_snode->m_index);\n+\t\t       sd.m_d->get_kind (), sd.m_enode->m_index,\n+\t\t       sd.m_snode->m_index);\n \tdelete dc;\n \treturn;\n       }\n     else\n       if (logger)\n-\tlogger->log (\"accepting %qs at SN: %i with feasible path\",\n-\t\t     sd.m_d->get_kind (), sd.m_snode->m_index);\n+\tlogger->log (\"accepting %qs at EN: %i, SN: %i with feasible path\",\n+\t\t     sd.m_d->get_kind (), sd.m_enode->m_index,\n+\t\t     sd.m_snode->m_index);\n \n     dedupe_key *key = new dedupe_key (sd, dc->get_path ());\n     if (dedupe_candidate **slot = m_map.get (key))\n@@ -466,6 +470,15 @@ diagnostic_manager::emit_saved_diagnostics (const exploded_graph &eg)\n   LOG_SCOPE (get_logger ());\n   auto_timevar tv (TV_ANALYZER_DIAGNOSTICS);\n   log (\"# saved diagnostics: %i\", m_saved_diagnostics.length ());\n+  if (get_logger ())\n+    {\n+      unsigned i;\n+      saved_diagnostic *sd;\n+      FOR_EACH_VEC_ELT (m_saved_diagnostics, i, sd)\n+\tlog (\"[%i] sd: %qs at EN: %i, SN: %i\",\n+\t     i, sd->m_d->get_kind (), sd->m_enode->m_index,\n+\t     sd->m_snode->m_index);\n+    }\n \n   if (m_saved_diagnostics.length () == 0)\n     return;"}]}