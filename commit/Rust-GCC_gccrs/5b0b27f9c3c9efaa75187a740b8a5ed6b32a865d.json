{"sha": "5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWIwYjI3ZjljM2M5ZWZhYTc1MTg3YTc0MGI4YTVlZDZiMzJhODY1ZA==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2013-12-16T22:01:58Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2013-12-16T22:01:58Z"}, "message": "re PR fortran/54949 ([F03] abstract procedure pointers not rejected)\n\n2013-12-16  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/54949\n\t* symbol.c (check_conflict): Forbid abstract procedure pointers.\n\t(gfc_add_abstract): Check for attribute conflicts.\n\n\n2013-12-16  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/54949\n\t* gfortran.dg/proc_ptr_44.f90: New.\n\nFrom-SVN: r206033", "tree": {"sha": "01e39bde3ea56268f614fcc7537db764691f91dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/01e39bde3ea56268f614fcc7537db764691f91dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "71eba7a0c684782ccf5d4befa394639f607a2717", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71eba7a0c684782ccf5d4befa394639f607a2717", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71eba7a0c684782ccf5d4befa394639f607a2717"}], "stats": {"total": 46, "additions": 45, "deletions": 1}, "files": [{"sha": "1a81bfcc0ccbf3cf3344eb5e2fd1afd4e2f50f9c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d", "patch": "@@ -1,3 +1,9 @@\n+2013-12-16  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/54949\n+\t* symbol.c (check_conflict): Forbid abstract procedure pointers.\n+\t(gfc_add_abstract): Check for attribute conflicts.\n+\n 2013-12-16  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR libgomp/59337"}, {"sha": "07930f2916d1a9dddb51cc58783938988076cec0", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d", "patch": "@@ -363,6 +363,7 @@ check_conflict (symbol_attribute *attr, const char *name, locus *where)\n     *cray_pointee = \"CRAY POINTEE\", *data = \"DATA\", *value = \"VALUE\",\n     *volatile_ = \"VOLATILE\", *is_protected = \"PROTECTED\",\n     *is_bind_c = \"BIND(C)\", *procedure = \"PROCEDURE\",\n+    *proc_pointer = \"PROCEDURE POINTER\", *abstract = \"ABSTRACT\",\n     *asynchronous = \"ASYNCHRONOUS\", *codimension = \"CODIMENSION\",\n     *contiguous = \"CONTIGUOUS\", *generic = \"GENERIC\";\n   static const char *threadprivate = \"THREADPRIVATE\";\n@@ -593,6 +594,8 @@ check_conflict (symbol_attribute *attr, const char *name, locus *where)\n   conf (procedure, asynchronous)\n   conf (procedure, entry)\n \n+  conf (proc_pointer, abstract)\n+\n   a1 = gfc_code2string (flavors, attr->flavor);\n \n   if (attr->in_namelist\n@@ -1440,7 +1443,8 @@ gfc_add_abstract (symbol_attribute* attr, locus* where)\n     }\n \n   attr->abstract = 1;\n-  return true;\n+\n+  return check_conflict (attr, NULL, where);\n }\n \n "}, {"sha": "671a8b5f30a7cd87f754bf3f2f44467d0bf2a154", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d", "patch": "@@ -1,3 +1,8 @@\n+2013-12-16  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/54949\n+\t* gfortran.dg/proc_ptr_44.f90: New.\n+\n 2013-12-16  Jakub Jelinek  <jakub@redhat.com>\n \n \t* c-c++-common/ubsan/overflow-mul-3.c: New test."}, {"sha": "3ed65a88b5872c95fc65317c8da09d2e3c416819", "filename": "gcc/testsuite/gfortran.dg/proc_ptr_44.f90", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_44.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_44.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_ptr_44.f90?ref=5b0b27f9c3c9efaa75187a740b8a5ed6b32a865d", "patch": "@@ -0,0 +1,29 @@\n+! { dg-do compile }\n+!\n+! PR 54949: [F03] abstract procedure pointers not rejected\n+!\n+! Contributed by Janus Weil <janus@gcc.gnu.org>\n+\n+  implicit none\n+\n+  abstract interface\n+    subroutine abssub1\n+    end subroutine\n+  end interface\n+  pointer :: abssub1  ! { dg-error \"PROCEDURE POINTER attribute conflicts with ABSTRACT attribute\" }\n+\n+  pointer :: abssub2\n+  abstract interface\n+    subroutine abssub2  ! { dg-error \"PROCEDURE POINTER attribute conflicts with ABSTRACT attribute\" }\n+    end subroutine\n+  end interface\n+  \n+  abssub1 => sub  ! { dg-error \"is not a variable\" }\n+  abssub2 => sub\n+  \n+contains\n+\n+  subroutine sub\n+  end subroutine\n+\n+end"}]}