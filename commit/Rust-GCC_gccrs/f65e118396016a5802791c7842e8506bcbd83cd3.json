{"sha": "f65e118396016a5802791c7842e8506bcbd83cd3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjY1ZTExODM5NjAxNmE1ODAyNzkxYzc4NDJlODUwNmJjYmQ4M2NkMw==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@codesourcery.com", "date": "2002-10-25T22:01:44Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2002-10-25T22:01:44Z"}, "message": "re PR c++/7266 (pedantic segfaults on missing typename)\n\n\tPR c++/7266\ncp:\n\t* decl.c (grokdeclarator): Check that TREE_OPERAND 0 of a\n\tSCOPE_REF is not null before dereferencing it.\ntestsuite:\n\t* g++.dg/template/typename3.C: New test.\n\nFrom-SVN: r58540", "tree": {"sha": "67fd5fbe0785abf5f677c11524a1114df26e50b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/67fd5fbe0785abf5f677c11524a1114df26e50b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f65e118396016a5802791c7842e8506bcbd83cd3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f65e118396016a5802791c7842e8506bcbd83cd3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f65e118396016a5802791c7842e8506bcbd83cd3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f65e118396016a5802791c7842e8506bcbd83cd3/comments", "author": null, "committer": null, "parents": [{"sha": "cd60b4b8e7d54de00a2d3a5764ebb1c674fcc889", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd60b4b8e7d54de00a2d3a5764ebb1c674fcc889", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd60b4b8e7d54de00a2d3a5764ebb1c674fcc889"}], "stats": {"total": 26, "additions": 22, "deletions": 4}, "files": [{"sha": "03a13c1ba981ea32b8da0baa613843ec88980796", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f65e118396016a5802791c7842e8506bcbd83cd3/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f65e118396016a5802791c7842e8506bcbd83cd3/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f65e118396016a5802791c7842e8506bcbd83cd3", "patch": "@@ -1,3 +1,9 @@\n+2002-10-25  Zack Weinberg  <zack@codesourcery.com>\n+\n+\tPR c++/7266\n+\t* decl.c (grokdeclarator): Check that TREE_OPERAND 0 of a\n+\tSCOPE_REF is not null before dereferencing it.\n+\n 2002-10-25  Mark Mitchell  <mark@codesourcery.com>\n \n \t* class.c (build_vtbl_initializer): Don't use build_vtable_entry.\n@@ -8,7 +14,7 @@\n \t* decl.c (duplicate_decls): Copy it.\n \t* method.c (make_thunk): Simplify, and add thunks to DECL_THUNKS.\n \t* semantics.c (emit_associated_thunks): Simplify.\n-\t\n+\n 2002-10-24  David Edelsohn  <edelsohn@gnu.org>\n \n \tPR c++/7228"}, {"sha": "3e1c21553dd1f0fe7831fb816cc78457d0719a10", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f65e118396016a5802791c7842e8506bcbd83cd3/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f65e118396016a5802791c7842e8506bcbd83cd3/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=f65e118396016a5802791c7842e8506bcbd83cd3", "patch": "@@ -11241,8 +11241,9 @@ grokdeclarator (declarator, declspecs, decl_context, initialized, attrlist)\n \t      pop_decl_namespace ();\n \t    else if (friendp && (TREE_COMPLEXITY (declarator) < 2))\n \t      /* Don't fall out into global scope. Hides real bug? --eichin */ ;\n-\t    else if (! IS_AGGR_TYPE_CODE\n-\t\t     (TREE_CODE (TREE_OPERAND (declarator, 0))))\n+\t    else if (!TREE_OPERAND (declarator, 0)\n+\t\t     || !IS_AGGR_TYPE_CODE\n+\t\t          (TREE_CODE (TREE_OPERAND (declarator, 0))))\n \t      ;\n \t    else if (TREE_COMPLEXITY (declarator) == current_class_depth)\n \t      {"}, {"sha": "e6874ec7130adec976cb3bc509a5cca4228340b4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f65e118396016a5802791c7842e8506bcbd83cd3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f65e118396016a5802791c7842e8506bcbd83cd3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f65e118396016a5802791c7842e8506bcbd83cd3", "patch": "@@ -1,3 +1,7 @@\n+2002-10-25  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* g++.dg/template/typename3.C: New test.\n+\n 2002-10-25  Mark Mitchell  <mark@codesourcery.com>\n \n \t* g++.dg/abi/vthunk2.C: New test.\n@@ -27,7 +31,7 @@\n \n \tPR c++/7679\n \t* g++.dg/parse/inline1.C: New test.\n-\t\n+\n 2002-10-23  Richard Henderson  <rth@redhat.com>\n \n \t* g++.dg/inherit/thunk1.C: Enable for x86_64."}, {"sha": "1c573baa0df974554d657b817030d90dbafa4f23", "filename": "gcc/testsuite/g++.dg/template/typename3.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f65e118396016a5802791c7842e8506bcbd83cd3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypename3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f65e118396016a5802791c7842e8506bcbd83cd3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypename3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypename3.C?ref=f65e118396016a5802791c7842e8506bcbd83cd3", "patch": "@@ -0,0 +1,7 @@\n+// { dg-do compile }\n+// crash test - PR 7266\n+\n+template <class A>\n+struct B {\n+ typedef A::C::D E;  // { dg-error \"no type|parse error\" }\n+};"}]}