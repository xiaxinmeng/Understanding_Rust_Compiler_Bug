{"sha": "be086ff50c79270411f14eec2d8f02c2b5bdb322", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmUwODZmZjUwYzc5MjcwNDExZjE0ZWVjMmQ4ZjAyYzJiNWJkYjMyMg==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2017-07-03T07:23:01Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2017-07-03T07:23:01Z"}, "message": "Ignore EDGE_{DFS_BACK,EXECUTABLE} in tail-merge\n\n2017-07-03  Tom de Vries  <tom@codesourcery.com>\n\n\tPR tree-optimization/69468\n\t* tree-ssa-tail-merge.c (ignore_edge_flags): New constant.\n\t(find_same_succ_bb): Handle ignore_edge_flags.\n\n\t* gcc.dg/pr81192.c: Update.\n\nFrom-SVN: r249895", "tree": {"sha": "f038f1c503a53f4a60143e9abf2edddf027f23d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f038f1c503a53f4a60143e9abf2edddf027f23d9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/be086ff50c79270411f14eec2d8f02c2b5bdb322", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be086ff50c79270411f14eec2d8f02c2b5bdb322", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be086ff50c79270411f14eec2d8f02c2b5bdb322", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be086ff50c79270411f14eec2d8f02c2b5bdb322/comments", "author": null, "committer": null, "parents": [{"sha": "4752be4637d8250516dc0d8171b797de2b413d81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4752be4637d8250516dc0d8171b797de2b413d81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4752be4637d8250516dc0d8171b797de2b413d81"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "c95a82fd351b7de5eb1d08e8f64d91761c02ad6a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be086ff50c79270411f14eec2d8f02c2b5bdb322/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be086ff50c79270411f14eec2d8f02c2b5bdb322/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=be086ff50c79270411f14eec2d8f02c2b5bdb322", "patch": "@@ -1,3 +1,9 @@\n+2017-07-03  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR tree-optimization/69468\n+\t* tree-ssa-tail-merge.c (ignore_edge_flags): New constant.\n+\t(find_same_succ_bb): Handle ignore_edge_flags.\n+\n 2017-07-03  Tom de Vries  <tom@codesourcery.com>\n \n \tPR tree-optimization/81192"}, {"sha": "c52c7a838148856922a83f422c031473fb9a0da8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be086ff50c79270411f14eec2d8f02c2b5bdb322/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be086ff50c79270411f14eec2d8f02c2b5bdb322/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=be086ff50c79270411f14eec2d8f02c2b5bdb322", "patch": "@@ -1,3 +1,8 @@\n+2017-07-03  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR tree-optimization/69468\n+\t* gcc.dg/pr81192.c: Update.\n+\n 2017-07-03  Tom de Vries  <tom@codesourcery.com>\n \n \tPR tree-optimization/81192"}, {"sha": "57eb4781d4da1ac1c3aeb77b322ff1c36b0ddd57", "filename": "gcc/testsuite/gcc.dg/pr81192.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be086ff50c79270411f14eec2d8f02c2b5bdb322/gcc%2Ftestsuite%2Fgcc.dg%2Fpr81192.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be086ff50c79270411f14eec2d8f02c2b5bdb322/gcc%2Ftestsuite%2Fgcc.dg%2Fpr81192.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr81192.c?ref=be086ff50c79270411f14eec2d8f02c2b5bdb322", "patch": "@@ -19,4 +19,4 @@ fn2 (void)\n       ;\n }\n \n-/* { dg-final { scan-tree-dump-not \"(?n)find_duplicates: <bb .*> duplicate of <bb .*>\" \"pre\" } } */\n+/* { dg-final { scan-tree-dump-times \"(?n)find_duplicates: <bb .*> duplicate of <bb .*>\" 1 \"pre\" } } */"}, {"sha": "b11911b7f1e21b166f4156b9ebd3add0eb3689bd", "filename": "gcc/tree-ssa-tail-merge.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be086ff50c79270411f14eec2d8f02c2b5bdb322/gcc%2Ftree-ssa-tail-merge.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be086ff50c79270411f14eec2d8f02c2b5bdb322/gcc%2Ftree-ssa-tail-merge.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-tail-merge.c?ref=be086ff50c79270411f14eec2d8f02c2b5bdb322", "patch": "@@ -207,6 +207,8 @@ along with GCC; see the file COPYING3.  If not see\n #include \"tree-eh.h\"\n #include \"tree-cfgcleanup.h\"\n \n+const int ignore_edge_flags = EDGE_DFS_BACK | EDGE_EXECUTABLE;\n+\n /* Describes a group of bbs with the same successors.  The successor bbs are\n    cached in succs, and the successor edge flags are cached in succ_flags.\n    If a bb has the EDGE_TRUE/FALSE_VALUE flags swapped compared to succ_flags,\n@@ -707,7 +709,7 @@ find_same_succ_bb (basic_block bb, same_succ **same_p)\n     {\n       int index = e->dest->index;\n       bitmap_set_bit (same->succs, index);\n-      same_succ_edge_flags[index] = e->flags;\n+      same_succ_edge_flags[index] = (e->flags & ~ignore_edge_flags);\n     }\n   EXECUTE_IF_SET_IN_BITMAP (same->succs, 0, j, bj)\n     same->succ_flags.safe_push (same_succ_edge_flags[j]);"}]}