{"sha": "fbcdc43e3c209613bab6a58252eab3a6f436d7b1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmJjZGM0M2UzYzIwOTYxM2JhYjZhNTgyNTJlYWIzYTZmNDM2ZDdiMQ==", "commit": {"author": {"name": "Bill Schmidt", "email": "wschmidt@linux.vnet.ibm.com", "date": "2016-10-10T18:39:41Z"}, "committer": {"name": "William Schmidt", "email": "wschmidt@gcc.gnu.org", "date": "2016-10-10T18:39:41Z"}, "message": "re PR tree-optimization/77824 (unreachable code in SLSR GIMPLE pass)\n\n2016-10-10  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n\n\tPR tree-optimization/77824\n\t* gimple-ssa-strength-reduction.c (stmt_cost): Explicitly return\n\tzero cost for copies.\n\t(find_candidates_dom_walker::before_dom_children): Replace\n\tMODIFY_EXPR with SSA_NAME.\n\t(replace_mult_candidate): Likewise.\n\t(replace_profitable_candidates): Likewise.\n\nFrom-SVN: r240945", "tree": {"sha": "b44bb2b6cb820d025263e0f0a3e07607b3faf9b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b44bb2b6cb820d025263e0f0a3e07607b3faf9b2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fbcdc43e3c209613bab6a58252eab3a6f436d7b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbcdc43e3c209613bab6a58252eab3a6f436d7b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fbcdc43e3c209613bab6a58252eab3a6f436d7b1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbcdc43e3c209613bab6a58252eab3a6f436d7b1/comments", "author": {"login": "wschmidt-ibm", "id": 5520937, "node_id": "MDQ6VXNlcjU1MjA5Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/5520937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wschmidt-ibm", "html_url": "https://github.com/wschmidt-ibm", "followers_url": "https://api.github.com/users/wschmidt-ibm/followers", "following_url": "https://api.github.com/users/wschmidt-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/wschmidt-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/wschmidt-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wschmidt-ibm/subscriptions", "organizations_url": "https://api.github.com/users/wschmidt-ibm/orgs", "repos_url": "https://api.github.com/users/wschmidt-ibm/repos", "events_url": "https://api.github.com/users/wschmidt-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/wschmidt-ibm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e2be44770cb4cb5e81680d77b2f9ca350c0e346c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2be44770cb4cb5e81680d77b2f9ca350c0e346c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2be44770cb4cb5e81680d77b2f9ca350c0e346c"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "1738bc7e7feb534112738c1183913c2831c50610", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbcdc43e3c209613bab6a58252eab3a6f436d7b1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbcdc43e3c209613bab6a58252eab3a6f436d7b1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fbcdc43e3c209613bab6a58252eab3a6f436d7b1", "patch": "@@ -1,3 +1,13 @@\n+2016-10-10  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+\n+\tPR tree-optimization/77824\n+\t* gimple-ssa-strength-reduction.c (stmt_cost): Explicitly return\n+\tzero cost for copies.\n+\t(find_candidates_dom_walker::before_dom_children): Replace\n+\tMODIFY_EXPR with SSA_NAME.\n+\t(replace_mult_candidate): Likewise.\n+\t(replace_profitable_candidates): Likewise.\n+\n 2016-10-10  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n \n \t* config/s390/s390.h: Wrap more macros args in brackets and fix"}, {"sha": "b1a6602ef0248aea7cacca39edd78cce1c9cf76e", "filename": "gcc/gimple-ssa-strength-reduction.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbcdc43e3c209613bab6a58252eab3a6f436d7b1/gcc%2Fgimple-ssa-strength-reduction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbcdc43e3c209613bab6a58252eab3a6f436d7b1/gcc%2Fgimple-ssa-strength-reduction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-ssa-strength-reduction.c?ref=fbcdc43e3c209613bab6a58252eab3a6f436d7b1", "patch": "@@ -688,6 +688,9 @@ stmt_cost (gimple *gs, bool speed)\n \n     /* Note that we don't assign costs to copies that in most cases\n        will go away.  */\n+    case SSA_NAME:\n+      return 0;\n+      \n     default:\n       ;\n     }\n@@ -1693,7 +1696,7 @@ find_candidates_dom_walker::before_dom_children (basic_block bb)\n \t      gcc_fallthrough ();\n \n \t    CASE_CONVERT:\n-\t    case MODIFY_EXPR:\n+\t    case SSA_NAME:\n \t    case NEGATE_EXPR:\n \t      rhs1 = gimple_assign_rhs1 (gs);\n \t      if (TREE_CODE (rhs1) != SSA_NAME)\n@@ -1724,7 +1727,7 @@ find_candidates_dom_walker::before_dom_children (basic_block bb)\n \t      slsr_process_cast (gs, rhs1, speed);\n \t      break;\n \n-\t    case MODIFY_EXPR:\n+\t    case SSA_NAME:\n \t      slsr_process_copy (gs, rhs1, speed);\n \t      break;\n \n@@ -2010,7 +2013,7 @@ replace_mult_candidate (slsr_cand_t c, tree basis_name, widest_int bump)\n       && bump.to_shwi () != HOST_WIDE_INT_MIN\n       /* It is not useful to replace casts, copies, or adds of\n \t an SSA name and a constant.  */\n-      && cand_code != MODIFY_EXPR\n+      && cand_code != SSA_NAME\n       && !CONVERT_EXPR_CODE_P (cand_code)\n       && cand_code != PLUS_EXPR\n       && cand_code != POINTER_PLUS_EXPR\n@@ -3445,7 +3448,7 @@ replace_profitable_candidates (slsr_cand_t c)\n \t to a cast or copy.  */\n       if (i >= 0\n \t  && profitable_increment_p (i) \n-\t  && orig_code != MODIFY_EXPR\n+\t  && orig_code != SSA_NAME\n \t  && !CONVERT_EXPR_CODE_P (orig_code))\n \t{\n \t  if (phi_dependent_cand_p (c))"}]}