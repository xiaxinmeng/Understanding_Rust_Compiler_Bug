{"sha": "08cce8fe0c24e5f3b8d4c1c94da7fb71fa0e180a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDhjY2U4ZmUwYzI0ZTVmM2I4ZDRjMWM5NGRhN2ZiNzFmYTBlMTgwYQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2005-05-05T04:05:35Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-05-05T04:05:35Z"}, "message": "libstdc++.exp (v3-build_support): Look for __GTHREADS...\n\n\t* testsuite/lib/libstdc++.exp (v3-build_support): Look for\n\t__GTHREADS, rather than _GLIBCXX_HAVE_GTHR_DEFAULT, to determine\n\twhether or not thread support is available.\n\nFrom-SVN: r99256", "tree": {"sha": "4cf7cee10aa61552d83eabb4af2c7a22099a5b18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4cf7cee10aa61552d83eabb4af2c7a22099a5b18"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08cce8fe0c24e5f3b8d4c1c94da7fb71fa0e180a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08cce8fe0c24e5f3b8d4c1c94da7fb71fa0e180a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08cce8fe0c24e5f3b8d4c1c94da7fb71fa0e180a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08cce8fe0c24e5f3b8d4c1c94da7fb71fa0e180a/comments", "author": null, "committer": null, "parents": [{"sha": "86abebe2167a2bec26217d7c8a0c7397c249e331", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86abebe2167a2bec26217d7c8a0c7397c249e331", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86abebe2167a2bec26217d7c8a0c7397c249e331"}], "stats": {"total": 20, "additions": 12, "deletions": 8}, "files": [{"sha": "414e88390cf89693a1cf4f96e5ea0c98c874b7d7", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08cce8fe0c24e5f3b8d4c1c94da7fb71fa0e180a/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08cce8fe0c24e5f3b8d4c1c94da7fb71fa0e180a/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=08cce8fe0c24e5f3b8d4c1c94da7fb71fa0e180a", "patch": "@@ -1,5 +1,9 @@\n 2005-05-04  Mark Mitchell  <mark@codesourcery.com>\n \n+\t* testsuite/lib/libstdc++.exp (v3-build_support): Look for\n+\t__GTHREADS, rather than _GLIBCXX_HAVE_GTHR_DEFAULT, to determine\n+\twhether or not thread support is available.\n+\n \t* docs/html/test.html: Explain how to run the testsuite on an\n \tinstalled directory. \n "}, {"sha": "60624df260349eaff69ab94536dd3f73a8f56be9", "filename": "libstdc++-v3/testsuite/lib/libstdc++.exp", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08cce8fe0c24e5f3b8d4c1c94da7fb71fa0e180a/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08cce8fe0c24e5f3b8d4c1c94da7fb71fa0e180a/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp?ref=08cce8fe0c24e5f3b8d4c1c94da7fb71fa0e180a", "patch": "@@ -314,17 +314,17 @@ proc v3-build_support {} {\n     set config_src \"config.cc\"\n     set f [open $config_src \"w\"]\n     puts $f \"#include <bits/c++config.h>\"\n+    puts $f \"#include <bits/gthr.h>\"\n     close $f\n     set preprocessed [v3_target_compile $config_src \"\" \\\n \t    \t       preprocess \"additional_flags=-dN\"]\n-    foreach l $preprocessed {\n-\tif { [string first \"_GLIBCXX_USE_WCHAR_T\" $l] != -1 } {\n-\t    verbose -log \"wchar_t support detected\"\n-\t    set v3-wchar_t 1\n-\t} elseif { [string first \"_GLIBCXX_HAVE_GTHR_DEFAULT\" $l] != -1 } {\n-\t    verbose -log \"thread support detected\"\n-\t    set v3-threads 1\n-\t}\n+    if { [string first \"_GLIBCXX_USE_WCHAR_T\" $preprocessed] != -1 } {\n+\tverbose -log \"wchar_t support detected\"\n+\tset v3-wchar_t 1\n+    }\n+    if { [string first \"__GTHREADS\" $preprocessed] != -1 } {\n+\tverbose -log \"thread support detected\"\n+\tset v3-threads 1\n     }\n \n     # Build the support objects."}]}