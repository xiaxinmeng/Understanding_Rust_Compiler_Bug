{"sha": "4c184c2c88c78ec161c71c723695d2af5347f535", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGMxODRjMmM4OGM3OGVjMTYxYzcxYzcyMzY5NWQyYWY1MzQ3ZjUzNQ==", "commit": {"author": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "1998-05-28T09:21:29Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "1998-05-28T09:21:29Z"}, "message": "Changes for POSIX-ification (I hope)\n\nFrom-SVN: r20118", "tree": {"sha": "988b8ef4d7349931b146b238fdd85459261a205d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/988b8ef4d7349931b146b238fdd85459261a205d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c184c2c88c78ec161c71c723695d2af5347f535", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c184c2c88c78ec161c71c723695d2af5347f535", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c184c2c88c78ec161c71c723695d2af5347f535", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c184c2c88c78ec161c71c723695d2af5347f535/comments", "author": null, "committer": null, "parents": [{"sha": "c16b55aa5e485078ba5f1d58f0b03753a052da80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c16b55aa5e485078ba5f1d58f0b03753a052da80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c16b55aa5e485078ba5f1d58f0b03753a052da80"}], "stats": {"total": 21, "additions": 12, "deletions": 9}, "files": [{"sha": "381897181d03bdf36037fffdd209eb1621708acc", "filename": "contrib/fixinc/server.c", "status": "modified", "additions": 12, "deletions": 9, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c184c2c88c78ec161c71c723695d2af5347f535/contrib%2Ffixinc%2Fserver.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c184c2c88c78ec161c71c723695d2af5347f535/contrib%2Ffixinc%2Fserver.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Ffixinc%2Fserver.c?ref=4c184c2c88c78ec161c71c723695d2af5347f535", "patch": "@@ -1,6 +1,6 @@\n \n /*\n- *  $Id: server.c,v 1.1 1998/03/20 16:19:41 korbb Exp $\n+ *  $Id: server.c,v 1.2 1998/05/28 09:21:29 korbb Exp $\n  *\n  *  Server Handling copyright 1992-1998 Bruce Korb\n  *\n@@ -368,7 +368,7 @@ sigsend (idtype, id, sig)\n STATIC void\n closeServer ()\n {\n-  sigsend (P_PID, (id_t) serverId, SIGKILL);\n+  kill( (pid_t) serverId, SIGKILL);\n   serverId = NULLPROCESS;\n   fclose (serverPair.pfRead);\n   fclose (serverPair.pfWrite);\n@@ -392,15 +392,18 @@ sigHandler (signo)\n STATIC void\n serverSetup ()\n {\n-\n+#ifndef SA_SIGINFO\n+#  define SA_SIGINFO 0\n+#else\n   currentAction.sa_sigaction =\n-    currentAction.sa_handler = sigHandler;\n-  currentAction.sa_flags = SA_SIGINFO;\n-  sigemptyset (&currentAction.sa_mask);\n+#endif\n+  currentAction.sa_handler   = sigHandler;\n+  currentAction.sa_flags     = SA_SIGINFO;\n+  sigemptyset( &currentAction.sa_mask );\n \n-  sigaction (SIGPIPE, &currentAction, &savePipeAction);\n-  sigaction (SIGALRM, &currentAction, &saveAlrmAction);\n-  atexit (&closeServer);\n+  sigaction( SIGPIPE, &currentAction, &savePipeAction );\n+  sigaction( SIGALRM, &currentAction, &saveAlrmAction );\n+  atexit( &closeServer );\n \n   fputs (\"trap : INT\\n\", serverPair.pfWrite);\n   fflush (serverPair.pfWrite);"}]}