{"sha": "ad6e8e315fe13eb7010f308a81b8b72d61d27fdb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWQ2ZThlMzE1ZmUxM2ViNzAxMGYzMDhhODFiOGI3MmQ2MWQyN2ZkYg==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2014-07-21T10:54:47Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2014-07-21T10:54:47Z"}, "message": "Fix fuse-caller-save test-cases\n\n2014-07-21  Tom de Vries  <tom@codesourcery.com>\n\n\tPR target/61827\n\t* gcc.target/i386/fuse-caller-save-xmm.c: Allow LC0 without dot prefix\n\tfor darwin in scan-assembler-times check.\n\t* gcc.target/i386/fuse-caller-save.c: Remove cfi-related\n\tscan-assembler-not checks.  Add checks for insns.\n\t(main): Remove.\n\t* gcc.target/i386/fuse-caller-save-rec.c: Remove cfi-related\n\tscan-assembler-not checks.  Copy checks from i386/fuse-caller-save.c.\n\t(main): Remove.\n\nFrom-SVN: r212890", "tree": {"sha": "825ccf47a86abf2b711e0d1d58fb2a7cd5417dd2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/825ccf47a86abf2b711e0d1d58fb2a7cd5417dd2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb/comments", "author": null, "committer": null, "parents": [{"sha": "72c47e0d34d5af5ab7bb4b28e83ccceaed1c0c83", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72c47e0d34d5af5ab7bb4b28e83ccceaed1c0c83", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72c47e0d34d5af5ab7bb4b28e83ccceaed1c0c83"}], "stats": {"total": 39, "additions": 23, "deletions": 16}, "files": [{"sha": "15117ef5b26ecdbaf7a3c8dc92d8b02c66620fc6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ad6e8e315fe13eb7010f308a81b8b72d61d27fdb", "patch": "@@ -1,3 +1,15 @@\n+2014-07-21  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR target/61827\n+\t* gcc.target/i386/fuse-caller-save-xmm.c: Allow LC0 without dot prefix\n+\tfor darwin in scan-assembler-times check.\n+\t* gcc.target/i386/fuse-caller-save.c: Remove cfi-related\n+\tscan-assembler-not checks.  Add checks for insns.\n+\t(main): Remove.\n+\t* gcc.target/i386/fuse-caller-save-rec.c: Remove cfi-related\n+\tscan-assembler-not checks.  Copy checks from i386/fuse-caller-save.c.\n+\t(main): Remove.\n+\n 2014-07-21  Tom de Vries  <tom@codesourcery.com>\n \n \tPR target/61827"}, {"sha": "d1441bc54137f314998279bb40c730ee18778c12", "filename": "gcc/testsuite/gcc.target/i386/fuse-caller-save-rec.c", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuse-caller-save-rec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuse-caller-save-rec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuse-caller-save-rec.c?ref=ad6e8e315fe13eb7010f308a81b8b72d61d27fdb", "patch": "@@ -18,14 +18,12 @@ foo (int y)\n   return y + bar (y);\n }\n \n-int\n-main (void)\n-{\n-  return !(foo (5) == 13);\n-}\n+/* Check that no registers are saved/restored. */\n+/* { dg-final { scan-assembler-not \"push\"  } } */\n+/* { dg-final { scan-assembler-not \"pop\"  } } */\n \n-/* Verify that no registers where saved on stack.  */\n-/* { dg-final { scan-assembler-not \"\\.cfi_offset\"  } } */\n+/* Check that addition uses dx. */\n+/* { dg-final { scan-assembler-times \"addl\\t%\\[re\\]?dx, %\\[re\\]?ax\" 1 } } */\n \n /* Verify that bar is self-recursive.  */\n /* { dg-final { scan-assembler-times \"call\\tbar\" 2 } } */"}, {"sha": "4211a892442a2474628fee5c07f04f141d952505", "filename": "gcc/testsuite/gcc.target/i386/fuse-caller-save-xmm.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuse-caller-save-xmm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuse-caller-save-xmm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuse-caller-save-xmm.c?ref=ad6e8e315fe13eb7010f308a81b8b72d61d27fdb", "patch": "@@ -17,7 +17,7 @@ foo (v2df y)\n \n /* Check presence of all insns on xmm registers.  These checks are expected to\n    pass with both -fuse-caller-save and -fno-use-caller-save.  */\n-/* { dg-final { scan-assembler-times \"addpd\\t\\\\.LC0.*, %xmm0\" 1 } } */\n+/* { dg-final { scan-assembler-times \"addpd\\t\\\\.?LC0.*, %xmm0\" 1 } } */\n /* { dg-final { scan-assembler-times \"addpd\\t%xmm1, %xmm0\" 1 } } */\n /* { dg-final { scan-assembler-times \"movapd\\t%xmm0, %xmm1\" 1 } } */\n "}, {"sha": "7e2b11d6d57ea7b1d697a56dd916f4ae9114589e", "filename": "gcc/testsuite/gcc.target/i386/fuse-caller-save.c", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuse-caller-save.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad6e8e315fe13eb7010f308a81b8b72d61d27fdb/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuse-caller-save.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuse-caller-save.c?ref=ad6e8e315fe13eb7010f308a81b8b72d61d27fdb", "patch": "@@ -16,12 +16,9 @@ foo (int y)\n   return y + bar (y);\n }\n \n-int\n-main (void)\n-{\n-  return !(foo (5) == 13);\n-}\n-\n-/* { dg-final { scan-assembler-not \"\\.cfi_def_cfa_offset\"  } } */\n-/* { dg-final { scan-assembler-not \"\\.cfi_offset\"  } } */\n+/* Check that no registers are saved/restored. */\n+/* { dg-final { scan-assembler-not \"push\"  } } */\n+/* { dg-final { scan-assembler-not \"pop\"  } } */\n \n+/* Check that addition uses dx. */\n+/* { dg-final { scan-assembler-times \"addl\\t%\\[re\\]?dx, %\\[re\\]?ax\" 1 } } */"}]}