{"sha": "6039a93dd7214d5f1effdd2c165dc4e52b950139", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjAzOWE5M2RkNzIxNGQ1ZjFlZmZkZDJjMTY1ZGM0ZTUyYjk1MDEzOQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2004-02-05T19:01:20Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2004-02-05T19:01:20Z"}, "message": "tree.c (cp_cannot_inline_tree_fn): Allow inlining of comdat functions.\n\n\n\t* tree.c (cp_cannot_inline_tree_fn):  Allow inlining of comdat\n\tfunctions.\n\nFrom-SVN: r77330", "tree": {"sha": "bde2cf151d7286b5f7f3375f222e5f41d1f11f88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bde2cf151d7286b5f7f3375f222e5f41d1f11f88"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6039a93dd7214d5f1effdd2c165dc4e52b950139", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6039a93dd7214d5f1effdd2c165dc4e52b950139", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6039a93dd7214d5f1effdd2c165dc4e52b950139", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6039a93dd7214d5f1effdd2c165dc4e52b950139/comments", "author": null, "committer": null, "parents": [{"sha": "693dcd3d88f485a85a8cce67f4a42c24b8cc3a1f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/693dcd3d88f485a85a8cce67f4a42c24b8cc3a1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/693dcd3d88f485a85a8cce67f4a42c24b8cc3a1f"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "e1d559fbb24434eb86b23e26d53a22bceb6492cc", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6039a93dd7214d5f1effdd2c165dc4e52b950139/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6039a93dd7214d5f1effdd2c165dc4e52b950139/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6039a93dd7214d5f1effdd2c165dc4e52b950139", "patch": "@@ -1,3 +1,8 @@\n+2004-02-05  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree.c (cp_cannot_inline_tree_fn):  Allow inlining of comdat\n+\tfunctions.\n+\n 2003-02-05  Giovanni Bajo  <giovannibajo@gcc.gnu.org>\n \n \tPR c++/14008"}, {"sha": "e07ecd878d582ab64590e5828d801501ae0a9b74", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6039a93dd7214d5f1effdd2c165dc4e52b950139/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6039a93dd7214d5f1effdd2c165dc4e52b950139/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=6039a93dd7214d5f1effdd2c165dc4e52b950139", "patch": "@@ -2080,8 +2080,12 @@ cp_cannot_inline_tree_fn (tree* fnp)\n     return 1;\n \n   /* Don't auto-inline anything that might not be bound within\n-     this unit of translation.  */\n-  if (!DECL_DECLARED_INLINE_P (fn) && !(*targetm.binds_local_p) (fn))\n+     this unit of translation.\n+     Exclude comdat functions from this rule.  While they can be bound\n+     to the other unit, they all must be the same.  This is especilly\n+     important so templates can inline.  */\n+  if (!DECL_DECLARED_INLINE_P (fn) && !(*targetm.binds_local_p) (fn)\n+      && !DECL_COMDAT (fn))\n     {\n       DECL_UNINLINABLE (fn) = 1;\n       return 1;"}]}