{"sha": "5f11bc8b45cd3beac4fa60f5bad0ee43dde266af", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWYxMWJjOGI0NWNkM2JlYWM0ZmE2MGY1YmFkMGVlNDNkZGUyNjZhZg==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2004-09-10T18:54:31Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2004-09-10T18:54:31Z"}, "message": "output.h (unlikely_section_label): Delete declaration.\n\n\t* output.h (unlikely_section_label): Delete declaration.\n\t(unlikely_text_section_name): Likewise.\n\t* varasm.c (unlikely_section_label_printed): Make static.\n\t(unlikely_section_label): Likewise.\n\t(unlikely_text_section_name): Likewise.\n\nFrom-SVN: r87313", "tree": {"sha": "c363eda5a0c61f70b16243aa8b145619b2546b91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c363eda5a0c61f70b16243aa8b145619b2546b91"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5f11bc8b45cd3beac4fa60f5bad0ee43dde266af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f11bc8b45cd3beac4fa60f5bad0ee43dde266af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f11bc8b45cd3beac4fa60f5bad0ee43dde266af", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f11bc8b45cd3beac4fa60f5bad0ee43dde266af/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "18b3a02a1c6aa1d0b11547650b267d91813b6f5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18b3a02a1c6aa1d0b11547650b267d91813b6f5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18b3a02a1c6aa1d0b11547650b267d91813b6f5c"}], "stats": {"total": 31, "additions": 12, "deletions": 19}, "files": [{"sha": "8fd9a6a0e2fbe687395b877437b8bc81cdabc24c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f11bc8b45cd3beac4fa60f5bad0ee43dde266af/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f11bc8b45cd3beac4fa60f5bad0ee43dde266af/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5f11bc8b45cd3beac4fa60f5bad0ee43dde266af", "patch": "@@ -1,5 +1,12 @@\n 2004-09-10  Geoffrey Keating  <geoffk@apple.com>\n \n+\t* output.h (unlikely_section_label): Delete declaration.\n+\t(unlikely_text_section_name): Likewise.\n+\t* varasm.c (unlikely_section_label_printed): Make static.\n+\t(unlikely_section_label): Likewise.\n+\t(unlikely_text_section_name): Likewise.\n+\t(assemble_start_function): Use reconcat.\n+\n \t* rtl.def (REG): Add comment to describe third field.\n \n 2004-09-10  Andrew Pinski  <apinski@apple.com>\n@@ -230,7 +237,6 @@\n \t* config/cris/cris.md (\"return\"): For location of return address,\n \talso check cris_return_address_on_stack.\n \n->>>>>>> 2.5354\n 2004-09-09  Diego Novillo  <dnovillo@redhat.com>\n \n \t* tree-outof-ssa.c (coalesce_abnormal_edges): Fix typo in\n@@ -1287,7 +1293,6 @@\n \tconfig/rs6000/linux64.h: Likewise.  Split out get_sigcontext\n \tfunction.  Use ARG_POINTER_REGNUM for 32-bit temp reg too.\n \n->>>>>>> 2.5334\n 2004-09-07  Jan Hubicka  <jh@suse.cz>\n \n \t* cse.c (fold_rtx):  Avoid building of"}, {"sha": "1e1d1defa312933c0129c68eda3c2d116c568fcc", "filename": "gcc/output.h", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f11bc8b45cd3beac4fa60f5bad0ee43dde266af/gcc%2Foutput.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f11bc8b45cd3beac4fa60f5bad0ee43dde266af/gcc%2Foutput.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foutput.h?ref=5f11bc8b45cd3beac4fa60f5bad0ee43dde266af", "patch": "@@ -392,10 +392,6 @@ extern const char *first_global_object_name;\n /* The first weak object in the file.  */\n extern const char *weak_global_object_name;\n \n-/* Label at start of unlikely section, when partitioning hot/cold basic\n-   blocks.  */\n-extern char *unlikely_section_label;\n-\n /* Nonzero if function being compiled doesn't contain any calls\n    (ignoring the prologue and epilogue).  This is set prior to\n    local register allocation and is valid for the remaining\n@@ -442,12 +438,6 @@ extern tree last_assemble_variable_decl;\n extern bool decl_readonly_section (tree, int);\n extern bool decl_readonly_section_1 (tree, int, int);\n \n-/* The following global variable indicates the section name to be used\n-   for the current cold section, when partitioning hot and cold basic\n-   blocks into separate sections.  */\n-\n-extern char *unlikely_text_section_name;\n-\n /* This can be used to compute RELOC for the function above, when\n    given a constant expression.  */\n extern int compute_reloc_for_constant (tree);"}, {"sha": "1561dc7b7816899f9e609a1f5ce5c40c8fed79c6", "filename": "gcc/varasm.c", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f11bc8b45cd3beac4fa60f5bad0ee43dde266af/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f11bc8b45cd3beac4fa60f5bad0ee43dde266af/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=5f11bc8b45cd3beac4fa60f5bad0ee43dde266af", "patch": "@@ -104,19 +104,19 @@ tree last_assemble_variable_decl;\n    partitions hot and cold basic blocks into separate sections of the .o\n    file.  */\n \n-bool unlikely_section_label_printed = false;\n+static bool unlikely_section_label_printed = false;\n \n /* The following global variable indicates the label name to be put at\n    the start of the first cold section within each function, when\n    partitioning basic blocks into hot and cold sections.  */\n \n-char *unlikely_section_label = NULL;\n+static char *unlikely_section_label = NULL;\n  \n /* The following global variable indicates the section name to be used\n    for the current cold section, when partitioning hot and cold basic\n    blocks into separate sections.  */\n \n-char *unlikely_text_section_name = NULL;\n+static char *unlikely_text_section_name = NULL;\n \n /* We give all constants their own alias set.  Perhaps redundant with\n    MEM_READONLY_P, but pre-dates it.  */\n@@ -1187,10 +1187,8 @@ assemble_start_function (tree decl, const char *fnname)\n   unlikely_section_label_printed = false;\n   unlikely_text_section_name = NULL;\n   \n-  if (unlikely_section_label)\n-    free (unlikely_section_label);\n-  unlikely_section_label = xmalloc ((strlen (fnname) + 18) * sizeof (char));\n-  sprintf (unlikely_section_label, \"%s_unlikely_section\", fnname);\n+  unlikely_section_label = reconcat (unlikely_section_label, \n+\t\t\t\t     fnname, \".unlikely_section\", NULL);\n   \n   /* The following code does not need preprocessing in the assembler.  */\n "}]}