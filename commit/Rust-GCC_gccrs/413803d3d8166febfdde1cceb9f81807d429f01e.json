{"sha": "413803d3d8166febfdde1cceb9f81807d429f01e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDEzODAzZDNkODE2NmZlYmZkZGUxY2NlYjlmODE4MDdkNDI5ZjAxZQ==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-08-01T23:45:11Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-08-01T23:45:11Z"}, "message": "re PR c++/28250 (ICE with invalid catch)\n\n\tPR c++/28250\n\tPR c++/28257\n\tPR c++/28259\n\tPR c++/28267\n\t* toplev.c (compile_file): Return early on errorcount or sorrycount.\n\t* cgraphunit.c (cgraph_finalize_compilation_unit): Likewise.\n\t(cgraph_optimize): Likewise.\n\n\tPR c++/28250\n\t* g++.dg/eh/catch4.C: New test.\n\n\tPR c++/28257\n\t* g++.dg/other/qual1.C: New test.\n\n\tPR c++/28259\n\t* g++.dg/inherit/error2.C: New test.\n\n\tPR c++/28267\n\t* g++.dg/other/new1.C: New test.\n\n\t* g++.dg/warn/pr23075.C: Remove obsolete test.\n\t* g++.old-deja/g++.brendan/crash52.C: Remove dg-warning marker.\n\t* g++.old-deja/g++.jason/report.C: Remove dg-warning marker.\n\nFrom-SVN: r115866", "tree": {"sha": "0eb145643527d321f335c44b085ee5a642fe2c2f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0eb145643527d321f335c44b085ee5a642fe2c2f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/413803d3d8166febfdde1cceb9f81807d429f01e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/413803d3d8166febfdde1cceb9f81807d429f01e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/413803d3d8166febfdde1cceb9f81807d429f01e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/413803d3d8166febfdde1cceb9f81807d429f01e/comments", "author": null, "committer": null, "parents": [{"sha": "d2b815074b745370cc5ebb541dcf41b52ea8c648", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2b815074b745370cc5ebb541dcf41b52ea8c648", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2b815074b745370cc5ebb541dcf41b52ea8c648"}], "stats": {"total": 97, "additions": 87, "deletions": 10}, "files": [{"sha": "aaba0cc6f568a5bccef534e396a9d321aa30d3c1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=413803d3d8166febfdde1cceb9f81807d429f01e", "patch": "@@ -1,3 +1,13 @@\n+2006-08-01  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/28250\n+\tPR c++/28257\n+\tPR c++/28259\n+\tPR c++/28267\n+\t* toplev.c (compile_file): Return early on errorcount or sorrycount.\n+\t* cgraphunit.c (cgraph_finalize_compilation_unit): Likewise.\n+\t(cgraph_optimize): Likewise.\n+\n 2006-08-01  Stuart Hastings  <stuart@apple.com>\n \n \t* rtl.h (UINTVAL) New."}, {"sha": "256850224dbf1f90bc7564dcb77cc84680f4c725", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=413803d3d8166febfdde1cceb9f81807d429f01e", "patch": "@@ -1018,6 +1018,9 @@ cgraph_finalize_compilation_unit (void)\n   static struct cgraph_node *first_analyzed;\n   static struct cgraph_varpool_node *first_analyzed_var;\n \n+  if (errorcount || sorrycount)\n+    return;\n+\n   finish_aliases_1 ();\n \n   if (!flag_unit_at_a_time)\n@@ -1466,6 +1469,9 @@ ipa_passes (void)\n void\n cgraph_optimize (void)\n {\n+  if (errorcount || sorrycount)\n+    return;\n+\n #ifdef ENABLE_CHECKING\n   verify_cgraph ();\n #endif"}, {"sha": "48701d0b781a6bf4f76cd21fd018ce77ac9d03d2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=413803d3d8166febfdde1cceb9f81807d429f01e", "patch": "@@ -1,3 +1,21 @@\n+2006-08-01  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/28250\n+\t* g++.dg/eh/catch4.C: New test.\n+\n+\tPR c++/28257\n+\t* g++.dg/other/qual1.C: New test.\n+\n+\tPR c++/28259\n+\t* g++.dg/inherit/error2.C: New test.\n+\n+\tPR c++/28267\n+\t* g++.dg/other/new1.C: New test.\n+\n+\t* g++.dg/warn/pr23075.C: Remove obsolete test.\n+\t* g++.old-deja/g++.brendan/crash52.C: Remove dg-warning marker.\n+\t* g++.old-deja/g++.jason/report.C: Remove dg-warning marker.\n+\n 2006-07-31  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/28523"}, {"sha": "34cf712125f10bc0614cdb56cadf52ed7edde533", "filename": "gcc/testsuite/g++.dg/eh/catch4.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fcatch4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fcatch4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fcatch4.C?ref=413803d3d8166febfdde1cceb9f81807d429f01e", "patch": "@@ -0,0 +1,8 @@\n+// PR c++/28250\n+// { dg-do compile }\n+\n+void foo()\n+{\n+  try { throw; }\n+  catch () {}  // { dg-error \"type-specifier\" }\n+}"}, {"sha": "5a7c2940d272a8d8739b47de876aef719e3a723b", "filename": "gcc/testsuite/g++.dg/inherit/error2.C", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finherit%2Ferror2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finherit%2Ferror2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finherit%2Ferror2.C?ref=413803d3d8166febfdde1cceb9f81807d429f01e", "patch": "@@ -0,0 +1,16 @@\n+// PR c++/28259\n+// { dg-do compile }\n+\n+struct A\n+{\n+  virtual A* foo();\n+};\n+\n+struct B : virtual A;  // { dg-error \"before\" }\n+\n+struct C : A\n+{\n+  virtual B* foo();\n+};\n+\n+B* C::foo() { return 0; }"}, {"sha": "30b651326aa34787f86e6db914a6a328b51bed26", "filename": "gcc/testsuite/g++.dg/other/new1.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fnew1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fnew1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fnew1.C?ref=413803d3d8166febfdde1cceb9f81807d429f01e", "patch": "@@ -0,0 +1,14 @@\n+// PR c++/28267\n+// { dg-do compile }\n+\n+struct A\n+{\n+  A();\n+  void* operator new(__SIZE_TYPE__, int = X);  // { dg-error \"not declared\" }\n+  void operator delete(void*, int);\n+};\n+\n+void foo()\n+{\n+  new A;\n+}"}, {"sha": "bd6f234931c93de31775799a312e5ecd7ad6fd9b", "filename": "gcc/testsuite/g++.dg/other/qual1.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fqual1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fqual1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fqual1.C?ref=413803d3d8166febfdde1cceb9f81807d429f01e", "patch": "@@ -0,0 +1,11 @@\n+// PR c++/28257\n+// { dg-do compile }\n+\n+struct A\n+{\n+  int i;\n+  void foo()\n+  {\n+    int A::i = i;  // { dg-error \"extra qualification|not a static member\" }\n+  }\n+};"}, {"sha": "1521b658139c6c8af6371bec0cb4ac25dcde6401", "filename": "gcc/testsuite/g++.dg/warn/pr23075.C", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr23075.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr23075.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2Fpr23075.C?ref=413803d3d8166febfdde1cceb9f81807d429f01e", "patch": "@@ -7,8 +7,3 @@ foo (void)\n {\n   return;\t// { dg-error \"with no value\" }\n }\t\t// { dg-bogus \"control reaches end\" }\n-\n-int\n-bar (void)\n-{\n-}\t\t// { dg-warning \"control reaches end\" }"}, {"sha": "9e72fb5cbb034354639c23f1352f8f8b903605fe", "filename": "gcc/testsuite/g++.old-deja/g++.brendan/crash52.C", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.brendan%2Fcrash52.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.brendan%2Fcrash52.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.brendan%2Fcrash52.C?ref=413803d3d8166febfdde1cceb9f81807d429f01e", "patch": "@@ -10,5 +10,4 @@ public:\n \n A &f(A &a) {// { dg-error \"\" }  new decl.*\n   std::cout << \"Blah\\n\";\n-} // { dg-warning \"\" } no return\n-\n+}"}, {"sha": "e2d805e082c3b63401e271917250f5d3c95f93be", "filename": "gcc/testsuite/g++.old-deja/g++.jason/report.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.jason%2Freport.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.jason%2Freport.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.jason%2Freport.C?ref=413803d3d8166febfdde1cceb9f81807d429f01e", "patch": "@@ -56,7 +56,7 @@ bar2 baz (X::Y y)\t        // { dg-error \"\" } in this context\n   bar2 wa [5];\n   wa[0] = baz(f);\n   undef2 (1); // { dg-error \"\" } implicit declaration\n-} // { dg-warning \"\" } no return\n+}\n \n int ninny ()\n {\n@@ -71,4 +71,4 @@ int ninny ()\n int darg (char X::*p)\n {\n    undef3 (1); // { dg-error \"\" } implicit declaration\n-} // { dg-warning \"\" } no return\n+}"}, {"sha": "55019ed5413e98b3c3a30e36073ec48ea03a5553", "filename": "gcc/toplev.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/413803d3d8166febfdde1cceb9f81807d429f01e/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=413803d3d8166febfdde1cceb9f81807d429f01e", "patch": "@@ -1006,7 +1006,7 @@ compile_file (void)\n      what's left of the symbol table output.  */\n   timevar_pop (TV_PARSE);\n \n-  if (flag_syntax_only)\n+  if (flag_syntax_only || errorcount || sorrycount)\n     return;\n \n   lang_hooks.decls.final_write_globals ();"}]}