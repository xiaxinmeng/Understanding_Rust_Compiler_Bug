{"sha": "c4f6640537ff392ad466a83796e68fb79b512bee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzRmNjY0MDUzN2ZmMzkyYWQ0NjZhODM3OTZlNjhmYjc5YjUxMmJlZQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2002-11-25T23:17:31Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2002-11-25T23:17:31Z"}, "message": "Makefile.am (sources): Add guard.cc.\n\n\t* libsupc++/Makefile.am (sources): Add guard.cc.\n\t* libsupc++/Makefile.in: Regenerated.\n\t* libsupc++/cxxabi.h (__cxa_guard_acquire): New function.\n\t(__cxa_guard_release): Likewise.\n\t(__cxa_guard_abort): Likewise.\n\t* libsupc++/guard.cc: New file.\n\nFrom-SVN: r59475", "tree": {"sha": "4d7d6f3c4d6bb4f7992a62114aad66dbfef3dc40", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d7d6f3c4d6bb4f7992a62114aad66dbfef3dc40"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c4f6640537ff392ad466a83796e68fb79b512bee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4f6640537ff392ad466a83796e68fb79b512bee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4f6640537ff392ad466a83796e68fb79b512bee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4f6640537ff392ad466a83796e68fb79b512bee/comments", "author": null, "committer": null, "parents": [{"sha": "a91dce31a505155e1fab4d828178e1108e8ff801", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a91dce31a505155e1fab4d828178e1108e8ff801", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a91dce31a505155e1fab4d828178e1108e8ff801"}], "stats": {"total": 86, "additions": 81, "deletions": 5}, "files": [{"sha": "0aeaf55dfe89d2edd7fc2875afa9624066415759", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4f6640537ff392ad466a83796e68fb79b512bee/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4f6640537ff392ad466a83796e68fb79b512bee/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c4f6640537ff392ad466a83796e68fb79b512bee", "patch": "@@ -1,3 +1,12 @@\n+2002-11-25  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* libsupc++/Makefile.am (sources): Add guard.cc.\n+\t* libsupc++/Makefile.in: Regenerated.\n+\t* libsupc++/cxxabi.h (__cxa_guard_acquire): New function.\n+\t(__cxa_guard_release): Likewise.\n+\t(__cxa_guard_abort): Likewise.\n+\t* libsupc++/guard.cc: New file.\n+\n 2002-11-25  Wolfgang Bangerth  <bangerth@ticam.utexas.edu>\n \n \t* include/std/std_complex.h"}, {"sha": "160e79f714eb6397536ebc56a0a9d4ae3f48e5ec", "filename": "libstdc++-v3/libsupc++/Makefile.am", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4f6640537ff392ad466a83796e68fb79b512bee/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4f6640537ff392ad466a83796e68fb79b512bee/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2FMakefile.am?ref=c4f6640537ff392ad466a83796e68fb79b512bee", "patch": "@@ -84,6 +84,7 @@ sources = \\\n \teh_terminate.cc \\\n \teh_throw.cc \\\n \teh_type.cc \\\n+\tguard.cc \\\n \tnew_handler.cc \\\n \tnew_op.cc \\\n \tnew_opnt.cc \\"}, {"sha": "b517b458dd8d0d702da3e74257c8305772f613a8", "filename": "libstdc++-v3/libsupc++/Makefile.in", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4f6640537ff392ad466a83796e68fb79b512bee/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4f6640537ff392ad466a83796e68fb79b512bee/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2FMakefile.in?ref=c4f6640537ff392ad466a83796e68fb79b512bee", "patch": "@@ -193,6 +193,7 @@ sources = \\\n \teh_terminate.cc \\\n \teh_throw.cc \\\n \teh_type.cc \\\n+\tguard.cc \\\n \tnew_handler.cc \\\n \tnew_op.cc \\\n \tnew_opnt.cc \\\n@@ -289,15 +290,15 @@ libsupc__convenience_la_LIBADD =\n libsupc__convenience_la_OBJECTS =  del_op.lo del_opnt.lo del_opv.lo \\\n del_opvnt.lo eh_alloc.lo eh_aux_runtime.lo eh_catch.lo eh_exception.lo \\\n eh_globals.lo eh_personality.lo eh_terminate.lo eh_throw.lo eh_type.lo \\\n-new_handler.lo new_op.lo new_opnt.lo new_opv.lo new_opvnt.lo pure.lo \\\n-tinfo.lo tinfo2.lo vec.lo cxa_demangle.lo dyn-string.lo\n+guard.lo new_handler.lo new_op.lo new_opnt.lo new_opv.lo new_opvnt.lo \\\n+pure.lo tinfo.lo tinfo2.lo vec.lo cxa_demangle.lo dyn-string.lo\n libsupc___la_LDFLAGS = \n libsupc___la_LIBADD = \n libsupc___la_OBJECTS =  del_op.lo del_opnt.lo del_opv.lo del_opvnt.lo \\\n eh_alloc.lo eh_aux_runtime.lo eh_catch.lo eh_exception.lo eh_globals.lo \\\n-eh_personality.lo eh_terminate.lo eh_throw.lo eh_type.lo new_handler.lo \\\n-new_op.lo new_opnt.lo new_opv.lo new_opvnt.lo pure.lo tinfo.lo \\\n-tinfo2.lo vec.lo cxa_demangle.lo dyn-string.lo\n+eh_personality.lo eh_terminate.lo eh_throw.lo eh_type.lo guard.lo \\\n+new_handler.lo new_op.lo new_opnt.lo new_opv.lo new_opvnt.lo pure.lo \\\n+tinfo.lo tinfo2.lo vec.lo cxa_demangle.lo dyn-string.lo\n CXXFLAGS = @CXXFLAGS@\n CXXCOMPILE = $(CXX) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)\n CXXLD = $(CXX)"}, {"sha": "3132187761c2cb4442f2809e695bdb99d6cf42e6", "filename": "libstdc++-v3/libsupc++/cxxabi.h", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4f6640537ff392ad466a83796e68fb79b512bee/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fcxxabi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4f6640537ff392ad466a83796e68fb79b512bee/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fcxxabi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fcxxabi.h?ref=c4f6640537ff392ad466a83796e68fb79b512bee", "patch": "@@ -500,6 +500,20 @@ void __cxa_vec_delete3 (void *__array_address,\n                         __SIZE_TYPE__ __padding_size,\n                         void (*__destructor) (void *),\n                         void (*__dealloc) (void *, __SIZE_TYPE__));\n+\n+/* guard variables */\n+\n+/* The ABI requires a 64-bit type.  */\n+__extension__ typedef int __guard __attribute__((mode (__DI__)));\n+\n+extern \"C\"\n+int __cxa_guard_acquire (__guard *);\n+\n+extern \"C\"\n+void __cxa_guard_release (__guard *);\n+\n+extern \"C\"\n+void __cxa_guard_abort (__guard *);\n                   \n /* demangling routines */\n "}, {"sha": "b93cffd2e20829ffe95c3082f2682af7c9164f65", "filename": "libstdc++-v3/libsupc++/guard.cc", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4f6640537ff392ad466a83796e68fb79b512bee/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fguard.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4f6640537ff392ad466a83796e68fb79b512bee/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fguard.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fguard.cc?ref=c4f6640537ff392ad466a83796e68fb79b512bee", "patch": "@@ -0,0 +1,51 @@\n+// Copyright (C) 2002 Free Software Foundation, Inc.\n+//  \n+// This file is part of GCC.\n+//\n+// GCC is free software; you can redistribute it and/or modify\n+// it under the terms of the GNU General Public License as published by\n+// the Free Software Foundation; either version 2, or (at your option)\n+// any later version.\n+\n+// GCC is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License\n+// along with GCC; see the file COPYING.  If not, write to\n+// the Free Software Foundation, 59 Temple Place - Suite 330,\n+// Boston, MA 02111-1307, USA. \n+\n+// As a special exception, you may use this file as part of a free software\n+// library without restriction.  Specifically, if other files instantiate\n+// templates or use macros or inline functions from this file, or you compile\n+// this file and link it with other files to produce an executable, this\n+// file does not by itself cause the resulting executable to be covered by\n+// the GNU General Public License.  This exception does not however\n+// invalidate any other reasons why the executable file might be covered by\n+// the GNU General Public License.\n+\n+// Written by Mark Mitchell, CodeSourcery LLC, <mark@codesourcery.com>\n+\n+#include <cxxabi.h>\n+\n+namespace __cxxabiv1 \n+{\n+  extern \"C\"\n+  int __cxa_guard_acquire (__guard *g) \n+  {\n+    return !*(char *)(g);\n+  }\n+\n+  extern \"C\"\n+  void __cxa_guard_release (__guard *g)\n+  {\n+    *(char *)g = 1;\n+  }\n+\n+  extern \"C\"\n+  void __cxa_guard_abort (__guard *)\n+  {\n+  }\n+}"}]}