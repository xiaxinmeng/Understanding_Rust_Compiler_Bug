{"sha": "7725086e26b7642b85d2a2461d2039d2a67ae138", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzcyNTA4NmUyNmI3NjQyYjg1ZDJhMjQ2MWQyMDM5ZDJhNjdhZTEzOA==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2010-09-26T07:26:20Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2010-09-26T07:26:20Z"}, "message": "mips.c (mips_builtin_decls): Declare.\n\ngcc/\n\t* config/mips/mips.c (mips_builtin_decls): Declare.\n\t(mips_init_builtins): Store function declarations in\n\tmips_builtin_decls.\n\t(mips_builtin_decl): New function.\n\t(TARGET_BUILTIN_DECL): Define.\n\nFrom-SVN: r164629", "tree": {"sha": "2f4cc587660fcd98a92634a391cbf4d025a86659", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f4cc587660fcd98a92634a391cbf4d025a86659"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7725086e26b7642b85d2a2461d2039d2a67ae138", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7725086e26b7642b85d2a2461d2039d2a67ae138", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7725086e26b7642b85d2a2461d2039d2a67ae138", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7725086e26b7642b85d2a2461d2039d2a67ae138/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "174425adcde4e0f7205e9ac6832f4e7a451b123e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/174425adcde4e0f7205e9ac6832f4e7a451b123e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/174425adcde4e0f7205e9ac6832f4e7a451b123e"}], "stats": {"total": 31, "additions": 28, "deletions": 3}, "files": [{"sha": "9678b50258ca01bdb95e02a2e10a363210dfa932", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7725086e26b7642b85d2a2461d2039d2a67ae138/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7725086e26b7642b85d2a2461d2039d2a67ae138/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7725086e26b7642b85d2a2461d2039d2a67ae138", "patch": "@@ -1,3 +1,11 @@\n+2010-09-26  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\t* config/mips/mips.c (mips_builtin_decls): Declare.\n+\t(mips_init_builtins): Store function declarations in\n+\tmips_builtin_decls.\n+\t(mips_builtin_decl): New function.\n+\t(TARGET_BUILTIN_DECL): Define.\n+\n 2010-09-25  Kai Tietz  <kai.tietz@onevision.com>\n \t    Richard Henderson  <rth@redhat.com>\n "}, {"sha": "56e4f2da16fd60592049143acea65a9bc8ee37db", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 20, "deletions": 3, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7725086e26b7642b85d2a2461d2039d2a67ae138/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7725086e26b7642b85d2a2461d2039d2a67ae138/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=7725086e26b7642b85d2a2461d2039d2a67ae138", "patch": "@@ -13025,6 +13025,10 @@ static const struct mips_builtin_description mips_builtins[] = {\n   DIRECT_NO_TARGET_BUILTIN (cache, MIPS_VOID_FTYPE_SI_CVPOINTER, cache)\n };\n \n+/* Index I is the function declaration for mips_builtins[I], or null if the\n+   function isn't defined on this target.  */\n+static GTY(()) tree mips_builtin_decls[ARRAY_SIZE (mips_builtins)];\n+\n /* MODE is a vector mode whose elements have type TYPE.  Return the type\n    of the vector itself.  */\n \n@@ -13141,12 +13145,23 @@ mips_init_builtins (void)\n     {\n       d = &mips_builtins[i];\n       if (d->avail ())\n-\tadd_builtin_function (d->name,\n-\t\t\t      mips_build_function_type (d->function_type),\n-\t\t\t      i, BUILT_IN_MD, NULL, NULL);\n+\tmips_builtin_decls[i]\n+\t  = add_builtin_function (d->name,\n+\t\t\t\t  mips_build_function_type (d->function_type),\n+\t\t\t\t  i, BUILT_IN_MD, NULL, NULL);\n     }\n }\n \n+/* Implement TARGET_BUILTIN_DECL.  */\n+\n+static tree\n+mips_builtin_decl (unsigned int code, bool initialize_p ATTRIBUTE_UNUSED)\n+{\n+  if (code >= ARRAY_SIZE (mips_builtins))\n+    return error_mark_node;\n+  return mips_builtin_decls[code];\n+}\n+\n /* Take argument ARGNO from EXP's argument list and convert it into a\n    form suitable for input operand OPNO of instruction ICODE.  Return the\n    value.  */\n@@ -16519,6 +16534,8 @@ mips_shift_truncation_mask (enum machine_mode mode)\n \n #undef TARGET_INIT_BUILTINS\n #define TARGET_INIT_BUILTINS mips_init_builtins\n+#undef TARGET_BUILTIN_DECL\n+#define TARGET_BUILTIN_DECL mips_builtin_decl\n #undef TARGET_EXPAND_BUILTIN\n #define TARGET_EXPAND_BUILTIN mips_expand_builtin\n "}]}