{"sha": "f1e2879ecfc8897df0e25a53e81d1868363c5e08", "node_id": "C_kwDOANBUbNoAKGYxZTI4NzllY2ZjODg5N2RmMGUyNWE1M2U4MWQxODY4MzYzYzVlMDg", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2020-09-02T19:33:00Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2021-11-05T21:00:53Z"}, "message": "Darwin : Make trampoline templates linker-visible.\n\nFor aarch64, the alignment of the LTRAMPn symbols matters.\n\nActually, the LTRAMPn  symbols _are_ 8 byte aligned, but because\nthey are Local, the linker doesn't know that this guarantee can be met.\nIt assumes that they are not necessarily more aligned than the\ncontaining section (ld64 atoms strike again).\n\nThe fix is to publish the trampoline symbol for the linker to access\ndirectly - it can then see that the atom is suitably aligned.\n\nFixes issue #11 on the development branch.\n\nSigned-off-by: Iain Sandoe <iain@sandoe.co.uk>\n\ngcc/ChangeLog:\n\n\t* config/darwin.h (ASM_GENERATE_INTERNAL_LABEL): Add LTRAMP\n\tto the list of symbol prefixes that must be made linker-\n\tvisible.", "tree": {"sha": "2e1f116e884e1c42932bcfca88b89ad928d5b8c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2e1f116e884e1c42932bcfca88b89ad928d5b8c1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f1e2879ecfc8897df0e25a53e81d1868363c5e08", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1e2879ecfc8897df0e25a53e81d1868363c5e08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1e2879ecfc8897df0e25a53e81d1868363c5e08", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1e2879ecfc8897df0e25a53e81d1868363c5e08/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f8a1e0699328268e98e18eb100f5af37e92dab9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8a1e0699328268e98e18eb100f5af37e92dab9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8a1e0699328268e98e18eb100f5af37e92dab9f"}], "stats": {"total": 2, "additions": 2, "deletions": 0}, "files": [{"sha": "e54cbb11cee6ab05900587268c7b91a66ad33f59", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1e2879ecfc8897df0e25a53e81d1868363c5e08/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1e2879ecfc8897df0e25a53e81d1868363c5e08/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=f1e2879ecfc8897df0e25a53e81d1868363c5e08", "patch": "@@ -921,6 +921,8 @@ extern GTY(()) section * darwin_sections[NUM_DARWIN_SECTIONS];\n       sprintf (LABEL, \"*%s%ld\", \"lubsan_type\", (long)(NUM));\\\n     else if (strcmp (\"LASAN\", PREFIX) == 0)\t\\\n       sprintf (LABEL, \"*%s%ld\", \"lASAN\", (long)(NUM));\\\n+    else if (strcmp (\"LTRAMP\", PREFIX) == 0)\t\\\n+      sprintf (LABEL, \"*%s%ld\", \"lTRAMP\", (long)(NUM));\\\n     else\t\t\t\t\t\t\\\n       sprintf (LABEL, \"*%s%ld\", PREFIX, (long)(NUM));\t\\\n   } while (0)"}]}