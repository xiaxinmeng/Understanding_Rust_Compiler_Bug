{"sha": "3c9b21309942ec8b66c000356452f4d0f2e7a610", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2M5YjIxMzA5OTQyZWM4YjY2YzAwMDM1NjQ1MmY0ZDBmMmU3YTYxMA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-06-28T17:41:52Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-06-28T17:41:52Z"}, "message": "(andsi3+6): Replace bad clrbit pattern with two working ones.\n\nFrom-SVN: r7585", "tree": {"sha": "3182a8cb20f637e1ba8c63f7b4be137d5412d941", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3182a8cb20f637e1ba8c63f7b4be137d5412d941"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3c9b21309942ec8b66c000356452f4d0f2e7a610", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c9b21309942ec8b66c000356452f4d0f2e7a610", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c9b21309942ec8b66c000356452f4d0f2e7a610", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c9b21309942ec8b66c000356452f4d0f2e7a610/comments", "author": null, "committer": null, "parents": [{"sha": "3bbbf89c84217eb443e20347c635a73c58ce99fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bbbf89c84217eb443e20347c635a73c58ce99fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3bbbf89c84217eb443e20347c635a73c58ce99fc"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "5a93cfe0455347ee617ac719554961cc419e61de", "filename": "gcc/config/i960/i960.md", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c9b21309942ec8b66c000356452f4d0f2e7a610/gcc%2Fconfig%2Fi960%2Fi960.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c9b21309942ec8b66c000356452f4d0f2e7a610/gcc%2Fconfig%2Fi960%2Fi960.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi960%2Fi960.md?ref=3c9b21309942ec8b66c000356452f4d0f2e7a610", "patch": "@@ -1657,14 +1657,25 @@\n   return \\\"clrbit\t%2,%1,%0\\\";\n }\")\n \n+;; (not (ashift 1 reg)) canonicalizes to (rotate -2 reg)\n (define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=d\")\n-\t(and:SI (ashift:SI (const_int 1)\n+\t(and:SI (rotate:SI (const_int -2)\n \t\t\t   (match_operand:SI 1 \"register_operand\" \"d\"))\n-\t\t(match_operand:SI 2 \"arith_operand\" \"dI\")))]\n+\t\t(match_operand:SI 2 \"register_operand\" \"d\")))]\n   \"\"\n   \"clrbit\t%1,%2,%0\")\n \n+;; The above pattern canonicalizes to this when both the input and output\n+;; are the same pseudo-register.\n+(define_insn \"\"\n+  [(set (zero_extract:SI (match_operand:SI 0 \"register_operand\" \"=d\")\n+\t\t\t (const_int 1)\n+\t\t\t (match_operand:SI 1 \"register_operand\" \"d\"))\n+\t(const_int 0))]\n+  \"\"\n+  \"clrbit\t%1,%0,%0\")\n+\n (define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=d\")\n \t(xor:SI (match_operand:SI 1 \"arith_operand\" \"dI\")"}]}