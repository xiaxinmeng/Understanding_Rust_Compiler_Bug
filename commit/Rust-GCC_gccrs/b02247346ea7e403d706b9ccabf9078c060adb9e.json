{"sha": "b02247346ea7e403d706b9ccabf9078c060adb9e", "node_id": "C_kwDOANBUbNoAKGIwMjI0NzM0NmVhN2U0MDNkNzA2YjljY2FiZjkwNzhjMDYwYWRiOWU", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-02-11T21:17:05Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-02-11T21:41:43Z"}, "message": "libstdc++: Fix test failures at -O0\n\nlibstdc++-v3/ChangeLog:\n\n\t* testsuite/20_util/monotonic_buffer_resource/allocate.cc:\n\tIgnore -Walloc-larger-than warning.\n\t* testsuite/20_util/unsynchronized_pool_resource/allocate.cc:\n\tLikewise.\n\t* testsuite/29_atomics/atomic/cons/user_pod.cc: Compile with -O1\n\tto avoid linker error for __atomic_is_lock_free.", "tree": {"sha": "a184770b98cdb4a3dccec0195d1f8a386620e0b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a184770b98cdb4a3dccec0195d1f8a386620e0b4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b02247346ea7e403d706b9ccabf9078c060adb9e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b02247346ea7e403d706b9ccabf9078c060adb9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b02247346ea7e403d706b9ccabf9078c060adb9e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b02247346ea7e403d706b9ccabf9078c060adb9e/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9355a8c35883b5125851bb9b4169a1a1cd8e343f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9355a8c35883b5125851bb9b4169a1a1cd8e343f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9355a8c35883b5125851bb9b4169a1a1cd8e343f"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "e7a0e97c9f9fc0a9abe4a6bf361ffcb2cfafe7a4", "filename": "libstdc++-v3/testsuite/20_util/monotonic_buffer_resource/allocate.cc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b02247346ea7e403d706b9ccabf9078c060adb9e/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fmonotonic_buffer_resource%2Fallocate.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b02247346ea7e403d706b9ccabf9078c060adb9e/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fmonotonic_buffer_resource%2Fallocate.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fmonotonic_buffer_resource%2Fallocate.cc?ref=b02247346ea7e403d706b9ccabf9078c060adb9e", "patch": "@@ -238,8 +238,11 @@ test07()\n   std::pmr::monotonic_buffer_resource mbr(&cr);\n   try\n   {\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Walloc-size-larger-than=\"\n     // Try to allocate a ridiculous size:\n     void* p = mbr.allocate(std::size_t(-2), 1);\n+#pragma GCC diagnostic pop\n     // Should not reach here!\n     VERIFY( !\"attempt to allocate SIZE_MAX-1 should not have succeeded\" );\n     throw p;"}, {"sha": "25e5ce63b588ad9d3b0d9abd27f967475fc693a9", "filename": "libstdc++-v3/testsuite/20_util/unsynchronized_pool_resource/allocate.cc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b02247346ea7e403d706b9ccabf9078c060adb9e/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funsynchronized_pool_resource%2Fallocate.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b02247346ea7e403d706b9ccabf9078c060adb9e/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funsynchronized_pool_resource%2Fallocate.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funsynchronized_pool_resource%2Fallocate.cc?ref=b02247346ea7e403d706b9ccabf9078c060adb9e", "patch": "@@ -281,10 +281,13 @@ test07()\n   std::pmr::unsynchronized_pool_resource upr(&cr);\n   try\n   {\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Walloc-size-larger-than=\"\n     // Try to allocate a ridiculous size (and use a large extended alignment\n     // so that careful_resource::do_allocate can distinguish this allocation\n     // from any required for the pool resource's internal data structures):\n     void* p = upr.allocate(std::size_t(-2), 1024);\n+#pragma GCC distinguish pop\n     // Should not reach here!\n     VERIFY( !\"attempt to allocate SIZE_MAX-1 should not have succeeded\" );\n     throw p;"}, {"sha": "285b420eef15cd8a2865e291ea4ddea93d1c0f1b", "filename": "libstdc++-v3/testsuite/29_atomics/atomic/cons/user_pod.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b02247346ea7e403d706b9ccabf9078c060adb9e/libstdc%2B%2B-v3%2Ftestsuite%2F29_atomics%2Fatomic%2Fcons%2Fuser_pod.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b02247346ea7e403d706b9ccabf9078c060adb9e/libstdc%2B%2B-v3%2Ftestsuite%2F29_atomics%2Fatomic%2Fcons%2Fuser_pod.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F29_atomics%2Fatomic%2Fcons%2Fuser_pod.cc?ref=b02247346ea7e403d706b9ccabf9078c060adb9e", "patch": "@@ -1,3 +1,4 @@\n+// { dg-options \"-O1\" }\n // { dg-do link { target c++11 } }\n \n // Copyright (C) 2009-2022 Free Software Foundation, Inc."}]}