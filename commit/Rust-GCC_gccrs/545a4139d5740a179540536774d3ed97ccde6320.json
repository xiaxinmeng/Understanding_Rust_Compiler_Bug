{"sha": "545a4139d5740a179540536774d3ed97ccde6320", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ1YTQxMzlkNTc0MGExNzk1NDA1MzY3NzRkM2VkOTdjY2RlNjMyMA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2016-04-13T17:11:03Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2016-04-13T17:11:03Z"}, "message": "re PR c++/70635 (ICE on (and rejects) valid code on x86_64-linux-gnu: Segmentation fault (program cc1plus))\n\n/cp\n2016-04-13  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/70635\n\t* pt.c (resolve_typename_type): Fix typos in infinite recursion\n\tavoidance mechanism.\n\n/testsuite\n2016-04-13  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/70635\n\t* g++.dg/parse/pr70635.C: New.\n\nFrom-SVN: r234953", "tree": {"sha": "197e7bc7f0591be5ef92e3cbe4e7064f61270bf7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/197e7bc7f0591be5ef92e3cbe4e7064f61270bf7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/545a4139d5740a179540536774d3ed97ccde6320", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/545a4139d5740a179540536774d3ed97ccde6320", "html_url": "https://github.com/Rust-GCC/gccrs/commit/545a4139d5740a179540536774d3ed97ccde6320", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/545a4139d5740a179540536774d3ed97ccde6320/comments", "author": null, "committer": null, "parents": [{"sha": "b3a77f2137ef26d4d74cc40af7a42be7901ac98d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3a77f2137ef26d4d74cc40af7a42be7901ac98d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3a77f2137ef26d4d74cc40af7a42be7901ac98d"}], "stats": {"total": 40, "additions": 38, "deletions": 2}, "files": [{"sha": "8f1ae231521f703cb9c0bdd5ef29675d0392778f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/545a4139d5740a179540536774d3ed97ccde6320/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/545a4139d5740a179540536774d3ed97ccde6320/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=545a4139d5740a179540536774d3ed97ccde6320", "patch": "@@ -1,3 +1,9 @@\n+2016-04-13  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/70635\n+\t* pt.c (resolve_typename_type): Fix typos in infinite recursion\n+\tavoidance mechanism.\n+\n 2016-04-13  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/70634"}, {"sha": "d066e559d0c7e56e1855a8fa07c82be32de9d273", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/545a4139d5740a179540536774d3ed97ccde6320/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/545a4139d5740a179540536774d3ed97ccde6320/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=545a4139d5740a179540536774d3ed97ccde6320", "patch": "@@ -23595,9 +23595,9 @@ resolve_typename_type (tree type, bool only_current_p)\n     {\n       /* Ill-formed programs can cause infinite recursion here, so we\n \t must catch that.  */\n-      TYPENAME_IS_RESOLVING_P (type) = 1;\n+      TYPENAME_IS_RESOLVING_P (result) = 1;\n       result = resolve_typename_type (result, only_current_p);\n-      TYPENAME_IS_RESOLVING_P (type) = 0;\n+      TYPENAME_IS_RESOLVING_P (result) = 0;\n     }\n   \n   /* Qualify the resulting type.  */"}, {"sha": "b16fadcbf360d55897d33b70aa91e0a507fe579f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/545a4139d5740a179540536774d3ed97ccde6320/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/545a4139d5740a179540536774d3ed97ccde6320/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=545a4139d5740a179540536774d3ed97ccde6320", "patch": "@@ -1,3 +1,8 @@\n+2016-04-13  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/70635\n+\t* g++.dg/parse/pr70635.C: New.\n+\n 2016-04-13  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/70639"}, {"sha": "0873840daf50e3977611510ef96270883980a851", "filename": "gcc/testsuite/g++.dg/parse/pr70635.C", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/545a4139d5740a179540536774d3ed97ccde6320/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fpr70635.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/545a4139d5740a179540536774d3ed97ccde6320/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fpr70635.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fpr70635.C?ref=545a4139d5740a179540536774d3ed97ccde6320", "patch": "@@ -0,0 +1,25 @@\n+// PR c++/70635\n+// { dg-options \"-fpermissive -w\" }\n+\n+template < typename T > \n+struct A\n+{\n+  struct B;\n+  typedef typename B::type type;\n+};\n+\n+template < typename T > \n+struct A < T >::B\n+{\n+  typedef typename A < type >::type type;  // { dg-error \"type\" }\n+  type Foo ();\n+};\n+\n+template < typename T > \n+typename A < T >::B::type\n+A < T >::B::Foo ()\n+{\n+  return 0;\n+}\n+\n+template class A<int>;"}]}