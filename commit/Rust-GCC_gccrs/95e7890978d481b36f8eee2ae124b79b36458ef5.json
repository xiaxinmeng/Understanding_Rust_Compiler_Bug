{"sha": "95e7890978d481b36f8eee2ae124b79b36458ef5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTVlNzg5MDk3OGQ0ODFiMzZmOGVlZTJhZTEyNGI3OWIzNjQ1OGVmNQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-04-23T10:56:52Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-04-23T10:56:52Z"}, "message": "(convert_to_integer...\n\n(convert_to_integer, convert_to_complex): Avoid using\nbuild_{unary,binary}_op since the calling sequences depend on the\nfront-end.\n\nFrom-SVN: r4196", "tree": {"sha": "5ad2d882cfd3558d595df83fee99314101e583d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ad2d882cfd3558d595df83fee99314101e583d7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/95e7890978d481b36f8eee2ae124b79b36458ef5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95e7890978d481b36f8eee2ae124b79b36458ef5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95e7890978d481b36f8eee2ae124b79b36458ef5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95e7890978d481b36f8eee2ae124b79b36458ef5/comments", "author": null, "committer": null, "parents": [{"sha": "da120c2f90a1e4569629883091c842b01b34e103", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da120c2f90a1e4569629883091c842b01b34e103", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da120c2f90a1e4569629883091c842b01b34e103"}], "stats": {"total": 22, "additions": 13, "deletions": 9}, "files": [{"sha": "7261e1baa8ed2db88c94bfb345e28dfb49ef5817", "filename": "gcc/convert.c", "status": "modified", "additions": 13, "deletions": 9, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95e7890978d481b36f8eee2ae124b79b36458ef5/gcc%2Fconvert.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95e7890978d481b36f8eee2ae124b79b36458ef5/gcc%2Fconvert.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconvert.c?ref=95e7890978d481b36f8eee2ae124b79b36458ef5", "patch": "@@ -269,10 +269,10 @@ convert_to_integer (type, expr)\n \t\t\t      || TREE_UNSIGNED (TREE_TYPE (arg1)))\n \t\t\t     ? unsigned_type (typex) : signed_type (typex));\n \t\t    return convert (type,\n-\t\t\t\t    build_binary_op (ex_form,\n-\t\t\t\t\t\t     convert (typex, arg0),\n-\t\t\t\t\t\t     convert (typex, arg1),\n-\t\t\t\t\t\t     0));\n+\t\t\t\t    fold (build (ex_form, typex,\n+\t\t\t\t\t\t convert (typex, arg0),\n+\t\t\t\t\t\t convert (typex, arg1),\n+\t\t\t\t\t\t 0)));\n \t\t  }\n \t      }\n \t  }\n@@ -300,9 +300,9 @@ convert_to_integer (type, expr)\n \t\ttypex = (TREE_UNSIGNED (TREE_TYPE (expr))\n \t\t\t ? unsigned_type (typex) : signed_type (typex));\n \t\treturn convert (type,\n-\t\t\t\tbuild_unary_op (ex_form,\n-\t\t\t\t\t\tconvert (typex, TREE_OPERAND (expr, 0)),\n-\t\t\t\t\t\t1));\n+\t\t\t\tfold (build1 (ex_form, typex,\n+\t\t\t\t\t      convert (typex,\n+\t\t\t\t\t\t       TREE_OPERAND (expr, 0)))));\n \t      }\n \t  }\n \n@@ -411,9 +411,13 @@ convert_to_complex (type, expr)\n \t  return fold (build (COMPLEX_EXPR,\n \t\t\t      type,\n \t\t\t      convert (subtype,\n-\t\t\t\t       build_unary_op (REALPART_EXPR, expr, 1)),\n+\t\t\t\t       fold (build1 (REALPART_EXPR,\n+\t\t\t\t\t\t     TREE_TYPE (TREE_TYPE (expr)),\n+\t\t\t\t\t\t     expr))),\n \t\t\t      convert (subtype,\n-\t\t\t\t       build_unary_op (IMAGPART_EXPR, expr, 1))));\n+\t\t\t\t       fold (build1 (IMAGPART_EXPR,\n+\t\t\t\t\t\t     TREE_TYPE (TREE_TYPE (expr)),\n+\t\t\t\t\t\t     expr)))));\n \t}\n     }\n "}]}