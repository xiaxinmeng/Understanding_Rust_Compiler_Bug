{"sha": "419d45db8e25741704b8ccd06699e4d4cfcfbc4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDE5ZDQ1ZGI4ZTI1NzQxNzA0YjhjY2QwNjY5OWU0ZDRjZmNmYmM0ZQ==", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2014-06-18T08:07:16Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2014-06-18T08:07:16Z"}, "message": "[genattrtab] Fix memory corruption, allocate enough memory for all bypassed reservations\n\n\t* genattrtab.c (n_bypassed): New variable.\n\t(process_bypasses): Initialise n_bypassed.\n\tCount number of bypassed reservations.\n\t(make_automaton_attrs): Allocate space for bypassed reservations\n\trather than number of bypasses.\n\nFrom-SVN: r211771", "tree": {"sha": "62c9b5b73d285f6b069bdd234209b12af89e1478", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/62c9b5b73d285f6b069bdd234209b12af89e1478"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/419d45db8e25741704b8ccd06699e4d4cfcfbc4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/419d45db8e25741704b8ccd06699e4d4cfcfbc4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/419d45db8e25741704b8ccd06699e4d4cfcfbc4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/419d45db8e25741704b8ccd06699e4d4cfcfbc4e/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "25b7069af201bcecc06fdc0b9a0fc455f5985c77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25b7069af201bcecc06fdc0b9a0fc455f5985c77", "html_url": "https://github.com/Rust-GCC/gccrs/commit/25b7069af201bcecc06fdc0b9a0fc455f5985c77"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "98042bb709b8613631f45d184b84ac5409d451fe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/419d45db8e25741704b8ccd06699e4d4cfcfbc4e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/419d45db8e25741704b8ccd06699e4d4cfcfbc4e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=419d45db8e25741704b8ccd06699e4d4cfcfbc4e", "patch": "@@ -1,3 +1,11 @@\n+2014-06-18  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+\t* genattrtab.c (n_bypassed): New variable.\n+\t(process_bypasses): Initialise n_bypassed.\n+\tCount number of bypassed reservations.\n+\t(make_automaton_attrs): Allocate space for bypassed reservations\n+\trather than number of bypasses.\n+\n 2014-06-18  Richard Biener  <rguenther@suse.de>\n \n \t* tree-ssa-propagate.c (replace_phi_args_in): Return whether"}, {"sha": "9db2ade01f80067be7a307fe2655c8bdf793c743", "filename": "gcc/genattrtab.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/419d45db8e25741704b8ccd06699e4d4cfcfbc4e/gcc%2Fgenattrtab.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/419d45db8e25741704b8ccd06699e4d4cfcfbc4e/gcc%2Fgenattrtab.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgenattrtab.c?ref=419d45db8e25741704b8ccd06699e4d4cfcfbc4e", "patch": "@@ -4766,6 +4766,7 @@ struct bypass_list\n \n static struct bypass_list *all_bypasses;\n static size_t n_bypasses;\n+static size_t n_bypassed;\n \n static void\n gen_bypass_1 (const char *s, size_t len)\n@@ -4811,12 +4812,18 @@ process_bypasses (void)\n   struct bypass_list *b;\n   struct insn_reserv *r;\n \n+  n_bypassed = 0;\n+\n   /* The reservation list is likely to be much longer than the bypass\n      list.  */\n   for (r = all_insn_reservs; r; r = r->next)\n     for (b = all_bypasses; b; b = b->next)\n       if (fnmatch (b->pattern, r->name, 0) == 0)\n-\tr->bypassed = true;\n+        {\n+          n_bypassed++;\n+          r->bypassed = true;\n+          break;\n+        }\n }\n \n /* Check that attribute NAME is used in define_insn_reservation condition\n@@ -5075,7 +5082,7 @@ make_automaton_attrs (void)\n       process_bypasses ();\n \n       byps_exp = rtx_alloc (COND);\n-      XVEC (byps_exp, 0) = rtvec_alloc (n_bypasses * 2);\n+      XVEC (byps_exp, 0) = rtvec_alloc (n_bypassed * 2);\n       XEXP (byps_exp, 1) = make_numeric_value (0);\n       for (decl = all_insn_reservs, i = 0;\n \t   decl;"}]}