{"sha": "73a958c67e3c99e10724dc65c4cb738da6188e34", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzNhOTU4YzY3ZTNjOTllMTA3MjRkYzY1YzRjYjczOGRhNjE4OGUzNA==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2018-09-22T17:49:19Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2018-09-22T17:49:19Z"}, "message": "re PR fortran/87318 (gfortran.dg/dtio_1.f90 is invalid)\n\n2018-09-22  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/87318\n\t* gfortran.dg/dtio_1.f90: Update test to valid code.\n\nFrom-SVN: r264505", "tree": {"sha": "0a60a11a95e575dff68217c4734e61773187321c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0a60a11a95e575dff68217c4734e61773187321c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/73a958c67e3c99e10724dc65c4cb738da6188e34", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73a958c67e3c99e10724dc65c4cb738da6188e34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73a958c67e3c99e10724dc65c4cb738da6188e34", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73a958c67e3c99e10724dc65c4cb738da6188e34/comments", "author": null, "committer": null, "parents": [{"sha": "091a8640be4f26433c73257b381e1ac376713bff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/091a8640be4f26433c73257b381e1ac376713bff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/091a8640be4f26433c73257b381e1ac376713bff"}], "stats": {"total": 24, "additions": 14, "deletions": 10}, "files": [{"sha": "7afec4f4fa35bd2a14211ba47861233de38353a8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73a958c67e3c99e10724dc65c4cb738da6188e34/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73a958c67e3c99e10724dc65c4cb738da6188e34/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=73a958c67e3c99e10724dc65c4cb738da6188e34", "patch": "@@ -1,3 +1,8 @@\n+2018-09-22  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/87318\n+\t* gfortran.dg/dtio_1.f90: Update test to valid code.\n+\n 2018-09-22  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/85603"}, {"sha": "c6f17d94356aa932a3b4dac68e4e84c75f95b6c2", "filename": "gcc/testsuite/gfortran.dg/dtio_1.f90", "status": "modified", "additions": 9, "deletions": 10, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73a958c67e3c99e10724dc65c4cb738da6188e34/gcc%2Ftestsuite%2Fgfortran.dg%2Fdtio_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73a958c67e3c99e10724dc65c4cb738da6188e34/gcc%2Ftestsuite%2Fgfortran.dg%2Fdtio_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdtio_1.f90?ref=73a958c67e3c99e10724dc65c4cb738da6188e34", "patch": "@@ -7,8 +7,8 @@\n !    to control execution.\n ! 3) Tests parsing of the optional vlist, passing in and using it to\n !    generate a user defined format string.\n-! 4) Tests passing an iostat or iomsg out of libgfortranthe child procedure back to\n-!    the parent.\n+! 4) Tests passing an iostat or iomsg out of the libgfortran child\n+!    procedure back to the parent.\n !\n MODULE p\n   USE ISO_FORTRAN_ENV\n@@ -33,7 +33,6 @@ SUBROUTINE pwf (dtv,unit,iotype,vlist,iostat,iomsg)\n     INTEGER :: myios\n \n     udfmt='(*(g0))'\n-    iomsg = \"SUCCESS\"\n     iostat=0\n     if (iotype.eq.\"DT\") then\n       if (size(vlist).ne.0) print *, 36\n@@ -64,6 +63,7 @@ SUBROUTINE pwf (dtv,unit,iotype,vlist,iostat,iomsg)\n     if (iotype.eq.\"NAMELIST\") then\n       if (size(vlist).ne.0) print *, 59\n       iostat=6000\n+      iomsg = \"NAMELIST not implemented in pwf\"\n     endif\n   END SUBROUTINE pwf\n \n@@ -78,7 +78,6 @@ SUBROUTINE prf (dtv,unit,iotype,vlist,iostat,iomsg)\n     INTEGER :: myios\n     real :: areal\n     udfmt='(*(g0))'\n-    iomsg = \"SUCCESS\"\n     iostat=0\n     if (iotype.eq.\"DT\") then\n       if (size(vlist).ne.0) print *, 36\n@@ -109,8 +108,8 @@ SUBROUTINE prf (dtv,unit,iotype,vlist,iostat,iomsg)\n     if (iotype.eq.\"NAMELIST\") then\n       if (size(vlist).ne.0) print *, 59\n       iostat=6000\n+      iomsg = \"NAMELIST not implemented in prf\"\n     endif\n-    !READ (UNIT = UNIT, FMT = *) dtv%name, dtv%age\n   END SUBROUTINE prf\n \n END MODULE p\n@@ -126,12 +125,12 @@ PROGRAM test\n   chairman%age=62\n   member%name=\"George\"\n   member%age=42\n-  astring = \"FAILURE\"\n+  astring = \"SUCCESS\"\n   write (10, \"(DT'zeroth',3x, DT'three'(11,4,10),11x,DT'two'(8,2))\", &\n          & iostat=myiostat, iomsg=astring) member, chairman, member\n   if (myiostat.ne.0) STOP 3\n   if (astring.ne.\"SUCCESS\") STOP 4\n-  astring = \"FAILURE\"\n+  astring = \"SUCCESS\"\n   write (10, *, iostat=myiostat, iomsg=astring) member, chairman, member\n   if (myiostat.ne.0) STOP 5\n   if (astring.ne.\"SUCCESS\") STOP 6\n@@ -141,7 +140,7 @@ PROGRAM test\n   chairman%age=99\n   member%name=\"bogus2\"\n   member%age=66\n-  astring = \"FAILURE\"\n+  astring = \"SUCCESS\"\n   read(10,\"(DT'zeroth',3x, DT'three'(11,4,10),11x,DT'two'(8,2))\") member, chairman, member\n   if (member%name.ne.\"George\") STOP 7\n   if (chairman%name.ne.\"    Charlie\") STOP 8\n@@ -151,12 +150,12 @@ PROGRAM test\n   chairman%age=99\n   member%name=\"bogus2\"\n   member%age=66\n-  astring = \"FAILURE\"\n+  astring = \"SAME\"\n   read (10, *, iostat=myiostat, iomsg=astring) member, chairman, member\n   ! The user defined procedure reads to the end of the line/file, then finalizing the parent\n   ! reads past, so we wrote a blank line above. User needs to address these nuances in their\n   ! procedures. (subject to interpretation)\n-  if (astring.ne.\"SUCCESS\") STOP 11\n+  if (astring.ne.\"SAME\" .or. myiostat.ne.0) STOP 11\n   if (member%name.ne.\"George\") STOP 12\n   if (chairman%name.ne.\"Charlie\") STOP 13\n   if (member%age.ne.42) STOP 14"}]}