{"sha": "3b727799d4ebf8de4955033fb288f416a265bb7f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2I3Mjc3OTlkNGViZjhkZTQ5NTUwMzNmYjI4OGY0MTZhMjY1YmI3Zg==", "commit": {"author": {"name": "Olivier Hainque", "email": "hainque@adacore.com", "date": "2018-10-29T15:07:33Z"}, "committer": {"name": "Olivier Hainque", "email": "hainque@gcc.gnu.org", "date": "2018-10-29T15:07:33Z"}, "message": "Introduce notion of VXWORKS_PERSONALITY\n\n2018-10-29  Olivier Hainque  <hainque@adacore.com>\n\n\t* config/vxworks.h (VXWORKS_PERSONALITY): New VxWorks\n\tports configuration macro, defaults to \"gnu\".\n\t(VXWORKS_OS_CPP_BUILTINS): Use it. Feed TOOL and\n\tTOOL_FAMILY instead of _VX_TOOL/_VXTOOL_FAMILY.\n\nFrom-SVN: r265594", "tree": {"sha": "8e4281ef9c9211a042559508ab3a3dd6be1034ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8e4281ef9c9211a042559508ab3a3dd6be1034ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b727799d4ebf8de4955033fb288f416a265bb7f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b727799d4ebf8de4955033fb288f416a265bb7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b727799d4ebf8de4955033fb288f416a265bb7f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b727799d4ebf8de4955033fb288f416a265bb7f/comments", "author": {"login": "hainque", "id": 18735142, "node_id": "MDQ6VXNlcjE4NzM1MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/18735142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hainque", "html_url": "https://github.com/hainque", "followers_url": "https://api.github.com/users/hainque/followers", "following_url": "https://api.github.com/users/hainque/following{/other_user}", "gists_url": "https://api.github.com/users/hainque/gists{/gist_id}", "starred_url": "https://api.github.com/users/hainque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hainque/subscriptions", "organizations_url": "https://api.github.com/users/hainque/orgs", "repos_url": "https://api.github.com/users/hainque/repos", "events_url": "https://api.github.com/users/hainque/events{/privacy}", "received_events_url": "https://api.github.com/users/hainque/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6c7e3b1fe2889136348984edeca7f9ae71d40027", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c7e3b1fe2889136348984edeca7f9ae71d40027", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c7e3b1fe2889136348984edeca7f9ae71d40027"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "86cb859cc7bf9dee3666ffa7592d14b9c623b588", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b727799d4ebf8de4955033fb288f416a265bb7f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b727799d4ebf8de4955033fb288f416a265bb7f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3b727799d4ebf8de4955033fb288f416a265bb7f", "patch": "@@ -1,3 +1,10 @@\n+2018-10-29  Olivier Hainque  <hainque@adacore.com>\n+\n+\t* config/vxworks.h (VXWORKS_PERSONALITY): New VxWorks\n+\tports configuration macro, defaults to \"gnu\".\n+\t(VXWORKS_OS_CPP_BUILTINS): Use it. Feed TOOL and\n+\tTOOL_FAMILY instead of _VX_TOOL/_VXTOOL_FAMILY.\n+\n 2018-10-29  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/87790"}, {"sha": "5f87920cece147011d35ecf75bd05cc6bb01fa61", "filename": "gcc/config/vxworks.h", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b727799d4ebf8de4955033fb288f416a265bb7f/gcc%2Fconfig%2Fvxworks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b727799d4ebf8de4955033fb288f416a265bb7f/gcc%2Fconfig%2Fvxworks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvxworks.h?ref=3b727799d4ebf8de4955033fb288f416a265bb7f", "patch": "@@ -175,6 +175,13 @@ extern void vxworks_asm_out_destructor (rtx symbol, int priority);\n #define TARGET_POSIX_IO\n \n /* A VxWorks implementation of TARGET_OS_CPP_BUILTINS.  */\n+\n+/* The VxWorks personality we rely on, controlling which sections of system\n+   headers files we trigger.  This might be redefined on targets where the\n+   base VxWorks environment doesn't come with a GNU toolchain.  */\n+\n+#define VXWORKS_PERSONALITY \"gnu\"\n+\n #define VXWORKS_OS_CPP_BUILTINS()\t\t\t\t\t\\\n   do\t\t\t\t\t\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\t\\\n@@ -185,8 +192,8 @@ extern void vxworks_asm_out_destructor (rtx symbol, int priority);\n \tbuiltin_define (\"__RTP__\");\t\t\t\t\t\\\n       else\t\t\t\t\t\t\t\t\\\n \tbuiltin_define (\"_WRS_KERNEL\");\t\t\t\t\t\\\n-      builtin_define (\"_VX_TOOL_FAMILY=gnu\");\t\t\t\t\\\n-      builtin_define (\"_VX_TOOL=gnu\");\t\t\t\t\t\\\n+      builtin_define (\"TOOL_FAMILY=\" VXWORKS_PERSONALITY);\t\t\\\n+      builtin_define (\"TOOL=\" VXWORKS_PERSONALITY);\t\t\t\\\n       if (TARGET_VXWORKS7)\t\t\t\t\t\t\\\n         {\t\t\t\t\t\t\t\t\\\n            builtin_define (\"_VSB_CONFIG_FILE=<config/vsbConfig.h>\");\t\\\n@@ -208,6 +215,7 @@ extern void vxworks_asm_out_destructor (rtx symbol, int priority);\n \n /* We provide our own version of __clear_cache in libgcc, using a separate C\n    file to facilitate #inclusion of VxWorks header files.  */\n+#undef CLEAR_INSN_CACHE\n #define CLEAR_INSN_CACHE 1\n \n /* Default dwarf control values, for non-gdb debuggers that come with"}]}