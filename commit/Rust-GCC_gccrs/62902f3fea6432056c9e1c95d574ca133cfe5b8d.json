{"sha": "62902f3fea6432056c9e1c95d574ca133cfe5b8d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjI5MDJmM2ZlYTY0MzIwNTZjOWUxYzk1ZDU3NGNhMTMzY2ZlNWI4ZA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2011-02-08T12:53:50Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-02-08T12:53:50Z"}, "message": "re PR lto/47641 (gcc.dg/lto/20101009-1 c_lto_20101009-1_0.o-c_lto_20101009-1_0.o link ICE)\n\n2011-02-08  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/47641\n\t* tree-ssa.c (execute_update_addresses_taken): For asm outputs\n\trequire type compatibility.\n\nFrom-SVN: r169925", "tree": {"sha": "b4679c2ae034f9d8709f6f23f651ba05bc6d4734", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b4679c2ae034f9d8709f6f23f651ba05bc6d4734"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62902f3fea6432056c9e1c95d574ca133cfe5b8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62902f3fea6432056c9e1c95d574ca133cfe5b8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62902f3fea6432056c9e1c95d574ca133cfe5b8d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62902f3fea6432056c9e1c95d574ca133cfe5b8d/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0efb9d64adf43e0022940478d7ffcf70a92f4305", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0efb9d64adf43e0022940478d7ffcf70a92f4305", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0efb9d64adf43e0022940478d7ffcf70a92f4305"}], "stats": {"total": 19, "additions": 15, "deletions": 4}, "files": [{"sha": "f22f6673c88206f7e9a95007fb6ee2d851384a02", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62902f3fea6432056c9e1c95d574ca133cfe5b8d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62902f3fea6432056c9e1c95d574ca133cfe5b8d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=62902f3fea6432056c9e1c95d574ca133cfe5b8d", "patch": "@@ -1,3 +1,9 @@\n+2011-02-08  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/47641\n+\t* tree-ssa.c (execute_update_addresses_taken): For asm outputs\n+\trequire type compatibility.\n+\n 2011-02-08  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n \n \t* gimple-low.c (lower_function_body): Don't remove the location of"}, {"sha": "cc8c83d7c00779506406afe49c2f8ebf4609fa89", "filename": "gcc/tree-ssa.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62902f3fea6432056c9e1c95d574ca133cfe5b8d/gcc%2Ftree-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62902f3fea6432056c9e1c95d574ca133cfe5b8d/gcc%2Ftree-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa.c?ref=62902f3fea6432056c9e1c95d574ca133cfe5b8d", "patch": "@@ -1898,7 +1898,7 @@ non_rewritable_lvalue_p (tree lhs)\n   /* A decl that is wrapped inside a MEM-REF that covers\n      it full is also rewritable.\n      ???  The following could be relaxed allowing component\n-     references that do not change the access size.  */ ;\n+     references that do not change the access size.  */\n   if (TREE_CODE (lhs) == MEM_REF\n       && TREE_CODE (TREE_OPERAND (lhs, 0)) == ADDR_EXPR\n       && integer_zerop (TREE_OPERAND (lhs, 1)))\n@@ -2039,11 +2039,16 @@ execute_update_addresses_taken (void)\n \t\t{\n \t\t  tree link = gimple_asm_output_op (stmt, i);\n \t\t  tree lhs = TREE_VALUE (link);\n-\t\t  if (TREE_CODE (lhs) != SSA_NAME\n-\t\t      && non_rewritable_lvalue_p (lhs))\n+\t\t  if (TREE_CODE (lhs) != SSA_NAME)\n \t\t    {\n \t\t      decl = get_base_address (lhs);\n-\t\t      if (DECL_P (decl))\n+\t\t      if (DECL_P (decl)\n+\t\t\t  && (non_rewritable_lvalue_p (lhs)\n+\t\t\t      /* We cannot move required conversions from\n+\t\t\t\t the lhs to the rhs in asm statements, so\n+\t\t\t\t require we do not need any.  */\n+\t\t\t      || !useless_type_conversion_p\n+\t\t\t            (TREE_TYPE (lhs), TREE_TYPE (decl))))\n \t\t\tbitmap_set_bit (not_reg_needs, DECL_UID (decl));\n \t\t    }\n \t\t}"}]}