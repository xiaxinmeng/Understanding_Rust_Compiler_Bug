{"sha": "0e7eed46026720d0a1a0696128499293913566bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGU3ZWVkNDYwMjY3MjBkMGExYTA2OTYxMjg0OTkyOTM5MTM1NjZiZg==", "commit": {"author": {"name": "Janis Johnson", "email": "janis187@us.ibm.com", "date": "2005-02-01T17:31:33Z"}, "committer": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2005-02-01T17:31:33Z"}, "message": "test-framework.awk: Change recording and printing of passes and failures.\n\n\t* gcc.test-framework/test-framework.awk: Change recording and\n\tprinting of passes and failures.\n\nFrom-SVN: r94549", "tree": {"sha": "6af5cbc744f967ea9d400adeb434f4f0c55f7f52", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6af5cbc744f967ea9d400adeb434f4f0c55f7f52"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e7eed46026720d0a1a0696128499293913566bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e7eed46026720d0a1a0696128499293913566bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e7eed46026720d0a1a0696128499293913566bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e7eed46026720d0a1a0696128499293913566bf/comments", "author": null, "committer": null, "parents": [{"sha": "395909dddc2f0412da11261052aaaf41d55b0960", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/395909dddc2f0412da11261052aaaf41d55b0960", "html_url": "https://github.com/Rust-GCC/gccrs/commit/395909dddc2f0412da11261052aaaf41d55b0960"}], "stats": {"total": 46, "additions": 34, "deletions": 12}, "files": [{"sha": "7a3356c3677076f7a3c54654bd13cff99d98d4b9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e7eed46026720d0a1a0696128499293913566bf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e7eed46026720d0a1a0696128499293913566bf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0e7eed46026720d0a1a0696128499293913566bf", "patch": "@@ -1,5 +1,8 @@\n 2005-02-01  Janis Johnson  <janis187@us.ibm.com>\n \n+\t* gcc.test-framework/test-framework.awk: Change recording and\n+\tprinting of passes and failures.\n+\n \t* gcc.test-framework: New directory.\n \t* gcc.test-framework/README: New.\n \t* gcc.test-framework/test-framework.exp: New."}, {"sha": "90e76ca94b4e93cb5e4a8b5426a376b861337a75", "filename": "gcc/testsuite/gcc.test-framework/test-framework.awk", "status": "modified", "additions": 31, "deletions": 12, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e7eed46026720d0a1a0696128499293913566bf/gcc%2Ftestsuite%2Fgcc.test-framework%2Ftest-framework.awk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e7eed46026720d0a1a0696128499293913566bf/gcc%2Ftestsuite%2Fgcc.test-framework%2Ftest-framework.awk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.test-framework%2Ftest-framework.awk?ref=0e7eed46026720d0a1a0696128499293913566bf", "patch": "@@ -19,24 +19,43 @@\n # Free Software Foundation, Inc., 59 Temple Place - Suite 330,\n # Boston, MA 02111-1307, USA.\n \n-BEGIN\t\t\t{ skip = 1; pass = 0 }\n+function pass(msg)\t{\n+\t\t\t  passes++;\n+\t\t\t# printf(\"pass   %s\\n\", $0);\n+\t\t\t}\n+function fail(msg)\t{\n+\t\t\t  fails++;\n+\t\t\t  printf(\"fail   %s\\n\", $0);\n+\t\t\t}\n+function ignore(msg)\t{\n+\t\t\t# printf(\"ignore %s\\n\", $0);\n+\t\t\t}\n+\n+BEGIN\t\t\t{ skip = 1; passes = 0; fails = 0; }\n /Running.*test-frame/\t{ skip = 0; next }\n /gcc Summary/\t\t{ skip = 1; next }\n \t\t\t{ if (skip) next }\n /^$/\t\t\t{ next }\n # The post tests are always expected to pass.\n-/^PASS.*-2.c/\t\t{ next }\n+/^PASS.*-2.c/\t\t{ ignore(); next }\n # dg-xfail-if applies to the compile step; these should be XPASS for the\n # compile step on dox tests, which are run tests.\n-/^XPASS.*dox.*xiff.*-1.c.*(test for excess errors)/ { next }\n+/^XPASS.*dox.*xiff.*-1.c.*(test for excess errors)/ { ignore(); next }\n # xfail for scan-assembler-not tests doesn't apply to the compile step.\n-/^PASS.*sa.*-1.c.*(test for excess errors)/ { next }\n+/^PASS.*sa.*-1.c.*(test for excess errors)/ { ignore(); next }\n # The other dox tests pass the compile step; ignore that message.\n-/^PASS.*dox.*(test for excess errors)/ { next }\n-/^PASS/\t\t\t{ if (match ($0, \"exp-P\")) { pass++; next } }\n-/^FAIL/\t\t\t{ if (match ($0, \"exp-F\")) { pass++; next } }\n-/^XPASS/\t\t{ if (match ($0, \"exp-XP\")) { pass++; next } }\n-/^XFAIL/\t\t{ if (match ($0, \"exp-XF\")) { pass++; next } }\n-/^UNSUPPORTED/\t\t{ if (match ($0, \"exp-U\")) { pass++; next } }\n-\t\t\t{ print }\n-END\t\t\t{ printf(\"%d tests passed\\n\", pass) }\n+/^PASS.*dox.*(test for excess errors)/ { ignore(); next }\n+# Ignore lines that begin with comma.\n+/^,/\t\t\t{ ignore(); next }\n+/^PASS/\t\t\t{ if (match ($0, \"exp-P\")) { pass(); next } }\n+/^FAIL/\t\t\t{ if (match ($0, \"exp-F\")) { pass(); next } }\n+/^XPASS/\t\t{ if (match ($0, \"exp-XP\")) { pass(); next } }\n+/^XFAIL/\t\t{ if (match ($0, \"exp-XF\")) { pass(); next } }\n+/^UNSUPPORTED/\t\t{ if (match ($0, \"exp-U\")) { pass(); next } }\n+\t\t\t{ fail() }\n+END\t\t\t{\n+\t\t\t  printf(\"\\n\\t\\t=== Test Framework Summary ===\\n\\n\");\n+\t\t\t  printf(\"# of expected passes\\t\\t%d\\n\", passes);\n+\t\t\t  if (fails != 0)\n+\t\t\t    printf(\"# of unexpected failures\\t%d\\n\", fails);\n+\t\t\t}"}]}