{"sha": "5376a30c4d6aac763801fecb7521baef212d78ff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTM3NmEzMGM0ZDZhYWM3NjM4MDFmZWNiNzUyMWJhZWYyMTJkNzhmZg==", "commit": {"author": {"name": "Ken Raeburn", "email": "raeburn@gcc.gnu.org", "date": "1998-09-15T15:49:37Z"}, "committer": {"name": "Ken Raeburn", "email": "raeburn@gcc.gnu.org", "date": "1998-09-15T15:49:37Z"}, "message": "Add stack alignment descriptions to comments describing stack layouts.\n\nAlso describe which layouts are used for EABI.\n\nFrom-SVN: r22431", "tree": {"sha": "28db4991a071bf62f617e0b6f30df3249c5a94e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/28db4991a071bf62f617e0b6f30df3249c5a94e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5376a30c4d6aac763801fecb7521baef212d78ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5376a30c4d6aac763801fecb7521baef212d78ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5376a30c4d6aac763801fecb7521baef212d78ff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5376a30c4d6aac763801fecb7521baef212d78ff/comments", "author": null, "committer": null, "parents": [{"sha": "cc5c4e2fd75c31a0c31c11a353adcf9ae9452dde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc5c4e2fd75c31a0c31c11a353adcf9ae9452dde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc5c4e2fd75c31a0c31c11a353adcf9ae9452dde"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "e948c75956ef347171bb331f3cea8c693afb82eb", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 22, "deletions": 1, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5376a30c4d6aac763801fecb7521baef212d78ff/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5376a30c4d6aac763801fecb7521baef212d78ff/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=5376a30c4d6aac763801fecb7521baef212d78ff", "patch": "@@ -3261,6 +3261,10 @@ rs6000_makes_calls ()\n \told SP->| back chain to caller's caller\t\t|\n \t\t+---------------------------------------+\n \n+   The required alignment for AIX configurations is two words (i.e., 8\n+   or 16 bytes).\n+\n+\n    V.4 stack frames look like:\n \n \tSP---->\t+---------------------------------------+\n@@ -3287,6 +3291,13 @@ rs6000_makes_calls ()\n \told SP->| back chain to caller's caller\t\t|\n \t\t+---------------------------------------+\n \n+   The required alignment for V.4 is 16 bytes, or 8 bytes if -meabi is\n+   given.  (But note below and in sysv4.h that we require only 8 and\n+   may round up the size of our stack frame anyways.  The historical\n+   reason is early versions of powerpc-linux which didn't properly\n+   align the stack at program startup.  A happy side-effect is that\n+   -mno-eabi libraries can be used with -meabi programs.)\n+\n \n    A PowerPC Windows/NT frame looks like:\n \n@@ -3330,7 +3341,17 @@ rs6000_makes_calls ()\n    order to support __builtin_return_address, the save area for the\n    link register needs to be in a known place, so we use -4 off of the\n    old SP.  To support calls through pointers, we also allocate a\n-   fixed slot to store the TOC, -8 off the old SP.  */\n+   fixed slot to store the TOC, -8 off the old SP.\n+\n+   The required alignment for NT is 16 bytes.\n+\n+\n+   The EABI configuration defaults to the V.4 layout, unless\n+   -mcall-aix is used, in which case the AIX layout is used.  However,\n+   the stack alignment requirements may differ.  If -mno-eabi is not\n+   given, the required stack alignment is 8 bytes; if -mno-eabi is\n+   given, the required alignment is 16 bytes.  (But see V.4 comment\n+   above.)  */\n \n #ifndef ABI_STACK_BOUNDARY\n #define ABI_STACK_BOUNDARY STACK_BOUNDARY"}]}