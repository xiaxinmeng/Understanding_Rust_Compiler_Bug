{"sha": "19c023241020e3b6f5c38f47447bc0fcbe9fef5f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTljMDIzMjQxMDIwZTNiNmY1YzM4ZjQ3NDQ3YmMwZmNiZTlmZWY1Zg==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2021-02-11T03:37:52Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2021-02-11T03:37:52Z"}, "message": "libgfortran: Fix unwanted end-of-record by checking if seen_dollar.\n\nlibgfortran/ChangeLog:\n\n\tPR libfortran/98825\n\t* io/transfer.c (next_record_w): Insert check for seen_dollar and if\n\tso, skip issueing next record.\n\ngcc/testsuite/ChangeLog:\n\n\tPR libfortran/98825\n\t* gfortran.dg/dollar_edit_descriptor_4.f: New test.", "tree": {"sha": "3119bcfc0481a888ff9c1cb6e1e4d18ccff50ca0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3119bcfc0481a888ff9c1cb6e1e4d18ccff50ca0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/19c023241020e3b6f5c38f47447bc0fcbe9fef5f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19c023241020e3b6f5c38f47447bc0fcbe9fef5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19c023241020e3b6f5c38f47447bc0fcbe9fef5f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19c023241020e3b6f5c38f47447bc0fcbe9fef5f/comments", "author": null, "committer": null, "parents": [{"sha": "27a804bc62805aedb1b097a00eb2c0059244680a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27a804bc62805aedb1b097a00eb2c0059244680a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27a804bc62805aedb1b097a00eb2c0059244680a"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "c8453ce6bc85ee66d806a99203003c30efb024ce", "filename": "gcc/testsuite/gfortran.dg/dollar_edit_descriptor_4.f", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19c023241020e3b6f5c38f47447bc0fcbe9fef5f/gcc%2Ftestsuite%2Fgfortran.dg%2Fdollar_edit_descriptor_4.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19c023241020e3b6f5c38f47447bc0fcbe9fef5f/gcc%2Ftestsuite%2Fgfortran.dg%2Fdollar_edit_descriptor_4.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdollar_edit_descriptor_4.f?ref=19c023241020e3b6f5c38f47447bc0fcbe9fef5f", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do run }\n+! { dg-options \"-std=gnu\" }\n+! PR98825 Test for fix of '$' edit descriptor.\n+      character(30) :: line\n+   10 format (i3,$)\n+\n+      open(10, status='scratch')\n+      write (10,10) 1\n+      write (10,10) 2,3,4,5\n+! Check the result.\n+      line = 'abcdefg'\n+      rewind(10)\n+      read(10, '(a)') line\n+      close(10)\n+      if (line .ne. '  1  2  3  4  5') call abort\n+      end"}, {"sha": "27bee9d4e01d1a1ca2110f9731e66c0e840be85c", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19c023241020e3b6f5c38f47447bc0fcbe9fef5f/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19c023241020e3b6f5c38f47447bc0fcbe9fef5f/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=19c023241020e3b6f5c38f47447bc0fcbe9fef5f", "patch": "@@ -4020,6 +4020,8 @@ next_record_w (st_parameter_dt *dtp, int done)\n \t\t}\n \t    }\n \t}\n+      else if (dtp->u.p.seen_dollar == 1)\n+\tbreak;\n       /* Handle legacy CARRIAGECONTROL line endings.  */\n       else if (dtp->u.p.current_unit->flags.cc == CC_FORTRAN)\n \tnext_record_cc (dtp);"}]}