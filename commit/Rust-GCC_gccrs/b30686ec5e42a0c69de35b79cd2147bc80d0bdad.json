{"sha": "b30686ec5e42a0c69de35b79cd2147bc80d0bdad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjMwNjg2ZWM1ZTQyYTBjNjlkZTM1Yjc5Y2QyMTQ3YmM4MGQwYmRhZA==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2003-01-21T03:54:49Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2003-01-21T03:54:49Z"}, "message": "* config/h8300/h8300.c (get_shift_alg): Remove redundant code.\n\nFrom-SVN: r61529", "tree": {"sha": "ddbc7c92f453439c36b3f8cabbb525a33acb51f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ddbc7c92f453439c36b3f8cabbb525a33acb51f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b30686ec5e42a0c69de35b79cd2147bc80d0bdad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b30686ec5e42a0c69de35b79cd2147bc80d0bdad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b30686ec5e42a0c69de35b79cd2147bc80d0bdad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b30686ec5e42a0c69de35b79cd2147bc80d0bdad/comments", "author": null, "committer": null, "parents": [{"sha": "876086937b24fed8fc5ef99877281619e211a14f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/876086937b24fed8fc5ef99877281619e211a14f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/876086937b24fed8fc5ef99877281619e211a14f"}], "stats": {"total": 37, "additions": 8, "deletions": 29}, "files": [{"sha": "86cc7f0dceb3773a1b40bfed270859a478c4e077", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30686ec5e42a0c69de35b79cd2147bc80d0bdad/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30686ec5e42a0c69de35b79cd2147bc80d0bdad/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b30686ec5e42a0c69de35b79cd2147bc80d0bdad", "patch": "@@ -1,3 +1,7 @@\n+2003-01-20  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/h8300.c (get_shift_alg): Remove redundant code.\n+\n 2003-01-20  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* system.h (__NO_STRING_INLINES): Define."}, {"sha": "937e76bb98b4d20a429e730fa8ba7f7d1f800c17", "filename": "gcc/config/h8300/h8300.c", "status": "modified", "additions": 4, "deletions": 29, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30686ec5e42a0c69de35b79cd2147bc80d0bdad/gcc%2Fconfig%2Fh8300%2Fh8300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30686ec5e42a0c69de35b79cd2147bc80d0bdad/gcc%2Fconfig%2Fh8300%2Fh8300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.c?ref=b30686ec5e42a0c69de35b79cd2147bc80d0bdad", "patch": "@@ -2802,7 +2802,8 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t      goto end;\n \t    }\n \t}\n-      else if (8 <= count && count <= 13)\n+      else if ((8 <= count && count <= 13)\n+\t       || (TARGET_H8300S & count == 14))\n \t{\n \t  info->remainder = count - 8;\n \n@@ -2827,7 +2828,6 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t\t{\n \t\t  info->special = \"mov.b\\t%t0,%s0\\n\\tbld\\t#7,%s0\\n\\tsubx\\t%t0,%t0\";\n \t\t  info->shift1  = \"shar.b\\t%s0\";\n-\t\t  info->shift2  = \"shar.b\\t#2,%s0\";\n \t\t}\n \t      else\n \t\t{\n@@ -2854,7 +2854,7 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t      else if (TARGET_H8300H)\n \t\tinfo->special = \"shll.b\\t%t0\\n\\tsubx.b\\t%s0,%s0\\n\\tshll.b\\t%t0\\n\\trotxl.b\\t%s0\\n\\texts.w\\t%T0\";\n \t      else /* TARGET_H8300S */\n-\t\tinfo->special = \"mov.b\\t%t0,%s0\\n\\texts.w\\t%T0\\n\\tshar.w\\t#2,%T0\\n\\tshar.w\\t#2,%T0\\n\\tshar.w\\t#2,%T0\";\n+\t\tabort ();\n \t      goto end;\n \t    }\n \t}\n@@ -2948,14 +2948,7 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t    case SHIFT_ASHIFT:\n \t      info->special = \"mov.w\\t%f0,%e0\\n\\tsub.w\\t%f0,%f0\";\n \t      if (TARGET_H8300)\n-\t\t{\n-\t\t  info->shift1 = \"add.w\\t%e0,%e0\";\n-\t\t}\n-\t      else\n-\t\t{\n-\t\t  info->shift1 = \"shll.l\\t%S0\";\n-\t\t  info->shift2 = \"shll.l\\t#2,%S0\";\n-\t\t}\n+\t\tinfo->shift1 = \"add.w\\t%e0,%e0\";\n \t      goto end;\n \t    case SHIFT_LSHIFTRT:\n \t      if (TARGET_H8300)\n@@ -3010,18 +3003,12 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t    {\n \t    case SHIFT_ASHIFT:\n \t      info->special = \"mov.b\\t%s0,%t0\\n\\tsub.b\\t%s0,%s0\\n\\tmov.w\\t%f0,%e0\\n\\tsub.w\\t%f0,%f0\";\n-\t      info->shift1  = \"shll.l\\t%S0\";\n-\t      info->shift2  = \"shll.l\\t#2,%S0\";\n \t      goto end;\n \t    case SHIFT_LSHIFTRT:\n \t      info->special = \"mov.w\\t%e0,%f0\\n\\tmov.b\\t%t0,%s0\\n\\textu.w\\t%f0\\n\\textu.l\\t%S0\";\n-\t      info->shift1  = \"shlr.l\\t%S0\";\n-\t      info->shift2  = \"shlr.l\\t#2,%S0\";\n \t      goto end;\n \t    case SHIFT_ASHIFTRT:\n \t      info->special = \"mov.w\\t%e0,%f0\\n\\tmov.b\\t%t0,%s0\\n\\texts.w\\t%f0\\n\\texts.l\\t%S0\";\n-\t      info->shift1  = \"shar.l\\t%S0\";\n-\t      info->shift2  = \"shar.l\\t#2,%S0\";\n \t      goto end;\n \t    }\n \t}\n@@ -3034,16 +3021,12 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t\tinfo->special = \"sub.w\\t%e0,%e0\\n\\trotr.l\\t%S0\\n\\trotr.l\\t%S0\\n\\trotr.l\\t%S0\\n\\trotr.l\\t%S0\\n\\tsub.w\\t%f0,%f0\";\n \t      else\n \t\tinfo->special = \"sub.w\\t%e0,%e0\\n\\trotr.l\\t#2,%S0\\n\\trotr.l\\t#2,%S0\\n\\tsub.w\\t%f0,%f0\";\n-\t      info->shift1  = \"\";\n-\t      info->shift2  = \"\";\n \t      goto end;\n \t    case SHIFT_LSHIFTRT:\n \t      if (TARGET_H8300H)\n \t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\textu.l\\t%S0\";\n \t      else\n \t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t#2,%S0\\n\\trotl.l\\t#2,%S0\\n\\textu.l\\t%S0\";\n-\t      info->shift1  = \"\";\n-\t      info->shift2  = \"\";\n \t      goto end;\n \t    case SHIFT_ASHIFTRT:\n \t      abort ();\n@@ -3058,16 +3041,12 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t\tinfo->special = \"sub.w\\t%e0,%e0\\n\\trotr.l\\t%S0\\n\\trotr.l\\t%S0\\n\\trotr.l\\t%S0\\n\\tsub.w\\t%f0,%f0\";\n \t      else\n \t\tinfo->special = \"sub.w\\t%e0,%e0\\n\\trotr.l\\t#2,%S0\\n\\trotr.l\\t%S0\\n\\tsub.w\\t%f0,%f0\";\n-\t      info->shift1  = \"\";\n-\t      info->shift2  = \"\";\n \t      goto end;\n \t    case SHIFT_LSHIFTRT:\n \t      if (TARGET_H8300H)\n \t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\textu.l\\t%S0\";\n \t      else\n \t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t#2,%S0\\n\\trotl.l\\t%S0\\n\\textu.l\\t%S0\";\n-\t      info->shift1  = \"\";\n-\t      info->shift2  = \"\";\n \t      goto end;\n \t    case SHIFT_ASHIFTRT:\n \t      abort ();\n@@ -3082,16 +3061,12 @@ get_shift_alg (shift_type, shift_mode, count, info)\n \t\tinfo->special = \"sub.w\\t%e0,%e0\\n\\trotr.l\\t%S0\\n\\trotr.l\\t%S0\\n\\tsub.w\\t%f0,%f0\";\n \t      else\n \t\tinfo->special = \"sub.w\\t%e0,%e0\\n\\trotr.l\\t#2,%S0\\n\\tsub.w\\t%f0,%f0\";\n-\t      info->shift1  = \"\";\n-\t      info->shift2  = \"\";\n \t      goto end;\n \t    case SHIFT_LSHIFTRT:\n \t      if (TARGET_H8300H)\n \t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t%S0\\n\\trotl.l\\t%S0\\n\\textu.l\\t%S0\";\n \t      else\n \t\tinfo->special = \"sub.w\\t%f0,%f0\\n\\trotl.l\\t#2,%S0\\n\\textu.l\\t%S0\";\n-\t      info->shift1  = \"\";\n-\t      info->shift2  = \"\";\n \t      goto end;\n \t    case SHIFT_ASHIFTRT:\n \t      abort ();"}]}