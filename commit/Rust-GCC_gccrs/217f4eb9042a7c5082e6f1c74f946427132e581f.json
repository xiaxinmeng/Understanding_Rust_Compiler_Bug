{"sha": "217f4eb9042a7c5082e6f1c74f946427132e581f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjE3ZjRlYjkwNDJhN2M1MDgyZTZmMWM3NGY5NDY0MjcxMzJlNTgxZg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2000-03-21T22:28:33Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-03-21T22:28:33Z"}, "message": "class.c (build_base_field): Fix thinko in computation of binfo offsets.\n\n\t* class.c (build_base_field): Fix thinko in computation of binfo\n\toffsets.\n\nFrom-SVN: r32677", "tree": {"sha": "6b4db72832521a70e0796408ff36e14d278bc7c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6b4db72832521a70e0796408ff36e14d278bc7c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/217f4eb9042a7c5082e6f1c74f946427132e581f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/217f4eb9042a7c5082e6f1c74f946427132e581f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/217f4eb9042a7c5082e6f1c74f946427132e581f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/217f4eb9042a7c5082e6f1c74f946427132e581f/comments", "author": null, "committer": null, "parents": [{"sha": "604de2bddf2b6feef052b4df6dfd1bde702a7ae6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/604de2bddf2b6feef052b4df6dfd1bde702a7ae6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/604de2bddf2b6feef052b4df6dfd1bde702a7ae6"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "1a0029333ccd1d98dd7325f8b68aa6f32940cd3c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/217f4eb9042a7c5082e6f1c74f946427132e581f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/217f4eb9042a7c5082e6f1c74f946427132e581f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=217f4eb9042a7c5082e6f1c74f946427132e581f", "patch": "@@ -1,5 +1,8 @@\n 2000-03-21  Mark Mitchell  <mark@codesourcery.com>\n \n+\t* class.c (build_base_field): Fix thinko in computation of binfo\n+\toffsets.\n+\n \t* tree.c (mark_local_for_remap_p): Mark variables declared in\n \tTARGET_EXPRs as well.\n "}, {"sha": "fd8ff8e8cb14bfa827b37e35f9038f9753b59685", "filename": "gcc/cp/class.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/217f4eb9042a7c5082e6f1c74f946427132e581f/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/217f4eb9042a7c5082e6f1c74f946427132e581f/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=217f4eb9042a7c5082e6f1c74f946427132e581f", "patch": "@@ -1041,7 +1041,10 @@ get_vtable_decl (type, complete)\n \t\t\t   DECL_ALIGN (decl));\n \n   if (complete)\n-    cp_finish_decl (decl, NULL_TREE, NULL_TREE, 0);\n+    {\n+      DECL_EXTERNAL (decl) = 1;\n+      cp_finish_decl (decl, NULL_TREE, NULL_TREE, 0);\n+    }\n \n   return decl;\n }\n@@ -4298,7 +4301,8 @@ build_base_field (rli, binfo, empty_p, base_align, v)\n \t{\n \t  /* That didn't work.  Now, we move forward from the next\n \t     available spot in the class.  */\n-\t  propagate_binfo_offsets (binfo, size_int (rli->const_size));\n+\t  propagate_binfo_offsets (binfo, \n+\t\t\t\t   size_int (rli->const_size / BITS_PER_UNIT));\n \t  while (1) \n \t    {\n \t      if (!dfs_walk (binfo, dfs_search_base_offsets, "}]}