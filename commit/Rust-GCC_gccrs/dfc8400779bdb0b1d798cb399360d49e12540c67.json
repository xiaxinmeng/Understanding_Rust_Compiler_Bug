{"sha": "dfc8400779bdb0b1d798cb399360d49e12540c67", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZjODQwMDc3OWJkYjBiMWQ3OThjYjM5OTM2MGQ0OWUxMjU0MGM2Nw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-12-04T13:21:11Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-12-04T13:21:11Z"}, "message": "re PR testsuite/55587 ([ASAN] Testsuite test c-c++-common/asan/memcmp-1.c fails to link on targets without libasan/libsanitizer)\n\n\tPR testsuite/55587\n\t* lib/asan-dg.exp (asan_init): Return 1 if libasan has been found,\n\t0 if not.\n\t* g++.dg/asan/asan.exp: Don't run gcc-dg-runtest if [asan_init]\n\treturned 0.\n\t* gcc.dg/asan/asan.exp: Likewise.\n\nFrom-SVN: r194134", "tree": {"sha": "15e4264f79fb27ae8d3ae00e9115d65e676b8490", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/15e4264f79fb27ae8d3ae00e9115d65e676b8490"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dfc8400779bdb0b1d798cb399360d49e12540c67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfc8400779bdb0b1d798cb399360d49e12540c67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfc8400779bdb0b1d798cb399360d49e12540c67", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfc8400779bdb0b1d798cb399360d49e12540c67/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c954bddd5fbafeb558aea958cafa970677740b23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c954bddd5fbafeb558aea958cafa970677740b23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c954bddd5fbafeb558aea958cafa970677740b23"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "b84a590987fc7004faf733e50c0540a87362033d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfc8400779bdb0b1d798cb399360d49e12540c67/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfc8400779bdb0b1d798cb399360d49e12540c67/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dfc8400779bdb0b1d798cb399360d49e12540c67", "patch": "@@ -1,3 +1,12 @@\n+2012-12-04  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR testsuite/55587\n+\t* lib/asan-dg.exp (asan_init): Return 1 if libasan has been found,\n+\t0 if not.\n+\t* g++.dg/asan/asan.exp: Don't run gcc-dg-runtest if [asan_init]\n+\treturned 0.\n+\t* gcc.dg/asan/asan.exp: Likewise.\n+\n 2012-12-04  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/55124"}, {"sha": "59725036489441b76ca38e36bcd744bcf8466f0f", "filename": "gcc/testsuite/g++.dg/asan/asan.exp", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfc8400779bdb0b1d798cb399360d49e12540c67/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fasan%2Fasan.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfc8400779bdb0b1d798cb399360d49e12540c67/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fasan%2Fasan.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fasan%2Fasan.exp?ref=dfc8400779bdb0b1d798cb399360d49e12540c67", "patch": "@@ -26,11 +26,13 @@ if ![check_effective_target_faddress_sanitizer] {\n \n # Initialize `dg'.\n dg-init\n-asan_init\n+if [asan_init] {\n \n # Main loop.\n gcc-dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/*.C $srcdir/c-c++-common/asan/*.c]] \"\"\n \n+}\n+\n # All done.\n asan_finish\n dg-finish"}, {"sha": "ef1c6e37331bceebb446be92fdaf0ccd9b162ec9", "filename": "gcc/testsuite/gcc.dg/asan/asan.exp", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfc8400779bdb0b1d798cb399360d49e12540c67/gcc%2Ftestsuite%2Fgcc.dg%2Fasan%2Fasan.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfc8400779bdb0b1d798cb399360d49e12540c67/gcc%2Ftestsuite%2Fgcc.dg%2Fasan%2Fasan.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fasan%2Fasan.exp?ref=dfc8400779bdb0b1d798cb399360d49e12540c67", "patch": "@@ -28,11 +28,13 @@ if ![check_effective_target_faddress_sanitizer] {\n \n # Initialize `dg'.\n dg-init\n-asan_init\n+if [asan_init] {\n \n # Main loop.\n gcc-dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/*.c $srcdir/c-c++-common/asan/*.c]] \"\"\n \n+}\n+\n # All done.\n asan_finish\n dg-finish"}, {"sha": "90ff35727872f866e95bd811efc1a2a65c323b26", "filename": "gcc/testsuite/lib/asan-dg.exp", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfc8400779bdb0b1d798cb399360d49e12540c67/gcc%2Ftestsuite%2Flib%2Fasan-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfc8400779bdb0b1d798cb399360d49e12540c67/gcc%2Ftestsuite%2Flib%2Fasan-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fasan-dg.exp?ref=dfc8400779bdb0b1d798cb399360d49e12540c67", "patch": "@@ -91,6 +91,10 @@ proc asan_init { args } {\n \t    set TEST_ALWAYS_FLAGS \"$link_flags -fsanitize=address -g\"\n \t}\n     }\n+    if { $link_flags != \"\" } {\n+\treturn 1\n+    }\n+    return 0\n }\n \n #"}]}