{"sha": "da91c3abc6d49c67a1b9b8fbcf21146a6d1c771d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGE5MWMzYWJjNmQ0OWM2N2ExYjliOGZiY2YyMTE0NmE2ZDFjNzcxZA==", "commit": {"author": {"name": "Richard Earnshaw", "email": "erich@gnu.org", "date": "1997-05-08T22:17:34Z"}, "committer": {"name": "Richard Earnshaw", "email": "erich@gnu.org", "date": "1997-05-08T22:17:34Z"}, "message": "(CPP_SPEC): Rewrite using new sub-components.\n\n(SUBTARGET_CPU_DEFAULT): Set to TARGET_CPU_arm2.\n\nFrom-SVN: r14054", "tree": {"sha": "48518e3973c29032c1c034ae106e5bb1f36d4f5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/48518e3973c29032c1c034ae106e5bb1f36d4f5a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da91c3abc6d49c67a1b9b8fbcf21146a6d1c771d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da91c3abc6d49c67a1b9b8fbcf21146a6d1c771d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da91c3abc6d49c67a1b9b8fbcf21146a6d1c771d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da91c3abc6d49c67a1b9b8fbcf21146a6d1c771d/comments", "author": null, "committer": null, "parents": [{"sha": "97d65fbc229fb06cc21ddc1b5632140e96423d8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97d65fbc229fb06cc21ddc1b5632140e96423d8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97d65fbc229fb06cc21ddc1b5632140e96423d8d"}], "stats": {"total": 40, "additions": 26, "deletions": 14}, "files": [{"sha": "6a25ad3034811940d784ce98f7d39a4371832ff8", "filename": "gcc/config/arm/riscix.h", "status": "modified", "additions": 15, "deletions": 8, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da91c3abc6d49c67a1b9b8fbcf21146a6d1c771d/gcc%2Fconfig%2Farm%2Friscix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da91c3abc6d49c67a1b9b8fbcf21146a6d1c771d/gcc%2Fconfig%2Farm%2Friscix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Friscix.h?ref=da91c3abc6d49c67a1b9b8fbcf21146a6d1c771d", "patch": "@@ -1,5 +1,5 @@\n /* Definitions of target machine for GNU compiler.  ARM RISCiX version.\n-   Copyright (C) 1993, 1994, 1995 Free Software Foundation, Inc.\n+   Copyright (C) 1993, 1994, 1995, 1997 Free Software Foundation, Inc.\n    Contributed by Richard Earnshaw (rwe11@cl.cam.ac.uk), based on original\n \t      work by Pieter `Tiggr' Schoenmakers (rcpieter@win.tue.nl)\n    \t      and Martin Simmons (@harleqn.co.uk).\n@@ -51,13 +51,6 @@ Boston, MA 02111-1307, USA.  */\n     \"-Darm -Driscix -Dunix -Asystem(unix) -Acpu(arm) -Amachine(arm)\"\n #endif\n \n-#ifndef CPP_SPEC\n-#define CPP_SPEC \"%{m6:-D__arm6__} \\\n-\t%{mbsd:%{pedantic:%e-mbsd and -pedantic incompatible} -D_BSD_C} \\\n-\t%{mxopen:%{mbsd:%e-mbsd and -mxopen incompatible} \t\t\\\n-\t  %{pedantic:%e-mxopen and -pedantic incompatible} -D_XOPEN_C}  \\\n-\t%{!mbsd:%{!mxopen:%{!ansi: -D_BSD_C}}}\"\n-#endif\n \n /* RISCiX has some weird symbol name munging, that is done to the object module\n    after assembly, which enables multiple libraries to be supported within\n@@ -123,8 +116,22 @@ Boston, MA 02111-1307, USA.  */\n \n /* Maths operation domain error number, EDOM */\n #define TARGET_EDOM 33\n+\n+/* Override the normal default CPU */\n+#define SUBTARGET_CPU_DEFAULT TARGET_CPU_arm2\n+\n #include \"arm/aout.h\"\n \n+/* Override CPP_SPEC, there's no point handling endianness (and probably\n+   not much point handling apcs_pc), and we want to add the right #defines\n+   when using the include files.  */\n+#undef CPP_SPEC\n+#define CPP_SPEC \"%(cpp_cpu_arch) %(cpp_apcs_pc) %(cpp_float) \\\n+\t%{mbsd:%{pedantic:%e-mbsd and -pedantic incompatible} -D_BSD_C} \\\n+\t%{mxopen:%{mbsd:%e-mbsd and -mxopen incompatible} \t\t\\\n+\t  %{pedantic:%e-mxopen and -pedantic incompatible} -D_XOPEN_C}  \\\n+\t%{!mbsd:%{!mxopen:%{!ansi: -D_BSD_C}}}\"\n+\n /* The native RISCiX assembler does not support stabs of any kind; because\n    the native assembler is not used by the compiler, Acorn didn't feel it was\n    necessary to put them in!  */"}, {"sha": "3718635430d58dadf975ea41870b0b7f6e41ad43", "filename": "gcc/config/arm/riscix1-1.h", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da91c3abc6d49c67a1b9b8fbcf21146a6d1c771d/gcc%2Fconfig%2Farm%2Friscix1-1.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da91c3abc6d49c67a1b9b8fbcf21146a6d1c771d/gcc%2Fconfig%2Farm%2Friscix1-1.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Friscix1-1.h?ref=da91c3abc6d49c67a1b9b8fbcf21146a6d1c771d", "patch": "@@ -1,5 +1,5 @@\n /* Definitions of target machine for GNU compiler.  ARM RISCiX 1.1x version.\n-   Copyright (C) 1993, 1995 Free Software Foundation, Inc.\n+   Copyright (C) 1993, 1995, 1997 Free Software Foundation, Inc.\n    Contributed by Richard Earnshaw (rwe11@cl.cam.ac.uk), based on original\n \t      work by Pieter `Tiggr' Schoenmakers (rcpieter@win.tue.nl)\n    \t      and Martin Simmons (@harleqn.co.uk).\n@@ -21,7 +21,7 @@ along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n-/* RISCix 1.1x is basically the same as 1.2x except that it doesn't have\n+/* RISCiX 1.1x is basically the same as 1.2x except that it doesn't have\n    symrename or atexit. */\n \n /* Translation to find startup files.  On RISCiX boxes, gcrt0.o is in\n@@ -33,10 +33,6 @@ Boston, MA 02111-1307, USA.  */\n #define CPP_PREDEFINES  \"-Darm -Driscix -Dunix -Asystem(unix) -Acpu(arm) -Amachine(arm)\"\n #endif\n \n-#ifndef CPP_SPEC\n-#define CPP_SPEC \"%{m6:-D__arm6__} %{!ansi: -D_BSD_C}\"\n-#endif\n-\n /* Riscix 1.1 doesn't have X/OPEN support, so only accept -mbsd (but ignore\n    it).  \n    By not having -mxopen and -mno-symrename, we get warning messages,\n@@ -81,8 +77,17 @@ Boston, MA 02111-1307, USA.  */\n #define SYMBOL__MAIN __gccmain\n #endif\n \n+/* Override the normal default CPU */\n+#define SUBTARGET_CPU_DEFAULT TARGET_CPU_arm2\n+\n #include \"arm/aout.h\"\n \n+#undef CPP_SPEC\n+#define CPP_SPEC \"\\\n+%(cpp_cpu_arch) %(cpp_apcs_pc) %(cpp_float) %{!ansi: -D_BSD_C} \\\n+\"\n+\n+\n /* The native RISCiX assembler does not support stabs of any kind; because\n    the native assembler is not used by the compiler, Acorn didn't feel it was\n    necessary to put them in!  */"}]}