{"sha": "1de2bc2a007b2a724960d20dd6bc7585ef6fe092", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWRlMmJjMmEwMDdiMmE3MjQ5NjBkMjBkZDZiYzc1ODVlZjZmZTA5Mg==", "commit": {"author": {"name": "Olivier Hainque", "email": "hainque@adacore.com", "date": "2005-04-05T09:36:06Z"}, "committer": {"name": "Olivier Hainque", "email": "hainque@gcc.gnu.org", "date": "2005-04-05T09:36:06Z"}, "message": "iris6.h (DWARF_FRAME_RETURN_COLUMN): Redefine to match what the system unwinder expects.\n\n\t* config/mips/iris6.h (DWARF_FRAME_RETURN_COLUMN): Redefine to\n\tmatch what the system unwinder expects.\n\t* config/mips/mips.c (mips_frame_set): If we're saving the return\n\taddress register and the dwarf return address column number differs\n\tfrom the hard register number, adjust the note reg to refer to the\n\tformer.\n\nFrom-SVN: r97617", "tree": {"sha": "789ba54c32d2a50cb634856eda6de106777b45d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/789ba54c32d2a50cb634856eda6de106777b45d9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1de2bc2a007b2a724960d20dd6bc7585ef6fe092", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1de2bc2a007b2a724960d20dd6bc7585ef6fe092", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1de2bc2a007b2a724960d20dd6bc7585ef6fe092", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1de2bc2a007b2a724960d20dd6bc7585ef6fe092/comments", "author": {"login": "hainque", "id": 18735142, "node_id": "MDQ6VXNlcjE4NzM1MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/18735142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hainque", "html_url": "https://github.com/hainque", "followers_url": "https://api.github.com/users/hainque/followers", "following_url": "https://api.github.com/users/hainque/following{/other_user}", "gists_url": "https://api.github.com/users/hainque/gists{/gist_id}", "starred_url": "https://api.github.com/users/hainque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hainque/subscriptions", "organizations_url": "https://api.github.com/users/hainque/orgs", "repos_url": "https://api.github.com/users/hainque/repos", "events_url": "https://api.github.com/users/hainque/events{/privacy}", "received_events_url": "https://api.github.com/users/hainque/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "df7cc9b576724e644cbc9d01c73b7a973866739c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df7cc9b576724e644cbc9d01c73b7a973866739c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df7cc9b576724e644cbc9d01c73b7a973866739c"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "0fac52c8ff69ebe45e79a1322717c3c849f03228", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1de2bc2a007b2a724960d20dd6bc7585ef6fe092/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1de2bc2a007b2a724960d20dd6bc7585ef6fe092/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1de2bc2a007b2a724960d20dd6bc7585ef6fe092", "patch": "@@ -1,3 +1,12 @@\n+2005-04-05  Olivier Hainque  <hainque@adacore.com>\n+\t\n+\t* config/mips/iris6.h (DWARF_FRAME_RETURN_COLUMN): Redefine to\n+\tmatch what the system unwinder expects.\n+\t* config/mips/mips.c (mips_frame_set): If we're saving the return\n+\taddress register and the dwarf return address column number differs\n+\tfrom the hard register number, adjust the note reg to refer to the\n+\tformer.\n+\n 2004-04-05  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/mn10300/mn10300-protos.h (mn10300_override_options): Declare."}, {"sha": "b64d371b8f344e85057539272c40646ff8b30915", "filename": "gcc/config/mips/iris6.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1de2bc2a007b2a724960d20dd6bc7585ef6fe092/gcc%2Fconfig%2Fmips%2Firis6.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1de2bc2a007b2a724960d20dd6bc7585ef6fe092/gcc%2Fconfig%2Fmips%2Firis6.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Firis6.h?ref=1de2bc2a007b2a724960d20dd6bc7585ef6fe092", "patch": "@@ -38,6 +38,11 @@ Boston, MA 02111-1307, USA.  */\n    compiling -g.  This guarantees that we can unwind the stack.  */\n #define DWARF2_FRAME_INFO 1\n \n+/* The system unwinder in libexc requires a specific dwarf return address\n+   column to work.  */\n+#undef  DWARF_FRAME_RETURN_COLUMN\n+#define DWARF_FRAME_RETURN_COLUMN (FP_REG_LAST + 1)\n+\n #undef MACHINE_TYPE\n #define MACHINE_TYPE \"SGI running IRIX 6.x\"\n "}, {"sha": "0a82ce1067d482b2aefcbfc60a4bf52123d80cc4", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1de2bc2a007b2a724960d20dd6bc7585ef6fe092/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1de2bc2a007b2a724960d20dd6bc7585ef6fe092/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=1de2bc2a007b2a724960d20dd6bc7585ef6fe092", "patch": "@@ -6276,8 +6276,18 @@ mips_set_frame_expr (rtx frame_pattern)\n static rtx\n mips_frame_set (rtx mem, rtx reg)\n {\n-  rtx set = gen_rtx_SET (VOIDmode, mem, reg);\n+  rtx set;\n+\n+  /* If we're saving the return address register and the dwarf return\n+     address column differs from the hard register number, adjust the\n+     note reg to refer to the former.  */\n+  if (REGNO (reg) == GP_REG_FIRST + 31\n+      && DWARF_FRAME_RETURN_COLUMN != GP_REG_FIRST + 31)\n+    reg = gen_rtx_REG (GET_MODE (reg), DWARF_FRAME_RETURN_COLUMN);\n+\n+  set = gen_rtx_SET (VOIDmode, mem, reg);\n   RTX_FRAME_RELATED_P (set) = 1;\n+\n   return set;\n }\n "}]}