{"sha": "0e9197f57271bdf12e1e55ccdd025b7c8b415c0d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGU5MTk3ZjU3MjcxYmRmMTJlMWU1NWNjZGQwMjViN2M4YjQxNWMwZA==", "commit": {"author": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2011-06-25T11:17:35Z"}, "committer": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2011-06-25T11:17:35Z"}, "message": "re PR driver/49371 (xgcc: error: unrecognized option '-pie' on *-apple-darwin*)\n\n\n\tPR driver/49371\n\t* config/darwin.c (darwin_override_options): Improve warning when\n\tmdynamic-no-pic is given together with fPIC/fpic, also warn when it\n\tis given with fpie/fPIE.\n\t* config/darwin.h (PIE_SPEC): New, (LINK_SPEC): Use PIE_SPEC.\n\t* config/darwin9.h (PIE_SPEC): New.\n\nFrom-SVN: r175397", "tree": {"sha": "8fad57787ab5621d328ad41358f3da858a97b716", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8fad57787ab5621d328ad41358f3da858a97b716"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "534611994759f9a7c74d00ae90bc3d49c8e34340", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/534611994759f9a7c74d00ae90bc3d49c8e34340", "html_url": "https://github.com/Rust-GCC/gccrs/commit/534611994759f9a7c74d00ae90bc3d49c8e34340"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "861cab633a77c9c8bacc1cc31af7f9a2e6be5e5a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0e9197f57271bdf12e1e55ccdd025b7c8b415c0d", "patch": "@@ -1,3 +1,11 @@\n+2011-06-25  Iain Sandoe  <iains@gcc.gnu.org>\n+\n+\tPR driver/49371\n+\t* config/darwin.c (darwin_override_options): Improve warning when\n+\tmdynamic-no-pic is given together with fPIC/fpic, also warn when it\n+\tis given with fpie/fPIE.\n+\t* config/darwin.h (PIE_SPEC): New, (LINK_SPEC): Use PIE_SPEC.\n+\t* config/darwin9.h (PIE_SPEC): New.\n \n 2011-06-25 \u00a0Basile Starynkevitch \u00a0<basile@starynkevitch.net>\n "}, {"sha": "b47e806af0629a9530235be92ab9869b16fc907a", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=0e9197f57271bdf12e1e55ccdd025b7c8b415c0d", "patch": "@@ -2932,7 +2932,9 @@ darwin_override_options (void)\n   if (MACHO_DYNAMIC_NO_PIC_P)\n     {\n       if (flag_pic)\n-\twarning (0, \"-mdynamic-no-pic overrides -fpic or -fPIC\");\n+\twarning_at (UNKNOWN_LOCATION, 0,\n+\t\t \"%<-mdynamic-no-pic%> overrides %<-fpic%>, %<-fPIC%>,\"\n+\t\t \" %<-fpie%> or %<-fPIE%>\");\n       flag_pic = 0;\n     }\n   else if (flag_pic == 1)"}, {"sha": "762a460476b9f49b1c85a7fadf60a57b72a1a170", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=0e9197f57271bdf12e1e55ccdd025b7c8b415c0d", "patch": "@@ -226,6 +226,8 @@ extern GTY(()) int darwin_ms_struct;\n #define LINK_SYSROOT_SPEC \"%{isysroot*:-syslibroot %*}\"\n #endif\n \n+#define PIE_SPEC \"%{fpie|pie|fPIE:}\"\n+\n /* Please keep the random linker options in alphabetical order (modulo\n    'Z' and 'no' prefixes). Note that options taking arguments may appear\n    multiple times on a command line with different arguments each time,\n@@ -290,7 +292,7 @@ extern GTY(()) int darwin_ms_struct;\n      %:version-compare(< 10.5 mmacosx-version-min= -multiply_defined) \\\n      %:version-compare(< 10.5 mmacosx-version-min= suppress)}} \\\n    %{Zmultiplydefinedunused*:-multiply_defined_unused %*} \\\n-   %{fpie:-pie} \\\n+   \" PIE_SPEC \" \\\n    %{prebind} %{noprebind} %{nofixprebinding} %{prebind_all_twolevel_modules} \\\n    %{read_only_relocs} \\\n    %{sectcreate*} %{sectorder*} %{seg1addr*} %{segprot*} \\"}, {"sha": "2e835c39e2df27f2646edb13da041416765c0921", "filename": "gcc/config/darwin9.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d/gcc%2Fconfig%2Fdarwin9.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e9197f57271bdf12e1e55ccdd025b7c8b415c0d/gcc%2Fconfig%2Fdarwin9.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin9.h?ref=0e9197f57271bdf12e1e55ccdd025b7c8b415c0d", "patch": "@@ -35,6 +35,12 @@ along with GCC; see the file COPYING3.  If not see\n /* Tell collect2 to run dsymutil for us as necessary.  */\n #define COLLECT_RUN_DSYMUTIL 1\n \n+#undef PIE_SPEC\n+#define PIE_SPEC \\\n+  \"%{fpie|pie|fPIE: \\\n+     %{mdynamic-no-pic: %n'-mdynamic-no-pic' overrides '-pie', '-fpie' or '-fPIE'; \\\n+      :-pie}}\"\n+\n #undef  ASM_OUTPUT_ALIGNED_COMMON\n #define ASM_OUTPUT_ALIGNED_COMMON(FILE, NAME, SIZE, ALIGN)\t\t\\\n   do {\t\t\t\t\t\t\t\t\t\\"}]}