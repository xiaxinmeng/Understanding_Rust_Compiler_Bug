{"sha": "877fb4507b254f536cbe3aa19e346092e0bf2661", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODc3ZmI0NTA3YjI1NGY1MzZjYmUzYWExOWUzNDYwOTJlMGJmMjY2MQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2012-02-10T18:23:12Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2012-02-10T18:23:12Z"}, "message": "Disallow negative constant address for x32\n\ngcc/\n\n2012-02-10  Uros Bizjak  <ubizjak@gmail.com>\n\n\tPR target/52146\n\t* config/i386/i386.c (ix86_legitimate_address_p): Disallow\n\tnegative constant address for x32.\n\ngcc/testsuite/\n\n2012-02-10  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR target/52146\n\t* gcc.target/i386/pr52146.c: New.\n\nFrom-SVN: r184111", "tree": {"sha": "aa391aa4dbf472f6762b9b05a97e50d40cce216e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa391aa4dbf472f6762b9b05a97e50d40cce216e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/877fb4507b254f536cbe3aa19e346092e0bf2661", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/877fb4507b254f536cbe3aa19e346092e0bf2661", "html_url": "https://github.com/Rust-GCC/gccrs/commit/877fb4507b254f536cbe3aa19e346092e0bf2661", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/877fb4507b254f536cbe3aa19e346092e0bf2661/comments", "author": null, "committer": null, "parents": [{"sha": "75cee7c62ab4a51c1e9c18f1c06febbd38b8021b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75cee7c62ab4a51c1e9c18f1c06febbd38b8021b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75cee7c62ab4a51c1e9c18f1c06febbd38b8021b"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "abe8c6164fa53c7bd6ef1a99cd3ddb41cc7844d7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/877fb4507b254f536cbe3aa19e346092e0bf2661/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/877fb4507b254f536cbe3aa19e346092e0bf2661/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=877fb4507b254f536cbe3aa19e346092e0bf2661", "patch": "@@ -1,3 +1,9 @@\n+2012-02-10  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/52146\n+\t* config/i386/i386.c (ix86_legitimate_address_p): Disallow\n+\tnegative constant address for x32.\n+\n 2012-02-10  Richard Henderson  <rth@redhat.com>\n \n         * tree-ssa-dce.c (propagate_necessity): Handle GIMPLE_TRANSACTION."}, {"sha": "fad5e66d9c91bad0fe07d7351db7f3c559fc66bc", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/877fb4507b254f536cbe3aa19e346092e0bf2661/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/877fb4507b254f536cbe3aa19e346092e0bf2661/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=877fb4507b254f536cbe3aa19e346092e0bf2661", "patch": "@@ -11932,6 +11932,13 @@ ix86_legitimate_address_p (enum machine_mode mode ATTRIBUTE_UNUSED,\n   rtx base, index, disp;\n   HOST_WIDE_INT scale;\n \n+  /* Since constant address in x32 is signed extended to 64bit,\n+     we have to prevent addresses from 0x80000000 to 0xffffffff.  */\n+  if (TARGET_X32\n+      && CONST_INT_P (addr)\n+      && INTVAL (addr) < 0)\n+    return false;\n+\n   if (ix86_decompose_address (addr, &parts) <= 0)\n     /* Decomposition failed.  */\n     return false;"}, {"sha": "ecf16a18a2d3efbf01d6793d7072aed32583e8b2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/877fb4507b254f536cbe3aa19e346092e0bf2661/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/877fb4507b254f536cbe3aa19e346092e0bf2661/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=877fb4507b254f536cbe3aa19e346092e0bf2661", "patch": "@@ -1,3 +1,8 @@\n+2012-02-10  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/52146\n+\t* gcc.target/i386/pr52146.c: New.\n+\n 2012-02-10  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/52177"}]}