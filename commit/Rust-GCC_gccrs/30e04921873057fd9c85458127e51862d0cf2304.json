{"sha": "30e04921873057fd9c85458127e51862d0cf2304", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzBlMDQ5MjE4NzMwNTdmZDljODU0NTgxMjdlNTE4NjJkMGNmMjMwNA==", "commit": {"author": {"name": "Janis Johnson", "email": "janis187@us.ibm.com", "date": "2007-05-14T23:43:07Z"}, "committer": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2007-05-14T23:43:07Z"}, "message": "re PR c/31924 (gcc accepts invalid suffixes for decimal float constants)\n\nlibcpp/\n        PR c/31924\n        * expr.c (interpret_float_suffix): Check for invalid suffix.\ngcc/testsuite/\n        PR c/31924\n        * gcc.dg/fltconst-1.c: New test.\n\nFrom-SVN: r124730", "tree": {"sha": "b853079a0b6c6486743cd6cf3116784b5035dce2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b853079a0b6c6486743cd6cf3116784b5035dce2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/30e04921873057fd9c85458127e51862d0cf2304", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30e04921873057fd9c85458127e51862d0cf2304", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30e04921873057fd9c85458127e51862d0cf2304", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30e04921873057fd9c85458127e51862d0cf2304/comments", "author": null, "committer": null, "parents": [{"sha": "d077694a0f9e7fdb7fb663e66f2200e33b7230ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d077694a0f9e7fdb7fb663e66f2200e33b7230ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d077694a0f9e7fdb7fb663e66f2200e33b7230ad"}], "stats": {"total": 43, "additions": 35, "deletions": 8}, "files": [{"sha": "b195815eda09517df3cbad2d384e7f8d6ebf8bad", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e04921873057fd9c85458127e51862d0cf2304/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e04921873057fd9c85458127e51862d0cf2304/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=30e04921873057fd9c85458127e51862d0cf2304", "patch": "@@ -1,5 +1,8 @@\n 2007-05-14  Janis Johnson  <janis187@us.ibm.com>\n \n+\tPR c/31924\n+\t* gcc.dg/fltconst-1.c: New test.\n+\n \t* gcc.dg/dfp/func-mixed.c: Replace invalid constant suffixes.\n \t* gcc.dg/dfp/operator-assignment.c: Ditto.\n "}, {"sha": "bf92227064444ae60cdde66594226f5a0a22fb0a", "filename": "gcc/testsuite/gcc.dg/fltconst-1.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e04921873057fd9c85458127e51862d0cf2304/gcc%2Ftestsuite%2Fgcc.dg%2Ffltconst-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e04921873057fd9c85458127e51862d0cf2304/gcc%2Ftestsuite%2Fgcc.dg%2Ffltconst-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ffltconst-1.c?ref=30e04921873057fd9c85458127e51862d0cf2304", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-std=gnu99\" } */\n+\n+double a = 1.ld;\t/* { dg-error \"invalid suffix\" } */\n+double b = 1.fd;\t/* { dg-error \"invalid suffix\" } */\n+double c = 1.di;\t/* { dg-error \"invalid suffix\" } */\n+double d = 1.dj;\t/* { dg-error \"invalid suffix\" } */\n+double e = 1.id;\t/* { dg-error \"invalid suffix\" } */\n+double f = 1.jd;\t/* { dg-error \"invalid suffix\" } */\n+double g = 1.ddd;\t/* { dg-error \"invalid suffix\" } */\n+double h = 1.ldd;\t/* { dg-error \"invalid suffix\" } */\n+double i = 1.dld;\t/* { dg-error \"invalid suffix\" } */\n+double j = 1.ddl;\t/* { dg-error \"invalid suffix\" } */\n+double k = 1.fdd;\t/* { dg-error \"invalid suffix\" } */\n+double l = 1.dfd;\t/* { dg-error \"invalid suffix\" } */\n+double m = 1.ddf;\t/* { dg-error \"invalid suffix\" } */"}, {"sha": "5b941ff9cca78c6bd5b7126a2a2c391b2b4944a2", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e04921873057fd9c85458127e51862d0cf2304/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e04921873057fd9c85458127e51862d0cf2304/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=30e04921873057fd9c85458127e51862d0cf2304", "patch": "@@ -1,3 +1,8 @@\n+2007-05-14  Janis Johnson  <janis187@us.ibm.com>\n+\n+\tPR c/31924\n+\t* expr.c (interpret_float_suffix): Check for invalid suffix.\n+\n 2007-05-02  Eric Christopher  <echristo@apple.com>\n \n \t* expr.c (num_div_op): Don't overflow if the result is"}, {"sha": "8401daee032f24cb655766cc4b92f9948c64ced7", "filename": "libcpp/expr.c", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30e04921873057fd9c85458127e51862d0cf2304/libcpp%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30e04921873057fd9c85458127e51862d0cf2304/libcpp%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fexpr.c?ref=30e04921873057fd9c85458127e51862d0cf2304", "patch": "@@ -87,16 +87,19 @@ interpret_float_suffix (const uchar *s, size_t len)\n   while (len--)\n     switch (s[len])\n       {\n-      case 'f': case 'F': f++; break;\n-      case 'l': case 'L': l++; break;\n-      case 'i': case 'I':\n-      case 'j': case 'J': i++; break;\n-      case 'd': case 'D':\n-\t/* Disallow fd, ld suffixes.  */\n-\tif (d && (f || l))\n+      case 'f': case 'F':\n+\tif (d > 0)\n+\t  return 0;\n+\tf++;\n+\tbreak;\n+      case 'l': case 'L':\n+\tif (d > 0)\n \t  return 0;\n-\td++;\n+\tl++;\n \tbreak;\n+      case 'i': case 'I':\n+      case 'j': case 'J': i++; break;\n+      case 'd': case 'D': d++; break;\n       default:\n \treturn 0;\n       }"}]}