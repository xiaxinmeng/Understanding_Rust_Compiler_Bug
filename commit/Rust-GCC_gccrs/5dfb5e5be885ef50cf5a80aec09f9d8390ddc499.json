{"sha": "5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWRmYjVlNWJlODg1ZWY1MGNmNWE4MGFlYzA5ZjlkODM5MGRkYzQ5OQ==", "commit": {"author": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2018-03-20T21:45:14Z"}, "committer": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2018-03-20T21:45:14Z"}, "message": "re PR libstdc++/84998 (std::hash<std::bitset<N>> fails in Debug Mode)\n\n2018-03-20  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n\n\tPR libstdc++/84998\n\t* include/bits/stl_bvector.h: Fix std::hash friend declaration.\n\t* include/std/bitset: Likewise.\n\t* include/bits/stl_map.h (std::map<>): Fix _Rb_tree_merge_helper friend\n\tdeclaration.\n\t* include/bits/stl_multimap.h (std::multimap<>): Likewise.\n\t* include/bits/stl_multiset.h (std::multiset<>): Likewise.\n\t* include/bits/stl_set.h (std::set<>): Likewise.\n\t* include/bits/unordered_map.h (std::unordered_map<>): Fix\n\t_Hash_merge_helper friend declaration.\n\t(std::unordered_multimap<>): Likewise.\n\t* include/bits/unordered_set.h (std::unordered_set<>): Likewise.\n\t(std::unordered_multiset<>): Likewise.\n\nFrom-SVN: r258693", "tree": {"sha": "0197f28ae7393c0f33b1de895e18d1263552d97a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0197f28ae7393c0f33b1de895e18d1263552d97a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/comments", "author": null, "committer": null, "parents": [{"sha": "6f21dc3c4f987a9d4abd3b0c1c46d8d8a16a3465", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f21dc3c4f987a9d4abd3b0c1c46d8d8a16a3465", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f21dc3c4f987a9d4abd3b0c1c46d8d8a16a3465"}], "stats": {"total": 52, "additions": 37, "deletions": 15}, "files": [{"sha": "7ac98fb2143717a4c8951278792119b0ac5a400b", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "patch": "@@ -1,3 +1,19 @@\n+2018-03-20  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n+\n+\tPR libstdc++/84998\n+\t* include/bits/stl_bvector.h: Fix std::hash friend declaration.\n+\t* include/std/bitset: Likewise.\n+\t* include/bits/stl_map.h (std::map<>): Fix _Rb_tree_merge_helper friend\n+\tdeclaration.\n+\t* include/bits/stl_multimap.h (std::multimap<>): Likewise.\n+\t* include/bits/stl_multiset.h (std::multiset<>): Likewise.\n+\t* include/bits/stl_set.h (std::set<>): Likewise.\n+\t* include/bits/unordered_map.h (std::unordered_map<>): Fix\n+\t_Hash_merge_helper friend declaration.\n+\t(std::unordered_multimap<>): Likewise.\n+\t* include/bits/unordered_set.h (std::unordered_set<>): Likewise.\n+\t(std::unordered_multiset<>): Likewise.\n+\n 2018-03-19  Gerald Pfeifer  <gerald@pfeifer.com>\n \n \t* doc/xml/api.xml: www.fsf.org has moved to https. Also omit\n@@ -8,7 +24,8 @@\n \t* doc/xml/manual/spine.xml: Ditto.\n \t* doc/xml/spine.xml: Ditto.\n \n-2018-03-19  Gerald Pfeifer  <gerald@pfeifer.com>\t\n+2018-03-19  Gerald Pfeifer  <gerald@pfeifer.com>\n+\n \t* doc/xml/manual/documentation_hacking.xml: Adjust link to\n \tdocbook.org.\n "}, {"sha": "de723edf50c509e1a1d1e234a4735b5743af626e", "filename": "libstdc++-v3/include/bits/stl_bvector.h", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_bvector.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_bvector.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_bvector.h?ref=5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "patch": "@@ -58,6 +58,7 @@\n \n #if __cplusplus >= 201103L\n #include <initializer_list>\n+#include <bits/functional_hash.h>\n #endif\n \n namespace std _GLIBCXX_VISIBILITY(default)\n@@ -591,7 +592,7 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n       typedef typename _Base::_Bit_alloc_traits\t\t_Bit_alloc_traits;\n \n #if __cplusplus >= 201103L\n-      template<typename> friend struct hash;\n+      friend struct std::hash<vector>;\n #endif\n \n     public:\n@@ -1313,8 +1314,6 @@ _GLIBCXX_END_NAMESPACE_VERSION\n \n #if __cplusplus >= 201103L\n \n-#include <bits/functional_hash.h>\n-\n namespace std _GLIBCXX_VISIBILITY(default)\n {\n _GLIBCXX_BEGIN_NAMESPACE_VERSION"}, {"sha": "a4a026ed34a6ac1b841c63ccb61998506f8afbbd", "filename": "libstdc++-v3/include/bits/stl_map.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_map.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_map.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_map.h?ref=5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "patch": "@@ -633,7 +633,7 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n       { return _M_t._M_reinsert_node_hint_unique(__hint, std::move(__nh)); }\n \n       template<typename, typename>\n-\tfriend class _Rb_tree_merge_helper;\n+\tfriend class std::_Rb_tree_merge_helper;\n \n       template<typename _C2>\n \tvoid"}, {"sha": "fc8f454723d425fa523ef6a54990717148425c3c", "filename": "libstdc++-v3/include/bits/stl_multimap.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_multimap.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_multimap.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_multimap.h?ref=5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "patch": "@@ -651,7 +651,7 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n       { return _M_t._M_reinsert_node_hint_equal(__hint, std::move(__nh)); }\n \n       template<typename, typename>\n-\tfriend class _Rb_tree_merge_helper;\n+\tfriend class std::_Rb_tree_merge_helper;\n \n       template<typename _C2>\n \tvoid"}, {"sha": "f41f56c9485f3f15aea55e515f59911f01e79d9b", "filename": "libstdc++-v3/include/bits/stl_multiset.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_multiset.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_multiset.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_multiset.h?ref=5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "patch": "@@ -589,7 +589,7 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n       { return _M_t._M_reinsert_node_hint_equal(__hint, std::move(__nh)); }\n \n       template<typename, typename>\n-\tfriend class _Rb_tree_merge_helper;\n+\tfriend class std::_Rb_tree_merge_helper;\n \n       template<typename _Compare1>\n \tvoid"}, {"sha": "2e332efa477fb5f67431d26d9f9a5fd1c1c61573", "filename": "libstdc++-v3/include/bits/stl_set.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_set.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_set.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_set.h?ref=5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "patch": "@@ -604,7 +604,7 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n       { return _M_t._M_reinsert_node_hint_unique(__hint, std::move(__nh)); }\n \n       template<typename, typename>\n-\tfriend class _Rb_tree_merge_helper;\n+\tfriend class std::_Rb_tree_merge_helper;\n \n       template<typename _Compare1>\n \tvoid"}, {"sha": "07aad9e5e1939a1e7a9d7766b206ea58a739befd", "filename": "libstdc++-v3/include/bits/unordered_map.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Funordered_map.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Funordered_map.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Funordered_map.h?ref=5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "patch": "@@ -862,7 +862,7 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n \n #if __cplusplus > 201402L\n       template<typename, typename, typename>\n-\tfriend class _Hash_merge_helper;\n+\tfriend class std::_Hash_merge_helper;\n \n       template<typename _H2, typename _P2>\n \tvoid\n@@ -1742,7 +1742,7 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n \n #if __cplusplus > 201402L\n       template<typename, typename, typename>\n-\tfriend class _Hash_merge_helper;\n+\tfriend class std::_Hash_merge_helper;\n \n       template<typename _H2, typename _P2>\n \tvoid"}, {"sha": "c9ac4ad57e3d8e5b960288cc123fa6a82ca8524c", "filename": "libstdc++-v3/include/bits/unordered_set.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Funordered_set.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fbits%2Funordered_set.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Funordered_set.h?ref=5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "patch": "@@ -588,7 +588,7 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n \n #if __cplusplus > 201402L\n       template<typename, typename, typename>\n-\tfriend class _Hash_merge_helper;\n+\tfriend class std::_Hash_merge_helper;\n \n       template<typename _H2, typename _P2>\n \tvoid\n@@ -1368,7 +1368,7 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n \n #if __cplusplus > 201402L\n       template<typename, typename, typename>\n-\tfriend class _Hash_merge_helper;\n+\tfriend class std::_Hash_merge_helper;\n \n       template<typename _H2, typename _P2>\n \tvoid"}, {"sha": "5289265372875407b0285c08cec7927e30a5fae5", "filename": "libstdc++-v3/include/debug/vector", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fvector", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fvector", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fvector?ref=5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "patch": "@@ -770,6 +770,8 @@ namespace __debug\n } // namespace __debug\n \n #if __cplusplus >= 201103L\n+_GLIBCXX_BEGIN_NAMESPACE_VERSION\n+\n   // DR 1182.\n   /// std::hash specialization for vector<bool>.\n   template<typename _Alloc>\n@@ -780,6 +782,8 @@ namespace __debug\n       operator()(const __debug::vector<bool, _Alloc>& __b) const noexcept\n       { return std::hash<_GLIBCXX_STD_C::vector<bool, _Alloc>>()(__b); }\n     };\n+\n+_GLIBCXX_END_NAMESPACE_VERSION\n #endif\n \n } // namespace std"}, {"sha": "e598ea312a79cc37d741c0bd13c1599e5f05a5a6", "filename": "libstdc++-v3/include/std/bitset", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5dfb5e5be885ef50cf5a80aec09f9d8390ddc499/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset?ref=5dfb5e5be885ef50cf5a80aec09f9d8390ddc499", "patch": "@@ -50,6 +50,10 @@\n #include <iosfwd>\n #include <bits/cxxabi_forced.h>\n \n+#if __cplusplus >= 201103L\n+# include <bits/functional_hash.h>\n+#endif\n+\n #define _GLIBCXX_BITSET_BITS_PER_WORD  (__CHAR_BIT__ * __SIZEOF_LONG__)\n #define _GLIBCXX_BITSET_WORDS(__n) \\\n   ((__n) / _GLIBCXX_BITSET_BITS_PER_WORD + \\\n@@ -779,7 +783,7 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n       }\n \n #if __cplusplus >= 201103L\n-      template<typename> friend struct hash;\n+      friend struct std::hash<bitset>;\n #endif\n \n     public:\n@@ -1549,8 +1553,6 @@ _GLIBCXX_END_NAMESPACE_CONTAINER\n \n #if __cplusplus >= 201103L\n \n-#include <bits/functional_hash.h>\n-\n namespace std _GLIBCXX_VISIBILITY(default)\n {\n _GLIBCXX_BEGIN_NAMESPACE_VERSION"}]}