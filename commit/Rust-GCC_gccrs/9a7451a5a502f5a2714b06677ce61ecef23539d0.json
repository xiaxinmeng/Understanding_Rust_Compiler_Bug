{"sha": "9a7451a5a502f5a2714b06677ce61ecef23539d0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWE3NDUxYTVhNTAyZjVhMjcxNGIwNjY3N2NlNjFlY2VmMjM1MzlkMA==", "commit": {"author": {"name": "Steve Ellcey", "email": "sellcey@mips.com", "date": "2014-10-08T16:14:11Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2014-10-08T16:14:11Z"}, "message": "linux64.h: Remove.\n\n2014-10-08  Steve Ellcey  <sellcey@mips.com>\n\n\t* config/mips/linux64.h: Remove.\n\t* config/mips/gnu-user64.h: Remove.\n\t* gcc.config (mips*-*-*): Remove references to linux64.h and\n\tgnu-user64.h\n\t* config/mips/gnu-user.h (GNU_USER_TARGET_LINK_SPEC): Replace\n\twith modified version from gnu-user64.h.\n\t(LINUX_DRIVER_SELF_SPECS): Update parts from gnu-user64.h.\n\t(LOCAL_LABEL_PREFIX): Copy from gnu-user64.h.\n\t* config/mips/linux.h (GNU_USER_LINK_EMULATION32): Copy from\n\tlinux64.h.\n\t(GNU_USER_LINK_EMULATION64): Ditto.\n\t(GNU_USER_LINK_EMULATIONN32): Ditto.\n\t(GLIBC_DYNAMIC_LINKER32): Ditto.\n\t(GLIBC_DYNAMIC_LINKER64): Ditto.\n\t(GLIBC_DYNAMIC_LINKERN32): Ditto.\n\t(UCLIBC_DYNAMIC_LINKER32): Ditto.\n\t(UCLIBC_DYNAMIC_LINKER64): Ditto.\n\t(UCLIBC_DYNAMIC_LINKERN32): Ditto.\n\t(BIONIC_DYNAMIC_LINKERN32): Ditto.\n\t(GNU_USER_DYNAMIC_LINKERN32): Ditto.\n\t(GLIBC_DYNAMIC_LINKER): Delete.\n\t(UCLIBC_DYNAMIC_LINKER): Delete.\n\nFrom-SVN: r216008", "tree": {"sha": "ff27406ceb4b11ed5de307e18fda1ecc56be84e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff27406ceb4b11ed5de307e18fda1ecc56be84e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9a7451a5a502f5a2714b06677ce61ecef23539d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a7451a5a502f5a2714b06677ce61ecef23539d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a7451a5a502f5a2714b06677ce61ecef23539d0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a7451a5a502f5a2714b06677ce61ecef23539d0/comments", "author": null, "committer": null, "parents": [{"sha": "90c0d4c4f2ba6f1e224fa2c53e82b3fb0d781a74", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90c0d4c4f2ba6f1e224fa2c53e82b3fb0d781a74", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90c0d4c4f2ba6f1e224fa2c53e82b3fb0d781a74"}], "stats": {"total": 173, "additions": 64, "deletions": 109}, "files": [{"sha": "5c91c38ffd84f8063951e8fa173dfacfa6b1255a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a7451a5a502f5a2714b06677ce61ecef23539d0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a7451a5a502f5a2714b06677ce61ecef23539d0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9a7451a5a502f5a2714b06677ce61ecef23539d0", "patch": "@@ -1,3 +1,28 @@\n+2014-10-08  Steve Ellcey  <sellcey@mips.com>\n+\n+\t* config/mips/linux64.h: Remove.\n+\t* config/mips/gnu-user64.h: Remove.\n+\t* gcc.config (mips*-*-*): Remove references to linux64.h and\n+\tgnu-user64.h\n+\t* config/mips/gnu-user.h (GNU_USER_TARGET_LINK_SPEC): Replace\n+\twith modified version from gnu-user64.h.\n+\t(LINUX_DRIVER_SELF_SPECS): Update parts from gnu-user64.h.\n+\t(LOCAL_LABEL_PREFIX): Copy from gnu-user64.h.\n+\t* config/mips/linux.h (GNU_USER_LINK_EMULATION32): Copy from\n+\tlinux64.h.\n+\t(GNU_USER_LINK_EMULATION64): Ditto.\n+\t(GNU_USER_LINK_EMULATIONN32): Ditto.\n+\t(GLIBC_DYNAMIC_LINKER32): Ditto.\n+\t(GLIBC_DYNAMIC_LINKER64): Ditto.\n+\t(GLIBC_DYNAMIC_LINKERN32): Ditto.\n+\t(UCLIBC_DYNAMIC_LINKER32): Ditto.\n+\t(UCLIBC_DYNAMIC_LINKER64): Ditto.\n+\t(UCLIBC_DYNAMIC_LINKERN32): Ditto.\n+\t(BIONIC_DYNAMIC_LINKERN32): Ditto.\n+\t(GNU_USER_DYNAMIC_LINKERN32): Ditto.\n+\t(GLIBC_DYNAMIC_LINKER): Delete.\n+\t(UCLIBC_DYNAMIC_LINKER): Delete.\n+\n 2014-10-08  Joern Rennecke  <joern.rennecke@embecosm.com>\n \t    Richard Biener  <rguenther@suse.de>\n "}, {"sha": "6bbbb26e3ef8796a333240ec1b8b419c02e658b4", "filename": "gcc/config.gcc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a7451a5a502f5a2714b06677ce61ecef23539d0/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a7451a5a502f5a2714b06677ce61ecef23539d0/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=9a7451a5a502f5a2714b06677ce61ecef23539d0", "patch": "@@ -1938,15 +1938,15 @@ mips*-*-netbsd*)\t\t\t# NetBSD/mips, either endian.\n \textra_options=\"${extra_options} netbsd.opt netbsd-elf.opt\"\n \t;;\n mips*-mti-linux*)\n-\ttm_file=\"dbxelf.h elfos.h gnu-user.h linux.h linux-android.h glibc-stdint.h ${tm_file} mips/gnu-user.h mips/gnu-user64.h mips/linux64.h mips/linux-common.h mips/mti-linux.h\"\n+\ttm_file=\"dbxelf.h elfos.h gnu-user.h linux.h linux-android.h glibc-stdint.h ${tm_file} mips/gnu-user.h mips/linux.h mips/linux-common.h mips/mti-linux.h\"\n \textra_options=\"${extra_options} linux-android.opt\"\n \ttmake_file=\"${tmake_file} mips/t-mti-linux\"\n \ttm_defines=\"${tm_defines} MIPS_ISA_DEFAULT=33 MIPS_ABI_DEFAULT=ABI_32\"\n \tgnu_ld=yes\n \tgas=yes\n \t;;\n mips64*-*-linux* | mipsisa64*-*-linux*)\n-\ttm_file=\"dbxelf.h elfos.h gnu-user.h linux.h linux-android.h glibc-stdint.h ${tm_file} mips/gnu-user.h mips/gnu-user64.h mips/linux64.h mips/linux-common.h\"\n+\ttm_file=\"dbxelf.h elfos.h gnu-user.h linux.h linux-android.h glibc-stdint.h ${tm_file} mips/gnu-user.h mips/linux.h mips/linux-common.h\"\n \textra_options=\"${extra_options} linux-android.opt\"\n \ttmake_file=\"${tmake_file} mips/t-linux64\"\n \ttm_defines=\"${tm_defines} MIPS_ABI_DEFAULT=ABI_N32\"\n@@ -1970,7 +1970,6 @@ mips*-*-linux*)\t\t\t\t# Linux MIPS, either endian.\n \ttm_file=\"dbxelf.h elfos.h gnu-user.h linux.h linux-android.h glibc-stdint.h ${tm_file} mips/gnu-user.h mips/linux.h\"\n \textra_options=\"${extra_options} linux-android.opt\"\n \tif test x$enable_targets = xall; then\n-\t\ttm_file=\"${tm_file} mips/gnu-user64.h mips/linux64.h\"\n \t\ttmake_file=\"${tmake_file} mips/t-linux64\"\n \tfi\n \ttm_file=\"${tm_file} mips/linux-common.h\""}, {"sha": "6c02054bf2eac9b89226b2e1d6a569b8e0d08900", "filename": "gcc/config/mips/gnu-user.h", "status": "modified", "additions": 16, "deletions": 7, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a7451a5a502f5a2714b06677ce61ecef23539d0/gcc%2Fconfig%2Fmips%2Fgnu-user.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a7451a5a502f5a2714b06677ce61ecef23539d0/gcc%2Fconfig%2Fmips%2Fgnu-user.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fgnu-user.h?ref=9a7451a5a502f5a2714b06677ce61ecef23539d0", "patch": "@@ -52,16 +52,20 @@ along with GCC; see the file COPYING3.  If not see\n #undef MIPS_DEFAULT_GVALUE\n #define MIPS_DEFAULT_GVALUE 0\n \n-/* Borrowed from sparc/linux.h */\n #undef GNU_USER_TARGET_LINK_SPEC\n-#define GNU_USER_TARGET_LINK_SPEC \\\n- \"%(endian_spec) \\\n-  %{shared:-shared} \\\n+#define GNU_USER_TARGET_LINK_SPEC \"\\\n+  %{G*} %{EB} %{EL} %{mips*} %{shared} \\\n   %{!shared: \\\n     %{!static: \\\n       %{rdynamic:-export-dynamic} \\\n-      -dynamic-linker \" GNU_USER_DYNAMIC_LINKER \"} \\\n-      %{static:-static}}\"\n+      %{mabi=n32: -dynamic-linker \" GNU_USER_DYNAMIC_LINKERN32 \"} \\\n+      %{mabi=64: -dynamic-linker \" GNU_USER_DYNAMIC_LINKER64 \"} \\\n+      %{mabi=32: -dynamic-linker \" GNU_USER_DYNAMIC_LINKER32 \"}} \\\n+    %{static}} \\\n+  %{mabi=n32:-m\" GNU_USER_LINK_EMULATIONN32 \"} \\\n+  %{mabi=64:-m\" GNU_USER_LINK_EMULATION64 \"} \\\n+  %{mabi=32:-m\" GNU_USER_LINK_EMULATION32 \"}\"\n+\n #undef LINK_SPEC\n #define LINK_SPEC GNU_USER_TARGET_LINK_SPEC\n \n@@ -122,7 +126,9 @@ extern const char *host_detect_local_cpu (int argc, const char **argv);\n      specs handling by removing a redundant option.  */\t\t\t\\\n   \"%{!mno-shared:%<mplt}\",\t\t\t\t\t\t\\\n   /* -mplt likewise has no effect for -mabi=64 without -msym32.  */\t\\\n-  \"%{mabi=64:%{!msym32:%<mplt}}\"\n+  \"%{mabi=64:%{!msym32:%<mplt}}\",\t\t\t\t\t\\\n+  \"%{!EB:%{!EL:%(endian_spec)}}\",\t\t\t\t\t\\\n+  \"%{!mabi=*: -\" MULTILIB_ABI_DEFAULT \"}\"\n \n #undef DRIVER_SELF_SPECS\n #define DRIVER_SELF_SPECS \\\n@@ -137,3 +143,6 @@ extern const char *host_detect_local_cpu (int argc, const char **argv);\n #define ENDFILE_SPEC \\\n   GNU_USER_TARGET_MATHFILE_SPEC \" \" \\\n   GNU_USER_TARGET_ENDFILE_SPEC\n+\n+#undef LOCAL_LABEL_PREFIX\n+#define LOCAL_LABEL_PREFIX (TARGET_OLDABI ? \"$\" : \".\")"}, {"sha": "b97b4a76848d5a643b678e043c6143c76d5f6599", "filename": "gcc/config/mips/gnu-user64.h", "status": "removed", "additions": 0, "deletions": 52, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90c0d4c4f2ba6f1e224fa2c53e82b3fb0d781a74/gcc%2Fconfig%2Fmips%2Fgnu-user64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90c0d4c4f2ba6f1e224fa2c53e82b3fb0d781a74/gcc%2Fconfig%2Fmips%2Fgnu-user64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fgnu-user64.h?ref=90c0d4c4f2ba6f1e224fa2c53e82b3fb0d781a74", "patch": "@@ -1,52 +0,0 @@\n-/* Definitions for MIPS systems using GNU userspace and n32/64 abi.\n-   Copyright (C) 2002-2014 Free Software Foundation, Inc.\n-\n-This file is part of GCC.\n-\n-GCC is free software; you can redistribute it and/or modify\n-it under the terms of the GNU General Public License as published by\n-the Free Software Foundation; either version 3, or (at your option)\n-any later version.\n-\n-GCC is distributed in the hope that it will be useful,\n-but WITHOUT ANY WARRANTY; without even the implied warranty of\n-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-GNU General Public License for more details.\n-\n-You should have received a copy of the GNU General Public License\n-along with GCC; see the file COPYING3.  If not see\n-<http://www.gnu.org/licenses/>.  */\n-\n-/* Force the default endianness and ABI flags onto the command line\n-   in order to make the other specs easier to write.  */\n-\n-#define LINUX64_DRIVER_SELF_SPECS \\\n-  LINUX_DRIVER_SELF_SPECS \\\n-  \" %{!EB:%{!EL:%(endian_spec)}}\" \\\n-  \" %{!mabi=*: -\" MULTILIB_ABI_DEFAULT \"}\"\n-\n-#undef DRIVER_SELF_SPECS\n-#define DRIVER_SELF_SPECS \\\n-  BASE_DRIVER_SELF_SPECS, \\\n-  LINUX64_DRIVER_SELF_SPECS\n-\n-#undef GNU_USER_TARGET_LINK_SPEC\n-#define GNU_USER_TARGET_LINK_SPEC \"\\\n-%{G*} %{EB} %{EL} %{mips1} %{mips2} %{mips3} %{mips4} \\\n-%{shared} \\\n- %(endian_spec) \\\n-  %{!shared: \\\n-    %{!static: \\\n-      %{rdynamic:-export-dynamic} \\\n-      %{mabi=n32: -dynamic-linker \" GNU_USER_DYNAMIC_LINKERN32 \"} \\\n-      %{mabi=64: -dynamic-linker \" GNU_USER_DYNAMIC_LINKER64 \"} \\\n-      %{mabi=32: -dynamic-linker \" GNU_USER_DYNAMIC_LINKER32 \"}} \\\n-    %{static:-static}} \\\n-%{mabi=n32:-m\" GNU_USER_LINK_EMULATIONN32 \"} \\\n-%{mabi=64:-m\" GNU_USER_LINK_EMULATION64 \"} \\\n-%{mabi=32:-m\" GNU_USER_LINK_EMULATION32 \"}\"\n-#undef LINK_SPEC\n-#define LINK_SPEC GNU_USER_TARGET_LINK_SPEC\n-\n-#undef LOCAL_LABEL_PREFIX\n-#define LOCAL_LABEL_PREFIX (TARGET_OLDABI ? \"$\" : \".\")"}, {"sha": "a117f90fb03d0185414dc27908c8703aee4f95e4", "filename": "gcc/config/mips/linux.h", "status": "modified", "additions": 21, "deletions": 3, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a7451a5a502f5a2714b06677ce61ecef23539d0/gcc%2Fconfig%2Fmips%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a7451a5a502f5a2714b06677ce61ecef23539d0/gcc%2Fconfig%2Fmips%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Flinux.h?ref=9a7451a5a502f5a2714b06677ce61ecef23539d0", "patch": "@@ -17,9 +17,27 @@ You should have received a copy of the GNU General Public License\n along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n-#define GLIBC_DYNAMIC_LINKER \\\n+#define GNU_USER_LINK_EMULATION32 \"elf32%{EB:b}%{EL:l}tsmip\"\n+#define GNU_USER_LINK_EMULATION64 \"elf64%{EB:b}%{EL:l}tsmip\"\n+#define GNU_USER_LINK_EMULATIONN32 \"elf32%{EB:b}%{EL:l}tsmipn32\"\n+\n+#define GLIBC_DYNAMIC_LINKER32 \\\n   \"%{mnan=2008:/lib/ld-linux-mipsn8.so.1;:/lib/ld.so.1}\"\n+#define GLIBC_DYNAMIC_LINKER64 \\\n+  \"%{mnan=2008:/lib64/ld-linux-mipsn8.so.1;:/lib64/ld.so.1}\"\n+#define GLIBC_DYNAMIC_LINKERN32 \\\n+  \"%{mnan=2008:/lib32/ld-linux-mipsn8.so.1;:/lib32/ld.so.1}\"\n \n-#undef UCLIBC_DYNAMIC_LINKER\n-#define UCLIBC_DYNAMIC_LINKER \\\n+#undef UCLIBC_DYNAMIC_LINKER32\n+#define UCLIBC_DYNAMIC_LINKER32 \\\n   \"%{mnan=2008:/lib/ld-uClibc-mipsn8.so.0;:/lib/ld-uClibc.so.0}\"\n+#undef UCLIBC_DYNAMIC_LINKER64\n+#define UCLIBC_DYNAMIC_LINKER64 \\\n+  \"%{mnan=2008:/lib/ld64-uClibc-mipsn8.so.0;:/lib/ld64-uClibc.so.0}\"\n+#define UCLIBC_DYNAMIC_LINKERN32 \\\n+  \"%{mnan=2008:/lib32/ld-uClibc-mipsn8.so.0;:/lib32/ld-uClibc.so.0}\"\n+\n+#define BIONIC_DYNAMIC_LINKERN32 \"/system/bin/linker32\"\n+#define GNU_USER_DYNAMIC_LINKERN32 \\\n+  CHOOSE_DYNAMIC_LINKER (GLIBC_DYNAMIC_LINKERN32, UCLIBC_DYNAMIC_LINKERN32, \\\n+                         BIONIC_DYNAMIC_LINKERN32)"}, {"sha": "7ad3b2af2b9ada73c3d2a1652ab50fb91c3371f8", "filename": "gcc/config/mips/linux64.h", "status": "removed", "additions": 0, "deletions": 44, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90c0d4c4f2ba6f1e224fa2c53e82b3fb0d781a74/gcc%2Fconfig%2Fmips%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90c0d4c4f2ba6f1e224fa2c53e82b3fb0d781a74/gcc%2Fconfig%2Fmips%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Flinux64.h?ref=90c0d4c4f2ba6f1e224fa2c53e82b3fb0d781a74", "patch": "@@ -1,44 +0,0 @@\n-/* Definitions for MIPS running Linux-based GNU systems with ELF format\n-   using n32/64 abi.\n-   Copyright (C) 2002-2014 Free Software Foundation, Inc.\n-\n-This file is part of GCC.\n-\n-GCC is free software; you can redistribute it and/or modify\n-it under the terms of the GNU General Public License as published by\n-the Free Software Foundation; either version 3, or (at your option)\n-any later version.\n-\n-GCC is distributed in the hope that it will be useful,\n-but WITHOUT ANY WARRANTY; without even the implied warranty of\n-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-GNU General Public License for more details.\n-\n-You should have received a copy of the GNU General Public License\n-along with GCC; see the file COPYING3.  If not see\n-<http://www.gnu.org/licenses/>.  */\n-\n-#define GNU_USER_LINK_EMULATION32 \"elf32%{EB:b}%{EL:l}tsmip\"\n-#define GNU_USER_LINK_EMULATION64 \"elf64%{EB:b}%{EL:l}tsmip\"\n-#define GNU_USER_LINK_EMULATIONN32 \"elf32%{EB:b}%{EL:l}tsmipn32\"\n-\n-#define GLIBC_DYNAMIC_LINKER32 \\\n-  \"%{mnan=2008:/lib/ld-linux-mipsn8.so.1;:/lib/ld.so.1}\"\n-#define GLIBC_DYNAMIC_LINKER64 \\\n-  \"%{mnan=2008:/lib64/ld-linux-mipsn8.so.1;:/lib64/ld.so.1}\"\n-#define GLIBC_DYNAMIC_LINKERN32 \\\n-  \"%{mnan=2008:/lib32/ld-linux-mipsn8.so.1;:/lib32/ld.so.1}\"\n-\n-#undef UCLIBC_DYNAMIC_LINKER32\n-#define UCLIBC_DYNAMIC_LINKER32 \\\n-  \"%{mnan=2008:/lib/ld-uClibc-mipsn8.so.0;:/lib/ld-uClibc.so.0}\"\n-#undef UCLIBC_DYNAMIC_LINKER64\n-#define UCLIBC_DYNAMIC_LINKER64 \\\n-  \"%{mnan=2008:/lib/ld64-uClibc-mipsn8.so.0;:/lib/ld64-uClibc.so.0}\"\n-#define UCLIBC_DYNAMIC_LINKERN32 \\\n-  \"%{mnan=2008:/lib32/ld-uClibc-mipsn8.so.0;:/lib32/ld-uClibc.so.0}\"\n-\n-#define BIONIC_DYNAMIC_LINKERN32 \"/system/bin/linker32\"\n-#define GNU_USER_DYNAMIC_LINKERN32 \\\n-  CHOOSE_DYNAMIC_LINKER (GLIBC_DYNAMIC_LINKERN32, UCLIBC_DYNAMIC_LINKERN32, \\\n-\t\t\t BIONIC_DYNAMIC_LINKERN32)"}]}