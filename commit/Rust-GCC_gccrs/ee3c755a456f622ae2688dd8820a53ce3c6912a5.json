{"sha": "ee3c755a456f622ae2688dd8820a53ce3c6912a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWUzYzc1NWE0NTZmNjIyYWUyNjg4ZGQ4ODIwYTUzY2UzYzY5MTJhNQ==", "commit": {"author": {"name": "Jason Thorpe", "email": "thorpej@wasabisystems.com", "date": "2002-10-28T17:20:36Z"}, "committer": {"name": "Jason Thorpe", "email": "thorpej@gcc.gnu.org", "date": "2002-10-28T17:20:36Z"}, "message": "config.gcc (*-*-netbsd*): Add NETBSD_ENABLE_PTHREADS to tm_defines if pthreads are enabled.\n\n* config.gcc (*-*-netbsd*): Add NETBSD_ENABLE_PTHREADS to\ntm_defines if pthreads are enabled.\n* config/netbsd.h (LIB_SPEC): Only support the -pthread option\nif NETBSD_ENABLE_PTHREADS is defined.\n\nFrom-SVN: r58599", "tree": {"sha": "f36c06fc63e7b0228451b0448472fe8ba69bb015", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f36c06fc63e7b0228451b0448472fe8ba69bb015"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee3c755a456f622ae2688dd8820a53ce3c6912a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee3c755a456f622ae2688dd8820a53ce3c6912a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee3c755a456f622ae2688dd8820a53ce3c6912a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee3c755a456f622ae2688dd8820a53ce3c6912a5/comments", "author": null, "committer": null, "parents": [{"sha": "c6362f4ff9a00e9bc69db6d8b7ae26498471a19f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6362f4ff9a00e9bc69db6d8b7ae26498471a19f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6362f4ff9a00e9bc69db6d8b7ae26498471a19f"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "51d7e31aa5e478a556d6b484c0241923c59c2b9b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3c755a456f622ae2688dd8820a53ce3c6912a5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3c755a456f622ae2688dd8820a53ce3c6912a5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ee3c755a456f622ae2688dd8820a53ce3c6912a5", "patch": "@@ -1,3 +1,10 @@\n+2002-10-28  Jason Thorpe  <thorpej@wasabisystems.com>\n+\n+\t* config.gcc (*-*-netbsd*): Add NETBSD_ENABLE_PTHREADS to\n+\ttm_defines if pthreads are enabled.\n+\t* config/netbsd.h (LIB_SPEC): Only support the -pthread option\n+\tif NETBSD_ENABLE_PTHREADS is defined.\n+\n 2002-10-28  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* ChangeLog.1: Fix typos."}, {"sha": "973a848ffd09581e862b759c5a3f88b74b97bc4b", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3c755a456f622ae2688dd8820a53ce3c6912a5/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3c755a456f622ae2688dd8820a53ce3c6912a5/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=ee3c755a456f622ae2688dd8820a53ce3c6912a5", "patch": "@@ -367,6 +367,7 @@ case $machine in\n \tcase x${enable_threads} in\n \txyes | xposix)\n \t\tthread_file='posix'\n+\t\ttm_defines=\"${tm_defines} NETBSD_ENABLE_PTHREADS\"\n \t\t;;\n \tesac\n \t;;"}, {"sha": "f1f3589f48b804171d15bef87143db1aa48992c5", "filename": "gcc/config/netbsd.h", "status": "modified", "additions": 21, "deletions": 2, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3c755a456f622ae2688dd8820a53ce3c6912a5/gcc%2Fconfig%2Fnetbsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3c755a456f622ae2688dd8820a53ce3c6912a5/gcc%2Fconfig%2Fnetbsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnetbsd.h?ref=ee3c755a456f622ae2688dd8820a53ce3c6912a5", "patch": "@@ -82,11 +82,16 @@ Boston, MA 02111-1307, USA.  */\n    1. Select the appropriate set of libs, depending on whether we're\n       profiling.\n \n-   2. Include the pthread library if -pthread is specified.\n+   2. Include the pthread library if -pthread is specified (only\n+      if threads are enabled).\n \n-   3. Include the posix library if -posix is specified.  */\n+   3. Include the posix library if -posix is specified.\n+\n+   FIXME: Could eliminate the duplication here if we were allowed to\n+   use string concatenation.  */\n \n #undef LIB_SPEC\n+#ifdef NETBSD_ENABLE_PTHREADS\n #define LIB_SPEC\t\t\\\n   \"%{pthread:\t\t\t\\\n      %{!p:\t\t\t\\\n@@ -104,6 +109,20 @@ Boston, MA 02111-1307, USA.  */\n \t %{!pg:-lc}}\t\t\\\n        %{p:-lc_p}\t\t\\\n        %{pg:-lc_p}}}\"\n+#else\n+#define LIB_SPEC\t\t\\\n+  \"%{posix:\t\t\t\\\n+     %{!p:\t\t\t\\\n+       %{!pg:-lposix}}\t\t\\\n+     %{p:-lposix_p}\t\t\\\n+     %{pg:-lposix_p}}\t\t\\\n+   %{!shared:\t\t\t\\\n+     %{!symbolic:\t\t\\\n+       %{!p:\t\t\t\\\n+\t %{!pg:-lc}}\t\t\\\n+       %{p:-lc_p}\t\t\\\n+       %{pg:-lc_p}}}\"\n+#endif\n \n /* Provide a LIBGCC_SPEC appropriate for NetBSD.  We also want to exclude\n    libgcc with -symbolic.  */"}]}