{"sha": "2bd1d2c8d2d026168111295dc53d604856b74deb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmJkMWQyYzhkMmQwMjYxNjgxMTEyOTVkYzUzZDYwNDg1NmI3NGRlYg==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2009-10-05T17:46:35Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2009-10-05T17:46:35Z"}, "message": "re PR tree-optimization/40992 (cunroll ignoring asm size)\n\n2009-10-05  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR tree-opt/40992\n        * final.c (asm_str_count): Split out from asm_insn_count.\n        * rtl.h (asm_str_count): New prototype.\n        * tree-inline (estimate_num_insns) <case GIMPLE_ASM>: Call\n        asm_str_count.\n\nFrom-SVN: r152458", "tree": {"sha": "76d28ac5e1fa941648deb5fd3f3b91d9ea13d6ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76d28ac5e1fa941648deb5fd3f3b91d9ea13d6ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2bd1d2c8d2d026168111295dc53d604856b74deb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bd1d2c8d2d026168111295dc53d604856b74deb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2bd1d2c8d2d026168111295dc53d604856b74deb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bd1d2c8d2d026168111295dc53d604856b74deb/comments", "author": null, "committer": null, "parents": [{"sha": "4cdc876153cc0ddcda76174f868e1722f389be04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cdc876153cc0ddcda76174f868e1722f389be04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4cdc876153cc0ddcda76174f868e1722f389be04"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "096db82cebc6c3ad1958ac2fa55062022a0aa38b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bd1d2c8d2d026168111295dc53d604856b74deb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bd1d2c8d2d026168111295dc53d604856b74deb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2bd1d2c8d2d026168111295dc53d604856b74deb", "patch": "@@ -1,3 +1,11 @@\n+2009-10-05  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR tree-opt/40992\n+\t* final.c (asm_str_count): Split out from asm_insn_count.\n+\t* rtl.h (asm_str_count): New prototype.\n+\t* tree-inline (estimate_num_insns) <case GIMPLE_ASM>: Call\n+\tasm_str_count.\n+\n 2009-10-05  Sriraman Tallam  <tmsriram@google.com>\n \n \t* doc/plugins.texi: Change plugin_pass to register_pass_info."}, {"sha": "f121da1b5cd4dbc06eb1cd2538b71e68ee4e6f7f", "filename": "gcc/final.c", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bd1d2c8d2d026168111295dc53d604856b74deb/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bd1d2c8d2d026168111295dc53d604856b74deb/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=2bd1d2c8d2d026168111295dc53d604856b74deb", "patch": "@@ -1399,13 +1399,23 @@ static int\n asm_insn_count (rtx body)\n {\n   const char *templ;\n-  int count = 1;\n \n   if (GET_CODE (body) == ASM_INPUT)\n     templ = XSTR (body, 0);\n   else\n     templ = decode_asm_operands (body, NULL, NULL, NULL, NULL, NULL);\n \n+  return asm_str_count (templ);\n+}\n+#endif\n+\n+/* Return the number of machine instructions likely to be generated for the\n+   inline-asm template. */\n+int\n+asm_str_count (const char *templ)\n+{\n+  int count = 1;\n+  \n   if (!*templ)\n     return 0;\n \n@@ -1416,7 +1426,6 @@ asm_insn_count (rtx body)\n \n   return count;\n }\n-#endif\n \f\n /* ??? This is probably the wrong place for these.  */\n /* Structure recording the mapping from source file and directory"}, {"sha": "a7be009b619e7a3ccc382c2d481d3609129e143f", "filename": "gcc/rtl.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bd1d2c8d2d026168111295dc53d604856b74deb/gcc%2Frtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bd1d2c8d2d026168111295dc53d604856b74deb/gcc%2Frtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtl.h?ref=2bd1d2c8d2d026168111295dc53d604856b74deb", "patch": "@@ -2424,6 +2424,7 @@ extern void simplify_using_condition (rtx, rtx *, struct bitmap_head_def *);\n \n /* In final.c  */\n extern unsigned int compute_alignments (void);\n+extern int asm_str_count (const char *templ);\n \f\n struct rtl_hooks\n {"}, {"sha": "91ed023312a123d3aea67377aa1a3e1dfb397134", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bd1d2c8d2d026168111295dc53d604856b74deb/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bd1d2c8d2d026168111295dc53d604856b74deb/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=2bd1d2c8d2d026168111295dc53d604856b74deb", "patch": "@@ -3346,7 +3346,7 @@ estimate_num_insns (gimple stmt, eni_weights *weights)\n       return 0;\n \n     case GIMPLE_ASM:\n-      return 1;\n+      return asm_str_count (gimple_asm_string (stmt));\n \n     case GIMPLE_RESX:\n       /* This is either going to be an external function call with one"}]}