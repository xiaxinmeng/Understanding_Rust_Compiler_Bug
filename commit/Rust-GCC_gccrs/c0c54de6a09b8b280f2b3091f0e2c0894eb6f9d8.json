{"sha": "c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzBjNTRkZTZhMDliOGIyODBmMmIzMDkxZjBlMmMwODk0ZWI2ZjlkOA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2016-11-13T18:20:25Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2016-11-13T18:20:25Z"}, "message": "decl.c (annotate_value): Deal specially with negative constants.\n\n\t* gcc-interface/decl.c (annotate_value) <INTEGER_CST>: Deal specially\n\twith negative constants.\n\nFrom-SVN: r242360", "tree": {"sha": "b54385029fbc200a70eed0721cc800d5ee426c1d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b54385029fbc200a70eed0721cc800d5ee426c1d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8/comments", "author": null, "committer": null, "parents": [{"sha": "96826e28ef9a627b82f1d7ccda0906f20dfe96d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96826e28ef9a627b82f1d7ccda0906f20dfe96d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96826e28ef9a627b82f1d7ccda0906f20dfe96d5"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "b3ac97c67c880096b81ea4afb9318b360d4ba269", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8", "patch": "@@ -1,3 +1,8 @@\n+2016-11-13  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/decl.c (annotate_value) <INTEGER_CST>: Deal specially\n+\twith negative constants.\n+\n 2016-11-13  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/utils2.c (gnat_protect_expr): Also protect only the"}, {"sha": "b6fce3ecf351c5ce29c37fe9994bf6f905e23fb2", "filename": "gcc/ada/gcc-interface/decl.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.c?ref=c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8", "patch": "@@ -8022,6 +8022,14 @@ annotate_value (tree gnu_size)\n   switch (TREE_CODE (gnu_size))\n     {\n     case INTEGER_CST:\n+      /* For negative values, build NEGATE_EXPR of the opposite.  Such values\n+\t can appear for discriminants in expressions for variants.  */\n+      if (tree_int_cst_sgn (gnu_size) < 0)\n+\t{\n+\t  tree t = wide_int_to_tree (sizetype, wi::neg (gnu_size));\n+\t  return annotate_value (build1 (NEGATE_EXPR, sizetype, t));\n+\t}\n+\n       return TREE_OVERFLOW (gnu_size) ? No_Uint : UI_From_gnu (gnu_size);\n \n     case COMPONENT_REF:"}]}