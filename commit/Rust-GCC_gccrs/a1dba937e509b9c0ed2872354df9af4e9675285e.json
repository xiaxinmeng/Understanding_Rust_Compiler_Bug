{"sha": "a1dba937e509b9c0ed2872354df9af4e9675285e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTFkYmE5MzdlNTA5YjljMGVkMjg3MjM1NGRmOWFmNGU5Njc1Mjg1ZQ==", "commit": {"author": {"name": "Steve Chamberlain", "email": "sac@gnu.org", "date": "1994-09-09T23:40:17Z"}, "committer": {"name": "Steve Chamberlain", "email": "sac@gnu.org", "date": "1994-09-09T23:40:17Z"}, "message": "Initial revision\n\nFrom-SVN: r8063", "tree": {"sha": "f8371f506c5bda4e5a35f570555114468d7b6774", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f8371f506c5bda4e5a35f570555114468d7b6774"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a1dba937e509b9c0ed2872354df9af4e9675285e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1dba937e509b9c0ed2872354df9af4e9675285e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1dba937e509b9c0ed2872354df9af4e9675285e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1dba937e509b9c0ed2872354df9af4e9675285e/comments", "author": null, "committer": null, "parents": [{"sha": "516422ef0ce1bc2e24aa4f6570349b6b6a1f8ddd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/516422ef0ce1bc2e24aa4f6570349b6b6a1f8ddd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/516422ef0ce1bc2e24aa4f6570349b6b6a1f8ddd"}], "stats": {"total": 483, "additions": 483, "deletions": 0}, "files": [{"sha": "7eebb69cd21d39abc3c98f3feaaba16a470d09e1", "filename": "gcc/config/sh/lib1funcs.asm", "status": "added", "additions": 483, "deletions": 0, "changes": 483, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1dba937e509b9c0ed2872354df9af4e9675285e/gcc%2Fconfig%2Fsh%2Flib1funcs.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1dba937e509b9c0ed2872354df9af4e9675285e/gcc%2Fconfig%2Fsh%2Flib1funcs.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Flib1funcs.asm?ref=a1dba937e509b9c0ed2872354df9af4e9675285e", "patch": "@@ -0,0 +1,483 @@\n+/* Copyright (C) 1994 Free Software Foundation, Inc.\n+\n+This file is free software; you can redistribute it and/or modify it\n+under the terms of the GNU General Public License as published by the\n+Free Software Foundation; either version 2, or (at your option) any\n+later version.\n+\n+In addition to the permissions in the GNU General Public License, the\n+Free Software Foundation gives you unlimited permission to link the\n+compiled version of this file with other programs, and to distribute\n+those programs without any restriction coming from the use of this\n+file.  (The General Public License restrictions do apply in other\n+respects; for example, they cover modification of the file, and\n+distribution when not linked into another program.)\n+\n+This file is distributed in the hope that it will be useful, but\n+WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with this program; see the file COPYING.  If not, write to\n+the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n+\n+/* As a special exception, if you link this library with other files,\n+   some of which are compiled with GCC, to produce an executable,\n+   this library does not by itself cause the resulting executable\n+   to be covered by the GNU General Public License.\n+   This exception does not however invalidate any other reasons why\n+   the executable file might be covered by the GNU General Public License.  */\n+\n+\n+!! libgcc1 routines for the Hitachi SH cpu.\n+!! Contributed by Steve Chamberlain.\n+!! sac@cygnus.com\n+\n+\n+#ifdef L_ashiftrt\n+\t.global\t___ashiftrt_r4_0\n+\t.global\t___ashiftrt_r4_1\n+\t.global\t___ashiftrt_r4_2\n+\t.global\t___ashiftrt_r4_3\n+\t.global\t___ashiftrt_r4_4\n+\t.global\t___ashiftrt_r4_5\n+\t.global\t___ashiftrt_r4_6\n+\t.global\t___ashiftrt_r4_7\n+\t.global\t___ashiftrt_r4_8\n+\t.global\t___ashiftrt_r4_9\n+\t.global\t___ashiftrt_r4_10\n+\t.global\t___ashiftrt_r4_11\n+\t.global\t___ashiftrt_r4_12\n+\t.global\t___ashiftrt_r4_13\n+\t.global\t___ashiftrt_r4_14\n+\t.global\t___ashiftrt_r4_15\n+\t.global\t___ashiftrt_r4_16\n+\t.global\t___ashiftrt_r4_17\n+\t.global\t___ashiftrt_r4_18\n+\t.global\t___ashiftrt_r4_19\n+\t.global\t___ashiftrt_r4_20\n+\t.global\t___ashiftrt_r4_21\n+\t.global\t___ashiftrt_r4_22\n+\t.global\t___ashiftrt_r4_23\n+\t.global\t___ashiftrt_r4_24\n+\t.global\t___ashiftrt_r4_25\n+\t.global\t___ashiftrt_r4_26\n+\t.global\t___ashiftrt_r4_27\n+\t.global\t___ashiftrt_r4_28\n+\t.global\t___ashiftrt_r4_29\n+\t.global\t___ashiftrt_r4_30\n+\t.global\t___ashiftrt_r4_31\n+\t.global\t___ashiftrt_r4_32\n+\n+___ashiftrt_r4_32:\n+\tshar\tr4\n+___ashiftrt_r4_31:\n+\tshar\tr4\n+___ashiftrt_r4_30:\n+\tshar\tr4\n+___ashiftrt_r4_29:\n+\tshar\tr4\n+___ashiftrt_r4_28:\n+\tshar\tr4\n+___ashiftrt_r4_27:\n+\tshar\tr4\n+___ashiftrt_r4_26:\n+\tshar\tr4\n+___ashiftrt_r4_25:\n+\tshar\tr4\n+___ashiftrt_r4_24:\n+\tshar\tr4\n+___ashiftrt_r4_23:\n+\tshar\tr4\n+___ashiftrt_r4_22:\n+\tshar\tr4\n+___ashiftrt_r4_21:\n+\tshar\tr4\n+___ashiftrt_r4_20:\n+\tshar\tr4\n+___ashiftrt_r4_19:\n+\tshar\tr4\n+___ashiftrt_r4_18:\n+\tshar\tr4\n+___ashiftrt_r4_17:\n+\tshar\tr4\n+___ashiftrt_r4_16:\n+\tshar\tr4\n+___ashiftrt_r4_15:\n+\tshar\tr4\n+___ashiftrt_r4_14:\n+\tshar\tr4\n+___ashiftrt_r4_13:\n+\tshar\tr4\n+___ashiftrt_r4_12:\n+\tshar\tr4\n+___ashiftrt_r4_11:\n+\tshar\tr4\n+___ashiftrt_r4_10:\n+\tshar\tr4\n+___ashiftrt_r4_9:\n+\tshar\tr4\n+___ashiftrt_r4_8:\n+\tshar\tr4\n+___ashiftrt_r4_7:\n+\tshar\tr4\n+___ashiftrt_r4_6:\n+\tshar\tr4\n+___ashiftrt_r4_5:\n+\tshar\tr4\n+___ashiftrt_r4_4:\n+\tshar\tr4\n+___ashiftrt_r4_3:\n+\tshar\tr4\n+___ashiftrt_r4_2:\n+\tshar\tr4\n+___ashiftrt_r4_1:\n+\trts\n+\tshar\tr4\n+\n+___ashiftrt_r4_0:\n+\tor\tr0,r0\n+\trts\n+#endif\n+\n+#ifdef L_movstr\n+\t.text\n+! done all the large groups, do the remainder\n+\n+! jump to movstr+\n+done:\n+\tadd\t#64,r5\n+\tmova\t___movstrSI0,r0\n+\tshll2\tr6\n+\tadd\tr6,r0\n+\tjmp\t@r0\n+\tadd\t#64,r4\t\n+\t.align\t4\n+\t.global\t___movstrSI64\n+___movstrSI64:\n+\tmov.l\t@(60,r5),r0\n+\tmov.l\tr0,@(60,r4)\n+\t.global\t___movstrSI60\n+___movstrSI60:\n+\tmov.l\t@(56,r5),r0\n+\tmov.l\tr0,@(56,r4)\n+\t.global\t___movstrSI56\n+___movstrSI56:\n+\tmov.l\t@(52,r5),r0\n+\tmov.l\tr0,@(52,r4)\n+\t.global\t___movstrSI52\n+___movstrSI52:\n+\tmov.l\t@(48,r5),r0\n+\tmov.l\tr0,@(48,r4)\n+\t.global\t___movstrSI48\n+___movstrSI48:\n+\tmov.l\t@(44,r5),r0\n+\tmov.l\tr0,@(44,r4)\n+\t.global\t___movstrSI44\n+___movstrSI44:\n+\tmov.l\t@(40,r5),r0\n+\tmov.l\tr0,@(40,r4)\n+\t.global\t___movstrSI40\n+___movstrSI40:\n+\tmov.l\t@(36,r5),r0\n+\tmov.l\tr0,@(36,r4)\n+\t.global\t___movstrSI36\n+___movstrSI36:\n+\tmov.l\t@(32,r5),r0\n+\tmov.l\tr0,@(32,r4)\n+\t.global\t___movstrSI32\n+___movstrSI32:\n+\tmov.l\t@(28,r5),r0\n+\tmov.l\tr0,@(28,r4)\n+\t.global\t___movstrSI28\n+___movstrSI28:\n+\tmov.l\t@(24,r5),r0\n+\tmov.l\tr0,@(24,r4)\n+\t.global\t___movstrSI24\n+___movstrSI24:\n+\tmov.l\t@(20,r5),r0\n+\tmov.l\tr0,@(20,r4)\n+\t.global\t___movstrSI20\n+___movstrSI20:\n+\tmov.l\t@(16,r5),r0\n+\tmov.l\tr0,@(16,r4)\n+\t.global\t___movstrSI16\n+___movstrSI16:\n+\tmov.l\t@(12,r5),r0\n+\tmov.l\tr0,@(12,r4)\n+\t.global\t___movstrSI12\n+___movstrSI12:\n+\tmov.l\t@(8,r5),r0\n+\tmov.l\tr0,@(8,r4)\n+\t.global\t___movstrSI8\n+___movstrSI8:\n+\tmov.l\t@(4,r5),r0\n+\tmov.l\tr0,@(4,r4)\n+\t.global\t___movstrSI4\n+___movstrSI4:\n+\tmov.l\t@(0,r5),r0\n+\tmov.l\tr0,@(0,r4)\n+___movstrSI0:\n+\trts\n+\tor\tr0,r0,r0\n+\n+\t.align\t4\n+\n+\t.global\t___movstr\n+___movstr:\n+\tmov.l\t@(60,r5),r0\n+\tmov.l\tr0,@(60,r4)\n+\n+\tmov.l\t@(56,r5),r0\n+\tmov.l\tr0,@(56,r4)\n+\n+\tmov.l\t@(52,r5),r0\n+\tmov.l\tr0,@(52,r4)\n+\n+\tmov.l\t@(48,r5),r0\n+\tmov.l\tr0,@(48,r4)\n+\n+\tmov.l\t@(44,r5),r0\n+\tmov.l\tr0,@(44,r4)\n+\n+\tmov.l\t@(40,r5),r0\n+\tmov.l\tr0,@(40,r4)\n+\n+\tmov.l\t@(36,r5),r0\n+\tmov.l\tr0,@(36,r4)\n+\n+\tmov.l\t@(32,r5),r0\n+\tmov.l\tr0,@(32,r4)\n+\n+\tmov.l\t@(28,r5),r0\n+\tmov.l\tr0,@(28,r4)\n+\n+\tmov.l\t@(24,r5),r0\n+\tmov.l\tr0,@(24,r4)\n+\n+\tmov.l\t@(20,r5),r0\n+\tmov.l\tr0,@(20,r4)\n+\n+\tmov.l\t@(16,r5),r0\n+\tmov.l\tr0,@(16,r4)\n+\n+\tmov.l\t@(12,r5),r0\n+\tmov.l\tr0,@(12,r4)\n+\n+\tmov.l\t@(8,r5),r0\n+\tmov.l\tr0,@(8,r4)\n+\n+\tmov.l\t@(4,r5),r0\n+\tmov.l\tr0,@(4,r4)\n+\n+\tmov.l\t@(0,r5),r0\n+\tmov.l\tr0,@(0,r4)\n+\n+\tadd\t#-16,r6\n+\tcmp/pl\tr6\n+\tbf\tdone\n+\n+\tadd\t#64,r5\n+\tbra\t___movstr\n+\tadd\t#64,r4\n+#endif\n+\n+#ifdef L_mulsi3\n+\n+\n+\t.global\t___mulsi3\n+\n+! r4 =       aabb\n+! r5 =       ccdd\n+! r0 = aabb*ccdd  via partial products\n+!\n+! if aa == 0 and cc = 0\n+! r0 = bb*dd\n+!\n+! else\n+! aa = bb*dd + (aa*dd*65536) + (cc*bb*65536)\n+!\n+\n+___mulsi3:\n+\tmulu    r4,r5\t\t! multiply the lsws  macl=bb*dd\n+\tmov     r5,r3\t\t! r3 = ccdd\n+\tswap.w  r4,r2\t\t! r2 = bbaa\n+\txtrct   r2,r3\t\t! r3 = aacc\n+\ttst  \tr3,r3\t\t! msws zero ?\n+\tbf      hiset\t\t\n+\trts\t\t\t! yes - then weve got the answer\n+\tsts     macl,r0\n+\n+hiset:\tsts\tmacl,r0\t\t! r0 = bb*dd\n+\tmulu\tr2,r5\t\t| brewing macl = aa*dd\n+\tsts\tmacl,r1\n+\tmulu\tr3,r4\t\t| brewing macl = cc*bb\n+\tsts\tmacl,r2\t\t\n+\tadd\tr1,r2\n+\tshll16\tr2\n+\trts\n+\tadd\tr2,r0\n+\t\n+\t\n+#endif\t\n+#ifdef L_sdivsi3\n+\t.title \"SH DIVIDE\"\n+!! 4 byte integer Divide code for the Hitachi SH\n+!!\n+!! Steve Chamberlain\n+!! sac@cygnus.com\n+!!\n+!!\n+\n+!! args in r4 and r5, result in r0 clobber r1,r2,r3\n+\n+\t.global\t___sdivsi3\n+___sdivsi3:\n+\tmov\tr4,r1\n+\tmov\tr5,r0\n+\t\n+\ttst\tr0,r0\n+\tbt\tdiv0\n+\tmov\t#0,r2\n+\tdiv0s\tr2,r1\n+\tsubc\tr3,r3\n+\tsubc\tr2,r1\n+\tdiv0s\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\tdiv1\tr0,r3\n+\trotcl\tr1\n+\taddc\tr2,r1\n+\trts\t\n+\tmov\tr1,r0\n+\n+\t\n+div0:\trts\n+\tmov\t#0,r0\n+\n+#endif\n+#ifdef L_udivsi3\n+\n+\t.title \"SH DIVIDE\"\n+!! 4 byte integer Divide code for the Hitachi SH\n+!!\n+!! Steve Chamberlain\n+!! sac@cygnus.com\n+!!\n+!! \n+\n+!! args in r4 and r5, result in r0, clobbers r4,r6, pr and t bit\n+\t.global\t___udivsi3\n+\n+___udivsi3:\n+longway:\n+\tmov\t#0,r0\n+\tdiv0u\t\t\n+\t! get one bit from the msb of the numerator into the T \n+\t! bit and divide it by whats in r5.  Put the answer bit\n+\t! into the T bit so it can come out again at the bottom\n+\n+\trotcl\tr4 ; div1 r5,r0\t\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+shortway:\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\n+vshortway:\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 ; div1 r5,r0\n+\trotcl\tr4 \t\n+ret:\trts\n+\tmov\tr4,r0\n+\n+#endif\n+"}]}