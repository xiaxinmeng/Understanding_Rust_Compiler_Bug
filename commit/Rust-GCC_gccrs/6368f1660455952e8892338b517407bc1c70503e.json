{"sha": "6368f1660455952e8892338b517407bc1c70503e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjM2OGYxNjYwNDU1OTUyZTg4OTIzMzhiNTE3NDA3YmMxYzcwNTAzZQ==", "commit": {"author": {"name": "Daniel Franke", "email": "franke.daniel@gmail.com", "date": "2010-07-13T13:20:52Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2010-07-13T13:20:52Z"}, "message": "re PR fortran/43665 (INTENT(IN) etc. optimization of calls: function annotations for noclobber/noescape arguments)\n\n2010-07-13  Daniel Franke  <franke.daniel@gmail.com>\n            Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/43665\n        * trans-decl.c (gfc_build_intrinsic_function_decls): Add\n        noclobber/noescape annotations to function calls.\n        (gfc_build_builtin_function_decls): Likewise.\n\n\nCo-Authored-By: Tobias Burnus <burnus@net-b.de>\n\nFrom-SVN: r162140", "tree": {"sha": "e7d93b59e7d242387554b7a325d9caeefc2b6ce2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7d93b59e7d242387554b7a325d9caeefc2b6ce2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6368f1660455952e8892338b517407bc1c70503e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6368f1660455952e8892338b517407bc1c70503e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6368f1660455952e8892338b517407bc1c70503e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6368f1660455952e8892338b517407bc1c70503e/comments", "author": {"login": "dfranke76", "id": 15729164, "node_id": "MDQ6VXNlcjE1NzI5MTY0", "avatar_url": "https://avatars.githubusercontent.com/u/15729164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dfranke76", "html_url": "https://github.com/dfranke76", "followers_url": "https://api.github.com/users/dfranke76/followers", "following_url": "https://api.github.com/users/dfranke76/following{/other_user}", "gists_url": "https://api.github.com/users/dfranke76/gists{/gist_id}", "starred_url": "https://api.github.com/users/dfranke76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dfranke76/subscriptions", "organizations_url": "https://api.github.com/users/dfranke76/orgs", "repos_url": "https://api.github.com/users/dfranke76/repos", "events_url": "https://api.github.com/users/dfranke76/events{/privacy}", "received_events_url": "https://api.github.com/users/dfranke76/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "135d47df2157e1f04f519f18e893b4fb68e3d341", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/135d47df2157e1f04f519f18e893b4fb68e3d341", "html_url": "https://github.com/Rust-GCC/gccrs/commit/135d47df2157e1f04f519f18e893b4fb68e3d341"}], "stats": {"total": 557, "additions": 248, "deletions": 309}, "files": [{"sha": "c0d6361c6d5c2a170d2e3b042a754b4a149ff774", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6368f1660455952e8892338b517407bc1c70503e/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6368f1660455952e8892338b517407bc1c70503e/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=6368f1660455952e8892338b517407bc1c70503e", "patch": "@@ -1,3 +1,11 @@\n+2010-07-13  Daniel Franke  <franke.daniel@gmail.com>\n+\t    Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/43665\n+\t* trans-decl.c (gfc_build_intrinsic_function_decls): Add\n+\tnoclobber/noescape annotations to function calls.\n+\t(gfc_build_builtin_function_decls): Likewise.\n+\n 2010-07-13  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/44434"}, {"sha": "0473d4c01ca80d3cf29a772e45128235e8727f7e", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 240, "deletions": 309, "changes": 549, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6368f1660455952e8892338b517407bc1c70503e/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6368f1660455952e8892338b517407bc1c70503e/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=6368f1660455952e8892338b517407bc1c70503e", "patch": "@@ -2411,212 +2411,161 @@ gfc_build_intrinsic_function_decls (void)\n   tree pchar4_type_node = gfc_get_pchar_type (4);\n \n   /* String functions.  */\n-  gfor_fndecl_compare_string =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"compare_string\")),\n-\t\t\t\t     integer_type_node, 4,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node);\n-\n-  gfor_fndecl_concat_string =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"concat_string\")),\n-\t\t\t\t     void_type_node, 6,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node);\n-\n-  gfor_fndecl_string_len_trim =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"string_len_trim\")),\n-\t\t\t\t     gfc_charlen_type_node, 2,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node);\n-\n-  gfor_fndecl_string_index =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"string_index\")),\n-\t\t\t\t     gfc_charlen_type_node, 5,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node,\n-\t\t\t\t     gfc_logical4_type_node);\n-\n-  gfor_fndecl_string_scan =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"string_scan\")),\n-\t\t\t\t     gfc_charlen_type_node, 5,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node,\n-\t\t\t\t     gfc_logical4_type_node);\n-\n-  gfor_fndecl_string_verify =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"string_verify\")),\n-\t\t\t\t     gfc_charlen_type_node, 5,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node,\n-\t\t\t\t     gfc_logical4_type_node);\n-\n-  gfor_fndecl_string_trim =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"string_trim\")),\n-\t\t\t\t     void_type_node, 4,\n-\t\t\t\t     build_pointer_type (gfc_charlen_type_node),\n-\t\t\t\t     build_pointer_type (pchar1_type_node),\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node);\n-\n-  gfor_fndecl_string_minmax = \n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"string_minmax\")),\n-\t\t\t\t     void_type_node, -4,\n-\t\t\t\t     build_pointer_type (gfc_charlen_type_node),\n-\t\t\t\t     build_pointer_type (pchar1_type_node),\n-\t\t\t\t     integer_type_node, integer_type_node);\n-\n-  gfor_fndecl_adjustl =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"adjustl\")),\n-\t\t\t\t     void_type_node, 3, pchar1_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node);\n-\n-  gfor_fndecl_adjustr =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"adjustr\")),\n-\t\t\t\t     void_type_node, 3, pchar1_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node);\n-\n-  gfor_fndecl_select_string =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"select_string\")),\n-\t\t\t\t     integer_type_node, 4, pvoid_type_node,\n-\t\t\t\t     integer_type_node, pchar1_type_node,\n-\t\t\t\t     gfc_charlen_type_node);\n-\n-  gfor_fndecl_compare_string_char4 =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"compare_string_char4\")),\n-\t\t\t\t     integer_type_node, 4,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node);\n-\n-  gfor_fndecl_concat_string_char4 =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"concat_string_char4\")),\n-\t\t\t\t     void_type_node, 6,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node);\n-\n-  gfor_fndecl_string_len_trim_char4 =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"string_len_trim_char4\")),\n-\t\t\t\t     gfc_charlen_type_node, 2,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node);\n-\n-  gfor_fndecl_string_index_char4 =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"string_index_char4\")),\n-\t\t\t\t     gfc_charlen_type_node, 5,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node,\n-\t\t\t\t     gfc_logical4_type_node);\n-\n-  gfor_fndecl_string_scan_char4 =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"string_scan_char4\")),\n-\t\t\t\t     gfc_charlen_type_node, 5,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node,\n-\t\t\t\t     gfc_logical4_type_node);\n-\n-  gfor_fndecl_string_verify_char4 =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"string_verify_char4\")),\n-\t\t\t\t     gfc_charlen_type_node, 5,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node,\n-\t\t\t\t     gfc_logical4_type_node);\n-\n-  gfor_fndecl_string_trim_char4 =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"string_trim_char4\")),\n-\t\t\t\t     void_type_node, 4,\n-\t\t\t\t     build_pointer_type (gfc_charlen_type_node),\n-\t\t\t\t     build_pointer_type (pchar4_type_node),\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node);\n-\n-  gfor_fndecl_string_minmax_char4 =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"string_minmax_char4\")),\n-\t\t\t\t     void_type_node, -4,\n-\t\t\t\t     build_pointer_type (gfc_charlen_type_node),\n-\t\t\t\t     build_pointer_type (pchar4_type_node),\n-\t\t\t\t     integer_type_node, integer_type_node);\n-\n-  gfor_fndecl_adjustl_char4 =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"adjustl_char4\")),\n-\t\t\t\t     void_type_node, 3, pchar4_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node);\n-\n-  gfor_fndecl_adjustr_char4 =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"adjustr_char4\")),\n-\t\t\t\t     void_type_node, 3, pchar4_type_node,\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node);\n-\n-  gfor_fndecl_select_string_char4 =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"select_string_char4\")),\n-\t\t\t\t     integer_type_node, 4, pvoid_type_node,\n-\t\t\t\t     integer_type_node, pvoid_type_node,\n-\t\t\t\t     gfc_charlen_type_node);\n+  gfor_fndecl_compare_string = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"compare_string\")), \"..R.R\",\n+\tinteger_type_node, 4, gfc_charlen_type_node, pchar1_type_node,\n+\tgfc_charlen_type_node, pchar1_type_node);\n+\n+  gfor_fndecl_concat_string = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"concat_string\")), \"..W.R.R\",\n+\tvoid_type_node, 6, gfc_charlen_type_node, pchar1_type_node,\n+\tgfc_charlen_type_node, pchar1_type_node,\n+\tgfc_charlen_type_node, pchar1_type_node);\n+\n+  gfor_fndecl_string_len_trim = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_len_trim\")), \"..R\",\n+\tgfc_charlen_type_node, 2, gfc_charlen_type_node, pchar1_type_node);\n+\n+  gfor_fndecl_string_index = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_index\")), \"..R.R.\",\n+\tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar1_type_node,\n+\tgfc_charlen_type_node, pchar1_type_node, gfc_logical4_type_node);\n+\n+  gfor_fndecl_string_scan = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_scan\")), \"..R.R.\",\n+\tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar1_type_node,\n+\tgfc_charlen_type_node, pchar1_type_node, gfc_logical4_type_node);\n+\n+  gfor_fndecl_string_verify = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_verify\")), \"..R.R.\",\n+\tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar1_type_node,\n+\tgfc_charlen_type_node, pchar1_type_node, gfc_logical4_type_node);\n+\n+  gfor_fndecl_string_trim = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_trim\")), \".Ww.R\",\n+\tvoid_type_node, 4, build_pointer_type (gfc_charlen_type_node),\n+\tbuild_pointer_type (pchar1_type_node), gfc_charlen_type_node,\n+\tpchar1_type_node);\n+\n+  gfor_fndecl_string_minmax = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_minmax\")), \".Ww.R\",\n+\tvoid_type_node, -4, build_pointer_type (gfc_charlen_type_node),\n+\tbuild_pointer_type (pchar1_type_node), integer_type_node,\n+\tinteger_type_node);\n+\n+  gfor_fndecl_adjustl = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"adjustl\")), \".W.R\",\n+\tvoid_type_node, 3, pchar1_type_node, gfc_charlen_type_node,\n+\tpchar1_type_node);\n+\n+  gfor_fndecl_adjustr = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"adjustr\")), \".W.R\",\n+\tvoid_type_node, 3, pchar1_type_node, gfc_charlen_type_node,\n+\tpchar1_type_node);\n+\n+  gfor_fndecl_select_string =  gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"select_string\")), \".R.R.\",\n+\tinteger_type_node, 4, pvoid_type_node, integer_type_node,\n+\tpchar1_type_node, gfc_charlen_type_node);\n+\n+  gfor_fndecl_compare_string_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"compare_string_char4\")), \"..R.R\",\n+\tinteger_type_node, 4, gfc_charlen_type_node, pchar4_type_node,\n+\tgfc_charlen_type_node, pchar4_type_node);\n+\n+  gfor_fndecl_concat_string_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"concat_string_char4\")), \"..W.R.R\",\n+\tvoid_type_node, 6, gfc_charlen_type_node, pchar4_type_node,\n+\tgfc_charlen_type_node, pchar4_type_node, gfc_charlen_type_node,\n+\tpchar4_type_node);\n+\n+  gfor_fndecl_string_len_trim_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_len_trim_char4\")), \"..R\",\n+\tgfc_charlen_type_node, 2, gfc_charlen_type_node, pchar4_type_node);\n+\n+  gfor_fndecl_string_index_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_index_char4\")), \"..R.R.\",\n+\tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar4_type_node,\n+\tgfc_charlen_type_node, pchar4_type_node, gfc_logical4_type_node);\n+\n+  gfor_fndecl_string_scan_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_scan_char4\")), \"..R.R.\",\n+\tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar4_type_node,\n+\tgfc_charlen_type_node, pchar4_type_node, gfc_logical4_type_node);\n+\n+  gfor_fndecl_string_verify_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_verify_char4\")), \"..R.R.\",\n+\tgfc_charlen_type_node, 5, gfc_charlen_type_node, pchar4_type_node,\n+\tgfc_charlen_type_node, pchar4_type_node, gfc_logical4_type_node);\n+\n+  gfor_fndecl_string_trim_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_trim_char4\")), \".Ww.R\",\n+\tvoid_type_node, 4, build_pointer_type (gfc_charlen_type_node),\n+\tbuild_pointer_type (pchar4_type_node), gfc_charlen_type_node,\n+\tpchar4_type_node);\n+\n+  gfor_fndecl_string_minmax_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"string_minmax_char4\")), \".Ww.R\",\n+\tvoid_type_node, -4, build_pointer_type (gfc_charlen_type_node),\n+\tbuild_pointer_type (pchar4_type_node), integer_type_node,\n+\tinteger_type_node);\n+\n+  gfor_fndecl_adjustl_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"adjustl_char4\")), \".W.R\",\n+\tvoid_type_node, 3, pchar4_type_node, gfc_charlen_type_node,\n+\tpchar4_type_node);\n+\n+  gfor_fndecl_adjustr_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"adjustr_char4\")), \".W.R\",\n+\tvoid_type_node, 3, pchar4_type_node, gfc_charlen_type_node,\n+\tpchar4_type_node);\n+\n+  gfor_fndecl_select_string_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"select_string_char4\")), \".R.R.\",\n+\tinteger_type_node, 4, pvoid_type_node, integer_type_node,\n+\tpvoid_type_node, gfc_charlen_type_node);\n \n \n   /* Conversion between character kinds.  */\n \n-  gfor_fndecl_convert_char1_to_char4 =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"convert_char1_to_char4\")),\n-\t\t\t\t     void_type_node, 3,\n-\t\t\t\t     build_pointer_type (pchar4_type_node),\n-\t\t\t\t     gfc_charlen_type_node, pchar1_type_node);\n+  gfor_fndecl_convert_char1_to_char4 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"convert_char1_to_char4\")), \".w.R\",\n+\tvoid_type_node, 3, build_pointer_type (pchar4_type_node),\n+\tgfc_charlen_type_node, pchar1_type_node);\n \n-  gfor_fndecl_convert_char4_to_char1 =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"convert_char4_to_char1\")),\n-\t\t\t\t     void_type_node, 3,\n-\t\t\t\t     build_pointer_type (pchar1_type_node),\n-\t\t\t\t     gfc_charlen_type_node, pchar4_type_node);\n+  gfor_fndecl_convert_char4_to_char1 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"convert_char4_to_char1\")), \".w.R\",\n+\tvoid_type_node, 3, build_pointer_type (pchar1_type_node),\n+\tgfc_charlen_type_node, pchar4_type_node);\n \n   /* Misc. functions.  */\n \n-  gfor_fndecl_ttynam =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"ttynam\")),\n-                                     void_type_node,\n-                                     3,\n-                                     pchar_type_node,\n-                                     gfc_charlen_type_node,\n-                                     integer_type_node);\n-\n-  gfor_fndecl_fdate =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"fdate\")),\n-                                     void_type_node,\n-                                     2,\n-                                     pchar_type_node,\n-                                     gfc_charlen_type_node);\n-\n-  gfor_fndecl_ctime =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"ctime\")),\n-                                     void_type_node,\n-                                     3,\n-                                     pchar_type_node,\n-                                     gfc_charlen_type_node,\n-                                     gfc_int8_type_node);\n-\n-  gfor_fndecl_sc_kind =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"selected_char_kind\")),\n-                                     gfc_int4_type_node, 2,\n-\t\t\t\t     gfc_charlen_type_node, pchar_type_node);\n-\n-  gfor_fndecl_si_kind =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"selected_int_kind\")),\n-                                     gfc_int4_type_node, 1, pvoid_type_node);\n-\n-  gfor_fndecl_sr_kind =\n-    gfc_build_library_function_decl (get_identifier\n-\t\t\t\t\t(PREFIX(\"selected_real_kind2008\")),\n-\t\t\t\t     gfc_int4_type_node, 3,\n-\t\t\t\t     pvoid_type_node, pvoid_type_node,\n-\t\t\t\t     pvoid_type_node);\n+  gfor_fndecl_ttynam = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"ttynam\")), \".W\",\n+\tvoid_type_node, 3, pchar_type_node, gfc_charlen_type_node,\n+\tinteger_type_node);\n+\n+  gfor_fndecl_fdate = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"fdate\")), \".W\",\n+\tvoid_type_node, 2, pchar_type_node, gfc_charlen_type_node);\n+\n+  gfor_fndecl_ctime = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"ctime\")), \".W\",\n+\tvoid_type_node, 3, pchar_type_node, gfc_charlen_type_node,\n+\tgfc_int8_type_node);\n+\n+  gfor_fndecl_sc_kind = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"selected_char_kind\")), \"..R\",\n+\tgfc_int4_type_node, 2, gfc_charlen_type_node, pchar_type_node);\n+\n+  gfor_fndecl_si_kind = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"selected_int_kind\")), \".R\",\n+\tgfc_int4_type_node, 1, pvoid_type_node);\n+\n+  gfor_fndecl_sr_kind = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"selected_real_kind2008\")), \".RR\",\n+\tgfc_int4_type_node, 3, pvoid_type_node, pvoid_type_node,\n+\tpvoid_type_node);\n \n   /* Power functions.  */\n   {\n@@ -2675,23 +2624,21 @@ gfc_build_intrinsic_function_decls (void)\n #undef NRKINDS\n   }\n \n-  gfor_fndecl_math_ishftc4 =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"ishftc4\")),\n-\t\t\t\t     gfc_int4_type_node,\n-\t\t\t\t     3, gfc_int4_type_node,\n-\t\t\t\t     gfc_int4_type_node, gfc_int4_type_node);\n-  gfor_fndecl_math_ishftc8 =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"ishftc8\")),\n-\t\t\t\t     gfc_int8_type_node,\n-\t\t\t\t     3, gfc_int8_type_node,\n-\t\t\t\t     gfc_int4_type_node, gfc_int4_type_node);\n+  gfor_fndecl_math_ishftc4 = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX(\"ishftc4\")),\n+\tgfc_int4_type_node, 3, gfc_int4_type_node, gfc_int4_type_node,\n+\tgfc_int4_type_node);\n+\t\n+  gfor_fndecl_math_ishftc8 = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX(\"ishftc8\")),\n+\tgfc_int8_type_node, 3, gfc_int8_type_node, gfc_int4_type_node,\n+\tgfc_int4_type_node);\n+\n   if (gfc_int16_type_node)\n-    gfor_fndecl_math_ishftc16 =\n-      gfc_build_library_function_decl (get_identifier (PREFIX(\"ishftc16\")),\n-\t\t\t\t       gfc_int16_type_node, 3,\n-\t\t\t\t       gfc_int16_type_node,\n-\t\t\t\t       gfc_int4_type_node,\n-\t\t\t\t       gfc_int4_type_node);\n+    gfor_fndecl_math_ishftc16 = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX(\"ishftc16\")),\n+\tgfc_int16_type_node, 3, gfc_int16_type_node, gfc_int4_type_node,\n+\tgfc_int4_type_node);\n \n   /* BLAS functions.  */\n   {\n@@ -2737,32 +2684,26 @@ gfc_build_intrinsic_function_decls (void)\n   }\n \n   /* Other functions.  */\n-  gfor_fndecl_size0 =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"size0\")),\n-\t\t\t\t     gfc_array_index_type,\n-\t\t\t\t     1, pvoid_type_node);\n-  gfor_fndecl_size1 =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"size1\")),\n-\t\t\t\t     gfc_array_index_type,\n-\t\t\t\t     2, pvoid_type_node,\n-\t\t\t\t     gfc_array_index_type);\n-\n-  gfor_fndecl_iargc =\n-    gfc_build_library_function_decl (get_identifier (PREFIX (\"iargc\")),\n-\t\t\t\t     gfc_int4_type_node,\n-\t\t\t\t     0);\n+  gfor_fndecl_size0 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"size0\")), \".R\",\n+\tgfc_array_index_type, 1, pvoid_type_node);\n+\n+  gfor_fndecl_size1 = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"size1\")), \".R\",\n+\tgfc_array_index_type, 2, pvoid_type_node, gfc_array_index_type);\n+\n+  gfor_fndecl_iargc = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX (\"iargc\")), gfc_int4_type_node, 0);\n \n   if (gfc_type_for_size (128, true))\n     {\n       tree uint128 = gfc_type_for_size (128, true);\n \n-      gfor_fndecl_clz128 =\n-\tgfc_build_library_function_decl (get_identifier (PREFIX (\"clz128\")),\n-\t\t\t\t\t integer_type_node, 1, uint128);\n+      gfor_fndecl_clz128 = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX (\"clz128\")), integer_type_node, 1, uint128);\n \n-      gfor_fndecl_ctz128 =\n-\tgfc_build_library_function_decl (get_identifier (PREFIX (\"ctz128\")),\n-\t\t\t\t\t integer_type_node, 1, uint128);\n+      gfor_fndecl_ctz128 = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX (\"ctz128\")), integer_type_node, 1, uint128);\n     }\n }\n \n@@ -2774,113 +2715,103 @@ gfc_build_builtin_function_decls (void)\n {\n   tree gfc_int4_type_node = gfc_get_int_type (4);\n \n-  gfor_fndecl_stop_numeric =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"stop_numeric\")),\n-\t\t\t\t     void_type_node, 1, gfc_int4_type_node);\n+  gfor_fndecl_stop_numeric = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX(\"stop_numeric\")),\n+\tvoid_type_node, 1, gfc_int4_type_node);\n   /* STOP doesn't return.  */\n   TREE_THIS_VOLATILE (gfor_fndecl_stop_numeric) = 1;\n \n-\n-  gfor_fndecl_stop_string =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"stop_string\")),\n-\t\t\t\t     void_type_node, 2, pchar_type_node,\n-\t\t\t\t     gfc_int4_type_node);\n+  gfor_fndecl_stop_string = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"stop_string\")), \".R.\",\n+\tvoid_type_node, 2, pchar_type_node, gfc_int4_type_node);\n   /* STOP doesn't return.  */\n-  TREE_THIS_VOLATILE (gfor_fndecl_stop_string) = 1;\n \n-\n-  gfor_fndecl_error_stop_numeric =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"error_stop_numeric\")),\n-\t\t\t\t     void_type_node, 1, gfc_int4_type_node);\n+  TREE_THIS_VOLATILE (gfor_fndecl_stop_string) = 1;\n+  gfor_fndecl_error_stop_numeric = gfc_build_library_function_decl (\n+        get_identifier (PREFIX(\"error_stop_numeric\")),\n+        void_type_node, 1, gfc_int4_type_node);\n   /* ERROR STOP doesn't return.  */\n   TREE_THIS_VOLATILE (gfor_fndecl_error_stop_numeric) = 1;\n \n-\n-  gfor_fndecl_error_stop_string =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"error_stop_string\")),\n-\t\t\t\t     void_type_node, 2, pchar_type_node,\n-\t\t\t\t     gfc_int4_type_node);\n+  gfor_fndecl_error_stop_string = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"error_stop_string\")), \".R.\",\n+\tvoid_type_node, 2, pchar_type_node, gfc_int4_type_node);\n   /* ERROR STOP doesn't return.  */\n   TREE_THIS_VOLATILE (gfor_fndecl_error_stop_string) = 1;\n \n+  gfor_fndecl_pause_numeric = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX(\"pause_numeric\")),\n+\tvoid_type_node, 1, gfc_int4_type_node);\n \n-  gfor_fndecl_pause_numeric =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"pause_numeric\")),\n-\t\t\t\t     void_type_node, 1, gfc_int4_type_node);\n-\n-  gfor_fndecl_pause_string =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"pause_string\")),\n-\t\t\t\t     void_type_node, 2, pchar_type_node,\n-\t\t\t\t     gfc_int4_type_node);\n+  gfor_fndecl_pause_string = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"pause_string\")), \".R.\",\n+\tvoid_type_node, 2, pchar_type_node, gfc_int4_type_node);\n \n-  gfor_fndecl_runtime_error =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"runtime_error\")),\n-\t\t\t\t     void_type_node, -1, pchar_type_node);\n+  gfor_fndecl_runtime_error = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"runtime_error\")), \".R\",\n+\tvoid_type_node, -1, pchar_type_node);\n   /* The runtime_error function does not return.  */\n   TREE_THIS_VOLATILE (gfor_fndecl_runtime_error) = 1;\n \n-  gfor_fndecl_runtime_error_at =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"runtime_error_at\")),\n-\t\t\t\t     void_type_node, -2, pchar_type_node,\n-\t\t\t\t     pchar_type_node);\n+  gfor_fndecl_runtime_error_at = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"runtime_error_at\")), \".RR\",\n+\tvoid_type_node, -2, pchar_type_node, pchar_type_node);\n   /* The runtime_error_at function does not return.  */\n   TREE_THIS_VOLATILE (gfor_fndecl_runtime_error_at) = 1;\n   \n-  gfor_fndecl_runtime_warning_at =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"runtime_warning_at\")),\n-\t\t\t\t     void_type_node, -2, pchar_type_node,\n-\t\t\t\t     pchar_type_node);\n-  gfor_fndecl_generate_error =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"generate_error\")),\n-\t\t\t\t     void_type_node, 3, pvoid_type_node,\n-                                     integer_type_node, pchar_type_node);\n-\n-  gfor_fndecl_os_error =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"os_error\")),\n-\t\t\t\t     void_type_node, 1, pchar_type_node);\n+  gfor_fndecl_runtime_warning_at = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"runtime_warning_at\")), \".RR\",\n+\tvoid_type_node, -2, pchar_type_node, pchar_type_node);\n+\n+  gfor_fndecl_generate_error = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"generate_error\")), \".R.R\",\n+\tvoid_type_node, 3, pvoid_type_node, integer_type_node,\n+\tpchar_type_node);\n+\n+  gfor_fndecl_os_error = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"os_error\")), \".R\",\n+\tvoid_type_node, 1, pchar_type_node);\n   /* The runtime_error function does not return.  */\n   TREE_THIS_VOLATILE (gfor_fndecl_os_error) = 1;\n \n-  gfor_fndecl_set_args =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"set_args\")),\n-\t\t\t\t     void_type_node, 2, integer_type_node,\n-\t\t\t\t     build_pointer_type (pchar_type_node));\n+  gfor_fndecl_set_args = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX(\"set_args\")),\n+\tvoid_type_node, 2, integer_type_node,\n+\tbuild_pointer_type (pchar_type_node));\n \n-  gfor_fndecl_set_fpe =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"set_fpe\")),\n-\t\t\t\t    void_type_node, 1, integer_type_node);\n+  gfor_fndecl_set_fpe = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX(\"set_fpe\")),\n+\tvoid_type_node, 1, integer_type_node);\n \n   /* Keep the array dimension in sync with the call, later in this file.  */\n-  gfor_fndecl_set_options =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"set_options\")),\n-\t\t\t\t    void_type_node, 2, integer_type_node,\n-\t\t\t\t    build_pointer_type (integer_type_node));\n+  gfor_fndecl_set_options = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"set_options\")), \"..R\",\n+\tvoid_type_node, 2, integer_type_node,\n+\tbuild_pointer_type (integer_type_node));\n \n-  gfor_fndecl_set_convert =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"set_convert\")),\n-\t\t\t\t     void_type_node, 1, integer_type_node);\n+  gfor_fndecl_set_convert = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX(\"set_convert\")),\n+\tvoid_type_node, 1, integer_type_node);\n \n-  gfor_fndecl_set_record_marker =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"set_record_marker\")),\n-\t\t\t\t     void_type_node, 1, integer_type_node);\n+  gfor_fndecl_set_record_marker = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX(\"set_record_marker\")),\n+\tvoid_type_node, 1, integer_type_node);\n \n-  gfor_fndecl_set_max_subrecord_length =\n-    gfc_build_library_function_decl (get_identifier (PREFIX(\"set_max_subrecord_length\")),\n-\t\t\t\t     void_type_node, 1, integer_type_node);\n+  gfor_fndecl_set_max_subrecord_length = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX(\"set_max_subrecord_length\")),\n+\tvoid_type_node, 1, integer_type_node);\n \n   gfor_fndecl_in_pack = gfc_build_library_function_decl_with_spec (\n-        get_identifier (PREFIX(\"internal_pack\")), \".r\",\n-        pvoid_type_node, 1, pvoid_type_node);\n+\tget_identifier (PREFIX(\"internal_pack\")), \".r\",\n+\tpvoid_type_node, 1, pvoid_type_node);\n \n   gfor_fndecl_in_unpack = gfc_build_library_function_decl_with_spec (\n-        get_identifier (PREFIX(\"internal_unpack\")), \".wR\",\n-        void_type_node, 2, pvoid_type_node, pvoid_type_node);\n-\n-  gfor_fndecl_associated =\n-    gfc_build_library_function_decl (\n-                                     get_identifier (PREFIX(\"associated\")),\n-                                     integer_type_node, 2, ppvoid_type_node,\n-                                     ppvoid_type_node);\n+\tget_identifier (PREFIX(\"internal_unpack\")), \".wR\",\n+\tvoid_type_node, 2, pvoid_type_node, pvoid_type_node);\n+\n+  gfor_fndecl_associated = gfc_build_library_function_decl_with_spec (\n+\tget_identifier (PREFIX(\"associated\")), \".RR\",\n+\tinteger_type_node, 2, ppvoid_type_node, ppvoid_type_node);\n \n   gfc_build_intrinsic_function_decls ();\n   gfc_build_intrinsic_lib_fndecls ();"}]}