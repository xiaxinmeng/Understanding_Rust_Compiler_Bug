{"sha": "d11994a8c39186392711d06554dc5baab5dc3b72", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDExOTk0YThjMzkxODYzOTI3MTFkMDY1NTRkYzViYWFiNWRjM2I3Mg==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2003-12-18T19:39:57Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2003-12-18T19:39:57Z"}, "message": "re PR other/12009 (g++.dg, compat.exp fail to crosscompile testcases)\n\n\tPR other/12009\n\t* g++.dg/compat/compat.exp:  Do not set LD_LIBRARY_PATH when\n\ttesting a cross compiler, it causes spurious compile failures.\n\t* lib/g++.exp: Likewise.\n\nCo-Authored-By: Dan Kegel <dank@kegel.com>\n\nFrom-SVN: r74789", "tree": {"sha": "d9fa700b434044c0d379cbba0fcf075e3af6cd7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d9fa700b434044c0d379cbba0fcf075e3af6cd7d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d11994a8c39186392711d06554dc5baab5dc3b72", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d11994a8c39186392711d06554dc5baab5dc3b72", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d11994a8c39186392711d06554dc5baab5dc3b72", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d11994a8c39186392711d06554dc5baab5dc3b72/comments", "author": null, "committer": null, "parents": [{"sha": "8a1d8dd9c8d5343b61154d5f0ee45e7e31342931", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a1d8dd9c8d5343b61154d5f0ee45e7e31342931", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a1d8dd9c8d5343b61154d5f0ee45e7e31342931"}], "stats": {"total": 33, "additions": 23, "deletions": 10}, "files": [{"sha": "2adba02f1a9ac7e134eeff4248cd512a6be15a75", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d11994a8c39186392711d06554dc5baab5dc3b72/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d11994a8c39186392711d06554dc5baab5dc3b72/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d11994a8c39186392711d06554dc5baab5dc3b72", "patch": "@@ -1,3 +1,11 @@\n+2003-12-18  Steven Bosscher  <steven@gcc.gnu.org>\n+\t    Dan Kegel <dank@kegel.com>\n+\n+\tPR other/12009\n+\t* g++.dg/compat/compat.exp:  Do not set LD_LIBRARY_PATH when\n+\ttesting a cross compiler, it causes spurious compile failures.\n+\t* lib/g++.exp: Likewise.\n+\n 2003-12-18  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n \n \tPR c++/13262"}, {"sha": "94da38c77de764b3741025b455919b51427e0423", "filename": "gcc/testsuite/g++.dg/compat/compat.exp", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d11994a8c39186392711d06554dc5baab5dc3b72/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcompat%2Fcompat.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d11994a8c39186392711d06554dc5baab5dc3b72/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcompat%2Fcompat.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcompat%2Fcompat.exp?ref=d11994a8c39186392711d06554dc5baab5dc3b72", "patch": "@@ -43,11 +43,13 @@ proc compat-fix-library-path { } {\n     global ld_library_path\n \n     # See comments in lib/g++.exp for why this is needed.\n-    setenv  LD_LIBRARY_PATH     $ld_library_path\n-    setenv  SHLIB_PATH          $ld_library_path\n-    setenv  LD_LIBRARYN32_PATH  $ld_library_path\n-    setenv  LD_LIBRARY64_PATH   $ld_library_path\n-    setenv  DYLD_LIBRARY_PATH   $ld_library_path\n+    if {![is_remote target]} {\n+\t# See comments in lib/g++.exp for why this is needed.\n+\tsetenv  LD_LIBRARY_PATH     $ld_library_path\n+\tsetenv  SHLIB_PATH          $ld_library_path\n+\tsetenv  LD_LIBRARYN32_PATH  $ld_library_path\n+\tsetenv  LD_LIBRARY64_PATH   $ld_library_path\n+    }\n }\n \n #"}, {"sha": "8b30b60af14d1cc263eb0770dacca5fd13368726", "filename": "gcc/testsuite/lib/g++.exp", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d11994a8c39186392711d06554dc5baab5dc3b72/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d11994a8c39186392711d06554dc5baab5dc3b72/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp?ref=d11994a8c39186392711d06554dc5baab5dc3b72", "patch": "@@ -172,11 +172,14 @@ proc g++_link_flags { paths } {\n     # unix.exp -- but that's not an option since it's part of DejaGNU\n     # proper, so we do it here.  We really only need to do \n     # this on IRIX, but it shouldn't hurt to do it anywhere else.\n-    setenv  LD_LIBRARY_PATH     $ld_library_path\n-    setenv  SHLIB_PATH          $ld_library_path\n-    setenv  LD_LIBRARYN32_PATH  $ld_library_path\n-    setenv  LD_LIBRARY64_PATH   $ld_library_path\n-    setenv  DYLD_LIBRARY_PATH   $ld_library_path\n+    # Doing this does cause trouble when testing cross-compilers.\n+    if {![is_remote target]} {\n+\tsetenv  LD_LIBRARY_PATH     $ld_library_path\n+\tsetenv  SHLIB_PATH          $ld_library_path\n+\tsetenv  LD_LIBRARYN32_PATH  $ld_library_path\n+\tsetenv  LD_LIBRARY64_PATH   $ld_library_path\n+\tsetenv  DYLD_LIBRARY_PATH   $ld_library_path\n+    }\n \n     return \"$flags\"\n }"}]}