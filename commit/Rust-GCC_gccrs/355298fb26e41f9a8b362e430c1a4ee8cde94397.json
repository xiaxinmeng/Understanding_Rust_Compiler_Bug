{"sha": "355298fb26e41f9a8b362e430c1a4ee8cde94397", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzU1Mjk4ZmIyNmU0MWY5YThiMzYyZTQzMGMxYTRlZThjZGU5NDM5Nw==", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@dcc.unicamp.br", "date": "1999-08-25T13:03:00Z"}, "committer": {"name": "Alexandre Oliva", "email": "oliva@gcc.gnu.org", "date": "1999-08-25T13:03:00Z"}, "message": "* thunk1.C: New test.\n\nFrom-SVN: r28858", "tree": {"sha": "b805a3861fabf64316c2290975d68498fa188b1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b805a3861fabf64316c2290975d68498fa188b1e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/355298fb26e41f9a8b362e430c1a4ee8cde94397", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/355298fb26e41f9a8b362e430c1a4ee8cde94397", "html_url": "https://github.com/Rust-GCC/gccrs/commit/355298fb26e41f9a8b362e430c1a4ee8cde94397", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/355298fb26e41f9a8b362e430c1a4ee8cde94397/comments", "author": null, "committer": null, "parents": [{"sha": "f4c6443e4d075b72c3fbe4d0c0caa2bf0abf5700", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4c6443e4d075b72c3fbe4d0c0caa2bf0abf5700", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4c6443e4d075b72c3fbe4d0c0caa2bf0abf5700"}], "stats": {"total": 42, "additions": 42, "deletions": 0}, "files": [{"sha": "5a5ab8a48ee88280356a850e04148464a2058965", "filename": "gcc/testsuite/g++.old-deja/g++.oliva/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/355298fb26e41f9a8b362e430c1a4ee8cde94397/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.oliva%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/355298fb26e41f9a8b362e430c1a4ee8cde94397/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.oliva%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.oliva%2FChangeLog?ref=355298fb26e41f9a8b362e430c1a4ee8cde94397", "patch": "@@ -1,3 +1,7 @@\n+1999-08-25  Alexandre Oliva  <oliva@dcc.unicamp.br>\n+\n+\t* thunk1.C: New test.\n+\n 1999-08-06  Alexandre Oliva  <oliva@dcc.unicamp.br>\n \n \t* dwarf2.C, dwarf3.C: Added XFAIL for Solaris/x86.  Removed"}, {"sha": "5407e9e058341d9d121e969e767cd94f7f26c104", "filename": "gcc/testsuite/g++.old-deja/g++.oliva/thunk1.C", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/355298fb26e41f9a8b362e430c1a4ee8cde94397/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.oliva%2Fthunk1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/355298fb26e41f9a8b362e430c1a4ee8cde94397/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.oliva%2Fthunk1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.oliva%2Fthunk1.C?ref=355298fb26e41f9a8b362e430c1a4ee8cde94397", "patch": "@@ -0,0 +1,38 @@\n+// Copyright (C) 1999 Free Software Foundation\n+\n+// by Alexandre Oliva <oliva@dcc.unicamp.br>\n+// based on bug report by Fredrik \ufffdhrstr\ufffdm <d92-foh@nada.kth.se>\n+\n+// Special g++ Options: -fvtable-thunks\n+// execution test - XFAIL *-*-*\n+\n+#include <cstdlib>\n+\n+using namespace std;\n+\n+struct vbase {\n+  virtual int get_a() const = 0;\n+};\n+\n+struct base: virtual vbase {\n+  int a;\n+  base(int aa) : a(aa) {}\n+  int get_a() const { return a; }\n+};\n+\n+struct mid: base {\n+  mid(int bb) : base(bb) {\n+    // when mid is not in charge of vbase initialization,\n+    // a derived-aware vtable is needed for vbase\n+    if (((vbase*)this)->get_a() != bb)\n+      abort();\n+  }\n+};\n+\n+struct derived: virtual mid {\n+  derived(int cc) : mid(cc) {}\n+};\n+\n+int main () {\n+  derived(1);\n+}"}]}