{"sha": "92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTJlY2RmYjc0YzZiNGMxZTE4MTJhZmNjOWE3YWE3OTIxN2RhMTFhZA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2001-01-23T10:44:18Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2001-01-23T10:44:18Z"}, "message": "decl.c (grokdeclarator): Don't presume DECL_LANG_SPECIFIC indicates anything special about template depth.\n\ncp:\n\t* decl.c (grokdeclarator): Don't presume DECL_LANG_SPECIFIC\n\tindicates anything special about template depth. Make sure we\n\tonly count the user visible template classes.\ntestsuite:\n\t* g++.old-deja/g++.pt/spec37.C: New test.\n\nFrom-SVN: r39198", "tree": {"sha": "baf335a9274273d28c065d4e2be27603c4833ee6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/baf335a9274273d28c065d4e2be27603c4833ee6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad/comments", "author": null, "committer": null, "parents": [{"sha": "4cff6abe405f4e4d660ab6f6cf8b29ba9d49d4fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cff6abe405f4e4d660ab6f6cf8b29ba9d49d4fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4cff6abe405f4e4d660ab6f6cf8b29ba9d49d4fd"}], "stats": {"total": 43, "additions": 38, "deletions": 5}, "files": [{"sha": "166d0c1c5737f9977dd01a5f626658b426587764", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad", "patch": "@@ -1,3 +1,9 @@\n+2001-01-23  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* decl.c (grokdeclarator): Don't presume DECL_LANG_SPECIFIC\n+\tindicates anything special about template depth. Make sure we\n+\tonly count the user visible template classes.\n+\n 2001-01-23  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* call.c (build_conv): Typo in comment."}, {"sha": "6fcf9c4d2c2b1acc455863cf3ae9a6914ab43879", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad", "patch": "@@ -10807,14 +10807,12 @@ grokdeclarator (declarator, declspecs, decl_context, initialized, attrlist)\n \t\t   the definition of `S<int>::f'.  */\n \t\tif (CLASSTYPE_TEMPLATE_INFO (t)\n \t\t    && (CLASSTYPE_TEMPLATE_INSTANTIATION (t)\n-\t\t\t|| uses_template_parms (CLASSTYPE_TI_ARGS (t))))\n+\t\t\t|| uses_template_parms (CLASSTYPE_TI_ARGS (t)))\n+\t            && PRIMARY_TEMPLATE_P (CLASSTYPE_TI_TEMPLATE (t)))\n \t\t  template_count += 1;\n \n \t\tt = TYPE_MAIN_DECL (t);\n-\t\tif (DECL_LANG_SPECIFIC (t))\n-\t\t  t = DECL_CONTEXT (t);\n-\t\telse\n-\t\t  t = NULL_TREE;\n+\t\tt = DECL_CONTEXT (t);\n \t      }\n \n \t    if (sname == NULL_TREE)"}, {"sha": "649f327a497a2147004bbb6b34e69c561d961881", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad", "patch": "@@ -1,3 +1,7 @@\n+2001-01-23  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* g++.old-deja/g++.pt/spec37.C: New test.\n+\n 2001-01-23  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* g++.old-deja/g++.pt/overload14.C: New test."}, {"sha": "5578c30ef0c2617e42fcd3e950e35ae3cb7f2d37", "filename": "gcc/testsuite/g++.old-deja/g++.pt/spec37.C", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fspec37.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fspec37.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fspec37.C?ref=92ecdfb74c6b4c1e1812afcc9a7aa79217da11ad", "patch": "@@ -0,0 +1,25 @@\n+// Build don't link:\n+// \n+// Copyright (C) 2000 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 21 Jan 2001 <nathan@codesourcery.com>\n+\n+// Bug 1728. We started sorting things when there were 7 fields. Our\n+// template_count algorithm was rather fragile ...\n+\n+template <int dim> struct X\n+{\n+  struct Y\n+  {\n+    int x1;\n+    int x2;\n+    int x3;\n+    int x4;\n+    int x5;\n+    int x6;\n+    int x7;\n+\n+    void Foo ();\n+  };\n+};\n+\n+template <> void X<1>::Y::Foo () {}"}]}