{"sha": "c55ade0244cff15833d8c72f1bc360f3f8c26360", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzU1YWRlMDI0NGNmZjE1ODMzZDhjNzJmMWJjMzYwZjNmOGMyNjM2MA==", "commit": {"author": {"name": "Dave Brolley", "email": "brolley@cygnus.com", "date": "1998-10-16T14:28:40Z"}, "committer": {"name": "Dave Brolley", "email": "brolley@gcc.gnu.org", "date": "1998-10-16T14:28:40Z"}, "message": "cpplib.c (cpp_get_token): Replace whitespace that occurs between a macro name and the next token with a...\n\nFri Oct 16 17:26:10 1998  Dave Brolley  <brolley@cygnus.com>\n        * cpplib.c (cpp_get_token): Replace whitespace that occurs between\n        a macro name and the next token with a single blank if that whitespace\n        is in a macro buffer and the next token is not '('.\n\nFrom-SVN: r23139", "tree": {"sha": "1923a499442ffb88cbf077dd0dc0b2da3b3f59d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1923a499442ffb88cbf077dd0dc0b2da3b3f59d7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c55ade0244cff15833d8c72f1bc360f3f8c26360", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c55ade0244cff15833d8c72f1bc360f3f8c26360", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c55ade0244cff15833d8c72f1bc360f3f8c26360", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c55ade0244cff15833d8c72f1bc360f3f8c26360/comments", "author": null, "committer": null, "parents": [{"sha": "7cfac5953a129fe78668db20cdf2533125349dea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cfac5953a129fe78668db20cdf2533125349dea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cfac5953a129fe78668db20cdf2533125349dea"}], "stats": {"total": 50, "additions": 35, "deletions": 15}, "files": [{"sha": "52eff0816590de1a9d02393a9925dc38459aee9f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c55ade0244cff15833d8c72f1bc360f3f8c26360/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c55ade0244cff15833d8c72f1bc360f3f8c26360/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c55ade0244cff15833d8c72f1bc360f3f8c26360", "patch": "@@ -1,3 +1,9 @@\n+Fri Oct 16 17:26:10 1998  Dave Brolley  <brolley@cygnus.com>\n+\n+\t* cpplib.c (cpp_get_token): Replace whitespace that occurs between\n+\ta macro name and the next token with a single blank if that whitespace\n+\tis in a macro buffer and the next token is not '('.\n+\n Fri Oct 16 15:44:02 1998  Dave Brolley  <brolley@cygnus.com>\n \n         * cccp.c (rescan): Handle multibyte chartacters ending in backslash."}, {"sha": "016b1606211d5f3d5a15c95b2cba0f8f774f9546", "filename": "gcc/cpplib.c", "status": "modified", "additions": 29, "deletions": 15, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c55ade0244cff15833d8c72f1bc360f3f8c26360/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c55ade0244cff15833d8c72f1bc360f3f8c26360/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=c55ade0244cff15833d8c72f1bc360f3f8c26360", "patch": "@@ -5099,29 +5099,43 @@ cpp_get_token (pfile)\n \t    if (hp->type == T_MACRO && hp->value.defn->nargs >= 0)\n \t    {\n \t      struct parse_marker macro_mark;\n-\t      int is_macro_call;\n-\t      while (CPP_IS_MACRO_BUFFER (CPP_BUFFER (pfile)))\n-\t        {\n-\t\t  cpp_buffer *next_buf;\n-\t\t  cpp_skip_hspace (pfile);\n-\t\t  if (PEEKC () != EOF)\n-\t\t    break;\n-\t\t  next_buf = CPP_PREV_BUFFER (CPP_BUFFER (pfile));\n-\t\t  (*CPP_BUFFER (pfile)->cleanup) (CPP_BUFFER (pfile), pfile);\n-\t\t  CPP_BUFFER (pfile) = next_buf;\n-\t        }\n+\t      int is_macro_call, macbuf_whitespace = 0;\n+\n \t      parse_set_mark (&macro_mark, pfile);\n \t      for (;;)\n \t\t{\n \t\t  cpp_skip_hspace (pfile);\n \t\t  c = PEEKC ();\n \t\t  is_macro_call = c == '(';\n-\t\t  if (c != '\\n')\n-\t\t    break;\n-\t\t  FORWARD (1);\n+\t\t  if (c != EOF)\n+\t\t    {\n+\t\t      if (c != '\\n')\n+\t\t        break;\n+\t\t      FORWARD (1);\n+\t\t    }\n+                  else\n+                    {\n+                      if (CPP_IS_MACRO_BUFFER (CPP_BUFFER (pfile)))\n+                        {\n+                          if (macro_mark.position !=\n+                              (CPP_BUFFER (pfile)->cur\n+                               - CPP_BUFFER (pfile)->buf))\n+                             macbuf_whitespace = 1;\n+\n+                          parse_clear_mark (&macro_mark);\n+                          cpp_pop_buffer (pfile);\n+                          parse_set_mark (&macro_mark, pfile);\n+                        }\n+                      else\n+                        break;\n+                    }\n \t\t}\n \t      if (!is_macro_call)\n-\t\tparse_goto_mark (&macro_mark, pfile);\n+                {\n+                  parse_goto_mark (&macro_mark, pfile);\n+                  if (macbuf_whitespace)\n+                    CPP_PUTC (pfile, ' ');\n+                }\n \t      parse_clear_mark (&macro_mark);\n \t      if (!is_macro_call)\n \t\treturn CPP_NAME;"}]}