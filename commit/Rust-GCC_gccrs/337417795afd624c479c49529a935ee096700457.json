{"sha": "337417795afd624c479c49529a935ee096700457", "node_id": "C_kwDOANBUbNoAKDMzNzQxNzc5NWFmZDYyNGM0NzljNDk1MjlhOTM1ZWUwOTY3MDA0NTc", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2021-12-02T14:30:36Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-01-06T17:11:33Z"}, "message": "[Ada] Remove duplicates of empty strings\n\ngcc/ada/\n\n\t* par-ch4.adb (P_Simple_Expression): Reuse Null_String_Id.\n\t* prep.adb (Parse_Def_File): Likewise; remove Empty_String.", "tree": {"sha": "050b7adf1a0ab7b8ea116b74152657db1858cbeb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/050b7adf1a0ab7b8ea116b74152657db1858cbeb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/337417795afd624c479c49529a935ee096700457", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/337417795afd624c479c49529a935ee096700457", "html_url": "https://github.com/Rust-GCC/gccrs/commit/337417795afd624c479c49529a935ee096700457", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/337417795afd624c479c49529a935ee096700457/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7f08c075994ac37172ff31f6633d6310d5327090", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f08c075994ac37172ff31f6633d6310d5327090", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f08c075994ac37172ff31f6633d6310d5327090"}], "stats": {"total": 15, "additions": 2, "deletions": 13}, "files": [{"sha": "4b021e7a932d11887165947233f78080713759ab", "filename": "gcc/ada/par-ch4.adb", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/337417795afd624c479c49529a935ee096700457/gcc%2Fada%2Fpar-ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/337417795afd624c479c49529a935ee096700457/gcc%2Fada%2Fpar-ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch4.adb?ref=337417795afd624c479c49529a935ee096700457", "patch": "@@ -2471,9 +2471,6 @@ package body Ch4 is\n               and then Num_Concats >= Num_Concats_Threshold\n             then\n                declare\n-                  Empty_String_Val : String_Id;\n-                  --  String_Id for \"\"\n-\n                   Strlit_Concat_Val : String_Id;\n                   --  Contains the folded value (which will be correct if the\n                   --  \"&\" operators are the predefined ones).\n@@ -2509,11 +2506,9 @@ package body Ch4 is\n                   --  Create new folded node, and rewrite result with a concat-\n                   --  enation of an empty string literal and the folded node.\n \n-                  Start_String;\n-                  Empty_String_Val := End_String;\n                   New_Node :=\n                     Make_Op_Concat (Loc,\n-                      Make_String_Literal (Loc, Empty_String_Val),\n+                      Make_String_Literal (Loc, Null_String_Id),\n                       Make_String_Literal (Loc, Strlit_Concat_Val,\n                         Is_Folded_In_Parser => True));\n                   Rewrite (Node1, New_Node);"}, {"sha": "2ced0829c86891dff04b1f0a63b4ba3ec9306d0a", "filename": "gcc/ada/prep.adb", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/337417795afd624c479c49529a935ee096700457/gcc%2Fada%2Fprep.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/337417795afd624c479c49529a935ee096700457/gcc%2Fada%2Fprep.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprep.adb?ref=337417795afd624c479c49529a935ee096700457", "patch": "@@ -114,9 +114,6 @@ package body Prep is\n    --  Used to avoid repetition of the part of the initialisation that needs\n    --  to be done only once.\n \n-   Empty_String : String_Id;\n-   --  \"\", as a string_id\n-\n    String_False : String_Id;\n    --  \"false\", as a string_id\n \n@@ -809,9 +806,6 @@ package body Prep is\n          Store_String_Chars (\"True\");\n          True_Value.Value := End_String;\n \n-         Start_String;\n-         Empty_String := End_String;\n-\n          Start_String;\n          Store_String_Chars (\"False\");\n          String_False := End_String;\n@@ -1072,7 +1066,7 @@ package body Prep is\n                         Original            => Original_Name,\n                         On_The_Command_Line => False,\n                         Is_A_String         => False,\n-                        Value               => Empty_String);\n+                        Value               => Null_String_Id);\n \n             else\n                Value_Start := Token_Ptr;"}]}