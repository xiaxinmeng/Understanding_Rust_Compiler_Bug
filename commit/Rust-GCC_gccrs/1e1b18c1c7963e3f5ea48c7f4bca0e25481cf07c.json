{"sha": "1e1b18c1c7963e3f5ea48c7f4bca0e25481cf07c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWUxYjE4YzFjNzk2M2UzZjVlYTQ4YzdmNGJjYTBlMjU0ODFjZjA3Yw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2013-03-25T11:24:12Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2013-03-25T11:24:12Z"}, "message": "function.c (emit_use_return_register_into_block): On cc0 targets, do not emit the sequence between cc0 setter and user.\n\n\t* function.c (emit_use_return_register_into_block): On cc0 targets,\n\tdo not emit the sequence between cc0 setter and user.\n\nFrom-SVN: r197036", "tree": {"sha": "56d6475b62926443d7677602cac472486041af7a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56d6475b62926443d7677602cac472486041af7a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e1b18c1c7963e3f5ea48c7f4bca0e25481cf07c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e1b18c1c7963e3f5ea48c7f4bca0e25481cf07c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e1b18c1c7963e3f5ea48c7f4bca0e25481cf07c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e1b18c1c7963e3f5ea48c7f4bca0e25481cf07c/comments", "author": null, "committer": null, "parents": [{"sha": "9a776a830e8342b8a764ff2596c28f2e60046e16", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a776a830e8342b8a764ff2596c28f2e60046e16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a776a830e8342b8a764ff2596c28f2e60046e16"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "072efd7d65a41ec8780e70e58b68e75aa7f39ad6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e1b18c1c7963e3f5ea48c7f4bca0e25481cf07c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e1b18c1c7963e3f5ea48c7f4bca0e25481cf07c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1e1b18c1c7963e3f5ea48c7f4bca0e25481cf07c", "patch": "@@ -1,7 +1,12 @@\n+2013-03-25  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* function.c (emit_use_return_register_into_block): On cc0 targets,\n+\tdo not emit the sequence between cc0 setter and user.\n+\n 2013-03-25  Kai Tietz  <ktietz@redhat.com>\n \n-        * config/i386/predicates.md (local_symbolic_operand): Interpret\n-        dll-imported symbols as none-local.\n+\t* config/i386/predicates.md (local_symbolic_operand): Interpret\n+\tdll-imported symbols as none-local.\n \n 2013-03-25  Richard Biener  <rguenther@suse.de>\n "}, {"sha": "cd9cb855d40e72992932dca83c7a9905e37aab55", "filename": "gcc/function.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e1b18c1c7963e3f5ea48c7f4bca0e25481cf07c/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e1b18c1c7963e3f5ea48c7f4bca0e25481cf07c/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=1e1b18c1c7963e3f5ea48c7f4bca0e25481cf07c", "patch": "@@ -5598,12 +5598,17 @@ prepare_shrink_wrap (basic_block entry_block)\n static void\n emit_use_return_register_into_block (basic_block bb)\n {\n-  rtx seq;\n+  rtx seq, insn;\n   start_sequence ();\n   use_return_register ();\n   seq = get_insns ();\n   end_sequence ();\n-  emit_insn_before (seq, BB_END (bb));\n+  insn = BB_END (bb);\n+#ifdef HAVE_cc0\n+  if (reg_mentioned_p (cc0_rtx, PATTERN (insn)))\n+    insn = prev_cc0_setter (insn);\n+#endif\n+  emit_insn_before (seq, insn);\n }\n \n "}]}