{"sha": "4d4e036d312737ad346b092a4e9289dae2067188", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGQ0ZTAzNmQzMTI3MzdhZDM0NmIwOTJhNGU5Mjg5ZGFlMjA2NzE4OA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2008-10-03T16:29:07Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-10-03T16:29:07Z"}, "message": "re PR c++/37719 (incorrect type on warning of mismatched exception specification with templates)\n\n/cp\n2008-10-03  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/37719\n\t* error.c (dump_function_decl): Save the exceptions in case of\n\terror about incompatible specifications in a specialization.\n\n/testsuite\n2008-10-03  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/37719\n\t* g++.dg/template/error36.C: New.\n\nFrom-SVN: r140855", "tree": {"sha": "84895d6f0fd1e1cc6c70307db98155f13c421fae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/84895d6f0fd1e1cc6c70307db98155f13c421fae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4d4e036d312737ad346b092a4e9289dae2067188", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d4e036d312737ad346b092a4e9289dae2067188", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d4e036d312737ad346b092a4e9289dae2067188", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d4e036d312737ad346b092a4e9289dae2067188/comments", "author": null, "committer": null, "parents": [{"sha": "2f07423c8c234c5a5739b1c26d37e4d52d539375", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f07423c8c234c5a5739b1c26d37e4d52d539375", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f07423c8c234c5a5739b1c26d37e4d52d539375"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "acb766f7124e45936d3cff513741cf52d5f98638", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d4e036d312737ad346b092a4e9289dae2067188/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d4e036d312737ad346b092a4e9289dae2067188/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=4d4e036d312737ad346b092a4e9289dae2067188", "patch": "@@ -1,3 +1,9 @@\n+2008-10-03  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/37719\n+\t* error.c (dump_function_decl): Save the exceptions in case of\n+\terror about incompatible specifications in a specialization.\n+\n 2008-10-01  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n \t* tree.c (lvalue_p_1): COMPOUND_LITERAL_EXPR is also an lvalue."}, {"sha": "4064ad400e2482e6512c0572acb9f6f2f915db3c", "filename": "gcc/cp/error.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d4e036d312737ad346b092a4e9289dae2067188/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d4e036d312737ad346b092a4e9289dae2067188/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=4d4e036d312737ad346b092a4e9289dae2067188", "patch": "@@ -1084,11 +1084,16 @@ dump_function_decl (tree t, int flags)\n   tree template_parms = NULL_TREE;\n   int show_return = flags & TFF_RETURN_TYPE || flags & TFF_DECL_SPECIFIERS;\n   int do_outer_scope = ! (flags & TFF_UNQUALIFIED_NAME);\n+  tree exceptions;\n \n   flags &= ~TFF_UNQUALIFIED_NAME;\n   if (TREE_CODE (t) == TEMPLATE_DECL)\n     t = DECL_TEMPLATE_RESULT (t);\n \n+  /* Save the exceptions, in case t is a specialization and we are\n+     emitting an error about incompatible specifications.  */\n+  exceptions = TYPE_RAISES_EXCEPTIONS (TREE_TYPE (t));\n+\n   /* Pretty print template instantiations only.  */\n   if (DECL_USE_TEMPLATE (t) && DECL_TEMPLATE_INFO (t))\n     {\n@@ -1153,7 +1158,7 @@ dump_function_decl (tree t, int flags)\n       if (flags & TFF_EXCEPTION_SPECIFICATION)\n \t{\n \t  pp_base (cxx_pp)->padding = pp_before;\n-\t  dump_exception_spec (TYPE_RAISES_EXCEPTIONS (fntype), flags);\n+\t  dump_exception_spec (exceptions, flags);\n \t}\n \n       if (show_return)"}, {"sha": "f2c8bf235d21b39ceb7d1d6927906a5d4a032893", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d4e036d312737ad346b092a4e9289dae2067188/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d4e036d312737ad346b092a4e9289dae2067188/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4d4e036d312737ad346b092a4e9289dae2067188", "patch": "@@ -1,3 +1,8 @@\n+2008-10-03  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/37719\n+\t* g++.dg/template/error36.C: New.\n+\n 2008-10-02  Steven Bosscher  <steven@gcc.gnu.org>\n \n \tPR fortran/37635"}, {"sha": "b16b976e3822420057f53bf44364552a3854d961", "filename": "gcc/testsuite/g++.dg/template/error36.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d4e036d312737ad346b092a4e9289dae2067188/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ferror36.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d4e036d312737ad346b092a4e9289dae2067188/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ferror36.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ferror36.C?ref=4d4e036d312737ad346b092a4e9289dae2067188", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/37719.C\n+\n+template <typename T>\n+class foo {\n+    void bar() throw(int); // { dg-error \"throw \\\\(int\\\\)\" }\n+};\n+\n+template <>\n+void foo<int>::bar() throw(float) {} // { dg-error \"throw \\\\(float\\\\)\" }"}]}