{"sha": "ba5ce70d08120244aab6c7cb02570ac8b88983af", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmE1Y2U3MGQwODEyMDI0NGFhYjZjN2NiMDI1NzBhYzhiODg5ODNhZg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-06-02T21:31:34Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-06-02T21:31:34Z"}, "message": "(c_build_type_variant): Don't change TYPE_MAIN_VARIANT of new type.\n\nFrom-SVN: r7427", "tree": {"sha": "811bfeab9eedbbaf64aaa1f839ad4a6e3f564b87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/811bfeab9eedbbaf64aaa1f839ad4a6e3f564b87"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba5ce70d08120244aab6c7cb02570ac8b88983af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba5ce70d08120244aab6c7cb02570ac8b88983af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba5ce70d08120244aab6c7cb02570ac8b88983af", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba5ce70d08120244aab6c7cb02570ac8b88983af/comments", "author": null, "committer": null, "parents": [{"sha": "7bc7696cbab2dbedf79274f891493eaa5a26b23f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bc7696cbab2dbedf79274f891493eaa5a26b23f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7bc7696cbab2dbedf79274f891493eaa5a26b23f"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "d09bf41260c8ed5d39bb1443e92296363d6477ba", "filename": "gcc/c-common.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba5ce70d08120244aab6c7cb02570ac8b88983af/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba5ce70d08120244aab6c7cb02570ac8b88983af/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=ba5ce70d08120244aab6c7cb02570ac8b88983af", "patch": "@@ -1972,14 +1972,16 @@ c_build_type_variant (type, constp, volatilep)\n {\n   if (TREE_CODE (type) == ARRAY_TYPE)\n     {\n-      tree real_main_variant = TYPE_MAIN_VARIANT (type);\n-\n       push_obstacks (TYPE_OBSTACK (type), TYPE_OBSTACK (type));\n       type = build_array_type (c_build_type_variant (TREE_TYPE (type),\n \t\t\t\t\t\t     constp, volatilep),\n \t\t\t       TYPE_DOMAIN (type));\n-      TYPE_MAIN_VARIANT (type) = real_main_variant;\n       pop_obstacks ();\n+\n+      /* If the old TYPE had variants, we lose them here.  However,\n+\t since the new TYPE can be in the permanent obstack and the\n+\t old one may not be, preserving this chain would cause permanent\n+\t objects to point to non-permanent ones.  */\n     }\n   return build_type_variant (type, constp, volatilep);\n }"}]}