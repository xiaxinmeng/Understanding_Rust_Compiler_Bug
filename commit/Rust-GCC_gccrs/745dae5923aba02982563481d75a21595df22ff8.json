{"sha": "745dae5923aba02982563481d75a21595df22ff8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzQ1ZGFlNTkyM2FiYTAyOTgyNTYzNDgxZDc1YTIxNTk1ZGYyMmZmOA==", "commit": {"author": {"name": "Tamar Christina", "email": "tamar.christina@arm.com", "date": "2021-05-21T09:30:59Z"}, "committer": {"name": "Tamar Christina", "email": "tamar.christina@arm.com", "date": "2021-05-21T09:30:59Z"}, "message": "libsanitizer: Remove cyclades from libsanitizer\n\nThe Linux kernel has removed the interface to cyclades from\nthe latest kernel headers[1] due to them being orphaned for the\npast 13 years.\n\nlibsanitizer uses this header when compiling against glibc, but\nglibcs itself doesn't seem to have any references to cyclades.\n\nFurther more it seems that the driver is broken in the kernel and\nthe firmware doesn't seem to be available anymore.\n\nAs such since this is breaking the build of libsanitizer (and so the\nGCC bootstrap[2]) I propose to remove this.\n\n[1] https://lkml.org/lkml/2021/3/2/153\n[2] https://gcc.gnu.org/bugzilla/show_bug.cgi?id=100379\n\n(cherry picked from commit f7c5351552387bd43f6ca3631016d7f0dfe0f135)\n\nlibsanitizer/ChangeLog:\n\n\tPR sanitizer/100379\n\t* sanitizer_common/sanitizer_common_interceptors_ioctl.inc: Cherry-pick\n\tllvm-project revision f7c5351552387bd43f6ca3631016d7f0dfe0f135.\n\t* sanitizer_common/sanitizer_platform_limits_posix.cpp: Likewise.\n\t* sanitizer_common/sanitizer_platform_limits_posix.h: Likewise.", "tree": {"sha": "df6124998cac288577d460cc14a1deab423e3a08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/df6124998cac288577d460cc14a1deab423e3a08"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/745dae5923aba02982563481d75a21595df22ff8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/745dae5923aba02982563481d75a21595df22ff8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/745dae5923aba02982563481d75a21595df22ff8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/745dae5923aba02982563481d75a21595df22ff8/comments", "author": {"login": "TamarChristinaArm", "id": 48126768, "node_id": "MDQ6VXNlcjQ4MTI2NzY4", "avatar_url": "https://avatars.githubusercontent.com/u/48126768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TamarChristinaArm", "html_url": "https://github.com/TamarChristinaArm", "followers_url": "https://api.github.com/users/TamarChristinaArm/followers", "following_url": "https://api.github.com/users/TamarChristinaArm/following{/other_user}", "gists_url": "https://api.github.com/users/TamarChristinaArm/gists{/gist_id}", "starred_url": "https://api.github.com/users/TamarChristinaArm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TamarChristinaArm/subscriptions", "organizations_url": "https://api.github.com/users/TamarChristinaArm/orgs", "repos_url": "https://api.github.com/users/TamarChristinaArm/repos", "events_url": "https://api.github.com/users/TamarChristinaArm/events{/privacy}", "received_events_url": "https://api.github.com/users/TamarChristinaArm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TamarChristinaArm", "id": 48126768, "node_id": "MDQ6VXNlcjQ4MTI2NzY4", "avatar_url": "https://avatars.githubusercontent.com/u/48126768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TamarChristinaArm", "html_url": "https://github.com/TamarChristinaArm", "followers_url": "https://api.github.com/users/TamarChristinaArm/followers", "following_url": "https://api.github.com/users/TamarChristinaArm/following{/other_user}", "gists_url": "https://api.github.com/users/TamarChristinaArm/gists{/gist_id}", "starred_url": "https://api.github.com/users/TamarChristinaArm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TamarChristinaArm/subscriptions", "organizations_url": "https://api.github.com/users/TamarChristinaArm/orgs", "repos_url": "https://api.github.com/users/TamarChristinaArm/repos", "events_url": "https://api.github.com/users/TamarChristinaArm/events{/privacy}", "received_events_url": "https://api.github.com/users/TamarChristinaArm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "49c2c7f6551f9a71a1bc6766d3b7482a8b39c4ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49c2c7f6551f9a71a1bc6766d3b7482a8b39c4ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49c2c7f6551f9a71a1bc6766d3b7482a8b39c4ac"}], "stats": {"total": 30, "additions": 0, "deletions": 30}, "files": [{"sha": "b7da659875574ed3ca457780799d5b4c556d2f68", "filename": "libsanitizer/sanitizer_common/sanitizer_common_interceptors_ioctl.inc", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/745dae5923aba02982563481d75a21595df22ff8/libsanitizer%2Fsanitizer_common%2Fsanitizer_common_interceptors_ioctl.inc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/745dae5923aba02982563481d75a21595df22ff8/libsanitizer%2Fsanitizer_common%2Fsanitizer_common_interceptors_ioctl.inc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fsanitizer_common%2Fsanitizer_common_interceptors_ioctl.inc?ref=745dae5923aba02982563481d75a21595df22ff8", "patch": "@@ -370,15 +370,6 @@ static void ioctl_table_fill() {\n \n #if SANITIZER_GLIBC\n   // _(SIOCDEVPLIP, WRITE, struct_ifreq_sz); // the same as EQL_ENSLAVE\n-  _(CYGETDEFTHRESH, WRITE, sizeof(int));\n-  _(CYGETDEFTIMEOUT, WRITE, sizeof(int));\n-  _(CYGETMON, WRITE, struct_cyclades_monitor_sz);\n-  _(CYGETTHRESH, WRITE, sizeof(int));\n-  _(CYGETTIMEOUT, WRITE, sizeof(int));\n-  _(CYSETDEFTHRESH, NONE, 0);\n-  _(CYSETDEFTIMEOUT, NONE, 0);\n-  _(CYSETTHRESH, NONE, 0);\n-  _(CYSETTIMEOUT, NONE, 0);\n   _(EQL_EMANCIPATE, WRITE, struct_ifreq_sz);\n   _(EQL_ENSLAVE, WRITE, struct_ifreq_sz);\n   _(EQL_GETMASTRCFG, WRITE, struct_ifreq_sz);"}, {"sha": "6e5c330b98eff32e3fd49b4ff95f72a50230c538", "filename": "libsanitizer/sanitizer_common/sanitizer_platform_limits_posix.cpp", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/745dae5923aba02982563481d75a21595df22ff8/libsanitizer%2Fsanitizer_common%2Fsanitizer_platform_limits_posix.cpp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/745dae5923aba02982563481d75a21595df22ff8/libsanitizer%2Fsanitizer_common%2Fsanitizer_platform_limits_posix.cpp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fsanitizer_common%2Fsanitizer_platform_limits_posix.cpp?ref=745dae5923aba02982563481d75a21595df22ff8", "patch": "@@ -143,7 +143,6 @@ typedef struct user_fpregs elf_fpregset_t;\n # include <sys/procfs.h>\n #endif\n #include <sys/user.h>\n-#include <linux/cyclades.h>\n #include <linux/if_eql.h>\n #include <linux/if_plip.h>\n #include <linux/lp.h>\n@@ -460,7 +459,6 @@ unsigned struct_ElfW_Phdr_sz = sizeof(Elf_Phdr);\n \n #if SANITIZER_GLIBC\n   unsigned struct_ax25_parms_struct_sz = sizeof(struct ax25_parms_struct);\n-  unsigned struct_cyclades_monitor_sz = sizeof(struct cyclades_monitor);\n #if EV_VERSION > (0x010000)\n   unsigned struct_input_keymap_entry_sz = sizeof(struct input_keymap_entry);\n #else\n@@ -824,15 +822,6 @@ unsigned struct_ElfW_Phdr_sz = sizeof(Elf_Phdr);\n #endif // SANITIZER_LINUX\n \n #if SANITIZER_LINUX && !SANITIZER_ANDROID\n-  unsigned IOCTL_CYGETDEFTHRESH = CYGETDEFTHRESH;\n-  unsigned IOCTL_CYGETDEFTIMEOUT = CYGETDEFTIMEOUT;\n-  unsigned IOCTL_CYGETMON = CYGETMON;\n-  unsigned IOCTL_CYGETTHRESH = CYGETTHRESH;\n-  unsigned IOCTL_CYGETTIMEOUT = CYGETTIMEOUT;\n-  unsigned IOCTL_CYSETDEFTHRESH = CYSETDEFTHRESH;\n-  unsigned IOCTL_CYSETDEFTIMEOUT = CYSETDEFTIMEOUT;\n-  unsigned IOCTL_CYSETTHRESH = CYSETTHRESH;\n-  unsigned IOCTL_CYSETTIMEOUT = CYSETTIMEOUT;\n   unsigned IOCTL_EQL_EMANCIPATE = EQL_EMANCIPATE;\n   unsigned IOCTL_EQL_ENSLAVE = EQL_ENSLAVE;\n   unsigned IOCTL_EQL_GETMASTRCFG = EQL_GETMASTRCFG;"}, {"sha": "cba41ba54943d80da7d557ce52e1a3ee36e3946a", "filename": "libsanitizer/sanitizer_common/sanitizer_platform_limits_posix.h", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/745dae5923aba02982563481d75a21595df22ff8/libsanitizer%2Fsanitizer_common%2Fsanitizer_platform_limits_posix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/745dae5923aba02982563481d75a21595df22ff8/libsanitizer%2Fsanitizer_common%2Fsanitizer_platform_limits_posix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fsanitizer_common%2Fsanitizer_platform_limits_posix.h?ref=745dae5923aba02982563481d75a21595df22ff8", "patch": "@@ -983,7 +983,6 @@ extern unsigned struct_vt_mode_sz;\n \n #if SANITIZER_LINUX && !SANITIZER_ANDROID\n extern unsigned struct_ax25_parms_struct_sz;\n-extern unsigned struct_cyclades_monitor_sz;\n extern unsigned struct_input_keymap_entry_sz;\n extern unsigned struct_ipx_config_data_sz;\n extern unsigned struct_kbdiacrs_sz;\n@@ -1328,15 +1327,6 @@ extern unsigned IOCTL_VT_WAITACTIVE;\n #endif  // SANITIZER_LINUX\n \n #if SANITIZER_LINUX && !SANITIZER_ANDROID\n-extern unsigned IOCTL_CYGETDEFTHRESH;\n-extern unsigned IOCTL_CYGETDEFTIMEOUT;\n-extern unsigned IOCTL_CYGETMON;\n-extern unsigned IOCTL_CYGETTHRESH;\n-extern unsigned IOCTL_CYGETTIMEOUT;\n-extern unsigned IOCTL_CYSETDEFTHRESH;\n-extern unsigned IOCTL_CYSETDEFTIMEOUT;\n-extern unsigned IOCTL_CYSETTHRESH;\n-extern unsigned IOCTL_CYSETTIMEOUT;\n extern unsigned IOCTL_EQL_EMANCIPATE;\n extern unsigned IOCTL_EQL_ENSLAVE;\n extern unsigned IOCTL_EQL_GETMASTRCFG;"}]}