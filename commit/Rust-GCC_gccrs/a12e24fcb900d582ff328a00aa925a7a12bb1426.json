{"sha": "a12e24fcb900d582ff328a00aa925a7a12bb1426", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTEyZTI0ZmNiOTAwZDU4MmZmMzI4YTAwYWE5MjVhN2ExMmJiMTQyNg==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1999-08-31T23:59:40Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-08-31T23:59:40Z"}, "message": "c-torture.exp: Avoid the \"compare executables\" optimization when testing native.\n\n        * lib/c-torture.exp: Avoid the \"compare executables\" optimization\n        when testing native.\n\nFrom-SVN: r29018", "tree": {"sha": "1f0c7849d47371cf2d052f3321e70270ca74d688", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f0c7849d47371cf2d052f3321e70270ca74d688"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a12e24fcb900d582ff328a00aa925a7a12bb1426", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a12e24fcb900d582ff328a00aa925a7a12bb1426", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a12e24fcb900d582ff328a00aa925a7a12bb1426", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a12e24fcb900d582ff328a00aa925a7a12bb1426/comments", "author": null, "committer": null, "parents": [{"sha": "61c48fbf260c7b77da7905c7de56b52c255d4da8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61c48fbf260c7b77da7905c7de56b52c255d4da8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61c48fbf260c7b77da7905c7de56b52c255d4da8"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "86d45e8de201432ad57e989fc0768a8ae2068b0a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a12e24fcb900d582ff328a00aa925a7a12bb1426/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a12e24fcb900d582ff328a00aa925a7a12bb1426/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a12e24fcb900d582ff328a00aa925a7a12bb1426", "patch": "@@ -1,3 +1,8 @@\n+Tue Aug 31 17:57:49 1999  Jeffrey A Law  (law@cygnus.com)\n+\n+\t* lib/c-torture.exp: Avoid the \"compare executables\" optimization\n+\twhen testing native.\n+\n Sun Aug 29 14:35:41 1999  Jeffrey A Law  (law@cygnus.com)\n \n \t* gcc.c-torture/execute/990829-1.c: New test."}, {"sha": "0c8aeda6106799bf80f185ffab74bf53a4d2bf97", "filename": "gcc/testsuite/lib/c-torture.exp", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a12e24fcb900d582ff328a00aa925a7a12bb1426/gcc%2Ftestsuite%2Flib%2Fc-torture.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a12e24fcb900d582ff328a00aa925a7a12bb1426/gcc%2Ftestsuite%2Flib%2Fc-torture.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fc-torture.exp?ref=a12e24fcb900d582ff328a00aa925a7a12bb1426", "patch": "@@ -189,8 +189,22 @@ proc c-torture-execute { src args } {\n             set ignore_me [eval $torture_eval_before_execute]\n \t}\n \t\n+\n+\t# Sometimes we end up creating identical executables for two\n+\t# consecutive sets of different of compiler options.\n+\t#\n+\t# In such cases we know the result of this test will be identical\n+\t# to the result of the last test.\n+\t#\n+\t# So in cases where the time to load and run/simulate the test\n+\t# is relatively high, compare the two binaries and avoid rerunning\n+\t# tests if the executables are identical.\n+\t#\n+\t# Do not do this for native testing since the cost to load/execute\n+\t# the test is fairly small and the comparison step actually slows\n+\t# the entire process down because it usually does not \"hit\".\n \tset skip 0;\n-\tif [info exists oldexec] {\n+\tif { ![isnative] && [info exists oldexec] } {\n \t    if { [remote_file build cmp $oldexec $execname] == 0 } {\n \t\tset skip 1;\n \t    }"}]}