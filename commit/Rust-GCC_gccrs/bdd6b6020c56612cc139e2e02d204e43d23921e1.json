{"sha": "bdd6b6020c56612cc139e2e02d204e43d23921e1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmRkNmI2MDIwYzU2NjEyY2MxMzllMmUwMmQyMDRlNDNkMjM5MjFlMQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@markmitchell.com", "date": "1998-08-19T12:37:42Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-08-19T12:37:42Z"}, "message": "old-dejagnu.exp: Revise handling of `Internal compiler error'.\n\n        * lib/old-dejagnu.exp: Revise handling of `Internal compiler\n        error'.\n\nFrom-SVN: r21846", "tree": {"sha": "7a374f5291a0d50f046b6aa3da088b03b0407828", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7a374f5291a0d50f046b6aa3da088b03b0407828"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bdd6b6020c56612cc139e2e02d204e43d23921e1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdd6b6020c56612cc139e2e02d204e43d23921e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bdd6b6020c56612cc139e2e02d204e43d23921e1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdd6b6020c56612cc139e2e02d204e43d23921e1/comments", "author": null, "committer": null, "parents": [{"sha": "41a972a956bca601158002a24e41777972f4e911", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41a972a956bca601158002a24e41777972f4e911", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41a972a956bca601158002a24e41777972f4e911"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "ec9f8302fb643c8d8d5732ffa6827259724ad31d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bdd6b6020c56612cc139e2e02d204e43d23921e1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bdd6b6020c56612cc139e2e02d204e43d23921e1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bdd6b6020c56612cc139e2e02d204e43d23921e1", "patch": "@@ -1,3 +1,8 @@\n+1998-08-09  Mark Mitchell  <mark@markmitchell.com>\n+\n+\t* lib/old-dejagnu.exp: Revise handling of `Internal compiler\n+\terror'.\n+\n Tue Aug 18 19:19:50 1998  Jeffrey A Law  (law@cygnus.com)\n \n \t* gcc.c-torture/execute/*.x: Some updates for the h8300 targets."}, {"sha": "52f9c0cae0a9c40746e5d154d96c36cdcd3c4f02", "filename": "gcc/testsuite/lib/old-dejagnu.exp", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bdd6b6020c56612cc139e2e02d204e43d23921e1/gcc%2Ftestsuite%2Flib%2Fold-dejagnu.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bdd6b6020c56612cc139e2e02d204e43d23921e1/gcc%2Ftestsuite%2Flib%2Fold-dejagnu.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fold-dejagnu.exp?ref=bdd6b6020c56612cc139e2e02d204e43d23921e1", "patch": "@@ -404,6 +404,11 @@ proc old-dejagnu { compiler prog cflagsx default_cflags libs } {\n \tremote_file build delete $output\n \treturn 1\n     }\n+    if [string match \"*Internal compiler error*\" $comp_output] then {\n+        fail \"$name caused compiler crash\"\n+\tremote_file build delete $output\n+\treturn 1\n+    }\n \n     #send_user \"\\nold_dejagnu.exp: comp_output1 = :$comp_output:\\n\\n\"\n     #send_user \"\\nold_dejagnu.exp: message = :$message:\\n\\n\"\n@@ -426,13 +431,7 @@ proc old-dejagnu { compiler prog cflagsx default_cflags libs } {\n \t}\n \tset last_line $line\n \n-\t# If we crashed on this line, all tests fail.\n-\tif [regexp \"(^|\\n)\\[^\\n\\]+:$line: Internal compiler error\\[^\\n\\]*\" $comp_output ] {\n-\t    regsub -all \"(^|\\n)\\[^\\n\\]+:$line:\\[^\\n\\]*\" $comp_output \"\" comp_output\n-            set comp_output [string trimleft $comp_output]\n-\t    set ok fail\n-\t    set uhoh fail\n-\t} elseif [regsub -all \"(^|\\n)\\[^\\n\\]+:$line:\\[^\\n\\]*\" $comp_output \"\" comp_output] {\n+\tif [regsub -all \"(^|\\n)\\[^\\n\\]+:$line:\\[^\\n\\]*\" $comp_output \"\" comp_output] {\n             set comp_output [string trimleft $comp_output]\n \t    set ok pass\n \t    set uhoh fail"}]}