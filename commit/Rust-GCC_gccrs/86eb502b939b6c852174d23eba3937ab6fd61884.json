{"sha": "86eb502b939b6c852174d23eba3937ab6fd61884", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODZlYjUwMmI5MzliNmM4NTIxNzRkMjNlYmEzOTM3YWI2ZmQ2MTg4NA==", "commit": {"author": {"name": "Pat Haugen", "email": "pthaugen@us.ibm.com", "date": "2017-01-19T17:11:34Z"}, "committer": {"name": "Pat Haugen", "email": "pthaugen@gcc.gnu.org", "date": "2017-01-19T17:11:34Z"}, "message": "power9.md (power9-alu): Remove 'cmp' type and add define_bypass for CR latency.\n\n\t* config/rs6000/power9.md (power9-alu): Remove 'cmp' type and add\n\tdefine_bypass for CR latency.\n\t(power9-cracked-alu): Update bypass latency and remove power9-branch.\n\t(power9-alu2): Add define_bypass for CR latency.\n\t(power9-cmp): New.\n\t(power9-mul): Update insn latency.\n\t(power9-mul-compare): Update insn latency, bypass latency and remove\n\tpower9-branch.\n\nFrom-SVN: r244645", "tree": {"sha": "f61269033075e8dd2a27b62065f707f5f6363500", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f61269033075e8dd2a27b62065f707f5f6363500"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/86eb502b939b6c852174d23eba3937ab6fd61884", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86eb502b939b6c852174d23eba3937ab6fd61884", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86eb502b939b6c852174d23eba3937ab6fd61884", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86eb502b939b6c852174d23eba3937ab6fd61884/comments", "author": null, "committer": null, "parents": [{"sha": "16a34ca6acc45a0a2ea48b5a13f5687bbd893713", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16a34ca6acc45a0a2ea48b5a13f5687bbd893713", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16a34ca6acc45a0a2ea48b5a13f5687bbd893713"}], "stats": {"total": 41, "additions": 32, "deletions": 9}, "files": [{"sha": "7d678102285f0f8d5eceb69b8aee3aa227e8ee92", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86eb502b939b6c852174d23eba3937ab6fd61884/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86eb502b939b6c852174d23eba3937ab6fd61884/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=86eb502b939b6c852174d23eba3937ab6fd61884", "patch": "@@ -1,3 +1,14 @@\n+2017-01-19  Pat Haugen  <pthaugen@us.ibm.com>\n+\n+\t* config/rs6000/power9.md (power9-alu): Remove 'cmp' type and add\n+\tdefine_bypass for CR latency.\n+\t(power9-cracked-alu): Update bypass latency and remove power9-branch.\n+\t(power9-alu2): Add define_bypass for CR latency.\n+\t(power9-cmp): New.\n+\t(power9-mul): Update insn latency.\n+\t(power9-mul-compare): Update insn latency, bypass latency and remove\n+\tpower9-branch.\n+\n 2016-01-19  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/aarch64/aarch64-protos.h (aarch64_nopcrelative_literal_loads):"}, {"sha": "217864faaed6f51ee91c904835580a3d5b584e07", "filename": "gcc/config/rs6000/power9.md", "status": "modified", "additions": 21, "deletions": 9, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86eb502b939b6c852174d23eba3937ab6fd61884/gcc%2Fconfig%2Frs6000%2Fpower9.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86eb502b939b6c852174d23eba3937ab6fd61884/gcc%2Fconfig%2Frs6000%2Fpower9.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower9.md?ref=86eb502b939b6c852174d23eba3937ab6fd61884", "patch": "@@ -243,26 +243,38 @@\n \n ; Most ALU insns are simple 2 cycle, including record form\n (define_insn_reservation \"power9-alu\" 2\n-  (and (ior (eq_attr \"type\" \"add,cmp,exts,integer,logical,isel\")\n+  (and (ior (eq_attr \"type\" \"add,exts,integer,logical,isel\")\n \t    (and (eq_attr \"type\" \"insert,shift\")\n \t\t (eq_attr \"dot\" \"no\")))\n        (eq_attr \"cpu\" \"power9\"))\n   \"DU_any_power9,VSU_power9\")\n+; 5 cycle CR latency\n+(define_bypass 5 \"power9-alu\"\n+\t\t \"power9-crlogical,power9-mfcr,power9-mfcrf\")\n \n ; Record form rotate/shift are cracked\n (define_insn_reservation \"power9-cracked-alu\" 2\n   (and (eq_attr \"type\" \"insert,shift\")\n        (eq_attr \"dot\" \"yes\")\n        (eq_attr \"cpu\" \"power9\"))\n   \"DU_C2_power9,VSU_power9\")\n-; 4 cycle CR latency\n-(define_bypass 4 \"power9-cracked-alu\"\n-\t\t \"power9-crlogical,power9-mfcr,power9-mfcrf,power9-branch\")\n+; 7 cycle CR latency\n+(define_bypass 7 \"power9-cracked-alu\"\n+\t\t \"power9-crlogical,power9-mfcr,power9-mfcrf\")\n \n (define_insn_reservation \"power9-alu2\" 3\n   (and (eq_attr \"type\" \"cntlz,popcnt,trap\")\n        (eq_attr \"cpu\" \"power9\"))\n   \"DU_any_power9,VSU_power9\")\n+; 6 cycle CR latency\n+(define_bypass 6 \"power9-alu2\"\n+\t\t \"power9-crlogical,power9-mfcr,power9-mfcrf\")\n+\n+(define_insn_reservation \"power9-cmp\" 2\n+  (and (eq_attr \"type\" \"cmp\")\n+       (eq_attr \"cpu\" \"power9\"))\n+  \"DU_any_power9,VSU_power9\")\n+\n \n ; Treat 'two' and 'three' types as 2 or 3 way cracked\n (define_insn_reservation \"power9-two\" 4\n@@ -275,20 +287,20 @@\n        (eq_attr \"cpu\" \"power9\"))\n   \"DU_C3_power9,VSU_power9\")\n \n-(define_insn_reservation \"power9-mul\" 4\n+(define_insn_reservation \"power9-mul\" 5\n   (and (eq_attr \"type\" \"mul\")\n        (eq_attr \"dot\" \"no\")\n        (eq_attr \"cpu\" \"power9\"))\n   \"DU_any_power9,VSU_power9\")\n \n-(define_insn_reservation \"power9-mul-compare\" 4\n+(define_insn_reservation \"power9-mul-compare\" 5\n   (and (eq_attr \"type\" \"mul\")\n        (eq_attr \"dot\" \"yes\")\n        (eq_attr \"cpu\" \"power9\"))\n   \"DU_C2_power9,VSU_power9\")\n-; 6 cycle CR latency\n-(define_bypass 6 \"power9-mul-compare\"\n-\t\t \"power9-crlogical,power9-mfcr,power9-mfcrf,power9-branch\")\n+; 10 cycle CR latency\n+(define_bypass 10 \"power9-mul-compare\"\n+\t\t \"power9-crlogical,power9-mfcr,power9-mfcrf\")\n \n ; Fixed point divides reserve the divide units for a minimum of 8 cycles\n (define_insn_reservation \"power9-idiv\" 16"}]}