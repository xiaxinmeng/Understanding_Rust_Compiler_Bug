{"sha": "bfccaa6f7006c6f1a56f6b8e4194583e8cddd2f4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmZjY2FhNmY3MDA2YzZmMWE1NmY2YjhlNDE5NDU4M2U4Y2RkZDJmNA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2004-01-21T16:01:26Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2004-01-21T16:01:26Z"}, "message": "crtstuff.c (frame_dummy, [...]): Call _Jv_RegisterClasses through a function pointer.\n\n\t* crtstuff.c (frame_dummy, __do_global_ctors_1): Call\n\t_Jv_RegisterClasses through a function pointer.\n\nFrom-SVN: r76287", "tree": {"sha": "c3b288134c597c606d66497b6e532680dad3420f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3b288134c597c606d66497b6e532680dad3420f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bfccaa6f7006c6f1a56f6b8e4194583e8cddd2f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfccaa6f7006c6f1a56f6b8e4194583e8cddd2f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfccaa6f7006c6f1a56f6b8e4194583e8cddd2f4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfccaa6f7006c6f1a56f6b8e4194583e8cddd2f4/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c3cda381c7dec4b95c20275629acc7194c68a324", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3cda381c7dec4b95c20275629acc7194c68a324", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3cda381c7dec4b95c20275629acc7194c68a324"}], "stats": {"total": 23, "additions": 19, "deletions": 4}, "files": [{"sha": "67a1f8e96a87b119e4e6c65cc7544abb2d927ff8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfccaa6f7006c6f1a56f6b8e4194583e8cddd2f4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfccaa6f7006c6f1a56f6b8e4194583e8cddd2f4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bfccaa6f7006c6f1a56f6b8e4194583e8cddd2f4", "patch": "@@ -1,3 +1,8 @@\n+2004-01-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* crtstuff.c (frame_dummy, __do_global_ctors_1): Call\n+\t_Jv_RegisterClasses through a function pointer.\n+\n 2004-01-21  Falk Hueffner  <falk@debian.org>\n \n \tPR target/12898"}, {"sha": "c4dbbfc95f78f8ba7c11e00dea76d785e2af8891", "filename": "gcc/crtstuff.c", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfccaa6f7006c6f1a56f6b8e4194583e8cddd2f4/gcc%2Fcrtstuff.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfccaa6f7006c6f1a56f6b8e4194583e8cddd2f4/gcc%2Fcrtstuff.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcrtstuff.c?ref=bfccaa6f7006c6f1a56f6b8e4194583e8cddd2f4", "patch": "@@ -312,8 +312,13 @@ frame_dummy (void)\n #endif /* CRT_GET_RFIB_DATA */\n #endif /* USE_EH_FRAME_REGISTRY */\n #ifdef JCR_SECTION_NAME\n-  if (__JCR_LIST__[0] && _Jv_RegisterClasses)\n-    _Jv_RegisterClasses (__JCR_LIST__);\n+  if (__JCR_LIST__[0])\n+    {\n+      void (*register_classes) (void *) = _Jv_RegisterClasses;\n+      __asm (\"\" : \"+r\" (register_classes));\n+      if (register_classes)\n+\tregister_classes (__JCR_LIST__);\n+    }\n #endif /* JCR_SECTION_NAME */\n }\n \n@@ -395,8 +400,13 @@ __do_global_ctors_1(void)\n     __register_frame_info (__EH_FRAME_BEGIN__, &object);\n #endif\n #ifdef JCR_SECTION_NAME\n-  if (__JCR_LIST__[0] && _Jv_RegisterClasses)\n-    _Jv_RegisterClasses (__JCR_LIST__);\n+  if (__JCR_LIST__[0])\n+    {\n+      void (*register_classes) (void *) = _Jv_RegisterClasses;\n+      __asm (\"\" : \"+r\" (register_classes));\n+      if (register_classes)\n+\tregister_classes (__JCR_LIST__);\n+    }\n #endif\n }\n #endif /* USE_EH_FRAME_REGISTRY || JCR_SECTION_NAME */"}]}