{"sha": "163d9996179cb12fb53a3f0d6f2a9447ea1c4303", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTYzZDk5OTYxNzljYjEyZmI1M2EzZjBkNmYyYTk0NDdlYTFjNDMwMw==", "commit": {"author": {"name": "Kresten Krab Thorup", "email": "krab@gcc.gnu.org", "date": "1993-09-22T17:45:18Z"}, "committer": {"name": "Kresten Krab Thorup", "email": "krab@gcc.gnu.org", "date": "1993-09-22T17:45:18Z"}, "message": "(INITIALIZE_TRAMPOLINE): Append call to __enable_execute_stack.\n\n(INITIALIZE_TRAMPOLINE): Append call to\n__enable_execute_stack.\n(CLEAR_INSN_CACHE): New macro.\n\nFrom-SVN: r5395", "tree": {"sha": "d9d1e676951c3002b1fe1f0e0eca43589ebd9ead", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d9d1e676951c3002b1fe1f0e0eca43589ebd9ead"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/163d9996179cb12fb53a3f0d6f2a9447ea1c4303", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/163d9996179cb12fb53a3f0d6f2a9447ea1c4303", "html_url": "https://github.com/Rust-GCC/gccrs/commit/163d9996179cb12fb53a3f0d6f2a9447ea1c4303", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/163d9996179cb12fb53a3f0d6f2a9447ea1c4303/comments", "author": null, "committer": null, "parents": [{"sha": "c1381fd35793cbfdac84f74fe09179db5581c256", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1381fd35793cbfdac84f74fe09179db5581c256", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1381fd35793cbfdac84f74fe09179db5581c256"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "55891b403a94de7aa29ab2f51cfaaf7ddbe09b8c", "filename": "gcc/config/m68k/next.h", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/163d9996179cb12fb53a3f0d6f2a9447ea1c4303/gcc%2Fconfig%2Fm68k%2Fnext.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/163d9996179cb12fb53a3f0d6f2a9447ea1c4303/gcc%2Fconfig%2Fm68k%2Fnext.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fnext.h?ref=163d9996179cb12fb53a3f0d6f2a9447ea1c4303", "patch": "@@ -181,3 +181,26 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n #define OBJC_FORWARDING_STACK_OFFSET 8\n #define OBJC_FORWARDING_MIN_OFFSET 8\n+\n+/* INITIALIZE_TRAMPOLINE is changed so that it also enables executable\n+   stack.  The __enable_execute_stack also clears the insn cache. */\n+\n+/* NOTE: part of this is copied from m68k.h */\n+#undef INITIALIZE_TRAMPOLINE\n+#define INITIALIZE_TRAMPOLINE(TRAMP, FNADDR, CXT)                          \\\n+{                                                                          \\\n+  rtx _addr, _func;                                                        \\\n+  emit_move_insn (gen_rtx (MEM, SImode, plus_constant (TRAMP, 2)), TRAMP);   \\\n+  emit_move_insn (gen_rtx (MEM, SImode, plus_constant (TRAMP, 18)), CXT);    \\\n+  emit_move_insn (gen_rtx (MEM, SImode, plus_constant (TRAMP, 22)), FNADDR); \\\n+  _addr = memory_address (SImode, (TRAMP));                                  \\\n+  _func =  gen_rtx (SYMBOL_REF, Pmode, \"__enable_execute_stack\");          \\\n+  emit_library_call (_func, 0, VOIDmode, 1, _addr, Pmode);                   \\\n+}\n+\n+/* A C expression used to clear the instruction cache from \n+   address BEG to address END.   On NeXTSTEP this i a system trap. */\n+\n+#define CLEAR_INSN_CACHE(BEG, END)   \\\n+   asm volatile (\"trap #2\")\n+"}]}