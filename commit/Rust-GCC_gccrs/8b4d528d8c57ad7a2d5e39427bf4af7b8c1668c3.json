{"sha": "8b4d528d8c57ad7a2d5e39427bf4af7b8c1668c3", "node_id": "C_kwDOANBUbNoAKDhiNGQ1MjhkOGM1N2FkN2EyZDVlMzk0MjdiZjRhZjdiOGMxNjY4YzM", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-08-25T14:27:12Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-08-26T06:23:50Z"}, "message": "Improve uninit_analysis::collect_phi_def_edges\n\nThis avoids expanding an edge to those of a PHI def if it is not\nmay-undefined, reducing the number of compute_control_dep_chain calls.\n\n\t* gimple-predicate-analysis.cc\n\t(uninit_analysis::collect_phi_def_edges): Only expand a\n\tPHI def edge when it is possibly undefined.", "tree": {"sha": "80b019eafb2699382dd7350f7b9ace146e416556", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/80b019eafb2699382dd7350f7b9ace146e416556"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b4d528d8c57ad7a2d5e39427bf4af7b8c1668c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b4d528d8c57ad7a2d5e39427bf4af7b8c1668c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b4d528d8c57ad7a2d5e39427bf4af7b8c1668c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b4d528d8c57ad7a2d5e39427bf4af7b8c1668c3/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eb6358247a9386db2828450477d86064f213e0a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb6358247a9386db2828450477d86064f213e0a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb6358247a9386db2828450477d86064f213e0a8"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "0d973a9e25a0d62468e6e47cb7c78c0b6f9cb22c", "filename": "gcc/gimple-predicate-analysis.cc", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b4d528d8c57ad7a2d5e39427bf4af7b8c1668c3/gcc%2Fgimple-predicate-analysis.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b4d528d8c57ad7a2d5e39427bf4af7b8c1668c3/gcc%2Fgimple-predicate-analysis.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-predicate-analysis.cc?ref=8b4d528d8c57ad7a2d5e39427bf4af7b8c1668c3", "patch": "@@ -605,11 +605,7 @@ uninit_analysis::collect_phi_def_edges (gphi *phi, basic_block cd_root,\n \t{\n \t  gimple *def = SSA_NAME_DEF_STMT (opnd);\n \n-\t  if (gimple_code (def) == GIMPLE_PHI\n-\t      && dominated_by_p (CDI_DOMINATORS, gimple_bb (def), cd_root))\n-\t    collect_phi_def_edges (as_a<gphi *> (def), cd_root, edges,\n-\t\t\t\t   visited);\n-\t  else if (!m_eval (opnd))\n+\t  if (!m_eval (opnd))\n \t    {\n \t      if (dump_file && (dump_flags & TDF_DETAILS))\n \t\t{\n@@ -622,6 +618,10 @@ uninit_analysis::collect_phi_def_edges (gphi *phi, basic_block cd_root,\n \t\t}\n \t      edges->safe_push (opnd_edge);\n \t    }\n+\t  else if (gimple_code (def) == GIMPLE_PHI\n+\t\t   && dominated_by_p (CDI_DOMINATORS, gimple_bb (def), cd_root))\n+\t    collect_phi_def_edges (as_a<gphi *> (def), cd_root, edges,\n+\t\t\t\t   visited);\n \t}\n       else\n \t{"}]}