{"sha": "a22e33d04a2cb3c3501cd93d6273190f635206dd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTIyZTMzZDA0YTJjYjNjMzUwMWNkOTNkNjI3MzE5MGY2MzUyMDZkZA==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2015-05-12T16:23:29Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2015-05-12T16:23:29Z"}, "message": "check_GNU_style.sh: Put stdin into temp file\n\n2015-05-12  Tom de Vries  <tom@codesourcery.com>\n\n\t* check_GNU_style.sh: Put stdin into a temp file.\n\nFrom-SVN: r223087", "tree": {"sha": "e91ecd949e4050990c4b6222c9f809f07bd44b68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e91ecd949e4050990c4b6222c9f809f07bd44b68"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a22e33d04a2cb3c3501cd93d6273190f635206dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a22e33d04a2cb3c3501cd93d6273190f635206dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a22e33d04a2cb3c3501cd93d6273190f635206dd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a22e33d04a2cb3c3501cd93d6273190f635206dd/comments", "author": null, "committer": null, "parents": [{"sha": "7f167be6acfb2114b23adabe91e489a2d651eefe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f167be6acfb2114b23adabe91e489a2d651eefe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f167be6acfb2114b23adabe91e489a2d651eefe"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "97941f77f007496d575e609f71dc12d3c5724707", "filename": "contrib/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a22e33d04a2cb3c3501cd93d6273190f635206dd/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a22e33d04a2cb3c3501cd93d6273190f635206dd/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=a22e33d04a2cb3c3501cd93d6273190f635206dd", "patch": "@@ -1,3 +1,7 @@\n+2015-05-12  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* check_GNU_style.sh: Put stdin into a temp file.\n+\n 2015-05-12  Tom de Vries  <tom@codesourcery.com>\n \n \t* check_GNU_style.sh: Read either from stdin, or from files."}, {"sha": "318eb6adca5c776643da7f8b39e5db34f49e58cf", "filename": "contrib/check_GNU_style.sh", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a22e33d04a2cb3c3501cd93d6273190f635206dd/contrib%2Fcheck_GNU_style.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a22e33d04a2cb3c3501cd93d6273190f635206dd/contrib%2Fcheck_GNU_style.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fcheck_GNU_style.sh?ref=a22e33d04a2cb3c3501cd93d6273190f635206dd", "patch": "@@ -40,8 +40,15 @@ nfiles=$#\n files=\"$*\"\n \n stdin=false\n+stdin_tmp=\"\"\n if [ $nfiles -eq 1 ] && [ \"$files\" = \"-\" ]; then\n     stdin=true\n+\n+    # By putting stdin into a temp file, we can handle it just like any other\n+    # file.  F.i., we can cat it twice, which we can't do with stdin.\n+    stdin_tmp=check_GNU_style.stdin\n+    cat - > $stdin_tmp\n+    files=$stdin_tmp\n else\n     for f in $files; do\n \tif [ \"$f\" = \"-\" ]; then\n@@ -60,8 +67,8 @@ inp=check_GNU_style.inp\n tmp=check_GNU_style.tmp\n \n # Remove $tmp on exit and various signals.\n-trap \"rm -f $inp $tmp\" 0\n-trap \"rm -f $inp $tmp ; exit 1\" 1 2 3 5 9 13 15\n+trap \"rm -f $inp $tmp $stdin_tmp\" 0\n+trap \"rm -f $inp $tmp $stdin_tmp; exit 1\" 1 2 3 5 9 13 15\n \n if [ $nfiles -eq 1 ]; then\n     # There's no need for the file prefix if we're dealing only with one file."}]}