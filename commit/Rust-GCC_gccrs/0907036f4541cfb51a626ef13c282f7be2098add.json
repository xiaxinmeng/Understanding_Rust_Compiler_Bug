{"sha": "0907036f4541cfb51a626ef13c282f7be2098add", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDkwNzAzNmY0NTQxY2ZiNTFhNjI2ZWYxM2MyODJmN2JlMjA5OGFkZA==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-03-27T01:31:45Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-03-28T12:47:36Z"}, "message": "d: Define language hook for LANG_HOOKS_ENUM_UNDERLYING_BASE_TYPE\n\nThe underlying base type for enumerals are always present in TREE_TYPE.\n\ngcc/d/ChangeLog:\n\n\t* d-lang.cc (d_enum_underlying_base_type): New function.\n\t(LANG_HOOKS_ENUM_UNDERLYING_BASE_TYPE): Set as\n\td_enum_underlying_base_type.", "tree": {"sha": "dd88de4608d0e62ae4570af34b2fa7c2f64d6993", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dd88de4608d0e62ae4570af34b2fa7c2f64d6993"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0907036f4541cfb51a626ef13c282f7be2098add", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0907036f4541cfb51a626ef13c282f7be2098add", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0907036f4541cfb51a626ef13c282f7be2098add", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0907036f4541cfb51a626ef13c282f7be2098add/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d3ae0f515d0c675d42f4f18fc267e8e75f6b6f26", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3ae0f515d0c675d42f4f18fc267e8e75f6b6f26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3ae0f515d0c675d42f4f18fc267e8e75f6b6f26"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "5028698a5bc7f96f22a596e818cf1933d10a4d6e", "filename": "gcc/d/d-lang.cc", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0907036f4541cfb51a626ef13c282f7be2098add/gcc%2Fd%2Fd-lang.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0907036f4541cfb51a626ef13c282f7be2098add/gcc%2Fd%2Fd-lang.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fd-lang.cc?ref=0907036f4541cfb51a626ef13c282f7be2098add", "patch": "@@ -1719,6 +1719,16 @@ d_build_eh_runtime_type (tree type)\n   return convert (ptr_type_node, build_address (decl));\n }\n \n+/* Implements the lang_hooks.enum_underlying_base_type routine for language D.\n+   Returns the underlying type of the given enumeration TYPE.  */\n+\n+static tree\n+d_enum_underlying_base_type (const_tree type)\n+{\n+  gcc_assert (TREE_CODE (type) == ENUMERAL_TYPE);\n+  return TREE_TYPE (type);\n+}\n+\n /* Definitions for our language-specific hooks.  */\n \n #undef LANG_HOOKS_NAME\n@@ -1744,6 +1754,7 @@ d_build_eh_runtime_type (tree type)\n #undef LANG_HOOKS_DUP_LANG_SPECIFIC_DECL\n #undef LANG_HOOKS_EH_PERSONALITY\n #undef LANG_HOOKS_EH_RUNTIME_TYPE\n+#undef LANG_HOOKS_ENUM_UNDERLYING_BASE_TYPE\n #undef LANG_HOOKS_PUSHDECL\n #undef LANG_HOOKS_GETDECLS\n #undef LANG_HOOKS_GLOBAL_BINDINGS_P\n@@ -1774,6 +1785,7 @@ d_build_eh_runtime_type (tree type)\n #define LANG_HOOKS_DUP_LANG_SPECIFIC_DECL   d_dup_lang_specific_decl\n #define LANG_HOOKS_EH_PERSONALITY\t    d_eh_personality\n #define LANG_HOOKS_EH_RUNTIME_TYPE\t    d_build_eh_runtime_type\n+#define LANG_HOOKS_ENUM_UNDERLYING_BASE_TYPE d_enum_underlying_base_type\n #define LANG_HOOKS_PUSHDECL\t\t    d_pushdecl\n #define LANG_HOOKS_GETDECLS\t\t    d_getdecls\n #define LANG_HOOKS_GLOBAL_BINDINGS_P\t    d_global_bindings_p"}]}