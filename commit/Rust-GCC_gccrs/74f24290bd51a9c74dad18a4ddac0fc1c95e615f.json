{"sha": "74f24290bd51a9c74dad18a4ddac0fc1c95e615f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzRmMjQyOTBiZDUxYTljNzRkYWQxOGE0ZGRhYzBmYzFjOTVlNjE1Zg==", "commit": {"author": {"name": "Joern Rennecke", "email": "amylaar@spamcop.net", "date": "2010-01-20T09:35:05Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2010-01-20T09:35:05Z"}, "message": "jcf-parse.c (set_source_filename): Constify variable \"dot\".\n\n\t* jcf-parse.c (set_source_filename): Constify variable \"dot\".\n\t(load_class): Constify variable \"separator\".\n\tUse get_identifier_with_length.\n\nFrom-SVN: r156066", "tree": {"sha": "c4f04073804a005f9ab98f0ea31103b218702ef7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4f04073804a005f9ab98f0ea31103b218702ef7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/74f24290bd51a9c74dad18a4ddac0fc1c95e615f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74f24290bd51a9c74dad18a4ddac0fc1c95e615f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74f24290bd51a9c74dad18a4ddac0fc1c95e615f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74f24290bd51a9c74dad18a4ddac0fc1c95e615f/comments", "author": null, "committer": null, "parents": [{"sha": "c24ea6672d894964cb79e3bf6ea5f4804e7a621d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c24ea6672d894964cb79e3bf6ea5f4804e7a621d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c24ea6672d894964cb79e3bf6ea5f4804e7a621d"}], "stats": {"total": 17, "additions": 9, "deletions": 8}, "files": [{"sha": "f96be0946c3d986eb401af05c97c60cb92c0ea28", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74f24290bd51a9c74dad18a4ddac0fc1c95e615f/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74f24290bd51a9c74dad18a4ddac0fc1c95e615f/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=74f24290bd51a9c74dad18a4ddac0fc1c95e615f", "patch": "@@ -2,6 +2,10 @@\n \n \t* lang.c (java_post_options): Constify variable \"dot\".\n \n+\t* jcf-parse.c (set_source_filename): Constify variable \"dot\".\n+\t(load_class): Constify variable \"separator\".\n+\tUse get_identifier_with_length.\n+\n 2010-01-09  Jakub Jelinek  <jakub@redhat.com>\n \n \t* jcf-dump.c (version): Update copyright notice dates."}, {"sha": "2fe97bc6b46fd68c4bf1e635e55ae402a9369746", "filename": "gcc/java/jcf-parse.c", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74f24290bd51a9c74dad18a4ddac0fc1c95e615f/gcc%2Fjava%2Fjcf-parse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74f24290bd51a9c74dad18a4ddac0fc1c95e615f/gcc%2Fjava%2Fjcf-parse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-parse.c?ref=74f24290bd51a9c74dad18a4ddac0fc1c95e615f", "patch": "@@ -333,7 +333,7 @@ set_source_filename (JCF *jcf, int index)\n     {\n       const char *class_name\n \t= IDENTIFIER_POINTER (DECL_NAME (TYPE_NAME (current_class)));\n-      char *dot = strrchr (class_name, '.');\n+      const char *dot = strrchr (class_name, '.');\n       if (dot != NULL)\n \t{\n \t  /* Length of prefix, not counting final dot. */\n@@ -1355,7 +1355,7 @@ load_class (tree class_or_name, int verbose)\n     {\n       while (1)\n \t{\n-\t  char *separator;\n+\t  const char *separator;\n \n \t  /* We've already loaded it.  */\n \t  if (IDENTIFIER_CLASS_VALUE (name) != NULL_TREE)\n@@ -1372,12 +1372,9 @@ load_class (tree class_or_name, int verbose)\n \t     for an inner class.  */\n \t  if ((separator = strrchr (IDENTIFIER_POINTER (name), '$'))\n \t      || (separator = strrchr (IDENTIFIER_POINTER (name), '.')))\n-\t    {\n-\t      int c = *separator;\n-\t      *separator = '\\0';\n-\t      name = get_identifier (IDENTIFIER_POINTER (name));\n-\t      *separator = c;\n-\t    }\n+\t    name = get_identifier_with_length (IDENTIFIER_POINTER (name),\n+\t\t\t\t\t       (separator\n+\t\t\t\t\t\t- IDENTIFIER_POINTER (name)));\n \t  /* Otherwise, we failed, we bail. */\n \t  else\n \t    break;"}]}