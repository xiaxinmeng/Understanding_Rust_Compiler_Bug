{"sha": "800914c30a3ef354012ba5a62198805bd93ffeb6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODAwOTE0YzMwYTNlZjM1NDAxMmJhNWE2MjE5ODgwNWJkOTNmZmViNg==", "commit": {"author": {"name": "Neil Booth", "email": "neil@daikokuya.demon.co.uk", "date": "2001-05-12T16:02:01Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2001-05-12T16:02:01Z"}, "message": "cpplex.c (_cpp_lex_token): Ensure we warn at most once about files not ending in newlines.\n\n\t* cpplex.c (_cpp_lex_token): Ensure we warn at most once\n\tabout files not ending in newlines.\n\nFrom-SVN: r41995", "tree": {"sha": "5a593867c76d9d158e8ab7cbc62bc92192f8001d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a593867c76d9d158e8ab7cbc62bc92192f8001d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/800914c30a3ef354012ba5a62198805bd93ffeb6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/800914c30a3ef354012ba5a62198805bd93ffeb6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/800914c30a3ef354012ba5a62198805bd93ffeb6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/800914c30a3ef354012ba5a62198805bd93ffeb6/comments", "author": null, "committer": null, "parents": [{"sha": "92928d71f458ce1dc148ef2f34a9ae11df088c1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92928d71f458ce1dc148ef2f34a9ae11df088c1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92928d71f458ce1dc148ef2f34a9ae11df088c1a"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "1839c19c896f172d118bc8c388eaced8151e1ce8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/800914c30a3ef354012ba5a62198805bd93ffeb6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/800914c30a3ef354012ba5a62198805bd93ffeb6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=800914c30a3ef354012ba5a62198805bd93ffeb6", "patch": "@@ -1,3 +1,8 @@\n+2001-05-12  Neil Booth  <neil@daikokuya.demon.co.uk>\n+\n+\t* cpplex.c (_cpp_lex_token): Ensure we warn at most once\n+\tabout files not ending in newlines.\n+\n 2001-05-12  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* config/arm/arm.h (TARGET_PTRMEMFUNC_VBIT_LOCATION): Use delta."}, {"sha": "f25913f20981828ba93a8e93c4c0e3588dc9a5c6", "filename": "gcc/cpplex.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/800914c30a3ef354012ba5a62198805bd93ffeb6/gcc%2Fcpplex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/800914c30a3ef354012ba5a62198805bd93ffeb6/gcc%2Fcpplex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplex.c?ref=800914c30a3ef354012ba5a62198805bd93ffeb6", "patch": "@@ -890,9 +890,11 @@ _cpp_lex_token (pfile, result)\n   switch (c)\n     {\n     case EOF:\n-      /* Non-empty files should end in a newline.  Ignore for command\n-\t line and _Pragma buffers.  */\n-      if (pfile->lexer_pos.col != 0 && !buffer->from_stage3)\n+      /* Non-empty files should end in a newline.  Checking \"bol\" too\n+\t  prevents multiple warnings when hitting the EOF more than\n+\t  once, like in a directive.  Don't warn for command line and\n+\t  _Pragma buffers.  */\n+      if (pfile->lexer_pos.col != 0 && !bol && !buffer->from_stage3)\n \tcpp_pedwarn (pfile, \"no newline at end of file\");\n       pfile->state.next_bol = 1;\n       pfile->skipping = 0;\t/* In case missing #endif.  */"}]}