{"sha": "bc0c7f396b0c9648365aee462e25107db00227e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmMwYzdmMzk2YjBjOTY0ODM2NWFlZTQ2MmUyNTEwN2RiMDAyMjdlOA==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2015-05-24T14:55:50Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2015-05-24T14:55:50Z"}, "message": "re PR fortran/66257 (ELEMENTAL procedure pointer component XX is not allowed as an actual argument)\n\n\tPR fortran/66257\ngcc/fortran/\n\t* resolve.c (resolve_actual_arglist): Don't throw an error\n\tif the argument with procedure pointer component is not a variable.\ngcc/testsuite/\n\t* typebound_call_27.f90: New file.\n\nFrom-SVN: r223631", "tree": {"sha": "c644ad2ddb4bd4d235ee54821e1e4f3eb62d84b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c644ad2ddb4bd4d235ee54821e1e4f3eb62d84b9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc0c7f396b0c9648365aee462e25107db00227e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc0c7f396b0c9648365aee462e25107db00227e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc0c7f396b0c9648365aee462e25107db00227e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc0c7f396b0c9648365aee462e25107db00227e8/comments", "author": null, "committer": null, "parents": [{"sha": "70e7f2a2df3f167c71b1a84ffb865c9a8e2610e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70e7f2a2df3f167c71b1a84ffb865c9a8e2610e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70e7f2a2df3f167c71b1a84ffb865c9a8e2610e1"}], "stats": {"total": 55, "additions": 54, "deletions": 1}, "files": [{"sha": "bc623c4dbdea8e27fb0c344dcd7fcf4bbc89f9d8", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc0c7f396b0c9648365aee462e25107db00227e8/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc0c7f396b0c9648365aee462e25107db00227e8/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=bc0c7f396b0c9648365aee462e25107db00227e8", "patch": "@@ -1,3 +1,9 @@\n+2015-05-24  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\tPR fortran/66257\n+\t* resolve.c (resolve_actual_arglist): Don't throw an error\n+\tif the argument with procedure pointer component is not a variable.\n+\n 2015-05-24  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR fortran/44054"}, {"sha": "e615cc6dfb24634b1c2136b6edf52d65bd28e33d", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc0c7f396b0c9648365aee462e25107db00227e8/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc0c7f396b0c9648365aee462e25107db00227e8/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=bc0c7f396b0c9648365aee462e25107db00227e8", "patch": "@@ -1981,7 +1981,8 @@ resolve_actual_arglist (gfc_actual_arglist *arg, procedure_type ptype,\n \t}\n \n       comp = gfc_get_proc_ptr_comp(e);\n-      if (comp && comp->attr.elemental)\n+      if (e->expr_type == EXPR_VARIABLE\n+\t  && comp && comp->attr.elemental)\n \t{\n \t    gfc_error (\"ELEMENTAL procedure pointer component %qs is not \"\n \t\t       \"allowed as an actual argument at %L\", comp->name,"}, {"sha": "41a478d4dea842e6ede68a31a00e7c5d29c3eef0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc0c7f396b0c9648365aee462e25107db00227e8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc0c7f396b0c9648365aee462e25107db00227e8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bc0c7f396b0c9648365aee462e25107db00227e8", "patch": "@@ -1,3 +1,8 @@\n+2015-05-24  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\tPR fortran/66257\n+\t* typebound_call_27.f90: New file.\n+\n 2015-05-23  Nathan Sidwell  <nathan@acm.org>\n \n \tPR c++/65936"}, {"sha": "f183ebb71557a53b98fd5a8c74d92c462d15812b", "filename": "gcc/testsuite/gfortran.dg/typebound_call_27.f90", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc0c7f396b0c9648365aee462e25107db00227e8/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_call_27.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc0c7f396b0c9648365aee462e25107db00227e8/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_call_27.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_call_27.f90?ref=bc0c7f396b0c9648365aee462e25107db00227e8", "patch": "@@ -0,0 +1,41 @@\n+! { dg-do compile }\n+!\n+! PR fortran/66257\n+! Check that typebound function calls are accepted as actual argument.\n+!\n+MODULE test_class\n+  IMPLICIT NONE\n+  PRIVATE\n+  PUBLIC:: test\n+\n+  INTEGER, PARAMETER :: dp  = SELECTED_REAL_KIND(15)\n+\n+  TYPE test\n+      PRIVATE\n+      CONTAINS\n+          PRIVATE\n+              PROCEDURE, PUBLIC:: E\n+              PROCEDURE, PUBLIC:: Om\n+  END TYPE test\n+\n+CONTAINS\n+\n+  ELEMENTAL FUNCTION E (self, a)\n+    IMPLICIT NONE\n+    CLASS(test), INTENT(IN):: self\n+    REAL(kind=dp), INTENT(IN):: a\n+    REAL(kind=dp):: E\n+\n+    E = a\n+  END FUNCTION E\n+\n+  ELEMENTAL FUNCTION Om (self, z)\n+    IMPLICIT NONE\n+    CLASS(test), INTENT(IN):: self\n+    REAL(kind=dp), INTENT(IN):: z\n+    REAL(kind=dp):: Om\n+\n+    Om = self%E(self%E(z))\n+    Om = log10(self%E(z))\n+  END FUNCTION Om\n+END MODULE test_class"}]}