{"sha": "e571db989674b7f597538c6de59937523b28a9b4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTU3MWRiOTg5Njc0YjdmNTk3NTM4YzZkZTU5OTM3NTIzYjI4YTliNA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1995-03-03T17:10:48Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1995-03-03T17:10:48Z"}, "message": "Patch some VxWorks header files\n\nFrom-SVN: r9120", "tree": {"sha": "73e481a8a40522280e22dbeec0db0002be1d9c18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/73e481a8a40522280e22dbeec0db0002be1d9c18"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e571db989674b7f597538c6de59937523b28a9b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e571db989674b7f597538c6de59937523b28a9b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e571db989674b7f597538c6de59937523b28a9b4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e571db989674b7f597538c6de59937523b28a9b4/comments", "author": null, "committer": null, "parents": [{"sha": "03285371a38a9b0a84362f040e85b8ae1bbd2ebc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03285371a38a9b0a84362f040e85b8ae1bbd2ebc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03285371a38a9b0a84362f040e85b8ae1bbd2ebc"}], "stats": {"total": 131, "additions": 131, "deletions": 0}, "files": [{"sha": "f0af1b58c9433df11a5efa628ea1b21216b9ecd0", "filename": "gcc/fixincludes", "status": "modified", "additions": 131, "deletions": 0, "changes": 131, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e571db989674b7f597538c6de59937523b28a9b4/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e571db989674b7f597538c6de59937523b28a9b4/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=e571db989674b7f597538c6de59937523b28a9b4", "patch": "@@ -2227,6 +2227,137 @@ if [ -r ${LIB}/$file ]; then\n   fi\n fi\n \n+# Fix definitions of macros used by va-i960.h in VxWorks header file.\n+file=arch/i960/archI960.h\n+if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+  chmod +w ${LIB}/$file 2>/dev/null\n+  chmod a+r ${LIB}/$file 2>/dev/null\n+fi\n+\n+if [ -r ${LIB}/$file ]; then\n+  echo Fixing $file\n+  sed -e 's/__vsiz/__vxvsiz/' -e 's/__vali/__vxvali/' \\\n+      -e s'/__vpad/__vxvpad/' -e 's/__alignof__/__vxalignof__/' \\\n+    ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+    rm -f ${LIB}/$file\n+  else\n+    # Find any include directives that use \"file\".\n+    for include in `egrep '^[       ]*#[    ]*include[      ]*\"[^/]' ${LIB}/$file | sed -e 's/^[    ]*#[    ]*include[      ]*\"\\([^\"]*\\)\".*$/\\1/'`; do\n+      dir=`echo $file | sed -e s'|/[^/]*$||'`\n+      required=\"$required ${INPUT} $dir/$include ${LIB}/$dir/$include\"\n+    done\n+  fi\n+fi\n+\n+# Make VxWorks header which is almost gcc ready fully gcc ready.\n+file=types/vxTypesBase.h\n+if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+  chmod +w ${LIB}/$file 2>/dev/null\n+  chmod a+r ${LIB}/$file 2>/dev/null\n+fi\n+\n+if [ -r ${LIB}/$file ]; then\n+  echo Fixing $file\n+  sed -e 's/#ifdef __GNUC_TYPEOF_FEATURE_BROKEN_USE_DEFAULT_UNTIL_FIXED__/#if 1/' \\\n+      -e '/[ \t]size_t/i\\\n+#ifndef _GCC_SIZE_T\\\n+#define _GCC_SIZE_T\n+' \\\n+      -e '/[ \t]size_t/a\\\n+#endif\n+' \\\n+      -e '/[ \t]ptrdiff_t/i\\\n+#ifndef _GCC_PTRDIFF_T\\\n+#define _GCC_PTRDIFF_T\n+' \\\n+      -e '/[ \t]ptrdiff_t/a\\\n+#endif\n+' \\\n+      -e '/[ \t]wchar_t/i\\\n+#ifndef _GCC_WCHAR_T\\\n+#define _GCC_WCHAR_T\n+' \\\n+      -e '/[ \t]wchar_t/a\\\n+#endif\n+' \\\n+    ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+    rm -f ${LIB}/$file\n+  else\n+    # Find any include directives that use \"file\".\n+    for include in `egrep '^[       ]*#[    ]*include[      ]*\"[^/]' ${LIB}/$file | sed -e 's/^[    ]*#[    ]*include[      ]*\"\\([^\"]*\\)\".*$/\\1/'`; do\n+      dir=`echo $file | sed -e s'|/[^/]*$||'`\n+      required=\"$required ${INPUT} $dir/$include ${LIB}/$dir/$include\"\n+    done\n+  fi\n+fi\n+\n+# Fix VxWorks <sys/stat.h> to not require including <vxWorks.h>.\n+file=sys/stat.h\n+if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+  mkdir ${LIB}/sys 2>/dev/null\n+  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+  chmod +w ${LIB}/$file 2>/dev/null\n+  chmod a+r ${LIB}/$file 2>/dev/null\n+fi\n+\n+if [ -r ${LIB}/$file ]; then\n+  if egrep '#include' ${LIB}/$file >/dev/null 2>&1; then\n+    :\n+  else\n+    if egrep 'ULONG' ${LIB}/$file >/dev/null 2>&1 \\\n+       && [ -r types/vxTypesOld.h ]; then\n+      echo Fixing $file\n+      sed -e '/#define[ \t][ \t]*__INCstath/a\\\n+#include <types/vxTypesOld.h>\n+' \\\n+    ${LIB}/$file > ${LIB}/${file}.sed\n+      rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+    fi\n+  fi\n+  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+    rm -f ${LIB}/$file\n+  else\n+    # Find any include directives that use \"file\".\n+    for include in `egrep '^[       ]*#[    ]*include[      ]*\"[^/]' ${LIB}/$file | sed -e 's/^[    ]*#[    ]*include[      ]*\"\\([^\"]*\\)\".*$/\\1/'`; do\n+      dir=`echo $file | sed -e s'|/[^/]*$||'`\n+      required=\"$required ${INPUT} $dir/$include ${LIB}/$dir/$include\"\n+    done\n+  fi\n+fi\n+\n+# Fix VxWorks <time.h> to not require including <vxTypes.h>.\n+file=time.h\n+if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+  mkdir ${LIB}/sys 2>/dev/null\n+  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+  chmod +w ${LIB}/$file 2>/dev/null\n+  chmod a+r ${LIB}/$file 2>/dev/null\n+fi\n+\n+if [ -r ${LIB}/$file ]; then\n+  if egrep 'uint_t[ \t][ \t]*_clocks_per_sec' ${LIB}/$file >/dev/null 2>&1; then\n+    echo Fixing $file\n+    sed -e 's/uint_t/unsigned int/' ${LIB}/$file > ${LIB}/${file}.sed\n+    rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+  fi\n+  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+    rm -f ${LIB}/$file\n+  else\n+    # Find any include directives that use \"file\".\n+    for include in `egrep '^[       ]*#[    ]*include[      ]*\"[^/]' ${LIB}/$file | sed -e 's/^[    ]*#[    ]*include[      ]*\"\\([^\"]*\\)\".*$/\\1/'`; do\n+      dir=`echo $file | sed -e s'|/[^/]*$||'`\n+      required=\"$required ${INPUT} $dir/$include ${LIB}/$dir/$include\"\n+    done\n+  fi\n+fi\n+    \n+\n # This loop does not appear to do anything, because it uses file\n # rather than $file when setting target.  It also appears to be\n # unnecessary, since the main loop processes symbolic links."}]}