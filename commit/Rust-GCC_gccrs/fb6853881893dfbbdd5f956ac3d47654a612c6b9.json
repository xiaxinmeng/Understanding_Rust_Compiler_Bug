{"sha": "fb6853881893dfbbdd5f956ac3d47654a612c6b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmI2ODUzODgxODkzZGZiYmRkNWY5NTZhYzNkNDc2NTRhNjEyYzZiOQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-10-20T22:57:04Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-10-20T22:57:04Z"}, "message": "Output negations of unused alternatives, even if one of the\nalternatives is selected.\n\nFrom-SVN: r10489", "tree": {"sha": "b5d1d3802d53bf9d2609767d1cdb86919fdac4e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5d1d3802d53bf9d2609767d1cdb86919fdac4e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fb6853881893dfbbdd5f956ac3d47654a612c6b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb6853881893dfbbdd5f956ac3d47654a612c6b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb6853881893dfbbdd5f956ac3d47654a612c6b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb6853881893dfbbdd5f956ac3d47654a612c6b9/comments", "author": null, "committer": null, "parents": [{"sha": "09578c273ed630628bc8ae4f31a91694c1464107", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09578c273ed630628bc8ae4f31a91694c1464107", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09578c273ed630628bc8ae4f31a91694c1464107"}], "stats": {"total": 29, "additions": 11, "deletions": 18}, "files": [{"sha": "d4cc7ff7fe50d5a028e8e6a208ef8333f92a0d27", "filename": "gcc/genmultilib", "status": "modified", "additions": 11, "deletions": 18, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fb6853881893dfbbdd5f956ac3d47654a612c6b9/gcc%2Fgenmultilib", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fb6853881893dfbbdd5f956ac3d47654a612c6b9/gcc%2Fgenmultilib", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgenmultilib?ref=fb6853881893dfbbdd5f956ac3d47654a612c6b9", "patch": "@@ -59,15 +59,15 @@\n #   genmultilib \"m68000/m68020 msoft-float\" \"m68000 m68020 msoft-float\"\n #\t\t\"m68000=mc68000\"\n # This produces:\n-#   #define MULTILIB_MATCHES \"\\\n-#   m68000/msoft-float m68000 msoft-float;\\\n-#   m68000/msoft-float mc68000 msoft-float;\\\n-#   m68020/msoft-float m68020 msoft-float;\\\n-#   msoft-float !m68000 !mc68000 !m68020 msoft-float;\\\n-#   m68000 m68000 !msoft-float;\\\n-#   m68000 mc60000 !msoft-float;\\\n-#   m68020 m68020 !msoft-float;\\\n+#   #define MULTILIB_SELECT \"\\\n #   . !m68000 !mc68000 !m68020 !msoft-float;\\\n+#   m68000 m68000 !m68020 !msoft-float;\\\n+#   m68000 mc60000 !m68020 !msoft-float;\\\n+#   m68020 !m68000 !mc68000 m68020 !msoft-float;\\\n+#   msoft-float !m68000 !mc68000 !m68020 msoft-float;\\\n+#   m68000/msoft-float m68000 !m68020 msoft-float;\\\n+#   m68000/msoft-float mc68000 !m68020 msoft-float;\\\n+#   m68020/msoft-float !m68000 !mc68000 m68020 msoft-float;\\\n #   \"\n # The effect is that `gcc -msoft-float' (for example) will append\n # msoft-float to the directory name when searching for libraries or\n@@ -200,24 +200,17 @@ for combo in ${combinations}; do\n   dirout=`echo ${dirout} | sed -e 's|^/||' -e 's|/$||g'`\n \n   # Look through the options.  We must output each option that is\n-  # present, and negate each option that is not present.  If an\n-  # element of a set is present, we need not negate the other elements\n-  # of the set.\n+  # present, and negate each option that is not present.\n   optout=\n   for set in ${options}; do\n     setopts=`echo ${set} | sed -e 's|/| |g'`\n-    found=\n     for opt in ${setopts}; do\n       if expr \"${combo} \" : \".*/${opt}/.*\" > /dev/null; then\n \toptout=\"${optout} ${opt}\"\n-\tfound=yes\n+      else\n+\toptout=\"${optout} !${opt}\"\n       fi\n     done\n-    if [ \"${found}\" = \"\" ]; then\n-      for opt in ${setopts}; do\n-\toptout=\"${optout} !${opt}\"\n-      done\n-    fi\n   done\n   optout=`echo ${optout} | sed -e 's/^ //'`\n "}]}