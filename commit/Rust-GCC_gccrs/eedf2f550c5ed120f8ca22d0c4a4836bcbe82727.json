{"sha": "eedf2f550c5ed120f8ca22d0c4a4836bcbe82727", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWVkZjJmNTUwYzVlZDEyMGY4Y2EyMmQwYzRhNDgzNmJjYmU4MjcyNw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2000-01-24T18:58:32Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2000-01-24T18:58:32Z"}, "message": "reg-stack.c (subst_stack_regs_pat): Handle correctly USEs of dead registers.\n\n\n\t* reg-stack.c (subst_stack_regs_pat): Handle correctly USEs of\n\tdead registers.\n\nFrom-SVN: r31588", "tree": {"sha": "37a4177603dd6348baef3608f1252a05e0b49c71", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/37a4177603dd6348baef3608f1252a05e0b49c71"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eedf2f550c5ed120f8ca22d0c4a4836bcbe82727", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eedf2f550c5ed120f8ca22d0c4a4836bcbe82727", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eedf2f550c5ed120f8ca22d0c4a4836bcbe82727", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eedf2f550c5ed120f8ca22d0c4a4836bcbe82727/comments", "author": null, "committer": null, "parents": [{"sha": "564d80f490595b536426ffbb5b15a787f4561e8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/564d80f490595b536426ffbb5b15a787f4561e8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/564d80f490595b536426ffbb5b15a787f4561e8e"}], "stats": {"total": 23, "additions": 8, "deletions": 15}, "files": [{"sha": "a04ed4fc4babd9e40201c46f039109c61cae47c1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eedf2f550c5ed120f8ca22d0c4a4836bcbe82727/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eedf2f550c5ed120f8ca22d0c4a4836bcbe82727/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=eedf2f550c5ed120f8ca22d0c4a4836bcbe82727", "patch": "@@ -1,3 +1,8 @@\n+Mon Jan 24 19:49:47 MET 2000  Jan Hubicka  <jh@suse.cz>\n+\n+\t* reg-stack.c (subst_stack_regs_pat): Handle correctly USEs of\n+\tdead registers.\n+\n Mon Jan 24 17:37:31 MET 2000  Jan Hubicka  <jh@suse.cz>\n \n \t* i386.h (FIRST_PSEUDO_REGISTER): Set to 21."}, {"sha": "2edd57906cd8f3ca78a36e7abf760448a46352d2", "filename": "gcc/reg-stack.c", "status": "modified", "additions": 3, "deletions": 15, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eedf2f550c5ed120f8ca22d0c4a4836bcbe82727/gcc%2Freg-stack.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eedf2f550c5ed120f8ca22d0c4a4836bcbe82727/gcc%2Freg-stack.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freg-stack.c?ref=eedf2f550c5ed120f8ca22d0c4a4836bcbe82727", "patch": "@@ -1383,24 +1383,12 @@ subst_stack_regs_pat (insn, regstack, pat)\n       if (STACK_REG_P (*src) \n           && find_regno_note (insn, REG_DEAD, REGNO (*src)))\n         {\n-\t   /* In stupid allocation the USE might be used to extend lifetime\n-\t      of variable to given scope.  This may end up as USE of dead\n-\t      register.  */\n-\t   if (optimize || get_hard_regnum (regstack, *src) != -1)\n-\t     emit_pop_insn (insn, regstack, *src, EMIT_AFTER);\n+\t   emit_pop_insn (insn, regstack, *src, EMIT_AFTER);\n \t   return;\n         }\n+      /* ??? Uninitialized USE should not happen.  */\n       else if (get_hard_regnum (regstack, *src) == -1)\n-\t{\n-\t   if (optimize)\n-\t     abort();\n-\t   if (GET_CODE (PATTERN (insn)) != USE)\n-\t     abort();\n-\t   PATTERN (insn) = gen_rtx_SET (GET_MODE (*src), *src,\n-\t\t\t\t\t CONST0_RTX (GET_MODE (*src)));\n-\t   subst_stack_regs_pat (insn, regstack, PATTERN (insn));\n-\t   return;\n-\t}\n+\tabort();\n       break;\n \n     case CLOBBER:"}]}