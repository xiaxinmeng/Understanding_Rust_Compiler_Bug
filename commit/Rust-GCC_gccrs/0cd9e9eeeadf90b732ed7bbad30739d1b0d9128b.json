{"sha": "0cd9e9eeeadf90b732ed7bbad30739d1b0d9128b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGNkOWU5ZWVlYWRmOTBiNzMyZWQ3YmJhZDMwNzM5ZDFiMGQ5MTI4Yg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2013-06-04T07:41:18Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2013-06-04T07:41:18Z"}, "message": "expmed.c (extract_bit_field_1): In the larger-than-a-word case...\n\n\t* expmed.c (extract_bit_field_1): In the larger-than-a-word case, factor\n\tout the processing order as in store_bit_field_1.\n\nFrom-SVN: r199637", "tree": {"sha": "187f2f0be4d237ebc45c7825079b5c251948b0c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/187f2f0be4d237ebc45c7825079b5c251948b0c1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0cd9e9eeeadf90b732ed7bbad30739d1b0d9128b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cd9e9eeeadf90b732ed7bbad30739d1b0d9128b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0cd9e9eeeadf90b732ed7bbad30739d1b0d9128b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cd9e9eeeadf90b732ed7bbad30739d1b0d9128b/comments", "author": null, "committer": null, "parents": [{"sha": "94b74637e0826b2654ffe40a97496c46e65e3252", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94b74637e0826b2654ffe40a97496c46e65e3252", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94b74637e0826b2654ffe40a97496c46e65e3252"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "cae512a705b9549a11c97976808a4a3eabc16f63", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cd9e9eeeadf90b732ed7bbad30739d1b0d9128b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cd9e9eeeadf90b732ed7bbad30739d1b0d9128b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0cd9e9eeeadf90b732ed7bbad30739d1b0d9128b", "patch": "@@ -1,3 +1,8 @@\n+2013-06-04  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* expmed.c (extract_bit_field_1): In the larger-than-a-word case, factor\n+\tout the processing order as in store_bit_field_1.\n+\n 2013-06-04  Jan Hubicka  <jh@suse.cz>\n \n \tPR middle-end/57500\n@@ -33,7 +38,7 @@\n 2013-06-03  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/57268\n-\t* sched-deps.c (sched_analyze_2): Don't flush_pedning_lists\n+\t* sched-deps.c (sched_analyze_2): Don't flush_pending_lists\n \tif DEBUG_INSN_P (insn).\n \n \tReapply"}, {"sha": "79f3424961d8d6191bef200f9b99362def695a24", "filename": "gcc/expmed.c", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cd9e9eeeadf90b732ed7bbad30739d1b0d9128b/gcc%2Fexpmed.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cd9e9eeeadf90b732ed7bbad30739d1b0d9128b/gcc%2Fexpmed.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpmed.c?ref=0cd9e9eeeadf90b732ed7bbad30739d1b0d9128b", "patch": "@@ -1486,6 +1486,7 @@ extract_bit_field_1 (rtx str_rtx, unsigned HOST_WIDE_INT bitsize,\n \t This is because the most significant word is the one which may\n \t be less than full.  */\n \n+      unsigned int backwards = WORDS_BIG_ENDIAN;\n       unsigned int nwords = (bitsize + (BITS_PER_WORD - 1)) / BITS_PER_WORD;\n       unsigned int i;\n       rtx last;\n@@ -1503,13 +1504,14 @@ extract_bit_field_1 (rtx str_rtx, unsigned HOST_WIDE_INT bitsize,\n \t     if I is 1, use the next to lowest word; and so on.  */\n \t  /* Word number in TARGET to use.  */\n \t  unsigned int wordnum\n-\t    = (WORDS_BIG_ENDIAN\n+\t    = (backwards\n \t       ? GET_MODE_SIZE (GET_MODE (target)) / UNITS_PER_WORD - i - 1\n \t       : i);\n \t  /* Offset from start of field in OP0.  */\n-\t  unsigned int bit_offset = (WORDS_BIG_ENDIAN\n-\t\t\t\t     ? MAX (0, ((int) bitsize - ((int) i + 1)\n-\t\t\t\t\t\t* (int) BITS_PER_WORD))\n+\t  unsigned int bit_offset = (backwards\n+\t\t\t\t     ? MAX ((int) bitsize - ((int) i + 1)\n+\t\t\t\t\t    * BITS_PER_WORD,\n+\t\t\t\t\t    0)\n \t\t\t\t     : (int) i * BITS_PER_WORD);\n \t  rtx target_part = operand_subword (target, wordnum, 1, VOIDmode);\n \t  rtx result_part\n@@ -1541,7 +1543,7 @@ extract_bit_field_1 (rtx str_rtx, unsigned HOST_WIDE_INT bitsize,\n \t      for (i = nwords; i < total_words; i++)\n \t\temit_move_insn\n \t\t  (operand_subword (target,\n-\t\t\t\t    WORDS_BIG_ENDIAN ? total_words - i - 1 : i,\n+\t\t\t\t    backwards ? total_words - i - 1 : i,\n \t\t\t\t    1, VOIDmode),\n \t\t   const0_rtx);\n \t    }"}]}