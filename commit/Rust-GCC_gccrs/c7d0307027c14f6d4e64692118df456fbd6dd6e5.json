{"sha": "c7d0307027c14f6d4e64692118df456fbd6dd6e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzdkMDMwNzAyN2MxNGY2ZDRlNjQ2OTIxMThkZjQ1NmZiZDZkZDZlNQ==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2005-09-28T22:46:48Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2005-09-28T22:46:48Z"}, "message": "locks.h: Use 64-bit versions of primitives when __LP64__ is defined rather than...\n\n\t* sysdep/powerpc/locks.h: Use 64-bit versions of primitives when\n\t__LP64__ is defined rather than __powerpc64__.\n\t(compare_and_swap): 'ret' is an obj_addr_t not just an int.\n\t(compare_and_swap_release): Likewise.\n\nFrom-SVN: r104746", "tree": {"sha": "faf724ba881bcb1a272116fb9caed07bfefc1341", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/faf724ba881bcb1a272116fb9caed07bfefc1341"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7d0307027c14f6d4e64692118df456fbd6dd6e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7d0307027c14f6d4e64692118df456fbd6dd6e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7d0307027c14f6d4e64692118df456fbd6dd6e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7d0307027c14f6d4e64692118df456fbd6dd6e5/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "107bcc113333f47bc389c0e7bca28671fa8874ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/107bcc113333f47bc389c0e7bca28671fa8874ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/107bcc113333f47bc389c0e7bca28671fa8874ff"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "8f881c9ad60cab6a79e7930fc595e628a415eea8", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7d0307027c14f6d4e64692118df456fbd6dd6e5/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7d0307027c14f6d4e64692118df456fbd6dd6e5/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=c7d0307027c14f6d4e64692118df456fbd6dd6e5", "patch": "@@ -1,3 +1,10 @@\n+2005-09-28  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* sysdep/powerpc/locks.h: Use 64-bit versions of primitives when\n+\t__LP64__ is defined rather than __powerpc64__.\n+\t(compare_and_swap): 'ret' is an obj_addr_t not just an int.\n+\t(compare_and_swap_release): Likewise.\n+\n 2005-09-28  David Daney  <ddaney@avtrex.com>\n \n \t* HACKING: Update instructions for classpath import."}, {"sha": "fe4f01ec182bb5f68235ca3d4623e7918806e7a7", "filename": "libjava/sysdep/powerpc/locks.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7d0307027c14f6d4e64692118df456fbd6dd6e5/libjava%2Fsysdep%2Fpowerpc%2Flocks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7d0307027c14f6d4e64692118df456fbd6dd6e5/libjava%2Fsysdep%2Fpowerpc%2Flocks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fsysdep%2Fpowerpc%2Flocks.h?ref=c7d0307027c14f6d4e64692118df456fbd6dd6e5", "patch": "@@ -11,7 +11,7 @@ details.  */\n #ifndef __SYSDEP_LOCKS_H__\n #define __SYSDEP_LOCKS_H__\n \n-#ifdef __powerpc64__\n+#ifdef __LP64__\n #define _LARX \"ldarx \"\n #define _STCX \"stdcx. \"\n #else\n@@ -30,7 +30,7 @@ inline static bool\n compare_and_swap (volatile obj_addr_t *addr, obj_addr_t old,\n \t\t  obj_addr_t new_val) \n {\n-  int ret;\n+  obj_addr_t ret;\n \n   __asm__ __volatile__ (\n \t   \"0:    \" _LARX \"%0,0,%1 \\n\"\n@@ -62,7 +62,7 @@ inline static bool\n compare_and_swap_release (volatile obj_addr_t *addr, obj_addr_t old,\n \t\t\t  obj_addr_t new_val)\n {\n-  int ret;\n+  obj_addr_t ret;\n \n   __asm__ __volatile__ (\"sync\" : : : \"memory\");\n "}]}