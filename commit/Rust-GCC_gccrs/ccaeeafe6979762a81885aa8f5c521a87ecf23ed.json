{"sha": "ccaeeafe6979762a81885aa8f5c521a87ecf23ed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NhZWVhZmU2OTc5NzYyYTgxODg1YWE4ZjVjNTIxYTg3ZWNmMjNlZA==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@redhat.com", "date": "2010-10-01T12:48:50Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2010-10-01T12:48:50Z"}, "message": "common.opt: Add -fcombine-stack-adjustments.\n\n        * common.opt: Add -fcombine-stack-adjustments.\n        * opts.c (decode_options): Enable -fcombine-stack-adjustments at\n        -O1.\n        * combine-stack-adj.c (gate_handle_stack_adjustments): Check\n        flag_combine_stack_adjustments.\n        * doc/invoke.texi: Document the new option.\n\nFrom-SVN: r164883", "tree": {"sha": "cf182ba85ca7af225b6974defdf77f77f2d0e86b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf182ba85ca7af225b6974defdf77f77f2d0e86b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ccaeeafe6979762a81885aa8f5c521a87ecf23ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccaeeafe6979762a81885aa8f5c521a87ecf23ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ccaeeafe6979762a81885aa8f5c521a87ecf23ed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccaeeafe6979762a81885aa8f5c521a87ecf23ed/comments", "author": {"login": "nickclifton", "id": 31441682, "node_id": "MDQ6VXNlcjMxNDQxNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickclifton", "html_url": "https://github.com/nickclifton", "followers_url": "https://api.github.com/users/nickclifton/followers", "following_url": "https://api.github.com/users/nickclifton/following{/other_user}", "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions", "organizations_url": "https://api.github.com/users/nickclifton/orgs", "repos_url": "https://api.github.com/users/nickclifton/repos", "events_url": "https://api.github.com/users/nickclifton/events{/privacy}", "received_events_url": "https://api.github.com/users/nickclifton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0d228a5255e2e2917cc8807f427221a36a583f4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d228a5255e2e2917cc8807f427221a36a583f4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d228a5255e2e2917cc8807f427221a36a583f4b"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "d17bdd376ba69b8e5af7165df110d18f5268e904", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccaeeafe6979762a81885aa8f5c521a87ecf23ed/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccaeeafe6979762a81885aa8f5c521a87ecf23ed/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ccaeeafe6979762a81885aa8f5c521a87ecf23ed", "patch": "@@ -1,3 +1,12 @@\n+2010-10-01  Nick Clifton  <nickc@redhat.com>\n+\n+\t* common.opt: Add -fcombine-stack-adjustments.\n+\t* opts.c (decode_options): Enable -fcombine-stack-adjustments at\n+\t-O1.\n+\t* combine-stack-adj.c (gate_handle_stack_adjustments): Check\n+\tflag_combine_stack_adjustments.\n+\t* doc/invoke.texi: Document the new option.\n+\n 2010-10-01  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/45854"}, {"sha": "0a7b53e250bb9f8939dbbed3b980a51798c57ad0", "filename": "gcc/combine-stack-adj.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccaeeafe6979762a81885aa8f5c521a87ecf23ed/gcc%2Fcombine-stack-adj.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccaeeafe6979762a81885aa8f5c521a87ecf23ed/gcc%2Fcombine-stack-adj.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine-stack-adj.c?ref=ccaeeafe6979762a81885aa8f5c521a87ecf23ed", "patch": "@@ -546,7 +546,7 @@ combine_stack_adjustments_for_block (basic_block bb)\n static bool\n gate_handle_stack_adjustments (void)\n {\n-  return (optimize > 0);\n+  return flag_combine_stack_adjustments;\n }\n \n static unsigned int"}, {"sha": "44a3de85c6a9c4114766f6f96e6bdf398c13ba04", "filename": "gcc/common.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccaeeafe6979762a81885aa8f5c521a87ecf23ed/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccaeeafe6979762a81885aa8f5c521a87ecf23ed/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=ccaeeafe6979762a81885aa8f5c521a87ecf23ed", "patch": "@@ -640,6 +640,10 @@ fcheck-data-deps\n Common Report Var(flag_check_data_deps)\n Compare the results of several data dependence analyzers.\n \n+fcombine-stack-adjustments\n+Common Report Var(flag_combine_stack_adjustments) Optimization\n+Looks for opportunities to reduce stack adjustments and stack references.\n+\n fcommon\n Common Report Var(flag_no_common,0) Optimization\n Do not put uninitialized globals in the common section"}, {"sha": "057ae7d3be83e2011c3a10aa422c0bac35d98c4f", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccaeeafe6979762a81885aa8f5c521a87ecf23ed/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccaeeafe6979762a81885aa8f5c521a87ecf23ed/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=ccaeeafe6979762a81885aa8f5c521a87ecf23ed", "patch": "@@ -334,7 +334,8 @@ Objective-C and Objective-C++ Dialects}.\n -falign-labels[=@var{n}] -falign-loops[=@var{n}] -fassociative-math @gol\n -fauto-inc-dec -fbranch-probabilities -fbranch-target-load-optimize @gol\n -fbranch-target-load-optimize2 -fbtr-bb-exclusive -fcaller-saves @gol\n--fcheck-data-deps -fconserve-stack -fcprop-registers -fcrossjumping @gol\n+-fcheck-data-deps -fcombine-stack-adjustments -fconserve-stack @gol\n+-fcprop-registers -fcrossjumping @gol\n -fcse-follow-jumps -fcse-skip-blocks -fcx-fortran-rules @gol\n -fcx-limited-range @gol\n -fdata-sections -fdce -fdce @gol\n@@ -6618,6 +6619,13 @@ those which have no call-preserved registers to use instead.\n \n Enabled at levels @option{-O2}, @option{-O3}, @option{-Os}.\n \n+@item -fcombine-stack-adjustments\n+@opindex fcombine-stack-adjustments\n+Tracks stack adjustments (pushes and pops) and stack memory references\n+and then tries to find ways to combine them.\n+\n+Enabled by default at @option{-O1} and higher.\n+\n @item -fconserve-stack\n @opindex fconserve-stack\n Attempt to minimize stack usage.  The compiler will attempt to use less"}, {"sha": "88321b55a25604cfd3306f9413dc8996ed8c3d0f", "filename": "gcc/opts.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccaeeafe6979762a81885aa8f5c521a87ecf23ed/gcc%2Fopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccaeeafe6979762a81885aa8f5c521a87ecf23ed/gcc%2Fopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts.c?ref=ccaeeafe6979762a81885aa8f5c521a87ecf23ed", "patch": "@@ -801,6 +801,7 @@ decode_options (unsigned int argc, const char **argv,\n   flag_tree_copy_prop = opt1;\n   flag_tree_sink = opt1;\n   flag_tree_ch = opt1;\n+  flag_combine_stack_adjustments = opt1;\n \n   /* -O2 optimizations.  */\n   opt2 = (optimize >= 2);"}]}