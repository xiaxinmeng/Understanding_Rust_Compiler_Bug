{"sha": "e572c0c68c9d1a48595039af480e18e7d4bdb292", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTU3MmMwYzY4YzlkMWE0ODU5NTAzOWFmNDgwZTE4ZTdkNGJkYjI5Mg==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "1998-05-06T07:58:27Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "1998-05-06T07:58:27Z"}, "message": "Be more careful when including <time.h> and <sys/file.h> in system.h.\n\nConsolidate O_RDONLY/O_WRONLY fallback definitions from various files\ninto system.h.\n        * system.h: Wrap time.h and sys/file.h in autoconf checks.\n        Provide default definitions for O_RDONLY and O_WRONLY here.\n        * cccp.c, cpplib.c, fix-header.c, gcc.c, protoize.c: Not here.\n\nFrom-SVN: r19571", "tree": {"sha": "1748b8dd9d2d201890a31a8e3a9e2446497db5d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1748b8dd9d2d201890a31a8e3a9e2446497db5d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e572c0c68c9d1a48595039af480e18e7d4bdb292", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e572c0c68c9d1a48595039af480e18e7d4bdb292", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e572c0c68c9d1a48595039af480e18e7d4bdb292", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e572c0c68c9d1a48595039af480e18e7d4bdb292/comments", "author": null, "committer": null, "parents": [{"sha": "45a455c9a6e7bcd78f24bb35a741ad3b62d40065", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45a455c9a6e7bcd78f24bb35a741ad3b62d40065", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45a455c9a6e7bcd78f24bb35a741ad3b62d40065"}], "stats": {"total": 50, "additions": 21, "deletions": 29}, "files": [{"sha": "f4ff118ab01614423325f5a8e9e03cddd2468014", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e572c0c68c9d1a48595039af480e18e7d4bdb292", "patch": "@@ -1,3 +1,10 @@\n+Wed May  6 10:52:49 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* system.h: Wrap time.h and sys/file.h in autoconf checks.\n+\tProvide default definitions for O_RDONLY and O_WRONLY here.\n+\n+\t* cccp.c, cpplib.c, fix-header.c, gcc.c, protoize.c: Not here.\n+\n 1998-05-06 Mark Mitchell  <mmitchell@usa.net>\n \n \t* tree.h (IS_EXPR_CODE_CLASS): Remove bogus '3'."}, {"sha": "165dfdcfa6d7402eb34f83ed54688e44336207be", "filename": "gcc/cccp.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=e572c0c68c9d1a48595039af480e18e7d4bdb292", "patch": "@@ -105,10 +105,6 @@ static void hack_vms_include_specification ();\n #define INO_T_EQ(a, b) 0\n #endif\n \n-#ifndef O_RDONLY\n-#define O_RDONLY 0\n-#endif\n-\n #undef MIN\n #undef MAX\n #define MIN(X,Y) ((X) < (Y) ? (X) : (Y))"}, {"sha": "7fde93f5678080905be51f759b10743a4a217736", "filename": "gcc/cpplib.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=e572c0c68c9d1a48595039af480e18e7d4bdb292", "patch": "@@ -45,10 +45,6 @@ Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */\n \n extern char *update_path ();\n \n-#ifndef O_RDONLY\n-#define O_RDONLY 0\n-#endif\n-\n #undef MIN\n #undef MAX\n #define MIN(X,Y) ((X) < (Y) ? (X) : (Y))"}, {"sha": "cb3238d01532c21032ab0cfccfc7b8eba50a1340", "filename": "gcc/fix-header.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Ffix-header.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Ffix-header.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffix-header.c?ref=e572c0c68c9d1a48595039af480e18e7d4bdb292", "patch": "@@ -77,10 +77,6 @@ Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */\n #include \"cpplib.h\"\n #include \"gansidecl.h\"\n \n-#ifndef O_RDONLY\n-#define O_RDONLY 0\n-#endif\n-\n extern void cpp_fatal ();\n \n #if !__STDC__ && !defined(const)"}, {"sha": "312af6dd4f367c717d8c35dfc29fea77d0ade1e0", "filename": "gcc/gcc.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=e572c0c68c9d1a48595039af480e18e7d4bdb292", "patch": "@@ -75,11 +75,6 @@ extern void set_std_prefix PROTO((char *, int));\n #define exit __posix_exit\n #endif\n \n-/* Define O_RDONLY if the system hasn't defined it for us.  */\n-#ifndef O_RDONLY\n-#define O_RDONLY 0\n-#endif\n-\n #ifdef USG\n #define vfork fork\n #endif /* USG */"}, {"sha": "7d81aeae4ff2c44425a6f95459c6a86aef98f8a2", "filename": "gcc/protoize.c", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Fprotoize.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Fprotoize.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprotoize.c?ref=e572c0c68c9d1a48595039af480e18e7d4bdb292", "patch": "@@ -144,14 +144,6 @@ typedef char * pointer_type;\n typedef char * const_pointer_type;\n #endif\n \n-#ifndef O_RDONLY\n-#define O_RDONLY        0\n-#endif\n-\n-#ifndef O_WRONLY\n-#define O_WRONLY        1\n-#endif\n-\n #if defined(POSIX)\n \n #include <signal.h>"}, {"sha": "468db6a667a0018b4edc8db7a4652b12de044e20", "filename": "gcc/system.h", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e572c0c68c9d1a48595039af480e18e7d4bdb292/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=e572c0c68c9d1a48595039af480e18e7d4bdb292", "patch": "@@ -104,16 +104,20 @@ extern int errno;\n # include <time.h>\n #else\n # if HAVE_SYS_TIME_H\n-# include <sys/time.h>\n+#  include <sys/time.h>\n # else\n-#  include <time.h>\n-#endif\n+#  ifdef HAVE_TIME_H\n+#   include <time.h>\n+#  endif\n+# endif\n #endif\n \n #ifdef HAVE_FCNTL_H\n # include <fcntl.h>\n #else\n-# include <sys/file.h>\n+# ifdef HAVE_SYS_FILE_H\n+#  include <sys/file.h>\n+# endif\n #endif\n \n #ifndef SEEK_SET\n@@ -127,6 +131,12 @@ extern int errno;\n # define W_OK 2\n # define R_OK 4\n #endif\n+#ifndef O_RDONLY\n+# define O_RDONLY 0\n+#endif\n+#ifndef O_WRONLY\n+# define O_WRONLY 1\n+#endif\n \n \n "}]}