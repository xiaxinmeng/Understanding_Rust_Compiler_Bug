{"sha": "c7ec5472672f0e68687081caa28ffb196e9c37a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzdlYzU0NzI2NzJmMGU2ODY4NzA4MWNhYTI4ZmZiMTk2ZTljMzdhMQ==", "commit": {"author": {"name": "Maxim Kuvyrkov", "email": "mkuvyrkov@ispras.ru", "date": "2006-03-30T15:41:00Z"}, "committer": {"name": "Maxim Kuvyrkov", "email": "mkuvyrkov@gcc.gnu.org", "date": "2006-03-30T15:41:00Z"}, "message": "re PR target/26734 (GCC cannot bootstrap on IA64 HP-UX)\n\n2006-03-30  Maxim Kuvyrkov  <mkuvyrkov@ispras.ru>\n\n\tPR target/26734\n\t* rtl.def (DEPS_LIST): Change type of the second operand to 'int'.\n\t* target.h (struct gcc_target.speculate_insn): Change type of the\n\tsecond parameter to 'int'.\n\t* lists.c (alloc_DEPS_LIST): Change signature.  Update reference to\n\tthe second operand of the DEPS_LIST.\n\t(copy_DEPS_LIST_list): Update reference\tto the second operand of the\n\tDEPS_LIST.\n\t* rtl.h (alloc_DEPS_LIST): Update signature.\n\t* sched-int.h (ds_t): Change typedef to 'int'.\n\t(DEP_STATUS, BITS_PER_DEP_STATUS): Update.\n\nFrom-SVN: r112538", "tree": {"sha": "3291951d5fbbe5479776ca150e5c6b32db277c5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3291951d5fbbe5479776ca150e5c6b32db277c5f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7ec5472672f0e68687081caa28ffb196e9c37a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7ec5472672f0e68687081caa28ffb196e9c37a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7ec5472672f0e68687081caa28ffb196e9c37a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7ec5472672f0e68687081caa28ffb196e9c37a1/comments", "author": null, "committer": null, "parents": [{"sha": "682b6a9e8f39f742d2db10c7d131a21405ca34fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/682b6a9e8f39f742d2db10c7d131a21405ca34fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/682b6a9e8f39f742d2db10c7d131a21405ca34fa"}], "stats": {"total": 50, "additions": 32, "deletions": 18}, "files": [{"sha": "e302bb761383252f290eff076aee49790783752d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c7ec5472672f0e68687081caa28ffb196e9c37a1", "patch": "@@ -1,3 +1,17 @@\n+2006-03-30  Maxim Kuvyrkov  <mkuvyrkov@ispras.ru>\n+\n+\tPR target/26734\n+\t* rtl.def (DEPS_LIST): Change type of the second operand to 'int'.\n+\t* target.h (struct gcc_target.speculate_insn): Change type of the\n+\tsecond parameter to 'int'.\n+\t* lists.c (alloc_DEPS_LIST): Change signature.  Update reference to\n+\tthe second operand of the DEPS_LIST.\n+\t(copy_DEPS_LIST_list): Update reference\tto the second operand of the\n+\tDEPS_LIST.\n+\t* rtl.h (alloc_DEPS_LIST): Update signature.\n+\t* sched-int.h (ds_t): Change typedef to 'int'.\n+\t(DEP_STATUS, BITS_PER_DEP_STATUS): Update.\n+\n 2006-03-30  Maxim Kuvyrkov  <mkuvyrkov@ispras.ru>\n \n \t* haifa-sched.c (try_ready): Change condition to restore"}, {"sha": "23529a362e24fd463e085765d46ea75cc4f0cafa", "filename": "gcc/lists.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2Flists.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2Flists.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flists.c?ref=c7ec5472672f0e68687081caa28ffb196e9c37a1", "patch": "@@ -1,6 +1,6 @@\n /* List management for the GCC expander.\n    Copyright (C) 1987, 1988, 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-   1999, 2003, 2004 Free Software Foundation, Inc.\n+   1999, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -159,7 +159,7 @@ alloc_EXPR_LIST (int kind, rtx val, rtx next)\n    node available, we'll use it, otherwise a call to gen_rtx_DEPS_LIST\n    is made.  */\n rtx\n-alloc_DEPS_LIST (rtx val, rtx next, HOST_WIDE_INT ds)\n+alloc_DEPS_LIST (rtx val, rtx next, int ds)\n {\n   rtx r;\n \n@@ -169,7 +169,7 @@ alloc_DEPS_LIST (rtx val, rtx next, HOST_WIDE_INT ds)\n       unused_deps_list = XEXP (r, 1);\n       XEXP (r, 0) = val;\n       XEXP (r, 1) = next;\n-      XWINT (r, 2) = ds;\n+      XINT (r, 2) = ds;\n       PUT_REG_NOTE_KIND (r, VOIDmode);\n \n       gcc_assert (GET_CODE (r) == DEPS_LIST);\n@@ -257,7 +257,7 @@ copy_DEPS_LIST_list (rtx list)\n \n   while (list)\n     {\n-      *resp = alloc_DEPS_LIST (XEXP (list, 0), 0, XWINT (list, 2));\n+      *resp = alloc_DEPS_LIST (XEXP (list, 0), 0, XINT (list, 2));\n       PUT_REG_NOTE_KIND (*resp, REG_NOTE_KIND (list));\n       resp = &XEXP (*resp, 1);\n       list = XEXP (list, 1);"}, {"sha": "4c5a632063bb18de9635e459a35085e979793131", "filename": "gcc/rtl.def", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2Frtl.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2Frtl.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtl.def?ref=c7ec5472672f0e68687081caa28ffb196e9c37a1", "patch": "@@ -2,7 +2,7 @@\n    Register Transfer Expressions (rtx's) that make up the\n    Register Transfer Language (rtl) used in the Back End of the GNU compiler.\n    Copyright (C) 1987, 1988, 1992, 1994, 1995, 1997, 1998, 1999, 2000, 2004,\n-   2005\n+   2005, 2006\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -95,9 +95,8 @@ DEF_RTL_EXPR(INSN_LIST, \"insn_list\", \"ue\", RTX_EXTRA)\n \n /* a linked list of dependencies. \n    The insns are represented in print by their uids. \n-   Operand 2 is a degree of speculativeness of the dependence.\n-   Operand 3 is a degree of weakness of the dependence.  */\n-DEF_RTL_EXPR(DEPS_LIST, \"deps_list\", \"uew\", RTX_EXTRA)\n+   Operand 2 is the status of a dependence (see sched-int.h for more).  */\n+DEF_RTL_EXPR(DEPS_LIST, \"deps_list\", \"uei\", RTX_EXTRA)\n \n /* SEQUENCE appears in the result of a `gen_...' function\n    for a DEFINE_EXPAND that wants to make several insns."}, {"sha": "a442fb25d20f72fac83970f078a0c7e237ce4031", "filename": "gcc/rtl.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2Frtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2Frtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtl.h?ref=c7ec5472672f0e68687081caa28ffb196e9c37a1", "patch": "@@ -1,6 +1,6 @@\n /* Register Transfer Language (RTL) definitions for GCC\n-   Copyright (C) 1987, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-   1999, 2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.\n+   Copyright (C) 1987, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,\n+   2000, 2001, 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -1757,7 +1757,7 @@ void free_INSN_LIST_node\t\t(rtx);\n rtx alloc_INSN_LIST\t\t\t(rtx, rtx);\n rtx alloc_EXPR_LIST\t\t\t(int, rtx, rtx);\n void free_DEPS_LIST_list (rtx *);\n-rtx alloc_DEPS_LIST (rtx, rtx, HOST_WIDE_INT);\n+rtx alloc_DEPS_LIST (rtx, rtx, int);\n void remove_free_DEPS_LIST_elem (rtx, rtx *);\n void remove_free_INSN_LIST_elem (rtx, rtx *);\n rtx remove_list_elem (rtx, rtx *);"}, {"sha": "cc9812ad20f0da331d30c13eb406248dd535d3ec", "filename": "gcc/sched-int.h", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2Fsched-int.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2Fsched-int.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched-int.h?ref=c7ec5472672f0e68687081caa28ffb196e9c37a1", "patch": "@@ -1,7 +1,7 @@\n /* Instruction scheduling pass.  This file contains definitions used\n    internally in the scheduler.\n    Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-   1999, 2000, 2001, 2003, 2004 Free Software Foundation, Inc.\n+   1999, 2000, 2001, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -36,8 +36,8 @@ extern state_t curr_state;\n /* Forward declaration.  */\n struct ready_list;\n \n-/* Type to represent status of a dependence.  A convinient short alias.  */\n-typedef HOST_WIDE_INT ds_t;\n+/* Type to represent status of a dependence.  */\n+typedef int ds_t;\n \n /* Type to represent weakness of speculative dependence.  */\n typedef int dw_t;\n@@ -377,10 +377,10 @@ extern regset *glat_start, *glat_end;\n    for using to describe instruction's status.  It is set whenever instuction\n    has at least one dependence, that cannot be overcome.\n    See also: check_dep_status () in sched-deps.c .  */\n-#define DEP_STATUS(LINK) XWINT (LINK, 2)\n+#define DEP_STATUS(LINK) XINT (LINK, 2)\n \n /* We exclude sign bit.  */\n-#define BITS_PER_DEP_STATUS (HOST_BITS_PER_WIDE_INT - 1)\n+#define BITS_PER_DEP_STATUS (HOST_BITS_PER_INT - 1)\n \n /* First '4' stands for 3 dep type bits and HARD_DEP bit.\n    Second '4' stands for BEGIN_{DATA, CONTROL}, BE_IN_{DATA, CONTROL}"}, {"sha": "b9d35782a618dadc4c5c90ed45c7828ab5b00166", "filename": "gcc/target.h", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2Ftarget.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7ec5472672f0e68687081caa28ffb196e9c37a1/gcc%2Ftarget.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftarget.h?ref=c7ec5472672f0e68687081caa28ffb196e9c37a1", "patch": "@@ -1,5 +1,6 @@\n /* Data structure definitions for a generic GCC target.\n-   Copyright (C) 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.\n+   Copyright (C) 2001, 2002, 2003, 2004, 2005, 2006\n+   Free Software Foundation, Inc.\n \n This program is free software; you can redistribute it and/or modify it\n under the terms of the GNU General Public License as published by the\n@@ -329,7 +330,7 @@ struct gcc_target\n        0, if current pattern satisfies the requested speculation type,\n        1, if pattern of the instruction should be changed to the newly\n        generated one.  */\n-    int (* speculate_insn) (rtx, HOST_WIDE_INT, rtx *);\n+    int (* speculate_insn) (rtx, int, rtx *);\n \n     /* The following member value is a pointer to a function called\n        by the insn scheduler.  It should return true if the check instruction"}]}