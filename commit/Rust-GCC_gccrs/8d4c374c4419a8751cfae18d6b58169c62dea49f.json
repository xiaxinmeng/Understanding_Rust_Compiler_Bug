{"sha": "8d4c374c4419a8751cfae18d6b58169c62dea49f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQ0YzM3NGM0NDE5YTg3NTFjZmFlMThkNmI1ODE2OWM2MmRlYTQ5Zg==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2021-04-27T12:27:40Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2021-04-27T13:17:34Z"}, "message": "tree-optimization/99912 - schedule another TODO_remove_unused_locals\n\nThis makes sure to remove unused locals and prune CLOBBERs after\nthe first scalar cleanup phase after IPA optimizations.  On the\ntestcase in the PR this results in 8000 CLOBBERs removed which\nin turn unleashes more DSE which otherwise hits its walking limit\nof 256 too early on this testcase.\n\n2021-04-27  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/99912\n\t* passes.def: Add comment about new TODO_remove_unused_locals.\n\t* tree-stdarg.c (pass_data_stdarg): Run TODO_remove_unused_locals\n\tat start.", "tree": {"sha": "1d4664ee6bc6480da5d25f58cf23495c9be15b75", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1d4664ee6bc6480da5d25f58cf23495c9be15b75"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d4c374c4419a8751cfae18d6b58169c62dea49f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d4c374c4419a8751cfae18d6b58169c62dea49f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d4c374c4419a8751cfae18d6b58169c62dea49f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d4c374c4419a8751cfae18d6b58169c62dea49f/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8e1f1d24179690fd9c0f63c27b12e030010d9ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8e1f1d24179690fd9c0f63c27b12e030010d9ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8e1f1d24179690fd9c0f63c27b12e030010d9ea"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "f7c42897f43a6adcd5dfc2691df4c8876692fc12", "filename": "gcc/passes.def", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d4c374c4419a8751cfae18d6b58169c62dea49f/gcc%2Fpasses.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d4c374c4419a8751cfae18d6b58169c62dea49f/gcc%2Fpasses.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.def?ref=8d4c374c4419a8751cfae18d6b58169c62dea49f", "patch": "@@ -212,6 +212,9 @@ along with GCC; see the file COPYING3.  If not see\n       NEXT_PASS (pass_vrp, true /* warn_array_bounds_p */);\n       NEXT_PASS (pass_dse);\n       NEXT_PASS (pass_dce);\n+      /* pass_stdarg is always run and at this point we execute\n+         TODO_remove_unused_locals to prune CLOBBERs of dead\n+\t variables which are otherwise a churn on alias walkings.  */\n       NEXT_PASS (pass_stdarg);\n       NEXT_PASS (pass_call_cdce);\n       NEXT_PASS (pass_cselim);"}, {"sha": "2f77a613df03d590f24d5d92a21b4bfcab9409a6", "filename": "gcc/tree-stdarg.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d4c374c4419a8751cfae18d6b58169c62dea49f/gcc%2Ftree-stdarg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d4c374c4419a8751cfae18d6b58169c62dea49f/gcc%2Ftree-stdarg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-stdarg.c?ref=8d4c374c4419a8751cfae18d6b58169c62dea49f", "patch": "@@ -1114,7 +1114,7 @@ const pass_data pass_data_stdarg =\n   ( PROP_cfg | PROP_ssa ), /* properties_required */\n   PROP_gimple_lva, /* properties_provided */\n   0, /* properties_destroyed */\n-  0, /* todo_flags_start */\n+  TODO_remove_unused_locals, /* todo_flags_start */\n   0, /* todo_flags_finish */\n };\n "}]}