{"sha": "30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzA0ODBiY2Q3OTRmOGEwZDRlNDg5YjhlYjNmMDQzYjJhYjcyZTdlOA==", "commit": {"author": {"name": "Ilya Enkovich", "email": "enkovich.gnu@gmail.com", "date": "2016-01-28T10:09:12Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2016-01-28T10:09:12Z"}, "message": "tree-vect-stmts.c (vectorizable_comparison): Add NULL check for vectype.\n\ngcc/\n\n\t* tree-vect-stmts.c (vectorizable_comparison): Add\n\tNULL check for vectype.\n\ngcc/testsuite/\n\n\t* gcc.dg/declare-simd.c: New test.\n\nFrom-SVN: r232917", "tree": {"sha": "8b3774bdeb3d96f5bcd4b368705444165028c6e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b3774bdeb3d96f5bcd4b368705444165028c6e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8/comments", "author": null, "committer": null, "parents": [{"sha": "14ba8d6d0786acbda30f802dd6bc4d07f4df2e5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14ba8d6d0786acbda30f802dd6bc4d07f4df2e5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14ba8d6d0786acbda30f802dd6bc4d07f4df2e5f"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "aa98585688a6f30907c9b98750f22853f17d3d75", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8", "patch": "@@ -1,3 +1,8 @@\n+2016-01-28  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\t* tree-vect-stmts.c (vectorizable_comparison): Add\n+\tNULL check for vectype.\n+\n 2016-01-28  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/69466"}, {"sha": "fb29f731b2a8b29efff89600e912a44199e4df2b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8", "patch": "@@ -1,3 +1,7 @@\n+2016-01-28  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\t* gcc.dg/declare-simd.c: New test.\n+\n 2016-01-28  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/69466"}, {"sha": "1c71b60c97427705e2751088e24840e2613b4f03", "filename": "gcc/testsuite/gcc.dg/declare-simd.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8/gcc%2Ftestsuite%2Fgcc.dg%2Fdeclare-simd.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8/gcc%2Ftestsuite%2Fgcc.dg%2Fdeclare-simd.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdeclare-simd.c?ref=30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8", "patch": "@@ -0,0 +1,14 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O3 -fopenmp-simd\" } */\n+\n+#pragma omp declare simd linear (p2, p3)\n+extern void fn2 (float p1, float *p2, float *p3);\n+\n+float *a, *b;\n+void fn1 (float *p1)\n+{\n+  int i;\n+#pragma omp simd\n+  for (i = 0; i < 1000; i++)\n+    fn2 (p1[i], a + i, b + i);\n+}"}, {"sha": "fa4a364983a62496210b275d09045be5cb75ff50", "filename": "gcc/tree-vect-stmts.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8/gcc%2Ftree-vect-stmts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8/gcc%2Ftree-vect-stmts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-stmts.c?ref=30480bcd794f8a0d4e489b8eb3f043b2ab72e7e8", "patch": "@@ -7764,7 +7764,7 @@ vectorizable_comparison (gimple *stmt, gimple_stmt_iterator *gsi,\n   if (!STMT_VINFO_RELEVANT_P (stmt_info) && !bb_vinfo)\n     return false;\n \n-  if (!VECTOR_BOOLEAN_TYPE_P (vectype))\n+  if (!vectype || !VECTOR_BOOLEAN_TYPE_P (vectype))\n     return false;\n \n   mask_type = vectype;"}]}