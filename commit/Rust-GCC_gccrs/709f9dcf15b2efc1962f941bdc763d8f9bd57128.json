{"sha": "709f9dcf15b2efc1962f941bdc763d8f9bd57128", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzA5ZjlkY2YxNWIyZWZjMTk2MmY5NDFiZGM3NjNkOGY5YmQ1NzEyOA==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-07-25T00:57:10Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-07-25T00:57:10Z"}, "message": "re PR c++/27572 (ICE on typedef in parameter declaration)\n\n\tPR c++/27572\n\t* decl.c (grokdeclarator): Return error_mark_node after invalid\n\ttypedef.\n\n\t* g++.dg/other/typedef1.C: New test.\n\t* g++.dg/template/typedef4.C: New test.\n\t* g++.dg/template/typedef5.C: New test.\n\nFrom-SVN: r115729", "tree": {"sha": "3b7cde3085cbafc4836b2bf05e3b74de24dee8d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b7cde3085cbafc4836b2bf05e3b74de24dee8d2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/709f9dcf15b2efc1962f941bdc763d8f9bd57128", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/709f9dcf15b2efc1962f941bdc763d8f9bd57128", "html_url": "https://github.com/Rust-GCC/gccrs/commit/709f9dcf15b2efc1962f941bdc763d8f9bd57128", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/709f9dcf15b2efc1962f941bdc763d8f9bd57128/comments", "author": null, "committer": null, "parents": [{"sha": "04afa2cbfc94977432c8e0199783744acf935dbc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04afa2cbfc94977432c8e0199783744acf935dbc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04afa2cbfc94977432c8e0199783744acf935dbc"}], "stats": {"total": 41, "additions": 40, "deletions": 1}, "files": [{"sha": "44f6c2324857f12f6fb72fd4a219491e219e86f9", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=709f9dcf15b2efc1962f941bdc763d8f9bd57128", "patch": "@@ -1,3 +1,9 @@\n+2006-07-24  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/27572\n+\t* decl.c (grokdeclarator): Return error_mark_node after invalid\n+\ttypedef.\n+\n 2006-07-23  Daniel Jacobowitz  <dan@codesourcery.com>\n \n \tPR c++/28460"}, {"sha": "20ad2e98fa5fe21b4ae79fb7b985d6c3fc5ab25f", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=709f9dcf15b2efc1962f941bdc763d8f9bd57128", "patch": "@@ -7351,7 +7351,10 @@ grokdeclarator (const cp_declarator *declarator,\n   if (decl_context == PARM)\n     {\n       if (declspecs->specs[(int)ds_typedef])\n-\terror (\"typedef declaration invalid in parameter declaration\");\n+\t{\n+\t  error (\"typedef declaration invalid in parameter declaration\");\n+\t  return error_mark_node;\n+\t}\n       else if (storage_class == sc_static\n \t       || storage_class == sc_extern\n \t       || thread_p)"}, {"sha": "6ca06c69ca67ca22a98612010d1f6dcb9145a1b3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=709f9dcf15b2efc1962f941bdc763d8f9bd57128", "patch": "@@ -1,3 +1,10 @@\n+2006-07-24  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/27572\n+\t* g++.dg/other/typedef1.C: New test.\n+\t* g++.dg/template/typedef4.C: New test.\n+\t* g++.dg/template/typedef5.C: New test.\n+\n 2006-07-24  Erik Edelmann  <eedelman@gcc.gnu.org>\n \n \tPR fortran/28416"}, {"sha": "55d62bb7cb2498d119777bf2c0853f90e7b151a1", "filename": "gcc/testsuite/g++.dg/other/typedef1.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Ftypedef1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Ftypedef1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Ftypedef1.C?ref=709f9dcf15b2efc1962f941bdc763d8f9bd57128", "patch": "@@ -0,0 +1,7 @@\n+// PR c++/27572\n+// { dg-do compile }\n+\n+void f1(typedef) {}        // { dg-error \"no type|typedef declaration\" }\n+void f2(typedef x) {}      // { dg-error \"no type|typedef declaration\" }\n+void f3(typedef x[]) {}    // { dg-error \"no type|typedef declaration\" }\n+void f4(typedef int x) {}  // { dg-error \"typedef declaration\" }"}, {"sha": "8337110c5b6078c641f0fd27ec538bf8beaa9e1f", "filename": "gcc/testsuite/g++.dg/template/typedef4.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypedef4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypedef4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypedef4.C?ref=709f9dcf15b2efc1962f941bdc763d8f9bd57128", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/27572\n+// { dg-do compile }\n+\n+template<typedef> void foo();  // { dg-error \"no type|typedef declaration\" }\n+\n+void bar()\n+{\n+  foo<int>();                  // { dg-error \"matching\" }\n+}"}, {"sha": "843d1a9755df8b2759ab897be85898adc3355719", "filename": "gcc/testsuite/g++.dg/template/typedef5.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypedef5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709f9dcf15b2efc1962f941bdc763d8f9bd57128/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypedef5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ftypedef5.C?ref=709f9dcf15b2efc1962f941bdc763d8f9bd57128", "patch": "@@ -0,0 +1,7 @@\n+// PR c++/27572\n+// { dg-do compile }\n+\n+template<typedef,int>        struct A1; // { dg-error \"no type|typedef declaration\" }\n+template<typedef x,int>      struct A2; // { dg-error \"no type|typedef declaration\" }\n+template<typedef x[],int>    struct A3; // { dg-error \"no type|typedef declaration\" }\n+template<typedef int x, int> struct A4; // { dg-error \"typedef declaration\" }"}]}