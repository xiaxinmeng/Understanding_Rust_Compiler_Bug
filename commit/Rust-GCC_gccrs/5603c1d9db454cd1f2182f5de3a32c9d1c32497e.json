{"sha": "5603c1d9db454cd1f2182f5de3a32c9d1c32497e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTYwM2MxZDlkYjQ1NGNkMWYyMTgyZjVkZTNhMzJjOWQxYzMyNDk3ZQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2017-10-30T10:33:40Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2017-10-30T10:33:40Z"}, "message": "re PR target/82725 ([x86_64] internal compiler error: in change_address_1, at emit-rtl.c:2162)\n\n\tPR target/82725\n\t* config/i386/i386.c (legitimate_pic_address_disp_p): Allow\n\tUNSPEC_DTPOFF and UNSPEC_NTPOFF with SImode immediate offset.\n\ntestsuite/ChangeLog:\n\n\tPR target/82725\n\t* g++.dg/pr82725.C: New test.\n\nFrom-SVN: r254212", "tree": {"sha": "58691558acbb807f3302b7373855c703b66c3144", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58691558acbb807f3302b7373855c703b66c3144"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5603c1d9db454cd1f2182f5de3a32c9d1c32497e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5603c1d9db454cd1f2182f5de3a32c9d1c32497e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5603c1d9db454cd1f2182f5de3a32c9d1c32497e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5603c1d9db454cd1f2182f5de3a32c9d1c32497e/comments", "author": null, "committer": null, "parents": [{"sha": "87039aa26687f4611fab4d3c5abaa62d2c375899", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87039aa26687f4611fab4d3c5abaa62d2c375899", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87039aa26687f4611fab4d3c5abaa62d2c375899"}], "stats": {"total": 42, "additions": 37, "deletions": 5}, "files": [{"sha": "ffbc1fb06c250ba204613a5631a66c02fbd8a638", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5603c1d9db454cd1f2182f5de3a32c9d1c32497e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5603c1d9db454cd1f2182f5de3a32c9d1c32497e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5603c1d9db454cd1f2182f5de3a32c9d1c32497e", "patch": "@@ -1,3 +1,9 @@\n+2017-10-30  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/82725\n+\t* config/i386/i386.c (legitimate_pic_address_disp_p): Allow\n+\tUNSPEC_DTPOFF and UNSPEC_NTPOFF with SImode immediate offset.\n+\n 2017-10-29  Jim Wilson  <wilson@tuliptree.org>\n \n \t* gimplify.c: Include tm_p.h."}, {"sha": "2de0dd0c2839f5f35016d89fdbb625d0ec3d9f84", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5603c1d9db454cd1f2182f5de3a32c9d1c32497e/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5603c1d9db454cd1f2182f5de3a32c9d1c32497e/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=5603c1d9db454cd1f2182f5de3a32c9d1c32497e", "patch": "@@ -15079,10 +15079,16 @@ legitimate_pic_address_disp_p (rtx disp)\n \t    break;\n \t  op0 = XEXP (XEXP (disp, 0), 0);\n \t  op1 = XEXP (XEXP (disp, 0), 1);\n-\t  if (!CONST_INT_P (op1)\n-\t      || INTVAL (op1) >= 16*1024*1024\n+\t  if (!CONST_INT_P (op1))\n+\t    break;\n+\t  if (GET_CODE (op0) == UNSPEC\n+\t      && (XINT (op0, 1) == UNSPEC_DTPOFF\n+\t\t  || XINT (op0, 1) == UNSPEC_NTPOFF)\n+\t      && trunc_int_for_mode (INTVAL (op1), SImode) == INTVAL (op1))\n+\t    return true;\n+\t  if (INTVAL (op1) >= 16*1024*1024\n \t      || INTVAL (op1) < -16*1024*1024)\n-            break;\n+\t    break;\n \t  if (GET_CODE (op0) == LABEL_REF)\n \t    return true;\n \t  if (GET_CODE (op0) == CONST"}, {"sha": "97338fdacd03cee653386281dd89865aba86eb50", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5603c1d9db454cd1f2182f5de3a32c9d1c32497e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5603c1d9db454cd1f2182f5de3a32c9d1c32497e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5603c1d9db454cd1f2182f5de3a32c9d1c32497e", "patch": "@@ -1,8 +1,12 @@\n+2017-10-30  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/82725\n+\t* g++.dg/pr82725.C: New test.\n+\n 2017-10-29  Jim Wilson  <wilson@tuliptree.org>\n \n \t* lib/gcc-dg.exp (gcc-dg-debug-runtest): Delete -gcoff.\n-\t* lib/gfortran-dg.exp (gfortran-dg-debug-runtest): Delete\n-\t-gcoff.\n+\t* lib/gfortran-dg.exp (gfortran-dg-debug-runtest): Delete -gcoff.\n \n 2017-10-28  Paolo Carlini  <paolo.carlini@oracle.com>\n "}, {"sha": "c92b28a3520bf6ae1bda0bcd9943d74431875751", "filename": "gcc/testsuite/g++.dg/pr82725.C", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5603c1d9db454cd1f2182f5de3a32c9d1c32497e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr82725.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5603c1d9db454cd1f2182f5de3a32c9d1c32497e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr82725.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr82725.C?ref=5603c1d9db454cd1f2182f5de3a32c9d1c32497e", "patch": "@@ -0,0 +1,16 @@\n+// { dg-do compile { target i?86-*-* x86_64-*-* } }\n+// { dg-require-effective-target pie }\n+// { dg-options \"-O2 -fpie -mtls-direct-seg-refs\" }\n+\n+struct string\n+{\n+  __SIZE_TYPE__ length;\n+  const char *ptr;\n+};\n+\n+string\n+tempDir ()\n+{\n+  thread_local string cache;\n+  return cache;\n+}"}]}